(()=>{var IW=Object.create;var WM=Object.defineProperty;var RW=Object.getOwnPropertyDescriptor;var $W=Object.getOwnPropertyNames;var HW=Object.getPrototypeOf,OW=Object.prototype.hasOwnProperty;var Tt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var PW=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let p of $W(t))!OW.call(e,p)&&p!==n&&WM(e,p,{get:()=>t[p],enumerable:!(r=RW(t,p))||r.enumerable});return e};var wi=(e,t,n)=>(n=e!=null?IW(HW(e)):{},PW(t||!e||!e.__esModule?WM(n,"default",{value:e,enumerable:!0}):n,e));var E2=Tt((wg,hT)=>{(function(e,t){typeof wg=="object"&&typeof hT=="object"?hT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof wg=="object"?wg.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let r=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(r._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,r=n._renderService.dimensions;if(r.css.cell.width===0||r.css.cell.height===0)return;let p=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(a.getPropertyValue("height")),l=Math.max(0,parseInt(a.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),i=o-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),s=l-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-p;return{cols:Math.max(2,Math.floor(s/r.css.cell.width)),rows:Math.max(1,Math.floor(i/r.css.cell.height))}}}})(),e})())});var M2=Tt((Eg,_T)=>{(function(e,t){typeof Eg=="object"&&typeof _T=="object"?_T.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Eg=="object"?Eg.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(p,a,o){var l=this&&this.__decorate||function(D,g,b,x){var E,T=arguments.length,M=T<3?g:x===null?x=Object.getOwnPropertyDescriptor(g,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,x);else for(var w=D.length-1;w>=0;w--)(E=D[w])&&(M=(T<3?E(M):T>3?E(g,b,M):E(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M};Object.defineProperty(a,"__esModule",{value:!0}),a.GlyphRenderer=void 0;let u=o(374),i=o(509),s=o(855),f=o(859),h=o(776),d=o(381),c=11,_=c*Float32Array.BYTES_PER_ELEMENT,m,v=0,y=0,C=0;class S extends f.Disposable{constructor(g,b,x){super(),this._terminal=g,this._gl=b,this._dimensions=x,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let E=this._gl;i.TextureAtlas.maxAtlasPages===void 0&&(i.TextureAtlas.maxAtlasPages=Math.min(32,(0,u.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),i.TextureAtlas.maxTextureSize=(0,u.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,u.throwIfFalsy)((0,d.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(R){let A="";for(let I=1;I<R;I++)A+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${R}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${A}
}`}(i.TextureAtlas.maxAtlasPages))),this.register((0,f.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,u.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,u.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,u.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);let T=new Float32Array([0,0,1,0,0,1,1,1]),M=E.createBuffer();this.register((0,f.toDisposable)(()=>E.deleteBuffer(M))),E.bindBuffer(E.ARRAY_BUFFER,M),E.bufferData(E.ARRAY_BUFFER,T,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let w=new Uint8Array([0,1,2,3]),F=E.createBuffer();this.register((0,f.toDisposable)(()=>E.deleteBuffer(F))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,F),E.bufferData(E.ELEMENT_ARRAY_BUFFER,w,E.STATIC_DRAW),this._attributesBuffer=(0,u.throwIfFalsy)(E.createBuffer()),this.register((0,f.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,_,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,_,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,_,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,_,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,_,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,_,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);let L=new Int32Array(i.TextureAtlas.maxAtlasPages);for(let R=0;R<i.TextureAtlas.maxAtlasPages;R++)L[R]=R;E.uniform1iv(this._textureLocation,L),E.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),this._atlasTextures=[];for(let R=0;R<i.TextureAtlas.maxAtlasPages;R++){let A=new d.GLTexture((0,u.throwIfFalsy)(E.createTexture()));this.register((0,f.toDisposable)(()=>E.deleteTexture(A.texture))),E.activeTexture(E.TEXTURE0+R),E.bindTexture(E.TEXTURE_2D,A.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[R]=A}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,b,x,E,T,M,w,F){this._updateCell(this._vertices.attributes,g,b,x,E,T,M,w,F)}_updateCell(g,b,x,E,T,M,w,F,L){v=(x*this._terminal.cols+b)*c,E!==s.NULL_CELL_CODE&&E!==void 0?this._atlas&&(m=F&&F.length>1?this._atlas.getRasterizedGlyphCombinedChar(F,T,M,w,!1):this._atlas.getRasterizedGlyph(E,T,M,w,!1),y=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),T!==L&&m.offset.x>y?(C=m.offset.x-y,g[v]=-(m.offset.x-C)+this._dimensions.device.char.left,g[v+1]=-m.offset.y+this._dimensions.device.char.top,g[v+2]=(m.size.x-C)/this._dimensions.device.canvas.width,g[v+3]=m.size.y/this._dimensions.device.canvas.height,g[v+4]=m.texturePage,g[v+5]=m.texturePositionClipSpace.x+C/this._atlas.pages[m.texturePage].canvas.width,g[v+6]=m.texturePositionClipSpace.y,g[v+7]=m.sizeClipSpace.x-C/this._atlas.pages[m.texturePage].canvas.width,g[v+8]=m.sizeClipSpace.y):(g[v]=-m.offset.x+this._dimensions.device.char.left,g[v+1]=-m.offset.y+this._dimensions.device.char.top,g[v+2]=m.size.x/this._dimensions.device.canvas.width,g[v+3]=m.size.y/this._dimensions.device.canvas.height,g[v+4]=m.texturePage,g[v+5]=m.texturePositionClipSpace.x,g[v+6]=m.texturePositionClipSpace.y,g[v+7]=m.sizeClipSpace.x,g[v+8]=m.sizeClipSpace.y)):g.fill(0,v,v+c-1-2)}clear(){let g=this._terminal,b=g.cols*g.rows*c;this._vertices.count!==b?this._vertices.attributes=new Float32Array(b):this._vertices.attributes.fill(0);let x=0;for(;x<this._vertices.attributesBuffers.length;x++)this._vertices.count!==b?this._vertices.attributesBuffers[x]=new Float32Array(b):this._vertices.attributesBuffers[x].fill(0);this._vertices.count=b,x=0;for(let E=0;E<g.rows;E++)for(let T=0;T<g.cols;T++)this._vertices.attributes[x+9]=T/g.cols,this._vertices.attributes[x+10]=E/g.rows,x+=c}handleResize(){let g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let x=this._vertices.attributesBuffers[this._activeBuffer],E=0;for(let T=0;T<g.lineLengths.length;T++){let M=T*this._terminal.cols*c,w=this._vertices.attributes.subarray(M,M+g.lineLengths[T]*c);x.set(w,E),E+=w.length}b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,x.subarray(0,E),b.STREAM_DRAW);for(let T=0;T<this._atlas.pages.length;T++)this._atlas.pages[T].version!==this._atlasTextures[T].version&&this._bindAtlasPageTexture(b,this._atlas,T);b.drawElementsInstanced(b.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,E/c)}setAtlas(g){this._atlas=g;for(let b of this._atlasTextures)b.version=-1}_bindAtlasPageTexture(g,b,x){g.activeTexture(g.TEXTURE0+x),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[x].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,b.pages[x].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[x].version=b.pages[x].version}setDimensions(g){this._dimensions=g}}a.GlyphRenderer=S,l([h.traceCall],S.prototype,"updateCell",null)},742:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RectangleRenderer=void 0;let l=o(374),u=o(859),i=o(310),s=o(381),f=8*Float32Array.BYTES_PER_ELEMENT;class h{constructor(){this.attributes=new Float32Array(160),this.count=0}}let d=0,c=0,_=0,m=0,v=0,y=0,C=0;class S extends u.Disposable{constructor(g,b,x,E){super(),this._terminal=g,this._gl=b,this._dimensions=x,this._themeService=E,this._vertices=new h,this._verticesCursor=new h;let T=this._gl;this._program=(0,l.throwIfFalsy)((0,s.createProgram)(T,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,u.toDisposable)(()=>T.deleteProgram(this._program))),this._projectionLocation=(0,l.throwIfFalsy)(T.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=T.createVertexArray(),T.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),w=T.createBuffer();this.register((0,u.toDisposable)(()=>T.deleteBuffer(w))),T.bindBuffer(T.ARRAY_BUFFER,w),T.bufferData(T.ARRAY_BUFFER,M,T.STATIC_DRAW),T.enableVertexAttribArray(3),T.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let F=new Uint8Array([0,1,2,3]),L=T.createBuffer();this.register((0,u.toDisposable)(()=>T.deleteBuffer(L))),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,L),T.bufferData(T.ELEMENT_ARRAY_BUFFER,F,T.STATIC_DRAW),this._attributesBuffer=(0,l.throwIfFalsy)(T.createBuffer()),this.register((0,u.toDisposable)(()=>T.deleteBuffer(this._attributesBuffer))),T.bindBuffer(T.ARRAY_BUFFER,this._attributesBuffer),T.enableVertexAttribArray(0),T.vertexAttribPointer(0,2,T.FLOAT,!1,f,0),T.vertexAttribDivisor(0,1),T.enableVertexAttribArray(1),T.vertexAttribPointer(1,2,T.FLOAT,!1,f,2*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(1,1),T.enableVertexAttribArray(2),T.vertexAttribPointer(2,4,T.FLOAT,!1,f,4*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(2,1),this._updateCachedColors(E.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),b.uniformMatrix4fv(this._projectionLocation,!1,s.PROJECTION_MATRIX),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,g.attributes,b.DYNAMIC_DRAW),b.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){let b=this._terminal,x=this._vertices,E,T,M,w,F,L,R,A,I,$,H,P=1;for(E=0;E<b.rows;E++){for(M=-1,w=0,F=0,L=!1,T=0;T<b.cols;T++)R=(E*b.cols+T)*i.RENDER_MODEL_INDICIES_PER_CELL,A=g.cells[R+i.RENDER_MODEL_BG_OFFSET],I=g.cells[R+i.RENDER_MODEL_FG_OFFSET],$=!!(67108864&I),(A!==w||I!==F&&(L||$))&&((w!==0||L&&F!==0)&&(H=8*P++,this._updateRectangle(x,H,F,w,M,T,E)),M=T,w=A,F=I,L=$);(w!==0||L&&F!==0)&&(H=8*P++,this._updateRectangle(x,H,F,w,M,b.cols,E))}x.count=P}updateCursor(g){let b=this._verticesCursor,x=g.cursor;if(!x||x.style==="block")return void(b.count=0);let E,T=0;x.style!=="bar"&&x.style!=="outline"||(E=8*T++,this._addRectangleFloat(b.attributes,E,x.x*this._dimensions.device.cell.width,x.y*this._dimensions.device.cell.height,x.style==="bar"?x.dpr*x.cursorWidth:x.dpr,this._dimensions.device.cell.height,this._cursorFloat)),x.style!=="underline"&&x.style!=="outline"||(E=8*T++,this._addRectangleFloat(b.attributes,E,x.x*this._dimensions.device.cell.width,(x.y+1)*this._dimensions.device.cell.height-x.dpr,x.width*this._dimensions.device.cell.width,x.dpr,this._cursorFloat)),x.style==="outline"&&(E=8*T++,this._addRectangleFloat(b.attributes,E,x.x*this._dimensions.device.cell.width,x.y*this._dimensions.device.cell.height,x.width*this._dimensions.device.cell.width,x.dpr,this._cursorFloat),E=8*T++,this._addRectangleFloat(b.attributes,E,(x.x+x.width)*this._dimensions.device.cell.width-x.dpr,x.y*this._dimensions.device.cell.height,x.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.count=T}_updateRectangle(g,b,x,E,T,M,w){if(67108864&x)switch(50331648&x){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&x].rgba;break;case 50331648:d=(16777215&x)<<8;break;default:d=this._themeService.colors.foreground.rgba}else switch(50331648&E){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:d=(16777215&E)<<8;break;default:d=this._themeService.colors.background.rgba}g.attributes.length<b+4&&(g.attributes=(0,s.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),c=T*this._dimensions.device.cell.width,_=w*this._dimensions.device.cell.height,m=(d>>24&255)/255,v=(d>>16&255)/255,y=(d>>8&255)/255,C=1,this._addRectangle(g.attributes,b,c,_,(M-T)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,m,v,y,C)}_addRectangle(g,b,x,E,T,M,w,F,L,R){g[b]=x/this._dimensions.device.canvas.width,g[b+1]=E/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=w,g[b+5]=F,g[b+6]=L,g[b+7]=R}_addRectangleFloat(g,b,x,E,T,M,w){g[b]=x/this._dimensions.device.canvas.width,g[b+1]=E/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=w[0],g[b+5]=w[1],g[b+6]=w[2],g[b+7]=w[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}a.RectangleRenderer=S},310:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderModel=a.COMBINED_CHAR_BIT_MASK=a.RENDER_MODEL_EXT_OFFSET=a.RENDER_MODEL_FG_OFFSET=a.RENDER_MODEL_BG_OFFSET=a.RENDER_MODEL_INDICIES_PER_CELL=void 0;let l=o(296);a.RENDER_MODEL_INDICIES_PER_CELL=4,a.RENDER_MODEL_BG_OFFSET=1,a.RENDER_MODEL_FG_OFFSET=2,a.RENDER_MODEL_EXT_OFFSET=3,a.COMBINED_CHAR_BIT_MASK=2147483648,a.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,l.createSelectionRenderModel)()}resize(u,i){let s=u*i*a.RENDER_MODEL_INDICIES_PER_CELL;s!==this.cells.length&&(this.cells=new Uint32Array(s),this.lineLengths=new Uint32Array(i))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(p,a,o){var l=this&&this.__decorate||function(M,w,F,L){var R,A=arguments.length,I=A<3?w:L===null?L=Object.getOwnPropertyDescriptor(w,F):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(M,w,F,L);else for(var $=M.length-1;$>=0;$--)(R=M[$])&&(I=(A<3?R(I):A>3?R(w,F,I):R(w,F))||I);return A>3&&I&&Object.defineProperty(w,F,I),I};Object.defineProperty(a,"__esModule",{value:!0}),a.JoinedCellData=a.WebglRenderer=void 0;let u=o(820),i=o(274),s=o(627),f=o(457),h=o(56),d=o(374),c=o(345),_=o(859),m=o(147),v=o(782),y=o(855),C=o(776),S=o(965),D=o(742),g=o(310),b=o(733);class x extends _.Disposable{constructor(w,F,L,R,A,I,$,H,P){super(),this._terminal=w,this._characterJoinerService=F,this._charSizeService=L,this._coreBrowserService=R,this._coreService=A,this._decorationService=I,this._optionsService=$,this._themeService=H,this._cursorBlinkStateManager=new _.MutableDisposable,this._charAtlasDisposable=this.register(new _.MutableDisposable),this._model=new g.RenderModel,this._workCell=new v.CellData,this._rectangleRenderer=this.register(new _.MutableDisposable),this._glyphRenderer=this.register(new _.MutableDisposable),this._onChangeTextureAtlas=this.register(new c.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new c.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new c.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new c.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new i.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new b.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,$,this._themeService)],this.dimensions=(0,d.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register($.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let q={antialias:!1,depth:!1,preserveDrawingBuffer:P};if(this._gl=this._canvas.getContext("webgl2",q),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextlost",G=>{console.log("webglcontextlost event received"),G.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(G)},3e3)})),this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextrestored",G=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,s.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,h.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(G,B)=>this._setCanvasDevicePixelDimensions(G,B))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,_.toDisposable)(()=>{var G;for(let B of this._renderLayers)B.dispose();(G=this._canvas.parentElement)===null||G===void 0||G.removeChild(this._canvas),(0,s.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var w;return(w=this._charAtlas)===null||w===void 0?void 0:w.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(w,F){var L,R,A,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let $ of this._renderLayers)$.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(L=this._rectangleRenderer.value)===null||L===void 0||L.setDimensions(this.dimensions),(R=this._rectangleRenderer.value)===null||R===void 0||R.handleResize(),(A=this._glyphRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(I=this._glyphRenderer.value)===null||I===void 0||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var w;for(let F of this._renderLayers)F.handleBlur(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.pause(),this._requestRedrawViewport()}handleFocus(){var w;for(let F of this._renderLayers)F.handleFocus(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.resume(),this._requestRedrawViewport()}handleSelectionChanged(w,F,L){for(let R of this._renderLayers)R.handleSelectionChanged(this._terminal,w,F,L);this._model.selection.update(this._terminal,w,F,L),this._requestRedrawViewport()}handleCursorMove(){var w;for(let F of this._renderLayers)F.handleCursorMove(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new D.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new S.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var w;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let F=(0,s.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==F&&(this._onChangeTextureAtlas.fire(F.pages[0].canvas),this._charAtlasDisposable.value=(0,_.getDisposeArrayDisposable)([(0,c.forwardEvent)(F.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,c.forwardEvent)(F.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=F,this._charAtlas.warmUp(),(w=this._glyphRenderer.value)===null||w===void 0||w.setAtlas(this._charAtlas)}_clearModel(w){var F;this._model.clear(),w&&((F=this._glyphRenderer.value)===null||F===void 0||F.clear())}clearTextureAtlas(){var w;(w=this._charAtlas)===null||w===void 0||w.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var w;this._clearModel(!0);for(let F of this._renderLayers)F.reset(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(w){return-1}deregisterCharacterJoiner(w){return!1}renderRows(w,F){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let L of this._renderLayers)L.handleGridChanged(this._terminal,w,F);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(w,F),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new f.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(w,F){let L=this._core,R,A,I,$,H,P,q,G,B,Q,O,W,U,k=this._workCell;w=T(w,L.rows-1,0),F=T(F,L.rows-1,0);let te=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,J=Math.min(this._terminal.buffer.active.cursorX,L.cols-1),ye=-1,Ae=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let we=!1;for(A=w;A<=F;A++)for(I=A+L.buffer.ydisp,$=L.buffer.lines.get(I),this._model.lineLengths[A]=0,H=this._characterJoinerService.getJoinedCharacters(I),W=0;W<L.cols;W++)if(R=this._cellColorResolver.result.bg,$.loadCell(W,k),W===0&&(R=this._cellColorResolver.result.bg),P=!1,q=W,H.length>0&&W===H[0][0]&&(P=!0,G=H.shift(),k=new E(k,$.translateToString(!0,G[0],G[1]),G[1]-G[0]),q=G[1]-1),B=k.getChars(),Q=k.getCode(),O=(A*L.cols+W)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(k,W,I),Ae&&I===te&&(W===J&&(this._model.cursor={x:J,y:this._terminal.buffer.active.cursorY,width:k.getWidth(),style:this._coreBrowserService.isFocused?L.options.cursorStyle||"block":L.options.cursorInactiveStyle,cursorWidth:L.options.cursorWidth,dpr:this._devicePixelRatio},ye=J+k.getWidth()-1),W>=J&&W<=ye&&(this._coreBrowserService.isFocused&&(L.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&L.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),Q!==y.NULL_CELL_CODE&&(this._model.lineLengths[A]=W+1),(this._model.cells[O]!==Q||this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(we=!0,B.length>1&&(Q|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[O]=Q,this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(W,A,Q,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,B,R),P))for(k=this._workCell,W++;W<q;W++)U=(A*L.cols+W)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(W,A,y.NULL_CELL_CODE,0,0,0,y.NULL_CELL_CHAR,0),this._model.cells[U]=y.NULL_CELL_CODE,this._model.cells[U+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[U+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[U+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;we&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(w,F){this._canvas.width===w&&this._canvas.height===F||(this._canvas.width=w,this._canvas.height=F,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let w=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:w,end:w})}}a.WebglRenderer=x,l([C.traceCall],x.prototype,"renderRows",null);class E extends m.AttributeData{constructor(w,F,L){super(),this.content=0,this.combinedData="",this.fg=w.fg,this.bg=w.bg,this.combinedData=F,this._width=L}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(w){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function T(M,w,F=0){return Math.max(Math.min(M,w),F)}a.JoinedCellData=E},381:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GLTexture=a.expandFloat32Array=a.createShader=a.createProgram=a.PROJECTION_MATRIX=void 0;let l=o(374);function u(i,s,f){let h=(0,l.throwIfFalsy)(i.createShader(s));if(i.shaderSource(h,f),i.compileShader(h),i.getShaderParameter(h,i.COMPILE_STATUS))return h;console.error(i.getShaderInfoLog(h)),i.deleteShader(h)}a.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),a.createProgram=function(i,s,f){let h=(0,l.throwIfFalsy)(i.createProgram());if(i.attachShader(h,(0,l.throwIfFalsy)(u(i,i.VERTEX_SHADER,s))),i.attachShader(h,(0,l.throwIfFalsy)(u(i,i.FRAGMENT_SHADER,f))),i.linkProgram(h),i.getProgramParameter(h,i.LINK_STATUS))return h;console.error(i.getProgramInfoLog(h)),i.deleteProgram(h)},a.createShader=u,a.expandFloat32Array=function(i,s){let f=Math.min(2*i.length,s),h=new Float32Array(f);for(let d=0;d<i.length;d++)h[d]=i[d];return h},a.GLTexture=class{constructor(i){this.texture=i,this.version=-1}}},592:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseRenderLayer=void 0;let l=o(627),u=o(237),i=o(374),s=o(859);class f extends s.Disposable{constructor(d,c,_,m,v,y,C,S){super(),this._container=c,this._alpha=v,this._coreBrowserService=y,this._optionsService=C,this._themeService=S,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${_}-layer`),this._canvas.style.zIndex=m.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(D=>{this._refreshCharAtlas(d,D),this.reset(d)})),this.register((0,s.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,i.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(d){}handleFocus(d){}handleCursorMove(d){}handleGridChanged(d,c,_){}handleSelectionChanged(d,c,_,m=!1){}_setTransparency(d,c){if(c===this._alpha)return;let _=this._canvas;this._alpha=c,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,_),this._refreshCharAtlas(d,this._themeService.colors),this.handleGridChanged(d,0,d.rows-1)}_refreshCharAtlas(d,c){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,l.acquireTextureAtlas)(d,this._optionsService.rawOptions,c,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(d,c){this._deviceCellWidth=c.device.cell.width,this._deviceCellHeight=c.device.cell.height,this._deviceCharWidth=c.device.char.width,this._deviceCharHeight=c.device.char.height,this._deviceCharLeft=c.device.char.left,this._deviceCharTop=c.device.char.top,this._canvas.width=c.device.canvas.width,this._canvas.height=c.device.canvas.height,this._canvas.style.width=`${c.css.canvas.width}px`,this._canvas.style.height=`${c.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(d,this._themeService.colors)}_fillBottomLineAtCells(d,c,_=1){this._ctx.fillRect(d*this._deviceCellWidth,(c+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,_*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(d,c,_,m){this._alpha?this._ctx.clearRect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,m*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,m*this._deviceCellHeight))}_fillCharTrueColor(d,c,_,m){this._ctx.font=this._getFont(d,!1,!1),this._ctx.textBaseline=u.TEXT_BASELINE,this._clipCell(_,m,c.getWidth()),this._ctx.fillText(c.getChars(),_*this._deviceCellWidth+this._deviceCharLeft,m*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(d,c,_){this._ctx.beginPath(),this._ctx.rect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(d,c,_){return`${_?"italic":""} ${c?d.options.fontWeightBold:d.options.fontWeight} ${d.options.fontSize*this._coreBrowserService.dpr}px ${d.options.fontFamily}`}}a.BaseRenderLayer=f},733:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkRenderLayer=void 0;let l=o(197),u=o(237),i=o(592);class s extends i.BaseRenderLayer{constructor(h,d,c,_,m,v,y){super(c,h,"link",d,!0,m,v,y),this.register(_.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(_.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(h,d){super.resize(h,d),this._state=void 0}reset(h){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let h=this._state.y2-this._state.y1-1;h>0&&this._clearCells(0,this._state.y1+1,this._state.cols,h),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(h){if(h.fg===u.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:h.fg!==void 0&&(0,l.is256Color)(h.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[h.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,h.y1===h.y2)this._fillBottomLineAtCells(h.x1,h.y1,h.x2-h.x1);else{this._fillBottomLineAtCells(h.x1,h.y1,h.cols-h.x1);for(let d=h.y1+1;d<h.y2;d++)this._fillBottomLineAtCells(0,d,h.cols);this._fillBottomLineAtCells(0,h.y2,h.x2)}this._state=h}_handleHideLinkUnderline(h){this._clearCurrentLink()}}a.LinkRenderLayer=s},820:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(o,l,u,i){o.addEventListener(l,u,i);let s=!1;return{dispose:()=>{s||(s=!0,o.removeEventListener(l,u,i))}}}},274:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellColorResolver=void 0;let o,l=0,u=0,i=!1,s=!1,f=!1;a.CellColorResolver=class{constructor(h,d,c,_,m){this._terminal=h,this._selectionRenderModel=d,this._decorationService=c,this._coreBrowserService=_,this._themeService=m,this.result={fg:0,bg:0,ext:0}}resolve(h,d,c){this.result.bg=h.bg,this.result.fg=h.fg,this.result.ext=268435456&h.bg?h.extended.ext:0,u=0,l=0,s=!1,i=!1,f=!1,o=this._themeService.colors,this._decorationService.forEachDecorationAtCell(d,c,"bottom",_=>{_.backgroundColorRGB&&(u=_.backgroundColorRGB.rgba>>8&16777215,s=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,i=!0)}),f=this._selectionRenderModel.isCellSelected(this._terminal,d,c),f&&(u=(this._coreBrowserService.isFocused?o.selectionBackgroundOpaque:o.selectionInactiveBackgroundOpaque).rgba>>8&16777215,s=!0,o.selectionForeground&&(l=o.selectionForeground.rgba>>8&16777215,i=!0)),this._decorationService.forEachDecorationAtCell(d,c,"top",_=>{_.backgroundColorRGB&&(u=_.backgroundColorRGB.rgba>>8&16777215,s=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,i=!0)}),s&&(u=f?-16777216&h.bg&-134217729|u|50331648:-16777216&h.bg|u|50331648),i&&(l=-16777216&h.fg&-67108865|l|50331648),67108864&this.result.fg&&(s&&!i&&(l=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&o.background.rgba>>8|50331648,i=!0),!s&&i&&(u=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&o.foreground.rgba>>8|50331648,s=!0)),o=void 0,this.result.bg=s?u:this.result.bg,this.result.fg=i?l:this.result.fg}}},627:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.removeTerminalFromCache=a.acquireTextureAtlas=void 0;let l=o(509),u=o(197),i=[];a.acquireTextureAtlas=function(s,f,h,d,c,_,m,v){let y=(0,u.generateConfig)(d,c,_,m,f,h,v);for(let D=0;D<i.length;D++){let g=i[D],b=g.ownedBy.indexOf(s);if(b>=0){if((0,u.configEquals)(g.config,y))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),i.splice(D,1)):g.ownedBy.splice(b,1);break}}for(let D=0;D<i.length;D++){let g=i[D];if((0,u.configEquals)(g.config,y))return g.ownedBy.push(s),g.atlas}let C=s._core,S={atlas:new l.TextureAtlas(document,y,C.unicodeService),config:y,ownedBy:[s]};return i.push(S),S.atlas},a.removeTerminalFromCache=function(s){for(let f=0;f<i.length;f++){let h=i[f].ownedBy.indexOf(s);if(h!==-1){i[f].ownedBy.length===1?(i[f].atlas.dispose(),i.splice(f,1)):i[f].ownedBy.splice(h,1);break}}}},197:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.is256Color=a.configEquals=a.generateConfig=void 0;let l=o(160);a.generateConfig=function(u,i,s,f,h,d,c){let _={foreground:d.foreground,background:d.background,cursor:l.NULL_COLOR,cursorAccent:l.NULL_COLOR,selectionForeground:l.NULL_COLOR,selectionBackgroundTransparent:l.NULL_COLOR,selectionBackgroundOpaque:l.NULL_COLOR,selectionInactiveBackgroundTransparent:l.NULL_COLOR,selectionInactiveBackgroundOpaque:l.NULL_COLOR,ansi:d.ansi.slice(),contrastCache:d.contrastCache,halfContrastCache:d.halfContrastCache};return{customGlyphs:h.customGlyphs,devicePixelRatio:c,letterSpacing:h.letterSpacing,lineHeight:h.lineHeight,deviceCellWidth:u,deviceCellHeight:i,deviceCharWidth:s,deviceCharHeight:f,fontFamily:h.fontFamily,fontSize:h.fontSize,fontWeight:h.fontWeight,fontWeightBold:h.fontWeightBold,allowTransparency:h.allowTransparency,drawBoldTextInBrightColors:h.drawBoldTextInBrightColors,minimumContrastRatio:h.minimumContrastRatio,colors:_}},a.configEquals=function(u,i){for(let s=0;s<u.colors.ansi.length;s++)if(u.colors.ansi[s].rgba!==i.colors.ansi[s].rgba)return!1;return u.devicePixelRatio===i.devicePixelRatio&&u.customGlyphs===i.customGlyphs&&u.lineHeight===i.lineHeight&&u.letterSpacing===i.letterSpacing&&u.fontFamily===i.fontFamily&&u.fontSize===i.fontSize&&u.fontWeight===i.fontWeight&&u.fontWeightBold===i.fontWeightBold&&u.allowTransparency===i.allowTransparency&&u.deviceCharWidth===i.deviceCharWidth&&u.deviceCharHeight===i.deviceCharHeight&&u.drawBoldTextInBrightColors===i.drawBoldTextInBrightColors&&u.minimumContrastRatio===i.minimumContrastRatio&&u.colors.foreground.rgba===i.colors.foreground.rgba&&u.colors.background.rgba===i.colors.background.rgba},a.is256Color=function(u){return(50331648&u)==16777216||(50331648&u)==33554432}},237:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;let l=o(399);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},457:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CursorBlinkStateManager=void 0,a.CursorBlinkStateManager=class{constructor(o,l){this._renderCallback=o,this._coreBrowserService=l,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let l=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,l>0)return void this._restartInterval(l)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let l=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(l)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tryDrawCustomChar=a.powerlineDefinitions=a.boxDrawingDefinitions=a.blockElementDefinitions=void 0;let l=o(374);a.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let u={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};a.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u2551":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2552":{1:(d,c)=>`M.5,1 L.5,${.5-c} L1,${.5-c} M.5,${.5+c} L1,${.5+c}`},"\u2553":{1:(d,c)=>`M${.5-d},1 L${.5-d},.5 L1,.5 M${.5+d},.5 L${.5+d},1`},"\u2554":{1:(d,c)=>`M1,${.5-c} L${.5-d},${.5-c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1`},"\u2555":{1:(d,c)=>`M0,${.5-c} L.5,${.5-c} L.5,1 M0,${.5+c} L.5,${.5+c}`},"\u2556":{1:(d,c)=>`M${.5+d},1 L${.5+d},.5 L0,.5 M${.5-d},.5 L${.5-d},1`},"\u2557":{1:(d,c)=>`M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M0,${.5-c} L${.5+d},${.5-c} L${.5+d},1`},"\u2558":{1:(d,c)=>`M.5,0 L.5,${.5+c} L1,${.5+c} M.5,${.5-c} L1,${.5-c}`},"\u2559":{1:(d,c)=>`M1,.5 L${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u255A":{1:(d,c)=>`M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0 M1,${.5+c} L${.5-d},${.5+c} L${.5-d},0`},"\u255B":{1:(d,c)=>`M0,${.5+c} L.5,${.5+c} L.5,0 M0,${.5-c} L.5,${.5-c}`},"\u255C":{1:(d,c)=>`M0,.5 L${.5+d},.5 L${.5+d},0 M${.5-d},.5 L${.5-d},0`},"\u255D":{1:(d,c)=>`M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M0,${.5+c} L${.5+d},${.5+c} L${.5+d},0`},"\u255E":{1:(d,c)=>`M.5,0 L.5,1 M.5,${.5-c} L1,${.5-c} M.5,${.5+c} L1,${.5+c}`},"\u255F":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1 M${.5+d},.5 L1,.5`},"\u2560":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u2561":{1:(d,c)=>`M.5,0 L.5,1 M0,${.5-c} L.5,${.5-c} M0,${.5+c} L.5,${.5+c}`},"\u2562":{1:(d,c)=>`M0,.5 L${.5-d},.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2563":{1:(d,c)=>`M${.5+d},0 L${.5+d},1 M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0`},"\u2564":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c} M.5,${.5+c} L.5,1`},"\u2565":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},1 M${.5+d},.5 L${.5+d},1`},"\u2566":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1`},"\u2567":{1:(d,c)=>`M.5,0 L.5,${.5-c} M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u2568":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u2569":{1:(d,c)=>`M0,${.5+c} L1,${.5+c} M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u256A":{1:(d,c)=>`M.5,0 L.5,1 M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u256B":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u256C":{1:(d,c)=>`M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1 M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(d,c)=>`M.5,1 L.5,${.5+c/.15*.5} C.5,${.5+c/.15*.5},.5,.5,1,.5`},"\u256E":{1:(d,c)=>`M.5,1 L.5,${.5+c/.15*.5} C.5,${.5+c/.15*.5},.5,.5,0,.5`},"\u256F":{1:(d,c)=>`M.5,0 L.5,${.5-c/.15*.5} C.5,${.5-c/.15*.5},.5,.5,0,.5`},"\u2570":{1:(d,c)=>`M.5,0 L.5,${.5-c/.15*.5} C.5,${.5-c/.15*.5},.5,.5,1,.5`}},a.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},a.powerlineDefinitions["\uE0BB"]=a.powerlineDefinitions["\uE0BD"],a.powerlineDefinitions["\uE0BF"]=a.powerlineDefinitions["\uE0B9"],a.tryDrawCustomChar=function(d,c,_,m,v,y,C,S){let D=a.blockElementDefinitions[c];if(D)return function(E,T,M,w,F,L){for(let R=0;R<T.length;R++){let A=T[R],I=F/8,$=L/8;E.fillRect(M+A.x*I,w+A.y*$,A.w*I,A.h*$)}}(d,D,_,m,v,y),!0;let g=u[c];if(g)return function(E,T,M,w,F,L){let R=i.get(T);R||(R=new Map,i.set(T,R));let A=E.fillStyle;if(typeof A!="string")throw new Error(`Unexpected fillStyle type "${A}"`);let I=R.get(A);if(!I){let $=T[0].length,H=T.length,P=document.createElement("canvas");P.width=$,P.height=H;let q=(0,l.throwIfFalsy)(P.getContext("2d")),G=new ImageData($,H),B,Q,O,W;if(A.startsWith("#"))B=parseInt(A.slice(1,3),16),Q=parseInt(A.slice(3,5),16),O=parseInt(A.slice(5,7),16),W=A.length>7&&parseInt(A.slice(7,9),16)||1;else{if(!A.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${A}" when drawing pattern glyph`);[B,Q,O,W]=A.substring(5,A.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<H;U++)for(let k=0;k<$;k++)G.data[4*(U*$+k)]=B,G.data[4*(U*$+k)+1]=Q,G.data[4*(U*$+k)+2]=O,G.data[4*(U*$+k)+3]=T[U][k]*(255*W);q.putImageData(G,0,0),I=(0,l.throwIfFalsy)(E.createPattern(P,null)),R.set(A,I)}E.fillStyle=I,E.fillRect(M,w,F,L)}(d,g,_,m,v,y),!0;let b=a.boxDrawingDefinitions[c];if(b)return function(E,T,M,w,F,L,R){E.strokeStyle=E.fillStyle;for(let[A,I]of Object.entries(T)){let $;E.beginPath(),E.lineWidth=R*Number.parseInt(A),$=typeof I=="function"?I(.15,.15/L*F):I;for(let H of $.split(" ")){let P=H[0],q=f[P];if(!q){console.error(`Could not find drawing instructions for "${P}"`);continue}let G=H.substring(1).split(",");G[0]&&G[1]&&q(E,h(G,F,L,M,w,!0,R))}E.stroke(),E.closePath()}}(d,b,_,m,v,y,S),!0;let x=a.powerlineDefinitions[c];return!!x&&(function(E,T,M,w,F,L,R,A){var I,$;let H=new Path2D;H.rect(M,w,F,L),E.clip(H),E.beginPath();let P=R/12;E.lineWidth=A*P;for(let q of T.d.split(" ")){let G=q[0],B=f[G];if(!B){console.error(`Could not find drawing instructions for "${G}"`);continue}let Q=q.substring(1).split(",");Q[0]&&Q[1]&&B(E,h(Q,F,L,M,w,!1,A,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(P/2),(($=T.rightPadding)!==null&&$!==void 0?$:0)*(P/2)))}T.type===1?(E.strokeStyle=E.fillStyle,E.stroke()):E.fill(),E.closePath()}(d,x,_,m,v,y,C,S),!0)};let i=new Map;function s(d,c,_=0){return Math.max(Math.min(d,c),_)}let f={C:(d,c)=>d.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]),L:(d,c)=>d.lineTo(c[0],c[1]),M:(d,c)=>d.moveTo(c[0],c[1])};function h(d,c,_,m,v,y,C,S=0,D=0){let g=d.map(b=>parseFloat(b)||parseInt(b));if(g.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<g.length;b+=2)g[b]*=c-S*C-D*C,y&&g[b]!==0&&(g[b]=s(Math.round(g[b]+.5)-.5,c,0)),g[b]+=m+S*C;for(let b=1;b<g.length;b+=2)g[b]*=_,y&&g[b]!==0&&(g[b]=s(Math.round(g[b]+.5)-.5,_,0)),g[b]+=v;return g}},56:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.observeDevicePixelDimensions=void 0;let l=o(859);a.observeDevicePixelDimensions=function(u,i,s){let f=new i.ResizeObserver(h=>{let d=h.find(m=>m.target===u);if(!d)return;if(!("devicePixelContentBoxSize"in d))return f?.disconnect(),void(f=void 0);let c=d.devicePixelContentBoxSize[0].inlineSize,_=d.devicePixelContentBoxSize[0].blockSize;c>0&&_>0&&s(c,_)});try{f.observe(u,{box:["device-pixel-content-box"]})}catch{f.disconnect(),f=void 0}return(0,l.toDisposable)(()=>f?.disconnect())}},374:(p,a)=>{function o(l){return 57508<=l&&l<=57558}Object.defineProperty(a,"__esModule",{value:!0}),a.createRenderDimensions=a.excludeFromContrastRatioDemands=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},a.isPowerlineGlyph=o,a.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},a.excludeFromContrastRatioDemands=function(l){return o(l)||function(u){return 9472<=u&&u<=9631}(l)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,i,s,f=!1){if(this.selectionStart=i,this.selectionEnd=s,!i||!s||i[0]===s[0]&&i[1]===s[1])return void this.clear();let h=i[1]-u.buffer.active.viewportY,d=s[1]-u.buffer.active.viewportY,c=Math.max(h,0),_=Math.min(d,u.rows-1);c>=u.rows||_<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=h,this.viewportEndRow=d,this.viewportCappedStartRow=c,this.viewportCappedEndRow=_,this.startCol=i[0],this.endCol=s[0])}isCellSelected(u,i,s){return!!this.hasSelection&&(s-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?i>=this.startCol&&s>=this.viewportCappedStartRow&&i<this.endCol&&s<=this.viewportCappedEndRow:i<this.startCol&&s>=this.viewportCappedStartRow&&i>=this.endCol&&s<=this.viewportCappedEndRow:s>this.viewportStartRow&&s<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&s===this.viewportStartRow&&i>=this.startCol&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportEndRow&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportStartRow&&i>=this.startCol)}}a.createSelectionRenderModel=function(){return new o}},509:function(p,a,o){var l=this&&this.__decorate||function(x,E,T,M){var w,F=arguments.length,L=F<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,T):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(x,E,T,M);else for(var R=x.length-1;R>=0;R--)(w=x[R])&&(L=(F<3?w(L):F>3?w(E,T,L):w(E,T))||L);return F>3&&L&&Object.defineProperty(E,T,L),L};Object.defineProperty(a,"__esModule",{value:!0}),a.TextureAtlas=void 0;let u=o(237),i=o(860),s=o(374),f=o(160),h=o(345),d=o(485),c=o(385),_=o(147),m=o(855),v=o(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class S{get pages(){return this._pages}constructor(E,T,M){this._document=E,this._config=T,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new d.FourKeyMap,this._cacheMapCombined=new d.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new _.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new h.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new h.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=b(E,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,s.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let E of this.pages)E.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let E=new c.IdleTaskQueue;for(let T=33;T<126;T++)E.enqueue(()=>{if(!this._cacheMap.get(T,m.DEFAULT_COLOR,m.DEFAULT_COLOR,m.DEFAULT_EXT)){let M=this._drawToCache(T,m.DEFAULT_COLOR,m.DEFAULT_COLOR,m.DEFAULT_EXT);this._cacheMap.set(T,m.DEFAULT_COLOR,m.DEFAULT_COLOR,m.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let E of this._pages)E.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(S.maxAtlasPages&&this._pages.length>=Math.max(4,S.maxAtlasPages)){let T=this._pages.filter(I=>2*I.canvas.width<=(S.maxTextureSize||4096)).sort((I,$)=>$.canvas.width!==I.canvas.width?$.canvas.width-I.canvas.width:$.percentageUsed-I.percentageUsed),M=-1,w=0;for(let I=0;I<T.length;I++)if(T[I].canvas.width!==w)M=I,w=T[I].canvas.width;else if(I-M==3)break;let F=T.slice(M,M+4),L=F.map(I=>I.glyphs[0].texturePage).sort((I,$)=>I>$?1:-1),R=this.pages.length-F.length,A=this._mergePages(F,R);A.version++;for(let I=L.length-1;I>=0;I--)this._deletePage(L[I]);this.pages.push(A),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(A.canvas)}let E=new D(this._document,this._textureSize);return this._pages.push(E),this._activePages.push(E),this._onAddTextureAtlasCanvas.fire(E.canvas),E}_mergePages(E,T){let M=2*E[0].canvas.width,w=new D(this._document,M,E);for(let[F,L]of E.entries()){let R=F*L.canvas.width%M,A=Math.floor(F/2)*L.canvas.height;w.ctx.drawImage(L.canvas,R,A);for(let $ of L.glyphs)$.texturePage=T,$.sizeClipSpace.x=$.size.x/M,$.sizeClipSpace.y=$.size.y/M,$.texturePosition.x+=R,$.texturePosition.y+=A,$.texturePositionClipSpace.x=$.texturePosition.x/M,$.texturePositionClipSpace.y=$.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(L.canvas);let I=this._activePages.indexOf(L);I!==-1&&this._activePages.splice(I,1)}return w}_deletePage(E){this._pages.splice(E,1);for(let T=E;T<this._pages.length;T++){let M=this._pages[T];for(let w of M.glyphs)w.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(E,T,M,w,F){return this._getFromCacheMap(this._cacheMapCombined,E,T,M,w,F)}getRasterizedGlyph(E,T,M,w,F){return this._getFromCacheMap(this._cacheMap,E,T,M,w,F)}_getFromCacheMap(E,T,M,w,F,L=!1){return C=E.get(T,M,w,F),C||(C=this._drawToCache(T,M,w,F,L),E.set(T,M,w,F,C)),C}_getColorFromAnsiIndex(E){if(E>=this._config.colors.ansi.length)throw new Error("No color found for idx "+E);return this._config.colors.ansi[E]}_getBackgroundColor(E,T,M,w){if(this._config.allowTransparency)return f.NULL_COLOR;let F;switch(E){case 16777216:case 33554432:F=this._getColorFromAnsiIndex(T);break;case 50331648:let L=_.AttributeData.toColorRGB(T);F=f.rgba.toColor(L[0],L[1],L[2]);break;default:F=M?f.color.opaque(this._config.colors.foreground):this._config.colors.background}return F}_getForegroundColor(E,T,M,w,F,L,R,A,I,$){let H=this._getMinimumContrastColor(E,T,M,w,F,L,!1,I,A,$);if(H)return H;let P;switch(F){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&L<8&&(L+=8),P=this._getColorFromAnsiIndex(L);break;case 50331648:let q=_.AttributeData.toColorRGB(L);P=f.rgba.toColor(q[0],q[1],q[2]);break;default:P=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=f.color.opaque(P)),A&&(P=f.color.multiplyOpacity(P,u.DIM_OPACITY)),P}_resolveBackgroundRgba(E,T,M){switch(E){case 16777216:case 33554432:return this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(E,T,M,w){switch(E){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&w&&T<8&&(T+=8),this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(E,T,M,w,F,L,R,A,I,$){if(this._config.minimumContrastRatio===1||$)return;let H=this._getContrastCache(I),P=H.getColor(E,w);if(P!==void 0)return P||void 0;let q=this._resolveBackgroundRgba(T,M,R),G=this._resolveForegroundRgba(F,L,R,A),B=f.rgba.ensureContrastRatio(q,G,this._config.minimumContrastRatio/(I?2:1));if(!B)return void H.setColor(E,w,null);let Q=f.rgba.toColor(B>>24&255,B>>16&255,B>>8&255);return H.setColor(E,w,Q),Q}_getContrastCache(E){return E?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(E,T,M,w,F=!1){let L=typeof E=="number"?String.fromCharCode(E):E,R=Math.min(this._config.deviceCellWidth*Math.max(L.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);let A=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<A&&(this._tmpCanvas.height=A),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=T,this._workAttributeData.extended.ext=w,this._workAttributeData.isInvisible())return y;let I=!!this._workAttributeData.isBold(),$=!!this._workAttributeData.isInverse(),H=!!this._workAttributeData.isDim(),P=!!this._workAttributeData.isItalic(),q=!!this._workAttributeData.isUnderline(),G=!!this._workAttributeData.isStrikethrough(),B=!!this._workAttributeData.isOverline(),Q=this._workAttributeData.getFgColor(),O=this._workAttributeData.getFgColorMode(),W=this._workAttributeData.getBgColor(),U=this._workAttributeData.getBgColorMode();if($){let ae=Q;Q=W,W=ae;let j=O;O=U,U=j}let k=this._getBackgroundColor(U,W,$,H);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let te=I?this._config.fontWeightBold:this._config.fontWeight,J=P?"italic":"";this._tmpCtx.font=`${J} ${te} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=u.TEXT_BASELINE;let ye=L.length===1&&(0,s.isPowerlineGlyph)(L.charCodeAt(0)),Ae=L.length===1&&(0,s.isRestrictedPowerlineGlyph)(L.charCodeAt(0)),we=this._getForegroundColor(T,U,W,M,O,Q,$,H,I,(0,s.excludeFromContrastRatioDemands)(L.charCodeAt(0)));this._tmpCtx.fillStyle=we.css;let ce=Ae?0:4,xe=!1;this._config.customGlyphs!==!1&&(xe=(0,i.tryDrawCustomChar)(this._tmpCtx,L,ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Rt,un=!ye;if(Rt=typeof E=="number"?this._unicodeService.wcwidth(E):this._unicodeService.getStringCellWidth(E),q){this._tmpCtx.save();let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=ae%2==1?.5:0;if(this._tmpCtx.lineWidth=ae,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())un=!1,this._tmpCtx.strokeStyle=`rgb(${_.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{un=!1;let gt=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&gt<8&&(gt+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(gt).css}this._tmpCtx.beginPath();let ie=ce,he=Math.ceil(ce+this._config.deviceCharHeight)-j-(F?2*ae:0),ze=he+ae,at=he+2*ae;for(let gt=0;gt<Rt;gt++){this._tmpCtx.save();let Ge=ie+gt*this._config.deviceCellWidth,$t=ie+(gt+1)*this._config.deviceCellWidth,tn=Ge+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ge,he),this._tmpCtx.lineTo($t,he),this._tmpCtx.moveTo(Ge,at),this._tmpCtx.lineTo($t,at);break;case 3:let Ot=ae<=1?at:Math.ceil(ce+this._config.deviceCharHeight-ae/2)-j,er=ae<=1?he:Math.ceil(ce+this._config.deviceCharHeight+ae/2)-j,Cu=new Path2D;Cu.rect(Ge,he,this._config.deviceCellWidth,at-he),this._tmpCtx.clip(Cu),this._tmpCtx.moveTo(Ge-this._config.deviceCellWidth/2,ze),this._tmpCtx.bezierCurveTo(Ge-this._config.deviceCellWidth/2,er,Ge,er,Ge,ze),this._tmpCtx.bezierCurveTo(Ge,Ot,tn,Ot,tn,ze),this._tmpCtx.bezierCurveTo(tn,er,$t,er,$t,ze),this._tmpCtx.bezierCurveTo($t,Ot,$t+this._config.deviceCellWidth/2,Ot,$t+this._config.deviceCellWidth/2,ze);break;case 4:this._tmpCtx.setLineDash([Math.round(ae),Math.round(ae)]),this._tmpCtx.moveTo(Ge,he),this._tmpCtx.lineTo($t,he);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ge,he),this._tmpCtx.lineTo($t,he);break;default:this._tmpCtx.moveTo(Ge,he),this._tmpCtx.lineTo($t,he)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!xe&&this._config.fontSize>=12&&!this._config.allowTransparency&&L!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let gt=this._tmpCtx.measureText(L);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in gt&&gt.actualBoundingBoxDescent>0){this._tmpCtx.save();let Ge=new Path2D;Ge.rect(ie,he-Math.ceil(ae/2),this._config.deviceCellWidth*Rt,at-he+Math.ceil(ae/2)),this._tmpCtx.clip(Ge),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=k.css,this._tmpCtx.strokeText(L,ce,ce+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(B){let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=ae%2==1?.5:0;this._tmpCtx.lineWidth=ae,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+j),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*Rt,ce+j),this._tmpCtx.stroke()}if(xe||this._tmpCtx.fillText(L,ce,ce+this._config.deviceCharHeight),L==="_"&&!this._config.allowTransparency){let ae=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),k,we,un);if(ae)for(let j=1;j<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(L,ce,ce+this._config.deviceCharHeight-j),ae=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),k,we,un),ae);j++);}if(G){let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),j=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ae,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*Rt,ce+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.stroke()}this._tmpCtx.restore();let Jt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),tt;if(tt=this._config.allowTransparency?function(ae){for(let j=0;j<ae.data.length;j+=4)if(ae.data[j+3]>0)return!1;return!0}(Jt):g(Jt,k,we,un),tt)return y;let le=this._findGlyphBoundingBox(Jt,this._workBoundingBox,R,Ae,xe,ce),ve,fe;for(;;){if(this._activePages.length===0){let ae=this._createNewPage();ve=ae,fe=ae.currentRow,fe.height=le.size.y;break}ve=this._activePages[this._activePages.length-1],fe=ve.currentRow;for(let ae of this._activePages)le.size.y<=ae.currentRow.height&&(ve=ae,fe=ae.currentRow);for(let ae=this._activePages.length-1;ae>=0;ae--)for(let j of this._activePages[ae].fixedRows)j.height<=fe.height&&le.size.y<=j.height&&(ve=this._activePages[ae],fe=j);if(fe.y+le.size.y>=ve.canvas.height||fe.height>le.size.y+2){let ae=!1;if(ve.currentRow.y+ve.currentRow.height+le.size.y>=ve.canvas.height){let j;for(let ie of this._activePages)if(ie.currentRow.y+ie.currentRow.height+le.size.y<ie.canvas.height){j=ie;break}if(j)ve=j;else if(S.maxAtlasPages&&this._pages.length>=S.maxAtlasPages&&fe.y+le.size.y<=ve.canvas.height&&fe.height>=le.size.y&&fe.x+le.size.x<=ve.canvas.width)ae=!0;else{let ie=this._createNewPage();ve=ie,fe=ie.currentRow,fe.height=le.size.y,ae=!0}}ae||(ve.currentRow.height>0&&ve.fixedRows.push(ve.currentRow),fe={x:0,y:ve.currentRow.y+ve.currentRow.height,height:le.size.y},ve.fixedRows.push(fe),ve.currentRow={x:0,y:fe.y+fe.height,height:0})}if(fe.x+le.size.x<=ve.canvas.width)break;fe===ve.currentRow?(fe.x=0,fe.y+=fe.height,fe.height=0):ve.fixedRows.splice(ve.fixedRows.indexOf(fe),1)}return le.texturePage=this._pages.indexOf(ve),le.texturePosition.x=fe.x,le.texturePosition.y=fe.y,le.texturePositionClipSpace.x=fe.x/ve.canvas.width,le.texturePositionClipSpace.y=fe.y/ve.canvas.height,le.sizeClipSpace.x/=ve.canvas.width,le.sizeClipSpace.y/=ve.canvas.height,fe.height=Math.max(fe.height,le.size.y),fe.x+=le.size.x,ve.ctx.putImageData(Jt,le.texturePosition.x-this._workBoundingBox.left,le.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,le.size.x,le.size.y),ve.addGlyph(le),ve.version++,le}_findGlyphBoundingBox(E,T,M,w,F,L){T.top=0;let R=w?this._config.deviceCellHeight:this._tmpCanvas.height,A=w?this._config.deviceCellWidth:M,I=!1;for(let $=0;$<R;$++){for(let H=0;H<A;H++){let P=$*this._tmpCanvas.width*4+4*H+3;if(E.data[P]!==0){T.top=$,I=!0;break}}if(I)break}T.left=0,I=!1;for(let $=0;$<L+A;$++){for(let H=0;H<R;H++){let P=H*this._tmpCanvas.width*4+4*$+3;if(E.data[P]!==0){T.left=$,I=!0;break}}if(I)break}T.right=A,I=!1;for(let $=L+A-1;$>=L;$--){for(let H=0;H<R;H++){let P=H*this._tmpCanvas.width*4+4*$+3;if(E.data[P]!==0){T.right=$,I=!0;break}}if(I)break}T.bottom=R,I=!1;for(let $=R-1;$>=0;$--){for(let H=0;H<A;H++){let P=$*this._tmpCanvas.width*4+4*H+3;if(E.data[P]!==0){T.bottom=$,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:T.right-T.left+1,y:T.bottom-T.top+1},sizeClipSpace:{x:T.right-T.left+1,y:T.bottom-T.top+1},offset:{x:-T.left+L+(w||F?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-T.top+L+(w||F?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}a.TextureAtlas=S,l([v.traceCall],S.prototype,"_drawToCache",null);class D{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(E){this._glyphs.push(E),this._usedPixels+=E.size.x*E.size.y}constructor(E,T,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let w of M)this._glyphs.push(...w.glyphs),this._usedPixels+=w._usedPixels;this.canvas=b(E,T,T),this.ctx=(0,s.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(x,E,T,M){let w=E.rgba>>>24,F=E.rgba>>>16&255,L=E.rgba>>>8&255,R=T.rgba>>>24,A=T.rgba>>>16&255,I=T.rgba>>>8&255,$=Math.floor((Math.abs(w-R)+Math.abs(F-A)+Math.abs(L-I))/12),H=!0;for(let P=0;P<x.data.length;P+=4)x.data[P]===w&&x.data[P+1]===F&&x.data[P+2]===L||M&&Math.abs(x.data[P]-w)+Math.abs(x.data[P+1]-F)+Math.abs(x.data[P+2]-L)<$?x.data[P+3]=0:H=!1;return H}function b(x,E,T){let M=x.createElement("canvas");return M.width=E,M.height=T,M}},160:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=o(399),u=0,i=0,s=0,f=0;var h,d,c,_,m;function v(C){let S=C.toString(16);return S.length<2?"0"+S:S}function y(C,S){return C<S?(S+.05)/(C+.05):(C+.05)/(S+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(S,D,g,b){return b!==void 0?`#${v(S)}${v(D)}${v(g)}${v(b)}`:`#${v(S)}${v(D)}${v(g)}`},C.toRgba=function(S,D,g,b=255){return(S<<24|D<<16|g<<8|b)>>>0}}(h||(a.channels=h={})),function(C){function S(D,g){return f=Math.round(255*g),[u,i,s]=m.toChannels(D.rgba),{css:h.toCss(u,i,s,f),rgba:h.toRgba(u,i,s,f)}}C.blend=function(D,g){if(f=(255&g.rgba)/255,f===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,x=g.rgba>>16&255,E=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return u=T+Math.round((b-T)*f),i=M+Math.round((x-M)*f),s=w+Math.round((E-w)*f),{css:h.toCss(u,i,s),rgba:h.toRgba(u,i,s)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let x=m.ensureContrastRatio(D.rgba,g.rgba,b);if(x)return m.toColor(x>>24&255,x>>16&255,x>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,i,s]=m.toChannels(g),{css:h.toCss(u,i,s),rgba:g}},C.opacity=S,C.multiplyOpacity=function(D,g){return f=255&D.rgba,S(D,f*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(d||(a.color=d={})),function(C){let S,D;if(!l.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(S=b,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),m.toColor(u,i,s);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),f=parseInt(g.slice(4,5).repeat(2),16),m.toColor(u,i,s,f);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return u=parseInt(b[1]),i=parseInt(b[2]),s=parseInt(b[3]),f=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),m.toColor(u,i,s,f);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=g,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[u,i,s,f]=S.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:h.toRgba(u,i,s,f),css:g}}}(c||(a.css=c={})),function(C){function S(D,g,b){let x=D/255,E=g/255,T=b/255;return .2126*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=S}(_||(a.rgb=_={})),function(C){function S(g,b,x){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));for(;R<x&&(w>0||F>0||L>0);)w-=Math.max(0,Math.ceil(.1*w)),F-=Math.max(0,Math.ceil(.1*F)),L-=Math.max(0,Math.ceil(.1*L)),R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));return(w<<24|F<<16|L<<8|255)>>>0}function D(g,b,x){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));for(;R<x&&(w<255||F<255||L<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),F=Math.min(255,F+Math.ceil(.1*(255-F))),L=Math.min(255,L+Math.ceil(.1*(255-L))),R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));return(w<<24|F<<16|L<<8|255)>>>0}C.ensureContrastRatio=function(g,b,x){let E=_.relativeLuminance(g>>8),T=_.relativeLuminance(b>>8);if(y(E,T)<x){if(T<E){let F=S(g,b,x),L=y(E,_.relativeLuminance(F>>8));if(L<x){let R=D(g,b,x);return L>y(E,_.relativeLuminance(R>>8))?F:R}return F}let M=D(g,b,x),w=y(E,_.relativeLuminance(M>>8));if(w<x){let F=S(g,b,x);return w>y(E,_.relativeLuminance(F>>8))?M:F}return M}},C.reduceLuminance=S,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,x,E){return{css:h.toCss(g,b,x,E),rgba:h.toRgba(g,b,x,E)}}}(m||(a.rgba=m={})),a.toPaddedHex=v,a.contrastRatio=y},345:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===o)return void this._listeners.splice(l,1)}}})),this._event}fire(o,l){let u=[];for(let i=0;i<this._listeners.length;i++)u.push(this._listeners[i]);for(let i=0;i<u.length;i++)u[i].call(void 0,o,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(o,l){return o(u=>l.fire(u))}},859:(p,a)=>{function o(l){for(let u of l)u.dispose();l.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){let u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var u;this._isDisposed||l===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},a.toDisposable=function(l){return{dispose:l}},a.disposeArray=o,a.getDisposeArrayDisposable=function(l){return{dispose:()=>o(l)}}},485:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(u,i,s){this._data[u]||(this._data[u]={}),this._data[u][i]=s}get(u,i){return this._data[u]?this._data[u][i]:void 0}clear(){this._data={}}}a.TwoKeyMap=o,a.FourKeyMap=class{constructor(){this._data=new o}set(l,u,i,s,f){this._data.get(l,u)||this._data.set(l,u,new o),this._data.get(l,u).set(i,s,f)}get(l,u,i,s){var f;return(f=this._data.get(l,u))===null||f===void 0?void 0:f.get(i,s)}clear(){this._data.clear()}}},399:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof navigator>"u";let o=a.isNode?"node":navigator.userAgent,l=a.isNode?"node":navigator.platform;a.isFirefox=o.includes("Firefox"),a.isLegacyEdge=o.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(o),a.getSafariVersion=function(){if(!a.isSafari)return 0;let u=o.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),a.isIpad=l==="iPad",a.isIphone=l==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),a.isLinux=l.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(o)},385:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;let l=o(399);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let h=0,d=0,c=f.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(h=Date.now(),this._tasks[this._i]()||this._i++,h=Math.max(1,Date.now()-h),d=Math.max(h,d),_=f.timeRemaining(),1.5*d>_)return c-h<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-h))}ms`),void this._start();c=_}this.clear()}}class i extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let h=Date.now()+f;return{timeRemaining:()=>Math.max(0,h-Date.now())}}}a.PriorityTaskQueue=i,a.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(s){return requestIdleCallback(s)}_cancelCallback(s){cancelIdleCallback(s)}}:i,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(s){this._queue.clear(),this._queue.enqueue(s)}flush(){this._queue.flush()}}},147:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(i){return[i>>>16&255,i>>>8&255,255&i]}static fromColorRGB(i){return(255&i[0])<<16|(255&i[1])<<8|255&i[2]}clone(){let i=new o;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}a.AttributeData=o;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(i){this._ext&=-67108864,this._ext|=67108863&i}get urlId(){return this._urlId}set urlId(i){this._urlId=i}constructor(i=0,s=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=s}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=l},782:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;let l=o(133),u=o(855),i=o(147);class s extends i.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new i.ExtendedAttrs,this.combinedData=""}static fromCharData(h){let d=new s;return d.setFromCharData(h),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(h){this.fg=h[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(h[u.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(h[u.CHAR_DATA_CHAR_INDEX].length===2){let c=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let _=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(c-55296)+_-56320+65536|h[u.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[u.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=h[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|h[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=s},855:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},133:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},a.utf32ToString=function(o,l=0,u=o.length){let i="";for(let s=l;s<u;++s){let f=o[s];f>65535?(f-=65536,i+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):i+=String.fromCharCode(f)}return i},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,l){let u=o.length;if(!u)return 0;let i=0,s=0;if(this._interim){let f=o.charCodeAt(s++);56320<=f&&f<=57343?l[i++]=1024*(this._interim-55296)+f-56320+65536:(l[i++]=this._interim,l[i++]=f),this._interim=0}for(let f=s;f<u;++f){let h=o.charCodeAt(f);if(55296<=h&&h<=56319){if(++f>=u)return this._interim=h,i;let d=o.charCodeAt(f);56320<=d&&d<=57343?l[i++]=1024*(h-55296)+d-56320+65536:(l[i++]=h,l[i++]=d)}else h!==65279&&(l[i++]=h)}return i}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,l){let u=o.length;if(!u)return 0;let i,s,f,h,d=0,c=0,_=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)C<<=6,C|=S;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;_<b;){if(_>=u)return 0;if(S=o[_++],(192&S)!=128){_--,y=!0;break}this.interim[D++]=S,C<<=6,C|=63&S}y||(g===2?C<128?_--:l[d++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(l[d++]=C):C<65536||C>1114111||(l[d++]=C)),this.interim.fill(0)}let m=u-4,v=_;for(;v<u;){for(;!(!(v<m)||128&(i=o[v])||128&(s=o[v+1])||128&(f=o[v+2])||128&(h=o[v+3]));)l[d++]=i,l[d++]=s,l[d++]=f,l[d++]=h,v+=4;if(i=o[v++],i<128)l[d++]=i;else if((224&i)==192){if(v>=u)return this.interim[0]=i,d;if(s=o[v++],(192&s)!=128){v--;continue}if(c=(31&i)<<6|63&s,c<128){v--;continue}l[d++]=c}else if((240&i)==224){if(v>=u)return this.interim[0]=i,d;if(s=o[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=o[v++],(192&f)!=128){v--;continue}if(c=(15&i)<<12|(63&s)<<6|63&f,c<2048||c>=55296&&c<=57343||c===65279)continue;l[d++]=c}else if((248&i)==240){if(v>=u)return this.interim[0]=i,d;if(s=o[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=o[v++],(192&f)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=f,d;if(h=o[v++],(192&h)!=128){v--;continue}if(c=(7&i)<<18|(63&s)<<12|(63&f)<<6|63&h,c<65536||c>1114111)continue;l[d++]=c}}return d}}},776:function(p,a,o){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;let i=o(859),s=o(97),f={trace:s.LogLevelEnum.TRACE,debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},h,d=a.LogService=class extends i.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),h=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let _=0;_<c.length;_++)typeof c[_]=="function"&&(c[_]=c[_]())}_log(c,_,m){this._evalLazyOptionalParams(m),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...m)}trace(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.TRACE&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.trace.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}debug(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.DEBUG&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.debug.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}info(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.INFO&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.info.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.info,c,_)}warn(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.WARN&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.warn.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.warn,c,_)}error(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.ERROR&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.error.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.error,c,_)}};a.LogService=d=l([u(0,s.IOptionsService)],d),a.setTraceLogger=function(c){h=c},a.traceCall=function(c,_,m){if(typeof m.value!="function")throw new Error("not supported");let v=m.value;m.value=function(...y){if(h.logLevel!==s.LogLevelEnum.TRACE)return v.apply(this,y);h.trace(`GlyphRenderer#${v.name}(${y.map(S=>JSON.stringify(S)).join(", ")})`);let C=v.apply(this,y);return h.trace(`GlyphRenderer#${v.name} return`,C),C}}},726:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;let o="di$target",l="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u[l]||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);let i=function(s,f,h){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,c,_){c[o]===c?c[l].push({id:d,index:_}):(c[l]=[{id:d,index:_}],c[o]=c)})(i,s,h)};return i.toString=()=>u,a.serviceRegistry.set(u,i),i}},97:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;let l=o(726);var u;a.IBufferService=(0,l.createDecorator)("BufferService"),a.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),a.ICoreService=(0,l.createDecorator)("CoreService"),a.ICharsetService=(0,l.createDecorator)("CharsetService"),a.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(i){i[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.OFF=5]="OFF"}(u||(a.LogLevelEnum=u={})),a.ILogService=(0,l.createDecorator)("LogService"),a.IOptionsService=(0,l.createDecorator)("OptionsService"),a.IOscLinkService=(0,l.createDecorator)("OscLinkService"),a.IUnicodeService=(0,l.createDecorator)("UnicodeService"),a.IDecorationService=(0,l.createDecorator)("DecorationService")}},t={};function n(p){var a=t[p];if(a!==void 0)return a.exports;var o=t[p]={exports:{}};return e[p].call(o.exports,o,o.exports,n),o.exports}var r={};return(()=>{var p=r;Object.defineProperty(p,"__esModule",{value:!0}),p.WebglAddon=void 0;let a=n(345),o=n(859),l=n(399),u=n(666),i=n(776);class s extends o.Disposable{constructor(h){if(l.isSafari&&(0,l.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=h,this._onChangeTextureAtlas=this.register(new a.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new a.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new a.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new a.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(h){let d=h._core;if(!h.element)return void this.register(d.onWillOpen(()=>this.activate(h)));this._terminal=h;let c=d.coreService,_=d.optionsService,m=d,v=m._renderService,y=m._characterJoinerService,C=m._charSizeService,S=m._coreBrowserService,D=m._decorationService,g=m._logService,b=m._themeService;(0,i.setTraceLogger)(g),this._renderer=this.register(new u.WebglRenderer(h,y,C,S,c,D,_,b,this._preserveDrawingBuffer)),this.register((0,a.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,a.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,a.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,a.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),v.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{let x=this._terminal._core._renderService;x.setRenderer(this._terminal._core._createRenderer()),x.handleResize(h.cols,h.rows)}))}get textureAtlas(){var h;return(h=this._renderer)===null||h===void 0?void 0:h.textureAtlas}clearTextureAtlas(){var h;(h=this._renderer)===null||h===void 0||h.clearTextureAtlas()}}p.WebglAddon=s})(),r})())});var F2=Tt((Mg,mT)=>{(function(e,t){typeof Mg=="object"&&typeof mT=="object"?mT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Mg=="object"?Mg.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(l,u,i,s={}){this._terminal=l,this._regex=u,this._handler=i,this._options=s}provideLinks(l,u){let i=o.computeLink(l,this._regex,this._terminal,this._handler);u(this._addCallbacks(i))}_addCallbacks(l){return l.map(u=>(u.leave=this._options.leave,u.hover=(i,s)=>{if(this._options.hover){let{range:f}=u;this._options.hover(i,s,f)}},u))}};class o{static computeLink(u,i,s,f){let h=new RegExp(i.source,(i.flags||"")+"g"),[d,c]=o._getWindowedLineStrings(u-1,s),_=d.join(""),m,v=[];for(;m=h.exec(_);){let y=m[0];try{let x=new URL(y),E=decodeURI(x.toString());if(y!==E&&y+"/"!==E)continue}catch{continue}let[C,S]=o._mapStrIdx(s,c,0,m.index),[D,g]=o._mapStrIdx(s,C,S,y.length);if(C===-1||S===-1||D===-1||g===-1)continue;let b={start:{x:S+1,y:C+1},end:{x:g,y:D+1}};v.push({range:b,text:y,activate:f})}return v}static _getWindowedLineStrings(u,i){let s,f=u,h=u,d=0,c="",_=[];if(s=i.buffer.active.getLine(u)){let m=s.translateToString(!0);if(s.isWrapped&&m[0]!==" "){for(d=0;(s=i.buffer.active.getLine(--f))&&d<2048&&(c=s.translateToString(!0),d+=c.length,_.push(c),s.isWrapped&&c.indexOf(" ")===-1););_.reverse()}for(_.push(m),d=0;(s=i.buffer.active.getLine(++h))&&s.isWrapped&&d<2048&&(c=s.translateToString(!0),d+=c.length,_.push(c),c.indexOf(" ")===-1););}return[_,f]}static _mapStrIdx(u,i,s,f){let h=u.buffer.active,d=h.getNullCell(),c=s;for(;f;){let _=h.getLine(i);if(!_)return[-1,-1];for(let m=c;m<_.length;++m){_.getCell(m,d);let v=d.getChars();if(d.getWidth()&&(f-=v.length||1,m===_.length-1&&v==="")){let y=h.getLine(i+1);y&&y.isWrapped&&(y.getCell(0,d),d.getWidth()===2&&(f+=1))}if(f<0)return[i,m]}i++,c=0}return[i,c]}}a.LinkComputer=o}},t={};function n(p){var a=t[p];if(a!==void 0)return a.exports;var o=t[p]={exports:{}};return e[p](o,o.exports,n),o.exports}var r={};return(()=>{var p=r;Object.defineProperty(p,"__esModule",{value:!0}),p.WebLinksAddon=void 0;let a=n(6),o=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function l(u,i){let s=window.open();if(s){try{s.opener=null}catch{}s.location.href=i}else console.warn("Opening link blocked as opener could not be cleared")}p.WebLinksAddon=class{constructor(u=l,i={}){this._handler=u,this._options=i}activate(u){this._terminal=u;let i=this._options,s=i.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,s,this._handler,i))}dispose(){var u;(u=this._linkProvider)===null||u===void 0||u.dispose()}}})(),r})())});var O2=Tt((Lg,DT)=>{(function(e,t){if(typeof Lg=="object"&&typeof DT=="object")DT.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var r in n)(typeof Lg=="object"?Lg:e)[r]=n[r]}})(self,()=>(()=>{"use strict";var e={4567:function(p,a,o){var l=this&&this.__decorate||function(v,y,C,S){var D,g=arguments.length,b=g<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(v,y,C,S);else for(var x=v.length-1;x>=0;x--)(D=v[x])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},u=this&&this.__param||function(v,y){return function(C,S){y(C,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;let i=o(9042),s=o(6114),f=o(9924),h=o(844),d=o(5596),c=o(4725),_=o(3656),m=a.AccessibilityManager=class extends h.Disposable{constructor(v,y){super(),this._terminal=v,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new f.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new d.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,_.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,h.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(v){for(let y=0;y<v;y++)this._handleChar(" ")}_handleChar(v){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==v&&(this._charsToAnnounce+=v):this._charsToAnnounce+=v,v===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=i.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&this._liveRegion.remove()}_handleKey(v){this._clearLiveRegion(),/\p{Control}/u.test(v)||this._charsToConsume.push(v)}_refreshRows(v,y){this._liveRegionDebouncer.refresh(v,y,this._terminal.rows)}_renderRows(v,y){let C=this._terminal.buffer,S=C.lines.length.toString();for(let D=v;D<=y;D++){let g=C.translateBufferLineToString(C.ydisp+D,!0),b=(C.ydisp+D+1).toString(),x=this._rowElements[D];x&&(g.length===0?x.innerText="\xA0":x.textContent=g,x.setAttribute("aria-posinset",b),x.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(v,y){let C=v.target,S=this._rowElements[y===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||v.relatedTarget!==S)return;let D,g;if(y===0?(D=C,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=C,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){let b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{let b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),v.preventDefault(),v.stopImmediatePropagation()}_handleResize(v){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>v;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let v=document.createElement("div");return v.setAttribute("role","listitem"),v.tabIndex=-1,this._refreshRowDimensions(v),v}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let v=0;v<this._terminal.rows;v++)this._refreshRowDimensions(this._rowElements[v])}}_refreshRowDimensions(v){v.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=m=l([u(1,c.IRenderService)],m)},3614:(p,a)=>{function o(s){return s.replace(/\r?\n/g,"\r")}function l(s,f){return f?"\x1B[200~"+s+"\x1B[201~":s}function u(s,f,h,d){s=l(s=o(s),h.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),h.triggerDataEvent(s,!0),f.value=""}function i(s,f,h){let d=h.getBoundingClientRect(),c=s.clientX-d.left-10,_=s.clientY-d.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${c}px`,f.style.top=`${_}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=o,a.bracketTextForPaste=l,a.copyHandler=function(s,f){s.clipboardData&&s.clipboardData.setData("text/plain",f.selectionText),s.preventDefault()},a.handlePasteEvent=function(s,f,h,d){s.stopPropagation(),s.clipboardData&&u(s.clipboardData.getData("text/plain"),f,h,d)},a.paste=u,a.moveTextAreaUnderMouseCursor=i,a.rightClickHandler=function(s,f,h,d,c){i(s,f,h),c&&d.rightClickSelect(s),f.value=d.selectionText,f.select()}},7239:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;let l=o(1505);a.ColorContrastCache=class{constructor(){this._color=new l.TwoKeyMap,this._css=new l.TwoKeyMap}setCss(u,i,s){this._css.set(u,i,s)}getCss(u,i){return this._css.get(u,i)}setColor(u,i,s){this._color.set(u,i,s)}getColor(u,i){return this._color.get(u,i)}clear(){this._color.clear(),this._css.clear()}}},3656:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(o,l,u,i){o.addEventListener(l,u,i);let s=!1;return{dispose:()=>{s||(s=!0,o.removeEventListener(l,u,i))}}}},6465:function(p,a,o){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier2=void 0;let i=o(3656),s=o(8460),f=o(844),h=o(2585),d=a.Linkifier2=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new s.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new s.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{let _=this._linkProviders.indexOf(c);_!==-1&&this._linkProviders.splice(_,1)}}}attachToDom(c,_,m){this._element=c,this._mouseService=_,this._renderService=m,this.register((0,i.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,i.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,i.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,i.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;let _=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!_)return;this._isMouseOut=!1;let m=c.composedPath();for(let v=0;v<m.length;v++){let y=m[v];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&_.x===this._lastBufferCell.x&&_.y===this._lastBufferCell.y||(this._handleHover(_),this._lastBufferCell=_)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,_){var m,v;this._activeProviderReplies&&_||((m=this._activeProviderReplies)===null||m===void 0||m.forEach(C=>{C?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let y=!1;for(let[C,S]of this._linkProviders.entries())_?!((v=this._activeProviderReplies)===null||v===void 0)&&v.get(C)&&(y=this._checkLinkProviderResult(C,c,y)):S.provideLinks(c.y,D=>{var g,b;if(this._isMouseOut)return;let x=D?.map(E=>({link:E}));(g=this._activeProviderReplies)===null||g===void 0||g.set(C,x),y=this._checkLinkProviderResult(C,c,y),((b=this._activeProviderReplies)===null||b===void 0?void 0:b.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,_){let m=new Set;for(let v=0;v<_.size;v++){let y=_.get(v);if(y)for(let C=0;C<y.length;C++){let S=y[C],D=S.link.range.start.y<c?0:S.link.range.start.x,g=S.link.range.end.y>c?this._bufferService.cols:S.link.range.end.x;for(let b=D;b<=g;b++){if(m.has(b)){y.splice(C--,1);break}m.add(b)}}}}_checkLinkProviderResult(c,_,m){var v;if(!this._activeProviderReplies)return m;let y=this._activeProviderReplies.get(c),C=!1;for(let S=0;S<c;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(C=!0);if(!C&&y){let S=y.find(D=>this._linkAtPosition(D.link,_));S&&(m=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!m)for(let S=0;S<this._activeProviderReplies.size;S++){let D=(v=this._activeProviderReplies.get(S))===null||v===void 0?void 0:v.find(g=>this._linkAtPosition(g.link,_));if(D){m=!0,this._handleNewLink(D);break}}return m}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;let _=this._positionFromMouseEvent(c,this._element,this._mouseService);_&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,_)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,_){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!_||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=_)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(c.link,_)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var m,v;return(v=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||v===void 0?void 0:v.decorations.pointerCursor},set:m=>{var v,y;!((v=this._currentLink)===null||v===void 0)&&v.state&&this._currentLink.state.decorations.pointerCursor!==m&&(this._currentLink.state.decorations.pointerCursor=m,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",m)))}},underline:{get:()=>{var m,v;return(v=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||v===void 0?void 0:v.decorations.underline},set:m=>{var v,y,C;!((v=this._currentLink)===null||v===void 0)&&v.state&&((C=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||C===void 0?void 0:C.decorations.underline)!==m&&(this._currentLink.state.decorations.underline=m,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,m))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(m=>{if(!this._currentLink)return;let v=m.start===0?0:m.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+m.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(v,y),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(c,_,m){var v;!((v=this._currentLink)===null||v===void 0)&&v.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),_.hover&&_.hover(m,_.text)}_fireUnderlineEvent(c,_){let m=c.range,v=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(m.start.x-1,m.start.y-v-1,m.end.x,m.end.y-v-1,void 0);(_?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(c,_,m){var v;!((v=this._currentLink)===null||v===void 0)&&v.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),_.leave&&_.leave(m,_.text)}_linkAtPosition(c,_){let m=c.range.start.y*this._bufferService.cols+c.range.start.x,v=c.range.end.y*this._bufferService.cols+c.range.end.x,y=_.y*this._bufferService.cols+_.x;return m<=y&&y<=v}_positionFromMouseEvent(c,_,m){let v=m.getCoords(c,_,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,_,m,v,y){return{x1:c,y1:_,x2:m,y2:v,cols:this._bufferService.cols,fg:y}}};a.Linkifier2=d=l([u(0,h.IBufferService)],d)},9042:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(p,a,o){var l=this&&this.__decorate||function(d,c,_,m){var v,y=arguments.length,C=y<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,c,_,m);else for(var S=d.length-1;S>=0;S--)(v=d[S])&&(C=(y<3?v(C):y>3?v(c,_,C):v(c,_))||C);return y>3&&C&&Object.defineProperty(c,_,C),C},u=this&&this.__param||function(d,c){return function(_,m){c(_,m,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;let i=o(511),s=o(2585),f=a.OscLinkProvider=class{constructor(d,c,_){this._bufferService=d,this._optionsService=c,this._oscLinkService=_}provideLinks(d,c){var _;let m=this._bufferService.buffer.lines.get(d-1);if(!m)return void c(void 0);let v=[],y=this._optionsService.rawOptions.linkHandler,C=new i.CellData,S=m.getTrimmedLength(),D=-1,g=-1,b=!1;for(let x=0;x<S;x++)if(g!==-1||m.hasContent(x)){if(m.loadCell(x,C),C.hasExtendedAttrs()&&C.extended.urlId){if(g===-1){g=x,D=C.extended.urlId;continue}b=C.extended.urlId!==D}else g!==-1&&(b=!0);if(b||g!==-1&&x===S-1){let E=(_=this._oscLinkService.getLinkData(D))===null||_===void 0?void 0:_.uri;if(E){let T={start:{x:g+1,y:d},end:{x:x+(b||x!==S-1?0:1),y:d}},M=!1;if(!y?.allowNonHttpProtocols)try{let w=new URL(E);["http:","https:"].includes(w.protocol)||(M=!0)}catch{M=!0}M||v.push({text:E,range:T,activate:(w,F)=>y?y.activate(w,F,T):h(0,F),hover:(w,F)=>{var L;return(L=y?.hover)===null||L===void 0?void 0:L.call(y,w,F,T)},leave:(w,F)=>{var L;return(L=y?.leave)===null||L===void 0?void 0:L.call(y,w,F,T)}})}b=!1,C.hasExtendedAttrs()&&C.extended.urlId?(g=x,D=C.extended.urlId):(g=-1,D=-1)}}c(v)}};function h(d,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){let _=window.open();if(_){try{_.opener=null}catch{}_.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=f=l([u(0,s.IBufferService),u(1,s.IOptionsService),u(2,s.IOscLinkService)],f)},6193:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(o,l){this._parentWindow=o,this._renderCallback=l,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,l,u){this._rowCount=u,o=o!==void 0?o:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,l),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ScreenDprMonitor=void 0;let l=o(844);class u extends l.Disposable{constructor(s){super(),this._parentWindow=s,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,l.toDisposable)(()=>{this.clearListener()}))}setListener(s){this._listener&&this.clearListener(),this._listener=s,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var s;this._outerListener&&((s=this._resolutionMediaMatchList)===null||s===void 0||s.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}a.ScreenDprMonitor=u},3236:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;let l=o(3614),u=o(3656),i=o(6465),s=o(9042),f=o(3730),h=o(1680),d=o(3107),c=o(5744),_=o(2950),m=o(1296),v=o(428),y=o(4269),C=o(5114),S=o(8934),D=o(3230),g=o(9312),b=o(4725),x=o(6731),E=o(8055),T=o(8969),M=o(8460),w=o(844),F=o(6114),L=o(8437),R=o(2584),A=o(7399),I=o(5941),$=o(9074),H=o(2585),P=o(5435),q=o(4567),G=typeof window<"u"?window.document:null;class B extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new w.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(i.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance($.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((W,U)=>this.refresh(W,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(W=>this._reportWindowsOptions(W))),this.register(this._inputHandler.onColor(W=>this._handleColorEvent(W))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(W=>this._afterResize(W.cols,W.rows))),this.register((0,w.toDisposable)(()=>{var W,U;this._customKeyEventHandler=void 0,(U=(W=this.element)===null||W===void 0?void 0:W.parentNode)===null||U===void 0||U.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let W of O){let U,k="";switch(W.index){case 256:U="foreground",k="10";break;case 257:U="background",k="11";break;case 258:U="cursor",k="12";break;default:U="ansi",k="4;"+W.index}switch(W.type){case 0:let te=E.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[W.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${R.C0.ESC}]${k};${(0,I.toRgbString)(te)}${R.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(J=>J.ansi[W.index]=E.rgba.toColor(...W.color));else{let J=U;this._themeService.modifyColors(ye=>ye[J]=E.rgba.toColor(...W.color))}break;case 2:this._themeService.restoreColor(W.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,W=this.buffer.lines.get(O);if(!W)return;let U=Math.min(this.buffer.x,this.cols-1),k=this._renderService.dimensions.css.cell.height,te=W.getWidth(U),J=this._renderService.dimensions.css.cell.width*te,ye=this.buffer.y*this._renderService.dimensions.css.cell.height,Ae=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ae+"px",this.textarea.style.top=ye+"px",this.textarea.style.width=J+"px",this.textarea.style.height=k+"px",this.textarea.style.lineHeight=k+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",W=>{this.hasSelection()&&(0,l.copyHandler)(W,this._selectionService)}));let O=W=>(0,l.handlePasteEvent)(W,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,u.addDisposableDomListener)(this.element,"paste",O)),F.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",W=>{W.button===2&&(0,l.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",W=>{(0,l.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",W=>{W.button===1&&(0,l.moveTextAreaUnderMouseCursor)(W,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){var W;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let U=G.createDocumentFragment();this._viewportElement=G.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),U.appendChild(this._viewportElement),this._viewportScrollArea=G.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=G.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=G.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),U.appendChild(this.screenElement),this.textarea=G.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",s.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(W=this._document.defaultView)!==null&&W!==void 0?W:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",k=>this._handleTextAreaFocus(k))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(v.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(x.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(k=>this._onRender.fire(k))),this.onResize(k=>this._renderService.resize(k.cols,k.rows)),this._compositionView=G.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(U);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(h.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(k=>this._renderService.handleSelectionChanged(k.start,k.end,k.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(k=>{this.textarea.value=k,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(k=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",k=>this._selectionService.handleMouseDown(k))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",k=>this._handleScreenReaderModeOptionChange(k))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",k=>{!this._overviewRulerRenderer&&k&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(m.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let O=this,W=this.element;function U(J){let ye=O._mouseService.getMouseReportCoords(J,O.screenElement);if(!ye)return!1;let Ae,we;switch(J.overrideType||J.type){case"mousemove":we=32,J.buttons===void 0?(Ae=3,J.button!==void 0&&(Ae=J.button<3?J.button:3)):Ae=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":we=0,Ae=J.button<3?J.button:3;break;case"mousedown":we=1,Ae=J.button<3?J.button:3;break;case"wheel":if(O.viewport.getLinesScrolled(J)===0)return!1;we=J.deltaY<0?0:1,Ae=4;break;default:return!1}return!(we===void 0||Ae===void 0||Ae>4)&&O.coreMouseService.triggerMouseEvent({col:ye.col,row:ye.row,x:ye.x,y:ye.y,button:Ae,action:we,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}let k={mouseup:null,wheel:null,mousedrag:null,mousemove:null},te={mouseup:J=>(U(J),J.buttons||(this._document.removeEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.removeEventListener("mousemove",k.mousedrag)),this.cancel(J)),wheel:J=>(U(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&U(J)},mousemove:J=>{J.buttons||U(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?k.mousemove||(W.addEventListener("mousemove",te.mousemove),k.mousemove=te.mousemove):(W.removeEventListener("mousemove",k.mousemove),k.mousemove=null),16&J?k.wheel||(W.addEventListener("wheel",te.wheel,{passive:!1}),k.wheel=te.wheel):(W.removeEventListener("wheel",k.wheel),k.wheel=null),2&J?k.mouseup||(W.addEventListener("mouseup",te.mouseup),k.mouseup=te.mouseup):(this._document.removeEventListener("mouseup",k.mouseup),W.removeEventListener("mouseup",k.mouseup),k.mouseup=null),4&J?k.mousedrag||(k.mousedrag=te.mousedrag):(this._document.removeEventListener("mousemove",k.mousedrag),k.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(W,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return U(J),k.mouseup&&this._document.addEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.addEventListener("mousemove",k.mousedrag),this.cancel(J)})),this.register((0,u.addDisposableDomListener)(W,"wheel",J=>{if(!k.wheel){if(!this.buffer.hasScrollback){let ye=this.viewport.getLinesScrolled(J);if(ye===0)return;let Ae=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B"),we="";for(let ce=0;ce<Math.abs(ye);ce++)we+=Ae;return this.coreService.triggerDataEvent(we,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(W,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,u.addDisposableDomListener)(W,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(O,W){var U;(U=this._renderService)===null||U===void 0||U.refreshRows(O,W)}updateCursorStyle(O){var W;!((W=this._selectionService)===null||W===void 0)&&W.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,W,U=0){var k;U===1?(super.scrollLines(O,W,U),this.refresh(0,this.rows-1)):(k=this.viewport)===null||k===void 0||k.scrollLines(O)}paste(O){(0,l.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}registerLinkProvider(O){return this.linkifier2.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let W=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),W}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,W,U){this._selectionService.setSelection(O,W,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()}selectAll(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()}selectLines(O,W){var U;(U=this._selectionService)===null||U===void 0||U.selectLines(O,W)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let W=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!W&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;W||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let U=(0,A.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),U.type===3||U.type===2){let k=this.rows-1;return this.scrollLines(U.type===2?-k:k),this.cancel(O,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(U.cancel&&this.cancel(O,!0),!U.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==R.C0.ETX&&U.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,W){let U=O.isMac&&!this.options.macOptionIsMeta&&W.altKey&&!W.ctrlKey&&!W.metaKey||O.isWindows&&W.altKey&&W.ctrlKey&&!W.metaKey||O.isWindows&&W.getModifierState("AltGraph");return W.type==="keypress"?U:U&&(!W.keyCode||W.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(W){return W.keyCode===16||W.keyCode===17||W.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let W;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)W=O.charCode;else if(O.which===null||O.which===void 0)W=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;W=O.which}return!(!W||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(W=String.fromCharCode(W),this._onKey.fire({key:W,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(W,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let W=O.data;return this.coreService.triggerDataEvent(W,!0),this.cancel(O),!0}return!1}resize(O,W){O!==this.cols||W!==this.rows?super.resize(O,W):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,W){var U,k;(U=this._charSizeService)===null||U===void 0||U.measure(),(k=this.viewport)===null||k===void 0||k.syncScrollArea(!0)}clear(){var O;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let W=1;W<this.rows;W++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(O=this.viewport)===null||O===void 0||O.reset(),this.refresh(0,this.rows-1)}}reset(){var O,W;this.options.rows=this.rows,this.options.cols=this.cols;let U=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),(W=this.viewport)===null||W===void 0||W.reset(),this._customKeyEventHandler=U,this.refresh(0,this.rows-1)}clearTextureAtlas(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()}_reportFocus(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case P.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let W=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[4;${U};${W}t`);break;case P.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let k=this._renderService.dimensions.css.cell.width.toFixed(0),te=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[6;${te};${k}t`)}}cancel(O,W){if(this.options.cancelEvents||W)return O.preventDefault(),O.stopPropagation(),!1}}a.Terminal=B},9924:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(o,l=1e3){this._renderCallback=o,this._debounceThresholdMS=l,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,l,u){this._rowCount=u,o=o!==void 0?o:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l;let i=Date.now();if(i-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=i,this._innerRefresh();else if(!this._additionalRefreshRequested){let s=i-this._lastRefreshMs,f=this._debounceThresholdMS-s;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,l)}}},1680:function(p,a,o){var l=this&&this.__decorate||function(_,m,v,y){var C,S=arguments.length,D=S<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,m,v,y);else for(var g=_.length-1;g>=0;g--)(C=_[g])&&(D=(S<3?C(D):S>3?C(m,v,D):C(m,v))||D);return S>3&&D&&Object.defineProperty(m,v,D),D},u=this&&this.__param||function(_,m){return function(v,y){m(v,y,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;let i=o(3656),s=o(4725),f=o(8460),h=o(844),d=o(2585),c=a.Viewport=class extends h.Disposable{constructor(_,m,v,y,C,S,D,g){super(),this._viewportElement=_,this._scrollArea=m,this._bufferService=v,this._optionsService=y,this._charSizeService=C,this._renderService=S,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,i.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(_){this._viewportElement.style.backgroundColor=_.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(_){if(_)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let m=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==m&&(this._lastRecordedBufferHeight=m,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let _=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==_&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=_),this._refreshAnimationFrame=null}syncScrollArea(_=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(_);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(_)}_handleScroll(_){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let m=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:m,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let _=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(_*(this._smoothScrollState.target-this._smoothScrollState.origin)),_<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(_,m){let v=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(m<0&&this._viewportElement.scrollTop!==0||m>0&&v<this._lastRecordedBufferHeight)||(_.cancelable&&_.preventDefault(),!1)}handleWheel(_){let m=this._getPixelsScrolled(_);return m!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+m:this._smoothScrollState.target+=m,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=m,this._bubbleScroll(_,m))}scrollLines(_){if(_!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let m=_*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+m,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!1})}_getPixelsScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let m=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_LINE?m*=this._currentRowHeight:_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(m*=this._currentRowHeight*this._bufferService.rows),m}getBufferElements(_,m){var v;let y,C="",S=[],D=m??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let b=_;b<D;b++){let x=g.get(b);if(!x)continue;let E=(v=g.get(b+1))===null||v===void 0?void 0:v.isWrapped;if(C+=x.translateToString(!E),!E||b===g.length-1){let T=document.createElement("div");T.textContent=C,S.push(T),C.length>0&&(y=T),C=""}}return{bufferElements:S,cursorElement:y}}getLinesScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let m=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(m/=this._currentRowHeight+0,this._wheelPartialScroll+=m,m=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(m*=this._bufferService.rows),m}_applyScrollModifier(_,m){let v=this._optionsService.rawOptions.fastScrollModifier;return v==="alt"&&m.altKey||v==="ctrl"&&m.ctrlKey||v==="shift"&&m.shiftKey?_*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:_*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(_){this._lastTouchY=_.touches[0].pageY}handleTouchMove(_){let m=this._lastTouchY-_.touches[0].pageY;return this._lastTouchY=_.touches[0].pageY,m!==0&&(this._viewportElement.scrollTop+=m,this._bubbleScroll(_,m))}};a.Viewport=c=l([u(2,d.IBufferService),u(3,d.IOptionsService),u(4,s.ICharSizeService),u(5,s.IRenderService),u(6,s.ICoreBrowserService),u(7,s.IThemeService)],c)},3107:function(p,a,o){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;let i=o(3656),s=o(4725),f=o(844),h=o(2585),d=a.BufferDecorationRenderer=class extends f.Disposable{constructor(c,_,m,v){super(),this._screenElement=c,this._bufferService=_,this._decorationService=m,this._renderService=v,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,i.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,f.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var _,m;let v=document.createElement("div");v.classList.add("xterm-decoration"),v.classList.toggle("xterm-decoration-top-layer",((_=c?.options)===null||_===void 0?void 0:_.layer)==="top"),v.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,v.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",v.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",v.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let y=(m=c.options.x)!==null&&m!==void 0?m:0;return y&&y>this._bufferService.cols&&(v.style.display="none"),this._refreshXPosition(c,v),v}_refreshStyle(c){let _=c.marker.line-this._bufferService.buffers.active.ydisp;if(_<0||_>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let m=this._decorationElements.get(c);m||(m=this._createElement(c),c.element=m,this._decorationElements.set(c,m),this._container.appendChild(m),c.onDispose(()=>{this._decorationElements.delete(c),m.remove()})),m.style.top=_*this._renderService.dimensions.css.cell.height+"px",m.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(m)}}_refreshXPosition(c,_=c.element){var m;if(!_)return;let v=(m=c.options.x)!==null&&m!==void 0?m:0;(c.options.anchor||"left")==="right"?_.style.right=v?v*this._renderService.dimensions.css.cell.width+"px":"":_.style.left=v?v*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var _;(_=this._decorationElements.get(c))===null||_===void 0||_.remove(),this._decorationElements.delete(c),c.dispose()}};a.BufferDecorationRenderer=d=l([u(1,h.IBufferService),u(2,h.IDecorationService),u(3,s.IRenderService)],d)},5871:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let l of this._zones)if(l.color===o.options.overviewRulerOptions.color&&l.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(l,o.marker.line))return;if(this._lineAdjacentToZone(l,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(l,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,l){return l>=o.startBufferLine&&l<=o.endBufferLine}_lineAdjacentToZone(o,l,u){return l>=o.startBufferLine-this._linePadding[u||"full"]&&l<=o.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(o,l){o.startBufferLine=Math.min(o.startBufferLine,l),o.endBufferLine=Math.max(o.endBufferLine,l)}}},5744:function(p,a,o){var l=this&&this.__decorate||function(y,C,S,D){var g,b=arguments.length,x=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(y,C,S,D);else for(var E=y.length-1;E>=0;E--)(g=y[E])&&(x=(b<3?g(x):b>3?g(C,S,x):g(C,S))||x);return b>3&&x&&Object.defineProperty(C,S,x),x},u=this&&this.__param||function(y,C){return function(S,D){C(S,D,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;let i=o(5871),s=o(3656),f=o(4725),h=o(844),d=o(2585),c={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0},v=a.OverviewRulerRenderer=class extends h.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,C,S,D,g,b,x){var E;super(),this._viewportElement=y,this._screenElement=C,this._bufferService=S,this._decorationService=D,this._renderService=g,this._optionsService=b,this._coreBrowseService=x,this._colorZoneStore=new i.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(E=this._viewportElement.parentElement)===null||E===void 0||E.insertBefore(this._canvas,this._viewportElement);let T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,h.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,s.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let y=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);_.full=this._canvas.width,_.left=y,_.center=C,_.right=y,this._refreshDrawHeightConstants(),m.full=0,m.left=0,m.center=_.left,m.right=_.left+_.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);let y=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);c.left=C,c.center=C,c.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let y=this._colorZoneStore.zones;for(let C of y)C.position!=="full"&&this._renderColorZone(C);for(let C of y)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(m[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-c[y.position||"full"]/2),_[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[y.position||"full"]))}_queueRefresh(y,C){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=v=l([u(2,d.IBufferService),u(3,d.IDecorationService),u(4,f.IRenderService),u(5,d.IOptionsService),u(6,f.ICoreBrowserService)],v)},2950:function(p,a,o){var l=this&&this.__decorate||function(d,c,_,m){var v,y=arguments.length,C=y<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,c,_,m);else for(var S=d.length-1;S>=0;S--)(v=d[S])&&(C=(y<3?v(C):y>3?v(c,_,C):v(c,_))||C);return y>3&&C&&Object.defineProperty(c,_,C),C},u=this&&this.__param||function(d,c){return function(_,m){c(_,m,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;let i=o(4725),s=o(2585),f=o(2584),h=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,c,_,m,v,y){this._textarea=d,this._compositionView=c,this._bufferService=_,this._optionsService=m,this._coreService=v,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){let c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let _;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,_=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),_.length>0&&this._coreService.triggerDataEvent(_,!0)}},0)}else{this._isSendingComposition=!1;let c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){let d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let c=this._textarea.value,_=c.replace(d,"");this._dataAlreadySent=_,c.length>d.length?this._coreService.triggerDataEvent(_,!0):c.length<d.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):c.length===d.length&&c!==d&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),_=this._renderService.dimensions.css.cell.height,m=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,v=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=v+"px",this._compositionView.style.top=m+"px",this._compositionView.style.height=_+"px",this._compositionView.style.lineHeight=_+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let y=this._compositionView.getBoundingClientRect();this._textarea.style.left=v+"px",this._textarea.style.top=m+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=h=l([u(2,s.IBufferService),u(3,s.IOptionsService),u(4,s.ICoreService),u(5,i.IRenderService)],h)},9806:(p,a)=>{function o(l,u,i){let s=i.getBoundingClientRect(),f=l.getComputedStyle(i),h=parseInt(f.getPropertyValue("padding-left")),d=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-s.left-h,u.clientY-s.top-d]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=o,a.getCoords=function(l,u,i,s,f,h,d,c,_){if(!h)return;let m=o(l,u,i);return m?(m[0]=Math.ceil((m[0]+(_?d/2:0))/d),m[1]=Math.ceil(m[1]/c),m[0]=Math.min(Math.max(m[0],1),s+(_?1:0)),m[1]=Math.min(Math.max(m[1],1),f),m):void 0}},9504:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;let l=o(2584);function u(c,_,m,v){let y=c-i(c,m),C=_-i(_,m),S=Math.abs(y-C)-function(D,g,b){let x=0,E=D-i(D,b),T=g-i(g,b);for(let M=0;M<Math.abs(E-T);M++){let w=s(D,g)==="A"?-1:1,F=b.buffer.lines.get(E+w*M);F?.isWrapped&&x++}return x}(c,_,m);return d(S,h(s(c,_),v))}function i(c,_){let m=0,v=_.buffer.lines.get(c),y=v?.isWrapped;for(;y&&c>=0&&c<_.rows;)m++,v=_.buffer.lines.get(--c),y=v?.isWrapped;return m}function s(c,_){return c>_?"A":"B"}function f(c,_,m,v,y,C){let S=c,D=_,g="";for(;S!==m||D!==v;)S+=y?1:-1,y&&S>C.cols-1?(g+=C.buffer.translateBufferLineToString(D,!1,c,S),S=0,c=0,D++):!y&&S<0&&(g+=C.buffer.translateBufferLineToString(D,!1,0,c+1),S=C.cols-1,c=S,D--);return g+C.buffer.translateBufferLineToString(D,!1,c,S)}function h(c,_){let m=_?"O":"[";return l.C0.ESC+m+c}function d(c,_){c=Math.floor(c);let m="";for(let v=0;v<c;v++)m+=_;return m}a.moveToCellSequence=function(c,_,m,v){let y=m.buffer.x,C=m.buffer.y;if(!m.buffer.hasScrollback)return function(g,b,x,E,T,M){return u(b,E,T,M).length===0?"":d(f(g,b,g,b-i(b,T),!1,T).length,h("D",M))}(y,C,0,_,m,v)+u(C,_,m,v)+function(g,b,x,E,T,M){let w;w=u(b,E,T,M).length>0?E-i(E,T):b;let F=E,L=function(R,A,I,$,H,P){let q;return q=u(I,$,H,P).length>0?$-i($,H):A,R<I&&q<=$||R>=I&&q<$?"C":"D"}(g,b,x,E,T,M);return d(f(g,w,x,F,L==="C",T).length,h(L,M))}(y,C,c,_,m,v);let S;if(C===_)return S=y>c?"D":"C",d(Math.abs(y-c),h(S,v));S=C>_?"D":"C";let D=Math.abs(C-_);return d(function(g,b){return b.cols-g}(C>_?c:y,m)+(D-1)*m.cols+1+((C>_?y:c)-1),h(S,v))}},1296:function(p,a,o){var l=this&&this.__decorate||function(T,M,w,F){var L,R=arguments.length,A=R<3?M:F===null?F=Object.getOwnPropertyDescriptor(M,w):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(T,M,w,F);else for(var I=T.length-1;I>=0;I--)(L=T[I])&&(A=(R<3?L(A):R>3?L(M,w,A):L(M,w))||A);return R>3&&A&&Object.defineProperty(M,w,A),A},u=this&&this.__param||function(T,M){return function(w,F){M(w,F,T)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;let i=o(3787),s=o(2550),f=o(2223),h=o(6171),d=o(4725),c=o(8055),_=o(8460),m=o(844),v=o(2585),y="xterm-dom-renderer-owner-",C="xterm-rows",S="xterm-fg-",D="xterm-bg-",g="xterm-focus",b="xterm-selection",x=1,E=a.DomRenderer=class extends m.Disposable{constructor(T,M,w,F,L,R,A,I,$,H){super(),this._element=T,this._screenElement=M,this._viewportElement=w,this._linkifier2=F,this._charSizeService=R,this._optionsService=A,this._bufferService=I,this._coreBrowserService=$,this._themeService=H,this._terminalClass=x++,this._rowElements=[],this.onRequestRedraw=this.register(new _.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,h.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(P=>this._injectCss(P))),this._injectCss(this._themeService.colors),this._rowFactory=L.createInstance(i.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(P=>this._handleLinkHover(P))),this.register(this._linkifier2.onHideLinkUnderline(P=>this._handleLinkLeave(P))),this.register((0,m.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new s.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let w of this._rowElements)w.style.width=`${this.dimensions.css.canvas.width}px`,w.style.height=`${this.dimensions.css.cell.height}px`,w.style.lineHeight=`${this.dimensions.css.cell.height}px`,w.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let M=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${C} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${C} .xterm-dim { color: ${c.color.multiplyOpacity(T.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,M+=`${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(let[w,F]of T.ansi.entries())M+=`${this._terminalSelector} .${S}${w} { color: ${F.css}; }${this._terminalSelector} .${S}${w}.xterm-dim { color: ${c.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${D}${w} { background-color: ${F.css}; }`;M+=`${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(T.background).css}; }${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${D}${f.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){let T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,M){for(let w=this._rowElements.length;w<=M;w++){let F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,M){this._refreshRowElements(T,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,M,w){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,M,w),this.renderRows(0,this._bufferService.rows-1),!T||!M)return;let F=T[1]-this._bufferService.buffer.ydisp,L=M[1]-this._bufferService.buffer.ydisp,R=Math.max(F,0),A=Math.min(L,this._bufferService.rows-1);if(R>=this._bufferService.rows||A<0)return;let I=document.createDocumentFragment();if(w){let $=T[0]>M[0];I.appendChild(this._createSelectionElement(R,$?M[0]:T[0],$?T[0]:M[0],A-R+1))}else{let $=F===R?T[0]:0,H=R===L?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,$,H));let P=A-R-1;if(I.appendChild(this._createSelectionElement(R+1,0,this._bufferService.cols,P)),R!==A){let q=L===A?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(A,0,q))}}this._selectionContainer.appendChild(I)}_createSelectionElement(T,M,w,F=1){let L=document.createElement("div");return L.style.height=F*this.dimensions.css.cell.height+"px",L.style.top=T*this.dimensions.css.cell.height+"px",L.style.left=M*this.dimensions.css.cell.width+"px",L.style.width=this.dimensions.css.cell.width*(w-M)+"px",L}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let T of this._rowElements)T.replaceChildren()}renderRows(T,M){let w=this._bufferService.buffer,F=w.ybase+w.y,L=Math.min(w.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink,A=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=T;$<=M;$++){let H=$+w.ydisp,P=this._rowElements[$],q=w.lines.get(H);if(!P||!q)break;P.replaceChildren(...this._rowFactory.createRow(q,H,H===F,A,I,L,R,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,M,w,F,L,R){w<0&&(T=0),F<0&&(M=0);let A=this._bufferService.rows-1;w=Math.max(Math.min(w,A),0),F=Math.max(Math.min(F,A),0),L=Math.min(L,this._bufferService.cols);let I=this._bufferService.buffer,$=I.ybase+I.y,H=Math.min(I.x,L-1),P=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,G=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=w;B<=F;++B){let Q=B+I.ydisp,O=this._rowElements[B],W=I.lines.get(Q);if(!O||!W)break;O.replaceChildren(...this._rowFactory.createRow(W,Q,Q===$,q,G,H,P,this.dimensions.css.cell.width,this._widthCache,R?B===w?T:0:-1,R?(B===F?M:L)-1:-1))}}};a.DomRenderer=E=l([u(4,v.IInstantiationService),u(5,d.ICharSizeService),u(6,v.IOptionsService),u(7,v.IBufferService),u(8,d.ICoreBrowserService),u(9,d.IThemeService)],E)},3787:function(p,a,o){var l=this&&this.__decorate||function(S,D,g,b){var x,E=arguments.length,T=E<3?D:b===null?b=Object.getOwnPropertyDescriptor(D,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(S,D,g,b);else for(var M=S.length-1;M>=0;M--)(x=S[M])&&(T=(E<3?x(T):E>3?x(D,g,T):x(D,g))||T);return E>3&&T&&Object.defineProperty(D,g,T),T},u=this&&this.__param||function(S,D){return function(g,b){D(g,b,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;let i=o(2223),s=o(643),f=o(511),h=o(2585),d=o(8055),c=o(4725),_=o(4269),m=o(6171),v=o(3734),y=a.DomRendererRowFactory=class{constructor(S,D,g,b,x,E,T){this._document=S,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=b,this._coreService=x,this._decorationService=E,this._themeService=T,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,D,g){this._selectionStart=S,this._selectionEnd=D,this._columnSelectMode=g}createRow(S,D,g,b,x,E,T,M,w,F,L){let R=[],A=this._characterJoinerService.getJoinedCharacters(D),I=this._themeService.colors,$,H=S.getNoBgTrimmedLength();g&&H<E+1&&(H=E+1);let P=0,q="",G=0,B=0,Q=0,O=!1,W=0,U=!1,k=0,te=[],J=F!==-1&&L!==-1;for(let ye=0;ye<H;ye++){S.loadCell(ye,this._workCell);let Ae=this._workCell.getWidth();if(Ae===0)continue;let we=!1,ce=ye,xe=this._workCell;if(A.length>0&&ye===A[0][0]){we=!0;let Ge=A.shift();xe=new _.JoinedCellData(this._workCell,S.translateToString(!0,Ge[0],Ge[1]),Ge[1]-Ge[0]),ce=Ge[1]-1,Ae=xe.getWidth()}let Rt=this._isCellInSelection(ye,D),un=g&&ye===E,Jt=J&&ye>=F&&ye<=L,tt=!1;this._decorationService.forEachDecorationAtCell(ye,D,void 0,Ge=>{tt=!0});let le=xe.getChars()||s.WHITESPACE_CELL_CHAR;if(le===" "&&(xe.isUnderline()||xe.isOverline())&&(le="\xA0"),k=Ae*M-w.get(le,xe.isBold(),xe.isItalic()),$){if(P&&(Rt&&U||!Rt&&!U&&xe.bg===G)&&(Rt&&U&&I.selectionForeground||xe.fg===B)&&xe.extended.ext===Q&&Jt===O&&k===W&&!un&&!we&&!tt){q+=le,P++;continue}P&&($.textContent=q),$=this._document.createElement("span"),P=0,q=""}else $=this._document.createElement("span");if(G=xe.bg,B=xe.fg,Q=xe.extended.ext,O=Jt,W=k,U=Rt,we&&E>=ye&&E<=ce&&(E=ye),!this._coreService.isCursorHidden&&un){if(te.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&te.push("xterm-cursor-blink"),te.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(x)switch(x){case"outline":te.push("xterm-cursor-outline");break;case"block":te.push("xterm-cursor-block");break;case"bar":te.push("xterm-cursor-bar");break;case"underline":te.push("xterm-cursor-underline")}}if(xe.isBold()&&te.push("xterm-bold"),xe.isItalic()&&te.push("xterm-italic"),xe.isDim()&&te.push("xterm-dim"),q=xe.isInvisible()?s.WHITESPACE_CELL_CHAR:xe.getChars()||s.WHITESPACE_CELL_CHAR,xe.isUnderline()&&(te.push(`xterm-underline-${xe.extended.underlineStyle}`),q===" "&&(q="\xA0"),!xe.isUnderlineColorDefault()))if(xe.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${v.AttributeData.toColorRGB(xe.getUnderlineColor()).join(",")})`;else{let Ge=xe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&xe.isBold()&&Ge<8&&(Ge+=8),$.style.textDecorationColor=I.ansi[Ge].css}xe.isOverline()&&(te.push("xterm-overline"),q===" "&&(q="\xA0")),xe.isStrikethrough()&&te.push("xterm-strikethrough"),Jt&&($.style.textDecoration="underline");let ve=xe.getFgColor(),fe=xe.getFgColorMode(),ae=xe.getBgColor(),j=xe.getBgColorMode(),ie=!!xe.isInverse();if(ie){let Ge=ve;ve=ae,ae=Ge;let $t=fe;fe=j,j=$t}let he,ze,at,gt=!1;switch(this._decorationService.forEachDecorationAtCell(ye,D,void 0,Ge=>{Ge.options.layer!=="top"&&gt||(Ge.backgroundColorRGB&&(j=50331648,ae=Ge.backgroundColorRGB.rgba>>8&16777215,he=Ge.backgroundColorRGB),Ge.foregroundColorRGB&&(fe=50331648,ve=Ge.foregroundColorRGB.rgba>>8&16777215,ze=Ge.foregroundColorRGB),gt=Ge.options.layer==="top")}),!gt&&Rt&&(he=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,ae=he.rgba>>8&16777215,j=50331648,gt=!0,I.selectionForeground&&(fe=50331648,ve=I.selectionForeground.rgba>>8&16777215,ze=I.selectionForeground)),gt&&te.push("xterm-decoration-top"),j){case 16777216:case 33554432:at=I.ansi[ae],te.push(`xterm-bg-${ae}`);break;case 50331648:at=d.rgba.toColor(ae>>16,ae>>8&255,255&ae),this._addStyle($,`background-color:#${C((ae>>>0).toString(16),"0",6)}`);break;default:ie?(at=I.foreground,te.push(`xterm-bg-${i.INVERTED_DEFAULT_COLOR}`)):at=I.background}switch(he||xe.isDim()&&(he=d.color.multiplyOpacity(at,.5)),fe){case 16777216:case 33554432:xe.isBold()&&ve<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ve+=8),this._applyMinimumContrast($,at,I.ansi[ve],xe,he,void 0)||te.push(`xterm-fg-${ve}`);break;case 50331648:let Ge=d.rgba.toColor(ve>>16&255,ve>>8&255,255&ve);this._applyMinimumContrast($,at,Ge,xe,he,ze)||this._addStyle($,`color:#${C(ve.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,at,I.foreground,xe,he,void 0)||ie&&te.push(`xterm-fg-${i.INVERTED_DEFAULT_COLOR}`)}te.length&&($.className=te.join(" "),te.length=0),un||we||tt?$.textContent=q:P++,k!==this.defaultSpacing&&($.style.letterSpacing=`${k}px`),R.push($),ye=ce}return $&&P&&($.textContent=q),R}_applyMinimumContrast(S,D,g,b,x,E){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,m.excludeFromContrastRatioDemands)(b.getCode()))return!1;let T=this._getContrastCache(b),M;if(x||E||(M=T.getColor(D.rgba,g.rgba)),M===void 0){let w=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);M=d.color.ensureContrastRatio(x||D,E||g,w),T.setColor((x||D).rgba,(E||g).rgba,M??null)}return!!M&&(this._addStyle(S,`color:${M.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,D){S.setAttribute("style",`${S.getAttribute("style")||""}${D};`)}_isCellInSelection(S,D){let g=this._selectionStart,b=this._selectionEnd;return!(!g||!b)&&(this._columnSelectMode?g[0]<=b[0]?S>=g[0]&&D>=g[1]&&S<b[0]&&D<=b[1]:S<g[0]&&D>=g[1]&&S>=b[0]&&D<=b[1]:D>g[1]&&D<b[1]||g[1]===b[1]&&D===g[1]&&S>=g[0]&&S<b[0]||g[1]<b[1]&&D===b[1]&&S<b[0]||g[1]<b[1]&&D===g[1]&&S>=g[0])}};function C(S,D,g){for(;S.length<g;)S=D+S;return S}a.DomRendererRowFactory=y=l([u(1,c.ICharacterJoinerService),u(2,h.IOptionsService),u(3,c.ICoreBrowserService),u(4,h.ICoreService),u(5,h.IDecorationService),u(6,c.IThemeService)],y)},2550:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let l=o.createElement("span"),u=o.createElement("span");u.style.fontWeight="bold";let i=o.createElement("span");i.style.fontStyle="italic";let s=o.createElement("span");s.style.fontWeight="bold",s.style.fontStyle="italic",this._measureElements=[l,u,i,s],this._container.appendChild(l),this._container.appendChild(u),this._container.appendChild(i),this._container.appendChild(s),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,l,u,i){o===this._font&&l===this._fontSize&&u===this._weight&&i===this._weightBold||(this._font=o,this._fontSize=l,this._weight=u,this._weightBold=i,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${i}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${i}`,this.clear())}get(o,l,u){let i=0;if(!l&&!u&&o.length===1&&(i=o.charCodeAt(0))<256)return this._flat[i]!==-9999?this._flat[i]:this._flat[i]=this._measure(o,0);let s=o;l&&(s+="B"),u&&(s+="I");let f=this._holey.get(s);if(f===void 0){let h=0;l&&(h|=1),u&&(h|=2),f=this._measure(o,h),this._holey.set(s,f)}return f}_measure(o,l){let u=this._measureElements[l];return u.textContent=o.repeat(32),u.offsetWidth/32}}},2223:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;let l=o(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},6171:(p,a)=>{function o(l){return 57508<=l&&l<=57558}Object.defineProperty(a,"__esModule",{value:!0}),a.createRenderDimensions=a.excludeFromContrastRatioDemands=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},a.isPowerlineGlyph=o,a.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},a.excludeFromContrastRatioDemands=function(l){return o(l)||function(u){return 9472<=u&&u<=9631}(l)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,l=this.selectionEnd;return!(!o||!l)&&(o[1]>l[1]||o[1]===l[1]&&o[0]>l[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(p,a,o){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;let i=o(2585),s=o(8460),f=o(844),h=a.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,_,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new s.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new d(c,_,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};a.CharSizeService=h=l([u(2,i.IOptionsService)],h);class d{constructor(_,m,v){this._document=_,this._parentElement=m,this._optionsService=v,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let _={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return _.width!==0&&_.height!==0&&(this._result.width=_.width/32,this._result.height=Math.ceil(_.height)),this._result}}},4269:function(p,a,o){var l=this&&this.__decorate||function(_,m,v,y){var C,S=arguments.length,D=S<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,m,v,y);else for(var g=_.length-1;g>=0;g--)(C=_[g])&&(D=(S<3?C(D):S>3?C(m,v,D):C(m,v))||D);return S>3&&D&&Object.defineProperty(m,v,D),D},u=this&&this.__param||function(_,m){return function(v,y){m(v,y,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;let i=o(3734),s=o(643),f=o(511),h=o(2585);class d extends i.AttributeData{constructor(m,v,y){super(),this.content=0,this.combinedData="",this.fg=m.fg,this.bg=m.bg,this.combinedData=v,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(m){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=d;let c=a.CharacterJoinerService=class H2{constructor(m){this._bufferService=m,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(m){let v={id:this._nextCharacterJoinerId++,handler:m};return this._characterJoiners.push(v),v.id}deregister(m){for(let v=0;v<this._characterJoiners.length;v++)if(this._characterJoiners[v].id===m)return this._characterJoiners.splice(v,1),!0;return!1}getJoinedCharacters(m){if(this._characterJoiners.length===0)return[];let v=this._bufferService.buffer.lines.get(m);if(!v||v.length===0)return[];let y=[],C=v.translateToString(!0),S=0,D=0,g=0,b=v.getFg(0),x=v.getBg(0);for(let E=0;E<v.getTrimmedLength();E++)if(v.loadCell(E,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==x){if(E-S>1){let T=this._getJoinedRanges(C,g,D,v,S);for(let M=0;M<T.length;M++)y.push(T[M])}S=E,g=D,b=this._workCell.fg,x=this._workCell.bg}D+=this._workCell.getChars().length||s.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let E=this._getJoinedRanges(C,g,D,v,S);for(let T=0;T<E.length;T++)y.push(E[T])}return y}_getJoinedRanges(m,v,y,C,S){let D=m.substring(v,y),g=[];try{g=this._characterJoiners[0].handler(D)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{let x=this._characterJoiners[b].handler(D);for(let E=0;E<x.length;E++)H2._mergeRanges(g,x[E])}catch(x){console.error(x)}return this._stringRangesToCellRanges(g,C,S),g}_stringRangesToCellRanges(m,v,y){let C=0,S=!1,D=0,g=m[C];if(g){for(let b=y;b<this._bufferService.cols;b++){let x=v.getWidth(b),E=v.getString(b).length||s.WHITESPACE_CELL_CHAR.length;if(x!==0){if(!S&&g[0]<=D&&(g[0]=b,S=!0),g[1]<=D){if(g[1]=b,g=m[++C],!g)break;g[0]<=D?(g[0]=b,S=!0):S=!1}D+=E}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(m,v){let y=!1;for(let C=0;C<m.length;C++){let S=m[C];if(y){if(v[1]<=S[0])return m[C-1][1]=v[1],m;if(v[1]<=S[1])return m[C-1][1]=Math.max(v[1],S[1]),m.splice(C,1),m;m.splice(C,1),C--}else{if(v[1]<=S[0])return m.splice(C,0,v),m;if(v[1]<=S[1])return S[0]=Math.min(v[0],S[0]),m;v[0]<S[1]&&(S[0]=Math.min(v[0],S[0]),y=!0)}}return y?m[m.length-1][1]=v[1]:m.push(v),m}};a.CharacterJoinerService=c=l([u(0,h.IBufferService)],c)},5114:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0,a.CoreBrowserService=class{constructor(o,l){this._textarea=o,this.window=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(p,a,o){var l=this&&this.__decorate||function(h,d,c,_){var m,v=arguments.length,y=v<3?d:_===null?_=Object.getOwnPropertyDescriptor(d,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(h,d,c,_);else for(var C=h.length-1;C>=0;C--)(m=h[C])&&(y=(v<3?m(y):v>3?m(d,c,y):m(d,c))||y);return v>3&&y&&Object.defineProperty(d,c,y),y},u=this&&this.__param||function(h,d){return function(c,_){d(c,_,h)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;let i=o(4725),s=o(9806),f=a.MouseService=class{constructor(h,d){this._renderService=h,this._charSizeService=d}getCoords(h,d,c,_,m){return(0,s.getCoords)(window,h,d,c,_,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,m)}getMouseReportCoords(h,d){let c=(0,s.getCoordsRelativeToElement)(window,h,d);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};a.MouseService=f=l([u(0,i.IRenderService),u(1,i.ICharSizeService)],f)},3230:function(p,a,o){var l=this&&this.__decorate||function(y,C,S,D){var g,b=arguments.length,x=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(y,C,S,D);else for(var E=y.length-1;E>=0;E--)(g=y[E])&&(x=(b<3?g(x):b>3?g(C,S,x):g(C,S))||x);return b>3&&x&&Object.defineProperty(C,S,x),x},u=this&&this.__param||function(y,C){return function(S,D){C(S,D,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;let i=o(3656),s=o(6193),f=o(5596),h=o(4725),d=o(8460),c=o(844),_=o(7226),m=o(2585),v=a.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,C,S,D,g,b,x,E){if(super(),this._rowCount=y,this._charSizeService=D,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new d.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new d.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new d.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new d.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new s.RenderDebouncer(x.window,(T,M)=>this._renderRows(T,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new f.ScreenDprMonitor(x.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register((0,i.addDisposableDomListener)(x.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(E.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in x.window){let T=new x.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});T.observe(C),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,C,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,C,this._rowCount))}_renderRows(y,C){this._renderer.value&&(y=Math.min(y,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(y,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:C}),this._onRender.fire({start:y,end:C}),this._isNextRenderRedrawOnly=!0)}resize(y,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,C;this._renderer.value&&((C=(y=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,C)):this._renderer.value.handleResize(y,C),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,C,S){var D;this._selectionState.start=y,this._selectionState.end=C,this._selectionState.columnSelectMode=S,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(y,C,S)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};a.RenderService=v=l([u(2,m.IOptionsService),u(3,h.ICharSizeService),u(4,m.IDecorationService),u(5,m.IBufferService),u(6,h.ICoreBrowserService),u(7,h.IThemeService)],v)},9312:function(p,a,o){var l=this&&this.__decorate||function(g,b,x,E){var T,M=arguments.length,w=M<3?b:E===null?E=Object.getOwnPropertyDescriptor(b,x):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,b,x,E);else for(var F=g.length-1;F>=0;F--)(T=g[F])&&(w=(M<3?T(w):M>3?T(b,x,w):T(b,x))||w);return M>3&&w&&Object.defineProperty(b,x,w),w},u=this&&this.__param||function(g,b){return function(x,E){b(x,E,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;let i=o(9806),s=o(9504),f=o(456),h=o(4725),d=o(8460),c=o(844),_=o(6114),m=o(4841),v=o(511),y=o(2585),C="\xA0",S=new RegExp(C,"g"),D=a.SelectionService=class extends c.Disposable{constructor(g,b,x,E,T,M,w,F,L){super(),this._element=g,this._screenElement=b,this._linkifier=x,this._bufferService=E,this._coreService=T,this._mouseService=M,this._optionsService=w,this._renderService=F,this._coreBrowserService=L,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new v.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=R=>this._handleMouseMove(R),this._mouseUpListener=R=>this._handleMouseUp(R),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(R=>this._handleTrim(R)),this.register(this._bufferService.buffers.onBufferActivate(R=>this._handleBufferActivate(R))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!g||!b||g[0]===b[0]&&g[1]===b[1])}get selectionText(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!g||!b)return"";let x=this._bufferService.buffer,E=[];if(this._activeSelectionMode===3){if(g[0]===b[0])return"";let T=g[0]<b[0]?g[0]:b[0],M=g[0]<b[0]?b[0]:g[0];for(let w=g[1];w<=b[1];w++){let F=x.translateBufferLineToString(w,!0,T,M);E.push(F)}}else{let T=g[1]===b[1]?b[0]:void 0;E.push(x.translateBufferLineToString(g[1],!0,g[0],T));for(let M=g[1]+1;M<=b[1]-1;M++){let w=x.lines.get(M),F=x.translateBufferLineToString(M,!0);w?.isWrapped?E[E.length-1]+=F:E.push(F)}if(g[1]!==b[1]){let M=x.lines.get(b[1]),w=x.translateBufferLineToString(b[1],!0,0,b[0]);M&&M.isWrapped?E[E.length-1]+=w:E.push(w)}}return E.map(T=>T.replace(S," ")).join(_.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),_.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){let b=this._getMouseBufferCoords(g),x=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!!(x&&E&&b)&&this._areCoordsInSelection(b,x,E)}isCellInSelection(g,b){let x=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!x||!E)&&this._areCoordsInSelection([g,b],x,E)}_areCoordsInSelection(g,b,x){return g[1]>b[1]&&g[1]<x[1]||b[1]===x[1]&&g[1]===b[1]&&g[0]>=b[0]&&g[0]<x[0]||b[1]<x[1]&&g[1]===x[1]&&g[0]<x[0]||b[1]<x[1]&&g[1]===b[1]&&g[0]>=b[0]}_selectWordAtCursor(g,b){var x,E;let T=(E=(x=this._linkifier.currentLink)===null||x===void 0?void 0:x.link)===null||E===void 0?void 0:E.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,m.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let M=this._getMouseBufferCoords(g);return!!M&&(this._selectWordAt(M,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,b){this._model.clearSelection(),g=Math.max(g,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){let b=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(g){let b=(0,i.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1],x=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=x?0:(b>x&&(b-=x),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(g){return _.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){let b=this._getMouseBufferCoords(g);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(g){return g.altKey&&!(_.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;let b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let x=this._bufferService.buffer;if(this._model.selectionEnd[1]<x.lines.length){let E=x.lines.get(this._model.selectionEnd[1]);E&&E.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){let b=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let x=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(x&&x[0]!==void 0&&x[1]!==void 0){let E=(0,s.moveToCellSequence)(x[0]-1,x[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(E,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,x=!(!g||!b||g[0]===b[0]&&g[1]===b[1]);x?g&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,b,x)):this._oldHasSelection&&this._fireOnSelectionChange(g,b,x)}_fireOnSelectionChange(g,b,x){this._oldSelectionStart=g,this._oldSelectionEnd=b,this._oldHasSelection=x,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(g,b){let x=b;for(let E=0;b>=E;E++){let T=g.loadCell(E,this._workCell).getChars().length;this._workCell.getWidth()===0?x--:T>1&&b!==E&&(x+=T-1)}return x}setSelection(g,b,x){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,b],this._model.selectionStartLength=x,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,b,x=!0,E=!0){if(g[0]>=this._bufferService.cols)return;let T=this._bufferService.buffer,M=T.lines.get(g[1]);if(!M)return;let w=T.translateBufferLineToString(g[1],!1),F=this._convertViewportColToCharacterIndex(M,g[0]),L=F,R=g[0]-F,A=0,I=0,$=0,H=0;if(w.charAt(F)===" "){for(;F>0&&w.charAt(F-1)===" ";)F--;for(;L<w.length&&w.charAt(L+1)===" ";)L++}else{let G=g[0],B=g[0];M.getWidth(G)===0&&(A++,G--),M.getWidth(B)===2&&(I++,B++);let Q=M.getString(B).length;for(Q>1&&(H+=Q-1,L+=Q-1);G>0&&F>0&&!this._isCharWordSeparator(M.loadCell(G-1,this._workCell));){M.loadCell(G-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(A++,G--):O>1&&($+=O-1,F-=O-1),F--,G--}for(;B<M.length&&L+1<w.length&&!this._isCharWordSeparator(M.loadCell(B+1,this._workCell));){M.loadCell(B+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,B++):O>1&&(H+=O-1,L+=O-1),L++,B++}}L++;let P=F+R-A+$,q=Math.min(this._bufferService.cols,L-F+A+I-$-H);if(b||w.slice(F,L).trim()!==""){if(x&&P===0&&M.getCodePoint(0)!==32){let G=T.lines.get(g[1]-1);if(G&&M.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){let B=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(B){let Q=this._bufferService.cols-B.start;P-=Q,q+=Q}}}if(E&&P+q===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let G=T.lines.get(g[1]+1);if(G?.isWrapped&&G.getCodePoint(0)!==32){let B=this._getWordAt([0,g[1]+1],!1,!1,!0);B&&(q+=B.length)}}return{start:P,length:q}}}_selectWordAt(g,b){let x=this._getWordAt(g,b);if(x){for(;x.start<0;)x.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[x.start,g[1]],this._model.selectionStartLength=x.length}}_selectToWordAt(g){let b=this._getWordAt(g,!0);if(b){let x=g[1];for(;b.start<0;)b.start+=this._bufferService.cols,x--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,x++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,x]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){let b=this._bufferService.buffer.getWrappedRangeForLine(g),x={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,m.getRangeLength)(x,this._bufferService.cols)}};a.SelectionService=D=l([u(3,y.IBufferService),u(4,y.ICoreService),u(5,h.IMouseService),u(6,y.IOptionsService),u(7,h.IRenderService),u(8,h.ICoreBrowserService)],D)},4725:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;let l=o(8343);a.ICharSizeService=(0,l.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),a.IMouseService=(0,l.createDecorator)("MouseService"),a.IRenderService=(0,l.createDecorator)("RenderService"),a.ISelectionService=(0,l.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,l.createDecorator)("ThemeService")},6731:function(p,a,o){var l=this&&this.__decorate||function(D,g,b,x){var E,T=arguments.length,M=T<3?g:x===null?x=Object.getOwnPropertyDescriptor(g,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,x);else for(var w=D.length-1;w>=0;w--)(E=D[w])&&(M=(T<3?E(M):T>3?E(g,b,M):E(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M},u=this&&this.__param||function(D,g){return function(b,x){g(b,x,D)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;let i=o(7239),s=o(8055),f=o(8460),h=o(844),d=o(2585),c=s.css.toColor("#ffffff"),_=s.css.toColor("#000000"),m=s.css.toColor("#ffffff"),v=s.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[s.css.toColor("#2e3436"),s.css.toColor("#cc0000"),s.css.toColor("#4e9a06"),s.css.toColor("#c4a000"),s.css.toColor("#3465a4"),s.css.toColor("#75507b"),s.css.toColor("#06989a"),s.css.toColor("#d3d7cf"),s.css.toColor("#555753"),s.css.toColor("#ef2929"),s.css.toColor("#8ae234"),s.css.toColor("#fce94f"),s.css.toColor("#729fcf"),s.css.toColor("#ad7fa8"),s.css.toColor("#34e2e2"),s.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let b=0;b<216;b++){let x=g[b/36%6|0],E=g[b/6%6|0],T=g[b%6];D.push({css:s.channels.toCss(x,E,T),rgba:s.channels.toRgba(x,E,T)})}for(let b=0;b<24;b++){let x=8+10*b;D.push({css:s.channels.toCss(x,x,x),rgba:s.channels.toRgba(x,x,x)})}return D})());let C=a.ThemeService=class extends h.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new i.ColorContrastCache,this._halfContrastCache=new i.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:_,cursor:m,cursorAccent:v,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:s.color.blend(_,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:s.color.blend(_,y),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let g=this._colors;if(g.foreground=S(D.foreground,c),g.background=S(D.background,_),g.cursor=S(D.cursor,m),g.cursorAccent=S(D.cursorAccent,v),g.selectionBackgroundTransparent=S(D.selectionBackground,y),g.selectionBackgroundOpaque=s.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=S(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=s.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?S(D.selectionForeground,s.NULL_COLOR):void 0,g.selectionForeground===s.NULL_COLOR&&(g.selectionForeground=void 0),s.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=s.color.opacity(g.selectionBackgroundTransparent,.3)),s.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=s.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=a.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=S(D.black,a.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=S(D.red,a.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=S(D.green,a.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=S(D.yellow,a.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=S(D.blue,a.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=S(D.magenta,a.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=S(D.cyan,a.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=S(D.white,a.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=S(D.brightBlack,a.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=S(D.brightRed,a.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=S(D.brightGreen,a.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=S(D.brightYellow,a.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=S(D.brightBlue,a.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=S(D.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=S(D.brightCyan,a.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=S(D.brightWhite,a.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let b=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let x=0;x<b;x++)g.ansi[x+16]=S(D.extendedAnsi[x],a.DEFAULT_ANSI_COLORS[x+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(D,g){if(D!==void 0)try{return s.css.toColor(D)}catch{}return g}a.ThemeService=C=l([u(0,d.IOptionsService)],C)},6349:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;let l=o(8460),u=o(844);class i extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new l.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new l.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new l.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;let h=new Array(f);for(let d=0;d<Math.min(f,this.length);d++)h[d]=this._array[this._getCyclicIndex(d)];this._array=h,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let h=this._length;h<f;h++)this._array[h]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,h){this._array[this._getCyclicIndex(f)]=h}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,h,...d){if(h){for(let c=f;c<this._length-h;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+h)];this._length-=h,this.onDeleteEmitter.fire({index:f,amount:h})}for(let c=this._length-1;c>=f;c--)this._array[this._getCyclicIndex(c+d.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<d.length;c++)this._array[this._getCyclicIndex(f+c)]=d[c];if(d.length&&this.onInsertEmitter.fire({index:f,amount:d.length}),this._length+d.length>this._maxLength){let c=this._length+d.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=d.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,h,d){if(!(h<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let _=h-1;_>=0;_--)this.set(f+_+d,this.get(f+_));let c=f+h+d-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<h;c++)this.set(f+c+d,this.get(f+c))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}a.CircularList=i},1439:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function o(l,u=5){if(typeof l!="object")return l;let i=Array.isArray(l)?[]:{};for(let s in l)i[s]=u<=1?l[s]:l[s]&&o(l[s],u-1);return i}},8055:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=o(6114),u=0,i=0,s=0,f=0;var h,d,c,_,m;function v(C){let S=C.toString(16);return S.length<2?"0"+S:S}function y(C,S){return C<S?(S+.05)/(C+.05):(C+.05)/(S+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(S,D,g,b){return b!==void 0?`#${v(S)}${v(D)}${v(g)}${v(b)}`:`#${v(S)}${v(D)}${v(g)}`},C.toRgba=function(S,D,g,b=255){return(S<<24|D<<16|g<<8|b)>>>0}}(h||(a.channels=h={})),function(C){function S(D,g){return f=Math.round(255*g),[u,i,s]=m.toChannels(D.rgba),{css:h.toCss(u,i,s,f),rgba:h.toRgba(u,i,s,f)}}C.blend=function(D,g){if(f=(255&g.rgba)/255,f===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,x=g.rgba>>16&255,E=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return u=T+Math.round((b-T)*f),i=M+Math.round((x-M)*f),s=w+Math.round((E-w)*f),{css:h.toCss(u,i,s),rgba:h.toRgba(u,i,s)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let x=m.ensureContrastRatio(D.rgba,g.rgba,b);if(x)return m.toColor(x>>24&255,x>>16&255,x>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,i,s]=m.toChannels(g),{css:h.toCss(u,i,s),rgba:g}},C.opacity=S,C.multiplyOpacity=function(D,g){return f=255&D.rgba,S(D,f*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(d||(a.color=d={})),function(C){let S,D;if(!l.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(S=b,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),m.toColor(u,i,s);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),f=parseInt(g.slice(4,5).repeat(2),16),m.toColor(u,i,s,f);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return u=parseInt(b[1]),i=parseInt(b[2]),s=parseInt(b[3]),f=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),m.toColor(u,i,s,f);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=g,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[u,i,s,f]=S.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:h.toRgba(u,i,s,f),css:g}}}(c||(a.css=c={})),function(C){function S(D,g,b){let x=D/255,E=g/255,T=b/255;return .2126*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=S}(_||(a.rgb=_={})),function(C){function S(g,b,x){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));for(;R<x&&(w>0||F>0||L>0);)w-=Math.max(0,Math.ceil(.1*w)),F-=Math.max(0,Math.ceil(.1*F)),L-=Math.max(0,Math.ceil(.1*L)),R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));return(w<<24|F<<16|L<<8|255)>>>0}function D(g,b,x){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));for(;R<x&&(w<255||F<255||L<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),F=Math.min(255,F+Math.ceil(.1*(255-F))),L=Math.min(255,L+Math.ceil(.1*(255-L))),R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));return(w<<24|F<<16|L<<8|255)>>>0}C.ensureContrastRatio=function(g,b,x){let E=_.relativeLuminance(g>>8),T=_.relativeLuminance(b>>8);if(y(E,T)<x){if(T<E){let F=S(g,b,x),L=y(E,_.relativeLuminance(F>>8));if(L<x){let R=D(g,b,x);return L>y(E,_.relativeLuminance(R>>8))?F:R}return F}let M=D(g,b,x),w=y(E,_.relativeLuminance(M>>8));if(w<x){let F=S(g,b,x);return w>y(E,_.relativeLuminance(F>>8))?M:F}return M}},C.reduceLuminance=S,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,x,E){return{css:h.toCss(g,b,x,E),rgba:h.toRgba(g,b,x,E)}}}(m||(a.rgba=m={})),a.toPaddedHex=v,a.contrastRatio=y},8969:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;let l=o(844),u=o(2585),i=o(4348),s=o(7866),f=o(744),h=o(7302),d=o(6975),c=o(8460),_=o(1753),m=o(1480),v=o(7994),y=o(9282),C=o(5435),S=o(5981),D=o(2660),g=!1;class b extends l.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(E=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(E.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(E){for(let T in E)this.optionsService.options[T]=E[T]}constructor(E){super(),this._windowsWrappingHeuristics=this.register(new l.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new i.InstantiationService,this.optionsService=this.register(new h.OptionsService(E)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(s.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(_.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(m.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(v.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((T,M)=>this._inputHandler.parse(T,M))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(E,T){this._writeBuffer.write(E,T)}writeSync(E,T){this._logService.logLevel<=u.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(E,T)}resize(E,T){isNaN(E)||isNaN(T)||(E=Math.max(E,f.MINIMUM_COLS),T=Math.max(T,f.MINIMUM_ROWS),this._bufferService.resize(E,T))}scroll(E,T=!1){this._bufferService.scroll(E,T)}scrollLines(E,T,M){this._bufferService.scrollLines(E,T,M)}scrollPages(E){this.scrollLines(E*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(E){let T=E-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(E,T){return this._inputHandler.registerEscHandler(E,T)}registerDcsHandler(E,T){return this._inputHandler.registerDcsHandler(E,T)}registerCsiHandler(E,T){return this._inputHandler.registerCsiHandler(E,T)}registerOscHandler(E,T){return this._inputHandler.registerOscHandler(E,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let E=!1,T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?E=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(E=!0),E?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let E=[];E.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),E.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,l.toDisposable)(()=>{for(let T of E)T.dispose()})}}}a.CoreTerminal=b},8460:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===o)return void this._listeners.splice(l,1)}}})),this._event}fire(o,l){let u=[];for(let i=0;i<this._listeners.length;i++)u.push(this._listeners[i]);for(let i=0;i<u.length;i++)u[i].call(void 0,o,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(o,l){return o(u=>l.fire(u))}},5435:function(p,a,o){var l=this&&this.__decorate||function(R,A,I,$){var H,P=arguments.length,q=P<3?A:$===null?$=Object.getOwnPropertyDescriptor(A,I):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(R,A,I,$);else for(var G=R.length-1;G>=0;G--)(H=R[G])&&(q=(P<3?H(q):P>3?H(A,I,q):H(A,I))||q);return P>3&&q&&Object.defineProperty(A,I,q),q},u=this&&this.__param||function(R,A){return function(I,$){A(I,$,R)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;let i=o(2584),s=o(7116),f=o(2015),h=o(844),d=o(482),c=o(8437),_=o(8460),m=o(643),v=o(511),y=o(3734),C=o(2585),S=o(6242),D=o(6351),g=o(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},x=131072;function E(R,A){if(R>24)return A.setWinLines||!1;switch(R){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var T;(function(R){R[R.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",R[R.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(a.WindowsOptionsReportType=T={}));let M=0;class w extends h.Disposable{getAttrData(){return this._curAttrData}constructor(A,I,$,H,P,q,G,B,Q=new f.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=I,this._coreService=$,this._logService=H,this._optionsService=P,this._oscLinkService=q,this._coreMouseService=G,this._unicodeService=B,this._parser=Q,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new v.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new _.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new _.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new _.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new _.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new _.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new _.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new _.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new _.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new _.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new _.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new _.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new _.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new _.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,W)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:W.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,W,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:W,data:U})}),this._parser.setDcsHandlerFallback((O,W,U)=>{W==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:W,payload:U})}),this._parser.setPrintHandler((O,W,U)=>this.print(O,W,U)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(i.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(i.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(i.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(i.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(i.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(i.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(i.C1.IND,()=>this.index()),this._parser.setExecuteHandler(i.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(i.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new S.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new S.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new S.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new S.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new S.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new S.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new S.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new S.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new S.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new S.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new S.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let O in s.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((O,W)=>this.requestStatusString(O,W)))}_preserveStack(A,I,$,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=$,this._parseStack.position=H}_logSlowResolvingAsync(A){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([A,new Promise((I,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,I){let $,H=this._activeBuffer.x,P=this._activeBuffer.y,q=0,G=this._parseStack.paused;if(G){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync($),$;H=this._parseStack.cursorStartX,P=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>x&&(q=this._parseStack.position+x)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,B=>String.fromCharCode(B)).join("")}"`),typeof A=="string"?A.split("").map(B=>B.charCodeAt(0)):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<x&&(this._parseBuffer=new Uint32Array(Math.min(A.length,x))),G||this._dirtyRowTracker.clearRange(),A.length>x)for(let B=q;B<A.length;B+=x){let Q=B+x<A.length?B+x:A.length,O=typeof A=="string"?this._stringDecoder.decode(A.substring(B,Q),this._parseBuffer):this._utf8Decoder.decode(A.subarray(B,Q),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,O))return this._preserveStack(H,P,O,B),this._logSlowResolvingAsync($),$}else if(!G){let B=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,B))return this._preserveStack(H,P,B,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===H&&this._activeBuffer.y===P||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,I,$){let H,P,q=this._charsetService.charset,G=this._optionsService.rawOptions.screenReaderMode,B=this._bufferService.cols,Q=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,W=this._curAttrData,U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-I>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodePoint(this._activeBuffer.x-1,0,1,W.fg,W.bg,W.extended);for(let k=I;k<$;++k){if(H=A[k],P=this._unicodeService.wcwidth(H),H<127&&q){let te=q[String.fromCharCode(H)];te&&(H=te.charCodeAt(0))}if(G&&this._onA11yChar.fire((0,d.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),P||!this._activeBuffer.x){if(this._activeBuffer.x+P-1>=B){if(Q){for(;this._activeBuffer.x<B;)U.setCellFromCodePoint(this._activeBuffer.x++,0,1,W.fg,W.bg,W.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=B-1,P===2)continue}if(O&&(U.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(W),W),U.getWidth(B-1)===2&&U.setCellFromCodePoint(B-1,m.NULL_CELL_CODE,m.NULL_CELL_WIDTH,W.fg,W.bg,W.extended)),U.setCellFromCodePoint(this._activeBuffer.x++,H,P,W.fg,W.bg,W.extended),P>0)for(;--P;)U.setCellFromCodePoint(this._activeBuffer.x++,0,0,W.fg,W.bg,W.extended)}else U.getWidth(this._activeBuffer.x-1)?U.addCodepointToCell(this._activeBuffer.x-1,H):U.addCodepointToCell(this._activeBuffer.x-2,H)}$-I>0&&(U.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<B&&$-I>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodePoint(this._activeBuffer.x,0,1,W.fg,W.bg,W.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,I){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,I):this._parser.registerCsiHandler(A,$=>!E($.params[0],this._optionsService.rawOptions.windowOptions)||I($))}registerDcsHandler(A,I){return this._parser.registerDcsHandler(A,new D.DcsHandler(I))}registerEscHandler(A,I){return this._parser.registerEscHandler(A,I)}registerOscHandler(A,I){return this._parser.registerOscHandler(A,new S.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=A,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+I)}cursorUp(A){let I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){let I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){let I=A.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){let I=A.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,I,$,H=!1,P=!1){let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);q.replaceCells(I,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),P),H&&(q.isWrapped=!1)}_resetBufferLine(A,I=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),$.isWrapped=!1)}eraseInDisplay(A,I=!1){let $;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);$<this._bufferService.rows;$++)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 3:let H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(A,I=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;I--;)this._activeBuffer.lines.splice(P-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;I--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;let I=A.params[0]||1,$=new Uint32Array(I);for(let H=0;H<I;++H)$[H]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(i.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(i.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(i.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(i.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(i.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,s.DEFAULT_CHARSET),this._charsetService.setgCharset(1,s.DEFAULT_CHARSET),this._charsetService.setgCharset(2,s.DEFAULT_CHARSET),this._charsetService.setgCharset(3,s.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,I){let $=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:P}=this._coreMouseService,q=this._coreService,{buffers:G,cols:B}=this._bufferService,{active:Q,alt:O}=G,W=this._optionsService.rawOptions,U=ye=>ye?1:2,k=A.params[0];return te=k,J=I?k===2?4:k===4?U(q.modes.insertMode):k===12?3:k===20?U(W.convertEol):0:k===1?U($.applicationCursorKeys):k===3?W.windowOptions.setWinLines?B===80?2:B===132?1:0:0:k===6?U($.origin):k===7?U($.wraparound):k===8?3:k===9?U(H==="X10"):k===12?U(W.cursorBlink):k===25?U(!q.isCursorHidden):k===45?U($.reverseWraparound):k===66?U($.applicationKeypad):k===67?4:k===1e3?U(H==="VT200"):k===1002?U(H==="DRAG"):k===1003?U(H==="ANY"):k===1004?U($.sendFocus):k===1005?4:k===1006?U(P==="SGR"):k===1015?4:k===1016?U(P==="SGR_PIXELS"):k===1048?1:k===47||k===1047||k===1049?U(Q===O):k===2004?U($.bracketedPasteMode):0,q.triggerDataEvent(`${i.C0.ESC}[${I?"":"?"}${te};${J}$y`),!0;var te,J}_updateAttrColor(A,I,$,H,P){return I===2?(A|=50331648,A&=-16777216,A|=y.AttributeData.fromColorRGB([$,H,P])):I===5&&(A&=-50331904,A|=33554432|255&$),A}_extractColor(A,I,$){let H=[0,0,-1,0,0,0],P=0,q=0;do{if(H[q+P]=A.params[I+q],A.hasSubParams(I+q)){let G=A.getSubParams(I+q),B=0;do H[1]===5&&(P=1),H[q+B+1+P]=G[B];while(++B<G.length&&B+q+1+P<H.length);break}if(H[1]===5&&q+P>=2||H[1]===2&&q+P>=5)break;H[1]&&(P=1)}while(++q+I<A.length&&q+P<H.length);for(let G=2;G<H.length;++G)H[G]===-1&&(H[G]=0);switch(H[0]){case 38:$.fg=this._updateAttrColor($.fg,H[1],H[3],H[4],H[5]);break;case 48:$.bg=this._updateAttrColor($.bg,H[1],H[3],H[4],H[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,H[1],H[3],H[4],H[5])}return q}_processUnderline(A,I){I.extended=I.extended.clone(),(!~A||A>5)&&(A=1),I.extended.underlineStyle=A,I.fg|=268435456,A===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(A){A.fg=c.DEFAULT_ATTR_DATA.fg,A.bg=c.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;let I=A.length,$,H=this._curAttrData;for(let P=0;P<I;P++)$=A.params[P],$>=30&&$<=37?(H.fg&=-50331904,H.fg|=16777216|$-30):$>=40&&$<=47?(H.bg&=-50331904,H.bg|=16777216|$-40):$>=90&&$<=97?(H.fg&=-50331904,H.fg|=16777224|$-90):$>=100&&$<=107?(H.bg&=-50331904,H.bg|=16777224|$-100):$===0?this._processSGR0(H):$===1?H.fg|=134217728:$===3?H.bg|=67108864:$===4?(H.fg|=268435456,this._processUnderline(A.hasSubParams(P)?A.getSubParams(P)[0]:1,H)):$===5?H.fg|=536870912:$===7?H.fg|=67108864:$===8?H.fg|=1073741824:$===9?H.fg|=2147483648:$===2?H.bg|=134217728:$===21?this._processUnderline(2,H):$===22?(H.fg&=-134217729,H.bg&=-134217729):$===23?H.bg&=-67108865:$===24?(H.fg&=-268435457,this._processUnderline(0,H)):$===25?H.fg&=-536870913:$===27?H.fg&=-67108865:$===28?H.fg&=-1073741825:$===29?H.fg&=2147483647:$===39?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):$===49?(H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?P+=this._extractColor(A,P,H):$===53?H.bg|=1073741824:$===55?H.bg&=-1073741825:$===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):$===100?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${i.C0.ESC}[0n`);break;case 6:let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${i.C0.ESC}[${I};${$}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${i.C0.ESC}[?${I};${$}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){let I=A.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let $=I%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(A){let I=A.params[0]||1,$;return(A.length<2||($=A.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(A){if(!E(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;let I=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${i.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){let I=[],$=A.split(";");for(;$.length>1;){let H=$.shift(),P=$.shift();if(/^\d+$/.exec(H)){let q=parseInt(H);if(L(q))if(P==="?")I.push({type:0,index:q});else{let G=(0,g.parseColor)(P);G&&I.push({type:1,index:q,color:G})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(A){let I=A.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(A,I){this._getCurrentLinkId()&&this._finishHyperlink();let $=A.split(":"),H,P=$.findIndex(q=>q.startsWith("id="));return P!==-1&&(H=$[P].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,I){let $=A.split(";");for(let H=0;H<$.length&&!(I>=this._specialColors.length);++H,++I)if($[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{let P=(0,g.parseColor)($[H]);P&&this._onColor.fire([{type:1,index:this._specialColors[I],color:P}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;let I=[],$=A.split(";");for(let H=0;H<$.length;++H)if(/^\d+$/.exec($[H])){let P=parseInt($[H]);L(P)&&I.push({type:2,index:P})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,s.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(b[A[0]],s.CHARSETS[A[1]]||s.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){let A=new v.CellData;A.content=4194373,A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){let $=this._activeBuffer.ybase+this._activeBuffer.y+I,H=this._activeBuffer.lines.get($);H&&(H.fill(A),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,I){let $=this._bufferService.buffer,H=this._optionsService.rawOptions;return(P=>(this._coreService.triggerDataEvent(`${i.C0.ESC}${P}${i.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,I){this._dirtyRowTracker.markRangeDirty(A,I)}}a.InputHandler=w;let F=class{constructor(R){this._bufferService=R,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(R){R<this.start?this.start=R:R>this.end&&(this.end=R)}markRangeDirty(R,A){R>A&&(M=R,R=A,A=M),R<this.start&&(this.start=R),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function L(R){return 0<=R&&R<256}F=l([u(0,C.IBufferService)],F)},844:(p,a)=>{function o(l){for(let u of l)u.dispose();l.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){let u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var u;this._isDisposed||l===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},a.toDisposable=function(l){return{dispose:l}},a.disposeArray=o,a.getDisposeArrayDisposable=function(l){return{dispose:()=>o(l)}}},1505:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(u,i,s){this._data[u]||(this._data[u]={}),this._data[u][i]=s}get(u,i){return this._data[u]?this._data[u][i]:void 0}clear(){this._data={}}}a.TwoKeyMap=o,a.FourKeyMap=class{constructor(){this._data=new o}set(l,u,i,s,f){this._data.get(l,u)||this._data.set(l,u,new o),this._data.get(l,u).set(i,s,f)}get(l,u,i,s){var f;return(f=this._data.get(l,u))===null||f===void 0?void 0:f.get(i,s)}clear(){this._data.clear()}}},6114:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof navigator>"u";let o=a.isNode?"node":navigator.userAgent,l=a.isNode?"node":navigator.platform;a.isFirefox=o.includes("Firefox"),a.isLegacyEdge=o.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(o),a.getSafariVersion=function(){if(!a.isSafari)return 0;let u=o.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),a.isIpad=l==="iPad",a.isIphone=l==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),a.isLinux=l.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(o)},6106:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let o=0;a.SortedList=class{constructor(l){this._getKey=l,this._array=[]}clear(){this._array.length=0}insert(l){this._array.length!==0?(o=this._search(this._getKey(l)),this._array.splice(o,0,l)):this._array.push(l)}delete(l){if(this._array.length===0)return!1;let u=this._getKey(l);if(u===void 0||(o=this._search(u),o===-1)||this._getKey(this._array[o])!==u)return!1;do if(this._array[o]===l)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===u);return!1}*getKeyIterator(l){if(this._array.length!==0&&(o=this._search(l),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===l))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===l)}forEachByKey(l,u){if(this._array.length!==0&&(o=this._search(l),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===l))do u(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===l)}values(){return[...this._array].values()}_search(l){let u=0,i=this._array.length-1;for(;i>=u;){let s=u+i>>1,f=this._getKey(this._array[s]);if(f>l)i=s-1;else{if(!(f<l)){for(;s>0&&this._getKey(this._array[s-1])===l;)s--;return s}u=s+1}}return u}}},7226:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;let l=o(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let h=0,d=0,c=f.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(h=Date.now(),this._tasks[this._i]()||this._i++,h=Math.max(1,Date.now()-h),d=Math.max(h,d),_=f.timeRemaining(),1.5*d>_)return c-h<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-h))}ms`),void this._start();c=_}this.clear()}}class i extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let h=Date.now()+f;return{timeRemaining:()=>Math.max(0,h-Date.now())}}}a.PriorityTaskQueue=i,a.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(s){return requestIdleCallback(s)}_cancelCallback(s){cancelIdleCallback(s)}}:i,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(s){this._queue.clear(),this._queue.enqueue(s)}flush(){this._queue.flush()}}},9282:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;let l=o(643);a.updateWindowsModeWrappedState=function(u){let i=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),s=i?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&s&&(f.isWrapped=s[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&s[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(i){return[i>>>16&255,i>>>8&255,255&i]}static fromColorRGB(i){return(255&i[0])<<16|(255&i[1])<<8|255&i[2]}clone(){let i=new o;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}a.AttributeData=o;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(i){this._ext&=-67108864,this._ext|=67108863&i}get urlId(){return this._urlId}set urlId(i){this._urlId=i}constructor(i=0,s=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=s}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=l},9092:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;let l=o(6349),u=o(7226),i=o(3734),s=o(8437),f=o(4634),h=o(511),d=o(643),c=o(4863),_=o(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(m,v,y){this._hasScrollback=m,this._optionsService=v,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=s.DEFAULT_ATTR_DATA.clone(),this.savedCharset=_.DEFAULT_CHARSET,this.markers=[],this._nullCell=h.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=h.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(m){return m?(this._nullCell.fg=m.fg,this._nullCell.bg=m.bg,this._nullCell.extended=m.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new i.ExtendedAttrs),this._nullCell}getWhitespaceCell(m){return m?(this._whitespaceCell.fg=m.fg,this._whitespaceCell.bg=m.bg,this._whitespaceCell.extended=m.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new i.ExtendedAttrs),this._whitespaceCell}getBlankLine(m,v){return new s.BufferLine(this._bufferService.cols,this.getNullCell(m),v)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let m=this.ybase+this.y-this.ydisp;return m>=0&&m<this._rows}_getCorrectBufferLength(m){if(!this._hasScrollback)return m;let v=m+this._optionsService.rawOptions.scrollback;return v>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:v}fillViewportRows(m){if(this.lines.length===0){m===void 0&&(m=s.DEFAULT_ATTR_DATA);let v=this._rows;for(;v--;)this.lines.push(this.getBlankLine(m))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(m,v){let y=this.getNullCell(s.DEFAULT_ATTR_DATA),C=0,S=this._getCorrectBufferLength(v);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<m)for(let g=0;g<this.lines.length;g++)C+=+this.lines.get(g).resize(m,y);let D=0;if(this._rows<v)for(let g=this._rows;g<v;g++)this.lines.length<v+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new s.BufferLine(m,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new s.BufferLine(m,y)));else for(let g=this._rows;g>v;g--)this.lines.length>v+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let g=this.lines.length-S;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=S}this.x=Math.min(this.x,m-1),this.y=Math.min(this.y,v-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,m-1),this.scrollTop=0}if(this.scrollBottom=v-1,this._isReflowEnabled&&(this._reflow(m,v),this._cols>m))for(let D=0;D<this.lines.length;D++)C+=+this.lines.get(D).resize(m,y);this._cols=m,this._rows=v,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let m=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,m=!1);let v=0;for(;this._memoryCleanupPosition<this.lines.length;)if(v+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),v>100)return!0;return m}get _isReflowEnabled(){let m=this._optionsService.rawOptions.windowsPty;return m&&m.buildNumber?this._hasScrollback&&m.backend==="conpty"&&m.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(m,v){this._cols!==m&&(m>this._cols?this._reflowLarger(m,v):this._reflowSmaller(m,v))}_reflowLarger(m,v){let y=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,m,this.ybase+this.y,this.getNullCell(s.DEFAULT_ATTR_DATA));if(y.length>0){let C=(0,f.reflowLargerCreateNewLayout)(this.lines,y);(0,f.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(m,v,C.countRemoved)}}_reflowLargerAdjustViewport(m,v,y){let C=this.getNullCell(s.DEFAULT_ATTR_DATA),S=y;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<v&&this.lines.push(new s.BufferLine(m,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(m,v){let y=this.getNullCell(s.DEFAULT_ATTR_DATA),C=[],S=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=m)continue;let b=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),b.unshift(g);let x=this.ybase+this.y;if(x>=D&&x<D+b.length)continue;let E=b[b.length-1].getTrimmedLength(),T=(0,f.reflowSmallerGetNewLineLengths)(b,this._cols,m),M=T.length-b.length,w;w=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let F=[];for(let H=0;H<M;H++){let P=this.getBlankLine(s.DEFAULT_ATTR_DATA,!0);F.push(P)}F.length>0&&(C.push({start:D+b.length+S,newLines:F}),S+=F.length),b.push(...F);let L=T.length-1,R=T[L];R===0&&(L--,R=T[L]);let A=b.length-M-1,I=E;for(;A>=0;){let H=Math.min(I,R);if(b[L]===void 0)break;if(b[L].copyCellsFrom(b[A],I-H,R-H,H,!0),R-=H,R===0&&(L--,R=T[L]),I-=H,I===0){A--;let P=Math.max(A,0);I=(0,f.getWrappedLineTrimmedLength)(b,P,this._cols)}}for(let H=0;H<b.length;H++)T[H]<m&&b[H].setCell(T[H],y);let $=M-w;for(;$-- >0;)this.ybase===0?this.y<v-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-v&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+v-1)}if(C.length>0){let D=[],g=[];for(let L=0;L<this.lines.length;L++)g.push(this.lines.get(L));let b=this.lines.length,x=b-1,E=0,T=C[E];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let M=0;for(let L=Math.min(this.lines.maxLength-1,b+S-1);L>=0;L--)if(T&&T.start>x+M){for(let R=T.newLines.length-1;R>=0;R--)this.lines.set(L--,T.newLines[R]);L++,D.push({index:x+1,amount:T.newLines.length}),M+=T.newLines.length,T=C[++E]}else this.lines.set(L,g[x--]);let w=0;for(let L=D.length-1;L>=0;L--)D[L].index+=w,this.lines.onInsertEmitter.fire(D[L]),w+=D[L].amount;let F=Math.max(0,b+S-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(m,v,y=0,C){let S=this.lines.get(m);return S?S.translateToString(v,y,C):""}getWrappedRangeForLine(m){let v=m,y=m;for(;v>0&&this.lines.get(v).isWrapped;)v--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:v,last:y}}setupTabStops(m){for(m!=null?this.tabs[m]||(m=this.prevStop(m)):(this.tabs={},m=0);m<this._cols;m+=this._optionsService.rawOptions.tabStopWidth)this.tabs[m]=!0}prevStop(m){for(m==null&&(m=this.x);!this.tabs[--m]&&m>0;);return m>=this._cols?this._cols-1:m<0?0:m}nextStop(m){for(m==null&&(m=this.x);!this.tabs[++m]&&m<this._cols;);return m>=this._cols?this._cols-1:m<0?0:m}clearMarkers(m){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].line===m&&(this.markers[v].dispose(),this.markers.splice(v--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].dispose(),this.markers.splice(m--,1);this._isClearing=!1}addMarker(m){let v=new c.Marker(m);return this.markers.push(v),v.register(this.lines.onTrim(y=>{v.line-=y,v.line<0&&v.dispose()})),v.register(this.lines.onInsert(y=>{v.line>=y.index&&(v.line+=y.amount)})),v.register(this.lines.onDelete(y=>{v.line>=y.index&&v.line<y.index+y.amount&&v.dispose(),v.line>y.index&&(v.line-=y.amount)})),v.register(v.onDispose(()=>this._removeMarker(v))),v}_removeMarker(m){this._isClearing||this.markers.splice(this.markers.indexOf(m),1)}}},8437:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;let l=o(3734),u=o(511),i=o(643),s=o(482);a.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let f=0;class h{constructor(c,_,m=!1){this.isWrapped=m,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);let v=_||u.CellData.fromCharData([0,i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE]);for(let y=0;y<c;++y)this.setCell(y,v);this.length=c}get(c){let _=this._data[3*c+0],m=2097151&_;return[this._data[3*c+1],2097152&_?this._combined[c]:m?(0,s.stringFromCodePoint)(m):"",_>>22,2097152&_?this._combined[c].charCodeAt(this._combined[c].length-1):m]}set(c,_){this._data[3*c+1]=_[i.CHAR_DATA_ATTR_INDEX],_[i.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=_[1],this._data[3*c+0]=2097152|c|_[i.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=_[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[i.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){let _=this._data[3*c+0];return 2097152&_?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&_}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){let _=this._data[3*c+0];return 2097152&_?this._combined[c]:2097151&_?(0,s.stringFromCodePoint)(2097151&_):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,_){return f=3*c,_.content=this._data[f+0],_.fg=this._data[f+1],_.bg=this._data[f+2],2097152&_.content&&(_.combinedData=this._combined[c]),268435456&_.bg&&(_.extended=this._extendedAttrs[c]),_}setCell(c,_){2097152&_.content&&(this._combined[c]=_.combinedData),268435456&_.bg&&(this._extendedAttrs[c]=_.extended),this._data[3*c+0]=_.content,this._data[3*c+1]=_.fg,this._data[3*c+2]=_.bg}setCellFromCodePoint(c,_,m,v,y,C){268435456&y&&(this._extendedAttrs[c]=C),this._data[3*c+0]=_|m<<22,this._data[3*c+1]=v,this._data[3*c+2]=y}addCodepointToCell(c,_){let m=this._data[3*c+0];2097152&m?this._combined[c]+=(0,s.stringFromCodePoint)(_):(2097151&m?(this._combined[c]=(0,s.stringFromCodePoint)(2097151&m)+(0,s.stringFromCodePoint)(_),m&=-2097152,m|=2097152):m=_|4194304,this._data[3*c+0]=m)}insertCells(c,_,m,v){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),_<this.length-c){let y=new u.CellData;for(let C=this.length-c-_-1;C>=0;--C)this.setCell(c+_+C,this.loadCell(c+C,y));for(let C=0;C<_;++C)this.setCell(c+C,m)}else for(let y=c;y<this.length;++y)this.setCell(y,m);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs)}deleteCells(c,_,m,v){if(c%=this.length,_<this.length-c){let y=new u.CellData;for(let C=0;C<this.length-c-_;++C)this.setCell(c+C,this.loadCell(c+_+C,y));for(let C=this.length-_;C<this.length;++C)this.setCell(C,m)}else for(let y=c;y<this.length;++y)this.setCell(y,m);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs)}replaceCells(c,_,m,v,y=!1){if(y)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&!this.isProtected(_)&&this.setCellFromCodePoint(_,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs);c<_&&c<this.length;)this.isProtected(c)||this.setCell(c,m),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&this.setCellFromCodePoint(_,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs);c<_&&c<this.length;)this.setCell(c++,m)}resize(c,_){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let m=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*m)this._data=new Uint32Array(this._data.buffer,0,m);else{let v=new Uint32Array(m);v.set(this._data),this._data=v}for(let v=this.length;v<c;++v)this.setCell(v,_)}else{this._data=this._data.subarray(0,m);let v=Object.keys(this._combined);for(let C=0;C<v.length;C++){let S=parseInt(v[C],10);S>=c&&delete this._combined[S]}let y=Object.keys(this._extendedAttrs);for(let C=0;C<y.length;C++){let S=parseInt(y[C],10);S>=c&&delete this._extendedAttrs[S]}}return this.length=c,4*m*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,_=!1){if(_)for(let m=0;m<this.length;++m)this.isProtected(m)||this.setCell(m,c);else{this._combined={},this._extendedAttrs={};for(let m=0;m<this.length;++m)this.setCell(m,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(let _ in c._combined)this._combined[_]=c._combined[_];this._extendedAttrs={};for(let _ in c._extendedAttrs)this._extendedAttrs[_]=c._extendedAttrs[_];this.isWrapped=c.isWrapped}clone(){let c=new h(0);c._data=new Uint32Array(this._data),c.length=this.length;for(let _ in this._combined)c._combined[_]=this._combined[_];for(let _ in this._extendedAttrs)c._extendedAttrs[_]=this._extendedAttrs[_];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,_,m,v,y){let C=c._data;if(y)for(let D=v-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(m+D)+g]=C[3*(_+D)+g];268435456&C[3*(_+D)+2]&&(this._extendedAttrs[m+D]=c._extendedAttrs[_+D])}else for(let D=0;D<v;D++){for(let g=0;g<3;g++)this._data[3*(m+D)+g]=C[3*(_+D)+g];268435456&C[3*(_+D)+2]&&(this._extendedAttrs[m+D]=c._extendedAttrs[_+D])}let S=Object.keys(c._combined);for(let D=0;D<S.length;D++){let g=parseInt(S[D],10);g>=_&&(this._combined[g-_+m]=c._combined[g])}}translateToString(c=!1,_=0,m=this.length){c&&(m=Math.min(m,this.getTrimmedLength()));let v="";for(;_<m;){let y=this._data[3*_+0],C=2097151&y;v+=2097152&y?this._combined[_]:C?(0,s.stringFromCodePoint)(C):i.WHITESPACE_CELL_CHAR,_+=y>>22||1}return v}}a.BufferLine=h},4841:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(o,l){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return l*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(p,a)=>{function o(l,u,i){if(u===l.length-1)return l[u].getTrimmedLength();let s=!l[u].hasContent(i-1)&&l[u].getWidth(i-1)===1,f=l[u+1].getWidth(0)===2;return s&&f?i-1:i}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(l,u,i,s,f){let h=[];for(let d=0;d<l.length-1;d++){let c=d,_=l.get(++c);if(!_.isWrapped)continue;let m=[l.get(d)];for(;c<l.length&&_.isWrapped;)m.push(_),_=l.get(++c);if(s>=d&&s<c){d+=m.length-1;continue}let v=0,y=o(m,v,u),C=1,S=0;for(;C<m.length;){let g=o(m,C,u),b=g-S,x=i-y,E=Math.min(b,x);m[v].copyCellsFrom(m[C],S,y,E,!1),y+=E,y===i&&(v++,y=0),S+=E,S===g&&(C++,S=0),y===0&&v!==0&&m[v-1].getWidth(i-1)===2&&(m[v].copyCellsFrom(m[v-1],i-1,y++,1,!1),m[v-1].setCell(i-1,f))}m[v].replaceCells(y,i,f);let D=0;for(let g=m.length-1;g>0&&(g>v||m[g].getTrimmedLength()===0);g--)D++;D>0&&(h.push(d+m.length-D),h.push(D)),d+=m.length-1}return h},a.reflowLargerCreateNewLayout=function(l,u){let i=[],s=0,f=u[s],h=0;for(let d=0;d<l.length;d++)if(f===d){let c=u[++s];l.onDeleteEmitter.fire({index:d-h,amount:c}),d+=c-1,h+=c,f=u[++s]}else i.push(d);return{layout:i,countRemoved:h}},a.reflowLargerApplyNewLayout=function(l,u){let i=[];for(let s=0;s<u.length;s++)i.push(l.get(u[s]));for(let s=0;s<i.length;s++)l.set(s,i[s]);l.length=u.length},a.reflowSmallerGetNewLineLengths=function(l,u,i){let s=[],f=l.map((_,m)=>o(l,m,u)).reduce((_,m)=>_+m),h=0,d=0,c=0;for(;c<f;){if(f-c<i){s.push(f-c);break}h+=i;let _=o(l,d,u);h>_&&(h-=_,d++);let m=l[d].getWidth(h-1)===2;m&&h--;let v=m?i-1:i;s.push(v),c+=v}return s},a.getWrappedLineTrimmedLength=o},5295:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;let l=o(8460),u=o(844),i=o(9092);class s extends u.Disposable{constructor(h,d){super(),this._optionsService=h,this._bufferService=d,this._onBufferActivate=this.register(new l.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new i.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new i.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(h){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(h),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(h,d){this._normal.resize(h,d),this._alt.resize(h,d),this.setupTabStops(h)}setupTabStops(h){this._normal.setupTabStops(h),this._alt.setupTabStops(h)}}a.BufferSet=s},511:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;let l=o(482),u=o(643),i=o(3734);class s extends i.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new i.ExtendedAttrs,this.combinedData=""}static fromCharData(h){let d=new s;return d.setFromCharData(h),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(h){this.fg=h[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(h[u.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(h[u.CHAR_DATA_CHAR_INDEX].length===2){let c=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let _=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(c-55296)+_-56320+65536|h[u.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[u.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=h[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|h[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=s},643:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;let l=o(8460),u=o(844);class i{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=i._nextId++,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}a.Marker=i,i._nextId=1},7116:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},a.CHARSETS.A={"#":"\xA3"},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},a.CHARSETS.C=a.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},a.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},a.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},a.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},a.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},a.CHARSETS.E=a.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},a.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},a.CHARSETS.H=a.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},a.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(p,a)=>{var o,l,u;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(i){i.NUL="\0",i.SOH="",i.STX="",i.ETX="",i.EOT="",i.ENQ="",i.ACK="",i.BEL="\x07",i.BS="\b",i.HT="	",i.LF=`
`,i.VT="\v",i.FF="\f",i.CR="\r",i.SO="",i.SI="",i.DLE="",i.DC1="",i.DC2="",i.DC3="",i.DC4="",i.NAK="",i.SYN="",i.ETB="",i.CAN="",i.EM="",i.SUB="",i.ESC="\x1B",i.FS="",i.GS="",i.RS="",i.US="",i.SP=" ",i.DEL="\x7F"}(o||(a.C0=o={})),function(i){i.PAD="\x80",i.HOP="\x81",i.BPH="\x82",i.NBH="\x83",i.IND="\x84",i.NEL="\x85",i.SSA="\x86",i.ESA="\x87",i.HTS="\x88",i.HTJ="\x89",i.VTS="\x8A",i.PLD="\x8B",i.PLU="\x8C",i.RI="\x8D",i.SS2="\x8E",i.SS3="\x8F",i.DCS="\x90",i.PU1="\x91",i.PU2="\x92",i.STS="\x93",i.CCH="\x94",i.MW="\x95",i.SPA="\x96",i.EPA="\x97",i.SOS="\x98",i.SGCI="\x99",i.SCI="\x9A",i.CSI="\x9B",i.ST="\x9C",i.OSC="\x9D",i.PM="\x9E",i.APC="\x9F"}(l||(a.C1=l={})),function(i){i.ST=`${o.ESC}\\`}(u||(a.C1_ESCAPED=u={}))},7399:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;let l=o(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(i,s,f,h){let d={type:0,cancel:!1,key:void 0},c=(i.shiftKey?1:0)|(i.altKey?2:0)|(i.ctrlKey?4:0)|(i.metaKey?8:0);switch(i.keyCode){case 0:i.key==="UIKeyInputUpArrow"?d.key=s?l.C0.ESC+"OA":l.C0.ESC+"[A":i.key==="UIKeyInputLeftArrow"?d.key=s?l.C0.ESC+"OD":l.C0.ESC+"[D":i.key==="UIKeyInputRightArrow"?d.key=s?l.C0.ESC+"OC":l.C0.ESC+"[C":i.key==="UIKeyInputDownArrow"&&(d.key=s?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(i.altKey){d.key=l.C0.ESC+l.C0.DEL;break}d.key=l.C0.DEL;break;case 9:if(i.shiftKey){d.key=l.C0.ESC+"[Z";break}d.key=l.C0.HT,d.cancel=!0;break;case 13:d.key=i.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,d.cancel=!0;break;case 27:d.key=l.C0.ESC,i.altKey&&(d.key=l.C0.ESC+l.C0.ESC),d.cancel=!0;break;case 37:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"D",d.key===l.C0.ESC+"[1;3D"&&(d.key=l.C0.ESC+(f?"b":"[1;5D"))):d.key=s?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"C",d.key===l.C0.ESC+"[1;3C"&&(d.key=l.C0.ESC+(f?"f":"[1;5C"))):d.key=s?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"A",f||d.key!==l.C0.ESC+"[1;3A"||(d.key=l.C0.ESC+"[1;5A")):d.key=s?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"B",f||d.key!==l.C0.ESC+"[1;3B"||(d.key=l.C0.ESC+"[1;5B")):d.key=s?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:i.shiftKey||i.ctrlKey||(d.key=l.C0.ESC+"[2~");break;case 46:d.key=c?l.C0.ESC+"[3;"+(c+1)+"~":l.C0.ESC+"[3~";break;case 36:d.key=c?l.C0.ESC+"[1;"+(c+1)+"H":s?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:d.key=c?l.C0.ESC+"[1;"+(c+1)+"F":s?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:i.shiftKey?d.type=2:i.ctrlKey?d.key=l.C0.ESC+"[5;"+(c+1)+"~":d.key=l.C0.ESC+"[5~";break;case 34:i.shiftKey?d.type=3:i.ctrlKey?d.key=l.C0.ESC+"[6;"+(c+1)+"~":d.key=l.C0.ESC+"[6~";break;case 112:d.key=c?l.C0.ESC+"[1;"+(c+1)+"P":l.C0.ESC+"OP";break;case 113:d.key=c?l.C0.ESC+"[1;"+(c+1)+"Q":l.C0.ESC+"OQ";break;case 114:d.key=c?l.C0.ESC+"[1;"+(c+1)+"R":l.C0.ESC+"OR";break;case 115:d.key=c?l.C0.ESC+"[1;"+(c+1)+"S":l.C0.ESC+"OS";break;case 116:d.key=c?l.C0.ESC+"[15;"+(c+1)+"~":l.C0.ESC+"[15~";break;case 117:d.key=c?l.C0.ESC+"[17;"+(c+1)+"~":l.C0.ESC+"[17~";break;case 118:d.key=c?l.C0.ESC+"[18;"+(c+1)+"~":l.C0.ESC+"[18~";break;case 119:d.key=c?l.C0.ESC+"[19;"+(c+1)+"~":l.C0.ESC+"[19~";break;case 120:d.key=c?l.C0.ESC+"[20;"+(c+1)+"~":l.C0.ESC+"[20~";break;case 121:d.key=c?l.C0.ESC+"[21;"+(c+1)+"~":l.C0.ESC+"[21~";break;case 122:d.key=c?l.C0.ESC+"[23;"+(c+1)+"~":l.C0.ESC+"[23~";break;case 123:d.key=c?l.C0.ESC+"[24;"+(c+1)+"~":l.C0.ESC+"[24~";break;default:if(!i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)if(f&&!h||!i.altKey||i.metaKey)!f||i.altKey||i.ctrlKey||i.shiftKey||!i.metaKey?i.key&&!i.ctrlKey&&!i.altKey&&!i.metaKey&&i.keyCode>=48&&i.key.length===1?d.key=i.key:i.key&&i.ctrlKey&&(i.key==="_"&&(d.key=l.C0.US),i.key==="@"&&(d.key=l.C0.NUL)):i.keyCode===65&&(d.type=1);else{let _=u[i.keyCode],m=_?.[i.shiftKey?1:0];if(m)d.key=l.C0.ESC+m;else if(i.keyCode>=65&&i.keyCode<=90){let v=i.ctrlKey?i.keyCode-64:i.keyCode+32,y=String.fromCharCode(v);i.shiftKey&&(y=y.toUpperCase()),d.key=l.C0.ESC+y}else if(i.keyCode===32)d.key=l.C0.ESC+(i.ctrlKey?l.C0.NUL:" ");else if(i.key==="Dead"&&i.code.startsWith("Key")){let v=i.code.slice(3,4);i.shiftKey||(v=v.toLowerCase()),d.key=l.C0.ESC+v,d.cancel=!0}}else i.keyCode>=65&&i.keyCode<=90?d.key=String.fromCharCode(i.keyCode-64):i.keyCode===32?d.key=l.C0.NUL:i.keyCode>=51&&i.keyCode<=55?d.key=String.fromCharCode(i.keyCode-51+27):i.keyCode===56?d.key=l.C0.DEL:i.keyCode===219?d.key=l.C0.ESC:i.keyCode===220?d.key=l.C0.FS:i.keyCode===221&&(d.key=l.C0.GS)}return d}},482:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},a.utf32ToString=function(o,l=0,u=o.length){let i="";for(let s=l;s<u;++s){let f=o[s];f>65535?(f-=65536,i+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):i+=String.fromCharCode(f)}return i},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,l){let u=o.length;if(!u)return 0;let i=0,s=0;if(this._interim){let f=o.charCodeAt(s++);56320<=f&&f<=57343?l[i++]=1024*(this._interim-55296)+f-56320+65536:(l[i++]=this._interim,l[i++]=f),this._interim=0}for(let f=s;f<u;++f){let h=o.charCodeAt(f);if(55296<=h&&h<=56319){if(++f>=u)return this._interim=h,i;let d=o.charCodeAt(f);56320<=d&&d<=57343?l[i++]=1024*(h-55296)+d-56320+65536:(l[i++]=h,l[i++]=d)}else h!==65279&&(l[i++]=h)}return i}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,l){let u=o.length;if(!u)return 0;let i,s,f,h,d=0,c=0,_=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)C<<=6,C|=S;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;_<b;){if(_>=u)return 0;if(S=o[_++],(192&S)!=128){_--,y=!0;break}this.interim[D++]=S,C<<=6,C|=63&S}y||(g===2?C<128?_--:l[d++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(l[d++]=C):C<65536||C>1114111||(l[d++]=C)),this.interim.fill(0)}let m=u-4,v=_;for(;v<u;){for(;!(!(v<m)||128&(i=o[v])||128&(s=o[v+1])||128&(f=o[v+2])||128&(h=o[v+3]));)l[d++]=i,l[d++]=s,l[d++]=f,l[d++]=h,v+=4;if(i=o[v++],i<128)l[d++]=i;else if((224&i)==192){if(v>=u)return this.interim[0]=i,d;if(s=o[v++],(192&s)!=128){v--;continue}if(c=(31&i)<<6|63&s,c<128){v--;continue}l[d++]=c}else if((240&i)==224){if(v>=u)return this.interim[0]=i,d;if(s=o[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=o[v++],(192&f)!=128){v--;continue}if(c=(15&i)<<12|(63&s)<<6|63&f,c<2048||c>=55296&&c<=57343||c===65279)continue;l[d++]=c}else if((248&i)==240){if(v>=u)return this.interim[0]=i,d;if(s=o[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=o[v++],(192&f)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=f,d;if(h=o[v++],(192&h)!=128){v--;continue}if(c=(7&i)<<18|(63&s)<<12|(63&f)<<6|63&h,c<65536||c>1114111)continue;l[d++]=c}}return d}}},225:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;let o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u;a.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let i=0;i<o.length;++i)u.fill(0,o[i][0],o[i][1]+1)}}wcwidth(i){return i<32?0:i<127?1:i<65536?u[i]:function(s,f){let h,d=0,c=f.length-1;if(s<f[0][0]||s>f[c][1])return!1;for(;c>=d;)if(h=d+c>>1,s>f[h][1])d=h+1;else{if(!(s<f[h][0]))return!0;c=h-1}return!1}(i,l)?0:i>=131072&&i<=196605||i>=196608&&i<=262141?2:1}}},5981:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;let l=o(8460),u=o(844);class i extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,h){if(h!==void 0&&this._syncCalls>h)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);let c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,h){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(h),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(h)}_innerWrite(f=0,h=!0){let d=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let c=this._writeBuffer[this._bufferOffset],_=this._action(c,h);if(_){let v=y=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(d,y);return void _.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(v)}let m=this._callbacks[this._bufferOffset];if(m&&m(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=i},5941:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function u(i,s){let f=i.toString(16),h=f.length<2?"0"+f:f;switch(s){case 4:return f[0];case 8:return h;case 12:return(h+h).slice(0,3);default:return h+h}}a.parseColor=function(i){if(!i)return;let s=i.toLowerCase();if(s.indexOf("rgb:")===0){s=s.slice(4);let f=o.exec(s);if(f){let h=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/h*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/h*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/h*255)]}}else if(s.indexOf("#")===0&&(s=s.slice(1),l.exec(s)&&[3,6,9,12].includes(s.length))){let f=s.length/3,h=[0,0,0];for(let d=0;d<3;++d){let c=parseInt(s.slice(f*d,f*d+f),16);h[d]=f===1?c<<4:f===2?c:f===3?c>>4:c>>8}return h}},a.toRgbString=function(i,s=16){let[f,h,d]=i;return`rgb:${u(f,s)}/${u(h,s)}/${u(d,s)}`}},5770:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;let l=o(482),u=o(8742),i=o(5770),s=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=s}registerHandler(h,d){this._handlers[h]===void 0&&(this._handlers[h]=[]);let c=this._handlers[h];return c.push(d),{dispose:()=>{let _=c.indexOf(d);_!==-1&&c.splice(_,1)}}}clearHandler(h){this._handlers[h]&&delete this._handlers[h]}setHandlerFallback(h){this._handlerFb=h}reset(){if(this._active.length)for(let h=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;h>=0;--h)this._active[h].unhook(!1);this._stack.paused=!1,this._active=s,this._ident=0}hook(h,d){if(this.reset(),this._ident=h,this._active=this._handlers[h]||s,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(h,d,c){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(h,d,c);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(h,d,c))}unhook(h,d=!0){if(this._active.length){let c=!1,_=this._active.length-1,m=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,c=d,m=this._stack.fallThrough,this._stack.paused=!1),!m&&c===!1){for(;_>=0&&(c=this._active[_].unhook(h),c!==!0);_--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,c;_--}for(;_>=0;_--)if(c=this._active[_].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",h);this._active=s,this._ident=0}};let f=new u.Params;f.addParam(0),a.DcsHandler=class{constructor(h){this._handler=h,this._data="",this._params=f,this._hitLimit=!1}hook(h){this._params=h.length>1||h.params[0]?h.clone():f,this._data="",this._hitLimit=!1}put(h,d,c){this._hitLimit||(this._data+=(0,l.utf32ToString)(h,d,c),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(h){let d=!1;if(this._hitLimit)d=!1;else if(h&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(c=>(this._params=f,this._data="",this._hitLimit=!1,c));return this._params=f,this._data="",this._hitLimit=!1,d}}},2015:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;let l=o(844),u=o(8742),i=o(6242),s=o(6351);class f{constructor(_){this.table=new Uint8Array(_)}setDefault(_,m){this.table.fill(_<<4|m)}add(_,m,v,y){this.table[m<<8|_]=v<<4|y}addMany(_,m,v,y){for(let C=0;C<_.length;C++)this.table[m<<8|_[C]]=v<<4|y}}a.TransitionTable=f;let h=160;a.VT500_TRANSITION_TABLE=function(){let c=new f(4095),_=Array.apply(null,Array(256)).map((D,g)=>g),m=(D,g)=>_.slice(D,g),v=m(32,127),y=m(0,24);y.push(25),y.push.apply(y,m(28,32));let C=m(0,14),S;for(S in c.setDefault(1,0),c.addMany(v,0,2,0),C)c.addMany([24,26,153,154],S,3,0),c.addMany(m(128,144),S,3,0),c.addMany(m(144,152),S,3,0),c.add(156,S,0,0),c.add(27,S,11,1),c.add(157,S,4,8),c.addMany([152,158,159],S,0,7),c.add(155,S,11,3),c.add(144,S,11,9);return c.addMany(y,0,3,0),c.addMany(y,1,3,1),c.add(127,1,0,1),c.addMany(y,8,0,8),c.addMany(y,3,3,3),c.add(127,3,0,3),c.addMany(y,4,3,4),c.add(127,4,0,4),c.addMany(y,6,3,6),c.addMany(y,5,3,5),c.add(127,5,0,5),c.addMany(y,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(v,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(m(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(v,7,0,7),c.addMany(y,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(m(64,127),3,7,0),c.addMany(m(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(m(48,60),4,8,4),c.addMany(m(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(m(32,64),6,0,6),c.add(127,6,0,6),c.addMany(m(64,127),6,0,0),c.addMany(m(32,48),3,9,5),c.addMany(m(32,48),5,9,5),c.addMany(m(48,64),5,0,6),c.addMany(m(64,127),5,7,0),c.addMany(m(32,48),4,9,5),c.addMany(m(32,48),1,9,2),c.addMany(m(32,48),2,9,2),c.addMany(m(48,127),2,10,0),c.addMany(m(48,80),1,10,0),c.addMany(m(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(m(96,127),1,10,0),c.add(80,1,11,9),c.addMany(y,9,0,9),c.add(127,9,0,9),c.addMany(m(28,32),9,0,9),c.addMany(m(32,48),9,9,12),c.addMany(m(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(y,11,0,11),c.addMany(m(32,128),11,0,11),c.addMany(m(28,32),11,0,11),c.addMany(y,10,0,10),c.add(127,10,0,10),c.addMany(m(28,32),10,0,10),c.addMany(m(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(m(32,48),10,9,12),c.addMany(y,12,0,12),c.add(127,12,0,12),c.addMany(m(28,32),12,0,12),c.addMany(m(32,48),12,9,12),c.addMany(m(48,64),12,0,11),c.addMany(m(64,127),12,12,13),c.addMany(m(64,127),10,12,13),c.addMany(m(64,127),9,12,13),c.addMany(y,13,13,13),c.addMany(v,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(h,0,2,0),c.add(h,8,5,8),c.add(h,6,0,6),c.add(h,11,0,11),c.add(h,13,13,13),c}();class d extends l.Disposable{constructor(_=a.VT500_TRANSITION_TABLE){super(),this._transitions=_,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(m,v,y)=>{},this._executeHandlerFb=m=>{},this._csiHandlerFb=(m,v)=>{},this._escHandlerFb=m=>{},this._errorHandlerFb=m=>m,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,l.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new i.OscParser),this._dcsParser=this.register(new s.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(_,m=[64,126]){let v=0;if(_.prefix){if(_.prefix.length>1)throw new Error("only one byte as prefix supported");if(v=_.prefix.charCodeAt(0),v&&60>v||v>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(_.intermediates){if(_.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<_.intermediates.length;++C){let S=_.intermediates.charCodeAt(C);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");v<<=8,v|=S}}if(_.final.length!==1)throw new Error("final must be a single byte");let y=_.final.charCodeAt(0);if(m[0]>y||y>m[1])throw new Error(`final must be in range ${m[0]} .. ${m[1]}`);return v<<=8,v|=y,v}identToString(_){let m=[];for(;_;)m.push(String.fromCharCode(255&_)),_>>=8;return m.reverse().join("")}setPrintHandler(_){this._printHandler=_}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(_,m){let v=this._identifier(_,[48,126]);this._escHandlers[v]===void 0&&(this._escHandlers[v]=[]);let y=this._escHandlers[v];return y.push(m),{dispose:()=>{let C=y.indexOf(m);C!==-1&&y.splice(C,1)}}}clearEscHandler(_){this._escHandlers[this._identifier(_,[48,126])]&&delete this._escHandlers[this._identifier(_,[48,126])]}setEscHandlerFallback(_){this._escHandlerFb=_}setExecuteHandler(_,m){this._executeHandlers[_.charCodeAt(0)]=m}clearExecuteHandler(_){this._executeHandlers[_.charCodeAt(0)]&&delete this._executeHandlers[_.charCodeAt(0)]}setExecuteHandlerFallback(_){this._executeHandlerFb=_}registerCsiHandler(_,m){let v=this._identifier(_);this._csiHandlers[v]===void 0&&(this._csiHandlers[v]=[]);let y=this._csiHandlers[v];return y.push(m),{dispose:()=>{let C=y.indexOf(m);C!==-1&&y.splice(C,1)}}}clearCsiHandler(_){this._csiHandlers[this._identifier(_)]&&delete this._csiHandlers[this._identifier(_)]}setCsiHandlerFallback(_){this._csiHandlerFb=_}registerDcsHandler(_,m){return this._dcsParser.registerHandler(this._identifier(_),m)}clearDcsHandler(_){this._dcsParser.clearHandler(this._identifier(_))}setDcsHandlerFallback(_){this._dcsParser.setHandlerFallback(_)}registerOscHandler(_,m){return this._oscParser.registerHandler(_,m)}clearOscHandler(_){this._oscParser.clearHandler(_)}setOscHandlerFallback(_){this._oscParser.setHandlerFallback(_)}setErrorHandler(_){this._errorHandler=_}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(_,m,v,y,C){this._parseStack.state=_,this._parseStack.handlers=m,this._parseStack.handlerPos=v,this._parseStack.transition=y,this._parseStack.chunkPos=C}parse(_,m,v){let y,C=0,S=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(v===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let g=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(v===!1&&b>-1){for(;b>=0&&(y=g[b](this._params),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 4:if(v===!1&&b>-1){for(;b>=0&&(y=g[b](),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 6:if(C=_[this._parseStack.chunkPos],y=this._dcsParser.unhook(C!==24&&C!==26,v),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=_[this._parseStack.chunkPos],y=this._oscParser.end(C!==24&&C!==26,v),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<m;++g){switch(C=_[g],S=this._transitions.table[this.currentState<<8|(C<160?C:h)],S>>4){case 2:for(let M=g+1;;++M){if(M>=m||(C=_[M])<32||C>126&&C<h){this._printHandler(_,g,M),g=M-1;break}if(++M>=m||(C=_[M])<32||C>126&&C<h){this._printHandler(_,g,M),g=M-1;break}if(++M>=m||(C=_[M])<32||C>126&&C<h){this._printHandler(_,g,M),g=M-1;break}if(++M>=m||(C=_[M])<32||C>126&&C<h){this._printHandler(_,g,M),g=M-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let b=this._csiHandlers[this._collect<<8|C],x=b?b.length-1:-1;for(;x>=0&&(y=b[x](this._params),y!==!0);x--)if(y instanceof Promise)return this._preserveStack(3,b,x,S,g),y;x<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++g<m&&(C=_[g])>47&&C<60);g--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let E=this._escHandlers[this._collect<<8|C],T=E?E.length-1:-1;for(;T>=0&&(y=E[T](),y!==!0);T--)if(y instanceof Promise)return this._preserveStack(4,E,T,S,g),y;T<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let M=g+1;;++M)if(M>=m||(C=_[M])===24||C===26||C===27||C>127&&C<h){this._dcsParser.put(_,g,M),g=M-1;break}break;case 14:if(y=this._dcsParser.unhook(C!==24&&C!==26),y)return this._preserveStack(6,[],0,S,g),y;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=g+1;;M++)if(M>=m||(C=_[M])<32||C>127&&C<h){this._oscParser.put(_,g,M),g=M-1;break}break;case 6:if(y=this._oscParser.end(C!==24&&C!==26),y)return this._preserveStack(5,[],0,S,g),y;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}a.EscapeSequenceParser=d},6242:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;let l=o(5770),u=o(482),i=[];a.OscParser=class{constructor(){this._state=0,this._active=i,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(s,f){this._handlers[s]===void 0&&(this._handlers[s]=[]);let h=this._handlers[s];return h.push(f),{dispose:()=>{let d=h.indexOf(f);d!==-1&&h.splice(d,1)}}}clearHandler(s){this._handlers[s]&&delete this._handlers[s]}setHandlerFallback(s){this._handlerFb=s}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=i}reset(){if(this._state===2)for(let s=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;s>=0;--s)this._active[s].end(!1);this._stack.paused=!1,this._active=i,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||i,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].start();else this._handlerFb(this._id,"START")}_put(s,f,h){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(s,f,h);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(s,f,h))}start(){this.reset(),this._state=1}put(s,f,h){if(this._state!==3){if(this._state===1)for(;f<h;){let d=s[f++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&h-f>0&&this._put(s,f,h)}}end(s,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let h=!1,d=this._active.length-1,c=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,h=f,c=this._stack.fallThrough,this._stack.paused=!1),!c&&h===!1){for(;d>=0&&(h=this._active[d].end(s),h!==!0);d--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,h;d--}for(;d>=0;d--)if(h=this._active[d].end(!1),h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,h}else this._handlerFb(this._id,"END",s);this._active=i,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(s){this._handler=s,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(s,f,h){this._hitLimit||(this._data+=(0,u.utf32ToString)(s,f,h),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(s){let f=!1;if(this._hitLimit)f=!1;else if(s&&(f=this._handler(this._data),f instanceof Promise))return f.then(h=>(this._data="",this._hitLimit=!1,h));return this._data="",this._hitLimit=!1,f}}},8742:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;let o=2147483647;class l{static fromArray(i){let s=new l;if(!i.length)return s;for(let f=Array.isArray(i[0])?1:0;f<i.length;++f){let h=i[f];if(Array.isArray(h))for(let d=0;d<h.length;++d)s.addSubParam(h[d]);else s.addParam(h)}return s}constructor(i=32,s=32){if(this.maxLength=i,this.maxSubParamsLength=s,s>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(i),this.length=0,this._subParams=new Int32Array(s),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(i),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let i=new l(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i._subParams.set(this._subParams),i._subParamsLength=this._subParamsLength,i._subParamsIdx.set(this._subParamsIdx),i._rejectDigits=this._rejectDigits,i._rejectSubDigits=this._rejectSubDigits,i._digitIsSub=this._digitIsSub,i}toArray(){let i=[];for(let s=0;s<this.length;++s){i.push(this.params[s]);let f=this._subParamsIdx[s]>>8,h=255&this._subParamsIdx[s];h-f>0&&i.push(Array.prototype.slice.call(this._subParams,f,h))}return i}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(i){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=i>o?o:i}}addSubParam(i){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=i>o?o:i,this._subParamsIdx[this.length-1]++}}hasSubParams(i){return(255&this._subParamsIdx[i])-(this._subParamsIdx[i]>>8)>0}getSubParams(i){let s=this._subParamsIdx[i]>>8,f=255&this._subParamsIdx[i];return f-s>0?this._subParams.subarray(s,f):null}getSubParamsAll(){let i={};for(let s=0;s<this.length;++s){let f=this._subParamsIdx[s]>>8,h=255&this._subParamsIdx[s];h-f>0&&(i[s]=this._subParams.slice(f,h))}return i}addDigit(i){let s;if(this._rejectDigits||!(s=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let f=this._digitIsSub?this._subParams:this.params,h=f[s-1];f[s-1]=~h?Math.min(10*h+i,o):i}}a.Params=l},5741:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,l){let u={instance:l,dispose:l.dispose,isDisposed:!1};this._addons.push(u),l.dispose=()=>this._wrappedAddonDispose(u),l.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let l=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===o){l=u;break}if(l===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(l,1)}}},8771:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;let l=o(3785),u=o(511);a.BufferApiView=class{constructor(i,s){this._buffer=i,this.type=s}init(i){return this._buffer=i,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(i){let s=this._buffer.lines.get(i);if(s)return new l.BufferLineApiView(s)}getNullCell(){return new u.CellData}}},3785:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;let l=o(511);a.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,i){if(!(u<0||u>=this._line.length))return i?(this._line.loadCell(u,i),i):this._line.loadCell(u,new l.CellData)}translateToString(u,i,s){return this._line.translateToString(u,i,s)}}},8285:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;let l=o(8771),u=o(8460),i=o(844);class s extends i.Disposable{constructor(h){super(),this._core=h,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=s},7975:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,l){return this._core.registerCsiHandler(o,u=>l(u.toArray()))}addCsiHandler(o,l){return this.registerCsiHandler(o,l)}registerDcsHandler(o,l){return this._core.registerDcsHandler(o,(u,i)=>l(u,i.toArray()))}addDcsHandler(o,l){return this.registerDcsHandler(o,l)}registerEscHandler(o,l){return this._core.registerEscHandler(o,l)}addEscHandler(o,l){return this.registerEscHandler(o,l)}registerOscHandler(o,l){return this._core.registerOscHandler(o,l)}addOscHandler(o,l){return this.registerOscHandler(o,l)}}},7090:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(p,a,o){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;let i=o(8460),s=o(844),f=o(5295),h=o(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let d=a.BufferService=class extends s.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new i.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new i.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(c,this))}resize(c,_){this.cols=c,this.rows=_,this.buffers.resize(c,_),this._onResize.fire({cols:c,rows:_})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,_=!1){let m=this.buffer,v;v=this._cachedBlankLine,v&&v.length===this.cols&&v.getFg(0)===c.fg&&v.getBg(0)===c.bg||(v=m.getBlankLine(c,_),this._cachedBlankLine=v),v.isWrapped=_;let y=m.ybase+m.scrollTop,C=m.ybase+m.scrollBottom;if(m.scrollTop===0){let S=m.lines.isFull;C===m.lines.length-1?S?m.lines.recycle().copyFrom(v):m.lines.push(v.clone()):m.lines.splice(C+1,0,v.clone()),S?this.isUserScrolling&&(m.ydisp=Math.max(m.ydisp-1,0)):(m.ybase++,this.isUserScrolling||m.ydisp++)}else{let S=C-y+1;m.lines.shiftElements(y+1,S-1,-1),m.lines.set(C,v.clone())}this.isUserScrolling||(m.ydisp=m.ybase),this._onScroll.fire(m.ydisp)}scrollLines(c,_,m){let v=this.buffer;if(c<0){if(v.ydisp===0)return;this.isUserScrolling=!0}else c+v.ydisp>=v.ybase&&(this.isUserScrolling=!1);let y=v.ydisp;v.ydisp=Math.max(Math.min(v.ydisp+c,v.ybase),0),y!==v.ydisp&&(_||this._onScroll.fire(v.ydisp))}};a.BufferService=d=l([u(0,h.IOptionsService)],d)},7994:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,l){this._charsets[o]=l,this.glevel===o&&(this.charset=l)}}},1753:function(p,a,o){var l=this&&this.__decorate||function(v,y,C,S){var D,g=arguments.length,b=g<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(v,y,C,S);else for(var x=v.length-1;x>=0;x--)(D=v[x])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},u=this&&this.__param||function(v,y){return function(C,S){y(C,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;let i=o(2585),s=o(8460),f=o(844),h={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:v=>v.button!==4&&v.action===1&&(v.ctrl=!1,v.alt=!1,v.shift=!1,!0)},VT200:{events:19,restrict:v=>v.action!==32},DRAG:{events:23,restrict:v=>v.action!==32||v.button!==3},ANY:{events:31,restrict:v=>!0}};function d(v,y){let C=(v.ctrl?16:0)|(v.shift?4:0)|(v.alt?8:0);return v.button===4?(C|=64,C|=v.action):(C|=3&v.button,4&v.button&&(C|=64),8&v.button&&(C|=128),v.action===32?C|=32:v.action!==0||y||(C|=3)),C}let c=String.fromCharCode,_={DEFAULT:v=>{let y=[d(v,!1)+32,v.col+32,v.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${c(y[0])}${c(y[1])}${c(y[2])}`},SGR:v=>{let y=v.action===0&&v.button!==4?"m":"M";return`\x1B[<${d(v,!0)};${v.col};${v.row}${y}`},SGR_PIXELS:v=>{let y=v.action===0&&v.button!==4?"m":"M";return`\x1B[<${d(v,!0)};${v.x};${v.y}${y}`}},m=a.CoreMouseService=class extends f.Disposable{constructor(v,y){super(),this._bufferService=v,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new s.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(h))this.addProtocol(C,h[C]);for(let C of Object.keys(_))this.addEncoding(C,_[C]);this.reset()}addProtocol(v,y){this._protocols[v]=y}addEncoding(v,y){this._encodings[v]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(v){if(!this._protocols[v])throw new Error(`unknown protocol "${v}"`);this._activeProtocol=v,this._onProtocolChange.fire(this._protocols[v].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(v){if(!this._encodings[v])throw new Error(`unknown encoding "${v}"`);this._activeEncoding=v}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(v){if(v.col<0||v.col>=this._bufferService.cols||v.row<0||v.row>=this._bufferService.rows||v.button===4&&v.action===32||v.button===3&&v.action!==32||v.button!==4&&(v.action===2||v.action===3)||(v.col++,v.row++,v.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,v,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(v))return!1;let y=this._encodings[this._activeEncoding](v);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=v,!0}explainEvents(v){return{down:!!(1&v),up:!!(2&v),drag:!!(4&v),move:!!(8&v),wheel:!!(16&v)}}_equalEvents(v,y,C){if(C){if(v.x!==y.x||v.y!==y.y)return!1}else if(v.col!==y.col||v.row!==y.row)return!1;return v.button===y.button&&v.action===y.action&&v.ctrl===y.ctrl&&v.alt===y.alt&&v.shift===y.shift}};a.CoreMouseService=m=l([u(0,i.IBufferService),u(1,i.ICoreService)],m)},6975:function(p,a,o){var l=this&&this.__decorate||function(m,v,y,C){var S,D=arguments.length,g=D<3?v:C===null?C=Object.getOwnPropertyDescriptor(v,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(m,v,y,C);else for(var b=m.length-1;b>=0;b--)(S=m[b])&&(g=(D<3?S(g):D>3?S(v,y,g):S(v,y))||g);return D>3&&g&&Object.defineProperty(v,y,g),g},u=this&&this.__param||function(m,v){return function(y,C){v(y,C,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;let i=o(1439),s=o(8460),f=o(844),h=o(2585),d=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),_=a.CoreService=class extends f.Disposable{constructor(m,v,y){super(),this._bufferService=m,this._logService=v,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new s.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new s.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,i.clone)(d),this.decPrivateModes=(0,i.clone)(c)}reset(){this.modes=(0,i.clone)(d),this.decPrivateModes=(0,i.clone)(c)}triggerDataEvent(m,v=!1){if(this._optionsService.rawOptions.disableStdin)return;let y=this._bufferService.buffer;v&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),v&&this._onUserInput.fire(),this._logService.debug(`sending data "${m}"`,()=>m.split("").map(C=>C.charCodeAt(0))),this._onData.fire(m)}triggerBinaryEvent(m){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${m}"`,()=>m.split("").map(v=>v.charCodeAt(0))),this._onBinary.fire(m))}};a.CoreService=_=l([u(0,h.IBufferService),u(1,h.ILogService),u(2,h.IOptionsService)],_)},9074:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;let l=o(8055),u=o(8460),i=o(844),s=o(6106),f=0,h=0;class d extends i.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new s.SortedList(m=>m?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,i.toDisposable)(()=>this.reset()))}registerDecoration(m){if(m.marker.isDisposed)return;let v=new c(m);if(v){let y=v.marker.onDispose(()=>v.dispose());v.onDispose(()=>{v&&(this._decorations.delete(v)&&this._onDecorationRemoved.fire(v),y.dispose())}),this._decorations.insert(v),this._onDecorationRegistered.fire(v)}return v}reset(){for(let m of this._decorations.values())m.dispose();this._decorations.clear()}*getDecorationsAtCell(m,v,y){var C,S,D;let g=0,b=0;for(let x of this._decorations.getKeyIterator(v))g=(C=x.options.x)!==null&&C!==void 0?C:0,b=g+((S=x.options.width)!==null&&S!==void 0?S:1),m>=g&&m<b&&(!y||((D=x.options.layer)!==null&&D!==void 0?D:"bottom")===y)&&(yield x)}forEachDecorationAtCell(m,v,y,C){this._decorations.forEachByKey(v,S=>{var D,g,b;f=(D=S.options.x)!==null&&D!==void 0?D:0,h=f+((g=S.options.width)!==null&&g!==void 0?g:1),m>=f&&m<h&&(!y||((b=S.options.layer)!==null&&b!==void 0?b:"bottom")===y)&&C(S)})}}a.DecorationService=d;class c extends i.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=l.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=l.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(m){super(),this.options=m,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=m.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;let l=o(2585),u=o(8343);class i{constructor(...f){this._entries=new Map;for(let[h,d]of f)this.set(h,d)}set(f,h){let d=this._entries.get(f);return this._entries.set(f,h),d}forEach(f){for(let[h,d]of this._entries.entries())f(h,d)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}a.ServiceCollection=i,a.InstantiationService=class{constructor(){this._services=new i,this._services.set(l.IInstantiationService,this)}setService(s,f){this._services.set(s,f)}getService(s){return this._services.get(s)}createInstance(s,...f){let h=(0,u.getServiceDependencies)(s).sort((_,m)=>_.index-m.index),d=[];for(let _ of h){let m=this._services.get(_.id);if(!m)throw new Error(`[createInstance] ${s.name} depends on UNKNOWN service ${_.id}.`);d.push(m)}let c=h.length>0?h[0].index:f.length;if(f.length!==c)throw new Error(`[createInstance] First service dependency of ${s.name} at position ${c+1} conflicts with ${f.length} static arguments`);return new s(...f,...d)}}},7866:function(p,a,o){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;let i=o(844),s=o(2585),f={trace:s.LogLevelEnum.TRACE,debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},h,d=a.LogService=class extends i.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),h=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let _=0;_<c.length;_++)typeof c[_]=="function"&&(c[_]=c[_]())}_log(c,_,m){this._evalLazyOptionalParams(m),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...m)}trace(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.TRACE&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.trace.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}debug(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.DEBUG&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.debug.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}info(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.INFO&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.info.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.info,c,_)}warn(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.WARN&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.warn.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.warn,c,_)}error(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.ERROR&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.error.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.error,c,_)}};a.LogService=d=l([u(0,s.IOptionsService)],d),a.setTraceLogger=function(c){h=c},a.traceCall=function(c,_,m){if(typeof m.value!="function")throw new Error("not supported");let v=m.value;m.value=function(...y){if(h.logLevel!==s.LogLevelEnum.TRACE)return v.apply(this,y);h.trace(`GlyphRenderer#${v.name}(${y.map(S=>JSON.stringify(S)).join(", ")})`);let C=v.apply(this,y);return h.trace(`GlyphRenderer#${v.name} return`,C),C}}},7302:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;let l=o(8460),u=o(844),i=o(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:i.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let s=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(d){super(),this._onOptionChange=this.register(new l.EventEmitter),this.onOptionChange=this._onOptionChange.event;let c=Object.assign({},a.DEFAULT_OPTIONS);for(let _ in d)if(_ in c)try{let m=d[_];c[_]=this._sanitizeAndValidateOption(_,m)}catch(m){console.error(m)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(d,c){return this.onOptionChange(_=>{_===d&&c(this.rawOptions[d])})}onMultipleOptionChange(d,c){return this.onOptionChange(_=>{d.indexOf(_)!==-1&&c()})}_setupOptions(){let d=_=>{if(!(_ in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);return this.rawOptions[_]},c=(_,m)=>{if(!(_ in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);m=this._sanitizeAndValidateOption(_,m),this.rawOptions[_]!==m&&(this.rawOptions[_]=m,this._onOptionChange.fire(_))};for(let _ in this.rawOptions){let m={get:d.bind(this,_),set:c.bind(this,_)};Object.defineProperty(this.options,_,m)}}_sanitizeAndValidateOption(d,c){switch(d){case"cursorStyle":if(c||(c=a.DEFAULT_OPTIONS[d]),!function(_){return _==="block"||_==="underline"||_==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${d}`);break;case"wordSeparator":c||(c=a.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=s.includes(c)?c:a.DEFAULT_OPTIONS[d];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${d} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${d} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}a.OptionsService=f},2660:function(p,a,o){var l=this&&this.__decorate||function(f,h,d,c){var _,m=arguments.length,v=m<3?h:c===null?c=Object.getOwnPropertyDescriptor(h,d):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(f,h,d,c);else for(var y=f.length-1;y>=0;y--)(_=f[y])&&(v=(m<3?_(v):m>3?_(h,d,v):_(h,d))||v);return m>3&&v&&Object.defineProperty(h,d,v),v},u=this&&this.__param||function(f,h){return function(d,c){h(d,c,f)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;let i=o(2585),s=a.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){let h=this._bufferService.buffer;if(f.id===void 0){let y=h.addMarker(h.ybase+h.y),C={data:f,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(C,y)),this._dataByLinkId.set(C.id,C),C.id}let d=f,c=this._getEntryIdKey(d),_=this._entriesWithId.get(c);if(_)return this.addLineToLink(_.id,h.ybase+h.y),_.id;let m=h.addMarker(h.ybase+h.y),v={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(v,m)),this._entriesWithId.set(v.key,v),this._dataByLinkId.set(v.id,v),v.id}addLineToLink(f,h){let d=this._dataByLinkId.get(f);if(d&&d.lines.every(c=>c.line!==h)){let c=this._bufferService.buffer.addMarker(h);d.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(d,c))}}getLinkData(f){var h;return(h=this._dataByLinkId.get(f))===null||h===void 0?void 0:h.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,h){let d=f.lines.indexOf(h);d!==-1&&(f.lines.splice(d,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};a.OscLinkService=s=l([u(0,i.IBufferService)],s)},8343:(p,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;let o="di$target",l="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u[l]||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);let i=function(s,f,h){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,c,_){c[o]===c?c[l].push({id:d,index:_}):(c[l]=[{id:d,index:_}],c[o]=c)})(i,s,h)};return i.toString=()=>u,a.serviceRegistry.set(u,i),i}},2585:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;let l=o(8343);var u;a.IBufferService=(0,l.createDecorator)("BufferService"),a.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),a.ICoreService=(0,l.createDecorator)("CoreService"),a.ICharsetService=(0,l.createDecorator)("CharsetService"),a.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(i){i[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.OFF=5]="OFF"}(u||(a.LogLevelEnum=u={})),a.ILogService=(0,l.createDecorator)("LogService"),a.IOptionsService=(0,l.createDecorator)("OptionsService"),a.IOscLinkService=(0,l.createDecorator)("OscLinkService"),a.IUnicodeService=(0,l.createDecorator)("UnicodeService"),a.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(p,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;let l=o(8460),u=o(225);a.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter,this.onChange=this._onChange.event;let i=new u.UnicodeV6;this.register(i),this._active=i.version,this._activeProvider=i}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(i){if(!this._providers[i])throw new Error(`unknown Unicode version "${i}"`);this._active=i,this._activeProvider=this._providers[i],this._onChange.fire(i)}register(i){this._providers[i.version]=i}wcwidth(i){return this._activeProvider.wcwidth(i)}getStringCellWidth(i){let s=0,f=i.length;for(let h=0;h<f;++h){let d=i.charCodeAt(h);if(55296<=d&&d<=56319){if(++h>=f)return s+this.wcwidth(d);let c=i.charCodeAt(h);56320<=c&&c<=57343?d=1024*(d-55296)+c-56320+65536:s+=this.wcwidth(c)}s+=this.wcwidth(d)}return s}}}},t={};function n(p){var a=t[p];if(a!==void 0)return a.exports;var o=t[p]={exports:{}};return e[p].call(o.exports,o,o.exports,n),o.exports}var r={};return(()=>{var p=r;Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;let a=n(9042),o=n(3236),l=n(844),u=n(5741),i=n(8285),s=n(7975),f=n(7090),h=["cols","rows"];class d extends l.Disposable{constructor(_){super(),this._core=this.register(new o.Terminal(_)),this._addonManager=this.register(new u.AddonManager),this._publicOptions=Object.assign({},this._core.options);let m=y=>this._core.options[y],v=(y,C)=>{this._checkReadonlyOptions(y),this._core.options[y]=C};for(let y in this._core.options){let C={get:m.bind(this,y),set:v.bind(this,y)};Object.defineProperty(this._publicOptions,y,C)}}_checkReadonlyOptions(_){if(h.includes(_))throw new Error(`Option "${_}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new s.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new i.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let _=this._core.coreService.decPrivateModes,m="none";switch(this._core.coreMouseService.activeProtocol){case"X10":m="x10";break;case"VT200":m="vt200";break;case"DRAG":m="drag";break;case"ANY":m="any"}return{applicationCursorKeysMode:_.applicationCursorKeys,applicationKeypadMode:_.applicationKeypad,bracketedPasteMode:_.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:m,originMode:_.origin,reverseWraparoundMode:_.reverseWraparound,sendFocusMode:_.sendFocus,wraparoundMode:_.wraparound}}get options(){return this._publicOptions}set options(_){for(let m in _)this._publicOptions[m]=_[m]}blur(){this._core.blur()}focus(){this._core.focus()}resize(_,m){this._verifyIntegers(_,m),this._core.resize(_,m)}open(_){this._core.open(_)}attachCustomKeyEventHandler(_){this._core.attachCustomKeyEventHandler(_)}registerLinkProvider(_){return this._core.registerLinkProvider(_)}registerCharacterJoiner(_){return this._checkProposedApi(),this._core.registerCharacterJoiner(_)}deregisterCharacterJoiner(_){this._checkProposedApi(),this._core.deregisterCharacterJoiner(_)}registerMarker(_=0){return this._verifyIntegers(_),this._core.registerMarker(_)}registerDecoration(_){var m,v,y;return this._checkProposedApi(),this._verifyPositiveIntegers((m=_.x)!==null&&m!==void 0?m:0,(v=_.width)!==null&&v!==void 0?v:0,(y=_.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(_)}hasSelection(){return this._core.hasSelection()}select(_,m,v){this._verifyIntegers(_,m,v),this._core.select(_,m,v)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(_,m){this._verifyIntegers(_,m),this._core.selectLines(_,m)}dispose(){super.dispose()}scrollLines(_){this._verifyIntegers(_),this._core.scrollLines(_)}scrollPages(_){this._verifyIntegers(_),this._core.scrollPages(_)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(_){this._verifyIntegers(_),this._core.scrollToLine(_)}clear(){this._core.clear()}write(_,m){this._core.write(_,m)}writeln(_,m){this._core.write(_),this._core.write(`\r
`,m)}paste(_){this._core.paste(_)}refresh(_,m){this._verifyIntegers(_,m),this._core.refresh(_,m)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(_){this._addonManager.loadAddon(this,_)}static get strings(){return a}_verifyIntegers(..._){for(let m of _)if(m===1/0||isNaN(m)||m%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(..._){for(let m of _)if(m&&(m===1/0||isNaN(m)||m%1!=0||m<0))throw new Error("This API only accepts positive integers")}}p.Terminal=d})(),r})())});var Xg=Tt((RN,Qg)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var n=function(u,i,s){if(typeof u!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(s=i),n.modules[u]||(n.payloads[u]=s,n.modules[u]=null)};n.modules={},n.payloads={};var r=function(u,i,s){if(typeof i=="string"){var f=o(u,i);if(f!=null)return s&&s(),f}else if(Object.prototype.toString.call(i)==="[object Array]"){for(var h=[],d=0,c=i.length;d<c;++d){var _=o(u,i[d]);if(_==null&&p.original)return;h.push(_)}return s&&s.apply(null,h)||!0}},p=function(u,i){var s=r("",u,i);return s==null&&p.original?p.original.apply(this,arguments):s},a=function(u,i){if(i.indexOf("!")!==-1){var s=i.split("!");return a(u,s[0])+"!"+a(u,s[1])}if(i.charAt(0)=="."){var f=u.split("/").slice(0,-1).join("/");for(i=f+"/"+i;i.indexOf(".")!==-1&&h!=i;){var h=i;i=i.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return i},o=function(u,i){i=a(u,i);var s=n.modules[i];if(!s){if(s=n.payloads[i],typeof s=="function"){var f={},h={id:i,uri:"",exports:f,packaged:!0},d=function(_,m){return r(i,_,m)},c=s(d,f,h);f=c||h.exports,n.modules[i]=f,delete n.payloads[i]}s=n.modules[i]=f||s}return s};function l(u){var i=t;u&&(t[u]||(t[u]={}),i=t[u]),(!i.define||!i.define.packaged)&&(n.original=i.define,i.define=n,i.define.packaged=!0),(!i.require||!i.require.packaged)&&(p.original=i.require,i.require=p,i.require.packaged=!0)}l(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function r(p,a,o){Object.defineProperty(p,a,{value:o,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||r(String.prototype,"startsWith",function(p,a){return a=a||0,this.lastIndexOf(p,a)===a}),String.prototype.endsWith||r(String.prototype,"endsWith",function(p,a){var o=this;(a===void 0||a>o.length)&&(a=o.length),a-=p.length;var l=o.indexOf(p,a);return l!==-1&&l===a}),String.prototype.repeat||r(String.prototype,"repeat",function(p){for(var a="",o=this;p>0;)p&1&&(a+=o),(p>>=1)&&(o+=o);return a}),String.prototype.includes||r(String.prototype,"includes",function(p,a){return this.indexOf(p,a)!=-1}),Object.assign||(Object.assign=function(p){if(p==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(p),o=1;o<arguments.length;o++){var l=arguments[o];l!=null&&Object.keys(l).forEach(function(u){a[u]=l[u]})}return a}),Object.values||(Object.values=function(p){return Object.keys(p).map(function(a){return p[a]})}),Array.prototype.find||r(Array.prototype,"find",function(p){for(var a=this.length,o=arguments[1],l=0;l<a;l++){var u=this[l];if(p.call(o,u,l,this))return u}}),Array.prototype.findIndex||r(Array.prototype,"findIndex",function(p){for(var a=this.length,o=arguments[1],l=0;l<a;l++){var u=this[l];if(p.call(o,u,l,this))return l}}),Array.prototype.includes||r(Array.prototype,"includes",function(p,a){return this.indexOf(p,a)!=-1}),Array.prototype.fill||r(Array.prototype,"fill",function(p){for(var a=this,o=a.length>>>0,l=arguments[1],u=l>>0,i=u<0?Math.max(o+u,0):Math.min(u,o),s=arguments[2],f=s===void 0?o:s>>0,h=f<0?Math.max(o+f,0):Math.min(f,o);i<h;)a[i]=p,i++;return a}),Array.of||r(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,n){t.deepCopy=function r(p){if(typeof p!="object"||!p)return p;var a;if(Array.isArray(p)){a=[];for(var o=0;o<p.length;o++)a[o]=r(p[o]);return a}if(Object.prototype.toString.call(p)!=="[object Object]")return p;a={};for(var o in p)a[o]=r(p[o]);return a}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";t.last=function(a){return a[a.length-1]},t.stringReverse=function(a){return a.split("").reverse().join("")},t.stringRepeat=function(a,o){for(var l="";o>0;)o&1&&(l+=a),(o>>=1)&&(a+=a);return l};var r=/^\s\s*/,p=/\s\s*$/;t.stringTrimLeft=function(a){return a.replace(r,"")},t.stringTrimRight=function(a){return a.replace(p,"")},t.copyObject=function(a){var o={};for(var l in a)o[l]=a[l];return o},t.copyArray=function(a){for(var o=[],l=0,u=a.length;l<u;l++)a[l]&&typeof a[l]=="object"?o[l]=this.copyObject(a[l]):o[l]=a[l];return o},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(a){for(var o={},l=0;l<a.length;l++)o[a[l]]=1;return o},t.createMap=function(a){var o=Object.create(null);for(var l in a)o[l]=a[l];return o},t.arrayRemove=function(a,o){for(var l=0;l<=a.length;l++)o===a[l]&&a.splice(l,1)},t.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(a){return(""+a).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(a,o){var l=[];return a.replace(o,function(u){l.push({offset:arguments[arguments.length-2],length:u.length})}),l},t.deferredCall=function(a){var o=null,l=function(){o=null,a()},u=function(i){return u.cancel(),o=setTimeout(l,i||0),u};return u.schedule=u,u.call=function(){return this.cancel(),a(),u},u.cancel=function(){return clearTimeout(o),o=null,u},u.isPending=function(){return o},u},t.delayedCall=function(a,o){var l=null,u=function(){l=null,a()},i=function(s){l==null&&(l=setTimeout(u,s||o))};return i.delay=function(s){l&&clearTimeout(l),l=setTimeout(u,s||o)},i.schedule=i,i.call=function(){this.cancel(),a()},i.cancel=function(){l&&clearTimeout(l),l=null},i.isPending=function(){return l},i},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(a,o,l){return l&&a.codePointAt(o)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var r=typeof navigator=="object"?navigator:{},p=(/mac|win|linux/i.exec(r.platform)||["other"])[0].toLowerCase(),a=r.userAgent||"",o=r.appName||"";t.isWin=p=="win",t.isMac=p=="mac",t.isLinux=p=="linux",t.isIE=o=="Microsoft Internet Explorer"||o.indexOf("MSAppHost")>=0?parseFloat((a.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((a.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=a.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(a.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(a.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(a.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(a.split(" Edge/")[1])||void 0,t.isAIR=a.indexOf("AdobeAIR")>=0,t.isAndroid=a.indexOf("Android")>=0,t.isChromeOS=a.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(a)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("./useragent"),p="http://www.w3.org/1999/xhtml";t.buildDom=function s(f,h,d){if(typeof f=="string"&&f){var c=document.createTextNode(f);return h&&h.appendChild(c),c}if(!Array.isArray(f))return f&&f.appendChild&&h&&h.appendChild(f),f;if(typeof f[0]!="string"||!f[0]){for(var _=[],m=0;m<f.length;m++){var v=s(f[m],h,d);v&&_.push(v)}return _}var y=document.createElement(f[0]),C=f[1],S=1;C&&typeof C=="object"&&!Array.isArray(C)&&(S=2);for(var m=S;m<f.length;m++)s(f[m],y,d);return S==2&&Object.keys(C).forEach(function(D){var g=C[D];D==="class"?y.className=Array.isArray(g)?g.join(" "):g:typeof g=="function"||D=="value"||D[0]=="$"?y[D]=g:D==="ref"?d&&(d[g]=y):D==="style"?typeof g=="string"&&(y.style.cssText=g):g!=null&&y.setAttribute(D,g)}),h&&h.appendChild(y),y},t.getDocumentHead=function(s){return s||(s=document),s.head||s.getElementsByTagName("head")[0]||s.documentElement},t.createElement=function(s,f){return document.createElementNS?document.createElementNS(f||p,s):document.createElement(s)},t.removeChildren=function(s){s.innerHTML=""},t.createTextNode=function(s,f){var h=f?f.ownerDocument:document;return h.createTextNode(s)},t.createFragment=function(s){var f=s?s.ownerDocument:document;return f.createDocumentFragment()},t.hasCssClass=function(s,f){var h=(s.className+"").split(/\s+/g);return h.indexOf(f)!==-1},t.addCssClass=function(s,f){t.hasCssClass(s,f)||(s.className+=" "+f)},t.removeCssClass=function(s,f){for(var h=s.className.split(/\s+/g);;){var d=h.indexOf(f);if(d==-1)break;h.splice(d,1)}s.className=h.join(" ")},t.toggleCssClass=function(s,f){for(var h=s.className.split(/\s+/g),d=!0;;){var c=h.indexOf(f);if(c==-1)break;d=!1,h.splice(c,1)}return d&&h.push(f),s.className=h.join(" "),d},t.setCssClass=function(s,f,h){h?t.addCssClass(s,f):t.removeCssClass(s,f)},t.hasCssString=function(s,f){var h=0,d;if(f=f||document,d=f.querySelectorAll("style")){for(;h<d.length;)if(d[h++].id===s)return!0}},t.removeElementById=function(s,f){f=f||document,f.getElementById(s)&&f.getElementById(s).remove()};var a,o=[];t.useStrictCSP=function(s){a=s,s==!1?l():o||(o=[])};function l(){var s=o;o=null,s&&s.forEach(function(f){u(f[0],f[1])})}function u(s,f,h){if(!(typeof document>"u")){if(o){if(h)l();else if(h===!1)return o.push([s,f])}if(!a){var d=h;!h||!h.getRootNode?d=document:(d=h.getRootNode(),(!d||d==h)&&(d=document));var c=d.ownerDocument||d;if(f&&t.hasCssString(f,d))return null;f&&(s+=`
/*# sourceURL=ace/css/`+f+" */");var _=t.createElement("style");_.appendChild(c.createTextNode(s)),f&&(_.id=f),d==c&&(d=t.getDocumentHead(c)),d.insertBefore(_,d.firstChild)}}}if(t.importCssString=u,t.importCssStylsheet=function(s,f){t.buildDom(["link",{rel:"stylesheet",href:s}],t.getDocumentHead(f))},t.scrollbarWidth=function(s){var f=t.createElement("ace_inner");f.style.width="100%",f.style.minWidth="0px",f.style.height="200px",f.style.display="block";var h=t.createElement("ace_outer"),d=h.style;d.position="absolute",d.left="-10000px",d.overflow="hidden",d.width="200px",d.minWidth="0px",d.height="150px",d.display="block",h.appendChild(f);var c=s&&s.documentElement||document&&document.documentElement;if(!c)return 0;c.appendChild(h);var _=f.offsetWidth;d.overflow="scroll";var m=f.offsetWidth;return _===m&&(m=h.clientWidth),c.removeChild(h),_-m},t.computedStyle=function(s,f){return window.getComputedStyle(s,"")||{}},t.setStyle=function(s,f,h){s[f]!==h&&(s[f]=h)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=r.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,r.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var i=document.createElement("div");t.HI_DPI&&i.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!r.isEdge&&typeof i.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),i=null}t.HAS_CSS_TRANSFORMS?t.translate=function(s,f,h){s.style.transform="translate("+Math.round(f)+"px, "+Math.round(h)+"px)"}:t.translate=function(s,f,h){s.style.top=Math.round(h)+"px",s.style.left=Math.round(f)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./dom");t.get=function(p,a){var o=new XMLHttpRequest;o.open("GET",p,!0),o.onreadystatechange=function(){o.readyState===4&&a(o.responseText)},o.send(null)},t.loadScript=function(p,a){var o=r.getDocumentHead(),l=document.createElement("script");l.src=p,o.appendChild(l),l.onload=l.onreadystatechange=function(u,i){(i||!l.readyState||l.readyState=="loaded"||l.readyState=="complete")&&(l=l.onload=l.onreadystatechange=null,i||a())}},t.qualifyURL=function(p){var a=document.createElement("a");return a.href=p,a.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(r,p){r.super_=p,r.prototype=Object.create(p.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(r,p){for(var a in p)r[a]=p[a];return r},t.implement=function(r,p){t.mixin(r,p)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var r={},p=function(){this.propagationStopped=!0},a=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(o,l){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var u=this._eventRegistry[o]||[],i=this._defaultHandlers[o];if(!(!u.length&&!i)){(typeof l!="object"||!l)&&(l={}),l.type||(l.type=o),l.stopPropagation||(l.stopPropagation=p),l.preventDefault||(l.preventDefault=a),u=u.slice();for(var s=0;s<u.length&&(u[s](l,this),!l.propagationStopped);s++);if(i&&!l.defaultPrevented)return i(l,this)}},r._signal=function(o,l){var u=(this._eventRegistry||{})[o];if(u){u=u.slice();for(var i=0;i<u.length;i++)u[i](l,this)}},r.once=function(o,l){var u=this;if(this.on(o,function i(){u.off(o,i),l.apply(null,arguments)}),!l)return new Promise(function(i){l=i})},r.setDefaultHandler=function(o,l){var u=this._defaultHandlers;if(u||(u=this._defaultHandlers={_disabled_:{}}),u[o]){var i=u[o],s=u._disabled_[o];s||(u._disabled_[o]=s=[]),s.push(i);var f=s.indexOf(l);f!=-1&&s.splice(f,1)}u[o]=l},r.removeDefaultHandler=function(o,l){var u=this._defaultHandlers;if(u){var i=u._disabled_[o];if(u[o]==l)i&&this.setDefaultHandler(o,i.pop());else if(i){var s=i.indexOf(l);s!=-1&&i.splice(s,1)}}},r.on=r.addEventListener=function(o,l,u){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[o];return i||(i=this._eventRegistry[o]=[]),i.indexOf(l)==-1&&i[u?"unshift":"push"](l),l},r.off=r.removeListener=r.removeEventListener=function(o,l){this._eventRegistry=this._eventRegistry||{};var u=this._eventRegistry[o];if(u){var i=u.indexOf(l);i!==-1&&u.splice(i,1)}},r.removeAllListeners=function(o){o||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[o]=void 0),this._defaultHandlers&&(this._defaultHandlers[o]=void 0)},t.EventEmitter=r});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,n){t.reportError=function(p,a){var o=new Error(p);o.data=a,typeof console=="object"&&console.error&&console.error(o),setTimeout(function(){throw o})}});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(e,t,n){"no use strict";var r=e("./oop"),p=e("./event_emitter").EventEmitter,a=e("./report_error").reportError,o={setOptions:function(s){Object.keys(s).forEach(function(f){this.setOption(f,s[f])},this)},getOptions:function(s){var f={};if(s)Array.isArray(s)||(f=s,s=Object.keys(f));else{var h=this.$options;s=Object.keys(h).filter(function(d){return!h[d].hidden})}return s.forEach(function(d){f[d]=this.getOption(d)},this),f},setOption:function(s,f){if(this["$"+s]!==f){var h=this.$options[s];if(!h)return l('misspelled option "'+s+'"');if(h.forwardTo)return this[h.forwardTo]&&this[h.forwardTo].setOption(s,f);h.handlesSet||(this["$"+s]=f),h&&h.set&&h.set.call(this,f)}},getOption:function(s){var f=this.$options[s];return f?f.forwardTo?this[f.forwardTo]&&this[f.forwardTo].getOption(s):f&&f.get?f.get.call(this):this["$"+s]:l('misspelled option "'+s+'"')}};function l(s){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var u,i=function(){function s(){this.$defaultOptions={}}return s.prototype.defineOptions=function(f,h,d){return f.$options||(this.$defaultOptions[h]=f.$options={}),Object.keys(d).forEach(function(c){var _=d[c];typeof _=="string"&&(_={forwardTo:_}),_.name||(_.name=c),f.$options[_.name]=_,"initialValue"in _&&(f["$"+_.name]=_.initialValue)}),r.implement(f,o),this},s.prototype.resetOptions=function(f){Object.keys(f.$options).forEach(function(h){var d=f.$options[h];"value"in d&&f.setOption(h,d.value)})},s.prototype.setDefaultValue=function(f,h,d){if(!f){for(f in this.$defaultOptions)if(this.$defaultOptions[f][h])break;if(!this.$defaultOptions[f][h])return!1}var c=this.$defaultOptions[f]||(this.$defaultOptions[f]={});c[h]&&(c.forwardTo?this.setDefaultValue(c.forwardTo,h,d):c[h].value=d)},s.prototype.setDefaultValues=function(f,h){Object.keys(h).forEach(function(d){this.setDefaultValue(f,d,h[d])},this)},s.prototype.setMessages=function(f){u=f},s.prototype.nls=function(f,h){u&&!u[f]&&l("No message found for '"+f+"' in the provided messages, falling back to default English message.");var d=u&&u[f]||f;return h&&(d=d.replace(/\$(\$|[\d]+)/g,function(c,_){return _=="$"?"$":h[_]})),d},s}();i.prototype.warn=l,i.prototype.reportError=a,r.implement(i.prototype,p),t.AppConfig=i});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){"no use strict";var r=e("./lib/lang"),p=e("./lib/net"),a=e("./lib/dom"),o=e("./lib/app_config").AppConfig;n.exports=t=new o;var l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(f){if(!l.hasOwnProperty(f))throw new Error("Unknown config key: "+f);return l[f]},t.set=function(f,h){if(l.hasOwnProperty(f))l[f]=h;else if(this.setDefaultValue("",f,h)==!1)throw new Error("Unknown config key: "+f);f=="useStrictCSP"&&a.useStrictCSP(h)},t.all=function(){return r.copyObject(l)},t.$modes={},t.moduleUrl=function(f,h){if(l.$moduleUrls[f])return l.$moduleUrls[f];var d=f.split("/");h=h||d[d.length-2]||"";var c=h=="snippets"?"/":"-",_=d[d.length-1];if(h=="worker"&&c=="-"){var m=new RegExp("^"+h+"[\\-_]|[\\-_]"+h+"$","g");_=_.replace(m,"")}(!_||_==h)&&d.length>1&&(_=d[d.length-2]);var v=l[h+"Path"];return v==null?v=l.basePath:c=="/"&&(h=c=""),v&&v.slice(-1)!="/"&&(v+="/"),v+h+c+_+this.get("suffix")},t.setModuleUrl=function(f,h){return l.$moduleUrls[f]=h};var u=function(f,h){if(f==="ace/theme/textmate"||f==="./theme/textmate")return h(null,e("./theme/textmate"));if(i)return i(f,h);console.error("loader is not configured")},i;t.setLoader=function(f){i=f},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(f,h){var d;if(Array.isArray(f))var c=f[0],_=f[1];else if(typeof f=="string")var _=f;var m=function(v){if(v&&!t.$loading[_])return h&&h(v);if(t.$loading[_]||(t.$loading[_]=[]),t.$loading[_].push(h),!(t.$loading[_].length>1)){var y=function(){u(_,function(C,S){S&&(t.$loaded[_]=S),t._emit("load.module",{name:_,module:S});var D=t.$loading[_];t.$loading[_]=null,D.forEach(function(g){g&&g(S)})})};if(!t.get("packaged"))return y();p.loadScript(t.moduleUrl(_,c),y),s()}};if(t.dynamicModules[_])t.dynamicModules[_]().then(function(v){v.default?m(v.default):m(v)});else{try{d=this.$require(_)}catch{}m(d||t.$loaded[_])}},t.$require=function(f){if(typeof n.require=="function"){var h="require";return n[h](f)}},t.setModuleLoader=function(f,h){t.dynamicModules[f]=h};var s=function(){!l.basePath&&!l.workerPath&&!l.modePath&&!l.themePath&&!Object.keys(l.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),s=function(){})};t.version="1.32.3"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var r=e("./config");r.setLoader(function(l,u){e([l],function(i){u(null,i)})});var p=function(){return this||typeof window<"u"&&window}();n.exports=function(l){r.init=a,r.$require=e,l.require=e,typeof define=="function"&&(l.define=define)},a(!0);function a(l){if(!(!p||!p.document)){r.set("packaged",l||e.packaged||n.packaged||p.define&&define.packaged);var u={},i="",s=document.currentScript||document._currentScript,f=s&&s.ownerDocument||document;s&&s.src&&(i=s.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var h=f.getElementsByTagName("script"),d=0;d<h.length;d++){var c=h[d],_=c.src||c.getAttribute("src");if(_){for(var m=c.attributes,v=0,y=m.length;v<y;v++){var C=m[v];C.name.indexOf("data-ace-")===0&&(u[o(C.name.replace(/^data-ace-/,""))]=C.value)}var S=_.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(i=S[1])}}i&&(u.base=u.base||i,u.packaged=!0),u.basePath=u.base,u.workerPath=u.workerPath||u.base,u.modePath=u.modePath||u.base,u.themePath=u.themePath||u.base,delete u.base;for(var D in u)typeof u[D]<"u"&&r.set(D,u[D])}}function o(l){return l.replace(/-(.)/g,function(u,i){return i.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var r=function(){function p(a,o,l,u){this.start={row:a,column:o},this.end={row:l,column:u}}return p.prototype.isEqual=function(a){return this.start.row===a.start.row&&this.end.row===a.end.row&&this.start.column===a.start.column&&this.end.column===a.end.column},p.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},p.prototype.contains=function(a,o){return this.compare(a,o)==0},p.prototype.compareRange=function(a){var o,l=a.end,u=a.start;return o=this.compare(l.row,l.column),o==1?(o=this.compare(u.row,u.column),o==1?2:o==0?1:0):o==-1?-2:(o=this.compare(u.row,u.column),o==-1?-1:o==1?42:0)},p.prototype.comparePoint=function(a){return this.compare(a.row,a.column)},p.prototype.containsRange=function(a){return this.comparePoint(a.start)==0&&this.comparePoint(a.end)==0},p.prototype.intersects=function(a){var o=this.compareRange(a);return o==-1||o==0||o==1},p.prototype.isEnd=function(a,o){return this.end.row==a&&this.end.column==o},p.prototype.isStart=function(a,o){return this.start.row==a&&this.start.column==o},p.prototype.setStart=function(a,o){typeof a=="object"?(this.start.column=a.column,this.start.row=a.row):(this.start.row=a,this.start.column=o)},p.prototype.setEnd=function(a,o){typeof a=="object"?(this.end.column=a.column,this.end.row=a.row):(this.end.row=a,this.end.column=o)},p.prototype.inside=function(a,o){return this.compare(a,o)==0?!(this.isEnd(a,o)||this.isStart(a,o)):!1},p.prototype.insideStart=function(a,o){return this.compare(a,o)==0?!this.isEnd(a,o):!1},p.prototype.insideEnd=function(a,o){return this.compare(a,o)==0?!this.isStart(a,o):!1},p.prototype.compare=function(a,o){return!this.isMultiLine()&&a===this.start.row?o<this.start.column?-1:o>this.end.column?1:0:a<this.start.row?-1:a>this.end.row?1:this.start.row===a?o>=this.start.column?0:-1:this.end.row===a?o<=this.end.column?0:1:0},p.prototype.compareStart=function(a,o){return this.start.row==a&&this.start.column==o?-1:this.compare(a,o)},p.prototype.compareEnd=function(a,o){return this.end.row==a&&this.end.column==o?1:this.compare(a,o)},p.prototype.compareInside=function(a,o){return this.end.row==a&&this.end.column==o?1:this.start.row==a&&this.start.column==o?-1:this.compare(a,o)},p.prototype.clipRows=function(a,o){if(this.end.row>o)var l={row:o+1,column:0};else if(this.end.row<a)var l={row:a,column:0};if(this.start.row>o)var u={row:o+1,column:0};else if(this.start.row<a)var u={row:a,column:0};return p.fromPoints(u||this.start,l||this.end)},p.prototype.extend=function(a,o){var l=this.compare(a,o);if(l==0)return this;if(l==-1)var u={row:a,column:o};else var i={row:a,column:o};return p.fromPoints(u||this.start,i||this.end)},p.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},p.prototype.isMultiLine=function(){return this.start.row!==this.end.row},p.prototype.clone=function(){return p.fromPoints(this.start,this.end)},p.prototype.collapseRows=function(){return this.end.column==0?new p(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new p(this.start.row,0,this.end.row,0)},p.prototype.toScreenRange=function(a){var o=a.documentToScreenPosition(this.start),l=a.documentToScreenPosition(this.end);return new p(o.row,o.column,l.row,l.column)},p.prototype.moveBy=function(a,o){this.start.row+=a,this.start.column+=o,this.end.row+=a,this.end.column+=o},p}();r.fromPoints=function(p,a){return new r(p.row,p.column,a.row,a.column)},r.comparePoints=function(p,a){return p.row-a.row||p.column-a.column},t.Range=r});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./oop"),p=function(){var a={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};a.PRINTABLE_KEYS[173]="-";var o,l;for(l in a.FUNCTION_KEYS)o=a.FUNCTION_KEYS[l].toLowerCase(),a[o]=parseInt(l,10);for(l in a.PRINTABLE_KEYS)o=a.PRINTABLE_KEYS[l].toLowerCase(),a[o]=parseInt(l,10);return r.mixin(a,a.MODIFIER_KEYS),r.mixin(a,a.PRINTABLE_KEYS),r.mixin(a,a.FUNCTION_KEYS),a.enter=a.return,a.escape=a.esc,a.del=a.delete,function(){for(var u=["cmd","ctrl","alt","shift"],i=Math.pow(2,u.length);i--;)a.KEY_MODS[i]=u.filter(function(s){return i&a.KEY_MODS[s]}).join("-")+"-"}(),a.KEY_MODS[0]="",a.KEY_MODS[-1]="input-",a}();r.mixin(t,p),t.default=t,t.keyCodeToString=function(a){var o=p[a];return typeof o!="string"&&(o=String.fromCharCode(a)),o.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("./keys"),p=e("./useragent"),a=null,o=0,l;function u(){l=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return l={passive:!1},!0}})}catch{}}function i(){return l==null&&u(),l}function s(v,y,C){this.elem=v,this.type=y,this.callback=C}s.prototype.destroy=function(){h(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var f=t.addListener=function(v,y,C,S){v.addEventListener(y,C,i()),S&&S.$toDestroy.push(new s(v,y,C))},h=t.removeListener=function(v,y,C){v.removeEventListener(y,C,i())};t.stopEvent=function(v){return t.stopPropagation(v),t.preventDefault(v),!1},t.stopPropagation=function(v){v.stopPropagation&&v.stopPropagation()},t.preventDefault=function(v){v.preventDefault&&v.preventDefault()},t.getButton=function(v){return v.type=="dblclick"?0:v.type=="contextmenu"||p.isMac&&v.ctrlKey&&!v.altKey&&!v.shiftKey?2:v.button},t.capture=function(v,y,C){var S=v&&v.ownerDocument||document;function D(g){y&&y(g),C&&C(g),h(S,"mousemove",y),h(S,"mouseup",D),h(S,"dragstart",D)}return f(S,"mousemove",y),f(S,"mouseup",D),f(S,"dragstart",D),D},t.addMouseWheelListener=function(v,y,C){f(v,"wheel",function(S){var D=.15,g=S.deltaX||0,b=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=g*D,S.wheelY=b*D;break;case S.DOM_DELTA_LINE:var x=15;S.wheelX=g*x,S.wheelY=b*x;break;case S.DOM_DELTA_PAGE:var E=150;S.wheelX=g*E,S.wheelY=b*E;break}y(S)},C)},t.addMultiMouseDownListener=function(v,y,C,S,D){var g=0,b,x,E,T={2:"dblclick",3:"tripleclick",4:"quadclick"};function M(w){if(t.getButton(w)!==0?g=0:w.detail>1?(g++,g>4&&(g=1)):g=1,p.isIE){var F=Math.abs(w.clientX-b)>5||Math.abs(w.clientY-x)>5;(!E||F)&&(g=1),E&&clearTimeout(E),E=setTimeout(function(){E=null},y[g-1]||600),g==1&&(b=w.clientX,x=w.clientY)}if(w._clicks=g,C[S]("mousedown",w),g>4)g=0;else if(g>1)return C[S](T[g],w)}Array.isArray(v)||(v=[v]),v.forEach(function(w){f(w,"mousedown",M,D)})};var d=function(v){return 0|(v.ctrlKey?1:0)|(v.altKey?2:0)|(v.shiftKey?4:0)|(v.metaKey?8:0)};t.getModifierString=function(v){return r.KEY_MODS[d(v)]};function c(v,y,C){var S=d(y);if(!p.isMac&&a){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(S|=8),a.altGr)if((3&S)!=3)a.altGr=0;else return;if(C===18||C===17){var D="location"in y?y.location:y.keyLocation;if(C===17&&D===1)a[C]==1&&(o=y.timeStamp);else if(C===18&&S===3&&D===2){var g=y.timeStamp-o;g<50&&(a.altGr=!0)}}}if(C in r.MODIFIER_KEYS&&(C=-1),!S&&C===13){var D="location"in y?y.location:y.keyLocation;if(D===3&&(v(y,S,-C),y.defaultPrevented))return}if(p.isChromeOS&&S&8){if(v(y,S,C),y.defaultPrevented)return;S&=-9}return!S&&!(C in r.FUNCTION_KEYS)&&!(C in r.PRINTABLE_KEYS)?!1:v(y,S,C)}t.addCommandKeyListener=function(v,y,C){var S=null;f(v,"keydown",function(D){a[D.keyCode]=(a[D.keyCode]||0)+1;var g=c(y,D,D.keyCode);return S=D.defaultPrevented,g},C),f(v,"keypress",function(D){S&&(D.ctrlKey||D.altKey||D.shiftKey||D.metaKey)&&(t.stopEvent(D),S=null)},C),f(v,"keyup",function(D){a[D.keyCode]=null},C),a||(_(),f(window,"focus",_))};function _(){a=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!p.isOldIE){var m=1;t.nextTick=function(v,y){y=y||window;var C="zero-timeout-message-"+m++,S=function(D){D.data==C&&(t.stopPropagation(D),h(y,"message",S),v())};f(y,"message",S),y.postMessage(C,"*")}}t.$idleBlocked=!1,t.onIdle=function(v,y){return setTimeout(function C(){t.$idleBlocked?setTimeout(C,100):v()},y)},t.$idleBlockId=null,t.blockIdle=function(v){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},v||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(v){setTimeout(v,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var r;n.exports={lineMode:!1,pasteCancelled:function(){return r&&r>Date.now()-50?!0:r=!1},cancel:function(){r=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var r=e("../lib/event"),p=e("../config").nls,a=e("../lib/useragent"),o=e("../lib/dom"),l=e("../lib/lang"),u=e("../clipboard"),i=a.isChrome<18,s=a.isIE,f=a.isChrome>63,h=400,d=e("../lib/keys"),c=d.KEY_MODS,_=a.isIOS,m=_?/\s/:/\n/,v=a.isMobile,y;y=function(C,S){var D=o.createElement("textarea");D.className="ace_text-input",D.setAttribute("wrap","off"),D.setAttribute("autocorrect","off"),D.setAttribute("autocapitalize","off"),D.setAttribute("spellcheck","false"),D.style.opacity="0",C.insertBefore(D,C.firstChild);var g=!1,b=!1,x=!1,E=!1,T="";v||(D.style.fontSize="1px");var M=!1,w=!1,F="",L=0,R=0,A=0,I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,H=0;try{var P=document.activeElement===D}catch{}this.setNumberOfExtraLines=function(j){if(I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,j<0){H=0;return}H=j},this.setAriaOptions=function(j){if(j.activeDescendant?(D.setAttribute("aria-haspopup","true"),D.setAttribute("aria-autocomplete",j.inline?"both":"list"),D.setAttribute("aria-activedescendant",j.activeDescendant)):(D.setAttribute("aria-haspopup","false"),D.setAttribute("aria-autocomplete","both"),D.removeAttribute("aria-activedescendant")),j.role&&D.setAttribute("role",j.role),j.setLabel&&(D.setAttribute("aria-roledescription",p("editor")),S.session)){var ie=S.session.selection.cursor.row;D.setAttribute("aria-label",p("Cursor at row $0",[ie+1]))}},this.setAriaOptions({role:"textbox"}),r.addListener(D,"blur",function(j){w||(S.onBlur(j),P=!1)},S),r.addListener(D,"focus",function(j){if(!w){if(P=!0,a.isEdge)try{if(!document.hasFocus())return}catch{}S.onFocus(j),a.isEdge?setTimeout(G):G()}},S),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:S.renderer.enableKeyboardAccessibility}),T||f||this.$focusScroll=="browser")return D.focus({preventScroll:!0});var j=D.style.top;D.style.position="fixed",D.style.top="0px";try{var ie=D.getBoundingClientRect().top!=0}catch{return}var he=[];if(ie)for(var ze=D.parentElement;ze&&ze.nodeType==1;)he.push(ze),ze.setAttribute("ace_nocontext","true"),!ze.parentElement&&ze.getRootNode?ze=ze.getRootNode().host:ze=ze.parentElement;D.focus({preventScroll:!0}),ie&&he.forEach(function(at){at.removeAttribute("ace_nocontext")}),setTimeout(function(){D.style.position="",D.style.top=="0px"&&(D.style.top=j)},0)},this.blur=function(){D.blur()},this.isFocused=function(){return P},S.on("beforeEndOperation",function(){var j=S.curOp,ie=j&&j.command&&j.command.name;if(ie!="insertstring"){var he=ie&&(j.docChanged||j.selectionChanged);x&&he&&(F=D.value="",Rt()),G()}});var q=function(j,ie){for(var he=ie,ze=1;ze<=j-I&&ze<2*H+1;ze++)he+=S.session.getLine(j-ze).length+1;return he},G=_?function(j){if(!(!P||g&&!j||E)){j||(j="");var ie=`
 ab`+j+`cde fg
`;ie!=D.value&&(D.value=F=ie);var he=4,ze=4+(j.length||(S.selection.isEmpty()?0:1));(L!=he||R!=ze)&&D.setSelectionRange(he,ze),L=he,R=ze}}:function(){if(!(x||E)&&!(!P&&!W)){x=!0;var j=0,ie=0,he="";if(S.session){var ze=S.selection,at=ze.getRange(),gt=ze.cursor.row;gt===$+1?(I=$+1,$=I+2*H):gt===I-1?($=I-1,I=$-2*H):(gt<I-1||gt>$+1)&&(I=gt>H?gt-H:0,$=gt>H?gt+H:2*H);for(var Ge=[],$t=I;$t<=$;$t++)Ge.push(S.session.getLine($t));if(he=Ge.join(`
`),j=q(at.start.row,at.start.column),ie=q(at.end.row,at.end.column),at.start.row<I){var tn=S.session.getLine(I-1);j=at.start.row<I-1?0:j,ie+=tn.length+1,he=tn+`
`+he}else if(at.end.row>$){var Ot=S.session.getLine($+1);ie=at.end.row>$+1?Ot.length:at.end.column,ie+=he.length+1,he=he+`
`+Ot}else v&&gt>0&&(he=`
`+he,ie+=1,j+=1);he.length>h&&(j<h&&ie<h?he=he.slice(0,h):(he=`
`,j==ie?j=ie=0:(j=0,ie=1)));var er=he+`

`;er!=F&&(D.value=F=er,L=R=er.length)}if(W&&(L=D.selectionStart,R=D.selectionEnd),R!=ie||L!=j||D.selectionEnd!=R)try{D.setSelectionRange(j,ie),L=j,R=ie}catch{}x=!1}};this.resetSelection=G,P&&S.onFocus();var B=function(j){return j.selectionStart===0&&j.selectionEnd>=F.length&&j.value===F&&F&&j.selectionEnd!==R},Q=function(j){x||(g?g=!1:B(D)?(S.selectAll(),G()):v&&D.selectionStart!=L&&G())},O=null;this.setInputHandler=function(j){O=j},this.getInputHandler=function(){return O};var W=!1,U=function(j,ie){if(W&&(W=!1),b)return G(),j&&S.onPaste(j),b=!1,"";for(var he=D.selectionStart,ze=D.selectionEnd,at=L,gt=F.length-R,Ge=j,$t=j.length-he,tn=j.length-ze,Ot=0;at>0&&F[Ot]==j[Ot];)Ot++,at--;for(Ge=Ge.slice(Ot),Ot=1;gt>0&&F.length-Ot>L-1&&F[F.length-Ot]==j[j.length-Ot];)Ot++,gt--;$t-=Ot-1,tn-=Ot-1;var er=Ge.length-Ot+1;if(er<0&&(at=-er,er=0),Ge=Ge.slice(0,er),!ie&&!Ge&&!$t&&!at&&!gt&&!tn)return"";E=!0;var Cu=!1;return a.isAndroid&&Ge==". "&&(Ge="  ",Cu=!0),Ge&&!at&&!gt&&!$t&&!tn||M?S.onTextInput(Ge):S.onTextInput(Ge,{extendLeft:at,extendRight:gt,restoreStart:$t,restoreEnd:tn}),E=!1,F=j,L=he,R=ze,A=tn,Cu?`
`:Ge},k=function(j){if(x)return xe();if(j&&j.inputType){if(j.inputType=="historyUndo")return S.execCommand("undo");if(j.inputType=="historyRedo")return S.execCommand("redo")}var ie=D.value,he=U(ie,!0);(ie.length>h+100||m.test(he)||v&&L<1&&L==R)&&G()},te=function(j,ie,he){var ze=j.clipboardData||window.clipboardData;if(!(!ze||i)){var at=s||he?"Text":"text/plain";try{return ie?ze.setData(at,ie)!==!1:ze.getData(at)}catch(gt){if(!he)return te(gt,ie,!0)}}},J=function(j,ie){var he=S.getCopyText();if(!he)return r.preventDefault(j);te(j,he)?(_&&(G(he),g=he,setTimeout(function(){g=!1},10)),ie?S.onCut():S.onCopy(),r.preventDefault(j)):(g=!0,D.value=he,D.select(),setTimeout(function(){g=!1,G(),ie?S.onCut():S.onCopy()}))},ye=function(j){J(j,!0)},Ae=function(j){J(j,!1)},we=function(j){var ie=te(j);u.pasteCancelled()||(typeof ie=="string"?(ie&&S.onPaste(ie,j),a.isIE&&setTimeout(G),r.preventDefault(j)):(D.value="",b=!0))};r.addCommandKeyListener(D,S.onCommandKey.bind(S),S),r.addListener(D,"select",Q,S),r.addListener(D,"input",k,S),r.addListener(D,"cut",ye,S),r.addListener(D,"copy",Ae,S),r.addListener(D,"paste",we,S),(!("oncut"in D)||!("oncopy"in D)||!("onpaste"in D))&&r.addListener(C,"keydown",function(j){if(!(a.isMac&&!j.metaKey||!j.ctrlKey))switch(j.keyCode){case 67:Ae(j);break;case 86:we(j);break;case 88:ye(j);break}},S);var ce=function(j){if(!(x||!S.onCompositionStart||S.$readOnly)&&(x={},!M)){j.data&&(x.useTextareaForIME=!1),setTimeout(xe,0),S._signal("compositionStart"),S.on("mousedown",un);var ie=S.getSelectionRange();ie.end.row=ie.start.row,ie.end.column=ie.start.column,x.markerRange=ie,x.selectionStart=L,S.onCompositionStart(x),x.useTextareaForIME?(F=D.value="",L=0,R=0):(D.msGetInputContext&&(x.context=D.msGetInputContext()),D.getInputContext&&(x.context=D.getInputContext()))}},xe=function(){if(!(!x||!S.onCompositionUpdate||S.$readOnly)){if(M)return un();if(x.useTextareaForIME)S.onCompositionUpdate(D.value);else{var j=D.value;U(j),x.markerRange&&(x.context&&(x.markerRange.start.column=x.selectionStart=x.context.compositionStartOffset),x.markerRange.end.column=x.markerRange.start.column+R-x.selectionStart+A)}}},Rt=function(j){!S.onCompositionEnd||S.$readOnly||(x=!1,S.onCompositionEnd(),S.off("mousedown",un),j&&k())};function un(){w=!0,D.blur(),D.focus(),w=!1}var Jt=l.delayedCall(xe,50).schedule.bind(null,null);function tt(j){j.keyCode==27&&D.value.length<D.selectionStart&&(x||(F=D.value),L=R=-1,G()),Jt()}r.addListener(D,"compositionstart",ce,S),r.addListener(D,"compositionupdate",xe,S),r.addListener(D,"keyup",tt,S),r.addListener(D,"keydown",Jt,S),r.addListener(D,"compositionend",Rt,S),this.getElement=function(){return D},this.setCommandMode=function(j){M=j,D.readOnly=!1},this.setReadOnly=function(j){M||(D.readOnly=j)},this.setCopyWithEmptySelection=function(j){},this.onContextMenu=function(j){W=!0,G(),S._emit("nativecontextmenu",{target:S,domEvent:j}),this.moveToMouse(j,!0)},this.moveToMouse=function(j,ie){T||(T=D.style.cssText),D.style.cssText=(ie?"z-index:100000;":"")+(a.isIE?"opacity:0.1;":"")+"text-indent: -"+(L+R)*S.renderer.characterWidth*.5+"px;";var he=S.container.getBoundingClientRect(),ze=o.computedStyle(S.container),at=he.top+(parseInt(ze.borderTopWidth)||0),gt=he.left+(parseInt(he.borderLeftWidth)||0),Ge=he.bottom-at-D.clientHeight-2,$t=function(tn){o.translate(D,tn.clientX-gt-2,Math.min(tn.clientY-at-2,Ge))};$t(j),j.type=="mousedown"&&(S.renderer.$isMousePressed=!0,clearTimeout(le),a.isWin&&r.capture(S.container,$t,ve))},this.onContextMenuClose=ve;var le;function ve(){clearTimeout(le),le=setTimeout(function(){T&&(D.style.cssText=T,T=""),S.renderer.$isMousePressed=!1,S.renderer.$keepTextAreaAtCursor&&S.renderer.$moveTextAreaToCursor()},0)}var fe=function(j){S.textInput.onContextMenu(j),ve()};r.addListener(D,"mouseup",fe,S),r.addListener(D,"mousedown",function(j){j.preventDefault(),ve()},S),r.addListener(S.renderer.scroller,"contextmenu",fe,S),r.addListener(D,"contextmenu",fe,S),_&&ae(C,S,D);function ae(j,ie,he){var ze=null,at=!1;he.addEventListener("keydown",function(Ge){ze&&clearTimeout(ze),at=!0},!0),he.addEventListener("keyup",function(Ge){ze=setTimeout(function(){at=!1},100)},!0);var gt=function(Ge){if(document.activeElement===he&&!(at||x||ie.$mouseHandler.isMousePressed)&&!g){var $t=he.selectionStart,tn=he.selectionEnd,Ot=null,er=0;if($t==0?Ot=d.up:$t==1?Ot=d.home:tn>R&&F[tn]==`
`?Ot=d.end:$t<L&&F[$t-1]==" "?(Ot=d.left,er=c.option):$t<L||$t==L&&R!=L&&$t==tn?Ot=d.left:tn>R&&F.slice(0,tn).split(`
`).length>2?Ot=d.down:tn>R&&F[tn-1]==" "?(Ot=d.right,er=c.option):(tn>R||tn==R&&R!=L&&$t==tn)&&(Ot=d.right),$t!==tn&&(er|=c.shift),Ot){var Cu=ie.onCommandKey({},er,Ot);if(!Cu&&ie.commands){Ot=d.keyCodeToString(Ot);var BM=ie.commands.findKeyCommand(er,Ot);BM&&ie.execCommand(BM)}L=$t,R=tn,G("")}}};document.addEventListener("selectionchange",gt),ie.on("destroy",function(){document.removeEventListener("selectionchange",gt)})}this.destroy=function(){D.parentElement&&D.parentElement.removeChild(D)}},t.TextInput=y,t.$setUserAgentForTests=function(C,S){v=C,_=S}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("../lib/useragent"),p=0,a=550,o=function(){function i(s){s.$clickSelection=null;var f=s.editor;f.setDefaultHandler("mousedown",this.onMouseDown.bind(s)),f.setDefaultHandler("dblclick",this.onDoubleClick.bind(s)),f.setDefaultHandler("tripleclick",this.onTripleClick.bind(s)),f.setDefaultHandler("quadclick",this.onQuadClick.bind(s)),f.setDefaultHandler("mousewheel",this.onMouseWheel.bind(s));var h=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];h.forEach(function(d){s[d]=this[d]},this),s.selectByLines=this.extendSelectionBy.bind(s,"getLineRange"),s.selectByWords=this.extendSelectionBy.bind(s,"getWordRange")}return i.prototype.onMouseDown=function(s){var f=s.inSelection(),h=s.getDocumentPosition();this.mousedownEvent=s;var d=this.editor,c=s.getButton();if(c!==0){var _=d.getSelectionRange(),m=_.isEmpty();(m||c==1)&&d.selection.moveToPosition(h),c==2&&(d.textInput.onContextMenu(s.domEvent),r.isMozilla||s.preventDefault());return}if(this.mousedownEvent.time=Date.now(),f&&!d.isFocused()&&(d.focus(),this.$focusTimeout&&!this.$clickSelection&&!d.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(s);return}return this.captureMouse(s),this.startSelect(h,s.domEvent._clicks>1),s.preventDefault()},i.prototype.startSelect=function(s,f){s=s||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var h=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?h.selection.selectToPosition(s):f||h.selection.moveToPosition(s),f||this.select(),h.setStyle("ace_selecting"),this.setState("select"))},i.prototype.select=function(){var s,f=this.editor,h=f.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var d=this.$clickSelection.comparePoint(h);if(d==-1)s=this.$clickSelection.end;else if(d==1)s=this.$clickSelection.start;else{var c=u(this.$clickSelection,h);h=c.cursor,s=c.anchor}f.selection.setSelectionAnchor(s.row,s.column)}f.selection.selectToPosition(h),f.renderer.scrollCursorIntoView()},i.prototype.extendSelectionBy=function(s){var f,h=this.editor,d=h.renderer.screenToTextCoordinates(this.x,this.y),c=h.selection[s](d.row,d.column);if(this.$clickSelection){var _=this.$clickSelection.comparePoint(c.start),m=this.$clickSelection.comparePoint(c.end);if(_==-1&&m<=0)f=this.$clickSelection.end,(c.end.row!=d.row||c.end.column!=d.column)&&(d=c.start);else if(m==1&&_>=0)f=this.$clickSelection.start,(c.start.row!=d.row||c.start.column!=d.column)&&(d=c.end);else if(_==-1&&m==1)d=c.end,f=c.start;else{var v=u(this.$clickSelection,d);d=v.cursor,f=v.anchor}h.selection.setSelectionAnchor(f.row,f.column)}h.selection.selectToPosition(d),h.renderer.scrollCursorIntoView()},i.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},i.prototype.focusWait=function(){var s=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),f=Date.now();(s>p||f-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},i.prototype.onDoubleClick=function(s){var f=s.getDocumentPosition(),h=this.editor,d=h.session,c=d.getBracketRange(f);c?(c.isEmpty()&&(c.start.column--,c.end.column++),this.setState("select")):(c=h.selection.getWordRange(f.row,f.column),this.setState("selectByWords")),this.$clickSelection=c,this.select()},i.prototype.onTripleClick=function(s){var f=s.getDocumentPosition(),h=this.editor;this.setState("selectByLines");var d=h.getSelectionRange();d.isMultiLine()&&d.contains(f.row,f.column)?(this.$clickSelection=h.selection.getLineRange(d.start.row),this.$clickSelection.end=h.selection.getLineRange(d.end.row).end):this.$clickSelection=h.selection.getLineRange(f.row),this.select()},i.prototype.onQuadClick=function(s){var f=this.editor;f.selectAll(),this.$clickSelection=f.getSelectionRange(),this.setState("selectAll")},i.prototype.onMouseWheel=function(s){if(!s.getAccelKey()){s.getShiftKey()&&s.wheelY&&!s.wheelX&&(s.wheelX=s.wheelY,s.wheelY=0);var f=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var h=this.$lastScroll,d=s.domEvent.timeStamp,c=d-h.t,_=c?s.wheelX/c:h.vx,m=c?s.wheelY/c:h.vy;c<a&&(_=(_+h.vx)/2,m=(m+h.vy)/2);var v=Math.abs(_/m),y=!1;if(v>=1&&f.renderer.isScrollableBy(s.wheelX*s.speed,0)&&(y=!0),v<=1&&f.renderer.isScrollableBy(0,s.wheelY*s.speed)&&(y=!0),y)h.allowed=d;else if(d-h.allowed<a){var C=Math.abs(_)<=1.5*Math.abs(h.vx)&&Math.abs(m)<=1.5*Math.abs(h.vy);C?(y=!0,h.allowed=d):h.allowed=0}if(h.t=d,h.vx=_,h.vy=m,y)return f.renderer.scrollBy(s.wheelX*s.speed,s.wheelY*s.speed),s.stop()}},i}();o.prototype.selectEnd=o.prototype.selectByLinesEnd,o.prototype.selectAllEnd=o.prototype.selectByLinesEnd,o.prototype.selectByWordsEnd=o.prototype.selectByLinesEnd,t.DefaultHandlers=o;function l(i,s,f,h){return Math.sqrt(Math.pow(f-i,2)+Math.pow(h-s,2))}function u(i,s){if(i.start.row==i.end.row)var f=2*s.column-i.start.column-i.end.column;else if(i.start.row==i.end.row-1&&!i.start.column&&!i.end.column)var f=s.column-4;else var f=2*s.row-i.start.row-i.end.row;return f<0?{cursor:i.start,anchor:i.end}:{cursor:i.end,anchor:i.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,n){t.preventParentScroll=function(p){p.stopPropagation();var a=p.currentTarget,o=a.scrollHeight>a.clientHeight;o||p.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,n){"use strict";var r=this&&this.__extends||function(){var c=function(_,m){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(v[C]=y[C])},c(_,m)};return function(_,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");c(_,m);function v(){this.constructor=_}_.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}(),p=this&&this.__values||function(c){var _=typeof Symbol=="function"&&Symbol.iterator,m=_&&c[_],v=0;if(m)return m.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&v>=c.length&&(c=void 0),{value:c&&c[v++],done:!c}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},a=e("./lib/dom"),o=e("./lib/event"),l=e("./range").Range,u=e("./lib/scroll").preventParentScroll,i="ace_tooltip",s=function(){function c(_){this.isOpen=!1,this.$element=null,this.$parentNode=_}return c.prototype.$init=function(){return this.$element=a.createElement("div"),this.$element.className=i,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},c.prototype.getElement=function(){return this.$element||this.$init()},c.prototype.setText=function(_){this.getElement().textContent=_},c.prototype.setHtml=function(_){this.getElement().innerHTML=_},c.prototype.setPosition=function(_,m){this.getElement().style.left=_+"px",this.getElement().style.top=m+"px"},c.prototype.setClassName=function(_){a.addCssClass(this.getElement(),_)},c.prototype.setTheme=function(_){this.$element.className=i+" "+(_.isDark?"ace_dark ":"")+(_.cssClass||"")},c.prototype.show=function(_,m,v){_!=null&&this.setText(_),m!=null&&v!=null&&this.setPosition(m,v),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},c.prototype.hide=function(_){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=i,this.isOpen=!1)},c.prototype.getHeight=function(){return this.getElement().offsetHeight},c.prototype.getWidth=function(){return this.getElement().offsetWidth},c.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},c}(),f=function(){function c(){this.popups=[]}return c.prototype.addPopup=function(_){this.popups.push(_),this.updatePopups()},c.prototype.removePopup=function(_){var m=this.popups.indexOf(_);m!==-1&&(this.popups.splice(m,1),this.updatePopups())},c.prototype.updatePopups=function(){var _,m,v,y;this.popups.sort(function(M,w){return w.priority-M.priority});var C=[];try{for(var S=p(this.popups),D=S.next();!D.done;D=S.next()){var g=D.value,b=!0;try{for(var x=(v=void 0,p(C)),E=x.next();!E.done;E=x.next()){var T=E.value;if(this.doPopupsOverlap(T,g)){b=!1;break}}}catch(M){v={error:M}}finally{try{E&&!E.done&&(y=x.return)&&y.call(x)}finally{if(v)throw v.error}}b?C.push(g):g.hide()}}catch(M){_={error:M}}finally{try{D&&!D.done&&(m=S.return)&&m.call(S)}finally{if(_)throw _.error}}},c.prototype.doPopupsOverlap=function(_,m){var v=_.getElement().getBoundingClientRect(),y=m.getElement().getBoundingClientRect();return v.left<y.right&&v.right>y.left&&v.top<y.bottom&&v.bottom>y.top},c}(),h=new f;t.popupManager=h,t.Tooltip=s;var d=function(c){r(_,c);function _(m){m===void 0&&(m=document.body);var v=c.call(this,m)||this;v.timeout=void 0,v.lastT=0,v.idleTime=350,v.lastEvent=void 0,v.onMouseOut=v.onMouseOut.bind(v),v.onMouseMove=v.onMouseMove.bind(v),v.waitForHover=v.waitForHover.bind(v),v.hide=v.hide.bind(v);var y=v.getElement();return y.style.whiteSpace="pre-wrap",y.style.pointerEvents="auto",y.addEventListener("mouseout",v.onMouseOut),y.tabIndex=-1,y.addEventListener("blur",function(){y.contains(document.activeElement)||this.hide()}.bind(v)),y.addEventListener("wheel",u),v}return _.prototype.addToEditor=function(m){m.on("mousemove",this.onMouseMove),m.on("mousedown",this.hide),m.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},_.prototype.removeFromEditor=function(m){m.off("mousemove",this.onMouseMove),m.off("mousedown",this.hide),m.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},_.prototype.onMouseMove=function(m,v){this.lastEvent=m,this.lastT=Date.now();var y=v.$mouseHandler.isMousePressed;if(this.isOpen){var C=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(C.row,C.column)||y||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||y||(this.lastEvent=m,this.timeout=setTimeout(this.waitForHover,this.idleTime))},_.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var m=Date.now()-this.lastT;if(this.idleTime-m>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-m);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},_.prototype.isOutsideOfText=function(m){var v=m.editor,y=m.getDocumentPosition(),C=v.session.getLine(y.row);if(y.column==C.length){var S=v.renderer.pixelToScreenCoordinates(m.clientX,m.clientY),D=v.session.documentToScreenPosition(y.row,y.column);if(D.column!=S.column||D.row!=S.row)return!0}return!1},_.prototype.setDataProvider=function(m){this.$gatherData=m},_.prototype.showForRange=function(m,v,y,C){var S=10;if(!(C&&C!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var D=m.renderer;this.isOpen||(h.addPopup(this),this.$registerCloseEvents(),this.setTheme(D.theme)),this.isOpen=!0,this.addMarker(v,m.session),this.range=l.fromPoints(v.start,v.end);var g=D.textToScreenCoordinates(v.start.row,v.start.column),b=D.scroller.getBoundingClientRect();g.pageX<b.left&&(g.pageX=b.left);var x=this.getElement();x.innerHTML="",x.appendChild(y),x.style.maxHeight="",x.style.display="block";var E=x.clientHeight,T=x.clientWidth,M=window.innerHeight-g.pageY-D.lineHeight,w=!0;g.pageY-E<0&&g.pageY<M&&(w=!1),x.style.maxHeight=(w?g.pageY:M)-S+"px",x.style.top=w?"":g.pageY+D.lineHeight+"px",x.style.bottom=w?window.innerHeight-g.pageY+"px":"",x.style.left=Math.min(g.pageX,window.innerWidth-T-S)+"px"}},_.prototype.addMarker=function(m,v){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=v,this.marker=v&&v.addMarker(m,"ace_highlight-marker","text")},_.prototype.hide=function(m){!m&&document.activeElement==this.getElement()||m&&m.target&&(m.type!="keydown"||m.ctrlKey||m.metaKey)&&this.$element.contains(m.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,h.removePopup(this)))},_.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},_.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},_.prototype.onMouseOut=function(m){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!m.relatedTarget||this.getElement().contains(m.relatedTarget)||m&&m.currentTarget.contains(m.relatedTarget)||m.relatedTarget.classList.contains("ace_content")||this.hide())},_}(s);t.HoverTooltip=d});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,t,n){"use strict";var r=this&&this.__extends||function(){var f=function(h,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(c[m]=_[m])},f(h,d)};return function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(h,d);function c(){this.constructor=h}h.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),p=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,d=h&&f[h],c=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&c>=f.length&&(f=void 0),{value:f&&f[c++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},a=e("../lib/dom"),o=e("../lib/event"),l=e("../tooltip").Tooltip,u=e("../config").nls;function i(f){var h=f.editor,d=h.renderer.$gutterLayer,c=new s(h);f.editor.setDefaultHandler("guttermousedown",function(S){if(!(!h.isFocused()||S.getButton()!=0)){var D=d.getRegion(S);if(D!="foldWidgets"){var g=S.getDocumentPosition().row,b=h.session.selection;if(S.getShiftKey())b.selectTo(g,0);else{if(S.domEvent.detail==2)return h.selectAll(),S.preventDefault();f.$clickSelection=h.selection.getLineRange(g)}return f.setState("selectByLines"),f.captureMouse(S),S.preventDefault()}}});var _,m;function v(){var S=m.getDocumentPosition().row,D=h.session.getLength();if(S==D){var g=h.renderer.pixelToScreenCoordinates(0,m.y).row,b=m.$pos;if(g>h.session.documentToScreenRow(b.row,b.column))return y()}if(c.showTooltip(S),!!c.isOpen)if(h.on("mousewheel",y),f.$tooltipFollowsMouse)C(m);else{var x=m.getGutterRow(),E=d.$lines.get(x);if(E){var T=E.element.querySelector(".ace_gutter_annotation"),M=T.getBoundingClientRect(),w=c.getElement().style;w.left=M.right+"px",w.top=M.bottom+"px"}else C(m)}}function y(){_&&(_=clearTimeout(_)),c.isOpen&&(c.hideTooltip(),h.off("mousewheel",y))}function C(S){c.setPosition(S.x,S.y)}f.editor.setDefaultHandler("guttermousemove",function(S){var D=S.domEvent.target||S.domEvent.srcElement;if(a.hasCssClass(D,"ace_fold-widget"))return y();c.isOpen&&f.$tooltipFollowsMouse&&C(S),m=S,!_&&(_=setTimeout(function(){_=null,m&&!f.isMousePressed?v():y()},50))}),o.addListener(h.renderer.$gutter,"mouseout",function(S){m=null,!(!c.isOpen||_)&&(_=setTimeout(function(){_=null,y()},50))},h),h.on("changeSession",y),h.on("input",y)}t.GutterHandler=i;var s=function(f){r(h,f);function h(d){var c=f.call(this,d.container)||this;return c.editor=d,c}return h.prototype.setPosition=function(d,c){var _=window.innerWidth||document.documentElement.clientWidth,m=window.innerHeight||document.documentElement.clientHeight,v=this.getWidth(),y=this.getHeight();d+=15,c+=15,d+v>_&&(d-=d+v-_),c+y>m&&(c-=20+y),l.prototype.setPosition.call(this,d,c)},Object.defineProperty(h,"annotationLabels",{get:function(){return{error:{singular:u("error"),plural:u("errors")},warning:{singular:u("warning"),plural:u("warnings")},info:{singular:u("information message"),plural:u("information messages")}}},enumerable:!1,configurable:!0}),h.prototype.showTooltip=function(d){var c=this.editor.renderer.$gutterLayer,_=c.$annotations[d],m;_?m={text:Array.from(_.text),type:Array.from(_.type)}:m={text:[],type:[]};var v=c.session.getFoldLine(d);if(v&&c.$showFoldedAnnotations){for(var y={error:[],warning:[],info:[]},C,S=d+1;S<=v.end.row;S++)if(c.$annotations[S])for(var D=0;D<c.$annotations[S].text.length;D++){var g=c.$annotations[S].type[D];if(y[g].push(c.$annotations[S].text[D]),g==="error"){C="error_fold";continue}if(g==="warning"){C="warning_fold";continue}}if(C==="error_fold"||C==="warning_fold"){var b="".concat(h.annotationsToSummaryString(y)," in folded code.");m.text.push(b),m.type.push(C)}}if(m.text.length===0)return this.hide();for(var x={error:[],warning:[],info:[]},E=c.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",S=0;S<m.text.length;S++){var T="<span class='ace_".concat(m.type[S]," ").concat(E,"' aria-label='").concat(h.annotationLabels[m.type[S].replace("_fold","")].singular,"' role=img> </span> ").concat(m.text[S]);x[m.type[S].replace("_fold","")].push(T)}var M=[].concat(x.error,x.warning,x.info).join("<br>");this.setHtml(M),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},h.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},h.annotationsToSummaryString=function(d){var c,_,m=[],v=["error","warning","info"];try{for(var y=p(v),C=y.next();!C.done;C=y.next()){var S=C.value;if(d[S].length){var D=d[S].length===1?h.annotationLabels[S].singular:h.annotationLabels[S].plural;m.push("".concat(d[S].length," ").concat(D))}}}catch(g){c={error:g}}finally{try{C&&!C.done&&(_=y.return)&&_.call(y)}finally{if(c)throw c.error}}return m.join(", ")},h}(l);t.GutterTooltip=s});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("../lib/event"),p=e("../lib/useragent"),a=function(){function o(l,u){this.speed,this.wheelX,this.wheelY,this.domEvent=l,this.editor=u,this.x=this.clientX=l.clientX,this.y=this.clientY=l.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return o.prototype.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},o.prototype.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},o.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},o.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},o.prototype.getGutterRow=function(){var l=this.getDocumentPosition().row,u=this.editor.session.documentToScreenRow(l,0),i=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return u-i},o.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var l=this.editor,u=l.getSelectionRange();if(u.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=u.contains(i.row,i.column)}return this.$inSelection},o.prototype.getButton=function(){return r.getButton(this.domEvent)},o.prototype.getShiftKey=function(){return this.domEvent.shiftKey},o.prototype.getAccelKey=function(){return p.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},o}();t.MouseEvent=a});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("../lib/dom"),p=e("../lib/event"),a=e("../lib/useragent"),o=200,l=200,u=5;function i(f){var h=f.editor,d=r.createElement("div");d.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",d.textContent="\xA0";var c=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];c.forEach(function(q){f[q]=this[q]},this),h.on("mousedown",this.onMouseDown.bind(f));var _=h.container,m,v,y,C,S,D,g=0,b,x,E,T,M;this.onDragStart=function(q){if(this.cancelDrag||!_.draggable){var G=this;return setTimeout(function(){G.startSelect(),G.captureMouse(q)},0),q.preventDefault()}S=h.getSelectionRange();var B=q.dataTransfer;B.effectAllowed=h.getReadOnly()?"copy":"copyMove",h.container.appendChild(d),B.setDragImage&&B.setDragImage(d,0,0),setTimeout(function(){h.container.removeChild(d)}),B.clearData(),B.setData("Text",h.session.getTextRange()),x=!0,this.setState("drag")},this.onDragEnd=function(q){if(_.draggable=!1,x=!1,this.setState(null),!h.getReadOnly()){var G=q.dataTransfer.dropEffect;!b&&G=="move"&&h.session.remove(h.getSelectionRange()),h.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(q){if(!(h.getReadOnly()||!H(q.dataTransfer)))return v=q.clientX,y=q.clientY,m||R(),g++,q.dataTransfer.dropEffect=b=P(q),p.preventDefault(q)},this.onDragOver=function(q){if(!(h.getReadOnly()||!H(q.dataTransfer)))return v=q.clientX,y=q.clientY,m||(R(),g++),I!==null&&(I=null),q.dataTransfer.dropEffect=b=P(q),p.preventDefault(q)},this.onDragLeave=function(q){if(g--,g<=0&&m)return A(),b=null,p.preventDefault(q)},this.onDrop=function(q){if(D){var G=q.dataTransfer;if(x)switch(b){case"move":S.contains(D.row,D.column)?S={start:D,end:D}:S=h.moveText(S,D);break;case"copy":S=h.moveText(S,D,!0);break}else{var B=G.getData("Text");S={start:D,end:h.session.insert(D,B)},h.focus(),b=null}return A(),p.preventDefault(q)}},p.addListener(_,"dragstart",this.onDragStart.bind(f),h),p.addListener(_,"dragend",this.onDragEnd.bind(f),h),p.addListener(_,"dragenter",this.onDragEnter.bind(f),h),p.addListener(_,"dragover",this.onDragOver.bind(f),h),p.addListener(_,"dragleave",this.onDragLeave.bind(f),h),p.addListener(_,"drop",this.onDrop.bind(f),h);function w(q,G){var B=Date.now(),Q=!G||q.row!=G.row,O=!G||q.column!=G.column;if(!T||Q||O)h.moveCursorToPosition(q),T=B,M={x:v,y};else{var W=s(M.x,M.y,v,y);W>u?T=null:B-T>=l&&(h.renderer.scrollCursorIntoView(),T=null)}}function F(q,G){var B=Date.now(),Q=h.renderer.layerConfig.lineHeight,O=h.renderer.layerConfig.characterWidth,W=h.renderer.scroller.getBoundingClientRect(),U={x:{left:v-W.left,right:W.right-v},y:{top:y-W.top,bottom:W.bottom-y}},k=Math.min(U.x.left,U.x.right),te=Math.min(U.y.top,U.y.bottom),J={row:q.row,column:q.column};k/O<=2&&(J.column+=U.x.left<U.x.right?-3:2),te/Q<=1&&(J.row+=U.y.top<U.y.bottom?-1:1);var ye=q.row!=J.row,Ae=q.column!=J.column,we=!G||q.row!=G.row;ye||Ae&&!we?E?B-E>=o&&h.renderer.scrollCursorIntoView(J):E=B:E=null}function L(){var q=D;D=h.renderer.screenToTextCoordinates(v,y),w(D,q),F(D,q)}function R(){S=h.selection.toOrientedRange(),m=h.session.addMarker(S,"ace_selection",h.getSelectionStyle()),h.clearSelection(),h.isFocused()&&h.renderer.$cursorLayer.setBlinking(!1),clearInterval(C),L(),C=setInterval(L,20),g=0,p.addListener(document,"mousemove",$)}function A(){clearInterval(C),h.session.removeMarker(m),m=null,h.selection.fromOrientedRange(S),h.isFocused()&&!x&&h.$resetCursorStyle(),S=null,D=null,g=0,E=null,T=null,p.removeListener(document,"mousemove",$)}var I=null;function $(){I==null&&(I=setTimeout(function(){I!=null&&m&&A()},20))}function H(q){var G=q.types;return!G||Array.prototype.some.call(G,function(B){return B=="text/plain"||B=="Text"})}function P(q){var G=["copy","copymove","all","uninitialized"],B=["move","copymove","linkmove","all","uninitialized"],Q=a.isMac?q.altKey:q.ctrlKey,O="uninitialized";try{O=q.dataTransfer.effectAllowed.toLowerCase()}catch{}var W="none";return Q&&G.indexOf(O)>=0?W="copy":B.indexOf(O)>=0?W="move":G.indexOf(O)>=0&&(W="copy"),W}}(function(){this.dragWait=function(){var f=Date.now()-this.mousedownEvent.time;f>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var f=this.editor.container;f.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(f){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var f=this.editor,h=f.container;h.draggable=!0,f.renderer.$cursorLayer.setBlinking(!1),f.setStyle("ace_dragging");var d=a.isWin?"default":"move";f.renderer.setCursorStyle(d),this.setState("dragReady")},this.onMouseDrag=function(f){var h=this.editor.container;if(a.isIE&&this.state=="dragReady"){var d=s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);d>3&&h.dragDrop()}if(this.state==="dragWait"){var d=s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);d>0&&(h.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(f){if(this.$dragEnabled){this.mousedownEvent=f;var h=this.editor,d=f.inSelection(),c=f.getButton(),_=f.domEvent.detail||1;if(_===1&&c===0&&d){if(f.editor.inMultiSelectMode&&(f.getAccelKey()||f.getShiftKey()))return;this.mousedownEvent.time=Date.now();var m=f.domEvent.target||f.domEvent.srcElement;if("unselectable"in m&&(m.unselectable="on"),h.getDragDelay()){if(a.isWebKit){this.cancelDrag=!0;var v=h.container;v.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(f,this.onMouseDrag.bind(this)),f.defaultPrevented=!0}}}}).call(i.prototype);function s(f,h,d,c){return Math.sqrt(Math.pow(d-f,2)+Math.pow(c-h,2))}t.DragdropHandler=i});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./mouse_event").MouseEvent,p=e("../lib/event"),a=e("../lib/dom");t.addTouchListeners=function(o,l){var u="scroll",i,s,f,h,d,c,_=0,m,v=0,y=0,C=0,S,D;function g(){var w=window.navigator&&window.navigator.clipboard,F=!1,L=function(){var A=l.getCopyText(),I=l.session.getUndoManager().hasUndo();D.replaceChild(a.buildDom(F?["span",!A&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],A&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],A&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],w&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],I&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),D.firstChild)},R=function(A){var I=A.target.getAttribute("action");if(I=="more"||!F)return F=!F,L();I=="paste"?w.readText().then(function($){l.execCommand(I,$)}):I&&((I=="cut"||I=="copy")&&(w?w.writeText(l.getCopyText()):document.execCommand("copy")),l.execCommand(I)),D.firstChild.style.display="none",F=!1,I!="openCommandPalette"&&l.focus()};D=a.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(A){u="menu",A.stopPropagation(),A.preventDefault(),l.textInput.focus()},ontouchend:function(A){A.stopPropagation(),A.preventDefault(),R(A)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],l.container)}function b(){D||g();var w=l.selection.cursor,F=l.renderer.textToScreenCoordinates(w.row,w.column),L=l.renderer.textToScreenCoordinates(0,0).pageX,R=l.renderer.scrollLeft,A=l.container.getBoundingClientRect();D.style.top=F.pageY-A.top-3+"px",F.pageX-A.left<A.width-70?(D.style.left="",D.style.right="10px"):(D.style.right="",D.style.left=L+R-A.left+"px"),D.style.display="",D.firstChild.style.display="none",l.on("input",x)}function x(w){D&&(D.style.display="none"),l.off("input",x)}function E(){d=null,clearTimeout(d);var w=l.selection.getRange(),F=w.contains(m.row,m.column);(w.isEmpty()||!F)&&(l.selection.moveToPosition(m),l.selection.selectWord()),u="wait",b()}function T(){d=null,clearTimeout(d),l.selection.moveToPosition(m);var w=v>=2?l.selection.getLineRange(m.row):l.session.getBracketRange(m);w&&!w.isEmpty()?l.selection.setRange(w):l.selection.selectWord(),u="wait"}p.addListener(o,"contextmenu",function(w){if(S){var F=l.textInput.getElement();F.focus()}},l),p.addListener(o,"touchstart",function(w){var F=w.touches;if(d||F.length>1){clearTimeout(d),d=null,f=-1,u="zoom";return}S=l.$mouseHandler.isMousePressed=!0;var L=l.renderer.layerConfig.lineHeight,R=l.renderer.layerConfig.lineHeight,A=w.timeStamp;h=A;var I=F[0],$=I.clientX,H=I.clientY;Math.abs(i-$)+Math.abs(s-H)>L&&(f=-1),i=w.clientX=$,s=w.clientY=H,y=C=0;var P=new r(w,l);if(m=P.getDocumentPosition(),A-f<500&&F.length==1&&!_)v++,w.preventDefault(),w.button=0,T();else{v=0;var q=l.selection.cursor,G=l.selection.isEmpty()?q:l.selection.anchor,B=l.renderer.$cursorLayer.getPixelPosition(q,!0),Q=l.renderer.$cursorLayer.getPixelPosition(G,!0),O=l.renderer.scroller.getBoundingClientRect(),W=l.renderer.layerConfig.offset,U=l.renderer.scrollLeft,k=function(ye,Ae){return ye=ye/R,Ae=Ae/L-.75,ye*ye+Ae*Ae};if(w.clientX<O.left){u="zoom";return}var te=k(w.clientX-O.left-B.left+U,w.clientY-O.top-B.top+W),J=k(w.clientX-O.left-Q.left+U,w.clientY-O.top-Q.top+W);te<3.5&&J<3.5&&(u=te>J?"cursor":"anchor"),J<3.5?u="anchor":te<3.5?u="cursor":u="scroll",d=setTimeout(E,450)}f=A},l),p.addListener(o,"touchend",function(w){S=l.$mouseHandler.isMousePressed=!1,c&&clearInterval(c),u=="zoom"?(u="",_=0):d?(l.selection.moveToPosition(m),_=0,b()):u=="scroll"?(M(),x()):b(),clearTimeout(d),d=null},l),p.addListener(o,"touchmove",function(w){d&&(clearTimeout(d),d=null);var F=w.touches;if(!(F.length>1||u=="zoom")){var L=F[0],R=i-L.clientX,A=s-L.clientY;if(u=="wait")if(R*R+A*A>4)u="cursor";else return w.preventDefault();i=L.clientX,s=L.clientY,w.clientX=L.clientX,w.clientY=L.clientY;var I=w.timeStamp,$=I-h;if(h=I,u=="scroll"){var H=new r(w,l);H.speed=1,H.wheelX=R,H.wheelY=A,10*Math.abs(R)<Math.abs(A)&&(R=0),10*Math.abs(A)<Math.abs(R)&&(A=0),$!=0&&(y=R/$,C=A/$),l._emit("mousewheel",H),H.propagationStopped||(y=C=0)}else{var P=new r(w,l),q=P.getDocumentPosition();u=="cursor"?l.selection.moveCursorToPosition(q):u=="anchor"&&l.selection.setSelectionAnchor(q.row,q.column),l.renderer.scrollCursorIntoView(q),w.preventDefault()}}},l);function M(){_+=60,c=setInterval(function(){_--<=0&&(clearInterval(c),c=null),Math.abs(y)<.01&&(y=0),Math.abs(C)<.01&&(C=0),_<20&&(y=.9*y),_<20&&(C=.9*C);var w=l.session.getScrollTop();l.renderer.scrollBy(10*y,10*C),w==l.session.getScrollTop()&&(_=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var r=e("../lib/event"),p=e("../lib/useragent"),a=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,l=e("./mouse_event").MouseEvent,u=e("./dragdrop_handler").DragdropHandler,i=e("./touch_handler").addTouchListeners,s=e("../config"),f=function(){function h(d){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var c=this;this.editor=d,new a(this),new o(this),new u(this);var _=function(y){var C=!document.hasFocus||!document.hasFocus()||!d.isFocused()&&document.activeElement==(d.textInput&&d.textInput.getElement());C&&window.focus(),d.focus(),setTimeout(function(){d.isFocused()||d.focus()})},m=d.renderer.getMouseEventTarget();r.addListener(m,"click",this.onMouseEvent.bind(this,"click"),d),r.addListener(m,"mousemove",this.onMouseMove.bind(this,"mousemove"),d),r.addMultiMouseDownListener([m,d.renderer.scrollBarV&&d.renderer.scrollBarV.inner,d.renderer.scrollBarH&&d.renderer.scrollBarH.inner,d.textInput&&d.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",d),r.addMouseWheelListener(d.container,this.onMouseWheel.bind(this,"mousewheel"),d),i(d.container,d);var v=d.renderer.$gutter;r.addListener(v,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),d),r.addListener(v,"click",this.onMouseEvent.bind(this,"gutterclick"),d),r.addListener(v,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),d),r.addListener(v,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),d),r.addListener(m,"mousedown",_,d),r.addListener(v,"mousedown",_,d),p.isIE&&d.renderer.scrollBarV&&(r.addListener(d.renderer.scrollBarV.element,"mousedown",_,d),r.addListener(d.renderer.scrollBarH.element,"mousedown",_,d)),d.on("mousemove",function(y){if(!(c.state||c.$dragDelay||!c.$dragEnabled)){var C=d.renderer.screenToTextCoordinates(y.x,y.y),S=d.session.selection.getRange(),D=d.renderer;!S.isEmpty()&&S.insideStart(C.row,C.column)?D.setCursorStyle("default"):D.setCursorStyle("")}},d)}return h.prototype.onMouseEvent=function(d,c){this.editor.session&&this.editor._emit(d,new l(c,this.editor))},h.prototype.onMouseMove=function(d,c){var _=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!_||!_.length||this.editor._emit(d,new l(c,this.editor))},h.prototype.onMouseWheel=function(d,c){var _=new l(c,this.editor);_.speed=this.$scrollSpeed*2,_.wheelX=c.wheelX,_.wheelY=c.wheelY,this.editor._emit(d,_)},h.prototype.setState=function(d){this.state=d},h.prototype.captureMouse=function(d,c){this.x=d.x,this.y=d.y,this.isMousePressed=!0;var _=this.editor,m=this.editor.renderer;m.$isMousePressed=!0;var v=this,y=function(b){if(b){if(p.isWebKit&&!b.which&&v.releaseMouse)return v.releaseMouse();v.x=b.clientX,v.y=b.clientY,c&&c(b),v.mouseEvent=new l(b,v.editor),v.$mouseMoved=!0}},C=function(b){_.off("beforeEndOperation",D),clearInterval(g),_.session&&S(),v[v.state+"End"]&&v[v.state+"End"](b),v.state="",v.isMousePressed=m.$isMousePressed=!1,m.$keepTextAreaAtCursor&&m.$moveTextAreaToCursor(),v.$onCaptureMouseMove=v.releaseMouse=null,b&&v.onMouseEvent("mouseup",b),_.endOperation()},S=function(){v[v.state]&&v[v.state](),v.$mouseMoved=!1};if(p.isOldIE&&d.domEvent.type=="dblclick")return setTimeout(function(){C(d)});var D=function(b){v.releaseMouse&&_.curOp.command.name&&_.curOp.selectionChanged&&(v[v.state+"End"]&&v[v.state+"End"](),v.state="",v.releaseMouse())};_.on("beforeEndOperation",D),_.startOperation({command:{name:"mouse"}}),v.$onCaptureMouseMove=y,v.releaseMouse=r.capture(this.editor.container,y,C);var g=setInterval(S,20)},h.prototype.cancelContextMenu=function(){var d=function(c){c&&c.domEvent&&c.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",d),c&&c.domEvent&&r.stopEvent(c.domEvent))}.bind(this);setTimeout(d,10),this.editor.on("nativecontextmenu",d)},h.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},h}();f.prototype.releaseMouse=null,s.defineOptions(f.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:p.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=f});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom"),p=function(){function a(o){o.on("click",function(l){var u=l.getDocumentPosition(),i=o.session,s=i.getFoldAt(u.row,u.column,1);s&&(l.getAccelKey()?i.removeFold(s):i.expandFold(s),l.stop());var f=l.domEvent&&l.domEvent.target;f&&r.hasCssClass(f,"ace_inline_button")&&r.hasCssClass(f,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),o.renderer.scrollCursorIntoView())}),o.on("gutterclick",function(l){var u=o.renderer.$gutterLayer.getRegion(l);if(u=="foldWidgets"){var i=l.getDocumentPosition().row,s=o.session;s.foldWidgets&&s.foldWidgets[i]&&o.session.onFoldWidgetClick(i,l),o.isFocused()||o.focus(),l.stop()}}),o.on("gutterdblclick",function(l){var u=o.renderer.$gutterLayer.getRegion(l);if(u=="foldWidgets"){var i=l.getDocumentPosition().row,s=o.session,f=s.getParentFoldRangeData(i,!0),h=f.range||f.firstRange;if(h){i=h.start.row;var d=s.getFoldAt(i,s.getLine(i).length,1);d?s.removeFold(d):(s.addFold("...",h),o.renderer.scrollCursorIntoView({row:h.start.row,column:0}))}l.stop()}})}return a}();t.FoldHandler=p});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var r=e("../lib/keys"),p=e("../lib/event"),a=function(){function o(l){this.$editor=l,this.$data={editor:l},this.$handlers=[],this.setDefaultHandler(l.commands)}return o.prototype.setDefaultHandler=function(l){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=l,this.addKeyboardHandler(l,0)},o.prototype.setKeyboardHandler=function(l){var u=this.$handlers;if(u[u.length-1]!=l){for(;u[u.length-1]&&u[u.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(u[u.length-1]);this.addKeyboardHandler(l,1)}},o.prototype.addKeyboardHandler=function(l,u){if(l){typeof l=="function"&&!l.handleKeyboard&&(l.handleKeyboard=l);var i=this.$handlers.indexOf(l);i!=-1&&this.$handlers.splice(i,1),u==null?this.$handlers.push(l):this.$handlers.splice(u,0,l),i==-1&&l.attach&&l.attach(this.$editor)}},o.prototype.removeKeyboardHandler=function(l){var u=this.$handlers.indexOf(l);return u==-1?!1:(this.$handlers.splice(u,1),l.detach&&l.detach(this.$editor),!0)},o.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},o.prototype.getStatusText=function(){var l=this.$data,u=l.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(u,l)||""}).filter(Boolean).join(" ")},o.prototype.$callKeyboardHandlers=function(l,u,i,s){for(var f,h=!1,d=this.$editor.commands,c=this.$handlers.length;c--&&(f=this.$handlers[c].handleKeyboard(this.$data,l,u,i,s),!(!(!f||!f.command)&&(f.command=="null"?h=!0:h=d.exec(f.command,this.$editor,f.args,s),h&&s&&l!=-1&&f.passEvent!=!0&&f.command.passEvent!=!0&&p.stopEvent(s),h))););return!h&&l==-1&&(f={command:"insertstring"},h=d.exec("insertstring",this.$editor,u)),h&&this.$editor._signal&&this.$editor._signal("keyboardActivity",f),h},o.prototype.onCommandKey=function(l,u,i){var s=r.keyCodeToString(i);return this.$callKeyboardHandlers(u,s,i,l)},o.prototype.onTextInput=function(l){return this.$callKeyboardHandlers(-1,l)},o}();t.KeyBinding=a});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var r=["\u0621","\u0641"],p=["\u063A","\u064A"],a=0,o=0,l=!1,u=!1,i=!1,s=!1,f=!1,h=!1,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_=0,m=1,v=0,y=1,C=2,S=3,D=4,g=5,b=6,x=7,E=8,T=9,M=10,w=11,F=12,L=13,R=14,A=15,I=16,$=17,H=18,P=[H,H,H,H,H,H,H,H,H,b,g,b,E,g,H,H,H,H,H,H,H,H,H,H,H,H,H,H,g,g,g,b,E,D,D,w,w,w,D,D,D,D,D,M,T,M,T,T,C,C,C,C,C,C,C,C,C,C,T,D,D,D,D,D,D,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,D,D,D,D,D,D,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,D,D,D,D,H,H,H,H,H,H,g,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,T,D,w,w,w,w,D,D,D,D,v,D,D,H,D,D,w,w,C,C,D,v,D,D,D,C,v,D,D,D,D,D],q=[E,E,E,E,E,E,E,E,E,E,E,H,H,H,v,y,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E,g,L,R,A,I,$,T,w,w,w,w,w,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,T,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E];function G(U,k,te,J){var ye=a?c:d,Ae=null,we=null,ce=null,xe=0,Rt=null,un=null,Jt=-1,tt=null,le=null,ve=[];if(!J)for(tt=0,J=[];tt<te;tt++)J[tt]=O(U[tt]);for(o=a,l=!1,u=!1,i=!1,s=!1,le=0;le<te;le++){if(Ae=xe,ve[le]=we=Q(U,J,ve,le),xe=ye[Ae][we],Rt=xe&240,xe&=15,k[le]=ce=ye[xe][5],Rt>0)if(Rt==16){for(tt=Jt;tt<le;tt++)k[tt]=1;Jt=-1}else Jt=-1;if(un=ye[xe][6],un)Jt==-1&&(Jt=le);else if(Jt>-1){for(tt=Jt;tt<le;tt++)k[tt]=ce;Jt=-1}J[le]==g&&(k[le]=0),o|=ce}if(s){for(tt=0;tt<te;tt++)if(J[tt]==b){k[tt]=a;for(var fe=tt-1;fe>=0&&J[fe]==E;fe--)k[fe]=a}}}function B(U,k,te){if(!(o<U)){if(U==1&&a==m&&!i){te.reverse();return}for(var J=te.length,ye=0,Ae,we,ce,xe;ye<J;){if(k[ye]>=U){for(Ae=ye+1;Ae<J&&k[Ae]>=U;)Ae++;for(we=ye,ce=Ae-1;we<ce;we++,ce--)xe=te[we],te[we]=te[ce],te[ce]=xe;ye=Ae}ye++}}}function Q(U,k,te,J){var ye=k[J],Ae,we,ce,xe;switch(ye){case v:case y:l=!1;case D:case S:return ye;case C:return l?S:C;case x:return l=!0,u=!0,y;case E:return D;case T:return J<1||J+1>=k.length||(Ae=te[J-1])!=C&&Ae!=S||(we=k[J+1])!=C&&we!=S?D:(l&&(we=S),we==Ae?we:D);case M:return Ae=J>0?te[J-1]:g,Ae==C&&J+1<k.length&&k[J+1]==C?C:D;case w:if(J>0&&te[J-1]==C)return C;if(l)return D;for(xe=J+1,ce=k.length;xe<ce&&k[xe]==w;)xe++;return xe<ce&&k[xe]==C?C:D;case F:for(ce=k.length,xe=J+1;xe<ce&&k[xe]==F;)xe++;if(xe<ce){var Rt=U[J],un=Rt>=1425&&Rt<=2303||Rt==64286;if(Ae=k[xe],un&&(Ae==y||Ae==x))return y}return J<1||(Ae=k[J-1])==g?D:te[J-1];case g:return l=!1,i=!0,a;case b:return s=!0,D;case L:case R:case I:case $:case A:l=!1;case H:return D}}function O(U){var k=U.charCodeAt(0),te=k>>8;return te==0?k>191?v:P[k]:te==5?/[\u0591-\u05f4]/.test(U)?y:v:te==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(U)?F:/[\u0660-\u0669\u066b-\u066c]/.test(U)?S:k==1642?w:/[\u06f0-\u06f9]/.test(U)?C:x:te==32&&k<=8287?q[k&255]:te==254&&k>=65136?x:D}function W(U){return U>="\u064B"&&U<="\u0655"}t.L=v,t.R=y,t.EN=C,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(U,k,te){if(U.length<2)return{};var J=U.split(""),ye=new Array(J.length),Ae=new Array(J.length),we=[];a=te?m:_,G(J,we,J.length,k);for(var ce=0;ce<ye.length;ye[ce]=ce,ce++);B(2,we,ye),B(1,we,ye);for(var ce=0;ce<ye.length-1;ce++)k[ce]===S?we[ce]=t.AN:we[ce]===y&&(k[ce]>x&&k[ce]<L||k[ce]===D||k[ce]===H)?we[ce]=t.ON_R:ce>0&&J[ce-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(J[ce])&&(we[ce-1]=we[ce]=t.R_H,ce++);J[J.length-1]===t.DOT&&(we[J.length-1]=t.B),J[0]==="\u202B"&&(we[0]=t.RLE);for(var ce=0;ce<ye.length;ce++)Ae[ce]=we[ye[ce]];return{logicalFromVisual:ye,bidiLevels:Ae}},t.hasBidiCharacters=function(U,k){for(var te=!1,J=0;J<U.length;J++)k[J]=O(U.charAt(J)),!te&&(k[J]==y||k[J]==x||k[J]==S)&&(te=!0);return te},t.getVisualFromLogicalIdx=function(U,k){for(var te=0;te<k.logicalFromVisual.length;te++)if(k.logicalFromVisual[te]==U)return te;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var r=e("./lib/bidiutil"),p=e("./lib/lang"),a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,o=function(){function l(u){this.session=u,this.bidiMap={},this.currentRow=null,this.bidiUtil=r,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=a.test(u.getValue())}return l.prototype.isBidiRow=function(u,i,s){return this.seenBidi?(u!==this.currentRow&&(this.currentRow=u,this.updateRowLine(i,s),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},l.prototype.onChange=function(u){this.seenBidi?this.currentRow=null:u.action=="insert"&&a.test(u.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},l.prototype.getDocumentRow=function(){var u=0,i=this.session.$screenRowCache;if(i.length){var s=this.session.$getRowCacheIndex(i,this.currentRow);s>=0&&(u=this.session.$docRowCache[s])}return u},l.prototype.getSplitIndex=function(){var u=0,i=this.session.$screenRowCache;if(i.length)for(var s,f=this.session.$getRowCacheIndex(i,this.currentRow);this.currentRow-u>0&&(s=this.session.$getRowCacheIndex(i,this.currentRow-u-1),s===f);)f=s,u++;else u=this.currentRow;return u},l.prototype.updateRowLine=function(u,i){u===void 0&&(u=this.getDocumentRow());var s=u===this.session.getLength()-1,f=s?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(u),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var h=this.session.$wrapData[u];h&&(i===void 0&&(i=this.getSplitIndex()),i>0&&h.length?(this.wrapIndent=h.indent,this.wrapOffset=this.wrapIndent*this.charWidths[r.L],this.line=i<h.length?this.line.substring(h[i-1],h[i]):this.line.substring(h[h.length-1])):this.line=this.line.substring(0,h[i]),i==h.length&&(this.line+=this.showInvisibles?f:r.DOT))}else this.line+=this.showInvisibles?f:r.DOT;var d=this.session,c=0,_;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(m,v){return m==="	"||d.isFullWidth(m.charCodeAt(0))?(_=m==="	"?d.getScreenTabSize(v+c):2,c+=_-1,p.stringRepeat(r.DOT,_)):m}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==r.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},l.prototype.updateBidiMap=function(){var u=[];r.hasBidiCharacters(this.line,u)||this.isRtlDir?this.bidiMap=r.doBidiReorder(this.line,u,this.isRtlDir):this.bidiMap={}},l.prototype.markAsDirty=function(){this.currentRow=null},l.prototype.updateCharacterWidths=function(u){if(this.characterWidth!==u.$characterSize.width){this.fontMetrics=u;var i=this.characterWidth=u.$characterSize.width,s=u.$measureCharWidth("\u05D4");this.charWidths[r.L]=this.charWidths[r.EN]=this.charWidths[r.ON_R]=i,this.charWidths[r.R]=this.charWidths[r.AN]=s,this.charWidths[r.R_H]=s*.45,this.charWidths[r.B]=this.charWidths[r.RLE]=0,this.currentRow=null}},l.prototype.setShowInvisibles=function(u){this.showInvisibles=u,this.currentRow=null},l.prototype.setEolChar=function(u){this.EOL=u},l.prototype.setContentWidth=function(u){this.contentWidth=u},l.prototype.isRtlLine=function(u){return this.$isRtl?!0:u!=null?this.session.getLine(u).charAt(0)==this.RLE:this.isRtlDir},l.prototype.setRtlDirection=function(u,i){for(var s=u.getCursorPosition(),f=u.selection.getSelectionAnchor().row;f<=s.row;f++)!i&&u.session.getLine(f).charAt(0)===u.session.$bidiHandler.RLE?u.session.doc.removeInLine(f,0,1):i&&u.session.getLine(f).charAt(0)!==u.session.$bidiHandler.RLE&&u.session.doc.insert({column:0,row:f},u.session.$bidiHandler.RLE)},l.prototype.getPosLeft=function(u){u-=this.wrapIndent;var i=this.line.charAt(0)===this.RLE?1:0,s=u>i?this.session.getOverwrite()?u:u-1:i,f=r.getVisualFromLogicalIdx(s,this.bidiMap),h=this.bidiMap.bidiLevels,d=0;!this.session.getOverwrite()&&u<=i&&h[f]%2!==0&&f++;for(var c=0;c<f;c++)d+=this.charWidths[h[c]];return!this.session.getOverwrite()&&u>i&&h[f]%2===0&&(d+=this.charWidths[h[f]]),this.wrapIndent&&(d+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(d+=this.rtlLineOffset),d},l.prototype.getSelections=function(u,i){var s=this.bidiMap,f=s.bidiLevels,h,d=[],c=0,_=Math.min(u,i)-this.wrapIndent,m=Math.max(u,i)-this.wrapIndent,v=!1,y=!1,C=0;this.wrapIndent&&(c+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,D=0;D<f.length;D++)S=s.logicalFromVisual[D],h=f[D],v=S>=_&&S<m,v&&!y?C=c:!v&&y&&d.push({left:C,width:c-C}),c+=this.charWidths[h],y=v;if(v&&D===f.length&&d.push({left:C,width:c-C}),this.isRtlDir)for(var g=0;g<d.length;g++)d[g].left+=this.rtlLineOffset;return d},l.prototype.offsetToCol=function(s){this.isRtlDir&&(s-=this.rtlLineOffset);var i=0,s=Math.max(s,0),f=0,h=0,d=this.bidiMap.bidiLevels,c=this.charWidths[d[h]];for(this.wrapIndent&&(s-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);s>f+c/2;){if(f+=c,h===d.length-1){c=0;break}c=this.charWidths[d[++h]]}return h>0&&d[h-1]%2!==0&&d[h]%2===0?(s<f&&h--,i=this.bidiMap.logicalFromVisual[h]):h>0&&d[h-1]%2===0&&d[h]%2!==0?i=1+(s>f?this.bidiMap.logicalFromVisual[h]:this.bidiMap.logicalFromVisual[h-1]):this.isRtlDir&&h===d.length-1&&c===0&&d[h-1]%2===0||!this.isRtlDir&&h===0&&d[h]%2!==0?i=1+this.bidiMap.logicalFromVisual[h]:(h>0&&d[h-1]%2!==0&&c!==0&&h--,i=this.bidiMap.logicalFromVisual[h]),i===0&&this.isRtlDir&&i++,i+this.wrapIndent},l}();t.BidiHandler=o});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var r=e("./lib/oop"),p=e("./lib/lang"),a=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,l=function(){function u(i){this.session=i,this.doc=i.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var s=this;this.cursor.on("change",function(f){s.$cursorChanged=!0,s.$silent||s._emit("changeCursor"),!s.$isEmpty&&!s.$silent&&s._emit("changeSelection"),!s.$keepDesiredColumnOnChange&&f.old.column!=f.value.column&&(s.$desiredColumn=null)}),this.anchor.on("change",function(){s.$anchorChanged=!0,!s.$isEmpty&&!s.$silent&&s._emit("changeSelection")})}return u.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},u.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},u.prototype.getCursor=function(){return this.lead.getPosition()},u.prototype.setAnchor=function(i,s){this.$isEmpty=!1,this.anchor.setPosition(i,s)},u.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},u.prototype.getSelectionLead=function(){return this.lead.getPosition()},u.prototype.isBackwards=function(){var i=this.anchor,s=this.lead;return i.row>s.row||i.row==s.row&&i.column>s.column},u.prototype.getRange=function(){var i=this.anchor,s=this.lead;return this.$isEmpty?o.fromPoints(s,s):this.isBackwards()?o.fromPoints(s,i):o.fromPoints(i,s)},u.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},u.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},u.prototype.setRange=function(i,s){var f=s?i.end:i.start,h=s?i.start:i.end;this.$setSelection(f.row,f.column,h.row,h.column)},u.prototype.$setSelection=function(i,s,f,h){if(!this.$silent){var d=this.$isEmpty,c=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(i,s),this.cursor.setPosition(f,h),this.$isEmpty=!o.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||d!=this.$isEmpty||c)&&this._emit("changeSelection")}},u.prototype.$moveSelection=function(i){var s=this.lead;this.$isEmpty&&this.setSelectionAnchor(s.row,s.column),i.call(this)},u.prototype.selectTo=function(i,s){this.$moveSelection(function(){this.moveCursorTo(i,s)})},u.prototype.selectToPosition=function(i){this.$moveSelection(function(){this.moveCursorToPosition(i)})},u.prototype.moveTo=function(i,s){this.clearSelection(),this.moveCursorTo(i,s)},u.prototype.moveToPosition=function(i){this.clearSelection(),this.moveCursorToPosition(i)},u.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},u.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},u.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},u.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},u.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},u.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},u.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},u.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},u.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},u.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},u.prototype.getWordRange=function(i,s){if(typeof s>"u"){var f=i||this.lead;i=f.row,s=f.column}return this.session.getWordRange(i,s)},u.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},u.prototype.selectAWord=function(){var i=this.getCursor(),s=this.session.getAWordRange(i.row,i.column);this.setSelectionRange(s)},u.prototype.getLineRange=function(i,s){var f=typeof i=="number"?i:this.lead.row,h,d=this.session.getFoldLine(f);return d?(f=d.start.row,h=d.end.row):h=f,s===!0?new o(f,0,h,this.session.getLine(h).length):new o(f,0,h+1,0)},u.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},u.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},u.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},u.prototype.wouldMoveIntoSoftTab=function(i,s,f){var h=i.column,d=i.column+s;return f<0&&(h=i.column-s,d=i.column),this.session.isTabStop(i)&&this.doc.getLine(i.row).slice(h,d).split(" ").length-1==s},u.prototype.moveCursorLeft=function(){var i=this.lead.getPosition(),s;if(s=this.session.getFoldAt(i.row,i.column,-1))this.moveCursorTo(s.start.row,s.start.column);else if(i.column===0)i.row>0&&this.moveCursorTo(i.row-1,this.doc.getLine(i.row-1).length);else{var f=this.session.getTabSize();this.wouldMoveIntoSoftTab(i,f,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-f):this.moveCursorBy(0,-1)}},u.prototype.moveCursorRight=function(){var i=this.lead.getPosition(),s;if(s=this.session.getFoldAt(i.row,i.column,1))this.moveCursorTo(s.end.row,s.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var f=this.session.getTabSize(),i=this.lead;this.wouldMoveIntoSoftTab(i,f,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,f):this.moveCursorBy(0,1)}},u.prototype.moveCursorLineStart=function(){var i=this.lead.row,s=this.lead.column,f=this.session.documentToScreenRow(i,s),h=this.session.screenToDocumentPosition(f,0),d=this.session.getDisplayLine(i,null,h.row,h.column),c=d.match(/^\s*/);c[0].length!=s&&!this.session.$useEmacsStyleLineStart&&(h.column+=c[0].length),this.moveCursorToPosition(h)},u.prototype.moveCursorLineEnd=function(){var i=this.lead,s=this.session.getDocumentLastRowColumnPosition(i.row,i.column);if(this.lead.column==s.column){var f=this.session.getLine(s.row);if(s.column==f.length){var h=f.search(/\s+$/);h>0&&(s.column=h)}}this.moveCursorTo(s.row,s.column)},u.prototype.moveCursorFileEnd=function(){var i=this.doc.getLength()-1,s=this.doc.getLine(i).length;this.moveCursorTo(i,s)},u.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},u.prototype.moveCursorLongWordRight=function(){var i=this.lead.row,s=this.lead.column,f=this.doc.getLine(i),h=f.substring(s);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var d=this.session.getFoldAt(i,s,1);if(d){this.moveCursorTo(d.end.row,d.end.column);return}if(this.session.nonTokenRe.exec(h)&&(s+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,h=f.substring(s)),s>=f.length){this.moveCursorTo(i,f.length),this.moveCursorRight(),i<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(h)&&(s+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,s)},u.prototype.moveCursorLongWordLeft=function(){var i=this.lead.row,s=this.lead.column,f;if(f=this.session.getFoldAt(i,s,-1)){this.moveCursorTo(f.start.row,f.start.column);return}var h=this.session.getFoldStringAt(i,s,-1);h==null&&(h=this.doc.getLine(i).substring(0,s));var d=p.stringReverse(h);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(d)&&(s-=this.session.nonTokenRe.lastIndex,d=d.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),s<=0){this.moveCursorTo(i,0),this.moveCursorLeft(),i>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(d)&&(s-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,s)},u.prototype.$shortWordEndIndex=function(i){var s=0,f,h=/\s/,d=this.session.tokenRe;if(d.lastIndex=0,this.session.tokenRe.exec(i))s=this.session.tokenRe.lastIndex;else{for(;(f=i[s])&&h.test(f);)s++;if(s<1){for(d.lastIndex=0;(f=i[s])&&!d.test(f);)if(d.lastIndex=0,s++,h.test(f))if(s>2){s--;break}else{for(;(f=i[s])&&h.test(f);)s++;if(s>2)break}}}return d.lastIndex=0,s},u.prototype.moveCursorShortWordRight=function(){var i=this.lead.row,s=this.lead.column,f=this.doc.getLine(i),h=f.substring(s),d=this.session.getFoldAt(i,s,1);if(d)return this.moveCursorTo(d.end.row,d.end.column);if(s==f.length){var c=this.doc.getLength();do i++,h=this.doc.getLine(i);while(i<c&&/^\s*$/.test(h));/^\s+/.test(h)||(h=""),s=0}var _=this.$shortWordEndIndex(h);this.moveCursorTo(i,s+_)},u.prototype.moveCursorShortWordLeft=function(){var i=this.lead.row,s=this.lead.column,f;if(f=this.session.getFoldAt(i,s,-1))return this.moveCursorTo(f.start.row,f.start.column);var h=this.session.getLine(i).substring(0,s);if(s===0){do i--,h=this.doc.getLine(i);while(i>0&&/^\s*$/.test(h));s=h.length,/\s+$/.test(h)||(h="")}var d=p.stringReverse(h),c=this.$shortWordEndIndex(d);return this.moveCursorTo(i,s-c)},u.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},u.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},u.prototype.moveCursorBy=function(i,s){var f=this.session.documentToScreenPosition(this.lead.row,this.lead.column),h;if(s===0&&(i!==0&&(this.session.$bidiHandler.isBidiRow(f.row,this.lead.row)?(h=this.session.$bidiHandler.getPosLeft(f.column),f.column=Math.round(h/this.session.$bidiHandler.charWidths[0])):h=f.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?f.column=this.$desiredColumn:this.$desiredColumn=f.column),i!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var d=this.session.lineWidgets[this.lead.row];i<0?i-=d.rowsAbove||0:i>0&&(i+=d.rowCount-(d.rowsAbove||0))}var c=this.session.screenToDocumentPosition(f.row+i,f.column,h);i!==0&&s===0&&c.row===this.lead.row&&(c.column,this.lead.column),this.moveCursorTo(c.row,c.column+s,s===0)},u.prototype.moveCursorToPosition=function(i){this.moveCursorTo(i.row,i.column)},u.prototype.moveCursorTo=function(i,s,f){var h=this.session.getFoldAt(i,s,1);h&&(i=h.start.row,s=h.start.column),this.$keepDesiredColumnOnChange=!0;var d=this.session.getLine(i);/[\uDC00-\uDFFF]/.test(d.charAt(s))&&d.charAt(s-1)&&(this.lead.row==i&&this.lead.column==s+1?s=s-1:s=s+1),this.lead.setPosition(i,s),this.$keepDesiredColumnOnChange=!1,f||(this.$desiredColumn=null)},u.prototype.moveCursorToScreen=function(i,s,f){var h=this.session.screenToDocumentPosition(i,s);this.moveCursorTo(h.row,h.column,f)},u.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},u.prototype.fromOrientedRange=function(i){this.setSelectionRange(i,i.cursor==i.start),this.$desiredColumn=i.desiredColumn||this.$desiredColumn},u.prototype.toOrientedRange=function(i){var s=this.getRange();return i?(i.start.column=s.start.column,i.start.row=s.start.row,i.end.column=s.end.column,i.end.row=s.end.row):i=s,i.cursor=this.isBackwards()?i.start:i.end,i.desiredColumn=this.$desiredColumn,i},u.prototype.getRangeOfMovements=function(i){var s=this.getCursor();try{i(this);var f=this.getCursor();return o.fromPoints(s,f)}catch{return o.fromPoints(s,s)}finally{this.moveCursorToPosition(s)}},u.prototype.toJSON=function(){if(this.rangeCount)var i=this.ranges.map(function(s){var f=s.clone();return f.isBackwards=s.cursor==s.start,f});else{var i=this.getRange();i.isBackwards=this.isBackwards()}return i},u.prototype.fromJSON=function(i){if(i.start==null)if(this.rangeList&&i.length>1){this.toSingleRange(i[0]);for(var s=i.length;s--;){var f=o.fromPoints(i[s].start,i[s].end);i[s].isBackwards&&(f.cursor=f.start),this.addRange(f,!0)}return}else i=i[0];this.rangeList&&this.toSingleRange(i),this.setSelectionRange(i,i.isBackwards)},u.prototype.isEqual=function(i){if((i.length||this.rangeCount)&&i.length!=this.rangeCount)return!1;if(!i.length||!this.ranges)return this.getRange().isEqual(i);for(var s=this.ranges.length;s--;)if(!this.ranges[s].isEqual(i[s]))return!1;return!0},u}();l.prototype.setSelectionAnchor=l.prototype.setAnchor,l.prototype.getSelectionAnchor=l.prototype.getAnchor,l.prototype.setSelectionRange=l.prototype.setRange,r.implement(l.prototype,a),t.Selection=l});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,n){"use strict";var r=e("./lib/report_error").reportError,p=2e3,a=function(){function o(l){this.splitRegex,this.states=l,this.regExps={},this.matchMappings={};for(var u in this.states){for(var i=this.states[u],s=[],f=0,h=this.matchMappings[u]={defaultToken:"text"},d="g",c=[],_=0;_<i.length;_++){var m=i[_];if(m.defaultToken&&(h.defaultToken=m.defaultToken),m.caseInsensitive&&d.indexOf("i")===-1&&(d+="i"),m.unicode&&d.indexOf("u")===-1&&(d+="u"),m.regex!=null){m.regex instanceof RegExp&&(m.regex=m.regex.toString().slice(1,-1));var v=m.regex,y=new RegExp("(?:("+v+")|(.))").exec("a").length-2;Array.isArray(m.token)?m.token.length==1||y==1?m.token=m.token[0]:y-1!=m.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:m,groupCount:y-1}),m.token=m.token[0]):(m.tokenArray=m.token,m.token=null,m.onMatch=this.$arrayTokens):typeof m.token=="function"&&!m.onMatch&&(y>1?m.onMatch=this.$applyToken:m.onMatch=m.token),y>1&&(/\\\d/.test(m.regex)?v=m.regex.replace(/\\([0-9]+)/g,function(C,S){return"\\"+(parseInt(S,10)+f+1)}):(y=1,v=this.removeCapturingGroups(m.regex)),!m.splitRegex&&typeof m.token!="string"&&c.push(m)),h[f]=_,f+=y,s.push(v),m.onMatch||(m.onMatch=null)}}s.length||(h[0]=0,s.push("$")),c.forEach(function(C){C.splitRegex=this.createSplitterRegexp(C.regex,d)},this),this.regExps[u]=new RegExp("("+s.join(")|(")+")|($)",d)}}return o.prototype.$setMaxTokenCount=function(l){p=l|0},o.prototype.$applyToken=function(l){var u=this.splitRegex.exec(l).slice(1),i=this.token.apply(this,u);if(typeof i=="string")return[{type:i,value:l}];for(var s=[],f=0,h=i.length;f<h;f++)u[f]&&(s[s.length]={type:i[f],value:u[f]});return s},o.prototype.$arrayTokens=function(l){if(!l)return[];var u=this.splitRegex.exec(l);if(!u)return"text";for(var i=[],s=this.tokenArray,f=0,h=s.length;f<h;f++)u[f+1]&&(i[i.length]={type:s[f],value:u[f+1]});return i},o.prototype.removeCapturingGroups=function(l){var u=l.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(i,s){return s?"(?:":i});return u},o.prototype.createSplitterRegexp=function(l,u){if(l.indexOf("(?=")!=-1){var i=0,s=!1,f={};l.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(h,d,c,_,m,v){return s?s=m!="]":m?s=!0:_?(i==f.stack&&(f.end=v+1,f.stack=-1),i--):c&&(i++,c.length!=1&&(f.stack=i,f.start=v)),h}),f.end!=null&&/^\)*$/.test(l.substr(f.end))&&(l=l.substring(0,f.start)+l.substr(f.end))}return l.charAt(0)!="^"&&(l="^"+l),l.charAt(l.length-1)!="$"&&(l+="$"),new RegExp(l,(u||"").replace("g",""))},o.prototype.getLineTokens=function(l,u){if(u&&typeof u!="string"){var i=u.slice(0);u=i[0],u==="#tmp"&&(i.shift(),u=i.shift())}else var i=[];var s=u||"start",f=this.states[s];f||(s="start",f=this.states[s]);var h=this.matchMappings[s],d=this.regExps[s];d.lastIndex=0;for(var c,_=[],m=0,v=0,y={type:null,value:""};c=d.exec(l);){var C=h.defaultToken,S=null,D=c[0],g=d.lastIndex;if(g-D.length>m){var b=l.substring(m,g-D.length);y.type==C?y.value+=b:(y.type&&_.push(y),y={type:C,value:b})}for(var x=0;x<c.length-2;x++)if(c[x+1]!==void 0){S=f[h[x]],S.onMatch?C=S.onMatch(D,s,i,l):C=S.token,S.next&&(typeof S.next=="string"?s=S.next:s=S.next(s,i),f=this.states[s],f||(this.reportError("state doesn't exist",s),s="start",f=this.states[s]),h=this.matchMappings[s],m=g,d=this.regExps[s],d.lastIndex=g),S.consumeLineEnd&&(m=g);break}if(D){if(typeof C=="string")(!S||S.merge!==!1)&&y.type===C?y.value+=D:(y.type&&_.push(y),y={type:C,value:D});else if(C){y.type&&_.push(y),y={type:null,value:""};for(var x=0;x<C.length;x++)_.push(C[x])}}if(m==l.length)break;if(m=g,v++>p){for(v>2*l.length&&this.reportError("infinite loop with in ace tokenizer",{startState:u,line:l});m<l.length;)y.type&&_.push(y),y={value:l.substring(m,m+=500),type:"overflow"};s="start",i=[];break}}return y.type&&_.push(y),i.length>1&&i[0]!==s&&i.unshift("#tmp",s),{tokens:_,state:i.length?i:s}},o}();a.prototype.reportError=r,t.Tokenizer=a});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";var r=e("../lib/deep_copy").deepCopy,p;p=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(l,u){if(!u){for(var i in l)this.$rules[i]=l[i];return}for(var i in l){for(var s=l[i],f=0;f<s.length;f++){var h=s[f];(h.next||h.onMatch)&&(typeof h.next=="string"&&h.next.indexOf(u)!==0&&(h.next=u+h.next),h.nextState&&h.nextState.indexOf(u)!==0&&(h.nextState=u+h.nextState))}this.$rules[u+i]=s}},this.getRules=function(){return this.$rules},this.embedRules=function(l,u,i,s,f){var h=typeof l=="function"?new l().getRules():l;if(s)for(var d=0;d<s.length;d++)s[d]=u+s[d];else{s=[];for(var c in h)s.push(u+c)}if(this.addRules(h,u),i)for(var _=Array.prototype[f?"push":"unshift"],d=0;d<s.length;d++)_.apply(this.$rules[s[d]],r(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(u)},this.getEmbeds=function(){return this.$embeds};var a=function(l,u){return(l!="start"||u.length)&&u.unshift(this.nextState,l),this.nextState},o=function(l,u){return u.shift(),u.shift()||"start"};this.normalizeRules=function(){var l=0,u=this.$rules;function i(s){var f=u[s];f.processed=!0;for(var h=0;h<f.length;h++){var d=f[h],c=null;Array.isArray(d)&&(c=d,d={}),!d.regex&&d.start&&(d.regex=d.start,d.next||(d.next=[]),d.next.push({defaultToken:d.token},{token:d.token+".end",regex:d.end||d.start,next:"pop"}),d.token=d.token+".start",d.push=!0);var _=d.next||d.push;if(_&&Array.isArray(_)){var m=d.stateName;m||(m=d.token,typeof m!="string"&&(m=m[0]||""),u[m]&&(m+=l++)),u[m]=_,d.next=m,i(m)}else _=="pop"&&(d.next=o);if(d.push&&(d.nextState=d.next||d.push,d.next=a,delete d.push),d.rules)for(var v in d.rules)u[v]?u[v].push&&u[v].push.apply(u[v],d.rules[v]):u[v]=d.rules[v];var y=typeof d=="string"?d:d.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?c=y.map(function(S){return u[S]}):c=u[y]),c){var C=[h,1].concat(c);d.noEscape&&(C=C.filter(function(S){return!S.next})),f.splice.apply(f,C),h--}d.keywordMap&&(d.token=this.createKeywordMapper(d.keywordMap,d.defaultToken||"text",d.caseInsensitive),delete d.defaultToken)}}Object.keys(u).forEach(i,this)},this.createKeywordMapper=function(l,u,i,s){var f=Object.create(null);return this.$keywordList=[],Object.keys(l).forEach(function(h){for(var d=l[h],c=d.split(s||"|"),_=c.length;_--;){var m=c[_];this.$keywordList.push(m),i&&(m=m.toLowerCase()),f[m]=h}},this),l=null,i?function(h){return f[h.toLowerCase()]||u}:function(h){return f[h]||u}},this.getKeywords=function(){return this.$keywords}}.call(p.prototype),t.TextHighlightRules=p});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var r;r=function(){this.$behaviours={}},function(){this.add=function(p,a,o){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[p]:this.$behaviours[p]={}}this.$behaviours[p][a]=o},this.addBehaviours=function(p){for(var a in p)for(var o in p[a])this.add(a,o,p[a][o])},this.remove=function(p){this.$behaviours&&this.$behaviours[p]&&delete this.$behaviours[p]},this.inherit=function(p,a){if(typeof p=="function")var o=new p().getBehaviours(a);else var o=p.getBehaviours(a);this.addBehaviours(o)},this.getBehaviours=function(p){if(p){for(var a={},o=0;o<p.length;o++)this.$behaviours[p[o]]&&(a[p[o]]=this.$behaviours[p[o]]);return a}else return this.$behaviours}}.call(r.prototype),t.Behaviour=r});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("./range").Range,p=function(){function a(o,l,u){this.$session=o,this.$row=l,this.$rowTokens=o.getTokens(l);var i=o.getTokenAt(l,u);this.$tokenIndex=i?i.index:-1}return a.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},a.prototype.stepForward=function(){this.$tokenIndex+=1;for(var o;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,o||(o=this.$session.getLength()),this.$row>=o)return this.$row=o-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},a.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},a.prototype.getCurrentTokenRow=function(){return this.$row},a.prototype.getCurrentTokenColumn=function(){var o=this.$rowTokens,l=this.$tokenIndex,u=o[l].start;if(u!==void 0)return u;for(u=0;l>0;)l-=1,u+=o[l].value.length;return u},a.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},a.prototype.getCurrentTokenRange=function(){var o=this.$rowTokens[this.$tokenIndex],l=this.getCurrentTokenColumn();return new r(this.$row,l,this.$row,l+o.value.length)},a}();t.TokenIterator=p});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var r=e("../../lib/oop"),p=e("../behaviour").Behaviour,a=e("../../token_iterator").TokenIterator,o=e("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],u=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],i,s={},f={'"':'"',"'":"'"},h=function(_){var m=-1;if(_.multiSelect&&(m=_.selection.index,s.rangeCount!=_.multiSelect.rangeCount&&(s={rangeCount:_.multiSelect.rangeCount})),s[m])return i=s[m];i=s[m]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},d=function(_,m,v,y){var C=_.end.row-_.start.row;return{text:v+m+y,selection:[0,_.start.column+1,C,_.end.column+(C?0:1)]}},c;c=function(_){_=_||{},this.add("braces","insertion",function(m,v,y,C,S){var D=y.getCursorPosition(),g=C.doc.getLine(D.row);if(S=="{"){h(y);var b=y.getSelectionRange(),x=C.doc.getTextRange(b);if(x!==""&&x!=="{"&&y.getWrapBehavioursEnabled())return d(b,x,"{","}");if(c.isSaneInsertion(y,C))return/[\]\}\)]/.test(g[D.column])||y.inMultiSelectMode||_.braces?(c.recordAutoInsert(y,C,"}"),{text:"{}",selection:[1,1]}):(c.recordMaybeInsert(y,C,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){h(y);var E=g.substring(D.column,D.column+1);if(E=="}"){var T=C.$findOpeningBracket("}",{column:D.column+1,row:D.row});if(T!==null&&c.isAutoInsertedClosing(D,g,S))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){h(y);var M="";c.isMaybeInsertedClosing(D,g)&&(M=o.stringRepeat("}",i.maybeInsertedBrackets),c.clearMaybeInsertedClosing());var E=g.substring(D.column,D.column+1);if(E==="}"){var w=C.findMatchingBracket({row:D.row,column:D.column+1},"}");if(!w)return null;var F=this.$getIndent(C.getLine(w.row))}else if(M)var F=this.$getIndent(g);else{c.clearMaybeInsertedClosing();return}var L=F+C.getTabString();return{text:`
`+L+`
`+F+M,selection:[1,L.length,1,L.length]}}else c.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(m,v,y,C,S){var D=C.doc.getTextRange(S);if(!S.isMultiLine()&&D=="{"){h(y);var g=C.doc.getLine(S.start.row),b=g.substring(S.end.column,S.end.column+1);if(b=="}")return S.end.column++,S;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(m,v,y,C,S){if(S=="("){h(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return d(D,g,"(",")");if(c.isSaneInsertion(y,C))return c.recordAutoInsert(y,C,")"),{text:"()",selection:[1,1]}}else if(S==")"){h(y);var b=y.getCursorPosition(),x=C.doc.getLine(b.row),E=x.substring(b.column,b.column+1);if(E==")"){var T=C.$findOpeningBracket(")",{column:b.column+1,row:b.row});if(T!==null&&c.isAutoInsertedClosing(b,x,S))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(m,v,y,C,S){var D=C.doc.getTextRange(S);if(!S.isMultiLine()&&D=="("){h(y);var g=C.doc.getLine(S.start.row),b=g.substring(S.start.column+1,S.start.column+2);if(b==")")return S.end.column++,S}}),this.add("brackets","insertion",function(m,v,y,C,S){if(S=="["){h(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return d(D,g,"[","]");if(c.isSaneInsertion(y,C))return c.recordAutoInsert(y,C,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){h(y);var b=y.getCursorPosition(),x=C.doc.getLine(b.row),E=x.substring(b.column,b.column+1);if(E=="]"){var T=C.$findOpeningBracket("]",{column:b.column+1,row:b.row});if(T!==null&&c.isAutoInsertedClosing(b,x,S))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(m,v,y,C,S){var D=C.doc.getTextRange(S);if(!S.isMultiLine()&&D=="["){h(y);var g=C.doc.getLine(S.start.row),b=g.substring(S.start.column+1,S.start.column+2);if(b=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(m,v,y,C,S){var D=C.$mode.$quotes||f;if(S.length==1&&D[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;h(y);var g=S,b=y.getSelectionRange(),x=C.doc.getTextRange(b);if(x!==""&&(x.length!=1||!D[x])&&y.getWrapBehavioursEnabled())return d(b,x,g,g);if(!x){var E=y.getCursorPosition(),T=C.doc.getLine(E.row),M=T.substring(E.column-1,E.column),w=T.substring(E.column,E.column+1),F=C.getTokenAt(E.row,E.column),L=C.getTokenAt(E.row,E.column+1);if(M=="\\"&&F&&/escape/.test(F.type))return null;var R=F&&/string|escape/.test(F.type),A=!L||/string|escape/.test(L.type),I;if(w==g)I=R!==A,I&&/string\.end/.test(L.type)&&(I=!1);else{if(R&&!A||R&&A)return null;var $=C.$mode.tokenRe;$.lastIndex=0;var H=$.test(M);$.lastIndex=0;var P=$.test(w),q=C.$mode.$pairQuotesAfter,G=q&&q[g]&&q[g].test(M);if(!G&&H||P||w&&!/[\s;,.})\]\\]/.test(w))return null;var B=T[E.column-2];if(M==g&&(B==g||$.test(B)))return null;I=!0}return{text:I?g+g:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(m,v,y,C,S){var D=C.$mode.$quotes||f,g=C.doc.getTextRange(S);if(!S.isMultiLine()&&D.hasOwnProperty(g)){h(y);var b=C.doc.getLine(S.start.row),x=b.substring(S.start.column+1,S.start.column+2);if(x==g)return S.end.column++,S}}),_.closeDocComment!==!1&&this.add("doc comment end","insertion",function(m,v,y,C,S){if(m==="doc-start"&&(S===`
`||S===`\r
`)&&y.selection.isEmpty()){var D=y.getCursorPosition(),g=C.doc.getLine(D.row),b=C.doc.getLine(D.row+1),x=this.$getIndent(g);if(/\s*\*/.test(b))return/^\s*\*/.test(g)?{text:S+x+"* ",selection:[1,3+x.length,1,3+x.length]}:{text:S+x+" * ",selection:[1,3+x.length,1,3+x.length]};if(/\/\*\*/.test(g.substring(0,D.column)))return{text:S+x+" * "+S+" "+x+"*/",selection:[1,4+x.length,1,4+x.length]}}})},c.isSaneInsertion=function(_,m){var v=_.getCursorPosition(),y=new a(m,v.row,v.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",l)){if(/[)}\]]/.test(_.session.getLine(v.row)[v.column]))return!0;var C=new a(m,v.row,v.column+1);if(!this.$matchTokenType(C.getCurrentToken()||"text",l))return!1}return y.stepForward(),y.getCurrentTokenRow()!==v.row||this.$matchTokenType(y.getCurrentToken()||"text",u)},c.$matchTokenType=function(_,m){return m.indexOf(_.type||_)>-1},c.recordAutoInsert=function(_,m,v){var y=_.getCursorPosition(),C=m.doc.getLine(y.row);this.isAutoInsertedClosing(y,C,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=y.row,i.autoInsertedLineEnd=v+C.substr(y.column),i.autoInsertedBrackets++},c.recordMaybeInsert=function(_,m,v){var y=_.getCursorPosition(),C=m.doc.getLine(y.row);this.isMaybeInsertedClosing(y,C)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=y.row,i.maybeInsertedLineStart=C.substr(0,y.column)+v,i.maybeInsertedLineEnd=C.substr(y.column),i.maybeInsertedBrackets++},c.isAutoInsertedClosing=function(_,m,v){return i.autoInsertedBrackets>0&&_.row===i.autoInsertedRow&&v===i.autoInsertedLineEnd[0]&&m.substr(_.column)===i.autoInsertedLineEnd},c.isMaybeInsertedClosing=function(_,m){return i.maybeInsertedBrackets>0&&_.row===i.maybeInsertedRow&&m.substr(_.column)===i.maybeInsertedLineEnd&&m.substr(0,_.column)==i.maybeInsertedLineStart},c.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},c.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},r.inherits(c,p),t.CstyleBehaviour=c});ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var r=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],p=0,a=[],o=0;o<r.length;o+=2)a.push(p+=r[o]),r[o+1]&&a.push(45,p+=r[o+1]);t.wordChars=String.fromCharCode.apply(null,a)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var r=e("../config"),p=e("../tokenizer").Tokenizer,a=e("./text_highlight_rules").TextHighlightRules,o=e("./behaviour/cstyle").CstyleBehaviour,l=e("../unicode"),u=e("../lib/lang"),i=e("../token_iterator").TokenIterator,s=e("../range").Range,f;f=function(){this.HighlightRules=a},function(){this.$defaultBehaviour=new o,this.tokenRe=new RegExp("^["+l.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+l.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new p(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(h,d,c,_){var m=d.doc,v=!0,y=!0,C=1/0,S=d.getTabSize(),D=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var x=this.lineCommentStart.map(u.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var x=u.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;x=new RegExp("^(\\s*)(?:"+x+") ?"),D=d.getUseSoftTabs();var M=function(P,q){var G=P.match(x);if(G){var B=G[1].length,Q=G[0].length;!L(P,B,Q)&&G[0][Q-1]==" "&&Q--,m.removeInLine(q,B,Q)}},F=g+" ",T=function(P,q){(!v||/\S/.test(P))&&(L(P,C,C)?m.insertInLine({row:q,column:C},F):m.insertInLine({row:q,column:C},g))},w=function(P,q){return x.test(P)},L=function(P,q,G){for(var B=0;q--&&P.charAt(q)==" ";)B++;if(B%S!=0)return!1;for(var B=0;P.charAt(G++)==" ";)B++;return S>2?B%S!=S-1:B%S==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,b=this.blockComment.end,x=new RegExp("^(\\s*)(?:"+u.escapeRegExp(g)+")"),E=new RegExp("(?:"+u.escapeRegExp(b)+")\\s*$"),T=function(I,$){w(I,$)||(!v||/\S/.test(I))&&(m.insertInLine({row:$,column:I.length},b),m.insertInLine({row:$,column:C},g))},M=function(I,$){var H;(H=I.match(E))&&m.removeInLine($,I.length-H[0].length,I.length),(H=I.match(x))&&m.removeInLine($,H[1].length,H[0].length)},w=function(I,$){if(x.test(I))return!0;for(var H=d.getTokens($),P=0;P<H.length;P++)if(H[P].type==="comment")return!0}}function R(I){for(var $=c;$<=_;$++)I(m.getLine($),$)}var A=1/0;R(function(I,$){var H=I.search(/\S/);H!==-1?(H<C&&(C=H),y&&!w(I,$)&&(y=!1)):A>I.length&&(A=I.length)}),C==1/0&&(C=A,v=!1,y=!1),D&&C%S!=0&&(C=Math.floor(C/S)*S),R(y?M:T)},this.toggleBlockComment=function(h,d,c,_){var m=this.blockComment;if(m){!m.start&&m[0]&&(m=m[0]);var v=new i(d,_.row,_.column),y=v.getCurrentToken(),C=d.selection,S=d.selection.toOrientedRange(),D,g;if(y&&/comment/.test(y.type)){for(var b,x;y&&/comment/.test(y.type);){var E=y.value.indexOf(m.start);if(E!=-1){var T=v.getCurrentTokenRow(),M=v.getCurrentTokenColumn()+E;b=new s(T,M,T,M+m.start.length);break}y=v.stepBackward()}for(var v=new i(d,_.row,_.column),y=v.getCurrentToken();y&&/comment/.test(y.type);){var E=y.value.indexOf(m.end);if(E!=-1){var T=v.getCurrentTokenRow(),M=v.getCurrentTokenColumn()+E;x=new s(T,M,T,M+m.end.length);break}y=v.stepForward()}x&&d.remove(x),b&&(d.remove(b),D=b.start.row,g=-m.start.length)}else g=m.start.length,D=c.start.row,d.insert(c.end,m.end),d.insert(c.start,m.start);S.start.row==D&&(S.start.column+=g),S.end.row==D&&(S.end.column+=g),d.selection.fromOrientedRange(S)}},this.getNextLineIndent=function(h,d,c){return this.$getIndent(d)},this.checkOutdent=function(h,d,c){return!1},this.autoOutdent=function(h,d,c){},this.$getIndent=function(h){return h.match(/^\s*/)[0]},this.createWorker=function(h){return null},this.createModeDelegates=function(h){this.$embeds=[],this.$modes={};for(var d in h)if(h[d]){var c=h[d],_=c.prototype.$id,m=r.$modes[_];m||(r.$modes[_]=m=new c),r.$modes[d]||(r.$modes[d]=m),this.$embeds.push(d),this.$modes[d]=m}for(var v=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(S){(function(D){var g=v[S],b=D[g];D[v[S]]=function(){return this.$delegator(g,arguments,b)}})(C)},C=this,d=0;d<v.length;d++)y(d)},this.$delegator=function(h,d,c){var _=d[0]||"start";if(typeof _!="string"){if(Array.isArray(_[2])){var m=_[2][_[2].length-1],v=this.$modes[m];if(v)return v[h].apply(v,[_[1]].concat([].slice.call(d,1)))}_=_[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var C=_.split(this.$embeds[y]);if(!C[0]&&C[1]){d[0]=C[1];var v=this.$modes[this.$embeds[y]];return v[h].apply(v,d)}}var S=c.apply(this,d);return c?S:void 0},this.transformAction=function(h,d,c,_,m){if(this.$behaviour){var v=this.$behaviour.getBehaviours();for(var y in v)if(v[y][d]){var C=v[y][d].apply(this,arguments);if(C)return C}}},this.getKeywords=function(h){if(!this.completionKeywords){var d=this.$tokenizer.rules,c=[];for(var _ in d)for(var m=d[_],v=0,y=m.length;v<y;v++)if(typeof m[v].token=="string")/keyword|support|storage/.test(m[v].token)&&c.push(m[v].regex);else if(typeof m[v].token=="object"){for(var C=0,S=m[v].token.length;C<S;C++)if(/keyword|support|storage/.test(m[v].token[C])){var _=m[v].regex.match(/\(.+?\)/g)[C];c.push(_.substr(1,_.length-2))}}this.completionKeywords=c}return h?c.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(h,d,c,_){var m=this.$keywordList||this.$createKeywordList();return m.map(function(v){return{name:v,value:v,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(f.prototype),t.Mode=f});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function r(o,l){throw console.log("Invalid Delta:",o),"Invalid Delta: "+l}function p(o,l){return l.row>=0&&l.row<o.length&&l.column>=0&&l.column<=o[l.row].length}function a(o,l){l.action!="insert"&&l.action!="remove"&&r(l,"delta.action must be 'insert' or 'remove'"),l.lines instanceof Array||r(l,"delta.lines must be an Array"),(!l.start||!l.end)&&r(l,"delta.start/end must be an present");var u=l.start;p(o,l.start)||r(l,"delta.start must be contained in document");var i=l.end;l.action=="remove"&&!p(o,i)&&r(l,"delta.end must contained in document for 'remove' actions");var s=i.row-u.row,f=i.column-(s==0?u.column:0);(s!=l.lines.length-1||l.lines[s].length!=f)&&r(l,"delta.range must match delta lines")}t.applyDelta=function(o,l,u){var i=l.start.row,s=l.start.column,f=o[i]||"";switch(l.action){case"insert":var h=l.lines;if(h.length===1)o[i]=f.substring(0,s)+l.lines[0]+f.substring(s);else{var d=[i,1].concat(l.lines);o.splice.apply(o,d),o[i]=f.substring(0,s)+o[i],o[i+l.lines.length-1]+=f.substring(s)}break;case"remove":var c=l.end.column,_=l.end.row;i===_?o[i]=f.substring(0,s)+f.substring(c):o.splice(i,_-i+1,f.substring(0,s)+o[_].substring(c));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),p=e("./lib/event_emitter").EventEmitter,a=function(){function u(i,s,f){this.$onChange=this.onChange.bind(this),this.attach(i),typeof s!="number"?this.setPosition(s.row,s.column):this.setPosition(s,f)}return u.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},u.prototype.getDocument=function(){return this.document},u.prototype.onChange=function(i){if(!(i.start.row==i.end.row&&i.start.row!=this.row)&&!(i.start.row>this.row)){var s=l(i,{row:this.row,column:this.column},this.$insertRight);this.setPosition(s.row,s.column,!0)}},u.prototype.setPosition=function(i,s,f){var h;if(f?h={row:i,column:s}:h=this.$clipPositionToDocument(i,s),!(this.row==h.row&&this.column==h.column)){var d={row:this.row,column:this.column};this.row=h.row,this.column=h.column,this._signal("change",{old:d,value:h})}},u.prototype.detach=function(){this.document.off("change",this.$onChange)},u.prototype.attach=function(i){this.document=i||this.document,this.document.on("change",this.$onChange)},u.prototype.$clipPositionToDocument=function(i,s){var f={};return i>=this.document.getLength()?(f.row=Math.max(0,this.document.getLength()-1),f.column=this.document.getLine(f.row).length):i<0?(f.row=0,f.column=0):(f.row=i,f.column=Math.min(this.document.getLine(f.row).length,Math.max(0,s))),s<0&&(f.column=0),f},u}();a.prototype.$insertRight=!1,r.implement(a.prototype,p);function o(u,i,s){var f=s?u.column<=i.column:u.column<i.column;return u.row<i.row||u.row==i.row&&f}function l(u,i,s){var f=u.action=="insert",h=(f?1:-1)*(u.end.row-u.start.row),d=(f?1:-1)*(u.end.column-u.start.column),c=u.start,_=f?c:u.end;return o(i,c,s)?{row:i.row,column:i.column}:o(_,i,!s)?{row:i.row+h,column:i.column+(i.row==_.row?d:0)}:{row:c.row,column:c.column}}t.Anchor=a});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var r=e("./lib/oop"),p=e("./apply_delta").applyDelta,a=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,l=e("./anchor").Anchor,u=function(){function i(s){this.$lines=[""],s.length===0?this.$lines=[""]:Array.isArray(s)?this.insertMergedLines({row:0,column:0},s):this.insert({row:0,column:0},s)}return i.prototype.setValue=function(s){var f=this.getLength()-1;this.remove(new o(0,0,f,this.getLine(f).length)),this.insert({row:0,column:0},s||"")},i.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},i.prototype.createAnchor=function(s,f){return new l(this,s,f)},i.prototype.$detectNewLine=function(s){var f=s.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=f?f[1]:`
`,this._signal("changeNewLineMode")},i.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},i.prototype.setNewLineMode=function(s){this.$newLineMode!==s&&(this.$newLineMode=s,this._signal("changeNewLineMode"))},i.prototype.getNewLineMode=function(){return this.$newLineMode},i.prototype.isNewLine=function(s){return s==`\r
`||s=="\r"||s==`
`},i.prototype.getLine=function(s){return this.$lines[s]||""},i.prototype.getLines=function(s,f){return this.$lines.slice(s,f+1)},i.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},i.prototype.getLength=function(){return this.$lines.length},i.prototype.getTextRange=function(s){return this.getLinesForRange(s).join(this.getNewLineCharacter())},i.prototype.getLinesForRange=function(s){var f;if(s.start.row===s.end.row)f=[this.getLine(s.start.row).substring(s.start.column,s.end.column)];else{f=this.getLines(s.start.row,s.end.row),f[0]=(f[0]||"").substring(s.start.column);var h=f.length-1;s.end.row-s.start.row==h&&(f[h]=f[h].substring(0,s.end.column))}return f},i.prototype.insertLines=function(s,f){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(s,f)},i.prototype.removeLines=function(s,f){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(s,f)},i.prototype.insertNewLine=function(s){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(s,["",""])},i.prototype.insert=function(s,f){return this.getLength()<=1&&this.$detectNewLine(f),this.insertMergedLines(s,this.$split(f))},i.prototype.insertInLine=function(s,f){var h=this.clippedPos(s.row,s.column),d=this.pos(s.row,s.column+f.length);return this.applyDelta({start:h,end:d,action:"insert",lines:[f]},!0),this.clonePos(d)},i.prototype.clippedPos=function(s,f){var h=this.getLength();s===void 0?s=h:s<0?s=0:s>=h&&(s=h-1,f=void 0);var d=this.getLine(s);return f==null&&(f=d.length),f=Math.min(Math.max(f,0),d.length),{row:s,column:f}},i.prototype.clonePos=function(s){return{row:s.row,column:s.column}},i.prototype.pos=function(s,f){return{row:s,column:f}},i.prototype.$clipPosition=function(s){var f=this.getLength();return s.row>=f?(s.row=Math.max(0,f-1),s.column=this.getLine(f-1).length):(s.row=Math.max(0,s.row),s.column=Math.min(Math.max(s.column,0),this.getLine(s.row).length)),s},i.prototype.insertFullLines=function(s,f){s=Math.min(Math.max(s,0),this.getLength());var h=0;s<this.getLength()?(f=f.concat([""]),h=0):(f=[""].concat(f),s--,h=this.$lines[s].length),this.insertMergedLines({row:s,column:h},f)},i.prototype.insertMergedLines=function(s,f){var h=this.clippedPos(s.row,s.column),d={row:h.row+f.length-1,column:(f.length==1?h.column:0)+f[f.length-1].length};return this.applyDelta({start:h,end:d,action:"insert",lines:f}),this.clonePos(d)},i.prototype.remove=function(s){var f=this.clippedPos(s.start.row,s.start.column),h=this.clippedPos(s.end.row,s.end.column);return this.applyDelta({start:f,end:h,action:"remove",lines:this.getLinesForRange({start:f,end:h})}),this.clonePos(f)},i.prototype.removeInLine=function(s,f,h){var d=this.clippedPos(s,f),c=this.clippedPos(s,h);return this.applyDelta({start:d,end:c,action:"remove",lines:this.getLinesForRange({start:d,end:c})},!0),this.clonePos(d)},i.prototype.removeFullLines=function(s,f){s=Math.min(Math.max(0,s),this.getLength()-1),f=Math.min(Math.max(0,f),this.getLength()-1);var h=f==this.getLength()-1&&s>0,d=f<this.getLength()-1,c=h?s-1:s,_=h?this.getLine(c).length:0,m=d?f+1:f,v=d?0:this.getLine(m).length,y=new o(c,_,m,v),C=this.$lines.slice(s,f+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),C},i.prototype.removeNewLine=function(s){s<this.getLength()-1&&s>=0&&this.applyDelta({start:this.pos(s,this.getLine(s).length),end:this.pos(s+1,0),action:"remove",lines:["",""]})},i.prototype.replace=function(s,f){if(s instanceof o||(s=o.fromPoints(s.start,s.end)),f.length===0&&s.isEmpty())return s.start;if(f==this.getTextRange(s))return s.end;this.remove(s);var h;return f?h=this.insert(s.start,f):h=s.start,h},i.prototype.applyDeltas=function(s){for(var f=0;f<s.length;f++)this.applyDelta(s[f])},i.prototype.revertDeltas=function(s){for(var f=s.length-1;f>=0;f--)this.revertDelta(s[f])},i.prototype.applyDelta=function(s,f){var h=s.action=="insert";(h?s.lines.length<=1&&!s.lines[0]:!o.comparePoints(s.start,s.end))||(h&&s.lines.length>2e4?this.$splitAndapplyLargeDelta(s,2e4):(p(this.$lines,s,f),this._signal("change",s)))},i.prototype.$safeApplyDelta=function(s){var f=this.$lines.length;(s.action=="remove"&&s.start.row<f&&s.end.row<f||s.action=="insert"&&s.start.row<=f)&&this.applyDelta(s)},i.prototype.$splitAndapplyLargeDelta=function(s,f){for(var h=s.lines,d=h.length-f+1,c=s.start.row,_=s.start.column,m=0,v=0;m<d;m=v){v+=f-1;var y=h.slice(m,v);y.push(""),this.applyDelta({start:this.pos(c+m,_),end:this.pos(c+v,_=0),action:s.action,lines:y},!0)}s.lines=h.slice(m),s.start.row=c+m,s.start.column=_,this.applyDelta(s,!0)},i.prototype.revertDelta=function(s){this.$safeApplyDelta({start:this.clonePos(s.start),end:this.clonePos(s.end),action:s.action=="insert"?"remove":"insert",lines:s.lines.slice()})},i.prototype.indexToPosition=function(s,f){for(var h=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,c=f||0,_=h.length;c<_;c++)if(s-=h[c].length+d,s<0)return{row:c,column:s+h[c].length+d};return{row:_-1,column:s+h[_-1].length+d}},i.prototype.positionToIndex=function(s,f){for(var h=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,c=0,_=Math.min(s.row,h.length),m=f||0;m<_;++m)c+=h[m].length+d;return c+s.column},i.prototype.$split=function(s){return s.split(/\r\n|\r|\n/)},i}();u.prototype.$autoNewLine="",u.prototype.$newLineMode="auto",r.implement(u.prototype,a),t.Document=u});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("./lib/oop"),p=e("./lib/event_emitter").EventEmitter,a=function(){function o(l,u){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=l;var i=this;this.$worker=function(){if(i.running){for(var s=new Date,f=i.currentLine,h=-1,d=i.doc,c=f;i.lines[f];)f++;var _=d.getLength(),m=0;for(i.running=!1;f<_;){i.$tokenizeRow(f),h=f;do f++;while(i.lines[f]);if(m++,m%5===0&&new Date-s>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=f,h==-1&&(h=f),c<=h&&i.fireUpdateEvent(c,h)}}}return o.prototype.setTokenizer=function(l){this.tokenizer=l,this.lines=[],this.states=[],this.start(0)},o.prototype.setDocument=function(l){this.doc=l,this.lines=[],this.states=[],this.stop()},o.prototype.fireUpdateEvent=function(l,u){var i={first:l,last:u};this._signal("update",{data:i})},o.prototype.start=function(l){this.currentLine=Math.min(l||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},o.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},o.prototype.$updateOnChange=function(l){var u=l.start.row,i=l.end.row-u;if(i===0)this.lines[u]=null;else if(l.action=="remove")this.lines.splice(u,i+1,null),this.states.splice(u,i+1,null);else{var s=Array(i+1);s.unshift(u,1),this.lines.splice.apply(this.lines,s),this.states.splice.apply(this.states,s)}this.currentLine=Math.min(u,this.currentLine,this.doc.getLength()),this.stop()},o.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},o.prototype.getTokens=function(l){return this.lines[l]||this.$tokenizeRow(l)},o.prototype.getState=function(l){return this.currentLine==l&&this.$tokenizeRow(l),this.states[l]||"start"},o.prototype.$tokenizeRow=function(l){var u=this.doc.getLine(l),i=this.states[l-1],s=this.tokenizer.getLineTokens(u,i,l);return this.states[l]+""!=s.state+""?(this.states[l]=s.state,this.lines[l+1]=null,this.currentLine>l+1&&(this.currentLine=l+1)):this.currentLine==l&&(this.currentLine=l+1),this.lines[l]=s.tokens},o.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},o}();r.implement(a.prototype,p),t.BackgroundTokenizer=a});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,n){"use strict";var r=e("./lib/lang"),p=e("./range").Range,a=function(){function o(l,u,i){i===void 0&&(i="text"),this.setRegexp(l),this.clazz=u,this.type=i}return o.prototype.setRegexp=function(l){this.regExp+""!=l+""&&(this.regExp=l,this.cache=[])},o.prototype.update=function(l,u,i,s){if(this.regExp)for(var f=s.firstRow,h=s.lastRow,d={},c=f;c<=h;c++){var _=this.cache[c];_==null&&(_=r.getMatchOffsets(i.getLine(c),this.regExp),_.length>this.MAX_RANGES&&(_=_.slice(0,this.MAX_RANGES)),_=_.map(function(C){return new p(c,C.offset,c,C.offset+C.length)}),this.cache[c]=_.length?_:"");for(var m=_.length;m--;){var v=_[m].toScreenRange(i),y=v.toString();d[y]||(d[y]=!0,u.drawSingleLineMarker(l,v,this.clazz,s))}}},o}();a.prototype.MAX_RANGES=500,t.SearchHighlight=a});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=function(){function D(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return D.prototype.addSession=function(g){this.$session=g},D.prototype.add=function(g,b,x){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),b===!1||!this.lastDeltas){this.lastDeltas=[];var E=this.$undoStack.length;E>this.$undoDepth-1&&this.$undoStack.splice(0,E-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},D.prototype.addSelection=function(g,b){this.selections.push({value:g,rev:b||this.$rev})},D.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},D.prototype.markIgnored=function(g,b){b==null&&(b=this.$rev+1);for(var x=this.$undoStack,E=x.length;E--;){var T=x[E][0];if(T.id<=g)break;T.id<b&&(T.ignore=!0)}this.lastDeltas=null},D.prototype.getSelection=function(g,b){for(var x=this.selections,E=x.length;E--;){var T=x[E];if(T.rev<g)return b&&(T=x[E+1]),T}},D.prototype.getRevision=function(){return this.$rev},D.prototype.getDeltas=function(g,b){b==null&&(b=this.$rev+1);for(var x=this.$undoStack,E=null,T=0,M=x.length;M--;){var w=x[M][0];if(w.id<b&&!E&&(E=M+1),w.id<=g){T=M+1;break}}return x.slice(T,E)},D.prototype.getChangedRanges=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.getChangedLines=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.undo=function(g,b){this.lastDeltas=null;var x=this.$undoStack;if(p(x,x.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var E=x.pop(),T=null;return E&&(T=g.undoChanges(E,b),this.$redoStack.push(E),this.$syncRev()),this.$fromUndo=!1,T}},D.prototype.redo=function(g,b){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var x=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);S(this.$redoStack,x),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(M){M[0].id=++this.$maxRev},this)}var E=this.$redoStack.pop(),T=null;return E&&(T=g.redoChanges(E,b),this.$undoStack.push(E),this.$syncRev()),this.$fromUndo=!1,T},D.prototype.$syncRev=function(){var g=this.$undoStack,b=g[g.length-1],x=b&&b[0].id||0;this.$redoStackBaseRev=x,this.$rev=x},D.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},D.prototype.canUndo=function(){return this.$undoStack.length>0},D.prototype.canRedo=function(){return this.$redoStack.length>0},D.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},D.prototype.isAtBookmark=function(){return this.$rev===this.mark},D.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},D.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},D.prototype.$prettyPrint=function(g){return g?f(g):f(this.$undoStack)+`
---
`+f(this.$redoStack)},D}();r.prototype.hasUndo=r.prototype.canUndo,r.prototype.hasRedo=r.prototype.canRedo,r.prototype.isClean=r.prototype.isAtBookmark,r.prototype.markClean=r.prototype.bookmark;function p(D,g){for(var b=g;b--;){var x=D[b];if(x&&!x[0].ignore){for(;b<g-1;){var E=c(D[b],D[b+1]);D[b]=E[0],D[b+1]=E[1],b++}return!0}}}var a=e("./range").Range,o=a.comparePoints,l=a.comparePoints;function u(D){var g=D.action=="insert",b=D.start,x=D.end,E=(x.row-b.row)*(g?1:-1),T=(x.column-b.column)*(g?1:-1);g&&(x=b);for(var M in this.marks){var w=this.marks[M],F=l(w,b);if(!(F<0)){if(F===0&&g)if(w.bias==1)F=1;else{w.bias==-1;continue}var L=g?F:l(w,x);if(L>0){w.row+=E,w.column+=w.row==x.row?T:0;continue}!g&&L<=0&&(w.row=b.row,w.column=b.column,L===0&&(w.bias=1))}}}function i(D){return{row:D.row,column:D.column}}function s(D){return{start:i(D.start),end:i(D.end),action:D.action,lines:D.lines.slice()}}function f(D){if(D=D||this,Array.isArray(D))return D.map(f).join(`
`);var g="";return D.action?(g=D.action=="insert"?"+":"-",g+="["+D.lines+"]"):D.value&&(Array.isArray(D.value)?g=D.value.map(h).join(`
`):g=h(D.value)),D.start&&(g+=h(D)),(D.id||D.rev)&&(g+="	("+(D.id||D.rev)+")"),g}function h(D){return D.start.row+":"+D.start.column+"=>"+D.end.row+":"+D.end.column}function d(D,g){var b=D.action=="insert",x=g.action=="insert";if(b&&x)if(o(g.start,D.end)>=0)m(g,D,-1);else if(o(g.start,D.start)<=0)m(D,g,1);else return null;else if(b&&!x)if(o(g.start,D.end)>=0)m(g,D,-1);else if(o(g.end,D.start)<=0)m(D,g,-1);else return null;else if(!b&&x)if(o(g.start,D.start)>=0)m(g,D,1);else if(o(g.start,D.start)<=0)m(D,g,1);else return null;else if(!b&&!x)if(o(g.start,D.start)>=0)m(g,D,1);else if(o(g.end,D.start)<=0)m(D,g,-1);else return null;return[g,D]}function c(D,g){for(var b=D.length;b--;)for(var x=0;x<g.length;x++)if(!d(D[b],g[x])){for(;b<D.length;){for(;x--;)d(g[x],D[b]);x=g.length,b++}return[D,g]}return D.selectionBefore=g.selectionBefore=D.selectionAfter=g.selectionAfter=null,[g,D]}function _(D,g){var b=D.action=="insert",x=g.action=="insert";if(b&&x)o(D.start,g.start)<0?m(g,D,1):m(D,g,1);else if(b&&!x)o(D.start,g.end)>=0?m(D,g,-1):(o(D.start,g.start)<=0||m(D,a.fromPoints(g.start,D.start),-1),m(g,D,1));else if(!b&&x)o(g.start,D.end)>=0?m(g,D,-1):(o(g.start,D.start)<=0||m(g,a.fromPoints(D.start,g.start),-1),m(D,g,1));else if(!b&&!x)if(o(g.start,D.end)>=0)m(g,D,-1);else if(o(g.end,D.start)<=0)m(D,g,-1);else{var E,T;return o(D.start,g.start)<0&&(E=D,D=y(D,g.start)),o(D.end,g.end)>0&&(T=y(D,g.end)),v(g.end,D.start,D.end,-1),T&&!E&&(D.lines=T.lines,D.start=T.start,D.end=T.end,T=D),[g,E,T].filter(Boolean)}return[g,D]}function m(D,g,b){v(D.start,g.start,g.end,b),v(D.end,g.start,g.end,b)}function v(D,g,b,x){D.row==(x==1?g:b).row&&(D.column+=x*(b.column-g.column)),D.row+=x*(b.row-g.row)}function y(D,g){var b=D.lines,x=D.end;D.end=i(g);var E=D.end.row-D.start.row,T=b.splice(E,b.length),M=E?g.column:g.column-D.start.column;b.push(T[0].substring(0,M)),T[0]=T[0].substr(M);var w={start:i(g),end:x,lines:T,action:D.action};return w}function C(D,g){g=s(g);for(var b=D.length;b--;){for(var x=D[b],E=0;E<x.length;E++){var T=x[E],M=_(T,g);g=M[0],M.length!=2&&(M[2]?(x.splice(E+1,1,M[1],M[2]),E++):M[1]||(x.splice(E,1),E--))}x.length||D.splice(b,1)}return D}function S(D,g){for(var b=0;b<g.length;b++)for(var x=g[b],E=0;E<x.length;E++)C(D,x[E])}t.UndoManager=r});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../range").Range,p=function(){function a(o,l){this.foldData=o,Array.isArray(l)?this.folds=l:l=this.folds=[l];var u=l[l.length-1];this.range=new r(l[0].start.row,l[0].start.column,u.end.row,u.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(i){i.setFoldLine(this)},this)}return a.prototype.shiftRow=function(o){this.start.row+=o,this.end.row+=o,this.folds.forEach(function(l){l.start.row+=o,l.end.row+=o})},a.prototype.addFold=function(o){if(o.sameRow){if(o.start.row<this.startRow||o.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(o),this.folds.sort(function(l,u){return-l.range.compareEnd(u.start.row,u.start.column)}),this.range.compareEnd(o.start.row,o.start.column)>0?(this.end.row=o.end.row,this.end.column=o.end.column):this.range.compareStart(o.end.row,o.end.column)<0&&(this.start.row=o.start.row,this.start.column=o.start.column)}else if(o.start.row==this.end.row)this.folds.push(o),this.end.row=o.end.row,this.end.column=o.end.column;else if(o.end.row==this.start.row)this.folds.unshift(o),this.start.row=o.start.row,this.start.column=o.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");o.foldLine=this},a.prototype.containsRow=function(o){return o>=this.start.row&&o<=this.end.row},a.prototype.walk=function(o,l,u){var i=0,s=this.folds,f,h,d,c=!0;l==null&&(l=this.end.row,u=this.end.column);for(var _=0;_<s.length;_++){if(f=s[_],h=f.range.compareStart(l,u),h==-1){o(null,l,u,i,c);return}if(d=o(null,f.start.row,f.start.column,i,c),d=!d&&o(f.placeholder,f.start.row,f.start.column,i),d||h===0)return;c=!f.sameRow,i=f.end.column}o(null,l,u,i,c)},a.prototype.getNextFoldTo=function(o,l){for(var u,i,s=0;s<this.folds.length;s++){if(u=this.folds[s],i=u.range.compareEnd(o,l),i==-1)return{fold:u,kind:"after"};if(i===0)return{fold:u,kind:"inside"}}return null},a.prototype.addRemoveChars=function(o,l,u){var i=this.getNextFoldTo(o,l),s,f;if(i){if(s=i.fold,i.kind=="inside"&&s.start.column!=l&&s.start.row!=o)window.console&&window.console.log(o,l,s);else if(s.start.row==o){f=this.folds;var h=f.indexOf(s);for(h===0&&(this.start.column+=u),h;h<f.length;h++){if(s=f[h],s.start.column+=u,!s.sameRow)return;s.end.column+=u}this.end.column+=u}}},a.prototype.split=function(o,l){var u=this.getNextFoldTo(o,l);if(!u||u.kind=="inside")return null;var i=u.fold,s=this.folds,f=this.foldData,h=s.indexOf(i),d=s[h-1];this.end.row=d.end.row,this.end.column=d.end.column,s=s.splice(h,s.length-h);var c=new a(f,s);return f.splice(f.indexOf(this)+1,0,c),c},a.prototype.merge=function(o){for(var l=o.folds,u=0;u<l.length;u++)this.addFold(l[u]);var i=this.foldData;i.splice(i.indexOf(o),1)},a.prototype.toString=function(){var o=[this.range.toString()+": ["];return this.folds.forEach(function(l){o.push("  "+l.toString())}),o.push("]"),o.join(`
`)},a.prototype.idxToPosition=function(o){for(var l=0,u=0;u<this.folds.length;u++){var i=this.folds[u];if(o-=i.start.column-l,o<0)return{row:i.start.row,column:i.start.column+o};if(o-=i.placeholder.length,o<0)return i.start;l=i.end.column}return{row:this.end.row,column:this.end.column+o}},a}();t.FoldLine=p});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("./range").Range,p=r.comparePoints,a=function(){function o(){this.ranges=[],this.$bias=1}return o.prototype.pointIndex=function(l,u,i){for(var s=this.ranges,f=i||0;f<s.length;f++){var h=s[f],d=p(l,h.end);if(!(d>0)){var c=p(l,h.start);return d===0?u&&c!==0?-f-2:f:c>0||c===0&&!u?f:-f-1}}return-f-1},o.prototype.add=function(l){var u=!l.isEmpty(),i=this.pointIndex(l.start,u);i<0&&(i=-i-1);var s=this.pointIndex(l.end,u,i);return s<0?s=-s-1:s++,this.ranges.splice(i,s-i,l)},o.prototype.addList=function(l){for(var u=[],i=l.length;i--;)u.push.apply(u,this.add(l[i]));return u},o.prototype.substractPoint=function(l){var u=this.pointIndex(l);if(u>=0)return this.ranges.splice(u,1)},o.prototype.merge=function(){var l=[],u=this.ranges;u=u.sort(function(d,c){return p(d.start,c.start)});for(var i=u[0],s,f=1;f<u.length;f++){s=i,i=u[f];var h=p(s.end,i.start);h<0||h==0&&!s.isEmpty()&&!i.isEmpty()||(p(s.end,i.end)<0&&(s.end.row=i.end.row,s.end.column=i.end.column),u.splice(f,1),l.push(i),i=s,f--)}return this.ranges=u,l},o.prototype.contains=function(l,u){return this.pointIndex({row:l,column:u})>=0},o.prototype.containsPoint=function(l){return this.pointIndex(l)>=0},o.prototype.rangeAtPoint=function(l){var u=this.pointIndex(l);if(u>=0)return this.ranges[u]},o.prototype.clipRows=function(l,u){var i=this.ranges;if(i[0].start.row>u||i[i.length-1].start.row<l)return[];var s=this.pointIndex({row:l,column:0});s<0&&(s=-s-1);var f=this.pointIndex({row:u,column:0},s);f<0&&(f=-f-1);for(var h=[],d=s;d<f;d++)h.push(i[d]);return h},o.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},o.prototype.attach=function(l){this.session&&this.detach(),this.session=l,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},o.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},o.prototype.$onChange=function(l){for(var u=l.start,i=l.end,s=u.row,f=i.row,h=this.ranges,d=0,c=h.length;d<c;d++){var _=h[d];if(_.end.row>=s)break}if(l.action=="insert")for(var m=f-s,v=-u.column+i.column;d<c;d++){var _=h[d];if(_.start.row>s)break;if(_.start.row==s&&_.start.column>=u.column&&(_.start.column==u.column&&this.$bias<=0||(_.start.column+=v,_.start.row+=m)),_.end.row==s&&_.end.column>=u.column){if(_.end.column==u.column&&this.$bias<0)continue;_.end.column==u.column&&v>0&&d<c-1&&_.end.column>_.start.column&&_.end.column==h[d+1].start.column&&(_.end.column-=v),_.end.column+=v,_.end.row+=m}}else for(var m=s-f,v=u.column-i.column;d<c;d++){var _=h[d];if(_.start.row>f)break;_.end.row<f&&(s<_.end.row||s==_.end.row&&u.column<_.end.column)?(_.end.row=s,_.end.column=u.column):_.end.row==f?_.end.column<=i.column?(m||_.end.column>u.column)&&(_.end.column=u.column,_.end.row=u.row):(_.end.column+=v,_.end.row+=m):_.end.row>f&&(_.end.row+=m),_.start.row<f&&(s<_.start.row||s==_.start.row&&u.column<_.start.column)?(_.start.row=s,_.start.column=u.column):_.start.row==f?_.start.column<=i.column?(m||_.start.column>u.column)&&(_.start.column=u.column,_.start.row=u.row):(_.start.column+=v,_.start.row+=m):_.start.row>f&&(_.start.row+=m)}if(m!=0&&d<c)for(;d<c;d++){var _=h[d];_.start.row+=m,_.end.row+=m}},o}();a.prototype.comparePoints=p,t.RangeList=a});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,n){"use strict";var r=this&&this.__extends||function(){var s=function(f,h){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(d[_]=c[_])},s(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");s(f,h);function d(){this.constructor=f}f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}}(),p=e("../range_list").RangeList,a=function(s){r(f,s);function f(h,d){var c=s.call(this)||this;return c.foldLine=null,c.placeholder=d,c.range=h,c.start=h.start,c.end=h.end,c.sameRow=h.start.row==h.end.row,c.subFolds=c.ranges=[],c}return f.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},f.prototype.setFoldLine=function(h){this.foldLine=h,this.subFolds.forEach(function(d){d.setFoldLine(h)})},f.prototype.clone=function(){var h=this.range.clone(),d=new f(h,this.placeholder);return this.subFolds.forEach(function(c){d.subFolds.push(c.clone())}),d.collapseChildren=this.collapseChildren,d},f.prototype.addSubFold=function(h){if(!this.range.isEqual(h)){l(h,this.start);for(var v=h.start.row,y=h.start.column,d=0,c=-1;d<this.subFolds.length&&(c=this.subFolds[d].range.compare(v,y),c==1);d++);var _=this.subFolds[d],m=0;if(c==0){if(_.range.containsRange(h))return _.addSubFold(h);m=1}for(var v=h.range.end.row,y=h.range.end.column,C=d,c=-1;C<this.subFolds.length&&(c=this.subFolds[C].range.compare(v,y),c==1);C++);c==0&&C++;for(var S=this.subFolds.splice(d,C-d,h),D=c==0?S.length-1:S.length,g=m;g<D;g++)h.addSubFold(S[g]);return h.setFoldLine(this.foldLine),h}},f.prototype.restoreRange=function(h){return i(h,this.start)},f}(p);function o(s,f){s.row-=f.row,s.row==0&&(s.column-=f.column)}function l(s,f){o(s.start,f),o(s.end,f)}function u(s,f){s.row==0&&(s.column+=f.column),s.row+=f.row}function i(s,f){u(s.start,f),u(s.end,f)}t.Fold=a});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,n){"use strict";var r=e("../range").Range,p=e("./fold_line").FoldLine,a=e("./fold").Fold,o=e("../token_iterator").TokenIterator,l=e("../mouse/mouse_event").MouseEvent;function u(){this.getFoldAt=function(i,s,f){var h=this.getFoldLine(i);if(!h)return null;for(var d=h.folds,c=0;c<d.length;c++){var _=d[c].range;if(_.contains(i,s)){if(f==1&&_.isEnd(i,s)&&!_.isEmpty())continue;if(f==-1&&_.isStart(i,s)&&!_.isEmpty())continue;return d[c]}}},this.getFoldsInRange=function(i){var s=i.start,f=i.end,h=this.$foldData,d=[];s.column+=1,f.column-=1;for(var c=0;c<h.length;c++){var _=h[c].range.compareRange(i);if(_!=2){if(_==-2)break;for(var m=h[c].folds,v=0;v<m.length;v++){var y=m[v];if(_=y.range.compareRange(i),_==-2)break;if(_==2)continue;if(_==42)break;d.push(y)}}}return s.column-=1,f.column+=1,d},this.getFoldsInRangeList=function(i){if(Array.isArray(i)){var s=[];i.forEach(function(f){s=s.concat(this.getFoldsInRange(f))},this)}else var s=this.getFoldsInRange(i);return s},this.getAllFolds=function(){for(var i=[],s=this.$foldData,f=0;f<s.length;f++)for(var h=0;h<s[f].folds.length;h++)i.push(s[f].folds[h]);return i},this.getFoldStringAt=function(i,s,f,h){if(h=h||this.getFoldLine(i),!h)return null;for(var d={end:{column:0}},c,_,m=0;m<h.folds.length;m++){_=h.folds[m];var v=_.range.compareEnd(i,s);if(v==-1){c=this.getLine(_.start.row).substring(d.end.column,_.start.column);break}else if(v===0)return null;d=_}return c||(c=this.getLine(_.start.row).substring(d.end.column)),f==-1?c.substring(0,s-d.end.column):f==1?c.substring(s-d.end.column):c},this.getFoldLine=function(i,s){var f=this.$foldData,h=0;for(s&&(h=f.indexOf(s)),h==-1&&(h=0),h;h<f.length;h++){var d=f[h];if(d.start.row<=i&&d.end.row>=i)return d;if(d.end.row>i)return null}return null},this.getNextFoldLine=function(i,s){var f=this.$foldData,h=0;for(s&&(h=f.indexOf(s)),h==-1&&(h=0),h;h<f.length;h++){var d=f[h];if(d.end.row>=i)return d}return null},this.getFoldedRowCount=function(i,s){for(var f=this.$foldData,h=s-i+1,d=0;d<f.length;d++){var c=f[d],_=c.end.row,m=c.start.row;if(_>=s){m<s&&(m>=i?h-=s-m:h=0);break}else _>=i&&(m>=i?h-=_-m:h-=_-i+1)}return h},this.$addFoldLine=function(i){return this.$foldData.push(i),this.$foldData.sort(function(s,f){return s.start.row-f.start.row}),i},this.addFold=function(i,s){var f=this.$foldData,h=!1,d;i instanceof a?d=i:(d=new a(s,i),d.collapseChildren=s.collapseChildren),this.$clipRangeToDocument(d.range);var c=d.start.row,_=d.start.column,m=d.end.row,v=d.end.column,y=this.getFoldAt(c,_,1),C=this.getFoldAt(m,v,-1);if(y&&C==y)return y.addSubFold(d);y&&!y.range.isStart(c,_)&&this.removeFold(y),C&&!C.range.isEnd(m,v)&&this.removeFold(C);var S=this.getFoldsInRange(d.range);S.length>0&&(this.removeFolds(S),d.collapseChildren||S.forEach(function(x){d.addSubFold(x)}));for(var D=0;D<f.length;D++){var g=f[D];if(m==g.start.row){g.addFold(d),h=!0;break}else if(c==g.end.row){if(g.addFold(d),h=!0,!d.sameRow){var b=f[D+1];if(b&&b.start.row==m){g.merge(b);break}}break}else if(m<=g.start.row)break}return h||(g=this.$addFoldLine(new p(this.$foldData,d))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:d,action:"add"}),d},this.addFolds=function(i){i.forEach(function(s){this.addFold(s)},this)},this.removeFold=function(i){var s=i.foldLine,f=s.start.row,h=s.end.row,d=this.$foldData,c=s.folds;if(c.length==1)d.splice(d.indexOf(s),1);else if(s.range.isEnd(i.end.row,i.end.column))c.pop(),s.end.row=c[c.length-1].end.row,s.end.column=c[c.length-1].end.column;else if(s.range.isStart(i.start.row,i.start.column))c.shift(),s.start.row=c[0].start.row,s.start.column=c[0].start.column;else if(i.sameRow)c.splice(c.indexOf(i),1);else{var _=s.split(i.start.row,i.start.column);c=_.folds,c.shift(),_.start.row=c[0].start.row,_.start.column=c[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(f,h):this.$updateRowLengthCache(f,h)),this.$modified=!0,this._signal("changeFold",{data:i,action:"remove"})},this.removeFolds=function(i){for(var s=[],f=0;f<i.length;f++)s.push(i[f]);s.forEach(function(h){this.removeFold(h)},this),this.$modified=!0},this.expandFold=function(i){this.removeFold(i),i.subFolds.forEach(function(s){i.restoreRange(s),this.addFold(s)},this),i.collapseChildren>0&&this.foldAll(i.start.row+1,i.end.row,i.collapseChildren-1),i.subFolds=[]},this.expandFolds=function(i){i.forEach(function(s){this.expandFold(s)},this)},this.unfold=function(i,s){var f,h;if(i==null)f=new r(0,0,this.getLength(),0),s==null&&(s=!0);else if(typeof i=="number")f=new r(i,0,i,this.getLine(i).length);else if("row"in i)f=r.fromPoints(i,i);else{if(Array.isArray(i))return h=[],i.forEach(function(c){h=h.concat(this.unfold(c))},this),h;f=i}h=this.getFoldsInRangeList(f);for(var d=h;h.length==1&&r.comparePoints(h[0].start,f.start)<0&&r.comparePoints(h[0].end,f.end)>0;)this.expandFolds(h),h=this.getFoldsInRangeList(f);if(s!=!1?this.removeFolds(h):this.expandFolds(h),d.length)return d},this.isRowFolded=function(i,s){return!!this.getFoldLine(i,s)},this.getRowFoldEnd=function(i,s){var f=this.getFoldLine(i,s);return f?f.end.row:i},this.getRowFoldStart=function(i,s){var f=this.getFoldLine(i,s);return f?f.start.row:i},this.getFoldDisplayLine=function(i,s,f,h,d){h==null&&(h=i.start.row),d==null&&(d=0),s==null&&(s=i.end.row),f==null&&(f=this.getLine(s).length);var c=this.doc,_="";return i.walk(function(m,v,y,C){if(!(v<h)){if(v==h){if(y<d)return;C=Math.max(d,C)}m!=null?_+=m:_+=c.getLine(v).substring(C,y)}},s,f),_},this.getDisplayLine=function(i,s,f,h){var d=this.getFoldLine(i);if(d)return this.getFoldDisplayLine(d,i,s,f,h);var c;return c=this.doc.getLine(i),c.substring(h||0,s||c.length)},this.$cloneFoldData=function(){var i=[];return i=this.$foldData.map(function(s){var f=s.folds.map(function(h){return h.clone()});return new p(i,f)}),i},this.toggleFold=function(i){var s=this.selection,f=s.getRange(),h,d;if(f.isEmpty()){var c=f.start;if(h=this.getFoldAt(c.row,c.column),h){this.expandFold(h);return}else(d=this.findMatchingBracket(c))?f.comparePoint(d)==1?f.end=d:(f.start=d,f.start.column++,f.end.column--):(d=this.findMatchingBracket({row:c.row,column:c.column+1}))?(f.comparePoint(d)==1?f.end=d:f.start=d,f.start.column++):f=this.getCommentFoldRange(c.row,c.column)||f}else{var _=this.getFoldsInRange(f);if(i&&_.length){this.expandFolds(_);return}else _.length==1&&(h=_[0])}if(h||(h=this.getFoldAt(f.start.row,f.start.column)),h&&h.range.toString()==f.toString()){this.expandFold(h);return}var m="...";if(!f.isMultiLine()){if(m=this.getTextRange(f),m.length<4)return;m=m.trim().substring(0,2)+".."}this.addFold(m,f)},this.getCommentFoldRange=function(i,s,f){var h=new o(this,i,s),d=h.getCurrentToken(),c=d&&d.type;if(d&&/^comment|string/.test(c)){c=c.match(/comment|string/)[0],c=="comment"&&(c+="|doc-start|\\.doc");var _=new RegExp(c),m=new r;if(f!=1){do d=h.stepBackward();while(d&&_.test(d.type)&&!/^comment.end/.test(d.type));d=h.stepForward()}if(m.start.row=h.getCurrentTokenRow(),m.start.column=h.getCurrentTokenColumn()+(/^comment.start/.test(d.type)?d.value.length:2),h=new o(this,i,s),f!=-1){var v=-1;do if(d=h.stepForward(),v==-1){var y=this.getState(h.$row);_.test(y)||(v=h.$row)}else if(h.$row>v)break;while(d&&_.test(d.type)&&!/^comment.start/.test(d.type));d=h.stepBackward()}else d=h.getCurrentToken();return m.end.row=h.getCurrentTokenRow(),m.end.column=h.getCurrentTokenColumn(),/^comment.end/.test(d.type)||(m.end.column+=d.value.length-2),m}},this.foldAll=function(i,s,f,h){f==null&&(f=1e5);var d=this.foldWidgets;if(d){s=s||this.getLength(),i=i||0;for(var c=i;c<s;c++)if(d[c]==null&&(d[c]=this.getFoldWidget(c)),d[c]=="start"&&!(h&&!h(c))){var _=this.getFoldWidgetRange(c);_&&_.isMultiLine()&&_.end.row<=s&&_.start.row>=i&&(c=_.end.row,_.collapseChildren=f,this.addFold("...",_))}}},this.foldToLevel=function(i){for(this.foldAll();i-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var i=this;this.foldAll(null,null,null,function(s){for(var f=i.getTokens(s),h=0;h<f.length;h++){var d=f[h];if(!(d.type=="text"&&/^\s+$/.test(d.value)))return!!/comment/.test(d.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(i){if(!this.$foldStyles[i])throw new Error("invalid fold style: "+i+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=i){this.$foldStyle=i,i=="manual"&&this.unfold();var s=this.$foldMode;this.$setFolding(null),this.$setFolding(s)}},this.$setFolding=function(i){if(this.$foldMode!=i){if(this.$foldMode=i,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!i||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=i.getFoldWidget.bind(i,this,this.$foldStyle),this.getFoldWidgetRange=i.getFoldWidgetRange.bind(i,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(i,s){var f=this.foldWidgets;if(!f||s&&f[i])return{};for(var h=i-1,d;h>=0;){var c=f[h];if(c==null&&(c=f[h]=this.getFoldWidget(h)),c=="start"){var _=this.getFoldWidgetRange(h);if(d||(d=_),_&&_.end.row>=i)break}h--}return{range:h!==-1&&_,firstRange:d}},this.onFoldWidgetClick=function(i,s){s instanceof l&&(s=s.domEvent);var f={children:s.shiftKey,all:s.ctrlKey||s.metaKey,siblings:s.altKey},h=this.$toggleFoldWidget(i,f);if(!h){var d=s.target||s.srcElement;d&&/ace_fold-widget/.test(d.className)&&(d.className+=" ace_invalid")}},this.$toggleFoldWidget=function(i,s){if(this.getFoldWidget){var f=this.getFoldWidget(i),h=this.getLine(i),d=f==="end"?-1:1,c=this.getFoldAt(i,d===-1?0:h.length,d);if(c)return s.children||s.all?this.removeFold(c):this.expandFold(c),c;var _=this.getFoldWidgetRange(i,!0);if(_&&!_.isMultiLine()&&(c=this.getFoldAt(_.start.row,_.start.column,1),c&&_.isEqual(c.range)))return this.removeFold(c),c;if(s.siblings){var m=this.getParentFoldRangeData(i);if(m.range)var v=m.range.start.row+1,y=m.range.end.row;this.foldAll(v,y,s.all?1e4:0)}else s.children?(y=_?_.end.row:this.getLength(),this.foldAll(i+1,y,s.all?1e4:0)):_&&(s.all&&(_.collapseChildren=1e4),this.addFold("...",_));return _}},this.toggleFoldWidget=function(i){var s=this.selection.getCursor().row;s=this.getRowFoldStart(s);var f=this.$toggleFoldWidget(s,{});if(!f){var h=this.getParentFoldRangeData(s,!0);if(f=h.range||h.firstRange,f){s=f.start.row;var d=this.getFoldAt(s,this.getLine(s).length,1);d?this.removeFold(d):this.addFold("...",f)}}},this.updateFoldWidgets=function(i){var s=i.start.row,f=i.end.row-s;if(f===0)this.foldWidgets[s]=null;else if(i.action=="remove")this.foldWidgets.splice(s,f+1,null);else{var h=Array(f+1);h.unshift(s,1),this.foldWidgets.splice.apply(this.foldWidgets,h)}},this.tokenizerUpdateFoldWidgets=function(i){var s=i.data;s.first!=s.last&&this.foldWidgets.length>s.first&&this.foldWidgets.splice(s.first,this.foldWidgets.length)}}t.Folding=u});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var r=e("../token_iterator").TokenIterator,p=e("../range").Range;function a(){this.findMatchingBracket=function(o,l){if(o.column==0)return null;var u=l||this.getLine(o.row).charAt(o.column-1);if(u=="")return null;var i=u.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],o):this.$findOpeningBracket(i[2],o):null},this.getBracketRange=function(o){var l=this.getLine(o.row),u=!0,i,s=l.charAt(o.column-1),f=s&&s.match(/([\(\[\{])|([\)\]\}])/);if(f||(s=l.charAt(o.column),o={row:o.row,column:o.column+1},f=s&&s.match(/([\(\[\{])|([\)\]\}])/),u=!1),!f)return null;if(f[1]){var h=this.$findClosingBracket(f[1],o);if(!h)return null;i=p.fromPoints(o,h),u||(i.end.column++,i.start.column--),i.cursor=i.end}else{var h=this.$findOpeningBracket(f[2],o);if(!h)return null;i=p.fromPoints(h,o),u||(i.start.column++,i.end.column--),i.cursor=i.start}return i},this.getMatchingBracketRanges=function(o,l){var u=this.getLine(o.row),i=/([\(\[\{])|([\)\]\}])/,s=!l&&u.charAt(o.column-1),f=s&&s.match(i);if(f||(s=(l===void 0||l)&&u.charAt(o.column),o={row:o.row,column:o.column+1},f=s&&s.match(i)),!f)return null;var h=new p(o.row,o.column-1,o.row,o.column),d=f[1]?this.$findClosingBracket(f[1],o):this.$findOpeningBracket(f[2],o);if(!d)return[h];var c=new p(d.row,d.column,d.row,d.column+1);return[h,c]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(o,l,u){var i=this.$brackets[o],s=1,f=new r(this,l.row,l.column),h=f.getCurrentToken();if(h||(h=f.stepForward()),!!h){u||(u=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var d=l.column-f.getCurrentTokenColumn()-2,c=h.value;;){for(;d>=0;){var _=c.charAt(d);if(_==i){if(s-=1,s==0)return{row:f.getCurrentTokenRow(),column:d+f.getCurrentTokenColumn()}}else _==o&&(s+=1);d-=1}do h=f.stepBackward();while(h&&!u.test(h.type));if(h==null)break;c=h.value,d=c.length-1}return null}},this.$findClosingBracket=function(o,l,u){var i=this.$brackets[o],s=1,f=new r(this,l.row,l.column),h=f.getCurrentToken();if(h||(h=f.stepForward()),!!h){u||(u=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var d=l.column-f.getCurrentTokenColumn();;){for(var c=h.value,_=c.length;d<_;){var m=c.charAt(d);if(m==i){if(s-=1,s==0)return{row:f.getCurrentTokenRow(),column:d+f.getCurrentTokenColumn()}}else m==o&&(s+=1);d+=1}do h=f.stepForward();while(h&&!u.test(h.type));if(h==null)break;d=0}return null}},this.getMatchingTags=function(o){var l=new r(this,o.row,o.column),u=this.$findTagName(l);if(u){var i=l.stepBackward();return i.value==="<"?this.$findClosingTag(l,u):this.$findOpeningTag(l,u)}},this.$findTagName=function(o){var l=o.getCurrentToken(),u=!1,i=!1;if(l&&l.type.indexOf("tag-name")===-1)do i?l=o.stepBackward():l=o.stepForward(),l&&(l.value==="/>"?i=!0:l.type.indexOf("tag-name")!==-1&&(u=!0));while(l&&!u);return l},this.$findClosingTag=function(o,l){var u,i=l.value,s=l.value,f=0,h=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);l=o.stepForward();var d=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+l.value.length),c=!1;do if(u=l,l=o.stepForward(),l){if(l.value===">"&&!c){var _=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);c=!0}if(l.type.indexOf("tag-name")!==-1){if(i=l.value,s===i){if(u.value==="<")f++;else if(u.value==="</"&&(f--,f<0)){o.stepBackward();var m=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+2);l=o.stepForward();var v=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+l.value.length);if(l=o.stepForward(),l&&l.value===">")var y=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);else return}}}else if(s===i&&l.value==="/>"&&(f--,f<0))var m=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+2),v=m,y=v,_=new p(d.end.row,d.end.column,d.end.row,d.end.column+1)}while(l&&f>=0);if(h&&_&&m&&y&&d&&v)return{openTag:new p(h.start.row,h.start.column,_.end.row,_.end.column),closeTag:new p(m.start.row,m.start.column,y.end.row,y.end.column),openTagName:d,closeTagName:v}},this.$findOpeningTag=function(o,l){var u=o.getCurrentToken(),i=l.value,s=0,f=o.getCurrentTokenRow(),h=o.getCurrentTokenColumn(),d=h+2,c=new p(f,h,f,d);o.stepForward();var _=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+l.value.length);if(l=o.stepForward(),!(!l||l.value!==">")){var m=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);o.stepBackward(),o.stepBackward();do if(l=u,f=o.getCurrentTokenRow(),h=o.getCurrentTokenColumn(),d=h+l.value.length,u=o.stepBackward(),l){if(l.type.indexOf("tag-name")!==-1){if(i===l.value)if(u.value==="<"){if(s++,s>0){var v=new p(f,h,f,d),y=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);do l=o.stepForward();while(l&&l.value!==">");var C=new p(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1)}}else u.value==="</"&&s--}else if(l.value==="/>"){for(var S=0,D=u;D;){if(D.type.indexOf("tag-name")!==-1&&D.value===i){s--;break}else if(D.value==="<")break;D=o.stepBackward(),S++}for(var g=0;g<S;g++)o.stepForward()}}while(u&&s<=0);if(y&&C&&c&&m&&v&&_)return{openTag:new p(y.start.row,y.start.column,C.end.row,C.end.column),closeTag:new p(c.start.row,c.start.column,m.end.row,m.end.column),openTagName:v,closeTagName:_}}}}t.BracketMatch=a});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var r=e("./lib/oop"),p=e("./lib/lang"),a=e("./bidihandler").BidiHandler,o=e("./config"),l=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,i=e("./mode/text").Mode,s=e("./range").Range,f=e("./document").Document,h=e("./background_tokenizer").BackgroundTokenizer,d=e("./search_highlight").SearchHighlight,c=e("./undomanager").UndoManager,_=function(){function E(T,M){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++E.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new h(new i().getTokenizer(),this);var w=this;this.bgTokenizer.on("update",function(F){w._signal("tokenizerUpdate",F)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof T!="object"||!T.getLine)&&(T=new f(T)),this.setDocument(T),this.selection=new u(this),this.$bidiHandler=new a(this),o.resetOptions(this),this.setMode(M),o._signal("session",this),this.destroyed=!1}return E.prototype.setDocument=function(T){this.doc&&this.doc.off("change",this.$onChange),this.doc=T,T.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},E.prototype.getDocument=function(){return this.doc},E.prototype.$resetRowCache=function(T){if(!T){this.$docRowCache=[],this.$screenRowCache=[];return}var M=this.$docRowCache.length,w=this.$getRowCacheIndex(this.$docRowCache,T)+1;M>w&&(this.$docRowCache.splice(w,M),this.$screenRowCache.splice(w,M))},E.prototype.$getRowCacheIndex=function(T,M){for(var w=0,F=T.length-1;w<=F;){var L=w+F>>1,R=T[L];if(M>R)w=L+1;else if(M<R)F=L-1;else return L}return w-1},E.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},E.prototype.onChangeFold=function(T){var M=T.data;this.$resetRowCache(M.start.row)},E.prototype.onChange=function(T){this.$modified=!0,this.$bidiHandler.onChange(T),this.$resetRowCache(T.start.row);var M=this.$updateInternalDataOnChange(T);!this.$fromUndo&&this.$undoManager&&(M&&M.length&&(this.$undoManager.add({action:"removeFolds",folds:M},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(T,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(T),this._signal("change",T)},E.prototype.setValue=function(T){this.doc.setValue(T),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},E.fromJSON=function(T){typeof T=="string"&&(T=JSON.parse(T));var M=new c;M.$undoStack=T.history.undo,M.$redoStack=T.history.redo,M.mark=T.history.mark,M.$rev=T.history.rev;var w=new E(T.value);return T.folds.forEach(function(F){w.addFold("...",s.fromPoints(F.start,F.end))}),w.setAnnotations(T.annotations),w.setBreakpoints(T.breakpoints),w.setMode(T.mode),w.setScrollLeft(T.scrollLeft),w.setScrollTop(T.scrollTop),w.setUndoManager(M),w.selection.fromJSON(T.selection),w},E.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(T){return T.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},E.prototype.toString=function(){return this.doc.getValue()},E.prototype.getSelection=function(){return this.selection},E.prototype.getState=function(T){return this.bgTokenizer.getState(T)},E.prototype.getTokens=function(T){return this.bgTokenizer.getTokens(T)},E.prototype.getTokenAt=function(T,M){var w=this.bgTokenizer.getTokens(T),F,L=0;if(M==null){var R=w.length-1;L=this.getLine(T).length}else for(var R=0;R<w.length&&(L+=w[R].value.length,!(L>=M));R++);return F=w[R],F?(F.index=R,F.start=L-F.value.length,F):null},E.prototype.setUndoManager=function(T){if(this.$undoManager=T,this.$informUndoManager&&this.$informUndoManager.cancel(),T){var M=this;T.addSession(this),this.$syncInformUndoManager=function(){M.$informUndoManager.cancel(),M.mergeUndoDeltas=!1},this.$informUndoManager=p.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},E.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},E.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},E.prototype.getTabString=function(){return this.getUseSoftTabs()?p.stringRepeat(" ",this.getTabSize()):"	"},E.prototype.setUseSoftTabs=function(T){this.setOption("useSoftTabs",T)},E.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},E.prototype.setTabSize=function(T){this.setOption("tabSize",T)},E.prototype.getTabSize=function(){return this.$tabSize},E.prototype.isTabStop=function(T){return this.$useSoftTabs&&T.column%this.$tabSize===0},E.prototype.setNavigateWithinSoftTabs=function(T){this.setOption("navigateWithinSoftTabs",T)},E.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},E.prototype.setOverwrite=function(T){this.setOption("overwrite",T)},E.prototype.getOverwrite=function(){return this.$overwrite},E.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},E.prototype.addGutterDecoration=function(T,M){this.$decorations[T]||(this.$decorations[T]=""),this.$decorations[T]+=" "+M,this._signal("changeBreakpoint",{})},E.prototype.removeGutterDecoration=function(T,M){this.$decorations[T]=(this.$decorations[T]||"").replace(" "+M,""),this._signal("changeBreakpoint",{})},E.prototype.getBreakpoints=function(){return this.$breakpoints},E.prototype.setBreakpoints=function(T){this.$breakpoints=[];for(var M=0;M<T.length;M++)this.$breakpoints[T[M]]="ace_breakpoint";this._signal("changeBreakpoint",{})},E.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},E.prototype.setBreakpoint=function(T,M){M===void 0&&(M="ace_breakpoint"),M?this.$breakpoints[T]=M:delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},E.prototype.clearBreakpoint=function(T){delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},E.prototype.addMarker=function(T,M,w,F){var L=this.$markerId++,R={range:T,type:w||"line",renderer:typeof w=="function"?w:null,clazz:M,inFront:!!F,id:L};return F?(this.$frontMarkers[L]=R,this._signal("changeFrontMarker")):(this.$backMarkers[L]=R,this._signal("changeBackMarker")),L},E.prototype.addDynamicMarker=function(T,M){if(T.update){var w=this.$markerId++;return T.id=w,T.inFront=!!M,M?(this.$frontMarkers[w]=T,this._signal("changeFrontMarker")):(this.$backMarkers[w]=T,this._signal("changeBackMarker")),T}},E.prototype.removeMarker=function(T){var M=this.$frontMarkers[T]||this.$backMarkers[T];if(M){var w=M.inFront?this.$frontMarkers:this.$backMarkers;delete w[T],this._signal(M.inFront?"changeFrontMarker":"changeBackMarker")}},E.prototype.getMarkers=function(T){return T?this.$frontMarkers:this.$backMarkers},E.prototype.highlight=function(T){if(!this.$searchHighlight){var M=new d(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(M)}this.$searchHighlight.setRegexp(T)},E.prototype.highlightLines=function(T,M,w,F){typeof M!="number"&&(w=M,M=T),w||(w="ace_step");var L=new s(T,0,M,1/0);return L.id=this.addMarker(L,w,"fullLine",F),L},E.prototype.setAnnotations=function(T){this.$annotations=T,this._signal("changeAnnotation",{})},E.prototype.getAnnotations=function(){return this.$annotations||[]},E.prototype.clearAnnotations=function(){this.setAnnotations([])},E.prototype.$detectNewLine=function(T){var M=T.match(/^.*?(\r?\n)/m);M?this.$autoNewLine=M[1]:this.$autoNewLine=`
`},E.prototype.getWordRange=function(T,M){var w=this.getLine(T),F=!1;if(M>0&&(F=!!w.charAt(M-1).match(this.tokenRe)),F||(F=!!w.charAt(M).match(this.tokenRe)),F)var L=this.tokenRe;else if(/^\s+$/.test(w.slice(M-1,M+1)))var L=/\s/;else var L=this.nonTokenRe;var R=M;if(R>0){do R--;while(R>=0&&w.charAt(R).match(L));R++}for(var A=M;A<w.length&&w.charAt(A).match(L);)A++;return new s(T,R,T,A)},E.prototype.getAWordRange=function(T,M){for(var w=this.getWordRange(T,M),F=this.getLine(w.end.row);F.charAt(w.end.column).match(/[ \t]/);)w.end.column+=1;return w},E.prototype.setNewLineMode=function(T){this.doc.setNewLineMode(T)},E.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},E.prototype.setUseWorker=function(T){this.setOption("useWorker",T)},E.prototype.getUseWorker=function(){return this.$useWorker},E.prototype.onReloadTokenizer=function(T){var M=T.data;this.bgTokenizer.start(M.first),this._signal("tokenizerUpdate",T)},E.prototype.setMode=function(T,M){if(T&&typeof T=="object"){if(T.getTokenizer)return this.$onChangeMode(T);var w=T,F=w.path}else F=T||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[F]&&!w){this.$onChangeMode(this.$modes[F]),M&&M();return}this.$modeId=F,o.loadModule(["mode",F],function(L){if(this.$modeId!==F)return M&&M();this.$modes[F]&&!w?this.$onChangeMode(this.$modes[F]):L&&L.Mode&&(L=new L.Mode(w),w||(this.$modes[F]=L,L.$id=F),this.$onChangeMode(L)),M&&M()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},E.prototype.$onChangeMode=function(T,M){if(M||(this.$modeId=T.$id),this.$mode!==T){var w=this.$mode;this.$mode=T,this.$stopWorker(),this.$useWorker&&this.$startWorker();var F=T.getTokenizer();if(F.on!==void 0){var L=this.onReloadTokenizer.bind(this);F.on("update",L)}this.bgTokenizer.setTokenizer(F),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=T.tokenRe,this.nonTokenRe=T.nonTokenRe,M||(T.attachToSession&&T.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(T.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:w,mode:T}))}},E.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},E.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(T){o.warn("Could not load worker",T),this.$worker=null}},E.prototype.getMode=function(){return this.$mode},E.prototype.setScrollTop=function(T){this.$scrollTop===T||isNaN(T)||(this.$scrollTop=T,this._signal("changeScrollTop",T))},E.prototype.getScrollTop=function(){return this.$scrollTop},E.prototype.setScrollLeft=function(T){this.$scrollLeft===T||isNaN(T)||(this.$scrollLeft=T,this._signal("changeScrollLeft",T))},E.prototype.getScrollLeft=function(){return this.$scrollLeft},E.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},E.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var T=0;return this.lineWidgets.forEach(function(M){M&&M.screenWidth>T&&(T=M.screenWidth)}),this.lineWidgetWidth=T},E.prototype.$computeWidth=function(T){if(this.$modified||T){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var M=this.doc.getAllLines(),w=this.$rowLengthCache,F=0,L=0,R=this.$foldData[L],A=R?R.start.row:1/0,I=M.length,$=0;$<I;$++){if($>A){if($=R.end.row+1,$>=I)break;R=this.$foldData[L++],A=R?R.start.row:1/0}w[$]==null&&(w[$]=this.$getStringScreenWidth(M[$])[0]),w[$]>F&&(F=w[$])}this.screenWidth=F}},E.prototype.getLine=function(T){return this.doc.getLine(T)},E.prototype.getLines=function(T,M){return this.doc.getLines(T,M)},E.prototype.getLength=function(){return this.doc.getLength()},E.prototype.getTextRange=function(T){return this.doc.getTextRange(T||this.selection.getRange())},E.prototype.insert=function(T,M){return this.doc.insert(T,M)},E.prototype.remove=function(T){return this.doc.remove(T)},E.prototype.removeFullLines=function(T,M){return this.doc.removeFullLines(T,M)},E.prototype.undoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=T.length-1;w!=-1;w--){var F=T[w];F.action=="insert"||F.action=="remove"?this.doc.revertDelta(F):F.folds&&this.addFolds(F.folds)}!M&&this.$undoSelect&&(T.selectionBefore?this.selection.fromJSON(T.selectionBefore):this.selection.setRange(this.$getUndoSelection(T,!0))),this.$fromUndo=!1}},E.prototype.redoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=0;w<T.length;w++){var F=T[w];(F.action=="insert"||F.action=="remove")&&this.doc.$safeApplyDelta(F)}!M&&this.$undoSelect&&(T.selectionAfter?this.selection.fromJSON(T.selectionAfter):this.selection.setRange(this.$getUndoSelection(T,!1))),this.$fromUndo=!1}},E.prototype.setUndoSelect=function(T){this.$undoSelect=T},E.prototype.$getUndoSelection=function(T,M){function w(I){return M?I.action!=="insert":I.action==="insert"}for(var F,L,R=0;R<T.length;R++){var A=T[R];if(A.start){if(!F){w(A)?F=s.fromPoints(A.start,A.end):F=s.fromPoints(A.start,A.start);continue}w(A)?(L=A.start,F.compare(L.row,L.column)==-1&&F.setStart(L),L=A.end,F.compare(L.row,L.column)==1&&F.setEnd(L)):(L=A.start,F.compare(L.row,L.column)==-1&&(F=s.fromPoints(A.start,A.start)))}}return F},E.prototype.replace=function(T,M){return this.doc.replace(T,M)},E.prototype.moveText=function(T,M,w){var F=this.getTextRange(T),L=this.getFoldsInRange(T),R=s.fromPoints(M,M);if(!w){this.remove(T);var A=T.start.row-T.end.row,I=A?-T.end.column:T.start.column-T.end.column;I&&(R.start.row==T.end.row&&R.start.column>T.end.column&&(R.start.column+=I),R.end.row==T.end.row&&R.end.column>T.end.column&&(R.end.column+=I)),A&&R.start.row>=T.end.row&&(R.start.row+=A,R.end.row+=A)}if(R.end=this.insert(R.start,F),L.length){var $=T.start,H=R.start,A=H.row-$.row,I=H.column-$.column;this.addFolds(L.map(function(G){return G=G.clone(),G.start.row==$.row&&(G.start.column+=I),G.end.row==$.row&&(G.end.column+=I),G.start.row+=A,G.end.row+=A,G}))}return R},E.prototype.indentRows=function(T,M,w){w=w.replace(/\t/g,this.getTabString());for(var F=T;F<=M;F++)this.doc.insertInLine({row:F,column:0},w)},E.prototype.outdentRows=function(T){for(var M=T.collapseRows(),w=new s(0,0,0,0),F=this.getTabSize(),L=M.start.row;L<=M.end.row;++L){var R=this.getLine(L);w.start.row=L,w.end.row=L;for(var A=0;A<F&&R.charAt(A)==" ";++A);A<F&&R.charAt(A)=="	"?(w.start.column=A,w.end.column=A+1):(w.start.column=0,w.end.column=A),this.remove(w)}},E.prototype.$moveLines=function(T,M,w){if(T=this.getRowFoldStart(T),M=this.getRowFoldEnd(M),w<0){var F=this.getRowFoldStart(T+w);if(F<0)return 0;var L=F-T}else if(w>0){var F=this.getRowFoldEnd(M+w);if(F>this.doc.getLength()-1)return 0;var L=F-M}else{T=this.$clipRowToDocument(T),M=this.$clipRowToDocument(M);var L=M-T+1}var R=new s(T,0,M,Number.MAX_VALUE),A=this.getFoldsInRange(R).map(function($){return $=$.clone(),$.start.row+=L,$.end.row+=L,$}),I=w==0?this.doc.getLines(T,M):this.doc.removeFullLines(T,M);return this.doc.insertFullLines(T+L,I),A.length&&this.addFolds(A),L},E.prototype.moveLinesUp=function(T,M){return this.$moveLines(T,M,-1)},E.prototype.moveLinesDown=function(T,M){return this.$moveLines(T,M,1)},E.prototype.duplicateLines=function(T,M){return this.$moveLines(T,M,0)},E.prototype.$clipRowToDocument=function(T){return Math.max(0,Math.min(T,this.doc.getLength()-1))},E.prototype.$clipColumnToRow=function(T,M){return M<0?0:Math.min(this.doc.getLine(T).length,M)},E.prototype.$clipPositionToDocument=function(T,M){if(M=Math.max(0,M),T<0)T=0,M=0;else{var w=this.doc.getLength();T>=w?(T=w-1,M=this.doc.getLine(w-1).length):M=Math.min(this.doc.getLine(T).length,M)}return{row:T,column:M}},E.prototype.$clipRangeToDocument=function(T){T.start.row<0?(T.start.row=0,T.start.column=0):T.start.column=this.$clipColumnToRow(T.start.row,T.start.column);var M=this.doc.getLength()-1;return T.end.row>M?(T.end.row=M,T.end.column=this.doc.getLine(M).length):T.end.column=this.$clipColumnToRow(T.end.row,T.end.column),T},E.prototype.setUseWrapMode=function(T){if(T!=this.$useWrapMode){if(this.$useWrapMode=T,this.$modified=!0,this.$resetRowCache(0),T){var M=this.getLength();this.$wrapData=Array(M),this.$updateWrapData(0,M-1)}this._signal("changeWrapMode")}},E.prototype.getUseWrapMode=function(){return this.$useWrapMode},E.prototype.setWrapLimitRange=function(T,M){(this.$wrapLimitRange.min!==T||this.$wrapLimitRange.max!==M)&&(this.$wrapLimitRange={min:T,max:M},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},E.prototype.adjustWrapLimit=function(T,M){var w=this.$wrapLimitRange;w.max<0&&(w={min:M,max:M});var F=this.$constrainWrapLimit(T,w.min,w.max);return F!=this.$wrapLimit&&F>1?(this.$wrapLimit=F,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},E.prototype.$constrainWrapLimit=function(T,M,w){return M&&(T=Math.max(M,T)),w&&(T=Math.min(w,T)),T},E.prototype.getWrapLimit=function(){return this.$wrapLimit},E.prototype.setWrapLimit=function(T){this.setWrapLimitRange(T,T)},E.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},E.prototype.$updateInternalDataOnChange=function(T){var M=this.$useWrapMode,w=T.action,F=T.start,L=T.end,R=F.row,A=L.row,I=A-R,$=null;if(this.$updating=!0,I!=0)if(w==="remove"){this[M?"$wrapData":"$rowLengthCache"].splice(R,I);var H=this.$foldData;$=this.getFoldsInRange(T),this.removeFolds($);var P=this.getFoldLine(L.row),q=0;if(P){P.addRemoveChars(L.row,L.column,F.column-L.column),P.shiftRow(-I);var G=this.getFoldLine(R);G&&G!==P&&(G.merge(P),P=G),q=H.indexOf(P)+1}for(q;q<H.length;q++){var P=H[q];P.start.row>=L.row&&P.shiftRow(-I)}A=R}else{var B=Array(I);B.unshift(R,0);var Q=M?this.$wrapData:this.$rowLengthCache;Q.splice.apply(Q,B);var H=this.$foldData,P=this.getFoldLine(R),q=0;if(P){var O=P.range.compareInside(F.row,F.column);O==0?(P=P.split(F.row,F.column),P&&(P.shiftRow(I),P.addRemoveChars(A,0,L.column-F.column))):O==-1&&(P.addRemoveChars(R,0,L.column-F.column),P.shiftRow(I)),q=H.indexOf(P)+1}for(q;q<H.length;q++){var P=H[q];P.start.row>=R&&P.shiftRow(I)}}else{I=Math.abs(T.start.column-T.end.column),w==="remove"&&($=this.getFoldsInRange(T),this.removeFolds($),I=-I);var P=this.getFoldLine(R);P&&P.addRemoveChars(R,F.column,I)}return M&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,M?this.$updateWrapData(R,A):this.$updateRowLengthCache(R,A),$},E.prototype.$updateRowLengthCache=function(T,M){this.$rowLengthCache[T]=null,this.$rowLengthCache[M]=null},E.prototype.$updateWrapData=function(T,M){var w=this.doc.getAllLines(),F=this.getTabSize(),L=this.$wrapData,R=this.$wrapLimit,A,I,$=T;for(M=Math.min(M,w.length-1);$<=M;)I=this.getFoldLine($,I),I?(A=[],I.walk(function(H,P,q,G){var B;if(H!=null){B=this.$getDisplayTokens(H,A.length),B[0]=y;for(var Q=1;Q<B.length;Q++)B[Q]=C}else B=this.$getDisplayTokens(w[P].substring(G,q),A.length);A=A.concat(B)}.bind(this),I.end.row,w[I.end.row].length+1),L[I.start.row]=this.$computeWrapSplits(A,R,F),$=I.end.row+1):(A=this.$getDisplayTokens(w[$]),L[$]=this.$computeWrapSplits(A,R,F),$++)},E.prototype.$computeWrapSplits=function(T,M,w){if(T.length==0)return[];var F=[],L=T.length,R=0,A=0,I=this.$wrapAsCode,$=this.$indentedSoftWrap,H=M<=Math.max(2*w,8)||$===!1?0:Math.floor(M/2);function P(){var O=0;if(H===0)return O;if($)for(var W=0;W<T.length;W++){var U=T[W];if(U==D)O+=1;else if(U==g)O+=w;else{if(U==b)continue;break}}return I&&$!==!1&&(O+=w),Math.min(O,H)}function q(O){for(var W=O-R,U=R;U<O;U++){var k=T[U];(k===12||k===2)&&(W-=1)}F.length||(G=P(),F.indent=G),A+=W,F.push(A),R=O}for(var G=0;L-R>M-G;){var B=R+M-G;if(T[B-1]>=D&&T[B]>=D){q(B);continue}if(T[B]==y||T[B]==C){for(B;B!=R-1&&T[B]!=y;B--);if(B>R){q(B);continue}for(B=R+M,B;B<T.length&&T[B]==C;B++);if(B==T.length)break;q(B);continue}for(var Q=Math.max(B-(M-(M>>2)),R-1);B>Q&&T[B]<y;)B--;if(I){for(;B>Q&&T[B]<y;)B--;for(;B>Q&&T[B]==S;)B--}else for(;B>Q&&T[B]<D;)B--;if(B>Q){q(++B);continue}B=R+M,T[B]==v&&B--,q(B-G)}return F},E.prototype.$getDisplayTokens=function(T,M){var w=[],F;M=M||0;for(var L=0;L<T.length;L++){var R=T.charCodeAt(L);if(R==9){F=this.getScreenTabSize(w.length+M),w.push(g);for(var A=1;A<F;A++)w.push(b)}else R==32?w.push(D):R>39&&R<48||R>57&&R<64?w.push(S):R>=4352&&x(R)?w.push(m,v):w.push(m)}return w},E.prototype.$getStringScreenWidth=function(T,M,w){if(M==0)return[0,0];M==null&&(M=1/0),w=w||0;var F,L;for(L=0;L<T.length&&(F=T.charCodeAt(L),F==9?w+=this.getScreenTabSize(w):F>=4352&&x(F)?w+=2:w+=1,!(w>M));L++);return[w,L]},E.prototype.getRowLength=function(T){var M=1;return this.lineWidgets&&(M+=this.lineWidgets[T]&&this.lineWidgets[T].rowCount||0),!this.$useWrapMode||!this.$wrapData[T]?M:this.$wrapData[T].length+M},E.prototype.getRowLineCount=function(T){return!this.$useWrapMode||!this.$wrapData[T]?1:this.$wrapData[T].length+1},E.prototype.getRowWrapIndent=function(T){if(this.$useWrapMode){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE),w=this.$wrapData[M.row];return w.length&&w[0]<M.column?w.indent:0}else return 0},E.prototype.getScreenLastRowColumn=function(T){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE);return this.documentToScreenColumn(M.row,M.column)},E.prototype.getDocumentLastRowColumn=function(T,M){var w=this.documentToScreenRow(T,M);return this.getScreenLastRowColumn(w)},E.prototype.getDocumentLastRowColumnPosition=function(T,M){var w=this.documentToScreenRow(T,M);return this.screenToDocumentPosition(w,Number.MAX_VALUE/10)},E.prototype.getRowSplitData=function(T){if(this.$useWrapMode)return this.$wrapData[T]},E.prototype.getScreenTabSize=function(T){return this.$tabSize-(T%this.$tabSize|0)},E.prototype.screenToDocumentRow=function(T,M){return this.screenToDocumentPosition(T,M).row},E.prototype.screenToDocumentColumn=function(T,M){return this.screenToDocumentPosition(T,M).column},E.prototype.screenToDocumentPosition=function(T,M,w){if(T<0)return{row:0,column:0};var F,L=0,R=0,A,I=0,$=0,H=this.$screenRowCache,P=this.$getRowCacheIndex(H,T),q=H.length;if(q&&P>=0)var I=H[P],L=this.$docRowCache[P],G=T>H[q-1];else var G=!q;for(var B=this.getLength()-1,Q=this.getNextFoldLine(L),O=Q?Q.start.row:1/0;I<=T&&($=this.getRowLength(L),!(I+$>T||L>=B));)I+=$,L++,L>O&&(L=Q.end.row+1,Q=this.getNextFoldLine(L,Q),O=Q?Q.start.row:1/0),G&&(this.$docRowCache.push(L),this.$screenRowCache.push(I));if(Q&&Q.start.row<=L)F=this.getFoldDisplayLine(Q),L=Q.start.row;else{if(I+$<=T||L>B)return{row:B,column:this.getLine(B).length};F=this.getLine(L),Q=null}var W=0,U=Math.floor(T-I);if(this.$useWrapMode){var k=this.$wrapData[L];k&&(A=k[U],U>0&&k.length&&(W=k.indent,R=k[U-1]||k[k.length-1],F=F.substring(R)))}return w!==void 0&&this.$bidiHandler.isBidiRow(I+U,L,U)&&(M=this.$bidiHandler.offsetToCol(w)),R+=this.$getStringScreenWidth(F,M-W)[1],this.$useWrapMode&&R>=A&&(R=A-1),Q?Q.idxToPosition(R):{row:L,column:R}},E.prototype.documentToScreenPosition=function(T,M){if(typeof M>"u")var w=this.$clipPositionToDocument(T.row,T.column);else w=this.$clipPositionToDocument(T,M);T=w.row,M=w.column;var F=0,L=null,R=null;R=this.getFoldAt(T,M,1),R&&(T=R.start.row,M=R.start.column);var A,I=0,$=this.$docRowCache,H=this.$getRowCacheIndex($,T),P=$.length;if(P&&H>=0)var I=$[H],F=this.$screenRowCache[H],q=T>$[P-1];else var q=!P;for(var G=this.getNextFoldLine(I),B=G?G.start.row:1/0;I<T;){if(I>=B){if(A=G.end.row+1,A>T)break;G=this.getNextFoldLine(A,G),B=G?G.start.row:1/0}else A=I+1;F+=this.getRowLength(I),I=A,q&&(this.$docRowCache.push(I),this.$screenRowCache.push(F))}var Q="";G&&I>=B?(Q=this.getFoldDisplayLine(G,T,M),L=G.start.row):(Q=this.getLine(T).substring(0,M),L=T);var O=0;if(this.$useWrapMode){var W=this.$wrapData[L];if(W){for(var U=0;Q.length>=W[U];)F++,U++;Q=Q.substring(W[U-1]||0,Q.length),O=U>0?W.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(F+=this.lineWidgets[I].rowsAbove),{row:F,column:O+this.$getStringScreenWidth(Q)[0]}},E.prototype.documentToScreenColumn=function(T,M){return this.documentToScreenPosition(T,M).column},E.prototype.documentToScreenRow=function(T,M){return this.documentToScreenPosition(T,M).row},E.prototype.getScreenLength=function(){var T=0,M=null;if(this.$useWrapMode)for(var L=this.$wrapData.length,R=0,F=0,M=this.$foldData[F++],A=M?M.start.row:1/0;R<L;){var I=this.$wrapData[R];T+=I?I.length+1:1,R++,R>A&&(R=M.end.row+1,M=this.$foldData[F++],A=M?M.start.row:1/0)}else{T=this.getLength();for(var w=this.$foldData,F=0;F<w.length;F++)M=w[F],T-=M.end.row-M.start.row}return this.lineWidgets&&(T+=this.$getWidgetScreenLength()),T},E.prototype.$setFontMetrics=function(T){this.$enableVarChar&&(this.$getStringScreenWidth=function(M,w,F){if(w===0)return[0,0];w||(w=1/0),F=F||0;var L,R;for(R=0;R<M.length&&(L=M.charAt(R),L==="	"?F+=this.getScreenTabSize(F):F+=T.getCharacterWidth(L),!(F>w));R++);return[F,R]})},E.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},E}();_.$uid=0,_.prototype.$modes=o.$modes,_.prototype.getValue=_.prototype.toString,_.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},_.prototype.$overwrite=!1,_.prototype.$mode=null,_.prototype.$modeId=null,_.prototype.$scrollTop=0,_.prototype.$scrollLeft=0,_.prototype.$wrapLimit=80,_.prototype.$useWrapMode=!1,_.prototype.$wrapLimitRange={min:null,max:null},_.prototype.lineWidgets=null,_.prototype.isFullWidth=x,r.implement(_.prototype,l);var m=1,v=2,y=3,C=4,S=9,D=10,g=11,b=12;function x(E){return E<4352?!1:E>=4352&&E<=4447||E>=4515&&E<=4519||E>=4602&&E<=4607||E>=9001&&E<=9002||E>=11904&&E<=11929||E>=11931&&E<=12019||E>=12032&&E<=12245||E>=12272&&E<=12283||E>=12288&&E<=12350||E>=12353&&E<=12438||E>=12441&&E<=12543||E>=12549&&E<=12589||E>=12593&&E<=12686||E>=12688&&E<=12730||E>=12736&&E<=12771||E>=12784&&E<=12830||E>=12832&&E<=12871||E>=12880&&E<=13054||E>=13056&&E<=19903||E>=19968&&E<=42124||E>=42128&&E<=42182||E>=43360&&E<=43388||E>=44032&&E<=55203||E>=55216&&E<=55238||E>=55243&&E<=55291||E>=63744&&E<=64255||E>=65040&&E<=65049||E>=65072&&E<=65106||E>=65108&&E<=65126||E>=65128&&E<=65131||E>=65281&&E<=65376||E>=65504&&E<=65510}e("./edit_session/folding").Folding.call(_.prototype),e("./edit_session/bracket_match").BracketMatch.call(_.prototype),o.defineOptions(_.prototype,"session",{wrap:{set:function(E){if(!E||E=="off"?E=!1:E=="free"?E=!0:E=="printMargin"?E=-1:typeof E=="string"&&(E=parseInt(E,10)||!1),this.$wrap!=E)if(this.$wrap=E,!E)this.setUseWrapMode(!1);else{var T=typeof E=="number"?E:null;this.setWrapLimitRange(T,T),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(E){E=E=="auto"?this.$mode.type!="text":E!="text",E!=this.$wrapAsCode&&(this.$wrapAsCode=E,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(E){this.$useWorker=E,this.$stopWorker(),E&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(E){E=parseInt(E),E>0&&this.$tabSize!==E&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=E,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(E){this.setFoldStyle(E)},handlesSet:!0},overwrite:{set:function(E){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(E){this.doc.setNewLineMode(E)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(E){this.setMode(E)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=_});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var r=e("./lib/lang"),p=e("./lib/oop"),a=e("./range").Range,o=function(){function u(){this.$options={}}return u.prototype.set=function(i){return p.mixin(this.$options,i),this},u.prototype.getOptions=function(){return r.copyObject(this.$options)},u.prototype.setOptions=function(i){this.$options=i},u.prototype.find=function(i){var s=this.$options,f=this.$matchIterator(i,s);if(!f)return!1;var h=null;return f.forEach(function(d,c,_,m){return h=new a(d,c,_,m),c==m&&s.start&&s.start.start&&s.skipCurrent!=!1&&h.isEqual(s.start)?(h=null,!1):!0}),h},u.prototype.findAll=function(i){var s=this.$options;if(!s.needle)return[];this.$assembleRegExp(s);var f=s.range,h=f?i.getLines(f.start.row,f.end.row):i.doc.getAllLines(),d=[],c=s.re;if(s.$isMultiLine){var _=c.length,m=h.length-_,v;e:for(var y=c.offset||0;y<=m;y++){for(var C=0;C<_;C++)if(h[y+C].search(c[C])==-1)continue e;var S=h[y],D=h[y+_-1],g=S.length-S.match(c[0])[0].length,b=D.match(c[_-1])[0].length;v&&v.end.row===y&&v.end.column>g||(d.push(v=new a(y,g,y+_-1,b)),_>2&&(y=y+_-2))}}else for(var x=0;x<h.length;x++)for(var E=r.getMatchOffsets(h[x],c),C=0;C<E.length;C++){var T=E[C];d.push(new a(x,T.offset,x,T.offset+T.length))}if(f){for(var M=f.start.column,w=f.end.column,x=0,C=d.length-1;x<C&&d[x].start.column<M&&d[x].start.row==0;)x++;for(var F=f.end.row-f.start.row;x<C&&d[C].end.column>w&&d[C].end.row==F;)C--;for(d=d.slice(x,C+1),x=0,C=d.length;x<C;x++)d[x].start.row+=f.start.row,d[x].end.row+=f.start.row}return d},u.prototype.replace=function(i,s){var f=this.$options,h=this.$assembleRegExp(f);if(f.$isMultiLine)return s;if(h){var d=h.exec(i);if(!d||d[0].length!=i.length)return null;if(s=i.replace(h,s),f.preserveCase){s=s.split("");for(var c=Math.min(i.length,i.length);c--;){var _=i[c];_&&_.toLowerCase()!=_?s[c]=s[c].toUpperCase():s[c]=s[c].toLowerCase()}s=s.join("")}return s}},u.prototype.$assembleRegExp=function(i,s){if(i.needle instanceof RegExp)return i.re=i.needle;var f=i.needle;if(!i.needle)return i.re=!1;i.regExp||(f=r.escapeRegExp(f));var h=i.caseSensitive?"gm":"gmi";try{new RegExp(f,"u"),i.$supportsUnicodeFlag=!0,h+="u"}catch{i.$supportsUnicodeFlag=!1}if(i.wholeWord&&(f=l(f,i)),i.$isMultiLine=!s&&/[\n\r]/.test(f),i.$isMultiLine)return i.re=this.$assembleMultilineRegExp(f,h);try{var d=new RegExp(f,h)}catch{d=!1}return i.re=d},u.prototype.$assembleMultilineRegExp=function(i,s){for(var f=i.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),h=[],d=0;d<f.length;d++)try{h.push(new RegExp(f[d],s))}catch{return!1}return h},u.prototype.$matchIterator=function(i,s){var f=this.$assembleRegExp(s);if(!f)return!1;var h=s.backwards==!0,d=s.skipCurrent!=!1,c=f.unicode,_=s.range,m=s.start;m||(m=_?_[h?"end":"start"]:i.selection.getRange()),m.start&&(m=m[d!=h?"end":"start"]);var v=_?_.start.row:0,y=_?_.end.row:i.getLength()-1;if(h)var C=function(g){var b=m.row;if(!D(b,m.column,g)){for(b--;b>=v;b--)if(D(b,Number.MAX_VALUE,g))return;if(s.wrap!=!1){for(b=y,v=m.row;b>=v;b--)if(D(b,Number.MAX_VALUE,g))return}}};else var C=function(b){var x=m.row;if(!D(x,m.column,b)){for(x=x+1;x<=y;x++)if(D(x,0,b))return;if(s.wrap!=!1){for(x=v,y=m.row;x<=y;x++)if(D(x,0,b))return}}};if(s.$isMultiLine)var S=f.length,D=function(g,b,x){var E=h?g-S+1:g;if(!(E<0||E+S>i.getLength())){var T=i.getLine(E),M=T.search(f[0]);if(!(!h&&M<b||M===-1)){for(var w=1;w<S;w++)if(T=i.getLine(E+w),T.search(f[w])==-1)return;var F=T.match(f[S-1])[0].length;if(!(h&&F>b)&&x(E,M,E+S-1,F))return!0}}};else if(h)var D=function(b,x,E){var T=i.getLine(b),M=[],w,F=0;for(f.lastIndex=0;w=f.exec(T);){var L=w[0].length;if(F=w.index,!L){if(F>=T.length)break;f.lastIndex=F+=r.skipEmptyMatch(T,F,c)}if(w.index+L>x)break;M.push(w.index,L)}for(var R=M.length-1;R>=0;R-=2){var A=M[R-1],L=M[R];if(E(b,A,b,A+L))return!0}};else var D=function(b,x,E){var T=i.getLine(b),M,w;for(f.lastIndex=x;w=f.exec(T);){var F=w[0].length;if(M=w.index,E(b,M,b,M+F))return!0;if(!F&&(f.lastIndex=M+=r.skipEmptyMatch(T,M,c),M>=T.length))return!1}};return{forEach:C}},u}();function l(u,i){var s=r.supportsLookbehind();function f(_,m){m===void 0&&(m=!0);var v=s&&i.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return v.test(_)||i.regExp?s&&i.$supportsUnicodeFlag?m?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var h=Array.from(u),d=h[0],c=h[h.length-1];return f(d)+u+f(c,!1)}t.Search=o});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var r=this&&this.__extends||function(){var s=function(f,h){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(d[_]=c[_])},s(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");s(f,h);function d(){this.constructor=f}f.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}}(),p=e("../lib/keys"),a=e("../lib/useragent"),o=p.KEY_MODS,l=function(){function s(f,h){this.$init(f,h,!1)}return s.prototype.$init=function(f,h,d){this.platform=h||(a.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(f),this.$singleCommand=d},s.prototype.addCommand=function(f){this.commands[f.name]&&this.removeCommand(f),this.commands[f.name]=f,f.bindKey&&this._buildKeyHash(f)},s.prototype.removeCommand=function(f,h){var d=f&&(typeof f=="string"?f:f.name);f=this.commands[d],h||delete this.commands[d];var c=this.commandKeyBinding;for(var _ in c){var m=c[_];if(m==f)delete c[_];else if(Array.isArray(m)){var v=m.indexOf(f);v!=-1&&(m.splice(v,1),m.length==1&&(c[_]=m[0]))}}},s.prototype.bindKey=function(f,h,d){if(typeof f=="object"&&f&&(d==null&&(d=f.position),f=f[this.platform]),!!f){if(typeof h=="function")return this.addCommand({exec:h,bindKey:f,name:h.name||f});f.split("|").forEach(function(c){var _="";if(c.indexOf(" ")!=-1){var m=c.split(/\s+/);c=m.pop(),m.forEach(function(C){var S=this.parseKeys(C),D=o[S.hashId]+S.key;_+=(_?" ":"")+D,this._addCommandToBinding(_,"chainKeys")},this),_+=" "}var v=this.parseKeys(c),y=o[v.hashId]+v.key;this._addCommandToBinding(_+y,h,d)},this)}},s.prototype._addCommandToBinding=function(f,h,d){var c=this.commandKeyBinding,_;if(!h)delete c[f];else if(!c[f]||this.$singleCommand)c[f]=h;else{Array.isArray(c[f])?(_=c[f].indexOf(h))!=-1&&c[f].splice(_,1):c[f]=[c[f]],typeof d!="number"&&(d=u(h));var m=c[f];for(_=0;_<m.length;_++){var v=m[_],y=u(v);if(y>d)break}m.splice(_,0,h)}},s.prototype.addCommands=function(f){f&&Object.keys(f).forEach(function(h){var d=f[h];if(d){if(typeof d=="string")return this.bindKey(d,h);typeof d=="function"&&(d={exec:d}),typeof d=="object"&&(d.name||(d.name=h),this.addCommand(d))}},this)},s.prototype.removeCommands=function(f){Object.keys(f).forEach(function(h){this.removeCommand(f[h])},this)},s.prototype.bindKeys=function(f){Object.keys(f).forEach(function(h){this.bindKey(h,f[h])},this)},s.prototype._buildKeyHash=function(f){this.bindKey(f.bindKey,f)},s.prototype.parseKeys=function(f){var h=f.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),d=h.pop(),c=p[d];if(p.FUNCTION_KEYS[c])d=p.FUNCTION_KEYS[c].toLowerCase();else if(h.length){if(h.length==1&&h[0]=="shift")return{key:d.toUpperCase(),hashId:-1}}else return{key:d,hashId:-1};for(var _=0,m=h.length;m--;){var v=p.KEY_MODS[h[m]];if(v==null)return typeof console<"u"&&console.error("invalid modifier "+h[m]+" in "+f),!1;_|=v}return{key:d,hashId:_}},s.prototype.findKeyCommand=function(f,h){var d=o[f]+h;return this.commandKeyBinding[d]},s.prototype.handleKeyboard=function(f,h,d,c){if(!(c<0)){var _=o[h]+d,m=this.commandKeyBinding[_];return f.$keyChain&&(f.$keyChain+=" "+_,m=this.commandKeyBinding[f.$keyChain]||m),m&&(m=="chainKeys"||m[m.length-1]=="chainKeys")?(f.$keyChain=f.$keyChain||_,{command:"null"}):(f.$keyChain&&((!h||h==4)&&d.length==1?f.$keyChain=f.$keyChain.slice(0,-_.length-1):(h==-1||c>0)&&(f.$keyChain="")),{command:m})}},s.prototype.getStatusText=function(f,h){return h.$keyChain||""},s}();function u(s){return typeof s=="object"&&s.bindKey&&s.bindKey.position||(s.isDefault?-100:0)}var i=function(s){r(f,s);function f(h,d){var c=s.call(this,h,d)||this;return c.$singleCommand=!0,c}return f}(l);i.call=function(s,f,h){l.prototype.$init.call(s,f,h,!0)},l.call=function(s,f,h){l.prototype.$init.call(s,f,h,!1)},t.HashHandler=i,t.MultiHashHandler=l});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=this&&this.__extends||function(){var u=function(i,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(f[d]=h[d])},u(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");u(i,s);function f(){this.constructor=i}i.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),p=e("../lib/oop"),a=e("../keyboard/hash_handler").MultiHashHandler,o=e("../lib/event_emitter").EventEmitter,l=function(u){r(i,u);function i(s,f){var h=u.call(this,f,s)||this;return h.byName=h.commands,h.setDefaultHandler("exec",function(d){return d.args?d.command.exec(d.editor,d.args,d.event,!1):d.command.exec(d.editor,{},d.event,!0)}),h}return i.prototype.exec=function(s,f,h){if(Array.isArray(s)){for(var d=s.length;d--;)if(this.exec(s[d],f,h))return!0;return!1}if(typeof s=="string"&&(s=this.commands[s]),!s||f&&f.$readOnly&&!s.readOnly||this.$checkCommandState!=!1&&s.isAvailable&&!s.isAvailable(f))return!1;var c={editor:f,command:s,args:h};return c.returnValue=this._emit("exec",c),this._signal("afterExec",c),c.returnValue!==!1},i.prototype.toggleRecording=function(s){if(!this.$inReplay)return s&&s._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(f){this.macro.push([f.command,f.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},i.prototype.replay=function(s){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(s);try{this.$inReplay=!0,this.macro.forEach(function(f){typeof f=="string"?this.exec(f,s):this.exec(f[0],s,f[1])},this)}finally{this.$inReplay=!1}}},i.prototype.trimMacro=function(s){return s.map(function(f){return typeof f[0]!="string"&&(f[0]=f[0].name),f[1]||(f=f[0]),f})},i}(a);p.implement(l.prototype,o),t.CommandManager=l});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var r=e("../lib/lang"),p=e("../config"),a=e("../range").Range;function o(u,i){return{win:u,mac:i}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:o("Ctrl-,","Command-,"),exec:function(u){p.loadModule("ace/ext/settings_menu",function(i){i.init(u),u.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:o("Alt-E","F4"),exec:function(u){p.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(u,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:o("Alt-Shift-E","Shift-F4"),exec:function(u){p.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(u,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:o("Ctrl-A","Command-A"),exec:function(u){u.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:o(null,"Ctrl-L"),exec:function(u){u.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:o("Ctrl-L","Command-L"),exec:function(u,i){typeof i=="number"&&!isNaN(i)&&u.gotoLine(i),u.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(u){u.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(u){u.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:o("F2","F2"),exec:function(u){u.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:o("Alt-F2","Alt-F2"),exec:function(u){u.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:o("Alt-0","Command-Option-0"),exec:function(u){u.session.foldAll(),u.session.unfold(u.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(u){u.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:o("Ctrl-K","Command-G"),exec:function(u){u.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(u){u.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:o("Alt-K","Ctrl-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:o("Ctrl-F","Command-F"),exec:function(u){p.loadModule("ace/ext/searchbox",function(i){i.Search(u)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(u){u.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:o("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(u){u.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(u){u.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:o("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(u){u.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:o("Up","Up|Ctrl-P"),exec:function(u,i){u.navigateUp(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:o("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(u){u.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(u){u.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:o("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(u){u.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:o("Down","Down|Ctrl-N"),exec:function(u,i){u.navigateDown(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(u){u.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:o("Ctrl-Left","Option-Left"),exec:function(u){u.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:o("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(u){u.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:o("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(u){u.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:o("Left","Left|Ctrl-B"),exec:function(u,i){u.navigateLeft(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(u){u.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:o("Ctrl-Right","Option-Right"),exec:function(u){u.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:o("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(u){u.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:o("Shift-Right","Shift-Right"),exec:function(u){u.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:o("Right","Right|Ctrl-F"),exec:function(u,i){u.navigateRight(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(u){u.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:o(null,"Option-PageDown"),exec:function(u){u.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(u){u.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(u){u.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:o(null,"Option-PageUp"),exec:function(u){u.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(u){u.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:o("Ctrl-Up",null),exec:function(u){u.renderer.scrollBy(0,-2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:o("Ctrl-Down",null),exec:function(u){u.renderer.scrollBy(0,2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(u){u.commands.toggleRecording(u)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(u){u.commands.replay(u)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:o("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(u){u.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:o("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(u){u.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(u){u.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(u){},readOnly:!0},{name:"cut",description:"Cut",exec:function(u){var i=u.$copyWithEmptySelection&&u.selection.isEmpty(),s=i?u.selection.getLineRange():u.selection.getRange();u._emit("cut",s),s.isEmpty()||u.session.remove(s),u.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(u,i){u.$handlePaste(i)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:o("Ctrl-D","Command-D"),exec:function(u){u.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(u){u.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(u){u.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:o("Ctrl-/","Command-/"),exec:function(u){u.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(u){u.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(u){u.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(u){u.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(u){p.loadModule("ace/ext/searchbox",function(i){i.Search(u,!0)})}},{name:"undo",description:"Undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(u){u.undo()}},{name:"redo",description:"Redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(u){u.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(u){u.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:o("Alt-Up","Option-Up"),exec:function(u){u.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(u){u.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:o("Alt-Down","Option-Down"),exec:function(u){u.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(u){u.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(u){u.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:o("Shift-Delete",null),exec:function(u){if(u.selection.isEmpty())u.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(u){u.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:o("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(u){u.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:o("Ctrl-Shift-Backspace",null),exec:function(u){var i=u.selection.getRange();i.start.column=0,u.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:o("Ctrl-Shift-Delete",null),exec:function(u){var i=u.selection.getRange();i.end.column=Number.MAX_VALUE,u.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(u){u.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(u){u.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(u){u.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:o("Tab","Tab"),exec:function(u){u.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(u){u.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(u){u.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(u,i){u.insert(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(u,i){u.insert(r.stringRepeat(i.text||"",i.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:o(null,"Ctrl-O"),exec:function(u){u.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:o("Alt-Shift-X","Ctrl-T"),exec:function(u){u.transposeLetters()},multiSelectAction:function(u){u.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(u){u.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(u){u.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:o(null,null),exec:function(u){u.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(u){var i=u.selection.getRange();i.start.column=i.end.column=0,i.end.row++,u.selection.setRange(i,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:o("Ctrl+F3","F3"),exec:function(u){u.openLink()}},{name:"joinlines",description:"Join lines",bindKey:o(null,null),exec:function(u){for(var i=u.selection.isBackwards(),s=i?u.selection.getSelectionLead():u.selection.getSelectionAnchor(),f=i?u.selection.getSelectionAnchor():u.selection.getSelectionLead(),h=u.session.doc.getLine(s.row).length,d=u.session.doc.getTextRange(u.selection.getRange()),c=d.replace(/\n\s*/," ").length,_=u.session.doc.getLine(s.row),m=s.row+1;m<=f.row+1;m++){var v=r.stringTrimLeft(r.stringTrimRight(u.session.doc.getLine(m)));v.length!==0&&(v=" "+v),_+=v}f.row+1<u.session.doc.getLength()-1&&(_+=u.session.doc.getNewLineCharacter()),u.clearSelection(),u.session.doc.replace(new a(s.row,0,f.row+2,0),_),c>0?(u.selection.moveCursorTo(s.row,s.column),u.selection.selectTo(s.row,s.column+c)):(h=u.session.doc.getLine(s.row).length>h?h+1:h,u.selection.moveCursorTo(s.row,h))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:o(null,null),exec:function(u){var i=u.session.doc.getLength()-1,s=u.session.doc.getLine(i).length,f=u.selection.rangeList.ranges,h=[];f.length<1&&(f=[u.selection.getRange()]);for(var d=0;d<f.length;d++)d==f.length-1&&(f[d].end.row===i&&f[d].end.column===s||h.push(new a(f[d].end.row,f[d].end.column,i,s))),d===0?f[d].start.row===0&&f[d].start.column===0||h.push(new a(0,0,f[d].start.row,f[d].start.column)):h.push(new a(f[d-1].end.row,f[d-1].end.column,f[d].start.row,f[d].start.column));u.exitMultiSelectMode(),u.clearSelection();for(var d=0;d<h.length;d++)u.selection.addRange(h[d],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(u){u.selection.clearSelection(),u.navigateLineEnd(),u.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(u){u.selection.clearSelection();var i=u.getCursorPosition();u.selection.moveTo(i.row-1,Number.MAX_VALUE),u.insert(`
`),i.row===0&&u.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(u){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),u.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:o("F1","F1"),exec:function(u){u.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:o(null,null),exec:function(u){u.prompt({$type:"modes"})},readOnly:!0}];for(var l=1;l<9;l++)t.commands.push({name:"foldToLevel"+l,description:"Fold To Level "+l,level:l,exec:function(u){u.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./lib/dom"),p=function(){function a(o){this.session=o,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return a.prototype.getRowLength=function(o){var l;return this.lineWidgets?l=this.lineWidgets[o]&&this.lineWidgets[o].rowCount||0:l=0,!this.$useWrapMode||!this.$wrapData[o]?1+l:this.$wrapData[o].length+1+l},a.prototype.$getWidgetScreenLength=function(){var o=0;return this.lineWidgets.forEach(function(l){l&&l.rowCount&&!l.hidden&&(o+=l.rowCount)}),o},a.prototype.$onChangeEditor=function(o){this.attach(o.editor)},a.prototype.attach=function(o){o&&o.widgetManager&&o.widgetManager!=this&&o.widgetManager.detach(),this.editor!=o&&(this.detach(),this.editor=o,o&&(o.widgetManager=this,o.renderer.on("beforeRender",this.measureWidgets),o.renderer.on("afterRender",this.renderWidgets)))},a.prototype.detach=function(o){var l=this.editor;if(l){this.editor=null,l.widgetManager=null,l.renderer.off("beforeRender",this.measureWidgets),l.renderer.off("afterRender",this.renderWidgets);var u=this.session.lineWidgets;u&&u.forEach(function(i){i&&i.el&&i.el.parentNode&&(i._inDocument=!1,i.el.parentNode.removeChild(i.el))})}},a.prototype.updateOnFold=function(o,l){var u=l.lineWidgets;if(!(!u||!o.action)){for(var i=o.data,s=i.start.row,f=i.end.row,h=o.action=="add",d=s+1;d<f;d++)u[d]&&(u[d].hidden=h);u[f]&&(h?u[s]?u[f].hidden=h:u[s]=u[f]:(u[s]==u[f]&&(u[s]=void 0),u[f].hidden=h))}},a.prototype.updateOnChange=function(o){var l=this.session.lineWidgets;if(l){var u=o.start.row,i=o.end.row-u;if(i!==0)if(o.action=="remove"){var s=l.splice(u+1,i);!l[u]&&s[s.length-1]&&(l[u]=s.pop()),s.forEach(function(h){h&&this.removeLineWidget(h)},this),this.$updateRows()}else{var f=new Array(i);l[u]&&l[u].column!=null&&o.start.column>l[u].column&&u++,f.unshift(u,0),l.splice.apply(l,f),this.$updateRows()}}},a.prototype.$updateRows=function(){var o=this.session.lineWidgets;if(o){var l=!0;o.forEach(function(u,i){if(u)for(l=!1,u.row=i;u.$oldWidget;)u.$oldWidget.row=i,u=u.$oldWidget}),l&&(this.session.lineWidgets=null)}},a.prototype.$registerLineWidget=function(o){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var l=this.session.lineWidgets[o.row];return l&&(o.$oldWidget=l,l.el&&l.el.parentNode&&(l.el.parentNode.removeChild(l.el),l._inDocument=!1)),this.session.lineWidgets[o.row]=o,o},a.prototype.addLineWidget=function(o){if(this.$registerLineWidget(o),o.session=this.session,!this.editor)return o;var l=this.editor.renderer;o.html&&!o.el&&(o.el=r.createElement("div"),o.el.innerHTML=o.html),o.text&&!o.el&&(o.el=r.createElement("div"),o.el.textContent=o.text),o.el&&(r.addCssClass(o.el,"ace_lineWidgetContainer"),o.className&&r.addCssClass(o.el,o.className),o.el.style.position="absolute",o.el.style.zIndex="5",l.container.appendChild(o.el),o._inDocument=!0,o.coverGutter||(o.el.style.zIndex="3"),o.pixelHeight==null&&(o.pixelHeight=o.el.offsetHeight)),o.rowCount==null&&(o.rowCount=o.pixelHeight/l.layerConfig.lineHeight);var u=this.session.getFoldAt(o.row,0);if(o.$fold=u,u){var i=this.session.lineWidgets;o.row==u.end.row&&!i[u.start.row]?i[u.start.row]=o:o.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:o.row}}}),this.$updateRows(),this.renderWidgets(null,l),this.onWidgetChanged(o),o},a.prototype.removeLineWidget=function(o){if(o._inDocument=!1,o.session=null,o.el&&o.el.parentNode&&o.el.parentNode.removeChild(o.el),o.editor&&o.editor.destroy)try{o.editor.destroy()}catch{}if(this.session.lineWidgets){var l=this.session.lineWidgets[o.row];if(l==o)this.session.lineWidgets[o.row]=o.$oldWidget,o.$oldWidget&&this.onWidgetChanged(o.$oldWidget);else for(;l;){if(l.$oldWidget==o){l.$oldWidget=o.$oldWidget;break}l=l.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:o.row}}}),this.$updateRows()},a.prototype.getWidgetsAtRow=function(o){for(var l=this.session.lineWidgets,u=l&&l[o],i=[];u;)i.push(u),u=u.$oldWidget;return i},a.prototype.onWidgetChanged=function(o){this.session._changedWidgets.push(o),this.editor&&this.editor.renderer.updateFull()},a.prototype.measureWidgets=function(o,l){var u=this.session._changedWidgets,i=l.layerConfig;if(!(!u||!u.length)){for(var s=1/0,f=0;f<u.length;f++){var h=u[f];if(!(!h||!h.el)&&h.session==this.session){if(!h._inDocument){if(this.session.lineWidgets[h.row]!=h)continue;h._inDocument=!0,l.container.appendChild(h.el)}h.h=h.el.offsetHeight,h.fixedWidth||(h.w=h.el.offsetWidth,h.screenWidth=Math.ceil(h.w/i.characterWidth));var d=h.h/i.lineHeight;h.coverLine&&(d-=this.session.getRowLineCount(h.row),d<0&&(d=0)),h.rowCount!=d&&(h.rowCount=d,h.row<s&&(s=h.row))}}s!=1/0&&(this.session._emit("changeFold",{data:{start:{row:s}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},a.prototype.renderWidgets=function(o,l){var u=l.layerConfig,i=this.session.lineWidgets;if(i){for(var s=Math.min(this.firstRow,u.firstRow),f=Math.max(this.lastRow,u.lastRow,i.length);s>0&&!i[s];)s--;this.firstRow=u.firstRow,this.lastRow=u.lastRow,l.$cursorLayer.config=u;for(var h=s;h<=f;h++){var d=i[h];if(!(!d||!d.el)){if(d.hidden){d.el.style.top=-100-(d.pixelHeight||0)+"px";continue}d._inDocument||(d._inDocument=!0,l.container.appendChild(d.el));var c=l.$cursorLayer.getPixelPosition({row:h,column:0},!0).top;d.coverLine||(c+=u.lineHeight*this.session.getRowLineCount(d.row)),d.el.style.top=c-u.offset+"px";var _=d.coverGutter?0:l.gutterWidth;d.fixedWidth||(_-=l.scrollLeft),d.el.style.left=_+"px",d.fullWidth&&d.screenWidth&&(d.el.style.minWidth=u.width+2*u.padding+"px"),d.fixedWidth?d.el.style.right=l.scrollBar.getWidth()+"px":d.el.style.right=""}}}},a}();t.LineWidgets=p});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,n){"use strict";var r=e("../lib/keys"),p=e("../mouse/default_gutter_handler").GutterTooltip,a=function(){function l(u){this.editor=u,this.gutterLayer=u.renderer.$gutterLayer,this.element=u.renderer.$gutter,this.lines=u.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new p(this.editor)}return l.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},l.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},l.prototype.$onGutterKeyDown=function(u){if(this.annotationTooltip.isOpen){u.preventDefault(),u.keyCode===r.escape&&this.annotationTooltip.hideTooltip();return}if(u.target===this.element){if(u.keyCode!=r.enter)return;u.preventDefault();var i=this.editor.getCursorPosition().row;this.editor.isRowVisible(i)||this.editor.scrollToLine(i,!0,!0),setTimeout(function(){var s=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),f=this.$findNearestFoldWidget(s),h=this.$findNearestAnnotation(s);if(!(f===null&&h===null)){if(f===null&&h!==null){this.activeRowIndex=h,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(f!==null&&h===null){this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(h-s)<Math.abs(f-s)){this.activeRowIndex=h,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(u),setTimeout(function(){this.editor._signal("gutterkeydown",new o(u,this))}.bind(this),10)},l.prototype.$handleGutterKeyboardInteraction=function(u){if(u.keyCode===r.tab){u.preventDefault();return}if(u.keyCode===r.escape){u.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(u.keyCode===r.up){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(u.keyCode===r.down){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(u.keyCode===r.left){u.preventDefault(),this.$switchLane("annotation");return}if(u.keyCode===r.right){u.preventDefault(),this.$switchLane("fold");return}if(u.keyCode===r.enter||u.keyCode===r.space){switch(u.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var i=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),u),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==i&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(i),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var s=this.lines.cells[this.activeRowIndex].element.childNodes[2],f=s.getBoundingClientRect(),h=this.annotationTooltip.getElement().style;h.left=f.right+"px",h.top=f.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},l.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},l.prototype.$isFoldWidgetVisible=function(u){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),s=this.$getFoldWidget(u).style.display!=="none";return i&&s},l.prototype.$isAnnotationVisible=function(u){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),s=this.$getAnnotation(u).style.display!=="none";return i&&s},l.prototype.$getFoldWidget=function(u){var i=this.lines.get(u),s=i.element;return s.childNodes[1]},l.prototype.$getAnnotation=function(u){var i=this.lines.get(u),s=i.element;return s.childNodes[2]},l.prototype.$findNearestFoldWidget=function(u){if(this.$isFoldWidgetVisible(u))return u;for(var i=0;u-i>0||u+i<this.lines.getLength()-1;){if(i++,u-i>=0&&this.$isFoldWidgetVisible(u-i))return u-i;if(u+i<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(u+i))return u+i}return null},l.prototype.$findNearestAnnotation=function(u){if(this.$isAnnotationVisible(u))return u;for(var i=0;u-i>0||u+i<this.lines.getLength()-1;){if(i++,u-i>=0&&this.$isAnnotationVisible(u-i))return u-i;if(u+i<=this.lines.getLength()-1&&this.$isAnnotationVisible(u+i))return u+i}return null},l.prototype.$focusFoldWidget=function(u){if(u!=null){var i=this.$getFoldWidget(u);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},l.prototype.$focusAnnotation=function(u){if(u!=null){var i=this.$getAnnotation(u);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},l.prototype.$blurFoldWidget=function(u){var i=this.$getFoldWidget(u);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},l.prototype.$blurAnnotation=function(u){var i=this.$getAnnotation(u);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},l.prototype.$moveFoldWidgetUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},l.prototype.$moveFoldWidgetDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},l.prototype.$moveAnnotationUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},l.prototype.$moveAnnotationDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},l.prototype.$switchLane=function(u){switch(u){case"annotation":if(this.activeLane==="annotation")break;var i=this.$findNearestAnnotation(this.activeRowIndex);if(i==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var s=this.$findNearestFoldWidget(this.activeRowIndex);if(s==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=s,this.$focusFoldWidget(this.activeRowIndex);break}},l.prototype.$rowIndexToRow=function(u){var i=this.lines.get(u);return i?i.row:null},l.prototype.$rowToRowIndex=function(u){for(var i=0;i<this.lines.getLength();i++){var s=this.lines.get(i);if(s.row==u)return i}return null},l}();t.GutterKeyboardHandler=a;var o=function(){function l(u,i){this.gutterKeyboardHandler=i,this.domEvent=u}return l.prototype.getKey=function(){return r.keyCodeToString(this.domEvent.keyCode)},l.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},l.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},l.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},l}();t.GutterKeyboardEvent=o});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var r=this&&this.__values||function(M){var w=typeof Symbol=="function"&&Symbol.iterator,F=w&&M[w],L=0;if(F)return F.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&L>=M.length&&(M=void 0),{value:M&&M[L++],done:!M}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},p=e("./lib/oop"),a=e("./lib/dom"),o=e("./lib/lang"),l=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,i=e("./mouse/mouse_handler").MouseHandler,s=e("./mouse/fold_handler").FoldHandler,f=e("./keyboard/keybinding").KeyBinding,h=e("./edit_session").EditSession,d=e("./search").Search,c=e("./range").Range,_=e("./lib/event_emitter").EventEmitter,m=e("./commands/command_manager").CommandManager,v=e("./commands/default_commands").commands,y=e("./config"),C=e("./token_iterator").TokenIterator,S=e("./line_widgets").LineWidgets,D=e("./keyboard/gutter_handler").GutterKeyboardHandler,g=e("./config").nls,b=e("./clipboard"),x=e("./lib/keys"),E=function(){function M(w,F,L){this.session,this.$toDestroy=[];var R=w.getContainerElement();this.container=R,this.renderer=w,this.id="editor"+ ++M.$uid,this.commands=new m(l.isMac?"mac":"win",v),typeof document=="object"&&(this.textInput=new u(w.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new i(this),new s(this)),this.keyBinding=new f(this),this.$search=new d().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(A,I){I._$emitInputEvent.schedule(31)}),this.setSession(F||L&&L.session||new h("")),y.resetOptions(this),L&&this.setOptions(L),y._signal("editor",this)}return M.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},M.prototype.startOperation=function(w){if(this.curOp){if(!w||this.curOp.command)return;this.prevOp=this.curOp}w||(this.previousCommand=null,w={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:w.command||{},args:w.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},M.prototype.endOperation=function(w){if(this.curOp&&this.session){if(w&&w.returnValue===!1||!this.session)return this.curOp=null;if(w==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var F=this.curOp.command,L=F&&F.scrollIntoView;if(L){switch(L){case"center-animate":L="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),A=this.renderer.layerConfig;(R.start.row>=A.lastRow||R.end.row<=A.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}L=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},M.prototype.$historyTracker=function(w){if(this.$mergeUndoDeltas){var F=this.prevOp,L=this.$mergeableCommands,R=F.command&&w.command.name==F.command.name;if(w.command.name=="insertstring"){var A=w.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(A)||/\s/.test(F.args)),this.mergeNextCommand=!0}else R=R&&L.indexOf(w.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:L.indexOf(w.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},M.prototype.setKeyboardHandler=function(w,F){if(w&&typeof w=="string"&&w!="ace"){this.$keybindingId=w;var L=this;y.loadModule(["keybinding",w],function(R){L.$keybindingId==w&&L.keyBinding.setKeyboardHandler(R&&R.handler),F&&F()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(w),F&&F()},M.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},M.prototype.setSession=function(w){if(this.session!=w){this.curOp&&this.endOperation(),this.curOp={};var F=this.session;if(F){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var L=this.session.getSelection();L.off("changeCursor",this.$onCursorChange),L.off("changeSelection",this.$onSelectionChange)}this.session=w,w?(this.$onDocumentChange=this.onDocumentChange.bind(this),w.on("change",this.$onDocumentChange),this.renderer.setSession(w),this.$onChangeMode=this.onChangeMode.bind(this),w.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),w.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),w.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),w.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),w.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),w.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=w.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(w)),this._signal("changeSession",{session:w,oldSession:F}),this.curOp=null,F&&F._signal("changeEditor",{oldEditor:this}),w&&w._signal("changeEditor",{editor:this}),w&&!w.destroyed&&w.bgTokenizer.scheduleStart()}},M.prototype.getSession=function(){return this.session},M.prototype.setValue=function(w,F){return this.session.doc.setValue(w),F?F==1?this.navigateFileEnd():F==-1&&this.navigateFileStart():this.selectAll(),w},M.prototype.getValue=function(){return this.session.getValue()},M.prototype.getSelection=function(){return this.selection},M.prototype.resize=function(w){this.renderer.onResize(w)},M.prototype.setTheme=function(w,F){this.renderer.setTheme(w,F)},M.prototype.getTheme=function(){return this.renderer.getTheme()},M.prototype.setStyle=function(w){this.renderer.setStyle(w)},M.prototype.unsetStyle=function(w){this.renderer.unsetStyle(w)},M.prototype.getFontSize=function(){return this.getOption("fontSize")||a.computedStyle(this.container).fontSize},M.prototype.setFontSize=function(w){this.setOption("fontSize",w)},M.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var w=this;this.$highlightPending=!0,setTimeout(function(){w.$highlightPending=!1;var F=w.session;if(!(!F||F.destroyed)){F.$bracketHighlight&&(F.$bracketHighlight.markerIds.forEach(function(G){F.removeMarker(G)}),F.$bracketHighlight=null);var L=w.getCursorPosition(),R=w.getKeyboardHandler(),A=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(w),I=F.getMatchingBracketRanges(L,A);if(!I){var $=new C(F,L.row,L.column),H=$.getCurrentToken();if(H&&/\b(?:tag-open|tag-name)/.test(H.type)){var P=F.getMatchingTags(L);P&&(I=[P.openTagName,P.closeTagName])}}if(!I&&F.$mode.getMatching&&(I=F.$mode.getMatching(w.session)),!I){w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide();return}var q="ace_bracket";Array.isArray(I)?I.length==1&&(q="ace_error_bracket"):I=[I],I.length==2&&(c.comparePoints(I[0].end,I[1].start)==0?I=[c.fromPoints(I[0].start,I[1].end)]:c.comparePoints(I[0].start,I[1].end)==0&&(I=[c.fromPoints(I[1].start,I[0].end)])),F.$bracketHighlight={ranges:I,markerIds:I.map(function(G){return F.addMarker(G,q,"text")})},w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide()}},50)}},M.prototype.focus=function(){this.textInput.focus()},M.prototype.isFocused=function(){return this.textInput.isFocused()},M.prototype.blur=function(){this.textInput.blur()},M.prototype.onFocus=function(w){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",w))},M.prototype.onBlur=function(w){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",w))},M.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},M.prototype.onDocumentChange=function(w){var F=this.session.$useWrapMode,L=w.start.row==w.end.row?w.end.row:1/0;this.renderer.updateLines(w.start.row,L,F),this._signal("change",w),this.$cursorChange()},M.prototype.onTokenizerUpdate=function(w){var F=w.data;this.renderer.updateLines(F.first,F.last)},M.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},M.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},M.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},M.prototype.$updateHighlightActiveLine=function(){var w=this.getSession(),F;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(F=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(F=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(F=!1)),w.$highlightLineMarker&&!F)w.removeMarker(w.$highlightLineMarker.id),w.$highlightLineMarker=null;else if(!w.$highlightLineMarker&&F){var L=new c(F.row,F.column,F.row,1/0);L.id=w.addMarker(L,"ace_active-line","screenLine"),w.$highlightLineMarker=L}else F&&(w.$highlightLineMarker.start.row=F.row,w.$highlightLineMarker.end.row=F.row,w.$highlightLineMarker.start.column=F.column,w._signal("changeBackMarker"))},M.prototype.onSelectionChange=function(w){var F=this.session;if(F.$selectionMarker&&F.removeMarker(F.$selectionMarker),F.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var L=this.selection.getRange(),R=this.getSelectionStyle();F.$selectionMarker=F.addMarker(L,"ace_selection",R)}var A=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(A),this._signal("changeSelection")},M.prototype.$getSelectionHighLightRegexp=function(){var w=this.session,F=this.getSelectionRange();if(!(F.isEmpty()||F.isMultiLine())){var L=F.start.column,R=F.end.column,A=w.getLine(F.start.row),I=A.substring(L,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var $=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),H=A.substring(L-1,R+1);if($.test(H))return $}}},M.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},M.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},M.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},M.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},M.prototype.onChangeMode=function(w){this.renderer.updateText(),this._emit("changeMode",w)},M.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},M.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},M.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},M.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},M.prototype.getCopyText=function(){var w=this.getSelectedText(),F=this.session.doc.getNewLineCharacter(),L=!1;if(!w&&this.$copyWithEmptySelection){L=!0;for(var R=this.selection.getAllRanges(),A=0;A<R.length;A++){var I=R[A];A&&R[A-1].start.row==I.start.row||(w+=this.session.getLine(I.start.row)+F)}}var $={text:w};return this._signal("copy",$),b.lineMode=L?$.text:!1,$.text},M.prototype.onCopy=function(){this.commands.exec("copy",this)},M.prototype.onCut=function(){this.commands.exec("cut",this)},M.prototype.onPaste=function(w,F){var L={text:w,event:F};this.commands.exec("paste",this,L)},M.prototype.$handlePaste=function(w){typeof w=="string"&&(w={text:w}),this._signal("paste",w);var F=w.text,L=F===b.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)L?R.insert({row:this.selection.lead.row,column:0},F):this.insert(F);else if(L)this.selection.rangeList.ranges.forEach(function(q){R.insert({row:q.start.row,column:0},F)});else{var A=F.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,$=A.length==2&&(!A[0]||!A[1]);if(A.length!=I.length||$)return this.commands.exec("insertstring",this,F);for(var H=I.length;H--;){var P=I[H];P.isEmpty()||R.remove(P),R.insert(P.start,A[H])}}},M.prototype.execCommand=function(w,F){return this.commands.exec(w,this,F)},M.prototype.insert=function(w,F){var L=this.session,R=L.getMode(),A=this.getCursorPosition();if(this.getBehavioursEnabled()&&!F){var I=R.transformAction(L.getState(A.row),"insertion",this,L,w);I&&(w!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),w=I.text)}if(w=="	"&&(w=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&w.indexOf(`
`)==-1){var $=c.fromPoints(A,A);$.end.column+=w.length,this.session.remove($)}}else{var $=this.getSelectionRange();A=this.session.remove($),this.clearSelection()}if(w==`
`||w==`\r
`){var G=L.getLine(A.row);if(A.column>G.search(/\S|$/)){var H=G.substr(A.column).search(/\S|$/);L.doc.removeInLine(A.row,A.column,A.column+H)}}this.clearSelection();var P=A.column,q=L.getState(A.row),G=L.getLine(A.row),B=R.checkOutdent(q,G,w);if(L.insert(A,w),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new c(A.row,P+I.selection[0],A.row,P+I.selection[1])):this.selection.setSelectionRange(new c(A.row+I.selection[0],I.selection[1],A.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(L.getDocument().isNewLine(w)){var Q=R.getNextLineIndent(q,G.slice(0,A.column),L.getTabString());L.insert({row:A.row+1,column:0},Q)}B&&R.autoOutdent(q,L,A.row)}},M.prototype.autoIndent=function(){var w=this.session,F=w.getMode(),L,R;if(this.selection.isEmpty())L=0,R=w.doc.getLength()-1;else{var A=this.getSelectionRange();L=A.start.row,R=A.end.row}for(var I="",$="",H="",P,q,G,B=w.getTabString(),Q=L;Q<=R;Q++)Q>0&&(I=w.getState(Q-1),$=w.getLine(Q-1),H=F.getNextLineIndent(I,$,B)),P=w.getLine(Q),q=F.$getIndent(P),H!==q&&(q.length>0&&(G=new c(Q,0,Q,q.length),w.remove(G)),H.length>0&&w.insert({row:Q,column:0},H)),F.autoOutdent(I,w,Q)},M.prototype.onTextInput=function(w,F){if(!F)return this.keyBinding.onTextInput(w);this.startOperation({command:{name:"insertstring"}});var L=this.applyComposition.bind(this,w,F);this.selection.rangeCount?this.forEachSelection(L):L(),this.endOperation()},M.prototype.applyComposition=function(w,F){if(F.extendLeft||F.extendRight){var L=this.selection.getRange();L.start.column-=F.extendLeft,L.end.column+=F.extendRight,L.start.column<0&&(L.start.row--,L.start.column+=this.session.getLine(L.start.row).length+1),this.selection.setRange(L),!w&&!L.isEmpty()&&this.remove()}if((w||!this.selection.isEmpty())&&this.insert(w,!0),F.restoreStart||F.restoreEnd){var L=this.selection.getRange();L.start.column-=F.restoreStart,L.end.column-=F.restoreEnd,this.selection.setRange(L)}},M.prototype.onCommandKey=function(w,F,L){return this.keyBinding.onCommandKey(w,F,L)},M.prototype.setOverwrite=function(w){this.session.setOverwrite(w)},M.prototype.getOverwrite=function(){return this.session.getOverwrite()},M.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},M.prototype.setScrollSpeed=function(w){this.setOption("scrollSpeed",w)},M.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},M.prototype.setDragDelay=function(w){this.setOption("dragDelay",w)},M.prototype.getDragDelay=function(){return this.getOption("dragDelay")},M.prototype.setSelectionStyle=function(w){this.setOption("selectionStyle",w)},M.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},M.prototype.setHighlightActiveLine=function(w){this.setOption("highlightActiveLine",w)},M.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},M.prototype.setHighlightGutterLine=function(w){this.setOption("highlightGutterLine",w)},M.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},M.prototype.setHighlightSelectedWord=function(w){this.setOption("highlightSelectedWord",w)},M.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},M.prototype.setAnimatedScroll=function(w){this.renderer.setAnimatedScroll(w)},M.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},M.prototype.setShowInvisibles=function(w){this.renderer.setShowInvisibles(w)},M.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},M.prototype.setDisplayIndentGuides=function(w){this.renderer.setDisplayIndentGuides(w)},M.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},M.prototype.setHighlightIndentGuides=function(w){this.renderer.setHighlightIndentGuides(w)},M.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},M.prototype.setShowPrintMargin=function(w){this.renderer.setShowPrintMargin(w)},M.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},M.prototype.setPrintMarginColumn=function(w){this.renderer.setPrintMarginColumn(w)},M.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},M.prototype.setReadOnly=function(w){this.setOption("readOnly",w)},M.prototype.getReadOnly=function(){return this.getOption("readOnly")},M.prototype.setBehavioursEnabled=function(w){this.setOption("behavioursEnabled",w)},M.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},M.prototype.setWrapBehavioursEnabled=function(w){this.setOption("wrapBehavioursEnabled",w)},M.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},M.prototype.setShowFoldWidgets=function(w){this.setOption("showFoldWidgets",w)},M.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},M.prototype.setFadeFoldWidgets=function(w){this.setOption("fadeFoldWidgets",w)},M.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},M.prototype.remove=function(w){this.selection.isEmpty()&&(w=="left"?this.selection.selectLeft():this.selection.selectRight());var F=this.getSelectionRange();if(this.getBehavioursEnabled()){var L=this.session,R=L.getState(F.start.row),A=L.getMode().transformAction(R,"deletion",this,L,F);if(F.end.column===0){var I=L.getTextRange(F);if(I[I.length-1]==`
`){var $=L.getLine(F.end.row);/^\s+$/.test($)&&(F.end.column=$.length)}}A&&(F=A)}this.session.remove(F),this.clearSelection()},M.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var w=this.getSelectionRange();w.start.column==w.end.column&&w.start.row==w.end.row&&(w.end.column=0,w.end.row++),this.session.remove(w),this.clearSelection()},M.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var w=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(w)},M.prototype.setGhostText=function(w,F){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(w,F)},M.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},M.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var w=this.getCursorPosition(),F=w.column;if(F!==0){var L=this.session.getLine(w.row),R,A;F<L.length?(R=L.charAt(F)+L.charAt(F-1),A=new c(w.row,F-1,w.row,F+1)):(R=L.charAt(F-1)+L.charAt(F-2),A=new c(w.row,F-2,w.row,F)),this.session.replace(A,R),this.session.selection.moveToPosition(A.end)}}},M.prototype.toLowerCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var F=this.getSelectionRange(),L=this.session.getTextRange(F);this.session.replace(F,L.toLowerCase()),this.selection.setSelectionRange(w)},M.prototype.toUpperCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var F=this.getSelectionRange(),L=this.session.getTextRange(F);this.session.replace(F,L.toUpperCase()),this.selection.setSelectionRange(w)},M.prototype.indent=function(){var w=this.session,F=this.getSelectionRange();if(F.start.row<F.end.row){var L=this.$getSelectedRows();w.indentRows(L.first,L.last,"	");return}else if(F.start.column<F.end.column){var R=w.getTextRange(F);if(!/^\s+$/.test(R)){var L=this.$getSelectedRows();w.indentRows(L.first,L.last,"	");return}}var A=w.getLine(F.start.row),I=F.start,$=w.getTabSize(),H=w.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var P=$-H%$,q=o.stringRepeat(" ",P);else{for(var P=H%$;A[F.start.column-1]==" "&&P;)F.start.column--,P--;this.selection.setSelectionRange(F),q="	"}return this.insert(q)},M.prototype.blockIndent=function(){var w=this.$getSelectedRows();this.session.indentRows(w.first,w.last,"	")},M.prototype.blockOutdent=function(){var w=this.session.getSelection();this.session.outdentRows(w.getRange())},M.prototype.sortLines=function(){for(var w=this.$getSelectedRows(),F=this.session,L=[],R=w.first;R<=w.last;R++)L.push(F.getLine(R));L.sort(function($,H){return $.toLowerCase()<H.toLowerCase()?-1:$.toLowerCase()>H.toLowerCase()?1:0});for(var A=new c(0,0,0,0),R=w.first;R<=w.last;R++){var I=F.getLine(R);A.start.row=R,A.end.row=R,A.end.column=I.length,F.replace(A,L[R-w.first])}},M.prototype.toggleCommentLines=function(){var w=this.session.getState(this.getCursorPosition().row),F=this.$getSelectedRows();this.session.getMode().toggleCommentLines(w,this.session,F.first,F.last)},M.prototype.toggleBlockComment=function(){var w=this.getCursorPosition(),F=this.session.getState(w.row),L=this.getSelectionRange();this.session.getMode().toggleBlockComment(F,this.session,L,w)},M.prototype.getNumberAt=function(w,F){var L=/[\-]?[0-9]+(?:\.[0-9]+)?/g;L.lastIndex=0;for(var R=this.session.getLine(w);L.lastIndex<F;){var A=L.exec(R);if(A.index<=F&&A.index+A[0].length>=F){var I={value:A[0],start:A.index,end:A.index+A[0].length};return I}}return null},M.prototype.modifyNumber=function(w){var F=this.selection.getCursor().row,L=this.selection.getCursor().column,R=new c(F,L-1,F,L),A=this.session.getTextRange(R);if(!isNaN(parseFloat(A))&&isFinite(A)){var I=this.getNumberAt(F,L);if(I){var $=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,H=I.start+I.value.length-$,P=parseFloat(I.value);P*=Math.pow(10,H),$!==I.end&&L<$?w*=Math.pow(10,I.end-L-1):w*=Math.pow(10,I.end-L),P+=w,P/=Math.pow(10,H);var q=P.toFixed(H),G=new c(F,I.start,F,I.end);this.session.replace(G,q),this.moveCursorTo(F,Math.max(I.start+1,L+q.length-I.value.length))}}else this.toggleWord()},M.prototype.toggleWord=function(){var w=this.selection.getCursor().row,F=this.selection.getCursor().column;this.selection.selectWord();var L=this.getSelectedText(),R=this.selection.getWordRange().start.column,A=L.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=F-R-1;I<0&&(I=0);var $=0,H=0,P=this;L.match(/[A-Za-z0-9_]+/)&&A.forEach(function(te,J){H=$+te.length,I>=$&&I<=H&&(L=te,P.selection.clearSelection(),P.moveCursorTo(w,$+R),P.selection.selectTo(w,H+R)),$=H});for(var q=this.$toggleWordPairs,G,B=0;B<q.length;B++)for(var Q=q[B],O=0;O<=1;O++){var W=+!O,U=L.match(new RegExp("^\\s?_?("+o.escapeRegExp(Q[O])+")\\s?$","i"));if(U){var k=L.match(new RegExp("([_]|^|\\s)("+o.escapeRegExp(U[1])+")($|\\s)","g"));k&&(G=L.replace(new RegExp(o.escapeRegExp(Q[O]),"i"),function(te){var J=Q[W];return te.toUpperCase()==te?J=J.toUpperCase():te.charAt(0).toUpperCase()==te.charAt(0)&&(J=J.substr(0,0)+Q[W].charAt(0).toUpperCase()+J.substr(1)),J}),this.insert(G),G="")}}},M.prototype.findLinkAt=function(w,F){var L,R,A=this.session.getLine(w),I=A.split(/((?:https?|ftp):\/\/[\S]+)/),$=F;$<0&&($=0);var H=0,P=0,q;try{for(var G=r(I),B=G.next();!B.done;B=G.next()){var Q=B.value;if(P=H+Q.length,$>=H&&$<=P&&Q.match(/((?:https?|ftp):\/\/[\S]+)/)){q=Q.replace(/[\s:.,'";}\]]+$/,"");break}H=P}}catch(O){L={error:O}}finally{try{B&&!B.done&&(R=G.return)&&R.call(G)}finally{if(L)throw L.error}}return q},M.prototype.openLink=function(){var w=this.selection.getCursor(),F=this.findLinkAt(w.row,w.column);return F&&window.open(F,"_blank"),F!=null},M.prototype.removeLines=function(){var w=this.$getSelectedRows();this.session.removeFullLines(w.first,w.last),this.clearSelection()},M.prototype.duplicateSelection=function(){var w=this.selection,F=this.session,L=w.getRange(),R=w.isBackwards();if(L.isEmpty()){var A=L.start.row;F.duplicateLines(A,A)}else{var I=R?L.start:L.end,$=F.insert(I,F.getTextRange(L));L.start=I,L.end=$,w.setSelectionRange(L,R)}},M.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},M.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},M.prototype.moveText=function(w,F,L){return this.session.moveText(w,F,L)},M.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},M.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},M.prototype.$moveLines=function(w,F){var L,R,A=this.selection;if(!A.inMultiSelectMode||this.inVirtualSelectionMode){var I=A.toOrientedRange();L=this.$getSelectedRows(I),R=this.session.$moveLines(L.first,L.last,F?0:w),F&&w==-1&&(R=0),I.moveBy(R,0),A.fromOrientedRange(I)}else{var $=A.rangeList.ranges;A.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var H=0,P=0,q=$.length,G=0;G<q;G++){var B=G;$[G].moveBy(H,0),L=this.$getSelectedRows($[G]);for(var Q=L.first,O=L.last;++G<q;){P&&$[G].moveBy(P,0);var W=this.$getSelectedRows($[G]);if(F&&W.first!=O)break;if(!F&&W.first>O+1)break;O=W.last}for(G--,H=this.session.$moveLines(Q,O,F?0:w),F&&w==-1&&(B=G+1);B<=G;)$[B].moveBy(H,0),B++;F||(H=0),P+=H}A.fromOrientedRange(A.ranges[0]),A.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},M.prototype.$getSelectedRows=function(w){return w=(w||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(w.start.row),last:this.session.getRowFoldEnd(w.end.row)}},M.prototype.onCompositionStart=function(w){this.renderer.showComposition(w)},M.prototype.onCompositionUpdate=function(w){this.renderer.setCompositionText(w)},M.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},M.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},M.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},M.prototype.isRowVisible=function(w){return w>=this.getFirstVisibleRow()&&w<=this.getLastVisibleRow()},M.prototype.isRowFullyVisible=function(w){return w>=this.renderer.getFirstFullyVisibleRow()&&w<=this.renderer.getLastFullyVisibleRow()},M.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},M.prototype.$moveByPage=function(w,F){var L=this.renderer,R=this.renderer.layerConfig,A=w*Math.floor(R.height/R.lineHeight);F===!0?this.selection.$moveSelection(function(){this.moveCursorBy(A,0)}):F===!1&&(this.selection.moveCursorBy(A,0),this.selection.clearSelection());var I=L.scrollTop;L.scrollBy(0,A*R.lineHeight),F!=null&&L.scrollCursorIntoView(null,.5),L.animateScrolling(I)},M.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},M.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},M.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},M.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},M.prototype.scrollPageDown=function(){this.$moveByPage(1)},M.prototype.scrollPageUp=function(){this.$moveByPage(-1)},M.prototype.scrollToRow=function(w){this.renderer.scrollToRow(w)},M.prototype.scrollToLine=function(w,F,L,R){this.renderer.scrollToLine(w,F,L,R)},M.prototype.centerSelection=function(){var w=this.getSelectionRange(),F={row:Math.floor(w.start.row+(w.end.row-w.start.row)/2),column:Math.floor(w.start.column+(w.end.column-w.start.column)/2)};this.renderer.alignCursor(F,.5)},M.prototype.getCursorPosition=function(){return this.selection.getCursor()},M.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},M.prototype.getSelectionRange=function(){return this.selection.getRange()},M.prototype.selectAll=function(){this.selection.selectAll()},M.prototype.clearSelection=function(){this.selection.clearSelection()},M.prototype.moveCursorTo=function(w,F){this.selection.moveCursorTo(w,F)},M.prototype.moveCursorToPosition=function(w){this.selection.moveCursorToPosition(w)},M.prototype.jumpToMatching=function(w,F){var L=this.getCursorPosition(),R=new C(this.session,L.row,L.column),A=R.getCurrentToken(),I=0;A&&A.type.indexOf("tag-name")!==-1&&(A=R.stepBackward());var $=A||R.stepForward();if($){var H,P=!1,q={},G=L.column-$.start,B,Q={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if($.value.match(/[{}()\[\]]/g)){for(;G<$.value.length&&!P;G++)if(Q[$.value[G]])switch(B=Q[$.value[G]]+"."+$.type.replace("rparen","lparen"),isNaN(q[B])&&(q[B]=0),$.value[G]){case"(":case"[":case"{":q[B]++;break;case")":case"]":case"}":q[B]--,q[B]===-1&&(H="bracket",P=!0);break}}else $.type.indexOf("tag-name")!==-1&&(isNaN(q[$.value])&&(q[$.value]=0),A.value==="<"&&I>1?q[$.value]++:A.value==="</"&&q[$.value]--,q[$.value]===-1&&(H="tag",P=!0));P||(A=$,I++,$=R.stepForward(),G=0)}while($&&!P);if(H){var O,W;if(H==="bracket")O=this.session.getBracketRange(L),O||(O=new c(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+G-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+G-1),W=O.start,(F||W.row===L.row&&Math.abs(W.column-L.column)<2)&&(O=this.session.getBracketRange(W)));else if(H==="tag"){if(!$||$.type.indexOf("tag-name")===-1)return;if(O=new c(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),O.compare(L.row,L.column)===0){var U=this.session.getMatchingTags(L);U&&(U.openTag.contains(L.row,L.column)?(O=U.closeTag,W=O.start):(O=U.openTag,U.closeTag.start.row===L.row&&U.closeTag.start.column===L.column?W=O.end:W=O.start))}W=W||O.start}W=O&&O.cursor||W,W&&(w?O&&F?this.selection.setRange(O):O&&O.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(W.row,W.column):this.selection.moveTo(W.row,W.column))}}},M.prototype.gotoLine=function(w,F,L){this.selection.clearSelection(),this.session.unfold({row:w-1,column:F||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(w-1,F||0),this.isRowFullyVisible(w-1)||this.scrollToLine(w-1,!0,L)},M.prototype.navigateTo=function(w,F){this.selection.moveTo(w,F)},M.prototype.navigateUp=function(w){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var F=this.selection.anchor.getPosition();return this.moveCursorToPosition(F)}this.selection.clearSelection(),this.selection.moveCursorBy(-w||-1,0)},M.prototype.navigateDown=function(w){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var F=this.selection.anchor.getPosition();return this.moveCursorToPosition(F)}this.selection.clearSelection(),this.selection.moveCursorBy(w||1,0)},M.prototype.navigateLeft=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorLeft();else{var F=this.getSelectionRange().start;this.moveCursorToPosition(F)}this.clearSelection()},M.prototype.navigateRight=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorRight();else{var F=this.getSelectionRange().end;this.moveCursorToPosition(F)}this.clearSelection()},M.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},M.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},M.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},M.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},M.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},M.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},M.prototype.replace=function(w,F){F&&this.$search.set(F);var L=this.$search.find(this.session),R=0;return L&&(this.$tryReplace(L,w)&&(R=1),this.selection.setSelectionRange(L),this.renderer.scrollSelectionIntoView(L.start,L.end)),R},M.prototype.replaceAll=function(w,F){F&&this.$search.set(F);var L=this.$search.findAll(this.session),R=0;if(!L.length)return R;var A=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=L.length-1;I>=0;--I)this.$tryReplace(L[I],w)&&R++;return this.selection.setSelectionRange(A),R},M.prototype.$tryReplace=function(w,F){var L=this.session.getTextRange(w);return F=this.$search.replace(L,F),F!==null?(w.end=this.session.replace(w,F),w):null},M.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},M.prototype.find=function(w,F,L){F||(F={}),typeof w=="string"||w instanceof RegExp?F.needle=w:typeof w=="object"&&p.mixin(F,w);var R=this.selection.getRange();F.needle==null&&(w=this.session.getTextRange(R)||this.$search.$options.needle,w||(R=this.session.getWordRange(R.start.row,R.start.column),w=this.session.getTextRange(R)),this.$search.set({needle:w})),this.$search.set(F),F.start||this.$search.set({start:R});var A=this.$search.find(this.session);if(F.preventScroll)return A;if(A)return this.revealRange(A,L),A;F.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},M.prototype.findNext=function(w,F){this.find({skipCurrent:!0,backwards:!1},w,F)},M.prototype.findPrevious=function(w,F){this.find(w,{skipCurrent:!0,backwards:!0},F)},M.prototype.revealRange=function(w,F){this.session.unfold(w),this.selection.setSelectionRange(w);var L=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(w.start,w.end,.5),F!==!1&&this.renderer.animateScrolling(L)},M.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(w){w.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},M.prototype.setAutoScrollEditorIntoView=function(w){if(w){var F,L=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var A=this.$scrollAnchor;A.style.cssText="position:absolute",this.container.insertBefore(A,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),$=this.renderer.on("beforeRender",function(){R&&(F=L.renderer.container.getBoundingClientRect())}),H=this.renderer.on("afterRender",function(){if(R&&F&&(L.isFocused()||L.searchBox&&L.searchBox.isFocused())){var P=L.renderer,q=P.$cursorLayer.$pixelPos,G=P.layerConfig,B=q.top-G.offset;q.top>=0&&B+F.top<0?R=!0:q.top<G.height&&q.top+F.top+G.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(A.style.top=B+"px",A.style.left=q.left+"px",A.style.height=G.lineHeight+"px",A.scrollIntoView(R)),R=F=null}});this.setAutoScrollEditorIntoView=function(P){P||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",H),this.renderer.off("beforeRender",$))}}},M.prototype.$resetCursorStyle=function(){var w=this.$cursorStyle||"ace",F=this.renderer.$cursorLayer;F&&(F.setSmoothBlinking(/smooth/.test(w)),F.isBlinking=!this.$readOnly&&w!="wide",a.setCssClass(F.element,"ace_slim-cursors",/slim/.test(w)))},M.prototype.prompt=function(w,F,L){var R=this;y.loadModule("ace/ext/prompt",function(A){A.prompt(R,w,F,L)})},M}();E.$uid=0,E.prototype.curOp=null,E.prototype.prevOp={},E.prototype.$mergeableCommands=["backspace","del","insertstring"],E.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],p.implement(E.prototype,_),y.defineOptions(E.prototype,"editor",{selectionStyle:{set:function(M){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:M})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(M){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(M){this.textInput.setReadOnly(M),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(M){this.textInput.setCopyWithEmptySelection(M)},initialValue:!1},cursorStyle:{set:function(M){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(M){this.setAutoScrollEditorIntoView(M)}},keyboardHandler:{set:function(M){this.setKeyboardHandler(M)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(M){this.session.setValue(M)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(M){this.setSession(M)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(M){this.renderer.$gutterLayer.setShowLineNumbers(M),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),M&&this.$relativeLineNumbers?T.attach(this):T.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(M){this.$showLineNumbers&&M?T.attach(this):T.detach(this)}},placeholder:{set:function(M){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var w=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(w&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),a.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!w&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),a.addCssClass(this.container,"ace_hasPlaceholder");var F=a.createElement("div");F.className="ace_placeholder",F.textContent=this.$placeholder||"",this.renderer.placeholderNode=F,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!w&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(M){var w={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},F=function(R){if(R.target==this.renderer.scroller&&R.keyCode===x.enter){R.preventDefault();var A=this.getCursorPosition().row;this.isRowVisible(A)||this.scrollToLine(A,!0,!0),this.focus()}},L;M?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(l.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",g("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",g("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",F.bind(this)),this.commands.addCommand(w),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",g("editor")),this.renderer.$gutter.setAttribute("aria-label",g("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),L||(L=new D(this)),L.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",F.bind(this)),this.commands.removeCommand(w),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),L&&L.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var T={getText:function(M,w){return(Math.abs(M.selection.lead.row-w)||w+1+(w<9?"\xB7":""))+""},getWidth:function(M,w,F){return Math.max(w.toString().length,(F.lastRow+1).toString().length,2)*F.characterWidth},update:function(M,w){w.renderer.$loop.schedule(w.renderer.CHANGE_GUTTER)},attach:function(M){M.renderer.$gutterLayer.$renderer=this,M.on("changeSelection",this.update),this.update(null,M)},detach:function(M){M.renderer.$gutterLayer.$renderer==this&&(M.renderer.$gutterLayer.$renderer=null),M.off("changeSelection",this.update),this.update(null,M)}};t.Editor=E});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom"),p=function(){function a(o,l){this.element=o,this.canvasHeight=l||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return a.prototype.moveContainer=function(o){r.translate(this.element,0,-(o.firstRowScreen*o.lineHeight%this.canvasHeight)-o.offset*this.$offsetCoefficient)},a.prototype.pageChanged=function(o,l){return Math.floor(o.firstRowScreen*o.lineHeight/this.canvasHeight)!==Math.floor(l.firstRowScreen*l.lineHeight/this.canvasHeight)},a.prototype.computeLineTop=function(o,l,u){var i=l.firstRowScreen*l.lineHeight,s=Math.floor(i/this.canvasHeight),f=u.documentToScreenRow(o,0)*l.lineHeight;return f-s*this.canvasHeight},a.prototype.computeLineHeight=function(o,l,u){return l.lineHeight*u.getRowLineCount(o)},a.prototype.getLength=function(){return this.cells.length},a.prototype.get=function(o){return this.cells[o]},a.prototype.shift=function(){this.$cacheCell(this.cells.shift())},a.prototype.pop=function(){this.$cacheCell(this.cells.pop())},a.prototype.push=function(o){if(Array.isArray(o)){this.cells.push.apply(this.cells,o);for(var l=r.createFragment(this.element),u=0;u<o.length;u++)l.appendChild(o[u].element);this.element.appendChild(l)}else this.cells.push(o),this.element.appendChild(o.element)},a.prototype.unshift=function(o){if(Array.isArray(o)){this.cells.unshift.apply(this.cells,o);for(var l=r.createFragment(this.element),u=0;u<o.length;u++)l.appendChild(o[u].element);this.element.firstChild?this.element.insertBefore(l,this.element.firstChild):this.element.appendChild(l)}else this.cells.unshift(o),this.element.insertAdjacentElement("afterbegin",o.element)},a.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},a.prototype.$cacheCell=function(o){o&&(o.element.remove(),this.cellCache.push(o))},a.prototype.createCell=function(o,l,u,i){var s=this.cellCache.pop();if(!s){var f=r.createElement("div");i&&i(f),this.element.appendChild(f),s={element:f,text:"",row:o}}return s.row=o,s},a}();t.Lines=p});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,n){"use strict";var r=e("../lib/dom"),p=e("../lib/oop"),a=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,l=e("./lines").Lines,u=e("../config").nls,i=function(){function f(h){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",h.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new l(this.element),this.$lines.$offsetCoefficient=1}return f.prototype.setSession=function(h){this.session&&this.session.off("change",this.$updateAnnotations),this.session=h,h&&h.on("change",this.$updateAnnotations)},f.prototype.addGutterDecoration=function(h,d){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(h,d)},f.prototype.removeGutterDecoration=function(h,d){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(h,d)},f.prototype.setAnnotations=function(h){this.$annotations=[];for(var d=0;d<h.length;d++){var c=h[d],_=c.row,m=this.$annotations[_];m||(m=this.$annotations[_]={text:[],type:[]});var v=c.text,y=c.type;v=v?a.escapeHTML(v):c.html||"",m.text.indexOf(v)===-1&&(m.text.push(v),m.type.push(y));var C=c.className;C?m.className=C:y=="error"?m.className=" ace_error":y=="warning"&&m.className!=" ace_error"?m.className=" ace_warning":y=="info"&&!m.className&&(m.className=" ace_info")}},f.prototype.$updateAnnotations=function(h){if(this.$annotations.length){var d=h.start.row,c=h.end.row-d;if(c!==0)if(h.action=="remove")this.$annotations.splice(d,c+1,null);else{var _=new Array(c+1);_.unshift(d,1),this.$annotations.splice.apply(this.$annotations,_)}}},f.prototype.update=function(h){this.config=h;var d=this.session,c=h.firstRow,_=Math.min(h.lastRow+h.gutterOffset,d.getLength()-1);this.oldLastRow=_,this.config=h,this.$lines.moveContainer(h),this.$updateCursorRow();for(var m=d.getNextFoldLine(c),v=m?m.start.row:1/0,y=null,C=-1,S=c;;){if(S>v&&(S=m.end.row+1,m=d.getNextFoldLine(S,m),v=m?m.start.row:1/0),S>_){for(;this.$lines.getLength()>C+1;)this.$lines.pop();break}y=this.$lines.get(++C),y?y.row=S:(y=this.$lines.createCell(S,h,this.session,s),this.$lines.push(y)),this.$renderCell(y,h,m,S),S++}this._signal("afterRender"),this.$updateGutterWidth(h)},f.prototype.$updateGutterWidth=function(h){var d=this.session,c=d.gutterRenderer||this.$renderer,_=d.$firstLineNumber,m=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||d.$useWrapMode)&&(m=d.getLength()+_-1);var v=c?c.getWidth(d,m,h):m.toString().length*h.characterWidth,y=this.$padding||this.$computePadding();v+=y.left+y.right,v!==this.gutterWidth&&!isNaN(v)&&(this.gutterWidth=v,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",v))},f.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var h=this.session.selection.getCursor();this.$cursorRow!==h.row&&(this.$cursorRow=h.row)}},f.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var h=this.session.selection.cursor.row;if(this.$cursorRow=h,!(this.$cursorCell&&this.$cursorCell.row==h)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var d=this.$lines.cells;this.$cursorCell=null;for(var c=0;c<d.length;c++){var _=d[c];if(_.row>=this.$cursorRow){if(_.row>this.$cursorRow){var m=this.session.getFoldLine(this.$cursorRow);if(c>0&&m&&m.start.row==d[c-1].row)_=d[c-1];else break}_.element.className="ace_gutter-active-line "+_.element.className,this.$cursorCell=_;break}}}}},f.prototype.scrollLines=function(h){var d=this.config;if(this.config=h,this.$updateCursorRow(),this.$lines.pageChanged(d,h))return this.update(h);this.$lines.moveContainer(h);var c=Math.min(h.lastRow+h.gutterOffset,this.session.getLength()-1),_=this.oldLastRow;if(this.oldLastRow=c,!d||_<h.firstRow)return this.update(h);if(c<d.firstRow)return this.update(h);if(d.firstRow<h.firstRow)for(var m=this.session.getFoldedRowCount(d.firstRow,h.firstRow-1);m>0;m--)this.$lines.shift();if(_>c)for(var m=this.session.getFoldedRowCount(c+1,_);m>0;m--)this.$lines.pop();h.firstRow<d.firstRow&&this.$lines.unshift(this.$renderLines(h,h.firstRow,d.firstRow-1)),c>_&&this.$lines.push(this.$renderLines(h,_+1,c)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(h)},f.prototype.$renderLines=function(h,d,c){for(var _=[],m=d,v=this.session.getNextFoldLine(m),y=v?v.start.row:1/0;m>y&&(m=v.end.row+1,v=this.session.getNextFoldLine(m,v),y=v?v.start.row:1/0),!(m>c);){var C=this.$lines.createCell(m,h,this.session,s);this.$renderCell(C,h,v,m),_.push(C),m++}return _},f.prototype.$renderCell=function(h,d,c,_){var m=h.element,v=this.session,y=m.childNodes[0],C=m.childNodes[1],S=m.childNodes[2],D=S.firstChild,g=v.$firstLineNumber,b=v.$breakpoints,x=v.$decorations,E=v.gutterRenderer||this.$renderer,T=this.$showFoldWidgets&&v.foldWidgets,M=c?c.start.row:Number.MAX_VALUE,w=d.lineHeight+"px",F=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",L=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(E?E.getText(v,_):_+g).toString();if(this.$highlightGutterLine&&(_==this.$cursorRow||c&&_<this.$cursorRow&&_>=M&&this.$cursorRow<=c.end.row)&&(F+="ace_gutter-active-line ",this.$cursorCell!=h&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=h)),b[_]&&(F+=b[_]),x[_]&&(F+=x[_]),this.$annotations[_]&&_!==M&&(F+=this.$annotations[_].className),T){var A=T[_];A==null&&(A=T[_]=v.getFoldWidget(_))}if(A){var I="ace_fold-widget ace_"+A,$=A=="start"&&_==M&&_<c.end.row;if($){I+=" ace_closed";for(var H="",P=!1,q=_+1;q<=c.end.row;q++)if(this.$annotations[q]){if(this.$annotations[q].className===" ace_error"){P=!0,H=" ace_error_fold";break}if(this.$annotations[q].className===" ace_warning"){P=!0,H=" ace_warning_fold";continue}}F+=H}else I+=" ace_open";C.className!=I&&(C.className=I),r.setStyle(C.style,"height",w),r.setStyle(C.style,"display","inline-block"),C.setAttribute("role","button"),C.setAttribute("tabindex","-1");var G=v.getFoldWidgetRange(_);G?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[G.start.row+1,G.end.row+1])):c?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[c.start.row+1,c.end.row+1])):C.setAttribute("aria-label",u("Toggle code folding, row $0",[_+1])),$?(C.setAttribute("aria-expanded","false"),C.setAttribute("title",u("Unfold code"))):(C.setAttribute("aria-expanded","true"),C.setAttribute("title",u("Fold code")))}else C&&(r.setStyle(C.style,"display","none"),C.setAttribute("tabindex","0"),C.removeAttribute("role"),C.removeAttribute("aria-label"));return P&&this.$showFoldedAnnotations?(S.className="ace_gutter_annotation",D.className=L,D.className+=H,r.setStyle(D.style,"height",w),r.setStyle(S.style,"display","block"),r.setStyle(S.style,"height",w),S.setAttribute("aria-label",u("Read annotations row $0",[R])),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")):this.$annotations[_]?(S.className="ace_gutter_annotation",D.className=L,this.$useSvgGutterIcons?D.className+=this.$annotations[_].className:m.classList.add(this.$annotations[_].className.replace(" ","")),r.setStyle(D.style,"height",w),r.setStyle(S.style,"display","block"),r.setStyle(S.style,"height",w),S.setAttribute("aria-label",u("Read annotations row $0",[R])),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")):(r.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0")),R!==y.data&&(y.data=R),m.className!=F&&(m.className=F),r.setStyle(h.element.style,"height",this.$lines.computeLineHeight(_,d,v)+"px"),r.setStyle(h.element.style,"top",this.$lines.computeLineTop(_,d,v)+"px"),h.text=R,S.style.display==="none"&&C.style.display==="none"?h.element.setAttribute("aria-hidden",!0):h.element.setAttribute("aria-hidden",!1),h},f.prototype.setHighlightGutterLine=function(h){this.$highlightGutterLine=h},f.prototype.setShowLineNumbers=function(h){this.$renderer=!h&&{getWidth:function(){return 0},getText:function(){return""}}},f.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},f.prototype.setShowFoldWidgets=function(h){h?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=h,this.$padding=null},f.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},f.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var h=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(h.borderLeftWidth)||0)+(parseInt(h.paddingLeft)||0)+1,this.$padding.right=(parseInt(h.borderRightWidth)||0)+(parseInt(h.paddingRight)||0),this.$padding},f.prototype.getRegion=function(h){var d=this.$padding||this.$computePadding(),c=this.element.getBoundingClientRect();if(h.x<d.left+c.left)return"markers";if(this.$showFoldWidgets&&h.x>c.right-d.right)return"foldWidgets"},f}();i.prototype.$fixedWidth=!1,i.prototype.$highlightGutterLine=!0,i.prototype.$renderer="",i.prototype.$showLineNumbers=!0,i.prototype.$showFoldWidgets=!0,p.implement(i.prototype,o);function s(f){var h=document.createTextNode("");f.appendChild(h);var d=r.createElement("span");f.appendChild(d);var c=r.createElement("span");f.appendChild(c);var _=r.createElement("span");return c.appendChild(_),f}t.Gutter=i});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../range").Range,p=e("../lib/dom"),a=function(){function l(u){this.element=p.createElement("div"),this.element.className="ace_layer ace_marker-layer",u.appendChild(this.element)}return l.prototype.setPadding=function(u){this.$padding=u},l.prototype.setSession=function(u){this.session=u},l.prototype.setMarkers=function(u){this.markers=u},l.prototype.elt=function(u,i){var s=this.i!=-1&&this.element.childNodes[this.i];s?this.i++:(s=document.createElement("div"),this.element.appendChild(s),this.i=-1),s.style.cssText=i,s.className=u},l.prototype.update=function(u){if(u){this.config=u,this.i=0;var i;for(var s in this.markers){var f=this.markers[s];if(!f.range){f.update(i,this,this.session,u);continue}var h=f.range.clipRows(u.firstRow,u.lastRow);if(!h.isEmpty())if(h=h.toScreenRange(this.session),f.renderer){var d=this.$getTop(h.start.row,u),c=this.$padding+h.start.column*u.characterWidth;f.renderer(i,h,c,d,u)}else f.type=="fullLine"?this.drawFullLineMarker(i,h,f.clazz,u):f.type=="screenLine"?this.drawScreenLineMarker(i,h,f.clazz,u):h.isMultiLine()?f.type=="text"?this.drawTextMarker(i,h,f.clazz,u):this.drawMultiLineMarker(i,h,f.clazz,u):this.drawSingleLineMarker(i,h,f.clazz+" ace_start ace_br15",u)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},l.prototype.$getTop=function(u,i){return(u-i.firstRowScreen)*i.lineHeight},l.prototype.drawTextMarker=function(u,i,s,f,h){for(var d=this.session,c=i.start.row,_=i.end.row,m=c,v=0,y=0,C=d.getScreenLastRowColumn(m),S=new r(m,i.start.column,m,y);m<=_;m++)S.start.row=S.end.row=m,S.start.column=m==c?i.start.column:d.getRowWrapIndent(m),S.end.column=C,v=y,y=C,C=m+1<_?d.getScreenLastRowColumn(m+1):m==_?0:i.end.column,this.drawSingleLineMarker(u,S,s+(m==c?" ace_start":"")+" ace_br"+o(m==c||m==c+1&&i.start.column,v<y,y>C,m==_),f,m==_?0:1,h)},l.prototype.drawMultiLineMarker=function(u,i,s,f,h){var d=this.$padding,c=f.lineHeight,_=this.$getTop(i.start.row,f),m=d+i.start.column*f.characterWidth;if(h=h||"",this.session.$bidiHandler.isBidiRow(i.start.row)){var v=i.clone();v.end.row=v.start.row,v.end.column=this.session.getLine(v.start.row).length,this.drawBidiSingleLineMarker(u,v,s+" ace_br1 ace_start",f,null,h)}else this.elt(s+" ace_br1 ace_start","height:"+c+"px;right:0;top:"+_+"px;left:"+m+"px;"+(h||""));if(this.session.$bidiHandler.isBidiRow(i.end.row)){var v=i.clone();v.start.row=v.end.row,v.start.column=0,this.drawBidiSingleLineMarker(u,v,s+" ace_br12",f,null,h)}else{_=this.$getTop(i.end.row,f);var y=i.end.column*f.characterWidth;this.elt(s+" ace_br12","height:"+c+"px;width:"+y+"px;top:"+_+"px;left:"+d+"px;"+(h||""))}if(c=(i.end.row-i.start.row-1)*f.lineHeight,!(c<=0)){_=this.$getTop(i.start.row+1,f);var C=(i.start.column?1:0)|(i.end.column?0:8);this.elt(s+(C?" ace_br"+C:""),"height:"+c+"px;right:0;top:"+_+"px;left:"+d+"px;"+(h||""))}},l.prototype.drawSingleLineMarker=function(u,i,s,f,h,d){if(this.session.$bidiHandler.isBidiRow(i.start.row))return this.drawBidiSingleLineMarker(u,i,s,f,h,d);var c=f.lineHeight,_=(i.end.column+(h||0)-i.start.column)*f.characterWidth,m=this.$getTop(i.start.row,f),v=this.$padding+i.start.column*f.characterWidth;this.elt(s,"height:"+c+"px;width:"+_+"px;top:"+m+"px;left:"+v+"px;"+(d||""))},l.prototype.drawBidiSingleLineMarker=function(u,i,s,f,h,d){var c=f.lineHeight,_=this.$getTop(i.start.row,f),m=this.$padding,v=this.session.$bidiHandler.getSelections(i.start.column,i.end.column);v.forEach(function(y){this.elt(s,"height:"+c+"px;width:"+(y.width+(h||0))+"px;top:"+_+"px;left:"+(m+y.left)+"px;"+(d||""))},this)},l.prototype.drawFullLineMarker=function(u,i,s,f,h){var d=this.$getTop(i.start.row,f),c=f.lineHeight;i.start.row!=i.end.row&&(c+=this.$getTop(i.end.row,f)-d),this.elt(s,"height:"+c+"px;top:"+d+"px;left:0;right:0;"+(h||""))},l.prototype.drawScreenLineMarker=function(u,i,s,f,h){var d=this.$getTop(i.start.row,f),c=f.lineHeight;this.elt(s,"height:"+c+"px;top:"+d+"px;left:0;right:0;"+(h||""))},l}();a.prototype.$padding=0;function o(l,u,i,s){return(l?1:0)|(u?2:0)|(i?4:0)|(s?8:0)}t.Marker=a});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,n){var r=new Set(["text","rparen","lparen"]);t.isTextToken=function(p){return r.has(p)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,n){"use strict";var r=e("../lib/oop"),p=e("../lib/dom"),a=e("../lib/lang"),o=e("./lines").Lines,l=e("../lib/event_emitter").EventEmitter,u=e("../config").nls,i=e("./text_util").isTextToken,s=function(){function f(h){this.dom=p,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",h.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new o(this.element)}return f.prototype.$updateEolChar=function(){var h=this.session.doc,d=h.getNewLineCharacter()==`
`&&h.getNewLineMode()!="windows",c=d?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=c)return this.EOL_CHAR=c,!0},f.prototype.setPadding=function(h){this.$padding=h,this.element.style.margin="0 "+h+"px"},f.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},f.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},f.prototype.$setFontMetrics=function(h){this.$fontMetrics=h,this.$fontMetrics.on("changeCharacterSize",function(d){this._signal("changeCharacterSize",d)}.bind(this)),this.$pollSizeChanges()},f.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},f.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},f.prototype.setSession=function(h){this.session=h,h&&this.$computeTabString()},f.prototype.setShowInvisibles=function(h){return this.showInvisibles==h?!1:(this.showInvisibles=h,typeof h=="string"?(this.showSpaces=/tab/i.test(h),this.showTabs=/space/i.test(h),this.showEOL=/eol/i.test(h)):this.showSpaces=this.showTabs=this.showEOL=h,this.$computeTabString(),!0)},f.prototype.setDisplayIndentGuides=function(h){return this.displayIndentGuides==h?!1:(this.displayIndentGuides=h,this.$computeTabString(),!0)},f.prototype.setHighlightIndentGuides=function(h){return this.$highlightIndentGuides===h?!1:(this.$highlightIndentGuides=h,h)},f.prototype.$computeTabString=function(){var h=this.session.getTabSize();this.tabSize=h;for(var d=this.$tabStrings=[0],c=1;c<h+1;c++)if(this.showTabs){var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_tab",_.textContent=a.stringRepeat(this.TAB_CHAR,c),d.push(_)}else d.push(this.dom.createTextNode(a.stringRepeat(" ",c),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var m="ace_indent-guide",v=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?a.stringRepeat(this.SPACE_CHAR,this.tabSize):a.stringRepeat(" ",this.tabSize),C=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?a.stringRepeat(this.TAB_CHAR,this.tabSize):y,_=this.dom.createElement("span");_.className=m+v,_.textContent=y,this.$tabStrings[" "]=_;var _=this.dom.createElement("span");_.className=m+C,_.textContent=S,this.$tabStrings["	"]=_}},f.prototype.updateLines=function(h,d,c){if(this.config.lastRow!=h.lastRow||this.config.firstRow!=h.firstRow)return this.update(h);this.config=h;for(var _=Math.max(d,h.firstRow),m=Math.min(c,h.lastRow),v=this.element.childNodes,y=0,S=h.firstRow;S<_;S++){var D=this.session.getFoldLine(S);if(D)if(D.containsRow(_)){_=D.start.row;break}else S=D.end.row;y++}for(var C=!1,S=_,D=this.session.getNextFoldLine(S),g=D?D.start.row:1/0;S>g&&(S=D.end.row+1,D=this.session.getNextFoldLine(S,D),g=D?D.start.row:1/0),!(S>m);){var b=v[y++];if(b){this.dom.removeChildren(b),this.$renderLine(b,S,S==g?D:!1),C&&(b.style.top=this.$lines.computeLineTop(S,h,this.session)+"px");var x=h.lineHeight*this.session.getRowLength(S)+"px";b.style.height!=x&&(C=!0,b.style.height=x)}S++}if(C)for(;y<this.$lines.cells.length;){var E=this.$lines.cells[y++];E.element.style.top=this.$lines.computeLineTop(E.row,h,this.session)+"px"}},f.prototype.scrollLines=function(h){var d=this.config;if(this.config=h,this.$lines.pageChanged(d,h))return this.update(h);this.$lines.moveContainer(h);var c=h.lastRow,_=d?d.lastRow:-1;if(!d||_<h.firstRow)return this.update(h);if(c<d.firstRow)return this.update(h);if(!d||d.lastRow<h.firstRow)return this.update(h);if(h.lastRow<d.firstRow)return this.update(h);if(d.firstRow<h.firstRow)for(var m=this.session.getFoldedRowCount(d.firstRow,h.firstRow-1);m>0;m--)this.$lines.shift();if(d.lastRow>h.lastRow)for(var m=this.session.getFoldedRowCount(h.lastRow+1,d.lastRow);m>0;m--)this.$lines.pop();h.firstRow<d.firstRow&&this.$lines.unshift(this.$renderLinesFragment(h,h.firstRow,d.firstRow-1)),h.lastRow>d.lastRow&&this.$lines.push(this.$renderLinesFragment(h,d.lastRow+1,h.lastRow)),this.$highlightIndentGuide()},f.prototype.$renderLinesFragment=function(h,d,c){for(var _=[],m=d,v=this.session.getNextFoldLine(m),y=v?v.start.row:1/0;m>y&&(m=v.end.row+1,v=this.session.getNextFoldLine(m,v),y=v?v.start.row:1/0),!(m>c);){var C=this.$lines.createCell(m,h,this.session),S=C.element;this.dom.removeChildren(S),p.setStyle(S.style,"height",this.$lines.computeLineHeight(m,h,this.session)+"px"),p.setStyle(S.style,"top",this.$lines.computeLineTop(m,h,this.session)+"px"),this.$renderLine(S,m,m==y?v:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",_.push(C),m++}return _},f.prototype.update=function(h){this.$lines.moveContainer(h),this.config=h;for(var d=h.firstRow,c=h.lastRow,_=this.$lines;_.getLength();)_.pop();_.push(this.$renderLinesFragment(h,d,c))},f.prototype.$renderToken=function(h,d,c,_){for(var m=this,v=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),C,S=0;C=v.exec(_);){var D=C[1],g=C[2],b=C[3],x=C[4],E=C[5];if(!(!m.showSpaces&&g)){var T=S!=C.index?_.slice(S,C.index):"";if(S=C.index+C[0].length,T&&y.appendChild(this.dom.createTextNode(T,this.element)),D){var M=m.session.getScreenTabSize(d+C.index);y.appendChild(m.$tabStrings[M].cloneNode(!0)),d+=M-1}else if(g)if(m.showSpaces){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space",w.textContent=a.stringRepeat(m.SPACE_CHAR,g.length),y.appendChild(w)}else y.appendChild(this.dom.createTextNode(g,this.element));else if(b){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space ace_invalid",w.textContent=a.stringRepeat(m.SPACE_CHAR,b.length),y.appendChild(w)}else if(x){d+=1;var w=this.dom.createElement("span");w.style.width=m.config.characterWidth*2+"px",w.className=m.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",w.textContent=m.showSpaces?m.SPACE_CHAR:x,y.appendChild(w)}else if(E){d+=1;var w=this.dom.createElement("span");w.style.width=m.config.characterWidth*2+"px",w.className="ace_cjk",w.textContent=E,y.appendChild(w)}}}if(y.appendChild(this.dom.createTextNode(S?_.slice(S):_,this.element)),i(c.type))h.appendChild(y);else{var F="ace_"+c.type.replace(/\./g," ace_"),w=this.dom.createElement("span");c.type=="fold"&&(w.style.width=c.value.length*this.config.characterWidth+"px",w.setAttribute("title",u("Unfold code"))),w.className=F,w.appendChild(y),h.appendChild(w)}return d+_.length},f.prototype.renderIndentGuide=function(h,d,c){var _=d.search(this.$indentGuideRe);if(_<=0||_>=c)return d;if(d[0]==" "){_-=_%this.tabSize;for(var m=_/this.tabSize,v=0;v<m;v++)h.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),d.substr(_)}else if(d[0]=="	"){for(var v=0;v<_;v++)h.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),d.substr(_)}return this.$highlightIndentGuide(),d},f.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var h=this.session.doc.$lines;if(h){var d=this.session.selection.getCursor(),c=/^\s*/.exec(this.session.doc.getLine(d.row))[0].length,_=Math.floor(c/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:_,start:d.row};var m=this.session.$bracketHighlight;if(m){for(var v=this.session.$bracketHighlight.ranges,y=0;y<v.length;y++)if(d.row!==v[y].start.row){this.$highlightIndentGuideMarker.end=v[y].start.row,d.row>v[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&h[d.row]!==""&&d.column===h[d.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=d.row+1;y<h.length;y++){var C=h[y],S=/^\s*/.exec(C)[0].length;if(C!==""&&(this.$highlightIndentGuideMarker.end=y,S<=c))break}}this.$renderHighlightIndentGuide()}}},f.prototype.$clearActiveIndentGuide=function(){for(var h=this.$lines.cells,d=0;d<h.length;d++){var c=h[d],_=c.element.childNodes;if(_.length>0){for(var m=0;m<_.length;m++)if(_[m].classList&&_[m].classList.contains("ace_indent-guide-active")){_[m].classList.remove("ace_indent-guide-active");break}}}},f.prototype.$setIndentGuideActive=function(h,d){var c=this.session.doc.getLine(h.row);if(c!==""){var _=h.element.childNodes;if(_){var m=_[d-1];m&&m.classList&&m.classList.contains("ace_indent-guide")&&m.classList.add("ace_indent-guide-active")}}},f.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var h=this.$lines.cells;this.$clearActiveIndentGuide();var d=this.$highlightIndentGuideMarker.indentLevel;if(d!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var c=0;c<h.length;c++){var _=h[c];if(this.$highlightIndentGuideMarker.end&&_.row>=this.$highlightIndentGuideMarker.start+1){if(_.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(_,d)}}else for(var c=h.length-1;c>=0;c--){var _=h[c];if(this.$highlightIndentGuideMarker.end&&_.row<this.$highlightIndentGuideMarker.start){if(_.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(_,d)}}}},f.prototype.$createLineElement=function(h){var d=this.dom.createElement("div");return d.className="ace_line",d.style.height=this.config.lineHeight+"px",d},f.prototype.$renderWrappedLine=function(h,d,c){var _=0,m=0,v=c[0],y=0,C=this.$createLineElement();h.appendChild(C);for(var S=0;S<d.length;S++){var D=d[S],g=D.value;if(S==0&&this.displayIndentGuides){if(_=g.length,g=this.renderIndentGuide(C,g,v),!g)continue;_-=g.length}if(_+g.length<v)y=this.$renderToken(C,y,D,g),_+=g.length;else{for(;_+g.length>=v;)y=this.$renderToken(C,y,D,g.substring(0,v-_)),g=g.substring(v-_),_=v,C=this.$createLineElement(),h.appendChild(C),C.appendChild(this.dom.createTextNode(a.stringRepeat("\xA0",c.indent),this.element)),m++,y=0,v=c[m]||Number.MAX_VALUE;g.length!=0&&(_+=g.length,y=this.$renderToken(C,y,D,g))}}c[c.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(C,y,null,"",!0)},f.prototype.$renderSimpleLine=function(h,d){for(var c=0,_=0;_<d.length;_++){var m=d[_],v=m.value;if(!(_==0&&this.displayIndentGuides&&(v=this.renderIndentGuide(h,v),!v))){if(c+v.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(h,c,m,v);c=this.$renderToken(h,c,m,v)}}},f.prototype.$renderOverflowMessage=function(h,d,c,_,m){c&&this.$renderToken(h,d,c,_.slice(0,this.MAX_LINE_LENGTH-d));var v=this.dom.createElement("span");v.className="ace_inline_button ace_keyword ace_toggle_wrap",v.textContent=m?"<hide>":"<click to see more...>",h.appendChild(v)},f.prototype.$renderLine=function(h,d,c){if(!c&&c!=!1&&(c=this.session.getFoldLine(d)),c)var _=this.$getFoldLineTokens(d,c);else var _=this.session.getTokens(d);var m=h;if(_.length){var v=this.session.getRowSplitData(d);if(v&&v.length){this.$renderWrappedLine(h,_,v);var m=h.lastChild}else{var m=h;this.$useLineGroups()&&(m=this.$createLineElement(),h.appendChild(m)),this.$renderSimpleLine(m,_)}}else this.$useLineGroups()&&(m=this.$createLineElement(),h.appendChild(m));if(this.showEOL&&m){c&&(d=c.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=d==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,m.appendChild(y)}},f.prototype.$getFoldLineTokens=function(h,d){var c=this.session,_=[];function m(y,C,S){for(var D=0,g=0;g+y[D].value.length<C;)if(g+=y[D].value.length,D++,D==y.length)return;if(g!=C){var b=y[D].value.substring(C-g);b.length>S-C&&(b=b.substring(0,S-C)),_.push({type:y[D].type,value:b}),g=C+b.length,D+=1}for(;g<S&&D<y.length;){var b=y[D].value;b.length+g>S?_.push({type:y[D].type,value:b.substring(0,S-g)}):_.push(y[D]),g+=b.length,D+=1}}var v=c.getTokens(h);return d.walk(function(y,C,S,D,g){y!=null?_.push({type:"fold",value:y}):(g&&(v=c.getTokens(C)),v.length&&m(v,D,S))},d.end.row,this.session.getLine(d.end.row).length),_},f.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},f}();s.prototype.EOF_CHAR="\xB6",s.prototype.EOL_CHAR_LF="\xAC",s.prototype.EOL_CHAR_CRLF="\xA4",s.prototype.EOL_CHAR=s.prototype.EOL_CHAR_LF,s.prototype.TAB_CHAR="\u2014",s.prototype.SPACE_CHAR="\xB7",s.prototype.$padding=0,s.prototype.MAX_LINE_LENGTH=1e4,s.prototype.showInvisibles=!1,s.prototype.showSpaces=!1,s.prototype.showTabs=!1,s.prototype.showEOL=!1,s.prototype.displayIndentGuides=!0,s.prototype.$highlightIndentGuides=!0,s.prototype.$tabStrings=[],s.prototype.destroy={},s.prototype.onChangeTabSize=s.prototype.$computeTabString,r.implement(s.prototype,l),t.Text=s});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("../lib/dom"),p=function(){function a(o){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",o.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return a.prototype.$updateOpacity=function(o){for(var l=this.cursors,u=l.length;u--;)r.setStyle(l[u].style,"opacity",o?"":"0")},a.prototype.$startCssAnimation=function(){for(var o=this.cursors,l=o.length;l--;)o[l].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&r.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},a.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,r.removeCssClass(this.element,"ace_animate-blinking")},a.prototype.setPadding=function(o){this.$padding=o},a.prototype.setSession=function(o){this.session=o},a.prototype.setBlinking=function(o){o!=this.isBlinking&&(this.isBlinking=o,this.restartTimer())},a.prototype.setBlinkInterval=function(o){o!=this.blinkInterval&&(this.blinkInterval=o,this.restartTimer())},a.prototype.setSmoothBlinking=function(o){o!=this.smoothBlinking&&(this.smoothBlinking=o,r.setCssClass(this.element,"ace_smooth-blinking",o),this.$updateCursors(!0),this.restartTimer())},a.prototype.addCursor=function(){var o=r.createElement("div");return o.className="ace_cursor",this.element.appendChild(o),this.cursors.push(o),o},a.prototype.removeCursor=function(){if(this.cursors.length>1){var o=this.cursors.pop();return o.parentNode.removeChild(o),o}},a.prototype.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},a.prototype.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},a.prototype.restartTimer=function(){var o=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,r.removeCssClass(this.element,"ace_smooth-blinking")),o(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),r.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var l=function(){this.timeoutId=setTimeout(function(){o(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){o(!0),l()},this.blinkInterval),l()}},a.prototype.getPixelPosition=function(o,l){if(!this.config||!this.session)return{left:0,top:0};o||(o=this.session.selection.getCursor());var u=this.session.documentToScreenPosition(o),i=this.$padding+(this.session.$bidiHandler.isBidiRow(u.row,o.row)?this.session.$bidiHandler.getPosLeft(u.column):u.column*this.config.characterWidth),s=(u.row-(l?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:s}},a.prototype.isCursorInView=function(o,l){return o.top>=0&&o.top<l.maxHeight},a.prototype.update=function(o){this.config=o;var l=this.session.$selectionMarkers,u=0,i=0;(l===void 0||l.length===0)&&(l=[{cursor:null}]);for(var u=0,s=l.length;u<s;u++){var f=this.getPixelPosition(l[u].cursor,!0);if(!((f.top>o.height+o.offset||f.top<0)&&u>1)){var h=this.cursors[i++]||this.addCursor(),d=h.style;this.drawCursor?this.drawCursor(h,f,o,l[u],this.session):this.isCursorInView(f,o)?(r.setStyle(d,"display","block"),r.translate(h,f.left,f.top),r.setStyle(d,"width",Math.round(o.characterWidth)+"px"),r.setStyle(d,"height",o.lineHeight+"px")):r.setStyle(d,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=f,this.restartTimer()},a.prototype.$setOverwrite=function(o){o!=this.overwrite&&(this.overwrite=o,o?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},a.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},a}();p.prototype.$padding=0,p.prototype.drawCursor=null,t.Cursor=p});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=this&&this.__extends||function(){var h=function(d,c){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,m){_.__proto__=m}||function(_,m){for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(_[v]=m[v])},h(d,c)};return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");h(d,c);function _(){this.constructor=d}d.prototype=c===null?Object.create(c):(_.prototype=c.prototype,new _)}}(),p=e("./lib/oop"),a=e("./lib/dom"),o=e("./lib/event"),l=e("./lib/event_emitter").EventEmitter,u=32768,i=function(){function h(d,c){this.element=a.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+c,this.inner=a.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),d.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)}return h.prototype.setVisible=function(d){this.element.style.display=d?"":"none",this.isVisible=d,this.coeff=1},h}();p.implement(i.prototype,l);var s=function(h){r(d,h);function d(c,_){var m=h.call(this,c,"-v")||this;return m.scrollTop=0,m.scrollHeight=0,_.$scrollbarWidth=m.width=a.scrollbarWidth(c.ownerDocument),m.inner.style.width=m.element.style.width=(m.width||15)+5+"px",m.$minWidth=0,m}return d.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var c=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-c)/(this.coeff-c)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},d.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},d.prototype.setHeight=function(c){this.element.style.height=c+"px"},d.prototype.setScrollHeight=function(c){this.scrollHeight=c,c>u?(this.coeff=u/c,c=u):this.coeff!=1&&(this.coeff=1),this.inner.style.height=c+"px"},d.prototype.setScrollTop=function(c){this.scrollTop!=c&&(this.skipEvent=!0,this.scrollTop=c,this.element.scrollTop=c*this.coeff)},d}(i);s.prototype.setInnerHeight=s.prototype.setScrollHeight;var f=function(h){r(d,h);function d(c,_){var m=h.call(this,c,"-h")||this;return m.scrollLeft=0,m.height=_.$scrollbarWidth,m.inner.style.height=m.element.style.height=(m.height||15)+5+"px",m}return d.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},d.prototype.getHeight=function(){return this.isVisible?this.height:0},d.prototype.setWidth=function(c){this.element.style.width=c+"px"},d.prototype.setInnerWidth=function(c){this.inner.style.width=c+"px"},d.prototype.setScrollWidth=function(c){this.inner.style.width=c+"px"},d.prototype.setScrollLeft=function(c){this.scrollLeft!=c&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=c)},d}(i);t.ScrollBar=s,t.ScrollBarV=s,t.ScrollBarH=f,t.VScrollBar=s,t.HScrollBar=f});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=this&&this.__extends||function(){var f=function(h,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(c[m]=_[m])},f(h,d)};return function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(h,d);function c(){this.constructor=h}h.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),p=e("./lib/oop"),a=e("./lib/dom"),o=e("./lib/event"),l=e("./lib/event_emitter").EventEmitter;a.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var u=function(){function f(h,d){this.element=a.createElement("div"),this.element.className="ace_sb"+d,this.inner=a.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,h.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return f.prototype.setVisible=function(h){this.element.style.display=h?"":"none",this.isVisible=h,this.coeff=1},f}();p.implement(u.prototype,l);var i=function(f){r(h,f);function h(d,c){var _=f.call(this,d,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,_.parent=d,_.width=_.VScrollWidth,_.renderer=c,_.inner.style.width=_.element.style.width=(_.width||15)+"px",_.$minWidth=0,_}return h.prototype.onMouseDown=function(d,c){if(d==="mousedown"&&!(o.getButton(c)!==0||c.detail===2)){if(c.target===this.inner){var _=this,m=c.clientY,v=function(x){m=x.clientY},y=function(){clearInterval(g)},C=c.clientY,S=this.thumbTop,D=function(){if(m!==void 0){var x=_.scrollTopFromThumbTop(S+m-C);x!==_.scrollTop&&_._emit("scroll",{data:x})}};o.capture(this.inner,v,y);var g=setInterval(D,20);return o.preventDefault(c)}var b=c.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(b)}),o.preventDefault(c)}},h.prototype.getHeight=function(){return this.height},h.prototype.scrollTopFromThumbTop=function(d){var c=d*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return c=c>>0,c<0?c=0:c>this.pageHeight-this.viewHeight&&(c=this.pageHeight-this.viewHeight),c},h.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},h.prototype.setHeight=function(d){this.height=Math.max(0,d),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},h.prototype.setScrollHeight=function(d,c){this.pageHeight===d&&!c||(this.pageHeight=d,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},h.prototype.setScrollTop=function(d){this.scrollTop=d,d<0&&(d=0),this.thumbTop=d*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},h}(u);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var s=function(f){r(h,f);function h(d,c){var _=f.call(this,d,"-h")||this;return _.scrollLeft=0,_.scrollWidth=0,_.height=_.HScrollHeight,_.inner.style.height=_.element.style.height=(_.height||12)+"px",_.renderer=c,_}return h.prototype.onMouseDown=function(d,c){if(d==="mousedown"&&!(o.getButton(c)!==0||c.detail===2)){if(c.target===this.inner){var _=this,m=c.clientX,v=function(x){m=x.clientX},y=function(){clearInterval(g)},C=c.clientX,S=this.thumbLeft,D=function(){if(m!==void 0){var x=_.scrollLeftFromThumbLeft(S+m-C);x!==_.scrollLeft&&_._emit("scroll",{data:x})}};o.capture(this.inner,v,y);var g=setInterval(D,20);return o.preventDefault(c)}var b=c.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(b)}),o.preventDefault(c)}},h.prototype.getHeight=function(){return this.isVisible?this.height:0},h.prototype.scrollLeftFromThumbLeft=function(d){var c=d*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return c=c>>0,c<0?c=0:c>this.pageWidth-this.viewWidth&&(c=this.pageWidth-this.viewWidth),c},h.prototype.setWidth=function(d){this.width=Math.max(0,d),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},h.prototype.setScrollWidth=function(d,c){this.pageWidth===d&&!c||(this.pageWidth=d,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},h.prototype.setScrollLeft=function(d){this.scrollLeft=d,d<0&&(d=0),this.thumbLeft=d*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},h}(u);s.prototype.setInnerWidth=s.prototype.setScrollWidth,t.ScrollBar=i,t.ScrollBarV=i,t.ScrollBarH=s,t.VScrollBar=i,t.HScrollBar=s});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var r=e("./lib/event"),p=function(){function a(o,l){this.onRender=o,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=l||window;var u=this;this._flush=function(i){u.pending=!1;var s=u.changes;if(s&&(r.blockIdle(100),u.changes=0,u.onRender(s)),u.changes){if(u.$recursionLimit--<0)return;u.schedule()}else u.$recursionLimit=2}}return a.prototype.schedule=function(o){this.changes=this.changes|o,this.changes&&!this.pending&&(r.nextFrame(this._flush),this.pending=!0)},a.prototype.clear=function(o){var l=this.changes;return this.changes=0,l},a}();t.RenderLoop=p});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),p=e("../lib/dom"),a=e("../lib/lang"),o=e("../lib/event"),l=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,i=512,s=typeof ResizeObserver=="function",f=200,h=function(){function d(c){this.el=p.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=p.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=p.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),c.appendChild(this.el),this.$measureNode.textContent=a.stringRepeat("X",i),this.$characterSize={width:0,height:0},s?this.$addObserver():this.checkForSizeChanges()}return d.prototype.$setMeasureNodeStyles=function(c,_){c.width=c.height="auto",c.left=c.top="0px",c.visibility="hidden",c.position="absolute",c.whiteSpace="pre",l.isIE<8?c["font-family"]="inherit":c.font="inherit",c.overflow=_?"hidden":"visible"},d.prototype.checkForSizeChanges=function(c){if(c===void 0&&(c=this.$measureSizes()),c&&(this.$characterSize.width!==c.width||this.$characterSize.height!==c.height)){this.$measureNode.style.fontWeight="bold";var _=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=c,this.charSizes=Object.create(null),this.allowBoldFonts=_&&_.width===c.width&&_.height===c.height,this._emit("changeCharacterSize",{data:c})}},d.prototype.$addObserver=function(){var c=this;this.$observer=new window.ResizeObserver(function(_){c.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},d.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var c=this;return this.$pollSizeChangesTimer=o.onIdle(function _(){c.checkForSizeChanges(),o.onIdle(_,500)},500)},d.prototype.setPolling=function(c){c?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},d.prototype.$measureSizes=function(c){var _={height:(c||this.$measureNode).clientHeight,width:(c||this.$measureNode).clientWidth/i};return _.width===0||_.height===0?null:_},d.prototype.$measureCharWidth=function(c){this.$main.textContent=a.stringRepeat(c,i);var _=this.$main.getBoundingClientRect();return _.width/i},d.prototype.getCharacterWidth=function(c){var _=this.charSizes[c];return _===void 0&&(_=this.charSizes[c]=this.$measureCharWidth(c)/this.$characterSize.width),_},d.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},d.prototype.$getZoom=function(c){return!c||!c.parentElement?1:(window.getComputedStyle(c).zoom||1)*this.$getZoom(c.parentElement)},d.prototype.$initTransformMeasureNodes=function(){var c=function(_,m){return["div",{style:"position: absolute;top:"+_+"px;left:"+m+"px;"}]};this.els=p.buildDom([c(0,0),c(f,0),c(0,f),c(f,f)],this.el)},d.prototype.transformCoordinates=function(c,_){if(c){var m=this.$getZoom(this.el);c=S(1/m,c)}function v($,H,P){var q=$[1]*H[0]-$[0]*H[1];return[(-H[1]*P[0]+H[0]*P[1])/q,(+$[1]*P[0]-$[0]*P[1])/q]}function y($,H){return[$[0]-H[0],$[1]-H[1]]}function C($,H){return[$[0]+H[0],$[1]+H[1]]}function S($,H){return[$*H[0],$*H[1]]}this.els||this.$initTransformMeasureNodes();function D($){var H=$.getBoundingClientRect();return[H.left,H.top]}var g=D(this.els[0]),b=D(this.els[1]),x=D(this.els[2]),E=D(this.els[3]),T=v(y(E,b),y(E,x),y(C(b,x),C(E,g))),M=S(1+T[0],y(b,g)),w=S(1+T[1],y(x,g));if(_){var F=_,L=T[0]*F[0]/f+T[1]*F[1]/f+1,R=C(S(F[0],M),S(F[1],w));return C(S(1/L/f,R),g)}var A=y(c,g),I=v(y(M,S(T[0],A)),y(w,S(T[1],A)),A);return S(f,I)},d}();h.prototype.$characterSize={width:0,height:0},r.implement(h.prototype,u),t.FontMetrics=h});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var r=e("../lib/dom"),p=e("../lib/oop"),a=e("../lib/event_emitter").EventEmitter,o=function(){function l(u,i){this.canvas=r.createElement("canvas"),this.renderer=i,this.pixelRatio=1,this.maxHeight=i.layerConfig.maxHeight,this.lineHeight=i.layerConfig.lineHeight,this.canvasHeight=u.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=u.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},u.element.appendChild(this.canvas)}return l.prototype.$updateDecorators=function(u){var i=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(u){this.maxHeight=u.maxHeight,this.lineHeight=u.lineHeight,this.canvasHeight=u.height;var s=(u.lastRow+1)*this.lineHeight;s<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var f=this.canvas.getContext("2d");function h(E,T){return E.priority<T.priority?-1:E.priority>T.priority?1:0}var d=this.renderer.session.$annotations;if(f.clearRect(0,0,this.canvas.width,this.canvas.height),d){var c={info:1,warning:2,error:3};d.forEach(function(E){E.priority=c[E.type]||null}),d=d.sort(h);for(var _=this.renderer.session.$foldData,m=0;m<d.length;m++){var v=d[m].row,y=this.compensateFoldRows(v,_),C=Math.round((v-y)*this.lineHeight*this.heightRatio),S=Math.round((v-y)*this.lineHeight*this.heightRatio),D=Math.round(((v-y)*this.lineHeight+this.lineHeight)*this.heightRatio),g=D-S;if(g<this.minDecorationHeight){var b=(S+D)/2|0;b<this.halfMinDecorationHeight?b=this.halfMinDecorationHeight:b+this.halfMinDecorationHeight>this.canvasHeight&&(b=this.canvasHeight-this.halfMinDecorationHeight),S=Math.round(b-this.halfMinDecorationHeight),D=Math.round(b+this.halfMinDecorationHeight)}f.fillStyle=i[d[m].type]||null,f.fillRect(0,C,this.canvasWidth,D-S)}}var x=this.renderer.session.selection.getCursor();if(x){var y=this.compensateFoldRows(x.row,_),C=Math.round((x.row-y)*this.lineHeight*this.heightRatio);f.fillStyle="rgba(0, 0, 0, 0.5)",f.fillRect(0,C,this.canvasWidth,2)}},l.prototype.compensateFoldRows=function(u,i){var s=0;if(i&&i.length>0)for(var f=0;f<i.length;f++)u>i[f].start.row&&u<i[f].end.row?s+=u-i[f].start.row:u>=i[f].end.row&&(s+=i[f].end.row-i[f].start.row);return s},l}();p.implement(o.prototype,a),t.Decorator=o});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var r=e("./lib/oop"),p=e("./lib/dom"),a=e("./lib/lang"),o=e("./config"),l=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,i=e("./layer/text").Text,s=e("./layer/cursor").Cursor,f=e("./scrollbar").HScrollBar,h=e("./scrollbar").VScrollBar,d=e("./scrollbar_custom").HScrollBar,c=e("./scrollbar_custom").VScrollBar,_=e("./renderloop").RenderLoop,m=e("./layer/font_metrics").FontMetrics,v=e("./lib/event_emitter").EventEmitter,y=e("./css/editor-css"),C=e("./layer/decorators").Decorator,S=e("./lib/useragent");p.importCssString(y,"ace_editor.css",!1);var D=function(){function g(b,x){var E=this;this.container=b||p.createElement("div"),p.addCssClass(this.container,"ace_editor"),p.HI_DPI&&p.addCssClass(this.container,"ace_hidpi"),this.setTheme(x),o.get("useStrictCSP")==null&&o.set("useStrictCSP",!1),this.$gutter=p.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=p.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=p.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new l(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var T=this.$textLayer=new i(this.content);this.canvas=T.element,this.$markerFront=new u(this.content),this.$cursorLayer=new s(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.on("scroll",function(M){E.$scrollAnimation||E.session.setScrollTop(M.data-E.scrollMargin.top)}),this.scrollBarH.on("scroll",function(M){E.$scrollAnimation||E.session.setScrollLeft(M.data-E.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new m(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(M){E.updateCharacterSize(),E.onResize(!0,E.gutterWidth,E.$size.width,E.$size.height),E._signal("changeCharacterSize",M)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new _(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),o.resetOptions(this),o._signal("renderer",this)}return g.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),p.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},g.prototype.setSession=function(b){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=b,b&&this.scrollMargin.top&&b.getScrollTop()<=0&&b.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(b),this.$markerBack.setSession(b),this.$markerFront.setSession(b),this.$gutterLayer.setSession(b),this.$textLayer.setSession(b),b&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},g.prototype.updateLines=function(b,x,E){if(x===void 0&&(x=1/0),this.$changedLines?(this.$changedLines.firstRow>b&&(this.$changedLines.firstRow=b),this.$changedLines.lastRow<x&&(this.$changedLines.lastRow=x)):this.$changedLines={firstRow:b,lastRow:x},this.$changedLines.lastRow<this.layerConfig.firstRow)if(E)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},g.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},g.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},g.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},g.prototype.updateFull=function(b){b?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},g.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},g.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},g.prototype.onResize=function(b,x,E,T){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=b?1:0;var M=this.container;T||(T=M.clientHeight||M.scrollHeight),E||(E=M.clientWidth||M.scrollWidth);var w=this.$updateCachedSize(b,x,E,T);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!E&&!T)return this.resizing=0;b&&(this.$gutterLayer.$padding=null),b?this.$renderChanges(w|this.$changes,!0):this.$loop.schedule(w|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},g.prototype.$updateCachedSize=function(b,x,E,T){T-=this.$extraHeight||0;var M=0,w=this.$size,F={width:w.width,height:w.height,scrollerHeight:w.scrollerHeight,scrollerWidth:w.scrollerWidth};if(T&&(b||w.height!=T)&&(w.height=T,M|=this.CHANGE_SIZE,w.scrollerHeight=w.height,this.$horizScroll&&(w.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(w.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",M=M|this.CHANGE_SCROLL),E&&(b||w.width!=E)){M|=this.CHANGE_SIZE,w.width=E,x==null&&(x=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=x,p.setStyle(this.scrollBarH.element.style,"left",x+"px"),p.setStyle(this.scroller.style,"left",x+this.margin.left+"px"),w.scrollerWidth=Math.max(0,E-x-this.scrollBarV.getWidth()-this.margin.h),p.setStyle(this.$gutter.style,"left",this.margin.left+"px");var L=this.scrollBarV.getWidth()+"px";p.setStyle(this.scrollBarH.element.style,"right",L),p.setStyle(this.scroller.style,"right",L),p.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(w.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||b)&&(M|=this.CHANGE_FULL)}return w.$dirty=!E||!T,M&&this._signal("resize",F),M},g.prototype.onGutterResize=function(b){var x=this.$showGutter?b:0;x!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,x,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},g.prototype.adjustWrapLimit=function(){var b=this.$size.scrollerWidth-this.$padding*2,x=Math.floor(b/this.characterWidth);return this.session.adjustWrapLimit(x,this.$showPrintMargin&&this.$printMarginColumn)},g.prototype.setAnimatedScroll=function(b){this.setOption("animatedScroll",b)},g.prototype.getAnimatedScroll=function(){return this.$animatedScroll},g.prototype.setShowInvisibles=function(b){this.setOption("showInvisibles",b),this.session.$bidiHandler.setShowInvisibles(b)},g.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},g.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},g.prototype.setDisplayIndentGuides=function(b){this.setOption("displayIndentGuides",b)},g.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},g.prototype.setHighlightIndentGuides=function(b){this.setOption("highlightIndentGuides",b)},g.prototype.setShowPrintMargin=function(b){this.setOption("showPrintMargin",b)},g.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},g.prototype.setPrintMarginColumn=function(b){this.setOption("printMarginColumn",b)},g.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},g.prototype.getShowGutter=function(){return this.getOption("showGutter")},g.prototype.setShowGutter=function(b){return this.setOption("showGutter",b)},g.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},g.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},g.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},g.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},g.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var b=p.createElement("div");b.className="ace_layer ace_print-margin-layer",this.$printMarginEl=p.createElement("div"),this.$printMarginEl.className="ace_print-margin",b.appendChild(this.$printMarginEl),this.content.insertBefore(b,this.content.firstChild)}var x=this.$printMarginEl.style;x.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",x.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},g.prototype.getContainerElement=function(){return this.container},g.prototype.getMouseEventTarget=function(){return this.scroller},g.prototype.getTextAreaContainer=function(){return this.container},g.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var b=this.textarea.style,x=this.$composition;if(!this.$keepTextAreaAtCursor&&!x){p.translate(this.textarea,-100,0);return}var E=this.$cursorLayer.$pixelPos;if(E){x&&x.markerRange&&(E=this.$cursorLayer.getPixelPosition(x.markerRange.start,!0));var T=this.layerConfig,M=E.top,w=E.left;M-=T.offset;var F=x&&x.useTextareaForIME||S.isMobile?this.lineHeight:1;if(M<0||M>T.height-F){p.translate(this.textarea,0,0);return}var L=1,R=this.$size.height-F;if(!x)M+=this.lineHeight;else if(x.useTextareaForIME){var A=this.textarea.value;L=this.characterWidth*this.session.$getStringScreenWidth(A)[0]}else M+=this.lineHeight+2;w-=this.scrollLeft,w>this.$size.scrollerWidth-L&&(w=this.$size.scrollerWidth-L),w+=this.gutterWidth+this.margin.left,p.setStyle(b,"height",F+"px"),p.setStyle(b,"width",L+"px"),p.translate(this.textarea,Math.min(w,this.$size.scrollerWidth-L),Math.min(M,R))}}},g.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},g.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},g.prototype.getLastFullyVisibleRow=function(){var b=this.layerConfig,x=b.lastRow,E=this.session.documentToScreenRow(x,0)*b.lineHeight;return E-this.session.getScrollTop()>b.height-b.lineHeight?x-1:x},g.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},g.prototype.setPadding=function(b){this.$padding=b,this.$textLayer.setPadding(b),this.$cursorLayer.setPadding(b),this.$markerFront.setPadding(b),this.$markerBack.setPadding(b),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},g.prototype.setScrollMargin=function(b,x,E,T){var M=this.scrollMargin;M.top=b|0,M.bottom=x|0,M.right=T|0,M.left=E|0,M.v=M.top+M.bottom,M.h=M.left+M.right,M.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-M.top),this.updateFull()},g.prototype.setMargin=function(b,x,E,T){var M=this.margin;M.top=b|0,M.bottom=x|0,M.right=T|0,M.left=E|0,M.v=M.top+M.bottom,M.h=M.left+M.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},g.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},g.prototype.setHScrollBarAlwaysVisible=function(b){this.setOption("hScrollBarAlwaysVisible",b)},g.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},g.prototype.setVScrollBarAlwaysVisible=function(b){this.setOption("vScrollBarAlwaysVisible",b)},g.prototype.$updateScrollBarV=function(){var b=this.layerConfig.maxHeight,x=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(b-=(x-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>b-x&&(b=this.scrollTop+x,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(b+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},g.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},g.prototype.freeze=function(){this.$frozen=!0},g.prototype.unfreeze=function(){this.$frozen=!1},g.prototype.$renderChanges=function(b,x){if(this.$changes&&(b|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!b&&!x){this.$changes|=b;return}if(this.$size.$dirty)return this.$changes|=b,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",b),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var E=this.layerConfig;if(b&this.CHANGE_FULL||b&this.CHANGE_SIZE||b&this.CHANGE_TEXT||b&this.CHANGE_LINES||b&this.CHANGE_SCROLL||b&this.CHANGE_H_SCROLL){if(b|=this.$computeLayerConfig()|this.$loop.clear(),E.firstRow!=this.layerConfig.firstRow&&E.firstRowScreen==this.layerConfig.firstRowScreen){var T=this.scrollTop+(E.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;T>0&&(this.scrollTop=T,b=b|this.CHANGE_SCROLL,b|=this.$computeLayerConfig()|this.$loop.clear())}E=this.layerConfig,this.$updateScrollBarV(),b&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),p.translate(this.content,-this.scrollLeft,-E.offset);var M=E.width+2*this.$padding+"px",w=E.minHeight+"px";p.setStyle(this.content.style,"width",M),p.setStyle(this.content.style,"height",w)}if(b&this.CHANGE_H_SCROLL&&(p.translate(this.content,-this.scrollLeft,-E.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),b&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}if(b&this.CHANGE_SCROLL){this.$changedLines=null,b&this.CHANGE_TEXT||b&this.CHANGE_LINES?this.$textLayer.update(E):this.$textLayer.scrollLines(E),this.$showGutter&&(b&this.CHANGE_GUTTER||b&this.CHANGE_LINES?this.$gutterLayer.update(E):this.$gutterLayer.scrollLines(E)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}b&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):b&this.CHANGE_LINES?((this.$updateLines()||b&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):b&this.CHANGE_TEXT||b&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):b&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)),b&this.CHANGE_CURSOR&&(this.$cursorLayer.update(E),this.$moveTextAreaToCursor()),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(E),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(E),this._signal("afterRender",b)},g.prototype.$autosize=function(){var b=this.session.getScreenLength()*this.lineHeight,x=this.$maxLines*this.lineHeight,E=Math.min(x,Math.max((this.$minLines||1)*this.lineHeight,b))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(E+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&E>this.$maxPixelHeight&&(E=this.$maxPixelHeight);var T=E<=2*this.lineHeight,M=!T&&b>x;if(E!=this.desiredHeight||this.$size.height!=this.desiredHeight||M!=this.$vScroll){M!=this.$vScroll&&(this.$vScroll=M,this.scrollBarV.setVisible(M));var w=this.container.clientWidth;this.container.style.height=E+"px",this.$updateCachedSize(!0,this.$gutterWidth,w,E),this.desiredHeight=E,this._signal("autosize")}},g.prototype.$computeLayerConfig=function(){var b=this.session,x=this.$size,E=x.height<=2*this.lineHeight,T=this.session.getScreenLength(),M=T*this.lineHeight,w=this.$getLongestLine(),F=!E&&(this.$hScrollBarAlwaysVisible||x.scrollerWidth-w-2*this.$padding<0),L=this.$horizScroll!==F;L&&(this.$horizScroll=F,this.scrollBarH.setVisible(F));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var A=x.scrollerHeight+this.lineHeight,I=!this.$maxLines&&this.$scrollPastEnd?(x.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;M+=I;var $=this.scrollMargin;this.session.setScrollTop(Math.max(-$.top,Math.min(this.scrollTop,M-x.scrollerHeight+$.bottom))),this.session.setScrollLeft(Math.max(-$.left,Math.min(this.scrollLeft,w+2*this.$padding-x.scrollerWidth+$.right)));var H=!E&&(this.$vScrollBarAlwaysVisible||x.scrollerHeight-M+I<0||this.scrollTop>$.top),P=R!==H;P&&(this.$vScroll=H,this.scrollBarV.setVisible(H));var q=this.scrollTop%this.lineHeight,G=Math.ceil(A/this.lineHeight)-1,B=Math.max(0,Math.round((this.scrollTop-q)/this.lineHeight)),Q=B+G,O,W,U=this.lineHeight;B=b.screenToDocumentRow(B,0);var k=b.getFoldLine(B);k&&(B=k.start.row),O=b.documentToScreenRow(B,0),W=b.getRowLength(B)*U,Q=Math.min(b.screenToDocumentRow(Q,0),b.getLength()-1),A=x.scrollerHeight+b.getRowLength(Q)*U+W,q=this.scrollTop-O*U;var te=0;return(this.layerConfig.width!=w||L)&&(te=this.CHANGE_H_SCROLL),(L||P)&&(te|=this.$updateCachedSize(!0,this.gutterWidth,x.width,x.height),this._signal("scrollbarVisibilityChanged"),P&&(w=this.$getLongestLine())),this.layerConfig={width:w,padding:this.$padding,firstRow:B,firstRowScreen:O,lastRow:Q,lineHeight:U,characterWidth:this.characterWidth,minHeight:A,maxHeight:M,offset:q,gutterOffset:U?Math.max(0,Math.ceil((q+x.height-x.scrollerHeight)/U)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(w-this.$padding),te},g.prototype.$updateLines=function(){if(this.$changedLines){var b=this.$changedLines.firstRow,x=this.$changedLines.lastRow;this.$changedLines=null;var E=this.layerConfig;if(!(b>E.lastRow+1)&&!(x<E.firstRow)){if(x===1/0){this.$showGutter&&this.$gutterLayer.update(E),this.$textLayer.update(E);return}return this.$textLayer.updateLines(E,b,x),!0}}},g.prototype.$getLongestLine=function(){var b=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(b+=1),this.$textLayer&&b>this.$textLayer.MAX_LINE_LENGTH&&(b=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(b*this.characterWidth))},g.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},g.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},g.prototype.addGutterDecoration=function(b,x){this.$gutterLayer.addGutterDecoration(b,x)},g.prototype.removeGutterDecoration=function(b,x){this.$gutterLayer.removeGutterDecoration(b,x)},g.prototype.updateBreakpoints=function(b){this._rows=b,this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.setAnnotations=function(b){this.$gutterLayer.setAnnotations(b),this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},g.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},g.prototype.showCursor=function(){this.$cursorLayer.showCursor()},g.prototype.scrollSelectionIntoView=function(b,x,E){this.scrollCursorIntoView(b,E),this.scrollCursorIntoView(x,E)},g.prototype.scrollCursorIntoView=function(b,x,E){if(this.$size.scrollerHeight!==0){var T=this.$cursorLayer.getPixelPosition(b),M=T.left,w=T.top,F=E&&E.top||0,L=E&&E.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+F>w?(x&&R+F>w+this.lineHeight&&(w-=x*this.$size.scrollerHeight),w===0&&(w=-this.scrollMargin.top),this.session.setScrollTop(w)):R+this.$size.scrollerHeight-L<w+this.lineHeight&&(x&&R+this.$size.scrollerHeight-L<w-this.lineHeight&&(w+=x*this.$size.scrollerHeight),this.session.setScrollTop(w+this.lineHeight+L-this.$size.scrollerHeight));var A=this.scrollLeft,I=2*this.layerConfig.characterWidth;M-I<A?(M-=I,M<this.$padding+I&&(M=-this.scrollMargin.left),this.session.setScrollLeft(M)):(M+=I,A+this.$size.scrollerWidth<M+this.characterWidth?this.session.setScrollLeft(Math.round(M+this.characterWidth-this.$size.scrollerWidth)):A<=this.$padding&&M-A<this.characterWidth&&this.session.setScrollLeft(0))}},g.prototype.getScrollTop=function(){return this.session.getScrollTop()},g.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},g.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},g.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},g.prototype.scrollToRow=function(b){this.session.setScrollTop(b*this.lineHeight)},g.prototype.alignCursor=function(b,x){typeof b=="number"&&(b={row:b,column:0});var E=this.$cursorLayer.getPixelPosition(b),T=this.$size.scrollerHeight-this.lineHeight,M=E.top-T*(x||0);return this.session.setScrollTop(M),M},g.prototype.$calcSteps=function(b,x){var E=0,T=this.STEPS,M=[],w=function(F,L,R){return R*(Math.pow(F-1,3)+1)+L};for(E=0;E<T;++E)M.push(w(E/this.STEPS,b,x-b));return M},g.prototype.scrollToLine=function(b,x,E,T){var M=this.$cursorLayer.getPixelPosition({row:b,column:0}),w=M.top;x&&(w-=this.$size.scrollerHeight/2);var F=this.scrollTop;this.session.setScrollTop(w),E!==!1&&this.animateScrolling(F,T)},g.prototype.animateScrolling=function(b,x){var E=this.scrollTop;if(!this.$animatedScroll)return;var T=this;if(b==E)return;if(this.$scrollAnimation){var M=this.$scrollAnimation.steps;if(M.length&&(b=M[0],b==E))return}var w=T.$calcSteps(b,E);this.$scrollAnimation={from:b,to:E,steps:w},clearInterval(this.$timer),T.session.setScrollTop(w.shift()),T.session.$scrollTop=E;function F(){T.$timer=clearInterval(T.$timer),T.$scrollAnimation=null,T.$stopAnimation=!1,x&&x()}this.$timer=setInterval(function(){if(T.$stopAnimation){F();return}if(!T.session)return clearInterval(T.$timer);w.length?(T.session.setScrollTop(w.shift()),T.session.$scrollTop=E):E!=null?(T.session.$scrollTop=-1,T.session.setScrollTop(E),E=null):F()},10)},g.prototype.scrollToY=function(b){this.scrollTop!==b&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=b)},g.prototype.scrollToX=function(b){this.scrollLeft!==b&&(this.scrollLeft=b),this.$loop.schedule(this.CHANGE_H_SCROLL)},g.prototype.scrollTo=function(b,x){this.session.setScrollTop(x),this.session.setScrollLeft(b)},g.prototype.scrollBy=function(b,x){x&&this.session.setScrollTop(this.session.getScrollTop()+x),b&&this.session.setScrollLeft(this.session.getScrollLeft()+b)},g.prototype.isScrollableBy=function(b,x){if(x<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||x>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||b<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||b>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},g.prototype.pixelToScreenCoordinates=function(b,x){var E;if(this.$hasCssTransforms){E={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,x]);b=T[1]-this.gutterWidth-this.margin.left,x=T[0]}else E=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-E.left-this.$padding,w=M/this.characterWidth,F=Math.floor((x+this.scrollTop-E.top)/this.lineHeight),L=this.$blockCursor?Math.floor(w):Math.round(w);return{row:F,column:L,side:w-L>0?1:-1,offsetX:M}},g.prototype.screenToTextCoordinates=function(b,x){var E;if(this.$hasCssTransforms){E={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,x]);b=T[1]-this.gutterWidth-this.margin.left,x=T[0]}else E=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-E.left-this.$padding,w=M/this.characterWidth,F=this.$blockCursor?Math.floor(w):Math.round(w),L=Math.floor((x+this.scrollTop-E.top)/this.lineHeight);return this.session.screenToDocumentPosition(L,Math.max(F,0),M)},g.prototype.textToScreenCoordinates=function(b,x){var E=this.scroller.getBoundingClientRect(),T=this.session.documentToScreenPosition(b,x),M=this.$padding+(this.session.$bidiHandler.isBidiRow(T.row,b)?this.session.$bidiHandler.getPosLeft(T.column):Math.round(T.column*this.characterWidth)),w=T.row*this.lineHeight;return{pageX:E.left+M-this.scrollLeft,pageY:E.top+w-this.scrollTop}},g.prototype.visualizeFocus=function(){p.addCssClass(this.container,"ace_focus")},g.prototype.visualizeBlur=function(){p.removeCssClass(this.container,"ace_focus")},g.prototype.showComposition=function(b){this.$composition=b,b.cssText||(b.cssText=this.textarea.style.cssText),b.useTextareaForIME==null&&(b.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(p.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):b.markerId=this.session.addMarker(b.markerRange,"ace_composition_marker","text")},g.prototype.setCompositionText=function(b){var x=this.session.selection.cursor;this.addToken(b,"composition_placeholder",x.row,x.column),this.$moveTextAreaToCursor()},g.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),p.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var b=this.session.selection.cursor;this.removeExtraToken(b.row,b.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},g.prototype.setGhostText=function(b,x){var E=this.session.selection.cursor,T=x||{row:E.row,column:E.column};this.removeGhostText();var M=b.split(`
`);if(this.addToken(M[0],"ghost_text",T.row,T.column),this.$ghostText={text:b,position:{row:T.row,column:T.column}},M.length>1){this.$ghostTextWidget={text:M.slice(1).join(`
`),row:T.row,column:T.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var w=this.$cursorLayer.getPixelPosition(T,!0),F=this.container,L=F.getBoundingClientRect().height,R=M.length*this.lineHeight,A=R<L-w.top;if(A)return;R<L?this.scrollBy(0,(M.length-1)*this.lineHeight):this.scrollBy(0,w.top)}},g.prototype.removeGhostText=function(){if(this.$ghostText){var b=this.$ghostText.position;this.removeExtraToken(b.row,b.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},g.prototype.addToken=function(b,x,E,T){var M=this.session;M.bgTokenizer.lines[E]=null;var w={type:x,value:b},F=M.getTokens(E);if(T==null||!F.length)F.push(w);else for(var L=0,R=0;R<F.length;R++){var A=F[R];if(L+=A.value.length,T<=L){var I=A.value.length-(L-T),$=A.value.slice(0,I),H=A.value.slice(I);F.splice(R,1,{type:A.type,value:$},w,{type:A.type,value:H});break}}this.updateLines(E,E)},g.prototype.removeExtraToken=function(b,x){this.session.bgTokenizer.lines[b]=null,this.updateLines(b,b)},g.prototype.setTheme=function(b,x){var E=this;if(this.$themeId=b,E._dispatchEvent("themeChange",{theme:b}),!b||typeof b=="string"){var T=b||this.$options.theme.initialValue;o.loadModule(["theme",T],M)}else M(b);function M(w){if(E.$themeId!=b)return x&&x();if(!w||!w.cssClass)throw new Error("couldn't load module "+b+" or it didn't call define");w.$id&&(E.$themeId=w.$id),p.importCssString(w.cssText,w.cssClass,E.container),E.theme&&p.removeCssClass(E.container,E.theme.cssClass);var F="padding"in w?w.padding:"padding"in(E.theme||{})?4:E.$padding;E.$padding&&F!=E.$padding&&E.setPadding(F),E.$theme=w.cssClass,E.theme=w,p.addCssClass(E.container,w.cssClass),p.setCssClass(E.container,"ace_dark",w.isDark),E.$size&&(E.$size.width=0,E.$updateSizeAsync()),E._dispatchEvent("themeLoaded",{theme:w}),x&&x()}},g.prototype.getTheme=function(){return this.$themeId},g.prototype.setStyle=function(b,x){p.setCssClass(this.container,b,x!==!1)},g.prototype.unsetStyle=function(b){p.removeCssClass(this.container,b)},g.prototype.setCursorStyle=function(b){p.setStyle(this.scroller.style,"cursor",b)},g.prototype.setMouseCursor=function(b){p.setStyle(this.scroller.style,"cursor",b)},g.prototype.attachToShadowRoot=function(){p.importCssString(y,"ace_editor.css",this.container)},g.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},g.prototype.$updateCustomScrollbar=function(b){var x=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,b===!0?(this.scrollBarV=new c(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(E){x.$scrollAnimation||x.session.setScrollTop(E.data-x.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(E){x.$scrollAnimation||x.session.setScrollLeft(E.data-x.scrollMargin.left)}),this.$scrollDecorator=new C(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new h(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.addEventListener("scroll",function(E){x.$scrollAnimation||x.session.setScrollTop(E.data-x.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(E){x.$scrollAnimation||x.session.setScrollLeft(E.data-x.scrollMargin.left)}))},g.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var b=this;this.$resizeTimer=a.delayedCall(function(){b.destroyed||b.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(x){var E=x[0].contentRect.width,T=x[0].contentRect.height;Math.abs(b.$size.width-E)>1||Math.abs(b.$size.height-T)>1?b.$resizeTimer.delay():b.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},g}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,r.implement(D.prototype,v),o.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(g){!g&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):g&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(g){this.$textLayer.setShowInvisibles(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(g){typeof g=="number"&&(this.$printMarginColumn=g),this.$showPrintMargin=!!g,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(g){this.$gutter.style.display=g?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(g){this.$gutterLayer.$useSvgGutterIcons=g},initialValue:!1},showFoldedAnnotations:{set:function(g){this.$gutterLayer.$showFoldedAnnotations=g},initialValue:!1},fadeFoldWidgets:{set:function(g){p.setCssClass(this.$gutter,"ace_fade-fold-widgets",g)},initialValue:!1},showFoldWidgets:{set:function(g){this.$gutterLayer.setShowFoldWidgets(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(g){this.$textLayer.setDisplayIndentGuides(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(g){this.$textLayer.setHighlightIndentGuides(g)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(g){this.$gutterLayer.setHighlightGutterLine(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(g){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(g){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(g){typeof g=="number"&&(g=g+"px"),this.container.style.fontSize=g,this.updateFontSize()},initialValue:12},fontFamily:{set:function(g){this.container.style.fontFamily=g,this.updateFontSize()}},maxLines:{set:function(g){this.updateFull()}},minLines:{set:function(g){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(g){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(g){g=+g||0,this.$scrollPastEnd!=g&&(this.$scrollPastEnd=g,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(g){this.$gutterLayer.$fixedWidth=!!g,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(g){this.$updateCustomScrollbar(g)},initialValue:!1},theme:{set:function(g){this.setTheme(g)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),t.VirtualRenderer=D});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var r=e("../lib/oop"),p=e("../lib/net"),a=e("../lib/event_emitter").EventEmitter,o=e("../config");function l(f){var h="importScripts('"+p.qualifyURL(f)+"');";try{return new Blob([h],{type:"application/javascript"})}catch{var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,c=new d;return c.append(h),c.getBlob("application/javascript")}}function u(f){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(o.get("loadWorkerFromBlob")){var h=l(f),d=window.URL||window.webkitURL,c=d.createObjectURL(h);return new Worker(c)}return new Worker(f)}var i=function(f){f.postMessage||(f=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=f,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,a),this.$createWorkerFromOldConfig=function(f,h,d,c,_){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),o.get("packaged")||!e.toUrl)c=c||o.moduleUrl(h,"worker");else{var m=this.$normalizePath;c=c||m(e.toUrl("ace/worker/worker.js",null,"_"));var v={};f.forEach(function(y){v[y]=m(e.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=u(c),_&&this.send("importScripts",_),this.$worker.postMessage({init:!0,tlns:v,module:h,classname:d}),this.$worker},this.onMessage=function(f){var h=f.data;switch(h.type){case"event":this._signal(h.name,{data:h.data});break;case"call":var d=this.callbacks[h.id];d&&(d(h.data),delete this.callbacks[h.id]);break;case"error":this.reportError(h.data);break;case"log":window.console&&console.log&&console.log.apply(console,h.data);break}},this.reportError=function(f){window.console&&console.error&&console.error(f)},this.$normalizePath=function(f){return p.qualifyURL(f)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(f){f.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(f,h){this.$worker.postMessage({command:f,args:h})},this.call=function(f,h,d){if(d){var c=this.callbackId++;this.callbacks[c]=d,h.push(c)}this.send(f,h)},this.emit=function(f,h){try{h.data&&h.data.err&&(h.data.err={message:h.data.err.message,stack:h.data.err.stack,code:h.data.err.code}),this.$worker&&this.$worker.postMessage({event:f,data:{data:h.data}})}catch(d){console.error(d.stack)}},this.attachToDocument=function(f){this.$doc&&this.terminate(),this.$doc=f,this.call("setValue",[f.getValue()]),f.on("change",this.changeListener,!0)},this.changeListener=function(f){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),f.action=="insert"?this.deltaQueue.push(f.start,f.lines):this.deltaQueue.push(f.start,f.end)},this.$sendDeltaQueue=function(){var f=this.deltaQueue;f&&(this.deltaQueue=null,f.length>50&&f.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:f}))}}).call(i.prototype);var s=function(f,h,d){var c=null,_=!1,m=Object.create(a),v=[],y=new i({messageBuffer:v,terminate:function(){},postMessage:function(S){v.push(S),c&&(_?setTimeout(C):C())}});y.setEmitSync=function(S){_=S};var C=function(){var S=v.shift();S.command?c[S.command].apply(c,S.args):S.event&&m._signal(S.event,S.data)};return m.postMessage=function(S){y.onMessage({data:S})},m.callback=function(S,D){this.postMessage({type:"call",id:D,data:S})},m.emit=function(S,D){this.postMessage({type:"event",name:S,data:D})},o.loadModule(["worker",h],function(S){for(c=new S[d](m);v.length;)C()}),y};t.UIWorkerClient=s,t.WorkerClient=i,t.createWorker=u});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var r=e("./range").Range,p=e("./lib/event_emitter").EventEmitter,a=e("./lib/oop"),o=function(){function l(u,i,s,f,h,d){var c=this;this.length=i,this.session=u,this.doc=u.getDocument(),this.mainClass=h,this.othersClass=d,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=f,this.$onCursorChange=function(){setTimeout(function(){c.onCursorChange()})},this.$pos=s;var _=u.getUndoManager().$undoStack||u.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=_.length,this.setup(),u.selection.on("changeCursor",this.$onCursorChange)}return l.prototype.setup=function(){var u=this,i=this.doc,s=this.session;this.selectionBefore=s.selection.toJSON(),s.selection.inMultiSelectMode&&s.selection.toSingleRange(),this.pos=i.createAnchor(this.$pos.row,this.$pos.column);var f=this.pos;f.$insertRight=!0,f.detach(),f.markerId=s.addMarker(new r(f.row,f.column,f.row,f.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(h){var d=i.createAnchor(h.row,h.column);d.$insertRight=!0,d.detach(),u.others.push(d)}),s.setUndoSelect(!1)},l.prototype.showOtherMarkers=function(){if(!this.othersActive){var u=this.session,i=this;this.othersActive=!0,this.others.forEach(function(s){s.markerId=u.addMarker(new r(s.row,s.column,s.row,s.column+i.length),i.othersClass,null,!1)})}},l.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var u=0;u<this.others.length;u++)this.session.removeMarker(this.others[u].markerId)}},l.prototype.onUpdate=function(u){if(this.$updating)return this.updateAnchors(u);var i=u;if(i.start.row===i.end.row&&i.start.row===this.pos.row){this.$updating=!0;var s=u.action==="insert"?i.end.column-i.start.column:i.start.column-i.end.column,f=i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1,h=i.start.column-this.pos.column;if(this.updateAnchors(u),f&&(this.length+=s),f&&!this.session.$fromUndo){if(u.action==="insert")for(var d=this.others.length-1;d>=0;d--){var c=this.others[d],_={row:c.row,column:c.column+h};this.doc.insertMergedLines(_,u.lines)}else if(u.action==="remove")for(var d=this.others.length-1;d>=0;d--){var c=this.others[d],_={row:c.row,column:c.column+h};this.doc.remove(new r(_.row,_.column,_.row,_.column-s))}}this.$updating=!1,this.updateMarkers()}},l.prototype.updateAnchors=function(u){this.pos.onChange(u);for(var i=this.others.length;i--;)this.others[i].onChange(u);this.updateMarkers()},l.prototype.updateMarkers=function(){if(!this.$updating){var u=this,i=this.session,s=function(h,d){i.removeMarker(h.markerId),h.markerId=i.addMarker(new r(h.row,h.column,h.row,h.column+u.length),d,null,!1)};s(this.pos,this.mainClass);for(var f=this.others.length;f--;)s(this.others[f],this.othersClass)}},l.prototype.onCursorChange=function(u){if(!(this.$updating||!this.session)){var i=this.session.selection.getCursor();i.row===this.pos.row&&i.column>=this.pos.column&&i.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",u)):(this.hideOtherMarkers(),this._emit("cursorLeave",u))}},l.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},l.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var u=this.session.getUndoManager(),i=(u.$undoStack||u.$undostack).length-this.$undoStackDepth,s=0;s<i;s++)u.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},l}();a.implement(o.prototype,p),t.PlaceHolder=o});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var r=e("../lib/event"),p=e("../lib/useragent");function a(l,u){return l.row==u.row&&l.column==u.column}function o(l){var u=l.domEvent,i=u.altKey,s=u.shiftKey,f=u.ctrlKey,h=l.getAccelKey(),d=l.getButton();if(f&&p.isMac&&(d=u.button),l.editor.inMultiSelectMode&&d==2){l.editor.textInput.onContextMenu(l.domEvent);return}if(!f&&!i&&!h){d===0&&l.editor.inMultiSelectMode&&l.editor.exitMultiSelectMode();return}if(d===0){var c=l.editor,_=c.selection,m=c.inMultiSelectMode,v=l.getDocumentPosition(),y=_.getCursor(),C=l.inSelection()||_.isEmpty()&&a(v,y),S=l.x,D=l.y,g=function(H){S=H.clientX,D=H.clientY},b=c.session,x=c.renderer.pixelToScreenCoordinates(S,D),E=x,T;if(c.$mouseHandler.$enableJumpToDef)f&&i||h&&i?T=s?"block":"add":i&&c.$blockSelectEnabled&&(T="block");else if(h&&!i){if(T="add",!m&&s)return}else i&&c.$blockSelectEnabled&&(T="block");if(T&&p.isMac&&u.ctrlKey&&c.$mouseHandler.cancelContextMenu(),T=="add"){if(!m&&C)return;if(!m){var M=_.toOrientedRange();c.addSelectionMarker(M)}var w=_.rangeList.rangeAtPoint(v);c.inVirtualSelectionMode=!0,s&&(w=null,M=_.ranges[0]||M,c.removeSelectionMarker(M)),c.once("mouseup",function(){var H=_.toOrientedRange();w&&H.isEmpty()&&a(w.cursor,H.cursor)?_.substractPoint(H.cursor):(s?_.substractPoint(M.cursor):M&&(c.removeSelectionMarker(M),_.addRange(M)),_.addRange(H)),c.inVirtualSelectionMode=!1})}else if(T=="block"){l.stop(),c.inVirtualSelectionMode=!0;var F,L=[],R=function(){var H=c.renderer.pixelToScreenCoordinates(S,D),P=b.screenToDocumentPosition(H.row,H.column,H.offsetX);a(E,H)&&a(P,_.lead)||(E=H,c.selection.moveToPosition(P),c.renderer.scrollCursorIntoView(),c.removeSelectionMarkers(L),L=_.rectangularRangeBlock(E,x),c.$mouseHandler.$clickSelection&&L.length==1&&L[0].isEmpty()&&(L[0]=c.$mouseHandler.$clickSelection.clone()),L.forEach(c.addSelectionMarker,c),c.updateSelectionMarkers())};m&&!h?_.toSingleRange():!m&&h&&(F=_.toOrientedRange(),c.addSelectionMarker(F)),s?x=b.documentToScreenPosition(_.lead):_.moveToPosition(v),E={row:-1,column:-1};var A=function(H){R(),clearInterval($),c.removeSelectionMarkers(L),L.length||(L=[_.toOrientedRange()]),F&&(c.removeSelectionMarker(F),_.toSingleRange(F));for(var P=0;P<L.length;P++)_.addRange(L[P]);c.inVirtualSelectionMode=!1,c.$mouseHandler.$clickSelection=null},I=R;r.capture(c.container,g,A);var $=setInterval(function(){I()},20);return l.preventDefault()}}}t.onMouseDown=o});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(p){p.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(p){p.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(p){p.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(p){p.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(p){p.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(p){p.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(p){p.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(p){p.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(p){p.multiSelect.rangeCount>1?p.multiSelect.joinSelections():p.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(p){p.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(p){p.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(p){p.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(p){p.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(p){return p&&p.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var r=e("./range_list").RangeList,p=e("./range").Range,a=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,l=e("./lib/event"),u=e("./lib/lang"),i=e("./commands/multi_select_commands");t.commands=i.defaultCommands.concat(i.multiSelectCommands);var s=e("./search").Search,f=new s;function h(y,C,S){return f.$options.wrap=!0,f.$options.needle=C,f.$options.backwards=S==-1,f.find(y)}var d=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(d.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,C){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),C||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}y.cursor||(y.cursor=y.end);var D=this.rangeList.add(y);return this.$onAddRange(y),D.length&&this.$onRemoveRange(D),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),C||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var C=this.rangeList.removeAll();C.length&&this.$onRemoveRange(C),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var C=this.rangeList.substractPoint(y);if(C)return this.$onRemoveRange(C),C[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var C=this.rangeList.ranges.pop();y.push(C),this.rangeCount=0}for(var S=y.length;S--;){var D=this.ranges.indexOf(y[S]);this.ranges.splice(D,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),C=C||this.ranges[0],C&&!C.isEqual(this.getRange())&&this.fromOrientedRange(C)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],C=[],S=0;S<y.length;S++){var D=y[S],g=D.start.row,b=D.end.row;if(g===b)C.push(D.clone());else{for(C.push(new p(g,D.start.column,g,this.session.getLine(g).length));++g<b;)C.push(this.getLineRange(g,!0));C.push(new p(b,0,b,D.end.column))}S==0&&!this.isBackwards()&&(C=C.reverse())}this.toSingleRange();for(var S=C.length;S--;)this.addRange(C[S])},this.joinSelections=function(){var y=this.rangeList.ranges,C=y[y.length-1],S=p.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(S,C.cursor==C.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,C=y[y.length-1],S=p.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(S,C.cursor==C.start)}else{var D=this.session.documentToScreenPosition(this.cursor),g=this.session.documentToScreenPosition(this.anchor),b=this.rectangularRangeBlock(D,g);b.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,C,S){var D=[],g=y.column<C.column;if(g)var b=y.column,x=C.column,E=y.offsetX,T=C.offsetX;else var b=C.column,x=y.column,E=C.offsetX,T=y.offsetX;var M=y.row<C.row;if(M)var w=y.row,F=C.row;else var w=C.row,F=y.row;b<0&&(b=0),w<0&&(w=0),w==F&&(S=!0);for(var L,R=w;R<=F;R++){var A=p.fromPoints(this.session.screenToDocumentPosition(R,b,E),this.session.screenToDocumentPosition(R,x,T));if(A.isEmpty()){if(L&&_(A.end,L))break;L=A.end}A.cursor=g?A.start:A.end,D.push(A)}if(M&&D.reverse(),!S){for(var I=D.length-1;D[I].isEmpty()&&I>0;)I--;if(I>0)for(var $=0;D[$].isEmpty();)$++;for(var H=I;H>=$;H--)D[H].isEmpty()&&D.splice(H,1)}return D}}.call(a.prototype);var c=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var C=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",C),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var C=this.session.$selectionMarkers.indexOf(y);C!=-1&&this.session.$selectionMarkers.splice(C,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var C=this.session.$selectionMarkers,S=y.length;S--;){var D=y[S];if(D.marker){this.session.removeMarker(D.marker);var g=C.indexOf(D);g!=-1&&C.splice(g,1)}}this.session.selectionMarkerCount=C.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(i.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(i.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var C=y.command,S=y.editor;if(S.multiSelect){if(C.multiSelectAction)C.multiSelectAction=="forEach"?D=S.forEachSelection(C,y.args):C.multiSelectAction=="forEachLine"?D=S.forEachSelection(C,y.args,!0):C.multiSelectAction=="single"?(S.exitMultiSelectMode(),D=C.exec(S,y.args||{})):D=C.multiSelectAction(S,y.args||{});else{var D=C.exec(S,y.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return D}},this.forEachSelection=function(y,C,S){if(!this.inVirtualSelectionMode){var D=S&&S.keepOrder,g=S==!0||S&&S.$byLines,b=this.session,x=this.selection,E=x.rangeList,T=(D?x:E).ranges,M;if(!T.length)return y.exec?y.exec(this,C||{}):y(this,C||{});var w=x._eventRegistry;x._eventRegistry={};var F=new a(b);this.inVirtualSelectionMode=!0;for(var L=T.length;L--;){if(g)for(;L>0&&T[L].start.row==T[L-1].end.row;)L--;F.fromOrientedRange(T[L]),F.index=L,this.selection=b.selection=F;var R=y.exec?y.exec(this,C||{}):y(this,C||{});!M&&R!==void 0&&(M=R),F.toOrientedRange(T[L])}F.detach(),this.selection=b.selection=x,this.inVirtualSelectionMode=!1,x._eventRegistry=w,x.mergeOverlappingRanges(),x.ranges[0]&&x.fromOrientedRange(x.ranges[0]);var A=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),A&&A.from==A.to&&this.renderer.animateScrolling(A.from),M}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var C=this.multiSelect.rangeList.ranges,S=[],D=0;D<C.length;D++)S.push(this.session.getTextRange(C[D]));var g=this.session.getDocument().getNewLineCharacter();y=S.join(g),y.length==(S.length-1)*g.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,C){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&C==this.multiSelect.anchor)return;var D=C==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;D.row!=C.row||this.session.$clipPositionToDocument(D.row,D.column).column!=C.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,C,S){if(C=C||{},C.needle=y||C.needle,C.needle==null){var D=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();C.needle=this.session.getTextRange(D)}this.$search.set(C);var g=this.$search.findAll(this.session);if(!g.length)return 0;var b=this.multiSelect;S||b.toSingleRange(g[0]);for(var x=g.length;x--;)b.addRange(g[x],!0);return D&&b.rangeList.rangeAtPoint(D.start)&&b.addRange(D,!0),g.length},this.selectMoreLines=function(y,C){var S=this.selection.toOrientedRange(),D=S.cursor==S.end,g=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(g.column=this.selection.$desiredColumn);var b=this.session.screenToDocumentPosition(g.row+y,g.column);if(S.isEmpty())var E=b;else var x=this.session.documentToScreenPosition(D?S.end:S.start),E=this.session.screenToDocumentPosition(x.row+y,x.column);if(D){var T=p.fromPoints(b,E);T.cursor=T.start}else{var T=p.fromPoints(E,b);T.cursor=T.end}if(T.desiredColumn=g.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(C)var M=S.cursor;this.selection.addRange(T),M&&this.selection.substractPoint(M)},this.transposeSelections=function(y){for(var C=this.session,S=C.multiSelect,D=S.ranges,g=D.length;g--;){var b=D[g];if(b.isEmpty()){var x=C.getWordRange(b.start.row,b.start.column);b.start.row=x.start.row,b.start.column=x.start.column,b.end.row=x.end.row,b.end.column=x.end.column}}S.mergeOverlappingRanges();for(var E=[],g=D.length;g--;){var b=D[g];E.unshift(C.getTextRange(b))}y<0?E.unshift(E.pop()):E.push(E.shift());for(var g=D.length;g--;){var b=D[g],T=b.clone();C.replace(b,E[g]),b.start.row=T.start.row,b.start.column=T.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(y,C,S){var D=this.session,g=D.multiSelect,b=g.toOrientedRange();if(!(b.isEmpty()&&(b=D.getWordRange(b.start.row,b.start.column),b.cursor=y==-1?b.start:b.end,this.multiSelect.addRange(b),S))){var x=D.getTextRange(b),E=h(D,x,y);E&&(E.cursor=y==-1?E.start:E.end,this.session.unfold(E),this.multiSelect.addRange(E),this.renderer.scrollCursorIntoView(null,.5)),C&&this.multiSelect.substractPoint(b.cursor)}},this.alignCursors=function(){var y=this.session,C=y.multiSelect,S=C.ranges,D=-1,g=S.filter(function(I){if(I.cursor.row==D)return!0;D=I.cursor.row});if(!S.length||g.length==S.length-1){var b=this.selection.getRange(),x=b.start.row,E=b.end.row,T=x==E;if(T){var M=this.session.getLength(),w;do w=this.session.getLine(E);while(/[=:]/.test(w)&&++E<M);do w=this.session.getLine(x);while(/[=:]/.test(w)&&--x>0);x<0&&(x=0),E>=M&&(E=M-1)}var F=this.session.removeFullLines(x,E);F=this.$reAlignText(F,T),this.session.insert({row:x,column:0},F.join(`
`)+`
`),T||(b.start.column=0,b.end.column=F[F.length-1].length),this.selection.setRange(b)}else{g.forEach(function(I){C.substractPoint(I.cursor)});var L=0,R=1/0,A=S.map(function(I){var $=I.cursor,H=y.getLine($.row),P=H.substr($.column).search(/\S/g);return P==-1&&(P=0),$.column>L&&(L=$.column),P<R&&(R=P),P});S.forEach(function(I,$){var H=I.cursor,P=L-H.column,q=A[$]-R;P>q?y.insert(H,u.stringRepeat(" ",P-q)):y.remove(new p(H.row,H.column,H.row,H.column-P+q)),I.start.column=I.end.column=L,I.start.row=I.end.row=H.row,I.cursor=I.end}),C.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,C){var S=!0,D=!0,g,b,x;return y.map(function(F){var L=F.match(/(\s*)(.*?)(\s*)([=:].*)/);return L?g==null?(g=L[1].length,b=L[2].length,x=L[3].length,L):(g+b+x!=L[1].length+L[2].length+L[3].length&&(D=!1),g!=L[1].length&&(S=!1),g>L[1].length&&(g=L[1].length),b<L[2].length&&(b=L[2].length),x>L[3].length&&(x=L[3].length),L):[F]}).map(C?T:S?D?M:T:w);function E(F){return u.stringRepeat(" ",F)}function T(F){return F[2]?E(g)+F[2]+E(b-F[2].length+x)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}function M(F){return F[2]?E(g+b-F[2].length)+F[2]+E(x)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}function w(F){return F[2]?E(g)+F[2]+E(x)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}}}).call(c.prototype);function _(y,C){return y.row==C.row&&y.column==C.column}t.onSessionChange=function(y){var C=y.session;C&&!C.multiSelect&&(C.$selectionMarkers=[],C.selection.$initRangeList(),C.multiSelect=C.selection),this.multiSelect=C&&C.multiSelect;var S=y.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),C&&(C.multiSelect.on("addRange",this.$onAddRange),C.multiSelect.on("removeRange",this.$onRemoveRange),C.multiSelect.on("multiSelect",this.$onMultiSelect),C.multiSelect.on("singleSelect",this.$onSingleSelect),C.multiSelect.lead.on("change",this.$checkMultiselectChange),C.multiSelect.anchor.on("change",this.$checkMultiselectChange)),C&&this.inMultiSelectMode!=C.selection.inMultiSelectMode&&(C.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function m(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=t.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",o),y.commands.addCommands(i.defaultCommands),v(y))}function v(y){if(!y.textInput)return;var C=y.textInput.getElement(),S=!1;l.addListener(C,"keydown",function(g){var b=g.keyCode==18&&!(g.ctrlKey||g.shiftKey||g.metaKey);y.$blockSelectEnabled&&b?S||(y.renderer.setMouseCursor("crosshair"),S=!0):S&&D()},y),l.addListener(C,"keyup",D,y),l.addListener(C,"blur",D,y);function D(g){S&&(y.renderer.setMouseCursor(""),S=!1)}}t.MultiSelect=m,e("./config").defineOptions(c.prototype,"editor",{enableMultiselect:{set:function(y){m(this),y?this.on("mousedown",o):this.off("mousedown",o)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var r=e("../../range").Range,p=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(a,o,l){var u=a.getLine(l);return this.foldingStartMarker.test(u)?"start":o=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(u)?"end":""},this.getFoldWidgetRange=function(a,o,l){return null},this.indentationBlock=function(a,o,l){var u=/\S/,i=a.getLine(o),s=i.search(u);if(s!=-1){for(var f=l||i.length,h=a.getLength(),d=o,c=o;++o<h;){var _=a.getLine(o).search(u);if(_!=-1){if(_<=s){var m=a.getTokenAt(o,0);if(!m||m.type!=="string")break}c=o}}if(c>d){var v=a.getLine(c).length;return new r(d,f,c,v)}}},this.openingBracketBlock=function(a,o,l,u,i){var s={row:l,column:u+1},f=a.$findClosingBracket(o,s,i);if(f){var h=a.foldWidgets[f.row];return h==null&&(h=a.getFoldWidget(f.row)),h=="start"&&f.row>s.row&&(f.row--,f.column=a.getLine(f.row).length),r.fromPoints(s,f)}},this.closingBracketBlock=function(a,o,l,u,i){var s={row:l,column:u},f=a.$findOpeningBracket(o,s);if(f)return f.column++,s.column--,r.fromPoints(f,s)}}).call(p.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,n){"use strict";var r=e("../line_widgets").LineWidgets,p=e("../lib/dom"),a=e("../range").Range,o=e("../config").nls;function l(i,s,f){for(var h=0,d=i.length-1;h<=d;){var c=h+d>>1,_=f(s,i[c]);if(_>0)h=c+1;else if(_<0)d=c-1;else return c}return-(h+1)}function u(i,s,f){var h=i.getAnnotations().sort(a.comparePoints);if(h.length){var d=l(h,{row:s,column:-1},a.comparePoints);d<0&&(d=-d-1),d>=h.length?d=f>0?0:h.length-1:d===0&&f<0&&(d=h.length-1);var c=h[d];if(!(!c||!f)){if(c.row===s){do c=h[d+=f];while(c&&c.row===s);if(!c)return h.slice()}var _=[];s=c.row;do _[f<0?"unshift":"push"](c),c=h[d+=f];while(c&&c.row==s);return _.length&&_}}}t.showErrorMarker=function(i,s){var f=i.session;f.widgetManager||(f.widgetManager=new r(f),f.widgetManager.attach(i));var h=i.getCursorPosition(),d=h.row,c=f.widgetManager.getWidgetsAtRow(d).filter(function(b){return b.type=="errorMarker"})[0];c?c.destroy():d-=s;var _=u(f,d,s),m;if(_){var v=_[0];h.column=(v.pos&&typeof v.column!="number"?v.pos.sc:v.column)||0,h.row=v.row,m=i.renderer.$gutterLayer.$annotations[h.row]}else{if(c)return;m={text:[o("Looks good!")],className:"ace_ok"}}i.session.unfold(h.row),i.selection.moveToPosition(h);var y={row:h.row,fixedWidth:!0,coverGutter:!0,el:p.createElement("div"),type:"errorMarker"},C=y.el.appendChild(p.createElement("div")),S=y.el.appendChild(p.createElement("div"));S.className="error_widget_arrow "+m.className;var D=i.renderer.$cursorLayer.getPixelPosition(h).left;S.style.left=D+i.renderer.gutterWidth-5+"px",y.el.className="error_widget_wrapper",C.className="error_widget "+m.className,C.innerHTML=m.text.join("<br>"),C.appendChild(p.createElement("div"));var g=function(b,x,E){if(x===0&&(E==="esc"||E==="return"))return y.destroy(),{command:"null"}};y.destroy=function(){i.$mouseHandler.isMousePressed||(i.keyBinding.removeKeyboardHandler(g),f.widgetManager.removeLineWidget(y),i.off("changeSelection",y.destroy),i.off("changeSession",y.destroy),i.off("mouseup",y.destroy),i.off("change",y.destroy))},i.keyBinding.addKeyboardHandler(g),i.on("changeSelection",y.destroy),i.on("changeSession",y.destroy),i.on("mouseup",y.destroy),i.on("change",y.destroy),i.session.widgetManager.addLineWidget(y),y.el.onmousedown=i.focus.bind(i),i.renderer.scrollCursorIntoView(null,.5,{bottom:y.el.offsetHeight})},p.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var r=e("./lib/dom"),p=e("./range").Range,a=e("./editor").Editor,o=e("./edit_session").EditSession,l=e("./undomanager").UndoManager,u=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(i,s){if(typeof i=="string"){var f=i;if(i=document.getElementById(f),!i)throw new Error("ace.edit can't find div #"+f)}if(i&&i.env&&i.env.editor instanceof a)return i.env.editor;var h="";if(i&&/input|textarea/i.test(i.tagName)){var d=i;h=d.value,i=r.createElement("pre"),d.parentNode.replaceChild(i,d)}else i&&(h=i.textContent,i.innerHTML="");var c=t.createEditSession(h),_=new a(new u(i),c,s),m={document:c,editor:_,onResize:_.resize.bind(_,null)};return d&&(m.textarea=d),_.on("destroy",function(){m.editor.container.env=null}),_.container.env=_.env=m,_},t.createEditSession=function(i,s){var f=new o(i,s);return f.setUndoManager(new l),f},t.Range=p,t.Editor=a,t.EditSession=o,t.UndoManager=l,t.VirtualRenderer=u,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var n in e)e.hasOwnProperty(n)&&(t.ace[n]=e[n]);t.ace.default=t.ace,typeof Qg=="object"&&typeof RN=="object"&&Qg&&(Qg.exports=t.ace)})})()});var XN=Tt(QN=>{"use strict";QN.supports=function(...t){let n=t.reduce((r,p)=>Object.assign(r,p),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}});var Ha=Tt((v7e,YN)=>{"use strict";YN.exports=class extends Error{constructor(t,n){super(t||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var tB=Tt(ry=>{"use strict";ry.byteLength=Ote;ry.toByteArray=kte;ry.fromByteArray=Wte;var gi=[],ca=[],Hte=typeof Uint8Array<"u"?Uint8Array:Array,y1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Jc=0,ZN=y1.length;Jc<ZN;++Jc)gi[Jc]=y1[Jc],ca[y1.charCodeAt(Jc)]=Jc;var Jc,ZN;ca[45]=62;ca[95]=63;function eB(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function Ote(e){var t=eB(e),n=t[0],r=t[1];return(n+r)*3/4-r}function Pte(e,t,n){return(t+n)*3/4-n}function kte(e){var t,n=eB(e),r=n[0],p=n[1],a=new Hte(Pte(e,r,p)),o=0,l=p>0?r-4:r,u;for(u=0;u<l;u+=4)t=ca[e.charCodeAt(u)]<<18|ca[e.charCodeAt(u+1)]<<12|ca[e.charCodeAt(u+2)]<<6|ca[e.charCodeAt(u+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return p===2&&(t=ca[e.charCodeAt(u)]<<2|ca[e.charCodeAt(u+1)]>>4,a[o++]=t&255),p===1&&(t=ca[e.charCodeAt(u)]<<10|ca[e.charCodeAt(u+1)]<<4|ca[e.charCodeAt(u+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function Nte(e){return gi[e>>18&63]+gi[e>>12&63]+gi[e>>6&63]+gi[e&63]}function Bte(e,t,n){for(var r,p=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),p.push(Nte(r));return p.join("")}function Wte(e){for(var t,n=e.length,r=n%3,p=[],a=16383,o=0,l=n-r;o<l;o+=a)p.push(Bte(e,o,o+a>l?l:o+a));return r===1?(t=e[n-1],p.push(gi[t>>2]+gi[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],p.push(gi[t>>10]+gi[t>>4&63]+gi[t<<2&63]+"=")),p.join("")}});var nB=Tt(D1=>{D1.read=function(e,t,n,r,p){var a,o,l=p*8-r-1,u=(1<<l)-1,i=u>>1,s=-7,f=n?p-1:0,h=n?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-s)-1,d>>=-s,s+=l;s>0;a=a*256+e[t+f],f+=h,s-=8);for(o=a&(1<<-s)-1,a>>=-s,s+=r;s>0;o=o*256+e[t+f],f+=h,s-=8);if(a===0)a=1-i;else{if(a===u)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),a=a-i}return(d?-1:1)*o*Math.pow(2,a-r)};D1.write=function(e,t,n,r,p,a){var o,l,u,i=a*8-p-1,s=(1<<i)-1,f=s>>1,h=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,c=r?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,o=s):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+f>=1?t+=h/u:t+=h*Math.pow(2,1-f),t*u>=2&&(o++,u/=2),o+f>=s?(l=0,o=s):o+f>=1?(l=(t*u-1)*Math.pow(2,p),o=o+f):(l=t*Math.pow(2,f-1)*Math.pow(2,p),o=0));p>=8;e[n+d]=l&255,d+=c,l/=256,p-=8);for(o=o<<p|l,i+=p;i>0;e[n+d]=o&255,d+=c,o/=256,i-=8);e[n+d-c]|=_*128}});var iy=Tt(Wf=>{"use strict";var C1=tB(),Nf=nB(),rB=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Wf.Buffer=re;Wf.SlowBuffer=Jte;Wf.INSPECT_MAX_BYTES=50;var oy=2147483647;Wf.kMaxLength=oy;re.TYPED_ARRAY_SUPPORT=Ute();!re.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Ute(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(re.prototype,"parent",{enumerable:!0,get:function(){if(re.isBuffer(this))return this.buffer}});Object.defineProperty(re.prototype,"offset",{enumerable:!0,get:function(){if(re.isBuffer(this))return this.byteOffset}});function lu(e){if(e>oy)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,re.prototype),t}function re(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E1(e)}return uB(e,t,n)}re.poolSize=8192;function uB(e,t,n){if(typeof e=="string")return zte(e,t);if(ArrayBuffer.isView(e))return Vte(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(yi(e,ArrayBuffer)||e&&yi(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(yi(e,SharedArrayBuffer)||e&&yi(e.buffer,SharedArrayBuffer)))return w1(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let r=e.valueOf&&e.valueOf();if(r!=null&&r!==e)return re.from(r,t,n);let p=Gte(e);if(p)return p;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return re.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}re.from=function(e,t,n){return uB(e,t,n)};Object.setPrototypeOf(re.prototype,Uint8Array.prototype);Object.setPrototypeOf(re,Uint8Array);function sB(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function qte(e,t,n){return sB(e),e<=0?lu(e):t!==void 0?typeof n=="string"?lu(e).fill(t,n):lu(e).fill(t):lu(e)}re.alloc=function(e,t,n){return qte(e,t,n)};function E1(e){return sB(e),lu(e<0?0:T1(e)|0)}re.allocUnsafe=function(e){return E1(e)};re.allocUnsafeSlow=function(e){return E1(e)};function zte(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!re.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=cB(e,t)|0,r=lu(n),p=r.write(e,t);return p!==n&&(r=r.slice(0,p)),r}function b1(e){let t=e.length<0?0:T1(e.length)|0,n=lu(t);for(let r=0;r<t;r+=1)n[r]=e[r]&255;return n}function Vte(e){if(yi(e,Uint8Array)){let t=new Uint8Array(e);return w1(t.buffer,t.byteOffset,t.byteLength)}return b1(e)}function w1(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return t===void 0&&n===void 0?r=new Uint8Array(e):n===void 0?r=new Uint8Array(e,t):r=new Uint8Array(e,t,n),Object.setPrototypeOf(r,re.prototype),r}function Gte(e){if(re.isBuffer(e)){let t=T1(e.length)|0,n=lu(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||x1(e.length)?lu(0):b1(e);if(e.type==="Buffer"&&Array.isArray(e.data))return b1(e.data)}function T1(e){if(e>=oy)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+oy.toString(16)+" bytes");return e|0}function Jte(e){return+e!=e&&(e=0),re.alloc(+e)}re.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==re.prototype};re.compare=function(t,n){if(yi(t,Uint8Array)&&(t=re.from(t,t.offset,t.byteLength)),yi(n,Uint8Array)&&(n=re.from(n,n.offset,n.byteLength)),!re.isBuffer(t)||!re.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let r=t.length,p=n.length;for(let a=0,o=Math.min(r,p);a<o;++a)if(t[a]!==n[a]){r=t[a],p=n[a];break}return r<p?-1:p<r?1:0};re.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};re.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return re.alloc(0);let r;if(n===void 0)for(n=0,r=0;r<t.length;++r)n+=t[r].length;let p=re.allocUnsafe(n),a=0;for(r=0;r<t.length;++r){let o=t[r];if(yi(o,Uint8Array))a+o.length>p.length?(re.isBuffer(o)||(o=re.from(o)),o.copy(p,a)):Uint8Array.prototype.set.call(p,o,a);else if(re.isBuffer(o))o.copy(p,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=o.length}return p};function cB(e,t){if(re.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||yi(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&n===0)return 0;let p=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return S1(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return gB(e).length;default:if(p)return r?-1:S1(e).length;t=(""+t).toLowerCase(),p=!0}}re.byteLength=cB;function jte(e,t,n){let r=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return one(this,t,n);case"utf8":case"utf-8":return fB(this,t,n);case"ascii":return nne(this,t,n);case"latin1":case"binary":return rne(this,t,n);case"base64":return ene(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ane(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}re.prototype._isBuffer=!0;function jc(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}re.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)jc(this,n,n+1);return this};re.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)jc(this,n,n+3),jc(this,n+1,n+2);return this};re.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)jc(this,n,n+7),jc(this,n+1,n+6),jc(this,n+2,n+5),jc(this,n+3,n+4);return this};re.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?fB(this,0,t):jte.apply(this,arguments)};re.prototype.toLocaleString=re.prototype.toString;re.prototype.equals=function(t){if(!re.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:re.compare(this,t)===0};re.prototype.inspect=function(){let t="",n=Wf.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};rB&&(re.prototype[rB]=re.prototype.inspect);re.prototype.compare=function(t,n,r,p,a){if(yi(t,Uint8Array)&&(t=re.from(t,t.offset,t.byteLength)),!re.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),r===void 0&&(r=t?t.length:0),p===void 0&&(p=0),a===void 0&&(a=this.length),n<0||r>t.length||p<0||a>this.length)throw new RangeError("out of range index");if(p>=a&&n>=r)return 0;if(p>=a)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,p>>>=0,a>>>=0,this===t)return 0;let o=a-p,l=r-n,u=Math.min(o,l),i=this.slice(p,a),s=t.slice(n,r);for(let f=0;f<u;++f)if(i[f]!==s[f]){o=i[f],l=s[f];break}return o<l?-1:l<o?1:0};function lB(e,t,n,r,p){if(e.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,x1(n)&&(n=p?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(p)return-1;n=e.length-1}else if(n<0)if(p)n=0;else return-1;if(typeof t=="string"&&(t=re.from(t,r)),re.isBuffer(t))return t.length===0?-1:oB(e,t,n,r,p);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?p?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):oB(e,[t],n,r,p);throw new TypeError("val must be string, number or Buffer")}function oB(e,t,n,r,p){let a=1,o=e.length,l=t.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,o/=2,l/=2,n/=2}function u(s,f){return a===1?s[f]:s.readUInt16BE(f*a)}let i;if(p){let s=-1;for(i=n;i<o;i++)if(u(e,i)===u(t,s===-1?0:i-s)){if(s===-1&&(s=i),i-s+1===l)return s*a}else s!==-1&&(i-=i-s),s=-1}else for(n+l>o&&(n=o-l),i=n;i>=0;i--){let s=!0;for(let f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){s=!1;break}if(s)return i}return-1}re.prototype.includes=function(t,n,r){return this.indexOf(t,n,r)!==-1};re.prototype.indexOf=function(t,n,r){return lB(this,t,n,r,!0)};re.prototype.lastIndexOf=function(t,n,r){return lB(this,t,n,r,!1)};function Kte(e,t,n,r){n=Number(n)||0;let p=e.length-n;r?(r=Number(r),r>p&&(r=p)):r=p;let a=t.length;r>a/2&&(r=a/2);let o;for(o=0;o<r;++o){let l=parseInt(t.substr(o*2,2),16);if(x1(l))return o;e[n+o]=l}return o}function Qte(e,t,n,r){return ay(S1(t,e.length-n),e,n,r)}function Xte(e,t,n,r){return ay(cne(t),e,n,r)}function Yte(e,t,n,r){return ay(gB(t),e,n,r)}function Zte(e,t,n,r){return ay(lne(t,e.length-n),e,n,r)}re.prototype.write=function(t,n,r,p){if(n===void 0)p="utf8",r=this.length,n=0;else if(r===void 0&&typeof n=="string")p=n,r=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(r)?(r=r>>>0,p===void 0&&(p="utf8")):(p=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-n;if((r===void 0||r>a)&&(r=a),t.length>0&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");p||(p="utf8");let o=!1;for(;;)switch(p){case"hex":return Kte(this,t,n,r);case"utf8":case"utf-8":return Qte(this,t,n,r);case"ascii":case"latin1":case"binary":return Xte(this,t,n,r);case"base64":return Yte(this,t,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zte(this,t,n,r);default:if(o)throw new TypeError("Unknown encoding: "+p);p=(""+p).toLowerCase(),o=!0}};re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ene(e,t,n){return t===0&&n===e.length?C1.fromByteArray(e):C1.fromByteArray(e.slice(t,n))}function fB(e,t,n){n=Math.min(e.length,n);let r=[],p=t;for(;p<n;){let a=e[p],o=null,l=a>239?4:a>223?3:a>191?2:1;if(p+l<=n){let u,i,s,f;switch(l){case 1:a<128&&(o=a);break;case 2:u=e[p+1],(u&192)===128&&(f=(a&31)<<6|u&63,f>127&&(o=f));break;case 3:u=e[p+1],i=e[p+2],(u&192)===128&&(i&192)===128&&(f=(a&15)<<12|(u&63)<<6|i&63,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:u=e[p+1],i=e[p+2],s=e[p+3],(u&192)===128&&(i&192)===128&&(s&192)===128&&(f=(a&15)<<18|(u&63)<<12|(i&63)<<6|s&63,f>65535&&f<1114112&&(o=f))}}o===null?(o=65533,l=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),p+=l}return tne(r)}var aB=4096;function tne(e){let t=e.length;if(t<=aB)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=aB));return n}function nne(e,t,n){let r="";n=Math.min(e.length,n);for(let p=t;p<n;++p)r+=String.fromCharCode(e[p]&127);return r}function rne(e,t,n){let r="";n=Math.min(e.length,n);for(let p=t;p<n;++p)r+=String.fromCharCode(e[p]);return r}function one(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let p="";for(let a=t;a<n;++a)p+=fne[e[a]];return p}function ane(e,t,n){let r=e.slice(t,n),p="";for(let a=0;a<r.length-1;a+=2)p+=String.fromCharCode(r[a]+r[a+1]*256);return p}re.prototype.slice=function(t,n){let r=this.length;t=~~t,n=n===void 0?r:~~n,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<t&&(n=t);let p=this.subarray(t,n);return Object.setPrototypeOf(p,re.prototype),p};function br(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}re.prototype.readUintLE=re.prototype.readUIntLE=function(t,n,r){t=t>>>0,n=n>>>0,r||br(t,n,this.length);let p=this[t],a=1,o=0;for(;++o<n&&(a*=256);)p+=this[t+o]*a;return p};re.prototype.readUintBE=re.prototype.readUIntBE=function(t,n,r){t=t>>>0,n=n>>>0,r||br(t,n,this.length);let p=this[t+--n],a=1;for(;n>0&&(a*=256);)p+=this[t+--n]*a;return p};re.prototype.readUint8=re.prototype.readUInt8=function(t,n){return t=t>>>0,n||br(t,1,this.length),this[t]};re.prototype.readUint16LE=re.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||br(t,2,this.length),this[t]|this[t+1]<<8};re.prototype.readUint16BE=re.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||br(t,2,this.length),this[t]<<8|this[t+1]};re.prototype.readUint32LE=re.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||br(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};re.prototype.readUint32BE=re.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||br(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};re.prototype.readBigUInt64LE=Rs(function(t){t=t>>>0,Bf(t,"offset");let n=this[t],r=this[t+7];(n===void 0||r===void 0)&&sh(t,this.length-8);let p=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,a=this[++t]+this[++t]*2**8+this[++t]*2**16+r*2**24;return BigInt(p)+(BigInt(a)<<BigInt(32))});re.prototype.readBigUInt64BE=Rs(function(t){t=t>>>0,Bf(t,"offset");let n=this[t],r=this[t+7];(n===void 0||r===void 0)&&sh(t,this.length-8);let p=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],a=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+r;return(BigInt(p)<<BigInt(32))+BigInt(a)});re.prototype.readIntLE=function(t,n,r){t=t>>>0,n=n>>>0,r||br(t,n,this.length);let p=this[t],a=1,o=0;for(;++o<n&&(a*=256);)p+=this[t+o]*a;return a*=128,p>=a&&(p-=Math.pow(2,8*n)),p};re.prototype.readIntBE=function(t,n,r){t=t>>>0,n=n>>>0,r||br(t,n,this.length);let p=n,a=1,o=this[t+--p];for(;p>0&&(a*=256);)o+=this[t+--p]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*n)),o};re.prototype.readInt8=function(t,n){return t=t>>>0,n||br(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};re.prototype.readInt16LE=function(t,n){t=t>>>0,n||br(t,2,this.length);let r=this[t]|this[t+1]<<8;return r&32768?r|4294901760:r};re.prototype.readInt16BE=function(t,n){t=t>>>0,n||br(t,2,this.length);let r=this[t+1]|this[t]<<8;return r&32768?r|4294901760:r};re.prototype.readInt32LE=function(t,n){return t=t>>>0,n||br(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};re.prototype.readInt32BE=function(t,n){return t=t>>>0,n||br(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};re.prototype.readBigInt64LE=Rs(function(t){t=t>>>0,Bf(t,"offset");let n=this[t],r=this[t+7];(n===void 0||r===void 0)&&sh(t,this.length-8);let p=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(r<<24);return(BigInt(p)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});re.prototype.readBigInt64BE=Rs(function(t){t=t>>>0,Bf(t,"offset");let n=this[t],r=this[t+7];(n===void 0||r===void 0)&&sh(t,this.length-8);let p=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(p)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+r)});re.prototype.readFloatLE=function(t,n){return t=t>>>0,n||br(t,4,this.length),Nf.read(this,t,!0,23,4)};re.prototype.readFloatBE=function(t,n){return t=t>>>0,n||br(t,4,this.length),Nf.read(this,t,!1,23,4)};re.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||br(t,8,this.length),Nf.read(this,t,!0,52,8)};re.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||br(t,8,this.length),Nf.read(this,t,!1,52,8)};function Eo(e,t,n,r,p,a){if(!re.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>p||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}re.prototype.writeUintLE=re.prototype.writeUIntLE=function(t,n,r,p){if(t=+t,n=n>>>0,r=r>>>0,!p){let l=Math.pow(2,8*r)-1;Eo(this,t,n,r,l,0)}let a=1,o=0;for(this[n]=t&255;++o<r&&(a*=256);)this[n+o]=t/a&255;return n+r};re.prototype.writeUintBE=re.prototype.writeUIntBE=function(t,n,r,p){if(t=+t,n=n>>>0,r=r>>>0,!p){let l=Math.pow(2,8*r)-1;Eo(this,t,n,r,l,0)}let a=r-1,o=1;for(this[n+a]=t&255;--a>=0&&(o*=256);)this[n+a]=t/o&255;return n+r};re.prototype.writeUint8=re.prototype.writeUInt8=function(t,n,r){return t=+t,n=n>>>0,r||Eo(this,t,n,1,255,0),this[n]=t&255,n+1};re.prototype.writeUint16LE=re.prototype.writeUInt16LE=function(t,n,r){return t=+t,n=n>>>0,r||Eo(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};re.prototype.writeUint16BE=re.prototype.writeUInt16BE=function(t,n,r){return t=+t,n=n>>>0,r||Eo(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};re.prototype.writeUint32LE=re.prototype.writeUInt32LE=function(t,n,r){return t=+t,n=n>>>0,r||Eo(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};re.prototype.writeUint32BE=re.prototype.writeUInt32BE=function(t,n,r){return t=+t,n=n>>>0,r||Eo(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function dB(e,t,n,r,p){vB(t,r,p,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o=o>>8,e[n++]=o,o=o>>8,e[n++]=o,o=o>>8,e[n++]=o,n}function pB(e,t,n,r,p){vB(t,r,p,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a=a>>8,e[n+6]=a,a=a>>8,e[n+5]=a,a=a>>8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o=o>>8,e[n+2]=o,o=o>>8,e[n+1]=o,o=o>>8,e[n]=o,n+8}re.prototype.writeBigUInt64LE=Rs(function(t,n=0){return dB(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});re.prototype.writeBigUInt64BE=Rs(function(t,n=0){return pB(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});re.prototype.writeIntLE=function(t,n,r,p){if(t=+t,n=n>>>0,!p){let u=Math.pow(2,8*r-1);Eo(this,t,n,r,u-1,-u)}let a=0,o=1,l=0;for(this[n]=t&255;++a<r&&(o*=256);)t<0&&l===0&&this[n+a-1]!==0&&(l=1),this[n+a]=(t/o>>0)-l&255;return n+r};re.prototype.writeIntBE=function(t,n,r,p){if(t=+t,n=n>>>0,!p){let u=Math.pow(2,8*r-1);Eo(this,t,n,r,u-1,-u)}let a=r-1,o=1,l=0;for(this[n+a]=t&255;--a>=0&&(o*=256);)t<0&&l===0&&this[n+a+1]!==0&&(l=1),this[n+a]=(t/o>>0)-l&255;return n+r};re.prototype.writeInt8=function(t,n,r){return t=+t,n=n>>>0,r||Eo(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};re.prototype.writeInt16LE=function(t,n,r){return t=+t,n=n>>>0,r||Eo(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};re.prototype.writeInt16BE=function(t,n,r){return t=+t,n=n>>>0,r||Eo(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};re.prototype.writeInt32LE=function(t,n,r){return t=+t,n=n>>>0,r||Eo(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};re.prototype.writeInt32BE=function(t,n,r){return t=+t,n=n>>>0,r||Eo(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};re.prototype.writeBigInt64LE=Rs(function(t,n=0){return dB(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});re.prototype.writeBigInt64BE=Rs(function(t,n=0){return pB(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function hB(e,t,n,r,p,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function _B(e,t,n,r,p){return t=+t,n=n>>>0,p||hB(e,t,n,4,34028234663852886e22,-34028234663852886e22),Nf.write(e,t,n,r,23,4),n+4}re.prototype.writeFloatLE=function(t,n,r){return _B(this,t,n,!0,r)};re.prototype.writeFloatBE=function(t,n,r){return _B(this,t,n,!1,r)};function mB(e,t,n,r,p){return t=+t,n=n>>>0,p||hB(e,t,n,8,17976931348623157e292,-17976931348623157e292),Nf.write(e,t,n,r,52,8),n+8}re.prototype.writeDoubleLE=function(t,n,r){return mB(this,t,n,!0,r)};re.prototype.writeDoubleBE=function(t,n,r){return mB(this,t,n,!1,r)};re.prototype.copy=function(t,n,r,p){if(!re.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),!p&&p!==0&&(p=this.length),n>=t.length&&(n=t.length),n||(n=0),p>0&&p<r&&(p=r),p===r||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("sourceEnd out of bounds");p>this.length&&(p=this.length),t.length-n<p-r&&(p=t.length-n+r);let a=p-r;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,r,p):Uint8Array.prototype.set.call(t,this.subarray(r,p),n),a};re.prototype.fill=function(t,n,r,p){if(typeof t=="string"){if(typeof n=="string"?(p=n,n=0,r=this.length):typeof r=="string"&&(p=r,r=this.length),p!==void 0&&typeof p!="string")throw new TypeError("encoding must be a string");if(typeof p=="string"&&!re.isEncoding(p))throw new TypeError("Unknown encoding: "+p);if(t.length===1){let o=t.charCodeAt(0);(p==="utf8"&&o<128||p==="latin1")&&(t=o)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n=n>>>0,r=r===void 0?this.length:r>>>0,t||(t=0);let a;if(typeof t=="number")for(a=n;a<r;++a)this[a]=t;else{let o=re.isBuffer(t)?t:re.from(t,p),l=o.length;if(l===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<r-n;++a)this[a+n]=o[a%l]}return this};var kf={};function M1(e,t,n){kf[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(p){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:p,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}M1("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);M1("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);M1("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,p=n;return Number.isInteger(n)&&Math.abs(n)>2**32?p=iB(String(n)):typeof n=="bigint"&&(p=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(p=iB(p)),p+="n"),r+=` It must be ${t}. Received ${p}`,r},RangeError);function iB(e){let t="",n=e.length,r=e[0]==="-"?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function ine(e,t,n){Bf(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&sh(t,e.length-(n+1))}function vB(e,t,n,r,p,a){if(e>n||e<t){let o=typeof t=="bigint"?"n":"",l;throw a>3?t===0||t===BigInt(0)?l=`>= 0${o} and < 2${o} ** ${(a+1)*8}${o}`:l=`>= -(2${o} ** ${(a+1)*8-1}${o}) and < 2 ** ${(a+1)*8-1}${o}`:l=`>= ${t}${o} and <= ${n}${o}`,new kf.ERR_OUT_OF_RANGE("value",l,e)}ine(r,p,a)}function Bf(e,t){if(typeof e!="number")throw new kf.ERR_INVALID_ARG_TYPE(t,"number",e)}function sh(e,t,n){throw Math.floor(e)!==e?(Bf(e,n),new kf.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new kf.ERR_BUFFER_OUT_OF_BOUNDS:new kf.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var une=/[^+/0-9A-Za-z-_]/g;function sne(e){if(e=e.split("=")[0],e=e.trim().replace(une,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function S1(e,t){t=t||1/0;let n,r=e.length,p=null,a=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!p){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}p=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),p=n;continue}n=(p-55296<<10|n-56320)+65536}else p&&(t-=3)>-1&&a.push(239,191,189);if(p=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return a}function cne(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function lne(e,t){let n,r,p,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,p=n%256,a.push(p),a.push(r);return a}function gB(e){return C1.toByteArray(sne(e))}function ay(e,t,n,r){let p;for(p=0;p<r&&!(p+n>=t.length||p>=e.length);++p)t[p+n]=e[p];return p}function yi(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function x1(e){return e!==e}var fne=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let r=n*16;for(let p=0;p<16;++p)t[r+p]=e[n]+e[p]}return t}();function Rs(e){return typeof BigInt>"u"?dne:e}function dne(){throw new Error("BigInt not supported")}});var L1=Tt((b7e,yB)=>{"use strict";var F1=null;yB.exports=function(){return F1===null&&(F1={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),F1}});var R1=Tt(DB=>{"use strict";var A1=Ha(),pne=new Set(["buffer","view","utf8"]),I1=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!pne.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new A1(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new A1(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new A1(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};DB.Encoding=I1});var P1=Tt(uy=>{"use strict";var{Buffer:H1}=iy()||{},{Encoding:O1}=R1(),hne=L1(),ch=class extends O1{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new lh({encode:this.encode,decode:t=>this.decode(H1.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},lh=class extends O1{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new ch({encode:t=>{let n=this.encode(t);return H1.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},$1=class extends O1{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new ch({encode:t=>H1.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:t,textDecoder:n}=hne();return new lh({encode:r=>t.encode(this.encode(r)),decode:r=>this.decode(n.decode(r)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};uy.BufferFormat=ch;uy.ViewFormat=lh;uy.UTF8Format=$1});var SB=Tt(Kc=>{"use strict";var{Buffer:Yr}=iy()||{Buffer:{isBuffer:()=>!1}},{textEncoder:bB,textDecoder:CB}=L1()(),{BufferFormat:fh,ViewFormat:k1,UTF8Format:wB}=P1(),sy=e=>e;Kc.utf8=new wB({encode:function(e){return Yr.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?CB.decode(e):String(e)},decode:sy,name:"utf8",createViewTranscoder(){return new k1({encode:function(e){return ArrayBuffer.isView(e)?e:bB.encode(e)},decode:function(e){return CB.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new fh({encode:function(e){return Yr.isBuffer(e)?e:ArrayBuffer.isView(e)?Yr.from(e.buffer,e.byteOffset,e.byteLength):Yr.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});Kc.json=new wB({encode:JSON.stringify,decode:JSON.parse,name:"json"});Kc.buffer=new fh({encode:function(e){return Yr.isBuffer(e)?e:ArrayBuffer.isView(e)?Yr.from(e.buffer,e.byteOffset,e.byteLength):Yr.from(String(e),"utf8")},decode:sy,name:"buffer",createViewTranscoder(){return new k1({encode:function(e){return ArrayBuffer.isView(e)?e:Yr.from(String(e),"utf8")},decode:function(e){return Yr.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});Kc.view=new k1({encode:function(e){return ArrayBuffer.isView(e)?e:bB.encode(e)},decode:sy,name:"view",createBufferTranscoder(){return new fh({encode:function(e){return Yr.isBuffer(e)?e:ArrayBuffer.isView(e)?Yr.from(e.buffer,e.byteOffset,e.byteLength):Yr.from(String(e),"utf8")},decode:sy,name:`${this.name}+buffer`})}});Kc.hex=new fh({encode:function(e){return Yr.isBuffer(e)?e:Yr.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});Kc.base64=new fh({encode:function(e){return Yr.isBuffer(e)?e:Yr.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})});var MB=Tt(TB=>{"use strict";var EB=Ha(),ly=SB(),{Encoding:_ne}=R1(),{BufferFormat:mne,ViewFormat:vne,UTF8Format:gne}=P1(),dh=Symbol("formats"),cy=Symbol("encodings"),yne=new Set(["buffer","view","utf8"]),N1=class{constructor(t){if(Array.isArray(t)){if(!t.every(n=>yne.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[cy]=new Map,this[dh]=new Set(t);for(let n in ly)try{this.encoding(n)}catch(r){if(r.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw r}}encodings(){return Array.from(new Set(this[cy].values()))}encoding(t){let n=this[cy].get(t);if(n===void 0){if(typeof t=="string"&&t!==""){if(n=wne[t],!n)throw new EB(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");n=Dne(t)}let{name:r,format:p}=n;if(!this[dh].has(p))if(this[dh].has("view"))n=n.createViewTranscoder();else if(this[dh].has("buffer"))n=n.createBufferTranscoder();else if(this[dh].has("utf8"))n=n.createUTF8Transcoder();else throw new EB(`Encoding '${r}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let a of[t,r,n.name,n.commonName])this[cy].set(a,n)}return n}};TB.Transcoder=N1;function Dne(e){if(e instanceof _ne)return e;let t="type"in e&&typeof e.type=="string"?e.type:void 0,n=e.name||t||`anonymous-${Sne++}`;switch(Cne(e)){case"view":return new vne({...e,name:n});case"utf8":return new gne({...e,name:n});case"buffer":return new mne({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function Cne(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}var bne={binary:ly.buffer,"utf-8":ly.utf8},wne={...ly,...bne},Sne=0});var kB=Tt((M7e,B1)=>{"use strict";var Uf=typeof Reflect=="object"?Reflect:null,xB=Uf&&typeof Uf.apply=="function"?Uf.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},fy;Uf&&typeof Uf.ownKeys=="function"?fy=Uf.ownKeys:Object.getOwnPropertySymbols?fy=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:fy=function(t){return Object.getOwnPropertyNames(t)};function Ene(e){console&&console.warn&&console.warn(e)}var LB=Number.isNaN||function(t){return t!==t};function an(){an.init.call(this)}B1.exports=an;B1.exports.once=Fne;an.EventEmitter=an;an.prototype._events=void 0;an.prototype._eventsCount=0;an.prototype._maxListeners=void 0;var FB=10;function dy(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(an,"defaultMaxListeners",{enumerable:!0,get:function(){return FB},set:function(e){if(typeof e!="number"||e<0||LB(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");FB=e}});an.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};an.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||LB(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function AB(e){return e._maxListeners===void 0?an.defaultMaxListeners:e._maxListeners}an.prototype.getMaxListeners=function(){return AB(this)};an.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var p=t==="error",a=this._events;if(a!==void 0)p=p&&a.error===void 0;else if(!p)return!1;if(p){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var u=a[t];if(u===void 0)return!1;if(typeof u=="function")xB(u,this,n);else for(var i=u.length,s=OB(u,i),r=0;r<i;++r)xB(s[r],this,n);return!0};function IB(e,t,n,r){var p,a,o;if(dy(n),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),o===void 0)o=a[t]=n,++e._eventsCount;else if(typeof o=="function"?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),p=AB(e),p>0&&o.length>p&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,Ene(l)}return e}an.prototype.addListener=function(t,n){return IB(this,t,n,!1)};an.prototype.on=an.prototype.addListener;an.prototype.prependListener=function(t,n){return IB(this,t,n,!0)};function Tne(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function RB(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},p=Tne.bind(r);return p.listener=n,r.wrapFn=p,p}an.prototype.once=function(t,n){return dy(n),this.on(t,RB(this,t,n)),this};an.prototype.prependOnceListener=function(t,n){return dy(n),this.prependListener(t,RB(this,t,n)),this};an.prototype.removeListener=function(t,n){var r,p,a,o,l;if(dy(n),p=this._events,p===void 0)return this;if(r=p[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete p[t],p.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(a=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){l=r[o].listener,a=o;break}if(a<0)return this;a===0?r.shift():Mne(r,a),r.length===1&&(p[t]=r[0]),p.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};an.prototype.off=an.prototype.removeListener;an.prototype.removeAllListeners=function(t){var n,r,p;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var a=Object.keys(r),o;for(p=0;p<a.length;++p)o=a[p],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(p=n.length-1;p>=0;p--)this.removeListener(t,n[p]);return this};function $B(e,t,n){var r=e._events;if(r===void 0)return[];var p=r[t];return p===void 0?[]:typeof p=="function"?n?[p.listener||p]:[p]:n?xne(p):OB(p,p.length)}an.prototype.listeners=function(t){return $B(this,t,!0)};an.prototype.rawListeners=function(t){return $B(this,t,!1)};an.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):HB.call(e,t)};an.prototype.listenerCount=HB;function HB(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}an.prototype.eventNames=function(){return this._eventsCount>0?fy(this._events):[]};function OB(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Mne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function xne(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Fne(e,t){return new Promise(function(n,r){function p(o){e.removeListener(t,a),r(o)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",p),n([].slice.call(arguments))}PB(e,t,a,{once:!0}),t!=="error"&&Lne(e,p,{once:!0})})}function Lne(e,t,n){typeof e.on=="function"&&PB(e,"error",t,n)}function PB(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function p(a){r.once&&e.removeEventListener(t,p),n(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var BB=Tt((x7e,NB)=>{NB.exports=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)});var ph=Tt(W1=>{"use strict";var WB=BB();W1.fromCallback=function(e,t){if(e===void 0){var n=new Promise(function(r,p){e=function(a,o){a?p(a):r(o)}});e[t!==void 0?t:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};W1.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(n){WB(()=>t(null,n))}).catch(function(n){WB(()=>t(n))})}});var py=Tt(U1=>{"use strict";U1.getCallback=function(e,t){return typeof e=="function"?e:t};U1.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}}});var Ns=Tt(vy=>{"use strict";var{fromCallback:q1}=ph(),Bo=Ha(),{getOptions:z1,getCallback:UB}=py(),Qc=Symbol("promise"),qf=Symbol("callback"),Di=Symbol("working"),Xc=Symbol("handleOne"),fu=Symbol("handleMany"),V1=Symbol("autoClose"),Ps=Symbol("finishWork"),Ci=Symbol("returnMany"),$s=Symbol("closing"),hh=Symbol("handleClose"),hy=Symbol("closed"),_h=Symbol("closeCallbacks"),Os=Symbol("keyEncoding"),Yc=Symbol("valueEncoding"),G1=Symbol("abortOnClose"),_y=Symbol("legacy"),J1=Symbol("keys"),j1=Symbol("values"),Hs=Symbol("limit"),la=Symbol("count"),my=Object.freeze({}),Ane=()=>{},qB=!1,mh=class{constructor(t,n,r){if(typeof t!="object"||t===null){let p=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${p}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[hy]=!1,this[_h]=[],this[Di]=!1,this[$s]=!1,this[V1]=!1,this[qf]=null,this[Xc]=this[Xc].bind(this),this[fu]=this[fu].bind(this),this[hh]=this[hh].bind(this),this[Os]=n[Os],this[Yc]=n[Yc],this[_y]=r,this[Hs]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[la]=0,this[G1]=!!n.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[la]}get limit(){return this[Hs]}next(t){let n;if(t===void 0)n=new Promise((r,p)=>{t=(a,o,l)=>{a?p(a):this[_y]?o===void 0&&l===void 0?r():r([o,l]):r(o)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[$s]?this.nextTick(t,new Bo("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Di]?this.nextTick(t,new Bo("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Di]=!0,this[qf]=t,this[la]>=this[Hs]?this.nextTick(this[Xc],null):this._next(this[Xc])),n}_next(t){this.nextTick(t)}nextv(t,n,r){return r=UB(n,r),r=q1(r,Qc),n=z1(n,my),Number.isInteger(t)?(this[$s]?this.nextTick(r,new Bo("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Di]?this.nextTick(r,new Bo("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[Hs]<1/0&&(t=Math.min(t,this[Hs]-this[la])),this[Di]=!0,this[qf]=r,t<=0?this.nextTick(this[fu],null,[]):this._nextv(t,n,this[fu])),r[Qc]):(this.nextTick(r,new TypeError("The first argument 'size' must be an integer")),r[Qc])}_nextv(t,n,r){let p=[],a=(o,l,u)=>{if(o)return r(o);if(this[_y]?l===void 0&&u===void 0:l===void 0)return r(null,p);p.push(this[_y]?[l,u]:l),p.length===t?r(null,p):this._next(a)};this._next(a)}all(t,n){return n=UB(t,n),n=q1(n,Qc),t=z1(t,my),this[$s]?this.nextTick(n,new Bo("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Di]?this.nextTick(n,new Bo("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Di]=!0,this[qf]=n,this[V1]=!0,this[la]>=this[Hs]?this.nextTick(this[fu],null,[]):this._all(t,this[fu])),n[Qc]}_all(t,n){let r=this[la],p=[],a=()=>{let l=this[Hs]<1/0?Math.min(1e3,this[Hs]-r):1e3;l<=0?this.nextTick(n,null,p):this._nextv(l,my,o)},o=(l,u)=>{l?n(l):u.length===0?n(null,p):(p.push.apply(p,u),r+=u.length,a())};a()}[Ps](){let t=this[qf];return this[G1]&&t===null?Ane:(this[Di]=!1,this[qf]=null,this[$s]&&this._close(this[hh]),t)}[Ci](t,n,r){this[V1]?this.close(t.bind(null,n,r)):t(n,r)}seek(t,n){if(n=z1(n,my),!this[$s]){if(this[Di])throw new Bo("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let r=this.db.keyEncoding(n.keyEncoding||this[Os]),p=r.format;n.keyEncoding!==p&&(n={...n,keyEncoding:p});let a=this.db.prefixKey(r.encode(t),p);this._seek(a,n)}}}_seek(t,n){throw new Bo("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=q1(t,Qc),this[hy]?this.nextTick(t):this[$s]?this[_h].push(t):(this[$s]=!0,this[_h].push(t),this[Di]?this[G1]&&this[Ps]()(new Bo("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[hh])),t[Qc]}_close(t){this.nextTick(t)}[hh](){this[hy]=!0,this.db.detachResource(this);let t=this[_h];this[_h]=[];for(let n of t)n()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[hy]||await this.close()}}},zf=class extends mh{constructor(t,n){super(t,n,!0),this[J1]=n.keys!==!1,this[j1]=n.values!==!1}[Xc](t,n,r){let p=this[Ps]();if(t)return p(t);try{n=this[J1]&&n!==void 0?this[Os].decode(n):void 0,r=this[j1]&&r!==void 0?this[Yc].decode(r):void 0}catch(a){return p(new ks("entry",a))}n===void 0&&r===void 0||this[la]++,p(null,n,r)}[fu](t,n){let r=this[Ps]();if(t)return this[Ci](r,t);try{for(let p of n){let a=p[0],o=p[1];p[0]=this[J1]&&a!==void 0?this[Os].decode(a):void 0,p[1]=this[j1]&&o!==void 0?this[Yc].decode(o):void 0}}catch(p){return this[Ci](r,new ks("entries",p))}this[la]+=n.length,this[Ci](r,null,n)}end(t){return!qB&&typeof console<"u"&&(qB=!0,console.warn(new Bo("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},K1=class extends mh{constructor(t,n){super(t,n,!1)}[Xc](t,n){let r=this[Ps]();if(t)return r(t);try{n=n!==void 0?this[Os].decode(n):void 0}catch(p){return r(new ks("key",p))}n!==void 0&&this[la]++,r(null,n)}[fu](t,n){let r=this[Ps]();if(t)return this[Ci](r,t);try{for(let p=0;p<n.length;p++){let a=n[p];n[p]=a!==void 0?this[Os].decode(a):void 0}}catch(p){return this[Ci](r,new ks("keys",p))}this[la]+=n.length,this[Ci](r,null,n)}},Q1=class extends mh{constructor(t,n){super(t,n,!1)}[Xc](t,n){let r=this[Ps]();if(t)return r(t);try{n=n!==void 0?this[Yc].decode(n):void 0}catch(p){return r(new ks("value",p))}n!==void 0&&this[la]++,r(null,n)}[fu](t,n){let r=this[Ps]();if(t)return this[Ci](r,t);try{for(let p=0;p<n.length;p++){let a=n[p];n[p]=a!==void 0?this[Yc].decode(a):void 0}}catch(p){return this[Ci](r,new ks("values",p))}this[la]+=n.length,this[Ci](r,null,n)}},ks=class extends Bo{constructor(t,n){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:n})}};for(let e of["_ended property","_nexting property","_end method"])Object.defineProperty(zf.prototype,e.split(" ")[0],{get(){throw new Bo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Bo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});zf.keyEncoding=Os;zf.valueEncoding=Yc;vy.AbstractIterator=zf;vy.AbstractKeyIterator=K1;vy.AbstractValueIterator=Q1});var zB=Tt(X1=>{"use strict";var{AbstractKeyIterator:Ine,AbstractValueIterator:Rne}=Ns(),Zc=Symbol("iterator"),vh=Symbol("callback"),Vf=Symbol("handleOne"),el=Symbol("handleMany"),gh=class extends Ine{constructor(t,n){super(t,n),this[Zc]=t.iterator({...n,keys:!0,values:!1}),this[Vf]=this[Vf].bind(this),this[el]=this[el].bind(this)}},gy=class extends Rne{constructor(t,n){super(t,n),this[Zc]=t.iterator({...n,keys:!1,values:!0}),this[Vf]=this[Vf].bind(this),this[el]=this[el].bind(this)}};for(let e of[gh,gy]){let t=e===gh,n=t?r=>r[0]:r=>r[1];e.prototype._next=function(r){this[vh]=r,this[Zc].next(this[Vf])},e.prototype[Vf]=function(r,p,a){let o=this[vh];r?o(r):o(null,t?p:a)},e.prototype._nextv=function(r,p,a){this[vh]=a,this[Zc].nextv(r,p,this[el])},e.prototype._all=function(r,p){this[vh]=p,this[Zc].all(r,this[el])},e.prototype[el]=function(r,p){let a=this[vh];r?a(r):a(null,p.map(n))},e.prototype._seek=function(r,p){this[Zc].seek(r,p)},e.prototype._close=function(r){this[Zc].close(r)}}X1.DefaultKeyIterator=gh;X1.DefaultValueIterator=gy});var VB=Tt(Sy=>{"use strict";var{AbstractIterator:$ne,AbstractKeyIterator:Hne,AbstractValueIterator:One}=Ns(),Y1=Ha(),To=Symbol("nut"),by=Symbol("undefer"),wy=Symbol("factory"),yy=class extends $ne{constructor(t,n){super(t,n),this[To]=null,this[wy]=()=>t.iterator(n),this.db.defer(()=>this[by]())}},Dy=class extends Hne{constructor(t,n){super(t,n),this[To]=null,this[wy]=()=>t.keys(n),this.db.defer(()=>this[by]())}},Cy=class extends One{constructor(t,n){super(t,n),this[To]=null,this[wy]=()=>t.values(n),this.db.defer(()=>this[by]())}};for(let e of[yy,Dy,Cy])e.prototype[by]=function(){this.db.status==="open"&&(this[To]=this[wy]())},e.prototype._next=function(t){this[To]!==null?this[To].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new Y1("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,n,r){this[To]!==null?this[To].nextv(t,n,r):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,n,r)):this.nextTick(r,new Y1("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,n){this[To]!==null?this[To].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(t,n)):this.nextTick(n,new Y1("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,n){this[To]!==null?this[To]._seek(t,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,n))},e.prototype._close=function(t){this[To]!==null?this[To].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};Sy.DeferredIterator=yy;Sy.DeferredKeyIterator=Dy;Sy.DeferredValueIterator=Cy});var eM=Tt(JB=>{"use strict";var{fromCallback:GB}=ph(),Ey=Ha(),{getCallback:Pne,getOptions:kne}=py(),Ty=Symbol("promise"),fa=Symbol("status"),Gf=Symbol("operations"),yh=Symbol("finishClose"),Jf=Symbol("closeCallbacks"),Z1=class{constructor(t){if(typeof t!="object"||t===null){let n=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[Gf]=[],this[Jf]=[],this[fa]="open",this[yh]=this[yh].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[Gf].length}put(t,n,r){if(this[fa]!=="open")throw new Ey("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let p=this.db._checkKey(t)||this.db._checkValue(n);if(p)throw p;let a=r&&r.sublevel!=null?r.sublevel:this.db,o=r,l=a.keyEncoding(r&&r.keyEncoding),u=a.valueEncoding(r&&r.valueEncoding),i=l.format;r={...r,keyEncoding:i,valueEncoding:u.format},a!==this.db&&(r.sublevel=null);let s=a.prefixKey(l.encode(t),i),f=u.encode(n);return this._put(s,f,r),this[Gf].push({...o,type:"put",key:t,value:n}),this}_put(t,n,r){}del(t,n){if(this[fa]!=="open")throw new Ey("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let r=this.db._checkKey(t);if(r)throw r;let p=n&&n.sublevel!=null?n.sublevel:this.db,a=n,o=p.keyEncoding(n&&n.keyEncoding),l=o.format;return n={...n,keyEncoding:l},p!==this.db&&(n.sublevel=null),this._del(p.prefixKey(o.encode(t),l),n),this[Gf].push({...a,type:"del",key:t}),this}_del(t,n){}clear(){if(this[fa]!=="open")throw new Ey("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Gf]=[],this}_clear(){}write(t,n){return n=Pne(t,n),n=GB(n,Ty),t=kne(t),this[fa]!=="open"?this.nextTick(n,new Ey("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[fa]="writing",this._write(t,r=>{this[fa]="closing",this[Jf].push(()=>n(r)),r||this.db.emit("batch",this[Gf]),this._close(this[yh])})),n[Ty]}_write(t,n){}close(t){return t=GB(t,Ty),this[fa]==="closing"?this[Jf].push(t):this[fa]==="closed"?this.nextTick(t):(this[Jf].push(t),this[fa]!=="writing"&&(this[fa]="closing",this._close(this[yh]))),t[Ty]}_close(t){this.nextTick(t)}[yh](){this[fa]="closed",this.db.detachResource(this);let t=this[Jf];this[Jf]=[];for(let n of t)n()}};JB.AbstractChainedBatch=Z1});var KB=Tt(jB=>{"use strict";var{AbstractChainedBatch:Nne}=eM(),Bne=Ha(),jf=Symbol("encoded"),tM=class extends Nne{constructor(t){super(t),this[jf]=[]}_put(t,n,r){this[jf].push({...r,type:"put",key:t,value:n})}_del(t,n){this[jf].push({...n,type:"del",key:t})}_clear(){this[jf]=[]}_write(t,n){this.db.status==="opening"?this.db.defer(()=>this._write(t,n)):this.db.status==="open"?this[jf].length===0?this.nextTick(n):this.db._batch(this[jf],t,n):this.nextTick(n,new Bne("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};jB.DefaultChainedBatch=tM});var YB=Tt((O7e,XB)=>{"use strict";var QB=Ha(),Wne=Object.prototype.hasOwnProperty,Une=new Set(["lt","lte","gt","gte"]);XB.exports=function(e,t){let n={};for(let r in e)if(Wne.call(e,r)&&!(r==="keyEncoding"||r==="valueEncoding")){if(r==="start"||r==="end")throw new QB(`The legacy range option '${r}' has been removed`,{code:"LEVEL_LEGACY"});if(r==="encoding")throw new QB("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});Une.has(r)?n[r]=t.encode(e[r]):n[r]=e[r]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}});var nM=Tt((P7e,e5)=>{var ZB;e5.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(ZB||(ZB=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var r5=Tt((k7e,n5)=>{"use strict";var t5=nM();n5.exports=function(e,...t){t.length===0?t5(e):t5(()=>e(...t))}});var o5=Tt(My=>{"use strict";var{AbstractIterator:qne,AbstractKeyIterator:zne,AbstractValueIterator:Vne}=Ns(),Kf=Symbol("unfix"),Oa=Symbol("iterator"),tl=Symbol("handleOne"),Bs=Symbol("handleMany"),du=Symbol("callback"),Dh=class extends qne{constructor(t,n,r,p){super(t,n),this[Oa]=r,this[Kf]=p,this[tl]=this[tl].bind(this),this[Bs]=this[Bs].bind(this),this[du]=null}[tl](t,n,r){let p=this[du];if(t)return p(t);n!==void 0&&(n=this[Kf](n)),p(t,n,r)}[Bs](t,n){let r=this[du];if(t)return r(t);for(let p of n){let a=p[0];a!==void 0&&(p[0]=this[Kf](a))}r(t,n)}},Ch=class extends zne{constructor(t,n,r,p){super(t,n),this[Oa]=r,this[Kf]=p,this[tl]=this[tl].bind(this),this[Bs]=this[Bs].bind(this),this[du]=null}[tl](t,n){let r=this[du];if(t)return r(t);n!==void 0&&(n=this[Kf](n)),r(t,n)}[Bs](t,n){let r=this[du];if(t)return r(t);for(let p=0;p<n.length;p++){let a=n[p];a!==void 0&&(n[p]=this[Kf](a))}r(t,n)}},bh=class extends Vne{constructor(t,n,r){super(t,n),this[Oa]=r}};for(let e of[Dh,Ch])e.prototype._next=function(t){this[du]=t,this[Oa].next(this[tl])},e.prototype._nextv=function(t,n,r){this[du]=r,this[Oa].nextv(t,n,this[Bs])},e.prototype._all=function(t,n){this[du]=n,this[Oa].all(t,this[Bs])};for(let e of[bh])e.prototype._next=function(t){this[Oa].next(t)},e.prototype._nextv=function(t,n,r){this[Oa].nextv(t,n,r)},e.prototype._all=function(t,n){this[Oa].all(t,n)};for(let e of[Dh,Ch,bh])e.prototype._seek=function(t,n){this[Oa].seek(t,n)},e.prototype._close=function(t){this[Oa].close(t)};My.AbstractSublevelIterator=Dh;My.AbstractSublevelKeyIterator=Ch;My.AbstractSublevelValueIterator=bh});var s5=Tt((B7e,u5)=>{"use strict";var rM=Ha(),{Buffer:iM}=iy()||{},{AbstractSublevelIterator:Gne,AbstractSublevelKeyIterator:Jne,AbstractSublevelValueIterator:jne}=o5(),pu=Symbol("prefix"),a5=Symbol("upperBound"),wh=Symbol("prefixRange"),Wo=Symbol("parent"),oM=Symbol("unfix"),i5=new TextEncoder,Kne={separator:"!"};u5.exports=function({AbstractLevel:e}){class t extends e{static defaults(r){if(typeof r=="string")throw new rM("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(r&&r.open)throw new rM("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return r==null?Kne:r.separator?r:{...r,separator:"!"}}constructor(r,p,a){let{separator:o,manifest:l,...u}=t.defaults(a);p=Xne(p,o);let i=o.charCodeAt(0)+1,s=r[Wo]||r;if(!i5.encode(p).every(d=>d>i&&d<127))throw new rM(`Prefix must use bytes > ${i} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(Qne(s,l),u);let f=(r.prefix||"")+o+p+o,h=f.slice(0,-1)+String.fromCharCode(i);this[Wo]=s,this[pu]=new xy(f),this[a5]=new xy(h),this[oM]=new uM,this.nextTick=s.nextTick}prefixKey(r,p){if(p==="utf8")return this[pu].utf8+r;if(r.byteLength===0)return this[pu][p];if(p==="view"){let a=this[pu].view,o=new Uint8Array(a.byteLength+r.byteLength);return o.set(a,0),o.set(r,a.byteLength),o}else{let a=this[pu].buffer;return iM.concat([a,r],a.byteLength+r.byteLength)}}[wh](r,p){r.gte!==void 0?r.gte=this.prefixKey(r.gte,p):r.gt!==void 0?r.gt=this.prefixKey(r.gt,p):r.gte=this[pu][p],r.lte!==void 0?r.lte=this.prefixKey(r.lte,p):r.lt!==void 0?r.lt=this.prefixKey(r.lt,p):r.lte=this[a5][p]}get prefix(){return this[pu].utf8}get db(){return this[Wo]}_open(r,p){this[Wo].open({passive:!0},p)}_put(r,p,a,o){this[Wo].put(r,p,a,o)}_get(r,p,a){this[Wo].get(r,p,a)}_getMany(r,p,a){this[Wo].getMany(r,p,a)}_del(r,p,a){this[Wo].del(r,p,a)}_batch(r,p,a){this[Wo].batch(r,p,a)}_clear(r,p){this[wh](r,r.keyEncoding),this[Wo].clear(r,p)}_iterator(r){this[wh](r,r.keyEncoding);let p=this[Wo].iterator(r),a=this[oM].get(this[pu].utf8.length,r.keyEncoding);return new Gne(this,r,p,a)}_keys(r){this[wh](r,r.keyEncoding);let p=this[Wo].keys(r),a=this[oM].get(this[pu].utf8.length,r.keyEncoding);return new Jne(this,r,p,a)}_values(r){this[wh](r,r.keyEncoding);let p=this[Wo].values(r);return new jne(this,r,p)}}return{AbstractSublevel:t}};var Qne=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:aM(e,"utf8"),buffer:aM(e,"buffer"),view:aM(e,"view")}}},aM=function(e,t){return e.supports.encodings[t]?e.keyEncoding(t).name===t:!1},xy=class{constructor(t){this.utf8=t,this.view=i5.encode(t),this.buffer=iM?iM.from(this.view.buffer,0,this.view.byteLength):{}}},uM=class{constructor(){this.cache=new Map}get(t,n){let r=this.cache.get(n);return r===void 0&&(n==="view"?r=function(p,a){return a.subarray(p)}.bind(null,t):r=function(p,a){return a.slice(p)}.bind(null,t),this.cache.set(n,r)),r}},Xne=function(e,t){let n=0,r=e.length;for(;n<r&&e[n]===t;)n++;for(;r>n&&e[r-1]===t;)r--;return e.slice(n,r)}});var dM=Tt(fM=>{"use strict";var{supports:Yne}=XN(),{Transcoder:Zne}=MB(),{EventEmitter:ere}=kB(),{fromCallback:Ws}=ph(),Pa=Ha(),{AbstractIterator:nl}=Ns(),{DefaultKeyIterator:tre,DefaultValueIterator:nre}=zB(),{DeferredIterator:rre,DeferredKeyIterator:ore,DeferredValueIterator:are}=VB(),{DefaultChainedBatch:c5}=KB(),{getCallback:rl,getOptions:Us}=py(),Fy=YB(),Et=Symbol("promise"),hu=Symbol("landed"),ol=Symbol("resources"),sM=Symbol("closeResources"),Sh=Symbol("operations"),Eh=Symbol("undefer"),Ly=Symbol("deferOpen"),l5=Symbol("options"),Lt=Symbol("status"),al=Symbol("defaultOptions"),Qf=Symbol("transcoder"),Ay=Symbol("keyEncoding"),cM=Symbol("valueEncoding"),ire=()=>{},Th=class extends ere{constructor(t,n){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");n=Us(n);let{keyEncoding:r,valueEncoding:p,passive:a,...o}=n;this[ol]=new Set,this[Sh]=[],this[Ly]=!0,this[l5]=o,this[Lt]="opening",this.supports=Yne(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Qf]=new Zne(ure(this)),this[Ay]=this[Qf].encoding(r||"utf8"),this[cM]=this[Qf].encoding(p||"utf8");for(let l of this[Qf].encodings())this.supports.encodings[l.commonName]||(this.supports.encodings[l.commonName]=!0);this[al]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Ay].commonName,valueEncoding:this[cM].commonName}),key:Object.freeze({keyEncoding:this[Ay].commonName})},this.nextTick(()=>{this[Ly]&&this.open({passive:!1},ire)})}get status(){return this[Lt]}keyEncoding(t){return this[Qf].encoding(t??this[Ay])}valueEncoding(t){return this[Qf].encoding(t??this[cM])}open(t,n){n=rl(t,n),n=Ws(n,Et),t={...this[l5],...Us(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;let r=p=>{this[Lt]==="closing"||this[Lt]==="opening"?this.once(hu,p?()=>r(p):r):this[Lt]!=="open"?n(new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:p})):n()};return t.passive?this[Lt]==="opening"?this.once(hu,r):this.nextTick(r):this[Lt]==="closed"||this[Ly]?(this[Ly]=!1,this[Lt]="opening",this.emit("opening"),this._open(t,p=>{if(p){this[Lt]="closed",this[sM](()=>{this.emit(hu),r(p)}),this[Eh]();return}this[Lt]="open",this[Eh](),this.emit(hu),this[Lt]==="open"&&this.emit("open"),this[Lt]==="open"&&this.emit("ready"),r()})):this[Lt]==="open"?this.nextTick(r):this.once(hu,()=>this.open(t,n)),n[Et]}_open(t,n){this.nextTick(n)}close(t){t=Ws(t,Et);let n=r=>{this[Lt]==="opening"||this[Lt]==="closing"?this.once(hu,r?n(r):n):this[Lt]!=="closed"?t(new Pa("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:r})):t()};if(this[Lt]==="open"){this[Lt]="closing",this.emit("closing");let r=p=>{this[Lt]="open",this[Eh](),this.emit(hu),n(p)};this[sM](()=>{this._close(p=>{if(p)return r(p);this[Lt]="closed",this[Eh](),this.emit(hu),this[Lt]==="closed"&&this.emit("closed"),n()})})}else this[Lt]==="closed"?this.nextTick(n):this.once(hu,()=>this.close(t));return t[Et]}[sM](t){if(this[ol].size===0)return this.nextTick(t);let n=this[ol].size,r=!0,p=()=>{--n===0&&(r?this.nextTick(t):t())};for(let a of this[ol])a.close(p);r=!1,this[ol].clear()}_close(t){this.nextTick(t)}get(t,n,r){if(r=rl(n,r),r=Ws(r,Et),n=Us(n,this[al].entry),this[Lt]==="opening")return this.defer(()=>this.get(t,n,r)),r[Et];if(Xf(this,r))return r[Et];let p=this._checkKey(t);if(p)return this.nextTick(r,p),r[Et];let a=this.keyEncoding(n.keyEncoding),o=this.valueEncoding(n.valueEncoding),l=a.format,u=o.format;return(n.keyEncoding!==l||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:l,valueEncoding:u})),this._get(this.prefixKey(a.encode(t),l),n,(i,s)=>{if(i)return(i.code==="LEVEL_NOT_FOUND"||i.notFound||/NotFound/i.test(i))&&(i.code||(i.code="LEVEL_NOT_FOUND"),i.notFound||(i.notFound=!0),i.status||(i.status=404)),r(i);try{s=o.decode(s)}catch(f){return r(new Pa("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:f}))}r(null,s)}),r[Et]}_get(t,n,r){this.nextTick(r,new Error("NotFound"))}getMany(t,n,r){if(r=rl(n,r),r=Ws(r,Et),n=Us(n,this[al].entry),this[Lt]==="opening")return this.defer(()=>this.getMany(t,n,r)),r[Et];if(Xf(this,r))return r[Et];if(!Array.isArray(t))return this.nextTick(r,new TypeError("The first argument 'keys' must be an array")),r[Et];if(t.length===0)return this.nextTick(r,null,[]),r[Et];let p=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),o=p.format,l=a.format;(n.keyEncoding!==o||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:o,valueEncoding:l}));let u=new Array(t.length);for(let i=0;i<t.length;i++){let s=t[i],f=this._checkKey(s);if(f)return this.nextTick(r,f),r[Et];u[i]=this.prefixKey(p.encode(s),o)}return this._getMany(u,n,(i,s)=>{if(i)return r(i);try{for(let f=0;f<s.length;f++)s[f]!==void 0&&(s[f]=a.decode(s[f]))}catch(f){return r(new Pa(`Could not decode one or more of ${s.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:f}))}r(null,s)}),r[Et]}_getMany(t,n,r){this.nextTick(r,null,new Array(t.length).fill(void 0))}put(t,n,r,p){if(p=rl(r,p),p=Ws(p,Et),r=Us(r,this[al].entry),this[Lt]==="opening")return this.defer(()=>this.put(t,n,r,p)),p[Et];if(Xf(this,p))return p[Et];let a=this._checkKey(t)||this._checkValue(n);if(a)return this.nextTick(p,a),p[Et];let o=this.keyEncoding(r.keyEncoding),l=this.valueEncoding(r.valueEncoding),u=o.format,i=l.format;(r.keyEncoding!==u||r.valueEncoding!==i)&&(r=Object.assign({},r,{keyEncoding:u,valueEncoding:i}));let s=this.prefixKey(o.encode(t),u),f=l.encode(n);return this._put(s,f,r,h=>{if(h)return p(h);this.emit("put",t,n),p()}),p[Et]}_put(t,n,r,p){this.nextTick(p)}del(t,n,r){if(r=rl(n,r),r=Ws(r,Et),n=Us(n,this[al].key),this[Lt]==="opening")return this.defer(()=>this.del(t,n,r)),r[Et];if(Xf(this,r))return r[Et];let p=this._checkKey(t);if(p)return this.nextTick(r,p),r[Et];let a=this.keyEncoding(n.keyEncoding),o=a.format;return n.keyEncoding!==o&&(n=Object.assign({},n,{keyEncoding:o})),this._del(this.prefixKey(a.encode(t),o),n,l=>{if(l)return r(l);this.emit("del",t),r()}),r[Et]}_del(t,n,r){this.nextTick(r)}batch(t,n,r){if(!arguments.length){if(this[Lt]==="opening")return new c5(this);if(this[Lt]!=="open")throw new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?r=t:r=rl(n,r),r=Ws(r,Et),n=Us(n,this[al].empty),this[Lt]==="opening")return this.defer(()=>this.batch(t,n,r)),r[Et];if(Xf(this,r))return r[Et];if(!Array.isArray(t))return this.nextTick(r,new TypeError("The first argument 'operations' must be an array")),r[Et];if(t.length===0)return this.nextTick(r),r[Et];let p=new Array(t.length),{keyEncoding:a,valueEncoding:o,...l}=n;for(let u=0;u<t.length;u++){if(typeof t[u]!="object"||t[u]===null)return this.nextTick(r,new TypeError("A batch operation must be an object")),r[Et];let i=Object.assign({},t[u]);if(i.type!=="put"&&i.type!=="del")return this.nextTick(r,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),r[Et];let s=this._checkKey(i.key);if(s)return this.nextTick(r,s),r[Et];let f=i.sublevel!=null?i.sublevel:this,h=f.keyEncoding(i.keyEncoding||a),d=h.format;if(i.key=f.prefixKey(h.encode(i.key),d),i.keyEncoding=d,i.type==="put"){let c=this._checkValue(i.value);if(c)return this.nextTick(r,c),r[Et];let _=f.valueEncoding(i.valueEncoding||o);i.value=_.encode(i.value),i.valueEncoding=_.format}f!==this&&(i.sublevel=null),p[u]=i}return this._batch(p,l,u=>{if(u)return r(u);this.emit("batch",t),r()}),r[Et]}_batch(t,n,r){this.nextTick(r)}sublevel(t,n){return this._sublevel(t,lM.defaults(n))}_sublevel(t,n){return new lM(this,t,n)}prefixKey(t,n){return t}clear(t,n){if(n=rl(t,n),n=Ws(n,Et),t=Us(t,this[al].empty),this[Lt]==="opening")return this.defer(()=>this.clear(t,n)),n[Et];if(Xf(this,n))return n[Et];let r=t,p=this.keyEncoding(t.keyEncoding);return t=Fy(t,p),t.keyEncoding=p.format,t.limit===0?this.nextTick(n):this._clear(t,a=>{if(a)return n(a);this.emit("clear",r),n()}),n[Et]}_clear(t,n){this.nextTick(n)}iterator(t){let n=this.keyEncoding(t&&t.keyEncoding),r=this.valueEncoding(t&&t.valueEncoding);if(t=Fy(t,n),t.keys=t.keys!==!1,t.values=t.values!==!1,t[nl.keyEncoding]=n,t[nl.valueEncoding]=r,t.keyEncoding=n.format,t.valueEncoding=r.format,this[Lt]==="opening")return new rre(this,t);if(this[Lt]!=="open")throw new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new nl(this,t)}keys(t){let n=this.keyEncoding(t&&t.keyEncoding),r=this.valueEncoding(t&&t.valueEncoding);if(t=Fy(t,n),t[nl.keyEncoding]=n,t[nl.valueEncoding]=r,t.keyEncoding=n.format,t.valueEncoding=r.format,this[Lt]==="opening")return new ore(this,t);if(this[Lt]!=="open")throw new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new tre(this,t)}values(t){let n=this.keyEncoding(t&&t.keyEncoding),r=this.valueEncoding(t&&t.valueEncoding);if(t=Fy(t,n),t[nl.keyEncoding]=n,t[nl.valueEncoding]=r,t.keyEncoding=n.format,t.valueEncoding=r.format,this[Lt]==="opening")return new are(this,t);if(this[Lt]!=="open")throw new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new nre(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[Sh].push(t)}[Eh](){if(this[Sh].length===0)return;let t=this[Sh];this[Sh]=[];for(let n of t)n()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[ol].add(t)}detachResource(t){this[ol].delete(t)}_chainedBatch(){return new c5(this)}_checkKey(t){if(t==null)return new Pa("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new Pa("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Th.prototype.nextTick=r5();var{AbstractSublevel:lM}=s5()({AbstractLevel:Th});fM.AbstractLevel=Th;fM.AbstractSublevel=lM;var Xf=function(e,t){return e[Lt]!=="open"?(e.nextTick(t,new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},ure=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])}});var pM=Tt(il=>{"use strict";il.AbstractLevel=dM().AbstractLevel;il.AbstractSublevel=dM().AbstractSublevel;il.AbstractIterator=Ns().AbstractIterator;il.AbstractKeyIterator=Ns().AbstractKeyIterator;il.AbstractValueIterator=Ns().AbstractValueIterator;il.AbstractChainedBatch=eM().AbstractChainedBatch});var d5=Tt((q7e,f5)=>{f5.exports=cre;var sre=nM();function cre(e,t,n){if(typeof t!="number")throw new Error("second argument must be a Number");let r,p,a,o,l,u=!0,i;Array.isArray(e)?(r=[],a=p=e.length):(o=Object.keys(e),r={},a=p=o.length);function s(h){function d(){n&&n(h,r),n=null}u?sre(d):d()}function f(h,d,c){if(r[h]=c,d&&(l=!0),--a===0||d)s(d);else if(!l&&i<p){let _;o?(_=o[i],i+=1,e[_](function(m,v){f(_,m,v)})):(_=i,i+=1,e[_](function(m,v){f(_,m,v)}))}}i=t,a?o?o.some(function(h,d){return e[h](function(c,_){f(h,c,_)}),d===t-1}):e.some(function(h,d){return h(function(c,_){f(d,c,_)}),d===t-1}):s(null),u=!1}});var hM=Tt((z7e,p5)=>{"use strict";p5.exports=function(t){let n=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,r=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,p=t.gte===void 0,a=t.lte===void 0;return n!==void 0&&r!==void 0?IDBKeyRange.bound(n,r,p,a):n!==void 0?IDBKeyRange.lowerBound(n,p):r!==void 0?IDBKeyRange.upperBound(r,a):null}});var _M=Tt((V7e,h5)=>{"use strict";var lre=new TextEncoder;h5.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):lre.encode(e)}});var y5=Tt(g5=>{"use strict";var{AbstractIterator:fre}=pM(),_5=hM(),Iy=_M(),bi=Symbol("cache"),_u=Symbol("finished"),Uo=Symbol("options"),mu=Symbol("currentOptions"),ul=Symbol("position"),mM=Symbol("location"),Yf=Symbol("first"),m5={},vM=class extends fre{constructor(t,n,r){super(t,r),this[bi]=[],this[_u]=this.limit===0,this[Uo]=r,this[mu]={...r},this[ul]=void 0,this[mM]=n,this[Yf]=!0}_nextv(t,n,r){if(this[Yf]=!1,this[_u])return this.nextTick(r,null,[]);if(this[bi].length>0)return t=Math.min(t,this[bi].length),this.nextTick(r,null,this[bi].splice(0,t));this[ul]!==void 0&&(this[Uo].reverse?(this[mu].lt=this[ul],this[mu].lte=void 0):(this[mu].gt=this[ul],this[mu].gte=void 0));let p;try{p=_5(this[mu])}catch{return this[_u]=!0,this.nextTick(r,null,[])}let a=this.db.db.transaction([this[mM]],"readonly"),o=a.objectStore(this[mM]),l=[];if(this[Uo].reverse){let u=!this[Uo].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[u](p,"prev").onsuccess=i=>{let s=i.target.result;if(s){let{key:f,value:h}=s;this[ul]=f,l.push([this[Uo].keys&&f!==void 0?Iy(f):void 0,this[Uo].values&&h!==void 0?Iy(h):void 0]),l.length<t?s.continue():v5(a)}else this[_u]=!0}}else{let u,i,s=()=>{if(u===void 0||i===void 0)return;let f=Math.max(u.length,i.length);f===0||t===1/0?this[_u]=!0:this[ul]=u[f-1],l.length=f;for(let h=0;h<f;h++){let d=u[h],c=i[h];l[h]=[this[Uo].keys&&d!==void 0?Iy(d):void 0,this[Uo].values&&c!==void 0?Iy(c):void 0]}v5(a)};this[Uo].keys||t<1/0?o.getAllKeys(p,t<1/0?t:void 0).onsuccess=f=>{u=f.target.result,s()}:(u=[],this.nextTick(s)),this[Uo].values?o.getAll(p,t<1/0?t:void 0).onsuccess=f=>{i=f.target.result,s()}:(i=[],this.nextTick(s))}a.onabort=()=>{r(a.error||new Error("aborted by user")),r=null},a.oncomplete=()=>{r(null,l),r=null}}_next(t){if(this[bi].length>0){let[n,r]=this[bi].shift();this.nextTick(t,null,n,r)}else if(this[_u])this.nextTick(t);else{let n=Math.min(100,this.limit-this.count);this[Yf]&&(this[Yf]=!1,n=1),this._nextv(n,m5,(r,p)=>{if(r)return t(r);this[bi]=p,this._next(t)})}}_all(t,n){this[Yf]=!1;let r=this[bi].splice(0,this[bi].length),p=this.limit-this.count-r.length;if(p<=0)return this.nextTick(n,null,r);this._nextv(p,m5,(a,o)=>{if(a)return n(a);r.length>0&&(o=r.concat(o)),n(null,o)})}_seek(t,n){this[Yf]=!0,this[bi]=[],this[_u]=!1,this[ul]=void 0,this[mu]={...this[Uo]};let r;try{r=_5(this[Uo])}catch{this[_u]=!0;return}r!==null&&!r.includes(t)?this[_u]=!0:this[Uo].reverse?this[mu].lte=t:this[mu].gte=t}};g5.Iterator=vM;function v5(e){typeof e.commit=="function"&&e.commit()}});var C5=Tt((J7e,D5)=>{"use strict";D5.exports=function(t,n,r,p,a){if(p.limit===0)return t.nextTick(a);let o=t.db.transaction([n],"readwrite"),l=o.objectStore(n),u=0;o.oncomplete=function(){a()},o.onabort=function(){a(o.error||new Error("aborted by user"))};let i=l.openKeyCursor?"openKeyCursor":"openCursor",s=p.reverse?"prev":"next";l[i](r,s).onsuccess=function(f){let h=f.target.result;h&&(l.delete(h.key).onsuccess=function(){(p.limit<=0||++u<p.limit)&&h.continue()})}}});var M5=Tt(T5=>{"use strict";var{AbstractLevel:dre}=pM(),b5=Ha(),pre=d5(),{fromCallback:hre}=ph(),{Iterator:_re}=y5(),w5=_M(),mre=C5(),vre=hM(),E5="level-js-",Mh=Symbol("idb"),gM=Symbol("namePrefix"),vu=Symbol("location"),yM=Symbol("version"),sl=Symbol("store"),xh=Symbol("onComplete"),S5=Symbol("promise"),Ry=class extends dre{constructor(t,n,r){if(typeof n=="function"||typeof r=="function")throw new b5("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:p,version:a,...o}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof t!="string")throw new Error("constructor requires a location string argument");this[vu]=t,this[gM]=p??E5,this[yM]=parseInt(a||1,10),this[Mh]=null}get location(){return this[vu]}get namePrefix(){return this[gM]}get version(){return this[yM]}get db(){return this[Mh]}get type(){return"browser-level"}_open(t,n){let r=indexedDB.open(this[gM]+this[vu],this[yM]);r.onerror=function(){n(r.error||new Error("unknown error"))},r.onsuccess=()=>{this[Mh]=r.result,n()},r.onupgradeneeded=p=>{let a=p.target.result;a.objectStoreNames.contains(this[vu])||a.createObjectStore(this[vu])}}[sl](t){return this[Mh].transaction([this[vu]],t).objectStore(this[vu])}[xh](t,n){let r=t.transaction;r.onabort=function(){n(r.error||new Error("aborted by user"))},r.oncomplete=function(){n(null,t.result)}}_get(t,n,r){let p=this[sl]("readonly"),a;try{a=p.get(t)}catch(o){return this.nextTick(r,o)}this[xh](a,function(o,l){if(o)return r(o);if(l===void 0)return r(new b5("Entry not found",{code:"LEVEL_NOT_FOUND"}));r(null,w5(l))})}_getMany(t,n,r){let p=this[sl]("readonly"),a=t.map(o=>l=>{let u;try{u=p.get(o)}catch(i){return l(i)}u.onsuccess=()=>{let i=u.result;l(null,i===void 0?i:w5(i))},u.onerror=i=>{i.stopPropagation(),l(u.error)}});pre(a,16,r)}_del(t,n,r){let p=this[sl]("readwrite"),a;try{a=p.delete(t)}catch(o){return this.nextTick(r,o)}this[xh](a,r)}_put(t,n,r,p){let a=this[sl]("readwrite"),o;try{o=a.put(n,t)}catch(l){return this.nextTick(p,l)}this[xh](o,p)}_iterator(t){return new _re(this,this[vu],t)}_batch(t,n,r){let p=this[sl]("readwrite"),a=p.transaction,o=0,l;a.onabort=function(){r(l||a.error||new Error("aborted by user"))},a.oncomplete=function(){r()};function u(){let i=t[o++],s=i.key,f;try{f=i.type==="del"?p.delete(s):p.put(i.value,s)}catch(h){l=h,a.abort();return}o<t.length?f.onsuccess=u:typeof a.commit=="function"&&a.commit()}u()}_clear(t,n){let r,p;try{r=vre(t)}catch{return this.nextTick(n)}if(t.limit>=0)return mre(this,this[vu],r,t,n);try{let a=this[sl]("readwrite");p=r?a.delete(r):a.clear()}catch(a){return this.nextTick(n,a)}this[xh](p,n)}_close(t){this[Mh].close(),this.nextTick(t)}};Ry.destroy=function(e,t,n){typeof t=="function"&&(n=t,t=E5),n=hre(n,S5);let r=indexedDB.deleteDatabase(t+e);return r.onsuccess=function(){n()},r.onerror=function(p){n(p)},n[S5]};T5.BrowserLevel=Ry});var DM=Tt(x5=>{x5.Level=M5().BrowserLevel});var Bh={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var de=function(e){return e.identity},_e={identity:function(e){return e},Semigroupoid0:function(){return Bh}};var UM={fromString:de(_e)},Mt=function(e){return e.fromString};var qM=function(e){return function(t){for(var n=t.length,r=new Array(n),p=0;p<n;p++)r[p]=e(t[p]);return r}};var _n=!0;var He=function(e){return function(t){return function(n){return e(n)(t)}}},me=function(e){return function(t){return e}};var zM=function(e){return function(t){return t(e)}};var pt=function(){function e(){}return e.value=new e,e}();var V=function(e){return e.map};var ut=function(e){return V(e)(me(void 0))},cl=function(e){var t=V(e);return function(n){return function(r){return t(me(r))(n)}}},Uh=function(e){var t=V(e);return function(n){return t(me(n))}};var vt={map:qM};var VM=function(e){return function(t){return e+t}},GM=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var qn=function(e){return e.reflectSymbol};var da=function(e){return function(t){return t[e]}};var Gs={append:VM};var sn={append:GM};var De=function(e){return e.append};var Gy={alt:De(sn),Functor0:function(){return vt}},On=function(e){return e.alt};var JM=function(e){return function(t){for(var n=e.length,r=t.length,p=new Array(n*r),a=0,o=0;o<n;o++)for(var l=e[o],u=0;u<r;u++)p[a++]=l(t[u]);return p}};var qW=de(_e);var Js={apply:JM,Functor0:function(){return vt}},ht=function(e){return e.apply};var Ur=function(e){var t=ht(e),n=V(e.Functor0());return function(r){return function(p){return t(n(me(qW))(r))(p)}}};var X=function(e){return e.pure},Zf=function(e){var t=X(e);return function(n){return function(r){if(!n)return r;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,r.constructor.name])}}},gn=function(e){var t=X(e);return function(n){return function(r){if(n)return r;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,r.constructor.name])}}},ed=function(e){var t=ht(e.Apply0()),n=X(e);return function(r){return function(p){return t(n(r))(p)}}};var ll={pure:function(e){return[e]},Apply0:function(){return Js}};var jM=function(e){return function(t){for(var n=[],r=0,p=e.length;r<p;r++)Array.prototype.push.apply(n,t(e[r]));return n}};var GW=de(_e),nt=function(e){return e.discard};var bu={bind:jM,Apply0:function(){return Js}},ee=function(e){return e.bind},wn=function(e){return He(ee(e))},fl=function(e){var t=wn(e);return function(n){return function(r){return function(p){return t(n)(r(p))}}}};var rt={discard:function(e){return ee(e)}};var dl=function(e){var t=ee(e);return function(n){return t(n)(GW)}};var KM=function(e,t){for(var n=e>t?-1:1,r=new Array(n*(t-e)+1),p=e,a=0;p!==t;)r[a++]=p,p+=n;return r[a]=p,r},JW=function(e,t){if(e<1)return[];var n=new Array(e);return n.fill(t)},jW=function(e,t){for(var n=[],r=0,p=0;p<e;p++)n[r++]=t;return n},KW=typeof Array.prototype.fill=="function"?JW:jW,QM=function(){function e(p,a){this.head=p,this.tail=a}var t={};function n(p){return function(a){return new e(p,a)}}function r(p){for(var a=[],o=0,l=p;l!==t;)a[o++]=l.head,l=l.tail;return a}return function(p,a){return r(p(n)(t)(a))}}(),tr=function(e){return e.length},jy=function(e,t,n){return n.length===0?e({}):t(n[0])(n.slice(1))},XM=function(e,t,n,r){return r<0||r>=n.length?t:e(n[r])};var YM=function(e,t,n,r){for(var p=0,a=r.length;p<a;p++)if(n(r[p]))return e(p);return t},ZM=function(e,t,n,r){for(var p=r.length-1;p>=0;p--)if(n(r[p]))return e(p);return t},ex=function(e,t,n,r,p){if(n<0||n>p.length)return t;var a=p.slice();return a.splice(n,0,r),e(a)},tx=function(e,t,n,r){if(n<0||n>=r.length)return t;var p=r.slice();return p.splice(n,1),e(p)};var pl=function(e){return e.slice().reverse()};var nx=function(e,t){return t.filter(e)};var rx=function(){function e(t,n,r,p,a,o){var l,u,i,s,f,h,d;for(l=a+(o-a>>1),l-a>1&&e(t,n,p,r,a,l),o-l>1&&e(t,n,p,r,l,o),u=a,i=l,s=a;u<l&&i<o;)f=p[u],h=p[i],d=n(t(f)(h)),d>0?(r[s++]=h,++i):(r[s++]=f,++u);for(;u<l;)r[s++]=p[u++];for(;i<o;)r[s++]=p[i++]}return function(t,n,r){var p;return r.length<2?r:(p=r.slice(0),e(t,n,p,r.slice(0),0,r.length),p)}}(),ox=function(e,t,n){return n.slice(e,t)},ax=function(e,t,n){for(var r=t.length<n.length?t.length:n.length,p=new Array(r),a=0;a<r;a++)p[a]=e(t[a])(n[a]);return p};var ix=function(e){var t=ee(e.Bind1()),n=Zf(e.Applicative0());return function(r){return function(p){return t(r)(function(a){return n(a)(p)})}}};var Qy=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(r){return function(p){return t(p)(function(a){return n(r(a))})}}},wr=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(r){return function(p){return t(r)(function(a){return t(p)(function(o){return n(a(o))})})}}};var ux="\uFFFF",sx="\0",XW=Number.POSITIVE_INFINITY,YW=Number.NEGATIVE_INFINITY;var td=function(e){return function(t){return function(n){return function(r){return function(p){return r<p?e:r===p?t:n}}}}},cx=td,lx=td,fx=td,dx=td,px=td,hx=function(e){return function(t){return function(n){for(var r=0,p=t.length,a=n.length;r<p&&r<a;){var o=t[r],l=n[r],u=e(o)(l);if(u!==0)return u;r++}return p===a?0:p>a?-1:1}}};var nd=function(e){return function(t){return e===t}},_x=nd,mx=nd,vx=nd,gx=nd,yx=nd,Dx=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r])(n[r]))return!1;return!0}}};var zh={eq:function(e){return function(t){return!0}}},to={eq:yx};var rd={eq:vx},Na={eq:mx},Cx={eq:gx},Vh={eq:_x};var Ie=function(e){return e.eq},n3=Ie(Vh),Si=function(e){return{eq:Dx(Ie(e))}};var od=function(e){var t=Ie(e);return function(n){return function(r){return n3(t(n)(r))(!1)}}};var pe=function(){function e(){}return e.value=new e,e}(),se=function(){function e(){}return e.value=new e,e}(),qe=function(){function e(){}return e.value=new e,e}();var Ei={eq:function(e){return function(t){return e instanceof pe&&t instanceof pe||e instanceof se&&t instanceof se||e instanceof qe&&t instanceof qe}}};var bx=function(e){return function(t){return e-t|0}};var wx=function(e){return function(t){return e+t|0}},Sx=function(e){return function(t){return e*t|0}},Ex=function(e){return function(t){return e+t}},Tx=function(e){return function(t){return e*t}};var Mo=function(e){return e.zero};var Xy={add:Ex,zero:0,mul:Tx,one:1},Gh={add:wx,zero:0,mul:Sx,one:1};var zo=function(e){return e.add};var ad=function(e){return e.sub};var id={sub:bx,Semiring0:function(){return Gh}};var Yy=function(e){var t=ad(e),n=Mo(e.Semiring0());return function(r){return t(n)(r)}};var jt={compare:function(e){return function(t){return qe.value}},Eq0:function(){return zh}},Vt=function(){return{compare:dx(pe.value)(qe.value)(se.value),Eq0:function(){return to}}}();var Mi=function(){return{compare:fx(pe.value)(qe.value)(se.value),Eq0:function(){return rd}}}(),yt=function(){return{compare:lx(pe.value)(qe.value)(se.value),Eq0:function(){return Na}}}(),Jh=function(){return{compare:px(pe.value)(qe.value)(se.value),Eq0:function(){return Cx}}}(),ud=function(){return{compare:cx(pe.value)(qe.value)(se.value),Eq0:function(){return Vh}}}();var Te=function(e){return e.compare},a3=Te(yt),jh=function(e){var t=Te(e);return function(n){return function(r){return function(p){return t(n(r))(n(p))}}}};var Zy=function(e){var t=Te(e);return function(n){return function(r){var p=t(n)(r);return!(p instanceof pe)}}};var xi=function(e){var t=Te(e);return function(n){return function(r){var p=t(n)(r);if(p instanceof pe)return r;if(p instanceof qe||p instanceof se)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[p.constructor.name])}}},hl=function(e){var t=Te(e);return function(n){return function(r){var p=t(n)(r);if(p instanceof pe||p instanceof qe)return n;if(p instanceof se)return r;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[p.constructor.name])}}},js=function(e){var t=Te(e),n=Si(e.Eq0());return{compare:function(){var r=function(p){return function(a){var o=t(p)(a);if(o instanceof qe)return 0;if(o instanceof pe)return 1;if(o instanceof se)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[o.constructor.name])}};return function(p){return function(a){return a3(0)(hx(r)(p)(a))}}}(),Eq0:function(){return n}}};var e0=function(e){var t=hl(e),n=xi(e);return function(r){return function(p){return function(a){return t(p)(n(r)(a))}}}};var t0=function(e){var t=Zy(e);return function(n){var r=Mo(n.Semiring0()),p=Yy(n);return function(a){var o=t(a)(r);return o?a:p(a)}}};var xo=function(e){return e.top};var _l={top:2147483647,bottom:-2147483648,Ord0:function(){return yt}},Ks={top:ux,bottom:sx,Ord0:function(){return Jh}};var pa=function(e){return e.bottom};var Ax=function(e){return e.toString()},Ix=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var Rx=function(e){var t=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(n,r){switch(n){case'"':case"\\":return"\\"+n;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var p=r+1,a=p<t&&e[p]>="0"&&e[p]<="9"?"\\&":"";return"\\"+n.charCodeAt(0).toString(10)+a})+'"'},$x=function(e){return function(t){for(var n=[],r=0,p=t.length;r<p;r++)n[r]=e(t[r]);return"["+n.join(",")+"]"}};var Fi={show:Rx};var Hx=function(e){return e.showRecordFields},Ox=function(){return function(){return function(e){var t=Hx(e);return{show:function(n){return"{"+(t(pt.value)(n)+"}")}}}}};var Sr={show:Ix},no={show:Ax};var Px={show:function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[e.constructor.name])}},Ee=function(e){return e.show},ml=function(e){return{show:$x(Ee(e))}},kx=function(e){var t=qn(e);return function(n){var r=Hx(n);return function(p){var a=Ee(p);return{showRecordFields:function(o){return function(l){var u=r(pt.value)(l),i=t(pt.value),s=da(i)(l);return" "+(i+(": "+(a(s)+(","+u))))}}}}}},Nx=function(e){var t=qn(e);return function(n){var r=Ee(n);return{showRecordFields:function(p){return function(a){var o=t(pt.value),l=da(o)(a);return" "+(o+(": "+(r(l)+" ")))}}}}};var l3=de(_e),z=function(){function e(){}return e.value=new e,e}(),N=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xh=function(e){var t=Ee(e);return{show:function(n){if(n instanceof N)return"(Just "+(t(n.value0)+")");if(n instanceof z)return"Nothing";throw new Error("Failed pattern match at Data.Maybe (line 223, column 1 - line 225, column 28): "+[n.constructor.name])}}},n0=function(e){var t=De(e);return{append:function(n){return function(r){if(n instanceof z)return r;if(r instanceof z)return n;if(n instanceof N&&r instanceof N)return new N(t(n.value0)(r.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,r.constructor.name])}}}};var Wx=function(e){var t=n0(e);return{mempty:z.value,Semigroup0:function(){return t}}};var Ke=function(e){return function(t){return function(n){if(n instanceof z)return e;if(n instanceof N)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Tu=Ke(!0)(me(!1)),Qs=Ke(!1)(me(!0));var Dt={map:function(e){return function(t){return t instanceof N?new N(e(t.value0)):z.value}}},f3=V(Dt);var nr=function(e){return Ke(e)(l3)},Fo=function(){return function(e){if(e instanceof N)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var Mu=function(e){var t=Ie(e);return{eq:function(n){return function(r){return n instanceof z&&r instanceof z?!0:n instanceof N&&r instanceof N?t(n.value0)(r.value0):!1}}}};var sd={apply:function(e){return function(t){if(e instanceof N)return f3(e.value0)(t);if(e instanceof z)return z.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Dt}};var qr={bind:function(e){return function(t){if(e instanceof N)return t(e.value0);if(e instanceof z)return z.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return sd}};var We=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Oe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var xu={map:function(e){return function(t){if(t instanceof We)return new We(t.value0);if(t instanceof Oe)return new Oe(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},d3=V(xu);var Sn=function(e){return function(t){return function(n){if(n instanceof We)return e(n.value0);if(n instanceof Oe)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Yh=function(){return Sn(me(z.value))(N.create)}();var Ux=Sn(me(!1))(me(!0));var r0={apply:function(e){return function(t){if(e instanceof We)return new We(e.value0);if(e instanceof Oe)return d3(e.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return xu}};var gl=function(){return{pure:Oe.create,Apply0:function(){return r0}}}();var Vo=function(e){return e};var Li={map:function(e){return function(t){return e(t)}}};var Zh={apply:function(e){return function(t){return e(t)}},Functor0:function(){return Li}},o0={bind:function(e){return function(t){return t(e)}},Apply0:function(){return Zh}},cd={pure:Vo,Apply0:function(){return Zh}},Er={Applicative0:function(){return cd},Bind1:function(){return o0}};var qx=function(e){return Math.min(Math.abs(e),2147483647)},zx=function(e){return function(t){return t===0?0:t>0?Math.floor(e/t):-Math.floor(e/-t)}},Vx=function(e){return function(t){if(t===0)return 0;var n=Math.abs(t);return(e%n+n)%n}};var Gx={Ring0:function(){return id}};var yl=function(e){return e.mod};var Dl={degree:qx,div:zx,mod:Vx,CommutativeRing0:function(){return Gx}},ld=function(e){return e.div};var Ai={mempty:"",Semigroup0:function(){return Gs}};var Fu={mempty:[],Semigroup0:function(){return sn}};var st=function(e){return e.mempty};var jx=function(e){return function(){return e}},Kx=function(e){return function(t){return function(){return t(e())()}}};var Qx=function(e,t,n){var r=0,p;return function(a){if(r===2)return p;if(r===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return r=1,p=n(),r=2,p}},Ua={Applicative0:function(){return rn},Bind1:function(){return xr}},xr={bind:Kx,Apply0:function(){return a0(0)}},rn={pure:jx,Apply0:function(){return a0(0)}},Xx=Qx("functorEffect","Effect",function(){return{map:ed(rn)}}),a0=Qx("applyEffect","Effect",function(){return{apply:wr(Ua),Functor0:function(){return Xx(0)}}}),Pe=Xx(20),i0=a0(23);var Yx=function(e){return function(){return{value:e}}};var Qe=function(e){return function(){return e.value}},Zx=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},qt=function(e){return function(t){return function(){t.value=e}}};var y3=ut(Pe),cn=Yx,u0=Zx,e_=function(e){return u0(function(t){var n=e(t);return{state:n,value:n}})},ro=function(e){return function(t){return y3(e_(e)(t))}};var b3=wn(xr),w3=V(Pe),Pt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yn=function(e){return e.tailRecM};var S3=function(e){var t=function(n){var r=!1,p;function a(o){if(o instanceof Pt){n=e(o.value0);return}if(o instanceof Bt)return r=!0,o.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 103, column 3 - line 103, column 25): "+[o.constructor.name])}for(;!r;)p=a(n);return p};return function(n){return t(e(n))}};var eF={tailRecM:function(e){var t=function(r){return r},n=S3(function(r){return t(e(r))});return function(r){return Vo(n(r))}},Monad0:function(){return Er}};var t_={tailRecM:function(e){return function(t){var n=function(r){if(r instanceof Bt)return r.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[r.constructor.name])};return function(){var p=b3(cn)(e(t))();return function(){for(;!function(){var o=Qe(p)();if(o instanceof Pt){var l=e(o.value0)();return qt(l)(p)(),!1}if(o instanceof Bt)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[o.constructor.name])}(););return{}}(),w3(n)(Qe(p))()}}},Monad0:function(){return Ua}};var tF=function(e){return function(t){return function(){return e(t())}}},nF=function(e){return function(){return e}},rF=function(e){return function(t){return function(){return t(e())()}}};var dd=function(e){return function(t){return function(){for(var n=0,r=e.length;n<r;n++)t(e[n])()}}};var x3=function(e,t,n){var r=0,p;return function(a){if(r===2)return p;if(r===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return r=1,p=n(),r=2,p}};var Xs={map:tF};var l0={Applicative0:function(){return n_},Bind1:function(){return f0}},f0={bind:rF,Apply0:function(){return uF(0)}},n_={pure:nF,Apply0:function(){return uF(0)}},uF=x3("applyST","Control.Monad.ST.Internal",function(){return{apply:wr(l0),Functor0:function(){return Xs}}});function sF(e){return e}var cF=sF,lF=sF;var fF=function(e,t){return t.push(e)};var r_=function(t){return function(n){return function(){return t(n)}}},d0=function(t){return function(n){return function(r){return function(){return t(n,r)}}}};var dF=r_(lF),p0=r_(cF);var h0=d0(fF);var hF=function(e){return function(t){return e&&t}},_F=function(e){return function(t){return e||t}},mF=function(e){return!e};var hd=function(e){return e.tt};var _a=function(e){return e.not};var _0=function(e){return e.implies};var _d=function(e){return e.ff};var Ys=function(e){return e.disj},ha={ff:!1,tt:!0,implies:function(e){return function(t){return Ys(ha)(_a(ha)(e))(t)}},conj:hF,disj:_F,not:mF};var Cl=function(e){return e.conj},md=function(e){var t=_d(e),n=hd(e),r=_0(e),p=Cl(e),a=Ys(e),o=_a(e);return{ff:function(l){return t},tt:function(l){return n},implies:function(l){return function(u){return function(i){return r(l(i))(u(i))}}},conj:function(l){return function(u){return function(i){return p(l(i))(u(i))}}},disj:function(l){return function(u){return function(i){return a(l(i))(u(i))}}},not:function(l){return function(u){return o(l(u))}}}};var vF=function(e){return function(t){return function(n){for(var r=t,p=n.length,a=p-1;a>=0;a--)r=e(n[a])(r);return r}}},gF=function(e){return function(t){return function(n){for(var r=t,p=n.length,a=0;a<p;a++)r=e(r)(n[a]);return r}}};var yF={empty:[],Alt0:function(){return Gy}},zr=function(e){return e.empty};var Z=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lu=function(e){return function(t){return e(t.value0)(t.value1)}};var mn=function(e){return e.value1};var Ri={map:function(e){return function(t){return new Z(t.value0,e(t.value1))}}};var rr=function(e){return e.value0};var g0=function(e){var t=Ie(e);return function(n){var r=Ie(n);return{eq:function(p){return function(a){return t(p.value0)(a.value0)&&r(p.value1)(a.value1)}}}}},bl=function(e){var t=Te(e),n=g0(e.Eq0());return function(r){var p=Te(r),a=n(r.Eq0());return{compare:function(o){return function(l){var u=t(o.value0)(l.value0);return u instanceof pe?pe.value:u instanceof se?se.value:p(o.value1)(l.value1)}},Eq0:function(){return a}}}};var Lo=function(e){return e.bimap};var z3={append:function(e){return function(t){return e instanceof N?e:t}}};var wF=function(){return{mempty:z.value,Semigroup0:function(){return z3}}}();var ne=function(e){return e};var Dd=function(){return ne};var V3=Dd();var In=function(){return V3};var G3=de(_e),J3=Ie(Ei),j3=In();var vn=function(e){return e.foldr};var ct=function(e){var t=Ur(e.Apply0()),n=X(e);return function(r){var p=vn(r);return function(a){return p(function(o){return t(a(o))})(n(void 0))}}},u_=function(e){var t=ct(e);return function(n){return He(t(n))}};var ln=function(e){return e.foldl};var qa=function(e){var t=ln(e);return function(n){var r=De(n.Semigroup0()),p=st(n);return function(a){return function(o){var l=function(u){return function(i){return u.init?{init:!1,acc:i}:{init:!1,acc:r(u.acc)(r(a)(i))}}};return t(l)({init:!0,acc:p})(o).acc}}}};var FF=function(e){var t=ln(e);return function(n){var r=function(p){return function(a){if(p instanceof z)return new N(a);if(p instanceof N)return new N(function(){var o=J3(n(p.value0)(a))(se.value);return o?p.value0:a}());throw new Error("Failed pattern match at Data.Foldable (line 441, column 3 - line 441, column 27): "+[p.constructor.name,a.constructor.name])}};return t(r)(z.value)}},E0=function(e){var t=Te(e);return function(n){return FF(n)(t)}};var T0=function(e){var t=ln(e);return function(n){return t(zo(n))(Mo(n))}};var Ht={foldr:function(e){return function(t){return function(n){if(n instanceof z)return t;if(n instanceof N)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof z)return t;if(n instanceof N)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=st(e);return function(n){return function(r){if(r instanceof z)return t;if(r instanceof N)return n(r.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,r.constructor.name])}}}};var s_={foldr:function(e){return function(t){return function(n){if(n instanceof We)return t;if(n instanceof Oe)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof We)return t;if(n instanceof Oe)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=st(e);return function(n){return function(r){if(r instanceof We)return t;if(r instanceof Oe)return n(r.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,r.constructor.name])}}}};var LF=function(e){var t=vn(e);return function(n){var r=De(n.Semigroup0()),p=st(n);return function(a){return t(function(o){return function(l){return r(a(o))(l)}})(p)}}},mt={foldr:vF,foldl:gF,foldMap:function(e){return LF(mt)(e)}};var kn=function(e){return e.foldMap};var c_=function(e){var t=kn(e)(wF);return function(n){var r=Ie(n);return function(p){var a=t(function(o){var l=r(p)(o.value0);return l?new N(o.value1):z.value});return function(o){return j3(a(o))}}}};var nc=function(e){var t=kn(e);return function(n){return t(n)(G3)}};var rc=function(e){return function(t){return function(n){return e(t,n)}}},oc=function(e){return function(t){return function(n){return function(r){return e(t,n,r)}}}},Au=function(e){return function(t){return function(n){return function(r){return function(p){return e(t,n,r,p)}}}}},M0=function(e){return function(t){return function(n){return function(r){return function(p){return function(a){return e(t,n,r,p,a)}}}}}};var AF=function(e){return function(t){for(var n=t.length,r=Array(n),p=0;p<n;p++)r[p]=e(p)(t[p]);return r}};var Iu=function(e){return e.mapWithIndex};var ac={mapWithIndex:AF,Functor0:function(){return vt}};var HF=function(){function e(p){return[p]}function t(p){return function(a){return[p,a]}}function n(p){return function(a){return function(o){return[p,a,o]}}}function r(p){return function(a){return p.concat(a)}}return function(p){return function(a){return function(o){return function(l){return function(u){function i(s,f){switch(f-s){case 0:return o([]);case 1:return a(e)(l(u[s]));case 2:return p(a(t)(l(u[s])))(l(u[s+1]));case 3:return p(p(a(n)(l(u[s])))(l(u[s+1])))(l(u[s+2]));default:var h=s+Math.floor((f-s)/4)*2;return p(a(r)(i(s,h)))(i(h,f))}}return i(0,u.length)}}}}}}();var LU=de(_e),Tn=function(e){return e.traverse};var ic={traverse:function(e){var t=X(e),n=V(e.Apply0().Functor0());return function(r){return function(p){if(p instanceof z)return t(z.value);if(p instanceof N)return n(N.create)(r(p.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[r.constructor.name,p.constructor.name])}}},sequence:function(e){var t=X(e),n=V(e.Apply0().Functor0());return function(r){if(r instanceof z)return t(z.value);if(r instanceof N)return n(N.create)(r.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[r.constructor.name])}},Functor0:function(){return Dt},Foldable1:function(){return Ht}};var JF=function(e){var t=Tn(e);return function(n){return t(n)(LU)}},$i={traverse:function(e){var t=e.Apply0();return HF(ht(t))(V(t.Functor0()))(X(e))},sequence:function(e){return JF($i)(e)},Functor0:function(){return vt},Foldable1:function(){return mt}},Ru=function(e){return e.sequence};var jF=function(e){return function(t){return function(n){return function(r){return function(p){return function(a){for(var o=[],l=a;;){var u=p(l);if(e(u))return o;var i=t(u);o.push(n(i)),l=r(i)}}}}}}};var KF=function(e){return function(t){return function(n){return function(r){return function(p){return function(a){for(var o=[],l=a;;){var u=p(l);o.push(n(u));var i=r(u);if(e(i))return o;l=t(i)}}}}}}};var d_=function(e){return e.foldl1};var NU=Fo();var I0={unfoldr1:KF(Tu)(NU)(rr)(mn)};var WU=Fo(),ma=function(e){return e.unfoldr};var Jo={unfoldr:jF(Tu)(WU)(rr)(mn),Unfoldable10:function(){return I0}};var qU=ut(Xs);var zU=V(vt),VU=V(Xs),R0=Fo(),GU=gn(n_),JU=od(Ei),jU=Ie(Ei);var KU=nc(mt),QU=De(sn);var YF=oc(ax);var $0=function(){return YF(Z.create)}();var __=function(){return oc(jy)(me(z.value))(function(e){return function(t){return new N({head:e,tail:t})}})}();var H0=function(){return oc(jy)(me(z.value))(function(e){return function(t){return new N(t)}})}(),m_=function(e){return oc(rx)(e)(function(t){if(t instanceof se)return 1;if(t instanceof qe)return 0;if(t instanceof pe)return-1;throw new Error("Failed pattern match at Data.Array (line 897, column 38 - line 900, column 11): "+[t.constructor.name])})},O0=function(e){var t=jh(e);return function(n){return m_(t(n))}},XU=O0(yt),P0=function(e){var t=Te(e);return function(n){return m_(t)(n)}};var h_=oc(ox);var uc=function(e){return[e]};var k0=rc(KM);var sc=function(e){return tr(e)===0};var ZF=Iu(ac);var eL=function(){return M0(ex)(N.create)(z.value)}();var v_=function(){return Au(XM)(N.create)(z.value)}(),Tl=function(e){return v_(e)(tr(e)-1|0)};var tL=function(e){return function(t){var n=function(p){var a=!1,o;function l(u){var i=v_(t)(u);if(i instanceof N){var s=e(i.value0);if(s){p=u+1|0;return}return a=!0,new N(u)}if(i instanceof z)return a=!0,z.value;throw new Error("Failed pattern match at Data.Array (line 1035, column 5 - line 1037, column 25): "+[i.constructor.name])}for(;!a;)o=l(p);return o},r=n(0);if(r instanceof N&&r.value0===0)return{init:[],rest:t};if(r instanceof N)return{init:h_(0)(r.value0)(t),rest:h_(r.value0)(tr(t))(t)};if(r instanceof z)return{init:t,rest:[]};throw new Error("Failed pattern match at Data.Array (line 1022, column 3 - line 1028, column 30): "+[r.constructor.name])}},g_=function(e){return function(t){return tL(e)(t).init}};var Hi=function(e){return v_(e)(0)},nL=function(e){return function(t){var n=m_(function(p){return function(a){return e(mn(p))(mn(a))}})(ZF(Z.create)(t)),r=Hi(n);if(r instanceof z)return[];if(r instanceof N)return zU(mn)(XU(rr)(function(){var a=dF(uc(r.value0))();return dd(n)(function(o){return function(){var u=VU(function(){var i=function(s){return R0(Tl(s))};return function(s){return mn(i(s))}}())(p0(a))();return GU(JU(e(u)(o.value1))(qe.value))(qU(h0(o)(a)))()}})(),p0(a)()}()));throw new Error("Failed pattern match at Data.Array (line 1115, column 17 - line 1123, column 28): "+[r.constructor.name])}},Td=function(e){return nL(Te(e))};var Oi=function(e){return rc(QM)(vn(e))};var rL=function(e){return KU(e)};var oL=function(){return Au(ZM)(N.create)(z.value)}(),Md=function(e){return function(t){return function(n){var r=Ke(0)(function(p){return p+1|0})(oL(function(p){return jU(e(t)(p))(se.value)})(n));return R0(eL(r)(t)(n))}}};var aL=function(){return Au(YM)(N.create)(z.value)}();var N0=rc(nx);var B0=function(e){return function(t){var n=e<1;return n?t:h_(e)(tr(t))(t)}};var y_=function(){return Au(tx)(N.create)(z.value)}(),D_=function(e){return function(t){return function(n){return n.length===0?[]:Ke(n)(function(r){return R0(y_(r)(n))})(aL(e(t))(n))}}},W0=function(e){return D_(Ie(e))};var xn=function(e){return function(t){return QU([e])(t)}};var U0=He(ee(bu)),za=function(e){return U0(function(){var t=Ke([])(uc);return function(n){return t(e(n))}}())};var ZU=vn(mt),iL=Iu(ac),e4=ln(mt);var Ml=function(e){return e.foldrWithIndex};var t4=function(e){var t=Ml(e);return function(n){var r=De(n.Semigroup0()),p=st(n);return function(a){return t(function(o){return function(l){return function(u){return r(a(o)(l))(u)}}})(p)}}},C_={foldrWithIndex:function(e){return function(t){var n=ZU(function(p){return function(a){return e(p.value0)(p.value1)(a)}})(t),r=iL(Z.create);return function(p){return n(r(p))}}},foldlWithIndex:function(e){return function(t){var n=e4(function(p){return function(a){return e(a.value0)(p)(a.value1)}})(t),r=iL(Z.create);return function(p){return n(r(p))}}},foldMapWithIndex:function(e){return t4(C_)(e)},Foldable0:function(){return mt}};var n4=function(e){var t=Ru(e.Traversable2()),n=Iu(e.FunctorWithIndex0());return function(r){var p=t(r);return function(a){var o=n(a);return function(l){return p(o(l))}}}},xl=function(e){return e.traverseWithIndex};var xd={traverseWithIndex:function(e){return n4(xd)(e)},FunctorWithIndex0:function(){return ac},FoldableWithIndex1:function(){return C_},Traversable2:function(){return $i}};var ao=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var q0=function(e){var t=zr(e);return function(n){return new ao(n,t)}};var b_=function(e){var t=On(e.Plus1().Alt0()),n=X(e.Applicative0());return function(r){return t(n(r.value0))(r.value1)}};var Fd=function(e){var t=V(e);return{map:function(n){return function(r){return new ao(n(r.value0),t(n)(r.value1))}}}};var w_=function(e){var t=kn(e),n=ln(e),r=vn(e);return{foldMap:function(p){var a=De(p.Semigroup0()),o=t(p);return function(l){return function(u){return a(l(u.value0))(o(l)(u.value1))}}},foldl:function(p){return function(a){return function(o){return n(p)(p(a)(o.value0))(o.value1)}}},foldr:function(p){return function(a){return function(o){return p(o.value0)(r(p)(a)(o.value1))}}}}};var z0=function(e){var t=ln(e),n=vn(e),r=w_(e);return{foldMap1:function(p){var a=De(p);return function(o){return function(l){return t(function(u){return function(i){return a(u)(o(i))}})(o(l.value0))(l.value1)}}},foldr1:function(p){return function(a){return Ke(a.value0)(p(a.value0))(n(function(o){var l=Ke(o)(p(o));return function(u){return N.create(l(u))}})(z.value)(a.value1))}},foldl1:function(p){return function(a){return t(p)(a.value0)(a.value1)}},Foldable0:function(){return r}}};var lL=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Lr=function(e){return e};var S_=function(e){return function(t){return t.toString(e)}};var E_=isFinite;var Ld=Math.abs;var Ad=function(e){return function(t){return e%t}},G0=Math.round;var dL=xo(_l),pL=pa(_l);var J0=16;var j0=function(){return lL(N.create)(z.value)}(),v4=function(e){if(!E_(e))return 0;if(e>=Lr(dL))return dL;if(e<=Lr(pL))return pL;if(_n)return nr(0)(j0(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},Ll=function(e){return v4(G0(e))};var g4=typeof Array.from=="function",y4=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",D4=typeof String.prototype.fromCodePoint=="function",C4=typeof String.prototype.codePointAt=="function",hL=function(e){return C4?function(t){return t.codePointAt(0)}:e};var _L=function(e){return D4?String.fromCodePoint:e},mL=function(e){return function(t){return y4?function(n){for(var r="",p=n[Symbol.iterator](),a=0;a<t;++a){var o=p.next();if(o.done)return r;r+=o.value}return r}:e(t)}},vL=function(e){return function(t){return g4?function(n){return Array.from(n,t)}:e}};function $u(e){return e.charCodeAt(0)}function gL(e){return String.fromCharCode(e)}var Id={Applicative0:function(){return ll},Plus1:function(){return yF}};var DL=pa(Ks),CL=xo(Ks);var lc=function(e){return e.toEnum};var Q0=function(e){return e.fromEnum},bL=function(e){var t=lc(e),n=Q0(e),r=pa(e.Bounded0());return function(p){return function(a){return function(o){var l=t(o);if(l instanceof N)return l.value0;if(l instanceof z){var u=o<n(r);return u?p:a}throw new Error("Failed pattern match at Data.Enum (line 158, column 33 - line 160, column 62): "+[l.constructor.name])}}}};var Hu=function(e){return function(t){return function(n){return e(t(n)+1|0)}}},Ou=function(e){return function(t){return function(n){return e(t(n)-1|0)}}};var K0=function(e){return e>=$u(DL)&&e<=$u(CL)?new N(gL(e)):z.value},T4={succ:Hu(K0)($u),pred:Ou(K0)($u),Ord0:function(){return Jh}};var X0=function(){return{cardinality:$u(CL)-$u(DL)|0,toEnum:K0,fromEnum:$u,Bounded0:function(){return Ks},Enum1:function(){return T4}}}();var T_=function(e){return e};var Pu=function(e){return e.length};var M_=function(e){return function(t){return t.substr(0,e)}},fc=function(e){return function(t){return t.substring(e)}};var ku=function(e){return function(t){if(e>=0&&e<t.length)return t.charAt(e);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var SL=function(e){return function(t){return fc(Pu(t)-e|0)(t)}};var x_=function(e){return function(t){return M_(Pu(t)-e|0)(t)}};var Y0=function(e){return function(t){return t.split(e)}};var mo=function(e){return function(t){return t.join(e)}};var xL=function(e){return e===""};var $d=Q0(X0),H4=V(Dt),O4=ma(Jo),P4=ld(Dl),k4=yl(Dl);var LL=function(e){return function(t){return(((e-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var AL=function(e){return 56320<=e&&e<=57343},IL=function(e){return 55296<=e&&e<=56319},RL=function(e){var t=Pu(e);if(t===0)return z.value;if(t===1)return new N({head:$d(ku(0)(e)),tail:""});var n=$d(ku(1)(e)),r=$d(ku(0)(e)),p=IL(r)&&AL(n);return p?new N({head:LL(r)(n),tail:fc(2)(e)}):new N({head:r,tail:fc(1)(e)})},N4=function(e){return H4(function(t){return new Z(t.head,t.tail)})(RL(e))},B4=function(e){return O4(N4)(e)},W4=function(e){var t=$d(ku(0)(e)),n=IL(t)&&Pu(e)>1;if(n){var r=$d(ku(1)(e)),p=AL(r);return p?LL(t)(r):t}return t},U4=hL(W4),q4=vL(B4)(U4),dc=function(e){return tr(q4(e))};var Z0=function(){var e=bL(X0)(pa(Ks))(xo(Ks));return function(t){return T_(e(t))}}(),z4=function(e){if(e<=65535)return Z0(e);var t=P4(e-65536|0)(1024)+55296|0,n=k4(e-65536|0)(1024)+56320|0;return Z0(t)+Z0(n)};var $L=_L(z4),HL=function(e){return function(t){if(e<1)return"";var n=RL(t);return n instanceof N?$L(n.value0.head)+HL(e-1|0)(n.value0.tail):t}},OL=mL(HL);var F_=function(e){return function(t){return fc(Pu(OL(e)(t)))(t)}};var eD=e0(yt),PL=xi(yt),kL=hl(yt);var tD=e0(Mi);var NL=Ee(Sr);var BL=function(){function e(t,n,r,p){this.value0=t,this.value1=n,this.value2=r,this.value3=p}return e.create=function(t){return function(n){return function(r){return function(p){return new e(t,n,r,p)}}}},e}(),WL=function(e){return function(t){return Ad(Ad(e)(t)+t)(t)}},K4=function(e){return function(t){return function(n){return function(r){var p=eD(0)(255)(e),a=Lr(p)/255,o=eD(0)(255)(t),l=Lr(o)/255,u=eD(0)(255)(n),i=PL(PL(p)(o))(u),s=kL(kL(p)(o))(u),f=i-s|0,h=Lr(f)/255,d=Lr(i+s|0)/(255*2),c=function(){if(f===0)return 0;if(_n)return h/(1-Ld(2*d-1));throw new Error("Failed pattern match at Color (line 160, column 3 - line 162, column 64): ")}(),_=Lr(u)/255,m=function(y){if(y===0)return 0;if(i===p)return WL((l-_)/h)(6);if(i===o)return(_-a)/h+2;if(_n)return(a-l)/h+4;throw new Error("Failed pattern match at Color (line 150, column 3 - line 150, column 15): "+[y.constructor.name])},v=60*m(f);return new BL(v,c,d,r)}}}},Ga=function(e){return function(t){return function(n){return K4(e)(t)(n)(1)}}};var Q4=function(e){return function(t){return function(n){return function(r){var p=tD(0)(1)(t),a=tD(0)(1)(n),o=tD(0)(1)(r);return new BL(e,p,a,o)}}}};var UL=function(e){return function(t){return function(n){return Q4(e)(t)(n)(1)}}},qL=UL(0)(0)(1);var zL=function(e){var t=function(l){return NL(Lr(Ll(100*l))/100)},n=t(e.value1*100)+"%",r=t(e.value2*100)+"%",p=t(e.value0),a=NL(e.value3),o=e.value3===1;return o?"hsl("+(p+(", "+(n+(", "+(r+")"))))):"hsla("+(p+(", "+(n+(", "+(r+(", "+(a+")")))))))};var X4=function(e){var t=e===360;return t?e:WL(e)(360)};var Y4=function(e){var t=X4(e.value0)/60,n=(1-Ld(2*e.value2-1))*e.value1,r=e.value2-n/2,p=n*(1-Ld(Ad(t)(2)-1)),a=function(){if(t<1)return{r:n,g:p,b:0};if(1<=t&&t<2)return{r:p,g:n,b:0};if(2<=t&&t<3)return{r:0,g:n,b:p};if(3<=t&&t<4)return{r:0,g:p,b:n};if(4<=t&&t<5)return{r:p,g:0,b:n};if(_n)return{r:n,g:0,b:p};throw new Error("Failed pattern match at Color (line 356, column 3 - line 362, column 43): ")}();return{r:a.r+r,g:a.g+r,b:a.b+r,a:e.value3}};var Z4=function(e){var t=Y4(e),n=Ll(255*t.g),r=Ll(255*t.r),p=Ll(255*t.b);return{r,g:n,b:p,a:t.a}};var Rl=function(e){var t=function(p){var a=S_(J0)(p),o=dc(a)===1;return o?"0"+a:a},n=Z4(e),r=function(){if(n.a===1)return"";if(_n)return t(Ll(255*n.a));throw new Error("Failed pattern match at Color (line 429, column 3 - line 431, column 46): ")}();return"#"+(t(n.r)+(t(n.g)+(t(n.b)+r)))};var jo=UL(0)(0)(0);var L_={dimap:function(e){return function(t){return function(n){return function(r){return t(n(e(r)))}}}}},hc=function(e){return e.dimap};var Ko={first:function(e){return function(t){return new Z(e(t.value0),t.value1)}},second:V(Ri),Profunctor0:function(){return L_}},_c=function(e){return e.second},$l=function(e){return e.first};var GL=V(vt),JL=_c(Ko),e6=De(sn),t6=c_(mt)(to);var io=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),n6=function(e){return e};var r6=function(e){return e},Ka=function(e){return e.value};var Hl={append:function(e){return function(t){if(e instanceof uo&&t instanceof uo)return new uo(e.value0+t.value0);if(e instanceof uo&&t instanceof io)return new io(GL(JL(function(n){return e.value0+n}))(t.value0));if(e instanceof io&&t instanceof uo)return new io(GL(JL(function(n){return t.value0+n}))(e.value0));if(e instanceof io&&t instanceof io)return new io(e6(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},o6=De(Hl),nD={append:function(e){return function(t){return o6(e)(t)}}},jL=De(nD);var Hd=function(e){if(e instanceof io)return nr("")(t6("")(e.value0));if(e instanceof uo)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var A_=function(){return{fromString:uo.create}}(),KL=Mt(A_),or={fromString:function(e){return n6(KL(e))}},I_=Mt(or);var Bu={value:function(e){return I_(zL(e))}};var mc={value:function(){var e=Ee(Sr);return function(t){return I_(e(t))}}()},Wu={value:I_},Pi=function(e){var t=Ka(e);return function(n){var r=Ka(n);return{value:function(p){return jL(t(p.value0))(jL(I_(" "))(r(p.value1)))}}}};var Vn={fromString:function(e){return r6(KL(e))}};var QL=function(e){return e};var XL=function(e){return e.center};var Od=function(){return new io([new Z("-webkit-",""),new Z("-moz-",""),new Z("-ms-",""),new Z("-o-",""),new Z("","")])}();var Qa=ne,rD=ne;var oD=De(nD),aD=Ka(mc),iD=Mt(or),ZL=Ee(Sr),a6=De(Hl);var Pd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),i6=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),u6=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),s6=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),c6=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Uu=function(e){if(e instanceof Pd)return Hd(e.value0);if(e instanceof i6)return Qa(function(t){return Qa(function(n){return"("+(Uu(t)+(" + "+(Uu(n)+")")))})(e.value1)})(e.value0);if(e instanceof u6)return Qa(function(t){return Qa(function(n){return"("+(Uu(t)+(" - "+(Uu(n)+")")))})(e.value1)})(e.value0);if(e instanceof s6)return Qa(function(t){return"("+(ZL(e.value0)+(" * "+(Uu(t)+")")))})(e.value1);if(e instanceof c6)return Qa(function(t){return"("+(Uu(t)+(" / "+(ZL(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},ya={value:function(e){return e instanceof Pd?e.value0:a6(Od)(new uo("calc"+Uu(e)))}};var Xe=function(e){return new Pd(oD(aD(e))(iD("px")))};var Pl=function(e){return new Pd(oD(aD(e))(iD("%")))};var uD=function(e){return new Pd(oD(aD(e))(iD("em")))};var l6=De(sn),eA=X(ll),f6=Ie(Si(to)),Ar=Te(Vt),d6=Te(js(Vt)),qu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Gu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ju=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ju=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ku=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tA=function(e){return e},R_=function(){function e(){}return e.value=new e,e}(),sD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),nA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ft=function(e){return function(t){return new kd(l6(e.value0)(t),e.value1)}},zt=function(){return new kd([],R_.value)}(),oA=function(e){return tA(eA(Wi.create(e)))};var p6={eq:function(e){return function(t){return e instanceof qu&&t instanceof qu||e instanceof Bi&&t instanceof Bi||e instanceof zu&&t instanceof zu?e.value0===t.value0:e instanceof Vu&&t instanceof Vu||e instanceof Gu&&t instanceof Gu||e instanceof Ju&&t instanceof Ju||e instanceof ju&&t instanceof ju||e instanceof Ku&&t instanceof Ku||e instanceof Qu&&t instanceof Qu?e.value0===t.value0&&e.value1===t.value1:e instanceof Wi&&t instanceof Wi?e.value0===t.value0:e instanceof kl&&t instanceof kl?e.value0===t.value0&&f6(e.value1)(t.value1):!1}}};var aA={compare:function(e){return function(t){if(e instanceof qu&&t instanceof qu)return Ar(e.value0)(t.value0);if(e instanceof qu)return pe.value;if(t instanceof qu)return se.value;if(e instanceof Bi&&t instanceof Bi)return Ar(e.value0)(t.value0);if(e instanceof Bi)return pe.value;if(t instanceof Bi)return se.value;if(e instanceof zu&&t instanceof zu)return Ar(e.value0)(t.value0);if(e instanceof zu)return pe.value;if(t instanceof zu)return se.value;if(e instanceof Vu&&t instanceof Vu){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof Vu)return pe.value;if(t instanceof Vu)return se.value;if(e instanceof Gu&&t instanceof Gu){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof Gu)return pe.value;if(t instanceof Gu)return se.value;if(e instanceof Ju&&t instanceof Ju){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof Ju)return pe.value;if(t instanceof Ju)return se.value;if(e instanceof ju&&t instanceof ju){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof ju)return pe.value;if(t instanceof ju)return se.value;if(e instanceof Ku&&t instanceof Ku){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof Ku)return pe.value;if(t instanceof Ku)return se.value;if(e instanceof Qu&&t instanceof Qu){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof Qu)return pe.value;if(t instanceof Qu)return se.value;if(e instanceof Wi&&t instanceof Wi)return Ar(e.value0)(t.value0);if(e instanceof Wi)return pe.value;if(t instanceof Wi)return se.value;if(e instanceof kl&&t instanceof kl){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:d6(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return p6}};var $_=function(e){return new kd([],new sD(e))},Gn=function(e){return function(t){return new kd([],new lD(e,t))}},iA=function(e){return function(t){return new kd([],new cD(e,t))}};var Ct=function(e){return tA(eA(Bi.create(e)))};var Da=function(e){return e.tell};function ar(e){return new Error(e)}function vo(e){return function(){throw e}}function H_(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var dD=function(e){return vo(ar(e))};var ir=function(e){return e.throwError};var m6={throwError:vo,Monad0:function(){return Ua}};var uA={catchError:He(H_),MonadThrow0:function(){return m6}};var Qo=function(e){return e.catchError};var Nd=function(e){var t=Qo(e),n=e.MonadThrow0().Monad0(),r=V(n.Bind1().Apply0().Functor0()),p=X(n.Applicative0());return function(a){return t(r(Oe.create)(a))(function(o){return p(We.create(o))})}};var Ir=function(e){return e.ask};var co=function(e){return e.state},Bl=function(e){var t=co(e);return function(n){return t(function(r){return new Z(void 0,n)})}},fn=function(e){var t=co(e);return function(n){return t(function(r){return new Z(void 0,n(r))})}},Ao=function(e){var t=co(e);return function(n){return t(function(r){var p=n(r);return new Z(p,p)})}},Io=function(e){var t=co(e);return function(n){return t(function(r){return new Z(n(r),r)})}},Rr=function(e){return co(e)(function(t){return new Z(t,t)})};var wt=function(e){return e.lift};var Wl={liftEffect:de(_e),Monad0:function(){return Ua}},Le=function(e){return e.liftEffect};var pD=function(e){return e},hD=function(e){return e};var O_=function(e){return function(t){return e(t)}},_D=function(e){var t=V(e);return{map:function(n){return O_(t(function(r){return new Z(n(r.value0),r.value1)}))}}};var Bd=function(e){var t=De(e);return function(n){var r=ht(n),p=n.Functor0(),a=V(p),o=_D(p);return{apply:function(l){return function(u){var i=function(s){return function(f){return new Z(s.value0(f.value0),t(s.value1)(f.value1))}};return r(a(i)(l))(u)}},Functor0:function(){return o}}}},mD=function(e){var t=De(e),n=Bd(e);return function(r){var p=ee(r),a=r.Apply0(),o=V(a.Functor0()),l=n(a);return{bind:function(u){return function(i){return p(u)(function(s){var f=i(s.value0);return o(function(h){return new Z(h.value0,t(s.value1)(h.value1))})(f)})}},Apply0:function(){return l}}}};var vD=function(e){var t=st(e),n=Bd(e.Semigroup0());return function(r){var p=X(r),a=n(r.Apply0());return{pure:function(o){return p(new Z(o,t))},Apply0:function(){return a}}}},y6=function(e){var t=vD(e),n=mD(e.Semigroup0());return function(r){var p=t(r.Applicative0()),a=n(r.Bind1());return{Applicative0:function(){return p},Bind1:function(){return a}}}};var sA=function(e){var t=e.Semigroup0(),n=y6(e);return function(r){var p=n(r);return{tell:function(){var a=X(r.Applicative0()),o=Z.create(void 0);return function(l){return pD(a(o(l)))}}(),Semigroup0:function(){return t},Monad1:function(){return p}}}};var D6=In();var C6=function(e){return D6(hD(e))};var cA=function(e){return mn(C6(e))};var E6=V(_D(Li));var T6=ht(Bd(sn)(Zh)),M6=ee(mD(sn)(o0));var lA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Wd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_A=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var gA=function(e){return e},Ud=function(e){return cA(e)},yA=function(){var e=Da(sA(Fu)(Er));return function(t){return gA(e(uc(t)))}}(),xt=function(e){return function(t){return yA(new yD(new gD(e),Ud(t)))}};var Kt=function(e){var t=Ka(e);return function(n){return function(r){return yA(new Wd(QL(n),t(r)))}}},DD=function(e){var t=Kt(e);return function(n){return t(n)}};var x6={map:function(e){return function(t){return E6(e)(t)}}};var DA={apply:function(e){return function(t){return T6(e)(t)}},Functor0:function(){return x6}},yo={bind:function(e){return function(t){return M6(e)(function(n){return function(r){return r}(t(n))})}},Apply0:function(){return DA}};var CA={pure:function(){var e=X(vD(Fu)(cd));return function(t){return gA(e(t))}}(),Apply0:function(){return DA}};var F6=Mt(or);var bA=Mt(Vn),L6=Kt(Bu),A6=Pi(ya);var I6={value:function(e){return e}},R6=Kt(Pi(I6)(A6(Bu))),Dc=F6("solid");var wA=L6(bA("border-color"));var Cc=function(e){return function(t){return function(n){return R6(bA("border"))(new Z(e,new Z(t,n)))}}};var N_=Mt(Vn),ql=Mt(or);var Ro=function(){var e=Kt(Wu)(N_("z-index")),t=Ee(no);return function(n){return e(t(n))}}();var $6={value:function(e){return e}};var H6={value:function(e){return e}};var Yu=ql("relative"),pr=Kt($6)(N_("position")),B_=Kt(mc)(N_("opacity"));var SA=ql("inline-block");var qi=ql("flex");var EA=ql("none");var $o=Kt(H6)(N_("display"));var TA=ql("block"),Ca=ql("absolute");var bD=Mt(or);var MA=Mt(Vn);var O6=function(e){return e};var P6={value:function(e){return e}};var k6={value:function(e){return e}};var Zu=bD("row");var N6={fromString:function(e){return O6(bD(e))}},B6=Mt(N6);var zi=Kt(P6)(MA("flex-direction"));var xA=bD("column");var FA={center:B6("center")};var LA=Kt(k6)(MA("align-items"));var es=Kt(ya),Xa=Mt(Vn),AA=Pi(ya)(ya),IA=Kt(Pi(AA)(AA)),ba=es(Xa("width")),Yo=es(Xa("top")),U_=es(Xa("right"));var wD=es(Xa("padding-right"));var q_=function(e){return function(t){return function(n){return function(r){return IA(Xa("padding"))(new Z(new Z(e,t),new Z(n,r)))}}}};var SD=es(Xa("margin-right"));var RA=function(e){return function(t){return function(n){return function(r){return IA(Xa("margin"))(new Z(new Z(e,t),new Z(n,r)))}}}};var Vi=es(Xa("left")),Ho=es(Xa("height")),ED=es(Xa("bottom"));var Ze=function(){function e(){}return e.value=new e,e}(),Ye=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),TD=function(e){return e},U6=function(e){return new Ye(e.value0,e.value1)};var q6=function(e){var t=function(n){return function(r){var p=n,a=!1,o;function l(u,i){if(i instanceof Ye&&i.value1 instanceof Ye&&i.value1.value1 instanceof Ye){p=new Ye(i,u),r=i.value1.value1.value1;return}var s=function(h){return h instanceof Ye&&h.value1 instanceof Ye&&h.value1.value1 instanceof Ze?new Ye(e(h.value0),new Ye(e(h.value1.value0),Ze.value)):h instanceof Ye&&h.value1 instanceof Ze?new Ye(e(h.value0),Ze.value):Ze.value},f=function(h){return function(d){var c=h,_=!1,m;function v(y,C){if(y instanceof Ye&&y.value0 instanceof Ye&&y.value0.value1 instanceof Ye&&y.value0.value1.value1 instanceof Ye){c=y.value1,d=new Ye(e(y.value0.value0),new Ye(e(y.value0.value1.value0),new Ye(e(y.value0.value1.value1.value0),C)));return}return _=!0,C}for(;!_;)m=v(c,d);return m}};return a=!0,f(u)(s(i))}for(;!a;)o=l(p,r);return o}};return t(Ze.value)},HA={map:q6};var Bn={foldr:function(e){return function(t){var n=function(){var p=function(a){return function(o){var l=a,u=!1,i;function s(f,h){if(h instanceof Ze)return u=!0,f;if(h instanceof Ye){l=new Ye(h.value0,f),o=h.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[f.constructor.name,h.constructor.name])}for(;!u;)i=s(l,o);return i}};return p(Ze.value)}(),r=ln(Bn)(He(e))(t);return function(p){return r(n(p))}}},foldl:function(e){var t=function(n){return function(r){var p=n,a=!1,o;function l(u,i){if(i instanceof Ze)return a=!0,u;if(i instanceof Ye){p=e(u)(i.value0),r=i.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[i.constructor.name])}for(;!a;)o=l(p,r);return o}};return t},foldMap:function(e){var t=De(e.Semigroup0()),n=st(e);return function(r){return ln(Bn)(function(p){var a=t(p);return function(o){return a(r(o))}})(n)}}};var z6=vn(Bn);var MD={append:function(e){return function(t){return z6(Ye.create)(t)(e)}}},OA=De(MD);var PA={append:function(e){return function(t){return new ao(e.value0,OA(e.value1)(U6(t)))}}};var V6={alt:OA,Functor0:function(){return HA}},kA=function(){return{empty:Ze.value,Alt0:function(){return V6}}}();var bc=function(e,t,n){var r=0,p;return function(a){if(r===2)return p;if(r===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return r=1,p=n(),r=2,p}};var J6=V(Dt);var At=function(){function e(){}return e.value=new e,e}(),kt=function(){function e(t,n,r,p,a,o){this.value0=t,this.value1=n,this.value2=r,this.value3=p,this.value4=a,this.value5=o}return e.create=function(t){return function(n){return function(r){return function(p){return function(a){return function(o){return new e(t,n,r,p,a,o)}}}}}},e}(),BA=function(){function e(){}return e.value=new e,e}(),xD=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),AD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var z_=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),NA=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),Zo=function(e,t,n,r){if(n instanceof At){if(r instanceof At)return new kt(1,1,e,t,n,r);if(r instanceof kt)return new kt(1+r.value0|0,1+r.value1|0,e,t,n,r);throw new Error("Failed pattern match at Data.Map.Internal (line 680, column 5 - line 684, column 39): "+[r.constructor.name])}if(n instanceof kt){if(r instanceof At)return new kt(1+n.value0|0,1+n.value1|0,e,t,n,r);if(r instanceof kt)return new kt(1+function(){var p=n.value0>r.value0;return p?n.value0:r.value0}()|0,(1+n.value1|0)+r.value1|0,e,t,n,r);throw new Error("Failed pattern match at Data.Map.Internal (line 686, column 5 - line 690, column 68): "+[r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 678, column 32 - line 690, column 68): "+[n.constructor.name])},j6=function(){return He(AD.create)(BA.value)}(),K6=function(e){return function(t){return function(n){var r=function(p){var a=!1,o;function l(u){if(u instanceof BA)return a=!0,n(void 0);if(u instanceof xD)return a=!0,t(u.value0,u.value1,u.value2);if(u instanceof AD){p=e(u.value1)(u.value0);return}throw new Error("Failed pattern match at Data.Map.Internal (line 918, column 8 - line 924, column 20): "+[u.constructor.name])}for(;!a;)o=l(p);return o};return r}}},ts=function(e){if(e instanceof At)return 0;if(e instanceof kt)return e.value1;throw new Error("Failed pattern match at Data.Map.Internal (line 616, column 8 - line 618, column 24): "+[e.constructor.name])},wc=function(e){return function(t){return new kt(1,1,e,t,At.value,At.value)}},wa=function(){var e=function(r){if(r instanceof At)return 0;if(r instanceof kt)return r.value0;throw new Error("Failed pattern match at Data.Map.Internal (line 735, column 12 - line 737, column 26): "+[r.constructor.name])},t=function(r,p,a,o,l,u,i){return u instanceof kt&&u.value0>e(i)?Zo(u.value2,u.value3,Zo(r,p,a,u.value4),Zo(o,l,u.value5,i)):Zo(o,l,Zo(r,p,a,u),i)},n=function(r,p,a,o,l,u,i){return u instanceof kt&&e(l)<=u.value0?Zo(u.value2,u.value3,Zo(a,o,l,u.value4),Zo(r,p,u.value5,i)):Zo(a,o,l,Zo(r,p,u,i))};return function(r,p,a,o){if(a instanceof At)return o instanceof At?wc(r)(p):o instanceof kt&&o.value0>1?t(r,p,a,o.value2,o.value3,o.value4,o.value5):Zo(r,p,a,o);if(a instanceof kt){if(o instanceof kt){if(o.value0>(a.value0+1|0))return t(r,p,a,o.value2,o.value3,o.value4,o.value5);if(a.value0>(o.value0+1|0))return n(r,p,a.value2,a.value3,a.value4,a.value5,o)}return o instanceof At&&a.value0>1?n(r,p,a.value2,a.value3,a.value4,a.value5,o):Zo(r,p,a,o)}throw new Error("Failed pattern match at Data.Map.Internal (line 695, column 40 - line 716, column 34): "+[a.constructor.name])}}(),FD=bc("unsafeSplit","Data.Map.Internal",function(){return function(e,t,n){if(n instanceof At)return new z_(z.value,At.value,At.value);if(n instanceof kt){var r=e(t)(n.value2);if(r instanceof pe){var p=FD(771)(e,t,n.value4);return new z_(p.value0,p.value1,wa(n.value2,n.value3,p.value2,n.value5))}if(r instanceof se){var p=FD(774)(e,t,n.value5);return new z_(p.value0,wa(n.value2,n.value3,n.value4,p.value1),p.value2)}if(r instanceof qe)return new z_(new N(n.value3),n.value4,n.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 769, column 5 - line 777, column 30): "+[r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 765, column 34 - line 777, column 30): "+[n.constructor.name])}}),ID=FD(764),WA=bc("unsafeSplitLast","Data.Map.Internal",function(){return function(e,t,n,r){if(r instanceof At)return new NA(e,t,n);if(r instanceof kt){var p=WA(757)(r.value2,r.value3,r.value4,r.value5);return new NA(p.value0,p.value1,wa(e,t,n,p.value2))}throw new Error("Failed pattern match at Data.Map.Internal (line 754, column 37 - line 758, column 57): "+[r.constructor.name])}}),Q6=WA(753),RD=function(e,t){if(e instanceof At)return t;if(e instanceof kt){var n=Q6(e.value2,e.value3,e.value4,e.value5);return wa(n.value0,n.value1,n.value2,t)}throw new Error("Failed pattern match at Data.Map.Internal (line 742, column 25 - line 746, column 38): "+[e.constructor.name,t.constructor.name])};var LD=bc("unsafeUnionWith","Data.Map.Internal",function(){return function(e,t,n,r){if(n instanceof At)return r;if(r instanceof At)return n;if(r instanceof kt){var p=ID(e,r.value2,n),a=LD(787)(e,t,p.value1,r.value4),o=LD(788)(e,t,p.value2,r.value5);if(p.value0 instanceof N)return wa(r.value2,t(p.value0.value0)(r.value3),a,o);if(p.value0 instanceof z)return wa(r.value2,r.value3,a,o);throw new Error("Failed pattern match at Data.Map.Internal (line 789, column 5 - line 793, column 46): "+[p.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 782, column 42 - line 793, column 46): "+[n.constructor.name,r.constructor.name])}}),X6=LD(781),$D=function(e){var t=Te(e);return function(n){return function(r){return function(p){return X6(t,n,r,p)}}}},V_=function(e){return $D(e)(me)};var HD=function(e){var t=Te(e);return function(n){return function(r){var p=ID(t,n,r);return J6(function(a){return new Z(a,RD(p.value1,p.value2))})(p.value0)}}};var ea=function(e){var t=Te(e);return function(n){var r=function(p){var a=!1,o;function l(u){if(u instanceof At)return a=!0,z.value;if(u instanceof kt){var i=t(n)(u.value2);if(i instanceof pe){p=u.value4;return}if(i instanceof se){p=u.value5;return}if(i instanceof qe)return a=!0,new N(u.value3);throw new Error("Failed pattern match at Data.Map.Internal (line 281, column 7 - line 284, column 22): "+[i.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 278, column 8 - line 284, column 22): "+[u.constructor.name])}for(;!a;)o=l(p);return o};return r}};var Y6=function(){var e=function(t){return function(n){var r=t,p=!1,a;function o(l,u){if(u instanceof At)return p=!0,l;if(u instanceof kt){if(u.value5 instanceof At){r=new xD(u.value2,u.value3,l),n=u.value4;return}r=new xD(u.value2,u.value3,new AD(u.value5,l)),n=u.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 929, column 13 - line 936, column 48): "+[u.constructor.name])}for(;!p;)a=o(r,n);return a}};return e}(),Z6=K6(Y6);var eq=function(){var e=function(t,n,r){return new N(new Z(new Z(t,n),r))};return Z6(e)(function(t){return z.value})}(),Gl=function(e){var t=ma(e)(eq);return function(n){return t(j6(n))}};var Gr=function(e){var t=Te(e);return function(n){return function(r){var p=function(a){if(a instanceof At)return wc(n)(r);if(a instanceof kt){var o=t(n)(a.value2);if(o instanceof pe)return wa(a.value2,a.value3,p(a.value4),a.value5);if(o instanceof se)return wa(a.value2,a.value3,a.value4,p(a.value5));if(o instanceof qe)return new kt(a.value0,a.value1,n,r,a.value4,a.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 469, column 7 - line 472, column 35): "+[o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 466, column 8 - line 472, column 35): "+[a.constructor.name])};return p}}},Jl={map:function(e){var t=function(n){if(n instanceof At)return At.value;if(n instanceof kt)return new kt(n.value0,n.value1,n.value2,e(n.value3),t(n.value4),t(n.value5));throw new Error("Failed pattern match at Data.Map.Internal (line 145, column 10 - line 148, column 39): "+[n.constructor.name])};return t}};var Gi={foldr:function(e){return function(t){var n=bc("go","Data.Map.Internal",function(){return function(p,a){if(p instanceof At)return a;if(p instanceof kt)return n(170)(p.value4,e(p.value3)(n(170)(p.value5,a)));throw new Error("Failed pattern match at Data.Map.Internal (line 167, column 26 - line 170, column 43): "+[p.constructor.name])}}),r=n(167);return function(p){return r(p,t)}}},foldl:function(e){return function(t){var n=bc("go","Data.Map.Internal",function(){return function(p,a){if(a instanceof At)return p;if(a instanceof kt)return n(176)(e(n(176)(p,a.value4))(a.value3),a.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 173, column 26 - line 176, column 43): "+[a.constructor.name])}}),r=n(173);return function(p){return r(t,p)}}},foldMap:function(e){var t=st(e),n=De(e.Semigroup0());return function(r){var p=function(a){if(a instanceof At)return t;if(a instanceof kt)return n(p(a.value4))(n(r(a.value3))(p(a.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 179, column 10 - line 182, column 28): "+[a.constructor.name])};return p}}},OD={foldrWithIndex:function(e){return function(t){var n=bc("go","Data.Map.Internal",function(){return function(p,a){if(p instanceof At)return a;if(p instanceof kt)return n(190)(p.value4,e(p.value2)(p.value3)(n(190)(p.value5,a)));throw new Error("Failed pattern match at Data.Map.Internal (line 187, column 26 - line 190, column 45): "+[p.constructor.name])}}),r=n(187);return function(p){return r(p,t)}}},foldlWithIndex:function(e){return function(t){var n=bc("go","Data.Map.Internal",function(){return function(p,a){if(a instanceof At)return p;if(a instanceof kt)return n(196)(e(a.value2)(n(196)(p,a.value4))(a.value3),a.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 193, column 26 - line 196, column 45): "+[a.constructor.name])}}),r=n(193);return function(p){return r(t,p)}}},foldMapWithIndex:function(e){var t=st(e),n=De(e.Semigroup0());return function(r){var p=function(a){if(a instanceof At)return t;if(a instanceof kt)return n(p(a.value4))(n(r(a.value2)(a.value3))(p(a.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 199, column 10 - line 202, column 30): "+[a.constructor.name])};return p}},Foldable0:function(){return Gi}},UA=function(){return Ml(OD)(function(e){return function(t){return function(n){return new Ye(e,n)}}})(Ze.value)}();var qd=function(){return vn(Gi)(Ye.create)(Ze.value)}();var Ya=function(e){var t=!1,n;function r(p){if(p instanceof At)return t=!0,z.value;if(p instanceof kt){if(p.value4 instanceof At)return t=!0,new N({key:p.value2,value:p.value3});e=p.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 359, column 11 - line 364, column 21): "+[p.constructor.name])}for(;!t;)n=r(e);return n};var ns=function(e){var t=!1,n;function r(p){if(p instanceof At)return t=!0,z.value;if(p instanceof kt){if(p.value5 instanceof At)return t=!0,new N({key:p.value2,value:p.value3});e=p.value5;return}throw new Error("Failed pattern match at Data.Map.Internal (line 350, column 11 - line 355, column 21): "+[p.constructor.name])}for(;!t;)n=r(e);return n};var _r=function(){return At.value}(),jl=function(e){var t=Gr(e);return function(n){return ln(n)(function(r){return function(p){return t(p.value0)(p.value1)(r)}})(_r)}};var Za=function(e){var t=Te(e);return function(n){var r=function(p){if(p instanceof At)return At.value;if(p instanceof kt){var a=t(n)(p.value2);if(a instanceof pe)return wa(p.value2,p.value3,r(p.value4),p.value5);if(a instanceof se)return wa(p.value2,p.value3,p.value4,r(p.value5));if(a instanceof qe)return RD(p.value4,p.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 496, column 7 - line 499, column 43): "+[a.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 493, column 8 - line 499, column 43): "+[p.constructor.name])};return r}};var rs=function(e){var t=Te(e);return function(n){return function(r){return function(p){var a=ID(t,r,p),o=n(a.value0);if(o instanceof z)return RD(a.value1,a.value2);if(o instanceof N)return wa(r,o.value0,a.value1,a.value2);throw new Error("Failed pattern match at Data.Map.Internal (line 512, column 3 - line 516, column 41): "+[o.constructor.name])}}}};var mr=function(){var e={},t="Pure",n="Throw",r="Catch",p="Sync",a="Async",o="Bind",l="Bracket",u="Fork",i="Sequential",s="Map",f="Apply",h="Alt",d="Cons",c="Resume",_="Release",m="Finalizer",v="Finalized",y="Forked",C="Fiber",S="Thunk";function D(B,Q,O,W){this.tag=B,this._1=Q,this._2=O,this._3=W}function g(B){var Q=function(O,W,U){return new D(B,O,W,U)};return Q.tag=B,Q}function b(B){return new D(t,void 0)}function x(B){try{B()}catch(Q){setTimeout(function(){throw Q},0)}}function E(B,Q,O){try{return Q(O())}catch(W){return B(W)}}function T(B,Q,O){try{return Q(O)()}catch(W){return O(B(W))(),b}}var M=function(){var B=1024,Q=0,O=0,W=new Array(B),U=!1;function k(){var te;for(U=!0;Q!==0;)Q--,te=W[O],W[O]=void 0,O=(O+1)%B,te();U=!1}return{isDraining:function(){return U},enqueue:function(te){var J,ye;Q===B&&(ye=U,k(),U=ye),W[(O+Q)%B]=te,Q++,U||k()}}}();function w(B){var Q={},O=0,W=0;return{register:function(U){var k=O++;U.onComplete({rethrow:!0,handler:function(te){return function(){W--,delete Q[k]}}})(),Q[k]=U,W++},isEmpty:function(){return W===0},killAll:function(U,k){return function(){if(W===0)return k();var te=0,J={};function ye(we){J[we]=Q[we].kill(U,function(ce){return function(){delete J[we],te--,B.isLeft(ce)&&B.fromLeft(ce)&&setTimeout(function(){throw B.fromLeft(ce)},0),te===0&&k()}})()}for(var Ae in Q)Q.hasOwnProperty(Ae)&&(te++,ye(Ae));return Q={},O=0,W=0,function(we){return new D(p,function(){for(var ce in J)J.hasOwnProperty(ce)&&J[ce]()})}}}}}var F=0,L=1,R=2,A=3,I=4,$=5,H=6;function P(B,Q,O){var W=0,U=F,k=O,te=null,J=null,ye=null,Ae=null,we=null,ce=0,xe=0,Rt=null,un=!0;function Jt(fe){for(var ae,j,ie;;)switch(ae=null,j=null,ie=null,U){case R:U=L;try{k=ye(k),Ae===null?ye=null:(ye=Ae._1,Ae=Ae._2)}catch(ze){U=$,te=B.left(ze),k=null}break;case A:B.isLeft(k)?(U=$,te=k,k=null):ye===null?U=$:(U=R,k=B.fromRight(k));break;case L:switch(k.tag){case o:ye&&(Ae=new D(d,ye,Ae)),ye=k._2,U=L,k=k._1;break;case t:ye===null?(U=$,k=B.right(k._1)):(U=R,k=k._1);break;case p:U=A,k=E(B.left,B.right,k._1);break;case a:U=I,k=T(B.left,k._1,function(ze){return function(){W===fe&&(W++,M.enqueue(function(){W===fe+1&&(U=A,k=ze,Jt(W))}))}});return;case n:U=$,te=B.left(k._1),k=null;break;case r:ye===null?we=new D(d,k,we,J):we=new D(d,k,new D(d,new D(c,ye,Ae),we,J),J),ye=null,Ae=null,U=L,k=k._1;break;case l:ce++,ye===null?we=new D(d,k,we,J):we=new D(d,k,new D(d,new D(c,ye,Ae),we,J),J),ye=null,Ae=null,U=L,k=k._1;break;case u:U=A,ae=P(B,Q,k._2),Q&&Q.register(ae),k._1&&ae.run(),k=B.right(ae);break;case i:U=L,k=G(B,Q,k._1);break}break;case $:if(ye=null,Ae=null,we===null)U=H,k=J||te||k;else switch(ae=we._3,ie=we._1,we=we._2,ie.tag){case r:J&&J!==ae&&ce===0?U=$:te&&(U=L,k=ie._2(B.fromLeft(te)),te=null);break;case c:J&&J!==ae&&ce===0||te?U=$:(ye=ie._1,Ae=ie._2,U=R,k=B.fromRight(k));break;case l:ce--,te===null&&(j=B.fromRight(k),we=new D(d,new D(_,ie._2,j),we,ae),(J===ae||ce>0)&&(U=L,k=ie._3(j)));break;case _:we=new D(d,new D(v,k,te),we,J),U=L,J&&J!==ae&&ce===0?k=ie._1.killed(B.fromLeft(J))(ie._2):te?k=ie._1.failed(B.fromLeft(te))(ie._2):k=ie._1.completed(B.fromRight(k))(ie._2),te=null,ce++;break;case m:ce++,we=new D(d,new D(v,k,te),we,J),U=L,k=ie._1;break;case v:ce--,U=$,k=ie._1,te=ie._2;break}break;case H:for(var he in Rt)Rt.hasOwnProperty(he)&&(un=un&&Rt[he].rethrow,x(Rt[he].handler(k)));Rt=null,J&&te?setTimeout(function(){throw B.fromLeft(te)},0):B.isLeft(k)&&un&&setTimeout(function(){if(un)throw B.fromLeft(k)},0);return;case F:U=L;break;case I:return}}function tt(fe){return function(){if(U===H)return un=un&&fe.rethrow,fe.handler(k)(),function(){};var ae=xe++;return Rt=Rt||{},Rt[ae]=fe,function(){Rt!==null&&delete Rt[ae]}}}function le(fe,ae){return function(){if(U===H)return ae(B.right(void 0))(),function(){};var j=tt({rethrow:!1,handler:function(){return ae(B.right(void 0))}})();switch(U){case F:J=B.left(fe),U=H,k=J,Jt(W);break;case I:J===null&&(J=B.left(fe)),ce===0&&(U===I&&(we=new D(d,new D(m,k(fe)),we,J)),U=$,k=null,te=null,Jt(++W));break;default:J===null&&(J=B.left(fe)),ce===0&&(U=$,k=null,te=null)}return j}}function ve(fe){return function(){var ae=tt({rethrow:!1,handler:fe})();return U===F&&Jt(W),ae}}return{kill:le,join:ve,onComplete:tt,isSuspended:function(){return U===F},run:function(){U===F&&(M.isDraining()?Jt(W):M.enqueue(function(){Jt(W)}))}}}function q(B,Q,O,W){var U=0,k={},te=0,J={},ye=new Error("[ParAff] Early exit"),Ae=null,we=e;function ce(tt,le,ve){var fe=le,ae=null,j=null,ie=0,he={},ze,at;e:for(;;)switch(ze=null,fe.tag){case y:if(fe._3===e&&(ze=k[fe._1],he[ie++]=ze.kill(tt,function(gt){return function(){ie--,ie===0&&ve(gt)()}})),ae===null)break e;fe=ae._2,j===null?ae=null:(ae=j._1,j=j._2);break;case s:fe=fe._2;break;case f:case h:ae&&(j=new D(d,ae,j)),ae=fe,fe=fe._1;break}if(ie===0)ve(B.right(void 0))();else for(at=0,ze=ie;at<ze;at++)he[at]=he[at]();return he}function xe(tt,le,ve){var fe,ae,j,ie,he,ze;for(B.isLeft(tt)?(fe=tt,ae=null):(ae=tt,fe=null);;){if(j=null,ie=null,he=null,ze=null,Ae!==null)return;if(le===null){W(fe||ae)();return}if(le._3!==e)return;switch(le.tag){case s:fe===null?(le._3=B.right(le._1(B.fromRight(ae))),ae=le._3):le._3=fe;break;case f:if(j=le._1._3,ie=le._2._3,fe){if(le._3=fe,he=!0,ze=te++,J[ze]=ce(ye,fe===j?le._2:le._1,function(){return function(){delete J[ze],he?he=!1:ve===null?xe(fe,null,null):xe(fe,ve._1,ve._2)}}),he){he=!1;return}}else{if(j===e||ie===e)return;ae=B.right(B.fromRight(j)(B.fromRight(ie))),le._3=ae}break;case h:if(j=le._1._3,ie=le._2._3,j===e&&B.isLeft(ie)||ie===e&&B.isLeft(j))return;if(j!==e&&B.isLeft(j)&&ie!==e&&B.isLeft(ie))fe=ae===j?ie:j,ae=null,le._3=fe;else if(le._3=ae,he=!0,ze=te++,J[ze]=ce(ye,ae===j?le._2:le._1,function(){return function(){delete J[ze],he?he=!1:ve===null?xe(ae,null,null):xe(ae,ve._1,ve._2)}}),he){he=!1;return}break}ve===null?le=null:(le=ve._1,ve=ve._2)}}function Rt(tt){return function(le){return function(){delete k[tt._1],tt._3=le,xe(le,tt._2._1,tt._2._2)}}}function un(){var tt=L,le=O,ve=null,fe=null,ae,j;e:for(;;)switch(ae=null,j=null,tt){case L:switch(le.tag){case s:ve&&(fe=new D(d,ve,fe)),ve=new D(s,le._1,e,e),le=le._2;break;case f:ve&&(fe=new D(d,ve,fe)),ve=new D(f,e,le._2,e),le=le._1;break;case h:ve&&(fe=new D(d,ve,fe)),ve=new D(h,e,le._2,e),le=le._1;break;default:j=U++,tt=$,ae=le,le=new D(y,j,new D(d,ve,fe),e),ae=P(B,Q,ae),ae.onComplete({rethrow:!1,handler:Rt(le)})(),k[j]=ae,Q&&Q.register(ae)}break;case $:if(ve===null)break e;ve._1===e?(ve._1=le,tt=L,le=ve._2,ve._2=e):(ve._2=le,le=ve,fe===null?ve=null:(ve=fe._1,fe=fe._2))}for(we=le,j=0;j<U;j++)k[j].run()}function Jt(tt,le){Ae=B.left(tt);var ve;for(var fe in J)if(J.hasOwnProperty(fe)){ve=J[fe];for(fe in ve)ve.hasOwnProperty(fe)&&ve[fe]()}J=null;var ae=ce(tt,we,le);return function(j){return new D(a,function(ie){return function(){for(var he in ae)ae.hasOwnProperty(he)&&ae[he]();return b}})}}return un(),function(tt){return new D(a,function(le){return function(){return Jt(tt,le)}})}}function G(B,Q,O){return new D(a,function(W){return function(){return q(B,Q,O,W)}})}return D.EMPTY=e,D.Pure=g(t),D.Throw=g(n),D.Catch=g(r),D.Sync=g(p),D.Async=g(a),D.Bind=g(o),D.Bracket=g(l),D.Fork=g(u),D.Seq=g(i),D.ParMap=g(s),D.ParApply=g(f),D.ParAlt=g(h),D.Fiber=P,D.Supervisor=w,D.Scheduler=M,D.nonCanceler=b,D}(),qA=mr.Pure,zA=mr.Throw;function VA(e){return function(t){return mr.Catch(e,t)}}function GA(e){return function(t){return t.tag===mr.Pure.tag?mr.Pure(e(t._1)):mr.Bind(t,function(n){return mr.Pure(e(n))})}}function JA(e){return function(t){return mr.Bind(e,t)}}function PD(e){return function(t){return mr.Fork(e,t)}}var jA=mr.Sync;function KA(e){return function(t){return mr.ParMap(e,t)}}function QA(e){return function(t){return mr.ParApply(e,t)}}var Sa=mr.Async;function G_(e){return function(t){return function(n){return mr.Bracket(e,t,n)}}}function XA(e,t){return function(){return mr.Fiber(e,null,t)}}var YA=function(){function e(n,r){return n===0&&typeof setImmediate<"u"?setImmediate(r):setTimeout(r,n)}function t(n,r){return n===0&&typeof clearImmediate<"u"?clearImmediate(r):clearTimeout(r)}return function(n,r){return mr.Async(function(p){return function(){var a=e(r,p(n()));return function(){return mr.Sync(function(){return n(t(r,a))})}}})}}(),ZA=mr.Seq;var oq=V(xu);var kD=function(e){return e};var ND=function(e){return e};var J_=function(e){return function(t){return e(t)}},j_=function(e){var t=V(e);return{map:function(n){return J_(t(oq(n)))}}};var tI=function(e){return{Applicative0:function(){return zd(e)},Bind1:function(){return K_(e)}}},K_=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return{bind:function(r){return function(p){return t(r)(Sn(function(a){return n(We.create(a))})(function(a){var o=p(a);return o}))}},Apply0:function(){return BD(e)}}},BD=function(e){var t=j_(e.Bind1().Apply0().Functor0());return{apply:wr(tI(e)),Functor0:function(){return t}}},zd=function(e){return{pure:function(){var t=X(e.Applicative0());return function(n){return kD(t(Oe.create(n)))}}(),Apply0:function(){return BD(e)}}};var nI=function(e){var t=tI(e);return{throwError:function(){var n=X(e.Applicative0());return function(r){return kD(n(We.create(r)))}}(),Monad0:function(){return t}}};var rI=function(e){var t=De(e);return function(n){var r=n.Bind1(),p=ee(r),a=X(n.Applicative0()),o=j_(r.Apply0().Functor0());return{alt:function(l){return function(u){return p(l)(function(i){if(i instanceof Oe)return a(new Oe(i.value0));if(i instanceof We)return p(u)(function(s){if(s instanceof Oe)return a(new Oe(s.value0));if(s instanceof We)return a(new We(t(i.value0)(s.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[s.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[i.constructor.name])})}},Functor0:function(){return o}}}};var aq=V(Dt);var WD=function(e){return e},oI=function(e){return e};var Q_={lift:function(e){var t=Qy(e)(N.create);return function(n){return WD(t(n))}}},iq=wt(Q_);var uq=function(e){var t=V(e);return{map:function(n){return function(r){return t(aq(n))(r)}}}},UD=function(e){return{Applicative0:function(){return VD(e)},Bind1:function(){return qD(e)}}},qD=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return{bind:function(r){return function(p){return t(r)(function(a){if(a instanceof z)return n(z.value);if(a instanceof N){var o=p(a.value0);return o}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[a.constructor.name])})}},Apply0:function(){return zD(e)}}},zD=function(e){var t=uq(e.Bind1().Apply0().Functor0());return{apply:wr(UD(e)),Functor0:function(){return t}}},VD=function(e){return{pure:function(){var t=X(e.Applicative0());return function(n){return WD(t(N.create(n)))}}(),Apply0:function(){return zD(e)}}};var aI=function(e){var t=yn(e),n=e.Monad0(),r=ee(n.Bind1()),p=X(n.Applicative0()),a=UD(n);return{tailRecM:function(o){var l=t(function(u){var i=o(u);return r(i)(function(s){return p(function(){if(s instanceof z)return new Bt(z.value);if(s instanceof N&&s.value0 instanceof Pt)return new Pt(s.value0.value0);if(s instanceof N&&s.value0 instanceof Bt)return new Bt(new N(s.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[s.constructor.name])}())})});return function(u){return WD(l(u))}},Monad0:function(){return a}}},iI=function(e){var t=e.Monad0(),n=iq(t),r=co(e),p=UD(t);return{state:function(a){return n(r(a))},Monad0:function(){return p}}};var cI=function(e){return e};var Ea=function(e){return e};var Kl={lift:function(e){return function(t){return cI(me(t))}}},cq=wt(Kl),lI=function(e){return function(t){return function(n){return e(t(n))}}},lq=function(e){return{map:function(){var t=V(e);return function(n){return lI(t(n))}}()}};var JD=function(e){var t=ht(e),n=lq(e.Functor0());return{apply:function(r){return function(p){return function(a){return t(r(a))(p(a))}}},Functor0:function(){return n}}},Ji=function(e){var t=ee(e),n=JD(e.Apply0());return{bind:function(r){return function(p){return function(a){return t(r(a))(function(o){var l=p(o);return l(a)})}}},Apply0:function(){return n}}};var Vd=function(e){var t=JD(e.Apply0());return{pure:function(){var n=X(e);return function(r){return cI(me(n(r)))}}(),Apply0:function(){return t}}},Y_=function(e){var t=Vd(e.Applicative0()),n=Ji(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},as=function(e){var t=Y_(e);return{ask:X(e.Applicative0()),Monad0:function(){return t}}};var ei=function(e){var t=e.Monad0(),n=Y_(t);return{liftEffect:function(){var r=cq(t),p=Le(e);return function(a){return r(p(a))}}(),Monad0:function(){return n}}},is=function(e){var t=e.Monad0(),n=wn(t.Bind1()),r=X(t.Applicative0()),p=yn(e),a=Y_(t);return{tailRecM:function(o){return function(l){var u=function(i){return function(s){var f=o(s);return n(r)(f(i))}};return function(i){return p(u(i))(l)}}},Monad0:function(){return a}}};var Sc=function(e){return e.sequential},Ki=function(e){return e.parallel};var pq=de(_e),hq=function(e){var t=Sc(e),n=Ki(e);return function(r){var p=ct(r);return function(a){var o=p(a);return function(l){var u=o(function(i){return n(l(i))});return function(i){return t(u(i))}}}}};var Ql=function(e){var t=hq(e);return function(n){var r=t(n);return function(p){return r(p)(pq)}}};var Ec=function(e){return e()};var hI=function(e){return e()};var _I=function(e){throw new Error(e)};var mI=function(){return _I};var yq=mI(),Dq=hI,tm=function(e){return Dq(function(){return yq(e)})};var Cq=function(e,t,n){var r=0,p;return function(a){if(r===2)return p;if(r===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return r=1,p=n(),r=2,p}},bq=X(rn),KD=ut(Pe),gI=V(Pe);var wq=function(e){return e},yI=PD(!1);var Sq={map:KA},$r={map:GA},Eq=V($r),QD=PD(!0),Tq=function(){var e=function(r){if(r instanceof Oe)return r.value0;if(r instanceof We)return tm("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[r.constructor.name])},t=function(r){if(r instanceof We)return r.value0;if(r instanceof Oe)return tm("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[r.constructor.name])},n=function(r){if(r instanceof We)return!0;if(r instanceof Oe)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[r.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:We.create,right:Oe.create}}(),DI=function(e){return XA(Tq,e)},CI=function(e){return function(){var n=DI(e)();return n.run(),n}},XD=function(e){return KD(CI(e))};var YD=function(e){return YA(Oe.create,e)},bI=function(e){return function(t){return G_(e)({killed:me(t),failed:me(t),completed:me(t)})}},wI={apply:QA,Functor0:function(){return Sq}};var ti={Applicative0:function(){return Jr},Bind1:function(){return Qt}},Qt={bind:JA,Apply0:function(){return ZD(0)}},Jr={pure:qA,Apply0:function(){return ZD(0)}},ZD=Cq("applyAff","Effect.Aff",function(){return{apply:wr(ti),Functor0:function(){return $r}}}),Mq=ZD(73),Xl=X(Jr),SI=ee(Qt);var xq=wn(Qt);var Gd=function(e){return function(t){return bI(Xl(void 0))(me(e))(me(t))}},eC=function(e){return bI(e)(me(Xl(void 0)))(Xl)};var us={parallel:ne,sequential:ZA,Apply0:function(){return Mq},Apply1:function(){return wI}},Fq=Ki(us),Tc={pure:function(e){return Fq(Xl(e))},Apply0:function(){return wI}};var Lq=Ql(us)(Tc)(mt);var Aq={append:function(e){return function(t){return function(n){return Lq([e(n),t(n)])}}}};var Dn={liftEffect:jA,Monad0:function(){return ti}},nm=Le(Dn),Mc=function(e){return wq(me(nm(e)))},Jd=function(e){return Sa(function(t){return gI(Mc)(e.join(t))})},EI={map:function(e){return function(t){return Ec(DI(Eq(e)(Jd(t))))}}};var jd=function(e){return function(t){return SI(nm(t.isSuspended))(function(n){return n?nm(KD(t.kill(e,me(bq(void 0))))):Sa(function(r){return gI(Mc)(t.kill(e,r))})})}};var Yl={throwError:zA,Monad0:function(){return ti}},TI={catchError:VA,MonadThrow0:function(){return Yl}},MI=Nd(TI);var xI=MI,Iq=function(e){return function(t){return CI(xq(function(n){return nm(e(n))})(MI(t)))}},Kd=function(e){return function(t){return KD(Iq(e)(t))}};var Qi={tailRecM:function(e){var t=function(n){return SI(e(n))(function(r){if(r instanceof Bt)return Xl(r.value0);if(r instanceof Pt)return t(r.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[r.constructor.name])})};return t},Monad0:function(){return ti}};var tC=me(Xl(void 0)),FI={mempty:tC,Semigroup0:function(){return Aq}};var Pq=function(e){var t=V(e);return{map:function(n){return function(r){return function(p){return t(function(a){return new Z(n(a.value0),a.value1)})(r(p))}}}}};var rC=function(e){return{Applicative0:function(){return Qd(e)},Bind1:function(){return oC(e)}}},oC=function(e){var t=ee(e.Bind1());return{bind:function(n){return function(r){return function(p){return t(n(p))(function(a){var o=r(a.value0);return o(a.value1)})}}},Apply0:function(){return AI(e)}}},AI=function(e){var t=Pq(e.Bind1().Apply0().Functor0());return{apply:wr(rC(e)),Functor0:function(){return t}}},Qd=function(e){var t=X(e.Applicative0());return{pure:function(n){return function(r){return t(new Z(n,r))}},Apply0:function(){return AI(e)}}};var II=function(e){var t=e.Monad0(),n=ee(t.Bind1()),r=X(t.Applicative0()),p=yn(e),a=rC(t);return{tailRecM:function(o){return function(l){var u=function(i){var s=o(i.value0);return n(s(i.value1))(function(f){return r(function(){if(f.value0 instanceof Pt)return new Pt(new Z(f.value0.value0,f.value1));if(f.value0 instanceof Bt)return new Bt(new Z(f.value0.value0,f.value1));throw new Error("Failed pattern match at Control.Monad.State.Trans (line 87, column 16 - line 89, column 40): "+[f.value0.constructor.name])}())})};return function(i){return p(u)(new Z(l,i))}}},Monad0:function(){return a}}},rm=function(e){var t=X(e.Applicative0()),n=rC(e);return{state:function(r){return function(p){return t(r(p))}},Monad0:function(){return n}}};var kq=wt(Kl);var ss={liftAff:de(_e),MonadEffect0:function(){return Dn}},Cn=function(e){return e.liftAff};var am=function(e){var t=e.MonadEffect0(),n=ei(t);return{liftAff:function(){var r=kq(t.Monad0()),p=Cn(e);return function(a){return r(p(a))}}(),MonadEffect0:function(){return n}}};var ni=function(e){return function(){console.log(e)}},Xd=function(e){return function(){console.warn(e)}};var kI=function(e){var t=Le(e);return function(n){return t(ni(n))}};var jq=Mt(Vn),Kq=Kt(Bu);var Zd=Kq(jq("background-color"));var r8=V(Dt);var aC=function(e){if(e instanceof Ze)return z.value;if(e instanceof Ye)return new N({head:e.value0,tail:e.value1});throw new Error("Failed pattern match at Data.List (line 259, column 1 - line 259, column 66): "+[e.constructor.name])},im=function(e){return ma(e)(function(t){return r8(function(n){return new Z(n.head,n.tail)})(aC(t))})};var Xi=function(){var e=function(t){return function(n){var r=t,p=!1,a;function o(l,u){if(u instanceof Ze)return p=!0,l;if(u instanceof Ye){r=new Ye(u.value0,l),n=u.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[l.constructor.name,u.constructor.name])}for(;!p;)a=o(r,n);return a}};return e(Ze.value)}();var BI=function(e){return e instanceof Ze};var um=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var WI=function(e){var t=!1,n;function r(p){if(p.value0 instanceof Ze&&p.value1 instanceof Ze)return t=!0,z.value;if(p.value0 instanceof Ze){e=new um(Xi(p.value1),Ze.value);return}if(p.value0 instanceof Ye)return t=!0,new N(new Z(p.value0.value0,new um(p.value0.value1,p.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[p.constructor.name])}for(;!t;)n=r(e);return n},UI=function(e){return function(t){return new um(e.value0,new Ye(t,e.value1))}};var qI=function(e){return e.value0 instanceof Ze&&e.value1 instanceof Ze};var zI=function(){return new um(Ze.value,Ze.value)}();var Zl=function(){function e(){}return e.value=new e,e}(),sm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var VI=function(e){return function(t){if(e instanceof Zl)return t;if(t instanceof Zl)return e;if(e instanceof sm)return new sm(e.value0,UI(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},i8=function(e){return function(t){return function(n){var r=function(a){return function(o){return function(l){var u=a,i=o,s=!1,f;function h(d,c,_){if(_ instanceof Ze)return s=!0,c;if(_ instanceof Ye){u=d,i=d(c)(_.value0),l=_.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[d.constructor.name,c.constructor.name,_.constructor.name])}for(;!s;)f=h(u,i,l);return f}}},p=function(a){return function(o){var l=a,u=!1,i;function s(f,h){var d=WI(f);if(d instanceof z)return u=!0,r(function(c){return function(_){return _(c)}})(t)(h);if(d instanceof N){l=d.value0.value1,o=new Ye(e(d.value0.value0),h);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[d.constructor.name])}for(;!u;)i=s(l,o);return i}};return p(n)(Ze.value)}}},GI=function(e){if(e instanceof Zl)return z.value;if(e instanceof sm)return new N(new Z(e.value0,function(){var t=qI(e.value1);return t?Zl.value:i8(VI)(Zl.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var JI=function(){return Zl.value}(),jI=VI;var KI={append:jI};var QI=function(e){return function(t){return jI(e)(new sm(t,zI))}};var s8=function(e,t,n){var r=0,p;return function(a){if(r===2)return p;if(r===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return r=1,p=n(),r=2,p}},c8=De(KI);var iC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ep=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),XI=function(e){var t=!1,n;function r(p){var a=function(u){return u},o=function(u){return function(i){return new iC(u.value0,c8(u.value1)(i))}};if(p.value0 instanceof ep){var l=GI(p.value1);if(l instanceof z)return t=!0,new ep(p.value0.value0);if(l instanceof N){e=o(a(l.value0.value0)(p.value0.value0))(l.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[l.constructor.name])}if(p.value0 instanceof tp)return t=!0,new tp(p.value0.value0,function(u){return o(p.value0.value1(u))(p.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[p.value0.constructor.name])}for(;!t;)n=r(e);return n},na=function(e){var t=V(e);return function(n){var r=n.Monad0(),p=V(r.Bind1().Apply0().Functor0()),a=X(r.Applicative0()),o=yn(n);return function(l){var u=function(i){var s=XI(i);if(s instanceof ep)return p(Bt.create)(a(s.value0));if(s instanceof tp)return p(Pt.create)(l(t(s.value1)(s.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[s.constructor.name])};return o(u)}}};var YI=function(e){return new iC(e,JI)};var ef={Applicative0:function(){return vr},Bind1:function(){return cr}},ri={map:function(e){return function(t){return wn(cr)(function(){var n=X(vr);return function(r){return n(e(r))}}())(t)}}},cr={bind:function(e){return function(t){return new iC(e.value0,QI(e.value1)(t))}},Apply0:function(){return uC(0)}},vr={pure:function(e){return YI(ep.create(e))},Apply0:function(){return uC(0)}},uC=s8("freeApply","Control.Monad.Free",function(){return{apply:wr(ef),Functor0:function(){return ri}}}),np=uC(77);var l8=X(vr);var dt=function(e){return YI(new tp(e,function(t){return l8(t)}))};var ZI=function(e){var t=e.Monad0(),n=V(t.Bind1().Apply0().Functor0()),r=X(t.Applicative0()),p=yn(e);return function(a){var o=function(l){var u=XI(l);if(u instanceof ep)return n(Bt.create)(r(u.value0));if(u instanceof tp)return n(function(i){return Pt.create(u.value1(i))})(a(u.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[u.constructor.name])};return p(o)}};function cm(e){return function(){return e.getContext("2d")}}function rp(e){return function(){return e.width}}function op(e){return function(){return e.height}}function ap(e){return function(t){return function(){e.width=t}}}function ip(e){return function(t){return function(){e.height=t}}}function sC(e){return function(){return e.toDataURL()}}function cC(e){return function(t){return function(){e.lineWidth=t}}}function lC(e){return function(t){return function(){e.setLineDash(t)}}}function fC(e){return function(t){return function(){e.fillStyle=t}}}function dC(e){return function(t){return function(){e.strokeStyle=t}}}function pC(e){return function(t){return function(){e.shadowColor=t}}}function hC(e){return function(t){return function(){e.shadowBlur=t}}}function _C(e){return function(t){return function(){e.shadowOffsetX=t}}}function mC(e){return function(t){return function(){e.shadowOffsetY=t}}}function vC(e){return function(t){return function(){e.miterLimit=t}}}function lm(e){return function(t){return function(){e.lineCap=t}}}function fm(e){return function(t){return function(){e.lineJoin=t}}}function eR(e){return function(t){return function(){e.globalCompositeOperation=t}}}function gC(e){return function(t){return function(){e.globalAlpha=t}}}function dm(e){return function(){e.beginPath()}}function pm(e){return function(){e.stroke()}}function hm(e){return function(){e.fill()}}function yC(e){return function(){e.clip()}}function DC(e){return function(t){return function(n){return function(){e.lineTo(t,n)}}}}function CC(e){return function(t){return function(n){return function(){e.moveTo(t,n)}}}}function bC(e){return function(){e.closePath()}}function wC(e){return function(t){return function(){e.arc(t.x,t.y,t.radius,t.start,t.end,t.useCounterClockwise)}}}function SC(e){return function(t){return function(){e.rect(t.x,t.y,t.width,t.height)}}}function EC(e){return function(t){return function(){e.fillRect(t.x,t.y,t.width,t.height)}}}function TC(e){return function(t){return function(){e.strokeRect(t.x,t.y,t.width,t.height)}}}function MC(e){return function(t){return function(){e.clearRect(t.x,t.y,t.width,t.height)}}}function xC(e){return function(t){return function(){e.scale(t.scaleX,t.scaleY)}}}function FC(e){return function(t){return function(){e.rotate(t)}}}function LC(e){return function(t){return function(){e.translate(t.translateX,t.translateY)}}}function AC(e){return function(t){return function(){e.transform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function IC(e){return function(t){return function(){e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function tR(e){return function(){return e.textAlign}}function nR(e){return function(t){return function(){e.textAlign=t}}}function rR(e){return function(){return e.textBaseline}}function oR(e){return function(t){return function(){e.textBaseline=t}}}function RC(e){return function(){return e.font}}function $C(e){return function(t){return function(){e.font=t}}}function HC(e){return function(t){return function(n){return function(r){return function(){e.fillText(t,n,r)}}}}}function OC(e){return function(t){return function(n){return function(r){return function(){e.strokeText(t,n,r)}}}}}function PC(e){return function(t){return function(){return e.measureText(t)}}}function _m(e){return function(){e.save()}}function mm(e){return function(){e.restore()}}function kC(e){return function(t){return function(n){return function(r){return function(p){return function(){return e.getImageData(t,n,r,p)}}}}}}function NC(e){return function(t){return function(n){return function(r){return function(p){return function(a){return function(o){return function(l){return function(){e.putImageData(t,n,r,p,a,o,l)}}}}}}}}}function BC(e){return function(t){return function(n){return function(r){return function(){e.putImageData(t,n,r)}}}}}function WC(e){return function(t){return function(n){return function(){return e.createImageData(t,n)}}}}function UC(e){return function(t){return function(n){return function(r){return function(){e.drawImage(t,n,r)}}}}}function qC(e){return function(t){return function(n){return function(r){return function(p){return function(a){return function(){e.drawImage(t,n,r,p,a)}}}}}}}function zC(e){return function(t){return function(n){return function(r){return function(p){return function(a){return function(o){return function(l){return function(u){return function(i){return function(){e.drawImage(t,n,r,p,a,o,l,u,i)}}}}}}}}}}}function aR(e){return function(t){return function(n){return function(){return e.createPattern(t,n)}}}}function VC(e){return function(t){return function(){e.fillStyle=t}}}function GC(e){return function(t){return function(){return e.createLinearGradient(t.x0,t.y0,t.x1,t.y1)}}}function JC(e){return function(t){return function(){return e.createRadialGradient(t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)}}}function jC(e){return function(t){return function(){e.fillStyle=t}}}function KC(e){return function(t){return function(){e.quadraticCurveTo(t.cpx,t.cpy,t.x,t.y)}}}function QC(e){return function(t){return function(){e.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x,t.y)}}}var d8=function(e){return Ec(vo(e))},XC=function(e){return d8(ar(e))};var iR=V(Pe),_8=Ur(i0),uR=function(){function e(){}return e.value=new e,e}(),sR=function(){function e(){}return e.value=new e,e}(),cR=function(){function e(){}return e.value=new e,e}(),lR=function(){function e(){}return e.value=new e,e}(),fR=function(){function e(){}return e.value=new e,e}(),dR=function(){function e(){}return e.value=new e,e}(),pR=function(){function e(){}return e.value=new e,e}(),hR=function(){function e(){}return e.value=new e,e}(),_R=function(){function e(){}return e.value=new e,e}(),mR=function(){function e(){}return e.value=new e,e}(),vR=function(){function e(){}return e.value=new e,e}(),m8=function(){function e(){}return e.value=new e,e}(),v8=function(){function e(){}return e.value=new e,e}(),g8=function(){function e(){}return e.value=new e,e}(),y8=function(){function e(){}return e.value=new e,e}(),D8=function(){function e(){}return e.value=new e,e}(),C8=function(){function e(){}return e.value=new e,e}(),b8=function(){function e(){}return e.value=new e,e}(),w8=function(){function e(){}return e.value=new e,e}(),S8=function(){function e(){}return e.value=new e,e}(),E8=function(){function e(){}return e.value=new e,e}(),T8=function(){function e(){}return e.value=new e,e}(),M8=function(){function e(){}return e.value=new e,e}(),x8=function(){function e(){}return e.value=new e,e}(),F8=function(){function e(){}return e.value=new e,e}(),L8=function(){function e(){}return e.value=new e,e}(),A8=function(){function e(){}return e.value=new e,e}(),I8=function(){function e(){}return e.value=new e,e}(),R8=function(){function e(){}return e.value=new e,e}(),$8=function(){function e(){}return e.value=new e,e}(),H8=function(){function e(){}return e.value=new e,e}(),O8=function(){function e(){}return e.value=new e,e}(),P8=function(){function e(){}return e.value=new e,e}(),k8=function(){function e(){}return e.value=new e,e}(),N8=function(){function e(){}return e.value=new e,e}(),B8=function(){function e(){}return e.value=new e,e}(),W8=function(){function e(){}return e.value=new e,e}(),U8=function(){function e(){}return e.value=new e,e}(),q8=function(){function e(){}return e.value=new e,e}(),z8=function(){function e(){}return e.value=new e,e}(),V8=function(){function e(){}return e.value=new e,e}(),G8=function(){function e(){}return e.value=new e,e}(),J8=function(){function e(){}return e.value=new e,e}(),j8=function(){function e(){}return e.value=new e,e}(),K8=function(){function e(){}return e.value=new e,e}(),Q8=function(){function e(){}return e.value=new e,e}(),X8=function(){function e(){}return e.value=new e,e}();var gR=function(e){var t=function(n){return n==="top"?uR.value:n==="hanging"?sR.value:n==="middle"?cR.value:n==="alphabetic"?lR.value:n==="ideographic"?fR.value:n==="bottom"?dR.value:XC("invalid TextBaseline: "+n)};return iR(t)(rR(e))},yR=function(e){var t=function(n){return n==="left"?pR.value:n==="right"?hR.value:n==="center"?_R.value:n==="start"?mR.value:n==="end"?vR.value:XC("invalid TextAlign: "+n)};return iR(t)(tR(e))};var DR=function(e){return function(t){var n=function(r){if(r instanceof uR)return"top";if(r instanceof sR)return"hanging";if(r instanceof cR)return"middle";if(r instanceof lR)return"alphabetic";if(r instanceof fR)return"ideographic";if(r instanceof dR)return"bottom";throw new Error("Failed pattern match at Graphics.Canvas (line 577, column 5 - line 577, column 33): "+[r.constructor.name])};return oR(e)(n(t))}},CR=function(e){return function(t){var n=function(r){if(r instanceof pR)return"left";if(r instanceof hR)return"right";if(r instanceof _R)return"center";if(r instanceof mR)return"start";if(r instanceof vR)return"end";throw new Error("Failed pattern match at Graphics.Canvas (line 531, column 5 - line 531, column 32): "+[r.constructor.name])};return nR(e)(n(t))}},bR=function(e){return function(t){if(t instanceof D8)return fm(e)("bevel");if(t instanceof C8)return fm(e)("round");if(t instanceof b8)return fm(e)("miter");throw new Error("Failed pattern match at Graphics.Canvas (line 253, column 1 - line 253, column 52): "+[e.constructor.name,t.constructor.name])}},wR=function(e){return function(t){if(t instanceof w8)return lm(e)("round");if(t instanceof S8)return lm(e)("square");if(t instanceof E8)return lm(e)("butt");throw new Error("Failed pattern match at Graphics.Canvas (line 238, column 1 - line 238, column 50): "+[e.constructor.name,t.constructor.name])}},SR=function(e){return function(t){var n=function(r){if(r instanceof T8)return"source-over";if(r instanceof M8)return"source-in";if(r instanceof x8)return"source-out";if(r instanceof F8)return"source-atop";if(r instanceof L8)return"destination-over";if(r instanceof A8)return"destination-in";if(r instanceof I8)return"destination-out";if(r instanceof R8)return"destination-atop";if(r instanceof $8)return"lighter";if(r instanceof H8)return"copy";if(r instanceof O8)return"xor";if(r instanceof P8)return"multiply";if(r instanceof k8)return"screen";if(r instanceof N8)return"overlay";if(r instanceof B8)return"darken";if(r instanceof W8)return"lighten";if(r instanceof U8)return"color-dodge";if(r instanceof q8)return"color-burn";if(r instanceof z8)return"hard-light";if(r instanceof V8)return"soft-light";if(r instanceof G8)return"difference";if(r instanceof J8)return"exclusion";if(r instanceof j8)return"hue";if(r instanceof K8)return"saturation";if(r instanceof Q8)return"color";if(r instanceof X8)return"luminosity";throw new Error("Failed pattern match at Graphics.Canvas (line 326, column 5 - line 326, column 45): "+[r.constructor.name])};return eR(e)(n(t))}},ER=function(e){return function(t){return _8(ip(e)(t.height))(ap(e)(t.width))}};var TR=function(e){return function(){var n=rp(e)(),r=op(e)();return{width:n,height:r}}};var MR=function(e){return function(t){return function(n){var r=function(p){if(p instanceof m8)return"repeat";if(p instanceof v8)return"repeat-x";if(p instanceof g8)return"repeat-y";if(p instanceof y8)return"no-repeat";throw new Error("Failed pattern match at Graphics.Canvas (line 677, column 5 - line 677, column 31): "+[p.constructor.name])};return aR(e)(t)(r(n))}}};var FR=e=>t=>()=>e.convertToBlob({type:"image/jpeg",quality:t});function LR(e){return function(t){return function(n){return function(){e.then(n,t)}}}}var t7=In();var YC=function(e){return t7(ND(e))};function vm(e){return typeof e}function gm(e){return Object.prototype.toString.call(e).slice(8,-1)}function up(e){return e===void 0}var IR=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var ym=function(){var e=q0(kA);return function(t){return TD(e(t))}}();var RR=function(e){return function(t){return new ao(e,new Ye(t.value0,t.value1))}};var ZC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var xc=ne,Cm=ne;var eb=function(e){var t=ir(nI(e));return function(n){return t(ym(n))}};var tb=function(e){var t=X(zd(e)),n=eb(e);return function(r){return function(p){if(gm(p)===r)return t(Cm(p));if(_n)return n(new ZC(r,gm(p)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[r.constructor.name,p.constructor.name])}}};var bm=function(e){return tb(e)("String")};var o7=Uh(Pe),a7=st(FI),i7=de(_e),u7=On(rI(PA)(Er)),s7=tb(Er),c7=V(j_(Li)),l7=bm(Er),f7=ee(Qt),d7=Le(Dn),p7=function(e){return function(t){return Sa(function(n){return o7(a7)(LR(t)(function(r){return n(We.create(e(r)))()})(function(r){return n(Oe.create(r))()}))})}};var h7=function(e){return Sn(function(t){return ar("Promise failed, couldn't extract JS Error or String")})(i7)(YC(u7(s7("Error")(e))(c7(ar)(l7(e)))))},_7=p7(h7),ls=function(e){return f7(d7(e))(_7)};var HR=function(e){return function(t){return ls(FR(e)(t))}};var wm=function(e){return function(t){return t[e]}},v7=wm("namespaceURI"),g7=wm("prefix"),y7=wm("localName"),D7=wm("tagName");function tf(e){return function(){return e.scrollTop}}function sp(e){return function(t){return function(){t.scrollTop=e}}}function rb(e){return function(){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}}function OR(e,t,n){return e==null?t:n(e)}function ob(e){return e}var Ma=Ke(null)(ob),dn=function(e){return OR(e,z.value,N.create)};var Sm=function(e){return function(t){return function(){return t[e]}}},w7=Sm("children"),S7=Sm("firstElementChild"),E7=Sm("lastElementChild"),T7=Sm("childElementCount");function PR(e){return function(t){return function(){return t.querySelector(e)}}}var x7=V(Pe);var kR=function(e){var t=x7(dn),n=PR(e);return function(r){return t(n(r))}};var ab=ne;var $7=wt(Kl),Do=V(Pe),BR=nt(rt),H7=V($r),nw=de(_e),O7=function(e){return e},ub=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Em=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Tm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Mm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),db=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),gb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Db=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),bb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Am=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Im=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Sb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$m=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Eb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Tb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Mb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Om=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Pm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),km=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ab=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ib=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$b=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ob=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Nm=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),kb=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),Nb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Wm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wb=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),Ub=function(){function e(t,n,r,p){this.value0=t,this.value1=n,this.value2=r,this.value3=p}return e.create=function(t){return function(n){return function(r){return function(p){return new e(t,n,r,p)}}}},e}(),qb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vb=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),Gb=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),Jb=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),jb=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),Kb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Yb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Zb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ew=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),P7=function(e){return e};var WR=ri,k7=function(e){var t=V(e);return{map:function(n){return function(r){if(r instanceof ub)return new ub(t(n)(r.value0));if(r instanceof Em)return new Em(function(p){return n(r.value0(p))});if(r instanceof sb)return new sb(r.value0,n(r.value1));if(r instanceof Tm)return new Tm(function(p){return n(r.value0(p))});if(r instanceof cb)return new cb(r.value0,n(r.value1));if(r instanceof lb)return new lb(function(p){return n(r.value0(p))});if(r instanceof fb)return new fb(r.value0,n(r.value1));if(r instanceof Mm)return new Mm(function(p){return n(r.value0(p))});if(r instanceof db)return new db(function(p){return n(r.value0(p))});if(r instanceof xm)return new xm(r.value0,n(r.value1));if(r instanceof pb)return new pb(r.value0,n(r.value1));if(r instanceof Fm)return new Fm(r.value0,n(r.value1));if(r instanceof Lm)return new Lm(r.value0,n(r.value1));if(r instanceof hb)return new hb(r.value0,n(r.value1));if(r instanceof _b)return new _b(r.value0,n(r.value1));if(r instanceof mb)return new mb(r.value0,n(r.value1));if(r instanceof vb)return new vb(r.value0,n(r.value1));if(r instanceof gb)return new gb(r.value0,n(r.value1));if(r instanceof yb)return new yb(r.value0,n(r.value1));if(r instanceof Db)return new Db(r.value0,n(r.value1));if(r instanceof Cb)return new Cb(r.value0,n(r.value1));if(r instanceof bb)return new bb(r.value0,n(r.value1));if(r instanceof Am)return new Am(n(r.value0));if(r instanceof Im)return new Im(n(r.value0));if(r instanceof wb)return new wb(n(r.value0));if(r instanceof Sb)return new Sb(n(r.value0));if(r instanceof Rm)return new Rm(r.value0,n(r.value1));if(r instanceof $m)return new $m(r.value0,n(r.value1));if(r instanceof Eb)return new Eb(n(r.value0));if(r instanceof Tb)return new Tb(r.value0,n(r.value1));if(r instanceof Mb)return new Mb(r.value0,n(r.value1));if(r instanceof Hm)return new Hm(r.value0,n(r.value1));if(r instanceof xb)return new xb(r.value0,n(r.value1));if(r instanceof Om)return new Om(r.value0,n(r.value1));if(r instanceof Fb)return new Fb(r.value0,n(r.value1));if(r instanceof Pm)return new Pm(r.value0,n(r.value1));if(r instanceof km)return new km(r.value0,n(r.value1));if(r instanceof Lb)return new Lb(r.value0,n(r.value1));if(r instanceof Ab)return new Ab(r.value0,n(r.value1));if(r instanceof Ib)return new Ib(function(p){return n(r.value0(p))});if(r instanceof Rb)return new Rb(r.value0,n(r.value1));if(r instanceof $b)return new $b(function(p){return n(r.value0(p))});if(r instanceof Hb)return new Hb(r.value0,n(r.value1));if(r instanceof Ob)return new Ob(function(p){return n(r.value0(p))});if(r instanceof Pb)return new Pb(r.value0,n(r.value1));if(r instanceof Nm)return new Nm(r.value0,r.value1,n(r.value2));if(r instanceof kb)return new kb(r.value0,r.value1,n(r.value2));if(r instanceof Nb)return new Nb(r.value0,function(p){return n(r.value1(p))});if(r instanceof Bm)return new Bm(n(r.value0));if(r instanceof Wm)return new Wm(n(r.value0));if(r instanceof Bb)return new Bb(r.value0,function(p){return n(r.value1(p))});if(r instanceof Wb)return new Wb(r.value0,r.value1,n(r.value2));if(r instanceof Ub)return new Ub(r.value0,r.value1,r.value2,n(r.value3));if(r instanceof qb)return new qb(r.value0,function(p){return n(r.value1(p))});if(r instanceof zb)return new zb(function(p){return n(r.value0(p))});if(r instanceof Vb)return new Vb(r.value0,r.value1,n(r.value2));if(r instanceof Gb)return new Gb(r.value0,r.value1,n(r.value2));if(r instanceof Jb)return new Jb(r.value0,r.value1,n(r.value2));if(r instanceof jb)return new jb(r.value0,r.value1,function(p){return n(r.value2(p))});if(r instanceof Kb)return new Kb(r.value0,n(r.value1));if(r instanceof Qb)return new Qb(r.value0,function(p){return n(r.value1(p))});if(r instanceof Xb)return new Xb(r.value0,function(p){return n(r.value1(p))});if(r instanceof Yb)return new Yb(r.value0,n(r.value1));if(r instanceof Zb)return new Zb(r.value0,n(r.value1));if(r instanceof ew)return new ew(r.value0,n(r.value1));if(r instanceof tw)return new tw(r.value0,function(p){return n(r.value1(p))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 582, column 1 - line 648, column 64): "+[n.constructor.name,r.constructor.name])}}}},ai=cr,NR=BR(ai),N7=ee(ai);var rw=vr,B7=X(rw),UR=function(e){var t=e.MonadEffect0(),n=t.Monad0(),r=$7(n),p=n.Bind1(),a=Ji(p),o=ee(a),l=Ir(as(n)),u=Le(ei(t)),i=BR(a),s=X(Vd(n.Applicative0())),f=Cn(am(e)),h=na(k7(p.Apply0().Functor0()));return function(d){var c=function(m){if(m instanceof ub)return r(m.value0);if(m instanceof Em)return o(l)(function(v){return u(Do(m.value0)(rp(v.canvasElement)))});if(m instanceof sb)return o(l)(function(v){return i(u(ap(v.canvasElement)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Tm)return o(l)(function(v){return u(Do(m.value0)(op(v.canvasElement)))});if(m instanceof cb)return o(l)(function(v){return i(u(ip(v.canvasElement)(m.value0)))(function(){return s(m.value1)})});if(m instanceof lb)return o(l)(function(v){return u(Do(m.value0)(TR(v.canvasElement)))});if(m instanceof fb)return o(l)(function(v){return i(u(ER(v.canvasElement)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Mm)return o(l)(function(v){return u(Do(m.value0)(rb(v.canvasElement)))});if(m instanceof db)return o(l)(function(v){return u(Do(m.value0)(sC(v.canvasElement)))});if(m instanceof xm)return o(l)(function(v){return i(u(cC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof pb)return o(l)(function(v){return i(u(lC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Fm)return o(l)(function(v){return i(u(fC(v.context2D)(Rl(m.value0))))(function(){return s(m.value1)})});if(m instanceof Lm)return o(l)(function(v){return i(u(dC(v.context2D)(Rl(m.value0))))(function(){return s(m.value1)})});if(m instanceof hb)return o(l)(function(v){return i(u(hC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof _b)return o(l)(function(v){return i(u(_C(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof mb)return o(l)(function(v){return i(u(mC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof vb)return o(l)(function(v){return i(u(pC(v.context2D)(Rl(m.value0))))(function(){return s(m.value1)})});if(m instanceof gb)return o(l)(function(v){return i(u(vC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof yb)return o(l)(function(v){return i(u(wR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Db)return o(l)(function(v){return i(u(bR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Cb)return o(l)(function(v){return i(u(SR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof bb)return o(l)(function(v){return i(u(gC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Am)return o(l)(function(v){return i(u(dm(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Im)return o(l)(function(v){return i(u(pm(v.context2D)))(function(){return s(m.value0)})});if(m instanceof wb)return o(l)(function(v){return i(u(hm(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Sb)return o(l)(function(v){return i(u(yC(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Rm)return o(l)(function(v){return i(u(DC(v.context2D)(m.value0.x)(m.value0.y)))(function(){return s(m.value1)})});if(m instanceof $m)return o(l)(function(v){return i(u(CC(v.context2D)(m.value0.x)(m.value0.y)))(function(){return s(m.value1)})});if(m instanceof Eb)return o(l)(function(v){return i(u(bC(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Tb)return o(l)(function(v){return i(u(wC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Mb)return o(l)(function(v){return i(u(SC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Hm)return o(l)(function(v){return i(u(EC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof xb)return o(l)(function(v){return i(u(TC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Om)return o(l)(function(v){return i(u(MC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Fb)return o(l)(function(v){return i(u(xC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Pm)return o(l)(function(v){return i(u(FC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof km)return o(l)(function(v){return i(u(LC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Lb)return o(l)(function(v){return i(u(AC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Ab)return o(l)(function(v){return i(u(IC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Ib)return o(l)(function(v){return u(Do(m.value0)(yR(v.context2D)))});if(m instanceof Rb)return o(l)(function(v){return i(u(CR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof $b)return o(l)(function(v){return u(Do(m.value0)(gR(v.context2D)))});if(m instanceof Hb)return o(l)(function(v){return i(u(DR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Ob)return o(l)(function(v){return u(Do(function(y){return m.value0(O7(y))})(RC(v.context2D)))});if(m instanceof Pb)return o(l)(function(v){return i(u($C(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Nm)return o(l)(function(v){return i(u(HC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof kb)return o(l)(function(v){return i(u(OC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof Nb)return o(l)(function(v){return u(Do(m.value1)(PC(v.context2D)(m.value0)))});if(m instanceof Bm)return o(l)(function(v){return i(u(_m(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Wm)return o(l)(function(v){return i(u(mm(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Bb)return o(l)(function(v){return u(Do(m.value1)(kC(v.context2D)(m.value0.x)(m.value0.y)(m.value0.width)(m.value0.height)))});if(m instanceof Wb)return o(l)(function(v){return i(u(BC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof Ub)return o(l)(function(v){return i(u(NC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)(m.value2.x)(m.value2.y)(m.value2.width)(m.value2.height)))(function(){return s(m.value3)})});if(m instanceof qb)return o(l)(function(v){return u(Do(m.value1)(WC(v.context2D)(m.value0.width)(m.value0.height)))});if(m instanceof zb)return o(l)(function(v){return s(m.value0(v.canvasElement))});if(m instanceof Vb)return o(l)(function(v){return i(u(UC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof Gb)return o(l)(function(v){return i(u(qC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)(m.value1.width)(m.value1.height)))(function(){return s(m.value2)})});if(m instanceof Jb)return o(l)(function(v){return i(u(zC(v.context2D)(m.value0)(m.value1.source.x)(m.value1.source.y)(m.value1.source.width)(m.value1.source.height)(m.value1.target.x)(m.value1.target.y)(m.value1.target.width)(m.value1.target.height)))(function(){return s(m.value2)})});if(m instanceof jb)return o(l)(function(v){return u(Do(m.value2)(MR(v.context2D)(m.value0)(m.value1)))});if(m instanceof Kb)return o(l)(function(v){return i(u(VC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Qb)return o(l)(function(v){return u(Do(m.value1)(GC(v.context2D)(m.value0)))});if(m instanceof Xb)return o(l)(function(v){return u(Do(m.value1)(JC(v.context2D)(m.value0)))});if(m instanceof Yb)return o(l)(function(v){return i(u(jC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Zb)return o(l)(function(v){return i(u(KC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof ew)return o(l)(function(v){return i(u(QC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof tw)return o(l)(function(v){return f(H7(m.value1)(HR(v.canvasElement)(m.value0)))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 61, column 5 - line 61, column 25): "+[m.constructor.name])},_=h(is(d))(c);return function(m){return _(function(v){return v}(m))}}};var Hr=function(e){return P7(dt(e))},qR=function(e){return Hr(new Rm(e,void 0))};var zR=function(e){return Hr(new $m(e,void 0))};var W7=function(){return Hr(new Wm(void 0))}(),VR=function(e){return Hr(new Pm(e,void 0))},U7=function(){return Hr(new Bm(void 0))}(),Um=function(e){return NR(U7)(function(){return N7(e)(function(t){return NR(W7)(function(){return B7(t)})})})};var Fc=function(e){return Hr(new Fm(e,void 0))};var GR=function(e){return Hr(new xm(e,void 0))};var ow=function(e){return Hr(new Lm(e,void 0))};var JR=function(){return Hr(new Im(void 0))}();var jR=function(e){return Hr(new km(e,void 0))};var qm=function(){return Hr(new Em(nw))}();var zm=function(){return Hr(new Tm(nw))}();var KR=function(){return Hr(new Mm(nw))}(),aw=function(e){return function(t){return Hr(new Nm(e,t,void 0))}},lp=function(e){return Hr(new Hm(e,void 0))};var Vm=function(e){return Hr(new Om(e,void 0))};var QR=function(){return Hr(new Am(void 0))}();var q7=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var XR=function(e){return function(t){return Qa(function(n){return e(n.value0)(n.value1)})(t)}};var YR=function(e){return function(t){return rD(new q7(e,t))}},iw={map:function(e){return function(t){return Qa(function(n){return YR(function(r){return e(n.value0(r))})(n.value1)})(t)}}};var ZR=YR(de(_e));var V7=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}();var Gm=function(e){return V7.create(Ie(e.Eq0()))(Te(e))},G7={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},e$={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return G7}};var cw=bl(Vt)(e$);var Q7=HD(cw),X7=ea(cw),Y7=Gr(cw);var Jm=function(){return function(e){var t=qn(e);return function(n){var r=Gm(n);return function(p){return function(a){return function(o){return Q7(new Z(t(p),r(a)))(o)}}}}}},jm=function(){return function(e){var t=qn(e);return function(n){var r=Gm(n);return function(p){return function(a){return function(o){return X7(new Z(t(p),r(a)))(o)}}}}}},Km=function(){return function(e){var t=qn(e);return function(n){var r=Gm(n);return function(p){return function(a){return function(o){return function(l){return Y7(new Z(t(p),r(a)))(o)(l)}}}}}}},Qm=function(e){var t=ct(e)(Gi);return function(n){return function(r){return t(function(p){return r(p)})(n)}}},fs=_r;var t$=function(){function e(){}return e.value=new e,e}(),rf=function(){function e(){}return e.value=new e,e}(),n$=function(){function e(){}return e.value=new e,e}(),r$=function(){function e(){}return e.value=new e,e}(),o$=function(){function e(){}return e.value=new e,e}(),a$=function(){function e(){}return e.value=new e,e}(),i$=function(){function e(){}return e.value=new e,e}(),u$=function(){function e(){}return e.value=new e,e}(),s$=function(){function e(){}return e.value=new e,e}(),c$=function(){function e(){}return e.value=new e,e}(),l$=function(){function e(){}return e.value=new e,e}(),f$=function(){function e(){}return e.value=new e,e}(),d$=function(){function e(){}return e.value=new e,e}(),p$=function(){function e(){}return e.value=new e,e}(),h$=function(){function e(){}return e.value=new e,e}(),_$=function(){function e(){}return e.value=new e,e}(),m$=function(){function e(){}return e.value=new e,e}(),v$=function(){function e(){}return e.value=new e,e}(),g$=function(){function e(){}return e.value=new e,e}(),y$=function(){function e(){}return e.value=new e,e}(),D$=function(){function e(){}return e.value=new e,e}(),C$=function(){function e(){}return e.value=new e,e}(),b$=function(e){if(e instanceof t$)return"button";if(e instanceof rf)return"checkbox";if(e instanceof n$)return"color";if(e instanceof r$)return"date";if(e instanceof o$)return"datetime-local";if(e instanceof a$)return"email";if(e instanceof i$)return"file";if(e instanceof u$)return"hidden";if(e instanceof s$)return"image";if(e instanceof c$)return"month";if(e instanceof l$)return"number";if(e instanceof f$)return"password";if(e instanceof d$)return"radio";if(e instanceof p$)return"range";if(e instanceof h$)return"reset";if(e instanceof _$)return"search";if(e instanceof m$)return"submit";if(e instanceof v$)return"tel";if(e instanceof g$)return"text";if(e instanceof y$)return"time";if(e instanceof D$)return"url";if(e instanceof C$)return"week";throw new Error("Failed pattern match at DOM.HTML.Indexed.InputType (line 33, column 19 - line 55, column 22): "+[e.constructor.name])};var Xm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Fn=function(){function e(t,n,r,p){this.value0=t,this.value1=n,this.value2=r,this.value3=p}return e.create=function(t){return function(n){return function(r){return function(p){return new e(t,n,r,p)}}}},e}(),pp=ne,Co=function(e,t){return e.value2(e.value1,t)},Ln=ne,bo=function(e){return e.value3(e.value1)},Or=pp(function(e){return e.value0});var S$=V(vt),hz=V(Ri);var ds=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yi=function(){function e(t,n,r,p){this.value0=t,this.value1=n,this.value2=r,this.value3=p}return e.create=function(t){return function(n){return function(r){return function(p){return new e(t,n,r,p)}}}},e}(),ps=function(){function e(t,n,r,p){this.value0=t,this.value1=n,this.value2=r,this.value3=p}return e.create=function(t){return function(n){return function(r){return function(p){return new e(t,n,r,p)}}}},e}(),hs=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Zi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_z=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),E$=function(e){return function(t){return e(t)}};var mz=ne;var vz={bimap:function(e){return function(t){return E$(function(n){return mz(new _z(function(r){return e(n.value0(r))},function(r){return t(n.value1(r))},n.value2))})}}},gz=Lo(vz);var Ac=E$(function(e){var t=function(n){if(n instanceof ds)return new ds(n.value0);if(n instanceof Yi)return new Yi(n.value0,n.value1,e.value0(n.value2),S$(t)(n.value3));if(n instanceof ps)return new ps(n.value0,n.value1,e.value0(n.value2),S$(hz(t))(n.value3));if(n instanceof hs)return new hs(e.value1(n.value0));if(n instanceof Zi)return new Zi(gz(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function Ic(e,t){return t[e]}function fw(e,t){return t.hasOwnProperty(e)}function eu(e,t,n){n[e]=t}function dw(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(r,e[r]));return n}function pw(e,t){for(var n=0;n<e.length;n++)t(e[n])}function hw(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var p=n[r];t(p,e[p])}}function _w(e,t,n,r,p){for(var a=[],o=e.length,l=t.length,u=0;;){if(u<o)u<l?a.push(n(u,e[u],t[u])):r(u,e[u]);else if(u<l)a.push(p(u,t[u]));else break;u++}return a}function hp(e,t,n){for(var r={},p=0;p<e.length;p++){var a=e[p],o=t(a);r[o]=n(o,p,a)}return r}function _p(e,t,n,r,p,a){for(var o={},l=0;l<t.length;l++){var u=t[l],i=n(u);e.hasOwnProperty(i)?o[i]=r(i,l,e[i],u):o[i]=a(i,l,u)}for(var i in e)i in o||p(i,e[i]);return o}function Rc(e,t){return e===t}function mw(e,t){return t.createTextNode(e)}function vw(e,t){t.textContent=e}function Zm(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function _s(e,t,n){var r=n.childNodes.item(e)||null;r!==t&&n.insertBefore(t,r)}function mp(e,t){t&&e.parentNode===t&&t.removeChild(e)}function vp(e){return e.parentNode}function ev(e,t,n,r){e!=null?r.setAttributeNS(e,t,n):r.setAttribute(t,n)}function tv(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function gw(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function yw(e,t,n){n.addEventListener(e,t,!1)}function Dw(e,t,n){n.removeEventListener(e,t,!1)}var Cw=void 0;var gp=function(){return{}};function bw(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var ww=Ic,Sw=ne,Ew=eu,Tw=gp;var yp=function(e,t,n){var r=0,p;return function(a){if(r===2)return p;if(r===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return r=1,p=n(),r=2,p}};var xw=function(e){return bo(e.widget)},Fw=yp("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Zi)return Fw(291)(e,Ac(t.value0));if(t instanceof hs){var n=Co(e.widget,t.value0),r=pp(function(p){return Ln(new Fn(p.value0,{build:e.build,widget:n},Fw(296),xw))})(n);return r}return xw(e),e.build(t)}}),wz=Fw(286),nv=function(e){var t=vp(e.node);return mp(e.node,t)},rv=yp("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Zi)return rv(82)(e,Ac(t.value0));if(t instanceof ds){if(e.value===t.value0)return Ln(new Fn(e.node,e,rv(85),nv));if(_n){var n={build:e.build,node:e.node,value:t.value0};return vw(t.value0,e.node),Ln(new Fn(e.node,n,rv(89),nv))}}return nv(e),e.build(t)}}),Sz=rv(77),ov=function(e){var t=vp(e.node);return mp(e.node,t),hw(e.children,function(n,r){return bo(r)}),bo(e.attrs)},av=function(e){var t=vp(e.node);return mp(e.node,t),pw(e.children,bo),bo(e.attrs)},M$=function(e,t,n,r){var p=t===r;return p?e instanceof N&&n instanceof N&&e.value0===n.value0||e instanceof z&&n instanceof z:!1},iv=yp("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Zi)return iv(135)(e,Ac(t.value0));if(t instanceof Yi&&M$(e.ns,e.name,t.value0,t.value1)){var n=tr(t.value3),r=tr(e.children);if(r===0&&n===0){var u=Co(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:e.children};return Ln(new Fn(e.node,i,iv(149),av))}var p=function(s,f){return bo(f)},a=function(s,f,h){var d=Co(f,h);return _s(s,Or(d),e.node),d},o=function(s,f){var h=e.build(f);return _s(s,Or(h),e.node),h},l=_w(e.children,t.value3,a,p,o),u=Co(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:l};return Ln(new Fn(e.node,i,iv(172),av))}return av(e),e.build(t)}}),Ez=iv(130),uv=yp("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Zi)return uv(222)(e,Ac(t.value0));if(t instanceof ps&&M$(e.ns,e.name,t.value0,t.value1)){var n=tr(t.value3);if(e.length===0&&n===0){var l=Co(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:e.children,length:0};return Ln(new Fn(e.node,u,uv(237),ov))}var r=function(i,s){return bo(s)},p=function(i,s,f,h){var d=Co(f,h.value1);return _s(s,Or(d),e.node),d},a=function(i,s,f){var h=e.build(f.value1);return _s(s,Or(h),e.node),h},o=_p(e.children,t.value3,rr,p,r,a),l=Co(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:o,length:n};return Ln(new Fn(e.node,u,uv(261),ov))}return ov(e),e.build(t)}}),Tz=uv(217),Mz=function(e,t,n){var r=e.buildWidget(e)(n),p=pp(function(a){return Ln(new Fn(a.value0,{build:t,widget:r},wz,xw))})(r);return p},xz=function(e,t,n){var r=mw(n,e.document),p={build:t,node:r,value:n};return Ln(new Fn(r,p,Sz,nv))},Fz=function(e,t,n,r,p,a){var o=Zm(Ma(n),r,e.document),l=ab(o),u=function(h,d,c){var _=t(c.value1);return _s(d,Or(_),l),_},i=hp(a,rr,u),s=e.buildAttributes(o)(p),f={build:t,node:l,attrs:s,ns:n,name:r,children:i,length:tr(a)};return Ln(new Fn(l,f,Tz,ov))},Lz=function(e,t,n,r,p,a){var o=Zm(Ma(n),r,e.document),l=ab(o),u=function(h,d){var c=t(d);return _s(h,Or(c),l),c},i=dw(a,u),s=e.buildAttributes(o)(p),f={build:t,node:l,attrs:s,ns:n,name:r,children:i};return Ln(new Fn(l,f,Ez,av))},Dp=function(e){var t=yp("build","Halogen.VDom.DOM",function(){return function(r){if(r instanceof ds)return xz(e,t(59),r.value0);if(r instanceof Yi)return Lz(e,t(60),r.value0,r.value1,r.value2,r.value3);if(r instanceof ps)return Fz(e,t(61),r.value0,r.value1,r.value2,r.value3);if(r instanceof hs)return Mz(e,t(62),r.value0);if(r instanceof Zi)return t(63)(Ac(r.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[r.constructor.name])}}),n=t(58);return n};function Iw(e){return e()}function F$(e){return function(t){return function(n){return function(r){var p=n;function a(l){return function(u){return t(u)(l)(r[l])}}for(var o in r)hasOwnProperty.call(r,o)&&(p=e(p)(a(o)));return p}}}}function L$(e,t,n,r){return n in r?t(r[n]):e}function Rw(e){return function(t){var n=[];for(var r in t)hasOwnProperty.call(t,r)&&n.push(e(r)(t[r]));return n}}var Az=Object.keys||Rw(function(e){return function(){return e}});var $z=ut(Xs);var sv=function(){return Au(L$)(z.value)(N.create)}();var Cp=function(e){var t=Oi(e);return function(n){return Iw(function(){var p=gp();return dd(t(n))(function(a){return $z(bw(a.value0)(a.value1)(p))})(),p})}};var Hz=F$(zM),A$=function(e){var t=De(e.Semigroup0()),n=st(e);return function(r){return Hz(function(p){return function(a){return function(o){return t(p)(r(a)(o))}}})(n)}};function bp(e){return function(){return function(t){return e(t)()}}}function Hw(e){return function(t){return function(n){return function(r){return function(){return r.addEventListener(e,t,n)}}}}}function Ow(e){return function(t){return function(n){return function(r){return function(){return r.removeEventListener(e,t,n)}}}}}var Oz=function(e,t,n){var r=0,p;return function(a){if(r===2)return p;if(r===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return r=1,p=n(),r=2,p}};var kw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tu=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),vs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),gs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$c=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pz=Ic,Pw=eu,kz=function(e,t){var n=gw(null,e,t);if(n)return tv(null,e,t);var r=vm(Ic(e,t));return r==="string"?eu(e,"",t):e==="rowSpan"?eu(e,1,t):e==="colSpan"?eu(e,1,t):eu(e,Cw,t)},R$=function(e){if(e instanceof tu&&e.value0 instanceof N)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof tu)return"attr/:"+e.value1;if(e instanceof vs)return"prop/"+e.value0;if(e instanceof gs)return"handler/"+e.value0;if(e instanceof $c)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},cv=ne;var $$=ne;var H$=function(e){return function(t){var n=function(s){return function(f,h){if(h instanceof tu)return tv(Ma(h.value0),h.value1,t);if(h instanceof vs)return kz(h.value0,t);if(h instanceof gs){var d=ww(h.value0,s);return Dw(h.value0,rr(d),t)}if(h instanceof $c)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[h.constructor.name])}},r=function(s){return s instanceof N?e(s.value0)():void 0},p=function(s){var f=sv("ref")(s.props);return f instanceof N&&f.value0 instanceof $c?r(f.value0.value0(new Nw(t))):void 0},a=function(s,f){return function(h,d,c,_){if(c instanceof tu&&_ instanceof tu){var m=c.value2===_.value2;return m||ev(Ma(_.value0),_.value1,_.value2,t),_}if(c instanceof vs&&_ instanceof vs){var v=Rc(c.value1,_.value1);if(v)return _;if(_.value0==="value"){var y=Pz("value",t),C=Rc(y,_.value1);return C||Pw(_.value0,_.value1,t),_}return Pw(_.value0,_.value1,t),_}if(c instanceof gs&&_ instanceof gs){var S=ww(_.value0,s);return qt(_.value1)(mn(S))(),Ew(_.value0,S,f),_}return _}},o=function(s){return function(f,h,d){if(d instanceof tu)return ev(Ma(d.value0),d.value1,d.value2,t),d;if(d instanceof vs)return Pw(d.value0,d.value1,t),d;if(d instanceof gs){var c=Ic(d.value0,s);if(fw(d.value0,s))return qt(d.value1)(mn(c))(),d;var _=cn(d.value1)(),m=bp(function(v){return function(){var C=Qe(_)();return r(C(v))}})();return Ew(d.value0,new Z(m,_),s),yw(d.value0,m,t),d}if(d instanceof $c)return r(d.value0(new kw(t))),d;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[d.constructor.name])}},l=Oz("patchProp","Halogen.VDom.DOM.Prop",function(){return function(s,f){var h=Tw(),d=n(s.events),c=a(s.events,h),_=o(h),m=_p(s.props,f,R$,c,d,_),v={events:Sw(h),props:m};return Ln(new Fn(void 0,v,l(100),p))}}),u=l(87),i=function(s){var f=Tw(),h=hp(s,R$,o(f)),d={events:Sw(f),props:h};return Ln(new Fn(void 0,d,u,p))};return i}};var Ww=function(e){return e},Uw=function(e){return Ww(hs.create(e))},Wz=function(e){return e.toPropValue},Jn=function(e){return Ww(ds.create(e))},N$=function(e){return new $c(function(t){return e(function(n){if(n instanceof kw)return new N(n.value0);if(n instanceof Nw)return z.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},B$=function(e){var t=Wz(e);return function(n){var r=vs.create(n);return function(p){return r(t(p))}}};var lv={toPropValue:cv};var qw={toPropValue:function(){var e=In();return function(t){return cv(e(t))}}()};var W$={toPropValue:$$},U$={toPropValue:function(e){return cv(b$(e))}};var zw=function(){return gs.create}(),q$=function(e){return function(t){return function(n){return function(r){return new Yi(e,t,n,r)}}}};var z$=function(e){return function(t){return tu.create(e)(t)}};var qz=de(_e);var fv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),G$=function(e){return function(t){return new Gw(e,t)}},J$=function(){return Vw.create}(),j$=function(e){var t=X(e);return function(n){return function(r){return function(p){return function(a){return function(o){if(a instanceof fv)return new Z(new Ye({func:t(a.value0),count:o},n),r);if(a instanceof Vw)return new Z(new Ye({func:p(a.value0),count:o},n),r);if(a instanceof Gw)return j$(e)(n)(RR(a.value1)(r))(p)(a.value0)(o+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[a.constructor.name])}}}}}},K$=function(e){var t=ht(e.Apply0());return function(n){return function(r){return function(p){if(n instanceof Ze)return new We(p);if(n instanceof Ye){var a=t(n.value0.func)(p),o=n.value0.count===1;if(o)return n.value1 instanceof Ze?new We(a):K$(e)(n.value1)(r)(a);if(r instanceof Ze)return new We(a);if(r instanceof Ye)return new Oe(new Z(new Ye({func:a,count:n.value0.count-1|0},n.value1),new ao(r.value0,r.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[r.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},Q$={map:function(e){return function(t){return G$(new fv(e))(t)}}},X$=function(e){var t=K$(e),n=X(e),r=j$(e);return function(p){return function(a){var o=function(l){var u=!1,i;function s(f){if(f.value1.value0 instanceof fv){var h=t(f.value0)(f.value1.value1)(n(f.value1.value0.value0));if(h instanceof We)return u=!0,h.value0;if(h instanceof Oe){l=h.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[h.constructor.name])}if(f.value1.value0 instanceof Vw){var h=t(f.value0)(f.value1.value1)(p(f.value1.value0.value0));if(h instanceof We)return u=!0,h.value0;if(h instanceof Oe){l=h.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[h.constructor.name])}if(f.value1.value0 instanceof Gw){var d=new ao(f.value1.value0.value1,f.value1.value1);l=r(f.value0)(d)(p)(f.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[f.value1.value0.constructor.name])}for(;!u;)i=s(l);return i};return o(new Z(Ze.value,ym(a)))}}},Y$=function(e){return X$(e)(qz)},Z$={apply:function(e){return function(t){return G$(e)(t)}},Functor0:function(){return Q$}},eH=function(){return{pure:fv.create,Apply0:function(){return Z$}}}(),zz=X$(eH),Jw=function(e){return zz(function(t){return J$(e(t))})};var nH=function(){function e(t,n,r){this.value0=t,this.value1=n,this.value2=r}return e.create=function(t){return function(n){return function(r){return new e(t,n,r)}}},e}(),rH=ne,oH=ne;function jw(e){return function(t){return e===t}}var of=jw;var jz=ut(Pe);var Kz=ee(xr);var Qz=De(sn),Xz=ct(rn),Yz=Xz(mt);var dv=function(e){return e},sH=function(e){return function(t){return e(function(n){return jz(t(n))})}};var jn=function(e){return function(t){return e(t)}};var wp={map:function(e){return function(t){return function(n){return t(function(r){return n(e(r))})}}}};var Kn=function(){var t=cn([])();return{emitter:function(n){return function(){return ro(function(p){return Qz(p)([n])})(t)(),ro(D_(of)(n))(t)}},listener:function(n){return Kz(Qe(t))(Yz(function(r){return r(n)}))}}};var Qw=de(_e);var eV=jm();var cH=function(e){return e},lH=function(e){return e},Sp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ep=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Tp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_v=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var uf=function(e){return e},vv=function(e){return dt(new Tp(e,void 0))};var Rn=function(e){return dt(new Ep(function(t){return e},Qw))};var lr=function(e){return dt(new xp(e,void 0))};var gr=function(){return function(e){var t=eV(e);return function(n){var r=t(n);return function(p){return function(a){return function(o){return dt(new Mp(oH(new nH(function(l){var u=X(l);return function(i){var s=Ke(u(z.value))(i),f=r(p)(a);return function(h){return s(f(h))}}},o,Qw))))}}}}}},Xw=yt,gv=yt;var sf={lift:function(e){return function(t){return uf(dt(Hc.create(t)))}}},Oc=ef,It={state:function(e){return uf(dt(Sp.create(e)))},Monad0:function(){return Oc}};var An=function(e){return{liftEffect:function(){var t=Le(e);return function(n){return uf(dt(Hc.create(t(n))))}}(),Monad0:function(){return Oc}}};var ii=function(e){var t=An(e.MonadEffect0());return{liftAff:function(){var n=Cn(e);return function(r){return uf(dt(Hc.create(n(r))))}}(),MonadEffect0:function(){return t}}};var Pr=function(e){return dt(new Fp(e,Qw))},$n=ri;var Nt=cr,tV=ee(Nt),yv=np;var Xt=vr,nV=X(Xt),Lp={tailRecM:function(e){return function(t){return tV(e(t))(function(n){if(n instanceof Pt)return yn(Lp)(e)(n.value0);if(n instanceof Bt)return nV(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return Oc}};var cf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ff=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),df=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var rV=function(e,t,n){var r=0,p;return function(a){if(r===2)return p;if(r===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return r=1,p=n(),r=2,p}};var oV=function(e,t){return Rc(e.value0,t.value0)&&Rc(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var fH=function(e){return e.value2(e.value3)};var dH=function(e){var t=function(a){return bo(a.vdom)},n=rV("patchThunk","Halogen.VDom.Thunk",function(){return function(a,o){var l=oV(a.thunk,o);if(l)return Ln(new Fn(Or(a.vdom),a,n(112),t));var u=Co(a.vdom,e(fH(o)));return Ln(new Fn(Or(u),{vdom:u,thunk:o},n(115),t))}}),r=n(108),p=function(a){return function(o){var l=Dp(a)(e(fH(o)));return Ln(new Fn(Or(l),{thunk:o,vdom:l},r,t))}};return p};var Dv=cl($n),eS=ct(Xt)(Ht),aV=V($n);var pH=X(Xt),iV=jm(),uV=Jm(),sV=Km(),hf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tS=ne,nS=ne,Yt=function(e){return function(t){if(t instanceof cf)return Dv(eS(e.handleAction)(e.initialize))(t.value0);if(t instanceof lf)return Dv(eS(e.handleAction)(e.finalize))(t.value0);if(t instanceof ff)return Dv(eS(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof df)return Dv(e.handleAction(t.value0))(t.value1);if(t instanceof pf)return XR(function(n){var r=aV(Ke(t.value1(void 0))(n));return function(p){return r(e.handleQuery(p))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},cV=ne,Zt=ne;var it=function(){return{handleAction:me(pH(void 0)),handleQuery:me(pH(z.value)),receive:me(z.value),initialize:z.value,finalize:z.value}}(),rS=function(){return function(e){var t=iV(e),n=uV(e),r=sV(e);return function(p){var a=t(p),o=n(p),l=r(p);return function(u){return function(i){return function(s){return function(f){return function(h){return cV({get:a(u)(i),pop:o(u)(i),set:l(u)(i),component:s,input:f,output:h})}}}}}}}};var ui=function(){return q$(z.value)}();var hH=ui("h3"),Ap=hH([]);var oS=function(e){return ui("img")(e)([])},Ip=function(e){return ui("input")(e)([])};var aS=ui("option");var iS=ui("select");var uS=ui("style");var Gt=ui("div"),yr=Gt([]);var sS=function(e){return ui("canvas")(e)([])},Ds=ui("button");var si=function(){var e=function(t){return function(n){return new N(new Xm(t,n))}};return function(t){return N$(e(t))}}(),Pc=function(e){return B$(e)};var lV=Pc(lv),_H=Pc(W$);var mH=lV("src");var vH=function(e){return Pc(e)("type")},gH=function(e){return Pc(e)("value")},yH=_H("width");var DH=_H("height");var cS=function(){return z$(z.value)}();var lS=ee(Nt),fV=Rr(It),dV=Tn(ic)(Xt),pV=wt(sf),hV=ct(Xt)(Ht),_V=fn(It),mV=function(){function e(){}return e.value=new e,e}(),vV=function(e){return sS([si("canvas"),yH(e.dimensions.width),DH(e.dimensions.height)])},gV=function(e){var t=pV(e.MonadEffect0().Monad0()),n=UR(e);return function(r){var p=n(r);return function(a){return lS(fV)(function(o){return He(dV)(o.canvas)(function(l){return t(Ea(p(a))(l))})})}}},yV=function(e){var t=Le(An(e.MonadEffect0()));return function(n){return lS(Pr("canvas"))(function(r){return He(hV)(r)(function(p){return lS(t(cm(p)))(function(a){return _V(function(o){var l={};for(var u in o)({}).hasOwnProperty.call(o,u)&&(l[u]=o[u]);return l.canvas=new N({canvasElement:p,context2D:a}),l})})})})}},_f=function(e){var t=yV(e),n=gV(e);return function(r){return Zt({initialState:function(p){return{dimensions:p,canvas:z.value}},render:vV,eval:Yt({receive:it.receive,finalize:it.finalize,handleAction:t,handleQuery:n(r),initialize:new N(mV.value)})})}};var CH=rS();var oa=function(){return function(e){var t=CH(e);return function(n){var r=t(n);return function(p){return function(a){return function(o){return function(l){return Uw(new hf(r(p)(a)(o)(l)(me(z.value))))}}}}}}},ci=function(){return function(e){var t=CH(e);return function(n){var r=t(n);return function(p){return function(a){return function(o){return function(l){return function(u){return Uw(new hf(r(p)(a)(o)(l)(function(i){return N.create(u(i))})))}}}}}}}};function wH(e){return e.target}function Cs(e){return function(){return e.stopPropagation()}}var dS=function(e){return dn(wH(e))};var pS="DOMContentLoaded";var SH="change";var MH="keyup",xH="keydown";var FH="mouseup",LH="mouseover";var AH="mousemove",IH="mouseleave",RH="mouseenter",$H="mousedown",HH="dblclick",OH="click";var bs=ne,PH=ne;var xa=function(e){return function(t){return zw(e)(function(n){return new N(new Lc(t(n)))})}};var mf=xa(SH),ru=function(){var e=xa(OH);return function(t){return e(bs(t))}}(),kH=function(){var e=xa(HH);return function(t){return e(bs(t))}}();var NH=function(){var e=xa(xH);return function(t){return e(PH(t))}}(),BH=function(){var e=xa(MH);return function(t){return e(PH(t))}}();var WH=function(){var e=xa($H);return function(t){return e(bs(t))}}(),UH=function(){var e=xa(RH);return function(t){return e(bs(t))}}(),qH=function(){var e=xa(IH);return function(t){return e(bs(t))}}(),zH=function(){var e=xa(AH);return function(t){return e(bs(t))}}();var VH=function(){var e=xa(LH);return function(t){return e(bs(t))}}(),GH=function(){var e=xa(FH);return function(t){return e(bs(t))}}();var hS=ne;function bv(e){return e.clientX}function wv(e){return e.clientY}var Po=ne;var JH=nt(rt)(Nt),NV=ee(Nt),jH={reflectSymbol:function(){return"canvas"}},KH=gr()(jH)(jt),BV=ct(Xt)(Ht),WV=oa()(jH)(jt),UV=de(_e),QH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),XH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ev=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Tv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),YH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),eO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vS=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_S=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ws=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qV={toEvent:function(e){if(e instanceof QH)return Po(e.value0);if(e instanceof XH)return Po(e.value0);if(e instanceof Ev)return Po(e.value0);if(e instanceof Tv)return Po(e.value0);if(e instanceof YH)return Po(e.value0);if(e instanceof Mv)return Po(e.value0);if(e instanceof xv)return Po(e.value0);throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 101, column 1 - line 108, column 47): "+[e.constructor.name])}},zV={toEvent:function(e){if(e instanceof ZH)return hS(e.value0);if(e instanceof eO)return hS(e.value0);throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 97, column 1 - line 99, column 46): "+[e.constructor.name])}},VV=function(e){return e.toEvent},tO=function(e){var t=VV(e);return function(n){return Cs(t(n))}},GV=tO(zV),JV=tO(qV),gS=function(){return pt.value}(),jV=function(e){var t=Le(An(e.MonadEffect0()));return function(n){return function(r){if(r instanceof _S)return JH(t(GV(r.value0)))(function(){return lr(new mS(r.value0))});if(r instanceof ws)return JH(t(JV(r.value0)))(function(){return NV(KH(gS)(void 0)(KR))(function(p){return He(BV)(p)(function(a){return lr(new vS(r.value0,a))})})});throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 84, column 16 - line 92, column 32): "+[r.constructor.name])}}},KV=function(e){var t=_f(e);return function(n){var r=t(n);return function(p){return Gt([NH(function(a){return _S.create(ZH.create(a))}),BH(function(a){return _S.create(eO.create(a))}),ru(function(a){return ws.create(QH.create(a))}),kH(function(a){return ws.create(XH.create(a))}),WH(function(a){return ws.create(Ev.create(a))}),GH(function(a){return ws.create(Tv.create(a))}),UH(function(a){return ws.create(YH.create(a))}),qH(function(a){return ws.create(Mv.create(a))}),zH(function(a){return ws.create(xv.create(a))})])([WV(gS)(void 0)(r)(p)])}}},nO=function(e){var t=KV(e),n=jV(e);return function(r){return Zt({initialState:UV,render:t(r),eval:Yt({receive:it.receive,initialize:it.initialize,finalize:it.finalize,handleAction:n(r),handleQuery:KH(gS)(void 0)})})}};var fi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var oO=function(e){return e instanceof fo?new N(e.value1):e instanceof wo?new N(e.value0):z.value},aO=function(e){return e instanceof fo?new N(e.value0):e instanceof fi?new N(e.value0):z.value};var iO=function(e){var t=De(e);return function(n){var r=De(n);return{append:function(p){return function(a){if(p instanceof fi&&a instanceof fi)return new fi(t(p.value0)(a.value0));if(p instanceof fi&&a instanceof wo)return new fo(p.value0,a.value0);if(p instanceof fi&&a instanceof fo)return new fo(t(p.value0)(a.value0),a.value1);if(p instanceof wo&&a instanceof fi)return new fo(a.value0,p.value0);if(p instanceof wo&&a instanceof wo)return new wo(r(p.value0)(a.value0));if(p instanceof wo&&a instanceof fo)return new fo(a.value0,r(p.value0)(a.value1));if(p instanceof fo&&a instanceof fi)return new fo(t(p.value0)(a.value0),p.value1);if(p instanceof fo&&a instanceof wo)return new fo(p.value0,r(p.value1)(a.value0));if(p instanceof fo&&a instanceof fo)return new fo(t(p.value0)(a.value0),r(p.value1)(a.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[p.constructor.name,a.constructor.name])}}}}};var iG=De(Gs),uG=st(Ai),sO=nc(mt),cO=sO(Ai),Lv=qa(mt)(Ai),di=V(vt),DS=ht(Js),sG=De(sn),lO=kn(mt),cG=lO(Ai),lG=P0(aA),Av=V(Dt),fG=Mt(UM),fO=ee(qr),dG=d_(z0(mt)),dO=V(Fd(vt));var pG=c_(mt)(to),hG=ee(bu),_G=b_(Id),mG=_a(md(ha)),vG=qa(w_(mt))(Ai),gG=Ee(Sr),Iv=function(e){return e},yG=function(e){return e},CS=function(e){return function(t){return function(n){return t+(e+n)}}},DG={append:function(e){return function(t){return e+t}}},CG={append:function(e){return function(t){return e+t}}},pO=iO(DG)(CG),hO=Wx(pO),Fv=lO(hO),bG=sO(hO),$p=De(n0(pO)),uO=function(e){var t=Sn(function(n){return uG})(function(n){return cO([n.value0,": ",n.value1])});return Lv("; ")(di(t)(e))},wG=function(e){if(e instanceof qu)return"#"+e.value0;if(e instanceof Bi)return"."+e.value0;if(e instanceof zu)return"["+(e.value0+"]");if(e instanceof Vu)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof Gu)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof Ju)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof ju)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof Ku)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof Qu)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof Wi)return":"+e.value0;if(e instanceof kl)return":"+(e.value0+("("+(Lv(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},SG=function(e){return function(t){if(e.length===0&&t instanceof R_)return["*"];if(t instanceof R_)return[""];if(t instanceof sD)return[t.value0];if(t instanceof cD)return DS(di(CS(" > "))(ou(t.value0)))(ou(t.value1));if(t instanceof lD)return DS(di(CS(" "))(ou(t.value0)))(ou(t.value1));if(t instanceof nA)return DS(di(CS(" + "))(ou(t.value0)))(ou(t.value1));if(t instanceof rA)return sG(ou(t.value0))(ou(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},ou=function(e){return di(function(t){return t+cG(wG)(lG(e.value0))})(SG(e.value0)(e.value1))},EG=function(){var e=Lv(", ");return function(t){return e(ou(t))}}(),kc=function(e){return e.length===0?z.value:Av(function(t){return new ao(t.head,t.tail)})(__(e))};var gf=function(e){if(e.value0 instanceof pA)return Ke(e.value0.value0)(function(t){return iA(gf(t))(e.value0.value0)})(kc(e.value1));if(e.value0 instanceof gD)return Ke(e.value0.value0)(function(t){return Gn(gf(t))(e.value0.value0)})(kc(e.value1));if(e.value0 instanceof fA)return Ke(e.value0.value0)(function(t){return Gn(e.value0.value0)(gf(t))})(kc(e.value1));if(e.value0 instanceof dA)return Ke($_("TODO"))(gf)(kc(B0(e.value0.value0)(xn(e.value0)(e.value1))));if(e.value0 instanceof lA)return Ke(ft(zt)(e.value0.value0))(function(t){return ft(gf(t))(e.value0.value0)})(kc(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},TG=function(e){return Hd(e)},MG=function(e){return N.create(wo.create(Iv(fG("@import url("+(e+`);
`)))))},xG=function(e){return e},bS=function(e){return fO(e)(function(){var t=Av(xG);return function(n){return t(oO(n))}}())},FG=function(e){return e},_O=function(e){return fO(e)(function(){var t=Av(FG);return function(n){return t(aO(n))}}())},LG=function(e){return Ke(e.value0)(function(t){return"("+(e.value0+(": "+(Hd(t)+")")))})(e.value1)},AG=function(e){return"@media "+(TG(e.value1)+dG(iG)(dO(function(t){return function(n){return" and "+n}(LG(t))})(e.value2)))};var IG=function(e){return function(t){if(e instanceof uo&&t instanceof uo)return[new Oe(new Z(e.value0,t.value0))];if(e instanceof io&&t instanceof uo)return di(function(n){return new Oe(new Z(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof uo&&t instanceof io)return di(function(n){return new Oe(new Z(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof io&&t instanceof io)return di(function(n){return Ke(new We(n.value0+n.value1))(function(){var r=Z.create(n.value0+n.value1);return function(p){return Oe.create(r(function(a){return n.value0+a}(p)))}}())(pG(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},wS=function(e){return IG(e.value0)(e.value1)},RG=function(e){return function(t){var n=hG(t)(wS),r=Av(function(a){return fi.create(yG(uO(_G(a))))})(kc(n)),p=function(a){return N.create(wo.create(Iv(Lv(" ")([EG(gf(a)),"{",uO(n),`}
`]))))};return Ke(r)(p)(kc(e))}},Hp=function(e){return function(t){var n=function(_){return _ instanceof hA?new N(new Z(_.value0,_.value1)):z.value},r=Fv(Lu(He($G)(e)))(za(n)(t)),p=function(_){return _ instanceof Wd?new N(new Z(_.value0,_.value1)):z.value},a=function(){var _=za(p)(t),m=mG(sc)(_);return m?RG(e)(_):z.value}(),o=function(_){return Hp(xn(_)(e))},l=function(_){return _ instanceof yD?new N(new Z(_.value0,_.value1)):z.value},u=bG(di(Lu(o))(za(l)(t))),i=function(_){return _ instanceof mA?new N(_.value0):z.value},s=Fv(HG)(za(i)(t)),f=function(_){return _ instanceof vA?new N(_.value0):z.value},h=Fv(MG)(za(f)(t)),d=function(_){return _ instanceof _A?new N(_.value0):z.value},c=Fv(PG)(za(d)(t));return $p(a)($p(h)($p(s)($p(c)($p(u)(r)))))}},$G=function(e){return function(t){return function(n){return N.create(wo.create(Iv(AG(e)+(" { "+(nr("")(bS(Hp(t)(n)))+` }
`)))))}}},HG=function(e){var t=" "+(e.value0+(" { "+(vG(" ")(dO(Lu(OG))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],r=cO(di(function(p){return p+t})(n));return new N(new wo(r))},OG=function(e){return function(t){var n=nr("")(_O(Hp([])(t)));return gG(e)+("% "+("{ "+(n+" }")))}},PG=function(e){return N.create(wo.create(Iv("@font-face { "+(nr("")(_O(Hp([])(e)))+` }
`))))},mO=function(){var e=Hp([]);return function(t){return e(Ud(t))}}();var NG=vH(qw),BG=ee(bu),WG=Cp(mt),vO=function(e){var t=nr("")(bS(mO(e)));return uS([NG("text/css")])([Jn(t)])},bn=function(){var e=function(){var a=mo("; "),o=A$(Fu)(function(l){return function(u){return[l+(": "+u)]}});return function(l){return a(o(l))}}(),t=U0(kn(s_)(Fu)(uc)),n=function(a){return a instanceof Wd?new N(new Z(a.value0,a.value1)):z.value},r=function(a){var o=BG(za(n)(a))(function(l){return t(wS(l))});return WG(o)},p=cS("style");return function(a){return p(e(r(Ud(a))))}}();var ES=nt(rt),DO=ES(yo),UG=gn(CA),CO=Ie(Mu(Na)),gO=Ee(Ox()()(kx({reflectSymbol:function(){return"x"}})(Nx({reflectSymbol:function(){return"y"}})(Sr))(Sr))),qG=V(vt),SS=Rr(It),yf=Ao(It),zG=V(Dt),Es=ES(ai),VG=ut(WR),GG=xl(xd)(rw),JG=ut($n),bO={reflectSymbol:function(){return"sketch"}},jG=gr()(bO)(jt),yO=ee(ai),Rv=ee(Nt),KG=ES(Nt),QG=fn(It),XG=de(_e),YG=ci()(bO)(jt),wO=function(){function e(){}return e.value=new e,e}(),SO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),EO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),TO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZG=function(e){return function(t){return function(n){var r=function(p){return Gt([bn(DO(Cc(Dc)(Xe(1))(jo))(function(){return UG(CO(new N(p.value0))(n.selected))(Zd(Ga(180)(180)(180)))})),VH(me(new EO(p.value0)))])([Ds([ru(me(new TO(p.value0)))])([Jn("delete")]),Jn(gO(p.value1.value0)+(" "+gO(p.value1.value1)))])};return yr(qG(r)($0(k0(0)(tr(n.lines)))(n.lines)))}}},e9=function(e){if(e instanceof mS)return SS;if(e instanceof vS){if(e.value0 instanceof Mv)return yf(function(r){return{dimensions:r.dimensions,lines:r.lines,selected:r.selected,line:z.value}});if(e.value0 instanceof Tv)return yf(function(r){return{dimensions:r.dimensions,selected:r.selected,line:z.value,lines:function(){if(r.line instanceof z)return r.lines;if(r.line instanceof N)return xn(r.line.value0)(r.lines);throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 137, column 19 - line 139, column 42): "+[r.line.constructor.name])}()}});if(e.value0 instanceof Ev){var t={x:Lr(bv(e.value0.value0))-e.value1.left,y:Lr(wv(e.value0.value0))-e.value1.top};return yf(function(r){return{dimensions:r.dimensions,lines:r.lines,selected:r.selected,line:Ke(new N(new Z(t,t)))(N.create)(r.line)}})}if(e.value0 instanceof xv){var t={x:Lr(bv(e.value0.value0))-e.value1.left,y:Lr(wv(e.value0.value0))-e.value1.top},n=function(p){return new Z(p.value0,t)};return yf(function(p){return{dimensions:p.dimensions,lines:p.lines,selected:p.selected,line:zG(n)(p.line)}})}return SS}throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 128, column 3 - line 148, column 19): "+[e.constructor.name])},t9=function(e){return Es(Fc(Ga(255)(255)(200)))(function(){return Es(lp({x:0,y:0,width:400,height:400}))(function(){return Es(GR(5))(function(){return VG(He(GG)(Ke(e.lines)(He(xn)(e.lines))(e.line))(function(t){return function(n){return Es(QR)(function(){return Es(zR(n.value0))(function(){return Es(qR(n.value1))(function(){return Es(function(){var r=CO(new N(t))(e.selected);return r?ow(Ga(255)(0)(0)):ow(Ga(0)(0)(0))}())(function(){return JR})})})})}}))})})})},MO=function(){return pt.value}(),n9=function(){var e=function(t){return JG(jG(MO)(void 0)(Um(yO(qm)(function(n){return yO(zm)(function(r){return Es(Vm({x:0,y:0,width:n,height:r}))(function(){return t9(t)})})}))))};return function(t){if(t instanceof wO)return Rv(SS)(e);if(t instanceof SO)return KG(QG(function(n){var r={};for(var p in n)({}).hasOwnProperty.call(n,p)&&(r[p]=n[p]);return r.selected=z.value,r}))(function(){return Rv(e9(t.value0))(function(n){return e(n)})});if(t instanceof EO)return Rv(yf(function(n){return{dimensions:n.dimensions,line:n.line,lines:n.lines,selected:new N(t.value0)}}))(function(n){return e(n)});if(t instanceof TO)return Rv(yf(function(n){return{dimensions:n.dimensions,line:n.line,selected:z.value,lines:Ke(n.lines)(XG)(y_(t.value0)(n.lines))}}))(function(n){return e(n)});throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 85, column 3 - line 98, column 21): "+[t.constructor.name])}}(),r9=function(e){var t=nO(e),n=ZG(e);return function(r){var p=t(r),a=n(r);return function(o){return Gt([bn(DO($o(qi))(function(){return zi(Zu)}))])([YG(MO)(void 0)(p)(o.dimensions)(SO.create),yr([Ap([Jn("Lines")]),a(o)])])}}},xO=function(e){var t=r9(e);return function(n){return Zt({initialState:me({dimensions:{width:400,height:400},line:z.value,lines:[],selected:z.value}),render:t(n),eval:Yt({handleQuery:it.handleQuery,receive:it.receive,finalize:it.finalize,initialize:new N(wO.value),handleAction:n9})})}};var f9=kn(Bn),d9=ln(Bn),p9=vn(Bn);var h9=function(e){return e};var TS=function(e){return UA(e)};var LO=h9,AO={foldMap:function(e){var t=f9(e);return function(n){var r=t(n);return function(p){return r(TS(p))}}},foldl:function(e){return function(t){var n=d9(e)(t);return function(r){return n(TS(r))}}},foldr:function(e){return function(t){var n=p9(e)(t);return function(r){return n(TS(r))}}}};var IO=function(){var e=ut(Jl);return function(t){return LO(e(t))}}();function RO(e){return function(t){return function(){return setInterval(t,e)}}}function $O(e){return function(){clearInterval(e)}}var HO=RO;var OO=$O;var g9=nt(rt),PO=V(Dt),y9=Za(yt),Hv=ee(Qt),MS=Le(Dn),D9=g9(Qt),xS=X(Jr),C9=V($r),b9=yn(Qi);var w9=ct(Jr)(Bn),S9=ir(Yl);var E9=function(e){return e},T9=function(e){var t=function(){var p=Qe(e)();if(p instanceof z)return z.value;if(p instanceof N){var a=ns(p.value0.releasers);if(a instanceof z)return z.value;if(a instanceof N)return ro(PO(function(o){return{nextKey:o.nextKey,references:o.references,releasers:y9(a.value0.key)(o.releasers)}}))(e)(),new N(a.value0.value);throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 104, column 33 - line 108, column 32): "+[a.constructor.name])}throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 102, column 11 - line 108, column 32): "+[p.constructor.name])},n=function(r){return Hv(MS(t))(function(p){if(p instanceof z)return D9(MS(qt(z.value)(e)))(function(){return xS(new Bt(r))});if(p instanceof N)return Hv(xI(p.value0))(function(a){return xS(new Pt(Sn(function(o){return new Ye(o,r)})(me(r))(a)))});throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 92, column 11 - line 98, column 68): "+[p.constructor.name])})};return C9(Xi)(b9(n)(Ze.value))};var kO=function(){var e=new N({nextKey:0,references:1,releasers:_r});return V(Pe)(E9)(cn(e))}(),NO=function(e){return eC(Hv(MS(e_(PO(function(t){return{nextKey:t.nextKey,releasers:t.releasers,references:t.references-1|0}}))(e)))(function(t){return t instanceof N&&t.value0.references===0?Hv(T9(e))(w9(S9)):xS(void 0)}))};var x9=ee(Qt),F9=Le(Dn);var L9=function(e){return function(t){return x9(F9(kO))(function(n){return Gd(NO(n))(e(t(n)))})}},Ov=L9(de(_e));var FS=function(e){var t=V(e);return{map:function(n){return function(r){var p=t(n);return function(a){return p(r(a))}}}}},BO=function(e){var t=ht(e),n=FS(e.Functor0());return{apply:function(r){return function(p){return function(a){return t(r(a))(p(a))}}},Functor0:function(){return n}}},A9=function(e){var t=ee(e),n=BO(e.Apply0());return{bind:function(r){return function(p){return function(a){return t(r(a))(function(o){var l=p(o);return l(a)})}}},Apply0:function(){return n}}};var I9=function(e){var t=X(e),n=BO(e.Apply0());return{pure:function(r){return function(p){return t(r)}},Apply0:function(){return n}}},Pv=function(e){var t=I9(e.Applicative0()),n=A9(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}};var jr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var R9=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return{map:function(r){return function(p){var a=function(o){if(o instanceof jr)return new jr(o.value0,function(l){return a(o.value1(l))});if(o instanceof Kr)return new Kr(o.value0,function(l){return a(o.value1(l))});if(o instanceof Qr)return new Qr(t(o.value0)(function(l){return n(a(l))}));if(o instanceof Dr)return new Dr(r(o.value0));throw new Error("Failed pattern match at Pipes.Internal (line 28, column 12 - line 32, column 41): "+[o.constructor.name])};return a(p)}}}};var Op=function(e){var t;function n(r){e=r}for(;;)t=n(e);return t},LS=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0()),r=R9(e),p=V(r);return{apply:function(a){return function(o){var l=function(u){if(u instanceof jr)return new jr(u.value0,function(i){return l(u.value1(i))});if(u instanceof Kr)return new Kr(u.value0,function(i){return l(u.value1(i))});if(u instanceof Qr)return new Qr(t(u.value0)(function(i){return n(l(i))}));if(u instanceof Dr)return p(u.value0)(o);throw new Error("Failed pattern match at Pipes.Internal (line 36, column 13 - line 40, column 33): "+[u.constructor.name])};return l(a)}},Functor0:function(){return r}}},Df=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0()),r=LS(e);return{bind:function(p){return function(a){var o=function(l){if(l instanceof jr)return new jr(l.value0,function(u){return o(l.value1(u))});if(l instanceof Kr)return new Kr(l.value0,function(u){return o(l.value1(u))});if(l instanceof Qr)return new Qr(t(l.value0)(function(u){return n(o(u))}));if(l instanceof Dr)return a(l.value0);throw new Error("Failed pattern match at Pipes.Internal (line 47, column 12 - line 51, column 28): "+[l.constructor.name])};return o(p)}},Apply0:function(){return r}}};var Cf=function(e){var t=LS(e);return{pure:Dr.create,Apply0:function(){return t}}},UO=function(e){var t=Cf(e),n=Df(e);return{Applicative0:function(){return t},Bind1:function(){return n}}},qO=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0()),r=UO(e);return{tailRecM:function(p){return function(a){var o=function(l){if(l instanceof Dr&&l.value0 instanceof Pt)return o(p(l.value0.value0));if(l instanceof Dr&&l.value0 instanceof Bt)return new Dr(l.value0.value0);if(l instanceof Qr)return new Qr(t(l.value0)(function(u){return n(o(u))}));if(l instanceof jr)return new jr(l.value0,function(u){return o(l.value1(u))});if(l instanceof Kr)return new Kr(l.value0,function(u){return o(l.value1(u))});throw new Error("Failed pattern match at Pipes.Internal (line 163, column 10 - line 168, column 52): "+[l.constructor.name])};return o(p(a))}},Monad0:function(){return r}}};var zO=function(e){return function(t){return new Kr(t,Dr.create)}},VO=function(e){return function(t){return new jr(t,Dr.create)}};var AS=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(r){return function(p){if(r instanceof jr)return new jr(r.value0,function(a){return AS(e)(r.value1(a))(p)});if(r instanceof Kr)return Pp(e)(r.value1)(p(r.value0));if(r instanceof Qr)return new Qr(t(r.value0)(function(a){return n(AS(e)(a)(p))}));if(r instanceof Dr)return new Dr(r.value0);throw new Error("Failed pattern match at Pipes.Core (line 222, column 21 - line 226, column 29): "+[r.constructor.name])}}},Pp=function(e){var t=V(e.Bind1().Apply0().Functor0());return function(n){return function(r){if(r instanceof jr)return AS(e)(n(r.value0))(r.value1);if(r instanceof Kr)return new Kr(r.value0,function(p){return function(a){return Pp(e)(n)(a)}(r.value1(p))});if(r instanceof Qr)return new Qr(t(function(p){return Pp(e)(n)(p)})(r.value0));if(r instanceof Dr)return new Dr(r.value0);throw new Error("Failed pattern match at Pipes.Core (line 197, column 22 - line 201, column 29): "+[r.constructor.name])}}};var Nv=function(e){return zO(e)};var IS=function(e){var t=Pp(e);return function(n){return function(r){return t(me(n))(r)}}};var GO=function(e){return VO(e)(void 0)};var JO=Ee(no),ZO=Te(yt),eP=nt(rt),H9=eP(yo),O9=de(_e),jO=yl(Dl),Bv=Pv(ti),KO=eP(Df(Bv)),QO=Nv(Bv),XO=X(Cf(Bv)),YO=yn(qO(Bv));var P9={eq:function(e){return function(t){return e===t}}},$S={compare:function(e){return function(t){return ZO(e)(t)}},Eq0:function(){return P9}},k9={pageOrder:function(e){return function(t){return ZO(e)(t)}},Ord0:function(){return $S}},N9=function(e){return{element:function(){var t=function(n){return Gt([bn(Cc(Dc)(Xe(1))(jo))])([Jn(JO(n)),oS([mH("https://picsum.photos/"+JO(n)),bn(H9(ba(Xe(400)))(function(){return Ho(Xe(400))}))])])};return Zt({initialState:O9,render:t,eval:Yt(it)})}(),PageOrder0:function(){return k9},MonadAff1:function(){return e}}},tP=function(e){var t=X(e.MonadEffect0().Monad0().Applicative0()),n=N9(e);return{feedAbove:function(r){var p=function(a){var o=jO(a-1|0)(300);return KO(QO(o))(function(){return XO(new Pt(o))})};return t(YO(p)(r))},feedBelow:function(r){var p=function(a){var o=jO(a+1|0)(300);return KO(QO(o))(function(){return XO(new Pt(o))})};return t(YO(p)(r))},feedInsert:t(z.value),feedDelete:t(z.value),onElement:function(r){return t(void 0)},PageElement0:function(){return n},MonadAff1:function(){return e}}};var aa=function(){return window};function nP(e){return e.readyState}var kp=function(){function e(){}return e.value=new e,e}(),z9=function(){function e(){}return e.value=new e,e}(),V9=function(){function e(){}return e.value=new e,e}();var rP=function(e){return e==="loading"?new N(kp.value):e==="interactive"?new N(z9.value):e==="complete"?new N(V9.value):z.value};var J9=V(Pe);var aP=ne;var iP=ne;var uP=function(e){return J9(function(){var t=nr(kp.value);return function(n){return t(rP(n))}}())(function(){return nP(e)})};function cP(e,t,n){var r=Object.prototype.toString.call(n);return r.indexOf("[object HTML")===0&&r.indexOf("Element]")===r.length-8?t(n):e}var lP=ne;var Np=function(e){return cP(z.value,N.create,e)};function HS(e){return function(){return e.hash}}function bf(e){return function(){return e.document}}function OS(e){return function(){return e.location}}var pP=ne;var hP=ee(Qt),BJ=Le(Dn),kS=wn(xr),WJ=fl(xr),_P=X(Jr),UJ=wn(qr),qJ=X(rn),zJ=V(Pe),VJ=nt(rt),GJ=ir(Yl),JJ=function(e){return hP(BJ(kS(WJ(function(){var t=kR(e);return function(n){return t(aP(n))}}())(bf))(aa)))(function(t){return _P(UJ(Np)(t))})},NS=Kd(Sn(vo)(me(qJ(void 0)))),jJ=Sa(function(e){return function(){var n=kS(uP)(kS(bf)(aa))();if(n instanceof kp){var r=zJ(pP)(aa)(),p=bp(function(a){return e(new Oe(void 0))})();return Hw(pS)(p)(!1)(r)(),Mc(Ow(pS)(p)(!1)(r))}return e(new Oe(void 0))(),tC}}),BS=VJ(Qt)(jJ)(function(){return hP(JJ("body"))(function(e){return Ke(GJ(ar("Could not find body")))(_P)(e)})});var WS=Mt(or),vP=Mt(Vn);var KJ={value:function(e){return e}},gP=Kt(KJ),qv=WS("scroll"),zv=gP(vP("overflow-y"));var yP=WS("auto"),Nc=gP(vP("overflow")),Bp=WS("hidden");var Wp=function(e){return function(t){var n=e(t);return n.value1}};var ia=function(){function e(){this.head=null,this.last=null,this.size=0}function t(s,f){this.queue=s,this.value=f,this.next=null,this.prev=null}function n(s){this.draining=!1,this.error=null,this.value=s,this.takes=new e,this.reads=new e,this.puts=new e}var r={};function p(s){try{s()}catch(f){setTimeout(function(){throw f},0)}}function a(s,f){var h=new t(s,f);switch(s.size){case 0:s.head=h;break;case 1:h.prev=s.head,s.head.next=h,s.last=h;break;default:h.prev=s.last,s.last.next=h,s.last=h}return s.size++,h}function o(s){var f;switch(s.size){case 0:return null;case 1:f=s.head,s.head=null;break;case 2:f=s.last,s.head.next=null,s.last=null;break;default:f=s.last,s.last=f.prev,s.last.next=null}return f.prev=null,f.queue=null,s.size--,f.value}function l(s){var f;switch(s.size){case 0:return null;case 1:f=s.head,s.head=null;break;case 2:f=s.head,s.last.prev=null,s.head=s.last,s.last=null;break;default:f=s.head,s.head=f.next,s.head.prev=null}return f.next=null,f.queue=null,s.size--,f.value}function u(s){if(s.queue!==null){if(s.queue.last===s){o(s.queue);return}if(s.queue.head===s){l(s.queue);return}s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),s.queue.size--,s.queue=null,s.value=null,s.next=null,s.prev=null}}function i(s,f){if(!f.draining){var h=f.puts,d=f.takes,c=f.reads,_,m,v,y,C;for(f.draining=!0;;){if(_=null,m=null,v=null,y=f.value,C=c.size,f.error!==null){for(y=s.left(f.error);_=l(h);)p(_.cb(y));for(;m=l(c);)p(m(y));for(;v=l(d);)p(v(y));break}if(y===r&&(_=l(h))&&(f.value=y=_.value),y!==r){for(v=l(d);C--&&(m=l(c));)p(m(s.right(y)));v!==null&&(f.value=r,p(v(s.right(y))))}if(_!==null&&p(_.cb(s.right(void 0))),f.value===r&&h.size===0||f.value!==r&&d.size===0)break}f.draining=!1}}return n.EMPTY=r,n.putLast=a,n.takeLast=o,n.takeHead=l,n.deleteCell=u,n.drainVar=i,n}();function qS(){return new ia(ia.EMPTY)}function CP(e){return function(){return new ia(e)}}function bP(e,t,n,r){return function(){var p=ia.putLast(n.puts,{cb:r,value:t});return ia.drainVar(e,n),function(){ia.deleteCell(p)}}}function wP(e,t,n){return function(){var r=ia.putLast(t.takes,n);return ia.drainVar(e,t),function(){ia.deleteCell(r)}}}function SP(e,t){return function(){var n=t.value;return n===ia.EMPTY?e.nothing:(t.value=ia.EMPTY,ia.drainVar(e,t),e.just(n))}}var EP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),TP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),MP=function(){function e(){}return e.value=new e,e}(),xP=CP;var zS=function(){return{left:We.create,right:Oe.create,nothing:z.value,just:N.create,killed:EP.create,filled:TP.create,empty:MP.value}}();var FP=function(e){return function(t){return function(n){return bP(zS,e,t,n)}}};var LP=function(e){return function(t){return wP(zS,e,t)}};var AP=function(e){return SP(zS,e)};var VS=Le(Dn),IP=function(e){return VS(AP(e))};var GS=function(e){return Sa(function(t){return function(){var r=LP(e)(t)();return Mc(r)}})};var Up=function(e){return function(t){return Sa(function(n){return function(){var p=FP(e)(t)(n)();return Mc(p)}})}},RP=function(e){return VS(xP(e))};var JS=VS(qS);var Vv=function(e){return e};var ej=Cp(mt);var HP=sn,Bc=function(e){return xc(ej(e))};var OP=Fu;var tj=function(e){return function(t){return[new Z(e,xc(t))]}},au=function(e){return Vv(tj(e))},qp=In();var PP=e=>t=>()=>{let n=(r,p)=>{e(r)(p)()};return new IntersectionObserver(n,t)},KS=e=>t=>()=>{e.observe(t)};var kP=function(e){return function(t){return PP(e)(Bc(t))}};var NP=au("root");var BP=e=>()=>{let t=(n,r)=>{e(n)(r)()};return new ResizeObserver(t)},QS=e=>t=>()=>{e.observe(t)};var WP=function(e){return BP(e)};var XS=V(vt),uj=oa()({reflectSymbol:function(){return"pageElement"}}),zp=nt(rt)(Nt),UP=fn(It),qP=X(Xt),iu=ee(Nt),sj=Ao(It),cj=gn(Xt),YS=Io(It),zP=ut($n),lj=Ur(yv),fj=ct(Xt)(Ht),VP=T0(mt)(Xy),dj=de(_e),ZS=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pj=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),eE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GP=function(){function e(){}return e.value=new e,e}(),JP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vp=function(e){return e.pageOrder},hj=function(e){return e.element},_j=function(){return pt.value}(),KP=function(e){var t=e.PageOrder0(),n=t.Ord0(),r=uj(n),p=hj(e),a=Td(n),o=Vp(t),l=W0(n.Eq0()),u=Le(An(e.MonadAff1().MonadEffect0())),i=function(h){return Gt([si("page"),bn(Nc(yP))])(XS(function(d){return r(_j)(d)(p)(d)})(h.elements))},s=function(h){if(h instanceof ZS)return zp(UP(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.elements=a(Md(o)(h.value0)(d.elements)),c}))(function(){return qP(new N(h.value1))});if(h instanceof pj)return iu(sj(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.elements=l(h.value0)(d.elements),c}))(function(d){return zp(cj(sc(d.elements))(lr(new nE(d.id))))(function(){return qP(new N(h.value1))})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 89, column 5 - line 89, column 99): "+[h.constructor.name])},f=function(h){if(h instanceof GP){var d=function(v){return iu(YS(function(y){return y.parent}))(function(y){return iu(u(Kn))(function(C){return zp(zP(Rn(C.emitter)))(function(){return iu(u(kP(function(S){return function(D){return jn(C.listener)(new jP(S))}})(qp(NP)(y))))(function(S){return u(KS(S)(v))})})})})},c=function(v){return iu(u(Kn))(function(y){return zp(zP(Rn(y.emitter)))(function(){return iu(u(WP(function(C){return function(S){return jn(y.listener)(new JP(C))}})))(function(C){return u(QS(C)(v))})})})},_=function(v){return lj(c(v))(d(v))};return iu(Pr("page"))(fj(_))}if(h instanceof JP)return iu(YS(function(v){return v.id}))(function(v){var y=VP(XS(function(C){return C.contentRect.height})(h.value0));return lr(new eE({id:v,height:y}))});if(h instanceof jP){var m=VP(XS(function(v){return v.intersectionRect.height})(h.value0));return iu(YS(function(v){return v.id}))(function(v){return zp(UP(function(y){var C={};for(var S in y)({}).hasOwnProperty.call(y,S)&&(C[S]=y[S]);return C.visibleHeight=m,C}))(function(){return lr(new tE({id:v,height:m}))})})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 98, column 5 - line 98, column 81): "+[h.constructor.name])};return Zt({initialState:dj,render:i,eval:Yt({receive:it.receive,finalize:it.finalize,handleAction:f,handleQuery:s,initialize:new N(GP.value)})})};var mj=hl(yt),vj=xi(yt),gj=im(Jo),yj=V(Jl),Wc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ts=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Uc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dj={append:function(e){return function(t){if(e instanceof Ts)return new Ts(e.value0);if(t instanceof Ts)return new Ts(t.value0);if(e instanceof Wc&&t instanceof Wc)return new Wc(mj(e.value0)(t.value0));if(e instanceof Uc&&t instanceof Uc)return new Uc(vj(e.value0)(t.value0));if(e instanceof Wc)return new Ts(e.value0);if(e instanceof Uc)return new Ts(e.value0);throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 19, column 1 - line 25, column 32): "+[e.constructor.name,t.constructor.name])}}},Cj=function(){return{mempty:new Wc(xo(_l)),Semigroup0:function(){return Dj}}}(),bj=rL(Cj),XP=function(e){var t=Vp(e);return function(n){return function(r){var p=function(o){var l=new Z(Hi(o.elements),Tl(o.elements));if(l.value0 instanceof N&&l.value1 instanceof N){var u=new Z(t(n)(l.value0.value0),t(n)(l.value1.value0));return u.value0 instanceof pe?new Wc(o.id):u.value1 instanceof se?new Uc(o.id):new Ts(o.id)}return new Uc(o.id)},a=bj(gj(qd(yj(p)(r))));if(a instanceof Wc||a instanceof Uc||a instanceof Ts)return a.value0;throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 29, column 3 - line 32, column 18): "+[a.constructor.name])}}};var nk=nt(rt),Ms=nk(oC(Er)),xs=fn(rm(Er)),YP=Gr(yt),Gv=Za(yt),qc=X(Qd(Er)),ZP=Ie(Mu(Na)),ek=V(Dt),Sj=rs(yt),Ej=xi(Mi),Tj=de(_e),Mj=E0(Mi)(Gi),xj=V(Jl),tk=Gl(Jo),wf=nk(cr),Sf=gn(vr),Ef=ct(vr)(Ht),Jv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Yv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Zv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fj={map:function(e){return function(t){if(t instanceof Jv)return new Jv(t.value0,e(t.value1));if(t instanceof jv)return new jv(t.value0,e(t.value1));if(t instanceof Kv)return new Kv(t.value0,e(t.value1));if(t instanceof Qv)return new Qv(t.value0,e(t.value1));if(t instanceof Xv)return new Xv(t.value0,e(t.value1));if(t instanceof Yv)return new Yv(t.value0,e(t.value1));if(t instanceof Zv)return new Zv(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 26, column 1 - line 33, column 68): "+[e.constructor.name,t.constructor.name])}}},Lj=na(Fj)(II(eF)),rE=function(e){return dt(new Zv(e,void 0))},Aj=function(e){return dt(new jv(e,void 0))},Ij=function(e){return dt(new Jv(e,void 0))},Rj=function(e){return dt(new Kv(e,void 0))},$j=function(e){return dt(new Qv(e,void 0))},oE=function(e){var t=function(n){if(n instanceof Jv)return Ms(xs(function(p){var a={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(a[o]=p[o]);return a.pages=YP(n.value0.key)(n.value0.value)(p.pages),a.preloaded=Gv(n.value0.key)(p.preloaded),a.update=function(){var l={};for(var u in p.update)({}).hasOwnProperty.call(p.update,u)&&(l[u]=p.update[u]);return l.scroll=new N(n.value0.value.pageHeight),l}(),a}))(function(){return qc(n.value1)});if(n instanceof jv)return Ms(xs(function(p){var a={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(a[o]=p[o]);return a.pages=Gv(n.value0.key)(p.pages),a.preloaded=YP(n.value0.key)(n.value0.value)(p.preloaded),a.update=function(){var l={};for(var u in p.update)({}).hasOwnProperty.call(p.update,u)&&(l[u]=p.update[u]);return l.scroll=new N(-n.value0.value.pageHeight),l}(),a}))(function(){return qc(n.value1)});if(n instanceof Kv)return Ms(xs(function(p){var a={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(a[o]=p[o]);return a.update=function(){var l=ZP(ek(function(h){return h.key})(p.update.topLoad))(new N(n.value0.key));if(l){var u={};for(var i in p.update)({}).hasOwnProperty.call(p.update,i)&&(u[i]=p.update[i]);return u.topLoad=z.value,u}var s={};for(var f in p.update)({}).hasOwnProperty.call(p.update,f)&&(s[f]=p.update[f]);return s.topLoad=new N(n.value0),s}(),a}))(function(){return qc(n.value1)});if(n instanceof Qv)return Ms(xs(function(p){var a={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(a[o]=p[o]);return a.preloaded=Gv(n.value0.key)(p.preloaded),a.update=function(){var l={};for(var u in p.update)({}).hasOwnProperty.call(p.update,u)&&(l[u]=p.update[u]);return l.topLoad=z.value,l}(),a}))(function(){return qc(n.value1)});if(n instanceof Xv)return Ms(xs(function(p){var a={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(a[o]=p[o]);return a.update=function(){var l=ZP(ek(function(h){return h.key})(p.update.bottomLoad))(new N(n.value0.key));if(l){var u={};for(var i in p.update)({}).hasOwnProperty.call(p.update,i)&&(u[i]=p.update[i]);return u.bottomLoad=z.value,u}var s={};for(var f in p.update)({}).hasOwnProperty.call(p.update,f)&&(s[f]=p.update[f]);return s.bottomLoad=new N(n.value0),s}(),a}))(function(){return qc(n.value1)});if(n instanceof Yv)return Ms(xs(function(p){var a={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(a[o]=p[o]);return a.pages=Gv(n.value0.key)(p.pages),a.update=function(){var l={};for(var u in p.update)({}).hasOwnProperty.call(p.update,u)&&(l[u]=p.update[u]);return l.bottomLoad=z.value,l}(),a}))(function(){return qc(n.value1)});if(n instanceof Zv){var r=function(p){if(p instanceof z)return z.value;if(p instanceof N)return new N(function(){var a={};for(var o in p.value0)({}).hasOwnProperty.call(p.value0,o)&&(a[o]=p.value0[o]);return a.visibleHeight=n.value0.height,a}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 104, column 11 - line 104, column 44): "+[p.constructor.name])};return Ms(xs(function(p){var a={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(a[o]=p[o]);return a.pages=Sj(r)(n.value0.id)(p.pages),a}))(function(){return qc(n.value1)})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 63, column 5 - line 69, column 13): "+[n.constructor.name])};return Ms(xs(function(n){var r={};for(var p in n)({}).hasOwnProperty.call(n,p)&&(r[p]=n[p]);return r.update=function(){var a={};for(var o in n.update)({}).hasOwnProperty.call(n.update,o)&&(a[o]=n.update[o]);return a.scroll=z.value,a}(),r}))(function(){return Lj(t)(e)})},Hj=function(e){return dt(new Xv(e,void 0))},Oj=function(e){return dt(new Yv(e,void 0))},rk=function(e){return function(t){var n=ts(e.preloaded)>(e.feedParams.preloadedPages+e.feedParams.deadZone|0),r=ts(e.preloaded)<(e.feedParams.preloadedPages-e.feedParams.deadZone|0),p=function(f){return f.value1.visibleHeight<Ej(1)(Ke(0)(Tj)(Mj(xj(function(h){return h.visibleHeight})(e.pages))))},a=tr(g_(p)(pl(tk(e.pages)))),o=a<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),l=a>(e.feedParams.hiddenPages+e.feedParams.deadZone|0),u=tr(g_(p)(tk(e.pages))),i=u<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),s=u>(e.feedParams.hiddenPages+e.feedParams.deadZone|0);return wf(rE(t))(function(){return wf(Sf(e.feedParams.enableTop&&i)(Ef(Ij)(ns(e.preloaded))))(function(){return wf(Sf(e.feedParams.enableTop&&s)(Ef(Aj)(Ya(e.pages))))(function(){return wf(Sf(e.feedParams.enableTop&&r)(Ef(Rj)(Ya(e.preloaded))))(function(){return wf(Sf(e.feedParams.enableTop&&n)(Ef($j)(Ya(e.preloaded))))(function(){return wf(Sf(o)(Ef(Hj)(ns(e.pages))))(function(){return Sf(l)(Ef(Oj)(ns(e.pages)))})})})})})})}};var qj=ut($n);var zj=gr();var aE=function(){return function(e){var t=zj(e);return function(n){var r=t(n);return function(p){return function(a){return function(o){return qj(r(p)(a)(o(void 0)))}}}}}};var Gj=nt(rt);var ak=function(e){var t=X(Cf(e)),n=Df(e),r=ee(n),p=GO(e),a=Gj(n),o=Nv(e),l=function(u){return u===0?t(void 0):r(p)(function(i){return a(o(i))(function(){return l(u-1|0)})})};return l};var Jj=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(r){return function(p){return function(a){return function(o){var l=function(u){return function(i){if(u instanceof jr)return Op(u.value0);if(u instanceof Kr)return l(u.value1(void 0))(r(i)(u.value0));if(u instanceof Qr)return t(u.value0)(function(s){return l(s)(i)});if(u instanceof Dr)return n(a(i));throw new Error("Failed pattern match at Pipes.Prelude (line 202, column 14 - line 206, column 39): "+[u.constructor.name])}};return l(o)(p)}}}}};var ik=function(e){var t=function(r){return function(p){return function(a){return r(function(o){return new Ye(p,o)}(a))}}},n=function(r){return r(Ze.value)};return Jj(e)(t)(de(_e))(n)};var on=ee(Nt),iE=gn(Xt),Kj=Ur(yv),Mf=Io(It),uu=ct(Xt)(Ht),Tf=Tn(ic)(Xt),Fs=X(Xt),sE=nt(rt),ng=wt(sf),cE=V(FS($r)),lE=Oi(Bn),fE=Pv(ti),dE=ik(fE),pE=IS(fE),hE=ak(fE),Gp=V($n),Xr=sE(Nt),_E=dl(qr),fk=Rr(It),Fa=fn(It),uE=Gr(yt),dk=Za(yt),uk=ut($n),Qj=yn(Lp),Xj=sE(Qt),Yj=V(wp),eg=rs(yt),Zj=V_(yt),pk={reflectSymbol:function(){return"page"}},eK=aE()(pk)(yt),tK=Ao(It),nK=ct(rn)(Ht),rK=ci()(pk)(yt),ko=sE(yo),sk=V(vt),ck=Gl(Jo),oK=t0(yt)(id),aK=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mE=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hk=function(){function e(){}return e.value=new e,e}(),tg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lk=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),og=function(e){return e.onElement},iK=function(e){var t=Cn(ii(e.MonadAff1()));return function(n){var r=function(p){return on(t(IP(p)))(function(a){return iE(Qs(a))(Kj(n)(t(Up(void 0)(p))))})};return on(Mf(function(p){return p.lock}))(function(p){return uu(r)(p)})}},uK=function(e){var t=Le(An(e.MonadAff1().MonadEffect0()));return function(n){if(n instanceof aK)return on(Pr("feed"))(function(r){return He(Tf)(r)(function(p){var a=function(o){return function(){var u=tf(p)();return sp(u+o)(p)()}};return Fs(n.value0(a))})});if(n instanceof mE)return on(Pr("feed"))(function(r){return He(Tf)(r)(function(p){return t(function(){var o=tf(p)();return sp(o+n.value0)(p)(),n.value1})})});if(n instanceof rg)return on(Pr("feed"))(function(r){return He(Tf)(r)(function(p){return t(function(){var o=tf(p)();return n.value0(o)})})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 90, column 1 - line 92, column 93): "+[n.constructor.name])}},sK=function(e){return e.feedInsert};var _k=function(e){return e.feedBelow},cK=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),r=ng(n),p=_k(e),a=Cn(ii(t)),o=ct(n.Applicative0())(mt),l=og(e);return function(u){var i=on(Mf(function(s){return s.feedParams.initialElement}))(function(s){return on(Mf(function(f){return f.feedParams}))(function(f){return on(r(p(s)))(function(h){var d=cE(lE)(dE(pE(h)(hE(f.pageSize-1|0))));return Gp(xn(s))(a(Ov(d)))})})});return on(i)(function(s){return Xr(r(o(l)(s)))(function(){return Fs({id:0,elements:s,parent:u,pageHeight:0,visibleHeight:0})})})}},lK=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),r=ng(n),p=_k(e),a=Cn(ii(t)),o=ct(n.Applicative0())(mt),l=og(e);return function(u){return function(i){var s=function(f){return on(Mf(function(h){return h.feedParams}))(function(h){return on(r(p(f)))(function(d){var c=cE(lE)(dE(pE(d)(hE(h.pageSize))));return on(a(Ov(c)))(function(_){return Xr(r(o(l)(_)))(function(){var m=sc(_);return Fs(m?z.value:new N({id:i.id+1|0,elements:_,parent:u,pageHeight:0,visibleHeight:0}))})})})})};return Gp(_E)(Tf(s)(Tl(i.elements)))}}},fK=function(e){return e.feedAbove},mk=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),r=ng(n),p=fK(e),a=Cn(ii(t)),o=ct(n.Applicative0())(mt),l=og(e);return function(u){return function(i){var s=function(f){return on(Mf(function(h){return h.feedParams}))(function(h){return on(r(p(f)))(function(d){var c=cE(lE)(dE(pE(d)(hE(h.pageSize))));return on(Gp(pl)(a(Ov(c))))(function(_){return Xr(r(o(l)(_)))(function(){var m=sc(_);return Fs(m?z.value:new N({id:i.id-1|0,elements:_,parent:u,pageHeight:0,visibleHeight:0}))})})})})};return Gp(_E)(Tf(s)(Hi(i.elements)))}}},dK=function(e){var t=mk(e);return function(n){return on(fk)(function(r){var p=ts(r.preloaded)>r.feedParams.preloadedPages,a=ts(r.preloaded)<r.feedParams.preloadedPages;return Xr(iE(a)(function(){var o=Ke(Ya(r.pages))(N.create)(Ya(r.preloaded));return on(Gp(_E)(Tf(function(l){return t(n)(l.value)})(o)))(function(l){return uu(function(u){return Fa(function(i){var s={};for(var f in i)({}).hasOwnProperty.call(i,f)&&(s[f]=i[f]);return s.preloaded=uE(u.id)(u)(i.preloaded),s})})(l)})}()))(function(){return iE(p)(Fa(function(o){var l={};for(var u in o)({}).hasOwnProperty.call(o,u)&&(l[u]=o[u]);return l.preloaded=Ke(o.preloaded)(function(i){return dk(i.key)(o.preloaded)})(Ya(o.preloaded)),l}))})})}},vk=function(e){return{initialElement:e,pageSize:10,hiddenPages:6,preloadedPages:6,deadZone:2,debounce:333,enableTop:!1,preloadMillis:333.3}},gk=function(){return pt.value}(),pK=function(e){var t=dK(e),n=cK(e),r=e.MonadAff1(),p=Cn(ii(r)),a=r.MonadEffect0(),o=ng(a.Monad0()),l=sK(e),u=e.PageElement0().PageOrder0(),i=Td(u.Ord0()),s=Vp(u),f=og(e),h=XP(u),d=iK(e),c=Le(An(a)),_=mk(e),m=lK(e);return function(v){if(v instanceof hk){var y=function(x){return function(E){return function(T){var M=T>=x.preloadedPages;return M?Fs(new Bt(T)):Xr(t(E))(function(){return Fs(new Pt(T+1|0))})}}},C=function(x){return on(n(x))(function(E){return Xr(Fa(function(T){var M={};for(var w in T)({}).hasOwnProperty.call(T,w)&&(M[w]=T[w]);return M.pages=wc(0)(E),M}))(function(){return on(Mf(function(T){return T.feedParams}))(function(T){return Xr(uk(Qj(y(T)(x))(0)))(function(){return on(p(Xj(YD(T.preloadMillis))(function(){return RP(void 0)})))(function(M){return Fa(function(w){var F={};for(var L in w)({}).hasOwnProperty.call(w,L)&&(F[L]=w[L]);return F.lock=new N(M),F})})})})})})};return Xr(on(Pr("feed"))(uu(C)))(function(){return on(o(l))(function(x){return uu(function(E){return uk(Rn(Yj(lk.create)(E)))})(x)})})}if(v instanceof lk){var S=function(x){if(x instanceof z)return z.value;if(x instanceof N)return new N(function(){var E={};for(var T in x.value0)({}).hasOwnProperty.call(x.value0,T)&&(E[T]=x.value0[T]);return E.elements=i(Md(s)(v.value0)(x.value0.elements)),E}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 156, column 5 - line 156, column 33): "+[x.constructor.name])},D=function(x){return function(E){var T={};for(var M in E)({}).hasOwnProperty.call(E,M)&&(T[M]=E[M]);return T.pages=eg(S)(x)(E.pages),T.preloaded=eg(S)(x)(E.preloaded),T}};return on(fk)(function(x){return Xr(o(f(v.value0)))(function(){var E=h(v.value0)(Zj(x.preloaded)(x.pages));return Xr(Fa(D(E)))(function(){return eK(gk)(E)(ZS.create(v.value0))})})})}if(v instanceof tg&&v.value0 instanceof eE){var g=function(x){if(x instanceof z)return z.value;if(x instanceof N)return new N(function(){var E={};for(var T in x.value0)({}).hasOwnProperty.call(x.value0,T)&&(E[T]=x.value0[T]);return E.pageHeight=v.value0.value0.height,E}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 165, column 5 - line 165, column 32): "+[x.constructor.name])},b=function(x){var E={};for(var T in x)({}).hasOwnProperty.call(x,T)&&(E[T]=x[T]);return E.pages=eg(g)(v.value0.value0.id)(x.pages),E.preloaded=eg(g)(v.value0.value0.id)(x.preloaded),E};return Fa(b)}if(v instanceof tg&&v.value0 instanceof tE)return Xr(Fa(function(x){return Wp(oE(rE(v.value0.value0)))(x)}))(function(){return d(on(Pr("feed"))(function(x){return He(uu)(x)(function(E){return on(c(tf(E)))(function(T){return on(tK(function(M){return Wp(oE(rk(M)(v.value0.value0)))(M)}))(function(M){return Xr(c(nK(function(w){return sp(T+w)(E)})(M.update.scroll)))(function(){return Xr(lr(M))(function(){return Xr(Fa(function(w){var F={};for(var L in w)({}).hasOwnProperty.call(w,L)&&(F[L]=w[L]);return F.update={topLoad:z.value,bottomLoad:z.value,scroll:z.value},F}))(function(){return Xr(He(uu)(M.update.topLoad)(function(w){return on(_(E)(w.value))(function(F){return uu(function(L){return Fa(function(R){var A={};for(var I in R)({}).hasOwnProperty.call(R,I)&&(A[I]=R[I]);return A.preloaded=uE(L.id)(L)(M.preloaded),A})})(F)})}))(function(){return Xr(He(uu)(M.update.bottomLoad)(function(w){return on(m(E)(w.value))(function(F){return uu(function(L){return Fa(function(R){var A={};for(var I in R)({}).hasOwnProperty.call(R,I)&&(A[I]=R[I]);return A.pages=uE(L.id)(L)(R.pages),A})})(F)})}))(function(){return p(YD(M.feedParams.debounce))})})})})})})})})}))});if(v instanceof tg&&v.value0 instanceof nE)return Fa(function(x){var E={};for(var T in x)({}).hasOwnProperty.call(x,T)&&(E[T]=x[T]);return E.pages=dk(v.value0.value0)(x.pages),E});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 120, column 1 - line 122, column 99): "+[v.constructor.name])}},hK=function(e){var t=KP(e.PageElement0());return function(n){var r=function(u){return rK(gk)(u.value0)(t)(u.value1)(tg.create)},p=Gt([si("feed"),bn(ko(SD(Xe(-50)))(function(){return ko(wD(Xe(50)))(function(){return ko(Ho(Pl(100)))(function(){return zv(qv)})})}))])(sk(r)(ck(n.pages))),a=Gt([bn(ko(SD(Xe(-50)))(function(){return ko(wD(Xe(50)))(function(){return ko(Ho(Pl(100)))(function(){return ko(Ro(-1))(function(){return ko(pr(Yu))(function(){return Yo(Pl(-100))})})})})}))])([]),o=function(u){return Gt([bn(ko(Ro(-2-oK(u.value0)|0))(function(){return ko(B_(0))(function(){return pr(Yu)})}))])([r(u)])},l=Gt([bn(ko(Ro(-2))(function(){return pr(Yu)}))])(sk(o)(ck(n.preloaded)));return Gt([bn(ko(ba(Pl(100)))(function(){return ko(Ho(Pl(100)))(function(){return Nc(Bp)})}))])([p,a,l])}},yk=function(e){return function(t){return Zt({initialState:function(n){return{feedParams:n,pages:_r,preloaded:_r,lock:z.value,update:{topLoad:z.value,bottomLoad:z.value,scroll:z.value}}},render:hK(t),eval:Yt({receive:it.receive,finalize:it.finalize,handleAction:pK(t),handleQuery:uK(t),initialize:new N(hk.value)})})}};var ag={suspend:yI,fork:QD,join:Jd,Monad0:function(){return ti},Functor1:function(){return EI}};var ig=function(e){return e.fork};var Ck=ne,La=ne,bk=function(e){var t=ct(e)(Ht);return function(n){return La(function(r){return t(n)(r.rendering)})}},mK=ne,wk=function(e){return function(t){return La(function(n){return mK(t(n.rendering))})}},vK=ne,ug=function(e){return function(t){return e(t)}},Sk=function(e){return function(t){return function(n){return function(r){return function(){var a=cn({})(),o=cn(fs)(),l=cn(fs)(),u=cn(n)(),i=cn(new N(Ze.value))(),s=cn(new N(Ze.value))(),f=cn(z.value)(),h=cn(1)(),d=cn(new N(_r))(),c=cn(_r)(),_={component:e,state:e.initialState(t),refs:_r,children:fs,childrenIn:o,childrenOut:l,selfRef:a,handlerRef:u,pendingQueries:i,pendingOuts:s,pendingHandlers:f,rendering:z.value,fresh:h,subscriptions:d,forks:c,lifecycleHandlers:r};return qt(_)(a)(),vK(a)}}}}};var gK=ct(rn)(Ht),yK=wn(qr),DK=ea(Xw),Hn=ee(Qt),en=Le(Dn),CK=nt(rt),Aa=CK(Qt),Lk=ct(Jr),bK=Lk(Bn),Ak=ig(ag),wK=Ql(us)(Tc)(Bn),hi=X(Jr),SK=V(iw),Ek=Ki(us),EK=V($r),Tk=Sc(us),TK=V(Dt),MK=Gr(Xw),xK=Y$(Tc),FK=Za(gv),LK=ix(Ua),AK=Gr(gv),Mk=Lk(Ht),xk=ea(gv),IK=ea(Vt),RK=ZI(Qi),$K=rs(Vt),HK=function(e){return function(t){return function(){var r=Qe(t)(),p=Qe(r.subscriptions)();return gK(dv)(yK(DK(e))(p))()}}},sg=function(e){return function(t){return Hn(en(Qe(e)))(function(n){if(n instanceof z)return t;if(n instanceof N)return en(qt(new N(new Ye(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},cg=function(e){return function(t){return Aa(en(qt({initializers:Ze.value,finalizers:Ze.value})(e)))(function(){return Hn(en(t))(function(n){return Hn(en(Qe(e)))(function(r){return Aa(bK(Ak)(r.finalizers))(function(){return Aa(wK(r.initializers))(function(){return hi(n)})})})})})}},zc=Kd(Sn(vo)(me(X(rn)(void 0)))),Fk=function(e){return function(t){return Hn(en(Qe(t)))(function(n){return en(u0(function(r){return{state:r+1|0,value:e(r)}})(n.fresh))})}},gE=function(e){return function(t){return function(n){return Hn(en(Qe(t)))(function(r){return Ls(e)(t)(r.component.eval(new pf(SK(N.create)(ZR(n)),me(z.value))))})}}},Ls=function(e){return function(t){return function(n){var r=function(a){return function(o){return Hn(en(Qe(a)))(function(l){return rH(function(u){var i=function(s){return Ek(Hn(en(Qe(s)))(function(f){return La(function(h){return gE(e)(h.selfRef)(u.value1)})(f)}))};return EK(u.value2)(Tk(u.value0(Tc)(i)(l.children)))})(o)})}},p=function(a){return function(o){if(o instanceof Sp)return Hn(en(Qe(a)))(function(l){var u=o.value0(l.state);if(of(l.state)(u.value1))return hi(u.value0);if(_n)return Aa(en(qt({component:l.component,refs:l.refs,children:l.children,childrenIn:l.childrenIn,childrenOut:l.childrenOut,selfRef:l.selfRef,handlerRef:l.handlerRef,pendingQueries:l.pendingQueries,pendingOuts:l.pendingOuts,pendingHandlers:l.pendingHandlers,rendering:l.rendering,fresh:l.fresh,subscriptions:l.subscriptions,forks:l.forks,lifecycleHandlers:l.lifecycleHandlers,state:u.value1})(a)))(function(){return Aa(cg(l.lifecycleHandlers)(e(l.lifecycleHandlers)(a)))(function(){return hi(u.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[u.constructor.name])});if(o instanceof Ep)return Hn(Fk(cH)(a))(function(l){return Hn(en(sH(o.value0(l))(function(u){return zc(yE(e)(a)(new Lc(u)))})))(function(u){return Hn(en(Qe(a)))(function(i){return Aa(en(ro(TK(MK(l)(u)))(i.subscriptions)))(function(){return hi(o.value1(l))})})})});if(o instanceof Tp)return Aa(en(HK(o.value0)(a)))(function(){return hi(o.value1)});if(o instanceof Hc)return o.value0;if(o instanceof Mp)return r(a)(o.value0);if(o instanceof xp)return Hn(en(Qe(a)))(function(l){return Hn(en(Qe(l.handlerRef)))(function(u){return Aa(sg(l.pendingOuts)(u(o.value0)))(function(){return hi(o.value1)})})});if(o instanceof pv)return Tk(xK(Jw(function(){var l=Ls(e)(a);return function(u){return Ek(l(u))}}())(o.value0)));if(o instanceof hv)return Hn(Fk(lH)(a))(function(l){return Hn(en(Qe(a)))(function(u){return Hn(en(cn(!1)))(function(i){return Hn(Ak(Gd(en(function(){return ro(FK(l))(u.forks)(),qt(!0)(i)()}))(Ls(e)(a)(o.value0))))(function(s){return Aa(en(LK(Qe(i))(ro(AK(l)(s))(u.forks))))(function(){return hi(o.value1(l))})})})})});if(o instanceof _v)return Hn(en(Qe(a)))(function(l){return Hn(en(Qe(l.forks)))(function(u){return Aa(Mk(Jd)(xk(o.value0)(u)))(function(){return hi(o.value1)})})});if(o instanceof mv)return Hn(en(Qe(a)))(function(l){return Hn(en(Qe(l.forks)))(function(u){return Aa(Mk(jd(ar("Cancelled")))(xk(o.value0)(u)))(function(){return hi(o.value1)})})});if(o instanceof Fp)return Hn(en(Qe(a)))(function(l){return hi(o.value1(IK(o.value0)(l.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[o.constructor.name])}};return RK(p(t))(n)}}},yE=function(e){return function(t){return function(n){if(n instanceof Xm)return en(He(ro)(t)(ug(function(r){return{component:r.component,state:r.state,children:r.children,childrenIn:r.childrenIn,childrenOut:r.childrenOut,selfRef:r.selfRef,handlerRef:r.handlerRef,pendingQueries:r.pendingQueries,pendingOuts:r.pendingOuts,pendingHandlers:r.pendingHandlers,rendering:r.rendering,fresh:r.fresh,subscriptions:r.subscriptions,forks:r.forks,lifecycleHandlers:r.lifecycleHandlers,refs:$K(me(n.value1))(n.value0)(r.refs)}})));if(n instanceof Lc)return Hn(en(Qe(t)))(function(r){return Ls(e)(t)(r.component.eval(new df(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var PK=ee(xr),kK=nt(rt),kk=u_(rn)(Ht),Nk=ct(Jr)(Bn),Bk=ig(ag),jp=wn(xr),Wk=ct(rn),Uk=Wk(Ht),Ik=Wk(Gi),Rk=kK(Qt),NK=Ql(us)(Tc)(Bn),Jp=Le(Dn),$k=X(rn),DE=V(Pe),CE=X(Jr),bE=gn(rn),BK=wk(Pe),WK=ut($r),Hk=Qm(rn),UK=bk(rn),qK=yn(t_),zK=cl(Pe),wE=ee(Qt),VK=Le(Wl),Ok=function(){return cn({initializers:Ze.value,finalizers:Ze.value})}(),Pk=function(e){return function(){var n=Qe(e)();return qt(z.value)(e)(),kk(n)(function(){var r=Nk(Bk);return function(p){return zc(r(Xi(p)))}}())()}},GK=function(e){return function(){return jp(Uk(Ik(dv)))(Qe(e.subscriptions))(),qt(z.value)(e.subscriptions)(),jp(Ik(function(){var n=jd(ar("finalized"));return function(r){return zc(n(r))}}()))(Qe(e.forks))(),qt(_r)(e.forks)()}},qk=function(e){return function(t){return function(n){var r=function(s){return function(f){return La(function(h){var d=Ls(o)(h.selfRef)(h.component.eval(new cf(void 0)));return ro(function(c){return{initializers:new Ye(Rk(NK(Xi(c.initializers)))(function(){return Rk(d)(function(){return Jp(function(){return Pk(h.pendingQueries)(),Pk(h.pendingOuts)()})})}),f),finalizers:c.finalizers}})(s)})}},p=function(s){return function(f){return function(h){return nS(function(d){return function(){var _=Ok(),m=Sk(d)(h)(f)(_)(),v=Qe(s)();return qt({initializers:Ze.value,finalizers:v.finalizers})(s)(),jp(La(function(){var y=o(s);return function(C){return y(function(S){return S.selfRef}(C))}}()))(Qe(m))(),jp(r(s)(v.initializers))(Qe(m))(),m}})}}},a=function(s){return function(f){return function(h){return function(d){return tS(function(c){return function(){var m=DE(c.pop)(Qe(h))(),v=function(){if(m instanceof N){qt(m.value0.value1)(h)();var C=Qe(m.value0.value0)();return La(function(S){return function(){return He(qt)(S.handlerRef)(function(){var g=Ke(CE(void 0))(f);return function(b){return g(c.output(b))}}())(),zc(Ls(o)(S.selfRef)(S.component.eval(new ff(c.input,void 0))))()}})(C)(),m.value0.value0}if(m instanceof z)return p(s)(function(){var S=Ke(CE(void 0))(f);return function(D){return S(c.output(D))}}())(c.input)(c.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[m.constructor.name])}(),y=DE(function(C){return Qs(c.get(C))})(Qe(d))();return bE(y)(Xd("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),ro(c.set(v))(d)(),PK(Qe(v))(BK(function(C){if(C instanceof z)return dD("Halogen internal error: child was not initialized in renderChild");if(C instanceof N)return $k(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},o=function(s){return function(f){return function(){var d=Qe(f)(),c=DE(Tu)(Qe(d.pendingHandlers))();bE(c)(qt(new N(Ze.value))(d.pendingHandlers))(),qt(fs)(d.childrenOut)(),qt(d.children)(d.childrenIn)();var _=function(){var S=sg(d.pendingHandlers),D=yE(o)(d.selfRef);return function(g){return S(WK(D(g)))}}(),m=function(){var S=sg(d.pendingQueries);return function(D){return S(_(Lc.create(D)))}}(),v=e.render(function(S){return zc(_(S))})(a(s)(m)(d.childrenIn)(d.childrenOut))(d.component.render(d.state))(d.rendering)(),y=Qe(d.childrenOut)(),C=Qe(d.childrenIn)();return Hk(C)(function(S){return function(){var g=Qe(S)();return UK(e.removeChild)(g)(),l(s)(g)()}})(),He(ro)(d.selfRef)(ug(function(S){return{component:S.component,state:S.state,refs:S.refs,childrenIn:S.childrenIn,childrenOut:S.childrenOut,selfRef:S.selfRef,handlerRef:S.handlerRef,pendingQueries:S.pendingQueries,pendingOuts:S.pendingOuts,pendingHandlers:S.pendingHandlers,fresh:S.fresh,subscriptions:S.subscriptions,forks:S.forks,lifecycleHandlers:S.lifecycleHandlers,rendering:new N(v),children:y}}))(),bE(c)(He(qK)(void 0)(function(S){return function(){var g=Qe(d.pendingHandlers)();qt(new N(Ze.value))(d.pendingHandlers)(),Uk(function(){var E=Nk(Bk);return function(T){return zc(E(Xi(T)))}}())(g)();var b=Qe(d.pendingHandlers)(),x=Ke(!1)(BI)(b);return x?zK(qt(z.value)(d.pendingHandlers))(new Bt(void 0))():new Pt(void 0)}}))()}}},l=function(s){return La(function(f){return function(){GK(f)();var d=Ls(o)(f.selfRef)(f.component.eval(new lf(void 0)));return ro(function(c){return{initializers:c.initializers,finalizers:new Ye(d,c.finalizers)}})(s)(),Hk(f.children)(function(c){return function(){var m=Qe(c)();return l(s)(m)()}})()}})},u=function(s){return function(f){return function(h){return wE(Jp(Qe(s)))(function(d){return d?CE(z.value):gE(o)(f)(h)})}}},i=function(s){return function(f){return function(h){return cg(f)(function(){var c=Qe(s)();return c?void 0:(qt(!0)(s)(),l(f)(h)(),La(function(_){return function(){var v=VK(Qe(_.selfRef))();return kk(v.rendering)(e.dispose)()}})(h)())})}}};return wE(Jp(Ok))(function(s){return wE(Jp(cn(!1)))(function(f){return cg(s)(function(){var d=Kn(),c=jp(Qe)(p(s)(function(){var _=jn(d.listener);return function(m){return Jp(_(m))}}())(n)(t))();return La(function(_){return $k({query:u(f)(_.selfRef),messages:d.emitter,dispose:i(f)(s)(c)})})(c)()})})})}}};var Ia=function(e){return function(t){return function(){return t[e]}}};var jK=Ia("baseURI"),KK=Ia("ownerDocument"),zk=Ia("parentNode"),QK=Ia("parentElement");var XK=Ia("childNodes"),YK=Ia("firstChild"),ZK=Ia("lastChild"),eQ=Ia("previousSibling"),Vk=Ia("nextSibling"),tQ=Ia("nodeValue");var nQ=Ia("textContent");function SE(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function lg(e){return function(t){return function(){t.appendChild(e)}}}function EE(e){return function(t){return function(){t.removeChild(e)}}}var Gk=V(Pe);var TE=function(){var e=Gk(dn);return function(t){return e(zk(t))}}();var Jk=function(){var e=Gk(dn);return function(t){return e(Vk(t))}}();var ME=function(e,t,n){var r=0,p;return function(a){if(r===2)return p;if(r===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return r=1,p=n(),r=2,p}},xE=ut(Pe),uQ=X(rn),sQ=ct(rn)(Ht),cQ=In(),lQ=gn(rn),fQ=_a(md(md(ha))),dQ=de(_e),pQ=ee(Qt),hQ=Le(Dn),_Q=V(Pe),mQ=wn(xr);var vQ=function(e){return function(t){return function(n){return t instanceof N&&n instanceof N?xE(SE(e)(t.value0)(n.value0)):t instanceof z&&n instanceof N?xE(lg(e)(n.value0)):uQ(void 0)}}},jk=function(e){return function(){var n=TE(e.node)();return sQ(function(r){return EE(e.node)(r)})(n)()}},gQ=function(e){return function(t){return function(n){var r=Ck(function(l){return l.node}),p=function(l){return l instanceof N?bo(l.value0):void 0},a=function(l){var u=dH(cQ)(l),i=ME("patch","Halogen.VDom.Driver",function(){return function(_,m){if(_ instanceof N){if(m instanceof hf)return bo(_.value0),f(100)(m.value0);if(m instanceof Cv){var v=Co(_.value0,m.value0);return Ln(new Fn(Or(v),new N(v),i(103),p))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[m.constructor.name])}return s(104)(m)}}),s=ME("render","Halogen.VDom.Driver",function(){return function(_){if(_ instanceof hf)return f(86)(_.value0);if(_ instanceof Cv){var m=u(_.value0);return Ln(new Fn(Or(m),new N(m),i(89),p))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[_.constructor.name])}}),f=ME("renderComponentSlot","Halogen.VDom.Driver",function(){return function(_){var m=Qe(t)(),v=m(_)(),y=r(v);return Ln(new Fn(y,z.value,i(117),p))}}),h=i(91),d=s(82),c=f(109);return d},o=H$(e);return{buildWidget:a,buildAttributes:o,document:n}}}},yQ=function(e){return function(t){var n=function(r){return function(p){return function(a){return function(o){if(o instanceof z)return function(){var u=cn(p)(),i=gQ(r)(u)(e),s=Dp(i)(a),f=Or(s);return xE(lg(f)(lP(t)))(),{machine:s,node:f,renderChildRef:u}};if(o instanceof N)return function(){qt(p)(o.value0.renderChildRef)();var u=TE(o.value0.node)(),i=Jk(o.value0.node)(),s=Co(o.value0.machine,a),f=Or(s);return lQ(fQ(of)(o.value0.node)(f))(vQ(f)(i)(u))(),{machine:s,node:f,renderChildRef:o.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[o.constructor.name])}}}};return{render:n,renderChild:dQ,removeChild:jk,dispose:jk}}},FE=function(e){return function(t){return function(n){return pQ(hQ(_Q(iP)(mQ(bf)(aa))))(function(r){return qk(yQ(r)(n))(e)(t)})}}};var DQ=V(ri),CQ=V($n),bQ=fn(rm(Er)),wQ=Qm(Qd(Er)),SQ=ci(),EQ=Km(),TQ=gr(),MQ=Jm(),LE=function(){function e(){}return e.value=new e,e}(),AE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),IE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qk=function(e){return e},Kp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Zp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),eh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),th=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var xQ={lift:function(e){return function(t){return Qk(dt(Qp.create(t)))}}},Xk=wt(xQ),FQ=ef;var xf=function(e){return{liftEffect:function(){var t=Xk(e.Monad0()),n=Le(e);return function(r){return t(n(r))}}(),Monad0:function(){return FQ}}},Yk=function(e){var t=e.MonadEffect0(),n=xf(t);return{liftAff:function(){var r=Xk(t.Monad0()),p=Cn(e);return function(a){return r(p(a))}}(),MonadEffect0:function(){return n}}},Zk=ri,e2=function(e){var t=V(e);return{map:function(n){return function(r){if(r instanceof Kp)return new Kp(DQ(n)(r.value0));if(r instanceof Qp)return new Qp(t(n)(r.value0));if(r instanceof Xp)return new Xp(function(p){return n(r.value0(p))});if(r instanceof Yp)return new Yp(r.value0,n(r.value1));if(r instanceof Zp)return new Zp(r.value0,n(r.value1));if(r instanceof fg)return new fg(r.value0,n(r.value1));if(r instanceof eh)return new eh(CQ(n)(r.value0));if(r instanceof dg)return new dg(function(p){return n(r.value0(p))});if(r instanceof th)return new th(r.value0,n(r.value1));throw new Error("Failed pattern match at Halogen.XShell.Free (line 71, column 1 - line 80, column 60): "+[n.constructor.name,r.constructor.name])}}}},Vc=cr,LQ=ee(Vc),t2=np,As=vr,Wt=function(e){return Qk(dt(Kp.create(e)))},n2=function(e){var t=function(n){return bQ(xn(n.window))};return Wp(wQ(e)(t))([])},r2=function(e){return dt(new Yp(e,void 0))};var o2=function(e){return dt(new th(e,void 0))},RE=function(){return function(e){var t=SQ(e),n=EQ(e);return function(r){var p=t(r),a=n(r);return function(){return function(o){return function(l){return function(u){return function(i){return function(s){var f=p(o)(l)(u)(i)(function(h){return IE.create(s(h))});return o2(a(o)(l)({window:f}))}}}}}}}}},AQ=function(e){return dt(new eh(e))},$E=function(){return function(e){var t=TQ(e);return function(n){var r=t(n);return function(){return function(p){return function(a){return function(o){return AQ(r(p)(a)(o))}}}}}}},_i=function(e){return dt(new Zp(e,void 0))},So=function(){return dt(new Xp(de(_e)))}(),Qn=function(e){return LQ(So)(function(t){return r2(e(t))})},HE=function(){return function(e){var t=MQ(e);return function(n){var r=t(n);return function(){return function(p){return function(a){return o2(function(o){return Ke(o)(mn)(r(p)(a)(o))})}}}}}};var Ut=Mt(or),a2=function(){function e(){}return e.value=new e,e}(),IQ=function(){function e(){}return e.value=new e,e}(),i2=function(){function e(){}return e.value=new e,e}(),RQ=function(){function e(){}return e.value=new e,e}(),$Q=function(){function e(){}return e.value=new e,e}(),HQ=function(){function e(){}return e.value=new e,e}(),u2=function(){function e(){}return e.value=new e,e}(),OE=function(){function e(){}return e.value=new e,e}(),OQ=function(){function e(){}return e.value=new e,e}(),PQ=function(){function e(){}return e.value=new e,e}(),kQ=function(){function e(){}return e.value=new e,e}(),NQ=function(){function e(){}return e.value=new e,e}(),BQ=function(){function e(){}return e.value=new e,e}(),WQ=function(){function e(){}return e.value=new e,e}(),UQ=function(){function e(){}return e.value=new e,e}(),qQ=function(){function e(){}return e.value=new e,e}(),zQ=function(){function e(){}return e.value=new e,e}(),VQ=function(){function e(){}return e.value=new e,e}(),GQ=function(){function e(){}return e.value=new e,e}(),JQ=function(){function e(){}return e.value=new e,e}(),jQ=function(){function e(){}return e.value=new e,e}(),KQ=function(){function e(){}return e.value=new e,e}(),QQ=function(){function e(){}return e.value=new e,e}(),XQ=function(){function e(){}return e.value=new e,e}(),YQ=function(){function e(){}return e.value=new e,e}(),ZQ=function(){function e(){}return e.value=new e,e}(),eX=function(){function e(){}return e.value=new e,e}(),tX=function(){function e(){}return e.value=new e,e}(),nX=function(){function e(){}return e.value=new e,e}(),rX=function(){function e(){}return e.value=new e,e}(),oX=function(){function e(){}return e.value=new e,e}(),aX=function(){function e(){}return e.value=new e,e}(),iX=function(){function e(){}return e.value=new e,e}();var uX={value:function(e){if(e instanceof a2)return Ut("default");if(e instanceof IQ)return Ut("help");if(e instanceof i2)return Ut("pointer");if(e instanceof RQ)return Ut("progress");if(e instanceof $Q)return Ut("wait");if(e instanceof HQ)return Ut("cell");if(e instanceof u2)return Ut("crosshair");if(e instanceof OE)return Ut("text");if(e instanceof OQ)return Ut("vertical-text");if(e instanceof PQ)return Ut("alias");if(e instanceof kQ)return Ut("copy");if(e instanceof NQ)return Ut("move");if(e instanceof BQ)return Ut("no-drop");if(e instanceof WQ)return Ut("not-allowed");if(e instanceof UQ)return Ut("grab");if(e instanceof qQ)return Ut("grabbing");if(e instanceof zQ)return Ut("all-scroll");if(e instanceof VQ)return Ut("col-resize");if(e instanceof GQ)return Ut("row-resize");if(e instanceof JQ)return Ut("n-resize");if(e instanceof jQ)return Ut("e-resize");if(e instanceof KQ)return Ut("s-resize");if(e instanceof QQ)return Ut("w-resize");if(e instanceof XQ)return Ut("ne-resize");if(e instanceof YQ)return Ut("nw-resize");if(e instanceof ZQ)return Ut("se-resize");if(e instanceof eX)return Ut("sw-resize");if(e instanceof tX)return Ut("ew-resize");if(e instanceof nX)return Ut("ns-resize");if(e instanceof rX)return Ut("nesw-resize");if(e instanceof oX)return Ut("nwse-resize");if(e instanceof aX)return Ut("zoom-in");if(e instanceof iX)return Ut("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var PE=function(){return i2.value}();var kE=function(){return a2.value}(),Gc=Kt(uX)(Mt(Vn)("cursor")),s2=function(){return u2.value}();var cX=Mt(Vn);var c2=Kt(Bu)(cX("color"));var NE=Mt(or),fX=Mt(Vn);var dX={value:function(e){return e}},l2=NE("underline"),hg=Kt(dX)(fX("text-decoration")),f2=NE("overline");var d2=NE("line-through");var be=nt(rt)(yo),Xn=Kt(Wu),Wn=Mt(Vn),hX=DD(Wu),_X=De(Hl),mX=Mt(A_),vX=Kt(mc),BE=function(){var e=ft(zt)(Ct("xterm")),t=ft(zt)(Ct("xterm-viewport")),n=be(xt(ft(zt)(Ct("xterm-underline-1")))(hg(l2)))(function(){return be(xt(ft(zt)(Ct("xterm-underline-2")))(Xn(Wn("text-decoration"))("double underline")))(function(){return be(xt(ft(zt)(Ct("xterm-underline-3")))(Xn(Wn("text-decoration"))("wavy underline")))(function(){return be(xt(ft(zt)(Ct("xterm-underline-4")))(Xn(Wn("text-decoration"))("dotted underline")))(function(){return xt(ft(zt)(Ct("xterm-underline-5")))(Xn(Wn("text-decoration"))("dashed underline"))})})})}),r=ft(zt)(Ct("xterm-scroll-area")),p=ft(zt)(Ct("xterm-screen")),a=ft(zt)(Ct("xterm-decoration-overview-ruler")),o=be(xt(ft(zt)(Ct("xterm-overline")))(hg(f2)))(function(){return be(xt(ft(ft(zt)(Ct("xterm-underline-1")))(Ct("xterm-overline")))(Xn(Wn("text-decoration"))("overline underline")))(function(){return be(xt(ft(ft(zt)(Ct("xterm-underline-2")))(Ct("xterm-overline")))(Xn(Wn("text-decoration"))("overline double underline")))(function(){return be(xt(ft(ft(zt)(Ct("xterm-underline-3")))(Ct("xterm-overline")))(Xn(Wn("text-decoration"))("overline wavy underline")))(function(){return be(xt(ft(ft(zt)(Ct("xterm-underline-4")))(Ct("xterm-overline")))(Xn(Wn("text-decoration"))("overline dotted underline")))(function(){return xt(ft(ft(zt)(Ct("xterm-underline-5")))(Ct("xterm-overline")))(Xn(Wn("text-decoration"))("overline dashed underline"))})})})})}),l=ft(zt)(Ct("xterm-message")),u=ft(zt)(Ct("live-region")),i=ft(zt)(Ct("xterm-helper-textarea")),s=ft(zt)(Ct("xterm-helpers")),f=ft(zt)(Ct("xterm-dim")),h=ft(zt)(Ct("xterm-decoration-top")),d=ft(zt)(Ct("xterm-decoration-container")),c=ft(zt)(Ct("xterm-decoration")),_=ft(zt)(Ct("composition-view")),m=ft(zt)(Ct("xterm-char-measure-element")),v=be(pr(Ca))(function(){return be(Vi(Xe(0)))(function(){return be(Yo(Xe(0)))(function(){return be(ED(Xe(0)))(function(){return be(U_(Xe(0)))(function(){return be(Ro(10))(function(){return be(Xn(Wn("color"))("transparent"))(function(){return Xn(Wn("pointer-events"))("none")})})})})})})}),y=ft(zt)(Ct("xterm-accessibility"));return be(xt(e)(be(Gc(OE.value))(function(){return be(pr(Yu))(function(){return hX(_X(Od)(mX("user-select")))("none")})})))(function(){return be(xt(ft(e)(Ct("focus")))(Xn(Wn("outline"))("none")))(function(){return be(xt(ft(e)(oA("focus")))(Xn(Wn("outline"))("none")))(function(){return be(xt(Gn(e)(s))(be(pr(Ca))(function(){return be(Yo(Xe(0)))(function(){return Ro(5)})})))(function(){return be(xt(Gn(e)(i))(be(q_(Xe(0))(Xe(0))(Xe(0))(Xe(0)))(function(){return be(vX(Wn("border"))(0))(function(){return be(RA(Xe(0))(Xe(0))(Xe(0))(Xe(0)))(function(){return be(pr(Ca))(function(){return be(B_(0))(function(){return be(Vi(uD(-9999)))(function(){return be(Yo(Xe(0)))(function(){return be(ba(Xe(0)))(function(){return be(Ho(Xe(0)))(function(){return be(Ro(-5))(function(){return be(Xn(Wn("whitespace"))("nowrap"))(function(){return be(Nc(Bp))(function(){return Xn(Wn("resize"))("none")})})})})})})})})})})})})))(function(){return be(xt(Gn(e)(_))(be(Zd(jo))(function(){return be(c2(qL))(function(){return be($o(EA))(function(){return be(pr(Ca))(function(){return be(Xn(Wn("white-space"))("nowrap"))(function(){return Ro(1)})})})})})))(function(){return be(xt(Gn(e)(ft(_)(Ct("active"))))($o(TA)))(function(){return be(xt(Gn(e)(t))(be(Zd(jo))(function(){return be(zv(qv))(function(){return be(Gc(kE))(function(){return be(pr(Ca))(function(){return be(U_(Xe(0)))(function(){return be(Vi(Xe(0)))(function(){return be(Yo(Xe(0)))(function(){return ED(Xe(0))})})})})})})})))(function(){return be(xt(Gn(e)(p))(pr(Yu)))(function(){return be(xt(Gn(e)(Gn(p)($_("canvas"))))(be(pr(Ca))(function(){return be(Vi(Xe(0)))(function(){return Yo(Xe(0))})})))(function(){return be(xt(Gn(e)(r))(Xn(Wn("visibility"))("hidden")))(function(){return be(xt(m)(be($o(SA))(function(){return be(Xn(Wn("visibility"))("hidden"))(function(){return be(pr(Ca))(function(){return be(Yo(Xe(0)))(function(){return be(Vi(uD(-9999)))(function(){return Xn(Wn("line-height"))("normal")})})})})})))(function(){return be(xt(ft(e)(Ct("enable-mouse-events")))(Gc(kE)))(function(){return be(xt(ft(e)(Ct("xterm-cursor-pointer")))(Gc(PE)))(function(){return be(xt(Gn(e)(ft(zt)(Ct("xterm-cursor-pointer"))))(Gc(PE)))(function(){return be(xt(ft(ft(e)(Ct("column-select")))(Ct("focus")))(Gc(s2)))(function(){return be(xt(Gn(e)(y))(v))(function(){return be(xt(Gn(e)(l))(v))(function(){return be(xt(Gn(e)(u))(be(pr(Ca))(function(){return be(Vi(Xe(-9999)))(function(){return be(ba(Xe(1)))(function(){return be(Ho(Xe(1)))(function(){return Nc(Bp)})})})})))(function(){return be(xt(f)(Xn(Wn("opacity"))("1 !important")))(function(){return be(n)(function(){return be(o)(function(){return be(xt(ft(zt)(Ct("xterm-strikethrough")))(hg(d2)))(function(){return be(xt(Gn(Gn(p)(d))(c))(be(Ro(6))(function(){return pr(Ca)})))(function(){return be(xt(Gn(Gn(p)(d))(ft(c)(Ct("xterm-decoration-top-layer"))))(Ro(7)))(function(){return be(xt(a)(be(Ro(8))(function(){return be(pr(Ca))(function(){return be(Yo(Xe(0)))(function(){return be(U_(Xe(0)))(function(){return Xn(Wn("pointer-events"))("none")})})})})))(function(){return xt(h)(be(Ro(2))(function(){return pr(Yu)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var p2=e=>()=>e.type,WE=e=>()=>e.cursorY,UE=e=>()=>e.cursorX,qE=e=>()=>e.viewportY,zE=e=>()=>e.baseY,VE=e=>()=>e.length,h2=e=>t=>()=>e.getLine(t),GE=e=>()=>e.getNullCell();var Ff=function(e){return up(e)?z.value:new N(Cm(e))};var DX=V(Pe),CX=function(){function e(){}return e.value=new e,e}(),bX=function(){function e(){}return e.value=new e,e}(),_2=function(e){return function(t){return DX(Ff)(h2(e)(t))}},m2=function(e){return function(){var n=p2(e)();return n==="normal"?CX.value:bX.value}};var jE=e=>()=>e.isWrapped,KE=e=>()=>e.length;var yg=de(_e),mi=V(Pe),QE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_g=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),XE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),YE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),eT=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),gg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),TX={map:function(e){return function(t){if(t instanceof QE)return new QE(function(n){return e(t.value0(n))});if(t instanceof _g)return new _g(function(n){return e(t.value0(n))});if(t instanceof XE)return new XE(function(n){return e(t.value0(n))});if(t instanceof YE)return new YE(function(n){return e(t.value0(n))});if(t instanceof ZE)return new ZE(function(n){return e(t.value0(n))});if(t instanceof mg)return new mg(function(n){return e(t.value0(n))});if(t instanceof vg)return new vg(t.value0,function(n){return e(t.value1(n))});if(t instanceof eT)return new eT(t.value0,function(n){return e(t.value1(n))});if(t instanceof gg)return new gg(t.value0,function(n){return e(t.value1(n))});if(t instanceof tT)return new tT(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},MX=na(TX);var v2=function(e){var t=e.Monad0(),n=ee(Ji(t.Bind1())),r=Ir(as(t)),p=Le(ei(e));return function(a){var o=function(l){if(l instanceof QE)return n(r)(function(u){return p(mi(l.value0)(m2(u)))});if(l instanceof _g)return n(r)(function(u){return p(mi(l.value0)(UE(u)))});if(l instanceof XE)return n(r)(function(u){return p(mi(l.value0)(WE(u)))});if(l instanceof YE)return n(r)(function(u){return p(mi(l.value0)(qE(u)))});if(l instanceof ZE)return n(r)(function(u){return p(mi(l.value0)(zE(u)))});if(l instanceof mg)return n(r)(function(u){return p(mi(l.value0)(VE(u)))});if(l instanceof vg)return n(r)(function(u){return p(mi(l.value1)(_2(u)(l.value0)))});if(l instanceof eT)return p(mi(l.value1)(jE(l.value0)));if(l instanceof gg)return p(mi(l.value1)(KE(l.value0)));if(l instanceof tT)return n(r)(function(u){return p(mi(l.value0)(GE(u)))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 19, column 5 - line 21, column 40): "+[l.constructor.name])};return MX(is(a))(o)}},nT=function(e){return dt(new gg(e,yg))};var rT=function(e){return dt(new vg(e,yg))};var oT=function(){return dt(new _g(yg))}();var aT=function(){return dt(new mg(yg))}();var iT=e=>()=>e.cursorBlink,uT=e=>t=>()=>e.cursorBlink=t,sT=e=>()=>e.fontFamily,cT=e=>t=>()=>e.fontFamily=t;var y2=au("fontFamily");var D2=au("cursorBlink");var b2=V(Pe),$X=nt(rt),w2=de(_e),Dg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),bg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lT=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HX={map:function(e){return function(t){if(t instanceof Dg)return new Dg(function(n){return e(t.value0(n))});if(t instanceof Cg)return new Cg(t.value0,e(t.value1));if(t instanceof bg)return new bg(function(n){return e(t.value0(n))});if(t instanceof lT)return new lT(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},OX=na(HX);var vi=function(e){return dt(new Cg(e,void 0))},S2=function(e){var t=e.Monad0(),n=Ji(t.Bind1()),r=ee(n),p=Ir(as(t)),a=Le(ei(e)),o=$X(n),l=X(Vd(t.Applicative0()));return function(u){var i=function(s){if(s instanceof Dg)return r(p)(function(f){return a(b2(s.value0)(iT(f)))});if(s instanceof Cg)return r(p)(function(f){return o(a(uT(f)(s.value0)))(function(){return l(s.value1)})});if(s instanceof bg)return r(p)(function(f){return a(b2(s.value0)(sT(f)))});if(s instanceof lT)return r(p)(function(f){return o(a(cT(f)(s.value0)))(function(){return l(s.value1)})});throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 19, column 5 - line 21, column 49): "+[s.constructor.name])};return OX(is(u))(i)}},fT=function(){return dt(new bg(w2))}(),dT=function(){return dt(new Dg(w2))}();var T2=wi(E2(),1),Sg=()=>new T2.FitAddon;var x2=wi(M2(),1),Tg=()=>new x2.WebglAddon;var L2=wi(F2(),1),xg=()=>new L2.WebLinksAddon;var A2={addon:ne},I2={addon:ne},R2={addon:de(_e)};var Fg=function(e){return e.addon};var vT=e=>e.active,gT=e=>e.normal,yT=e=>e.alternate;var P2=wi(O2(),1),k2=e=>t=>()=>new P2.Terminal(e,t),N2=e=>()=>e.element,B2=e=>()=>e.textarea,CT=e=>()=>e.rows,bT=e=>()=>e.cols,nh=e=>e.buffer,wT=e=>()=>e.markers;var ST=e=>e.options,ET=e=>t=>()=>e.onBell(t),TT=e=>t=>()=>e.onBinary(n=>t(n)());var MT=e=>t=>()=>e.onData(n=>t(n)()),xT=e=>t=>()=>e.onKey(n=>t(n)()),FT=e=>t=>()=>e.onLineFeed(t),LT=e=>t=>()=>e.onRender(n=>t(n)()),AT=e=>t=>()=>e.onWriteParsed(t),IT=e=>t=>()=>e.onResize(n=>t(n)()),RT=e=>t=>()=>e.onScroll(n=>t(n)()),$T=e=>t=>()=>e.onSelectionChange(t),HT=e=>t=>()=>e.onTitleChange(n=>t(n)());var OT=e=>t=>()=>e.open(t);var PT=e=>t=>n=>()=>e.write(t,n),kT=e=>t=>n=>()=>e.writeln(t,n);var W2=e=>t=>()=>e.loadAddon(t);var U2=V(Pe);var q2=function(){var e=U2(Ff);return function(t){return e(B2(t))}}();var z2=function(e){return function(t){return k2(Bc(e))(Bc(t))}},V2=function(e){var t=Fg(e);return function(n){return function(r){return W2(n)(t(r))}}};var G2=function(){var e=U2(Ff);return function(t){return e(N2(t))}}();var Ag=V(ri),Ug=de(_e),su=V(Pe),BT=v2(Wl)(t_),J2=nt(rt),Ig=Nd(uA),XX=V2(R2),Rg=ee(cr),WT=J2(cr),Lf=gn(vr),$g=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),UT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Og=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),VT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ng=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Wg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),YX={map:function(e){return function(t){if(t instanceof $g)return new $g(Ag(e)(t.value0));if(t instanceof UT)return new UT(function(n){return e(t.value0(n))});if(t instanceof qT)return new qT(function(n){return e(t.value0(n))});if(t instanceof Hg)return new Hg(function(n){return e(t.value0(n))});if(t instanceof zT)return new zT(function(n){return e(t.value0(n))});if(t instanceof Og)return new Og(Ag(e)(t.value0));if(t instanceof VT)return new VT(Ag(e)(t.value0));if(t instanceof GT)return new GT(Ag(e)(t.value0));if(t instanceof JT)return new JT(function(n){return e(t.value0(n))});if(t instanceof Pg)return new Pg(t.value0,e(t.value1));if(t instanceof kg)return new kg(t.value0,e(t.value1));if(t instanceof jT)return new jT(function(n){return e(t.value0(n))});if(t instanceof Ng)return new Ng(function(n){return e(t.value0(n))});if(t instanceof Bg)return new Bg(function(n){return e(t.value0(n))});if(t instanceof Wg)return new Wg(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},ZX=na(YX),Yn=function(e){return dt(new kg(e,void 0))},hn=function(e){return dt(new Pg(e,void 0))};var qg=function(e){return dt(new Og(e))},j2=function(){return dt(new Ng(Ug))}(),K2=function(){return dt(new Bg(Ug))}();var Q2=function(e){var t=e.MonadEffect0(),n=t.Monad0(),r=Ji(n.Bind1()),p=ee(r),a=Ir(as(n)),o=ei(t),l=S2(o),u=Le(o),i=Cn(am(e)),s=J2(r);return function(f){var h=is(f),d=l(h),c=function(_){if(_ instanceof $g)return p(a)(function(m){return Ea(d(_.value0))(ST(m))});if(_ instanceof UT)return p(a)(function(m){return u(su(_.value0)(G2(m)))});if(_ instanceof qT)return p(a)(function(m){return u(su(_.value0)(q2(m)))});if(_ instanceof Hg)return p(a)(function(m){return u(su(_.value0)(CT(m)))});if(_ instanceof zT)return p(a)(function(m){return u(su(_.value0)(bT(m)))});if(_ instanceof Og)return p(a)(function(m){return u(Ea(BT(_.value0))(vT(nh(m))))});if(_ instanceof VT)return p(a)(function(m){return u(Ea(BT(_.value0))(gT(nh(m))))});if(_ instanceof GT)return p(a)(function(m){return u(Ea(BT(_.value0))(yT(nh(m))))});if(_ instanceof JT)return p(a)(function(m){return u(su(_.value0)(wT(m)))});if(_ instanceof Pg)return p(a)(function(m){return p(i(JS))(function(v){return s(u(PT(m)(_.value0)(XD(Up(_.value1)(v)))))(function(){return i(GS(v))})})});if(_ instanceof kg)return p(a)(function(m){return p(i(JS))(function(v){return s(u(kT(m)(_.value0)(XD(Up(_.value1)(v)))))(function(){return i(GS(v))})})});if(_ instanceof jT)return u(su(function(m){return _.value0(Yh(m))})(Ig(Sg)));if(_ instanceof Ng)return u(su(function(m){return _.value0(Yh(m))})(Ig(xg)));if(_ instanceof Bg)return u(su(function(m){return _.value0(Yh(m))})(Ig(Tg)));if(_ instanceof Wg)return p(a)(function(m){return u(su(function(v){return _.value1(Ux(v))})(Ig(XX(m)(_.value0))))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 32, column 5 - line 34, column 55): "+[_.constructor.name])};return ZX(h)(c)}},zg=function(){return dt(new Hg(Ug))}(),ua=function(e){return dt($g.create(e))};var KT=function(e){var t=Fg(e);return function(n){return dt(new Wg(t(n),Ug))}},eY=KT(I2),tY=KT(A2),QT=function(e){return Rg(K2)(function(t){return WT(function(){if(t instanceof z)return Lf(e)(Yn("WebGL Addon unavailable"));if(t instanceof N)return WT(Lf(e)(hn("Loading WebGL ")))(function(){return Rg(eY(t.value0))(function(n){return Lf(e)(function(){return Yn(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return Rg(j2)(function(n){if(n instanceof z)return Lf(e)(Yn("WebLinks Addon unavailable"));if(n instanceof N)return WT(Lf(e)(hn("Loading WebLinks ")))(function(){return Rg(tY(n.value0))(function(r){return Lf(e)(function(){return Yn(r?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var X2=e=>()=>e.dispose();var Y2={toDisposable:de(_e)},rY=function(e){return e.toDisposable},Z2=function(e){return{dispose:function(){var t=rY(e);return function(n){return X2(t(n))}}()}},eN=function(e){return e.dispose};var Ft=ee(Nt),XT=Rr(It),aY=V($r),iY=Q2(ss)(Qi),Ra=fn(It),$a=nt(rt)(Nt),uY=ct(rn)(mt),sY=eN(Z2(Y2)),YT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lY=function(){function e(){}return e.value=new e,e}(),fY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZT=function(){function e(){}return e.value=new e,e}(),dY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pY=function(){function e(){}return e.value=new e,e}(),hY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_Y=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mY=function(){function e(){}return e.value=new e,e}(),vY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tN=function(){function e(){}return e.value=new e,e}(),nN=function(){function e(){}return e.value=new e,e}(),sa=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gY=function(e){return function(t){return yr([vO(BE),Gt([si("terminal")])([])])}},yY=function(e){var t=Cn(ii(e));return function(n){return Ft(XT)(function(r){return t(aY(N.create)(Ea(iY(n))(r.terminal)))})}},DY=function(e){var t=Le(An(e.MonadEffect0())),n=function(d){return Ft(t(Kn))(function(c){return Ft(t(AT(d)(jn(c.listener)(new sa(pY.value)))))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})},r=function(d){return Ft(t(Kn))(function(c){return Ft(t(HT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(vY.create(m)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})},p=function(d){return Ft(t(Kn))(function(c){return Ft(t($T(d)(jn(c.listener)(new sa(mY.value)))))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})},a=function(d){return Ft(t(Kn))(function(c){return Ft(t(RT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(_Y.create(m)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})},o=function(d){return Ft(t(Kn))(function(c){return Ft(t(IT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(hY.create(m)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})},l=function(d){return Ft(t(Kn))(function(c){return Ft(t(LT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(dY.create(m)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})},u=function(d){return Ft(t(Kn))(function(c){return Ft(t(FT(d)(jn(c.listener)(new sa(ZT.value)))))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})},i=function(d){return Ft(t(Kn))(function(c){return Ft(t(xT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(fY.create(m)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})},s=function(d){return Ft(t(Kn))(function(c){return Ft(t(MT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(YT.create(m)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})},f=function(d){return Ft(t(Kn))(function(c){return Ft(t(TT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(cY.create(m)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})},h=function(d){return Ft(t(Kn))(function(c){return Ft(t(ET(d)(jn(c.listener)(new sa(lY.value)))))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=xn(_)(m.disposables),v})})})})};return function(d){if(d instanceof tN)return Ft(Pr("terminal"))(function(c){if(c instanceof z)return t(ni("no terminal element"));if(c instanceof N)return Ft(XT)(function(_){return $a(t(OT(_.terminal)(c.value0)))(function(){return $a(h(_.terminal))(function(){return $a(f(_.terminal))(function(){return $a(i(_.terminal))(function(){return $a(u(_.terminal))(function(){return $a(l(_.terminal))(function(){return $a(n(_.terminal))(function(){return $a(o(_.terminal))(function(){return $a(a(_.terminal))(function(){return $a(p(_.terminal))(function(){return $a(r(_.terminal))(function(){return s(_.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.XTerm (line 117, column 5 - line 132, column 28): "+[c.constructor.name])});if(d instanceof nN)return Ft(XT)(function(c){return t(uY(sY)(c.disposables))});if(d instanceof sa)return lr(d.value0);throw new Error("Failed pattern match at Halogen.XTerm (line 114, column 16 - line 136, column 23): "+[d.constructor.name])}},rN=function(e){return Zt({initialState:function(t){return{terminal:t,disposables:[]}},render:gY(e),eval:Yt({receive:it.receive,handleAction:DY(e),handleQuery:yY(e),initialize:new N(tN.value),finalize:new N(nN.value)})})};var CY=De(sn),sN={reflectSymbol:function(){return"terminal"}},bY=ci()(sN)(jt),cN=qD(Oc),e1=ee(cN),t1=wt(Q_)(Oc),wY=gr()(sN)(jt),SY=X(Xt),aN=V($n),EY=wt(sf),lN=Rr(It),Af=X(VD(Oc)),Gg=nt(rt)(cN),fN=iI(It),n1=fn(fN),TY=Rr(fN),MY=aI(Lp),iN=ee(Nt),xY=De(HP),FY=st(OP),LY=fn(It),uN=ut($n),AY=X(As),dN=function(){return pt.value}(),IY=function(e){var t=rN(e);return function(n){return yr(CY([function(){if(n.terminal instanceof z)return yr([]);if(n.terminal instanceof N)return bY(dN)(void 0)(t)(n.terminal.value0)(AE.create);throw new Error("Failed pattern match at Halogen.XShell (line 49, column 8 - line 51, column 80): "+[n.terminal.constructor.name])}()])(n2(n.windows)))}},pN=function(e){var t=e.MonadEffect0().Monad0(),n=EY(t),r=na(e2(t.Bind1().Apply0().Functor0()))(MY);return function(p){var a=function(o){if(o instanceof Kp)return e1(t1(wY(dN)(void 0)(o.value0)))(function(l){return SY(l)});if(o instanceof Qp)return aN(N.create)(n(o.value0));if(o instanceof Xp)return e1(t1(lN))(function(l){return Af(o.value0(l.shell))});if(o instanceof Yp)return Gg(n1(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.shell=o.value0,u}))(function(){return Af(o.value1)});if(o instanceof Zp)return Gg(n1(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.interpreter=o.value0,u}))(function(){return Af(o.value1)});if(o instanceof fg)return Gg(t1(lr(o.value0)))(function(){return Af(o.value1)});if(o instanceof eh)return aN(N.create)(o.value0);if(o instanceof dg)return e1(TY)(function(l){return Af(o.value0(l.windows))});if(o instanceof th)return Gg(n1(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.windows=o.value0(l.windows),u}))(function(){return Af(o.value1)});throw new Error("Failed pattern match at Halogen.XShell (line 80, column 5 - line 82, column 22): "+[o.constructor.name])};return oI(r(a)(p))}},RY=function(e){var t=Le(An(e.MonadEffect0())),n=pN(e);return function(r){if(r instanceof LE)return iN(t(z2(xY(qp(y2)('"Cascadia Code", Menlo, monospace'))(qp(D2)(!0)))(FY)))(function(p){return LY(function(a){var o={};for(var l in a)({}).hasOwnProperty.call(a,l)&&(o[l]=a[l]);return o.terminal=new N(p),o})});if(r instanceof AE)return iN(lN)(function(p){return uN(n(p.interpreter(r.value0)))});if(r instanceof IE)return uN(n(r.value0));throw new Error("Failed pattern match at Halogen.XShell (line 61, column 16 - line 70, column 35): "+[r.constructor.name])}},Jg=function(e){return Zt({initialState:function(t){return{shell:t,interpreter:me(AY(void 0)),terminal:z.value,windows:fs}},render:IY(e),eval:Yt({receive:it.receive,finalize:it.finalize,handleAction:RY(e),handleQuery:pN(e),initialize:new N(LE.value)})})};var cu=ee(Nt),$Y=Ao(It),If=ut($n),gN=gr(),yN={reflectSymbol:function(){return"shell"}},rh=gN(yN)(jt),r1=Io(It),DN=nt(rt),Rf=DN(Nt),o1=fn(It),CN={reflectSymbol:function(){return"feed"}},a1=gN(CN)(ud),_N=de(_e),mN=ct(Xt)(Ht),i1=Ee(Sr),HY=gn(Xt),OY=Ee(ml(no)),PY=Oi(AO),kY=Ee(Xh(Sr)),oh=DN(yo),NY=ci()(CN)(ud),BY=yk($S)(tP(ss)),WY=oa()(yN)(jt),UY=Jg(ss),u1=Pc(U$);var bN=function(){function e(){}return e.value=new e,e}(),s1=function(){function e(){}return e.value=new e,e}(),wN=function(){function e(){}return e.value=new e,e}(),vN=function(){function e(){}return e.value=new e,e}(),SN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ah=function(e){return Wt(Yn(e))},$f=function(){return pt.value}(),jg=function(){return pt.value}(),EN=function(e){var t=Le(An(e));return function(n){if(n instanceof bN)return cu($Y(function(r){var p={};for(var a in r)({}).hasOwnProperty.call(r,a)&&(p[a]=r[a]);return p.top=!r.top,p}))(function(r){var p=function(){return r.top?"top loading/unloading enabled":"top loading/unloading disabled"}();return If(rh($f)(void 0)(ah(p)))});if(n instanceof s1)return cu(r1(function(r){return r.log}))(function(r){if(r instanceof N)return Rf(o1(function(p){var a={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(a[o]=p[o]);return a.log=z.value,a}))(function(){return Rf(vv(r.value0.value0))(function(){return t(OO(r.value0.value1))})});if(r instanceof z)return cu(t(Kn))(function(p){return cu(t(HO(200)(jn(p.listener)(vN.value))))(function(a){return cu(Rn(p.emitter))(function(o){return o1(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.log=new N(new Z(o,a)),u})})})});throw new Error("Failed pattern match at Examples.Halogen.Infinite.Scroll.Main (line 88, column 10 - line 97, column 60): "+[r.constructor.name])});if(n instanceof wN)return o1(function(r){var p={};for(var a in r)({}).hasOwnProperty.call(r,a)&&(p[a]=r[a]);return p.up=!r.up,p});if(n instanceof vN)return cu(r1(function(r){return r.top}))(function(r){return cu(a1(jg)(r)(new rg(_N)))(function(p){return cu(r1(function(a){return a.up}))(function(a){return He(mN)(p)(function(o){var l=function(){return a?-99:99}();return Rf(If(a1(jg)(r)(new mE(l,void 0))))(function(){return cu(a1(jg)(r)(new rg(_N)))(function(u){return He(mN)(u)(function(i){return Rf(If(rh($f)(void 0)(ah("scroll: "+(i1(o)+("+="+i1(l)))))))(function(){return HY(i!==o+l)(Rf(If(rh($f)(void 0)(ah("scroll offset error"+i1(i)))))(function(){return EN(e)(s1.value)}))})})})})})})})});if(n instanceof SN)return Rf(If(rh($f)(void 0)(ah("pages: "+OY(PY(IO(n.value0.pages)))))))(function(){return If(rh($f)(void 0)(ah("adjust: "+kY(n.value0.update.scroll))))});throw new Error("Failed pattern match at Examples.Halogen.Infinite.Scroll.Main (line 81, column 3 - line 114, column 84): "+[n.constructor.name])}},qY=function(e){return Gt([bn(oh($o(qi))(function(){return zi(Zu)}))])([Gt([bn(oh(Yo(Xe(10)))(function(){return oh(Vi(Xe(10)))(function(){return oh(ba(Xe(400)))(function(){return oh(Ho(Xe(1200)))(function(){return wA(jo)})})})}))])([NY(jg)(e.top)(BY)(function(){var t=vk(150);return{initialElement:t.initialElement,pageSize:t.pageSize,hiddenPages:t.hiddenPages,preloadedPages:t.preloadedPages,preloadMillis:t.preloadMillis,enableTop:e.top,debounce:0,deadZone:1}}())(SN.create)]),yr([WY($f)(void 0)(UY)(void 0),yr([Ip([u1("type")(rf.value),mf(me(bN.value))]),Jn("enable top loading/unloading")]),yr([Ip([u1("type")(rf.value),mf(me(s1.value))]),Jn("enable automatic scrolling")]),yr([Ip([u1("type")(rf.value),mf(me(wN.value))]),Jn("auto scroll up")])])])},TN=function(){return Zt({initialState:me({top:!1,up:!1,log:z.value}),render:qY,eval:Yt({handleQuery:it.handleQuery,receive:it.receive,initialize:it.initialize,finalize:it.finalize,handleAction:EN(Dn)})})}();var VY={dimap:function(e){return function(t){return function(n){return function(r){return n(e(r))}}}}},Is={first:function(e){return function(t){return e(rr(t))}},second:function(e){return function(t){return e(mn(t))}},Profunctor0:function(){return VY}};var tZ=In(),nZ=de(_e);var rZ=function(e){return tZ(e(nZ))},po=function(e){return function(t){return rZ(t)(e)}};var Kg=function(e){return e},No=function(e){return function(t){return Kg(e)(me(t))}};var LN=nt(rt)(Nt),oZ=Bl(It),aZ=X(Xt),iZ=de(_e),AN=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),uZ=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sZ=function(e){return function(t){return Ds([ru(function(n){return uZ.create(Po(n))})])([Jn(t)])}},cZ=function(e){return function(t){return LN(oZ(t.value0))(function(){return aZ(new N(t.value1))})}},lZ=function(e){var t=Le(An(e.MonadEffect0()));return function(n){return LN(t(Cs(n.value0)))(function(){return lr(void 0)})}},IN=function(e){return Zt({initialState:iZ,render:sZ(e),eval:Yt({receive:it.receive,initialize:it.initialize,finalize:it.finalize,handleAction:lZ(e),handleQuery:cZ(e)})})};var Yg=wi(Xg(),1);function $N(e,t){return function(){return t.edit(e)}}var HN=function(e){return function(t){return $N(e,t)}};var hZ=wi(Xg(),1);function ON(e,t){return function(){return t.setValue(e)}}function f1(e){return function(){return e.getValue()}}var kN=function(e){return function(t){return ON(e,t)}};var vZ=wi(Xg(),1);function ue(e){return function(){var t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1);return function(){return t[e].apply(t,n)}}}function Zg(e){return function(t){return function(){return t[e]}}}function gZ(e){return function(t,n){return function(){n[e]=t}}}var yZ=Zg("text"),DZ=gZ("text"),CZ=Zg("renderer"),bZ=Zg("inMultiSelectMode"),wZ=ue("selectMoreLines"),SZ=Zg("container"),EZ=ue("setKeyboardHandler"),TZ=ue("getKeyboardHandler"),MZ=ue("setSession"),d1=ue("getSession"),xZ=ue("setValue"),FZ=ue("getValue"),LZ=ue("getSelection"),AZ=ue("resize"),IZ=ue("setTheme"),RZ=ue("getTheme"),$Z=ue("setStyle"),HZ=ue("unsetStyle"),OZ=ue("setFontSize"),PZ=ue("focus"),kZ=ue("isFocused"),NZ=ue("blur"),BZ=ue("getCopyText"),WZ=ue("insert"),UZ=ue("setOverwrite"),qZ=ue("getOverwrite"),zZ=ue("toggleOverwrite"),VZ=ue("setScrollSpeed"),GZ=ue("getScrollSpeed"),JZ=ue("setDragDelay"),jZ=ue("getDragDelay"),KZ=ue("setSelectionStyle"),QZ=ue("getSelectionStyle"),XZ=ue("setHighlightActiveLine"),YZ=ue("getHighlightActiveLine"),ZZ=ue("setHighlightSelectedWord"),eee=ue("getHighlightSelectedWord"),tee=ue("setShowInvisibles"),nee=ue("getShowInvisibles"),ree=ue("setShowPrintMargin"),oee=ue("getShowPrintMargin"),aee=ue("setPrintMarginColumn"),iee=ue("getPrintMarginColumn"),uee=ue("setReadOnly"),see=ue("getReadOnly"),cee=ue("setBehavioursEnabled"),lee=ue("getBehavioursEnabled"),fee=ue("setWrapBehavioursEnabled"),dee=ue("getWrapBehavioursEnabled"),pee=ue("setShowFoldWidgets"),hee=ue("getShowFoldWidgets"),_ee=ue("remove"),mee=ue("removeWordRight"),vee=ue("removeWordLeft"),gee=ue("removeToLineStart"),yee=ue("removeToLineEnd"),Dee=ue("splitLine"),Cee=ue("transposeLetters"),bee=ue("toLowerCase"),wee=ue("toUpperCase"),See=ue("indent"),Eee=ue("blockIndent"),Tee=ue("blockOutdent"),Mee=ue("toggleCommentLines"),xee=ue("getNumberAt"),Fee=ue("modifyNumber"),Lee=ue("removeLines"),Aee=ue("moveLinesDown"),Iee=ue("moveLinesUp"),Ree=ue("copyLinesUp"),$ee=ue("copyLinesDown"),Hee=ue("getFirstVisibleRow"),Oee=ue("getLastVisibleRow"),Pee=ue("isRowVisible"),kee=ue("isRowFullyVisible"),Nee=ue("selectPageDown"),Bee=ue("selectPageUp"),Wee=ue("gotoPageDown"),Uee=ue("gotoPageUp"),qee=ue("scrollPageDown"),zee=ue("scrollPageUp"),Vee=ue("scrollToRow"),Gee=ue("scrollToLine"),Jee=ue("centerSelection"),jee=ue("getCursorPosition"),Kee=ue("getCursorPositionScreen"),Qee=ue("getSelectionRange"),Xee=ue("selectAll"),Yee=ue("clearSelection"),Zee=ue("moveCursorTo"),ete=ue("moveCursorToPosition"),tte=ue("jumpToMatching"),nte=ue("gotoLine"),rte=ue("navigateTo"),ote=ue("navigateUp"),ate=ue("navigateDown"),ite=ue("navigateLeft"),ute=ue("navigateRight"),ste=ue("navigateLineStart"),cte=ue("navigateLineEnd"),lte=ue("navigateFileEnd"),fte=ue("navigateFileStart"),dte=ue("navigateWordRight"),pte=ue("navigateWordLeft"),hte=ue("replace"),_te=ue("replaceAll"),mte=ue("getLastSearchOptions"),vte=ue("find"),gte=ue("findNext"),yte=ue("findPrevious"),Dte=ue("undo"),Cte=ue("redo"),bte=ue("destroy");function Cr(e){return e}function p1(e){return JSON.stringify(e)}function NN(e,t,n,r,p,a,o){return o==null?e():typeof o=="boolean"?t(o):typeof o=="number"?n(o):typeof o=="string"?r(o):Object.prototype.toString.call(o)==="[object Array]"?p(o):a(o)}var BN=function(e){return function(t){return function(n){return NN(me(e),me(e),me(e),t,me(e),me(e),n)}}};var h1=Ee(Fi),Mte=Ee(no);var ey=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),WN=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),m1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),UN=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),v1=function(){function e(){}return e.value=new e,e}(),ih={show:function(e){if(e instanceof ey)return"(TypeMismatch "+(h1(e.value0)+")");if(e instanceof _1)return"(UnexpectedValue "+(p1(e.value0)+")");if(e instanceof WN)return"(AtIndex "+(Mte(e.value0)+(" "+(Ee(ih)(e.value1)+")")));if(e instanceof m1)return"(AtKey "+(h1(e.value0)+(" "+(Ee(ih)(e.value1)+")")));if(e instanceof UN)return"(Named "+(h1(e.value0)+(" "+(Ee(ih)(e.value1)+")")));if(e instanceof v1)return"MissingValue";throw new Error("Failed pattern match at Data.Argonaut.Decode.Error (line 24, column 10 - line 30, column 35): "+[e.constructor.name])}};var VN=function(){return BN(new We(new ey("String")))(Oe.create)}();var Of={decodeJson:VN};var ny=function(e){return e.decodeJson};var jN=Cr;var Pf={encodeJson:jN};var uh=function(e){return e.encodeJson};var Q7e=wi(DM(),1),gre={keyEncoding:"json",valueEncoding:"json"},CM=e=>t=>n=>()=>e.put(t,n),bM=e=>t=>()=>new Promise((r,p)=>{let a=(o,l)=>{r(l)};e.get(t,gre,a)});var wM=e=>t=>()=>e.del(t);var SM=e=>()=>e.keys().all();var $y=e=>e===void 0;var F5=Ee(ih),L5=ee(Qt),Fre=Tn($i),Lre=Fre(gl),A5=Le(Dn),EM=X(Jr);var I5=function(e){var t=uh(e);return function(n){return function(r){var p=uh(r);return function(a){return function(o){return function(l){return function(u){return ls(CM(o.value0)(t(l))(p(u)))}}}}}}};var R5=function(e){var t=uh(e);return function(n){return function(r){return function(p){var a=ny(p);return function(o){return function(l){return L5(ls(bM(o.value0)(t(l))))(function(u){var i=$y(u);if(i)return EM(z.value);var s=a(u);if(s instanceof We)return A5(vo(ar(F5(s.value0))));if(s instanceof Oe)return EM(new N(s.value0));throw new Error("Failed pattern match at Level.DB.Operations (line 28, column 10 - line 30, column 40): "+[s.constructor.name])})}}}}}};var $5=function(e){var t=uh(e);return function(n){return function(r){return function(p){return function(a){return function(o){return ls(wM(a.value0)(t(o)))}}}}}},H5=function(e){var t=ny(e);return function(n){return function(r){return L5(ls(SM(r.value0)))(function(p){var a=Lre(t)(p);if(a instanceof We)return A5(vo(ar(F5(a.value0))));if(a instanceof Oe)return EM(a.value0);throw new Error("Failed pattern match at Level.DB.Operations (line 71, column 3 - line 73, column 26): "+[a.constructor.name])})}}};var O5=wi(DM(),1),Ire={keyEncoding:"json",valueEncoding:"json"},TM=e=>()=>new O5.Level(e,Ire);var Ore=V(Pe),Pre=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var P5=function(e){return Ore(Pre.create)(TM(e))};var MM=Pf,Hy=Of,Nre=I5(MM)(Hy)(Pf)(Of),Bre=R5(MM)(Hy)(Pf)(Of),Wre=$5(MM)(Hy)(Pf)(Of),k5=function(e){return function(t){return function(n){return Nre(e)(t)(n)}}},N5=function(e){return function(t){return Bre(e)(t)}},Fh=P5("filesystem"),B5=H5(Hy)(Of),W5=function(e){return function(t){return Wre(e)(t)}};var z5=nt(rt),q5=z5(yo),gu=ee(Nt),xM=Io(It),Oy=ct(Xt)(Ht),FM=z5(Nt),Ure=fn(It),V5=function(){function e(){}return e.value=new e,e}(),G5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),J5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qre=function(e){return function(t){var n=yr([Gt([si("editor"),bn(q5(ba(Xe(500)))(function(){return Ho(Xe(500))}))])([]),Ds([ru(function(r){return G5.create(Po(r))})])([Jn("Save")]),Ds([ru(function(r){return J5.create(Po(r))})])([Jn("Exit")])]);return Gt([bn(q5($o(qi))(function(){return zi(Zu)}))])([n])}},zre=function(e){var t=Le(An(e.MonadEffect0())),n=Cn(ii(e));return function(r){return function(p){if(p instanceof V5)return gu(t(Fh))(function(a){return gu(xM(function(o){return o.filePath}))(function(o){return gu(n(N5(a)(o)))(function(l){return gu(Pr("editor"))(function(u){return He(Oy)(u)(function(i){return He(Oy)(Np(i))(function(s){return gu(t(HN(s)(Yg.default)))(function(f){return gu(t(d1(f)))(function(h){return FM(He(Oy)(l)(function(d){return t(kN(d)(h))}))(function(){return Ure(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.editSession=new N(new Z(a,new Z(f,h))),c})})})})})})})})})});if(p instanceof G5)return FM(t(Cs(p.value0)))(function(){return gu(xM(function(a){return a.editSession}))(function(a){return gu(xM(function(o){return o.filePath}))(function(o){return He(Oy)(a)(function(l){return gu(t(f1(l.value1.value1)))(function(u){return n(k5(l.value0)(o)(u))})})})})});if(p instanceof J5)return FM(t(Cs(p.value0)))(function(){return lr(void 0)});throw new Error("Failed pattern match at Examples.Halogen.Widgets.Editor (line 73, column 16 - line 95, column 18): "+[p.constructor.name])}}},j5=function(e){var t=qre(e),n=zre(e);return function(r){return Zt({initialState:function(p){return{editSession:z.value,filePath:p}},render:t,eval:Yt({handleQuery:it.handleQuery,receive:it.receive,finalize:it.finalize,handleAction:n(r),initialize:new N(V5.value)})})}};function Py(e){return function(t){return function(){return t.requestAnimationFrame(n=>e(n)())}}}var K5=ee(Nt),tW=nt(rt),Q5=ut(Pe),X5=ee(xr),Jre=tW(Nt),Y5=ut($n),jre=V(wp),Kre=Rr(It),Z5=ee(ai),Qre=tW(ai),nW={reflectSymbol:function(){return"canvas"}},Xre=gr()(nW)(jt),Yre=oa()(nW)(jt),rW=function(){function e(){}return e.value=new e,e}(),eW=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),oW=function(){return pt.value}(),Zre=function(e){var t=Le(An(e.MonadEffect0()));return function(n){return function(r){if(r instanceof rW)return K5(t(Kn))(function(p){var a=function(o){return function(){return jn(p.listener)(o)(),Q5(X5(aa)(Py(a)))()}};return Jre(t(Q5(X5(aa)(Py(a)))))(function(){return Y5(Rn(jre(eW.create)(p.emitter)))})});if(r instanceof eW)return K5(Kre)(function(p){var a=Um(Z5(qm)(function(o){return Z5(zm)(function(l){return Qre(Vm({x:0,y:0,width:o,height:l}))(function(){return p.animation(r.value0)})})}));return Y5(Xre(oW)(void 0)(a))});throw new Error("Failed pattern match at Halogen.Canvas.Animate (line 58, column 16 - line 73, column 37): "+[r.constructor.name])}}},eoe=function(e){var t=_f(e);return function(n){var r=t(n);return function(p){return Yre(oW)(void 0)(r)(p.dimensions)}}},aW=function(e){var t=eoe(e),n=Zre(e);return function(r){return Zt({initialState:function(p){return{dimensions:p.dimensions,animation:p.animation}},render:t(r),eval:Yt({handleQuery:it.handleQuery,receive:it.receive,finalize:it.finalize,handleAction:n(r),initialize:new N(rW.value)})})}};var LM=function(e){return function(t){var n=hc(t.Profunctor0()),r=$l(t);return function(p){return n(e)(function(a){return a.value1(a.value0)})(r(p))}}};var uW=X(As),iW=V(vt),sW=nt(rt),Br=sW(Vc),yu=ee(Vc),ooe=Gr(Vt),aoe=jl(Vt)(mt),ioe=ea(Vt),uoe=de(_e),Lh=sW(cr),soe=gn(vr),ky=ee(cr),coe=Tn(ic)(vr),loe=ct(vr)(Ht),cW=ct(As)(Ht);var Du={cmd:function(e){return LM(function(t){return new Z(t.command,function(n){return{prompt:t.prompt,commandEnv:t.commandEnv,foreground:t.foreground,command:n}})})(e)},prompt:function(e){return LM(function(t){return new Z(t.prompt,function(n){return{command:t.command,commandEnv:t.commandEnv,foreground:t.foreground,prompt:n}})})(e)}},Ih=function(e){var t=Le(xf(e));return function(n){return function(r){return r instanceof YT?n(r.value0):r instanceof ZT?t(ni("line feed")):uW(void 0)}}},Rh=function(e){return e.prompt},Ny=Rh(Du)(Is),$h=function(e){return e.cmd},lW=$h(Du),Ah=lW(Ko),fW=lW(Is),foe=function(e){return function(t){return function(n){var r=function(a){var o=`\r
  help\r
    show this help text`,l=function(u){return`\r
  `+(u.name+(`\r
    `+mo(`\r
    `)(u.description)))};return o+mo("")(iW(l)(a))},p=function(a){return Br(Wt(Yn(r(n))))(function(){return yu(So)(function(o){return Br(Wt(hn(po(o)(Ny))))(function(){return Qn(No(Ah)(""))})})})};return ooe("help")(p)(aoe(iW(function(a){return new Z(a.name,a.cmd)})(n)))}}},By=function(e){var t=foe(e);return function(n){var r=t(n);return function(p){var a=r(p);return yu(So)(function(o){var l=N0(function(s){return!xL(s)})(Y0(" ")(po(o)(fW))),u=Hi(l);if(u instanceof z)return Br(Wt(Yn("")))(function(){return yu(So)(function(s){return Br(Wt(hn(po(s)(Ny))))(function(){return Qn(No(Ah)(""))})})});if(u instanceof N){var i=ioe(u.value0)(a);if(i instanceof N)return i.value0(Ke([])(uoe)(H0(l)));if(i instanceof z)return Br(Wt(Yn(`\r
unrecognised command "`+(u.value0+'" - type "help" to see the available commands'))))(function(){return yu(So)(function(s){return Br(Wt(hn(po(s)(Ny))))(function(){return Qn(No(Ah)(""))})})});throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 199, column 7 - line 206, column 34): "+[i.constructor.name])}throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 191, column 3 - line 206, column 34): "+[u.constructor.name])})}}};var doe=function(e){return function(t){var n=$h(t),r=n(Is),p=Rh(t)(Is),a=n(Ko);return yu(So)(function(o){return Br(Wt(ky(qg(oT))(function(l){var u=l===0;return u?Lh(hn("\x1BM"))(function(){return ky(qg(ky(aT)(function(i){return ky(rT(i-1|0))(function(s){return coe(nT)(s)})})))(function(i){return Lh(hn("\x9BK"))(function(){return He(loe)(i)(function(s){var f=(dc(po(o)(r))-1|0)<=s;return f?Lh(hn(po(o)(p)))(function(){return hn(x_(1)(po(o)(r)))}):hn(x_(1)(SL(s)(po(o)(r))))})})})}):soe(dc(po(o)(r))>0)(hn("\b \b"))})))(function(){return Qn(Kg(a)(x_(1)))})})}},Hh=function(e){var t=doe(e),n=Le(xf(e));return function(r){var p=$h(r)(Ko),a=Rh(r)(Is),o=t(r);return function(l){return function(u){return u===""?Br(Qn(No(p)("")))(function(){return yu(So)(function(i){return Wt(Lh(hn("^C"))(function(){return hn(`\r
`+po(i)(a))}))})}):u==="\r"?l:u==="\x7F"?o:u>=" "&&u<="~"||u>="\xA0"?Br(Qn(Kg(p)(function(i){return i+u})))(function(){return Wt(hn(u))}):Br(n(ni("non-printable: "+u)))(function(){return uW(void 0)})}}}},poe=function(e){var t=e.MonadEffect0(),n=Ih(t),r=Hh(t)(Du),p=By(e);return function(a){var o=p(a);return yu(So)(function(l){return Br(He(cW)(l.foreground)(function(u){return u.kill}))(function(){return Br(Qn(function(u){return{prompt:u.prompt,command:u.command,commandEnv:u.commandEnv,foreground:z.value}}))(function(){return Br(Qn(No(Ah)("")))(function(){return yu(So)(function(u){return Br(Wt(Lh(ua(vi(!0)))(function(){return hn(`\r
`+po(u)(Ny))})))(function(){return _i(n(r(o(l.commandEnv))))})})})})})})}},hoe=function(e){return yu(So)(function(t){return Br(He(cW)(t.foreground)(function(n){return n.stdin(po(t)(fW))}))(function(){return Br(Wt(hn(`\r
`)))(function(){return Qn(No(Ah)(""))})})})},dW=function(e){var t=e.MonadEffect0(),n=Ih(t),r=poe(e),p=Hh(t)(Du),a=hoe(e);return function(o){var l=r(o);return n(function(u){return u===""?Br(Wt(hn("^C")))(function(){return l}):p(a)(u)})}};var Wy=ee(Vc),RM=nt(rt),Un=RM(Vc),Uy=De(Gs),moe=Rh(Du)(Is),Oh=$h(Du)(Ko),voe=Ur(t2),qy=ee(cr),pW=Ee(no),goe=Ee(Px),yoe=Ee(Fi),$M=RE(),HM={reflectSymbol:function(){return"button"}},Doe=$M(HM)(jt)(),hW=ut(Zk),gW=$E(),Coe=gW(HM)(jt)(),OM=HE(),boe=OM(HM)(jt)(),Nh=RM(cr),yW={reflectSymbol:function(){return"editor"}},_W=OM(yW)(jt)(),woe=$M(yW)(jt)(),Ph=X(As),Soe=V(vt),Eoe=ct(As)(mt),PM={reflectSymbol:function(){return"canvas"}},mW=$M(PM)(jt)(),vW=OM(PM)(jt)(),qs=RM(ai),Toe=gW(PM)(jt)(),Moe=ut($n),DW={reflectSymbol:function(){return"shell"}},xoe=gr()(DW)(jt),Foe=oa()(DW)(jt),Loe=function(){function e(){}return e.value=new e,e}();var CW=function(){return pt.value}(),AM=function(){return pt.value}(),kh=function(){return pt.value}(),IM=function(){return pt.value}(),kM=function(e){var t=IN(e),n=dW(e),r=e.MonadEffect0(),p=Ih(r),a=Hh(r)(Du),o=By(e),l=j5(e),u=Le(xf(r)),i=Cn(Yk(e)),s=_f(e),f=aW(e);return function(h){var d=n(h),c=o(h),_=l(h),m=s(h),v=f(h),y=Wy(So)(function(S){return Un(Wt(hn(`\r
`+po(S)(moe))))(function(){return Qn(No(Oh)(""))})}),C=function(S){return me(voe(S)(y))};return[{name:"rows",description:["prints the number of rows in the terminal"],cmd:C(Wt(qy(zg)(function(){var S=Uy(`\r
`);return function(D){return Yn(S(pW(D)))}}())))},{name:"cols",description:["prints the number of columns in the terminal"],cmd:C(Wt(qy(zg)(function(){var S=Uy(`\r
`);return function(D){return Yn(S(pW(D)))}}())))},{name:"blinking",description:["prints a boolean indicating whether the cursor is blinking"],cmd:C(Wt(qy(ua(dT))(function(){var S=Uy(`\r
`);return function(D){return Yn(S(goe(D)))}}())))},{name:"blinkon",description:["turns on cursor blinking"],cmd:C(Wt(ua(vi(!0))))},{name:"blinkoff",description:["turns off cursor blinking"],cmd:C(Wt(ua(vi(!1))))},{name:"fontFamily",description:["prints the font family of the terminal"],cmd:C(Wt(qy(ua(fT))(function(){var S=Uy(`\r
`);return function(D){return Yn(S(yoe(D)))}}())))},{name:"button",description:["creates a button as a subprocess.","the subprocess can be cancelled with ^C","accepts button text as argument.",'clicking the button prints "click!" to the terminal.'],cmd:function(S){return Un(Qn(No(Oh)("")))(function(){return Un(Doe(IM)(void 0)(t)(mo(" ")(S))(me(Wt(Yn("click!")))))(function(){var D={stdin:function(g){return hW(Coe(IM)(void 0)(new AN(g,void 0)))},kill:boe(IM)(void 0)};return Un(Qn(function(g){return{prompt:g.prompt,command:g.command,commandEnv:g.commandEnv,foreground:new N(D)}}))(function(){return Un(Wt(Nh(ua(vi(!1)))(function(){return hn(`\r
`)})))(function(){return _i(d)})})})})}},{name:"edit",description:["opens a file in the editor as a subprocess.","the subprocess can be cancelled with ^C","accepts the file path as argument."],cmd:function(S){return S.length===1&&dc(S[0])>0?Un(Qn(No(Oh)("")))(function(){var D=Un(_W(AM)(void 0))(function(){return Un(Wt(hn("> ")))(function(){return _i(p(a(c(kM(e)(h)))))})});return Un(woe(AM)(void 0)(_)(S[0])(me(D)))(function(){var g={stdin:me(Ph(void 0)),kill:_W(AM)(void 0)};return Un(Qn(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new N(g)}}))(function(){return Un(Wt(Nh(ua(vi(!1)))(function(){return hn(`\r
`)})))(function(){return _i(d)})})})}):C(Wt(Yn(`\r
this command expects a single file name as its argument`)))(S)}},{name:"ls",description:["lists files in the file system"],cmd:C(Wy(u(Fh))(function(S){return Wy(i(B5(S)))(function(D){return Wt(Yn(`\r
`+mo(" ")(Soe(function(g){return g})(D))))})}))},{name:"rm",description:["remove files from the file system"],cmd:function(S){return Wy(u(Fh))(function(D){return Un(Eoe(function(g){return i(W5(D)(g))})(S))(function(){return y})})}},{name:"canvas",description:["canvas example"],cmd:function(S){return Un(Qn(No(Oh)("")))(function(){return Un(mW(kh)(void 0)(m)({width:200,height:200})(me(Ph(void 0))))(function(){var D={stdin:me(Ph(void 0)),kill:vW(kh)(void 0)},g=qs(Fc(Ga(255)(255)(200)))(function(){return qs(lp({x:0,y:0,width:200,height:200}))(function(){return qs(Fc(Ga(0)(0)(0)))(function(){return aw("hello")({x:50,y:50})})})});return Un(hW(Toe(kh)(void 0)(g)))(function(){return Un(Qn(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new N(D)}}))(function(){return Un(Wt(Nh(ua(vi(!1)))(function(){return hn(`\r
`)})))(function(){return _i(d)})})})})})}},{name:"animation",description:["canvas animation example"],cmd:function(S){return Un(Qn(No(Oh)("")))(function(){var D=function(g){return qs(Fc(Ga(255)(255)(200)))(function(){return qs(lp({x:0,y:0,width:200,height:200}))(function(){return qs(Fc(Ga(0)(0)(0)))(function(){return qs(jR({translateX:50,translateY:50}))(function(){return qs(VR(g/1e3))(function(){return aw("hello")({x:0,y:0})})})})})})};return Un(mW(kh)(void 0)(v)({dimensions:{width:200,height:200},animation:D})(me(Ph(void 0))))(function(){var g={stdin:me(Ph(void 0)),kill:vW(kh)(void 0)};return Un(Qn(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new N(g)}}))(function(){return Un(Wt(Nh(ua(vi(!1)))(function(){return hn(`\r
`)})))(function(){return _i(d)})})})})}}]}},Aoe=function(e){var t=e.MonadEffect0(),n=Ih(t),r=Hh(t)(Du),p=By(e),a=kM(e);return function(o){var l=p(o),u=a(o);return function(i){return Moe(xoe(CW)(void 0)(Un(Wt(Nh(QT(!0))(function(){return hn("> ")})))(function(){return _i(n(r(l(u))))})))}}},Ioe=function(e){var t=kM(e);return function(n){return{prompt:"> ",command:"",foreground:z.value,commandEnv:t(n)}}},Roe=function(e){var t=Jg(e),n=Ioe(e);return function(r){return me(Foe(CW)(void 0)(t)(n(r)))}},bW=function(e){var t=Roe(e),n=Aoe(e);return function(r){return Zt({initialState:me(void 0),render:t(r),eval:Yt({handleQuery:it.handleQuery,receive:it.receive,finalize:it.finalize,handleAction:n(r),initialize:new N(Loe.value)})})}};var Hoe=V(Dt),wW=gH(lv),MW=V(vt),Ooe=Oi(Bn),Poe=ee(Nt),SW=ee(xr),xW=nt(rt),EW=xW(Nt),koe=kI(Wl),TW=fn(It),FW=ea(Vt),Noe=X(Xt),zy=xW(yo),Boe=XL(FA),Woe=oa()({reflectSymbol:function(){return"example"}})(Vt),Uoe=jl(Vt)(mt),qoe=bW(ss)(Qi),zoe=xO(ss)(Qi),Voe=ut($r),LW=function(){function e(){}return e.value=new e,e}(),NM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Goe=function(e){return Ke(new NM(""))(NM.create)(Hoe(function(t){return t.value})(dS(e)))},Joe=function(e){var t=function(n){return aS([wW(n.id)])([Jn(n.name)])};return iS([wW(e.selected),mf(Goe)])(MW(t)(Ooe(qd(e.examples))))},joe=function(e){var t=Le(An(e));return function(n){if(n instanceof LW)return Poe(t(SW(SW(aa)(OS))(HS)))(function(r){return EW(t(koe(F_(1)(r))))(function(){return EW(TW(function(p){var a=FW(F_(1)(r))(p.examples);if(a instanceof z)return p;if(a instanceof N){var o={};for(var l in p)({}).hasOwnProperty.call(p,l)&&(o[l]=p[l]);return o.selected=a.value0.id,o}throw new Error("Failed pattern match at Main (line 100, column 10 - line 102, column 46): "+[a.constructor.name])}))(function(){return Noe(void 0)})})});if(n instanceof NM)return TW(function(r){var p={};for(var a in r)({}).hasOwnProperty.call(r,a)&&(p[a]=r[a]);return p.selected=n.value0,p});throw new Error("Failed pattern match at Main (line 95, column 3 - line 104, column 62): "+[n.constructor.name])}},Koe=function(){return pt.value}(),Qoe=function(e){return Gt([bn(zy($o(qi))(function(){return zi(xA)}))])([Gt([bn(zy($o(qi))(function(){return zy(zi(Zu))(function(){return zy(LA(Boe))(function(){return Cc(Dc)(Xe(1))(jo)})})}))])([Ap([Jn("Example")]),Gt([bn(q_(Xe(0))(Xe(0))(Xe(0))(Xe(10)))])([Joe(e)])]),Gt([bn(Cc(Dc)(Xe(1))(jo))])([function(){var t=FW(e.selected)(e.examples);if(t instanceof N)return Woe(Koe)(t.value0.id)(t.value0.component)(void 0);if(t instanceof z)return yr([]);throw new Error("Failed pattern match at Main (line 144, column 11 - line 146, column 34): "+[t.constructor.name])}()])])},Xoe=function(){return Zt({initialState:function(e){return{selected:e.value0,examples:Uoe(MW(function(t){return new Z(t.id,t)})(e.value1))}},render:Qoe,eval:Yt({handleQuery:it.handleQuery,receive:it.receive,finalize:it.finalize,handleAction:joe(Dn),initialize:new N(LW.value)})})}(),AW=NS(ee(Qt)(BS)(function(e){var t=[{id:"xterm",name:"XTerm",component:qoe},{id:"infinite-scroll",name:"Infinite Scroll",component:TN},{id:"halogen-canvas-sketch",name:"Line Sketch",component:zoe}];return Voe(FE(Xoe)(new Z("xterm",t))(e))}));AW();})();
/*! Bundled license information:

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)
  (*! @license
  ==========================================================================
  SproutCore -- JavaScript Application Framework
  copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
  
  SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.
  
  For more information about SproutCore, visit http://www.sproutcore.com
  
  
  ==========================================================================
  @license *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
