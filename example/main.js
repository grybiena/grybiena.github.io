(()=>{var r3=Object.create;var ax=Object.defineProperty;var o3=Object.getOwnPropertyDescriptor;var a3=Object.getOwnPropertyNames;var i3=Object.getPrototypeOf,u3=Object.prototype.hasOwnProperty;var Tt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var s3=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let d of a3(t))!u3.call(e,d)&&d!==n&&ax(e,d,{get:()=>t[d],enumerable:!(a=o3(t,d))||a.enumerable});return e};var Si=(e,t,n)=>(n=e!=null?r3(i3(e)):{},s3(t||!e||!e.__esModule?ax(n,"default",{value:e,enumerable:!0}):n,e));var Q2=Tt((Og,IT)=>{(function(e,t){typeof Og=="object"&&typeof IT=="object"?IT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Og=="object"?Og.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let a=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(a._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,a=n._renderService.dimensions;if(a.css.cell.width===0||a.css.cell.height===0)return;let d=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(r.getPropertyValue("height")),l=Math.max(0,parseInt(r.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),i=o-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),s=l-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-d;return{cols:Math.max(2,Math.floor(s/a.css.cell.width)),rows:Math.max(1,Math.floor(i/a.css.cell.height))}}}})(),e})())});var Y2=Tt((kg,RT)=>{(function(e,t){typeof kg=="object"&&typeof RT=="object"?RT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof kg=="object"?kg.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(d,r,o){var l=this&&this.__decorate||function(D,g,b,x){var E,T=arguments.length,M=T<3?g:x===null?x=Object.getOwnPropertyDescriptor(g,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,x);else for(var w=D.length-1;w>=0;w--)(E=D[w])&&(M=(T<3?E(M):T>3?E(g,b,M):E(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M};Object.defineProperty(r,"__esModule",{value:!0}),r.GlyphRenderer=void 0;let u=o(374),i=o(509),s=o(855),f=o(859),h=o(776),p=o(381),c=11,_=c*Float32Array.BYTES_PER_ELEMENT,v,m=0,y=0,C=0;class S extends f.Disposable{constructor(g,b,x){super(),this._terminal=g,this._gl=b,this._dimensions=x,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let E=this._gl;i.TextureAtlas.maxAtlasPages===void 0&&(i.TextureAtlas.maxAtlasPages=Math.min(32,(0,u.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),i.TextureAtlas.maxTextureSize=(0,u.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,u.throwIfFalsy)((0,p.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(R){let A="";for(let I=1;I<R;I++)A+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${R}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${A}
}`}(i.TextureAtlas.maxAtlasPages))),this.register((0,f.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,u.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,u.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,u.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);let T=new Float32Array([0,0,1,0,0,1,1,1]),M=E.createBuffer();this.register((0,f.toDisposable)(()=>E.deleteBuffer(M))),E.bindBuffer(E.ARRAY_BUFFER,M),E.bufferData(E.ARRAY_BUFFER,T,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let w=new Uint8Array([0,1,2,3]),F=E.createBuffer();this.register((0,f.toDisposable)(()=>E.deleteBuffer(F))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,F),E.bufferData(E.ELEMENT_ARRAY_BUFFER,w,E.STATIC_DRAW),this._attributesBuffer=(0,u.throwIfFalsy)(E.createBuffer()),this.register((0,f.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,_,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,_,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,_,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,_,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,_,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,_,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);let L=new Int32Array(i.TextureAtlas.maxAtlasPages);for(let R=0;R<i.TextureAtlas.maxAtlasPages;R++)L[R]=R;E.uniform1iv(this._textureLocation,L),E.uniformMatrix4fv(this._projectionLocation,!1,p.PROJECTION_MATRIX),this._atlasTextures=[];for(let R=0;R<i.TextureAtlas.maxAtlasPages;R++){let A=new p.GLTexture((0,u.throwIfFalsy)(E.createTexture()));this.register((0,f.toDisposable)(()=>E.deleteTexture(A.texture))),E.activeTexture(E.TEXTURE0+R),E.bindTexture(E.TEXTURE_2D,A.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[R]=A}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,b,x,E,T,M,w,F){this._updateCell(this._vertices.attributes,g,b,x,E,T,M,w,F)}_updateCell(g,b,x,E,T,M,w,F,L){m=(x*this._terminal.cols+b)*c,E!==s.NULL_CELL_CODE&&E!==void 0?this._atlas&&(v=F&&F.length>1?this._atlas.getRasterizedGlyphCombinedChar(F,T,M,w,!1):this._atlas.getRasterizedGlyph(E,T,M,w,!1),y=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),T!==L&&v.offset.x>y?(C=v.offset.x-y,g[m]=-(v.offset.x-C)+this._dimensions.device.char.left,g[m+1]=-v.offset.y+this._dimensions.device.char.top,g[m+2]=(v.size.x-C)/this._dimensions.device.canvas.width,g[m+3]=v.size.y/this._dimensions.device.canvas.height,g[m+4]=v.texturePage,g[m+5]=v.texturePositionClipSpace.x+C/this._atlas.pages[v.texturePage].canvas.width,g[m+6]=v.texturePositionClipSpace.y,g[m+7]=v.sizeClipSpace.x-C/this._atlas.pages[v.texturePage].canvas.width,g[m+8]=v.sizeClipSpace.y):(g[m]=-v.offset.x+this._dimensions.device.char.left,g[m+1]=-v.offset.y+this._dimensions.device.char.top,g[m+2]=v.size.x/this._dimensions.device.canvas.width,g[m+3]=v.size.y/this._dimensions.device.canvas.height,g[m+4]=v.texturePage,g[m+5]=v.texturePositionClipSpace.x,g[m+6]=v.texturePositionClipSpace.y,g[m+7]=v.sizeClipSpace.x,g[m+8]=v.sizeClipSpace.y)):g.fill(0,m,m+c-1-2)}clear(){let g=this._terminal,b=g.cols*g.rows*c;this._vertices.count!==b?this._vertices.attributes=new Float32Array(b):this._vertices.attributes.fill(0);let x=0;for(;x<this._vertices.attributesBuffers.length;x++)this._vertices.count!==b?this._vertices.attributesBuffers[x]=new Float32Array(b):this._vertices.attributesBuffers[x].fill(0);this._vertices.count=b,x=0;for(let E=0;E<g.rows;E++)for(let T=0;T<g.cols;T++)this._vertices.attributes[x+9]=T/g.cols,this._vertices.attributes[x+10]=E/g.rows,x+=c}handleResize(){let g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let x=this._vertices.attributesBuffers[this._activeBuffer],E=0;for(let T=0;T<g.lineLengths.length;T++){let M=T*this._terminal.cols*c,w=this._vertices.attributes.subarray(M,M+g.lineLengths[T]*c);x.set(w,E),E+=w.length}b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,x.subarray(0,E),b.STREAM_DRAW);for(let T=0;T<this._atlas.pages.length;T++)this._atlas.pages[T].version!==this._atlasTextures[T].version&&this._bindAtlasPageTexture(b,this._atlas,T);b.drawElementsInstanced(b.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,E/c)}setAtlas(g){this._atlas=g;for(let b of this._atlasTextures)b.version=-1}_bindAtlasPageTexture(g,b,x){g.activeTexture(g.TEXTURE0+x),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[x].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,b.pages[x].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[x].version=b.pages[x].version}setDimensions(g){this._dimensions=g}}r.GlyphRenderer=S,l([h.traceCall],S.prototype,"updateCell",null)},742:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RectangleRenderer=void 0;let l=o(374),u=o(859),i=o(310),s=o(381),f=8*Float32Array.BYTES_PER_ELEMENT;class h{constructor(){this.attributes=new Float32Array(160),this.count=0}}let p=0,c=0,_=0,v=0,m=0,y=0,C=0;class S extends u.Disposable{constructor(g,b,x,E){super(),this._terminal=g,this._gl=b,this._dimensions=x,this._themeService=E,this._vertices=new h,this._verticesCursor=new h;let T=this._gl;this._program=(0,l.throwIfFalsy)((0,s.createProgram)(T,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,u.toDisposable)(()=>T.deleteProgram(this._program))),this._projectionLocation=(0,l.throwIfFalsy)(T.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=T.createVertexArray(),T.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),w=T.createBuffer();this.register((0,u.toDisposable)(()=>T.deleteBuffer(w))),T.bindBuffer(T.ARRAY_BUFFER,w),T.bufferData(T.ARRAY_BUFFER,M,T.STATIC_DRAW),T.enableVertexAttribArray(3),T.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let F=new Uint8Array([0,1,2,3]),L=T.createBuffer();this.register((0,u.toDisposable)(()=>T.deleteBuffer(L))),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,L),T.bufferData(T.ELEMENT_ARRAY_BUFFER,F,T.STATIC_DRAW),this._attributesBuffer=(0,l.throwIfFalsy)(T.createBuffer()),this.register((0,u.toDisposable)(()=>T.deleteBuffer(this._attributesBuffer))),T.bindBuffer(T.ARRAY_BUFFER,this._attributesBuffer),T.enableVertexAttribArray(0),T.vertexAttribPointer(0,2,T.FLOAT,!1,f,0),T.vertexAttribDivisor(0,1),T.enableVertexAttribArray(1),T.vertexAttribPointer(1,2,T.FLOAT,!1,f,2*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(1,1),T.enableVertexAttribArray(2),T.vertexAttribPointer(2,4,T.FLOAT,!1,f,4*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(2,1),this._updateCachedColors(E.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),b.uniformMatrix4fv(this._projectionLocation,!1,s.PROJECTION_MATRIX),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,g.attributes,b.DYNAMIC_DRAW),b.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){let b=this._terminal,x=this._vertices,E,T,M,w,F,L,R,A,I,$,H,P=1;for(E=0;E<b.rows;E++){for(M=-1,w=0,F=0,L=!1,T=0;T<b.cols;T++)R=(E*b.cols+T)*i.RENDER_MODEL_INDICIES_PER_CELL,A=g.cells[R+i.RENDER_MODEL_BG_OFFSET],I=g.cells[R+i.RENDER_MODEL_FG_OFFSET],$=!!(67108864&I),(A!==w||I!==F&&(L||$))&&((w!==0||L&&F!==0)&&(H=8*P++,this._updateRectangle(x,H,F,w,M,T,E)),M=T,w=A,F=I,L=$);(w!==0||L&&F!==0)&&(H=8*P++,this._updateRectangle(x,H,F,w,M,b.cols,E))}x.count=P}updateCursor(g){let b=this._verticesCursor,x=g.cursor;if(!x||x.style==="block")return void(b.count=0);let E,T=0;x.style!=="bar"&&x.style!=="outline"||(E=8*T++,this._addRectangleFloat(b.attributes,E,x.x*this._dimensions.device.cell.width,x.y*this._dimensions.device.cell.height,x.style==="bar"?x.dpr*x.cursorWidth:x.dpr,this._dimensions.device.cell.height,this._cursorFloat)),x.style!=="underline"&&x.style!=="outline"||(E=8*T++,this._addRectangleFloat(b.attributes,E,x.x*this._dimensions.device.cell.width,(x.y+1)*this._dimensions.device.cell.height-x.dpr,x.width*this._dimensions.device.cell.width,x.dpr,this._cursorFloat)),x.style==="outline"&&(E=8*T++,this._addRectangleFloat(b.attributes,E,x.x*this._dimensions.device.cell.width,x.y*this._dimensions.device.cell.height,x.width*this._dimensions.device.cell.width,x.dpr,this._cursorFloat),E=8*T++,this._addRectangleFloat(b.attributes,E,(x.x+x.width)*this._dimensions.device.cell.width-x.dpr,x.y*this._dimensions.device.cell.height,x.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.count=T}_updateRectangle(g,b,x,E,T,M,w){if(67108864&x)switch(50331648&x){case 16777216:case 33554432:p=this._themeService.colors.ansi[255&x].rgba;break;case 50331648:p=(16777215&x)<<8;break;default:p=this._themeService.colors.foreground.rgba}else switch(50331648&E){case 16777216:case 33554432:p=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:p=(16777215&E)<<8;break;default:p=this._themeService.colors.background.rgba}g.attributes.length<b+4&&(g.attributes=(0,s.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),c=T*this._dimensions.device.cell.width,_=w*this._dimensions.device.cell.height,v=(p>>24&255)/255,m=(p>>16&255)/255,y=(p>>8&255)/255,C=1,this._addRectangle(g.attributes,b,c,_,(M-T)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,v,m,y,C)}_addRectangle(g,b,x,E,T,M,w,F,L,R){g[b]=x/this._dimensions.device.canvas.width,g[b+1]=E/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=w,g[b+5]=F,g[b+6]=L,g[b+7]=R}_addRectangleFloat(g,b,x,E,T,M,w){g[b]=x/this._dimensions.device.canvas.width,g[b+1]=E/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=w[0],g[b+5]=w[1],g[b+6]=w[2],g[b+7]=w[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}r.RectangleRenderer=S},310:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModel=r.COMBINED_CHAR_BIT_MASK=r.RENDER_MODEL_EXT_OFFSET=r.RENDER_MODEL_FG_OFFSET=r.RENDER_MODEL_BG_OFFSET=r.RENDER_MODEL_INDICIES_PER_CELL=void 0;let l=o(296);r.RENDER_MODEL_INDICIES_PER_CELL=4,r.RENDER_MODEL_BG_OFFSET=1,r.RENDER_MODEL_FG_OFFSET=2,r.RENDER_MODEL_EXT_OFFSET=3,r.COMBINED_CHAR_BIT_MASK=2147483648,r.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,l.createSelectionRenderModel)()}resize(u,i){let s=u*i*r.RENDER_MODEL_INDICIES_PER_CELL;s!==this.cells.length&&(this.cells=new Uint32Array(s),this.lineLengths=new Uint32Array(i))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(d,r,o){var l=this&&this.__decorate||function(M,w,F,L){var R,A=arguments.length,I=A<3?w:L===null?L=Object.getOwnPropertyDescriptor(w,F):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(M,w,F,L);else for(var $=M.length-1;$>=0;$--)(R=M[$])&&(I=(A<3?R(I):A>3?R(w,F,I):R(w,F))||I);return A>3&&I&&Object.defineProperty(w,F,I),I};Object.defineProperty(r,"__esModule",{value:!0}),r.JoinedCellData=r.WebglRenderer=void 0;let u=o(820),i=o(274),s=o(627),f=o(457),h=o(56),p=o(374),c=o(345),_=o(859),v=o(147),m=o(782),y=o(855),C=o(776),S=o(965),D=o(742),g=o(310),b=o(733);class x extends _.Disposable{constructor(w,F,L,R,A,I,$,H,P){super(),this._terminal=w,this._characterJoinerService=F,this._charSizeService=L,this._coreBrowserService=R,this._coreService=A,this._decorationService=I,this._optionsService=$,this._themeService=H,this._cursorBlinkStateManager=new _.MutableDisposable,this._charAtlasDisposable=this.register(new _.MutableDisposable),this._model=new g.RenderModel,this._workCell=new m.CellData,this._rectangleRenderer=this.register(new _.MutableDisposable),this._glyphRenderer=this.register(new _.MutableDisposable),this._onChangeTextureAtlas=this.register(new c.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new c.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new c.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new c.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new i.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new b.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,$,this._themeService)],this.dimensions=(0,p.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register($.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let q={antialias:!1,depth:!1,preserveDrawingBuffer:P};if(this._gl=this._canvas.getContext("webgl2",q),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextlost",G=>{console.log("webglcontextlost event received"),G.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(G)},3e3)})),this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextrestored",G=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,s.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,h.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(G,B)=>this._setCanvasDevicePixelDimensions(G,B))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,_.toDisposable)(()=>{var G;for(let B of this._renderLayers)B.dispose();(G=this._canvas.parentElement)===null||G===void 0||G.removeChild(this._canvas),(0,s.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var w;return(w=this._charAtlas)===null||w===void 0?void 0:w.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(w,F){var L,R,A,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let $ of this._renderLayers)$.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(L=this._rectangleRenderer.value)===null||L===void 0||L.setDimensions(this.dimensions),(R=this._rectangleRenderer.value)===null||R===void 0||R.handleResize(),(A=this._glyphRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(I=this._glyphRenderer.value)===null||I===void 0||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var w;for(let F of this._renderLayers)F.handleBlur(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.pause(),this._requestRedrawViewport()}handleFocus(){var w;for(let F of this._renderLayers)F.handleFocus(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.resume(),this._requestRedrawViewport()}handleSelectionChanged(w,F,L){for(let R of this._renderLayers)R.handleSelectionChanged(this._terminal,w,F,L);this._model.selection.update(this._terminal,w,F,L),this._requestRedrawViewport()}handleCursorMove(){var w;for(let F of this._renderLayers)F.handleCursorMove(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new D.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new S.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var w;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let F=(0,s.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==F&&(this._onChangeTextureAtlas.fire(F.pages[0].canvas),this._charAtlasDisposable.value=(0,_.getDisposeArrayDisposable)([(0,c.forwardEvent)(F.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,c.forwardEvent)(F.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=F,this._charAtlas.warmUp(),(w=this._glyphRenderer.value)===null||w===void 0||w.setAtlas(this._charAtlas)}_clearModel(w){var F;this._model.clear(),w&&((F=this._glyphRenderer.value)===null||F===void 0||F.clear())}clearTextureAtlas(){var w;(w=this._charAtlas)===null||w===void 0||w.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var w;this._clearModel(!0);for(let F of this._renderLayers)F.reset(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(w){return-1}deregisterCharacterJoiner(w){return!1}renderRows(w,F){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let L of this._renderLayers)L.handleGridChanged(this._terminal,w,F);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(w,F),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new f.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(w,F){let L=this._core,R,A,I,$,H,P,q,G,B,Q,O,W,U,N=this._workCell;w=T(w,L.rows-1,0),F=T(F,L.rows-1,0);let te=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,J=Math.min(this._terminal.buffer.active.cursorX,L.cols-1),ye=-1,Ae=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let we=!1;for(A=w;A<=F;A++)for(I=A+L.buffer.ydisp,$=L.buffer.lines.get(I),this._model.lineLengths[A]=0,H=this._characterJoinerService.getJoinedCharacters(I),W=0;W<L.cols;W++)if(R=this._cellColorResolver.result.bg,$.loadCell(W,N),W===0&&(R=this._cellColorResolver.result.bg),P=!1,q=W,H.length>0&&W===H[0][0]&&(P=!0,G=H.shift(),N=new E(N,$.translateToString(!0,G[0],G[1]),G[1]-G[0]),q=G[1]-1),B=N.getChars(),Q=N.getCode(),O=(A*L.cols+W)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(N,W,I),Ae&&I===te&&(W===J&&(this._model.cursor={x:J,y:this._terminal.buffer.active.cursorY,width:N.getWidth(),style:this._coreBrowserService.isFocused?L.options.cursorStyle||"block":L.options.cursorInactiveStyle,cursorWidth:L.options.cursorWidth,dpr:this._devicePixelRatio},ye=J+N.getWidth()-1),W>=J&&W<=ye&&(this._coreBrowserService.isFocused&&(L.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&L.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),Q!==y.NULL_CELL_CODE&&(this._model.lineLengths[A]=W+1),(this._model.cells[O]!==Q||this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(we=!0,B.length>1&&(Q|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[O]=Q,this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(W,A,Q,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,B,R),P))for(N=this._workCell,W++;W<q;W++)U=(A*L.cols+W)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(W,A,y.NULL_CELL_CODE,0,0,0,y.NULL_CELL_CHAR,0),this._model.cells[U]=y.NULL_CELL_CODE,this._model.cells[U+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[U+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[U+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;we&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(w,F){this._canvas.width===w&&this._canvas.height===F||(this._canvas.width=w,this._canvas.height=F,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let w=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:w,end:w})}}r.WebglRenderer=x,l([C.traceCall],x.prototype,"renderRows",null);class E extends v.AttributeData{constructor(w,F,L){super(),this.content=0,this.combinedData="",this.fg=w.fg,this.bg=w.bg,this.combinedData=F,this._width=L}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(w){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function T(M,w,F=0){return Math.max(Math.min(M,w),F)}r.JoinedCellData=E},381:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GLTexture=r.expandFloat32Array=r.createShader=r.createProgram=r.PROJECTION_MATRIX=void 0;let l=o(374);function u(i,s,f){let h=(0,l.throwIfFalsy)(i.createShader(s));if(i.shaderSource(h,f),i.compileShader(h),i.getShaderParameter(h,i.COMPILE_STATUS))return h;console.error(i.getShaderInfoLog(h)),i.deleteShader(h)}r.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),r.createProgram=function(i,s,f){let h=(0,l.throwIfFalsy)(i.createProgram());if(i.attachShader(h,(0,l.throwIfFalsy)(u(i,i.VERTEX_SHADER,s))),i.attachShader(h,(0,l.throwIfFalsy)(u(i,i.FRAGMENT_SHADER,f))),i.linkProgram(h),i.getProgramParameter(h,i.LINK_STATUS))return h;console.error(i.getProgramInfoLog(h)),i.deleteProgram(h)},r.createShader=u,r.expandFloat32Array=function(i,s){let f=Math.min(2*i.length,s),h=new Float32Array(f);for(let p=0;p<i.length;p++)h[p]=i[p];return h},r.GLTexture=class{constructor(i){this.texture=i,this.version=-1}}},592:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseRenderLayer=void 0;let l=o(627),u=o(237),i=o(374),s=o(859);class f extends s.Disposable{constructor(p,c,_,v,m,y,C,S){super(),this._container=c,this._alpha=m,this._coreBrowserService=y,this._optionsService=C,this._themeService=S,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${_}-layer`),this._canvas.style.zIndex=v.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(D=>{this._refreshCharAtlas(p,D),this.reset(p)})),this.register((0,s.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,i.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(p){}handleFocus(p){}handleCursorMove(p){}handleGridChanged(p,c,_){}handleSelectionChanged(p,c,_,v=!1){}_setTransparency(p,c){if(c===this._alpha)return;let _=this._canvas;this._alpha=c,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,_),this._refreshCharAtlas(p,this._themeService.colors),this.handleGridChanged(p,0,p.rows-1)}_refreshCharAtlas(p,c){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,l.acquireTextureAtlas)(p,this._optionsService.rawOptions,c,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(p,c){this._deviceCellWidth=c.device.cell.width,this._deviceCellHeight=c.device.cell.height,this._deviceCharWidth=c.device.char.width,this._deviceCharHeight=c.device.char.height,this._deviceCharLeft=c.device.char.left,this._deviceCharTop=c.device.char.top,this._canvas.width=c.device.canvas.width,this._canvas.height=c.device.canvas.height,this._canvas.style.width=`${c.css.canvas.width}px`,this._canvas.style.height=`${c.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(p,this._themeService.colors)}_fillBottomLineAtCells(p,c,_=1){this._ctx.fillRect(p*this._deviceCellWidth,(c+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,_*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(p,c,_,v){this._alpha?this._ctx.clearRect(p*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,v*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(p*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,v*this._deviceCellHeight))}_fillCharTrueColor(p,c,_,v){this._ctx.font=this._getFont(p,!1,!1),this._ctx.textBaseline=u.TEXT_BASELINE,this._clipCell(_,v,c.getWidth()),this._ctx.fillText(c.getChars(),_*this._deviceCellWidth+this._deviceCharLeft,v*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(p,c,_){this._ctx.beginPath(),this._ctx.rect(p*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(p,c,_){return`${_?"italic":""} ${c?p.options.fontWeightBold:p.options.fontWeight} ${p.options.fontSize*this._coreBrowserService.dpr}px ${p.options.fontFamily}`}}r.BaseRenderLayer=f},733:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkRenderLayer=void 0;let l=o(197),u=o(237),i=o(592);class s extends i.BaseRenderLayer{constructor(h,p,c,_,v,m,y){super(c,h,"link",p,!0,v,m,y),this.register(_.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(_.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(h,p){super.resize(h,p),this._state=void 0}reset(h){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let h=this._state.y2-this._state.y1-1;h>0&&this._clearCells(0,this._state.y1+1,this._state.cols,h),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(h){if(h.fg===u.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:h.fg!==void 0&&(0,l.is256Color)(h.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[h.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,h.y1===h.y2)this._fillBottomLineAtCells(h.x1,h.y1,h.x2-h.x1);else{this._fillBottomLineAtCells(h.x1,h.y1,h.cols-h.x1);for(let p=h.y1+1;p<h.y2;p++)this._fillBottomLineAtCells(0,p,h.cols);this._fillBottomLineAtCells(0,h.y2,h.x2)}this._state=h}_handleHideLinkUnderline(h){this._clearCurrentLink()}}r.LinkRenderLayer=s},820:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(o,l,u,i){o.addEventListener(l,u,i);let s=!1;return{dispose:()=>{s||(s=!0,o.removeEventListener(l,u,i))}}}},274:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellColorResolver=void 0;let o,l=0,u=0,i=!1,s=!1,f=!1;r.CellColorResolver=class{constructor(h,p,c,_,v){this._terminal=h,this._selectionRenderModel=p,this._decorationService=c,this._coreBrowserService=_,this._themeService=v,this.result={fg:0,bg:0,ext:0}}resolve(h,p,c){this.result.bg=h.bg,this.result.fg=h.fg,this.result.ext=268435456&h.bg?h.extended.ext:0,u=0,l=0,s=!1,i=!1,f=!1,o=this._themeService.colors,this._decorationService.forEachDecorationAtCell(p,c,"bottom",_=>{_.backgroundColorRGB&&(u=_.backgroundColorRGB.rgba>>8&16777215,s=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,i=!0)}),f=this._selectionRenderModel.isCellSelected(this._terminal,p,c),f&&(u=(this._coreBrowserService.isFocused?o.selectionBackgroundOpaque:o.selectionInactiveBackgroundOpaque).rgba>>8&16777215,s=!0,o.selectionForeground&&(l=o.selectionForeground.rgba>>8&16777215,i=!0)),this._decorationService.forEachDecorationAtCell(p,c,"top",_=>{_.backgroundColorRGB&&(u=_.backgroundColorRGB.rgba>>8&16777215,s=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,i=!0)}),s&&(u=f?-16777216&h.bg&-134217729|u|50331648:-16777216&h.bg|u|50331648),i&&(l=-16777216&h.fg&-67108865|l|50331648),67108864&this.result.fg&&(s&&!i&&(l=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&o.background.rgba>>8|50331648,i=!0),!s&&i&&(u=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&o.foreground.rgba>>8|50331648,s=!0)),o=void 0,this.result.bg=s?u:this.result.bg,this.result.fg=i?l:this.result.fg}}},627:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.removeTerminalFromCache=r.acquireTextureAtlas=void 0;let l=o(509),u=o(197),i=[];r.acquireTextureAtlas=function(s,f,h,p,c,_,v,m){let y=(0,u.generateConfig)(p,c,_,v,f,h,m);for(let D=0;D<i.length;D++){let g=i[D],b=g.ownedBy.indexOf(s);if(b>=0){if((0,u.configEquals)(g.config,y))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),i.splice(D,1)):g.ownedBy.splice(b,1);break}}for(let D=0;D<i.length;D++){let g=i[D];if((0,u.configEquals)(g.config,y))return g.ownedBy.push(s),g.atlas}let C=s._core,S={atlas:new l.TextureAtlas(document,y,C.unicodeService),config:y,ownedBy:[s]};return i.push(S),S.atlas},r.removeTerminalFromCache=function(s){for(let f=0;f<i.length;f++){let h=i[f].ownedBy.indexOf(s);if(h!==-1){i[f].ownedBy.length===1?(i[f].atlas.dispose(),i.splice(f,1)):i[f].ownedBy.splice(h,1);break}}}},197:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.is256Color=r.configEquals=r.generateConfig=void 0;let l=o(160);r.generateConfig=function(u,i,s,f,h,p,c){let _={foreground:p.foreground,background:p.background,cursor:l.NULL_COLOR,cursorAccent:l.NULL_COLOR,selectionForeground:l.NULL_COLOR,selectionBackgroundTransparent:l.NULL_COLOR,selectionBackgroundOpaque:l.NULL_COLOR,selectionInactiveBackgroundTransparent:l.NULL_COLOR,selectionInactiveBackgroundOpaque:l.NULL_COLOR,ansi:p.ansi.slice(),contrastCache:p.contrastCache,halfContrastCache:p.halfContrastCache};return{customGlyphs:h.customGlyphs,devicePixelRatio:c,letterSpacing:h.letterSpacing,lineHeight:h.lineHeight,deviceCellWidth:u,deviceCellHeight:i,deviceCharWidth:s,deviceCharHeight:f,fontFamily:h.fontFamily,fontSize:h.fontSize,fontWeight:h.fontWeight,fontWeightBold:h.fontWeightBold,allowTransparency:h.allowTransparency,drawBoldTextInBrightColors:h.drawBoldTextInBrightColors,minimumContrastRatio:h.minimumContrastRatio,colors:_}},r.configEquals=function(u,i){for(let s=0;s<u.colors.ansi.length;s++)if(u.colors.ansi[s].rgba!==i.colors.ansi[s].rgba)return!1;return u.devicePixelRatio===i.devicePixelRatio&&u.customGlyphs===i.customGlyphs&&u.lineHeight===i.lineHeight&&u.letterSpacing===i.letterSpacing&&u.fontFamily===i.fontFamily&&u.fontSize===i.fontSize&&u.fontWeight===i.fontWeight&&u.fontWeightBold===i.fontWeightBold&&u.allowTransparency===i.allowTransparency&&u.deviceCharWidth===i.deviceCharWidth&&u.deviceCharHeight===i.deviceCharHeight&&u.drawBoldTextInBrightColors===i.drawBoldTextInBrightColors&&u.minimumContrastRatio===i.minimumContrastRatio&&u.colors.foreground.rgba===i.colors.foreground.rgba&&u.colors.background.rgba===i.colors.background.rgba},r.is256Color=function(u){return(50331648&u)==16777216||(50331648&u)==33554432}},237:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;let l=o(399);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},457:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CursorBlinkStateManager=void 0,r.CursorBlinkStateManager=class{constructor(o,l){this._renderCallback=o,this._coreBrowserService=l,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let l=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,l>0)return void this._restartInterval(l)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let l=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(l)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tryDrawCustomChar=r.powerlineDefinitions=r.boxDrawingDefinitions=r.blockElementDefinitions=void 0;let l=o(374);r.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let u={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};r.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(p,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u2551":{1:(p,c)=>`M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"\u2552":{1:(p,c)=>`M.5,1 L.5,${.5-c} L1,${.5-c} M.5,${.5+c} L1,${.5+c}`},"\u2553":{1:(p,c)=>`M${.5-p},1 L${.5-p},.5 L1,.5 M${.5+p},.5 L${.5+p},1`},"\u2554":{1:(p,c)=>`M1,${.5-c} L${.5-p},${.5-c} L${.5-p},1 M1,${.5+c} L${.5+p},${.5+c} L${.5+p},1`},"\u2555":{1:(p,c)=>`M0,${.5-c} L.5,${.5-c} L.5,1 M0,${.5+c} L.5,${.5+c}`},"\u2556":{1:(p,c)=>`M${.5+p},1 L${.5+p},.5 L0,.5 M${.5-p},.5 L${.5-p},1`},"\u2557":{1:(p,c)=>`M0,${.5+c} L${.5-p},${.5+c} L${.5-p},1 M0,${.5-c} L${.5+p},${.5-c} L${.5+p},1`},"\u2558":{1:(p,c)=>`M.5,0 L.5,${.5+c} L1,${.5+c} M.5,${.5-c} L1,${.5-c}`},"\u2559":{1:(p,c)=>`M1,.5 L${.5-p},.5 L${.5-p},0 M${.5+p},.5 L${.5+p},0`},"\u255A":{1:(p,c)=>`M1,${.5-c} L${.5+p},${.5-c} L${.5+p},0 M1,${.5+c} L${.5-p},${.5+c} L${.5-p},0`},"\u255B":{1:(p,c)=>`M0,${.5+c} L.5,${.5+c} L.5,0 M0,${.5-c} L.5,${.5-c}`},"\u255C":{1:(p,c)=>`M0,.5 L${.5+p},.5 L${.5+p},0 M${.5-p},.5 L${.5-p},0`},"\u255D":{1:(p,c)=>`M0,${.5-c} L${.5-p},${.5-c} L${.5-p},0 M0,${.5+c} L${.5+p},${.5+c} L${.5+p},0`},"\u255E":{1:(p,c)=>`M.5,0 L.5,1 M.5,${.5-c} L1,${.5-c} M.5,${.5+c} L1,${.5+c}`},"\u255F":{1:(p,c)=>`M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1 M${.5+p},.5 L1,.5`},"\u2560":{1:(p,c)=>`M${.5-p},0 L${.5-p},1 M1,${.5+c} L${.5+p},${.5+c} L${.5+p},1 M1,${.5-c} L${.5+p},${.5-c} L${.5+p},0`},"\u2561":{1:(p,c)=>`M.5,0 L.5,1 M0,${.5-c} L.5,${.5-c} M0,${.5+c} L.5,${.5+c}`},"\u2562":{1:(p,c)=>`M0,.5 L${.5-p},.5 M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"\u2563":{1:(p,c)=>`M${.5+p},0 L${.5+p},1 M0,${.5+c} L${.5-p},${.5+c} L${.5-p},1 M0,${.5-c} L${.5-p},${.5-c} L${.5-p},0`},"\u2564":{1:(p,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c} M.5,${.5+c} L.5,1`},"\u2565":{1:(p,c)=>`M0,.5 L1,.5 M${.5-p},.5 L${.5-p},1 M${.5+p},.5 L${.5+p},1`},"\u2566":{1:(p,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L${.5-p},${.5+c} L${.5-p},1 M1,${.5+c} L${.5+p},${.5+c} L${.5+p},1`},"\u2567":{1:(p,c)=>`M.5,0 L.5,${.5-c} M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u2568":{1:(p,c)=>`M0,.5 L1,.5 M${.5-p},.5 L${.5-p},0 M${.5+p},.5 L${.5+p},0`},"\u2569":{1:(p,c)=>`M0,${.5+c} L1,${.5+c} M0,${.5-c} L${.5-p},${.5-c} L${.5-p},0 M1,${.5-c} L${.5+p},${.5-c} L${.5+p},0`},"\u256A":{1:(p,c)=>`M.5,0 L.5,1 M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u256B":{1:(p,c)=>`M0,.5 L1,.5 M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"\u256C":{1:(p,c)=>`M0,${.5+c} L${.5-p},${.5+c} L${.5-p},1 M1,${.5+c} L${.5+p},${.5+c} L${.5+p},1 M0,${.5-c} L${.5-p},${.5-c} L${.5-p},0 M1,${.5-c} L${.5+p},${.5-c} L${.5+p},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(p,c)=>`M.5,1 L.5,${.5+c/.15*.5} C.5,${.5+c/.15*.5},.5,.5,1,.5`},"\u256E":{1:(p,c)=>`M.5,1 L.5,${.5+c/.15*.5} C.5,${.5+c/.15*.5},.5,.5,0,.5`},"\u256F":{1:(p,c)=>`M.5,0 L.5,${.5-c/.15*.5} C.5,${.5-c/.15*.5},.5,.5,0,.5`},"\u2570":{1:(p,c)=>`M.5,0 L.5,${.5-c/.15*.5} C.5,${.5-c/.15*.5},.5,.5,1,.5`}},r.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},r.powerlineDefinitions["\uE0BB"]=r.powerlineDefinitions["\uE0BD"],r.powerlineDefinitions["\uE0BF"]=r.powerlineDefinitions["\uE0B9"],r.tryDrawCustomChar=function(p,c,_,v,m,y,C,S){let D=r.blockElementDefinitions[c];if(D)return function(E,T,M,w,F,L){for(let R=0;R<T.length;R++){let A=T[R],I=F/8,$=L/8;E.fillRect(M+A.x*I,w+A.y*$,A.w*I,A.h*$)}}(p,D,_,v,m,y),!0;let g=u[c];if(g)return function(E,T,M,w,F,L){let R=i.get(T);R||(R=new Map,i.set(T,R));let A=E.fillStyle;if(typeof A!="string")throw new Error(`Unexpected fillStyle type "${A}"`);let I=R.get(A);if(!I){let $=T[0].length,H=T.length,P=document.createElement("canvas");P.width=$,P.height=H;let q=(0,l.throwIfFalsy)(P.getContext("2d")),G=new ImageData($,H),B,Q,O,W;if(A.startsWith("#"))B=parseInt(A.slice(1,3),16),Q=parseInt(A.slice(3,5),16),O=parseInt(A.slice(5,7),16),W=A.length>7&&parseInt(A.slice(7,9),16)||1;else{if(!A.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${A}" when drawing pattern glyph`);[B,Q,O,W]=A.substring(5,A.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<H;U++)for(let N=0;N<$;N++)G.data[4*(U*$+N)]=B,G.data[4*(U*$+N)+1]=Q,G.data[4*(U*$+N)+2]=O,G.data[4*(U*$+N)+3]=T[U][N]*(255*W);q.putImageData(G,0,0),I=(0,l.throwIfFalsy)(E.createPattern(P,null)),R.set(A,I)}E.fillStyle=I,E.fillRect(M,w,F,L)}(p,g,_,v,m,y),!0;let b=r.boxDrawingDefinitions[c];if(b)return function(E,T,M,w,F,L,R){E.strokeStyle=E.fillStyle;for(let[A,I]of Object.entries(T)){let $;E.beginPath(),E.lineWidth=R*Number.parseInt(A),$=typeof I=="function"?I(.15,.15/L*F):I;for(let H of $.split(" ")){let P=H[0],q=f[P];if(!q){console.error(`Could not find drawing instructions for "${P}"`);continue}let G=H.substring(1).split(",");G[0]&&G[1]&&q(E,h(G,F,L,M,w,!0,R))}E.stroke(),E.closePath()}}(p,b,_,v,m,y,S),!0;let x=r.powerlineDefinitions[c];return!!x&&(function(E,T,M,w,F,L,R,A){var I,$;let H=new Path2D;H.rect(M,w,F,L),E.clip(H),E.beginPath();let P=R/12;E.lineWidth=A*P;for(let q of T.d.split(" ")){let G=q[0],B=f[G];if(!B){console.error(`Could not find drawing instructions for "${G}"`);continue}let Q=q.substring(1).split(",");Q[0]&&Q[1]&&B(E,h(Q,F,L,M,w,!1,A,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(P/2),(($=T.rightPadding)!==null&&$!==void 0?$:0)*(P/2)))}T.type===1?(E.strokeStyle=E.fillStyle,E.stroke()):E.fill(),E.closePath()}(p,x,_,v,m,y,C,S),!0)};let i=new Map;function s(p,c,_=0){return Math.max(Math.min(p,c),_)}let f={C:(p,c)=>p.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]),L:(p,c)=>p.lineTo(c[0],c[1]),M:(p,c)=>p.moveTo(c[0],c[1])};function h(p,c,_,v,m,y,C,S=0,D=0){let g=p.map(b=>parseFloat(b)||parseInt(b));if(g.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<g.length;b+=2)g[b]*=c-S*C-D*C,y&&g[b]!==0&&(g[b]=s(Math.round(g[b]+.5)-.5,c,0)),g[b]+=v+S*C;for(let b=1;b<g.length;b+=2)g[b]*=_,y&&g[b]!==0&&(g[b]=s(Math.round(g[b]+.5)-.5,_,0)),g[b]+=m;return g}},56:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.observeDevicePixelDimensions=void 0;let l=o(859);r.observeDevicePixelDimensions=function(u,i,s){let f=new i.ResizeObserver(h=>{let p=h.find(v=>v.target===u);if(!p)return;if(!("devicePixelContentBoxSize"in p))return f?.disconnect(),void(f=void 0);let c=p.devicePixelContentBoxSize[0].inlineSize,_=p.devicePixelContentBoxSize[0].blockSize;c>0&&_>0&&s(c,_)});try{f.observe(u,{box:["device-pixel-content-box"]})}catch{f.disconnect(),f=void 0}return(0,l.toDisposable)(()=>f?.disconnect())}},374:(d,r)=>{function o(l){return 57508<=l&&l<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},r.isPowerlineGlyph=o,r.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},r.excludeFromContrastRatioDemands=function(l){return o(l)||function(u){return 9472<=u&&u<=9631}(l)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,i,s,f=!1){if(this.selectionStart=i,this.selectionEnd=s,!i||!s||i[0]===s[0]&&i[1]===s[1])return void this.clear();let h=i[1]-u.buffer.active.viewportY,p=s[1]-u.buffer.active.viewportY,c=Math.max(h,0),_=Math.min(p,u.rows-1);c>=u.rows||_<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=h,this.viewportEndRow=p,this.viewportCappedStartRow=c,this.viewportCappedEndRow=_,this.startCol=i[0],this.endCol=s[0])}isCellSelected(u,i,s){return!!this.hasSelection&&(s-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?i>=this.startCol&&s>=this.viewportCappedStartRow&&i<this.endCol&&s<=this.viewportCappedEndRow:i<this.startCol&&s>=this.viewportCappedStartRow&&i>=this.endCol&&s<=this.viewportCappedEndRow:s>this.viewportStartRow&&s<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&s===this.viewportStartRow&&i>=this.startCol&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportEndRow&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportStartRow&&i>=this.startCol)}}r.createSelectionRenderModel=function(){return new o}},509:function(d,r,o){var l=this&&this.__decorate||function(x,E,T,M){var w,F=arguments.length,L=F<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,T):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(x,E,T,M);else for(var R=x.length-1;R>=0;R--)(w=x[R])&&(L=(F<3?w(L):F>3?w(E,T,L):w(E,T))||L);return F>3&&L&&Object.defineProperty(E,T,L),L};Object.defineProperty(r,"__esModule",{value:!0}),r.TextureAtlas=void 0;let u=o(237),i=o(860),s=o(374),f=o(160),h=o(345),p=o(485),c=o(385),_=o(147),v=o(855),m=o(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class S{get pages(){return this._pages}constructor(E,T,M){this._document=E,this._config=T,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new p.FourKeyMap,this._cacheMapCombined=new p.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new _.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new h.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new h.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=b(E,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,s.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let E of this.pages)E.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let E=new c.IdleTaskQueue;for(let T=33;T<126;T++)E.enqueue(()=>{if(!this._cacheMap.get(T,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT)){let M=this._drawToCache(T,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT);this._cacheMap.set(T,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let E of this._pages)E.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(S.maxAtlasPages&&this._pages.length>=Math.max(4,S.maxAtlasPages)){let T=this._pages.filter(I=>2*I.canvas.width<=(S.maxTextureSize||4096)).sort((I,$)=>$.canvas.width!==I.canvas.width?$.canvas.width-I.canvas.width:$.percentageUsed-I.percentageUsed),M=-1,w=0;for(let I=0;I<T.length;I++)if(T[I].canvas.width!==w)M=I,w=T[I].canvas.width;else if(I-M==3)break;let F=T.slice(M,M+4),L=F.map(I=>I.glyphs[0].texturePage).sort((I,$)=>I>$?1:-1),R=this.pages.length-F.length,A=this._mergePages(F,R);A.version++;for(let I=L.length-1;I>=0;I--)this._deletePage(L[I]);this.pages.push(A),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(A.canvas)}let E=new D(this._document,this._textureSize);return this._pages.push(E),this._activePages.push(E),this._onAddTextureAtlasCanvas.fire(E.canvas),E}_mergePages(E,T){let M=2*E[0].canvas.width,w=new D(this._document,M,E);for(let[F,L]of E.entries()){let R=F*L.canvas.width%M,A=Math.floor(F/2)*L.canvas.height;w.ctx.drawImage(L.canvas,R,A);for(let $ of L.glyphs)$.texturePage=T,$.sizeClipSpace.x=$.size.x/M,$.sizeClipSpace.y=$.size.y/M,$.texturePosition.x+=R,$.texturePosition.y+=A,$.texturePositionClipSpace.x=$.texturePosition.x/M,$.texturePositionClipSpace.y=$.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(L.canvas);let I=this._activePages.indexOf(L);I!==-1&&this._activePages.splice(I,1)}return w}_deletePage(E){this._pages.splice(E,1);for(let T=E;T<this._pages.length;T++){let M=this._pages[T];for(let w of M.glyphs)w.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(E,T,M,w,F){return this._getFromCacheMap(this._cacheMapCombined,E,T,M,w,F)}getRasterizedGlyph(E,T,M,w,F){return this._getFromCacheMap(this._cacheMap,E,T,M,w,F)}_getFromCacheMap(E,T,M,w,F,L=!1){return C=E.get(T,M,w,F),C||(C=this._drawToCache(T,M,w,F,L),E.set(T,M,w,F,C)),C}_getColorFromAnsiIndex(E){if(E>=this._config.colors.ansi.length)throw new Error("No color found for idx "+E);return this._config.colors.ansi[E]}_getBackgroundColor(E,T,M,w){if(this._config.allowTransparency)return f.NULL_COLOR;let F;switch(E){case 16777216:case 33554432:F=this._getColorFromAnsiIndex(T);break;case 50331648:let L=_.AttributeData.toColorRGB(T);F=f.rgba.toColor(L[0],L[1],L[2]);break;default:F=M?f.color.opaque(this._config.colors.foreground):this._config.colors.background}return F}_getForegroundColor(E,T,M,w,F,L,R,A,I,$){let H=this._getMinimumContrastColor(E,T,M,w,F,L,!1,I,A,$);if(H)return H;let P;switch(F){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&L<8&&(L+=8),P=this._getColorFromAnsiIndex(L);break;case 50331648:let q=_.AttributeData.toColorRGB(L);P=f.rgba.toColor(q[0],q[1],q[2]);break;default:P=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=f.color.opaque(P)),A&&(P=f.color.multiplyOpacity(P,u.DIM_OPACITY)),P}_resolveBackgroundRgba(E,T,M){switch(E){case 16777216:case 33554432:return this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(E,T,M,w){switch(E){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&w&&T<8&&(T+=8),this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(E,T,M,w,F,L,R,A,I,$){if(this._config.minimumContrastRatio===1||$)return;let H=this._getContrastCache(I),P=H.getColor(E,w);if(P!==void 0)return P||void 0;let q=this._resolveBackgroundRgba(T,M,R),G=this._resolveForegroundRgba(F,L,R,A),B=f.rgba.ensureContrastRatio(q,G,this._config.minimumContrastRatio/(I?2:1));if(!B)return void H.setColor(E,w,null);let Q=f.rgba.toColor(B>>24&255,B>>16&255,B>>8&255);return H.setColor(E,w,Q),Q}_getContrastCache(E){return E?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(E,T,M,w,F=!1){let L=typeof E=="number"?String.fromCharCode(E):E,R=Math.min(this._config.deviceCellWidth*Math.max(L.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);let A=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<A&&(this._tmpCanvas.height=A),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=T,this._workAttributeData.extended.ext=w,this._workAttributeData.isInvisible())return y;let I=!!this._workAttributeData.isBold(),$=!!this._workAttributeData.isInverse(),H=!!this._workAttributeData.isDim(),P=!!this._workAttributeData.isItalic(),q=!!this._workAttributeData.isUnderline(),G=!!this._workAttributeData.isStrikethrough(),B=!!this._workAttributeData.isOverline(),Q=this._workAttributeData.getFgColor(),O=this._workAttributeData.getFgColorMode(),W=this._workAttributeData.getBgColor(),U=this._workAttributeData.getBgColorMode();if($){let ae=Q;Q=W,W=ae;let j=O;O=U,U=j}let N=this._getBackgroundColor(U,W,$,H);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=N.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let te=I?this._config.fontWeightBold:this._config.fontWeight,J=P?"italic":"";this._tmpCtx.font=`${J} ${te} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=u.TEXT_BASELINE;let ye=L.length===1&&(0,s.isPowerlineGlyph)(L.charCodeAt(0)),Ae=L.length===1&&(0,s.isRestrictedPowerlineGlyph)(L.charCodeAt(0)),we=this._getForegroundColor(T,U,W,M,O,Q,$,H,I,(0,s.excludeFromContrastRatioDemands)(L.charCodeAt(0)));this._tmpCtx.fillStyle=we.css;let ce=Ae?0:4,xe=!1;this._config.customGlyphs!==!1&&(xe=(0,i.tryDrawCustomChar)(this._tmpCtx,L,ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Rt,cn=!ye;if(Rt=typeof E=="number"?this._unicodeService.wcwidth(E):this._unicodeService.getStringCellWidth(E),q){this._tmpCtx.save();let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=ae%2==1?.5:0;if(this._tmpCtx.lineWidth=ae,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())cn=!1,this._tmpCtx.strokeStyle=`rgb(${_.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{cn=!1;let gt=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&gt<8&&(gt+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(gt).css}this._tmpCtx.beginPath();let ie=ce,he=Math.ceil(ce+this._config.deviceCharHeight)-j-(F?2*ae:0),ze=he+ae,at=he+2*ae;for(let gt=0;gt<Rt;gt++){this._tmpCtx.save();let Ge=ie+gt*this._config.deviceCellWidth,$t=ie+(gt+1)*this._config.deviceCellWidth,nn=Ge+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ge,he),this._tmpCtx.lineTo($t,he),this._tmpCtx.moveTo(Ge,at),this._tmpCtx.lineTo($t,at);break;case 3:let Ot=ae<=1?at:Math.ceil(ce+this._config.deviceCharHeight-ae/2)-j,nr=ae<=1?he:Math.ceil(ce+this._config.deviceCharHeight+ae/2)-j,bu=new Path2D;bu.rect(Ge,he,this._config.deviceCellWidth,at-he),this._tmpCtx.clip(bu),this._tmpCtx.moveTo(Ge-this._config.deviceCellWidth/2,ze),this._tmpCtx.bezierCurveTo(Ge-this._config.deviceCellWidth/2,nr,Ge,nr,Ge,ze),this._tmpCtx.bezierCurveTo(Ge,Ot,nn,Ot,nn,ze),this._tmpCtx.bezierCurveTo(nn,nr,$t,nr,$t,ze),this._tmpCtx.bezierCurveTo($t,Ot,$t+this._config.deviceCellWidth/2,Ot,$t+this._config.deviceCellWidth/2,ze);break;case 4:this._tmpCtx.setLineDash([Math.round(ae),Math.round(ae)]),this._tmpCtx.moveTo(Ge,he),this._tmpCtx.lineTo($t,he);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ge,he),this._tmpCtx.lineTo($t,he);break;default:this._tmpCtx.moveTo(Ge,he),this._tmpCtx.lineTo($t,he)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!xe&&this._config.fontSize>=12&&!this._config.allowTransparency&&L!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let gt=this._tmpCtx.measureText(L);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in gt&&gt.actualBoundingBoxDescent>0){this._tmpCtx.save();let Ge=new Path2D;Ge.rect(ie,he-Math.ceil(ae/2),this._config.deviceCellWidth*Rt,at-he+Math.ceil(ae/2)),this._tmpCtx.clip(Ge),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=N.css,this._tmpCtx.strokeText(L,ce,ce+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(B){let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=ae%2==1?.5:0;this._tmpCtx.lineWidth=ae,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+j),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*Rt,ce+j),this._tmpCtx.stroke()}if(xe||this._tmpCtx.fillText(L,ce,ce+this._config.deviceCharHeight),L==="_"&&!this._config.allowTransparency){let ae=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),N,we,cn);if(ae)for(let j=1;j<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=N.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(L,ce,ce+this._config.deviceCharHeight-j),ae=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),N,we,cn),ae);j++);}if(G){let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),j=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ae,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*Rt,ce+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.stroke()}this._tmpCtx.restore();let Jt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),tt;if(tt=this._config.allowTransparency?function(ae){for(let j=0;j<ae.data.length;j+=4)if(ae.data[j+3]>0)return!1;return!0}(Jt):g(Jt,N,we,cn),tt)return y;let le=this._findGlyphBoundingBox(Jt,this._workBoundingBox,R,Ae,xe,ce),ge,fe;for(;;){if(this._activePages.length===0){let ae=this._createNewPage();ge=ae,fe=ae.currentRow,fe.height=le.size.y;break}ge=this._activePages[this._activePages.length-1],fe=ge.currentRow;for(let ae of this._activePages)le.size.y<=ae.currentRow.height&&(ge=ae,fe=ae.currentRow);for(let ae=this._activePages.length-1;ae>=0;ae--)for(let j of this._activePages[ae].fixedRows)j.height<=fe.height&&le.size.y<=j.height&&(ge=this._activePages[ae],fe=j);if(fe.y+le.size.y>=ge.canvas.height||fe.height>le.size.y+2){let ae=!1;if(ge.currentRow.y+ge.currentRow.height+le.size.y>=ge.canvas.height){let j;for(let ie of this._activePages)if(ie.currentRow.y+ie.currentRow.height+le.size.y<ie.canvas.height){j=ie;break}if(j)ge=j;else if(S.maxAtlasPages&&this._pages.length>=S.maxAtlasPages&&fe.y+le.size.y<=ge.canvas.height&&fe.height>=le.size.y&&fe.x+le.size.x<=ge.canvas.width)ae=!0;else{let ie=this._createNewPage();ge=ie,fe=ie.currentRow,fe.height=le.size.y,ae=!0}}ae||(ge.currentRow.height>0&&ge.fixedRows.push(ge.currentRow),fe={x:0,y:ge.currentRow.y+ge.currentRow.height,height:le.size.y},ge.fixedRows.push(fe),ge.currentRow={x:0,y:fe.y+fe.height,height:0})}if(fe.x+le.size.x<=ge.canvas.width)break;fe===ge.currentRow?(fe.x=0,fe.y+=fe.height,fe.height=0):ge.fixedRows.splice(ge.fixedRows.indexOf(fe),1)}return le.texturePage=this._pages.indexOf(ge),le.texturePosition.x=fe.x,le.texturePosition.y=fe.y,le.texturePositionClipSpace.x=fe.x/ge.canvas.width,le.texturePositionClipSpace.y=fe.y/ge.canvas.height,le.sizeClipSpace.x/=ge.canvas.width,le.sizeClipSpace.y/=ge.canvas.height,fe.height=Math.max(fe.height,le.size.y),fe.x+=le.size.x,ge.ctx.putImageData(Jt,le.texturePosition.x-this._workBoundingBox.left,le.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,le.size.x,le.size.y),ge.addGlyph(le),ge.version++,le}_findGlyphBoundingBox(E,T,M,w,F,L){T.top=0;let R=w?this._config.deviceCellHeight:this._tmpCanvas.height,A=w?this._config.deviceCellWidth:M,I=!1;for(let $=0;$<R;$++){for(let H=0;H<A;H++){let P=$*this._tmpCanvas.width*4+4*H+3;if(E.data[P]!==0){T.top=$,I=!0;break}}if(I)break}T.left=0,I=!1;for(let $=0;$<L+A;$++){for(let H=0;H<R;H++){let P=H*this._tmpCanvas.width*4+4*$+3;if(E.data[P]!==0){T.left=$,I=!0;break}}if(I)break}T.right=A,I=!1;for(let $=L+A-1;$>=L;$--){for(let H=0;H<R;H++){let P=H*this._tmpCanvas.width*4+4*$+3;if(E.data[P]!==0){T.right=$,I=!0;break}}if(I)break}T.bottom=R,I=!1;for(let $=R-1;$>=0;$--){for(let H=0;H<A;H++){let P=$*this._tmpCanvas.width*4+4*H+3;if(E.data[P]!==0){T.bottom=$,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:T.right-T.left+1,y:T.bottom-T.top+1},sizeClipSpace:{x:T.right-T.left+1,y:T.bottom-T.top+1},offset:{x:-T.left+L+(w||F?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-T.top+L+(w||F?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}r.TextureAtlas=S,l([m.traceCall],S.prototype,"_drawToCache",null);class D{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(E){this._glyphs.push(E),this._usedPixels+=E.size.x*E.size.y}constructor(E,T,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let w of M)this._glyphs.push(...w.glyphs),this._usedPixels+=w._usedPixels;this.canvas=b(E,T,T),this.ctx=(0,s.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(x,E,T,M){let w=E.rgba>>>24,F=E.rgba>>>16&255,L=E.rgba>>>8&255,R=T.rgba>>>24,A=T.rgba>>>16&255,I=T.rgba>>>8&255,$=Math.floor((Math.abs(w-R)+Math.abs(F-A)+Math.abs(L-I))/12),H=!0;for(let P=0;P<x.data.length;P+=4)x.data[P]===w&&x.data[P+1]===F&&x.data[P+2]===L||M&&Math.abs(x.data[P]-w)+Math.abs(x.data[P+1]-F)+Math.abs(x.data[P+2]-L)<$?x.data[P+3]=0:H=!1;return H}function b(x,E,T){let M=x.createElement("canvas");return M.width=E,M.height=T,M}},160:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let l=o(399),u=0,i=0,s=0,f=0;var h,p,c,_,v;function m(C){let S=C.toString(16);return S.length<2?"0"+S:S}function y(C,S){return C<S?(S+.05)/(C+.05):(C+.05)/(S+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(S,D,g,b){return b!==void 0?`#${m(S)}${m(D)}${m(g)}${m(b)}`:`#${m(S)}${m(D)}${m(g)}`},C.toRgba=function(S,D,g,b=255){return(S<<24|D<<16|g<<8|b)>>>0}}(h||(r.channels=h={})),function(C){function S(D,g){return f=Math.round(255*g),[u,i,s]=v.toChannels(D.rgba),{css:h.toCss(u,i,s,f),rgba:h.toRgba(u,i,s,f)}}C.blend=function(D,g){if(f=(255&g.rgba)/255,f===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,x=g.rgba>>16&255,E=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return u=T+Math.round((b-T)*f),i=M+Math.round((x-M)*f),s=w+Math.round((E-w)*f),{css:h.toCss(u,i,s),rgba:h.toRgba(u,i,s)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let x=v.ensureContrastRatio(D.rgba,g.rgba,b);if(x)return v.toColor(x>>24&255,x>>16&255,x>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,i,s]=v.toChannels(g),{css:h.toCss(u,i,s),rgba:g}},C.opacity=S,C.multiplyOpacity=function(D,g){return f=255&D.rgba,S(D,f*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(p||(r.color=p={})),function(C){let S,D;if(!l.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(S=b,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),v.toColor(u,i,s);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),f=parseInt(g.slice(4,5).repeat(2),16),v.toColor(u,i,s,f);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return u=parseInt(b[1]),i=parseInt(b[2]),s=parseInt(b[3]),f=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),v.toColor(u,i,s,f);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=g,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[u,i,s,f]=S.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:h.toRgba(u,i,s,f),css:g}}}(c||(r.css=c={})),function(C){function S(D,g,b){let x=D/255,E=g/255,T=b/255;return .2126*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=S}(_||(r.rgb=_={})),function(C){function S(g,b,x){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));for(;R<x&&(w>0||F>0||L>0);)w-=Math.max(0,Math.ceil(.1*w)),F-=Math.max(0,Math.ceil(.1*F)),L-=Math.max(0,Math.ceil(.1*L)),R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));return(w<<24|F<<16|L<<8|255)>>>0}function D(g,b,x){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));for(;R<x&&(w<255||F<255||L<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),F=Math.min(255,F+Math.ceil(.1*(255-F))),L=Math.min(255,L+Math.ceil(.1*(255-L))),R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));return(w<<24|F<<16|L<<8|255)>>>0}C.ensureContrastRatio=function(g,b,x){let E=_.relativeLuminance(g>>8),T=_.relativeLuminance(b>>8);if(y(E,T)<x){if(T<E){let F=S(g,b,x),L=y(E,_.relativeLuminance(F>>8));if(L<x){let R=D(g,b,x);return L>y(E,_.relativeLuminance(R>>8))?F:R}return F}let M=D(g,b,x),w=y(E,_.relativeLuminance(M>>8));if(w<x){let F=S(g,b,x);return w>y(E,_.relativeLuminance(F>>8))?M:F}return M}},C.reduceLuminance=S,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,x,E){return{css:h.toCss(g,b,x,E),rgba:h.toRgba(g,b,x,E)}}}(v||(r.rgba=v={})),r.toPaddedHex=m,r.contrastRatio=y},345:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===o)return void this._listeners.splice(l,1)}}})),this._event}fire(o,l){let u=[];for(let i=0;i<this._listeners.length;i++)u.push(this._listeners[i]);for(let i=0;i<u.length;i++)u[i].call(void 0,o,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(o,l){return o(u=>l.fire(u))}},859:(d,r)=>{function o(l){for(let u of l)u.dispose();l.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){let u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var u;this._isDisposed||l===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},r.toDisposable=function(l){return{dispose:l}},r.disposeArray=o,r.getDisposeArrayDisposable=function(l){return{dispose:()=>o(l)}}},485:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(u,i,s){this._data[u]||(this._data[u]={}),this._data[u][i]=s}get(u,i){return this._data[u]?this._data[u][i]:void 0}clear(){this._data={}}}r.TwoKeyMap=o,r.FourKeyMap=class{constructor(){this._data=new o}set(l,u,i,s,f){this._data.get(l,u)||this._data.set(l,u,new o),this._data.get(l,u).set(i,s,f)}get(l,u,i,s){var f;return(f=this._data.get(l,u))===null||f===void 0?void 0:f.get(i,s)}clear(){this._data.clear()}}},399:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";let o=r.isNode?"node":navigator.userAgent,l=r.isNode?"node":navigator.platform;r.isFirefox=o.includes("Firefox"),r.isLegacyEdge=o.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(o),r.getSafariVersion=function(){if(!r.isSafari)return 0;let u=o.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),r.isIpad=l==="iPad",r.isIphone=l==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),r.isLinux=l.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(o)},385:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;let l=o(399);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let h=0,p=0,c=f.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(h=Date.now(),this._tasks[this._i]()||this._i++,h=Math.max(1,Date.now()-h),p=Math.max(h,p),_=f.timeRemaining(),1.5*p>_)return c-h<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-h))}ms`),void this._start();c=_}this.clear()}}class i extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let h=Date.now()+f;return{timeRemaining:()=>Math.max(0,h-Date.now())}}}r.PriorityTaskQueue=i,r.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(s){return requestIdleCallback(s)}_cancelCallback(s){cancelIdleCallback(s)}}:i,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(s){this._queue.clear(),this._queue.enqueue(s)}flush(){this._queue.flush()}}},147:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(i){return[i>>>16&255,i>>>8&255,255&i]}static fromColorRGB(i){return(255&i[0])<<16|(255&i[1])<<8|255&i[2]}clone(){let i=new o;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=o;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(i){this._ext&=-67108864,this._ext|=67108863&i}get urlId(){return this._urlId}set urlId(i){this._urlId=i}constructor(i=0,s=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=s}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=l},782:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;let l=o(133),u=o(855),i=o(147);class s extends i.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new i.ExtendedAttrs,this.combinedData=""}static fromCharData(h){let p=new s;return p.setFromCharData(h),p}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(h){this.fg=h[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let p=!1;if(h[u.CHAR_DATA_CHAR_INDEX].length>2)p=!0;else if(h[u.CHAR_DATA_CHAR_INDEX].length===2){let c=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let _=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(c-55296)+_-56320+65536|h[u.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[u.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=h[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|h[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=s},855:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},133:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},r.utf32ToString=function(o,l=0,u=o.length){let i="";for(let s=l;s<u;++s){let f=o[s];f>65535?(f-=65536,i+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):i+=String.fromCharCode(f)}return i},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,l){let u=o.length;if(!u)return 0;let i=0,s=0;if(this._interim){let f=o.charCodeAt(s++);56320<=f&&f<=57343?l[i++]=1024*(this._interim-55296)+f-56320+65536:(l[i++]=this._interim,l[i++]=f),this._interim=0}for(let f=s;f<u;++f){let h=o.charCodeAt(f);if(55296<=h&&h<=56319){if(++f>=u)return this._interim=h,i;let p=o.charCodeAt(f);56320<=p&&p<=57343?l[i++]=1024*(h-55296)+p-56320+65536:(l[i++]=h,l[i++]=p)}else h!==65279&&(l[i++]=h)}return i}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,l){let u=o.length;if(!u)return 0;let i,s,f,h,p=0,c=0,_=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)C<<=6,C|=S;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;_<b;){if(_>=u)return 0;if(S=o[_++],(192&S)!=128){_--,y=!0;break}this.interim[D++]=S,C<<=6,C|=63&S}y||(g===2?C<128?_--:l[p++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(l[p++]=C):C<65536||C>1114111||(l[p++]=C)),this.interim.fill(0)}let v=u-4,m=_;for(;m<u;){for(;!(!(m<v)||128&(i=o[m])||128&(s=o[m+1])||128&(f=o[m+2])||128&(h=o[m+3]));)l[p++]=i,l[p++]=s,l[p++]=f,l[p++]=h,m+=4;if(i=o[m++],i<128)l[p++]=i;else if((224&i)==192){if(m>=u)return this.interim[0]=i,p;if(s=o[m++],(192&s)!=128){m--;continue}if(c=(31&i)<<6|63&s,c<128){m--;continue}l[p++]=c}else if((240&i)==224){if(m>=u)return this.interim[0]=i,p;if(s=o[m++],(192&s)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,p;if(f=o[m++],(192&f)!=128){m--;continue}if(c=(15&i)<<12|(63&s)<<6|63&f,c<2048||c>=55296&&c<=57343||c===65279)continue;l[p++]=c}else if((248&i)==240){if(m>=u)return this.interim[0]=i,p;if(s=o[m++],(192&s)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,p;if(f=o[m++],(192&f)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=f,p;if(h=o[m++],(192&h)!=128){m--;continue}if(c=(7&i)<<18|(63&s)<<12|(63&f)<<6|63&h,c<65536||c>1114111)continue;l[p++]=c}}return p}}},776:function(d,r,o){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,S=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,v,S):y(_,v))||S);return C>3&&S&&Object.defineProperty(_,v,S),S},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;let i=o(859),s=o(97),f={trace:s.LogLevelEnum.TRACE,debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},h,p=r.LogService=class extends i.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),h=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let _=0;_<c.length;_++)typeof c[_]=="function"&&(c[_]=c[_]())}_log(c,_,v){this._evalLazyOptionalParams(v),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...v)}trace(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.TRACE&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,c,_)}debug(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.DEBUG&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,c,_)}info(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.INFO&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,c,_)}warn(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.WARN&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,c,_)}error(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.ERROR&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,c,_)}};r.LogService=p=l([u(0,s.IOptionsService)],p),r.setTraceLogger=function(c){h=c},r.traceCall=function(c,_,v){if(typeof v.value!="function")throw new Error("not supported");let m=v.value;v.value=function(...y){if(h.logLevel!==s.LogLevelEnum.TRACE)return m.apply(this,y);h.trace(`GlyphRenderer#${m.name}(${y.map(S=>JSON.stringify(S)).join(", ")})`);let C=m.apply(this,y);return h.trace(`GlyphRenderer#${m.name} return`,C),C}}},726:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;let o="di$target",l="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(u){return u[l]||[]},r.createDecorator=function(u){if(r.serviceRegistry.has(u))return r.serviceRegistry.get(u);let i=function(s,f,h){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(p,c,_){c[o]===c?c[l].push({id:p,index:_}):(c[l]=[{id:p,index:_}],c[o]=c)})(i,s,h)};return i.toString=()=>u,r.serviceRegistry.set(u,i),i}},97:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;let l=o(726);var u;r.IBufferService=(0,l.createDecorator)("BufferService"),r.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),r.ICoreService=(0,l.createDecorator)("CoreService"),r.ICharsetService=(0,l.createDecorator)("CharsetService"),r.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(i){i[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.OFF=5]="OFF"}(u||(r.LogLevelEnum=u={})),r.ILogService=(0,l.createDecorator)("LogService"),r.IOptionsService=(0,l.createDecorator)("OptionsService"),r.IOscLinkService=(0,l.createDecorator)("OscLinkService"),r.IUnicodeService=(0,l.createDecorator)("UnicodeService"),r.IDecorationService=(0,l.createDecorator)("DecorationService")}},t={};function n(d){var r=t[d];if(r!==void 0)return r.exports;var o=t[d]={exports:{}};return e[d].call(o.exports,o,o.exports,n),o.exports}var a={};return(()=>{var d=a;Object.defineProperty(d,"__esModule",{value:!0}),d.WebglAddon=void 0;let r=n(345),o=n(859),l=n(399),u=n(666),i=n(776);class s extends o.Disposable{constructor(h){if(l.isSafari&&(0,l.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=h,this._onChangeTextureAtlas=this.register(new r.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new r.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new r.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new r.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(h){let p=h._core;if(!h.element)return void this.register(p.onWillOpen(()=>this.activate(h)));this._terminal=h;let c=p.coreService,_=p.optionsService,v=p,m=v._renderService,y=v._characterJoinerService,C=v._charSizeService,S=v._coreBrowserService,D=v._decorationService,g=v._logService,b=v._themeService;(0,i.setTraceLogger)(g),this._renderer=this.register(new u.WebglRenderer(h,y,C,S,c,D,_,b,this._preserveDrawingBuffer)),this.register((0,r.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,r.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,r.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,r.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),m.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{let x=this._terminal._core._renderService;x.setRenderer(this._terminal._core._createRenderer()),x.handleResize(h.cols,h.rows)}))}get textureAtlas(){var h;return(h=this._renderer)===null||h===void 0?void 0:h.textureAtlas}clearTextureAtlas(){var h;(h=this._renderer)===null||h===void 0||h.clearTextureAtlas()}}d.WebglAddon=s})(),a})())});var eN=Tt((Bg,$T)=>{(function(e,t){typeof Bg=="object"&&typeof $T=="object"?$T.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Bg=="object"?Bg.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkComputer=r.WebLinkProvider=void 0,r.WebLinkProvider=class{constructor(l,u,i,s={}){this._terminal=l,this._regex=u,this._handler=i,this._options=s}provideLinks(l,u){let i=o.computeLink(l,this._regex,this._terminal,this._handler);u(this._addCallbacks(i))}_addCallbacks(l){return l.map(u=>(u.leave=this._options.leave,u.hover=(i,s)=>{if(this._options.hover){let{range:f}=u;this._options.hover(i,s,f)}},u))}};class o{static computeLink(u,i,s,f){let h=new RegExp(i.source,(i.flags||"")+"g"),[p,c]=o._getWindowedLineStrings(u-1,s),_=p.join(""),v,m=[];for(;v=h.exec(_);){let y=v[0];try{let x=new URL(y),E=decodeURI(x.toString());if(y!==E&&y+"/"!==E)continue}catch{continue}let[C,S]=o._mapStrIdx(s,c,0,v.index),[D,g]=o._mapStrIdx(s,C,S,y.length);if(C===-1||S===-1||D===-1||g===-1)continue;let b={start:{x:S+1,y:C+1},end:{x:g,y:D+1}};m.push({range:b,text:y,activate:f})}return m}static _getWindowedLineStrings(u,i){let s,f=u,h=u,p=0,c="",_=[];if(s=i.buffer.active.getLine(u)){let v=s.translateToString(!0);if(s.isWrapped&&v[0]!==" "){for(p=0;(s=i.buffer.active.getLine(--f))&&p<2048&&(c=s.translateToString(!0),p+=c.length,_.push(c),s.isWrapped&&c.indexOf(" ")===-1););_.reverse()}for(_.push(v),p=0;(s=i.buffer.active.getLine(++h))&&s.isWrapped&&p<2048&&(c=s.translateToString(!0),p+=c.length,_.push(c),c.indexOf(" ")===-1););}return[_,f]}static _mapStrIdx(u,i,s,f){let h=u.buffer.active,p=h.getNullCell(),c=s;for(;f;){let _=h.getLine(i);if(!_)return[-1,-1];for(let v=c;v<_.length;++v){_.getCell(v,p);let m=p.getChars();if(p.getWidth()&&(f-=m.length||1,v===_.length-1&&m==="")){let y=h.getLine(i+1);y&&y.isWrapped&&(y.getCell(0,p),p.getWidth()===2&&(f+=1))}if(f<0)return[i,v]}i++,c=0}return[i,c]}}r.LinkComputer=o}},t={};function n(d){var r=t[d];if(r!==void 0)return r.exports;var o=t[d]={exports:{}};return e[d](o,o.exports,n),o.exports}var a={};return(()=>{var d=a;Object.defineProperty(d,"__esModule",{value:!0}),d.WebLinksAddon=void 0;let r=n(6),o=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function l(u,i){let s=window.open();if(s){try{s.opener=null}catch{}s.location.href=i}else console.warn("Opening link blocked as opener could not be cleared")}d.WebLinksAddon=class{constructor(u=l,i={}){this._handler=u,this._options=i}activate(u){this._terminal=u;let i=this._options,s=i.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new r.WebLinkProvider(this._terminal,s,this._handler,i))}dispose(){var u;(u=this._linkProvider)===null||u===void 0||u.dispose()}}})(),a})())});var uN=Tt((qg,kT)=>{(function(e,t){if(typeof qg=="object"&&typeof kT=="object")kT.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var a in n)(typeof qg=="object"?qg:e)[a]=n[a]}})(self,()=>(()=>{"use strict";var e={4567:function(d,r,o){var l=this&&this.__decorate||function(m,y,C,S){var D,g=arguments.length,b=g<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(m,y,C,S);else for(var x=m.length-1;x>=0;x--)(D=m[x])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},u=this&&this.__param||function(m,y){return function(C,S){y(C,S,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityManager=void 0;let i=o(9042),s=o(6114),f=o(9924),h=o(844),p=o(5596),c=o(4725),_=o(3656),v=r.AccessibilityManager=class extends h.Disposable{constructor(m,y){super(),this._terminal=m,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new f.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new p.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,_.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,h.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(m){for(let y=0;y<m;y++)this._handleChar(" ")}_handleChar(m){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==m&&(this._charsToAnnounce+=m):this._charsToAnnounce+=m,m===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=i.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&this._liveRegion.remove()}_handleKey(m){this._clearLiveRegion(),/\p{Control}/u.test(m)||this._charsToConsume.push(m)}_refreshRows(m,y){this._liveRegionDebouncer.refresh(m,y,this._terminal.rows)}_renderRows(m,y){let C=this._terminal.buffer,S=C.lines.length.toString();for(let D=m;D<=y;D++){let g=C.translateBufferLineToString(C.ydisp+D,!0),b=(C.ydisp+D+1).toString(),x=this._rowElements[D];x&&(g.length===0?x.innerText="\xA0":x.textContent=g,x.setAttribute("aria-posinset",b),x.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(m,y){let C=m.target,S=this._rowElements[y===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||m.relatedTarget!==S)return;let D,g;if(y===0?(D=C,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=C,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){let b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{let b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),m.preventDefault(),m.stopImmediatePropagation()}_handleResize(m){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>m;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let m=document.createElement("div");return m.setAttribute("role","listitem"),m.tabIndex=-1,this._refreshRowDimensions(m),m}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let m=0;m<this._terminal.rows;m++)this._refreshRowDimensions(this._rowElements[m])}}_refreshRowDimensions(m){m.style.height=`${this._renderService.dimensions.css.cell.height}px`}};r.AccessibilityManager=v=l([u(1,c.IRenderService)],v)},3614:(d,r)=>{function o(s){return s.replace(/\r?\n/g,"\r")}function l(s,f){return f?"\x1B[200~"+s+"\x1B[201~":s}function u(s,f,h,p){s=l(s=o(s),h.decPrivateModes.bracketedPasteMode&&p.rawOptions.ignoreBracketedPasteMode!==!0),h.triggerDataEvent(s,!0),f.value=""}function i(s,f,h){let p=h.getBoundingClientRect(),c=s.clientX-p.left-10,_=s.clientY-p.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${c}px`,f.style.top=`${_}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(r,"__esModule",{value:!0}),r.rightClickHandler=r.moveTextAreaUnderMouseCursor=r.paste=r.handlePasteEvent=r.copyHandler=r.bracketTextForPaste=r.prepareTextForTerminal=void 0,r.prepareTextForTerminal=o,r.bracketTextForPaste=l,r.copyHandler=function(s,f){s.clipboardData&&s.clipboardData.setData("text/plain",f.selectionText),s.preventDefault()},r.handlePasteEvent=function(s,f,h,p){s.stopPropagation(),s.clipboardData&&u(s.clipboardData.getData("text/plain"),f,h,p)},r.paste=u,r.moveTextAreaUnderMouseCursor=i,r.rightClickHandler=function(s,f,h,p,c){i(s,f,h),c&&p.rightClickSelect(s),f.value=p.selectionText,f.select()}},7239:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorContrastCache=void 0;let l=o(1505);r.ColorContrastCache=class{constructor(){this._color=new l.TwoKeyMap,this._css=new l.TwoKeyMap}setCss(u,i,s){this._css.set(u,i,s)}getCss(u,i){return this._css.get(u,i)}setColor(u,i,s){this._color.set(u,i,s)}getColor(u,i){return this._color.get(u,i)}clear(){this._color.clear(),this._css.clear()}}},3656:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(o,l,u,i){o.addEventListener(l,u,i);let s=!1;return{dispose:()=>{s||(s=!0,o.removeEventListener(l,u,i))}}}},6465:function(d,r,o){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,S=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,v,S):y(_,v))||S);return C>3&&S&&Object.defineProperty(_,v,S),S},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Linkifier2=void 0;let i=o(3656),s=o(8460),f=o(844),h=o(2585),p=r.Linkifier2=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new s.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new s.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{let _=this._linkProviders.indexOf(c);_!==-1&&this._linkProviders.splice(_,1)}}}attachToDom(c,_,v){this._element=c,this._mouseService=_,this._renderService=v,this.register((0,i.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,i.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,i.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,i.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;let _=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!_)return;this._isMouseOut=!1;let v=c.composedPath();for(let m=0;m<v.length;m++){let y=v[m];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&_.x===this._lastBufferCell.x&&_.y===this._lastBufferCell.y||(this._handleHover(_),this._lastBufferCell=_)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,_){var v,m;this._activeProviderReplies&&_||((v=this._activeProviderReplies)===null||v===void 0||v.forEach(C=>{C?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let y=!1;for(let[C,S]of this._linkProviders.entries())_?!((m=this._activeProviderReplies)===null||m===void 0)&&m.get(C)&&(y=this._checkLinkProviderResult(C,c,y)):S.provideLinks(c.y,D=>{var g,b;if(this._isMouseOut)return;let x=D?.map(E=>({link:E}));(g=this._activeProviderReplies)===null||g===void 0||g.set(C,x),y=this._checkLinkProviderResult(C,c,y),((b=this._activeProviderReplies)===null||b===void 0?void 0:b.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,_){let v=new Set;for(let m=0;m<_.size;m++){let y=_.get(m);if(y)for(let C=0;C<y.length;C++){let S=y[C],D=S.link.range.start.y<c?0:S.link.range.start.x,g=S.link.range.end.y>c?this._bufferService.cols:S.link.range.end.x;for(let b=D;b<=g;b++){if(v.has(b)){y.splice(C--,1);break}v.add(b)}}}}_checkLinkProviderResult(c,_,v){var m;if(!this._activeProviderReplies)return v;let y=this._activeProviderReplies.get(c),C=!1;for(let S=0;S<c;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(C=!0);if(!C&&y){let S=y.find(D=>this._linkAtPosition(D.link,_));S&&(v=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!v)for(let S=0;S<this._activeProviderReplies.size;S++){let D=(m=this._activeProviderReplies.get(S))===null||m===void 0?void 0:m.find(g=>this._linkAtPosition(g.link,_));if(D){v=!0,this._handleNewLink(D);break}}return v}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;let _=this._positionFromMouseEvent(c,this._element,this._mouseService);_&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,_)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,_){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!_||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=_)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(c.link,_)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var v,m;return(m=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:v=>{var m,y;!((m=this._currentLink)===null||m===void 0)&&m.state&&this._currentLink.state.decorations.pointerCursor!==v&&(this._currentLink.state.decorations.pointerCursor=v,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",v)))}},underline:{get:()=>{var v,m;return(m=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||m===void 0?void 0:m.decorations.underline},set:v=>{var m,y,C;!((m=this._currentLink)===null||m===void 0)&&m.state&&((C=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||C===void 0?void 0:C.decorations.underline)!==v&&(this._currentLink.state.decorations.underline=v,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,v))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(v=>{if(!this._currentLink)return;let m=v.start===0?0:v.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+v.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(m,y),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(c,_,v){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),_.hover&&_.hover(v,_.text)}_fireUnderlineEvent(c,_){let v=c.range,m=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(v.start.x-1,v.start.y-m-1,v.end.x,v.end.y-m-1,void 0);(_?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(c,_,v){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),_.leave&&_.leave(v,_.text)}_linkAtPosition(c,_){let v=c.range.start.y*this._bufferService.cols+c.range.start.x,m=c.range.end.y*this._bufferService.cols+c.range.end.x,y=_.y*this._bufferService.cols+_.x;return v<=y&&y<=m}_positionFromMouseEvent(c,_,v){let m=v.getCoords(c,_,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,_,v,m,y){return{x1:c,y1:_,x2:v,y2:m,cols:this._bufferService.cols,fg:y}}};r.Linkifier2=p=l([u(0,h.IBufferService)],p)},9042:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tooMuchOutput=r.promptLabel=void 0,r.promptLabel="Terminal input",r.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(d,r,o){var l=this&&this.__decorate||function(p,c,_,v){var m,y=arguments.length,C=y<3?c:v===null?v=Object.getOwnPropertyDescriptor(c,_):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(p,c,_,v);else for(var S=p.length-1;S>=0;S--)(m=p[S])&&(C=(y<3?m(C):y>3?m(c,_,C):m(c,_))||C);return y>3&&C&&Object.defineProperty(c,_,C),C},u=this&&this.__param||function(p,c){return function(_,v){c(_,v,p)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkProvider=void 0;let i=o(511),s=o(2585),f=r.OscLinkProvider=class{constructor(p,c,_){this._bufferService=p,this._optionsService=c,this._oscLinkService=_}provideLinks(p,c){var _;let v=this._bufferService.buffer.lines.get(p-1);if(!v)return void c(void 0);let m=[],y=this._optionsService.rawOptions.linkHandler,C=new i.CellData,S=v.getTrimmedLength(),D=-1,g=-1,b=!1;for(let x=0;x<S;x++)if(g!==-1||v.hasContent(x)){if(v.loadCell(x,C),C.hasExtendedAttrs()&&C.extended.urlId){if(g===-1){g=x,D=C.extended.urlId;continue}b=C.extended.urlId!==D}else g!==-1&&(b=!0);if(b||g!==-1&&x===S-1){let E=(_=this._oscLinkService.getLinkData(D))===null||_===void 0?void 0:_.uri;if(E){let T={start:{x:g+1,y:p},end:{x:x+(b||x!==S-1?0:1),y:p}},M=!1;if(!y?.allowNonHttpProtocols)try{let w=new URL(E);["http:","https:"].includes(w.protocol)||(M=!0)}catch{M=!0}M||m.push({text:E,range:T,activate:(w,F)=>y?y.activate(w,F,T):h(0,F),hover:(w,F)=>{var L;return(L=y?.hover)===null||L===void 0?void 0:L.call(y,w,F,T)},leave:(w,F)=>{var L;return(L=y?.leave)===null||L===void 0?void 0:L.call(y,w,F,T)}})}b=!1,C.hasExtendedAttrs()&&C.extended.urlId?(g=x,D=C.extended.urlId):(g=-1,D=-1)}}c(m)}};function h(p,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){let _=window.open();if(_){try{_.opener=null}catch{}_.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}r.OscLinkProvider=f=l([u(0,s.IBufferService),u(1,s.IOptionsService),u(2,s.IOscLinkService)],f)},6193:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderDebouncer=void 0,r.RenderDebouncer=class{constructor(o,l){this._parentWindow=o,this._renderCallback=l,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,l,u){this._rowCount=u,o=o!==void 0?o:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,l),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ScreenDprMonitor=void 0;let l=o(844);class u extends l.Disposable{constructor(s){super(),this._parentWindow=s,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,l.toDisposable)(()=>{this.clearListener()}))}setListener(s){this._listener&&this.clearListener(),this._listener=s,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var s;this._outerListener&&((s=this._resolutionMediaMatchList)===null||s===void 0||s.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}r.ScreenDprMonitor=u},3236:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;let l=o(3614),u=o(3656),i=o(6465),s=o(9042),f=o(3730),h=o(1680),p=o(3107),c=o(5744),_=o(2950),v=o(1296),m=o(428),y=o(4269),C=o(5114),S=o(8934),D=o(3230),g=o(9312),b=o(4725),x=o(6731),E=o(8055),T=o(8969),M=o(8460),w=o(844),F=o(6114),L=o(8437),R=o(2584),A=o(7399),I=o(5941),$=o(9074),H=o(2585),P=o(5435),q=o(4567),G=typeof window<"u"?window.document:null;class B extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new w.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(i.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance($.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((W,U)=>this.refresh(W,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(W=>this._reportWindowsOptions(W))),this.register(this._inputHandler.onColor(W=>this._handleColorEvent(W))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(W=>this._afterResize(W.cols,W.rows))),this.register((0,w.toDisposable)(()=>{var W,U;this._customKeyEventHandler=void 0,(U=(W=this.element)===null||W===void 0?void 0:W.parentNode)===null||U===void 0||U.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let W of O){let U,N="";switch(W.index){case 256:U="foreground",N="10";break;case 257:U="background",N="11";break;case 258:U="cursor",N="12";break;default:U="ansi",N="4;"+W.index}switch(W.type){case 0:let te=E.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[W.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${R.C0.ESC}]${N};${(0,I.toRgbString)(te)}${R.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(J=>J.ansi[W.index]=E.rgba.toColor(...W.color));else{let J=U;this._themeService.modifyColors(ye=>ye[J]=E.rgba.toColor(...W.color))}break;case 2:this._themeService.restoreColor(W.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,W=this.buffer.lines.get(O);if(!W)return;let U=Math.min(this.buffer.x,this.cols-1),N=this._renderService.dimensions.css.cell.height,te=W.getWidth(U),J=this._renderService.dimensions.css.cell.width*te,ye=this.buffer.y*this._renderService.dimensions.css.cell.height,Ae=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ae+"px",this.textarea.style.top=ye+"px",this.textarea.style.width=J+"px",this.textarea.style.height=N+"px",this.textarea.style.lineHeight=N+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",W=>{this.hasSelection()&&(0,l.copyHandler)(W,this._selectionService)}));let O=W=>(0,l.handlePasteEvent)(W,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,u.addDisposableDomListener)(this.element,"paste",O)),F.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",W=>{W.button===2&&(0,l.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",W=>{(0,l.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",W=>{W.button===1&&(0,l.moveTextAreaUnderMouseCursor)(W,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){var W;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let U=G.createDocumentFragment();this._viewportElement=G.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),U.appendChild(this._viewportElement),this._viewportScrollArea=G.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=G.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=G.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),U.appendChild(this.screenElement),this.textarea=G.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",s.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(W=this._document.defaultView)!==null&&W!==void 0?W:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",N=>this._handleTextAreaFocus(N))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(m.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(x.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(N=>this._onRender.fire(N))),this.onResize(N=>this._renderService.resize(N.cols,N.rows)),this._compositionView=G.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(U);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(h.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(N=>this.scrollLines(N.amount,N.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(N=>this.scrollLines(N.amount,N.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(N=>this._renderService.handleSelectionChanged(N.start,N.end,N.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(N=>{this.textarea.value=N,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(N=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(p.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",N=>this._selectionService.handleMouseDown(N))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",N=>this._handleScreenReaderModeOptionChange(N))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",N=>{!this._overviewRulerRenderer&&N&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(v.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let O=this,W=this.element;function U(J){let ye=O._mouseService.getMouseReportCoords(J,O.screenElement);if(!ye)return!1;let Ae,we;switch(J.overrideType||J.type){case"mousemove":we=32,J.buttons===void 0?(Ae=3,J.button!==void 0&&(Ae=J.button<3?J.button:3)):Ae=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":we=0,Ae=J.button<3?J.button:3;break;case"mousedown":we=1,Ae=J.button<3?J.button:3;break;case"wheel":if(O.viewport.getLinesScrolled(J)===0)return!1;we=J.deltaY<0?0:1,Ae=4;break;default:return!1}return!(we===void 0||Ae===void 0||Ae>4)&&O.coreMouseService.triggerMouseEvent({col:ye.col,row:ye.row,x:ye.x,y:ye.y,button:Ae,action:we,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}let N={mouseup:null,wheel:null,mousedrag:null,mousemove:null},te={mouseup:J=>(U(J),J.buttons||(this._document.removeEventListener("mouseup",N.mouseup),N.mousedrag&&this._document.removeEventListener("mousemove",N.mousedrag)),this.cancel(J)),wheel:J=>(U(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&U(J)},mousemove:J=>{J.buttons||U(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?N.mousemove||(W.addEventListener("mousemove",te.mousemove),N.mousemove=te.mousemove):(W.removeEventListener("mousemove",N.mousemove),N.mousemove=null),16&J?N.wheel||(W.addEventListener("wheel",te.wheel,{passive:!1}),N.wheel=te.wheel):(W.removeEventListener("wheel",N.wheel),N.wheel=null),2&J?N.mouseup||(W.addEventListener("mouseup",te.mouseup),N.mouseup=te.mouseup):(this._document.removeEventListener("mouseup",N.mouseup),W.removeEventListener("mouseup",N.mouseup),N.mouseup=null),4&J?N.mousedrag||(N.mousedrag=te.mousedrag):(this._document.removeEventListener("mousemove",N.mousedrag),N.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(W,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return U(J),N.mouseup&&this._document.addEventListener("mouseup",N.mouseup),N.mousedrag&&this._document.addEventListener("mousemove",N.mousedrag),this.cancel(J)})),this.register((0,u.addDisposableDomListener)(W,"wheel",J=>{if(!N.wheel){if(!this.buffer.hasScrollback){let ye=this.viewport.getLinesScrolled(J);if(ye===0)return;let Ae=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B"),we="";for(let ce=0;ce<Math.abs(ye);ce++)we+=Ae;return this.coreService.triggerDataEvent(we,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(W,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,u.addDisposableDomListener)(W,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(O,W){var U;(U=this._renderService)===null||U===void 0||U.refreshRows(O,W)}updateCursorStyle(O){var W;!((W=this._selectionService)===null||W===void 0)&&W.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,W,U=0){var N;U===1?(super.scrollLines(O,W,U),this.refresh(0,this.rows-1)):(N=this.viewport)===null||N===void 0||N.scrollLines(O)}paste(O){(0,l.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}registerLinkProvider(O){return this.linkifier2.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let W=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),W}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,W,U){this._selectionService.setSelection(O,W,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()}selectAll(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()}selectLines(O,W){var U;(U=this._selectionService)===null||U===void 0||U.selectLines(O,W)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let W=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!W&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;W||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let U=(0,A.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),U.type===3||U.type===2){let N=this.rows-1;return this.scrollLines(U.type===2?-N:N),this.cancel(O,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(U.cancel&&this.cancel(O,!0),!U.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==R.C0.ETX&&U.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,W){let U=O.isMac&&!this.options.macOptionIsMeta&&W.altKey&&!W.ctrlKey&&!W.metaKey||O.isWindows&&W.altKey&&W.ctrlKey&&!W.metaKey||O.isWindows&&W.getModifierState("AltGraph");return W.type==="keypress"?U:U&&(!W.keyCode||W.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(W){return W.keyCode===16||W.keyCode===17||W.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let W;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)W=O.charCode;else if(O.which===null||O.which===void 0)W=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;W=O.which}return!(!W||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(W=String.fromCharCode(W),this._onKey.fire({key:W,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(W,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let W=O.data;return this.coreService.triggerDataEvent(W,!0),this.cancel(O),!0}return!1}resize(O,W){O!==this.cols||W!==this.rows?super.resize(O,W):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,W){var U,N;(U=this._charSizeService)===null||U===void 0||U.measure(),(N=this.viewport)===null||N===void 0||N.syncScrollArea(!0)}clear(){var O;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let W=1;W<this.rows;W++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(O=this.viewport)===null||O===void 0||O.reset(),this.refresh(0,this.rows-1)}}reset(){var O,W;this.options.rows=this.rows,this.options.cols=this.cols;let U=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),(W=this.viewport)===null||W===void 0||W.reset(),this._customKeyEventHandler=U,this.refresh(0,this.rows-1)}clearTextureAtlas(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()}_reportFocus(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case P.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let W=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[4;${U};${W}t`);break;case P.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let N=this._renderService.dimensions.css.cell.width.toFixed(0),te=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[6;${te};${N}t`)}}cancel(O,W){if(this.options.cancelEvents||W)return O.preventDefault(),O.stopPropagation(),!1}}r.Terminal=B},9924:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TimeBasedDebouncer=void 0,r.TimeBasedDebouncer=class{constructor(o,l=1e3){this._renderCallback=o,this._debounceThresholdMS=l,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,l,u){this._rowCount=u,o=o!==void 0?o:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l;let i=Date.now();if(i-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=i,this._innerRefresh();else if(!this._additionalRefreshRequested){let s=i-this._lastRefreshMs,f=this._debounceThresholdMS-s;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,l)}}},1680:function(d,r,o){var l=this&&this.__decorate||function(_,v,m,y){var C,S=arguments.length,D=S<3?v:y===null?y=Object.getOwnPropertyDescriptor(v,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,v,m,y);else for(var g=_.length-1;g>=0;g--)(C=_[g])&&(D=(S<3?C(D):S>3?C(v,m,D):C(v,m))||D);return S>3&&D&&Object.defineProperty(v,m,D),D},u=this&&this.__param||function(_,v){return function(m,y){v(m,y,_)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Viewport=void 0;let i=o(3656),s=o(4725),f=o(8460),h=o(844),p=o(2585),c=r.Viewport=class extends h.Disposable{constructor(_,v,m,y,C,S,D,g){super(),this._viewportElement=_,this._scrollArea=v,this._bufferService=m,this._optionsService=y,this._charSizeService=C,this._renderService=S,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,i.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(_){this._viewportElement.style.backgroundColor=_.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(_){if(_)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let v=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==v&&(this._lastRecordedBufferHeight=v,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let _=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==_&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=_),this._refreshAnimationFrame=null}syncScrollArea(_=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(_);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(_)}_handleScroll(_){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let v=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:v,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let _=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(_*(this._smoothScrollState.target-this._smoothScrollState.origin)),_<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(_,v){let m=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(v<0&&this._viewportElement.scrollTop!==0||v>0&&m<this._lastRecordedBufferHeight)||(_.cancelable&&_.preventDefault(),!1)}handleWheel(_){let v=this._getPixelsScrolled(_);return v!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+v:this._smoothScrollState.target+=v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=v,this._bubbleScroll(_,v))}scrollLines(_){if(_!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let v=_*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!1})}_getPixelsScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let v=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_LINE?v*=this._currentRowHeight:_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._currentRowHeight*this._bufferService.rows),v}getBufferElements(_,v){var m;let y,C="",S=[],D=v??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let b=_;b<D;b++){let x=g.get(b);if(!x)continue;let E=(m=g.get(b+1))===null||m===void 0?void 0:m.isWrapped;if(C+=x.translateToString(!E),!E||b===g.length-1){let T=document.createElement("div");T.textContent=C,S.push(T),C.length>0&&(y=T),C=""}}return{bufferElements:S,cursorElement:y}}getLinesScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let v=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(v/=this._currentRowHeight+0,this._wheelPartialScroll+=v,v=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._bufferService.rows),v}_applyScrollModifier(_,v){let m=this._optionsService.rawOptions.fastScrollModifier;return m==="alt"&&v.altKey||m==="ctrl"&&v.ctrlKey||m==="shift"&&v.shiftKey?_*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:_*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(_){this._lastTouchY=_.touches[0].pageY}handleTouchMove(_){let v=this._lastTouchY-_.touches[0].pageY;return this._lastTouchY=_.touches[0].pageY,v!==0&&(this._viewportElement.scrollTop+=v,this._bubbleScroll(_,v))}};r.Viewport=c=l([u(2,p.IBufferService),u(3,p.IOptionsService),u(4,s.ICharSizeService),u(5,s.IRenderService),u(6,s.ICoreBrowserService),u(7,s.IThemeService)],c)},3107:function(d,r,o){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,S=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,v,S):y(_,v))||S);return C>3&&S&&Object.defineProperty(_,v,S),S},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferDecorationRenderer=void 0;let i=o(3656),s=o(4725),f=o(844),h=o(2585),p=r.BufferDecorationRenderer=class extends f.Disposable{constructor(c,_,v,m){super(),this._screenElement=c,this._bufferService=_,this._decorationService=v,this._renderService=m,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,i.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,f.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var _,v;let m=document.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",((_=c?.options)===null||_===void 0?void 0:_.layer)==="top"),m.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let y=(v=c.options.x)!==null&&v!==void 0?v:0;return y&&y>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(c,m),m}_refreshStyle(c){let _=c.marker.line-this._bufferService.buffers.active.ydisp;if(_<0||_>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let v=this._decorationElements.get(c);v||(v=this._createElement(c),c.element=v,this._decorationElements.set(c,v),this._container.appendChild(v),c.onDispose(()=>{this._decorationElements.delete(c),v.remove()})),v.style.top=_*this._renderService.dimensions.css.cell.height+"px",v.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(v)}}_refreshXPosition(c,_=c.element){var v;if(!_)return;let m=(v=c.options.x)!==null&&v!==void 0?v:0;(c.options.anchor||"left")==="right"?_.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":_.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var _;(_=this._decorationElements.get(c))===null||_===void 0||_.remove(),this._decorationElements.delete(c),c.dispose()}};r.BufferDecorationRenderer=p=l([u(1,h.IBufferService),u(2,h.IDecorationService),u(3,s.IRenderService)],p)},5871:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorZoneStore=void 0,r.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let l of this._zones)if(l.color===o.options.overviewRulerOptions.color&&l.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(l,o.marker.line))return;if(this._lineAdjacentToZone(l,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(l,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,l){return l>=o.startBufferLine&&l<=o.endBufferLine}_lineAdjacentToZone(o,l,u){return l>=o.startBufferLine-this._linePadding[u||"full"]&&l<=o.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(o,l){o.startBufferLine=Math.min(o.startBufferLine,l),o.endBufferLine=Math.max(o.endBufferLine,l)}}},5744:function(d,r,o){var l=this&&this.__decorate||function(y,C,S,D){var g,b=arguments.length,x=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(y,C,S,D);else for(var E=y.length-1;E>=0;E--)(g=y[E])&&(x=(b<3?g(x):b>3?g(C,S,x):g(C,S))||x);return b>3&&x&&Object.defineProperty(C,S,x),x},u=this&&this.__param||function(y,C){return function(S,D){C(S,D,y)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OverviewRulerRenderer=void 0;let i=o(5871),s=o(3656),f=o(4725),h=o(844),p=o(2585),c={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},v={full:0,left:0,center:0,right:0},m=r.OverviewRulerRenderer=class extends h.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,C,S,D,g,b,x){var E;super(),this._viewportElement=y,this._screenElement=C,this._bufferService=S,this._decorationService=D,this._renderService=g,this._optionsService=b,this._coreBrowseService=x,this._colorZoneStore=new i.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(E=this._viewportElement.parentElement)===null||E===void 0||E.insertBefore(this._canvas,this._viewportElement);let T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,h.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,s.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let y=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);_.full=this._canvas.width,_.left=y,_.center=C,_.right=y,this._refreshDrawHeightConstants(),v.full=0,v.left=0,v.center=_.left,v.right=_.left+_.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);let y=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);c.left=C,c.center=C,c.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let y=this._colorZoneStore.zones;for(let C of y)C.position!=="full"&&this._renderColorZone(C);for(let C of y)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(v[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-c[y.position||"full"]/2),_[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[y.position||"full"]))}_queueRefresh(y,C){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r.OverviewRulerRenderer=m=l([u(2,p.IBufferService),u(3,p.IDecorationService),u(4,f.IRenderService),u(5,p.IOptionsService),u(6,f.ICoreBrowserService)],m)},2950:function(d,r,o){var l=this&&this.__decorate||function(p,c,_,v){var m,y=arguments.length,C=y<3?c:v===null?v=Object.getOwnPropertyDescriptor(c,_):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(p,c,_,v);else for(var S=p.length-1;S>=0;S--)(m=p[S])&&(C=(y<3?m(C):y>3?m(c,_,C):m(c,_))||C);return y>3&&C&&Object.defineProperty(c,_,C),C},u=this&&this.__param||function(p,c){return function(_,v){c(_,v,p)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionHelper=void 0;let i=o(4725),s=o(2585),f=o(2584),h=r.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(p,c,_,v,m,y){this._textarea=p,this._compositionView=c,this._bufferService=_,this._optionsService=v,this._coreService=m,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(p){this._compositionView.textContent=p.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(p){if(this._isComposing||this._isSendingComposition){if(p.keyCode===229||p.keyCode===16||p.keyCode===17||p.keyCode===18)return!1;this._finalizeComposition(!1)}return p.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(p){if(this._compositionView.classList.remove("active"),this._isComposing=!1,p){let c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let _;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,_=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),_.length>0&&this._coreService.triggerDataEvent(_,!0)}},0)}else{this._isSendingComposition=!1;let c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){let p=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let c=this._textarea.value,_=c.replace(p,"");this._dataAlreadySent=_,c.length>p.length?this._coreService.triggerDataEvent(_,!0):c.length<p.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):c.length===p.length&&c!==p&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(p){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),_=this._renderService.dimensions.css.cell.height,v=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,m=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=m+"px",this._compositionView.style.top=v+"px",this._compositionView.style.height=_+"px",this._compositionView.style.lineHeight=_+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let y=this._compositionView.getBoundingClientRect();this._textarea.style.left=m+"px",this._textarea.style.top=v+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}p||setTimeout(()=>this.updateCompositionElements(!0),0)}}};r.CompositionHelper=h=l([u(2,s.IBufferService),u(3,s.IOptionsService),u(4,s.ICoreService),u(5,i.IRenderService)],h)},9806:(d,r)=>{function o(l,u,i){let s=i.getBoundingClientRect(),f=l.getComputedStyle(i),h=parseInt(f.getPropertyValue("padding-left")),p=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-s.left-h,u.clientY-s.top-p]}Object.defineProperty(r,"__esModule",{value:!0}),r.getCoords=r.getCoordsRelativeToElement=void 0,r.getCoordsRelativeToElement=o,r.getCoords=function(l,u,i,s,f,h,p,c,_){if(!h)return;let v=o(l,u,i);return v?(v[0]=Math.ceil((v[0]+(_?p/2:0))/p),v[1]=Math.ceil(v[1]/c),v[0]=Math.min(Math.max(v[0],1),s+(_?1:0)),v[1]=Math.min(Math.max(v[1],1),f),v):void 0}},9504:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.moveToCellSequence=void 0;let l=o(2584);function u(c,_,v,m){let y=c-i(c,v),C=_-i(_,v),S=Math.abs(y-C)-function(D,g,b){let x=0,E=D-i(D,b),T=g-i(g,b);for(let M=0;M<Math.abs(E-T);M++){let w=s(D,g)==="A"?-1:1,F=b.buffer.lines.get(E+w*M);F?.isWrapped&&x++}return x}(c,_,v);return p(S,h(s(c,_),m))}function i(c,_){let v=0,m=_.buffer.lines.get(c),y=m?.isWrapped;for(;y&&c>=0&&c<_.rows;)v++,m=_.buffer.lines.get(--c),y=m?.isWrapped;return v}function s(c,_){return c>_?"A":"B"}function f(c,_,v,m,y,C){let S=c,D=_,g="";for(;S!==v||D!==m;)S+=y?1:-1,y&&S>C.cols-1?(g+=C.buffer.translateBufferLineToString(D,!1,c,S),S=0,c=0,D++):!y&&S<0&&(g+=C.buffer.translateBufferLineToString(D,!1,0,c+1),S=C.cols-1,c=S,D--);return g+C.buffer.translateBufferLineToString(D,!1,c,S)}function h(c,_){let v=_?"O":"[";return l.C0.ESC+v+c}function p(c,_){c=Math.floor(c);let v="";for(let m=0;m<c;m++)v+=_;return v}r.moveToCellSequence=function(c,_,v,m){let y=v.buffer.x,C=v.buffer.y;if(!v.buffer.hasScrollback)return function(g,b,x,E,T,M){return u(b,E,T,M).length===0?"":p(f(g,b,g,b-i(b,T),!1,T).length,h("D",M))}(y,C,0,_,v,m)+u(C,_,v,m)+function(g,b,x,E,T,M){let w;w=u(b,E,T,M).length>0?E-i(E,T):b;let F=E,L=function(R,A,I,$,H,P){let q;return q=u(I,$,H,P).length>0?$-i($,H):A,R<I&&q<=$||R>=I&&q<$?"C":"D"}(g,b,x,E,T,M);return p(f(g,w,x,F,L==="C",T).length,h(L,M))}(y,C,c,_,v,m);let S;if(C===_)return S=y>c?"D":"C",p(Math.abs(y-c),h(S,m));S=C>_?"D":"C";let D=Math.abs(C-_);return p(function(g,b){return b.cols-g}(C>_?c:y,v)+(D-1)*v.cols+1+((C>_?y:c)-1),h(S,m))}},1296:function(d,r,o){var l=this&&this.__decorate||function(T,M,w,F){var L,R=arguments.length,A=R<3?M:F===null?F=Object.getOwnPropertyDescriptor(M,w):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(T,M,w,F);else for(var I=T.length-1;I>=0;I--)(L=T[I])&&(A=(R<3?L(A):R>3?L(M,w,A):L(M,w))||A);return R>3&&A&&Object.defineProperty(M,w,A),A},u=this&&this.__param||function(T,M){return function(w,F){M(w,F,T)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRenderer=void 0;let i=o(3787),s=o(2550),f=o(2223),h=o(6171),p=o(4725),c=o(8055),_=o(8460),v=o(844),m=o(2585),y="xterm-dom-renderer-owner-",C="xterm-rows",S="xterm-fg-",D="xterm-bg-",g="xterm-focus",b="xterm-selection",x=1,E=r.DomRenderer=class extends v.Disposable{constructor(T,M,w,F,L,R,A,I,$,H){super(),this._element=T,this._screenElement=M,this._viewportElement=w,this._linkifier2=F,this._charSizeService=R,this._optionsService=A,this._bufferService=I,this._coreBrowserService=$,this._themeService=H,this._terminalClass=x++,this._rowElements=[],this.onRequestRedraw=this.register(new _.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,h.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(P=>this._injectCss(P))),this._injectCss(this._themeService.colors),this._rowFactory=L.createInstance(i.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(P=>this._handleLinkHover(P))),this.register(this._linkifier2.onHideLinkUnderline(P=>this._handleLinkLeave(P))),this.register((0,v.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new s.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let w of this._rowElements)w.style.width=`${this.dimensions.css.canvas.width}px`,w.style.height=`${this.dimensions.css.cell.height}px`,w.style.lineHeight=`${this.dimensions.css.cell.height}px`,w.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let M=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${C} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${C} .xterm-dim { color: ${c.color.multiplyOpacity(T.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,M+=`${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(let[w,F]of T.ansi.entries())M+=`${this._terminalSelector} .${S}${w} { color: ${F.css}; }${this._terminalSelector} .${S}${w}.xterm-dim { color: ${c.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${D}${w} { background-color: ${F.css}; }`;M+=`${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(T.background).css}; }${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${D}${f.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){let T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,M){for(let w=this._rowElements.length;w<=M;w++){let F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,M){this._refreshRowElements(T,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,M,w){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,M,w),this.renderRows(0,this._bufferService.rows-1),!T||!M)return;let F=T[1]-this._bufferService.buffer.ydisp,L=M[1]-this._bufferService.buffer.ydisp,R=Math.max(F,0),A=Math.min(L,this._bufferService.rows-1);if(R>=this._bufferService.rows||A<0)return;let I=document.createDocumentFragment();if(w){let $=T[0]>M[0];I.appendChild(this._createSelectionElement(R,$?M[0]:T[0],$?T[0]:M[0],A-R+1))}else{let $=F===R?T[0]:0,H=R===L?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,$,H));let P=A-R-1;if(I.appendChild(this._createSelectionElement(R+1,0,this._bufferService.cols,P)),R!==A){let q=L===A?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(A,0,q))}}this._selectionContainer.appendChild(I)}_createSelectionElement(T,M,w,F=1){let L=document.createElement("div");return L.style.height=F*this.dimensions.css.cell.height+"px",L.style.top=T*this.dimensions.css.cell.height+"px",L.style.left=M*this.dimensions.css.cell.width+"px",L.style.width=this.dimensions.css.cell.width*(w-M)+"px",L}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let T of this._rowElements)T.replaceChildren()}renderRows(T,M){let w=this._bufferService.buffer,F=w.ybase+w.y,L=Math.min(w.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink,A=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=T;$<=M;$++){let H=$+w.ydisp,P=this._rowElements[$],q=w.lines.get(H);if(!P||!q)break;P.replaceChildren(...this._rowFactory.createRow(q,H,H===F,A,I,L,R,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,M,w,F,L,R){w<0&&(T=0),F<0&&(M=0);let A=this._bufferService.rows-1;w=Math.max(Math.min(w,A),0),F=Math.max(Math.min(F,A),0),L=Math.min(L,this._bufferService.cols);let I=this._bufferService.buffer,$=I.ybase+I.y,H=Math.min(I.x,L-1),P=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,G=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=w;B<=F;++B){let Q=B+I.ydisp,O=this._rowElements[B],W=I.lines.get(Q);if(!O||!W)break;O.replaceChildren(...this._rowFactory.createRow(W,Q,Q===$,q,G,H,P,this.dimensions.css.cell.width,this._widthCache,R?B===w?T:0:-1,R?(B===F?M:L)-1:-1))}}};r.DomRenderer=E=l([u(4,m.IInstantiationService),u(5,p.ICharSizeService),u(6,m.IOptionsService),u(7,m.IBufferService),u(8,p.ICoreBrowserService),u(9,p.IThemeService)],E)},3787:function(d,r,o){var l=this&&this.__decorate||function(S,D,g,b){var x,E=arguments.length,T=E<3?D:b===null?b=Object.getOwnPropertyDescriptor(D,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(S,D,g,b);else for(var M=S.length-1;M>=0;M--)(x=S[M])&&(T=(E<3?x(T):E>3?x(D,g,T):x(D,g))||T);return E>3&&T&&Object.defineProperty(D,g,T),T},u=this&&this.__param||function(S,D){return function(g,b){D(g,b,S)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRendererRowFactory=void 0;let i=o(2223),s=o(643),f=o(511),h=o(2585),p=o(8055),c=o(4725),_=o(4269),v=o(6171),m=o(3734),y=r.DomRendererRowFactory=class{constructor(S,D,g,b,x,E,T){this._document=S,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=b,this._coreService=x,this._decorationService=E,this._themeService=T,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,D,g){this._selectionStart=S,this._selectionEnd=D,this._columnSelectMode=g}createRow(S,D,g,b,x,E,T,M,w,F,L){let R=[],A=this._characterJoinerService.getJoinedCharacters(D),I=this._themeService.colors,$,H=S.getNoBgTrimmedLength();g&&H<E+1&&(H=E+1);let P=0,q="",G=0,B=0,Q=0,O=!1,W=0,U=!1,N=0,te=[],J=F!==-1&&L!==-1;for(let ye=0;ye<H;ye++){S.loadCell(ye,this._workCell);let Ae=this._workCell.getWidth();if(Ae===0)continue;let we=!1,ce=ye,xe=this._workCell;if(A.length>0&&ye===A[0][0]){we=!0;let Ge=A.shift();xe=new _.JoinedCellData(this._workCell,S.translateToString(!0,Ge[0],Ge[1]),Ge[1]-Ge[0]),ce=Ge[1]-1,Ae=xe.getWidth()}let Rt=this._isCellInSelection(ye,D),cn=g&&ye===E,Jt=J&&ye>=F&&ye<=L,tt=!1;this._decorationService.forEachDecorationAtCell(ye,D,void 0,Ge=>{tt=!0});let le=xe.getChars()||s.WHITESPACE_CELL_CHAR;if(le===" "&&(xe.isUnderline()||xe.isOverline())&&(le="\xA0"),N=Ae*M-w.get(le,xe.isBold(),xe.isItalic()),$){if(P&&(Rt&&U||!Rt&&!U&&xe.bg===G)&&(Rt&&U&&I.selectionForeground||xe.fg===B)&&xe.extended.ext===Q&&Jt===O&&N===W&&!cn&&!we&&!tt){q+=le,P++;continue}P&&($.textContent=q),$=this._document.createElement("span"),P=0,q=""}else $=this._document.createElement("span");if(G=xe.bg,B=xe.fg,Q=xe.extended.ext,O=Jt,W=N,U=Rt,we&&E>=ye&&E<=ce&&(E=ye),!this._coreService.isCursorHidden&&cn){if(te.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&te.push("xterm-cursor-blink"),te.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(x)switch(x){case"outline":te.push("xterm-cursor-outline");break;case"block":te.push("xterm-cursor-block");break;case"bar":te.push("xterm-cursor-bar");break;case"underline":te.push("xterm-cursor-underline")}}if(xe.isBold()&&te.push("xterm-bold"),xe.isItalic()&&te.push("xterm-italic"),xe.isDim()&&te.push("xterm-dim"),q=xe.isInvisible()?s.WHITESPACE_CELL_CHAR:xe.getChars()||s.WHITESPACE_CELL_CHAR,xe.isUnderline()&&(te.push(`xterm-underline-${xe.extended.underlineStyle}`),q===" "&&(q="\xA0"),!xe.isUnderlineColorDefault()))if(xe.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${m.AttributeData.toColorRGB(xe.getUnderlineColor()).join(",")})`;else{let Ge=xe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&xe.isBold()&&Ge<8&&(Ge+=8),$.style.textDecorationColor=I.ansi[Ge].css}xe.isOverline()&&(te.push("xterm-overline"),q===" "&&(q="\xA0")),xe.isStrikethrough()&&te.push("xterm-strikethrough"),Jt&&($.style.textDecoration="underline");let ge=xe.getFgColor(),fe=xe.getFgColorMode(),ae=xe.getBgColor(),j=xe.getBgColorMode(),ie=!!xe.isInverse();if(ie){let Ge=ge;ge=ae,ae=Ge;let $t=fe;fe=j,j=$t}let he,ze,at,gt=!1;switch(this._decorationService.forEachDecorationAtCell(ye,D,void 0,Ge=>{Ge.options.layer!=="top"&&gt||(Ge.backgroundColorRGB&&(j=50331648,ae=Ge.backgroundColorRGB.rgba>>8&16777215,he=Ge.backgroundColorRGB),Ge.foregroundColorRGB&&(fe=50331648,ge=Ge.foregroundColorRGB.rgba>>8&16777215,ze=Ge.foregroundColorRGB),gt=Ge.options.layer==="top")}),!gt&&Rt&&(he=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,ae=he.rgba>>8&16777215,j=50331648,gt=!0,I.selectionForeground&&(fe=50331648,ge=I.selectionForeground.rgba>>8&16777215,ze=I.selectionForeground)),gt&&te.push("xterm-decoration-top"),j){case 16777216:case 33554432:at=I.ansi[ae],te.push(`xterm-bg-${ae}`);break;case 50331648:at=p.rgba.toColor(ae>>16,ae>>8&255,255&ae),this._addStyle($,`background-color:#${C((ae>>>0).toString(16),"0",6)}`);break;default:ie?(at=I.foreground,te.push(`xterm-bg-${i.INVERTED_DEFAULT_COLOR}`)):at=I.background}switch(he||xe.isDim()&&(he=p.color.multiplyOpacity(at,.5)),fe){case 16777216:case 33554432:xe.isBold()&&ge<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ge+=8),this._applyMinimumContrast($,at,I.ansi[ge],xe,he,void 0)||te.push(`xterm-fg-${ge}`);break;case 50331648:let Ge=p.rgba.toColor(ge>>16&255,ge>>8&255,255&ge);this._applyMinimumContrast($,at,Ge,xe,he,ze)||this._addStyle($,`color:#${C(ge.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,at,I.foreground,xe,he,void 0)||ie&&te.push(`xterm-fg-${i.INVERTED_DEFAULT_COLOR}`)}te.length&&($.className=te.join(" "),te.length=0),cn||we||tt?$.textContent=q:P++,N!==this.defaultSpacing&&($.style.letterSpacing=`${N}px`),R.push($),ye=ce}return $&&P&&($.textContent=q),R}_applyMinimumContrast(S,D,g,b,x,E){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,v.excludeFromContrastRatioDemands)(b.getCode()))return!1;let T=this._getContrastCache(b),M;if(x||E||(M=T.getColor(D.rgba,g.rgba)),M===void 0){let w=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);M=p.color.ensureContrastRatio(x||D,E||g,w),T.setColor((x||D).rgba,(E||g).rgba,M??null)}return!!M&&(this._addStyle(S,`color:${M.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,D){S.setAttribute("style",`${S.getAttribute("style")||""}${D};`)}_isCellInSelection(S,D){let g=this._selectionStart,b=this._selectionEnd;return!(!g||!b)&&(this._columnSelectMode?g[0]<=b[0]?S>=g[0]&&D>=g[1]&&S<b[0]&&D<=b[1]:S<g[0]&&D>=g[1]&&S>=b[0]&&D<=b[1]:D>g[1]&&D<b[1]||g[1]===b[1]&&D===g[1]&&S>=g[0]&&S<b[0]||g[1]<b[1]&&D===b[1]&&S<b[0]||g[1]<b[1]&&D===g[1]&&S>=g[0])}};function C(S,D,g){for(;S.length<g;)S=D+S;return S}r.DomRendererRowFactory=y=l([u(1,c.ICharacterJoinerService),u(2,h.IOptionsService),u(3,c.ICoreBrowserService),u(4,h.ICoreService),u(5,h.IDecorationService),u(6,c.IThemeService)],y)},2550:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WidthCache=void 0,r.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let l=o.createElement("span"),u=o.createElement("span");u.style.fontWeight="bold";let i=o.createElement("span");i.style.fontStyle="italic";let s=o.createElement("span");s.style.fontWeight="bold",s.style.fontStyle="italic",this._measureElements=[l,u,i,s],this._container.appendChild(l),this._container.appendChild(u),this._container.appendChild(i),this._container.appendChild(s),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,l,u,i){o===this._font&&l===this._fontSize&&u===this._weight&&i===this._weightBold||(this._font=o,this._fontSize=l,this._weight=u,this._weightBold=i,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${i}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${i}`,this.clear())}get(o,l,u){let i=0;if(!l&&!u&&o.length===1&&(i=o.charCodeAt(0))<256)return this._flat[i]!==-9999?this._flat[i]:this._flat[i]=this._measure(o,0);let s=o;l&&(s+="B"),u&&(s+="I");let f=this._holey.get(s);if(f===void 0){let h=0;l&&(h|=1),u&&(h|=2),f=this._measure(o,h),this._holey.set(s,f)}return f}_measure(o,l){let u=this._measureElements[l];return u.textContent=o.repeat(32),u.offsetWidth/32}}},2223:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;let l=o(6114);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},6171:(d,r)=>{function o(l){return 57508<=l&&l<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},r.isPowerlineGlyph=o,r.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},r.excludeFromContrastRatioDemands=function(l){return o(l)||function(u){return 9472<=u&&u<=9631}(l)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionModel=void 0,r.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,l=this.selectionEnd;return!(!o||!l)&&(o[1]>l[1]||o[1]===l[1]&&o[0]>l[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(d,r,o){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,S=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,v,S):y(_,v))||S);return C>3&&S&&Object.defineProperty(_,v,S),S},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharSizeService=void 0;let i=o(2585),s=o(8460),f=o(844),h=r.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,_,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new s.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new p(c,_,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};r.CharSizeService=h=l([u(2,i.IOptionsService)],h);class p{constructor(_,v,m){this._document=_,this._parentElement=v,this._optionsService=m,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let _={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return _.width!==0&&_.height!==0&&(this._result.width=_.width/32,this._result.height=Math.ceil(_.height)),this._result}}},4269:function(d,r,o){var l=this&&this.__decorate||function(_,v,m,y){var C,S=arguments.length,D=S<3?v:y===null?y=Object.getOwnPropertyDescriptor(v,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,v,m,y);else for(var g=_.length-1;g>=0;g--)(C=_[g])&&(D=(S<3?C(D):S>3?C(v,m,D):C(v,m))||D);return S>3&&D&&Object.defineProperty(v,m,D),D},u=this&&this.__param||function(_,v){return function(m,y){v(m,y,_)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterJoinerService=r.JoinedCellData=void 0;let i=o(3734),s=o(643),f=o(511),h=o(2585);class p extends i.AttributeData{constructor(v,m,y){super(),this.content=0,this.combinedData="",this.fg=v.fg,this.bg=v.bg,this.combinedData=m,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(v){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.JoinedCellData=p;let c=r.CharacterJoinerService=class iN{constructor(v){this._bufferService=v,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(v){let m={id:this._nextCharacterJoinerId++,handler:v};return this._characterJoiners.push(m),m.id}deregister(v){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===v)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(v){if(this._characterJoiners.length===0)return[];let m=this._bufferService.buffer.lines.get(v);if(!m||m.length===0)return[];let y=[],C=m.translateToString(!0),S=0,D=0,g=0,b=m.getFg(0),x=m.getBg(0);for(let E=0;E<m.getTrimmedLength();E++)if(m.loadCell(E,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==x){if(E-S>1){let T=this._getJoinedRanges(C,g,D,m,S);for(let M=0;M<T.length;M++)y.push(T[M])}S=E,g=D,b=this._workCell.fg,x=this._workCell.bg}D+=this._workCell.getChars().length||s.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let E=this._getJoinedRanges(C,g,D,m,S);for(let T=0;T<E.length;T++)y.push(E[T])}return y}_getJoinedRanges(v,m,y,C,S){let D=v.substring(m,y),g=[];try{g=this._characterJoiners[0].handler(D)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{let x=this._characterJoiners[b].handler(D);for(let E=0;E<x.length;E++)iN._mergeRanges(g,x[E])}catch(x){console.error(x)}return this._stringRangesToCellRanges(g,C,S),g}_stringRangesToCellRanges(v,m,y){let C=0,S=!1,D=0,g=v[C];if(g){for(let b=y;b<this._bufferService.cols;b++){let x=m.getWidth(b),E=m.getString(b).length||s.WHITESPACE_CELL_CHAR.length;if(x!==0){if(!S&&g[0]<=D&&(g[0]=b,S=!0),g[1]<=D){if(g[1]=b,g=v[++C],!g)break;g[0]<=D?(g[0]=b,S=!0):S=!1}D+=E}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(v,m){let y=!1;for(let C=0;C<v.length;C++){let S=v[C];if(y){if(m[1]<=S[0])return v[C-1][1]=m[1],v;if(m[1]<=S[1])return v[C-1][1]=Math.max(m[1],S[1]),v.splice(C,1),v;v.splice(C,1),C--}else{if(m[1]<=S[0])return v.splice(C,0,m),v;if(m[1]<=S[1])return S[0]=Math.min(m[0],S[0]),v;m[0]<S[1]&&(S[0]=Math.min(m[0],S[0]),y=!0)}}return y?v[v.length-1][1]=m[1]:v.push(m),v}};r.CharacterJoinerService=c=l([u(0,h.IBufferService)],c)},5114:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreBrowserService=void 0,r.CoreBrowserService=class{constructor(o,l){this._textarea=o,this.window=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(d,r,o){var l=this&&this.__decorate||function(h,p,c,_){var v,m=arguments.length,y=m<3?p:_===null?_=Object.getOwnPropertyDescriptor(p,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(h,p,c,_);else for(var C=h.length-1;C>=0;C--)(v=h[C])&&(y=(m<3?v(y):m>3?v(p,c,y):v(p,c))||y);return m>3&&y&&Object.defineProperty(p,c,y),y},u=this&&this.__param||function(h,p){return function(c,_){p(c,_,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseService=void 0;let i=o(4725),s=o(9806),f=r.MouseService=class{constructor(h,p){this._renderService=h,this._charSizeService=p}getCoords(h,p,c,_,v){return(0,s.getCoords)(window,h,p,c,_,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,v)}getMouseReportCoords(h,p){let c=(0,s.getCoordsRelativeToElement)(window,h,p);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};r.MouseService=f=l([u(0,i.IRenderService),u(1,i.ICharSizeService)],f)},3230:function(d,r,o){var l=this&&this.__decorate||function(y,C,S,D){var g,b=arguments.length,x=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(y,C,S,D);else for(var E=y.length-1;E>=0;E--)(g=y[E])&&(x=(b<3?g(x):b>3?g(C,S,x):g(C,S))||x);return b>3&&x&&Object.defineProperty(C,S,x),x},u=this&&this.__param||function(y,C){return function(S,D){C(S,D,y)}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderService=void 0;let i=o(3656),s=o(6193),f=o(5596),h=o(4725),p=o(8460),c=o(844),_=o(7226),v=o(2585),m=r.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,C,S,D,g,b,x,E){if(super(),this._rowCount=y,this._charSizeService=D,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new p.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new p.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new p.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new p.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new s.RenderDebouncer(x.window,(T,M)=>this._renderRows(T,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new f.ScreenDprMonitor(x.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register((0,i.addDisposableDomListener)(x.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(E.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in x.window){let T=new x.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});T.observe(C),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,C,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,C,this._rowCount))}_renderRows(y,C){this._renderer.value&&(y=Math.min(y,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(y,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:C}),this._onRender.fire({start:y,end:C}),this._isNextRenderRedrawOnly=!0)}resize(y,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,C;this._renderer.value&&((C=(y=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,C)):this._renderer.value.handleResize(y,C),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,C,S){var D;this._selectionState.start=y,this._selectionState.end=C,this._selectionState.columnSelectMode=S,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(y,C,S)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};r.RenderService=m=l([u(2,v.IOptionsService),u(3,h.ICharSizeService),u(4,v.IDecorationService),u(5,v.IBufferService),u(6,h.ICoreBrowserService),u(7,h.IThemeService)],m)},9312:function(d,r,o){var l=this&&this.__decorate||function(g,b,x,E){var T,M=arguments.length,w=M<3?b:E===null?E=Object.getOwnPropertyDescriptor(b,x):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,b,x,E);else for(var F=g.length-1;F>=0;F--)(T=g[F])&&(w=(M<3?T(w):M>3?T(b,x,w):T(b,x))||w);return M>3&&w&&Object.defineProperty(b,x,w),w},u=this&&this.__param||function(g,b){return function(x,E){b(x,E,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionService=void 0;let i=o(9806),s=o(9504),f=o(456),h=o(4725),p=o(8460),c=o(844),_=o(6114),v=o(4841),m=o(511),y=o(2585),C="\xA0",S=new RegExp(C,"g"),D=r.SelectionService=class extends c.Disposable{constructor(g,b,x,E,T,M,w,F,L){super(),this._element=g,this._screenElement=b,this._linkifier=x,this._bufferService=E,this._coreService=T,this._mouseService=M,this._optionsService=w,this._renderService=F,this._coreBrowserService=L,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new p.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new p.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new p.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=R=>this._handleMouseMove(R),this._mouseUpListener=R=>this._handleMouseUp(R),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(R=>this._handleTrim(R)),this.register(this._bufferService.buffers.onBufferActivate(R=>this._handleBufferActivate(R))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!g||!b||g[0]===b[0]&&g[1]===b[1])}get selectionText(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!g||!b)return"";let x=this._bufferService.buffer,E=[];if(this._activeSelectionMode===3){if(g[0]===b[0])return"";let T=g[0]<b[0]?g[0]:b[0],M=g[0]<b[0]?b[0]:g[0];for(let w=g[1];w<=b[1];w++){let F=x.translateBufferLineToString(w,!0,T,M);E.push(F)}}else{let T=g[1]===b[1]?b[0]:void 0;E.push(x.translateBufferLineToString(g[1],!0,g[0],T));for(let M=g[1]+1;M<=b[1]-1;M++){let w=x.lines.get(M),F=x.translateBufferLineToString(M,!0);w?.isWrapped?E[E.length-1]+=F:E.push(F)}if(g[1]!==b[1]){let M=x.lines.get(b[1]),w=x.translateBufferLineToString(b[1],!0,0,b[0]);M&&M.isWrapped?E[E.length-1]+=w:E.push(w)}}return E.map(T=>T.replace(S," ")).join(_.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),_.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){let b=this._getMouseBufferCoords(g),x=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!!(x&&E&&b)&&this._areCoordsInSelection(b,x,E)}isCellInSelection(g,b){let x=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!x||!E)&&this._areCoordsInSelection([g,b],x,E)}_areCoordsInSelection(g,b,x){return g[1]>b[1]&&g[1]<x[1]||b[1]===x[1]&&g[1]===b[1]&&g[0]>=b[0]&&g[0]<x[0]||b[1]<x[1]&&g[1]===x[1]&&g[0]<x[0]||b[1]<x[1]&&g[1]===b[1]&&g[0]>=b[0]}_selectWordAtCursor(g,b){var x,E;let T=(E=(x=this._linkifier.currentLink)===null||x===void 0?void 0:x.link)===null||E===void 0?void 0:E.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,v.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let M=this._getMouseBufferCoords(g);return!!M&&(this._selectWordAt(M,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,b){this._model.clearSelection(),g=Math.max(g,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){let b=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(g){let b=(0,i.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1],x=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=x?0:(b>x&&(b-=x),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(g){return _.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){let b=this._getMouseBufferCoords(g);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(g){return g.altKey&&!(_.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;let b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let x=this._bufferService.buffer;if(this._model.selectionEnd[1]<x.lines.length){let E=x.lines.get(this._model.selectionEnd[1]);E&&E.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){let b=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let x=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(x&&x[0]!==void 0&&x[1]!==void 0){let E=(0,s.moveToCellSequence)(x[0]-1,x[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(E,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,x=!(!g||!b||g[0]===b[0]&&g[1]===b[1]);x?g&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,b,x)):this._oldHasSelection&&this._fireOnSelectionChange(g,b,x)}_fireOnSelectionChange(g,b,x){this._oldSelectionStart=g,this._oldSelectionEnd=b,this._oldHasSelection=x,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(g,b){let x=b;for(let E=0;b>=E;E++){let T=g.loadCell(E,this._workCell).getChars().length;this._workCell.getWidth()===0?x--:T>1&&b!==E&&(x+=T-1)}return x}setSelection(g,b,x){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,b],this._model.selectionStartLength=x,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,b,x=!0,E=!0){if(g[0]>=this._bufferService.cols)return;let T=this._bufferService.buffer,M=T.lines.get(g[1]);if(!M)return;let w=T.translateBufferLineToString(g[1],!1),F=this._convertViewportColToCharacterIndex(M,g[0]),L=F,R=g[0]-F,A=0,I=0,$=0,H=0;if(w.charAt(F)===" "){for(;F>0&&w.charAt(F-1)===" ";)F--;for(;L<w.length&&w.charAt(L+1)===" ";)L++}else{let G=g[0],B=g[0];M.getWidth(G)===0&&(A++,G--),M.getWidth(B)===2&&(I++,B++);let Q=M.getString(B).length;for(Q>1&&(H+=Q-1,L+=Q-1);G>0&&F>0&&!this._isCharWordSeparator(M.loadCell(G-1,this._workCell));){M.loadCell(G-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(A++,G--):O>1&&($+=O-1,F-=O-1),F--,G--}for(;B<M.length&&L+1<w.length&&!this._isCharWordSeparator(M.loadCell(B+1,this._workCell));){M.loadCell(B+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,B++):O>1&&(H+=O-1,L+=O-1),L++,B++}}L++;let P=F+R-A+$,q=Math.min(this._bufferService.cols,L-F+A+I-$-H);if(b||w.slice(F,L).trim()!==""){if(x&&P===0&&M.getCodePoint(0)!==32){let G=T.lines.get(g[1]-1);if(G&&M.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){let B=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(B){let Q=this._bufferService.cols-B.start;P-=Q,q+=Q}}}if(E&&P+q===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let G=T.lines.get(g[1]+1);if(G?.isWrapped&&G.getCodePoint(0)!==32){let B=this._getWordAt([0,g[1]+1],!1,!1,!0);B&&(q+=B.length)}}return{start:P,length:q}}}_selectWordAt(g,b){let x=this._getWordAt(g,b);if(x){for(;x.start<0;)x.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[x.start,g[1]],this._model.selectionStartLength=x.length}}_selectToWordAt(g){let b=this._getWordAt(g,!0);if(b){let x=g[1];for(;b.start<0;)b.start+=this._bufferService.cols,x--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,x++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,x]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){let b=this._bufferService.buffer.getWrappedRangeForLine(g),x={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,v.getRangeLength)(x,this._bufferService.cols)}};r.SelectionService=D=l([u(3,y.IBufferService),u(4,y.ICoreService),u(5,h.IMouseService),u(6,y.IOptionsService),u(7,h.IRenderService),u(8,h.ICoreBrowserService)],D)},4725:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IThemeService=r.ICharacterJoinerService=r.ISelectionService=r.IRenderService=r.IMouseService=r.ICoreBrowserService=r.ICharSizeService=void 0;let l=o(8343);r.ICharSizeService=(0,l.createDecorator)("CharSizeService"),r.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),r.IMouseService=(0,l.createDecorator)("MouseService"),r.IRenderService=(0,l.createDecorator)("RenderService"),r.ISelectionService=(0,l.createDecorator)("SelectionService"),r.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),r.IThemeService=(0,l.createDecorator)("ThemeService")},6731:function(d,r,o){var l=this&&this.__decorate||function(D,g,b,x){var E,T=arguments.length,M=T<3?g:x===null?x=Object.getOwnPropertyDescriptor(g,b):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,x);else for(var w=D.length-1;w>=0;w--)(E=D[w])&&(M=(T<3?E(M):T>3?E(g,b,M):E(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M},u=this&&this.__param||function(D,g){return function(b,x){g(b,x,D)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeService=r.DEFAULT_ANSI_COLORS=void 0;let i=o(7239),s=o(8055),f=o(8460),h=o(844),p=o(2585),c=s.css.toColor("#ffffff"),_=s.css.toColor("#000000"),v=s.css.toColor("#ffffff"),m=s.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};r.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[s.css.toColor("#2e3436"),s.css.toColor("#cc0000"),s.css.toColor("#4e9a06"),s.css.toColor("#c4a000"),s.css.toColor("#3465a4"),s.css.toColor("#75507b"),s.css.toColor("#06989a"),s.css.toColor("#d3d7cf"),s.css.toColor("#555753"),s.css.toColor("#ef2929"),s.css.toColor("#8ae234"),s.css.toColor("#fce94f"),s.css.toColor("#729fcf"),s.css.toColor("#ad7fa8"),s.css.toColor("#34e2e2"),s.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let b=0;b<216;b++){let x=g[b/36%6|0],E=g[b/6%6|0],T=g[b%6];D.push({css:s.channels.toCss(x,E,T),rgba:s.channels.toRgba(x,E,T)})}for(let b=0;b<24;b++){let x=8+10*b;D.push({css:s.channels.toCss(x,x,x),rgba:s.channels.toRgba(x,x,x)})}return D})());let C=r.ThemeService=class extends h.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new i.ColorContrastCache,this._halfContrastCache=new i.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:_,cursor:v,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:s.color.blend(_,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:s.color.blend(_,y),ansi:r.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let g=this._colors;if(g.foreground=S(D.foreground,c),g.background=S(D.background,_),g.cursor=S(D.cursor,v),g.cursorAccent=S(D.cursorAccent,m),g.selectionBackgroundTransparent=S(D.selectionBackground,y),g.selectionBackgroundOpaque=s.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=S(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=s.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?S(D.selectionForeground,s.NULL_COLOR):void 0,g.selectionForeground===s.NULL_COLOR&&(g.selectionForeground=void 0),s.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=s.color.opacity(g.selectionBackgroundTransparent,.3)),s.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=s.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=r.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=S(D.black,r.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=S(D.red,r.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=S(D.green,r.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=S(D.yellow,r.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=S(D.blue,r.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=S(D.magenta,r.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=S(D.cyan,r.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=S(D.white,r.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=S(D.brightBlack,r.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=S(D.brightRed,r.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=S(D.brightGreen,r.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=S(D.brightYellow,r.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=S(D.brightBlue,r.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=S(D.brightMagenta,r.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=S(D.brightCyan,r.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=S(D.brightWhite,r.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let b=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let x=0;x<b;x++)g.ansi[x+16]=S(D.extendedAnsi[x],r.DEFAULT_ANSI_COLORS[x+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(D,g){if(D!==void 0)try{return s.css.toColor(D)}catch{}return g}r.ThemeService=C=l([u(0,p.IOptionsService)],C)},6349:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CircularList=void 0;let l=o(8460),u=o(844);class i extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new l.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new l.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new l.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;let h=new Array(f);for(let p=0;p<Math.min(f,this.length);p++)h[p]=this._array[this._getCyclicIndex(p)];this._array=h,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let h=this._length;h<f;h++)this._array[h]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,h){this._array[this._getCyclicIndex(f)]=h}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,h,...p){if(h){for(let c=f;c<this._length-h;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+h)];this._length-=h,this.onDeleteEmitter.fire({index:f,amount:h})}for(let c=this._length-1;c>=f;c--)this._array[this._getCyclicIndex(c+p.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<p.length;c++)this._array[this._getCyclicIndex(f+c)]=p[c];if(p.length&&this.onInsertEmitter.fire({index:f,amount:p.length}),this._length+p.length>this._maxLength){let c=this._length+p.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=p.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,h,p){if(!(h<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+p<0)throw new Error("Cannot shift elements in list beyond index 0");if(p>0){for(let _=h-1;_>=0;_--)this.set(f+_+p,this.get(f+_));let c=f+h+p-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<h;c++)this.set(f+c+p,this.get(f+c))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}r.CircularList=i},1439:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.clone=function o(l,u=5){if(typeof l!="object")return l;let i=Array.isArray(l)?[]:{};for(let s in l)i[s]=u<=1?l[s]:l[s]&&o(l[s],u-1);return i}},8055:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let l=o(6114),u=0,i=0,s=0,f=0;var h,p,c,_,v;function m(C){let S=C.toString(16);return S.length<2?"0"+S:S}function y(C,S){return C<S?(S+.05)/(C+.05):(C+.05)/(S+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(S,D,g,b){return b!==void 0?`#${m(S)}${m(D)}${m(g)}${m(b)}`:`#${m(S)}${m(D)}${m(g)}`},C.toRgba=function(S,D,g,b=255){return(S<<24|D<<16|g<<8|b)>>>0}}(h||(r.channels=h={})),function(C){function S(D,g){return f=Math.round(255*g),[u,i,s]=v.toChannels(D.rgba),{css:h.toCss(u,i,s,f),rgba:h.toRgba(u,i,s,f)}}C.blend=function(D,g){if(f=(255&g.rgba)/255,f===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,x=g.rgba>>16&255,E=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return u=T+Math.round((b-T)*f),i=M+Math.round((x-M)*f),s=w+Math.round((E-w)*f),{css:h.toCss(u,i,s),rgba:h.toRgba(u,i,s)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let x=v.ensureContrastRatio(D.rgba,g.rgba,b);if(x)return v.toColor(x>>24&255,x>>16&255,x>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,i,s]=v.toChannels(g),{css:h.toCss(u,i,s),rgba:g}},C.opacity=S,C.multiplyOpacity=function(D,g){return f=255&D.rgba,S(D,f*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(p||(r.color=p={})),function(C){let S,D;if(!l.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(S=b,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),v.toColor(u,i,s);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),f=parseInt(g.slice(4,5).repeat(2),16),v.toColor(u,i,s,f);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return u=parseInt(b[1]),i=parseInt(b[2]),s=parseInt(b[3]),f=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),v.toColor(u,i,s,f);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=g,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[u,i,s,f]=S.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:h.toRgba(u,i,s,f),css:g}}}(c||(r.css=c={})),function(C){function S(D,g,b){let x=D/255,E=g/255,T=b/255;return .2126*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=S}(_||(r.rgb=_={})),function(C){function S(g,b,x){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));for(;R<x&&(w>0||F>0||L>0);)w-=Math.max(0,Math.ceil(.1*w)),F-=Math.max(0,Math.ceil(.1*F)),L-=Math.max(0,Math.ceil(.1*L)),R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));return(w<<24|F<<16|L<<8|255)>>>0}function D(g,b,x){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));for(;R<x&&(w<255||F<255||L<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),F=Math.min(255,F+Math.ceil(.1*(255-F))),L=Math.min(255,L+Math.ceil(.1*(255-L))),R=y(_.relativeLuminance2(w,F,L),_.relativeLuminance2(E,T,M));return(w<<24|F<<16|L<<8|255)>>>0}C.ensureContrastRatio=function(g,b,x){let E=_.relativeLuminance(g>>8),T=_.relativeLuminance(b>>8);if(y(E,T)<x){if(T<E){let F=S(g,b,x),L=y(E,_.relativeLuminance(F>>8));if(L<x){let R=D(g,b,x);return L>y(E,_.relativeLuminance(R>>8))?F:R}return F}let M=D(g,b,x),w=y(E,_.relativeLuminance(M>>8));if(w<x){let F=S(g,b,x);return w>y(E,_.relativeLuminance(F>>8))?M:F}return M}},C.reduceLuminance=S,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,x,E){return{css:h.toCss(g,b,x,E),rgba:h.toRgba(g,b,x,E)}}}(v||(r.rgba=v={})),r.toPaddedHex=m,r.contrastRatio=y},8969:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreTerminal=void 0;let l=o(844),u=o(2585),i=o(4348),s=o(7866),f=o(744),h=o(7302),p=o(6975),c=o(8460),_=o(1753),v=o(1480),m=o(7994),y=o(9282),C=o(5435),S=o(5981),D=o(2660),g=!1;class b extends l.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(E=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(E.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(E){for(let T in E)this.optionsService.options[T]=E[T]}constructor(E){super(),this._windowsWrappingHeuristics=this.register(new l.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new i.InstantiationService,this.optionsService=this.register(new h.OptionsService(E)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(s.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(p.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(_.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(v.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(m.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((T,M)=>this._inputHandler.parse(T,M))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(E,T){this._writeBuffer.write(E,T)}writeSync(E,T){this._logService.logLevel<=u.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(E,T)}resize(E,T){isNaN(E)||isNaN(T)||(E=Math.max(E,f.MINIMUM_COLS),T=Math.max(T,f.MINIMUM_ROWS),this._bufferService.resize(E,T))}scroll(E,T=!1){this._bufferService.scroll(E,T)}scrollLines(E,T,M){this._bufferService.scrollLines(E,T,M)}scrollPages(E){this.scrollLines(E*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(E){let T=E-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(E,T){return this._inputHandler.registerEscHandler(E,T)}registerDcsHandler(E,T){return this._inputHandler.registerDcsHandler(E,T)}registerCsiHandler(E,T){return this._inputHandler.registerCsiHandler(E,T)}registerOscHandler(E,T){return this._inputHandler.registerOscHandler(E,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let E=!1,T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?E=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(E=!0),E?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let E=[];E.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),E.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,l.toDisposable)(()=>{for(let T of E)T.dispose()})}}}r.CoreTerminal=b},8460:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===o)return void this._listeners.splice(l,1)}}})),this._event}fire(o,l){let u=[];for(let i=0;i<this._listeners.length;i++)u.push(this._listeners[i]);for(let i=0;i<u.length;i++)u[i].call(void 0,o,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(o,l){return o(u=>l.fire(u))}},5435:function(d,r,o){var l=this&&this.__decorate||function(R,A,I,$){var H,P=arguments.length,q=P<3?A:$===null?$=Object.getOwnPropertyDescriptor(A,I):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(R,A,I,$);else for(var G=R.length-1;G>=0;G--)(H=R[G])&&(q=(P<3?H(q):P>3?H(A,I,q):H(A,I))||q);return P>3&&q&&Object.defineProperty(A,I,q),q},u=this&&this.__param||function(R,A){return function(I,$){A(I,$,R)}};Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;let i=o(2584),s=o(7116),f=o(2015),h=o(844),p=o(482),c=o(8437),_=o(8460),v=o(643),m=o(511),y=o(3734),C=o(2585),S=o(6242),D=o(6351),g=o(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},x=131072;function E(R,A){if(R>24)return A.setWinLines||!1;switch(R){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var T;(function(R){R[R.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",R[R.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(r.WindowsOptionsReportType=T={}));let M=0;class w extends h.Disposable{getAttrData(){return this._curAttrData}constructor(A,I,$,H,P,q,G,B,Q=new f.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=I,this._coreService=$,this._logService=H,this._optionsService=P,this._oscLinkService=q,this._coreMouseService=G,this._unicodeService=B,this._parser=Q,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new p.StringToUtf32,this._utf8Decoder=new p.Utf8ToUtf32,this._workCell=new m.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new _.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new _.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new _.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new _.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new _.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new _.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new _.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new _.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new _.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new _.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new _.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new _.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new _.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,W)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:W.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,W,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:W,data:U})}),this._parser.setDcsHandlerFallback((O,W,U)=>{W==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:W,payload:U})}),this._parser.setPrintHandler((O,W,U)=>this.print(O,W,U)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(i.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(i.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(i.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(i.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(i.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(i.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(i.C1.IND,()=>this.index()),this._parser.setExecuteHandler(i.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(i.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new S.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new S.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new S.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new S.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new S.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new S.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new S.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new S.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new S.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new S.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new S.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let O in s.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((O,W)=>this.requestStatusString(O,W)))}_preserveStack(A,I,$,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=$,this._parseStack.position=H}_logSlowResolvingAsync(A){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([A,new Promise((I,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,I){let $,H=this._activeBuffer.x,P=this._activeBuffer.y,q=0,G=this._parseStack.paused;if(G){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync($),$;H=this._parseStack.cursorStartX,P=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>x&&(q=this._parseStack.position+x)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,B=>String.fromCharCode(B)).join("")}"`),typeof A=="string"?A.split("").map(B=>B.charCodeAt(0)):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<x&&(this._parseBuffer=new Uint32Array(Math.min(A.length,x))),G||this._dirtyRowTracker.clearRange(),A.length>x)for(let B=q;B<A.length;B+=x){let Q=B+x<A.length?B+x:A.length,O=typeof A=="string"?this._stringDecoder.decode(A.substring(B,Q),this._parseBuffer):this._utf8Decoder.decode(A.subarray(B,Q),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,O))return this._preserveStack(H,P,O,B),this._logSlowResolvingAsync($),$}else if(!G){let B=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,B))return this._preserveStack(H,P,B,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===H&&this._activeBuffer.y===P||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,I,$){let H,P,q=this._charsetService.charset,G=this._optionsService.rawOptions.screenReaderMode,B=this._bufferService.cols,Q=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,W=this._curAttrData,U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-I>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodePoint(this._activeBuffer.x-1,0,1,W.fg,W.bg,W.extended);for(let N=I;N<$;++N){if(H=A[N],P=this._unicodeService.wcwidth(H),H<127&&q){let te=q[String.fromCharCode(H)];te&&(H=te.charCodeAt(0))}if(G&&this._onA11yChar.fire((0,p.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),P||!this._activeBuffer.x){if(this._activeBuffer.x+P-1>=B){if(Q){for(;this._activeBuffer.x<B;)U.setCellFromCodePoint(this._activeBuffer.x++,0,1,W.fg,W.bg,W.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=B-1,P===2)continue}if(O&&(U.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(W),W),U.getWidth(B-1)===2&&U.setCellFromCodePoint(B-1,v.NULL_CELL_CODE,v.NULL_CELL_WIDTH,W.fg,W.bg,W.extended)),U.setCellFromCodePoint(this._activeBuffer.x++,H,P,W.fg,W.bg,W.extended),P>0)for(;--P;)U.setCellFromCodePoint(this._activeBuffer.x++,0,0,W.fg,W.bg,W.extended)}else U.getWidth(this._activeBuffer.x-1)?U.addCodepointToCell(this._activeBuffer.x-1,H):U.addCodepointToCell(this._activeBuffer.x-2,H)}$-I>0&&(U.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<B&&$-I>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodePoint(this._activeBuffer.x,0,1,W.fg,W.bg,W.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,I){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,I):this._parser.registerCsiHandler(A,$=>!E($.params[0],this._optionsService.rawOptions.windowOptions)||I($))}registerDcsHandler(A,I){return this._parser.registerDcsHandler(A,new D.DcsHandler(I))}registerEscHandler(A,I){return this._parser.registerEscHandler(A,I)}registerOscHandler(A,I){return this._parser.registerOscHandler(A,new S.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=A,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+I)}cursorUp(A){let I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){let I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){let I=A.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){let I=A.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,I,$,H=!1,P=!1){let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);q.replaceCells(I,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),P),H&&(q.isWrapped=!1)}_resetBufferLine(A,I=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),$.isWrapped=!1)}eraseInDisplay(A,I=!1){let $;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);$<this._bufferService.rows;$++)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 3:let H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(A,I=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;I--;)this._activeBuffer.lines.splice(P-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;I--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;let I=A.params[0]||1,$=new Uint32Array(I);for(let H=0;H<I;++H)$[H]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(i.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(i.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(i.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(i.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(i.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,s.DEFAULT_CHARSET),this._charsetService.setgCharset(1,s.DEFAULT_CHARSET),this._charsetService.setgCharset(2,s.DEFAULT_CHARSET),this._charsetService.setgCharset(3,s.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,I){let $=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:P}=this._coreMouseService,q=this._coreService,{buffers:G,cols:B}=this._bufferService,{active:Q,alt:O}=G,W=this._optionsService.rawOptions,U=ye=>ye?1:2,N=A.params[0];return te=N,J=I?N===2?4:N===4?U(q.modes.insertMode):N===12?3:N===20?U(W.convertEol):0:N===1?U($.applicationCursorKeys):N===3?W.windowOptions.setWinLines?B===80?2:B===132?1:0:0:N===6?U($.origin):N===7?U($.wraparound):N===8?3:N===9?U(H==="X10"):N===12?U(W.cursorBlink):N===25?U(!q.isCursorHidden):N===45?U($.reverseWraparound):N===66?U($.applicationKeypad):N===67?4:N===1e3?U(H==="VT200"):N===1002?U(H==="DRAG"):N===1003?U(H==="ANY"):N===1004?U($.sendFocus):N===1005?4:N===1006?U(P==="SGR"):N===1015?4:N===1016?U(P==="SGR_PIXELS"):N===1048?1:N===47||N===1047||N===1049?U(Q===O):N===2004?U($.bracketedPasteMode):0,q.triggerDataEvent(`${i.C0.ESC}[${I?"":"?"}${te};${J}$y`),!0;var te,J}_updateAttrColor(A,I,$,H,P){return I===2?(A|=50331648,A&=-16777216,A|=y.AttributeData.fromColorRGB([$,H,P])):I===5&&(A&=-50331904,A|=33554432|255&$),A}_extractColor(A,I,$){let H=[0,0,-1,0,0,0],P=0,q=0;do{if(H[q+P]=A.params[I+q],A.hasSubParams(I+q)){let G=A.getSubParams(I+q),B=0;do H[1]===5&&(P=1),H[q+B+1+P]=G[B];while(++B<G.length&&B+q+1+P<H.length);break}if(H[1]===5&&q+P>=2||H[1]===2&&q+P>=5)break;H[1]&&(P=1)}while(++q+I<A.length&&q+P<H.length);for(let G=2;G<H.length;++G)H[G]===-1&&(H[G]=0);switch(H[0]){case 38:$.fg=this._updateAttrColor($.fg,H[1],H[3],H[4],H[5]);break;case 48:$.bg=this._updateAttrColor($.bg,H[1],H[3],H[4],H[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,H[1],H[3],H[4],H[5])}return q}_processUnderline(A,I){I.extended=I.extended.clone(),(!~A||A>5)&&(A=1),I.extended.underlineStyle=A,I.fg|=268435456,A===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(A){A.fg=c.DEFAULT_ATTR_DATA.fg,A.bg=c.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;let I=A.length,$,H=this._curAttrData;for(let P=0;P<I;P++)$=A.params[P],$>=30&&$<=37?(H.fg&=-50331904,H.fg|=16777216|$-30):$>=40&&$<=47?(H.bg&=-50331904,H.bg|=16777216|$-40):$>=90&&$<=97?(H.fg&=-50331904,H.fg|=16777224|$-90):$>=100&&$<=107?(H.bg&=-50331904,H.bg|=16777224|$-100):$===0?this._processSGR0(H):$===1?H.fg|=134217728:$===3?H.bg|=67108864:$===4?(H.fg|=268435456,this._processUnderline(A.hasSubParams(P)?A.getSubParams(P)[0]:1,H)):$===5?H.fg|=536870912:$===7?H.fg|=67108864:$===8?H.fg|=1073741824:$===9?H.fg|=2147483648:$===2?H.bg|=134217728:$===21?this._processUnderline(2,H):$===22?(H.fg&=-134217729,H.bg&=-134217729):$===23?H.bg&=-67108865:$===24?(H.fg&=-268435457,this._processUnderline(0,H)):$===25?H.fg&=-536870913:$===27?H.fg&=-67108865:$===28?H.fg&=-1073741825:$===29?H.fg&=2147483647:$===39?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):$===49?(H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?P+=this._extractColor(A,P,H):$===53?H.bg|=1073741824:$===55?H.bg&=-1073741825:$===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):$===100?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${i.C0.ESC}[0n`);break;case 6:let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${i.C0.ESC}[${I};${$}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${i.C0.ESC}[?${I};${$}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){let I=A.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let $=I%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(A){let I=A.params[0]||1,$;return(A.length<2||($=A.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(A){if(!E(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;let I=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${i.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){let I=[],$=A.split(";");for(;$.length>1;){let H=$.shift(),P=$.shift();if(/^\d+$/.exec(H)){let q=parseInt(H);if(L(q))if(P==="?")I.push({type:0,index:q});else{let G=(0,g.parseColor)(P);G&&I.push({type:1,index:q,color:G})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(A){let I=A.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(A,I){this._getCurrentLinkId()&&this._finishHyperlink();let $=A.split(":"),H,P=$.findIndex(q=>q.startsWith("id="));return P!==-1&&(H=$[P].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,I){let $=A.split(";");for(let H=0;H<$.length&&!(I>=this._specialColors.length);++H,++I)if($[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{let P=(0,g.parseColor)($[H]);P&&this._onColor.fire([{type:1,index:this._specialColors[I],color:P}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;let I=[],$=A.split(";");for(let H=0;H<$.length;++H)if(/^\d+$/.exec($[H])){let P=parseInt($[H]);L(P)&&I.push({type:2,index:P})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,s.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(b[A[0]],s.CHARSETS[A[1]]||s.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){let A=new m.CellData;A.content=4194373,A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){let $=this._activeBuffer.ybase+this._activeBuffer.y+I,H=this._activeBuffer.lines.get($);H&&(H.fill(A),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,I){let $=this._bufferService.buffer,H=this._optionsService.rawOptions;return(P=>(this._coreService.triggerDataEvent(`${i.C0.ESC}${P}${i.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,I){this._dirtyRowTracker.markRangeDirty(A,I)}}r.InputHandler=w;let F=class{constructor(R){this._bufferService=R,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(R){R<this.start?this.start=R:R>this.end&&(this.end=R)}markRangeDirty(R,A){R>A&&(M=R,R=A,A=M),R<this.start&&(this.start=R),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function L(R){return 0<=R&&R<256}F=l([u(0,C.IBufferService)],F)},844:(d,r)=>{function o(l){for(let u of l)u.dispose();l.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){let u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var u;this._isDisposed||l===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},r.toDisposable=function(l){return{dispose:l}},r.disposeArray=o,r.getDisposeArrayDisposable=function(l){return{dispose:()=>o(l)}}},1505:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(u,i,s){this._data[u]||(this._data[u]={}),this._data[u][i]=s}get(u,i){return this._data[u]?this._data[u][i]:void 0}clear(){this._data={}}}r.TwoKeyMap=o,r.FourKeyMap=class{constructor(){this._data=new o}set(l,u,i,s,f){this._data.get(l,u)||this._data.set(l,u,new o),this._data.get(l,u).set(i,s,f)}get(l,u,i,s){var f;return(f=this._data.get(l,u))===null||f===void 0?void 0:f.get(i,s)}clear(){this._data.clear()}}},6114:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";let o=r.isNode?"node":navigator.userAgent,l=r.isNode?"node":navigator.platform;r.isFirefox=o.includes("Firefox"),r.isLegacyEdge=o.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(o),r.getSafariVersion=function(){if(!r.isSafari)return 0;let u=o.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),r.isIpad=l==="iPad",r.isIphone=l==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),r.isLinux=l.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(o)},6106:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SortedList=void 0;let o=0;r.SortedList=class{constructor(l){this._getKey=l,this._array=[]}clear(){this._array.length=0}insert(l){this._array.length!==0?(o=this._search(this._getKey(l)),this._array.splice(o,0,l)):this._array.push(l)}delete(l){if(this._array.length===0)return!1;let u=this._getKey(l);if(u===void 0||(o=this._search(u),o===-1)||this._getKey(this._array[o])!==u)return!1;do if(this._array[o]===l)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===u);return!1}*getKeyIterator(l){if(this._array.length!==0&&(o=this._search(l),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===l))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===l)}forEachByKey(l,u){if(this._array.length!==0&&(o=this._search(l),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===l))do u(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===l)}values(){return[...this._array].values()}_search(l){let u=0,i=this._array.length-1;for(;i>=u;){let s=u+i>>1,f=this._getKey(this._array[s]);if(f>l)i=s-1;else{if(!(f<l)){for(;s>0&&this._getKey(this._array[s-1])===l;)s--;return s}u=s+1}}return u}}},7226:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;let l=o(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let h=0,p=0,c=f.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(h=Date.now(),this._tasks[this._i]()||this._i++,h=Math.max(1,Date.now()-h),p=Math.max(h,p),_=f.timeRemaining(),1.5*p>_)return c-h<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-h))}ms`),void this._start();c=_}this.clear()}}class i extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let h=Date.now()+f;return{timeRemaining:()=>Math.max(0,h-Date.now())}}}r.PriorityTaskQueue=i,r.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(s){return requestIdleCallback(s)}_cancelCallback(s){cancelIdleCallback(s)}}:i,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(s){this._queue.clear(),this._queue.enqueue(s)}flush(){this._queue.flush()}}},9282:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateWindowsModeWrappedState=void 0;let l=o(643);r.updateWindowsModeWrappedState=function(u){let i=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),s=i?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&s&&(f.isWrapped=s[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&s[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(i){return[i>>>16&255,i>>>8&255,255&i]}static fromColorRGB(i){return(255&i[0])<<16|(255&i[1])<<8|255&i[2]}clone(){let i=new o;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=o;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(i){this._ext&=-67108864,this._ext|=67108863&i}get urlId(){return this._urlId}set urlId(i){this._urlId=i}constructor(i=0,s=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=s}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=l},9092:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.MAX_BUFFER_SIZE=void 0;let l=o(6349),u=o(7226),i=o(3734),s=o(8437),f=o(4634),h=o(511),p=o(643),c=o(4863),_=o(7116);r.MAX_BUFFER_SIZE=4294967295,r.Buffer=class{constructor(v,m,y){this._hasScrollback=v,this._optionsService=m,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=s.DEFAULT_ATTR_DATA.clone(),this.savedCharset=_.DEFAULT_CHARSET,this.markers=[],this._nullCell=h.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),this._whitespaceCell=h.CellData.fromCharData([0,p.WHITESPACE_CELL_CHAR,p.WHITESPACE_CELL_WIDTH,p.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(v){return v?(this._nullCell.fg=v.fg,this._nullCell.bg=v.bg,this._nullCell.extended=v.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new i.ExtendedAttrs),this._nullCell}getWhitespaceCell(v){return v?(this._whitespaceCell.fg=v.fg,this._whitespaceCell.bg=v.bg,this._whitespaceCell.extended=v.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new i.ExtendedAttrs),this._whitespaceCell}getBlankLine(v,m){return new s.BufferLine(this._bufferService.cols,this.getNullCell(v),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let v=this.ybase+this.y-this.ydisp;return v>=0&&v<this._rows}_getCorrectBufferLength(v){if(!this._hasScrollback)return v;let m=v+this._optionsService.rawOptions.scrollback;return m>r.MAX_BUFFER_SIZE?r.MAX_BUFFER_SIZE:m}fillViewportRows(v){if(this.lines.length===0){v===void 0&&(v=s.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(v))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(v,m){let y=this.getNullCell(s.DEFAULT_ATTR_DATA),C=0,S=this._getCorrectBufferLength(m);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<v)for(let g=0;g<this.lines.length;g++)C+=+this.lines.get(g).resize(v,y);let D=0;if(this._rows<m)for(let g=this._rows;g<m;g++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new s.BufferLine(v,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new s.BufferLine(v,y)));else for(let g=this._rows;g>m;g--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let g=this.lines.length-S;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=S}this.x=Math.min(this.x,v-1),this.y=Math.min(this.y,m-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,v-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(v,m),this._cols>v))for(let D=0;D<this.lines.length;D++)C+=+this.lines.get(D).resize(v,y);this._cols=v,this._rows=m,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let v=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,v=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return v}get _isReflowEnabled(){let v=this._optionsService.rawOptions.windowsPty;return v&&v.buildNumber?this._hasScrollback&&v.backend==="conpty"&&v.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(v,m){this._cols!==v&&(v>this._cols?this._reflowLarger(v,m):this._reflowSmaller(v,m))}_reflowLarger(v,m){let y=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,v,this.ybase+this.y,this.getNullCell(s.DEFAULT_ATTR_DATA));if(y.length>0){let C=(0,f.reflowLargerCreateNewLayout)(this.lines,y);(0,f.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(v,m,C.countRemoved)}}_reflowLargerAdjustViewport(v,m,y){let C=this.getNullCell(s.DEFAULT_ATTR_DATA),S=y;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new s.BufferLine(v,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(v,m){let y=this.getNullCell(s.DEFAULT_ATTR_DATA),C=[],S=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=v)continue;let b=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),b.unshift(g);let x=this.ybase+this.y;if(x>=D&&x<D+b.length)continue;let E=b[b.length-1].getTrimmedLength(),T=(0,f.reflowSmallerGetNewLineLengths)(b,this._cols,v),M=T.length-b.length,w;w=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let F=[];for(let H=0;H<M;H++){let P=this.getBlankLine(s.DEFAULT_ATTR_DATA,!0);F.push(P)}F.length>0&&(C.push({start:D+b.length+S,newLines:F}),S+=F.length),b.push(...F);let L=T.length-1,R=T[L];R===0&&(L--,R=T[L]);let A=b.length-M-1,I=E;for(;A>=0;){let H=Math.min(I,R);if(b[L]===void 0)break;if(b[L].copyCellsFrom(b[A],I-H,R-H,H,!0),R-=H,R===0&&(L--,R=T[L]),I-=H,I===0){A--;let P=Math.max(A,0);I=(0,f.getWrappedLineTrimmedLength)(b,P,this._cols)}}for(let H=0;H<b.length;H++)T[H]<v&&b[H].setCell(T[H],y);let $=M-w;for(;$-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+m-1)}if(C.length>0){let D=[],g=[];for(let L=0;L<this.lines.length;L++)g.push(this.lines.get(L));let b=this.lines.length,x=b-1,E=0,T=C[E];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let M=0;for(let L=Math.min(this.lines.maxLength-1,b+S-1);L>=0;L--)if(T&&T.start>x+M){for(let R=T.newLines.length-1;R>=0;R--)this.lines.set(L--,T.newLines[R]);L++,D.push({index:x+1,amount:T.newLines.length}),M+=T.newLines.length,T=C[++E]}else this.lines.set(L,g[x--]);let w=0;for(let L=D.length-1;L>=0;L--)D[L].index+=w,this.lines.onInsertEmitter.fire(D[L]),w+=D[L].amount;let F=Math.max(0,b+S-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(v,m,y=0,C){let S=this.lines.get(v);return S?S.translateToString(m,y,C):""}getWrappedRangeForLine(v){let m=v,y=v;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:m,last:y}}setupTabStops(v){for(v!=null?this.tabs[v]||(v=this.prevStop(v)):(this.tabs={},v=0);v<this._cols;v+=this._optionsService.rawOptions.tabStopWidth)this.tabs[v]=!0}prevStop(v){for(v==null&&(v=this.x);!this.tabs[--v]&&v>0;);return v>=this._cols?this._cols-1:v<0?0:v}nextStop(v){for(v==null&&(v=this.x);!this.tabs[++v]&&v<this._cols;);return v>=this._cols?this._cols-1:v<0?0:v}clearMarkers(v){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===v&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].dispose(),this.markers.splice(v--,1);this._isClearing=!1}addMarker(v){let m=new c.Marker(v);return this.markers.push(m),m.register(this.lines.onTrim(y=>{m.line-=y,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(y=>{m.line>=y.index&&(m.line+=y.amount)})),m.register(this.lines.onDelete(y=>{m.line>=y.index&&m.line<y.index+y.amount&&m.dispose(),m.line>y.index&&(m.line-=y.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(v){this._isClearing||this.markers.splice(this.markers.indexOf(v),1)}}},8437:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLine=r.DEFAULT_ATTR_DATA=void 0;let l=o(3734),u=o(511),i=o(643),s=o(482);r.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let f=0;class h{constructor(c,_,v=!1){this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);let m=_||u.CellData.fromCharData([0,i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE]);for(let y=0;y<c;++y)this.setCell(y,m);this.length=c}get(c){let _=this._data[3*c+0],v=2097151&_;return[this._data[3*c+1],2097152&_?this._combined[c]:v?(0,s.stringFromCodePoint)(v):"",_>>22,2097152&_?this._combined[c].charCodeAt(this._combined[c].length-1):v]}set(c,_){this._data[3*c+1]=_[i.CHAR_DATA_ATTR_INDEX],_[i.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=_[1],this._data[3*c+0]=2097152|c|_[i.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=_[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[i.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){let _=this._data[3*c+0];return 2097152&_?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&_}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){let _=this._data[3*c+0];return 2097152&_?this._combined[c]:2097151&_?(0,s.stringFromCodePoint)(2097151&_):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,_){return f=3*c,_.content=this._data[f+0],_.fg=this._data[f+1],_.bg=this._data[f+2],2097152&_.content&&(_.combinedData=this._combined[c]),268435456&_.bg&&(_.extended=this._extendedAttrs[c]),_}setCell(c,_){2097152&_.content&&(this._combined[c]=_.combinedData),268435456&_.bg&&(this._extendedAttrs[c]=_.extended),this._data[3*c+0]=_.content,this._data[3*c+1]=_.fg,this._data[3*c+2]=_.bg}setCellFromCodePoint(c,_,v,m,y,C){268435456&y&&(this._extendedAttrs[c]=C),this._data[3*c+0]=_|v<<22,this._data[3*c+1]=m,this._data[3*c+2]=y}addCodepointToCell(c,_){let v=this._data[3*c+0];2097152&v?this._combined[c]+=(0,s.stringFromCodePoint)(_):(2097151&v?(this._combined[c]=(0,s.stringFromCodePoint)(2097151&v)+(0,s.stringFromCodePoint)(_),v&=-2097152,v|=2097152):v=_|4194304,this._data[3*c+0]=v)}insertCells(c,_,v,m){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs),_<this.length-c){let y=new u.CellData;for(let C=this.length-c-_-1;C>=0;--C)this.setCell(c+_+C,this.loadCell(c+C,y));for(let C=0;C<_;++C)this.setCell(c+C,v)}else for(let y=c;y<this.length;++y)this.setCell(y,v);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs)}deleteCells(c,_,v,m){if(c%=this.length,_<this.length-c){let y=new u.CellData;for(let C=0;C<this.length-c-_;++C)this.setCell(c+C,this.loadCell(c+_+C,y));for(let C=this.length-_;C<this.length;++C)this.setCell(C,v)}else for(let y=c;y<this.length;++y)this.setCell(y,v);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs)}replaceCells(c,_,v,m,y=!1){if(y)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&!this.isProtected(_)&&this.setCellFromCodePoint(_,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs);c<_&&c<this.length;)this.isProtected(c)||this.setCell(c,v),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&this.setCellFromCodePoint(_,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs);c<_&&c<this.length;)this.setCell(c++,v)}resize(c,_){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let v=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*v)this._data=new Uint32Array(this._data.buffer,0,v);else{let m=new Uint32Array(v);m.set(this._data),this._data=m}for(let m=this.length;m<c;++m)this.setCell(m,_)}else{this._data=this._data.subarray(0,v);let m=Object.keys(this._combined);for(let C=0;C<m.length;C++){let S=parseInt(m[C],10);S>=c&&delete this._combined[S]}let y=Object.keys(this._extendedAttrs);for(let C=0;C<y.length;C++){let S=parseInt(y[C],10);S>=c&&delete this._extendedAttrs[S]}}return this.length=c,4*v*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,_=!1){if(_)for(let v=0;v<this.length;++v)this.isProtected(v)||this.setCell(v,c);else{this._combined={},this._extendedAttrs={};for(let v=0;v<this.length;++v)this.setCell(v,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(let _ in c._combined)this._combined[_]=c._combined[_];this._extendedAttrs={};for(let _ in c._extendedAttrs)this._extendedAttrs[_]=c._extendedAttrs[_];this.isWrapped=c.isWrapped}clone(){let c=new h(0);c._data=new Uint32Array(this._data),c.length=this.length;for(let _ in this._combined)c._combined[_]=this._combined[_];for(let _ in this._extendedAttrs)c._extendedAttrs[_]=this._extendedAttrs[_];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,_,v,m,y){let C=c._data;if(y)for(let D=m-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(v+D)+g]=C[3*(_+D)+g];268435456&C[3*(_+D)+2]&&(this._extendedAttrs[v+D]=c._extendedAttrs[_+D])}else for(let D=0;D<m;D++){for(let g=0;g<3;g++)this._data[3*(v+D)+g]=C[3*(_+D)+g];268435456&C[3*(_+D)+2]&&(this._extendedAttrs[v+D]=c._extendedAttrs[_+D])}let S=Object.keys(c._combined);for(let D=0;D<S.length;D++){let g=parseInt(S[D],10);g>=_&&(this._combined[g-_+v]=c._combined[g])}}translateToString(c=!1,_=0,v=this.length){c&&(v=Math.min(v,this.getTrimmedLength()));let m="";for(;_<v;){let y=this._data[3*_+0],C=2097151&y;m+=2097152&y?this._combined[_]:C?(0,s.stringFromCodePoint)(C):i.WHITESPACE_CELL_CHAR,_+=y>>22||1}return m}}r.BufferLine=h},4841:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getRangeLength=void 0,r.getRangeLength=function(o,l){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return l*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(d,r)=>{function o(l,u,i){if(u===l.length-1)return l[u].getTrimmedLength();let s=!l[u].hasContent(i-1)&&l[u].getWidth(i-1)===1,f=l[u+1].getWidth(0)===2;return s&&f?i-1:i}Object.defineProperty(r,"__esModule",{value:!0}),r.getWrappedLineTrimmedLength=r.reflowSmallerGetNewLineLengths=r.reflowLargerApplyNewLayout=r.reflowLargerCreateNewLayout=r.reflowLargerGetLinesToRemove=void 0,r.reflowLargerGetLinesToRemove=function(l,u,i,s,f){let h=[];for(let p=0;p<l.length-1;p++){let c=p,_=l.get(++c);if(!_.isWrapped)continue;let v=[l.get(p)];for(;c<l.length&&_.isWrapped;)v.push(_),_=l.get(++c);if(s>=p&&s<c){p+=v.length-1;continue}let m=0,y=o(v,m,u),C=1,S=0;for(;C<v.length;){let g=o(v,C,u),b=g-S,x=i-y,E=Math.min(b,x);v[m].copyCellsFrom(v[C],S,y,E,!1),y+=E,y===i&&(m++,y=0),S+=E,S===g&&(C++,S=0),y===0&&m!==0&&v[m-1].getWidth(i-1)===2&&(v[m].copyCellsFrom(v[m-1],i-1,y++,1,!1),v[m-1].setCell(i-1,f))}v[m].replaceCells(y,i,f);let D=0;for(let g=v.length-1;g>0&&(g>m||v[g].getTrimmedLength()===0);g--)D++;D>0&&(h.push(p+v.length-D),h.push(D)),p+=v.length-1}return h},r.reflowLargerCreateNewLayout=function(l,u){let i=[],s=0,f=u[s],h=0;for(let p=0;p<l.length;p++)if(f===p){let c=u[++s];l.onDeleteEmitter.fire({index:p-h,amount:c}),p+=c-1,h+=c,f=u[++s]}else i.push(p);return{layout:i,countRemoved:h}},r.reflowLargerApplyNewLayout=function(l,u){let i=[];for(let s=0;s<u.length;s++)i.push(l.get(u[s]));for(let s=0;s<i.length;s++)l.set(s,i[s]);l.length=u.length},r.reflowSmallerGetNewLineLengths=function(l,u,i){let s=[],f=l.map((_,v)=>o(l,v,u)).reduce((_,v)=>_+v),h=0,p=0,c=0;for(;c<f;){if(f-c<i){s.push(f-c);break}h+=i;let _=o(l,p,u);h>_&&(h-=_,p++);let v=l[p].getWidth(h-1)===2;v&&h--;let m=v?i-1:i;s.push(m),c+=m}return s},r.getWrappedLineTrimmedLength=o},5295:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferSet=void 0;let l=o(8460),u=o(844),i=o(9092);class s extends u.Disposable{constructor(h,p){super(),this._optionsService=h,this._bufferService=p,this._onBufferActivate=this.register(new l.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new i.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new i.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(h){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(h),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(h,p){this._normal.resize(h,p),this._alt.resize(h,p),this.setupTabStops(h)}setupTabStops(h){this._normal.setupTabStops(h),this._alt.setupTabStops(h)}}r.BufferSet=s},511:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;let l=o(482),u=o(643),i=o(3734);class s extends i.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new i.ExtendedAttrs,this.combinedData=""}static fromCharData(h){let p=new s;return p.setFromCharData(h),p}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(h){this.fg=h[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let p=!1;if(h[u.CHAR_DATA_CHAR_INDEX].length>2)p=!0;else if(h[u.CHAR_DATA_CHAR_INDEX].length===2){let c=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let _=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(c-55296)+_-56320+65536|h[u.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=h[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[u.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=h[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|h[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=s},643:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},4863:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Marker=void 0;let l=o(8460),u=o(844);class i{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=i._nextId++,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}r.Marker=i,i._nextId=1},7116:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CHARSET=r.CHARSETS=void 0,r.CHARSETS={},r.DEFAULT_CHARSET=r.CHARSETS.B,r.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},r.CHARSETS.A={"#":"\xA3"},r.CHARSETS.B=void 0,r.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},r.CHARSETS.C=r.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},r.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},r.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},r.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},r.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},r.CHARSETS.E=r.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},r.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},r.CHARSETS.H=r.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},r.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(d,r)=>{var o,l,u;Object.defineProperty(r,"__esModule",{value:!0}),r.C1_ESCAPED=r.C1=r.C0=void 0,function(i){i.NUL="\0",i.SOH="",i.STX="",i.ETX="",i.EOT="",i.ENQ="",i.ACK="",i.BEL="\x07",i.BS="\b",i.HT="	",i.LF=`
`,i.VT="\v",i.FF="\f",i.CR="\r",i.SO="",i.SI="",i.DLE="",i.DC1="",i.DC2="",i.DC3="",i.DC4="",i.NAK="",i.SYN="",i.ETB="",i.CAN="",i.EM="",i.SUB="",i.ESC="\x1B",i.FS="",i.GS="",i.RS="",i.US="",i.SP=" ",i.DEL="\x7F"}(o||(r.C0=o={})),function(i){i.PAD="\x80",i.HOP="\x81",i.BPH="\x82",i.NBH="\x83",i.IND="\x84",i.NEL="\x85",i.SSA="\x86",i.ESA="\x87",i.HTS="\x88",i.HTJ="\x89",i.VTS="\x8A",i.PLD="\x8B",i.PLU="\x8C",i.RI="\x8D",i.SS2="\x8E",i.SS3="\x8F",i.DCS="\x90",i.PU1="\x91",i.PU2="\x92",i.STS="\x93",i.CCH="\x94",i.MW="\x95",i.SPA="\x96",i.EPA="\x97",i.SOS="\x98",i.SGCI="\x99",i.SCI="\x9A",i.CSI="\x9B",i.ST="\x9C",i.OSC="\x9D",i.PM="\x9E",i.APC="\x9F"}(l||(r.C1=l={})),function(i){i.ST=`${o.ESC}\\`}(u||(r.C1_ESCAPED=u={}))},7399:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;let l=o(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(i,s,f,h){let p={type:0,cancel:!1,key:void 0},c=(i.shiftKey?1:0)|(i.altKey?2:0)|(i.ctrlKey?4:0)|(i.metaKey?8:0);switch(i.keyCode){case 0:i.key==="UIKeyInputUpArrow"?p.key=s?l.C0.ESC+"OA":l.C0.ESC+"[A":i.key==="UIKeyInputLeftArrow"?p.key=s?l.C0.ESC+"OD":l.C0.ESC+"[D":i.key==="UIKeyInputRightArrow"?p.key=s?l.C0.ESC+"OC":l.C0.ESC+"[C":i.key==="UIKeyInputDownArrow"&&(p.key=s?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(i.altKey){p.key=l.C0.ESC+l.C0.DEL;break}p.key=l.C0.DEL;break;case 9:if(i.shiftKey){p.key=l.C0.ESC+"[Z";break}p.key=l.C0.HT,p.cancel=!0;break;case 13:p.key=i.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,p.cancel=!0;break;case 27:p.key=l.C0.ESC,i.altKey&&(p.key=l.C0.ESC+l.C0.ESC),p.cancel=!0;break;case 37:if(i.metaKey)break;c?(p.key=l.C0.ESC+"[1;"+(c+1)+"D",p.key===l.C0.ESC+"[1;3D"&&(p.key=l.C0.ESC+(f?"b":"[1;5D"))):p.key=s?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(i.metaKey)break;c?(p.key=l.C0.ESC+"[1;"+(c+1)+"C",p.key===l.C0.ESC+"[1;3C"&&(p.key=l.C0.ESC+(f?"f":"[1;5C"))):p.key=s?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(i.metaKey)break;c?(p.key=l.C0.ESC+"[1;"+(c+1)+"A",f||p.key!==l.C0.ESC+"[1;3A"||(p.key=l.C0.ESC+"[1;5A")):p.key=s?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(i.metaKey)break;c?(p.key=l.C0.ESC+"[1;"+(c+1)+"B",f||p.key!==l.C0.ESC+"[1;3B"||(p.key=l.C0.ESC+"[1;5B")):p.key=s?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:i.shiftKey||i.ctrlKey||(p.key=l.C0.ESC+"[2~");break;case 46:p.key=c?l.C0.ESC+"[3;"+(c+1)+"~":l.C0.ESC+"[3~";break;case 36:p.key=c?l.C0.ESC+"[1;"+(c+1)+"H":s?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:p.key=c?l.C0.ESC+"[1;"+(c+1)+"F":s?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:i.shiftKey?p.type=2:i.ctrlKey?p.key=l.C0.ESC+"[5;"+(c+1)+"~":p.key=l.C0.ESC+"[5~";break;case 34:i.shiftKey?p.type=3:i.ctrlKey?p.key=l.C0.ESC+"[6;"+(c+1)+"~":p.key=l.C0.ESC+"[6~";break;case 112:p.key=c?l.C0.ESC+"[1;"+(c+1)+"P":l.C0.ESC+"OP";break;case 113:p.key=c?l.C0.ESC+"[1;"+(c+1)+"Q":l.C0.ESC+"OQ";break;case 114:p.key=c?l.C0.ESC+"[1;"+(c+1)+"R":l.C0.ESC+"OR";break;case 115:p.key=c?l.C0.ESC+"[1;"+(c+1)+"S":l.C0.ESC+"OS";break;case 116:p.key=c?l.C0.ESC+"[15;"+(c+1)+"~":l.C0.ESC+"[15~";break;case 117:p.key=c?l.C0.ESC+"[17;"+(c+1)+"~":l.C0.ESC+"[17~";break;case 118:p.key=c?l.C0.ESC+"[18;"+(c+1)+"~":l.C0.ESC+"[18~";break;case 119:p.key=c?l.C0.ESC+"[19;"+(c+1)+"~":l.C0.ESC+"[19~";break;case 120:p.key=c?l.C0.ESC+"[20;"+(c+1)+"~":l.C0.ESC+"[20~";break;case 121:p.key=c?l.C0.ESC+"[21;"+(c+1)+"~":l.C0.ESC+"[21~";break;case 122:p.key=c?l.C0.ESC+"[23;"+(c+1)+"~":l.C0.ESC+"[23~";break;case 123:p.key=c?l.C0.ESC+"[24;"+(c+1)+"~":l.C0.ESC+"[24~";break;default:if(!i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)if(f&&!h||!i.altKey||i.metaKey)!f||i.altKey||i.ctrlKey||i.shiftKey||!i.metaKey?i.key&&!i.ctrlKey&&!i.altKey&&!i.metaKey&&i.keyCode>=48&&i.key.length===1?p.key=i.key:i.key&&i.ctrlKey&&(i.key==="_"&&(p.key=l.C0.US),i.key==="@"&&(p.key=l.C0.NUL)):i.keyCode===65&&(p.type=1);else{let _=u[i.keyCode],v=_?.[i.shiftKey?1:0];if(v)p.key=l.C0.ESC+v;else if(i.keyCode>=65&&i.keyCode<=90){let m=i.ctrlKey?i.keyCode-64:i.keyCode+32,y=String.fromCharCode(m);i.shiftKey&&(y=y.toUpperCase()),p.key=l.C0.ESC+y}else if(i.keyCode===32)p.key=l.C0.ESC+(i.ctrlKey?l.C0.NUL:" ");else if(i.key==="Dead"&&i.code.startsWith("Key")){let m=i.code.slice(3,4);i.shiftKey||(m=m.toLowerCase()),p.key=l.C0.ESC+m,p.cancel=!0}}else i.keyCode>=65&&i.keyCode<=90?p.key=String.fromCharCode(i.keyCode-64):i.keyCode===32?p.key=l.C0.NUL:i.keyCode>=51&&i.keyCode<=55?p.key=String.fromCharCode(i.keyCode-51+27):i.keyCode===56?p.key=l.C0.DEL:i.keyCode===219?p.key=l.C0.ESC:i.keyCode===220?p.key=l.C0.FS:i.keyCode===221&&(p.key=l.C0.GS)}return p}},482:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},r.utf32ToString=function(o,l=0,u=o.length){let i="";for(let s=l;s<u;++s){let f=o[s];f>65535?(f-=65536,i+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):i+=String.fromCharCode(f)}return i},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,l){let u=o.length;if(!u)return 0;let i=0,s=0;if(this._interim){let f=o.charCodeAt(s++);56320<=f&&f<=57343?l[i++]=1024*(this._interim-55296)+f-56320+65536:(l[i++]=this._interim,l[i++]=f),this._interim=0}for(let f=s;f<u;++f){let h=o.charCodeAt(f);if(55296<=h&&h<=56319){if(++f>=u)return this._interim=h,i;let p=o.charCodeAt(f);56320<=p&&p<=57343?l[i++]=1024*(h-55296)+p-56320+65536:(l[i++]=h,l[i++]=p)}else h!==65279&&(l[i++]=h)}return i}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,l){let u=o.length;if(!u)return 0;let i,s,f,h,p=0,c=0,_=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)C<<=6,C|=S;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;_<b;){if(_>=u)return 0;if(S=o[_++],(192&S)!=128){_--,y=!0;break}this.interim[D++]=S,C<<=6,C|=63&S}y||(g===2?C<128?_--:l[p++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(l[p++]=C):C<65536||C>1114111||(l[p++]=C)),this.interim.fill(0)}let v=u-4,m=_;for(;m<u;){for(;!(!(m<v)||128&(i=o[m])||128&(s=o[m+1])||128&(f=o[m+2])||128&(h=o[m+3]));)l[p++]=i,l[p++]=s,l[p++]=f,l[p++]=h,m+=4;if(i=o[m++],i<128)l[p++]=i;else if((224&i)==192){if(m>=u)return this.interim[0]=i,p;if(s=o[m++],(192&s)!=128){m--;continue}if(c=(31&i)<<6|63&s,c<128){m--;continue}l[p++]=c}else if((240&i)==224){if(m>=u)return this.interim[0]=i,p;if(s=o[m++],(192&s)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,p;if(f=o[m++],(192&f)!=128){m--;continue}if(c=(15&i)<<12|(63&s)<<6|63&f,c<2048||c>=55296&&c<=57343||c===65279)continue;l[p++]=c}else if((248&i)==240){if(m>=u)return this.interim[0]=i,p;if(s=o[m++],(192&s)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,p;if(f=o[m++],(192&f)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=f,p;if(h=o[m++],(192&h)!=128){m--;continue}if(c=(7&i)<<18|(63&s)<<12|(63&f)<<6|63&h,c<65536||c>1114111)continue;l[p++]=c}}return p}}},225:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeV6=void 0;let o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u;r.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let i=0;i<o.length;++i)u.fill(0,o[i][0],o[i][1]+1)}}wcwidth(i){return i<32?0:i<127?1:i<65536?u[i]:function(s,f){let h,p=0,c=f.length-1;if(s<f[0][0]||s>f[c][1])return!1;for(;c>=p;)if(h=p+c>>1,s>f[h][1])p=h+1;else{if(!(s<f[h][0]))return!0;c=h-1}return!1}(i,l)?0:i>=131072&&i<=196605||i>=196608&&i<=262141?2:1}}},5981:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WriteBuffer=void 0;let l=o(8460),u=o(844);class i extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,h){if(h!==void 0&&this._syncCalls>h)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let p;for(this._isSyncWriting=!0;p=this._writeBuffer.shift();){this._action(p);let c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,h){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(h),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(h)}_innerWrite(f=0,h=!0){let p=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let c=this._writeBuffer[this._bufferOffset],_=this._action(c,h);if(_){let m=y=>Date.now()-p>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(p,y);return void _.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(m)}let v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-p>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}r.WriteBuffer=i},5941:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.toRgbString=r.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function u(i,s){let f=i.toString(16),h=f.length<2?"0"+f:f;switch(s){case 4:return f[0];case 8:return h;case 12:return(h+h).slice(0,3);default:return h+h}}r.parseColor=function(i){if(!i)return;let s=i.toLowerCase();if(s.indexOf("rgb:")===0){s=s.slice(4);let f=o.exec(s);if(f){let h=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/h*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/h*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/h*255)]}}else if(s.indexOf("#")===0&&(s=s.slice(1),l.exec(s)&&[3,6,9,12].includes(s.length))){let f=s.length/3,h=[0,0,0];for(let p=0;p<3;++p){let c=parseInt(s.slice(f*p,f*p+f),16);h[p]=f===1?c<<4:f===2?c:f===3?c>>4:c>>8}return h}},r.toRgbString=function(i,s=16){let[f,h,p]=i;return`rgb:${u(f,s)}/${u(h,s)}/${u(p,s)}`}},5770:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PAYLOAD_LIMIT=void 0,r.PAYLOAD_LIMIT=1e7},6351:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DcsHandler=r.DcsParser=void 0;let l=o(482),u=o(8742),i=o(5770),s=[];r.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=s}registerHandler(h,p){this._handlers[h]===void 0&&(this._handlers[h]=[]);let c=this._handlers[h];return c.push(p),{dispose:()=>{let _=c.indexOf(p);_!==-1&&c.splice(_,1)}}}clearHandler(h){this._handlers[h]&&delete this._handlers[h]}setHandlerFallback(h){this._handlerFb=h}reset(){if(this._active.length)for(let h=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;h>=0;--h)this._active[h].unhook(!1);this._stack.paused=!1,this._active=s,this._ident=0}hook(h,p){if(this.reset(),this._ident=h,this._active=this._handlers[h]||s,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(p);else this._handlerFb(this._ident,"HOOK",p)}put(h,p,c){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(h,p,c);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(h,p,c))}unhook(h,p=!0){if(this._active.length){let c=!1,_=this._active.length-1,v=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,c=p,v=this._stack.fallThrough,this._stack.paused=!1),!v&&c===!1){for(;_>=0&&(c=this._active[_].unhook(h),c!==!0);_--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,c;_--}for(;_>=0;_--)if(c=this._active[_].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",h);this._active=s,this._ident=0}};let f=new u.Params;f.addParam(0),r.DcsHandler=class{constructor(h){this._handler=h,this._data="",this._params=f,this._hitLimit=!1}hook(h){this._params=h.length>1||h.params[0]?h.clone():f,this._data="",this._hitLimit=!1}put(h,p,c){this._hitLimit||(this._data+=(0,l.utf32ToString)(h,p,c),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(h){let p=!1;if(this._hitLimit)p=!1;else if(h&&(p=this._handler(this._data,this._params),p instanceof Promise))return p.then(c=>(this._params=f,this._data="",this._hitLimit=!1,c));return this._params=f,this._data="",this._hitLimit=!1,p}}},2015:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;let l=o(844),u=o(8742),i=o(6242),s=o(6351);class f{constructor(_){this.table=new Uint8Array(_)}setDefault(_,v){this.table.fill(_<<4|v)}add(_,v,m,y){this.table[v<<8|_]=m<<4|y}addMany(_,v,m,y){for(let C=0;C<_.length;C++)this.table[v<<8|_[C]]=m<<4|y}}r.TransitionTable=f;let h=160;r.VT500_TRANSITION_TABLE=function(){let c=new f(4095),_=Array.apply(null,Array(256)).map((D,g)=>g),v=(D,g)=>_.slice(D,g),m=v(32,127),y=v(0,24);y.push(25),y.push.apply(y,v(28,32));let C=v(0,14),S;for(S in c.setDefault(1,0),c.addMany(m,0,2,0),C)c.addMany([24,26,153,154],S,3,0),c.addMany(v(128,144),S,3,0),c.addMany(v(144,152),S,3,0),c.add(156,S,0,0),c.add(27,S,11,1),c.add(157,S,4,8),c.addMany([152,158,159],S,0,7),c.add(155,S,11,3),c.add(144,S,11,9);return c.addMany(y,0,3,0),c.addMany(y,1,3,1),c.add(127,1,0,1),c.addMany(y,8,0,8),c.addMany(y,3,3,3),c.add(127,3,0,3),c.addMany(y,4,3,4),c.add(127,4,0,4),c.addMany(y,6,3,6),c.addMany(y,5,3,5),c.add(127,5,0,5),c.addMany(y,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(m,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(v(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(m,7,0,7),c.addMany(y,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(v(64,127),3,7,0),c.addMany(v(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(v(48,60),4,8,4),c.addMany(v(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(v(32,64),6,0,6),c.add(127,6,0,6),c.addMany(v(64,127),6,0,0),c.addMany(v(32,48),3,9,5),c.addMany(v(32,48),5,9,5),c.addMany(v(48,64),5,0,6),c.addMany(v(64,127),5,7,0),c.addMany(v(32,48),4,9,5),c.addMany(v(32,48),1,9,2),c.addMany(v(32,48),2,9,2),c.addMany(v(48,127),2,10,0),c.addMany(v(48,80),1,10,0),c.addMany(v(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(v(96,127),1,10,0),c.add(80,1,11,9),c.addMany(y,9,0,9),c.add(127,9,0,9),c.addMany(v(28,32),9,0,9),c.addMany(v(32,48),9,9,12),c.addMany(v(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(y,11,0,11),c.addMany(v(32,128),11,0,11),c.addMany(v(28,32),11,0,11),c.addMany(y,10,0,10),c.add(127,10,0,10),c.addMany(v(28,32),10,0,10),c.addMany(v(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(v(32,48),10,9,12),c.addMany(y,12,0,12),c.add(127,12,0,12),c.addMany(v(28,32),12,0,12),c.addMany(v(32,48),12,9,12),c.addMany(v(48,64),12,0,11),c.addMany(v(64,127),12,12,13),c.addMany(v(64,127),10,12,13),c.addMany(v(64,127),9,12,13),c.addMany(y,13,13,13),c.addMany(m,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(h,0,2,0),c.add(h,8,5,8),c.add(h,6,0,6),c.add(h,11,0,11),c.add(h,13,13,13),c}();class p extends l.Disposable{constructor(_=r.VT500_TRANSITION_TABLE){super(),this._transitions=_,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(v,m,y)=>{},this._executeHandlerFb=v=>{},this._csiHandlerFb=(v,m)=>{},this._escHandlerFb=v=>{},this._errorHandlerFb=v=>v,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,l.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new i.OscParser),this._dcsParser=this.register(new s.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(_,v=[64,126]){let m=0;if(_.prefix){if(_.prefix.length>1)throw new Error("only one byte as prefix supported");if(m=_.prefix.charCodeAt(0),m&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(_.intermediates){if(_.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<_.intermediates.length;++C){let S=_.intermediates.charCodeAt(C);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=S}}if(_.final.length!==1)throw new Error("final must be a single byte");let y=_.final.charCodeAt(0);if(v[0]>y||y>v[1])throw new Error(`final must be in range ${v[0]} .. ${v[1]}`);return m<<=8,m|=y,m}identToString(_){let v=[];for(;_;)v.push(String.fromCharCode(255&_)),_>>=8;return v.reverse().join("")}setPrintHandler(_){this._printHandler=_}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(_,v){let m=this._identifier(_,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);let y=this._escHandlers[m];return y.push(v),{dispose:()=>{let C=y.indexOf(v);C!==-1&&y.splice(C,1)}}}clearEscHandler(_){this._escHandlers[this._identifier(_,[48,126])]&&delete this._escHandlers[this._identifier(_,[48,126])]}setEscHandlerFallback(_){this._escHandlerFb=_}setExecuteHandler(_,v){this._executeHandlers[_.charCodeAt(0)]=v}clearExecuteHandler(_){this._executeHandlers[_.charCodeAt(0)]&&delete this._executeHandlers[_.charCodeAt(0)]}setExecuteHandlerFallback(_){this._executeHandlerFb=_}registerCsiHandler(_,v){let m=this._identifier(_);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);let y=this._csiHandlers[m];return y.push(v),{dispose:()=>{let C=y.indexOf(v);C!==-1&&y.splice(C,1)}}}clearCsiHandler(_){this._csiHandlers[this._identifier(_)]&&delete this._csiHandlers[this._identifier(_)]}setCsiHandlerFallback(_){this._csiHandlerFb=_}registerDcsHandler(_,v){return this._dcsParser.registerHandler(this._identifier(_),v)}clearDcsHandler(_){this._dcsParser.clearHandler(this._identifier(_))}setDcsHandlerFallback(_){this._dcsParser.setHandlerFallback(_)}registerOscHandler(_,v){return this._oscParser.registerHandler(_,v)}clearOscHandler(_){this._oscParser.clearHandler(_)}setOscHandlerFallback(_){this._oscParser.setHandlerFallback(_)}setErrorHandler(_){this._errorHandler=_}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(_,v,m,y,C){this._parseStack.state=_,this._parseStack.handlers=v,this._parseStack.handlerPos=m,this._parseStack.transition=y,this._parseStack.chunkPos=C}parse(_,v,m){let y,C=0,S=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let g=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&b>-1){for(;b>=0&&(y=g[b](this._params),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 4:if(m===!1&&b>-1){for(;b>=0&&(y=g[b](),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 6:if(C=_[this._parseStack.chunkPos],y=this._dcsParser.unhook(C!==24&&C!==26,m),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=_[this._parseStack.chunkPos],y=this._oscParser.end(C!==24&&C!==26,m),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<v;++g){switch(C=_[g],S=this._transitions.table[this.currentState<<8|(C<160?C:h)],S>>4){case 2:for(let M=g+1;;++M){if(M>=v||(C=_[M])<32||C>126&&C<h){this._printHandler(_,g,M),g=M-1;break}if(++M>=v||(C=_[M])<32||C>126&&C<h){this._printHandler(_,g,M),g=M-1;break}if(++M>=v||(C=_[M])<32||C>126&&C<h){this._printHandler(_,g,M),g=M-1;break}if(++M>=v||(C=_[M])<32||C>126&&C<h){this._printHandler(_,g,M),g=M-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let b=this._csiHandlers[this._collect<<8|C],x=b?b.length-1:-1;for(;x>=0&&(y=b[x](this._params),y!==!0);x--)if(y instanceof Promise)return this._preserveStack(3,b,x,S,g),y;x<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++g<v&&(C=_[g])>47&&C<60);g--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let E=this._escHandlers[this._collect<<8|C],T=E?E.length-1:-1;for(;T>=0&&(y=E[T](),y!==!0);T--)if(y instanceof Promise)return this._preserveStack(4,E,T,S,g),y;T<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let M=g+1;;++M)if(M>=v||(C=_[M])===24||C===26||C===27||C>127&&C<h){this._dcsParser.put(_,g,M),g=M-1;break}break;case 14:if(y=this._dcsParser.unhook(C!==24&&C!==26),y)return this._preserveStack(6,[],0,S,g),y;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=g+1;;M++)if(M>=v||(C=_[M])<32||C>127&&C<h){this._oscParser.put(_,g,M),g=M-1;break}break;case 6:if(y=this._oscParser.end(C!==24&&C!==26),y)return this._preserveStack(5,[],0,S,g),y;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}r.EscapeSequenceParser=p},6242:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OscHandler=r.OscParser=void 0;let l=o(5770),u=o(482),i=[];r.OscParser=class{constructor(){this._state=0,this._active=i,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(s,f){this._handlers[s]===void 0&&(this._handlers[s]=[]);let h=this._handlers[s];return h.push(f),{dispose:()=>{let p=h.indexOf(f);p!==-1&&h.splice(p,1)}}}clearHandler(s){this._handlers[s]&&delete this._handlers[s]}setHandlerFallback(s){this._handlerFb=s}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=i}reset(){if(this._state===2)for(let s=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;s>=0;--s)this._active[s].end(!1);this._stack.paused=!1,this._active=i,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||i,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].start();else this._handlerFb(this._id,"START")}_put(s,f,h){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(s,f,h);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(s,f,h))}start(){this.reset(),this._state=1}put(s,f,h){if(this._state!==3){if(this._state===1)for(;f<h;){let p=s[f++];if(p===59){this._state=2,this._start();break}if(p<48||57<p)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+p-48}this._state===2&&h-f>0&&this._put(s,f,h)}}end(s,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let h=!1,p=this._active.length-1,c=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,h=f,c=this._stack.fallThrough,this._stack.paused=!1),!c&&h===!1){for(;p>=0&&(h=this._active[p].end(s),h!==!0);p--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,h;p--}for(;p>=0;p--)if(h=this._active[p].end(!1),h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,h}else this._handlerFb(this._id,"END",s);this._active=i,this._id=-1,this._state=0}}},r.OscHandler=class{constructor(s){this._handler=s,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(s,f,h){this._hitLimit||(this._data+=(0,u.utf32ToString)(s,f,h),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(s){let f=!1;if(this._hitLimit)f=!1;else if(s&&(f=this._handler(this._data),f instanceof Promise))return f.then(h=>(this._data="",this._hitLimit=!1,h));return this._data="",this._hitLimit=!1,f}}},8742:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Params=void 0;let o=2147483647;class l{static fromArray(i){let s=new l;if(!i.length)return s;for(let f=Array.isArray(i[0])?1:0;f<i.length;++f){let h=i[f];if(Array.isArray(h))for(let p=0;p<h.length;++p)s.addSubParam(h[p]);else s.addParam(h)}return s}constructor(i=32,s=32){if(this.maxLength=i,this.maxSubParamsLength=s,s>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(i),this.length=0,this._subParams=new Int32Array(s),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(i),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let i=new l(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i._subParams.set(this._subParams),i._subParamsLength=this._subParamsLength,i._subParamsIdx.set(this._subParamsIdx),i._rejectDigits=this._rejectDigits,i._rejectSubDigits=this._rejectSubDigits,i._digitIsSub=this._digitIsSub,i}toArray(){let i=[];for(let s=0;s<this.length;++s){i.push(this.params[s]);let f=this._subParamsIdx[s]>>8,h=255&this._subParamsIdx[s];h-f>0&&i.push(Array.prototype.slice.call(this._subParams,f,h))}return i}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(i){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=i>o?o:i}}addSubParam(i){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=i>o?o:i,this._subParamsIdx[this.length-1]++}}hasSubParams(i){return(255&this._subParamsIdx[i])-(this._subParamsIdx[i]>>8)>0}getSubParams(i){let s=this._subParamsIdx[i]>>8,f=255&this._subParamsIdx[i];return f-s>0?this._subParams.subarray(s,f):null}getSubParamsAll(){let i={};for(let s=0;s<this.length;++s){let f=this._subParamsIdx[s]>>8,h=255&this._subParamsIdx[s];h-f>0&&(i[s]=this._subParams.slice(f,h))}return i}addDigit(i){let s;if(this._rejectDigits||!(s=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let f=this._digitIsSub?this._subParams:this.params,h=f[s-1];f[s-1]=~h?Math.min(10*h+i,o):i}}r.Params=l},5741:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AddonManager=void 0,r.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,l){let u={instance:l,dispose:l.dispose,isDisposed:!1};this._addons.push(u),l.dispose=()=>this._wrappedAddonDispose(u),l.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let l=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===o){l=u;break}if(l===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(l,1)}}},8771:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferApiView=void 0;let l=o(3785),u=o(511);r.BufferApiView=class{constructor(i,s){this._buffer=i,this.type=s}init(i){return this._buffer=i,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(i){let s=this._buffer.lines.get(i);if(s)return new l.BufferLineApiView(s)}getNullCell(){return new u.CellData}}},3785:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLineApiView=void 0;let l=o(511);r.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,i){if(!(u<0||u>=this._line.length))return i?(this._line.loadCell(u,i),i):this._line.loadCell(u,new l.CellData)}translateToString(u,i,s){return this._line.translateToString(u,i,s)}}},8285:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferNamespaceApi=void 0;let l=o(8771),u=o(8460),i=o(844);class s extends i.Disposable{constructor(h){super(),this._core=h,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}r.BufferNamespaceApi=s},7975:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ParserApi=void 0,r.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,l){return this._core.registerCsiHandler(o,u=>l(u.toArray()))}addCsiHandler(o,l){return this.registerCsiHandler(o,l)}registerDcsHandler(o,l){return this._core.registerDcsHandler(o,(u,i)=>l(u,i.toArray()))}addDcsHandler(o,l){return this.registerDcsHandler(o,l)}registerEscHandler(o,l){return this._core.registerEscHandler(o,l)}addEscHandler(o,l){return this.registerEscHandler(o,l)}registerOscHandler(o,l){return this._core.registerOscHandler(o,l)}addOscHandler(o,l){return this.registerOscHandler(o,l)}}},7090:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeApi=void 0,r.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(d,r,o){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,S=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,v,S):y(_,v))||S);return C>3&&S&&Object.defineProperty(_,v,S),S},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferService=r.MINIMUM_ROWS=r.MINIMUM_COLS=void 0;let i=o(8460),s=o(844),f=o(5295),h=o(2585);r.MINIMUM_COLS=2,r.MINIMUM_ROWS=1;let p=r.BufferService=class extends s.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new i.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new i.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,r.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,r.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(c,this))}resize(c,_){this.cols=c,this.rows=_,this.buffers.resize(c,_),this._onResize.fire({cols:c,rows:_})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,_=!1){let v=this.buffer,m;m=this._cachedBlankLine,m&&m.length===this.cols&&m.getFg(0)===c.fg&&m.getBg(0)===c.bg||(m=v.getBlankLine(c,_),this._cachedBlankLine=m),m.isWrapped=_;let y=v.ybase+v.scrollTop,C=v.ybase+v.scrollBottom;if(v.scrollTop===0){let S=v.lines.isFull;C===v.lines.length-1?S?v.lines.recycle().copyFrom(m):v.lines.push(m.clone()):v.lines.splice(C+1,0,m.clone()),S?this.isUserScrolling&&(v.ydisp=Math.max(v.ydisp-1,0)):(v.ybase++,this.isUserScrolling||v.ydisp++)}else{let S=C-y+1;v.lines.shiftElements(y+1,S-1,-1),v.lines.set(C,m.clone())}this.isUserScrolling||(v.ydisp=v.ybase),this._onScroll.fire(v.ydisp)}scrollLines(c,_,v){let m=this.buffer;if(c<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else c+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);let y=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+c,m.ybase),0),y!==m.ydisp&&(_||this._onScroll.fire(m.ydisp))}};r.BufferService=p=l([u(0,h.IOptionsService)],p)},7994:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharsetService=void 0,r.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,l){this._charsets[o]=l,this.glevel===o&&(this.charset=l)}}},1753:function(d,r,o){var l=this&&this.__decorate||function(m,y,C,S){var D,g=arguments.length,b=g<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(m,y,C,S);else for(var x=m.length-1;x>=0;x--)(D=m[x])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},u=this&&this.__param||function(m,y){return function(C,S){y(C,S,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;let i=o(2585),s=o(8460),f=o(844),h={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:m=>m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)},VT200:{events:19,restrict:m=>m.action!==32},DRAG:{events:23,restrict:m=>m.action!==32||m.button!==3},ANY:{events:31,restrict:m=>!0}};function p(m,y){let C=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(C|=64,C|=m.action):(C|=3&m.button,4&m.button&&(C|=64),8&m.button&&(C|=128),m.action===32?C|=32:m.action!==0||y||(C|=3)),C}let c=String.fromCharCode,_={DEFAULT:m=>{let y=[p(m,!1)+32,m.col+32,m.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${c(y[0])}${c(y[1])}${c(y[2])}`},SGR:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${p(m,!0)};${m.col};${m.row}${y}`},SGR_PIXELS:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${p(m,!0)};${m.x};${m.y}${y}`}},v=r.CoreMouseService=class extends f.Disposable{constructor(m,y){super(),this._bufferService=m,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new s.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(h))this.addProtocol(C,h[C]);for(let C of Object.keys(_))this.addEncoding(C,_[C]);this.reset()}addProtocol(m,y){this._protocols[m]=y}addEncoding(m,y){this._encodings[m]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(m){if(!this._protocols[m])throw new Error(`unknown protocol "${m}"`);this._activeProtocol=m,this._onProtocolChange.fire(this._protocols[m].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(m){if(!this._encodings[m])throw new Error(`unknown encoding "${m}"`);this._activeEncoding=m}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(m){if(m.col<0||m.col>=this._bufferService.cols||m.row<0||m.row>=this._bufferService.rows||m.button===4&&m.action===32||m.button===3&&m.action!==32||m.button!==4&&(m.action===2||m.action===3)||(m.col++,m.row++,m.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,m,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(m))return!1;let y=this._encodings[this._activeEncoding](m);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=m,!0}explainEvents(m){return{down:!!(1&m),up:!!(2&m),drag:!!(4&m),move:!!(8&m),wheel:!!(16&m)}}_equalEvents(m,y,C){if(C){if(m.x!==y.x||m.y!==y.y)return!1}else if(m.col!==y.col||m.row!==y.row)return!1;return m.button===y.button&&m.action===y.action&&m.ctrl===y.ctrl&&m.alt===y.alt&&m.shift===y.shift}};r.CoreMouseService=v=l([u(0,i.IBufferService),u(1,i.ICoreService)],v)},6975:function(d,r,o){var l=this&&this.__decorate||function(v,m,y,C){var S,D=arguments.length,g=D<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(v,m,y,C);else for(var b=v.length-1;b>=0;b--)(S=v[b])&&(g=(D<3?S(g):D>3?S(m,y,g):S(m,y))||g);return D>3&&g&&Object.defineProperty(m,y,g),g},u=this&&this.__param||function(v,m){return function(y,C){m(y,C,v)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreService=void 0;let i=o(1439),s=o(8460),f=o(844),h=o(2585),p=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),_=r.CoreService=class extends f.Disposable{constructor(v,m,y){super(),this._bufferService=v,this._logService=m,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new s.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new s.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,i.clone)(p),this.decPrivateModes=(0,i.clone)(c)}reset(){this.modes=(0,i.clone)(p),this.decPrivateModes=(0,i.clone)(c)}triggerDataEvent(v,m=!1){if(this._optionsService.rawOptions.disableStdin)return;let y=this._bufferService.buffer;m&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),m&&this._onUserInput.fire(),this._logService.debug(`sending data "${v}"`,()=>v.split("").map(C=>C.charCodeAt(0))),this._onData.fire(v)}triggerBinaryEvent(v){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${v}"`,()=>v.split("").map(m=>m.charCodeAt(0))),this._onBinary.fire(v))}};r.CoreService=_=l([u(0,h.IBufferService),u(1,h.ILogService),u(2,h.IOptionsService)],_)},9074:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DecorationService=void 0;let l=o(8055),u=o(8460),i=o(844),s=o(6106),f=0,h=0;class p extends i.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new s.SortedList(v=>v?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,i.toDisposable)(()=>this.reset()))}registerDecoration(v){if(v.marker.isDisposed)return;let m=new c(v);if(m){let y=m.marker.onDispose(()=>m.dispose());m.onDispose(()=>{m&&(this._decorations.delete(m)&&this._onDecorationRemoved.fire(m),y.dispose())}),this._decorations.insert(m),this._onDecorationRegistered.fire(m)}return m}reset(){for(let v of this._decorations.values())v.dispose();this._decorations.clear()}*getDecorationsAtCell(v,m,y){var C,S,D;let g=0,b=0;for(let x of this._decorations.getKeyIterator(m))g=(C=x.options.x)!==null&&C!==void 0?C:0,b=g+((S=x.options.width)!==null&&S!==void 0?S:1),v>=g&&v<b&&(!y||((D=x.options.layer)!==null&&D!==void 0?D:"bottom")===y)&&(yield x)}forEachDecorationAtCell(v,m,y,C){this._decorations.forEachByKey(m,S=>{var D,g,b;f=(D=S.options.x)!==null&&D!==void 0?D:0,h=f+((g=S.options.width)!==null&&g!==void 0?g:1),v>=f&&v<h&&(!y||((b=S.options.layer)!==null&&b!==void 0?b:"bottom")===y)&&C(S)})}}r.DecorationService=p;class c extends i.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=l.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=l.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(v){super(),this.options=v,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=v.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InstantiationService=r.ServiceCollection=void 0;let l=o(2585),u=o(8343);class i{constructor(...f){this._entries=new Map;for(let[h,p]of f)this.set(h,p)}set(f,h){let p=this._entries.get(f);return this._entries.set(f,h),p}forEach(f){for(let[h,p]of this._entries.entries())f(h,p)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}r.ServiceCollection=i,r.InstantiationService=class{constructor(){this._services=new i,this._services.set(l.IInstantiationService,this)}setService(s,f){this._services.set(s,f)}getService(s){return this._services.get(s)}createInstance(s,...f){let h=(0,u.getServiceDependencies)(s).sort((_,v)=>_.index-v.index),p=[];for(let _ of h){let v=this._services.get(_.id);if(!v)throw new Error(`[createInstance] ${s.name} depends on UNKNOWN service ${_.id}.`);p.push(v)}let c=h.length>0?h[0].index:f.length;if(f.length!==c)throw new Error(`[createInstance] First service dependency of ${s.name} at position ${c+1} conflicts with ${f.length} static arguments`);return new s(...f,...p)}}},7866:function(d,r,o){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,S=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,v,S):y(_,v))||S);return C>3&&S&&Object.defineProperty(_,v,S),S},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;let i=o(844),s=o(2585),f={trace:s.LogLevelEnum.TRACE,debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},h,p=r.LogService=class extends i.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),h=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let _=0;_<c.length;_++)typeof c[_]=="function"&&(c[_]=c[_]())}_log(c,_,v){this._evalLazyOptionalParams(v),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...v)}trace(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.TRACE&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,c,_)}debug(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.DEBUG&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,c,_)}info(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.INFO&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,c,_)}warn(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.WARN&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,c,_)}error(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.ERROR&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,c,_)}};r.LogService=p=l([u(0,s.IOptionsService)],p),r.setTraceLogger=function(c){h=c},r.traceCall=function(c,_,v){if(typeof v.value!="function")throw new Error("not supported");let m=v.value;v.value=function(...y){if(h.logLevel!==s.LogLevelEnum.TRACE)return m.apply(this,y);h.trace(`GlyphRenderer#${m.name}(${y.map(S=>JSON.stringify(S)).join(", ")})`);let C=m.apply(this,y);return h.trace(`GlyphRenderer#${m.name} return`,C),C}}},7302:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsService=r.DEFAULT_OPTIONS=void 0;let l=o(8460),u=o(844),i=o(6114);r.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:i.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let s=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(p){super(),this._onOptionChange=this.register(new l.EventEmitter),this.onOptionChange=this._onOptionChange.event;let c=Object.assign({},r.DEFAULT_OPTIONS);for(let _ in p)if(_ in c)try{let v=p[_];c[_]=this._sanitizeAndValidateOption(_,v)}catch(v){console.error(v)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(p,c){return this.onOptionChange(_=>{_===p&&c(this.rawOptions[p])})}onMultipleOptionChange(p,c){return this.onOptionChange(_=>{p.indexOf(_)!==-1&&c()})}_setupOptions(){let p=_=>{if(!(_ in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);return this.rawOptions[_]},c=(_,v)=>{if(!(_ in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);v=this._sanitizeAndValidateOption(_,v),this.rawOptions[_]!==v&&(this.rawOptions[_]=v,this._onOptionChange.fire(_))};for(let _ in this.rawOptions){let v={get:p.bind(this,_),set:c.bind(this,_)};Object.defineProperty(this.options,_,v)}}_sanitizeAndValidateOption(p,c){switch(p){case"cursorStyle":if(c||(c=r.DEFAULT_OPTIONS[p]),!function(_){return _==="block"||_==="underline"||_==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${p}`);break;case"wordSeparator":c||(c=r.DEFAULT_OPTIONS[p]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=s.includes(c)?c:r.DEFAULT_OPTIONS[p];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${p} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${p} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${p} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${p} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}r.OptionsService=f},2660:function(d,r,o){var l=this&&this.__decorate||function(f,h,p,c){var _,v=arguments.length,m=v<3?h:c===null?c=Object.getOwnPropertyDescriptor(h,p):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(f,h,p,c);else for(var y=f.length-1;y>=0;y--)(_=f[y])&&(m=(v<3?_(m):v>3?_(h,p,m):_(h,p))||m);return v>3&&m&&Object.defineProperty(h,p,m),m},u=this&&this.__param||function(f,h){return function(p,c){h(p,c,f)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkService=void 0;let i=o(2585),s=r.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){let h=this._bufferService.buffer;if(f.id===void 0){let y=h.addMarker(h.ybase+h.y),C={data:f,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(C,y)),this._dataByLinkId.set(C.id,C),C.id}let p=f,c=this._getEntryIdKey(p),_=this._entriesWithId.get(c);if(_)return this.addLineToLink(_.id,h.ybase+h.y),_.id;let v=h.addMarker(h.ybase+h.y),m={id:this._nextId++,key:this._getEntryIdKey(p),data:p,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(m,v)),this._entriesWithId.set(m.key,m),this._dataByLinkId.set(m.id,m),m.id}addLineToLink(f,h){let p=this._dataByLinkId.get(f);if(p&&p.lines.every(c=>c.line!==h)){let c=this._bufferService.buffer.addMarker(h);p.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(p,c))}}getLinkData(f){var h;return(h=this._dataByLinkId.get(f))===null||h===void 0?void 0:h.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,h){let p=f.lines.indexOf(h);p!==-1&&(f.lines.splice(p,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};r.OscLinkService=s=l([u(0,i.IBufferService)],s)},8343:(d,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;let o="di$target",l="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(u){return u[l]||[]},r.createDecorator=function(u){if(r.serviceRegistry.has(u))return r.serviceRegistry.get(u);let i=function(s,f,h){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(p,c,_){c[o]===c?c[l].push({id:p,index:_}):(c[l]=[{id:p,index:_}],c[o]=c)})(i,s,h)};return i.toString=()=>u,r.serviceRegistry.set(u,i),i}},2585:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;let l=o(8343);var u;r.IBufferService=(0,l.createDecorator)("BufferService"),r.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),r.ICoreService=(0,l.createDecorator)("CoreService"),r.ICharsetService=(0,l.createDecorator)("CharsetService"),r.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(i){i[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.OFF=5]="OFF"}(u||(r.LogLevelEnum=u={})),r.ILogService=(0,l.createDecorator)("LogService"),r.IOptionsService=(0,l.createDecorator)("OptionsService"),r.IOscLinkService=(0,l.createDecorator)("OscLinkService"),r.IUnicodeService=(0,l.createDecorator)("UnicodeService"),r.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(d,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeService=void 0;let l=o(8460),u=o(225);r.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter,this.onChange=this._onChange.event;let i=new u.UnicodeV6;this.register(i),this._active=i.version,this._activeProvider=i}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(i){if(!this._providers[i])throw new Error(`unknown Unicode version "${i}"`);this._active=i,this._activeProvider=this._providers[i],this._onChange.fire(i)}register(i){this._providers[i.version]=i}wcwidth(i){return this._activeProvider.wcwidth(i)}getStringCellWidth(i){let s=0,f=i.length;for(let h=0;h<f;++h){let p=i.charCodeAt(h);if(55296<=p&&p<=56319){if(++h>=f)return s+this.wcwidth(p);let c=i.charCodeAt(h);56320<=c&&c<=57343?p=1024*(p-55296)+c-56320+65536:s+=this.wcwidth(c)}s+=this.wcwidth(p)}return s}}}},t={};function n(d){var r=t[d];if(r!==void 0)return r.exports;var o=t[d]={exports:{}};return e[d].call(o.exports,o,o.exports,n),o.exports}var a={};return(()=>{var d=a;Object.defineProperty(d,"__esModule",{value:!0}),d.Terminal=void 0;let r=n(9042),o=n(3236),l=n(844),u=n(5741),i=n(8285),s=n(7975),f=n(7090),h=["cols","rows"];class p extends l.Disposable{constructor(_){super(),this._core=this.register(new o.Terminal(_)),this._addonManager=this.register(new u.AddonManager),this._publicOptions=Object.assign({},this._core.options);let v=y=>this._core.options[y],m=(y,C)=>{this._checkReadonlyOptions(y),this._core.options[y]=C};for(let y in this._core.options){let C={get:v.bind(this,y),set:m.bind(this,y)};Object.defineProperty(this._publicOptions,y,C)}}_checkReadonlyOptions(_){if(h.includes(_))throw new Error(`Option "${_}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new s.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new i.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let _=this._core.coreService.decPrivateModes,v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:_.applicationCursorKeys,applicationKeypadMode:_.applicationKeypad,bracketedPasteMode:_.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:_.origin,reverseWraparoundMode:_.reverseWraparound,sendFocusMode:_.sendFocus,wraparoundMode:_.wraparound}}get options(){return this._publicOptions}set options(_){for(let v in _)this._publicOptions[v]=_[v]}blur(){this._core.blur()}focus(){this._core.focus()}resize(_,v){this._verifyIntegers(_,v),this._core.resize(_,v)}open(_){this._core.open(_)}attachCustomKeyEventHandler(_){this._core.attachCustomKeyEventHandler(_)}registerLinkProvider(_){return this._core.registerLinkProvider(_)}registerCharacterJoiner(_){return this._checkProposedApi(),this._core.registerCharacterJoiner(_)}deregisterCharacterJoiner(_){this._checkProposedApi(),this._core.deregisterCharacterJoiner(_)}registerMarker(_=0){return this._verifyIntegers(_),this._core.registerMarker(_)}registerDecoration(_){var v,m,y;return this._checkProposedApi(),this._verifyPositiveIntegers((v=_.x)!==null&&v!==void 0?v:0,(m=_.width)!==null&&m!==void 0?m:0,(y=_.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(_)}hasSelection(){return this._core.hasSelection()}select(_,v,m){this._verifyIntegers(_,v,m),this._core.select(_,v,m)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(_,v){this._verifyIntegers(_,v),this._core.selectLines(_,v)}dispose(){super.dispose()}scrollLines(_){this._verifyIntegers(_),this._core.scrollLines(_)}scrollPages(_){this._verifyIntegers(_),this._core.scrollPages(_)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(_){this._verifyIntegers(_),this._core.scrollToLine(_)}clear(){this._core.clear()}write(_,v){this._core.write(_,v)}writeln(_,v){this._core.write(_),this._core.write(`\r
`,v)}paste(_){this._core.paste(_)}refresh(_,v){this._verifyIntegers(_,v),this._core.refresh(_,v)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(_){this._addonManager.loadAddon(this,_)}static get strings(){return r}_verifyIntegers(..._){for(let v of _)if(v===1/0||isNaN(v)||v%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(..._){for(let v of _)if(v&&(v===1/0||isNaN(v)||v%1!=0||v<0))throw new Error("This API only accepts positive integers")}}d.Terminal=p})(),a})())});var ly=Tt((oB,cy)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var n=function(u,i,s){if(typeof u!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(s=i),n.modules[u]||(n.payloads[u]=s,n.modules[u]=null)};n.modules={},n.payloads={};var a=function(u,i,s){if(typeof i=="string"){var f=o(u,i);if(f!=null)return s&&s(),f}else if(Object.prototype.toString.call(i)==="[object Array]"){for(var h=[],p=0,c=i.length;p<c;++p){var _=o(u,i[p]);if(_==null&&d.original)return;h.push(_)}return s&&s.apply(null,h)||!0}},d=function(u,i){var s=a("",u,i);return s==null&&d.original?d.original.apply(this,arguments):s},r=function(u,i){if(i.indexOf("!")!==-1){var s=i.split("!");return r(u,s[0])+"!"+r(u,s[1])}if(i.charAt(0)=="."){var f=u.split("/").slice(0,-1).join("/");for(i=f+"/"+i;i.indexOf(".")!==-1&&h!=i;){var h=i;i=i.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return i},o=function(u,i){i=r(u,i);var s=n.modules[i];if(!s){if(s=n.payloads[i],typeof s=="function"){var f={},h={id:i,uri:"",exports:f,packaged:!0},p=function(_,v){return a(i,_,v)},c=s(p,f,h);f=c||h.exports,n.modules[i]=f,delete n.payloads[i]}s=n.modules[i]=f||s}return s};function l(u){var i=t;u&&(t[u]||(t[u]={}),i=t[u]),(!i.define||!i.define.packaged)&&(n.original=i.define,i.define=n,i.define.packaged=!0),(!i.require||!i.require.packaged)&&(d.original=i.require,i.require=d,i.require.packaged=!0)}l(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function a(d,r,o){Object.defineProperty(d,r,{value:o,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||a(String.prototype,"startsWith",function(d,r){return r=r||0,this.lastIndexOf(d,r)===r}),String.prototype.endsWith||a(String.prototype,"endsWith",function(d,r){var o=this;(r===void 0||r>o.length)&&(r=o.length),r-=d.length;var l=o.indexOf(d,r);return l!==-1&&l===r}),String.prototype.repeat||a(String.prototype,"repeat",function(d){for(var r="",o=this;d>0;)d&1&&(r+=o),(d>>=1)&&(o+=o);return r}),String.prototype.includes||a(String.prototype,"includes",function(d,r){return this.indexOf(d,r)!=-1}),Object.assign||(Object.assign=function(d){if(d==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(d),o=1;o<arguments.length;o++){var l=arguments[o];l!=null&&Object.keys(l).forEach(function(u){r[u]=l[u]})}return r}),Object.values||(Object.values=function(d){return Object.keys(d).map(function(r){return d[r]})}),Array.prototype.find||a(Array.prototype,"find",function(d){for(var r=this.length,o=arguments[1],l=0;l<r;l++){var u=this[l];if(d.call(o,u,l,this))return u}}),Array.prototype.findIndex||a(Array.prototype,"findIndex",function(d){for(var r=this.length,o=arguments[1],l=0;l<r;l++){var u=this[l];if(d.call(o,u,l,this))return l}}),Array.prototype.includes||a(Array.prototype,"includes",function(d,r){return this.indexOf(d,r)!=-1}),Array.prototype.fill||a(Array.prototype,"fill",function(d){for(var r=this,o=r.length>>>0,l=arguments[1],u=l>>0,i=u<0?Math.max(o+u,0):Math.min(u,o),s=arguments[2],f=s===void 0?o:s>>0,h=f<0?Math.max(o+f,0):Math.min(f,o);i<h;)r[i]=d,i++;return r}),Array.of||a(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,n){t.deepCopy=function a(d){if(typeof d!="object"||!d)return d;var r;if(Array.isArray(d)){r=[];for(var o=0;o<d.length;o++)r[o]=a(d[o]);return r}if(Object.prototype.toString.call(d)!=="[object Object]")return d;r={};for(var o in d)r[o]=a(d[o]);return r}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";t.last=function(r){return r[r.length-1]},t.stringReverse=function(r){return r.split("").reverse().join("")},t.stringRepeat=function(r,o){for(var l="";o>0;)o&1&&(l+=r),(o>>=1)&&(r+=r);return l};var a=/^\s\s*/,d=/\s\s*$/;t.stringTrimLeft=function(r){return r.replace(a,"")},t.stringTrimRight=function(r){return r.replace(d,"")},t.copyObject=function(r){var o={};for(var l in r)o[l]=r[l];return o},t.copyArray=function(r){for(var o=[],l=0,u=r.length;l<u;l++)r[l]&&typeof r[l]=="object"?o[l]=this.copyObject(r[l]):o[l]=r[l];return o},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(r){for(var o={},l=0;l<r.length;l++)o[r[l]]=1;return o},t.createMap=function(r){var o=Object.create(null);for(var l in r)o[l]=r[l];return o},t.arrayRemove=function(r,o){for(var l=0;l<=r.length;l++)o===r[l]&&r.splice(l,1)},t.escapeRegExp=function(r){return r.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(r){return(""+r).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(r,o){var l=[];return r.replace(o,function(u){l.push({offset:arguments[arguments.length-2],length:u.length})}),l},t.deferredCall=function(r){var o=null,l=function(){o=null,r()},u=function(i){return u.cancel(),o=setTimeout(l,i||0),u};return u.schedule=u,u.call=function(){return this.cancel(),r(),u},u.cancel=function(){return clearTimeout(o),o=null,u},u.isPending=function(){return o},u},t.delayedCall=function(r,o){var l=null,u=function(){l=null,r()},i=function(s){l==null&&(l=setTimeout(u,s||o))};return i.delay=function(s){l&&clearTimeout(l),l=setTimeout(u,s||o)},i.schedule=i,i.call=function(){this.cancel(),r()},i.cancel=function(){l&&clearTimeout(l),l=null},i.isPending=function(){return l},i},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(r,o,l){return l&&r.codePointAt(o)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var a=typeof navigator=="object"?navigator:{},d=(/mac|win|linux/i.exec(a.platform)||["other"])[0].toLowerCase(),r=a.userAgent||"",o=a.appName||"";t.isWin=d=="win",t.isMac=d=="mac",t.isLinux=d=="linux",t.isIE=o=="Microsoft Internet Explorer"||o.indexOf("MSAppHost")>=0?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=r.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(r.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(r.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(r.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(r.split(" Edge/")[1])||void 0,t.isAIR=r.indexOf("AdobeAIR")>=0,t.isAndroid=r.indexOf("Android")>=0,t.isChromeOS=r.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(r)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("./useragent"),d="http://www.w3.org/1999/xhtml";t.buildDom=function s(f,h,p){if(typeof f=="string"&&f){var c=document.createTextNode(f);return h&&h.appendChild(c),c}if(!Array.isArray(f))return f&&f.appendChild&&h&&h.appendChild(f),f;if(typeof f[0]!="string"||!f[0]){for(var _=[],v=0;v<f.length;v++){var m=s(f[v],h,p);m&&_.push(m)}return _}var y=document.createElement(f[0]),C=f[1],S=1;C&&typeof C=="object"&&!Array.isArray(C)&&(S=2);for(var v=S;v<f.length;v++)s(f[v],y,p);return S==2&&Object.keys(C).forEach(function(D){var g=C[D];D==="class"?y.className=Array.isArray(g)?g.join(" "):g:typeof g=="function"||D=="value"||D[0]=="$"?y[D]=g:D==="ref"?p&&(p[g]=y):D==="style"?typeof g=="string"&&(y.style.cssText=g):g!=null&&y.setAttribute(D,g)}),h&&h.appendChild(y),y},t.getDocumentHead=function(s){return s||(s=document),s.head||s.getElementsByTagName("head")[0]||s.documentElement},t.createElement=function(s,f){return document.createElementNS?document.createElementNS(f||d,s):document.createElement(s)},t.removeChildren=function(s){s.innerHTML=""},t.createTextNode=function(s,f){var h=f?f.ownerDocument:document;return h.createTextNode(s)},t.createFragment=function(s){var f=s?s.ownerDocument:document;return f.createDocumentFragment()},t.hasCssClass=function(s,f){var h=(s.className+"").split(/\s+/g);return h.indexOf(f)!==-1},t.addCssClass=function(s,f){t.hasCssClass(s,f)||(s.className+=" "+f)},t.removeCssClass=function(s,f){for(var h=s.className.split(/\s+/g);;){var p=h.indexOf(f);if(p==-1)break;h.splice(p,1)}s.className=h.join(" ")},t.toggleCssClass=function(s,f){for(var h=s.className.split(/\s+/g),p=!0;;){var c=h.indexOf(f);if(c==-1)break;p=!1,h.splice(c,1)}return p&&h.push(f),s.className=h.join(" "),p},t.setCssClass=function(s,f,h){h?t.addCssClass(s,f):t.removeCssClass(s,f)},t.hasCssString=function(s,f){var h=0,p;if(f=f||document,p=f.querySelectorAll("style")){for(;h<p.length;)if(p[h++].id===s)return!0}},t.removeElementById=function(s,f){f=f||document,f.getElementById(s)&&f.getElementById(s).remove()};var r,o=[];t.useStrictCSP=function(s){r=s,s==!1?l():o||(o=[])};function l(){var s=o;o=null,s&&s.forEach(function(f){u(f[0],f[1])})}function u(s,f,h){if(!(typeof document>"u")){if(o){if(h)l();else if(h===!1)return o.push([s,f])}if(!r){var p=h;!h||!h.getRootNode?p=document:(p=h.getRootNode(),(!p||p==h)&&(p=document));var c=p.ownerDocument||p;if(f&&t.hasCssString(f,p))return null;f&&(s+=`
/*# sourceURL=ace/css/`+f+" */");var _=t.createElement("style");_.appendChild(c.createTextNode(s)),f&&(_.id=f),p==c&&(p=t.getDocumentHead(c)),p.insertBefore(_,p.firstChild)}}}if(t.importCssString=u,t.importCssStylsheet=function(s,f){t.buildDom(["link",{rel:"stylesheet",href:s}],t.getDocumentHead(f))},t.scrollbarWidth=function(s){var f=t.createElement("ace_inner");f.style.width="100%",f.style.minWidth="0px",f.style.height="200px",f.style.display="block";var h=t.createElement("ace_outer"),p=h.style;p.position="absolute",p.left="-10000px",p.overflow="hidden",p.width="200px",p.minWidth="0px",p.height="150px",p.display="block",h.appendChild(f);var c=s&&s.documentElement||document&&document.documentElement;if(!c)return 0;c.appendChild(h);var _=f.offsetWidth;p.overflow="scroll";var v=f.offsetWidth;return _===v&&(v=h.clientWidth),c.removeChild(h),_-v},t.computedStyle=function(s,f){return window.getComputedStyle(s,"")||{}},t.setStyle=function(s,f,h){s[f]!==h&&(s[f]=h)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=a.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,a.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var i=document.createElement("div");t.HI_DPI&&i.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!a.isEdge&&typeof i.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),i=null}t.HAS_CSS_TRANSFORMS?t.translate=function(s,f,h){s.style.transform="translate("+Math.round(f)+"px, "+Math.round(h)+"px)"}:t.translate=function(s,f,h){s.style.top=Math.round(h)+"px",s.style.left=Math.round(f)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("./dom");t.get=function(d,r){var o=new XMLHttpRequest;o.open("GET",d,!0),o.onreadystatechange=function(){o.readyState===4&&r(o.responseText)},o.send(null)},t.loadScript=function(d,r){var o=a.getDocumentHead(),l=document.createElement("script");l.src=d,o.appendChild(l),l.onload=l.onreadystatechange=function(u,i){(i||!l.readyState||l.readyState=="loaded"||l.readyState=="complete")&&(l=l.onload=l.onreadystatechange=null,i||r())}},t.qualifyURL=function(d){var r=document.createElement("a");return r.href=d,r.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(a,d){a.super_=d,a.prototype=Object.create(d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(a,d){for(var r in d)a[r]=d[r];return a},t.implement=function(a,d){t.mixin(a,d)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var a={},d=function(){this.propagationStopped=!0},r=function(){this.defaultPrevented=!0};a._emit=a._dispatchEvent=function(o,l){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var u=this._eventRegistry[o]||[],i=this._defaultHandlers[o];if(!(!u.length&&!i)){(typeof l!="object"||!l)&&(l={}),l.type||(l.type=o),l.stopPropagation||(l.stopPropagation=d),l.preventDefault||(l.preventDefault=r),u=u.slice();for(var s=0;s<u.length&&(u[s](l,this),!l.propagationStopped);s++);if(i&&!l.defaultPrevented)return i(l,this)}},a._signal=function(o,l){var u=(this._eventRegistry||{})[o];if(u){u=u.slice();for(var i=0;i<u.length;i++)u[i](l,this)}},a.once=function(o,l){var u=this;if(this.on(o,function i(){u.off(o,i),l.apply(null,arguments)}),!l)return new Promise(function(i){l=i})},a.setDefaultHandler=function(o,l){var u=this._defaultHandlers;if(u||(u=this._defaultHandlers={_disabled_:{}}),u[o]){var i=u[o],s=u._disabled_[o];s||(u._disabled_[o]=s=[]),s.push(i);var f=s.indexOf(l);f!=-1&&s.splice(f,1)}u[o]=l},a.removeDefaultHandler=function(o,l){var u=this._defaultHandlers;if(u){var i=u._disabled_[o];if(u[o]==l)i&&this.setDefaultHandler(o,i.pop());else if(i){var s=i.indexOf(l);s!=-1&&i.splice(s,1)}}},a.on=a.addEventListener=function(o,l,u){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[o];return i||(i=this._eventRegistry[o]=[]),i.indexOf(l)==-1&&i[u?"unshift":"push"](l),l},a.off=a.removeListener=a.removeEventListener=function(o,l){this._eventRegistry=this._eventRegistry||{};var u=this._eventRegistry[o];if(u){var i=u.indexOf(l);i!==-1&&u.splice(i,1)}},a.removeAllListeners=function(o){o||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[o]=void 0),this._defaultHandlers&&(this._defaultHandlers[o]=void 0)},t.EventEmitter=a});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,n){t.reportError=function(d,r){var o=new Error(d);o.data=r,typeof console=="object"&&console.error&&console.error(o),setTimeout(function(){throw o})}});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(e,t,n){"no use strict";var a=e("./oop"),d=e("./event_emitter").EventEmitter,r=e("./report_error").reportError,o={setOptions:function(s){Object.keys(s).forEach(function(f){this.setOption(f,s[f])},this)},getOptions:function(s){var f={};if(s)Array.isArray(s)||(f=s,s=Object.keys(f));else{var h=this.$options;s=Object.keys(h).filter(function(p){return!h[p].hidden})}return s.forEach(function(p){f[p]=this.getOption(p)},this),f},setOption:function(s,f){if(this["$"+s]!==f){var h=this.$options[s];if(!h)return l('misspelled option "'+s+'"');if(h.forwardTo)return this[h.forwardTo]&&this[h.forwardTo].setOption(s,f);h.handlesSet||(this["$"+s]=f),h&&h.set&&h.set.call(this,f)}},getOption:function(s){var f=this.$options[s];return f?f.forwardTo?this[f.forwardTo]&&this[f.forwardTo].getOption(s):f&&f.get?f.get.call(this):this["$"+s]:l('misspelled option "'+s+'"')}};function l(s){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var u,i=function(){function s(){this.$defaultOptions={}}return s.prototype.defineOptions=function(f,h,p){return f.$options||(this.$defaultOptions[h]=f.$options={}),Object.keys(p).forEach(function(c){var _=p[c];typeof _=="string"&&(_={forwardTo:_}),_.name||(_.name=c),f.$options[_.name]=_,"initialValue"in _&&(f["$"+_.name]=_.initialValue)}),a.implement(f,o),this},s.prototype.resetOptions=function(f){Object.keys(f.$options).forEach(function(h){var p=f.$options[h];"value"in p&&f.setOption(h,p.value)})},s.prototype.setDefaultValue=function(f,h,p){if(!f){for(f in this.$defaultOptions)if(this.$defaultOptions[f][h])break;if(!this.$defaultOptions[f][h])return!1}var c=this.$defaultOptions[f]||(this.$defaultOptions[f]={});c[h]&&(c.forwardTo?this.setDefaultValue(c.forwardTo,h,p):c[h].value=p)},s.prototype.setDefaultValues=function(f,h){Object.keys(h).forEach(function(p){this.setDefaultValue(f,p,h[p])},this)},s.prototype.setMessages=function(f){u=f},s.prototype.nls=function(f,h){u&&!u[f]&&l("No message found for '"+f+"' in the provided messages, falling back to default English message.");var p=u&&u[f]||f;return h&&(p=p.replace(/\$(\$|[\d]+)/g,function(c,_){return _=="$"?"$":h[_]})),p},s}();i.prototype.warn=l,i.prototype.reportError=r,a.implement(i.prototype,d),t.AppConfig=i});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var a=e("../lib/dom");a.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){"no use strict";var a=e("./lib/lang"),d=e("./lib/net"),r=e("./lib/dom"),o=e("./lib/app_config").AppConfig;n.exports=t=new o;var l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(f){if(!l.hasOwnProperty(f))throw new Error("Unknown config key: "+f);return l[f]},t.set=function(f,h){if(l.hasOwnProperty(f))l[f]=h;else if(this.setDefaultValue("",f,h)==!1)throw new Error("Unknown config key: "+f);f=="useStrictCSP"&&r.useStrictCSP(h)},t.all=function(){return a.copyObject(l)},t.$modes={},t.moduleUrl=function(f,h){if(l.$moduleUrls[f])return l.$moduleUrls[f];var p=f.split("/");h=h||p[p.length-2]||"";var c=h=="snippets"?"/":"-",_=p[p.length-1];if(h=="worker"&&c=="-"){var v=new RegExp("^"+h+"[\\-_]|[\\-_]"+h+"$","g");_=_.replace(v,"")}(!_||_==h)&&p.length>1&&(_=p[p.length-2]);var m=l[h+"Path"];return m==null?m=l.basePath:c=="/"&&(h=c=""),m&&m.slice(-1)!="/"&&(m+="/"),m+h+c+_+this.get("suffix")},t.setModuleUrl=function(f,h){return l.$moduleUrls[f]=h};var u=function(f,h){if(f==="ace/theme/textmate"||f==="./theme/textmate")return h(null,e("./theme/textmate"));if(i)return i(f,h);console.error("loader is not configured")},i;t.setLoader=function(f){i=f},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(f,h){var p;if(Array.isArray(f))var c=f[0],_=f[1];else if(typeof f=="string")var _=f;var v=function(m){if(m&&!t.$loading[_])return h&&h(m);if(t.$loading[_]||(t.$loading[_]=[]),t.$loading[_].push(h),!(t.$loading[_].length>1)){var y=function(){u(_,function(C,S){S&&(t.$loaded[_]=S),t._emit("load.module",{name:_,module:S});var D=t.$loading[_];t.$loading[_]=null,D.forEach(function(g){g&&g(S)})})};if(!t.get("packaged"))return y();d.loadScript(t.moduleUrl(_,c),y),s()}};if(t.dynamicModules[_])t.dynamicModules[_]().then(function(m){m.default?v(m.default):v(m)});else{try{p=this.$require(_)}catch{}v(p||t.$loaded[_])}},t.$require=function(f){if(typeof n.require=="function"){var h="require";return n[h](f)}},t.setModuleLoader=function(f,h){t.dynamicModules[f]=h};var s=function(){!l.basePath&&!l.workerPath&&!l.modePath&&!l.themePath&&!Object.keys(l.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),s=function(){})};t.version="1.32.3"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var a=e("./config");a.setLoader(function(l,u){e([l],function(i){u(null,i)})});var d=function(){return this||typeof window<"u"&&window}();n.exports=function(l){a.init=r,a.$require=e,l.require=e,typeof define=="function"&&(l.define=define)},r(!0);function r(l){if(!(!d||!d.document)){a.set("packaged",l||e.packaged||n.packaged||d.define&&define.packaged);var u={},i="",s=document.currentScript||document._currentScript,f=s&&s.ownerDocument||document;s&&s.src&&(i=s.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var h=f.getElementsByTagName("script"),p=0;p<h.length;p++){var c=h[p],_=c.src||c.getAttribute("src");if(_){for(var v=c.attributes,m=0,y=v.length;m<y;m++){var C=v[m];C.name.indexOf("data-ace-")===0&&(u[o(C.name.replace(/^data-ace-/,""))]=C.value)}var S=_.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(i=S[1])}}i&&(u.base=u.base||i,u.packaged=!0),u.basePath=u.base,u.workerPath=u.workerPath||u.base,u.modePath=u.modePath||u.base,u.themePath=u.themePath||u.base,delete u.base;for(var D in u)typeof u[D]<"u"&&a.set(D,u[D])}}function o(l){return l.replace(/-(.)/g,function(u,i){return i.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var a=function(){function d(r,o,l,u){this.start={row:r,column:o},this.end={row:l,column:u}}return d.prototype.isEqual=function(r){return this.start.row===r.start.row&&this.end.row===r.end.row&&this.start.column===r.start.column&&this.end.column===r.end.column},d.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},d.prototype.contains=function(r,o){return this.compare(r,o)==0},d.prototype.compareRange=function(r){var o,l=r.end,u=r.start;return o=this.compare(l.row,l.column),o==1?(o=this.compare(u.row,u.column),o==1?2:o==0?1:0):o==-1?-2:(o=this.compare(u.row,u.column),o==-1?-1:o==1?42:0)},d.prototype.comparePoint=function(r){return this.compare(r.row,r.column)},d.prototype.containsRange=function(r){return this.comparePoint(r.start)==0&&this.comparePoint(r.end)==0},d.prototype.intersects=function(r){var o=this.compareRange(r);return o==-1||o==0||o==1},d.prototype.isEnd=function(r,o){return this.end.row==r&&this.end.column==o},d.prototype.isStart=function(r,o){return this.start.row==r&&this.start.column==o},d.prototype.setStart=function(r,o){typeof r=="object"?(this.start.column=r.column,this.start.row=r.row):(this.start.row=r,this.start.column=o)},d.prototype.setEnd=function(r,o){typeof r=="object"?(this.end.column=r.column,this.end.row=r.row):(this.end.row=r,this.end.column=o)},d.prototype.inside=function(r,o){return this.compare(r,o)==0?!(this.isEnd(r,o)||this.isStart(r,o)):!1},d.prototype.insideStart=function(r,o){return this.compare(r,o)==0?!this.isEnd(r,o):!1},d.prototype.insideEnd=function(r,o){return this.compare(r,o)==0?!this.isStart(r,o):!1},d.prototype.compare=function(r,o){return!this.isMultiLine()&&r===this.start.row?o<this.start.column?-1:o>this.end.column?1:0:r<this.start.row?-1:r>this.end.row?1:this.start.row===r?o>=this.start.column?0:-1:this.end.row===r?o<=this.end.column?0:1:0},d.prototype.compareStart=function(r,o){return this.start.row==r&&this.start.column==o?-1:this.compare(r,o)},d.prototype.compareEnd=function(r,o){return this.end.row==r&&this.end.column==o?1:this.compare(r,o)},d.prototype.compareInside=function(r,o){return this.end.row==r&&this.end.column==o?1:this.start.row==r&&this.start.column==o?-1:this.compare(r,o)},d.prototype.clipRows=function(r,o){if(this.end.row>o)var l={row:o+1,column:0};else if(this.end.row<r)var l={row:r,column:0};if(this.start.row>o)var u={row:o+1,column:0};else if(this.start.row<r)var u={row:r,column:0};return d.fromPoints(u||this.start,l||this.end)},d.prototype.extend=function(r,o){var l=this.compare(r,o);if(l==0)return this;if(l==-1)var u={row:r,column:o};else var i={row:r,column:o};return d.fromPoints(u||this.start,i||this.end)},d.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},d.prototype.isMultiLine=function(){return this.start.row!==this.end.row},d.prototype.clone=function(){return d.fromPoints(this.start,this.end)},d.prototype.collapseRows=function(){return this.end.column==0?new d(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new d(this.start.row,0,this.end.row,0)},d.prototype.toScreenRange=function(r){var o=r.documentToScreenPosition(this.start),l=r.documentToScreenPosition(this.end);return new d(o.row,o.column,l.row,l.column)},d.prototype.moveBy=function(r,o){this.start.row+=r,this.start.column+=o,this.end.row+=r,this.end.column+=o},d}();a.fromPoints=function(d,r){return new a(d.row,d.column,r.row,r.column)},a.comparePoints=function(d,r){return d.row-r.row||d.column-r.column},t.Range=a});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var a=e("./oop"),d=function(){var r={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};r.PRINTABLE_KEYS[173]="-";var o,l;for(l in r.FUNCTION_KEYS)o=r.FUNCTION_KEYS[l].toLowerCase(),r[o]=parseInt(l,10);for(l in r.PRINTABLE_KEYS)o=r.PRINTABLE_KEYS[l].toLowerCase(),r[o]=parseInt(l,10);return a.mixin(r,r.MODIFIER_KEYS),a.mixin(r,r.PRINTABLE_KEYS),a.mixin(r,r.FUNCTION_KEYS),r.enter=r.return,r.escape=r.esc,r.del=r.delete,function(){for(var u=["cmd","ctrl","alt","shift"],i=Math.pow(2,u.length);i--;)r.KEY_MODS[i]=u.filter(function(s){return i&r.KEY_MODS[s]}).join("-")+"-"}(),r.KEY_MODS[0]="",r.KEY_MODS[-1]="input-",r}();a.mixin(t,d),t.default=t,t.keyCodeToString=function(r){var o=d[r];return typeof o!="string"&&(o=String.fromCharCode(r)),o.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("./keys"),d=e("./useragent"),r=null,o=0,l;function u(){l=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return l={passive:!1},!0}})}catch{}}function i(){return l==null&&u(),l}function s(m,y,C){this.elem=m,this.type=y,this.callback=C}s.prototype.destroy=function(){h(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var f=t.addListener=function(m,y,C,S){m.addEventListener(y,C,i()),S&&S.$toDestroy.push(new s(m,y,C))},h=t.removeListener=function(m,y,C){m.removeEventListener(y,C,i())};t.stopEvent=function(m){return t.stopPropagation(m),t.preventDefault(m),!1},t.stopPropagation=function(m){m.stopPropagation&&m.stopPropagation()},t.preventDefault=function(m){m.preventDefault&&m.preventDefault()},t.getButton=function(m){return m.type=="dblclick"?0:m.type=="contextmenu"||d.isMac&&m.ctrlKey&&!m.altKey&&!m.shiftKey?2:m.button},t.capture=function(m,y,C){var S=m&&m.ownerDocument||document;function D(g){y&&y(g),C&&C(g),h(S,"mousemove",y),h(S,"mouseup",D),h(S,"dragstart",D)}return f(S,"mousemove",y),f(S,"mouseup",D),f(S,"dragstart",D),D},t.addMouseWheelListener=function(m,y,C){f(m,"wheel",function(S){var D=.15,g=S.deltaX||0,b=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=g*D,S.wheelY=b*D;break;case S.DOM_DELTA_LINE:var x=15;S.wheelX=g*x,S.wheelY=b*x;break;case S.DOM_DELTA_PAGE:var E=150;S.wheelX=g*E,S.wheelY=b*E;break}y(S)},C)},t.addMultiMouseDownListener=function(m,y,C,S,D){var g=0,b,x,E,T={2:"dblclick",3:"tripleclick",4:"quadclick"};function M(w){if(t.getButton(w)!==0?g=0:w.detail>1?(g++,g>4&&(g=1)):g=1,d.isIE){var F=Math.abs(w.clientX-b)>5||Math.abs(w.clientY-x)>5;(!E||F)&&(g=1),E&&clearTimeout(E),E=setTimeout(function(){E=null},y[g-1]||600),g==1&&(b=w.clientX,x=w.clientY)}if(w._clicks=g,C[S]("mousedown",w),g>4)g=0;else if(g>1)return C[S](T[g],w)}Array.isArray(m)||(m=[m]),m.forEach(function(w){f(w,"mousedown",M,D)})};var p=function(m){return 0|(m.ctrlKey?1:0)|(m.altKey?2:0)|(m.shiftKey?4:0)|(m.metaKey?8:0)};t.getModifierString=function(m){return a.KEY_MODS[p(m)]};function c(m,y,C){var S=p(y);if(!d.isMac&&r){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(S|=8),r.altGr)if((3&S)!=3)r.altGr=0;else return;if(C===18||C===17){var D="location"in y?y.location:y.keyLocation;if(C===17&&D===1)r[C]==1&&(o=y.timeStamp);else if(C===18&&S===3&&D===2){var g=y.timeStamp-o;g<50&&(r.altGr=!0)}}}if(C in a.MODIFIER_KEYS&&(C=-1),!S&&C===13){var D="location"in y?y.location:y.keyLocation;if(D===3&&(m(y,S,-C),y.defaultPrevented))return}if(d.isChromeOS&&S&8){if(m(y,S,C),y.defaultPrevented)return;S&=-9}return!S&&!(C in a.FUNCTION_KEYS)&&!(C in a.PRINTABLE_KEYS)?!1:m(y,S,C)}t.addCommandKeyListener=function(m,y,C){var S=null;f(m,"keydown",function(D){r[D.keyCode]=(r[D.keyCode]||0)+1;var g=c(y,D,D.keyCode);return S=D.defaultPrevented,g},C),f(m,"keypress",function(D){S&&(D.ctrlKey||D.altKey||D.shiftKey||D.metaKey)&&(t.stopEvent(D),S=null)},C),f(m,"keyup",function(D){r[D.keyCode]=null},C),r||(_(),f(window,"focus",_))};function _(){r=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!d.isOldIE){var v=1;t.nextTick=function(m,y){y=y||window;var C="zero-timeout-message-"+v++,S=function(D){D.data==C&&(t.stopPropagation(D),h(y,"message",S),m())};f(y,"message",S),y.postMessage(C,"*")}}t.$idleBlocked=!1,t.onIdle=function(m,y){return setTimeout(function C(){t.$idleBlocked?setTimeout(C,100):m()},y)},t.$idleBlockId=null,t.blockIdle=function(m){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},m||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(m){setTimeout(m,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var a;n.exports={lineMode:!1,pasteCancelled:function(){return a&&a>Date.now()-50?!0:a=!1},cancel:function(){a=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var a=e("../lib/event"),d=e("../config").nls,r=e("../lib/useragent"),o=e("../lib/dom"),l=e("../lib/lang"),u=e("../clipboard"),i=r.isChrome<18,s=r.isIE,f=r.isChrome>63,h=400,p=e("../lib/keys"),c=p.KEY_MODS,_=r.isIOS,v=_?/\s/:/\n/,m=r.isMobile,y;y=function(C,S){var D=o.createElement("textarea");D.className="ace_text-input",D.setAttribute("wrap","off"),D.setAttribute("autocorrect","off"),D.setAttribute("autocapitalize","off"),D.setAttribute("spellcheck","false"),D.style.opacity="0",C.insertBefore(D,C.firstChild);var g=!1,b=!1,x=!1,E=!1,T="";m||(D.style.fontSize="1px");var M=!1,w=!1,F="",L=0,R=0,A=0,I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,H=0;try{var P=document.activeElement===D}catch{}this.setNumberOfExtraLines=function(j){if(I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,j<0){H=0;return}H=j},this.setAriaOptions=function(j){if(j.activeDescendant?(D.setAttribute("aria-haspopup","true"),D.setAttribute("aria-autocomplete",j.inline?"both":"list"),D.setAttribute("aria-activedescendant",j.activeDescendant)):(D.setAttribute("aria-haspopup","false"),D.setAttribute("aria-autocomplete","both"),D.removeAttribute("aria-activedescendant")),j.role&&D.setAttribute("role",j.role),j.setLabel&&(D.setAttribute("aria-roledescription",d("editor")),S.session)){var ie=S.session.selection.cursor.row;D.setAttribute("aria-label",d("Cursor at row $0",[ie+1]))}},this.setAriaOptions({role:"textbox"}),a.addListener(D,"blur",function(j){w||(S.onBlur(j),P=!1)},S),a.addListener(D,"focus",function(j){if(!w){if(P=!0,r.isEdge)try{if(!document.hasFocus())return}catch{}S.onFocus(j),r.isEdge?setTimeout(G):G()}},S),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:S.renderer.enableKeyboardAccessibility}),T||f||this.$focusScroll=="browser")return D.focus({preventScroll:!0});var j=D.style.top;D.style.position="fixed",D.style.top="0px";try{var ie=D.getBoundingClientRect().top!=0}catch{return}var he=[];if(ie)for(var ze=D.parentElement;ze&&ze.nodeType==1;)he.push(ze),ze.setAttribute("ace_nocontext","true"),!ze.parentElement&&ze.getRootNode?ze=ze.getRootNode().host:ze=ze.parentElement;D.focus({preventScroll:!0}),ie&&he.forEach(function(at){at.removeAttribute("ace_nocontext")}),setTimeout(function(){D.style.position="",D.style.top=="0px"&&(D.style.top=j)},0)},this.blur=function(){D.blur()},this.isFocused=function(){return P},S.on("beforeEndOperation",function(){var j=S.curOp,ie=j&&j.command&&j.command.name;if(ie!="insertstring"){var he=ie&&(j.docChanged||j.selectionChanged);x&&he&&(F=D.value="",Rt()),G()}});var q=function(j,ie){for(var he=ie,ze=1;ze<=j-I&&ze<2*H+1;ze++)he+=S.session.getLine(j-ze).length+1;return he},G=_?function(j){if(!(!P||g&&!j||E)){j||(j="");var ie=`
 ab`+j+`cde fg
`;ie!=D.value&&(D.value=F=ie);var he=4,ze=4+(j.length||(S.selection.isEmpty()?0:1));(L!=he||R!=ze)&&D.setSelectionRange(he,ze),L=he,R=ze}}:function(){if(!(x||E)&&!(!P&&!W)){x=!0;var j=0,ie=0,he="";if(S.session){var ze=S.selection,at=ze.getRange(),gt=ze.cursor.row;gt===$+1?(I=$+1,$=I+2*H):gt===I-1?($=I-1,I=$-2*H):(gt<I-1||gt>$+1)&&(I=gt>H?gt-H:0,$=gt>H?gt+H:2*H);for(var Ge=[],$t=I;$t<=$;$t++)Ge.push(S.session.getLine($t));if(he=Ge.join(`
`),j=q(at.start.row,at.start.column),ie=q(at.end.row,at.end.column),at.start.row<I){var nn=S.session.getLine(I-1);j=at.start.row<I-1?0:j,ie+=nn.length+1,he=nn+`
`+he}else if(at.end.row>$){var Ot=S.session.getLine($+1);ie=at.end.row>$+1?Ot.length:at.end.column,ie+=he.length+1,he=he+`
`+Ot}else m&&gt>0&&(he=`
`+he,ie+=1,j+=1);he.length>h&&(j<h&&ie<h?he=he.slice(0,h):(he=`
`,j==ie?j=ie=0:(j=0,ie=1)));var nr=he+`

`;nr!=F&&(D.value=F=nr,L=R=nr.length)}if(W&&(L=D.selectionStart,R=D.selectionEnd),R!=ie||L!=j||D.selectionEnd!=R)try{D.setSelectionRange(j,ie),L=j,R=ie}catch{}x=!1}};this.resetSelection=G,P&&S.onFocus();var B=function(j){return j.selectionStart===0&&j.selectionEnd>=F.length&&j.value===F&&F&&j.selectionEnd!==R},Q=function(j){x||(g?g=!1:B(D)?(S.selectAll(),G()):m&&D.selectionStart!=L&&G())},O=null;this.setInputHandler=function(j){O=j},this.getInputHandler=function(){return O};var W=!1,U=function(j,ie){if(W&&(W=!1),b)return G(),j&&S.onPaste(j),b=!1,"";for(var he=D.selectionStart,ze=D.selectionEnd,at=L,gt=F.length-R,Ge=j,$t=j.length-he,nn=j.length-ze,Ot=0;at>0&&F[Ot]==j[Ot];)Ot++,at--;for(Ge=Ge.slice(Ot),Ot=1;gt>0&&F.length-Ot>L-1&&F[F.length-Ot]==j[j.length-Ot];)Ot++,gt--;$t-=Ot-1,nn-=Ot-1;var nr=Ge.length-Ot+1;if(nr<0&&(at=-nr,nr=0),Ge=Ge.slice(0,nr),!ie&&!Ge&&!$t&&!at&&!gt&&!nn)return"";E=!0;var bu=!1;return r.isAndroid&&Ge==". "&&(Ge="  ",bu=!0),Ge&&!at&&!gt&&!$t&&!nn||M?S.onTextInput(Ge):S.onTextInput(Ge,{extendLeft:at,extendRight:gt,restoreStart:$t,restoreEnd:nn}),E=!1,F=j,L=he,R=ze,A=nn,bu?`
`:Ge},N=function(j){if(x)return xe();if(j&&j.inputType){if(j.inputType=="historyUndo")return S.execCommand("undo");if(j.inputType=="historyRedo")return S.execCommand("redo")}var ie=D.value,he=U(ie,!0);(ie.length>h+100||v.test(he)||m&&L<1&&L==R)&&G()},te=function(j,ie,he){var ze=j.clipboardData||window.clipboardData;if(!(!ze||i)){var at=s||he?"Text":"text/plain";try{return ie?ze.setData(at,ie)!==!1:ze.getData(at)}catch(gt){if(!he)return te(gt,ie,!0)}}},J=function(j,ie){var he=S.getCopyText();if(!he)return a.preventDefault(j);te(j,he)?(_&&(G(he),g=he,setTimeout(function(){g=!1},10)),ie?S.onCut():S.onCopy(),a.preventDefault(j)):(g=!0,D.value=he,D.select(),setTimeout(function(){g=!1,G(),ie?S.onCut():S.onCopy()}))},ye=function(j){J(j,!0)},Ae=function(j){J(j,!1)},we=function(j){var ie=te(j);u.pasteCancelled()||(typeof ie=="string"?(ie&&S.onPaste(ie,j),r.isIE&&setTimeout(G),a.preventDefault(j)):(D.value="",b=!0))};a.addCommandKeyListener(D,S.onCommandKey.bind(S),S),a.addListener(D,"select",Q,S),a.addListener(D,"input",N,S),a.addListener(D,"cut",ye,S),a.addListener(D,"copy",Ae,S),a.addListener(D,"paste",we,S),(!("oncut"in D)||!("oncopy"in D)||!("onpaste"in D))&&a.addListener(C,"keydown",function(j){if(!(r.isMac&&!j.metaKey||!j.ctrlKey))switch(j.keyCode){case 67:Ae(j);break;case 86:we(j);break;case 88:ye(j);break}},S);var ce=function(j){if(!(x||!S.onCompositionStart||S.$readOnly)&&(x={},!M)){j.data&&(x.useTextareaForIME=!1),setTimeout(xe,0),S._signal("compositionStart"),S.on("mousedown",cn);var ie=S.getSelectionRange();ie.end.row=ie.start.row,ie.end.column=ie.start.column,x.markerRange=ie,x.selectionStart=L,S.onCompositionStart(x),x.useTextareaForIME?(F=D.value="",L=0,R=0):(D.msGetInputContext&&(x.context=D.msGetInputContext()),D.getInputContext&&(x.context=D.getInputContext()))}},xe=function(){if(!(!x||!S.onCompositionUpdate||S.$readOnly)){if(M)return cn();if(x.useTextareaForIME)S.onCompositionUpdate(D.value);else{var j=D.value;U(j),x.markerRange&&(x.context&&(x.markerRange.start.column=x.selectionStart=x.context.compositionStartOffset),x.markerRange.end.column=x.markerRange.start.column+R-x.selectionStart+A)}}},Rt=function(j){!S.onCompositionEnd||S.$readOnly||(x=!1,S.onCompositionEnd(),S.off("mousedown",cn),j&&N())};function cn(){w=!0,D.blur(),D.focus(),w=!1}var Jt=l.delayedCall(xe,50).schedule.bind(null,null);function tt(j){j.keyCode==27&&D.value.length<D.selectionStart&&(x||(F=D.value),L=R=-1,G()),Jt()}a.addListener(D,"compositionstart",ce,S),a.addListener(D,"compositionupdate",xe,S),a.addListener(D,"keyup",tt,S),a.addListener(D,"keydown",Jt,S),a.addListener(D,"compositionend",Rt,S),this.getElement=function(){return D},this.setCommandMode=function(j){M=j,D.readOnly=!1},this.setReadOnly=function(j){M||(D.readOnly=j)},this.setCopyWithEmptySelection=function(j){},this.onContextMenu=function(j){W=!0,G(),S._emit("nativecontextmenu",{target:S,domEvent:j}),this.moveToMouse(j,!0)},this.moveToMouse=function(j,ie){T||(T=D.style.cssText),D.style.cssText=(ie?"z-index:100000;":"")+(r.isIE?"opacity:0.1;":"")+"text-indent: -"+(L+R)*S.renderer.characterWidth*.5+"px;";var he=S.container.getBoundingClientRect(),ze=o.computedStyle(S.container),at=he.top+(parseInt(ze.borderTopWidth)||0),gt=he.left+(parseInt(he.borderLeftWidth)||0),Ge=he.bottom-at-D.clientHeight-2,$t=function(nn){o.translate(D,nn.clientX-gt-2,Math.min(nn.clientY-at-2,Ge))};$t(j),j.type=="mousedown"&&(S.renderer.$isMousePressed=!0,clearTimeout(le),r.isWin&&a.capture(S.container,$t,ge))},this.onContextMenuClose=ge;var le;function ge(){clearTimeout(le),le=setTimeout(function(){T&&(D.style.cssText=T,T=""),S.renderer.$isMousePressed=!1,S.renderer.$keepTextAreaAtCursor&&S.renderer.$moveTextAreaToCursor()},0)}var fe=function(j){S.textInput.onContextMenu(j),ge()};a.addListener(D,"mouseup",fe,S),a.addListener(D,"mousedown",function(j){j.preventDefault(),ge()},S),a.addListener(S.renderer.scroller,"contextmenu",fe,S),a.addListener(D,"contextmenu",fe,S),_&&ae(C,S,D);function ae(j,ie,he){var ze=null,at=!1;he.addEventListener("keydown",function(Ge){ze&&clearTimeout(ze),at=!0},!0),he.addEventListener("keyup",function(Ge){ze=setTimeout(function(){at=!1},100)},!0);var gt=function(Ge){if(document.activeElement===he&&!(at||x||ie.$mouseHandler.isMousePressed)&&!g){var $t=he.selectionStart,nn=he.selectionEnd,Ot=null,nr=0;if($t==0?Ot=p.up:$t==1?Ot=p.home:nn>R&&F[nn]==`
`?Ot=p.end:$t<L&&F[$t-1]==" "?(Ot=p.left,nr=c.option):$t<L||$t==L&&R!=L&&$t==nn?Ot=p.left:nn>R&&F.slice(0,nn).split(`
`).length>2?Ot=p.down:nn>R&&F[nn-1]==" "?(Ot=p.right,nr=c.option):(nn>R||nn==R&&R!=L&&$t==nn)&&(Ot=p.right),$t!==nn&&(nr|=c.shift),Ot){var bu=ie.onCommandKey({},nr,Ot);if(!bu&&ie.commands){Ot=p.keyCodeToString(Ot);var ox=ie.commands.findKeyCommand(nr,Ot);ox&&ie.execCommand(ox)}L=$t,R=nn,G("")}}};document.addEventListener("selectionchange",gt),ie.on("destroy",function(){document.removeEventListener("selectionchange",gt)})}this.destroy=function(){D.parentElement&&D.parentElement.removeChild(D)}},t.TextInput=y,t.$setUserAgentForTests=function(C,S){m=C,_=S}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("../lib/useragent"),d=0,r=550,o=function(){function i(s){s.$clickSelection=null;var f=s.editor;f.setDefaultHandler("mousedown",this.onMouseDown.bind(s)),f.setDefaultHandler("dblclick",this.onDoubleClick.bind(s)),f.setDefaultHandler("tripleclick",this.onTripleClick.bind(s)),f.setDefaultHandler("quadclick",this.onQuadClick.bind(s)),f.setDefaultHandler("mousewheel",this.onMouseWheel.bind(s));var h=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];h.forEach(function(p){s[p]=this[p]},this),s.selectByLines=this.extendSelectionBy.bind(s,"getLineRange"),s.selectByWords=this.extendSelectionBy.bind(s,"getWordRange")}return i.prototype.onMouseDown=function(s){var f=s.inSelection(),h=s.getDocumentPosition();this.mousedownEvent=s;var p=this.editor,c=s.getButton();if(c!==0){var _=p.getSelectionRange(),v=_.isEmpty();(v||c==1)&&p.selection.moveToPosition(h),c==2&&(p.textInput.onContextMenu(s.domEvent),a.isMozilla||s.preventDefault());return}if(this.mousedownEvent.time=Date.now(),f&&!p.isFocused()&&(p.focus(),this.$focusTimeout&&!this.$clickSelection&&!p.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(s);return}return this.captureMouse(s),this.startSelect(h,s.domEvent._clicks>1),s.preventDefault()},i.prototype.startSelect=function(s,f){s=s||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var h=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?h.selection.selectToPosition(s):f||h.selection.moveToPosition(s),f||this.select(),h.setStyle("ace_selecting"),this.setState("select"))},i.prototype.select=function(){var s,f=this.editor,h=f.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var p=this.$clickSelection.comparePoint(h);if(p==-1)s=this.$clickSelection.end;else if(p==1)s=this.$clickSelection.start;else{var c=u(this.$clickSelection,h);h=c.cursor,s=c.anchor}f.selection.setSelectionAnchor(s.row,s.column)}f.selection.selectToPosition(h),f.renderer.scrollCursorIntoView()},i.prototype.extendSelectionBy=function(s){var f,h=this.editor,p=h.renderer.screenToTextCoordinates(this.x,this.y),c=h.selection[s](p.row,p.column);if(this.$clickSelection){var _=this.$clickSelection.comparePoint(c.start),v=this.$clickSelection.comparePoint(c.end);if(_==-1&&v<=0)f=this.$clickSelection.end,(c.end.row!=p.row||c.end.column!=p.column)&&(p=c.start);else if(v==1&&_>=0)f=this.$clickSelection.start,(c.start.row!=p.row||c.start.column!=p.column)&&(p=c.end);else if(_==-1&&v==1)p=c.end,f=c.start;else{var m=u(this.$clickSelection,p);p=m.cursor,f=m.anchor}h.selection.setSelectionAnchor(f.row,f.column)}h.selection.selectToPosition(p),h.renderer.scrollCursorIntoView()},i.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},i.prototype.focusWait=function(){var s=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),f=Date.now();(s>d||f-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},i.prototype.onDoubleClick=function(s){var f=s.getDocumentPosition(),h=this.editor,p=h.session,c=p.getBracketRange(f);c?(c.isEmpty()&&(c.start.column--,c.end.column++),this.setState("select")):(c=h.selection.getWordRange(f.row,f.column),this.setState("selectByWords")),this.$clickSelection=c,this.select()},i.prototype.onTripleClick=function(s){var f=s.getDocumentPosition(),h=this.editor;this.setState("selectByLines");var p=h.getSelectionRange();p.isMultiLine()&&p.contains(f.row,f.column)?(this.$clickSelection=h.selection.getLineRange(p.start.row),this.$clickSelection.end=h.selection.getLineRange(p.end.row).end):this.$clickSelection=h.selection.getLineRange(f.row),this.select()},i.prototype.onQuadClick=function(s){var f=this.editor;f.selectAll(),this.$clickSelection=f.getSelectionRange(),this.setState("selectAll")},i.prototype.onMouseWheel=function(s){if(!s.getAccelKey()){s.getShiftKey()&&s.wheelY&&!s.wheelX&&(s.wheelX=s.wheelY,s.wheelY=0);var f=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var h=this.$lastScroll,p=s.domEvent.timeStamp,c=p-h.t,_=c?s.wheelX/c:h.vx,v=c?s.wheelY/c:h.vy;c<r&&(_=(_+h.vx)/2,v=(v+h.vy)/2);var m=Math.abs(_/v),y=!1;if(m>=1&&f.renderer.isScrollableBy(s.wheelX*s.speed,0)&&(y=!0),m<=1&&f.renderer.isScrollableBy(0,s.wheelY*s.speed)&&(y=!0),y)h.allowed=p;else if(p-h.allowed<r){var C=Math.abs(_)<=1.5*Math.abs(h.vx)&&Math.abs(v)<=1.5*Math.abs(h.vy);C?(y=!0,h.allowed=p):h.allowed=0}if(h.t=p,h.vx=_,h.vy=v,y)return f.renderer.scrollBy(s.wheelX*s.speed,s.wheelY*s.speed),s.stop()}},i}();o.prototype.selectEnd=o.prototype.selectByLinesEnd,o.prototype.selectAllEnd=o.prototype.selectByLinesEnd,o.prototype.selectByWordsEnd=o.prototype.selectByLinesEnd,t.DefaultHandlers=o;function l(i,s,f,h){return Math.sqrt(Math.pow(f-i,2)+Math.pow(h-s,2))}function u(i,s){if(i.start.row==i.end.row)var f=2*s.column-i.start.column-i.end.column;else if(i.start.row==i.end.row-1&&!i.start.column&&!i.end.column)var f=s.column-4;else var f=2*s.row-i.start.row-i.end.row;return f<0?{cursor:i.start,anchor:i.end}:{cursor:i.end,anchor:i.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,n){t.preventParentScroll=function(d){d.stopPropagation();var r=d.currentTarget,o=r.scrollHeight>r.clientHeight;o||d.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var c=function(_,v){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(m[C]=y[C])},c(_,v)};return function(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");c(_,v);function m(){this.constructor=_}_.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}}(),d=this&&this.__values||function(c){var _=typeof Symbol=="function"&&Symbol.iterator,v=_&&c[_],m=0;if(v)return v.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&m>=c.length&&(c=void 0),{value:c&&c[m++],done:!c}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},r=e("./lib/dom"),o=e("./lib/event"),l=e("./range").Range,u=e("./lib/scroll").preventParentScroll,i="ace_tooltip",s=function(){function c(_){this.isOpen=!1,this.$element=null,this.$parentNode=_}return c.prototype.$init=function(){return this.$element=r.createElement("div"),this.$element.className=i,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},c.prototype.getElement=function(){return this.$element||this.$init()},c.prototype.setText=function(_){this.getElement().textContent=_},c.prototype.setHtml=function(_){this.getElement().innerHTML=_},c.prototype.setPosition=function(_,v){this.getElement().style.left=_+"px",this.getElement().style.top=v+"px"},c.prototype.setClassName=function(_){r.addCssClass(this.getElement(),_)},c.prototype.setTheme=function(_){this.$element.className=i+" "+(_.isDark?"ace_dark ":"")+(_.cssClass||"")},c.prototype.show=function(_,v,m){_!=null&&this.setText(_),v!=null&&m!=null&&this.setPosition(v,m),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},c.prototype.hide=function(_){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=i,this.isOpen=!1)},c.prototype.getHeight=function(){return this.getElement().offsetHeight},c.prototype.getWidth=function(){return this.getElement().offsetWidth},c.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},c}(),f=function(){function c(){this.popups=[]}return c.prototype.addPopup=function(_){this.popups.push(_),this.updatePopups()},c.prototype.removePopup=function(_){var v=this.popups.indexOf(_);v!==-1&&(this.popups.splice(v,1),this.updatePopups())},c.prototype.updatePopups=function(){var _,v,m,y;this.popups.sort(function(M,w){return w.priority-M.priority});var C=[];try{for(var S=d(this.popups),D=S.next();!D.done;D=S.next()){var g=D.value,b=!0;try{for(var x=(m=void 0,d(C)),E=x.next();!E.done;E=x.next()){var T=E.value;if(this.doPopupsOverlap(T,g)){b=!1;break}}}catch(M){m={error:M}}finally{try{E&&!E.done&&(y=x.return)&&y.call(x)}finally{if(m)throw m.error}}b?C.push(g):g.hide()}}catch(M){_={error:M}}finally{try{D&&!D.done&&(v=S.return)&&v.call(S)}finally{if(_)throw _.error}}},c.prototype.doPopupsOverlap=function(_,v){var m=_.getElement().getBoundingClientRect(),y=v.getElement().getBoundingClientRect();return m.left<y.right&&m.right>y.left&&m.top<y.bottom&&m.bottom>y.top},c}(),h=new f;t.popupManager=h,t.Tooltip=s;var p=function(c){a(_,c);function _(v){v===void 0&&(v=document.body);var m=c.call(this,v)||this;m.timeout=void 0,m.lastT=0,m.idleTime=350,m.lastEvent=void 0,m.onMouseOut=m.onMouseOut.bind(m),m.onMouseMove=m.onMouseMove.bind(m),m.waitForHover=m.waitForHover.bind(m),m.hide=m.hide.bind(m);var y=m.getElement();return y.style.whiteSpace="pre-wrap",y.style.pointerEvents="auto",y.addEventListener("mouseout",m.onMouseOut),y.tabIndex=-1,y.addEventListener("blur",function(){y.contains(document.activeElement)||this.hide()}.bind(m)),y.addEventListener("wheel",u),m}return _.prototype.addToEditor=function(v){v.on("mousemove",this.onMouseMove),v.on("mousedown",this.hide),v.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},_.prototype.removeFromEditor=function(v){v.off("mousemove",this.onMouseMove),v.off("mousedown",this.hide),v.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},_.prototype.onMouseMove=function(v,m){this.lastEvent=v,this.lastT=Date.now();var y=m.$mouseHandler.isMousePressed;if(this.isOpen){var C=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(C.row,C.column)||y||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||y||(this.lastEvent=v,this.timeout=setTimeout(this.waitForHover,this.idleTime))},_.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var v=Date.now()-this.lastT;if(this.idleTime-v>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-v);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},_.prototype.isOutsideOfText=function(v){var m=v.editor,y=v.getDocumentPosition(),C=m.session.getLine(y.row);if(y.column==C.length){var S=m.renderer.pixelToScreenCoordinates(v.clientX,v.clientY),D=m.session.documentToScreenPosition(y.row,y.column);if(D.column!=S.column||D.row!=S.row)return!0}return!1},_.prototype.setDataProvider=function(v){this.$gatherData=v},_.prototype.showForRange=function(v,m,y,C){var S=10;if(!(C&&C!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var D=v.renderer;this.isOpen||(h.addPopup(this),this.$registerCloseEvents(),this.setTheme(D.theme)),this.isOpen=!0,this.addMarker(m,v.session),this.range=l.fromPoints(m.start,m.end);var g=D.textToScreenCoordinates(m.start.row,m.start.column),b=D.scroller.getBoundingClientRect();g.pageX<b.left&&(g.pageX=b.left);var x=this.getElement();x.innerHTML="",x.appendChild(y),x.style.maxHeight="",x.style.display="block";var E=x.clientHeight,T=x.clientWidth,M=window.innerHeight-g.pageY-D.lineHeight,w=!0;g.pageY-E<0&&g.pageY<M&&(w=!1),x.style.maxHeight=(w?g.pageY:M)-S+"px",x.style.top=w?"":g.pageY+D.lineHeight+"px",x.style.bottom=w?window.innerHeight-g.pageY+"px":"",x.style.left=Math.min(g.pageX,window.innerWidth-T-S)+"px"}},_.prototype.addMarker=function(v,m){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=m,this.marker=m&&m.addMarker(v,"ace_highlight-marker","text")},_.prototype.hide=function(v){!v&&document.activeElement==this.getElement()||v&&v.target&&(v.type!="keydown"||v.ctrlKey||v.metaKey)&&this.$element.contains(v.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,h.removePopup(this)))},_.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},_.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},_.prototype.onMouseOut=function(v){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!v.relatedTarget||this.getElement().contains(v.relatedTarget)||v&&v.currentTarget.contains(v.relatedTarget)||v.relatedTarget.classList.contains("ace_content")||this.hide())},_}(s);t.HoverTooltip=p});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var f=function(h,p){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&(c[v]=_[v])},f(h,p)};return function(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");f(h,p);function c(){this.constructor=h}h.prototype=p===null?Object.create(p):(c.prototype=p.prototype,new c)}}(),d=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,p=h&&f[h],c=0;if(p)return p.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&c>=f.length&&(f=void 0),{value:f&&f[c++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},r=e("../lib/dom"),o=e("../lib/event"),l=e("../tooltip").Tooltip,u=e("../config").nls;function i(f){var h=f.editor,p=h.renderer.$gutterLayer,c=new s(h);f.editor.setDefaultHandler("guttermousedown",function(S){if(!(!h.isFocused()||S.getButton()!=0)){var D=p.getRegion(S);if(D!="foldWidgets"){var g=S.getDocumentPosition().row,b=h.session.selection;if(S.getShiftKey())b.selectTo(g,0);else{if(S.domEvent.detail==2)return h.selectAll(),S.preventDefault();f.$clickSelection=h.selection.getLineRange(g)}return f.setState("selectByLines"),f.captureMouse(S),S.preventDefault()}}});var _,v;function m(){var S=v.getDocumentPosition().row,D=h.session.getLength();if(S==D){var g=h.renderer.pixelToScreenCoordinates(0,v.y).row,b=v.$pos;if(g>h.session.documentToScreenRow(b.row,b.column))return y()}if(c.showTooltip(S),!!c.isOpen)if(h.on("mousewheel",y),f.$tooltipFollowsMouse)C(v);else{var x=v.getGutterRow(),E=p.$lines.get(x);if(E){var T=E.element.querySelector(".ace_gutter_annotation"),M=T.getBoundingClientRect(),w=c.getElement().style;w.left=M.right+"px",w.top=M.bottom+"px"}else C(v)}}function y(){_&&(_=clearTimeout(_)),c.isOpen&&(c.hideTooltip(),h.off("mousewheel",y))}function C(S){c.setPosition(S.x,S.y)}f.editor.setDefaultHandler("guttermousemove",function(S){var D=S.domEvent.target||S.domEvent.srcElement;if(r.hasCssClass(D,"ace_fold-widget"))return y();c.isOpen&&f.$tooltipFollowsMouse&&C(S),v=S,!_&&(_=setTimeout(function(){_=null,v&&!f.isMousePressed?m():y()},50))}),o.addListener(h.renderer.$gutter,"mouseout",function(S){v=null,!(!c.isOpen||_)&&(_=setTimeout(function(){_=null,y()},50))},h),h.on("changeSession",y),h.on("input",y)}t.GutterHandler=i;var s=function(f){a(h,f);function h(p){var c=f.call(this,p.container)||this;return c.editor=p,c}return h.prototype.setPosition=function(p,c){var _=window.innerWidth||document.documentElement.clientWidth,v=window.innerHeight||document.documentElement.clientHeight,m=this.getWidth(),y=this.getHeight();p+=15,c+=15,p+m>_&&(p-=p+m-_),c+y>v&&(c-=20+y),l.prototype.setPosition.call(this,p,c)},Object.defineProperty(h,"annotationLabels",{get:function(){return{error:{singular:u("error"),plural:u("errors")},warning:{singular:u("warning"),plural:u("warnings")},info:{singular:u("information message"),plural:u("information messages")}}},enumerable:!1,configurable:!0}),h.prototype.showTooltip=function(p){var c=this.editor.renderer.$gutterLayer,_=c.$annotations[p],v;_?v={text:Array.from(_.text),type:Array.from(_.type)}:v={text:[],type:[]};var m=c.session.getFoldLine(p);if(m&&c.$showFoldedAnnotations){for(var y={error:[],warning:[],info:[]},C,S=p+1;S<=m.end.row;S++)if(c.$annotations[S])for(var D=0;D<c.$annotations[S].text.length;D++){var g=c.$annotations[S].type[D];if(y[g].push(c.$annotations[S].text[D]),g==="error"){C="error_fold";continue}if(g==="warning"){C="warning_fold";continue}}if(C==="error_fold"||C==="warning_fold"){var b="".concat(h.annotationsToSummaryString(y)," in folded code.");v.text.push(b),v.type.push(C)}}if(v.text.length===0)return this.hide();for(var x={error:[],warning:[],info:[]},E=c.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",S=0;S<v.text.length;S++){var T="<span class='ace_".concat(v.type[S]," ").concat(E,"' aria-label='").concat(h.annotationLabels[v.type[S].replace("_fold","")].singular,"' role=img> </span> ").concat(v.text[S]);x[v.type[S].replace("_fold","")].push(T)}var M=[].concat(x.error,x.warning,x.info).join("<br>");this.setHtml(M),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},h.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},h.annotationsToSummaryString=function(p){var c,_,v=[],m=["error","warning","info"];try{for(var y=d(m),C=y.next();!C.done;C=y.next()){var S=C.value;if(p[S].length){var D=p[S].length===1?h.annotationLabels[S].singular:h.annotationLabels[S].plural;v.push("".concat(p[S].length," ").concat(D))}}}catch(g){c={error:g}}finally{try{C&&!C.done&&(_=y.return)&&_.call(y)}finally{if(c)throw c.error}}return v.join(", ")},h}(l);t.GutterTooltip=s});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("../lib/event"),d=e("../lib/useragent"),r=function(){function o(l,u){this.speed,this.wheelX,this.wheelY,this.domEvent=l,this.editor=u,this.x=this.clientX=l.clientX,this.y=this.clientY=l.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return o.prototype.stopPropagation=function(){a.stopPropagation(this.domEvent),this.propagationStopped=!0},o.prototype.preventDefault=function(){a.preventDefault(this.domEvent),this.defaultPrevented=!0},o.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},o.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},o.prototype.getGutterRow=function(){var l=this.getDocumentPosition().row,u=this.editor.session.documentToScreenRow(l,0),i=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return u-i},o.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var l=this.editor,u=l.getSelectionRange();if(u.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=u.contains(i.row,i.column)}return this.$inSelection},o.prototype.getButton=function(){return a.getButton(this.domEvent)},o.prototype.getShiftKey=function(){return this.domEvent.shiftKey},o.prototype.getAccelKey=function(){return d.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},o}();t.MouseEvent=r});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("../lib/dom"),d=e("../lib/event"),r=e("../lib/useragent"),o=200,l=200,u=5;function i(f){var h=f.editor,p=a.createElement("div");p.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",p.textContent="\xA0";var c=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];c.forEach(function(q){f[q]=this[q]},this),h.on("mousedown",this.onMouseDown.bind(f));var _=h.container,v,m,y,C,S,D,g=0,b,x,E,T,M;this.onDragStart=function(q){if(this.cancelDrag||!_.draggable){var G=this;return setTimeout(function(){G.startSelect(),G.captureMouse(q)},0),q.preventDefault()}S=h.getSelectionRange();var B=q.dataTransfer;B.effectAllowed=h.getReadOnly()?"copy":"copyMove",h.container.appendChild(p),B.setDragImage&&B.setDragImage(p,0,0),setTimeout(function(){h.container.removeChild(p)}),B.clearData(),B.setData("Text",h.session.getTextRange()),x=!0,this.setState("drag")},this.onDragEnd=function(q){if(_.draggable=!1,x=!1,this.setState(null),!h.getReadOnly()){var G=q.dataTransfer.dropEffect;!b&&G=="move"&&h.session.remove(h.getSelectionRange()),h.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(q){if(!(h.getReadOnly()||!H(q.dataTransfer)))return m=q.clientX,y=q.clientY,v||R(),g++,q.dataTransfer.dropEffect=b=P(q),d.preventDefault(q)},this.onDragOver=function(q){if(!(h.getReadOnly()||!H(q.dataTransfer)))return m=q.clientX,y=q.clientY,v||(R(),g++),I!==null&&(I=null),q.dataTransfer.dropEffect=b=P(q),d.preventDefault(q)},this.onDragLeave=function(q){if(g--,g<=0&&v)return A(),b=null,d.preventDefault(q)},this.onDrop=function(q){if(D){var G=q.dataTransfer;if(x)switch(b){case"move":S.contains(D.row,D.column)?S={start:D,end:D}:S=h.moveText(S,D);break;case"copy":S=h.moveText(S,D,!0);break}else{var B=G.getData("Text");S={start:D,end:h.session.insert(D,B)},h.focus(),b=null}return A(),d.preventDefault(q)}},d.addListener(_,"dragstart",this.onDragStart.bind(f),h),d.addListener(_,"dragend",this.onDragEnd.bind(f),h),d.addListener(_,"dragenter",this.onDragEnter.bind(f),h),d.addListener(_,"dragover",this.onDragOver.bind(f),h),d.addListener(_,"dragleave",this.onDragLeave.bind(f),h),d.addListener(_,"drop",this.onDrop.bind(f),h);function w(q,G){var B=Date.now(),Q=!G||q.row!=G.row,O=!G||q.column!=G.column;if(!T||Q||O)h.moveCursorToPosition(q),T=B,M={x:m,y};else{var W=s(M.x,M.y,m,y);W>u?T=null:B-T>=l&&(h.renderer.scrollCursorIntoView(),T=null)}}function F(q,G){var B=Date.now(),Q=h.renderer.layerConfig.lineHeight,O=h.renderer.layerConfig.characterWidth,W=h.renderer.scroller.getBoundingClientRect(),U={x:{left:m-W.left,right:W.right-m},y:{top:y-W.top,bottom:W.bottom-y}},N=Math.min(U.x.left,U.x.right),te=Math.min(U.y.top,U.y.bottom),J={row:q.row,column:q.column};N/O<=2&&(J.column+=U.x.left<U.x.right?-3:2),te/Q<=1&&(J.row+=U.y.top<U.y.bottom?-1:1);var ye=q.row!=J.row,Ae=q.column!=J.column,we=!G||q.row!=G.row;ye||Ae&&!we?E?B-E>=o&&h.renderer.scrollCursorIntoView(J):E=B:E=null}function L(){var q=D;D=h.renderer.screenToTextCoordinates(m,y),w(D,q),F(D,q)}function R(){S=h.selection.toOrientedRange(),v=h.session.addMarker(S,"ace_selection",h.getSelectionStyle()),h.clearSelection(),h.isFocused()&&h.renderer.$cursorLayer.setBlinking(!1),clearInterval(C),L(),C=setInterval(L,20),g=0,d.addListener(document,"mousemove",$)}function A(){clearInterval(C),h.session.removeMarker(v),v=null,h.selection.fromOrientedRange(S),h.isFocused()&&!x&&h.$resetCursorStyle(),S=null,D=null,g=0,E=null,T=null,d.removeListener(document,"mousemove",$)}var I=null;function $(){I==null&&(I=setTimeout(function(){I!=null&&v&&A()},20))}function H(q){var G=q.types;return!G||Array.prototype.some.call(G,function(B){return B=="text/plain"||B=="Text"})}function P(q){var G=["copy","copymove","all","uninitialized"],B=["move","copymove","linkmove","all","uninitialized"],Q=r.isMac?q.altKey:q.ctrlKey,O="uninitialized";try{O=q.dataTransfer.effectAllowed.toLowerCase()}catch{}var W="none";return Q&&G.indexOf(O)>=0?W="copy":B.indexOf(O)>=0?W="move":G.indexOf(O)>=0&&(W="copy"),W}}(function(){this.dragWait=function(){var f=Date.now()-this.mousedownEvent.time;f>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var f=this.editor.container;f.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(f){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var f=this.editor,h=f.container;h.draggable=!0,f.renderer.$cursorLayer.setBlinking(!1),f.setStyle("ace_dragging");var p=r.isWin?"default":"move";f.renderer.setCursorStyle(p),this.setState("dragReady")},this.onMouseDrag=function(f){var h=this.editor.container;if(r.isIE&&this.state=="dragReady"){var p=s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);p>3&&h.dragDrop()}if(this.state==="dragWait"){var p=s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);p>0&&(h.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(f){if(this.$dragEnabled){this.mousedownEvent=f;var h=this.editor,p=f.inSelection(),c=f.getButton(),_=f.domEvent.detail||1;if(_===1&&c===0&&p){if(f.editor.inMultiSelectMode&&(f.getAccelKey()||f.getShiftKey()))return;this.mousedownEvent.time=Date.now();var v=f.domEvent.target||f.domEvent.srcElement;if("unselectable"in v&&(v.unselectable="on"),h.getDragDelay()){if(r.isWebKit){this.cancelDrag=!0;var m=h.container;m.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(f,this.onMouseDrag.bind(this)),f.defaultPrevented=!0}}}}).call(i.prototype);function s(f,h,p,c){return Math.sqrt(Math.pow(p-f,2)+Math.pow(c-h,2))}t.DragdropHandler=i});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var a=e("./mouse_event").MouseEvent,d=e("../lib/event"),r=e("../lib/dom");t.addTouchListeners=function(o,l){var u="scroll",i,s,f,h,p,c,_=0,v,m=0,y=0,C=0,S,D;function g(){var w=window.navigator&&window.navigator.clipboard,F=!1,L=function(){var A=l.getCopyText(),I=l.session.getUndoManager().hasUndo();D.replaceChild(r.buildDom(F?["span",!A&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],A&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],A&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],w&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],I&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),D.firstChild)},R=function(A){var I=A.target.getAttribute("action");if(I=="more"||!F)return F=!F,L();I=="paste"?w.readText().then(function($){l.execCommand(I,$)}):I&&((I=="cut"||I=="copy")&&(w?w.writeText(l.getCopyText()):document.execCommand("copy")),l.execCommand(I)),D.firstChild.style.display="none",F=!1,I!="openCommandPalette"&&l.focus()};D=r.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(A){u="menu",A.stopPropagation(),A.preventDefault(),l.textInput.focus()},ontouchend:function(A){A.stopPropagation(),A.preventDefault(),R(A)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],l.container)}function b(){D||g();var w=l.selection.cursor,F=l.renderer.textToScreenCoordinates(w.row,w.column),L=l.renderer.textToScreenCoordinates(0,0).pageX,R=l.renderer.scrollLeft,A=l.container.getBoundingClientRect();D.style.top=F.pageY-A.top-3+"px",F.pageX-A.left<A.width-70?(D.style.left="",D.style.right="10px"):(D.style.right="",D.style.left=L+R-A.left+"px"),D.style.display="",D.firstChild.style.display="none",l.on("input",x)}function x(w){D&&(D.style.display="none"),l.off("input",x)}function E(){p=null,clearTimeout(p);var w=l.selection.getRange(),F=w.contains(v.row,v.column);(w.isEmpty()||!F)&&(l.selection.moveToPosition(v),l.selection.selectWord()),u="wait",b()}function T(){p=null,clearTimeout(p),l.selection.moveToPosition(v);var w=m>=2?l.selection.getLineRange(v.row):l.session.getBracketRange(v);w&&!w.isEmpty()?l.selection.setRange(w):l.selection.selectWord(),u="wait"}d.addListener(o,"contextmenu",function(w){if(S){var F=l.textInput.getElement();F.focus()}},l),d.addListener(o,"touchstart",function(w){var F=w.touches;if(p||F.length>1){clearTimeout(p),p=null,f=-1,u="zoom";return}S=l.$mouseHandler.isMousePressed=!0;var L=l.renderer.layerConfig.lineHeight,R=l.renderer.layerConfig.lineHeight,A=w.timeStamp;h=A;var I=F[0],$=I.clientX,H=I.clientY;Math.abs(i-$)+Math.abs(s-H)>L&&(f=-1),i=w.clientX=$,s=w.clientY=H,y=C=0;var P=new a(w,l);if(v=P.getDocumentPosition(),A-f<500&&F.length==1&&!_)m++,w.preventDefault(),w.button=0,T();else{m=0;var q=l.selection.cursor,G=l.selection.isEmpty()?q:l.selection.anchor,B=l.renderer.$cursorLayer.getPixelPosition(q,!0),Q=l.renderer.$cursorLayer.getPixelPosition(G,!0),O=l.renderer.scroller.getBoundingClientRect(),W=l.renderer.layerConfig.offset,U=l.renderer.scrollLeft,N=function(ye,Ae){return ye=ye/R,Ae=Ae/L-.75,ye*ye+Ae*Ae};if(w.clientX<O.left){u="zoom";return}var te=N(w.clientX-O.left-B.left+U,w.clientY-O.top-B.top+W),J=N(w.clientX-O.left-Q.left+U,w.clientY-O.top-Q.top+W);te<3.5&&J<3.5&&(u=te>J?"cursor":"anchor"),J<3.5?u="anchor":te<3.5?u="cursor":u="scroll",p=setTimeout(E,450)}f=A},l),d.addListener(o,"touchend",function(w){S=l.$mouseHandler.isMousePressed=!1,c&&clearInterval(c),u=="zoom"?(u="",_=0):p?(l.selection.moveToPosition(v),_=0,b()):u=="scroll"?(M(),x()):b(),clearTimeout(p),p=null},l),d.addListener(o,"touchmove",function(w){p&&(clearTimeout(p),p=null);var F=w.touches;if(!(F.length>1||u=="zoom")){var L=F[0],R=i-L.clientX,A=s-L.clientY;if(u=="wait")if(R*R+A*A>4)u="cursor";else return w.preventDefault();i=L.clientX,s=L.clientY,w.clientX=L.clientX,w.clientY=L.clientY;var I=w.timeStamp,$=I-h;if(h=I,u=="scroll"){var H=new a(w,l);H.speed=1,H.wheelX=R,H.wheelY=A,10*Math.abs(R)<Math.abs(A)&&(R=0),10*Math.abs(A)<Math.abs(R)&&(A=0),$!=0&&(y=R/$,C=A/$),l._emit("mousewheel",H),H.propagationStopped||(y=C=0)}else{var P=new a(w,l),q=P.getDocumentPosition();u=="cursor"?l.selection.moveCursorToPosition(q):u=="anchor"&&l.selection.setSelectionAnchor(q.row,q.column),l.renderer.scrollCursorIntoView(q),w.preventDefault()}}},l);function M(){_+=60,c=setInterval(function(){_--<=0&&(clearInterval(c),c=null),Math.abs(y)<.01&&(y=0),Math.abs(C)<.01&&(C=0),_<20&&(y=.9*y),_<20&&(C=.9*C);var w=l.session.getScrollTop();l.renderer.scrollBy(10*y,10*C),w==l.session.getScrollTop()&&(_=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var a=e("../lib/event"),d=e("../lib/useragent"),r=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,l=e("./mouse_event").MouseEvent,u=e("./dragdrop_handler").DragdropHandler,i=e("./touch_handler").addTouchListeners,s=e("../config"),f=function(){function h(p){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var c=this;this.editor=p,new r(this),new o(this),new u(this);var _=function(y){var C=!document.hasFocus||!document.hasFocus()||!p.isFocused()&&document.activeElement==(p.textInput&&p.textInput.getElement());C&&window.focus(),p.focus(),setTimeout(function(){p.isFocused()||p.focus()})},v=p.renderer.getMouseEventTarget();a.addListener(v,"click",this.onMouseEvent.bind(this,"click"),p),a.addListener(v,"mousemove",this.onMouseMove.bind(this,"mousemove"),p),a.addMultiMouseDownListener([v,p.renderer.scrollBarV&&p.renderer.scrollBarV.inner,p.renderer.scrollBarH&&p.renderer.scrollBarH.inner,p.textInput&&p.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",p),a.addMouseWheelListener(p.container,this.onMouseWheel.bind(this,"mousewheel"),p),i(p.container,p);var m=p.renderer.$gutter;a.addListener(m,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),p),a.addListener(m,"click",this.onMouseEvent.bind(this,"gutterclick"),p),a.addListener(m,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),p),a.addListener(m,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),p),a.addListener(v,"mousedown",_,p),a.addListener(m,"mousedown",_,p),d.isIE&&p.renderer.scrollBarV&&(a.addListener(p.renderer.scrollBarV.element,"mousedown",_,p),a.addListener(p.renderer.scrollBarH.element,"mousedown",_,p)),p.on("mousemove",function(y){if(!(c.state||c.$dragDelay||!c.$dragEnabled)){var C=p.renderer.screenToTextCoordinates(y.x,y.y),S=p.session.selection.getRange(),D=p.renderer;!S.isEmpty()&&S.insideStart(C.row,C.column)?D.setCursorStyle("default"):D.setCursorStyle("")}},p)}return h.prototype.onMouseEvent=function(p,c){this.editor.session&&this.editor._emit(p,new l(c,this.editor))},h.prototype.onMouseMove=function(p,c){var _=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!_||!_.length||this.editor._emit(p,new l(c,this.editor))},h.prototype.onMouseWheel=function(p,c){var _=new l(c,this.editor);_.speed=this.$scrollSpeed*2,_.wheelX=c.wheelX,_.wheelY=c.wheelY,this.editor._emit(p,_)},h.prototype.setState=function(p){this.state=p},h.prototype.captureMouse=function(p,c){this.x=p.x,this.y=p.y,this.isMousePressed=!0;var _=this.editor,v=this.editor.renderer;v.$isMousePressed=!0;var m=this,y=function(b){if(b){if(d.isWebKit&&!b.which&&m.releaseMouse)return m.releaseMouse();m.x=b.clientX,m.y=b.clientY,c&&c(b),m.mouseEvent=new l(b,m.editor),m.$mouseMoved=!0}},C=function(b){_.off("beforeEndOperation",D),clearInterval(g),_.session&&S(),m[m.state+"End"]&&m[m.state+"End"](b),m.state="",m.isMousePressed=v.$isMousePressed=!1,v.$keepTextAreaAtCursor&&v.$moveTextAreaToCursor(),m.$onCaptureMouseMove=m.releaseMouse=null,b&&m.onMouseEvent("mouseup",b),_.endOperation()},S=function(){m[m.state]&&m[m.state](),m.$mouseMoved=!1};if(d.isOldIE&&p.domEvent.type=="dblclick")return setTimeout(function(){C(p)});var D=function(b){m.releaseMouse&&_.curOp.command.name&&_.curOp.selectionChanged&&(m[m.state+"End"]&&m[m.state+"End"](),m.state="",m.releaseMouse())};_.on("beforeEndOperation",D),_.startOperation({command:{name:"mouse"}}),m.$onCaptureMouseMove=y,m.releaseMouse=a.capture(this.editor.container,y,C);var g=setInterval(S,20)},h.prototype.cancelContextMenu=function(){var p=function(c){c&&c.domEvent&&c.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",p),c&&c.domEvent&&a.stopEvent(c.domEvent))}.bind(this);setTimeout(p,10),this.editor.on("nativecontextmenu",p)},h.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},h}();f.prototype.releaseMouse=null,s.defineOptions(f.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:d.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=f});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../lib/dom"),d=function(){function r(o){o.on("click",function(l){var u=l.getDocumentPosition(),i=o.session,s=i.getFoldAt(u.row,u.column,1);s&&(l.getAccelKey()?i.removeFold(s):i.expandFold(s),l.stop());var f=l.domEvent&&l.domEvent.target;f&&a.hasCssClass(f,"ace_inline_button")&&a.hasCssClass(f,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),o.renderer.scrollCursorIntoView())}),o.on("gutterclick",function(l){var u=o.renderer.$gutterLayer.getRegion(l);if(u=="foldWidgets"){var i=l.getDocumentPosition().row,s=o.session;s.foldWidgets&&s.foldWidgets[i]&&o.session.onFoldWidgetClick(i,l),o.isFocused()||o.focus(),l.stop()}}),o.on("gutterdblclick",function(l){var u=o.renderer.$gutterLayer.getRegion(l);if(u=="foldWidgets"){var i=l.getDocumentPosition().row,s=o.session,f=s.getParentFoldRangeData(i,!0),h=f.range||f.firstRange;if(h){i=h.start.row;var p=s.getFoldAt(i,s.getLine(i).length,1);p?s.removeFold(p):(s.addFold("...",h),o.renderer.scrollCursorIntoView({row:h.start.row,column:0}))}l.stop()}})}return r}();t.FoldHandler=d});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var a=e("../lib/keys"),d=e("../lib/event"),r=function(){function o(l){this.$editor=l,this.$data={editor:l},this.$handlers=[],this.setDefaultHandler(l.commands)}return o.prototype.setDefaultHandler=function(l){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=l,this.addKeyboardHandler(l,0)},o.prototype.setKeyboardHandler=function(l){var u=this.$handlers;if(u[u.length-1]!=l){for(;u[u.length-1]&&u[u.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(u[u.length-1]);this.addKeyboardHandler(l,1)}},o.prototype.addKeyboardHandler=function(l,u){if(l){typeof l=="function"&&!l.handleKeyboard&&(l.handleKeyboard=l);var i=this.$handlers.indexOf(l);i!=-1&&this.$handlers.splice(i,1),u==null?this.$handlers.push(l):this.$handlers.splice(u,0,l),i==-1&&l.attach&&l.attach(this.$editor)}},o.prototype.removeKeyboardHandler=function(l){var u=this.$handlers.indexOf(l);return u==-1?!1:(this.$handlers.splice(u,1),l.detach&&l.detach(this.$editor),!0)},o.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},o.prototype.getStatusText=function(){var l=this.$data,u=l.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(u,l)||""}).filter(Boolean).join(" ")},o.prototype.$callKeyboardHandlers=function(l,u,i,s){for(var f,h=!1,p=this.$editor.commands,c=this.$handlers.length;c--&&(f=this.$handlers[c].handleKeyboard(this.$data,l,u,i,s),!(!(!f||!f.command)&&(f.command=="null"?h=!0:h=p.exec(f.command,this.$editor,f.args,s),h&&s&&l!=-1&&f.passEvent!=!0&&f.command.passEvent!=!0&&d.stopEvent(s),h))););return!h&&l==-1&&(f={command:"insertstring"},h=p.exec("insertstring",this.$editor,u)),h&&this.$editor._signal&&this.$editor._signal("keyboardActivity",f),h},o.prototype.onCommandKey=function(l,u,i){var s=a.keyCodeToString(i);return this.$callKeyboardHandlers(u,s,i,l)},o.prototype.onTextInput=function(l){return this.$callKeyboardHandlers(-1,l)},o}();t.KeyBinding=r});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var a=["\u0621","\u0641"],d=["\u063A","\u064A"],r=0,o=0,l=!1,u=!1,i=!1,s=!1,f=!1,h=!1,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_=0,v=1,m=0,y=1,C=2,S=3,D=4,g=5,b=6,x=7,E=8,T=9,M=10,w=11,F=12,L=13,R=14,A=15,I=16,$=17,H=18,P=[H,H,H,H,H,H,H,H,H,b,g,b,E,g,H,H,H,H,H,H,H,H,H,H,H,H,H,H,g,g,g,b,E,D,D,w,w,w,D,D,D,D,D,M,T,M,T,T,C,C,C,C,C,C,C,C,C,C,T,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,H,H,H,H,H,H,g,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,T,D,w,w,w,w,D,D,D,D,m,D,D,H,D,D,w,w,C,C,D,m,D,D,D,C,m,D,D,D,D,D],q=[E,E,E,E,E,E,E,E,E,E,E,H,H,H,m,y,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E,g,L,R,A,I,$,T,w,w,w,w,w,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,T,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E];function G(U,N,te,J){var ye=r?c:p,Ae=null,we=null,ce=null,xe=0,Rt=null,cn=null,Jt=-1,tt=null,le=null,ge=[];if(!J)for(tt=0,J=[];tt<te;tt++)J[tt]=O(U[tt]);for(o=r,l=!1,u=!1,i=!1,s=!1,le=0;le<te;le++){if(Ae=xe,ge[le]=we=Q(U,J,ge,le),xe=ye[Ae][we],Rt=xe&240,xe&=15,N[le]=ce=ye[xe][5],Rt>0)if(Rt==16){for(tt=Jt;tt<le;tt++)N[tt]=1;Jt=-1}else Jt=-1;if(cn=ye[xe][6],cn)Jt==-1&&(Jt=le);else if(Jt>-1){for(tt=Jt;tt<le;tt++)N[tt]=ce;Jt=-1}J[le]==g&&(N[le]=0),o|=ce}if(s){for(tt=0;tt<te;tt++)if(J[tt]==b){N[tt]=r;for(var fe=tt-1;fe>=0&&J[fe]==E;fe--)N[fe]=r}}}function B(U,N,te){if(!(o<U)){if(U==1&&r==v&&!i){te.reverse();return}for(var J=te.length,ye=0,Ae,we,ce,xe;ye<J;){if(N[ye]>=U){for(Ae=ye+1;Ae<J&&N[Ae]>=U;)Ae++;for(we=ye,ce=Ae-1;we<ce;we++,ce--)xe=te[we],te[we]=te[ce],te[ce]=xe;ye=Ae}ye++}}}function Q(U,N,te,J){var ye=N[J],Ae,we,ce,xe;switch(ye){case m:case y:l=!1;case D:case S:return ye;case C:return l?S:C;case x:return l=!0,u=!0,y;case E:return D;case T:return J<1||J+1>=N.length||(Ae=te[J-1])!=C&&Ae!=S||(we=N[J+1])!=C&&we!=S?D:(l&&(we=S),we==Ae?we:D);case M:return Ae=J>0?te[J-1]:g,Ae==C&&J+1<N.length&&N[J+1]==C?C:D;case w:if(J>0&&te[J-1]==C)return C;if(l)return D;for(xe=J+1,ce=N.length;xe<ce&&N[xe]==w;)xe++;return xe<ce&&N[xe]==C?C:D;case F:for(ce=N.length,xe=J+1;xe<ce&&N[xe]==F;)xe++;if(xe<ce){var Rt=U[J],cn=Rt>=1425&&Rt<=2303||Rt==64286;if(Ae=N[xe],cn&&(Ae==y||Ae==x))return y}return J<1||(Ae=N[J-1])==g?D:te[J-1];case g:return l=!1,i=!0,r;case b:return s=!0,D;case L:case R:case I:case $:case A:l=!1;case H:return D}}function O(U){var N=U.charCodeAt(0),te=N>>8;return te==0?N>191?m:P[N]:te==5?/[\u0591-\u05f4]/.test(U)?y:m:te==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(U)?F:/[\u0660-\u0669\u066b-\u066c]/.test(U)?S:N==1642?w:/[\u06f0-\u06f9]/.test(U)?C:x:te==32&&N<=8287?q[N&255]:te==254&&N>=65136?x:D}function W(U){return U>="\u064B"&&U<="\u0655"}t.L=m,t.R=y,t.EN=C,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(U,N,te){if(U.length<2)return{};var J=U.split(""),ye=new Array(J.length),Ae=new Array(J.length),we=[];r=te?v:_,G(J,we,J.length,N);for(var ce=0;ce<ye.length;ye[ce]=ce,ce++);B(2,we,ye),B(1,we,ye);for(var ce=0;ce<ye.length-1;ce++)N[ce]===S?we[ce]=t.AN:we[ce]===y&&(N[ce]>x&&N[ce]<L||N[ce]===D||N[ce]===H)?we[ce]=t.ON_R:ce>0&&J[ce-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(J[ce])&&(we[ce-1]=we[ce]=t.R_H,ce++);J[J.length-1]===t.DOT&&(we[J.length-1]=t.B),J[0]==="\u202B"&&(we[0]=t.RLE);for(var ce=0;ce<ye.length;ce++)Ae[ce]=we[ye[ce]];return{logicalFromVisual:ye,bidiLevels:Ae}},t.hasBidiCharacters=function(U,N){for(var te=!1,J=0;J<U.length;J++)N[J]=O(U.charAt(J)),!te&&(N[J]==y||N[J]==x||N[J]==S)&&(te=!0);return te},t.getVisualFromLogicalIdx=function(U,N){for(var te=0;te<N.logicalFromVisual.length;te++)if(N.logicalFromVisual[te]==U)return te;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var a=e("./lib/bidiutil"),d=e("./lib/lang"),r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,o=function(){function l(u){this.session=u,this.bidiMap={},this.currentRow=null,this.bidiUtil=a,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=r.test(u.getValue())}return l.prototype.isBidiRow=function(u,i,s){return this.seenBidi?(u!==this.currentRow&&(this.currentRow=u,this.updateRowLine(i,s),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},l.prototype.onChange=function(u){this.seenBidi?this.currentRow=null:u.action=="insert"&&r.test(u.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},l.prototype.getDocumentRow=function(){var u=0,i=this.session.$screenRowCache;if(i.length){var s=this.session.$getRowCacheIndex(i,this.currentRow);s>=0&&(u=this.session.$docRowCache[s])}return u},l.prototype.getSplitIndex=function(){var u=0,i=this.session.$screenRowCache;if(i.length)for(var s,f=this.session.$getRowCacheIndex(i,this.currentRow);this.currentRow-u>0&&(s=this.session.$getRowCacheIndex(i,this.currentRow-u-1),s===f);)f=s,u++;else u=this.currentRow;return u},l.prototype.updateRowLine=function(u,i){u===void 0&&(u=this.getDocumentRow());var s=u===this.session.getLength()-1,f=s?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(u),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var h=this.session.$wrapData[u];h&&(i===void 0&&(i=this.getSplitIndex()),i>0&&h.length?(this.wrapIndent=h.indent,this.wrapOffset=this.wrapIndent*this.charWidths[a.L],this.line=i<h.length?this.line.substring(h[i-1],h[i]):this.line.substring(h[h.length-1])):this.line=this.line.substring(0,h[i]),i==h.length&&(this.line+=this.showInvisibles?f:a.DOT))}else this.line+=this.showInvisibles?f:a.DOT;var p=this.session,c=0,_;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(v,m){return v==="	"||p.isFullWidth(v.charCodeAt(0))?(_=v==="	"?p.getScreenTabSize(m+c):2,c+=_-1,d.stringRepeat(a.DOT,_)):v}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==a.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},l.prototype.updateBidiMap=function(){var u=[];a.hasBidiCharacters(this.line,u)||this.isRtlDir?this.bidiMap=a.doBidiReorder(this.line,u,this.isRtlDir):this.bidiMap={}},l.prototype.markAsDirty=function(){this.currentRow=null},l.prototype.updateCharacterWidths=function(u){if(this.characterWidth!==u.$characterSize.width){this.fontMetrics=u;var i=this.characterWidth=u.$characterSize.width,s=u.$measureCharWidth("\u05D4");this.charWidths[a.L]=this.charWidths[a.EN]=this.charWidths[a.ON_R]=i,this.charWidths[a.R]=this.charWidths[a.AN]=s,this.charWidths[a.R_H]=s*.45,this.charWidths[a.B]=this.charWidths[a.RLE]=0,this.currentRow=null}},l.prototype.setShowInvisibles=function(u){this.showInvisibles=u,this.currentRow=null},l.prototype.setEolChar=function(u){this.EOL=u},l.prototype.setContentWidth=function(u){this.contentWidth=u},l.prototype.isRtlLine=function(u){return this.$isRtl?!0:u!=null?this.session.getLine(u).charAt(0)==this.RLE:this.isRtlDir},l.prototype.setRtlDirection=function(u,i){for(var s=u.getCursorPosition(),f=u.selection.getSelectionAnchor().row;f<=s.row;f++)!i&&u.session.getLine(f).charAt(0)===u.session.$bidiHandler.RLE?u.session.doc.removeInLine(f,0,1):i&&u.session.getLine(f).charAt(0)!==u.session.$bidiHandler.RLE&&u.session.doc.insert({column:0,row:f},u.session.$bidiHandler.RLE)},l.prototype.getPosLeft=function(u){u-=this.wrapIndent;var i=this.line.charAt(0)===this.RLE?1:0,s=u>i?this.session.getOverwrite()?u:u-1:i,f=a.getVisualFromLogicalIdx(s,this.bidiMap),h=this.bidiMap.bidiLevels,p=0;!this.session.getOverwrite()&&u<=i&&h[f]%2!==0&&f++;for(var c=0;c<f;c++)p+=this.charWidths[h[c]];return!this.session.getOverwrite()&&u>i&&h[f]%2===0&&(p+=this.charWidths[h[f]]),this.wrapIndent&&(p+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(p+=this.rtlLineOffset),p},l.prototype.getSelections=function(u,i){var s=this.bidiMap,f=s.bidiLevels,h,p=[],c=0,_=Math.min(u,i)-this.wrapIndent,v=Math.max(u,i)-this.wrapIndent,m=!1,y=!1,C=0;this.wrapIndent&&(c+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,D=0;D<f.length;D++)S=s.logicalFromVisual[D],h=f[D],m=S>=_&&S<v,m&&!y?C=c:!m&&y&&p.push({left:C,width:c-C}),c+=this.charWidths[h],y=m;if(m&&D===f.length&&p.push({left:C,width:c-C}),this.isRtlDir)for(var g=0;g<p.length;g++)p[g].left+=this.rtlLineOffset;return p},l.prototype.offsetToCol=function(s){this.isRtlDir&&(s-=this.rtlLineOffset);var i=0,s=Math.max(s,0),f=0,h=0,p=this.bidiMap.bidiLevels,c=this.charWidths[p[h]];for(this.wrapIndent&&(s-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);s>f+c/2;){if(f+=c,h===p.length-1){c=0;break}c=this.charWidths[p[++h]]}return h>0&&p[h-1]%2!==0&&p[h]%2===0?(s<f&&h--,i=this.bidiMap.logicalFromVisual[h]):h>0&&p[h-1]%2===0&&p[h]%2!==0?i=1+(s>f?this.bidiMap.logicalFromVisual[h]:this.bidiMap.logicalFromVisual[h-1]):this.isRtlDir&&h===p.length-1&&c===0&&p[h-1]%2===0||!this.isRtlDir&&h===0&&p[h]%2!==0?i=1+this.bidiMap.logicalFromVisual[h]:(h>0&&p[h-1]%2!==0&&c!==0&&h--,i=this.bidiMap.logicalFromVisual[h]),i===0&&this.isRtlDir&&i++,i+this.wrapIndent},l}();t.BidiHandler=o});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var a=e("./lib/oop"),d=e("./lib/lang"),r=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,l=function(){function u(i){this.session=i,this.doc=i.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var s=this;this.cursor.on("change",function(f){s.$cursorChanged=!0,s.$silent||s._emit("changeCursor"),!s.$isEmpty&&!s.$silent&&s._emit("changeSelection"),!s.$keepDesiredColumnOnChange&&f.old.column!=f.value.column&&(s.$desiredColumn=null)}),this.anchor.on("change",function(){s.$anchorChanged=!0,!s.$isEmpty&&!s.$silent&&s._emit("changeSelection")})}return u.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},u.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},u.prototype.getCursor=function(){return this.lead.getPosition()},u.prototype.setAnchor=function(i,s){this.$isEmpty=!1,this.anchor.setPosition(i,s)},u.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},u.prototype.getSelectionLead=function(){return this.lead.getPosition()},u.prototype.isBackwards=function(){var i=this.anchor,s=this.lead;return i.row>s.row||i.row==s.row&&i.column>s.column},u.prototype.getRange=function(){var i=this.anchor,s=this.lead;return this.$isEmpty?o.fromPoints(s,s):this.isBackwards()?o.fromPoints(s,i):o.fromPoints(i,s)},u.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},u.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},u.prototype.setRange=function(i,s){var f=s?i.end:i.start,h=s?i.start:i.end;this.$setSelection(f.row,f.column,h.row,h.column)},u.prototype.$setSelection=function(i,s,f,h){if(!this.$silent){var p=this.$isEmpty,c=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(i,s),this.cursor.setPosition(f,h),this.$isEmpty=!o.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||p!=this.$isEmpty||c)&&this._emit("changeSelection")}},u.prototype.$moveSelection=function(i){var s=this.lead;this.$isEmpty&&this.setSelectionAnchor(s.row,s.column),i.call(this)},u.prototype.selectTo=function(i,s){this.$moveSelection(function(){this.moveCursorTo(i,s)})},u.prototype.selectToPosition=function(i){this.$moveSelection(function(){this.moveCursorToPosition(i)})},u.prototype.moveTo=function(i,s){this.clearSelection(),this.moveCursorTo(i,s)},u.prototype.moveToPosition=function(i){this.clearSelection(),this.moveCursorToPosition(i)},u.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},u.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},u.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},u.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},u.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},u.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},u.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},u.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},u.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},u.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},u.prototype.getWordRange=function(i,s){if(typeof s>"u"){var f=i||this.lead;i=f.row,s=f.column}return this.session.getWordRange(i,s)},u.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},u.prototype.selectAWord=function(){var i=this.getCursor(),s=this.session.getAWordRange(i.row,i.column);this.setSelectionRange(s)},u.prototype.getLineRange=function(i,s){var f=typeof i=="number"?i:this.lead.row,h,p=this.session.getFoldLine(f);return p?(f=p.start.row,h=p.end.row):h=f,s===!0?new o(f,0,h,this.session.getLine(h).length):new o(f,0,h+1,0)},u.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},u.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},u.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},u.prototype.wouldMoveIntoSoftTab=function(i,s,f){var h=i.column,p=i.column+s;return f<0&&(h=i.column-s,p=i.column),this.session.isTabStop(i)&&this.doc.getLine(i.row).slice(h,p).split(" ").length-1==s},u.prototype.moveCursorLeft=function(){var i=this.lead.getPosition(),s;if(s=this.session.getFoldAt(i.row,i.column,-1))this.moveCursorTo(s.start.row,s.start.column);else if(i.column===0)i.row>0&&this.moveCursorTo(i.row-1,this.doc.getLine(i.row-1).length);else{var f=this.session.getTabSize();this.wouldMoveIntoSoftTab(i,f,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-f):this.moveCursorBy(0,-1)}},u.prototype.moveCursorRight=function(){var i=this.lead.getPosition(),s;if(s=this.session.getFoldAt(i.row,i.column,1))this.moveCursorTo(s.end.row,s.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var f=this.session.getTabSize(),i=this.lead;this.wouldMoveIntoSoftTab(i,f,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,f):this.moveCursorBy(0,1)}},u.prototype.moveCursorLineStart=function(){var i=this.lead.row,s=this.lead.column,f=this.session.documentToScreenRow(i,s),h=this.session.screenToDocumentPosition(f,0),p=this.session.getDisplayLine(i,null,h.row,h.column),c=p.match(/^\s*/);c[0].length!=s&&!this.session.$useEmacsStyleLineStart&&(h.column+=c[0].length),this.moveCursorToPosition(h)},u.prototype.moveCursorLineEnd=function(){var i=this.lead,s=this.session.getDocumentLastRowColumnPosition(i.row,i.column);if(this.lead.column==s.column){var f=this.session.getLine(s.row);if(s.column==f.length){var h=f.search(/\s+$/);h>0&&(s.column=h)}}this.moveCursorTo(s.row,s.column)},u.prototype.moveCursorFileEnd=function(){var i=this.doc.getLength()-1,s=this.doc.getLine(i).length;this.moveCursorTo(i,s)},u.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},u.prototype.moveCursorLongWordRight=function(){var i=this.lead.row,s=this.lead.column,f=this.doc.getLine(i),h=f.substring(s);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var p=this.session.getFoldAt(i,s,1);if(p){this.moveCursorTo(p.end.row,p.end.column);return}if(this.session.nonTokenRe.exec(h)&&(s+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,h=f.substring(s)),s>=f.length){this.moveCursorTo(i,f.length),this.moveCursorRight(),i<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(h)&&(s+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,s)},u.prototype.moveCursorLongWordLeft=function(){var i=this.lead.row,s=this.lead.column,f;if(f=this.session.getFoldAt(i,s,-1)){this.moveCursorTo(f.start.row,f.start.column);return}var h=this.session.getFoldStringAt(i,s,-1);h==null&&(h=this.doc.getLine(i).substring(0,s));var p=d.stringReverse(h);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(p)&&(s-=this.session.nonTokenRe.lastIndex,p=p.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),s<=0){this.moveCursorTo(i,0),this.moveCursorLeft(),i>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(p)&&(s-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,s)},u.prototype.$shortWordEndIndex=function(i){var s=0,f,h=/\s/,p=this.session.tokenRe;if(p.lastIndex=0,this.session.tokenRe.exec(i))s=this.session.tokenRe.lastIndex;else{for(;(f=i[s])&&h.test(f);)s++;if(s<1){for(p.lastIndex=0;(f=i[s])&&!p.test(f);)if(p.lastIndex=0,s++,h.test(f))if(s>2){s--;break}else{for(;(f=i[s])&&h.test(f);)s++;if(s>2)break}}}return p.lastIndex=0,s},u.prototype.moveCursorShortWordRight=function(){var i=this.lead.row,s=this.lead.column,f=this.doc.getLine(i),h=f.substring(s),p=this.session.getFoldAt(i,s,1);if(p)return this.moveCursorTo(p.end.row,p.end.column);if(s==f.length){var c=this.doc.getLength();do i++,h=this.doc.getLine(i);while(i<c&&/^\s*$/.test(h));/^\s+/.test(h)||(h=""),s=0}var _=this.$shortWordEndIndex(h);this.moveCursorTo(i,s+_)},u.prototype.moveCursorShortWordLeft=function(){var i=this.lead.row,s=this.lead.column,f;if(f=this.session.getFoldAt(i,s,-1))return this.moveCursorTo(f.start.row,f.start.column);var h=this.session.getLine(i).substring(0,s);if(s===0){do i--,h=this.doc.getLine(i);while(i>0&&/^\s*$/.test(h));s=h.length,/\s+$/.test(h)||(h="")}var p=d.stringReverse(h),c=this.$shortWordEndIndex(p);return this.moveCursorTo(i,s-c)},u.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},u.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},u.prototype.moveCursorBy=function(i,s){var f=this.session.documentToScreenPosition(this.lead.row,this.lead.column),h;if(s===0&&(i!==0&&(this.session.$bidiHandler.isBidiRow(f.row,this.lead.row)?(h=this.session.$bidiHandler.getPosLeft(f.column),f.column=Math.round(h/this.session.$bidiHandler.charWidths[0])):h=f.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?f.column=this.$desiredColumn:this.$desiredColumn=f.column),i!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var p=this.session.lineWidgets[this.lead.row];i<0?i-=p.rowsAbove||0:i>0&&(i+=p.rowCount-(p.rowsAbove||0))}var c=this.session.screenToDocumentPosition(f.row+i,f.column,h);i!==0&&s===0&&c.row===this.lead.row&&(c.column,this.lead.column),this.moveCursorTo(c.row,c.column+s,s===0)},u.prototype.moveCursorToPosition=function(i){this.moveCursorTo(i.row,i.column)},u.prototype.moveCursorTo=function(i,s,f){var h=this.session.getFoldAt(i,s,1);h&&(i=h.start.row,s=h.start.column),this.$keepDesiredColumnOnChange=!0;var p=this.session.getLine(i);/[\uDC00-\uDFFF]/.test(p.charAt(s))&&p.charAt(s-1)&&(this.lead.row==i&&this.lead.column==s+1?s=s-1:s=s+1),this.lead.setPosition(i,s),this.$keepDesiredColumnOnChange=!1,f||(this.$desiredColumn=null)},u.prototype.moveCursorToScreen=function(i,s,f){var h=this.session.screenToDocumentPosition(i,s);this.moveCursorTo(h.row,h.column,f)},u.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},u.prototype.fromOrientedRange=function(i){this.setSelectionRange(i,i.cursor==i.start),this.$desiredColumn=i.desiredColumn||this.$desiredColumn},u.prototype.toOrientedRange=function(i){var s=this.getRange();return i?(i.start.column=s.start.column,i.start.row=s.start.row,i.end.column=s.end.column,i.end.row=s.end.row):i=s,i.cursor=this.isBackwards()?i.start:i.end,i.desiredColumn=this.$desiredColumn,i},u.prototype.getRangeOfMovements=function(i){var s=this.getCursor();try{i(this);var f=this.getCursor();return o.fromPoints(s,f)}catch{return o.fromPoints(s,s)}finally{this.moveCursorToPosition(s)}},u.prototype.toJSON=function(){if(this.rangeCount)var i=this.ranges.map(function(s){var f=s.clone();return f.isBackwards=s.cursor==s.start,f});else{var i=this.getRange();i.isBackwards=this.isBackwards()}return i},u.prototype.fromJSON=function(i){if(i.start==null)if(this.rangeList&&i.length>1){this.toSingleRange(i[0]);for(var s=i.length;s--;){var f=o.fromPoints(i[s].start,i[s].end);i[s].isBackwards&&(f.cursor=f.start),this.addRange(f,!0)}return}else i=i[0];this.rangeList&&this.toSingleRange(i),this.setSelectionRange(i,i.isBackwards)},u.prototype.isEqual=function(i){if((i.length||this.rangeCount)&&i.length!=this.rangeCount)return!1;if(!i.length||!this.ranges)return this.getRange().isEqual(i);for(var s=this.ranges.length;s--;)if(!this.ranges[s].isEqual(i[s]))return!1;return!0},u}();l.prototype.setSelectionAnchor=l.prototype.setAnchor,l.prototype.getSelectionAnchor=l.prototype.getAnchor,l.prototype.setSelectionRange=l.prototype.setRange,a.implement(l.prototype,r),t.Selection=l});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,n){"use strict";var a=e("./lib/report_error").reportError,d=2e3,r=function(){function o(l){this.splitRegex,this.states=l,this.regExps={},this.matchMappings={};for(var u in this.states){for(var i=this.states[u],s=[],f=0,h=this.matchMappings[u]={defaultToken:"text"},p="g",c=[],_=0;_<i.length;_++){var v=i[_];if(v.defaultToken&&(h.defaultToken=v.defaultToken),v.caseInsensitive&&p.indexOf("i")===-1&&(p+="i"),v.unicode&&p.indexOf("u")===-1&&(p+="u"),v.regex!=null){v.regex instanceof RegExp&&(v.regex=v.regex.toString().slice(1,-1));var m=v.regex,y=new RegExp("(?:("+m+")|(.))").exec("a").length-2;Array.isArray(v.token)?v.token.length==1||y==1?v.token=v.token[0]:y-1!=v.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:v,groupCount:y-1}),v.token=v.token[0]):(v.tokenArray=v.token,v.token=null,v.onMatch=this.$arrayTokens):typeof v.token=="function"&&!v.onMatch&&(y>1?v.onMatch=this.$applyToken:v.onMatch=v.token),y>1&&(/\\\d/.test(v.regex)?m=v.regex.replace(/\\([0-9]+)/g,function(C,S){return"\\"+(parseInt(S,10)+f+1)}):(y=1,m=this.removeCapturingGroups(v.regex)),!v.splitRegex&&typeof v.token!="string"&&c.push(v)),h[f]=_,f+=y,s.push(m),v.onMatch||(v.onMatch=null)}}s.length||(h[0]=0,s.push("$")),c.forEach(function(C){C.splitRegex=this.createSplitterRegexp(C.regex,p)},this),this.regExps[u]=new RegExp("("+s.join(")|(")+")|($)",p)}}return o.prototype.$setMaxTokenCount=function(l){d=l|0},o.prototype.$applyToken=function(l){var u=this.splitRegex.exec(l).slice(1),i=this.token.apply(this,u);if(typeof i=="string")return[{type:i,value:l}];for(var s=[],f=0,h=i.length;f<h;f++)u[f]&&(s[s.length]={type:i[f],value:u[f]});return s},o.prototype.$arrayTokens=function(l){if(!l)return[];var u=this.splitRegex.exec(l);if(!u)return"text";for(var i=[],s=this.tokenArray,f=0,h=s.length;f<h;f++)u[f+1]&&(i[i.length]={type:s[f],value:u[f+1]});return i},o.prototype.removeCapturingGroups=function(l){var u=l.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(i,s){return s?"(?:":i});return u},o.prototype.createSplitterRegexp=function(l,u){if(l.indexOf("(?=")!=-1){var i=0,s=!1,f={};l.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(h,p,c,_,v,m){return s?s=v!="]":v?s=!0:_?(i==f.stack&&(f.end=m+1,f.stack=-1),i--):c&&(i++,c.length!=1&&(f.stack=i,f.start=m)),h}),f.end!=null&&/^\)*$/.test(l.substr(f.end))&&(l=l.substring(0,f.start)+l.substr(f.end))}return l.charAt(0)!="^"&&(l="^"+l),l.charAt(l.length-1)!="$"&&(l+="$"),new RegExp(l,(u||"").replace("g",""))},o.prototype.getLineTokens=function(l,u){if(u&&typeof u!="string"){var i=u.slice(0);u=i[0],u==="#tmp"&&(i.shift(),u=i.shift())}else var i=[];var s=u||"start",f=this.states[s];f||(s="start",f=this.states[s]);var h=this.matchMappings[s],p=this.regExps[s];p.lastIndex=0;for(var c,_=[],v=0,m=0,y={type:null,value:""};c=p.exec(l);){var C=h.defaultToken,S=null,D=c[0],g=p.lastIndex;if(g-D.length>v){var b=l.substring(v,g-D.length);y.type==C?y.value+=b:(y.type&&_.push(y),y={type:C,value:b})}for(var x=0;x<c.length-2;x++)if(c[x+1]!==void 0){S=f[h[x]],S.onMatch?C=S.onMatch(D,s,i,l):C=S.token,S.next&&(typeof S.next=="string"?s=S.next:s=S.next(s,i),f=this.states[s],f||(this.reportError("state doesn't exist",s),s="start",f=this.states[s]),h=this.matchMappings[s],v=g,p=this.regExps[s],p.lastIndex=g),S.consumeLineEnd&&(v=g);break}if(D){if(typeof C=="string")(!S||S.merge!==!1)&&y.type===C?y.value+=D:(y.type&&_.push(y),y={type:C,value:D});else if(C){y.type&&_.push(y),y={type:null,value:""};for(var x=0;x<C.length;x++)_.push(C[x])}}if(v==l.length)break;if(v=g,m++>d){for(m>2*l.length&&this.reportError("infinite loop with in ace tokenizer",{startState:u,line:l});v<l.length;)y.type&&_.push(y),y={value:l.substring(v,v+=500),type:"overflow"};s="start",i=[];break}}return y.type&&_.push(y),i.length>1&&i[0]!==s&&i.unshift("#tmp",s),{tokens:_,state:i.length?i:s}},o}();r.prototype.reportError=a,t.Tokenizer=r});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";var a=e("../lib/deep_copy").deepCopy,d;d=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(l,u){if(!u){for(var i in l)this.$rules[i]=l[i];return}for(var i in l){for(var s=l[i],f=0;f<s.length;f++){var h=s[f];(h.next||h.onMatch)&&(typeof h.next=="string"&&h.next.indexOf(u)!==0&&(h.next=u+h.next),h.nextState&&h.nextState.indexOf(u)!==0&&(h.nextState=u+h.nextState))}this.$rules[u+i]=s}},this.getRules=function(){return this.$rules},this.embedRules=function(l,u,i,s,f){var h=typeof l=="function"?new l().getRules():l;if(s)for(var p=0;p<s.length;p++)s[p]=u+s[p];else{s=[];for(var c in h)s.push(u+c)}if(this.addRules(h,u),i)for(var _=Array.prototype[f?"push":"unshift"],p=0;p<s.length;p++)_.apply(this.$rules[s[p]],a(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(u)},this.getEmbeds=function(){return this.$embeds};var r=function(l,u){return(l!="start"||u.length)&&u.unshift(this.nextState,l),this.nextState},o=function(l,u){return u.shift(),u.shift()||"start"};this.normalizeRules=function(){var l=0,u=this.$rules;function i(s){var f=u[s];f.processed=!0;for(var h=0;h<f.length;h++){var p=f[h],c=null;Array.isArray(p)&&(c=p,p={}),!p.regex&&p.start&&(p.regex=p.start,p.next||(p.next=[]),p.next.push({defaultToken:p.token},{token:p.token+".end",regex:p.end||p.start,next:"pop"}),p.token=p.token+".start",p.push=!0);var _=p.next||p.push;if(_&&Array.isArray(_)){var v=p.stateName;v||(v=p.token,typeof v!="string"&&(v=v[0]||""),u[v]&&(v+=l++)),u[v]=_,p.next=v,i(v)}else _=="pop"&&(p.next=o);if(p.push&&(p.nextState=p.next||p.push,p.next=r,delete p.push),p.rules)for(var m in p.rules)u[m]?u[m].push&&u[m].push.apply(u[m],p.rules[m]):u[m]=p.rules[m];var y=typeof p=="string"?p:p.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?c=y.map(function(S){return u[S]}):c=u[y]),c){var C=[h,1].concat(c);p.noEscape&&(C=C.filter(function(S){return!S.next})),f.splice.apply(f,C),h--}p.keywordMap&&(p.token=this.createKeywordMapper(p.keywordMap,p.defaultToken||"text",p.caseInsensitive),delete p.defaultToken)}}Object.keys(u).forEach(i,this)},this.createKeywordMapper=function(l,u,i,s){var f=Object.create(null);return this.$keywordList=[],Object.keys(l).forEach(function(h){for(var p=l[h],c=p.split(s||"|"),_=c.length;_--;){var v=c[_];this.$keywordList.push(v),i&&(v=v.toLowerCase()),f[v]=h}},this),l=null,i?function(h){return f[h.toLowerCase()]||u}:function(h){return f[h]||u}},this.getKeywords=function(){return this.$keywords}}.call(d.prototype),t.TextHighlightRules=d});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var a;a=function(){this.$behaviours={}},function(){this.add=function(d,r,o){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[d]:this.$behaviours[d]={}}this.$behaviours[d][r]=o},this.addBehaviours=function(d){for(var r in d)for(var o in d[r])this.add(r,o,d[r][o])},this.remove=function(d){this.$behaviours&&this.$behaviours[d]&&delete this.$behaviours[d]},this.inherit=function(d,r){if(typeof d=="function")var o=new d().getBehaviours(r);else var o=d.getBehaviours(r);this.addBehaviours(o)},this.getBehaviours=function(d){if(d){for(var r={},o=0;o<d.length;o++)this.$behaviours[d[o]]&&(r[d[o]]=this.$behaviours[d[o]]);return r}else return this.$behaviours}}.call(a.prototype),t.Behaviour=a});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("./range").Range,d=function(){function r(o,l,u){this.$session=o,this.$row=l,this.$rowTokens=o.getTokens(l);var i=o.getTokenAt(l,u);this.$tokenIndex=i?i.index:-1}return r.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},r.prototype.stepForward=function(){this.$tokenIndex+=1;for(var o;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,o||(o=this.$session.getLength()),this.$row>=o)return this.$row=o-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},r.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},r.prototype.getCurrentTokenRow=function(){return this.$row},r.prototype.getCurrentTokenColumn=function(){var o=this.$rowTokens,l=this.$tokenIndex,u=o[l].start;if(u!==void 0)return u;for(u=0;l>0;)l-=1,u+=o[l].value.length;return u},r.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},r.prototype.getCurrentTokenRange=function(){var o=this.$rowTokens[this.$tokenIndex],l=this.getCurrentTokenColumn();return new a(this.$row,l,this.$row,l+o.value.length)},r}();t.TokenIterator=d});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var a=e("../../lib/oop"),d=e("../behaviour").Behaviour,r=e("../../token_iterator").TokenIterator,o=e("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],u=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],i,s={},f={'"':'"',"'":"'"},h=function(_){var v=-1;if(_.multiSelect&&(v=_.selection.index,s.rangeCount!=_.multiSelect.rangeCount&&(s={rangeCount:_.multiSelect.rangeCount})),s[v])return i=s[v];i=s[v]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(_,v,m,y){var C=_.end.row-_.start.row;return{text:m+v+y,selection:[0,_.start.column+1,C,_.end.column+(C?0:1)]}},c;c=function(_){_=_||{},this.add("braces","insertion",function(v,m,y,C,S){var D=y.getCursorPosition(),g=C.doc.getLine(D.row);if(S=="{"){h(y);var b=y.getSelectionRange(),x=C.doc.getTextRange(b);if(x!==""&&x!=="{"&&y.getWrapBehavioursEnabled())return p(b,x,"{","}");if(c.isSaneInsertion(y,C))return/[\]\}\)]/.test(g[D.column])||y.inMultiSelectMode||_.braces?(c.recordAutoInsert(y,C,"}"),{text:"{}",selection:[1,1]}):(c.recordMaybeInsert(y,C,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){h(y);var E=g.substring(D.column,D.column+1);if(E=="}"){var T=C.$findOpeningBracket("}",{column:D.column+1,row:D.row});if(T!==null&&c.isAutoInsertedClosing(D,g,S))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){h(y);var M="";c.isMaybeInsertedClosing(D,g)&&(M=o.stringRepeat("}",i.maybeInsertedBrackets),c.clearMaybeInsertedClosing());var E=g.substring(D.column,D.column+1);if(E==="}"){var w=C.findMatchingBracket({row:D.row,column:D.column+1},"}");if(!w)return null;var F=this.$getIndent(C.getLine(w.row))}else if(M)var F=this.$getIndent(g);else{c.clearMaybeInsertedClosing();return}var L=F+C.getTabString();return{text:`
`+L+`
`+F+M,selection:[1,L.length,1,L.length]}}else c.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(v,m,y,C,S){var D=C.doc.getTextRange(S);if(!S.isMultiLine()&&D=="{"){h(y);var g=C.doc.getLine(S.start.row),b=g.substring(S.end.column,S.end.column+1);if(b=="}")return S.end.column++,S;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(v,m,y,C,S){if(S=="("){h(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return p(D,g,"(",")");if(c.isSaneInsertion(y,C))return c.recordAutoInsert(y,C,")"),{text:"()",selection:[1,1]}}else if(S==")"){h(y);var b=y.getCursorPosition(),x=C.doc.getLine(b.row),E=x.substring(b.column,b.column+1);if(E==")"){var T=C.$findOpeningBracket(")",{column:b.column+1,row:b.row});if(T!==null&&c.isAutoInsertedClosing(b,x,S))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(v,m,y,C,S){var D=C.doc.getTextRange(S);if(!S.isMultiLine()&&D=="("){h(y);var g=C.doc.getLine(S.start.row),b=g.substring(S.start.column+1,S.start.column+2);if(b==")")return S.end.column++,S}}),this.add("brackets","insertion",function(v,m,y,C,S){if(S=="["){h(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return p(D,g,"[","]");if(c.isSaneInsertion(y,C))return c.recordAutoInsert(y,C,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){h(y);var b=y.getCursorPosition(),x=C.doc.getLine(b.row),E=x.substring(b.column,b.column+1);if(E=="]"){var T=C.$findOpeningBracket("]",{column:b.column+1,row:b.row});if(T!==null&&c.isAutoInsertedClosing(b,x,S))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(v,m,y,C,S){var D=C.doc.getTextRange(S);if(!S.isMultiLine()&&D=="["){h(y);var g=C.doc.getLine(S.start.row),b=g.substring(S.start.column+1,S.start.column+2);if(b=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(v,m,y,C,S){var D=C.$mode.$quotes||f;if(S.length==1&&D[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;h(y);var g=S,b=y.getSelectionRange(),x=C.doc.getTextRange(b);if(x!==""&&(x.length!=1||!D[x])&&y.getWrapBehavioursEnabled())return p(b,x,g,g);if(!x){var E=y.getCursorPosition(),T=C.doc.getLine(E.row),M=T.substring(E.column-1,E.column),w=T.substring(E.column,E.column+1),F=C.getTokenAt(E.row,E.column),L=C.getTokenAt(E.row,E.column+1);if(M=="\\"&&F&&/escape/.test(F.type))return null;var R=F&&/string|escape/.test(F.type),A=!L||/string|escape/.test(L.type),I;if(w==g)I=R!==A,I&&/string\.end/.test(L.type)&&(I=!1);else{if(R&&!A||R&&A)return null;var $=C.$mode.tokenRe;$.lastIndex=0;var H=$.test(M);$.lastIndex=0;var P=$.test(w),q=C.$mode.$pairQuotesAfter,G=q&&q[g]&&q[g].test(M);if(!G&&H||P||w&&!/[\s;,.})\]\\]/.test(w))return null;var B=T[E.column-2];if(M==g&&(B==g||$.test(B)))return null;I=!0}return{text:I?g+g:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(v,m,y,C,S){var D=C.$mode.$quotes||f,g=C.doc.getTextRange(S);if(!S.isMultiLine()&&D.hasOwnProperty(g)){h(y);var b=C.doc.getLine(S.start.row),x=b.substring(S.start.column+1,S.start.column+2);if(x==g)return S.end.column++,S}}),_.closeDocComment!==!1&&this.add("doc comment end","insertion",function(v,m,y,C,S){if(v==="doc-start"&&(S===`
`||S===`\r
`)&&y.selection.isEmpty()){var D=y.getCursorPosition(),g=C.doc.getLine(D.row),b=C.doc.getLine(D.row+1),x=this.$getIndent(g);if(/\s*\*/.test(b))return/^\s*\*/.test(g)?{text:S+x+"* ",selection:[1,3+x.length,1,3+x.length]}:{text:S+x+" * ",selection:[1,3+x.length,1,3+x.length]};if(/\/\*\*/.test(g.substring(0,D.column)))return{text:S+x+" * "+S+" "+x+"*/",selection:[1,4+x.length,1,4+x.length]}}})},c.isSaneInsertion=function(_,v){var m=_.getCursorPosition(),y=new r(v,m.row,m.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",l)){if(/[)}\]]/.test(_.session.getLine(m.row)[m.column]))return!0;var C=new r(v,m.row,m.column+1);if(!this.$matchTokenType(C.getCurrentToken()||"text",l))return!1}return y.stepForward(),y.getCurrentTokenRow()!==m.row||this.$matchTokenType(y.getCurrentToken()||"text",u)},c.$matchTokenType=function(_,v){return v.indexOf(_.type||_)>-1},c.recordAutoInsert=function(_,v,m){var y=_.getCursorPosition(),C=v.doc.getLine(y.row);this.isAutoInsertedClosing(y,C,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=y.row,i.autoInsertedLineEnd=m+C.substr(y.column),i.autoInsertedBrackets++},c.recordMaybeInsert=function(_,v,m){var y=_.getCursorPosition(),C=v.doc.getLine(y.row);this.isMaybeInsertedClosing(y,C)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=y.row,i.maybeInsertedLineStart=C.substr(0,y.column)+m,i.maybeInsertedLineEnd=C.substr(y.column),i.maybeInsertedBrackets++},c.isAutoInsertedClosing=function(_,v,m){return i.autoInsertedBrackets>0&&_.row===i.autoInsertedRow&&m===i.autoInsertedLineEnd[0]&&v.substr(_.column)===i.autoInsertedLineEnd},c.isMaybeInsertedClosing=function(_,v){return i.maybeInsertedBrackets>0&&_.row===i.maybeInsertedRow&&v.substr(_.column)===i.maybeInsertedLineEnd&&v.substr(0,_.column)==i.maybeInsertedLineStart},c.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},c.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},a.inherits(c,d),t.CstyleBehaviour=c});ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var a=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],d=0,r=[],o=0;o<a.length;o+=2)r.push(d+=a[o]),a[o+1]&&r.push(45,d+=a[o+1]);t.wordChars=String.fromCharCode.apply(null,r)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var a=e("../config"),d=e("../tokenizer").Tokenizer,r=e("./text_highlight_rules").TextHighlightRules,o=e("./behaviour/cstyle").CstyleBehaviour,l=e("../unicode"),u=e("../lib/lang"),i=e("../token_iterator").TokenIterator,s=e("../range").Range,f;f=function(){this.HighlightRules=r},function(){this.$defaultBehaviour=new o,this.tokenRe=new RegExp("^["+l.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+l.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new d(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(h,p,c,_){var v=p.doc,m=!0,y=!0,C=1/0,S=p.getTabSize(),D=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var x=this.lineCommentStart.map(u.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var x=u.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;x=new RegExp("^(\\s*)(?:"+x+") ?"),D=p.getUseSoftTabs();var M=function(P,q){var G=P.match(x);if(G){var B=G[1].length,Q=G[0].length;!L(P,B,Q)&&G[0][Q-1]==" "&&Q--,v.removeInLine(q,B,Q)}},F=g+" ",T=function(P,q){(!m||/\S/.test(P))&&(L(P,C,C)?v.insertInLine({row:q,column:C},F):v.insertInLine({row:q,column:C},g))},w=function(P,q){return x.test(P)},L=function(P,q,G){for(var B=0;q--&&P.charAt(q)==" ";)B++;if(B%S!=0)return!1;for(var B=0;P.charAt(G++)==" ";)B++;return S>2?B%S!=S-1:B%S==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,b=this.blockComment.end,x=new RegExp("^(\\s*)(?:"+u.escapeRegExp(g)+")"),E=new RegExp("(?:"+u.escapeRegExp(b)+")\\s*$"),T=function(I,$){w(I,$)||(!m||/\S/.test(I))&&(v.insertInLine({row:$,column:I.length},b),v.insertInLine({row:$,column:C},g))},M=function(I,$){var H;(H=I.match(E))&&v.removeInLine($,I.length-H[0].length,I.length),(H=I.match(x))&&v.removeInLine($,H[1].length,H[0].length)},w=function(I,$){if(x.test(I))return!0;for(var H=p.getTokens($),P=0;P<H.length;P++)if(H[P].type==="comment")return!0}}function R(I){for(var $=c;$<=_;$++)I(v.getLine($),$)}var A=1/0;R(function(I,$){var H=I.search(/\S/);H!==-1?(H<C&&(C=H),y&&!w(I,$)&&(y=!1)):A>I.length&&(A=I.length)}),C==1/0&&(C=A,m=!1,y=!1),D&&C%S!=0&&(C=Math.floor(C/S)*S),R(y?M:T)},this.toggleBlockComment=function(h,p,c,_){var v=this.blockComment;if(v){!v.start&&v[0]&&(v=v[0]);var m=new i(p,_.row,_.column),y=m.getCurrentToken(),C=p.selection,S=p.selection.toOrientedRange(),D,g;if(y&&/comment/.test(y.type)){for(var b,x;y&&/comment/.test(y.type);){var E=y.value.indexOf(v.start);if(E!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+E;b=new s(T,M,T,M+v.start.length);break}y=m.stepBackward()}for(var m=new i(p,_.row,_.column),y=m.getCurrentToken();y&&/comment/.test(y.type);){var E=y.value.indexOf(v.end);if(E!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+E;x=new s(T,M,T,M+v.end.length);break}y=m.stepForward()}x&&p.remove(x),b&&(p.remove(b),D=b.start.row,g=-v.start.length)}else g=v.start.length,D=c.start.row,p.insert(c.end,v.end),p.insert(c.start,v.start);S.start.row==D&&(S.start.column+=g),S.end.row==D&&(S.end.column+=g),p.selection.fromOrientedRange(S)}},this.getNextLineIndent=function(h,p,c){return this.$getIndent(p)},this.checkOutdent=function(h,p,c){return!1},this.autoOutdent=function(h,p,c){},this.$getIndent=function(h){return h.match(/^\s*/)[0]},this.createWorker=function(h){return null},this.createModeDelegates=function(h){this.$embeds=[],this.$modes={};for(var p in h)if(h[p]){var c=h[p],_=c.prototype.$id,v=a.$modes[_];v||(a.$modes[_]=v=new c),a.$modes[p]||(a.$modes[p]=v),this.$embeds.push(p),this.$modes[p]=v}for(var m=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(S){(function(D){var g=m[S],b=D[g];D[m[S]]=function(){return this.$delegator(g,arguments,b)}})(C)},C=this,p=0;p<m.length;p++)y(p)},this.$delegator=function(h,p,c){var _=p[0]||"start";if(typeof _!="string"){if(Array.isArray(_[2])){var v=_[2][_[2].length-1],m=this.$modes[v];if(m)return m[h].apply(m,[_[1]].concat([].slice.call(p,1)))}_=_[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var C=_.split(this.$embeds[y]);if(!C[0]&&C[1]){p[0]=C[1];var m=this.$modes[this.$embeds[y]];return m[h].apply(m,p)}}var S=c.apply(this,p);return c?S:void 0},this.transformAction=function(h,p,c,_,v){if(this.$behaviour){var m=this.$behaviour.getBehaviours();for(var y in m)if(m[y][p]){var C=m[y][p].apply(this,arguments);if(C)return C}}},this.getKeywords=function(h){if(!this.completionKeywords){var p=this.$tokenizer.rules,c=[];for(var _ in p)for(var v=p[_],m=0,y=v.length;m<y;m++)if(typeof v[m].token=="string")/keyword|support|storage/.test(v[m].token)&&c.push(v[m].regex);else if(typeof v[m].token=="object"){for(var C=0,S=v[m].token.length;C<S;C++)if(/keyword|support|storage/.test(v[m].token[C])){var _=v[m].regex.match(/\(.+?\)/g)[C];c.push(_.substr(1,_.length-2))}}this.completionKeywords=c}return h?c.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(h,p,c,_){var v=this.$keywordList||this.$createKeywordList();return v.map(function(m){return{name:m,value:m,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(f.prototype),t.Mode=f});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function a(o,l){throw console.log("Invalid Delta:",o),"Invalid Delta: "+l}function d(o,l){return l.row>=0&&l.row<o.length&&l.column>=0&&l.column<=o[l.row].length}function r(o,l){l.action!="insert"&&l.action!="remove"&&a(l,"delta.action must be 'insert' or 'remove'"),l.lines instanceof Array||a(l,"delta.lines must be an Array"),(!l.start||!l.end)&&a(l,"delta.start/end must be an present");var u=l.start;d(o,l.start)||a(l,"delta.start must be contained in document");var i=l.end;l.action=="remove"&&!d(o,i)&&a(l,"delta.end must contained in document for 'remove' actions");var s=i.row-u.row,f=i.column-(s==0?u.column:0);(s!=l.lines.length-1||l.lines[s].length!=f)&&a(l,"delta.range must match delta lines")}t.applyDelta=function(o,l,u){var i=l.start.row,s=l.start.column,f=o[i]||"";switch(l.action){case"insert":var h=l.lines;if(h.length===1)o[i]=f.substring(0,s)+l.lines[0]+f.substring(s);else{var p=[i,1].concat(l.lines);o.splice.apply(o,p),o[i]=f.substring(0,s)+o[i],o[i+l.lines.length-1]+=f.substring(s)}break;case"remove":var c=l.end.column,_=l.end.row;i===_?o[i]=f.substring(0,s)+f.substring(c):o.splice(i,_-i+1,f.substring(0,s)+o[_].substring(c));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=e("./lib/oop"),d=e("./lib/event_emitter").EventEmitter,r=function(){function u(i,s,f){this.$onChange=this.onChange.bind(this),this.attach(i),typeof s!="number"?this.setPosition(s.row,s.column):this.setPosition(s,f)}return u.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},u.prototype.getDocument=function(){return this.document},u.prototype.onChange=function(i){if(!(i.start.row==i.end.row&&i.start.row!=this.row)&&!(i.start.row>this.row)){var s=l(i,{row:this.row,column:this.column},this.$insertRight);this.setPosition(s.row,s.column,!0)}},u.prototype.setPosition=function(i,s,f){var h;if(f?h={row:i,column:s}:h=this.$clipPositionToDocument(i,s),!(this.row==h.row&&this.column==h.column)){var p={row:this.row,column:this.column};this.row=h.row,this.column=h.column,this._signal("change",{old:p,value:h})}},u.prototype.detach=function(){this.document.off("change",this.$onChange)},u.prototype.attach=function(i){this.document=i||this.document,this.document.on("change",this.$onChange)},u.prototype.$clipPositionToDocument=function(i,s){var f={};return i>=this.document.getLength()?(f.row=Math.max(0,this.document.getLength()-1),f.column=this.document.getLine(f.row).length):i<0?(f.row=0,f.column=0):(f.row=i,f.column=Math.min(this.document.getLine(f.row).length,Math.max(0,s))),s<0&&(f.column=0),f},u}();r.prototype.$insertRight=!1,a.implement(r.prototype,d);function o(u,i,s){var f=s?u.column<=i.column:u.column<i.column;return u.row<i.row||u.row==i.row&&f}function l(u,i,s){var f=u.action=="insert",h=(f?1:-1)*(u.end.row-u.start.row),p=(f?1:-1)*(u.end.column-u.start.column),c=u.start,_=f?c:u.end;return o(i,c,s)?{row:i.row,column:i.column}:o(_,i,!s)?{row:i.row+h,column:i.column+(i.row==_.row?p:0)}:{row:c.row,column:c.column}}t.Anchor=r});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var a=e("./lib/oop"),d=e("./apply_delta").applyDelta,r=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,l=e("./anchor").Anchor,u=function(){function i(s){this.$lines=[""],s.length===0?this.$lines=[""]:Array.isArray(s)?this.insertMergedLines({row:0,column:0},s):this.insert({row:0,column:0},s)}return i.prototype.setValue=function(s){var f=this.getLength()-1;this.remove(new o(0,0,f,this.getLine(f).length)),this.insert({row:0,column:0},s||"")},i.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},i.prototype.createAnchor=function(s,f){return new l(this,s,f)},i.prototype.$detectNewLine=function(s){var f=s.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=f?f[1]:`
`,this._signal("changeNewLineMode")},i.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},i.prototype.setNewLineMode=function(s){this.$newLineMode!==s&&(this.$newLineMode=s,this._signal("changeNewLineMode"))},i.prototype.getNewLineMode=function(){return this.$newLineMode},i.prototype.isNewLine=function(s){return s==`\r
`||s=="\r"||s==`
`},i.prototype.getLine=function(s){return this.$lines[s]||""},i.prototype.getLines=function(s,f){return this.$lines.slice(s,f+1)},i.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},i.prototype.getLength=function(){return this.$lines.length},i.prototype.getTextRange=function(s){return this.getLinesForRange(s).join(this.getNewLineCharacter())},i.prototype.getLinesForRange=function(s){var f;if(s.start.row===s.end.row)f=[this.getLine(s.start.row).substring(s.start.column,s.end.column)];else{f=this.getLines(s.start.row,s.end.row),f[0]=(f[0]||"").substring(s.start.column);var h=f.length-1;s.end.row-s.start.row==h&&(f[h]=f[h].substring(0,s.end.column))}return f},i.prototype.insertLines=function(s,f){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(s,f)},i.prototype.removeLines=function(s,f){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(s,f)},i.prototype.insertNewLine=function(s){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(s,["",""])},i.prototype.insert=function(s,f){return this.getLength()<=1&&this.$detectNewLine(f),this.insertMergedLines(s,this.$split(f))},i.prototype.insertInLine=function(s,f){var h=this.clippedPos(s.row,s.column),p=this.pos(s.row,s.column+f.length);return this.applyDelta({start:h,end:p,action:"insert",lines:[f]},!0),this.clonePos(p)},i.prototype.clippedPos=function(s,f){var h=this.getLength();s===void 0?s=h:s<0?s=0:s>=h&&(s=h-1,f=void 0);var p=this.getLine(s);return f==null&&(f=p.length),f=Math.min(Math.max(f,0),p.length),{row:s,column:f}},i.prototype.clonePos=function(s){return{row:s.row,column:s.column}},i.prototype.pos=function(s,f){return{row:s,column:f}},i.prototype.$clipPosition=function(s){var f=this.getLength();return s.row>=f?(s.row=Math.max(0,f-1),s.column=this.getLine(f-1).length):(s.row=Math.max(0,s.row),s.column=Math.min(Math.max(s.column,0),this.getLine(s.row).length)),s},i.prototype.insertFullLines=function(s,f){s=Math.min(Math.max(s,0),this.getLength());var h=0;s<this.getLength()?(f=f.concat([""]),h=0):(f=[""].concat(f),s--,h=this.$lines[s].length),this.insertMergedLines({row:s,column:h},f)},i.prototype.insertMergedLines=function(s,f){var h=this.clippedPos(s.row,s.column),p={row:h.row+f.length-1,column:(f.length==1?h.column:0)+f[f.length-1].length};return this.applyDelta({start:h,end:p,action:"insert",lines:f}),this.clonePos(p)},i.prototype.remove=function(s){var f=this.clippedPos(s.start.row,s.start.column),h=this.clippedPos(s.end.row,s.end.column);return this.applyDelta({start:f,end:h,action:"remove",lines:this.getLinesForRange({start:f,end:h})}),this.clonePos(f)},i.prototype.removeInLine=function(s,f,h){var p=this.clippedPos(s,f),c=this.clippedPos(s,h);return this.applyDelta({start:p,end:c,action:"remove",lines:this.getLinesForRange({start:p,end:c})},!0),this.clonePos(p)},i.prototype.removeFullLines=function(s,f){s=Math.min(Math.max(0,s),this.getLength()-1),f=Math.min(Math.max(0,f),this.getLength()-1);var h=f==this.getLength()-1&&s>0,p=f<this.getLength()-1,c=h?s-1:s,_=h?this.getLine(c).length:0,v=p?f+1:f,m=p?0:this.getLine(v).length,y=new o(c,_,v,m),C=this.$lines.slice(s,f+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),C},i.prototype.removeNewLine=function(s){s<this.getLength()-1&&s>=0&&this.applyDelta({start:this.pos(s,this.getLine(s).length),end:this.pos(s+1,0),action:"remove",lines:["",""]})},i.prototype.replace=function(s,f){if(s instanceof o||(s=o.fromPoints(s.start,s.end)),f.length===0&&s.isEmpty())return s.start;if(f==this.getTextRange(s))return s.end;this.remove(s);var h;return f?h=this.insert(s.start,f):h=s.start,h},i.prototype.applyDeltas=function(s){for(var f=0;f<s.length;f++)this.applyDelta(s[f])},i.prototype.revertDeltas=function(s){for(var f=s.length-1;f>=0;f--)this.revertDelta(s[f])},i.prototype.applyDelta=function(s,f){var h=s.action=="insert";(h?s.lines.length<=1&&!s.lines[0]:!o.comparePoints(s.start,s.end))||(h&&s.lines.length>2e4?this.$splitAndapplyLargeDelta(s,2e4):(d(this.$lines,s,f),this._signal("change",s)))},i.prototype.$safeApplyDelta=function(s){var f=this.$lines.length;(s.action=="remove"&&s.start.row<f&&s.end.row<f||s.action=="insert"&&s.start.row<=f)&&this.applyDelta(s)},i.prototype.$splitAndapplyLargeDelta=function(s,f){for(var h=s.lines,p=h.length-f+1,c=s.start.row,_=s.start.column,v=0,m=0;v<p;v=m){m+=f-1;var y=h.slice(v,m);y.push(""),this.applyDelta({start:this.pos(c+v,_),end:this.pos(c+m,_=0),action:s.action,lines:y},!0)}s.lines=h.slice(v),s.start.row=c+v,s.start.column=_,this.applyDelta(s,!0)},i.prototype.revertDelta=function(s){this.$safeApplyDelta({start:this.clonePos(s.start),end:this.clonePos(s.end),action:s.action=="insert"?"remove":"insert",lines:s.lines.slice()})},i.prototype.indexToPosition=function(s,f){for(var h=this.$lines||this.getAllLines(),p=this.getNewLineCharacter().length,c=f||0,_=h.length;c<_;c++)if(s-=h[c].length+p,s<0)return{row:c,column:s+h[c].length+p};return{row:_-1,column:s+h[_-1].length+p}},i.prototype.positionToIndex=function(s,f){for(var h=this.$lines||this.getAllLines(),p=this.getNewLineCharacter().length,c=0,_=Math.min(s.row,h.length),v=f||0;v<_;++v)c+=h[v].length+p;return c+s.column},i.prototype.$split=function(s){return s.split(/\r\n|\r|\n/)},i}();u.prototype.$autoNewLine="",u.prototype.$newLineMode="auto",a.implement(u.prototype,r),t.Document=u});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=e("./lib/oop"),d=e("./lib/event_emitter").EventEmitter,r=function(){function o(l,u){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=l;var i=this;this.$worker=function(){if(i.running){for(var s=new Date,f=i.currentLine,h=-1,p=i.doc,c=f;i.lines[f];)f++;var _=p.getLength(),v=0;for(i.running=!1;f<_;){i.$tokenizeRow(f),h=f;do f++;while(i.lines[f]);if(v++,v%5===0&&new Date-s>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=f,h==-1&&(h=f),c<=h&&i.fireUpdateEvent(c,h)}}}return o.prototype.setTokenizer=function(l){this.tokenizer=l,this.lines=[],this.states=[],this.start(0)},o.prototype.setDocument=function(l){this.doc=l,this.lines=[],this.states=[],this.stop()},o.prototype.fireUpdateEvent=function(l,u){var i={first:l,last:u};this._signal("update",{data:i})},o.prototype.start=function(l){this.currentLine=Math.min(l||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},o.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},o.prototype.$updateOnChange=function(l){var u=l.start.row,i=l.end.row-u;if(i===0)this.lines[u]=null;else if(l.action=="remove")this.lines.splice(u,i+1,null),this.states.splice(u,i+1,null);else{var s=Array(i+1);s.unshift(u,1),this.lines.splice.apply(this.lines,s),this.states.splice.apply(this.states,s)}this.currentLine=Math.min(u,this.currentLine,this.doc.getLength()),this.stop()},o.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},o.prototype.getTokens=function(l){return this.lines[l]||this.$tokenizeRow(l)},o.prototype.getState=function(l){return this.currentLine==l&&this.$tokenizeRow(l),this.states[l]||"start"},o.prototype.$tokenizeRow=function(l){var u=this.doc.getLine(l),i=this.states[l-1],s=this.tokenizer.getLineTokens(u,i,l);return this.states[l]+""!=s.state+""?(this.states[l]=s.state,this.lines[l+1]=null,this.currentLine>l+1&&(this.currentLine=l+1)):this.currentLine==l&&(this.currentLine=l+1),this.lines[l]=s.tokens},o.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},o}();a.implement(r.prototype,d),t.BackgroundTokenizer=r});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,n){"use strict";var a=e("./lib/lang"),d=e("./range").Range,r=function(){function o(l,u,i){i===void 0&&(i="text"),this.setRegexp(l),this.clazz=u,this.type=i}return o.prototype.setRegexp=function(l){this.regExp+""!=l+""&&(this.regExp=l,this.cache=[])},o.prototype.update=function(l,u,i,s){if(this.regExp)for(var f=s.firstRow,h=s.lastRow,p={},c=f;c<=h;c++){var _=this.cache[c];_==null&&(_=a.getMatchOffsets(i.getLine(c),this.regExp),_.length>this.MAX_RANGES&&(_=_.slice(0,this.MAX_RANGES)),_=_.map(function(C){return new d(c,C.offset,c,C.offset+C.length)}),this.cache[c]=_.length?_:"");for(var v=_.length;v--;){var m=_[v].toScreenRange(i),y=m.toString();p[y]||(p[y]=!0,u.drawSingleLineMarker(l,m,this.clazz,s))}}},o}();r.prototype.MAX_RANGES=500,t.SearchHighlight=r});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=function(){function D(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return D.prototype.addSession=function(g){this.$session=g},D.prototype.add=function(g,b,x){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),b===!1||!this.lastDeltas){this.lastDeltas=[];var E=this.$undoStack.length;E>this.$undoDepth-1&&this.$undoStack.splice(0,E-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},D.prototype.addSelection=function(g,b){this.selections.push({value:g,rev:b||this.$rev})},D.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},D.prototype.markIgnored=function(g,b){b==null&&(b=this.$rev+1);for(var x=this.$undoStack,E=x.length;E--;){var T=x[E][0];if(T.id<=g)break;T.id<b&&(T.ignore=!0)}this.lastDeltas=null},D.prototype.getSelection=function(g,b){for(var x=this.selections,E=x.length;E--;){var T=x[E];if(T.rev<g)return b&&(T=x[E+1]),T}},D.prototype.getRevision=function(){return this.$rev},D.prototype.getDeltas=function(g,b){b==null&&(b=this.$rev+1);for(var x=this.$undoStack,E=null,T=0,M=x.length;M--;){var w=x[M][0];if(w.id<b&&!E&&(E=M+1),w.id<=g){T=M+1;break}}return x.slice(T,E)},D.prototype.getChangedRanges=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.getChangedLines=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.undo=function(g,b){this.lastDeltas=null;var x=this.$undoStack;if(d(x,x.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var E=x.pop(),T=null;return E&&(T=g.undoChanges(E,b),this.$redoStack.push(E),this.$syncRev()),this.$fromUndo=!1,T}},D.prototype.redo=function(g,b){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var x=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);S(this.$redoStack,x),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(M){M[0].id=++this.$maxRev},this)}var E=this.$redoStack.pop(),T=null;return E&&(T=g.redoChanges(E,b),this.$undoStack.push(E),this.$syncRev()),this.$fromUndo=!1,T},D.prototype.$syncRev=function(){var g=this.$undoStack,b=g[g.length-1],x=b&&b[0].id||0;this.$redoStackBaseRev=x,this.$rev=x},D.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},D.prototype.canUndo=function(){return this.$undoStack.length>0},D.prototype.canRedo=function(){return this.$redoStack.length>0},D.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},D.prototype.isAtBookmark=function(){return this.$rev===this.mark},D.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},D.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},D.prototype.$prettyPrint=function(g){return g?f(g):f(this.$undoStack)+`
---
`+f(this.$redoStack)},D}();a.prototype.hasUndo=a.prototype.canUndo,a.prototype.hasRedo=a.prototype.canRedo,a.prototype.isClean=a.prototype.isAtBookmark,a.prototype.markClean=a.prototype.bookmark;function d(D,g){for(var b=g;b--;){var x=D[b];if(x&&!x[0].ignore){for(;b<g-1;){var E=c(D[b],D[b+1]);D[b]=E[0],D[b+1]=E[1],b++}return!0}}}var r=e("./range").Range,o=r.comparePoints,l=r.comparePoints;function u(D){var g=D.action=="insert",b=D.start,x=D.end,E=(x.row-b.row)*(g?1:-1),T=(x.column-b.column)*(g?1:-1);g&&(x=b);for(var M in this.marks){var w=this.marks[M],F=l(w,b);if(!(F<0)){if(F===0&&g)if(w.bias==1)F=1;else{w.bias==-1;continue}var L=g?F:l(w,x);if(L>0){w.row+=E,w.column+=w.row==x.row?T:0;continue}!g&&L<=0&&(w.row=b.row,w.column=b.column,L===0&&(w.bias=1))}}}function i(D){return{row:D.row,column:D.column}}function s(D){return{start:i(D.start),end:i(D.end),action:D.action,lines:D.lines.slice()}}function f(D){if(D=D||this,Array.isArray(D))return D.map(f).join(`
`);var g="";return D.action?(g=D.action=="insert"?"+":"-",g+="["+D.lines+"]"):D.value&&(Array.isArray(D.value)?g=D.value.map(h).join(`
`):g=h(D.value)),D.start&&(g+=h(D)),(D.id||D.rev)&&(g+="	("+(D.id||D.rev)+")"),g}function h(D){return D.start.row+":"+D.start.column+"=>"+D.end.row+":"+D.end.column}function p(D,g){var b=D.action=="insert",x=g.action=="insert";if(b&&x)if(o(g.start,D.end)>=0)v(g,D,-1);else if(o(g.start,D.start)<=0)v(D,g,1);else return null;else if(b&&!x)if(o(g.start,D.end)>=0)v(g,D,-1);else if(o(g.end,D.start)<=0)v(D,g,-1);else return null;else if(!b&&x)if(o(g.start,D.start)>=0)v(g,D,1);else if(o(g.start,D.start)<=0)v(D,g,1);else return null;else if(!b&&!x)if(o(g.start,D.start)>=0)v(g,D,1);else if(o(g.end,D.start)<=0)v(D,g,-1);else return null;return[g,D]}function c(D,g){for(var b=D.length;b--;)for(var x=0;x<g.length;x++)if(!p(D[b],g[x])){for(;b<D.length;){for(;x--;)p(g[x],D[b]);x=g.length,b++}return[D,g]}return D.selectionBefore=g.selectionBefore=D.selectionAfter=g.selectionAfter=null,[g,D]}function _(D,g){var b=D.action=="insert",x=g.action=="insert";if(b&&x)o(D.start,g.start)<0?v(g,D,1):v(D,g,1);else if(b&&!x)o(D.start,g.end)>=0?v(D,g,-1):(o(D.start,g.start)<=0||v(D,r.fromPoints(g.start,D.start),-1),v(g,D,1));else if(!b&&x)o(g.start,D.end)>=0?v(g,D,-1):(o(g.start,D.start)<=0||v(g,r.fromPoints(D.start,g.start),-1),v(D,g,1));else if(!b&&!x)if(o(g.start,D.end)>=0)v(g,D,-1);else if(o(g.end,D.start)<=0)v(D,g,-1);else{var E,T;return o(D.start,g.start)<0&&(E=D,D=y(D,g.start)),o(D.end,g.end)>0&&(T=y(D,g.end)),m(g.end,D.start,D.end,-1),T&&!E&&(D.lines=T.lines,D.start=T.start,D.end=T.end,T=D),[g,E,T].filter(Boolean)}return[g,D]}function v(D,g,b){m(D.start,g.start,g.end,b),m(D.end,g.start,g.end,b)}function m(D,g,b,x){D.row==(x==1?g:b).row&&(D.column+=x*(b.column-g.column)),D.row+=x*(b.row-g.row)}function y(D,g){var b=D.lines,x=D.end;D.end=i(g);var E=D.end.row-D.start.row,T=b.splice(E,b.length),M=E?g.column:g.column-D.start.column;b.push(T[0].substring(0,M)),T[0]=T[0].substr(M);var w={start:i(g),end:x,lines:T,action:D.action};return w}function C(D,g){g=s(g);for(var b=D.length;b--;){for(var x=D[b],E=0;E<x.length;E++){var T=x[E],M=_(T,g);g=M[0],M.length!=2&&(M[2]?(x.splice(E+1,1,M[1],M[2]),E++):M[1]||(x.splice(E,1),E--))}x.length||D.splice(b,1)}return D}function S(D,g){for(var b=0;b<g.length;b++)for(var x=g[b],E=0;E<x.length;E++)C(D,x[E])}t.UndoManager=a});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("../range").Range,d=function(){function r(o,l){this.foldData=o,Array.isArray(l)?this.folds=l:l=this.folds=[l];var u=l[l.length-1];this.range=new a(l[0].start.row,l[0].start.column,u.end.row,u.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(i){i.setFoldLine(this)},this)}return r.prototype.shiftRow=function(o){this.start.row+=o,this.end.row+=o,this.folds.forEach(function(l){l.start.row+=o,l.end.row+=o})},r.prototype.addFold=function(o){if(o.sameRow){if(o.start.row<this.startRow||o.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(o),this.folds.sort(function(l,u){return-l.range.compareEnd(u.start.row,u.start.column)}),this.range.compareEnd(o.start.row,o.start.column)>0?(this.end.row=o.end.row,this.end.column=o.end.column):this.range.compareStart(o.end.row,o.end.column)<0&&(this.start.row=o.start.row,this.start.column=o.start.column)}else if(o.start.row==this.end.row)this.folds.push(o),this.end.row=o.end.row,this.end.column=o.end.column;else if(o.end.row==this.start.row)this.folds.unshift(o),this.start.row=o.start.row,this.start.column=o.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");o.foldLine=this},r.prototype.containsRow=function(o){return o>=this.start.row&&o<=this.end.row},r.prototype.walk=function(o,l,u){var i=0,s=this.folds,f,h,p,c=!0;l==null&&(l=this.end.row,u=this.end.column);for(var _=0;_<s.length;_++){if(f=s[_],h=f.range.compareStart(l,u),h==-1){o(null,l,u,i,c);return}if(p=o(null,f.start.row,f.start.column,i,c),p=!p&&o(f.placeholder,f.start.row,f.start.column,i),p||h===0)return;c=!f.sameRow,i=f.end.column}o(null,l,u,i,c)},r.prototype.getNextFoldTo=function(o,l){for(var u,i,s=0;s<this.folds.length;s++){if(u=this.folds[s],i=u.range.compareEnd(o,l),i==-1)return{fold:u,kind:"after"};if(i===0)return{fold:u,kind:"inside"}}return null},r.prototype.addRemoveChars=function(o,l,u){var i=this.getNextFoldTo(o,l),s,f;if(i){if(s=i.fold,i.kind=="inside"&&s.start.column!=l&&s.start.row!=o)window.console&&window.console.log(o,l,s);else if(s.start.row==o){f=this.folds;var h=f.indexOf(s);for(h===0&&(this.start.column+=u),h;h<f.length;h++){if(s=f[h],s.start.column+=u,!s.sameRow)return;s.end.column+=u}this.end.column+=u}}},r.prototype.split=function(o,l){var u=this.getNextFoldTo(o,l);if(!u||u.kind=="inside")return null;var i=u.fold,s=this.folds,f=this.foldData,h=s.indexOf(i),p=s[h-1];this.end.row=p.end.row,this.end.column=p.end.column,s=s.splice(h,s.length-h);var c=new r(f,s);return f.splice(f.indexOf(this)+1,0,c),c},r.prototype.merge=function(o){for(var l=o.folds,u=0;u<l.length;u++)this.addFold(l[u]);var i=this.foldData;i.splice(i.indexOf(o),1)},r.prototype.toString=function(){var o=[this.range.toString()+": ["];return this.folds.forEach(function(l){o.push("  "+l.toString())}),o.push("]"),o.join(`
`)},r.prototype.idxToPosition=function(o){for(var l=0,u=0;u<this.folds.length;u++){var i=this.folds[u];if(o-=i.start.column-l,o<0)return{row:i.start.row,column:i.start.column+o};if(o-=i.placeholder.length,o<0)return i.start;l=i.end.column}return{row:this.end.row,column:this.end.column+o}},r}();t.FoldLine=d});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("./range").Range,d=a.comparePoints,r=function(){function o(){this.ranges=[],this.$bias=1}return o.prototype.pointIndex=function(l,u,i){for(var s=this.ranges,f=i||0;f<s.length;f++){var h=s[f],p=d(l,h.end);if(!(p>0)){var c=d(l,h.start);return p===0?u&&c!==0?-f-2:f:c>0||c===0&&!u?f:-f-1}}return-f-1},o.prototype.add=function(l){var u=!l.isEmpty(),i=this.pointIndex(l.start,u);i<0&&(i=-i-1);var s=this.pointIndex(l.end,u,i);return s<0?s=-s-1:s++,this.ranges.splice(i,s-i,l)},o.prototype.addList=function(l){for(var u=[],i=l.length;i--;)u.push.apply(u,this.add(l[i]));return u},o.prototype.substractPoint=function(l){var u=this.pointIndex(l);if(u>=0)return this.ranges.splice(u,1)},o.prototype.merge=function(){var l=[],u=this.ranges;u=u.sort(function(p,c){return d(p.start,c.start)});for(var i=u[0],s,f=1;f<u.length;f++){s=i,i=u[f];var h=d(s.end,i.start);h<0||h==0&&!s.isEmpty()&&!i.isEmpty()||(d(s.end,i.end)<0&&(s.end.row=i.end.row,s.end.column=i.end.column),u.splice(f,1),l.push(i),i=s,f--)}return this.ranges=u,l},o.prototype.contains=function(l,u){return this.pointIndex({row:l,column:u})>=0},o.prototype.containsPoint=function(l){return this.pointIndex(l)>=0},o.prototype.rangeAtPoint=function(l){var u=this.pointIndex(l);if(u>=0)return this.ranges[u]},o.prototype.clipRows=function(l,u){var i=this.ranges;if(i[0].start.row>u||i[i.length-1].start.row<l)return[];var s=this.pointIndex({row:l,column:0});s<0&&(s=-s-1);var f=this.pointIndex({row:u,column:0},s);f<0&&(f=-f-1);for(var h=[],p=s;p<f;p++)h.push(i[p]);return h},o.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},o.prototype.attach=function(l){this.session&&this.detach(),this.session=l,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},o.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},o.prototype.$onChange=function(l){for(var u=l.start,i=l.end,s=u.row,f=i.row,h=this.ranges,p=0,c=h.length;p<c;p++){var _=h[p];if(_.end.row>=s)break}if(l.action=="insert")for(var v=f-s,m=-u.column+i.column;p<c;p++){var _=h[p];if(_.start.row>s)break;if(_.start.row==s&&_.start.column>=u.column&&(_.start.column==u.column&&this.$bias<=0||(_.start.column+=m,_.start.row+=v)),_.end.row==s&&_.end.column>=u.column){if(_.end.column==u.column&&this.$bias<0)continue;_.end.column==u.column&&m>0&&p<c-1&&_.end.column>_.start.column&&_.end.column==h[p+1].start.column&&(_.end.column-=m),_.end.column+=m,_.end.row+=v}}else for(var v=s-f,m=u.column-i.column;p<c;p++){var _=h[p];if(_.start.row>f)break;_.end.row<f&&(s<_.end.row||s==_.end.row&&u.column<_.end.column)?(_.end.row=s,_.end.column=u.column):_.end.row==f?_.end.column<=i.column?(v||_.end.column>u.column)&&(_.end.column=u.column,_.end.row=u.row):(_.end.column+=m,_.end.row+=v):_.end.row>f&&(_.end.row+=v),_.start.row<f&&(s<_.start.row||s==_.start.row&&u.column<_.start.column)?(_.start.row=s,_.start.column=u.column):_.start.row==f?_.start.column<=i.column?(v||_.start.column>u.column)&&(_.start.column=u.column,_.start.row=u.row):(_.start.column+=m,_.start.row+=v):_.start.row>f&&(_.start.row+=v)}if(v!=0&&p<c)for(;p<c;p++){var _=h[p];_.start.row+=v,_.end.row+=v}},o}();r.prototype.comparePoints=d,t.RangeList=r});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var s=function(f,h){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,c){p.__proto__=c}||function(p,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(p[_]=c[_])},s(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");s(f,h);function p(){this.constructor=f}f.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),d=e("../range_list").RangeList,r=function(s){a(f,s);function f(h,p){var c=s.call(this)||this;return c.foldLine=null,c.placeholder=p,c.range=h,c.start=h.start,c.end=h.end,c.sameRow=h.start.row==h.end.row,c.subFolds=c.ranges=[],c}return f.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},f.prototype.setFoldLine=function(h){this.foldLine=h,this.subFolds.forEach(function(p){p.setFoldLine(h)})},f.prototype.clone=function(){var h=this.range.clone(),p=new f(h,this.placeholder);return this.subFolds.forEach(function(c){p.subFolds.push(c.clone())}),p.collapseChildren=this.collapseChildren,p},f.prototype.addSubFold=function(h){if(!this.range.isEqual(h)){l(h,this.start);for(var m=h.start.row,y=h.start.column,p=0,c=-1;p<this.subFolds.length&&(c=this.subFolds[p].range.compare(m,y),c==1);p++);var _=this.subFolds[p],v=0;if(c==0){if(_.range.containsRange(h))return _.addSubFold(h);v=1}for(var m=h.range.end.row,y=h.range.end.column,C=p,c=-1;C<this.subFolds.length&&(c=this.subFolds[C].range.compare(m,y),c==1);C++);c==0&&C++;for(var S=this.subFolds.splice(p,C-p,h),D=c==0?S.length-1:S.length,g=v;g<D;g++)h.addSubFold(S[g]);return h.setFoldLine(this.foldLine),h}},f.prototype.restoreRange=function(h){return i(h,this.start)},f}(d);function o(s,f){s.row-=f.row,s.row==0&&(s.column-=f.column)}function l(s,f){o(s.start,f),o(s.end,f)}function u(s,f){s.row==0&&(s.column+=f.column),s.row+=f.row}function i(s,f){u(s.start,f),u(s.end,f)}t.Fold=r});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,n){"use strict";var a=e("../range").Range,d=e("./fold_line").FoldLine,r=e("./fold").Fold,o=e("../token_iterator").TokenIterator,l=e("../mouse/mouse_event").MouseEvent;function u(){this.getFoldAt=function(i,s,f){var h=this.getFoldLine(i);if(!h)return null;for(var p=h.folds,c=0;c<p.length;c++){var _=p[c].range;if(_.contains(i,s)){if(f==1&&_.isEnd(i,s)&&!_.isEmpty())continue;if(f==-1&&_.isStart(i,s)&&!_.isEmpty())continue;return p[c]}}},this.getFoldsInRange=function(i){var s=i.start,f=i.end,h=this.$foldData,p=[];s.column+=1,f.column-=1;for(var c=0;c<h.length;c++){var _=h[c].range.compareRange(i);if(_!=2){if(_==-2)break;for(var v=h[c].folds,m=0;m<v.length;m++){var y=v[m];if(_=y.range.compareRange(i),_==-2)break;if(_==2)continue;if(_==42)break;p.push(y)}}}return s.column-=1,f.column+=1,p},this.getFoldsInRangeList=function(i){if(Array.isArray(i)){var s=[];i.forEach(function(f){s=s.concat(this.getFoldsInRange(f))},this)}else var s=this.getFoldsInRange(i);return s},this.getAllFolds=function(){for(var i=[],s=this.$foldData,f=0;f<s.length;f++)for(var h=0;h<s[f].folds.length;h++)i.push(s[f].folds[h]);return i},this.getFoldStringAt=function(i,s,f,h){if(h=h||this.getFoldLine(i),!h)return null;for(var p={end:{column:0}},c,_,v=0;v<h.folds.length;v++){_=h.folds[v];var m=_.range.compareEnd(i,s);if(m==-1){c=this.getLine(_.start.row).substring(p.end.column,_.start.column);break}else if(m===0)return null;p=_}return c||(c=this.getLine(_.start.row).substring(p.end.column)),f==-1?c.substring(0,s-p.end.column):f==1?c.substring(s-p.end.column):c},this.getFoldLine=function(i,s){var f=this.$foldData,h=0;for(s&&(h=f.indexOf(s)),h==-1&&(h=0),h;h<f.length;h++){var p=f[h];if(p.start.row<=i&&p.end.row>=i)return p;if(p.end.row>i)return null}return null},this.getNextFoldLine=function(i,s){var f=this.$foldData,h=0;for(s&&(h=f.indexOf(s)),h==-1&&(h=0),h;h<f.length;h++){var p=f[h];if(p.end.row>=i)return p}return null},this.getFoldedRowCount=function(i,s){for(var f=this.$foldData,h=s-i+1,p=0;p<f.length;p++){var c=f[p],_=c.end.row,v=c.start.row;if(_>=s){v<s&&(v>=i?h-=s-v:h=0);break}else _>=i&&(v>=i?h-=_-v:h-=_-i+1)}return h},this.$addFoldLine=function(i){return this.$foldData.push(i),this.$foldData.sort(function(s,f){return s.start.row-f.start.row}),i},this.addFold=function(i,s){var f=this.$foldData,h=!1,p;i instanceof r?p=i:(p=new r(s,i),p.collapseChildren=s.collapseChildren),this.$clipRangeToDocument(p.range);var c=p.start.row,_=p.start.column,v=p.end.row,m=p.end.column,y=this.getFoldAt(c,_,1),C=this.getFoldAt(v,m,-1);if(y&&C==y)return y.addSubFold(p);y&&!y.range.isStart(c,_)&&this.removeFold(y),C&&!C.range.isEnd(v,m)&&this.removeFold(C);var S=this.getFoldsInRange(p.range);S.length>0&&(this.removeFolds(S),p.collapseChildren||S.forEach(function(x){p.addSubFold(x)}));for(var D=0;D<f.length;D++){var g=f[D];if(v==g.start.row){g.addFold(p),h=!0;break}else if(c==g.end.row){if(g.addFold(p),h=!0,!p.sameRow){var b=f[D+1];if(b&&b.start.row==v){g.merge(b);break}}break}else if(v<=g.start.row)break}return h||(g=this.$addFoldLine(new d(this.$foldData,p))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:p,action:"add"}),p},this.addFolds=function(i){i.forEach(function(s){this.addFold(s)},this)},this.removeFold=function(i){var s=i.foldLine,f=s.start.row,h=s.end.row,p=this.$foldData,c=s.folds;if(c.length==1)p.splice(p.indexOf(s),1);else if(s.range.isEnd(i.end.row,i.end.column))c.pop(),s.end.row=c[c.length-1].end.row,s.end.column=c[c.length-1].end.column;else if(s.range.isStart(i.start.row,i.start.column))c.shift(),s.start.row=c[0].start.row,s.start.column=c[0].start.column;else if(i.sameRow)c.splice(c.indexOf(i),1);else{var _=s.split(i.start.row,i.start.column);c=_.folds,c.shift(),_.start.row=c[0].start.row,_.start.column=c[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(f,h):this.$updateRowLengthCache(f,h)),this.$modified=!0,this._signal("changeFold",{data:i,action:"remove"})},this.removeFolds=function(i){for(var s=[],f=0;f<i.length;f++)s.push(i[f]);s.forEach(function(h){this.removeFold(h)},this),this.$modified=!0},this.expandFold=function(i){this.removeFold(i),i.subFolds.forEach(function(s){i.restoreRange(s),this.addFold(s)},this),i.collapseChildren>0&&this.foldAll(i.start.row+1,i.end.row,i.collapseChildren-1),i.subFolds=[]},this.expandFolds=function(i){i.forEach(function(s){this.expandFold(s)},this)},this.unfold=function(i,s){var f,h;if(i==null)f=new a(0,0,this.getLength(),0),s==null&&(s=!0);else if(typeof i=="number")f=new a(i,0,i,this.getLine(i).length);else if("row"in i)f=a.fromPoints(i,i);else{if(Array.isArray(i))return h=[],i.forEach(function(c){h=h.concat(this.unfold(c))},this),h;f=i}h=this.getFoldsInRangeList(f);for(var p=h;h.length==1&&a.comparePoints(h[0].start,f.start)<0&&a.comparePoints(h[0].end,f.end)>0;)this.expandFolds(h),h=this.getFoldsInRangeList(f);if(s!=!1?this.removeFolds(h):this.expandFolds(h),p.length)return p},this.isRowFolded=function(i,s){return!!this.getFoldLine(i,s)},this.getRowFoldEnd=function(i,s){var f=this.getFoldLine(i,s);return f?f.end.row:i},this.getRowFoldStart=function(i,s){var f=this.getFoldLine(i,s);return f?f.start.row:i},this.getFoldDisplayLine=function(i,s,f,h,p){h==null&&(h=i.start.row),p==null&&(p=0),s==null&&(s=i.end.row),f==null&&(f=this.getLine(s).length);var c=this.doc,_="";return i.walk(function(v,m,y,C){if(!(m<h)){if(m==h){if(y<p)return;C=Math.max(p,C)}v!=null?_+=v:_+=c.getLine(m).substring(C,y)}},s,f),_},this.getDisplayLine=function(i,s,f,h){var p=this.getFoldLine(i);if(p)return this.getFoldDisplayLine(p,i,s,f,h);var c;return c=this.doc.getLine(i),c.substring(h||0,s||c.length)},this.$cloneFoldData=function(){var i=[];return i=this.$foldData.map(function(s){var f=s.folds.map(function(h){return h.clone()});return new d(i,f)}),i},this.toggleFold=function(i){var s=this.selection,f=s.getRange(),h,p;if(f.isEmpty()){var c=f.start;if(h=this.getFoldAt(c.row,c.column),h){this.expandFold(h);return}else(p=this.findMatchingBracket(c))?f.comparePoint(p)==1?f.end=p:(f.start=p,f.start.column++,f.end.column--):(p=this.findMatchingBracket({row:c.row,column:c.column+1}))?(f.comparePoint(p)==1?f.end=p:f.start=p,f.start.column++):f=this.getCommentFoldRange(c.row,c.column)||f}else{var _=this.getFoldsInRange(f);if(i&&_.length){this.expandFolds(_);return}else _.length==1&&(h=_[0])}if(h||(h=this.getFoldAt(f.start.row,f.start.column)),h&&h.range.toString()==f.toString()){this.expandFold(h);return}var v="...";if(!f.isMultiLine()){if(v=this.getTextRange(f),v.length<4)return;v=v.trim().substring(0,2)+".."}this.addFold(v,f)},this.getCommentFoldRange=function(i,s,f){var h=new o(this,i,s),p=h.getCurrentToken(),c=p&&p.type;if(p&&/^comment|string/.test(c)){c=c.match(/comment|string/)[0],c=="comment"&&(c+="|doc-start|\\.doc");var _=new RegExp(c),v=new a;if(f!=1){do p=h.stepBackward();while(p&&_.test(p.type)&&!/^comment.end/.test(p.type));p=h.stepForward()}if(v.start.row=h.getCurrentTokenRow(),v.start.column=h.getCurrentTokenColumn()+(/^comment.start/.test(p.type)?p.value.length:2),h=new o(this,i,s),f!=-1){var m=-1;do if(p=h.stepForward(),m==-1){var y=this.getState(h.$row);_.test(y)||(m=h.$row)}else if(h.$row>m)break;while(p&&_.test(p.type)&&!/^comment.start/.test(p.type));p=h.stepBackward()}else p=h.getCurrentToken();return v.end.row=h.getCurrentTokenRow(),v.end.column=h.getCurrentTokenColumn(),/^comment.end/.test(p.type)||(v.end.column+=p.value.length-2),v}},this.foldAll=function(i,s,f,h){f==null&&(f=1e5);var p=this.foldWidgets;if(p){s=s||this.getLength(),i=i||0;for(var c=i;c<s;c++)if(p[c]==null&&(p[c]=this.getFoldWidget(c)),p[c]=="start"&&!(h&&!h(c))){var _=this.getFoldWidgetRange(c);_&&_.isMultiLine()&&_.end.row<=s&&_.start.row>=i&&(c=_.end.row,_.collapseChildren=f,this.addFold("...",_))}}},this.foldToLevel=function(i){for(this.foldAll();i-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var i=this;this.foldAll(null,null,null,function(s){for(var f=i.getTokens(s),h=0;h<f.length;h++){var p=f[h];if(!(p.type=="text"&&/^\s+$/.test(p.value)))return!!/comment/.test(p.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(i){if(!this.$foldStyles[i])throw new Error("invalid fold style: "+i+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=i){this.$foldStyle=i,i=="manual"&&this.unfold();var s=this.$foldMode;this.$setFolding(null),this.$setFolding(s)}},this.$setFolding=function(i){if(this.$foldMode!=i){if(this.$foldMode=i,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!i||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=i.getFoldWidget.bind(i,this,this.$foldStyle),this.getFoldWidgetRange=i.getFoldWidgetRange.bind(i,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(i,s){var f=this.foldWidgets;if(!f||s&&f[i])return{};for(var h=i-1,p;h>=0;){var c=f[h];if(c==null&&(c=f[h]=this.getFoldWidget(h)),c=="start"){var _=this.getFoldWidgetRange(h);if(p||(p=_),_&&_.end.row>=i)break}h--}return{range:h!==-1&&_,firstRange:p}},this.onFoldWidgetClick=function(i,s){s instanceof l&&(s=s.domEvent);var f={children:s.shiftKey,all:s.ctrlKey||s.metaKey,siblings:s.altKey},h=this.$toggleFoldWidget(i,f);if(!h){var p=s.target||s.srcElement;p&&/ace_fold-widget/.test(p.className)&&(p.className+=" ace_invalid")}},this.$toggleFoldWidget=function(i,s){if(this.getFoldWidget){var f=this.getFoldWidget(i),h=this.getLine(i),p=f==="end"?-1:1,c=this.getFoldAt(i,p===-1?0:h.length,p);if(c)return s.children||s.all?this.removeFold(c):this.expandFold(c),c;var _=this.getFoldWidgetRange(i,!0);if(_&&!_.isMultiLine()&&(c=this.getFoldAt(_.start.row,_.start.column,1),c&&_.isEqual(c.range)))return this.removeFold(c),c;if(s.siblings){var v=this.getParentFoldRangeData(i);if(v.range)var m=v.range.start.row+1,y=v.range.end.row;this.foldAll(m,y,s.all?1e4:0)}else s.children?(y=_?_.end.row:this.getLength(),this.foldAll(i+1,y,s.all?1e4:0)):_&&(s.all&&(_.collapseChildren=1e4),this.addFold("...",_));return _}},this.toggleFoldWidget=function(i){var s=this.selection.getCursor().row;s=this.getRowFoldStart(s);var f=this.$toggleFoldWidget(s,{});if(!f){var h=this.getParentFoldRangeData(s,!0);if(f=h.range||h.firstRange,f){s=f.start.row;var p=this.getFoldAt(s,this.getLine(s).length,1);p?this.removeFold(p):this.addFold("...",f)}}},this.updateFoldWidgets=function(i){var s=i.start.row,f=i.end.row-s;if(f===0)this.foldWidgets[s]=null;else if(i.action=="remove")this.foldWidgets.splice(s,f+1,null);else{var h=Array(f+1);h.unshift(s,1),this.foldWidgets.splice.apply(this.foldWidgets,h)}},this.tokenizerUpdateFoldWidgets=function(i){var s=i.data;s.first!=s.last&&this.foldWidgets.length>s.first&&this.foldWidgets.splice(s.first,this.foldWidgets.length)}}t.Folding=u});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var a=e("../token_iterator").TokenIterator,d=e("../range").Range;function r(){this.findMatchingBracket=function(o,l){if(o.column==0)return null;var u=l||this.getLine(o.row).charAt(o.column-1);if(u=="")return null;var i=u.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],o):this.$findOpeningBracket(i[2],o):null},this.getBracketRange=function(o){var l=this.getLine(o.row),u=!0,i,s=l.charAt(o.column-1),f=s&&s.match(/([\(\[\{])|([\)\]\}])/);if(f||(s=l.charAt(o.column),o={row:o.row,column:o.column+1},f=s&&s.match(/([\(\[\{])|([\)\]\}])/),u=!1),!f)return null;if(f[1]){var h=this.$findClosingBracket(f[1],o);if(!h)return null;i=d.fromPoints(o,h),u||(i.end.column++,i.start.column--),i.cursor=i.end}else{var h=this.$findOpeningBracket(f[2],o);if(!h)return null;i=d.fromPoints(h,o),u||(i.start.column++,i.end.column--),i.cursor=i.start}return i},this.getMatchingBracketRanges=function(o,l){var u=this.getLine(o.row),i=/([\(\[\{])|([\)\]\}])/,s=!l&&u.charAt(o.column-1),f=s&&s.match(i);if(f||(s=(l===void 0||l)&&u.charAt(o.column),o={row:o.row,column:o.column+1},f=s&&s.match(i)),!f)return null;var h=new d(o.row,o.column-1,o.row,o.column),p=f[1]?this.$findClosingBracket(f[1],o):this.$findOpeningBracket(f[2],o);if(!p)return[h];var c=new d(p.row,p.column,p.row,p.column+1);return[h,c]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(o,l,u){var i=this.$brackets[o],s=1,f=new a(this,l.row,l.column),h=f.getCurrentToken();if(h||(h=f.stepForward()),!!h){u||(u=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var p=l.column-f.getCurrentTokenColumn()-2,c=h.value;;){for(;p>=0;){var _=c.charAt(p);if(_==i){if(s-=1,s==0)return{row:f.getCurrentTokenRow(),column:p+f.getCurrentTokenColumn()}}else _==o&&(s+=1);p-=1}do h=f.stepBackward();while(h&&!u.test(h.type));if(h==null)break;c=h.value,p=c.length-1}return null}},this.$findClosingBracket=function(o,l,u){var i=this.$brackets[o],s=1,f=new a(this,l.row,l.column),h=f.getCurrentToken();if(h||(h=f.stepForward()),!!h){u||(u=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var p=l.column-f.getCurrentTokenColumn();;){for(var c=h.value,_=c.length;p<_;){var v=c.charAt(p);if(v==i){if(s-=1,s==0)return{row:f.getCurrentTokenRow(),column:p+f.getCurrentTokenColumn()}}else v==o&&(s+=1);p+=1}do h=f.stepForward();while(h&&!u.test(h.type));if(h==null)break;p=0}return null}},this.getMatchingTags=function(o){var l=new a(this,o.row,o.column),u=this.$findTagName(l);if(u){var i=l.stepBackward();return i.value==="<"?this.$findClosingTag(l,u):this.$findOpeningTag(l,u)}},this.$findTagName=function(o){var l=o.getCurrentToken(),u=!1,i=!1;if(l&&l.type.indexOf("tag-name")===-1)do i?l=o.stepBackward():l=o.stepForward(),l&&(l.value==="/>"?i=!0:l.type.indexOf("tag-name")!==-1&&(u=!0));while(l&&!u);return l},this.$findClosingTag=function(o,l){var u,i=l.value,s=l.value,f=0,h=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);l=o.stepForward();var p=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+l.value.length),c=!1;do if(u=l,l=o.stepForward(),l){if(l.value===">"&&!c){var _=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);c=!0}if(l.type.indexOf("tag-name")!==-1){if(i=l.value,s===i){if(u.value==="<")f++;else if(u.value==="</"&&(f--,f<0)){o.stepBackward();var v=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+2);l=o.stepForward();var m=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+l.value.length);if(l=o.stepForward(),l&&l.value===">")var y=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);else return}}}else if(s===i&&l.value==="/>"&&(f--,f<0))var v=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+2),m=v,y=m,_=new d(p.end.row,p.end.column,p.end.row,p.end.column+1)}while(l&&f>=0);if(h&&_&&v&&y&&p&&m)return{openTag:new d(h.start.row,h.start.column,_.end.row,_.end.column),closeTag:new d(v.start.row,v.start.column,y.end.row,y.end.column),openTagName:p,closeTagName:m}},this.$findOpeningTag=function(o,l){var u=o.getCurrentToken(),i=l.value,s=0,f=o.getCurrentTokenRow(),h=o.getCurrentTokenColumn(),p=h+2,c=new d(f,h,f,p);o.stepForward();var _=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+l.value.length);if(l=o.stepForward(),!(!l||l.value!==">")){var v=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);o.stepBackward(),o.stepBackward();do if(l=u,f=o.getCurrentTokenRow(),h=o.getCurrentTokenColumn(),p=h+l.value.length,u=o.stepBackward(),l){if(l.type.indexOf("tag-name")!==-1){if(i===l.value)if(u.value==="<"){if(s++,s>0){var m=new d(f,h,f,p),y=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);do l=o.stepForward();while(l&&l.value!==">");var C=new d(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1)}}else u.value==="</"&&s--}else if(l.value==="/>"){for(var S=0,D=u;D;){if(D.type.indexOf("tag-name")!==-1&&D.value===i){s--;break}else if(D.value==="<")break;D=o.stepBackward(),S++}for(var g=0;g<S;g++)o.stepForward()}}while(u&&s<=0);if(y&&C&&c&&v&&m&&_)return{openTag:new d(y.start.row,y.start.column,C.end.row,C.end.column),closeTag:new d(c.start.row,c.start.column,v.end.row,v.end.column),openTagName:m,closeTagName:_}}}}t.BracketMatch=r});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var a=e("./lib/oop"),d=e("./lib/lang"),r=e("./bidihandler").BidiHandler,o=e("./config"),l=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,i=e("./mode/text").Mode,s=e("./range").Range,f=e("./document").Document,h=e("./background_tokenizer").BackgroundTokenizer,p=e("./search_highlight").SearchHighlight,c=e("./undomanager").UndoManager,_=function(){function E(T,M){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++E.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new h(new i().getTokenizer(),this);var w=this;this.bgTokenizer.on("update",function(F){w._signal("tokenizerUpdate",F)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof T!="object"||!T.getLine)&&(T=new f(T)),this.setDocument(T),this.selection=new u(this),this.$bidiHandler=new r(this),o.resetOptions(this),this.setMode(M),o._signal("session",this),this.destroyed=!1}return E.prototype.setDocument=function(T){this.doc&&this.doc.off("change",this.$onChange),this.doc=T,T.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},E.prototype.getDocument=function(){return this.doc},E.prototype.$resetRowCache=function(T){if(!T){this.$docRowCache=[],this.$screenRowCache=[];return}var M=this.$docRowCache.length,w=this.$getRowCacheIndex(this.$docRowCache,T)+1;M>w&&(this.$docRowCache.splice(w,M),this.$screenRowCache.splice(w,M))},E.prototype.$getRowCacheIndex=function(T,M){for(var w=0,F=T.length-1;w<=F;){var L=w+F>>1,R=T[L];if(M>R)w=L+1;else if(M<R)F=L-1;else return L}return w-1},E.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},E.prototype.onChangeFold=function(T){var M=T.data;this.$resetRowCache(M.start.row)},E.prototype.onChange=function(T){this.$modified=!0,this.$bidiHandler.onChange(T),this.$resetRowCache(T.start.row);var M=this.$updateInternalDataOnChange(T);!this.$fromUndo&&this.$undoManager&&(M&&M.length&&(this.$undoManager.add({action:"removeFolds",folds:M},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(T,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(T),this._signal("change",T)},E.prototype.setValue=function(T){this.doc.setValue(T),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},E.fromJSON=function(T){typeof T=="string"&&(T=JSON.parse(T));var M=new c;M.$undoStack=T.history.undo,M.$redoStack=T.history.redo,M.mark=T.history.mark,M.$rev=T.history.rev;var w=new E(T.value);return T.folds.forEach(function(F){w.addFold("...",s.fromPoints(F.start,F.end))}),w.setAnnotations(T.annotations),w.setBreakpoints(T.breakpoints),w.setMode(T.mode),w.setScrollLeft(T.scrollLeft),w.setScrollTop(T.scrollTop),w.setUndoManager(M),w.selection.fromJSON(T.selection),w},E.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(T){return T.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},E.prototype.toString=function(){return this.doc.getValue()},E.prototype.getSelection=function(){return this.selection},E.prototype.getState=function(T){return this.bgTokenizer.getState(T)},E.prototype.getTokens=function(T){return this.bgTokenizer.getTokens(T)},E.prototype.getTokenAt=function(T,M){var w=this.bgTokenizer.getTokens(T),F,L=0;if(M==null){var R=w.length-1;L=this.getLine(T).length}else for(var R=0;R<w.length&&(L+=w[R].value.length,!(L>=M));R++);return F=w[R],F?(F.index=R,F.start=L-F.value.length,F):null},E.prototype.setUndoManager=function(T){if(this.$undoManager=T,this.$informUndoManager&&this.$informUndoManager.cancel(),T){var M=this;T.addSession(this),this.$syncInformUndoManager=function(){M.$informUndoManager.cancel(),M.mergeUndoDeltas=!1},this.$informUndoManager=d.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},E.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},E.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},E.prototype.getTabString=function(){return this.getUseSoftTabs()?d.stringRepeat(" ",this.getTabSize()):"	"},E.prototype.setUseSoftTabs=function(T){this.setOption("useSoftTabs",T)},E.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},E.prototype.setTabSize=function(T){this.setOption("tabSize",T)},E.prototype.getTabSize=function(){return this.$tabSize},E.prototype.isTabStop=function(T){return this.$useSoftTabs&&T.column%this.$tabSize===0},E.prototype.setNavigateWithinSoftTabs=function(T){this.setOption("navigateWithinSoftTabs",T)},E.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},E.prototype.setOverwrite=function(T){this.setOption("overwrite",T)},E.prototype.getOverwrite=function(){return this.$overwrite},E.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},E.prototype.addGutterDecoration=function(T,M){this.$decorations[T]||(this.$decorations[T]=""),this.$decorations[T]+=" "+M,this._signal("changeBreakpoint",{})},E.prototype.removeGutterDecoration=function(T,M){this.$decorations[T]=(this.$decorations[T]||"").replace(" "+M,""),this._signal("changeBreakpoint",{})},E.prototype.getBreakpoints=function(){return this.$breakpoints},E.prototype.setBreakpoints=function(T){this.$breakpoints=[];for(var M=0;M<T.length;M++)this.$breakpoints[T[M]]="ace_breakpoint";this._signal("changeBreakpoint",{})},E.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},E.prototype.setBreakpoint=function(T,M){M===void 0&&(M="ace_breakpoint"),M?this.$breakpoints[T]=M:delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},E.prototype.clearBreakpoint=function(T){delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},E.prototype.addMarker=function(T,M,w,F){var L=this.$markerId++,R={range:T,type:w||"line",renderer:typeof w=="function"?w:null,clazz:M,inFront:!!F,id:L};return F?(this.$frontMarkers[L]=R,this._signal("changeFrontMarker")):(this.$backMarkers[L]=R,this._signal("changeBackMarker")),L},E.prototype.addDynamicMarker=function(T,M){if(T.update){var w=this.$markerId++;return T.id=w,T.inFront=!!M,M?(this.$frontMarkers[w]=T,this._signal("changeFrontMarker")):(this.$backMarkers[w]=T,this._signal("changeBackMarker")),T}},E.prototype.removeMarker=function(T){var M=this.$frontMarkers[T]||this.$backMarkers[T];if(M){var w=M.inFront?this.$frontMarkers:this.$backMarkers;delete w[T],this._signal(M.inFront?"changeFrontMarker":"changeBackMarker")}},E.prototype.getMarkers=function(T){return T?this.$frontMarkers:this.$backMarkers},E.prototype.highlight=function(T){if(!this.$searchHighlight){var M=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(M)}this.$searchHighlight.setRegexp(T)},E.prototype.highlightLines=function(T,M,w,F){typeof M!="number"&&(w=M,M=T),w||(w="ace_step");var L=new s(T,0,M,1/0);return L.id=this.addMarker(L,w,"fullLine",F),L},E.prototype.setAnnotations=function(T){this.$annotations=T,this._signal("changeAnnotation",{})},E.prototype.getAnnotations=function(){return this.$annotations||[]},E.prototype.clearAnnotations=function(){this.setAnnotations([])},E.prototype.$detectNewLine=function(T){var M=T.match(/^.*?(\r?\n)/m);M?this.$autoNewLine=M[1]:this.$autoNewLine=`
`},E.prototype.getWordRange=function(T,M){var w=this.getLine(T),F=!1;if(M>0&&(F=!!w.charAt(M-1).match(this.tokenRe)),F||(F=!!w.charAt(M).match(this.tokenRe)),F)var L=this.tokenRe;else if(/^\s+$/.test(w.slice(M-1,M+1)))var L=/\s/;else var L=this.nonTokenRe;var R=M;if(R>0){do R--;while(R>=0&&w.charAt(R).match(L));R++}for(var A=M;A<w.length&&w.charAt(A).match(L);)A++;return new s(T,R,T,A)},E.prototype.getAWordRange=function(T,M){for(var w=this.getWordRange(T,M),F=this.getLine(w.end.row);F.charAt(w.end.column).match(/[ \t]/);)w.end.column+=1;return w},E.prototype.setNewLineMode=function(T){this.doc.setNewLineMode(T)},E.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},E.prototype.setUseWorker=function(T){this.setOption("useWorker",T)},E.prototype.getUseWorker=function(){return this.$useWorker},E.prototype.onReloadTokenizer=function(T){var M=T.data;this.bgTokenizer.start(M.first),this._signal("tokenizerUpdate",T)},E.prototype.setMode=function(T,M){if(T&&typeof T=="object"){if(T.getTokenizer)return this.$onChangeMode(T);var w=T,F=w.path}else F=T||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[F]&&!w){this.$onChangeMode(this.$modes[F]),M&&M();return}this.$modeId=F,o.loadModule(["mode",F],function(L){if(this.$modeId!==F)return M&&M();this.$modes[F]&&!w?this.$onChangeMode(this.$modes[F]):L&&L.Mode&&(L=new L.Mode(w),w||(this.$modes[F]=L,L.$id=F),this.$onChangeMode(L)),M&&M()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},E.prototype.$onChangeMode=function(T,M){if(M||(this.$modeId=T.$id),this.$mode!==T){var w=this.$mode;this.$mode=T,this.$stopWorker(),this.$useWorker&&this.$startWorker();var F=T.getTokenizer();if(F.on!==void 0){var L=this.onReloadTokenizer.bind(this);F.on("update",L)}this.bgTokenizer.setTokenizer(F),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=T.tokenRe,this.nonTokenRe=T.nonTokenRe,M||(T.attachToSession&&T.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(T.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:w,mode:T}))}},E.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},E.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(T){o.warn("Could not load worker",T),this.$worker=null}},E.prototype.getMode=function(){return this.$mode},E.prototype.setScrollTop=function(T){this.$scrollTop===T||isNaN(T)||(this.$scrollTop=T,this._signal("changeScrollTop",T))},E.prototype.getScrollTop=function(){return this.$scrollTop},E.prototype.setScrollLeft=function(T){this.$scrollLeft===T||isNaN(T)||(this.$scrollLeft=T,this._signal("changeScrollLeft",T))},E.prototype.getScrollLeft=function(){return this.$scrollLeft},E.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},E.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var T=0;return this.lineWidgets.forEach(function(M){M&&M.screenWidth>T&&(T=M.screenWidth)}),this.lineWidgetWidth=T},E.prototype.$computeWidth=function(T){if(this.$modified||T){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var M=this.doc.getAllLines(),w=this.$rowLengthCache,F=0,L=0,R=this.$foldData[L],A=R?R.start.row:1/0,I=M.length,$=0;$<I;$++){if($>A){if($=R.end.row+1,$>=I)break;R=this.$foldData[L++],A=R?R.start.row:1/0}w[$]==null&&(w[$]=this.$getStringScreenWidth(M[$])[0]),w[$]>F&&(F=w[$])}this.screenWidth=F}},E.prototype.getLine=function(T){return this.doc.getLine(T)},E.prototype.getLines=function(T,M){return this.doc.getLines(T,M)},E.prototype.getLength=function(){return this.doc.getLength()},E.prototype.getTextRange=function(T){return this.doc.getTextRange(T||this.selection.getRange())},E.prototype.insert=function(T,M){return this.doc.insert(T,M)},E.prototype.remove=function(T){return this.doc.remove(T)},E.prototype.removeFullLines=function(T,M){return this.doc.removeFullLines(T,M)},E.prototype.undoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=T.length-1;w!=-1;w--){var F=T[w];F.action=="insert"||F.action=="remove"?this.doc.revertDelta(F):F.folds&&this.addFolds(F.folds)}!M&&this.$undoSelect&&(T.selectionBefore?this.selection.fromJSON(T.selectionBefore):this.selection.setRange(this.$getUndoSelection(T,!0))),this.$fromUndo=!1}},E.prototype.redoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=0;w<T.length;w++){var F=T[w];(F.action=="insert"||F.action=="remove")&&this.doc.$safeApplyDelta(F)}!M&&this.$undoSelect&&(T.selectionAfter?this.selection.fromJSON(T.selectionAfter):this.selection.setRange(this.$getUndoSelection(T,!1))),this.$fromUndo=!1}},E.prototype.setUndoSelect=function(T){this.$undoSelect=T},E.prototype.$getUndoSelection=function(T,M){function w(I){return M?I.action!=="insert":I.action==="insert"}for(var F,L,R=0;R<T.length;R++){var A=T[R];if(A.start){if(!F){w(A)?F=s.fromPoints(A.start,A.end):F=s.fromPoints(A.start,A.start);continue}w(A)?(L=A.start,F.compare(L.row,L.column)==-1&&F.setStart(L),L=A.end,F.compare(L.row,L.column)==1&&F.setEnd(L)):(L=A.start,F.compare(L.row,L.column)==-1&&(F=s.fromPoints(A.start,A.start)))}}return F},E.prototype.replace=function(T,M){return this.doc.replace(T,M)},E.prototype.moveText=function(T,M,w){var F=this.getTextRange(T),L=this.getFoldsInRange(T),R=s.fromPoints(M,M);if(!w){this.remove(T);var A=T.start.row-T.end.row,I=A?-T.end.column:T.start.column-T.end.column;I&&(R.start.row==T.end.row&&R.start.column>T.end.column&&(R.start.column+=I),R.end.row==T.end.row&&R.end.column>T.end.column&&(R.end.column+=I)),A&&R.start.row>=T.end.row&&(R.start.row+=A,R.end.row+=A)}if(R.end=this.insert(R.start,F),L.length){var $=T.start,H=R.start,A=H.row-$.row,I=H.column-$.column;this.addFolds(L.map(function(G){return G=G.clone(),G.start.row==$.row&&(G.start.column+=I),G.end.row==$.row&&(G.end.column+=I),G.start.row+=A,G.end.row+=A,G}))}return R},E.prototype.indentRows=function(T,M,w){w=w.replace(/\t/g,this.getTabString());for(var F=T;F<=M;F++)this.doc.insertInLine({row:F,column:0},w)},E.prototype.outdentRows=function(T){for(var M=T.collapseRows(),w=new s(0,0,0,0),F=this.getTabSize(),L=M.start.row;L<=M.end.row;++L){var R=this.getLine(L);w.start.row=L,w.end.row=L;for(var A=0;A<F&&R.charAt(A)==" ";++A);A<F&&R.charAt(A)=="	"?(w.start.column=A,w.end.column=A+1):(w.start.column=0,w.end.column=A),this.remove(w)}},E.prototype.$moveLines=function(T,M,w){if(T=this.getRowFoldStart(T),M=this.getRowFoldEnd(M),w<0){var F=this.getRowFoldStart(T+w);if(F<0)return 0;var L=F-T}else if(w>0){var F=this.getRowFoldEnd(M+w);if(F>this.doc.getLength()-1)return 0;var L=F-M}else{T=this.$clipRowToDocument(T),M=this.$clipRowToDocument(M);var L=M-T+1}var R=new s(T,0,M,Number.MAX_VALUE),A=this.getFoldsInRange(R).map(function($){return $=$.clone(),$.start.row+=L,$.end.row+=L,$}),I=w==0?this.doc.getLines(T,M):this.doc.removeFullLines(T,M);return this.doc.insertFullLines(T+L,I),A.length&&this.addFolds(A),L},E.prototype.moveLinesUp=function(T,M){return this.$moveLines(T,M,-1)},E.prototype.moveLinesDown=function(T,M){return this.$moveLines(T,M,1)},E.prototype.duplicateLines=function(T,M){return this.$moveLines(T,M,0)},E.prototype.$clipRowToDocument=function(T){return Math.max(0,Math.min(T,this.doc.getLength()-1))},E.prototype.$clipColumnToRow=function(T,M){return M<0?0:Math.min(this.doc.getLine(T).length,M)},E.prototype.$clipPositionToDocument=function(T,M){if(M=Math.max(0,M),T<0)T=0,M=0;else{var w=this.doc.getLength();T>=w?(T=w-1,M=this.doc.getLine(w-1).length):M=Math.min(this.doc.getLine(T).length,M)}return{row:T,column:M}},E.prototype.$clipRangeToDocument=function(T){T.start.row<0?(T.start.row=0,T.start.column=0):T.start.column=this.$clipColumnToRow(T.start.row,T.start.column);var M=this.doc.getLength()-1;return T.end.row>M?(T.end.row=M,T.end.column=this.doc.getLine(M).length):T.end.column=this.$clipColumnToRow(T.end.row,T.end.column),T},E.prototype.setUseWrapMode=function(T){if(T!=this.$useWrapMode){if(this.$useWrapMode=T,this.$modified=!0,this.$resetRowCache(0),T){var M=this.getLength();this.$wrapData=Array(M),this.$updateWrapData(0,M-1)}this._signal("changeWrapMode")}},E.prototype.getUseWrapMode=function(){return this.$useWrapMode},E.prototype.setWrapLimitRange=function(T,M){(this.$wrapLimitRange.min!==T||this.$wrapLimitRange.max!==M)&&(this.$wrapLimitRange={min:T,max:M},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},E.prototype.adjustWrapLimit=function(T,M){var w=this.$wrapLimitRange;w.max<0&&(w={min:M,max:M});var F=this.$constrainWrapLimit(T,w.min,w.max);return F!=this.$wrapLimit&&F>1?(this.$wrapLimit=F,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},E.prototype.$constrainWrapLimit=function(T,M,w){return M&&(T=Math.max(M,T)),w&&(T=Math.min(w,T)),T},E.prototype.getWrapLimit=function(){return this.$wrapLimit},E.prototype.setWrapLimit=function(T){this.setWrapLimitRange(T,T)},E.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},E.prototype.$updateInternalDataOnChange=function(T){var M=this.$useWrapMode,w=T.action,F=T.start,L=T.end,R=F.row,A=L.row,I=A-R,$=null;if(this.$updating=!0,I!=0)if(w==="remove"){this[M?"$wrapData":"$rowLengthCache"].splice(R,I);var H=this.$foldData;$=this.getFoldsInRange(T),this.removeFolds($);var P=this.getFoldLine(L.row),q=0;if(P){P.addRemoveChars(L.row,L.column,F.column-L.column),P.shiftRow(-I);var G=this.getFoldLine(R);G&&G!==P&&(G.merge(P),P=G),q=H.indexOf(P)+1}for(q;q<H.length;q++){var P=H[q];P.start.row>=L.row&&P.shiftRow(-I)}A=R}else{var B=Array(I);B.unshift(R,0);var Q=M?this.$wrapData:this.$rowLengthCache;Q.splice.apply(Q,B);var H=this.$foldData,P=this.getFoldLine(R),q=0;if(P){var O=P.range.compareInside(F.row,F.column);O==0?(P=P.split(F.row,F.column),P&&(P.shiftRow(I),P.addRemoveChars(A,0,L.column-F.column))):O==-1&&(P.addRemoveChars(R,0,L.column-F.column),P.shiftRow(I)),q=H.indexOf(P)+1}for(q;q<H.length;q++){var P=H[q];P.start.row>=R&&P.shiftRow(I)}}else{I=Math.abs(T.start.column-T.end.column),w==="remove"&&($=this.getFoldsInRange(T),this.removeFolds($),I=-I);var P=this.getFoldLine(R);P&&P.addRemoveChars(R,F.column,I)}return M&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,M?this.$updateWrapData(R,A):this.$updateRowLengthCache(R,A),$},E.prototype.$updateRowLengthCache=function(T,M){this.$rowLengthCache[T]=null,this.$rowLengthCache[M]=null},E.prototype.$updateWrapData=function(T,M){var w=this.doc.getAllLines(),F=this.getTabSize(),L=this.$wrapData,R=this.$wrapLimit,A,I,$=T;for(M=Math.min(M,w.length-1);$<=M;)I=this.getFoldLine($,I),I?(A=[],I.walk(function(H,P,q,G){var B;if(H!=null){B=this.$getDisplayTokens(H,A.length),B[0]=y;for(var Q=1;Q<B.length;Q++)B[Q]=C}else B=this.$getDisplayTokens(w[P].substring(G,q),A.length);A=A.concat(B)}.bind(this),I.end.row,w[I.end.row].length+1),L[I.start.row]=this.$computeWrapSplits(A,R,F),$=I.end.row+1):(A=this.$getDisplayTokens(w[$]),L[$]=this.$computeWrapSplits(A,R,F),$++)},E.prototype.$computeWrapSplits=function(T,M,w){if(T.length==0)return[];var F=[],L=T.length,R=0,A=0,I=this.$wrapAsCode,$=this.$indentedSoftWrap,H=M<=Math.max(2*w,8)||$===!1?0:Math.floor(M/2);function P(){var O=0;if(H===0)return O;if($)for(var W=0;W<T.length;W++){var U=T[W];if(U==D)O+=1;else if(U==g)O+=w;else{if(U==b)continue;break}}return I&&$!==!1&&(O+=w),Math.min(O,H)}function q(O){for(var W=O-R,U=R;U<O;U++){var N=T[U];(N===12||N===2)&&(W-=1)}F.length||(G=P(),F.indent=G),A+=W,F.push(A),R=O}for(var G=0;L-R>M-G;){var B=R+M-G;if(T[B-1]>=D&&T[B]>=D){q(B);continue}if(T[B]==y||T[B]==C){for(B;B!=R-1&&T[B]!=y;B--);if(B>R){q(B);continue}for(B=R+M,B;B<T.length&&T[B]==C;B++);if(B==T.length)break;q(B);continue}for(var Q=Math.max(B-(M-(M>>2)),R-1);B>Q&&T[B]<y;)B--;if(I){for(;B>Q&&T[B]<y;)B--;for(;B>Q&&T[B]==S;)B--}else for(;B>Q&&T[B]<D;)B--;if(B>Q){q(++B);continue}B=R+M,T[B]==m&&B--,q(B-G)}return F},E.prototype.$getDisplayTokens=function(T,M){var w=[],F;M=M||0;for(var L=0;L<T.length;L++){var R=T.charCodeAt(L);if(R==9){F=this.getScreenTabSize(w.length+M),w.push(g);for(var A=1;A<F;A++)w.push(b)}else R==32?w.push(D):R>39&&R<48||R>57&&R<64?w.push(S):R>=4352&&x(R)?w.push(v,m):w.push(v)}return w},E.prototype.$getStringScreenWidth=function(T,M,w){if(M==0)return[0,0];M==null&&(M=1/0),w=w||0;var F,L;for(L=0;L<T.length&&(F=T.charCodeAt(L),F==9?w+=this.getScreenTabSize(w):F>=4352&&x(F)?w+=2:w+=1,!(w>M));L++);return[w,L]},E.prototype.getRowLength=function(T){var M=1;return this.lineWidgets&&(M+=this.lineWidgets[T]&&this.lineWidgets[T].rowCount||0),!this.$useWrapMode||!this.$wrapData[T]?M:this.$wrapData[T].length+M},E.prototype.getRowLineCount=function(T){return!this.$useWrapMode||!this.$wrapData[T]?1:this.$wrapData[T].length+1},E.prototype.getRowWrapIndent=function(T){if(this.$useWrapMode){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE),w=this.$wrapData[M.row];return w.length&&w[0]<M.column?w.indent:0}else return 0},E.prototype.getScreenLastRowColumn=function(T){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE);return this.documentToScreenColumn(M.row,M.column)},E.prototype.getDocumentLastRowColumn=function(T,M){var w=this.documentToScreenRow(T,M);return this.getScreenLastRowColumn(w)},E.prototype.getDocumentLastRowColumnPosition=function(T,M){var w=this.documentToScreenRow(T,M);return this.screenToDocumentPosition(w,Number.MAX_VALUE/10)},E.prototype.getRowSplitData=function(T){if(this.$useWrapMode)return this.$wrapData[T]},E.prototype.getScreenTabSize=function(T){return this.$tabSize-(T%this.$tabSize|0)},E.prototype.screenToDocumentRow=function(T,M){return this.screenToDocumentPosition(T,M).row},E.prototype.screenToDocumentColumn=function(T,M){return this.screenToDocumentPosition(T,M).column},E.prototype.screenToDocumentPosition=function(T,M,w){if(T<0)return{row:0,column:0};var F,L=0,R=0,A,I=0,$=0,H=this.$screenRowCache,P=this.$getRowCacheIndex(H,T),q=H.length;if(q&&P>=0)var I=H[P],L=this.$docRowCache[P],G=T>H[q-1];else var G=!q;for(var B=this.getLength()-1,Q=this.getNextFoldLine(L),O=Q?Q.start.row:1/0;I<=T&&($=this.getRowLength(L),!(I+$>T||L>=B));)I+=$,L++,L>O&&(L=Q.end.row+1,Q=this.getNextFoldLine(L,Q),O=Q?Q.start.row:1/0),G&&(this.$docRowCache.push(L),this.$screenRowCache.push(I));if(Q&&Q.start.row<=L)F=this.getFoldDisplayLine(Q),L=Q.start.row;else{if(I+$<=T||L>B)return{row:B,column:this.getLine(B).length};F=this.getLine(L),Q=null}var W=0,U=Math.floor(T-I);if(this.$useWrapMode){var N=this.$wrapData[L];N&&(A=N[U],U>0&&N.length&&(W=N.indent,R=N[U-1]||N[N.length-1],F=F.substring(R)))}return w!==void 0&&this.$bidiHandler.isBidiRow(I+U,L,U)&&(M=this.$bidiHandler.offsetToCol(w)),R+=this.$getStringScreenWidth(F,M-W)[1],this.$useWrapMode&&R>=A&&(R=A-1),Q?Q.idxToPosition(R):{row:L,column:R}},E.prototype.documentToScreenPosition=function(T,M){if(typeof M>"u")var w=this.$clipPositionToDocument(T.row,T.column);else w=this.$clipPositionToDocument(T,M);T=w.row,M=w.column;var F=0,L=null,R=null;R=this.getFoldAt(T,M,1),R&&(T=R.start.row,M=R.start.column);var A,I=0,$=this.$docRowCache,H=this.$getRowCacheIndex($,T),P=$.length;if(P&&H>=0)var I=$[H],F=this.$screenRowCache[H],q=T>$[P-1];else var q=!P;for(var G=this.getNextFoldLine(I),B=G?G.start.row:1/0;I<T;){if(I>=B){if(A=G.end.row+1,A>T)break;G=this.getNextFoldLine(A,G),B=G?G.start.row:1/0}else A=I+1;F+=this.getRowLength(I),I=A,q&&(this.$docRowCache.push(I),this.$screenRowCache.push(F))}var Q="";G&&I>=B?(Q=this.getFoldDisplayLine(G,T,M),L=G.start.row):(Q=this.getLine(T).substring(0,M),L=T);var O=0;if(this.$useWrapMode){var W=this.$wrapData[L];if(W){for(var U=0;Q.length>=W[U];)F++,U++;Q=Q.substring(W[U-1]||0,Q.length),O=U>0?W.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(F+=this.lineWidgets[I].rowsAbove),{row:F,column:O+this.$getStringScreenWidth(Q)[0]}},E.prototype.documentToScreenColumn=function(T,M){return this.documentToScreenPosition(T,M).column},E.prototype.documentToScreenRow=function(T,M){return this.documentToScreenPosition(T,M).row},E.prototype.getScreenLength=function(){var T=0,M=null;if(this.$useWrapMode)for(var L=this.$wrapData.length,R=0,F=0,M=this.$foldData[F++],A=M?M.start.row:1/0;R<L;){var I=this.$wrapData[R];T+=I?I.length+1:1,R++,R>A&&(R=M.end.row+1,M=this.$foldData[F++],A=M?M.start.row:1/0)}else{T=this.getLength();for(var w=this.$foldData,F=0;F<w.length;F++)M=w[F],T-=M.end.row-M.start.row}return this.lineWidgets&&(T+=this.$getWidgetScreenLength()),T},E.prototype.$setFontMetrics=function(T){this.$enableVarChar&&(this.$getStringScreenWidth=function(M,w,F){if(w===0)return[0,0];w||(w=1/0),F=F||0;var L,R;for(R=0;R<M.length&&(L=M.charAt(R),L==="	"?F+=this.getScreenTabSize(F):F+=T.getCharacterWidth(L),!(F>w));R++);return[F,R]})},E.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},E}();_.$uid=0,_.prototype.$modes=o.$modes,_.prototype.getValue=_.prototype.toString,_.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},_.prototype.$overwrite=!1,_.prototype.$mode=null,_.prototype.$modeId=null,_.prototype.$scrollTop=0,_.prototype.$scrollLeft=0,_.prototype.$wrapLimit=80,_.prototype.$useWrapMode=!1,_.prototype.$wrapLimitRange={min:null,max:null},_.prototype.lineWidgets=null,_.prototype.isFullWidth=x,a.implement(_.prototype,l);var v=1,m=2,y=3,C=4,S=9,D=10,g=11,b=12;function x(E){return E<4352?!1:E>=4352&&E<=4447||E>=4515&&E<=4519||E>=4602&&E<=4607||E>=9001&&E<=9002||E>=11904&&E<=11929||E>=11931&&E<=12019||E>=12032&&E<=12245||E>=12272&&E<=12283||E>=12288&&E<=12350||E>=12353&&E<=12438||E>=12441&&E<=12543||E>=12549&&E<=12589||E>=12593&&E<=12686||E>=12688&&E<=12730||E>=12736&&E<=12771||E>=12784&&E<=12830||E>=12832&&E<=12871||E>=12880&&E<=13054||E>=13056&&E<=19903||E>=19968&&E<=42124||E>=42128&&E<=42182||E>=43360&&E<=43388||E>=44032&&E<=55203||E>=55216&&E<=55238||E>=55243&&E<=55291||E>=63744&&E<=64255||E>=65040&&E<=65049||E>=65072&&E<=65106||E>=65108&&E<=65126||E>=65128&&E<=65131||E>=65281&&E<=65376||E>=65504&&E<=65510}e("./edit_session/folding").Folding.call(_.prototype),e("./edit_session/bracket_match").BracketMatch.call(_.prototype),o.defineOptions(_.prototype,"session",{wrap:{set:function(E){if(!E||E=="off"?E=!1:E=="free"?E=!0:E=="printMargin"?E=-1:typeof E=="string"&&(E=parseInt(E,10)||!1),this.$wrap!=E)if(this.$wrap=E,!E)this.setUseWrapMode(!1);else{var T=typeof E=="number"?E:null;this.setWrapLimitRange(T,T),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(E){E=E=="auto"?this.$mode.type!="text":E!="text",E!=this.$wrapAsCode&&(this.$wrapAsCode=E,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(E){this.$useWorker=E,this.$stopWorker(),E&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(E){E=parseInt(E),E>0&&this.$tabSize!==E&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=E,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(E){this.setFoldStyle(E)},handlesSet:!0},overwrite:{set:function(E){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(E){this.doc.setNewLineMode(E)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(E){this.setMode(E)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=_});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var a=e("./lib/lang"),d=e("./lib/oop"),r=e("./range").Range,o=function(){function u(){this.$options={}}return u.prototype.set=function(i){return d.mixin(this.$options,i),this},u.prototype.getOptions=function(){return a.copyObject(this.$options)},u.prototype.setOptions=function(i){this.$options=i},u.prototype.find=function(i){var s=this.$options,f=this.$matchIterator(i,s);if(!f)return!1;var h=null;return f.forEach(function(p,c,_,v){return h=new r(p,c,_,v),c==v&&s.start&&s.start.start&&s.skipCurrent!=!1&&h.isEqual(s.start)?(h=null,!1):!0}),h},u.prototype.findAll=function(i){var s=this.$options;if(!s.needle)return[];this.$assembleRegExp(s);var f=s.range,h=f?i.getLines(f.start.row,f.end.row):i.doc.getAllLines(),p=[],c=s.re;if(s.$isMultiLine){var _=c.length,v=h.length-_,m;e:for(var y=c.offset||0;y<=v;y++){for(var C=0;C<_;C++)if(h[y+C].search(c[C])==-1)continue e;var S=h[y],D=h[y+_-1],g=S.length-S.match(c[0])[0].length,b=D.match(c[_-1])[0].length;m&&m.end.row===y&&m.end.column>g||(p.push(m=new r(y,g,y+_-1,b)),_>2&&(y=y+_-2))}}else for(var x=0;x<h.length;x++)for(var E=a.getMatchOffsets(h[x],c),C=0;C<E.length;C++){var T=E[C];p.push(new r(x,T.offset,x,T.offset+T.length))}if(f){for(var M=f.start.column,w=f.end.column,x=0,C=p.length-1;x<C&&p[x].start.column<M&&p[x].start.row==0;)x++;for(var F=f.end.row-f.start.row;x<C&&p[C].end.column>w&&p[C].end.row==F;)C--;for(p=p.slice(x,C+1),x=0,C=p.length;x<C;x++)p[x].start.row+=f.start.row,p[x].end.row+=f.start.row}return p},u.prototype.replace=function(i,s){var f=this.$options,h=this.$assembleRegExp(f);if(f.$isMultiLine)return s;if(h){var p=h.exec(i);if(!p||p[0].length!=i.length)return null;if(s=i.replace(h,s),f.preserveCase){s=s.split("");for(var c=Math.min(i.length,i.length);c--;){var _=i[c];_&&_.toLowerCase()!=_?s[c]=s[c].toUpperCase():s[c]=s[c].toLowerCase()}s=s.join("")}return s}},u.prototype.$assembleRegExp=function(i,s){if(i.needle instanceof RegExp)return i.re=i.needle;var f=i.needle;if(!i.needle)return i.re=!1;i.regExp||(f=a.escapeRegExp(f));var h=i.caseSensitive?"gm":"gmi";try{new RegExp(f,"u"),i.$supportsUnicodeFlag=!0,h+="u"}catch{i.$supportsUnicodeFlag=!1}if(i.wholeWord&&(f=l(f,i)),i.$isMultiLine=!s&&/[\n\r]/.test(f),i.$isMultiLine)return i.re=this.$assembleMultilineRegExp(f,h);try{var p=new RegExp(f,h)}catch{p=!1}return i.re=p},u.prototype.$assembleMultilineRegExp=function(i,s){for(var f=i.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),h=[],p=0;p<f.length;p++)try{h.push(new RegExp(f[p],s))}catch{return!1}return h},u.prototype.$matchIterator=function(i,s){var f=this.$assembleRegExp(s);if(!f)return!1;var h=s.backwards==!0,p=s.skipCurrent!=!1,c=f.unicode,_=s.range,v=s.start;v||(v=_?_[h?"end":"start"]:i.selection.getRange()),v.start&&(v=v[p!=h?"end":"start"]);var m=_?_.start.row:0,y=_?_.end.row:i.getLength()-1;if(h)var C=function(g){var b=v.row;if(!D(b,v.column,g)){for(b--;b>=m;b--)if(D(b,Number.MAX_VALUE,g))return;if(s.wrap!=!1){for(b=y,m=v.row;b>=m;b--)if(D(b,Number.MAX_VALUE,g))return}}};else var C=function(b){var x=v.row;if(!D(x,v.column,b)){for(x=x+1;x<=y;x++)if(D(x,0,b))return;if(s.wrap!=!1){for(x=m,y=v.row;x<=y;x++)if(D(x,0,b))return}}};if(s.$isMultiLine)var S=f.length,D=function(g,b,x){var E=h?g-S+1:g;if(!(E<0||E+S>i.getLength())){var T=i.getLine(E),M=T.search(f[0]);if(!(!h&&M<b||M===-1)){for(var w=1;w<S;w++)if(T=i.getLine(E+w),T.search(f[w])==-1)return;var F=T.match(f[S-1])[0].length;if(!(h&&F>b)&&x(E,M,E+S-1,F))return!0}}};else if(h)var D=function(b,x,E){var T=i.getLine(b),M=[],w,F=0;for(f.lastIndex=0;w=f.exec(T);){var L=w[0].length;if(F=w.index,!L){if(F>=T.length)break;f.lastIndex=F+=a.skipEmptyMatch(T,F,c)}if(w.index+L>x)break;M.push(w.index,L)}for(var R=M.length-1;R>=0;R-=2){var A=M[R-1],L=M[R];if(E(b,A,b,A+L))return!0}};else var D=function(b,x,E){var T=i.getLine(b),M,w;for(f.lastIndex=x;w=f.exec(T);){var F=w[0].length;if(M=w.index,E(b,M,b,M+F))return!0;if(!F&&(f.lastIndex=M+=a.skipEmptyMatch(T,M,c),M>=T.length))return!1}};return{forEach:C}},u}();function l(u,i){var s=a.supportsLookbehind();function f(_,v){v===void 0&&(v=!0);var m=s&&i.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return m.test(_)||i.regExp?s&&i.$supportsUnicodeFlag?v?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var h=Array.from(u),p=h[0],c=h[h.length-1];return f(p)+u+f(c,!1)}t.Search=o});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var s=function(f,h){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,c){p.__proto__=c}||function(p,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(p[_]=c[_])},s(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");s(f,h);function p(){this.constructor=f}f.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),d=e("../lib/keys"),r=e("../lib/useragent"),o=d.KEY_MODS,l=function(){function s(f,h){this.$init(f,h,!1)}return s.prototype.$init=function(f,h,p){this.platform=h||(r.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(f),this.$singleCommand=p},s.prototype.addCommand=function(f){this.commands[f.name]&&this.removeCommand(f),this.commands[f.name]=f,f.bindKey&&this._buildKeyHash(f)},s.prototype.removeCommand=function(f,h){var p=f&&(typeof f=="string"?f:f.name);f=this.commands[p],h||delete this.commands[p];var c=this.commandKeyBinding;for(var _ in c){var v=c[_];if(v==f)delete c[_];else if(Array.isArray(v)){var m=v.indexOf(f);m!=-1&&(v.splice(m,1),v.length==1&&(c[_]=v[0]))}}},s.prototype.bindKey=function(f,h,p){if(typeof f=="object"&&f&&(p==null&&(p=f.position),f=f[this.platform]),!!f){if(typeof h=="function")return this.addCommand({exec:h,bindKey:f,name:h.name||f});f.split("|").forEach(function(c){var _="";if(c.indexOf(" ")!=-1){var v=c.split(/\s+/);c=v.pop(),v.forEach(function(C){var S=this.parseKeys(C),D=o[S.hashId]+S.key;_+=(_?" ":"")+D,this._addCommandToBinding(_,"chainKeys")},this),_+=" "}var m=this.parseKeys(c),y=o[m.hashId]+m.key;this._addCommandToBinding(_+y,h,p)},this)}},s.prototype._addCommandToBinding=function(f,h,p){var c=this.commandKeyBinding,_;if(!h)delete c[f];else if(!c[f]||this.$singleCommand)c[f]=h;else{Array.isArray(c[f])?(_=c[f].indexOf(h))!=-1&&c[f].splice(_,1):c[f]=[c[f]],typeof p!="number"&&(p=u(h));var v=c[f];for(_=0;_<v.length;_++){var m=v[_],y=u(m);if(y>p)break}v.splice(_,0,h)}},s.prototype.addCommands=function(f){f&&Object.keys(f).forEach(function(h){var p=f[h];if(p){if(typeof p=="string")return this.bindKey(p,h);typeof p=="function"&&(p={exec:p}),typeof p=="object"&&(p.name||(p.name=h),this.addCommand(p))}},this)},s.prototype.removeCommands=function(f){Object.keys(f).forEach(function(h){this.removeCommand(f[h])},this)},s.prototype.bindKeys=function(f){Object.keys(f).forEach(function(h){this.bindKey(h,f[h])},this)},s.prototype._buildKeyHash=function(f){this.bindKey(f.bindKey,f)},s.prototype.parseKeys=function(f){var h=f.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),p=h.pop(),c=d[p];if(d.FUNCTION_KEYS[c])p=d.FUNCTION_KEYS[c].toLowerCase();else if(h.length){if(h.length==1&&h[0]=="shift")return{key:p.toUpperCase(),hashId:-1}}else return{key:p,hashId:-1};for(var _=0,v=h.length;v--;){var m=d.KEY_MODS[h[v]];if(m==null)return typeof console<"u"&&console.error("invalid modifier "+h[v]+" in "+f),!1;_|=m}return{key:p,hashId:_}},s.prototype.findKeyCommand=function(f,h){var p=o[f]+h;return this.commandKeyBinding[p]},s.prototype.handleKeyboard=function(f,h,p,c){if(!(c<0)){var _=o[h]+p,v=this.commandKeyBinding[_];return f.$keyChain&&(f.$keyChain+=" "+_,v=this.commandKeyBinding[f.$keyChain]||v),v&&(v=="chainKeys"||v[v.length-1]=="chainKeys")?(f.$keyChain=f.$keyChain||_,{command:"null"}):(f.$keyChain&&((!h||h==4)&&p.length==1?f.$keyChain=f.$keyChain.slice(0,-_.length-1):(h==-1||c>0)&&(f.$keyChain="")),{command:v})}},s.prototype.getStatusText=function(f,h){return h.$keyChain||""},s}();function u(s){return typeof s=="object"&&s.bindKey&&s.bindKey.position||(s.isDefault?-100:0)}var i=function(s){a(f,s);function f(h,p){var c=s.call(this,h,p)||this;return c.$singleCommand=!0,c}return f}(l);i.call=function(s,f,h){l.prototype.$init.call(s,f,h,!0)},l.call=function(s,f,h){l.prototype.$init.call(s,f,h,!1)},t.HashHandler=i,t.MultiHashHandler=l});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var u=function(i,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(f[p]=h[p])},u(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");u(i,s);function f(){this.constructor=i}i.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),d=e("../lib/oop"),r=e("../keyboard/hash_handler").MultiHashHandler,o=e("../lib/event_emitter").EventEmitter,l=function(u){a(i,u);function i(s,f){var h=u.call(this,f,s)||this;return h.byName=h.commands,h.setDefaultHandler("exec",function(p){return p.args?p.command.exec(p.editor,p.args,p.event,!1):p.command.exec(p.editor,{},p.event,!0)}),h}return i.prototype.exec=function(s,f,h){if(Array.isArray(s)){for(var p=s.length;p--;)if(this.exec(s[p],f,h))return!0;return!1}if(typeof s=="string"&&(s=this.commands[s]),!s||f&&f.$readOnly&&!s.readOnly||this.$checkCommandState!=!1&&s.isAvailable&&!s.isAvailable(f))return!1;var c={editor:f,command:s,args:h};return c.returnValue=this._emit("exec",c),this._signal("afterExec",c),c.returnValue!==!1},i.prototype.toggleRecording=function(s){if(!this.$inReplay)return s&&s._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(f){this.macro.push([f.command,f.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},i.prototype.replay=function(s){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(s);try{this.$inReplay=!0,this.macro.forEach(function(f){typeof f=="string"?this.exec(f,s):this.exec(f[0],s,f[1])},this)}finally{this.$inReplay=!1}}},i.prototype.trimMacro=function(s){return s.map(function(f){return typeof f[0]!="string"&&(f[0]=f[0].name),f[1]||(f=f[0]),f})},i}(r);d.implement(l.prototype,o),t.CommandManager=l});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var a=e("../lib/lang"),d=e("../config"),r=e("../range").Range;function o(u,i){return{win:u,mac:i}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:o("Ctrl-,","Command-,"),exec:function(u){d.loadModule("ace/ext/settings_menu",function(i){i.init(u),u.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:o("Alt-E","F4"),exec:function(u){d.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(u,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:o("Alt-Shift-E","Shift-F4"),exec:function(u){d.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(u,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:o("Ctrl-A","Command-A"),exec:function(u){u.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:o(null,"Ctrl-L"),exec:function(u){u.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:o("Ctrl-L","Command-L"),exec:function(u,i){typeof i=="number"&&!isNaN(i)&&u.gotoLine(i),u.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(u){u.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(u){u.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:o("F2","F2"),exec:function(u){u.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:o("Alt-F2","Alt-F2"),exec:function(u){u.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:o("Alt-0","Command-Option-0"),exec:function(u){u.session.foldAll(),u.session.unfold(u.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(u){u.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:o("Ctrl-K","Command-G"),exec:function(u){u.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(u){u.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:o("Alt-K","Ctrl-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:o("Ctrl-F","Command-F"),exec:function(u){d.loadModule("ace/ext/searchbox",function(i){i.Search(u)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(u){u.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:o("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(u){u.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(u){u.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:o("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(u){u.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:o("Up","Up|Ctrl-P"),exec:function(u,i){u.navigateUp(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:o("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(u){u.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(u){u.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:o("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(u){u.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:o("Down","Down|Ctrl-N"),exec:function(u,i){u.navigateDown(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(u){u.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:o("Ctrl-Left","Option-Left"),exec:function(u){u.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:o("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(u){u.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:o("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(u){u.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:o("Left","Left|Ctrl-B"),exec:function(u,i){u.navigateLeft(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(u){u.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:o("Ctrl-Right","Option-Right"),exec:function(u){u.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:o("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(u){u.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:o("Shift-Right","Shift-Right"),exec:function(u){u.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:o("Right","Right|Ctrl-F"),exec:function(u,i){u.navigateRight(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(u){u.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:o(null,"Option-PageDown"),exec:function(u){u.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(u){u.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(u){u.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:o(null,"Option-PageUp"),exec:function(u){u.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(u){u.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:o("Ctrl-Up",null),exec:function(u){u.renderer.scrollBy(0,-2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:o("Ctrl-Down",null),exec:function(u){u.renderer.scrollBy(0,2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(u){u.commands.toggleRecording(u)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(u){u.commands.replay(u)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:o("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(u){u.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:o("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(u){u.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(u){u.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(u){},readOnly:!0},{name:"cut",description:"Cut",exec:function(u){var i=u.$copyWithEmptySelection&&u.selection.isEmpty(),s=i?u.selection.getLineRange():u.selection.getRange();u._emit("cut",s),s.isEmpty()||u.session.remove(s),u.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(u,i){u.$handlePaste(i)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:o("Ctrl-D","Command-D"),exec:function(u){u.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(u){u.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(u){u.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:o("Ctrl-/","Command-/"),exec:function(u){u.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(u){u.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(u){u.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(u){u.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(u){d.loadModule("ace/ext/searchbox",function(i){i.Search(u,!0)})}},{name:"undo",description:"Undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(u){u.undo()}},{name:"redo",description:"Redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(u){u.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(u){u.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:o("Alt-Up","Option-Up"),exec:function(u){u.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(u){u.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:o("Alt-Down","Option-Down"),exec:function(u){u.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(u){u.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(u){u.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:o("Shift-Delete",null),exec:function(u){if(u.selection.isEmpty())u.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(u){u.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:o("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(u){u.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:o("Ctrl-Shift-Backspace",null),exec:function(u){var i=u.selection.getRange();i.start.column=0,u.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:o("Ctrl-Shift-Delete",null),exec:function(u){var i=u.selection.getRange();i.end.column=Number.MAX_VALUE,u.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(u){u.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(u){u.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(u){u.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:o("Tab","Tab"),exec:function(u){u.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(u){u.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(u){u.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(u,i){u.insert(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(u,i){u.insert(a.stringRepeat(i.text||"",i.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:o(null,"Ctrl-O"),exec:function(u){u.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:o("Alt-Shift-X","Ctrl-T"),exec:function(u){u.transposeLetters()},multiSelectAction:function(u){u.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(u){u.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(u){u.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:o(null,null),exec:function(u){u.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(u){var i=u.selection.getRange();i.start.column=i.end.column=0,i.end.row++,u.selection.setRange(i,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:o("Ctrl+F3","F3"),exec:function(u){u.openLink()}},{name:"joinlines",description:"Join lines",bindKey:o(null,null),exec:function(u){for(var i=u.selection.isBackwards(),s=i?u.selection.getSelectionLead():u.selection.getSelectionAnchor(),f=i?u.selection.getSelectionAnchor():u.selection.getSelectionLead(),h=u.session.doc.getLine(s.row).length,p=u.session.doc.getTextRange(u.selection.getRange()),c=p.replace(/\n\s*/," ").length,_=u.session.doc.getLine(s.row),v=s.row+1;v<=f.row+1;v++){var m=a.stringTrimLeft(a.stringTrimRight(u.session.doc.getLine(v)));m.length!==0&&(m=" "+m),_+=m}f.row+1<u.session.doc.getLength()-1&&(_+=u.session.doc.getNewLineCharacter()),u.clearSelection(),u.session.doc.replace(new r(s.row,0,f.row+2,0),_),c>0?(u.selection.moveCursorTo(s.row,s.column),u.selection.selectTo(s.row,s.column+c)):(h=u.session.doc.getLine(s.row).length>h?h+1:h,u.selection.moveCursorTo(s.row,h))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:o(null,null),exec:function(u){var i=u.session.doc.getLength()-1,s=u.session.doc.getLine(i).length,f=u.selection.rangeList.ranges,h=[];f.length<1&&(f=[u.selection.getRange()]);for(var p=0;p<f.length;p++)p==f.length-1&&(f[p].end.row===i&&f[p].end.column===s||h.push(new r(f[p].end.row,f[p].end.column,i,s))),p===0?f[p].start.row===0&&f[p].start.column===0||h.push(new r(0,0,f[p].start.row,f[p].start.column)):h.push(new r(f[p-1].end.row,f[p-1].end.column,f[p].start.row,f[p].start.column));u.exitMultiSelectMode(),u.clearSelection();for(var p=0;p<h.length;p++)u.selection.addRange(h[p],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(u){u.selection.clearSelection(),u.navigateLineEnd(),u.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(u){u.selection.clearSelection();var i=u.getCursorPosition();u.selection.moveTo(i.row-1,Number.MAX_VALUE),u.insert(`
`),i.row===0&&u.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(u){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),u.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:o("F1","F1"),exec:function(u){u.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:o(null,null),exec:function(u){u.prompt({$type:"modes"})},readOnly:!0}];for(var l=1;l<9;l++)t.commands.push({name:"foldToLevel"+l,description:"Fold To Level "+l,level:l,exec:function(u){u.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("./lib/dom"),d=function(){function r(o){this.session=o,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return r.prototype.getRowLength=function(o){var l;return this.lineWidgets?l=this.lineWidgets[o]&&this.lineWidgets[o].rowCount||0:l=0,!this.$useWrapMode||!this.$wrapData[o]?1+l:this.$wrapData[o].length+1+l},r.prototype.$getWidgetScreenLength=function(){var o=0;return this.lineWidgets.forEach(function(l){l&&l.rowCount&&!l.hidden&&(o+=l.rowCount)}),o},r.prototype.$onChangeEditor=function(o){this.attach(o.editor)},r.prototype.attach=function(o){o&&o.widgetManager&&o.widgetManager!=this&&o.widgetManager.detach(),this.editor!=o&&(this.detach(),this.editor=o,o&&(o.widgetManager=this,o.renderer.on("beforeRender",this.measureWidgets),o.renderer.on("afterRender",this.renderWidgets)))},r.prototype.detach=function(o){var l=this.editor;if(l){this.editor=null,l.widgetManager=null,l.renderer.off("beforeRender",this.measureWidgets),l.renderer.off("afterRender",this.renderWidgets);var u=this.session.lineWidgets;u&&u.forEach(function(i){i&&i.el&&i.el.parentNode&&(i._inDocument=!1,i.el.parentNode.removeChild(i.el))})}},r.prototype.updateOnFold=function(o,l){var u=l.lineWidgets;if(!(!u||!o.action)){for(var i=o.data,s=i.start.row,f=i.end.row,h=o.action=="add",p=s+1;p<f;p++)u[p]&&(u[p].hidden=h);u[f]&&(h?u[s]?u[f].hidden=h:u[s]=u[f]:(u[s]==u[f]&&(u[s]=void 0),u[f].hidden=h))}},r.prototype.updateOnChange=function(o){var l=this.session.lineWidgets;if(l){var u=o.start.row,i=o.end.row-u;if(i!==0)if(o.action=="remove"){var s=l.splice(u+1,i);!l[u]&&s[s.length-1]&&(l[u]=s.pop()),s.forEach(function(h){h&&this.removeLineWidget(h)},this),this.$updateRows()}else{var f=new Array(i);l[u]&&l[u].column!=null&&o.start.column>l[u].column&&u++,f.unshift(u,0),l.splice.apply(l,f),this.$updateRows()}}},r.prototype.$updateRows=function(){var o=this.session.lineWidgets;if(o){var l=!0;o.forEach(function(u,i){if(u)for(l=!1,u.row=i;u.$oldWidget;)u.$oldWidget.row=i,u=u.$oldWidget}),l&&(this.session.lineWidgets=null)}},r.prototype.$registerLineWidget=function(o){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var l=this.session.lineWidgets[o.row];return l&&(o.$oldWidget=l,l.el&&l.el.parentNode&&(l.el.parentNode.removeChild(l.el),l._inDocument=!1)),this.session.lineWidgets[o.row]=o,o},r.prototype.addLineWidget=function(o){if(this.$registerLineWidget(o),o.session=this.session,!this.editor)return o;var l=this.editor.renderer;o.html&&!o.el&&(o.el=a.createElement("div"),o.el.innerHTML=o.html),o.text&&!o.el&&(o.el=a.createElement("div"),o.el.textContent=o.text),o.el&&(a.addCssClass(o.el,"ace_lineWidgetContainer"),o.className&&a.addCssClass(o.el,o.className),o.el.style.position="absolute",o.el.style.zIndex="5",l.container.appendChild(o.el),o._inDocument=!0,o.coverGutter||(o.el.style.zIndex="3"),o.pixelHeight==null&&(o.pixelHeight=o.el.offsetHeight)),o.rowCount==null&&(o.rowCount=o.pixelHeight/l.layerConfig.lineHeight);var u=this.session.getFoldAt(o.row,0);if(o.$fold=u,u){var i=this.session.lineWidgets;o.row==u.end.row&&!i[u.start.row]?i[u.start.row]=o:o.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:o.row}}}),this.$updateRows(),this.renderWidgets(null,l),this.onWidgetChanged(o),o},r.prototype.removeLineWidget=function(o){if(o._inDocument=!1,o.session=null,o.el&&o.el.parentNode&&o.el.parentNode.removeChild(o.el),o.editor&&o.editor.destroy)try{o.editor.destroy()}catch{}if(this.session.lineWidgets){var l=this.session.lineWidgets[o.row];if(l==o)this.session.lineWidgets[o.row]=o.$oldWidget,o.$oldWidget&&this.onWidgetChanged(o.$oldWidget);else for(;l;){if(l.$oldWidget==o){l.$oldWidget=o.$oldWidget;break}l=l.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:o.row}}}),this.$updateRows()},r.prototype.getWidgetsAtRow=function(o){for(var l=this.session.lineWidgets,u=l&&l[o],i=[];u;)i.push(u),u=u.$oldWidget;return i},r.prototype.onWidgetChanged=function(o){this.session._changedWidgets.push(o),this.editor&&this.editor.renderer.updateFull()},r.prototype.measureWidgets=function(o,l){var u=this.session._changedWidgets,i=l.layerConfig;if(!(!u||!u.length)){for(var s=1/0,f=0;f<u.length;f++){var h=u[f];if(!(!h||!h.el)&&h.session==this.session){if(!h._inDocument){if(this.session.lineWidgets[h.row]!=h)continue;h._inDocument=!0,l.container.appendChild(h.el)}h.h=h.el.offsetHeight,h.fixedWidth||(h.w=h.el.offsetWidth,h.screenWidth=Math.ceil(h.w/i.characterWidth));var p=h.h/i.lineHeight;h.coverLine&&(p-=this.session.getRowLineCount(h.row),p<0&&(p=0)),h.rowCount!=p&&(h.rowCount=p,h.row<s&&(s=h.row))}}s!=1/0&&(this.session._emit("changeFold",{data:{start:{row:s}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},r.prototype.renderWidgets=function(o,l){var u=l.layerConfig,i=this.session.lineWidgets;if(i){for(var s=Math.min(this.firstRow,u.firstRow),f=Math.max(this.lastRow,u.lastRow,i.length);s>0&&!i[s];)s--;this.firstRow=u.firstRow,this.lastRow=u.lastRow,l.$cursorLayer.config=u;for(var h=s;h<=f;h++){var p=i[h];if(!(!p||!p.el)){if(p.hidden){p.el.style.top=-100-(p.pixelHeight||0)+"px";continue}p._inDocument||(p._inDocument=!0,l.container.appendChild(p.el));var c=l.$cursorLayer.getPixelPosition({row:h,column:0},!0).top;p.coverLine||(c+=u.lineHeight*this.session.getRowLineCount(p.row)),p.el.style.top=c-u.offset+"px";var _=p.coverGutter?0:l.gutterWidth;p.fixedWidth||(_-=l.scrollLeft),p.el.style.left=_+"px",p.fullWidth&&p.screenWidth&&(p.el.style.minWidth=u.width+2*u.padding+"px"),p.fixedWidth?p.el.style.right=l.scrollBar.getWidth()+"px":p.el.style.right=""}}}},r}();t.LineWidgets=d});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,n){"use strict";var a=e("../lib/keys"),d=e("../mouse/default_gutter_handler").GutterTooltip,r=function(){function l(u){this.editor=u,this.gutterLayer=u.renderer.$gutterLayer,this.element=u.renderer.$gutter,this.lines=u.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new d(this.editor)}return l.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},l.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},l.prototype.$onGutterKeyDown=function(u){if(this.annotationTooltip.isOpen){u.preventDefault(),u.keyCode===a.escape&&this.annotationTooltip.hideTooltip();return}if(u.target===this.element){if(u.keyCode!=a.enter)return;u.preventDefault();var i=this.editor.getCursorPosition().row;this.editor.isRowVisible(i)||this.editor.scrollToLine(i,!0,!0),setTimeout(function(){var s=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),f=this.$findNearestFoldWidget(s),h=this.$findNearestAnnotation(s);if(!(f===null&&h===null)){if(f===null&&h!==null){this.activeRowIndex=h,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(f!==null&&h===null){this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(h-s)<Math.abs(f-s)){this.activeRowIndex=h,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(u),setTimeout(function(){this.editor._signal("gutterkeydown",new o(u,this))}.bind(this),10)},l.prototype.$handleGutterKeyboardInteraction=function(u){if(u.keyCode===a.tab){u.preventDefault();return}if(u.keyCode===a.escape){u.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(u.keyCode===a.up){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(u.keyCode===a.down){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(u.keyCode===a.left){u.preventDefault(),this.$switchLane("annotation");return}if(u.keyCode===a.right){u.preventDefault(),this.$switchLane("fold");return}if(u.keyCode===a.enter||u.keyCode===a.space){switch(u.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var i=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),u),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==i&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(i),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var s=this.lines.cells[this.activeRowIndex].element.childNodes[2],f=s.getBoundingClientRect(),h=this.annotationTooltip.getElement().style;h.left=f.right+"px",h.top=f.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},l.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},l.prototype.$isFoldWidgetVisible=function(u){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),s=this.$getFoldWidget(u).style.display!=="none";return i&&s},l.prototype.$isAnnotationVisible=function(u){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),s=this.$getAnnotation(u).style.display!=="none";return i&&s},l.prototype.$getFoldWidget=function(u){var i=this.lines.get(u),s=i.element;return s.childNodes[1]},l.prototype.$getAnnotation=function(u){var i=this.lines.get(u),s=i.element;return s.childNodes[2]},l.prototype.$findNearestFoldWidget=function(u){if(this.$isFoldWidgetVisible(u))return u;for(var i=0;u-i>0||u+i<this.lines.getLength()-1;){if(i++,u-i>=0&&this.$isFoldWidgetVisible(u-i))return u-i;if(u+i<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(u+i))return u+i}return null},l.prototype.$findNearestAnnotation=function(u){if(this.$isAnnotationVisible(u))return u;for(var i=0;u-i>0||u+i<this.lines.getLength()-1;){if(i++,u-i>=0&&this.$isAnnotationVisible(u-i))return u-i;if(u+i<=this.lines.getLength()-1&&this.$isAnnotationVisible(u+i))return u+i}return null},l.prototype.$focusFoldWidget=function(u){if(u!=null){var i=this.$getFoldWidget(u);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},l.prototype.$focusAnnotation=function(u){if(u!=null){var i=this.$getAnnotation(u);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},l.prototype.$blurFoldWidget=function(u){var i=this.$getFoldWidget(u);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},l.prototype.$blurAnnotation=function(u){var i=this.$getAnnotation(u);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},l.prototype.$moveFoldWidgetUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},l.prototype.$moveFoldWidgetDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},l.prototype.$moveAnnotationUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},l.prototype.$moveAnnotationDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},l.prototype.$switchLane=function(u){switch(u){case"annotation":if(this.activeLane==="annotation")break;var i=this.$findNearestAnnotation(this.activeRowIndex);if(i==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var s=this.$findNearestFoldWidget(this.activeRowIndex);if(s==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=s,this.$focusFoldWidget(this.activeRowIndex);break}},l.prototype.$rowIndexToRow=function(u){var i=this.lines.get(u);return i?i.row:null},l.prototype.$rowToRowIndex=function(u){for(var i=0;i<this.lines.getLength();i++){var s=this.lines.get(i);if(s.row==u)return i}return null},l}();t.GutterKeyboardHandler=r;var o=function(){function l(u,i){this.gutterKeyboardHandler=i,this.domEvent=u}return l.prototype.getKey=function(){return a.keyCodeToString(this.domEvent.keyCode)},l.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},l.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},l.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},l}();t.GutterKeyboardEvent=o});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var a=this&&this.__values||function(M){var w=typeof Symbol=="function"&&Symbol.iterator,F=w&&M[w],L=0;if(F)return F.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&L>=M.length&&(M=void 0),{value:M&&M[L++],done:!M}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},d=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/lang"),l=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,i=e("./mouse/mouse_handler").MouseHandler,s=e("./mouse/fold_handler").FoldHandler,f=e("./keyboard/keybinding").KeyBinding,h=e("./edit_session").EditSession,p=e("./search").Search,c=e("./range").Range,_=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,y=e("./config"),C=e("./token_iterator").TokenIterator,S=e("./line_widgets").LineWidgets,D=e("./keyboard/gutter_handler").GutterKeyboardHandler,g=e("./config").nls,b=e("./clipboard"),x=e("./lib/keys"),E=function(){function M(w,F,L){this.session,this.$toDestroy=[];var R=w.getContainerElement();this.container=R,this.renderer=w,this.id="editor"+ ++M.$uid,this.commands=new v(l.isMac?"mac":"win",m),typeof document=="object"&&(this.textInput=new u(w.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new i(this),new s(this)),this.keyBinding=new f(this),this.$search=new p().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(A,I){I._$emitInputEvent.schedule(31)}),this.setSession(F||L&&L.session||new h("")),y.resetOptions(this),L&&this.setOptions(L),y._signal("editor",this)}return M.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},M.prototype.startOperation=function(w){if(this.curOp){if(!w||this.curOp.command)return;this.prevOp=this.curOp}w||(this.previousCommand=null,w={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:w.command||{},args:w.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},M.prototype.endOperation=function(w){if(this.curOp&&this.session){if(w&&w.returnValue===!1||!this.session)return this.curOp=null;if(w==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var F=this.curOp.command,L=F&&F.scrollIntoView;if(L){switch(L){case"center-animate":L="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),A=this.renderer.layerConfig;(R.start.row>=A.lastRow||R.end.row<=A.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}L=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},M.prototype.$historyTracker=function(w){if(this.$mergeUndoDeltas){var F=this.prevOp,L=this.$mergeableCommands,R=F.command&&w.command.name==F.command.name;if(w.command.name=="insertstring"){var A=w.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(A)||/\s/.test(F.args)),this.mergeNextCommand=!0}else R=R&&L.indexOf(w.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:L.indexOf(w.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},M.prototype.setKeyboardHandler=function(w,F){if(w&&typeof w=="string"&&w!="ace"){this.$keybindingId=w;var L=this;y.loadModule(["keybinding",w],function(R){L.$keybindingId==w&&L.keyBinding.setKeyboardHandler(R&&R.handler),F&&F()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(w),F&&F()},M.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},M.prototype.setSession=function(w){if(this.session!=w){this.curOp&&this.endOperation(),this.curOp={};var F=this.session;if(F){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var L=this.session.getSelection();L.off("changeCursor",this.$onCursorChange),L.off("changeSelection",this.$onSelectionChange)}this.session=w,w?(this.$onDocumentChange=this.onDocumentChange.bind(this),w.on("change",this.$onDocumentChange),this.renderer.setSession(w),this.$onChangeMode=this.onChangeMode.bind(this),w.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),w.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),w.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),w.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),w.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),w.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=w.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(w)),this._signal("changeSession",{session:w,oldSession:F}),this.curOp=null,F&&F._signal("changeEditor",{oldEditor:this}),w&&w._signal("changeEditor",{editor:this}),w&&!w.destroyed&&w.bgTokenizer.scheduleStart()}},M.prototype.getSession=function(){return this.session},M.prototype.setValue=function(w,F){return this.session.doc.setValue(w),F?F==1?this.navigateFileEnd():F==-1&&this.navigateFileStart():this.selectAll(),w},M.prototype.getValue=function(){return this.session.getValue()},M.prototype.getSelection=function(){return this.selection},M.prototype.resize=function(w){this.renderer.onResize(w)},M.prototype.setTheme=function(w,F){this.renderer.setTheme(w,F)},M.prototype.getTheme=function(){return this.renderer.getTheme()},M.prototype.setStyle=function(w){this.renderer.setStyle(w)},M.prototype.unsetStyle=function(w){this.renderer.unsetStyle(w)},M.prototype.getFontSize=function(){return this.getOption("fontSize")||r.computedStyle(this.container).fontSize},M.prototype.setFontSize=function(w){this.setOption("fontSize",w)},M.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var w=this;this.$highlightPending=!0,setTimeout(function(){w.$highlightPending=!1;var F=w.session;if(!(!F||F.destroyed)){F.$bracketHighlight&&(F.$bracketHighlight.markerIds.forEach(function(G){F.removeMarker(G)}),F.$bracketHighlight=null);var L=w.getCursorPosition(),R=w.getKeyboardHandler(),A=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(w),I=F.getMatchingBracketRanges(L,A);if(!I){var $=new C(F,L.row,L.column),H=$.getCurrentToken();if(H&&/\b(?:tag-open|tag-name)/.test(H.type)){var P=F.getMatchingTags(L);P&&(I=[P.openTagName,P.closeTagName])}}if(!I&&F.$mode.getMatching&&(I=F.$mode.getMatching(w.session)),!I){w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide();return}var q="ace_bracket";Array.isArray(I)?I.length==1&&(q="ace_error_bracket"):I=[I],I.length==2&&(c.comparePoints(I[0].end,I[1].start)==0?I=[c.fromPoints(I[0].start,I[1].end)]:c.comparePoints(I[0].start,I[1].end)==0&&(I=[c.fromPoints(I[1].start,I[0].end)])),F.$bracketHighlight={ranges:I,markerIds:I.map(function(G){return F.addMarker(G,q,"text")})},w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide()}},50)}},M.prototype.focus=function(){this.textInput.focus()},M.prototype.isFocused=function(){return this.textInput.isFocused()},M.prototype.blur=function(){this.textInput.blur()},M.prototype.onFocus=function(w){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",w))},M.prototype.onBlur=function(w){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",w))},M.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},M.prototype.onDocumentChange=function(w){var F=this.session.$useWrapMode,L=w.start.row==w.end.row?w.end.row:1/0;this.renderer.updateLines(w.start.row,L,F),this._signal("change",w),this.$cursorChange()},M.prototype.onTokenizerUpdate=function(w){var F=w.data;this.renderer.updateLines(F.first,F.last)},M.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},M.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},M.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},M.prototype.$updateHighlightActiveLine=function(){var w=this.getSession(),F;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(F=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(F=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(F=!1)),w.$highlightLineMarker&&!F)w.removeMarker(w.$highlightLineMarker.id),w.$highlightLineMarker=null;else if(!w.$highlightLineMarker&&F){var L=new c(F.row,F.column,F.row,1/0);L.id=w.addMarker(L,"ace_active-line","screenLine"),w.$highlightLineMarker=L}else F&&(w.$highlightLineMarker.start.row=F.row,w.$highlightLineMarker.end.row=F.row,w.$highlightLineMarker.start.column=F.column,w._signal("changeBackMarker"))},M.prototype.onSelectionChange=function(w){var F=this.session;if(F.$selectionMarker&&F.removeMarker(F.$selectionMarker),F.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var L=this.selection.getRange(),R=this.getSelectionStyle();F.$selectionMarker=F.addMarker(L,"ace_selection",R)}var A=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(A),this._signal("changeSelection")},M.prototype.$getSelectionHighLightRegexp=function(){var w=this.session,F=this.getSelectionRange();if(!(F.isEmpty()||F.isMultiLine())){var L=F.start.column,R=F.end.column,A=w.getLine(F.start.row),I=A.substring(L,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var $=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),H=A.substring(L-1,R+1);if($.test(H))return $}}},M.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},M.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},M.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},M.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},M.prototype.onChangeMode=function(w){this.renderer.updateText(),this._emit("changeMode",w)},M.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},M.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},M.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},M.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},M.prototype.getCopyText=function(){var w=this.getSelectedText(),F=this.session.doc.getNewLineCharacter(),L=!1;if(!w&&this.$copyWithEmptySelection){L=!0;for(var R=this.selection.getAllRanges(),A=0;A<R.length;A++){var I=R[A];A&&R[A-1].start.row==I.start.row||(w+=this.session.getLine(I.start.row)+F)}}var $={text:w};return this._signal("copy",$),b.lineMode=L?$.text:!1,$.text},M.prototype.onCopy=function(){this.commands.exec("copy",this)},M.prototype.onCut=function(){this.commands.exec("cut",this)},M.prototype.onPaste=function(w,F){var L={text:w,event:F};this.commands.exec("paste",this,L)},M.prototype.$handlePaste=function(w){typeof w=="string"&&(w={text:w}),this._signal("paste",w);var F=w.text,L=F===b.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)L?R.insert({row:this.selection.lead.row,column:0},F):this.insert(F);else if(L)this.selection.rangeList.ranges.forEach(function(q){R.insert({row:q.start.row,column:0},F)});else{var A=F.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,$=A.length==2&&(!A[0]||!A[1]);if(A.length!=I.length||$)return this.commands.exec("insertstring",this,F);for(var H=I.length;H--;){var P=I[H];P.isEmpty()||R.remove(P),R.insert(P.start,A[H])}}},M.prototype.execCommand=function(w,F){return this.commands.exec(w,this,F)},M.prototype.insert=function(w,F){var L=this.session,R=L.getMode(),A=this.getCursorPosition();if(this.getBehavioursEnabled()&&!F){var I=R.transformAction(L.getState(A.row),"insertion",this,L,w);I&&(w!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),w=I.text)}if(w=="	"&&(w=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&w.indexOf(`
`)==-1){var $=c.fromPoints(A,A);$.end.column+=w.length,this.session.remove($)}}else{var $=this.getSelectionRange();A=this.session.remove($),this.clearSelection()}if(w==`
`||w==`\r
`){var G=L.getLine(A.row);if(A.column>G.search(/\S|$/)){var H=G.substr(A.column).search(/\S|$/);L.doc.removeInLine(A.row,A.column,A.column+H)}}this.clearSelection();var P=A.column,q=L.getState(A.row),G=L.getLine(A.row),B=R.checkOutdent(q,G,w);if(L.insert(A,w),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new c(A.row,P+I.selection[0],A.row,P+I.selection[1])):this.selection.setSelectionRange(new c(A.row+I.selection[0],I.selection[1],A.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(L.getDocument().isNewLine(w)){var Q=R.getNextLineIndent(q,G.slice(0,A.column),L.getTabString());L.insert({row:A.row+1,column:0},Q)}B&&R.autoOutdent(q,L,A.row)}},M.prototype.autoIndent=function(){var w=this.session,F=w.getMode(),L,R;if(this.selection.isEmpty())L=0,R=w.doc.getLength()-1;else{var A=this.getSelectionRange();L=A.start.row,R=A.end.row}for(var I="",$="",H="",P,q,G,B=w.getTabString(),Q=L;Q<=R;Q++)Q>0&&(I=w.getState(Q-1),$=w.getLine(Q-1),H=F.getNextLineIndent(I,$,B)),P=w.getLine(Q),q=F.$getIndent(P),H!==q&&(q.length>0&&(G=new c(Q,0,Q,q.length),w.remove(G)),H.length>0&&w.insert({row:Q,column:0},H)),F.autoOutdent(I,w,Q)},M.prototype.onTextInput=function(w,F){if(!F)return this.keyBinding.onTextInput(w);this.startOperation({command:{name:"insertstring"}});var L=this.applyComposition.bind(this,w,F);this.selection.rangeCount?this.forEachSelection(L):L(),this.endOperation()},M.prototype.applyComposition=function(w,F){if(F.extendLeft||F.extendRight){var L=this.selection.getRange();L.start.column-=F.extendLeft,L.end.column+=F.extendRight,L.start.column<0&&(L.start.row--,L.start.column+=this.session.getLine(L.start.row).length+1),this.selection.setRange(L),!w&&!L.isEmpty()&&this.remove()}if((w||!this.selection.isEmpty())&&this.insert(w,!0),F.restoreStart||F.restoreEnd){var L=this.selection.getRange();L.start.column-=F.restoreStart,L.end.column-=F.restoreEnd,this.selection.setRange(L)}},M.prototype.onCommandKey=function(w,F,L){return this.keyBinding.onCommandKey(w,F,L)},M.prototype.setOverwrite=function(w){this.session.setOverwrite(w)},M.prototype.getOverwrite=function(){return this.session.getOverwrite()},M.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},M.prototype.setScrollSpeed=function(w){this.setOption("scrollSpeed",w)},M.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},M.prototype.setDragDelay=function(w){this.setOption("dragDelay",w)},M.prototype.getDragDelay=function(){return this.getOption("dragDelay")},M.prototype.setSelectionStyle=function(w){this.setOption("selectionStyle",w)},M.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},M.prototype.setHighlightActiveLine=function(w){this.setOption("highlightActiveLine",w)},M.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},M.prototype.setHighlightGutterLine=function(w){this.setOption("highlightGutterLine",w)},M.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},M.prototype.setHighlightSelectedWord=function(w){this.setOption("highlightSelectedWord",w)},M.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},M.prototype.setAnimatedScroll=function(w){this.renderer.setAnimatedScroll(w)},M.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},M.prototype.setShowInvisibles=function(w){this.renderer.setShowInvisibles(w)},M.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},M.prototype.setDisplayIndentGuides=function(w){this.renderer.setDisplayIndentGuides(w)},M.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},M.prototype.setHighlightIndentGuides=function(w){this.renderer.setHighlightIndentGuides(w)},M.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},M.prototype.setShowPrintMargin=function(w){this.renderer.setShowPrintMargin(w)},M.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},M.prototype.setPrintMarginColumn=function(w){this.renderer.setPrintMarginColumn(w)},M.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},M.prototype.setReadOnly=function(w){this.setOption("readOnly",w)},M.prototype.getReadOnly=function(){return this.getOption("readOnly")},M.prototype.setBehavioursEnabled=function(w){this.setOption("behavioursEnabled",w)},M.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},M.prototype.setWrapBehavioursEnabled=function(w){this.setOption("wrapBehavioursEnabled",w)},M.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},M.prototype.setShowFoldWidgets=function(w){this.setOption("showFoldWidgets",w)},M.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},M.prototype.setFadeFoldWidgets=function(w){this.setOption("fadeFoldWidgets",w)},M.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},M.prototype.remove=function(w){this.selection.isEmpty()&&(w=="left"?this.selection.selectLeft():this.selection.selectRight());var F=this.getSelectionRange();if(this.getBehavioursEnabled()){var L=this.session,R=L.getState(F.start.row),A=L.getMode().transformAction(R,"deletion",this,L,F);if(F.end.column===0){var I=L.getTextRange(F);if(I[I.length-1]==`
`){var $=L.getLine(F.end.row);/^\s+$/.test($)&&(F.end.column=$.length)}}A&&(F=A)}this.session.remove(F),this.clearSelection()},M.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var w=this.getSelectionRange();w.start.column==w.end.column&&w.start.row==w.end.row&&(w.end.column=0,w.end.row++),this.session.remove(w),this.clearSelection()},M.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var w=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(w)},M.prototype.setGhostText=function(w,F){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(w,F)},M.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},M.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var w=this.getCursorPosition(),F=w.column;if(F!==0){var L=this.session.getLine(w.row),R,A;F<L.length?(R=L.charAt(F)+L.charAt(F-1),A=new c(w.row,F-1,w.row,F+1)):(R=L.charAt(F-1)+L.charAt(F-2),A=new c(w.row,F-2,w.row,F)),this.session.replace(A,R),this.session.selection.moveToPosition(A.end)}}},M.prototype.toLowerCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var F=this.getSelectionRange(),L=this.session.getTextRange(F);this.session.replace(F,L.toLowerCase()),this.selection.setSelectionRange(w)},M.prototype.toUpperCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var F=this.getSelectionRange(),L=this.session.getTextRange(F);this.session.replace(F,L.toUpperCase()),this.selection.setSelectionRange(w)},M.prototype.indent=function(){var w=this.session,F=this.getSelectionRange();if(F.start.row<F.end.row){var L=this.$getSelectedRows();w.indentRows(L.first,L.last,"	");return}else if(F.start.column<F.end.column){var R=w.getTextRange(F);if(!/^\s+$/.test(R)){var L=this.$getSelectedRows();w.indentRows(L.first,L.last,"	");return}}var A=w.getLine(F.start.row),I=F.start,$=w.getTabSize(),H=w.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var P=$-H%$,q=o.stringRepeat(" ",P);else{for(var P=H%$;A[F.start.column-1]==" "&&P;)F.start.column--,P--;this.selection.setSelectionRange(F),q="	"}return this.insert(q)},M.prototype.blockIndent=function(){var w=this.$getSelectedRows();this.session.indentRows(w.first,w.last,"	")},M.prototype.blockOutdent=function(){var w=this.session.getSelection();this.session.outdentRows(w.getRange())},M.prototype.sortLines=function(){for(var w=this.$getSelectedRows(),F=this.session,L=[],R=w.first;R<=w.last;R++)L.push(F.getLine(R));L.sort(function($,H){return $.toLowerCase()<H.toLowerCase()?-1:$.toLowerCase()>H.toLowerCase()?1:0});for(var A=new c(0,0,0,0),R=w.first;R<=w.last;R++){var I=F.getLine(R);A.start.row=R,A.end.row=R,A.end.column=I.length,F.replace(A,L[R-w.first])}},M.prototype.toggleCommentLines=function(){var w=this.session.getState(this.getCursorPosition().row),F=this.$getSelectedRows();this.session.getMode().toggleCommentLines(w,this.session,F.first,F.last)},M.prototype.toggleBlockComment=function(){var w=this.getCursorPosition(),F=this.session.getState(w.row),L=this.getSelectionRange();this.session.getMode().toggleBlockComment(F,this.session,L,w)},M.prototype.getNumberAt=function(w,F){var L=/[\-]?[0-9]+(?:\.[0-9]+)?/g;L.lastIndex=0;for(var R=this.session.getLine(w);L.lastIndex<F;){var A=L.exec(R);if(A.index<=F&&A.index+A[0].length>=F){var I={value:A[0],start:A.index,end:A.index+A[0].length};return I}}return null},M.prototype.modifyNumber=function(w){var F=this.selection.getCursor().row,L=this.selection.getCursor().column,R=new c(F,L-1,F,L),A=this.session.getTextRange(R);if(!isNaN(parseFloat(A))&&isFinite(A)){var I=this.getNumberAt(F,L);if(I){var $=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,H=I.start+I.value.length-$,P=parseFloat(I.value);P*=Math.pow(10,H),$!==I.end&&L<$?w*=Math.pow(10,I.end-L-1):w*=Math.pow(10,I.end-L),P+=w,P/=Math.pow(10,H);var q=P.toFixed(H),G=new c(F,I.start,F,I.end);this.session.replace(G,q),this.moveCursorTo(F,Math.max(I.start+1,L+q.length-I.value.length))}}else this.toggleWord()},M.prototype.toggleWord=function(){var w=this.selection.getCursor().row,F=this.selection.getCursor().column;this.selection.selectWord();var L=this.getSelectedText(),R=this.selection.getWordRange().start.column,A=L.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=F-R-1;I<0&&(I=0);var $=0,H=0,P=this;L.match(/[A-Za-z0-9_]+/)&&A.forEach(function(te,J){H=$+te.length,I>=$&&I<=H&&(L=te,P.selection.clearSelection(),P.moveCursorTo(w,$+R),P.selection.selectTo(w,H+R)),$=H});for(var q=this.$toggleWordPairs,G,B=0;B<q.length;B++)for(var Q=q[B],O=0;O<=1;O++){var W=+!O,U=L.match(new RegExp("^\\s?_?("+o.escapeRegExp(Q[O])+")\\s?$","i"));if(U){var N=L.match(new RegExp("([_]|^|\\s)("+o.escapeRegExp(U[1])+")($|\\s)","g"));N&&(G=L.replace(new RegExp(o.escapeRegExp(Q[O]),"i"),function(te){var J=Q[W];return te.toUpperCase()==te?J=J.toUpperCase():te.charAt(0).toUpperCase()==te.charAt(0)&&(J=J.substr(0,0)+Q[W].charAt(0).toUpperCase()+J.substr(1)),J}),this.insert(G),G="")}}},M.prototype.findLinkAt=function(w,F){var L,R,A=this.session.getLine(w),I=A.split(/((?:https?|ftp):\/\/[\S]+)/),$=F;$<0&&($=0);var H=0,P=0,q;try{for(var G=a(I),B=G.next();!B.done;B=G.next()){var Q=B.value;if(P=H+Q.length,$>=H&&$<=P&&Q.match(/((?:https?|ftp):\/\/[\S]+)/)){q=Q.replace(/[\s:.,'";}\]]+$/,"");break}H=P}}catch(O){L={error:O}}finally{try{B&&!B.done&&(R=G.return)&&R.call(G)}finally{if(L)throw L.error}}return q},M.prototype.openLink=function(){var w=this.selection.getCursor(),F=this.findLinkAt(w.row,w.column);return F&&window.open(F,"_blank"),F!=null},M.prototype.removeLines=function(){var w=this.$getSelectedRows();this.session.removeFullLines(w.first,w.last),this.clearSelection()},M.prototype.duplicateSelection=function(){var w=this.selection,F=this.session,L=w.getRange(),R=w.isBackwards();if(L.isEmpty()){var A=L.start.row;F.duplicateLines(A,A)}else{var I=R?L.start:L.end,$=F.insert(I,F.getTextRange(L));L.start=I,L.end=$,w.setSelectionRange(L,R)}},M.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},M.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},M.prototype.moveText=function(w,F,L){return this.session.moveText(w,F,L)},M.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},M.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},M.prototype.$moveLines=function(w,F){var L,R,A=this.selection;if(!A.inMultiSelectMode||this.inVirtualSelectionMode){var I=A.toOrientedRange();L=this.$getSelectedRows(I),R=this.session.$moveLines(L.first,L.last,F?0:w),F&&w==-1&&(R=0),I.moveBy(R,0),A.fromOrientedRange(I)}else{var $=A.rangeList.ranges;A.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var H=0,P=0,q=$.length,G=0;G<q;G++){var B=G;$[G].moveBy(H,0),L=this.$getSelectedRows($[G]);for(var Q=L.first,O=L.last;++G<q;){P&&$[G].moveBy(P,0);var W=this.$getSelectedRows($[G]);if(F&&W.first!=O)break;if(!F&&W.first>O+1)break;O=W.last}for(G--,H=this.session.$moveLines(Q,O,F?0:w),F&&w==-1&&(B=G+1);B<=G;)$[B].moveBy(H,0),B++;F||(H=0),P+=H}A.fromOrientedRange(A.ranges[0]),A.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},M.prototype.$getSelectedRows=function(w){return w=(w||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(w.start.row),last:this.session.getRowFoldEnd(w.end.row)}},M.prototype.onCompositionStart=function(w){this.renderer.showComposition(w)},M.prototype.onCompositionUpdate=function(w){this.renderer.setCompositionText(w)},M.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},M.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},M.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},M.prototype.isRowVisible=function(w){return w>=this.getFirstVisibleRow()&&w<=this.getLastVisibleRow()},M.prototype.isRowFullyVisible=function(w){return w>=this.renderer.getFirstFullyVisibleRow()&&w<=this.renderer.getLastFullyVisibleRow()},M.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},M.prototype.$moveByPage=function(w,F){var L=this.renderer,R=this.renderer.layerConfig,A=w*Math.floor(R.height/R.lineHeight);F===!0?this.selection.$moveSelection(function(){this.moveCursorBy(A,0)}):F===!1&&(this.selection.moveCursorBy(A,0),this.selection.clearSelection());var I=L.scrollTop;L.scrollBy(0,A*R.lineHeight),F!=null&&L.scrollCursorIntoView(null,.5),L.animateScrolling(I)},M.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},M.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},M.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},M.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},M.prototype.scrollPageDown=function(){this.$moveByPage(1)},M.prototype.scrollPageUp=function(){this.$moveByPage(-1)},M.prototype.scrollToRow=function(w){this.renderer.scrollToRow(w)},M.prototype.scrollToLine=function(w,F,L,R){this.renderer.scrollToLine(w,F,L,R)},M.prototype.centerSelection=function(){var w=this.getSelectionRange(),F={row:Math.floor(w.start.row+(w.end.row-w.start.row)/2),column:Math.floor(w.start.column+(w.end.column-w.start.column)/2)};this.renderer.alignCursor(F,.5)},M.prototype.getCursorPosition=function(){return this.selection.getCursor()},M.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},M.prototype.getSelectionRange=function(){return this.selection.getRange()},M.prototype.selectAll=function(){this.selection.selectAll()},M.prototype.clearSelection=function(){this.selection.clearSelection()},M.prototype.moveCursorTo=function(w,F){this.selection.moveCursorTo(w,F)},M.prototype.moveCursorToPosition=function(w){this.selection.moveCursorToPosition(w)},M.prototype.jumpToMatching=function(w,F){var L=this.getCursorPosition(),R=new C(this.session,L.row,L.column),A=R.getCurrentToken(),I=0;A&&A.type.indexOf("tag-name")!==-1&&(A=R.stepBackward());var $=A||R.stepForward();if($){var H,P=!1,q={},G=L.column-$.start,B,Q={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if($.value.match(/[{}()\[\]]/g)){for(;G<$.value.length&&!P;G++)if(Q[$.value[G]])switch(B=Q[$.value[G]]+"."+$.type.replace("rparen","lparen"),isNaN(q[B])&&(q[B]=0),$.value[G]){case"(":case"[":case"{":q[B]++;break;case")":case"]":case"}":q[B]--,q[B]===-1&&(H="bracket",P=!0);break}}else $.type.indexOf("tag-name")!==-1&&(isNaN(q[$.value])&&(q[$.value]=0),A.value==="<"&&I>1?q[$.value]++:A.value==="</"&&q[$.value]--,q[$.value]===-1&&(H="tag",P=!0));P||(A=$,I++,$=R.stepForward(),G=0)}while($&&!P);if(H){var O,W;if(H==="bracket")O=this.session.getBracketRange(L),O||(O=new c(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+G-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+G-1),W=O.start,(F||W.row===L.row&&Math.abs(W.column-L.column)<2)&&(O=this.session.getBracketRange(W)));else if(H==="tag"){if(!$||$.type.indexOf("tag-name")===-1)return;if(O=new c(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),O.compare(L.row,L.column)===0){var U=this.session.getMatchingTags(L);U&&(U.openTag.contains(L.row,L.column)?(O=U.closeTag,W=O.start):(O=U.openTag,U.closeTag.start.row===L.row&&U.closeTag.start.column===L.column?W=O.end:W=O.start))}W=W||O.start}W=O&&O.cursor||W,W&&(w?O&&F?this.selection.setRange(O):O&&O.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(W.row,W.column):this.selection.moveTo(W.row,W.column))}}},M.prototype.gotoLine=function(w,F,L){this.selection.clearSelection(),this.session.unfold({row:w-1,column:F||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(w-1,F||0),this.isRowFullyVisible(w-1)||this.scrollToLine(w-1,!0,L)},M.prototype.navigateTo=function(w,F){this.selection.moveTo(w,F)},M.prototype.navigateUp=function(w){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var F=this.selection.anchor.getPosition();return this.moveCursorToPosition(F)}this.selection.clearSelection(),this.selection.moveCursorBy(-w||-1,0)},M.prototype.navigateDown=function(w){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var F=this.selection.anchor.getPosition();return this.moveCursorToPosition(F)}this.selection.clearSelection(),this.selection.moveCursorBy(w||1,0)},M.prototype.navigateLeft=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorLeft();else{var F=this.getSelectionRange().start;this.moveCursorToPosition(F)}this.clearSelection()},M.prototype.navigateRight=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorRight();else{var F=this.getSelectionRange().end;this.moveCursorToPosition(F)}this.clearSelection()},M.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},M.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},M.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},M.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},M.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},M.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},M.prototype.replace=function(w,F){F&&this.$search.set(F);var L=this.$search.find(this.session),R=0;return L&&(this.$tryReplace(L,w)&&(R=1),this.selection.setSelectionRange(L),this.renderer.scrollSelectionIntoView(L.start,L.end)),R},M.prototype.replaceAll=function(w,F){F&&this.$search.set(F);var L=this.$search.findAll(this.session),R=0;if(!L.length)return R;var A=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=L.length-1;I>=0;--I)this.$tryReplace(L[I],w)&&R++;return this.selection.setSelectionRange(A),R},M.prototype.$tryReplace=function(w,F){var L=this.session.getTextRange(w);return F=this.$search.replace(L,F),F!==null?(w.end=this.session.replace(w,F),w):null},M.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},M.prototype.find=function(w,F,L){F||(F={}),typeof w=="string"||w instanceof RegExp?F.needle=w:typeof w=="object"&&d.mixin(F,w);var R=this.selection.getRange();F.needle==null&&(w=this.session.getTextRange(R)||this.$search.$options.needle,w||(R=this.session.getWordRange(R.start.row,R.start.column),w=this.session.getTextRange(R)),this.$search.set({needle:w})),this.$search.set(F),F.start||this.$search.set({start:R});var A=this.$search.find(this.session);if(F.preventScroll)return A;if(A)return this.revealRange(A,L),A;F.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},M.prototype.findNext=function(w,F){this.find({skipCurrent:!0,backwards:!1},w,F)},M.prototype.findPrevious=function(w,F){this.find(w,{skipCurrent:!0,backwards:!0},F)},M.prototype.revealRange=function(w,F){this.session.unfold(w),this.selection.setSelectionRange(w);var L=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(w.start,w.end,.5),F!==!1&&this.renderer.animateScrolling(L)},M.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(w){w.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},M.prototype.setAutoScrollEditorIntoView=function(w){if(w){var F,L=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var A=this.$scrollAnchor;A.style.cssText="position:absolute",this.container.insertBefore(A,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),$=this.renderer.on("beforeRender",function(){R&&(F=L.renderer.container.getBoundingClientRect())}),H=this.renderer.on("afterRender",function(){if(R&&F&&(L.isFocused()||L.searchBox&&L.searchBox.isFocused())){var P=L.renderer,q=P.$cursorLayer.$pixelPos,G=P.layerConfig,B=q.top-G.offset;q.top>=0&&B+F.top<0?R=!0:q.top<G.height&&q.top+F.top+G.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(A.style.top=B+"px",A.style.left=q.left+"px",A.style.height=G.lineHeight+"px",A.scrollIntoView(R)),R=F=null}});this.setAutoScrollEditorIntoView=function(P){P||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",H),this.renderer.off("beforeRender",$))}}},M.prototype.$resetCursorStyle=function(){var w=this.$cursorStyle||"ace",F=this.renderer.$cursorLayer;F&&(F.setSmoothBlinking(/smooth/.test(w)),F.isBlinking=!this.$readOnly&&w!="wide",r.setCssClass(F.element,"ace_slim-cursors",/slim/.test(w)))},M.prototype.prompt=function(w,F,L){var R=this;y.loadModule("ace/ext/prompt",function(A){A.prompt(R,w,F,L)})},M}();E.$uid=0,E.prototype.curOp=null,E.prototype.prevOp={},E.prototype.$mergeableCommands=["backspace","del","insertstring"],E.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],d.implement(E.prototype,_),y.defineOptions(E.prototype,"editor",{selectionStyle:{set:function(M){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:M})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(M){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(M){this.textInput.setReadOnly(M),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(M){this.textInput.setCopyWithEmptySelection(M)},initialValue:!1},cursorStyle:{set:function(M){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(M){this.setAutoScrollEditorIntoView(M)}},keyboardHandler:{set:function(M){this.setKeyboardHandler(M)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(M){this.session.setValue(M)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(M){this.setSession(M)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(M){this.renderer.$gutterLayer.setShowLineNumbers(M),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),M&&this.$relativeLineNumbers?T.attach(this):T.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(M){this.$showLineNumbers&&M?T.attach(this):T.detach(this)}},placeholder:{set:function(M){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var w=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(w&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),r.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!w&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),r.addCssClass(this.container,"ace_hasPlaceholder");var F=r.createElement("div");F.className="ace_placeholder",F.textContent=this.$placeholder||"",this.renderer.placeholderNode=F,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!w&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(M){var w={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},F=function(R){if(R.target==this.renderer.scroller&&R.keyCode===x.enter){R.preventDefault();var A=this.getCursorPosition().row;this.isRowVisible(A)||this.scrollToLine(A,!0,!0),this.focus()}},L;M?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(l.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",g("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",g("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",F.bind(this)),this.commands.addCommand(w),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",g("editor")),this.renderer.$gutter.setAttribute("aria-label",g("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),L||(L=new D(this)),L.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",F.bind(this)),this.commands.removeCommand(w),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),L&&L.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var T={getText:function(M,w){return(Math.abs(M.selection.lead.row-w)||w+1+(w<9?"\xB7":""))+""},getWidth:function(M,w,F){return Math.max(w.toString().length,(F.lastRow+1).toString().length,2)*F.characterWidth},update:function(M,w){w.renderer.$loop.schedule(w.renderer.CHANGE_GUTTER)},attach:function(M){M.renderer.$gutterLayer.$renderer=this,M.on("changeSelection",this.update),this.update(null,M)},detach:function(M){M.renderer.$gutterLayer.$renderer==this&&(M.renderer.$gutterLayer.$renderer=null),M.off("changeSelection",this.update),this.update(null,M)}};t.Editor=E});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../lib/dom"),d=function(){function r(o,l){this.element=o,this.canvasHeight=l||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return r.prototype.moveContainer=function(o){a.translate(this.element,0,-(o.firstRowScreen*o.lineHeight%this.canvasHeight)-o.offset*this.$offsetCoefficient)},r.prototype.pageChanged=function(o,l){return Math.floor(o.firstRowScreen*o.lineHeight/this.canvasHeight)!==Math.floor(l.firstRowScreen*l.lineHeight/this.canvasHeight)},r.prototype.computeLineTop=function(o,l,u){var i=l.firstRowScreen*l.lineHeight,s=Math.floor(i/this.canvasHeight),f=u.documentToScreenRow(o,0)*l.lineHeight;return f-s*this.canvasHeight},r.prototype.computeLineHeight=function(o,l,u){return l.lineHeight*u.getRowLineCount(o)},r.prototype.getLength=function(){return this.cells.length},r.prototype.get=function(o){return this.cells[o]},r.prototype.shift=function(){this.$cacheCell(this.cells.shift())},r.prototype.pop=function(){this.$cacheCell(this.cells.pop())},r.prototype.push=function(o){if(Array.isArray(o)){this.cells.push.apply(this.cells,o);for(var l=a.createFragment(this.element),u=0;u<o.length;u++)l.appendChild(o[u].element);this.element.appendChild(l)}else this.cells.push(o),this.element.appendChild(o.element)},r.prototype.unshift=function(o){if(Array.isArray(o)){this.cells.unshift.apply(this.cells,o);for(var l=a.createFragment(this.element),u=0;u<o.length;u++)l.appendChild(o[u].element);this.element.firstChild?this.element.insertBefore(l,this.element.firstChild):this.element.appendChild(l)}else this.cells.unshift(o),this.element.insertAdjacentElement("afterbegin",o.element)},r.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},r.prototype.$cacheCell=function(o){o&&(o.element.remove(),this.cellCache.push(o))},r.prototype.createCell=function(o,l,u,i){var s=this.cellCache.pop();if(!s){var f=a.createElement("div");i&&i(f),this.element.appendChild(f),s={element:f,text:"",row:o}}return s.row=o,s},r}();t.Lines=d});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,n){"use strict";var a=e("../lib/dom"),d=e("../lib/oop"),r=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,l=e("./lines").Lines,u=e("../config").nls,i=function(){function f(h){this.element=a.createElement("div"),this.element.className="ace_layer ace_gutter-layer",h.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new l(this.element),this.$lines.$offsetCoefficient=1}return f.prototype.setSession=function(h){this.session&&this.session.off("change",this.$updateAnnotations),this.session=h,h&&h.on("change",this.$updateAnnotations)},f.prototype.addGutterDecoration=function(h,p){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(h,p)},f.prototype.removeGutterDecoration=function(h,p){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(h,p)},f.prototype.setAnnotations=function(h){this.$annotations=[];for(var p=0;p<h.length;p++){var c=h[p],_=c.row,v=this.$annotations[_];v||(v=this.$annotations[_]={text:[],type:[]});var m=c.text,y=c.type;m=m?r.escapeHTML(m):c.html||"",v.text.indexOf(m)===-1&&(v.text.push(m),v.type.push(y));var C=c.className;C?v.className=C:y=="error"?v.className=" ace_error":y=="warning"&&v.className!=" ace_error"?v.className=" ace_warning":y=="info"&&!v.className&&(v.className=" ace_info")}},f.prototype.$updateAnnotations=function(h){if(this.$annotations.length){var p=h.start.row,c=h.end.row-p;if(c!==0)if(h.action=="remove")this.$annotations.splice(p,c+1,null);else{var _=new Array(c+1);_.unshift(p,1),this.$annotations.splice.apply(this.$annotations,_)}}},f.prototype.update=function(h){this.config=h;var p=this.session,c=h.firstRow,_=Math.min(h.lastRow+h.gutterOffset,p.getLength()-1);this.oldLastRow=_,this.config=h,this.$lines.moveContainer(h),this.$updateCursorRow();for(var v=p.getNextFoldLine(c),m=v?v.start.row:1/0,y=null,C=-1,S=c;;){if(S>m&&(S=v.end.row+1,v=p.getNextFoldLine(S,v),m=v?v.start.row:1/0),S>_){for(;this.$lines.getLength()>C+1;)this.$lines.pop();break}y=this.$lines.get(++C),y?y.row=S:(y=this.$lines.createCell(S,h,this.session,s),this.$lines.push(y)),this.$renderCell(y,h,v,S),S++}this._signal("afterRender"),this.$updateGutterWidth(h)},f.prototype.$updateGutterWidth=function(h){var p=this.session,c=p.gutterRenderer||this.$renderer,_=p.$firstLineNumber,v=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||p.$useWrapMode)&&(v=p.getLength()+_-1);var m=c?c.getWidth(p,v,h):v.toString().length*h.characterWidth,y=this.$padding||this.$computePadding();m+=y.left+y.right,m!==this.gutterWidth&&!isNaN(m)&&(this.gutterWidth=m,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",m))},f.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var h=this.session.selection.getCursor();this.$cursorRow!==h.row&&(this.$cursorRow=h.row)}},f.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var h=this.session.selection.cursor.row;if(this.$cursorRow=h,!(this.$cursorCell&&this.$cursorCell.row==h)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var p=this.$lines.cells;this.$cursorCell=null;for(var c=0;c<p.length;c++){var _=p[c];if(_.row>=this.$cursorRow){if(_.row>this.$cursorRow){var v=this.session.getFoldLine(this.$cursorRow);if(c>0&&v&&v.start.row==p[c-1].row)_=p[c-1];else break}_.element.className="ace_gutter-active-line "+_.element.className,this.$cursorCell=_;break}}}}},f.prototype.scrollLines=function(h){var p=this.config;if(this.config=h,this.$updateCursorRow(),this.$lines.pageChanged(p,h))return this.update(h);this.$lines.moveContainer(h);var c=Math.min(h.lastRow+h.gutterOffset,this.session.getLength()-1),_=this.oldLastRow;if(this.oldLastRow=c,!p||_<h.firstRow)return this.update(h);if(c<p.firstRow)return this.update(h);if(p.firstRow<h.firstRow)for(var v=this.session.getFoldedRowCount(p.firstRow,h.firstRow-1);v>0;v--)this.$lines.shift();if(_>c)for(var v=this.session.getFoldedRowCount(c+1,_);v>0;v--)this.$lines.pop();h.firstRow<p.firstRow&&this.$lines.unshift(this.$renderLines(h,h.firstRow,p.firstRow-1)),c>_&&this.$lines.push(this.$renderLines(h,_+1,c)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(h)},f.prototype.$renderLines=function(h,p,c){for(var _=[],v=p,m=this.session.getNextFoldLine(v),y=m?m.start.row:1/0;v>y&&(v=m.end.row+1,m=this.session.getNextFoldLine(v,m),y=m?m.start.row:1/0),!(v>c);){var C=this.$lines.createCell(v,h,this.session,s);this.$renderCell(C,h,m,v),_.push(C),v++}return _},f.prototype.$renderCell=function(h,p,c,_){var v=h.element,m=this.session,y=v.childNodes[0],C=v.childNodes[1],S=v.childNodes[2],D=S.firstChild,g=m.$firstLineNumber,b=m.$breakpoints,x=m.$decorations,E=m.gutterRenderer||this.$renderer,T=this.$showFoldWidgets&&m.foldWidgets,M=c?c.start.row:Number.MAX_VALUE,w=p.lineHeight+"px",F=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",L=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(E?E.getText(m,_):_+g).toString();if(this.$highlightGutterLine&&(_==this.$cursorRow||c&&_<this.$cursorRow&&_>=M&&this.$cursorRow<=c.end.row)&&(F+="ace_gutter-active-line ",this.$cursorCell!=h&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=h)),b[_]&&(F+=b[_]),x[_]&&(F+=x[_]),this.$annotations[_]&&_!==M&&(F+=this.$annotations[_].className),T){var A=T[_];A==null&&(A=T[_]=m.getFoldWidget(_))}if(A){var I="ace_fold-widget ace_"+A,$=A=="start"&&_==M&&_<c.end.row;if($){I+=" ace_closed";for(var H="",P=!1,q=_+1;q<=c.end.row;q++)if(this.$annotations[q]){if(this.$annotations[q].className===" ace_error"){P=!0,H=" ace_error_fold";break}if(this.$annotations[q].className===" ace_warning"){P=!0,H=" ace_warning_fold";continue}}F+=H}else I+=" ace_open";C.className!=I&&(C.className=I),a.setStyle(C.style,"height",w),a.setStyle(C.style,"display","inline-block"),C.setAttribute("role","button"),C.setAttribute("tabindex","-1");var G=m.getFoldWidgetRange(_);G?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[G.start.row+1,G.end.row+1])):c?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[c.start.row+1,c.end.row+1])):C.setAttribute("aria-label",u("Toggle code folding, row $0",[_+1])),$?(C.setAttribute("aria-expanded","false"),C.setAttribute("title",u("Unfold code"))):(C.setAttribute("aria-expanded","true"),C.setAttribute("title",u("Fold code")))}else C&&(a.setStyle(C.style,"display","none"),C.setAttribute("tabindex","0"),C.removeAttribute("role"),C.removeAttribute("aria-label"));return P&&this.$showFoldedAnnotations?(S.className="ace_gutter_annotation",D.className=L,D.className+=H,a.setStyle(D.style,"height",w),a.setStyle(S.style,"display","block"),a.setStyle(S.style,"height",w),S.setAttribute("aria-label",u("Read annotations row $0",[R])),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")):this.$annotations[_]?(S.className="ace_gutter_annotation",D.className=L,this.$useSvgGutterIcons?D.className+=this.$annotations[_].className:v.classList.add(this.$annotations[_].className.replace(" ","")),a.setStyle(D.style,"height",w),a.setStyle(S.style,"display","block"),a.setStyle(S.style,"height",w),S.setAttribute("aria-label",u("Read annotations row $0",[R])),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")):(a.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0")),R!==y.data&&(y.data=R),v.className!=F&&(v.className=F),a.setStyle(h.element.style,"height",this.$lines.computeLineHeight(_,p,m)+"px"),a.setStyle(h.element.style,"top",this.$lines.computeLineTop(_,p,m)+"px"),h.text=R,S.style.display==="none"&&C.style.display==="none"?h.element.setAttribute("aria-hidden",!0):h.element.setAttribute("aria-hidden",!1),h},f.prototype.setHighlightGutterLine=function(h){this.$highlightGutterLine=h},f.prototype.setShowLineNumbers=function(h){this.$renderer=!h&&{getWidth:function(){return 0},getText:function(){return""}}},f.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},f.prototype.setShowFoldWidgets=function(h){h?a.addCssClass(this.element,"ace_folding-enabled"):a.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=h,this.$padding=null},f.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},f.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var h=a.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(h.borderLeftWidth)||0)+(parseInt(h.paddingLeft)||0)+1,this.$padding.right=(parseInt(h.borderRightWidth)||0)+(parseInt(h.paddingRight)||0),this.$padding},f.prototype.getRegion=function(h){var p=this.$padding||this.$computePadding(),c=this.element.getBoundingClientRect();if(h.x<p.left+c.left)return"markers";if(this.$showFoldWidgets&&h.x>c.right-p.right)return"foldWidgets"},f}();i.prototype.$fixedWidth=!1,i.prototype.$highlightGutterLine=!0,i.prototype.$renderer="",i.prototype.$showLineNumbers=!0,i.prototype.$showFoldWidgets=!0,d.implement(i.prototype,o);function s(f){var h=document.createTextNode("");f.appendChild(h);var p=a.createElement("span");f.appendChild(p);var c=a.createElement("span");f.appendChild(c);var _=a.createElement("span");return c.appendChild(_),f}t.Gutter=i});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../range").Range,d=e("../lib/dom"),r=function(){function l(u){this.element=d.createElement("div"),this.element.className="ace_layer ace_marker-layer",u.appendChild(this.element)}return l.prototype.setPadding=function(u){this.$padding=u},l.prototype.setSession=function(u){this.session=u},l.prototype.setMarkers=function(u){this.markers=u},l.prototype.elt=function(u,i){var s=this.i!=-1&&this.element.childNodes[this.i];s?this.i++:(s=document.createElement("div"),this.element.appendChild(s),this.i=-1),s.style.cssText=i,s.className=u},l.prototype.update=function(u){if(u){this.config=u,this.i=0;var i;for(var s in this.markers){var f=this.markers[s];if(!f.range){f.update(i,this,this.session,u);continue}var h=f.range.clipRows(u.firstRow,u.lastRow);if(!h.isEmpty())if(h=h.toScreenRange(this.session),f.renderer){var p=this.$getTop(h.start.row,u),c=this.$padding+h.start.column*u.characterWidth;f.renderer(i,h,c,p,u)}else f.type=="fullLine"?this.drawFullLineMarker(i,h,f.clazz,u):f.type=="screenLine"?this.drawScreenLineMarker(i,h,f.clazz,u):h.isMultiLine()?f.type=="text"?this.drawTextMarker(i,h,f.clazz,u):this.drawMultiLineMarker(i,h,f.clazz,u):this.drawSingleLineMarker(i,h,f.clazz+" ace_start ace_br15",u)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},l.prototype.$getTop=function(u,i){return(u-i.firstRowScreen)*i.lineHeight},l.prototype.drawTextMarker=function(u,i,s,f,h){for(var p=this.session,c=i.start.row,_=i.end.row,v=c,m=0,y=0,C=p.getScreenLastRowColumn(v),S=new a(v,i.start.column,v,y);v<=_;v++)S.start.row=S.end.row=v,S.start.column=v==c?i.start.column:p.getRowWrapIndent(v),S.end.column=C,m=y,y=C,C=v+1<_?p.getScreenLastRowColumn(v+1):v==_?0:i.end.column,this.drawSingleLineMarker(u,S,s+(v==c?" ace_start":"")+" ace_br"+o(v==c||v==c+1&&i.start.column,m<y,y>C,v==_),f,v==_?0:1,h)},l.prototype.drawMultiLineMarker=function(u,i,s,f,h){var p=this.$padding,c=f.lineHeight,_=this.$getTop(i.start.row,f),v=p+i.start.column*f.characterWidth;if(h=h||"",this.session.$bidiHandler.isBidiRow(i.start.row)){var m=i.clone();m.end.row=m.start.row,m.end.column=this.session.getLine(m.start.row).length,this.drawBidiSingleLineMarker(u,m,s+" ace_br1 ace_start",f,null,h)}else this.elt(s+" ace_br1 ace_start","height:"+c+"px;right:0;top:"+_+"px;left:"+v+"px;"+(h||""));if(this.session.$bidiHandler.isBidiRow(i.end.row)){var m=i.clone();m.start.row=m.end.row,m.start.column=0,this.drawBidiSingleLineMarker(u,m,s+" ace_br12",f,null,h)}else{_=this.$getTop(i.end.row,f);var y=i.end.column*f.characterWidth;this.elt(s+" ace_br12","height:"+c+"px;width:"+y+"px;top:"+_+"px;left:"+p+"px;"+(h||""))}if(c=(i.end.row-i.start.row-1)*f.lineHeight,!(c<=0)){_=this.$getTop(i.start.row+1,f);var C=(i.start.column?1:0)|(i.end.column?0:8);this.elt(s+(C?" ace_br"+C:""),"height:"+c+"px;right:0;top:"+_+"px;left:"+p+"px;"+(h||""))}},l.prototype.drawSingleLineMarker=function(u,i,s,f,h,p){if(this.session.$bidiHandler.isBidiRow(i.start.row))return this.drawBidiSingleLineMarker(u,i,s,f,h,p);var c=f.lineHeight,_=(i.end.column+(h||0)-i.start.column)*f.characterWidth,v=this.$getTop(i.start.row,f),m=this.$padding+i.start.column*f.characterWidth;this.elt(s,"height:"+c+"px;width:"+_+"px;top:"+v+"px;left:"+m+"px;"+(p||""))},l.prototype.drawBidiSingleLineMarker=function(u,i,s,f,h,p){var c=f.lineHeight,_=this.$getTop(i.start.row,f),v=this.$padding,m=this.session.$bidiHandler.getSelections(i.start.column,i.end.column);m.forEach(function(y){this.elt(s,"height:"+c+"px;width:"+(y.width+(h||0))+"px;top:"+_+"px;left:"+(v+y.left)+"px;"+(p||""))},this)},l.prototype.drawFullLineMarker=function(u,i,s,f,h){var p=this.$getTop(i.start.row,f),c=f.lineHeight;i.start.row!=i.end.row&&(c+=this.$getTop(i.end.row,f)-p),this.elt(s,"height:"+c+"px;top:"+p+"px;left:0;right:0;"+(h||""))},l.prototype.drawScreenLineMarker=function(u,i,s,f,h){var p=this.$getTop(i.start.row,f),c=f.lineHeight;this.elt(s,"height:"+c+"px;top:"+p+"px;left:0;right:0;"+(h||""))},l}();r.prototype.$padding=0;function o(l,u,i,s){return(l?1:0)|(u?2:0)|(i?4:0)|(s?8:0)}t.Marker=r});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,n){var a=new Set(["text","rparen","lparen"]);t.isTextToken=function(d){return a.has(d)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,n){"use strict";var a=e("../lib/oop"),d=e("../lib/dom"),r=e("../lib/lang"),o=e("./lines").Lines,l=e("../lib/event_emitter").EventEmitter,u=e("../config").nls,i=e("./text_util").isTextToken,s=function(){function f(h){this.dom=d,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",h.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new o(this.element)}return f.prototype.$updateEolChar=function(){var h=this.session.doc,p=h.getNewLineCharacter()==`
`&&h.getNewLineMode()!="windows",c=p?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=c)return this.EOL_CHAR=c,!0},f.prototype.setPadding=function(h){this.$padding=h,this.element.style.margin="0 "+h+"px"},f.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},f.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},f.prototype.$setFontMetrics=function(h){this.$fontMetrics=h,this.$fontMetrics.on("changeCharacterSize",function(p){this._signal("changeCharacterSize",p)}.bind(this)),this.$pollSizeChanges()},f.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},f.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},f.prototype.setSession=function(h){this.session=h,h&&this.$computeTabString()},f.prototype.setShowInvisibles=function(h){return this.showInvisibles==h?!1:(this.showInvisibles=h,typeof h=="string"?(this.showSpaces=/tab/i.test(h),this.showTabs=/space/i.test(h),this.showEOL=/eol/i.test(h)):this.showSpaces=this.showTabs=this.showEOL=h,this.$computeTabString(),!0)},f.prototype.setDisplayIndentGuides=function(h){return this.displayIndentGuides==h?!1:(this.displayIndentGuides=h,this.$computeTabString(),!0)},f.prototype.setHighlightIndentGuides=function(h){return this.$highlightIndentGuides===h?!1:(this.$highlightIndentGuides=h,h)},f.prototype.$computeTabString=function(){var h=this.session.getTabSize();this.tabSize=h;for(var p=this.$tabStrings=[0],c=1;c<h+1;c++)if(this.showTabs){var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_tab",_.textContent=r.stringRepeat(this.TAB_CHAR,c),p.push(_)}else p.push(this.dom.createTextNode(r.stringRepeat(" ",c),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var v="ace_indent-guide",m=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?r.stringRepeat(this.SPACE_CHAR,this.tabSize):r.stringRepeat(" ",this.tabSize),C=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?r.stringRepeat(this.TAB_CHAR,this.tabSize):y,_=this.dom.createElement("span");_.className=v+m,_.textContent=y,this.$tabStrings[" "]=_;var _=this.dom.createElement("span");_.className=v+C,_.textContent=S,this.$tabStrings["	"]=_}},f.prototype.updateLines=function(h,p,c){if(this.config.lastRow!=h.lastRow||this.config.firstRow!=h.firstRow)return this.update(h);this.config=h;for(var _=Math.max(p,h.firstRow),v=Math.min(c,h.lastRow),m=this.element.childNodes,y=0,S=h.firstRow;S<_;S++){var D=this.session.getFoldLine(S);if(D)if(D.containsRow(_)){_=D.start.row;break}else S=D.end.row;y++}for(var C=!1,S=_,D=this.session.getNextFoldLine(S),g=D?D.start.row:1/0;S>g&&(S=D.end.row+1,D=this.session.getNextFoldLine(S,D),g=D?D.start.row:1/0),!(S>v);){var b=m[y++];if(b){this.dom.removeChildren(b),this.$renderLine(b,S,S==g?D:!1),C&&(b.style.top=this.$lines.computeLineTop(S,h,this.session)+"px");var x=h.lineHeight*this.session.getRowLength(S)+"px";b.style.height!=x&&(C=!0,b.style.height=x)}S++}if(C)for(;y<this.$lines.cells.length;){var E=this.$lines.cells[y++];E.element.style.top=this.$lines.computeLineTop(E.row,h,this.session)+"px"}},f.prototype.scrollLines=function(h){var p=this.config;if(this.config=h,this.$lines.pageChanged(p,h))return this.update(h);this.$lines.moveContainer(h);var c=h.lastRow,_=p?p.lastRow:-1;if(!p||_<h.firstRow)return this.update(h);if(c<p.firstRow)return this.update(h);if(!p||p.lastRow<h.firstRow)return this.update(h);if(h.lastRow<p.firstRow)return this.update(h);if(p.firstRow<h.firstRow)for(var v=this.session.getFoldedRowCount(p.firstRow,h.firstRow-1);v>0;v--)this.$lines.shift();if(p.lastRow>h.lastRow)for(var v=this.session.getFoldedRowCount(h.lastRow+1,p.lastRow);v>0;v--)this.$lines.pop();h.firstRow<p.firstRow&&this.$lines.unshift(this.$renderLinesFragment(h,h.firstRow,p.firstRow-1)),h.lastRow>p.lastRow&&this.$lines.push(this.$renderLinesFragment(h,p.lastRow+1,h.lastRow)),this.$highlightIndentGuide()},f.prototype.$renderLinesFragment=function(h,p,c){for(var _=[],v=p,m=this.session.getNextFoldLine(v),y=m?m.start.row:1/0;v>y&&(v=m.end.row+1,m=this.session.getNextFoldLine(v,m),y=m?m.start.row:1/0),!(v>c);){var C=this.$lines.createCell(v,h,this.session),S=C.element;this.dom.removeChildren(S),d.setStyle(S.style,"height",this.$lines.computeLineHeight(v,h,this.session)+"px"),d.setStyle(S.style,"top",this.$lines.computeLineTop(v,h,this.session)+"px"),this.$renderLine(S,v,v==y?m:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",_.push(C),v++}return _},f.prototype.update=function(h){this.$lines.moveContainer(h),this.config=h;for(var p=h.firstRow,c=h.lastRow,_=this.$lines;_.getLength();)_.pop();_.push(this.$renderLinesFragment(h,p,c))},f.prototype.$renderToken=function(h,p,c,_){for(var v=this,m=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),C,S=0;C=m.exec(_);){var D=C[1],g=C[2],b=C[3],x=C[4],E=C[5];if(!(!v.showSpaces&&g)){var T=S!=C.index?_.slice(S,C.index):"";if(S=C.index+C[0].length,T&&y.appendChild(this.dom.createTextNode(T,this.element)),D){var M=v.session.getScreenTabSize(p+C.index);y.appendChild(v.$tabStrings[M].cloneNode(!0)),p+=M-1}else if(g)if(v.showSpaces){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space",w.textContent=r.stringRepeat(v.SPACE_CHAR,g.length),y.appendChild(w)}else y.appendChild(this.dom.createTextNode(g,this.element));else if(b){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space ace_invalid",w.textContent=r.stringRepeat(v.SPACE_CHAR,b.length),y.appendChild(w)}else if(x){p+=1;var w=this.dom.createElement("span");w.style.width=v.config.characterWidth*2+"px",w.className=v.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",w.textContent=v.showSpaces?v.SPACE_CHAR:x,y.appendChild(w)}else if(E){p+=1;var w=this.dom.createElement("span");w.style.width=v.config.characterWidth*2+"px",w.className="ace_cjk",w.textContent=E,y.appendChild(w)}}}if(y.appendChild(this.dom.createTextNode(S?_.slice(S):_,this.element)),i(c.type))h.appendChild(y);else{var F="ace_"+c.type.replace(/\./g," ace_"),w=this.dom.createElement("span");c.type=="fold"&&(w.style.width=c.value.length*this.config.characterWidth+"px",w.setAttribute("title",u("Unfold code"))),w.className=F,w.appendChild(y),h.appendChild(w)}return p+_.length},f.prototype.renderIndentGuide=function(h,p,c){var _=p.search(this.$indentGuideRe);if(_<=0||_>=c)return p;if(p[0]==" "){_-=_%this.tabSize;for(var v=_/this.tabSize,m=0;m<v;m++)h.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),p.substr(_)}else if(p[0]=="	"){for(var m=0;m<_;m++)h.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),p.substr(_)}return this.$highlightIndentGuide(),p},f.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var h=this.session.doc.$lines;if(h){var p=this.session.selection.getCursor(),c=/^\s*/.exec(this.session.doc.getLine(p.row))[0].length,_=Math.floor(c/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:_,start:p.row};var v=this.session.$bracketHighlight;if(v){for(var m=this.session.$bracketHighlight.ranges,y=0;y<m.length;y++)if(p.row!==m[y].start.row){this.$highlightIndentGuideMarker.end=m[y].start.row,p.row>m[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&h[p.row]!==""&&p.column===h[p.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=p.row+1;y<h.length;y++){var C=h[y],S=/^\s*/.exec(C)[0].length;if(C!==""&&(this.$highlightIndentGuideMarker.end=y,S<=c))break}}this.$renderHighlightIndentGuide()}}},f.prototype.$clearActiveIndentGuide=function(){for(var h=this.$lines.cells,p=0;p<h.length;p++){var c=h[p],_=c.element.childNodes;if(_.length>0){for(var v=0;v<_.length;v++)if(_[v].classList&&_[v].classList.contains("ace_indent-guide-active")){_[v].classList.remove("ace_indent-guide-active");break}}}},f.prototype.$setIndentGuideActive=function(h,p){var c=this.session.doc.getLine(h.row);if(c!==""){var _=h.element.childNodes;if(_){var v=_[p-1];v&&v.classList&&v.classList.contains("ace_indent-guide")&&v.classList.add("ace_indent-guide-active")}}},f.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var h=this.$lines.cells;this.$clearActiveIndentGuide();var p=this.$highlightIndentGuideMarker.indentLevel;if(p!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var c=0;c<h.length;c++){var _=h[c];if(this.$highlightIndentGuideMarker.end&&_.row>=this.$highlightIndentGuideMarker.start+1){if(_.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(_,p)}}else for(var c=h.length-1;c>=0;c--){var _=h[c];if(this.$highlightIndentGuideMarker.end&&_.row<this.$highlightIndentGuideMarker.start){if(_.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(_,p)}}}},f.prototype.$createLineElement=function(h){var p=this.dom.createElement("div");return p.className="ace_line",p.style.height=this.config.lineHeight+"px",p},f.prototype.$renderWrappedLine=function(h,p,c){var _=0,v=0,m=c[0],y=0,C=this.$createLineElement();h.appendChild(C);for(var S=0;S<p.length;S++){var D=p[S],g=D.value;if(S==0&&this.displayIndentGuides){if(_=g.length,g=this.renderIndentGuide(C,g,m),!g)continue;_-=g.length}if(_+g.length<m)y=this.$renderToken(C,y,D,g),_+=g.length;else{for(;_+g.length>=m;)y=this.$renderToken(C,y,D,g.substring(0,m-_)),g=g.substring(m-_),_=m,C=this.$createLineElement(),h.appendChild(C),C.appendChild(this.dom.createTextNode(r.stringRepeat("\xA0",c.indent),this.element)),v++,y=0,m=c[v]||Number.MAX_VALUE;g.length!=0&&(_+=g.length,y=this.$renderToken(C,y,D,g))}}c[c.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(C,y,null,"",!0)},f.prototype.$renderSimpleLine=function(h,p){for(var c=0,_=0;_<p.length;_++){var v=p[_],m=v.value;if(!(_==0&&this.displayIndentGuides&&(m=this.renderIndentGuide(h,m),!m))){if(c+m.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(h,c,v,m);c=this.$renderToken(h,c,v,m)}}},f.prototype.$renderOverflowMessage=function(h,p,c,_,v){c&&this.$renderToken(h,p,c,_.slice(0,this.MAX_LINE_LENGTH-p));var m=this.dom.createElement("span");m.className="ace_inline_button ace_keyword ace_toggle_wrap",m.textContent=v?"<hide>":"<click to see more...>",h.appendChild(m)},f.prototype.$renderLine=function(h,p,c){if(!c&&c!=!1&&(c=this.session.getFoldLine(p)),c)var _=this.$getFoldLineTokens(p,c);else var _=this.session.getTokens(p);var v=h;if(_.length){var m=this.session.getRowSplitData(p);if(m&&m.length){this.$renderWrappedLine(h,_,m);var v=h.lastChild}else{var v=h;this.$useLineGroups()&&(v=this.$createLineElement(),h.appendChild(v)),this.$renderSimpleLine(v,_)}}else this.$useLineGroups()&&(v=this.$createLineElement(),h.appendChild(v));if(this.showEOL&&v){c&&(p=c.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=p==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,v.appendChild(y)}},f.prototype.$getFoldLineTokens=function(h,p){var c=this.session,_=[];function v(y,C,S){for(var D=0,g=0;g+y[D].value.length<C;)if(g+=y[D].value.length,D++,D==y.length)return;if(g!=C){var b=y[D].value.substring(C-g);b.length>S-C&&(b=b.substring(0,S-C)),_.push({type:y[D].type,value:b}),g=C+b.length,D+=1}for(;g<S&&D<y.length;){var b=y[D].value;b.length+g>S?_.push({type:y[D].type,value:b.substring(0,S-g)}):_.push(y[D]),g+=b.length,D+=1}}var m=c.getTokens(h);return p.walk(function(y,C,S,D,g){y!=null?_.push({type:"fold",value:y}):(g&&(m=c.getTokens(C)),m.length&&v(m,D,S))},p.end.row,this.session.getLine(p.end.row).length),_},f.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},f}();s.prototype.EOF_CHAR="\xB6",s.prototype.EOL_CHAR_LF="\xAC",s.prototype.EOL_CHAR_CRLF="\xA4",s.prototype.EOL_CHAR=s.prototype.EOL_CHAR_LF,s.prototype.TAB_CHAR="\u2014",s.prototype.SPACE_CHAR="\xB7",s.prototype.$padding=0,s.prototype.MAX_LINE_LENGTH=1e4,s.prototype.showInvisibles=!1,s.prototype.showSpaces=!1,s.prototype.showTabs=!1,s.prototype.showEOL=!1,s.prototype.displayIndentGuides=!0,s.prototype.$highlightIndentGuides=!0,s.prototype.$tabStrings=[],s.prototype.destroy={},s.prototype.onChangeTabSize=s.prototype.$computeTabString,a.implement(s.prototype,l),t.Text=s});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../lib/dom"),d=function(){function r(o){this.element=a.createElement("div"),this.element.className="ace_layer ace_cursor-layer",o.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),a.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return r.prototype.$updateOpacity=function(o){for(var l=this.cursors,u=l.length;u--;)a.setStyle(l[u].style,"opacity",o?"":"0")},r.prototype.$startCssAnimation=function(){for(var o=this.cursors,l=o.length;l--;)o[l].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&a.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},r.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,a.removeCssClass(this.element,"ace_animate-blinking")},r.prototype.setPadding=function(o){this.$padding=o},r.prototype.setSession=function(o){this.session=o},r.prototype.setBlinking=function(o){o!=this.isBlinking&&(this.isBlinking=o,this.restartTimer())},r.prototype.setBlinkInterval=function(o){o!=this.blinkInterval&&(this.blinkInterval=o,this.restartTimer())},r.prototype.setSmoothBlinking=function(o){o!=this.smoothBlinking&&(this.smoothBlinking=o,a.setCssClass(this.element,"ace_smooth-blinking",o),this.$updateCursors(!0),this.restartTimer())},r.prototype.addCursor=function(){var o=a.createElement("div");return o.className="ace_cursor",this.element.appendChild(o),this.cursors.push(o),o},r.prototype.removeCursor=function(){if(this.cursors.length>1){var o=this.cursors.pop();return o.parentNode.removeChild(o),o}},r.prototype.hideCursor=function(){this.isVisible=!1,a.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},r.prototype.showCursor=function(){this.isVisible=!0,a.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},r.prototype.restartTimer=function(){var o=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,a.removeCssClass(this.element,"ace_smooth-blinking")),o(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&a.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),a.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var l=function(){this.timeoutId=setTimeout(function(){o(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){o(!0),l()},this.blinkInterval),l()}},r.prototype.getPixelPosition=function(o,l){if(!this.config||!this.session)return{left:0,top:0};o||(o=this.session.selection.getCursor());var u=this.session.documentToScreenPosition(o),i=this.$padding+(this.session.$bidiHandler.isBidiRow(u.row,o.row)?this.session.$bidiHandler.getPosLeft(u.column):u.column*this.config.characterWidth),s=(u.row-(l?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:s}},r.prototype.isCursorInView=function(o,l){return o.top>=0&&o.top<l.maxHeight},r.prototype.update=function(o){this.config=o;var l=this.session.$selectionMarkers,u=0,i=0;(l===void 0||l.length===0)&&(l=[{cursor:null}]);for(var u=0,s=l.length;u<s;u++){var f=this.getPixelPosition(l[u].cursor,!0);if(!((f.top>o.height+o.offset||f.top<0)&&u>1)){var h=this.cursors[i++]||this.addCursor(),p=h.style;this.drawCursor?this.drawCursor(h,f,o,l[u],this.session):this.isCursorInView(f,o)?(a.setStyle(p,"display","block"),a.translate(h,f.left,f.top),a.setStyle(p,"width",Math.round(o.characterWidth)+"px"),a.setStyle(p,"height",o.lineHeight+"px")):a.setStyle(p,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=f,this.restartTimer()},r.prototype.$setOverwrite=function(o){o!=this.overwrite&&(this.overwrite=o,o?a.addCssClass(this.element,"ace_overwrite-cursors"):a.removeCssClass(this.element,"ace_overwrite-cursors"))},r.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},r}();d.prototype.$padding=0,d.prototype.drawCursor=null,t.Cursor=d});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var h=function(p,c){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(_[m]=v[m])},h(p,c)};return function(p,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");h(p,c);function _(){this.constructor=p}p.prototype=c===null?Object.create(c):(_.prototype=c.prototype,new _)}}(),d=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/event"),l=e("./lib/event_emitter").EventEmitter,u=32768,i=function(){function h(p,c){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+c,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),p.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)}return h.prototype.setVisible=function(p){this.element.style.display=p?"":"none",this.isVisible=p,this.coeff=1},h}();d.implement(i.prototype,l);var s=function(h){a(p,h);function p(c,_){var v=h.call(this,c,"-v")||this;return v.scrollTop=0,v.scrollHeight=0,_.$scrollbarWidth=v.width=r.scrollbarWidth(c.ownerDocument),v.inner.style.width=v.element.style.width=(v.width||15)+5+"px",v.$minWidth=0,v}return p.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var c=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-c)/(this.coeff-c)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},p.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},p.prototype.setHeight=function(c){this.element.style.height=c+"px"},p.prototype.setScrollHeight=function(c){this.scrollHeight=c,c>u?(this.coeff=u/c,c=u):this.coeff!=1&&(this.coeff=1),this.inner.style.height=c+"px"},p.prototype.setScrollTop=function(c){this.scrollTop!=c&&(this.skipEvent=!0,this.scrollTop=c,this.element.scrollTop=c*this.coeff)},p}(i);s.prototype.setInnerHeight=s.prototype.setScrollHeight;var f=function(h){a(p,h);function p(c,_){var v=h.call(this,c,"-h")||this;return v.scrollLeft=0,v.height=_.$scrollbarWidth,v.inner.style.height=v.element.style.height=(v.height||15)+5+"px",v}return p.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},p.prototype.getHeight=function(){return this.isVisible?this.height:0},p.prototype.setWidth=function(c){this.element.style.width=c+"px"},p.prototype.setInnerWidth=function(c){this.inner.style.width=c+"px"},p.prototype.setScrollWidth=function(c){this.inner.style.width=c+"px"},p.prototype.setScrollLeft=function(c){this.scrollLeft!=c&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=c)},p}(i);t.ScrollBar=s,t.ScrollBarV=s,t.ScrollBarH=f,t.VScrollBar=s,t.HScrollBar=f});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var f=function(h,p){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&(c[v]=_[v])},f(h,p)};return function(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");f(h,p);function c(){this.constructor=h}h.prototype=p===null?Object.create(p):(c.prototype=p.prototype,new c)}}(),d=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/event"),l=e("./lib/event_emitter").EventEmitter;r.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var u=function(){function f(h,p){this.element=r.createElement("div"),this.element.className="ace_sb"+p,this.inner=r.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,h.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return f.prototype.setVisible=function(h){this.element.style.display=h?"":"none",this.isVisible=h,this.coeff=1},f}();d.implement(u.prototype,l);var i=function(f){a(h,f);function h(p,c){var _=f.call(this,p,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,_.parent=p,_.width=_.VScrollWidth,_.renderer=c,_.inner.style.width=_.element.style.width=(_.width||15)+"px",_.$minWidth=0,_}return h.prototype.onMouseDown=function(p,c){if(p==="mousedown"&&!(o.getButton(c)!==0||c.detail===2)){if(c.target===this.inner){var _=this,v=c.clientY,m=function(x){v=x.clientY},y=function(){clearInterval(g)},C=c.clientY,S=this.thumbTop,D=function(){if(v!==void 0){var x=_.scrollTopFromThumbTop(S+v-C);x!==_.scrollTop&&_._emit("scroll",{data:x})}};o.capture(this.inner,m,y);var g=setInterval(D,20);return o.preventDefault(c)}var b=c.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(b)}),o.preventDefault(c)}},h.prototype.getHeight=function(){return this.height},h.prototype.scrollTopFromThumbTop=function(p){var c=p*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return c=c>>0,c<0?c=0:c>this.pageHeight-this.viewHeight&&(c=this.pageHeight-this.viewHeight),c},h.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},h.prototype.setHeight=function(p){this.height=Math.max(0,p),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},h.prototype.setScrollHeight=function(p,c){this.pageHeight===p&&!c||(this.pageHeight=p,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},h.prototype.setScrollTop=function(p){this.scrollTop=p,p<0&&(p=0),this.thumbTop=p*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},h}(u);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var s=function(f){a(h,f);function h(p,c){var _=f.call(this,p,"-h")||this;return _.scrollLeft=0,_.scrollWidth=0,_.height=_.HScrollHeight,_.inner.style.height=_.element.style.height=(_.height||12)+"px",_.renderer=c,_}return h.prototype.onMouseDown=function(p,c){if(p==="mousedown"&&!(o.getButton(c)!==0||c.detail===2)){if(c.target===this.inner){var _=this,v=c.clientX,m=function(x){v=x.clientX},y=function(){clearInterval(g)},C=c.clientX,S=this.thumbLeft,D=function(){if(v!==void 0){var x=_.scrollLeftFromThumbLeft(S+v-C);x!==_.scrollLeft&&_._emit("scroll",{data:x})}};o.capture(this.inner,m,y);var g=setInterval(D,20);return o.preventDefault(c)}var b=c.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(b)}),o.preventDefault(c)}},h.prototype.getHeight=function(){return this.isVisible?this.height:0},h.prototype.scrollLeftFromThumbLeft=function(p){var c=p*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return c=c>>0,c<0?c=0:c>this.pageWidth-this.viewWidth&&(c=this.pageWidth-this.viewWidth),c},h.prototype.setWidth=function(p){this.width=Math.max(0,p),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},h.prototype.setScrollWidth=function(p,c){this.pageWidth===p&&!c||(this.pageWidth=p,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},h.prototype.setScrollLeft=function(p){this.scrollLeft=p,p<0&&(p=0),this.thumbLeft=p*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},h}(u);s.prototype.setInnerWidth=s.prototype.setScrollWidth,t.ScrollBar=i,t.ScrollBarV=i,t.ScrollBarH=s,t.VScrollBar=i,t.HScrollBar=s});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var a=e("./lib/event"),d=function(){function r(o,l){this.onRender=o,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=l||window;var u=this;this._flush=function(i){u.pending=!1;var s=u.changes;if(s&&(a.blockIdle(100),u.changes=0,u.onRender(s)),u.changes){if(u.$recursionLimit--<0)return;u.schedule()}else u.$recursionLimit=2}}return r.prototype.schedule=function(o){this.changes=this.changes|o,this.changes&&!this.pending&&(a.nextFrame(this._flush),this.pending=!0)},r.prototype.clear=function(o){var l=this.changes;return this.changes=0,l},r}();t.RenderLoop=d});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var a=e("../lib/oop"),d=e("../lib/dom"),r=e("../lib/lang"),o=e("../lib/event"),l=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,i=512,s=typeof ResizeObserver=="function",f=200,h=function(){function p(c){this.el=d.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=d.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=d.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),c.appendChild(this.el),this.$measureNode.textContent=r.stringRepeat("X",i),this.$characterSize={width:0,height:0},s?this.$addObserver():this.checkForSizeChanges()}return p.prototype.$setMeasureNodeStyles=function(c,_){c.width=c.height="auto",c.left=c.top="0px",c.visibility="hidden",c.position="absolute",c.whiteSpace="pre",l.isIE<8?c["font-family"]="inherit":c.font="inherit",c.overflow=_?"hidden":"visible"},p.prototype.checkForSizeChanges=function(c){if(c===void 0&&(c=this.$measureSizes()),c&&(this.$characterSize.width!==c.width||this.$characterSize.height!==c.height)){this.$measureNode.style.fontWeight="bold";var _=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=c,this.charSizes=Object.create(null),this.allowBoldFonts=_&&_.width===c.width&&_.height===c.height,this._emit("changeCharacterSize",{data:c})}},p.prototype.$addObserver=function(){var c=this;this.$observer=new window.ResizeObserver(function(_){c.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},p.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var c=this;return this.$pollSizeChangesTimer=o.onIdle(function _(){c.checkForSizeChanges(),o.onIdle(_,500)},500)},p.prototype.setPolling=function(c){c?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},p.prototype.$measureSizes=function(c){var _={height:(c||this.$measureNode).clientHeight,width:(c||this.$measureNode).clientWidth/i};return _.width===0||_.height===0?null:_},p.prototype.$measureCharWidth=function(c){this.$main.textContent=r.stringRepeat(c,i);var _=this.$main.getBoundingClientRect();return _.width/i},p.prototype.getCharacterWidth=function(c){var _=this.charSizes[c];return _===void 0&&(_=this.charSizes[c]=this.$measureCharWidth(c)/this.$characterSize.width),_},p.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},p.prototype.$getZoom=function(c){return!c||!c.parentElement?1:(window.getComputedStyle(c).zoom||1)*this.$getZoom(c.parentElement)},p.prototype.$initTransformMeasureNodes=function(){var c=function(_,v){return["div",{style:"position: absolute;top:"+_+"px;left:"+v+"px;"}]};this.els=d.buildDom([c(0,0),c(f,0),c(0,f),c(f,f)],this.el)},p.prototype.transformCoordinates=function(c,_){if(c){var v=this.$getZoom(this.el);c=S(1/v,c)}function m($,H,P){var q=$[1]*H[0]-$[0]*H[1];return[(-H[1]*P[0]+H[0]*P[1])/q,(+$[1]*P[0]-$[0]*P[1])/q]}function y($,H){return[$[0]-H[0],$[1]-H[1]]}function C($,H){return[$[0]+H[0],$[1]+H[1]]}function S($,H){return[$*H[0],$*H[1]]}this.els||this.$initTransformMeasureNodes();function D($){var H=$.getBoundingClientRect();return[H.left,H.top]}var g=D(this.els[0]),b=D(this.els[1]),x=D(this.els[2]),E=D(this.els[3]),T=m(y(E,b),y(E,x),y(C(b,x),C(E,g))),M=S(1+T[0],y(b,g)),w=S(1+T[1],y(x,g));if(_){var F=_,L=T[0]*F[0]/f+T[1]*F[1]/f+1,R=C(S(F[0],M),S(F[1],w));return C(S(1/L/f,R),g)}var A=y(c,g),I=m(y(M,S(T[0],A)),y(w,S(T[1],A)),A);return S(f,I)},p}();h.prototype.$characterSize={width:0,height:0},a.implement(h.prototype,u),t.FontMetrics=h});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=e("../lib/dom"),d=e("../lib/oop"),r=e("../lib/event_emitter").EventEmitter,o=function(){function l(u,i){this.canvas=a.createElement("canvas"),this.renderer=i,this.pixelRatio=1,this.maxHeight=i.layerConfig.maxHeight,this.lineHeight=i.layerConfig.lineHeight,this.canvasHeight=u.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=u.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},u.element.appendChild(this.canvas)}return l.prototype.$updateDecorators=function(u){var i=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(u){this.maxHeight=u.maxHeight,this.lineHeight=u.lineHeight,this.canvasHeight=u.height;var s=(u.lastRow+1)*this.lineHeight;s<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var f=this.canvas.getContext("2d");function h(E,T){return E.priority<T.priority?-1:E.priority>T.priority?1:0}var p=this.renderer.session.$annotations;if(f.clearRect(0,0,this.canvas.width,this.canvas.height),p){var c={info:1,warning:2,error:3};p.forEach(function(E){E.priority=c[E.type]||null}),p=p.sort(h);for(var _=this.renderer.session.$foldData,v=0;v<p.length;v++){var m=p[v].row,y=this.compensateFoldRows(m,_),C=Math.round((m-y)*this.lineHeight*this.heightRatio),S=Math.round((m-y)*this.lineHeight*this.heightRatio),D=Math.round(((m-y)*this.lineHeight+this.lineHeight)*this.heightRatio),g=D-S;if(g<this.minDecorationHeight){var b=(S+D)/2|0;b<this.halfMinDecorationHeight?b=this.halfMinDecorationHeight:b+this.halfMinDecorationHeight>this.canvasHeight&&(b=this.canvasHeight-this.halfMinDecorationHeight),S=Math.round(b-this.halfMinDecorationHeight),D=Math.round(b+this.halfMinDecorationHeight)}f.fillStyle=i[p[v].type]||null,f.fillRect(0,C,this.canvasWidth,D-S)}}var x=this.renderer.session.selection.getCursor();if(x){var y=this.compensateFoldRows(x.row,_),C=Math.round((x.row-y)*this.lineHeight*this.heightRatio);f.fillStyle="rgba(0, 0, 0, 0.5)",f.fillRect(0,C,this.canvasWidth,2)}},l.prototype.compensateFoldRows=function(u,i){var s=0;if(i&&i.length>0)for(var f=0;f<i.length;f++)u>i[f].start.row&&u<i[f].end.row?s+=u-i[f].start.row:u>=i[f].end.row&&(s+=i[f].end.row-i[f].start.row);return s},l}();d.implement(o.prototype,r),t.Decorator=o});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("./lib/oop"),d=e("./lib/dom"),r=e("./lib/lang"),o=e("./config"),l=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,i=e("./layer/text").Text,s=e("./layer/cursor").Cursor,f=e("./scrollbar").HScrollBar,h=e("./scrollbar").VScrollBar,p=e("./scrollbar_custom").HScrollBar,c=e("./scrollbar_custom").VScrollBar,_=e("./renderloop").RenderLoop,v=e("./layer/font_metrics").FontMetrics,m=e("./lib/event_emitter").EventEmitter,y=e("./css/editor-css"),C=e("./layer/decorators").Decorator,S=e("./lib/useragent");d.importCssString(y,"ace_editor.css",!1);var D=function(){function g(b,x){var E=this;this.container=b||d.createElement("div"),d.addCssClass(this.container,"ace_editor"),d.HI_DPI&&d.addCssClass(this.container,"ace_hidpi"),this.setTheme(x),o.get("useStrictCSP")==null&&o.set("useStrictCSP",!1),this.$gutter=d.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=d.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=d.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new l(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var T=this.$textLayer=new i(this.content);this.canvas=T.element,this.$markerFront=new u(this.content),this.$cursorLayer=new s(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.on("scroll",function(M){E.$scrollAnimation||E.session.setScrollTop(M.data-E.scrollMargin.top)}),this.scrollBarH.on("scroll",function(M){E.$scrollAnimation||E.session.setScrollLeft(M.data-E.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new v(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(M){E.updateCharacterSize(),E.onResize(!0,E.gutterWidth,E.$size.width,E.$size.height),E._signal("changeCharacterSize",M)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new _(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),o.resetOptions(this),o._signal("renderer",this)}return g.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),d.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},g.prototype.setSession=function(b){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=b,b&&this.scrollMargin.top&&b.getScrollTop()<=0&&b.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(b),this.$markerBack.setSession(b),this.$markerFront.setSession(b),this.$gutterLayer.setSession(b),this.$textLayer.setSession(b),b&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},g.prototype.updateLines=function(b,x,E){if(x===void 0&&(x=1/0),this.$changedLines?(this.$changedLines.firstRow>b&&(this.$changedLines.firstRow=b),this.$changedLines.lastRow<x&&(this.$changedLines.lastRow=x)):this.$changedLines={firstRow:b,lastRow:x},this.$changedLines.lastRow<this.layerConfig.firstRow)if(E)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},g.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},g.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},g.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},g.prototype.updateFull=function(b){b?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},g.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},g.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},g.prototype.onResize=function(b,x,E,T){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=b?1:0;var M=this.container;T||(T=M.clientHeight||M.scrollHeight),E||(E=M.clientWidth||M.scrollWidth);var w=this.$updateCachedSize(b,x,E,T);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!E&&!T)return this.resizing=0;b&&(this.$gutterLayer.$padding=null),b?this.$renderChanges(w|this.$changes,!0):this.$loop.schedule(w|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},g.prototype.$updateCachedSize=function(b,x,E,T){T-=this.$extraHeight||0;var M=0,w=this.$size,F={width:w.width,height:w.height,scrollerHeight:w.scrollerHeight,scrollerWidth:w.scrollerWidth};if(T&&(b||w.height!=T)&&(w.height=T,M|=this.CHANGE_SIZE,w.scrollerHeight=w.height,this.$horizScroll&&(w.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(w.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",M=M|this.CHANGE_SCROLL),E&&(b||w.width!=E)){M|=this.CHANGE_SIZE,w.width=E,x==null&&(x=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=x,d.setStyle(this.scrollBarH.element.style,"left",x+"px"),d.setStyle(this.scroller.style,"left",x+this.margin.left+"px"),w.scrollerWidth=Math.max(0,E-x-this.scrollBarV.getWidth()-this.margin.h),d.setStyle(this.$gutter.style,"left",this.margin.left+"px");var L=this.scrollBarV.getWidth()+"px";d.setStyle(this.scrollBarH.element.style,"right",L),d.setStyle(this.scroller.style,"right",L),d.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(w.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||b)&&(M|=this.CHANGE_FULL)}return w.$dirty=!E||!T,M&&this._signal("resize",F),M},g.prototype.onGutterResize=function(b){var x=this.$showGutter?b:0;x!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,x,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},g.prototype.adjustWrapLimit=function(){var b=this.$size.scrollerWidth-this.$padding*2,x=Math.floor(b/this.characterWidth);return this.session.adjustWrapLimit(x,this.$showPrintMargin&&this.$printMarginColumn)},g.prototype.setAnimatedScroll=function(b){this.setOption("animatedScroll",b)},g.prototype.getAnimatedScroll=function(){return this.$animatedScroll},g.prototype.setShowInvisibles=function(b){this.setOption("showInvisibles",b),this.session.$bidiHandler.setShowInvisibles(b)},g.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},g.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},g.prototype.setDisplayIndentGuides=function(b){this.setOption("displayIndentGuides",b)},g.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},g.prototype.setHighlightIndentGuides=function(b){this.setOption("highlightIndentGuides",b)},g.prototype.setShowPrintMargin=function(b){this.setOption("showPrintMargin",b)},g.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},g.prototype.setPrintMarginColumn=function(b){this.setOption("printMarginColumn",b)},g.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},g.prototype.getShowGutter=function(){return this.getOption("showGutter")},g.prototype.setShowGutter=function(b){return this.setOption("showGutter",b)},g.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},g.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},g.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},g.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},g.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var b=d.createElement("div");b.className="ace_layer ace_print-margin-layer",this.$printMarginEl=d.createElement("div"),this.$printMarginEl.className="ace_print-margin",b.appendChild(this.$printMarginEl),this.content.insertBefore(b,this.content.firstChild)}var x=this.$printMarginEl.style;x.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",x.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},g.prototype.getContainerElement=function(){return this.container},g.prototype.getMouseEventTarget=function(){return this.scroller},g.prototype.getTextAreaContainer=function(){return this.container},g.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var b=this.textarea.style,x=this.$composition;if(!this.$keepTextAreaAtCursor&&!x){d.translate(this.textarea,-100,0);return}var E=this.$cursorLayer.$pixelPos;if(E){x&&x.markerRange&&(E=this.$cursorLayer.getPixelPosition(x.markerRange.start,!0));var T=this.layerConfig,M=E.top,w=E.left;M-=T.offset;var F=x&&x.useTextareaForIME||S.isMobile?this.lineHeight:1;if(M<0||M>T.height-F){d.translate(this.textarea,0,0);return}var L=1,R=this.$size.height-F;if(!x)M+=this.lineHeight;else if(x.useTextareaForIME){var A=this.textarea.value;L=this.characterWidth*this.session.$getStringScreenWidth(A)[0]}else M+=this.lineHeight+2;w-=this.scrollLeft,w>this.$size.scrollerWidth-L&&(w=this.$size.scrollerWidth-L),w+=this.gutterWidth+this.margin.left,d.setStyle(b,"height",F+"px"),d.setStyle(b,"width",L+"px"),d.translate(this.textarea,Math.min(w,this.$size.scrollerWidth-L),Math.min(M,R))}}},g.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},g.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},g.prototype.getLastFullyVisibleRow=function(){var b=this.layerConfig,x=b.lastRow,E=this.session.documentToScreenRow(x,0)*b.lineHeight;return E-this.session.getScrollTop()>b.height-b.lineHeight?x-1:x},g.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},g.prototype.setPadding=function(b){this.$padding=b,this.$textLayer.setPadding(b),this.$cursorLayer.setPadding(b),this.$markerFront.setPadding(b),this.$markerBack.setPadding(b),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},g.prototype.setScrollMargin=function(b,x,E,T){var M=this.scrollMargin;M.top=b|0,M.bottom=x|0,M.right=T|0,M.left=E|0,M.v=M.top+M.bottom,M.h=M.left+M.right,M.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-M.top),this.updateFull()},g.prototype.setMargin=function(b,x,E,T){var M=this.margin;M.top=b|0,M.bottom=x|0,M.right=T|0,M.left=E|0,M.v=M.top+M.bottom,M.h=M.left+M.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},g.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},g.prototype.setHScrollBarAlwaysVisible=function(b){this.setOption("hScrollBarAlwaysVisible",b)},g.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},g.prototype.setVScrollBarAlwaysVisible=function(b){this.setOption("vScrollBarAlwaysVisible",b)},g.prototype.$updateScrollBarV=function(){var b=this.layerConfig.maxHeight,x=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(b-=(x-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>b-x&&(b=this.scrollTop+x,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(b+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},g.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},g.prototype.freeze=function(){this.$frozen=!0},g.prototype.unfreeze=function(){this.$frozen=!1},g.prototype.$renderChanges=function(b,x){if(this.$changes&&(b|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!b&&!x){this.$changes|=b;return}if(this.$size.$dirty)return this.$changes|=b,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",b),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var E=this.layerConfig;if(b&this.CHANGE_FULL||b&this.CHANGE_SIZE||b&this.CHANGE_TEXT||b&this.CHANGE_LINES||b&this.CHANGE_SCROLL||b&this.CHANGE_H_SCROLL){if(b|=this.$computeLayerConfig()|this.$loop.clear(),E.firstRow!=this.layerConfig.firstRow&&E.firstRowScreen==this.layerConfig.firstRowScreen){var T=this.scrollTop+(E.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;T>0&&(this.scrollTop=T,b=b|this.CHANGE_SCROLL,b|=this.$computeLayerConfig()|this.$loop.clear())}E=this.layerConfig,this.$updateScrollBarV(),b&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),d.translate(this.content,-this.scrollLeft,-E.offset);var M=E.width+2*this.$padding+"px",w=E.minHeight+"px";d.setStyle(this.content.style,"width",M),d.setStyle(this.content.style,"height",w)}if(b&this.CHANGE_H_SCROLL&&(d.translate(this.content,-this.scrollLeft,-E.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),b&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}if(b&this.CHANGE_SCROLL){this.$changedLines=null,b&this.CHANGE_TEXT||b&this.CHANGE_LINES?this.$textLayer.update(E):this.$textLayer.scrollLines(E),this.$showGutter&&(b&this.CHANGE_GUTTER||b&this.CHANGE_LINES?this.$gutterLayer.update(E):this.$gutterLayer.scrollLines(E)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}b&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):b&this.CHANGE_LINES?((this.$updateLines()||b&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):b&this.CHANGE_TEXT||b&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):b&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)),b&this.CHANGE_CURSOR&&(this.$cursorLayer.update(E),this.$moveTextAreaToCursor()),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(E),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(E),this._signal("afterRender",b)},g.prototype.$autosize=function(){var b=this.session.getScreenLength()*this.lineHeight,x=this.$maxLines*this.lineHeight,E=Math.min(x,Math.max((this.$minLines||1)*this.lineHeight,b))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(E+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&E>this.$maxPixelHeight&&(E=this.$maxPixelHeight);var T=E<=2*this.lineHeight,M=!T&&b>x;if(E!=this.desiredHeight||this.$size.height!=this.desiredHeight||M!=this.$vScroll){M!=this.$vScroll&&(this.$vScroll=M,this.scrollBarV.setVisible(M));var w=this.container.clientWidth;this.container.style.height=E+"px",this.$updateCachedSize(!0,this.$gutterWidth,w,E),this.desiredHeight=E,this._signal("autosize")}},g.prototype.$computeLayerConfig=function(){var b=this.session,x=this.$size,E=x.height<=2*this.lineHeight,T=this.session.getScreenLength(),M=T*this.lineHeight,w=this.$getLongestLine(),F=!E&&(this.$hScrollBarAlwaysVisible||x.scrollerWidth-w-2*this.$padding<0),L=this.$horizScroll!==F;L&&(this.$horizScroll=F,this.scrollBarH.setVisible(F));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var A=x.scrollerHeight+this.lineHeight,I=!this.$maxLines&&this.$scrollPastEnd?(x.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;M+=I;var $=this.scrollMargin;this.session.setScrollTop(Math.max(-$.top,Math.min(this.scrollTop,M-x.scrollerHeight+$.bottom))),this.session.setScrollLeft(Math.max(-$.left,Math.min(this.scrollLeft,w+2*this.$padding-x.scrollerWidth+$.right)));var H=!E&&(this.$vScrollBarAlwaysVisible||x.scrollerHeight-M+I<0||this.scrollTop>$.top),P=R!==H;P&&(this.$vScroll=H,this.scrollBarV.setVisible(H));var q=this.scrollTop%this.lineHeight,G=Math.ceil(A/this.lineHeight)-1,B=Math.max(0,Math.round((this.scrollTop-q)/this.lineHeight)),Q=B+G,O,W,U=this.lineHeight;B=b.screenToDocumentRow(B,0);var N=b.getFoldLine(B);N&&(B=N.start.row),O=b.documentToScreenRow(B,0),W=b.getRowLength(B)*U,Q=Math.min(b.screenToDocumentRow(Q,0),b.getLength()-1),A=x.scrollerHeight+b.getRowLength(Q)*U+W,q=this.scrollTop-O*U;var te=0;return(this.layerConfig.width!=w||L)&&(te=this.CHANGE_H_SCROLL),(L||P)&&(te|=this.$updateCachedSize(!0,this.gutterWidth,x.width,x.height),this._signal("scrollbarVisibilityChanged"),P&&(w=this.$getLongestLine())),this.layerConfig={width:w,padding:this.$padding,firstRow:B,firstRowScreen:O,lastRow:Q,lineHeight:U,characterWidth:this.characterWidth,minHeight:A,maxHeight:M,offset:q,gutterOffset:U?Math.max(0,Math.ceil((q+x.height-x.scrollerHeight)/U)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(w-this.$padding),te},g.prototype.$updateLines=function(){if(this.$changedLines){var b=this.$changedLines.firstRow,x=this.$changedLines.lastRow;this.$changedLines=null;var E=this.layerConfig;if(!(b>E.lastRow+1)&&!(x<E.firstRow)){if(x===1/0){this.$showGutter&&this.$gutterLayer.update(E),this.$textLayer.update(E);return}return this.$textLayer.updateLines(E,b,x),!0}}},g.prototype.$getLongestLine=function(){var b=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(b+=1),this.$textLayer&&b>this.$textLayer.MAX_LINE_LENGTH&&(b=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(b*this.characterWidth))},g.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},g.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},g.prototype.addGutterDecoration=function(b,x){this.$gutterLayer.addGutterDecoration(b,x)},g.prototype.removeGutterDecoration=function(b,x){this.$gutterLayer.removeGutterDecoration(b,x)},g.prototype.updateBreakpoints=function(b){this._rows=b,this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.setAnnotations=function(b){this.$gutterLayer.setAnnotations(b),this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},g.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},g.prototype.showCursor=function(){this.$cursorLayer.showCursor()},g.prototype.scrollSelectionIntoView=function(b,x,E){this.scrollCursorIntoView(b,E),this.scrollCursorIntoView(x,E)},g.prototype.scrollCursorIntoView=function(b,x,E){if(this.$size.scrollerHeight!==0){var T=this.$cursorLayer.getPixelPosition(b),M=T.left,w=T.top,F=E&&E.top||0,L=E&&E.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+F>w?(x&&R+F>w+this.lineHeight&&(w-=x*this.$size.scrollerHeight),w===0&&(w=-this.scrollMargin.top),this.session.setScrollTop(w)):R+this.$size.scrollerHeight-L<w+this.lineHeight&&(x&&R+this.$size.scrollerHeight-L<w-this.lineHeight&&(w+=x*this.$size.scrollerHeight),this.session.setScrollTop(w+this.lineHeight+L-this.$size.scrollerHeight));var A=this.scrollLeft,I=2*this.layerConfig.characterWidth;M-I<A?(M-=I,M<this.$padding+I&&(M=-this.scrollMargin.left),this.session.setScrollLeft(M)):(M+=I,A+this.$size.scrollerWidth<M+this.characterWidth?this.session.setScrollLeft(Math.round(M+this.characterWidth-this.$size.scrollerWidth)):A<=this.$padding&&M-A<this.characterWidth&&this.session.setScrollLeft(0))}},g.prototype.getScrollTop=function(){return this.session.getScrollTop()},g.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},g.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},g.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},g.prototype.scrollToRow=function(b){this.session.setScrollTop(b*this.lineHeight)},g.prototype.alignCursor=function(b,x){typeof b=="number"&&(b={row:b,column:0});var E=this.$cursorLayer.getPixelPosition(b),T=this.$size.scrollerHeight-this.lineHeight,M=E.top-T*(x||0);return this.session.setScrollTop(M),M},g.prototype.$calcSteps=function(b,x){var E=0,T=this.STEPS,M=[],w=function(F,L,R){return R*(Math.pow(F-1,3)+1)+L};for(E=0;E<T;++E)M.push(w(E/this.STEPS,b,x-b));return M},g.prototype.scrollToLine=function(b,x,E,T){var M=this.$cursorLayer.getPixelPosition({row:b,column:0}),w=M.top;x&&(w-=this.$size.scrollerHeight/2);var F=this.scrollTop;this.session.setScrollTop(w),E!==!1&&this.animateScrolling(F,T)},g.prototype.animateScrolling=function(b,x){var E=this.scrollTop;if(!this.$animatedScroll)return;var T=this;if(b==E)return;if(this.$scrollAnimation){var M=this.$scrollAnimation.steps;if(M.length&&(b=M[0],b==E))return}var w=T.$calcSteps(b,E);this.$scrollAnimation={from:b,to:E,steps:w},clearInterval(this.$timer),T.session.setScrollTop(w.shift()),T.session.$scrollTop=E;function F(){T.$timer=clearInterval(T.$timer),T.$scrollAnimation=null,T.$stopAnimation=!1,x&&x()}this.$timer=setInterval(function(){if(T.$stopAnimation){F();return}if(!T.session)return clearInterval(T.$timer);w.length?(T.session.setScrollTop(w.shift()),T.session.$scrollTop=E):E!=null?(T.session.$scrollTop=-1,T.session.setScrollTop(E),E=null):F()},10)},g.prototype.scrollToY=function(b){this.scrollTop!==b&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=b)},g.prototype.scrollToX=function(b){this.scrollLeft!==b&&(this.scrollLeft=b),this.$loop.schedule(this.CHANGE_H_SCROLL)},g.prototype.scrollTo=function(b,x){this.session.setScrollTop(x),this.session.setScrollLeft(b)},g.prototype.scrollBy=function(b,x){x&&this.session.setScrollTop(this.session.getScrollTop()+x),b&&this.session.setScrollLeft(this.session.getScrollLeft()+b)},g.prototype.isScrollableBy=function(b,x){if(x<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||x>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||b<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||b>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},g.prototype.pixelToScreenCoordinates=function(b,x){var E;if(this.$hasCssTransforms){E={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,x]);b=T[1]-this.gutterWidth-this.margin.left,x=T[0]}else E=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-E.left-this.$padding,w=M/this.characterWidth,F=Math.floor((x+this.scrollTop-E.top)/this.lineHeight),L=this.$blockCursor?Math.floor(w):Math.round(w);return{row:F,column:L,side:w-L>0?1:-1,offsetX:M}},g.prototype.screenToTextCoordinates=function(b,x){var E;if(this.$hasCssTransforms){E={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,x]);b=T[1]-this.gutterWidth-this.margin.left,x=T[0]}else E=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-E.left-this.$padding,w=M/this.characterWidth,F=this.$blockCursor?Math.floor(w):Math.round(w),L=Math.floor((x+this.scrollTop-E.top)/this.lineHeight);return this.session.screenToDocumentPosition(L,Math.max(F,0),M)},g.prototype.textToScreenCoordinates=function(b,x){var E=this.scroller.getBoundingClientRect(),T=this.session.documentToScreenPosition(b,x),M=this.$padding+(this.session.$bidiHandler.isBidiRow(T.row,b)?this.session.$bidiHandler.getPosLeft(T.column):Math.round(T.column*this.characterWidth)),w=T.row*this.lineHeight;return{pageX:E.left+M-this.scrollLeft,pageY:E.top+w-this.scrollTop}},g.prototype.visualizeFocus=function(){d.addCssClass(this.container,"ace_focus")},g.prototype.visualizeBlur=function(){d.removeCssClass(this.container,"ace_focus")},g.prototype.showComposition=function(b){this.$composition=b,b.cssText||(b.cssText=this.textarea.style.cssText),b.useTextareaForIME==null&&(b.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(d.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):b.markerId=this.session.addMarker(b.markerRange,"ace_composition_marker","text")},g.prototype.setCompositionText=function(b){var x=this.session.selection.cursor;this.addToken(b,"composition_placeholder",x.row,x.column),this.$moveTextAreaToCursor()},g.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),d.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var b=this.session.selection.cursor;this.removeExtraToken(b.row,b.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},g.prototype.setGhostText=function(b,x){var E=this.session.selection.cursor,T=x||{row:E.row,column:E.column};this.removeGhostText();var M=b.split(`
`);if(this.addToken(M[0],"ghost_text",T.row,T.column),this.$ghostText={text:b,position:{row:T.row,column:T.column}},M.length>1){this.$ghostTextWidget={text:M.slice(1).join(`
`),row:T.row,column:T.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var w=this.$cursorLayer.getPixelPosition(T,!0),F=this.container,L=F.getBoundingClientRect().height,R=M.length*this.lineHeight,A=R<L-w.top;if(A)return;R<L?this.scrollBy(0,(M.length-1)*this.lineHeight):this.scrollBy(0,w.top)}},g.prototype.removeGhostText=function(){if(this.$ghostText){var b=this.$ghostText.position;this.removeExtraToken(b.row,b.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},g.prototype.addToken=function(b,x,E,T){var M=this.session;M.bgTokenizer.lines[E]=null;var w={type:x,value:b},F=M.getTokens(E);if(T==null||!F.length)F.push(w);else for(var L=0,R=0;R<F.length;R++){var A=F[R];if(L+=A.value.length,T<=L){var I=A.value.length-(L-T),$=A.value.slice(0,I),H=A.value.slice(I);F.splice(R,1,{type:A.type,value:$},w,{type:A.type,value:H});break}}this.updateLines(E,E)},g.prototype.removeExtraToken=function(b,x){this.session.bgTokenizer.lines[b]=null,this.updateLines(b,b)},g.prototype.setTheme=function(b,x){var E=this;if(this.$themeId=b,E._dispatchEvent("themeChange",{theme:b}),!b||typeof b=="string"){var T=b||this.$options.theme.initialValue;o.loadModule(["theme",T],M)}else M(b);function M(w){if(E.$themeId!=b)return x&&x();if(!w||!w.cssClass)throw new Error("couldn't load module "+b+" or it didn't call define");w.$id&&(E.$themeId=w.$id),d.importCssString(w.cssText,w.cssClass,E.container),E.theme&&d.removeCssClass(E.container,E.theme.cssClass);var F="padding"in w?w.padding:"padding"in(E.theme||{})?4:E.$padding;E.$padding&&F!=E.$padding&&E.setPadding(F),E.$theme=w.cssClass,E.theme=w,d.addCssClass(E.container,w.cssClass),d.setCssClass(E.container,"ace_dark",w.isDark),E.$size&&(E.$size.width=0,E.$updateSizeAsync()),E._dispatchEvent("themeLoaded",{theme:w}),x&&x()}},g.prototype.getTheme=function(){return this.$themeId},g.prototype.setStyle=function(b,x){d.setCssClass(this.container,b,x!==!1)},g.prototype.unsetStyle=function(b){d.removeCssClass(this.container,b)},g.prototype.setCursorStyle=function(b){d.setStyle(this.scroller.style,"cursor",b)},g.prototype.setMouseCursor=function(b){d.setStyle(this.scroller.style,"cursor",b)},g.prototype.attachToShadowRoot=function(){d.importCssString(y,"ace_editor.css",this.container)},g.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},g.prototype.$updateCustomScrollbar=function(b){var x=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,b===!0?(this.scrollBarV=new c(this.container,this),this.scrollBarH=new p(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(E){x.$scrollAnimation||x.session.setScrollTop(E.data-x.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(E){x.$scrollAnimation||x.session.setScrollLeft(E.data-x.scrollMargin.left)}),this.$scrollDecorator=new C(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new h(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.addEventListener("scroll",function(E){x.$scrollAnimation||x.session.setScrollTop(E.data-x.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(E){x.$scrollAnimation||x.session.setScrollLeft(E.data-x.scrollMargin.left)}))},g.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var b=this;this.$resizeTimer=r.delayedCall(function(){b.destroyed||b.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(x){var E=x[0].contentRect.width,T=x[0].contentRect.height;Math.abs(b.$size.width-E)>1||Math.abs(b.$size.height-T)>1?b.$resizeTimer.delay():b.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},g}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,a.implement(D.prototype,m),o.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(g){!g&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):g&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(g){this.$textLayer.setShowInvisibles(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(g){typeof g=="number"&&(this.$printMarginColumn=g),this.$showPrintMargin=!!g,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(g){this.$gutter.style.display=g?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(g){this.$gutterLayer.$useSvgGutterIcons=g},initialValue:!1},showFoldedAnnotations:{set:function(g){this.$gutterLayer.$showFoldedAnnotations=g},initialValue:!1},fadeFoldWidgets:{set:function(g){d.setCssClass(this.$gutter,"ace_fade-fold-widgets",g)},initialValue:!1},showFoldWidgets:{set:function(g){this.$gutterLayer.setShowFoldWidgets(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(g){this.$textLayer.setDisplayIndentGuides(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(g){this.$textLayer.setHighlightIndentGuides(g)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(g){this.$gutterLayer.setHighlightGutterLine(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(g){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(g){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(g){typeof g=="number"&&(g=g+"px"),this.container.style.fontSize=g,this.updateFontSize()},initialValue:12},fontFamily:{set:function(g){this.container.style.fontFamily=g,this.updateFontSize()}},maxLines:{set:function(g){this.updateFull()}},minLines:{set:function(g){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(g){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(g){g=+g||0,this.$scrollPastEnd!=g&&(this.$scrollPastEnd=g,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(g){this.$gutterLayer.$fixedWidth=!!g,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(g){this.$updateCustomScrollbar(g)},initialValue:!1},theme:{set:function(g){this.setTheme(g)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),t.VirtualRenderer=D});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var a=e("../lib/oop"),d=e("../lib/net"),r=e("../lib/event_emitter").EventEmitter,o=e("../config");function l(f){var h="importScripts('"+d.qualifyURL(f)+"');";try{return new Blob([h],{type:"application/javascript"})}catch{var p=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,c=new p;return c.append(h),c.getBlob("application/javascript")}}function u(f){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(o.get("loadWorkerFromBlob")){var h=l(f),p=window.URL||window.webkitURL,c=p.createObjectURL(h);return new Worker(c)}return new Worker(f)}var i=function(f){f.postMessage||(f=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=f,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){a.implement(this,r),this.$createWorkerFromOldConfig=function(f,h,p,c,_){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),o.get("packaged")||!e.toUrl)c=c||o.moduleUrl(h,"worker");else{var v=this.$normalizePath;c=c||v(e.toUrl("ace/worker/worker.js",null,"_"));var m={};f.forEach(function(y){m[y]=v(e.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=u(c),_&&this.send("importScripts",_),this.$worker.postMessage({init:!0,tlns:m,module:h,classname:p}),this.$worker},this.onMessage=function(f){var h=f.data;switch(h.type){case"event":this._signal(h.name,{data:h.data});break;case"call":var p=this.callbacks[h.id];p&&(p(h.data),delete this.callbacks[h.id]);break;case"error":this.reportError(h.data);break;case"log":window.console&&console.log&&console.log.apply(console,h.data);break}},this.reportError=function(f){window.console&&console.error&&console.error(f)},this.$normalizePath=function(f){return d.qualifyURL(f)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(f){f.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(f,h){this.$worker.postMessage({command:f,args:h})},this.call=function(f,h,p){if(p){var c=this.callbackId++;this.callbacks[c]=p,h.push(c)}this.send(f,h)},this.emit=function(f,h){try{h.data&&h.data.err&&(h.data.err={message:h.data.err.message,stack:h.data.err.stack,code:h.data.err.code}),this.$worker&&this.$worker.postMessage({event:f,data:{data:h.data}})}catch(p){console.error(p.stack)}},this.attachToDocument=function(f){this.$doc&&this.terminate(),this.$doc=f,this.call("setValue",[f.getValue()]),f.on("change",this.changeListener,!0)},this.changeListener=function(f){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),f.action=="insert"?this.deltaQueue.push(f.start,f.lines):this.deltaQueue.push(f.start,f.end)},this.$sendDeltaQueue=function(){var f=this.deltaQueue;f&&(this.deltaQueue=null,f.length>50&&f.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:f}))}}).call(i.prototype);var s=function(f,h,p){var c=null,_=!1,v=Object.create(r),m=[],y=new i({messageBuffer:m,terminate:function(){},postMessage:function(S){m.push(S),c&&(_?setTimeout(C):C())}});y.setEmitSync=function(S){_=S};var C=function(){var S=m.shift();S.command?c[S.command].apply(c,S.args):S.event&&v._signal(S.event,S.data)};return v.postMessage=function(S){y.onMessage({data:S})},v.callback=function(S,D){this.postMessage({type:"call",id:D,data:S})},v.emit=function(S,D){this.postMessage({type:"event",name:S,data:D})},o.loadModule(["worker",h],function(S){for(c=new S[p](v);m.length;)C()}),y};t.UIWorkerClient=s,t.WorkerClient=i,t.createWorker=u});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var a=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,r=e("./lib/oop"),o=function(){function l(u,i,s,f,h,p){var c=this;this.length=i,this.session=u,this.doc=u.getDocument(),this.mainClass=h,this.othersClass=p,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=f,this.$onCursorChange=function(){setTimeout(function(){c.onCursorChange()})},this.$pos=s;var _=u.getUndoManager().$undoStack||u.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=_.length,this.setup(),u.selection.on("changeCursor",this.$onCursorChange)}return l.prototype.setup=function(){var u=this,i=this.doc,s=this.session;this.selectionBefore=s.selection.toJSON(),s.selection.inMultiSelectMode&&s.selection.toSingleRange(),this.pos=i.createAnchor(this.$pos.row,this.$pos.column);var f=this.pos;f.$insertRight=!0,f.detach(),f.markerId=s.addMarker(new a(f.row,f.column,f.row,f.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(h){var p=i.createAnchor(h.row,h.column);p.$insertRight=!0,p.detach(),u.others.push(p)}),s.setUndoSelect(!1)},l.prototype.showOtherMarkers=function(){if(!this.othersActive){var u=this.session,i=this;this.othersActive=!0,this.others.forEach(function(s){s.markerId=u.addMarker(new a(s.row,s.column,s.row,s.column+i.length),i.othersClass,null,!1)})}},l.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var u=0;u<this.others.length;u++)this.session.removeMarker(this.others[u].markerId)}},l.prototype.onUpdate=function(u){if(this.$updating)return this.updateAnchors(u);var i=u;if(i.start.row===i.end.row&&i.start.row===this.pos.row){this.$updating=!0;var s=u.action==="insert"?i.end.column-i.start.column:i.start.column-i.end.column,f=i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1,h=i.start.column-this.pos.column;if(this.updateAnchors(u),f&&(this.length+=s),f&&!this.session.$fromUndo){if(u.action==="insert")for(var p=this.others.length-1;p>=0;p--){var c=this.others[p],_={row:c.row,column:c.column+h};this.doc.insertMergedLines(_,u.lines)}else if(u.action==="remove")for(var p=this.others.length-1;p>=0;p--){var c=this.others[p],_={row:c.row,column:c.column+h};this.doc.remove(new a(_.row,_.column,_.row,_.column-s))}}this.$updating=!1,this.updateMarkers()}},l.prototype.updateAnchors=function(u){this.pos.onChange(u);for(var i=this.others.length;i--;)this.others[i].onChange(u);this.updateMarkers()},l.prototype.updateMarkers=function(){if(!this.$updating){var u=this,i=this.session,s=function(h,p){i.removeMarker(h.markerId),h.markerId=i.addMarker(new a(h.row,h.column,h.row,h.column+u.length),p,null,!1)};s(this.pos,this.mainClass);for(var f=this.others.length;f--;)s(this.others[f],this.othersClass)}},l.prototype.onCursorChange=function(u){if(!(this.$updating||!this.session)){var i=this.session.selection.getCursor();i.row===this.pos.row&&i.column>=this.pos.column&&i.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",u)):(this.hideOtherMarkers(),this._emit("cursorLeave",u))}},l.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},l.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var u=this.session.getUndoManager(),i=(u.$undoStack||u.$undostack).length-this.$undoStackDepth,s=0;s<i;s++)u.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},l}();r.implement(o.prototype,d),t.PlaceHolder=o});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var a=e("../lib/event"),d=e("../lib/useragent");function r(l,u){return l.row==u.row&&l.column==u.column}function o(l){var u=l.domEvent,i=u.altKey,s=u.shiftKey,f=u.ctrlKey,h=l.getAccelKey(),p=l.getButton();if(f&&d.isMac&&(p=u.button),l.editor.inMultiSelectMode&&p==2){l.editor.textInput.onContextMenu(l.domEvent);return}if(!f&&!i&&!h){p===0&&l.editor.inMultiSelectMode&&l.editor.exitMultiSelectMode();return}if(p===0){var c=l.editor,_=c.selection,v=c.inMultiSelectMode,m=l.getDocumentPosition(),y=_.getCursor(),C=l.inSelection()||_.isEmpty()&&r(m,y),S=l.x,D=l.y,g=function(H){S=H.clientX,D=H.clientY},b=c.session,x=c.renderer.pixelToScreenCoordinates(S,D),E=x,T;if(c.$mouseHandler.$enableJumpToDef)f&&i||h&&i?T=s?"block":"add":i&&c.$blockSelectEnabled&&(T="block");else if(h&&!i){if(T="add",!v&&s)return}else i&&c.$blockSelectEnabled&&(T="block");if(T&&d.isMac&&u.ctrlKey&&c.$mouseHandler.cancelContextMenu(),T=="add"){if(!v&&C)return;if(!v){var M=_.toOrientedRange();c.addSelectionMarker(M)}var w=_.rangeList.rangeAtPoint(m);c.inVirtualSelectionMode=!0,s&&(w=null,M=_.ranges[0]||M,c.removeSelectionMarker(M)),c.once("mouseup",function(){var H=_.toOrientedRange();w&&H.isEmpty()&&r(w.cursor,H.cursor)?_.substractPoint(H.cursor):(s?_.substractPoint(M.cursor):M&&(c.removeSelectionMarker(M),_.addRange(M)),_.addRange(H)),c.inVirtualSelectionMode=!1})}else if(T=="block"){l.stop(),c.inVirtualSelectionMode=!0;var F,L=[],R=function(){var H=c.renderer.pixelToScreenCoordinates(S,D),P=b.screenToDocumentPosition(H.row,H.column,H.offsetX);r(E,H)&&r(P,_.lead)||(E=H,c.selection.moveToPosition(P),c.renderer.scrollCursorIntoView(),c.removeSelectionMarkers(L),L=_.rectangularRangeBlock(E,x),c.$mouseHandler.$clickSelection&&L.length==1&&L[0].isEmpty()&&(L[0]=c.$mouseHandler.$clickSelection.clone()),L.forEach(c.addSelectionMarker,c),c.updateSelectionMarkers())};v&&!h?_.toSingleRange():!v&&h&&(F=_.toOrientedRange(),c.addSelectionMarker(F)),s?x=b.documentToScreenPosition(_.lead):_.moveToPosition(m),E={row:-1,column:-1};var A=function(H){R(),clearInterval($),c.removeSelectionMarkers(L),L.length||(L=[_.toOrientedRange()]),F&&(c.removeSelectionMarker(F),_.toSingleRange(F));for(var P=0;P<L.length;P++)_.addRange(L[P]);c.inVirtualSelectionMode=!1,c.$mouseHandler.$clickSelection=null},I=R;a.capture(c.container,g,A);var $=setInterval(function(){I()},20);return l.preventDefault()}}}t.onMouseDown=o});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(d){d.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(d){d.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(d){d.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(d){d.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(d){d.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(d){d.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(d){d.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(d){d.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(d){d.multiSelect.rangeCount>1?d.multiSelect.joinSelections():d.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(d){d.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(d){d.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(d){d.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(d){d.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(d){return d&&d.inMultiSelectMode}}];var a=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new a(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var a=e("./range_list").RangeList,d=e("./range").Range,r=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,l=e("./lib/event"),u=e("./lib/lang"),i=e("./commands/multi_select_commands");t.commands=i.defaultCommands.concat(i.multiSelectCommands);var s=e("./search").Search,f=new s;function h(y,C,S){return f.$options.wrap=!0,f.$options.needle=C,f.$options.backwards=S==-1,f.find(y)}var p=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,C){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),C||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}y.cursor||(y.cursor=y.end);var D=this.rangeList.add(y);return this.$onAddRange(y),D.length&&this.$onRemoveRange(D),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),C||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var C=this.rangeList.removeAll();C.length&&this.$onRemoveRange(C),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var C=this.rangeList.substractPoint(y);if(C)return this.$onRemoveRange(C),C[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var C=this.rangeList.ranges.pop();y.push(C),this.rangeCount=0}for(var S=y.length;S--;){var D=this.ranges.indexOf(y[S]);this.ranges.splice(D,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),C=C||this.ranges[0],C&&!C.isEqual(this.getRange())&&this.fromOrientedRange(C)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],C=[],S=0;S<y.length;S++){var D=y[S],g=D.start.row,b=D.end.row;if(g===b)C.push(D.clone());else{for(C.push(new d(g,D.start.column,g,this.session.getLine(g).length));++g<b;)C.push(this.getLineRange(g,!0));C.push(new d(b,0,b,D.end.column))}S==0&&!this.isBackwards()&&(C=C.reverse())}this.toSingleRange();for(var S=C.length;S--;)this.addRange(C[S])},this.joinSelections=function(){var y=this.rangeList.ranges,C=y[y.length-1],S=d.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(S,C.cursor==C.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,C=y[y.length-1],S=d.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(S,C.cursor==C.start)}else{var D=this.session.documentToScreenPosition(this.cursor),g=this.session.documentToScreenPosition(this.anchor),b=this.rectangularRangeBlock(D,g);b.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,C,S){var D=[],g=y.column<C.column;if(g)var b=y.column,x=C.column,E=y.offsetX,T=C.offsetX;else var b=C.column,x=y.column,E=C.offsetX,T=y.offsetX;var M=y.row<C.row;if(M)var w=y.row,F=C.row;else var w=C.row,F=y.row;b<0&&(b=0),w<0&&(w=0),w==F&&(S=!0);for(var L,R=w;R<=F;R++){var A=d.fromPoints(this.session.screenToDocumentPosition(R,b,E),this.session.screenToDocumentPosition(R,x,T));if(A.isEmpty()){if(L&&_(A.end,L))break;L=A.end}A.cursor=g?A.start:A.end,D.push(A)}if(M&&D.reverse(),!S){for(var I=D.length-1;D[I].isEmpty()&&I>0;)I--;if(I>0)for(var $=0;D[$].isEmpty();)$++;for(var H=I;H>=$;H--)D[H].isEmpty()&&D.splice(H,1)}return D}}.call(r.prototype);var c=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var C=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",C),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var C=this.session.$selectionMarkers.indexOf(y);C!=-1&&this.session.$selectionMarkers.splice(C,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var C=this.session.$selectionMarkers,S=y.length;S--;){var D=y[S];if(D.marker){this.session.removeMarker(D.marker);var g=C.indexOf(D);g!=-1&&C.splice(g,1)}}this.session.selectionMarkerCount=C.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(i.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(i.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var C=y.command,S=y.editor;if(S.multiSelect){if(C.multiSelectAction)C.multiSelectAction=="forEach"?D=S.forEachSelection(C,y.args):C.multiSelectAction=="forEachLine"?D=S.forEachSelection(C,y.args,!0):C.multiSelectAction=="single"?(S.exitMultiSelectMode(),D=C.exec(S,y.args||{})):D=C.multiSelectAction(S,y.args||{});else{var D=C.exec(S,y.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return D}},this.forEachSelection=function(y,C,S){if(!this.inVirtualSelectionMode){var D=S&&S.keepOrder,g=S==!0||S&&S.$byLines,b=this.session,x=this.selection,E=x.rangeList,T=(D?x:E).ranges,M;if(!T.length)return y.exec?y.exec(this,C||{}):y(this,C||{});var w=x._eventRegistry;x._eventRegistry={};var F=new r(b);this.inVirtualSelectionMode=!0;for(var L=T.length;L--;){if(g)for(;L>0&&T[L].start.row==T[L-1].end.row;)L--;F.fromOrientedRange(T[L]),F.index=L,this.selection=b.selection=F;var R=y.exec?y.exec(this,C||{}):y(this,C||{});!M&&R!==void 0&&(M=R),F.toOrientedRange(T[L])}F.detach(),this.selection=b.selection=x,this.inVirtualSelectionMode=!1,x._eventRegistry=w,x.mergeOverlappingRanges(),x.ranges[0]&&x.fromOrientedRange(x.ranges[0]);var A=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),A&&A.from==A.to&&this.renderer.animateScrolling(A.from),M}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var C=this.multiSelect.rangeList.ranges,S=[],D=0;D<C.length;D++)S.push(this.session.getTextRange(C[D]));var g=this.session.getDocument().getNewLineCharacter();y=S.join(g),y.length==(S.length-1)*g.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,C){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&C==this.multiSelect.anchor)return;var D=C==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;D.row!=C.row||this.session.$clipPositionToDocument(D.row,D.column).column!=C.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,C,S){if(C=C||{},C.needle=y||C.needle,C.needle==null){var D=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();C.needle=this.session.getTextRange(D)}this.$search.set(C);var g=this.$search.findAll(this.session);if(!g.length)return 0;var b=this.multiSelect;S||b.toSingleRange(g[0]);for(var x=g.length;x--;)b.addRange(g[x],!0);return D&&b.rangeList.rangeAtPoint(D.start)&&b.addRange(D,!0),g.length},this.selectMoreLines=function(y,C){var S=this.selection.toOrientedRange(),D=S.cursor==S.end,g=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(g.column=this.selection.$desiredColumn);var b=this.session.screenToDocumentPosition(g.row+y,g.column);if(S.isEmpty())var E=b;else var x=this.session.documentToScreenPosition(D?S.end:S.start),E=this.session.screenToDocumentPosition(x.row+y,x.column);if(D){var T=d.fromPoints(b,E);T.cursor=T.start}else{var T=d.fromPoints(E,b);T.cursor=T.end}if(T.desiredColumn=g.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(C)var M=S.cursor;this.selection.addRange(T),M&&this.selection.substractPoint(M)},this.transposeSelections=function(y){for(var C=this.session,S=C.multiSelect,D=S.ranges,g=D.length;g--;){var b=D[g];if(b.isEmpty()){var x=C.getWordRange(b.start.row,b.start.column);b.start.row=x.start.row,b.start.column=x.start.column,b.end.row=x.end.row,b.end.column=x.end.column}}S.mergeOverlappingRanges();for(var E=[],g=D.length;g--;){var b=D[g];E.unshift(C.getTextRange(b))}y<0?E.unshift(E.pop()):E.push(E.shift());for(var g=D.length;g--;){var b=D[g],T=b.clone();C.replace(b,E[g]),b.start.row=T.start.row,b.start.column=T.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(y,C,S){var D=this.session,g=D.multiSelect,b=g.toOrientedRange();if(!(b.isEmpty()&&(b=D.getWordRange(b.start.row,b.start.column),b.cursor=y==-1?b.start:b.end,this.multiSelect.addRange(b),S))){var x=D.getTextRange(b),E=h(D,x,y);E&&(E.cursor=y==-1?E.start:E.end,this.session.unfold(E),this.multiSelect.addRange(E),this.renderer.scrollCursorIntoView(null,.5)),C&&this.multiSelect.substractPoint(b.cursor)}},this.alignCursors=function(){var y=this.session,C=y.multiSelect,S=C.ranges,D=-1,g=S.filter(function(I){if(I.cursor.row==D)return!0;D=I.cursor.row});if(!S.length||g.length==S.length-1){var b=this.selection.getRange(),x=b.start.row,E=b.end.row,T=x==E;if(T){var M=this.session.getLength(),w;do w=this.session.getLine(E);while(/[=:]/.test(w)&&++E<M);do w=this.session.getLine(x);while(/[=:]/.test(w)&&--x>0);x<0&&(x=0),E>=M&&(E=M-1)}var F=this.session.removeFullLines(x,E);F=this.$reAlignText(F,T),this.session.insert({row:x,column:0},F.join(`
`)+`
`),T||(b.start.column=0,b.end.column=F[F.length-1].length),this.selection.setRange(b)}else{g.forEach(function(I){C.substractPoint(I.cursor)});var L=0,R=1/0,A=S.map(function(I){var $=I.cursor,H=y.getLine($.row),P=H.substr($.column).search(/\S/g);return P==-1&&(P=0),$.column>L&&(L=$.column),P<R&&(R=P),P});S.forEach(function(I,$){var H=I.cursor,P=L-H.column,q=A[$]-R;P>q?y.insert(H,u.stringRepeat(" ",P-q)):y.remove(new d(H.row,H.column,H.row,H.column-P+q)),I.start.column=I.end.column=L,I.start.row=I.end.row=H.row,I.cursor=I.end}),C.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,C){var S=!0,D=!0,g,b,x;return y.map(function(F){var L=F.match(/(\s*)(.*?)(\s*)([=:].*)/);return L?g==null?(g=L[1].length,b=L[2].length,x=L[3].length,L):(g+b+x!=L[1].length+L[2].length+L[3].length&&(D=!1),g!=L[1].length&&(S=!1),g>L[1].length&&(g=L[1].length),b<L[2].length&&(b=L[2].length),x>L[3].length&&(x=L[3].length),L):[F]}).map(C?T:S?D?M:T:w);function E(F){return u.stringRepeat(" ",F)}function T(F){return F[2]?E(g)+F[2]+E(b-F[2].length+x)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}function M(F){return F[2]?E(g+b-F[2].length)+F[2]+E(x)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}function w(F){return F[2]?E(g)+F[2]+E(x)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}}}).call(c.prototype);function _(y,C){return y.row==C.row&&y.column==C.column}t.onSessionChange=function(y){var C=y.session;C&&!C.multiSelect&&(C.$selectionMarkers=[],C.selection.$initRangeList(),C.multiSelect=C.selection),this.multiSelect=C&&C.multiSelect;var S=y.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),C&&(C.multiSelect.on("addRange",this.$onAddRange),C.multiSelect.on("removeRange",this.$onRemoveRange),C.multiSelect.on("multiSelect",this.$onMultiSelect),C.multiSelect.on("singleSelect",this.$onSingleSelect),C.multiSelect.lead.on("change",this.$checkMultiselectChange),C.multiSelect.anchor.on("change",this.$checkMultiselectChange)),C&&this.inMultiSelectMode!=C.selection.inMultiSelectMode&&(C.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function v(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=t.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",o),y.commands.addCommands(i.defaultCommands),m(y))}function m(y){if(!y.textInput)return;var C=y.textInput.getElement(),S=!1;l.addListener(C,"keydown",function(g){var b=g.keyCode==18&&!(g.ctrlKey||g.shiftKey||g.metaKey);y.$blockSelectEnabled&&b?S||(y.renderer.setMouseCursor("crosshair"),S=!0):S&&D()},y),l.addListener(C,"keyup",D,y),l.addListener(C,"blur",D,y);function D(g){S&&(y.renderer.setMouseCursor(""),S=!1)}}t.MultiSelect=v,e("./config").defineOptions(c.prototype,"editor",{enableMultiselect:{set:function(y){v(this),y?this.on("mousedown",o):this.off("mousedown",o)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("../../range").Range,d=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(r,o,l){var u=r.getLine(l);return this.foldingStartMarker.test(u)?"start":o=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(u)?"end":""},this.getFoldWidgetRange=function(r,o,l){return null},this.indentationBlock=function(r,o,l){var u=/\S/,i=r.getLine(o),s=i.search(u);if(s!=-1){for(var f=l||i.length,h=r.getLength(),p=o,c=o;++o<h;){var _=r.getLine(o).search(u);if(_!=-1){if(_<=s){var v=r.getTokenAt(o,0);if(!v||v.type!=="string")break}c=o}}if(c>p){var m=r.getLine(c).length;return new a(p,f,c,m)}}},this.openingBracketBlock=function(r,o,l,u,i){var s={row:l,column:u+1},f=r.$findClosingBracket(o,s,i);if(f){var h=r.foldWidgets[f.row];return h==null&&(h=r.getFoldWidget(f.row)),h=="start"&&f.row>s.row&&(f.row--,f.column=r.getLine(f.row).length),a.fromPoints(s,f)}},this.closingBracketBlock=function(r,o,l,u,i){var s={row:l,column:u},f=r.$findOpeningBracket(o,s);if(f)return f.column++,s.column--,a.fromPoints(f,s)}}).call(d.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,n){"use strict";var a=e("../line_widgets").LineWidgets,d=e("../lib/dom"),r=e("../range").Range,o=e("../config").nls;function l(i,s,f){for(var h=0,p=i.length-1;h<=p;){var c=h+p>>1,_=f(s,i[c]);if(_>0)h=c+1;else if(_<0)p=c-1;else return c}return-(h+1)}function u(i,s,f){var h=i.getAnnotations().sort(r.comparePoints);if(h.length){var p=l(h,{row:s,column:-1},r.comparePoints);p<0&&(p=-p-1),p>=h.length?p=f>0?0:h.length-1:p===0&&f<0&&(p=h.length-1);var c=h[p];if(!(!c||!f)){if(c.row===s){do c=h[p+=f];while(c&&c.row===s);if(!c)return h.slice()}var _=[];s=c.row;do _[f<0?"unshift":"push"](c),c=h[p+=f];while(c&&c.row==s);return _.length&&_}}}t.showErrorMarker=function(i,s){var f=i.session;f.widgetManager||(f.widgetManager=new a(f),f.widgetManager.attach(i));var h=i.getCursorPosition(),p=h.row,c=f.widgetManager.getWidgetsAtRow(p).filter(function(b){return b.type=="errorMarker"})[0];c?c.destroy():p-=s;var _=u(f,p,s),v;if(_){var m=_[0];h.column=(m.pos&&typeof m.column!="number"?m.pos.sc:m.column)||0,h.row=m.row,v=i.renderer.$gutterLayer.$annotations[h.row]}else{if(c)return;v={text:[o("Looks good!")],className:"ace_ok"}}i.session.unfold(h.row),i.selection.moveToPosition(h);var y={row:h.row,fixedWidth:!0,coverGutter:!0,el:d.createElement("div"),type:"errorMarker"},C=y.el.appendChild(d.createElement("div")),S=y.el.appendChild(d.createElement("div"));S.className="error_widget_arrow "+v.className;var D=i.renderer.$cursorLayer.getPixelPosition(h).left;S.style.left=D+i.renderer.gutterWidth-5+"px",y.el.className="error_widget_wrapper",C.className="error_widget "+v.className,C.innerHTML=v.text.join("<br>"),C.appendChild(d.createElement("div"));var g=function(b,x,E){if(x===0&&(E==="esc"||E==="return"))return y.destroy(),{command:"null"}};y.destroy=function(){i.$mouseHandler.isMousePressed||(i.keyBinding.removeKeyboardHandler(g),f.widgetManager.removeLineWidget(y),i.off("changeSelection",y.destroy),i.off("changeSession",y.destroy),i.off("mouseup",y.destroy),i.off("change",y.destroy))},i.keyBinding.addKeyboardHandler(g),i.on("changeSelection",y.destroy),i.on("changeSession",y.destroy),i.on("mouseup",y.destroy),i.on("change",y.destroy),i.session.widgetManager.addLineWidget(y),y.el.onmousedown=i.focus.bind(i),i.renderer.scrollCursorIntoView(null,.5,{bottom:y.el.offsetHeight})},d.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var a=e("./lib/dom"),d=e("./range").Range,r=e("./editor").Editor,o=e("./edit_session").EditSession,l=e("./undomanager").UndoManager,u=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(i,s){if(typeof i=="string"){var f=i;if(i=document.getElementById(f),!i)throw new Error("ace.edit can't find div #"+f)}if(i&&i.env&&i.env.editor instanceof r)return i.env.editor;var h="";if(i&&/input|textarea/i.test(i.tagName)){var p=i;h=p.value,i=a.createElement("pre"),p.parentNode.replaceChild(i,p)}else i&&(h=i.textContent,i.innerHTML="");var c=t.createEditSession(h),_=new r(new u(i),c,s),v={document:c,editor:_,onResize:_.resize.bind(_,null)};return p&&(v.textarea=p),_.on("destroy",function(){v.editor.container.env=null}),_.container.env=_.env=v,_},t.createEditSession=function(i,s){var f=new o(i,s);return f.setUndoManager(new l),f},t.Range=d,t.Editor=r,t.EditSession=o,t.UndoManager=l,t.VirtualRenderer=u,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var n in e)e.hasOwnProperty(n)&&(t.ace[n]=e[n]);t.ace.default=t.ace,typeof cy=="object"&&typeof oB=="object"&&cy&&(cy.exports=t.ace)})})()});var bB=Tt(CB=>{"use strict";CB.supports=function(...t){let n=t.reduce((a,d)=>Object.assign(a,d),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}});var Ha=Tt((lze,wB)=>{"use strict";wB.exports=class extends Error{constructor(t,n){super(t||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var TB=Tt(vy=>{"use strict";vy.byteLength=cne;vy.toByteArray=fne;vy.fromByteArray=hne;var yi=[],la=[],sne=typeof Uint8Array<"u"?Uint8Array:Array,P1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Qc=0,SB=P1.length;Qc<SB;++Qc)yi[Qc]=P1[Qc],la[P1.charCodeAt(Qc)]=Qc;var Qc,SB;la[45]=62;la[95]=63;function EB(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var a=n===t?0:4-n%4;return[n,a]}function cne(e){var t=EB(e),n=t[0],a=t[1];return(n+a)*3/4-a}function lne(e,t,n){return(t+n)*3/4-n}function fne(e){var t,n=EB(e),a=n[0],d=n[1],r=new sne(lne(e,a,d)),o=0,l=d>0?a-4:a,u;for(u=0;u<l;u+=4)t=la[e.charCodeAt(u)]<<18|la[e.charCodeAt(u+1)]<<12|la[e.charCodeAt(u+2)]<<6|la[e.charCodeAt(u+3)],r[o++]=t>>16&255,r[o++]=t>>8&255,r[o++]=t&255;return d===2&&(t=la[e.charCodeAt(u)]<<2|la[e.charCodeAt(u+1)]>>4,r[o++]=t&255),d===1&&(t=la[e.charCodeAt(u)]<<10|la[e.charCodeAt(u+1)]<<4|la[e.charCodeAt(u+2)]>>2,r[o++]=t>>8&255,r[o++]=t&255),r}function dne(e){return yi[e>>18&63]+yi[e>>12&63]+yi[e>>6&63]+yi[e&63]}function pne(e,t,n){for(var a,d=[],r=t;r<n;r+=3)a=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(e[r+2]&255),d.push(dne(a));return d.join("")}function hne(e){for(var t,n=e.length,a=n%3,d=[],r=16383,o=0,l=n-a;o<l;o+=r)d.push(pne(e,o,o+r>l?l:o+r));return a===1?(t=e[n-1],d.push(yi[t>>2]+yi[t<<4&63]+"==")):a===2&&(t=(e[n-2]<<8)+e[n-1],d.push(yi[t>>10]+yi[t>>4&63]+yi[t<<2&63]+"=")),d.join("")}});var MB=Tt(k1=>{k1.read=function(e,t,n,a,d){var r,o,l=d*8-a-1,u=(1<<l)-1,i=u>>1,s=-7,f=n?d-1:0,h=n?-1:1,p=e[t+f];for(f+=h,r=p&(1<<-s)-1,p>>=-s,s+=l;s>0;r=r*256+e[t+f],f+=h,s-=8);for(o=r&(1<<-s)-1,r>>=-s,s+=a;s>0;o=o*256+e[t+f],f+=h,s-=8);if(r===0)r=1-i;else{if(r===u)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,a),r=r-i}return(p?-1:1)*o*Math.pow(2,r-a)};k1.write=function(e,t,n,a,d,r){var o,l,u,i=r*8-d-1,s=(1<<i)-1,f=s>>1,h=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=a?0:r-1,c=a?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,o=s):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+f>=1?t+=h/u:t+=h*Math.pow(2,1-f),t*u>=2&&(o++,u/=2),o+f>=s?(l=0,o=s):o+f>=1?(l=(t*u-1)*Math.pow(2,d),o=o+f):(l=t*Math.pow(2,f-1)*Math.pow(2,d),o=0));d>=8;e[n+p]=l&255,p+=c,l/=256,d-=8);for(o=o<<d|l,i+=d;i>0;e[n+p]=o&255,p+=c,o/=256,i-=8);e[n+p-c]|=_*128}});var yy=Tt(Vf=>{"use strict";var N1=TB(),qf=MB(),xB=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Vf.Buffer=re;Vf.SlowBuffer=Dne;Vf.INSPECT_MAX_BYTES=50;var my=2147483647;Vf.kMaxLength=my;re.TYPED_ARRAY_SUPPORT=_ne();!re.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function _ne(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(re.prototype,"parent",{enumerable:!0,get:function(){if(re.isBuffer(this))return this.buffer}});Object.defineProperty(re.prototype,"offset",{enumerable:!0,get:function(){if(re.isBuffer(this))return this.byteOffset}});function fu(e){if(e>my)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,re.prototype),t}function re(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return q1(e)}return IB(e,t,n)}re.poolSize=8192;function IB(e,t,n){if(typeof e=="string")return mne(e,t);if(ArrayBuffer.isView(e))return gne(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Di(e,ArrayBuffer)||e&&Di(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Di(e,SharedArrayBuffer)||e&&Di(e.buffer,SharedArrayBuffer)))return W1(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let a=e.valueOf&&e.valueOf();if(a!=null&&a!==e)return re.from(a,t,n);let d=yne(e);if(d)return d;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return re.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}re.from=function(e,t,n){return IB(e,t,n)};Object.setPrototypeOf(re.prototype,Uint8Array.prototype);Object.setPrototypeOf(re,Uint8Array);function RB(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function vne(e,t,n){return RB(e),e<=0?fu(e):t!==void 0?typeof n=="string"?fu(e).fill(t,n):fu(e).fill(t):fu(e)}re.alloc=function(e,t,n){return vne(e,t,n)};function q1(e){return RB(e),fu(e<0?0:z1(e)|0)}re.allocUnsafe=function(e){return q1(e)};re.allocUnsafeSlow=function(e){return q1(e)};function mne(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!re.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=$B(e,t)|0,a=fu(n),d=a.write(e,t);return d!==n&&(a=a.slice(0,d)),a}function B1(e){let t=e.length<0?0:z1(e.length)|0,n=fu(t);for(let a=0;a<t;a+=1)n[a]=e[a]&255;return n}function gne(e){if(Di(e,Uint8Array)){let t=new Uint8Array(e);return W1(t.buffer,t.byteOffset,t.byteLength)}return B1(e)}function W1(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let a;return t===void 0&&n===void 0?a=new Uint8Array(e):n===void 0?a=new Uint8Array(e,t):a=new Uint8Array(e,t,n),Object.setPrototypeOf(a,re.prototype),a}function yne(e){if(re.isBuffer(e)){let t=z1(e.length)|0,n=fu(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||G1(e.length)?fu(0):B1(e);if(e.type==="Buffer"&&Array.isArray(e.data))return B1(e.data)}function z1(e){if(e>=my)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+my.toString(16)+" bytes");return e|0}function Dne(e){return+e!=e&&(e=0),re.alloc(+e)}re.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==re.prototype};re.compare=function(t,n){if(Di(t,Uint8Array)&&(t=re.from(t,t.offset,t.byteLength)),Di(n,Uint8Array)&&(n=re.from(n,n.offset,n.byteLength)),!re.isBuffer(t)||!re.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let a=t.length,d=n.length;for(let r=0,o=Math.min(a,d);r<o;++r)if(t[r]!==n[r]){a=t[r],d=n[r];break}return a<d?-1:d<a?1:0};re.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};re.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return re.alloc(0);let a;if(n===void 0)for(n=0,a=0;a<t.length;++a)n+=t[a].length;let d=re.allocUnsafe(n),r=0;for(a=0;a<t.length;++a){let o=t[a];if(Di(o,Uint8Array))r+o.length>d.length?(re.isBuffer(o)||(o=re.from(o)),o.copy(d,r)):Uint8Array.prototype.set.call(d,o,r);else if(re.isBuffer(o))o.copy(d,r);else throw new TypeError('"list" argument must be an Array of Buffers');r+=o.length}return d};function $B(e,t){if(re.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Di(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,a=arguments.length>2&&arguments[2]===!0;if(!a&&n===0)return 0;let d=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return U1(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return qB(e).length;default:if(d)return a?-1:U1(e).length;t=(""+t).toLowerCase(),d=!0}}re.byteLength=$B;function Cne(e,t,n){let a=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Ane(this,t,n);case"utf8":case"utf-8":return OB(this,t,n);case"ascii":return Fne(this,t,n);case"latin1":case"binary":return Lne(this,t,n);case"base64":return Mne(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ine(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}re.prototype._isBuffer=!0;function Xc(e,t,n){let a=e[t];e[t]=e[n],e[n]=a}re.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)Xc(this,n,n+1);return this};re.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)Xc(this,n,n+3),Xc(this,n+1,n+2);return this};re.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)Xc(this,n,n+7),Xc(this,n+1,n+6),Xc(this,n+2,n+5),Xc(this,n+3,n+4);return this};re.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?OB(this,0,t):Cne.apply(this,arguments)};re.prototype.toLocaleString=re.prototype.toString;re.prototype.equals=function(t){if(!re.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:re.compare(this,t)===0};re.prototype.inspect=function(){let t="",n=Vf.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};xB&&(re.prototype[xB]=re.prototype.inspect);re.prototype.compare=function(t,n,a,d,r){if(Di(t,Uint8Array)&&(t=re.from(t,t.offset,t.byteLength)),!re.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),a===void 0&&(a=t?t.length:0),d===void 0&&(d=0),r===void 0&&(r=this.length),n<0||a>t.length||d<0||r>this.length)throw new RangeError("out of range index");if(d>=r&&n>=a)return 0;if(d>=r)return-1;if(n>=a)return 1;if(n>>>=0,a>>>=0,d>>>=0,r>>>=0,this===t)return 0;let o=r-d,l=a-n,u=Math.min(o,l),i=this.slice(d,r),s=t.slice(n,a);for(let f=0;f<u;++f)if(i[f]!==s[f]){o=i[f],l=s[f];break}return o<l?-1:l<o?1:0};function HB(e,t,n,a,d){if(e.length===0)return-1;if(typeof n=="string"?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,G1(n)&&(n=d?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(d)return-1;n=e.length-1}else if(n<0)if(d)n=0;else return-1;if(typeof t=="string"&&(t=re.from(t,a)),re.isBuffer(t))return t.length===0?-1:FB(e,t,n,a,d);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):FB(e,[t],n,a,d);throw new TypeError("val must be string, number or Buffer")}function FB(e,t,n,a,d){let r=1,o=e.length,l=t.length;if(a!==void 0&&(a=String(a).toLowerCase(),a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(e.length<2||t.length<2)return-1;r=2,o/=2,l/=2,n/=2}function u(s,f){return r===1?s[f]:s.readUInt16BE(f*r)}let i;if(d){let s=-1;for(i=n;i<o;i++)if(u(e,i)===u(t,s===-1?0:i-s)){if(s===-1&&(s=i),i-s+1===l)return s*r}else s!==-1&&(i-=i-s),s=-1}else for(n+l>o&&(n=o-l),i=n;i>=0;i--){let s=!0;for(let f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){s=!1;break}if(s)return i}return-1}re.prototype.includes=function(t,n,a){return this.indexOf(t,n,a)!==-1};re.prototype.indexOf=function(t,n,a){return HB(this,t,n,a,!0)};re.prototype.lastIndexOf=function(t,n,a){return HB(this,t,n,a,!1)};function bne(e,t,n,a){n=Number(n)||0;let d=e.length-n;a?(a=Number(a),a>d&&(a=d)):a=d;let r=t.length;a>r/2&&(a=r/2);let o;for(o=0;o<a;++o){let l=parseInt(t.substr(o*2,2),16);if(G1(l))return o;e[n+o]=l}return o}function wne(e,t,n,a){return gy(U1(t,e.length-n),e,n,a)}function Sne(e,t,n,a){return gy(One(t),e,n,a)}function Ene(e,t,n,a){return gy(qB(t),e,n,a)}function Tne(e,t,n,a){return gy(Pne(t,e.length-n),e,n,a)}re.prototype.write=function(t,n,a,d){if(n===void 0)d="utf8",a=this.length,n=0;else if(a===void 0&&typeof n=="string")d=n,a=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(a)?(a=a>>>0,d===void 0&&(d="utf8")):(d=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let r=this.length-n;if((a===void 0||a>r)&&(a=r),t.length>0&&(a<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let o=!1;for(;;)switch(d){case"hex":return bne(this,t,n,a);case"utf8":case"utf-8":return wne(this,t,n,a);case"ascii":case"latin1":case"binary":return Sne(this,t,n,a);case"base64":return Ene(this,t,n,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Tne(this,t,n,a);default:if(o)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),o=!0}};re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Mne(e,t,n){return t===0&&n===e.length?N1.fromByteArray(e):N1.fromByteArray(e.slice(t,n))}function OB(e,t,n){n=Math.min(e.length,n);let a=[],d=t;for(;d<n;){let r=e[d],o=null,l=r>239?4:r>223?3:r>191?2:1;if(d+l<=n){let u,i,s,f;switch(l){case 1:r<128&&(o=r);break;case 2:u=e[d+1],(u&192)===128&&(f=(r&31)<<6|u&63,f>127&&(o=f));break;case 3:u=e[d+1],i=e[d+2],(u&192)===128&&(i&192)===128&&(f=(r&15)<<12|(u&63)<<6|i&63,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:u=e[d+1],i=e[d+2],s=e[d+3],(u&192)===128&&(i&192)===128&&(s&192)===128&&(f=(r&15)<<18|(u&63)<<12|(i&63)<<6|s&63,f>65535&&f<1114112&&(o=f))}}o===null?(o=65533,l=1):o>65535&&(o-=65536,a.push(o>>>10&1023|55296),o=56320|o&1023),a.push(o),d+=l}return xne(a)}var LB=4096;function xne(e){let t=e.length;if(t<=LB)return String.fromCharCode.apply(String,e);let n="",a=0;for(;a<t;)n+=String.fromCharCode.apply(String,e.slice(a,a+=LB));return n}function Fne(e,t,n){let a="";n=Math.min(e.length,n);for(let d=t;d<n;++d)a+=String.fromCharCode(e[d]&127);return a}function Lne(e,t,n){let a="";n=Math.min(e.length,n);for(let d=t;d<n;++d)a+=String.fromCharCode(e[d]);return a}function Ane(e,t,n){let a=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>a)&&(n=a);let d="";for(let r=t;r<n;++r)d+=kne[e[r]];return d}function Ine(e,t,n){let a=e.slice(t,n),d="";for(let r=0;r<a.length-1;r+=2)d+=String.fromCharCode(a[r]+a[r+1]*256);return d}re.prototype.slice=function(t,n){let a=this.length;t=~~t,n=n===void 0?a:~~n,t<0?(t+=a,t<0&&(t=0)):t>a&&(t=a),n<0?(n+=a,n<0&&(n=0)):n>a&&(n=a),n<t&&(n=t);let d=this.subarray(t,n);return Object.setPrototypeOf(d,re.prototype),d};function wr(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}re.prototype.readUintLE=re.prototype.readUIntLE=function(t,n,a){t=t>>>0,n=n>>>0,a||wr(t,n,this.length);let d=this[t],r=1,o=0;for(;++o<n&&(r*=256);)d+=this[t+o]*r;return d};re.prototype.readUintBE=re.prototype.readUIntBE=function(t,n,a){t=t>>>0,n=n>>>0,a||wr(t,n,this.length);let d=this[t+--n],r=1;for(;n>0&&(r*=256);)d+=this[t+--n]*r;return d};re.prototype.readUint8=re.prototype.readUInt8=function(t,n){return t=t>>>0,n||wr(t,1,this.length),this[t]};re.prototype.readUint16LE=re.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||wr(t,2,this.length),this[t]|this[t+1]<<8};re.prototype.readUint16BE=re.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||wr(t,2,this.length),this[t]<<8|this[t+1]};re.prototype.readUint32LE=re.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||wr(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};re.prototype.readUint32BE=re.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||wr(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};re.prototype.readBigUInt64LE=$s(function(t){t=t>>>0,zf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&dh(t,this.length-8);let d=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,r=this[++t]+this[++t]*2**8+this[++t]*2**16+a*2**24;return BigInt(d)+(BigInt(r)<<BigInt(32))});re.prototype.readBigUInt64BE=$s(function(t){t=t>>>0,zf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&dh(t,this.length-8);let d=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],r=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+a;return(BigInt(d)<<BigInt(32))+BigInt(r)});re.prototype.readIntLE=function(t,n,a){t=t>>>0,n=n>>>0,a||wr(t,n,this.length);let d=this[t],r=1,o=0;for(;++o<n&&(r*=256);)d+=this[t+o]*r;return r*=128,d>=r&&(d-=Math.pow(2,8*n)),d};re.prototype.readIntBE=function(t,n,a){t=t>>>0,n=n>>>0,a||wr(t,n,this.length);let d=n,r=1,o=this[t+--d];for(;d>0&&(r*=256);)o+=this[t+--d]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*n)),o};re.prototype.readInt8=function(t,n){return t=t>>>0,n||wr(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};re.prototype.readInt16LE=function(t,n){t=t>>>0,n||wr(t,2,this.length);let a=this[t]|this[t+1]<<8;return a&32768?a|4294901760:a};re.prototype.readInt16BE=function(t,n){t=t>>>0,n||wr(t,2,this.length);let a=this[t+1]|this[t]<<8;return a&32768?a|4294901760:a};re.prototype.readInt32LE=function(t,n){return t=t>>>0,n||wr(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};re.prototype.readInt32BE=function(t,n){return t=t>>>0,n||wr(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};re.prototype.readBigInt64LE=$s(function(t){t=t>>>0,zf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&dh(t,this.length-8);let d=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(a<<24);return(BigInt(d)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});re.prototype.readBigInt64BE=$s(function(t){t=t>>>0,zf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&dh(t,this.length-8);let d=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(d)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+a)});re.prototype.readFloatLE=function(t,n){return t=t>>>0,n||wr(t,4,this.length),qf.read(this,t,!0,23,4)};re.prototype.readFloatBE=function(t,n){return t=t>>>0,n||wr(t,4,this.length),qf.read(this,t,!1,23,4)};re.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||wr(t,8,this.length),qf.read(this,t,!0,52,8)};re.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||wr(t,8,this.length),qf.read(this,t,!1,52,8)};function To(e,t,n,a,d,r){if(!re.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>d||t<r)throw new RangeError('"value" argument is out of bounds');if(n+a>e.length)throw new RangeError("Index out of range")}re.prototype.writeUintLE=re.prototype.writeUIntLE=function(t,n,a,d){if(t=+t,n=n>>>0,a=a>>>0,!d){let l=Math.pow(2,8*a)-1;To(this,t,n,a,l,0)}let r=1,o=0;for(this[n]=t&255;++o<a&&(r*=256);)this[n+o]=t/r&255;return n+a};re.prototype.writeUintBE=re.prototype.writeUIntBE=function(t,n,a,d){if(t=+t,n=n>>>0,a=a>>>0,!d){let l=Math.pow(2,8*a)-1;To(this,t,n,a,l,0)}let r=a-1,o=1;for(this[n+r]=t&255;--r>=0&&(o*=256);)this[n+r]=t/o&255;return n+a};re.prototype.writeUint8=re.prototype.writeUInt8=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,1,255,0),this[n]=t&255,n+1};re.prototype.writeUint16LE=re.prototype.writeUInt16LE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};re.prototype.writeUint16BE=re.prototype.writeUInt16BE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};re.prototype.writeUint32LE=re.prototype.writeUInt32LE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};re.prototype.writeUint32BE=re.prototype.writeUInt32BE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function PB(e,t,n,a,d){UB(t,a,d,e,n,7);let r=Number(t&BigInt(4294967295));e[n++]=r,r=r>>8,e[n++]=r,r=r>>8,e[n++]=r,r=r>>8,e[n++]=r;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o=o>>8,e[n++]=o,o=o>>8,e[n++]=o,o=o>>8,e[n++]=o,n}function kB(e,t,n,a,d){UB(t,a,d,e,n,7);let r=Number(t&BigInt(4294967295));e[n+7]=r,r=r>>8,e[n+6]=r,r=r>>8,e[n+5]=r,r=r>>8,e[n+4]=r;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o=o>>8,e[n+2]=o,o=o>>8,e[n+1]=o,o=o>>8,e[n]=o,n+8}re.prototype.writeBigUInt64LE=$s(function(t,n=0){return PB(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});re.prototype.writeBigUInt64BE=$s(function(t,n=0){return kB(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});re.prototype.writeIntLE=function(t,n,a,d){if(t=+t,n=n>>>0,!d){let u=Math.pow(2,8*a-1);To(this,t,n,a,u-1,-u)}let r=0,o=1,l=0;for(this[n]=t&255;++r<a&&(o*=256);)t<0&&l===0&&this[n+r-1]!==0&&(l=1),this[n+r]=(t/o>>0)-l&255;return n+a};re.prototype.writeIntBE=function(t,n,a,d){if(t=+t,n=n>>>0,!d){let u=Math.pow(2,8*a-1);To(this,t,n,a,u-1,-u)}let r=a-1,o=1,l=0;for(this[n+r]=t&255;--r>=0&&(o*=256);)t<0&&l===0&&this[n+r+1]!==0&&(l=1),this[n+r]=(t/o>>0)-l&255;return n+a};re.prototype.writeInt8=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};re.prototype.writeInt16LE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};re.prototype.writeInt16BE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};re.prototype.writeInt32LE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};re.prototype.writeInt32BE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};re.prototype.writeBigInt64LE=$s(function(t,n=0){return PB(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});re.prototype.writeBigInt64BE=$s(function(t,n=0){return kB(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function NB(e,t,n,a,d,r){if(n+a>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function BB(e,t,n,a,d){return t=+t,n=n>>>0,d||NB(e,t,n,4,34028234663852886e22,-34028234663852886e22),qf.write(e,t,n,a,23,4),n+4}re.prototype.writeFloatLE=function(t,n,a){return BB(this,t,n,!0,a)};re.prototype.writeFloatBE=function(t,n,a){return BB(this,t,n,!1,a)};function WB(e,t,n,a,d){return t=+t,n=n>>>0,d||NB(e,t,n,8,17976931348623157e292,-17976931348623157e292),qf.write(e,t,n,a,52,8),n+8}re.prototype.writeDoubleLE=function(t,n,a){return WB(this,t,n,!0,a)};re.prototype.writeDoubleBE=function(t,n,a){return WB(this,t,n,!1,a)};re.prototype.copy=function(t,n,a,d){if(!re.isBuffer(t))throw new TypeError("argument should be a Buffer");if(a||(a=0),!d&&d!==0&&(d=this.length),n>=t.length&&(n=t.length),n||(n=0),d>0&&d<a&&(d=a),d===a||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),t.length-n<d-a&&(d=t.length-n+a);let r=d-a;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,a,d):Uint8Array.prototype.set.call(t,this.subarray(a,d),n),r};re.prototype.fill=function(t,n,a,d){if(typeof t=="string"){if(typeof n=="string"?(d=n,n=0,a=this.length):typeof a=="string"&&(d=a,a=this.length),d!==void 0&&typeof d!="string")throw new TypeError("encoding must be a string");if(typeof d=="string"&&!re.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(t.length===1){let o=t.charCodeAt(0);(d==="utf8"&&o<128||d==="latin1")&&(t=o)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<a)throw new RangeError("Out of range index");if(a<=n)return this;n=n>>>0,a=a===void 0?this.length:a>>>0,t||(t=0);let r;if(typeof t=="number")for(r=n;r<a;++r)this[r]=t;else{let o=re.isBuffer(t)?t:re.from(t,d),l=o.length;if(l===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(r=0;r<a-n;++r)this[r+n]=o[r%l]}return this};var Uf={};function V1(e,t,n){Uf[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(d){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:d,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}V1("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);V1("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);V1("ERR_OUT_OF_RANGE",function(e,t,n){let a=`The value of "${e}" is out of range.`,d=n;return Number.isInteger(n)&&Math.abs(n)>2**32?d=AB(String(n)):typeof n=="bigint"&&(d=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(d=AB(d)),d+="n"),a+=` It must be ${t}. Received ${d}`,a},RangeError);function AB(e){let t="",n=e.length,a=e[0]==="-"?1:0;for(;n>=a+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function Rne(e,t,n){zf(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&dh(t,e.length-(n+1))}function UB(e,t,n,a,d,r){if(e>n||e<t){let o=typeof t=="bigint"?"n":"",l;throw r>3?t===0||t===BigInt(0)?l=`>= 0${o} and < 2${o} ** ${(r+1)*8}${o}`:l=`>= -(2${o} ** ${(r+1)*8-1}${o}) and < 2 ** ${(r+1)*8-1}${o}`:l=`>= ${t}${o} and <= ${n}${o}`,new Uf.ERR_OUT_OF_RANGE("value",l,e)}Rne(a,d,r)}function zf(e,t){if(typeof e!="number")throw new Uf.ERR_INVALID_ARG_TYPE(t,"number",e)}function dh(e,t,n){throw Math.floor(e)!==e?(zf(e,n),new Uf.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new Uf.ERR_BUFFER_OUT_OF_BOUNDS:new Uf.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var $ne=/[^+/0-9A-Za-z-_]/g;function Hne(e){if(e=e.split("=")[0],e=e.trim().replace($ne,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function U1(e,t){t=t||1/0;let n,a=e.length,d=null,r=[];for(let o=0;o<a;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!d){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}else if(o+1===a){(t-=3)>-1&&r.push(239,191,189);continue}d=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),d=n;continue}n=(d-55296<<10|n-56320)+65536}else d&&(t-=3)>-1&&r.push(239,191,189);if(d=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return r}function One(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function Pne(e,t){let n,a,d,r=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),a=n>>8,d=n%256,r.push(d),r.push(a);return r}function qB(e){return N1.toByteArray(Hne(e))}function gy(e,t,n,a){let d;for(d=0;d<a&&!(d+n>=t.length||d>=e.length);++d)t[d+n]=e[d];return d}function Di(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function G1(e){return e!==e}var kne=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let a=n*16;for(let d=0;d<16;++d)t[a+d]=e[n]+e[d]}return t}();function $s(e){return typeof BigInt>"u"?Nne:e}function Nne(){throw new Error("BigInt not supported")}});var j1=Tt((_ze,zB)=>{"use strict";var J1=null;zB.exports=function(){return J1===null&&(J1={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),J1}});var X1=Tt(VB=>{"use strict";var K1=Ha(),Bne=new Set(["buffer","view","utf8"]),Q1=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!Bne.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new K1(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new K1(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new K1(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};VB.Encoding=Q1});var tM=Tt(Dy=>{"use strict";var{Buffer:Z1}=yy()||{},{Encoding:eM}=X1(),Wne=j1(),ph=class extends eM{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new hh({encode:this.encode,decode:t=>this.decode(Z1.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},hh=class extends eM{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new ph({encode:t=>{let n=this.encode(t);return Z1.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},Y1=class extends eM{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new ph({encode:t=>Z1.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:t,textDecoder:n}=Wne();return new hh({encode:a=>t.encode(this.encode(a)),decode:a=>this.decode(n.decode(a)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Dy.BufferFormat=ph;Dy.ViewFormat=hh;Dy.UTF8Format=Y1});var KB=Tt(Yc=>{"use strict";var{Buffer:Zr}=yy()||{Buffer:{isBuffer:()=>!1}},{textEncoder:JB,textDecoder:GB}=j1()(),{BufferFormat:_h,ViewFormat:nM,UTF8Format:jB}=tM(),Cy=e=>e;Yc.utf8=new jB({encode:function(e){return Zr.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?GB.decode(e):String(e)},decode:Cy,name:"utf8",createViewTranscoder(){return new nM({encode:function(e){return ArrayBuffer.isView(e)?e:JB.encode(e)},decode:function(e){return GB.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new _h({encode:function(e){return Zr.isBuffer(e)?e:ArrayBuffer.isView(e)?Zr.from(e.buffer,e.byteOffset,e.byteLength):Zr.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});Yc.json=new jB({encode:JSON.stringify,decode:JSON.parse,name:"json"});Yc.buffer=new _h({encode:function(e){return Zr.isBuffer(e)?e:ArrayBuffer.isView(e)?Zr.from(e.buffer,e.byteOffset,e.byteLength):Zr.from(String(e),"utf8")},decode:Cy,name:"buffer",createViewTranscoder(){return new nM({encode:function(e){return ArrayBuffer.isView(e)?e:Zr.from(String(e),"utf8")},decode:function(e){return Zr.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});Yc.view=new nM({encode:function(e){return ArrayBuffer.isView(e)?e:JB.encode(e)},decode:Cy,name:"view",createBufferTranscoder(){return new _h({encode:function(e){return Zr.isBuffer(e)?e:ArrayBuffer.isView(e)?Zr.from(e.buffer,e.byteOffset,e.byteLength):Zr.from(String(e),"utf8")},decode:Cy,name:`${this.name}+buffer`})}});Yc.hex=new _h({encode:function(e){return Zr.isBuffer(e)?e:Zr.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});Yc.base64=new _h({encode:function(e){return Zr.isBuffer(e)?e:Zr.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})});var YB=Tt(XB=>{"use strict";var QB=Ha(),wy=KB(),{Encoding:Une}=X1(),{BufferFormat:qne,ViewFormat:zne,UTF8Format:Vne}=tM(),vh=Symbol("formats"),by=Symbol("encodings"),Gne=new Set(["buffer","view","utf8"]),rM=class{constructor(t){if(Array.isArray(t)){if(!t.every(n=>Gne.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[by]=new Map,this[vh]=new Set(t);for(let n in wy)try{this.encoding(n)}catch(a){if(a.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw a}}encodings(){return Array.from(new Set(this[by].values()))}encoding(t){let n=this[by].get(t);if(n===void 0){if(typeof t=="string"&&t!==""){if(n=Qne[t],!n)throw new QB(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");n=Jne(t)}let{name:a,format:d}=n;if(!this[vh].has(d))if(this[vh].has("view"))n=n.createViewTranscoder();else if(this[vh].has("buffer"))n=n.createBufferTranscoder();else if(this[vh].has("utf8"))n=n.createUTF8Transcoder();else throw new QB(`Encoding '${a}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let r of[t,a,n.name,n.commonName])this[by].set(r,n)}return n}};XB.Transcoder=rM;function Jne(e){if(e instanceof Une)return e;let t="type"in e&&typeof e.type=="string"?e.type:void 0,n=e.name||t||`anonymous-${Xne++}`;switch(jne(e)){case"view":return new zne({...e,name:n});case"utf8":return new Vne({...e,name:n});case"buffer":return new qne({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function jne(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}var Kne={binary:wy.buffer,"utf-8":wy.utf8},Qne={...wy,...Kne},Xne=0});var c5=Tt((Dze,oM)=>{"use strict";var Gf=typeof Reflect=="object"?Reflect:null,ZB=Gf&&typeof Gf.apply=="function"?Gf.apply:function(t,n,a){return Function.prototype.apply.call(t,n,a)},Sy;Gf&&typeof Gf.ownKeys=="function"?Sy=Gf.ownKeys:Object.getOwnPropertySymbols?Sy=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Sy=function(t){return Object.getOwnPropertyNames(t)};function Yne(e){console&&console.warn&&console.warn(e)}var t5=Number.isNaN||function(t){return t!==t};function sn(){sn.init.call(this)}oM.exports=sn;oM.exports.once=nre;sn.EventEmitter=sn;sn.prototype._events=void 0;sn.prototype._eventsCount=0;sn.prototype._maxListeners=void 0;var e5=10;function Ey(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(sn,"defaultMaxListeners",{enumerable:!0,get:function(){return e5},set:function(e){if(typeof e!="number"||e<0||t5(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");e5=e}});sn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};sn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||t5(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function n5(e){return e._maxListeners===void 0?sn.defaultMaxListeners:e._maxListeners}sn.prototype.getMaxListeners=function(){return n5(this)};sn.prototype.emit=function(t){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var d=t==="error",r=this._events;if(r!==void 0)d=d&&r.error===void 0;else if(!d)return!1;if(d){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var u=r[t];if(u===void 0)return!1;if(typeof u=="function")ZB(u,this,n);else for(var i=u.length,s=u5(u,i),a=0;a<i;++a)ZB(s[a],this,n);return!0};function r5(e,t,n,a){var d,r,o;if(Ey(n),r=e._events,r===void 0?(r=e._events=Object.create(null),e._eventsCount=0):(r.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),o=r[t]),o===void 0)o=r[t]=n,++e._eventsCount;else if(typeof o=="function"?o=r[t]=a?[n,o]:[o,n]:a?o.unshift(n):o.push(n),d=n5(e),d>0&&o.length>d&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,Yne(l)}return e}sn.prototype.addListener=function(t,n){return r5(this,t,n,!1)};sn.prototype.on=sn.prototype.addListener;sn.prototype.prependListener=function(t,n){return r5(this,t,n,!0)};function Zne(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o5(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},d=Zne.bind(a);return d.listener=n,a.wrapFn=d,d}sn.prototype.once=function(t,n){return Ey(n),this.on(t,o5(this,t,n)),this};sn.prototype.prependOnceListener=function(t,n){return Ey(n),this.prependListener(t,o5(this,t,n)),this};sn.prototype.removeListener=function(t,n){var a,d,r,o,l;if(Ey(n),d=this._events,d===void 0)return this;if(a=d[t],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete d[t],d.removeListener&&this.emit("removeListener",t,a.listener||n));else if(typeof a!="function"){for(r=-1,o=a.length-1;o>=0;o--)if(a[o]===n||a[o].listener===n){l=a[o].listener,r=o;break}if(r<0)return this;r===0?a.shift():ere(a,r),a.length===1&&(d[t]=a[0]),d.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};sn.prototype.off=sn.prototype.removeListener;sn.prototype.removeAllListeners=function(t){var n,a,d;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var r=Object.keys(a),o;for(d=0;d<r.length;++d)o=r[d],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(d=n.length-1;d>=0;d--)this.removeListener(t,n[d]);return this};function a5(e,t,n){var a=e._events;if(a===void 0)return[];var d=a[t];return d===void 0?[]:typeof d=="function"?n?[d.listener||d]:[d]:n?tre(d):u5(d,d.length)}sn.prototype.listeners=function(t){return a5(this,t,!0)};sn.prototype.rawListeners=function(t){return a5(this,t,!1)};sn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):i5.call(e,t)};sn.prototype.listenerCount=i5;function i5(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}sn.prototype.eventNames=function(){return this._eventsCount>0?Sy(this._events):[]};function u5(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}function ere(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function tre(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function nre(e,t){return new Promise(function(n,a){function d(o){e.removeListener(t,r),a(o)}function r(){typeof e.removeListener=="function"&&e.removeListener("error",d),n([].slice.call(arguments))}s5(e,t,r,{once:!0}),t!=="error"&&rre(e,d,{once:!0})})}function rre(e,t,n){typeof e.on=="function"&&s5(e,"error",t,n)}function s5(e,t,n,a){if(typeof e.on=="function")a.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function d(r){a.once&&e.removeEventListener(t,d),n(r)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var f5=Tt((Cze,l5)=>{l5.exports=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)});var mh=Tt(aM=>{"use strict";var d5=f5();aM.fromCallback=function(e,t){if(e===void 0){var n=new Promise(function(a,d){e=function(r,o){r?d(r):a(o)}});e[t!==void 0?t:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};aM.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(n){d5(()=>t(null,n))}).catch(function(n){d5(()=>t(n))})}});var Ty=Tt(iM=>{"use strict";iM.getCallback=function(e,t){return typeof e=="function"?e:t};iM.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}}});var Bs=Tt(Ly=>{"use strict";var{fromCallback:uM}=mh(),Wo=Ha(),{getOptions:sM,getCallback:p5}=Ty(),Zc=Symbol("promise"),Jf=Symbol("callback"),Ci=Symbol("working"),el=Symbol("handleOne"),du=Symbol("handleMany"),cM=Symbol("autoClose"),ks=Symbol("finishWork"),bi=Symbol("returnMany"),Hs=Symbol("closing"),gh=Symbol("handleClose"),My=Symbol("closed"),yh=Symbol("closeCallbacks"),Ps=Symbol("keyEncoding"),tl=Symbol("valueEncoding"),lM=Symbol("abortOnClose"),xy=Symbol("legacy"),fM=Symbol("keys"),dM=Symbol("values"),Os=Symbol("limit"),fa=Symbol("count"),Fy=Object.freeze({}),ore=()=>{},h5=!1,Dh=class{constructor(t,n,a){if(typeof t!="object"||t===null){let d=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${d}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[My]=!1,this[yh]=[],this[Ci]=!1,this[Hs]=!1,this[cM]=!1,this[Jf]=null,this[el]=this[el].bind(this),this[du]=this[du].bind(this),this[gh]=this[gh].bind(this),this[Ps]=n[Ps],this[tl]=n[tl],this[xy]=a,this[Os]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[fa]=0,this[lM]=!!n.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[fa]}get limit(){return this[Os]}next(t){let n;if(t===void 0)n=new Promise((a,d)=>{t=(r,o,l)=>{r?d(r):this[xy]?o===void 0&&l===void 0?a():a([o,l]):a(o)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[Hs]?this.nextTick(t,new Wo("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ci]?this.nextTick(t,new Wo("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ci]=!0,this[Jf]=t,this[fa]>=this[Os]?this.nextTick(this[el],null):this._next(this[el])),n}_next(t){this.nextTick(t)}nextv(t,n,a){return a=p5(n,a),a=uM(a,Zc),n=sM(n,Fy),Number.isInteger(t)?(this[Hs]?this.nextTick(a,new Wo("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ci]?this.nextTick(a,new Wo("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[Os]<1/0&&(t=Math.min(t,this[Os]-this[fa])),this[Ci]=!0,this[Jf]=a,t<=0?this.nextTick(this[du],null,[]):this._nextv(t,n,this[du])),a[Zc]):(this.nextTick(a,new TypeError("The first argument 'size' must be an integer")),a[Zc])}_nextv(t,n,a){let d=[],r=(o,l,u)=>{if(o)return a(o);if(this[xy]?l===void 0&&u===void 0:l===void 0)return a(null,d);d.push(this[xy]?[l,u]:l),d.length===t?a(null,d):this._next(r)};this._next(r)}all(t,n){return n=p5(t,n),n=uM(n,Zc),t=sM(t,Fy),this[Hs]?this.nextTick(n,new Wo("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ci]?this.nextTick(n,new Wo("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ci]=!0,this[Jf]=n,this[cM]=!0,this[fa]>=this[Os]?this.nextTick(this[du],null,[]):this._all(t,this[du])),n[Zc]}_all(t,n){let a=this[fa],d=[],r=()=>{let l=this[Os]<1/0?Math.min(1e3,this[Os]-a):1e3;l<=0?this.nextTick(n,null,d):this._nextv(l,Fy,o)},o=(l,u)=>{l?n(l):u.length===0?n(null,d):(d.push.apply(d,u),a+=u.length,r())};r()}[ks](){let t=this[Jf];return this[lM]&&t===null?ore:(this[Ci]=!1,this[Jf]=null,this[Hs]&&this._close(this[gh]),t)}[bi](t,n,a){this[cM]?this.close(t.bind(null,n,a)):t(n,a)}seek(t,n){if(n=sM(n,Fy),!this[Hs]){if(this[Ci])throw new Wo("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let a=this.db.keyEncoding(n.keyEncoding||this[Ps]),d=a.format;n.keyEncoding!==d&&(n={...n,keyEncoding:d});let r=this.db.prefixKey(a.encode(t),d);this._seek(r,n)}}}_seek(t,n){throw new Wo("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=uM(t,Zc),this[My]?this.nextTick(t):this[Hs]?this[yh].push(t):(this[Hs]=!0,this[yh].push(t),this[Ci]?this[lM]&&this[ks]()(new Wo("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[gh])),t[Zc]}_close(t){this.nextTick(t)}[gh](){this[My]=!0,this.db.detachResource(this);let t=this[yh];this[yh]=[];for(let n of t)n()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[My]||await this.close()}}},jf=class extends Dh{constructor(t,n){super(t,n,!0),this[fM]=n.keys!==!1,this[dM]=n.values!==!1}[el](t,n,a){let d=this[ks]();if(t)return d(t);try{n=this[fM]&&n!==void 0?this[Ps].decode(n):void 0,a=this[dM]&&a!==void 0?this[tl].decode(a):void 0}catch(r){return d(new Ns("entry",r))}n===void 0&&a===void 0||this[fa]++,d(null,n,a)}[du](t,n){let a=this[ks]();if(t)return this[bi](a,t);try{for(let d of n){let r=d[0],o=d[1];d[0]=this[fM]&&r!==void 0?this[Ps].decode(r):void 0,d[1]=this[dM]&&o!==void 0?this[tl].decode(o):void 0}}catch(d){return this[bi](a,new Ns("entries",d))}this[fa]+=n.length,this[bi](a,null,n)}end(t){return!h5&&typeof console<"u"&&(h5=!0,console.warn(new Wo("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},pM=class extends Dh{constructor(t,n){super(t,n,!1)}[el](t,n){let a=this[ks]();if(t)return a(t);try{n=n!==void 0?this[Ps].decode(n):void 0}catch(d){return a(new Ns("key",d))}n!==void 0&&this[fa]++,a(null,n)}[du](t,n){let a=this[ks]();if(t)return this[bi](a,t);try{for(let d=0;d<n.length;d++){let r=n[d];n[d]=r!==void 0?this[Ps].decode(r):void 0}}catch(d){return this[bi](a,new Ns("keys",d))}this[fa]+=n.length,this[bi](a,null,n)}},hM=class extends Dh{constructor(t,n){super(t,n,!1)}[el](t,n){let a=this[ks]();if(t)return a(t);try{n=n!==void 0?this[tl].decode(n):void 0}catch(d){return a(new Ns("value",d))}n!==void 0&&this[fa]++,a(null,n)}[du](t,n){let a=this[ks]();if(t)return this[bi](a,t);try{for(let d=0;d<n.length;d++){let r=n[d];n[d]=r!==void 0?this[tl].decode(r):void 0}}catch(d){return this[bi](a,new Ns("values",d))}this[fa]+=n.length,this[bi](a,null,n)}},Ns=class extends Wo{constructor(t,n){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:n})}};for(let e of["_ended property","_nexting property","_end method"])Object.defineProperty(jf.prototype,e.split(" ")[0],{get(){throw new Wo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Wo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});jf.keyEncoding=Ps;jf.valueEncoding=tl;Ly.AbstractIterator=jf;Ly.AbstractKeyIterator=pM;Ly.AbstractValueIterator=hM});var _5=Tt(_M=>{"use strict";var{AbstractKeyIterator:are,AbstractValueIterator:ire}=Bs(),nl=Symbol("iterator"),Ch=Symbol("callback"),Kf=Symbol("handleOne"),rl=Symbol("handleMany"),bh=class extends are{constructor(t,n){super(t,n),this[nl]=t.iterator({...n,keys:!0,values:!1}),this[Kf]=this[Kf].bind(this),this[rl]=this[rl].bind(this)}},Ay=class extends ire{constructor(t,n){super(t,n),this[nl]=t.iterator({...n,keys:!1,values:!0}),this[Kf]=this[Kf].bind(this),this[rl]=this[rl].bind(this)}};for(let e of[bh,Ay]){let t=e===bh,n=t?a=>a[0]:a=>a[1];e.prototype._next=function(a){this[Ch]=a,this[nl].next(this[Kf])},e.prototype[Kf]=function(a,d,r){let o=this[Ch];a?o(a):o(null,t?d:r)},e.prototype._nextv=function(a,d,r){this[Ch]=r,this[nl].nextv(a,d,this[rl])},e.prototype._all=function(a,d){this[Ch]=d,this[nl].all(a,this[rl])},e.prototype[rl]=function(a,d){let r=this[Ch];a?r(a):r(null,d.map(n))},e.prototype._seek=function(a,d){this[nl].seek(a,d)},e.prototype._close=function(a){this[nl].close(a)}}_M.DefaultKeyIterator=bh;_M.DefaultValueIterator=Ay});var v5=Tt(Py=>{"use strict";var{AbstractIterator:ure,AbstractKeyIterator:sre,AbstractValueIterator:cre}=Bs(),vM=Ha(),Mo=Symbol("nut"),Hy=Symbol("undefer"),Oy=Symbol("factory"),Iy=class extends ure{constructor(t,n){super(t,n),this[Mo]=null,this[Oy]=()=>t.iterator(n),this.db.defer(()=>this[Hy]())}},Ry=class extends sre{constructor(t,n){super(t,n),this[Mo]=null,this[Oy]=()=>t.keys(n),this.db.defer(()=>this[Hy]())}},$y=class extends cre{constructor(t,n){super(t,n),this[Mo]=null,this[Oy]=()=>t.values(n),this.db.defer(()=>this[Hy]())}};for(let e of[Iy,Ry,$y])e.prototype[Hy]=function(){this.db.status==="open"&&(this[Mo]=this[Oy]())},e.prototype._next=function(t){this[Mo]!==null?this[Mo].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new vM("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,n,a){this[Mo]!==null?this[Mo].nextv(t,n,a):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,n,a)):this.nextTick(a,new vM("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,n){this[Mo]!==null?this[Mo].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(t,n)):this.nextTick(n,new vM("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,n){this[Mo]!==null?this[Mo]._seek(t,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,n))},e.prototype._close=function(t){this[Mo]!==null?this[Mo].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};Py.DeferredIterator=Iy;Py.DeferredKeyIterator=Ry;Py.DeferredValueIterator=$y});var gM=Tt(g5=>{"use strict";var{fromCallback:m5}=mh(),ky=Ha(),{getCallback:lre,getOptions:fre}=Ty(),Ny=Symbol("promise"),da=Symbol("status"),Qf=Symbol("operations"),wh=Symbol("finishClose"),Xf=Symbol("closeCallbacks"),mM=class{constructor(t){if(typeof t!="object"||t===null){let n=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[Qf]=[],this[Xf]=[],this[da]="open",this[wh]=this[wh].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[Qf].length}put(t,n,a){if(this[da]!=="open")throw new ky("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let d=this.db._checkKey(t)||this.db._checkValue(n);if(d)throw d;let r=a&&a.sublevel!=null?a.sublevel:this.db,o=a,l=r.keyEncoding(a&&a.keyEncoding),u=r.valueEncoding(a&&a.valueEncoding),i=l.format;a={...a,keyEncoding:i,valueEncoding:u.format},r!==this.db&&(a.sublevel=null);let s=r.prefixKey(l.encode(t),i),f=u.encode(n);return this._put(s,f,a),this[Qf].push({...o,type:"put",key:t,value:n}),this}_put(t,n,a){}del(t,n){if(this[da]!=="open")throw new ky("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let a=this.db._checkKey(t);if(a)throw a;let d=n&&n.sublevel!=null?n.sublevel:this.db,r=n,o=d.keyEncoding(n&&n.keyEncoding),l=o.format;return n={...n,keyEncoding:l},d!==this.db&&(n.sublevel=null),this._del(d.prefixKey(o.encode(t),l),n),this[Qf].push({...r,type:"del",key:t}),this}_del(t,n){}clear(){if(this[da]!=="open")throw new ky("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Qf]=[],this}_clear(){}write(t,n){return n=lre(t,n),n=m5(n,Ny),t=fre(t),this[da]!=="open"?this.nextTick(n,new ky("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[da]="writing",this._write(t,a=>{this[da]="closing",this[Xf].push(()=>n(a)),a||this.db.emit("batch",this[Qf]),this._close(this[wh])})),n[Ny]}_write(t,n){}close(t){return t=m5(t,Ny),this[da]==="closing"?this[Xf].push(t):this[da]==="closed"?this.nextTick(t):(this[Xf].push(t),this[da]!=="writing"&&(this[da]="closing",this._close(this[wh]))),t[Ny]}_close(t){this.nextTick(t)}[wh](){this[da]="closed",this.db.detachResource(this);let t=this[Xf];this[Xf]=[];for(let n of t)n()}};g5.AbstractChainedBatch=mM});var D5=Tt(y5=>{"use strict";var{AbstractChainedBatch:dre}=gM(),pre=Ha(),Yf=Symbol("encoded"),yM=class extends dre{constructor(t){super(t),this[Yf]=[]}_put(t,n,a){this[Yf].push({...a,type:"put",key:t,value:n})}_del(t,n){this[Yf].push({...n,type:"del",key:t})}_clear(){this[Yf]=[]}_write(t,n){this.db.status==="opening"?this.db.defer(()=>this._write(t,n)):this.db.status==="open"?this[Yf].length===0?this.nextTick(n):this.db._batch(this[Yf],t,n):this.nextTick(n,new pre("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};y5.DefaultChainedBatch=yM});var w5=Tt((Fze,b5)=>{"use strict";var C5=Ha(),hre=Object.prototype.hasOwnProperty,_re=new Set(["lt","lte","gt","gte"]);b5.exports=function(e,t){let n={};for(let a in e)if(hre.call(e,a)&&!(a==="keyEncoding"||a==="valueEncoding")){if(a==="start"||a==="end")throw new C5(`The legacy range option '${a}' has been removed`,{code:"LEVEL_LEGACY"});if(a==="encoding")throw new C5("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});_re.has(a)?n[a]=t.encode(e[a]):n[a]=e[a]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}});var DM=Tt((Lze,E5)=>{var S5;E5.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(S5||(S5=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var x5=Tt((Aze,M5)=>{"use strict";var T5=DM();M5.exports=function(e,...t){t.length===0?T5(e):T5(()=>e(...t))}});var F5=Tt(By=>{"use strict";var{AbstractIterator:vre,AbstractKeyIterator:mre,AbstractValueIterator:gre}=Bs(),Zf=Symbol("unfix"),Oa=Symbol("iterator"),ol=Symbol("handleOne"),Ws=Symbol("handleMany"),pu=Symbol("callback"),Sh=class extends vre{constructor(t,n,a,d){super(t,n),this[Oa]=a,this[Zf]=d,this[ol]=this[ol].bind(this),this[Ws]=this[Ws].bind(this),this[pu]=null}[ol](t,n,a){let d=this[pu];if(t)return d(t);n!==void 0&&(n=this[Zf](n)),d(t,n,a)}[Ws](t,n){let a=this[pu];if(t)return a(t);for(let d of n){let r=d[0];r!==void 0&&(d[0]=this[Zf](r))}a(t,n)}},Eh=class extends mre{constructor(t,n,a,d){super(t,n),this[Oa]=a,this[Zf]=d,this[ol]=this[ol].bind(this),this[Ws]=this[Ws].bind(this),this[pu]=null}[ol](t,n){let a=this[pu];if(t)return a(t);n!==void 0&&(n=this[Zf](n)),a(t,n)}[Ws](t,n){let a=this[pu];if(t)return a(t);for(let d=0;d<n.length;d++){let r=n[d];r!==void 0&&(n[d]=this[Zf](r))}a(t,n)}},Th=class extends gre{constructor(t,n,a){super(t,n),this[Oa]=a}};for(let e of[Sh,Eh])e.prototype._next=function(t){this[pu]=t,this[Oa].next(this[ol])},e.prototype._nextv=function(t,n,a){this[pu]=a,this[Oa].nextv(t,n,this[Ws])},e.prototype._all=function(t,n){this[pu]=n,this[Oa].all(t,this[Ws])};for(let e of[Th])e.prototype._next=function(t){this[Oa].next(t)},e.prototype._nextv=function(t,n,a){this[Oa].nextv(t,n,a)},e.prototype._all=function(t,n){this[Oa].all(t,n)};for(let e of[Sh,Eh,Th])e.prototype._seek=function(t,n){this[Oa].seek(t,n)},e.prototype._close=function(t){this[Oa].close(t)};By.AbstractSublevelIterator=Sh;By.AbstractSublevelKeyIterator=Eh;By.AbstractSublevelValueIterator=Th});var R5=Tt((Rze,I5)=>{"use strict";var CM=Ha(),{Buffer:SM}=yy()||{},{AbstractSublevelIterator:yre,AbstractSublevelKeyIterator:Dre,AbstractSublevelValueIterator:Cre}=F5(),hu=Symbol("prefix"),L5=Symbol("upperBound"),Mh=Symbol("prefixRange"),Uo=Symbol("parent"),bM=Symbol("unfix"),A5=new TextEncoder,bre={separator:"!"};I5.exports=function({AbstractLevel:e}){class t extends e{static defaults(a){if(typeof a=="string")throw new CM("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(a&&a.open)throw new CM("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return a==null?bre:a.separator?a:{...a,separator:"!"}}constructor(a,d,r){let{separator:o,manifest:l,...u}=t.defaults(r);d=Sre(d,o);let i=o.charCodeAt(0)+1,s=a[Uo]||a;if(!A5.encode(d).every(p=>p>i&&p<127))throw new CM(`Prefix must use bytes > ${i} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(wre(s,l),u);let f=(a.prefix||"")+o+d+o,h=f.slice(0,-1)+String.fromCharCode(i);this[Uo]=s,this[hu]=new Wy(f),this[L5]=new Wy(h),this[bM]=new EM,this.nextTick=s.nextTick}prefixKey(a,d){if(d==="utf8")return this[hu].utf8+a;if(a.byteLength===0)return this[hu][d];if(d==="view"){let r=this[hu].view,o=new Uint8Array(r.byteLength+a.byteLength);return o.set(r,0),o.set(a,r.byteLength),o}else{let r=this[hu].buffer;return SM.concat([r,a],r.byteLength+a.byteLength)}}[Mh](a,d){a.gte!==void 0?a.gte=this.prefixKey(a.gte,d):a.gt!==void 0?a.gt=this.prefixKey(a.gt,d):a.gte=this[hu][d],a.lte!==void 0?a.lte=this.prefixKey(a.lte,d):a.lt!==void 0?a.lt=this.prefixKey(a.lt,d):a.lte=this[L5][d]}get prefix(){return this[hu].utf8}get db(){return this[Uo]}_open(a,d){this[Uo].open({passive:!0},d)}_put(a,d,r,o){this[Uo].put(a,d,r,o)}_get(a,d,r){this[Uo].get(a,d,r)}_getMany(a,d,r){this[Uo].getMany(a,d,r)}_del(a,d,r){this[Uo].del(a,d,r)}_batch(a,d,r){this[Uo].batch(a,d,r)}_clear(a,d){this[Mh](a,a.keyEncoding),this[Uo].clear(a,d)}_iterator(a){this[Mh](a,a.keyEncoding);let d=this[Uo].iterator(a),r=this[bM].get(this[hu].utf8.length,a.keyEncoding);return new yre(this,a,d,r)}_keys(a){this[Mh](a,a.keyEncoding);let d=this[Uo].keys(a),r=this[bM].get(this[hu].utf8.length,a.keyEncoding);return new Dre(this,a,d,r)}_values(a){this[Mh](a,a.keyEncoding);let d=this[Uo].values(a);return new Cre(this,a,d)}}return{AbstractSublevel:t}};var wre=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:wM(e,"utf8"),buffer:wM(e,"buffer"),view:wM(e,"view")}}},wM=function(e,t){return e.supports.encodings[t]?e.keyEncoding(t).name===t:!1},Wy=class{constructor(t){this.utf8=t,this.view=A5.encode(t),this.buffer=SM?SM.from(this.view.buffer,0,this.view.byteLength):{}}},EM=class{constructor(){this.cache=new Map}get(t,n){let a=this.cache.get(n);return a===void 0&&(n==="view"?a=function(d,r){return r.subarray(d)}.bind(null,t):a=function(d,r){return r.slice(d)}.bind(null,t),this.cache.set(n,a)),a}},Sre=function(e,t){let n=0,a=e.length;for(;n<a&&e[n]===t;)n++;for(;a>n&&e[a-1]===t;)a--;return e.slice(n,a)}});var LM=Tt(FM=>{"use strict";var{supports:Ere}=bB(),{Transcoder:Tre}=YB(),{EventEmitter:Mre}=c5(),{fromCallback:Us}=mh(),Pa=Ha(),{AbstractIterator:al}=Bs(),{DefaultKeyIterator:xre,DefaultValueIterator:Fre}=_5(),{DeferredIterator:Lre,DeferredKeyIterator:Are,DeferredValueIterator:Ire}=v5(),{DefaultChainedBatch:$5}=D5(),{getCallback:il,getOptions:qs}=Ty(),Uy=w5(),Et=Symbol("promise"),_u=Symbol("landed"),ul=Symbol("resources"),TM=Symbol("closeResources"),xh=Symbol("operations"),Fh=Symbol("undefer"),qy=Symbol("deferOpen"),H5=Symbol("options"),Lt=Symbol("status"),sl=Symbol("defaultOptions"),ed=Symbol("transcoder"),zy=Symbol("keyEncoding"),MM=Symbol("valueEncoding"),Rre=()=>{},Lh=class extends Mre{constructor(t,n){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");n=qs(n);let{keyEncoding:a,valueEncoding:d,passive:r,...o}=n;this[ul]=new Set,this[xh]=[],this[qy]=!0,this[H5]=o,this[Lt]="opening",this.supports=Ere(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[ed]=new Tre($re(this)),this[zy]=this[ed].encoding(a||"utf8"),this[MM]=this[ed].encoding(d||"utf8");for(let l of this[ed].encodings())this.supports.encodings[l.commonName]||(this.supports.encodings[l.commonName]=!0);this[sl]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[zy].commonName,valueEncoding:this[MM].commonName}),key:Object.freeze({keyEncoding:this[zy].commonName})},this.nextTick(()=>{this[qy]&&this.open({passive:!1},Rre)})}get status(){return this[Lt]}keyEncoding(t){return this[ed].encoding(t??this[zy])}valueEncoding(t){return this[ed].encoding(t??this[MM])}open(t,n){n=il(t,n),n=Us(n,Et),t={...this[H5],...qs(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;let a=d=>{this[Lt]==="closing"||this[Lt]==="opening"?this.once(_u,d?()=>a(d):a):this[Lt]!=="open"?n(new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:d})):n()};return t.passive?this[Lt]==="opening"?this.once(_u,a):this.nextTick(a):this[Lt]==="closed"||this[qy]?(this[qy]=!1,this[Lt]="opening",this.emit("opening"),this._open(t,d=>{if(d){this[Lt]="closed",this[TM](()=>{this.emit(_u),a(d)}),this[Fh]();return}this[Lt]="open",this[Fh](),this.emit(_u),this[Lt]==="open"&&this.emit("open"),this[Lt]==="open"&&this.emit("ready"),a()})):this[Lt]==="open"?this.nextTick(a):this.once(_u,()=>this.open(t,n)),n[Et]}_open(t,n){this.nextTick(n)}close(t){t=Us(t,Et);let n=a=>{this[Lt]==="opening"||this[Lt]==="closing"?this.once(_u,a?n(a):n):this[Lt]!=="closed"?t(new Pa("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:a})):t()};if(this[Lt]==="open"){this[Lt]="closing",this.emit("closing");let a=d=>{this[Lt]="open",this[Fh](),this.emit(_u),n(d)};this[TM](()=>{this._close(d=>{if(d)return a(d);this[Lt]="closed",this[Fh](),this.emit(_u),this[Lt]==="closed"&&this.emit("closed"),n()})})}else this[Lt]==="closed"?this.nextTick(n):this.once(_u,()=>this.close(t));return t[Et]}[TM](t){if(this[ul].size===0)return this.nextTick(t);let n=this[ul].size,a=!0,d=()=>{--n===0&&(a?this.nextTick(t):t())};for(let r of this[ul])r.close(d);a=!1,this[ul].clear()}_close(t){this.nextTick(t)}get(t,n,a){if(a=il(n,a),a=Us(a,Et),n=qs(n,this[sl].entry),this[Lt]==="opening")return this.defer(()=>this.get(t,n,a)),a[Et];if(td(this,a))return a[Et];let d=this._checkKey(t);if(d)return this.nextTick(a,d),a[Et];let r=this.keyEncoding(n.keyEncoding),o=this.valueEncoding(n.valueEncoding),l=r.format,u=o.format;return(n.keyEncoding!==l||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:l,valueEncoding:u})),this._get(this.prefixKey(r.encode(t),l),n,(i,s)=>{if(i)return(i.code==="LEVEL_NOT_FOUND"||i.notFound||/NotFound/i.test(i))&&(i.code||(i.code="LEVEL_NOT_FOUND"),i.notFound||(i.notFound=!0),i.status||(i.status=404)),a(i);try{s=o.decode(s)}catch(f){return a(new Pa("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:f}))}a(null,s)}),a[Et]}_get(t,n,a){this.nextTick(a,new Error("NotFound"))}getMany(t,n,a){if(a=il(n,a),a=Us(a,Et),n=qs(n,this[sl].entry),this[Lt]==="opening")return this.defer(()=>this.getMany(t,n,a)),a[Et];if(td(this,a))return a[Et];if(!Array.isArray(t))return this.nextTick(a,new TypeError("The first argument 'keys' must be an array")),a[Et];if(t.length===0)return this.nextTick(a,null,[]),a[Et];let d=this.keyEncoding(n.keyEncoding),r=this.valueEncoding(n.valueEncoding),o=d.format,l=r.format;(n.keyEncoding!==o||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:o,valueEncoding:l}));let u=new Array(t.length);for(let i=0;i<t.length;i++){let s=t[i],f=this._checkKey(s);if(f)return this.nextTick(a,f),a[Et];u[i]=this.prefixKey(d.encode(s),o)}return this._getMany(u,n,(i,s)=>{if(i)return a(i);try{for(let f=0;f<s.length;f++)s[f]!==void 0&&(s[f]=r.decode(s[f]))}catch(f){return a(new Pa(`Could not decode one or more of ${s.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:f}))}a(null,s)}),a[Et]}_getMany(t,n,a){this.nextTick(a,null,new Array(t.length).fill(void 0))}put(t,n,a,d){if(d=il(a,d),d=Us(d,Et),a=qs(a,this[sl].entry),this[Lt]==="opening")return this.defer(()=>this.put(t,n,a,d)),d[Et];if(td(this,d))return d[Et];let r=this._checkKey(t)||this._checkValue(n);if(r)return this.nextTick(d,r),d[Et];let o=this.keyEncoding(a.keyEncoding),l=this.valueEncoding(a.valueEncoding),u=o.format,i=l.format;(a.keyEncoding!==u||a.valueEncoding!==i)&&(a=Object.assign({},a,{keyEncoding:u,valueEncoding:i}));let s=this.prefixKey(o.encode(t),u),f=l.encode(n);return this._put(s,f,a,h=>{if(h)return d(h);this.emit("put",t,n),d()}),d[Et]}_put(t,n,a,d){this.nextTick(d)}del(t,n,a){if(a=il(n,a),a=Us(a,Et),n=qs(n,this[sl].key),this[Lt]==="opening")return this.defer(()=>this.del(t,n,a)),a[Et];if(td(this,a))return a[Et];let d=this._checkKey(t);if(d)return this.nextTick(a,d),a[Et];let r=this.keyEncoding(n.keyEncoding),o=r.format;return n.keyEncoding!==o&&(n=Object.assign({},n,{keyEncoding:o})),this._del(this.prefixKey(r.encode(t),o),n,l=>{if(l)return a(l);this.emit("del",t),a()}),a[Et]}_del(t,n,a){this.nextTick(a)}batch(t,n,a){if(!arguments.length){if(this[Lt]==="opening")return new $5(this);if(this[Lt]!=="open")throw new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?a=t:a=il(n,a),a=Us(a,Et),n=qs(n,this[sl].empty),this[Lt]==="opening")return this.defer(()=>this.batch(t,n,a)),a[Et];if(td(this,a))return a[Et];if(!Array.isArray(t))return this.nextTick(a,new TypeError("The first argument 'operations' must be an array")),a[Et];if(t.length===0)return this.nextTick(a),a[Et];let d=new Array(t.length),{keyEncoding:r,valueEncoding:o,...l}=n;for(let u=0;u<t.length;u++){if(typeof t[u]!="object"||t[u]===null)return this.nextTick(a,new TypeError("A batch operation must be an object")),a[Et];let i=Object.assign({},t[u]);if(i.type!=="put"&&i.type!=="del")return this.nextTick(a,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),a[Et];let s=this._checkKey(i.key);if(s)return this.nextTick(a,s),a[Et];let f=i.sublevel!=null?i.sublevel:this,h=f.keyEncoding(i.keyEncoding||r),p=h.format;if(i.key=f.prefixKey(h.encode(i.key),p),i.keyEncoding=p,i.type==="put"){let c=this._checkValue(i.value);if(c)return this.nextTick(a,c),a[Et];let _=f.valueEncoding(i.valueEncoding||o);i.value=_.encode(i.value),i.valueEncoding=_.format}f!==this&&(i.sublevel=null),d[u]=i}return this._batch(d,l,u=>{if(u)return a(u);this.emit("batch",t),a()}),a[Et]}_batch(t,n,a){this.nextTick(a)}sublevel(t,n){return this._sublevel(t,xM.defaults(n))}_sublevel(t,n){return new xM(this,t,n)}prefixKey(t,n){return t}clear(t,n){if(n=il(t,n),n=Us(n,Et),t=qs(t,this[sl].empty),this[Lt]==="opening")return this.defer(()=>this.clear(t,n)),n[Et];if(td(this,n))return n[Et];let a=t,d=this.keyEncoding(t.keyEncoding);return t=Uy(t,d),t.keyEncoding=d.format,t.limit===0?this.nextTick(n):this._clear(t,r=>{if(r)return n(r);this.emit("clear",a),n()}),n[Et]}_clear(t,n){this.nextTick(n)}iterator(t){let n=this.keyEncoding(t&&t.keyEncoding),a=this.valueEncoding(t&&t.valueEncoding);if(t=Uy(t,n),t.keys=t.keys!==!1,t.values=t.values!==!1,t[al.keyEncoding]=n,t[al.valueEncoding]=a,t.keyEncoding=n.format,t.valueEncoding=a.format,this[Lt]==="opening")return new Lre(this,t);if(this[Lt]!=="open")throw new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new al(this,t)}keys(t){let n=this.keyEncoding(t&&t.keyEncoding),a=this.valueEncoding(t&&t.valueEncoding);if(t=Uy(t,n),t[al.keyEncoding]=n,t[al.valueEncoding]=a,t.keyEncoding=n.format,t.valueEncoding=a.format,this[Lt]==="opening")return new Are(this,t);if(this[Lt]!=="open")throw new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new xre(this,t)}values(t){let n=this.keyEncoding(t&&t.keyEncoding),a=this.valueEncoding(t&&t.valueEncoding);if(t=Uy(t,n),t[al.keyEncoding]=n,t[al.valueEncoding]=a,t.keyEncoding=n.format,t.valueEncoding=a.format,this[Lt]==="opening")return new Ire(this,t);if(this[Lt]!=="open")throw new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new Fre(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[xh].push(t)}[Fh](){if(this[xh].length===0)return;let t=this[xh];this[xh]=[];for(let n of t)n()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[ul].add(t)}detachResource(t){this[ul].delete(t)}_chainedBatch(){return new $5(this)}_checkKey(t){if(t==null)return new Pa("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new Pa("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Lh.prototype.nextTick=x5();var{AbstractSublevel:xM}=R5()({AbstractLevel:Lh});FM.AbstractLevel=Lh;FM.AbstractSublevel=xM;var td=function(e,t){return e[Lt]!=="open"?(e.nextTick(t,new Pa("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},$re=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])}});var AM=Tt(cl=>{"use strict";cl.AbstractLevel=LM().AbstractLevel;cl.AbstractSublevel=LM().AbstractSublevel;cl.AbstractIterator=Bs().AbstractIterator;cl.AbstractKeyIterator=Bs().AbstractKeyIterator;cl.AbstractValueIterator=Bs().AbstractValueIterator;cl.AbstractChainedBatch=gM().AbstractChainedBatch});var P5=Tt((Oze,O5)=>{O5.exports=Ore;var Hre=DM();function Ore(e,t,n){if(typeof t!="number")throw new Error("second argument must be a Number");let a,d,r,o,l,u=!0,i;Array.isArray(e)?(a=[],r=d=e.length):(o=Object.keys(e),a={},r=d=o.length);function s(h){function p(){n&&n(h,a),n=null}u?Hre(p):p()}function f(h,p,c){if(a[h]=c,p&&(l=!0),--r===0||p)s(p);else if(!l&&i<d){let _;o?(_=o[i],i+=1,e[_](function(v,m){f(_,v,m)})):(_=i,i+=1,e[_](function(v,m){f(_,v,m)}))}}i=t,r?o?o.some(function(h,p){return e[h](function(c,_){f(h,c,_)}),p===t-1}):e.some(function(h,p){return h(function(c,_){f(p,c,_)}),p===t-1}):s(null),u=!1}});var IM=Tt((Pze,k5)=>{"use strict";k5.exports=function(t){let n=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,a=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,d=t.gte===void 0,r=t.lte===void 0;return n!==void 0&&a!==void 0?IDBKeyRange.bound(n,a,d,r):n!==void 0?IDBKeyRange.lowerBound(n,d):a!==void 0?IDBKeyRange.upperBound(a,r):null}});var RM=Tt((kze,N5)=>{"use strict";var Pre=new TextEncoder;N5.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):Pre.encode(e)}});var z5=Tt(q5=>{"use strict";var{AbstractIterator:kre}=AM(),B5=IM(),Vy=RM(),wi=Symbol("cache"),vu=Symbol("finished"),qo=Symbol("options"),mu=Symbol("currentOptions"),ll=Symbol("position"),$M=Symbol("location"),nd=Symbol("first"),W5={},HM=class extends kre{constructor(t,n,a){super(t,a),this[wi]=[],this[vu]=this.limit===0,this[qo]=a,this[mu]={...a},this[ll]=void 0,this[$M]=n,this[nd]=!0}_nextv(t,n,a){if(this[nd]=!1,this[vu])return this.nextTick(a,null,[]);if(this[wi].length>0)return t=Math.min(t,this[wi].length),this.nextTick(a,null,this[wi].splice(0,t));this[ll]!==void 0&&(this[qo].reverse?(this[mu].lt=this[ll],this[mu].lte=void 0):(this[mu].gt=this[ll],this[mu].gte=void 0));let d;try{d=B5(this[mu])}catch{return this[vu]=!0,this.nextTick(a,null,[])}let r=this.db.db.transaction([this[$M]],"readonly"),o=r.objectStore(this[$M]),l=[];if(this[qo].reverse){let u=!this[qo].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[u](d,"prev").onsuccess=i=>{let s=i.target.result;if(s){let{key:f,value:h}=s;this[ll]=f,l.push([this[qo].keys&&f!==void 0?Vy(f):void 0,this[qo].values&&h!==void 0?Vy(h):void 0]),l.length<t?s.continue():U5(r)}else this[vu]=!0}}else{let u,i,s=()=>{if(u===void 0||i===void 0)return;let f=Math.max(u.length,i.length);f===0||t===1/0?this[vu]=!0:this[ll]=u[f-1],l.length=f;for(let h=0;h<f;h++){let p=u[h],c=i[h];l[h]=[this[qo].keys&&p!==void 0?Vy(p):void 0,this[qo].values&&c!==void 0?Vy(c):void 0]}U5(r)};this[qo].keys||t<1/0?o.getAllKeys(d,t<1/0?t:void 0).onsuccess=f=>{u=f.target.result,s()}:(u=[],this.nextTick(s)),this[qo].values?o.getAll(d,t<1/0?t:void 0).onsuccess=f=>{i=f.target.result,s()}:(i=[],this.nextTick(s))}r.onabort=()=>{a(r.error||new Error("aborted by user")),a=null},r.oncomplete=()=>{a(null,l),a=null}}_next(t){if(this[wi].length>0){let[n,a]=this[wi].shift();this.nextTick(t,null,n,a)}else if(this[vu])this.nextTick(t);else{let n=Math.min(100,this.limit-this.count);this[nd]&&(this[nd]=!1,n=1),this._nextv(n,W5,(a,d)=>{if(a)return t(a);this[wi]=d,this._next(t)})}}_all(t,n){this[nd]=!1;let a=this[wi].splice(0,this[wi].length),d=this.limit-this.count-a.length;if(d<=0)return this.nextTick(n,null,a);this._nextv(d,W5,(r,o)=>{if(r)return n(r);a.length>0&&(o=a.concat(o)),n(null,o)})}_seek(t,n){this[nd]=!0,this[wi]=[],this[vu]=!1,this[ll]=void 0,this[mu]={...this[qo]};let a;try{a=B5(this[qo])}catch{this[vu]=!0;return}a!==null&&!a.includes(t)?this[vu]=!0:this[qo].reverse?this[mu].lte=t:this[mu].gte=t}};q5.Iterator=HM;function U5(e){typeof e.commit=="function"&&e.commit()}});var G5=Tt((Bze,V5)=>{"use strict";V5.exports=function(t,n,a,d,r){if(d.limit===0)return t.nextTick(r);let o=t.db.transaction([n],"readwrite"),l=o.objectStore(n),u=0;o.oncomplete=function(){r()},o.onabort=function(){r(o.error||new Error("aborted by user"))};let i=l.openKeyCursor?"openKeyCursor":"openCursor",s=d.reverse?"prev":"next";l[i](a,s).onsuccess=function(f){let h=f.target.result;h&&(l.delete(h.key).onsuccess=function(){(d.limit<=0||++u<d.limit)&&h.continue()})}}});var Y5=Tt(X5=>{"use strict";var{AbstractLevel:Nre}=AM(),J5=Ha(),Bre=P5(),{fromCallback:Wre}=mh(),{Iterator:Ure}=z5(),j5=RM(),qre=G5(),zre=IM(),Q5="level-js-",Ah=Symbol("idb"),OM=Symbol("namePrefix"),gu=Symbol("location"),PM=Symbol("version"),fl=Symbol("store"),Ih=Symbol("onComplete"),K5=Symbol("promise"),Gy=class extends Nre{constructor(t,n,a){if(typeof n=="function"||typeof a=="function")throw new J5("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:d,version:r,...o}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof t!="string")throw new Error("constructor requires a location string argument");this[gu]=t,this[OM]=d??Q5,this[PM]=parseInt(r||1,10),this[Ah]=null}get location(){return this[gu]}get namePrefix(){return this[OM]}get version(){return this[PM]}get db(){return this[Ah]}get type(){return"browser-level"}_open(t,n){let a=indexedDB.open(this[OM]+this[gu],this[PM]);a.onerror=function(){n(a.error||new Error("unknown error"))},a.onsuccess=()=>{this[Ah]=a.result,n()},a.onupgradeneeded=d=>{let r=d.target.result;r.objectStoreNames.contains(this[gu])||r.createObjectStore(this[gu])}}[fl](t){return this[Ah].transaction([this[gu]],t).objectStore(this[gu])}[Ih](t,n){let a=t.transaction;a.onabort=function(){n(a.error||new Error("aborted by user"))},a.oncomplete=function(){n(null,t.result)}}_get(t,n,a){let d=this[fl]("readonly"),r;try{r=d.get(t)}catch(o){return this.nextTick(a,o)}this[Ih](r,function(o,l){if(o)return a(o);if(l===void 0)return a(new J5("Entry not found",{code:"LEVEL_NOT_FOUND"}));a(null,j5(l))})}_getMany(t,n,a){let d=this[fl]("readonly"),r=t.map(o=>l=>{let u;try{u=d.get(o)}catch(i){return l(i)}u.onsuccess=()=>{let i=u.result;l(null,i===void 0?i:j5(i))},u.onerror=i=>{i.stopPropagation(),l(u.error)}});Bre(r,16,a)}_del(t,n,a){let d=this[fl]("readwrite"),r;try{r=d.delete(t)}catch(o){return this.nextTick(a,o)}this[Ih](r,a)}_put(t,n,a,d){let r=this[fl]("readwrite"),o;try{o=r.put(n,t)}catch(l){return this.nextTick(d,l)}this[Ih](o,d)}_iterator(t){return new Ure(this,this[gu],t)}_batch(t,n,a){let d=this[fl]("readwrite"),r=d.transaction,o=0,l;r.onabort=function(){a(l||r.error||new Error("aborted by user"))},r.oncomplete=function(){a()};function u(){let i=t[o++],s=i.key,f;try{f=i.type==="del"?d.delete(s):d.put(i.value,s)}catch(h){l=h,r.abort();return}o<t.length?f.onsuccess=u:typeof r.commit=="function"&&r.commit()}u()}_clear(t,n){let a,d;try{a=zre(t)}catch{return this.nextTick(n)}if(t.limit>=0)return qre(this,this[gu],a,t,n);try{let r=this[fl]("readwrite");d=a?r.delete(a):r.clear()}catch(r){return this.nextTick(n,r)}this[Ih](d,n)}_close(t){this[Ah].close(),this.nextTick(t)}};Gy.destroy=function(e,t,n){typeof t=="function"&&(n=t,t=Q5),n=Wre(n,K5);let a=indexedDB.deleteDatabase(t+e);return a.onsuccess=function(){n()},a.onerror=function(d){n(d)},n[K5]};X5.BrowserLevel=Gy});var kM=Tt(Z5=>{Z5.Level=Y5().BrowserLevel});var zh={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var de=function(e){return e.identity},_e={identity:function(e){return e},Semigroupoid0:function(){return zh}};var ix={fromString:de(_e)},Mt=function(e){return e.fromString};var ux=function(e){return function(t){for(var n=t.length,a=new Array(n),d=0;d<n;d++)a[d]=e(t[d]);return a}};var _n=!0;var $e=function(e){return function(t){return function(n){return e(n)(t)}}},ve=function(e){return function(t){return e}};var sx=function(e){return function(t){return t(e)}};var pt=function(){function e(){}return e.value=new e,e}();var V=function(e){return e.map};var ut=function(e){return V(e)(ve(void 0))},dl=function(e){var t=V(e);return function(n){return function(a){return t(ve(a))(n)}}},Gh=function(e){var t=V(e);return function(n){return t(ve(n))}};var mt={map:ux};var cx=function(e){return function(t){return e+t}},lx=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var qn=function(e){return e.reflectSymbol};var pa=function(e){return function(t){return t[e]}};var Js={append:cx};var ln={append:lx};var De=function(e){return e.append};var a0={alt:De(ln),Functor0:function(){return mt}},On=function(e){return e.alt};var fx=function(e){return function(t){for(var n=e.length,a=t.length,d=new Array(n*a),r=0,o=0;o<n;o++)for(var l=e[o],u=0;u<a;u++)d[r++]=l(t[u]);return d}};var h3=de(_e);var js={apply:fx,Functor0:function(){return mt}},ht=function(e){return e.apply};var qr=function(e){var t=ht(e),n=V(e.Functor0());return function(a){return function(d){return t(n(ve(h3))(a))(d)}}};var X=function(e){return e.pure},rd=function(e){var t=X(e);return function(n){return function(a){if(!n)return a;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,a.constructor.name])}}},gn=function(e){var t=X(e);return function(n){return function(a){if(n)return a;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,a.constructor.name])}}},od=function(e){var t=ht(e.Apply0()),n=X(e);return function(a){return function(d){return t(n(a))(d)}}};var pl={pure:function(e){return[e]},Apply0:function(){return js}};var dx=function(e){return function(t){for(var n=[],a=0,d=e.length;a<d;a++)Array.prototype.push.apply(n,t(e[a]));return n}};var m3=de(_e),nt=function(e){return e.discard};var wu={bind:dx,Apply0:function(){return js}},ee=function(e){return e.bind},Sn=function(e){return $e(ee(e))},hl=function(e){var t=Sn(e);return function(n){return function(a){return function(d){return t(n)(a(d))}}}};var rt={discard:function(e){return ee(e)}};var _l=function(e){var t=ee(e);return function(n){return t(n)(m3)}};var px=function(e,t){for(var n=e>t?-1:1,a=new Array(n*(t-e)+1),d=e,r=0;d!==t;)a[r++]=d,d+=n;return a[r]=d,a},g3=function(e,t){if(e<1)return[];var n=new Array(e);return n.fill(t)},y3=function(e,t){for(var n=[],a=0,d=0;d<e;d++)n[a++]=t;return n},D3=typeof Array.prototype.fill=="function"?g3:y3,hx=function(){function e(d,r){this.head=d,this.tail=r}var t={};function n(d){return function(r){return new e(d,r)}}function a(d){for(var r=[],o=0,l=d;l!==t;)r[o++]=l.head,l=l.tail;return r}return function(d,r){return a(d(n)(t)(r))}}(),rr=function(e){return e.length},u0=function(e,t,n){return n.length===0?e({}):t(n[0])(n.slice(1))},_x=function(e,t,n,a){return a<0||a>=n.length?t:e(n[a])};var vx=function(e,t,n,a){for(var d=0,r=a.length;d<r;d++)if(n(a[d]))return e(d);return t},mx=function(e,t,n,a){for(var d=a.length-1;d>=0;d--)if(n(a[d]))return e(d);return t},gx=function(e,t,n,a,d){if(n<0||n>d.length)return t;var r=d.slice();return r.splice(n,0,a),e(r)},yx=function(e,t,n,a){if(n<0||n>=a.length)return t;var d=a.slice();return d.splice(n,1),e(d)};var vl=function(e){return e.slice().reverse()};var Dx=function(e,t){return t.filter(e)};var Cx=function(){function e(t,n,a,d,r,o){var l,u,i,s,f,h,p;for(l=r+(o-r>>1),l-r>1&&e(t,n,d,a,r,l),o-l>1&&e(t,n,d,a,l,o),u=r,i=l,s=r;u<l&&i<o;)f=d[u],h=d[i],p=n(t(f)(h)),p>0?(a[s++]=h,++i):(a[s++]=f,++u);for(;u<l;)a[s++]=d[u++];for(;i<o;)a[s++]=d[i++]}return function(t,n,a){var d;return a.length<2?a:(d=a.slice(0),e(t,n,d,a.slice(0),0,a.length),d)}}(),bx=function(e,t,n){return n.slice(e,t)},wx=function(e,t,n){for(var a=t.length<n.length?t.length:n.length,d=new Array(a),r=0;r<a;r++)d[r]=e(t[r])(n[r]);return d};var Sx=function(e){var t=ee(e.Bind1()),n=rd(e.Applicative0());return function(a){return function(d){return t(a)(function(r){return n(r)(d)})}}};var c0=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(a){return function(d){return t(d)(function(r){return n(a(r))})}}},Sr=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(a){return function(d){return t(a)(function(r){return t(d)(function(o){return n(r(o))})})}}};var Ex="\uFFFF",Tx="\0",b3=Number.POSITIVE_INFINITY,w3=Number.NEGATIVE_INFINITY;var ad=function(e){return function(t){return function(n){return function(a){return function(d){return a<d?e:a===d?t:n}}}}},Mx=ad,xx=ad,Fx=ad,Lx=ad,Ax=ad,Ix=function(e){return function(t){return function(n){for(var a=0,d=t.length,r=n.length;a<d&&a<r;){var o=t[a],l=n[a],u=e(o)(l);if(u!==0)return u;a++}return d===r?0:d>r?-1:1}}};var id=function(e){return function(t){return e===t}},Rx=id,$x=id,Hx=id,Ox=id,Px=id,kx=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(!e(t[a])(n[a]))return!1;return!0}}};var jh={eq:function(e){return function(t){return!0}}},no={eq:Px};var ud={eq:Hx},Na={eq:$x},Nx={eq:Ox},Kh={eq:Rx};var Ie=function(e){return e.eq},M3=Ie(Kh),Ei=function(e){return{eq:kx(Ie(e))}};var sd=function(e){var t=Ie(e);return function(n){return function(a){return M3(t(n)(a))(!1)}}};var pe=function(){function e(){}return e.value=new e,e}(),se=function(){function e(){}return e.value=new e,e}(),qe=function(){function e(){}return e.value=new e,e}();var Ti={eq:function(e){return function(t){return e instanceof pe&&t instanceof pe||e instanceof se&&t instanceof se||e instanceof qe&&t instanceof qe}}};var Bx=function(e){return function(t){return e-t|0}};var Wx=function(e){return function(t){return e+t|0}},Ux=function(e){return function(t){return e*t|0}},qx=function(e){return function(t){return e+t}},zx=function(e){return function(t){return e*t}};var xo=function(e){return e.zero};var l0={add:qx,zero:0,mul:zx,one:1},Qh={add:Wx,zero:0,mul:Ux,one:1};var Vo=function(e){return e.add};var cd=function(e){return e.sub};var ld={sub:Bx,Semiring0:function(){return Qh}};var f0=function(e){var t=cd(e),n=xo(e.Semiring0());return function(a){return t(n)(a)}};var jt={compare:function(e){return function(t){return qe.value}},Eq0:function(){return jh}},Vt=function(){return{compare:Lx(pe.value)(qe.value)(se.value),Eq0:function(){return no}}}();var xi=function(){return{compare:Fx(pe.value)(qe.value)(se.value),Eq0:function(){return ud}}}(),yt=function(){return{compare:xx(pe.value)(qe.value)(se.value),Eq0:function(){return Na}}}(),Xh=function(){return{compare:Ax(pe.value)(qe.value)(se.value),Eq0:function(){return Nx}}}(),fd=function(){return{compare:Mx(pe.value)(qe.value)(se.value),Eq0:function(){return Kh}}}();var Te=function(e){return e.compare},L3=Te(yt),Yh=function(e){var t=Te(e);return function(n){return function(a){return function(d){return t(n(a))(n(d))}}}};var d0=function(e){var t=Te(e);return function(n){return function(a){var d=t(n)(a);return!(d instanceof pe)}}};var Fi=function(e){var t=Te(e);return function(n){return function(a){var d=t(n)(a);if(d instanceof pe)return a;if(d instanceof qe||d instanceof se)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[d.constructor.name])}}},ml=function(e){var t=Te(e);return function(n){return function(a){var d=t(n)(a);if(d instanceof pe||d instanceof qe)return n;if(d instanceof se)return a;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[d.constructor.name])}}},Ks=function(e){var t=Te(e),n=Ei(e.Eq0());return{compare:function(){var a=function(d){return function(r){var o=t(d)(r);if(o instanceof qe)return 0;if(o instanceof pe)return 1;if(o instanceof se)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[o.constructor.name])}};return function(d){return function(r){return L3(0)(Ix(a)(d)(r))}}}(),Eq0:function(){return n}}};var p0=function(e){var t=ml(e),n=Fi(e);return function(a){return function(d){return function(r){return t(d)(n(a)(r))}}}};var h0=function(e){var t=d0(e);return function(n){var a=xo(n.Semiring0()),d=f0(n);return function(r){var o=t(r)(a);return o?r:d(r)}}};var Fo=function(e){return e.top};var gl={top:2147483647,bottom:-2147483648,Ord0:function(){return yt}},Qs={top:Ex,bottom:Tx,Ord0:function(){return Xh}};var ha=function(e){return e.bottom};var Kx=function(e){return e.toString()},Qx=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var Xx=function(e){var t=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(n,a){switch(n){case'"':case"\\":return"\\"+n;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var d=a+1,r=d<t&&e[d]>="0"&&e[d]<="9"?"\\&":"";return"\\"+n.charCodeAt(0).toString(10)+r})+'"'},Yx=function(e){return function(t){for(var n=[],a=0,d=t.length;a<d;a++)n[a]=e(t[a]);return"["+n.join(",")+"]"}};var Li={show:Xx};var Zx=function(e){return e.showRecordFields},eF=function(){return function(){return function(e){var t=Zx(e);return{show:function(n){return"{"+(t(pt.value)(n)+"}")}}}}};var Er={show:Qx},ro={show:Kx};var tF={show:function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[e.constructor.name])}},Ee=function(e){return e.show},yl=function(e){return{show:Yx(Ee(e))}},nF=function(e){var t=qn(e);return function(n){var a=Zx(n);return function(d){var r=Ee(d);return{showRecordFields:function(o){return function(l){var u=a(pt.value)(l),i=t(pt.value),s=pa(i)(l);return" "+(i+(": "+(r(s)+(","+u))))}}}}}},rF=function(e){var t=qn(e);return function(n){var a=Ee(n);return{showRecordFields:function(d){return function(r){var o=t(pt.value),l=pa(o)(r);return" "+(o+(": "+(a(l)+" ")))}}}}};var H3=de(_e),z=function(){function e(){}return e.value=new e,e}(),k=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),t_=function(e){var t=Ee(e);return{show:function(n){if(n instanceof k)return"(Just "+(t(n.value0)+")");if(n instanceof z)return"Nothing";throw new Error("Failed pattern match at Data.Maybe (line 223, column 1 - line 225, column 28): "+[n.constructor.name])}}},_0=function(e){var t=De(e);return{append:function(n){return function(a){if(n instanceof z)return a;if(a instanceof z)return n;if(n instanceof k&&a instanceof k)return new k(t(n.value0)(a.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,a.constructor.name])}}}};var aF=function(e){var t=_0(e);return{mempty:z.value,Semigroup0:function(){return t}}};var Ke=function(e){return function(t){return function(n){if(n instanceof z)return e;if(n instanceof k)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Mu=Ke(!0)(ve(!1)),Xs=Ke(!1)(ve(!0));var Dt={map:function(e){return function(t){return t instanceof k?new k(e(t.value0)):z.value}}},O3=V(Dt);var or=function(e){return Ke(e)(H3)},Lo=function(){return function(e){if(e instanceof k)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var xu=function(e){var t=Ie(e);return{eq:function(n){return function(a){return n instanceof z&&a instanceof z?!0:n instanceof k&&a instanceof k?t(n.value0)(a.value0):!1}}}};var dd={apply:function(e){return function(t){if(e instanceof k)return O3(e.value0)(t);if(e instanceof z)return z.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Dt}};var zr={bind:function(e){return function(t){if(e instanceof k)return t(e.value0);if(e instanceof z)return z.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return dd}};var We=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Oe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Fu={map:function(e){return function(t){if(t instanceof We)return new We(t.value0);if(t instanceof Oe)return new Oe(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},P3=V(Fu);var En=function(e){return function(t){return function(n){if(n instanceof We)return e(n.value0);if(n instanceof Oe)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},n_=function(){return En(ve(z.value))(k.create)}();var iF=En(ve(!1))(ve(!0));var v0={apply:function(e){return function(t){if(e instanceof We)return new We(e.value0);if(e instanceof Oe)return P3(e.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Fu}};var Cl=function(){return{pure:Oe.create,Apply0:function(){return v0}}}();var Go=function(e){return e};var Ai={map:function(e){return function(t){return e(t)}}};var r_={apply:function(e){return function(t){return e(t)}},Functor0:function(){return Ai}},m0={bind:function(e){return function(t){return t(e)}},Apply0:function(){return r_}},pd={pure:Go,Apply0:function(){return r_}},Tr={Applicative0:function(){return pd},Bind1:function(){return m0}};var uF=function(e){return Math.min(Math.abs(e),2147483647)},sF=function(e){return function(t){return t===0?0:t>0?Math.floor(e/t):-Math.floor(e/-t)}},cF=function(e){return function(t){if(t===0)return 0;var n=Math.abs(t);return(e%n+n)%n}};var lF={Ring0:function(){return ld}};var bl=function(e){return e.mod};var wl={degree:uF,div:sF,mod:cF,CommutativeRing0:function(){return lF}},hd=function(e){return e.div};var Ii={mempty:"",Semigroup0:function(){return Js}};var Lu={mempty:[],Semigroup0:function(){return ln}};var st=function(e){return e.mempty};var dF=function(e){return function(){return e}},pF=function(e){return function(t){return function(){return t(e())()}}};var hF=function(e,t,n){var a=0,d;return function(r){if(a===2)return d;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return a=1,d=n(),a=2,d}},Ua={Applicative0:function(){return on},Bind1:function(){return Fr}},Fr={bind:pF,Apply0:function(){return g0(0)}},on={pure:dF,Apply0:function(){return g0(0)}},_F=hF("functorEffect","Effect",function(){return{map:od(on)}}),g0=hF("applyEffect","Effect",function(){return{apply:Sr(Ua),Functor0:function(){return _F(0)}}}),ke=_F(20),y0=g0(23);var vF=function(e){return function(){return{value:e}}};var Qe=function(e){return function(){return e.value}},mF=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},qt=function(e){return function(t){return function(){t.value=e}}};var z3=ut(ke),fn=vF,D0=mF,o_=function(e){return D0(function(t){var n=e(t);return{state:n,value:n}})},oo=function(e){return function(t){return z3(o_(e)(t))}};var J3=Sn(Fr),j3=V(ke),Pt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yn=function(e){return e.tailRecM};var K3=function(e){var t=function(n){var a=!1,d;function r(o){if(o instanceof Pt){n=e(o.value0);return}if(o instanceof Bt)return a=!0,o.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 103, column 3 - line 103, column 25): "+[o.constructor.name])}for(;!a;)d=r(n);return d};return function(n){return t(e(n))}};var gF={tailRecM:function(e){var t=function(a){return a},n=K3(function(a){return t(e(a))});return function(a){return Go(n(a))}},Monad0:function(){return Tr}};var a_={tailRecM:function(e){return function(t){var n=function(a){if(a instanceof Bt)return a.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[a.constructor.name])};return function(){var d=J3(fn)(e(t))();return function(){for(;!function(){var o=Qe(d)();if(o instanceof Pt){var l=e(o.value0)();return qt(l)(d)(),!1}if(o instanceof Bt)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[o.constructor.name])}(););return{}}(),j3(n)(Qe(d))()}}},Monad0:function(){return Ua}};var yF=function(e){return function(t){return function(){return e(t())}}},DF=function(e){return function(){return e}},CF=function(e){return function(t){return function(){return t(e())()}}};var vd=function(e){return function(t){return function(){for(var n=0,a=e.length;n<a;n++)t(e[n])()}}};var Z3=function(e,t,n){var a=0,d;return function(r){if(a===2)return d;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return a=1,d=n(),a=2,d}};var Ys={map:yF};var w0={Applicative0:function(){return i_},Bind1:function(){return S0}},S0={bind:CF,Apply0:function(){return EF(0)}},i_={pure:DF,Apply0:function(){return EF(0)}},EF=Z3("applyST","Control.Monad.ST.Internal",function(){return{apply:Sr(w0),Functor0:function(){return Ys}}});function TF(e){return e}var MF=TF,xF=TF;var FF=function(e,t){return t.push(e)};var u_=function(t){return function(n){return function(){return t(n)}}},E0=function(t){return function(n){return function(a){return function(){return t(n,a)}}}};var LF=u_(xF),T0=u_(MF);var M0=E0(FF);var IF=function(e){return function(t){return e&&t}},RF=function(e){return function(t){return e||t}},$F=function(e){return!e};var gd=function(e){return e.tt};var va=function(e){return e.not};var x0=function(e){return e.implies};var yd=function(e){return e.ff};var Zs=function(e){return e.disj},_a={ff:!1,tt:!0,implies:function(e){return function(t){return Zs(_a)(va(_a)(e))(t)}},conj:IF,disj:RF,not:$F};var Sl=function(e){return e.conj},Dd=function(e){var t=yd(e),n=gd(e),a=x0(e),d=Sl(e),r=Zs(e),o=va(e);return{ff:function(l){return t},tt:function(l){return n},implies:function(l){return function(u){return function(i){return a(l(i))(u(i))}}},conj:function(l){return function(u){return function(i){return d(l(i))(u(i))}}},disj:function(l){return function(u){return function(i){return r(l(i))(u(i))}}},not:function(l){return function(u){return o(l(u))}}}};var HF=function(e){return function(t){return function(n){for(var a=t,d=n.length,r=d-1;r>=0;r--)a=e(n[r])(a);return a}}},OF=function(e){return function(t){return function(n){for(var a=t,d=n.length,r=0;r<d;r++)a=e(a)(n[r]);return a}}};var PF={empty:[],Alt0:function(){return a0}},Vr=function(e){return e.empty};var Z=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Au=function(e){return function(t){return e(t.value0)(t.value1)}};var vn=function(e){return e.value1};var $i={map:function(e){return function(t){return new Z(t.value0,e(t.value1))}}};var ar=function(e){return e.value0};var A0=function(e){var t=Ie(e);return function(n){var a=Ie(n);return{eq:function(d){return function(r){return t(d.value0)(r.value0)&&a(d.value1)(r.value1)}}}}},El=function(e){var t=Te(e),n=A0(e.Eq0());return function(a){var d=Te(a),r=n(a.Eq0());return{compare:function(o){return function(l){var u=t(o.value0)(l.value0);return u instanceof pe?pe.value:u instanceof se?se.value:d(o.value1)(l.value1)}},Eq0:function(){return r}}}};var Ao=function(e){return e.bimap};var _U={append:function(e){return function(t){return e instanceof k?e:t}}};var WF=function(){return{mempty:z.value,Semigroup0:function(){return _U}}}();var ne=function(e){return e};var Sd=function(){return ne};var vU=Sd();var In=function(){return vU};var mU=de(_e),gU=Ie(Ti),yU=In();var mn=function(e){return e.foldr};var ct=function(e){var t=qr(e.Apply0()),n=X(e);return function(a){var d=mn(a);return function(r){return d(function(o){return t(r(o))})(n(void 0))}}},f_=function(e){var t=ct(e);return function(n){return $e(t(n))}};var dn=function(e){return e.foldl};var qa=function(e){var t=dn(e);return function(n){var a=De(n.Semigroup0()),d=st(n);return function(r){return function(o){var l=function(u){return function(i){return u.init?{init:!1,acc:i}:{init:!1,acc:a(u.acc)(a(r)(i))}}};return t(l)({init:!0,acc:d})(o).acc}}}};var JF=function(e){var t=dn(e);return function(n){var a=function(d){return function(r){if(d instanceof z)return new k(r);if(d instanceof k)return new k(function(){var o=gU(n(d.value0)(r))(se.value);return o?d.value0:r}());throw new Error("Failed pattern match at Data.Foldable (line 441, column 3 - line 441, column 27): "+[d.constructor.name,r.constructor.name])}};return t(a)(z.value)}},k0=function(e){var t=Te(e);return function(n){return JF(n)(t)}};var N0=function(e){var t=dn(e);return function(n){return t(Vo(n))(xo(n))}};var Ht={foldr:function(e){return function(t){return function(n){if(n instanceof z)return t;if(n instanceof k)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof z)return t;if(n instanceof k)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=st(e);return function(n){return function(a){if(a instanceof z)return t;if(a instanceof k)return n(a.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,a.constructor.name])}}}};var d_={foldr:function(e){return function(t){return function(n){if(n instanceof We)return t;if(n instanceof Oe)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof We)return t;if(n instanceof Oe)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=st(e);return function(n){return function(a){if(a instanceof We)return t;if(a instanceof Oe)return n(a.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,a.constructor.name])}}}};var jF=function(e){var t=mn(e);return function(n){var a=De(n.Semigroup0()),d=st(n);return function(r){return t(function(o){return function(l){return a(r(o))(l)}})(d)}}},vt={foldr:HF,foldl:OF,foldMap:function(e){return jF(vt)(e)}};var kn=function(e){return e.foldMap};var p_=function(e){var t=kn(e)(WF);return function(n){var a=Ie(n);return function(d){var r=t(function(o){var l=a(d)(o.value0);return l?new k(o.value1):z.value});return function(o){return yU(r(o))}}}};var rc=function(e){var t=kn(e);return function(n){return t(n)(mU)}};var oc=function(e){return function(t){return function(n){return e(t,n)}}},ac=function(e){return function(t){return function(n){return function(a){return e(t,n,a)}}}},Iu=function(e){return function(t){return function(n){return function(a){return function(d){return e(t,n,a,d)}}}}},B0=function(e){return function(t){return function(n){return function(a){return function(d){return function(r){return e(t,n,a,d,r)}}}}}};var KF=function(e){return function(t){for(var n=t.length,a=Array(n),d=0;d<n;d++)a[d]=e(d)(t[d]);return a}};var Ru=function(e){return e.mapWithIndex};var ic={mapWithIndex:KF,Functor0:function(){return mt}};var ZF=function(){function e(d){return[d]}function t(d){return function(r){return[d,r]}}function n(d){return function(r){return function(o){return[d,r,o]}}}function a(d){return function(r){return d.concat(r)}}return function(d){return function(r){return function(o){return function(l){return function(u){function i(s,f){switch(f-s){case 0:return o([]);case 1:return r(e)(l(u[s]));case 2:return d(r(t)(l(u[s])))(l(u[s+1]));case 3:return d(d(r(n)(l(u[s])))(l(u[s+1])))(l(u[s+2]));default:var h=s+Math.floor((f-s)/4)*2;return d(r(a)(i(s,h)))(i(h,f))}}return i(0,u.length)}}}}}}();var t4=de(_e),Mn=function(e){return e.traverse};var uc={traverse:function(e){var t=X(e),n=V(e.Apply0().Functor0());return function(a){return function(d){if(d instanceof z)return t(z.value);if(d instanceof k)return n(k.create)(a(d.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[a.constructor.name,d.constructor.name])}}},sequence:function(e){var t=X(e),n=V(e.Apply0().Functor0());return function(a){if(a instanceof z)return t(z.value);if(a instanceof k)return n(k.create)(a.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[a.constructor.name])}},Functor0:function(){return Dt},Foldable1:function(){return Ht}};var fL=function(e){var t=Mn(e);return function(n){return t(n)(t4)}},Hi={traverse:function(e){var t=e.Apply0();return ZF(ht(t))(V(t.Functor0()))(X(e))},sequence:function(e){return fL(Hi)(e)},Functor0:function(){return mt},Foldable1:function(){return vt}},$u=function(e){return e.sequence};var dL=function(e){return function(t){return function(n){return function(a){return function(d){return function(r){for(var o=[],l=r;;){var u=d(l);if(e(u))return o;var i=t(u);o.push(n(i)),l=a(i)}}}}}}};var pL=function(e){return function(t){return function(n){return function(a){return function(d){return function(r){for(var o=[],l=r;;){var u=d(l);o.push(n(u));var i=a(u);if(e(i))return o;l=t(i)}}}}}}};var v_=function(e){return e.foldl1};var l4=Lo();var V0={unfoldr1:pL(Mu)(l4)(ar)(vn)};var d4=Lo(),ma=function(e){return e.unfoldr};var jo={unfoldr:dL(Mu)(d4)(ar)(vn),Unfoldable10:function(){return V0}};var h4=ut(Ys);var _4=V(mt),v4=V(Ys),G0=Lo(),m4=gn(i_),g4=sd(Ti),y4=Ie(Ti);var D4=rc(vt),C4=De(ln);var vL=ac(wx);var J0=function(){return vL(Z.create)}();var y_=function(){return ac(u0)(ve(z.value))(function(e){return function(t){return new k({head:e,tail:t})}})}();var j0=function(){return ac(u0)(ve(z.value))(function(e){return function(t){return new k(t)}})}(),D_=function(e){return ac(Cx)(e)(function(t){if(t instanceof se)return 1;if(t instanceof qe)return 0;if(t instanceof pe)return-1;throw new Error("Failed pattern match at Data.Array (line 897, column 38 - line 900, column 11): "+[t.constructor.name])})},K0=function(e){var t=Yh(e);return function(n){return D_(t(n))}},b4=K0(yt),Q0=function(e){var t=Te(e);return function(n){return D_(t)(n)}};var g_=ac(bx);var sc=function(e){return[e]};var X0=oc(px);var cc=function(e){return rr(e)===0};var mL=Ru(ic);var gL=function(){return B0(gx)(k.create)(z.value)}();var C_=function(){return Iu(_x)(k.create)(z.value)}(),Fl=function(e){return C_(e)(rr(e)-1|0)};var yL=function(e){return function(t){var n=function(d){var r=!1,o;function l(u){var i=C_(t)(u);if(i instanceof k){var s=e(i.value0);if(s){d=u+1|0;return}return r=!0,new k(u)}if(i instanceof z)return r=!0,z.value;throw new Error("Failed pattern match at Data.Array (line 1035, column 5 - line 1037, column 25): "+[i.constructor.name])}for(;!r;)o=l(d);return o},a=n(0);if(a instanceof k&&a.value0===0)return{init:[],rest:t};if(a instanceof k)return{init:g_(0)(a.value0)(t),rest:g_(a.value0)(rr(t))(t)};if(a instanceof z)return{init:t,rest:[]};throw new Error("Failed pattern match at Data.Array (line 1022, column 3 - line 1028, column 30): "+[a.constructor.name])}},b_=function(e){return function(t){return yL(e)(t).init}};var Oi=function(e){return C_(e)(0)},DL=function(e){return function(t){var n=D_(function(d){return function(r){return e(vn(d))(vn(r))}})(mL(Z.create)(t)),a=Oi(n);if(a instanceof z)return[];if(a instanceof k)return _4(vn)(b4(ar)(function(){var r=LF(sc(a.value0))();return vd(n)(function(o){return function(){var u=v4(function(){var i=function(s){return G0(Fl(s))};return function(s){return vn(i(s))}}())(T0(r))();return m4(g4(e(u)(o.value1))(qe.value))(h4(M0(o)(r)))()}})(),T0(r)()}()));throw new Error("Failed pattern match at Data.Array (line 1115, column 17 - line 1123, column 28): "+[a.constructor.name])}},Ld=function(e){return DL(Te(e))};var Pi=function(e){return oc(hx)(mn(e))};var CL=function(e){return D4(e)};var bL=function(){return Iu(mx)(k.create)(z.value)}(),Ad=function(e){return function(t){return function(n){var a=Ke(0)(function(d){return d+1|0})(bL(function(d){return y4(e(t)(d))(se.value)})(n));return G0(gL(a)(t)(n))}}};var wL=function(){return Iu(vx)(k.create)(z.value)}();var Y0=oc(Dx);var Z0=function(e){return function(t){var n=e<1;return n?t:g_(e)(rr(t))(t)}};var w_=function(){return Iu(yx)(k.create)(z.value)}(),S_=function(e){return function(t){return function(n){return n.length===0?[]:Ke(n)(function(a){return G0(w_(a)(n))})(wL(e(t))(n))}}},eD=function(e){return S_(Ie(e))};var Dn=function(e){return function(t){return C4([e])(t)}};var tD=$e(ee(wu)),za=function(e){return tD(function(){var t=Ke([])(sc);return function(n){return t(e(n))}}())};var S4=mn(vt),SL=Ru(ic),E4=dn(vt);var Ll=function(e){return e.foldrWithIndex};var T4=function(e){var t=Ll(e);return function(n){var a=De(n.Semigroup0()),d=st(n);return function(r){return t(function(o){return function(l){return function(u){return a(r(o)(l))(u)}}})(d)}}},E_={foldrWithIndex:function(e){return function(t){var n=S4(function(d){return function(r){return e(d.value0)(d.value1)(r)}})(t),a=SL(Z.create);return function(d){return n(a(d))}}},foldlWithIndex:function(e){return function(t){var n=E4(function(d){return function(r){return e(r.value0)(d)(r.value1)}})(t),a=SL(Z.create);return function(d){return n(a(d))}}},foldMapWithIndex:function(e){return T4(E_)(e)},Foldable0:function(){return vt}};var M4=function(e){var t=$u(e.Traversable2()),n=Ru(e.FunctorWithIndex0());return function(a){var d=t(a);return function(r){var o=n(r);return function(l){return d(o(l))}}}},Al=function(e){return e.traverseWithIndex};var Id={traverseWithIndex:function(e){return M4(Id)(e)},FunctorWithIndex0:function(){return ic},FoldableWithIndex1:function(){return E_},Traversable2:function(){return Hi}};var io=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var nD=function(e){var t=Vr(e);return function(n){return new io(n,t)}};var T_=function(e){var t=On(e.Plus1().Alt0()),n=X(e.Applicative0());return function(a){return t(n(a.value0))(a.value1)}};var Rd=function(e){var t=V(e);return{map:function(n){return function(a){return new io(n(a.value0),t(n)(a.value1))}}}};var M_=function(e){var t=kn(e),n=dn(e),a=mn(e);return{foldMap:function(d){var r=De(d.Semigroup0()),o=t(d);return function(l){return function(u){return r(l(u.value0))(o(l)(u.value1))}}},foldl:function(d){return function(r){return function(o){return n(d)(d(r)(o.value0))(o.value1)}}},foldr:function(d){return function(r){return function(o){return d(o.value0)(a(d)(r)(o.value1))}}}}};var rD=function(e){var t=dn(e),n=mn(e),a=M_(e);return{foldMap1:function(d){var r=De(d);return function(o){return function(l){return t(function(u){return function(i){return r(u)(o(i))}})(o(l.value0))(l.value1)}}},foldr1:function(d){return function(r){return Ke(r.value0)(d(r.value0))(n(function(o){var l=Ke(o)(d(o));return function(u){return k.create(l(u))}})(z.value)(r.value1))}},foldl1:function(d){return function(r){return t(d)(r.value0)(r.value1)}},Foldable0:function(){return a}}};var xL=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Vn=function(e){return e};var x_=function(e){return function(t){return t.toString(e)}};var F_=isFinite;var $d=Math.abs;var Hd=function(e){return function(t){return e%t}},aD=Math.round;var LL=Fo(gl),AL=ha(gl);var iD=16;var uD=function(){return xL(k.create)(z.value)}(),U4=function(e){if(!F_(e))return 0;if(e>=Vn(LL))return LL;if(e<=Vn(AL))return AL;if(_n)return or(0)(uD(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},Rl=function(e){return U4(aD(e))};var q4=typeof Array.from=="function",z4=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",V4=typeof String.prototype.fromCodePoint=="function",G4=typeof String.prototype.codePointAt=="function",IL=function(e){return G4?function(t){return t.codePointAt(0)}:e};var RL=function(e){return V4?String.fromCodePoint:e},$L=function(e){return function(t){return z4?function(n){for(var a="",d=n[Symbol.iterator](),r=0;r<t;++r){var o=d.next();if(o.done)return a;a+=o.value}return a}:e(t)}},HL=function(e){return function(t){return q4?function(n){return Array.from(n,t)}:e}};function Hu(e){return e.charCodeAt(0)}function OL(e){return String.fromCharCode(e)}var Od={Applicative0:function(){return pl},Plus1:function(){return PF}};var kL=ha(Qs),NL=Fo(Qs);var fc=function(e){return e.toEnum};var cD=function(e){return e.fromEnum},BL=function(e){var t=fc(e),n=cD(e),a=ha(e.Bounded0());return function(d){return function(r){return function(o){var l=t(o);if(l instanceof k)return l.value0;if(l instanceof z){var u=o<n(a);return u?d:r}throw new Error("Failed pattern match at Data.Enum (line 158, column 33 - line 160, column 62): "+[l.constructor.name])}}}};var Ou=function(e){return function(t){return function(n){return e(t(n)+1|0)}}},Pu=function(e){return function(t){return function(n){return e(t(n)-1|0)}}};var sD=function(e){return e>=Hu(kL)&&e<=Hu(NL)?new k(OL(e)):z.value},X4={succ:Ou(sD)(Hu),pred:Pu(sD)(Hu),Ord0:function(){return Xh}};var lD=function(){return{cardinality:Hu(NL)-Hu(kL)|0,toEnum:sD,fromEnum:Hu,Bounded0:function(){return Qs},Enum1:function(){return X4}}}();var L_=function(e){return e};var ku=function(e){return e.length};var A_=function(e){return function(t){return t.substr(0,e)}},dc=function(e){return function(t){return t.substring(e)}};var Nu=function(e){return function(t){if(e>=0&&e<t.length)return t.charAt(e);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var UL=function(e){return function(t){return dc(ku(t)-e|0)(t)}};var I_=function(e){return function(t){return A_(ku(t)-e|0)(t)}};var fD=function(e){return function(t){return t.split(e)}};var mo=function(e){return function(t){return t.join(e)}};var GL=function(e){return e===""};var kd=cD(lD),i6=V(Dt),u6=ma(jo),s6=hd(wl),c6=bl(wl);var jL=function(e){return function(t){return(((e-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var KL=function(e){return 56320<=e&&e<=57343},QL=function(e){return 55296<=e&&e<=56319},XL=function(e){var t=ku(e);if(t===0)return z.value;if(t===1)return new k({head:kd(Nu(0)(e)),tail:""});var n=kd(Nu(1)(e)),a=kd(Nu(0)(e)),d=QL(a)&&KL(n);return d?new k({head:jL(a)(n),tail:dc(2)(e)}):new k({head:a,tail:dc(1)(e)})},l6=function(e){return i6(function(t){return new Z(t.head,t.tail)})(XL(e))},f6=function(e){return u6(l6)(e)},d6=function(e){var t=kd(Nu(0)(e)),n=QL(t)&&ku(e)>1;if(n){var a=kd(Nu(1)(e)),d=KL(a);return d?jL(t)(a):t}return t},p6=IL(d6),h6=HL(f6)(p6),pc=function(e){return rr(h6(e))};var dD=function(){var e=BL(lD)(ha(Qs))(Fo(Qs));return function(t){return L_(e(t))}}(),_6=function(e){if(e<=65535)return dD(e);var t=s6(e-65536|0)(1024)+55296|0,n=c6(e-65536|0)(1024)+56320|0;return dD(t)+dD(n)};var YL=RL(_6),ZL=function(e){return function(t){if(e<1)return"";var n=XL(t);return n instanceof k?YL(n.value0.head)+ZL(e-1|0)(n.value0.tail):t}},eA=$L(ZL);var R_=function(e){return function(t){return dc(ku(eA(e)(t)))(t)}};var pD=p0(yt),tA=Fi(yt),nA=ml(yt);var hD=p0(xi);var rA=Ee(Er);var oA=function(){function e(t,n,a,d){this.value0=t,this.value1=n,this.value2=a,this.value3=d}return e.create=function(t){return function(n){return function(a){return function(d){return new e(t,n,a,d)}}}},e}(),aA=function(e){return function(t){return Hd(Hd(e)(t)+t)(t)}},D6=function(e){return function(t){return function(n){return function(a){var d=pD(0)(255)(e),r=Vn(d)/255,o=pD(0)(255)(t),l=Vn(o)/255,u=pD(0)(255)(n),i=tA(tA(d)(o))(u),s=nA(nA(d)(o))(u),f=i-s|0,h=Vn(f)/255,p=Vn(i+s|0)/(255*2),c=function(){if(f===0)return 0;if(_n)return h/(1-$d(2*p-1));throw new Error("Failed pattern match at Color (line 160, column 3 - line 162, column 64): ")}(),_=Vn(u)/255,v=function(y){if(y===0)return 0;if(i===d)return aA((l-_)/h)(6);if(i===o)return(_-r)/h+2;if(_n)return(r-l)/h+4;throw new Error("Failed pattern match at Color (line 150, column 3 - line 150, column 15): "+[y.constructor.name])},m=60*v(f);return new oA(m,c,p,a)}}}},Ga=function(e){return function(t){return function(n){return D6(e)(t)(n)(1)}}};var C6=function(e){return function(t){return function(n){return function(a){var d=hD(0)(1)(t),r=hD(0)(1)(n),o=hD(0)(1)(a);return new oA(e,d,r,o)}}}};var iA=function(e){return function(t){return function(n){return C6(e)(t)(n)(1)}}},uA=iA(0)(0)(1);var sA=function(e){var t=function(l){return rA(Vn(Rl(100*l))/100)},n=t(e.value1*100)+"%",a=t(e.value2*100)+"%",d=t(e.value0),r=rA(e.value3),o=e.value3===1;return o?"hsl("+(d+(", "+(n+(", "+(a+")"))))):"hsla("+(d+(", "+(n+(", "+(a+(", "+(r+")")))))))};var b6=function(e){var t=e===360;return t?e:aA(e)(360)};var w6=function(e){var t=b6(e.value0)/60,n=(1-$d(2*e.value2-1))*e.value1,a=e.value2-n/2,d=n*(1-$d(Hd(t)(2)-1)),r=function(){if(t<1)return{r:n,g:d,b:0};if(1<=t&&t<2)return{r:d,g:n,b:0};if(2<=t&&t<3)return{r:0,g:n,b:d};if(3<=t&&t<4)return{r:0,g:d,b:n};if(4<=t&&t<5)return{r:d,g:0,b:n};if(_n)return{r:n,g:0,b:d};throw new Error("Failed pattern match at Color (line 356, column 3 - line 362, column 43): ")}();return{r:r.r+a,g:r.g+a,b:r.b+a,a:e.value3}};var S6=function(e){var t=w6(e),n=Rl(255*t.g),a=Rl(255*t.r),d=Rl(255*t.b);return{r:a,g:n,b:d,a:t.a}};var Ol=function(e){var t=function(d){var r=x_(iD)(d),o=pc(r)===1;return o?"0"+r:r},n=S6(e),a=function(){if(n.a===1)return"";if(_n)return t(Rl(255*n.a));throw new Error("Failed pattern match at Color (line 429, column 3 - line 431, column 46): ")}();return"#"+(t(n.r)+(t(n.g)+(t(n.b)+a)))};var Ko=iA(0)(0)(0);var $_={dimap:function(e){return function(t){return function(n){return function(a){return t(n(e(a)))}}}}},_c=function(e){return e.dimap};var Qo={first:function(e){return function(t){return new Z(e(t.value0),t.value1)}},second:V($i),Profunctor0:function(){return $_}},vc=function(e){return e.second},Pl=function(e){return e.first};var lA=V(mt),fA=vc(Qo),E6=De(ln),T6=p_(vt)(no);var uo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),so=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),M6=function(e){return e};var x6=function(e){return e},Ka=function(e){return e.value};var kl={append:function(e){return function(t){if(e instanceof so&&t instanceof so)return new so(e.value0+t.value0);if(e instanceof so&&t instanceof uo)return new uo(lA(fA(function(n){return e.value0+n}))(t.value0));if(e instanceof uo&&t instanceof so)return new uo(lA(fA(function(n){return t.value0+n}))(e.value0));if(e instanceof uo&&t instanceof uo)return new uo(E6(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},F6=De(kl),_D={append:function(e){return function(t){return F6(e)(t)}}},dA=De(_D);var Nd=function(e){if(e instanceof uo)return or("")(T6("")(e.value0));if(e instanceof so)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var H_=function(){return{fromString:so.create}}(),pA=Mt(H_),ir={fromString:function(e){return M6(pA(e))}},O_=Mt(ir);var Wu={value:function(e){return O_(sA(e))}};var mc={value:function(){var e=Ee(Er);return function(t){return O_(e(t))}}()},Uu={value:O_},ki=function(e){var t=Ka(e);return function(n){var a=Ka(n);return{value:function(d){return dA(t(d.value0))(dA(O_(" "))(a(d.value1)))}}}};var Gn={fromString:function(e){return x6(pA(e))}};var hA=function(e){return e};var _A=function(e){return e.center};var Bd=function(){return new uo([new Z("-webkit-",""),new Z("-moz-",""),new Z("-ms-",""),new Z("-o-",""),new Z("","")])}();var Qa=ne,vD=ne;var mD=De(_D),gD=Ka(mc),yD=Mt(ir),mA=Ee(Er),L6=De(kl);var Wd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),A6=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),I6=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),R6=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$6=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var qu=function(e){if(e instanceof Wd)return Nd(e.value0);if(e instanceof A6)return Qa(function(t){return Qa(function(n){return"("+(qu(t)+(" + "+(qu(n)+")")))})(e.value1)})(e.value0);if(e instanceof I6)return Qa(function(t){return Qa(function(n){return"("+(qu(t)+(" - "+(qu(n)+")")))})(e.value1)})(e.value0);if(e instanceof R6)return Qa(function(t){return"("+(mA(e.value0)+(" * "+(qu(t)+")")))})(e.value1);if(e instanceof $6)return Qa(function(t){return"("+(qu(t)+(" / "+(mA(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},Da={value:function(e){return e instanceof Wd?e.value0:L6(Bd)(new so("calc"+qu(e)))}};var Xe=function(e){return new Wd(mD(gD(e))(yD("px")))};var Bl=function(e){return new Wd(mD(gD(e))(yD("%")))};var DD=function(e){return new Wd(mD(gD(e))(yD("em")))};var H6=De(ln),gA=X(pl),O6=Ie(Ei(no)),Ar=Te(Vt),P6=Te(Ks(Vt)),zu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Wi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ju=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ju=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ku=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ui=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Wl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yA=function(e){return e},P_=function(){function e(){}return e.value=new e,e}(),CD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),wD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),DA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),CA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ud=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ft=function(e){return function(t){return new Ud(H6(e.value0)(t),e.value1)}},zt=function(){return new Ud([],P_.value)}(),bA=function(e){return yA(gA(Ui.create(e)))};var k6={eq:function(e){return function(t){return e instanceof zu&&t instanceof zu||e instanceof Wi&&t instanceof Wi||e instanceof Vu&&t instanceof Vu?e.value0===t.value0:e instanceof Gu&&t instanceof Gu||e instanceof Ju&&t instanceof Ju||e instanceof ju&&t instanceof ju||e instanceof Ku&&t instanceof Ku||e instanceof Qu&&t instanceof Qu||e instanceof Xu&&t instanceof Xu?e.value0===t.value0&&e.value1===t.value1:e instanceof Ui&&t instanceof Ui?e.value0===t.value0:e instanceof Wl&&t instanceof Wl?e.value0===t.value0&&O6(e.value1)(t.value1):!1}}};var wA={compare:function(e){return function(t){if(e instanceof zu&&t instanceof zu)return Ar(e.value0)(t.value0);if(e instanceof zu)return pe.value;if(t instanceof zu)return se.value;if(e instanceof Wi&&t instanceof Wi)return Ar(e.value0)(t.value0);if(e instanceof Wi)return pe.value;if(t instanceof Wi)return se.value;if(e instanceof Vu&&t instanceof Vu)return Ar(e.value0)(t.value0);if(e instanceof Vu)return pe.value;if(t instanceof Vu)return se.value;if(e instanceof Gu&&t instanceof Gu){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof Gu)return pe.value;if(t instanceof Gu)return se.value;if(e instanceof Ju&&t instanceof Ju){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof Ju)return pe.value;if(t instanceof Ju)return se.value;if(e instanceof ju&&t instanceof ju){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof ju)return pe.value;if(t instanceof ju)return se.value;if(e instanceof Ku&&t instanceof Ku){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof Ku)return pe.value;if(t instanceof Ku)return se.value;if(e instanceof Qu&&t instanceof Qu){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof Qu)return pe.value;if(t instanceof Qu)return se.value;if(e instanceof Xu&&t instanceof Xu){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:Ar(e.value1)(t.value1)}if(e instanceof Xu)return pe.value;if(t instanceof Xu)return se.value;if(e instanceof Ui&&t instanceof Ui)return Ar(e.value0)(t.value0);if(e instanceof Ui)return pe.value;if(t instanceof Ui)return se.value;if(e instanceof Wl&&t instanceof Wl){var n=Ar(e.value0)(t.value0);return n instanceof pe?pe.value:n instanceof se?se.value:P6(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return k6}};var k_=function(e){return new Ud([],new CD(e))},Jn=function(e){return function(t){return new Ud([],new wD(e,t))}},SA=function(e){return function(t){return new Ud([],new bD(e,t))}};var Ct=function(e){return yA(gA(Wi.create(e)))};var Ca=function(e){return e.tell};function ur(e){return new Error(e)}function go(e){return function(){throw e}}function N_(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var ED=function(e){return go(ur(e))};var sr=function(e){return e.throwError};var W6={throwError:go,Monad0:function(){return Ua}};var EA={catchError:$e(N_),MonadThrow0:function(){return W6}};var Xo=function(e){return e.catchError};var qd=function(e){var t=Xo(e),n=e.MonadThrow0().Monad0(),a=V(n.Bind1().Apply0().Functor0()),d=X(n.Applicative0());return function(r){return t(a(Oe.create)(r))(function(o){return d(We.create(o))})}};var Ir=function(e){return e.ask};var lo=function(e){return e.state},ql=function(e){var t=lo(e);return function(n){return t(function(a){return new Z(void 0,n)})}},pn=function(e){var t=lo(e);return function(n){return t(function(a){return new Z(void 0,n(a))})}},Io=function(e){var t=lo(e);return function(n){return t(function(a){var d=n(a);return new Z(d,d)})}},Ro=function(e){var t=lo(e);return function(n){return t(function(a){return new Z(n(a),a)})}},Rr=function(e){return lo(e)(function(t){return new Z(t,t)})};var wt=function(e){return e.lift};var zl={liftEffect:de(_e),Monad0:function(){return Ua}},Le=function(e){return e.liftEffect};var TD=function(e){return e},MD=function(e){return e};var B_=function(e){return function(t){return e(t)}},xD=function(e){var t=V(e);return{map:function(n){return B_(t(function(a){return new Z(n(a.value0),a.value1)}))}}};var zd=function(e){var t=De(e);return function(n){var a=ht(n),d=n.Functor0(),r=V(d),o=xD(d);return{apply:function(l){return function(u){var i=function(s){return function(f){return new Z(s.value0(f.value0),t(s.value1)(f.value1))}};return a(r(i)(l))(u)}},Functor0:function(){return o}}}},FD=function(e){var t=De(e),n=zd(e);return function(a){var d=ee(a),r=a.Apply0(),o=V(r.Functor0()),l=n(r);return{bind:function(u){return function(i){return d(u)(function(s){var f=i(s.value0);return o(function(h){return new Z(h.value0,t(s.value1)(h.value1))})(f)})}},Apply0:function(){return l}}}};var LD=function(e){var t=st(e),n=zd(e.Semigroup0());return function(a){var d=X(a),r=n(a.Apply0());return{pure:function(o){return d(new Z(o,t))},Apply0:function(){return r}}}},z6=function(e){var t=LD(e),n=FD(e.Semigroup0());return function(a){var d=t(a.Applicative0()),r=n(a.Bind1());return{Applicative0:function(){return d},Bind1:function(){return r}}}};var TA=function(e){var t=e.Semigroup0(),n=z6(e);return function(a){var d=n(a);return{tell:function(){var r=X(a.Applicative0()),o=Z.create(void 0);return function(l){return TD(r(o(l)))}}(),Semigroup0:function(){return t},Monad1:function(){return d}}}};var V6=In();var G6=function(e){return V6(MD(e))};var MA=function(e){return vn(G6(e))};var Q6=V(xD(Ai));var X6=ht(zd(ln)(r_)),Y6=ee(FD(ln)(m0));var xA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),FA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),LA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),AA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),AD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ID=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),IA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),RA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$A=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),HA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var OA=function(e){return e},Gd=function(e){return MA(e)},PA=function(){var e=Ca(TA(Lu)(Tr));return function(t){return OA(e(sc(t)))}}(),xt=function(e){return function(t){return PA(new ID(new AD(e),Gd(t)))}};var Kt=function(e){var t=Ka(e);return function(n){return function(a){return PA(new Vd(hA(n),t(a)))}}},RD=function(e){var t=Kt(e);return function(n){return t(n)}};var Z6={map:function(e){return function(t){return Q6(e)(t)}}};var kA={apply:function(e){return function(t){return X6(e)(t)}},Functor0:function(){return Z6}},Do={bind:function(e){return function(t){return Y6(e)(function(n){return function(a){return a}(t(n))})}},Apply0:function(){return kA}};var NA={pure:function(){var e=X(LD(Lu)(pd));return function(t){return OA(e(t))}}(),Apply0:function(){return kA}};var eq=Mt(ir);var BA=Mt(Gn),tq=Kt(Wu),nq=ki(Da);var rq={value:function(e){return e}},oq=Kt(ki(rq)(nq(Wu))),Cc=eq("solid");var WA=tq(BA("border-color"));var bc=function(e){return function(t){return function(n){return oq(BA("border"))(new Z(e,new Z(t,n)))}}};var q_=Mt(Gn),Gl=Mt(ir);var $o=function(){var e=Kt(Uu)(q_("z-index")),t=Ee(ro);return function(n){return e(t(n))}}();var aq={value:function(e){return e}};var iq={value:function(e){return e}};var Zu=Gl("relative"),hr=Kt(aq)(q_("position")),z_=Kt(mc)(q_("opacity"));var UA=Gl("inline-block");var zi=Gl("flex");var qA=Gl("none");var Ho=Kt(iq)(q_("display"));var zA=Gl("block"),ba=Gl("absolute");var HD=Mt(ir);var VA=Mt(Gn);var uq=function(e){return e};var sq={value:function(e){return e}};var cq={value:function(e){return e}};var es=HD("row");var lq={fromString:function(e){return uq(HD(e))}},fq=Mt(lq);var Vi=Kt(sq)(VA("flex-direction"));var GA=HD("column");var JA={center:fq("center")};var jA=Kt(cq)(VA("align-items"));var ts=Kt(Da),Xa=Mt(Gn),KA=ki(Da)(Da),QA=Kt(ki(KA)(KA)),wa=ts(Xa("width")),Zo=ts(Xa("top")),G_=ts(Xa("right"));var OD=ts(Xa("padding-right"));var J_=function(e){return function(t){return function(n){return function(a){return QA(Xa("padding"))(new Z(new Z(e,t),new Z(n,a)))}}}};var PD=ts(Xa("margin-right"));var XA=function(e){return function(t){return function(n){return function(a){return QA(Xa("margin"))(new Z(new Z(e,t),new Z(n,a)))}}}};var Gi=ts(Xa("left")),Oo=ts(Xa("height")),kD=ts(Xa("bottom"));var Ze=function(){function e(){}return e.value=new e,e}(),Ye=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ND=function(e){return e},pq=function(e){return new Ye(e.value0,e.value1)};var hq=function(e){var t=function(n){return function(a){var d=n,r=!1,o;function l(u,i){if(i instanceof Ye&&i.value1 instanceof Ye&&i.value1.value1 instanceof Ye){d=new Ye(i,u),a=i.value1.value1.value1;return}var s=function(h){return h instanceof Ye&&h.value1 instanceof Ye&&h.value1.value1 instanceof Ze?new Ye(e(h.value0),new Ye(e(h.value1.value0),Ze.value)):h instanceof Ye&&h.value1 instanceof Ze?new Ye(e(h.value0),Ze.value):Ze.value},f=function(h){return function(p){var c=h,_=!1,v;function m(y,C){if(y instanceof Ye&&y.value0 instanceof Ye&&y.value0.value1 instanceof Ye&&y.value0.value1.value1 instanceof Ye){c=y.value1,p=new Ye(e(y.value0.value0),new Ye(e(y.value0.value1.value0),new Ye(e(y.value0.value1.value1.value0),C)));return}return _=!0,C}for(;!_;)v=m(c,p);return v}};return r=!0,f(u)(s(i))}for(;!r;)o=l(d,a);return o}};return t(Ze.value)},ZA={map:hq};var Bn={foldr:function(e){return function(t){var n=function(){var d=function(r){return function(o){var l=r,u=!1,i;function s(f,h){if(h instanceof Ze)return u=!0,f;if(h instanceof Ye){l=new Ye(h.value0,f),o=h.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[f.constructor.name,h.constructor.name])}for(;!u;)i=s(l,o);return i}};return d(Ze.value)}(),a=dn(Bn)($e(e))(t);return function(d){return a(n(d))}}},foldl:function(e){var t=function(n){return function(a){var d=n,r=!1,o;function l(u,i){if(i instanceof Ze)return r=!0,u;if(i instanceof Ye){d=e(u)(i.value0),a=i.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[i.constructor.name])}for(;!r;)o=l(d,a);return o}};return t},foldMap:function(e){var t=De(e.Semigroup0()),n=st(e);return function(a){return dn(Bn)(function(d){var r=t(d);return function(o){return r(a(o))}})(n)}}};var _q=mn(Bn);var BD={append:function(e){return function(t){return _q(Ye.create)(t)(e)}}},eI=De(BD);var tI={append:function(e){return function(t){return new io(e.value0,eI(e.value1)(pq(t)))}}};var vq={alt:eI,Functor0:function(){return ZA}},nI=function(){return{empty:Ze.value,Alt0:function(){return vq}}}();var wc=function(e,t,n){var a=0,d;return function(r){if(a===2)return d;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return a=1,d=n(),a=2,d}};var gq=V(Dt);var At=function(){function e(){}return e.value=new e,e}(),kt=function(){function e(t,n,a,d,r,o){this.value0=t,this.value1=n,this.value2=a,this.value3=d,this.value4=r,this.value5=o}return e.create=function(t){return function(n){return function(a){return function(d){return function(r){return function(o){return new e(t,n,a,d,r,o)}}}}}},e}(),oI=function(){function e(){}return e.value=new e,e}(),WD=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),zD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var j_=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),rI=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),ea=function(e,t,n,a){if(n instanceof At){if(a instanceof At)return new kt(1,1,e,t,n,a);if(a instanceof kt)return new kt(1+a.value0|0,1+a.value1|0,e,t,n,a);throw new Error("Failed pattern match at Data.Map.Internal (line 680, column 5 - line 684, column 39): "+[a.constructor.name])}if(n instanceof kt){if(a instanceof At)return new kt(1+n.value0|0,1+n.value1|0,e,t,n,a);if(a instanceof kt)return new kt(1+function(){var d=n.value0>a.value0;return d?n.value0:a.value0}()|0,(1+n.value1|0)+a.value1|0,e,t,n,a);throw new Error("Failed pattern match at Data.Map.Internal (line 686, column 5 - line 690, column 68): "+[a.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 678, column 32 - line 690, column 68): "+[n.constructor.name])},yq=function(){return $e(zD.create)(oI.value)}(),Dq=function(e){return function(t){return function(n){var a=function(d){var r=!1,o;function l(u){if(u instanceof oI)return r=!0,n(void 0);if(u instanceof WD)return r=!0,t(u.value0,u.value1,u.value2);if(u instanceof zD){d=e(u.value1)(u.value0);return}throw new Error("Failed pattern match at Data.Map.Internal (line 918, column 8 - line 924, column 20): "+[u.constructor.name])}for(;!r;)o=l(d);return o};return a}}},ns=function(e){if(e instanceof At)return 0;if(e instanceof kt)return e.value1;throw new Error("Failed pattern match at Data.Map.Internal (line 616, column 8 - line 618, column 24): "+[e.constructor.name])},Sc=function(e){return function(t){return new kt(1,1,e,t,At.value,At.value)}},Sa=function(){var e=function(a){if(a instanceof At)return 0;if(a instanceof kt)return a.value0;throw new Error("Failed pattern match at Data.Map.Internal (line 735, column 12 - line 737, column 26): "+[a.constructor.name])},t=function(a,d,r,o,l,u,i){return u instanceof kt&&u.value0>e(i)?ea(u.value2,u.value3,ea(a,d,r,u.value4),ea(o,l,u.value5,i)):ea(o,l,ea(a,d,r,u),i)},n=function(a,d,r,o,l,u,i){return u instanceof kt&&e(l)<=u.value0?ea(u.value2,u.value3,ea(r,o,l,u.value4),ea(a,d,u.value5,i)):ea(r,o,l,ea(a,d,u,i))};return function(a,d,r,o){if(r instanceof At)return o instanceof At?Sc(a)(d):o instanceof kt&&o.value0>1?t(a,d,r,o.value2,o.value3,o.value4,o.value5):ea(a,d,r,o);if(r instanceof kt){if(o instanceof kt){if(o.value0>(r.value0+1|0))return t(a,d,r,o.value2,o.value3,o.value4,o.value5);if(r.value0>(o.value0+1|0))return n(a,d,r.value2,r.value3,r.value4,r.value5,o)}return o instanceof At&&r.value0>1?n(a,d,r.value2,r.value3,r.value4,r.value5,o):ea(a,d,r,o)}throw new Error("Failed pattern match at Data.Map.Internal (line 695, column 40 - line 716, column 34): "+[r.constructor.name])}}(),UD=wc("unsafeSplit","Data.Map.Internal",function(){return function(e,t,n){if(n instanceof At)return new j_(z.value,At.value,At.value);if(n instanceof kt){var a=e(t)(n.value2);if(a instanceof pe){var d=UD(771)(e,t,n.value4);return new j_(d.value0,d.value1,Sa(n.value2,n.value3,d.value2,n.value5))}if(a instanceof se){var d=UD(774)(e,t,n.value5);return new j_(d.value0,Sa(n.value2,n.value3,n.value4,d.value1),d.value2)}if(a instanceof qe)return new j_(new k(n.value3),n.value4,n.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 769, column 5 - line 777, column 30): "+[a.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 765, column 34 - line 777, column 30): "+[n.constructor.name])}}),VD=UD(764),aI=wc("unsafeSplitLast","Data.Map.Internal",function(){return function(e,t,n,a){if(a instanceof At)return new rI(e,t,n);if(a instanceof kt){var d=aI(757)(a.value2,a.value3,a.value4,a.value5);return new rI(d.value0,d.value1,Sa(e,t,n,d.value2))}throw new Error("Failed pattern match at Data.Map.Internal (line 754, column 37 - line 758, column 57): "+[a.constructor.name])}}),Cq=aI(753),GD=function(e,t){if(e instanceof At)return t;if(e instanceof kt){var n=Cq(e.value2,e.value3,e.value4,e.value5);return Sa(n.value0,n.value1,n.value2,t)}throw new Error("Failed pattern match at Data.Map.Internal (line 742, column 25 - line 746, column 38): "+[e.constructor.name,t.constructor.name])};var qD=wc("unsafeUnionWith","Data.Map.Internal",function(){return function(e,t,n,a){if(n instanceof At)return a;if(a instanceof At)return n;if(a instanceof kt){var d=VD(e,a.value2,n),r=qD(787)(e,t,d.value1,a.value4),o=qD(788)(e,t,d.value2,a.value5);if(d.value0 instanceof k)return Sa(a.value2,t(d.value0.value0)(a.value3),r,o);if(d.value0 instanceof z)return Sa(a.value2,a.value3,r,o);throw new Error("Failed pattern match at Data.Map.Internal (line 789, column 5 - line 793, column 46): "+[d.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 782, column 42 - line 793, column 46): "+[n.constructor.name,a.constructor.name])}}),bq=qD(781),JD=function(e){var t=Te(e);return function(n){return function(a){return function(d){return bq(t,n,a,d)}}}},K_=function(e){return JD(e)(ve)};var jD=function(e){var t=Te(e);return function(n){return function(a){var d=VD(t,n,a);return gq(function(r){return new Z(r,GD(d.value1,d.value2))})(d.value0)}}};var ta=function(e){var t=Te(e);return function(n){var a=function(d){var r=!1,o;function l(u){if(u instanceof At)return r=!0,z.value;if(u instanceof kt){var i=t(n)(u.value2);if(i instanceof pe){d=u.value4;return}if(i instanceof se){d=u.value5;return}if(i instanceof qe)return r=!0,new k(u.value3);throw new Error("Failed pattern match at Data.Map.Internal (line 281, column 7 - line 284, column 22): "+[i.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 278, column 8 - line 284, column 22): "+[u.constructor.name])}for(;!r;)o=l(d);return o};return a}};var wq=function(){var e=function(t){return function(n){var a=t,d=!1,r;function o(l,u){if(u instanceof At)return d=!0,l;if(u instanceof kt){if(u.value5 instanceof At){a=new WD(u.value2,u.value3,l),n=u.value4;return}a=new WD(u.value2,u.value3,new zD(u.value5,l)),n=u.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 929, column 13 - line 936, column 48): "+[u.constructor.name])}for(;!d;)r=o(a,n);return r}};return e}(),Sq=Dq(wq);var Eq=function(){var e=function(t,n,a){return new k(new Z(new Z(t,n),a))};return Sq(e)(function(t){return z.value})}(),Kl=function(e){var t=ma(e)(Eq);return function(n){return t(yq(n))}};var Jr=function(e){var t=Te(e);return function(n){return function(a){var d=function(r){if(r instanceof At)return Sc(n)(a);if(r instanceof kt){var o=t(n)(r.value2);if(o instanceof pe)return Sa(r.value2,r.value3,d(r.value4),r.value5);if(o instanceof se)return Sa(r.value2,r.value3,r.value4,d(r.value5));if(o instanceof qe)return new kt(r.value0,r.value1,n,a,r.value4,r.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 469, column 7 - line 472, column 35): "+[o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 466, column 8 - line 472, column 35): "+[r.constructor.name])};return d}}},Ql={map:function(e){var t=function(n){if(n instanceof At)return At.value;if(n instanceof kt)return new kt(n.value0,n.value1,n.value2,e(n.value3),t(n.value4),t(n.value5));throw new Error("Failed pattern match at Data.Map.Internal (line 145, column 10 - line 148, column 39): "+[n.constructor.name])};return t}};var Ji={foldr:function(e){return function(t){var n=wc("go","Data.Map.Internal",function(){return function(d,r){if(d instanceof At)return r;if(d instanceof kt)return n(170)(d.value4,e(d.value3)(n(170)(d.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 167, column 26 - line 170, column 43): "+[d.constructor.name])}}),a=n(167);return function(d){return a(d,t)}}},foldl:function(e){return function(t){var n=wc("go","Data.Map.Internal",function(){return function(d,r){if(r instanceof At)return d;if(r instanceof kt)return n(176)(e(n(176)(d,r.value4))(r.value3),r.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 173, column 26 - line 176, column 43): "+[r.constructor.name])}}),a=n(173);return function(d){return a(t,d)}}},foldMap:function(e){var t=st(e),n=De(e.Semigroup0());return function(a){var d=function(r){if(r instanceof At)return t;if(r instanceof kt)return n(d(r.value4))(n(a(r.value3))(d(r.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 179, column 10 - line 182, column 28): "+[r.constructor.name])};return d}}},KD={foldrWithIndex:function(e){return function(t){var n=wc("go","Data.Map.Internal",function(){return function(d,r){if(d instanceof At)return r;if(d instanceof kt)return n(190)(d.value4,e(d.value2)(d.value3)(n(190)(d.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 187, column 26 - line 190, column 45): "+[d.constructor.name])}}),a=n(187);return function(d){return a(d,t)}}},foldlWithIndex:function(e){return function(t){var n=wc("go","Data.Map.Internal",function(){return function(d,r){if(r instanceof At)return d;if(r instanceof kt)return n(196)(e(r.value2)(n(196)(d,r.value4))(r.value3),r.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 193, column 26 - line 196, column 45): "+[r.constructor.name])}}),a=n(193);return function(d){return a(t,d)}}},foldMapWithIndex:function(e){var t=st(e),n=De(e.Semigroup0());return function(a){var d=function(r){if(r instanceof At)return t;if(r instanceof kt)return n(d(r.value4))(n(a(r.value2)(r.value3))(d(r.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 199, column 10 - line 202, column 30): "+[r.constructor.name])};return d}},Foldable0:function(){return Ji}},iI=function(){return Ll(KD)(function(e){return function(t){return function(n){return new Ye(e,n)}}})(Ze.value)}();var Jd=function(){return mn(Ji)(Ye.create)(Ze.value)}();var Ya=function(e){var t=!1,n;function a(d){if(d instanceof At)return t=!0,z.value;if(d instanceof kt){if(d.value4 instanceof At)return t=!0,new k({key:d.value2,value:d.value3});e=d.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 359, column 11 - line 364, column 21): "+[d.constructor.name])}for(;!t;)n=a(e);return n};var rs=function(e){var t=!1,n;function a(d){if(d instanceof At)return t=!0,z.value;if(d instanceof kt){if(d.value5 instanceof At)return t=!0,new k({key:d.value2,value:d.value3});e=d.value5;return}throw new Error("Failed pattern match at Data.Map.Internal (line 350, column 11 - line 355, column 21): "+[d.constructor.name])}for(;!t;)n=a(e);return n};var vr=function(){return At.value}(),Xl=function(e){var t=Jr(e);return function(n){return dn(n)(function(a){return function(d){return t(d.value0)(d.value1)(a)}})(vr)}};var Za=function(e){var t=Te(e);return function(n){var a=function(d){if(d instanceof At)return At.value;if(d instanceof kt){var r=t(n)(d.value2);if(r instanceof pe)return Sa(d.value2,d.value3,a(d.value4),d.value5);if(r instanceof se)return Sa(d.value2,d.value3,d.value4,a(d.value5));if(r instanceof qe)return GD(d.value4,d.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 496, column 7 - line 499, column 43): "+[r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 493, column 8 - line 499, column 43): "+[d.constructor.name])};return a}};var os=function(e){var t=Te(e);return function(n){return function(a){return function(d){var r=VD(t,a,d),o=n(r.value0);if(o instanceof z)return GD(r.value1,r.value2);if(o instanceof k)return Sa(a,o.value0,r.value1,r.value2);throw new Error("Failed pattern match at Data.Map.Internal (line 512, column 3 - line 516, column 41): "+[o.constructor.name])}}}};var mr=function(){var e={},t="Pure",n="Throw",a="Catch",d="Sync",r="Async",o="Bind",l="Bracket",u="Fork",i="Sequential",s="Map",f="Apply",h="Alt",p="Cons",c="Resume",_="Release",v="Finalizer",m="Finalized",y="Forked",C="Fiber",S="Thunk";function D(B,Q,O,W){this.tag=B,this._1=Q,this._2=O,this._3=W}function g(B){var Q=function(O,W,U){return new D(B,O,W,U)};return Q.tag=B,Q}function b(B){return new D(t,void 0)}function x(B){try{B()}catch(Q){setTimeout(function(){throw Q},0)}}function E(B,Q,O){try{return Q(O())}catch(W){return B(W)}}function T(B,Q,O){try{return Q(O)()}catch(W){return O(B(W))(),b}}var M=function(){var B=1024,Q=0,O=0,W=new Array(B),U=!1;function N(){var te;for(U=!0;Q!==0;)Q--,te=W[O],W[O]=void 0,O=(O+1)%B,te();U=!1}return{isDraining:function(){return U},enqueue:function(te){var J,ye;Q===B&&(ye=U,N(),U=ye),W[(O+Q)%B]=te,Q++,U||N()}}}();function w(B){var Q={},O=0,W=0;return{register:function(U){var N=O++;U.onComplete({rethrow:!0,handler:function(te){return function(){W--,delete Q[N]}}})(),Q[N]=U,W++},isEmpty:function(){return W===0},killAll:function(U,N){return function(){if(W===0)return N();var te=0,J={};function ye(we){J[we]=Q[we].kill(U,function(ce){return function(){delete J[we],te--,B.isLeft(ce)&&B.fromLeft(ce)&&setTimeout(function(){throw B.fromLeft(ce)},0),te===0&&N()}})()}for(var Ae in Q)Q.hasOwnProperty(Ae)&&(te++,ye(Ae));return Q={},O=0,W=0,function(we){return new D(d,function(){for(var ce in J)J.hasOwnProperty(ce)&&J[ce]()})}}}}}var F=0,L=1,R=2,A=3,I=4,$=5,H=6;function P(B,Q,O){var W=0,U=F,N=O,te=null,J=null,ye=null,Ae=null,we=null,ce=0,xe=0,Rt=null,cn=!0;function Jt(fe){for(var ae,j,ie;;)switch(ae=null,j=null,ie=null,U){case R:U=L;try{N=ye(N),Ae===null?ye=null:(ye=Ae._1,Ae=Ae._2)}catch(ze){U=$,te=B.left(ze),N=null}break;case A:B.isLeft(N)?(U=$,te=N,N=null):ye===null?U=$:(U=R,N=B.fromRight(N));break;case L:switch(N.tag){case o:ye&&(Ae=new D(p,ye,Ae)),ye=N._2,U=L,N=N._1;break;case t:ye===null?(U=$,N=B.right(N._1)):(U=R,N=N._1);break;case d:U=A,N=E(B.left,B.right,N._1);break;case r:U=I,N=T(B.left,N._1,function(ze){return function(){W===fe&&(W++,M.enqueue(function(){W===fe+1&&(U=A,N=ze,Jt(W))}))}});return;case n:U=$,te=B.left(N._1),N=null;break;case a:ye===null?we=new D(p,N,we,J):we=new D(p,N,new D(p,new D(c,ye,Ae),we,J),J),ye=null,Ae=null,U=L,N=N._1;break;case l:ce++,ye===null?we=new D(p,N,we,J):we=new D(p,N,new D(p,new D(c,ye,Ae),we,J),J),ye=null,Ae=null,U=L,N=N._1;break;case u:U=A,ae=P(B,Q,N._2),Q&&Q.register(ae),N._1&&ae.run(),N=B.right(ae);break;case i:U=L,N=G(B,Q,N._1);break}break;case $:if(ye=null,Ae=null,we===null)U=H,N=J||te||N;else switch(ae=we._3,ie=we._1,we=we._2,ie.tag){case a:J&&J!==ae&&ce===0?U=$:te&&(U=L,N=ie._2(B.fromLeft(te)),te=null);break;case c:J&&J!==ae&&ce===0||te?U=$:(ye=ie._1,Ae=ie._2,U=R,N=B.fromRight(N));break;case l:ce--,te===null&&(j=B.fromRight(N),we=new D(p,new D(_,ie._2,j),we,ae),(J===ae||ce>0)&&(U=L,N=ie._3(j)));break;case _:we=new D(p,new D(m,N,te),we,J),U=L,J&&J!==ae&&ce===0?N=ie._1.killed(B.fromLeft(J))(ie._2):te?N=ie._1.failed(B.fromLeft(te))(ie._2):N=ie._1.completed(B.fromRight(N))(ie._2),te=null,ce++;break;case v:ce++,we=new D(p,new D(m,N,te),we,J),U=L,N=ie._1;break;case m:ce--,U=$,N=ie._1,te=ie._2;break}break;case H:for(var he in Rt)Rt.hasOwnProperty(he)&&(cn=cn&&Rt[he].rethrow,x(Rt[he].handler(N)));Rt=null,J&&te?setTimeout(function(){throw B.fromLeft(te)},0):B.isLeft(N)&&cn&&setTimeout(function(){if(cn)throw B.fromLeft(N)},0);return;case F:U=L;break;case I:return}}function tt(fe){return function(){if(U===H)return cn=cn&&fe.rethrow,fe.handler(N)(),function(){};var ae=xe++;return Rt=Rt||{},Rt[ae]=fe,function(){Rt!==null&&delete Rt[ae]}}}function le(fe,ae){return function(){if(U===H)return ae(B.right(void 0))(),function(){};var j=tt({rethrow:!1,handler:function(){return ae(B.right(void 0))}})();switch(U){case F:J=B.left(fe),U=H,N=J,Jt(W);break;case I:J===null&&(J=B.left(fe)),ce===0&&(U===I&&(we=new D(p,new D(v,N(fe)),we,J)),U=$,N=null,te=null,Jt(++W));break;default:J===null&&(J=B.left(fe)),ce===0&&(U=$,N=null,te=null)}return j}}function ge(fe){return function(){var ae=tt({rethrow:!1,handler:fe})();return U===F&&Jt(W),ae}}return{kill:le,join:ge,onComplete:tt,isSuspended:function(){return U===F},run:function(){U===F&&(M.isDraining()?Jt(W):M.enqueue(function(){Jt(W)}))}}}function q(B,Q,O,W){var U=0,N={},te=0,J={},ye=new Error("[ParAff] Early exit"),Ae=null,we=e;function ce(tt,le,ge){var fe=le,ae=null,j=null,ie=0,he={},ze,at;e:for(;;)switch(ze=null,fe.tag){case y:if(fe._3===e&&(ze=N[fe._1],he[ie++]=ze.kill(tt,function(gt){return function(){ie--,ie===0&&ge(gt)()}})),ae===null)break e;fe=ae._2,j===null?ae=null:(ae=j._1,j=j._2);break;case s:fe=fe._2;break;case f:case h:ae&&(j=new D(p,ae,j)),ae=fe,fe=fe._1;break}if(ie===0)ge(B.right(void 0))();else for(at=0,ze=ie;at<ze;at++)he[at]=he[at]();return he}function xe(tt,le,ge){var fe,ae,j,ie,he,ze;for(B.isLeft(tt)?(fe=tt,ae=null):(ae=tt,fe=null);;){if(j=null,ie=null,he=null,ze=null,Ae!==null)return;if(le===null){W(fe||ae)();return}if(le._3!==e)return;switch(le.tag){case s:fe===null?(le._3=B.right(le._1(B.fromRight(ae))),ae=le._3):le._3=fe;break;case f:if(j=le._1._3,ie=le._2._3,fe){if(le._3=fe,he=!0,ze=te++,J[ze]=ce(ye,fe===j?le._2:le._1,function(){return function(){delete J[ze],he?he=!1:ge===null?xe(fe,null,null):xe(fe,ge._1,ge._2)}}),he){he=!1;return}}else{if(j===e||ie===e)return;ae=B.right(B.fromRight(j)(B.fromRight(ie))),le._3=ae}break;case h:if(j=le._1._3,ie=le._2._3,j===e&&B.isLeft(ie)||ie===e&&B.isLeft(j))return;if(j!==e&&B.isLeft(j)&&ie!==e&&B.isLeft(ie))fe=ae===j?ie:j,ae=null,le._3=fe;else if(le._3=ae,he=!0,ze=te++,J[ze]=ce(ye,ae===j?le._2:le._1,function(){return function(){delete J[ze],he?he=!1:ge===null?xe(ae,null,null):xe(ae,ge._1,ge._2)}}),he){he=!1;return}break}ge===null?le=null:(le=ge._1,ge=ge._2)}}function Rt(tt){return function(le){return function(){delete N[tt._1],tt._3=le,xe(le,tt._2._1,tt._2._2)}}}function cn(){var tt=L,le=O,ge=null,fe=null,ae,j;e:for(;;)switch(ae=null,j=null,tt){case L:switch(le.tag){case s:ge&&(fe=new D(p,ge,fe)),ge=new D(s,le._1,e,e),le=le._2;break;case f:ge&&(fe=new D(p,ge,fe)),ge=new D(f,e,le._2,e),le=le._1;break;case h:ge&&(fe=new D(p,ge,fe)),ge=new D(h,e,le._2,e),le=le._1;break;default:j=U++,tt=$,ae=le,le=new D(y,j,new D(p,ge,fe),e),ae=P(B,Q,ae),ae.onComplete({rethrow:!1,handler:Rt(le)})(),N[j]=ae,Q&&Q.register(ae)}break;case $:if(ge===null)break e;ge._1===e?(ge._1=le,tt=L,le=ge._2,ge._2=e):(ge._2=le,le=ge,fe===null?ge=null:(ge=fe._1,fe=fe._2))}for(we=le,j=0;j<U;j++)N[j].run()}function Jt(tt,le){Ae=B.left(tt);var ge;for(var fe in J)if(J.hasOwnProperty(fe)){ge=J[fe];for(fe in ge)ge.hasOwnProperty(fe)&&ge[fe]()}J=null;var ae=ce(tt,we,le);return function(j){return new D(r,function(ie){return function(){for(var he in ae)ae.hasOwnProperty(he)&&ae[he]();return b}})}}return cn(),function(tt){return new D(r,function(le){return function(){return Jt(tt,le)}})}}function G(B,Q,O){return new D(r,function(W){return function(){return q(B,Q,O,W)}})}return D.EMPTY=e,D.Pure=g(t),D.Throw=g(n),D.Catch=g(a),D.Sync=g(d),D.Async=g(r),D.Bind=g(o),D.Bracket=g(l),D.Fork=g(u),D.Seq=g(i),D.ParMap=g(s),D.ParApply=g(f),D.ParAlt=g(h),D.Fiber=P,D.Supervisor=w,D.Scheduler=M,D.nonCanceler=b,D}(),uI=mr.Pure,sI=mr.Throw;function cI(e){return function(t){return mr.Catch(e,t)}}function lI(e){return function(t){return t.tag===mr.Pure.tag?mr.Pure(e(t._1)):mr.Bind(t,function(n){return mr.Pure(e(n))})}}function fI(e){return function(t){return mr.Bind(e,t)}}function QD(e){return function(t){return mr.Fork(e,t)}}var dI=mr.Sync;function pI(e){return function(t){return mr.ParMap(e,t)}}function hI(e){return function(t){return mr.ParApply(e,t)}}var Ea=mr.Async;function Q_(e){return function(t){return function(n){return mr.Bracket(e,t,n)}}}function _I(e,t){return function(){return mr.Fiber(e,null,t)}}var vI=function(){function e(n,a){return n===0&&typeof setImmediate<"u"?setImmediate(a):setTimeout(a,n)}function t(n,a){return n===0&&typeof clearImmediate<"u"?clearImmediate(a):clearTimeout(a)}return function(n,a){return mr.Async(function(d){return function(){var r=e(a,d(n()));return function(){return mr.Sync(function(){return n(t(a,r))})}}})}}(),mI=mr.Seq;var Fq=V(Fu);var XD=function(e){return e};var YD=function(e){return e};var X_=function(e){return function(t){return e(t)}},Y_=function(e){var t=V(e);return{map:function(n){return X_(t(Fq(n)))}}};var yI=function(e){return{Applicative0:function(){return jd(e)},Bind1:function(){return Z_(e)}}},Z_=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return{bind:function(a){return function(d){return t(a)(En(function(r){return n(We.create(r))})(function(r){var o=d(r);return o}))}},Apply0:function(){return ZD(e)}}},ZD=function(e){var t=Y_(e.Bind1().Apply0().Functor0());return{apply:Sr(yI(e)),Functor0:function(){return t}}},jd=function(e){return{pure:function(){var t=X(e.Applicative0());return function(n){return XD(t(Oe.create(n)))}}(),Apply0:function(){return ZD(e)}}};var DI=function(e){var t=yI(e);return{throwError:function(){var n=X(e.Applicative0());return function(a){return XD(n(We.create(a)))}}(),Monad0:function(){return t}}};var CI=function(e){var t=De(e);return function(n){var a=n.Bind1(),d=ee(a),r=X(n.Applicative0()),o=Y_(a.Apply0().Functor0());return{alt:function(l){return function(u){return d(l)(function(i){if(i instanceof Oe)return r(new Oe(i.value0));if(i instanceof We)return d(u)(function(s){if(s instanceof Oe)return r(new Oe(s.value0));if(s instanceof We)return r(new We(t(i.value0)(s.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[s.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[i.constructor.name])})}},Functor0:function(){return o}}}};var Lq=V(Dt);var eC=function(e){return e},bI=function(e){return e};var ev={lift:function(e){var t=c0(e)(k.create);return function(n){return eC(t(n))}}},Aq=wt(ev);var Iq=function(e){var t=V(e);return{map:function(n){return function(a){return t(Lq(n))(a)}}}},tC=function(e){return{Applicative0:function(){return oC(e)},Bind1:function(){return nC(e)}}},nC=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return{bind:function(a){return function(d){return t(a)(function(r){if(r instanceof z)return n(z.value);if(r instanceof k){var o=d(r.value0);return o}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[r.constructor.name])})}},Apply0:function(){return rC(e)}}},rC=function(e){var t=Iq(e.Bind1().Apply0().Functor0());return{apply:Sr(tC(e)),Functor0:function(){return t}}},oC=function(e){return{pure:function(){var t=X(e.Applicative0());return function(n){return eC(t(k.create(n)))}}(),Apply0:function(){return rC(e)}}};var wI=function(e){var t=yn(e),n=e.Monad0(),a=ee(n.Bind1()),d=X(n.Applicative0()),r=tC(n);return{tailRecM:function(o){var l=t(function(u){var i=o(u);return a(i)(function(s){return d(function(){if(s instanceof z)return new Bt(z.value);if(s instanceof k&&s.value0 instanceof Pt)return new Pt(s.value0.value0);if(s instanceof k&&s.value0 instanceof Bt)return new Bt(new k(s.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[s.constructor.name])}())})});return function(u){return eC(l(u))}},Monad0:function(){return r}}},SI=function(e){var t=e.Monad0(),n=Aq(t),a=lo(e),d=tC(t);return{state:function(r){return n(a(r))},Monad0:function(){return d}}};var MI=function(e){return e};var Ta=function(e){return e};var Yl={lift:function(e){return function(t){return MI(ve(t))}}},$q=wt(Yl),xI=function(e){return function(t){return function(n){return e(t(n))}}},Hq=function(e){return{map:function(){var t=V(e);return function(n){return xI(t(n))}}()}};var iC=function(e){var t=ht(e),n=Hq(e.Functor0());return{apply:function(a){return function(d){return function(r){return t(a(r))(d(r))}}},Functor0:function(){return n}}},ji=function(e){var t=ee(e),n=iC(e.Apply0());return{bind:function(a){return function(d){return function(r){return t(a(r))(function(o){var l=d(o);return l(r)})}}},Apply0:function(){return n}}};var Kd=function(e){var t=iC(e.Apply0());return{pure:function(){var n=X(e);return function(a){return MI(ve(n(a)))}}(),Apply0:function(){return t}}},nv=function(e){var t=Kd(e.Applicative0()),n=ji(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},is=function(e){var t=nv(e);return{ask:X(e.Applicative0()),Monad0:function(){return t}}};var ei=function(e){var t=e.Monad0(),n=nv(t);return{liftEffect:function(){var a=$q(t),d=Le(e);return function(r){return a(d(r))}}(),Monad0:function(){return n}}},us=function(e){var t=e.Monad0(),n=Sn(t.Bind1()),a=X(t.Applicative0()),d=yn(e),r=nv(t);return{tailRecM:function(o){return function(l){var u=function(i){return function(s){var f=o(s);return n(a)(f(i))}};return function(i){return d(u(i))(l)}}},Monad0:function(){return r}}};var Ec=function(e){return e.sequential},Qi=function(e){return e.parallel};var kq=de(_e),Nq=function(e){var t=Ec(e),n=Qi(e);return function(a){var d=ct(a);return function(r){var o=d(r);return function(l){var u=o(function(i){return n(l(i))});return function(i){return t(u(i))}}}}};var Zl=function(e){var t=Nq(e);return function(n){var a=t(n);return function(d){return a(d)(kq)}}};var Tc=function(e){return e()};var II=function(e){return e()};var RI=function(e){throw new Error(e)};var $I=function(){return RI};var zq=$I(),Vq=II,av=function(e){return Vq(function(){return zq(e)})};var Gq=function(e,t,n){var a=0,d;return function(r){if(a===2)return d;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return a=1,d=n(),a=2,d}},Jq=X(on),sC=ut(ke),OI=V(ke);var jq=function(e){return e},PI=QD(!1);var Kq={map:pI},$r={map:lI},Qq=V($r),cC=QD(!0),Xq=function(){var e=function(a){if(a instanceof Oe)return a.value0;if(a instanceof We)return av("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[a.constructor.name])},t=function(a){if(a instanceof We)return a.value0;if(a instanceof Oe)return av("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[a.constructor.name])},n=function(a){if(a instanceof We)return!0;if(a instanceof Oe)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[a.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:We.create,right:Oe.create}}(),kI=function(e){return _I(Xq,e)},NI=function(e){return function(){var n=kI(e)();return n.run(),n}},lC=function(e){return sC(NI(e))};var fC=function(e){return vI(Oe.create,e)},BI=function(e){return function(t){return Q_(e)({killed:ve(t),failed:ve(t),completed:ve(t)})}},WI={apply:hI,Functor0:function(){return Kq}};var ti={Applicative0:function(){return jr},Bind1:function(){return Qt}},Qt={bind:fI,Apply0:function(){return dC(0)}},jr={pure:uI,Apply0:function(){return dC(0)}},dC=Gq("applyAff","Effect.Aff",function(){return{apply:Sr(ti),Functor0:function(){return $r}}}),Yq=dC(73),ef=X(jr),UI=ee(Qt);var Zq=Sn(Qt);var Qd=function(e){return function(t){return BI(ef(void 0))(ve(e))(ve(t))}},pC=function(e){return BI(e)(ve(ef(void 0)))(ef)};var ss={parallel:ne,sequential:mI,Apply0:function(){return Yq},Apply1:function(){return WI}},e8=Qi(ss),Mc={pure:function(e){return e8(ef(e))},Apply0:function(){return WI}};var t8=Zl(ss)(Mc)(vt);var n8={append:function(e){return function(t){return function(n){return t8([e(n),t(n)])}}}};var Cn={liftEffect:dI,Monad0:function(){return ti}},iv=Le(Cn),xc=function(e){return jq(ve(iv(e)))},Xd=function(e){return Ea(function(t){return OI(xc)(e.join(t))})},qI={map:function(e){return function(t){return Tc(kI(Qq(e)(Xd(t))))}}};var Yd=function(e){return function(t){return UI(iv(t.isSuspended))(function(n){return n?iv(sC(t.kill(e,ve(Jq(void 0))))):Ea(function(a){return OI(xc)(t.kill(e,a))})})}};var tf={throwError:sI,Monad0:function(){return ti}},zI={catchError:cI,MonadThrow0:function(){return tf}},VI=qd(zI);var GI=VI,r8=function(e){return function(t){return NI(Zq(function(n){return iv(e(n))})(VI(t)))}},Zd=function(e){return function(t){return sC(r8(e)(t))}};var Xi={tailRecM:function(e){var t=function(n){return UI(e(n))(function(a){if(a instanceof Bt)return ef(a.value0);if(a instanceof Pt)return t(a.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[a.constructor.name])})};return t},Monad0:function(){return ti}};var hC=ve(ef(void 0)),JI={mempty:hC,Semigroup0:function(){return n8}};var s8=function(e){var t=V(e);return{map:function(n){return function(a){return function(d){return t(function(r){return new Z(n(r.value0),r.value1)})(a(d))}}}}};var vC=function(e){return{Applicative0:function(){return ep(e)},Bind1:function(){return mC(e)}}},mC=function(e){var t=ee(e.Bind1());return{bind:function(n){return function(a){return function(d){return t(n(d))(function(r){var o=a(r.value0);return o(r.value1)})}}},Apply0:function(){return KI(e)}}},KI=function(e){var t=s8(e.Bind1().Apply0().Functor0());return{apply:Sr(vC(e)),Functor0:function(){return t}}},ep=function(e){var t=X(e.Applicative0());return{pure:function(n){return function(a){return t(new Z(n,a))}},Apply0:function(){return KI(e)}}};var QI=function(e){var t=e.Monad0(),n=ee(t.Bind1()),a=X(t.Applicative0()),d=yn(e),r=vC(t);return{tailRecM:function(o){return function(l){var u=function(i){var s=o(i.value0);return n(s(i.value1))(function(f){return a(function(){if(f.value0 instanceof Pt)return new Pt(new Z(f.value0.value0,f.value1));if(f.value0 instanceof Bt)return new Bt(new Z(f.value0.value0,f.value1));throw new Error("Failed pattern match at Control.Monad.State.Trans (line 87, column 16 - line 89, column 40): "+[f.value0.constructor.name])}())})};return function(i){return d(u)(new Z(l,i))}}},Monad0:function(){return r}}},uv=function(e){var t=X(e.Applicative0()),n=vC(e);return{state:function(a){return function(d){return t(a(d))}},Monad0:function(){return n}}};var c8=wt(Yl);var cs={liftAff:de(_e),MonadEffect0:function(){return Cn}},bn=function(e){return e.liftAff};var cv=function(e){var t=e.MonadEffect0(),n=ei(t);return{liftAff:function(){var a=c8(t.Monad0()),d=bn(e);return function(r){return a(d(r))}}(),MonadEffect0:function(){return n}}};var ni=function(e){return function(){console.log(e)}},tp=function(e){return function(){console.warn(e)}};var nR=function(e){var t=Le(e);return function(n){return t(ni(n))}};var y8=Mt(Gn),D8=Kt(Wu);var rp=D8(y8("background-color"));var x8=V(Dt);var gC=function(e){if(e instanceof Ze)return z.value;if(e instanceof Ye)return new k({head:e.value0,tail:e.value1});throw new Error("Failed pattern match at Data.List (line 259, column 1 - line 259, column 66): "+[e.constructor.name])},lv=function(e){return ma(e)(function(t){return x8(function(n){return new Z(n.head,n.tail)})(gC(t))})};var Yi=function(){var e=function(t){return function(n){var a=t,d=!1,r;function o(l,u){if(u instanceof Ze)return d=!0,l;if(u instanceof Ye){a=new Ye(u.value0,l),n=u.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[l.constructor.name,u.constructor.name])}for(;!d;)r=o(a,n);return r}};return e(Ze.value)}();var oR=function(e){return e instanceof Ze};var fv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var aR=function(e){var t=!1,n;function a(d){if(d.value0 instanceof Ze&&d.value1 instanceof Ze)return t=!0,z.value;if(d.value0 instanceof Ze){e=new fv(Yi(d.value1),Ze.value);return}if(d.value0 instanceof Ye)return t=!0,new k(new Z(d.value0.value0,new fv(d.value0.value1,d.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[d.constructor.name])}for(;!t;)n=a(e);return n},iR=function(e){return function(t){return new fv(e.value0,new Ye(t,e.value1))}};var uR=function(e){return e.value0 instanceof Ze&&e.value1 instanceof Ze};var sR=function(){return new fv(Ze.value,Ze.value)}();var nf=function(){function e(){}return e.value=new e,e}(),dv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var cR=function(e){return function(t){if(e instanceof nf)return t;if(t instanceof nf)return e;if(e instanceof dv)return new dv(e.value0,iR(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},A8=function(e){return function(t){return function(n){var a=function(r){return function(o){return function(l){var u=r,i=o,s=!1,f;function h(p,c,_){if(_ instanceof Ze)return s=!0,c;if(_ instanceof Ye){u=p,i=p(c)(_.value0),l=_.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[p.constructor.name,c.constructor.name,_.constructor.name])}for(;!s;)f=h(u,i,l);return f}}},d=function(r){return function(o){var l=r,u=!1,i;function s(f,h){var p=aR(f);if(p instanceof z)return u=!0,a(function(c){return function(_){return _(c)}})(t)(h);if(p instanceof k){l=p.value0.value1,o=new Ye(e(p.value0.value0),h);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[p.constructor.name])}for(;!u;)i=s(l,o);return i}};return d(n)(Ze.value)}}},lR=function(e){if(e instanceof nf)return z.value;if(e instanceof dv)return new k(new Z(e.value0,function(){var t=uR(e.value1);return t?nf.value:A8(cR)(nf.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var fR=function(){return nf.value}(),dR=cR;var pR={append:dR};var hR=function(e){return function(t){return dR(e)(new dv(t,sR))}};var R8=function(e,t,n){var a=0,d;return function(r){if(a===2)return d;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return a=1,d=n(),a=2,d}},$8=De(pR);var yC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),op=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ap=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_R=function(e){var t=!1,n;function a(d){var r=function(u){return u},o=function(u){return function(i){return new yC(u.value0,$8(u.value1)(i))}};if(d.value0 instanceof op){var l=lR(d.value1);if(l instanceof z)return t=!0,new op(d.value0.value0);if(l instanceof k){e=o(r(l.value0.value0)(d.value0.value0))(l.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[l.constructor.name])}if(d.value0 instanceof ap)return t=!0,new ap(d.value0.value0,function(u){return o(d.value0.value1(u))(d.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[d.value0.constructor.name])}for(;!t;)n=a(e);return n},ra=function(e){var t=V(e);return function(n){var a=n.Monad0(),d=V(a.Bind1().Apply0().Functor0()),r=X(a.Applicative0()),o=yn(n);return function(l){var u=function(i){var s=_R(i);if(s instanceof op)return d(Bt.create)(r(s.value0));if(s instanceof ap)return d(Pt.create)(l(t(s.value1)(s.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[s.constructor.name])};return o(u)}}};var vR=function(e){return new yC(e,fR)};var rf={Applicative0:function(){return gr},Bind1:function(){return fr}},ri={map:function(e){return function(t){return Sn(fr)(function(){var n=X(gr);return function(a){return n(e(a))}}())(t)}}},fr={bind:function(e){return function(t){return new yC(e.value0,hR(e.value1)(t))}},Apply0:function(){return DC(0)}},gr={pure:function(e){return vR(op.create(e))},Apply0:function(){return DC(0)}},DC=R8("freeApply","Control.Monad.Free",function(){return{apply:Sr(rf),Functor0:function(){return ri}}}),ip=DC(77);var H8=X(gr);var dt=function(e){return vR(new ap(e,function(t){return H8(t)}))};var mR=function(e){var t=e.Monad0(),n=V(t.Bind1().Apply0().Functor0()),a=X(t.Applicative0()),d=yn(e);return function(r){var o=function(l){var u=_R(l);if(u instanceof op)return n(Bt.create)(a(u.value0));if(u instanceof ap)return n(function(i){return Pt.create(u.value1(i))})(r(u.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[u.constructor.name])};return d(o)}};function pv(e){return function(){return e.getContext("2d")}}function up(e){return function(){return e.width}}function sp(e){return function(){return e.height}}function cp(e){return function(t){return function(){e.width=t}}}function lp(e){return function(t){return function(){e.height=t}}}function CC(e){return function(){return e.toDataURL()}}function bC(e){return function(t){return function(){e.lineWidth=t}}}function wC(e){return function(t){return function(){e.setLineDash(t)}}}function SC(e){return function(t){return function(){e.fillStyle=t}}}function EC(e){return function(t){return function(){e.strokeStyle=t}}}function TC(e){return function(t){return function(){e.shadowColor=t}}}function MC(e){return function(t){return function(){e.shadowBlur=t}}}function xC(e){return function(t){return function(){e.shadowOffsetX=t}}}function FC(e){return function(t){return function(){e.shadowOffsetY=t}}}function LC(e){return function(t){return function(){e.miterLimit=t}}}function hv(e){return function(t){return function(){e.lineCap=t}}}function _v(e){return function(t){return function(){e.lineJoin=t}}}function gR(e){return function(t){return function(){e.globalCompositeOperation=t}}}function AC(e){return function(t){return function(){e.globalAlpha=t}}}function vv(e){return function(){e.beginPath()}}function mv(e){return function(){e.stroke()}}function gv(e){return function(){e.fill()}}function IC(e){return function(){e.clip()}}function RC(e){return function(t){return function(n){return function(){e.lineTo(t,n)}}}}function $C(e){return function(t){return function(n){return function(){e.moveTo(t,n)}}}}function HC(e){return function(){e.closePath()}}function OC(e){return function(t){return function(){e.arc(t.x,t.y,t.radius,t.start,t.end,t.useCounterClockwise)}}}function PC(e){return function(t){return function(){e.rect(t.x,t.y,t.width,t.height)}}}function kC(e){return function(t){return function(){e.fillRect(t.x,t.y,t.width,t.height)}}}function NC(e){return function(t){return function(){e.strokeRect(t.x,t.y,t.width,t.height)}}}function BC(e){return function(t){return function(){e.clearRect(t.x,t.y,t.width,t.height)}}}function WC(e){return function(t){return function(){e.scale(t.scaleX,t.scaleY)}}}function UC(e){return function(t){return function(){e.rotate(t)}}}function qC(e){return function(t){return function(){e.translate(t.translateX,t.translateY)}}}function zC(e){return function(t){return function(){e.transform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function VC(e){return function(t){return function(){e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function yR(e){return function(){return e.textAlign}}function DR(e){return function(t){return function(){e.textAlign=t}}}function CR(e){return function(){return e.textBaseline}}function bR(e){return function(t){return function(){e.textBaseline=t}}}function GC(e){return function(){return e.font}}function JC(e){return function(t){return function(){e.font=t}}}function jC(e){return function(t){return function(n){return function(a){return function(){e.fillText(t,n,a)}}}}}function KC(e){return function(t){return function(n){return function(a){return function(){e.strokeText(t,n,a)}}}}}function QC(e){return function(t){return function(){return e.measureText(t)}}}function yv(e){return function(){e.save()}}function Dv(e){return function(){e.restore()}}function XC(e){return function(t){return function(n){return function(a){return function(d){return function(){return e.getImageData(t,n,a,d)}}}}}}function YC(e){return function(t){return function(n){return function(a){return function(d){return function(r){return function(o){return function(l){return function(){e.putImageData(t,n,a,d,r,o,l)}}}}}}}}}function ZC(e){return function(t){return function(n){return function(a){return function(){e.putImageData(t,n,a)}}}}}function eb(e){return function(t){return function(n){return function(){return e.createImageData(t,n)}}}}function tb(e){return function(t){return function(n){return function(a){return function(){e.drawImage(t,n,a)}}}}}function nb(e){return function(t){return function(n){return function(a){return function(d){return function(r){return function(){e.drawImage(t,n,a,d,r)}}}}}}}function rb(e){return function(t){return function(n){return function(a){return function(d){return function(r){return function(o){return function(l){return function(u){return function(i){return function(){e.drawImage(t,n,a,d,r,o,l,u,i)}}}}}}}}}}}function wR(e){return function(t){return function(n){return function(){return e.createPattern(t,n)}}}}function ob(e){return function(t){return function(){e.fillStyle=t}}}function ab(e){return function(t){return function(){return e.createLinearGradient(t.x0,t.y0,t.x1,t.y1)}}}function ib(e){return function(t){return function(){return e.createRadialGradient(t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)}}}function ub(e){return function(t){return function(){e.fillStyle=t}}}function sb(e){return function(t){return function(){e.quadraticCurveTo(t.cpx,t.cpy,t.x,t.y)}}}function cb(e){return function(t){return function(){e.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x,t.y)}}}var P8=function(e){return Tc(go(e))},lb=function(e){return P8(ur(e))};var SR=V(ke),B8=qr(y0),ER=function(){function e(){}return e.value=new e,e}(),TR=function(){function e(){}return e.value=new e,e}(),MR=function(){function e(){}return e.value=new e,e}(),xR=function(){function e(){}return e.value=new e,e}(),FR=function(){function e(){}return e.value=new e,e}(),LR=function(){function e(){}return e.value=new e,e}(),AR=function(){function e(){}return e.value=new e,e}(),IR=function(){function e(){}return e.value=new e,e}(),RR=function(){function e(){}return e.value=new e,e}(),$R=function(){function e(){}return e.value=new e,e}(),HR=function(){function e(){}return e.value=new e,e}(),W8=function(){function e(){}return e.value=new e,e}(),U8=function(){function e(){}return e.value=new e,e}(),q8=function(){function e(){}return e.value=new e,e}(),z8=function(){function e(){}return e.value=new e,e}(),V8=function(){function e(){}return e.value=new e,e}(),G8=function(){function e(){}return e.value=new e,e}(),J8=function(){function e(){}return e.value=new e,e}(),j8=function(){function e(){}return e.value=new e,e}(),K8=function(){function e(){}return e.value=new e,e}(),Q8=function(){function e(){}return e.value=new e,e}(),X8=function(){function e(){}return e.value=new e,e}(),Y8=function(){function e(){}return e.value=new e,e}(),Z8=function(){function e(){}return e.value=new e,e}(),e7=function(){function e(){}return e.value=new e,e}(),t7=function(){function e(){}return e.value=new e,e}(),n7=function(){function e(){}return e.value=new e,e}(),r7=function(){function e(){}return e.value=new e,e}(),o7=function(){function e(){}return e.value=new e,e}(),a7=function(){function e(){}return e.value=new e,e}(),i7=function(){function e(){}return e.value=new e,e}(),u7=function(){function e(){}return e.value=new e,e}(),s7=function(){function e(){}return e.value=new e,e}(),c7=function(){function e(){}return e.value=new e,e}(),l7=function(){function e(){}return e.value=new e,e}(),f7=function(){function e(){}return e.value=new e,e}(),d7=function(){function e(){}return e.value=new e,e}(),p7=function(){function e(){}return e.value=new e,e}(),h7=function(){function e(){}return e.value=new e,e}(),_7=function(){function e(){}return e.value=new e,e}(),v7=function(){function e(){}return e.value=new e,e}(),m7=function(){function e(){}return e.value=new e,e}(),g7=function(){function e(){}return e.value=new e,e}(),y7=function(){function e(){}return e.value=new e,e}(),D7=function(){function e(){}return e.value=new e,e}(),C7=function(){function e(){}return e.value=new e,e}(),b7=function(){function e(){}return e.value=new e,e}();var OR=function(e){var t=function(n){return n==="top"?ER.value:n==="hanging"?TR.value:n==="middle"?MR.value:n==="alphabetic"?xR.value:n==="ideographic"?FR.value:n==="bottom"?LR.value:lb("invalid TextBaseline: "+n)};return SR(t)(CR(e))},PR=function(e){var t=function(n){return n==="left"?AR.value:n==="right"?IR.value:n==="center"?RR.value:n==="start"?$R.value:n==="end"?HR.value:lb("invalid TextAlign: "+n)};return SR(t)(yR(e))};var kR=function(e){return function(t){var n=function(a){if(a instanceof ER)return"top";if(a instanceof TR)return"hanging";if(a instanceof MR)return"middle";if(a instanceof xR)return"alphabetic";if(a instanceof FR)return"ideographic";if(a instanceof LR)return"bottom";throw new Error("Failed pattern match at Graphics.Canvas (line 577, column 5 - line 577, column 33): "+[a.constructor.name])};return bR(e)(n(t))}},NR=function(e){return function(t){var n=function(a){if(a instanceof AR)return"left";if(a instanceof IR)return"right";if(a instanceof RR)return"center";if(a instanceof $R)return"start";if(a instanceof HR)return"end";throw new Error("Failed pattern match at Graphics.Canvas (line 531, column 5 - line 531, column 32): "+[a.constructor.name])};return DR(e)(n(t))}},BR=function(e){return function(t){if(t instanceof V8)return _v(e)("bevel");if(t instanceof G8)return _v(e)("round");if(t instanceof J8)return _v(e)("miter");throw new Error("Failed pattern match at Graphics.Canvas (line 253, column 1 - line 253, column 52): "+[e.constructor.name,t.constructor.name])}},WR=function(e){return function(t){if(t instanceof j8)return hv(e)("round");if(t instanceof K8)return hv(e)("square");if(t instanceof Q8)return hv(e)("butt");throw new Error("Failed pattern match at Graphics.Canvas (line 238, column 1 - line 238, column 50): "+[e.constructor.name,t.constructor.name])}},UR=function(e){return function(t){var n=function(a){if(a instanceof X8)return"source-over";if(a instanceof Y8)return"source-in";if(a instanceof Z8)return"source-out";if(a instanceof e7)return"source-atop";if(a instanceof t7)return"destination-over";if(a instanceof n7)return"destination-in";if(a instanceof r7)return"destination-out";if(a instanceof o7)return"destination-atop";if(a instanceof a7)return"lighter";if(a instanceof i7)return"copy";if(a instanceof u7)return"xor";if(a instanceof s7)return"multiply";if(a instanceof c7)return"screen";if(a instanceof l7)return"overlay";if(a instanceof f7)return"darken";if(a instanceof d7)return"lighten";if(a instanceof p7)return"color-dodge";if(a instanceof h7)return"color-burn";if(a instanceof _7)return"hard-light";if(a instanceof v7)return"soft-light";if(a instanceof m7)return"difference";if(a instanceof g7)return"exclusion";if(a instanceof y7)return"hue";if(a instanceof D7)return"saturation";if(a instanceof C7)return"color";if(a instanceof b7)return"luminosity";throw new Error("Failed pattern match at Graphics.Canvas (line 326, column 5 - line 326, column 45): "+[a.constructor.name])};return gR(e)(n(t))}},qR=function(e){return function(t){return B8(lp(e)(t.height))(cp(e)(t.width))}};var zR=function(e){return function(){var n=up(e)(),a=sp(e)();return{width:n,height:a}}};var VR=function(e){return function(t){return function(n){var a=function(d){if(d instanceof W8)return"repeat";if(d instanceof U8)return"repeat-x";if(d instanceof q8)return"repeat-y";if(d instanceof z8)return"no-repeat";throw new Error("Failed pattern match at Graphics.Canvas (line 677, column 5 - line 677, column 31): "+[d.constructor.name])};return wR(e)(t)(a(n))}}};var JR=e=>t=>()=>e.convertToBlob({type:"image/jpeg",quality:t});function jR(e){return function(t){return function(n){return function(){e.then(n,t)}}}}var T7=In();var fb=function(e){return T7(YD(e))};function Cv(e){return typeof e}function bv(e){return Object.prototype.toString.call(e).slice(8,-1)}function fp(e){return e===void 0}var QR=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var wv=function(){var e=nD(nI);return function(t){return ND(e(t))}}();var XR=function(e){return function(t){return new io(e,new Ye(t.value0,t.value1))}};var db=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Fc=ne,Ev=ne;var pb=function(e){var t=sr(DI(e));return function(n){return t(wv(n))}};var hb=function(e){var t=X(jd(e)),n=pb(e);return function(a){return function(d){if(bv(d)===a)return t(Ev(d));if(_n)return n(new db(a,bv(d)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[a.constructor.name,d.constructor.name])}}};var Tv=function(e){return hb(e)("String")};var F7=Gh(ke),L7=st(JI),A7=de(_e),I7=On(CI(tI)(Tr)),R7=hb(Tr),$7=V(Y_(Ai)),H7=Tv(Tr),O7=ee(Qt),P7=Le(Cn),k7=function(e){return function(t){return Ea(function(n){return F7(L7)(jR(t)(function(a){return n(We.create(e(a)))()})(function(a){return n(Oe.create(a))()}))})}};var N7=function(e){return En(function(t){return ur("Promise failed, couldn't extract JS Error or String")})(A7)(fb(I7(R7("Error")(e))($7(ur)(H7(e)))))},B7=k7(N7),fs=function(e){return O7(P7(e))(B7)};var ZR=function(e){return function(t){return fs(JR(e)(t))}};var Mv=function(e){return function(t){return t[e]}},U7=Mv("namespaceURI"),q7=Mv("prefix"),z7=Mv("localName"),V7=Mv("tagName");function of(e){return function(){return e.scrollTop}}function dp(e){return function(t){return function(){t.scrollTop=e}}}function vb(e){return function(){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}}function e$(e,t,n){return e==null?t:n(e)}function mb(e){return e}var xa=Ke(null)(mb),Xt=function(e){return e$(e,z.value,k.create)};var xv=function(e){return function(t){return function(){return t[e]}}},j7=xv("children"),K7=xv("firstElementChild"),Q7=xv("lastElementChild"),X7=xv("childElementCount");function t$(e){return function(t){return function(){return t.querySelector(e)}}}var Z7=V(ke);var n$=function(e){var t=Z7(Xt),n=t$(e);return function(a){return t(n(a))}};var gb=ne;var az=wt(Yl),Co=V(ke),o$=nt(rt),iz=V($r),_w=de(_e),uz=function(e){return e},Db=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),wb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Sb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Av=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Eb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Iv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Tb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$v=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Mb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ab=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ib=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ov=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ob=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Nv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ub=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Uv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Jb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qv=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),Xb=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),Yb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Zb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ew=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),tw=function(){function e(t,n,a,d){this.value0=t,this.value1=n,this.value2=a,this.value3=d}return e.create=function(t){return function(n){return function(a){return function(d){return new e(t,n,a,d)}}}},e}(),nw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ow=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),aw=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),iw=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),uw=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),sw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),dw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sz=function(e){return e};var a$=ri,cz=function(e){var t=V(e);return{map:function(n){return function(a){if(a instanceof Db)return new Db(t(n)(a.value0));if(a instanceof Fv)return new Fv(function(d){return n(a.value0(d))});if(a instanceof Cb)return new Cb(a.value0,n(a.value1));if(a instanceof Lv)return new Lv(function(d){return n(a.value0(d))});if(a instanceof bb)return new bb(a.value0,n(a.value1));if(a instanceof wb)return new wb(function(d){return n(a.value0(d))});if(a instanceof Sb)return new Sb(a.value0,n(a.value1));if(a instanceof Av)return new Av(function(d){return n(a.value0(d))});if(a instanceof Eb)return new Eb(function(d){return n(a.value0(d))});if(a instanceof Iv)return new Iv(a.value0,n(a.value1));if(a instanceof Tb)return new Tb(a.value0,n(a.value1));if(a instanceof Rv)return new Rv(a.value0,n(a.value1));if(a instanceof $v)return new $v(a.value0,n(a.value1));if(a instanceof Mb)return new Mb(a.value0,n(a.value1));if(a instanceof xb)return new xb(a.value0,n(a.value1));if(a instanceof Fb)return new Fb(a.value0,n(a.value1));if(a instanceof Lb)return new Lb(a.value0,n(a.value1));if(a instanceof Ab)return new Ab(a.value0,n(a.value1));if(a instanceof Ib)return new Ib(a.value0,n(a.value1));if(a instanceof Rb)return new Rb(a.value0,n(a.value1));if(a instanceof $b)return new $b(a.value0,n(a.value1));if(a instanceof Hb)return new Hb(a.value0,n(a.value1));if(a instanceof Hv)return new Hv(n(a.value0));if(a instanceof Ov)return new Ov(n(a.value0));if(a instanceof Ob)return new Ob(n(a.value0));if(a instanceof Pb)return new Pb(n(a.value0));if(a instanceof Pv)return new Pv(a.value0,n(a.value1));if(a instanceof kv)return new kv(a.value0,n(a.value1));if(a instanceof kb)return new kb(n(a.value0));if(a instanceof Nb)return new Nb(a.value0,n(a.value1));if(a instanceof Bb)return new Bb(a.value0,n(a.value1));if(a instanceof Nv)return new Nv(a.value0,n(a.value1));if(a instanceof Wb)return new Wb(a.value0,n(a.value1));if(a instanceof Bv)return new Bv(a.value0,n(a.value1));if(a instanceof Ub)return new Ub(a.value0,n(a.value1));if(a instanceof Wv)return new Wv(a.value0,n(a.value1));if(a instanceof Uv)return new Uv(a.value0,n(a.value1));if(a instanceof qb)return new qb(a.value0,n(a.value1));if(a instanceof zb)return new zb(a.value0,n(a.value1));if(a instanceof Vb)return new Vb(function(d){return n(a.value0(d))});if(a instanceof Gb)return new Gb(a.value0,n(a.value1));if(a instanceof Jb)return new Jb(function(d){return n(a.value0(d))});if(a instanceof jb)return new jb(a.value0,n(a.value1));if(a instanceof Kb)return new Kb(function(d){return n(a.value0(d))});if(a instanceof Qb)return new Qb(a.value0,n(a.value1));if(a instanceof qv)return new qv(a.value0,a.value1,n(a.value2));if(a instanceof Xb)return new Xb(a.value0,a.value1,n(a.value2));if(a instanceof Yb)return new Yb(a.value0,function(d){return n(a.value1(d))});if(a instanceof zv)return new zv(n(a.value0));if(a instanceof Vv)return new Vv(n(a.value0));if(a instanceof Zb)return new Zb(a.value0,function(d){return n(a.value1(d))});if(a instanceof ew)return new ew(a.value0,a.value1,n(a.value2));if(a instanceof tw)return new tw(a.value0,a.value1,a.value2,n(a.value3));if(a instanceof nw)return new nw(a.value0,function(d){return n(a.value1(d))});if(a instanceof rw)return new rw(function(d){return n(a.value0(d))});if(a instanceof ow)return new ow(a.value0,a.value1,n(a.value2));if(a instanceof aw)return new aw(a.value0,a.value1,n(a.value2));if(a instanceof iw)return new iw(a.value0,a.value1,n(a.value2));if(a instanceof uw)return new uw(a.value0,a.value1,function(d){return n(a.value2(d))});if(a instanceof sw)return new sw(a.value0,n(a.value1));if(a instanceof cw)return new cw(a.value0,function(d){return n(a.value1(d))});if(a instanceof lw)return new lw(a.value0,function(d){return n(a.value1(d))});if(a instanceof fw)return new fw(a.value0,n(a.value1));if(a instanceof dw)return new dw(a.value0,n(a.value1));if(a instanceof pw)return new pw(a.value0,n(a.value1));if(a instanceof hw)return new hw(a.value0,function(d){return n(a.value1(d))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 582, column 1 - line 648, column 64): "+[n.constructor.name,a.constructor.name])}}}},ai=fr,r$=o$(ai),lz=ee(ai);var vw=gr,fz=X(vw),i$=function(e){var t=e.MonadEffect0(),n=t.Monad0(),a=az(n),d=n.Bind1(),r=ji(d),o=ee(r),l=Ir(is(n)),u=Le(ei(t)),i=o$(r),s=X(Kd(n.Applicative0())),f=bn(cv(e)),h=ra(cz(d.Apply0().Functor0()));return function(p){var c=function(v){if(v instanceof Db)return a(v.value0);if(v instanceof Fv)return o(l)(function(m){return u(Co(v.value0)(up(m.canvasElement)))});if(v instanceof Cb)return o(l)(function(m){return i(u(cp(m.canvasElement)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Lv)return o(l)(function(m){return u(Co(v.value0)(sp(m.canvasElement)))});if(v instanceof bb)return o(l)(function(m){return i(u(lp(m.canvasElement)(v.value0)))(function(){return s(v.value1)})});if(v instanceof wb)return o(l)(function(m){return u(Co(v.value0)(zR(m.canvasElement)))});if(v instanceof Sb)return o(l)(function(m){return i(u(qR(m.canvasElement)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Av)return o(l)(function(m){return u(Co(v.value0)(vb(m.canvasElement)))});if(v instanceof Eb)return o(l)(function(m){return u(Co(v.value0)(CC(m.canvasElement)))});if(v instanceof Iv)return o(l)(function(m){return i(u(bC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Tb)return o(l)(function(m){return i(u(wC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Rv)return o(l)(function(m){return i(u(SC(m.context2D)(Ol(v.value0))))(function(){return s(v.value1)})});if(v instanceof $v)return o(l)(function(m){return i(u(EC(m.context2D)(Ol(v.value0))))(function(){return s(v.value1)})});if(v instanceof Mb)return o(l)(function(m){return i(u(MC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof xb)return o(l)(function(m){return i(u(xC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Fb)return o(l)(function(m){return i(u(FC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Lb)return o(l)(function(m){return i(u(TC(m.context2D)(Ol(v.value0))))(function(){return s(v.value1)})});if(v instanceof Ab)return o(l)(function(m){return i(u(LC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Ib)return o(l)(function(m){return i(u(WR(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Rb)return o(l)(function(m){return i(u(BR(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof $b)return o(l)(function(m){return i(u(UR(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Hb)return o(l)(function(m){return i(u(AC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Hv)return o(l)(function(m){return i(u(vv(m.context2D)))(function(){return s(v.value0)})});if(v instanceof Ov)return o(l)(function(m){return i(u(mv(m.context2D)))(function(){return s(v.value0)})});if(v instanceof Ob)return o(l)(function(m){return i(u(gv(m.context2D)))(function(){return s(v.value0)})});if(v instanceof Pb)return o(l)(function(m){return i(u(IC(m.context2D)))(function(){return s(v.value0)})});if(v instanceof Pv)return o(l)(function(m){return i(u(RC(m.context2D)(v.value0.x)(v.value0.y)))(function(){return s(v.value1)})});if(v instanceof kv)return o(l)(function(m){return i(u($C(m.context2D)(v.value0.x)(v.value0.y)))(function(){return s(v.value1)})});if(v instanceof kb)return o(l)(function(m){return i(u(HC(m.context2D)))(function(){return s(v.value0)})});if(v instanceof Nb)return o(l)(function(m){return i(u(OC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Bb)return o(l)(function(m){return i(u(PC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Nv)return o(l)(function(m){return i(u(kC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Wb)return o(l)(function(m){return i(u(NC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Bv)return o(l)(function(m){return i(u(BC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Ub)return o(l)(function(m){return i(u(WC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Wv)return o(l)(function(m){return i(u(UC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Uv)return o(l)(function(m){return i(u(qC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof qb)return o(l)(function(m){return i(u(zC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof zb)return o(l)(function(m){return i(u(VC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Vb)return o(l)(function(m){return u(Co(v.value0)(PR(m.context2D)))});if(v instanceof Gb)return o(l)(function(m){return i(u(NR(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Jb)return o(l)(function(m){return u(Co(v.value0)(OR(m.context2D)))});if(v instanceof jb)return o(l)(function(m){return i(u(kR(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof Kb)return o(l)(function(m){return u(Co(function(y){return v.value0(uz(y))})(GC(m.context2D)))});if(v instanceof Qb)return o(l)(function(m){return i(u(JC(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof qv)return o(l)(function(m){return i(u(jC(m.context2D)(v.value0)(v.value1.x)(v.value1.y)))(function(){return s(v.value2)})});if(v instanceof Xb)return o(l)(function(m){return i(u(KC(m.context2D)(v.value0)(v.value1.x)(v.value1.y)))(function(){return s(v.value2)})});if(v instanceof Yb)return o(l)(function(m){return u(Co(v.value1)(QC(m.context2D)(v.value0)))});if(v instanceof zv)return o(l)(function(m){return i(u(yv(m.context2D)))(function(){return s(v.value0)})});if(v instanceof Vv)return o(l)(function(m){return i(u(Dv(m.context2D)))(function(){return s(v.value0)})});if(v instanceof Zb)return o(l)(function(m){return u(Co(v.value1)(XC(m.context2D)(v.value0.x)(v.value0.y)(v.value0.width)(v.value0.height)))});if(v instanceof ew)return o(l)(function(m){return i(u(ZC(m.context2D)(v.value0)(v.value1.x)(v.value1.y)))(function(){return s(v.value2)})});if(v instanceof tw)return o(l)(function(m){return i(u(YC(m.context2D)(v.value0)(v.value1.x)(v.value1.y)(v.value2.x)(v.value2.y)(v.value2.width)(v.value2.height)))(function(){return s(v.value3)})});if(v instanceof nw)return o(l)(function(m){return u(Co(v.value1)(eb(m.context2D)(v.value0.width)(v.value0.height)))});if(v instanceof rw)return o(l)(function(m){return s(v.value0(m.canvasElement))});if(v instanceof ow)return o(l)(function(m){return i(u(tb(m.context2D)(v.value0)(v.value1.x)(v.value1.y)))(function(){return s(v.value2)})});if(v instanceof aw)return o(l)(function(m){return i(u(nb(m.context2D)(v.value0)(v.value1.x)(v.value1.y)(v.value1.width)(v.value1.height)))(function(){return s(v.value2)})});if(v instanceof iw)return o(l)(function(m){return i(u(rb(m.context2D)(v.value0)(v.value1.source.x)(v.value1.source.y)(v.value1.source.width)(v.value1.source.height)(v.value1.target.x)(v.value1.target.y)(v.value1.target.width)(v.value1.target.height)))(function(){return s(v.value2)})});if(v instanceof uw)return o(l)(function(m){return u(Co(v.value2)(VR(m.context2D)(v.value0)(v.value1)))});if(v instanceof sw)return o(l)(function(m){return i(u(ob(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof cw)return o(l)(function(m){return u(Co(v.value1)(ab(m.context2D)(v.value0)))});if(v instanceof lw)return o(l)(function(m){return u(Co(v.value1)(ib(m.context2D)(v.value0)))});if(v instanceof fw)return o(l)(function(m){return i(u(ub(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof dw)return o(l)(function(m){return i(u(sb(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof pw)return o(l)(function(m){return i(u(cb(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof hw)return o(l)(function(m){return f(iz(v.value1)(ZR(m.canvasElement)(v.value0)))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 61, column 5 - line 61, column 25): "+[v.constructor.name])},_=h(us(p))(c);return function(v){return _(function(m){return m}(v))}}};var Hr=function(e){return sz(dt(e))},u$=function(e){return Hr(new Pv(e,void 0))};var s$=function(e){return Hr(new kv(e,void 0))};var dz=function(){return Hr(new Vv(void 0))}(),c$=function(e){return Hr(new Wv(e,void 0))},pz=function(){return Hr(new zv(void 0))}(),Gv=function(e){return r$(pz)(function(){return lz(e)(function(t){return r$(dz)(function(){return fz(t)})})})};var Lc=function(e){return Hr(new Rv(e,void 0))};var l$=function(e){return Hr(new Iv(e,void 0))};var mw=function(e){return Hr(new $v(e,void 0))};var f$=function(){return Hr(new Ov(void 0))}();var d$=function(e){return Hr(new Uv(e,void 0))};var Jv=function(){return Hr(new Fv(_w))}();var jv=function(){return Hr(new Lv(_w))}();var gw=function(){return Hr(new Av(_w))}(),yw=function(e){return function(t){return Hr(new qv(e,t,void 0))}},hp=function(e){return Hr(new Nv(e,void 0))};var Kv=function(e){return Hr(new Bv(e,void 0))};var p$=function(){return Hr(new Hv(void 0))}();var hz=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var h$=function(e){return function(t){return Qa(function(n){return e(n.value0)(n.value1)})(t)}};var _$=function(e){return function(t){return vD(new hz(e,t))}},Dw={map:function(e){return function(t){return Qa(function(n){return _$(function(a){return e(n.value0(a))})(n.value1)})(t)}}};var v$=_$(de(_e));var vz=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}();var Qv=function(e){return vz.create(Ie(e.Eq0()))(Te(e))},mz={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},m$={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return mz}};var ww=El(Vt)(m$);var Cz=jD(ww),bz=ta(ww),wz=Jr(ww);var Xv=function(){return function(e){var t=qn(e);return function(n){var a=Qv(n);return function(d){return function(r){return function(o){return Cz(new Z(t(d),a(r)))(o)}}}}}},Yv=function(){return function(e){var t=qn(e);return function(n){var a=Qv(n);return function(d){return function(r){return function(o){return bz(new Z(t(d),a(r)))(o)}}}}}},Zv=function(){return function(e){var t=qn(e);return function(n){var a=Qv(n);return function(d){return function(r){return function(o){return function(l){return wz(new Z(t(d),a(r)))(o)(l)}}}}}}},em=function(e){var t=ct(e)(Ji);return function(n){return function(a){return t(function(d){return a(d)})(n)}}},ds=vr;var g$=function(){function e(){}return e.value=new e,e}(),uf=function(){function e(){}return e.value=new e,e}(),y$=function(){function e(){}return e.value=new e,e}(),D$=function(){function e(){}return e.value=new e,e}(),C$=function(){function e(){}return e.value=new e,e}(),b$=function(){function e(){}return e.value=new e,e}(),w$=function(){function e(){}return e.value=new e,e}(),S$=function(){function e(){}return e.value=new e,e}(),E$=function(){function e(){}return e.value=new e,e}(),T$=function(){function e(){}return e.value=new e,e}(),M$=function(){function e(){}return e.value=new e,e}(),x$=function(){function e(){}return e.value=new e,e}(),F$=function(){function e(){}return e.value=new e,e}(),L$=function(){function e(){}return e.value=new e,e}(),A$=function(){function e(){}return e.value=new e,e}(),I$=function(){function e(){}return e.value=new e,e}(),R$=function(){function e(){}return e.value=new e,e}(),$$=function(){function e(){}return e.value=new e,e}(),H$=function(){function e(){}return e.value=new e,e}(),O$=function(){function e(){}return e.value=new e,e}(),P$=function(){function e(){}return e.value=new e,e}(),k$=function(){function e(){}return e.value=new e,e}(),N$=function(e){if(e instanceof g$)return"button";if(e instanceof uf)return"checkbox";if(e instanceof y$)return"color";if(e instanceof D$)return"date";if(e instanceof C$)return"datetime-local";if(e instanceof b$)return"email";if(e instanceof w$)return"file";if(e instanceof S$)return"hidden";if(e instanceof E$)return"image";if(e instanceof T$)return"month";if(e instanceof M$)return"number";if(e instanceof x$)return"password";if(e instanceof F$)return"radio";if(e instanceof L$)return"range";if(e instanceof A$)return"reset";if(e instanceof I$)return"search";if(e instanceof R$)return"submit";if(e instanceof $$)return"tel";if(e instanceof H$)return"text";if(e instanceof O$)return"time";if(e instanceof P$)return"url";if(e instanceof k$)return"week";throw new Error("Failed pattern match at DOM.HTML.Indexed.InputType (line 33, column 19 - line 55, column 22): "+[e.constructor.name])};var tm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ac=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Fn=function(){function e(t,n,a,d){this.value0=t,this.value1=n,this.value2=a,this.value3=d}return e.create=function(t){return function(n){return function(a){return function(d){return new e(t,n,a,d)}}}},e}(),mp=ne,bo=function(e,t){return e.value2(e.value1,t)},Ln=ne,wo=function(e){return e.value3(e.value1)},Or=mp(function(e){return e.value0});var W$=V(mt),Nz=V($i);var ps=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Zi=function(){function e(t,n,a,d){this.value0=t,this.value1=n,this.value2=a,this.value3=d}return e.create=function(t){return function(n){return function(a){return function(d){return new e(t,n,a,d)}}}},e}(),hs=function(){function e(t,n,a,d){this.value0=t,this.value1=n,this.value2=a,this.value3=d}return e.create=function(t){return function(n){return function(a){return function(d){return new e(t,n,a,d)}}}},e}(),_s=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),eu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bz=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),U$=function(e){return function(t){return e(t)}};var Wz=ne;var Uz={bimap:function(e){return function(t){return U$(function(n){return Wz(new Bz(function(a){return e(n.value0(a))},function(a){return t(n.value1(a))},n.value2))})}}},qz=Ao(Uz);var Ic=U$(function(e){var t=function(n){if(n instanceof ps)return new ps(n.value0);if(n instanceof Zi)return new Zi(n.value0,n.value1,e.value0(n.value2),W$(t)(n.value3));if(n instanceof hs)return new hs(n.value0,n.value1,e.value0(n.value2),W$(Nz(t))(n.value3));if(n instanceof _s)return new _s(e.value1(n.value0));if(n instanceof eu)return new eu(qz(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function Rc(e,t){return t[e]}function Ew(e,t){return t.hasOwnProperty(e)}function tu(e,t,n){n[e]=t}function Tw(e,t){for(var n=[],a=0;a<e.length;a++)n.push(t(a,e[a]));return n}function Mw(e,t){for(var n=0;n<e.length;n++)t(e[n])}function xw(e,t){for(var n=Object.keys(e),a=0;a<n.length;a++){var d=n[a];t(d,e[d])}}function Fw(e,t,n,a,d){for(var r=[],o=e.length,l=t.length,u=0;;){if(u<o)u<l?r.push(n(u,e[u],t[u])):a(u,e[u]);else if(u<l)r.push(d(u,t[u]));else break;u++}return r}function gp(e,t,n){for(var a={},d=0;d<e.length;d++){var r=e[d],o=t(r);a[o]=n(o,d,r)}return a}function yp(e,t,n,a,d,r){for(var o={},l=0;l<t.length;l++){var u=t[l],i=n(u);e.hasOwnProperty(i)?o[i]=a(i,l,e[i],u):o[i]=r(i,l,u)}for(var i in e)i in o||d(i,e[i]);return o}function $c(e,t){return e===t}function Lw(e,t){return t.createTextNode(e)}function Aw(e,t){t.textContent=e}function rm(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function vs(e,t,n){var a=n.childNodes.item(e)||null;a!==t&&n.insertBefore(t,a)}function Dp(e,t){t&&e.parentNode===t&&t.removeChild(e)}function Cp(e){return e.parentNode}function om(e,t,n,a){e!=null?a.setAttributeNS(e,t,n):a.setAttribute(t,n)}function am(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function Iw(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function Rw(e,t,n){n.addEventListener(e,t,!1)}function $w(e,t,n){n.removeEventListener(e,t,!1)}var Hw=void 0;var bp=function(){return{}};function Ow(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var Pw=Rc,kw=ne,Nw=tu,Bw=bp;var wp=function(e,t,n){var a=0,d;return function(r){if(a===2)return d;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return a=1,d=n(),a=2,d}};var Uw=function(e){return wo(e.widget)},qw=wp("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof eu)return qw(291)(e,Ic(t.value0));if(t instanceof _s){var n=bo(e.widget,t.value0),a=mp(function(d){return Ln(new Fn(d.value0,{build:e.build,widget:n},qw(296),Uw))})(n);return a}return Uw(e),e.build(t)}}),jz=qw(286),im=function(e){var t=Cp(e.node);return Dp(e.node,t)},um=wp("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof eu)return um(82)(e,Ic(t.value0));if(t instanceof ps){if(e.value===t.value0)return Ln(new Fn(e.node,e,um(85),im));if(_n){var n={build:e.build,node:e.node,value:t.value0};return Aw(t.value0,e.node),Ln(new Fn(e.node,n,um(89),im))}}return im(e),e.build(t)}}),Kz=um(77),sm=function(e){var t=Cp(e.node);return Dp(e.node,t),xw(e.children,function(n,a){return wo(a)}),wo(e.attrs)},cm=function(e){var t=Cp(e.node);return Dp(e.node,t),Mw(e.children,wo),wo(e.attrs)},z$=function(e,t,n,a){var d=t===a;return d?e instanceof k&&n instanceof k&&e.value0===n.value0||e instanceof z&&n instanceof z:!1},lm=wp("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof eu)return lm(135)(e,Ic(t.value0));if(t instanceof Zi&&z$(e.ns,e.name,t.value0,t.value1)){var n=rr(t.value3),a=rr(e.children);if(a===0&&n===0){var u=bo(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:e.children};return Ln(new Fn(e.node,i,lm(149),cm))}var d=function(s,f){return wo(f)},r=function(s,f,h){var p=bo(f,h);return vs(s,Or(p),e.node),p},o=function(s,f){var h=e.build(f);return vs(s,Or(h),e.node),h},l=Fw(e.children,t.value3,r,d,o),u=bo(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:l};return Ln(new Fn(e.node,i,lm(172),cm))}return cm(e),e.build(t)}}),Qz=lm(130),fm=wp("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof eu)return fm(222)(e,Ic(t.value0));if(t instanceof hs&&z$(e.ns,e.name,t.value0,t.value1)){var n=rr(t.value3);if(e.length===0&&n===0){var l=bo(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:e.children,length:0};return Ln(new Fn(e.node,u,fm(237),sm))}var a=function(i,s){return wo(s)},d=function(i,s,f,h){var p=bo(f,h.value1);return vs(s,Or(p),e.node),p},r=function(i,s,f){var h=e.build(f.value1);return vs(s,Or(h),e.node),h},o=yp(e.children,t.value3,ar,d,a,r),l=bo(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:o,length:n};return Ln(new Fn(e.node,u,fm(261),sm))}return sm(e),e.build(t)}}),Xz=fm(217),Yz=function(e,t,n){var a=e.buildWidget(e)(n),d=mp(function(r){return Ln(new Fn(r.value0,{build:t,widget:a},jz,Uw))})(a);return d},Zz=function(e,t,n){var a=Lw(n,e.document),d={build:t,node:a,value:n};return Ln(new Fn(a,d,Kz,im))},eV=function(e,t,n,a,d,r){var o=rm(xa(n),a,e.document),l=gb(o),u=function(h,p,c){var _=t(c.value1);return vs(p,Or(_),l),_},i=gp(r,ar,u),s=e.buildAttributes(o)(d),f={build:t,node:l,attrs:s,ns:n,name:a,children:i,length:rr(r)};return Ln(new Fn(l,f,Xz,sm))},tV=function(e,t,n,a,d,r){var o=rm(xa(n),a,e.document),l=gb(o),u=function(h,p){var c=t(p);return vs(h,Or(c),l),c},i=Tw(r,u),s=e.buildAttributes(o)(d),f={build:t,node:l,attrs:s,ns:n,name:a,children:i};return Ln(new Fn(l,f,Qz,cm))},Sp=function(e){var t=wp("build","Halogen.VDom.DOM",function(){return function(a){if(a instanceof ps)return Zz(e,t(59),a.value0);if(a instanceof Zi)return tV(e,t(60),a.value0,a.value1,a.value2,a.value3);if(a instanceof hs)return eV(e,t(61),a.value0,a.value1,a.value2,a.value3);if(a instanceof _s)return Yz(e,t(62),a.value0);if(a instanceof eu)return t(63)(Ic(a.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[a.constructor.name])}}),n=t(58);return n};function Gw(e){return e()}function G$(e){return function(t){return function(n){return function(a){var d=n;function r(l){return function(u){return t(u)(l)(a[l])}}for(var o in a)hasOwnProperty.call(a,o)&&(d=e(d)(r(o)));return d}}}}function J$(e,t,n,a){return n in a?t(a[n]):e}function Jw(e){return function(t){var n=[];for(var a in t)hasOwnProperty.call(t,a)&&n.push(e(a)(t[a]));return n}}var nV=Object.keys||Jw(function(e){return function(){return e}});var aV=ut(Ys);var dm=function(){return Iu(J$)(z.value)(k.create)}();var Ep=function(e){var t=Pi(e);return function(n){return Gw(function(){var d=bp();return vd(t(n))(function(r){return aV(Ow(r.value0)(r.value1)(d))})(),d})}};var iV=G$(sx),j$=function(e){var t=De(e.Semigroup0()),n=st(e);return function(a){return iV(function(d){return function(r){return function(o){return t(d)(a(r)(o))}}})(n)}};function Tp(e){return function(){return function(t){return e(t)()}}}function Kw(e){return function(t){return function(n){return function(a){return function(){return a.addEventListener(e,t,n)}}}}}function Qw(e){return function(t){return function(n){return function(a){return function(){return a.removeEventListener(e,t,n)}}}}}var uV=function(e,t,n){var a=0,d;return function(r){if(a===2)return d;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return a=1,d=n(),a=2,d}};var Yw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Zw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nu=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),gs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ys=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sV=Rc,Xw=tu,cV=function(e,t){var n=Iw(null,e,t);if(n)return am(null,e,t);var a=Cv(Rc(e,t));return a==="string"?tu(e,"",t):e==="rowSpan"?tu(e,1,t):e==="colSpan"?tu(e,1,t):tu(e,Hw,t)},Q$=function(e){if(e instanceof nu&&e.value0 instanceof k)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof nu)return"attr/:"+e.value1;if(e instanceof gs)return"prop/"+e.value0;if(e instanceof ys)return"handler/"+e.value0;if(e instanceof Hc)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},pm=ne;var X$=ne;var Y$=function(e){return function(t){var n=function(s){return function(f,h){if(h instanceof nu)return am(xa(h.value0),h.value1,t);if(h instanceof gs)return cV(h.value0,t);if(h instanceof ys){var p=Pw(h.value0,s);return $w(h.value0,ar(p),t)}if(h instanceof Hc)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[h.constructor.name])}},a=function(s){return s instanceof k?e(s.value0)():void 0},d=function(s){var f=dm("ref")(s.props);return f instanceof k&&f.value0 instanceof Hc?a(f.value0.value0(new Zw(t))):void 0},r=function(s,f){return function(h,p,c,_){if(c instanceof nu&&_ instanceof nu){var v=c.value2===_.value2;return v||om(xa(_.value0),_.value1,_.value2,t),_}if(c instanceof gs&&_ instanceof gs){var m=$c(c.value1,_.value1);if(m)return _;if(_.value0==="value"){var y=sV("value",t),C=$c(y,_.value1);return C||Xw(_.value0,_.value1,t),_}return Xw(_.value0,_.value1,t),_}if(c instanceof ys&&_ instanceof ys){var S=Pw(_.value0,s);return qt(_.value1)(vn(S))(),Nw(_.value0,S,f),_}return _}},o=function(s){return function(f,h,p){if(p instanceof nu)return om(xa(p.value0),p.value1,p.value2,t),p;if(p instanceof gs)return Xw(p.value0,p.value1,t),p;if(p instanceof ys){var c=Rc(p.value0,s);if(Ew(p.value0,s))return qt(p.value1)(vn(c))(),p;var _=fn(p.value1)(),v=Tp(function(m){return function(){var C=Qe(_)();return a(C(m))}})();return Nw(p.value0,new Z(v,_),s),Rw(p.value0,v,t),p}if(p instanceof Hc)return a(p.value0(new Yw(t))),p;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[p.constructor.name])}},l=uV("patchProp","Halogen.VDom.DOM.Prop",function(){return function(s,f){var h=Bw(),p=n(s.events),c=r(s.events,h),_=o(h),v=yp(s.props,f,Q$,c,p,_),m={events:kw(h),props:v};return Ln(new Fn(void 0,m,l(100),d))}}),u=l(87),i=function(s){var f=Bw(),h=gp(s,Q$,o(f)),p={events:kw(f),props:h};return Ln(new Fn(void 0,p,u,d))};return i}};var tS=function(e){return e},nS=function(e){return tS(_s.create(e))},dV=function(e){return e.toPropValue},jn=function(e){return tS(ps.create(e))},nH=function(e){return new Hc(function(t){return e(function(n){if(n instanceof Yw)return new k(n.value0);if(n instanceof Zw)return z.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},rH=function(e){var t=dV(e);return function(n){var a=gs.create(n);return function(d){return a(t(d))}}};var hm={toPropValue:pm};var rS={toPropValue:function(){var e=In();return function(t){return pm(e(t))}}()};var oH={toPropValue:X$},aH={toPropValue:function(e){return pm(N$(e))}};var oS=function(){return ys.create}(),iH=function(e){return function(t){return function(n){return function(a){return new Zi(e,t,n,a)}}}};var uH=function(e){return function(t){return nu.create(e)(t)}};var hV=de(_e);var _m=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),aS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),iS=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cH=function(e){return function(t){return new iS(e,t)}},lH=function(){return aS.create}(),fH=function(e){var t=X(e);return function(n){return function(a){return function(d){return function(r){return function(o){if(r instanceof _m)return new Z(new Ye({func:t(r.value0),count:o},n),a);if(r instanceof aS)return new Z(new Ye({func:d(r.value0),count:o},n),a);if(r instanceof iS)return fH(e)(n)(XR(r.value1)(a))(d)(r.value0)(o+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[r.constructor.name])}}}}}},dH=function(e){var t=ht(e.Apply0());return function(n){return function(a){return function(d){if(n instanceof Ze)return new We(d);if(n instanceof Ye){var r=t(n.value0.func)(d),o=n.value0.count===1;if(o)return n.value1 instanceof Ze?new We(r):dH(e)(n.value1)(a)(r);if(a instanceof Ze)return new We(r);if(a instanceof Ye)return new Oe(new Z(new Ye({func:r,count:n.value0.count-1|0},n.value1),new io(a.value0,a.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[a.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},pH={map:function(e){return function(t){return cH(new _m(e))(t)}}},hH=function(e){var t=dH(e),n=X(e),a=fH(e);return function(d){return function(r){var o=function(l){var u=!1,i;function s(f){if(f.value1.value0 instanceof _m){var h=t(f.value0)(f.value1.value1)(n(f.value1.value0.value0));if(h instanceof We)return u=!0,h.value0;if(h instanceof Oe){l=h.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[h.constructor.name])}if(f.value1.value0 instanceof aS){var h=t(f.value0)(f.value1.value1)(d(f.value1.value0.value0));if(h instanceof We)return u=!0,h.value0;if(h instanceof Oe){l=h.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[h.constructor.name])}if(f.value1.value0 instanceof iS){var p=new io(f.value1.value0.value1,f.value1.value1);l=a(f.value0)(p)(d)(f.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[f.value1.value0.constructor.name])}for(;!u;)i=s(l);return i};return o(new Z(Ze.value,wv(r)))}}},_H=function(e){return hH(e)(hV)},vH={apply:function(e){return function(t){return cH(e)(t)}},Functor0:function(){return pH}},mH=function(){return{pure:_m.create,Apply0:function(){return vH}}}(),_V=hH(mH),uS=function(e){return _V(function(t){return lH(e(t))})};var yH=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),DH=ne,CH=ne;function sS(e){return function(t){return e===t}}var sf=sS;var yV=ut(ke);var DV=ee(Fr);var CV=De(ln),bV=ct(on),wV=bV(vt);var vm=function(e){return e},EH=function(e){return function(t){return e(function(n){return yV(t(n))})}};var Kn=function(e){return function(t){return e(t)}};var Mp={map:function(e){return function(t){return function(n){return t(function(a){return n(e(a))})}}}};var Qn=function(){var t=fn([])();return{emitter:function(n){return function(){return oo(function(d){return CV(d)([n])})(t)(),oo(S_(sf)(n))(t)}},listener:function(n){return DV(Qe(t))(wV(function(a){return a(n)}))}}};var lS=de(_e);var EV=Yv();var TH=function(e){return e},MH=function(e){return e},xp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Oc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ap=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ip=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ym=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Dm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var lf=function(e){return e},Cm=function(e){return dt(new Lp(e,void 0))};var Rn=function(e){return dt(new Fp(function(t){return e},lS))};var tr=function(e){return dt(new Ip(e,void 0))};var yr=function(){return function(e){var t=EV(e);return function(n){var a=t(n);return function(d){return function(r){return function(o){return dt(new Ap(CH(new yH(function(l){var u=X(l);return function(i){var s=Ke(u(z.value))(i),f=a(d)(r);return function(h){return s(f(h))}}},o,lS))))}}}}}},fS=yt,bm=yt;var ff={lift:function(e){return function(t){return lf(dt(Oc.create(t)))}}},Pc=rf,It={state:function(e){return lf(dt(xp.create(e)))},Monad0:function(){return Pc}};var An=function(e){return{liftEffect:function(){var t=Le(e);return function(n){return lf(dt(Oc.create(t(n))))}}(),Monad0:function(){return Pc}}};var ii=function(e){var t=An(e.MonadEffect0());return{liftAff:function(){var n=bn(e);return function(a){return lf(dt(Oc.create(n(a))))}}(),MonadEffect0:function(){return t}}};var Pr=function(e){return dt(new Rp(e,lS))},$n=ri;var Nt=fr,TV=ee(Nt),wm=ip;var Yt=gr,MV=X(Yt),$p={tailRecM:function(e){return function(t){return TV(e(t))(function(n){if(n instanceof Pt)return yn($p)(e)(n.value0);if(n instanceof Bt)return MV(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return Pc}};var df=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_f=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var xV=function(e,t,n){var a=0,d;return function(r){if(a===2)return d;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return a=1,d=n(),a=2,d}};var FV=function(e,t){return $c(e.value0,t.value0)&&$c(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var xH=function(e){return e.value2(e.value3)};var FH=function(e){var t=function(r){return wo(r.vdom)},n=xV("patchThunk","Halogen.VDom.Thunk",function(){return function(r,o){var l=FV(r.thunk,o);if(l)return Ln(new Fn(Or(r.vdom),r,n(112),t));var u=bo(r.vdom,e(xH(o)));return Ln(new Fn(Or(u),{vdom:u,thunk:o},n(115),t))}}),a=n(108),d=function(r){return function(o){var l=Sp(r)(e(xH(o)));return Ln(new Fn(Or(l),{thunk:o,vdom:l},a,t))}};return d};var Sm=dl($n),hS=ct(Yt)(Ht),LV=V($n);var LH=X(Yt),AV=Yv(),IV=Xv(),RV=Zv(),mf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Em=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_S=ne,vS=ne,Zt=function(e){return function(t){if(t instanceof df)return Sm(hS(e.handleAction)(e.initialize))(t.value0);if(t instanceof pf)return Sm(hS(e.handleAction)(e.finalize))(t.value0);if(t instanceof hf)return Sm(hS(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof _f)return Sm(e.handleAction(t.value0))(t.value1);if(t instanceof vf)return h$(function(n){var a=LV(Ke(t.value1(void 0))(n));return function(d){return a(e.handleQuery(d))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},$V=ne,en=ne;var it=function(){return{handleAction:ve(LH(void 0)),handleQuery:ve(LH(z.value)),receive:ve(z.value),initialize:z.value,finalize:z.value}}(),mS=function(){return function(e){var t=AV(e),n=IV(e),a=RV(e);return function(d){var r=t(d),o=n(d),l=a(d);return function(u){return function(i){return function(s){return function(f){return function(h){return $V({get:r(u)(i),pop:o(u)(i),set:l(u)(i),component:s,input:f,output:h})}}}}}}}};var ui=function(){return iH(z.value)}();var AH=ui("h3"),Hp=AH([]);var gS=function(e){return ui("img")(e)([])},Op=function(e){return ui("input")(e)([])};var yS=ui("option");var DS=ui("select");var CS=ui("style");var Gt=ui("div"),Dr=Gt([]);var bS=function(e){return ui("canvas")(e)([])},Cs=ui("button");var si=function(){var e=function(t){return function(n){return new k(new tm(t,n))}};return function(t){return nH(e(t))}}(),kc=function(e){return rH(e)};var HV=kc(hm),IH=kc(oH);var RH=HV("src");var $H=function(e){return kc(e)("type")},HH=function(e){return kc(e)("value")},OH=IH("width");var PH=IH("height");var wS=function(){return uH(z.value)}();var SS=ee(Nt),OV=Rr(It),PV=Mn(uc)(Yt),kV=wt(ff),NV=ct(Yt)(Ht),BV=pn(It),WV=function(){function e(){}return e.value=new e,e}(),UV=function(e){return bS([si("canvas"),OH(e.dimensions.width),PH(e.dimensions.height)])},qV=function(e){var t=kV(e.MonadEffect0().Monad0()),n=i$(e);return function(a){var d=n(a);return function(r){return SS(OV)(function(o){return $e(PV)(o.canvas)(function(l){return t(Ta(d(r))(l))})})}}},zV=function(e){var t=Le(An(e.MonadEffect0()));return function(n){return SS(Pr("canvas"))(function(a){return $e(NV)(a)(function(d){return SS(t(pv(d)))(function(r){return BV(function(o){var l={};for(var u in o)({}).hasOwnProperty.call(o,u)&&(l[u]=o[u]);return l.canvas=new k({canvasElement:d,context2D:r}),l})})})})}},gf=function(e){var t=zV(e),n=qV(e);return function(a){return en({initialState:function(d){return{dimensions:d,canvas:z.value}},render:UV,eval:Zt({receive:it.receive,finalize:it.finalize,handleAction:t,handleQuery:n(a),initialize:new k(WV.value)})})}};var kH=mS();var aa=function(){return function(e){var t=kH(e);return function(n){var a=t(n);return function(d){return function(r){return function(o){return function(l){return nS(new mf(a(d)(r)(o)(l)(ve(z.value))))}}}}}}},ci=function(){return function(e){var t=kH(e);return function(n){var a=t(n);return function(d){return function(r){return function(o){return function(l){return function(u){return nS(new mf(a(d)(r)(o)(l)(function(i){return k.create(u(i))})))}}}}}}}};function BH(e){return e.target}function bs(e){return function(){return e.stopPropagation()}}var TS=function(e){return Xt(BH(e))};var MS="DOMContentLoaded";var WH="change";var zH="keyup",VH="keydown";var GH="mouseup",JH="mouseover";var jH="mousemove",KH="mouseleave",QH="mouseenter",XH="mousedown",YH="dblclick",ZH="click";var yf=ne,ws=ne,eO=ne;var Br=function(e){return function(t){return oS(e)(function(n){return new k(new Ac(t(n)))})}};var Df=Br(WH),ou=function(){var e=Br(ZH);return function(t){return e(ws(t))}}(),tO=function(){var e=Br(YH);return function(t){return e(ws(t))}}();var nO=function(){var e=Br(VH);return function(t){return e(eO(t))}}(),rO=function(){var e=Br(zH);return function(t){return e(eO(t))}}();var oO=function(){var e=Br(XH);return function(t){return e(ws(t))}}(),aO=function(){var e=Br(QH);return function(t){return e(ws(t))}}(),iO=function(){var e=Br(KH);return function(t){return e(ws(t))}}(),uO=function(){var e=Br(jH);return function(t){return e(ws(t))}}();var sO=function(){var e=Br(JH);return function(t){return e(ws(t))}}(),cO=function(){var e=Br(GH);return function(t){return e(ws(t))}}();var lO=function(){var e=Br("touchcancel");return function(t){return e(yf(t))}}(),fO=function(){var e=Br("touchend");return function(t){return e(yf(t))}}(),dO=function(){var e=Br("touchenter");return function(t){return e(yf(t))}}(),pO=function(){var e=Br("touchleave");return function(t){return e(yf(t))}}(),hO=function(){var e=Br("touchmove");return function(t){return e(yf(t))}}(),Tm=function(){var e=Br("touchstart");return function(t){return e(yf(t))}}();function Mm(e){return e.touches}var Nc=ne;var xS=ne;function xm(e){return e.clientX}function Fm(e){return e.clientY}var ko=ne;var FS=nt(rt)(Nt),vO=ee(Nt),gO={reflectSymbol:function(){return"canvas"}},LS=yr()(gO)(jt),mO=ct(Yt)(Ht),lG=aa()(gO)(jt),fG=de(_e),yO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Im=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),DO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$m=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),CO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Om=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),km=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),SO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),EO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),IS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),RS=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$S=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),AS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ss=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dG={toEvent:function(e){if(e instanceof yO)return Nc(e.value0);if(e instanceof Im)return Nc(e.value0);if(e instanceof DO)return Nc(e.value0);if(e instanceof Rm)return Nc(e.value0);if(e instanceof $m)return Nc(e.value0);if(e instanceof Hm)return Nc(e.value0);throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 135, column 1 - line 141, column 48): "+[e.constructor.name])}},pG={toEvent:function(e){if(e instanceof CO)return ko(e.value0);if(e instanceof bO)return ko(e.value0);if(e instanceof Om)return ko(e.value0);if(e instanceof Pm)return ko(e.value0);if(e instanceof wO)return ko(e.value0);if(e instanceof km)return ko(e.value0);if(e instanceof Nm)return ko(e.value0);throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 126, column 1 - line 133, column 47): "+[e.constructor.name])}},hG={toEvent:function(e){if(e instanceof SO)return xS(e.value0);if(e instanceof EO)return xS(e.value0);throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 122, column 1 - line 124, column 46): "+[e.constructor.name])}},_G=function(e){return e.toEvent},HS=function(e){var t=_G(e);return function(n){return bs(t(n))}},vG=HS(hG),mG=HS(pG),gG=HS(dG),Am=function(){return pt.value}(),yG=function(e){var t=Le(An(e.MonadEffect0()));return function(n){return function(a){if(a instanceof AS)return FS(t(vG(a.value0)))(function(){return tr(new IS(a.value0))});if(a instanceof Ss)return FS(t(mG(a.value0)))(function(){return vO(LS(Am)(void 0)(gw))(function(d){return $e(mO)(d)(function(r){return tr(new RS(a.value0,r))})})});if(a instanceof Bc)return FS(t(gG(a.value0)))(function(){return vO(LS(Am)(void 0)(gw))(function(d){return $e(mO)(d)(function(r){return tr(new $S(a.value0,r))})})});throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 103, column 16 - line 116, column 32): "+[a.constructor.name])}}},DG=function(e){var t=gf(e);return function(n){var a=t(n);return function(d){return Gt([nO(function(r){return AS.create(SO.create(r))}),rO(function(r){return AS.create(EO.create(r))}),ou(function(r){return Ss.create(CO.create(r))}),tO(function(r){return Ss.create(bO.create(r))}),oO(function(r){return Ss.create(Om.create(r))}),cO(function(r){return Ss.create(Pm.create(r))}),aO(function(r){return Ss.create(wO.create(r))}),iO(function(r){return Ss.create(km.create(r))}),uO(function(r){return Ss.create(Nm.create(r))}),lO(function(r){return Bc.create(yO.create(r))}),fO(function(r){return Bc.create(Im.create(r))}),dO(function(r){return Bc.create(DO.create(r))}),pO(function(r){return Bc.create(Rm.create(r))}),hO(function(r){return Bc.create($m.create(r))}),Tm(function(r){return Bc.create(Hm.create(r))})])([lG(Am)(void 0)(a)(d)])}}},TO=function(e){var t=DG(e),n=yG(e);return function(a){return en({initialState:fG,render:t(a),eval:Zt({receive:it.receive,initialize:it.initialize,finalize:it.finalize,handleAction:n(a),handleQuery:LS(Am)(void 0)})})}};var fi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),So=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),po=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var xO=function(e){return e instanceof po?new k(e.value1):e instanceof So?new k(e.value0):z.value},FO=function(e){return e instanceof po?new k(e.value0):e instanceof fi?new k(e.value0):z.value};var LO=function(e){var t=De(e);return function(n){var a=De(n);return{append:function(d){return function(r){if(d instanceof fi&&r instanceof fi)return new fi(t(d.value0)(r.value0));if(d instanceof fi&&r instanceof So)return new po(d.value0,r.value0);if(d instanceof fi&&r instanceof po)return new po(t(d.value0)(r.value0),r.value1);if(d instanceof So&&r instanceof fi)return new po(r.value0,d.value0);if(d instanceof So&&r instanceof So)return new So(a(d.value0)(r.value0));if(d instanceof So&&r instanceof po)return new po(r.value0,a(d.value0)(r.value1));if(d instanceof po&&r instanceof fi)return new po(t(d.value0)(r.value0),d.value1);if(d instanceof po&&r instanceof So)return new po(d.value0,a(d.value1)(r.value0));if(d instanceof po&&r instanceof po)return new po(t(d.value0)(r.value0),a(d.value1)(r.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[d.constructor.name,r.constructor.name])}}}}};var AG=De(Js),IG=st(Ii),IO=rc(vt),RO=IO(Ii),Wm=qa(vt)(Ii),di=V(mt),PS=ht(js),RG=De(ln),$O=kn(vt),$G=$O(Ii),HG=Q0(wA),Um=V(Dt),OG=Mt(ix),HO=ee(zr),PG=v_(rD(vt)),OO=V(Rd(mt));var kG=p_(vt)(no),NG=ee(wu),BG=T_(Od),WG=va(Dd(_a)),UG=qa(M_(vt))(Ii),qG=Ee(Er),qm=function(e){return e},zG=function(e){return e},kS=function(e){return function(t){return function(n){return t+(e+n)}}},VG={append:function(e){return function(t){return e+t}}},GG={append:function(e){return function(t){return e+t}}},PO=LO(VG)(GG),kO=aF(PO),Bm=$O(kO),JG=IO(kO),kp=De(_0(PO)),AO=function(e){var t=En(function(n){return IG})(function(n){return RO([n.value0,": ",n.value1])});return Wm("; ")(di(t)(e))},jG=function(e){if(e instanceof zu)return"#"+e.value0;if(e instanceof Wi)return"."+e.value0;if(e instanceof Vu)return"["+(e.value0+"]");if(e instanceof Gu)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof Ju)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof ju)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof Ku)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof Qu)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof Xu)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof Ui)return":"+e.value0;if(e instanceof Wl)return":"+(e.value0+("("+(Wm(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},KG=function(e){return function(t){if(e.length===0&&t instanceof P_)return["*"];if(t instanceof P_)return[""];if(t instanceof CD)return[t.value0];if(t instanceof bD)return PS(di(kS(" > "))(au(t.value0)))(au(t.value1));if(t instanceof wD)return PS(di(kS(" "))(au(t.value0)))(au(t.value1));if(t instanceof DA)return PS(di(kS(" + "))(au(t.value0)))(au(t.value1));if(t instanceof CA)return RG(au(t.value0))(au(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},au=function(e){return di(function(t){return t+$G(jG)(HG(e.value0))})(KG(e.value0)(e.value1))},QG=function(){var e=Wm(", ");return function(t){return e(au(t))}}(),Wc=function(e){return e.length===0?z.value:Um(function(t){return new io(t.head,t.tail)})(y_(e))};var bf=function(e){if(e.value0 instanceof AA)return Ke(e.value0.value0)(function(t){return SA(bf(t))(e.value0.value0)})(Wc(e.value1));if(e.value0 instanceof AD)return Ke(e.value0.value0)(function(t){return Jn(bf(t))(e.value0.value0)})(Wc(e.value1));if(e.value0 instanceof FA)return Ke(e.value0.value0)(function(t){return Jn(e.value0.value0)(bf(t))})(Wc(e.value1));if(e.value0 instanceof LA)return Ke(k_("TODO"))(bf)(Wc(Z0(e.value0.value0)(Dn(e.value0)(e.value1))));if(e.value0 instanceof xA)return Ke(ft(zt)(e.value0.value0))(function(t){return ft(bf(t))(e.value0.value0)})(Wc(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},XG=function(e){return Nd(e)},YG=function(e){return k.create(So.create(qm(OG("@import url("+(e+`);
`)))))},ZG=function(e){return e},NS=function(e){return HO(e)(function(){var t=Um(ZG);return function(n){return t(xO(n))}}())},e9=function(e){return e},NO=function(e){return HO(e)(function(){var t=Um(e9);return function(n){return t(FO(n))}}())},t9=function(e){return Ke(e.value0)(function(t){return"("+(e.value0+(": "+(Nd(t)+")")))})(e.value1)},n9=function(e){return"@media "+(XG(e.value1)+PG(AG)(OO(function(t){return function(n){return" and "+n}(t9(t))})(e.value2)))};var r9=function(e){return function(t){if(e instanceof so&&t instanceof so)return[new Oe(new Z(e.value0,t.value0))];if(e instanceof uo&&t instanceof so)return di(function(n){return new Oe(new Z(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof so&&t instanceof uo)return di(function(n){return new Oe(new Z(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof uo&&t instanceof uo)return di(function(n){return Ke(new We(n.value0+n.value1))(function(){var a=Z.create(n.value0+n.value1);return function(d){return Oe.create(a(function(r){return n.value0+r}(d)))}}())(kG(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},BS=function(e){return r9(e.value0)(e.value1)},o9=function(e){return function(t){var n=NG(t)(BS),a=Um(function(r){return fi.create(zG(AO(BG(r))))})(Wc(n)),d=function(r){return k.create(So.create(qm(Wm(" ")([QG(bf(r)),"{",AO(n),`}
`]))))};return Ke(a)(d)(Wc(e))}},Np=function(e){return function(t){var n=function(_){return _ instanceof IA?new k(new Z(_.value0,_.value1)):z.value},a=Bm(Au($e(a9)(e)))(za(n)(t)),d=function(_){return _ instanceof Vd?new k(new Z(_.value0,_.value1)):z.value},r=function(){var _=za(d)(t),v=WG(cc)(_);return v?o9(e)(_):z.value}(),o=function(_){return Np(Dn(_)(e))},l=function(_){return _ instanceof ID?new k(new Z(_.value0,_.value1)):z.value},u=JG(di(Au(o))(za(l)(t))),i=function(_){return _ instanceof $A?new k(_.value0):z.value},s=Bm(i9)(za(i)(t)),f=function(_){return _ instanceof HA?new k(_.value0):z.value},h=Bm(YG)(za(f)(t)),p=function(_){return _ instanceof RA?new k(_.value0):z.value},c=Bm(s9)(za(p)(t));return kp(r)(kp(h)(kp(s)(kp(c)(kp(u)(a)))))}},a9=function(e){return function(t){return function(n){return k.create(So.create(qm(n9(e)+(" { "+(or("")(NS(Np(t)(n)))+` }
`)))))}}},i9=function(e){var t=" "+(e.value0+(" { "+(UG(" ")(OO(Au(u9))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],a=RO(di(function(d){return d+t})(n));return new k(new So(a))},u9=function(e){return function(t){var n=or("")(NO(Np([])(t)));return qG(e)+("% "+("{ "+(n+" }")))}},s9=function(e){return k.create(So.create(qm("@font-face { "+(or("")(NO(Np([])(e)))+` }
`))))},BO=function(){var e=Np([]);return function(t){return e(Gd(t))}}();var l9=$H(rS),f9=ee(wu),d9=Ep(vt),WO=function(e){var t=or("")(NS(BO(e)));return CS([l9("text/css")])([jn(t)])},wn=function(){var e=function(){var r=mo("; "),o=j$(Lu)(function(l){return function(u){return[l+(": "+u)]}});return function(l){return r(o(l))}}(),t=tD(kn(d_)(Lu)(sc)),n=function(r){return r instanceof Vd?new k(new Z(r.value0,r.value1)):z.value},a=function(r){var o=f9(za(n)(r))(function(l){return t(BS(l))});return d9(o)},d=wS("style");return function(r){return d(e(a(Gd(r))))}}();function zm(e){return e.clientX}function Vm(e){return e.clientY}function UO(e,t){return t.item(e)}var WS=function(e){return function(t){return Xt(UO(e,t))}};var qS=nt(rt),GO=qS(Do),v9=gn(NA),JO=Ie(xu(Na)),qO=Ee(eF()()(nF({reflectSymbol:function(){return"x"}})(rF({reflectSymbol:function(){return"y"}})(Er))(Er))),m9=V(mt),wf=Rr(It),pi=Io(It),zO=V(Dt),Ts=qS(ai),g9=ut(a$),y9=Al(Id)(vw),D9=ut($n),jO={reflectSymbol:function(){return"sketch"}},C9=yr()(jO)(jt),VO=ee(ai),Gm=ee(Nt),b9=qS(Nt),w9=pn(It),S9=de(_e),E9=ci()(jO)(jt),KO=function(){function e(){}return e.value=new e,e}(),QO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),US=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),XO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),T9=function(e){return function(t){return function(n){var a=function(d){return Gt([wn(GO(bc(Cc)(Xe(1))(Ko))(function(){return v9(JO(new k(d.value0))(n.selected))(rp(Ga(180)(180)(180)))})),sO(ve(new US(d.value0))),Tm(ve(new US(d.value0)))])([Cs([ou(ve(new XO(d.value0)))])([jn("delete")]),jn(qO(d.value1.value0)+(" "+qO(d.value1.value1)))])};return Dr(m9(a)(J0(X0(0)(rr(n.lines)))(n.lines)))}}},M9=function(e){if(e instanceof IS)return wf;if(e instanceof RS){if(e.value0 instanceof km)return pi(function(d){return{dimensions:d.dimensions,lines:d.lines,selected:d.selected,line:z.value}});if(e.value0 instanceof Pm)return pi(function(d){return{dimensions:d.dimensions,selected:d.selected,line:z.value,lines:function(){if(d.line instanceof z)return d.lines;if(d.line instanceof k)return Dn(d.line.value0)(d.lines);throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 141, column 19 - line 143, column 42): "+[d.line.constructor.name])}()}});if(e.value0 instanceof Om){var t={x:Vn(xm(e.value0.value0))-e.value1.left,y:Vn(Fm(e.value0.value0))-e.value1.top};return pi(function(d){return{dimensions:d.dimensions,lines:d.lines,selected:d.selected,line:Ke(new k(new Z(t,t)))(k.create)(d.line)}})}if(e.value0 instanceof Nm){var t={x:Vn(xm(e.value0.value0))-e.value1.left,y:Vn(Fm(e.value0.value0))-e.value1.top},n=function(r){return new Z(r.value0,t)};return pi(function(r){return{dimensions:r.dimensions,lines:r.lines,selected:r.selected,line:zO(n)(r.line)}})}return wf}if(e instanceof $S){if(e.value0 instanceof Hm){var a=WS(0)(Mm(e.value0.value0));if(a instanceof z)return wf;if(a instanceof k){var t={x:Vn(zm(a.value0))-e.value1.left,y:Vn(Vm(a.value0))-e.value1.top};return pi(function(r){return{dimensions:r.dimensions,lines:r.lines,selected:r.selected,line:Ke(new k(new Z(t,t)))(k.create)(r.line)}})}throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 156, column 11 - line 160, column 78): "+[a.constructor.name])}if(e.value0 instanceof $m){var a=WS(0)(Mm(e.value0.value0));if(a instanceof z)return wf;if(a instanceof k){var t={x:Vn(zm(a.value0))-e.value1.left,y:Vn(Vm(a.value0))-e.value1.top},n=function(l){return new Z(l.value0,t)};return pi(function(l){return{dimensions:l.dimensions,lines:l.lines,selected:l.selected,line:zO(n)(l.line)}})}throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 162, column 11 - line 167, column 62): "+[a.constructor.name])}return e.value0 instanceof Im?pi(function(d){return{dimensions:d.dimensions,selected:d.selected,line:z.value,lines:function(){if(d.line instanceof z)return d.lines;if(d.line instanceof k)return Dn(d.line.value0)(d.lines);throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 172, column 22 - line 174, column 45): "+[d.line.constructor.name])}()}}):e.value0 instanceof Rm?pi(function(d){return{dimensions:d.dimensions,lines:d.lines,selected:d.selected,line:z.value}}):wf}throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 132, column 3 - line 177, column 19): "+[e.constructor.name])},x9=function(e){return Ts(Lc(Ga(255)(255)(200)))(function(){return Ts(hp({x:0,y:0,width:400,height:400}))(function(){return Ts(l$(5))(function(){return g9($e(y9)(Ke(e.lines)($e(Dn)(e.lines))(e.line))(function(t){return function(n){return Ts(p$)(function(){return Ts(s$(n.value0))(function(){return Ts(u$(n.value1))(function(){return Ts(function(){var a=JO(new k(t))(e.selected);return a?mw(Ga(255)(0)(0)):mw(Ga(0)(0)(0))}())(function(){return f$})})})})}}))})})})},YO=function(){return pt.value}(),F9=function(){var e=function(t){return D9(C9(YO)(void 0)(Gv(VO(Jv)(function(n){return VO(jv)(function(a){return Ts(Kv({x:0,y:0,width:n,height:a}))(function(){return x9(t)})})}))))};return function(t){if(t instanceof KO)return Gm(wf)(e);if(t instanceof QO)return b9(w9(function(n){var a={};for(var d in n)({}).hasOwnProperty.call(n,d)&&(a[d]=n[d]);return a.selected=z.value,a}))(function(){return Gm(M9(t.value0))(function(n){return e(n)})});if(t instanceof US)return Gm(pi(function(n){return{dimensions:n.dimensions,line:n.line,lines:n.lines,selected:new k(t.value0)}}))(function(n){return e(n)});if(t instanceof XO)return Gm(pi(function(n){return{dimensions:n.dimensions,line:n.line,selected:z.value,lines:Ke(n.lines)(S9)(w_(t.value0)(n.lines))}}))(function(n){return e(n)});throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 89, column 3 - line 102, column 21): "+[t.constructor.name])}}(),L9=function(e){var t=TO(e),n=T9(e);return function(a){var d=t(a),r=n(a);return function(o){return Gt([wn(GO(Ho(zi))(function(){return Vi(es)}))])([E9(YO)(void 0)(d)(o.dimensions)(QO.create),Dr([Hp([jn("Lines")]),r(o)])])}}},ZO=function(e){var t=L9(e);return function(n){return en({initialState:ve({dimensions:{width:400,height:400},line:z.value,lines:[],selected:z.value}),render:t(n),eval:Zt({handleQuery:it.handleQuery,receive:it.receive,finalize:it.finalize,initialize:new k(KO.value),handleAction:F9})})}};var k9=kn(Bn),N9=dn(Bn),B9=mn(Bn);var W9=function(e){return e};var zS=function(e){return iI(e)};var tP=W9,nP={foldMap:function(e){var t=k9(e);return function(n){var a=t(n);return function(d){return a(zS(d))}}},foldl:function(e){return function(t){var n=N9(e)(t);return function(a){return n(zS(a))}}},foldr:function(e){return function(t){var n=B9(e)(t);return function(a){return n(zS(a))}}}};var rP=function(){var e=ut(Ql);return function(t){return tP(e(t))}}();function oP(e){return function(t){return function(){return setInterval(t,e)}}}function aP(e){return function(){clearInterval(e)}}var iP=oP;var uP=aP;var V9=nt(rt),sP=V(Dt),G9=Za(yt),jm=ee(Qt),VS=Le(Cn),J9=V9(Qt),GS=X(jr),j9=V($r),K9=yn(Xi);var Q9=ct(jr)(Bn),X9=sr(tf);var Y9=function(e){return e},Z9=function(e){var t=function(){var d=Qe(e)();if(d instanceof z)return z.value;if(d instanceof k){var r=rs(d.value0.releasers);if(r instanceof z)return z.value;if(r instanceof k)return oo(sP(function(o){return{nextKey:o.nextKey,references:o.references,releasers:G9(r.value0.key)(o.releasers)}}))(e)(),new k(r.value0.value);throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 104, column 33 - line 108, column 32): "+[r.constructor.name])}throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 102, column 11 - line 108, column 32): "+[d.constructor.name])},n=function(a){return jm(VS(t))(function(d){if(d instanceof z)return J9(VS(qt(z.value)(e)))(function(){return GS(new Bt(a))});if(d instanceof k)return jm(GI(d.value0))(function(r){return GS(new Pt(En(function(o){return new Ye(o,a)})(ve(a))(r)))});throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 92, column 11 - line 98, column 68): "+[d.constructor.name])})};return j9(Yi)(K9(n)(Ze.value))};var cP=function(){var e=new k({nextKey:0,references:1,releasers:vr});return V(ke)(Y9)(fn(e))}(),lP=function(e){return pC(jm(VS(o_(sP(function(t){return{nextKey:t.nextKey,releasers:t.releasers,references:t.references-1|0}}))(e)))(function(t){return t instanceof k&&t.value0.references===0?jm(Z9(e))(Q9(X9)):GS(void 0)}))};var tJ=ee(Qt),nJ=Le(Cn);var rJ=function(e){return function(t){return tJ(nJ(cP))(function(n){return Qd(lP(n))(e(t(n)))})}},Km=rJ(de(_e));var JS=function(e){var t=V(e);return{map:function(n){return function(a){var d=t(n);return function(r){return d(a(r))}}}}},fP=function(e){var t=ht(e),n=JS(e.Functor0());return{apply:function(a){return function(d){return function(r){return t(a(r))(d(r))}}},Functor0:function(){return n}}},oJ=function(e){var t=ee(e),n=fP(e.Apply0());return{bind:function(a){return function(d){return function(r){return t(a(r))(function(o){var l=d(o);return l(r)})}}},Apply0:function(){return n}}};var aJ=function(e){var t=X(e),n=fP(e.Apply0());return{pure:function(a){return function(d){return t(a)}},Apply0:function(){return n}}},Qm=function(e){var t=aJ(e.Applicative0()),n=oJ(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}};var Kr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var iJ=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return{map:function(a){return function(d){var r=function(o){if(o instanceof Kr)return new Kr(o.value0,function(l){return r(o.value1(l))});if(o instanceof Qr)return new Qr(o.value0,function(l){return r(o.value1(l))});if(o instanceof Xr)return new Xr(t(o.value0)(function(l){return n(r(l))}));if(o instanceof Cr)return new Cr(a(o.value0));throw new Error("Failed pattern match at Pipes.Internal (line 28, column 12 - line 32, column 41): "+[o.constructor.name])};return r(d)}}}};var Bp=function(e){var t;function n(a){e=a}for(;;)t=n(e);return t},jS=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0()),a=iJ(e),d=V(a);return{apply:function(r){return function(o){var l=function(u){if(u instanceof Kr)return new Kr(u.value0,function(i){return l(u.value1(i))});if(u instanceof Qr)return new Qr(u.value0,function(i){return l(u.value1(i))});if(u instanceof Xr)return new Xr(t(u.value0)(function(i){return n(l(i))}));if(u instanceof Cr)return d(u.value0)(o);throw new Error("Failed pattern match at Pipes.Internal (line 36, column 13 - line 40, column 33): "+[u.constructor.name])};return l(r)}},Functor0:function(){return a}}},Sf=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0()),a=jS(e);return{bind:function(d){return function(r){var o=function(l){if(l instanceof Kr)return new Kr(l.value0,function(u){return o(l.value1(u))});if(l instanceof Qr)return new Qr(l.value0,function(u){return o(l.value1(u))});if(l instanceof Xr)return new Xr(t(l.value0)(function(u){return n(o(u))}));if(l instanceof Cr)return r(l.value0);throw new Error("Failed pattern match at Pipes.Internal (line 47, column 12 - line 51, column 28): "+[l.constructor.name])};return o(d)}},Apply0:function(){return a}}};var Ef=function(e){var t=jS(e);return{pure:Cr.create,Apply0:function(){return t}}},pP=function(e){var t=Ef(e),n=Sf(e);return{Applicative0:function(){return t},Bind1:function(){return n}}},hP=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0()),a=pP(e);return{tailRecM:function(d){return function(r){var o=function(l){if(l instanceof Cr&&l.value0 instanceof Pt)return o(d(l.value0.value0));if(l instanceof Cr&&l.value0 instanceof Bt)return new Cr(l.value0.value0);if(l instanceof Xr)return new Xr(t(l.value0)(function(u){return n(o(u))}));if(l instanceof Kr)return new Kr(l.value0,function(u){return o(l.value1(u))});if(l instanceof Qr)return new Qr(l.value0,function(u){return o(l.value1(u))});throw new Error("Failed pattern match at Pipes.Internal (line 163, column 10 - line 168, column 52): "+[l.constructor.name])};return o(d(r))}},Monad0:function(){return a}}};var _P=function(e){return function(t){return new Qr(t,Cr.create)}},vP=function(e){return function(t){return new Kr(t,Cr.create)}};var KS=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(a){return function(d){if(a instanceof Kr)return new Kr(a.value0,function(r){return KS(e)(a.value1(r))(d)});if(a instanceof Qr)return Wp(e)(a.value1)(d(a.value0));if(a instanceof Xr)return new Xr(t(a.value0)(function(r){return n(KS(e)(r)(d))}));if(a instanceof Cr)return new Cr(a.value0);throw new Error("Failed pattern match at Pipes.Core (line 222, column 21 - line 226, column 29): "+[a.constructor.name])}}},Wp=function(e){var t=V(e.Bind1().Apply0().Functor0());return function(n){return function(a){if(a instanceof Kr)return KS(e)(n(a.value0))(a.value1);if(a instanceof Qr)return new Qr(a.value0,function(d){return function(r){return Wp(e)(n)(r)}(a.value1(d))});if(a instanceof Xr)return new Xr(t(function(d){return Wp(e)(n)(d)})(a.value0));if(a instanceof Cr)return new Cr(a.value0);throw new Error("Failed pattern match at Pipes.Core (line 197, column 22 - line 201, column 29): "+[a.constructor.name])}}};var Ym=function(e){return _P(e)};var QS=function(e){var t=Wp(e);return function(n){return function(a){return t(ve(n))(a)}}};var mP=function(e){return vP(e)(void 0)};var gP=Ee(ro),SP=Te(yt),EP=nt(rt),sJ=EP(Do),cJ=de(_e),yP=bl(wl),Zm=Qm(ti),DP=EP(Sf(Zm)),CP=Ym(Zm),bP=X(Ef(Zm)),wP=yn(hP(Zm));var lJ={eq:function(e){return function(t){return e===t}}},YS={compare:function(e){return function(t){return SP(e)(t)}},Eq0:function(){return lJ}},fJ={pageOrder:function(e){return function(t){return SP(e)(t)}},Ord0:function(){return YS}},dJ=function(e){return{element:function(){var t=function(n){return Gt([wn(bc(Cc)(Xe(1))(Ko))])([jn(gP(n)),gS([RH("https://picsum.photos/"+gP(n)),wn(sJ(wa(Xe(400)))(function(){return Oo(Xe(400))}))])])};return en({initialState:cJ,render:t,eval:Zt(it)})}(),PageOrder0:function(){return fJ},MonadAff1:function(){return e}}},TP=function(e){var t=X(e.MonadEffect0().Monad0().Applicative0()),n=dJ(e);return{feedAbove:function(a){var d=function(r){var o=yP(r-1|0)(300);return DP(CP(o))(function(){return bP(new Pt(o))})};return t(wP(d)(a))},feedBelow:function(a){var d=function(r){var o=yP(r+1|0)(300);return DP(CP(o))(function(){return bP(new Pt(o))})};return t(wP(d)(a))},feedInsert:t(z.value),feedDelete:t(z.value),onElement:function(a){return t(void 0)},PageElement0:function(){return n},MonadAff1:function(){return e}}};var ia=function(){return window};function MP(e){return e.readyState}var Up=function(){function e(){}return e.value=new e,e}(),mJ=function(){function e(){}return e.value=new e,e}(),gJ=function(){function e(){}return e.value=new e,e}();var xP=function(e){return e==="loading"?new k(Up.value):e==="interactive"?new k(mJ.value):e==="complete"?new k(gJ.value):z.value};var DJ=V(ke);var LP=ne;var AP=ne;var IP=function(e){return DJ(function(){var t=or(Up.value);return function(n){return t(xP(n))}}())(function(){return MP(e)})};function $P(e,t,n){var a=Object.prototype.toString.call(n);return a.indexOf("[object HTML")===0&&a.indexOf("Element]")===a.length-8?t(n):e}var HP=ne;var qp=function(e){return $P(z.value,k.create,e)};function ZS(e){return function(){return e.hash}}function Tf(e){return function(){return e.document}}function eE(e){return function(){return e.location}}var kP=ne;var NP=ee(Qt),pj=Le(Cn),nE=Sn(Fr),hj=hl(Fr),BP=X(jr),_j=Sn(zr),vj=X(on),mj=V(ke),gj=nt(rt),yj=sr(tf),Dj=function(e){return NP(pj(nE(hj(function(){var t=n$(e);return function(n){return t(LP(n))}}())(Tf))(ia)))(function(t){return BP(_j(qp)(t))})},rE=Zd(En(go)(ve(vj(void 0)))),Cj=Ea(function(e){return function(){var n=nE(IP)(nE(Tf)(ia))();if(n instanceof Up){var a=mj(kP)(ia)(),d=Tp(function(r){return e(new Oe(void 0))})();return Kw(MS)(d)(!1)(a)(),xc(Qw(MS)(d)(!1)(a))}return e(new Oe(void 0))(),hC}}),oE=gj(Qt)(Cj)(function(){return NP(Dj("body"))(function(e){return Ke(yj(ur("Could not find body")))(BP)(e)})});var aE=Mt(ir),UP=Mt(Gn);var bj={value:function(e){return e}},qP=Kt(bj),ng=aE("scroll"),rg=qP(UP("overflow-y"));var zP=aE("auto"),Uc=qP(UP("overflow")),zp=aE("hidden");var Vp=function(e){return function(t){var n=e(t);return n.value1}};var ua=function(){function e(){this.head=null,this.last=null,this.size=0}function t(s,f){this.queue=s,this.value=f,this.next=null,this.prev=null}function n(s){this.draining=!1,this.error=null,this.value=s,this.takes=new e,this.reads=new e,this.puts=new e}var a={};function d(s){try{s()}catch(f){setTimeout(function(){throw f},0)}}function r(s,f){var h=new t(s,f);switch(s.size){case 0:s.head=h;break;case 1:h.prev=s.head,s.head.next=h,s.last=h;break;default:h.prev=s.last,s.last.next=h,s.last=h}return s.size++,h}function o(s){var f;switch(s.size){case 0:return null;case 1:f=s.head,s.head=null;break;case 2:f=s.last,s.head.next=null,s.last=null;break;default:f=s.last,s.last=f.prev,s.last.next=null}return f.prev=null,f.queue=null,s.size--,f.value}function l(s){var f;switch(s.size){case 0:return null;case 1:f=s.head,s.head=null;break;case 2:f=s.head,s.last.prev=null,s.head=s.last,s.last=null;break;default:f=s.head,s.head=f.next,s.head.prev=null}return f.next=null,f.queue=null,s.size--,f.value}function u(s){if(s.queue!==null){if(s.queue.last===s){o(s.queue);return}if(s.queue.head===s){l(s.queue);return}s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),s.queue.size--,s.queue=null,s.value=null,s.next=null,s.prev=null}}function i(s,f){if(!f.draining){var h=f.puts,p=f.takes,c=f.reads,_,v,m,y,C;for(f.draining=!0;;){if(_=null,v=null,m=null,y=f.value,C=c.size,f.error!==null){for(y=s.left(f.error);_=l(h);)d(_.cb(y));for(;v=l(c);)d(v(y));for(;m=l(p);)d(m(y));break}if(y===a&&(_=l(h))&&(f.value=y=_.value),y!==a){for(m=l(p);C--&&(v=l(c));)d(v(s.right(y)));m!==null&&(f.value=a,d(m(s.right(y))))}if(_!==null&&d(_.cb(s.right(void 0))),f.value===a&&h.size===0||f.value!==a&&p.size===0)break}f.draining=!1}}return n.EMPTY=a,n.putLast=r,n.takeLast=o,n.takeHead=l,n.deleteCell=u,n.drainVar=i,n}();function uE(){return new ua(ua.EMPTY)}function GP(e){return function(){return new ua(e)}}function JP(e,t,n,a){return function(){var d=ua.putLast(n.puts,{cb:a,value:t});return ua.drainVar(e,n),function(){ua.deleteCell(d)}}}function jP(e,t,n){return function(){var a=ua.putLast(t.takes,n);return ua.drainVar(e,t),function(){ua.deleteCell(a)}}}function KP(e,t){return function(){var n=t.value;return n===ua.EMPTY?e.nothing:(t.value=ua.EMPTY,ua.drainVar(e,t),e.just(n))}}var QP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),XP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),YP=function(){function e(){}return e.value=new e,e}(),ZP=GP;var sE=function(){return{left:We.create,right:Oe.create,nothing:z.value,just:k.create,killed:QP.create,filled:XP.create,empty:YP.value}}();var ek=function(e){return function(t){return function(n){return JP(sE,e,t,n)}}};var tk=function(e){return function(t){return jP(sE,e,t)}};var nk=function(e){return KP(sE,e)};var cE=Le(Cn),rk=function(e){return cE(nk(e))};var lE=function(e){return Ea(function(t){return function(){var a=tk(e)(t)();return xc(a)}})};var Gp=function(e){return function(t){return Ea(function(n){return function(){var d=ek(e)(t)(n)();return xc(d)}})}},ok=function(e){return cE(ZP(e))};var fE=cE(uE);var og=function(e){return e};var Mj=Ep(vt);var ik=ln,qc=function(e){return Fc(Mj(e))};var uk=Lu;var xj=function(e){return function(t){return[new Z(e,Fc(t))]}},iu=function(e){return og(xj(e))},Jp=In();var sk=e=>t=>()=>{let n=(a,d)=>{e(a)(d)()};return new IntersectionObserver(n,t)},pE=e=>t=>()=>{e.observe(t)};var ck=function(e){return function(t){return sk(e)(qc(t))}};var lk=iu("root");var fk=e=>()=>{let t=(n,a)=>{e(n)(a)()};return new ResizeObserver(t)},hE=e=>t=>()=>{e.observe(t)};var dk=function(e){return fk(e)};var _E=V(mt),$j=aa()({reflectSymbol:function(){return"pageElement"}}),jp=nt(rt)(Nt),pk=pn(It),hk=X(Yt),uu=ee(Nt),Hj=Io(It),Oj=gn(Yt),vE=Ro(It),_k=ut($n),Pj=qr(wm),kj=ct(Yt)(Ht),vk=N0(vt)(l0),Nj=de(_e),mE=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bj=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),gE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),DE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mk=function(){function e(){}return e.value=new e,e}(),gk=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yk=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Kp=function(e){return e.pageOrder},Wj=function(e){return e.element},Uj=function(){return pt.value}(),Dk=function(e){var t=e.PageOrder0(),n=t.Ord0(),a=$j(n),d=Wj(e),r=Ld(n),o=Kp(t),l=eD(n.Eq0()),u=Le(An(e.MonadAff1().MonadEffect0())),i=function(h){return Gt([si("page"),wn(Uc(zP))])(_E(function(p){return a(Uj)(p)(d)(p)})(h.elements))},s=function(h){if(h instanceof mE)return jp(pk(function(p){var c={};for(var _ in p)({}).hasOwnProperty.call(p,_)&&(c[_]=p[_]);return c.elements=r(Ad(o)(h.value0)(p.elements)),c}))(function(){return hk(new k(h.value1))});if(h instanceof Bj)return uu(Hj(function(p){var c={};for(var _ in p)({}).hasOwnProperty.call(p,_)&&(c[_]=p[_]);return c.elements=l(h.value0)(p.elements),c}))(function(p){return jp(Oj(cc(p.elements))(tr(new DE(p.id))))(function(){return hk(new k(h.value1))})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 89, column 5 - line 89, column 99): "+[h.constructor.name])},f=function(h){if(h instanceof mk){var p=function(m){return uu(vE(function(y){return y.parent}))(function(y){return uu(u(Qn))(function(C){return jp(_k(Rn(C.emitter)))(function(){return uu(u(ck(function(S){return function(D){return Kn(C.listener)(new yk(S))}})(Jp(lk)(y))))(function(S){return u(pE(S)(m))})})})})},c=function(m){return uu(u(Qn))(function(y){return jp(_k(Rn(y.emitter)))(function(){return uu(u(dk(function(C){return function(S){return Kn(y.listener)(new gk(C))}})))(function(C){return u(hE(C)(m))})})})},_=function(m){return Pj(c(m))(p(m))};return uu(Pr("page"))(kj(_))}if(h instanceof gk)return uu(vE(function(m){return m.id}))(function(m){var y=vk(_E(function(C){return C.contentRect.height})(h.value0));return tr(new gE({id:m,height:y}))});if(h instanceof yk){var v=vk(_E(function(m){return m.intersectionRect.height})(h.value0));return uu(vE(function(m){return m.id}))(function(m){return jp(pk(function(y){var C={};for(var S in y)({}).hasOwnProperty.call(y,S)&&(C[S]=y[S]);return C.visibleHeight=v,C}))(function(){return tr(new yE({id:m,height:v}))})})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 98, column 5 - line 98, column 81): "+[h.constructor.name])};return en({initialState:Nj,render:i,eval:Zt({receive:it.receive,finalize:it.finalize,handleAction:f,handleQuery:s,initialize:new k(mk.value)})})};var qj=ml(yt),zj=Fi(yt),Vj=lv(jo),Gj=V(Ql),zc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ms=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jj={append:function(e){return function(t){if(e instanceof Ms)return new Ms(e.value0);if(t instanceof Ms)return new Ms(t.value0);if(e instanceof zc&&t instanceof zc)return new zc(qj(e.value0)(t.value0));if(e instanceof Vc&&t instanceof Vc)return new Vc(zj(e.value0)(t.value0));if(e instanceof zc)return new Ms(e.value0);if(e instanceof Vc)return new Ms(e.value0);throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 19, column 1 - line 25, column 32): "+[e.constructor.name,t.constructor.name])}}},jj=function(){return{mempty:new zc(Fo(gl)),Semigroup0:function(){return Jj}}}(),Kj=CL(jj),bk=function(e){var t=Kp(e);return function(n){return function(a){var d=function(o){var l=new Z(Oi(o.elements),Fl(o.elements));if(l.value0 instanceof k&&l.value1 instanceof k){var u=new Z(t(n)(l.value0.value0),t(n)(l.value1.value0));return u.value0 instanceof pe?new zc(o.id):u.value1 instanceof se?new Vc(o.id):new Ms(o.id)}return new Vc(o.id)},r=Kj(Vj(Jd(Gj(d)(a))));if(r instanceof zc||r instanceof Vc||r instanceof Ms)return r.value0;throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 29, column 3 - line 32, column 18): "+[r.constructor.name])}}};var Mk=nt(rt),xs=Mk(mC(Tr)),Fs=pn(uv(Tr)),wk=Jr(yt),ag=Za(yt),Gc=X(ep(Tr)),Sk=Ie(xu(Na)),Ek=V(Dt),Xj=os(yt),Yj=Fi(xi),Zj=de(_e),eK=k0(xi)(Ji),tK=V(Ql),Tk=Kl(jo),Mf=Mk(fr),xf=gn(gr),Ff=ct(gr)(Ht),ig=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ug=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),dg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),nK={map:function(e){return function(t){if(t instanceof ig)return new ig(t.value0,e(t.value1));if(t instanceof ug)return new ug(t.value0,e(t.value1));if(t instanceof sg)return new sg(t.value0,e(t.value1));if(t instanceof cg)return new cg(t.value0,e(t.value1));if(t instanceof lg)return new lg(t.value0,e(t.value1));if(t instanceof fg)return new fg(t.value0,e(t.value1));if(t instanceof dg)return new dg(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 26, column 1 - line 33, column 68): "+[e.constructor.name,t.constructor.name])}}},rK=ra(nK)(QI(gF)),CE=function(e){return dt(new dg(e,void 0))},oK=function(e){return dt(new ug(e,void 0))},aK=function(e){return dt(new ig(e,void 0))},iK=function(e){return dt(new sg(e,void 0))},uK=function(e){return dt(new cg(e,void 0))},bE=function(e){var t=function(n){if(n instanceof ig)return xs(Fs(function(d){var r={};for(var o in d)({}).hasOwnProperty.call(d,o)&&(r[o]=d[o]);return r.pages=wk(n.value0.key)(n.value0.value)(d.pages),r.preloaded=ag(n.value0.key)(d.preloaded),r.update=function(){var l={};for(var u in d.update)({}).hasOwnProperty.call(d.update,u)&&(l[u]=d.update[u]);return l.scroll=new k(n.value0.value.pageHeight),l}(),r}))(function(){return Gc(n.value1)});if(n instanceof ug)return xs(Fs(function(d){var r={};for(var o in d)({}).hasOwnProperty.call(d,o)&&(r[o]=d[o]);return r.pages=ag(n.value0.key)(d.pages),r.preloaded=wk(n.value0.key)(n.value0.value)(d.preloaded),r.update=function(){var l={};for(var u in d.update)({}).hasOwnProperty.call(d.update,u)&&(l[u]=d.update[u]);return l.scroll=new k(-n.value0.value.pageHeight),l}(),r}))(function(){return Gc(n.value1)});if(n instanceof sg)return xs(Fs(function(d){var r={};for(var o in d)({}).hasOwnProperty.call(d,o)&&(r[o]=d[o]);return r.update=function(){var l=Sk(Ek(function(h){return h.key})(d.update.topLoad))(new k(n.value0.key));if(l){var u={};for(var i in d.update)({}).hasOwnProperty.call(d.update,i)&&(u[i]=d.update[i]);return u.topLoad=z.value,u}var s={};for(var f in d.update)({}).hasOwnProperty.call(d.update,f)&&(s[f]=d.update[f]);return s.topLoad=new k(n.value0),s}(),r}))(function(){return Gc(n.value1)});if(n instanceof cg)return xs(Fs(function(d){var r={};for(var o in d)({}).hasOwnProperty.call(d,o)&&(r[o]=d[o]);return r.preloaded=ag(n.value0.key)(d.preloaded),r.update=function(){var l={};for(var u in d.update)({}).hasOwnProperty.call(d.update,u)&&(l[u]=d.update[u]);return l.topLoad=z.value,l}(),r}))(function(){return Gc(n.value1)});if(n instanceof lg)return xs(Fs(function(d){var r={};for(var o in d)({}).hasOwnProperty.call(d,o)&&(r[o]=d[o]);return r.update=function(){var l=Sk(Ek(function(h){return h.key})(d.update.bottomLoad))(new k(n.value0.key));if(l){var u={};for(var i in d.update)({}).hasOwnProperty.call(d.update,i)&&(u[i]=d.update[i]);return u.bottomLoad=z.value,u}var s={};for(var f in d.update)({}).hasOwnProperty.call(d.update,f)&&(s[f]=d.update[f]);return s.bottomLoad=new k(n.value0),s}(),r}))(function(){return Gc(n.value1)});if(n instanceof fg)return xs(Fs(function(d){var r={};for(var o in d)({}).hasOwnProperty.call(d,o)&&(r[o]=d[o]);return r.pages=ag(n.value0.key)(d.pages),r.update=function(){var l={};for(var u in d.update)({}).hasOwnProperty.call(d.update,u)&&(l[u]=d.update[u]);return l.bottomLoad=z.value,l}(),r}))(function(){return Gc(n.value1)});if(n instanceof dg){var a=function(d){if(d instanceof z)return z.value;if(d instanceof k)return new k(function(){var r={};for(var o in d.value0)({}).hasOwnProperty.call(d.value0,o)&&(r[o]=d.value0[o]);return r.visibleHeight=n.value0.height,r}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 104, column 11 - line 104, column 44): "+[d.constructor.name])};return xs(Fs(function(d){var r={};for(var o in d)({}).hasOwnProperty.call(d,o)&&(r[o]=d[o]);return r.pages=Xj(a)(n.value0.id)(d.pages),r}))(function(){return Gc(n.value1)})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 63, column 5 - line 69, column 13): "+[n.constructor.name])};return xs(Fs(function(n){var a={};for(var d in n)({}).hasOwnProperty.call(n,d)&&(a[d]=n[d]);return a.update=function(){var r={};for(var o in n.update)({}).hasOwnProperty.call(n.update,o)&&(r[o]=n.update[o]);return r.scroll=z.value,r}(),a}))(function(){return rK(t)(e)})},sK=function(e){return dt(new lg(e,void 0))},cK=function(e){return dt(new fg(e,void 0))},xk=function(e){return function(t){var n=ns(e.preloaded)>(e.feedParams.preloadedPages+e.feedParams.deadZone|0),a=ns(e.preloaded)<(e.feedParams.preloadedPages-e.feedParams.deadZone|0),d=function(f){return f.value1.visibleHeight<Yj(1)(Ke(0)(Zj)(eK(tK(function(h){return h.visibleHeight})(e.pages))))},r=rr(b_(d)(vl(Tk(e.pages)))),o=r<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),l=r>(e.feedParams.hiddenPages+e.feedParams.deadZone|0),u=rr(b_(d)(Tk(e.pages))),i=u<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),s=u>(e.feedParams.hiddenPages+e.feedParams.deadZone|0);return Mf(CE(t))(function(){return Mf(xf(e.feedParams.enableTop&&i)(Ff(aK)(rs(e.preloaded))))(function(){return Mf(xf(e.feedParams.enableTop&&s)(Ff(oK)(Ya(e.pages))))(function(){return Mf(xf(e.feedParams.enableTop&&a)(Ff(iK)(Ya(e.preloaded))))(function(){return Mf(xf(e.feedParams.enableTop&&n)(Ff(uK)(Ya(e.preloaded))))(function(){return Mf(xf(o)(Ff(sK)(rs(e.pages))))(function(){return xf(l)(Ff(cK)(rs(e.pages)))})})})})})})}};var vK=ut($n);var mK=yr();var wE=function(){return function(e){var t=mK(e);return function(n){var a=t(n);return function(d){return function(r){return function(o){return vK(a(d)(r)(o(void 0)))}}}}}};var yK=nt(rt);var Lk=function(e){var t=X(Ef(e)),n=Sf(e),a=ee(n),d=mP(e),r=yK(n),o=Ym(e),l=function(u){return u===0?t(void 0):a(d)(function(i){return r(o(i))(function(){return l(u-1|0)})})};return l};var DK=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(a){return function(d){return function(r){return function(o){var l=function(u){return function(i){if(u instanceof Kr)return Bp(u.value0);if(u instanceof Qr)return l(u.value1(void 0))(a(i)(u.value0));if(u instanceof Xr)return t(u.value0)(function(s){return l(s)(i)});if(u instanceof Cr)return n(r(i));throw new Error("Failed pattern match at Pipes.Prelude (line 202, column 14 - line 206, column 39): "+[u.constructor.name])}};return l(o)(d)}}}}};var Ak=function(e){var t=function(a){return function(d){return function(r){return a(function(o){return new Ye(d,o)}(r))}}},n=function(a){return a(Ze.value)};return DK(e)(t)(de(_e))(n)};var un=ee(Nt),SE=gn(Yt),bK=qr(wm),Af=Ro(It),su=ct(Yt)(Ht),Lf=Mn(uc)(Yt),Ls=X(Yt),TE=nt(rt),_g=wt(ff),ME=V(JS($r)),xE=Pi(Bn),FE=Qm(ti),LE=Ak(FE),AE=QS(FE),IE=Lk(FE),Qp=V($n),Yr=TE(Nt),RE=_l(zr),Ok=Rr(It),Fa=pn(It),EE=Jr(yt),Pk=Za(yt),Ik=ut($n),wK=yn($p),SK=TE(Qt),EK=V(Mp),pg=os(yt),TK=K_(yt),kk={reflectSymbol:function(){return"page"}},MK=wE()(kk)(yt),xK=Io(It),FK=ct(on)(Ht),LK=ci()(kk)(yt),No=TE(Do),Rk=V(mt),$k=Kl(jo),AK=h0(yt)(ld),IK=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$E=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nk=function(){function e(){}return e.value=new e,e}(),hg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hk=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mg=function(e){return e.onElement},RK=function(e){var t=bn(ii(e.MonadAff1()));return function(n){var a=function(d){return un(t(rk(d)))(function(r){return SE(Xs(r))(bK(n)(t(Gp(void 0)(d))))})};return un(Af(function(d){return d.lock}))(function(d){return su(a)(d)})}},$K=function(e){var t=Le(An(e.MonadAff1().MonadEffect0()));return function(n){if(n instanceof IK)return un(Pr("feed"))(function(a){return $e(Lf)(a)(function(d){var r=function(o){return function(){var u=of(d)();return dp(u+o)(d)()}};return Ls(n.value0(r))})});if(n instanceof $E)return un(Pr("feed"))(function(a){return $e(Lf)(a)(function(d){return t(function(){var o=of(d)();return dp(o+n.value0)(d)(),n.value1})})});if(n instanceof vg)return un(Pr("feed"))(function(a){return $e(Lf)(a)(function(d){return t(function(){var o=of(d)();return n.value0(o)})})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 90, column 1 - line 92, column 93): "+[n.constructor.name])}},HK=function(e){return e.feedInsert};var Bk=function(e){return e.feedBelow},OK=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),a=_g(n),d=Bk(e),r=bn(ii(t)),o=ct(n.Applicative0())(vt),l=mg(e);return function(u){var i=un(Af(function(s){return s.feedParams.initialElement}))(function(s){return un(Af(function(f){return f.feedParams}))(function(f){return un(a(d(s)))(function(h){var p=ME(xE)(LE(AE(h)(IE(f.pageSize-1|0))));return Qp(Dn(s))(r(Km(p)))})})});return un(i)(function(s){return Yr(a(o(l)(s)))(function(){return Ls({id:0,elements:s,parent:u,pageHeight:0,visibleHeight:0})})})}},PK=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),a=_g(n),d=Bk(e),r=bn(ii(t)),o=ct(n.Applicative0())(vt),l=mg(e);return function(u){return function(i){var s=function(f){return un(Af(function(h){return h.feedParams}))(function(h){return un(a(d(f)))(function(p){var c=ME(xE)(LE(AE(p)(IE(h.pageSize))));return un(r(Km(c)))(function(_){return Yr(a(o(l)(_)))(function(){var v=cc(_);return Ls(v?z.value:new k({id:i.id+1|0,elements:_,parent:u,pageHeight:0,visibleHeight:0}))})})})})};return Qp(RE)(Lf(s)(Fl(i.elements)))}}},kK=function(e){return e.feedAbove},Wk=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),a=_g(n),d=kK(e),r=bn(ii(t)),o=ct(n.Applicative0())(vt),l=mg(e);return function(u){return function(i){var s=function(f){return un(Af(function(h){return h.feedParams}))(function(h){return un(a(d(f)))(function(p){var c=ME(xE)(LE(AE(p)(IE(h.pageSize))));return un(Qp(vl)(r(Km(c))))(function(_){return Yr(a(o(l)(_)))(function(){var v=cc(_);return Ls(v?z.value:new k({id:i.id-1|0,elements:_,parent:u,pageHeight:0,visibleHeight:0}))})})})})};return Qp(RE)(Lf(s)(Oi(i.elements)))}}},NK=function(e){var t=Wk(e);return function(n){return un(Ok)(function(a){var d=ns(a.preloaded)>a.feedParams.preloadedPages,r=ns(a.preloaded)<a.feedParams.preloadedPages;return Yr(SE(r)(function(){var o=Ke(Ya(a.pages))(k.create)(Ya(a.preloaded));return un(Qp(RE)(Lf(function(l){return t(n)(l.value)})(o)))(function(l){return su(function(u){return Fa(function(i){var s={};for(var f in i)({}).hasOwnProperty.call(i,f)&&(s[f]=i[f]);return s.preloaded=EE(u.id)(u)(i.preloaded),s})})(l)})}()))(function(){return SE(d)(Fa(function(o){var l={};for(var u in o)({}).hasOwnProperty.call(o,u)&&(l[u]=o[u]);return l.preloaded=Ke(o.preloaded)(function(i){return Pk(i.key)(o.preloaded)})(Ya(o.preloaded)),l}))})})}},Uk=function(e){return{initialElement:e,pageSize:10,hiddenPages:6,preloadedPages:6,deadZone:2,debounce:333,enableTop:!1,preloadMillis:333.3}},qk=function(){return pt.value}(),BK=function(e){var t=NK(e),n=OK(e),a=e.MonadAff1(),d=bn(ii(a)),r=a.MonadEffect0(),o=_g(r.Monad0()),l=HK(e),u=e.PageElement0().PageOrder0(),i=Ld(u.Ord0()),s=Kp(u),f=mg(e),h=bk(u),p=RK(e),c=Le(An(r)),_=Wk(e),v=PK(e);return function(m){if(m instanceof Nk){var y=function(x){return function(E){return function(T){var M=T>=x.preloadedPages;return M?Ls(new Bt(T)):Yr(t(E))(function(){return Ls(new Pt(T+1|0))})}}},C=function(x){return un(n(x))(function(E){return Yr(Fa(function(T){var M={};for(var w in T)({}).hasOwnProperty.call(T,w)&&(M[w]=T[w]);return M.pages=Sc(0)(E),M}))(function(){return un(Af(function(T){return T.feedParams}))(function(T){return Yr(Ik(wK(y(T)(x))(0)))(function(){return un(d(SK(fC(T.preloadMillis))(function(){return ok(void 0)})))(function(M){return Fa(function(w){var F={};for(var L in w)({}).hasOwnProperty.call(w,L)&&(F[L]=w[L]);return F.lock=new k(M),F})})})})})})};return Yr(un(Pr("feed"))(su(C)))(function(){return un(o(l))(function(x){return su(function(E){return Ik(Rn(EK(Hk.create)(E)))})(x)})})}if(m instanceof Hk){var S=function(x){if(x instanceof z)return z.value;if(x instanceof k)return new k(function(){var E={};for(var T in x.value0)({}).hasOwnProperty.call(x.value0,T)&&(E[T]=x.value0[T]);return E.elements=i(Ad(s)(m.value0)(x.value0.elements)),E}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 156, column 5 - line 156, column 33): "+[x.constructor.name])},D=function(x){return function(E){var T={};for(var M in E)({}).hasOwnProperty.call(E,M)&&(T[M]=E[M]);return T.pages=pg(S)(x)(E.pages),T.preloaded=pg(S)(x)(E.preloaded),T}};return un(Ok)(function(x){return Yr(o(f(m.value0)))(function(){var E=h(m.value0)(TK(x.preloaded)(x.pages));return Yr(Fa(D(E)))(function(){return MK(qk)(E)(mE.create(m.value0))})})})}if(m instanceof hg&&m.value0 instanceof gE){var g=function(x){if(x instanceof z)return z.value;if(x instanceof k)return new k(function(){var E={};for(var T in x.value0)({}).hasOwnProperty.call(x.value0,T)&&(E[T]=x.value0[T]);return E.pageHeight=m.value0.value0.height,E}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 165, column 5 - line 165, column 32): "+[x.constructor.name])},b=function(x){var E={};for(var T in x)({}).hasOwnProperty.call(x,T)&&(E[T]=x[T]);return E.pages=pg(g)(m.value0.value0.id)(x.pages),E.preloaded=pg(g)(m.value0.value0.id)(x.preloaded),E};return Fa(b)}if(m instanceof hg&&m.value0 instanceof yE)return Yr(Fa(function(x){return Vp(bE(CE(m.value0.value0)))(x)}))(function(){return p(un(Pr("feed"))(function(x){return $e(su)(x)(function(E){return un(c(of(E)))(function(T){return un(xK(function(M){return Vp(bE(xk(M)(m.value0.value0)))(M)}))(function(M){return Yr(c(FK(function(w){return dp(T+w)(E)})(M.update.scroll)))(function(){return Yr(tr(M))(function(){return Yr(Fa(function(w){var F={};for(var L in w)({}).hasOwnProperty.call(w,L)&&(F[L]=w[L]);return F.update={topLoad:z.value,bottomLoad:z.value,scroll:z.value},F}))(function(){return Yr($e(su)(M.update.topLoad)(function(w){return un(_(E)(w.value))(function(F){return su(function(L){return Fa(function(R){var A={};for(var I in R)({}).hasOwnProperty.call(R,I)&&(A[I]=R[I]);return A.preloaded=EE(L.id)(L)(M.preloaded),A})})(F)})}))(function(){return Yr($e(su)(M.update.bottomLoad)(function(w){return un(v(E)(w.value))(function(F){return su(function(L){return Fa(function(R){var A={};for(var I in R)({}).hasOwnProperty.call(R,I)&&(A[I]=R[I]);return A.pages=EE(L.id)(L)(R.pages),A})})(F)})}))(function(){return d(fC(M.feedParams.debounce))})})})})})})})})}))});if(m instanceof hg&&m.value0 instanceof DE)return Fa(function(x){var E={};for(var T in x)({}).hasOwnProperty.call(x,T)&&(E[T]=x[T]);return E.pages=Pk(m.value0.value0)(x.pages),E});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 120, column 1 - line 122, column 99): "+[m.constructor.name])}},WK=function(e){var t=Dk(e.PageElement0());return function(n){var a=function(u){return LK(qk)(u.value0)(t)(u.value1)(hg.create)},d=Gt([si("feed"),wn(No(PD(Xe(-50)))(function(){return No(OD(Xe(50)))(function(){return No(Oo(Bl(100)))(function(){return rg(ng)})})}))])(Rk(a)($k(n.pages))),r=Gt([wn(No(PD(Xe(-50)))(function(){return No(OD(Xe(50)))(function(){return No(Oo(Bl(100)))(function(){return No($o(-1))(function(){return No(hr(Zu))(function(){return Zo(Bl(-100))})})})})}))])([]),o=function(u){return Gt([wn(No($o(-2-AK(u.value0)|0))(function(){return No(z_(0))(function(){return hr(Zu)})}))])([a(u)])},l=Gt([wn(No($o(-2))(function(){return hr(Zu)}))])(Rk(o)($k(n.preloaded)));return Gt([wn(No(wa(Bl(100)))(function(){return No(Oo(Bl(100)))(function(){return Uc(zp)})}))])([d,r,l])}},zk=function(e){return function(t){return en({initialState:function(n){return{feedParams:n,pages:vr,preloaded:vr,lock:z.value,update:{topLoad:z.value,bottomLoad:z.value,scroll:z.value}}},render:WK(t),eval:Zt({receive:it.receive,finalize:it.finalize,handleAction:BK(t),handleQuery:$K(t),initialize:new k(Nk.value)})})}};var gg={suspend:PI,fork:cC,join:Xd,Monad0:function(){return ti},Functor1:function(){return qI}};var yg=function(e){return e.fork};var Gk=ne,La=ne,Jk=function(e){var t=ct(e)(Ht);return function(n){return La(function(a){return t(n)(a.rendering)})}},qK=ne,jk=function(e){return function(t){return La(function(n){return qK(t(n.rendering))})}},zK=ne,Dg=function(e){return function(t){return e(t)}},Kk=function(e){return function(t){return function(n){return function(a){return function(){var r=fn({})(),o=fn(ds)(),l=fn(ds)(),u=fn(n)(),i=fn(new k(Ze.value))(),s=fn(new k(Ze.value))(),f=fn(z.value)(),h=fn(1)(),p=fn(new k(vr))(),c=fn(vr)(),_={component:e,state:e.initialState(t),refs:vr,children:ds,childrenIn:o,childrenOut:l,selfRef:r,handlerRef:u,pendingQueries:i,pendingOuts:s,pendingHandlers:f,rendering:z.value,fresh:h,subscriptions:p,forks:c,lifecycleHandlers:a};return qt(_)(r)(),zK(r)}}}}};var VK=ct(on)(Ht),GK=Sn(zr),JK=ta(fS),Hn=ee(Qt),tn=Le(Cn),jK=nt(rt),Aa=jK(Qt),t2=ct(jr),KK=t2(Bn),n2=yg(gg),QK=Zl(ss)(Mc)(Bn),_i=X(jr),XK=V(Dw),Qk=Qi(ss),YK=V($r),Xk=Ec(ss),ZK=V(Dt),eQ=Jr(fS),tQ=_H(Mc),nQ=Za(bm),rQ=Sx(Ua),oQ=Jr(bm),Yk=t2(Ht),Zk=ta(bm),aQ=ta(Vt),iQ=mR(Xi),uQ=os(Vt),sQ=function(e){return function(t){return function(){var a=Qe(t)(),d=Qe(a.subscriptions)();return VK(vm)(GK(JK(e))(d))()}}},Cg=function(e){return function(t){return Hn(tn(Qe(e)))(function(n){if(n instanceof z)return t;if(n instanceof k)return tn(qt(new k(new Ye(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},bg=function(e){return function(t){return Aa(tn(qt({initializers:Ze.value,finalizers:Ze.value})(e)))(function(){return Hn(tn(t))(function(n){return Hn(tn(Qe(e)))(function(a){return Aa(KK(n2)(a.finalizers))(function(){return Aa(QK(a.initializers))(function(){return _i(n)})})})})})}},Jc=Zd(En(go)(ve(X(on)(void 0)))),e2=function(e){return function(t){return Hn(tn(Qe(t)))(function(n){return tn(D0(function(a){return{state:a+1|0,value:e(a)}})(n.fresh))})}},OE=function(e){return function(t){return function(n){return Hn(tn(Qe(t)))(function(a){return As(e)(t)(a.component.eval(new vf(XK(k.create)(v$(n)),ve(z.value))))})}}},As=function(e){return function(t){return function(n){var a=function(r){return function(o){return Hn(tn(Qe(r)))(function(l){return DH(function(u){var i=function(s){return Qk(Hn(tn(Qe(s)))(function(f){return La(function(h){return OE(e)(h.selfRef)(u.value1)})(f)}))};return YK(u.value2)(Xk(u.value0(Mc)(i)(l.children)))})(o)})}},d=function(r){return function(o){if(o instanceof xp)return Hn(tn(Qe(r)))(function(l){var u=o.value0(l.state);if(sf(l.state)(u.value1))return _i(u.value0);if(_n)return Aa(tn(qt({component:l.component,refs:l.refs,children:l.children,childrenIn:l.childrenIn,childrenOut:l.childrenOut,selfRef:l.selfRef,handlerRef:l.handlerRef,pendingQueries:l.pendingQueries,pendingOuts:l.pendingOuts,pendingHandlers:l.pendingHandlers,rendering:l.rendering,fresh:l.fresh,subscriptions:l.subscriptions,forks:l.forks,lifecycleHandlers:l.lifecycleHandlers,state:u.value1})(r)))(function(){return Aa(bg(l.lifecycleHandlers)(e(l.lifecycleHandlers)(r)))(function(){return _i(u.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[u.constructor.name])});if(o instanceof Fp)return Hn(e2(TH)(r))(function(l){return Hn(tn(EH(o.value0(l))(function(u){return Jc(PE(e)(r)(new Ac(u)))})))(function(u){return Hn(tn(Qe(r)))(function(i){return Aa(tn(oo(ZK(eQ(l)(u)))(i.subscriptions)))(function(){return _i(o.value1(l))})})})});if(o instanceof Lp)return Aa(tn(sQ(o.value0)(r)))(function(){return _i(o.value1)});if(o instanceof Oc)return o.value0;if(o instanceof Ap)return a(r)(o.value0);if(o instanceof Ip)return Hn(tn(Qe(r)))(function(l){return Hn(tn(Qe(l.handlerRef)))(function(u){return Aa(Cg(l.pendingOuts)(u(o.value0)))(function(){return _i(o.value1)})})});if(o instanceof mm)return Xk(tQ(uS(function(){var l=As(e)(r);return function(u){return Qk(l(u))}}())(o.value0)));if(o instanceof gm)return Hn(e2(MH)(r))(function(l){return Hn(tn(Qe(r)))(function(u){return Hn(tn(fn(!1)))(function(i){return Hn(n2(Qd(tn(function(){return oo(nQ(l))(u.forks)(),qt(!0)(i)()}))(As(e)(r)(o.value0))))(function(s){return Aa(tn(rQ(Qe(i))(oo(oQ(l)(s))(u.forks))))(function(){return _i(o.value1(l))})})})})});if(o instanceof ym)return Hn(tn(Qe(r)))(function(l){return Hn(tn(Qe(l.forks)))(function(u){return Aa(Yk(Xd)(Zk(o.value0)(u)))(function(){return _i(o.value1)})})});if(o instanceof Dm)return Hn(tn(Qe(r)))(function(l){return Hn(tn(Qe(l.forks)))(function(u){return Aa(Yk(Yd(ur("Cancelled")))(Zk(o.value0)(u)))(function(){return _i(o.value1)})})});if(o instanceof Rp)return Hn(tn(Qe(r)))(function(l){return _i(o.value1(aQ(o.value0)(l.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[o.constructor.name])}};return iQ(d(t))(n)}}},PE=function(e){return function(t){return function(n){if(n instanceof tm)return tn($e(oo)(t)(Dg(function(a){return{component:a.component,state:a.state,children:a.children,childrenIn:a.childrenIn,childrenOut:a.childrenOut,selfRef:a.selfRef,handlerRef:a.handlerRef,pendingQueries:a.pendingQueries,pendingOuts:a.pendingOuts,pendingHandlers:a.pendingHandlers,rendering:a.rendering,fresh:a.fresh,subscriptions:a.subscriptions,forks:a.forks,lifecycleHandlers:a.lifecycleHandlers,refs:uQ(ve(n.value1))(n.value0)(a.refs)}})));if(n instanceof Ac)return Hn(tn(Qe(t)))(function(a){return As(e)(t)(a.component.eval(new _f(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var lQ=ee(Fr),fQ=nt(rt),c2=f_(on)(Ht),l2=ct(jr)(Bn),f2=yg(gg),Yp=Sn(Fr),d2=ct(on),p2=d2(Ht),r2=d2(Ji),o2=fQ(Qt),dQ=Zl(ss)(Mc)(Bn),Xp=Le(Cn),a2=X(on),kE=V(ke),NE=X(jr),BE=gn(on),pQ=jk(ke),hQ=ut($r),i2=em(on),_Q=Jk(on),vQ=yn(a_),mQ=dl(ke),WE=ee(Qt),gQ=Le(zl),u2=function(){return fn({initializers:Ze.value,finalizers:Ze.value})}(),s2=function(e){return function(){var n=Qe(e)();return qt(z.value)(e)(),c2(n)(function(){var a=l2(f2);return function(d){return Jc(a(Yi(d)))}}())()}},yQ=function(e){return function(){return Yp(p2(r2(vm)))(Qe(e.subscriptions))(),qt(z.value)(e.subscriptions)(),Yp(r2(function(){var n=Yd(ur("finalized"));return function(a){return Jc(n(a))}}()))(Qe(e.forks))(),qt(vr)(e.forks)()}},h2=function(e){return function(t){return function(n){var a=function(s){return function(f){return La(function(h){var p=As(o)(h.selfRef)(h.component.eval(new df(void 0)));return oo(function(c){return{initializers:new Ye(o2(dQ(Yi(c.initializers)))(function(){return o2(p)(function(){return Xp(function(){return s2(h.pendingQueries)(),s2(h.pendingOuts)()})})}),f),finalizers:c.finalizers}})(s)})}},d=function(s){return function(f){return function(h){return vS(function(p){return function(){var _=u2(),v=Kk(p)(h)(f)(_)(),m=Qe(s)();return qt({initializers:Ze.value,finalizers:m.finalizers})(s)(),Yp(La(function(){var y=o(s);return function(C){return y(function(S){return S.selfRef}(C))}}()))(Qe(v))(),Yp(a(s)(m.initializers))(Qe(v))(),v}})}}},r=function(s){return function(f){return function(h){return function(p){return _S(function(c){return function(){var v=kE(c.pop)(Qe(h))(),m=function(){if(v instanceof k){qt(v.value0.value1)(h)();var C=Qe(v.value0.value0)();return La(function(S){return function(){return $e(qt)(S.handlerRef)(function(){var g=Ke(NE(void 0))(f);return function(b){return g(c.output(b))}}())(),Jc(As(o)(S.selfRef)(S.component.eval(new hf(c.input,void 0))))()}})(C)(),v.value0.value0}if(v instanceof z)return d(s)(function(){var S=Ke(NE(void 0))(f);return function(D){return S(c.output(D))}}())(c.input)(c.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[v.constructor.name])}(),y=kE(function(C){return Xs(c.get(C))})(Qe(p))();return BE(y)(tp("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),oo(c.set(m))(p)(),lQ(Qe(m))(pQ(function(C){if(C instanceof z)return ED("Halogen internal error: child was not initialized in renderChild");if(C instanceof k)return a2(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},o=function(s){return function(f){return function(){var p=Qe(f)(),c=kE(Mu)(Qe(p.pendingHandlers))();BE(c)(qt(new k(Ze.value))(p.pendingHandlers))(),qt(ds)(p.childrenOut)(),qt(p.children)(p.childrenIn)();var _=function(){var S=Cg(p.pendingHandlers),D=PE(o)(p.selfRef);return function(g){return S(hQ(D(g)))}}(),v=function(){var S=Cg(p.pendingQueries);return function(D){return S(_(Ac.create(D)))}}(),m=e.render(function(S){return Jc(_(S))})(r(s)(v)(p.childrenIn)(p.childrenOut))(p.component.render(p.state))(p.rendering)(),y=Qe(p.childrenOut)(),C=Qe(p.childrenIn)();return i2(C)(function(S){return function(){var g=Qe(S)();return _Q(e.removeChild)(g)(),l(s)(g)()}})(),$e(oo)(p.selfRef)(Dg(function(S){return{component:S.component,state:S.state,refs:S.refs,childrenIn:S.childrenIn,childrenOut:S.childrenOut,selfRef:S.selfRef,handlerRef:S.handlerRef,pendingQueries:S.pendingQueries,pendingOuts:S.pendingOuts,pendingHandlers:S.pendingHandlers,fresh:S.fresh,subscriptions:S.subscriptions,forks:S.forks,lifecycleHandlers:S.lifecycleHandlers,rendering:new k(m),children:y}}))(),BE(c)($e(vQ)(void 0)(function(S){return function(){var g=Qe(p.pendingHandlers)();qt(new k(Ze.value))(p.pendingHandlers)(),p2(function(){var E=l2(f2);return function(T){return Jc(E(Yi(T)))}}())(g)();var b=Qe(p.pendingHandlers)(),x=Ke(!1)(oR)(b);return x?mQ(qt(z.value)(p.pendingHandlers))(new Bt(void 0))():new Pt(void 0)}}))()}}},l=function(s){return La(function(f){return function(){yQ(f)();var p=As(o)(f.selfRef)(f.component.eval(new pf(void 0)));return oo(function(c){return{initializers:c.initializers,finalizers:new Ye(p,c.finalizers)}})(s)(),i2(f.children)(function(c){return function(){var v=Qe(c)();return l(s)(v)()}})()}})},u=function(s){return function(f){return function(h){return WE(Xp(Qe(s)))(function(p){return p?NE(z.value):OE(o)(f)(h)})}}},i=function(s){return function(f){return function(h){return bg(f)(function(){var c=Qe(s)();return c?void 0:(qt(!0)(s)(),l(f)(h)(),La(function(_){return function(){var m=gQ(Qe(_.selfRef))();return c2(m.rendering)(e.dispose)()}})(h)())})}}};return WE(Xp(u2))(function(s){return WE(Xp(fn(!1)))(function(f){return bg(s)(function(){var p=Qn(),c=Yp(Qe)(d(s)(function(){var _=Kn(p.listener);return function(v){return Xp(_(v))}}())(n)(t))();return La(function(_){return a2({query:u(f)(_.selfRef),messages:p.emitter,dispose:i(f)(s)(c)})})(c)()})})})}}};var Ia=function(e){return function(t){return function(){return t[e]}}};var CQ=Ia("baseURI"),bQ=Ia("ownerDocument"),_2=Ia("parentNode"),wQ=Ia("parentElement");var SQ=Ia("childNodes"),EQ=Ia("firstChild"),TQ=Ia("lastChild"),MQ=Ia("previousSibling"),v2=Ia("nextSibling"),xQ=Ia("nodeValue");var FQ=Ia("textContent");function UE(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function wg(e){return function(t){return function(){t.appendChild(e)}}}function qE(e){return function(t){return function(){t.removeChild(e)}}}var m2=V(ke);var zE=function(){var e=m2(Xt);return function(t){return e(_2(t))}}();var g2=function(){var e=m2(Xt);return function(t){return e(v2(t))}}();var VE=function(e,t,n){var a=0,d;return function(r){if(a===2)return d;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return a=1,d=n(),a=2,d}},GE=ut(ke),$Q=X(on),HQ=ct(on)(Ht),OQ=In(),PQ=gn(on),kQ=va(Dd(Dd(_a))),NQ=de(_e),BQ=ee(Qt),WQ=Le(Cn),UQ=V(ke),qQ=Sn(Fr);var zQ=function(e){return function(t){return function(n){return t instanceof k&&n instanceof k?GE(UE(e)(t.value0)(n.value0)):t instanceof z&&n instanceof k?GE(wg(e)(n.value0)):$Q(void 0)}}},y2=function(e){return function(){var n=zE(e.node)();return HQ(function(a){return qE(e.node)(a)})(n)()}},VQ=function(e){return function(t){return function(n){var a=Gk(function(l){return l.node}),d=function(l){return l instanceof k?wo(l.value0):void 0},r=function(l){var u=FH(OQ)(l),i=VE("patch","Halogen.VDom.Driver",function(){return function(_,v){if(_ instanceof k){if(v instanceof mf)return wo(_.value0),f(100)(v.value0);if(v instanceof Em){var m=bo(_.value0,v.value0);return Ln(new Fn(Or(m),new k(m),i(103),d))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[v.constructor.name])}return s(104)(v)}}),s=VE("render","Halogen.VDom.Driver",function(){return function(_){if(_ instanceof mf)return f(86)(_.value0);if(_ instanceof Em){var v=u(_.value0);return Ln(new Fn(Or(v),new k(v),i(89),d))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[_.constructor.name])}}),f=VE("renderComponentSlot","Halogen.VDom.Driver",function(){return function(_){var v=Qe(t)(),m=v(_)(),y=a(m);return Ln(new Fn(y,z.value,i(117),d))}}),h=i(91),p=s(82),c=f(109);return p},o=Y$(e);return{buildWidget:r,buildAttributes:o,document:n}}}},GQ=function(e){return function(t){var n=function(a){return function(d){return function(r){return function(o){if(o instanceof z)return function(){var u=fn(d)(),i=VQ(a)(u)(e),s=Sp(i)(r),f=Or(s);return GE(wg(f)(HP(t)))(),{machine:s,node:f,renderChildRef:u}};if(o instanceof k)return function(){qt(d)(o.value0.renderChildRef)();var u=zE(o.value0.node)(),i=g2(o.value0.node)(),s=bo(o.value0.machine,r),f=Or(s);return PQ(kQ(sf)(o.value0.node)(f))(zQ(f)(i)(u))(),{machine:s,node:f,renderChildRef:o.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[o.constructor.name])}}}};return{render:n,renderChild:NQ,removeChild:y2,dispose:y2}}},JE=function(e){return function(t){return function(n){return BQ(WQ(UQ(AP)(qQ(Tf)(ia))))(function(a){return h2(GQ(a)(n))(e)(t)})}}};var JQ=V(ri),jQ=V($n),KQ=pn(uv(Tr)),QQ=em(ep(Tr)),XQ=ci(),YQ=Zv(),ZQ=yr(),eX=Xv(),jE=function(){function e(){}return e.value=new e,e}(),KE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),QE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),C2=function(e){return e},Zp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),eh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),th=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Sg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),oh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Eg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ah=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var tX={lift:function(e){return function(t){return C2(dt(eh.create(t)))}}},b2=wt(tX),nX=rf;var If=function(e){return{liftEffect:function(){var t=b2(e.Monad0()),n=Le(e);return function(a){return t(n(a))}}(),Monad0:function(){return nX}}},w2=function(e){var t=e.MonadEffect0(),n=If(t);return{liftAff:function(){var a=b2(t.Monad0()),d=bn(e);return function(r){return a(d(r))}}(),MonadEffect0:function(){return n}}},S2=ri,E2=function(e){var t=V(e);return{map:function(n){return function(a){if(a instanceof Zp)return new Zp(JQ(n)(a.value0));if(a instanceof eh)return new eh(t(n)(a.value0));if(a instanceof th)return new th(function(d){return n(a.value0(d))});if(a instanceof nh)return new nh(a.value0,n(a.value1));if(a instanceof rh)return new rh(a.value0,n(a.value1));if(a instanceof Sg)return new Sg(a.value0,n(a.value1));if(a instanceof oh)return new oh(jQ(n)(a.value0));if(a instanceof Eg)return new Eg(function(d){return n(a.value0(d))});if(a instanceof ah)return new ah(a.value0,n(a.value1));throw new Error("Failed pattern match at Halogen.XShell.Free (line 71, column 1 - line 80, column 60): "+[n.constructor.name,a.constructor.name])}}}},jc=fr,rX=ee(jc),T2=ip,Is=gr,Wt=function(e){return C2(dt(Zp.create(e)))},M2=function(e){var t=function(n){return KQ(Dn(n.window))};return Vp(QQ(e)(t))([])},x2=function(e){return dt(new nh(e,void 0))};var F2=function(e){return dt(new ah(e,void 0))},XE=function(){return function(e){var t=XQ(e),n=YQ(e);return function(a){var d=t(a),r=n(a);return function(){return function(o){return function(l){return function(u){return function(i){return function(s){var f=d(o)(l)(u)(i)(function(h){return QE.create(s(h))});return F2(r(o)(l)({window:f}))}}}}}}}}},oX=function(e){return dt(new oh(e))},YE=function(){return function(e){var t=ZQ(e);return function(n){var a=t(n);return function(){return function(d){return function(r){return function(o){return oX(a(d)(r)(o))}}}}}}},vi=function(e){return dt(new rh(e,void 0))},Eo=function(){return dt(new th(de(_e)))}(),Xn=function(e){return rX(Eo)(function(t){return x2(e(t))})},ZE=function(){return function(e){var t=eX(e);return function(n){var a=t(n);return function(){return function(d){return function(r){return F2(function(o){return Ke(o)(vn)(a(d)(r)(o))})}}}}}};var Ut=Mt(ir),L2=function(){function e(){}return e.value=new e,e}(),aX=function(){function e(){}return e.value=new e,e}(),A2=function(){function e(){}return e.value=new e,e}(),iX=function(){function e(){}return e.value=new e,e}(),uX=function(){function e(){}return e.value=new e,e}(),sX=function(){function e(){}return e.value=new e,e}(),I2=function(){function e(){}return e.value=new e,e}(),eT=function(){function e(){}return e.value=new e,e}(),cX=function(){function e(){}return e.value=new e,e}(),lX=function(){function e(){}return e.value=new e,e}(),fX=function(){function e(){}return e.value=new e,e}(),dX=function(){function e(){}return e.value=new e,e}(),pX=function(){function e(){}return e.value=new e,e}(),hX=function(){function e(){}return e.value=new e,e}(),_X=function(){function e(){}return e.value=new e,e}(),vX=function(){function e(){}return e.value=new e,e}(),mX=function(){function e(){}return e.value=new e,e}(),gX=function(){function e(){}return e.value=new e,e}(),yX=function(){function e(){}return e.value=new e,e}(),DX=function(){function e(){}return e.value=new e,e}(),CX=function(){function e(){}return e.value=new e,e}(),bX=function(){function e(){}return e.value=new e,e}(),wX=function(){function e(){}return e.value=new e,e}(),SX=function(){function e(){}return e.value=new e,e}(),EX=function(){function e(){}return e.value=new e,e}(),TX=function(){function e(){}return e.value=new e,e}(),MX=function(){function e(){}return e.value=new e,e}(),xX=function(){function e(){}return e.value=new e,e}(),FX=function(){function e(){}return e.value=new e,e}(),LX=function(){function e(){}return e.value=new e,e}(),AX=function(){function e(){}return e.value=new e,e}(),IX=function(){function e(){}return e.value=new e,e}(),RX=function(){function e(){}return e.value=new e,e}();var $X={value:function(e){if(e instanceof L2)return Ut("default");if(e instanceof aX)return Ut("help");if(e instanceof A2)return Ut("pointer");if(e instanceof iX)return Ut("progress");if(e instanceof uX)return Ut("wait");if(e instanceof sX)return Ut("cell");if(e instanceof I2)return Ut("crosshair");if(e instanceof eT)return Ut("text");if(e instanceof cX)return Ut("vertical-text");if(e instanceof lX)return Ut("alias");if(e instanceof fX)return Ut("copy");if(e instanceof dX)return Ut("move");if(e instanceof pX)return Ut("no-drop");if(e instanceof hX)return Ut("not-allowed");if(e instanceof _X)return Ut("grab");if(e instanceof vX)return Ut("grabbing");if(e instanceof mX)return Ut("all-scroll");if(e instanceof gX)return Ut("col-resize");if(e instanceof yX)return Ut("row-resize");if(e instanceof DX)return Ut("n-resize");if(e instanceof CX)return Ut("e-resize");if(e instanceof bX)return Ut("s-resize");if(e instanceof wX)return Ut("w-resize");if(e instanceof SX)return Ut("ne-resize");if(e instanceof EX)return Ut("nw-resize");if(e instanceof TX)return Ut("se-resize");if(e instanceof MX)return Ut("sw-resize");if(e instanceof xX)return Ut("ew-resize");if(e instanceof FX)return Ut("ns-resize");if(e instanceof LX)return Ut("nesw-resize");if(e instanceof AX)return Ut("nwse-resize");if(e instanceof IX)return Ut("zoom-in");if(e instanceof RX)return Ut("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var tT=function(){return A2.value}();var nT=function(){return L2.value}(),Kc=Kt($X)(Mt(Gn)("cursor")),R2=function(){return I2.value}();var OX=Mt(Gn);var $2=Kt(Wu)(OX("color"));var rT=Mt(ir),kX=Mt(Gn);var NX={value:function(e){return e}},H2=rT("underline"),Mg=Kt(NX)(kX("text-decoration")),O2=rT("overline");var P2=rT("line-through");var be=nt(rt)(Do),Yn=Kt(Uu),Wn=Mt(Gn),WX=RD(Uu),UX=De(kl),qX=Mt(H_),zX=Kt(mc),oT=function(){var e=ft(zt)(Ct("xterm")),t=ft(zt)(Ct("xterm-viewport")),n=be(xt(ft(zt)(Ct("xterm-underline-1")))(Mg(H2)))(function(){return be(xt(ft(zt)(Ct("xterm-underline-2")))(Yn(Wn("text-decoration"))("double underline")))(function(){return be(xt(ft(zt)(Ct("xterm-underline-3")))(Yn(Wn("text-decoration"))("wavy underline")))(function(){return be(xt(ft(zt)(Ct("xterm-underline-4")))(Yn(Wn("text-decoration"))("dotted underline")))(function(){return xt(ft(zt)(Ct("xterm-underline-5")))(Yn(Wn("text-decoration"))("dashed underline"))})})})}),a=ft(zt)(Ct("xterm-scroll-area")),d=ft(zt)(Ct("xterm-screen")),r=ft(zt)(Ct("xterm-decoration-overview-ruler")),o=be(xt(ft(zt)(Ct("xterm-overline")))(Mg(O2)))(function(){return be(xt(ft(ft(zt)(Ct("xterm-underline-1")))(Ct("xterm-overline")))(Yn(Wn("text-decoration"))("overline underline")))(function(){return be(xt(ft(ft(zt)(Ct("xterm-underline-2")))(Ct("xterm-overline")))(Yn(Wn("text-decoration"))("overline double underline")))(function(){return be(xt(ft(ft(zt)(Ct("xterm-underline-3")))(Ct("xterm-overline")))(Yn(Wn("text-decoration"))("overline wavy underline")))(function(){return be(xt(ft(ft(zt)(Ct("xterm-underline-4")))(Ct("xterm-overline")))(Yn(Wn("text-decoration"))("overline dotted underline")))(function(){return xt(ft(ft(zt)(Ct("xterm-underline-5")))(Ct("xterm-overline")))(Yn(Wn("text-decoration"))("overline dashed underline"))})})})})}),l=ft(zt)(Ct("xterm-message")),u=ft(zt)(Ct("live-region")),i=ft(zt)(Ct("xterm-helper-textarea")),s=ft(zt)(Ct("xterm-helpers")),f=ft(zt)(Ct("xterm-dim")),h=ft(zt)(Ct("xterm-decoration-top")),p=ft(zt)(Ct("xterm-decoration-container")),c=ft(zt)(Ct("xterm-decoration")),_=ft(zt)(Ct("composition-view")),v=ft(zt)(Ct("xterm-char-measure-element")),m=be(hr(ba))(function(){return be(Gi(Xe(0)))(function(){return be(Zo(Xe(0)))(function(){return be(kD(Xe(0)))(function(){return be(G_(Xe(0)))(function(){return be($o(10))(function(){return be(Yn(Wn("color"))("transparent"))(function(){return Yn(Wn("pointer-events"))("none")})})})})})})}),y=ft(zt)(Ct("xterm-accessibility"));return be(xt(e)(be(Kc(eT.value))(function(){return be(hr(Zu))(function(){return WX(UX(Bd)(qX("user-select")))("none")})})))(function(){return be(xt(ft(e)(Ct("focus")))(Yn(Wn("outline"))("none")))(function(){return be(xt(ft(e)(bA("focus")))(Yn(Wn("outline"))("none")))(function(){return be(xt(Jn(e)(s))(be(hr(ba))(function(){return be(Zo(Xe(0)))(function(){return $o(5)})})))(function(){return be(xt(Jn(e)(i))(be(J_(Xe(0))(Xe(0))(Xe(0))(Xe(0)))(function(){return be(zX(Wn("border"))(0))(function(){return be(XA(Xe(0))(Xe(0))(Xe(0))(Xe(0)))(function(){return be(hr(ba))(function(){return be(z_(0))(function(){return be(Gi(DD(-9999)))(function(){return be(Zo(Xe(0)))(function(){return be(wa(Xe(0)))(function(){return be(Oo(Xe(0)))(function(){return be($o(-5))(function(){return be(Yn(Wn("whitespace"))("nowrap"))(function(){return be(Uc(zp))(function(){return Yn(Wn("resize"))("none")})})})})})})})})})})})})))(function(){return be(xt(Jn(e)(_))(be(rp(Ko))(function(){return be($2(uA))(function(){return be(Ho(qA))(function(){return be(hr(ba))(function(){return be(Yn(Wn("white-space"))("nowrap"))(function(){return $o(1)})})})})})))(function(){return be(xt(Jn(e)(ft(_)(Ct("active"))))(Ho(zA)))(function(){return be(xt(Jn(e)(t))(be(rp(Ko))(function(){return be(rg(ng))(function(){return be(Kc(nT))(function(){return be(hr(ba))(function(){return be(G_(Xe(0)))(function(){return be(Gi(Xe(0)))(function(){return be(Zo(Xe(0)))(function(){return kD(Xe(0))})})})})})})})))(function(){return be(xt(Jn(e)(d))(hr(Zu)))(function(){return be(xt(Jn(e)(Jn(d)(k_("canvas"))))(be(hr(ba))(function(){return be(Gi(Xe(0)))(function(){return Zo(Xe(0))})})))(function(){return be(xt(Jn(e)(a))(Yn(Wn("visibility"))("hidden")))(function(){return be(xt(v)(be(Ho(UA))(function(){return be(Yn(Wn("visibility"))("hidden"))(function(){return be(hr(ba))(function(){return be(Zo(Xe(0)))(function(){return be(Gi(DD(-9999)))(function(){return Yn(Wn("line-height"))("normal")})})})})})))(function(){return be(xt(ft(e)(Ct("enable-mouse-events")))(Kc(nT)))(function(){return be(xt(ft(e)(Ct("xterm-cursor-pointer")))(Kc(tT)))(function(){return be(xt(Jn(e)(ft(zt)(Ct("xterm-cursor-pointer"))))(Kc(tT)))(function(){return be(xt(ft(ft(e)(Ct("column-select")))(Ct("focus")))(Kc(R2)))(function(){return be(xt(Jn(e)(y))(m))(function(){return be(xt(Jn(e)(l))(m))(function(){return be(xt(Jn(e)(u))(be(hr(ba))(function(){return be(Gi(Xe(-9999)))(function(){return be(wa(Xe(1)))(function(){return be(Oo(Xe(1)))(function(){return Uc(zp)})})})})))(function(){return be(xt(f)(Yn(Wn("opacity"))("1 !important")))(function(){return be(n)(function(){return be(o)(function(){return be(xt(ft(zt)(Ct("xterm-strikethrough")))(Mg(P2)))(function(){return be(xt(Jn(Jn(d)(p))(c))(be($o(6))(function(){return hr(ba)})))(function(){return be(xt(Jn(Jn(d)(p))(ft(c)(Ct("xterm-decoration-top-layer"))))($o(7)))(function(){return be(xt(r)(be($o(8))(function(){return be(hr(ba))(function(){return be(Zo(Xe(0)))(function(){return be(G_(Xe(0)))(function(){return Yn(Wn("pointer-events"))("none")})})})})))(function(){return xt(h)(be($o(2))(function(){return hr(Zu)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var k2=e=>()=>e.type,aT=e=>()=>e.cursorY,iT=e=>()=>e.cursorX,uT=e=>()=>e.viewportY,sT=e=>()=>e.baseY,cT=e=>()=>e.length,N2=e=>t=>()=>e.getLine(t),lT=e=>()=>e.getNullCell();var Rf=function(e){return fp(e)?z.value:new k(Ev(e))};var JX=V(ke),jX=function(){function e(){}return e.value=new e,e}(),KX=function(){function e(){}return e.value=new e,e}(),B2=function(e){return function(t){return JX(Rf)(N2(e)(t))}},W2=function(e){return function(){var n=k2(e)();return n==="normal"?jX.value:KX.value}};var dT=e=>()=>e.isWrapped,pT=e=>()=>e.length;var Ig=de(_e),mi=V(ke),hT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_T=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),gT=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ag=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZX={map:function(e){return function(t){if(t instanceof hT)return new hT(function(n){return e(t.value0(n))});if(t instanceof xg)return new xg(function(n){return e(t.value0(n))});if(t instanceof _T)return new _T(function(n){return e(t.value0(n))});if(t instanceof vT)return new vT(function(n){return e(t.value0(n))});if(t instanceof mT)return new mT(function(n){return e(t.value0(n))});if(t instanceof Fg)return new Fg(function(n){return e(t.value0(n))});if(t instanceof Lg)return new Lg(t.value0,function(n){return e(t.value1(n))});if(t instanceof gT)return new gT(t.value0,function(n){return e(t.value1(n))});if(t instanceof Ag)return new Ag(t.value0,function(n){return e(t.value1(n))});if(t instanceof yT)return new yT(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},eY=ra(ZX);var U2=function(e){var t=e.Monad0(),n=ee(ji(t.Bind1())),a=Ir(is(t)),d=Le(ei(e));return function(r){var o=function(l){if(l instanceof hT)return n(a)(function(u){return d(mi(l.value0)(W2(u)))});if(l instanceof xg)return n(a)(function(u){return d(mi(l.value0)(iT(u)))});if(l instanceof _T)return n(a)(function(u){return d(mi(l.value0)(aT(u)))});if(l instanceof vT)return n(a)(function(u){return d(mi(l.value0)(uT(u)))});if(l instanceof mT)return n(a)(function(u){return d(mi(l.value0)(sT(u)))});if(l instanceof Fg)return n(a)(function(u){return d(mi(l.value0)(cT(u)))});if(l instanceof Lg)return n(a)(function(u){return d(mi(l.value1)(B2(u)(l.value0)))});if(l instanceof gT)return d(mi(l.value1)(dT(l.value0)));if(l instanceof Ag)return d(mi(l.value1)(pT(l.value0)));if(l instanceof yT)return n(a)(function(u){return d(mi(l.value0)(lT(u)))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 19, column 5 - line 21, column 40): "+[l.constructor.name])};return eY(us(r))(o)}},DT=function(e){return dt(new Ag(e,Ig))};var CT=function(e){return dt(new Lg(e,Ig))};var bT=function(){return dt(new xg(Ig))}();var wT=function(){return dt(new Fg(Ig))}();var ST=e=>()=>e.cursorBlink,ET=e=>t=>()=>e.cursorBlink=t,TT=e=>()=>e.fontFamily,MT=e=>t=>()=>e.fontFamily=t;var z2=iu("fontFamily");var V2=iu("cursorBlink");var J2=V(ke),uY=nt(rt),j2=de(_e),Rg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$g=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xT=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sY={map:function(e){return function(t){if(t instanceof Rg)return new Rg(function(n){return e(t.value0(n))});if(t instanceof $g)return new $g(t.value0,e(t.value1));if(t instanceof Hg)return new Hg(function(n){return e(t.value0(n))});if(t instanceof xT)return new xT(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},cY=ra(sY);var gi=function(e){return dt(new $g(e,void 0))},K2=function(e){var t=e.Monad0(),n=ji(t.Bind1()),a=ee(n),d=Ir(is(t)),r=Le(ei(e)),o=uY(n),l=X(Kd(t.Applicative0()));return function(u){var i=function(s){if(s instanceof Rg)return a(d)(function(f){return r(J2(s.value0)(ST(f)))});if(s instanceof $g)return a(d)(function(f){return o(r(ET(f)(s.value0)))(function(){return l(s.value1)})});if(s instanceof Hg)return a(d)(function(f){return r(J2(s.value0)(TT(f)))});if(s instanceof xT)return a(d)(function(f){return o(r(MT(f)(s.value0)))(function(){return l(s.value1)})});throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 19, column 5 - line 21, column 49): "+[s.constructor.name])};return cY(us(u))(i)}},FT=function(){return dt(new Hg(j2))}(),LT=function(){return dt(new Rg(j2))}();var X2=Si(Q2(),1),Pg=()=>new X2.FitAddon;var Z2=Si(Y2(),1),Ng=()=>new Z2.WebglAddon;var tN=Si(eN(),1),Wg=()=>new tN.WebLinksAddon;var nN={addon:ne},rN={addon:ne},oN={addon:de(_e)};var Ug=function(e){return e.addon};var HT=e=>e.active,OT=e=>e.normal,PT=e=>e.alternate;var sN=Si(uN(),1),cN=e=>t=>()=>new sN.Terminal(e,t),lN=e=>()=>e.element,fN=e=>()=>e.textarea,NT=e=>()=>e.rows,BT=e=>()=>e.cols,ih=e=>e.buffer,WT=e=>()=>e.markers;var UT=e=>e.options,qT=e=>t=>()=>e.onBell(t),zT=e=>t=>()=>e.onBinary(n=>t(n)());var VT=e=>t=>()=>e.onData(n=>t(n)()),GT=e=>t=>()=>e.onKey(n=>t(n)()),JT=e=>t=>()=>e.onLineFeed(t),jT=e=>t=>()=>e.onRender(n=>t(n)()),KT=e=>t=>()=>e.onWriteParsed(t),QT=e=>t=>()=>e.onResize(n=>t(n)()),XT=e=>t=>()=>e.onScroll(n=>t(n)()),YT=e=>t=>()=>e.onSelectionChange(t),ZT=e=>t=>()=>e.onTitleChange(n=>t(n)());var e1=e=>t=>()=>e.open(t);var t1=e=>t=>n=>()=>e.write(t,n),n1=e=>t=>n=>()=>e.writeln(t,n);var dN=e=>t=>()=>e.loadAddon(t);var pN=V(ke);var hN=function(){var e=pN(Rf);return function(t){return e(fN(t))}}();var _N=function(e){return function(t){return cN(qc(e))(qc(t))}},vN=function(e){var t=Ug(e);return function(n){return function(a){return dN(n)(t(a))}}};var mN=function(){var e=pN(Rf);return function(t){return e(lN(t))}}();var zg=V(ri),ty=de(_e),cu=V(ke),o1=U2(zl)(a_),gN=nt(rt),Vg=qd(EA),SY=vN(oN),Gg=ee(fr),a1=gN(fr),$f=gn(gr),Jg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),i1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),u1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),s1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Kg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),c1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),l1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),f1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),d1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Zg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ey=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),EY={map:function(e){return function(t){if(t instanceof Jg)return new Jg(zg(e)(t.value0));if(t instanceof i1)return new i1(function(n){return e(t.value0(n))});if(t instanceof u1)return new u1(function(n){return e(t.value0(n))});if(t instanceof jg)return new jg(function(n){return e(t.value0(n))});if(t instanceof s1)return new s1(function(n){return e(t.value0(n))});if(t instanceof Kg)return new Kg(zg(e)(t.value0));if(t instanceof c1)return new c1(zg(e)(t.value0));if(t instanceof l1)return new l1(zg(e)(t.value0));if(t instanceof f1)return new f1(function(n){return e(t.value0(n))});if(t instanceof Qg)return new Qg(t.value0,e(t.value1));if(t instanceof Xg)return new Xg(t.value0,e(t.value1));if(t instanceof d1)return new d1(function(n){return e(t.value0(n))});if(t instanceof Yg)return new Yg(function(n){return e(t.value0(n))});if(t instanceof Zg)return new Zg(function(n){return e(t.value0(n))});if(t instanceof ey)return new ey(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},TY=ra(EY),Zn=function(e){return dt(new Xg(e,void 0))},hn=function(e){return dt(new Qg(e,void 0))};var ny=function(e){return dt(new Kg(e))},yN=function(){return dt(new Yg(ty))}(),DN=function(){return dt(new Zg(ty))}();var CN=function(e){var t=e.MonadEffect0(),n=t.Monad0(),a=ji(n.Bind1()),d=ee(a),r=Ir(is(n)),o=ei(t),l=K2(o),u=Le(o),i=bn(cv(e)),s=gN(a);return function(f){var h=us(f),p=l(h),c=function(_){if(_ instanceof Jg)return d(r)(function(v){return Ta(p(_.value0))(UT(v))});if(_ instanceof i1)return d(r)(function(v){return u(cu(_.value0)(mN(v)))});if(_ instanceof u1)return d(r)(function(v){return u(cu(_.value0)(hN(v)))});if(_ instanceof jg)return d(r)(function(v){return u(cu(_.value0)(NT(v)))});if(_ instanceof s1)return d(r)(function(v){return u(cu(_.value0)(BT(v)))});if(_ instanceof Kg)return d(r)(function(v){return u(Ta(o1(_.value0))(HT(ih(v))))});if(_ instanceof c1)return d(r)(function(v){return u(Ta(o1(_.value0))(OT(ih(v))))});if(_ instanceof l1)return d(r)(function(v){return u(Ta(o1(_.value0))(PT(ih(v))))});if(_ instanceof f1)return d(r)(function(v){return u(cu(_.value0)(WT(v)))});if(_ instanceof Qg)return d(r)(function(v){return d(i(fE))(function(m){return s(u(t1(v)(_.value0)(lC(Gp(_.value1)(m)))))(function(){return i(lE(m))})})});if(_ instanceof Xg)return d(r)(function(v){return d(i(fE))(function(m){return s(u(n1(v)(_.value0)(lC(Gp(_.value1)(m)))))(function(){return i(lE(m))})})});if(_ instanceof d1)return u(cu(function(v){return _.value0(n_(v))})(Vg(Pg)));if(_ instanceof Yg)return u(cu(function(v){return _.value0(n_(v))})(Vg(Wg)));if(_ instanceof Zg)return u(cu(function(v){return _.value0(n_(v))})(Vg(Ng)));if(_ instanceof ey)return d(r)(function(v){return u(cu(function(m){return _.value1(iF(m))})(Vg(SY(v)(_.value0))))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 32, column 5 - line 34, column 55): "+[_.constructor.name])};return TY(h)(c)}},ry=function(){return dt(new jg(ty))}(),sa=function(e){return dt(Jg.create(e))};var p1=function(e){var t=Ug(e);return function(n){return dt(new ey(t(n),ty))}},MY=p1(rN),xY=p1(nN),h1=function(e){return Gg(DN)(function(t){return a1(function(){if(t instanceof z)return $f(e)(Zn("WebGL Addon unavailable"));if(t instanceof k)return a1($f(e)(hn("Loading WebGL ")))(function(){return Gg(MY(t.value0))(function(n){return $f(e)(function(){return Zn(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return Gg(yN)(function(n){if(n instanceof z)return $f(e)(Zn("WebLinks Addon unavailable"));if(n instanceof k)return a1($f(e)(hn("Loading WebLinks ")))(function(){return Gg(xY(n.value0))(function(a){return $f(e)(function(){return Zn(a?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var bN=e=>()=>e.dispose();var wN={toDisposable:de(_e)},LY=function(e){return e.toDisposable},SN=function(e){return{dispose:function(){var t=LY(e);return function(n){return bN(t(n))}}()}},EN=function(e){return e.dispose};var Ft=ee(Nt),_1=Rr(It),IY=V($r),RY=CN(cs)(Xi),Ra=pn(It),$a=nt(rt)(Nt),$Y=ct(on)(vt),HY=EN(SN(wN)),v1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),OY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),PY=function(){function e(){}return e.value=new e,e}(),kY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),m1=function(){function e(){}return e.value=new e,e}(),NY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),BY=function(){function e(){}return e.value=new e,e}(),WY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),UY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qY=function(){function e(){}return e.value=new e,e}(),zY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),TN=function(){function e(){}return e.value=new e,e}(),MN=function(){function e(){}return e.value=new e,e}(),ca=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),VY=function(e){return function(t){return Dr([WO(oT),Gt([si("terminal")])([])])}},GY=function(e){var t=bn(ii(e));return function(n){return Ft(_1)(function(a){return t(IY(k.create)(Ta(RY(n))(a.terminal)))})}},JY=function(e){var t=Le(An(e.MonadEffect0())),n=function(p){return Ft(t(Qn))(function(c){return Ft(t(KT(p)(Kn(c.listener)(new ca(BY.value)))))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})},a=function(p){return Ft(t(Qn))(function(c){return Ft(t(ZT(p)(function(){var _=Kn(c.listener);return function(v){return _(ca.create(zY.create(v)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})},d=function(p){return Ft(t(Qn))(function(c){return Ft(t(YT(p)(Kn(c.listener)(new ca(qY.value)))))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})},r=function(p){return Ft(t(Qn))(function(c){return Ft(t(XT(p)(function(){var _=Kn(c.listener);return function(v){return _(ca.create(UY.create(v)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})},o=function(p){return Ft(t(Qn))(function(c){return Ft(t(QT(p)(function(){var _=Kn(c.listener);return function(v){return _(ca.create(WY.create(v)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})},l=function(p){return Ft(t(Qn))(function(c){return Ft(t(jT(p)(function(){var _=Kn(c.listener);return function(v){return _(ca.create(NY.create(v)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})},u=function(p){return Ft(t(Qn))(function(c){return Ft(t(JT(p)(Kn(c.listener)(new ca(m1.value)))))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})},i=function(p){return Ft(t(Qn))(function(c){return Ft(t(GT(p)(function(){var _=Kn(c.listener);return function(v){return _(ca.create(kY.create(v)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})},s=function(p){return Ft(t(Qn))(function(c){return Ft(t(VT(p)(function(){var _=Kn(c.listener);return function(v){return _(ca.create(v1.create(v)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})},f=function(p){return Ft(t(Qn))(function(c){return Ft(t(zT(p)(function(){var _=Kn(c.listener);return function(v){return _(ca.create(OY.create(v)))}}())))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})},h=function(p){return Ft(t(Qn))(function(c){return Ft(t(qT(p)(Kn(c.listener)(new ca(PY.value)))))(function(_){return Ft(Rn(c.emitter))(function(){return Ra(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Dn(_)(v.disposables),m})})})})};return function(p){if(p instanceof TN)return Ft(Pr("terminal"))(function(c){if(c instanceof z)return t(ni("no terminal element"));if(c instanceof k)return Ft(_1)(function(_){return $a(t(e1(_.terminal)(c.value0)))(function(){return $a(h(_.terminal))(function(){return $a(f(_.terminal))(function(){return $a(i(_.terminal))(function(){return $a(u(_.terminal))(function(){return $a(l(_.terminal))(function(){return $a(n(_.terminal))(function(){return $a(o(_.terminal))(function(){return $a(r(_.terminal))(function(){return $a(d(_.terminal))(function(){return $a(a(_.terminal))(function(){return s(_.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.XTerm (line 117, column 5 - line 132, column 28): "+[c.constructor.name])});if(p instanceof MN)return Ft(_1)(function(c){return t($Y(HY)(c.disposables))});if(p instanceof ca)return tr(p.value0);throw new Error("Failed pattern match at Halogen.XTerm (line 114, column 16 - line 136, column 23): "+[p.constructor.name])}},xN=function(e){return en({initialState:function(t){return{terminal:t,disposables:[]}},render:VY(e),eval:Zt({receive:it.receive,handleAction:JY(e),handleQuery:GY(e),initialize:new k(TN.value),finalize:new k(MN.value)})})};var jY=De(ln),RN={reflectSymbol:function(){return"terminal"}},KY=ci()(RN)(jt),$N=nC(Pc),g1=ee($N),y1=wt(ev)(Pc),QY=yr()(RN)(jt),XY=X(Yt),LN=V($n),YY=wt(ff),HN=Rr(It),Hf=X(oC(Pc)),ay=nt(rt)($N),ON=SI(It),D1=pn(ON),ZY=Rr(ON),eZ=wI($p),AN=ee(Nt),tZ=De(ik),nZ=st(uk),rZ=pn(It),IN=ut($n),oZ=X(Is),PN=function(){return pt.value}(),aZ=function(e){var t=xN(e);return function(n){return Dr(jY([function(){if(n.terminal instanceof z)return Dr([]);if(n.terminal instanceof k)return KY(PN)(void 0)(t)(n.terminal.value0)(KE.create);throw new Error("Failed pattern match at Halogen.XShell (line 49, column 8 - line 51, column 80): "+[n.terminal.constructor.name])}()])(M2(n.windows)))}},kN=function(e){var t=e.MonadEffect0().Monad0(),n=YY(t),a=ra(E2(t.Bind1().Apply0().Functor0()))(eZ);return function(d){var r=function(o){if(o instanceof Zp)return g1(y1(QY(PN)(void 0)(o.value0)))(function(l){return XY(l)});if(o instanceof eh)return LN(k.create)(n(o.value0));if(o instanceof th)return g1(y1(HN))(function(l){return Hf(o.value0(l.shell))});if(o instanceof nh)return ay(D1(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.shell=o.value0,u}))(function(){return Hf(o.value1)});if(o instanceof rh)return ay(D1(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.interpreter=o.value0,u}))(function(){return Hf(o.value1)});if(o instanceof Sg)return ay(y1(tr(o.value0)))(function(){return Hf(o.value1)});if(o instanceof oh)return LN(k.create)(o.value0);if(o instanceof Eg)return g1(ZY)(function(l){return Hf(o.value0(l.windows))});if(o instanceof ah)return ay(D1(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.windows=o.value0(l.windows),u}))(function(){return Hf(o.value1)});throw new Error("Failed pattern match at Halogen.XShell (line 80, column 5 - line 82, column 22): "+[o.constructor.name])};return bI(a(r)(d))}},iZ=function(e){var t=Le(An(e.MonadEffect0())),n=kN(e);return function(a){if(a instanceof jE)return AN(t(_N(tZ(Jp(z2)('"Cascadia Code", Menlo, monospace'))(Jp(V2)(!0)))(nZ)))(function(d){return rZ(function(r){var o={};for(var l in r)({}).hasOwnProperty.call(r,l)&&(o[l]=r[l]);return o.terminal=new k(d),o})});if(a instanceof KE)return AN(HN)(function(d){return IN(n(d.interpreter(a.value0)))});if(a instanceof QE)return IN(n(a.value0));throw new Error("Failed pattern match at Halogen.XShell (line 61, column 16 - line 70, column 35): "+[a.constructor.name])}},iy=function(e){return en({initialState:function(t){return{shell:t,interpreter:ve(oZ(void 0)),terminal:z.value,windows:ds}},render:aZ(e),eval:Zt({receive:it.receive,finalize:it.finalize,handleAction:iZ(e),handleQuery:kN(e),initialize:new k(jE.value)})})};var lu=ee(Nt),uZ=Io(It),Of=ut($n),qN=yr(),zN={reflectSymbol:function(){return"shell"}},uh=qN(zN)(jt),C1=Ro(It),VN=nt(rt),Pf=VN(Nt),b1=pn(It),GN={reflectSymbol:function(){return"feed"}},w1=qN(GN)(fd),BN=de(_e),WN=ct(Yt)(Ht),S1=Ee(Er),sZ=gn(Yt),cZ=Ee(yl(ro)),lZ=Pi(nP),fZ=Ee(t_(Er)),sh=VN(Do),dZ=ci()(GN)(fd),pZ=zk(YS)(TP(cs)),hZ=aa()(zN)(jt),_Z=iy(cs),E1=kc(aH);var JN=function(){function e(){}return e.value=new e,e}(),T1=function(){function e(){}return e.value=new e,e}(),jN=function(){function e(){}return e.value=new e,e}(),UN=function(){function e(){}return e.value=new e,e}(),KN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ch=function(e){return Wt(Zn(e))},kf=function(){return pt.value}(),uy=function(){return pt.value}(),QN=function(e){var t=Le(An(e));return function(n){if(n instanceof JN)return lu(uZ(function(a){var d={};for(var r in a)({}).hasOwnProperty.call(a,r)&&(d[r]=a[r]);return d.top=!a.top,d}))(function(a){var d=function(){return a.top?"top loading/unloading enabled":"top loading/unloading disabled"}();return Of(uh(kf)(void 0)(ch(d)))});if(n instanceof T1)return lu(C1(function(a){return a.log}))(function(a){if(a instanceof k)return Pf(b1(function(d){var r={};for(var o in d)({}).hasOwnProperty.call(d,o)&&(r[o]=d[o]);return r.log=z.value,r}))(function(){return Pf(Cm(a.value0.value0))(function(){return t(uP(a.value0.value1))})});if(a instanceof z)return lu(t(Qn))(function(d){return lu(t(iP(200)(Kn(d.listener)(UN.value))))(function(r){return lu(Rn(d.emitter))(function(o){return b1(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.log=new k(new Z(o,r)),u})})})});throw new Error("Failed pattern match at Examples.Halogen.Infinite.Scroll.Main (line 88, column 10 - line 97, column 60): "+[a.constructor.name])});if(n instanceof jN)return b1(function(a){var d={};for(var r in a)({}).hasOwnProperty.call(a,r)&&(d[r]=a[r]);return d.up=!a.up,d});if(n instanceof UN)return lu(C1(function(a){return a.top}))(function(a){return lu(w1(uy)(a)(new vg(BN)))(function(d){return lu(C1(function(r){return r.up}))(function(r){return $e(WN)(d)(function(o){var l=function(){return r?-99:99}();return Pf(Of(w1(uy)(a)(new $E(l,void 0))))(function(){return lu(w1(uy)(a)(new vg(BN)))(function(u){return $e(WN)(u)(function(i){return Pf(Of(uh(kf)(void 0)(ch("scroll: "+(S1(o)+("+="+S1(l)))))))(function(){return sZ(i!==o+l)(Pf(Of(uh(kf)(void 0)(ch("scroll offset error"+S1(i)))))(function(){return QN(e)(T1.value)}))})})})})})})})});if(n instanceof KN)return Pf(Of(uh(kf)(void 0)(ch("pages: "+cZ(lZ(rP(n.value0.pages)))))))(function(){return Of(uh(kf)(void 0)(ch("adjust: "+fZ(n.value0.update.scroll))))});throw new Error("Failed pattern match at Examples.Halogen.Infinite.Scroll.Main (line 81, column 3 - line 114, column 84): "+[n.constructor.name])}},vZ=function(e){return Gt([wn(sh(Ho(zi))(function(){return Vi(es)}))])([Gt([wn(sh(Zo(Xe(10)))(function(){return sh(Gi(Xe(10)))(function(){return sh(wa(Xe(400)))(function(){return sh(Oo(Xe(1200)))(function(){return WA(Ko)})})})}))])([dZ(uy)(e.top)(pZ)(function(){var t=Uk(150);return{initialElement:t.initialElement,pageSize:t.pageSize,hiddenPages:t.hiddenPages,preloadedPages:t.preloadedPages,preloadMillis:t.preloadMillis,enableTop:e.top,debounce:0,deadZone:1}}())(KN.create)]),Dr([hZ(kf)(void 0)(_Z)(void 0),Dr([Op([E1("type")(uf.value),Df(ve(JN.value))]),jn("enable top loading/unloading")]),Dr([Op([E1("type")(uf.value),Df(ve(T1.value))]),jn("enable automatic scrolling")]),Dr([Op([E1("type")(uf.value),Df(ve(jN.value))]),jn("auto scroll up")])])])},XN=function(){return en({initialState:ve({top:!1,up:!1,log:z.value}),render:vZ,eval:Zt({handleQuery:it.handleQuery,receive:it.receive,initialize:it.initialize,finalize:it.finalize,handleAction:QN(Cn)})})}();var gZ={dimap:function(e){return function(t){return function(n){return function(a){return n(e(a))}}}}},Rs={first:function(e){return function(t){return e(ar(t))}},second:function(e){return function(t){return e(vn(t))}},Profunctor0:function(){return gZ}};var xZ=In(),FZ=de(_e);var LZ=function(e){return xZ(e(FZ))},ho=function(e){return function(t){return LZ(t)(e)}};var sy=function(e){return e},Bo=function(e){return function(t){return sy(e)(ve(t))}};var tB=nt(rt)(Nt),AZ=ql(It),IZ=X(Yt),RZ=de(_e),nB=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$Z=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),HZ=function(e){return function(t){return Cs([ou(function(n){return $Z.create(ko(n))})])([jn(t)])}},OZ=function(e){return function(t){return tB(AZ(t.value0))(function(){return IZ(new k(t.value1))})}},PZ=function(e){var t=Le(An(e.MonadEffect0()));return function(n){return tB(t(bs(n.value0)))(function(){return tr(void 0)})}},rB=function(e){return en({initialState:RZ,render:HZ(e),eval:Zt({receive:it.receive,initialize:it.initialize,finalize:it.finalize,handleAction:PZ(e),handleQuery:OZ(e)})})};var fy=Si(ly(),1);function aB(e,t){return function(){return t.edit(e)}}var iB=function(e){return function(t){return aB(e,t)}};var WZ=Si(ly(),1);function uB(e,t){return function(){return t.setValue(e)}}function F1(e){return function(){return e.getValue()}}var cB=function(e){return function(t){return uB(e,t)}};var zZ=Si(ly(),1);function ue(e){return function(){var t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1);return function(){return t[e].apply(t,n)}}}function dy(e){return function(t){return function(){return t[e]}}}function VZ(e){return function(t,n){return function(){n[e]=t}}}var GZ=dy("text"),JZ=VZ("text"),jZ=dy("renderer"),KZ=dy("inMultiSelectMode"),QZ=ue("selectMoreLines"),XZ=dy("container"),YZ=ue("setKeyboardHandler"),ZZ=ue("getKeyboardHandler"),eee=ue("setSession"),L1=ue("getSession"),tee=ue("setValue"),nee=ue("getValue"),ree=ue("getSelection"),oee=ue("resize"),aee=ue("setTheme"),iee=ue("getTheme"),uee=ue("setStyle"),see=ue("unsetStyle"),cee=ue("setFontSize"),lee=ue("focus"),fee=ue("isFocused"),dee=ue("blur"),pee=ue("getCopyText"),hee=ue("insert"),_ee=ue("setOverwrite"),vee=ue("getOverwrite"),mee=ue("toggleOverwrite"),gee=ue("setScrollSpeed"),yee=ue("getScrollSpeed"),Dee=ue("setDragDelay"),Cee=ue("getDragDelay"),bee=ue("setSelectionStyle"),wee=ue("getSelectionStyle"),See=ue("setHighlightActiveLine"),Eee=ue("getHighlightActiveLine"),Tee=ue("setHighlightSelectedWord"),Mee=ue("getHighlightSelectedWord"),xee=ue("setShowInvisibles"),Fee=ue("getShowInvisibles"),Lee=ue("setShowPrintMargin"),Aee=ue("getShowPrintMargin"),Iee=ue("setPrintMarginColumn"),Ree=ue("getPrintMarginColumn"),$ee=ue("setReadOnly"),Hee=ue("getReadOnly"),Oee=ue("setBehavioursEnabled"),Pee=ue("getBehavioursEnabled"),kee=ue("setWrapBehavioursEnabled"),Nee=ue("getWrapBehavioursEnabled"),Bee=ue("setShowFoldWidgets"),Wee=ue("getShowFoldWidgets"),Uee=ue("remove"),qee=ue("removeWordRight"),zee=ue("removeWordLeft"),Vee=ue("removeToLineStart"),Gee=ue("removeToLineEnd"),Jee=ue("splitLine"),jee=ue("transposeLetters"),Kee=ue("toLowerCase"),Qee=ue("toUpperCase"),Xee=ue("indent"),Yee=ue("blockIndent"),Zee=ue("blockOutdent"),ete=ue("toggleCommentLines"),tte=ue("getNumberAt"),nte=ue("modifyNumber"),rte=ue("removeLines"),ote=ue("moveLinesDown"),ate=ue("moveLinesUp"),ite=ue("copyLinesUp"),ute=ue("copyLinesDown"),ste=ue("getFirstVisibleRow"),cte=ue("getLastVisibleRow"),lte=ue("isRowVisible"),fte=ue("isRowFullyVisible"),dte=ue("selectPageDown"),pte=ue("selectPageUp"),hte=ue("gotoPageDown"),_te=ue("gotoPageUp"),vte=ue("scrollPageDown"),mte=ue("scrollPageUp"),gte=ue("scrollToRow"),yte=ue("scrollToLine"),Dte=ue("centerSelection"),Cte=ue("getCursorPosition"),bte=ue("getCursorPositionScreen"),wte=ue("getSelectionRange"),Ste=ue("selectAll"),Ete=ue("clearSelection"),Tte=ue("moveCursorTo"),Mte=ue("moveCursorToPosition"),xte=ue("jumpToMatching"),Fte=ue("gotoLine"),Lte=ue("navigateTo"),Ate=ue("navigateUp"),Ite=ue("navigateDown"),Rte=ue("navigateLeft"),$te=ue("navigateRight"),Hte=ue("navigateLineStart"),Ote=ue("navigateLineEnd"),Pte=ue("navigateFileEnd"),kte=ue("navigateFileStart"),Nte=ue("navigateWordRight"),Bte=ue("navigateWordLeft"),Wte=ue("replace"),Ute=ue("replaceAll"),qte=ue("getLastSearchOptions"),zte=ue("find"),Vte=ue("findNext"),Gte=ue("findPrevious"),Jte=ue("undo"),jte=ue("redo"),Kte=ue("destroy");function br(e){return e}function A1(e){return JSON.stringify(e)}function lB(e,t,n,a,d,r,o){return o==null?e():typeof o=="boolean"?t(o):typeof o=="number"?n(o):typeof o=="string"?a(o):Object.prototype.toString.call(o)==="[object Array]"?d(o):r(o)}var fB=function(e){return function(t){return function(n){return lB(ve(e),ve(e),ve(e),t,ve(e),ve(e),n)}}};var I1=Ee(Li),ene=Ee(ro);var py=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),R1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dB=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pB=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),H1=function(){function e(){}return e.value=new e,e}(),lh={show:function(e){if(e instanceof py)return"(TypeMismatch "+(I1(e.value0)+")");if(e instanceof R1)return"(UnexpectedValue "+(A1(e.value0)+")");if(e instanceof dB)return"(AtIndex "+(ene(e.value0)+(" "+(Ee(lh)(e.value1)+")")));if(e instanceof $1)return"(AtKey "+(I1(e.value0)+(" "+(Ee(lh)(e.value1)+")")));if(e instanceof pB)return"(Named "+(I1(e.value0)+(" "+(Ee(lh)(e.value1)+")")));if(e instanceof H1)return"MissingValue";throw new Error("Failed pattern match at Data.Argonaut.Decode.Error (line 24, column 10 - line 30, column 35): "+[e.constructor.name])}};var vB=function(){return fB(new We(new py("String")))(Oe.create)}();var Bf={decodeJson:vB};var _y=function(e){return e.decodeJson};var yB=br;var Wf={encodeJson:yB};var fh=function(e){return e.encodeJson};var qze=Si(kM(),1),Vre={keyEncoding:"json",valueEncoding:"json"},NM=e=>t=>n=>()=>e.put(t,n),BM=e=>t=>()=>new Promise((a,d)=>{let r=(o,l)=>{a(l)};e.get(t,Vre,r)});var WM=e=>t=>()=>e.del(t);var UM=e=>()=>e.keys().all();var Jy=e=>e===void 0;var eW=Ee(lh),tW=ee(Qt),noe=Mn(Hi),roe=noe(Cl),nW=Le(Cn),qM=X(jr);var rW=function(e){var t=fh(e);return function(n){return function(a){var d=fh(a);return function(r){return function(o){return function(l){return function(u){return fs(NM(o.value0)(t(l))(d(u)))}}}}}}};var oW=function(e){var t=fh(e);return function(n){return function(a){return function(d){var r=_y(d);return function(o){return function(l){return tW(fs(BM(o.value0)(t(l))))(function(u){var i=Jy(u);if(i)return qM(z.value);var s=r(u);if(s instanceof We)return nW(go(ur(eW(s.value0))));if(s instanceof Oe)return qM(new k(s.value0));throw new Error("Failed pattern match at Level.DB.Operations (line 28, column 10 - line 30, column 40): "+[s.constructor.name])})}}}}}};var aW=function(e){var t=fh(e);return function(n){return function(a){return function(d){return function(r){return function(o){return fs(WM(r.value0)(t(o)))}}}}}},iW=function(e){var t=_y(e);return function(n){return function(a){return tW(fs(UM(a.value0)))(function(d){var r=roe(t)(d);if(r instanceof We)return nW(go(ur(eW(r.value0))));if(r instanceof Oe)return qM(r.value0);throw new Error("Failed pattern match at Level.DB.Operations (line 71, column 3 - line 73, column 26): "+[r.constructor.name])})}}};var uW=Si(kM(),1),aoe={keyEncoding:"json",valueEncoding:"json"},zM=e=>()=>new uW.Level(e,aoe);var coe=V(ke),loe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var sW=function(e){return coe(loe.create)(zM(e))};var VM=Wf,jy=Bf,doe=rW(VM)(jy)(Wf)(Bf),poe=oW(VM)(jy)(Wf)(Bf),hoe=aW(VM)(jy)(Wf)(Bf),cW=function(e){return function(t){return function(n){return doe(e)(t)(n)}}},lW=function(e){return function(t){return poe(e)(t)}},Rh=sW("filesystem"),fW=iW(jy)(Bf),dW=function(e){return function(t){return hoe(e)(t)}};var _W=nt(rt),hW=_W(Do),yu=ee(Nt),GM=Ro(It),Ky=ct(Yt)(Ht),JM=_W(Nt),_oe=pn(It),vW=function(){function e(){}return e.value=new e,e}(),mW=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gW=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),voe=function(e){return function(t){var n=Dr([Gt([si("editor"),wn(hW(wa(Xe(500)))(function(){return Oo(Xe(500))}))])([]),Cs([ou(function(a){return mW.create(ko(a))})])([jn("Save")]),Cs([ou(function(a){return gW.create(ko(a))})])([jn("Exit")])]);return Gt([wn(hW(Ho(zi))(function(){return Vi(es)}))])([n])}},moe=function(e){var t=Le(An(e.MonadEffect0())),n=bn(ii(e));return function(a){return function(d){if(d instanceof vW)return yu(t(Rh))(function(r){return yu(GM(function(o){return o.filePath}))(function(o){return yu(n(lW(r)(o)))(function(l){return yu(Pr("editor"))(function(u){return $e(Ky)(u)(function(i){return $e(Ky)(qp(i))(function(s){return yu(t(iB(s)(fy.default)))(function(f){return yu(t(L1(f)))(function(h){return JM($e(Ky)(l)(function(p){return t(cB(p)(h))}))(function(){return _oe(function(p){var c={};for(var _ in p)({}).hasOwnProperty.call(p,_)&&(c[_]=p[_]);return c.editSession=new k(new Z(r,new Z(f,h))),c})})})})})})})})})});if(d instanceof mW)return JM(t(bs(d.value0)))(function(){return yu(GM(function(r){return r.editSession}))(function(r){return yu(GM(function(o){return o.filePath}))(function(o){return $e(Ky)(r)(function(l){return yu(t(F1(l.value1.value1)))(function(u){return n(cW(l.value0)(o)(u))})})})})});if(d instanceof gW)return JM(t(bs(d.value0)))(function(){return tr(void 0)});throw new Error("Failed pattern match at Examples.Halogen.Widgets.Editor (line 73, column 16 - line 95, column 18): "+[d.constructor.name])}}},yW=function(e){var t=voe(e),n=moe(e);return function(a){return en({initialState:function(d){return{editSession:z.value,filePath:d}},render:t,eval:Zt({handleQuery:it.handleQuery,receive:it.receive,finalize:it.finalize,handleAction:n(a),initialize:new k(vW.value)})})}};function Qy(e){return function(t){return function(){return t.requestAnimationFrame(n=>e(n)())}}}var DW=ee(Nt),TW=nt(rt),CW=ut(ke),bW=ee(Fr),Doe=TW(Nt),wW=ut($n),Coe=V(Mp),boe=Rr(It),SW=ee(ai),woe=TW(ai),MW={reflectSymbol:function(){return"canvas"}},Soe=yr()(MW)(jt),Eoe=aa()(MW)(jt),xW=function(){function e(){}return e.value=new e,e}(),EW=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),FW=function(){return pt.value}(),Toe=function(e){var t=Le(An(e.MonadEffect0()));return function(n){return function(a){if(a instanceof xW)return DW(t(Qn))(function(d){var r=function(o){return function(){return Kn(d.listener)(o)(),CW(bW(ia)(Qy(r)))()}};return Doe(t(CW(bW(ia)(Qy(r)))))(function(){return wW(Rn(Coe(EW.create)(d.emitter)))})});if(a instanceof EW)return DW(boe)(function(d){var r=Gv(SW(Jv)(function(o){return SW(jv)(function(l){return woe(Kv({x:0,y:0,width:o,height:l}))(function(){return d.animation(a.value0)})})}));return wW(Soe(FW)(void 0)(r))});throw new Error("Failed pattern match at Halogen.Canvas.Animate (line 58, column 16 - line 73, column 37): "+[a.constructor.name])}}},Moe=function(e){var t=gf(e);return function(n){var a=t(n);return function(d){return Eoe(FW)(void 0)(a)(d.dimensions)}}},LW=function(e){var t=Moe(e),n=Toe(e);return function(a){return en({initialState:function(d){return{dimensions:d.dimensions,animation:d.animation}},render:t(a),eval:Zt({handleQuery:it.handleQuery,receive:it.receive,finalize:it.finalize,handleAction:n(a),initialize:new k(xW.value)})})}};var jM=function(e){return function(t){var n=_c(t.Profunctor0()),a=Pl(t);return function(d){return n(e)(function(r){return r.value1(r.value0)})(a(d))}}};var IW=X(Is),AW=V(mt),RW=nt(rt),Wr=RW(jc),Du=ee(jc),Aoe=Jr(Vt),Ioe=Xl(Vt)(vt),Roe=ta(Vt),$oe=de(_e),$h=RW(fr),Hoe=gn(gr),Xy=ee(fr),Ooe=Mn(uc)(gr),Poe=ct(gr)(Ht),$W=ct(Is)(Ht);var Cu={cmd:function(e){return jM(function(t){return new Z(t.command,function(n){return{prompt:t.prompt,commandEnv:t.commandEnv,foreground:t.foreground,command:n}})})(e)},prompt:function(e){return jM(function(t){return new Z(t.prompt,function(n){return{command:t.command,commandEnv:t.commandEnv,foreground:t.foreground,prompt:n}})})(e)}},Oh=function(e){var t=Le(If(e));return function(n){return function(a){return a instanceof v1?n(a.value0):a instanceof m1?t(ni("line feed")):IW(void 0)}}},Ph=function(e){return e.prompt},Yy=Ph(Cu)(Rs),kh=function(e){return e.cmd},HW=kh(Cu),Hh=HW(Qo),OW=HW(Rs),koe=function(e){return function(t){return function(n){var a=function(r){var o=`\r
  help\r
    show this help text`,l=function(u){return`\r
  `+(u.name+(`\r
    `+mo(`\r
    `)(u.description)))};return o+mo("")(AW(l)(r))},d=function(r){return Wr(Wt(Zn(a(n))))(function(){return Du(Eo)(function(o){return Wr(Wt(hn(ho(o)(Yy))))(function(){return Xn(Bo(Hh)(""))})})})};return Aoe("help")(d)(Ioe(AW(function(r){return new Z(r.name,r.cmd)})(n)))}}},Zy=function(e){var t=koe(e);return function(n){var a=t(n);return function(d){var r=a(d);return Du(Eo)(function(o){var l=Y0(function(s){return!GL(s)})(fD(" ")(ho(o)(OW))),u=Oi(l);if(u instanceof z)return Wr(Wt(Zn("")))(function(){return Du(Eo)(function(s){return Wr(Wt(hn(ho(s)(Yy))))(function(){return Xn(Bo(Hh)(""))})})});if(u instanceof k){var i=Roe(u.value0)(r);if(i instanceof k)return i.value0(Ke([])($oe)(j0(l)));if(i instanceof z)return Wr(Wt(Zn(`\r
unrecognised command "`+(u.value0+'" - type "help" to see the available commands'))))(function(){return Du(Eo)(function(s){return Wr(Wt(hn(ho(s)(Yy))))(function(){return Xn(Bo(Hh)(""))})})});throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 199, column 7 - line 206, column 34): "+[i.constructor.name])}throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 191, column 3 - line 206, column 34): "+[u.constructor.name])})}}};var Noe=function(e){return function(t){var n=kh(t),a=n(Rs),d=Ph(t)(Rs),r=n(Qo);return Du(Eo)(function(o){return Wr(Wt(Xy(ny(bT))(function(l){var u=l===0;return u?$h(hn("\x1BM"))(function(){return Xy(ny(Xy(wT)(function(i){return Xy(CT(i-1|0))(function(s){return Ooe(DT)(s)})})))(function(i){return $h(hn("\x9BK"))(function(){return $e(Poe)(i)(function(s){var f=(pc(ho(o)(a))-1|0)<=s;return f?$h(hn(ho(o)(d)))(function(){return hn(I_(1)(ho(o)(a)))}):hn(I_(1)(UL(s)(ho(o)(a))))})})})}):Hoe(pc(ho(o)(a))>0)(hn("\b \b"))})))(function(){return Xn(sy(r)(I_(1)))})})}},Nh=function(e){var t=Noe(e),n=Le(If(e));return function(a){var d=kh(a)(Qo),r=Ph(a)(Rs),o=t(a);return function(l){return function(u){return u===""?Wr(Xn(Bo(d)("")))(function(){return Du(Eo)(function(i){return Wt($h(hn("^C"))(function(){return hn(`\r
`+ho(i)(r))}))})}):u==="\r"?l:u==="\x7F"?o:u>=" "&&u<="~"||u>="\xA0"?Wr(Xn(sy(d)(function(i){return i+u})))(function(){return Wt(hn(u))}):Wr(n(ni("non-printable: "+u)))(function(){return IW(void 0)})}}}},Boe=function(e){var t=e.MonadEffect0(),n=Oh(t),a=Nh(t)(Cu),d=Zy(e);return function(r){var o=d(r);return Du(Eo)(function(l){return Wr($e($W)(l.foreground)(function(u){return u.kill}))(function(){return Wr(Xn(function(u){return{prompt:u.prompt,command:u.command,commandEnv:u.commandEnv,foreground:z.value}}))(function(){return Wr(Xn(Bo(Hh)("")))(function(){return Du(Eo)(function(u){return Wr(Wt($h(sa(gi(!0)))(function(){return hn(`\r
`+ho(u)(Yy))})))(function(){return vi(n(a(o(l.commandEnv))))})})})})})})}},Woe=function(e){return Du(Eo)(function(t){return Wr($e($W)(t.foreground)(function(n){return n.stdin(ho(t)(OW))}))(function(){return Wr(Wt(hn(`\r
`)))(function(){return Xn(Bo(Hh)(""))})})})},PW=function(e){var t=e.MonadEffect0(),n=Oh(t),a=Boe(e),d=Nh(t)(Cu),r=Woe(e);return function(o){var l=a(o);return n(function(u){return u===""?Wr(Wt(hn("^C")))(function(){return l}):d(r)(u)})}};var e0=ee(jc),XM=nt(rt),Un=XM(jc),t0=De(Js),qoe=Ph(Cu)(Rs),Bh=kh(Cu)(Qo),zoe=qr(T2),n0=ee(fr),kW=Ee(ro),Voe=Ee(tF),Goe=Ee(Li),YM=XE(),ZM={reflectSymbol:function(){return"button"}},Joe=YM(ZM)(jt)(),NW=ut(S2),qW=YE(),joe=qW(ZM)(jt)(),ex=ZE(),Koe=ex(ZM)(jt)(),qh=XM(fr),zW={reflectSymbol:function(){return"editor"}},BW=ex(zW)(jt)(),Qoe=YM(zW)(jt)(),Wh=X(Is),Xoe=V(mt),Yoe=ct(Is)(vt),tx={reflectSymbol:function(){return"canvas"}},WW=YM(tx)(jt)(),UW=ex(tx)(jt)(),zs=XM(ai),Zoe=qW(tx)(jt)(),eae=ut($n),VW={reflectSymbol:function(){return"shell"}},tae=yr()(VW)(jt),nae=aa()(VW)(jt),rae=function(){function e(){}return e.value=new e,e}();var GW=function(){return pt.value}(),KM=function(){return pt.value}(),Uh=function(){return pt.value}(),QM=function(){return pt.value}(),nx=function(e){var t=rB(e),n=PW(e),a=e.MonadEffect0(),d=Oh(a),r=Nh(a)(Cu),o=Zy(e),l=yW(e),u=Le(If(a)),i=bn(w2(e)),s=gf(e),f=LW(e);return function(h){var p=n(h),c=o(h),_=l(h),v=s(h),m=f(h),y=e0(Eo)(function(S){return Un(Wt(hn(`\r
`+ho(S)(qoe))))(function(){return Xn(Bo(Bh)(""))})}),C=function(S){return ve(zoe(S)(y))};return[{name:"rows",description:["prints the number of rows in the terminal"],cmd:C(Wt(n0(ry)(function(){var S=t0(`\r
`);return function(D){return Zn(S(kW(D)))}}())))},{name:"cols",description:["prints the number of columns in the terminal"],cmd:C(Wt(n0(ry)(function(){var S=t0(`\r
`);return function(D){return Zn(S(kW(D)))}}())))},{name:"blinking",description:["prints a boolean indicating whether the cursor is blinking"],cmd:C(Wt(n0(sa(LT))(function(){var S=t0(`\r
`);return function(D){return Zn(S(Voe(D)))}}())))},{name:"blinkon",description:["turns on cursor blinking"],cmd:C(Wt(sa(gi(!0))))},{name:"blinkoff",description:["turns off cursor blinking"],cmd:C(Wt(sa(gi(!1))))},{name:"fontFamily",description:["prints the font family of the terminal"],cmd:C(Wt(n0(sa(FT))(function(){var S=t0(`\r
`);return function(D){return Zn(S(Goe(D)))}}())))},{name:"button",description:["creates a button as a subprocess.","the subprocess can be cancelled with ^C","accepts button text as argument.",'clicking the button prints "click!" to the terminal.'],cmd:function(S){return Un(Xn(Bo(Bh)("")))(function(){return Un(Joe(QM)(void 0)(t)(mo(" ")(S))(ve(Wt(Zn("click!")))))(function(){var D={stdin:function(g){return NW(joe(QM)(void 0)(new nB(g,void 0)))},kill:Koe(QM)(void 0)};return Un(Xn(function(g){return{prompt:g.prompt,command:g.command,commandEnv:g.commandEnv,foreground:new k(D)}}))(function(){return Un(Wt(qh(sa(gi(!1)))(function(){return hn(`\r
`)})))(function(){return vi(p)})})})})}},{name:"edit",description:["opens a file in the editor as a subprocess.","the subprocess can be cancelled with ^C","accepts the file path as argument."],cmd:function(S){return S.length===1&&pc(S[0])>0?Un(Xn(Bo(Bh)("")))(function(){var D=Un(BW(KM)(void 0))(function(){return Un(Wt(hn("> ")))(function(){return vi(d(r(c(nx(e)(h)))))})});return Un(Qoe(KM)(void 0)(_)(S[0])(ve(D)))(function(){var g={stdin:ve(Wh(void 0)),kill:BW(KM)(void 0)};return Un(Xn(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new k(g)}}))(function(){return Un(Wt(qh(sa(gi(!1)))(function(){return hn(`\r
`)})))(function(){return vi(p)})})})}):C(Wt(Zn(`\r
this command expects a single file name as its argument`)))(S)}},{name:"ls",description:["lists files in the file system"],cmd:C(e0(u(Rh))(function(S){return e0(i(fW(S)))(function(D){return Wt(Zn(`\r
`+mo(" ")(Xoe(function(g){return g})(D))))})}))},{name:"rm",description:["remove files from the file system"],cmd:function(S){return e0(u(Rh))(function(D){return Un(Yoe(function(g){return i(dW(D)(g))})(S))(function(){return y})})}},{name:"canvas",description:["canvas example"],cmd:function(S){return Un(Xn(Bo(Bh)("")))(function(){return Un(WW(Uh)(void 0)(v)({width:200,height:200})(ve(Wh(void 0))))(function(){var D={stdin:ve(Wh(void 0)),kill:UW(Uh)(void 0)},g=zs(Lc(Ga(255)(255)(200)))(function(){return zs(hp({x:0,y:0,width:200,height:200}))(function(){return zs(Lc(Ga(0)(0)(0)))(function(){return yw("hello")({x:50,y:50})})})});return Un(NW(Zoe(Uh)(void 0)(g)))(function(){return Un(Xn(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new k(D)}}))(function(){return Un(Wt(qh(sa(gi(!1)))(function(){return hn(`\r
`)})))(function(){return vi(p)})})})})})}},{name:"animation",description:["canvas animation example"],cmd:function(S){return Un(Xn(Bo(Bh)("")))(function(){var D=function(g){return zs(Lc(Ga(255)(255)(200)))(function(){return zs(hp({x:0,y:0,width:200,height:200}))(function(){return zs(Lc(Ga(0)(0)(0)))(function(){return zs(d$({translateX:50,translateY:50}))(function(){return zs(c$(g/1e3))(function(){return yw("hello")({x:0,y:0})})})})})})};return Un(WW(Uh)(void 0)(m)({dimensions:{width:200,height:200},animation:D})(ve(Wh(void 0))))(function(){var g={stdin:ve(Wh(void 0)),kill:UW(Uh)(void 0)};return Un(Xn(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new k(g)}}))(function(){return Un(Wt(qh(sa(gi(!1)))(function(){return hn(`\r
`)})))(function(){return vi(p)})})})})}}]}},oae=function(e){var t=e.MonadEffect0(),n=Oh(t),a=Nh(t)(Cu),d=Zy(e),r=nx(e);return function(o){var l=d(o),u=r(o);return function(i){return eae(tae(GW)(void 0)(Un(Wt(qh(h1(!0))(function(){return hn("> ")})))(function(){return vi(n(a(l(u))))})))}}},aae=function(e){var t=nx(e);return function(n){return{prompt:"> ",command:"",foreground:z.value,commandEnv:t(n)}}},iae=function(e){var t=iy(e),n=aae(e);return function(a){return ve(nae(GW)(void 0)(t)(n(a)))}},JW=function(e){var t=iae(e),n=oae(e);return function(a){return en({initialState:ve(void 0),render:t(a),eval:Zt({handleQuery:it.handleQuery,receive:it.receive,finalize:it.finalize,handleAction:n(a),initialize:new k(rae.value)})})}};var sae=V(Dt),jW=HH(hm),YW=V(mt),cae=Pi(Bn),lae=ee(Nt),KW=ee(Fr),ZW=nt(rt),QW=ZW(Nt),fae=nR(zl),XW=pn(It),e3=ta(Vt),dae=X(Yt),r0=ZW(Do),pae=_A(JA),hae=aa()({reflectSymbol:function(){return"example"}})(Vt),_ae=Xl(Vt)(vt),vae=JW(cs)(Xi),mae=ZO(cs)(Xi),gae=ut($r),t3=function(){function e(){}return e.value=new e,e}(),rx=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yae=function(e){return Ke(new rx(""))(rx.create)(sae(function(t){return t.value})(TS(e)))},Dae=function(e){var t=function(n){return yS([jW(n.id)])([jn(n.name)])};return DS([jW(e.selected),Df(yae)])(YW(t)(cae(Jd(e.examples))))},Cae=function(e){var t=Le(An(e));return function(n){if(n instanceof t3)return lae(t(KW(KW(ia)(eE))(ZS)))(function(a){return QW(t(fae(R_(1)(a))))(function(){return QW(XW(function(d){var r=e3(R_(1)(a))(d.examples);if(r instanceof z)return d;if(r instanceof k){var o={};for(var l in d)({}).hasOwnProperty.call(d,l)&&(o[l]=d[l]);return o.selected=r.value0.id,o}throw new Error("Failed pattern match at Main (line 100, column 10 - line 102, column 46): "+[r.constructor.name])}))(function(){return dae(void 0)})})});if(n instanceof rx)return XW(function(a){var d={};for(var r in a)({}).hasOwnProperty.call(a,r)&&(d[r]=a[r]);return d.selected=n.value0,d});throw new Error("Failed pattern match at Main (line 95, column 3 - line 104, column 62): "+[n.constructor.name])}},bae=function(){return pt.value}(),wae=function(e){return Gt([wn(r0(Ho(zi))(function(){return Vi(GA)}))])([Gt([wn(r0(Ho(zi))(function(){return r0(Vi(es))(function(){return r0(jA(pae))(function(){return bc(Cc)(Xe(1))(Ko)})})}))])([Hp([jn("Example")]),Gt([wn(J_(Xe(0))(Xe(0))(Xe(0))(Xe(10)))])([Dae(e)])]),Gt([wn(bc(Cc)(Xe(1))(Ko))])([function(){var t=e3(e.selected)(e.examples);if(t instanceof k)return hae(bae)(t.value0.id)(t.value0.component)(void 0);if(t instanceof z)return Dr([]);throw new Error("Failed pattern match at Main (line 144, column 11 - line 146, column 34): "+[t.constructor.name])}()])])},Sae=function(){return en({initialState:function(e){return{selected:e.value0,examples:_ae(YW(function(t){return new Z(t.id,t)})(e.value1))}},render:wae,eval:Zt({handleQuery:it.handleQuery,receive:it.receive,finalize:it.finalize,handleAction:Cae(Cn),initialize:new k(t3.value)})})}(),n3=rE(ee(Qt)(oE)(function(e){var t=[{id:"xterm",name:"XTerm",component:vae},{id:"infinite-scroll",name:"Infinite Scroll",component:XN},{id:"halogen-canvas-sketch",name:"Line Sketch",component:mae}];return gae(JE(Sae)(new Z("xterm",t))(e))}));n3();})();
/*! Bundled license information:

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)
  (*! @license
  ==========================================================================
  SproutCore -- JavaScript Application Framework
  copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
  
  SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.
  
  For more information about SproutCore, visit http://www.sproutcore.com
  
  
  ==========================================================================
  @license *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
