(()=>{var _W=Object.create;var RM=Object.defineProperty;var mW=Object.getOwnPropertyDescriptor;var vW=Object.getOwnPropertyNames;var gW=Object.getPrototypeOf,yW=Object.prototype.hasOwnProperty;var Tt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var DW=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let h of vW(t))!yW.call(e,h)&&h!==n&&RM(e,h,{get:()=>t[h],enumerable:!(o=mW(t,h))||o.enumerable});return e};var Di=(e,t,n)=>(n=e!=null?_W(gW(e)):{},DW(t||!e||!e.__esModule?RM(n,"default",{value:e,enumerable:!0}):n,e));var s2=Tt((mg,iT)=>{(function(e,t){typeof mg=="object"&&typeof iT=="object"?iT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof mg=="object"?mg.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let o=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(o._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,o=n._renderService.dimensions;if(o.css.cell.width===0||o.css.cell.height===0)return;let h=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(a.getPropertyValue("height")),l=Math.max(0,parseInt(a.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),i=r-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),s=l-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-h;return{cols:Math.max(2,Math.floor(s/o.css.cell.width)),rows:Math.max(1,Math.floor(i/o.css.cell.height))}}}})(),e})())});var l2=Tt((gg,uT)=>{(function(e,t){typeof gg=="object"&&typeof uT=="object"?uT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof gg=="object"?gg.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(h,a,r){var l=this&&this.__decorate||function(D,g,b,F){var E,T=arguments.length,M=T<3?g:F===null?F=Object.getOwnPropertyDescriptor(g,b):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,F);else for(var w=D.length-1;w>=0;w--)(E=D[w])&&(M=(T<3?E(M):T>3?E(g,b,M):E(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M};Object.defineProperty(a,"__esModule",{value:!0}),a.GlyphRenderer=void 0;let u=r(374),i=r(509),s=r(855),f=r(859),p=r(776),d=r(381),c=11,_=c*Float32Array.BYTES_PER_ELEMENT,m,v=0,y=0,C=0;class S extends f.Disposable{constructor(g,b,F){super(),this._terminal=g,this._gl=b,this._dimensions=F,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let E=this._gl;i.TextureAtlas.maxAtlasPages===void 0&&(i.TextureAtlas.maxAtlasPages=Math.min(32,(0,u.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),i.TextureAtlas.maxTextureSize=(0,u.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,u.throwIfFalsy)((0,d.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(R){let A="";for(let I=1;I<R;I++)A+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${R}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${A}
}`}(i.TextureAtlas.maxAtlasPages))),this.register((0,f.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,u.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,u.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,u.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);let T=new Float32Array([0,0,1,0,0,1,1,1]),M=E.createBuffer();this.register((0,f.toDisposable)(()=>E.deleteBuffer(M))),E.bindBuffer(E.ARRAY_BUFFER,M),E.bufferData(E.ARRAY_BUFFER,T,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let w=new Uint8Array([0,1,2,3]),x=E.createBuffer();this.register((0,f.toDisposable)(()=>E.deleteBuffer(x))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,x),E.bufferData(E.ELEMENT_ARRAY_BUFFER,w,E.STATIC_DRAW),this._attributesBuffer=(0,u.throwIfFalsy)(E.createBuffer()),this.register((0,f.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,_,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,_,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,_,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,_,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,_,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,_,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);let L=new Int32Array(i.TextureAtlas.maxAtlasPages);for(let R=0;R<i.TextureAtlas.maxAtlasPages;R++)L[R]=R;E.uniform1iv(this._textureLocation,L),E.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),this._atlasTextures=[];for(let R=0;R<i.TextureAtlas.maxAtlasPages;R++){let A=new d.GLTexture((0,u.throwIfFalsy)(E.createTexture()));this.register((0,f.toDisposable)(()=>E.deleteTexture(A.texture))),E.activeTexture(E.TEXTURE0+R),E.bindTexture(E.TEXTURE_2D,A.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[R]=A}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,b,F,E,T,M,w,x){this._updateCell(this._vertices.attributes,g,b,F,E,T,M,w,x)}_updateCell(g,b,F,E,T,M,w,x,L){v=(F*this._terminal.cols+b)*c,E!==s.NULL_CELL_CODE&&E!==void 0?this._atlas&&(m=x&&x.length>1?this._atlas.getRasterizedGlyphCombinedChar(x,T,M,w,!1):this._atlas.getRasterizedGlyph(E,T,M,w,!1),y=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),T!==L&&m.offset.x>y?(C=m.offset.x-y,g[v]=-(m.offset.x-C)+this._dimensions.device.char.left,g[v+1]=-m.offset.y+this._dimensions.device.char.top,g[v+2]=(m.size.x-C)/this._dimensions.device.canvas.width,g[v+3]=m.size.y/this._dimensions.device.canvas.height,g[v+4]=m.texturePage,g[v+5]=m.texturePositionClipSpace.x+C/this._atlas.pages[m.texturePage].canvas.width,g[v+6]=m.texturePositionClipSpace.y,g[v+7]=m.sizeClipSpace.x-C/this._atlas.pages[m.texturePage].canvas.width,g[v+8]=m.sizeClipSpace.y):(g[v]=-m.offset.x+this._dimensions.device.char.left,g[v+1]=-m.offset.y+this._dimensions.device.char.top,g[v+2]=m.size.x/this._dimensions.device.canvas.width,g[v+3]=m.size.y/this._dimensions.device.canvas.height,g[v+4]=m.texturePage,g[v+5]=m.texturePositionClipSpace.x,g[v+6]=m.texturePositionClipSpace.y,g[v+7]=m.sizeClipSpace.x,g[v+8]=m.sizeClipSpace.y)):g.fill(0,v,v+c-1-2)}clear(){let g=this._terminal,b=g.cols*g.rows*c;this._vertices.count!==b?this._vertices.attributes=new Float32Array(b):this._vertices.attributes.fill(0);let F=0;for(;F<this._vertices.attributesBuffers.length;F++)this._vertices.count!==b?this._vertices.attributesBuffers[F]=new Float32Array(b):this._vertices.attributesBuffers[F].fill(0);this._vertices.count=b,F=0;for(let E=0;E<g.rows;E++)for(let T=0;T<g.cols;T++)this._vertices.attributes[F+9]=T/g.cols,this._vertices.attributes[F+10]=E/g.rows,F+=c}handleResize(){let g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let F=this._vertices.attributesBuffers[this._activeBuffer],E=0;for(let T=0;T<g.lineLengths.length;T++){let M=T*this._terminal.cols*c,w=this._vertices.attributes.subarray(M,M+g.lineLengths[T]*c);F.set(w,E),E+=w.length}b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,F.subarray(0,E),b.STREAM_DRAW);for(let T=0;T<this._atlas.pages.length;T++)this._atlas.pages[T].version!==this._atlasTextures[T].version&&this._bindAtlasPageTexture(b,this._atlas,T);b.drawElementsInstanced(b.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,E/c)}setAtlas(g){this._atlas=g;for(let b of this._atlasTextures)b.version=-1}_bindAtlasPageTexture(g,b,F){g.activeTexture(g.TEXTURE0+F),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[F].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,b.pages[F].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[F].version=b.pages[F].version}setDimensions(g){this._dimensions=g}}a.GlyphRenderer=S,l([p.traceCall],S.prototype,"updateCell",null)},742:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RectangleRenderer=void 0;let l=r(374),u=r(859),i=r(310),s=r(381),f=8*Float32Array.BYTES_PER_ELEMENT;class p{constructor(){this.attributes=new Float32Array(160),this.count=0}}let d=0,c=0,_=0,m=0,v=0,y=0,C=0;class S extends u.Disposable{constructor(g,b,F,E){super(),this._terminal=g,this._gl=b,this._dimensions=F,this._themeService=E,this._vertices=new p,this._verticesCursor=new p;let T=this._gl;this._program=(0,l.throwIfFalsy)((0,s.createProgram)(T,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,u.toDisposable)(()=>T.deleteProgram(this._program))),this._projectionLocation=(0,l.throwIfFalsy)(T.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=T.createVertexArray(),T.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),w=T.createBuffer();this.register((0,u.toDisposable)(()=>T.deleteBuffer(w))),T.bindBuffer(T.ARRAY_BUFFER,w),T.bufferData(T.ARRAY_BUFFER,M,T.STATIC_DRAW),T.enableVertexAttribArray(3),T.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let x=new Uint8Array([0,1,2,3]),L=T.createBuffer();this.register((0,u.toDisposable)(()=>T.deleteBuffer(L))),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,L),T.bufferData(T.ELEMENT_ARRAY_BUFFER,x,T.STATIC_DRAW),this._attributesBuffer=(0,l.throwIfFalsy)(T.createBuffer()),this.register((0,u.toDisposable)(()=>T.deleteBuffer(this._attributesBuffer))),T.bindBuffer(T.ARRAY_BUFFER,this._attributesBuffer),T.enableVertexAttribArray(0),T.vertexAttribPointer(0,2,T.FLOAT,!1,f,0),T.vertexAttribDivisor(0,1),T.enableVertexAttribArray(1),T.vertexAttribPointer(1,2,T.FLOAT,!1,f,2*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(1,1),T.enableVertexAttribArray(2),T.vertexAttribPointer(2,4,T.FLOAT,!1,f,4*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(2,1),this._updateCachedColors(E.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),b.uniformMatrix4fv(this._projectionLocation,!1,s.PROJECTION_MATRIX),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,g.attributes,b.DYNAMIC_DRAW),b.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){let b=this._terminal,F=this._vertices,E,T,M,w,x,L,R,A,I,$,H,P=1;for(E=0;E<b.rows;E++){for(M=-1,w=0,x=0,L=!1,T=0;T<b.cols;T++)R=(E*b.cols+T)*i.RENDER_MODEL_INDICIES_PER_CELL,A=g.cells[R+i.RENDER_MODEL_BG_OFFSET],I=g.cells[R+i.RENDER_MODEL_FG_OFFSET],$=!!(67108864&I),(A!==w||I!==x&&(L||$))&&((w!==0||L&&x!==0)&&(H=8*P++,this._updateRectangle(F,H,x,w,M,T,E)),M=T,w=A,x=I,L=$);(w!==0||L&&x!==0)&&(H=8*P++,this._updateRectangle(F,H,x,w,M,b.cols,E))}F.count=P}updateCursor(g){let b=this._verticesCursor,F=g.cursor;if(!F||F.style==="block")return void(b.count=0);let E,T=0;F.style!=="bar"&&F.style!=="outline"||(E=8*T++,this._addRectangleFloat(b.attributes,E,F.x*this._dimensions.device.cell.width,F.y*this._dimensions.device.cell.height,F.style==="bar"?F.dpr*F.cursorWidth:F.dpr,this._dimensions.device.cell.height,this._cursorFloat)),F.style!=="underline"&&F.style!=="outline"||(E=8*T++,this._addRectangleFloat(b.attributes,E,F.x*this._dimensions.device.cell.width,(F.y+1)*this._dimensions.device.cell.height-F.dpr,F.width*this._dimensions.device.cell.width,F.dpr,this._cursorFloat)),F.style==="outline"&&(E=8*T++,this._addRectangleFloat(b.attributes,E,F.x*this._dimensions.device.cell.width,F.y*this._dimensions.device.cell.height,F.width*this._dimensions.device.cell.width,F.dpr,this._cursorFloat),E=8*T++,this._addRectangleFloat(b.attributes,E,(F.x+F.width)*this._dimensions.device.cell.width-F.dpr,F.y*this._dimensions.device.cell.height,F.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.count=T}_updateRectangle(g,b,F,E,T,M,w){if(67108864&F)switch(50331648&F){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&F].rgba;break;case 50331648:d=(16777215&F)<<8;break;default:d=this._themeService.colors.foreground.rgba}else switch(50331648&E){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:d=(16777215&E)<<8;break;default:d=this._themeService.colors.background.rgba}g.attributes.length<b+4&&(g.attributes=(0,s.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),c=T*this._dimensions.device.cell.width,_=w*this._dimensions.device.cell.height,m=(d>>24&255)/255,v=(d>>16&255)/255,y=(d>>8&255)/255,C=1,this._addRectangle(g.attributes,b,c,_,(M-T)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,m,v,y,C)}_addRectangle(g,b,F,E,T,M,w,x,L,R){g[b]=F/this._dimensions.device.canvas.width,g[b+1]=E/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=w,g[b+5]=x,g[b+6]=L,g[b+7]=R}_addRectangleFloat(g,b,F,E,T,M,w){g[b]=F/this._dimensions.device.canvas.width,g[b+1]=E/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=w[0],g[b+5]=w[1],g[b+6]=w[2],g[b+7]=w[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}a.RectangleRenderer=S},310:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderModel=a.COMBINED_CHAR_BIT_MASK=a.RENDER_MODEL_EXT_OFFSET=a.RENDER_MODEL_FG_OFFSET=a.RENDER_MODEL_BG_OFFSET=a.RENDER_MODEL_INDICIES_PER_CELL=void 0;let l=r(296);a.RENDER_MODEL_INDICIES_PER_CELL=4,a.RENDER_MODEL_BG_OFFSET=1,a.RENDER_MODEL_FG_OFFSET=2,a.RENDER_MODEL_EXT_OFFSET=3,a.COMBINED_CHAR_BIT_MASK=2147483648,a.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,l.createSelectionRenderModel)()}resize(u,i){let s=u*i*a.RENDER_MODEL_INDICIES_PER_CELL;s!==this.cells.length&&(this.cells=new Uint32Array(s),this.lineLengths=new Uint32Array(i))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(h,a,r){var l=this&&this.__decorate||function(M,w,x,L){var R,A=arguments.length,I=A<3?w:L===null?L=Object.getOwnPropertyDescriptor(w,x):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(M,w,x,L);else for(var $=M.length-1;$>=0;$--)(R=M[$])&&(I=(A<3?R(I):A>3?R(w,x,I):R(w,x))||I);return A>3&&I&&Object.defineProperty(w,x,I),I};Object.defineProperty(a,"__esModule",{value:!0}),a.JoinedCellData=a.WebglRenderer=void 0;let u=r(820),i=r(274),s=r(627),f=r(457),p=r(56),d=r(374),c=r(345),_=r(859),m=r(147),v=r(782),y=r(855),C=r(776),S=r(965),D=r(742),g=r(310),b=r(733);class F extends _.Disposable{constructor(w,x,L,R,A,I,$,H,P){super(),this._terminal=w,this._characterJoinerService=x,this._charSizeService=L,this._coreBrowserService=R,this._coreService=A,this._decorationService=I,this._optionsService=$,this._themeService=H,this._cursorBlinkStateManager=new _.MutableDisposable,this._charAtlasDisposable=this.register(new _.MutableDisposable),this._model=new g.RenderModel,this._workCell=new v.CellData,this._rectangleRenderer=this.register(new _.MutableDisposable),this._glyphRenderer=this.register(new _.MutableDisposable),this._onChangeTextureAtlas=this.register(new c.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new c.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new c.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new c.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new i.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new b.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,$,this._themeService)],this.dimensions=(0,d.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register($.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let q={antialias:!1,depth:!1,preserveDrawingBuffer:P};if(this._gl=this._canvas.getContext("webgl2",q),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextlost",G=>{console.log("webglcontextlost event received"),G.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(G)},3e3)})),this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextrestored",G=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,s.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,p.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(G,N)=>this._setCanvasDevicePixelDimensions(G,N))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,_.toDisposable)(()=>{var G;for(let N of this._renderLayers)N.dispose();(G=this._canvas.parentElement)===null||G===void 0||G.removeChild(this._canvas),(0,s.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var w;return(w=this._charAtlas)===null||w===void 0?void 0:w.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(w,x){var L,R,A,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let $ of this._renderLayers)$.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(L=this._rectangleRenderer.value)===null||L===void 0||L.setDimensions(this.dimensions),(R=this._rectangleRenderer.value)===null||R===void 0||R.handleResize(),(A=this._glyphRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(I=this._glyphRenderer.value)===null||I===void 0||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var w;for(let x of this._renderLayers)x.handleBlur(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.pause(),this._requestRedrawViewport()}handleFocus(){var w;for(let x of this._renderLayers)x.handleFocus(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.resume(),this._requestRedrawViewport()}handleSelectionChanged(w,x,L){for(let R of this._renderLayers)R.handleSelectionChanged(this._terminal,w,x,L);this._model.selection.update(this._terminal,w,x,L),this._requestRedrawViewport()}handleCursorMove(){var w;for(let x of this._renderLayers)x.handleCursorMove(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new D.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new S.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var w;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let x=(0,s.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==x&&(this._onChangeTextureAtlas.fire(x.pages[0].canvas),this._charAtlasDisposable.value=(0,_.getDisposeArrayDisposable)([(0,c.forwardEvent)(x.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,c.forwardEvent)(x.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=x,this._charAtlas.warmUp(),(w=this._glyphRenderer.value)===null||w===void 0||w.setAtlas(this._charAtlas)}_clearModel(w){var x;this._model.clear(),w&&((x=this._glyphRenderer.value)===null||x===void 0||x.clear())}clearTextureAtlas(){var w;(w=this._charAtlas)===null||w===void 0||w.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var w;this._clearModel(!0);for(let x of this._renderLayers)x.reset(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(w){return-1}deregisterCharacterJoiner(w){return!1}renderRows(w,x){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let L of this._renderLayers)L.handleGridChanged(this._terminal,w,x);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(w,x),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new f.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(w,x){let L=this._core,R,A,I,$,H,P,q,G,N,Q,O,B,U,k=this._workCell;w=T(w,L.rows-1,0),x=T(x,L.rows-1,0);let te=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,J=Math.min(this._terminal.buffer.active.cursorX,L.cols-1),ye=-1,Ae=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let we=!1;for(A=w;A<=x;A++)for(I=A+L.buffer.ydisp,$=L.buffer.lines.get(I),this._model.lineLengths[A]=0,H=this._characterJoinerService.getJoinedCharacters(I),B=0;B<L.cols;B++)if(R=this._cellColorResolver.result.bg,$.loadCell(B,k),B===0&&(R=this._cellColorResolver.result.bg),P=!1,q=B,H.length>0&&B===H[0][0]&&(P=!0,G=H.shift(),k=new E(k,$.translateToString(!0,G[0],G[1]),G[1]-G[0]),q=G[1]-1),N=k.getChars(),Q=k.getCode(),O=(A*L.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(k,B,I),Ae&&I===te&&(B===J&&(this._model.cursor={x:J,y:this._terminal.buffer.active.cursorY,width:k.getWidth(),style:this._coreBrowserService.isFocused?L.options.cursorStyle||"block":L.options.cursorInactiveStyle,cursorWidth:L.options.cursorWidth,dpr:this._devicePixelRatio},ye=J+k.getWidth()-1),B>=J&&B<=ye&&(this._coreBrowserService.isFocused&&(L.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&L.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),Q!==y.NULL_CELL_CODE&&(this._model.lineLengths[A]=B+1),(this._model.cells[O]!==Q||this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(we=!0,N.length>1&&(Q|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[O]=Q,this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(B,A,Q,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,N,R),P))for(k=this._workCell,B++;B<q;B++)U=(A*L.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(B,A,y.NULL_CELL_CODE,0,0,0,y.NULL_CELL_CHAR,0),this._model.cells[U]=y.NULL_CELL_CODE,this._model.cells[U+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[U+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[U+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;we&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(w,x){this._canvas.width===w&&this._canvas.height===x||(this._canvas.width=w,this._canvas.height=x,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let w=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:w,end:w})}}a.WebglRenderer=F,l([C.traceCall],F.prototype,"renderRows",null);class E extends m.AttributeData{constructor(w,x,L){super(),this.content=0,this.combinedData="",this.fg=w.fg,this.bg=w.bg,this.combinedData=x,this._width=L}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(w){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function T(M,w,x=0){return Math.max(Math.min(M,w),x)}a.JoinedCellData=E},381:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GLTexture=a.expandFloat32Array=a.createShader=a.createProgram=a.PROJECTION_MATRIX=void 0;let l=r(374);function u(i,s,f){let p=(0,l.throwIfFalsy)(i.createShader(s));if(i.shaderSource(p,f),i.compileShader(p),i.getShaderParameter(p,i.COMPILE_STATUS))return p;console.error(i.getShaderInfoLog(p)),i.deleteShader(p)}a.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),a.createProgram=function(i,s,f){let p=(0,l.throwIfFalsy)(i.createProgram());if(i.attachShader(p,(0,l.throwIfFalsy)(u(i,i.VERTEX_SHADER,s))),i.attachShader(p,(0,l.throwIfFalsy)(u(i,i.FRAGMENT_SHADER,f))),i.linkProgram(p),i.getProgramParameter(p,i.LINK_STATUS))return p;console.error(i.getProgramInfoLog(p)),i.deleteProgram(p)},a.createShader=u,a.expandFloat32Array=function(i,s){let f=Math.min(2*i.length,s),p=new Float32Array(f);for(let d=0;d<i.length;d++)p[d]=i[d];return p},a.GLTexture=class{constructor(i){this.texture=i,this.version=-1}}},592:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseRenderLayer=void 0;let l=r(627),u=r(237),i=r(374),s=r(859);class f extends s.Disposable{constructor(d,c,_,m,v,y,C,S){super(),this._container=c,this._alpha=v,this._coreBrowserService=y,this._optionsService=C,this._themeService=S,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${_}-layer`),this._canvas.style.zIndex=m.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(D=>{this._refreshCharAtlas(d,D),this.reset(d)})),this.register((0,s.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,i.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(d){}handleFocus(d){}handleCursorMove(d){}handleGridChanged(d,c,_){}handleSelectionChanged(d,c,_,m=!1){}_setTransparency(d,c){if(c===this._alpha)return;let _=this._canvas;this._alpha=c,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,_),this._refreshCharAtlas(d,this._themeService.colors),this.handleGridChanged(d,0,d.rows-1)}_refreshCharAtlas(d,c){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,l.acquireTextureAtlas)(d,this._optionsService.rawOptions,c,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(d,c){this._deviceCellWidth=c.device.cell.width,this._deviceCellHeight=c.device.cell.height,this._deviceCharWidth=c.device.char.width,this._deviceCharHeight=c.device.char.height,this._deviceCharLeft=c.device.char.left,this._deviceCharTop=c.device.char.top,this._canvas.width=c.device.canvas.width,this._canvas.height=c.device.canvas.height,this._canvas.style.width=`${c.css.canvas.width}px`,this._canvas.style.height=`${c.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(d,this._themeService.colors)}_fillBottomLineAtCells(d,c,_=1){this._ctx.fillRect(d*this._deviceCellWidth,(c+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,_*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(d,c,_,m){this._alpha?this._ctx.clearRect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,m*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,m*this._deviceCellHeight))}_fillCharTrueColor(d,c,_,m){this._ctx.font=this._getFont(d,!1,!1),this._ctx.textBaseline=u.TEXT_BASELINE,this._clipCell(_,m,c.getWidth()),this._ctx.fillText(c.getChars(),_*this._deviceCellWidth+this._deviceCharLeft,m*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(d,c,_){this._ctx.beginPath(),this._ctx.rect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(d,c,_){return`${_?"italic":""} ${c?d.options.fontWeightBold:d.options.fontWeight} ${d.options.fontSize*this._coreBrowserService.dpr}px ${d.options.fontFamily}`}}a.BaseRenderLayer=f},733:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkRenderLayer=void 0;let l=r(197),u=r(237),i=r(592);class s extends i.BaseRenderLayer{constructor(p,d,c,_,m,v,y){super(c,p,"link",d,!0,m,v,y),this.register(_.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(_.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(p,d){super.resize(p,d),this._state=void 0}reset(p){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let p=this._state.y2-this._state.y1-1;p>0&&this._clearCells(0,this._state.y1+1,this._state.cols,p),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(p){if(p.fg===u.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:p.fg!==void 0&&(0,l.is256Color)(p.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[p.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,p.y1===p.y2)this._fillBottomLineAtCells(p.x1,p.y1,p.x2-p.x1);else{this._fillBottomLineAtCells(p.x1,p.y1,p.cols-p.x1);for(let d=p.y1+1;d<p.y2;d++)this._fillBottomLineAtCells(0,d,p.cols);this._fillBottomLineAtCells(0,p.y2,p.x2)}this._state=p}_handleHideLinkUnderline(p){this._clearCurrentLink()}}a.LinkRenderLayer=s},820:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(r,l,u,i){r.addEventListener(l,u,i);let s=!1;return{dispose:()=>{s||(s=!0,r.removeEventListener(l,u,i))}}}},274:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellColorResolver=void 0;let r,l=0,u=0,i=!1,s=!1,f=!1;a.CellColorResolver=class{constructor(p,d,c,_,m){this._terminal=p,this._selectionRenderModel=d,this._decorationService=c,this._coreBrowserService=_,this._themeService=m,this.result={fg:0,bg:0,ext:0}}resolve(p,d,c){this.result.bg=p.bg,this.result.fg=p.fg,this.result.ext=268435456&p.bg?p.extended.ext:0,u=0,l=0,s=!1,i=!1,f=!1,r=this._themeService.colors,this._decorationService.forEachDecorationAtCell(d,c,"bottom",_=>{_.backgroundColorRGB&&(u=_.backgroundColorRGB.rgba>>8&16777215,s=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,i=!0)}),f=this._selectionRenderModel.isCellSelected(this._terminal,d,c),f&&(u=(this._coreBrowserService.isFocused?r.selectionBackgroundOpaque:r.selectionInactiveBackgroundOpaque).rgba>>8&16777215,s=!0,r.selectionForeground&&(l=r.selectionForeground.rgba>>8&16777215,i=!0)),this._decorationService.forEachDecorationAtCell(d,c,"top",_=>{_.backgroundColorRGB&&(u=_.backgroundColorRGB.rgba>>8&16777215,s=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,i=!0)}),s&&(u=f?-16777216&p.bg&-134217729|u|50331648:-16777216&p.bg|u|50331648),i&&(l=-16777216&p.fg&-67108865|l|50331648),67108864&this.result.fg&&(s&&!i&&(l=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&r.background.rgba>>8|50331648,i=!0),!s&&i&&(u=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&r.foreground.rgba>>8|50331648,s=!0)),r=void 0,this.result.bg=s?u:this.result.bg,this.result.fg=i?l:this.result.fg}}},627:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.removeTerminalFromCache=a.acquireTextureAtlas=void 0;let l=r(509),u=r(197),i=[];a.acquireTextureAtlas=function(s,f,p,d,c,_,m,v){let y=(0,u.generateConfig)(d,c,_,m,f,p,v);for(let D=0;D<i.length;D++){let g=i[D],b=g.ownedBy.indexOf(s);if(b>=0){if((0,u.configEquals)(g.config,y))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),i.splice(D,1)):g.ownedBy.splice(b,1);break}}for(let D=0;D<i.length;D++){let g=i[D];if((0,u.configEquals)(g.config,y))return g.ownedBy.push(s),g.atlas}let C=s._core,S={atlas:new l.TextureAtlas(document,y,C.unicodeService),config:y,ownedBy:[s]};return i.push(S),S.atlas},a.removeTerminalFromCache=function(s){for(let f=0;f<i.length;f++){let p=i[f].ownedBy.indexOf(s);if(p!==-1){i[f].ownedBy.length===1?(i[f].atlas.dispose(),i.splice(f,1)):i[f].ownedBy.splice(p,1);break}}}},197:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.is256Color=a.configEquals=a.generateConfig=void 0;let l=r(160);a.generateConfig=function(u,i,s,f,p,d,c){let _={foreground:d.foreground,background:d.background,cursor:l.NULL_COLOR,cursorAccent:l.NULL_COLOR,selectionForeground:l.NULL_COLOR,selectionBackgroundTransparent:l.NULL_COLOR,selectionBackgroundOpaque:l.NULL_COLOR,selectionInactiveBackgroundTransparent:l.NULL_COLOR,selectionInactiveBackgroundOpaque:l.NULL_COLOR,ansi:d.ansi.slice(),contrastCache:d.contrastCache,halfContrastCache:d.halfContrastCache};return{customGlyphs:p.customGlyphs,devicePixelRatio:c,letterSpacing:p.letterSpacing,lineHeight:p.lineHeight,deviceCellWidth:u,deviceCellHeight:i,deviceCharWidth:s,deviceCharHeight:f,fontFamily:p.fontFamily,fontSize:p.fontSize,fontWeight:p.fontWeight,fontWeightBold:p.fontWeightBold,allowTransparency:p.allowTransparency,drawBoldTextInBrightColors:p.drawBoldTextInBrightColors,minimumContrastRatio:p.minimumContrastRatio,colors:_}},a.configEquals=function(u,i){for(let s=0;s<u.colors.ansi.length;s++)if(u.colors.ansi[s].rgba!==i.colors.ansi[s].rgba)return!1;return u.devicePixelRatio===i.devicePixelRatio&&u.customGlyphs===i.customGlyphs&&u.lineHeight===i.lineHeight&&u.letterSpacing===i.letterSpacing&&u.fontFamily===i.fontFamily&&u.fontSize===i.fontSize&&u.fontWeight===i.fontWeight&&u.fontWeightBold===i.fontWeightBold&&u.allowTransparency===i.allowTransparency&&u.deviceCharWidth===i.deviceCharWidth&&u.deviceCharHeight===i.deviceCharHeight&&u.drawBoldTextInBrightColors===i.drawBoldTextInBrightColors&&u.minimumContrastRatio===i.minimumContrastRatio&&u.colors.foreground.rgba===i.colors.foreground.rgba&&u.colors.background.rgba===i.colors.background.rgba},a.is256Color=function(u){return(50331648&u)==16777216||(50331648&u)==33554432}},237:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;let l=r(399);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},457:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CursorBlinkStateManager=void 0,a.CursorBlinkStateManager=class{constructor(r,l){this._renderCallback=r,this._coreBrowserService=l,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(r=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let l=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,l>0)return void this._restartInterval(l)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let l=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(l)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},r)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tryDrawCustomChar=a.powerlineDefinitions=a.boxDrawingDefinitions=a.blockElementDefinitions=void 0;let l=r(374);a.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let u={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};a.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u2551":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2552":{1:(d,c)=>`M.5,1 L.5,${.5-c} L1,${.5-c} M.5,${.5+c} L1,${.5+c}`},"\u2553":{1:(d,c)=>`M${.5-d},1 L${.5-d},.5 L1,.5 M${.5+d},.5 L${.5+d},1`},"\u2554":{1:(d,c)=>`M1,${.5-c} L${.5-d},${.5-c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1`},"\u2555":{1:(d,c)=>`M0,${.5-c} L.5,${.5-c} L.5,1 M0,${.5+c} L.5,${.5+c}`},"\u2556":{1:(d,c)=>`M${.5+d},1 L${.5+d},.5 L0,.5 M${.5-d},.5 L${.5-d},1`},"\u2557":{1:(d,c)=>`M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M0,${.5-c} L${.5+d},${.5-c} L${.5+d},1`},"\u2558":{1:(d,c)=>`M.5,0 L.5,${.5+c} L1,${.5+c} M.5,${.5-c} L1,${.5-c}`},"\u2559":{1:(d,c)=>`M1,.5 L${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u255A":{1:(d,c)=>`M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0 M1,${.5+c} L${.5-d},${.5+c} L${.5-d},0`},"\u255B":{1:(d,c)=>`M0,${.5+c} L.5,${.5+c} L.5,0 M0,${.5-c} L.5,${.5-c}`},"\u255C":{1:(d,c)=>`M0,.5 L${.5+d},.5 L${.5+d},0 M${.5-d},.5 L${.5-d},0`},"\u255D":{1:(d,c)=>`M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M0,${.5+c} L${.5+d},${.5+c} L${.5+d},0`},"\u255E":{1:(d,c)=>`M.5,0 L.5,1 M.5,${.5-c} L1,${.5-c} M.5,${.5+c} L1,${.5+c}`},"\u255F":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1 M${.5+d},.5 L1,.5`},"\u2560":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u2561":{1:(d,c)=>`M.5,0 L.5,1 M0,${.5-c} L.5,${.5-c} M0,${.5+c} L.5,${.5+c}`},"\u2562":{1:(d,c)=>`M0,.5 L${.5-d},.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2563":{1:(d,c)=>`M${.5+d},0 L${.5+d},1 M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0`},"\u2564":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c} M.5,${.5+c} L.5,1`},"\u2565":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},1 M${.5+d},.5 L${.5+d},1`},"\u2566":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1`},"\u2567":{1:(d,c)=>`M.5,0 L.5,${.5-c} M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u2568":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u2569":{1:(d,c)=>`M0,${.5+c} L1,${.5+c} M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u256A":{1:(d,c)=>`M.5,0 L.5,1 M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u256B":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u256C":{1:(d,c)=>`M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1 M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(d,c)=>`M.5,1 L.5,${.5+c/.15*.5} C.5,${.5+c/.15*.5},.5,.5,1,.5`},"\u256E":{1:(d,c)=>`M.5,1 L.5,${.5+c/.15*.5} C.5,${.5+c/.15*.5},.5,.5,0,.5`},"\u256F":{1:(d,c)=>`M.5,0 L.5,${.5-c/.15*.5} C.5,${.5-c/.15*.5},.5,.5,0,.5`},"\u2570":{1:(d,c)=>`M.5,0 L.5,${.5-c/.15*.5} C.5,${.5-c/.15*.5},.5,.5,1,.5`}},a.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},a.powerlineDefinitions["\uE0BB"]=a.powerlineDefinitions["\uE0BD"],a.powerlineDefinitions["\uE0BF"]=a.powerlineDefinitions["\uE0B9"],a.tryDrawCustomChar=function(d,c,_,m,v,y,C,S){let D=a.blockElementDefinitions[c];if(D)return function(E,T,M,w,x,L){for(let R=0;R<T.length;R++){let A=T[R],I=x/8,$=L/8;E.fillRect(M+A.x*I,w+A.y*$,A.w*I,A.h*$)}}(d,D,_,m,v,y),!0;let g=u[c];if(g)return function(E,T,M,w,x,L){let R=i.get(T);R||(R=new Map,i.set(T,R));let A=E.fillStyle;if(typeof A!="string")throw new Error(`Unexpected fillStyle type "${A}"`);let I=R.get(A);if(!I){let $=T[0].length,H=T.length,P=document.createElement("canvas");P.width=$,P.height=H;let q=(0,l.throwIfFalsy)(P.getContext("2d")),G=new ImageData($,H),N,Q,O,B;if(A.startsWith("#"))N=parseInt(A.slice(1,3),16),Q=parseInt(A.slice(3,5),16),O=parseInt(A.slice(5,7),16),B=A.length>7&&parseInt(A.slice(7,9),16)||1;else{if(!A.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${A}" when drawing pattern glyph`);[N,Q,O,B]=A.substring(5,A.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<H;U++)for(let k=0;k<$;k++)G.data[4*(U*$+k)]=N,G.data[4*(U*$+k)+1]=Q,G.data[4*(U*$+k)+2]=O,G.data[4*(U*$+k)+3]=T[U][k]*(255*B);q.putImageData(G,0,0),I=(0,l.throwIfFalsy)(E.createPattern(P,null)),R.set(A,I)}E.fillStyle=I,E.fillRect(M,w,x,L)}(d,g,_,m,v,y),!0;let b=a.boxDrawingDefinitions[c];if(b)return function(E,T,M,w,x,L,R){E.strokeStyle=E.fillStyle;for(let[A,I]of Object.entries(T)){let $;E.beginPath(),E.lineWidth=R*Number.parseInt(A),$=typeof I=="function"?I(.15,.15/L*x):I;for(let H of $.split(" ")){let P=H[0],q=f[P];if(!q){console.error(`Could not find drawing instructions for "${P}"`);continue}let G=H.substring(1).split(",");G[0]&&G[1]&&q(E,p(G,x,L,M,w,!0,R))}E.stroke(),E.closePath()}}(d,b,_,m,v,y,S),!0;let F=a.powerlineDefinitions[c];return!!F&&(function(E,T,M,w,x,L,R,A){var I,$;let H=new Path2D;H.rect(M,w,x,L),E.clip(H),E.beginPath();let P=R/12;E.lineWidth=A*P;for(let q of T.d.split(" ")){let G=q[0],N=f[G];if(!N){console.error(`Could not find drawing instructions for "${G}"`);continue}let Q=q.substring(1).split(",");Q[0]&&Q[1]&&N(E,p(Q,x,L,M,w,!1,A,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(P/2),(($=T.rightPadding)!==null&&$!==void 0?$:0)*(P/2)))}T.type===1?(E.strokeStyle=E.fillStyle,E.stroke()):E.fill(),E.closePath()}(d,F,_,m,v,y,C,S),!0)};let i=new Map;function s(d,c,_=0){return Math.max(Math.min(d,c),_)}let f={C:(d,c)=>d.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]),L:(d,c)=>d.lineTo(c[0],c[1]),M:(d,c)=>d.moveTo(c[0],c[1])};function p(d,c,_,m,v,y,C,S=0,D=0){let g=d.map(b=>parseFloat(b)||parseInt(b));if(g.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<g.length;b+=2)g[b]*=c-S*C-D*C,y&&g[b]!==0&&(g[b]=s(Math.round(g[b]+.5)-.5,c,0)),g[b]+=m+S*C;for(let b=1;b<g.length;b+=2)g[b]*=_,y&&g[b]!==0&&(g[b]=s(Math.round(g[b]+.5)-.5,_,0)),g[b]+=v;return g}},56:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.observeDevicePixelDimensions=void 0;let l=r(859);a.observeDevicePixelDimensions=function(u,i,s){let f=new i.ResizeObserver(p=>{let d=p.find(m=>m.target===u);if(!d)return;if(!("devicePixelContentBoxSize"in d))return f?.disconnect(),void(f=void 0);let c=d.devicePixelContentBoxSize[0].inlineSize,_=d.devicePixelContentBoxSize[0].blockSize;c>0&&_>0&&s(c,_)});try{f.observe(u,{box:["device-pixel-content-box"]})}catch{f.disconnect(),f=void 0}return(0,l.toDisposable)(()=>f?.disconnect())}},374:(h,a)=>{function r(l){return 57508<=l&&l<=57558}Object.defineProperty(a,"__esModule",{value:!0}),a.createRenderDimensions=a.excludeFromContrastRatioDemands=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},a.isPowerlineGlyph=r,a.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},a.excludeFromContrastRatioDemands=function(l){return r(l)||function(u){return 9472<=u&&u<=9631}(l)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class r{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,i,s,f=!1){if(this.selectionStart=i,this.selectionEnd=s,!i||!s||i[0]===s[0]&&i[1]===s[1])return void this.clear();let p=i[1]-u.buffer.active.viewportY,d=s[1]-u.buffer.active.viewportY,c=Math.max(p,0),_=Math.min(d,u.rows-1);c>=u.rows||_<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=p,this.viewportEndRow=d,this.viewportCappedStartRow=c,this.viewportCappedEndRow=_,this.startCol=i[0],this.endCol=s[0])}isCellSelected(u,i,s){return!!this.hasSelection&&(s-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?i>=this.startCol&&s>=this.viewportCappedStartRow&&i<this.endCol&&s<=this.viewportCappedEndRow:i<this.startCol&&s>=this.viewportCappedStartRow&&i>=this.endCol&&s<=this.viewportCappedEndRow:s>this.viewportStartRow&&s<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&s===this.viewportStartRow&&i>=this.startCol&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportEndRow&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportStartRow&&i>=this.startCol)}}a.createSelectionRenderModel=function(){return new r}},509:function(h,a,r){var l=this&&this.__decorate||function(F,E,T,M){var w,x=arguments.length,L=x<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,T):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(F,E,T,M);else for(var R=F.length-1;R>=0;R--)(w=F[R])&&(L=(x<3?w(L):x>3?w(E,T,L):w(E,T))||L);return x>3&&L&&Object.defineProperty(E,T,L),L};Object.defineProperty(a,"__esModule",{value:!0}),a.TextureAtlas=void 0;let u=r(237),i=r(860),s=r(374),f=r(160),p=r(345),d=r(485),c=r(385),_=r(147),m=r(855),v=r(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class S{get pages(){return this._pages}constructor(E,T,M){this._document=E,this._config=T,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new d.FourKeyMap,this._cacheMapCombined=new d.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new _.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new p.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new p.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=b(E,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,s.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let E of this.pages)E.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let E=new c.IdleTaskQueue;for(let T=33;T<126;T++)E.enqueue(()=>{if(!this._cacheMap.get(T,m.DEFAULT_COLOR,m.DEFAULT_COLOR,m.DEFAULT_EXT)){let M=this._drawToCache(T,m.DEFAULT_COLOR,m.DEFAULT_COLOR,m.DEFAULT_EXT);this._cacheMap.set(T,m.DEFAULT_COLOR,m.DEFAULT_COLOR,m.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let E of this._pages)E.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(S.maxAtlasPages&&this._pages.length>=Math.max(4,S.maxAtlasPages)){let T=this._pages.filter(I=>2*I.canvas.width<=(S.maxTextureSize||4096)).sort((I,$)=>$.canvas.width!==I.canvas.width?$.canvas.width-I.canvas.width:$.percentageUsed-I.percentageUsed),M=-1,w=0;for(let I=0;I<T.length;I++)if(T[I].canvas.width!==w)M=I,w=T[I].canvas.width;else if(I-M==3)break;let x=T.slice(M,M+4),L=x.map(I=>I.glyphs[0].texturePage).sort((I,$)=>I>$?1:-1),R=this.pages.length-x.length,A=this._mergePages(x,R);A.version++;for(let I=L.length-1;I>=0;I--)this._deletePage(L[I]);this.pages.push(A),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(A.canvas)}let E=new D(this._document,this._textureSize);return this._pages.push(E),this._activePages.push(E),this._onAddTextureAtlasCanvas.fire(E.canvas),E}_mergePages(E,T){let M=2*E[0].canvas.width,w=new D(this._document,M,E);for(let[x,L]of E.entries()){let R=x*L.canvas.width%M,A=Math.floor(x/2)*L.canvas.height;w.ctx.drawImage(L.canvas,R,A);for(let $ of L.glyphs)$.texturePage=T,$.sizeClipSpace.x=$.size.x/M,$.sizeClipSpace.y=$.size.y/M,$.texturePosition.x+=R,$.texturePosition.y+=A,$.texturePositionClipSpace.x=$.texturePosition.x/M,$.texturePositionClipSpace.y=$.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(L.canvas);let I=this._activePages.indexOf(L);I!==-1&&this._activePages.splice(I,1)}return w}_deletePage(E){this._pages.splice(E,1);for(let T=E;T<this._pages.length;T++){let M=this._pages[T];for(let w of M.glyphs)w.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(E,T,M,w,x){return this._getFromCacheMap(this._cacheMapCombined,E,T,M,w,x)}getRasterizedGlyph(E,T,M,w,x){return this._getFromCacheMap(this._cacheMap,E,T,M,w,x)}_getFromCacheMap(E,T,M,w,x,L=!1){return C=E.get(T,M,w,x),C||(C=this._drawToCache(T,M,w,x,L),E.set(T,M,w,x,C)),C}_getColorFromAnsiIndex(E){if(E>=this._config.colors.ansi.length)throw new Error("No color found for idx "+E);return this._config.colors.ansi[E]}_getBackgroundColor(E,T,M,w){if(this._config.allowTransparency)return f.NULL_COLOR;let x;switch(E){case 16777216:case 33554432:x=this._getColorFromAnsiIndex(T);break;case 50331648:let L=_.AttributeData.toColorRGB(T);x=f.rgba.toColor(L[0],L[1],L[2]);break;default:x=M?f.color.opaque(this._config.colors.foreground):this._config.colors.background}return x}_getForegroundColor(E,T,M,w,x,L,R,A,I,$){let H=this._getMinimumContrastColor(E,T,M,w,x,L,!1,I,A,$);if(H)return H;let P;switch(x){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&L<8&&(L+=8),P=this._getColorFromAnsiIndex(L);break;case 50331648:let q=_.AttributeData.toColorRGB(L);P=f.rgba.toColor(q[0],q[1],q[2]);break;default:P=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=f.color.opaque(P)),A&&(P=f.color.multiplyOpacity(P,u.DIM_OPACITY)),P}_resolveBackgroundRgba(E,T,M){switch(E){case 16777216:case 33554432:return this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(E,T,M,w){switch(E){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&w&&T<8&&(T+=8),this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(E,T,M,w,x,L,R,A,I,$){if(this._config.minimumContrastRatio===1||$)return;let H=this._getContrastCache(I),P=H.getColor(E,w);if(P!==void 0)return P||void 0;let q=this._resolveBackgroundRgba(T,M,R),G=this._resolveForegroundRgba(x,L,R,A),N=f.rgba.ensureContrastRatio(q,G,this._config.minimumContrastRatio/(I?2:1));if(!N)return void H.setColor(E,w,null);let Q=f.rgba.toColor(N>>24&255,N>>16&255,N>>8&255);return H.setColor(E,w,Q),Q}_getContrastCache(E){return E?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(E,T,M,w,x=!1){let L=typeof E=="number"?String.fromCharCode(E):E,R=Math.min(this._config.deviceCellWidth*Math.max(L.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);let A=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<A&&(this._tmpCanvas.height=A),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=T,this._workAttributeData.extended.ext=w,this._workAttributeData.isInvisible())return y;let I=!!this._workAttributeData.isBold(),$=!!this._workAttributeData.isInverse(),H=!!this._workAttributeData.isDim(),P=!!this._workAttributeData.isItalic(),q=!!this._workAttributeData.isUnderline(),G=!!this._workAttributeData.isStrikethrough(),N=!!this._workAttributeData.isOverline(),Q=this._workAttributeData.getFgColor(),O=this._workAttributeData.getFgColorMode(),B=this._workAttributeData.getBgColor(),U=this._workAttributeData.getBgColorMode();if($){let ae=Q;Q=B,B=ae;let j=O;O=U,U=j}let k=this._getBackgroundColor(U,B,$,H);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let te=I?this._config.fontWeightBold:this._config.fontWeight,J=P?"italic":"";this._tmpCtx.font=`${J} ${te} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=u.TEXT_BASELINE;let ye=L.length===1&&(0,s.isPowerlineGlyph)(L.charCodeAt(0)),Ae=L.length===1&&(0,s.isRestrictedPowerlineGlyph)(L.charCodeAt(0)),we=this._getForegroundColor(T,U,B,M,O,Q,$,H,I,(0,s.excludeFromContrastRatioDemands)(L.charCodeAt(0)));this._tmpCtx.fillStyle=we.css;let ce=Ae?0:4,Fe=!1;this._config.customGlyphs!==!1&&(Fe=(0,i.tryDrawCustomChar)(this._tmpCtx,L,ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let It,un=!ye;if(It=typeof E=="number"?this._unicodeService.wcwidth(E):this._unicodeService.getStringCellWidth(E),q){this._tmpCtx.save();let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=ae%2==1?.5:0;if(this._tmpCtx.lineWidth=ae,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())un=!1,this._tmpCtx.strokeStyle=`rgb(${_.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{un=!1;let gt=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&gt<8&&(gt+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(gt).css}this._tmpCtx.beginPath();let ie=ce,pe=Math.ceil(ce+this._config.deviceCharHeight)-j-(x?2*ae:0),Ve=pe+ae,it=pe+2*ae;for(let gt=0;gt<It;gt++){this._tmpCtx.save();let Ge=ie+gt*this._config.deviceCellWidth,Rt=ie+(gt+1)*this._config.deviceCellWidth,tn=Ge+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe),this._tmpCtx.moveTo(Ge,it),this._tmpCtx.lineTo(Rt,it);break;case 3:let Ot=ae<=1?it:Math.ceil(ce+this._config.deviceCharHeight-ae/2)-j,er=ae<=1?pe:Math.ceil(ce+this._config.deviceCharHeight+ae/2)-j,vu=new Path2D;vu.rect(Ge,pe,this._config.deviceCellWidth,it-pe),this._tmpCtx.clip(vu),this._tmpCtx.moveTo(Ge-this._config.deviceCellWidth/2,Ve),this._tmpCtx.bezierCurveTo(Ge-this._config.deviceCellWidth/2,er,Ge,er,Ge,Ve),this._tmpCtx.bezierCurveTo(Ge,Ot,tn,Ot,tn,Ve),this._tmpCtx.bezierCurveTo(tn,er,Rt,er,Rt,Ve),this._tmpCtx.bezierCurveTo(Rt,Ot,Rt+this._config.deviceCellWidth/2,Ot,Rt+this._config.deviceCellWidth/2,Ve);break;case 4:this._tmpCtx.setLineDash([Math.round(ae),Math.round(ae)]),this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe);break;default:this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Fe&&this._config.fontSize>=12&&!this._config.allowTransparency&&L!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let gt=this._tmpCtx.measureText(L);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in gt&&gt.actualBoundingBoxDescent>0){this._tmpCtx.save();let Ge=new Path2D;Ge.rect(ie,pe-Math.ceil(ae/2),this._config.deviceCellWidth*It,it-pe+Math.ceil(ae/2)),this._tmpCtx.clip(Ge),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=k.css,this._tmpCtx.strokeText(L,ce,ce+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(N){let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=ae%2==1?.5:0;this._tmpCtx.lineWidth=ae,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+j),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*It,ce+j),this._tmpCtx.stroke()}if(Fe||this._tmpCtx.fillText(L,ce,ce+this._config.deviceCharHeight),L==="_"&&!this._config.allowTransparency){let ae=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),k,we,un);if(ae)for(let j=1;j<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(L,ce,ce+this._config.deviceCharHeight-j),ae=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),k,we,un),ae);j++);}if(G){let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),j=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ae,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*It,ce+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.stroke()}this._tmpCtx.restore();let Gt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),tt;if(tt=this._config.allowTransparency?function(ae){for(let j=0;j<ae.data.length;j+=4)if(ae.data[j+3]>0)return!1;return!0}(Gt):g(Gt,k,we,un),tt)return y;let le=this._findGlyphBoundingBox(Gt,this._workBoundingBox,R,Ae,Fe,ce),ve,fe;for(;;){if(this._activePages.length===0){let ae=this._createNewPage();ve=ae,fe=ae.currentRow,fe.height=le.size.y;break}ve=this._activePages[this._activePages.length-1],fe=ve.currentRow;for(let ae of this._activePages)le.size.y<=ae.currentRow.height&&(ve=ae,fe=ae.currentRow);for(let ae=this._activePages.length-1;ae>=0;ae--)for(let j of this._activePages[ae].fixedRows)j.height<=fe.height&&le.size.y<=j.height&&(ve=this._activePages[ae],fe=j);if(fe.y+le.size.y>=ve.canvas.height||fe.height>le.size.y+2){let ae=!1;if(ve.currentRow.y+ve.currentRow.height+le.size.y>=ve.canvas.height){let j;for(let ie of this._activePages)if(ie.currentRow.y+ie.currentRow.height+le.size.y<ie.canvas.height){j=ie;break}if(j)ve=j;else if(S.maxAtlasPages&&this._pages.length>=S.maxAtlasPages&&fe.y+le.size.y<=ve.canvas.height&&fe.height>=le.size.y&&fe.x+le.size.x<=ve.canvas.width)ae=!0;else{let ie=this._createNewPage();ve=ie,fe=ie.currentRow,fe.height=le.size.y,ae=!0}}ae||(ve.currentRow.height>0&&ve.fixedRows.push(ve.currentRow),fe={x:0,y:ve.currentRow.y+ve.currentRow.height,height:le.size.y},ve.fixedRows.push(fe),ve.currentRow={x:0,y:fe.y+fe.height,height:0})}if(fe.x+le.size.x<=ve.canvas.width)break;fe===ve.currentRow?(fe.x=0,fe.y+=fe.height,fe.height=0):ve.fixedRows.splice(ve.fixedRows.indexOf(fe),1)}return le.texturePage=this._pages.indexOf(ve),le.texturePosition.x=fe.x,le.texturePosition.y=fe.y,le.texturePositionClipSpace.x=fe.x/ve.canvas.width,le.texturePositionClipSpace.y=fe.y/ve.canvas.height,le.sizeClipSpace.x/=ve.canvas.width,le.sizeClipSpace.y/=ve.canvas.height,fe.height=Math.max(fe.height,le.size.y),fe.x+=le.size.x,ve.ctx.putImageData(Gt,le.texturePosition.x-this._workBoundingBox.left,le.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,le.size.x,le.size.y),ve.addGlyph(le),ve.version++,le}_findGlyphBoundingBox(E,T,M,w,x,L){T.top=0;let R=w?this._config.deviceCellHeight:this._tmpCanvas.height,A=w?this._config.deviceCellWidth:M,I=!1;for(let $=0;$<R;$++){for(let H=0;H<A;H++){let P=$*this._tmpCanvas.width*4+4*H+3;if(E.data[P]!==0){T.top=$,I=!0;break}}if(I)break}T.left=0,I=!1;for(let $=0;$<L+A;$++){for(let H=0;H<R;H++){let P=H*this._tmpCanvas.width*4+4*$+3;if(E.data[P]!==0){T.left=$,I=!0;break}}if(I)break}T.right=A,I=!1;for(let $=L+A-1;$>=L;$--){for(let H=0;H<R;H++){let P=H*this._tmpCanvas.width*4+4*$+3;if(E.data[P]!==0){T.right=$,I=!0;break}}if(I)break}T.bottom=R,I=!1;for(let $=R-1;$>=0;$--){for(let H=0;H<A;H++){let P=$*this._tmpCanvas.width*4+4*H+3;if(E.data[P]!==0){T.bottom=$,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:T.right-T.left+1,y:T.bottom-T.top+1},sizeClipSpace:{x:T.right-T.left+1,y:T.bottom-T.top+1},offset:{x:-T.left+L+(w||x?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-T.top+L+(w||x?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}a.TextureAtlas=S,l([v.traceCall],S.prototype,"_drawToCache",null);class D{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(E){this._glyphs.push(E),this._usedPixels+=E.size.x*E.size.y}constructor(E,T,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let w of M)this._glyphs.push(...w.glyphs),this._usedPixels+=w._usedPixels;this.canvas=b(E,T,T),this.ctx=(0,s.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(F,E,T,M){let w=E.rgba>>>24,x=E.rgba>>>16&255,L=E.rgba>>>8&255,R=T.rgba>>>24,A=T.rgba>>>16&255,I=T.rgba>>>8&255,$=Math.floor((Math.abs(w-R)+Math.abs(x-A)+Math.abs(L-I))/12),H=!0;for(let P=0;P<F.data.length;P+=4)F.data[P]===w&&F.data[P+1]===x&&F.data[P+2]===L||M&&Math.abs(F.data[P]-w)+Math.abs(F.data[P+1]-x)+Math.abs(F.data[P+2]-L)<$?F.data[P+3]=0:H=!1;return H}function b(F,E,T){let M=F.createElement("canvas");return M.width=E,M.height=T,M}},160:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=r(399),u=0,i=0,s=0,f=0;var p,d,c,_,m;function v(C){let S=C.toString(16);return S.length<2?"0"+S:S}function y(C,S){return C<S?(S+.05)/(C+.05):(C+.05)/(S+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(S,D,g,b){return b!==void 0?`#${v(S)}${v(D)}${v(g)}${v(b)}`:`#${v(S)}${v(D)}${v(g)}`},C.toRgba=function(S,D,g,b=255){return(S<<24|D<<16|g<<8|b)>>>0}}(p||(a.channels=p={})),function(C){function S(D,g){return f=Math.round(255*g),[u,i,s]=m.toChannels(D.rgba),{css:p.toCss(u,i,s,f),rgba:p.toRgba(u,i,s,f)}}C.blend=function(D,g){if(f=(255&g.rgba)/255,f===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,F=g.rgba>>16&255,E=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return u=T+Math.round((b-T)*f),i=M+Math.round((F-M)*f),s=w+Math.round((E-w)*f),{css:p.toCss(u,i,s),rgba:p.toRgba(u,i,s)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let F=m.ensureContrastRatio(D.rgba,g.rgba,b);if(F)return m.toColor(F>>24&255,F>>16&255,F>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,i,s]=m.toChannels(g),{css:p.toCss(u,i,s),rgba:g}},C.opacity=S,C.multiplyOpacity=function(D,g){return f=255&D.rgba,S(D,f*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(d||(a.color=d={})),function(C){let S,D;if(!l.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(S=b,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),m.toColor(u,i,s);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),f=parseInt(g.slice(4,5).repeat(2),16),m.toColor(u,i,s,f);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return u=parseInt(b[1]),i=parseInt(b[2]),s=parseInt(b[3]),f=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),m.toColor(u,i,s,f);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=g,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[u,i,s,f]=S.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(u,i,s,f),css:g}}}(c||(a.css=c={})),function(C){function S(D,g,b){let F=D/255,E=g/255,T=b/255;return .2126*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=S}(_||(a.rgb=_={})),function(C){function S(g,b,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,x=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,x,L),_.relativeLuminance2(E,T,M));for(;R<F&&(w>0||x>0||L>0);)w-=Math.max(0,Math.ceil(.1*w)),x-=Math.max(0,Math.ceil(.1*x)),L-=Math.max(0,Math.ceil(.1*L)),R=y(_.relativeLuminance2(w,x,L),_.relativeLuminance2(E,T,M));return(w<<24|x<<16|L<<8|255)>>>0}function D(g,b,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,x=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,x,L),_.relativeLuminance2(E,T,M));for(;R<F&&(w<255||x<255||L<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),x=Math.min(255,x+Math.ceil(.1*(255-x))),L=Math.min(255,L+Math.ceil(.1*(255-L))),R=y(_.relativeLuminance2(w,x,L),_.relativeLuminance2(E,T,M));return(w<<24|x<<16|L<<8|255)>>>0}C.ensureContrastRatio=function(g,b,F){let E=_.relativeLuminance(g>>8),T=_.relativeLuminance(b>>8);if(y(E,T)<F){if(T<E){let x=S(g,b,F),L=y(E,_.relativeLuminance(x>>8));if(L<F){let R=D(g,b,F);return L>y(E,_.relativeLuminance(R>>8))?x:R}return x}let M=D(g,b,F),w=y(E,_.relativeLuminance(M>>8));if(w<F){let x=S(g,b,F);return w>y(E,_.relativeLuminance(x>>8))?M:x}return M}},C.reduceLuminance=S,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,F,E){return{css:p.toCss(g,b,F,E),rgba:p.toRgba(g,b,F,E)}}}(m||(a.rgba=m={})),a.toPaddedHex=v,a.contrastRatio=y},345:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===r)return void this._listeners.splice(l,1)}}})),this._event}fire(r,l){let u=[];for(let i=0;i<this._listeners.length;i++)u.push(this._listeners[i]);for(let i=0;i<u.length;i++)u[i].call(void 0,r,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(r,l){return r(u=>l.fire(u))}},859:(h,a)=>{function r(l){for(let u of l)u.dispose();l.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){let u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var u;this._isDisposed||l===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},a.toDisposable=function(l){return{dispose:l}},a.disposeArray=r,a.getDisposeArrayDisposable=function(l){return{dispose:()=>r(l)}}},485:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(u,i,s){this._data[u]||(this._data[u]={}),this._data[u][i]=s}get(u,i){return this._data[u]?this._data[u][i]:void 0}clear(){this._data={}}}a.TwoKeyMap=r,a.FourKeyMap=class{constructor(){this._data=new r}set(l,u,i,s,f){this._data.get(l,u)||this._data.set(l,u,new r),this._data.get(l,u).set(i,s,f)}get(l,u,i,s){var f;return(f=this._data.get(l,u))===null||f===void 0?void 0:f.get(i,s)}clear(){this._data.clear()}}},399:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof navigator>"u";let r=a.isNode?"node":navigator.userAgent,l=a.isNode?"node":navigator.platform;a.isFirefox=r.includes("Firefox"),a.isLegacyEdge=r.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(r),a.getSafariVersion=function(){if(!a.isSafari)return 0;let u=r.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),a.isIpad=l==="iPad",a.isIphone=l==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),a.isLinux=l.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(r)},385:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;let l=r(399);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let p=0,d=0,c=f.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),d=Math.max(p,d),_=f.timeRemaining(),1.5*d>_)return c-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-p))}ms`),void this._start();c=_}this.clear()}}class i extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let p=Date.now()+f;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}a.PriorityTaskQueue=i,a.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(s){return requestIdleCallback(s)}_cancelCallback(s){cancelIdleCallback(s)}}:i,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(s){this._queue.clear(),this._queue.enqueue(s)}flush(){this._queue.flush()}}},147:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(i){return[i>>>16&255,i>>>8&255,255&i]}static fromColorRGB(i){return(255&i[0])<<16|(255&i[1])<<8|255&i[2]}clone(){let i=new r;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}a.AttributeData=r;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(i){this._ext&=-67108864,this._ext|=67108863&i}get urlId(){return this._urlId}set urlId(i){this._urlId=i}constructor(i=0,s=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=s}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=l},782:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;let l=r(133),u=r(855),i=r(147);class s extends i.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new i.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let d=new s;return d.setFromCharData(p),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(p[u.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(p[u.CHAR_DATA_CHAR_INDEX].length===2){let c=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let _=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(c-55296)+_-56320+65536|p[u.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[u.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=p[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=s},855:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},133:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},a.utf32ToString=function(r,l=0,u=r.length){let i="";for(let s=l;s<u;++s){let f=r[s];f>65535?(f-=65536,i+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):i+=String.fromCharCode(f)}return i},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,l){let u=r.length;if(!u)return 0;let i=0,s=0;if(this._interim){let f=r.charCodeAt(s++);56320<=f&&f<=57343?l[i++]=1024*(this._interim-55296)+f-56320+65536:(l[i++]=this._interim,l[i++]=f),this._interim=0}for(let f=s;f<u;++f){let p=r.charCodeAt(f);if(55296<=p&&p<=56319){if(++f>=u)return this._interim=p,i;let d=r.charCodeAt(f);56320<=d&&d<=57343?l[i++]=1024*(p-55296)+d-56320+65536:(l[i++]=p,l[i++]=d)}else p!==65279&&(l[i++]=p)}return i}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,l){let u=r.length;if(!u)return 0;let i,s,f,p,d=0,c=0,_=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)C<<=6,C|=S;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;_<b;){if(_>=u)return 0;if(S=r[_++],(192&S)!=128){_--,y=!0;break}this.interim[D++]=S,C<<=6,C|=63&S}y||(g===2?C<128?_--:l[d++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(l[d++]=C):C<65536||C>1114111||(l[d++]=C)),this.interim.fill(0)}let m=u-4,v=_;for(;v<u;){for(;!(!(v<m)||128&(i=r[v])||128&(s=r[v+1])||128&(f=r[v+2])||128&(p=r[v+3]));)l[d++]=i,l[d++]=s,l[d++]=f,l[d++]=p,v+=4;if(i=r[v++],i<128)l[d++]=i;else if((224&i)==192){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(c=(31&i)<<6|63&s,c<128){v--;continue}l[d++]=c}else if((240&i)==224){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[v++],(192&f)!=128){v--;continue}if(c=(15&i)<<12|(63&s)<<6|63&f,c<2048||c>=55296&&c<=57343||c===65279)continue;l[d++]=c}else if((248&i)==240){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[v++],(192&f)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=f,d;if(p=r[v++],(192&p)!=128){v--;continue}if(c=(7&i)<<18|(63&s)<<12|(63&f)<<6|63&p,c<65536||c>1114111)continue;l[d++]=c}}return d}}},776:function(h,a,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;let i=r(859),s=r(97),f={trace:s.LogLevelEnum.TRACE,debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},p,d=a.LogService=class extends i.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let _=0;_<c.length;_++)typeof c[_]=="function"&&(c[_]=c[_]())}_log(c,_,m){this._evalLazyOptionalParams(m),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...m)}trace(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.TRACE&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.trace.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}debug(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.DEBUG&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.debug.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}info(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.INFO&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.info.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.info,c,_)}warn(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.WARN&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.warn.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.warn,c,_)}error(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.ERROR&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.error.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.error,c,_)}};a.LogService=d=l([u(0,s.IOptionsService)],d),a.setTraceLogger=function(c){p=c},a.traceCall=function(c,_,m){if(typeof m.value!="function")throw new Error("not supported");let v=m.value;m.value=function(...y){if(p.logLevel!==s.LogLevelEnum.TRACE)return v.apply(this,y);p.trace(`GlyphRenderer#${v.name}(${y.map(S=>JSON.stringify(S)).join(", ")})`);let C=v.apply(this,y);return p.trace(`GlyphRenderer#${v.name} return`,C),C}}},726:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;let r="di$target",l="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u[l]||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);let i=function(s,f,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,c,_){c[r]===c?c[l].push({id:d,index:_}):(c[l]=[{id:d,index:_}],c[r]=c)})(i,s,p)};return i.toString=()=>u,a.serviceRegistry.set(u,i),i}},97:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;let l=r(726);var u;a.IBufferService=(0,l.createDecorator)("BufferService"),a.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),a.ICoreService=(0,l.createDecorator)("CoreService"),a.ICharsetService=(0,l.createDecorator)("CharsetService"),a.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(i){i[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.OFF=5]="OFF"}(u||(a.LogLevelEnum=u={})),a.ILogService=(0,l.createDecorator)("LogService"),a.IOptionsService=(0,l.createDecorator)("OptionsService"),a.IOscLinkService=(0,l.createDecorator)("OscLinkService"),a.IUnicodeService=(0,l.createDecorator)("UnicodeService"),a.IDecorationService=(0,l.createDecorator)("DecorationService")}},t={};function n(h){var a=t[h];if(a!==void 0)return a.exports;var r=t[h]={exports:{}};return e[h].call(r.exports,r,r.exports,n),r.exports}var o={};return(()=>{var h=o;Object.defineProperty(h,"__esModule",{value:!0}),h.WebglAddon=void 0;let a=n(345),r=n(859),l=n(399),u=n(666),i=n(776);class s extends r.Disposable{constructor(p){if(l.isSafari&&(0,l.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=p,this._onChangeTextureAtlas=this.register(new a.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new a.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new a.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new a.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(p){let d=p._core;if(!p.element)return void this.register(d.onWillOpen(()=>this.activate(p)));this._terminal=p;let c=d.coreService,_=d.optionsService,m=d,v=m._renderService,y=m._characterJoinerService,C=m._charSizeService,S=m._coreBrowserService,D=m._decorationService,g=m._logService,b=m._themeService;(0,i.setTraceLogger)(g),this._renderer=this.register(new u.WebglRenderer(p,y,C,S,c,D,_,b,this._preserveDrawingBuffer)),this.register((0,a.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,a.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,a.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,a.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),v.setRenderer(this._renderer),this.register((0,r.toDisposable)(()=>{let F=this._terminal._core._renderService;F.setRenderer(this._terminal._core._createRenderer()),F.handleResize(p.cols,p.rows)}))}get textureAtlas(){var p;return(p=this._renderer)===null||p===void 0?void 0:p.textureAtlas}clearTextureAtlas(){var p;(p=this._renderer)===null||p===void 0||p.clearTextureAtlas()}}h.WebglAddon=s})(),o})())});var d2=Tt((Dg,sT)=>{(function(e,t){typeof Dg=="object"&&typeof sT=="object"?sT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Dg=="object"?Dg.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(l,u,i,s={}){this._terminal=l,this._regex=u,this._handler=i,this._options=s}provideLinks(l,u){let i=r.computeLink(l,this._regex,this._terminal,this._handler);u(this._addCallbacks(i))}_addCallbacks(l){return l.map(u=>(u.leave=this._options.leave,u.hover=(i,s)=>{if(this._options.hover){let{range:f}=u;this._options.hover(i,s,f)}},u))}};class r{static computeLink(u,i,s,f){let p=new RegExp(i.source,(i.flags||"")+"g"),[d,c]=r._getWindowedLineStrings(u-1,s),_=d.join(""),m,v=[];for(;m=p.exec(_);){let y=m[0];try{let F=new URL(y),E=decodeURI(F.toString());if(y!==E&&y+"/"!==E)continue}catch{continue}let[C,S]=r._mapStrIdx(s,c,0,m.index),[D,g]=r._mapStrIdx(s,C,S,y.length);if(C===-1||S===-1||D===-1||g===-1)continue;let b={start:{x:S+1,y:C+1},end:{x:g,y:D+1}};v.push({range:b,text:y,activate:f})}return v}static _getWindowedLineStrings(u,i){let s,f=u,p=u,d=0,c="",_=[];if(s=i.buffer.active.getLine(u)){let m=s.translateToString(!0);if(s.isWrapped&&m[0]!==" "){for(d=0;(s=i.buffer.active.getLine(--f))&&d<2048&&(c=s.translateToString(!0),d+=c.length,_.push(c),s.isWrapped&&c.indexOf(" ")===-1););_.reverse()}for(_.push(m),d=0;(s=i.buffer.active.getLine(++p))&&s.isWrapped&&d<2048&&(c=s.translateToString(!0),d+=c.length,_.push(c),c.indexOf(" ")===-1););}return[_,f]}static _mapStrIdx(u,i,s,f){let p=u.buffer.active,d=p.getNullCell(),c=s;for(;f;){let _=p.getLine(i);if(!_)return[-1,-1];for(let m=c;m<_.length;++m){_.getCell(m,d);let v=d.getChars();if(d.getWidth()&&(f-=v.length||1,m===_.length-1&&v==="")){let y=p.getLine(i+1);y&&y.isWrapped&&(y.getCell(0,d),d.getWidth()===2&&(f+=1))}if(f<0)return[i,m]}i++,c=0}return[i,c]}}a.LinkComputer=r}},t={};function n(h){var a=t[h];if(a!==void 0)return a.exports;var r=t[h]={exports:{}};return e[h](r,r.exports,n),r.exports}var o={};return(()=>{var h=o;Object.defineProperty(h,"__esModule",{value:!0}),h.WebLinksAddon=void 0;let a=n(6),r=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function l(u,i){let s=window.open();if(s){try{s.opener=null}catch{}s.location.href=i}else console.warn("Opening link blocked as opener could not be cleared")}h.WebLinksAddon=class{constructor(u=l,i={}){this._handler=u,this._options=i}activate(u){this._terminal=u;let i=this._options,s=i.urlRegex||r;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,s,this._handler,i))}dispose(){var u;(u=this._linkProvider)===null||u===void 0||u.dispose()}}})(),o})())});var y2=Tt((wg,dT)=>{(function(e,t){if(typeof wg=="object"&&typeof dT=="object")dT.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var o in n)(typeof wg=="object"?wg:e)[o]=n[o]}})(self,()=>(()=>{"use strict";var e={4567:function(h,a,r){var l=this&&this.__decorate||function(v,y,C,S){var D,g=arguments.length,b=g<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(v,y,C,S);else for(var F=v.length-1;F>=0;F--)(D=v[F])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},u=this&&this.__param||function(v,y){return function(C,S){y(C,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;let i=r(9042),s=r(6114),f=r(9924),p=r(844),d=r(5596),c=r(4725),_=r(3656),m=a.AccessibilityManager=class extends p.Disposable{constructor(v,y){super(),this._terminal=v,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new f.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new d.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,_.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,p.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(v){for(let y=0;y<v;y++)this._handleChar(" ")}_handleChar(v){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==v&&(this._charsToAnnounce+=v):this._charsToAnnounce+=v,v===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=i.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&this._liveRegion.remove()}_handleKey(v){this._clearLiveRegion(),/\p{Control}/u.test(v)||this._charsToConsume.push(v)}_refreshRows(v,y){this._liveRegionDebouncer.refresh(v,y,this._terminal.rows)}_renderRows(v,y){let C=this._terminal.buffer,S=C.lines.length.toString();for(let D=v;D<=y;D++){let g=C.translateBufferLineToString(C.ydisp+D,!0),b=(C.ydisp+D+1).toString(),F=this._rowElements[D];F&&(g.length===0?F.innerText="\xA0":F.textContent=g,F.setAttribute("aria-posinset",b),F.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(v,y){let C=v.target,S=this._rowElements[y===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||v.relatedTarget!==S)return;let D,g;if(y===0?(D=C,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=C,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){let b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{let b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),v.preventDefault(),v.stopImmediatePropagation()}_handleResize(v){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>v;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let v=document.createElement("div");return v.setAttribute("role","listitem"),v.tabIndex=-1,this._refreshRowDimensions(v),v}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let v=0;v<this._terminal.rows;v++)this._refreshRowDimensions(this._rowElements[v])}}_refreshRowDimensions(v){v.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=m=l([u(1,c.IRenderService)],m)},3614:(h,a)=>{function r(s){return s.replace(/\r?\n/g,"\r")}function l(s,f){return f?"\x1B[200~"+s+"\x1B[201~":s}function u(s,f,p,d){s=l(s=r(s),p.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),p.triggerDataEvent(s,!0),f.value=""}function i(s,f,p){let d=p.getBoundingClientRect(),c=s.clientX-d.left-10,_=s.clientY-d.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${c}px`,f.style.top=`${_}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=r,a.bracketTextForPaste=l,a.copyHandler=function(s,f){s.clipboardData&&s.clipboardData.setData("text/plain",f.selectionText),s.preventDefault()},a.handlePasteEvent=function(s,f,p,d){s.stopPropagation(),s.clipboardData&&u(s.clipboardData.getData("text/plain"),f,p,d)},a.paste=u,a.moveTextAreaUnderMouseCursor=i,a.rightClickHandler=function(s,f,p,d,c){i(s,f,p),c&&d.rightClickSelect(s),f.value=d.selectionText,f.select()}},7239:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;let l=r(1505);a.ColorContrastCache=class{constructor(){this._color=new l.TwoKeyMap,this._css=new l.TwoKeyMap}setCss(u,i,s){this._css.set(u,i,s)}getCss(u,i){return this._css.get(u,i)}setColor(u,i,s){this._color.set(u,i,s)}getColor(u,i){return this._color.get(u,i)}clear(){this._color.clear(),this._css.clear()}}},3656:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(r,l,u,i){r.addEventListener(l,u,i);let s=!1;return{dispose:()=>{s||(s=!0,r.removeEventListener(l,u,i))}}}},6465:function(h,a,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier2=void 0;let i=r(3656),s=r(8460),f=r(844),p=r(2585),d=a.Linkifier2=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new s.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new s.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{let _=this._linkProviders.indexOf(c);_!==-1&&this._linkProviders.splice(_,1)}}}attachToDom(c,_,m){this._element=c,this._mouseService=_,this._renderService=m,this.register((0,i.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,i.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,i.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,i.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;let _=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!_)return;this._isMouseOut=!1;let m=c.composedPath();for(let v=0;v<m.length;v++){let y=m[v];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&_.x===this._lastBufferCell.x&&_.y===this._lastBufferCell.y||(this._handleHover(_),this._lastBufferCell=_)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,_){var m,v;this._activeProviderReplies&&_||((m=this._activeProviderReplies)===null||m===void 0||m.forEach(C=>{C?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let y=!1;for(let[C,S]of this._linkProviders.entries())_?!((v=this._activeProviderReplies)===null||v===void 0)&&v.get(C)&&(y=this._checkLinkProviderResult(C,c,y)):S.provideLinks(c.y,D=>{var g,b;if(this._isMouseOut)return;let F=D?.map(E=>({link:E}));(g=this._activeProviderReplies)===null||g===void 0||g.set(C,F),y=this._checkLinkProviderResult(C,c,y),((b=this._activeProviderReplies)===null||b===void 0?void 0:b.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,_){let m=new Set;for(let v=0;v<_.size;v++){let y=_.get(v);if(y)for(let C=0;C<y.length;C++){let S=y[C],D=S.link.range.start.y<c?0:S.link.range.start.x,g=S.link.range.end.y>c?this._bufferService.cols:S.link.range.end.x;for(let b=D;b<=g;b++){if(m.has(b)){y.splice(C--,1);break}m.add(b)}}}}_checkLinkProviderResult(c,_,m){var v;if(!this._activeProviderReplies)return m;let y=this._activeProviderReplies.get(c),C=!1;for(let S=0;S<c;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(C=!0);if(!C&&y){let S=y.find(D=>this._linkAtPosition(D.link,_));S&&(m=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!m)for(let S=0;S<this._activeProviderReplies.size;S++){let D=(v=this._activeProviderReplies.get(S))===null||v===void 0?void 0:v.find(g=>this._linkAtPosition(g.link,_));if(D){m=!0,this._handleNewLink(D);break}}return m}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;let _=this._positionFromMouseEvent(c,this._element,this._mouseService);_&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,_)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,_){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!_||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=_)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(c.link,_)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var m,v;return(v=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||v===void 0?void 0:v.decorations.pointerCursor},set:m=>{var v,y;!((v=this._currentLink)===null||v===void 0)&&v.state&&this._currentLink.state.decorations.pointerCursor!==m&&(this._currentLink.state.decorations.pointerCursor=m,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",m)))}},underline:{get:()=>{var m,v;return(v=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||v===void 0?void 0:v.decorations.underline},set:m=>{var v,y,C;!((v=this._currentLink)===null||v===void 0)&&v.state&&((C=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||C===void 0?void 0:C.decorations.underline)!==m&&(this._currentLink.state.decorations.underline=m,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,m))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(m=>{if(!this._currentLink)return;let v=m.start===0?0:m.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+m.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(v,y),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(c,_,m){var v;!((v=this._currentLink)===null||v===void 0)&&v.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),_.hover&&_.hover(m,_.text)}_fireUnderlineEvent(c,_){let m=c.range,v=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(m.start.x-1,m.start.y-v-1,m.end.x,m.end.y-v-1,void 0);(_?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(c,_,m){var v;!((v=this._currentLink)===null||v===void 0)&&v.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),_.leave&&_.leave(m,_.text)}_linkAtPosition(c,_){let m=c.range.start.y*this._bufferService.cols+c.range.start.x,v=c.range.end.y*this._bufferService.cols+c.range.end.x,y=_.y*this._bufferService.cols+_.x;return m<=y&&y<=v}_positionFromMouseEvent(c,_,m){let v=m.getCoords(c,_,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,_,m,v,y){return{x1:c,y1:_,x2:m,y2:v,cols:this._bufferService.cols,fg:y}}};a.Linkifier2=d=l([u(0,p.IBufferService)],d)},9042:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(h,a,r){var l=this&&this.__decorate||function(d,c,_,m){var v,y=arguments.length,C=y<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,c,_,m);else for(var S=d.length-1;S>=0;S--)(v=d[S])&&(C=(y<3?v(C):y>3?v(c,_,C):v(c,_))||C);return y>3&&C&&Object.defineProperty(c,_,C),C},u=this&&this.__param||function(d,c){return function(_,m){c(_,m,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;let i=r(511),s=r(2585),f=a.OscLinkProvider=class{constructor(d,c,_){this._bufferService=d,this._optionsService=c,this._oscLinkService=_}provideLinks(d,c){var _;let m=this._bufferService.buffer.lines.get(d-1);if(!m)return void c(void 0);let v=[],y=this._optionsService.rawOptions.linkHandler,C=new i.CellData,S=m.getTrimmedLength(),D=-1,g=-1,b=!1;for(let F=0;F<S;F++)if(g!==-1||m.hasContent(F)){if(m.loadCell(F,C),C.hasExtendedAttrs()&&C.extended.urlId){if(g===-1){g=F,D=C.extended.urlId;continue}b=C.extended.urlId!==D}else g!==-1&&(b=!0);if(b||g!==-1&&F===S-1){let E=(_=this._oscLinkService.getLinkData(D))===null||_===void 0?void 0:_.uri;if(E){let T={start:{x:g+1,y:d},end:{x:F+(b||F!==S-1?0:1),y:d}},M=!1;if(!y?.allowNonHttpProtocols)try{let w=new URL(E);["http:","https:"].includes(w.protocol)||(M=!0)}catch{M=!0}M||v.push({text:E,range:T,activate:(w,x)=>y?y.activate(w,x,T):p(0,x),hover:(w,x)=>{var L;return(L=y?.hover)===null||L===void 0?void 0:L.call(y,w,x,T)},leave:(w,x)=>{var L;return(L=y?.leave)===null||L===void 0?void 0:L.call(y,w,x,T)}})}b=!1,C.hasExtendedAttrs()&&C.extended.urlId?(g=F,D=C.extended.urlId):(g=-1,D=-1)}}c(v)}};function p(d,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){let _=window.open();if(_){try{_.opener=null}catch{}_.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=f=l([u(0,s.IBufferService),u(1,s.IOptionsService),u(2,s.IOscLinkService)],f)},6193:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(r,l){this._parentWindow=r,this._renderCallback=l,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(r){return this._refreshCallbacks.push(r),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(r,l,u){this._rowCount=u,r=r!==void 0?r:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let r=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,l),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let r of this._refreshCallbacks)r(0);this._refreshCallbacks=[]}}},5596:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ScreenDprMonitor=void 0;let l=r(844);class u extends l.Disposable{constructor(s){super(),this._parentWindow=s,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,l.toDisposable)(()=>{this.clearListener()}))}setListener(s){this._listener&&this.clearListener(),this._listener=s,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var s;this._outerListener&&((s=this._resolutionMediaMatchList)===null||s===void 0||s.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}a.ScreenDprMonitor=u},3236:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;let l=r(3614),u=r(3656),i=r(6465),s=r(9042),f=r(3730),p=r(1680),d=r(3107),c=r(5744),_=r(2950),m=r(1296),v=r(428),y=r(4269),C=r(5114),S=r(8934),D=r(3230),g=r(9312),b=r(4725),F=r(6731),E=r(8055),T=r(8969),M=r(8460),w=r(844),x=r(6114),L=r(8437),R=r(2584),A=r(7399),I=r(5941),$=r(9074),H=r(2585),P=r(5435),q=r(4567),G=typeof window<"u"?window.document:null;class N extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=x,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new w.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(i.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance($.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((B,U)=>this.refresh(B,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(B=>this._reportWindowsOptions(B))),this.register(this._inputHandler.onColor(B=>this._handleColorEvent(B))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(B=>this._afterResize(B.cols,B.rows))),this.register((0,w.toDisposable)(()=>{var B,U;this._customKeyEventHandler=void 0,(U=(B=this.element)===null||B===void 0?void 0:B.parentNode)===null||U===void 0||U.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let B of O){let U,k="";switch(B.index){case 256:U="foreground",k="10";break;case 257:U="background",k="11";break;case 258:U="cursor",k="12";break;default:U="ansi",k="4;"+B.index}switch(B.type){case 0:let te=E.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[B.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${R.C0.ESC}]${k};${(0,I.toRgbString)(te)}${R.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(J=>J.ansi[B.index]=E.rgba.toColor(...B.color));else{let J=U;this._themeService.modifyColors(ye=>ye[J]=E.rgba.toColor(...B.color))}break;case 2:this._themeService.restoreColor(B.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,B=this.buffer.lines.get(O);if(!B)return;let U=Math.min(this.buffer.x,this.cols-1),k=this._renderService.dimensions.css.cell.height,te=B.getWidth(U),J=this._renderService.dimensions.css.cell.width*te,ye=this.buffer.y*this._renderService.dimensions.css.cell.height,Ae=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ae+"px",this.textarea.style.top=ye+"px",this.textarea.style.width=J+"px",this.textarea.style.height=k+"px",this.textarea.style.lineHeight=k+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",B=>{this.hasSelection()&&(0,l.copyHandler)(B,this._selectionService)}));let O=B=>(0,l.handlePasteEvent)(B,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,u.addDisposableDomListener)(this.element,"paste",O)),x.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",B=>{B.button===2&&(0,l.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",B=>{(0,l.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),x.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",B=>{B.button===1&&(0,l.moveTextAreaUnderMouseCursor)(B,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){var B;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let U=G.createDocumentFragment();this._viewportElement=G.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),U.appendChild(this._viewportElement),this._viewportScrollArea=G.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=G.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=G.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),U.appendChild(this.screenElement),this.textarea=G.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",s.promptLabel),x.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(B=this._document.defaultView)!==null&&B!==void 0?B:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",k=>this._handleTextAreaFocus(k))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(v.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(F.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(k=>this._onRender.fire(k))),this.onResize(k=>this._renderService.resize(k.cols,k.rows)),this._compositionView=G.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(U);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(p.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(k=>this._renderService.handleSelectionChanged(k.start,k.end,k.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(k=>{this.textarea.value=k,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(k=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",k=>this._selectionService.handleMouseDown(k))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",k=>this._handleScreenReaderModeOptionChange(k))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",k=>{!this._overviewRulerRenderer&&k&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(m.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let O=this,B=this.element;function U(J){let ye=O._mouseService.getMouseReportCoords(J,O.screenElement);if(!ye)return!1;let Ae,we;switch(J.overrideType||J.type){case"mousemove":we=32,J.buttons===void 0?(Ae=3,J.button!==void 0&&(Ae=J.button<3?J.button:3)):Ae=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":we=0,Ae=J.button<3?J.button:3;break;case"mousedown":we=1,Ae=J.button<3?J.button:3;break;case"wheel":if(O.viewport.getLinesScrolled(J)===0)return!1;we=J.deltaY<0?0:1,Ae=4;break;default:return!1}return!(we===void 0||Ae===void 0||Ae>4)&&O.coreMouseService.triggerMouseEvent({col:ye.col,row:ye.row,x:ye.x,y:ye.y,button:Ae,action:we,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}let k={mouseup:null,wheel:null,mousedrag:null,mousemove:null},te={mouseup:J=>(U(J),J.buttons||(this._document.removeEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.removeEventListener("mousemove",k.mousedrag)),this.cancel(J)),wheel:J=>(U(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&U(J)},mousemove:J=>{J.buttons||U(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?k.mousemove||(B.addEventListener("mousemove",te.mousemove),k.mousemove=te.mousemove):(B.removeEventListener("mousemove",k.mousemove),k.mousemove=null),16&J?k.wheel||(B.addEventListener("wheel",te.wheel,{passive:!1}),k.wheel=te.wheel):(B.removeEventListener("wheel",k.wheel),k.wheel=null),2&J?k.mouseup||(B.addEventListener("mouseup",te.mouseup),k.mouseup=te.mouseup):(this._document.removeEventListener("mouseup",k.mouseup),B.removeEventListener("mouseup",k.mouseup),k.mouseup=null),4&J?k.mousedrag||(k.mousedrag=te.mousedrag):(this._document.removeEventListener("mousemove",k.mousedrag),k.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(B,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return U(J),k.mouseup&&this._document.addEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.addEventListener("mousemove",k.mousedrag),this.cancel(J)})),this.register((0,u.addDisposableDomListener)(B,"wheel",J=>{if(!k.wheel){if(!this.buffer.hasScrollback){let ye=this.viewport.getLinesScrolled(J);if(ye===0)return;let Ae=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B"),we="";for(let ce=0;ce<Math.abs(ye);ce++)we+=Ae;return this.coreService.triggerDataEvent(we,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(B,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,u.addDisposableDomListener)(B,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(O,B){var U;(U=this._renderService)===null||U===void 0||U.refreshRows(O,B)}updateCursorStyle(O){var B;!((B=this._selectionService)===null||B===void 0)&&B.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,B,U=0){var k;U===1?(super.scrollLines(O,B,U),this.refresh(0,this.rows-1)):(k=this.viewport)===null||k===void 0||k.scrollLines(O)}paste(O){(0,l.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}registerLinkProvider(O){return this.linkifier2.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let B=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),B}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,B,U){this._selectionService.setSelection(O,B,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()}selectAll(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()}selectLines(O,B){var U;(U=this._selectionService)===null||U===void 0||U.selectLines(O,B)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let B=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!B&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;B||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let U=(0,A.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),U.type===3||U.type===2){let k=this.rows-1;return this.scrollLines(U.type===2?-k:k),this.cancel(O,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(U.cancel&&this.cancel(O,!0),!U.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==R.C0.ETX&&U.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,B){let U=O.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||O.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||O.isWindows&&B.getModifierState("AltGraph");return B.type==="keypress"?U:U&&(!B.keyCode||B.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(B){return B.keyCode===16||B.keyCode===17||B.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)B=O.charCode;else if(O.which===null||O.which===void 0)B=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;B=O.which}return!(!B||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let B=O.data;return this.coreService.triggerDataEvent(B,!0),this.cancel(O),!0}return!1}resize(O,B){O!==this.cols||B!==this.rows?super.resize(O,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,B){var U,k;(U=this._charSizeService)===null||U===void 0||U.measure(),(k=this.viewport)===null||k===void 0||k.syncScrollArea(!0)}clear(){var O;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(O=this.viewport)===null||O===void 0||O.reset(),this.refresh(0,this.rows-1)}}reset(){var O,B;this.options.rows=this.rows,this.options.cols=this.cols;let U=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),(B=this.viewport)===null||B===void 0||B.reset(),this._customKeyEventHandler=U,this.refresh(0,this.rows-1)}clearTextureAtlas(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()}_reportFocus(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case P.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let B=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[4;${U};${B}t`);break;case P.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let k=this._renderService.dimensions.css.cell.width.toFixed(0),te=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[6;${te};${k}t`)}}cancel(O,B){if(this.options.cancelEvents||B)return O.preventDefault(),O.stopPropagation(),!1}}a.Terminal=N},9924:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(r,l=1e3){this._renderCallback=r,this._debounceThresholdMS=l,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(r,l,u){this._rowCount=u,r=r!==void 0?r:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l;let i=Date.now();if(i-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=i,this._innerRefresh();else if(!this._additionalRefreshRequested){let s=i-this._lastRefreshMs,f=this._debounceThresholdMS-s;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let r=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,l)}}},1680:function(h,a,r){var l=this&&this.__decorate||function(_,m,v,y){var C,S=arguments.length,D=S<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,m,v,y);else for(var g=_.length-1;g>=0;g--)(C=_[g])&&(D=(S<3?C(D):S>3?C(m,v,D):C(m,v))||D);return S>3&&D&&Object.defineProperty(m,v,D),D},u=this&&this.__param||function(_,m){return function(v,y){m(v,y,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;let i=r(3656),s=r(4725),f=r(8460),p=r(844),d=r(2585),c=a.Viewport=class extends p.Disposable{constructor(_,m,v,y,C,S,D,g){super(),this._viewportElement=_,this._scrollArea=m,this._bufferService=v,this._optionsService=y,this._charSizeService=C,this._renderService=S,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,i.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(_){this._viewportElement.style.backgroundColor=_.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(_){if(_)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let m=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==m&&(this._lastRecordedBufferHeight=m,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let _=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==_&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=_),this._refreshAnimationFrame=null}syncScrollArea(_=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(_);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(_)}_handleScroll(_){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let m=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:m,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let _=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(_*(this._smoothScrollState.target-this._smoothScrollState.origin)),_<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(_,m){let v=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(m<0&&this._viewportElement.scrollTop!==0||m>0&&v<this._lastRecordedBufferHeight)||(_.cancelable&&_.preventDefault(),!1)}handleWheel(_){let m=this._getPixelsScrolled(_);return m!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+m:this._smoothScrollState.target+=m,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=m,this._bubbleScroll(_,m))}scrollLines(_){if(_!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let m=_*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+m,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!1})}_getPixelsScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let m=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_LINE?m*=this._currentRowHeight:_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(m*=this._currentRowHeight*this._bufferService.rows),m}getBufferElements(_,m){var v;let y,C="",S=[],D=m??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let b=_;b<D;b++){let F=g.get(b);if(!F)continue;let E=(v=g.get(b+1))===null||v===void 0?void 0:v.isWrapped;if(C+=F.translateToString(!E),!E||b===g.length-1){let T=document.createElement("div");T.textContent=C,S.push(T),C.length>0&&(y=T),C=""}}return{bufferElements:S,cursorElement:y}}getLinesScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let m=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(m/=this._currentRowHeight+0,this._wheelPartialScroll+=m,m=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(m*=this._bufferService.rows),m}_applyScrollModifier(_,m){let v=this._optionsService.rawOptions.fastScrollModifier;return v==="alt"&&m.altKey||v==="ctrl"&&m.ctrlKey||v==="shift"&&m.shiftKey?_*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:_*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(_){this._lastTouchY=_.touches[0].pageY}handleTouchMove(_){let m=this._lastTouchY-_.touches[0].pageY;return this._lastTouchY=_.touches[0].pageY,m!==0&&(this._viewportElement.scrollTop+=m,this._bubbleScroll(_,m))}};a.Viewport=c=l([u(2,d.IBufferService),u(3,d.IOptionsService),u(4,s.ICharSizeService),u(5,s.IRenderService),u(6,s.ICoreBrowserService),u(7,s.IThemeService)],c)},3107:function(h,a,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;let i=r(3656),s=r(4725),f=r(844),p=r(2585),d=a.BufferDecorationRenderer=class extends f.Disposable{constructor(c,_,m,v){super(),this._screenElement=c,this._bufferService=_,this._decorationService=m,this._renderService=v,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,i.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,f.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var _,m;let v=document.createElement("div");v.classList.add("xterm-decoration"),v.classList.toggle("xterm-decoration-top-layer",((_=c?.options)===null||_===void 0?void 0:_.layer)==="top"),v.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,v.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",v.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",v.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let y=(m=c.options.x)!==null&&m!==void 0?m:0;return y&&y>this._bufferService.cols&&(v.style.display="none"),this._refreshXPosition(c,v),v}_refreshStyle(c){let _=c.marker.line-this._bufferService.buffers.active.ydisp;if(_<0||_>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let m=this._decorationElements.get(c);m||(m=this._createElement(c),c.element=m,this._decorationElements.set(c,m),this._container.appendChild(m),c.onDispose(()=>{this._decorationElements.delete(c),m.remove()})),m.style.top=_*this._renderService.dimensions.css.cell.height+"px",m.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(m)}}_refreshXPosition(c,_=c.element){var m;if(!_)return;let v=(m=c.options.x)!==null&&m!==void 0?m:0;(c.options.anchor||"left")==="right"?_.style.right=v?v*this._renderService.dimensions.css.cell.width+"px":"":_.style.left=v?v*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var _;(_=this._decorationElements.get(c))===null||_===void 0||_.remove(),this._decorationElements.delete(c),c.dispose()}};a.BufferDecorationRenderer=d=l([u(1,p.IBufferService),u(2,p.IDecorationService),u(3,s.IRenderService)],d)},5871:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(r){if(r.options.overviewRulerOptions){for(let l of this._zones)if(l.color===r.options.overviewRulerOptions.color&&l.position===r.options.overviewRulerOptions.position){if(this._lineIntersectsZone(l,r.marker.line))return;if(this._lineAdjacentToZone(l,r.marker.line,r.options.overviewRulerOptions.position))return void this._addLineToZone(l,r.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=r.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=r.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=r.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=r.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:r.options.overviewRulerOptions.color,position:r.options.overviewRulerOptions.position,startBufferLine:r.marker.line,endBufferLine:r.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(r){this._linePadding=r}_lineIntersectsZone(r,l){return l>=r.startBufferLine&&l<=r.endBufferLine}_lineAdjacentToZone(r,l,u){return l>=r.startBufferLine-this._linePadding[u||"full"]&&l<=r.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(r,l){r.startBufferLine=Math.min(r.startBufferLine,l),r.endBufferLine=Math.max(r.endBufferLine,l)}}},5744:function(h,a,r){var l=this&&this.__decorate||function(y,C,S,D){var g,b=arguments.length,F=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,C,S,D);else for(var E=y.length-1;E>=0;E--)(g=y[E])&&(F=(b<3?g(F):b>3?g(C,S,F):g(C,S))||F);return b>3&&F&&Object.defineProperty(C,S,F),F},u=this&&this.__param||function(y,C){return function(S,D){C(S,D,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;let i=r(5871),s=r(3656),f=r(4725),p=r(844),d=r(2585),c={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0},v=a.OverviewRulerRenderer=class extends p.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,C,S,D,g,b,F){var E;super(),this._viewportElement=y,this._screenElement=C,this._bufferService=S,this._decorationService=D,this._renderService=g,this._optionsService=b,this._coreBrowseService=F,this._colorZoneStore=new i.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(E=this._viewportElement.parentElement)===null||E===void 0||E.insertBefore(this._canvas,this._viewportElement);let T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,p.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,s.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let y=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);_.full=this._canvas.width,_.left=y,_.center=C,_.right=y,this._refreshDrawHeightConstants(),m.full=0,m.left=0,m.center=_.left,m.right=_.left+_.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);let y=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);c.left=C,c.center=C,c.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let y=this._colorZoneStore.zones;for(let C of y)C.position!=="full"&&this._renderColorZone(C);for(let C of y)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(m[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-c[y.position||"full"]/2),_[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[y.position||"full"]))}_queueRefresh(y,C){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=v=l([u(2,d.IBufferService),u(3,d.IDecorationService),u(4,f.IRenderService),u(5,d.IOptionsService),u(6,f.ICoreBrowserService)],v)},2950:function(h,a,r){var l=this&&this.__decorate||function(d,c,_,m){var v,y=arguments.length,C=y<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,c,_,m);else for(var S=d.length-1;S>=0;S--)(v=d[S])&&(C=(y<3?v(C):y>3?v(c,_,C):v(c,_))||C);return y>3&&C&&Object.defineProperty(c,_,C),C},u=this&&this.__param||function(d,c){return function(_,m){c(_,m,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;let i=r(4725),s=r(2585),f=r(2584),p=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,c,_,m,v,y){this._textarea=d,this._compositionView=c,this._bufferService=_,this._optionsService=m,this._coreService=v,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){let c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let _;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,_=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),_.length>0&&this._coreService.triggerDataEvent(_,!0)}},0)}else{this._isSendingComposition=!1;let c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){let d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let c=this._textarea.value,_=c.replace(d,"");this._dataAlreadySent=_,c.length>d.length?this._coreService.triggerDataEvent(_,!0):c.length<d.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):c.length===d.length&&c!==d&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),_=this._renderService.dimensions.css.cell.height,m=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,v=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=v+"px",this._compositionView.style.top=m+"px",this._compositionView.style.height=_+"px",this._compositionView.style.lineHeight=_+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let y=this._compositionView.getBoundingClientRect();this._textarea.style.left=v+"px",this._textarea.style.top=m+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=p=l([u(2,s.IBufferService),u(3,s.IOptionsService),u(4,s.ICoreService),u(5,i.IRenderService)],p)},9806:(h,a)=>{function r(l,u,i){let s=i.getBoundingClientRect(),f=l.getComputedStyle(i),p=parseInt(f.getPropertyValue("padding-left")),d=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-s.left-p,u.clientY-s.top-d]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=r,a.getCoords=function(l,u,i,s,f,p,d,c,_){if(!p)return;let m=r(l,u,i);return m?(m[0]=Math.ceil((m[0]+(_?d/2:0))/d),m[1]=Math.ceil(m[1]/c),m[0]=Math.min(Math.max(m[0],1),s+(_?1:0)),m[1]=Math.min(Math.max(m[1],1),f),m):void 0}},9504:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;let l=r(2584);function u(c,_,m,v){let y=c-i(c,m),C=_-i(_,m),S=Math.abs(y-C)-function(D,g,b){let F=0,E=D-i(D,b),T=g-i(g,b);for(let M=0;M<Math.abs(E-T);M++){let w=s(D,g)==="A"?-1:1,x=b.buffer.lines.get(E+w*M);x?.isWrapped&&F++}return F}(c,_,m);return d(S,p(s(c,_),v))}function i(c,_){let m=0,v=_.buffer.lines.get(c),y=v?.isWrapped;for(;y&&c>=0&&c<_.rows;)m++,v=_.buffer.lines.get(--c),y=v?.isWrapped;return m}function s(c,_){return c>_?"A":"B"}function f(c,_,m,v,y,C){let S=c,D=_,g="";for(;S!==m||D!==v;)S+=y?1:-1,y&&S>C.cols-1?(g+=C.buffer.translateBufferLineToString(D,!1,c,S),S=0,c=0,D++):!y&&S<0&&(g+=C.buffer.translateBufferLineToString(D,!1,0,c+1),S=C.cols-1,c=S,D--);return g+C.buffer.translateBufferLineToString(D,!1,c,S)}function p(c,_){let m=_?"O":"[";return l.C0.ESC+m+c}function d(c,_){c=Math.floor(c);let m="";for(let v=0;v<c;v++)m+=_;return m}a.moveToCellSequence=function(c,_,m,v){let y=m.buffer.x,C=m.buffer.y;if(!m.buffer.hasScrollback)return function(g,b,F,E,T,M){return u(b,E,T,M).length===0?"":d(f(g,b,g,b-i(b,T),!1,T).length,p("D",M))}(y,C,0,_,m,v)+u(C,_,m,v)+function(g,b,F,E,T,M){let w;w=u(b,E,T,M).length>0?E-i(E,T):b;let x=E,L=function(R,A,I,$,H,P){let q;return q=u(I,$,H,P).length>0?$-i($,H):A,R<I&&q<=$||R>=I&&q<$?"C":"D"}(g,b,F,E,T,M);return d(f(g,w,F,x,L==="C",T).length,p(L,M))}(y,C,c,_,m,v);let S;if(C===_)return S=y>c?"D":"C",d(Math.abs(y-c),p(S,v));S=C>_?"D":"C";let D=Math.abs(C-_);return d(function(g,b){return b.cols-g}(C>_?c:y,m)+(D-1)*m.cols+1+((C>_?y:c)-1),p(S,v))}},1296:function(h,a,r){var l=this&&this.__decorate||function(T,M,w,x){var L,R=arguments.length,A=R<3?M:x===null?x=Object.getOwnPropertyDescriptor(M,w):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(T,M,w,x);else for(var I=T.length-1;I>=0;I--)(L=T[I])&&(A=(R<3?L(A):R>3?L(M,w,A):L(M,w))||A);return R>3&&A&&Object.defineProperty(M,w,A),A},u=this&&this.__param||function(T,M){return function(w,x){M(w,x,T)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;let i=r(3787),s=r(2550),f=r(2223),p=r(6171),d=r(4725),c=r(8055),_=r(8460),m=r(844),v=r(2585),y="xterm-dom-renderer-owner-",C="xterm-rows",S="xterm-fg-",D="xterm-bg-",g="xterm-focus",b="xterm-selection",F=1,E=a.DomRenderer=class extends m.Disposable{constructor(T,M,w,x,L,R,A,I,$,H){super(),this._element=T,this._screenElement=M,this._viewportElement=w,this._linkifier2=x,this._charSizeService=R,this._optionsService=A,this._bufferService=I,this._coreBrowserService=$,this._themeService=H,this._terminalClass=F++,this._rowElements=[],this.onRequestRedraw=this.register(new _.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,p.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(P=>this._injectCss(P))),this._injectCss(this._themeService.colors),this._rowFactory=L.createInstance(i.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(P=>this._handleLinkHover(P))),this.register(this._linkifier2.onHideLinkUnderline(P=>this._handleLinkLeave(P))),this.register((0,m.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new s.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let w of this._rowElements)w.style.width=`${this.dimensions.css.canvas.width}px`,w.style.height=`${this.dimensions.css.cell.height}px`,w.style.lineHeight=`${this.dimensions.css.cell.height}px`,w.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let M=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${C} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${C} .xterm-dim { color: ${c.color.multiplyOpacity(T.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,M+=`${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(let[w,x]of T.ansi.entries())M+=`${this._terminalSelector} .${S}${w} { color: ${x.css}; }${this._terminalSelector} .${S}${w}.xterm-dim { color: ${c.color.multiplyOpacity(x,.5).css}; }${this._terminalSelector} .${D}${w} { background-color: ${x.css}; }`;M+=`${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(T.background).css}; }${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${D}${f.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){let T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,M){for(let w=this._rowElements.length;w<=M;w++){let x=document.createElement("div");this._rowContainer.appendChild(x),this._rowElements.push(x)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,M){this._refreshRowElements(T,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,M,w){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,M,w),this.renderRows(0,this._bufferService.rows-1),!T||!M)return;let x=T[1]-this._bufferService.buffer.ydisp,L=M[1]-this._bufferService.buffer.ydisp,R=Math.max(x,0),A=Math.min(L,this._bufferService.rows-1);if(R>=this._bufferService.rows||A<0)return;let I=document.createDocumentFragment();if(w){let $=T[0]>M[0];I.appendChild(this._createSelectionElement(R,$?M[0]:T[0],$?T[0]:M[0],A-R+1))}else{let $=x===R?T[0]:0,H=R===L?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,$,H));let P=A-R-1;if(I.appendChild(this._createSelectionElement(R+1,0,this._bufferService.cols,P)),R!==A){let q=L===A?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(A,0,q))}}this._selectionContainer.appendChild(I)}_createSelectionElement(T,M,w,x=1){let L=document.createElement("div");return L.style.height=x*this.dimensions.css.cell.height+"px",L.style.top=T*this.dimensions.css.cell.height+"px",L.style.left=M*this.dimensions.css.cell.width+"px",L.style.width=this.dimensions.css.cell.width*(w-M)+"px",L}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let T of this._rowElements)T.replaceChildren()}renderRows(T,M){let w=this._bufferService.buffer,x=w.ybase+w.y,L=Math.min(w.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink,A=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=T;$<=M;$++){let H=$+w.ydisp,P=this._rowElements[$],q=w.lines.get(H);if(!P||!q)break;P.replaceChildren(...this._rowFactory.createRow(q,H,H===x,A,I,L,R,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,M,w,x,L,R){w<0&&(T=0),x<0&&(M=0);let A=this._bufferService.rows-1;w=Math.max(Math.min(w,A),0),x=Math.max(Math.min(x,A),0),L=Math.min(L,this._bufferService.cols);let I=this._bufferService.buffer,$=I.ybase+I.y,H=Math.min(I.x,L-1),P=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,G=this._optionsService.rawOptions.cursorInactiveStyle;for(let N=w;N<=x;++N){let Q=N+I.ydisp,O=this._rowElements[N],B=I.lines.get(Q);if(!O||!B)break;O.replaceChildren(...this._rowFactory.createRow(B,Q,Q===$,q,G,H,P,this.dimensions.css.cell.width,this._widthCache,R?N===w?T:0:-1,R?(N===x?M:L)-1:-1))}}};a.DomRenderer=E=l([u(4,v.IInstantiationService),u(5,d.ICharSizeService),u(6,v.IOptionsService),u(7,v.IBufferService),u(8,d.ICoreBrowserService),u(9,d.IThemeService)],E)},3787:function(h,a,r){var l=this&&this.__decorate||function(S,D,g,b){var F,E=arguments.length,T=E<3?D:b===null?b=Object.getOwnPropertyDescriptor(D,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(S,D,g,b);else for(var M=S.length-1;M>=0;M--)(F=S[M])&&(T=(E<3?F(T):E>3?F(D,g,T):F(D,g))||T);return E>3&&T&&Object.defineProperty(D,g,T),T},u=this&&this.__param||function(S,D){return function(g,b){D(g,b,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;let i=r(2223),s=r(643),f=r(511),p=r(2585),d=r(8055),c=r(4725),_=r(4269),m=r(6171),v=r(3734),y=a.DomRendererRowFactory=class{constructor(S,D,g,b,F,E,T){this._document=S,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=b,this._coreService=F,this._decorationService=E,this._themeService=T,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,D,g){this._selectionStart=S,this._selectionEnd=D,this._columnSelectMode=g}createRow(S,D,g,b,F,E,T,M,w,x,L){let R=[],A=this._characterJoinerService.getJoinedCharacters(D),I=this._themeService.colors,$,H=S.getNoBgTrimmedLength();g&&H<E+1&&(H=E+1);let P=0,q="",G=0,N=0,Q=0,O=!1,B=0,U=!1,k=0,te=[],J=x!==-1&&L!==-1;for(let ye=0;ye<H;ye++){S.loadCell(ye,this._workCell);let Ae=this._workCell.getWidth();if(Ae===0)continue;let we=!1,ce=ye,Fe=this._workCell;if(A.length>0&&ye===A[0][0]){we=!0;let Ge=A.shift();Fe=new _.JoinedCellData(this._workCell,S.translateToString(!0,Ge[0],Ge[1]),Ge[1]-Ge[0]),ce=Ge[1]-1,Ae=Fe.getWidth()}let It=this._isCellInSelection(ye,D),un=g&&ye===E,Gt=J&&ye>=x&&ye<=L,tt=!1;this._decorationService.forEachDecorationAtCell(ye,D,void 0,Ge=>{tt=!0});let le=Fe.getChars()||s.WHITESPACE_CELL_CHAR;if(le===" "&&(Fe.isUnderline()||Fe.isOverline())&&(le="\xA0"),k=Ae*M-w.get(le,Fe.isBold(),Fe.isItalic()),$){if(P&&(It&&U||!It&&!U&&Fe.bg===G)&&(It&&U&&I.selectionForeground||Fe.fg===N)&&Fe.extended.ext===Q&&Gt===O&&k===B&&!un&&!we&&!tt){q+=le,P++;continue}P&&($.textContent=q),$=this._document.createElement("span"),P=0,q=""}else $=this._document.createElement("span");if(G=Fe.bg,N=Fe.fg,Q=Fe.extended.ext,O=Gt,B=k,U=It,we&&E>=ye&&E<=ce&&(E=ye),!this._coreService.isCursorHidden&&un){if(te.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&te.push("xterm-cursor-blink"),te.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(F)switch(F){case"outline":te.push("xterm-cursor-outline");break;case"block":te.push("xterm-cursor-block");break;case"bar":te.push("xterm-cursor-bar");break;case"underline":te.push("xterm-cursor-underline")}}if(Fe.isBold()&&te.push("xterm-bold"),Fe.isItalic()&&te.push("xterm-italic"),Fe.isDim()&&te.push("xterm-dim"),q=Fe.isInvisible()?s.WHITESPACE_CELL_CHAR:Fe.getChars()||s.WHITESPACE_CELL_CHAR,Fe.isUnderline()&&(te.push(`xterm-underline-${Fe.extended.underlineStyle}`),q===" "&&(q="\xA0"),!Fe.isUnderlineColorDefault()))if(Fe.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${v.AttributeData.toColorRGB(Fe.getUnderlineColor()).join(",")})`;else{let Ge=Fe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Fe.isBold()&&Ge<8&&(Ge+=8),$.style.textDecorationColor=I.ansi[Ge].css}Fe.isOverline()&&(te.push("xterm-overline"),q===" "&&(q="\xA0")),Fe.isStrikethrough()&&te.push("xterm-strikethrough"),Gt&&($.style.textDecoration="underline");let ve=Fe.getFgColor(),fe=Fe.getFgColorMode(),ae=Fe.getBgColor(),j=Fe.getBgColorMode(),ie=!!Fe.isInverse();if(ie){let Ge=ve;ve=ae,ae=Ge;let Rt=fe;fe=j,j=Rt}let pe,Ve,it,gt=!1;switch(this._decorationService.forEachDecorationAtCell(ye,D,void 0,Ge=>{Ge.options.layer!=="top"&&gt||(Ge.backgroundColorRGB&&(j=50331648,ae=Ge.backgroundColorRGB.rgba>>8&16777215,pe=Ge.backgroundColorRGB),Ge.foregroundColorRGB&&(fe=50331648,ve=Ge.foregroundColorRGB.rgba>>8&16777215,Ve=Ge.foregroundColorRGB),gt=Ge.options.layer==="top")}),!gt&&It&&(pe=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,ae=pe.rgba>>8&16777215,j=50331648,gt=!0,I.selectionForeground&&(fe=50331648,ve=I.selectionForeground.rgba>>8&16777215,Ve=I.selectionForeground)),gt&&te.push("xterm-decoration-top"),j){case 16777216:case 33554432:it=I.ansi[ae],te.push(`xterm-bg-${ae}`);break;case 50331648:it=d.rgba.toColor(ae>>16,ae>>8&255,255&ae),this._addStyle($,`background-color:#${C((ae>>>0).toString(16),"0",6)}`);break;default:ie?(it=I.foreground,te.push(`xterm-bg-${i.INVERTED_DEFAULT_COLOR}`)):it=I.background}switch(pe||Fe.isDim()&&(pe=d.color.multiplyOpacity(it,.5)),fe){case 16777216:case 33554432:Fe.isBold()&&ve<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ve+=8),this._applyMinimumContrast($,it,I.ansi[ve],Fe,pe,void 0)||te.push(`xterm-fg-${ve}`);break;case 50331648:let Ge=d.rgba.toColor(ve>>16&255,ve>>8&255,255&ve);this._applyMinimumContrast($,it,Ge,Fe,pe,Ve)||this._addStyle($,`color:#${C(ve.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,it,I.foreground,Fe,pe,void 0)||ie&&te.push(`xterm-fg-${i.INVERTED_DEFAULT_COLOR}`)}te.length&&($.className=te.join(" "),te.length=0),un||we||tt?$.textContent=q:P++,k!==this.defaultSpacing&&($.style.letterSpacing=`${k}px`),R.push($),ye=ce}return $&&P&&($.textContent=q),R}_applyMinimumContrast(S,D,g,b,F,E){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,m.excludeFromContrastRatioDemands)(b.getCode()))return!1;let T=this._getContrastCache(b),M;if(F||E||(M=T.getColor(D.rgba,g.rgba)),M===void 0){let w=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);M=d.color.ensureContrastRatio(F||D,E||g,w),T.setColor((F||D).rgba,(E||g).rgba,M??null)}return!!M&&(this._addStyle(S,`color:${M.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,D){S.setAttribute("style",`${S.getAttribute("style")||""}${D};`)}_isCellInSelection(S,D){let g=this._selectionStart,b=this._selectionEnd;return!(!g||!b)&&(this._columnSelectMode?g[0]<=b[0]?S>=g[0]&&D>=g[1]&&S<b[0]&&D<=b[1]:S<g[0]&&D>=g[1]&&S>=b[0]&&D<=b[1]:D>g[1]&&D<b[1]||g[1]===b[1]&&D===g[1]&&S>=g[0]&&S<b[0]||g[1]<b[1]&&D===b[1]&&S<b[0]||g[1]<b[1]&&D===g[1]&&S>=g[0])}};function C(S,D,g){for(;S.length<g;)S=D+S;return S}a.DomRendererRowFactory=y=l([u(1,c.ICharacterJoinerService),u(2,p.IOptionsService),u(3,c.ICoreBrowserService),u(4,p.ICoreService),u(5,p.IDecorationService),u(6,c.IThemeService)],y)},2550:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(r){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=r.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let l=r.createElement("span"),u=r.createElement("span");u.style.fontWeight="bold";let i=r.createElement("span");i.style.fontStyle="italic";let s=r.createElement("span");s.style.fontWeight="bold",s.style.fontStyle="italic",this._measureElements=[l,u,i,s],this._container.appendChild(l),this._container.appendChild(u),this._container.appendChild(i),this._container.appendChild(s),r.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(r,l,u,i){r===this._font&&l===this._fontSize&&u===this._weight&&i===this._weightBold||(this._font=r,this._fontSize=l,this._weight=u,this._weightBold=i,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${i}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${i}`,this.clear())}get(r,l,u){let i=0;if(!l&&!u&&r.length===1&&(i=r.charCodeAt(0))<256)return this._flat[i]!==-9999?this._flat[i]:this._flat[i]=this._measure(r,0);let s=r;l&&(s+="B"),u&&(s+="I");let f=this._holey.get(s);if(f===void 0){let p=0;l&&(p|=1),u&&(p|=2),f=this._measure(r,p),this._holey.set(s,f)}return f}_measure(r,l){let u=this._measureElements[l];return u.textContent=r.repeat(32),u.offsetWidth/32}}},2223:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;let l=r(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},6171:(h,a)=>{function r(l){return 57508<=l&&l<=57558}Object.defineProperty(a,"__esModule",{value:!0}),a.createRenderDimensions=a.excludeFromContrastRatioDemands=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},a.isPowerlineGlyph=r,a.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},a.excludeFromContrastRatioDemands=function(l){return r(l)||function(u){return 9472<=u&&u<=9631}(l)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(r){this._bufferService=r,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?r%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)-1]:[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[r,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[Math.max(r,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let r=this.selectionStart,l=this.selectionEnd;return!(!r||!l)&&(r[1]>l[1]||r[1]===l[1]&&r[0]>l[0])}handleTrim(r){return this.selectionStart&&(this.selectionStart[1]-=r),this.selectionEnd&&(this.selectionEnd[1]-=r),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(h,a,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;let i=r(2585),s=r(8460),f=r(844),p=a.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,_,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new s.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new d(c,_,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};a.CharSizeService=p=l([u(2,i.IOptionsService)],p);class d{constructor(_,m,v){this._document=_,this._parentElement=m,this._optionsService=v,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let _={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return _.width!==0&&_.height!==0&&(this._result.width=_.width/32,this._result.height=Math.ceil(_.height)),this._result}}},4269:function(h,a,r){var l=this&&this.__decorate||function(_,m,v,y){var C,S=arguments.length,D=S<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,m,v,y);else for(var g=_.length-1;g>=0;g--)(C=_[g])&&(D=(S<3?C(D):S>3?C(m,v,D):C(m,v))||D);return S>3&&D&&Object.defineProperty(m,v,D),D},u=this&&this.__param||function(_,m){return function(v,y){m(v,y,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;let i=r(3734),s=r(643),f=r(511),p=r(2585);class d extends i.AttributeData{constructor(m,v,y){super(),this.content=0,this.combinedData="",this.fg=m.fg,this.bg=m.bg,this.combinedData=v,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(m){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=d;let c=a.CharacterJoinerService=class g2{constructor(m){this._bufferService=m,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(m){let v={id:this._nextCharacterJoinerId++,handler:m};return this._characterJoiners.push(v),v.id}deregister(m){for(let v=0;v<this._characterJoiners.length;v++)if(this._characterJoiners[v].id===m)return this._characterJoiners.splice(v,1),!0;return!1}getJoinedCharacters(m){if(this._characterJoiners.length===0)return[];let v=this._bufferService.buffer.lines.get(m);if(!v||v.length===0)return[];let y=[],C=v.translateToString(!0),S=0,D=0,g=0,b=v.getFg(0),F=v.getBg(0);for(let E=0;E<v.getTrimmedLength();E++)if(v.loadCell(E,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==F){if(E-S>1){let T=this._getJoinedRanges(C,g,D,v,S);for(let M=0;M<T.length;M++)y.push(T[M])}S=E,g=D,b=this._workCell.fg,F=this._workCell.bg}D+=this._workCell.getChars().length||s.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let E=this._getJoinedRanges(C,g,D,v,S);for(let T=0;T<E.length;T++)y.push(E[T])}return y}_getJoinedRanges(m,v,y,C,S){let D=m.substring(v,y),g=[];try{g=this._characterJoiners[0].handler(D)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{let F=this._characterJoiners[b].handler(D);for(let E=0;E<F.length;E++)g2._mergeRanges(g,F[E])}catch(F){console.error(F)}return this._stringRangesToCellRanges(g,C,S),g}_stringRangesToCellRanges(m,v,y){let C=0,S=!1,D=0,g=m[C];if(g){for(let b=y;b<this._bufferService.cols;b++){let F=v.getWidth(b),E=v.getString(b).length||s.WHITESPACE_CELL_CHAR.length;if(F!==0){if(!S&&g[0]<=D&&(g[0]=b,S=!0),g[1]<=D){if(g[1]=b,g=m[++C],!g)break;g[0]<=D?(g[0]=b,S=!0):S=!1}D+=E}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(m,v){let y=!1;for(let C=0;C<m.length;C++){let S=m[C];if(y){if(v[1]<=S[0])return m[C-1][1]=v[1],m;if(v[1]<=S[1])return m[C-1][1]=Math.max(v[1],S[1]),m.splice(C,1),m;m.splice(C,1),C--}else{if(v[1]<=S[0])return m.splice(C,0,v),m;if(v[1]<=S[1])return S[0]=Math.min(v[0],S[0]),m;v[0]<S[1]&&(S[0]=Math.min(v[0],S[0]),y=!0)}}return y?m[m.length-1][1]=v[1]:m.push(v),m}};a.CharacterJoinerService=c=l([u(0,p.IBufferService)],c)},5114:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0,a.CoreBrowserService=class{constructor(r,l){this._textarea=r,this.window=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(h,a,r){var l=this&&this.__decorate||function(p,d,c,_){var m,v=arguments.length,y=v<3?d:_===null?_=Object.getOwnPropertyDescriptor(d,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,d,c,_);else for(var C=p.length-1;C>=0;C--)(m=p[C])&&(y=(v<3?m(y):v>3?m(d,c,y):m(d,c))||y);return v>3&&y&&Object.defineProperty(d,c,y),y},u=this&&this.__param||function(p,d){return function(c,_){d(c,_,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;let i=r(4725),s=r(9806),f=a.MouseService=class{constructor(p,d){this._renderService=p,this._charSizeService=d}getCoords(p,d,c,_,m){return(0,s.getCoords)(window,p,d,c,_,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,m)}getMouseReportCoords(p,d){let c=(0,s.getCoordsRelativeToElement)(window,p,d);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};a.MouseService=f=l([u(0,i.IRenderService),u(1,i.ICharSizeService)],f)},3230:function(h,a,r){var l=this&&this.__decorate||function(y,C,S,D){var g,b=arguments.length,F=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,C,S,D);else for(var E=y.length-1;E>=0;E--)(g=y[E])&&(F=(b<3?g(F):b>3?g(C,S,F):g(C,S))||F);return b>3&&F&&Object.defineProperty(C,S,F),F},u=this&&this.__param||function(y,C){return function(S,D){C(S,D,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;let i=r(3656),s=r(6193),f=r(5596),p=r(4725),d=r(8460),c=r(844),_=r(7226),m=r(2585),v=a.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,C,S,D,g,b,F,E){if(super(),this._rowCount=y,this._charSizeService=D,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new d.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new d.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new d.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new d.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new s.RenderDebouncer(F.window,(T,M)=>this._renderRows(T,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new f.ScreenDprMonitor(F.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register((0,i.addDisposableDomListener)(F.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(E.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in F.window){let T=new F.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});T.observe(C),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,C,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,C,this._rowCount))}_renderRows(y,C){this._renderer.value&&(y=Math.min(y,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(y,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:C}),this._onRender.fire({start:y,end:C}),this._isNextRenderRedrawOnly=!0)}resize(y,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,C;this._renderer.value&&((C=(y=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,C)):this._renderer.value.handleResize(y,C),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,C,S){var D;this._selectionState.start=y,this._selectionState.end=C,this._selectionState.columnSelectMode=S,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(y,C,S)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};a.RenderService=v=l([u(2,m.IOptionsService),u(3,p.ICharSizeService),u(4,m.IDecorationService),u(5,m.IBufferService),u(6,p.ICoreBrowserService),u(7,p.IThemeService)],v)},9312:function(h,a,r){var l=this&&this.__decorate||function(g,b,F,E){var T,M=arguments.length,w=M<3?b:E===null?E=Object.getOwnPropertyDescriptor(b,F):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,b,F,E);else for(var x=g.length-1;x>=0;x--)(T=g[x])&&(w=(M<3?T(w):M>3?T(b,F,w):T(b,F))||w);return M>3&&w&&Object.defineProperty(b,F,w),w},u=this&&this.__param||function(g,b){return function(F,E){b(F,E,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;let i=r(9806),s=r(9504),f=r(456),p=r(4725),d=r(8460),c=r(844),_=r(6114),m=r(4841),v=r(511),y=r(2585),C="\xA0",S=new RegExp(C,"g"),D=a.SelectionService=class extends c.Disposable{constructor(g,b,F,E,T,M,w,x,L){super(),this._element=g,this._screenElement=b,this._linkifier=F,this._bufferService=E,this._coreService=T,this._mouseService=M,this._optionsService=w,this._renderService=x,this._coreBrowserService=L,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new v.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=R=>this._handleMouseMove(R),this._mouseUpListener=R=>this._handleMouseUp(R),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(R=>this._handleTrim(R)),this.register(this._bufferService.buffers.onBufferActivate(R=>this._handleBufferActivate(R))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!g||!b||g[0]===b[0]&&g[1]===b[1])}get selectionText(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!g||!b)return"";let F=this._bufferService.buffer,E=[];if(this._activeSelectionMode===3){if(g[0]===b[0])return"";let T=g[0]<b[0]?g[0]:b[0],M=g[0]<b[0]?b[0]:g[0];for(let w=g[1];w<=b[1];w++){let x=F.translateBufferLineToString(w,!0,T,M);E.push(x)}}else{let T=g[1]===b[1]?b[0]:void 0;E.push(F.translateBufferLineToString(g[1],!0,g[0],T));for(let M=g[1]+1;M<=b[1]-1;M++){let w=F.lines.get(M),x=F.translateBufferLineToString(M,!0);w?.isWrapped?E[E.length-1]+=x:E.push(x)}if(g[1]!==b[1]){let M=F.lines.get(b[1]),w=F.translateBufferLineToString(b[1],!0,0,b[0]);M&&M.isWrapped?E[E.length-1]+=w:E.push(w)}}return E.map(T=>T.replace(S," ")).join(_.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),_.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){let b=this._getMouseBufferCoords(g),F=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!!(F&&E&&b)&&this._areCoordsInSelection(b,F,E)}isCellInSelection(g,b){let F=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!F||!E)&&this._areCoordsInSelection([g,b],F,E)}_areCoordsInSelection(g,b,F){return g[1]>b[1]&&g[1]<F[1]||b[1]===F[1]&&g[1]===b[1]&&g[0]>=b[0]&&g[0]<F[0]||b[1]<F[1]&&g[1]===F[1]&&g[0]<F[0]||b[1]<F[1]&&g[1]===b[1]&&g[0]>=b[0]}_selectWordAtCursor(g,b){var F,E;let T=(E=(F=this._linkifier.currentLink)===null||F===void 0?void 0:F.link)===null||E===void 0?void 0:E.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,m.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let M=this._getMouseBufferCoords(g);return!!M&&(this._selectWordAt(M,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,b){this._model.clearSelection(),g=Math.max(g,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){let b=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(g){let b=(0,i.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1],F=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=F?0:(b>F&&(b-=F),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(g){return _.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){let b=this._getMouseBufferCoords(g);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(g){return g.altKey&&!(_.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;let b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let F=this._bufferService.buffer;if(this._model.selectionEnd[1]<F.lines.length){let E=F.lines.get(this._model.selectionEnd[1]);E&&E.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){let b=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let F=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(F&&F[0]!==void 0&&F[1]!==void 0){let E=(0,s.moveToCellSequence)(F[0]-1,F[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(E,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,F=!(!g||!b||g[0]===b[0]&&g[1]===b[1]);F?g&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,b,F)):this._oldHasSelection&&this._fireOnSelectionChange(g,b,F)}_fireOnSelectionChange(g,b,F){this._oldSelectionStart=g,this._oldSelectionEnd=b,this._oldHasSelection=F,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(g,b){let F=b;for(let E=0;b>=E;E++){let T=g.loadCell(E,this._workCell).getChars().length;this._workCell.getWidth()===0?F--:T>1&&b!==E&&(F+=T-1)}return F}setSelection(g,b,F){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,b],this._model.selectionStartLength=F,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,b,F=!0,E=!0){if(g[0]>=this._bufferService.cols)return;let T=this._bufferService.buffer,M=T.lines.get(g[1]);if(!M)return;let w=T.translateBufferLineToString(g[1],!1),x=this._convertViewportColToCharacterIndex(M,g[0]),L=x,R=g[0]-x,A=0,I=0,$=0,H=0;if(w.charAt(x)===" "){for(;x>0&&w.charAt(x-1)===" ";)x--;for(;L<w.length&&w.charAt(L+1)===" ";)L++}else{let G=g[0],N=g[0];M.getWidth(G)===0&&(A++,G--),M.getWidth(N)===2&&(I++,N++);let Q=M.getString(N).length;for(Q>1&&(H+=Q-1,L+=Q-1);G>0&&x>0&&!this._isCharWordSeparator(M.loadCell(G-1,this._workCell));){M.loadCell(G-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(A++,G--):O>1&&($+=O-1,x-=O-1),x--,G--}for(;N<M.length&&L+1<w.length&&!this._isCharWordSeparator(M.loadCell(N+1,this._workCell));){M.loadCell(N+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,N++):O>1&&(H+=O-1,L+=O-1),L++,N++}}L++;let P=x+R-A+$,q=Math.min(this._bufferService.cols,L-x+A+I-$-H);if(b||w.slice(x,L).trim()!==""){if(F&&P===0&&M.getCodePoint(0)!==32){let G=T.lines.get(g[1]-1);if(G&&M.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){let N=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(N){let Q=this._bufferService.cols-N.start;P-=Q,q+=Q}}}if(E&&P+q===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let G=T.lines.get(g[1]+1);if(G?.isWrapped&&G.getCodePoint(0)!==32){let N=this._getWordAt([0,g[1]+1],!1,!1,!0);N&&(q+=N.length)}}return{start:P,length:q}}}_selectWordAt(g,b){let F=this._getWordAt(g,b);if(F){for(;F.start<0;)F.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[F.start,g[1]],this._model.selectionStartLength=F.length}}_selectToWordAt(g){let b=this._getWordAt(g,!0);if(b){let F=g[1];for(;b.start<0;)b.start+=this._bufferService.cols,F--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,F++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,F]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){let b=this._bufferService.buffer.getWrappedRangeForLine(g),F={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,m.getRangeLength)(F,this._bufferService.cols)}};a.SelectionService=D=l([u(3,y.IBufferService),u(4,y.ICoreService),u(5,p.IMouseService),u(6,y.IOptionsService),u(7,p.IRenderService),u(8,p.ICoreBrowserService)],D)},4725:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;let l=r(8343);a.ICharSizeService=(0,l.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),a.IMouseService=(0,l.createDecorator)("MouseService"),a.IRenderService=(0,l.createDecorator)("RenderService"),a.ISelectionService=(0,l.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,l.createDecorator)("ThemeService")},6731:function(h,a,r){var l=this&&this.__decorate||function(D,g,b,F){var E,T=arguments.length,M=T<3?g:F===null?F=Object.getOwnPropertyDescriptor(g,b):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,F);else for(var w=D.length-1;w>=0;w--)(E=D[w])&&(M=(T<3?E(M):T>3?E(g,b,M):E(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M},u=this&&this.__param||function(D,g){return function(b,F){g(b,F,D)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;let i=r(7239),s=r(8055),f=r(8460),p=r(844),d=r(2585),c=s.css.toColor("#ffffff"),_=s.css.toColor("#000000"),m=s.css.toColor("#ffffff"),v=s.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[s.css.toColor("#2e3436"),s.css.toColor("#cc0000"),s.css.toColor("#4e9a06"),s.css.toColor("#c4a000"),s.css.toColor("#3465a4"),s.css.toColor("#75507b"),s.css.toColor("#06989a"),s.css.toColor("#d3d7cf"),s.css.toColor("#555753"),s.css.toColor("#ef2929"),s.css.toColor("#8ae234"),s.css.toColor("#fce94f"),s.css.toColor("#729fcf"),s.css.toColor("#ad7fa8"),s.css.toColor("#34e2e2"),s.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let b=0;b<216;b++){let F=g[b/36%6|0],E=g[b/6%6|0],T=g[b%6];D.push({css:s.channels.toCss(F,E,T),rgba:s.channels.toRgba(F,E,T)})}for(let b=0;b<24;b++){let F=8+10*b;D.push({css:s.channels.toCss(F,F,F),rgba:s.channels.toRgba(F,F,F)})}return D})());let C=a.ThemeService=class extends p.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new i.ColorContrastCache,this._halfContrastCache=new i.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:_,cursor:m,cursorAccent:v,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:s.color.blend(_,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:s.color.blend(_,y),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let g=this._colors;if(g.foreground=S(D.foreground,c),g.background=S(D.background,_),g.cursor=S(D.cursor,m),g.cursorAccent=S(D.cursorAccent,v),g.selectionBackgroundTransparent=S(D.selectionBackground,y),g.selectionBackgroundOpaque=s.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=S(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=s.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?S(D.selectionForeground,s.NULL_COLOR):void 0,g.selectionForeground===s.NULL_COLOR&&(g.selectionForeground=void 0),s.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=s.color.opacity(g.selectionBackgroundTransparent,.3)),s.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=s.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=a.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=S(D.black,a.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=S(D.red,a.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=S(D.green,a.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=S(D.yellow,a.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=S(D.blue,a.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=S(D.magenta,a.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=S(D.cyan,a.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=S(D.white,a.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=S(D.brightBlack,a.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=S(D.brightRed,a.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=S(D.brightGreen,a.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=S(D.brightYellow,a.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=S(D.brightBlue,a.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=S(D.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=S(D.brightCyan,a.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=S(D.brightWhite,a.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let b=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let F=0;F<b;F++)g.ansi[F+16]=S(D.extendedAnsi[F],a.DEFAULT_ANSI_COLORS[F+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(D,g){if(D!==void 0)try{return s.css.toColor(D)}catch{}return g}a.ThemeService=C=l([u(0,d.IOptionsService)],C)},6349:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;let l=r(8460),u=r(844);class i extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new l.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new l.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new l.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;let p=new Array(f);for(let d=0;d<Math.min(f,this.length);d++)p[d]=this._array[this._getCyclicIndex(d)];this._array=p,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let p=this._length;p<f;p++)this._array[p]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,p){this._array[this._getCyclicIndex(f)]=p}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,p,...d){if(p){for(let c=f;c<this._length-p;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+p)];this._length-=p,this.onDeleteEmitter.fire({index:f,amount:p})}for(let c=this._length-1;c>=f;c--)this._array[this._getCyclicIndex(c+d.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<d.length;c++)this._array[this._getCyclicIndex(f+c)]=d[c];if(d.length&&this.onInsertEmitter.fire({index:f,amount:d.length}),this._length+d.length>this._maxLength){let c=this._length+d.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=d.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,p,d){if(!(p<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let _=p-1;_>=0;_--)this.set(f+_+d,this.get(f+_));let c=f+p+d-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<p;c++)this.set(f+c+d,this.get(f+c))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}a.CircularList=i},1439:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function r(l,u=5){if(typeof l!="object")return l;let i=Array.isArray(l)?[]:{};for(let s in l)i[s]=u<=1?l[s]:l[s]&&r(l[s],u-1);return i}},8055:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=r(6114),u=0,i=0,s=0,f=0;var p,d,c,_,m;function v(C){let S=C.toString(16);return S.length<2?"0"+S:S}function y(C,S){return C<S?(S+.05)/(C+.05):(C+.05)/(S+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(S,D,g,b){return b!==void 0?`#${v(S)}${v(D)}${v(g)}${v(b)}`:`#${v(S)}${v(D)}${v(g)}`},C.toRgba=function(S,D,g,b=255){return(S<<24|D<<16|g<<8|b)>>>0}}(p||(a.channels=p={})),function(C){function S(D,g){return f=Math.round(255*g),[u,i,s]=m.toChannels(D.rgba),{css:p.toCss(u,i,s,f),rgba:p.toRgba(u,i,s,f)}}C.blend=function(D,g){if(f=(255&g.rgba)/255,f===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,F=g.rgba>>16&255,E=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return u=T+Math.round((b-T)*f),i=M+Math.round((F-M)*f),s=w+Math.round((E-w)*f),{css:p.toCss(u,i,s),rgba:p.toRgba(u,i,s)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let F=m.ensureContrastRatio(D.rgba,g.rgba,b);if(F)return m.toColor(F>>24&255,F>>16&255,F>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,i,s]=m.toChannels(g),{css:p.toCss(u,i,s),rgba:g}},C.opacity=S,C.multiplyOpacity=function(D,g){return f=255&D.rgba,S(D,f*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(d||(a.color=d={})),function(C){let S,D;if(!l.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(S=b,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),m.toColor(u,i,s);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),f=parseInt(g.slice(4,5).repeat(2),16),m.toColor(u,i,s,f);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return u=parseInt(b[1]),i=parseInt(b[2]),s=parseInt(b[3]),f=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),m.toColor(u,i,s,f);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=g,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[u,i,s,f]=S.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(u,i,s,f),css:g}}}(c||(a.css=c={})),function(C){function S(D,g,b){let F=D/255,E=g/255,T=b/255;return .2126*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=S}(_||(a.rgb=_={})),function(C){function S(g,b,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,x=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,x,L),_.relativeLuminance2(E,T,M));for(;R<F&&(w>0||x>0||L>0);)w-=Math.max(0,Math.ceil(.1*w)),x-=Math.max(0,Math.ceil(.1*x)),L-=Math.max(0,Math.ceil(.1*L)),R=y(_.relativeLuminance2(w,x,L),_.relativeLuminance2(E,T,M));return(w<<24|x<<16|L<<8|255)>>>0}function D(g,b,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,x=b>>16&255,L=b>>8&255,R=y(_.relativeLuminance2(w,x,L),_.relativeLuminance2(E,T,M));for(;R<F&&(w<255||x<255||L<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),x=Math.min(255,x+Math.ceil(.1*(255-x))),L=Math.min(255,L+Math.ceil(.1*(255-L))),R=y(_.relativeLuminance2(w,x,L),_.relativeLuminance2(E,T,M));return(w<<24|x<<16|L<<8|255)>>>0}C.ensureContrastRatio=function(g,b,F){let E=_.relativeLuminance(g>>8),T=_.relativeLuminance(b>>8);if(y(E,T)<F){if(T<E){let x=S(g,b,F),L=y(E,_.relativeLuminance(x>>8));if(L<F){let R=D(g,b,F);return L>y(E,_.relativeLuminance(R>>8))?x:R}return x}let M=D(g,b,F),w=y(E,_.relativeLuminance(M>>8));if(w<F){let x=S(g,b,F);return w>y(E,_.relativeLuminance(x>>8))?M:x}return M}},C.reduceLuminance=S,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,F,E){return{css:p.toCss(g,b,F,E),rgba:p.toRgba(g,b,F,E)}}}(m||(a.rgba=m={})),a.toPaddedHex=v,a.contrastRatio=y},8969:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;let l=r(844),u=r(2585),i=r(4348),s=r(7866),f=r(744),p=r(7302),d=r(6975),c=r(8460),_=r(1753),m=r(1480),v=r(7994),y=r(9282),C=r(5435),S=r(5981),D=r(2660),g=!1;class b extends l.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(E=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(E.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(E){for(let T in E)this.optionsService.options[T]=E[T]}constructor(E){super(),this._windowsWrappingHeuristics=this.register(new l.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new i.InstantiationService,this.optionsService=this.register(new p.OptionsService(E)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(s.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(_.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(m.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(v.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((T,M)=>this._inputHandler.parse(T,M))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(E,T){this._writeBuffer.write(E,T)}writeSync(E,T){this._logService.logLevel<=u.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(E,T)}resize(E,T){isNaN(E)||isNaN(T)||(E=Math.max(E,f.MINIMUM_COLS),T=Math.max(T,f.MINIMUM_ROWS),this._bufferService.resize(E,T))}scroll(E,T=!1){this._bufferService.scroll(E,T)}scrollLines(E,T,M){this._bufferService.scrollLines(E,T,M)}scrollPages(E){this.scrollLines(E*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(E){let T=E-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(E,T){return this._inputHandler.registerEscHandler(E,T)}registerDcsHandler(E,T){return this._inputHandler.registerDcsHandler(E,T)}registerCsiHandler(E,T){return this._inputHandler.registerCsiHandler(E,T)}registerOscHandler(E,T){return this._inputHandler.registerOscHandler(E,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let E=!1,T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?E=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(E=!0),E?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let E=[];E.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),E.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,l.toDisposable)(()=>{for(let T of E)T.dispose()})}}}a.CoreTerminal=b},8460:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===r)return void this._listeners.splice(l,1)}}})),this._event}fire(r,l){let u=[];for(let i=0;i<this._listeners.length;i++)u.push(this._listeners[i]);for(let i=0;i<u.length;i++)u[i].call(void 0,r,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(r,l){return r(u=>l.fire(u))}},5435:function(h,a,r){var l=this&&this.__decorate||function(R,A,I,$){var H,P=arguments.length,q=P<3?A:$===null?$=Object.getOwnPropertyDescriptor(A,I):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(R,A,I,$);else for(var G=R.length-1;G>=0;G--)(H=R[G])&&(q=(P<3?H(q):P>3?H(A,I,q):H(A,I))||q);return P>3&&q&&Object.defineProperty(A,I,q),q},u=this&&this.__param||function(R,A){return function(I,$){A(I,$,R)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;let i=r(2584),s=r(7116),f=r(2015),p=r(844),d=r(482),c=r(8437),_=r(8460),m=r(643),v=r(511),y=r(3734),C=r(2585),S=r(6242),D=r(6351),g=r(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},F=131072;function E(R,A){if(R>24)return A.setWinLines||!1;switch(R){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var T;(function(R){R[R.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",R[R.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(a.WindowsOptionsReportType=T={}));let M=0;class w extends p.Disposable{getAttrData(){return this._curAttrData}constructor(A,I,$,H,P,q,G,N,Q=new f.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=I,this._coreService=$,this._logService=H,this._optionsService=P,this._oscLinkService=q,this._coreMouseService=G,this._unicodeService=N,this._parser=Q,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new v.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new _.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new _.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new _.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new _.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new _.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new _.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new _.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new _.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new _.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new _.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new _.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new _.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new _.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new x(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,B)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:B.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,B,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:B,data:U})}),this._parser.setDcsHandlerFallback((O,B,U)=>{B==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:B,payload:U})}),this._parser.setPrintHandler((O,B,U)=>this.print(O,B,U)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(i.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(i.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(i.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(i.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(i.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(i.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(i.C1.IND,()=>this.index()),this._parser.setExecuteHandler(i.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(i.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new S.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new S.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new S.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new S.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new S.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new S.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new S.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new S.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new S.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new S.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new S.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let O in s.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((O,B)=>this.requestStatusString(O,B)))}_preserveStack(A,I,$,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=$,this._parseStack.position=H}_logSlowResolvingAsync(A){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([A,new Promise((I,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,I){let $,H=this._activeBuffer.x,P=this._activeBuffer.y,q=0,G=this._parseStack.paused;if(G){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync($),$;H=this._parseStack.cursorStartX,P=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>F&&(q=this._parseStack.position+F)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,N=>String.fromCharCode(N)).join("")}"`),typeof A=="string"?A.split("").map(N=>N.charCodeAt(0)):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<F&&(this._parseBuffer=new Uint32Array(Math.min(A.length,F))),G||this._dirtyRowTracker.clearRange(),A.length>F)for(let N=q;N<A.length;N+=F){let Q=N+F<A.length?N+F:A.length,O=typeof A=="string"?this._stringDecoder.decode(A.substring(N,Q),this._parseBuffer):this._utf8Decoder.decode(A.subarray(N,Q),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,O))return this._preserveStack(H,P,O,N),this._logSlowResolvingAsync($),$}else if(!G){let N=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,N))return this._preserveStack(H,P,N,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===H&&this._activeBuffer.y===P||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,I,$){let H,P,q=this._charsetService.charset,G=this._optionsService.rawOptions.screenReaderMode,N=this._bufferService.cols,Q=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,B=this._curAttrData,U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-I>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodePoint(this._activeBuffer.x-1,0,1,B.fg,B.bg,B.extended);for(let k=I;k<$;++k){if(H=A[k],P=this._unicodeService.wcwidth(H),H<127&&q){let te=q[String.fromCharCode(H)];te&&(H=te.charCodeAt(0))}if(G&&this._onA11yChar.fire((0,d.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),P||!this._activeBuffer.x){if(this._activeBuffer.x+P-1>=N){if(Q){for(;this._activeBuffer.x<N;)U.setCellFromCodePoint(this._activeBuffer.x++,0,1,B.fg,B.bg,B.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=N-1,P===2)continue}if(O&&(U.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(B),B),U.getWidth(N-1)===2&&U.setCellFromCodePoint(N-1,m.NULL_CELL_CODE,m.NULL_CELL_WIDTH,B.fg,B.bg,B.extended)),U.setCellFromCodePoint(this._activeBuffer.x++,H,P,B.fg,B.bg,B.extended),P>0)for(;--P;)U.setCellFromCodePoint(this._activeBuffer.x++,0,0,B.fg,B.bg,B.extended)}else U.getWidth(this._activeBuffer.x-1)?U.addCodepointToCell(this._activeBuffer.x-1,H):U.addCodepointToCell(this._activeBuffer.x-2,H)}$-I>0&&(U.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<N&&$-I>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodePoint(this._activeBuffer.x,0,1,B.fg,B.bg,B.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,I){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,I):this._parser.registerCsiHandler(A,$=>!E($.params[0],this._optionsService.rawOptions.windowOptions)||I($))}registerDcsHandler(A,I){return this._parser.registerDcsHandler(A,new D.DcsHandler(I))}registerEscHandler(A,I){return this._parser.registerEscHandler(A,I)}registerOscHandler(A,I){return this._parser.registerOscHandler(A,new S.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=A,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+I)}cursorUp(A){let I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){let I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){let I=A.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){let I=A.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,I,$,H=!1,P=!1){let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);q.replaceCells(I,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),P),H&&(q.isWrapped=!1)}_resetBufferLine(A,I=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),$.isWrapped=!1)}eraseInDisplay(A,I=!1){let $;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);$<this._bufferService.rows;$++)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 3:let H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(A,I=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;I--;)this._activeBuffer.lines.splice(P-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;I--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;let I=A.params[0]||1,$=new Uint32Array(I);for(let H=0;H<I;++H)$[H]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(i.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(i.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(i.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(i.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(i.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,s.DEFAULT_CHARSET),this._charsetService.setgCharset(1,s.DEFAULT_CHARSET),this._charsetService.setgCharset(2,s.DEFAULT_CHARSET),this._charsetService.setgCharset(3,s.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,I){let $=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:P}=this._coreMouseService,q=this._coreService,{buffers:G,cols:N}=this._bufferService,{active:Q,alt:O}=G,B=this._optionsService.rawOptions,U=ye=>ye?1:2,k=A.params[0];return te=k,J=I?k===2?4:k===4?U(q.modes.insertMode):k===12?3:k===20?U(B.convertEol):0:k===1?U($.applicationCursorKeys):k===3?B.windowOptions.setWinLines?N===80?2:N===132?1:0:0:k===6?U($.origin):k===7?U($.wraparound):k===8?3:k===9?U(H==="X10"):k===12?U(B.cursorBlink):k===25?U(!q.isCursorHidden):k===45?U($.reverseWraparound):k===66?U($.applicationKeypad):k===67?4:k===1e3?U(H==="VT200"):k===1002?U(H==="DRAG"):k===1003?U(H==="ANY"):k===1004?U($.sendFocus):k===1005?4:k===1006?U(P==="SGR"):k===1015?4:k===1016?U(P==="SGR_PIXELS"):k===1048?1:k===47||k===1047||k===1049?U(Q===O):k===2004?U($.bracketedPasteMode):0,q.triggerDataEvent(`${i.C0.ESC}[${I?"":"?"}${te};${J}$y`),!0;var te,J}_updateAttrColor(A,I,$,H,P){return I===2?(A|=50331648,A&=-16777216,A|=y.AttributeData.fromColorRGB([$,H,P])):I===5&&(A&=-50331904,A|=33554432|255&$),A}_extractColor(A,I,$){let H=[0,0,-1,0,0,0],P=0,q=0;do{if(H[q+P]=A.params[I+q],A.hasSubParams(I+q)){let G=A.getSubParams(I+q),N=0;do H[1]===5&&(P=1),H[q+N+1+P]=G[N];while(++N<G.length&&N+q+1+P<H.length);break}if(H[1]===5&&q+P>=2||H[1]===2&&q+P>=5)break;H[1]&&(P=1)}while(++q+I<A.length&&q+P<H.length);for(let G=2;G<H.length;++G)H[G]===-1&&(H[G]=0);switch(H[0]){case 38:$.fg=this._updateAttrColor($.fg,H[1],H[3],H[4],H[5]);break;case 48:$.bg=this._updateAttrColor($.bg,H[1],H[3],H[4],H[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,H[1],H[3],H[4],H[5])}return q}_processUnderline(A,I){I.extended=I.extended.clone(),(!~A||A>5)&&(A=1),I.extended.underlineStyle=A,I.fg|=268435456,A===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(A){A.fg=c.DEFAULT_ATTR_DATA.fg,A.bg=c.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;let I=A.length,$,H=this._curAttrData;for(let P=0;P<I;P++)$=A.params[P],$>=30&&$<=37?(H.fg&=-50331904,H.fg|=16777216|$-30):$>=40&&$<=47?(H.bg&=-50331904,H.bg|=16777216|$-40):$>=90&&$<=97?(H.fg&=-50331904,H.fg|=16777224|$-90):$>=100&&$<=107?(H.bg&=-50331904,H.bg|=16777224|$-100):$===0?this._processSGR0(H):$===1?H.fg|=134217728:$===3?H.bg|=67108864:$===4?(H.fg|=268435456,this._processUnderline(A.hasSubParams(P)?A.getSubParams(P)[0]:1,H)):$===5?H.fg|=536870912:$===7?H.fg|=67108864:$===8?H.fg|=1073741824:$===9?H.fg|=2147483648:$===2?H.bg|=134217728:$===21?this._processUnderline(2,H):$===22?(H.fg&=-134217729,H.bg&=-134217729):$===23?H.bg&=-67108865:$===24?(H.fg&=-268435457,this._processUnderline(0,H)):$===25?H.fg&=-536870913:$===27?H.fg&=-67108865:$===28?H.fg&=-1073741825:$===29?H.fg&=2147483647:$===39?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):$===49?(H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?P+=this._extractColor(A,P,H):$===53?H.bg|=1073741824:$===55?H.bg&=-1073741825:$===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):$===100?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${i.C0.ESC}[0n`);break;case 6:let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${i.C0.ESC}[${I};${$}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${i.C0.ESC}[?${I};${$}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){let I=A.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let $=I%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(A){let I=A.params[0]||1,$;return(A.length<2||($=A.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(A){if(!E(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;let I=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${i.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){let I=[],$=A.split(";");for(;$.length>1;){let H=$.shift(),P=$.shift();if(/^\d+$/.exec(H)){let q=parseInt(H);if(L(q))if(P==="?")I.push({type:0,index:q});else{let G=(0,g.parseColor)(P);G&&I.push({type:1,index:q,color:G})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(A){let I=A.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(A,I){this._getCurrentLinkId()&&this._finishHyperlink();let $=A.split(":"),H,P=$.findIndex(q=>q.startsWith("id="));return P!==-1&&(H=$[P].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,I){let $=A.split(";");for(let H=0;H<$.length&&!(I>=this._specialColors.length);++H,++I)if($[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{let P=(0,g.parseColor)($[H]);P&&this._onColor.fire([{type:1,index:this._specialColors[I],color:P}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;let I=[],$=A.split(";");for(let H=0;H<$.length;++H)if(/^\d+$/.exec($[H])){let P=parseInt($[H]);L(P)&&I.push({type:2,index:P})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,s.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(b[A[0]],s.CHARSETS[A[1]]||s.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){let A=new v.CellData;A.content=4194373,A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){let $=this._activeBuffer.ybase+this._activeBuffer.y+I,H=this._activeBuffer.lines.get($);H&&(H.fill(A),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,I){let $=this._bufferService.buffer,H=this._optionsService.rawOptions;return(P=>(this._coreService.triggerDataEvent(`${i.C0.ESC}${P}${i.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,I){this._dirtyRowTracker.markRangeDirty(A,I)}}a.InputHandler=w;let x=class{constructor(R){this._bufferService=R,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(R){R<this.start?this.start=R:R>this.end&&(this.end=R)}markRangeDirty(R,A){R>A&&(M=R,R=A,A=M),R<this.start&&(this.start=R),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function L(R){return 0<=R&&R<256}x=l([u(0,C.IBufferService)],x)},844:(h,a)=>{function r(l){for(let u of l)u.dispose();l.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){let u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var u;this._isDisposed||l===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},a.toDisposable=function(l){return{dispose:l}},a.disposeArray=r,a.getDisposeArrayDisposable=function(l){return{dispose:()=>r(l)}}},1505:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(u,i,s){this._data[u]||(this._data[u]={}),this._data[u][i]=s}get(u,i){return this._data[u]?this._data[u][i]:void 0}clear(){this._data={}}}a.TwoKeyMap=r,a.FourKeyMap=class{constructor(){this._data=new r}set(l,u,i,s,f){this._data.get(l,u)||this._data.set(l,u,new r),this._data.get(l,u).set(i,s,f)}get(l,u,i,s){var f;return(f=this._data.get(l,u))===null||f===void 0?void 0:f.get(i,s)}clear(){this._data.clear()}}},6114:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof navigator>"u";let r=a.isNode?"node":navigator.userAgent,l=a.isNode?"node":navigator.platform;a.isFirefox=r.includes("Firefox"),a.isLegacyEdge=r.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(r),a.getSafariVersion=function(){if(!a.isSafari)return 0;let u=r.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),a.isIpad=l==="iPad",a.isIphone=l==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),a.isLinux=l.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(r)},6106:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let r=0;a.SortedList=class{constructor(l){this._getKey=l,this._array=[]}clear(){this._array.length=0}insert(l){this._array.length!==0?(r=this._search(this._getKey(l)),this._array.splice(r,0,l)):this._array.push(l)}delete(l){if(this._array.length===0)return!1;let u=this._getKey(l);if(u===void 0||(r=this._search(u),r===-1)||this._getKey(this._array[r])!==u)return!1;do if(this._array[r]===l)return this._array.splice(r,1),!0;while(++r<this._array.length&&this._getKey(this._array[r])===u);return!1}*getKeyIterator(l){if(this._array.length!==0&&(r=this._search(l),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===l))do yield this._array[r];while(++r<this._array.length&&this._getKey(this._array[r])===l)}forEachByKey(l,u){if(this._array.length!==0&&(r=this._search(l),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===l))do u(this._array[r]);while(++r<this._array.length&&this._getKey(this._array[r])===l)}values(){return[...this._array].values()}_search(l){let u=0,i=this._array.length-1;for(;i>=u;){let s=u+i>>1,f=this._getKey(this._array[s]);if(f>l)i=s-1;else{if(!(f<l)){for(;s>0&&this._getKey(this._array[s-1])===l;)s--;return s}u=s+1}}return u}}},7226:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;let l=r(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let p=0,d=0,c=f.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),d=Math.max(p,d),_=f.timeRemaining(),1.5*d>_)return c-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-p))}ms`),void this._start();c=_}this.clear()}}class i extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let p=Date.now()+f;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}a.PriorityTaskQueue=i,a.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(s){return requestIdleCallback(s)}_cancelCallback(s){cancelIdleCallback(s)}}:i,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(s){this._queue.clear(),this._queue.enqueue(s)}flush(){this._queue.flush()}}},9282:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;let l=r(643);a.updateWindowsModeWrappedState=function(u){let i=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),s=i?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&s&&(f.isWrapped=s[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&s[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(i){return[i>>>16&255,i>>>8&255,255&i]}static fromColorRGB(i){return(255&i[0])<<16|(255&i[1])<<8|255&i[2]}clone(){let i=new r;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}a.AttributeData=r;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(i){this._ext&=-67108864,this._ext|=67108863&i}get urlId(){return this._urlId}set urlId(i){this._urlId=i}constructor(i=0,s=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=s}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=l},9092:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;let l=r(6349),u=r(7226),i=r(3734),s=r(8437),f=r(4634),p=r(511),d=r(643),c=r(4863),_=r(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(m,v,y){this._hasScrollback=m,this._optionsService=v,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=s.DEFAULT_ATTR_DATA.clone(),this.savedCharset=_.DEFAULT_CHARSET,this.markers=[],this._nullCell=p.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=p.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(m){return m?(this._nullCell.fg=m.fg,this._nullCell.bg=m.bg,this._nullCell.extended=m.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new i.ExtendedAttrs),this._nullCell}getWhitespaceCell(m){return m?(this._whitespaceCell.fg=m.fg,this._whitespaceCell.bg=m.bg,this._whitespaceCell.extended=m.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new i.ExtendedAttrs),this._whitespaceCell}getBlankLine(m,v){return new s.BufferLine(this._bufferService.cols,this.getNullCell(m),v)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let m=this.ybase+this.y-this.ydisp;return m>=0&&m<this._rows}_getCorrectBufferLength(m){if(!this._hasScrollback)return m;let v=m+this._optionsService.rawOptions.scrollback;return v>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:v}fillViewportRows(m){if(this.lines.length===0){m===void 0&&(m=s.DEFAULT_ATTR_DATA);let v=this._rows;for(;v--;)this.lines.push(this.getBlankLine(m))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(m,v){let y=this.getNullCell(s.DEFAULT_ATTR_DATA),C=0,S=this._getCorrectBufferLength(v);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<m)for(let g=0;g<this.lines.length;g++)C+=+this.lines.get(g).resize(m,y);let D=0;if(this._rows<v)for(let g=this._rows;g<v;g++)this.lines.length<v+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new s.BufferLine(m,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new s.BufferLine(m,y)));else for(let g=this._rows;g>v;g--)this.lines.length>v+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let g=this.lines.length-S;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=S}this.x=Math.min(this.x,m-1),this.y=Math.min(this.y,v-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,m-1),this.scrollTop=0}if(this.scrollBottom=v-1,this._isReflowEnabled&&(this._reflow(m,v),this._cols>m))for(let D=0;D<this.lines.length;D++)C+=+this.lines.get(D).resize(m,y);this._cols=m,this._rows=v,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let m=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,m=!1);let v=0;for(;this._memoryCleanupPosition<this.lines.length;)if(v+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),v>100)return!0;return m}get _isReflowEnabled(){let m=this._optionsService.rawOptions.windowsPty;return m&&m.buildNumber?this._hasScrollback&&m.backend==="conpty"&&m.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(m,v){this._cols!==m&&(m>this._cols?this._reflowLarger(m,v):this._reflowSmaller(m,v))}_reflowLarger(m,v){let y=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,m,this.ybase+this.y,this.getNullCell(s.DEFAULT_ATTR_DATA));if(y.length>0){let C=(0,f.reflowLargerCreateNewLayout)(this.lines,y);(0,f.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(m,v,C.countRemoved)}}_reflowLargerAdjustViewport(m,v,y){let C=this.getNullCell(s.DEFAULT_ATTR_DATA),S=y;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<v&&this.lines.push(new s.BufferLine(m,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(m,v){let y=this.getNullCell(s.DEFAULT_ATTR_DATA),C=[],S=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=m)continue;let b=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),b.unshift(g);let F=this.ybase+this.y;if(F>=D&&F<D+b.length)continue;let E=b[b.length-1].getTrimmedLength(),T=(0,f.reflowSmallerGetNewLineLengths)(b,this._cols,m),M=T.length-b.length,w;w=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let x=[];for(let H=0;H<M;H++){let P=this.getBlankLine(s.DEFAULT_ATTR_DATA,!0);x.push(P)}x.length>0&&(C.push({start:D+b.length+S,newLines:x}),S+=x.length),b.push(...x);let L=T.length-1,R=T[L];R===0&&(L--,R=T[L]);let A=b.length-M-1,I=E;for(;A>=0;){let H=Math.min(I,R);if(b[L]===void 0)break;if(b[L].copyCellsFrom(b[A],I-H,R-H,H,!0),R-=H,R===0&&(L--,R=T[L]),I-=H,I===0){A--;let P=Math.max(A,0);I=(0,f.getWrappedLineTrimmedLength)(b,P,this._cols)}}for(let H=0;H<b.length;H++)T[H]<m&&b[H].setCell(T[H],y);let $=M-w;for(;$-- >0;)this.ybase===0?this.y<v-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-v&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+v-1)}if(C.length>0){let D=[],g=[];for(let L=0;L<this.lines.length;L++)g.push(this.lines.get(L));let b=this.lines.length,F=b-1,E=0,T=C[E];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let M=0;for(let L=Math.min(this.lines.maxLength-1,b+S-1);L>=0;L--)if(T&&T.start>F+M){for(let R=T.newLines.length-1;R>=0;R--)this.lines.set(L--,T.newLines[R]);L++,D.push({index:F+1,amount:T.newLines.length}),M+=T.newLines.length,T=C[++E]}else this.lines.set(L,g[F--]);let w=0;for(let L=D.length-1;L>=0;L--)D[L].index+=w,this.lines.onInsertEmitter.fire(D[L]),w+=D[L].amount;let x=Math.max(0,b+S-this.lines.maxLength);x>0&&this.lines.onTrimEmitter.fire(x)}}translateBufferLineToString(m,v,y=0,C){let S=this.lines.get(m);return S?S.translateToString(v,y,C):""}getWrappedRangeForLine(m){let v=m,y=m;for(;v>0&&this.lines.get(v).isWrapped;)v--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:v,last:y}}setupTabStops(m){for(m!=null?this.tabs[m]||(m=this.prevStop(m)):(this.tabs={},m=0);m<this._cols;m+=this._optionsService.rawOptions.tabStopWidth)this.tabs[m]=!0}prevStop(m){for(m==null&&(m=this.x);!this.tabs[--m]&&m>0;);return m>=this._cols?this._cols-1:m<0?0:m}nextStop(m){for(m==null&&(m=this.x);!this.tabs[++m]&&m<this._cols;);return m>=this._cols?this._cols-1:m<0?0:m}clearMarkers(m){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].line===m&&(this.markers[v].dispose(),this.markers.splice(v--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].dispose(),this.markers.splice(m--,1);this._isClearing=!1}addMarker(m){let v=new c.Marker(m);return this.markers.push(v),v.register(this.lines.onTrim(y=>{v.line-=y,v.line<0&&v.dispose()})),v.register(this.lines.onInsert(y=>{v.line>=y.index&&(v.line+=y.amount)})),v.register(this.lines.onDelete(y=>{v.line>=y.index&&v.line<y.index+y.amount&&v.dispose(),v.line>y.index&&(v.line-=y.amount)})),v.register(v.onDispose(()=>this._removeMarker(v))),v}_removeMarker(m){this._isClearing||this.markers.splice(this.markers.indexOf(m),1)}}},8437:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;let l=r(3734),u=r(511),i=r(643),s=r(482);a.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let f=0;class p{constructor(c,_,m=!1){this.isWrapped=m,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);let v=_||u.CellData.fromCharData([0,i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE]);for(let y=0;y<c;++y)this.setCell(y,v);this.length=c}get(c){let _=this._data[3*c+0],m=2097151&_;return[this._data[3*c+1],2097152&_?this._combined[c]:m?(0,s.stringFromCodePoint)(m):"",_>>22,2097152&_?this._combined[c].charCodeAt(this._combined[c].length-1):m]}set(c,_){this._data[3*c+1]=_[i.CHAR_DATA_ATTR_INDEX],_[i.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=_[1],this._data[3*c+0]=2097152|c|_[i.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=_[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[i.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){let _=this._data[3*c+0];return 2097152&_?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&_}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){let _=this._data[3*c+0];return 2097152&_?this._combined[c]:2097151&_?(0,s.stringFromCodePoint)(2097151&_):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,_){return f=3*c,_.content=this._data[f+0],_.fg=this._data[f+1],_.bg=this._data[f+2],2097152&_.content&&(_.combinedData=this._combined[c]),268435456&_.bg&&(_.extended=this._extendedAttrs[c]),_}setCell(c,_){2097152&_.content&&(this._combined[c]=_.combinedData),268435456&_.bg&&(this._extendedAttrs[c]=_.extended),this._data[3*c+0]=_.content,this._data[3*c+1]=_.fg,this._data[3*c+2]=_.bg}setCellFromCodePoint(c,_,m,v,y,C){268435456&y&&(this._extendedAttrs[c]=C),this._data[3*c+0]=_|m<<22,this._data[3*c+1]=v,this._data[3*c+2]=y}addCodepointToCell(c,_){let m=this._data[3*c+0];2097152&m?this._combined[c]+=(0,s.stringFromCodePoint)(_):(2097151&m?(this._combined[c]=(0,s.stringFromCodePoint)(2097151&m)+(0,s.stringFromCodePoint)(_),m&=-2097152,m|=2097152):m=_|4194304,this._data[3*c+0]=m)}insertCells(c,_,m,v){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),_<this.length-c){let y=new u.CellData;for(let C=this.length-c-_-1;C>=0;--C)this.setCell(c+_+C,this.loadCell(c+C,y));for(let C=0;C<_;++C)this.setCell(c+C,m)}else for(let y=c;y<this.length;++y)this.setCell(y,m);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs)}deleteCells(c,_,m,v){if(c%=this.length,_<this.length-c){let y=new u.CellData;for(let C=0;C<this.length-c-_;++C)this.setCell(c+C,this.loadCell(c+_+C,y));for(let C=this.length-_;C<this.length;++C)this.setCell(C,m)}else for(let y=c;y<this.length;++y)this.setCell(y,m);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs)}replaceCells(c,_,m,v,y=!1){if(y)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&!this.isProtected(_)&&this.setCellFromCodePoint(_,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs);c<_&&c<this.length;)this.isProtected(c)||this.setCell(c,m),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&this.setCellFromCodePoint(_,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs);c<_&&c<this.length;)this.setCell(c++,m)}resize(c,_){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let m=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*m)this._data=new Uint32Array(this._data.buffer,0,m);else{let v=new Uint32Array(m);v.set(this._data),this._data=v}for(let v=this.length;v<c;++v)this.setCell(v,_)}else{this._data=this._data.subarray(0,m);let v=Object.keys(this._combined);for(let C=0;C<v.length;C++){let S=parseInt(v[C],10);S>=c&&delete this._combined[S]}let y=Object.keys(this._extendedAttrs);for(let C=0;C<y.length;C++){let S=parseInt(y[C],10);S>=c&&delete this._extendedAttrs[S]}}return this.length=c,4*m*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,_=!1){if(_)for(let m=0;m<this.length;++m)this.isProtected(m)||this.setCell(m,c);else{this._combined={},this._extendedAttrs={};for(let m=0;m<this.length;++m)this.setCell(m,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(let _ in c._combined)this._combined[_]=c._combined[_];this._extendedAttrs={};for(let _ in c._extendedAttrs)this._extendedAttrs[_]=c._extendedAttrs[_];this.isWrapped=c.isWrapped}clone(){let c=new p(0);c._data=new Uint32Array(this._data),c.length=this.length;for(let _ in this._combined)c._combined[_]=this._combined[_];for(let _ in this._extendedAttrs)c._extendedAttrs[_]=this._extendedAttrs[_];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,_,m,v,y){let C=c._data;if(y)for(let D=v-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(m+D)+g]=C[3*(_+D)+g];268435456&C[3*(_+D)+2]&&(this._extendedAttrs[m+D]=c._extendedAttrs[_+D])}else for(let D=0;D<v;D++){for(let g=0;g<3;g++)this._data[3*(m+D)+g]=C[3*(_+D)+g];268435456&C[3*(_+D)+2]&&(this._extendedAttrs[m+D]=c._extendedAttrs[_+D])}let S=Object.keys(c._combined);for(let D=0;D<S.length;D++){let g=parseInt(S[D],10);g>=_&&(this._combined[g-_+m]=c._combined[g])}}translateToString(c=!1,_=0,m=this.length){c&&(m=Math.min(m,this.getTrimmedLength()));let v="";for(;_<m;){let y=this._data[3*_+0],C=2097151&y;v+=2097152&y?this._combined[_]:C?(0,s.stringFromCodePoint)(C):i.WHITESPACE_CELL_CHAR,_+=y>>22||1}return v}}a.BufferLine=p},4841:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(r,l){if(r.start.y>r.end.y)throw new Error(`Buffer range end (${r.end.x}, ${r.end.y}) cannot be before start (${r.start.x}, ${r.start.y})`);return l*(r.end.y-r.start.y)+(r.end.x-r.start.x+1)}},4634:(h,a)=>{function r(l,u,i){if(u===l.length-1)return l[u].getTrimmedLength();let s=!l[u].hasContent(i-1)&&l[u].getWidth(i-1)===1,f=l[u+1].getWidth(0)===2;return s&&f?i-1:i}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(l,u,i,s,f){let p=[];for(let d=0;d<l.length-1;d++){let c=d,_=l.get(++c);if(!_.isWrapped)continue;let m=[l.get(d)];for(;c<l.length&&_.isWrapped;)m.push(_),_=l.get(++c);if(s>=d&&s<c){d+=m.length-1;continue}let v=0,y=r(m,v,u),C=1,S=0;for(;C<m.length;){let g=r(m,C,u),b=g-S,F=i-y,E=Math.min(b,F);m[v].copyCellsFrom(m[C],S,y,E,!1),y+=E,y===i&&(v++,y=0),S+=E,S===g&&(C++,S=0),y===0&&v!==0&&m[v-1].getWidth(i-1)===2&&(m[v].copyCellsFrom(m[v-1],i-1,y++,1,!1),m[v-1].setCell(i-1,f))}m[v].replaceCells(y,i,f);let D=0;for(let g=m.length-1;g>0&&(g>v||m[g].getTrimmedLength()===0);g--)D++;D>0&&(p.push(d+m.length-D),p.push(D)),d+=m.length-1}return p},a.reflowLargerCreateNewLayout=function(l,u){let i=[],s=0,f=u[s],p=0;for(let d=0;d<l.length;d++)if(f===d){let c=u[++s];l.onDeleteEmitter.fire({index:d-p,amount:c}),d+=c-1,p+=c,f=u[++s]}else i.push(d);return{layout:i,countRemoved:p}},a.reflowLargerApplyNewLayout=function(l,u){let i=[];for(let s=0;s<u.length;s++)i.push(l.get(u[s]));for(let s=0;s<i.length;s++)l.set(s,i[s]);l.length=u.length},a.reflowSmallerGetNewLineLengths=function(l,u,i){let s=[],f=l.map((_,m)=>r(l,m,u)).reduce((_,m)=>_+m),p=0,d=0,c=0;for(;c<f;){if(f-c<i){s.push(f-c);break}p+=i;let _=r(l,d,u);p>_&&(p-=_,d++);let m=l[d].getWidth(p-1)===2;m&&p--;let v=m?i-1:i;s.push(v),c+=v}return s},a.getWrappedLineTrimmedLength=r},5295:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;let l=r(8460),u=r(844),i=r(9092);class s extends u.Disposable{constructor(p,d){super(),this._optionsService=p,this._bufferService=d,this._onBufferActivate=this.register(new l.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new i.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new i.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(p){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(p),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(p,d){this._normal.resize(p,d),this._alt.resize(p,d),this.setupTabStops(p)}setupTabStops(p){this._normal.setupTabStops(p),this._alt.setupTabStops(p)}}a.BufferSet=s},511:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;let l=r(482),u=r(643),i=r(3734);class s extends i.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new i.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let d=new s;return d.setFromCharData(p),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(p[u.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(p[u.CHAR_DATA_CHAR_INDEX].length===2){let c=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let _=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(c-55296)+_-56320+65536|p[u.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[u.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=p[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=s},643:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;let l=r(8460),u=r(844);class i{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=i._nextId++,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}a.Marker=i,i._nextId=1},7116:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},a.CHARSETS.A={"#":"\xA3"},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},a.CHARSETS.C=a.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},a.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},a.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},a.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},a.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},a.CHARSETS.E=a.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},a.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},a.CHARSETS.H=a.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},a.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(h,a)=>{var r,l,u;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(i){i.NUL="\0",i.SOH="",i.STX="",i.ETX="",i.EOT="",i.ENQ="",i.ACK="",i.BEL="\x07",i.BS="\b",i.HT="	",i.LF=`
`,i.VT="\v",i.FF="\f",i.CR="\r",i.SO="",i.SI="",i.DLE="",i.DC1="",i.DC2="",i.DC3="",i.DC4="",i.NAK="",i.SYN="",i.ETB="",i.CAN="",i.EM="",i.SUB="",i.ESC="\x1B",i.FS="",i.GS="",i.RS="",i.US="",i.SP=" ",i.DEL="\x7F"}(r||(a.C0=r={})),function(i){i.PAD="\x80",i.HOP="\x81",i.BPH="\x82",i.NBH="\x83",i.IND="\x84",i.NEL="\x85",i.SSA="\x86",i.ESA="\x87",i.HTS="\x88",i.HTJ="\x89",i.VTS="\x8A",i.PLD="\x8B",i.PLU="\x8C",i.RI="\x8D",i.SS2="\x8E",i.SS3="\x8F",i.DCS="\x90",i.PU1="\x91",i.PU2="\x92",i.STS="\x93",i.CCH="\x94",i.MW="\x95",i.SPA="\x96",i.EPA="\x97",i.SOS="\x98",i.SGCI="\x99",i.SCI="\x9A",i.CSI="\x9B",i.ST="\x9C",i.OSC="\x9D",i.PM="\x9E",i.APC="\x9F"}(l||(a.C1=l={})),function(i){i.ST=`${r.ESC}\\`}(u||(a.C1_ESCAPED=u={}))},7399:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;let l=r(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(i,s,f,p){let d={type:0,cancel:!1,key:void 0},c=(i.shiftKey?1:0)|(i.altKey?2:0)|(i.ctrlKey?4:0)|(i.metaKey?8:0);switch(i.keyCode){case 0:i.key==="UIKeyInputUpArrow"?d.key=s?l.C0.ESC+"OA":l.C0.ESC+"[A":i.key==="UIKeyInputLeftArrow"?d.key=s?l.C0.ESC+"OD":l.C0.ESC+"[D":i.key==="UIKeyInputRightArrow"?d.key=s?l.C0.ESC+"OC":l.C0.ESC+"[C":i.key==="UIKeyInputDownArrow"&&(d.key=s?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(i.altKey){d.key=l.C0.ESC+l.C0.DEL;break}d.key=l.C0.DEL;break;case 9:if(i.shiftKey){d.key=l.C0.ESC+"[Z";break}d.key=l.C0.HT,d.cancel=!0;break;case 13:d.key=i.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,d.cancel=!0;break;case 27:d.key=l.C0.ESC,i.altKey&&(d.key=l.C0.ESC+l.C0.ESC),d.cancel=!0;break;case 37:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"D",d.key===l.C0.ESC+"[1;3D"&&(d.key=l.C0.ESC+(f?"b":"[1;5D"))):d.key=s?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"C",d.key===l.C0.ESC+"[1;3C"&&(d.key=l.C0.ESC+(f?"f":"[1;5C"))):d.key=s?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"A",f||d.key!==l.C0.ESC+"[1;3A"||(d.key=l.C0.ESC+"[1;5A")):d.key=s?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"B",f||d.key!==l.C0.ESC+"[1;3B"||(d.key=l.C0.ESC+"[1;5B")):d.key=s?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:i.shiftKey||i.ctrlKey||(d.key=l.C0.ESC+"[2~");break;case 46:d.key=c?l.C0.ESC+"[3;"+(c+1)+"~":l.C0.ESC+"[3~";break;case 36:d.key=c?l.C0.ESC+"[1;"+(c+1)+"H":s?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:d.key=c?l.C0.ESC+"[1;"+(c+1)+"F":s?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:i.shiftKey?d.type=2:i.ctrlKey?d.key=l.C0.ESC+"[5;"+(c+1)+"~":d.key=l.C0.ESC+"[5~";break;case 34:i.shiftKey?d.type=3:i.ctrlKey?d.key=l.C0.ESC+"[6;"+(c+1)+"~":d.key=l.C0.ESC+"[6~";break;case 112:d.key=c?l.C0.ESC+"[1;"+(c+1)+"P":l.C0.ESC+"OP";break;case 113:d.key=c?l.C0.ESC+"[1;"+(c+1)+"Q":l.C0.ESC+"OQ";break;case 114:d.key=c?l.C0.ESC+"[1;"+(c+1)+"R":l.C0.ESC+"OR";break;case 115:d.key=c?l.C0.ESC+"[1;"+(c+1)+"S":l.C0.ESC+"OS";break;case 116:d.key=c?l.C0.ESC+"[15;"+(c+1)+"~":l.C0.ESC+"[15~";break;case 117:d.key=c?l.C0.ESC+"[17;"+(c+1)+"~":l.C0.ESC+"[17~";break;case 118:d.key=c?l.C0.ESC+"[18;"+(c+1)+"~":l.C0.ESC+"[18~";break;case 119:d.key=c?l.C0.ESC+"[19;"+(c+1)+"~":l.C0.ESC+"[19~";break;case 120:d.key=c?l.C0.ESC+"[20;"+(c+1)+"~":l.C0.ESC+"[20~";break;case 121:d.key=c?l.C0.ESC+"[21;"+(c+1)+"~":l.C0.ESC+"[21~";break;case 122:d.key=c?l.C0.ESC+"[23;"+(c+1)+"~":l.C0.ESC+"[23~";break;case 123:d.key=c?l.C0.ESC+"[24;"+(c+1)+"~":l.C0.ESC+"[24~";break;default:if(!i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)if(f&&!p||!i.altKey||i.metaKey)!f||i.altKey||i.ctrlKey||i.shiftKey||!i.metaKey?i.key&&!i.ctrlKey&&!i.altKey&&!i.metaKey&&i.keyCode>=48&&i.key.length===1?d.key=i.key:i.key&&i.ctrlKey&&(i.key==="_"&&(d.key=l.C0.US),i.key==="@"&&(d.key=l.C0.NUL)):i.keyCode===65&&(d.type=1);else{let _=u[i.keyCode],m=_?.[i.shiftKey?1:0];if(m)d.key=l.C0.ESC+m;else if(i.keyCode>=65&&i.keyCode<=90){let v=i.ctrlKey?i.keyCode-64:i.keyCode+32,y=String.fromCharCode(v);i.shiftKey&&(y=y.toUpperCase()),d.key=l.C0.ESC+y}else if(i.keyCode===32)d.key=l.C0.ESC+(i.ctrlKey?l.C0.NUL:" ");else if(i.key==="Dead"&&i.code.startsWith("Key")){let v=i.code.slice(3,4);i.shiftKey||(v=v.toLowerCase()),d.key=l.C0.ESC+v,d.cancel=!0}}else i.keyCode>=65&&i.keyCode<=90?d.key=String.fromCharCode(i.keyCode-64):i.keyCode===32?d.key=l.C0.NUL:i.keyCode>=51&&i.keyCode<=55?d.key=String.fromCharCode(i.keyCode-51+27):i.keyCode===56?d.key=l.C0.DEL:i.keyCode===219?d.key=l.C0.ESC:i.keyCode===220?d.key=l.C0.FS:i.keyCode===221&&(d.key=l.C0.GS)}return d}},482:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},a.utf32ToString=function(r,l=0,u=r.length){let i="";for(let s=l;s<u;++s){let f=r[s];f>65535?(f-=65536,i+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):i+=String.fromCharCode(f)}return i},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,l){let u=r.length;if(!u)return 0;let i=0,s=0;if(this._interim){let f=r.charCodeAt(s++);56320<=f&&f<=57343?l[i++]=1024*(this._interim-55296)+f-56320+65536:(l[i++]=this._interim,l[i++]=f),this._interim=0}for(let f=s;f<u;++f){let p=r.charCodeAt(f);if(55296<=p&&p<=56319){if(++f>=u)return this._interim=p,i;let d=r.charCodeAt(f);56320<=d&&d<=57343?l[i++]=1024*(p-55296)+d-56320+65536:(l[i++]=p,l[i++]=d)}else p!==65279&&(l[i++]=p)}return i}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,l){let u=r.length;if(!u)return 0;let i,s,f,p,d=0,c=0,_=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)C<<=6,C|=S;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;_<b;){if(_>=u)return 0;if(S=r[_++],(192&S)!=128){_--,y=!0;break}this.interim[D++]=S,C<<=6,C|=63&S}y||(g===2?C<128?_--:l[d++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(l[d++]=C):C<65536||C>1114111||(l[d++]=C)),this.interim.fill(0)}let m=u-4,v=_;for(;v<u;){for(;!(!(v<m)||128&(i=r[v])||128&(s=r[v+1])||128&(f=r[v+2])||128&(p=r[v+3]));)l[d++]=i,l[d++]=s,l[d++]=f,l[d++]=p,v+=4;if(i=r[v++],i<128)l[d++]=i;else if((224&i)==192){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(c=(31&i)<<6|63&s,c<128){v--;continue}l[d++]=c}else if((240&i)==224){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[v++],(192&f)!=128){v--;continue}if(c=(15&i)<<12|(63&s)<<6|63&f,c<2048||c>=55296&&c<=57343||c===65279)continue;l[d++]=c}else if((248&i)==240){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[v++],(192&f)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=f,d;if(p=r[v++],(192&p)!=128){v--;continue}if(c=(7&i)<<18|(63&s)<<12|(63&f)<<6|63&p,c<65536||c>1114111)continue;l[d++]=c}}return d}}},225:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;let r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u;a.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let i=0;i<r.length;++i)u.fill(0,r[i][0],r[i][1]+1)}}wcwidth(i){return i<32?0:i<127?1:i<65536?u[i]:function(s,f){let p,d=0,c=f.length-1;if(s<f[0][0]||s>f[c][1])return!1;for(;c>=d;)if(p=d+c>>1,s>f[p][1])d=p+1;else{if(!(s<f[p][0]))return!0;c=p-1}return!1}(i,l)?0:i>=131072&&i<=196605||i>=196608&&i<=262141?2:1}}},5981:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;let l=r(8460),u=r(844);class i extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,p){if(p!==void 0&&this._syncCalls>p)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);let c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,p){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(p),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(p)}_innerWrite(f=0,p=!0){let d=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let c=this._writeBuffer[this._bufferOffset],_=this._action(c,p);if(_){let v=y=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(d,y);return void _.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(v)}let m=this._callbacks[this._bufferOffset];if(m&&m(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=i},5941:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;let r=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function u(i,s){let f=i.toString(16),p=f.length<2?"0"+f:f;switch(s){case 4:return f[0];case 8:return p;case 12:return(p+p).slice(0,3);default:return p+p}}a.parseColor=function(i){if(!i)return;let s=i.toLowerCase();if(s.indexOf("rgb:")===0){s=s.slice(4);let f=r.exec(s);if(f){let p=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/p*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/p*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/p*255)]}}else if(s.indexOf("#")===0&&(s=s.slice(1),l.exec(s)&&[3,6,9,12].includes(s.length))){let f=s.length/3,p=[0,0,0];for(let d=0;d<3;++d){let c=parseInt(s.slice(f*d,f*d+f),16);p[d]=f===1?c<<4:f===2?c:f===3?c>>4:c>>8}return p}},a.toRgbString=function(i,s=16){let[f,p,d]=i;return`rgb:${u(f,s)}/${u(p,s)}/${u(d,s)}`}},5770:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;let l=r(482),u=r(8742),i=r(5770),s=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=s}registerHandler(p,d){this._handlers[p]===void 0&&(this._handlers[p]=[]);let c=this._handlers[p];return c.push(d),{dispose:()=>{let _=c.indexOf(d);_!==-1&&c.splice(_,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}reset(){if(this._active.length)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=s,this._ident=0}hook(p,d){if(this.reset(),this._ident=p,this._active=this._handlers[p]||s,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(p,d,c){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(p,d,c);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(p,d,c))}unhook(p,d=!0){if(this._active.length){let c=!1,_=this._active.length-1,m=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,c=d,m=this._stack.fallThrough,this._stack.paused=!1),!m&&c===!1){for(;_>=0&&(c=this._active[_].unhook(p),c!==!0);_--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,c;_--}for(;_>=0;_--)if(c=this._active[_].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",p);this._active=s,this._ident=0}};let f=new u.Params;f.addParam(0),a.DcsHandler=class{constructor(p){this._handler=p,this._data="",this._params=f,this._hitLimit=!1}hook(p){this._params=p.length>1||p.params[0]?p.clone():f,this._data="",this._hitLimit=!1}put(p,d,c){this._hitLimit||(this._data+=(0,l.utf32ToString)(p,d,c),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(p){let d=!1;if(this._hitLimit)d=!1;else if(p&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(c=>(this._params=f,this._data="",this._hitLimit=!1,c));return this._params=f,this._data="",this._hitLimit=!1,d}}},2015:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;let l=r(844),u=r(8742),i=r(6242),s=r(6351);class f{constructor(_){this.table=new Uint8Array(_)}setDefault(_,m){this.table.fill(_<<4|m)}add(_,m,v,y){this.table[m<<8|_]=v<<4|y}addMany(_,m,v,y){for(let C=0;C<_.length;C++)this.table[m<<8|_[C]]=v<<4|y}}a.TransitionTable=f;let p=160;a.VT500_TRANSITION_TABLE=function(){let c=new f(4095),_=Array.apply(null,Array(256)).map((D,g)=>g),m=(D,g)=>_.slice(D,g),v=m(32,127),y=m(0,24);y.push(25),y.push.apply(y,m(28,32));let C=m(0,14),S;for(S in c.setDefault(1,0),c.addMany(v,0,2,0),C)c.addMany([24,26,153,154],S,3,0),c.addMany(m(128,144),S,3,0),c.addMany(m(144,152),S,3,0),c.add(156,S,0,0),c.add(27,S,11,1),c.add(157,S,4,8),c.addMany([152,158,159],S,0,7),c.add(155,S,11,3),c.add(144,S,11,9);return c.addMany(y,0,3,0),c.addMany(y,1,3,1),c.add(127,1,0,1),c.addMany(y,8,0,8),c.addMany(y,3,3,3),c.add(127,3,0,3),c.addMany(y,4,3,4),c.add(127,4,0,4),c.addMany(y,6,3,6),c.addMany(y,5,3,5),c.add(127,5,0,5),c.addMany(y,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(v,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(m(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(v,7,0,7),c.addMany(y,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(m(64,127),3,7,0),c.addMany(m(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(m(48,60),4,8,4),c.addMany(m(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(m(32,64),6,0,6),c.add(127,6,0,6),c.addMany(m(64,127),6,0,0),c.addMany(m(32,48),3,9,5),c.addMany(m(32,48),5,9,5),c.addMany(m(48,64),5,0,6),c.addMany(m(64,127),5,7,0),c.addMany(m(32,48),4,9,5),c.addMany(m(32,48),1,9,2),c.addMany(m(32,48),2,9,2),c.addMany(m(48,127),2,10,0),c.addMany(m(48,80),1,10,0),c.addMany(m(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(m(96,127),1,10,0),c.add(80,1,11,9),c.addMany(y,9,0,9),c.add(127,9,0,9),c.addMany(m(28,32),9,0,9),c.addMany(m(32,48),9,9,12),c.addMany(m(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(y,11,0,11),c.addMany(m(32,128),11,0,11),c.addMany(m(28,32),11,0,11),c.addMany(y,10,0,10),c.add(127,10,0,10),c.addMany(m(28,32),10,0,10),c.addMany(m(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(m(32,48),10,9,12),c.addMany(y,12,0,12),c.add(127,12,0,12),c.addMany(m(28,32),12,0,12),c.addMany(m(32,48),12,9,12),c.addMany(m(48,64),12,0,11),c.addMany(m(64,127),12,12,13),c.addMany(m(64,127),10,12,13),c.addMany(m(64,127),9,12,13),c.addMany(y,13,13,13),c.addMany(v,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(p,0,2,0),c.add(p,8,5,8),c.add(p,6,0,6),c.add(p,11,0,11),c.add(p,13,13,13),c}();class d extends l.Disposable{constructor(_=a.VT500_TRANSITION_TABLE){super(),this._transitions=_,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(m,v,y)=>{},this._executeHandlerFb=m=>{},this._csiHandlerFb=(m,v)=>{},this._escHandlerFb=m=>{},this._errorHandlerFb=m=>m,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,l.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new i.OscParser),this._dcsParser=this.register(new s.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(_,m=[64,126]){let v=0;if(_.prefix){if(_.prefix.length>1)throw new Error("only one byte as prefix supported");if(v=_.prefix.charCodeAt(0),v&&60>v||v>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(_.intermediates){if(_.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<_.intermediates.length;++C){let S=_.intermediates.charCodeAt(C);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");v<<=8,v|=S}}if(_.final.length!==1)throw new Error("final must be a single byte");let y=_.final.charCodeAt(0);if(m[0]>y||y>m[1])throw new Error(`final must be in range ${m[0]} .. ${m[1]}`);return v<<=8,v|=y,v}identToString(_){let m=[];for(;_;)m.push(String.fromCharCode(255&_)),_>>=8;return m.reverse().join("")}setPrintHandler(_){this._printHandler=_}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(_,m){let v=this._identifier(_,[48,126]);this._escHandlers[v]===void 0&&(this._escHandlers[v]=[]);let y=this._escHandlers[v];return y.push(m),{dispose:()=>{let C=y.indexOf(m);C!==-1&&y.splice(C,1)}}}clearEscHandler(_){this._escHandlers[this._identifier(_,[48,126])]&&delete this._escHandlers[this._identifier(_,[48,126])]}setEscHandlerFallback(_){this._escHandlerFb=_}setExecuteHandler(_,m){this._executeHandlers[_.charCodeAt(0)]=m}clearExecuteHandler(_){this._executeHandlers[_.charCodeAt(0)]&&delete this._executeHandlers[_.charCodeAt(0)]}setExecuteHandlerFallback(_){this._executeHandlerFb=_}registerCsiHandler(_,m){let v=this._identifier(_);this._csiHandlers[v]===void 0&&(this._csiHandlers[v]=[]);let y=this._csiHandlers[v];return y.push(m),{dispose:()=>{let C=y.indexOf(m);C!==-1&&y.splice(C,1)}}}clearCsiHandler(_){this._csiHandlers[this._identifier(_)]&&delete this._csiHandlers[this._identifier(_)]}setCsiHandlerFallback(_){this._csiHandlerFb=_}registerDcsHandler(_,m){return this._dcsParser.registerHandler(this._identifier(_),m)}clearDcsHandler(_){this._dcsParser.clearHandler(this._identifier(_))}setDcsHandlerFallback(_){this._dcsParser.setHandlerFallback(_)}registerOscHandler(_,m){return this._oscParser.registerHandler(_,m)}clearOscHandler(_){this._oscParser.clearHandler(_)}setOscHandlerFallback(_){this._oscParser.setHandlerFallback(_)}setErrorHandler(_){this._errorHandler=_}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(_,m,v,y,C){this._parseStack.state=_,this._parseStack.handlers=m,this._parseStack.handlerPos=v,this._parseStack.transition=y,this._parseStack.chunkPos=C}parse(_,m,v){let y,C=0,S=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(v===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let g=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(v===!1&&b>-1){for(;b>=0&&(y=g[b](this._params),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 4:if(v===!1&&b>-1){for(;b>=0&&(y=g[b](),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 6:if(C=_[this._parseStack.chunkPos],y=this._dcsParser.unhook(C!==24&&C!==26,v),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=_[this._parseStack.chunkPos],y=this._oscParser.end(C!==24&&C!==26,v),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<m;++g){switch(C=_[g],S=this._transitions.table[this.currentState<<8|(C<160?C:p)],S>>4){case 2:for(let M=g+1;;++M){if(M>=m||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}if(++M>=m||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}if(++M>=m||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}if(++M>=m||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let b=this._csiHandlers[this._collect<<8|C],F=b?b.length-1:-1;for(;F>=0&&(y=b[F](this._params),y!==!0);F--)if(y instanceof Promise)return this._preserveStack(3,b,F,S,g),y;F<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++g<m&&(C=_[g])>47&&C<60);g--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let E=this._escHandlers[this._collect<<8|C],T=E?E.length-1:-1;for(;T>=0&&(y=E[T](),y!==!0);T--)if(y instanceof Promise)return this._preserveStack(4,E,T,S,g),y;T<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let M=g+1;;++M)if(M>=m||(C=_[M])===24||C===26||C===27||C>127&&C<p){this._dcsParser.put(_,g,M),g=M-1;break}break;case 14:if(y=this._dcsParser.unhook(C!==24&&C!==26),y)return this._preserveStack(6,[],0,S,g),y;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=g+1;;M++)if(M>=m||(C=_[M])<32||C>127&&C<p){this._oscParser.put(_,g,M),g=M-1;break}break;case 6:if(y=this._oscParser.end(C!==24&&C!==26),y)return this._preserveStack(5,[],0,S,g),y;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}a.EscapeSequenceParser=d},6242:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;let l=r(5770),u=r(482),i=[];a.OscParser=class{constructor(){this._state=0,this._active=i,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(s,f){this._handlers[s]===void 0&&(this._handlers[s]=[]);let p=this._handlers[s];return p.push(f),{dispose:()=>{let d=p.indexOf(f);d!==-1&&p.splice(d,1)}}}clearHandler(s){this._handlers[s]&&delete this._handlers[s]}setHandlerFallback(s){this._handlerFb=s}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=i}reset(){if(this._state===2)for(let s=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;s>=0;--s)this._active[s].end(!1);this._stack.paused=!1,this._active=i,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||i,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].start();else this._handlerFb(this._id,"START")}_put(s,f,p){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(s,f,p);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(s,f,p))}start(){this.reset(),this._state=1}put(s,f,p){if(this._state!==3){if(this._state===1)for(;f<p;){let d=s[f++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&p-f>0&&this._put(s,f,p)}}end(s,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let p=!1,d=this._active.length-1,c=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,p=f,c=this._stack.fallThrough,this._stack.paused=!1),!c&&p===!1){for(;d>=0&&(p=this._active[d].end(s),p!==!0);d--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,p;d--}for(;d>=0;d--)if(p=this._active[d].end(!1),p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",s);this._active=i,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(s){this._handler=s,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(s,f,p){this._hitLimit||(this._data+=(0,u.utf32ToString)(s,f,p),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(s){let f=!1;if(this._hitLimit)f=!1;else if(s&&(f=this._handler(this._data),f instanceof Promise))return f.then(p=>(this._data="",this._hitLimit=!1,p));return this._data="",this._hitLimit=!1,f}}},8742:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;let r=2147483647;class l{static fromArray(i){let s=new l;if(!i.length)return s;for(let f=Array.isArray(i[0])?1:0;f<i.length;++f){let p=i[f];if(Array.isArray(p))for(let d=0;d<p.length;++d)s.addSubParam(p[d]);else s.addParam(p)}return s}constructor(i=32,s=32){if(this.maxLength=i,this.maxSubParamsLength=s,s>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(i),this.length=0,this._subParams=new Int32Array(s),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(i),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let i=new l(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i._subParams.set(this._subParams),i._subParamsLength=this._subParamsLength,i._subParamsIdx.set(this._subParamsIdx),i._rejectDigits=this._rejectDigits,i._rejectSubDigits=this._rejectSubDigits,i._digitIsSub=this._digitIsSub,i}toArray(){let i=[];for(let s=0;s<this.length;++s){i.push(this.params[s]);let f=this._subParamsIdx[s]>>8,p=255&this._subParamsIdx[s];p-f>0&&i.push(Array.prototype.slice.call(this._subParams,f,p))}return i}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(i){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=i>r?r:i}}addSubParam(i){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=i>r?r:i,this._subParamsIdx[this.length-1]++}}hasSubParams(i){return(255&this._subParamsIdx[i])-(this._subParamsIdx[i]>>8)>0}getSubParams(i){let s=this._subParamsIdx[i]>>8,f=255&this._subParamsIdx[i];return f-s>0?this._subParams.subarray(s,f):null}getSubParamsAll(){let i={};for(let s=0;s<this.length;++s){let f=this._subParamsIdx[s]>>8,p=255&this._subParamsIdx[s];p-f>0&&(i[s]=this._subParams.slice(f,p))}return i}addDigit(i){let s;if(this._rejectDigits||!(s=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let f=this._digitIsSub?this._subParams:this.params,p=f[s-1];f[s-1]=~p?Math.min(10*p+i,r):i}}a.Params=l},5741:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let r=this._addons.length-1;r>=0;r--)this._addons[r].instance.dispose()}loadAddon(r,l){let u={instance:l,dispose:l.dispose,isDisposed:!1};this._addons.push(u),l.dispose=()=>this._wrappedAddonDispose(u),l.activate(r)}_wrappedAddonDispose(r){if(r.isDisposed)return;let l=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===r){l=u;break}if(l===-1)throw new Error("Could not dispose an addon that has not been loaded");r.isDisposed=!0,r.dispose.apply(r.instance),this._addons.splice(l,1)}}},8771:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;let l=r(3785),u=r(511);a.BufferApiView=class{constructor(i,s){this._buffer=i,this.type=s}init(i){return this._buffer=i,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(i){let s=this._buffer.lines.get(i);if(s)return new l.BufferLineApiView(s)}getNullCell(){return new u.CellData}}},3785:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;let l=r(511);a.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,i){if(!(u<0||u>=this._line.length))return i?(this._line.loadCell(u,i),i):this._line.loadCell(u,new l.CellData)}translateToString(u,i,s){return this._line.translateToString(u,i,s)}}},8285:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;let l=r(8771),u=r(8460),i=r(844);class s extends i.Disposable{constructor(p){super(),this._core=p,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=s},7975:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(r){this._core=r}registerCsiHandler(r,l){return this._core.registerCsiHandler(r,u=>l(u.toArray()))}addCsiHandler(r,l){return this.registerCsiHandler(r,l)}registerDcsHandler(r,l){return this._core.registerDcsHandler(r,(u,i)=>l(u,i.toArray()))}addDcsHandler(r,l){return this.registerDcsHandler(r,l)}registerEscHandler(r,l){return this._core.registerEscHandler(r,l)}addEscHandler(r,l){return this.registerEscHandler(r,l)}registerOscHandler(r,l){return this._core.registerOscHandler(r,l)}addOscHandler(r,l){return this.registerOscHandler(r,l)}}},7090:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(r){this._core=r}register(r){this._core.unicodeService.register(r)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(r){this._core.unicodeService.activeVersion=r}}},744:function(h,a,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;let i=r(8460),s=r(844),f=r(5295),p=r(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let d=a.BufferService=class extends s.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new i.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new i.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(c,this))}resize(c,_){this.cols=c,this.rows=_,this.buffers.resize(c,_),this._onResize.fire({cols:c,rows:_})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,_=!1){let m=this.buffer,v;v=this._cachedBlankLine,v&&v.length===this.cols&&v.getFg(0)===c.fg&&v.getBg(0)===c.bg||(v=m.getBlankLine(c,_),this._cachedBlankLine=v),v.isWrapped=_;let y=m.ybase+m.scrollTop,C=m.ybase+m.scrollBottom;if(m.scrollTop===0){let S=m.lines.isFull;C===m.lines.length-1?S?m.lines.recycle().copyFrom(v):m.lines.push(v.clone()):m.lines.splice(C+1,0,v.clone()),S?this.isUserScrolling&&(m.ydisp=Math.max(m.ydisp-1,0)):(m.ybase++,this.isUserScrolling||m.ydisp++)}else{let S=C-y+1;m.lines.shiftElements(y+1,S-1,-1),m.lines.set(C,v.clone())}this.isUserScrolling||(m.ydisp=m.ybase),this._onScroll.fire(m.ydisp)}scrollLines(c,_,m){let v=this.buffer;if(c<0){if(v.ydisp===0)return;this.isUserScrolling=!0}else c+v.ydisp>=v.ybase&&(this.isUserScrolling=!1);let y=v.ydisp;v.ydisp=Math.max(Math.min(v.ydisp+c,v.ybase),0),y!==v.ydisp&&(_||this._onScroll.fire(v.ydisp))}};a.BufferService=d=l([u(0,p.IOptionsService)],d)},7994:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(r){this.glevel=r,this.charset=this._charsets[r]}setgCharset(r,l){this._charsets[r]=l,this.glevel===r&&(this.charset=l)}}},1753:function(h,a,r){var l=this&&this.__decorate||function(v,y,C,S){var D,g=arguments.length,b=g<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(v,y,C,S);else for(var F=v.length-1;F>=0;F--)(D=v[F])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},u=this&&this.__param||function(v,y){return function(C,S){y(C,S,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;let i=r(2585),s=r(8460),f=r(844),p={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:v=>v.button!==4&&v.action===1&&(v.ctrl=!1,v.alt=!1,v.shift=!1,!0)},VT200:{events:19,restrict:v=>v.action!==32},DRAG:{events:23,restrict:v=>v.action!==32||v.button!==3},ANY:{events:31,restrict:v=>!0}};function d(v,y){let C=(v.ctrl?16:0)|(v.shift?4:0)|(v.alt?8:0);return v.button===4?(C|=64,C|=v.action):(C|=3&v.button,4&v.button&&(C|=64),8&v.button&&(C|=128),v.action===32?C|=32:v.action!==0||y||(C|=3)),C}let c=String.fromCharCode,_={DEFAULT:v=>{let y=[d(v,!1)+32,v.col+32,v.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${c(y[0])}${c(y[1])}${c(y[2])}`},SGR:v=>{let y=v.action===0&&v.button!==4?"m":"M";return`\x1B[<${d(v,!0)};${v.col};${v.row}${y}`},SGR_PIXELS:v=>{let y=v.action===0&&v.button!==4?"m":"M";return`\x1B[<${d(v,!0)};${v.x};${v.y}${y}`}},m=a.CoreMouseService=class extends f.Disposable{constructor(v,y){super(),this._bufferService=v,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new s.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(p))this.addProtocol(C,p[C]);for(let C of Object.keys(_))this.addEncoding(C,_[C]);this.reset()}addProtocol(v,y){this._protocols[v]=y}addEncoding(v,y){this._encodings[v]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(v){if(!this._protocols[v])throw new Error(`unknown protocol "${v}"`);this._activeProtocol=v,this._onProtocolChange.fire(this._protocols[v].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(v){if(!this._encodings[v])throw new Error(`unknown encoding "${v}"`);this._activeEncoding=v}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(v){if(v.col<0||v.col>=this._bufferService.cols||v.row<0||v.row>=this._bufferService.rows||v.button===4&&v.action===32||v.button===3&&v.action!==32||v.button!==4&&(v.action===2||v.action===3)||(v.col++,v.row++,v.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,v,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(v))return!1;let y=this._encodings[this._activeEncoding](v);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=v,!0}explainEvents(v){return{down:!!(1&v),up:!!(2&v),drag:!!(4&v),move:!!(8&v),wheel:!!(16&v)}}_equalEvents(v,y,C){if(C){if(v.x!==y.x||v.y!==y.y)return!1}else if(v.col!==y.col||v.row!==y.row)return!1;return v.button===y.button&&v.action===y.action&&v.ctrl===y.ctrl&&v.alt===y.alt&&v.shift===y.shift}};a.CoreMouseService=m=l([u(0,i.IBufferService),u(1,i.ICoreService)],m)},6975:function(h,a,r){var l=this&&this.__decorate||function(m,v,y,C){var S,D=arguments.length,g=D<3?v:C===null?C=Object.getOwnPropertyDescriptor(v,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(m,v,y,C);else for(var b=m.length-1;b>=0;b--)(S=m[b])&&(g=(D<3?S(g):D>3?S(v,y,g):S(v,y))||g);return D>3&&g&&Object.defineProperty(v,y,g),g},u=this&&this.__param||function(m,v){return function(y,C){v(y,C,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;let i=r(1439),s=r(8460),f=r(844),p=r(2585),d=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),_=a.CoreService=class extends f.Disposable{constructor(m,v,y){super(),this._bufferService=m,this._logService=v,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new s.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new s.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,i.clone)(d),this.decPrivateModes=(0,i.clone)(c)}reset(){this.modes=(0,i.clone)(d),this.decPrivateModes=(0,i.clone)(c)}triggerDataEvent(m,v=!1){if(this._optionsService.rawOptions.disableStdin)return;let y=this._bufferService.buffer;v&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),v&&this._onUserInput.fire(),this._logService.debug(`sending data "${m}"`,()=>m.split("").map(C=>C.charCodeAt(0))),this._onData.fire(m)}triggerBinaryEvent(m){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${m}"`,()=>m.split("").map(v=>v.charCodeAt(0))),this._onBinary.fire(m))}};a.CoreService=_=l([u(0,p.IBufferService),u(1,p.ILogService),u(2,p.IOptionsService)],_)},9074:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;let l=r(8055),u=r(8460),i=r(844),s=r(6106),f=0,p=0;class d extends i.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new s.SortedList(m=>m?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,i.toDisposable)(()=>this.reset()))}registerDecoration(m){if(m.marker.isDisposed)return;let v=new c(m);if(v){let y=v.marker.onDispose(()=>v.dispose());v.onDispose(()=>{v&&(this._decorations.delete(v)&&this._onDecorationRemoved.fire(v),y.dispose())}),this._decorations.insert(v),this._onDecorationRegistered.fire(v)}return v}reset(){for(let m of this._decorations.values())m.dispose();this._decorations.clear()}*getDecorationsAtCell(m,v,y){var C,S,D;let g=0,b=0;for(let F of this._decorations.getKeyIterator(v))g=(C=F.options.x)!==null&&C!==void 0?C:0,b=g+((S=F.options.width)!==null&&S!==void 0?S:1),m>=g&&m<b&&(!y||((D=F.options.layer)!==null&&D!==void 0?D:"bottom")===y)&&(yield F)}forEachDecorationAtCell(m,v,y,C){this._decorations.forEachByKey(v,S=>{var D,g,b;f=(D=S.options.x)!==null&&D!==void 0?D:0,p=f+((g=S.options.width)!==null&&g!==void 0?g:1),m>=f&&m<p&&(!y||((b=S.options.layer)!==null&&b!==void 0?b:"bottom")===y)&&C(S)})}}a.DecorationService=d;class c extends i.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=l.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=l.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(m){super(),this.options=m,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=m.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;let l=r(2585),u=r(8343);class i{constructor(...f){this._entries=new Map;for(let[p,d]of f)this.set(p,d)}set(f,p){let d=this._entries.get(f);return this._entries.set(f,p),d}forEach(f){for(let[p,d]of this._entries.entries())f(p,d)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}a.ServiceCollection=i,a.InstantiationService=class{constructor(){this._services=new i,this._services.set(l.IInstantiationService,this)}setService(s,f){this._services.set(s,f)}getService(s){return this._services.get(s)}createInstance(s,...f){let p=(0,u.getServiceDependencies)(s).sort((_,m)=>_.index-m.index),d=[];for(let _ of p){let m=this._services.get(_.id);if(!m)throw new Error(`[createInstance] ${s.name} depends on UNKNOWN service ${_.id}.`);d.push(m)}let c=p.length>0?p[0].index:f.length;if(f.length!==c)throw new Error(`[createInstance] First service dependency of ${s.name} at position ${c+1} conflicts with ${f.length} static arguments`);return new s(...f,...d)}}},7866:function(h,a,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,S=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(S=(C<3?y(S):C>3?y(_,m,S):y(_,m))||S);return C>3&&S&&Object.defineProperty(_,m,S),S},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;let i=r(844),s=r(2585),f={trace:s.LogLevelEnum.TRACE,debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},p,d=a.LogService=class extends i.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let _=0;_<c.length;_++)typeof c[_]=="function"&&(c[_]=c[_]())}_log(c,_,m){this._evalLazyOptionalParams(m),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...m)}trace(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.TRACE&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.trace.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}debug(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.DEBUG&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.debug.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}info(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.INFO&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.info.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.info,c,_)}warn(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.WARN&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.warn.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.warn,c,_)}error(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.ERROR&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.error.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.error,c,_)}};a.LogService=d=l([u(0,s.IOptionsService)],d),a.setTraceLogger=function(c){p=c},a.traceCall=function(c,_,m){if(typeof m.value!="function")throw new Error("not supported");let v=m.value;m.value=function(...y){if(p.logLevel!==s.LogLevelEnum.TRACE)return v.apply(this,y);p.trace(`GlyphRenderer#${v.name}(${y.map(S=>JSON.stringify(S)).join(", ")})`);let C=v.apply(this,y);return p.trace(`GlyphRenderer#${v.name} return`,C),C}}},7302:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;let l=r(8460),u=r(844),i=r(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:i.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let s=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(d){super(),this._onOptionChange=this.register(new l.EventEmitter),this.onOptionChange=this._onOptionChange.event;let c=Object.assign({},a.DEFAULT_OPTIONS);for(let _ in d)if(_ in c)try{let m=d[_];c[_]=this._sanitizeAndValidateOption(_,m)}catch(m){console.error(m)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(d,c){return this.onOptionChange(_=>{_===d&&c(this.rawOptions[d])})}onMultipleOptionChange(d,c){return this.onOptionChange(_=>{d.indexOf(_)!==-1&&c()})}_setupOptions(){let d=_=>{if(!(_ in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);return this.rawOptions[_]},c=(_,m)=>{if(!(_ in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);m=this._sanitizeAndValidateOption(_,m),this.rawOptions[_]!==m&&(this.rawOptions[_]=m,this._onOptionChange.fire(_))};for(let _ in this.rawOptions){let m={get:d.bind(this,_),set:c.bind(this,_)};Object.defineProperty(this.options,_,m)}}_sanitizeAndValidateOption(d,c){switch(d){case"cursorStyle":if(c||(c=a.DEFAULT_OPTIONS[d]),!function(_){return _==="block"||_==="underline"||_==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${d}`);break;case"wordSeparator":c||(c=a.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=s.includes(c)?c:a.DEFAULT_OPTIONS[d];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${d} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${d} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}a.OptionsService=f},2660:function(h,a,r){var l=this&&this.__decorate||function(f,p,d,c){var _,m=arguments.length,v=m<3?p:c===null?c=Object.getOwnPropertyDescriptor(p,d):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(f,p,d,c);else for(var y=f.length-1;y>=0;y--)(_=f[y])&&(v=(m<3?_(v):m>3?_(p,d,v):_(p,d))||v);return m>3&&v&&Object.defineProperty(p,d,v),v},u=this&&this.__param||function(f,p){return function(d,c){p(d,c,f)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;let i=r(2585),s=a.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){let p=this._bufferService.buffer;if(f.id===void 0){let y=p.addMarker(p.ybase+p.y),C={data:f,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(C,y)),this._dataByLinkId.set(C.id,C),C.id}let d=f,c=this._getEntryIdKey(d),_=this._entriesWithId.get(c);if(_)return this.addLineToLink(_.id,p.ybase+p.y),_.id;let m=p.addMarker(p.ybase+p.y),v={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(v,m)),this._entriesWithId.set(v.key,v),this._dataByLinkId.set(v.id,v),v.id}addLineToLink(f,p){let d=this._dataByLinkId.get(f);if(d&&d.lines.every(c=>c.line!==p)){let c=this._bufferService.buffer.addMarker(p);d.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(d,c))}}getLinkData(f){var p;return(p=this._dataByLinkId.get(f))===null||p===void 0?void 0:p.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,p){let d=f.lines.indexOf(p);d!==-1&&(f.lines.splice(d,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};a.OscLinkService=s=l([u(0,i.IBufferService)],s)},8343:(h,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;let r="di$target",l="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u[l]||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);let i=function(s,f,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,c,_){c[r]===c?c[l].push({id:d,index:_}):(c[l]=[{id:d,index:_}],c[r]=c)})(i,s,p)};return i.toString=()=>u,a.serviceRegistry.set(u,i),i}},2585:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;let l=r(8343);var u;a.IBufferService=(0,l.createDecorator)("BufferService"),a.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),a.ICoreService=(0,l.createDecorator)("CoreService"),a.ICharsetService=(0,l.createDecorator)("CharsetService"),a.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(i){i[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.OFF=5]="OFF"}(u||(a.LogLevelEnum=u={})),a.ILogService=(0,l.createDecorator)("LogService"),a.IOptionsService=(0,l.createDecorator)("OptionsService"),a.IOscLinkService=(0,l.createDecorator)("OscLinkService"),a.IUnicodeService=(0,l.createDecorator)("UnicodeService"),a.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(h,a,r)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;let l=r(8460),u=r(225);a.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter,this.onChange=this._onChange.event;let i=new u.UnicodeV6;this.register(i),this._active=i.version,this._activeProvider=i}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(i){if(!this._providers[i])throw new Error(`unknown Unicode version "${i}"`);this._active=i,this._activeProvider=this._providers[i],this._onChange.fire(i)}register(i){this._providers[i.version]=i}wcwidth(i){return this._activeProvider.wcwidth(i)}getStringCellWidth(i){let s=0,f=i.length;for(let p=0;p<f;++p){let d=i.charCodeAt(p);if(55296<=d&&d<=56319){if(++p>=f)return s+this.wcwidth(d);let c=i.charCodeAt(p);56320<=c&&c<=57343?d=1024*(d-55296)+c-56320+65536:s+=this.wcwidth(c)}s+=this.wcwidth(d)}return s}}}},t={};function n(h){var a=t[h];if(a!==void 0)return a.exports;var r=t[h]={exports:{}};return e[h].call(r.exports,r,r.exports,n),r.exports}var o={};return(()=>{var h=o;Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;let a=n(9042),r=n(3236),l=n(844),u=n(5741),i=n(8285),s=n(7975),f=n(7090),p=["cols","rows"];class d extends l.Disposable{constructor(_){super(),this._core=this.register(new r.Terminal(_)),this._addonManager=this.register(new u.AddonManager),this._publicOptions=Object.assign({},this._core.options);let m=y=>this._core.options[y],v=(y,C)=>{this._checkReadonlyOptions(y),this._core.options[y]=C};for(let y in this._core.options){let C={get:m.bind(this,y),set:v.bind(this,y)};Object.defineProperty(this._publicOptions,y,C)}}_checkReadonlyOptions(_){if(p.includes(_))throw new Error(`Option "${_}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new s.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new i.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let _=this._core.coreService.decPrivateModes,m="none";switch(this._core.coreMouseService.activeProtocol){case"X10":m="x10";break;case"VT200":m="vt200";break;case"DRAG":m="drag";break;case"ANY":m="any"}return{applicationCursorKeysMode:_.applicationCursorKeys,applicationKeypadMode:_.applicationKeypad,bracketedPasteMode:_.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:m,originMode:_.origin,reverseWraparoundMode:_.reverseWraparound,sendFocusMode:_.sendFocus,wraparoundMode:_.wraparound}}get options(){return this._publicOptions}set options(_){for(let m in _)this._publicOptions[m]=_[m]}blur(){this._core.blur()}focus(){this._core.focus()}resize(_,m){this._verifyIntegers(_,m),this._core.resize(_,m)}open(_){this._core.open(_)}attachCustomKeyEventHandler(_){this._core.attachCustomKeyEventHandler(_)}registerLinkProvider(_){return this._core.registerLinkProvider(_)}registerCharacterJoiner(_){return this._checkProposedApi(),this._core.registerCharacterJoiner(_)}deregisterCharacterJoiner(_){this._checkProposedApi(),this._core.deregisterCharacterJoiner(_)}registerMarker(_=0){return this._verifyIntegers(_),this._core.registerMarker(_)}registerDecoration(_){var m,v,y;return this._checkProposedApi(),this._verifyPositiveIntegers((m=_.x)!==null&&m!==void 0?m:0,(v=_.width)!==null&&v!==void 0?v:0,(y=_.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(_)}hasSelection(){return this._core.hasSelection()}select(_,m,v){this._verifyIntegers(_,m,v),this._core.select(_,m,v)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(_,m){this._verifyIntegers(_,m),this._core.selectLines(_,m)}dispose(){super.dispose()}scrollLines(_){this._verifyIntegers(_),this._core.scrollLines(_)}scrollPages(_){this._verifyIntegers(_),this._core.scrollPages(_)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(_){this._verifyIntegers(_),this._core.scrollToLine(_)}clear(){this._core.clear()}write(_,m){this._core.write(_,m)}writeln(_,m){this._core.write(_),this._core.write(`\r
`,m)}paste(_){this._core.paste(_)}refresh(_,m){this._verifyIntegers(_,m),this._core.refresh(_,m)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(_){this._addonManager.loadAddon(this,_)}static get strings(){return a}_verifyIntegers(..._){for(let m of _)if(m===1/0||isNaN(m)||m%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(..._){for(let m of _)if(m&&(m===1/0||isNaN(m)||m%1!=0||m<0))throw new Error("This API only accepts positive integers")}}h.Terminal=d})(),o})())});var Vg=Tt((mN,qg)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var n=function(u,i,s){if(typeof u!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(s=i),n.modules[u]||(n.payloads[u]=s,n.modules[u]=null)};n.modules={},n.payloads={};var o=function(u,i,s){if(typeof i=="string"){var f=r(u,i);if(f!=null)return s&&s(),f}else if(Object.prototype.toString.call(i)==="[object Array]"){for(var p=[],d=0,c=i.length;d<c;++d){var _=r(u,i[d]);if(_==null&&h.original)return;p.push(_)}return s&&s.apply(null,p)||!0}},h=function(u,i){var s=o("",u,i);return s==null&&h.original?h.original.apply(this,arguments):s},a=function(u,i){if(i.indexOf("!")!==-1){var s=i.split("!");return a(u,s[0])+"!"+a(u,s[1])}if(i.charAt(0)=="."){var f=u.split("/").slice(0,-1).join("/");for(i=f+"/"+i;i.indexOf(".")!==-1&&p!=i;){var p=i;i=i.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return i},r=function(u,i){i=a(u,i);var s=n.modules[i];if(!s){if(s=n.payloads[i],typeof s=="function"){var f={},p={id:i,uri:"",exports:f,packaged:!0},d=function(_,m){return o(i,_,m)},c=s(d,f,p);f=c||p.exports,n.modules[i]=f,delete n.payloads[i]}s=n.modules[i]=f||s}return s};function l(u){var i=t;u&&(t[u]||(t[u]={}),i=t[u]),(!i.define||!i.define.packaged)&&(n.original=i.define,i.define=n,i.define.packaged=!0),(!i.require||!i.require.packaged)&&(h.original=i.require,i.require=h,i.require.packaged=!0)}l(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function o(h,a,r){Object.defineProperty(h,a,{value:r,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||o(String.prototype,"startsWith",function(h,a){return a=a||0,this.lastIndexOf(h,a)===a}),String.prototype.endsWith||o(String.prototype,"endsWith",function(h,a){var r=this;(a===void 0||a>r.length)&&(a=r.length),a-=h.length;var l=r.indexOf(h,a);return l!==-1&&l===a}),String.prototype.repeat||o(String.prototype,"repeat",function(h){for(var a="",r=this;h>0;)h&1&&(a+=r),(h>>=1)&&(r+=r);return a}),String.prototype.includes||o(String.prototype,"includes",function(h,a){return this.indexOf(h,a)!=-1}),Object.assign||(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(h),r=1;r<arguments.length;r++){var l=arguments[r];l!=null&&Object.keys(l).forEach(function(u){a[u]=l[u]})}return a}),Object.values||(Object.values=function(h){return Object.keys(h).map(function(a){return h[a]})}),Array.prototype.find||o(Array.prototype,"find",function(h){for(var a=this.length,r=arguments[1],l=0;l<a;l++){var u=this[l];if(h.call(r,u,l,this))return u}}),Array.prototype.findIndex||o(Array.prototype,"findIndex",function(h){for(var a=this.length,r=arguments[1],l=0;l<a;l++){var u=this[l];if(h.call(r,u,l,this))return l}}),Array.prototype.includes||o(Array.prototype,"includes",function(h,a){return this.indexOf(h,a)!=-1}),Array.prototype.fill||o(Array.prototype,"fill",function(h){for(var a=this,r=a.length>>>0,l=arguments[1],u=l>>0,i=u<0?Math.max(r+u,0):Math.min(u,r),s=arguments[2],f=s===void 0?r:s>>0,p=f<0?Math.max(r+f,0):Math.min(f,r);i<p;)a[i]=h,i++;return a}),Array.of||o(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,n){t.deepCopy=function o(h){if(typeof h!="object"||!h)return h;var a;if(Array.isArray(h)){a=[];for(var r=0;r<h.length;r++)a[r]=o(h[r]);return a}if(Object.prototype.toString.call(h)!=="[object Object]")return h;a={};for(var r in h)a[r]=o(h[r]);return a}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";t.last=function(a){return a[a.length-1]},t.stringReverse=function(a){return a.split("").reverse().join("")},t.stringRepeat=function(a,r){for(var l="";r>0;)r&1&&(l+=a),(r>>=1)&&(a+=a);return l};var o=/^\s\s*/,h=/\s\s*$/;t.stringTrimLeft=function(a){return a.replace(o,"")},t.stringTrimRight=function(a){return a.replace(h,"")},t.copyObject=function(a){var r={};for(var l in a)r[l]=a[l];return r},t.copyArray=function(a){for(var r=[],l=0,u=a.length;l<u;l++)a[l]&&typeof a[l]=="object"?r[l]=this.copyObject(a[l]):r[l]=a[l];return r},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(a){for(var r={},l=0;l<a.length;l++)r[a[l]]=1;return r},t.createMap=function(a){var r=Object.create(null);for(var l in a)r[l]=a[l];return r},t.arrayRemove=function(a,r){for(var l=0;l<=a.length;l++)r===a[l]&&a.splice(l,1)},t.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(a){return(""+a).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(a,r){var l=[];return a.replace(r,function(u){l.push({offset:arguments[arguments.length-2],length:u.length})}),l},t.deferredCall=function(a){var r=null,l=function(){r=null,a()},u=function(i){return u.cancel(),r=setTimeout(l,i||0),u};return u.schedule=u,u.call=function(){return this.cancel(),a(),u},u.cancel=function(){return clearTimeout(r),r=null,u},u.isPending=function(){return r},u},t.delayedCall=function(a,r){var l=null,u=function(){l=null,a()},i=function(s){l==null&&(l=setTimeout(u,s||r))};return i.delay=function(s){l&&clearTimeout(l),l=setTimeout(u,s||r)},i.schedule=i,i.call=function(){this.cancel(),a()},i.cancel=function(){l&&clearTimeout(l),l=null},i.isPending=function(){return l},i},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(a,r,l){return l&&a.codePointAt(r)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var o=typeof navigator=="object"?navigator:{},h=(/mac|win|linux/i.exec(o.platform)||["other"])[0].toLowerCase(),a=o.userAgent||"",r=o.appName||"";t.isWin=h=="win",t.isMac=h=="mac",t.isLinux=h=="linux",t.isIE=r=="Microsoft Internet Explorer"||r.indexOf("MSAppHost")>=0?parseFloat((a.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((a.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=a.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(a.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(a.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(a.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(a.split(" Edge/")[1])||void 0,t.isAIR=a.indexOf("AdobeAIR")>=0,t.isAndroid=a.indexOf("Android")>=0,t.isChromeOS=a.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(a)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var o=e("./useragent"),h="http://www.w3.org/1999/xhtml";t.buildDom=function s(f,p,d){if(typeof f=="string"&&f){var c=document.createTextNode(f);return p&&p.appendChild(c),c}if(!Array.isArray(f))return f&&f.appendChild&&p&&p.appendChild(f),f;if(typeof f[0]!="string"||!f[0]){for(var _=[],m=0;m<f.length;m++){var v=s(f[m],p,d);v&&_.push(v)}return _}var y=document.createElement(f[0]),C=f[1],S=1;C&&typeof C=="object"&&!Array.isArray(C)&&(S=2);for(var m=S;m<f.length;m++)s(f[m],y,d);return S==2&&Object.keys(C).forEach(function(D){var g=C[D];D==="class"?y.className=Array.isArray(g)?g.join(" "):g:typeof g=="function"||D=="value"||D[0]=="$"?y[D]=g:D==="ref"?d&&(d[g]=y):D==="style"?typeof g=="string"&&(y.style.cssText=g):g!=null&&y.setAttribute(D,g)}),p&&p.appendChild(y),y},t.getDocumentHead=function(s){return s||(s=document),s.head||s.getElementsByTagName("head")[0]||s.documentElement},t.createElement=function(s,f){return document.createElementNS?document.createElementNS(f||h,s):document.createElement(s)},t.removeChildren=function(s){s.innerHTML=""},t.createTextNode=function(s,f){var p=f?f.ownerDocument:document;return p.createTextNode(s)},t.createFragment=function(s){var f=s?s.ownerDocument:document;return f.createDocumentFragment()},t.hasCssClass=function(s,f){var p=(s.className+"").split(/\s+/g);return p.indexOf(f)!==-1},t.addCssClass=function(s,f){t.hasCssClass(s,f)||(s.className+=" "+f)},t.removeCssClass=function(s,f){for(var p=s.className.split(/\s+/g);;){var d=p.indexOf(f);if(d==-1)break;p.splice(d,1)}s.className=p.join(" ")},t.toggleCssClass=function(s,f){for(var p=s.className.split(/\s+/g),d=!0;;){var c=p.indexOf(f);if(c==-1)break;d=!1,p.splice(c,1)}return d&&p.push(f),s.className=p.join(" "),d},t.setCssClass=function(s,f,p){p?t.addCssClass(s,f):t.removeCssClass(s,f)},t.hasCssString=function(s,f){var p=0,d;if(f=f||document,d=f.querySelectorAll("style")){for(;p<d.length;)if(d[p++].id===s)return!0}},t.removeElementById=function(s,f){f=f||document,f.getElementById(s)&&f.getElementById(s).remove()};var a,r=[];t.useStrictCSP=function(s){a=s,s==!1?l():r||(r=[])};function l(){var s=r;r=null,s&&s.forEach(function(f){u(f[0],f[1])})}function u(s,f,p){if(!(typeof document>"u")){if(r){if(p)l();else if(p===!1)return r.push([s,f])}if(!a){var d=p;!p||!p.getRootNode?d=document:(d=p.getRootNode(),(!d||d==p)&&(d=document));var c=d.ownerDocument||d;if(f&&t.hasCssString(f,d))return null;f&&(s+=`
/*# sourceURL=ace/css/`+f+" */");var _=t.createElement("style");_.appendChild(c.createTextNode(s)),f&&(_.id=f),d==c&&(d=t.getDocumentHead(c)),d.insertBefore(_,d.firstChild)}}}if(t.importCssString=u,t.importCssStylsheet=function(s,f){t.buildDom(["link",{rel:"stylesheet",href:s}],t.getDocumentHead(f))},t.scrollbarWidth=function(s){var f=t.createElement("ace_inner");f.style.width="100%",f.style.minWidth="0px",f.style.height="200px",f.style.display="block";var p=t.createElement("ace_outer"),d=p.style;d.position="absolute",d.left="-10000px",d.overflow="hidden",d.width="200px",d.minWidth="0px",d.height="150px",d.display="block",p.appendChild(f);var c=s&&s.documentElement||document&&document.documentElement;if(!c)return 0;c.appendChild(p);var _=f.offsetWidth;d.overflow="scroll";var m=f.offsetWidth;return _===m&&(m=p.clientWidth),c.removeChild(p),_-m},t.computedStyle=function(s,f){return window.getComputedStyle(s,"")||{}},t.setStyle=function(s,f,p){s[f]!==p&&(s[f]=p)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=o.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,o.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var i=document.createElement("div");t.HI_DPI&&i.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!o.isEdge&&typeof i.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),i=null}t.HAS_CSS_TRANSFORMS?t.translate=function(s,f,p){s.style.transform="translate("+Math.round(f)+"px, "+Math.round(p)+"px)"}:t.translate=function(s,f,p){s.style.top=Math.round(p)+"px",s.style.left=Math.round(f)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var o=e("./dom");t.get=function(h,a){var r=new XMLHttpRequest;r.open("GET",h,!0),r.onreadystatechange=function(){r.readyState===4&&a(r.responseText)},r.send(null)},t.loadScript=function(h,a){var r=o.getDocumentHead(),l=document.createElement("script");l.src=h,r.appendChild(l),l.onload=l.onreadystatechange=function(u,i){(i||!l.readyState||l.readyState=="loaded"||l.readyState=="complete")&&(l=l.onload=l.onreadystatechange=null,i||a())}},t.qualifyURL=function(h){var a=document.createElement("a");return a.href=h,a.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(o,h){o.super_=h,o.prototype=Object.create(h.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(o,h){for(var a in h)o[a]=h[a];return o},t.implement=function(o,h){t.mixin(o,h)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var o={},h=function(){this.propagationStopped=!0},a=function(){this.defaultPrevented=!0};o._emit=o._dispatchEvent=function(r,l){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var u=this._eventRegistry[r]||[],i=this._defaultHandlers[r];if(!(!u.length&&!i)){(typeof l!="object"||!l)&&(l={}),l.type||(l.type=r),l.stopPropagation||(l.stopPropagation=h),l.preventDefault||(l.preventDefault=a),u=u.slice();for(var s=0;s<u.length&&(u[s](l,this),!l.propagationStopped);s++);if(i&&!l.defaultPrevented)return i(l,this)}},o._signal=function(r,l){var u=(this._eventRegistry||{})[r];if(u){u=u.slice();for(var i=0;i<u.length;i++)u[i](l,this)}},o.once=function(r,l){var u=this;if(this.on(r,function i(){u.off(r,i),l.apply(null,arguments)}),!l)return new Promise(function(i){l=i})},o.setDefaultHandler=function(r,l){var u=this._defaultHandlers;if(u||(u=this._defaultHandlers={_disabled_:{}}),u[r]){var i=u[r],s=u._disabled_[r];s||(u._disabled_[r]=s=[]),s.push(i);var f=s.indexOf(l);f!=-1&&s.splice(f,1)}u[r]=l},o.removeDefaultHandler=function(r,l){var u=this._defaultHandlers;if(u){var i=u._disabled_[r];if(u[r]==l)i&&this.setDefaultHandler(r,i.pop());else if(i){var s=i.indexOf(l);s!=-1&&i.splice(s,1)}}},o.on=o.addEventListener=function(r,l,u){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[r];return i||(i=this._eventRegistry[r]=[]),i.indexOf(l)==-1&&i[u?"unshift":"push"](l),l},o.off=o.removeListener=o.removeEventListener=function(r,l){this._eventRegistry=this._eventRegistry||{};var u=this._eventRegistry[r];if(u){var i=u.indexOf(l);i!==-1&&u.splice(i,1)}},o.removeAllListeners=function(r){r||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[r]=void 0),this._defaultHandlers&&(this._defaultHandlers[r]=void 0)},t.EventEmitter=o});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,n){t.reportError=function(h,a){var r=new Error(h);r.data=a,typeof console=="object"&&console.error&&console.error(r),setTimeout(function(){throw r})}});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(e,t,n){"no use strict";var o=e("./oop"),h=e("./event_emitter").EventEmitter,a=e("./report_error").reportError,r={setOptions:function(s){Object.keys(s).forEach(function(f){this.setOption(f,s[f])},this)},getOptions:function(s){var f={};if(s)Array.isArray(s)||(f=s,s=Object.keys(f));else{var p=this.$options;s=Object.keys(p).filter(function(d){return!p[d].hidden})}return s.forEach(function(d){f[d]=this.getOption(d)},this),f},setOption:function(s,f){if(this["$"+s]!==f){var p=this.$options[s];if(!p)return l('misspelled option "'+s+'"');if(p.forwardTo)return this[p.forwardTo]&&this[p.forwardTo].setOption(s,f);p.handlesSet||(this["$"+s]=f),p&&p.set&&p.set.call(this,f)}},getOption:function(s){var f=this.$options[s];return f?f.forwardTo?this[f.forwardTo]&&this[f.forwardTo].getOption(s):f&&f.get?f.get.call(this):this["$"+s]:l('misspelled option "'+s+'"')}};function l(s){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var u,i=function(){function s(){this.$defaultOptions={}}return s.prototype.defineOptions=function(f,p,d){return f.$options||(this.$defaultOptions[p]=f.$options={}),Object.keys(d).forEach(function(c){var _=d[c];typeof _=="string"&&(_={forwardTo:_}),_.name||(_.name=c),f.$options[_.name]=_,"initialValue"in _&&(f["$"+_.name]=_.initialValue)}),o.implement(f,r),this},s.prototype.resetOptions=function(f){Object.keys(f.$options).forEach(function(p){var d=f.$options[p];"value"in d&&f.setOption(p,d.value)})},s.prototype.setDefaultValue=function(f,p,d){if(!f){for(f in this.$defaultOptions)if(this.$defaultOptions[f][p])break;if(!this.$defaultOptions[f][p])return!1}var c=this.$defaultOptions[f]||(this.$defaultOptions[f]={});c[p]&&(c.forwardTo?this.setDefaultValue(c.forwardTo,p,d):c[p].value=d)},s.prototype.setDefaultValues=function(f,p){Object.keys(p).forEach(function(d){this.setDefaultValue(f,d,p[d])},this)},s.prototype.setMessages=function(f){u=f},s.prototype.nls=function(f,p){u&&!u[f]&&l("No message found for '"+f+"' in the provided messages, falling back to default English message.");var d=u&&u[f]||f;return p&&(d=d.replace(/\$(\$|[\d]+)/g,function(c,_){return _=="$"?"$":p[_]})),d},s}();i.prototype.warn=l,i.prototype.reportError=a,o.implement(i.prototype,h),t.AppConfig=i});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var o=e("../lib/dom");o.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){"no use strict";var o=e("./lib/lang"),h=e("./lib/net"),a=e("./lib/dom"),r=e("./lib/app_config").AppConfig;n.exports=t=new r;var l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(f){if(!l.hasOwnProperty(f))throw new Error("Unknown config key: "+f);return l[f]},t.set=function(f,p){if(l.hasOwnProperty(f))l[f]=p;else if(this.setDefaultValue("",f,p)==!1)throw new Error("Unknown config key: "+f);f=="useStrictCSP"&&a.useStrictCSP(p)},t.all=function(){return o.copyObject(l)},t.$modes={},t.moduleUrl=function(f,p){if(l.$moduleUrls[f])return l.$moduleUrls[f];var d=f.split("/");p=p||d[d.length-2]||"";var c=p=="snippets"?"/":"-",_=d[d.length-1];if(p=="worker"&&c=="-"){var m=new RegExp("^"+p+"[\\-_]|[\\-_]"+p+"$","g");_=_.replace(m,"")}(!_||_==p)&&d.length>1&&(_=d[d.length-2]);var v=l[p+"Path"];return v==null?v=l.basePath:c=="/"&&(p=c=""),v&&v.slice(-1)!="/"&&(v+="/"),v+p+c+_+this.get("suffix")},t.setModuleUrl=function(f,p){return l.$moduleUrls[f]=p};var u=function(f,p){if(f==="ace/theme/textmate"||f==="./theme/textmate")return p(null,e("./theme/textmate"));if(i)return i(f,p);console.error("loader is not configured")},i;t.setLoader=function(f){i=f},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(f,p){var d;if(Array.isArray(f))var c=f[0],_=f[1];else if(typeof f=="string")var _=f;var m=function(v){if(v&&!t.$loading[_])return p&&p(v);if(t.$loading[_]||(t.$loading[_]=[]),t.$loading[_].push(p),!(t.$loading[_].length>1)){var y=function(){u(_,function(C,S){S&&(t.$loaded[_]=S),t._emit("load.module",{name:_,module:S});var D=t.$loading[_];t.$loading[_]=null,D.forEach(function(g){g&&g(S)})})};if(!t.get("packaged"))return y();h.loadScript(t.moduleUrl(_,c),y),s()}};if(t.dynamicModules[_])t.dynamicModules[_]().then(function(v){v.default?m(v.default):m(v)});else{try{d=this.$require(_)}catch{}m(d||t.$loaded[_])}},t.$require=function(f){if(typeof n.require=="function"){var p="require";return n[p](f)}},t.setModuleLoader=function(f,p){t.dynamicModules[f]=p};var s=function(){!l.basePath&&!l.workerPath&&!l.modePath&&!l.themePath&&!Object.keys(l.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),s=function(){})};t.version="1.32.3"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var o=e("./config");o.setLoader(function(l,u){e([l],function(i){u(null,i)})});var h=function(){return this||typeof window<"u"&&window}();n.exports=function(l){o.init=a,o.$require=e,l.require=e,typeof define=="function"&&(l.define=define)},a(!0);function a(l){if(!(!h||!h.document)){o.set("packaged",l||e.packaged||n.packaged||h.define&&define.packaged);var u={},i="",s=document.currentScript||document._currentScript,f=s&&s.ownerDocument||document;s&&s.src&&(i=s.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var p=f.getElementsByTagName("script"),d=0;d<p.length;d++){var c=p[d],_=c.src||c.getAttribute("src");if(_){for(var m=c.attributes,v=0,y=m.length;v<y;v++){var C=m[v];C.name.indexOf("data-ace-")===0&&(u[r(C.name.replace(/^data-ace-/,""))]=C.value)}var S=_.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(i=S[1])}}i&&(u.base=u.base||i,u.packaged=!0),u.basePath=u.base,u.workerPath=u.workerPath||u.base,u.modePath=u.modePath||u.base,u.themePath=u.themePath||u.base,delete u.base;for(var D in u)typeof u[D]<"u"&&o.set(D,u[D])}}function r(l){return l.replace(/-(.)/g,function(u,i){return i.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var o=function(){function h(a,r,l,u){this.start={row:a,column:r},this.end={row:l,column:u}}return h.prototype.isEqual=function(a){return this.start.row===a.start.row&&this.end.row===a.end.row&&this.start.column===a.start.column&&this.end.column===a.end.column},h.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},h.prototype.contains=function(a,r){return this.compare(a,r)==0},h.prototype.compareRange=function(a){var r,l=a.end,u=a.start;return r=this.compare(l.row,l.column),r==1?(r=this.compare(u.row,u.column),r==1?2:r==0?1:0):r==-1?-2:(r=this.compare(u.row,u.column),r==-1?-1:r==1?42:0)},h.prototype.comparePoint=function(a){return this.compare(a.row,a.column)},h.prototype.containsRange=function(a){return this.comparePoint(a.start)==0&&this.comparePoint(a.end)==0},h.prototype.intersects=function(a){var r=this.compareRange(a);return r==-1||r==0||r==1},h.prototype.isEnd=function(a,r){return this.end.row==a&&this.end.column==r},h.prototype.isStart=function(a,r){return this.start.row==a&&this.start.column==r},h.prototype.setStart=function(a,r){typeof a=="object"?(this.start.column=a.column,this.start.row=a.row):(this.start.row=a,this.start.column=r)},h.prototype.setEnd=function(a,r){typeof a=="object"?(this.end.column=a.column,this.end.row=a.row):(this.end.row=a,this.end.column=r)},h.prototype.inside=function(a,r){return this.compare(a,r)==0?!(this.isEnd(a,r)||this.isStart(a,r)):!1},h.prototype.insideStart=function(a,r){return this.compare(a,r)==0?!this.isEnd(a,r):!1},h.prototype.insideEnd=function(a,r){return this.compare(a,r)==0?!this.isStart(a,r):!1},h.prototype.compare=function(a,r){return!this.isMultiLine()&&a===this.start.row?r<this.start.column?-1:r>this.end.column?1:0:a<this.start.row?-1:a>this.end.row?1:this.start.row===a?r>=this.start.column?0:-1:this.end.row===a?r<=this.end.column?0:1:0},h.prototype.compareStart=function(a,r){return this.start.row==a&&this.start.column==r?-1:this.compare(a,r)},h.prototype.compareEnd=function(a,r){return this.end.row==a&&this.end.column==r?1:this.compare(a,r)},h.prototype.compareInside=function(a,r){return this.end.row==a&&this.end.column==r?1:this.start.row==a&&this.start.column==r?-1:this.compare(a,r)},h.prototype.clipRows=function(a,r){if(this.end.row>r)var l={row:r+1,column:0};else if(this.end.row<a)var l={row:a,column:0};if(this.start.row>r)var u={row:r+1,column:0};else if(this.start.row<a)var u={row:a,column:0};return h.fromPoints(u||this.start,l||this.end)},h.prototype.extend=function(a,r){var l=this.compare(a,r);if(l==0)return this;if(l==-1)var u={row:a,column:r};else var i={row:a,column:r};return h.fromPoints(u||this.start,i||this.end)},h.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},h.prototype.isMultiLine=function(){return this.start.row!==this.end.row},h.prototype.clone=function(){return h.fromPoints(this.start,this.end)},h.prototype.collapseRows=function(){return this.end.column==0?new h(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new h(this.start.row,0,this.end.row,0)},h.prototype.toScreenRange=function(a){var r=a.documentToScreenPosition(this.start),l=a.documentToScreenPosition(this.end);return new h(r.row,r.column,l.row,l.column)},h.prototype.moveBy=function(a,r){this.start.row+=a,this.start.column+=r,this.end.row+=a,this.end.column+=r},h}();o.fromPoints=function(h,a){return new o(h.row,h.column,a.row,a.column)},o.comparePoints=function(h,a){return h.row-a.row||h.column-a.column},t.Range=o});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var o=e("./oop"),h=function(){var a={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};a.PRINTABLE_KEYS[173]="-";var r,l;for(l in a.FUNCTION_KEYS)r=a.FUNCTION_KEYS[l].toLowerCase(),a[r]=parseInt(l,10);for(l in a.PRINTABLE_KEYS)r=a.PRINTABLE_KEYS[l].toLowerCase(),a[r]=parseInt(l,10);return o.mixin(a,a.MODIFIER_KEYS),o.mixin(a,a.PRINTABLE_KEYS),o.mixin(a,a.FUNCTION_KEYS),a.enter=a.return,a.escape=a.esc,a.del=a.delete,function(){for(var u=["cmd","ctrl","alt","shift"],i=Math.pow(2,u.length);i--;)a.KEY_MODS[i]=u.filter(function(s){return i&a.KEY_MODS[s]}).join("-")+"-"}(),a.KEY_MODS[0]="",a.KEY_MODS[-1]="input-",a}();o.mixin(t,h),t.default=t,t.keyCodeToString=function(a){var r=h[a];return typeof r!="string"&&(r=String.fromCharCode(a)),r.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var o=e("./keys"),h=e("./useragent"),a=null,r=0,l;function u(){l=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return l={passive:!1},!0}})}catch{}}function i(){return l==null&&u(),l}function s(v,y,C){this.elem=v,this.type=y,this.callback=C}s.prototype.destroy=function(){p(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var f=t.addListener=function(v,y,C,S){v.addEventListener(y,C,i()),S&&S.$toDestroy.push(new s(v,y,C))},p=t.removeListener=function(v,y,C){v.removeEventListener(y,C,i())};t.stopEvent=function(v){return t.stopPropagation(v),t.preventDefault(v),!1},t.stopPropagation=function(v){v.stopPropagation&&v.stopPropagation()},t.preventDefault=function(v){v.preventDefault&&v.preventDefault()},t.getButton=function(v){return v.type=="dblclick"?0:v.type=="contextmenu"||h.isMac&&v.ctrlKey&&!v.altKey&&!v.shiftKey?2:v.button},t.capture=function(v,y,C){var S=v&&v.ownerDocument||document;function D(g){y&&y(g),C&&C(g),p(S,"mousemove",y),p(S,"mouseup",D),p(S,"dragstart",D)}return f(S,"mousemove",y),f(S,"mouseup",D),f(S,"dragstart",D),D},t.addMouseWheelListener=function(v,y,C){f(v,"wheel",function(S){var D=.15,g=S.deltaX||0,b=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=g*D,S.wheelY=b*D;break;case S.DOM_DELTA_LINE:var F=15;S.wheelX=g*F,S.wheelY=b*F;break;case S.DOM_DELTA_PAGE:var E=150;S.wheelX=g*E,S.wheelY=b*E;break}y(S)},C)},t.addMultiMouseDownListener=function(v,y,C,S,D){var g=0,b,F,E,T={2:"dblclick",3:"tripleclick",4:"quadclick"};function M(w){if(t.getButton(w)!==0?g=0:w.detail>1?(g++,g>4&&(g=1)):g=1,h.isIE){var x=Math.abs(w.clientX-b)>5||Math.abs(w.clientY-F)>5;(!E||x)&&(g=1),E&&clearTimeout(E),E=setTimeout(function(){E=null},y[g-1]||600),g==1&&(b=w.clientX,F=w.clientY)}if(w._clicks=g,C[S]("mousedown",w),g>4)g=0;else if(g>1)return C[S](T[g],w)}Array.isArray(v)||(v=[v]),v.forEach(function(w){f(w,"mousedown",M,D)})};var d=function(v){return 0|(v.ctrlKey?1:0)|(v.altKey?2:0)|(v.shiftKey?4:0)|(v.metaKey?8:0)};t.getModifierString=function(v){return o.KEY_MODS[d(v)]};function c(v,y,C){var S=d(y);if(!h.isMac&&a){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(S|=8),a.altGr)if((3&S)!=3)a.altGr=0;else return;if(C===18||C===17){var D="location"in y?y.location:y.keyLocation;if(C===17&&D===1)a[C]==1&&(r=y.timeStamp);else if(C===18&&S===3&&D===2){var g=y.timeStamp-r;g<50&&(a.altGr=!0)}}}if(C in o.MODIFIER_KEYS&&(C=-1),!S&&C===13){var D="location"in y?y.location:y.keyLocation;if(D===3&&(v(y,S,-C),y.defaultPrevented))return}if(h.isChromeOS&&S&8){if(v(y,S,C),y.defaultPrevented)return;S&=-9}return!S&&!(C in o.FUNCTION_KEYS)&&!(C in o.PRINTABLE_KEYS)?!1:v(y,S,C)}t.addCommandKeyListener=function(v,y,C){var S=null;f(v,"keydown",function(D){a[D.keyCode]=(a[D.keyCode]||0)+1;var g=c(y,D,D.keyCode);return S=D.defaultPrevented,g},C),f(v,"keypress",function(D){S&&(D.ctrlKey||D.altKey||D.shiftKey||D.metaKey)&&(t.stopEvent(D),S=null)},C),f(v,"keyup",function(D){a[D.keyCode]=null},C),a||(_(),f(window,"focus",_))};function _(){a=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!h.isOldIE){var m=1;t.nextTick=function(v,y){y=y||window;var C="zero-timeout-message-"+m++,S=function(D){D.data==C&&(t.stopPropagation(D),p(y,"message",S),v())};f(y,"message",S),y.postMessage(C,"*")}}t.$idleBlocked=!1,t.onIdle=function(v,y){return setTimeout(function C(){t.$idleBlocked?setTimeout(C,100):v()},y)},t.$idleBlockId=null,t.blockIdle=function(v){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},v||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(v){setTimeout(v,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var o;n.exports={lineMode:!1,pasteCancelled:function(){return o&&o>Date.now()-50?!0:o=!1},cancel:function(){o=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var o=e("../lib/event"),h=e("../config").nls,a=e("../lib/useragent"),r=e("../lib/dom"),l=e("../lib/lang"),u=e("../clipboard"),i=a.isChrome<18,s=a.isIE,f=a.isChrome>63,p=400,d=e("../lib/keys"),c=d.KEY_MODS,_=a.isIOS,m=_?/\s/:/\n/,v=a.isMobile,y;y=function(C,S){var D=r.createElement("textarea");D.className="ace_text-input",D.setAttribute("wrap","off"),D.setAttribute("autocorrect","off"),D.setAttribute("autocapitalize","off"),D.setAttribute("spellcheck","false"),D.style.opacity="0",C.insertBefore(D,C.firstChild);var g=!1,b=!1,F=!1,E=!1,T="";v||(D.style.fontSize="1px");var M=!1,w=!1,x="",L=0,R=0,A=0,I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,H=0;try{var P=document.activeElement===D}catch{}this.setNumberOfExtraLines=function(j){if(I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,j<0){H=0;return}H=j},this.setAriaOptions=function(j){if(j.activeDescendant?(D.setAttribute("aria-haspopup","true"),D.setAttribute("aria-autocomplete",j.inline?"both":"list"),D.setAttribute("aria-activedescendant",j.activeDescendant)):(D.setAttribute("aria-haspopup","false"),D.setAttribute("aria-autocomplete","both"),D.removeAttribute("aria-activedescendant")),j.role&&D.setAttribute("role",j.role),j.setLabel&&(D.setAttribute("aria-roledescription",h("editor")),S.session)){var ie=S.session.selection.cursor.row;D.setAttribute("aria-label",h("Cursor at row $0",[ie+1]))}},this.setAriaOptions({role:"textbox"}),o.addListener(D,"blur",function(j){w||(S.onBlur(j),P=!1)},S),o.addListener(D,"focus",function(j){if(!w){if(P=!0,a.isEdge)try{if(!document.hasFocus())return}catch{}S.onFocus(j),a.isEdge?setTimeout(G):G()}},S),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:S.renderer.enableKeyboardAccessibility}),T||f||this.$focusScroll=="browser")return D.focus({preventScroll:!0});var j=D.style.top;D.style.position="fixed",D.style.top="0px";try{var ie=D.getBoundingClientRect().top!=0}catch{return}var pe=[];if(ie)for(var Ve=D.parentElement;Ve&&Ve.nodeType==1;)pe.push(Ve),Ve.setAttribute("ace_nocontext","true"),!Ve.parentElement&&Ve.getRootNode?Ve=Ve.getRootNode().host:Ve=Ve.parentElement;D.focus({preventScroll:!0}),ie&&pe.forEach(function(it){it.removeAttribute("ace_nocontext")}),setTimeout(function(){D.style.position="",D.style.top=="0px"&&(D.style.top=j)},0)},this.blur=function(){D.blur()},this.isFocused=function(){return P},S.on("beforeEndOperation",function(){var j=S.curOp,ie=j&&j.command&&j.command.name;if(ie!="insertstring"){var pe=ie&&(j.docChanged||j.selectionChanged);F&&pe&&(x=D.value="",It()),G()}});var q=function(j,ie){for(var pe=ie,Ve=1;Ve<=j-I&&Ve<2*H+1;Ve++)pe+=S.session.getLine(j-Ve).length+1;return pe},G=_?function(j){if(!(!P||g&&!j||E)){j||(j="");var ie=`
 ab`+j+`cde fg
`;ie!=D.value&&(D.value=x=ie);var pe=4,Ve=4+(j.length||(S.selection.isEmpty()?0:1));(L!=pe||R!=Ve)&&D.setSelectionRange(pe,Ve),L=pe,R=Ve}}:function(){if(!(F||E)&&!(!P&&!B)){F=!0;var j=0,ie=0,pe="";if(S.session){var Ve=S.selection,it=Ve.getRange(),gt=Ve.cursor.row;gt===$+1?(I=$+1,$=I+2*H):gt===I-1?($=I-1,I=$-2*H):(gt<I-1||gt>$+1)&&(I=gt>H?gt-H:0,$=gt>H?gt+H:2*H);for(var Ge=[],Rt=I;Rt<=$;Rt++)Ge.push(S.session.getLine(Rt));if(pe=Ge.join(`
`),j=q(it.start.row,it.start.column),ie=q(it.end.row,it.end.column),it.start.row<I){var tn=S.session.getLine(I-1);j=it.start.row<I-1?0:j,ie+=tn.length+1,pe=tn+`
`+pe}else if(it.end.row>$){var Ot=S.session.getLine($+1);ie=it.end.row>$+1?Ot.length:it.end.column,ie+=pe.length+1,pe=pe+`
`+Ot}else v&&gt>0&&(pe=`
`+pe,ie+=1,j+=1);pe.length>p&&(j<p&&ie<p?pe=pe.slice(0,p):(pe=`
`,j==ie?j=ie=0:(j=0,ie=1)));var er=pe+`

`;er!=x&&(D.value=x=er,L=R=er.length)}if(B&&(L=D.selectionStart,R=D.selectionEnd),R!=ie||L!=j||D.selectionEnd!=R)try{D.setSelectionRange(j,ie),L=j,R=ie}catch{}F=!1}};this.resetSelection=G,P&&S.onFocus();var N=function(j){return j.selectionStart===0&&j.selectionEnd>=x.length&&j.value===x&&x&&j.selectionEnd!==R},Q=function(j){F||(g?g=!1:N(D)?(S.selectAll(),G()):v&&D.selectionStart!=L&&G())},O=null;this.setInputHandler=function(j){O=j},this.getInputHandler=function(){return O};var B=!1,U=function(j,ie){if(B&&(B=!1),b)return G(),j&&S.onPaste(j),b=!1,"";for(var pe=D.selectionStart,Ve=D.selectionEnd,it=L,gt=x.length-R,Ge=j,Rt=j.length-pe,tn=j.length-Ve,Ot=0;it>0&&x[Ot]==j[Ot];)Ot++,it--;for(Ge=Ge.slice(Ot),Ot=1;gt>0&&x.length-Ot>L-1&&x[x.length-Ot]==j[j.length-Ot];)Ot++,gt--;Rt-=Ot-1,tn-=Ot-1;var er=Ge.length-Ot+1;if(er<0&&(it=-er,er=0),Ge=Ge.slice(0,er),!ie&&!Ge&&!Rt&&!it&&!gt&&!tn)return"";E=!0;var vu=!1;return a.isAndroid&&Ge==". "&&(Ge="  ",vu=!0),Ge&&!it&&!gt&&!Rt&&!tn||M?S.onTextInput(Ge):S.onTextInput(Ge,{extendLeft:it,extendRight:gt,restoreStart:Rt,restoreEnd:tn}),E=!1,x=j,L=pe,R=Ve,A=tn,vu?`
`:Ge},k=function(j){if(F)return Fe();if(j&&j.inputType){if(j.inputType=="historyUndo")return S.execCommand("undo");if(j.inputType=="historyRedo")return S.execCommand("redo")}var ie=D.value,pe=U(ie,!0);(ie.length>p+100||m.test(pe)||v&&L<1&&L==R)&&G()},te=function(j,ie,pe){var Ve=j.clipboardData||window.clipboardData;if(!(!Ve||i)){var it=s||pe?"Text":"text/plain";try{return ie?Ve.setData(it,ie)!==!1:Ve.getData(it)}catch(gt){if(!pe)return te(gt,ie,!0)}}},J=function(j,ie){var pe=S.getCopyText();if(!pe)return o.preventDefault(j);te(j,pe)?(_&&(G(pe),g=pe,setTimeout(function(){g=!1},10)),ie?S.onCut():S.onCopy(),o.preventDefault(j)):(g=!0,D.value=pe,D.select(),setTimeout(function(){g=!1,G(),ie?S.onCut():S.onCopy()}))},ye=function(j){J(j,!0)},Ae=function(j){J(j,!1)},we=function(j){var ie=te(j);u.pasteCancelled()||(typeof ie=="string"?(ie&&S.onPaste(ie,j),a.isIE&&setTimeout(G),o.preventDefault(j)):(D.value="",b=!0))};o.addCommandKeyListener(D,S.onCommandKey.bind(S),S),o.addListener(D,"select",Q,S),o.addListener(D,"input",k,S),o.addListener(D,"cut",ye,S),o.addListener(D,"copy",Ae,S),o.addListener(D,"paste",we,S),(!("oncut"in D)||!("oncopy"in D)||!("onpaste"in D))&&o.addListener(C,"keydown",function(j){if(!(a.isMac&&!j.metaKey||!j.ctrlKey))switch(j.keyCode){case 67:Ae(j);break;case 86:we(j);break;case 88:ye(j);break}},S);var ce=function(j){if(!(F||!S.onCompositionStart||S.$readOnly)&&(F={},!M)){j.data&&(F.useTextareaForIME=!1),setTimeout(Fe,0),S._signal("compositionStart"),S.on("mousedown",un);var ie=S.getSelectionRange();ie.end.row=ie.start.row,ie.end.column=ie.start.column,F.markerRange=ie,F.selectionStart=L,S.onCompositionStart(F),F.useTextareaForIME?(x=D.value="",L=0,R=0):(D.msGetInputContext&&(F.context=D.msGetInputContext()),D.getInputContext&&(F.context=D.getInputContext()))}},Fe=function(){if(!(!F||!S.onCompositionUpdate||S.$readOnly)){if(M)return un();if(F.useTextareaForIME)S.onCompositionUpdate(D.value);else{var j=D.value;U(j),F.markerRange&&(F.context&&(F.markerRange.start.column=F.selectionStart=F.context.compositionStartOffset),F.markerRange.end.column=F.markerRange.start.column+R-F.selectionStart+A)}}},It=function(j){!S.onCompositionEnd||S.$readOnly||(F=!1,S.onCompositionEnd(),S.off("mousedown",un),j&&k())};function un(){w=!0,D.blur(),D.focus(),w=!1}var Gt=l.delayedCall(Fe,50).schedule.bind(null,null);function tt(j){j.keyCode==27&&D.value.length<D.selectionStart&&(F||(x=D.value),L=R=-1,G()),Gt()}o.addListener(D,"compositionstart",ce,S),o.addListener(D,"compositionupdate",Fe,S),o.addListener(D,"keyup",tt,S),o.addListener(D,"keydown",Gt,S),o.addListener(D,"compositionend",It,S),this.getElement=function(){return D},this.setCommandMode=function(j){M=j,D.readOnly=!1},this.setReadOnly=function(j){M||(D.readOnly=j)},this.setCopyWithEmptySelection=function(j){},this.onContextMenu=function(j){B=!0,G(),S._emit("nativecontextmenu",{target:S,domEvent:j}),this.moveToMouse(j,!0)},this.moveToMouse=function(j,ie){T||(T=D.style.cssText),D.style.cssText=(ie?"z-index:100000;":"")+(a.isIE?"opacity:0.1;":"")+"text-indent: -"+(L+R)*S.renderer.characterWidth*.5+"px;";var pe=S.container.getBoundingClientRect(),Ve=r.computedStyle(S.container),it=pe.top+(parseInt(Ve.borderTopWidth)||0),gt=pe.left+(parseInt(pe.borderLeftWidth)||0),Ge=pe.bottom-it-D.clientHeight-2,Rt=function(tn){r.translate(D,tn.clientX-gt-2,Math.min(tn.clientY-it-2,Ge))};Rt(j),j.type=="mousedown"&&(S.renderer.$isMousePressed=!0,clearTimeout(le),a.isWin&&o.capture(S.container,Rt,ve))},this.onContextMenuClose=ve;var le;function ve(){clearTimeout(le),le=setTimeout(function(){T&&(D.style.cssText=T,T=""),S.renderer.$isMousePressed=!1,S.renderer.$keepTextAreaAtCursor&&S.renderer.$moveTextAreaToCursor()},0)}var fe=function(j){S.textInput.onContextMenu(j),ve()};o.addListener(D,"mouseup",fe,S),o.addListener(D,"mousedown",function(j){j.preventDefault(),ve()},S),o.addListener(S.renderer.scroller,"contextmenu",fe,S),o.addListener(D,"contextmenu",fe,S),_&&ae(C,S,D);function ae(j,ie,pe){var Ve=null,it=!1;pe.addEventListener("keydown",function(Ge){Ve&&clearTimeout(Ve),it=!0},!0),pe.addEventListener("keyup",function(Ge){Ve=setTimeout(function(){it=!1},100)},!0);var gt=function(Ge){if(document.activeElement===pe&&!(it||F||ie.$mouseHandler.isMousePressed)&&!g){var Rt=pe.selectionStart,tn=pe.selectionEnd,Ot=null,er=0;if(Rt==0?Ot=d.up:Rt==1?Ot=d.home:tn>R&&x[tn]==`
`?Ot=d.end:Rt<L&&x[Rt-1]==" "?(Ot=d.left,er=c.option):Rt<L||Rt==L&&R!=L&&Rt==tn?Ot=d.left:tn>R&&x.slice(0,tn).split(`
`).length>2?Ot=d.down:tn>R&&x[tn-1]==" "?(Ot=d.right,er=c.option):(tn>R||tn==R&&R!=L&&Rt==tn)&&(Ot=d.right),Rt!==tn&&(er|=c.shift),Ot){var vu=ie.onCommandKey({},er,Ot);if(!vu&&ie.commands){Ot=d.keyCodeToString(Ot);var IM=ie.commands.findKeyCommand(er,Ot);IM&&ie.execCommand(IM)}L=Rt,R=tn,G("")}}};document.addEventListener("selectionchange",gt),ie.on("destroy",function(){document.removeEventListener("selectionchange",gt)})}this.destroy=function(){D.parentElement&&D.parentElement.removeChild(D)}},t.TextInput=y,t.$setUserAgentForTests=function(C,S){v=C,_=S}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var o=e("../lib/useragent"),h=0,a=550,r=function(){function i(s){s.$clickSelection=null;var f=s.editor;f.setDefaultHandler("mousedown",this.onMouseDown.bind(s)),f.setDefaultHandler("dblclick",this.onDoubleClick.bind(s)),f.setDefaultHandler("tripleclick",this.onTripleClick.bind(s)),f.setDefaultHandler("quadclick",this.onQuadClick.bind(s)),f.setDefaultHandler("mousewheel",this.onMouseWheel.bind(s));var p=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];p.forEach(function(d){s[d]=this[d]},this),s.selectByLines=this.extendSelectionBy.bind(s,"getLineRange"),s.selectByWords=this.extendSelectionBy.bind(s,"getWordRange")}return i.prototype.onMouseDown=function(s){var f=s.inSelection(),p=s.getDocumentPosition();this.mousedownEvent=s;var d=this.editor,c=s.getButton();if(c!==0){var _=d.getSelectionRange(),m=_.isEmpty();(m||c==1)&&d.selection.moveToPosition(p),c==2&&(d.textInput.onContextMenu(s.domEvent),o.isMozilla||s.preventDefault());return}if(this.mousedownEvent.time=Date.now(),f&&!d.isFocused()&&(d.focus(),this.$focusTimeout&&!this.$clickSelection&&!d.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(s);return}return this.captureMouse(s),this.startSelect(p,s.domEvent._clicks>1),s.preventDefault()},i.prototype.startSelect=function(s,f){s=s||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var p=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?p.selection.selectToPosition(s):f||p.selection.moveToPosition(s),f||this.select(),p.setStyle("ace_selecting"),this.setState("select"))},i.prototype.select=function(){var s,f=this.editor,p=f.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var d=this.$clickSelection.comparePoint(p);if(d==-1)s=this.$clickSelection.end;else if(d==1)s=this.$clickSelection.start;else{var c=u(this.$clickSelection,p);p=c.cursor,s=c.anchor}f.selection.setSelectionAnchor(s.row,s.column)}f.selection.selectToPosition(p),f.renderer.scrollCursorIntoView()},i.prototype.extendSelectionBy=function(s){var f,p=this.editor,d=p.renderer.screenToTextCoordinates(this.x,this.y),c=p.selection[s](d.row,d.column);if(this.$clickSelection){var _=this.$clickSelection.comparePoint(c.start),m=this.$clickSelection.comparePoint(c.end);if(_==-1&&m<=0)f=this.$clickSelection.end,(c.end.row!=d.row||c.end.column!=d.column)&&(d=c.start);else if(m==1&&_>=0)f=this.$clickSelection.start,(c.start.row!=d.row||c.start.column!=d.column)&&(d=c.end);else if(_==-1&&m==1)d=c.end,f=c.start;else{var v=u(this.$clickSelection,d);d=v.cursor,f=v.anchor}p.selection.setSelectionAnchor(f.row,f.column)}p.selection.selectToPosition(d),p.renderer.scrollCursorIntoView()},i.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},i.prototype.focusWait=function(){var s=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),f=Date.now();(s>h||f-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},i.prototype.onDoubleClick=function(s){var f=s.getDocumentPosition(),p=this.editor,d=p.session,c=d.getBracketRange(f);c?(c.isEmpty()&&(c.start.column--,c.end.column++),this.setState("select")):(c=p.selection.getWordRange(f.row,f.column),this.setState("selectByWords")),this.$clickSelection=c,this.select()},i.prototype.onTripleClick=function(s){var f=s.getDocumentPosition(),p=this.editor;this.setState("selectByLines");var d=p.getSelectionRange();d.isMultiLine()&&d.contains(f.row,f.column)?(this.$clickSelection=p.selection.getLineRange(d.start.row),this.$clickSelection.end=p.selection.getLineRange(d.end.row).end):this.$clickSelection=p.selection.getLineRange(f.row),this.select()},i.prototype.onQuadClick=function(s){var f=this.editor;f.selectAll(),this.$clickSelection=f.getSelectionRange(),this.setState("selectAll")},i.prototype.onMouseWheel=function(s){if(!s.getAccelKey()){s.getShiftKey()&&s.wheelY&&!s.wheelX&&(s.wheelX=s.wheelY,s.wheelY=0);var f=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var p=this.$lastScroll,d=s.domEvent.timeStamp,c=d-p.t,_=c?s.wheelX/c:p.vx,m=c?s.wheelY/c:p.vy;c<a&&(_=(_+p.vx)/2,m=(m+p.vy)/2);var v=Math.abs(_/m),y=!1;if(v>=1&&f.renderer.isScrollableBy(s.wheelX*s.speed,0)&&(y=!0),v<=1&&f.renderer.isScrollableBy(0,s.wheelY*s.speed)&&(y=!0),y)p.allowed=d;else if(d-p.allowed<a){var C=Math.abs(_)<=1.5*Math.abs(p.vx)&&Math.abs(m)<=1.5*Math.abs(p.vy);C?(y=!0,p.allowed=d):p.allowed=0}if(p.t=d,p.vx=_,p.vy=m,y)return f.renderer.scrollBy(s.wheelX*s.speed,s.wheelY*s.speed),s.stop()}},i}();r.prototype.selectEnd=r.prototype.selectByLinesEnd,r.prototype.selectAllEnd=r.prototype.selectByLinesEnd,r.prototype.selectByWordsEnd=r.prototype.selectByLinesEnd,t.DefaultHandlers=r;function l(i,s,f,p){return Math.sqrt(Math.pow(f-i,2)+Math.pow(p-s,2))}function u(i,s){if(i.start.row==i.end.row)var f=2*s.column-i.start.column-i.end.column;else if(i.start.row==i.end.row-1&&!i.start.column&&!i.end.column)var f=s.column-4;else var f=2*s.row-i.start.row-i.end.row;return f<0?{cursor:i.start,anchor:i.end}:{cursor:i.end,anchor:i.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,n){t.preventParentScroll=function(h){h.stopPropagation();var a=h.currentTarget,r=a.scrollHeight>a.clientHeight;r||h.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,n){"use strict";var o=this&&this.__extends||function(){var c=function(_,m){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(v[C]=y[C])},c(_,m)};return function(_,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");c(_,m);function v(){this.constructor=_}_.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}(),h=this&&this.__values||function(c){var _=typeof Symbol=="function"&&Symbol.iterator,m=_&&c[_],v=0;if(m)return m.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&v>=c.length&&(c=void 0),{value:c&&c[v++],done:!c}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},a=e("./lib/dom"),r=e("./lib/event"),l=e("./range").Range,u=e("./lib/scroll").preventParentScroll,i="ace_tooltip",s=function(){function c(_){this.isOpen=!1,this.$element=null,this.$parentNode=_}return c.prototype.$init=function(){return this.$element=a.createElement("div"),this.$element.className=i,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},c.prototype.getElement=function(){return this.$element||this.$init()},c.prototype.setText=function(_){this.getElement().textContent=_},c.prototype.setHtml=function(_){this.getElement().innerHTML=_},c.prototype.setPosition=function(_,m){this.getElement().style.left=_+"px",this.getElement().style.top=m+"px"},c.prototype.setClassName=function(_){a.addCssClass(this.getElement(),_)},c.prototype.setTheme=function(_){this.$element.className=i+" "+(_.isDark?"ace_dark ":"")+(_.cssClass||"")},c.prototype.show=function(_,m,v){_!=null&&this.setText(_),m!=null&&v!=null&&this.setPosition(m,v),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},c.prototype.hide=function(_){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=i,this.isOpen=!1)},c.prototype.getHeight=function(){return this.getElement().offsetHeight},c.prototype.getWidth=function(){return this.getElement().offsetWidth},c.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},c}(),f=function(){function c(){this.popups=[]}return c.prototype.addPopup=function(_){this.popups.push(_),this.updatePopups()},c.prototype.removePopup=function(_){var m=this.popups.indexOf(_);m!==-1&&(this.popups.splice(m,1),this.updatePopups())},c.prototype.updatePopups=function(){var _,m,v,y;this.popups.sort(function(M,w){return w.priority-M.priority});var C=[];try{for(var S=h(this.popups),D=S.next();!D.done;D=S.next()){var g=D.value,b=!0;try{for(var F=(v=void 0,h(C)),E=F.next();!E.done;E=F.next()){var T=E.value;if(this.doPopupsOverlap(T,g)){b=!1;break}}}catch(M){v={error:M}}finally{try{E&&!E.done&&(y=F.return)&&y.call(F)}finally{if(v)throw v.error}}b?C.push(g):g.hide()}}catch(M){_={error:M}}finally{try{D&&!D.done&&(m=S.return)&&m.call(S)}finally{if(_)throw _.error}}},c.prototype.doPopupsOverlap=function(_,m){var v=_.getElement().getBoundingClientRect(),y=m.getElement().getBoundingClientRect();return v.left<y.right&&v.right>y.left&&v.top<y.bottom&&v.bottom>y.top},c}(),p=new f;t.popupManager=p,t.Tooltip=s;var d=function(c){o(_,c);function _(m){m===void 0&&(m=document.body);var v=c.call(this,m)||this;v.timeout=void 0,v.lastT=0,v.idleTime=350,v.lastEvent=void 0,v.onMouseOut=v.onMouseOut.bind(v),v.onMouseMove=v.onMouseMove.bind(v),v.waitForHover=v.waitForHover.bind(v),v.hide=v.hide.bind(v);var y=v.getElement();return y.style.whiteSpace="pre-wrap",y.style.pointerEvents="auto",y.addEventListener("mouseout",v.onMouseOut),y.tabIndex=-1,y.addEventListener("blur",function(){y.contains(document.activeElement)||this.hide()}.bind(v)),y.addEventListener("wheel",u),v}return _.prototype.addToEditor=function(m){m.on("mousemove",this.onMouseMove),m.on("mousedown",this.hide),m.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},_.prototype.removeFromEditor=function(m){m.off("mousemove",this.onMouseMove),m.off("mousedown",this.hide),m.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},_.prototype.onMouseMove=function(m,v){this.lastEvent=m,this.lastT=Date.now();var y=v.$mouseHandler.isMousePressed;if(this.isOpen){var C=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(C.row,C.column)||y||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||y||(this.lastEvent=m,this.timeout=setTimeout(this.waitForHover,this.idleTime))},_.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var m=Date.now()-this.lastT;if(this.idleTime-m>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-m);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},_.prototype.isOutsideOfText=function(m){var v=m.editor,y=m.getDocumentPosition(),C=v.session.getLine(y.row);if(y.column==C.length){var S=v.renderer.pixelToScreenCoordinates(m.clientX,m.clientY),D=v.session.documentToScreenPosition(y.row,y.column);if(D.column!=S.column||D.row!=S.row)return!0}return!1},_.prototype.setDataProvider=function(m){this.$gatherData=m},_.prototype.showForRange=function(m,v,y,C){var S=10;if(!(C&&C!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var D=m.renderer;this.isOpen||(p.addPopup(this),this.$registerCloseEvents(),this.setTheme(D.theme)),this.isOpen=!0,this.addMarker(v,m.session),this.range=l.fromPoints(v.start,v.end);var g=D.textToScreenCoordinates(v.start.row,v.start.column),b=D.scroller.getBoundingClientRect();g.pageX<b.left&&(g.pageX=b.left);var F=this.getElement();F.innerHTML="",F.appendChild(y),F.style.maxHeight="",F.style.display="block";var E=F.clientHeight,T=F.clientWidth,M=window.innerHeight-g.pageY-D.lineHeight,w=!0;g.pageY-E<0&&g.pageY<M&&(w=!1),F.style.maxHeight=(w?g.pageY:M)-S+"px",F.style.top=w?"":g.pageY+D.lineHeight+"px",F.style.bottom=w?window.innerHeight-g.pageY+"px":"",F.style.left=Math.min(g.pageX,window.innerWidth-T-S)+"px"}},_.prototype.addMarker=function(m,v){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=v,this.marker=v&&v.addMarker(m,"ace_highlight-marker","text")},_.prototype.hide=function(m){!m&&document.activeElement==this.getElement()||m&&m.target&&(m.type!="keydown"||m.ctrlKey||m.metaKey)&&this.$element.contains(m.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,p.removePopup(this)))},_.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},_.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},_.prototype.onMouseOut=function(m){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!m.relatedTarget||this.getElement().contains(m.relatedTarget)||m&&m.currentTarget.contains(m.relatedTarget)||m.relatedTarget.classList.contains("ace_content")||this.hide())},_}(s);t.HoverTooltip=d});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,t,n){"use strict";var o=this&&this.__extends||function(){var f=function(p,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(c[m]=_[m])},f(p,d)};return function(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(p,d);function c(){this.constructor=p}p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),h=this&&this.__values||function(f){var p=typeof Symbol=="function"&&Symbol.iterator,d=p&&f[p],c=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&c>=f.length&&(f=void 0),{value:f&&f[c++],done:!f}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},a=e("../lib/dom"),r=e("../lib/event"),l=e("../tooltip").Tooltip,u=e("../config").nls;function i(f){var p=f.editor,d=p.renderer.$gutterLayer,c=new s(p);f.editor.setDefaultHandler("guttermousedown",function(S){if(!(!p.isFocused()||S.getButton()!=0)){var D=d.getRegion(S);if(D!="foldWidgets"){var g=S.getDocumentPosition().row,b=p.session.selection;if(S.getShiftKey())b.selectTo(g,0);else{if(S.domEvent.detail==2)return p.selectAll(),S.preventDefault();f.$clickSelection=p.selection.getLineRange(g)}return f.setState("selectByLines"),f.captureMouse(S),S.preventDefault()}}});var _,m;function v(){var S=m.getDocumentPosition().row,D=p.session.getLength();if(S==D){var g=p.renderer.pixelToScreenCoordinates(0,m.y).row,b=m.$pos;if(g>p.session.documentToScreenRow(b.row,b.column))return y()}if(c.showTooltip(S),!!c.isOpen)if(p.on("mousewheel",y),f.$tooltipFollowsMouse)C(m);else{var F=m.getGutterRow(),E=d.$lines.get(F);if(E){var T=E.element.querySelector(".ace_gutter_annotation"),M=T.getBoundingClientRect(),w=c.getElement().style;w.left=M.right+"px",w.top=M.bottom+"px"}else C(m)}}function y(){_&&(_=clearTimeout(_)),c.isOpen&&(c.hideTooltip(),p.off("mousewheel",y))}function C(S){c.setPosition(S.x,S.y)}f.editor.setDefaultHandler("guttermousemove",function(S){var D=S.domEvent.target||S.domEvent.srcElement;if(a.hasCssClass(D,"ace_fold-widget"))return y();c.isOpen&&f.$tooltipFollowsMouse&&C(S),m=S,!_&&(_=setTimeout(function(){_=null,m&&!f.isMousePressed?v():y()},50))}),r.addListener(p.renderer.$gutter,"mouseout",function(S){m=null,!(!c.isOpen||_)&&(_=setTimeout(function(){_=null,y()},50))},p),p.on("changeSession",y),p.on("input",y)}t.GutterHandler=i;var s=function(f){o(p,f);function p(d){var c=f.call(this,d.container)||this;return c.editor=d,c}return p.prototype.setPosition=function(d,c){var _=window.innerWidth||document.documentElement.clientWidth,m=window.innerHeight||document.documentElement.clientHeight,v=this.getWidth(),y=this.getHeight();d+=15,c+=15,d+v>_&&(d-=d+v-_),c+y>m&&(c-=20+y),l.prototype.setPosition.call(this,d,c)},Object.defineProperty(p,"annotationLabels",{get:function(){return{error:{singular:u("error"),plural:u("errors")},warning:{singular:u("warning"),plural:u("warnings")},info:{singular:u("information message"),plural:u("information messages")}}},enumerable:!1,configurable:!0}),p.prototype.showTooltip=function(d){var c=this.editor.renderer.$gutterLayer,_=c.$annotations[d],m;_?m={text:Array.from(_.text),type:Array.from(_.type)}:m={text:[],type:[]};var v=c.session.getFoldLine(d);if(v&&c.$showFoldedAnnotations){for(var y={error:[],warning:[],info:[]},C,S=d+1;S<=v.end.row;S++)if(c.$annotations[S])for(var D=0;D<c.$annotations[S].text.length;D++){var g=c.$annotations[S].type[D];if(y[g].push(c.$annotations[S].text[D]),g==="error"){C="error_fold";continue}if(g==="warning"){C="warning_fold";continue}}if(C==="error_fold"||C==="warning_fold"){var b="".concat(p.annotationsToSummaryString(y)," in folded code.");m.text.push(b),m.type.push(C)}}if(m.text.length===0)return this.hide();for(var F={error:[],warning:[],info:[]},E=c.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",S=0;S<m.text.length;S++){var T="<span class='ace_".concat(m.type[S]," ").concat(E,"' aria-label='").concat(p.annotationLabels[m.type[S].replace("_fold","")].singular,"' role=img> </span> ").concat(m.text[S]);F[m.type[S].replace("_fold","")].push(T)}var M=[].concat(F.error,F.warning,F.info).join("<br>");this.setHtml(M),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},p.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},p.annotationsToSummaryString=function(d){var c,_,m=[],v=["error","warning","info"];try{for(var y=h(v),C=y.next();!C.done;C=y.next()){var S=C.value;if(d[S].length){var D=d[S].length===1?p.annotationLabels[S].singular:p.annotationLabels[S].plural;m.push("".concat(d[S].length," ").concat(D))}}}catch(g){c={error:g}}finally{try{C&&!C.done&&(_=y.return)&&_.call(y)}finally{if(c)throw c.error}}return m.join(", ")},p}(l);t.GutterTooltip=s});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var o=e("../lib/event"),h=e("../lib/useragent"),a=function(){function r(l,u){this.speed,this.wheelX,this.wheelY,this.domEvent=l,this.editor=u,this.x=this.clientX=l.clientX,this.y=this.clientY=l.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return r.prototype.stopPropagation=function(){o.stopPropagation(this.domEvent),this.propagationStopped=!0},r.prototype.preventDefault=function(){o.preventDefault(this.domEvent),this.defaultPrevented=!0},r.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},r.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},r.prototype.getGutterRow=function(){var l=this.getDocumentPosition().row,u=this.editor.session.documentToScreenRow(l,0),i=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return u-i},r.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var l=this.editor,u=l.getSelectionRange();if(u.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=u.contains(i.row,i.column)}return this.$inSelection},r.prototype.getButton=function(){return o.getButton(this.domEvent)},r.prototype.getShiftKey=function(){return this.domEvent.shiftKey},r.prototype.getAccelKey=function(){return h.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},r}();t.MouseEvent=a});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var o=e("../lib/dom"),h=e("../lib/event"),a=e("../lib/useragent"),r=200,l=200,u=5;function i(f){var p=f.editor,d=o.createElement("div");d.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",d.textContent="\xA0";var c=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];c.forEach(function(q){f[q]=this[q]},this),p.on("mousedown",this.onMouseDown.bind(f));var _=p.container,m,v,y,C,S,D,g=0,b,F,E,T,M;this.onDragStart=function(q){if(this.cancelDrag||!_.draggable){var G=this;return setTimeout(function(){G.startSelect(),G.captureMouse(q)},0),q.preventDefault()}S=p.getSelectionRange();var N=q.dataTransfer;N.effectAllowed=p.getReadOnly()?"copy":"copyMove",p.container.appendChild(d),N.setDragImage&&N.setDragImage(d,0,0),setTimeout(function(){p.container.removeChild(d)}),N.clearData(),N.setData("Text",p.session.getTextRange()),F=!0,this.setState("drag")},this.onDragEnd=function(q){if(_.draggable=!1,F=!1,this.setState(null),!p.getReadOnly()){var G=q.dataTransfer.dropEffect;!b&&G=="move"&&p.session.remove(p.getSelectionRange()),p.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(q){if(!(p.getReadOnly()||!H(q.dataTransfer)))return v=q.clientX,y=q.clientY,m||R(),g++,q.dataTransfer.dropEffect=b=P(q),h.preventDefault(q)},this.onDragOver=function(q){if(!(p.getReadOnly()||!H(q.dataTransfer)))return v=q.clientX,y=q.clientY,m||(R(),g++),I!==null&&(I=null),q.dataTransfer.dropEffect=b=P(q),h.preventDefault(q)},this.onDragLeave=function(q){if(g--,g<=0&&m)return A(),b=null,h.preventDefault(q)},this.onDrop=function(q){if(D){var G=q.dataTransfer;if(F)switch(b){case"move":S.contains(D.row,D.column)?S={start:D,end:D}:S=p.moveText(S,D);break;case"copy":S=p.moveText(S,D,!0);break}else{var N=G.getData("Text");S={start:D,end:p.session.insert(D,N)},p.focus(),b=null}return A(),h.preventDefault(q)}},h.addListener(_,"dragstart",this.onDragStart.bind(f),p),h.addListener(_,"dragend",this.onDragEnd.bind(f),p),h.addListener(_,"dragenter",this.onDragEnter.bind(f),p),h.addListener(_,"dragover",this.onDragOver.bind(f),p),h.addListener(_,"dragleave",this.onDragLeave.bind(f),p),h.addListener(_,"drop",this.onDrop.bind(f),p);function w(q,G){var N=Date.now(),Q=!G||q.row!=G.row,O=!G||q.column!=G.column;if(!T||Q||O)p.moveCursorToPosition(q),T=N,M={x:v,y};else{var B=s(M.x,M.y,v,y);B>u?T=null:N-T>=l&&(p.renderer.scrollCursorIntoView(),T=null)}}function x(q,G){var N=Date.now(),Q=p.renderer.layerConfig.lineHeight,O=p.renderer.layerConfig.characterWidth,B=p.renderer.scroller.getBoundingClientRect(),U={x:{left:v-B.left,right:B.right-v},y:{top:y-B.top,bottom:B.bottom-y}},k=Math.min(U.x.left,U.x.right),te=Math.min(U.y.top,U.y.bottom),J={row:q.row,column:q.column};k/O<=2&&(J.column+=U.x.left<U.x.right?-3:2),te/Q<=1&&(J.row+=U.y.top<U.y.bottom?-1:1);var ye=q.row!=J.row,Ae=q.column!=J.column,we=!G||q.row!=G.row;ye||Ae&&!we?E?N-E>=r&&p.renderer.scrollCursorIntoView(J):E=N:E=null}function L(){var q=D;D=p.renderer.screenToTextCoordinates(v,y),w(D,q),x(D,q)}function R(){S=p.selection.toOrientedRange(),m=p.session.addMarker(S,"ace_selection",p.getSelectionStyle()),p.clearSelection(),p.isFocused()&&p.renderer.$cursorLayer.setBlinking(!1),clearInterval(C),L(),C=setInterval(L,20),g=0,h.addListener(document,"mousemove",$)}function A(){clearInterval(C),p.session.removeMarker(m),m=null,p.selection.fromOrientedRange(S),p.isFocused()&&!F&&p.$resetCursorStyle(),S=null,D=null,g=0,E=null,T=null,h.removeListener(document,"mousemove",$)}var I=null;function $(){I==null&&(I=setTimeout(function(){I!=null&&m&&A()},20))}function H(q){var G=q.types;return!G||Array.prototype.some.call(G,function(N){return N=="text/plain"||N=="Text"})}function P(q){var G=["copy","copymove","all","uninitialized"],N=["move","copymove","linkmove","all","uninitialized"],Q=a.isMac?q.altKey:q.ctrlKey,O="uninitialized";try{O=q.dataTransfer.effectAllowed.toLowerCase()}catch{}var B="none";return Q&&G.indexOf(O)>=0?B="copy":N.indexOf(O)>=0?B="move":G.indexOf(O)>=0&&(B="copy"),B}}(function(){this.dragWait=function(){var f=Date.now()-this.mousedownEvent.time;f>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var f=this.editor.container;f.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(f){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var f=this.editor,p=f.container;p.draggable=!0,f.renderer.$cursorLayer.setBlinking(!1),f.setStyle("ace_dragging");var d=a.isWin?"default":"move";f.renderer.setCursorStyle(d),this.setState("dragReady")},this.onMouseDrag=function(f){var p=this.editor.container;if(a.isIE&&this.state=="dragReady"){var d=s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);d>3&&p.dragDrop()}if(this.state==="dragWait"){var d=s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);d>0&&(p.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(f){if(this.$dragEnabled){this.mousedownEvent=f;var p=this.editor,d=f.inSelection(),c=f.getButton(),_=f.domEvent.detail||1;if(_===1&&c===0&&d){if(f.editor.inMultiSelectMode&&(f.getAccelKey()||f.getShiftKey()))return;this.mousedownEvent.time=Date.now();var m=f.domEvent.target||f.domEvent.srcElement;if("unselectable"in m&&(m.unselectable="on"),p.getDragDelay()){if(a.isWebKit){this.cancelDrag=!0;var v=p.container;v.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(f,this.onMouseDrag.bind(this)),f.defaultPrevented=!0}}}}).call(i.prototype);function s(f,p,d,c){return Math.sqrt(Math.pow(d-f,2)+Math.pow(c-p,2))}t.DragdropHandler=i});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var o=e("./mouse_event").MouseEvent,h=e("../lib/event"),a=e("../lib/dom");t.addTouchListeners=function(r,l){var u="scroll",i,s,f,p,d,c,_=0,m,v=0,y=0,C=0,S,D;function g(){var w=window.navigator&&window.navigator.clipboard,x=!1,L=function(){var A=l.getCopyText(),I=l.session.getUndoManager().hasUndo();D.replaceChild(a.buildDom(x?["span",!A&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],A&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],A&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],w&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],I&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),D.firstChild)},R=function(A){var I=A.target.getAttribute("action");if(I=="more"||!x)return x=!x,L();I=="paste"?w.readText().then(function($){l.execCommand(I,$)}):I&&((I=="cut"||I=="copy")&&(w?w.writeText(l.getCopyText()):document.execCommand("copy")),l.execCommand(I)),D.firstChild.style.display="none",x=!1,I!="openCommandPalette"&&l.focus()};D=a.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(A){u="menu",A.stopPropagation(),A.preventDefault(),l.textInput.focus()},ontouchend:function(A){A.stopPropagation(),A.preventDefault(),R(A)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],l.container)}function b(){D||g();var w=l.selection.cursor,x=l.renderer.textToScreenCoordinates(w.row,w.column),L=l.renderer.textToScreenCoordinates(0,0).pageX,R=l.renderer.scrollLeft,A=l.container.getBoundingClientRect();D.style.top=x.pageY-A.top-3+"px",x.pageX-A.left<A.width-70?(D.style.left="",D.style.right="10px"):(D.style.right="",D.style.left=L+R-A.left+"px"),D.style.display="",D.firstChild.style.display="none",l.on("input",F)}function F(w){D&&(D.style.display="none"),l.off("input",F)}function E(){d=null,clearTimeout(d);var w=l.selection.getRange(),x=w.contains(m.row,m.column);(w.isEmpty()||!x)&&(l.selection.moveToPosition(m),l.selection.selectWord()),u="wait",b()}function T(){d=null,clearTimeout(d),l.selection.moveToPosition(m);var w=v>=2?l.selection.getLineRange(m.row):l.session.getBracketRange(m);w&&!w.isEmpty()?l.selection.setRange(w):l.selection.selectWord(),u="wait"}h.addListener(r,"contextmenu",function(w){if(S){var x=l.textInput.getElement();x.focus()}},l),h.addListener(r,"touchstart",function(w){var x=w.touches;if(d||x.length>1){clearTimeout(d),d=null,f=-1,u="zoom";return}S=l.$mouseHandler.isMousePressed=!0;var L=l.renderer.layerConfig.lineHeight,R=l.renderer.layerConfig.lineHeight,A=w.timeStamp;p=A;var I=x[0],$=I.clientX,H=I.clientY;Math.abs(i-$)+Math.abs(s-H)>L&&(f=-1),i=w.clientX=$,s=w.clientY=H,y=C=0;var P=new o(w,l);if(m=P.getDocumentPosition(),A-f<500&&x.length==1&&!_)v++,w.preventDefault(),w.button=0,T();else{v=0;var q=l.selection.cursor,G=l.selection.isEmpty()?q:l.selection.anchor,N=l.renderer.$cursorLayer.getPixelPosition(q,!0),Q=l.renderer.$cursorLayer.getPixelPosition(G,!0),O=l.renderer.scroller.getBoundingClientRect(),B=l.renderer.layerConfig.offset,U=l.renderer.scrollLeft,k=function(ye,Ae){return ye=ye/R,Ae=Ae/L-.75,ye*ye+Ae*Ae};if(w.clientX<O.left){u="zoom";return}var te=k(w.clientX-O.left-N.left+U,w.clientY-O.top-N.top+B),J=k(w.clientX-O.left-Q.left+U,w.clientY-O.top-Q.top+B);te<3.5&&J<3.5&&(u=te>J?"cursor":"anchor"),J<3.5?u="anchor":te<3.5?u="cursor":u="scroll",d=setTimeout(E,450)}f=A},l),h.addListener(r,"touchend",function(w){S=l.$mouseHandler.isMousePressed=!1,c&&clearInterval(c),u=="zoom"?(u="",_=0):d?(l.selection.moveToPosition(m),_=0,b()):u=="scroll"?(M(),F()):b(),clearTimeout(d),d=null},l),h.addListener(r,"touchmove",function(w){d&&(clearTimeout(d),d=null);var x=w.touches;if(!(x.length>1||u=="zoom")){var L=x[0],R=i-L.clientX,A=s-L.clientY;if(u=="wait")if(R*R+A*A>4)u="cursor";else return w.preventDefault();i=L.clientX,s=L.clientY,w.clientX=L.clientX,w.clientY=L.clientY;var I=w.timeStamp,$=I-p;if(p=I,u=="scroll"){var H=new o(w,l);H.speed=1,H.wheelX=R,H.wheelY=A,10*Math.abs(R)<Math.abs(A)&&(R=0),10*Math.abs(A)<Math.abs(R)&&(A=0),$!=0&&(y=R/$,C=A/$),l._emit("mousewheel",H),H.propagationStopped||(y=C=0)}else{var P=new o(w,l),q=P.getDocumentPosition();u=="cursor"?l.selection.moveCursorToPosition(q):u=="anchor"&&l.selection.setSelectionAnchor(q.row,q.column),l.renderer.scrollCursorIntoView(q),w.preventDefault()}}},l);function M(){_+=60,c=setInterval(function(){_--<=0&&(clearInterval(c),c=null),Math.abs(y)<.01&&(y=0),Math.abs(C)<.01&&(C=0),_<20&&(y=.9*y),_<20&&(C=.9*C);var w=l.session.getScrollTop();l.renderer.scrollBy(10*y,10*C),w==l.session.getScrollTop()&&(_=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var o=e("../lib/event"),h=e("../lib/useragent"),a=e("./default_handlers").DefaultHandlers,r=e("./default_gutter_handler").GutterHandler,l=e("./mouse_event").MouseEvent,u=e("./dragdrop_handler").DragdropHandler,i=e("./touch_handler").addTouchListeners,s=e("../config"),f=function(){function p(d){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var c=this;this.editor=d,new a(this),new r(this),new u(this);var _=function(y){var C=!document.hasFocus||!document.hasFocus()||!d.isFocused()&&document.activeElement==(d.textInput&&d.textInput.getElement());C&&window.focus(),d.focus(),setTimeout(function(){d.isFocused()||d.focus()})},m=d.renderer.getMouseEventTarget();o.addListener(m,"click",this.onMouseEvent.bind(this,"click"),d),o.addListener(m,"mousemove",this.onMouseMove.bind(this,"mousemove"),d),o.addMultiMouseDownListener([m,d.renderer.scrollBarV&&d.renderer.scrollBarV.inner,d.renderer.scrollBarH&&d.renderer.scrollBarH.inner,d.textInput&&d.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",d),o.addMouseWheelListener(d.container,this.onMouseWheel.bind(this,"mousewheel"),d),i(d.container,d);var v=d.renderer.$gutter;o.addListener(v,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),d),o.addListener(v,"click",this.onMouseEvent.bind(this,"gutterclick"),d),o.addListener(v,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),d),o.addListener(v,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),d),o.addListener(m,"mousedown",_,d),o.addListener(v,"mousedown",_,d),h.isIE&&d.renderer.scrollBarV&&(o.addListener(d.renderer.scrollBarV.element,"mousedown",_,d),o.addListener(d.renderer.scrollBarH.element,"mousedown",_,d)),d.on("mousemove",function(y){if(!(c.state||c.$dragDelay||!c.$dragEnabled)){var C=d.renderer.screenToTextCoordinates(y.x,y.y),S=d.session.selection.getRange(),D=d.renderer;!S.isEmpty()&&S.insideStart(C.row,C.column)?D.setCursorStyle("default"):D.setCursorStyle("")}},d)}return p.prototype.onMouseEvent=function(d,c){this.editor.session&&this.editor._emit(d,new l(c,this.editor))},p.prototype.onMouseMove=function(d,c){var _=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!_||!_.length||this.editor._emit(d,new l(c,this.editor))},p.prototype.onMouseWheel=function(d,c){var _=new l(c,this.editor);_.speed=this.$scrollSpeed*2,_.wheelX=c.wheelX,_.wheelY=c.wheelY,this.editor._emit(d,_)},p.prototype.setState=function(d){this.state=d},p.prototype.captureMouse=function(d,c){this.x=d.x,this.y=d.y,this.isMousePressed=!0;var _=this.editor,m=this.editor.renderer;m.$isMousePressed=!0;var v=this,y=function(b){if(b){if(h.isWebKit&&!b.which&&v.releaseMouse)return v.releaseMouse();v.x=b.clientX,v.y=b.clientY,c&&c(b),v.mouseEvent=new l(b,v.editor),v.$mouseMoved=!0}},C=function(b){_.off("beforeEndOperation",D),clearInterval(g),_.session&&S(),v[v.state+"End"]&&v[v.state+"End"](b),v.state="",v.isMousePressed=m.$isMousePressed=!1,m.$keepTextAreaAtCursor&&m.$moveTextAreaToCursor(),v.$onCaptureMouseMove=v.releaseMouse=null,b&&v.onMouseEvent("mouseup",b),_.endOperation()},S=function(){v[v.state]&&v[v.state](),v.$mouseMoved=!1};if(h.isOldIE&&d.domEvent.type=="dblclick")return setTimeout(function(){C(d)});var D=function(b){v.releaseMouse&&_.curOp.command.name&&_.curOp.selectionChanged&&(v[v.state+"End"]&&v[v.state+"End"](),v.state="",v.releaseMouse())};_.on("beforeEndOperation",D),_.startOperation({command:{name:"mouse"}}),v.$onCaptureMouseMove=y,v.releaseMouse=o.capture(this.editor.container,y,C);var g=setInterval(S,20)},p.prototype.cancelContextMenu=function(){var d=function(c){c&&c.domEvent&&c.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",d),c&&c.domEvent&&o.stopEvent(c.domEvent))}.bind(this);setTimeout(d,10),this.editor.on("nativecontextmenu",d)},p.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},p}();f.prototype.releaseMouse=null,s.defineOptions(f.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:h.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=f});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var o=e("../lib/dom"),h=function(){function a(r){r.on("click",function(l){var u=l.getDocumentPosition(),i=r.session,s=i.getFoldAt(u.row,u.column,1);s&&(l.getAccelKey()?i.removeFold(s):i.expandFold(s),l.stop());var f=l.domEvent&&l.domEvent.target;f&&o.hasCssClass(f,"ace_inline_button")&&o.hasCssClass(f,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),r.renderer.scrollCursorIntoView())}),r.on("gutterclick",function(l){var u=r.renderer.$gutterLayer.getRegion(l);if(u=="foldWidgets"){var i=l.getDocumentPosition().row,s=r.session;s.foldWidgets&&s.foldWidgets[i]&&r.session.onFoldWidgetClick(i,l),r.isFocused()||r.focus(),l.stop()}}),r.on("gutterdblclick",function(l){var u=r.renderer.$gutterLayer.getRegion(l);if(u=="foldWidgets"){var i=l.getDocumentPosition().row,s=r.session,f=s.getParentFoldRangeData(i,!0),p=f.range||f.firstRange;if(p){i=p.start.row;var d=s.getFoldAt(i,s.getLine(i).length,1);d?s.removeFold(d):(s.addFold("...",p),r.renderer.scrollCursorIntoView({row:p.start.row,column:0}))}l.stop()}})}return a}();t.FoldHandler=h});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var o=e("../lib/keys"),h=e("../lib/event"),a=function(){function r(l){this.$editor=l,this.$data={editor:l},this.$handlers=[],this.setDefaultHandler(l.commands)}return r.prototype.setDefaultHandler=function(l){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=l,this.addKeyboardHandler(l,0)},r.prototype.setKeyboardHandler=function(l){var u=this.$handlers;if(u[u.length-1]!=l){for(;u[u.length-1]&&u[u.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(u[u.length-1]);this.addKeyboardHandler(l,1)}},r.prototype.addKeyboardHandler=function(l,u){if(l){typeof l=="function"&&!l.handleKeyboard&&(l.handleKeyboard=l);var i=this.$handlers.indexOf(l);i!=-1&&this.$handlers.splice(i,1),u==null?this.$handlers.push(l):this.$handlers.splice(u,0,l),i==-1&&l.attach&&l.attach(this.$editor)}},r.prototype.removeKeyboardHandler=function(l){var u=this.$handlers.indexOf(l);return u==-1?!1:(this.$handlers.splice(u,1),l.detach&&l.detach(this.$editor),!0)},r.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},r.prototype.getStatusText=function(){var l=this.$data,u=l.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(u,l)||""}).filter(Boolean).join(" ")},r.prototype.$callKeyboardHandlers=function(l,u,i,s){for(var f,p=!1,d=this.$editor.commands,c=this.$handlers.length;c--&&(f=this.$handlers[c].handleKeyboard(this.$data,l,u,i,s),!(!(!f||!f.command)&&(f.command=="null"?p=!0:p=d.exec(f.command,this.$editor,f.args,s),p&&s&&l!=-1&&f.passEvent!=!0&&f.command.passEvent!=!0&&h.stopEvent(s),p))););return!p&&l==-1&&(f={command:"insertstring"},p=d.exec("insertstring",this.$editor,u)),p&&this.$editor._signal&&this.$editor._signal("keyboardActivity",f),p},r.prototype.onCommandKey=function(l,u,i){var s=o.keyCodeToString(i);return this.$callKeyboardHandlers(u,s,i,l)},r.prototype.onTextInput=function(l){return this.$callKeyboardHandlers(-1,l)},r}();t.KeyBinding=a});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var o=["\u0621","\u0641"],h=["\u063A","\u064A"],a=0,r=0,l=!1,u=!1,i=!1,s=!1,f=!1,p=!1,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_=0,m=1,v=0,y=1,C=2,S=3,D=4,g=5,b=6,F=7,E=8,T=9,M=10,w=11,x=12,L=13,R=14,A=15,I=16,$=17,H=18,P=[H,H,H,H,H,H,H,H,H,b,g,b,E,g,H,H,H,H,H,H,H,H,H,H,H,H,H,H,g,g,g,b,E,D,D,w,w,w,D,D,D,D,D,M,T,M,T,T,C,C,C,C,C,C,C,C,C,C,T,D,D,D,D,D,D,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,D,D,D,D,D,D,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,D,D,D,D,H,H,H,H,H,H,g,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,T,D,w,w,w,w,D,D,D,D,v,D,D,H,D,D,w,w,C,C,D,v,D,D,D,C,v,D,D,D,D,D],q=[E,E,E,E,E,E,E,E,E,E,E,H,H,H,v,y,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E,g,L,R,A,I,$,T,w,w,w,w,w,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,T,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E];function G(U,k,te,J){var ye=a?c:d,Ae=null,we=null,ce=null,Fe=0,It=null,un=null,Gt=-1,tt=null,le=null,ve=[];if(!J)for(tt=0,J=[];tt<te;tt++)J[tt]=O(U[tt]);for(r=a,l=!1,u=!1,i=!1,s=!1,le=0;le<te;le++){if(Ae=Fe,ve[le]=we=Q(U,J,ve,le),Fe=ye[Ae][we],It=Fe&240,Fe&=15,k[le]=ce=ye[Fe][5],It>0)if(It==16){for(tt=Gt;tt<le;tt++)k[tt]=1;Gt=-1}else Gt=-1;if(un=ye[Fe][6],un)Gt==-1&&(Gt=le);else if(Gt>-1){for(tt=Gt;tt<le;tt++)k[tt]=ce;Gt=-1}J[le]==g&&(k[le]=0),r|=ce}if(s){for(tt=0;tt<te;tt++)if(J[tt]==b){k[tt]=a;for(var fe=tt-1;fe>=0&&J[fe]==E;fe--)k[fe]=a}}}function N(U,k,te){if(!(r<U)){if(U==1&&a==m&&!i){te.reverse();return}for(var J=te.length,ye=0,Ae,we,ce,Fe;ye<J;){if(k[ye]>=U){for(Ae=ye+1;Ae<J&&k[Ae]>=U;)Ae++;for(we=ye,ce=Ae-1;we<ce;we++,ce--)Fe=te[we],te[we]=te[ce],te[ce]=Fe;ye=Ae}ye++}}}function Q(U,k,te,J){var ye=k[J],Ae,we,ce,Fe;switch(ye){case v:case y:l=!1;case D:case S:return ye;case C:return l?S:C;case F:return l=!0,u=!0,y;case E:return D;case T:return J<1||J+1>=k.length||(Ae=te[J-1])!=C&&Ae!=S||(we=k[J+1])!=C&&we!=S?D:(l&&(we=S),we==Ae?we:D);case M:return Ae=J>0?te[J-1]:g,Ae==C&&J+1<k.length&&k[J+1]==C?C:D;case w:if(J>0&&te[J-1]==C)return C;if(l)return D;for(Fe=J+1,ce=k.length;Fe<ce&&k[Fe]==w;)Fe++;return Fe<ce&&k[Fe]==C?C:D;case x:for(ce=k.length,Fe=J+1;Fe<ce&&k[Fe]==x;)Fe++;if(Fe<ce){var It=U[J],un=It>=1425&&It<=2303||It==64286;if(Ae=k[Fe],un&&(Ae==y||Ae==F))return y}return J<1||(Ae=k[J-1])==g?D:te[J-1];case g:return l=!1,i=!0,a;case b:return s=!0,D;case L:case R:case I:case $:case A:l=!1;case H:return D}}function O(U){var k=U.charCodeAt(0),te=k>>8;return te==0?k>191?v:P[k]:te==5?/[\u0591-\u05f4]/.test(U)?y:v:te==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(U)?x:/[\u0660-\u0669\u066b-\u066c]/.test(U)?S:k==1642?w:/[\u06f0-\u06f9]/.test(U)?C:F:te==32&&k<=8287?q[k&255]:te==254&&k>=65136?F:D}function B(U){return U>="\u064B"&&U<="\u0655"}t.L=v,t.R=y,t.EN=C,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(U,k,te){if(U.length<2)return{};var J=U.split(""),ye=new Array(J.length),Ae=new Array(J.length),we=[];a=te?m:_,G(J,we,J.length,k);for(var ce=0;ce<ye.length;ye[ce]=ce,ce++);N(2,we,ye),N(1,we,ye);for(var ce=0;ce<ye.length-1;ce++)k[ce]===S?we[ce]=t.AN:we[ce]===y&&(k[ce]>F&&k[ce]<L||k[ce]===D||k[ce]===H)?we[ce]=t.ON_R:ce>0&&J[ce-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(J[ce])&&(we[ce-1]=we[ce]=t.R_H,ce++);J[J.length-1]===t.DOT&&(we[J.length-1]=t.B),J[0]==="\u202B"&&(we[0]=t.RLE);for(var ce=0;ce<ye.length;ce++)Ae[ce]=we[ye[ce]];return{logicalFromVisual:ye,bidiLevels:Ae}},t.hasBidiCharacters=function(U,k){for(var te=!1,J=0;J<U.length;J++)k[J]=O(U.charAt(J)),!te&&(k[J]==y||k[J]==F||k[J]==S)&&(te=!0);return te},t.getVisualFromLogicalIdx=function(U,k){for(var te=0;te<k.logicalFromVisual.length;te++)if(k.logicalFromVisual[te]==U)return te;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var o=e("./lib/bidiutil"),h=e("./lib/lang"),a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,r=function(){function l(u){this.session=u,this.bidiMap={},this.currentRow=null,this.bidiUtil=o,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=a.test(u.getValue())}return l.prototype.isBidiRow=function(u,i,s){return this.seenBidi?(u!==this.currentRow&&(this.currentRow=u,this.updateRowLine(i,s),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},l.prototype.onChange=function(u){this.seenBidi?this.currentRow=null:u.action=="insert"&&a.test(u.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},l.prototype.getDocumentRow=function(){var u=0,i=this.session.$screenRowCache;if(i.length){var s=this.session.$getRowCacheIndex(i,this.currentRow);s>=0&&(u=this.session.$docRowCache[s])}return u},l.prototype.getSplitIndex=function(){var u=0,i=this.session.$screenRowCache;if(i.length)for(var s,f=this.session.$getRowCacheIndex(i,this.currentRow);this.currentRow-u>0&&(s=this.session.$getRowCacheIndex(i,this.currentRow-u-1),s===f);)f=s,u++;else u=this.currentRow;return u},l.prototype.updateRowLine=function(u,i){u===void 0&&(u=this.getDocumentRow());var s=u===this.session.getLength()-1,f=s?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(u),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var p=this.session.$wrapData[u];p&&(i===void 0&&(i=this.getSplitIndex()),i>0&&p.length?(this.wrapIndent=p.indent,this.wrapOffset=this.wrapIndent*this.charWidths[o.L],this.line=i<p.length?this.line.substring(p[i-1],p[i]):this.line.substring(p[p.length-1])):this.line=this.line.substring(0,p[i]),i==p.length&&(this.line+=this.showInvisibles?f:o.DOT))}else this.line+=this.showInvisibles?f:o.DOT;var d=this.session,c=0,_;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(m,v){return m==="	"||d.isFullWidth(m.charCodeAt(0))?(_=m==="	"?d.getScreenTabSize(v+c):2,c+=_-1,h.stringRepeat(o.DOT,_)):m}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==o.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},l.prototype.updateBidiMap=function(){var u=[];o.hasBidiCharacters(this.line,u)||this.isRtlDir?this.bidiMap=o.doBidiReorder(this.line,u,this.isRtlDir):this.bidiMap={}},l.prototype.markAsDirty=function(){this.currentRow=null},l.prototype.updateCharacterWidths=function(u){if(this.characterWidth!==u.$characterSize.width){this.fontMetrics=u;var i=this.characterWidth=u.$characterSize.width,s=u.$measureCharWidth("\u05D4");this.charWidths[o.L]=this.charWidths[o.EN]=this.charWidths[o.ON_R]=i,this.charWidths[o.R]=this.charWidths[o.AN]=s,this.charWidths[o.R_H]=s*.45,this.charWidths[o.B]=this.charWidths[o.RLE]=0,this.currentRow=null}},l.prototype.setShowInvisibles=function(u){this.showInvisibles=u,this.currentRow=null},l.prototype.setEolChar=function(u){this.EOL=u},l.prototype.setContentWidth=function(u){this.contentWidth=u},l.prototype.isRtlLine=function(u){return this.$isRtl?!0:u!=null?this.session.getLine(u).charAt(0)==this.RLE:this.isRtlDir},l.prototype.setRtlDirection=function(u,i){for(var s=u.getCursorPosition(),f=u.selection.getSelectionAnchor().row;f<=s.row;f++)!i&&u.session.getLine(f).charAt(0)===u.session.$bidiHandler.RLE?u.session.doc.removeInLine(f,0,1):i&&u.session.getLine(f).charAt(0)!==u.session.$bidiHandler.RLE&&u.session.doc.insert({column:0,row:f},u.session.$bidiHandler.RLE)},l.prototype.getPosLeft=function(u){u-=this.wrapIndent;var i=this.line.charAt(0)===this.RLE?1:0,s=u>i?this.session.getOverwrite()?u:u-1:i,f=o.getVisualFromLogicalIdx(s,this.bidiMap),p=this.bidiMap.bidiLevels,d=0;!this.session.getOverwrite()&&u<=i&&p[f]%2!==0&&f++;for(var c=0;c<f;c++)d+=this.charWidths[p[c]];return!this.session.getOverwrite()&&u>i&&p[f]%2===0&&(d+=this.charWidths[p[f]]),this.wrapIndent&&(d+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(d+=this.rtlLineOffset),d},l.prototype.getSelections=function(u,i){var s=this.bidiMap,f=s.bidiLevels,p,d=[],c=0,_=Math.min(u,i)-this.wrapIndent,m=Math.max(u,i)-this.wrapIndent,v=!1,y=!1,C=0;this.wrapIndent&&(c+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,D=0;D<f.length;D++)S=s.logicalFromVisual[D],p=f[D],v=S>=_&&S<m,v&&!y?C=c:!v&&y&&d.push({left:C,width:c-C}),c+=this.charWidths[p],y=v;if(v&&D===f.length&&d.push({left:C,width:c-C}),this.isRtlDir)for(var g=0;g<d.length;g++)d[g].left+=this.rtlLineOffset;return d},l.prototype.offsetToCol=function(s){this.isRtlDir&&(s-=this.rtlLineOffset);var i=0,s=Math.max(s,0),f=0,p=0,d=this.bidiMap.bidiLevels,c=this.charWidths[d[p]];for(this.wrapIndent&&(s-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);s>f+c/2;){if(f+=c,p===d.length-1){c=0;break}c=this.charWidths[d[++p]]}return p>0&&d[p-1]%2!==0&&d[p]%2===0?(s<f&&p--,i=this.bidiMap.logicalFromVisual[p]):p>0&&d[p-1]%2===0&&d[p]%2!==0?i=1+(s>f?this.bidiMap.logicalFromVisual[p]:this.bidiMap.logicalFromVisual[p-1]):this.isRtlDir&&p===d.length-1&&c===0&&d[p-1]%2===0||!this.isRtlDir&&p===0&&d[p]%2!==0?i=1+this.bidiMap.logicalFromVisual[p]:(p>0&&d[p-1]%2!==0&&c!==0&&p--,i=this.bidiMap.logicalFromVisual[p]),i===0&&this.isRtlDir&&i++,i+this.wrapIndent},l}();t.BidiHandler=r});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var o=e("./lib/oop"),h=e("./lib/lang"),a=e("./lib/event_emitter").EventEmitter,r=e("./range").Range,l=function(){function u(i){this.session=i,this.doc=i.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var s=this;this.cursor.on("change",function(f){s.$cursorChanged=!0,s.$silent||s._emit("changeCursor"),!s.$isEmpty&&!s.$silent&&s._emit("changeSelection"),!s.$keepDesiredColumnOnChange&&f.old.column!=f.value.column&&(s.$desiredColumn=null)}),this.anchor.on("change",function(){s.$anchorChanged=!0,!s.$isEmpty&&!s.$silent&&s._emit("changeSelection")})}return u.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},u.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},u.prototype.getCursor=function(){return this.lead.getPosition()},u.prototype.setAnchor=function(i,s){this.$isEmpty=!1,this.anchor.setPosition(i,s)},u.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},u.prototype.getSelectionLead=function(){return this.lead.getPosition()},u.prototype.isBackwards=function(){var i=this.anchor,s=this.lead;return i.row>s.row||i.row==s.row&&i.column>s.column},u.prototype.getRange=function(){var i=this.anchor,s=this.lead;return this.$isEmpty?r.fromPoints(s,s):this.isBackwards()?r.fromPoints(s,i):r.fromPoints(i,s)},u.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},u.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},u.prototype.setRange=function(i,s){var f=s?i.end:i.start,p=s?i.start:i.end;this.$setSelection(f.row,f.column,p.row,p.column)},u.prototype.$setSelection=function(i,s,f,p){if(!this.$silent){var d=this.$isEmpty,c=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(i,s),this.cursor.setPosition(f,p),this.$isEmpty=!r.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||d!=this.$isEmpty||c)&&this._emit("changeSelection")}},u.prototype.$moveSelection=function(i){var s=this.lead;this.$isEmpty&&this.setSelectionAnchor(s.row,s.column),i.call(this)},u.prototype.selectTo=function(i,s){this.$moveSelection(function(){this.moveCursorTo(i,s)})},u.prototype.selectToPosition=function(i){this.$moveSelection(function(){this.moveCursorToPosition(i)})},u.prototype.moveTo=function(i,s){this.clearSelection(),this.moveCursorTo(i,s)},u.prototype.moveToPosition=function(i){this.clearSelection(),this.moveCursorToPosition(i)},u.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},u.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},u.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},u.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},u.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},u.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},u.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},u.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},u.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},u.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},u.prototype.getWordRange=function(i,s){if(typeof s>"u"){var f=i||this.lead;i=f.row,s=f.column}return this.session.getWordRange(i,s)},u.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},u.prototype.selectAWord=function(){var i=this.getCursor(),s=this.session.getAWordRange(i.row,i.column);this.setSelectionRange(s)},u.prototype.getLineRange=function(i,s){var f=typeof i=="number"?i:this.lead.row,p,d=this.session.getFoldLine(f);return d?(f=d.start.row,p=d.end.row):p=f,s===!0?new r(f,0,p,this.session.getLine(p).length):new r(f,0,p+1,0)},u.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},u.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},u.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},u.prototype.wouldMoveIntoSoftTab=function(i,s,f){var p=i.column,d=i.column+s;return f<0&&(p=i.column-s,d=i.column),this.session.isTabStop(i)&&this.doc.getLine(i.row).slice(p,d).split(" ").length-1==s},u.prototype.moveCursorLeft=function(){var i=this.lead.getPosition(),s;if(s=this.session.getFoldAt(i.row,i.column,-1))this.moveCursorTo(s.start.row,s.start.column);else if(i.column===0)i.row>0&&this.moveCursorTo(i.row-1,this.doc.getLine(i.row-1).length);else{var f=this.session.getTabSize();this.wouldMoveIntoSoftTab(i,f,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-f):this.moveCursorBy(0,-1)}},u.prototype.moveCursorRight=function(){var i=this.lead.getPosition(),s;if(s=this.session.getFoldAt(i.row,i.column,1))this.moveCursorTo(s.end.row,s.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var f=this.session.getTabSize(),i=this.lead;this.wouldMoveIntoSoftTab(i,f,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,f):this.moveCursorBy(0,1)}},u.prototype.moveCursorLineStart=function(){var i=this.lead.row,s=this.lead.column,f=this.session.documentToScreenRow(i,s),p=this.session.screenToDocumentPosition(f,0),d=this.session.getDisplayLine(i,null,p.row,p.column),c=d.match(/^\s*/);c[0].length!=s&&!this.session.$useEmacsStyleLineStart&&(p.column+=c[0].length),this.moveCursorToPosition(p)},u.prototype.moveCursorLineEnd=function(){var i=this.lead,s=this.session.getDocumentLastRowColumnPosition(i.row,i.column);if(this.lead.column==s.column){var f=this.session.getLine(s.row);if(s.column==f.length){var p=f.search(/\s+$/);p>0&&(s.column=p)}}this.moveCursorTo(s.row,s.column)},u.prototype.moveCursorFileEnd=function(){var i=this.doc.getLength()-1,s=this.doc.getLine(i).length;this.moveCursorTo(i,s)},u.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},u.prototype.moveCursorLongWordRight=function(){var i=this.lead.row,s=this.lead.column,f=this.doc.getLine(i),p=f.substring(s);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var d=this.session.getFoldAt(i,s,1);if(d){this.moveCursorTo(d.end.row,d.end.column);return}if(this.session.nonTokenRe.exec(p)&&(s+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,p=f.substring(s)),s>=f.length){this.moveCursorTo(i,f.length),this.moveCursorRight(),i<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(p)&&(s+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,s)},u.prototype.moveCursorLongWordLeft=function(){var i=this.lead.row,s=this.lead.column,f;if(f=this.session.getFoldAt(i,s,-1)){this.moveCursorTo(f.start.row,f.start.column);return}var p=this.session.getFoldStringAt(i,s,-1);p==null&&(p=this.doc.getLine(i).substring(0,s));var d=h.stringReverse(p);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(d)&&(s-=this.session.nonTokenRe.lastIndex,d=d.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),s<=0){this.moveCursorTo(i,0),this.moveCursorLeft(),i>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(d)&&(s-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,s)},u.prototype.$shortWordEndIndex=function(i){var s=0,f,p=/\s/,d=this.session.tokenRe;if(d.lastIndex=0,this.session.tokenRe.exec(i))s=this.session.tokenRe.lastIndex;else{for(;(f=i[s])&&p.test(f);)s++;if(s<1){for(d.lastIndex=0;(f=i[s])&&!d.test(f);)if(d.lastIndex=0,s++,p.test(f))if(s>2){s--;break}else{for(;(f=i[s])&&p.test(f);)s++;if(s>2)break}}}return d.lastIndex=0,s},u.prototype.moveCursorShortWordRight=function(){var i=this.lead.row,s=this.lead.column,f=this.doc.getLine(i),p=f.substring(s),d=this.session.getFoldAt(i,s,1);if(d)return this.moveCursorTo(d.end.row,d.end.column);if(s==f.length){var c=this.doc.getLength();do i++,p=this.doc.getLine(i);while(i<c&&/^\s*$/.test(p));/^\s+/.test(p)||(p=""),s=0}var _=this.$shortWordEndIndex(p);this.moveCursorTo(i,s+_)},u.prototype.moveCursorShortWordLeft=function(){var i=this.lead.row,s=this.lead.column,f;if(f=this.session.getFoldAt(i,s,-1))return this.moveCursorTo(f.start.row,f.start.column);var p=this.session.getLine(i).substring(0,s);if(s===0){do i--,p=this.doc.getLine(i);while(i>0&&/^\s*$/.test(p));s=p.length,/\s+$/.test(p)||(p="")}var d=h.stringReverse(p),c=this.$shortWordEndIndex(d);return this.moveCursorTo(i,s-c)},u.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},u.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},u.prototype.moveCursorBy=function(i,s){var f=this.session.documentToScreenPosition(this.lead.row,this.lead.column),p;if(s===0&&(i!==0&&(this.session.$bidiHandler.isBidiRow(f.row,this.lead.row)?(p=this.session.$bidiHandler.getPosLeft(f.column),f.column=Math.round(p/this.session.$bidiHandler.charWidths[0])):p=f.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?f.column=this.$desiredColumn:this.$desiredColumn=f.column),i!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var d=this.session.lineWidgets[this.lead.row];i<0?i-=d.rowsAbove||0:i>0&&(i+=d.rowCount-(d.rowsAbove||0))}var c=this.session.screenToDocumentPosition(f.row+i,f.column,p);i!==0&&s===0&&c.row===this.lead.row&&(c.column,this.lead.column),this.moveCursorTo(c.row,c.column+s,s===0)},u.prototype.moveCursorToPosition=function(i){this.moveCursorTo(i.row,i.column)},u.prototype.moveCursorTo=function(i,s,f){var p=this.session.getFoldAt(i,s,1);p&&(i=p.start.row,s=p.start.column),this.$keepDesiredColumnOnChange=!0;var d=this.session.getLine(i);/[\uDC00-\uDFFF]/.test(d.charAt(s))&&d.charAt(s-1)&&(this.lead.row==i&&this.lead.column==s+1?s=s-1:s=s+1),this.lead.setPosition(i,s),this.$keepDesiredColumnOnChange=!1,f||(this.$desiredColumn=null)},u.prototype.moveCursorToScreen=function(i,s,f){var p=this.session.screenToDocumentPosition(i,s);this.moveCursorTo(p.row,p.column,f)},u.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},u.prototype.fromOrientedRange=function(i){this.setSelectionRange(i,i.cursor==i.start),this.$desiredColumn=i.desiredColumn||this.$desiredColumn},u.prototype.toOrientedRange=function(i){var s=this.getRange();return i?(i.start.column=s.start.column,i.start.row=s.start.row,i.end.column=s.end.column,i.end.row=s.end.row):i=s,i.cursor=this.isBackwards()?i.start:i.end,i.desiredColumn=this.$desiredColumn,i},u.prototype.getRangeOfMovements=function(i){var s=this.getCursor();try{i(this);var f=this.getCursor();return r.fromPoints(s,f)}catch{return r.fromPoints(s,s)}finally{this.moveCursorToPosition(s)}},u.prototype.toJSON=function(){if(this.rangeCount)var i=this.ranges.map(function(s){var f=s.clone();return f.isBackwards=s.cursor==s.start,f});else{var i=this.getRange();i.isBackwards=this.isBackwards()}return i},u.prototype.fromJSON=function(i){if(i.start==null)if(this.rangeList&&i.length>1){this.toSingleRange(i[0]);for(var s=i.length;s--;){var f=r.fromPoints(i[s].start,i[s].end);i[s].isBackwards&&(f.cursor=f.start),this.addRange(f,!0)}return}else i=i[0];this.rangeList&&this.toSingleRange(i),this.setSelectionRange(i,i.isBackwards)},u.prototype.isEqual=function(i){if((i.length||this.rangeCount)&&i.length!=this.rangeCount)return!1;if(!i.length||!this.ranges)return this.getRange().isEqual(i);for(var s=this.ranges.length;s--;)if(!this.ranges[s].isEqual(i[s]))return!1;return!0},u}();l.prototype.setSelectionAnchor=l.prototype.setAnchor,l.prototype.getSelectionAnchor=l.prototype.getAnchor,l.prototype.setSelectionRange=l.prototype.setRange,o.implement(l.prototype,a),t.Selection=l});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,n){"use strict";var o=e("./lib/report_error").reportError,h=2e3,a=function(){function r(l){this.splitRegex,this.states=l,this.regExps={},this.matchMappings={};for(var u in this.states){for(var i=this.states[u],s=[],f=0,p=this.matchMappings[u]={defaultToken:"text"},d="g",c=[],_=0;_<i.length;_++){var m=i[_];if(m.defaultToken&&(p.defaultToken=m.defaultToken),m.caseInsensitive&&d.indexOf("i")===-1&&(d+="i"),m.unicode&&d.indexOf("u")===-1&&(d+="u"),m.regex!=null){m.regex instanceof RegExp&&(m.regex=m.regex.toString().slice(1,-1));var v=m.regex,y=new RegExp("(?:("+v+")|(.))").exec("a").length-2;Array.isArray(m.token)?m.token.length==1||y==1?m.token=m.token[0]:y-1!=m.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:m,groupCount:y-1}),m.token=m.token[0]):(m.tokenArray=m.token,m.token=null,m.onMatch=this.$arrayTokens):typeof m.token=="function"&&!m.onMatch&&(y>1?m.onMatch=this.$applyToken:m.onMatch=m.token),y>1&&(/\\\d/.test(m.regex)?v=m.regex.replace(/\\([0-9]+)/g,function(C,S){return"\\"+(parseInt(S,10)+f+1)}):(y=1,v=this.removeCapturingGroups(m.regex)),!m.splitRegex&&typeof m.token!="string"&&c.push(m)),p[f]=_,f+=y,s.push(v),m.onMatch||(m.onMatch=null)}}s.length||(p[0]=0,s.push("$")),c.forEach(function(C){C.splitRegex=this.createSplitterRegexp(C.regex,d)},this),this.regExps[u]=new RegExp("("+s.join(")|(")+")|($)",d)}}return r.prototype.$setMaxTokenCount=function(l){h=l|0},r.prototype.$applyToken=function(l){var u=this.splitRegex.exec(l).slice(1),i=this.token.apply(this,u);if(typeof i=="string")return[{type:i,value:l}];for(var s=[],f=0,p=i.length;f<p;f++)u[f]&&(s[s.length]={type:i[f],value:u[f]});return s},r.prototype.$arrayTokens=function(l){if(!l)return[];var u=this.splitRegex.exec(l);if(!u)return"text";for(var i=[],s=this.tokenArray,f=0,p=s.length;f<p;f++)u[f+1]&&(i[i.length]={type:s[f],value:u[f+1]});return i},r.prototype.removeCapturingGroups=function(l){var u=l.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(i,s){return s?"(?:":i});return u},r.prototype.createSplitterRegexp=function(l,u){if(l.indexOf("(?=")!=-1){var i=0,s=!1,f={};l.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(p,d,c,_,m,v){return s?s=m!="]":m?s=!0:_?(i==f.stack&&(f.end=v+1,f.stack=-1),i--):c&&(i++,c.length!=1&&(f.stack=i,f.start=v)),p}),f.end!=null&&/^\)*$/.test(l.substr(f.end))&&(l=l.substring(0,f.start)+l.substr(f.end))}return l.charAt(0)!="^"&&(l="^"+l),l.charAt(l.length-1)!="$"&&(l+="$"),new RegExp(l,(u||"").replace("g",""))},r.prototype.getLineTokens=function(l,u){if(u&&typeof u!="string"){var i=u.slice(0);u=i[0],u==="#tmp"&&(i.shift(),u=i.shift())}else var i=[];var s=u||"start",f=this.states[s];f||(s="start",f=this.states[s]);var p=this.matchMappings[s],d=this.regExps[s];d.lastIndex=0;for(var c,_=[],m=0,v=0,y={type:null,value:""};c=d.exec(l);){var C=p.defaultToken,S=null,D=c[0],g=d.lastIndex;if(g-D.length>m){var b=l.substring(m,g-D.length);y.type==C?y.value+=b:(y.type&&_.push(y),y={type:C,value:b})}for(var F=0;F<c.length-2;F++)if(c[F+1]!==void 0){S=f[p[F]],S.onMatch?C=S.onMatch(D,s,i,l):C=S.token,S.next&&(typeof S.next=="string"?s=S.next:s=S.next(s,i),f=this.states[s],f||(this.reportError("state doesn't exist",s),s="start",f=this.states[s]),p=this.matchMappings[s],m=g,d=this.regExps[s],d.lastIndex=g),S.consumeLineEnd&&(m=g);break}if(D){if(typeof C=="string")(!S||S.merge!==!1)&&y.type===C?y.value+=D:(y.type&&_.push(y),y={type:C,value:D});else if(C){y.type&&_.push(y),y={type:null,value:""};for(var F=0;F<C.length;F++)_.push(C[F])}}if(m==l.length)break;if(m=g,v++>h){for(v>2*l.length&&this.reportError("infinite loop with in ace tokenizer",{startState:u,line:l});m<l.length;)y.type&&_.push(y),y={value:l.substring(m,m+=500),type:"overflow"};s="start",i=[];break}}return y.type&&_.push(y),i.length>1&&i[0]!==s&&i.unshift("#tmp",s),{tokens:_,state:i.length?i:s}},r}();a.prototype.reportError=o,t.Tokenizer=a});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";var o=e("../lib/deep_copy").deepCopy,h;h=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(l,u){if(!u){for(var i in l)this.$rules[i]=l[i];return}for(var i in l){for(var s=l[i],f=0;f<s.length;f++){var p=s[f];(p.next||p.onMatch)&&(typeof p.next=="string"&&p.next.indexOf(u)!==0&&(p.next=u+p.next),p.nextState&&p.nextState.indexOf(u)!==0&&(p.nextState=u+p.nextState))}this.$rules[u+i]=s}},this.getRules=function(){return this.$rules},this.embedRules=function(l,u,i,s,f){var p=typeof l=="function"?new l().getRules():l;if(s)for(var d=0;d<s.length;d++)s[d]=u+s[d];else{s=[];for(var c in p)s.push(u+c)}if(this.addRules(p,u),i)for(var _=Array.prototype[f?"push":"unshift"],d=0;d<s.length;d++)_.apply(this.$rules[s[d]],o(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(u)},this.getEmbeds=function(){return this.$embeds};var a=function(l,u){return(l!="start"||u.length)&&u.unshift(this.nextState,l),this.nextState},r=function(l,u){return u.shift(),u.shift()||"start"};this.normalizeRules=function(){var l=0,u=this.$rules;function i(s){var f=u[s];f.processed=!0;for(var p=0;p<f.length;p++){var d=f[p],c=null;Array.isArray(d)&&(c=d,d={}),!d.regex&&d.start&&(d.regex=d.start,d.next||(d.next=[]),d.next.push({defaultToken:d.token},{token:d.token+".end",regex:d.end||d.start,next:"pop"}),d.token=d.token+".start",d.push=!0);var _=d.next||d.push;if(_&&Array.isArray(_)){var m=d.stateName;m||(m=d.token,typeof m!="string"&&(m=m[0]||""),u[m]&&(m+=l++)),u[m]=_,d.next=m,i(m)}else _=="pop"&&(d.next=r);if(d.push&&(d.nextState=d.next||d.push,d.next=a,delete d.push),d.rules)for(var v in d.rules)u[v]?u[v].push&&u[v].push.apply(u[v],d.rules[v]):u[v]=d.rules[v];var y=typeof d=="string"?d:d.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?c=y.map(function(S){return u[S]}):c=u[y]),c){var C=[p,1].concat(c);d.noEscape&&(C=C.filter(function(S){return!S.next})),f.splice.apply(f,C),p--}d.keywordMap&&(d.token=this.createKeywordMapper(d.keywordMap,d.defaultToken||"text",d.caseInsensitive),delete d.defaultToken)}}Object.keys(u).forEach(i,this)},this.createKeywordMapper=function(l,u,i,s){var f=Object.create(null);return this.$keywordList=[],Object.keys(l).forEach(function(p){for(var d=l[p],c=d.split(s||"|"),_=c.length;_--;){var m=c[_];this.$keywordList.push(m),i&&(m=m.toLowerCase()),f[m]=p}},this),l=null,i?function(p){return f[p.toLowerCase()]||u}:function(p){return f[p]||u}},this.getKeywords=function(){return this.$keywords}}.call(h.prototype),t.TextHighlightRules=h});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var o;o=function(){this.$behaviours={}},function(){this.add=function(h,a,r){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[h]:this.$behaviours[h]={}}this.$behaviours[h][a]=r},this.addBehaviours=function(h){for(var a in h)for(var r in h[a])this.add(a,r,h[a][r])},this.remove=function(h){this.$behaviours&&this.$behaviours[h]&&delete this.$behaviours[h]},this.inherit=function(h,a){if(typeof h=="function")var r=new h().getBehaviours(a);else var r=h.getBehaviours(a);this.addBehaviours(r)},this.getBehaviours=function(h){if(h){for(var a={},r=0;r<h.length;r++)this.$behaviours[h[r]]&&(a[h[r]]=this.$behaviours[h[r]]);return a}else return this.$behaviours}}.call(o.prototype),t.Behaviour=o});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var o=e("./range").Range,h=function(){function a(r,l,u){this.$session=r,this.$row=l,this.$rowTokens=r.getTokens(l);var i=r.getTokenAt(l,u);this.$tokenIndex=i?i.index:-1}return a.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},a.prototype.stepForward=function(){this.$tokenIndex+=1;for(var r;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,r||(r=this.$session.getLength()),this.$row>=r)return this.$row=r-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},a.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},a.prototype.getCurrentTokenRow=function(){return this.$row},a.prototype.getCurrentTokenColumn=function(){var r=this.$rowTokens,l=this.$tokenIndex,u=r[l].start;if(u!==void 0)return u;for(u=0;l>0;)l-=1,u+=r[l].value.length;return u},a.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},a.prototype.getCurrentTokenRange=function(){var r=this.$rowTokens[this.$tokenIndex],l=this.getCurrentTokenColumn();return new o(this.$row,l,this.$row,l+r.value.length)},a}();t.TokenIterator=h});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var o=e("../../lib/oop"),h=e("../behaviour").Behaviour,a=e("../../token_iterator").TokenIterator,r=e("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],u=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],i,s={},f={'"':'"',"'":"'"},p=function(_){var m=-1;if(_.multiSelect&&(m=_.selection.index,s.rangeCount!=_.multiSelect.rangeCount&&(s={rangeCount:_.multiSelect.rangeCount})),s[m])return i=s[m];i=s[m]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},d=function(_,m,v,y){var C=_.end.row-_.start.row;return{text:v+m+y,selection:[0,_.start.column+1,C,_.end.column+(C?0:1)]}},c;c=function(_){_=_||{},this.add("braces","insertion",function(m,v,y,C,S){var D=y.getCursorPosition(),g=C.doc.getLine(D.row);if(S=="{"){p(y);var b=y.getSelectionRange(),F=C.doc.getTextRange(b);if(F!==""&&F!=="{"&&y.getWrapBehavioursEnabled())return d(b,F,"{","}");if(c.isSaneInsertion(y,C))return/[\]\}\)]/.test(g[D.column])||y.inMultiSelectMode||_.braces?(c.recordAutoInsert(y,C,"}"),{text:"{}",selection:[1,1]}):(c.recordMaybeInsert(y,C,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){p(y);var E=g.substring(D.column,D.column+1);if(E=="}"){var T=C.$findOpeningBracket("}",{column:D.column+1,row:D.row});if(T!==null&&c.isAutoInsertedClosing(D,g,S))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){p(y);var M="";c.isMaybeInsertedClosing(D,g)&&(M=r.stringRepeat("}",i.maybeInsertedBrackets),c.clearMaybeInsertedClosing());var E=g.substring(D.column,D.column+1);if(E==="}"){var w=C.findMatchingBracket({row:D.row,column:D.column+1},"}");if(!w)return null;var x=this.$getIndent(C.getLine(w.row))}else if(M)var x=this.$getIndent(g);else{c.clearMaybeInsertedClosing();return}var L=x+C.getTabString();return{text:`
`+L+`
`+x+M,selection:[1,L.length,1,L.length]}}else c.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(m,v,y,C,S){var D=C.doc.getTextRange(S);if(!S.isMultiLine()&&D=="{"){p(y);var g=C.doc.getLine(S.start.row),b=g.substring(S.end.column,S.end.column+1);if(b=="}")return S.end.column++,S;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(m,v,y,C,S){if(S=="("){p(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return d(D,g,"(",")");if(c.isSaneInsertion(y,C))return c.recordAutoInsert(y,C,")"),{text:"()",selection:[1,1]}}else if(S==")"){p(y);var b=y.getCursorPosition(),F=C.doc.getLine(b.row),E=F.substring(b.column,b.column+1);if(E==")"){var T=C.$findOpeningBracket(")",{column:b.column+1,row:b.row});if(T!==null&&c.isAutoInsertedClosing(b,F,S))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(m,v,y,C,S){var D=C.doc.getTextRange(S);if(!S.isMultiLine()&&D=="("){p(y);var g=C.doc.getLine(S.start.row),b=g.substring(S.start.column+1,S.start.column+2);if(b==")")return S.end.column++,S}}),this.add("brackets","insertion",function(m,v,y,C,S){if(S=="["){p(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return d(D,g,"[","]");if(c.isSaneInsertion(y,C))return c.recordAutoInsert(y,C,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){p(y);var b=y.getCursorPosition(),F=C.doc.getLine(b.row),E=F.substring(b.column,b.column+1);if(E=="]"){var T=C.$findOpeningBracket("]",{column:b.column+1,row:b.row});if(T!==null&&c.isAutoInsertedClosing(b,F,S))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(m,v,y,C,S){var D=C.doc.getTextRange(S);if(!S.isMultiLine()&&D=="["){p(y);var g=C.doc.getLine(S.start.row),b=g.substring(S.start.column+1,S.start.column+2);if(b=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(m,v,y,C,S){var D=C.$mode.$quotes||f;if(S.length==1&&D[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;p(y);var g=S,b=y.getSelectionRange(),F=C.doc.getTextRange(b);if(F!==""&&(F.length!=1||!D[F])&&y.getWrapBehavioursEnabled())return d(b,F,g,g);if(!F){var E=y.getCursorPosition(),T=C.doc.getLine(E.row),M=T.substring(E.column-1,E.column),w=T.substring(E.column,E.column+1),x=C.getTokenAt(E.row,E.column),L=C.getTokenAt(E.row,E.column+1);if(M=="\\"&&x&&/escape/.test(x.type))return null;var R=x&&/string|escape/.test(x.type),A=!L||/string|escape/.test(L.type),I;if(w==g)I=R!==A,I&&/string\.end/.test(L.type)&&(I=!1);else{if(R&&!A||R&&A)return null;var $=C.$mode.tokenRe;$.lastIndex=0;var H=$.test(M);$.lastIndex=0;var P=$.test(w),q=C.$mode.$pairQuotesAfter,G=q&&q[g]&&q[g].test(M);if(!G&&H||P||w&&!/[\s;,.})\]\\]/.test(w))return null;var N=T[E.column-2];if(M==g&&(N==g||$.test(N)))return null;I=!0}return{text:I?g+g:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(m,v,y,C,S){var D=C.$mode.$quotes||f,g=C.doc.getTextRange(S);if(!S.isMultiLine()&&D.hasOwnProperty(g)){p(y);var b=C.doc.getLine(S.start.row),F=b.substring(S.start.column+1,S.start.column+2);if(F==g)return S.end.column++,S}}),_.closeDocComment!==!1&&this.add("doc comment end","insertion",function(m,v,y,C,S){if(m==="doc-start"&&(S===`
`||S===`\r
`)&&y.selection.isEmpty()){var D=y.getCursorPosition(),g=C.doc.getLine(D.row),b=C.doc.getLine(D.row+1),F=this.$getIndent(g);if(/\s*\*/.test(b))return/^\s*\*/.test(g)?{text:S+F+"* ",selection:[1,3+F.length,1,3+F.length]}:{text:S+F+" * ",selection:[1,3+F.length,1,3+F.length]};if(/\/\*\*/.test(g.substring(0,D.column)))return{text:S+F+" * "+S+" "+F+"*/",selection:[1,4+F.length,1,4+F.length]}}})},c.isSaneInsertion=function(_,m){var v=_.getCursorPosition(),y=new a(m,v.row,v.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",l)){if(/[)}\]]/.test(_.session.getLine(v.row)[v.column]))return!0;var C=new a(m,v.row,v.column+1);if(!this.$matchTokenType(C.getCurrentToken()||"text",l))return!1}return y.stepForward(),y.getCurrentTokenRow()!==v.row||this.$matchTokenType(y.getCurrentToken()||"text",u)},c.$matchTokenType=function(_,m){return m.indexOf(_.type||_)>-1},c.recordAutoInsert=function(_,m,v){var y=_.getCursorPosition(),C=m.doc.getLine(y.row);this.isAutoInsertedClosing(y,C,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=y.row,i.autoInsertedLineEnd=v+C.substr(y.column),i.autoInsertedBrackets++},c.recordMaybeInsert=function(_,m,v){var y=_.getCursorPosition(),C=m.doc.getLine(y.row);this.isMaybeInsertedClosing(y,C)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=y.row,i.maybeInsertedLineStart=C.substr(0,y.column)+v,i.maybeInsertedLineEnd=C.substr(y.column),i.maybeInsertedBrackets++},c.isAutoInsertedClosing=function(_,m,v){return i.autoInsertedBrackets>0&&_.row===i.autoInsertedRow&&v===i.autoInsertedLineEnd[0]&&m.substr(_.column)===i.autoInsertedLineEnd},c.isMaybeInsertedClosing=function(_,m){return i.maybeInsertedBrackets>0&&_.row===i.maybeInsertedRow&&m.substr(_.column)===i.maybeInsertedLineEnd&&m.substr(0,_.column)==i.maybeInsertedLineStart},c.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},c.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},o.inherits(c,h),t.CstyleBehaviour=c});ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var o=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],h=0,a=[],r=0;r<o.length;r+=2)a.push(h+=o[r]),o[r+1]&&a.push(45,h+=o[r+1]);t.wordChars=String.fromCharCode.apply(null,a)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var o=e("../config"),h=e("../tokenizer").Tokenizer,a=e("./text_highlight_rules").TextHighlightRules,r=e("./behaviour/cstyle").CstyleBehaviour,l=e("../unicode"),u=e("../lib/lang"),i=e("../token_iterator").TokenIterator,s=e("../range").Range,f;f=function(){this.HighlightRules=a},function(){this.$defaultBehaviour=new r,this.tokenRe=new RegExp("^["+l.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+l.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new h(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(p,d,c,_){var m=d.doc,v=!0,y=!0,C=1/0,S=d.getTabSize(),D=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var F=this.lineCommentStart.map(u.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var F=u.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;F=new RegExp("^(\\s*)(?:"+F+") ?"),D=d.getUseSoftTabs();var M=function(P,q){var G=P.match(F);if(G){var N=G[1].length,Q=G[0].length;!L(P,N,Q)&&G[0][Q-1]==" "&&Q--,m.removeInLine(q,N,Q)}},x=g+" ",T=function(P,q){(!v||/\S/.test(P))&&(L(P,C,C)?m.insertInLine({row:q,column:C},x):m.insertInLine({row:q,column:C},g))},w=function(P,q){return F.test(P)},L=function(P,q,G){for(var N=0;q--&&P.charAt(q)==" ";)N++;if(N%S!=0)return!1;for(var N=0;P.charAt(G++)==" ";)N++;return S>2?N%S!=S-1:N%S==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,b=this.blockComment.end,F=new RegExp("^(\\s*)(?:"+u.escapeRegExp(g)+")"),E=new RegExp("(?:"+u.escapeRegExp(b)+")\\s*$"),T=function(I,$){w(I,$)||(!v||/\S/.test(I))&&(m.insertInLine({row:$,column:I.length},b),m.insertInLine({row:$,column:C},g))},M=function(I,$){var H;(H=I.match(E))&&m.removeInLine($,I.length-H[0].length,I.length),(H=I.match(F))&&m.removeInLine($,H[1].length,H[0].length)},w=function(I,$){if(F.test(I))return!0;for(var H=d.getTokens($),P=0;P<H.length;P++)if(H[P].type==="comment")return!0}}function R(I){for(var $=c;$<=_;$++)I(m.getLine($),$)}var A=1/0;R(function(I,$){var H=I.search(/\S/);H!==-1?(H<C&&(C=H),y&&!w(I,$)&&(y=!1)):A>I.length&&(A=I.length)}),C==1/0&&(C=A,v=!1,y=!1),D&&C%S!=0&&(C=Math.floor(C/S)*S),R(y?M:T)},this.toggleBlockComment=function(p,d,c,_){var m=this.blockComment;if(m){!m.start&&m[0]&&(m=m[0]);var v=new i(d,_.row,_.column),y=v.getCurrentToken(),C=d.selection,S=d.selection.toOrientedRange(),D,g;if(y&&/comment/.test(y.type)){for(var b,F;y&&/comment/.test(y.type);){var E=y.value.indexOf(m.start);if(E!=-1){var T=v.getCurrentTokenRow(),M=v.getCurrentTokenColumn()+E;b=new s(T,M,T,M+m.start.length);break}y=v.stepBackward()}for(var v=new i(d,_.row,_.column),y=v.getCurrentToken();y&&/comment/.test(y.type);){var E=y.value.indexOf(m.end);if(E!=-1){var T=v.getCurrentTokenRow(),M=v.getCurrentTokenColumn()+E;F=new s(T,M,T,M+m.end.length);break}y=v.stepForward()}F&&d.remove(F),b&&(d.remove(b),D=b.start.row,g=-m.start.length)}else g=m.start.length,D=c.start.row,d.insert(c.end,m.end),d.insert(c.start,m.start);S.start.row==D&&(S.start.column+=g),S.end.row==D&&(S.end.column+=g),d.selection.fromOrientedRange(S)}},this.getNextLineIndent=function(p,d,c){return this.$getIndent(d)},this.checkOutdent=function(p,d,c){return!1},this.autoOutdent=function(p,d,c){},this.$getIndent=function(p){return p.match(/^\s*/)[0]},this.createWorker=function(p){return null},this.createModeDelegates=function(p){this.$embeds=[],this.$modes={};for(var d in p)if(p[d]){var c=p[d],_=c.prototype.$id,m=o.$modes[_];m||(o.$modes[_]=m=new c),o.$modes[d]||(o.$modes[d]=m),this.$embeds.push(d),this.$modes[d]=m}for(var v=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(S){(function(D){var g=v[S],b=D[g];D[v[S]]=function(){return this.$delegator(g,arguments,b)}})(C)},C=this,d=0;d<v.length;d++)y(d)},this.$delegator=function(p,d,c){var _=d[0]||"start";if(typeof _!="string"){if(Array.isArray(_[2])){var m=_[2][_[2].length-1],v=this.$modes[m];if(v)return v[p].apply(v,[_[1]].concat([].slice.call(d,1)))}_=_[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var C=_.split(this.$embeds[y]);if(!C[0]&&C[1]){d[0]=C[1];var v=this.$modes[this.$embeds[y]];return v[p].apply(v,d)}}var S=c.apply(this,d);return c?S:void 0},this.transformAction=function(p,d,c,_,m){if(this.$behaviour){var v=this.$behaviour.getBehaviours();for(var y in v)if(v[y][d]){var C=v[y][d].apply(this,arguments);if(C)return C}}},this.getKeywords=function(p){if(!this.completionKeywords){var d=this.$tokenizer.rules,c=[];for(var _ in d)for(var m=d[_],v=0,y=m.length;v<y;v++)if(typeof m[v].token=="string")/keyword|support|storage/.test(m[v].token)&&c.push(m[v].regex);else if(typeof m[v].token=="object"){for(var C=0,S=m[v].token.length;C<S;C++)if(/keyword|support|storage/.test(m[v].token[C])){var _=m[v].regex.match(/\(.+?\)/g)[C];c.push(_.substr(1,_.length-2))}}this.completionKeywords=c}return p?c.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(p,d,c,_){var m=this.$keywordList||this.$createKeywordList();return m.map(function(v){return{name:v,value:v,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(f.prototype),t.Mode=f});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function o(r,l){throw console.log("Invalid Delta:",r),"Invalid Delta: "+l}function h(r,l){return l.row>=0&&l.row<r.length&&l.column>=0&&l.column<=r[l.row].length}function a(r,l){l.action!="insert"&&l.action!="remove"&&o(l,"delta.action must be 'insert' or 'remove'"),l.lines instanceof Array||o(l,"delta.lines must be an Array"),(!l.start||!l.end)&&o(l,"delta.start/end must be an present");var u=l.start;h(r,l.start)||o(l,"delta.start must be contained in document");var i=l.end;l.action=="remove"&&!h(r,i)&&o(l,"delta.end must contained in document for 'remove' actions");var s=i.row-u.row,f=i.column-(s==0?u.column:0);(s!=l.lines.length-1||l.lines[s].length!=f)&&o(l,"delta.range must match delta lines")}t.applyDelta=function(r,l,u){var i=l.start.row,s=l.start.column,f=r[i]||"";switch(l.action){case"insert":var p=l.lines;if(p.length===1)r[i]=f.substring(0,s)+l.lines[0]+f.substring(s);else{var d=[i,1].concat(l.lines);r.splice.apply(r,d),r[i]=f.substring(0,s)+r[i],r[i+l.lines.length-1]+=f.substring(s)}break;case"remove":var c=l.end.column,_=l.end.row;i===_?r[i]=f.substring(0,s)+f.substring(c):r.splice(i,_-i+1,f.substring(0,s)+r[_].substring(c));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var o=e("./lib/oop"),h=e("./lib/event_emitter").EventEmitter,a=function(){function u(i,s,f){this.$onChange=this.onChange.bind(this),this.attach(i),typeof s!="number"?this.setPosition(s.row,s.column):this.setPosition(s,f)}return u.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},u.prototype.getDocument=function(){return this.document},u.prototype.onChange=function(i){if(!(i.start.row==i.end.row&&i.start.row!=this.row)&&!(i.start.row>this.row)){var s=l(i,{row:this.row,column:this.column},this.$insertRight);this.setPosition(s.row,s.column,!0)}},u.prototype.setPosition=function(i,s,f){var p;if(f?p={row:i,column:s}:p=this.$clipPositionToDocument(i,s),!(this.row==p.row&&this.column==p.column)){var d={row:this.row,column:this.column};this.row=p.row,this.column=p.column,this._signal("change",{old:d,value:p})}},u.prototype.detach=function(){this.document.off("change",this.$onChange)},u.prototype.attach=function(i){this.document=i||this.document,this.document.on("change",this.$onChange)},u.prototype.$clipPositionToDocument=function(i,s){var f={};return i>=this.document.getLength()?(f.row=Math.max(0,this.document.getLength()-1),f.column=this.document.getLine(f.row).length):i<0?(f.row=0,f.column=0):(f.row=i,f.column=Math.min(this.document.getLine(f.row).length,Math.max(0,s))),s<0&&(f.column=0),f},u}();a.prototype.$insertRight=!1,o.implement(a.prototype,h);function r(u,i,s){var f=s?u.column<=i.column:u.column<i.column;return u.row<i.row||u.row==i.row&&f}function l(u,i,s){var f=u.action=="insert",p=(f?1:-1)*(u.end.row-u.start.row),d=(f?1:-1)*(u.end.column-u.start.column),c=u.start,_=f?c:u.end;return r(i,c,s)?{row:i.row,column:i.column}:r(_,i,!s)?{row:i.row+p,column:i.column+(i.row==_.row?d:0)}:{row:c.row,column:c.column}}t.Anchor=a});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var o=e("./lib/oop"),h=e("./apply_delta").applyDelta,a=e("./lib/event_emitter").EventEmitter,r=e("./range").Range,l=e("./anchor").Anchor,u=function(){function i(s){this.$lines=[""],s.length===0?this.$lines=[""]:Array.isArray(s)?this.insertMergedLines({row:0,column:0},s):this.insert({row:0,column:0},s)}return i.prototype.setValue=function(s){var f=this.getLength()-1;this.remove(new r(0,0,f,this.getLine(f).length)),this.insert({row:0,column:0},s||"")},i.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},i.prototype.createAnchor=function(s,f){return new l(this,s,f)},i.prototype.$detectNewLine=function(s){var f=s.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=f?f[1]:`
`,this._signal("changeNewLineMode")},i.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},i.prototype.setNewLineMode=function(s){this.$newLineMode!==s&&(this.$newLineMode=s,this._signal("changeNewLineMode"))},i.prototype.getNewLineMode=function(){return this.$newLineMode},i.prototype.isNewLine=function(s){return s==`\r
`||s=="\r"||s==`
`},i.prototype.getLine=function(s){return this.$lines[s]||""},i.prototype.getLines=function(s,f){return this.$lines.slice(s,f+1)},i.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},i.prototype.getLength=function(){return this.$lines.length},i.prototype.getTextRange=function(s){return this.getLinesForRange(s).join(this.getNewLineCharacter())},i.prototype.getLinesForRange=function(s){var f;if(s.start.row===s.end.row)f=[this.getLine(s.start.row).substring(s.start.column,s.end.column)];else{f=this.getLines(s.start.row,s.end.row),f[0]=(f[0]||"").substring(s.start.column);var p=f.length-1;s.end.row-s.start.row==p&&(f[p]=f[p].substring(0,s.end.column))}return f},i.prototype.insertLines=function(s,f){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(s,f)},i.prototype.removeLines=function(s,f){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(s,f)},i.prototype.insertNewLine=function(s){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(s,["",""])},i.prototype.insert=function(s,f){return this.getLength()<=1&&this.$detectNewLine(f),this.insertMergedLines(s,this.$split(f))},i.prototype.insertInLine=function(s,f){var p=this.clippedPos(s.row,s.column),d=this.pos(s.row,s.column+f.length);return this.applyDelta({start:p,end:d,action:"insert",lines:[f]},!0),this.clonePos(d)},i.prototype.clippedPos=function(s,f){var p=this.getLength();s===void 0?s=p:s<0?s=0:s>=p&&(s=p-1,f=void 0);var d=this.getLine(s);return f==null&&(f=d.length),f=Math.min(Math.max(f,0),d.length),{row:s,column:f}},i.prototype.clonePos=function(s){return{row:s.row,column:s.column}},i.prototype.pos=function(s,f){return{row:s,column:f}},i.prototype.$clipPosition=function(s){var f=this.getLength();return s.row>=f?(s.row=Math.max(0,f-1),s.column=this.getLine(f-1).length):(s.row=Math.max(0,s.row),s.column=Math.min(Math.max(s.column,0),this.getLine(s.row).length)),s},i.prototype.insertFullLines=function(s,f){s=Math.min(Math.max(s,0),this.getLength());var p=0;s<this.getLength()?(f=f.concat([""]),p=0):(f=[""].concat(f),s--,p=this.$lines[s].length),this.insertMergedLines({row:s,column:p},f)},i.prototype.insertMergedLines=function(s,f){var p=this.clippedPos(s.row,s.column),d={row:p.row+f.length-1,column:(f.length==1?p.column:0)+f[f.length-1].length};return this.applyDelta({start:p,end:d,action:"insert",lines:f}),this.clonePos(d)},i.prototype.remove=function(s){var f=this.clippedPos(s.start.row,s.start.column),p=this.clippedPos(s.end.row,s.end.column);return this.applyDelta({start:f,end:p,action:"remove",lines:this.getLinesForRange({start:f,end:p})}),this.clonePos(f)},i.prototype.removeInLine=function(s,f,p){var d=this.clippedPos(s,f),c=this.clippedPos(s,p);return this.applyDelta({start:d,end:c,action:"remove",lines:this.getLinesForRange({start:d,end:c})},!0),this.clonePos(d)},i.prototype.removeFullLines=function(s,f){s=Math.min(Math.max(0,s),this.getLength()-1),f=Math.min(Math.max(0,f),this.getLength()-1);var p=f==this.getLength()-1&&s>0,d=f<this.getLength()-1,c=p?s-1:s,_=p?this.getLine(c).length:0,m=d?f+1:f,v=d?0:this.getLine(m).length,y=new r(c,_,m,v),C=this.$lines.slice(s,f+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),C},i.prototype.removeNewLine=function(s){s<this.getLength()-1&&s>=0&&this.applyDelta({start:this.pos(s,this.getLine(s).length),end:this.pos(s+1,0),action:"remove",lines:["",""]})},i.prototype.replace=function(s,f){if(s instanceof r||(s=r.fromPoints(s.start,s.end)),f.length===0&&s.isEmpty())return s.start;if(f==this.getTextRange(s))return s.end;this.remove(s);var p;return f?p=this.insert(s.start,f):p=s.start,p},i.prototype.applyDeltas=function(s){for(var f=0;f<s.length;f++)this.applyDelta(s[f])},i.prototype.revertDeltas=function(s){for(var f=s.length-1;f>=0;f--)this.revertDelta(s[f])},i.prototype.applyDelta=function(s,f){var p=s.action=="insert";(p?s.lines.length<=1&&!s.lines[0]:!r.comparePoints(s.start,s.end))||(p&&s.lines.length>2e4?this.$splitAndapplyLargeDelta(s,2e4):(h(this.$lines,s,f),this._signal("change",s)))},i.prototype.$safeApplyDelta=function(s){var f=this.$lines.length;(s.action=="remove"&&s.start.row<f&&s.end.row<f||s.action=="insert"&&s.start.row<=f)&&this.applyDelta(s)},i.prototype.$splitAndapplyLargeDelta=function(s,f){for(var p=s.lines,d=p.length-f+1,c=s.start.row,_=s.start.column,m=0,v=0;m<d;m=v){v+=f-1;var y=p.slice(m,v);y.push(""),this.applyDelta({start:this.pos(c+m,_),end:this.pos(c+v,_=0),action:s.action,lines:y},!0)}s.lines=p.slice(m),s.start.row=c+m,s.start.column=_,this.applyDelta(s,!0)},i.prototype.revertDelta=function(s){this.$safeApplyDelta({start:this.clonePos(s.start),end:this.clonePos(s.end),action:s.action=="insert"?"remove":"insert",lines:s.lines.slice()})},i.prototype.indexToPosition=function(s,f){for(var p=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,c=f||0,_=p.length;c<_;c++)if(s-=p[c].length+d,s<0)return{row:c,column:s+p[c].length+d};return{row:_-1,column:s+p[_-1].length+d}},i.prototype.positionToIndex=function(s,f){for(var p=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,c=0,_=Math.min(s.row,p.length),m=f||0;m<_;++m)c+=p[m].length+d;return c+s.column},i.prototype.$split=function(s){return s.split(/\r\n|\r|\n/)},i}();u.prototype.$autoNewLine="",u.prototype.$newLineMode="auto",o.implement(u.prototype,a),t.Document=u});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var o=e("./lib/oop"),h=e("./lib/event_emitter").EventEmitter,a=function(){function r(l,u){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=l;var i=this;this.$worker=function(){if(i.running){for(var s=new Date,f=i.currentLine,p=-1,d=i.doc,c=f;i.lines[f];)f++;var _=d.getLength(),m=0;for(i.running=!1;f<_;){i.$tokenizeRow(f),p=f;do f++;while(i.lines[f]);if(m++,m%5===0&&new Date-s>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=f,p==-1&&(p=f),c<=p&&i.fireUpdateEvent(c,p)}}}return r.prototype.setTokenizer=function(l){this.tokenizer=l,this.lines=[],this.states=[],this.start(0)},r.prototype.setDocument=function(l){this.doc=l,this.lines=[],this.states=[],this.stop()},r.prototype.fireUpdateEvent=function(l,u){var i={first:l,last:u};this._signal("update",{data:i})},r.prototype.start=function(l){this.currentLine=Math.min(l||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},r.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},r.prototype.$updateOnChange=function(l){var u=l.start.row,i=l.end.row-u;if(i===0)this.lines[u]=null;else if(l.action=="remove")this.lines.splice(u,i+1,null),this.states.splice(u,i+1,null);else{var s=Array(i+1);s.unshift(u,1),this.lines.splice.apply(this.lines,s),this.states.splice.apply(this.states,s)}this.currentLine=Math.min(u,this.currentLine,this.doc.getLength()),this.stop()},r.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},r.prototype.getTokens=function(l){return this.lines[l]||this.$tokenizeRow(l)},r.prototype.getState=function(l){return this.currentLine==l&&this.$tokenizeRow(l),this.states[l]||"start"},r.prototype.$tokenizeRow=function(l){var u=this.doc.getLine(l),i=this.states[l-1],s=this.tokenizer.getLineTokens(u,i,l);return this.states[l]+""!=s.state+""?(this.states[l]=s.state,this.lines[l+1]=null,this.currentLine>l+1&&(this.currentLine=l+1)):this.currentLine==l&&(this.currentLine=l+1),this.lines[l]=s.tokens},r.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},r}();o.implement(a.prototype,h),t.BackgroundTokenizer=a});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,n){"use strict";var o=e("./lib/lang"),h=e("./range").Range,a=function(){function r(l,u,i){i===void 0&&(i="text"),this.setRegexp(l),this.clazz=u,this.type=i}return r.prototype.setRegexp=function(l){this.regExp+""!=l+""&&(this.regExp=l,this.cache=[])},r.prototype.update=function(l,u,i,s){if(this.regExp)for(var f=s.firstRow,p=s.lastRow,d={},c=f;c<=p;c++){var _=this.cache[c];_==null&&(_=o.getMatchOffsets(i.getLine(c),this.regExp),_.length>this.MAX_RANGES&&(_=_.slice(0,this.MAX_RANGES)),_=_.map(function(C){return new h(c,C.offset,c,C.offset+C.length)}),this.cache[c]=_.length?_:"");for(var m=_.length;m--;){var v=_[m].toScreenRange(i),y=v.toString();d[y]||(d[y]=!0,u.drawSingleLineMarker(l,v,this.clazz,s))}}},r}();a.prototype.MAX_RANGES=500,t.SearchHighlight=a});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var o=function(){function D(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return D.prototype.addSession=function(g){this.$session=g},D.prototype.add=function(g,b,F){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),b===!1||!this.lastDeltas){this.lastDeltas=[];var E=this.$undoStack.length;E>this.$undoDepth-1&&this.$undoStack.splice(0,E-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},D.prototype.addSelection=function(g,b){this.selections.push({value:g,rev:b||this.$rev})},D.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},D.prototype.markIgnored=function(g,b){b==null&&(b=this.$rev+1);for(var F=this.$undoStack,E=F.length;E--;){var T=F[E][0];if(T.id<=g)break;T.id<b&&(T.ignore=!0)}this.lastDeltas=null},D.prototype.getSelection=function(g,b){for(var F=this.selections,E=F.length;E--;){var T=F[E];if(T.rev<g)return b&&(T=F[E+1]),T}},D.prototype.getRevision=function(){return this.$rev},D.prototype.getDeltas=function(g,b){b==null&&(b=this.$rev+1);for(var F=this.$undoStack,E=null,T=0,M=F.length;M--;){var w=F[M][0];if(w.id<b&&!E&&(E=M+1),w.id<=g){T=M+1;break}}return F.slice(T,E)},D.prototype.getChangedRanges=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.getChangedLines=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.undo=function(g,b){this.lastDeltas=null;var F=this.$undoStack;if(h(F,F.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var E=F.pop(),T=null;return E&&(T=g.undoChanges(E,b),this.$redoStack.push(E),this.$syncRev()),this.$fromUndo=!1,T}},D.prototype.redo=function(g,b){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var F=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);S(this.$redoStack,F),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(M){M[0].id=++this.$maxRev},this)}var E=this.$redoStack.pop(),T=null;return E&&(T=g.redoChanges(E,b),this.$undoStack.push(E),this.$syncRev()),this.$fromUndo=!1,T},D.prototype.$syncRev=function(){var g=this.$undoStack,b=g[g.length-1],F=b&&b[0].id||0;this.$redoStackBaseRev=F,this.$rev=F},D.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},D.prototype.canUndo=function(){return this.$undoStack.length>0},D.prototype.canRedo=function(){return this.$redoStack.length>0},D.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},D.prototype.isAtBookmark=function(){return this.$rev===this.mark},D.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},D.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},D.prototype.$prettyPrint=function(g){return g?f(g):f(this.$undoStack)+`
---
`+f(this.$redoStack)},D}();o.prototype.hasUndo=o.prototype.canUndo,o.prototype.hasRedo=o.prototype.canRedo,o.prototype.isClean=o.prototype.isAtBookmark,o.prototype.markClean=o.prototype.bookmark;function h(D,g){for(var b=g;b--;){var F=D[b];if(F&&!F[0].ignore){for(;b<g-1;){var E=c(D[b],D[b+1]);D[b]=E[0],D[b+1]=E[1],b++}return!0}}}var a=e("./range").Range,r=a.comparePoints,l=a.comparePoints;function u(D){var g=D.action=="insert",b=D.start,F=D.end,E=(F.row-b.row)*(g?1:-1),T=(F.column-b.column)*(g?1:-1);g&&(F=b);for(var M in this.marks){var w=this.marks[M],x=l(w,b);if(!(x<0)){if(x===0&&g)if(w.bias==1)x=1;else{w.bias==-1;continue}var L=g?x:l(w,F);if(L>0){w.row+=E,w.column+=w.row==F.row?T:0;continue}!g&&L<=0&&(w.row=b.row,w.column=b.column,L===0&&(w.bias=1))}}}function i(D){return{row:D.row,column:D.column}}function s(D){return{start:i(D.start),end:i(D.end),action:D.action,lines:D.lines.slice()}}function f(D){if(D=D||this,Array.isArray(D))return D.map(f).join(`
`);var g="";return D.action?(g=D.action=="insert"?"+":"-",g+="["+D.lines+"]"):D.value&&(Array.isArray(D.value)?g=D.value.map(p).join(`
`):g=p(D.value)),D.start&&(g+=p(D)),(D.id||D.rev)&&(g+="	("+(D.id||D.rev)+")"),g}function p(D){return D.start.row+":"+D.start.column+"=>"+D.end.row+":"+D.end.column}function d(D,g){var b=D.action=="insert",F=g.action=="insert";if(b&&F)if(r(g.start,D.end)>=0)m(g,D,-1);else if(r(g.start,D.start)<=0)m(D,g,1);else return null;else if(b&&!F)if(r(g.start,D.end)>=0)m(g,D,-1);else if(r(g.end,D.start)<=0)m(D,g,-1);else return null;else if(!b&&F)if(r(g.start,D.start)>=0)m(g,D,1);else if(r(g.start,D.start)<=0)m(D,g,1);else return null;else if(!b&&!F)if(r(g.start,D.start)>=0)m(g,D,1);else if(r(g.end,D.start)<=0)m(D,g,-1);else return null;return[g,D]}function c(D,g){for(var b=D.length;b--;)for(var F=0;F<g.length;F++)if(!d(D[b],g[F])){for(;b<D.length;){for(;F--;)d(g[F],D[b]);F=g.length,b++}return[D,g]}return D.selectionBefore=g.selectionBefore=D.selectionAfter=g.selectionAfter=null,[g,D]}function _(D,g){var b=D.action=="insert",F=g.action=="insert";if(b&&F)r(D.start,g.start)<0?m(g,D,1):m(D,g,1);else if(b&&!F)r(D.start,g.end)>=0?m(D,g,-1):(r(D.start,g.start)<=0||m(D,a.fromPoints(g.start,D.start),-1),m(g,D,1));else if(!b&&F)r(g.start,D.end)>=0?m(g,D,-1):(r(g.start,D.start)<=0||m(g,a.fromPoints(D.start,g.start),-1),m(D,g,1));else if(!b&&!F)if(r(g.start,D.end)>=0)m(g,D,-1);else if(r(g.end,D.start)<=0)m(D,g,-1);else{var E,T;return r(D.start,g.start)<0&&(E=D,D=y(D,g.start)),r(D.end,g.end)>0&&(T=y(D,g.end)),v(g.end,D.start,D.end,-1),T&&!E&&(D.lines=T.lines,D.start=T.start,D.end=T.end,T=D),[g,E,T].filter(Boolean)}return[g,D]}function m(D,g,b){v(D.start,g.start,g.end,b),v(D.end,g.start,g.end,b)}function v(D,g,b,F){D.row==(F==1?g:b).row&&(D.column+=F*(b.column-g.column)),D.row+=F*(b.row-g.row)}function y(D,g){var b=D.lines,F=D.end;D.end=i(g);var E=D.end.row-D.start.row,T=b.splice(E,b.length),M=E?g.column:g.column-D.start.column;b.push(T[0].substring(0,M)),T[0]=T[0].substr(M);var w={start:i(g),end:F,lines:T,action:D.action};return w}function C(D,g){g=s(g);for(var b=D.length;b--;){for(var F=D[b],E=0;E<F.length;E++){var T=F[E],M=_(T,g);g=M[0],M.length!=2&&(M[2]?(F.splice(E+1,1,M[1],M[2]),E++):M[1]||(F.splice(E,1),E--))}F.length||D.splice(b,1)}return D}function S(D,g){for(var b=0;b<g.length;b++)for(var F=g[b],E=0;E<F.length;E++)C(D,F[E])}t.UndoManager=o});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var o=e("../range").Range,h=function(){function a(r,l){this.foldData=r,Array.isArray(l)?this.folds=l:l=this.folds=[l];var u=l[l.length-1];this.range=new o(l[0].start.row,l[0].start.column,u.end.row,u.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(i){i.setFoldLine(this)},this)}return a.prototype.shiftRow=function(r){this.start.row+=r,this.end.row+=r,this.folds.forEach(function(l){l.start.row+=r,l.end.row+=r})},a.prototype.addFold=function(r){if(r.sameRow){if(r.start.row<this.startRow||r.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(r),this.folds.sort(function(l,u){return-l.range.compareEnd(u.start.row,u.start.column)}),this.range.compareEnd(r.start.row,r.start.column)>0?(this.end.row=r.end.row,this.end.column=r.end.column):this.range.compareStart(r.end.row,r.end.column)<0&&(this.start.row=r.start.row,this.start.column=r.start.column)}else if(r.start.row==this.end.row)this.folds.push(r),this.end.row=r.end.row,this.end.column=r.end.column;else if(r.end.row==this.start.row)this.folds.unshift(r),this.start.row=r.start.row,this.start.column=r.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");r.foldLine=this},a.prototype.containsRow=function(r){return r>=this.start.row&&r<=this.end.row},a.prototype.walk=function(r,l,u){var i=0,s=this.folds,f,p,d,c=!0;l==null&&(l=this.end.row,u=this.end.column);for(var _=0;_<s.length;_++){if(f=s[_],p=f.range.compareStart(l,u),p==-1){r(null,l,u,i,c);return}if(d=r(null,f.start.row,f.start.column,i,c),d=!d&&r(f.placeholder,f.start.row,f.start.column,i),d||p===0)return;c=!f.sameRow,i=f.end.column}r(null,l,u,i,c)},a.prototype.getNextFoldTo=function(r,l){for(var u,i,s=0;s<this.folds.length;s++){if(u=this.folds[s],i=u.range.compareEnd(r,l),i==-1)return{fold:u,kind:"after"};if(i===0)return{fold:u,kind:"inside"}}return null},a.prototype.addRemoveChars=function(r,l,u){var i=this.getNextFoldTo(r,l),s,f;if(i){if(s=i.fold,i.kind=="inside"&&s.start.column!=l&&s.start.row!=r)window.console&&window.console.log(r,l,s);else if(s.start.row==r){f=this.folds;var p=f.indexOf(s);for(p===0&&(this.start.column+=u),p;p<f.length;p++){if(s=f[p],s.start.column+=u,!s.sameRow)return;s.end.column+=u}this.end.column+=u}}},a.prototype.split=function(r,l){var u=this.getNextFoldTo(r,l);if(!u||u.kind=="inside")return null;var i=u.fold,s=this.folds,f=this.foldData,p=s.indexOf(i),d=s[p-1];this.end.row=d.end.row,this.end.column=d.end.column,s=s.splice(p,s.length-p);var c=new a(f,s);return f.splice(f.indexOf(this)+1,0,c),c},a.prototype.merge=function(r){for(var l=r.folds,u=0;u<l.length;u++)this.addFold(l[u]);var i=this.foldData;i.splice(i.indexOf(r),1)},a.prototype.toString=function(){var r=[this.range.toString()+": ["];return this.folds.forEach(function(l){r.push("  "+l.toString())}),r.push("]"),r.join(`
`)},a.prototype.idxToPosition=function(r){for(var l=0,u=0;u<this.folds.length;u++){var i=this.folds[u];if(r-=i.start.column-l,r<0)return{row:i.start.row,column:i.start.column+r};if(r-=i.placeholder.length,r<0)return i.start;l=i.end.column}return{row:this.end.row,column:this.end.column+r}},a}();t.FoldLine=h});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var o=e("./range").Range,h=o.comparePoints,a=function(){function r(){this.ranges=[],this.$bias=1}return r.prototype.pointIndex=function(l,u,i){for(var s=this.ranges,f=i||0;f<s.length;f++){var p=s[f],d=h(l,p.end);if(!(d>0)){var c=h(l,p.start);return d===0?u&&c!==0?-f-2:f:c>0||c===0&&!u?f:-f-1}}return-f-1},r.prototype.add=function(l){var u=!l.isEmpty(),i=this.pointIndex(l.start,u);i<0&&(i=-i-1);var s=this.pointIndex(l.end,u,i);return s<0?s=-s-1:s++,this.ranges.splice(i,s-i,l)},r.prototype.addList=function(l){for(var u=[],i=l.length;i--;)u.push.apply(u,this.add(l[i]));return u},r.prototype.substractPoint=function(l){var u=this.pointIndex(l);if(u>=0)return this.ranges.splice(u,1)},r.prototype.merge=function(){var l=[],u=this.ranges;u=u.sort(function(d,c){return h(d.start,c.start)});for(var i=u[0],s,f=1;f<u.length;f++){s=i,i=u[f];var p=h(s.end,i.start);p<0||p==0&&!s.isEmpty()&&!i.isEmpty()||(h(s.end,i.end)<0&&(s.end.row=i.end.row,s.end.column=i.end.column),u.splice(f,1),l.push(i),i=s,f--)}return this.ranges=u,l},r.prototype.contains=function(l,u){return this.pointIndex({row:l,column:u})>=0},r.prototype.containsPoint=function(l){return this.pointIndex(l)>=0},r.prototype.rangeAtPoint=function(l){var u=this.pointIndex(l);if(u>=0)return this.ranges[u]},r.prototype.clipRows=function(l,u){var i=this.ranges;if(i[0].start.row>u||i[i.length-1].start.row<l)return[];var s=this.pointIndex({row:l,column:0});s<0&&(s=-s-1);var f=this.pointIndex({row:u,column:0},s);f<0&&(f=-f-1);for(var p=[],d=s;d<f;d++)p.push(i[d]);return p},r.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},r.prototype.attach=function(l){this.session&&this.detach(),this.session=l,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},r.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},r.prototype.$onChange=function(l){for(var u=l.start,i=l.end,s=u.row,f=i.row,p=this.ranges,d=0,c=p.length;d<c;d++){var _=p[d];if(_.end.row>=s)break}if(l.action=="insert")for(var m=f-s,v=-u.column+i.column;d<c;d++){var _=p[d];if(_.start.row>s)break;if(_.start.row==s&&_.start.column>=u.column&&(_.start.column==u.column&&this.$bias<=0||(_.start.column+=v,_.start.row+=m)),_.end.row==s&&_.end.column>=u.column){if(_.end.column==u.column&&this.$bias<0)continue;_.end.column==u.column&&v>0&&d<c-1&&_.end.column>_.start.column&&_.end.column==p[d+1].start.column&&(_.end.column-=v),_.end.column+=v,_.end.row+=m}}else for(var m=s-f,v=u.column-i.column;d<c;d++){var _=p[d];if(_.start.row>f)break;_.end.row<f&&(s<_.end.row||s==_.end.row&&u.column<_.end.column)?(_.end.row=s,_.end.column=u.column):_.end.row==f?_.end.column<=i.column?(m||_.end.column>u.column)&&(_.end.column=u.column,_.end.row=u.row):(_.end.column+=v,_.end.row+=m):_.end.row>f&&(_.end.row+=m),_.start.row<f&&(s<_.start.row||s==_.start.row&&u.column<_.start.column)?(_.start.row=s,_.start.column=u.column):_.start.row==f?_.start.column<=i.column?(m||_.start.column>u.column)&&(_.start.column=u.column,_.start.row=u.row):(_.start.column+=v,_.start.row+=m):_.start.row>f&&(_.start.row+=m)}if(m!=0&&d<c)for(;d<c;d++){var _=p[d];_.start.row+=m,_.end.row+=m}},r}();a.prototype.comparePoints=h,t.RangeList=a});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,n){"use strict";var o=this&&this.__extends||function(){var s=function(f,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(d[_]=c[_])},s(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");s(f,p);function d(){this.constructor=f}f.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),h=e("../range_list").RangeList,a=function(s){o(f,s);function f(p,d){var c=s.call(this)||this;return c.foldLine=null,c.placeholder=d,c.range=p,c.start=p.start,c.end=p.end,c.sameRow=p.start.row==p.end.row,c.subFolds=c.ranges=[],c}return f.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},f.prototype.setFoldLine=function(p){this.foldLine=p,this.subFolds.forEach(function(d){d.setFoldLine(p)})},f.prototype.clone=function(){var p=this.range.clone(),d=new f(p,this.placeholder);return this.subFolds.forEach(function(c){d.subFolds.push(c.clone())}),d.collapseChildren=this.collapseChildren,d},f.prototype.addSubFold=function(p){if(!this.range.isEqual(p)){l(p,this.start);for(var v=p.start.row,y=p.start.column,d=0,c=-1;d<this.subFolds.length&&(c=this.subFolds[d].range.compare(v,y),c==1);d++);var _=this.subFolds[d],m=0;if(c==0){if(_.range.containsRange(p))return _.addSubFold(p);m=1}for(var v=p.range.end.row,y=p.range.end.column,C=d,c=-1;C<this.subFolds.length&&(c=this.subFolds[C].range.compare(v,y),c==1);C++);c==0&&C++;for(var S=this.subFolds.splice(d,C-d,p),D=c==0?S.length-1:S.length,g=m;g<D;g++)p.addSubFold(S[g]);return p.setFoldLine(this.foldLine),p}},f.prototype.restoreRange=function(p){return i(p,this.start)},f}(h);function r(s,f){s.row-=f.row,s.row==0&&(s.column-=f.column)}function l(s,f){r(s.start,f),r(s.end,f)}function u(s,f){s.row==0&&(s.column+=f.column),s.row+=f.row}function i(s,f){u(s.start,f),u(s.end,f)}t.Fold=a});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,n){"use strict";var o=e("../range").Range,h=e("./fold_line").FoldLine,a=e("./fold").Fold,r=e("../token_iterator").TokenIterator,l=e("../mouse/mouse_event").MouseEvent;function u(){this.getFoldAt=function(i,s,f){var p=this.getFoldLine(i);if(!p)return null;for(var d=p.folds,c=0;c<d.length;c++){var _=d[c].range;if(_.contains(i,s)){if(f==1&&_.isEnd(i,s)&&!_.isEmpty())continue;if(f==-1&&_.isStart(i,s)&&!_.isEmpty())continue;return d[c]}}},this.getFoldsInRange=function(i){var s=i.start,f=i.end,p=this.$foldData,d=[];s.column+=1,f.column-=1;for(var c=0;c<p.length;c++){var _=p[c].range.compareRange(i);if(_!=2){if(_==-2)break;for(var m=p[c].folds,v=0;v<m.length;v++){var y=m[v];if(_=y.range.compareRange(i),_==-2)break;if(_==2)continue;if(_==42)break;d.push(y)}}}return s.column-=1,f.column+=1,d},this.getFoldsInRangeList=function(i){if(Array.isArray(i)){var s=[];i.forEach(function(f){s=s.concat(this.getFoldsInRange(f))},this)}else var s=this.getFoldsInRange(i);return s},this.getAllFolds=function(){for(var i=[],s=this.$foldData,f=0;f<s.length;f++)for(var p=0;p<s[f].folds.length;p++)i.push(s[f].folds[p]);return i},this.getFoldStringAt=function(i,s,f,p){if(p=p||this.getFoldLine(i),!p)return null;for(var d={end:{column:0}},c,_,m=0;m<p.folds.length;m++){_=p.folds[m];var v=_.range.compareEnd(i,s);if(v==-1){c=this.getLine(_.start.row).substring(d.end.column,_.start.column);break}else if(v===0)return null;d=_}return c||(c=this.getLine(_.start.row).substring(d.end.column)),f==-1?c.substring(0,s-d.end.column):f==1?c.substring(s-d.end.column):c},this.getFoldLine=function(i,s){var f=this.$foldData,p=0;for(s&&(p=f.indexOf(s)),p==-1&&(p=0),p;p<f.length;p++){var d=f[p];if(d.start.row<=i&&d.end.row>=i)return d;if(d.end.row>i)return null}return null},this.getNextFoldLine=function(i,s){var f=this.$foldData,p=0;for(s&&(p=f.indexOf(s)),p==-1&&(p=0),p;p<f.length;p++){var d=f[p];if(d.end.row>=i)return d}return null},this.getFoldedRowCount=function(i,s){for(var f=this.$foldData,p=s-i+1,d=0;d<f.length;d++){var c=f[d],_=c.end.row,m=c.start.row;if(_>=s){m<s&&(m>=i?p-=s-m:p=0);break}else _>=i&&(m>=i?p-=_-m:p-=_-i+1)}return p},this.$addFoldLine=function(i){return this.$foldData.push(i),this.$foldData.sort(function(s,f){return s.start.row-f.start.row}),i},this.addFold=function(i,s){var f=this.$foldData,p=!1,d;i instanceof a?d=i:(d=new a(s,i),d.collapseChildren=s.collapseChildren),this.$clipRangeToDocument(d.range);var c=d.start.row,_=d.start.column,m=d.end.row,v=d.end.column,y=this.getFoldAt(c,_,1),C=this.getFoldAt(m,v,-1);if(y&&C==y)return y.addSubFold(d);y&&!y.range.isStart(c,_)&&this.removeFold(y),C&&!C.range.isEnd(m,v)&&this.removeFold(C);var S=this.getFoldsInRange(d.range);S.length>0&&(this.removeFolds(S),d.collapseChildren||S.forEach(function(F){d.addSubFold(F)}));for(var D=0;D<f.length;D++){var g=f[D];if(m==g.start.row){g.addFold(d),p=!0;break}else if(c==g.end.row){if(g.addFold(d),p=!0,!d.sameRow){var b=f[D+1];if(b&&b.start.row==m){g.merge(b);break}}break}else if(m<=g.start.row)break}return p||(g=this.$addFoldLine(new h(this.$foldData,d))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:d,action:"add"}),d},this.addFolds=function(i){i.forEach(function(s){this.addFold(s)},this)},this.removeFold=function(i){var s=i.foldLine,f=s.start.row,p=s.end.row,d=this.$foldData,c=s.folds;if(c.length==1)d.splice(d.indexOf(s),1);else if(s.range.isEnd(i.end.row,i.end.column))c.pop(),s.end.row=c[c.length-1].end.row,s.end.column=c[c.length-1].end.column;else if(s.range.isStart(i.start.row,i.start.column))c.shift(),s.start.row=c[0].start.row,s.start.column=c[0].start.column;else if(i.sameRow)c.splice(c.indexOf(i),1);else{var _=s.split(i.start.row,i.start.column);c=_.folds,c.shift(),_.start.row=c[0].start.row,_.start.column=c[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(f,p):this.$updateRowLengthCache(f,p)),this.$modified=!0,this._signal("changeFold",{data:i,action:"remove"})},this.removeFolds=function(i){for(var s=[],f=0;f<i.length;f++)s.push(i[f]);s.forEach(function(p){this.removeFold(p)},this),this.$modified=!0},this.expandFold=function(i){this.removeFold(i),i.subFolds.forEach(function(s){i.restoreRange(s),this.addFold(s)},this),i.collapseChildren>0&&this.foldAll(i.start.row+1,i.end.row,i.collapseChildren-1),i.subFolds=[]},this.expandFolds=function(i){i.forEach(function(s){this.expandFold(s)},this)},this.unfold=function(i,s){var f,p;if(i==null)f=new o(0,0,this.getLength(),0),s==null&&(s=!0);else if(typeof i=="number")f=new o(i,0,i,this.getLine(i).length);else if("row"in i)f=o.fromPoints(i,i);else{if(Array.isArray(i))return p=[],i.forEach(function(c){p=p.concat(this.unfold(c))},this),p;f=i}p=this.getFoldsInRangeList(f);for(var d=p;p.length==1&&o.comparePoints(p[0].start,f.start)<0&&o.comparePoints(p[0].end,f.end)>0;)this.expandFolds(p),p=this.getFoldsInRangeList(f);if(s!=!1?this.removeFolds(p):this.expandFolds(p),d.length)return d},this.isRowFolded=function(i,s){return!!this.getFoldLine(i,s)},this.getRowFoldEnd=function(i,s){var f=this.getFoldLine(i,s);return f?f.end.row:i},this.getRowFoldStart=function(i,s){var f=this.getFoldLine(i,s);return f?f.start.row:i},this.getFoldDisplayLine=function(i,s,f,p,d){p==null&&(p=i.start.row),d==null&&(d=0),s==null&&(s=i.end.row),f==null&&(f=this.getLine(s).length);var c=this.doc,_="";return i.walk(function(m,v,y,C){if(!(v<p)){if(v==p){if(y<d)return;C=Math.max(d,C)}m!=null?_+=m:_+=c.getLine(v).substring(C,y)}},s,f),_},this.getDisplayLine=function(i,s,f,p){var d=this.getFoldLine(i);if(d)return this.getFoldDisplayLine(d,i,s,f,p);var c;return c=this.doc.getLine(i),c.substring(p||0,s||c.length)},this.$cloneFoldData=function(){var i=[];return i=this.$foldData.map(function(s){var f=s.folds.map(function(p){return p.clone()});return new h(i,f)}),i},this.toggleFold=function(i){var s=this.selection,f=s.getRange(),p,d;if(f.isEmpty()){var c=f.start;if(p=this.getFoldAt(c.row,c.column),p){this.expandFold(p);return}else(d=this.findMatchingBracket(c))?f.comparePoint(d)==1?f.end=d:(f.start=d,f.start.column++,f.end.column--):(d=this.findMatchingBracket({row:c.row,column:c.column+1}))?(f.comparePoint(d)==1?f.end=d:f.start=d,f.start.column++):f=this.getCommentFoldRange(c.row,c.column)||f}else{var _=this.getFoldsInRange(f);if(i&&_.length){this.expandFolds(_);return}else _.length==1&&(p=_[0])}if(p||(p=this.getFoldAt(f.start.row,f.start.column)),p&&p.range.toString()==f.toString()){this.expandFold(p);return}var m="...";if(!f.isMultiLine()){if(m=this.getTextRange(f),m.length<4)return;m=m.trim().substring(0,2)+".."}this.addFold(m,f)},this.getCommentFoldRange=function(i,s,f){var p=new r(this,i,s),d=p.getCurrentToken(),c=d&&d.type;if(d&&/^comment|string/.test(c)){c=c.match(/comment|string/)[0],c=="comment"&&(c+="|doc-start|\\.doc");var _=new RegExp(c),m=new o;if(f!=1){do d=p.stepBackward();while(d&&_.test(d.type)&&!/^comment.end/.test(d.type));d=p.stepForward()}if(m.start.row=p.getCurrentTokenRow(),m.start.column=p.getCurrentTokenColumn()+(/^comment.start/.test(d.type)?d.value.length:2),p=new r(this,i,s),f!=-1){var v=-1;do if(d=p.stepForward(),v==-1){var y=this.getState(p.$row);_.test(y)||(v=p.$row)}else if(p.$row>v)break;while(d&&_.test(d.type)&&!/^comment.start/.test(d.type));d=p.stepBackward()}else d=p.getCurrentToken();return m.end.row=p.getCurrentTokenRow(),m.end.column=p.getCurrentTokenColumn(),/^comment.end/.test(d.type)||(m.end.column+=d.value.length-2),m}},this.foldAll=function(i,s,f,p){f==null&&(f=1e5);var d=this.foldWidgets;if(d){s=s||this.getLength(),i=i||0;for(var c=i;c<s;c++)if(d[c]==null&&(d[c]=this.getFoldWidget(c)),d[c]=="start"&&!(p&&!p(c))){var _=this.getFoldWidgetRange(c);_&&_.isMultiLine()&&_.end.row<=s&&_.start.row>=i&&(c=_.end.row,_.collapseChildren=f,this.addFold("...",_))}}},this.foldToLevel=function(i){for(this.foldAll();i-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var i=this;this.foldAll(null,null,null,function(s){for(var f=i.getTokens(s),p=0;p<f.length;p++){var d=f[p];if(!(d.type=="text"&&/^\s+$/.test(d.value)))return!!/comment/.test(d.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(i){if(!this.$foldStyles[i])throw new Error("invalid fold style: "+i+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=i){this.$foldStyle=i,i=="manual"&&this.unfold();var s=this.$foldMode;this.$setFolding(null),this.$setFolding(s)}},this.$setFolding=function(i){if(this.$foldMode!=i){if(this.$foldMode=i,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!i||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=i.getFoldWidget.bind(i,this,this.$foldStyle),this.getFoldWidgetRange=i.getFoldWidgetRange.bind(i,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(i,s){var f=this.foldWidgets;if(!f||s&&f[i])return{};for(var p=i-1,d;p>=0;){var c=f[p];if(c==null&&(c=f[p]=this.getFoldWidget(p)),c=="start"){var _=this.getFoldWidgetRange(p);if(d||(d=_),_&&_.end.row>=i)break}p--}return{range:p!==-1&&_,firstRange:d}},this.onFoldWidgetClick=function(i,s){s instanceof l&&(s=s.domEvent);var f={children:s.shiftKey,all:s.ctrlKey||s.metaKey,siblings:s.altKey},p=this.$toggleFoldWidget(i,f);if(!p){var d=s.target||s.srcElement;d&&/ace_fold-widget/.test(d.className)&&(d.className+=" ace_invalid")}},this.$toggleFoldWidget=function(i,s){if(this.getFoldWidget){var f=this.getFoldWidget(i),p=this.getLine(i),d=f==="end"?-1:1,c=this.getFoldAt(i,d===-1?0:p.length,d);if(c)return s.children||s.all?this.removeFold(c):this.expandFold(c),c;var _=this.getFoldWidgetRange(i,!0);if(_&&!_.isMultiLine()&&(c=this.getFoldAt(_.start.row,_.start.column,1),c&&_.isEqual(c.range)))return this.removeFold(c),c;if(s.siblings){var m=this.getParentFoldRangeData(i);if(m.range)var v=m.range.start.row+1,y=m.range.end.row;this.foldAll(v,y,s.all?1e4:0)}else s.children?(y=_?_.end.row:this.getLength(),this.foldAll(i+1,y,s.all?1e4:0)):_&&(s.all&&(_.collapseChildren=1e4),this.addFold("...",_));return _}},this.toggleFoldWidget=function(i){var s=this.selection.getCursor().row;s=this.getRowFoldStart(s);var f=this.$toggleFoldWidget(s,{});if(!f){var p=this.getParentFoldRangeData(s,!0);if(f=p.range||p.firstRange,f){s=f.start.row;var d=this.getFoldAt(s,this.getLine(s).length,1);d?this.removeFold(d):this.addFold("...",f)}}},this.updateFoldWidgets=function(i){var s=i.start.row,f=i.end.row-s;if(f===0)this.foldWidgets[s]=null;else if(i.action=="remove")this.foldWidgets.splice(s,f+1,null);else{var p=Array(f+1);p.unshift(s,1),this.foldWidgets.splice.apply(this.foldWidgets,p)}},this.tokenizerUpdateFoldWidgets=function(i){var s=i.data;s.first!=s.last&&this.foldWidgets.length>s.first&&this.foldWidgets.splice(s.first,this.foldWidgets.length)}}t.Folding=u});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var o=e("../token_iterator").TokenIterator,h=e("../range").Range;function a(){this.findMatchingBracket=function(r,l){if(r.column==0)return null;var u=l||this.getLine(r.row).charAt(r.column-1);if(u=="")return null;var i=u.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],r):this.$findOpeningBracket(i[2],r):null},this.getBracketRange=function(r){var l=this.getLine(r.row),u=!0,i,s=l.charAt(r.column-1),f=s&&s.match(/([\(\[\{])|([\)\]\}])/);if(f||(s=l.charAt(r.column),r={row:r.row,column:r.column+1},f=s&&s.match(/([\(\[\{])|([\)\]\}])/),u=!1),!f)return null;if(f[1]){var p=this.$findClosingBracket(f[1],r);if(!p)return null;i=h.fromPoints(r,p),u||(i.end.column++,i.start.column--),i.cursor=i.end}else{var p=this.$findOpeningBracket(f[2],r);if(!p)return null;i=h.fromPoints(p,r),u||(i.start.column++,i.end.column--),i.cursor=i.start}return i},this.getMatchingBracketRanges=function(r,l){var u=this.getLine(r.row),i=/([\(\[\{])|([\)\]\}])/,s=!l&&u.charAt(r.column-1),f=s&&s.match(i);if(f||(s=(l===void 0||l)&&u.charAt(r.column),r={row:r.row,column:r.column+1},f=s&&s.match(i)),!f)return null;var p=new h(r.row,r.column-1,r.row,r.column),d=f[1]?this.$findClosingBracket(f[1],r):this.$findOpeningBracket(f[2],r);if(!d)return[p];var c=new h(d.row,d.column,d.row,d.column+1);return[p,c]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(r,l,u){var i=this.$brackets[r],s=1,f=new o(this,l.row,l.column),p=f.getCurrentToken();if(p||(p=f.stepForward()),!!p){u||(u=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var d=l.column-f.getCurrentTokenColumn()-2,c=p.value;;){for(;d>=0;){var _=c.charAt(d);if(_==i){if(s-=1,s==0)return{row:f.getCurrentTokenRow(),column:d+f.getCurrentTokenColumn()}}else _==r&&(s+=1);d-=1}do p=f.stepBackward();while(p&&!u.test(p.type));if(p==null)break;c=p.value,d=c.length-1}return null}},this.$findClosingBracket=function(r,l,u){var i=this.$brackets[r],s=1,f=new o(this,l.row,l.column),p=f.getCurrentToken();if(p||(p=f.stepForward()),!!p){u||(u=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var d=l.column-f.getCurrentTokenColumn();;){for(var c=p.value,_=c.length;d<_;){var m=c.charAt(d);if(m==i){if(s-=1,s==0)return{row:f.getCurrentTokenRow(),column:d+f.getCurrentTokenColumn()}}else m==r&&(s+=1);d+=1}do p=f.stepForward();while(p&&!u.test(p.type));if(p==null)break;d=0}return null}},this.getMatchingTags=function(r){var l=new o(this,r.row,r.column),u=this.$findTagName(l);if(u){var i=l.stepBackward();return i.value==="<"?this.$findClosingTag(l,u):this.$findOpeningTag(l,u)}},this.$findTagName=function(r){var l=r.getCurrentToken(),u=!1,i=!1;if(l&&l.type.indexOf("tag-name")===-1)do i?l=r.stepBackward():l=r.stepForward(),l&&(l.value==="/>"?i=!0:l.type.indexOf("tag-name")!==-1&&(u=!0));while(l&&!u);return l},this.$findClosingTag=function(r,l){var u,i=l.value,s=l.value,f=0,p=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);l=r.stepForward();var d=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l.value.length),c=!1;do if(u=l,l=r.stepForward(),l){if(l.value===">"&&!c){var _=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);c=!0}if(l.type.indexOf("tag-name")!==-1){if(i=l.value,s===i){if(u.value==="<")f++;else if(u.value==="</"&&(f--,f<0)){r.stepBackward();var m=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+2);l=r.stepForward();var v=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l.value.length);if(l=r.stepForward(),l&&l.value===">")var y=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);else return}}}else if(s===i&&l.value==="/>"&&(f--,f<0))var m=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+2),v=m,y=v,_=new h(d.end.row,d.end.column,d.end.row,d.end.column+1)}while(l&&f>=0);if(p&&_&&m&&y&&d&&v)return{openTag:new h(p.start.row,p.start.column,_.end.row,_.end.column),closeTag:new h(m.start.row,m.start.column,y.end.row,y.end.column),openTagName:d,closeTagName:v}},this.$findOpeningTag=function(r,l){var u=r.getCurrentToken(),i=l.value,s=0,f=r.getCurrentTokenRow(),p=r.getCurrentTokenColumn(),d=p+2,c=new h(f,p,f,d);r.stepForward();var _=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l.value.length);if(l=r.stepForward(),!(!l||l.value!==">")){var m=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);r.stepBackward(),r.stepBackward();do if(l=u,f=r.getCurrentTokenRow(),p=r.getCurrentTokenColumn(),d=p+l.value.length,u=r.stepBackward(),l){if(l.type.indexOf("tag-name")!==-1){if(i===l.value)if(u.value==="<"){if(s++,s>0){var v=new h(f,p,f,d),y=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);do l=r.stepForward();while(l&&l.value!==">");var C=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1)}}else u.value==="</"&&s--}else if(l.value==="/>"){for(var S=0,D=u;D;){if(D.type.indexOf("tag-name")!==-1&&D.value===i){s--;break}else if(D.value==="<")break;D=r.stepBackward(),S++}for(var g=0;g<S;g++)r.stepForward()}}while(u&&s<=0);if(y&&C&&c&&m&&v&&_)return{openTag:new h(y.start.row,y.start.column,C.end.row,C.end.column),closeTag:new h(c.start.row,c.start.column,m.end.row,m.end.column),openTagName:v,closeTagName:_}}}}t.BracketMatch=a});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var o=e("./lib/oop"),h=e("./lib/lang"),a=e("./bidihandler").BidiHandler,r=e("./config"),l=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,i=e("./mode/text").Mode,s=e("./range").Range,f=e("./document").Document,p=e("./background_tokenizer").BackgroundTokenizer,d=e("./search_highlight").SearchHighlight,c=e("./undomanager").UndoManager,_=function(){function E(T,M){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++E.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new p(new i().getTokenizer(),this);var w=this;this.bgTokenizer.on("update",function(x){w._signal("tokenizerUpdate",x)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof T!="object"||!T.getLine)&&(T=new f(T)),this.setDocument(T),this.selection=new u(this),this.$bidiHandler=new a(this),r.resetOptions(this),this.setMode(M),r._signal("session",this),this.destroyed=!1}return E.prototype.setDocument=function(T){this.doc&&this.doc.off("change",this.$onChange),this.doc=T,T.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},E.prototype.getDocument=function(){return this.doc},E.prototype.$resetRowCache=function(T){if(!T){this.$docRowCache=[],this.$screenRowCache=[];return}var M=this.$docRowCache.length,w=this.$getRowCacheIndex(this.$docRowCache,T)+1;M>w&&(this.$docRowCache.splice(w,M),this.$screenRowCache.splice(w,M))},E.prototype.$getRowCacheIndex=function(T,M){for(var w=0,x=T.length-1;w<=x;){var L=w+x>>1,R=T[L];if(M>R)w=L+1;else if(M<R)x=L-1;else return L}return w-1},E.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},E.prototype.onChangeFold=function(T){var M=T.data;this.$resetRowCache(M.start.row)},E.prototype.onChange=function(T){this.$modified=!0,this.$bidiHandler.onChange(T),this.$resetRowCache(T.start.row);var M=this.$updateInternalDataOnChange(T);!this.$fromUndo&&this.$undoManager&&(M&&M.length&&(this.$undoManager.add({action:"removeFolds",folds:M},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(T,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(T),this._signal("change",T)},E.prototype.setValue=function(T){this.doc.setValue(T),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},E.fromJSON=function(T){typeof T=="string"&&(T=JSON.parse(T));var M=new c;M.$undoStack=T.history.undo,M.$redoStack=T.history.redo,M.mark=T.history.mark,M.$rev=T.history.rev;var w=new E(T.value);return T.folds.forEach(function(x){w.addFold("...",s.fromPoints(x.start,x.end))}),w.setAnnotations(T.annotations),w.setBreakpoints(T.breakpoints),w.setMode(T.mode),w.setScrollLeft(T.scrollLeft),w.setScrollTop(T.scrollTop),w.setUndoManager(M),w.selection.fromJSON(T.selection),w},E.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(T){return T.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},E.prototype.toString=function(){return this.doc.getValue()},E.prototype.getSelection=function(){return this.selection},E.prototype.getState=function(T){return this.bgTokenizer.getState(T)},E.prototype.getTokens=function(T){return this.bgTokenizer.getTokens(T)},E.prototype.getTokenAt=function(T,M){var w=this.bgTokenizer.getTokens(T),x,L=0;if(M==null){var R=w.length-1;L=this.getLine(T).length}else for(var R=0;R<w.length&&(L+=w[R].value.length,!(L>=M));R++);return x=w[R],x?(x.index=R,x.start=L-x.value.length,x):null},E.prototype.setUndoManager=function(T){if(this.$undoManager=T,this.$informUndoManager&&this.$informUndoManager.cancel(),T){var M=this;T.addSession(this),this.$syncInformUndoManager=function(){M.$informUndoManager.cancel(),M.mergeUndoDeltas=!1},this.$informUndoManager=h.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},E.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},E.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},E.prototype.getTabString=function(){return this.getUseSoftTabs()?h.stringRepeat(" ",this.getTabSize()):"	"},E.prototype.setUseSoftTabs=function(T){this.setOption("useSoftTabs",T)},E.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},E.prototype.setTabSize=function(T){this.setOption("tabSize",T)},E.prototype.getTabSize=function(){return this.$tabSize},E.prototype.isTabStop=function(T){return this.$useSoftTabs&&T.column%this.$tabSize===0},E.prototype.setNavigateWithinSoftTabs=function(T){this.setOption("navigateWithinSoftTabs",T)},E.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},E.prototype.setOverwrite=function(T){this.setOption("overwrite",T)},E.prototype.getOverwrite=function(){return this.$overwrite},E.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},E.prototype.addGutterDecoration=function(T,M){this.$decorations[T]||(this.$decorations[T]=""),this.$decorations[T]+=" "+M,this._signal("changeBreakpoint",{})},E.prototype.removeGutterDecoration=function(T,M){this.$decorations[T]=(this.$decorations[T]||"").replace(" "+M,""),this._signal("changeBreakpoint",{})},E.prototype.getBreakpoints=function(){return this.$breakpoints},E.prototype.setBreakpoints=function(T){this.$breakpoints=[];for(var M=0;M<T.length;M++)this.$breakpoints[T[M]]="ace_breakpoint";this._signal("changeBreakpoint",{})},E.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},E.prototype.setBreakpoint=function(T,M){M===void 0&&(M="ace_breakpoint"),M?this.$breakpoints[T]=M:delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},E.prototype.clearBreakpoint=function(T){delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},E.prototype.addMarker=function(T,M,w,x){var L=this.$markerId++,R={range:T,type:w||"line",renderer:typeof w=="function"?w:null,clazz:M,inFront:!!x,id:L};return x?(this.$frontMarkers[L]=R,this._signal("changeFrontMarker")):(this.$backMarkers[L]=R,this._signal("changeBackMarker")),L},E.prototype.addDynamicMarker=function(T,M){if(T.update){var w=this.$markerId++;return T.id=w,T.inFront=!!M,M?(this.$frontMarkers[w]=T,this._signal("changeFrontMarker")):(this.$backMarkers[w]=T,this._signal("changeBackMarker")),T}},E.prototype.removeMarker=function(T){var M=this.$frontMarkers[T]||this.$backMarkers[T];if(M){var w=M.inFront?this.$frontMarkers:this.$backMarkers;delete w[T],this._signal(M.inFront?"changeFrontMarker":"changeBackMarker")}},E.prototype.getMarkers=function(T){return T?this.$frontMarkers:this.$backMarkers},E.prototype.highlight=function(T){if(!this.$searchHighlight){var M=new d(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(M)}this.$searchHighlight.setRegexp(T)},E.prototype.highlightLines=function(T,M,w,x){typeof M!="number"&&(w=M,M=T),w||(w="ace_step");var L=new s(T,0,M,1/0);return L.id=this.addMarker(L,w,"fullLine",x),L},E.prototype.setAnnotations=function(T){this.$annotations=T,this._signal("changeAnnotation",{})},E.prototype.getAnnotations=function(){return this.$annotations||[]},E.prototype.clearAnnotations=function(){this.setAnnotations([])},E.prototype.$detectNewLine=function(T){var M=T.match(/^.*?(\r?\n)/m);M?this.$autoNewLine=M[1]:this.$autoNewLine=`
`},E.prototype.getWordRange=function(T,M){var w=this.getLine(T),x=!1;if(M>0&&(x=!!w.charAt(M-1).match(this.tokenRe)),x||(x=!!w.charAt(M).match(this.tokenRe)),x)var L=this.tokenRe;else if(/^\s+$/.test(w.slice(M-1,M+1)))var L=/\s/;else var L=this.nonTokenRe;var R=M;if(R>0){do R--;while(R>=0&&w.charAt(R).match(L));R++}for(var A=M;A<w.length&&w.charAt(A).match(L);)A++;return new s(T,R,T,A)},E.prototype.getAWordRange=function(T,M){for(var w=this.getWordRange(T,M),x=this.getLine(w.end.row);x.charAt(w.end.column).match(/[ \t]/);)w.end.column+=1;return w},E.prototype.setNewLineMode=function(T){this.doc.setNewLineMode(T)},E.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},E.prototype.setUseWorker=function(T){this.setOption("useWorker",T)},E.prototype.getUseWorker=function(){return this.$useWorker},E.prototype.onReloadTokenizer=function(T){var M=T.data;this.bgTokenizer.start(M.first),this._signal("tokenizerUpdate",T)},E.prototype.setMode=function(T,M){if(T&&typeof T=="object"){if(T.getTokenizer)return this.$onChangeMode(T);var w=T,x=w.path}else x=T||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[x]&&!w){this.$onChangeMode(this.$modes[x]),M&&M();return}this.$modeId=x,r.loadModule(["mode",x],function(L){if(this.$modeId!==x)return M&&M();this.$modes[x]&&!w?this.$onChangeMode(this.$modes[x]):L&&L.Mode&&(L=new L.Mode(w),w||(this.$modes[x]=L,L.$id=x),this.$onChangeMode(L)),M&&M()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},E.prototype.$onChangeMode=function(T,M){if(M||(this.$modeId=T.$id),this.$mode!==T){var w=this.$mode;this.$mode=T,this.$stopWorker(),this.$useWorker&&this.$startWorker();var x=T.getTokenizer();if(x.on!==void 0){var L=this.onReloadTokenizer.bind(this);x.on("update",L)}this.bgTokenizer.setTokenizer(x),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=T.tokenRe,this.nonTokenRe=T.nonTokenRe,M||(T.attachToSession&&T.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(T.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:w,mode:T}))}},E.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},E.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(T){r.warn("Could not load worker",T),this.$worker=null}},E.prototype.getMode=function(){return this.$mode},E.prototype.setScrollTop=function(T){this.$scrollTop===T||isNaN(T)||(this.$scrollTop=T,this._signal("changeScrollTop",T))},E.prototype.getScrollTop=function(){return this.$scrollTop},E.prototype.setScrollLeft=function(T){this.$scrollLeft===T||isNaN(T)||(this.$scrollLeft=T,this._signal("changeScrollLeft",T))},E.prototype.getScrollLeft=function(){return this.$scrollLeft},E.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},E.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var T=0;return this.lineWidgets.forEach(function(M){M&&M.screenWidth>T&&(T=M.screenWidth)}),this.lineWidgetWidth=T},E.prototype.$computeWidth=function(T){if(this.$modified||T){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var M=this.doc.getAllLines(),w=this.$rowLengthCache,x=0,L=0,R=this.$foldData[L],A=R?R.start.row:1/0,I=M.length,$=0;$<I;$++){if($>A){if($=R.end.row+1,$>=I)break;R=this.$foldData[L++],A=R?R.start.row:1/0}w[$]==null&&(w[$]=this.$getStringScreenWidth(M[$])[0]),w[$]>x&&(x=w[$])}this.screenWidth=x}},E.prototype.getLine=function(T){return this.doc.getLine(T)},E.prototype.getLines=function(T,M){return this.doc.getLines(T,M)},E.prototype.getLength=function(){return this.doc.getLength()},E.prototype.getTextRange=function(T){return this.doc.getTextRange(T||this.selection.getRange())},E.prototype.insert=function(T,M){return this.doc.insert(T,M)},E.prototype.remove=function(T){return this.doc.remove(T)},E.prototype.removeFullLines=function(T,M){return this.doc.removeFullLines(T,M)},E.prototype.undoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=T.length-1;w!=-1;w--){var x=T[w];x.action=="insert"||x.action=="remove"?this.doc.revertDelta(x):x.folds&&this.addFolds(x.folds)}!M&&this.$undoSelect&&(T.selectionBefore?this.selection.fromJSON(T.selectionBefore):this.selection.setRange(this.$getUndoSelection(T,!0))),this.$fromUndo=!1}},E.prototype.redoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=0;w<T.length;w++){var x=T[w];(x.action=="insert"||x.action=="remove")&&this.doc.$safeApplyDelta(x)}!M&&this.$undoSelect&&(T.selectionAfter?this.selection.fromJSON(T.selectionAfter):this.selection.setRange(this.$getUndoSelection(T,!1))),this.$fromUndo=!1}},E.prototype.setUndoSelect=function(T){this.$undoSelect=T},E.prototype.$getUndoSelection=function(T,M){function w(I){return M?I.action!=="insert":I.action==="insert"}for(var x,L,R=0;R<T.length;R++){var A=T[R];if(A.start){if(!x){w(A)?x=s.fromPoints(A.start,A.end):x=s.fromPoints(A.start,A.start);continue}w(A)?(L=A.start,x.compare(L.row,L.column)==-1&&x.setStart(L),L=A.end,x.compare(L.row,L.column)==1&&x.setEnd(L)):(L=A.start,x.compare(L.row,L.column)==-1&&(x=s.fromPoints(A.start,A.start)))}}return x},E.prototype.replace=function(T,M){return this.doc.replace(T,M)},E.prototype.moveText=function(T,M,w){var x=this.getTextRange(T),L=this.getFoldsInRange(T),R=s.fromPoints(M,M);if(!w){this.remove(T);var A=T.start.row-T.end.row,I=A?-T.end.column:T.start.column-T.end.column;I&&(R.start.row==T.end.row&&R.start.column>T.end.column&&(R.start.column+=I),R.end.row==T.end.row&&R.end.column>T.end.column&&(R.end.column+=I)),A&&R.start.row>=T.end.row&&(R.start.row+=A,R.end.row+=A)}if(R.end=this.insert(R.start,x),L.length){var $=T.start,H=R.start,A=H.row-$.row,I=H.column-$.column;this.addFolds(L.map(function(G){return G=G.clone(),G.start.row==$.row&&(G.start.column+=I),G.end.row==$.row&&(G.end.column+=I),G.start.row+=A,G.end.row+=A,G}))}return R},E.prototype.indentRows=function(T,M,w){w=w.replace(/\t/g,this.getTabString());for(var x=T;x<=M;x++)this.doc.insertInLine({row:x,column:0},w)},E.prototype.outdentRows=function(T){for(var M=T.collapseRows(),w=new s(0,0,0,0),x=this.getTabSize(),L=M.start.row;L<=M.end.row;++L){var R=this.getLine(L);w.start.row=L,w.end.row=L;for(var A=0;A<x&&R.charAt(A)==" ";++A);A<x&&R.charAt(A)=="	"?(w.start.column=A,w.end.column=A+1):(w.start.column=0,w.end.column=A),this.remove(w)}},E.prototype.$moveLines=function(T,M,w){if(T=this.getRowFoldStart(T),M=this.getRowFoldEnd(M),w<0){var x=this.getRowFoldStart(T+w);if(x<0)return 0;var L=x-T}else if(w>0){var x=this.getRowFoldEnd(M+w);if(x>this.doc.getLength()-1)return 0;var L=x-M}else{T=this.$clipRowToDocument(T),M=this.$clipRowToDocument(M);var L=M-T+1}var R=new s(T,0,M,Number.MAX_VALUE),A=this.getFoldsInRange(R).map(function($){return $=$.clone(),$.start.row+=L,$.end.row+=L,$}),I=w==0?this.doc.getLines(T,M):this.doc.removeFullLines(T,M);return this.doc.insertFullLines(T+L,I),A.length&&this.addFolds(A),L},E.prototype.moveLinesUp=function(T,M){return this.$moveLines(T,M,-1)},E.prototype.moveLinesDown=function(T,M){return this.$moveLines(T,M,1)},E.prototype.duplicateLines=function(T,M){return this.$moveLines(T,M,0)},E.prototype.$clipRowToDocument=function(T){return Math.max(0,Math.min(T,this.doc.getLength()-1))},E.prototype.$clipColumnToRow=function(T,M){return M<0?0:Math.min(this.doc.getLine(T).length,M)},E.prototype.$clipPositionToDocument=function(T,M){if(M=Math.max(0,M),T<0)T=0,M=0;else{var w=this.doc.getLength();T>=w?(T=w-1,M=this.doc.getLine(w-1).length):M=Math.min(this.doc.getLine(T).length,M)}return{row:T,column:M}},E.prototype.$clipRangeToDocument=function(T){T.start.row<0?(T.start.row=0,T.start.column=0):T.start.column=this.$clipColumnToRow(T.start.row,T.start.column);var M=this.doc.getLength()-1;return T.end.row>M?(T.end.row=M,T.end.column=this.doc.getLine(M).length):T.end.column=this.$clipColumnToRow(T.end.row,T.end.column),T},E.prototype.setUseWrapMode=function(T){if(T!=this.$useWrapMode){if(this.$useWrapMode=T,this.$modified=!0,this.$resetRowCache(0),T){var M=this.getLength();this.$wrapData=Array(M),this.$updateWrapData(0,M-1)}this._signal("changeWrapMode")}},E.prototype.getUseWrapMode=function(){return this.$useWrapMode},E.prototype.setWrapLimitRange=function(T,M){(this.$wrapLimitRange.min!==T||this.$wrapLimitRange.max!==M)&&(this.$wrapLimitRange={min:T,max:M},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},E.prototype.adjustWrapLimit=function(T,M){var w=this.$wrapLimitRange;w.max<0&&(w={min:M,max:M});var x=this.$constrainWrapLimit(T,w.min,w.max);return x!=this.$wrapLimit&&x>1?(this.$wrapLimit=x,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},E.prototype.$constrainWrapLimit=function(T,M,w){return M&&(T=Math.max(M,T)),w&&(T=Math.min(w,T)),T},E.prototype.getWrapLimit=function(){return this.$wrapLimit},E.prototype.setWrapLimit=function(T){this.setWrapLimitRange(T,T)},E.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},E.prototype.$updateInternalDataOnChange=function(T){var M=this.$useWrapMode,w=T.action,x=T.start,L=T.end,R=x.row,A=L.row,I=A-R,$=null;if(this.$updating=!0,I!=0)if(w==="remove"){this[M?"$wrapData":"$rowLengthCache"].splice(R,I);var H=this.$foldData;$=this.getFoldsInRange(T),this.removeFolds($);var P=this.getFoldLine(L.row),q=0;if(P){P.addRemoveChars(L.row,L.column,x.column-L.column),P.shiftRow(-I);var G=this.getFoldLine(R);G&&G!==P&&(G.merge(P),P=G),q=H.indexOf(P)+1}for(q;q<H.length;q++){var P=H[q];P.start.row>=L.row&&P.shiftRow(-I)}A=R}else{var N=Array(I);N.unshift(R,0);var Q=M?this.$wrapData:this.$rowLengthCache;Q.splice.apply(Q,N);var H=this.$foldData,P=this.getFoldLine(R),q=0;if(P){var O=P.range.compareInside(x.row,x.column);O==0?(P=P.split(x.row,x.column),P&&(P.shiftRow(I),P.addRemoveChars(A,0,L.column-x.column))):O==-1&&(P.addRemoveChars(R,0,L.column-x.column),P.shiftRow(I)),q=H.indexOf(P)+1}for(q;q<H.length;q++){var P=H[q];P.start.row>=R&&P.shiftRow(I)}}else{I=Math.abs(T.start.column-T.end.column),w==="remove"&&($=this.getFoldsInRange(T),this.removeFolds($),I=-I);var P=this.getFoldLine(R);P&&P.addRemoveChars(R,x.column,I)}return M&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,M?this.$updateWrapData(R,A):this.$updateRowLengthCache(R,A),$},E.prototype.$updateRowLengthCache=function(T,M){this.$rowLengthCache[T]=null,this.$rowLengthCache[M]=null},E.prototype.$updateWrapData=function(T,M){var w=this.doc.getAllLines(),x=this.getTabSize(),L=this.$wrapData,R=this.$wrapLimit,A,I,$=T;for(M=Math.min(M,w.length-1);$<=M;)I=this.getFoldLine($,I),I?(A=[],I.walk(function(H,P,q,G){var N;if(H!=null){N=this.$getDisplayTokens(H,A.length),N[0]=y;for(var Q=1;Q<N.length;Q++)N[Q]=C}else N=this.$getDisplayTokens(w[P].substring(G,q),A.length);A=A.concat(N)}.bind(this),I.end.row,w[I.end.row].length+1),L[I.start.row]=this.$computeWrapSplits(A,R,x),$=I.end.row+1):(A=this.$getDisplayTokens(w[$]),L[$]=this.$computeWrapSplits(A,R,x),$++)},E.prototype.$computeWrapSplits=function(T,M,w){if(T.length==0)return[];var x=[],L=T.length,R=0,A=0,I=this.$wrapAsCode,$=this.$indentedSoftWrap,H=M<=Math.max(2*w,8)||$===!1?0:Math.floor(M/2);function P(){var O=0;if(H===0)return O;if($)for(var B=0;B<T.length;B++){var U=T[B];if(U==D)O+=1;else if(U==g)O+=w;else{if(U==b)continue;break}}return I&&$!==!1&&(O+=w),Math.min(O,H)}function q(O){for(var B=O-R,U=R;U<O;U++){var k=T[U];(k===12||k===2)&&(B-=1)}x.length||(G=P(),x.indent=G),A+=B,x.push(A),R=O}for(var G=0;L-R>M-G;){var N=R+M-G;if(T[N-1]>=D&&T[N]>=D){q(N);continue}if(T[N]==y||T[N]==C){for(N;N!=R-1&&T[N]!=y;N--);if(N>R){q(N);continue}for(N=R+M,N;N<T.length&&T[N]==C;N++);if(N==T.length)break;q(N);continue}for(var Q=Math.max(N-(M-(M>>2)),R-1);N>Q&&T[N]<y;)N--;if(I){for(;N>Q&&T[N]<y;)N--;for(;N>Q&&T[N]==S;)N--}else for(;N>Q&&T[N]<D;)N--;if(N>Q){q(++N);continue}N=R+M,T[N]==v&&N--,q(N-G)}return x},E.prototype.$getDisplayTokens=function(T,M){var w=[],x;M=M||0;for(var L=0;L<T.length;L++){var R=T.charCodeAt(L);if(R==9){x=this.getScreenTabSize(w.length+M),w.push(g);for(var A=1;A<x;A++)w.push(b)}else R==32?w.push(D):R>39&&R<48||R>57&&R<64?w.push(S):R>=4352&&F(R)?w.push(m,v):w.push(m)}return w},E.prototype.$getStringScreenWidth=function(T,M,w){if(M==0)return[0,0];M==null&&(M=1/0),w=w||0;var x,L;for(L=0;L<T.length&&(x=T.charCodeAt(L),x==9?w+=this.getScreenTabSize(w):x>=4352&&F(x)?w+=2:w+=1,!(w>M));L++);return[w,L]},E.prototype.getRowLength=function(T){var M=1;return this.lineWidgets&&(M+=this.lineWidgets[T]&&this.lineWidgets[T].rowCount||0),!this.$useWrapMode||!this.$wrapData[T]?M:this.$wrapData[T].length+M},E.prototype.getRowLineCount=function(T){return!this.$useWrapMode||!this.$wrapData[T]?1:this.$wrapData[T].length+1},E.prototype.getRowWrapIndent=function(T){if(this.$useWrapMode){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE),w=this.$wrapData[M.row];return w.length&&w[0]<M.column?w.indent:0}else return 0},E.prototype.getScreenLastRowColumn=function(T){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE);return this.documentToScreenColumn(M.row,M.column)},E.prototype.getDocumentLastRowColumn=function(T,M){var w=this.documentToScreenRow(T,M);return this.getScreenLastRowColumn(w)},E.prototype.getDocumentLastRowColumnPosition=function(T,M){var w=this.documentToScreenRow(T,M);return this.screenToDocumentPosition(w,Number.MAX_VALUE/10)},E.prototype.getRowSplitData=function(T){if(this.$useWrapMode)return this.$wrapData[T]},E.prototype.getScreenTabSize=function(T){return this.$tabSize-(T%this.$tabSize|0)},E.prototype.screenToDocumentRow=function(T,M){return this.screenToDocumentPosition(T,M).row},E.prototype.screenToDocumentColumn=function(T,M){return this.screenToDocumentPosition(T,M).column},E.prototype.screenToDocumentPosition=function(T,M,w){if(T<0)return{row:0,column:0};var x,L=0,R=0,A,I=0,$=0,H=this.$screenRowCache,P=this.$getRowCacheIndex(H,T),q=H.length;if(q&&P>=0)var I=H[P],L=this.$docRowCache[P],G=T>H[q-1];else var G=!q;for(var N=this.getLength()-1,Q=this.getNextFoldLine(L),O=Q?Q.start.row:1/0;I<=T&&($=this.getRowLength(L),!(I+$>T||L>=N));)I+=$,L++,L>O&&(L=Q.end.row+1,Q=this.getNextFoldLine(L,Q),O=Q?Q.start.row:1/0),G&&(this.$docRowCache.push(L),this.$screenRowCache.push(I));if(Q&&Q.start.row<=L)x=this.getFoldDisplayLine(Q),L=Q.start.row;else{if(I+$<=T||L>N)return{row:N,column:this.getLine(N).length};x=this.getLine(L),Q=null}var B=0,U=Math.floor(T-I);if(this.$useWrapMode){var k=this.$wrapData[L];k&&(A=k[U],U>0&&k.length&&(B=k.indent,R=k[U-1]||k[k.length-1],x=x.substring(R)))}return w!==void 0&&this.$bidiHandler.isBidiRow(I+U,L,U)&&(M=this.$bidiHandler.offsetToCol(w)),R+=this.$getStringScreenWidth(x,M-B)[1],this.$useWrapMode&&R>=A&&(R=A-1),Q?Q.idxToPosition(R):{row:L,column:R}},E.prototype.documentToScreenPosition=function(T,M){if(typeof M>"u")var w=this.$clipPositionToDocument(T.row,T.column);else w=this.$clipPositionToDocument(T,M);T=w.row,M=w.column;var x=0,L=null,R=null;R=this.getFoldAt(T,M,1),R&&(T=R.start.row,M=R.start.column);var A,I=0,$=this.$docRowCache,H=this.$getRowCacheIndex($,T),P=$.length;if(P&&H>=0)var I=$[H],x=this.$screenRowCache[H],q=T>$[P-1];else var q=!P;for(var G=this.getNextFoldLine(I),N=G?G.start.row:1/0;I<T;){if(I>=N){if(A=G.end.row+1,A>T)break;G=this.getNextFoldLine(A,G),N=G?G.start.row:1/0}else A=I+1;x+=this.getRowLength(I),I=A,q&&(this.$docRowCache.push(I),this.$screenRowCache.push(x))}var Q="";G&&I>=N?(Q=this.getFoldDisplayLine(G,T,M),L=G.start.row):(Q=this.getLine(T).substring(0,M),L=T);var O=0;if(this.$useWrapMode){var B=this.$wrapData[L];if(B){for(var U=0;Q.length>=B[U];)x++,U++;Q=Q.substring(B[U-1]||0,Q.length),O=U>0?B.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(x+=this.lineWidgets[I].rowsAbove),{row:x,column:O+this.$getStringScreenWidth(Q)[0]}},E.prototype.documentToScreenColumn=function(T,M){return this.documentToScreenPosition(T,M).column},E.prototype.documentToScreenRow=function(T,M){return this.documentToScreenPosition(T,M).row},E.prototype.getScreenLength=function(){var T=0,M=null;if(this.$useWrapMode)for(var L=this.$wrapData.length,R=0,x=0,M=this.$foldData[x++],A=M?M.start.row:1/0;R<L;){var I=this.$wrapData[R];T+=I?I.length+1:1,R++,R>A&&(R=M.end.row+1,M=this.$foldData[x++],A=M?M.start.row:1/0)}else{T=this.getLength();for(var w=this.$foldData,x=0;x<w.length;x++)M=w[x],T-=M.end.row-M.start.row}return this.lineWidgets&&(T+=this.$getWidgetScreenLength()),T},E.prototype.$setFontMetrics=function(T){this.$enableVarChar&&(this.$getStringScreenWidth=function(M,w,x){if(w===0)return[0,0];w||(w=1/0),x=x||0;var L,R;for(R=0;R<M.length&&(L=M.charAt(R),L==="	"?x+=this.getScreenTabSize(x):x+=T.getCharacterWidth(L),!(x>w));R++);return[x,R]})},E.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},E}();_.$uid=0,_.prototype.$modes=r.$modes,_.prototype.getValue=_.prototype.toString,_.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},_.prototype.$overwrite=!1,_.prototype.$mode=null,_.prototype.$modeId=null,_.prototype.$scrollTop=0,_.prototype.$scrollLeft=0,_.prototype.$wrapLimit=80,_.prototype.$useWrapMode=!1,_.prototype.$wrapLimitRange={min:null,max:null},_.prototype.lineWidgets=null,_.prototype.isFullWidth=F,o.implement(_.prototype,l);var m=1,v=2,y=3,C=4,S=9,D=10,g=11,b=12;function F(E){return E<4352?!1:E>=4352&&E<=4447||E>=4515&&E<=4519||E>=4602&&E<=4607||E>=9001&&E<=9002||E>=11904&&E<=11929||E>=11931&&E<=12019||E>=12032&&E<=12245||E>=12272&&E<=12283||E>=12288&&E<=12350||E>=12353&&E<=12438||E>=12441&&E<=12543||E>=12549&&E<=12589||E>=12593&&E<=12686||E>=12688&&E<=12730||E>=12736&&E<=12771||E>=12784&&E<=12830||E>=12832&&E<=12871||E>=12880&&E<=13054||E>=13056&&E<=19903||E>=19968&&E<=42124||E>=42128&&E<=42182||E>=43360&&E<=43388||E>=44032&&E<=55203||E>=55216&&E<=55238||E>=55243&&E<=55291||E>=63744&&E<=64255||E>=65040&&E<=65049||E>=65072&&E<=65106||E>=65108&&E<=65126||E>=65128&&E<=65131||E>=65281&&E<=65376||E>=65504&&E<=65510}e("./edit_session/folding").Folding.call(_.prototype),e("./edit_session/bracket_match").BracketMatch.call(_.prototype),r.defineOptions(_.prototype,"session",{wrap:{set:function(E){if(!E||E=="off"?E=!1:E=="free"?E=!0:E=="printMargin"?E=-1:typeof E=="string"&&(E=parseInt(E,10)||!1),this.$wrap!=E)if(this.$wrap=E,!E)this.setUseWrapMode(!1);else{var T=typeof E=="number"?E:null;this.setWrapLimitRange(T,T),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(E){E=E=="auto"?this.$mode.type!="text":E!="text",E!=this.$wrapAsCode&&(this.$wrapAsCode=E,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(E){this.$useWorker=E,this.$stopWorker(),E&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(E){E=parseInt(E),E>0&&this.$tabSize!==E&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=E,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(E){this.setFoldStyle(E)},handlesSet:!0},overwrite:{set:function(E){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(E){this.doc.setNewLineMode(E)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(E){this.setMode(E)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=_});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var o=e("./lib/lang"),h=e("./lib/oop"),a=e("./range").Range,r=function(){function u(){this.$options={}}return u.prototype.set=function(i){return h.mixin(this.$options,i),this},u.prototype.getOptions=function(){return o.copyObject(this.$options)},u.prototype.setOptions=function(i){this.$options=i},u.prototype.find=function(i){var s=this.$options,f=this.$matchIterator(i,s);if(!f)return!1;var p=null;return f.forEach(function(d,c,_,m){return p=new a(d,c,_,m),c==m&&s.start&&s.start.start&&s.skipCurrent!=!1&&p.isEqual(s.start)?(p=null,!1):!0}),p},u.prototype.findAll=function(i){var s=this.$options;if(!s.needle)return[];this.$assembleRegExp(s);var f=s.range,p=f?i.getLines(f.start.row,f.end.row):i.doc.getAllLines(),d=[],c=s.re;if(s.$isMultiLine){var _=c.length,m=p.length-_,v;e:for(var y=c.offset||0;y<=m;y++){for(var C=0;C<_;C++)if(p[y+C].search(c[C])==-1)continue e;var S=p[y],D=p[y+_-1],g=S.length-S.match(c[0])[0].length,b=D.match(c[_-1])[0].length;v&&v.end.row===y&&v.end.column>g||(d.push(v=new a(y,g,y+_-1,b)),_>2&&(y=y+_-2))}}else for(var F=0;F<p.length;F++)for(var E=o.getMatchOffsets(p[F],c),C=0;C<E.length;C++){var T=E[C];d.push(new a(F,T.offset,F,T.offset+T.length))}if(f){for(var M=f.start.column,w=f.end.column,F=0,C=d.length-1;F<C&&d[F].start.column<M&&d[F].start.row==0;)F++;for(var x=f.end.row-f.start.row;F<C&&d[C].end.column>w&&d[C].end.row==x;)C--;for(d=d.slice(F,C+1),F=0,C=d.length;F<C;F++)d[F].start.row+=f.start.row,d[F].end.row+=f.start.row}return d},u.prototype.replace=function(i,s){var f=this.$options,p=this.$assembleRegExp(f);if(f.$isMultiLine)return s;if(p){var d=p.exec(i);if(!d||d[0].length!=i.length)return null;if(s=i.replace(p,s),f.preserveCase){s=s.split("");for(var c=Math.min(i.length,i.length);c--;){var _=i[c];_&&_.toLowerCase()!=_?s[c]=s[c].toUpperCase():s[c]=s[c].toLowerCase()}s=s.join("")}return s}},u.prototype.$assembleRegExp=function(i,s){if(i.needle instanceof RegExp)return i.re=i.needle;var f=i.needle;if(!i.needle)return i.re=!1;i.regExp||(f=o.escapeRegExp(f));var p=i.caseSensitive?"gm":"gmi";try{new RegExp(f,"u"),i.$supportsUnicodeFlag=!0,p+="u"}catch{i.$supportsUnicodeFlag=!1}if(i.wholeWord&&(f=l(f,i)),i.$isMultiLine=!s&&/[\n\r]/.test(f),i.$isMultiLine)return i.re=this.$assembleMultilineRegExp(f,p);try{var d=new RegExp(f,p)}catch{d=!1}return i.re=d},u.prototype.$assembleMultilineRegExp=function(i,s){for(var f=i.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),p=[],d=0;d<f.length;d++)try{p.push(new RegExp(f[d],s))}catch{return!1}return p},u.prototype.$matchIterator=function(i,s){var f=this.$assembleRegExp(s);if(!f)return!1;var p=s.backwards==!0,d=s.skipCurrent!=!1,c=f.unicode,_=s.range,m=s.start;m||(m=_?_[p?"end":"start"]:i.selection.getRange()),m.start&&(m=m[d!=p?"end":"start"]);var v=_?_.start.row:0,y=_?_.end.row:i.getLength()-1;if(p)var C=function(g){var b=m.row;if(!D(b,m.column,g)){for(b--;b>=v;b--)if(D(b,Number.MAX_VALUE,g))return;if(s.wrap!=!1){for(b=y,v=m.row;b>=v;b--)if(D(b,Number.MAX_VALUE,g))return}}};else var C=function(b){var F=m.row;if(!D(F,m.column,b)){for(F=F+1;F<=y;F++)if(D(F,0,b))return;if(s.wrap!=!1){for(F=v,y=m.row;F<=y;F++)if(D(F,0,b))return}}};if(s.$isMultiLine)var S=f.length,D=function(g,b,F){var E=p?g-S+1:g;if(!(E<0||E+S>i.getLength())){var T=i.getLine(E),M=T.search(f[0]);if(!(!p&&M<b||M===-1)){for(var w=1;w<S;w++)if(T=i.getLine(E+w),T.search(f[w])==-1)return;var x=T.match(f[S-1])[0].length;if(!(p&&x>b)&&F(E,M,E+S-1,x))return!0}}};else if(p)var D=function(b,F,E){var T=i.getLine(b),M=[],w,x=0;for(f.lastIndex=0;w=f.exec(T);){var L=w[0].length;if(x=w.index,!L){if(x>=T.length)break;f.lastIndex=x+=o.skipEmptyMatch(T,x,c)}if(w.index+L>F)break;M.push(w.index,L)}for(var R=M.length-1;R>=0;R-=2){var A=M[R-1],L=M[R];if(E(b,A,b,A+L))return!0}};else var D=function(b,F,E){var T=i.getLine(b),M,w;for(f.lastIndex=F;w=f.exec(T);){var x=w[0].length;if(M=w.index,E(b,M,b,M+x))return!0;if(!x&&(f.lastIndex=M+=o.skipEmptyMatch(T,M,c),M>=T.length))return!1}};return{forEach:C}},u}();function l(u,i){var s=o.supportsLookbehind();function f(_,m){m===void 0&&(m=!0);var v=s&&i.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return v.test(_)||i.regExp?s&&i.$supportsUnicodeFlag?m?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var p=Array.from(u),d=p[0],c=p[p.length-1];return f(d)+u+f(c,!1)}t.Search=r});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var o=this&&this.__extends||function(){var s=function(f,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(d[_]=c[_])},s(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");s(f,p);function d(){this.constructor=f}f.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),h=e("../lib/keys"),a=e("../lib/useragent"),r=h.KEY_MODS,l=function(){function s(f,p){this.$init(f,p,!1)}return s.prototype.$init=function(f,p,d){this.platform=p||(a.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(f),this.$singleCommand=d},s.prototype.addCommand=function(f){this.commands[f.name]&&this.removeCommand(f),this.commands[f.name]=f,f.bindKey&&this._buildKeyHash(f)},s.prototype.removeCommand=function(f,p){var d=f&&(typeof f=="string"?f:f.name);f=this.commands[d],p||delete this.commands[d];var c=this.commandKeyBinding;for(var _ in c){var m=c[_];if(m==f)delete c[_];else if(Array.isArray(m)){var v=m.indexOf(f);v!=-1&&(m.splice(v,1),m.length==1&&(c[_]=m[0]))}}},s.prototype.bindKey=function(f,p,d){if(typeof f=="object"&&f&&(d==null&&(d=f.position),f=f[this.platform]),!!f){if(typeof p=="function")return this.addCommand({exec:p,bindKey:f,name:p.name||f});f.split("|").forEach(function(c){var _="";if(c.indexOf(" ")!=-1){var m=c.split(/\s+/);c=m.pop(),m.forEach(function(C){var S=this.parseKeys(C),D=r[S.hashId]+S.key;_+=(_?" ":"")+D,this._addCommandToBinding(_,"chainKeys")},this),_+=" "}var v=this.parseKeys(c),y=r[v.hashId]+v.key;this._addCommandToBinding(_+y,p,d)},this)}},s.prototype._addCommandToBinding=function(f,p,d){var c=this.commandKeyBinding,_;if(!p)delete c[f];else if(!c[f]||this.$singleCommand)c[f]=p;else{Array.isArray(c[f])?(_=c[f].indexOf(p))!=-1&&c[f].splice(_,1):c[f]=[c[f]],typeof d!="number"&&(d=u(p));var m=c[f];for(_=0;_<m.length;_++){var v=m[_],y=u(v);if(y>d)break}m.splice(_,0,p)}},s.prototype.addCommands=function(f){f&&Object.keys(f).forEach(function(p){var d=f[p];if(d){if(typeof d=="string")return this.bindKey(d,p);typeof d=="function"&&(d={exec:d}),typeof d=="object"&&(d.name||(d.name=p),this.addCommand(d))}},this)},s.prototype.removeCommands=function(f){Object.keys(f).forEach(function(p){this.removeCommand(f[p])},this)},s.prototype.bindKeys=function(f){Object.keys(f).forEach(function(p){this.bindKey(p,f[p])},this)},s.prototype._buildKeyHash=function(f){this.bindKey(f.bindKey,f)},s.prototype.parseKeys=function(f){var p=f.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),d=p.pop(),c=h[d];if(h.FUNCTION_KEYS[c])d=h.FUNCTION_KEYS[c].toLowerCase();else if(p.length){if(p.length==1&&p[0]=="shift")return{key:d.toUpperCase(),hashId:-1}}else return{key:d,hashId:-1};for(var _=0,m=p.length;m--;){var v=h.KEY_MODS[p[m]];if(v==null)return typeof console<"u"&&console.error("invalid modifier "+p[m]+" in "+f),!1;_|=v}return{key:d,hashId:_}},s.prototype.findKeyCommand=function(f,p){var d=r[f]+p;return this.commandKeyBinding[d]},s.prototype.handleKeyboard=function(f,p,d,c){if(!(c<0)){var _=r[p]+d,m=this.commandKeyBinding[_];return f.$keyChain&&(f.$keyChain+=" "+_,m=this.commandKeyBinding[f.$keyChain]||m),m&&(m=="chainKeys"||m[m.length-1]=="chainKeys")?(f.$keyChain=f.$keyChain||_,{command:"null"}):(f.$keyChain&&((!p||p==4)&&d.length==1?f.$keyChain=f.$keyChain.slice(0,-_.length-1):(p==-1||c>0)&&(f.$keyChain="")),{command:m})}},s.prototype.getStatusText=function(f,p){return p.$keyChain||""},s}();function u(s){return typeof s=="object"&&s.bindKey&&s.bindKey.position||(s.isDefault?-100:0)}var i=function(s){o(f,s);function f(p,d){var c=s.call(this,p,d)||this;return c.$singleCommand=!0,c}return f}(l);i.call=function(s,f,p){l.prototype.$init.call(s,f,p,!0)},l.call=function(s,f,p){l.prototype.$init.call(s,f,p,!1)},t.HashHandler=i,t.MultiHashHandler=l});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var o=this&&this.__extends||function(){var u=function(i,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(f[d]=p[d])},u(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");u(i,s);function f(){this.constructor=i}i.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),h=e("../lib/oop"),a=e("../keyboard/hash_handler").MultiHashHandler,r=e("../lib/event_emitter").EventEmitter,l=function(u){o(i,u);function i(s,f){var p=u.call(this,f,s)||this;return p.byName=p.commands,p.setDefaultHandler("exec",function(d){return d.args?d.command.exec(d.editor,d.args,d.event,!1):d.command.exec(d.editor,{},d.event,!0)}),p}return i.prototype.exec=function(s,f,p){if(Array.isArray(s)){for(var d=s.length;d--;)if(this.exec(s[d],f,p))return!0;return!1}if(typeof s=="string"&&(s=this.commands[s]),!s||f&&f.$readOnly&&!s.readOnly||this.$checkCommandState!=!1&&s.isAvailable&&!s.isAvailable(f))return!1;var c={editor:f,command:s,args:p};return c.returnValue=this._emit("exec",c),this._signal("afterExec",c),c.returnValue!==!1},i.prototype.toggleRecording=function(s){if(!this.$inReplay)return s&&s._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(f){this.macro.push([f.command,f.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},i.prototype.replay=function(s){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(s);try{this.$inReplay=!0,this.macro.forEach(function(f){typeof f=="string"?this.exec(f,s):this.exec(f[0],s,f[1])},this)}finally{this.$inReplay=!1}}},i.prototype.trimMacro=function(s){return s.map(function(f){return typeof f[0]!="string"&&(f[0]=f[0].name),f[1]||(f=f[0]),f})},i}(a);h.implement(l.prototype,r),t.CommandManager=l});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var o=e("../lib/lang"),h=e("../config"),a=e("../range").Range;function r(u,i){return{win:u,mac:i}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:r("Ctrl-,","Command-,"),exec:function(u){h.loadModule("ace/ext/settings_menu",function(i){i.init(u),u.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:r("Alt-E","F4"),exec:function(u){h.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(u,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:r("Alt-Shift-E","Shift-F4"),exec:function(u){h.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(u,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:r("Ctrl-A","Command-A"),exec:function(u){u.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:r(null,"Ctrl-L"),exec:function(u){u.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:r("Ctrl-L","Command-L"),exec:function(u,i){typeof i=="number"&&!isNaN(i)&&u.gotoLine(i),u.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:r("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(u){u.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:r("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(u){u.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:r("F2","F2"),exec:function(u){u.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:r("Alt-F2","Alt-F2"),exec:function(u){u.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:r(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:r(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:r("Alt-0","Command-Option-0"),exec:function(u){u.session.foldAll(),u.session.unfold(u.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:r("Alt-Shift-0","Command-Option-Shift-0"),exec:function(u){u.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:r("Ctrl-K","Command-G"),exec:function(u){u.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:r("Ctrl-Shift-K","Command-Shift-G"),exec:function(u){u.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:r("Alt-K","Ctrl-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:r("Alt-Shift-K","Ctrl-Shift-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:r("Ctrl-F","Command-F"),exec:function(u){h.loadModule("ace/ext/searchbox",function(i){i.Search(u)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(u){u.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:r("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(u){u.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:r("Ctrl-Home","Command-Home|Command-Up"),exec:function(u){u.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:r("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(u){u.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:r("Up","Up|Ctrl-P"),exec:function(u,i){u.navigateUp(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:r("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(u){u.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:r("Ctrl-End","Command-End|Command-Down"),exec:function(u){u.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:r("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(u){u.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:r("Down","Down|Ctrl-N"),exec:function(u,i){u.navigateDown(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:r("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(u){u.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:r("Ctrl-Left","Option-Left"),exec:function(u){u.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:r("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:r("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(u){u.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:r("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(u){u.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:r("Left","Left|Ctrl-B"),exec:function(u,i){u.navigateLeft(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:r("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(u){u.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:r("Ctrl-Right","Option-Right"),exec:function(u){u.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:r("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:r("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(u){u.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:r("Shift-Right","Shift-Right"),exec:function(u){u.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:r("Right","Right|Ctrl-F"),exec:function(u,i){u.navigateRight(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(u){u.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:r(null,"Option-PageDown"),exec:function(u){u.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:r("PageDown","PageDown|Ctrl-V"),exec:function(u){u.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(u){u.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:r(null,"Option-PageUp"),exec:function(u){u.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(u){u.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:r("Ctrl-Up",null),exec:function(u){u.renderer.scrollBy(0,-2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:r("Ctrl-Down",null),exec:function(u){u.renderer.scrollBy(0,2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:r("Ctrl-Alt-E","Command-Option-E"),exec:function(u){u.commands.toggleRecording(u)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:r("Ctrl-Shift-E","Command-Shift-E"),exec:function(u){u.commands.replay(u)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:r("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(u){u.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:r("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(u){u.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:r("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(u){u.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:r(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(u){},readOnly:!0},{name:"cut",description:"Cut",exec:function(u){var i=u.$copyWithEmptySelection&&u.selection.isEmpty(),s=i?u.selection.getLineRange():u.selection.getRange();u._emit("cut",s),s.isEmpty()||u.session.remove(s),u.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(u,i){u.$handlePaste(i)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:r("Ctrl-D","Command-D"),exec:function(u){u.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:r("Ctrl-Shift-D","Command-Shift-D"),exec:function(u){u.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:r("Ctrl-Alt-S","Command-Alt-S"),exec:function(u){u.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:r("Ctrl-/","Command-/"),exec:function(u){u.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:r("Ctrl-Shift-/","Command-Shift-/"),exec:function(u){u.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:r("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(u){u.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:r("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(u){u.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:r("Ctrl-H","Command-Option-F"),exec:function(u){h.loadModule("ace/ext/searchbox",function(i){i.Search(u,!0)})}},{name:"undo",description:"Undo",bindKey:r("Ctrl-Z","Command-Z"),exec:function(u){u.undo()}},{name:"redo",description:"Redo",bindKey:r("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(u){u.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:r("Alt-Shift-Up","Command-Option-Up"),exec:function(u){u.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:r("Alt-Up","Option-Up"),exec:function(u){u.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:r("Alt-Shift-Down","Command-Option-Down"),exec:function(u){u.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:r("Alt-Down","Option-Down"),exec:function(u){u.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:r("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(u){u.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:r("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(u){u.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:r("Shift-Delete",null),exec:function(u){if(u.selection.isEmpty())u.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:r("Alt-Backspace","Command-Backspace"),exec:function(u){u.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:r("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(u){u.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:r("Ctrl-Shift-Backspace",null),exec:function(u){var i=u.selection.getRange();i.start.column=0,u.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:r("Ctrl-Shift-Delete",null),exec:function(u){var i=u.selection.getRange();i.end.column=Number.MAX_VALUE,u.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:r("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(u){u.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:r("Ctrl-Delete","Alt-Delete"),exec:function(u){u.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:r("Shift-Tab","Shift-Tab"),exec:function(u){u.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:r("Tab","Tab"),exec:function(u){u.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:r("Ctrl-[","Ctrl-["),exec:function(u){u.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:r("Ctrl-]","Ctrl-]"),exec:function(u){u.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(u,i){u.insert(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(u,i){u.insert(o.stringRepeat(i.text||"",i.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:r(null,"Ctrl-O"),exec:function(u){u.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:r("Alt-Shift-X","Ctrl-T"),exec:function(u){u.transposeLetters()},multiSelectAction:function(u){u.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:r("Ctrl-U","Ctrl-U"),exec:function(u){u.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:r("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(u){u.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:r(null,null),exec:function(u){u.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:r("Ctrl-Shift-L","Command-Shift-L"),exec:function(u){var i=u.selection.getRange();i.start.column=i.end.column=0,i.end.row++,u.selection.setRange(i,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:r("Ctrl+F3","F3"),exec:function(u){u.openLink()}},{name:"joinlines",description:"Join lines",bindKey:r(null,null),exec:function(u){for(var i=u.selection.isBackwards(),s=i?u.selection.getSelectionLead():u.selection.getSelectionAnchor(),f=i?u.selection.getSelectionAnchor():u.selection.getSelectionLead(),p=u.session.doc.getLine(s.row).length,d=u.session.doc.getTextRange(u.selection.getRange()),c=d.replace(/\n\s*/," ").length,_=u.session.doc.getLine(s.row),m=s.row+1;m<=f.row+1;m++){var v=o.stringTrimLeft(o.stringTrimRight(u.session.doc.getLine(m)));v.length!==0&&(v=" "+v),_+=v}f.row+1<u.session.doc.getLength()-1&&(_+=u.session.doc.getNewLineCharacter()),u.clearSelection(),u.session.doc.replace(new a(s.row,0,f.row+2,0),_),c>0?(u.selection.moveCursorTo(s.row,s.column),u.selection.selectTo(s.row,s.column+c)):(p=u.session.doc.getLine(s.row).length>p?p+1:p,u.selection.moveCursorTo(s.row,p))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:r(null,null),exec:function(u){var i=u.session.doc.getLength()-1,s=u.session.doc.getLine(i).length,f=u.selection.rangeList.ranges,p=[];f.length<1&&(f=[u.selection.getRange()]);for(var d=0;d<f.length;d++)d==f.length-1&&(f[d].end.row===i&&f[d].end.column===s||p.push(new a(f[d].end.row,f[d].end.column,i,s))),d===0?f[d].start.row===0&&f[d].start.column===0||p.push(new a(0,0,f[d].start.row,f[d].start.column)):p.push(new a(f[d-1].end.row,f[d-1].end.column,f[d].start.row,f[d].start.column));u.exitMultiSelectMode(),u.clearSelection();for(var d=0;d<p.length;d++)u.selection.addRange(p[d],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(u){u.selection.clearSelection(),u.navigateLineEnd(),u.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(u){u.selection.clearSelection();var i=u.getCursorPosition();u.selection.moveTo(i.row-1,Number.MAX_VALUE),u.insert(`
`),i.row===0&&u.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(u){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),u.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:r("F1","F1"),exec:function(u){u.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:r(null,null),exec:function(u){u.prompt({$type:"modes"})},readOnly:!0}];for(var l=1;l<9;l++)t.commands.push({name:"foldToLevel"+l,description:"Fold To Level "+l,level:l,exec:function(u){u.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var o=e("./lib/dom"),h=function(){function a(r){this.session=r,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return a.prototype.getRowLength=function(r){var l;return this.lineWidgets?l=this.lineWidgets[r]&&this.lineWidgets[r].rowCount||0:l=0,!this.$useWrapMode||!this.$wrapData[r]?1+l:this.$wrapData[r].length+1+l},a.prototype.$getWidgetScreenLength=function(){var r=0;return this.lineWidgets.forEach(function(l){l&&l.rowCount&&!l.hidden&&(r+=l.rowCount)}),r},a.prototype.$onChangeEditor=function(r){this.attach(r.editor)},a.prototype.attach=function(r){r&&r.widgetManager&&r.widgetManager!=this&&r.widgetManager.detach(),this.editor!=r&&(this.detach(),this.editor=r,r&&(r.widgetManager=this,r.renderer.on("beforeRender",this.measureWidgets),r.renderer.on("afterRender",this.renderWidgets)))},a.prototype.detach=function(r){var l=this.editor;if(l){this.editor=null,l.widgetManager=null,l.renderer.off("beforeRender",this.measureWidgets),l.renderer.off("afterRender",this.renderWidgets);var u=this.session.lineWidgets;u&&u.forEach(function(i){i&&i.el&&i.el.parentNode&&(i._inDocument=!1,i.el.parentNode.removeChild(i.el))})}},a.prototype.updateOnFold=function(r,l){var u=l.lineWidgets;if(!(!u||!r.action)){for(var i=r.data,s=i.start.row,f=i.end.row,p=r.action=="add",d=s+1;d<f;d++)u[d]&&(u[d].hidden=p);u[f]&&(p?u[s]?u[f].hidden=p:u[s]=u[f]:(u[s]==u[f]&&(u[s]=void 0),u[f].hidden=p))}},a.prototype.updateOnChange=function(r){var l=this.session.lineWidgets;if(l){var u=r.start.row,i=r.end.row-u;if(i!==0)if(r.action=="remove"){var s=l.splice(u+1,i);!l[u]&&s[s.length-1]&&(l[u]=s.pop()),s.forEach(function(p){p&&this.removeLineWidget(p)},this),this.$updateRows()}else{var f=new Array(i);l[u]&&l[u].column!=null&&r.start.column>l[u].column&&u++,f.unshift(u,0),l.splice.apply(l,f),this.$updateRows()}}},a.prototype.$updateRows=function(){var r=this.session.lineWidgets;if(r){var l=!0;r.forEach(function(u,i){if(u)for(l=!1,u.row=i;u.$oldWidget;)u.$oldWidget.row=i,u=u.$oldWidget}),l&&(this.session.lineWidgets=null)}},a.prototype.$registerLineWidget=function(r){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var l=this.session.lineWidgets[r.row];return l&&(r.$oldWidget=l,l.el&&l.el.parentNode&&(l.el.parentNode.removeChild(l.el),l._inDocument=!1)),this.session.lineWidgets[r.row]=r,r},a.prototype.addLineWidget=function(r){if(this.$registerLineWidget(r),r.session=this.session,!this.editor)return r;var l=this.editor.renderer;r.html&&!r.el&&(r.el=o.createElement("div"),r.el.innerHTML=r.html),r.text&&!r.el&&(r.el=o.createElement("div"),r.el.textContent=r.text),r.el&&(o.addCssClass(r.el,"ace_lineWidgetContainer"),r.className&&o.addCssClass(r.el,r.className),r.el.style.position="absolute",r.el.style.zIndex="5",l.container.appendChild(r.el),r._inDocument=!0,r.coverGutter||(r.el.style.zIndex="3"),r.pixelHeight==null&&(r.pixelHeight=r.el.offsetHeight)),r.rowCount==null&&(r.rowCount=r.pixelHeight/l.layerConfig.lineHeight);var u=this.session.getFoldAt(r.row,0);if(r.$fold=u,u){var i=this.session.lineWidgets;r.row==u.end.row&&!i[u.start.row]?i[u.start.row]=r:r.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:r.row}}}),this.$updateRows(),this.renderWidgets(null,l),this.onWidgetChanged(r),r},a.prototype.removeLineWidget=function(r){if(r._inDocument=!1,r.session=null,r.el&&r.el.parentNode&&r.el.parentNode.removeChild(r.el),r.editor&&r.editor.destroy)try{r.editor.destroy()}catch{}if(this.session.lineWidgets){var l=this.session.lineWidgets[r.row];if(l==r)this.session.lineWidgets[r.row]=r.$oldWidget,r.$oldWidget&&this.onWidgetChanged(r.$oldWidget);else for(;l;){if(l.$oldWidget==r){l.$oldWidget=r.$oldWidget;break}l=l.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:r.row}}}),this.$updateRows()},a.prototype.getWidgetsAtRow=function(r){for(var l=this.session.lineWidgets,u=l&&l[r],i=[];u;)i.push(u),u=u.$oldWidget;return i},a.prototype.onWidgetChanged=function(r){this.session._changedWidgets.push(r),this.editor&&this.editor.renderer.updateFull()},a.prototype.measureWidgets=function(r,l){var u=this.session._changedWidgets,i=l.layerConfig;if(!(!u||!u.length)){for(var s=1/0,f=0;f<u.length;f++){var p=u[f];if(!(!p||!p.el)&&p.session==this.session){if(!p._inDocument){if(this.session.lineWidgets[p.row]!=p)continue;p._inDocument=!0,l.container.appendChild(p.el)}p.h=p.el.offsetHeight,p.fixedWidth||(p.w=p.el.offsetWidth,p.screenWidth=Math.ceil(p.w/i.characterWidth));var d=p.h/i.lineHeight;p.coverLine&&(d-=this.session.getRowLineCount(p.row),d<0&&(d=0)),p.rowCount!=d&&(p.rowCount=d,p.row<s&&(s=p.row))}}s!=1/0&&(this.session._emit("changeFold",{data:{start:{row:s}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},a.prototype.renderWidgets=function(r,l){var u=l.layerConfig,i=this.session.lineWidgets;if(i){for(var s=Math.min(this.firstRow,u.firstRow),f=Math.max(this.lastRow,u.lastRow,i.length);s>0&&!i[s];)s--;this.firstRow=u.firstRow,this.lastRow=u.lastRow,l.$cursorLayer.config=u;for(var p=s;p<=f;p++){var d=i[p];if(!(!d||!d.el)){if(d.hidden){d.el.style.top=-100-(d.pixelHeight||0)+"px";continue}d._inDocument||(d._inDocument=!0,l.container.appendChild(d.el));var c=l.$cursorLayer.getPixelPosition({row:p,column:0},!0).top;d.coverLine||(c+=u.lineHeight*this.session.getRowLineCount(d.row)),d.el.style.top=c-u.offset+"px";var _=d.coverGutter?0:l.gutterWidth;d.fixedWidth||(_-=l.scrollLeft),d.el.style.left=_+"px",d.fullWidth&&d.screenWidth&&(d.el.style.minWidth=u.width+2*u.padding+"px"),d.fixedWidth?d.el.style.right=l.scrollBar.getWidth()+"px":d.el.style.right=""}}}},a}();t.LineWidgets=h});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,n){"use strict";var o=e("../lib/keys"),h=e("../mouse/default_gutter_handler").GutterTooltip,a=function(){function l(u){this.editor=u,this.gutterLayer=u.renderer.$gutterLayer,this.element=u.renderer.$gutter,this.lines=u.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new h(this.editor)}return l.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},l.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},l.prototype.$onGutterKeyDown=function(u){if(this.annotationTooltip.isOpen){u.preventDefault(),u.keyCode===o.escape&&this.annotationTooltip.hideTooltip();return}if(u.target===this.element){if(u.keyCode!=o.enter)return;u.preventDefault();var i=this.editor.getCursorPosition().row;this.editor.isRowVisible(i)||this.editor.scrollToLine(i,!0,!0),setTimeout(function(){var s=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),f=this.$findNearestFoldWidget(s),p=this.$findNearestAnnotation(s);if(!(f===null&&p===null)){if(f===null&&p!==null){this.activeRowIndex=p,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(f!==null&&p===null){this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(p-s)<Math.abs(f-s)){this.activeRowIndex=p,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(u),setTimeout(function(){this.editor._signal("gutterkeydown",new r(u,this))}.bind(this),10)},l.prototype.$handleGutterKeyboardInteraction=function(u){if(u.keyCode===o.tab){u.preventDefault();return}if(u.keyCode===o.escape){u.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(u.keyCode===o.up){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(u.keyCode===o.down){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(u.keyCode===o.left){u.preventDefault(),this.$switchLane("annotation");return}if(u.keyCode===o.right){u.preventDefault(),this.$switchLane("fold");return}if(u.keyCode===o.enter||u.keyCode===o.space){switch(u.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var i=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),u),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==i&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(i),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var s=this.lines.cells[this.activeRowIndex].element.childNodes[2],f=s.getBoundingClientRect(),p=this.annotationTooltip.getElement().style;p.left=f.right+"px",p.top=f.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},l.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},l.prototype.$isFoldWidgetVisible=function(u){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),s=this.$getFoldWidget(u).style.display!=="none";return i&&s},l.prototype.$isAnnotationVisible=function(u){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),s=this.$getAnnotation(u).style.display!=="none";return i&&s},l.prototype.$getFoldWidget=function(u){var i=this.lines.get(u),s=i.element;return s.childNodes[1]},l.prototype.$getAnnotation=function(u){var i=this.lines.get(u),s=i.element;return s.childNodes[2]},l.prototype.$findNearestFoldWidget=function(u){if(this.$isFoldWidgetVisible(u))return u;for(var i=0;u-i>0||u+i<this.lines.getLength()-1;){if(i++,u-i>=0&&this.$isFoldWidgetVisible(u-i))return u-i;if(u+i<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(u+i))return u+i}return null},l.prototype.$findNearestAnnotation=function(u){if(this.$isAnnotationVisible(u))return u;for(var i=0;u-i>0||u+i<this.lines.getLength()-1;){if(i++,u-i>=0&&this.$isAnnotationVisible(u-i))return u-i;if(u+i<=this.lines.getLength()-1&&this.$isAnnotationVisible(u+i))return u+i}return null},l.prototype.$focusFoldWidget=function(u){if(u!=null){var i=this.$getFoldWidget(u);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},l.prototype.$focusAnnotation=function(u){if(u!=null){var i=this.$getAnnotation(u);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},l.prototype.$blurFoldWidget=function(u){var i=this.$getFoldWidget(u);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},l.prototype.$blurAnnotation=function(u){var i=this.$getAnnotation(u);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},l.prototype.$moveFoldWidgetUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},l.prototype.$moveFoldWidgetDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},l.prototype.$moveAnnotationUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},l.prototype.$moveAnnotationDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},l.prototype.$switchLane=function(u){switch(u){case"annotation":if(this.activeLane==="annotation")break;var i=this.$findNearestAnnotation(this.activeRowIndex);if(i==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var s=this.$findNearestFoldWidget(this.activeRowIndex);if(s==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=s,this.$focusFoldWidget(this.activeRowIndex);break}},l.prototype.$rowIndexToRow=function(u){var i=this.lines.get(u);return i?i.row:null},l.prototype.$rowToRowIndex=function(u){for(var i=0;i<this.lines.getLength();i++){var s=this.lines.get(i);if(s.row==u)return i}return null},l}();t.GutterKeyboardHandler=a;var r=function(){function l(u,i){this.gutterKeyboardHandler=i,this.domEvent=u}return l.prototype.getKey=function(){return o.keyCodeToString(this.domEvent.keyCode)},l.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},l.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},l.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},l}();t.GutterKeyboardEvent=r});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var o=this&&this.__values||function(M){var w=typeof Symbol=="function"&&Symbol.iterator,x=w&&M[w],L=0;if(x)return x.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&L>=M.length&&(M=void 0),{value:M&&M[L++],done:!M}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},h=e("./lib/oop"),a=e("./lib/dom"),r=e("./lib/lang"),l=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,i=e("./mouse/mouse_handler").MouseHandler,s=e("./mouse/fold_handler").FoldHandler,f=e("./keyboard/keybinding").KeyBinding,p=e("./edit_session").EditSession,d=e("./search").Search,c=e("./range").Range,_=e("./lib/event_emitter").EventEmitter,m=e("./commands/command_manager").CommandManager,v=e("./commands/default_commands").commands,y=e("./config"),C=e("./token_iterator").TokenIterator,S=e("./line_widgets").LineWidgets,D=e("./keyboard/gutter_handler").GutterKeyboardHandler,g=e("./config").nls,b=e("./clipboard"),F=e("./lib/keys"),E=function(){function M(w,x,L){this.session,this.$toDestroy=[];var R=w.getContainerElement();this.container=R,this.renderer=w,this.id="editor"+ ++M.$uid,this.commands=new m(l.isMac?"mac":"win",v),typeof document=="object"&&(this.textInput=new u(w.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new i(this),new s(this)),this.keyBinding=new f(this),this.$search=new d().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=r.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(A,I){I._$emitInputEvent.schedule(31)}),this.setSession(x||L&&L.session||new p("")),y.resetOptions(this),L&&this.setOptions(L),y._signal("editor",this)}return M.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=r.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},M.prototype.startOperation=function(w){if(this.curOp){if(!w||this.curOp.command)return;this.prevOp=this.curOp}w||(this.previousCommand=null,w={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:w.command||{},args:w.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},M.prototype.endOperation=function(w){if(this.curOp&&this.session){if(w&&w.returnValue===!1||!this.session)return this.curOp=null;if(w==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var x=this.curOp.command,L=x&&x.scrollIntoView;if(L){switch(L){case"center-animate":L="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),A=this.renderer.layerConfig;(R.start.row>=A.lastRow||R.end.row<=A.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}L=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},M.prototype.$historyTracker=function(w){if(this.$mergeUndoDeltas){var x=this.prevOp,L=this.$mergeableCommands,R=x.command&&w.command.name==x.command.name;if(w.command.name=="insertstring"){var A=w.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(A)||/\s/.test(x.args)),this.mergeNextCommand=!0}else R=R&&L.indexOf(w.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:L.indexOf(w.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},M.prototype.setKeyboardHandler=function(w,x){if(w&&typeof w=="string"&&w!="ace"){this.$keybindingId=w;var L=this;y.loadModule(["keybinding",w],function(R){L.$keybindingId==w&&L.keyBinding.setKeyboardHandler(R&&R.handler),x&&x()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(w),x&&x()},M.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},M.prototype.setSession=function(w){if(this.session!=w){this.curOp&&this.endOperation(),this.curOp={};var x=this.session;if(x){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var L=this.session.getSelection();L.off("changeCursor",this.$onCursorChange),L.off("changeSelection",this.$onSelectionChange)}this.session=w,w?(this.$onDocumentChange=this.onDocumentChange.bind(this),w.on("change",this.$onDocumentChange),this.renderer.setSession(w),this.$onChangeMode=this.onChangeMode.bind(this),w.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),w.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),w.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),w.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),w.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),w.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=w.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(w)),this._signal("changeSession",{session:w,oldSession:x}),this.curOp=null,x&&x._signal("changeEditor",{oldEditor:this}),w&&w._signal("changeEditor",{editor:this}),w&&!w.destroyed&&w.bgTokenizer.scheduleStart()}},M.prototype.getSession=function(){return this.session},M.prototype.setValue=function(w,x){return this.session.doc.setValue(w),x?x==1?this.navigateFileEnd():x==-1&&this.navigateFileStart():this.selectAll(),w},M.prototype.getValue=function(){return this.session.getValue()},M.prototype.getSelection=function(){return this.selection},M.prototype.resize=function(w){this.renderer.onResize(w)},M.prototype.setTheme=function(w,x){this.renderer.setTheme(w,x)},M.prototype.getTheme=function(){return this.renderer.getTheme()},M.prototype.setStyle=function(w){this.renderer.setStyle(w)},M.prototype.unsetStyle=function(w){this.renderer.unsetStyle(w)},M.prototype.getFontSize=function(){return this.getOption("fontSize")||a.computedStyle(this.container).fontSize},M.prototype.setFontSize=function(w){this.setOption("fontSize",w)},M.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var w=this;this.$highlightPending=!0,setTimeout(function(){w.$highlightPending=!1;var x=w.session;if(!(!x||x.destroyed)){x.$bracketHighlight&&(x.$bracketHighlight.markerIds.forEach(function(G){x.removeMarker(G)}),x.$bracketHighlight=null);var L=w.getCursorPosition(),R=w.getKeyboardHandler(),A=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(w),I=x.getMatchingBracketRanges(L,A);if(!I){var $=new C(x,L.row,L.column),H=$.getCurrentToken();if(H&&/\b(?:tag-open|tag-name)/.test(H.type)){var P=x.getMatchingTags(L);P&&(I=[P.openTagName,P.closeTagName])}}if(!I&&x.$mode.getMatching&&(I=x.$mode.getMatching(w.session)),!I){w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide();return}var q="ace_bracket";Array.isArray(I)?I.length==1&&(q="ace_error_bracket"):I=[I],I.length==2&&(c.comparePoints(I[0].end,I[1].start)==0?I=[c.fromPoints(I[0].start,I[1].end)]:c.comparePoints(I[0].start,I[1].end)==0&&(I=[c.fromPoints(I[1].start,I[0].end)])),x.$bracketHighlight={ranges:I,markerIds:I.map(function(G){return x.addMarker(G,q,"text")})},w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide()}},50)}},M.prototype.focus=function(){this.textInput.focus()},M.prototype.isFocused=function(){return this.textInput.isFocused()},M.prototype.blur=function(){this.textInput.blur()},M.prototype.onFocus=function(w){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",w))},M.prototype.onBlur=function(w){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",w))},M.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},M.prototype.onDocumentChange=function(w){var x=this.session.$useWrapMode,L=w.start.row==w.end.row?w.end.row:1/0;this.renderer.updateLines(w.start.row,L,x),this._signal("change",w),this.$cursorChange()},M.prototype.onTokenizerUpdate=function(w){var x=w.data;this.renderer.updateLines(x.first,x.last)},M.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},M.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},M.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},M.prototype.$updateHighlightActiveLine=function(){var w=this.getSession(),x;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(x=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(x=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(x=!1)),w.$highlightLineMarker&&!x)w.removeMarker(w.$highlightLineMarker.id),w.$highlightLineMarker=null;else if(!w.$highlightLineMarker&&x){var L=new c(x.row,x.column,x.row,1/0);L.id=w.addMarker(L,"ace_active-line","screenLine"),w.$highlightLineMarker=L}else x&&(w.$highlightLineMarker.start.row=x.row,w.$highlightLineMarker.end.row=x.row,w.$highlightLineMarker.start.column=x.column,w._signal("changeBackMarker"))},M.prototype.onSelectionChange=function(w){var x=this.session;if(x.$selectionMarker&&x.removeMarker(x.$selectionMarker),x.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var L=this.selection.getRange(),R=this.getSelectionStyle();x.$selectionMarker=x.addMarker(L,"ace_selection",R)}var A=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(A),this._signal("changeSelection")},M.prototype.$getSelectionHighLightRegexp=function(){var w=this.session,x=this.getSelectionRange();if(!(x.isEmpty()||x.isMultiLine())){var L=x.start.column,R=x.end.column,A=w.getLine(x.start.row),I=A.substring(L,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var $=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),H=A.substring(L-1,R+1);if($.test(H))return $}}},M.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},M.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},M.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},M.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},M.prototype.onChangeMode=function(w){this.renderer.updateText(),this._emit("changeMode",w)},M.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},M.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},M.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},M.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},M.prototype.getCopyText=function(){var w=this.getSelectedText(),x=this.session.doc.getNewLineCharacter(),L=!1;if(!w&&this.$copyWithEmptySelection){L=!0;for(var R=this.selection.getAllRanges(),A=0;A<R.length;A++){var I=R[A];A&&R[A-1].start.row==I.start.row||(w+=this.session.getLine(I.start.row)+x)}}var $={text:w};return this._signal("copy",$),b.lineMode=L?$.text:!1,$.text},M.prototype.onCopy=function(){this.commands.exec("copy",this)},M.prototype.onCut=function(){this.commands.exec("cut",this)},M.prototype.onPaste=function(w,x){var L={text:w,event:x};this.commands.exec("paste",this,L)},M.prototype.$handlePaste=function(w){typeof w=="string"&&(w={text:w}),this._signal("paste",w);var x=w.text,L=x===b.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)L?R.insert({row:this.selection.lead.row,column:0},x):this.insert(x);else if(L)this.selection.rangeList.ranges.forEach(function(q){R.insert({row:q.start.row,column:0},x)});else{var A=x.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,$=A.length==2&&(!A[0]||!A[1]);if(A.length!=I.length||$)return this.commands.exec("insertstring",this,x);for(var H=I.length;H--;){var P=I[H];P.isEmpty()||R.remove(P),R.insert(P.start,A[H])}}},M.prototype.execCommand=function(w,x){return this.commands.exec(w,this,x)},M.prototype.insert=function(w,x){var L=this.session,R=L.getMode(),A=this.getCursorPosition();if(this.getBehavioursEnabled()&&!x){var I=R.transformAction(L.getState(A.row),"insertion",this,L,w);I&&(w!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),w=I.text)}if(w=="	"&&(w=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&w.indexOf(`
`)==-1){var $=c.fromPoints(A,A);$.end.column+=w.length,this.session.remove($)}}else{var $=this.getSelectionRange();A=this.session.remove($),this.clearSelection()}if(w==`
`||w==`\r
`){var G=L.getLine(A.row);if(A.column>G.search(/\S|$/)){var H=G.substr(A.column).search(/\S|$/);L.doc.removeInLine(A.row,A.column,A.column+H)}}this.clearSelection();var P=A.column,q=L.getState(A.row),G=L.getLine(A.row),N=R.checkOutdent(q,G,w);if(L.insert(A,w),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new c(A.row,P+I.selection[0],A.row,P+I.selection[1])):this.selection.setSelectionRange(new c(A.row+I.selection[0],I.selection[1],A.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(L.getDocument().isNewLine(w)){var Q=R.getNextLineIndent(q,G.slice(0,A.column),L.getTabString());L.insert({row:A.row+1,column:0},Q)}N&&R.autoOutdent(q,L,A.row)}},M.prototype.autoIndent=function(){var w=this.session,x=w.getMode(),L,R;if(this.selection.isEmpty())L=0,R=w.doc.getLength()-1;else{var A=this.getSelectionRange();L=A.start.row,R=A.end.row}for(var I="",$="",H="",P,q,G,N=w.getTabString(),Q=L;Q<=R;Q++)Q>0&&(I=w.getState(Q-1),$=w.getLine(Q-1),H=x.getNextLineIndent(I,$,N)),P=w.getLine(Q),q=x.$getIndent(P),H!==q&&(q.length>0&&(G=new c(Q,0,Q,q.length),w.remove(G)),H.length>0&&w.insert({row:Q,column:0},H)),x.autoOutdent(I,w,Q)},M.prototype.onTextInput=function(w,x){if(!x)return this.keyBinding.onTextInput(w);this.startOperation({command:{name:"insertstring"}});var L=this.applyComposition.bind(this,w,x);this.selection.rangeCount?this.forEachSelection(L):L(),this.endOperation()},M.prototype.applyComposition=function(w,x){if(x.extendLeft||x.extendRight){var L=this.selection.getRange();L.start.column-=x.extendLeft,L.end.column+=x.extendRight,L.start.column<0&&(L.start.row--,L.start.column+=this.session.getLine(L.start.row).length+1),this.selection.setRange(L),!w&&!L.isEmpty()&&this.remove()}if((w||!this.selection.isEmpty())&&this.insert(w,!0),x.restoreStart||x.restoreEnd){var L=this.selection.getRange();L.start.column-=x.restoreStart,L.end.column-=x.restoreEnd,this.selection.setRange(L)}},M.prototype.onCommandKey=function(w,x,L){return this.keyBinding.onCommandKey(w,x,L)},M.prototype.setOverwrite=function(w){this.session.setOverwrite(w)},M.prototype.getOverwrite=function(){return this.session.getOverwrite()},M.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},M.prototype.setScrollSpeed=function(w){this.setOption("scrollSpeed",w)},M.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},M.prototype.setDragDelay=function(w){this.setOption("dragDelay",w)},M.prototype.getDragDelay=function(){return this.getOption("dragDelay")},M.prototype.setSelectionStyle=function(w){this.setOption("selectionStyle",w)},M.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},M.prototype.setHighlightActiveLine=function(w){this.setOption("highlightActiveLine",w)},M.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},M.prototype.setHighlightGutterLine=function(w){this.setOption("highlightGutterLine",w)},M.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},M.prototype.setHighlightSelectedWord=function(w){this.setOption("highlightSelectedWord",w)},M.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},M.prototype.setAnimatedScroll=function(w){this.renderer.setAnimatedScroll(w)},M.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},M.prototype.setShowInvisibles=function(w){this.renderer.setShowInvisibles(w)},M.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},M.prototype.setDisplayIndentGuides=function(w){this.renderer.setDisplayIndentGuides(w)},M.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},M.prototype.setHighlightIndentGuides=function(w){this.renderer.setHighlightIndentGuides(w)},M.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},M.prototype.setShowPrintMargin=function(w){this.renderer.setShowPrintMargin(w)},M.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},M.prototype.setPrintMarginColumn=function(w){this.renderer.setPrintMarginColumn(w)},M.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},M.prototype.setReadOnly=function(w){this.setOption("readOnly",w)},M.prototype.getReadOnly=function(){return this.getOption("readOnly")},M.prototype.setBehavioursEnabled=function(w){this.setOption("behavioursEnabled",w)},M.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},M.prototype.setWrapBehavioursEnabled=function(w){this.setOption("wrapBehavioursEnabled",w)},M.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},M.prototype.setShowFoldWidgets=function(w){this.setOption("showFoldWidgets",w)},M.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},M.prototype.setFadeFoldWidgets=function(w){this.setOption("fadeFoldWidgets",w)},M.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},M.prototype.remove=function(w){this.selection.isEmpty()&&(w=="left"?this.selection.selectLeft():this.selection.selectRight());var x=this.getSelectionRange();if(this.getBehavioursEnabled()){var L=this.session,R=L.getState(x.start.row),A=L.getMode().transformAction(R,"deletion",this,L,x);if(x.end.column===0){var I=L.getTextRange(x);if(I[I.length-1]==`
`){var $=L.getLine(x.end.row);/^\s+$/.test($)&&(x.end.column=$.length)}}A&&(x=A)}this.session.remove(x),this.clearSelection()},M.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var w=this.getSelectionRange();w.start.column==w.end.column&&w.start.row==w.end.row&&(w.end.column=0,w.end.row++),this.session.remove(w),this.clearSelection()},M.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var w=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(w)},M.prototype.setGhostText=function(w,x){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(w,x)},M.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},M.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var w=this.getCursorPosition(),x=w.column;if(x!==0){var L=this.session.getLine(w.row),R,A;x<L.length?(R=L.charAt(x)+L.charAt(x-1),A=new c(w.row,x-1,w.row,x+1)):(R=L.charAt(x-1)+L.charAt(x-2),A=new c(w.row,x-2,w.row,x)),this.session.replace(A,R),this.session.selection.moveToPosition(A.end)}}},M.prototype.toLowerCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var x=this.getSelectionRange(),L=this.session.getTextRange(x);this.session.replace(x,L.toLowerCase()),this.selection.setSelectionRange(w)},M.prototype.toUpperCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var x=this.getSelectionRange(),L=this.session.getTextRange(x);this.session.replace(x,L.toUpperCase()),this.selection.setSelectionRange(w)},M.prototype.indent=function(){var w=this.session,x=this.getSelectionRange();if(x.start.row<x.end.row){var L=this.$getSelectedRows();w.indentRows(L.first,L.last,"	");return}else if(x.start.column<x.end.column){var R=w.getTextRange(x);if(!/^\s+$/.test(R)){var L=this.$getSelectedRows();w.indentRows(L.first,L.last,"	");return}}var A=w.getLine(x.start.row),I=x.start,$=w.getTabSize(),H=w.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var P=$-H%$,q=r.stringRepeat(" ",P);else{for(var P=H%$;A[x.start.column-1]==" "&&P;)x.start.column--,P--;this.selection.setSelectionRange(x),q="	"}return this.insert(q)},M.prototype.blockIndent=function(){var w=this.$getSelectedRows();this.session.indentRows(w.first,w.last,"	")},M.prototype.blockOutdent=function(){var w=this.session.getSelection();this.session.outdentRows(w.getRange())},M.prototype.sortLines=function(){for(var w=this.$getSelectedRows(),x=this.session,L=[],R=w.first;R<=w.last;R++)L.push(x.getLine(R));L.sort(function($,H){return $.toLowerCase()<H.toLowerCase()?-1:$.toLowerCase()>H.toLowerCase()?1:0});for(var A=new c(0,0,0,0),R=w.first;R<=w.last;R++){var I=x.getLine(R);A.start.row=R,A.end.row=R,A.end.column=I.length,x.replace(A,L[R-w.first])}},M.prototype.toggleCommentLines=function(){var w=this.session.getState(this.getCursorPosition().row),x=this.$getSelectedRows();this.session.getMode().toggleCommentLines(w,this.session,x.first,x.last)},M.prototype.toggleBlockComment=function(){var w=this.getCursorPosition(),x=this.session.getState(w.row),L=this.getSelectionRange();this.session.getMode().toggleBlockComment(x,this.session,L,w)},M.prototype.getNumberAt=function(w,x){var L=/[\-]?[0-9]+(?:\.[0-9]+)?/g;L.lastIndex=0;for(var R=this.session.getLine(w);L.lastIndex<x;){var A=L.exec(R);if(A.index<=x&&A.index+A[0].length>=x){var I={value:A[0],start:A.index,end:A.index+A[0].length};return I}}return null},M.prototype.modifyNumber=function(w){var x=this.selection.getCursor().row,L=this.selection.getCursor().column,R=new c(x,L-1,x,L),A=this.session.getTextRange(R);if(!isNaN(parseFloat(A))&&isFinite(A)){var I=this.getNumberAt(x,L);if(I){var $=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,H=I.start+I.value.length-$,P=parseFloat(I.value);P*=Math.pow(10,H),$!==I.end&&L<$?w*=Math.pow(10,I.end-L-1):w*=Math.pow(10,I.end-L),P+=w,P/=Math.pow(10,H);var q=P.toFixed(H),G=new c(x,I.start,x,I.end);this.session.replace(G,q),this.moveCursorTo(x,Math.max(I.start+1,L+q.length-I.value.length))}}else this.toggleWord()},M.prototype.toggleWord=function(){var w=this.selection.getCursor().row,x=this.selection.getCursor().column;this.selection.selectWord();var L=this.getSelectedText(),R=this.selection.getWordRange().start.column,A=L.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=x-R-1;I<0&&(I=0);var $=0,H=0,P=this;L.match(/[A-Za-z0-9_]+/)&&A.forEach(function(te,J){H=$+te.length,I>=$&&I<=H&&(L=te,P.selection.clearSelection(),P.moveCursorTo(w,$+R),P.selection.selectTo(w,H+R)),$=H});for(var q=this.$toggleWordPairs,G,N=0;N<q.length;N++)for(var Q=q[N],O=0;O<=1;O++){var B=+!O,U=L.match(new RegExp("^\\s?_?("+r.escapeRegExp(Q[O])+")\\s?$","i"));if(U){var k=L.match(new RegExp("([_]|^|\\s)("+r.escapeRegExp(U[1])+")($|\\s)","g"));k&&(G=L.replace(new RegExp(r.escapeRegExp(Q[O]),"i"),function(te){var J=Q[B];return te.toUpperCase()==te?J=J.toUpperCase():te.charAt(0).toUpperCase()==te.charAt(0)&&(J=J.substr(0,0)+Q[B].charAt(0).toUpperCase()+J.substr(1)),J}),this.insert(G),G="")}}},M.prototype.findLinkAt=function(w,x){var L,R,A=this.session.getLine(w),I=A.split(/((?:https?|ftp):\/\/[\S]+)/),$=x;$<0&&($=0);var H=0,P=0,q;try{for(var G=o(I),N=G.next();!N.done;N=G.next()){var Q=N.value;if(P=H+Q.length,$>=H&&$<=P&&Q.match(/((?:https?|ftp):\/\/[\S]+)/)){q=Q.replace(/[\s:.,'";}\]]+$/,"");break}H=P}}catch(O){L={error:O}}finally{try{N&&!N.done&&(R=G.return)&&R.call(G)}finally{if(L)throw L.error}}return q},M.prototype.openLink=function(){var w=this.selection.getCursor(),x=this.findLinkAt(w.row,w.column);return x&&window.open(x,"_blank"),x!=null},M.prototype.removeLines=function(){var w=this.$getSelectedRows();this.session.removeFullLines(w.first,w.last),this.clearSelection()},M.prototype.duplicateSelection=function(){var w=this.selection,x=this.session,L=w.getRange(),R=w.isBackwards();if(L.isEmpty()){var A=L.start.row;x.duplicateLines(A,A)}else{var I=R?L.start:L.end,$=x.insert(I,x.getTextRange(L));L.start=I,L.end=$,w.setSelectionRange(L,R)}},M.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},M.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},M.prototype.moveText=function(w,x,L){return this.session.moveText(w,x,L)},M.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},M.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},M.prototype.$moveLines=function(w,x){var L,R,A=this.selection;if(!A.inMultiSelectMode||this.inVirtualSelectionMode){var I=A.toOrientedRange();L=this.$getSelectedRows(I),R=this.session.$moveLines(L.first,L.last,x?0:w),x&&w==-1&&(R=0),I.moveBy(R,0),A.fromOrientedRange(I)}else{var $=A.rangeList.ranges;A.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var H=0,P=0,q=$.length,G=0;G<q;G++){var N=G;$[G].moveBy(H,0),L=this.$getSelectedRows($[G]);for(var Q=L.first,O=L.last;++G<q;){P&&$[G].moveBy(P,0);var B=this.$getSelectedRows($[G]);if(x&&B.first!=O)break;if(!x&&B.first>O+1)break;O=B.last}for(G--,H=this.session.$moveLines(Q,O,x?0:w),x&&w==-1&&(N=G+1);N<=G;)$[N].moveBy(H,0),N++;x||(H=0),P+=H}A.fromOrientedRange(A.ranges[0]),A.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},M.prototype.$getSelectedRows=function(w){return w=(w||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(w.start.row),last:this.session.getRowFoldEnd(w.end.row)}},M.prototype.onCompositionStart=function(w){this.renderer.showComposition(w)},M.prototype.onCompositionUpdate=function(w){this.renderer.setCompositionText(w)},M.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},M.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},M.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},M.prototype.isRowVisible=function(w){return w>=this.getFirstVisibleRow()&&w<=this.getLastVisibleRow()},M.prototype.isRowFullyVisible=function(w){return w>=this.renderer.getFirstFullyVisibleRow()&&w<=this.renderer.getLastFullyVisibleRow()},M.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},M.prototype.$moveByPage=function(w,x){var L=this.renderer,R=this.renderer.layerConfig,A=w*Math.floor(R.height/R.lineHeight);x===!0?this.selection.$moveSelection(function(){this.moveCursorBy(A,0)}):x===!1&&(this.selection.moveCursorBy(A,0),this.selection.clearSelection());var I=L.scrollTop;L.scrollBy(0,A*R.lineHeight),x!=null&&L.scrollCursorIntoView(null,.5),L.animateScrolling(I)},M.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},M.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},M.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},M.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},M.prototype.scrollPageDown=function(){this.$moveByPage(1)},M.prototype.scrollPageUp=function(){this.$moveByPage(-1)},M.prototype.scrollToRow=function(w){this.renderer.scrollToRow(w)},M.prototype.scrollToLine=function(w,x,L,R){this.renderer.scrollToLine(w,x,L,R)},M.prototype.centerSelection=function(){var w=this.getSelectionRange(),x={row:Math.floor(w.start.row+(w.end.row-w.start.row)/2),column:Math.floor(w.start.column+(w.end.column-w.start.column)/2)};this.renderer.alignCursor(x,.5)},M.prototype.getCursorPosition=function(){return this.selection.getCursor()},M.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},M.prototype.getSelectionRange=function(){return this.selection.getRange()},M.prototype.selectAll=function(){this.selection.selectAll()},M.prototype.clearSelection=function(){this.selection.clearSelection()},M.prototype.moveCursorTo=function(w,x){this.selection.moveCursorTo(w,x)},M.prototype.moveCursorToPosition=function(w){this.selection.moveCursorToPosition(w)},M.prototype.jumpToMatching=function(w,x){var L=this.getCursorPosition(),R=new C(this.session,L.row,L.column),A=R.getCurrentToken(),I=0;A&&A.type.indexOf("tag-name")!==-1&&(A=R.stepBackward());var $=A||R.stepForward();if($){var H,P=!1,q={},G=L.column-$.start,N,Q={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if($.value.match(/[{}()\[\]]/g)){for(;G<$.value.length&&!P;G++)if(Q[$.value[G]])switch(N=Q[$.value[G]]+"."+$.type.replace("rparen","lparen"),isNaN(q[N])&&(q[N]=0),$.value[G]){case"(":case"[":case"{":q[N]++;break;case")":case"]":case"}":q[N]--,q[N]===-1&&(H="bracket",P=!0);break}}else $.type.indexOf("tag-name")!==-1&&(isNaN(q[$.value])&&(q[$.value]=0),A.value==="<"&&I>1?q[$.value]++:A.value==="</"&&q[$.value]--,q[$.value]===-1&&(H="tag",P=!0));P||(A=$,I++,$=R.stepForward(),G=0)}while($&&!P);if(H){var O,B;if(H==="bracket")O=this.session.getBracketRange(L),O||(O=new c(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+G-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+G-1),B=O.start,(x||B.row===L.row&&Math.abs(B.column-L.column)<2)&&(O=this.session.getBracketRange(B)));else if(H==="tag"){if(!$||$.type.indexOf("tag-name")===-1)return;if(O=new c(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),O.compare(L.row,L.column)===0){var U=this.session.getMatchingTags(L);U&&(U.openTag.contains(L.row,L.column)?(O=U.closeTag,B=O.start):(O=U.openTag,U.closeTag.start.row===L.row&&U.closeTag.start.column===L.column?B=O.end:B=O.start))}B=B||O.start}B=O&&O.cursor||B,B&&(w?O&&x?this.selection.setRange(O):O&&O.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(B.row,B.column):this.selection.moveTo(B.row,B.column))}}},M.prototype.gotoLine=function(w,x,L){this.selection.clearSelection(),this.session.unfold({row:w-1,column:x||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(w-1,x||0),this.isRowFullyVisible(w-1)||this.scrollToLine(w-1,!0,L)},M.prototype.navigateTo=function(w,x){this.selection.moveTo(w,x)},M.prototype.navigateUp=function(w){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var x=this.selection.anchor.getPosition();return this.moveCursorToPosition(x)}this.selection.clearSelection(),this.selection.moveCursorBy(-w||-1,0)},M.prototype.navigateDown=function(w){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var x=this.selection.anchor.getPosition();return this.moveCursorToPosition(x)}this.selection.clearSelection(),this.selection.moveCursorBy(w||1,0)},M.prototype.navigateLeft=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorLeft();else{var x=this.getSelectionRange().start;this.moveCursorToPosition(x)}this.clearSelection()},M.prototype.navigateRight=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorRight();else{var x=this.getSelectionRange().end;this.moveCursorToPosition(x)}this.clearSelection()},M.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},M.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},M.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},M.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},M.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},M.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},M.prototype.replace=function(w,x){x&&this.$search.set(x);var L=this.$search.find(this.session),R=0;return L&&(this.$tryReplace(L,w)&&(R=1),this.selection.setSelectionRange(L),this.renderer.scrollSelectionIntoView(L.start,L.end)),R},M.prototype.replaceAll=function(w,x){x&&this.$search.set(x);var L=this.$search.findAll(this.session),R=0;if(!L.length)return R;var A=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=L.length-1;I>=0;--I)this.$tryReplace(L[I],w)&&R++;return this.selection.setSelectionRange(A),R},M.prototype.$tryReplace=function(w,x){var L=this.session.getTextRange(w);return x=this.$search.replace(L,x),x!==null?(w.end=this.session.replace(w,x),w):null},M.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},M.prototype.find=function(w,x,L){x||(x={}),typeof w=="string"||w instanceof RegExp?x.needle=w:typeof w=="object"&&h.mixin(x,w);var R=this.selection.getRange();x.needle==null&&(w=this.session.getTextRange(R)||this.$search.$options.needle,w||(R=this.session.getWordRange(R.start.row,R.start.column),w=this.session.getTextRange(R)),this.$search.set({needle:w})),this.$search.set(x),x.start||this.$search.set({start:R});var A=this.$search.find(this.session);if(x.preventScroll)return A;if(A)return this.revealRange(A,L),A;x.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},M.prototype.findNext=function(w,x){this.find({skipCurrent:!0,backwards:!1},w,x)},M.prototype.findPrevious=function(w,x){this.find(w,{skipCurrent:!0,backwards:!0},x)},M.prototype.revealRange=function(w,x){this.session.unfold(w),this.selection.setSelectionRange(w);var L=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(w.start,w.end,.5),x!==!1&&this.renderer.animateScrolling(L)},M.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(w){w.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},M.prototype.setAutoScrollEditorIntoView=function(w){if(w){var x,L=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var A=this.$scrollAnchor;A.style.cssText="position:absolute",this.container.insertBefore(A,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),$=this.renderer.on("beforeRender",function(){R&&(x=L.renderer.container.getBoundingClientRect())}),H=this.renderer.on("afterRender",function(){if(R&&x&&(L.isFocused()||L.searchBox&&L.searchBox.isFocused())){var P=L.renderer,q=P.$cursorLayer.$pixelPos,G=P.layerConfig,N=q.top-G.offset;q.top>=0&&N+x.top<0?R=!0:q.top<G.height&&q.top+x.top+G.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(A.style.top=N+"px",A.style.left=q.left+"px",A.style.height=G.lineHeight+"px",A.scrollIntoView(R)),R=x=null}});this.setAutoScrollEditorIntoView=function(P){P||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",H),this.renderer.off("beforeRender",$))}}},M.prototype.$resetCursorStyle=function(){var w=this.$cursorStyle||"ace",x=this.renderer.$cursorLayer;x&&(x.setSmoothBlinking(/smooth/.test(w)),x.isBlinking=!this.$readOnly&&w!="wide",a.setCssClass(x.element,"ace_slim-cursors",/slim/.test(w)))},M.prototype.prompt=function(w,x,L){var R=this;y.loadModule("ace/ext/prompt",function(A){A.prompt(R,w,x,L)})},M}();E.$uid=0,E.prototype.curOp=null,E.prototype.prevOp={},E.prototype.$mergeableCommands=["backspace","del","insertstring"],E.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],h.implement(E.prototype,_),y.defineOptions(E.prototype,"editor",{selectionStyle:{set:function(M){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:M})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(M){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(M){this.textInput.setReadOnly(M),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(M){this.textInput.setCopyWithEmptySelection(M)},initialValue:!1},cursorStyle:{set:function(M){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(M){this.setAutoScrollEditorIntoView(M)}},keyboardHandler:{set:function(M){this.setKeyboardHandler(M)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(M){this.session.setValue(M)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(M){this.setSession(M)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(M){this.renderer.$gutterLayer.setShowLineNumbers(M),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),M&&this.$relativeLineNumbers?T.attach(this):T.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(M){this.$showLineNumbers&&M?T.attach(this):T.detach(this)}},placeholder:{set:function(M){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var w=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(w&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),a.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!w&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),a.addCssClass(this.container,"ace_hasPlaceholder");var x=a.createElement("div");x.className="ace_placeholder",x.textContent=this.$placeholder||"",this.renderer.placeholderNode=x,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!w&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(M){var w={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},x=function(R){if(R.target==this.renderer.scroller&&R.keyCode===F.enter){R.preventDefault();var A=this.getCursorPosition().row;this.isRowVisible(A)||this.scrollToLine(A,!0,!0),this.focus()}},L;M?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(l.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",g("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",g("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",x.bind(this)),this.commands.addCommand(w),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",g("editor")),this.renderer.$gutter.setAttribute("aria-label",g("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),L||(L=new D(this)),L.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",x.bind(this)),this.commands.removeCommand(w),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),L&&L.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var T={getText:function(M,w){return(Math.abs(M.selection.lead.row-w)||w+1+(w<9?"\xB7":""))+""},getWidth:function(M,w,x){return Math.max(w.toString().length,(x.lastRow+1).toString().length,2)*x.characterWidth},update:function(M,w){w.renderer.$loop.schedule(w.renderer.CHANGE_GUTTER)},attach:function(M){M.renderer.$gutterLayer.$renderer=this,M.on("changeSelection",this.update),this.update(null,M)},detach:function(M){M.renderer.$gutterLayer.$renderer==this&&(M.renderer.$gutterLayer.$renderer=null),M.off("changeSelection",this.update),this.update(null,M)}};t.Editor=E});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var o=e("../lib/dom"),h=function(){function a(r,l){this.element=r,this.canvasHeight=l||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return a.prototype.moveContainer=function(r){o.translate(this.element,0,-(r.firstRowScreen*r.lineHeight%this.canvasHeight)-r.offset*this.$offsetCoefficient)},a.prototype.pageChanged=function(r,l){return Math.floor(r.firstRowScreen*r.lineHeight/this.canvasHeight)!==Math.floor(l.firstRowScreen*l.lineHeight/this.canvasHeight)},a.prototype.computeLineTop=function(r,l,u){var i=l.firstRowScreen*l.lineHeight,s=Math.floor(i/this.canvasHeight),f=u.documentToScreenRow(r,0)*l.lineHeight;return f-s*this.canvasHeight},a.prototype.computeLineHeight=function(r,l,u){return l.lineHeight*u.getRowLineCount(r)},a.prototype.getLength=function(){return this.cells.length},a.prototype.get=function(r){return this.cells[r]},a.prototype.shift=function(){this.$cacheCell(this.cells.shift())},a.prototype.pop=function(){this.$cacheCell(this.cells.pop())},a.prototype.push=function(r){if(Array.isArray(r)){this.cells.push.apply(this.cells,r);for(var l=o.createFragment(this.element),u=0;u<r.length;u++)l.appendChild(r[u].element);this.element.appendChild(l)}else this.cells.push(r),this.element.appendChild(r.element)},a.prototype.unshift=function(r){if(Array.isArray(r)){this.cells.unshift.apply(this.cells,r);for(var l=o.createFragment(this.element),u=0;u<r.length;u++)l.appendChild(r[u].element);this.element.firstChild?this.element.insertBefore(l,this.element.firstChild):this.element.appendChild(l)}else this.cells.unshift(r),this.element.insertAdjacentElement("afterbegin",r.element)},a.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},a.prototype.$cacheCell=function(r){r&&(r.element.remove(),this.cellCache.push(r))},a.prototype.createCell=function(r,l,u,i){var s=this.cellCache.pop();if(!s){var f=o.createElement("div");i&&i(f),this.element.appendChild(f),s={element:f,text:"",row:r}}return s.row=r,s},a}();t.Lines=h});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,n){"use strict";var o=e("../lib/dom"),h=e("../lib/oop"),a=e("../lib/lang"),r=e("../lib/event_emitter").EventEmitter,l=e("./lines").Lines,u=e("../config").nls,i=function(){function f(p){this.element=o.createElement("div"),this.element.className="ace_layer ace_gutter-layer",p.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new l(this.element),this.$lines.$offsetCoefficient=1}return f.prototype.setSession=function(p){this.session&&this.session.off("change",this.$updateAnnotations),this.session=p,p&&p.on("change",this.$updateAnnotations)},f.prototype.addGutterDecoration=function(p,d){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(p,d)},f.prototype.removeGutterDecoration=function(p,d){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(p,d)},f.prototype.setAnnotations=function(p){this.$annotations=[];for(var d=0;d<p.length;d++){var c=p[d],_=c.row,m=this.$annotations[_];m||(m=this.$annotations[_]={text:[],type:[]});var v=c.text,y=c.type;v=v?a.escapeHTML(v):c.html||"",m.text.indexOf(v)===-1&&(m.text.push(v),m.type.push(y));var C=c.className;C?m.className=C:y=="error"?m.className=" ace_error":y=="warning"&&m.className!=" ace_error"?m.className=" ace_warning":y=="info"&&!m.className&&(m.className=" ace_info")}},f.prototype.$updateAnnotations=function(p){if(this.$annotations.length){var d=p.start.row,c=p.end.row-d;if(c!==0)if(p.action=="remove")this.$annotations.splice(d,c+1,null);else{var _=new Array(c+1);_.unshift(d,1),this.$annotations.splice.apply(this.$annotations,_)}}},f.prototype.update=function(p){this.config=p;var d=this.session,c=p.firstRow,_=Math.min(p.lastRow+p.gutterOffset,d.getLength()-1);this.oldLastRow=_,this.config=p,this.$lines.moveContainer(p),this.$updateCursorRow();for(var m=d.getNextFoldLine(c),v=m?m.start.row:1/0,y=null,C=-1,S=c;;){if(S>v&&(S=m.end.row+1,m=d.getNextFoldLine(S,m),v=m?m.start.row:1/0),S>_){for(;this.$lines.getLength()>C+1;)this.$lines.pop();break}y=this.$lines.get(++C),y?y.row=S:(y=this.$lines.createCell(S,p,this.session,s),this.$lines.push(y)),this.$renderCell(y,p,m,S),S++}this._signal("afterRender"),this.$updateGutterWidth(p)},f.prototype.$updateGutterWidth=function(p){var d=this.session,c=d.gutterRenderer||this.$renderer,_=d.$firstLineNumber,m=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||d.$useWrapMode)&&(m=d.getLength()+_-1);var v=c?c.getWidth(d,m,p):m.toString().length*p.characterWidth,y=this.$padding||this.$computePadding();v+=y.left+y.right,v!==this.gutterWidth&&!isNaN(v)&&(this.gutterWidth=v,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",v))},f.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var p=this.session.selection.getCursor();this.$cursorRow!==p.row&&(this.$cursorRow=p.row)}},f.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var p=this.session.selection.cursor.row;if(this.$cursorRow=p,!(this.$cursorCell&&this.$cursorCell.row==p)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var d=this.$lines.cells;this.$cursorCell=null;for(var c=0;c<d.length;c++){var _=d[c];if(_.row>=this.$cursorRow){if(_.row>this.$cursorRow){var m=this.session.getFoldLine(this.$cursorRow);if(c>0&&m&&m.start.row==d[c-1].row)_=d[c-1];else break}_.element.className="ace_gutter-active-line "+_.element.className,this.$cursorCell=_;break}}}}},f.prototype.scrollLines=function(p){var d=this.config;if(this.config=p,this.$updateCursorRow(),this.$lines.pageChanged(d,p))return this.update(p);this.$lines.moveContainer(p);var c=Math.min(p.lastRow+p.gutterOffset,this.session.getLength()-1),_=this.oldLastRow;if(this.oldLastRow=c,!d||_<p.firstRow)return this.update(p);if(c<d.firstRow)return this.update(p);if(d.firstRow<p.firstRow)for(var m=this.session.getFoldedRowCount(d.firstRow,p.firstRow-1);m>0;m--)this.$lines.shift();if(_>c)for(var m=this.session.getFoldedRowCount(c+1,_);m>0;m--)this.$lines.pop();p.firstRow<d.firstRow&&this.$lines.unshift(this.$renderLines(p,p.firstRow,d.firstRow-1)),c>_&&this.$lines.push(this.$renderLines(p,_+1,c)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(p)},f.prototype.$renderLines=function(p,d,c){for(var _=[],m=d,v=this.session.getNextFoldLine(m),y=v?v.start.row:1/0;m>y&&(m=v.end.row+1,v=this.session.getNextFoldLine(m,v),y=v?v.start.row:1/0),!(m>c);){var C=this.$lines.createCell(m,p,this.session,s);this.$renderCell(C,p,v,m),_.push(C),m++}return _},f.prototype.$renderCell=function(p,d,c,_){var m=p.element,v=this.session,y=m.childNodes[0],C=m.childNodes[1],S=m.childNodes[2],D=S.firstChild,g=v.$firstLineNumber,b=v.$breakpoints,F=v.$decorations,E=v.gutterRenderer||this.$renderer,T=this.$showFoldWidgets&&v.foldWidgets,M=c?c.start.row:Number.MAX_VALUE,w=d.lineHeight+"px",x=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",L=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(E?E.getText(v,_):_+g).toString();if(this.$highlightGutterLine&&(_==this.$cursorRow||c&&_<this.$cursorRow&&_>=M&&this.$cursorRow<=c.end.row)&&(x+="ace_gutter-active-line ",this.$cursorCell!=p&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=p)),b[_]&&(x+=b[_]),F[_]&&(x+=F[_]),this.$annotations[_]&&_!==M&&(x+=this.$annotations[_].className),T){var A=T[_];A==null&&(A=T[_]=v.getFoldWidget(_))}if(A){var I="ace_fold-widget ace_"+A,$=A=="start"&&_==M&&_<c.end.row;if($){I+=" ace_closed";for(var H="",P=!1,q=_+1;q<=c.end.row;q++)if(this.$annotations[q]){if(this.$annotations[q].className===" ace_error"){P=!0,H=" ace_error_fold";break}if(this.$annotations[q].className===" ace_warning"){P=!0,H=" ace_warning_fold";continue}}x+=H}else I+=" ace_open";C.className!=I&&(C.className=I),o.setStyle(C.style,"height",w),o.setStyle(C.style,"display","inline-block"),C.setAttribute("role","button"),C.setAttribute("tabindex","-1");var G=v.getFoldWidgetRange(_);G?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[G.start.row+1,G.end.row+1])):c?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[c.start.row+1,c.end.row+1])):C.setAttribute("aria-label",u("Toggle code folding, row $0",[_+1])),$?(C.setAttribute("aria-expanded","false"),C.setAttribute("title",u("Unfold code"))):(C.setAttribute("aria-expanded","true"),C.setAttribute("title",u("Fold code")))}else C&&(o.setStyle(C.style,"display","none"),C.setAttribute("tabindex","0"),C.removeAttribute("role"),C.removeAttribute("aria-label"));return P&&this.$showFoldedAnnotations?(S.className="ace_gutter_annotation",D.className=L,D.className+=H,o.setStyle(D.style,"height",w),o.setStyle(S.style,"display","block"),o.setStyle(S.style,"height",w),S.setAttribute("aria-label",u("Read annotations row $0",[R])),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")):this.$annotations[_]?(S.className="ace_gutter_annotation",D.className=L,this.$useSvgGutterIcons?D.className+=this.$annotations[_].className:m.classList.add(this.$annotations[_].className.replace(" ","")),o.setStyle(D.style,"height",w),o.setStyle(S.style,"display","block"),o.setStyle(S.style,"height",w),S.setAttribute("aria-label",u("Read annotations row $0",[R])),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")):(o.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0")),R!==y.data&&(y.data=R),m.className!=x&&(m.className=x),o.setStyle(p.element.style,"height",this.$lines.computeLineHeight(_,d,v)+"px"),o.setStyle(p.element.style,"top",this.$lines.computeLineTop(_,d,v)+"px"),p.text=R,S.style.display==="none"&&C.style.display==="none"?p.element.setAttribute("aria-hidden",!0):p.element.setAttribute("aria-hidden",!1),p},f.prototype.setHighlightGutterLine=function(p){this.$highlightGutterLine=p},f.prototype.setShowLineNumbers=function(p){this.$renderer=!p&&{getWidth:function(){return 0},getText:function(){return""}}},f.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},f.prototype.setShowFoldWidgets=function(p){p?o.addCssClass(this.element,"ace_folding-enabled"):o.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=p,this.$padding=null},f.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},f.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var p=o.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(p.borderLeftWidth)||0)+(parseInt(p.paddingLeft)||0)+1,this.$padding.right=(parseInt(p.borderRightWidth)||0)+(parseInt(p.paddingRight)||0),this.$padding},f.prototype.getRegion=function(p){var d=this.$padding||this.$computePadding(),c=this.element.getBoundingClientRect();if(p.x<d.left+c.left)return"markers";if(this.$showFoldWidgets&&p.x>c.right-d.right)return"foldWidgets"},f}();i.prototype.$fixedWidth=!1,i.prototype.$highlightGutterLine=!0,i.prototype.$renderer="",i.prototype.$showLineNumbers=!0,i.prototype.$showFoldWidgets=!0,h.implement(i.prototype,r);function s(f){var p=document.createTextNode("");f.appendChild(p);var d=o.createElement("span");f.appendChild(d);var c=o.createElement("span");f.appendChild(c);var _=o.createElement("span");return c.appendChild(_),f}t.Gutter=i});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var o=e("../range").Range,h=e("../lib/dom"),a=function(){function l(u){this.element=h.createElement("div"),this.element.className="ace_layer ace_marker-layer",u.appendChild(this.element)}return l.prototype.setPadding=function(u){this.$padding=u},l.prototype.setSession=function(u){this.session=u},l.prototype.setMarkers=function(u){this.markers=u},l.prototype.elt=function(u,i){var s=this.i!=-1&&this.element.childNodes[this.i];s?this.i++:(s=document.createElement("div"),this.element.appendChild(s),this.i=-1),s.style.cssText=i,s.className=u},l.prototype.update=function(u){if(u){this.config=u,this.i=0;var i;for(var s in this.markers){var f=this.markers[s];if(!f.range){f.update(i,this,this.session,u);continue}var p=f.range.clipRows(u.firstRow,u.lastRow);if(!p.isEmpty())if(p=p.toScreenRange(this.session),f.renderer){var d=this.$getTop(p.start.row,u),c=this.$padding+p.start.column*u.characterWidth;f.renderer(i,p,c,d,u)}else f.type=="fullLine"?this.drawFullLineMarker(i,p,f.clazz,u):f.type=="screenLine"?this.drawScreenLineMarker(i,p,f.clazz,u):p.isMultiLine()?f.type=="text"?this.drawTextMarker(i,p,f.clazz,u):this.drawMultiLineMarker(i,p,f.clazz,u):this.drawSingleLineMarker(i,p,f.clazz+" ace_start ace_br15",u)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},l.prototype.$getTop=function(u,i){return(u-i.firstRowScreen)*i.lineHeight},l.prototype.drawTextMarker=function(u,i,s,f,p){for(var d=this.session,c=i.start.row,_=i.end.row,m=c,v=0,y=0,C=d.getScreenLastRowColumn(m),S=new o(m,i.start.column,m,y);m<=_;m++)S.start.row=S.end.row=m,S.start.column=m==c?i.start.column:d.getRowWrapIndent(m),S.end.column=C,v=y,y=C,C=m+1<_?d.getScreenLastRowColumn(m+1):m==_?0:i.end.column,this.drawSingleLineMarker(u,S,s+(m==c?" ace_start":"")+" ace_br"+r(m==c||m==c+1&&i.start.column,v<y,y>C,m==_),f,m==_?0:1,p)},l.prototype.drawMultiLineMarker=function(u,i,s,f,p){var d=this.$padding,c=f.lineHeight,_=this.$getTop(i.start.row,f),m=d+i.start.column*f.characterWidth;if(p=p||"",this.session.$bidiHandler.isBidiRow(i.start.row)){var v=i.clone();v.end.row=v.start.row,v.end.column=this.session.getLine(v.start.row).length,this.drawBidiSingleLineMarker(u,v,s+" ace_br1 ace_start",f,null,p)}else this.elt(s+" ace_br1 ace_start","height:"+c+"px;right:0;top:"+_+"px;left:"+m+"px;"+(p||""));if(this.session.$bidiHandler.isBidiRow(i.end.row)){var v=i.clone();v.start.row=v.end.row,v.start.column=0,this.drawBidiSingleLineMarker(u,v,s+" ace_br12",f,null,p)}else{_=this.$getTop(i.end.row,f);var y=i.end.column*f.characterWidth;this.elt(s+" ace_br12","height:"+c+"px;width:"+y+"px;top:"+_+"px;left:"+d+"px;"+(p||""))}if(c=(i.end.row-i.start.row-1)*f.lineHeight,!(c<=0)){_=this.$getTop(i.start.row+1,f);var C=(i.start.column?1:0)|(i.end.column?0:8);this.elt(s+(C?" ace_br"+C:""),"height:"+c+"px;right:0;top:"+_+"px;left:"+d+"px;"+(p||""))}},l.prototype.drawSingleLineMarker=function(u,i,s,f,p,d){if(this.session.$bidiHandler.isBidiRow(i.start.row))return this.drawBidiSingleLineMarker(u,i,s,f,p,d);var c=f.lineHeight,_=(i.end.column+(p||0)-i.start.column)*f.characterWidth,m=this.$getTop(i.start.row,f),v=this.$padding+i.start.column*f.characterWidth;this.elt(s,"height:"+c+"px;width:"+_+"px;top:"+m+"px;left:"+v+"px;"+(d||""))},l.prototype.drawBidiSingleLineMarker=function(u,i,s,f,p,d){var c=f.lineHeight,_=this.$getTop(i.start.row,f),m=this.$padding,v=this.session.$bidiHandler.getSelections(i.start.column,i.end.column);v.forEach(function(y){this.elt(s,"height:"+c+"px;width:"+(y.width+(p||0))+"px;top:"+_+"px;left:"+(m+y.left)+"px;"+(d||""))},this)},l.prototype.drawFullLineMarker=function(u,i,s,f,p){var d=this.$getTop(i.start.row,f),c=f.lineHeight;i.start.row!=i.end.row&&(c+=this.$getTop(i.end.row,f)-d),this.elt(s,"height:"+c+"px;top:"+d+"px;left:0;right:0;"+(p||""))},l.prototype.drawScreenLineMarker=function(u,i,s,f,p){var d=this.$getTop(i.start.row,f),c=f.lineHeight;this.elt(s,"height:"+c+"px;top:"+d+"px;left:0;right:0;"+(p||""))},l}();a.prototype.$padding=0;function r(l,u,i,s){return(l?1:0)|(u?2:0)|(i?4:0)|(s?8:0)}t.Marker=a});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,n){var o=new Set(["text","rparen","lparen"]);t.isTextToken=function(h){return o.has(h)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,n){"use strict";var o=e("../lib/oop"),h=e("../lib/dom"),a=e("../lib/lang"),r=e("./lines").Lines,l=e("../lib/event_emitter").EventEmitter,u=e("../config").nls,i=e("./text_util").isTextToken,s=function(){function f(p){this.dom=h,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",p.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new r(this.element)}return f.prototype.$updateEolChar=function(){var p=this.session.doc,d=p.getNewLineCharacter()==`
`&&p.getNewLineMode()!="windows",c=d?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=c)return this.EOL_CHAR=c,!0},f.prototype.setPadding=function(p){this.$padding=p,this.element.style.margin="0 "+p+"px"},f.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},f.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},f.prototype.$setFontMetrics=function(p){this.$fontMetrics=p,this.$fontMetrics.on("changeCharacterSize",function(d){this._signal("changeCharacterSize",d)}.bind(this)),this.$pollSizeChanges()},f.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},f.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},f.prototype.setSession=function(p){this.session=p,p&&this.$computeTabString()},f.prototype.setShowInvisibles=function(p){return this.showInvisibles==p?!1:(this.showInvisibles=p,typeof p=="string"?(this.showSpaces=/tab/i.test(p),this.showTabs=/space/i.test(p),this.showEOL=/eol/i.test(p)):this.showSpaces=this.showTabs=this.showEOL=p,this.$computeTabString(),!0)},f.prototype.setDisplayIndentGuides=function(p){return this.displayIndentGuides==p?!1:(this.displayIndentGuides=p,this.$computeTabString(),!0)},f.prototype.setHighlightIndentGuides=function(p){return this.$highlightIndentGuides===p?!1:(this.$highlightIndentGuides=p,p)},f.prototype.$computeTabString=function(){var p=this.session.getTabSize();this.tabSize=p;for(var d=this.$tabStrings=[0],c=1;c<p+1;c++)if(this.showTabs){var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_tab",_.textContent=a.stringRepeat(this.TAB_CHAR,c),d.push(_)}else d.push(this.dom.createTextNode(a.stringRepeat(" ",c),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var m="ace_indent-guide",v=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?a.stringRepeat(this.SPACE_CHAR,this.tabSize):a.stringRepeat(" ",this.tabSize),C=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?a.stringRepeat(this.TAB_CHAR,this.tabSize):y,_=this.dom.createElement("span");_.className=m+v,_.textContent=y,this.$tabStrings[" "]=_;var _=this.dom.createElement("span");_.className=m+C,_.textContent=S,this.$tabStrings["	"]=_}},f.prototype.updateLines=function(p,d,c){if(this.config.lastRow!=p.lastRow||this.config.firstRow!=p.firstRow)return this.update(p);this.config=p;for(var _=Math.max(d,p.firstRow),m=Math.min(c,p.lastRow),v=this.element.childNodes,y=0,S=p.firstRow;S<_;S++){var D=this.session.getFoldLine(S);if(D)if(D.containsRow(_)){_=D.start.row;break}else S=D.end.row;y++}for(var C=!1,S=_,D=this.session.getNextFoldLine(S),g=D?D.start.row:1/0;S>g&&(S=D.end.row+1,D=this.session.getNextFoldLine(S,D),g=D?D.start.row:1/0),!(S>m);){var b=v[y++];if(b){this.dom.removeChildren(b),this.$renderLine(b,S,S==g?D:!1),C&&(b.style.top=this.$lines.computeLineTop(S,p,this.session)+"px");var F=p.lineHeight*this.session.getRowLength(S)+"px";b.style.height!=F&&(C=!0,b.style.height=F)}S++}if(C)for(;y<this.$lines.cells.length;){var E=this.$lines.cells[y++];E.element.style.top=this.$lines.computeLineTop(E.row,p,this.session)+"px"}},f.prototype.scrollLines=function(p){var d=this.config;if(this.config=p,this.$lines.pageChanged(d,p))return this.update(p);this.$lines.moveContainer(p);var c=p.lastRow,_=d?d.lastRow:-1;if(!d||_<p.firstRow)return this.update(p);if(c<d.firstRow)return this.update(p);if(!d||d.lastRow<p.firstRow)return this.update(p);if(p.lastRow<d.firstRow)return this.update(p);if(d.firstRow<p.firstRow)for(var m=this.session.getFoldedRowCount(d.firstRow,p.firstRow-1);m>0;m--)this.$lines.shift();if(d.lastRow>p.lastRow)for(var m=this.session.getFoldedRowCount(p.lastRow+1,d.lastRow);m>0;m--)this.$lines.pop();p.firstRow<d.firstRow&&this.$lines.unshift(this.$renderLinesFragment(p,p.firstRow,d.firstRow-1)),p.lastRow>d.lastRow&&this.$lines.push(this.$renderLinesFragment(p,d.lastRow+1,p.lastRow)),this.$highlightIndentGuide()},f.prototype.$renderLinesFragment=function(p,d,c){for(var _=[],m=d,v=this.session.getNextFoldLine(m),y=v?v.start.row:1/0;m>y&&(m=v.end.row+1,v=this.session.getNextFoldLine(m,v),y=v?v.start.row:1/0),!(m>c);){var C=this.$lines.createCell(m,p,this.session),S=C.element;this.dom.removeChildren(S),h.setStyle(S.style,"height",this.$lines.computeLineHeight(m,p,this.session)+"px"),h.setStyle(S.style,"top",this.$lines.computeLineTop(m,p,this.session)+"px"),this.$renderLine(S,m,m==y?v:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",_.push(C),m++}return _},f.prototype.update=function(p){this.$lines.moveContainer(p),this.config=p;for(var d=p.firstRow,c=p.lastRow,_=this.$lines;_.getLength();)_.pop();_.push(this.$renderLinesFragment(p,d,c))},f.prototype.$renderToken=function(p,d,c,_){for(var m=this,v=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),C,S=0;C=v.exec(_);){var D=C[1],g=C[2],b=C[3],F=C[4],E=C[5];if(!(!m.showSpaces&&g)){var T=S!=C.index?_.slice(S,C.index):"";if(S=C.index+C[0].length,T&&y.appendChild(this.dom.createTextNode(T,this.element)),D){var M=m.session.getScreenTabSize(d+C.index);y.appendChild(m.$tabStrings[M].cloneNode(!0)),d+=M-1}else if(g)if(m.showSpaces){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space",w.textContent=a.stringRepeat(m.SPACE_CHAR,g.length),y.appendChild(w)}else y.appendChild(this.dom.createTextNode(g,this.element));else if(b){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space ace_invalid",w.textContent=a.stringRepeat(m.SPACE_CHAR,b.length),y.appendChild(w)}else if(F){d+=1;var w=this.dom.createElement("span");w.style.width=m.config.characterWidth*2+"px",w.className=m.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",w.textContent=m.showSpaces?m.SPACE_CHAR:F,y.appendChild(w)}else if(E){d+=1;var w=this.dom.createElement("span");w.style.width=m.config.characterWidth*2+"px",w.className="ace_cjk",w.textContent=E,y.appendChild(w)}}}if(y.appendChild(this.dom.createTextNode(S?_.slice(S):_,this.element)),i(c.type))p.appendChild(y);else{var x="ace_"+c.type.replace(/\./g," ace_"),w=this.dom.createElement("span");c.type=="fold"&&(w.style.width=c.value.length*this.config.characterWidth+"px",w.setAttribute("title",u("Unfold code"))),w.className=x,w.appendChild(y),p.appendChild(w)}return d+_.length},f.prototype.renderIndentGuide=function(p,d,c){var _=d.search(this.$indentGuideRe);if(_<=0||_>=c)return d;if(d[0]==" "){_-=_%this.tabSize;for(var m=_/this.tabSize,v=0;v<m;v++)p.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),d.substr(_)}else if(d[0]=="	"){for(var v=0;v<_;v++)p.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),d.substr(_)}return this.$highlightIndentGuide(),d},f.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var p=this.session.doc.$lines;if(p){var d=this.session.selection.getCursor(),c=/^\s*/.exec(this.session.doc.getLine(d.row))[0].length,_=Math.floor(c/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:_,start:d.row};var m=this.session.$bracketHighlight;if(m){for(var v=this.session.$bracketHighlight.ranges,y=0;y<v.length;y++)if(d.row!==v[y].start.row){this.$highlightIndentGuideMarker.end=v[y].start.row,d.row>v[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&p[d.row]!==""&&d.column===p[d.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=d.row+1;y<p.length;y++){var C=p[y],S=/^\s*/.exec(C)[0].length;if(C!==""&&(this.$highlightIndentGuideMarker.end=y,S<=c))break}}this.$renderHighlightIndentGuide()}}},f.prototype.$clearActiveIndentGuide=function(){for(var p=this.$lines.cells,d=0;d<p.length;d++){var c=p[d],_=c.element.childNodes;if(_.length>0){for(var m=0;m<_.length;m++)if(_[m].classList&&_[m].classList.contains("ace_indent-guide-active")){_[m].classList.remove("ace_indent-guide-active");break}}}},f.prototype.$setIndentGuideActive=function(p,d){var c=this.session.doc.getLine(p.row);if(c!==""){var _=p.element.childNodes;if(_){var m=_[d-1];m&&m.classList&&m.classList.contains("ace_indent-guide")&&m.classList.add("ace_indent-guide-active")}}},f.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var p=this.$lines.cells;this.$clearActiveIndentGuide();var d=this.$highlightIndentGuideMarker.indentLevel;if(d!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var c=0;c<p.length;c++){var _=p[c];if(this.$highlightIndentGuideMarker.end&&_.row>=this.$highlightIndentGuideMarker.start+1){if(_.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(_,d)}}else for(var c=p.length-1;c>=0;c--){var _=p[c];if(this.$highlightIndentGuideMarker.end&&_.row<this.$highlightIndentGuideMarker.start){if(_.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(_,d)}}}},f.prototype.$createLineElement=function(p){var d=this.dom.createElement("div");return d.className="ace_line",d.style.height=this.config.lineHeight+"px",d},f.prototype.$renderWrappedLine=function(p,d,c){var _=0,m=0,v=c[0],y=0,C=this.$createLineElement();p.appendChild(C);for(var S=0;S<d.length;S++){var D=d[S],g=D.value;if(S==0&&this.displayIndentGuides){if(_=g.length,g=this.renderIndentGuide(C,g,v),!g)continue;_-=g.length}if(_+g.length<v)y=this.$renderToken(C,y,D,g),_+=g.length;else{for(;_+g.length>=v;)y=this.$renderToken(C,y,D,g.substring(0,v-_)),g=g.substring(v-_),_=v,C=this.$createLineElement(),p.appendChild(C),C.appendChild(this.dom.createTextNode(a.stringRepeat("\xA0",c.indent),this.element)),m++,y=0,v=c[m]||Number.MAX_VALUE;g.length!=0&&(_+=g.length,y=this.$renderToken(C,y,D,g))}}c[c.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(C,y,null,"",!0)},f.prototype.$renderSimpleLine=function(p,d){for(var c=0,_=0;_<d.length;_++){var m=d[_],v=m.value;if(!(_==0&&this.displayIndentGuides&&(v=this.renderIndentGuide(p,v),!v))){if(c+v.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(p,c,m,v);c=this.$renderToken(p,c,m,v)}}},f.prototype.$renderOverflowMessage=function(p,d,c,_,m){c&&this.$renderToken(p,d,c,_.slice(0,this.MAX_LINE_LENGTH-d));var v=this.dom.createElement("span");v.className="ace_inline_button ace_keyword ace_toggle_wrap",v.textContent=m?"<hide>":"<click to see more...>",p.appendChild(v)},f.prototype.$renderLine=function(p,d,c){if(!c&&c!=!1&&(c=this.session.getFoldLine(d)),c)var _=this.$getFoldLineTokens(d,c);else var _=this.session.getTokens(d);var m=p;if(_.length){var v=this.session.getRowSplitData(d);if(v&&v.length){this.$renderWrappedLine(p,_,v);var m=p.lastChild}else{var m=p;this.$useLineGroups()&&(m=this.$createLineElement(),p.appendChild(m)),this.$renderSimpleLine(m,_)}}else this.$useLineGroups()&&(m=this.$createLineElement(),p.appendChild(m));if(this.showEOL&&m){c&&(d=c.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=d==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,m.appendChild(y)}},f.prototype.$getFoldLineTokens=function(p,d){var c=this.session,_=[];function m(y,C,S){for(var D=0,g=0;g+y[D].value.length<C;)if(g+=y[D].value.length,D++,D==y.length)return;if(g!=C){var b=y[D].value.substring(C-g);b.length>S-C&&(b=b.substring(0,S-C)),_.push({type:y[D].type,value:b}),g=C+b.length,D+=1}for(;g<S&&D<y.length;){var b=y[D].value;b.length+g>S?_.push({type:y[D].type,value:b.substring(0,S-g)}):_.push(y[D]),g+=b.length,D+=1}}var v=c.getTokens(p);return d.walk(function(y,C,S,D,g){y!=null?_.push({type:"fold",value:y}):(g&&(v=c.getTokens(C)),v.length&&m(v,D,S))},d.end.row,this.session.getLine(d.end.row).length),_},f.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},f}();s.prototype.EOF_CHAR="\xB6",s.prototype.EOL_CHAR_LF="\xAC",s.prototype.EOL_CHAR_CRLF="\xA4",s.prototype.EOL_CHAR=s.prototype.EOL_CHAR_LF,s.prototype.TAB_CHAR="\u2014",s.prototype.SPACE_CHAR="\xB7",s.prototype.$padding=0,s.prototype.MAX_LINE_LENGTH=1e4,s.prototype.showInvisibles=!1,s.prototype.showSpaces=!1,s.prototype.showTabs=!1,s.prototype.showEOL=!1,s.prototype.displayIndentGuides=!0,s.prototype.$highlightIndentGuides=!0,s.prototype.$tabStrings=[],s.prototype.destroy={},s.prototype.onChangeTabSize=s.prototype.$computeTabString,o.implement(s.prototype,l),t.Text=s});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var o=e("../lib/dom"),h=function(){function a(r){this.element=o.createElement("div"),this.element.className="ace_layer ace_cursor-layer",r.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),o.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return a.prototype.$updateOpacity=function(r){for(var l=this.cursors,u=l.length;u--;)o.setStyle(l[u].style,"opacity",r?"":"0")},a.prototype.$startCssAnimation=function(){for(var r=this.cursors,l=r.length;l--;)r[l].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&o.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},a.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,o.removeCssClass(this.element,"ace_animate-blinking")},a.prototype.setPadding=function(r){this.$padding=r},a.prototype.setSession=function(r){this.session=r},a.prototype.setBlinking=function(r){r!=this.isBlinking&&(this.isBlinking=r,this.restartTimer())},a.prototype.setBlinkInterval=function(r){r!=this.blinkInterval&&(this.blinkInterval=r,this.restartTimer())},a.prototype.setSmoothBlinking=function(r){r!=this.smoothBlinking&&(this.smoothBlinking=r,o.setCssClass(this.element,"ace_smooth-blinking",r),this.$updateCursors(!0),this.restartTimer())},a.prototype.addCursor=function(){var r=o.createElement("div");return r.className="ace_cursor",this.element.appendChild(r),this.cursors.push(r),r},a.prototype.removeCursor=function(){if(this.cursors.length>1){var r=this.cursors.pop();return r.parentNode.removeChild(r),r}},a.prototype.hideCursor=function(){this.isVisible=!1,o.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},a.prototype.showCursor=function(){this.isVisible=!0,o.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},a.prototype.restartTimer=function(){var r=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,o.removeCssClass(this.element,"ace_smooth-blinking")),r(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&o.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),o.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var l=function(){this.timeoutId=setTimeout(function(){r(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){r(!0),l()},this.blinkInterval),l()}},a.prototype.getPixelPosition=function(r,l){if(!this.config||!this.session)return{left:0,top:0};r||(r=this.session.selection.getCursor());var u=this.session.documentToScreenPosition(r),i=this.$padding+(this.session.$bidiHandler.isBidiRow(u.row,r.row)?this.session.$bidiHandler.getPosLeft(u.column):u.column*this.config.characterWidth),s=(u.row-(l?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:s}},a.prototype.isCursorInView=function(r,l){return r.top>=0&&r.top<l.maxHeight},a.prototype.update=function(r){this.config=r;var l=this.session.$selectionMarkers,u=0,i=0;(l===void 0||l.length===0)&&(l=[{cursor:null}]);for(var u=0,s=l.length;u<s;u++){var f=this.getPixelPosition(l[u].cursor,!0);if(!((f.top>r.height+r.offset||f.top<0)&&u>1)){var p=this.cursors[i++]||this.addCursor(),d=p.style;this.drawCursor?this.drawCursor(p,f,r,l[u],this.session):this.isCursorInView(f,r)?(o.setStyle(d,"display","block"),o.translate(p,f.left,f.top),o.setStyle(d,"width",Math.round(r.characterWidth)+"px"),o.setStyle(d,"height",r.lineHeight+"px")):o.setStyle(d,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=f,this.restartTimer()},a.prototype.$setOverwrite=function(r){r!=this.overwrite&&(this.overwrite=r,r?o.addCssClass(this.element,"ace_overwrite-cursors"):o.removeCssClass(this.element,"ace_overwrite-cursors"))},a.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},a}();h.prototype.$padding=0,h.prototype.drawCursor=null,t.Cursor=h});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var o=this&&this.__extends||function(){var p=function(d,c){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,m){_.__proto__=m}||function(_,m){for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(_[v]=m[v])},p(d,c)};return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");p(d,c);function _(){this.constructor=d}d.prototype=c===null?Object.create(c):(_.prototype=c.prototype,new _)}}(),h=e("./lib/oop"),a=e("./lib/dom"),r=e("./lib/event"),l=e("./lib/event_emitter").EventEmitter,u=32768,i=function(){function p(d,c){this.element=a.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+c,this.inner=a.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),d.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addListener(this.element,"scroll",this.onScroll.bind(this)),r.addListener(this.element,"mousedown",r.preventDefault)}return p.prototype.setVisible=function(d){this.element.style.display=d?"":"none",this.isVisible=d,this.coeff=1},p}();h.implement(i.prototype,l);var s=function(p){o(d,p);function d(c,_){var m=p.call(this,c,"-v")||this;return m.scrollTop=0,m.scrollHeight=0,_.$scrollbarWidth=m.width=a.scrollbarWidth(c.ownerDocument),m.inner.style.width=m.element.style.width=(m.width||15)+5+"px",m.$minWidth=0,m}return d.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var c=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-c)/(this.coeff-c)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},d.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},d.prototype.setHeight=function(c){this.element.style.height=c+"px"},d.prototype.setScrollHeight=function(c){this.scrollHeight=c,c>u?(this.coeff=u/c,c=u):this.coeff!=1&&(this.coeff=1),this.inner.style.height=c+"px"},d.prototype.setScrollTop=function(c){this.scrollTop!=c&&(this.skipEvent=!0,this.scrollTop=c,this.element.scrollTop=c*this.coeff)},d}(i);s.prototype.setInnerHeight=s.prototype.setScrollHeight;var f=function(p){o(d,p);function d(c,_){var m=p.call(this,c,"-h")||this;return m.scrollLeft=0,m.height=_.$scrollbarWidth,m.inner.style.height=m.element.style.height=(m.height||15)+5+"px",m}return d.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},d.prototype.getHeight=function(){return this.isVisible?this.height:0},d.prototype.setWidth=function(c){this.element.style.width=c+"px"},d.prototype.setInnerWidth=function(c){this.inner.style.width=c+"px"},d.prototype.setScrollWidth=function(c){this.inner.style.width=c+"px"},d.prototype.setScrollLeft=function(c){this.scrollLeft!=c&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=c)},d}(i);t.ScrollBar=s,t.ScrollBarV=s,t.ScrollBarH=f,t.VScrollBar=s,t.HScrollBar=f});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var o=this&&this.__extends||function(){var f=function(p,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(c[m]=_[m])},f(p,d)};return function(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(p,d);function c(){this.constructor=p}p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),h=e("./lib/oop"),a=e("./lib/dom"),r=e("./lib/event"),l=e("./lib/event_emitter").EventEmitter;a.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var u=function(){function f(p,d){this.element=a.createElement("div"),this.element.className="ace_sb"+d,this.inner=a.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,p.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return f.prototype.setVisible=function(p){this.element.style.display=p?"":"none",this.isVisible=p,this.coeff=1},f}();h.implement(u.prototype,l);var i=function(f){o(p,f);function p(d,c){var _=f.call(this,d,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,_.parent=d,_.width=_.VScrollWidth,_.renderer=c,_.inner.style.width=_.element.style.width=(_.width||15)+"px",_.$minWidth=0,_}return p.prototype.onMouseDown=function(d,c){if(d==="mousedown"&&!(r.getButton(c)!==0||c.detail===2)){if(c.target===this.inner){var _=this,m=c.clientY,v=function(F){m=F.clientY},y=function(){clearInterval(g)},C=c.clientY,S=this.thumbTop,D=function(){if(m!==void 0){var F=_.scrollTopFromThumbTop(S+m-C);F!==_.scrollTop&&_._emit("scroll",{data:F})}};r.capture(this.inner,v,y);var g=setInterval(D,20);return r.preventDefault(c)}var b=c.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(b)}),r.preventDefault(c)}},p.prototype.getHeight=function(){return this.height},p.prototype.scrollTopFromThumbTop=function(d){var c=d*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return c=c>>0,c<0?c=0:c>this.pageHeight-this.viewHeight&&(c=this.pageHeight-this.viewHeight),c},p.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},p.prototype.setHeight=function(d){this.height=Math.max(0,d),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},p.prototype.setScrollHeight=function(d,c){this.pageHeight===d&&!c||(this.pageHeight=d,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},p.prototype.setScrollTop=function(d){this.scrollTop=d,d<0&&(d=0),this.thumbTop=d*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},p}(u);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var s=function(f){o(p,f);function p(d,c){var _=f.call(this,d,"-h")||this;return _.scrollLeft=0,_.scrollWidth=0,_.height=_.HScrollHeight,_.inner.style.height=_.element.style.height=(_.height||12)+"px",_.renderer=c,_}return p.prototype.onMouseDown=function(d,c){if(d==="mousedown"&&!(r.getButton(c)!==0||c.detail===2)){if(c.target===this.inner){var _=this,m=c.clientX,v=function(F){m=F.clientX},y=function(){clearInterval(g)},C=c.clientX,S=this.thumbLeft,D=function(){if(m!==void 0){var F=_.scrollLeftFromThumbLeft(S+m-C);F!==_.scrollLeft&&_._emit("scroll",{data:F})}};r.capture(this.inner,v,y);var g=setInterval(D,20);return r.preventDefault(c)}var b=c.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(b)}),r.preventDefault(c)}},p.prototype.getHeight=function(){return this.isVisible?this.height:0},p.prototype.scrollLeftFromThumbLeft=function(d){var c=d*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return c=c>>0,c<0?c=0:c>this.pageWidth-this.viewWidth&&(c=this.pageWidth-this.viewWidth),c},p.prototype.setWidth=function(d){this.width=Math.max(0,d),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},p.prototype.setScrollWidth=function(d,c){this.pageWidth===d&&!c||(this.pageWidth=d,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},p.prototype.setScrollLeft=function(d){this.scrollLeft=d,d<0&&(d=0),this.thumbLeft=d*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},p}(u);s.prototype.setInnerWidth=s.prototype.setScrollWidth,t.ScrollBar=i,t.ScrollBarV=i,t.ScrollBarH=s,t.VScrollBar=i,t.HScrollBar=s});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var o=e("./lib/event"),h=function(){function a(r,l){this.onRender=r,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=l||window;var u=this;this._flush=function(i){u.pending=!1;var s=u.changes;if(s&&(o.blockIdle(100),u.changes=0,u.onRender(s)),u.changes){if(u.$recursionLimit--<0)return;u.schedule()}else u.$recursionLimit=2}}return a.prototype.schedule=function(r){this.changes=this.changes|r,this.changes&&!this.pending&&(o.nextFrame(this._flush),this.pending=!0)},a.prototype.clear=function(r){var l=this.changes;return this.changes=0,l},a}();t.RenderLoop=h});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var o=e("../lib/oop"),h=e("../lib/dom"),a=e("../lib/lang"),r=e("../lib/event"),l=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,i=512,s=typeof ResizeObserver=="function",f=200,p=function(){function d(c){this.el=h.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=h.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=h.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),c.appendChild(this.el),this.$measureNode.textContent=a.stringRepeat("X",i),this.$characterSize={width:0,height:0},s?this.$addObserver():this.checkForSizeChanges()}return d.prototype.$setMeasureNodeStyles=function(c,_){c.width=c.height="auto",c.left=c.top="0px",c.visibility="hidden",c.position="absolute",c.whiteSpace="pre",l.isIE<8?c["font-family"]="inherit":c.font="inherit",c.overflow=_?"hidden":"visible"},d.prototype.checkForSizeChanges=function(c){if(c===void 0&&(c=this.$measureSizes()),c&&(this.$characterSize.width!==c.width||this.$characterSize.height!==c.height)){this.$measureNode.style.fontWeight="bold";var _=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=c,this.charSizes=Object.create(null),this.allowBoldFonts=_&&_.width===c.width&&_.height===c.height,this._emit("changeCharacterSize",{data:c})}},d.prototype.$addObserver=function(){var c=this;this.$observer=new window.ResizeObserver(function(_){c.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},d.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var c=this;return this.$pollSizeChangesTimer=r.onIdle(function _(){c.checkForSizeChanges(),r.onIdle(_,500)},500)},d.prototype.setPolling=function(c){c?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},d.prototype.$measureSizes=function(c){var _={height:(c||this.$measureNode).clientHeight,width:(c||this.$measureNode).clientWidth/i};return _.width===0||_.height===0?null:_},d.prototype.$measureCharWidth=function(c){this.$main.textContent=a.stringRepeat(c,i);var _=this.$main.getBoundingClientRect();return _.width/i},d.prototype.getCharacterWidth=function(c){var _=this.charSizes[c];return _===void 0&&(_=this.charSizes[c]=this.$measureCharWidth(c)/this.$characterSize.width),_},d.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},d.prototype.$getZoom=function(c){return!c||!c.parentElement?1:(window.getComputedStyle(c).zoom||1)*this.$getZoom(c.parentElement)},d.prototype.$initTransformMeasureNodes=function(){var c=function(_,m){return["div",{style:"position: absolute;top:"+_+"px;left:"+m+"px;"}]};this.els=h.buildDom([c(0,0),c(f,0),c(0,f),c(f,f)],this.el)},d.prototype.transformCoordinates=function(c,_){if(c){var m=this.$getZoom(this.el);c=S(1/m,c)}function v($,H,P){var q=$[1]*H[0]-$[0]*H[1];return[(-H[1]*P[0]+H[0]*P[1])/q,(+$[1]*P[0]-$[0]*P[1])/q]}function y($,H){return[$[0]-H[0],$[1]-H[1]]}function C($,H){return[$[0]+H[0],$[1]+H[1]]}function S($,H){return[$*H[0],$*H[1]]}this.els||this.$initTransformMeasureNodes();function D($){var H=$.getBoundingClientRect();return[H.left,H.top]}var g=D(this.els[0]),b=D(this.els[1]),F=D(this.els[2]),E=D(this.els[3]),T=v(y(E,b),y(E,F),y(C(b,F),C(E,g))),M=S(1+T[0],y(b,g)),w=S(1+T[1],y(F,g));if(_){var x=_,L=T[0]*x[0]/f+T[1]*x[1]/f+1,R=C(S(x[0],M),S(x[1],w));return C(S(1/L/f,R),g)}var A=y(c,g),I=v(y(M,S(T[0],A)),y(w,S(T[1],A)),A);return S(f,I)},d}();p.prototype.$characterSize={width:0,height:0},o.implement(p.prototype,u),t.FontMetrics=p});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var o=e("../lib/dom"),h=e("../lib/oop"),a=e("../lib/event_emitter").EventEmitter,r=function(){function l(u,i){this.canvas=o.createElement("canvas"),this.renderer=i,this.pixelRatio=1,this.maxHeight=i.layerConfig.maxHeight,this.lineHeight=i.layerConfig.lineHeight,this.canvasHeight=u.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=u.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},u.element.appendChild(this.canvas)}return l.prototype.$updateDecorators=function(u){var i=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(u){this.maxHeight=u.maxHeight,this.lineHeight=u.lineHeight,this.canvasHeight=u.height;var s=(u.lastRow+1)*this.lineHeight;s<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var f=this.canvas.getContext("2d");function p(E,T){return E.priority<T.priority?-1:E.priority>T.priority?1:0}var d=this.renderer.session.$annotations;if(f.clearRect(0,0,this.canvas.width,this.canvas.height),d){var c={info:1,warning:2,error:3};d.forEach(function(E){E.priority=c[E.type]||null}),d=d.sort(p);for(var _=this.renderer.session.$foldData,m=0;m<d.length;m++){var v=d[m].row,y=this.compensateFoldRows(v,_),C=Math.round((v-y)*this.lineHeight*this.heightRatio),S=Math.round((v-y)*this.lineHeight*this.heightRatio),D=Math.round(((v-y)*this.lineHeight+this.lineHeight)*this.heightRatio),g=D-S;if(g<this.minDecorationHeight){var b=(S+D)/2|0;b<this.halfMinDecorationHeight?b=this.halfMinDecorationHeight:b+this.halfMinDecorationHeight>this.canvasHeight&&(b=this.canvasHeight-this.halfMinDecorationHeight),S=Math.round(b-this.halfMinDecorationHeight),D=Math.round(b+this.halfMinDecorationHeight)}f.fillStyle=i[d[m].type]||null,f.fillRect(0,C,this.canvasWidth,D-S)}}var F=this.renderer.session.selection.getCursor();if(F){var y=this.compensateFoldRows(F.row,_),C=Math.round((F.row-y)*this.lineHeight*this.heightRatio);f.fillStyle="rgba(0, 0, 0, 0.5)",f.fillRect(0,C,this.canvasWidth,2)}},l.prototype.compensateFoldRows=function(u,i){var s=0;if(i&&i.length>0)for(var f=0;f<i.length;f++)u>i[f].start.row&&u<i[f].end.row?s+=u-i[f].start.row:u>=i[f].end.row&&(s+=i[f].end.row-i[f].start.row);return s},l}();h.implement(r.prototype,a),t.Decorator=r});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var o=e("./lib/oop"),h=e("./lib/dom"),a=e("./lib/lang"),r=e("./config"),l=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,i=e("./layer/text").Text,s=e("./layer/cursor").Cursor,f=e("./scrollbar").HScrollBar,p=e("./scrollbar").VScrollBar,d=e("./scrollbar_custom").HScrollBar,c=e("./scrollbar_custom").VScrollBar,_=e("./renderloop").RenderLoop,m=e("./layer/font_metrics").FontMetrics,v=e("./lib/event_emitter").EventEmitter,y=e("./css/editor-css"),C=e("./layer/decorators").Decorator,S=e("./lib/useragent");h.importCssString(y,"ace_editor.css",!1);var D=function(){function g(b,F){var E=this;this.container=b||h.createElement("div"),h.addCssClass(this.container,"ace_editor"),h.HI_DPI&&h.addCssClass(this.container,"ace_hidpi"),this.setTheme(F),r.get("useStrictCSP")==null&&r.set("useStrictCSP",!1),this.$gutter=h.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=h.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=h.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new l(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var T=this.$textLayer=new i(this.content);this.canvas=T.element,this.$markerFront=new u(this.content),this.$cursorLayer=new s(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new p(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.on("scroll",function(M){E.$scrollAnimation||E.session.setScrollTop(M.data-E.scrollMargin.top)}),this.scrollBarH.on("scroll",function(M){E.$scrollAnimation||E.session.setScrollLeft(M.data-E.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new m(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(M){E.updateCharacterSize(),E.onResize(!0,E.gutterWidth,E.$size.width,E.$size.height),E._signal("changeCharacterSize",M)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new _(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),r.resetOptions(this),r._signal("renderer",this)}return g.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),h.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},g.prototype.setSession=function(b){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=b,b&&this.scrollMargin.top&&b.getScrollTop()<=0&&b.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(b),this.$markerBack.setSession(b),this.$markerFront.setSession(b),this.$gutterLayer.setSession(b),this.$textLayer.setSession(b),b&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},g.prototype.updateLines=function(b,F,E){if(F===void 0&&(F=1/0),this.$changedLines?(this.$changedLines.firstRow>b&&(this.$changedLines.firstRow=b),this.$changedLines.lastRow<F&&(this.$changedLines.lastRow=F)):this.$changedLines={firstRow:b,lastRow:F},this.$changedLines.lastRow<this.layerConfig.firstRow)if(E)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},g.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},g.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},g.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},g.prototype.updateFull=function(b){b?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},g.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},g.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},g.prototype.onResize=function(b,F,E,T){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=b?1:0;var M=this.container;T||(T=M.clientHeight||M.scrollHeight),E||(E=M.clientWidth||M.scrollWidth);var w=this.$updateCachedSize(b,F,E,T);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!E&&!T)return this.resizing=0;b&&(this.$gutterLayer.$padding=null),b?this.$renderChanges(w|this.$changes,!0):this.$loop.schedule(w|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},g.prototype.$updateCachedSize=function(b,F,E,T){T-=this.$extraHeight||0;var M=0,w=this.$size,x={width:w.width,height:w.height,scrollerHeight:w.scrollerHeight,scrollerWidth:w.scrollerWidth};if(T&&(b||w.height!=T)&&(w.height=T,M|=this.CHANGE_SIZE,w.scrollerHeight=w.height,this.$horizScroll&&(w.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(w.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",M=M|this.CHANGE_SCROLL),E&&(b||w.width!=E)){M|=this.CHANGE_SIZE,w.width=E,F==null&&(F=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=F,h.setStyle(this.scrollBarH.element.style,"left",F+"px"),h.setStyle(this.scroller.style,"left",F+this.margin.left+"px"),w.scrollerWidth=Math.max(0,E-F-this.scrollBarV.getWidth()-this.margin.h),h.setStyle(this.$gutter.style,"left",this.margin.left+"px");var L=this.scrollBarV.getWidth()+"px";h.setStyle(this.scrollBarH.element.style,"right",L),h.setStyle(this.scroller.style,"right",L),h.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(w.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||b)&&(M|=this.CHANGE_FULL)}return w.$dirty=!E||!T,M&&this._signal("resize",x),M},g.prototype.onGutterResize=function(b){var F=this.$showGutter?b:0;F!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,F,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},g.prototype.adjustWrapLimit=function(){var b=this.$size.scrollerWidth-this.$padding*2,F=Math.floor(b/this.characterWidth);return this.session.adjustWrapLimit(F,this.$showPrintMargin&&this.$printMarginColumn)},g.prototype.setAnimatedScroll=function(b){this.setOption("animatedScroll",b)},g.prototype.getAnimatedScroll=function(){return this.$animatedScroll},g.prototype.setShowInvisibles=function(b){this.setOption("showInvisibles",b),this.session.$bidiHandler.setShowInvisibles(b)},g.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},g.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},g.prototype.setDisplayIndentGuides=function(b){this.setOption("displayIndentGuides",b)},g.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},g.prototype.setHighlightIndentGuides=function(b){this.setOption("highlightIndentGuides",b)},g.prototype.setShowPrintMargin=function(b){this.setOption("showPrintMargin",b)},g.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},g.prototype.setPrintMarginColumn=function(b){this.setOption("printMarginColumn",b)},g.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},g.prototype.getShowGutter=function(){return this.getOption("showGutter")},g.prototype.setShowGutter=function(b){return this.setOption("showGutter",b)},g.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},g.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},g.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},g.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},g.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var b=h.createElement("div");b.className="ace_layer ace_print-margin-layer",this.$printMarginEl=h.createElement("div"),this.$printMarginEl.className="ace_print-margin",b.appendChild(this.$printMarginEl),this.content.insertBefore(b,this.content.firstChild)}var F=this.$printMarginEl.style;F.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",F.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},g.prototype.getContainerElement=function(){return this.container},g.prototype.getMouseEventTarget=function(){return this.scroller},g.prototype.getTextAreaContainer=function(){return this.container},g.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var b=this.textarea.style,F=this.$composition;if(!this.$keepTextAreaAtCursor&&!F){h.translate(this.textarea,-100,0);return}var E=this.$cursorLayer.$pixelPos;if(E){F&&F.markerRange&&(E=this.$cursorLayer.getPixelPosition(F.markerRange.start,!0));var T=this.layerConfig,M=E.top,w=E.left;M-=T.offset;var x=F&&F.useTextareaForIME||S.isMobile?this.lineHeight:1;if(M<0||M>T.height-x){h.translate(this.textarea,0,0);return}var L=1,R=this.$size.height-x;if(!F)M+=this.lineHeight;else if(F.useTextareaForIME){var A=this.textarea.value;L=this.characterWidth*this.session.$getStringScreenWidth(A)[0]}else M+=this.lineHeight+2;w-=this.scrollLeft,w>this.$size.scrollerWidth-L&&(w=this.$size.scrollerWidth-L),w+=this.gutterWidth+this.margin.left,h.setStyle(b,"height",x+"px"),h.setStyle(b,"width",L+"px"),h.translate(this.textarea,Math.min(w,this.$size.scrollerWidth-L),Math.min(M,R))}}},g.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},g.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},g.prototype.getLastFullyVisibleRow=function(){var b=this.layerConfig,F=b.lastRow,E=this.session.documentToScreenRow(F,0)*b.lineHeight;return E-this.session.getScrollTop()>b.height-b.lineHeight?F-1:F},g.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},g.prototype.setPadding=function(b){this.$padding=b,this.$textLayer.setPadding(b),this.$cursorLayer.setPadding(b),this.$markerFront.setPadding(b),this.$markerBack.setPadding(b),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},g.prototype.setScrollMargin=function(b,F,E,T){var M=this.scrollMargin;M.top=b|0,M.bottom=F|0,M.right=T|0,M.left=E|0,M.v=M.top+M.bottom,M.h=M.left+M.right,M.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-M.top),this.updateFull()},g.prototype.setMargin=function(b,F,E,T){var M=this.margin;M.top=b|0,M.bottom=F|0,M.right=T|0,M.left=E|0,M.v=M.top+M.bottom,M.h=M.left+M.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},g.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},g.prototype.setHScrollBarAlwaysVisible=function(b){this.setOption("hScrollBarAlwaysVisible",b)},g.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},g.prototype.setVScrollBarAlwaysVisible=function(b){this.setOption("vScrollBarAlwaysVisible",b)},g.prototype.$updateScrollBarV=function(){var b=this.layerConfig.maxHeight,F=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(b-=(F-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>b-F&&(b=this.scrollTop+F,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(b+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},g.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},g.prototype.freeze=function(){this.$frozen=!0},g.prototype.unfreeze=function(){this.$frozen=!1},g.prototype.$renderChanges=function(b,F){if(this.$changes&&(b|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!b&&!F){this.$changes|=b;return}if(this.$size.$dirty)return this.$changes|=b,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",b),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var E=this.layerConfig;if(b&this.CHANGE_FULL||b&this.CHANGE_SIZE||b&this.CHANGE_TEXT||b&this.CHANGE_LINES||b&this.CHANGE_SCROLL||b&this.CHANGE_H_SCROLL){if(b|=this.$computeLayerConfig()|this.$loop.clear(),E.firstRow!=this.layerConfig.firstRow&&E.firstRowScreen==this.layerConfig.firstRowScreen){var T=this.scrollTop+(E.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;T>0&&(this.scrollTop=T,b=b|this.CHANGE_SCROLL,b|=this.$computeLayerConfig()|this.$loop.clear())}E=this.layerConfig,this.$updateScrollBarV(),b&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),h.translate(this.content,-this.scrollLeft,-E.offset);var M=E.width+2*this.$padding+"px",w=E.minHeight+"px";h.setStyle(this.content.style,"width",M),h.setStyle(this.content.style,"height",w)}if(b&this.CHANGE_H_SCROLL&&(h.translate(this.content,-this.scrollLeft,-E.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),b&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}if(b&this.CHANGE_SCROLL){this.$changedLines=null,b&this.CHANGE_TEXT||b&this.CHANGE_LINES?this.$textLayer.update(E):this.$textLayer.scrollLines(E),this.$showGutter&&(b&this.CHANGE_GUTTER||b&this.CHANGE_LINES?this.$gutterLayer.update(E):this.$gutterLayer.scrollLines(E)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}b&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):b&this.CHANGE_LINES?((this.$updateLines()||b&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):b&this.CHANGE_TEXT||b&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):b&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)),b&this.CHANGE_CURSOR&&(this.$cursorLayer.update(E),this.$moveTextAreaToCursor()),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(E),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(E),this._signal("afterRender",b)},g.prototype.$autosize=function(){var b=this.session.getScreenLength()*this.lineHeight,F=this.$maxLines*this.lineHeight,E=Math.min(F,Math.max((this.$minLines||1)*this.lineHeight,b))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(E+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&E>this.$maxPixelHeight&&(E=this.$maxPixelHeight);var T=E<=2*this.lineHeight,M=!T&&b>F;if(E!=this.desiredHeight||this.$size.height!=this.desiredHeight||M!=this.$vScroll){M!=this.$vScroll&&(this.$vScroll=M,this.scrollBarV.setVisible(M));var w=this.container.clientWidth;this.container.style.height=E+"px",this.$updateCachedSize(!0,this.$gutterWidth,w,E),this.desiredHeight=E,this._signal("autosize")}},g.prototype.$computeLayerConfig=function(){var b=this.session,F=this.$size,E=F.height<=2*this.lineHeight,T=this.session.getScreenLength(),M=T*this.lineHeight,w=this.$getLongestLine(),x=!E&&(this.$hScrollBarAlwaysVisible||F.scrollerWidth-w-2*this.$padding<0),L=this.$horizScroll!==x;L&&(this.$horizScroll=x,this.scrollBarH.setVisible(x));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var A=F.scrollerHeight+this.lineHeight,I=!this.$maxLines&&this.$scrollPastEnd?(F.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;M+=I;var $=this.scrollMargin;this.session.setScrollTop(Math.max(-$.top,Math.min(this.scrollTop,M-F.scrollerHeight+$.bottom))),this.session.setScrollLeft(Math.max(-$.left,Math.min(this.scrollLeft,w+2*this.$padding-F.scrollerWidth+$.right)));var H=!E&&(this.$vScrollBarAlwaysVisible||F.scrollerHeight-M+I<0||this.scrollTop>$.top),P=R!==H;P&&(this.$vScroll=H,this.scrollBarV.setVisible(H));var q=this.scrollTop%this.lineHeight,G=Math.ceil(A/this.lineHeight)-1,N=Math.max(0,Math.round((this.scrollTop-q)/this.lineHeight)),Q=N+G,O,B,U=this.lineHeight;N=b.screenToDocumentRow(N,0);var k=b.getFoldLine(N);k&&(N=k.start.row),O=b.documentToScreenRow(N,0),B=b.getRowLength(N)*U,Q=Math.min(b.screenToDocumentRow(Q,0),b.getLength()-1),A=F.scrollerHeight+b.getRowLength(Q)*U+B,q=this.scrollTop-O*U;var te=0;return(this.layerConfig.width!=w||L)&&(te=this.CHANGE_H_SCROLL),(L||P)&&(te|=this.$updateCachedSize(!0,this.gutterWidth,F.width,F.height),this._signal("scrollbarVisibilityChanged"),P&&(w=this.$getLongestLine())),this.layerConfig={width:w,padding:this.$padding,firstRow:N,firstRowScreen:O,lastRow:Q,lineHeight:U,characterWidth:this.characterWidth,minHeight:A,maxHeight:M,offset:q,gutterOffset:U?Math.max(0,Math.ceil((q+F.height-F.scrollerHeight)/U)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(w-this.$padding),te},g.prototype.$updateLines=function(){if(this.$changedLines){var b=this.$changedLines.firstRow,F=this.$changedLines.lastRow;this.$changedLines=null;var E=this.layerConfig;if(!(b>E.lastRow+1)&&!(F<E.firstRow)){if(F===1/0){this.$showGutter&&this.$gutterLayer.update(E),this.$textLayer.update(E);return}return this.$textLayer.updateLines(E,b,F),!0}}},g.prototype.$getLongestLine=function(){var b=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(b+=1),this.$textLayer&&b>this.$textLayer.MAX_LINE_LENGTH&&(b=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(b*this.characterWidth))},g.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},g.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},g.prototype.addGutterDecoration=function(b,F){this.$gutterLayer.addGutterDecoration(b,F)},g.prototype.removeGutterDecoration=function(b,F){this.$gutterLayer.removeGutterDecoration(b,F)},g.prototype.updateBreakpoints=function(b){this._rows=b,this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.setAnnotations=function(b){this.$gutterLayer.setAnnotations(b),this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},g.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},g.prototype.showCursor=function(){this.$cursorLayer.showCursor()},g.prototype.scrollSelectionIntoView=function(b,F,E){this.scrollCursorIntoView(b,E),this.scrollCursorIntoView(F,E)},g.prototype.scrollCursorIntoView=function(b,F,E){if(this.$size.scrollerHeight!==0){var T=this.$cursorLayer.getPixelPosition(b),M=T.left,w=T.top,x=E&&E.top||0,L=E&&E.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+x>w?(F&&R+x>w+this.lineHeight&&(w-=F*this.$size.scrollerHeight),w===0&&(w=-this.scrollMargin.top),this.session.setScrollTop(w)):R+this.$size.scrollerHeight-L<w+this.lineHeight&&(F&&R+this.$size.scrollerHeight-L<w-this.lineHeight&&(w+=F*this.$size.scrollerHeight),this.session.setScrollTop(w+this.lineHeight+L-this.$size.scrollerHeight));var A=this.scrollLeft,I=2*this.layerConfig.characterWidth;M-I<A?(M-=I,M<this.$padding+I&&(M=-this.scrollMargin.left),this.session.setScrollLeft(M)):(M+=I,A+this.$size.scrollerWidth<M+this.characterWidth?this.session.setScrollLeft(Math.round(M+this.characterWidth-this.$size.scrollerWidth)):A<=this.$padding&&M-A<this.characterWidth&&this.session.setScrollLeft(0))}},g.prototype.getScrollTop=function(){return this.session.getScrollTop()},g.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},g.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},g.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},g.prototype.scrollToRow=function(b){this.session.setScrollTop(b*this.lineHeight)},g.prototype.alignCursor=function(b,F){typeof b=="number"&&(b={row:b,column:0});var E=this.$cursorLayer.getPixelPosition(b),T=this.$size.scrollerHeight-this.lineHeight,M=E.top-T*(F||0);return this.session.setScrollTop(M),M},g.prototype.$calcSteps=function(b,F){var E=0,T=this.STEPS,M=[],w=function(x,L,R){return R*(Math.pow(x-1,3)+1)+L};for(E=0;E<T;++E)M.push(w(E/this.STEPS,b,F-b));return M},g.prototype.scrollToLine=function(b,F,E,T){var M=this.$cursorLayer.getPixelPosition({row:b,column:0}),w=M.top;F&&(w-=this.$size.scrollerHeight/2);var x=this.scrollTop;this.session.setScrollTop(w),E!==!1&&this.animateScrolling(x,T)},g.prototype.animateScrolling=function(b,F){var E=this.scrollTop;if(!this.$animatedScroll)return;var T=this;if(b==E)return;if(this.$scrollAnimation){var M=this.$scrollAnimation.steps;if(M.length&&(b=M[0],b==E))return}var w=T.$calcSteps(b,E);this.$scrollAnimation={from:b,to:E,steps:w},clearInterval(this.$timer),T.session.setScrollTop(w.shift()),T.session.$scrollTop=E;function x(){T.$timer=clearInterval(T.$timer),T.$scrollAnimation=null,T.$stopAnimation=!1,F&&F()}this.$timer=setInterval(function(){if(T.$stopAnimation){x();return}if(!T.session)return clearInterval(T.$timer);w.length?(T.session.setScrollTop(w.shift()),T.session.$scrollTop=E):E!=null?(T.session.$scrollTop=-1,T.session.setScrollTop(E),E=null):x()},10)},g.prototype.scrollToY=function(b){this.scrollTop!==b&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=b)},g.prototype.scrollToX=function(b){this.scrollLeft!==b&&(this.scrollLeft=b),this.$loop.schedule(this.CHANGE_H_SCROLL)},g.prototype.scrollTo=function(b,F){this.session.setScrollTop(F),this.session.setScrollLeft(b)},g.prototype.scrollBy=function(b,F){F&&this.session.setScrollTop(this.session.getScrollTop()+F),b&&this.session.setScrollLeft(this.session.getScrollLeft()+b)},g.prototype.isScrollableBy=function(b,F){if(F<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||F>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||b<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||b>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},g.prototype.pixelToScreenCoordinates=function(b,F){var E;if(this.$hasCssTransforms){E={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,F]);b=T[1]-this.gutterWidth-this.margin.left,F=T[0]}else E=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-E.left-this.$padding,w=M/this.characterWidth,x=Math.floor((F+this.scrollTop-E.top)/this.lineHeight),L=this.$blockCursor?Math.floor(w):Math.round(w);return{row:x,column:L,side:w-L>0?1:-1,offsetX:M}},g.prototype.screenToTextCoordinates=function(b,F){var E;if(this.$hasCssTransforms){E={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,F]);b=T[1]-this.gutterWidth-this.margin.left,F=T[0]}else E=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-E.left-this.$padding,w=M/this.characterWidth,x=this.$blockCursor?Math.floor(w):Math.round(w),L=Math.floor((F+this.scrollTop-E.top)/this.lineHeight);return this.session.screenToDocumentPosition(L,Math.max(x,0),M)},g.prototype.textToScreenCoordinates=function(b,F){var E=this.scroller.getBoundingClientRect(),T=this.session.documentToScreenPosition(b,F),M=this.$padding+(this.session.$bidiHandler.isBidiRow(T.row,b)?this.session.$bidiHandler.getPosLeft(T.column):Math.round(T.column*this.characterWidth)),w=T.row*this.lineHeight;return{pageX:E.left+M-this.scrollLeft,pageY:E.top+w-this.scrollTop}},g.prototype.visualizeFocus=function(){h.addCssClass(this.container,"ace_focus")},g.prototype.visualizeBlur=function(){h.removeCssClass(this.container,"ace_focus")},g.prototype.showComposition=function(b){this.$composition=b,b.cssText||(b.cssText=this.textarea.style.cssText),b.useTextareaForIME==null&&(b.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(h.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):b.markerId=this.session.addMarker(b.markerRange,"ace_composition_marker","text")},g.prototype.setCompositionText=function(b){var F=this.session.selection.cursor;this.addToken(b,"composition_placeholder",F.row,F.column),this.$moveTextAreaToCursor()},g.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),h.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var b=this.session.selection.cursor;this.removeExtraToken(b.row,b.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},g.prototype.setGhostText=function(b,F){var E=this.session.selection.cursor,T=F||{row:E.row,column:E.column};this.removeGhostText();var M=b.split(`
`);if(this.addToken(M[0],"ghost_text",T.row,T.column),this.$ghostText={text:b,position:{row:T.row,column:T.column}},M.length>1){this.$ghostTextWidget={text:M.slice(1).join(`
`),row:T.row,column:T.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var w=this.$cursorLayer.getPixelPosition(T,!0),x=this.container,L=x.getBoundingClientRect().height,R=M.length*this.lineHeight,A=R<L-w.top;if(A)return;R<L?this.scrollBy(0,(M.length-1)*this.lineHeight):this.scrollBy(0,w.top)}},g.prototype.removeGhostText=function(){if(this.$ghostText){var b=this.$ghostText.position;this.removeExtraToken(b.row,b.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},g.prototype.addToken=function(b,F,E,T){var M=this.session;M.bgTokenizer.lines[E]=null;var w={type:F,value:b},x=M.getTokens(E);if(T==null||!x.length)x.push(w);else for(var L=0,R=0;R<x.length;R++){var A=x[R];if(L+=A.value.length,T<=L){var I=A.value.length-(L-T),$=A.value.slice(0,I),H=A.value.slice(I);x.splice(R,1,{type:A.type,value:$},w,{type:A.type,value:H});break}}this.updateLines(E,E)},g.prototype.removeExtraToken=function(b,F){this.session.bgTokenizer.lines[b]=null,this.updateLines(b,b)},g.prototype.setTheme=function(b,F){var E=this;if(this.$themeId=b,E._dispatchEvent("themeChange",{theme:b}),!b||typeof b=="string"){var T=b||this.$options.theme.initialValue;r.loadModule(["theme",T],M)}else M(b);function M(w){if(E.$themeId!=b)return F&&F();if(!w||!w.cssClass)throw new Error("couldn't load module "+b+" or it didn't call define");w.$id&&(E.$themeId=w.$id),h.importCssString(w.cssText,w.cssClass,E.container),E.theme&&h.removeCssClass(E.container,E.theme.cssClass);var x="padding"in w?w.padding:"padding"in(E.theme||{})?4:E.$padding;E.$padding&&x!=E.$padding&&E.setPadding(x),E.$theme=w.cssClass,E.theme=w,h.addCssClass(E.container,w.cssClass),h.setCssClass(E.container,"ace_dark",w.isDark),E.$size&&(E.$size.width=0,E.$updateSizeAsync()),E._dispatchEvent("themeLoaded",{theme:w}),F&&F()}},g.prototype.getTheme=function(){return this.$themeId},g.prototype.setStyle=function(b,F){h.setCssClass(this.container,b,F!==!1)},g.prototype.unsetStyle=function(b){h.removeCssClass(this.container,b)},g.prototype.setCursorStyle=function(b){h.setStyle(this.scroller.style,"cursor",b)},g.prototype.setMouseCursor=function(b){h.setStyle(this.scroller.style,"cursor",b)},g.prototype.attachToShadowRoot=function(){h.importCssString(y,"ace_editor.css",this.container)},g.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},g.prototype.$updateCustomScrollbar=function(b){var F=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,b===!0?(this.scrollBarV=new c(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollTop(E.data-F.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollLeft(E.data-F.scrollMargin.left)}),this.$scrollDecorator=new C(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new p(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollTop(E.data-F.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollLeft(E.data-F.scrollMargin.left)}))},g.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var b=this;this.$resizeTimer=a.delayedCall(function(){b.destroyed||b.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(F){var E=F[0].contentRect.width,T=F[0].contentRect.height;Math.abs(b.$size.width-E)>1||Math.abs(b.$size.height-T)>1?b.$resizeTimer.delay():b.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},g}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,o.implement(D.prototype,v),r.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(g){!g&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):g&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(g){this.$textLayer.setShowInvisibles(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(g){typeof g=="number"&&(this.$printMarginColumn=g),this.$showPrintMargin=!!g,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(g){this.$gutter.style.display=g?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(g){this.$gutterLayer.$useSvgGutterIcons=g},initialValue:!1},showFoldedAnnotations:{set:function(g){this.$gutterLayer.$showFoldedAnnotations=g},initialValue:!1},fadeFoldWidgets:{set:function(g){h.setCssClass(this.$gutter,"ace_fade-fold-widgets",g)},initialValue:!1},showFoldWidgets:{set:function(g){this.$gutterLayer.setShowFoldWidgets(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(g){this.$textLayer.setDisplayIndentGuides(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(g){this.$textLayer.setHighlightIndentGuides(g)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(g){this.$gutterLayer.setHighlightGutterLine(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(g){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(g){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(g){typeof g=="number"&&(g=g+"px"),this.container.style.fontSize=g,this.updateFontSize()},initialValue:12},fontFamily:{set:function(g){this.container.style.fontFamily=g,this.updateFontSize()}},maxLines:{set:function(g){this.updateFull()}},minLines:{set:function(g){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(g){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(g){g=+g||0,this.$scrollPastEnd!=g&&(this.$scrollPastEnd=g,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(g){this.$gutterLayer.$fixedWidth=!!g,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(g){this.$updateCustomScrollbar(g)},initialValue:!1},theme:{set:function(g){this.setTheme(g)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),t.VirtualRenderer=D});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var o=e("../lib/oop"),h=e("../lib/net"),a=e("../lib/event_emitter").EventEmitter,r=e("../config");function l(f){var p="importScripts('"+h.qualifyURL(f)+"');";try{return new Blob([p],{type:"application/javascript"})}catch{var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,c=new d;return c.append(p),c.getBlob("application/javascript")}}function u(f){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(r.get("loadWorkerFromBlob")){var p=l(f),d=window.URL||window.webkitURL,c=d.createObjectURL(p);return new Worker(c)}return new Worker(f)}var i=function(f){f.postMessage||(f=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=f,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,a),this.$createWorkerFromOldConfig=function(f,p,d,c,_){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),r.get("packaged")||!e.toUrl)c=c||r.moduleUrl(p,"worker");else{var m=this.$normalizePath;c=c||m(e.toUrl("ace/worker/worker.js",null,"_"));var v={};f.forEach(function(y){v[y]=m(e.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=u(c),_&&this.send("importScripts",_),this.$worker.postMessage({init:!0,tlns:v,module:p,classname:d}),this.$worker},this.onMessage=function(f){var p=f.data;switch(p.type){case"event":this._signal(p.name,{data:p.data});break;case"call":var d=this.callbacks[p.id];d&&(d(p.data),delete this.callbacks[p.id]);break;case"error":this.reportError(p.data);break;case"log":window.console&&console.log&&console.log.apply(console,p.data);break}},this.reportError=function(f){window.console&&console.error&&console.error(f)},this.$normalizePath=function(f){return h.qualifyURL(f)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(f){f.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(f,p){this.$worker.postMessage({command:f,args:p})},this.call=function(f,p,d){if(d){var c=this.callbackId++;this.callbacks[c]=d,p.push(c)}this.send(f,p)},this.emit=function(f,p){try{p.data&&p.data.err&&(p.data.err={message:p.data.err.message,stack:p.data.err.stack,code:p.data.err.code}),this.$worker&&this.$worker.postMessage({event:f,data:{data:p.data}})}catch(d){console.error(d.stack)}},this.attachToDocument=function(f){this.$doc&&this.terminate(),this.$doc=f,this.call("setValue",[f.getValue()]),f.on("change",this.changeListener,!0)},this.changeListener=function(f){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),f.action=="insert"?this.deltaQueue.push(f.start,f.lines):this.deltaQueue.push(f.start,f.end)},this.$sendDeltaQueue=function(){var f=this.deltaQueue;f&&(this.deltaQueue=null,f.length>50&&f.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:f}))}}).call(i.prototype);var s=function(f,p,d){var c=null,_=!1,m=Object.create(a),v=[],y=new i({messageBuffer:v,terminate:function(){},postMessage:function(S){v.push(S),c&&(_?setTimeout(C):C())}});y.setEmitSync=function(S){_=S};var C=function(){var S=v.shift();S.command?c[S.command].apply(c,S.args):S.event&&m._signal(S.event,S.data)};return m.postMessage=function(S){y.onMessage({data:S})},m.callback=function(S,D){this.postMessage({type:"call",id:D,data:S})},m.emit=function(S,D){this.postMessage({type:"event",name:S,data:D})},r.loadModule(["worker",p],function(S){for(c=new S[d](m);v.length;)C()}),y};t.UIWorkerClient=s,t.WorkerClient=i,t.createWorker=u});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var o=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,a=e("./lib/oop"),r=function(){function l(u,i,s,f,p,d){var c=this;this.length=i,this.session=u,this.doc=u.getDocument(),this.mainClass=p,this.othersClass=d,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=f,this.$onCursorChange=function(){setTimeout(function(){c.onCursorChange()})},this.$pos=s;var _=u.getUndoManager().$undoStack||u.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=_.length,this.setup(),u.selection.on("changeCursor",this.$onCursorChange)}return l.prototype.setup=function(){var u=this,i=this.doc,s=this.session;this.selectionBefore=s.selection.toJSON(),s.selection.inMultiSelectMode&&s.selection.toSingleRange(),this.pos=i.createAnchor(this.$pos.row,this.$pos.column);var f=this.pos;f.$insertRight=!0,f.detach(),f.markerId=s.addMarker(new o(f.row,f.column,f.row,f.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(p){var d=i.createAnchor(p.row,p.column);d.$insertRight=!0,d.detach(),u.others.push(d)}),s.setUndoSelect(!1)},l.prototype.showOtherMarkers=function(){if(!this.othersActive){var u=this.session,i=this;this.othersActive=!0,this.others.forEach(function(s){s.markerId=u.addMarker(new o(s.row,s.column,s.row,s.column+i.length),i.othersClass,null,!1)})}},l.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var u=0;u<this.others.length;u++)this.session.removeMarker(this.others[u].markerId)}},l.prototype.onUpdate=function(u){if(this.$updating)return this.updateAnchors(u);var i=u;if(i.start.row===i.end.row&&i.start.row===this.pos.row){this.$updating=!0;var s=u.action==="insert"?i.end.column-i.start.column:i.start.column-i.end.column,f=i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1,p=i.start.column-this.pos.column;if(this.updateAnchors(u),f&&(this.length+=s),f&&!this.session.$fromUndo){if(u.action==="insert")for(var d=this.others.length-1;d>=0;d--){var c=this.others[d],_={row:c.row,column:c.column+p};this.doc.insertMergedLines(_,u.lines)}else if(u.action==="remove")for(var d=this.others.length-1;d>=0;d--){var c=this.others[d],_={row:c.row,column:c.column+p};this.doc.remove(new o(_.row,_.column,_.row,_.column-s))}}this.$updating=!1,this.updateMarkers()}},l.prototype.updateAnchors=function(u){this.pos.onChange(u);for(var i=this.others.length;i--;)this.others[i].onChange(u);this.updateMarkers()},l.prototype.updateMarkers=function(){if(!this.$updating){var u=this,i=this.session,s=function(p,d){i.removeMarker(p.markerId),p.markerId=i.addMarker(new o(p.row,p.column,p.row,p.column+u.length),d,null,!1)};s(this.pos,this.mainClass);for(var f=this.others.length;f--;)s(this.others[f],this.othersClass)}},l.prototype.onCursorChange=function(u){if(!(this.$updating||!this.session)){var i=this.session.selection.getCursor();i.row===this.pos.row&&i.column>=this.pos.column&&i.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",u)):(this.hideOtherMarkers(),this._emit("cursorLeave",u))}},l.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},l.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var u=this.session.getUndoManager(),i=(u.$undoStack||u.$undostack).length-this.$undoStackDepth,s=0;s<i;s++)u.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},l}();a.implement(r.prototype,h),t.PlaceHolder=r});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var o=e("../lib/event"),h=e("../lib/useragent");function a(l,u){return l.row==u.row&&l.column==u.column}function r(l){var u=l.domEvent,i=u.altKey,s=u.shiftKey,f=u.ctrlKey,p=l.getAccelKey(),d=l.getButton();if(f&&h.isMac&&(d=u.button),l.editor.inMultiSelectMode&&d==2){l.editor.textInput.onContextMenu(l.domEvent);return}if(!f&&!i&&!p){d===0&&l.editor.inMultiSelectMode&&l.editor.exitMultiSelectMode();return}if(d===0){var c=l.editor,_=c.selection,m=c.inMultiSelectMode,v=l.getDocumentPosition(),y=_.getCursor(),C=l.inSelection()||_.isEmpty()&&a(v,y),S=l.x,D=l.y,g=function(H){S=H.clientX,D=H.clientY},b=c.session,F=c.renderer.pixelToScreenCoordinates(S,D),E=F,T;if(c.$mouseHandler.$enableJumpToDef)f&&i||p&&i?T=s?"block":"add":i&&c.$blockSelectEnabled&&(T="block");else if(p&&!i){if(T="add",!m&&s)return}else i&&c.$blockSelectEnabled&&(T="block");if(T&&h.isMac&&u.ctrlKey&&c.$mouseHandler.cancelContextMenu(),T=="add"){if(!m&&C)return;if(!m){var M=_.toOrientedRange();c.addSelectionMarker(M)}var w=_.rangeList.rangeAtPoint(v);c.inVirtualSelectionMode=!0,s&&(w=null,M=_.ranges[0]||M,c.removeSelectionMarker(M)),c.once("mouseup",function(){var H=_.toOrientedRange();w&&H.isEmpty()&&a(w.cursor,H.cursor)?_.substractPoint(H.cursor):(s?_.substractPoint(M.cursor):M&&(c.removeSelectionMarker(M),_.addRange(M)),_.addRange(H)),c.inVirtualSelectionMode=!1})}else if(T=="block"){l.stop(),c.inVirtualSelectionMode=!0;var x,L=[],R=function(){var H=c.renderer.pixelToScreenCoordinates(S,D),P=b.screenToDocumentPosition(H.row,H.column,H.offsetX);a(E,H)&&a(P,_.lead)||(E=H,c.selection.moveToPosition(P),c.renderer.scrollCursorIntoView(),c.removeSelectionMarkers(L),L=_.rectangularRangeBlock(E,F),c.$mouseHandler.$clickSelection&&L.length==1&&L[0].isEmpty()&&(L[0]=c.$mouseHandler.$clickSelection.clone()),L.forEach(c.addSelectionMarker,c),c.updateSelectionMarkers())};m&&!p?_.toSingleRange():!m&&p&&(x=_.toOrientedRange(),c.addSelectionMarker(x)),s?F=b.documentToScreenPosition(_.lead):_.moveToPosition(v),E={row:-1,column:-1};var A=function(H){R(),clearInterval($),c.removeSelectionMarkers(L),L.length||(L=[_.toOrientedRange()]),x&&(c.removeSelectionMarker(x),_.toSingleRange(x));for(var P=0;P<L.length;P++)_.addRange(L[P]);c.inVirtualSelectionMode=!1,c.$mouseHandler.$clickSelection=null},I=R;o.capture(c.container,g,A);var $=setInterval(function(){I()},20);return l.preventDefault()}}}t.onMouseDown=r});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(h){h.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(h){h.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(h){h.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(h){h.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(h){h.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(h){h.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(h){h.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(h){h.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(h){h.multiSelect.rangeCount>1?h.multiSelect.joinSelections():h.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(h){h.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(h){h.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(h){h.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(h){h.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(h){return h&&h.inMultiSelectMode}}];var o=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new o(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var o=e("./range_list").RangeList,h=e("./range").Range,a=e("./selection").Selection,r=e("./mouse/multi_select_handler").onMouseDown,l=e("./lib/event"),u=e("./lib/lang"),i=e("./commands/multi_select_commands");t.commands=i.defaultCommands.concat(i.multiSelectCommands);var s=e("./search").Search,f=new s;function p(y,C,S){return f.$options.wrap=!0,f.$options.needle=C,f.$options.backwards=S==-1,f.find(y)}var d=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(d.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,C){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),C||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}y.cursor||(y.cursor=y.end);var D=this.rangeList.add(y);return this.$onAddRange(y),D.length&&this.$onRemoveRange(D),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),C||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var C=this.rangeList.removeAll();C.length&&this.$onRemoveRange(C),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var C=this.rangeList.substractPoint(y);if(C)return this.$onRemoveRange(C),C[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var C=this.rangeList.ranges.pop();y.push(C),this.rangeCount=0}for(var S=y.length;S--;){var D=this.ranges.indexOf(y[S]);this.ranges.splice(D,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),C=C||this.ranges[0],C&&!C.isEqual(this.getRange())&&this.fromOrientedRange(C)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new o,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],C=[],S=0;S<y.length;S++){var D=y[S],g=D.start.row,b=D.end.row;if(g===b)C.push(D.clone());else{for(C.push(new h(g,D.start.column,g,this.session.getLine(g).length));++g<b;)C.push(this.getLineRange(g,!0));C.push(new h(b,0,b,D.end.column))}S==0&&!this.isBackwards()&&(C=C.reverse())}this.toSingleRange();for(var S=C.length;S--;)this.addRange(C[S])},this.joinSelections=function(){var y=this.rangeList.ranges,C=y[y.length-1],S=h.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(S,C.cursor==C.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,C=y[y.length-1],S=h.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(S,C.cursor==C.start)}else{var D=this.session.documentToScreenPosition(this.cursor),g=this.session.documentToScreenPosition(this.anchor),b=this.rectangularRangeBlock(D,g);b.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,C,S){var D=[],g=y.column<C.column;if(g)var b=y.column,F=C.column,E=y.offsetX,T=C.offsetX;else var b=C.column,F=y.column,E=C.offsetX,T=y.offsetX;var M=y.row<C.row;if(M)var w=y.row,x=C.row;else var w=C.row,x=y.row;b<0&&(b=0),w<0&&(w=0),w==x&&(S=!0);for(var L,R=w;R<=x;R++){var A=h.fromPoints(this.session.screenToDocumentPosition(R,b,E),this.session.screenToDocumentPosition(R,F,T));if(A.isEmpty()){if(L&&_(A.end,L))break;L=A.end}A.cursor=g?A.start:A.end,D.push(A)}if(M&&D.reverse(),!S){for(var I=D.length-1;D[I].isEmpty()&&I>0;)I--;if(I>0)for(var $=0;D[$].isEmpty();)$++;for(var H=I;H>=$;H--)D[H].isEmpty()&&D.splice(H,1)}return D}}.call(a.prototype);var c=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var C=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",C),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var C=this.session.$selectionMarkers.indexOf(y);C!=-1&&this.session.$selectionMarkers.splice(C,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var C=this.session.$selectionMarkers,S=y.length;S--;){var D=y[S];if(D.marker){this.session.removeMarker(D.marker);var g=C.indexOf(D);g!=-1&&C.splice(g,1)}}this.session.selectionMarkerCount=C.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(i.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(i.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var C=y.command,S=y.editor;if(S.multiSelect){if(C.multiSelectAction)C.multiSelectAction=="forEach"?D=S.forEachSelection(C,y.args):C.multiSelectAction=="forEachLine"?D=S.forEachSelection(C,y.args,!0):C.multiSelectAction=="single"?(S.exitMultiSelectMode(),D=C.exec(S,y.args||{})):D=C.multiSelectAction(S,y.args||{});else{var D=C.exec(S,y.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return D}},this.forEachSelection=function(y,C,S){if(!this.inVirtualSelectionMode){var D=S&&S.keepOrder,g=S==!0||S&&S.$byLines,b=this.session,F=this.selection,E=F.rangeList,T=(D?F:E).ranges,M;if(!T.length)return y.exec?y.exec(this,C||{}):y(this,C||{});var w=F._eventRegistry;F._eventRegistry={};var x=new a(b);this.inVirtualSelectionMode=!0;for(var L=T.length;L--;){if(g)for(;L>0&&T[L].start.row==T[L-1].end.row;)L--;x.fromOrientedRange(T[L]),x.index=L,this.selection=b.selection=x;var R=y.exec?y.exec(this,C||{}):y(this,C||{});!M&&R!==void 0&&(M=R),x.toOrientedRange(T[L])}x.detach(),this.selection=b.selection=F,this.inVirtualSelectionMode=!1,F._eventRegistry=w,F.mergeOverlappingRanges(),F.ranges[0]&&F.fromOrientedRange(F.ranges[0]);var A=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),A&&A.from==A.to&&this.renderer.animateScrolling(A.from),M}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var C=this.multiSelect.rangeList.ranges,S=[],D=0;D<C.length;D++)S.push(this.session.getTextRange(C[D]));var g=this.session.getDocument().getNewLineCharacter();y=S.join(g),y.length==(S.length-1)*g.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,C){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&C==this.multiSelect.anchor)return;var D=C==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;D.row!=C.row||this.session.$clipPositionToDocument(D.row,D.column).column!=C.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,C,S){if(C=C||{},C.needle=y||C.needle,C.needle==null){var D=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();C.needle=this.session.getTextRange(D)}this.$search.set(C);var g=this.$search.findAll(this.session);if(!g.length)return 0;var b=this.multiSelect;S||b.toSingleRange(g[0]);for(var F=g.length;F--;)b.addRange(g[F],!0);return D&&b.rangeList.rangeAtPoint(D.start)&&b.addRange(D,!0),g.length},this.selectMoreLines=function(y,C){var S=this.selection.toOrientedRange(),D=S.cursor==S.end,g=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(g.column=this.selection.$desiredColumn);var b=this.session.screenToDocumentPosition(g.row+y,g.column);if(S.isEmpty())var E=b;else var F=this.session.documentToScreenPosition(D?S.end:S.start),E=this.session.screenToDocumentPosition(F.row+y,F.column);if(D){var T=h.fromPoints(b,E);T.cursor=T.start}else{var T=h.fromPoints(E,b);T.cursor=T.end}if(T.desiredColumn=g.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(C)var M=S.cursor;this.selection.addRange(T),M&&this.selection.substractPoint(M)},this.transposeSelections=function(y){for(var C=this.session,S=C.multiSelect,D=S.ranges,g=D.length;g--;){var b=D[g];if(b.isEmpty()){var F=C.getWordRange(b.start.row,b.start.column);b.start.row=F.start.row,b.start.column=F.start.column,b.end.row=F.end.row,b.end.column=F.end.column}}S.mergeOverlappingRanges();for(var E=[],g=D.length;g--;){var b=D[g];E.unshift(C.getTextRange(b))}y<0?E.unshift(E.pop()):E.push(E.shift());for(var g=D.length;g--;){var b=D[g],T=b.clone();C.replace(b,E[g]),b.start.row=T.start.row,b.start.column=T.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(y,C,S){var D=this.session,g=D.multiSelect,b=g.toOrientedRange();if(!(b.isEmpty()&&(b=D.getWordRange(b.start.row,b.start.column),b.cursor=y==-1?b.start:b.end,this.multiSelect.addRange(b),S))){var F=D.getTextRange(b),E=p(D,F,y);E&&(E.cursor=y==-1?E.start:E.end,this.session.unfold(E),this.multiSelect.addRange(E),this.renderer.scrollCursorIntoView(null,.5)),C&&this.multiSelect.substractPoint(b.cursor)}},this.alignCursors=function(){var y=this.session,C=y.multiSelect,S=C.ranges,D=-1,g=S.filter(function(I){if(I.cursor.row==D)return!0;D=I.cursor.row});if(!S.length||g.length==S.length-1){var b=this.selection.getRange(),F=b.start.row,E=b.end.row,T=F==E;if(T){var M=this.session.getLength(),w;do w=this.session.getLine(E);while(/[=:]/.test(w)&&++E<M);do w=this.session.getLine(F);while(/[=:]/.test(w)&&--F>0);F<0&&(F=0),E>=M&&(E=M-1)}var x=this.session.removeFullLines(F,E);x=this.$reAlignText(x,T),this.session.insert({row:F,column:0},x.join(`
`)+`
`),T||(b.start.column=0,b.end.column=x[x.length-1].length),this.selection.setRange(b)}else{g.forEach(function(I){C.substractPoint(I.cursor)});var L=0,R=1/0,A=S.map(function(I){var $=I.cursor,H=y.getLine($.row),P=H.substr($.column).search(/\S/g);return P==-1&&(P=0),$.column>L&&(L=$.column),P<R&&(R=P),P});S.forEach(function(I,$){var H=I.cursor,P=L-H.column,q=A[$]-R;P>q?y.insert(H,u.stringRepeat(" ",P-q)):y.remove(new h(H.row,H.column,H.row,H.column-P+q)),I.start.column=I.end.column=L,I.start.row=I.end.row=H.row,I.cursor=I.end}),C.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,C){var S=!0,D=!0,g,b,F;return y.map(function(x){var L=x.match(/(\s*)(.*?)(\s*)([=:].*)/);return L?g==null?(g=L[1].length,b=L[2].length,F=L[3].length,L):(g+b+F!=L[1].length+L[2].length+L[3].length&&(D=!1),g!=L[1].length&&(S=!1),g>L[1].length&&(g=L[1].length),b<L[2].length&&(b=L[2].length),F>L[3].length&&(F=L[3].length),L):[x]}).map(C?T:S?D?M:T:w);function E(x){return u.stringRepeat(" ",x)}function T(x){return x[2]?E(g)+x[2]+E(b-x[2].length+F)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function M(x){return x[2]?E(g+b-x[2].length)+x[2]+E(F)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function w(x){return x[2]?E(g)+x[2]+E(F)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}}}).call(c.prototype);function _(y,C){return y.row==C.row&&y.column==C.column}t.onSessionChange=function(y){var C=y.session;C&&!C.multiSelect&&(C.$selectionMarkers=[],C.selection.$initRangeList(),C.multiSelect=C.selection),this.multiSelect=C&&C.multiSelect;var S=y.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),C&&(C.multiSelect.on("addRange",this.$onAddRange),C.multiSelect.on("removeRange",this.$onRemoveRange),C.multiSelect.on("multiSelect",this.$onMultiSelect),C.multiSelect.on("singleSelect",this.$onSingleSelect),C.multiSelect.lead.on("change",this.$checkMultiselectChange),C.multiSelect.anchor.on("change",this.$checkMultiselectChange)),C&&this.inMultiSelectMode!=C.selection.inMultiSelectMode&&(C.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function m(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=t.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",r),y.commands.addCommands(i.defaultCommands),v(y))}function v(y){if(!y.textInput)return;var C=y.textInput.getElement(),S=!1;l.addListener(C,"keydown",function(g){var b=g.keyCode==18&&!(g.ctrlKey||g.shiftKey||g.metaKey);y.$blockSelectEnabled&&b?S||(y.renderer.setMouseCursor("crosshair"),S=!0):S&&D()},y),l.addListener(C,"keyup",D,y),l.addListener(C,"blur",D,y);function D(g){S&&(y.renderer.setMouseCursor(""),S=!1)}}t.MultiSelect=m,e("./config").defineOptions(c.prototype,"editor",{enableMultiselect:{set:function(y){m(this),y?this.on("mousedown",r):this.off("mousedown",r)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var o=e("../../range").Range,h=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(a,r,l){var u=a.getLine(l);return this.foldingStartMarker.test(u)?"start":r=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(u)?"end":""},this.getFoldWidgetRange=function(a,r,l){return null},this.indentationBlock=function(a,r,l){var u=/\S/,i=a.getLine(r),s=i.search(u);if(s!=-1){for(var f=l||i.length,p=a.getLength(),d=r,c=r;++r<p;){var _=a.getLine(r).search(u);if(_!=-1){if(_<=s){var m=a.getTokenAt(r,0);if(!m||m.type!=="string")break}c=r}}if(c>d){var v=a.getLine(c).length;return new o(d,f,c,v)}}},this.openingBracketBlock=function(a,r,l,u,i){var s={row:l,column:u+1},f=a.$findClosingBracket(r,s,i);if(f){var p=a.foldWidgets[f.row];return p==null&&(p=a.getFoldWidget(f.row)),p=="start"&&f.row>s.row&&(f.row--,f.column=a.getLine(f.row).length),o.fromPoints(s,f)}},this.closingBracketBlock=function(a,r,l,u,i){var s={row:l,column:u},f=a.$findOpeningBracket(r,s);if(f)return f.column++,s.column--,o.fromPoints(f,s)}}).call(h.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,n){"use strict";var o=e("../line_widgets").LineWidgets,h=e("../lib/dom"),a=e("../range").Range,r=e("../config").nls;function l(i,s,f){for(var p=0,d=i.length-1;p<=d;){var c=p+d>>1,_=f(s,i[c]);if(_>0)p=c+1;else if(_<0)d=c-1;else return c}return-(p+1)}function u(i,s,f){var p=i.getAnnotations().sort(a.comparePoints);if(p.length){var d=l(p,{row:s,column:-1},a.comparePoints);d<0&&(d=-d-1),d>=p.length?d=f>0?0:p.length-1:d===0&&f<0&&(d=p.length-1);var c=p[d];if(!(!c||!f)){if(c.row===s){do c=p[d+=f];while(c&&c.row===s);if(!c)return p.slice()}var _=[];s=c.row;do _[f<0?"unshift":"push"](c),c=p[d+=f];while(c&&c.row==s);return _.length&&_}}}t.showErrorMarker=function(i,s){var f=i.session;f.widgetManager||(f.widgetManager=new o(f),f.widgetManager.attach(i));var p=i.getCursorPosition(),d=p.row,c=f.widgetManager.getWidgetsAtRow(d).filter(function(b){return b.type=="errorMarker"})[0];c?c.destroy():d-=s;var _=u(f,d,s),m;if(_){var v=_[0];p.column=(v.pos&&typeof v.column!="number"?v.pos.sc:v.column)||0,p.row=v.row,m=i.renderer.$gutterLayer.$annotations[p.row]}else{if(c)return;m={text:[r("Looks good!")],className:"ace_ok"}}i.session.unfold(p.row),i.selection.moveToPosition(p);var y={row:p.row,fixedWidth:!0,coverGutter:!0,el:h.createElement("div"),type:"errorMarker"},C=y.el.appendChild(h.createElement("div")),S=y.el.appendChild(h.createElement("div"));S.className="error_widget_arrow "+m.className;var D=i.renderer.$cursorLayer.getPixelPosition(p).left;S.style.left=D+i.renderer.gutterWidth-5+"px",y.el.className="error_widget_wrapper",C.className="error_widget "+m.className,C.innerHTML=m.text.join("<br>"),C.appendChild(h.createElement("div"));var g=function(b,F,E){if(F===0&&(E==="esc"||E==="return"))return y.destroy(),{command:"null"}};y.destroy=function(){i.$mouseHandler.isMousePressed||(i.keyBinding.removeKeyboardHandler(g),f.widgetManager.removeLineWidget(y),i.off("changeSelection",y.destroy),i.off("changeSession",y.destroy),i.off("mouseup",y.destroy),i.off("change",y.destroy))},i.keyBinding.addKeyboardHandler(g),i.on("changeSelection",y.destroy),i.on("changeSession",y.destroy),i.on("mouseup",y.destroy),i.on("change",y.destroy),i.session.widgetManager.addLineWidget(y),y.el.onmousedown=i.focus.bind(i),i.renderer.scrollCursorIntoView(null,.5,{bottom:y.el.offsetHeight})},h.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var o=e("./lib/dom"),h=e("./range").Range,a=e("./editor").Editor,r=e("./edit_session").EditSession,l=e("./undomanager").UndoManager,u=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(i,s){if(typeof i=="string"){var f=i;if(i=document.getElementById(f),!i)throw new Error("ace.edit can't find div #"+f)}if(i&&i.env&&i.env.editor instanceof a)return i.env.editor;var p="";if(i&&/input|textarea/i.test(i.tagName)){var d=i;p=d.value,i=o.createElement("pre"),d.parentNode.replaceChild(i,d)}else i&&(p=i.textContent,i.innerHTML="");var c=t.createEditSession(p),_=new a(new u(i),c,s),m={document:c,editor:_,onResize:_.resize.bind(_,null)};return d&&(m.textarea=d),_.on("destroy",function(){m.editor.container.env=null}),_.container.env=_.env=m,_},t.createEditSession=function(i,s){var f=new r(i,s);return f.setUndoManager(new l),f},t.Range=h,t.Editor=a,t.EditSession=r,t.UndoManager=l,t.VirtualRenderer=u,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var n in e)e.hasOwnProperty(n)&&(t.ace[n]=e[n]);t.ace.default=t.ace,typeof qg=="object"&&typeof mN=="object"&&qg&&(qg.exports=t.ace)})})()});var $N=Tt(RN=>{"use strict";RN.supports=function(...t){let n=t.reduce((o,h)=>Object.assign(o,h),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}});var Ra=Tt((t7e,HN)=>{"use strict";HN.exports=class extends Error{constructor(t,n){super(t||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var kN=Tt(Qg=>{"use strict";Qg.byteLength=yte;Qg.toByteArray=Cte;Qg.fromByteArray=Ste;var _i=[],sa=[],gte=typeof Uint8Array<"u"?Uint8Array:Array,f1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Bc=0,ON=f1.length;Bc<ON;++Bc)_i[Bc]=f1[Bc],sa[f1.charCodeAt(Bc)]=Bc;var Bc,ON;sa[45]=62;sa[95]=63;function PN(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var o=n===t?0:4-n%4;return[n,o]}function yte(e){var t=PN(e),n=t[0],o=t[1];return(n+o)*3/4-o}function Dte(e,t,n){return(t+n)*3/4-n}function Cte(e){var t,n=PN(e),o=n[0],h=n[1],a=new gte(Dte(e,o,h)),r=0,l=h>0?o-4:o,u;for(u=0;u<l;u+=4)t=sa[e.charCodeAt(u)]<<18|sa[e.charCodeAt(u+1)]<<12|sa[e.charCodeAt(u+2)]<<6|sa[e.charCodeAt(u+3)],a[r++]=t>>16&255,a[r++]=t>>8&255,a[r++]=t&255;return h===2&&(t=sa[e.charCodeAt(u)]<<2|sa[e.charCodeAt(u+1)]>>4,a[r++]=t&255),h===1&&(t=sa[e.charCodeAt(u)]<<10|sa[e.charCodeAt(u+1)]<<4|sa[e.charCodeAt(u+2)]>>2,a[r++]=t>>8&255,a[r++]=t&255),a}function bte(e){return _i[e>>18&63]+_i[e>>12&63]+_i[e>>6&63]+_i[e&63]}function wte(e,t,n){for(var o,h=[],a=t;a<n;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),h.push(bte(o));return h.join("")}function Ste(e){for(var t,n=e.length,o=n%3,h=[],a=16383,r=0,l=n-o;r<l;r+=a)h.push(wte(e,r,r+a>l?l:r+a));return o===1?(t=e[n-1],h.push(_i[t>>2]+_i[t<<4&63]+"==")):o===2&&(t=(e[n-2]<<8)+e[n-1],h.push(_i[t>>10]+_i[t>>4&63]+_i[t<<2&63]+"=")),h.join("")}});var NN=Tt(d1=>{d1.read=function(e,t,n,o,h){var a,r,l=h*8-o-1,u=(1<<l)-1,i=u>>1,s=-7,f=n?h-1:0,p=n?-1:1,d=e[t+f];for(f+=p,a=d&(1<<-s)-1,d>>=-s,s+=l;s>0;a=a*256+e[t+f],f+=p,s-=8);for(r=a&(1<<-s)-1,a>>=-s,s+=o;s>0;r=r*256+e[t+f],f+=p,s-=8);if(a===0)a=1-i;else{if(a===u)return r?NaN:(d?-1:1)*(1/0);r=r+Math.pow(2,o),a=a-i}return(d?-1:1)*r*Math.pow(2,a-o)};d1.write=function(e,t,n,o,h,a){var r,l,u,i=a*8-h-1,s=(1<<i)-1,f=s>>1,p=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=o?0:a-1,c=o?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,r=s):(r=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-r))<1&&(r--,u*=2),r+f>=1?t+=p/u:t+=p*Math.pow(2,1-f),t*u>=2&&(r++,u/=2),r+f>=s?(l=0,r=s):r+f>=1?(l=(t*u-1)*Math.pow(2,h),r=r+f):(l=t*Math.pow(2,f-1)*Math.pow(2,h),r=0));h>=8;e[n+d]=l&255,d+=c,l/=256,h-=8);for(r=r<<h|l,i+=h;i>0;e[n+d]=r&255,d+=c,r/=256,i-=8);e[n+d-c]|=_*128}});var Zg=Tt(Rf=>{"use strict";var p1=kN(),Af=NN(),BN=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Rf.Buffer=re;Rf.SlowBuffer=Lte;Rf.INSPECT_MAX_BYTES=50;var Xg=2147483647;Rf.kMaxLength=Xg;re.TYPED_ARRAY_SUPPORT=Ete();!re.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Ete(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(re.prototype,"parent",{enumerable:!0,get:function(){if(re.isBuffer(this))return this.buffer}});Object.defineProperty(re.prototype,"offset",{enumerable:!0,get:function(){if(re.isBuffer(this))return this.byteOffset}});function iu(e){if(e>Xg)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,re.prototype),t}function re(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v1(e)}return VN(e,t,n)}re.poolSize=8192;function VN(e,t,n){if(typeof e=="string")return Mte(e,t);if(ArrayBuffer.isView(e))return Fte(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(mi(e,ArrayBuffer)||e&&mi(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(mi(e,SharedArrayBuffer)||e&&mi(e.buffer,SharedArrayBuffer)))return _1(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let o=e.valueOf&&e.valueOf();if(o!=null&&o!==e)return re.from(o,t,n);let h=xte(e);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return re.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}re.from=function(e,t,n){return VN(e,t,n)};Object.setPrototypeOf(re.prototype,Uint8Array.prototype);Object.setPrototypeOf(re,Uint8Array);function zN(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Tte(e,t,n){return zN(e),e<=0?iu(e):t!==void 0?typeof n=="string"?iu(e).fill(t,n):iu(e).fill(t):iu(e)}re.alloc=function(e,t,n){return Tte(e,t,n)};function v1(e){return zN(e),iu(e<0?0:g1(e)|0)}re.allocUnsafe=function(e){return v1(e)};re.allocUnsafeSlow=function(e){return v1(e)};function Mte(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!re.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=GN(e,t)|0,o=iu(n),h=o.write(e,t);return h!==n&&(o=o.slice(0,h)),o}function h1(e){let t=e.length<0?0:g1(e.length)|0,n=iu(t);for(let o=0;o<t;o+=1)n[o]=e[o]&255;return n}function Fte(e){if(mi(e,Uint8Array)){let t=new Uint8Array(e);return _1(t.buffer,t.byteOffset,t.byteLength)}return h1(e)}function _1(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let o;return t===void 0&&n===void 0?o=new Uint8Array(e):n===void 0?o=new Uint8Array(e,t):o=new Uint8Array(e,t,n),Object.setPrototypeOf(o,re.prototype),o}function xte(e){if(re.isBuffer(e)){let t=g1(e.length)|0,n=iu(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||D1(e.length)?iu(0):h1(e);if(e.type==="Buffer"&&Array.isArray(e.data))return h1(e.data)}function g1(e){if(e>=Xg)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Xg.toString(16)+" bytes");return e|0}function Lte(e){return+e!=e&&(e=0),re.alloc(+e)}re.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==re.prototype};re.compare=function(t,n){if(mi(t,Uint8Array)&&(t=re.from(t,t.offset,t.byteLength)),mi(n,Uint8Array)&&(n=re.from(n,n.offset,n.byteLength)),!re.isBuffer(t)||!re.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let o=t.length,h=n.length;for(let a=0,r=Math.min(o,h);a<r;++a)if(t[a]!==n[a]){o=t[a],h=n[a];break}return o<h?-1:h<o?1:0};re.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};re.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return re.alloc(0);let o;if(n===void 0)for(n=0,o=0;o<t.length;++o)n+=t[o].length;let h=re.allocUnsafe(n),a=0;for(o=0;o<t.length;++o){let r=t[o];if(mi(r,Uint8Array))a+r.length>h.length?(re.isBuffer(r)||(r=re.from(r)),r.copy(h,a)):Uint8Array.prototype.set.call(h,r,a);else if(re.isBuffer(r))r.copy(h,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=r.length}return h};function GN(e,t){if(re.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||mi(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,o=arguments.length>2&&arguments[2]===!0;if(!o&&n===0)return 0;let h=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return m1(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return tB(e).length;default:if(h)return o?-1:m1(e).length;t=(""+t).toLowerCase(),h=!0}}re.byteLength=GN;function Ate(e,t,n){let o=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Wte(this,t,n);case"utf8":case"utf-8":return jN(this,t,n);case"ascii":return Nte(this,t,n);case"latin1":case"binary":return Bte(this,t,n);case"base64":return Pte(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ute(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}re.prototype._isBuffer=!0;function Wc(e,t,n){let o=e[t];e[t]=e[n],e[n]=o}re.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)Wc(this,n,n+1);return this};re.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)Wc(this,n,n+3),Wc(this,n+1,n+2);return this};re.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)Wc(this,n,n+7),Wc(this,n+1,n+6),Wc(this,n+2,n+5),Wc(this,n+3,n+4);return this};re.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?jN(this,0,t):Ate.apply(this,arguments)};re.prototype.toLocaleString=re.prototype.toString;re.prototype.equals=function(t){if(!re.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:re.compare(this,t)===0};re.prototype.inspect=function(){let t="",n=Rf.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};BN&&(re.prototype[BN]=re.prototype.inspect);re.prototype.compare=function(t,n,o,h,a){if(mi(t,Uint8Array)&&(t=re.from(t,t.offset,t.byteLength)),!re.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),o===void 0&&(o=t?t.length:0),h===void 0&&(h=0),a===void 0&&(a=this.length),n<0||o>t.length||h<0||a>this.length)throw new RangeError("out of range index");if(h>=a&&n>=o)return 0;if(h>=a)return-1;if(n>=o)return 1;if(n>>>=0,o>>>=0,h>>>=0,a>>>=0,this===t)return 0;let r=a-h,l=o-n,u=Math.min(r,l),i=this.slice(h,a),s=t.slice(n,o);for(let f=0;f<u;++f)if(i[f]!==s[f]){r=i[f],l=s[f];break}return r<l?-1:l<r?1:0};function JN(e,t,n,o,h){if(e.length===0)return-1;if(typeof n=="string"?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,D1(n)&&(n=h?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(h)return-1;n=e.length-1}else if(n<0)if(h)n=0;else return-1;if(typeof t=="string"&&(t=re.from(t,o)),re.isBuffer(t))return t.length===0?-1:WN(e,t,n,o,h);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):WN(e,[t],n,o,h);throw new TypeError("val must be string, number or Buffer")}function WN(e,t,n,o,h){let a=1,r=e.length,l=t.length;if(o!==void 0&&(o=String(o).toLowerCase(),o==="ucs2"||o==="ucs-2"||o==="utf16le"||o==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,r/=2,l/=2,n/=2}function u(s,f){return a===1?s[f]:s.readUInt16BE(f*a)}let i;if(h){let s=-1;for(i=n;i<r;i++)if(u(e,i)===u(t,s===-1?0:i-s)){if(s===-1&&(s=i),i-s+1===l)return s*a}else s!==-1&&(i-=i-s),s=-1}else for(n+l>r&&(n=r-l),i=n;i>=0;i--){let s=!0;for(let f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){s=!1;break}if(s)return i}return-1}re.prototype.includes=function(t,n,o){return this.indexOf(t,n,o)!==-1};re.prototype.indexOf=function(t,n,o){return JN(this,t,n,o,!0)};re.prototype.lastIndexOf=function(t,n,o){return JN(this,t,n,o,!1)};function Ite(e,t,n,o){n=Number(n)||0;let h=e.length-n;o?(o=Number(o),o>h&&(o=h)):o=h;let a=t.length;o>a/2&&(o=a/2);let r;for(r=0;r<o;++r){let l=parseInt(t.substr(r*2,2),16);if(D1(l))return r;e[n+r]=l}return r}function Rte(e,t,n,o){return Yg(m1(t,e.length-n),e,n,o)}function $te(e,t,n,o){return Yg(Gte(t),e,n,o)}function Hte(e,t,n,o){return Yg(tB(t),e,n,o)}function Ote(e,t,n,o){return Yg(Jte(t,e.length-n),e,n,o)}re.prototype.write=function(t,n,o,h){if(n===void 0)h="utf8",o=this.length,n=0;else if(o===void 0&&typeof n=="string")h=n,o=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(o)?(o=o>>>0,h===void 0&&(h="utf8")):(h=o,o=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-n;if((o===void 0||o>a)&&(o=a),t.length>0&&(o<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let r=!1;for(;;)switch(h){case"hex":return Ite(this,t,n,o);case"utf8":case"utf-8":return Rte(this,t,n,o);case"ascii":case"latin1":case"binary":return $te(this,t,n,o);case"base64":return Hte(this,t,n,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ote(this,t,n,o);default:if(r)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),r=!0}};re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Pte(e,t,n){return t===0&&n===e.length?p1.fromByteArray(e):p1.fromByteArray(e.slice(t,n))}function jN(e,t,n){n=Math.min(e.length,n);let o=[],h=t;for(;h<n;){let a=e[h],r=null,l=a>239?4:a>223?3:a>191?2:1;if(h+l<=n){let u,i,s,f;switch(l){case 1:a<128&&(r=a);break;case 2:u=e[h+1],(u&192)===128&&(f=(a&31)<<6|u&63,f>127&&(r=f));break;case 3:u=e[h+1],i=e[h+2],(u&192)===128&&(i&192)===128&&(f=(a&15)<<12|(u&63)<<6|i&63,f>2047&&(f<55296||f>57343)&&(r=f));break;case 4:u=e[h+1],i=e[h+2],s=e[h+3],(u&192)===128&&(i&192)===128&&(s&192)===128&&(f=(a&15)<<18|(u&63)<<12|(i&63)<<6|s&63,f>65535&&f<1114112&&(r=f))}}r===null?(r=65533,l=1):r>65535&&(r-=65536,o.push(r>>>10&1023|55296),r=56320|r&1023),o.push(r),h+=l}return kte(o)}var UN=4096;function kte(e){let t=e.length;if(t<=UN)return String.fromCharCode.apply(String,e);let n="",o=0;for(;o<t;)n+=String.fromCharCode.apply(String,e.slice(o,o+=UN));return n}function Nte(e,t,n){let o="";n=Math.min(e.length,n);for(let h=t;h<n;++h)o+=String.fromCharCode(e[h]&127);return o}function Bte(e,t,n){let o="";n=Math.min(e.length,n);for(let h=t;h<n;++h)o+=String.fromCharCode(e[h]);return o}function Wte(e,t,n){let o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);let h="";for(let a=t;a<n;++a)h+=jte[e[a]];return h}function Ute(e,t,n){let o=e.slice(t,n),h="";for(let a=0;a<o.length-1;a+=2)h+=String.fromCharCode(o[a]+o[a+1]*256);return h}re.prototype.slice=function(t,n){let o=this.length;t=~~t,n=n===void 0?o:~~n,t<0?(t+=o,t<0&&(t=0)):t>o&&(t=o),n<0?(n+=o,n<0&&(n=0)):n>o&&(n=o),n<t&&(n=t);let h=this.subarray(t,n);return Object.setPrototypeOf(h,re.prototype),h};function br(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}re.prototype.readUintLE=re.prototype.readUIntLE=function(t,n,o){t=t>>>0,n=n>>>0,o||br(t,n,this.length);let h=this[t],a=1,r=0;for(;++r<n&&(a*=256);)h+=this[t+r]*a;return h};re.prototype.readUintBE=re.prototype.readUIntBE=function(t,n,o){t=t>>>0,n=n>>>0,o||br(t,n,this.length);let h=this[t+--n],a=1;for(;n>0&&(a*=256);)h+=this[t+--n]*a;return h};re.prototype.readUint8=re.prototype.readUInt8=function(t,n){return t=t>>>0,n||br(t,1,this.length),this[t]};re.prototype.readUint16LE=re.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||br(t,2,this.length),this[t]|this[t+1]<<8};re.prototype.readUint16BE=re.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||br(t,2,this.length),this[t]<<8|this[t+1]};re.prototype.readUint32LE=re.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||br(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};re.prototype.readUint32BE=re.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||br(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};re.prototype.readBigUInt64LE=Ts(function(t){t=t>>>0,If(t,"offset");let n=this[t],o=this[t+7];(n===void 0||o===void 0)&&rh(t,this.length-8);let h=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,a=this[++t]+this[++t]*2**8+this[++t]*2**16+o*2**24;return BigInt(h)+(BigInt(a)<<BigInt(32))});re.prototype.readBigUInt64BE=Ts(function(t){t=t>>>0,If(t,"offset");let n=this[t],o=this[t+7];(n===void 0||o===void 0)&&rh(t,this.length-8);let h=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],a=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+o;return(BigInt(h)<<BigInt(32))+BigInt(a)});re.prototype.readIntLE=function(t,n,o){t=t>>>0,n=n>>>0,o||br(t,n,this.length);let h=this[t],a=1,r=0;for(;++r<n&&(a*=256);)h+=this[t+r]*a;return a*=128,h>=a&&(h-=Math.pow(2,8*n)),h};re.prototype.readIntBE=function(t,n,o){t=t>>>0,n=n>>>0,o||br(t,n,this.length);let h=n,a=1,r=this[t+--h];for(;h>0&&(a*=256);)r+=this[t+--h]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*n)),r};re.prototype.readInt8=function(t,n){return t=t>>>0,n||br(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};re.prototype.readInt16LE=function(t,n){t=t>>>0,n||br(t,2,this.length);let o=this[t]|this[t+1]<<8;return o&32768?o|4294901760:o};re.prototype.readInt16BE=function(t,n){t=t>>>0,n||br(t,2,this.length);let o=this[t+1]|this[t]<<8;return o&32768?o|4294901760:o};re.prototype.readInt32LE=function(t,n){return t=t>>>0,n||br(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};re.prototype.readInt32BE=function(t,n){return t=t>>>0,n||br(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};re.prototype.readBigInt64LE=Ts(function(t){t=t>>>0,If(t,"offset");let n=this[t],o=this[t+7];(n===void 0||o===void 0)&&rh(t,this.length-8);let h=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(o<<24);return(BigInt(h)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});re.prototype.readBigInt64BE=Ts(function(t){t=t>>>0,If(t,"offset");let n=this[t],o=this[t+7];(n===void 0||o===void 0)&&rh(t,this.length-8);let h=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(h)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+o)});re.prototype.readFloatLE=function(t,n){return t=t>>>0,n||br(t,4,this.length),Af.read(this,t,!0,23,4)};re.prototype.readFloatBE=function(t,n){return t=t>>>0,n||br(t,4,this.length),Af.read(this,t,!1,23,4)};re.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||br(t,8,this.length),Af.read(this,t,!0,52,8)};re.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||br(t,8,this.length),Af.read(this,t,!1,52,8)};function Eo(e,t,n,o,h,a){if(!re.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>h||t<a)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}re.prototype.writeUintLE=re.prototype.writeUIntLE=function(t,n,o,h){if(t=+t,n=n>>>0,o=o>>>0,!h){let l=Math.pow(2,8*o)-1;Eo(this,t,n,o,l,0)}let a=1,r=0;for(this[n]=t&255;++r<o&&(a*=256);)this[n+r]=t/a&255;return n+o};re.prototype.writeUintBE=re.prototype.writeUIntBE=function(t,n,o,h){if(t=+t,n=n>>>0,o=o>>>0,!h){let l=Math.pow(2,8*o)-1;Eo(this,t,n,o,l,0)}let a=o-1,r=1;for(this[n+a]=t&255;--a>=0&&(r*=256);)this[n+a]=t/r&255;return n+o};re.prototype.writeUint8=re.prototype.writeUInt8=function(t,n,o){return t=+t,n=n>>>0,o||Eo(this,t,n,1,255,0),this[n]=t&255,n+1};re.prototype.writeUint16LE=re.prototype.writeUInt16LE=function(t,n,o){return t=+t,n=n>>>0,o||Eo(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};re.prototype.writeUint16BE=re.prototype.writeUInt16BE=function(t,n,o){return t=+t,n=n>>>0,o||Eo(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};re.prototype.writeUint32LE=re.prototype.writeUInt32LE=function(t,n,o){return t=+t,n=n>>>0,o||Eo(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};re.prototype.writeUint32BE=re.prototype.writeUInt32BE=function(t,n,o){return t=+t,n=n>>>0,o||Eo(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function KN(e,t,n,o,h){eB(t,o,h,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a;let r=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=r,r=r>>8,e[n++]=r,r=r>>8,e[n++]=r,r=r>>8,e[n++]=r,n}function QN(e,t,n,o,h){eB(t,o,h,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a=a>>8,e[n+6]=a,a=a>>8,e[n+5]=a,a=a>>8,e[n+4]=a;let r=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=r,r=r>>8,e[n+2]=r,r=r>>8,e[n+1]=r,r=r>>8,e[n]=r,n+8}re.prototype.writeBigUInt64LE=Ts(function(t,n=0){return KN(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});re.prototype.writeBigUInt64BE=Ts(function(t,n=0){return QN(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});re.prototype.writeIntLE=function(t,n,o,h){if(t=+t,n=n>>>0,!h){let u=Math.pow(2,8*o-1);Eo(this,t,n,o,u-1,-u)}let a=0,r=1,l=0;for(this[n]=t&255;++a<o&&(r*=256);)t<0&&l===0&&this[n+a-1]!==0&&(l=1),this[n+a]=(t/r>>0)-l&255;return n+o};re.prototype.writeIntBE=function(t,n,o,h){if(t=+t,n=n>>>0,!h){let u=Math.pow(2,8*o-1);Eo(this,t,n,o,u-1,-u)}let a=o-1,r=1,l=0;for(this[n+a]=t&255;--a>=0&&(r*=256);)t<0&&l===0&&this[n+a+1]!==0&&(l=1),this[n+a]=(t/r>>0)-l&255;return n+o};re.prototype.writeInt8=function(t,n,o){return t=+t,n=n>>>0,o||Eo(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};re.prototype.writeInt16LE=function(t,n,o){return t=+t,n=n>>>0,o||Eo(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};re.prototype.writeInt16BE=function(t,n,o){return t=+t,n=n>>>0,o||Eo(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};re.prototype.writeInt32LE=function(t,n,o){return t=+t,n=n>>>0,o||Eo(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};re.prototype.writeInt32BE=function(t,n,o){return t=+t,n=n>>>0,o||Eo(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};re.prototype.writeBigInt64LE=Ts(function(t,n=0){return KN(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});re.prototype.writeBigInt64BE=Ts(function(t,n=0){return QN(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function XN(e,t,n,o,h,a){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function YN(e,t,n,o,h){return t=+t,n=n>>>0,h||XN(e,t,n,4,34028234663852886e22,-34028234663852886e22),Af.write(e,t,n,o,23,4),n+4}re.prototype.writeFloatLE=function(t,n,o){return YN(this,t,n,!0,o)};re.prototype.writeFloatBE=function(t,n,o){return YN(this,t,n,!1,o)};function ZN(e,t,n,o,h){return t=+t,n=n>>>0,h||XN(e,t,n,8,17976931348623157e292,-17976931348623157e292),Af.write(e,t,n,o,52,8),n+8}re.prototype.writeDoubleLE=function(t,n,o){return ZN(this,t,n,!0,o)};re.prototype.writeDoubleBE=function(t,n,o){return ZN(this,t,n,!1,o)};re.prototype.copy=function(t,n,o,h){if(!re.isBuffer(t))throw new TypeError("argument should be a Buffer");if(o||(o=0),!h&&h!==0&&(h=this.length),n>=t.length&&(n=t.length),n||(n=0),h>0&&h<o&&(h=o),h===o||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),t.length-n<h-o&&(h=t.length-n+o);let a=h-o;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,o,h):Uint8Array.prototype.set.call(t,this.subarray(o,h),n),a};re.prototype.fill=function(t,n,o,h){if(typeof t=="string"){if(typeof n=="string"?(h=n,n=0,o=this.length):typeof o=="string"&&(h=o,o=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!re.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(t.length===1){let r=t.charCodeAt(0);(h==="utf8"&&r<128||h==="latin1")&&(t=r)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<o)throw new RangeError("Out of range index");if(o<=n)return this;n=n>>>0,o=o===void 0?this.length:o>>>0,t||(t=0);let a;if(typeof t=="number")for(a=n;a<o;++a)this[a]=t;else{let r=re.isBuffer(t)?t:re.from(t,h),l=r.length;if(l===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<o-n;++a)this[a+n]=r[a%l]}return this};var Lf={};function y1(e,t,n){Lf[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}y1("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);y1("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);y1("ERR_OUT_OF_RANGE",function(e,t,n){let o=`The value of "${e}" is out of range.`,h=n;return Number.isInteger(n)&&Math.abs(n)>2**32?h=qN(String(n)):typeof n=="bigint"&&(h=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(h=qN(h)),h+="n"),o+=` It must be ${t}. Received ${h}`,o},RangeError);function qN(e){let t="",n=e.length,o=e[0]==="-"?1:0;for(;n>=o+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function qte(e,t,n){If(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&rh(t,e.length-(n+1))}function eB(e,t,n,o,h,a){if(e>n||e<t){let r=typeof t=="bigint"?"n":"",l;throw a>3?t===0||t===BigInt(0)?l=`>= 0${r} and < 2${r} ** ${(a+1)*8}${r}`:l=`>= -(2${r} ** ${(a+1)*8-1}${r}) and < 2 ** ${(a+1)*8-1}${r}`:l=`>= ${t}${r} and <= ${n}${r}`,new Lf.ERR_OUT_OF_RANGE("value",l,e)}qte(o,h,a)}function If(e,t){if(typeof e!="number")throw new Lf.ERR_INVALID_ARG_TYPE(t,"number",e)}function rh(e,t,n){throw Math.floor(e)!==e?(If(e,n),new Lf.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new Lf.ERR_BUFFER_OUT_OF_BOUNDS:new Lf.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var Vte=/[^+/0-9A-Za-z-_]/g;function zte(e){if(e=e.split("=")[0],e=e.trim().replace(Vte,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function m1(e,t){t=t||1/0;let n,o=e.length,h=null,a=[];for(let r=0;r<o;++r){if(n=e.charCodeAt(r),n>55295&&n<57344){if(!h){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(r+1===o){(t-=3)>-1&&a.push(239,191,189);continue}h=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),h=n;continue}n=(h-55296<<10|n-56320)+65536}else h&&(t-=3)>-1&&a.push(239,191,189);if(h=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return a}function Gte(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function Jte(e,t){let n,o,h,a=[];for(let r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),o=n>>8,h=n%256,a.push(h),a.push(o);return a}function tB(e){return p1.toByteArray(zte(e))}function Yg(e,t,n,o){let h;for(h=0;h<o&&!(h+n>=t.length||h>=e.length);++h)t[h+n]=e[h];return h}function mi(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function D1(e){return e!==e}var jte=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let o=n*16;for(let h=0;h<16;++h)t[o+h]=e[n]+e[h]}return t}();function Ts(e){return typeof BigInt>"u"?Kte:e}function Kte(){throw new Error("BigInt not supported")}});var b1=Tt((i7e,nB)=>{"use strict";var C1=null;nB.exports=function(){return C1===null&&(C1={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),C1}});var E1=Tt(rB=>{"use strict";var w1=Ra(),Qte=new Set(["buffer","view","utf8"]),S1=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!Qte.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new w1(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new w1(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new w1(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};rB.Encoding=S1});var x1=Tt(ey=>{"use strict";var{Buffer:M1}=Zg()||{},{Encoding:F1}=E1(),Xte=b1(),oh=class extends F1{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new ah({encode:this.encode,decode:t=>this.decode(M1.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ah=class extends F1{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new oh({encode:t=>{let n=this.encode(t);return M1.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},T1=class extends F1{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new oh({encode:t=>M1.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:t,textDecoder:n}=Xte();return new ah({encode:o=>t.encode(this.encode(o)),decode:o=>this.decode(n.decode(o)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};ey.BufferFormat=oh;ey.ViewFormat=ah;ey.UTF8Format=T1});var uB=Tt(Uc=>{"use strict";var{Buffer:Zr}=Zg()||{Buffer:{isBuffer:()=>!1}},{textEncoder:aB,textDecoder:oB}=b1()(),{BufferFormat:ih,ViewFormat:L1,UTF8Format:iB}=x1(),ty=e=>e;Uc.utf8=new iB({encode:function(e){return Zr.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?oB.decode(e):String(e)},decode:ty,name:"utf8",createViewTranscoder(){return new L1({encode:function(e){return ArrayBuffer.isView(e)?e:aB.encode(e)},decode:function(e){return oB.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new ih({encode:function(e){return Zr.isBuffer(e)?e:ArrayBuffer.isView(e)?Zr.from(e.buffer,e.byteOffset,e.byteLength):Zr.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});Uc.json=new iB({encode:JSON.stringify,decode:JSON.parse,name:"json"});Uc.buffer=new ih({encode:function(e){return Zr.isBuffer(e)?e:ArrayBuffer.isView(e)?Zr.from(e.buffer,e.byteOffset,e.byteLength):Zr.from(String(e),"utf8")},decode:ty,name:"buffer",createViewTranscoder(){return new L1({encode:function(e){return ArrayBuffer.isView(e)?e:Zr.from(String(e),"utf8")},decode:function(e){return Zr.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});Uc.view=new L1({encode:function(e){return ArrayBuffer.isView(e)?e:aB.encode(e)},decode:ty,name:"view",createBufferTranscoder(){return new ih({encode:function(e){return Zr.isBuffer(e)?e:ArrayBuffer.isView(e)?Zr.from(e.buffer,e.byteOffset,e.byteLength):Zr.from(String(e),"utf8")},decode:ty,name:`${this.name}+buffer`})}});Uc.hex=new ih({encode:function(e){return Zr.isBuffer(e)?e:Zr.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});Uc.base64=new ih({encode:function(e){return Zr.isBuffer(e)?e:Zr.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})});var lB=Tt(cB=>{"use strict";var sB=Ra(),ry=uB(),{Encoding:Yte}=E1(),{BufferFormat:Zte,ViewFormat:ene,UTF8Format:tne}=x1(),uh=Symbol("formats"),ny=Symbol("encodings"),nne=new Set(["buffer","view","utf8"]),A1=class{constructor(t){if(Array.isArray(t)){if(!t.every(n=>nne.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[ny]=new Map,this[uh]=new Set(t);for(let n in ry)try{this.encoding(n)}catch(o){if(o.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw o}}encodings(){return Array.from(new Set(this[ny].values()))}encoding(t){let n=this[ny].get(t);if(n===void 0){if(typeof t=="string"&&t!==""){if(n=ine[t],!n)throw new sB(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");n=rne(t)}let{name:o,format:h}=n;if(!this[uh].has(h))if(this[uh].has("view"))n=n.createViewTranscoder();else if(this[uh].has("buffer"))n=n.createBufferTranscoder();else if(this[uh].has("utf8"))n=n.createUTF8Transcoder();else throw new sB(`Encoding '${o}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let a of[t,o,n.name,n.commonName])this[ny].set(a,n)}return n}};cB.Transcoder=A1;function rne(e){if(e instanceof Yte)return e;let t="type"in e&&typeof e.type=="string"?e.type:void 0,n=e.name||t||`anonymous-${une++}`;switch(one(e)){case"view":return new ene({...e,name:n});case"utf8":return new tne({...e,name:n});case"buffer":return new Zte({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function one(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}var ane={binary:ry.buffer,"utf-8":ry.utf8},ine={...ry,...ane},une=0});var CB=Tt((f7e,I1)=>{"use strict";var $f=typeof Reflect=="object"?Reflect:null,fB=$f&&typeof $f.apply=="function"?$f.apply:function(t,n,o){return Function.prototype.apply.call(t,n,o)},oy;$f&&typeof $f.ownKeys=="function"?oy=$f.ownKeys:Object.getOwnPropertySymbols?oy=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:oy=function(t){return Object.getOwnPropertyNames(t)};function sne(e){console&&console.warn&&console.warn(e)}var pB=Number.isNaN||function(t){return t!==t};function an(){an.init.call(this)}I1.exports=an;I1.exports.once=dne;an.EventEmitter=an;an.prototype._events=void 0;an.prototype._eventsCount=0;an.prototype._maxListeners=void 0;var dB=10;function ay(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(an,"defaultMaxListeners",{enumerable:!0,get:function(){return dB},set:function(e){if(typeof e!="number"||e<0||pB(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");dB=e}});an.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};an.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||pB(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function hB(e){return e._maxListeners===void 0?an.defaultMaxListeners:e._maxListeners}an.prototype.getMaxListeners=function(){return hB(this)};an.prototype.emit=function(t){for(var n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);var h=t==="error",a=this._events;if(a!==void 0)h=h&&a.error===void 0;else if(!h)return!1;if(h){var r;if(n.length>0&&(r=n[0]),r instanceof Error)throw r;var l=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw l.context=r,l}var u=a[t];if(u===void 0)return!1;if(typeof u=="function")fB(u,this,n);else for(var i=u.length,s=yB(u,i),o=0;o<i;++o)fB(s[o],this,n);return!0};function _B(e,t,n,o){var h,a,r;if(ay(n),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),r=a[t]),r===void 0)r=a[t]=n,++e._eventsCount;else if(typeof r=="function"?r=a[t]=o?[n,r]:[r,n]:o?r.unshift(n):r.push(n),h=hB(e),h>0&&r.length>h&&!r.warned){r.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=r.length,sne(l)}return e}an.prototype.addListener=function(t,n){return _B(this,t,n,!1)};an.prototype.on=an.prototype.addListener;an.prototype.prependListener=function(t,n){return _B(this,t,n,!0)};function cne(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function mB(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},h=cne.bind(o);return h.listener=n,o.wrapFn=h,h}an.prototype.once=function(t,n){return ay(n),this.on(t,mB(this,t,n)),this};an.prototype.prependOnceListener=function(t,n){return ay(n),this.prependListener(t,mB(this,t,n)),this};an.prototype.removeListener=function(t,n){var o,h,a,r,l;if(ay(n),h=this._events,h===void 0)return this;if(o=h[t],o===void 0)return this;if(o===n||o.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete h[t],h.removeListener&&this.emit("removeListener",t,o.listener||n));else if(typeof o!="function"){for(a=-1,r=o.length-1;r>=0;r--)if(o[r]===n||o[r].listener===n){l=o[r].listener,a=r;break}if(a<0)return this;a===0?o.shift():lne(o,a),o.length===1&&(h[t]=o[0]),h.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};an.prototype.off=an.prototype.removeListener;an.prototype.removeAllListeners=function(t){var n,o,h;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[t]),this;if(arguments.length===0){var a=Object.keys(o),r;for(h=0;h<a.length;++h)r=a[h],r!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=o[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(h=n.length-1;h>=0;h--)this.removeListener(t,n[h]);return this};function vB(e,t,n){var o=e._events;if(o===void 0)return[];var h=o[t];return h===void 0?[]:typeof h=="function"?n?[h.listener||h]:[h]:n?fne(h):yB(h,h.length)}an.prototype.listeners=function(t){return vB(this,t,!0)};an.prototype.rawListeners=function(t){return vB(this,t,!1)};an.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):gB.call(e,t)};an.prototype.listenerCount=gB;function gB(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}an.prototype.eventNames=function(){return this._eventsCount>0?oy(this._events):[]};function yB(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}function lne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function fne(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function dne(e,t){return new Promise(function(n,o){function h(r){e.removeListener(t,a),o(r)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",h),n([].slice.call(arguments))}DB(e,t,a,{once:!0}),t!=="error"&&pne(e,h,{once:!0})})}function pne(e,t,n){typeof e.on=="function"&&DB(e,"error",t,n)}function DB(e,t,n,o){if(typeof e.on=="function")o.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function h(a){o.once&&e.removeEventListener(t,h),n(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var wB=Tt((d7e,bB)=>{bB.exports=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)});var sh=Tt(R1=>{"use strict";var SB=wB();R1.fromCallback=function(e,t){if(e===void 0){var n=new Promise(function(o,h){e=function(a,r){a?h(a):o(r)}});e[t!==void 0?t:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};R1.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(n){SB(()=>t(null,n))}).catch(function(n){SB(()=>t(n))})}});var iy=Tt($1=>{"use strict";$1.getCallback=function(e,t){return typeof e=="function"?e:t};$1.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}}});var Is=Tt(ly=>{"use strict";var{fromCallback:H1}=sh(),Bo=Ra(),{getOptions:O1,getCallback:EB}=iy(),qc=Symbol("promise"),Hf=Symbol("callback"),vi=Symbol("working"),Vc=Symbol("handleOne"),uu=Symbol("handleMany"),P1=Symbol("autoClose"),Ls=Symbol("finishWork"),gi=Symbol("returnMany"),Ms=Symbol("closing"),ch=Symbol("handleClose"),uy=Symbol("closed"),lh=Symbol("closeCallbacks"),xs=Symbol("keyEncoding"),zc=Symbol("valueEncoding"),k1=Symbol("abortOnClose"),sy=Symbol("legacy"),N1=Symbol("keys"),B1=Symbol("values"),Fs=Symbol("limit"),ca=Symbol("count"),cy=Object.freeze({}),hne=()=>{},TB=!1,fh=class{constructor(t,n,o){if(typeof t!="object"||t===null){let h=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${h}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[uy]=!1,this[lh]=[],this[vi]=!1,this[Ms]=!1,this[P1]=!1,this[Hf]=null,this[Vc]=this[Vc].bind(this),this[uu]=this[uu].bind(this),this[ch]=this[ch].bind(this),this[xs]=n[xs],this[zc]=n[zc],this[sy]=o,this[Fs]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[ca]=0,this[k1]=!!n.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[ca]}get limit(){return this[Fs]}next(t){let n;if(t===void 0)n=new Promise((o,h)=>{t=(a,r,l)=>{a?h(a):this[sy]?r===void 0&&l===void 0?o():o([r,l]):o(r)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[Ms]?this.nextTick(t,new Bo("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[vi]?this.nextTick(t,new Bo("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[vi]=!0,this[Hf]=t,this[ca]>=this[Fs]?this.nextTick(this[Vc],null):this._next(this[Vc])),n}_next(t){this.nextTick(t)}nextv(t,n,o){return o=EB(n,o),o=H1(o,qc),n=O1(n,cy),Number.isInteger(t)?(this[Ms]?this.nextTick(o,new Bo("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[vi]?this.nextTick(o,new Bo("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[Fs]<1/0&&(t=Math.min(t,this[Fs]-this[ca])),this[vi]=!0,this[Hf]=o,t<=0?this.nextTick(this[uu],null,[]):this._nextv(t,n,this[uu])),o[qc]):(this.nextTick(o,new TypeError("The first argument 'size' must be an integer")),o[qc])}_nextv(t,n,o){let h=[],a=(r,l,u)=>{if(r)return o(r);if(this[sy]?l===void 0&&u===void 0:l===void 0)return o(null,h);h.push(this[sy]?[l,u]:l),h.length===t?o(null,h):this._next(a)};this._next(a)}all(t,n){return n=EB(t,n),n=H1(n,qc),t=O1(t,cy),this[Ms]?this.nextTick(n,new Bo("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[vi]?this.nextTick(n,new Bo("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[vi]=!0,this[Hf]=n,this[P1]=!0,this[ca]>=this[Fs]?this.nextTick(this[uu],null,[]):this._all(t,this[uu])),n[qc]}_all(t,n){let o=this[ca],h=[],a=()=>{let l=this[Fs]<1/0?Math.min(1e3,this[Fs]-o):1e3;l<=0?this.nextTick(n,null,h):this._nextv(l,cy,r)},r=(l,u)=>{l?n(l):u.length===0?n(null,h):(h.push.apply(h,u),o+=u.length,a())};a()}[Ls](){let t=this[Hf];return this[k1]&&t===null?hne:(this[vi]=!1,this[Hf]=null,this[Ms]&&this._close(this[ch]),t)}[gi](t,n,o){this[P1]?this.close(t.bind(null,n,o)):t(n,o)}seek(t,n){if(n=O1(n,cy),!this[Ms]){if(this[vi])throw new Bo("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let o=this.db.keyEncoding(n.keyEncoding||this[xs]),h=o.format;n.keyEncoding!==h&&(n={...n,keyEncoding:h});let a=this.db.prefixKey(o.encode(t),h);this._seek(a,n)}}}_seek(t,n){throw new Bo("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=H1(t,qc),this[uy]?this.nextTick(t):this[Ms]?this[lh].push(t):(this[Ms]=!0,this[lh].push(t),this[vi]?this[k1]&&this[Ls]()(new Bo("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[ch])),t[qc]}_close(t){this.nextTick(t)}[ch](){this[uy]=!0,this.db.detachResource(this);let t=this[lh];this[lh]=[];for(let n of t)n()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[uy]||await this.close()}}},Of=class extends fh{constructor(t,n){super(t,n,!0),this[N1]=n.keys!==!1,this[B1]=n.values!==!1}[Vc](t,n,o){let h=this[Ls]();if(t)return h(t);try{n=this[N1]&&n!==void 0?this[xs].decode(n):void 0,o=this[B1]&&o!==void 0?this[zc].decode(o):void 0}catch(a){return h(new As("entry",a))}n===void 0&&o===void 0||this[ca]++,h(null,n,o)}[uu](t,n){let o=this[Ls]();if(t)return this[gi](o,t);try{for(let h of n){let a=h[0],r=h[1];h[0]=this[N1]&&a!==void 0?this[xs].decode(a):void 0,h[1]=this[B1]&&r!==void 0?this[zc].decode(r):void 0}}catch(h){return this[gi](o,new As("entries",h))}this[ca]+=n.length,this[gi](o,null,n)}end(t){return!TB&&typeof console<"u"&&(TB=!0,console.warn(new Bo("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},W1=class extends fh{constructor(t,n){super(t,n,!1)}[Vc](t,n){let o=this[Ls]();if(t)return o(t);try{n=n!==void 0?this[xs].decode(n):void 0}catch(h){return o(new As("key",h))}n!==void 0&&this[ca]++,o(null,n)}[uu](t,n){let o=this[Ls]();if(t)return this[gi](o,t);try{for(let h=0;h<n.length;h++){let a=n[h];n[h]=a!==void 0?this[xs].decode(a):void 0}}catch(h){return this[gi](o,new As("keys",h))}this[ca]+=n.length,this[gi](o,null,n)}},U1=class extends fh{constructor(t,n){super(t,n,!1)}[Vc](t,n){let o=this[Ls]();if(t)return o(t);try{n=n!==void 0?this[zc].decode(n):void 0}catch(h){return o(new As("value",h))}n!==void 0&&this[ca]++,o(null,n)}[uu](t,n){let o=this[Ls]();if(t)return this[gi](o,t);try{for(let h=0;h<n.length;h++){let a=n[h];n[h]=a!==void 0?this[zc].decode(a):void 0}}catch(h){return this[gi](o,new As("values",h))}this[ca]+=n.length,this[gi](o,null,n)}},As=class extends Bo{constructor(t,n){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:n})}};for(let e of["_ended property","_nexting property","_end method"])Object.defineProperty(Of.prototype,e.split(" ")[0],{get(){throw new Bo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Bo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});Of.keyEncoding=xs;Of.valueEncoding=zc;ly.AbstractIterator=Of;ly.AbstractKeyIterator=W1;ly.AbstractValueIterator=U1});var MB=Tt(q1=>{"use strict";var{AbstractKeyIterator:_ne,AbstractValueIterator:mne}=Is(),Gc=Symbol("iterator"),dh=Symbol("callback"),Pf=Symbol("handleOne"),Jc=Symbol("handleMany"),ph=class extends _ne{constructor(t,n){super(t,n),this[Gc]=t.iterator({...n,keys:!0,values:!1}),this[Pf]=this[Pf].bind(this),this[Jc]=this[Jc].bind(this)}},fy=class extends mne{constructor(t,n){super(t,n),this[Gc]=t.iterator({...n,keys:!1,values:!0}),this[Pf]=this[Pf].bind(this),this[Jc]=this[Jc].bind(this)}};for(let e of[ph,fy]){let t=e===ph,n=t?o=>o[0]:o=>o[1];e.prototype._next=function(o){this[dh]=o,this[Gc].next(this[Pf])},e.prototype[Pf]=function(o,h,a){let r=this[dh];o?r(o):r(null,t?h:a)},e.prototype._nextv=function(o,h,a){this[dh]=a,this[Gc].nextv(o,h,this[Jc])},e.prototype._all=function(o,h){this[dh]=h,this[Gc].all(o,this[Jc])},e.prototype[Jc]=function(o,h){let a=this[dh];o?a(o):a(null,h.map(n))},e.prototype._seek=function(o,h){this[Gc].seek(o,h)},e.prototype._close=function(o){this[Gc].close(o)}}q1.DefaultKeyIterator=ph;q1.DefaultValueIterator=fy});var FB=Tt(vy=>{"use strict";var{AbstractIterator:vne,AbstractKeyIterator:gne,AbstractValueIterator:yne}=Is(),V1=Ra(),To=Symbol("nut"),_y=Symbol("undefer"),my=Symbol("factory"),dy=class extends vne{constructor(t,n){super(t,n),this[To]=null,this[my]=()=>t.iterator(n),this.db.defer(()=>this[_y]())}},py=class extends gne{constructor(t,n){super(t,n),this[To]=null,this[my]=()=>t.keys(n),this.db.defer(()=>this[_y]())}},hy=class extends yne{constructor(t,n){super(t,n),this[To]=null,this[my]=()=>t.values(n),this.db.defer(()=>this[_y]())}};for(let e of[dy,py,hy])e.prototype[_y]=function(){this.db.status==="open"&&(this[To]=this[my]())},e.prototype._next=function(t){this[To]!==null?this[To].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new V1("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,n,o){this[To]!==null?this[To].nextv(t,n,o):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,n,o)):this.nextTick(o,new V1("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,n){this[To]!==null?this[To].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(t,n)):this.nextTick(n,new V1("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,n){this[To]!==null?this[To]._seek(t,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,n))},e.prototype._close=function(t){this[To]!==null?this[To].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};vy.DeferredIterator=dy;vy.DeferredKeyIterator=py;vy.DeferredValueIterator=hy});var G1=Tt(LB=>{"use strict";var{fromCallback:xB}=sh(),gy=Ra(),{getCallback:Dne,getOptions:Cne}=iy(),yy=Symbol("promise"),la=Symbol("status"),kf=Symbol("operations"),hh=Symbol("finishClose"),Nf=Symbol("closeCallbacks"),z1=class{constructor(t){if(typeof t!="object"||t===null){let n=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[kf]=[],this[Nf]=[],this[la]="open",this[hh]=this[hh].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[kf].length}put(t,n,o){if(this[la]!=="open")throw new gy("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let h=this.db._checkKey(t)||this.db._checkValue(n);if(h)throw h;let a=o&&o.sublevel!=null?o.sublevel:this.db,r=o,l=a.keyEncoding(o&&o.keyEncoding),u=a.valueEncoding(o&&o.valueEncoding),i=l.format;o={...o,keyEncoding:i,valueEncoding:u.format},a!==this.db&&(o.sublevel=null);let s=a.prefixKey(l.encode(t),i),f=u.encode(n);return this._put(s,f,o),this[kf].push({...r,type:"put",key:t,value:n}),this}_put(t,n,o){}del(t,n){if(this[la]!=="open")throw new gy("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let o=this.db._checkKey(t);if(o)throw o;let h=n&&n.sublevel!=null?n.sublevel:this.db,a=n,r=h.keyEncoding(n&&n.keyEncoding),l=r.format;return n={...n,keyEncoding:l},h!==this.db&&(n.sublevel=null),this._del(h.prefixKey(r.encode(t),l),n),this[kf].push({...a,type:"del",key:t}),this}_del(t,n){}clear(){if(this[la]!=="open")throw new gy("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kf]=[],this}_clear(){}write(t,n){return n=Dne(t,n),n=xB(n,yy),t=Cne(t),this[la]!=="open"?this.nextTick(n,new gy("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[la]="writing",this._write(t,o=>{this[la]="closing",this[Nf].push(()=>n(o)),o||this.db.emit("batch",this[kf]),this._close(this[hh])})),n[yy]}_write(t,n){}close(t){return t=xB(t,yy),this[la]==="closing"?this[Nf].push(t):this[la]==="closed"?this.nextTick(t):(this[Nf].push(t),this[la]!=="writing"&&(this[la]="closing",this._close(this[hh]))),t[yy]}_close(t){this.nextTick(t)}[hh](){this[la]="closed",this.db.detachResource(this);let t=this[Nf];this[Nf]=[];for(let n of t)n()}};LB.AbstractChainedBatch=z1});var IB=Tt(AB=>{"use strict";var{AbstractChainedBatch:bne}=G1(),wne=Ra(),Bf=Symbol("encoded"),J1=class extends bne{constructor(t){super(t),this[Bf]=[]}_put(t,n,o){this[Bf].push({...o,type:"put",key:t,value:n})}_del(t,n){this[Bf].push({...n,type:"del",key:t})}_clear(){this[Bf]=[]}_write(t,n){this.db.status==="opening"?this.db.defer(()=>this._write(t,n)):this.db.status==="open"?this[Bf].length===0?this.nextTick(n):this.db._batch(this[Bf],t,n):this.nextTick(n,new wne("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};AB.DefaultChainedBatch=J1});var HB=Tt((D7e,$B)=>{"use strict";var RB=Ra(),Sne=Object.prototype.hasOwnProperty,Ene=new Set(["lt","lte","gt","gte"]);$B.exports=function(e,t){let n={};for(let o in e)if(Sne.call(e,o)&&!(o==="keyEncoding"||o==="valueEncoding")){if(o==="start"||o==="end")throw new RB(`The legacy range option '${o}' has been removed`,{code:"LEVEL_LEGACY"});if(o==="encoding")throw new RB("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});Ene.has(o)?n[o]=t.encode(e[o]):n[o]=e[o]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}});var j1=Tt((C7e,PB)=>{var OB;PB.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(OB||(OB=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var BB=Tt((b7e,NB)=>{"use strict";var kB=j1();NB.exports=function(e,...t){t.length===0?kB(e):kB(()=>e(...t))}});var WB=Tt(Dy=>{"use strict";var{AbstractIterator:Tne,AbstractKeyIterator:Mne,AbstractValueIterator:Fne}=Is(),Wf=Symbol("unfix"),$a=Symbol("iterator"),jc=Symbol("handleOne"),Rs=Symbol("handleMany"),su=Symbol("callback"),_h=class extends Tne{constructor(t,n,o,h){super(t,n),this[$a]=o,this[Wf]=h,this[jc]=this[jc].bind(this),this[Rs]=this[Rs].bind(this),this[su]=null}[jc](t,n,o){let h=this[su];if(t)return h(t);n!==void 0&&(n=this[Wf](n)),h(t,n,o)}[Rs](t,n){let o=this[su];if(t)return o(t);for(let h of n){let a=h[0];a!==void 0&&(h[0]=this[Wf](a))}o(t,n)}},mh=class extends Mne{constructor(t,n,o,h){super(t,n),this[$a]=o,this[Wf]=h,this[jc]=this[jc].bind(this),this[Rs]=this[Rs].bind(this),this[su]=null}[jc](t,n){let o=this[su];if(t)return o(t);n!==void 0&&(n=this[Wf](n)),o(t,n)}[Rs](t,n){let o=this[su];if(t)return o(t);for(let h=0;h<n.length;h++){let a=n[h];a!==void 0&&(n[h]=this[Wf](a))}o(t,n)}},vh=class extends Fne{constructor(t,n,o){super(t,n),this[$a]=o}};for(let e of[_h,mh])e.prototype._next=function(t){this[su]=t,this[$a].next(this[jc])},e.prototype._nextv=function(t,n,o){this[su]=o,this[$a].nextv(t,n,this[Rs])},e.prototype._all=function(t,n){this[su]=n,this[$a].all(t,this[Rs])};for(let e of[vh])e.prototype._next=function(t){this[$a].next(t)},e.prototype._nextv=function(t,n,o){this[$a].nextv(t,n,o)},e.prototype._all=function(t,n){this[$a].all(t,n)};for(let e of[_h,mh,vh])e.prototype._seek=function(t,n){this[$a].seek(t,n)},e.prototype._close=function(t){this[$a].close(t)};Dy.AbstractSublevelIterator=_h;Dy.AbstractSublevelKeyIterator=mh;Dy.AbstractSublevelValueIterator=vh});var zB=Tt((S7e,VB)=>{"use strict";var K1=Ra(),{Buffer:Y1}=Zg()||{},{AbstractSublevelIterator:xne,AbstractSublevelKeyIterator:Lne,AbstractSublevelValueIterator:Ane}=WB(),cu=Symbol("prefix"),UB=Symbol("upperBound"),gh=Symbol("prefixRange"),Wo=Symbol("parent"),Q1=Symbol("unfix"),qB=new TextEncoder,Ine={separator:"!"};VB.exports=function({AbstractLevel:e}){class t extends e{static defaults(o){if(typeof o=="string")throw new K1("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(o&&o.open)throw new K1("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return o==null?Ine:o.separator?o:{...o,separator:"!"}}constructor(o,h,a){let{separator:r,manifest:l,...u}=t.defaults(a);h=$ne(h,r);let i=r.charCodeAt(0)+1,s=o[Wo]||o;if(!qB.encode(h).every(d=>d>i&&d<127))throw new K1(`Prefix must use bytes > ${i} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(Rne(s,l),u);let f=(o.prefix||"")+r+h+r,p=f.slice(0,-1)+String.fromCharCode(i);this[Wo]=s,this[cu]=new Cy(f),this[UB]=new Cy(p),this[Q1]=new Z1,this.nextTick=s.nextTick}prefixKey(o,h){if(h==="utf8")return this[cu].utf8+o;if(o.byteLength===0)return this[cu][h];if(h==="view"){let a=this[cu].view,r=new Uint8Array(a.byteLength+o.byteLength);return r.set(a,0),r.set(o,a.byteLength),r}else{let a=this[cu].buffer;return Y1.concat([a,o],a.byteLength+o.byteLength)}}[gh](o,h){o.gte!==void 0?o.gte=this.prefixKey(o.gte,h):o.gt!==void 0?o.gt=this.prefixKey(o.gt,h):o.gte=this[cu][h],o.lte!==void 0?o.lte=this.prefixKey(o.lte,h):o.lt!==void 0?o.lt=this.prefixKey(o.lt,h):o.lte=this[UB][h]}get prefix(){return this[cu].utf8}get db(){return this[Wo]}_open(o,h){this[Wo].open({passive:!0},h)}_put(o,h,a,r){this[Wo].put(o,h,a,r)}_get(o,h,a){this[Wo].get(o,h,a)}_getMany(o,h,a){this[Wo].getMany(o,h,a)}_del(o,h,a){this[Wo].del(o,h,a)}_batch(o,h,a){this[Wo].batch(o,h,a)}_clear(o,h){this[gh](o,o.keyEncoding),this[Wo].clear(o,h)}_iterator(o){this[gh](o,o.keyEncoding);let h=this[Wo].iterator(o),a=this[Q1].get(this[cu].utf8.length,o.keyEncoding);return new xne(this,o,h,a)}_keys(o){this[gh](o,o.keyEncoding);let h=this[Wo].keys(o),a=this[Q1].get(this[cu].utf8.length,o.keyEncoding);return new Lne(this,o,h,a)}_values(o){this[gh](o,o.keyEncoding);let h=this[Wo].values(o);return new Ane(this,o,h)}}return{AbstractSublevel:t}};var Rne=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:X1(e,"utf8"),buffer:X1(e,"buffer"),view:X1(e,"view")}}},X1=function(e,t){return e.supports.encodings[t]?e.keyEncoding(t).name===t:!1},Cy=class{constructor(t){this.utf8=t,this.view=qB.encode(t),this.buffer=Y1?Y1.from(this.view.buffer,0,this.view.byteLength):{}}},Z1=class{constructor(){this.cache=new Map}get(t,n){let o=this.cache.get(n);return o===void 0&&(n==="view"?o=function(h,a){return a.subarray(h)}.bind(null,t):o=function(h,a){return a.slice(h)}.bind(null,t),this.cache.set(n,o)),o}},$ne=function(e,t){let n=0,o=e.length;for(;n<o&&e[n]===t;)n++;for(;o>n&&e[o-1]===t;)o--;return e.slice(n,o)}});var oM=Tt(rM=>{"use strict";var{supports:Hne}=$N(),{Transcoder:One}=lB(),{EventEmitter:Pne}=CB(),{fromCallback:$s}=sh(),Ha=Ra(),{AbstractIterator:Kc}=Is(),{DefaultKeyIterator:kne,DefaultValueIterator:Nne}=MB(),{DeferredIterator:Bne,DeferredKeyIterator:Wne,DeferredValueIterator:Une}=FB(),{DefaultChainedBatch:GB}=IB(),{getCallback:Qc,getOptions:Hs}=iy(),by=HB(),Et=Symbol("promise"),lu=Symbol("landed"),Xc=Symbol("resources"),eM=Symbol("closeResources"),yh=Symbol("operations"),Dh=Symbol("undefer"),wy=Symbol("deferOpen"),JB=Symbol("options"),Lt=Symbol("status"),Yc=Symbol("defaultOptions"),Uf=Symbol("transcoder"),Sy=Symbol("keyEncoding"),tM=Symbol("valueEncoding"),qne=()=>{},Ch=class extends Pne{constructor(t,n){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");n=Hs(n);let{keyEncoding:o,valueEncoding:h,passive:a,...r}=n;this[Xc]=new Set,this[yh]=[],this[wy]=!0,this[JB]=r,this[Lt]="opening",this.supports=Hne(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Uf]=new One(Vne(this)),this[Sy]=this[Uf].encoding(o||"utf8"),this[tM]=this[Uf].encoding(h||"utf8");for(let l of this[Uf].encodings())this.supports.encodings[l.commonName]||(this.supports.encodings[l.commonName]=!0);this[Yc]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Sy].commonName,valueEncoding:this[tM].commonName}),key:Object.freeze({keyEncoding:this[Sy].commonName})},this.nextTick(()=>{this[wy]&&this.open({passive:!1},qne)})}get status(){return this[Lt]}keyEncoding(t){return this[Uf].encoding(t??this[Sy])}valueEncoding(t){return this[Uf].encoding(t??this[tM])}open(t,n){n=Qc(t,n),n=$s(n,Et),t={...this[JB],...Hs(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;let o=h=>{this[Lt]==="closing"||this[Lt]==="opening"?this.once(lu,h?()=>o(h):o):this[Lt]!=="open"?n(new Ha("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:h})):n()};return t.passive?this[Lt]==="opening"?this.once(lu,o):this.nextTick(o):this[Lt]==="closed"||this[wy]?(this[wy]=!1,this[Lt]="opening",this.emit("opening"),this._open(t,h=>{if(h){this[Lt]="closed",this[eM](()=>{this.emit(lu),o(h)}),this[Dh]();return}this[Lt]="open",this[Dh](),this.emit(lu),this[Lt]==="open"&&this.emit("open"),this[Lt]==="open"&&this.emit("ready"),o()})):this[Lt]==="open"?this.nextTick(o):this.once(lu,()=>this.open(t,n)),n[Et]}_open(t,n){this.nextTick(n)}close(t){t=$s(t,Et);let n=o=>{this[Lt]==="opening"||this[Lt]==="closing"?this.once(lu,o?n(o):n):this[Lt]!=="closed"?t(new Ha("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:o})):t()};if(this[Lt]==="open"){this[Lt]="closing",this.emit("closing");let o=h=>{this[Lt]="open",this[Dh](),this.emit(lu),n(h)};this[eM](()=>{this._close(h=>{if(h)return o(h);this[Lt]="closed",this[Dh](),this.emit(lu),this[Lt]==="closed"&&this.emit("closed"),n()})})}else this[Lt]==="closed"?this.nextTick(n):this.once(lu,()=>this.close(t));return t[Et]}[eM](t){if(this[Xc].size===0)return this.nextTick(t);let n=this[Xc].size,o=!0,h=()=>{--n===0&&(o?this.nextTick(t):t())};for(let a of this[Xc])a.close(h);o=!1,this[Xc].clear()}_close(t){this.nextTick(t)}get(t,n,o){if(o=Qc(n,o),o=$s(o,Et),n=Hs(n,this[Yc].entry),this[Lt]==="opening")return this.defer(()=>this.get(t,n,o)),o[Et];if(qf(this,o))return o[Et];let h=this._checkKey(t);if(h)return this.nextTick(o,h),o[Et];let a=this.keyEncoding(n.keyEncoding),r=this.valueEncoding(n.valueEncoding),l=a.format,u=r.format;return(n.keyEncoding!==l||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:l,valueEncoding:u})),this._get(this.prefixKey(a.encode(t),l),n,(i,s)=>{if(i)return(i.code==="LEVEL_NOT_FOUND"||i.notFound||/NotFound/i.test(i))&&(i.code||(i.code="LEVEL_NOT_FOUND"),i.notFound||(i.notFound=!0),i.status||(i.status=404)),o(i);try{s=r.decode(s)}catch(f){return o(new Ha("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:f}))}o(null,s)}),o[Et]}_get(t,n,o){this.nextTick(o,new Error("NotFound"))}getMany(t,n,o){if(o=Qc(n,o),o=$s(o,Et),n=Hs(n,this[Yc].entry),this[Lt]==="opening")return this.defer(()=>this.getMany(t,n,o)),o[Et];if(qf(this,o))return o[Et];if(!Array.isArray(t))return this.nextTick(o,new TypeError("The first argument 'keys' must be an array")),o[Et];if(t.length===0)return this.nextTick(o,null,[]),o[Et];let h=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),r=h.format,l=a.format;(n.keyEncoding!==r||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:r,valueEncoding:l}));let u=new Array(t.length);for(let i=0;i<t.length;i++){let s=t[i],f=this._checkKey(s);if(f)return this.nextTick(o,f),o[Et];u[i]=this.prefixKey(h.encode(s),r)}return this._getMany(u,n,(i,s)=>{if(i)return o(i);try{for(let f=0;f<s.length;f++)s[f]!==void 0&&(s[f]=a.decode(s[f]))}catch(f){return o(new Ha(`Could not decode one or more of ${s.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:f}))}o(null,s)}),o[Et]}_getMany(t,n,o){this.nextTick(o,null,new Array(t.length).fill(void 0))}put(t,n,o,h){if(h=Qc(o,h),h=$s(h,Et),o=Hs(o,this[Yc].entry),this[Lt]==="opening")return this.defer(()=>this.put(t,n,o,h)),h[Et];if(qf(this,h))return h[Et];let a=this._checkKey(t)||this._checkValue(n);if(a)return this.nextTick(h,a),h[Et];let r=this.keyEncoding(o.keyEncoding),l=this.valueEncoding(o.valueEncoding),u=r.format,i=l.format;(o.keyEncoding!==u||o.valueEncoding!==i)&&(o=Object.assign({},o,{keyEncoding:u,valueEncoding:i}));let s=this.prefixKey(r.encode(t),u),f=l.encode(n);return this._put(s,f,o,p=>{if(p)return h(p);this.emit("put",t,n),h()}),h[Et]}_put(t,n,o,h){this.nextTick(h)}del(t,n,o){if(o=Qc(n,o),o=$s(o,Et),n=Hs(n,this[Yc].key),this[Lt]==="opening")return this.defer(()=>this.del(t,n,o)),o[Et];if(qf(this,o))return o[Et];let h=this._checkKey(t);if(h)return this.nextTick(o,h),o[Et];let a=this.keyEncoding(n.keyEncoding),r=a.format;return n.keyEncoding!==r&&(n=Object.assign({},n,{keyEncoding:r})),this._del(this.prefixKey(a.encode(t),r),n,l=>{if(l)return o(l);this.emit("del",t),o()}),o[Et]}_del(t,n,o){this.nextTick(o)}batch(t,n,o){if(!arguments.length){if(this[Lt]==="opening")return new GB(this);if(this[Lt]!=="open")throw new Ha("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?o=t:o=Qc(n,o),o=$s(o,Et),n=Hs(n,this[Yc].empty),this[Lt]==="opening")return this.defer(()=>this.batch(t,n,o)),o[Et];if(qf(this,o))return o[Et];if(!Array.isArray(t))return this.nextTick(o,new TypeError("The first argument 'operations' must be an array")),o[Et];if(t.length===0)return this.nextTick(o),o[Et];let h=new Array(t.length),{keyEncoding:a,valueEncoding:r,...l}=n;for(let u=0;u<t.length;u++){if(typeof t[u]!="object"||t[u]===null)return this.nextTick(o,new TypeError("A batch operation must be an object")),o[Et];let i=Object.assign({},t[u]);if(i.type!=="put"&&i.type!=="del")return this.nextTick(o,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),o[Et];let s=this._checkKey(i.key);if(s)return this.nextTick(o,s),o[Et];let f=i.sublevel!=null?i.sublevel:this,p=f.keyEncoding(i.keyEncoding||a),d=p.format;if(i.key=f.prefixKey(p.encode(i.key),d),i.keyEncoding=d,i.type==="put"){let c=this._checkValue(i.value);if(c)return this.nextTick(o,c),o[Et];let _=f.valueEncoding(i.valueEncoding||r);i.value=_.encode(i.value),i.valueEncoding=_.format}f!==this&&(i.sublevel=null),h[u]=i}return this._batch(h,l,u=>{if(u)return o(u);this.emit("batch",t),o()}),o[Et]}_batch(t,n,o){this.nextTick(o)}sublevel(t,n){return this._sublevel(t,nM.defaults(n))}_sublevel(t,n){return new nM(this,t,n)}prefixKey(t,n){return t}clear(t,n){if(n=Qc(t,n),n=$s(n,Et),t=Hs(t,this[Yc].empty),this[Lt]==="opening")return this.defer(()=>this.clear(t,n)),n[Et];if(qf(this,n))return n[Et];let o=t,h=this.keyEncoding(t.keyEncoding);return t=by(t,h),t.keyEncoding=h.format,t.limit===0?this.nextTick(n):this._clear(t,a=>{if(a)return n(a);this.emit("clear",o),n()}),n[Et]}_clear(t,n){this.nextTick(n)}iterator(t){let n=this.keyEncoding(t&&t.keyEncoding),o=this.valueEncoding(t&&t.valueEncoding);if(t=by(t,n),t.keys=t.keys!==!1,t.values=t.values!==!1,t[Kc.keyEncoding]=n,t[Kc.valueEncoding]=o,t.keyEncoding=n.format,t.valueEncoding=o.format,this[Lt]==="opening")return new Bne(this,t);if(this[Lt]!=="open")throw new Ha("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new Kc(this,t)}keys(t){let n=this.keyEncoding(t&&t.keyEncoding),o=this.valueEncoding(t&&t.valueEncoding);if(t=by(t,n),t[Kc.keyEncoding]=n,t[Kc.valueEncoding]=o,t.keyEncoding=n.format,t.valueEncoding=o.format,this[Lt]==="opening")return new Wne(this,t);if(this[Lt]!=="open")throw new Ha("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new kne(this,t)}values(t){let n=this.keyEncoding(t&&t.keyEncoding),o=this.valueEncoding(t&&t.valueEncoding);if(t=by(t,n),t[Kc.keyEncoding]=n,t[Kc.valueEncoding]=o,t.keyEncoding=n.format,t.valueEncoding=o.format,this[Lt]==="opening")return new Une(this,t);if(this[Lt]!=="open")throw new Ha("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new Nne(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[yh].push(t)}[Dh](){if(this[yh].length===0)return;let t=this[yh];this[yh]=[];for(let n of t)n()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[Xc].add(t)}detachResource(t){this[Xc].delete(t)}_chainedBatch(){return new GB(this)}_checkKey(t){if(t==null)return new Ha("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new Ha("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Ch.prototype.nextTick=BB();var{AbstractSublevel:nM}=zB()({AbstractLevel:Ch});rM.AbstractLevel=Ch;rM.AbstractSublevel=nM;var qf=function(e,t){return e[Lt]!=="open"?(e.nextTick(t,new Ha("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},Vne=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])}});var aM=Tt(Zc=>{"use strict";Zc.AbstractLevel=oM().AbstractLevel;Zc.AbstractSublevel=oM().AbstractSublevel;Zc.AbstractIterator=Is().AbstractIterator;Zc.AbstractKeyIterator=Is().AbstractKeyIterator;Zc.AbstractValueIterator=Is().AbstractValueIterator;Zc.AbstractChainedBatch=G1().AbstractChainedBatch});var KB=Tt((M7e,jB)=>{jB.exports=Gne;var zne=j1();function Gne(e,t,n){if(typeof t!="number")throw new Error("second argument must be a Number");let o,h,a,r,l,u=!0,i;Array.isArray(e)?(o=[],a=h=e.length):(r=Object.keys(e),o={},a=h=r.length);function s(p){function d(){n&&n(p,o),n=null}u?zne(d):d()}function f(p,d,c){if(o[p]=c,d&&(l=!0),--a===0||d)s(d);else if(!l&&i<h){let _;r?(_=r[i],i+=1,e[_](function(m,v){f(_,m,v)})):(_=i,i+=1,e[_](function(m,v){f(_,m,v)}))}}i=t,a?r?r.some(function(p,d){return e[p](function(c,_){f(p,c,_)}),d===t-1}):e.some(function(p,d){return p(function(c,_){f(d,c,_)}),d===t-1}):s(null),u=!1}});var iM=Tt((F7e,QB)=>{"use strict";QB.exports=function(t){let n=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,o=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,h=t.gte===void 0,a=t.lte===void 0;return n!==void 0&&o!==void 0?IDBKeyRange.bound(n,o,h,a):n!==void 0?IDBKeyRange.lowerBound(n,h):o!==void 0?IDBKeyRange.upperBound(o,a):null}});var uM=Tt((x7e,XB)=>{"use strict";var Jne=new TextEncoder;XB.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):Jne.encode(e)}});var n5=Tt(t5=>{"use strict";var{AbstractIterator:jne}=aM(),YB=iM(),Ey=uM(),yi=Symbol("cache"),fu=Symbol("finished"),Uo=Symbol("options"),du=Symbol("currentOptions"),el=Symbol("position"),sM=Symbol("location"),Vf=Symbol("first"),ZB={},cM=class extends jne{constructor(t,n,o){super(t,o),this[yi]=[],this[fu]=this.limit===0,this[Uo]=o,this[du]={...o},this[el]=void 0,this[sM]=n,this[Vf]=!0}_nextv(t,n,o){if(this[Vf]=!1,this[fu])return this.nextTick(o,null,[]);if(this[yi].length>0)return t=Math.min(t,this[yi].length),this.nextTick(o,null,this[yi].splice(0,t));this[el]!==void 0&&(this[Uo].reverse?(this[du].lt=this[el],this[du].lte=void 0):(this[du].gt=this[el],this[du].gte=void 0));let h;try{h=YB(this[du])}catch{return this[fu]=!0,this.nextTick(o,null,[])}let a=this.db.db.transaction([this[sM]],"readonly"),r=a.objectStore(this[sM]),l=[];if(this[Uo].reverse){let u=!this[Uo].values&&r.openKeyCursor?"openKeyCursor":"openCursor";r[u](h,"prev").onsuccess=i=>{let s=i.target.result;if(s){let{key:f,value:p}=s;this[el]=f,l.push([this[Uo].keys&&f!==void 0?Ey(f):void 0,this[Uo].values&&p!==void 0?Ey(p):void 0]),l.length<t?s.continue():e5(a)}else this[fu]=!0}}else{let u,i,s=()=>{if(u===void 0||i===void 0)return;let f=Math.max(u.length,i.length);f===0||t===1/0?this[fu]=!0:this[el]=u[f-1],l.length=f;for(let p=0;p<f;p++){let d=u[p],c=i[p];l[p]=[this[Uo].keys&&d!==void 0?Ey(d):void 0,this[Uo].values&&c!==void 0?Ey(c):void 0]}e5(a)};this[Uo].keys||t<1/0?r.getAllKeys(h,t<1/0?t:void 0).onsuccess=f=>{u=f.target.result,s()}:(u=[],this.nextTick(s)),this[Uo].values?r.getAll(h,t<1/0?t:void 0).onsuccess=f=>{i=f.target.result,s()}:(i=[],this.nextTick(s))}a.onabort=()=>{o(a.error||new Error("aborted by user")),o=null},a.oncomplete=()=>{o(null,l),o=null}}_next(t){if(this[yi].length>0){let[n,o]=this[yi].shift();this.nextTick(t,null,n,o)}else if(this[fu])this.nextTick(t);else{let n=Math.min(100,this.limit-this.count);this[Vf]&&(this[Vf]=!1,n=1),this._nextv(n,ZB,(o,h)=>{if(o)return t(o);this[yi]=h,this._next(t)})}}_all(t,n){this[Vf]=!1;let o=this[yi].splice(0,this[yi].length),h=this.limit-this.count-o.length;if(h<=0)return this.nextTick(n,null,o);this._nextv(h,ZB,(a,r)=>{if(a)return n(a);o.length>0&&(r=o.concat(r)),n(null,r)})}_seek(t,n){this[Vf]=!0,this[yi]=[],this[fu]=!1,this[el]=void 0,this[du]={...this[Uo]};let o;try{o=YB(this[Uo])}catch{this[fu]=!0;return}o!==null&&!o.includes(t)?this[fu]=!0:this[Uo].reverse?this[du].lte=t:this[du].gte=t}};t5.Iterator=cM;function e5(e){typeof e.commit=="function"&&e.commit()}});var o5=Tt((A7e,r5)=>{"use strict";r5.exports=function(t,n,o,h,a){if(h.limit===0)return t.nextTick(a);let r=t.db.transaction([n],"readwrite"),l=r.objectStore(n),u=0;r.oncomplete=function(){a()},r.onabort=function(){a(r.error||new Error("aborted by user"))};let i=l.openKeyCursor?"openKeyCursor":"openCursor",s=h.reverse?"prev":"next";l[i](o,s).onsuccess=function(f){let p=f.target.result;p&&(l.delete(p.key).onsuccess=function(){(h.limit<=0||++u<h.limit)&&p.continue()})}}});var l5=Tt(c5=>{"use strict";var{AbstractLevel:Kne}=aM(),a5=Ra(),Qne=KB(),{fromCallback:Xne}=sh(),{Iterator:Yne}=n5(),i5=uM(),Zne=o5(),ere=iM(),s5="level-js-",bh=Symbol("idb"),lM=Symbol("namePrefix"),pu=Symbol("location"),fM=Symbol("version"),tl=Symbol("store"),wh=Symbol("onComplete"),u5=Symbol("promise"),Ty=class extends Kne{constructor(t,n,o){if(typeof n=="function"||typeof o=="function")throw new a5("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:h,version:a,...r}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},r),typeof t!="string")throw new Error("constructor requires a location string argument");this[pu]=t,this[lM]=h??s5,this[fM]=parseInt(a||1,10),this[bh]=null}get location(){return this[pu]}get namePrefix(){return this[lM]}get version(){return this[fM]}get db(){return this[bh]}get type(){return"browser-level"}_open(t,n){let o=indexedDB.open(this[lM]+this[pu],this[fM]);o.onerror=function(){n(o.error||new Error("unknown error"))},o.onsuccess=()=>{this[bh]=o.result,n()},o.onupgradeneeded=h=>{let a=h.target.result;a.objectStoreNames.contains(this[pu])||a.createObjectStore(this[pu])}}[tl](t){return this[bh].transaction([this[pu]],t).objectStore(this[pu])}[wh](t,n){let o=t.transaction;o.onabort=function(){n(o.error||new Error("aborted by user"))},o.oncomplete=function(){n(null,t.result)}}_get(t,n,o){let h=this[tl]("readonly"),a;try{a=h.get(t)}catch(r){return this.nextTick(o,r)}this[wh](a,function(r,l){if(r)return o(r);if(l===void 0)return o(new a5("Entry not found",{code:"LEVEL_NOT_FOUND"}));o(null,i5(l))})}_getMany(t,n,o){let h=this[tl]("readonly"),a=t.map(r=>l=>{let u;try{u=h.get(r)}catch(i){return l(i)}u.onsuccess=()=>{let i=u.result;l(null,i===void 0?i:i5(i))},u.onerror=i=>{i.stopPropagation(),l(u.error)}});Qne(a,16,o)}_del(t,n,o){let h=this[tl]("readwrite"),a;try{a=h.delete(t)}catch(r){return this.nextTick(o,r)}this[wh](a,o)}_put(t,n,o,h){let a=this[tl]("readwrite"),r;try{r=a.put(n,t)}catch(l){return this.nextTick(h,l)}this[wh](r,h)}_iterator(t){return new Yne(this,this[pu],t)}_batch(t,n,o){let h=this[tl]("readwrite"),a=h.transaction,r=0,l;a.onabort=function(){o(l||a.error||new Error("aborted by user"))},a.oncomplete=function(){o()};function u(){let i=t[r++],s=i.key,f;try{f=i.type==="del"?h.delete(s):h.put(i.value,s)}catch(p){l=p,a.abort();return}r<t.length?f.onsuccess=u:typeof a.commit=="function"&&a.commit()}u()}_clear(t,n){let o,h;try{o=ere(t)}catch{return this.nextTick(n)}if(t.limit>=0)return Zne(this,this[pu],o,t,n);try{let a=this[tl]("readwrite");h=o?a.delete(o):a.clear()}catch(a){return this.nextTick(n,a)}this[wh](h,n)}_close(t){this[bh].close(),this.nextTick(t)}};Ty.destroy=function(e,t,n){typeof t=="function"&&(n=t,t=s5),n=Xne(n,u5);let o=indexedDB.deleteDatabase(t+e);return o.onsuccess=function(){n()},o.onerror=function(h){n(h)},n[u5]};c5.BrowserLevel=Ty});var dM=Tt(f5=>{f5.Level=l5().BrowserLevel});var Hh={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var he=function(e){return e.identity},_e={identity:function(e){return e},Semigroupoid0:function(){return Hh}};var $M={fromString:he(_e)},Mt=function(e){return e.fromString};var HM=function(e){return function(t){for(var n=t.length,o=new Array(n),h=0;h<n;h++)o[h]=e(t[h]);return o}};var pn=!0;var $e=function(e){return function(t){return function(n){return e(n)(t)}}},me=function(e){return function(t){return e}};var OM=function(e){return function(t){return t(e)}};var pt=function(){function e(){}return e.value=new e,e}();var z=function(e){return e.map};var st=function(e){return z(e)(me(void 0))},nl=function(e){var t=z(e);return function(n){return function(o){return t(me(o))(n)}}},Ph=function(e){var t=z(e);return function(n){return t(me(n))}};var mt={map:HM};var PM=function(e){return function(t){return e+t}},kM=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var qn=function(e){return e.reflectSymbol};var fa=function(e){return function(t){return t[e]}};var Ns={append:PM};var sn={append:kM};var De=function(e){return e.append};var Ny={alt:De(sn),Functor0:function(){return mt}},On=function(e){return e.alt};var NM=function(e){return function(t){for(var n=e.length,o=t.length,h=new Array(n*o),a=0,r=0;r<n;r++)for(var l=e[r],u=0;u<o;u++)h[a++]=l(t[u]);return h}};var TW=he(_e);var Bs={apply:NM,Functor0:function(){return mt}},ht=function(e){return e.apply};var qr=function(e){var t=ht(e),n=z(e.Functor0());return function(o){return function(h){return t(n(me(TW))(o))(h)}}};var X=function(e){return e.pure},zf=function(e){var t=X(e);return function(n){return function(o){if(!n)return o;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,o.constructor.name])}}},An=function(e){var t=X(e);return function(n){return function(o){if(n)return o;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,o.constructor.name])}}},Gf=function(e){var t=ht(e.Apply0()),n=X(e);return function(o){return function(h){return t(n(o))(h)}}};var rl={pure:function(e){return[e]},Apply0:function(){return Bs}};var BM=function(e){return function(t){for(var n=[],o=0,h=e.length;o<h;o++)Array.prototype.push.apply(n,t(e[o]));return n}};var xW=he(_e),nt=function(e){return e.discard};var gu={bind:BM,Apply0:function(){return Bs}},Z=function(e){return e.bind},Cn=function(e){return $e(Z(e))},ol=function(e){var t=Cn(e);return function(n){return function(o){return function(h){return t(n)(o(h))}}}};var rt={discard:function(e){return Z(e)}};var al=function(e){var t=Z(e);return function(n){return t(n)(xW)}};var WM=function(e,t){for(var n=e>t?-1:1,o=new Array(n*(t-e)+1),h=e,a=0;h!==t;)o[a++]=h,h+=n;return o[a]=h,o},LW=function(e,t){if(e<1)return[];var n=new Array(e);return n.fill(t)},AW=function(e,t){for(var n=[],o=0,h=0;h<e;h++)n[o++]=t;return n},IW=typeof Array.prototype.fill=="function"?LW:AW,UM=function(){function e(h,a){this.head=h,this.tail=a}var t={};function n(h){return function(a){return new e(h,a)}}function o(h){for(var a=[],r=0,l=h;l!==t;)a[r++]=l.head,l=l.tail;return a}return function(h,a){return o(h(n)(t)(a))}}(),tr=function(e){return e.length},Wy=function(e,t,n){return n.length===0?e({}):t(n[0])(n.slice(1))},qM=function(e,t,n,o){return o<0||o>=n.length?t:e(n[o])};var VM=function(e,t,n,o){for(var h=0,a=o.length;h<a;h++)if(n(o[h]))return e(h);return t},zM=function(e,t,n,o){for(var h=o.length-1;h>=0;h--)if(n(o[h]))return e(h);return t},GM=function(e,t,n,o,h){if(n<0||n>h.length)return t;var a=h.slice();return a.splice(n,0,o),e(a)},JM=function(e,t,n,o){if(n<0||n>=o.length)return t;var h=o.slice();return h.splice(n,1),e(h)};var il=function(e){return e.slice().reverse()};var jM=function(e,t){return t.filter(e)};var KM=function(){function e(t,n,o,h,a,r){var l,u,i,s,f,p,d;for(l=a+(r-a>>1),l-a>1&&e(t,n,h,o,a,l),r-l>1&&e(t,n,h,o,l,r),u=a,i=l,s=a;u<l&&i<r;)f=h[u],p=h[i],d=n(t(f)(p)),d>0?(o[s++]=p,++i):(o[s++]=f,++u);for(;u<l;)o[s++]=h[u++];for(;i<r;)o[s++]=h[i++]}return function(t,n,o){var h;return o.length<2?o:(h=o.slice(0),e(t,n,h,o.slice(0),0,o.length),h)}}(),QM=function(e,t,n){return n.slice(e,t)},XM=function(e,t,n){for(var o=t.length<n.length?t.length:n.length,h=new Array(o),a=0;a<o;a++)h[a]=e(t[a])(n[a]);return h};var YM=function(e){var t=Z(e.Bind1()),n=zf(e.Applicative0());return function(o){return function(h){return t(o)(function(a){return n(a)(h)})}}};var qy=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return function(o){return function(h){return t(h)(function(a){return n(o(a))})}}},wr=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return function(o){return function(h){return t(o)(function(a){return t(h)(function(r){return n(a(r))})})}}};var ZM="\uFFFF",eF="\0",$W=Number.POSITIVE_INFINITY,HW=Number.NEGATIVE_INFINITY;var Jf=function(e){return function(t){return function(n){return function(o){return function(h){return o<h?e:o===h?t:n}}}}},tF=Jf,nF=Jf,rF=Jf,oF=Jf,aF=Jf,iF=function(e){return function(t){return function(n){for(var o=0,h=t.length,a=n.length;o<h&&o<a;){var r=t[o],l=n[o],u=e(r)(l);if(u!==0)return u;o++}return h===a?0:h>a?-1:1}}};var jf=function(e){return function(t){return e===t}},uF=jf,sF=jf,cF=jf,lF=jf,fF=jf,dF=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var o=0;o<t.length;o++)if(!e(t[o])(n[o]))return!1;return!0}}};var Nh={eq:function(e){return function(t){return!0}}},no={eq:fF};var Kf={eq:cF},yu={eq:sF},pF={eq:lF},Bh={eq:uF};var Re=function(e){return e.eq},NW=Re(Bh),Ci=function(e){return{eq:dF(Re(e))}};var Qf=function(e){var t=Re(e);return function(n){return function(o){return NW(t(n)(o))(!1)}}};var de=function(){function e(){}return e.value=new e,e}(),se=function(){function e(){}return e.value=new e,e}(),qe=function(){function e(){}return e.value=new e,e}();var bi={eq:function(e){return function(t){return e instanceof de&&t instanceof de||e instanceof se&&t instanceof se||e instanceof qe&&t instanceof qe}}};var hF=function(e){return function(t){return e-t|0}};var _F=function(e){return function(t){return e+t|0}},mF=function(e){return function(t){return e*t|0}},vF=function(e){return function(t){return e+t}},gF=function(e){return function(t){return e*t}};var Mo=function(e){return e.zero};var Vy={add:vF,zero:0,mul:gF,one:1},Wh={add:_F,zero:0,mul:mF,one:1};var Vo=function(e){return e.add};var Xf=function(e){return e.sub};var Yf={sub:hF,Semiring0:function(){return Wh}};var zy=function(e){var t=Xf(e),n=Mo(e.Semiring0());return function(o){return t(n)(o)}};var Jt={compare:function(e){return function(t){return qe.value}},Eq0:function(){return Nh}},zt=function(){return{compare:oF(de.value)(qe.value)(se.value),Eq0:function(){return no}}}();var Si=function(){return{compare:rF(de.value)(qe.value)(se.value),Eq0:function(){return Kf}}}(),yt=function(){return{compare:nF(de.value)(qe.value)(se.value),Eq0:function(){return yu}}}(),Uh=function(){return{compare:aF(de.value)(qe.value)(se.value),Eq0:function(){return pF}}}(),Zf=function(){return{compare:tF(de.value)(qe.value)(se.value),Eq0:function(){return Bh}}}();var Te=function(e){return e.compare},UW=Te(yt),qh=function(e){var t=Te(e);return function(n){return function(o){return function(h){return t(n(o))(n(h))}}}};var Gy=function(e){var t=Te(e);return function(n){return function(o){var h=t(n)(o);return!(h instanceof de)}}};var Ei=function(e){var t=Te(e);return function(n){return function(o){var h=t(n)(o);if(h instanceof de)return o;if(h instanceof qe||h instanceof se)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[h.constructor.name])}}},ul=function(e){var t=Te(e);return function(n){return function(o){var h=t(n)(o);if(h instanceof de||h instanceof qe)return n;if(h instanceof se)return o;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[h.constructor.name])}}},Ws=function(e){var t=Te(e),n=Ci(e.Eq0());return{compare:function(){var o=function(h){return function(a){var r=t(h)(a);if(r instanceof qe)return 0;if(r instanceof de)return 1;if(r instanceof se)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[r.constructor.name])}};return function(h){return function(a){return UW(0)(iF(o)(h)(a))}}}(),Eq0:function(){return n}}};var Jy=function(e){var t=ul(e),n=Ei(e);return function(o){return function(h){return function(a){return t(h)(n(o)(a))}}}};var jy=function(e){var t=Gy(e);return function(n){var o=Mo(n.Semiring0()),h=zy(n);return function(a){var r=t(a)(o);return r?a:h(a)}}};var Fo=function(e){return e.top};var sl={top:2147483647,bottom:-2147483648,Ord0:function(){return yt}},Us={top:ZM,bottom:eF,Ord0:function(){return Uh}};var da=function(e){return e.bottom};var wF=function(e){return e.toString()},SF=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var EF=function(e){var t=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(n,o){switch(n){case'"':case"\\":return"\\"+n;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var h=o+1,a=h<t&&e[h]>="0"&&e[h]<="9"?"\\&":"";return"\\"+n.charCodeAt(0).toString(10)+a})+'"'},TF=function(e){return function(t){for(var n=[],o=0,h=t.length;o<h;o++)n[o]=e(t[o]);return"["+n.join(",")+"]"}};var Ti={show:EF};var MF=function(e){return e.showRecordFields},FF=function(){return function(){return function(e){var t=MF(e);return{show:function(n){return"{"+(t(pt.value)(n)+"}")}}}}};var Sr={show:SF},Er={show:wF};var xF={show:function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[e.constructor.name])}},Se=function(e){return e.show},cl=function(e){return{show:TF(Se(e))}},LF=function(e){var t=qn(e);return function(n){var o=MF(n);return function(h){var a=Se(h);return{showRecordFields:function(r){return function(l){var u=o(pt.value)(l),i=t(pt.value),s=fa(i)(l);return" "+(i+(": "+(a(s)+(","+u))))}}}}}},AF=function(e){var t=qn(e);return function(n){var o=Se(n);return{showRecordFields:function(h){return function(a){var r=t(pt.value),l=fa(r)(a);return" "+(r+(": "+(o(l)+" ")))}}}}};var JW=he(_e),V=function(){function e(){}return e.value=new e,e}(),W=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gh=function(e){var t=Se(e);return{show:function(n){if(n instanceof W)return"(Just "+(t(n.value0)+")");if(n instanceof V)return"Nothing";throw new Error("Failed pattern match at Data.Maybe (line 223, column 1 - line 225, column 28): "+[n.constructor.name])}}},Ky=function(e){var t=De(e);return{append:function(n){return function(o){if(n instanceof V)return o;if(o instanceof V)return n;if(n instanceof W&&o instanceof W)return new W(t(n.value0)(o.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,o.constructor.name])}}}};var RF=function(e){var t=Ky(e);return{mempty:V.value,Semigroup0:function(){return t}}};var Qe=function(e){return function(t){return function(n){if(n instanceof V)return e;if(n instanceof W)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},wu=Qe(!0)(me(!1)),qs=Qe(!1)(me(!0));var Dt={map:function(e){return function(t){return t instanceof W?new W(e(t.value0)):V.value}}},jW=z(Dt);var nr=function(e){return Qe(e)(JW)},xo=function(){return function(e){if(e instanceof W)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var fl=function(e){var t=Re(e);return{eq:function(n){return function(o){return n instanceof V&&o instanceof V?!0:n instanceof W&&o instanceof W?t(n.value0)(o.value0):!1}}}};var ed={apply:function(e){return function(t){if(e instanceof W)return jW(e.value0)(t);if(e instanceof V)return V.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Dt}};var Vr={bind:function(e){return function(t){if(e instanceof W)return t(e.value0);if(e instanceof V)return V.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return ed}};var We=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Oe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Su={map:function(e){return function(t){if(t instanceof We)return new We(t.value0);if(t instanceof Oe)return new Oe(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},KW=z(Su);var bn=function(e){return function(t){return function(n){if(n instanceof We)return e(n.value0);if(n instanceof Oe)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Jh=function(){return bn(me(V.value))(W.create)}();var $F=bn(me(!1))(me(!0));var Qy={apply:function(e){return function(t){if(e instanceof We)return new We(e.value0);if(e instanceof Oe)return KW(e.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Su}};var dl=function(){return{pure:Oe.create,Apply0:function(){return Qy}}}();var zo=function(e){return e};var Mi={map:function(e){return function(t){return e(t)}}};var jh={apply:function(e){return function(t){return e(t)}},Functor0:function(){return Mi}},Xy={bind:function(e){return function(t){return t(e)}},Apply0:function(){return jh}},Kh={pure:zo,Apply0:function(){return jh}},Tr={Applicative0:function(){return Kh},Bind1:function(){return Xy}};var HF=function(e){return Math.min(Math.abs(e),2147483647)},OF=function(e){return function(t){return t===0?0:t>0?Math.floor(e/t):-Math.floor(e/-t)}},PF=function(e){return function(t){if(t===0)return 0;var n=Math.abs(t);return(e%n+n)%n}};var kF={Ring0:function(){return Yf}};var pl=function(e){return e.mod};var hl={degree:HF,div:OF,mod:PF,CommutativeRing0:function(){return kF}},td=function(e){return e.div};var Fi={mempty:"",Semigroup0:function(){return Ns}};var Vs={mempty:[],Semigroup0:function(){return sn}};var ct=function(e){return e.mempty};var BF=function(e){return function(){return e}},WF=function(e){return function(t){return function(){return t(e())()}}};var UF=function(e,t,n){var o=0,h;return function(a){if(o===2)return h;if(o===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return o=1,h=n(),o=2,h}},Na={Applicative0:function(){return rn},Bind1:function(){return xr}},xr={bind:WF,Apply0:function(){return Yy(0)}},rn={pure:BF,Apply0:function(){return Yy(0)}},qF=UF("functorEffect","Effect",function(){return{map:Gf(rn)}}),Yy=UF("applyEffect","Effect",function(){return{apply:wr(Na),Functor0:function(){return qF(0)}}}),Pe=qF(20),Zy=Yy(23);var VF=function(e){return function(){return{value:e}}};var Ke=function(e){return function(){return e.value}},zF=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},qt=function(e){return function(t){return function(){t.value=e}}};var n3=st(Pe),cn=VF,e0=zF,Qh=function(e){return e0(function(t){var n=e(t);return{state:n,value:n}})},ro=function(e){return function(t){return n3(Qh(e)(t))}};var a3=Cn(xr),i3=z(Pe),Pt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mn=function(e){return e.tailRecM};var u3=function(e){var t=function(n){var o=!1,h;function a(r){if(r instanceof Pt){n=e(r.value0);return}if(r instanceof Nt)return o=!0,r.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 103, column 3 - line 103, column 25): "+[r.constructor.name])}for(;!o;)h=a(n);return h};return function(n){return t(e(n))}};var GF={tailRecM:function(e){var t=function(o){return o},n=u3(function(o){return t(e(o))});return function(o){return zo(n(o))}},Monad0:function(){return Tr}};var Xh={tailRecM:function(e){return function(t){var n=function(o){if(o instanceof Nt)return o.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[o.constructor.name])};return function(){var h=a3(cn)(e(t))();return function(){for(;!function(){var r=Ke(h)();if(r instanceof Pt){var l=e(r.value0)();return qt(l)(h)(),!1}if(r instanceof Nt)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[r.constructor.name])}(););return{}}(),i3(n)(Ke(h))()}}},Monad0:function(){return Na}};var JF=function(e){return function(t){return function(){return e(t())}}},jF=function(e){return function(){return e}},KF=function(e){return function(t){return function(){return t(e())()}}};var rd=function(e){return function(t){return function(){for(var n=0,o=e.length;n<o;n++)t(e[n])()}}};var f3=function(e,t,n){var o=0,h;return function(a){if(o===2)return h;if(o===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return o=1,h=n(),o=2,h}};var zs={map:JF};var r0={Applicative0:function(){return Yh},Bind1:function(){return o0}},o0={bind:KF,Apply0:function(){return ZF(0)}},Yh={pure:jF,Apply0:function(){return ZF(0)}},ZF=f3("applyST","Control.Monad.ST.Internal",function(){return{apply:wr(r0),Functor0:function(){return zs}}});function ex(e){return e}var tx=ex,nx=ex;var rx=function(e,t){return t.push(e)};var Zh=function(t){return function(n){return function(){return t(n)}}},a0=function(t){return function(n){return function(o){return function(){return t(n,o)}}}};var ox=Zh(nx),i0=Zh(tx);var u0=a0(rx);var ix=function(e){return function(t){return e&&t}},ux=function(e){return function(t){return e||t}},sx=function(e){return!e};var ad=function(e){return e.tt};var ha=function(e){return e.not};var s0=function(e){return e.implies};var id=function(e){return e.ff};var Gs=function(e){return e.disj},pa={ff:!1,tt:!0,implies:function(e){return function(t){return Gs(pa)(ha(pa)(e))(t)}},conj:ix,disj:ux,not:sx};var _l=function(e){return e.conj},ud=function(e){var t=id(e),n=ad(e),o=s0(e),h=_l(e),a=Gs(e),r=ha(e);return{ff:function(l){return t},tt:function(l){return n},implies:function(l){return function(u){return function(i){return o(l(i))(u(i))}}},conj:function(l){return function(u){return function(i){return h(l(i))(u(i))}}},disj:function(l){return function(u){return function(i){return a(l(i))(u(i))}}},not:function(l){return function(u){return r(l(u))}}}};var cx=function(e){return function(t){return function(n){for(var o=t,h=n.length,a=h-1;a>=0;a--)o=e(n[a])(o);return o}}},lx=function(e){return function(t){return function(n){for(var o=t,h=n.length,a=0;a<h;a++)o=e(o)(n[a]);return o}}};var fx={empty:[],Alt0:function(){return Ny}},zr=function(e){return e.empty};var ee=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Eu=function(e){return function(t){return e(t.value0)(t.value1)}};var hn=function(e){return e.value1};var Li={map:function(e){return function(t){return new ee(t.value0,e(t.value1))}}};var rr=function(e){return e.value0};var f0=function(e){var t=Re(e);return function(n){var o=Re(n);return{eq:function(h){return function(a){return t(h.value0)(a.value0)&&o(h.value1)(a.value1)}}}}},ml=function(e){var t=Te(e),n=f0(e.Eq0());return function(o){var h=Te(o),a=n(o.Eq0());return{compare:function(r){return function(l){var u=t(r.value0)(l.value0);return u instanceof de?de.value:u instanceof se?se.value:h(r.value1)(l.value1)}},Eq0:function(){return a}}}};var Lo=function(e){return e.bimap};var M3={append:function(e){return function(t){return e instanceof W?e:t}}};var _x=function(){return{mempty:V.value,Semigroup0:function(){return M3}}}();var ne=function(e){return e};var fd=function(){return ne};var F3=fd();var In=function(){return F3};var x3=he(_e),L3=Re(bi),A3=In();var vn=function(e){return e.foldr};var ut=function(e){var t=qr(e.Apply0()),n=X(e);return function(o){var h=vn(o);return function(a){return h(function(r){return t(a(r))})(n(void 0))}}},r_=function(e){var t=ut(e);return function(n){return $e(t(n))}};var _n=function(e){return e.foldl};var Ba=function(e){var t=_n(e);return function(n){var o=De(n.Semigroup0()),h=ct(n);return function(a){return function(r){var l=function(u){return function(i){return u.init?{init:!1,acc:i}:{init:!1,acc:o(u.acc)(o(a)(i))}}};return t(l)({init:!0,acc:h})(r).acc}}}};var Cx=function(e){var t=_n(e);return function(n){var o=function(h){return function(a){if(h instanceof V)return new W(a);if(h instanceof W)return new W(function(){var r=L3(n(h.value0)(a))(se.value);return r?h.value0:a}());throw new Error("Failed pattern match at Data.Foldable (line 441, column 3 - line 441, column 27): "+[h.constructor.name,a.constructor.name])}};return t(o)(V.value)}},g0=function(e){var t=Te(e);return function(n){return Cx(n)(t)}};var y0=function(e){var t=_n(e);return function(n){return t(Vo(n))(Mo(n))}};var $t={foldr:function(e){return function(t){return function(n){if(n instanceof V)return t;if(n instanceof W)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof V)return t;if(n instanceof W)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=ct(e);return function(n){return function(o){if(o instanceof V)return t;if(o instanceof W)return n(o.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,o.constructor.name])}}}};var o_={foldr:function(e){return function(t){return function(n){if(n instanceof We)return t;if(n instanceof Oe)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof We)return t;if(n instanceof Oe)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=ct(e);return function(n){return function(o){if(o instanceof We)return t;if(o instanceof Oe)return n(o.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,o.constructor.name])}}}};var bx=function(e){var t=vn(e);return function(n){var o=De(n.Semigroup0()),h=ct(n);return function(a){return t(function(r){return function(l){return o(a(r))(l)}})(h)}}},vt={foldr:cx,foldl:lx,foldMap:function(e){return bx(vt)(e)}};var kn=function(e){return e.foldMap};var a_=function(e){var t=kn(e)(_x);return function(n){var o=Re(n);return function(h){var a=t(function(r){var l=o(h)(r.value0);return l?new W(r.value1):V.value});return function(r){return A3(a(r))}}}};var Qs=function(e){var t=kn(e);return function(n){return t(n)(x3)}};var Xs=function(e){return function(t){return function(n){return e(t,n)}}},Ys=function(e){return function(t){return function(n){return function(o){return e(t,n,o)}}}},Tu=function(e){return function(t){return function(n){return function(o){return function(h){return e(t,n,o,h)}}}}},D0=function(e){return function(t){return function(n){return function(o){return function(h){return function(a){return e(t,n,o,h,a)}}}}}};var wx=function(e){return function(t){for(var n=t.length,o=Array(n),h=0;h<n;h++)o[h]=e(h)(t[h]);return o}};var gl=function(e){return e.mapWithIndex};var md={mapWithIndex:wx,Functor0:function(){return mt}};var Mx=function(){function e(h){return[h]}function t(h){return function(a){return[h,a]}}function n(h){return function(a){return function(r){return[h,a,r]}}}function o(h){return function(a){return h.concat(a)}}return function(h){return function(a){return function(r){return function(l){return function(u){function i(s,f){switch(f-s){case 0:return r([]);case 1:return a(e)(l(u[s]));case 2:return h(a(t)(l(u[s])))(l(u[s+1]));case 3:return h(h(a(n)(l(u[s])))(l(u[s+1])))(l(u[s+2]));default:var p=s+Math.floor((f-s)/4)*2;return h(a(o)(i(s,p)))(i(p,f))}}return i(0,u.length)}}}}}}();var pU=he(_e),Sn=function(e){return e.traverse};var Zs={traverse:function(e){var t=X(e),n=z(e.Apply0().Functor0());return function(o){return function(h){if(h instanceof V)return t(V.value);if(h instanceof W)return n(W.create)(o(h.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[o.constructor.name,h.constructor.name])}}},sequence:function(e){var t=X(e),n=z(e.Apply0().Functor0());return function(o){if(o instanceof V)return t(V.value);if(o instanceof W)return n(W.create)(o.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[o.constructor.name])}},Functor0:function(){return Dt},Foldable1:function(){return $t}};var Nx=function(e){var t=Sn(e);return function(n){return t(n)(pU)}},Mu={traverse:function(e){var t=e.Apply0();return Mx(ht(t))(z(t.Functor0()))(X(e))},sequence:function(e){return Nx(Mu)(e)},Functor0:function(){return mt},Foldable1:function(){return vt}};var Bx=function(e){return function(t){return function(n){return function(o){return function(h){return function(a){for(var r=[],l=a;;){var u=h(l);if(e(u))return r;var i=t(u);r.push(n(i)),l=o(i)}}}}}}};var Wx=function(e){return function(t){return function(n){return function(o){return function(h){return function(a){for(var r=[],l=a;;){var u=h(l);r.push(n(u));var i=o(u);if(e(i))return r;l=t(i)}}}}}}};var s_=function(e){return e.foldl1};var bU=xo();var E0={unfoldr1:Wx(wu)(bU)(rr)(hn)};var SU=xo(),_a=function(e){return e.unfoldr};var Jo={unfoldr:Bx(wu)(SU)(rr)(hn),Unfoldable10:function(){return E0}};var TU=st(zs);var MU=z(mt),FU=z(zs),T0=xo(),xU=An(Yh),LU=Qf(bi),AU=Re(bi);var IU=Qs(vt),RU=De(sn);var Vx=Ys(XM);var M0=function(){return Vx(ee.create)}();var f_=function(){return Ys(Wy)(me(V.value))(function(e){return function(t){return new W({head:e,tail:t})}})}();var F0=function(){return Ys(Wy)(me(V.value))(function(e){return function(t){return new W(t)}})}(),d_=function(e){return Ys(KM)(e)(function(t){if(t instanceof se)return 1;if(t instanceof qe)return 0;if(t instanceof de)return-1;throw new Error("Failed pattern match at Data.Array (line 897, column 38 - line 900, column 11): "+[t.constructor.name])})},x0=function(e){var t=qh(e);return function(n){return d_(t(n))}},$U=x0(yt),L0=function(e){var t=Te(e);return function(n){return d_(t)(n)}};var l_=Ys(QM);var ec=function(e){return[e]};var A0=Xs(WM);var tc=function(e){return tr(e)===0};var zx=gl(md);var Gx=function(){return D0(GM)(W.create)(V.value)}();var p_=function(){return Tu(qM)(W.create)(V.value)}(),bl=function(e){return p_(e)(tr(e)-1|0)};var Jx=function(e){return function(t){var n=function(h){var a=!1,r;function l(u){var i=p_(t)(u);if(i instanceof W){var s=e(i.value0);if(s){h=u+1|0;return}return a=!0,new W(u)}if(i instanceof V)return a=!0,V.value;throw new Error("Failed pattern match at Data.Array (line 1035, column 5 - line 1037, column 25): "+[i.constructor.name])}for(;!a;)r=l(h);return r},o=n(0);if(o instanceof W&&o.value0===0)return{init:[],rest:t};if(o instanceof W)return{init:l_(0)(o.value0)(t),rest:l_(o.value0)(tr(t))(t)};if(o instanceof V)return{init:t,rest:[]};throw new Error("Failed pattern match at Data.Array (line 1022, column 3 - line 1028, column 30): "+[o.constructor.name])}},h_=function(e){return function(t){return Jx(e)(t).init}};var Ai=function(e){return p_(e)(0)},jx=function(e){return function(t){var n=d_(function(h){return function(a){return e(hn(h))(hn(a))}})(zx(ee.create)(t)),o=Ai(n);if(o instanceof V)return[];if(o instanceof W)return MU(hn)($U(rr)(function(){var a=ox(ec(o.value0))();return rd(n)(function(r){return function(){var u=FU(function(){var i=function(s){return T0(bl(s))};return function(s){return hn(i(s))}}())(i0(a))();return xU(LU(e(u)(r.value1))(qe.value))(TU(u0(r)(a)))()}})(),i0(a)()}()));throw new Error("Failed pattern match at Data.Array (line 1115, column 17 - line 1123, column 28): "+[o.constructor.name])}},gd=function(e){return jx(Te(e))};var Ii=function(e){return Xs(UM)(vn(e))};var Kx=function(e){return IU(e)};var Qx=function(){return Tu(zM)(W.create)(V.value)}(),yd=function(e){return function(t){return function(n){var o=Qe(0)(function(h){return h+1|0})(Qx(function(h){return AU(e(t)(h))(se.value)})(n));return T0(Gx(o)(t)(n))}}};var Xx=function(){return Tu(VM)(W.create)(V.value)}();var I0=Xs(jM);var R0=function(e){return function(t){var n=e<1;return n?t:l_(e)(tr(t))(t)}};var Yx=function(){return Tu(JM)(W.create)(V.value)}(),__=function(e){return function(t){return function(n){return n.length===0?[]:Qe(n)(function(o){return T0(Yx(o)(n))})(Xx(e(t))(n))}}},$0=function(e){return __(Re(e))};var Tn=function(e){return function(t){return RU([e])(t)}};var H0=$e(Z(gu)),Wa=function(e){return H0(function(){var t=Qe([])(ec);return function(n){return t(e(n))}}())};var Dd=function(e){return e.foldrWithIndex};var ao=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var P0=function(e){var t=zr(e);return function(n){return new ao(n,t)}};var m_=function(e){var t=On(e.Plus1().Alt0()),n=X(e.Applicative0());return function(o){return t(n(o.value0))(o.value1)}};var bd=function(e){var t=z(e);return{map:function(n){return function(o){return new ao(n(o.value0),t(n)(o.value1))}}}};var v_=function(e){var t=kn(e),n=_n(e),o=vn(e);return{foldMap:function(h){var a=De(h.Semigroup0()),r=t(h);return function(l){return function(u){return a(l(u.value0))(r(l)(u.value1))}}},foldl:function(h){return function(a){return function(r){return n(h)(h(a)(r.value0))(r.value1)}}},foldr:function(h){return function(a){return function(r){return h(r.value0)(o(h)(a)(r.value1))}}}}};var k0=function(e){var t=_n(e),n=vn(e),o=v_(e);return{foldMap1:function(h){var a=De(h);return function(r){return function(l){return t(function(u){return function(i){return a(u)(r(i))}})(r(l.value0))(l.value1)}}},foldr1:function(h){return function(a){return Qe(a.value0)(h(a.value0))(n(function(r){var l=Qe(r)(h(r));return function(u){return W.create(l(u))}})(V.value)(a.value1))}},foldl1:function(h){return function(a){return t(h)(a.value0)(a.value1)}},Foldable0:function(){return o}}};var nL=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Ar=function(e){return e};var g_=function(e){return function(t){return t.toString(e)}};var y_=isFinite;var wd=Math.abs;var Sd=function(e){return function(t){return e%t}},B0=Math.round;var oL=Fo(sl),aL=da(sl);var W0=16;var U0=function(){return nL(W.create)(V.value)}(),YU=function(e){if(!y_(e))return 0;if(e>=Ar(oL))return oL;if(e<=Ar(aL))return aL;if(pn)return nr(0)(U0(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},wl=function(e){return YU(B0(e))};var ZU=typeof Array.from=="function",e4=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",t4=typeof String.prototype.fromCodePoint=="function",n4=typeof String.prototype.codePointAt=="function",iL=function(e){return n4?function(t){return t.codePointAt(0)}:e};var uL=function(e){return t4?String.fromCodePoint:e},sL=function(e){return function(t){return e4?function(n){for(var o="",h=n[Symbol.iterator](),a=0;a<t;++a){var r=h.next();if(r.done)return o;o+=r.value}return o}:e(t)}},cL=function(e){return function(t){return ZU?function(n){return Array.from(n,t)}:e}};function Fu(e){return e.charCodeAt(0)}function lL(e){return String.fromCharCode(e)}var Ed={Applicative0:function(){return rl},Plus1:function(){return fx}};var dL=da(Us),pL=Fo(Us);var rc=function(e){return e.toEnum};var V0=function(e){return e.fromEnum},hL=function(e){var t=rc(e),n=V0(e),o=da(e.Bounded0());return function(h){return function(a){return function(r){var l=t(r);if(l instanceof W)return l.value0;if(l instanceof V){var u=r<n(o);return u?h:a}throw new Error("Failed pattern match at Data.Enum (line 158, column 33 - line 160, column 62): "+[l.constructor.name])}}}};var xu=function(e){return function(t){return function(n){return e(t(n)+1|0)}}},Lu=function(e){return function(t){return function(n){return e(t(n)-1|0)}}};var q0=function(e){return e>=Fu(dL)&&e<=Fu(pL)?new W(lL(e)):V.value},u4={succ:xu(q0)(Fu),pred:Lu(q0)(Fu),Ord0:function(){return Uh}};var z0=function(){return{cardinality:Fu(pL)-Fu(dL)|0,toEnum:q0,fromEnum:Fu,Bounded0:function(){return Us},Enum1:function(){return u4}}}();var D_=function(e){return e};var Au=function(e){return e.length};var C_=function(e){return function(t){return t.substr(0,e)}},oc=function(e){return function(t){return t.substring(e)}};var Iu=function(e){return function(t){if(e>=0&&e<t.length)return t.charAt(e);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var mL=function(e){return function(t){return oc(Au(t)-e|0)(t)}};var b_=function(e){return function(t){return C_(Au(t)-e|0)(t)}};var G0=function(e){return function(t){return t.split(e)}};var _o=function(e){return function(t){return t.join(e)}};var DL=function(e){return e===""};var Md=V0(z0),m4=z(Dt),v4=_a(Jo),g4=td(hl),y4=pl(hl);var bL=function(e){return function(t){return(((e-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var wL=function(e){return 56320<=e&&e<=57343},SL=function(e){return 55296<=e&&e<=56319},EL=function(e){var t=Au(e);if(t===0)return V.value;if(t===1)return new W({head:Md(Iu(0)(e)),tail:""});var n=Md(Iu(1)(e)),o=Md(Iu(0)(e)),h=SL(o)&&wL(n);return h?new W({head:bL(o)(n),tail:oc(2)(e)}):new W({head:o,tail:oc(1)(e)})},D4=function(e){return m4(function(t){return new ee(t.head,t.tail)})(EL(e))},C4=function(e){return v4(D4)(e)},b4=function(e){var t=Md(Iu(0)(e)),n=SL(t)&&Au(e)>1;if(n){var o=Md(Iu(1)(e)),h=wL(o);return h?bL(t)(o):t}return t},w4=iL(b4),S4=cL(C4)(w4),ac=function(e){return tr(S4(e))};var J0=function(){var e=hL(z0)(da(Us))(Fo(Us));return function(t){return D_(e(t))}}(),E4=function(e){if(e<=65535)return J0(e);var t=g4(e-65536|0)(1024)+55296|0,n=y4(e-65536|0)(1024)+56320|0;return J0(t)+J0(n)};var TL=uL(E4),ML=function(e){return function(t){if(e<1)return"";var n=EL(t);return n instanceof W?TL(n.value0.head)+ML(e-1|0)(n.value0.tail):t}},FL=sL(ML);var w_=function(e){return function(t){return oc(Au(FL(e)(t)))(t)}};var j0=Jy(yt),xL=Ei(yt),LL=ul(yt);var K0=Jy(Si);var AL=Se(Sr);var IL=function(){function e(t,n,o,h){this.value0=t,this.value1=n,this.value2=o,this.value3=h}return e.create=function(t){return function(n){return function(o){return function(h){return new e(t,n,o,h)}}}},e}(),RL=function(e){return function(t){return Sd(Sd(e)(t)+t)(t)}},L4=function(e){return function(t){return function(n){return function(o){var h=j0(0)(255)(e),a=Ar(h)/255,r=j0(0)(255)(t),l=Ar(r)/255,u=j0(0)(255)(n),i=xL(xL(h)(r))(u),s=LL(LL(h)(r))(u),f=i-s|0,p=Ar(f)/255,d=Ar(i+s|0)/(255*2),c=function(){if(f===0)return 0;if(pn)return p/(1-wd(2*d-1));throw new Error("Failed pattern match at Color (line 160, column 3 - line 162, column 64): ")}(),_=Ar(u)/255,m=function(y){if(y===0)return 0;if(i===h)return RL((l-_)/p)(6);if(i===r)return(_-a)/p+2;if(pn)return(a-l)/p+4;throw new Error("Failed pattern match at Color (line 150, column 3 - line 150, column 15): "+[y.constructor.name])},v=60*m(f);return new IL(v,c,d,o)}}}},Ru=function(e){return function(t){return function(n){return L4(e)(t)(n)(1)}}};var A4=function(e){return function(t){return function(n){return function(o){var h=K0(0)(1)(t),a=K0(0)(1)(n),r=K0(0)(1)(o);return new IL(e,h,a,r)}}}};var $L=function(e){return function(t){return function(n){return A4(e)(t)(n)(1)}}},HL=$L(0)(0)(1);var OL=function(e){var t=function(l){return AL(Ar(wl(100*l))/100)},n=t(e.value1*100)+"%",o=t(e.value2*100)+"%",h=t(e.value0),a=AL(e.value3),r=e.value3===1;return r?"hsl("+(h+(", "+(n+(", "+(o+")"))))):"hsla("+(h+(", "+(n+(", "+(o+(", "+(a+")")))))))};var I4=function(e){var t=e===360;return t?e:RL(e)(360)};var R4=function(e){var t=I4(e.value0)/60,n=(1-wd(2*e.value2-1))*e.value1,o=e.value2-n/2,h=n*(1-wd(Sd(t)(2)-1)),a=function(){if(t<1)return{r:n,g:h,b:0};if(1<=t&&t<2)return{r:h,g:n,b:0};if(2<=t&&t<3)return{r:0,g:n,b:h};if(3<=t&&t<4)return{r:0,g:h,b:n};if(4<=t&&t<5)return{r:h,g:0,b:n};if(pn)return{r:n,g:0,b:h};throw new Error("Failed pattern match at Color (line 356, column 3 - line 362, column 43): ")}();return{r:a.r+o,g:a.g+o,b:a.b+o,a:e.value3}};var $4=function(e){var t=R4(e),n=wl(255*t.g),o=wl(255*t.r),h=wl(255*t.b);return{r:o,g:n,b:h,a:t.a}};var Tl=function(e){var t=function(h){var a=g_(W0)(h),r=ac(a)===1;return r?"0"+a:a},n=$4(e),o=function(){if(n.a===1)return"";if(pn)return t(wl(255*n.a));throw new Error("Failed pattern match at Color (line 429, column 3 - line 431, column 46): ")}();return"#"+(t(n.r)+(t(n.g)+(t(n.b)+o)))};var qa=$L(0)(0)(0);var S_={dimap:function(e){return function(t){return function(n){return function(o){return t(n(e(o)))}}}}},uc=function(e){return e.dimap};var jo={first:function(e){return function(t){return new ee(e(t.value0),t.value1)}},second:z(Li),Profunctor0:function(){return S_}},sc=function(e){return e.second},Ml=function(e){return e.first};var kL=z(mt),NL=sc(jo),H4=De(sn),O4=a_(vt)(no);var io=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),P4=function(e){return e};var k4=function(e){return e},Ga=function(e){return e.value};var Fl={append:function(e){return function(t){if(e instanceof uo&&t instanceof uo)return new uo(e.value0+t.value0);if(e instanceof uo&&t instanceof io)return new io(kL(NL(function(n){return e.value0+n}))(t.value0));if(e instanceof io&&t instanceof uo)return new io(kL(NL(function(n){return t.value0+n}))(e.value0));if(e instanceof io&&t instanceof io)return new io(H4(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},N4=De(Fl),Q0={append:function(e){return function(t){return N4(e)(t)}}},BL=De(Q0);var Fd=function(e){if(e instanceof io)return nr("")(O4("")(e.value0));if(e instanceof uo)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var E_=function(){return{fromString:uo.create}}(),WL=Mt(E_),or={fromString:function(e){return P4(WL(e))}},T_=Mt(or);var Hu={value:function(e){return T_(OL(e))}};var cc={value:function(){var e=Se(Sr);return function(t){return T_(e(t))}}()},Ou={value:T_},Ri=function(e){var t=Ga(e);return function(n){var o=Ga(n);return{value:function(h){return BL(t(h.value0))(BL(T_(" "))(o(h.value1)))}}}};var zn={fromString:function(e){return k4(WL(e))}};var UL=function(e){return e};var qL=function(e){return e.center};var xd=function(){return new io([new ee("-webkit-",""),new ee("-moz-",""),new ee("-ms-",""),new ee("-o-",""),new ee("","")])}();var Ja=ne,X0=ne;var Y0=De(Q0),Z0=Ga(cc),eD=Mt(or),zL=Se(Sr),B4=De(Fl);var Ld=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),W4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),U4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),q4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),V4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Pu=function(e){if(e instanceof Ld)return Fd(e.value0);if(e instanceof W4)return Ja(function(t){return Ja(function(n){return"("+(Pu(t)+(" + "+(Pu(n)+")")))})(e.value1)})(e.value0);if(e instanceof U4)return Ja(function(t){return Ja(function(n){return"("+(Pu(t)+(" - "+(Pu(n)+")")))})(e.value1)})(e.value0);if(e instanceof q4)return Ja(function(t){return"("+(zL(e.value0)+(" * "+(Pu(t)+")")))})(e.value1);if(e instanceof V4)return Ja(function(t){return"("+(Pu(t)+(" / "+(zL(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},ga={value:function(e){return e instanceof Ld?e.value0:B4(xd)(new uo("calc"+Pu(e)))}};var et=function(e){return new Ld(Y0(Z0(e))(eD("px")))};var Ll=function(e){return new Ld(Y0(Z0(e))(eD("%")))};var tD=function(e){return new Ld(Y0(Z0(e))(eD("em")))};var z4=De(sn),GL=X(rl),G4=Re(Ci(no)),Ir=Te(zt),J4=Te(Ws(zt)),ku=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Oi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Uu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Pi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Al=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),JL=function(e){return e},M_=function(){function e(){}return e.value=new e,e}(),nD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),oD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jL=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),KL=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ad=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ft=function(e){return function(t){return new Ad(z4(e.value0)(t),e.value1)}},Vt=function(){return new Ad([],M_.value)}(),QL=function(e){return JL(GL(Pi.create(e)))};var j4={eq:function(e){return function(t){return e instanceof ku&&t instanceof ku||e instanceof Oi&&t instanceof Oi||e instanceof Nu&&t instanceof Nu?e.value0===t.value0:e instanceof Bu&&t instanceof Bu||e instanceof Wu&&t instanceof Wu||e instanceof Uu&&t instanceof Uu||e instanceof qu&&t instanceof qu||e instanceof Vu&&t instanceof Vu||e instanceof zu&&t instanceof zu?e.value0===t.value0&&e.value1===t.value1:e instanceof Pi&&t instanceof Pi?e.value0===t.value0:e instanceof Al&&t instanceof Al?e.value0===t.value0&&G4(e.value1)(t.value1):!1}}};var XL={compare:function(e){return function(t){if(e instanceof ku&&t instanceof ku)return Ir(e.value0)(t.value0);if(e instanceof ku)return de.value;if(t instanceof ku)return se.value;if(e instanceof Oi&&t instanceof Oi)return Ir(e.value0)(t.value0);if(e instanceof Oi)return de.value;if(t instanceof Oi)return se.value;if(e instanceof Nu&&t instanceof Nu)return Ir(e.value0)(t.value0);if(e instanceof Nu)return de.value;if(t instanceof Nu)return se.value;if(e instanceof Bu&&t instanceof Bu){var n=Ir(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Ir(e.value1)(t.value1)}if(e instanceof Bu)return de.value;if(t instanceof Bu)return se.value;if(e instanceof Wu&&t instanceof Wu){var n=Ir(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Ir(e.value1)(t.value1)}if(e instanceof Wu)return de.value;if(t instanceof Wu)return se.value;if(e instanceof Uu&&t instanceof Uu){var n=Ir(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Ir(e.value1)(t.value1)}if(e instanceof Uu)return de.value;if(t instanceof Uu)return se.value;if(e instanceof qu&&t instanceof qu){var n=Ir(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Ir(e.value1)(t.value1)}if(e instanceof qu)return de.value;if(t instanceof qu)return se.value;if(e instanceof Vu&&t instanceof Vu){var n=Ir(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Ir(e.value1)(t.value1)}if(e instanceof Vu)return de.value;if(t instanceof Vu)return se.value;if(e instanceof zu&&t instanceof zu){var n=Ir(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Ir(e.value1)(t.value1)}if(e instanceof zu)return de.value;if(t instanceof zu)return se.value;if(e instanceof Pi&&t instanceof Pi)return Ir(e.value0)(t.value0);if(e instanceof Pi)return de.value;if(t instanceof Pi)return se.value;if(e instanceof Al&&t instanceof Al){var n=Ir(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:J4(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return j4}};var F_=function(e){return new Ad([],new nD(e))},Gn=function(e){return function(t){return new Ad([],new oD(e,t))}},YL=function(e){return function(t){return new Ad([],new rD(e,t))}};var Ct=function(e){return JL(GL(Oi.create(e)))};var ya=function(e){return e.tell};function ar(e){return new Error(e)}function vo(e){return function(){throw e}}function x_(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var iD=function(e){return vo(ar(e))};var ir=function(e){return e.throwError};var X4={throwError:vo,Monad0:function(){return Na}};var ZL={catchError:$e(x_),MonadThrow0:function(){return X4}};var Ko=function(e){return e.catchError};var Id=function(e){var t=Ko(e),n=e.MonadThrow0().Monad0(),o=z(n.Bind1().Apply0().Functor0()),h=X(n.Applicative0());return function(a){return t(o(Oe.create)(a))(function(r){return h(We.create(r))})}};var Rr=function(e){return e.ask};var so=function(e){return e.state},Rl=function(e){var t=so(e);return function(n){return t(function(o){return new ee(void 0,n)})}},gn=function(e){var t=so(e);return function(n){return t(function(o){return new ee(void 0,n(o))})}},Ao=function(e){var t=so(e);return function(n){return t(function(o){var h=n(o);return new ee(h,h)})}},Io=function(e){var t=so(e);return function(n){return t(function(o){return new ee(n(o),o)})}},$r=function(e){return so(e)(function(t){return new ee(t,t)})};var wt=function(e){return e.lift};var $l={liftEffect:he(_e),Monad0:function(){return Na}},Le=function(e){return e.liftEffect};var uD=function(e){return e},sD=function(e){return e};var L_=function(e){return function(t){return e(t)}},cD=function(e){var t=z(e);return{map:function(n){return L_(t(function(o){return new ee(n(o.value0),o.value1)}))}}};var Rd=function(e){var t=De(e);return function(n){var o=ht(n),h=n.Functor0(),a=z(h),r=cD(h);return{apply:function(l){return function(u){var i=function(s){return function(f){return new ee(s.value0(f.value0),t(s.value1)(f.value1))}};return o(a(i)(l))(u)}},Functor0:function(){return r}}}},lD=function(e){var t=De(e),n=Rd(e);return function(o){var h=Z(o),a=o.Apply0(),r=z(a.Functor0()),l=n(a);return{bind:function(u){return function(i){return h(u)(function(s){var f=i(s.value0);return r(function(p){return new ee(p.value0,t(s.value1)(p.value1))})(f)})}},Apply0:function(){return l}}}};var eA=function(e){var t=ct(e),n=Rd(e.Semigroup0());return function(o){var h=X(o),a=n(o.Apply0());return{pure:function(r){return h(new ee(r,t))},Apply0:function(){return a}}}},e6=function(e){var t=eA(e),n=lD(e.Semigroup0());return function(o){var h=t(o.Applicative0()),a=n(o.Bind1());return{Applicative0:function(){return h},Bind1:function(){return a}}}};var tA=function(e){var t=e.Semigroup0(),n=e6(e);return function(o){var h=n(o);return{tell:function(){var a=X(o.Applicative0()),r=ee.create(void 0);return function(l){return uD(a(r(l)))}}(),Semigroup0:function(){return t},Monad1:function(){return h}}}};var t6=In();var n6=function(e){return t6(sD(e))};var nA=function(e){return hn(n6(e))};var i6=z(cD(Mi));var u6=ht(Rd(sn)(jh)),s6=Z(lD(sn)(Xy));var rA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),oA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),aA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),iA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$d=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),dD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),uA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var c6=function(e){return e},Hd=function(e){return nA(e)},fA=function(){var e=ya(tA(Vs)(Tr));return function(t){return c6(e(ec(t)))}}(),Ft=function(e){return function(t){return fA(new dD(new fD(e),Hd(t)))}};var jt=function(e){var t=Ga(e);return function(n){return function(o){return fA(new $d(UL(n),t(o)))}}},pD=function(e){var t=jt(e);return function(n){return t(n)}};var l6={map:function(e){return function(t){return i6(e)(t)}}};var f6={apply:function(e){return function(t){return u6(e)(t)}},Functor0:function(){return l6}},yo={bind:function(e){return function(t){return s6(e)(function(n){return function(o){return o}(t(n))})}},Apply0:function(){return f6}};var d6=Mt(or);var dA=Mt(zn),p6=jt(Hu),h6=Ri(ga);var _6={value:function(e){return e}},m6=jt(Ri(_6)(h6(Hu))),Od=d6("solid");var pA=p6(dA("border-color"));var Pd=function(e){return function(t){return function(n){return m6(dA("border"))(new ee(e,new ee(t,n)))}}};var I_=Mt(zn),Ol=Mt(or);var Ro=function(){var e=jt(Ou)(I_("z-index")),t=Se(Er);return function(n){return e(t(n))}}();var v6={value:function(e){return e}};var g6={value:function(e){return e}};var Ju=Ol("relative"),hr=jt(v6)(I_("position")),R_=jt(cc)(I_("opacity"));var hA=Ol("inline-block");var Ni=Ol("flex");var _A=Ol("none");var $o=jt(g6)(I_("display"));var mA=Ol("block"),Da=Ol("absolute");var mD=Mt(or);var vA=Mt(zn);var y6=function(e){return e};var D6={value:function(e){return e}};var C6={value:function(e){return e}};var ju=mD("row");var b6={fromString:function(e){return y6(mD(e))}},w6=Mt(b6);var Bi=jt(D6)(vA("flex-direction"));var gA=mD("column");var yA={center:w6("center")};var DA=jt(C6)(vA("align-items"));var Ku=jt(ga),ja=Mt(zn),CA=Ri(ga)(ga),bA=jt(Ri(CA)(CA)),Ca=Ku(ja("width")),Xo=Ku(ja("top")),H_=Ku(ja("right"));var vD=Ku(ja("padding-right"));var O_=function(e){return function(t){return function(n){return function(o){return bA(ja("padding"))(new ee(new ee(e,t),new ee(n,o)))}}}};var gD=Ku(ja("margin-right"));var wA=function(e){return function(t){return function(n){return function(o){return bA(ja("margin"))(new ee(new ee(e,t),new ee(n,o)))}}}};var Wi=Ku(ja("left")),Ho=Ku(ja("height")),yD=Ku(ja("bottom"));var Ye=function(){function e(){}return e.value=new e,e}(),Xe=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),DD=function(e){return e},E6=function(e){return new Xe(e.value0,e.value1)};var T6=function(e){var t=function(n){return function(o){var h=n,a=!1,r;function l(u,i){if(i instanceof Xe&&i.value1 instanceof Xe&&i.value1.value1 instanceof Xe){h=new Xe(i,u),o=i.value1.value1.value1;return}var s=function(p){return p instanceof Xe&&p.value1 instanceof Xe&&p.value1.value1 instanceof Ye?new Xe(e(p.value0),new Xe(e(p.value1.value0),Ye.value)):p instanceof Xe&&p.value1 instanceof Ye?new Xe(e(p.value0),Ye.value):Ye.value},f=function(p){return function(d){var c=p,_=!1,m;function v(y,C){if(y instanceof Xe&&y.value0 instanceof Xe&&y.value0.value1 instanceof Xe&&y.value0.value1.value1 instanceof Xe){c=y.value1,d=new Xe(e(y.value0.value0),new Xe(e(y.value0.value1.value0),new Xe(e(y.value0.value1.value1.value0),C)));return}return _=!0,C}for(;!_;)m=v(c,d);return m}};return a=!0,f(u)(s(i))}for(;!a;)r=l(h,o);return r}};return t(Ye.value)},EA={map:T6};var Bn={foldr:function(e){return function(t){var n=function(){var h=function(a){return function(r){var l=a,u=!1,i;function s(f,p){if(p instanceof Ye)return u=!0,f;if(p instanceof Xe){l=new Xe(p.value0,f),r=p.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[f.constructor.name,p.constructor.name])}for(;!u;)i=s(l,r);return i}};return h(Ye.value)}(),o=_n(Bn)($e(e))(t);return function(h){return o(n(h))}}},foldl:function(e){var t=function(n){return function(o){var h=n,a=!1,r;function l(u,i){if(i instanceof Ye)return a=!0,u;if(i instanceof Xe){h=e(u)(i.value0),o=i.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[i.constructor.name])}for(;!a;)r=l(h,o);return r}};return t},foldMap:function(e){var t=De(e.Semigroup0()),n=ct(e);return function(o){return _n(Bn)(function(h){var a=t(h);return function(r){return a(o(r))}})(n)}}};var M6=vn(Bn);var CD={append:function(e){return function(t){return M6(Xe.create)(t)(e)}}},TA=De(CD);var MA={append:function(e){return function(t){return new ao(e.value0,TA(e.value1)(E6(t)))}}};var F6={alt:TA,Functor0:function(){return EA}},FA=function(){return{empty:Ye.value,Alt0:function(){return F6}}}();var pc=function(e,t,n){var o=0,h;return function(a){if(o===2)return h;if(o===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return o=1,h=n(),o=2,h}};var L6=z(Dt);var At=function(){function e(){}return e.value=new e,e}(),kt=function(){function e(t,n,o,h,a,r){this.value0=t,this.value1=n,this.value2=o,this.value3=h,this.value4=a,this.value5=r}return e.create=function(t){return function(n){return function(o){return function(h){return function(a){return function(r){return new e(t,n,o,h,a,r)}}}}}},e}(),LA=function(){function e(){}return e.value=new e,e}(),bD=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),ED=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var P_=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),xA=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),Yo=function(e,t,n,o){if(n instanceof At){if(o instanceof At)return new kt(1,1,e,t,n,o);if(o instanceof kt)return new kt(1+o.value0|0,1+o.value1|0,e,t,n,o);throw new Error("Failed pattern match at Data.Map.Internal (line 680, column 5 - line 684, column 39): "+[o.constructor.name])}if(n instanceof kt){if(o instanceof At)return new kt(1+n.value0|0,1+n.value1|0,e,t,n,o);if(o instanceof kt)return new kt(1+function(){var h=n.value0>o.value0;return h?n.value0:o.value0}()|0,(1+n.value1|0)+o.value1|0,e,t,n,o);throw new Error("Failed pattern match at Data.Map.Internal (line 686, column 5 - line 690, column 68): "+[o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 678, column 32 - line 690, column 68): "+[n.constructor.name])},A6=function(){return $e(ED.create)(LA.value)}(),I6=function(e){return function(t){return function(n){var o=function(h){var a=!1,r;function l(u){if(u instanceof LA)return a=!0,n(void 0);if(u instanceof bD)return a=!0,t(u.value0,u.value1,u.value2);if(u instanceof ED){h=e(u.value1)(u.value0);return}throw new Error("Failed pattern match at Data.Map.Internal (line 918, column 8 - line 924, column 20): "+[u.constructor.name])}for(;!a;)r=l(h);return r};return o}}},Qu=function(e){if(e instanceof At)return 0;if(e instanceof kt)return e.value1;throw new Error("Failed pattern match at Data.Map.Internal (line 616, column 8 - line 618, column 24): "+[e.constructor.name])},hc=function(e){return function(t){return new kt(1,1,e,t,At.value,At.value)}},ba=function(){var e=function(o){if(o instanceof At)return 0;if(o instanceof kt)return o.value0;throw new Error("Failed pattern match at Data.Map.Internal (line 735, column 12 - line 737, column 26): "+[o.constructor.name])},t=function(o,h,a,r,l,u,i){return u instanceof kt&&u.value0>e(i)?Yo(u.value2,u.value3,Yo(o,h,a,u.value4),Yo(r,l,u.value5,i)):Yo(r,l,Yo(o,h,a,u),i)},n=function(o,h,a,r,l,u,i){return u instanceof kt&&e(l)<=u.value0?Yo(u.value2,u.value3,Yo(a,r,l,u.value4),Yo(o,h,u.value5,i)):Yo(a,r,l,Yo(o,h,u,i))};return function(o,h,a,r){if(a instanceof At)return r instanceof At?hc(o)(h):r instanceof kt&&r.value0>1?t(o,h,a,r.value2,r.value3,r.value4,r.value5):Yo(o,h,a,r);if(a instanceof kt){if(r instanceof kt){if(r.value0>(a.value0+1|0))return t(o,h,a,r.value2,r.value3,r.value4,r.value5);if(a.value0>(r.value0+1|0))return n(o,h,a.value2,a.value3,a.value4,a.value5,r)}return r instanceof At&&a.value0>1?n(o,h,a.value2,a.value3,a.value4,a.value5,r):Yo(o,h,a,r)}throw new Error("Failed pattern match at Data.Map.Internal (line 695, column 40 - line 716, column 34): "+[a.constructor.name])}}(),wD=pc("unsafeSplit","Data.Map.Internal",function(){return function(e,t,n){if(n instanceof At)return new P_(V.value,At.value,At.value);if(n instanceof kt){var o=e(t)(n.value2);if(o instanceof de){var h=wD(771)(e,t,n.value4);return new P_(h.value0,h.value1,ba(n.value2,n.value3,h.value2,n.value5))}if(o instanceof se){var h=wD(774)(e,t,n.value5);return new P_(h.value0,ba(n.value2,n.value3,n.value4,h.value1),h.value2)}if(o instanceof qe)return new P_(new W(n.value3),n.value4,n.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 769, column 5 - line 777, column 30): "+[o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 765, column 34 - line 777, column 30): "+[n.constructor.name])}}),TD=wD(764),AA=pc("unsafeSplitLast","Data.Map.Internal",function(){return function(e,t,n,o){if(o instanceof At)return new xA(e,t,n);if(o instanceof kt){var h=AA(757)(o.value2,o.value3,o.value4,o.value5);return new xA(h.value0,h.value1,ba(e,t,n,h.value2))}throw new Error("Failed pattern match at Data.Map.Internal (line 754, column 37 - line 758, column 57): "+[o.constructor.name])}}),R6=AA(753),MD=function(e,t){if(e instanceof At)return t;if(e instanceof kt){var n=R6(e.value2,e.value3,e.value4,e.value5);return ba(n.value0,n.value1,n.value2,t)}throw new Error("Failed pattern match at Data.Map.Internal (line 742, column 25 - line 746, column 38): "+[e.constructor.name,t.constructor.name])};var SD=pc("unsafeUnionWith","Data.Map.Internal",function(){return function(e,t,n,o){if(n instanceof At)return o;if(o instanceof At)return n;if(o instanceof kt){var h=TD(e,o.value2,n),a=SD(787)(e,t,h.value1,o.value4),r=SD(788)(e,t,h.value2,o.value5);if(h.value0 instanceof W)return ba(o.value2,t(h.value0.value0)(o.value3),a,r);if(h.value0 instanceof V)return ba(o.value2,o.value3,a,r);throw new Error("Failed pattern match at Data.Map.Internal (line 789, column 5 - line 793, column 46): "+[h.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 782, column 42 - line 793, column 46): "+[n.constructor.name,o.constructor.name])}}),$6=SD(781),FD=function(e){var t=Te(e);return function(n){return function(o){return function(h){return $6(t,n,o,h)}}}},k_=function(e){return FD(e)(me)};var xD=function(e){var t=Te(e);return function(n){return function(o){var h=TD(t,n,o);return L6(function(a){return new ee(a,MD(h.value1,h.value2))})(h.value0)}}};var Zo=function(e){var t=Te(e);return function(n){var o=function(h){var a=!1,r;function l(u){if(u instanceof At)return a=!0,V.value;if(u instanceof kt){var i=t(n)(u.value2);if(i instanceof de){h=u.value4;return}if(i instanceof se){h=u.value5;return}if(i instanceof qe)return a=!0,new W(u.value3);throw new Error("Failed pattern match at Data.Map.Internal (line 281, column 7 - line 284, column 22): "+[i.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 278, column 8 - line 284, column 22): "+[u.constructor.name])}for(;!a;)r=l(h);return r};return o}};var H6=function(){var e=function(t){return function(n){var o=t,h=!1,a;function r(l,u){if(u instanceof At)return h=!0,l;if(u instanceof kt){if(u.value5 instanceof At){o=new bD(u.value2,u.value3,l),n=u.value4;return}o=new bD(u.value2,u.value3,new ED(u.value5,l)),n=u.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 929, column 13 - line 936, column 48): "+[u.constructor.name])}for(;!h;)a=r(o,n);return a}};return e}(),O6=I6(H6);var P6=function(){var e=function(t,n,o){return new W(new ee(new ee(t,n),o))};return O6(e)(function(t){return V.value})}(),Nl=function(e){var t=_a(e)(P6);return function(n){return t(A6(n))}};var Jr=function(e){var t=Te(e);return function(n){return function(o){var h=function(a){if(a instanceof At)return hc(n)(o);if(a instanceof kt){var r=t(n)(a.value2);if(r instanceof de)return ba(a.value2,a.value3,h(a.value4),a.value5);if(r instanceof se)return ba(a.value2,a.value3,a.value4,h(a.value5));if(r instanceof qe)return new kt(a.value0,a.value1,n,o,a.value4,a.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 469, column 7 - line 472, column 35): "+[r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 466, column 8 - line 472, column 35): "+[a.constructor.name])};return h}}},Bl={map:function(e){var t=function(n){if(n instanceof At)return At.value;if(n instanceof kt)return new kt(n.value0,n.value1,n.value2,e(n.value3),t(n.value4),t(n.value5));throw new Error("Failed pattern match at Data.Map.Internal (line 145, column 10 - line 148, column 39): "+[n.constructor.name])};return t}};var Ui={foldr:function(e){return function(t){var n=pc("go","Data.Map.Internal",function(){return function(h,a){if(h instanceof At)return a;if(h instanceof kt)return n(170)(h.value4,e(h.value3)(n(170)(h.value5,a)));throw new Error("Failed pattern match at Data.Map.Internal (line 167, column 26 - line 170, column 43): "+[h.constructor.name])}}),o=n(167);return function(h){return o(h,t)}}},foldl:function(e){return function(t){var n=pc("go","Data.Map.Internal",function(){return function(h,a){if(a instanceof At)return h;if(a instanceof kt)return n(176)(e(n(176)(h,a.value4))(a.value3),a.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 173, column 26 - line 176, column 43): "+[a.constructor.name])}}),o=n(173);return function(h){return o(t,h)}}},foldMap:function(e){var t=ct(e),n=De(e.Semigroup0());return function(o){var h=function(a){if(a instanceof At)return t;if(a instanceof kt)return n(h(a.value4))(n(o(a.value3))(h(a.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 179, column 10 - line 182, column 28): "+[a.constructor.name])};return h}}},LD={foldrWithIndex:function(e){return function(t){var n=pc("go","Data.Map.Internal",function(){return function(h,a){if(h instanceof At)return a;if(h instanceof kt)return n(190)(h.value4,e(h.value2)(h.value3)(n(190)(h.value5,a)));throw new Error("Failed pattern match at Data.Map.Internal (line 187, column 26 - line 190, column 45): "+[h.constructor.name])}}),o=n(187);return function(h){return o(h,t)}}},foldlWithIndex:function(e){return function(t){var n=pc("go","Data.Map.Internal",function(){return function(h,a){if(a instanceof At)return h;if(a instanceof kt)return n(196)(e(a.value2)(n(196)(h,a.value4))(a.value3),a.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 193, column 26 - line 196, column 45): "+[a.constructor.name])}}),o=n(193);return function(h){return o(t,h)}}},foldMapWithIndex:function(e){var t=ct(e),n=De(e.Semigroup0());return function(o){var h=function(a){if(a instanceof At)return t;if(a instanceof kt)return n(h(a.value4))(n(o(a.value2)(a.value3))(h(a.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 199, column 10 - line 202, column 30): "+[a.constructor.name])};return h}},Foldable0:function(){return Ui}},IA=function(){return Dd(LD)(function(e){return function(t){return function(n){return new Xe(e,n)}}})(Ye.value)}();var kd=function(){return vn(Ui)(Xe.create)(Ye.value)}();var Ka=function(e){var t=!1,n;function o(h){if(h instanceof At)return t=!0,V.value;if(h instanceof kt){if(h.value4 instanceof At)return t=!0,new W({key:h.value2,value:h.value3});e=h.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 359, column 11 - line 364, column 21): "+[h.constructor.name])}for(;!t;)n=o(e);return n};var Xu=function(e){var t=!1,n;function o(h){if(h instanceof At)return t=!0,V.value;if(h instanceof kt){if(h.value5 instanceof At)return t=!0,new W({key:h.value2,value:h.value3});e=h.value5;return}throw new Error("Failed pattern match at Data.Map.Internal (line 350, column 11 - line 355, column 21): "+[h.constructor.name])}for(;!t;)n=o(e);return n};var mr=function(){return At.value}(),Wl=function(e){var t=Jr(e);return function(n){return _n(n)(function(o){return function(h){return t(h.value0)(h.value1)(o)}})(mr)}};var Qa=function(e){var t=Te(e);return function(n){var o=function(h){if(h instanceof At)return At.value;if(h instanceof kt){var a=t(n)(h.value2);if(a instanceof de)return ba(h.value2,h.value3,o(h.value4),h.value5);if(a instanceof se)return ba(h.value2,h.value3,h.value4,o(h.value5));if(a instanceof qe)return MD(h.value4,h.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 496, column 7 - line 499, column 43): "+[a.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 493, column 8 - line 499, column 43): "+[h.constructor.name])};return o}};var Yu=function(e){var t=Te(e);return function(n){return function(o){return function(h){var a=TD(t,o,h),r=n(a.value0);if(r instanceof V)return MD(a.value1,a.value2);if(r instanceof W)return ba(o,r.value0,a.value1,a.value2);throw new Error("Failed pattern match at Data.Map.Internal (line 512, column 3 - line 516, column 41): "+[r.constructor.name])}}}};var vr=function(){var e={},t="Pure",n="Throw",o="Catch",h="Sync",a="Async",r="Bind",l="Bracket",u="Fork",i="Sequential",s="Map",f="Apply",p="Alt",d="Cons",c="Resume",_="Release",m="Finalizer",v="Finalized",y="Forked",C="Fiber",S="Thunk";function D(N,Q,O,B){this.tag=N,this._1=Q,this._2=O,this._3=B}function g(N){var Q=function(O,B,U){return new D(N,O,B,U)};return Q.tag=N,Q}function b(N){return new D(t,void 0)}function F(N){try{N()}catch(Q){setTimeout(function(){throw Q},0)}}function E(N,Q,O){try{return Q(O())}catch(B){return N(B)}}function T(N,Q,O){try{return Q(O)()}catch(B){return O(N(B))(),b}}var M=function(){var N=1024,Q=0,O=0,B=new Array(N),U=!1;function k(){var te;for(U=!0;Q!==0;)Q--,te=B[O],B[O]=void 0,O=(O+1)%N,te();U=!1}return{isDraining:function(){return U},enqueue:function(te){var J,ye;Q===N&&(ye=U,k(),U=ye),B[(O+Q)%N]=te,Q++,U||k()}}}();function w(N){var Q={},O=0,B=0;return{register:function(U){var k=O++;U.onComplete({rethrow:!0,handler:function(te){return function(){B--,delete Q[k]}}})(),Q[k]=U,B++},isEmpty:function(){return B===0},killAll:function(U,k){return function(){if(B===0)return k();var te=0,J={};function ye(we){J[we]=Q[we].kill(U,function(ce){return function(){delete J[we],te--,N.isLeft(ce)&&N.fromLeft(ce)&&setTimeout(function(){throw N.fromLeft(ce)},0),te===0&&k()}})()}for(var Ae in Q)Q.hasOwnProperty(Ae)&&(te++,ye(Ae));return Q={},O=0,B=0,function(we){return new D(h,function(){for(var ce in J)J.hasOwnProperty(ce)&&J[ce]()})}}}}}var x=0,L=1,R=2,A=3,I=4,$=5,H=6;function P(N,Q,O){var B=0,U=x,k=O,te=null,J=null,ye=null,Ae=null,we=null,ce=0,Fe=0,It=null,un=!0;function Gt(fe){for(var ae,j,ie;;)switch(ae=null,j=null,ie=null,U){case R:U=L;try{k=ye(k),Ae===null?ye=null:(ye=Ae._1,Ae=Ae._2)}catch(Ve){U=$,te=N.left(Ve),k=null}break;case A:N.isLeft(k)?(U=$,te=k,k=null):ye===null?U=$:(U=R,k=N.fromRight(k));break;case L:switch(k.tag){case r:ye&&(Ae=new D(d,ye,Ae)),ye=k._2,U=L,k=k._1;break;case t:ye===null?(U=$,k=N.right(k._1)):(U=R,k=k._1);break;case h:U=A,k=E(N.left,N.right,k._1);break;case a:U=I,k=T(N.left,k._1,function(Ve){return function(){B===fe&&(B++,M.enqueue(function(){B===fe+1&&(U=A,k=Ve,Gt(B))}))}});return;case n:U=$,te=N.left(k._1),k=null;break;case o:ye===null?we=new D(d,k,we,J):we=new D(d,k,new D(d,new D(c,ye,Ae),we,J),J),ye=null,Ae=null,U=L,k=k._1;break;case l:ce++,ye===null?we=new D(d,k,we,J):we=new D(d,k,new D(d,new D(c,ye,Ae),we,J),J),ye=null,Ae=null,U=L,k=k._1;break;case u:U=A,ae=P(N,Q,k._2),Q&&Q.register(ae),k._1&&ae.run(),k=N.right(ae);break;case i:U=L,k=G(N,Q,k._1);break}break;case $:if(ye=null,Ae=null,we===null)U=H,k=J||te||k;else switch(ae=we._3,ie=we._1,we=we._2,ie.tag){case o:J&&J!==ae&&ce===0?U=$:te&&(U=L,k=ie._2(N.fromLeft(te)),te=null);break;case c:J&&J!==ae&&ce===0||te?U=$:(ye=ie._1,Ae=ie._2,U=R,k=N.fromRight(k));break;case l:ce--,te===null&&(j=N.fromRight(k),we=new D(d,new D(_,ie._2,j),we,ae),(J===ae||ce>0)&&(U=L,k=ie._3(j)));break;case _:we=new D(d,new D(v,k,te),we,J),U=L,J&&J!==ae&&ce===0?k=ie._1.killed(N.fromLeft(J))(ie._2):te?k=ie._1.failed(N.fromLeft(te))(ie._2):k=ie._1.completed(N.fromRight(k))(ie._2),te=null,ce++;break;case m:ce++,we=new D(d,new D(v,k,te),we,J),U=L,k=ie._1;break;case v:ce--,U=$,k=ie._1,te=ie._2;break}break;case H:for(var pe in It)It.hasOwnProperty(pe)&&(un=un&&It[pe].rethrow,F(It[pe].handler(k)));It=null,J&&te?setTimeout(function(){throw N.fromLeft(te)},0):N.isLeft(k)&&un&&setTimeout(function(){if(un)throw N.fromLeft(k)},0);return;case x:U=L;break;case I:return}}function tt(fe){return function(){if(U===H)return un=un&&fe.rethrow,fe.handler(k)(),function(){};var ae=Fe++;return It=It||{},It[ae]=fe,function(){It!==null&&delete It[ae]}}}function le(fe,ae){return function(){if(U===H)return ae(N.right(void 0))(),function(){};var j=tt({rethrow:!1,handler:function(){return ae(N.right(void 0))}})();switch(U){case x:J=N.left(fe),U=H,k=J,Gt(B);break;case I:J===null&&(J=N.left(fe)),ce===0&&(U===I&&(we=new D(d,new D(m,k(fe)),we,J)),U=$,k=null,te=null,Gt(++B));break;default:J===null&&(J=N.left(fe)),ce===0&&(U=$,k=null,te=null)}return j}}function ve(fe){return function(){var ae=tt({rethrow:!1,handler:fe})();return U===x&&Gt(B),ae}}return{kill:le,join:ve,onComplete:tt,isSuspended:function(){return U===x},run:function(){U===x&&(M.isDraining()?Gt(B):M.enqueue(function(){Gt(B)}))}}}function q(N,Q,O,B){var U=0,k={},te=0,J={},ye=new Error("[ParAff] Early exit"),Ae=null,we=e;function ce(tt,le,ve){var fe=le,ae=null,j=null,ie=0,pe={},Ve,it;e:for(;;)switch(Ve=null,fe.tag){case y:if(fe._3===e&&(Ve=k[fe._1],pe[ie++]=Ve.kill(tt,function(gt){return function(){ie--,ie===0&&ve(gt)()}})),ae===null)break e;fe=ae._2,j===null?ae=null:(ae=j._1,j=j._2);break;case s:fe=fe._2;break;case f:case p:ae&&(j=new D(d,ae,j)),ae=fe,fe=fe._1;break}if(ie===0)ve(N.right(void 0))();else for(it=0,Ve=ie;it<Ve;it++)pe[it]=pe[it]();return pe}function Fe(tt,le,ve){var fe,ae,j,ie,pe,Ve;for(N.isLeft(tt)?(fe=tt,ae=null):(ae=tt,fe=null);;){if(j=null,ie=null,pe=null,Ve=null,Ae!==null)return;if(le===null){B(fe||ae)();return}if(le._3!==e)return;switch(le.tag){case s:fe===null?(le._3=N.right(le._1(N.fromRight(ae))),ae=le._3):le._3=fe;break;case f:if(j=le._1._3,ie=le._2._3,fe){if(le._3=fe,pe=!0,Ve=te++,J[Ve]=ce(ye,fe===j?le._2:le._1,function(){return function(){delete J[Ve],pe?pe=!1:ve===null?Fe(fe,null,null):Fe(fe,ve._1,ve._2)}}),pe){pe=!1;return}}else{if(j===e||ie===e)return;ae=N.right(N.fromRight(j)(N.fromRight(ie))),le._3=ae}break;case p:if(j=le._1._3,ie=le._2._3,j===e&&N.isLeft(ie)||ie===e&&N.isLeft(j))return;if(j!==e&&N.isLeft(j)&&ie!==e&&N.isLeft(ie))fe=ae===j?ie:j,ae=null,le._3=fe;else if(le._3=ae,pe=!0,Ve=te++,J[Ve]=ce(ye,ae===j?le._2:le._1,function(){return function(){delete J[Ve],pe?pe=!1:ve===null?Fe(ae,null,null):Fe(ae,ve._1,ve._2)}}),pe){pe=!1;return}break}ve===null?le=null:(le=ve._1,ve=ve._2)}}function It(tt){return function(le){return function(){delete k[tt._1],tt._3=le,Fe(le,tt._2._1,tt._2._2)}}}function un(){var tt=L,le=O,ve=null,fe=null,ae,j;e:for(;;)switch(ae=null,j=null,tt){case L:switch(le.tag){case s:ve&&(fe=new D(d,ve,fe)),ve=new D(s,le._1,e,e),le=le._2;break;case f:ve&&(fe=new D(d,ve,fe)),ve=new D(f,e,le._2,e),le=le._1;break;case p:ve&&(fe=new D(d,ve,fe)),ve=new D(p,e,le._2,e),le=le._1;break;default:j=U++,tt=$,ae=le,le=new D(y,j,new D(d,ve,fe),e),ae=P(N,Q,ae),ae.onComplete({rethrow:!1,handler:It(le)})(),k[j]=ae,Q&&Q.register(ae)}break;case $:if(ve===null)break e;ve._1===e?(ve._1=le,tt=L,le=ve._2,ve._2=e):(ve._2=le,le=ve,fe===null?ve=null:(ve=fe._1,fe=fe._2))}for(we=le,j=0;j<U;j++)k[j].run()}function Gt(tt,le){Ae=N.left(tt);var ve;for(var fe in J)if(J.hasOwnProperty(fe)){ve=J[fe];for(fe in ve)ve.hasOwnProperty(fe)&&ve[fe]()}J=null;var ae=ce(tt,we,le);return function(j){return new D(a,function(ie){return function(){for(var pe in ae)ae.hasOwnProperty(pe)&&ae[pe]();return b}})}}return un(),function(tt){return new D(a,function(le){return function(){return Gt(tt,le)}})}}function G(N,Q,O){return new D(a,function(B){return function(){return q(N,Q,O,B)}})}return D.EMPTY=e,D.Pure=g(t),D.Throw=g(n),D.Catch=g(o),D.Sync=g(h),D.Async=g(a),D.Bind=g(r),D.Bracket=g(l),D.Fork=g(u),D.Seq=g(i),D.ParMap=g(s),D.ParApply=g(f),D.ParAlt=g(p),D.Fiber=P,D.Supervisor=w,D.Scheduler=M,D.nonCanceler=b,D}(),RA=vr.Pure,$A=vr.Throw;function HA(e){return function(t){return vr.Catch(e,t)}}function OA(e){return function(t){return t.tag===vr.Pure.tag?vr.Pure(e(t._1)):vr.Bind(t,function(n){return vr.Pure(e(n))})}}function PA(e){return function(t){return vr.Bind(e,t)}}function AD(e){return function(t){return vr.Fork(e,t)}}var kA=vr.Sync;function NA(e){return function(t){return vr.ParMap(e,t)}}function BA(e){return function(t){return vr.ParApply(e,t)}}var wa=vr.Async;function N_(e){return function(t){return function(n){return vr.Bracket(e,t,n)}}}function WA(e,t){return function(){return vr.Fiber(e,null,t)}}var UA=function(){function e(n,o){return n===0&&typeof setImmediate<"u"?setImmediate(o):setTimeout(o,n)}function t(n,o){return n===0&&typeof clearImmediate<"u"?clearImmediate(o):clearTimeout(o)}return function(n,o){return vr.Async(function(h){return function(){var a=e(o,h(n()));return function(){return vr.Sync(function(){return n(t(o,a))})}}})}}(),qA=vr.Seq;var W6=z(Su);var ID=function(e){return e};var RD=function(e){return e};var B_=function(e){return function(t){return e(t)}},W_=function(e){var t=z(e);return{map:function(n){return B_(t(W6(n)))}}};var zA=function(e){return{Applicative0:function(){return Nd(e)},Bind1:function(){return U_(e)}}},U_=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return{bind:function(o){return function(h){return t(o)(bn(function(a){return n(We.create(a))})(function(a){var r=h(a);return r}))}},Apply0:function(){return $D(e)}}},$D=function(e){var t=W_(e.Bind1().Apply0().Functor0());return{apply:wr(zA(e)),Functor0:function(){return t}}},Nd=function(e){return{pure:function(){var t=X(e.Applicative0());return function(n){return ID(t(Oe.create(n)))}}(),Apply0:function(){return $D(e)}}};var GA=function(e){var t=zA(e);return{throwError:function(){var n=X(e.Applicative0());return function(o){return ID(n(We.create(o)))}}(),Monad0:function(){return t}}};var JA=function(e){var t=De(e);return function(n){var o=n.Bind1(),h=Z(o),a=X(n.Applicative0()),r=W_(o.Apply0().Functor0());return{alt:function(l){return function(u){return h(l)(function(i){if(i instanceof Oe)return a(new Oe(i.value0));if(i instanceof We)return h(u)(function(s){if(s instanceof Oe)return a(new Oe(s.value0));if(s instanceof We)return a(new We(t(i.value0)(s.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[s.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[i.constructor.name])})}},Functor0:function(){return r}}}};var U6=z(Dt);var HD=function(e){return e},jA=function(e){return e};var q_={lift:function(e){var t=qy(e)(W.create);return function(n){return HD(t(n))}}},q6=wt(q_);var V6=function(e){var t=z(e);return{map:function(n){return function(o){return t(U6(n))(o)}}}},OD=function(e){return{Applicative0:function(){return ND(e)},Bind1:function(){return PD(e)}}},PD=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return{bind:function(o){return function(h){return t(o)(function(a){if(a instanceof V)return n(V.value);if(a instanceof W){var r=h(a.value0);return r}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[a.constructor.name])})}},Apply0:function(){return kD(e)}}},kD=function(e){var t=V6(e.Bind1().Apply0().Functor0());return{apply:wr(OD(e)),Functor0:function(){return t}}},ND=function(e){return{pure:function(){var t=X(e.Applicative0());return function(n){return HD(t(W.create(n)))}}(),Apply0:function(){return kD(e)}}};var KA=function(e){var t=mn(e),n=e.Monad0(),o=Z(n.Bind1()),h=X(n.Applicative0()),a=OD(n);return{tailRecM:function(r){var l=t(function(u){var i=r(u);return o(i)(function(s){return h(function(){if(s instanceof V)return new Nt(V.value);if(s instanceof W&&s.value0 instanceof Pt)return new Pt(s.value0.value0);if(s instanceof W&&s.value0 instanceof Nt)return new Nt(new W(s.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[s.constructor.name])}())})});return function(u){return HD(l(u))}},Monad0:function(){return a}}},QA=function(e){var t=e.Monad0(),n=q6(t),o=so(e),h=OD(t);return{state:function(a){return n(o(a))},Monad0:function(){return h}}};var ZA=function(e){return e};var Sa=function(e){return e};var Ul={lift:function(e){return function(t){return ZA(me(t))}}},G6=wt(Ul),eI=function(e){return function(t){return function(n){return e(t(n))}}},J6=function(e){return{map:function(){var t=z(e);return function(n){return eI(t(n))}}()}};var WD=function(e){var t=ht(e),n=J6(e.Functor0());return{apply:function(o){return function(h){return function(a){return t(o(a))(h(a))}}},Functor0:function(){return n}}},qi=function(e){var t=Z(e),n=WD(e.Apply0());return{bind:function(o){return function(h){return function(a){return t(o(a))(function(r){var l=h(r);return l(a)})}}},Apply0:function(){return n}}};var Bd=function(e){var t=WD(e.Apply0());return{pure:function(){var n=X(e);return function(o){return ZA(me(n(o)))}}(),Apply0:function(){return t}}},z_=function(e){var t=Bd(e.Applicative0()),n=qi(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},es=function(e){var t=z_(e);return{ask:X(e.Applicative0()),Monad0:function(){return t}}};var Xa=function(e){var t=e.Monad0(),n=z_(t);return{liftEffect:function(){var o=G6(t),h=Le(e);return function(a){return o(h(a))}}(),Monad0:function(){return n}}},ts=function(e){var t=e.Monad0(),n=Cn(t.Bind1()),o=X(t.Applicative0()),h=mn(e),a=z_(t);return{tailRecM:function(r){return function(l){var u=function(i){return function(s){var f=r(s);return n(o)(f(i))}};return function(i){return h(u(i))(l)}}},Monad0:function(){return a}}};var _c=function(e){return e.sequential},zi=function(e){return e.parallel};var Q6=he(_e),X6=function(e){var t=_c(e),n=zi(e);return function(o){var h=ut(o);return function(a){var r=h(a);return function(l){var u=r(function(i){return n(l(i))});return function(i){return t(u(i))}}}}};var ql=function(e){var t=X6(e);return function(n){var o=t(n);return function(h){return o(h)(Q6)}}};var mc=function(e){return e()};var oI=function(e){return e()};var aI=function(e){throw new Error(e)};var iI=function(){return aI};var nq=iI(),rq=oI,j_=function(e){return rq(function(){return nq(e)})};var oq=function(e,t,n){var o=0,h;return function(a){if(o===2)return h;if(o===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return o=1,h=n(),o=2,h}},aq=X(rn),qD=st(Pe),sI=z(Pe);var iq=function(e){return e},cI=AD(!1);var uq={map:NA},Hr={map:OA},sq=z(Hr),VD=AD(!0),cq=function(){var e=function(o){if(o instanceof Oe)return o.value0;if(o instanceof We)return j_("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[o.constructor.name])},t=function(o){if(o instanceof We)return o.value0;if(o instanceof Oe)return j_("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[o.constructor.name])},n=function(o){if(o instanceof We)return!0;if(o instanceof Oe)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[o.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:We.create,right:Oe.create}}(),lI=function(e){return WA(cq,e)},fI=function(e){return function(){var n=lI(e)();return n.run(),n}},zD=function(e){return qD(fI(e))};var GD=function(e){return UA(Oe.create,e)},dI=function(e){return function(t){return N_(e)({killed:me(t),failed:me(t),completed:me(t)})}},pI={apply:BA,Functor0:function(){return uq}};var Ya={Applicative0:function(){return jr},Bind1:function(){return Kt}},Kt={bind:PA,Apply0:function(){return JD(0)}},jr={pure:RA,Apply0:function(){return JD(0)}},JD=oq("applyAff","Effect.Aff",function(){return{apply:wr(Ya),Functor0:function(){return Hr}}}),lq=JD(73),Vl=X(jr),hI=Z(Kt);var fq=Cn(Kt);var Wd=function(e){return function(t){return dI(Vl(void 0))(me(e))(me(t))}},jD=function(e){return dI(e)(me(Vl(void 0)))(Vl)};var ns={parallel:ne,sequential:qA,Apply0:function(){return lq},Apply1:function(){return pI}},dq=zi(ns),vc={pure:function(e){return dq(Vl(e))},Apply0:function(){return pI}};var pq=ql(ns)(vc)(vt);var hq={append:function(e){return function(t){return function(n){return pq([e(n),t(n)])}}}};var yn={liftEffect:kA,Monad0:function(){return Ya}},K_=Le(yn),gc=function(e){return iq(me(K_(e)))},Ud=function(e){return wa(function(t){return sI(gc)(e.join(t))})},_I={map:function(e){return function(t){return mc(lI(sq(e)(Ud(t))))}}};var qd=function(e){return function(t){return hI(K_(t.isSuspended))(function(n){return n?K_(qD(t.kill(e,me(aq(void 0))))):wa(function(o){return sI(gc)(t.kill(e,o))})})}};var zl={throwError:$A,Monad0:function(){return Ya}},mI={catchError:HA,MonadThrow0:function(){return zl}},vI=Id(mI);var gI=vI,_q=function(e){return function(t){return fI(fq(function(n){return K_(e(n))})(vI(t)))}},Vd=function(e){return function(t){return qD(_q(e)(t))}};var Gi={tailRecM:function(e){var t=function(n){return hI(e(n))(function(o){if(o instanceof Nt)return Vl(o.value0);if(o instanceof Pt)return t(o.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[o.constructor.name])})};return t},Monad0:function(){return Ya}};var KD=me(Vl(void 0)),yI={mempty:KD,Semigroup0:function(){return hq}};var Dq=function(e){var t=z(e);return{map:function(n){return function(o){return function(h){return t(function(a){return new ee(n(a.value0),a.value1)})(o(h))}}}}};var XD=function(e){return{Applicative0:function(){return zd(e)},Bind1:function(){return YD(e)}}},YD=function(e){var t=Z(e.Bind1());return{bind:function(n){return function(o){return function(h){return t(n(h))(function(a){var r=o(a.value0);return r(a.value1)})}}},Apply0:function(){return CI(e)}}},CI=function(e){var t=Dq(e.Bind1().Apply0().Functor0());return{apply:wr(XD(e)),Functor0:function(){return t}}},zd=function(e){var t=X(e.Applicative0());return{pure:function(n){return function(o){return t(new ee(n,o))}},Apply0:function(){return CI(e)}}};var bI=function(e){var t=e.Monad0(),n=Z(t.Bind1()),o=X(t.Applicative0()),h=mn(e),a=XD(t);return{tailRecM:function(r){return function(l){var u=function(i){var s=r(i.value0);return n(s(i.value1))(function(f){return o(function(){if(f.value0 instanceof Pt)return new Pt(new ee(f.value0.value0,f.value1));if(f.value0 instanceof Nt)return new Nt(new ee(f.value0.value0,f.value1));throw new Error("Failed pattern match at Control.Monad.State.Trans (line 87, column 16 - line 89, column 40): "+[f.value0.constructor.name])}())})};return function(i){return h(u)(new ee(l,i))}}},Monad0:function(){return a}}},Q_=function(e){var t=X(e.Applicative0()),n=XD(e);return{state:function(o){return function(h){return t(o(h))}},Monad0:function(){return n}}};var Cq=wt(Ul);var rs={liftAff:he(_e),MonadEffect0:function(){return yn}},Dn=function(e){return e.liftAff};var Y_=function(e){var t=e.MonadEffect0(),n=Xa(t);return{liftAff:function(){var o=Cq(t.Monad0()),h=Dn(e);return function(a){return o(h(a))}}(),MonadEffect0:function(){return n}}};var Za=function(e){return function(){console.log(e)}},Gd=function(e){return function(){console.warn(e)}};var FI=function(e){var t=Le(e);return function(n){return t(Za(n))}};var Oq=z(Dt);var ZD=function(e){if(e instanceof Ye)return V.value;if(e instanceof Xe)return new W({head:e.value0,tail:e.value1});throw new Error("Failed pattern match at Data.List (line 259, column 1 - line 259, column 66): "+[e.constructor.name])},Z_=function(e){return _a(e)(function(t){return Oq(function(n){return new ee(n.head,n.tail)})(ZD(t))})};var Ji=function(){var e=function(t){return function(n){var o=t,h=!1,a;function r(l,u){if(u instanceof Ye)return h=!0,l;if(u instanceof Xe){o=new Xe(u.value0,l),n=u.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[l.constructor.name,u.constructor.name])}for(;!h;)a=r(o,n);return a}};return e(Ye.value)}();var xI=function(e){return e instanceof Ye};var em=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var LI=function(e){var t=!1,n;function o(h){if(h.value0 instanceof Ye&&h.value1 instanceof Ye)return t=!0,V.value;if(h.value0 instanceof Ye){e=new em(Ji(h.value1),Ye.value);return}if(h.value0 instanceof Xe)return t=!0,new W(new ee(h.value0.value0,new em(h.value0.value1,h.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[h.constructor.name])}for(;!t;)n=o(e);return n},AI=function(e){return function(t){return new em(e.value0,new Xe(t,e.value1))}};var II=function(e){return e.value0 instanceof Ye&&e.value1 instanceof Ye};var RI=function(){return new em(Ye.value,Ye.value)}();var Gl=function(){function e(){}return e.value=new e,e}(),tm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var $I=function(e){return function(t){if(e instanceof Gl)return t;if(t instanceof Gl)return e;if(e instanceof tm)return new tm(e.value0,AI(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},Nq=function(e){return function(t){return function(n){var o=function(a){return function(r){return function(l){var u=a,i=r,s=!1,f;function p(d,c,_){if(_ instanceof Ye)return s=!0,c;if(_ instanceof Xe){u=d,i=d(c)(_.value0),l=_.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[d.constructor.name,c.constructor.name,_.constructor.name])}for(;!s;)f=p(u,i,l);return f}}},h=function(a){return function(r){var l=a,u=!1,i;function s(f,p){var d=LI(f);if(d instanceof V)return u=!0,o(function(c){return function(_){return _(c)}})(t)(p);if(d instanceof W){l=d.value0.value1,r=new Xe(e(d.value0.value0),p);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[d.constructor.name])}for(;!u;)i=s(l,r);return i}};return h(n)(Ye.value)}}},HI=function(e){if(e instanceof Gl)return V.value;if(e instanceof tm)return new W(new ee(e.value0,function(){var t=II(e.value1);return t?Gl.value:Nq($I)(Gl.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var OI=function(){return Gl.value}(),PI=$I;var kI={append:PI};var NI=function(e){return function(t){return PI(e)(new tm(t,RI))}};var Wq=function(e,t,n){var o=0,h;return function(a){if(o===2)return h;if(o===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return o=1,h=n(),o=2,h}},Uq=De(kI);var eC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Kd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),BI=function(e){var t=!1,n;function o(h){var a=function(u){return u},r=function(u){return function(i){return new eC(u.value0,Uq(u.value1)(i))}};if(h.value0 instanceof jd){var l=HI(h.value1);if(l instanceof V)return t=!0,new jd(h.value0.value0);if(l instanceof W){e=r(a(l.value0.value0)(h.value0.value0))(l.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[l.constructor.name])}if(h.value0 instanceof Kd)return t=!0,new Kd(h.value0.value0,function(u){return r(h.value0.value1(u))(h.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[h.value0.constructor.name])}for(;!t;)n=o(e);return n},ta=function(e){var t=z(e);return function(n){var o=n.Monad0(),h=z(o.Bind1().Apply0().Functor0()),a=X(o.Applicative0()),r=mn(n);return function(l){var u=function(i){var s=BI(i);if(s instanceof jd)return h(Nt.create)(a(s.value0));if(s instanceof Kd)return h(Pt.create)(l(t(s.value1)(s.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[s.constructor.name])};return r(u)}}};var WI=function(e){return new eC(e,OI)};var Jl={Applicative0:function(){return gr},Bind1:function(){return cr}},ji={map:function(e){return function(t){return Cn(cr)(function(){var n=X(gr);return function(o){return n(e(o))}}())(t)}}},cr={bind:function(e){return function(t){return new eC(e.value0,NI(e.value1)(t))}},Apply0:function(){return tC(0)}},gr={pure:function(e){return WI(jd.create(e))},Apply0:function(){return tC(0)}},tC=Wq("freeApply","Control.Monad.Free",function(){return{apply:wr(Jl),Functor0:function(){return ji}}}),Qd=tC(77);var qq=X(gr);var dt=function(e){return WI(new Kd(e,function(t){return qq(t)}))};var UI=function(e){var t=e.Monad0(),n=z(t.Bind1().Apply0().Functor0()),o=X(t.Applicative0()),h=mn(e);return function(a){var r=function(l){var u=BI(l);if(u instanceof jd)return n(Nt.create)(o(u.value0));if(u instanceof Kd)return n(function(i){return Pt.create(u.value1(i))})(a(u.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[u.constructor.name])};return h(r)}};function nm(e){return function(){return e.getContext("2d")}}function Xd(e){return function(){return e.width}}function Yd(e){return function(){return e.height}}function Zd(e){return function(t){return function(){e.width=t}}}function ep(e){return function(t){return function(){e.height=t}}}function nC(e){return function(){return e.toDataURL()}}function rC(e){return function(t){return function(){e.lineWidth=t}}}function oC(e){return function(t){return function(){e.setLineDash(t)}}}function aC(e){return function(t){return function(){e.fillStyle=t}}}function iC(e){return function(t){return function(){e.strokeStyle=t}}}function uC(e){return function(t){return function(){e.shadowColor=t}}}function sC(e){return function(t){return function(){e.shadowBlur=t}}}function cC(e){return function(t){return function(){e.shadowOffsetX=t}}}function lC(e){return function(t){return function(){e.shadowOffsetY=t}}}function fC(e){return function(t){return function(){e.miterLimit=t}}}function rm(e){return function(t){return function(){e.lineCap=t}}}function om(e){return function(t){return function(){e.lineJoin=t}}}function qI(e){return function(t){return function(){e.globalCompositeOperation=t}}}function dC(e){return function(t){return function(){e.globalAlpha=t}}}function am(e){return function(){e.beginPath()}}function im(e){return function(){e.stroke()}}function um(e){return function(){e.fill()}}function pC(e){return function(){e.clip()}}function hC(e){return function(t){return function(n){return function(){e.lineTo(t,n)}}}}function _C(e){return function(t){return function(n){return function(){e.moveTo(t,n)}}}}function mC(e){return function(){e.closePath()}}function vC(e){return function(t){return function(){e.arc(t.x,t.y,t.radius,t.start,t.end,t.useCounterClockwise)}}}function gC(e){return function(t){return function(){e.rect(t.x,t.y,t.width,t.height)}}}function yC(e){return function(t){return function(){e.fillRect(t.x,t.y,t.width,t.height)}}}function DC(e){return function(t){return function(){e.strokeRect(t.x,t.y,t.width,t.height)}}}function CC(e){return function(t){return function(){e.clearRect(t.x,t.y,t.width,t.height)}}}function bC(e){return function(t){return function(){e.scale(t.scaleX,t.scaleY)}}}function wC(e){return function(t){return function(){e.rotate(t)}}}function SC(e){return function(t){return function(){e.translate(t.translateX,t.translateY)}}}function EC(e){return function(t){return function(){e.transform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function TC(e){return function(t){return function(){e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function VI(e){return function(){return e.textAlign}}function zI(e){return function(t){return function(){e.textAlign=t}}}function GI(e){return function(){return e.textBaseline}}function JI(e){return function(t){return function(){e.textBaseline=t}}}function MC(e){return function(){return e.font}}function FC(e){return function(t){return function(){e.font=t}}}function xC(e){return function(t){return function(n){return function(o){return function(){e.fillText(t,n,o)}}}}}function LC(e){return function(t){return function(n){return function(o){return function(){e.strokeText(t,n,o)}}}}}function AC(e){return function(t){return function(){return e.measureText(t)}}}function sm(e){return function(){e.save()}}function cm(e){return function(){e.restore()}}function IC(e){return function(t){return function(n){return function(o){return function(h){return function(){return e.getImageData(t,n,o,h)}}}}}}function RC(e){return function(t){return function(n){return function(o){return function(h){return function(a){return function(r){return function(l){return function(){e.putImageData(t,n,o,h,a,r,l)}}}}}}}}}function $C(e){return function(t){return function(n){return function(o){return function(){e.putImageData(t,n,o)}}}}}function HC(e){return function(t){return function(n){return function(){return e.createImageData(t,n)}}}}function OC(e){return function(t){return function(n){return function(o){return function(){e.drawImage(t,n,o)}}}}}function PC(e){return function(t){return function(n){return function(o){return function(h){return function(a){return function(){e.drawImage(t,n,o,h,a)}}}}}}}function kC(e){return function(t){return function(n){return function(o){return function(h){return function(a){return function(r){return function(l){return function(u){return function(i){return function(){e.drawImage(t,n,o,h,a,r,l,u,i)}}}}}}}}}}}function jI(e){return function(t){return function(n){return function(){return e.createPattern(t,n)}}}}function NC(e){return function(t){return function(){e.fillStyle=t}}}function BC(e){return function(t){return function(){return e.createLinearGradient(t.x0,t.y0,t.x1,t.y1)}}}function WC(e){return function(t){return function(){return e.createRadialGradient(t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)}}}function UC(e){return function(t){return function(){e.fillStyle=t}}}function qC(e){return function(t){return function(){e.quadraticCurveTo(t.cpx,t.cpy,t.x,t.y)}}}function VC(e){return function(t){return function(){e.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x,t.y)}}}var zq=function(e){return mc(vo(e))},zC=function(e){return zq(ar(e))};var KI=z(Pe),jq=qr(Zy),QI=function(){function e(){}return e.value=new e,e}(),XI=function(){function e(){}return e.value=new e,e}(),YI=function(){function e(){}return e.value=new e,e}(),ZI=function(){function e(){}return e.value=new e,e}(),eR=function(){function e(){}return e.value=new e,e}(),tR=function(){function e(){}return e.value=new e,e}(),nR=function(){function e(){}return e.value=new e,e}(),rR=function(){function e(){}return e.value=new e,e}(),oR=function(){function e(){}return e.value=new e,e}(),aR=function(){function e(){}return e.value=new e,e}(),iR=function(){function e(){}return e.value=new e,e}(),Kq=function(){function e(){}return e.value=new e,e}(),Qq=function(){function e(){}return e.value=new e,e}(),Xq=function(){function e(){}return e.value=new e,e}(),Yq=function(){function e(){}return e.value=new e,e}(),Zq=function(){function e(){}return e.value=new e,e}(),e8=function(){function e(){}return e.value=new e,e}(),t8=function(){function e(){}return e.value=new e,e}(),n8=function(){function e(){}return e.value=new e,e}(),r8=function(){function e(){}return e.value=new e,e}(),o8=function(){function e(){}return e.value=new e,e}(),a8=function(){function e(){}return e.value=new e,e}(),i8=function(){function e(){}return e.value=new e,e}(),u8=function(){function e(){}return e.value=new e,e}(),s8=function(){function e(){}return e.value=new e,e}(),c8=function(){function e(){}return e.value=new e,e}(),l8=function(){function e(){}return e.value=new e,e}(),f8=function(){function e(){}return e.value=new e,e}(),d8=function(){function e(){}return e.value=new e,e}(),p8=function(){function e(){}return e.value=new e,e}(),h8=function(){function e(){}return e.value=new e,e}(),_8=function(){function e(){}return e.value=new e,e}(),m8=function(){function e(){}return e.value=new e,e}(),v8=function(){function e(){}return e.value=new e,e}(),g8=function(){function e(){}return e.value=new e,e}(),y8=function(){function e(){}return e.value=new e,e}(),D8=function(){function e(){}return e.value=new e,e}(),C8=function(){function e(){}return e.value=new e,e}(),b8=function(){function e(){}return e.value=new e,e}(),w8=function(){function e(){}return e.value=new e,e}(),S8=function(){function e(){}return e.value=new e,e}(),E8=function(){function e(){}return e.value=new e,e}(),T8=function(){function e(){}return e.value=new e,e}(),M8=function(){function e(){}return e.value=new e,e}(),F8=function(){function e(){}return e.value=new e,e}(),x8=function(){function e(){}return e.value=new e,e}(),L8=function(){function e(){}return e.value=new e,e}();var uR=function(e){var t=function(n){return n==="top"?QI.value:n==="hanging"?XI.value:n==="middle"?YI.value:n==="alphabetic"?ZI.value:n==="ideographic"?eR.value:n==="bottom"?tR.value:zC("invalid TextBaseline: "+n)};return KI(t)(GI(e))},sR=function(e){var t=function(n){return n==="left"?nR.value:n==="right"?rR.value:n==="center"?oR.value:n==="start"?aR.value:n==="end"?iR.value:zC("invalid TextAlign: "+n)};return KI(t)(VI(e))};var cR=function(e){return function(t){var n=function(o){if(o instanceof QI)return"top";if(o instanceof XI)return"hanging";if(o instanceof YI)return"middle";if(o instanceof ZI)return"alphabetic";if(o instanceof eR)return"ideographic";if(o instanceof tR)return"bottom";throw new Error("Failed pattern match at Graphics.Canvas (line 577, column 5 - line 577, column 33): "+[o.constructor.name])};return JI(e)(n(t))}},lR=function(e){return function(t){var n=function(o){if(o instanceof nR)return"left";if(o instanceof rR)return"right";if(o instanceof oR)return"center";if(o instanceof aR)return"start";if(o instanceof iR)return"end";throw new Error("Failed pattern match at Graphics.Canvas (line 531, column 5 - line 531, column 32): "+[o.constructor.name])};return zI(e)(n(t))}},fR=function(e){return function(t){if(t instanceof Zq)return om(e)("bevel");if(t instanceof e8)return om(e)("round");if(t instanceof t8)return om(e)("miter");throw new Error("Failed pattern match at Graphics.Canvas (line 253, column 1 - line 253, column 52): "+[e.constructor.name,t.constructor.name])}},dR=function(e){return function(t){if(t instanceof n8)return rm(e)("round");if(t instanceof r8)return rm(e)("square");if(t instanceof o8)return rm(e)("butt");throw new Error("Failed pattern match at Graphics.Canvas (line 238, column 1 - line 238, column 50): "+[e.constructor.name,t.constructor.name])}},pR=function(e){return function(t){var n=function(o){if(o instanceof a8)return"source-over";if(o instanceof i8)return"source-in";if(o instanceof u8)return"source-out";if(o instanceof s8)return"source-atop";if(o instanceof c8)return"destination-over";if(o instanceof l8)return"destination-in";if(o instanceof f8)return"destination-out";if(o instanceof d8)return"destination-atop";if(o instanceof p8)return"lighter";if(o instanceof h8)return"copy";if(o instanceof _8)return"xor";if(o instanceof m8)return"multiply";if(o instanceof v8)return"screen";if(o instanceof g8)return"overlay";if(o instanceof y8)return"darken";if(o instanceof D8)return"lighten";if(o instanceof C8)return"color-dodge";if(o instanceof b8)return"color-burn";if(o instanceof w8)return"hard-light";if(o instanceof S8)return"soft-light";if(o instanceof E8)return"difference";if(o instanceof T8)return"exclusion";if(o instanceof M8)return"hue";if(o instanceof F8)return"saturation";if(o instanceof x8)return"color";if(o instanceof L8)return"luminosity";throw new Error("Failed pattern match at Graphics.Canvas (line 326, column 5 - line 326, column 45): "+[o.constructor.name])};return qI(e)(n(t))}},hR=function(e){return function(t){return jq(ep(e)(t.height))(Zd(e)(t.width))}};var _R=function(e){return function(){var n=Xd(e)(),o=Yd(e)();return{width:n,height:o}}};var mR=function(e){return function(t){return function(n){var o=function(h){if(h instanceof Kq)return"repeat";if(h instanceof Qq)return"repeat-x";if(h instanceof Xq)return"repeat-y";if(h instanceof Yq)return"no-repeat";throw new Error("Failed pattern match at Graphics.Canvas (line 677, column 5 - line 677, column 31): "+[h.constructor.name])};return jI(e)(t)(o(n))}}};var gR=e=>t=>()=>e.convertToBlob({type:"image/jpeg",quality:t});function yR(e){return function(t){return function(n){return function(){e.then(n,t)}}}}var $8=In();var GC=function(e){return $8(RD(e))};function lm(e){return typeof e}function fm(e){return Object.prototype.toString.call(e).slice(8,-1)}function tp(e){return e===void 0}var CR=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var dm=function(){var e=P0(FA);return function(t){return DD(e(t))}}();var bR=function(e){return function(t){return new ao(e,new Xe(t.value0,t.value1))}};var JC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var yc=ne,hm=ne;var jC=function(e){var t=ir(GA(e));return function(n){return t(dm(n))}};var KC=function(e){var t=X(Nd(e)),n=jC(e);return function(o){return function(h){if(fm(h)===o)return t(hm(h));if(pn)return n(new JC(o,fm(h)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[o.constructor.name,h.constructor.name])}}};var _m=function(e){return KC(e)("String")};var P8=Ph(Pe),k8=ct(yI),N8=he(_e),B8=On(JA(MA)(Tr)),W8=KC(Tr),U8=z(W_(Mi)),q8=_m(Tr),V8=Z(Kt),z8=Le(yn),G8=function(e){return function(t){return wa(function(n){return P8(k8)(yR(t)(function(o){return n(We.create(e(o)))()})(function(o){return n(Oe.create(o))()}))})}};var J8=function(e){return bn(function(t){return ar("Promise failed, couldn't extract JS Error or String")})(N8)(GC(B8(W8("Error")(e))(U8(ar)(q8(e)))))},j8=G8(J8),as=function(e){return V8(z8(e))(j8)};var SR=function(e){return function(t){return as(gR(e)(t))}};var mm=function(e){return function(t){return t[e]}},Q8=mm("namespaceURI"),X8=mm("prefix"),Y8=mm("localName"),Z8=mm("tagName");function jl(e){return function(){return e.scrollTop}}function np(e){return function(t){return function(){t.scrollTop=e}}}function XC(e){return function(){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}}function ER(e,t,n){return e==null?t:n(e)}function YC(e){return e}var Ta=Qe(null)(YC),ln=function(e){return ER(e,V.value,W.create)};var vm=function(e){return function(t){return function(){return t[e]}}},n7=vm("children"),r7=vm("firstElementChild"),o7=vm("lastElementChild"),a7=vm("childElementCount");function TR(e){return function(t){return function(){return t.querySelector(e)}}}var u7=z(Pe);var MR=function(e){var t=u7(ln),n=TR(e);return function(o){return t(n(o))}};var ZC=ne;var p7=wt(Ul),Do=z(Pe),xR=nt(rt),h7=z(Hr),Qb=he(_e),_7=function(e){return e},tb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ym=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ob=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ab=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Dm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ib=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ub=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),bm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),wm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),db=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Sm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Em=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Tm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Mm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Db=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),bb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),wb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Am=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Sb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Eb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Tb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ab=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Im=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),Ib=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),Rb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$m=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hb=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),Ob=function(){function e(t,n,o,h){this.value0=t,this.value1=n,this.value2=o,this.value3=h}return e.create=function(t){return function(n){return function(o){return function(h){return new e(t,n,o,h)}}}},e}(),Pb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nb=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),Bb=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),Wb=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),Ub=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),qb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Gb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Jb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),m7=function(e){return e};var v7=function(e){var t=z(e);return{map:function(n){return function(o){if(o instanceof tb)return new tb(t(n)(o.value0));if(o instanceof gm)return new gm(function(h){return n(o.value0(h))});if(o instanceof nb)return new nb(o.value0,n(o.value1));if(o instanceof ym)return new ym(function(h){return n(o.value0(h))});if(o instanceof rb)return new rb(o.value0,n(o.value1));if(o instanceof ob)return new ob(function(h){return n(o.value0(h))});if(o instanceof ab)return new ab(o.value0,n(o.value1));if(o instanceof Dm)return new Dm(function(h){return n(o.value0(h))});if(o instanceof ib)return new ib(function(h){return n(o.value0(h))});if(o instanceof Cm)return new Cm(o.value0,n(o.value1));if(o instanceof ub)return new ub(o.value0,n(o.value1));if(o instanceof bm)return new bm(o.value0,n(o.value1));if(o instanceof wm)return new wm(o.value0,n(o.value1));if(o instanceof sb)return new sb(o.value0,n(o.value1));if(o instanceof cb)return new cb(o.value0,n(o.value1));if(o instanceof lb)return new lb(o.value0,n(o.value1));if(o instanceof fb)return new fb(o.value0,n(o.value1));if(o instanceof db)return new db(o.value0,n(o.value1));if(o instanceof pb)return new pb(o.value0,n(o.value1));if(o instanceof hb)return new hb(o.value0,n(o.value1));if(o instanceof _b)return new _b(o.value0,n(o.value1));if(o instanceof mb)return new mb(o.value0,n(o.value1));if(o instanceof Sm)return new Sm(n(o.value0));if(o instanceof Em)return new Em(n(o.value0));if(o instanceof vb)return new vb(n(o.value0));if(o instanceof gb)return new gb(n(o.value0));if(o instanceof Tm)return new Tm(o.value0,n(o.value1));if(o instanceof Mm)return new Mm(o.value0,n(o.value1));if(o instanceof yb)return new yb(n(o.value0));if(o instanceof Db)return new Db(o.value0,n(o.value1));if(o instanceof Cb)return new Cb(o.value0,n(o.value1));if(o instanceof Fm)return new Fm(o.value0,n(o.value1));if(o instanceof bb)return new bb(o.value0,n(o.value1));if(o instanceof xm)return new xm(o.value0,n(o.value1));if(o instanceof wb)return new wb(o.value0,n(o.value1));if(o instanceof Lm)return new Lm(o.value0,n(o.value1));if(o instanceof Am)return new Am(o.value0,n(o.value1));if(o instanceof Sb)return new Sb(o.value0,n(o.value1));if(o instanceof Eb)return new Eb(o.value0,n(o.value1));if(o instanceof Tb)return new Tb(function(h){return n(o.value0(h))});if(o instanceof Mb)return new Mb(o.value0,n(o.value1));if(o instanceof Fb)return new Fb(function(h){return n(o.value0(h))});if(o instanceof xb)return new xb(o.value0,n(o.value1));if(o instanceof Lb)return new Lb(function(h){return n(o.value0(h))});if(o instanceof Ab)return new Ab(o.value0,n(o.value1));if(o instanceof Im)return new Im(o.value0,o.value1,n(o.value2));if(o instanceof Ib)return new Ib(o.value0,o.value1,n(o.value2));if(o instanceof Rb)return new Rb(o.value0,function(h){return n(o.value1(h))});if(o instanceof Rm)return new Rm(n(o.value0));if(o instanceof $m)return new $m(n(o.value0));if(o instanceof $b)return new $b(o.value0,function(h){return n(o.value1(h))});if(o instanceof Hb)return new Hb(o.value0,o.value1,n(o.value2));if(o instanceof Ob)return new Ob(o.value0,o.value1,o.value2,n(o.value3));if(o instanceof Pb)return new Pb(o.value0,function(h){return n(o.value1(h))});if(o instanceof kb)return new kb(function(h){return n(o.value0(h))});if(o instanceof Nb)return new Nb(o.value0,o.value1,n(o.value2));if(o instanceof Bb)return new Bb(o.value0,o.value1,n(o.value2));if(o instanceof Wb)return new Wb(o.value0,o.value1,n(o.value2));if(o instanceof Ub)return new Ub(o.value0,o.value1,function(h){return n(o.value2(h))});if(o instanceof qb)return new qb(o.value0,n(o.value1));if(o instanceof Vb)return new Vb(o.value0,function(h){return n(o.value1(h))});if(o instanceof zb)return new zb(o.value0,function(h){return n(o.value1(h))});if(o instanceof Gb)return new Gb(o.value0,n(o.value1));if(o instanceof Jb)return new Jb(o.value0,n(o.value1));if(o instanceof jb)return new jb(o.value0,n(o.value1));if(o instanceof Kb)return new Kb(o.value0,function(h){return n(o.value1(h))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 582, column 1 - line 648, column 64): "+[n.constructor.name,o.constructor.name])}}}},ti=cr,FR=xR(ti),g7=Z(ti);var Xb=gr,y7=X(Xb),LR=function(e){var t=e.MonadEffect0(),n=t.Monad0(),o=p7(n),h=n.Bind1(),a=qi(h),r=Z(a),l=Rr(es(n)),u=Le(Xa(t)),i=xR(a),s=X(Bd(n.Applicative0())),f=Dn(Y_(e)),p=ta(v7(h.Apply0().Functor0()));return function(d){var c=function(m){if(m instanceof tb)return o(m.value0);if(m instanceof gm)return r(l)(function(v){return u(Do(m.value0)(Xd(v.canvasElement)))});if(m instanceof nb)return r(l)(function(v){return i(u(Zd(v.canvasElement)(m.value0)))(function(){return s(m.value1)})});if(m instanceof ym)return r(l)(function(v){return u(Do(m.value0)(Yd(v.canvasElement)))});if(m instanceof rb)return r(l)(function(v){return i(u(ep(v.canvasElement)(m.value0)))(function(){return s(m.value1)})});if(m instanceof ob)return r(l)(function(v){return u(Do(m.value0)(_R(v.canvasElement)))});if(m instanceof ab)return r(l)(function(v){return i(u(hR(v.canvasElement)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Dm)return r(l)(function(v){return u(Do(m.value0)(XC(v.canvasElement)))});if(m instanceof ib)return r(l)(function(v){return u(Do(m.value0)(nC(v.canvasElement)))});if(m instanceof Cm)return r(l)(function(v){return i(u(rC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof ub)return r(l)(function(v){return i(u(oC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof bm)return r(l)(function(v){return i(u(aC(v.context2D)(Tl(m.value0))))(function(){return s(m.value1)})});if(m instanceof wm)return r(l)(function(v){return i(u(iC(v.context2D)(Tl(m.value0))))(function(){return s(m.value1)})});if(m instanceof sb)return r(l)(function(v){return i(u(sC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof cb)return r(l)(function(v){return i(u(cC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof lb)return r(l)(function(v){return i(u(lC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof fb)return r(l)(function(v){return i(u(uC(v.context2D)(Tl(m.value0))))(function(){return s(m.value1)})});if(m instanceof db)return r(l)(function(v){return i(u(fC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof pb)return r(l)(function(v){return i(u(dR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof hb)return r(l)(function(v){return i(u(fR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof _b)return r(l)(function(v){return i(u(pR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof mb)return r(l)(function(v){return i(u(dC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Sm)return r(l)(function(v){return i(u(am(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Em)return r(l)(function(v){return i(u(im(v.context2D)))(function(){return s(m.value0)})});if(m instanceof vb)return r(l)(function(v){return i(u(um(v.context2D)))(function(){return s(m.value0)})});if(m instanceof gb)return r(l)(function(v){return i(u(pC(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Tm)return r(l)(function(v){return i(u(hC(v.context2D)(m.value0.x)(m.value0.y)))(function(){return s(m.value1)})});if(m instanceof Mm)return r(l)(function(v){return i(u(_C(v.context2D)(m.value0.x)(m.value0.y)))(function(){return s(m.value1)})});if(m instanceof yb)return r(l)(function(v){return i(u(mC(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Db)return r(l)(function(v){return i(u(vC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Cb)return r(l)(function(v){return i(u(gC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Fm)return r(l)(function(v){return i(u(yC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof bb)return r(l)(function(v){return i(u(DC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof xm)return r(l)(function(v){return i(u(CC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof wb)return r(l)(function(v){return i(u(bC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Lm)return r(l)(function(v){return i(u(wC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Am)return r(l)(function(v){return i(u(SC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Sb)return r(l)(function(v){return i(u(EC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Eb)return r(l)(function(v){return i(u(TC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Tb)return r(l)(function(v){return u(Do(m.value0)(sR(v.context2D)))});if(m instanceof Mb)return r(l)(function(v){return i(u(lR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Fb)return r(l)(function(v){return u(Do(m.value0)(uR(v.context2D)))});if(m instanceof xb)return r(l)(function(v){return i(u(cR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Lb)return r(l)(function(v){return u(Do(function(y){return m.value0(_7(y))})(MC(v.context2D)))});if(m instanceof Ab)return r(l)(function(v){return i(u(FC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Im)return r(l)(function(v){return i(u(xC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof Ib)return r(l)(function(v){return i(u(LC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof Rb)return r(l)(function(v){return u(Do(m.value1)(AC(v.context2D)(m.value0)))});if(m instanceof Rm)return r(l)(function(v){return i(u(sm(v.context2D)))(function(){return s(m.value0)})});if(m instanceof $m)return r(l)(function(v){return i(u(cm(v.context2D)))(function(){return s(m.value0)})});if(m instanceof $b)return r(l)(function(v){return u(Do(m.value1)(IC(v.context2D)(m.value0.x)(m.value0.y)(m.value0.width)(m.value0.height)))});if(m instanceof Hb)return r(l)(function(v){return i(u($C(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof Ob)return r(l)(function(v){return i(u(RC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)(m.value2.x)(m.value2.y)(m.value2.width)(m.value2.height)))(function(){return s(m.value3)})});if(m instanceof Pb)return r(l)(function(v){return u(Do(m.value1)(HC(v.context2D)(m.value0.width)(m.value0.height)))});if(m instanceof kb)return r(l)(function(v){return s(m.value0(v.canvasElement))});if(m instanceof Nb)return r(l)(function(v){return i(u(OC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof Bb)return r(l)(function(v){return i(u(PC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)(m.value1.width)(m.value1.height)))(function(){return s(m.value2)})});if(m instanceof Wb)return r(l)(function(v){return i(u(kC(v.context2D)(m.value0)(m.value1.source.x)(m.value1.source.y)(m.value1.source.width)(m.value1.source.height)(m.value1.target.x)(m.value1.target.y)(m.value1.target.width)(m.value1.target.height)))(function(){return s(m.value2)})});if(m instanceof Ub)return r(l)(function(v){return u(Do(m.value2)(mR(v.context2D)(m.value0)(m.value1)))});if(m instanceof qb)return r(l)(function(v){return i(u(NC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Vb)return r(l)(function(v){return u(Do(m.value1)(BC(v.context2D)(m.value0)))});if(m instanceof zb)return r(l)(function(v){return u(Do(m.value1)(WC(v.context2D)(m.value0)))});if(m instanceof Gb)return r(l)(function(v){return i(u(UC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Jb)return r(l)(function(v){return i(u(qC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof jb)return r(l)(function(v){return i(u(VC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Kb)return r(l)(function(v){return f(h7(m.value1)(SR(v.canvasElement)(m.value0)))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 61, column 5 - line 61, column 25): "+[m.constructor.name])},_=p(ts(d))(c);return function(m){return _(function(v){return v}(m))}}};var Or=function(e){return m7(dt(e))},AR=function(e){return Or(new Tm(e,void 0))};var IR=function(e){return Or(new Mm(e,void 0))};var D7=function(){return Or(new $m(void 0))}(),RR=function(e){return Or(new Lm(e,void 0))},C7=function(){return Or(new Rm(void 0))}(),Hm=function(e){return FR(C7)(function(){return g7(e)(function(t){return FR(D7)(function(){return y7(t)})})})};var Dc=function(e){return Or(new bm(e,void 0))};var $R=function(e){return Or(new Cm(e,void 0))};var HR=function(e){return Or(new wm(e,void 0))};var OR=function(){return Or(new Em(void 0))}();var PR=function(e){return Or(new Am(e,void 0))};var Om=function(){return Or(new gm(Qb))}();var Pm=function(){return Or(new ym(Qb))}();var kR=function(){return Or(new Dm(Qb))}(),Yb=function(e){return function(t){return Or(new Im(e,t,void 0))}},op=function(e){return Or(new Fm(e,void 0))};var km=function(e){return Or(new xm(e,void 0))};var NR=function(){return Or(new Sm(void 0))}();var b7=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var BR=function(e){return function(t){return Ja(function(n){return e(n.value0)(n.value1)})(t)}};var WR=function(e){return function(t){return X0(new b7(e,t))}},Zb={map:function(e){return function(t){return Ja(function(n){return WR(function(o){return e(n.value0(o))})(n.value1)})(t)}}};var UR=WR(he(_e));var S7=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}();var Nm=function(e){return S7.create(Re(e.Eq0()))(Te(e))},E7={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},qR={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return E7}};var nw=ml(zt)(qR);var x7=xD(nw),L7=Zo(nw),A7=Jr(nw);var Bm=function(){return function(e){var t=qn(e);return function(n){var o=Nm(n);return function(h){return function(a){return function(r){return x7(new ee(t(h),o(a)))(r)}}}}}},Wm=function(){return function(e){var t=qn(e);return function(n){var o=Nm(n);return function(h){return function(a){return function(r){return L7(new ee(t(h),o(a)))(r)}}}}}},Um=function(){return function(e){var t=qn(e);return function(n){var o=Nm(n);return function(h){return function(a){return function(r){return function(l){return A7(new ee(t(h),o(a)))(r)(l)}}}}}}},qm=function(e){var t=ut(e)(Ui);return function(n){return function(o){return t(function(h){return o(h)})(n)}}},is=mr;var VR=function(){function e(){}return e.value=new e,e}(),Ql=function(){function e(){}return e.value=new e,e}(),zR=function(){function e(){}return e.value=new e,e}(),GR=function(){function e(){}return e.value=new e,e}(),JR=function(){function e(){}return e.value=new e,e}(),jR=function(){function e(){}return e.value=new e,e}(),KR=function(){function e(){}return e.value=new e,e}(),QR=function(){function e(){}return e.value=new e,e}(),XR=function(){function e(){}return e.value=new e,e}(),YR=function(){function e(){}return e.value=new e,e}(),ZR=function(){function e(){}return e.value=new e,e}(),e$=function(){function e(){}return e.value=new e,e}(),t$=function(){function e(){}return e.value=new e,e}(),n$=function(){function e(){}return e.value=new e,e}(),r$=function(){function e(){}return e.value=new e,e}(),o$=function(){function e(){}return e.value=new e,e}(),a$=function(){function e(){}return e.value=new e,e}(),i$=function(){function e(){}return e.value=new e,e}(),u$=function(){function e(){}return e.value=new e,e}(),s$=function(){function e(){}return e.value=new e,e}(),c$=function(){function e(){}return e.value=new e,e}(),l$=function(){function e(){}return e.value=new e,e}(),f$=function(e){if(e instanceof VR)return"button";if(e instanceof Ql)return"checkbox";if(e instanceof zR)return"color";if(e instanceof GR)return"date";if(e instanceof JR)return"datetime-local";if(e instanceof jR)return"email";if(e instanceof KR)return"file";if(e instanceof QR)return"hidden";if(e instanceof XR)return"image";if(e instanceof YR)return"month";if(e instanceof ZR)return"number";if(e instanceof e$)return"password";if(e instanceof t$)return"radio";if(e instanceof n$)return"range";if(e instanceof r$)return"reset";if(e instanceof o$)return"search";if(e instanceof a$)return"submit";if(e instanceof i$)return"tel";if(e instanceof u$)return"text";if(e instanceof s$)return"time";if(e instanceof c$)return"url";if(e instanceof l$)return"week";throw new Error("Failed pattern match at DOM.HTML.Indexed.InputType (line 33, column 19 - line 55, column 22): "+[e.constructor.name])};var Vm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Mn=function(){function e(t,n,o,h){this.value0=t,this.value1=n,this.value2=o,this.value3=h}return e.create=function(t){return function(n){return function(o){return function(h){return new e(t,n,o,h)}}}},e}(),up=ne,Co=function(e,t){return e.value2(e.value1,t)},Fn=ne,bo=function(e){return e.value3(e.value1)},Pr=up(function(e){return e.value0});var p$=z(mt),J7=z(Li);var us=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ki=function(){function e(t,n,o,h){this.value0=t,this.value1=n,this.value2=o,this.value3=h}return e.create=function(t){return function(n){return function(o){return function(h){return new e(t,n,o,h)}}}},e}(),ss=function(){function e(t,n,o,h){this.value0=t,this.value1=n,this.value2=o,this.value3=h}return e.create=function(t){return function(n){return function(o){return function(h){return new e(t,n,o,h)}}}},e}(),cs=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),j7=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),h$=function(e){return function(t){return e(t)}};var K7=ne;var Q7={bimap:function(e){return function(t){return h$(function(n){return K7(new j7(function(o){return e(n.value0(o))},function(o){return t(n.value1(o))},n.value2))})}}},X7=Lo(Q7);var bc=h$(function(e){var t=function(n){if(n instanceof us)return new us(n.value0);if(n instanceof Ki)return new Ki(n.value0,n.value1,e.value0(n.value2),p$(t)(n.value3));if(n instanceof ss)return new ss(n.value0,n.value1,e.value0(n.value2),p$(J7(t))(n.value3));if(n instanceof cs)return new cs(e.value1(n.value0));if(n instanceof Qi)return new Qi(X7(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function wc(e,t){return t[e]}function ow(e,t){return t.hasOwnProperty(e)}function Xi(e,t,n){n[e]=t}function aw(e,t){for(var n=[],o=0;o<e.length;o++)n.push(t(o,e[o]));return n}function iw(e,t){for(var n=0;n<e.length;n++)t(e[n])}function uw(e,t){for(var n=Object.keys(e),o=0;o<n.length;o++){var h=n[o];t(h,e[h])}}function sw(e,t,n,o,h){for(var a=[],r=e.length,l=t.length,u=0;;){if(u<r)u<l?a.push(n(u,e[u],t[u])):o(u,e[u]);else if(u<l)a.push(h(u,t[u]));else break;u++}return a}function sp(e,t,n){for(var o={},h=0;h<e.length;h++){var a=e[h],r=t(a);o[r]=n(r,h,a)}return o}function cp(e,t,n,o,h,a){for(var r={},l=0;l<t.length;l++){var u=t[l],i=n(u);e.hasOwnProperty(i)?r[i]=o(i,l,e[i],u):r[i]=a(i,l,u)}for(var i in e)i in r||h(i,e[i]);return r}function Sc(e,t){return e===t}function cw(e,t){return t.createTextNode(e)}function lw(e,t){t.textContent=e}function Gm(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function ls(e,t,n){var o=n.childNodes.item(e)||null;o!==t&&n.insertBefore(t,o)}function lp(e,t){t&&e.parentNode===t&&t.removeChild(e)}function fp(e){return e.parentNode}function Jm(e,t,n,o){e!=null?o.setAttributeNS(e,t,n):o.setAttribute(t,n)}function jm(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function fw(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function dw(e,t,n){n.addEventListener(e,t,!1)}function pw(e,t,n){n.removeEventListener(e,t,!1)}var hw=void 0;var dp=function(){return{}};function _w(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var mw=wc,vw=ne,gw=Xi,yw=dp;var pp=function(e,t,n){var o=0,h;return function(a){if(o===2)return h;if(o===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return o=1,h=n(),o=2,h}};var Cw=function(e){return bo(e.widget)},bw=pp("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Qi)return bw(291)(e,bc(t.value0));if(t instanceof cs){var n=Co(e.widget,t.value0),o=up(function(h){return Fn(new Mn(h.value0,{build:e.build,widget:n},bw(296),Cw))})(n);return o}return Cw(e),e.build(t)}}),nV=bw(286),Km=function(e){var t=fp(e.node);return lp(e.node,t)},Qm=pp("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Qi)return Qm(82)(e,bc(t.value0));if(t instanceof us){if(e.value===t.value0)return Fn(new Mn(e.node,e,Qm(85),Km));if(pn){var n={build:e.build,node:e.node,value:t.value0};return lw(t.value0,e.node),Fn(new Mn(e.node,n,Qm(89),Km))}}return Km(e),e.build(t)}}),rV=Qm(77),Xm=function(e){var t=fp(e.node);return lp(e.node,t),uw(e.children,function(n,o){return bo(o)}),bo(e.attrs)},Ym=function(e){var t=fp(e.node);return lp(e.node,t),iw(e.children,bo),bo(e.attrs)},m$=function(e,t,n,o){var h=t===o;return h?e instanceof W&&n instanceof W&&e.value0===n.value0||e instanceof V&&n instanceof V:!1},Zm=pp("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Qi)return Zm(135)(e,bc(t.value0));if(t instanceof Ki&&m$(e.ns,e.name,t.value0,t.value1)){var n=tr(t.value3),o=tr(e.children);if(o===0&&n===0){var u=Co(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:e.children};return Fn(new Mn(e.node,i,Zm(149),Ym))}var h=function(s,f){return bo(f)},a=function(s,f,p){var d=Co(f,p);return ls(s,Pr(d),e.node),d},r=function(s,f){var p=e.build(f);return ls(s,Pr(p),e.node),p},l=sw(e.children,t.value3,a,h,r),u=Co(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:l};return Fn(new Mn(e.node,i,Zm(172),Ym))}return Ym(e),e.build(t)}}),oV=Zm(130),ev=pp("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Qi)return ev(222)(e,bc(t.value0));if(t instanceof ss&&m$(e.ns,e.name,t.value0,t.value1)){var n=tr(t.value3);if(e.length===0&&n===0){var l=Co(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:e.children,length:0};return Fn(new Mn(e.node,u,ev(237),Xm))}var o=function(i,s){return bo(s)},h=function(i,s,f,p){var d=Co(f,p.value1);return ls(s,Pr(d),e.node),d},a=function(i,s,f){var p=e.build(f.value1);return ls(s,Pr(p),e.node),p},r=cp(e.children,t.value3,rr,h,o,a),l=Co(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:r,length:n};return Fn(new Mn(e.node,u,ev(261),Xm))}return Xm(e),e.build(t)}}),aV=ev(217),iV=function(e,t,n){var o=e.buildWidget(e)(n),h=up(function(a){return Fn(new Mn(a.value0,{build:t,widget:o},nV,Cw))})(o);return h},uV=function(e,t,n){var o=cw(n,e.document),h={build:t,node:o,value:n};return Fn(new Mn(o,h,rV,Km))},sV=function(e,t,n,o,h,a){var r=Gm(Ta(n),o,e.document),l=ZC(r),u=function(p,d,c){var _=t(c.value1);return ls(d,Pr(_),l),_},i=sp(a,rr,u),s=e.buildAttributes(r)(h),f={build:t,node:l,attrs:s,ns:n,name:o,children:i,length:tr(a)};return Fn(new Mn(l,f,aV,Xm))},cV=function(e,t,n,o,h,a){var r=Gm(Ta(n),o,e.document),l=ZC(r),u=function(p,d){var c=t(d);return ls(p,Pr(c),l),c},i=aw(a,u),s=e.buildAttributes(r)(h),f={build:t,node:l,attrs:s,ns:n,name:o,children:i};return Fn(new Mn(l,f,oV,Ym))},hp=function(e){var t=pp("build","Halogen.VDom.DOM",function(){return function(o){if(o instanceof us)return uV(e,t(59),o.value0);if(o instanceof Ki)return cV(e,t(60),o.value0,o.value1,o.value2,o.value3);if(o instanceof ss)return sV(e,t(61),o.value0,o.value1,o.value2,o.value3);if(o instanceof cs)return iV(e,t(62),o.value0);if(o instanceof Qi)return t(63)(bc(o.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[o.constructor.name])}}),n=t(58);return n};function Ew(e){return e()}function g$(e){return function(t){return function(n){return function(o){var h=n;function a(l){return function(u){return t(u)(l)(o[l])}}for(var r in o)hasOwnProperty.call(o,r)&&(h=e(h)(a(r)));return h}}}}function y$(e,t,n,o){return n in o?t(o[n]):e}function Tw(e){return function(t){var n=[];for(var o in t)hasOwnProperty.call(t,o)&&n.push(e(o)(t[o]));return n}}var lV=Object.keys||Tw(function(e){return function(){return e}});var pV=st(zs);var tv=function(){return Tu(y$)(V.value)(W.create)}();var _p=function(e){var t=Ii(e);return function(n){return Ew(function(){var h=dp();return rd(t(n))(function(a){return pV(_w(a.value0)(a.value1)(h))})(),h})}};var hV=g$(OM),D$=function(e){var t=De(e.Semigroup0()),n=ct(e);return function(o){return hV(function(h){return function(a){return function(r){return t(h)(o(a)(r))}}})(n)}};function mp(e){return function(){return function(t){return e(t)()}}}function Fw(e){return function(t){return function(n){return function(o){return function(){return o.addEventListener(e,t,n)}}}}}function xw(e){return function(t){return function(n){return function(o){return function(){return o.removeEventListener(e,t,n)}}}}}var _V=function(e,t,n){var o=0,h;return function(a){if(o===2)return h;if(o===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return o=1,h=n(),o=2,h}};var Aw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Iw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yi=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),ds=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ps=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ec=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mV=wc,Lw=Xi,vV=function(e,t){var n=fw(null,e,t);if(n)return jm(null,e,t);var o=lm(wc(e,t));return o==="string"?Xi(e,"",t):e==="rowSpan"?Xi(e,1,t):e==="colSpan"?Xi(e,1,t):Xi(e,hw,t)},b$=function(e){if(e instanceof Yi&&e.value0 instanceof W)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof Yi)return"attr/:"+e.value1;if(e instanceof ds)return"prop/"+e.value0;if(e instanceof ps)return"handler/"+e.value0;if(e instanceof Ec)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},nv=ne;var w$=ne;var S$=function(e){return function(t){var n=function(s){return function(f,p){if(p instanceof Yi)return jm(Ta(p.value0),p.value1,t);if(p instanceof ds)return vV(p.value0,t);if(p instanceof ps){var d=mw(p.value0,s);return pw(p.value0,rr(d),t)}if(p instanceof Ec)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[p.constructor.name])}},o=function(s){return s instanceof W?e(s.value0)():void 0},h=function(s){var f=tv("ref")(s.props);return f instanceof W&&f.value0 instanceof Ec?o(f.value0.value0(new Iw(t))):void 0},a=function(s,f){return function(p,d,c,_){if(c instanceof Yi&&_ instanceof Yi){var m=c.value2===_.value2;return m||Jm(Ta(_.value0),_.value1,_.value2,t),_}if(c instanceof ds&&_ instanceof ds){var v=Sc(c.value1,_.value1);if(v)return _;if(_.value0==="value"){var y=mV("value",t),C=Sc(y,_.value1);return C||Lw(_.value0,_.value1,t),_}return Lw(_.value0,_.value1,t),_}if(c instanceof ps&&_ instanceof ps){var S=mw(_.value0,s);return qt(_.value1)(hn(S))(),gw(_.value0,S,f),_}return _}},r=function(s){return function(f,p,d){if(d instanceof Yi)return Jm(Ta(d.value0),d.value1,d.value2,t),d;if(d instanceof ds)return Lw(d.value0,d.value1,t),d;if(d instanceof ps){var c=wc(d.value0,s);if(ow(d.value0,s))return qt(d.value1)(hn(c))(),d;var _=cn(d.value1)(),m=mp(function(v){return function(){var C=Ke(_)();return o(C(v))}})();return gw(d.value0,new ee(m,_),s),dw(d.value0,m,t),d}if(d instanceof Ec)return o(d.value0(new Aw(t))),d;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[d.constructor.name])}},l=_V("patchProp","Halogen.VDom.DOM.Prop",function(){return function(s,f){var p=yw(),d=n(s.events),c=a(s.events,p),_=r(p),m=cp(s.props,f,b$,c,d,_),v={events:vw(p),props:m};return Fn(new Mn(void 0,v,l(100),h))}}),u=l(87),i=function(s){var f=yw(),p=sp(s,b$,r(f)),d={events:vw(f),props:p};return Fn(new Mn(void 0,d,u,h))};return i}};var $w=function(e){return e},Hw=function(e){return $w(cs.create(e))},DV=function(e){return e.toPropValue},Zn=function(e){return $w(us.create(e))},F$=function(e){return new Ec(function(t){return e(function(n){if(n instanceof Aw)return new W(n.value0);if(n instanceof Iw)return V.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},x$=function(e){var t=DV(e);return function(n){var o=ds.create(n);return function(h){return o(t(h))}}};var rv={toPropValue:nv};var Ow={toPropValue:function(){var e=In();return function(t){return nv(e(t))}}()};var L$={toPropValue:w$},A$={toPropValue:function(e){return nv(f$(e))}};var Pw=function(){return ps.create}(),I$=function(e){return function(t){return function(n){return function(o){return new Ki(e,t,n,o)}}}};var R$=function(e){return function(t){return Yi.create(e)(t)}};var bV=he(_e);var ov=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),H$=function(e){return function(t){return new Nw(e,t)}},O$=function(){return kw.create}(),P$=function(e){var t=X(e);return function(n){return function(o){return function(h){return function(a){return function(r){if(a instanceof ov)return new ee(new Xe({func:t(a.value0),count:r},n),o);if(a instanceof kw)return new ee(new Xe({func:h(a.value0),count:r},n),o);if(a instanceof Nw)return P$(e)(n)(bR(a.value1)(o))(h)(a.value0)(r+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[a.constructor.name])}}}}}},k$=function(e){var t=ht(e.Apply0());return function(n){return function(o){return function(h){if(n instanceof Ye)return new We(h);if(n instanceof Xe){var a=t(n.value0.func)(h),r=n.value0.count===1;if(r)return n.value1 instanceof Ye?new We(a):k$(e)(n.value1)(o)(a);if(o instanceof Ye)return new We(a);if(o instanceof Xe)return new Oe(new ee(new Xe({func:a,count:n.value0.count-1|0},n.value1),new ao(o.value0,o.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[o.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},N$={map:function(e){return function(t){return H$(new ov(e))(t)}}},B$=function(e){var t=k$(e),n=X(e),o=P$(e);return function(h){return function(a){var r=function(l){var u=!1,i;function s(f){if(f.value1.value0 instanceof ov){var p=t(f.value0)(f.value1.value1)(n(f.value1.value0.value0));if(p instanceof We)return u=!0,p.value0;if(p instanceof Oe){l=p.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[p.constructor.name])}if(f.value1.value0 instanceof kw){var p=t(f.value0)(f.value1.value1)(h(f.value1.value0.value0));if(p instanceof We)return u=!0,p.value0;if(p instanceof Oe){l=p.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[p.constructor.name])}if(f.value1.value0 instanceof Nw){var d=new ao(f.value1.value0.value1,f.value1.value1);l=o(f.value0)(d)(h)(f.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[f.value1.value0.constructor.name])}for(;!u;)i=s(l);return i};return r(new ee(Ye.value,dm(a)))}}},W$=function(e){return B$(e)(bV)},U$={apply:function(e){return function(t){return H$(e)(t)}},Functor0:function(){return N$}},q$=function(){return{pure:ov.create,Apply0:function(){return U$}}}(),wV=B$(q$),Bw=function(e){return wV(function(t){return O$(e(t))})};var z$=function(){function e(t,n,o){this.value0=t,this.value1=n,this.value2=o}return e.create=function(t){return function(n){return function(o){return new e(t,n,o)}}},e}(),G$=ne,J$=ne;function Ww(e){return function(t){return e===t}}var Xl=Ww;var MV=st(Pe);var FV=Z(xr);var xV=De(sn),LV=ut(rn),AV=LV(vt);var av=function(e){return e},X$=function(e){return function(t){return e(function(n){return MV(t(n))})}};var Jn=function(e){return function(t){return e(t)}};var vp={map:function(e){return function(t){return function(n){return t(function(o){return n(e(o))})}}}};var jn=function(){var t=cn([])();return{emitter:function(n){return function(){return ro(function(h){return xV(h)([n])})(t)(),ro(__(Xl)(n))(t)}},listener:function(n){return FV(Ke(t))(AV(function(o){return o(n)}))}}};var qw=he(_e);var RV=Wm();var Y$=function(e){return e},Z$=function(e){return e},gp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Dp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Tc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),iv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),wp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Zl=function(e){return e},lv=function(e){return dt(new Dp(e,void 0))};var Rn=function(e){return dt(new yp(function(t){return e},qw))};var lr=function(e){return dt(new bp(e,void 0))};var yr=function(){return function(e){var t=RV(e);return function(n){var o=t(n);return function(h){return function(a){return function(r){return dt(new Cp(J$(new z$(function(l){var u=X(l);return function(i){var s=Qe(u(V.value))(i),f=o(h)(a);return function(p){return s(f(p))}}},r,qw))))}}}}}},Vw=yt,fv=yt;var ef={lift:function(e){return function(t){return Zl(dt(Tc.create(t)))}}},Mc=Jl,Ht={state:function(e){return Zl(dt(gp.create(e)))},Monad0:function(){return Mc}};var xn=function(e){return{liftEffect:function(){var t=Le(e);return function(n){return Zl(dt(Tc.create(t(n))))}}(),Monad0:function(){return Mc}}};var ni=function(e){var t=xn(e.MonadEffect0());return{liftAff:function(){var n=Dn(e);return function(o){return Zl(dt(Tc.create(n(o))))}}(),MonadEffect0:function(){return t}}};var kr=function(e){return dt(new wp(e,qw))},$n=ji;var Bt=cr,$V=Z(Bt),dv=Qd;var Qt=gr,HV=X(Qt),Sp={tailRecM:function(e){return function(t){return $V(e(t))(function(n){if(n instanceof Pt)return mn(Sp)(e)(n.value0);if(n instanceof Nt)return HV(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return Mc}};var tf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),of=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),af=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var OV=function(e,t,n){var o=0,h;return function(a){if(o===2)return h;if(o===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return o=1,h=n(),o=2,h}};var PV=function(e,t){return Sc(e.value0,t.value0)&&Sc(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var eH=function(e){return e.value2(e.value3)};var tH=function(e){var t=function(a){return bo(a.vdom)},n=OV("patchThunk","Halogen.VDom.Thunk",function(){return function(a,r){var l=PV(a.thunk,r);if(l)return Fn(new Mn(Pr(a.vdom),a,n(112),t));var u=Co(a.vdom,e(eH(r)));return Fn(new Mn(Pr(u),{vdom:u,thunk:r},n(115),t))}}),o=n(108),h=function(a){return function(r){var l=hp(a)(e(eH(r)));return Fn(new Mn(Pr(l),{thunk:r,vdom:l},o,t))}};return h};var pv=nl($n),Jw=ut(Qt)($t),kV=z($n);var nH=X(Qt),NV=Wm(),BV=Bm(),WV=Um(),uf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jw=ne,Kw=ne,Xt=function(e){return function(t){if(t instanceof tf)return pv(Jw(e.handleAction)(e.initialize))(t.value0);if(t instanceof nf)return pv(Jw(e.handleAction)(e.finalize))(t.value0);if(t instanceof rf)return pv(Jw(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof of)return pv(e.handleAction(t.value0))(t.value1);if(t instanceof af)return BR(function(n){var o=kV(Qe(t.value1(void 0))(n));return function(h){return o(e.handleQuery(h))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},UV=ne,Yt=ne;var at=function(){return{handleAction:me(nH(void 0)),handleQuery:me(nH(V.value)),receive:me(V.value),initialize:V.value,finalize:V.value}}(),Qw=function(){return function(e){var t=NV(e),n=BV(e),o=WV(e);return function(h){var a=t(h),r=n(h),l=o(h);return function(u){return function(i){return function(s){return function(f){return function(p){return UV({get:a(u)(i),pop:r(u)(i),set:l(u)(i),component:s,input:f,output:p})}}}}}}}};var ri=function(){return I$(V.value)}();var rH=ri("h3"),Ep=rH([]);var Xw=function(e){return ri("img")(e)([])},Tp=function(e){return ri("input")(e)([])};var Yw=ri("option");var Zw=ri("select");var eS=ri("style");var Zt=ri("div"),fr=Zt([]);var tS=function(e){return ri("canvas")(e)([])},sf=ri("button");var oi=function(){var e=function(t){return function(n){return new W(new Vm(t,n))}};return function(t){return F$(e(t))}}(),Fc=function(e){return x$(e)};var qV=Fc(rv),oH=Fc(L$);var aH=qV("src");var iH=function(e){return Fc(e)("type")},uH=function(e){return Fc(e)("value")},sH=oH("width");var cH=oH("height");var nS=function(){return R$(V.value)}();var rS=Z(Bt),VV=$r(Ht),zV=Sn(Zs)(Qt),GV=wt(ef),JV=ut(Qt)($t),jV=gn(Ht),KV=function(){function e(){}return e.value=new e,e}(),QV=function(e){return tS([oi("canvas"),sH(e.dimensions.width),cH(e.dimensions.height)])},XV=function(e){var t=GV(e.MonadEffect0().Monad0()),n=LR(e);return function(o){var h=n(o);return function(a){return rS(VV)(function(r){return $e(zV)(r.canvas)(function(l){return t(Sa(h(a))(l))})})}}},YV=function(e){var t=Le(xn(e.MonadEffect0()));return function(n){return rS(kr("canvas"))(function(o){return $e(JV)(o)(function(h){return rS(t(nm(h)))(function(a){return jV(function(r){var l={};for(var u in r)({}).hasOwnProperty.call(r,u)&&(l[u]=r[u]);return l.canvas=new W({canvasElement:h,context2D:a}),l})})})})}},cf=function(e){var t=YV(e),n=XV(e);return function(o){return Yt({initialState:function(h){return{dimensions:h,canvas:V.value}},render:QV,eval:Xt({receive:at.receive,finalize:at.finalize,handleAction:t,handleQuery:n(o),initialize:new W(KV.value)})})}};var lH=Qw();var ra=function(){return function(e){var t=lH(e);return function(n){var o=t(n);return function(h){return function(a){return function(r){return function(l){return Hw(new uf(o(h)(a)(r)(l)(me(V.value))))}}}}}}},ai=function(){return function(e){var t=lH(e);return function(n){var o=t(n);return function(h){return function(a){return function(r){return function(l){return function(u){return Hw(new uf(o(h)(a)(r)(l)(function(i){return W.create(u(i))})))}}}}}}}};function dH(e){return e.target}function _s(e){return function(){return e.stopPropagation()}}var aS=function(e){return ln(dH(e))};var iS="DOMContentLoaded";var pH="change";var mH="keyup",vH="keydown";var gH="mouseup";var yH="mousemove",DH="mouseleave",CH="mouseenter",bH="mousedown",wH="dblclick",SH="click";var xc=ne,EH=ne;var ui=function(e){return function(t){return Pw(e)(function(n){return new W(new Cc(t(n)))})}};var lf=ui(pH),Lc=function(){var e=ui(SH);return function(t){return e(xc(t))}}(),TH=function(){var e=ui(wH);return function(t){return e(xc(t))}}();var MH=function(){var e=ui(vH);return function(t){return e(EH(t))}}(),FH=function(){var e=ui(mH);return function(t){return e(EH(t))}}();var xH=function(){var e=ui(bH);return function(t){return e(xc(t))}}(),LH=function(){var e=ui(CH);return function(t){return e(xc(t))}}(),AH=function(){var e=ui(DH);return function(t){return e(xc(t))}}(),IH=function(){var e=ui(yH);return function(t){return e(xc(t))}}();var RH=function(){var e=ui(gH);return function(t){return e(xc(t))}}();var uS=ne;function _v(e){return e.clientX}function mv(e){return e.clientY}var Po=ne;var $H=nt(rt)(Bt),gz=Z(Bt),HH={reflectSymbol:function(){return"canvas"}},OH=yr()(HH)(Jt),yz=ut(Qt)($t),Dz=ra()(HH)(Jt),Cz=he(_e),PH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),NH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),BH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),WH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lS=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ms=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bz={toEvent:function(e){if(e instanceof PH)return Po(e.value0);if(e instanceof kH)return Po(e.value0);if(e instanceof gv)return Po(e.value0);if(e instanceof yv)return Po(e.value0);if(e instanceof NH)return Po(e.value0);if(e instanceof Dv)return Po(e.value0);if(e instanceof Cv)return Po(e.value0);throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 101, column 1 - line 108, column 47): "+[e.constructor.name])}},wz={toEvent:function(e){if(e instanceof BH)return uS(e.value0);if(e instanceof WH)return uS(e.value0);throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 97, column 1 - line 99, column 46): "+[e.constructor.name])}},Sz=function(e){return e.toEvent},UH=function(e){var t=Sz(e);return function(n){return _s(t(n))}},Ez=UH(wz),Tz=UH(bz),fS=function(){return pt.value}(),Mz=function(e){var t=Le(xn(e.MonadEffect0()));return function(n){return function(o){if(o instanceof sS)return $H(t(Ez(o.value0)))(function(){return lr(new cS(o.value0))});if(o instanceof ms)return $H(t(Tz(o.value0)))(function(){return gz(OH(fS)(void 0)(kR))(function(h){return $e(yz)(h)(function(a){return lr(new lS(o.value0,a))})})});throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 84, column 16 - line 92, column 32): "+[o.constructor.name])}}},Fz=function(e){var t=cf(e);return function(n){var o=t(n);return function(h){return Zt([MH(function(a){return sS.create(BH.create(a))}),FH(function(a){return sS.create(WH.create(a))}),Lc(function(a){return ms.create(PH.create(a))}),TH(function(a){return ms.create(kH.create(a))}),xH(function(a){return ms.create(gv.create(a))}),RH(function(a){return ms.create(yv.create(a))}),LH(function(a){return ms.create(NH.create(a))}),AH(function(a){return ms.create(Dv.create(a))}),IH(function(a){return ms.create(Cv.create(a))})])([Dz(fS)(void 0)(o)(h)])}}},qH=function(e){var t=Fz(e),n=Mz(e);return function(o){return Yt({initialState:Cz,render:t(o),eval:Xt({receive:at.receive,initialize:at.initialize,finalize:at.finalize,handleAction:n(o),handleQuery:OH(fS)(void 0)})})}};var si=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var zH=function(e){return e instanceof lo?new W(e.value1):e instanceof wo?new W(e.value0):V.value},GH=function(e){return e instanceof lo?new W(e.value0):e instanceof si?new W(e.value0):V.value};var JH=function(e){var t=De(e);return function(n){var o=De(n);return{append:function(h){return function(a){if(h instanceof si&&a instanceof si)return new si(t(h.value0)(a.value0));if(h instanceof si&&a instanceof wo)return new lo(h.value0,a.value0);if(h instanceof si&&a instanceof lo)return new lo(t(h.value0)(a.value0),a.value1);if(h instanceof wo&&a instanceof si)return new lo(a.value0,h.value0);if(h instanceof wo&&a instanceof wo)return new wo(o(h.value0)(a.value0));if(h instanceof wo&&a instanceof lo)return new lo(a.value0,o(h.value0)(a.value1));if(h instanceof lo&&a instanceof si)return new lo(t(h.value0)(a.value0),h.value1);if(h instanceof lo&&a instanceof wo)return new lo(h.value0,o(h.value1)(a.value0));if(h instanceof lo&&a instanceof lo)return new lo(t(h.value0)(a.value0),o(h.value1)(a.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[h.constructor.name,a.constructor.name])}}}}};var Nz=De(Ns),Bz=ct(Fi),KH=Qs(vt),QH=KH(Fi),wv=Ba(vt)(Fi),ci=z(mt),pS=ht(Bs),Wz=De(sn),XH=kn(vt),Uz=XH(Fi),qz=L0(XL),Sv=z(Dt),Vz=Mt($M),YH=Z(Vr),zz=s_(k0(vt)),ZH=z(bd(mt));var Gz=a_(vt)(no),Jz=Z(gu),jz=m_(Ed),Kz=ha(ud(pa)),Qz=Ba(v_(vt))(Fi),Xz=Se(Sr),Ev=function(e){return e},Yz=function(e){return e},hS=function(e){return function(t){return function(n){return t+(e+n)}}},Zz={append:function(e){return function(t){return e+t}}},eG={append:function(e){return function(t){return e+t}}},eO=JH(Zz)(eG),tO=RF(eO),bv=XH(tO),tG=KH(tO),xp=De(Ky(eO)),jH=function(e){var t=bn(function(n){return Bz})(function(n){return QH([n.value0,": ",n.value1])});return wv("; ")(ci(t)(e))},nG=function(e){if(e instanceof ku)return"#"+e.value0;if(e instanceof Oi)return"."+e.value0;if(e instanceof Nu)return"["+(e.value0+"]");if(e instanceof Bu)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof Wu)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof Uu)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof qu)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof Vu)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof zu)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof Pi)return":"+e.value0;if(e instanceof Al)return":"+(e.value0+("("+(wv(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},rG=function(e){return function(t){if(e.length===0&&t instanceof M_)return["*"];if(t instanceof M_)return[""];if(t instanceof nD)return[t.value0];if(t instanceof rD)return pS(ci(hS(" > "))(eu(t.value0)))(eu(t.value1));if(t instanceof oD)return pS(ci(hS(" "))(eu(t.value0)))(eu(t.value1));if(t instanceof jL)return pS(ci(hS(" + "))(eu(t.value0)))(eu(t.value1));if(t instanceof KL)return Wz(eu(t.value0))(eu(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},eu=function(e){return ci(function(t){return t+Uz(nG)(qz(e.value0))})(rG(e.value0)(e.value1))},oG=function(){var e=wv(", ");return function(t){return e(eu(t))}}(),Ac=function(e){return e.length===0?V.value:Sv(function(t){return new ao(t.head,t.tail)})(f_(e))};var ff=function(e){if(e.value0 instanceof iA)return Qe(e.value0.value0)(function(t){return YL(ff(t))(e.value0.value0)})(Ac(e.value1));if(e.value0 instanceof fD)return Qe(e.value0.value0)(function(t){return Gn(ff(t))(e.value0.value0)})(Ac(e.value1));if(e.value0 instanceof oA)return Qe(e.value0.value0)(function(t){return Gn(e.value0.value0)(ff(t))})(Ac(e.value1));if(e.value0 instanceof aA)return Qe(F_("TODO"))(ff)(Ac(R0(e.value0.value0)(Tn(e.value0)(e.value1))));if(e.value0 instanceof rA)return Qe(ft(Vt)(e.value0.value0))(function(t){return ft(ff(t))(e.value0.value0)})(Ac(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},aG=function(e){return Fd(e)},iG=function(e){return W.create(wo.create(Ev(Vz("@import url("+(e+`);
`)))))},uG=function(e){return e},_S=function(e){return YH(e)(function(){var t=Sv(uG);return function(n){return t(zH(n))}}())},sG=function(e){return e},nO=function(e){return YH(e)(function(){var t=Sv(sG);return function(n){return t(GH(n))}}())},cG=function(e){return Qe(e.value0)(function(t){return"("+(e.value0+(": "+(Fd(t)+")")))})(e.value1)},lG=function(e){return"@media "+(aG(e.value1)+zz(Nz)(ZH(function(t){return function(n){return" and "+n}(cG(t))})(e.value2)))};var fG=function(e){return function(t){if(e instanceof uo&&t instanceof uo)return[new Oe(new ee(e.value0,t.value0))];if(e instanceof io&&t instanceof uo)return ci(function(n){return new Oe(new ee(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof uo&&t instanceof io)return ci(function(n){return new Oe(new ee(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof io&&t instanceof io)return ci(function(n){return Qe(new We(n.value0+n.value1))(function(){var o=ee.create(n.value0+n.value1);return function(h){return Oe.create(o(function(a){return n.value0+a}(h)))}}())(Gz(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},mS=function(e){return fG(e.value0)(e.value1)},dG=function(e){return function(t){var n=Jz(t)(mS),o=Sv(function(a){return si.create(Yz(jH(jz(a))))})(Ac(n)),h=function(a){return W.create(wo.create(Ev(wv(" ")([oG(ff(a)),"{",jH(n),`}
`]))))};return Qe(o)(h)(Ac(e))}},Lp=function(e){return function(t){var n=function(_){return _ instanceof uA?new W(new ee(_.value0,_.value1)):V.value},o=bv(Eu($e(pG)(e)))(Wa(n)(t)),h=function(_){return _ instanceof $d?new W(new ee(_.value0,_.value1)):V.value},a=function(){var _=Wa(h)(t),m=Kz(tc)(_);return m?dG(e)(_):V.value}(),r=function(_){return Lp(Tn(_)(e))},l=function(_){return _ instanceof dD?new W(new ee(_.value0,_.value1)):V.value},u=tG(ci(Eu(r))(Wa(l)(t))),i=function(_){return _ instanceof cA?new W(_.value0):V.value},s=bv(hG)(Wa(i)(t)),f=function(_){return _ instanceof lA?new W(_.value0):V.value},p=bv(iG)(Wa(f)(t)),d=function(_){return _ instanceof sA?new W(_.value0):V.value},c=bv(mG)(Wa(d)(t));return xp(a)(xp(p)(xp(s)(xp(c)(xp(u)(o)))))}},pG=function(e){return function(t){return function(n){return W.create(wo.create(Ev(lG(e)+(" { "+(nr("")(_S(Lp(t)(n)))+` }
`)))))}}},hG=function(e){var t=" "+(e.value0+(" { "+(Qz(" ")(ZH(Eu(_G))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],o=QH(ci(function(h){return h+t})(n));return new W(new wo(o))},_G=function(e){return function(t){var n=nr("")(nO(Lp([])(t)));return Xz(e)+("% "+("{ "+(n+" }")))}},mG=function(e){return W.create(wo.create(Ev("@font-face { "+(nr("")(nO(Lp([])(e)))+` }
`))))},rO=function(){var e=Lp([]);return function(t){return e(Hd(t))}}();var gG=iH(Ow),yG=Z(gu),DG=_p(vt),oO=function(e){var t=nr("")(_S(rO(e)));return eS([gG("text/css")])([Zn(t)])},Ln=function(){var e=function(){var a=_o("; "),r=D$(Vs)(function(l){return function(u){return[l+(": "+u)]}});return function(l){return a(r(l))}}(),t=H0(kn(o_)(Vs)(ec)),n=function(a){return a instanceof $d?new W(new ee(a.value0,a.value1)):V.value},o=function(a){var r=yG(Wa(n)(a))(function(l){return t(mS(l))});return DG(r)},h=nS("style");return function(a){return h(e(o(Hd(a))))}}();var CG=Se(Er),aO=Se(FF()()(LF({reflectSymbol:function(){return"x"}})(AF({reflectSymbol:function(){return"y"}})(Sr))(Sr))),bG=z(mt),iO=$r(Ht),Tv=Ao(Ht),wG=z(Dt),sO=nt(rt),gs=sO(ti),SG=ut(Xb)(vt),EG=Z(Bt),TG=st($n),cO={reflectSymbol:function(){return"sketch"}},MG=yr()(cO)(Jt),uO=Z(ti),FG=sO(yo),xG=ai()(cO)(Jt),LG=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),AG=function(e){return function(t){return function(n){var o=function(h){return fr([Zn(CG(h.value0)+(" "+(aO(h.value1.value0)+(" "+aO(h.value1.value1)))))])};return fr(bG(o)(M0(A0(0)(tr(n)))(n)))}}},IG=function(e){if(e instanceof cS)return iO;if(e instanceof lS){if(e.value0 instanceof Dv)return Tv(function(o){return{dimensions:o.dimensions,lines:o.lines,line:V.value}});if(e.value0 instanceof yv)return Tv(function(o){return{dimensions:o.dimensions,line:V.value,lines:function(){if(o.line instanceof V)return o.lines;if(o.line instanceof W)return Tn(o.line.value0)(o.lines);throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 104, column 19 - line 106, column 42): "+[o.line.constructor.name])}()}});if(e.value0 instanceof gv){var t={x:Ar(_v(e.value0.value0))-e.value1.left,y:Ar(mv(e.value0.value0))-e.value1.top};return Tv(function(o){return{dimensions:o.dimensions,lines:o.lines,line:Qe(new W(new ee(t,t)))(W.create)(o.line)}})}if(e.value0 instanceof Cv){var t={x:Ar(_v(e.value0.value0))-e.value1.left,y:Ar(mv(e.value0.value0))-e.value1.top},n=function(h){return new ee(h.value0,t)};return Tv(function(h){return{dimensions:h.dimensions,lines:h.lines,line:wG(n)(h.line)}})}return iO}throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 95, column 3 - line 115, column 19): "+[e.constructor.name])},RG=function(e){return gs(Dc(Ru(255)(255)(200)))(function(){return gs(op({x:0,y:0,width:400,height:400}))(function(){return gs(HR(Ru(0)(0)(0)))(function(){return gs($R(5))(function(){return $e(SG)(Qe(e.lines)($e(Tn)(e.lines))(e.line))(function(t){return gs(NR)(function(){return gs(IR(t.value0))(function(){return gs(AR(t.value1))(function(){return OR})})})})})})})})},lO=function(){return pt.value}(),$G=function(e){return EG(IG(e.value0))(function(t){return TG(MG(lO)(void 0)(Hm(uO(Om)(function(n){return uO(Pm)(function(o){return gs(km({x:0,y:0,width:n,height:o}))(function(){return RG(t)})})}))))})},HG=function(e){var t=qH(e),n=AG(e);return function(o){var h=t(o),a=n(o);return function(r){return Zt([Ln(FG($o(Ni))(function(){return Bi(ju)}))])([xG(lO)(void 0)(h)(r.dimensions)(LG.create),fr([Ep([Zn("Lines")]),a(r.lines)])])}}},fO=function(e){var t=HG(e);return function(n){return Yt({initialState:me({dimensions:{width:400,height:400},line:V.value,lines:[]}),render:t(n),eval:Xt({handleQuery:at.handleQuery,receive:at.receive,initialize:at.initialize,finalize:at.finalize,handleAction:$G})})}};var qG=kn(Bn),VG=_n(Bn),zG=vn(Bn);var GG=function(e){return e};var vS=function(e){return IA(e)};var pO=GG,hO={foldMap:function(e){var t=qG(e);return function(n){var o=t(n);return function(h){return o(vS(h))}}},foldl:function(e){return function(t){var n=VG(e)(t);return function(o){return n(vS(o))}}},foldr:function(e){return function(t){var n=zG(e)(t);return function(o){return n(vS(o))}}}};var _O=function(){var e=st(Bl);return function(t){return pO(e(t))}}();function mO(e){return function(t){return function(){return setInterval(t,e)}}}function vO(e){return function(){clearInterval(e)}}var gO=mO;var yO=vO;var QG=nt(rt),DO=z(Dt),XG=Qa(yt),Fv=Z(Kt),gS=Le(yn),YG=QG(Kt),yS=X(jr),ZG=z(Hr),e9=mn(Gi);var t9=ut(jr)(Bn),n9=ir(zl);var r9=function(e){return e},o9=function(e){var t=function(){var h=Ke(e)();if(h instanceof V)return V.value;if(h instanceof W){var a=Xu(h.value0.releasers);if(a instanceof V)return V.value;if(a instanceof W)return ro(DO(function(r){return{nextKey:r.nextKey,references:r.references,releasers:XG(a.value0.key)(r.releasers)}}))(e)(),new W(a.value0.value);throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 104, column 33 - line 108, column 32): "+[a.constructor.name])}throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 102, column 11 - line 108, column 32): "+[h.constructor.name])},n=function(o){return Fv(gS(t))(function(h){if(h instanceof V)return YG(gS(qt(V.value)(e)))(function(){return yS(new Nt(o))});if(h instanceof W)return Fv(gI(h.value0))(function(a){return yS(new Pt(bn(function(r){return new Xe(r,o)})(me(o))(a)))});throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 92, column 11 - line 98, column 68): "+[h.constructor.name])})};return ZG(Ji)(e9(n)(Ye.value))};var CO=function(){var e=new W({nextKey:0,references:1,releasers:mr});return z(Pe)(r9)(cn(e))}(),bO=function(e){return jD(Fv(gS(Qh(DO(function(t){return{nextKey:t.nextKey,releasers:t.releasers,references:t.references-1|0}}))(e)))(function(t){return t instanceof W&&t.value0.references===0?Fv(o9(e))(t9(n9)):yS(void 0)}))};var i9=Z(Kt),u9=Le(yn);var s9=function(e){return function(t){return i9(u9(CO))(function(n){return Wd(bO(n))(e(t(n)))})}},xv=s9(he(_e));var DS=function(e){var t=z(e);return{map:function(n){return function(o){var h=t(n);return function(a){return h(o(a))}}}}},wO=function(e){var t=ht(e),n=DS(e.Functor0());return{apply:function(o){return function(h){return function(a){return t(o(a))(h(a))}}},Functor0:function(){return n}}},c9=function(e){var t=Z(e),n=wO(e.Apply0());return{bind:function(o){return function(h){return function(a){return t(o(a))(function(r){var l=h(r);return l(a)})}}},Apply0:function(){return n}}};var l9=function(e){var t=X(e),n=wO(e.Apply0());return{pure:function(o){return function(h){return t(o)}},Apply0:function(){return n}}},Lv=function(e){var t=l9(e.Applicative0()),n=c9(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}};var Kr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var f9=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return{map:function(o){return function(h){var a=function(r){if(r instanceof Kr)return new Kr(r.value0,function(l){return a(r.value1(l))});if(r instanceof Qr)return new Qr(r.value0,function(l){return a(r.value1(l))});if(r instanceof Xr)return new Xr(t(r.value0)(function(l){return n(a(l))}));if(r instanceof Dr)return new Dr(o(r.value0));throw new Error("Failed pattern match at Pipes.Internal (line 28, column 12 - line 32, column 41): "+[r.constructor.name])};return a(h)}}}};var Ap=function(e){var t;function n(o){e=o}for(;;)t=n(e);return t},CS=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0()),o=f9(e),h=z(o);return{apply:function(a){return function(r){var l=function(u){if(u instanceof Kr)return new Kr(u.value0,function(i){return l(u.value1(i))});if(u instanceof Qr)return new Qr(u.value0,function(i){return l(u.value1(i))});if(u instanceof Xr)return new Xr(t(u.value0)(function(i){return n(l(i))}));if(u instanceof Dr)return h(u.value0)(r);throw new Error("Failed pattern match at Pipes.Internal (line 36, column 13 - line 40, column 33): "+[u.constructor.name])};return l(a)}},Functor0:function(){return o}}},df=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0()),o=CS(e);return{bind:function(h){return function(a){var r=function(l){if(l instanceof Kr)return new Kr(l.value0,function(u){return r(l.value1(u))});if(l instanceof Qr)return new Qr(l.value0,function(u){return r(l.value1(u))});if(l instanceof Xr)return new Xr(t(l.value0)(function(u){return n(r(u))}));if(l instanceof Dr)return a(l.value0);throw new Error("Failed pattern match at Pipes.Internal (line 47, column 12 - line 51, column 28): "+[l.constructor.name])};return r(h)}},Apply0:function(){return o}}};var pf=function(e){var t=CS(e);return{pure:Dr.create,Apply0:function(){return t}}},EO=function(e){var t=pf(e),n=df(e);return{Applicative0:function(){return t},Bind1:function(){return n}}},TO=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0()),o=EO(e);return{tailRecM:function(h){return function(a){var r=function(l){if(l instanceof Dr&&l.value0 instanceof Pt)return r(h(l.value0.value0));if(l instanceof Dr&&l.value0 instanceof Nt)return new Dr(l.value0.value0);if(l instanceof Xr)return new Xr(t(l.value0)(function(u){return n(r(u))}));if(l instanceof Kr)return new Kr(l.value0,function(u){return r(l.value1(u))});if(l instanceof Qr)return new Qr(l.value0,function(u){return r(l.value1(u))});throw new Error("Failed pattern match at Pipes.Internal (line 163, column 10 - line 168, column 52): "+[l.constructor.name])};return r(h(a))}},Monad0:function(){return o}}};var MO=function(e){return function(t){return new Qr(t,Dr.create)}},FO=function(e){return function(t){return new Kr(t,Dr.create)}};var bS=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return function(o){return function(h){if(o instanceof Kr)return new Kr(o.value0,function(a){return bS(e)(o.value1(a))(h)});if(o instanceof Qr)return Ip(e)(o.value1)(h(o.value0));if(o instanceof Xr)return new Xr(t(o.value0)(function(a){return n(bS(e)(a)(h))}));if(o instanceof Dr)return new Dr(o.value0);throw new Error("Failed pattern match at Pipes.Core (line 222, column 21 - line 226, column 29): "+[o.constructor.name])}}},Ip=function(e){var t=z(e.Bind1().Apply0().Functor0());return function(n){return function(o){if(o instanceof Kr)return bS(e)(n(o.value0))(o.value1);if(o instanceof Qr)return new Qr(o.value0,function(h){return function(a){return Ip(e)(n)(a)}(o.value1(h))});if(o instanceof Xr)return new Xr(t(function(h){return Ip(e)(n)(h)})(o.value0));if(o instanceof Dr)return new Dr(o.value0);throw new Error("Failed pattern match at Pipes.Core (line 197, column 22 - line 201, column 29): "+[o.constructor.name])}}};var Iv=function(e){return MO(e)};var wS=function(e){var t=Ip(e);return function(n){return function(o){return t(me(n))(o)}}};var xO=function(e){return FO(e)(void 0)};var LO=Se(Er),OO=Te(yt),PO=nt(rt),p9=PO(yo),h9=he(_e),AO=pl(hl),Rv=Lv(Ya),IO=PO(df(Rv)),RO=Iv(Rv),$O=X(pf(Rv)),HO=mn(TO(Rv));var _9={eq:function(e){return function(t){return e===t}}},ES={compare:function(e){return function(t){return OO(e)(t)}},Eq0:function(){return _9}},m9={pageOrder:function(e){return function(t){return OO(e)(t)}},Ord0:function(){return ES}},v9=function(e){return{element:function(){var t=function(n){return Zt([Ln(Pd(Od)(et(1))(qa))])([Zn(LO(n)),Xw([aH("https://picsum.photos/"+LO(n)),Ln(p9(Ca(et(400)))(function(){return Ho(et(400))}))])])};return Yt({initialState:h9,render:t,eval:Xt(at)})}(),PageOrder0:function(){return m9},MonadAff1:function(){return e}}},kO=function(e){var t=X(e.MonadEffect0().Monad0().Applicative0()),n=v9(e);return{feedAbove:function(o){var h=function(a){var r=AO(a-1|0)(300);return IO(RO(r))(function(){return $O(new Pt(r))})};return t(HO(h)(o))},feedBelow:function(o){var h=function(a){var r=AO(a+1|0)(300);return IO(RO(r))(function(){return $O(new Pt(r))})};return t(HO(h)(o))},feedInsert:t(V.value),feedDelete:t(V.value),onElement:function(o){return t(void 0)},PageElement0:function(){return n},MonadAff1:function(){return e}}};var oa=function(){return window};function NO(e){return e.readyState}var Rp=function(){function e(){}return e.value=new e,e}(),b9=function(){function e(){}return e.value=new e,e}(),w9=function(){function e(){}return e.value=new e,e}();var BO=function(e){return e==="loading"?new W(Rp.value):e==="interactive"?new W(b9.value):e==="complete"?new W(w9.value):V.value};var E9=z(Pe);var UO=ne;var qO=ne;var VO=function(e){return E9(function(){var t=nr(Rp.value);return function(n){return t(BO(n))}}())(function(){return NO(e)})};function GO(e,t,n){var o=Object.prototype.toString.call(n);return o.indexOf("[object HTML")===0&&o.indexOf("Element]")===o.length-8?t(n):e}var JO=ne;var $p=function(e){return GO(V.value,W.create,e)};function TS(e){return function(){return e.hash}}function hf(e){return function(){return e.document}}function MS(e){return function(){return e.location}}var QO=ne;var XO=Z(Kt),gJ=Le(yn),xS=Cn(xr),yJ=ol(xr),YO=X(jr),DJ=Cn(Vr),CJ=X(rn),bJ=z(Pe),wJ=nt(rt),SJ=ir(zl),EJ=function(e){return XO(gJ(xS(yJ(function(){var t=MR(e);return function(n){return t(UO(n))}}())(hf))(oa)))(function(t){return YO(DJ($p)(t))})},LS=Vd(bn(vo)(me(CJ(void 0)))),TJ=wa(function(e){return function(){var n=xS(VO)(xS(hf)(oa))();if(n instanceof Rp){var o=bJ(QO)(oa)(),h=mp(function(a){return e(new Oe(void 0))})();return Fw(iS)(h)(!1)(o)(),gc(xw(iS)(h)(!1)(o))}return e(new Oe(void 0))(),KD}}),AS=wJ(Kt)(TJ)(function(){return XO(EJ("body"))(function(e){return Qe(SJ(ar("Could not find body")))(YO)(e)})});var IS=Mt(or),eP=Mt(zn);var MJ={value:function(e){return e}},tP=jt(MJ),Ov=IS("scroll"),Pv=tP(eP("overflow-y"));var nP=IS("auto"),Ic=tP(eP("overflow")),Hp=IS("hidden");var Op=function(e){return function(t){var n=e(t);return n.value1}};var aa=function(){function e(){this.head=null,this.last=null,this.size=0}function t(s,f){this.queue=s,this.value=f,this.next=null,this.prev=null}function n(s){this.draining=!1,this.error=null,this.value=s,this.takes=new e,this.reads=new e,this.puts=new e}var o={};function h(s){try{s()}catch(f){setTimeout(function(){throw f},0)}}function a(s,f){var p=new t(s,f);switch(s.size){case 0:s.head=p;break;case 1:p.prev=s.head,s.head.next=p,s.last=p;break;default:p.prev=s.last,s.last.next=p,s.last=p}return s.size++,p}function r(s){var f;switch(s.size){case 0:return null;case 1:f=s.head,s.head=null;break;case 2:f=s.last,s.head.next=null,s.last=null;break;default:f=s.last,s.last=f.prev,s.last.next=null}return f.prev=null,f.queue=null,s.size--,f.value}function l(s){var f;switch(s.size){case 0:return null;case 1:f=s.head,s.head=null;break;case 2:f=s.head,s.last.prev=null,s.head=s.last,s.last=null;break;default:f=s.head,s.head=f.next,s.head.prev=null}return f.next=null,f.queue=null,s.size--,f.value}function u(s){if(s.queue!==null){if(s.queue.last===s){r(s.queue);return}if(s.queue.head===s){l(s.queue);return}s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),s.queue.size--,s.queue=null,s.value=null,s.next=null,s.prev=null}}function i(s,f){if(!f.draining){var p=f.puts,d=f.takes,c=f.reads,_,m,v,y,C;for(f.draining=!0;;){if(_=null,m=null,v=null,y=f.value,C=c.size,f.error!==null){for(y=s.left(f.error);_=l(p);)h(_.cb(y));for(;m=l(c);)h(m(y));for(;v=l(d);)h(v(y));break}if(y===o&&(_=l(p))&&(f.value=y=_.value),y!==o){for(v=l(d);C--&&(m=l(c));)h(m(s.right(y)));v!==null&&(f.value=o,h(v(s.right(y))))}if(_!==null&&h(_.cb(s.right(void 0))),f.value===o&&p.size===0||f.value!==o&&d.size===0)break}f.draining=!1}}return n.EMPTY=o,n.putLast=a,n.takeLast=r,n.takeHead=l,n.deleteCell=u,n.drainVar=i,n}();function $S(){return new aa(aa.EMPTY)}function oP(e){return function(){return new aa(e)}}function aP(e,t,n,o){return function(){var h=aa.putLast(n.puts,{cb:o,value:t});return aa.drainVar(e,n),function(){aa.deleteCell(h)}}}function iP(e,t,n){return function(){var o=aa.putLast(t.takes,n);return aa.drainVar(e,t),function(){aa.deleteCell(o)}}}function uP(e,t){return function(){var n=t.value;return n===aa.EMPTY?e.nothing:(t.value=aa.EMPTY,aa.drainVar(e,t),e.just(n))}}var sP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lP=function(){function e(){}return e.value=new e,e}(),fP=oP;var HS=function(){return{left:We.create,right:Oe.create,nothing:V.value,just:W.create,killed:sP.create,filled:cP.create,empty:lP.value}}();var dP=function(e){return function(t){return function(n){return aP(HS,e,t,n)}}};var pP=function(e){return function(t){return iP(HS,e,t)}};var hP=function(e){return uP(HS,e)};var OS=Le(yn),_P=function(e){return OS(hP(e))};var PS=function(e){return wa(function(t){return function(){var o=pP(e)(t)();return gc(o)}})};var Pp=function(e){return function(t){return wa(function(n){return function(){var h=dP(e)(t)(n)();return gc(h)}})}},mP=function(e){return OS(fP(e))};var kS=OS($S);var kv=function(e){return e};var IJ=_p(vt);var gP=sn,Rc=function(e){return yc(IJ(e))};var yP=Vs;var RJ=function(e){return function(t){return[new ee(e,yc(t))]}},tu=function(e){return kv(RJ(e))},kp=In();var DP=e=>t=>()=>{let n=(o,h)=>{e(o)(h)()};return new IntersectionObserver(n,t)},BS=e=>t=>()=>{e.observe(t)};var CP=function(e){return function(t){return DP(e)(Rc(t))}};var bP=tu("root");var wP=e=>()=>{let t=(n,o)=>{e(n)(o)()};return new ResizeObserver(t)},WS=e=>t=>()=>{e.observe(t)};var SP=function(e){return wP(e)};var US=z(mt),NJ=ra()({reflectSymbol:function(){return"pageElement"}}),Np=nt(rt)(Bt),EP=gn(Ht),TP=X(Qt),nu=Z(Bt),BJ=Ao(Ht),WJ=An(Qt),qS=Io(Ht),MP=st($n),UJ=qr(dv),qJ=ut(Qt)($t),FP=y0(vt)(Vy),VJ=he(_e),VS=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zJ=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xP=function(){function e(){}return e.value=new e,e}(),LP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),AP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bp=function(e){return e.pageOrder},GJ=function(e){return e.element},JJ=function(){return pt.value}(),IP=function(e){var t=e.PageOrder0(),n=t.Ord0(),o=NJ(n),h=GJ(e),a=gd(n),r=Bp(t),l=$0(n.Eq0()),u=Le(xn(e.MonadAff1().MonadEffect0())),i=function(p){return Zt([oi("page"),Ln(Ic(nP))])(US(function(d){return o(JJ)(d)(h)(d)})(p.elements))},s=function(p){if(p instanceof VS)return Np(EP(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.elements=a(yd(r)(p.value0)(d.elements)),c}))(function(){return TP(new W(p.value1))});if(p instanceof zJ)return nu(BJ(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.elements=l(p.value0)(d.elements),c}))(function(d){return Np(WJ(tc(d.elements))(lr(new JS(d.id))))(function(){return TP(new W(p.value1))})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 89, column 5 - line 89, column 99): "+[p.constructor.name])},f=function(p){if(p instanceof xP){var d=function(v){return nu(qS(function(y){return y.parent}))(function(y){return nu(u(jn))(function(C){return Np(MP(Rn(C.emitter)))(function(){return nu(u(CP(function(S){return function(D){return Jn(C.listener)(new AP(S))}})(kp(bP)(y))))(function(S){return u(BS(S)(v))})})})})},c=function(v){return nu(u(jn))(function(y){return Np(MP(Rn(y.emitter)))(function(){return nu(u(SP(function(C){return function(S){return Jn(y.listener)(new LP(C))}})))(function(C){return u(WS(C)(v))})})})},_=function(v){return UJ(c(v))(d(v))};return nu(kr("page"))(qJ(_))}if(p instanceof LP)return nu(qS(function(v){return v.id}))(function(v){var y=FP(US(function(C){return C.contentRect.height})(p.value0));return lr(new zS({id:v,height:y}))});if(p instanceof AP){var m=FP(US(function(v){return v.intersectionRect.height})(p.value0));return nu(qS(function(v){return v.id}))(function(v){return Np(EP(function(y){var C={};for(var S in y)({}).hasOwnProperty.call(y,S)&&(C[S]=y[S]);return C.visibleHeight=m,C}))(function(){return lr(new GS({id:v,height:m}))})})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 98, column 5 - line 98, column 81): "+[p.constructor.name])};return Yt({initialState:VJ,render:i,eval:Xt({receive:at.receive,finalize:at.finalize,handleAction:f,handleQuery:s,initialize:new W(xP.value)})})};var jJ=ul(yt),KJ=Ei(yt),QJ=Z_(Jo),XJ=z(Bl),$c=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ys=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),YJ={append:function(e){return function(t){if(e instanceof ys)return new ys(e.value0);if(t instanceof ys)return new ys(t.value0);if(e instanceof $c&&t instanceof $c)return new $c(jJ(e.value0)(t.value0));if(e instanceof Hc&&t instanceof Hc)return new Hc(KJ(e.value0)(t.value0));if(e instanceof $c)return new ys(e.value0);if(e instanceof Hc)return new ys(e.value0);throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 19, column 1 - line 25, column 32): "+[e.constructor.name,t.constructor.name])}}},ZJ=function(){return{mempty:new $c(Fo(sl)),Semigroup0:function(){return YJ}}}(),ej=Kx(ZJ),$P=function(e){var t=Bp(e);return function(n){return function(o){var h=function(r){var l=new ee(Ai(r.elements),bl(r.elements));if(l.value0 instanceof W&&l.value1 instanceof W){var u=new ee(t(n)(l.value0.value0),t(n)(l.value1.value0));return u.value0 instanceof de?new $c(r.id):u.value1 instanceof se?new Hc(r.id):new ys(r.id)}return new Hc(r.id)},a=ej(QJ(kd(XJ(h)(o))));if(a instanceof $c||a instanceof Hc||a instanceof ys)return a.value0;throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 29, column 3 - line 32, column 18): "+[a.constructor.name])}}};var NP=nt(rt),Ds=NP(YD(Tr)),Cs=gn(Q_(Tr)),HP=Jr(yt),Nv=Qa(yt),Oc=X(zd(Tr)),OP=Re(fl(yu)),PP=z(Dt),nj=Yu(yt),rj=Ei(Si),oj=he(_e),aj=g0(Si)(Ui),ij=z(Bl),kP=Nl(Jo),_f=NP(cr),mf=An(gr),vf=ut(gr)($t),Bv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Uv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Gv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),uj={map:function(e){return function(t){if(t instanceof Bv)return new Bv(t.value0,e(t.value1));if(t instanceof Wv)return new Wv(t.value0,e(t.value1));if(t instanceof Uv)return new Uv(t.value0,e(t.value1));if(t instanceof qv)return new qv(t.value0,e(t.value1));if(t instanceof Vv)return new Vv(t.value0,e(t.value1));if(t instanceof zv)return new zv(t.value0,e(t.value1));if(t instanceof Gv)return new Gv(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 26, column 1 - line 33, column 68): "+[e.constructor.name,t.constructor.name])}}},sj=ta(uj)(bI(GF)),jS=function(e){return dt(new Gv(e,void 0))},cj=function(e){return dt(new Wv(e,void 0))},lj=function(e){return dt(new Bv(e,void 0))},fj=function(e){return dt(new Uv(e,void 0))},dj=function(e){return dt(new qv(e,void 0))},KS=function(e){var t=function(n){if(n instanceof Bv)return Ds(Cs(function(h){var a={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(a[r]=h[r]);return a.pages=HP(n.value0.key)(n.value0.value)(h.pages),a.preloaded=Nv(n.value0.key)(h.preloaded),a.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.scroll=new W(n.value0.value.pageHeight),l}(),a}))(function(){return Oc(n.value1)});if(n instanceof Wv)return Ds(Cs(function(h){var a={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(a[r]=h[r]);return a.pages=Nv(n.value0.key)(h.pages),a.preloaded=HP(n.value0.key)(n.value0.value)(h.preloaded),a.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.scroll=new W(-n.value0.value.pageHeight),l}(),a}))(function(){return Oc(n.value1)});if(n instanceof Uv)return Ds(Cs(function(h){var a={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(a[r]=h[r]);return a.update=function(){var l=OP(PP(function(p){return p.key})(h.update.topLoad))(new W(n.value0.key));if(l){var u={};for(var i in h.update)({}).hasOwnProperty.call(h.update,i)&&(u[i]=h.update[i]);return u.topLoad=V.value,u}var s={};for(var f in h.update)({}).hasOwnProperty.call(h.update,f)&&(s[f]=h.update[f]);return s.topLoad=new W(n.value0),s}(),a}))(function(){return Oc(n.value1)});if(n instanceof qv)return Ds(Cs(function(h){var a={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(a[r]=h[r]);return a.preloaded=Nv(n.value0.key)(h.preloaded),a.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.topLoad=V.value,l}(),a}))(function(){return Oc(n.value1)});if(n instanceof Vv)return Ds(Cs(function(h){var a={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(a[r]=h[r]);return a.update=function(){var l=OP(PP(function(p){return p.key})(h.update.bottomLoad))(new W(n.value0.key));if(l){var u={};for(var i in h.update)({}).hasOwnProperty.call(h.update,i)&&(u[i]=h.update[i]);return u.bottomLoad=V.value,u}var s={};for(var f in h.update)({}).hasOwnProperty.call(h.update,f)&&(s[f]=h.update[f]);return s.bottomLoad=new W(n.value0),s}(),a}))(function(){return Oc(n.value1)});if(n instanceof zv)return Ds(Cs(function(h){var a={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(a[r]=h[r]);return a.pages=Nv(n.value0.key)(h.pages),a.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.bottomLoad=V.value,l}(),a}))(function(){return Oc(n.value1)});if(n instanceof Gv){var o=function(h){if(h instanceof V)return V.value;if(h instanceof W)return new W(function(){var a={};for(var r in h.value0)({}).hasOwnProperty.call(h.value0,r)&&(a[r]=h.value0[r]);return a.visibleHeight=n.value0.height,a}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 104, column 11 - line 104, column 44): "+[h.constructor.name])};return Ds(Cs(function(h){var a={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(a[r]=h[r]);return a.pages=nj(o)(n.value0.id)(h.pages),a}))(function(){return Oc(n.value1)})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 63, column 5 - line 69, column 13): "+[n.constructor.name])};return Ds(Cs(function(n){var o={};for(var h in n)({}).hasOwnProperty.call(n,h)&&(o[h]=n[h]);return o.update=function(){var a={};for(var r in n.update)({}).hasOwnProperty.call(n.update,r)&&(a[r]=n.update[r]);return a.scroll=V.value,a}(),o}))(function(){return sj(t)(e)})},pj=function(e){return dt(new Vv(e,void 0))},hj=function(e){return dt(new zv(e,void 0))},BP=function(e){return function(t){var n=Qu(e.preloaded)>(e.feedParams.preloadedPages+e.feedParams.deadZone|0),o=Qu(e.preloaded)<(e.feedParams.preloadedPages-e.feedParams.deadZone|0),h=function(f){return f.value1.visibleHeight<rj(1)(Qe(0)(oj)(aj(ij(function(p){return p.visibleHeight})(e.pages))))},a=tr(h_(h)(il(kP(e.pages)))),r=a<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),l=a>(e.feedParams.hiddenPages+e.feedParams.deadZone|0),u=tr(h_(h)(kP(e.pages))),i=u<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),s=u>(e.feedParams.hiddenPages+e.feedParams.deadZone|0);return _f(jS(t))(function(){return _f(mf(e.feedParams.enableTop&&i)(vf(lj)(Xu(e.preloaded))))(function(){return _f(mf(e.feedParams.enableTop&&s)(vf(cj)(Ka(e.pages))))(function(){return _f(mf(e.feedParams.enableTop&&o)(vf(fj)(Ka(e.preloaded))))(function(){return _f(mf(e.feedParams.enableTop&&n)(vf(dj)(Ka(e.preloaded))))(function(){return _f(mf(r)(vf(pj)(Xu(e.pages))))(function(){return mf(l)(vf(hj)(Xu(e.pages)))})})})})})})}};var Cj=st($n);var bj=yr();var QS=function(){return function(e){var t=bj(e);return function(n){var o=t(n);return function(h){return function(a){return function(r){return Cj(o(h)(a)(r(void 0)))}}}}}};var Sj=nt(rt);var UP=function(e){var t=X(pf(e)),n=df(e),o=Z(n),h=xO(e),a=Sj(n),r=Iv(e),l=function(u){return u===0?t(void 0):o(h)(function(i){return a(r(i))(function(){return l(u-1|0)})})};return l};var Ej=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return function(o){return function(h){return function(a){return function(r){var l=function(u){return function(i){if(u instanceof Kr)return Ap(u.value0);if(u instanceof Qr)return l(u.value1(void 0))(o(i)(u.value0));if(u instanceof Xr)return t(u.value0)(function(s){return l(s)(i)});if(u instanceof Dr)return n(a(i));throw new Error("Failed pattern match at Pipes.Prelude (line 202, column 14 - line 206, column 39): "+[u.constructor.name])}};return l(r)(h)}}}}};var qP=function(e){var t=function(o){return function(h){return function(a){return o(function(r){return new Xe(h,r)}(a))}}},n=function(o){return o(Ye.value)};return Ej(e)(t)(he(_e))(n)};var on=Z(Bt),XS=An(Qt),Mj=qr(dv),yf=Io(Ht),ru=ut(Qt)($t),gf=Sn(Zs)(Qt),bs=X(Qt),ZS=nt(rt),Kv=wt(ef),eE=z(DS(Hr)),tE=Ii(Bn),nE=Lv(Ya),rE=qP(nE),oE=wS(nE),aE=UP(nE),Wp=z($n),Yr=ZS(Bt),iE=al(Vr),jP=$r(Ht),Ma=gn(Ht),YS=Jr(yt),KP=Qa(yt),VP=st($n),Fj=mn(Sp),xj=ZS(Kt),Lj=z(vp),Jv=Yu(yt),Aj=k_(yt),QP={reflectSymbol:function(){return"page"}},Ij=QS()(QP)(yt),Rj=Ao(Ht),$j=ut(rn)($t),Hj=ai()(QP)(yt),ko=ZS(yo),zP=z(mt),GP=Nl(Jo),Oj=jy(yt)(Yf),Pj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uE=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),XP=function(){function e(){}return e.value=new e,e}(),jv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xv=function(e){return e.onElement},kj=function(e){var t=Dn(ni(e.MonadAff1()));return function(n){var o=function(h){return on(t(_P(h)))(function(a){return XS(qs(a))(Mj(n)(t(Pp(void 0)(h))))})};return on(yf(function(h){return h.lock}))(function(h){return ru(o)(h)})}},Nj=function(e){var t=Le(xn(e.MonadAff1().MonadEffect0()));return function(n){if(n instanceof Pj)return on(kr("feed"))(function(o){return $e(gf)(o)(function(h){var a=function(r){return function(){var u=jl(h)();return np(u+r)(h)()}};return bs(n.value0(a))})});if(n instanceof uE)return on(kr("feed"))(function(o){return $e(gf)(o)(function(h){return t(function(){var r=jl(h)();return np(r+n.value0)(h)(),n.value1})})});if(n instanceof Qv)return on(kr("feed"))(function(o){return $e(gf)(o)(function(h){return t(function(){var r=jl(h)();return n.value0(r)})})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 90, column 1 - line 92, column 93): "+[n.constructor.name])}},Bj=function(e){return e.feedInsert};var YP=function(e){return e.feedBelow},Wj=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),o=Kv(n),h=YP(e),a=Dn(ni(t)),r=ut(n.Applicative0())(vt),l=Xv(e);return function(u){var i=on(yf(function(s){return s.feedParams.initialElement}))(function(s){return on(yf(function(f){return f.feedParams}))(function(f){return on(o(h(s)))(function(p){var d=eE(tE)(rE(oE(p)(aE(f.pageSize-1|0))));return Wp(Tn(s))(a(xv(d)))})})});return on(i)(function(s){return Yr(o(r(l)(s)))(function(){return bs({id:0,elements:s,parent:u,pageHeight:0,visibleHeight:0})})})}},Uj=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),o=Kv(n),h=YP(e),a=Dn(ni(t)),r=ut(n.Applicative0())(vt),l=Xv(e);return function(u){return function(i){var s=function(f){return on(yf(function(p){return p.feedParams}))(function(p){return on(o(h(f)))(function(d){var c=eE(tE)(rE(oE(d)(aE(p.pageSize))));return on(a(xv(c)))(function(_){return Yr(o(r(l)(_)))(function(){var m=tc(_);return bs(m?V.value:new W({id:i.id+1|0,elements:_,parent:u,pageHeight:0,visibleHeight:0}))})})})})};return Wp(iE)(gf(s)(bl(i.elements)))}}},qj=function(e){return e.feedAbove},ZP=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),o=Kv(n),h=qj(e),a=Dn(ni(t)),r=ut(n.Applicative0())(vt),l=Xv(e);return function(u){return function(i){var s=function(f){return on(yf(function(p){return p.feedParams}))(function(p){return on(o(h(f)))(function(d){var c=eE(tE)(rE(oE(d)(aE(p.pageSize))));return on(Wp(il)(a(xv(c))))(function(_){return Yr(o(r(l)(_)))(function(){var m=tc(_);return bs(m?V.value:new W({id:i.id-1|0,elements:_,parent:u,pageHeight:0,visibleHeight:0}))})})})})};return Wp(iE)(gf(s)(Ai(i.elements)))}}},Vj=function(e){var t=ZP(e);return function(n){return on(jP)(function(o){var h=Qu(o.preloaded)>o.feedParams.preloadedPages,a=Qu(o.preloaded)<o.feedParams.preloadedPages;return Yr(XS(a)(function(){var r=Qe(Ka(o.pages))(W.create)(Ka(o.preloaded));return on(Wp(iE)(gf(function(l){return t(n)(l.value)})(r)))(function(l){return ru(function(u){return Ma(function(i){var s={};for(var f in i)({}).hasOwnProperty.call(i,f)&&(s[f]=i[f]);return s.preloaded=YS(u.id)(u)(i.preloaded),s})})(l)})}()))(function(){return XS(h)(Ma(function(r){var l={};for(var u in r)({}).hasOwnProperty.call(r,u)&&(l[u]=r[u]);return l.preloaded=Qe(r.preloaded)(function(i){return KP(i.key)(r.preloaded)})(Ka(r.preloaded)),l}))})})}},ek=function(e){return{initialElement:e,pageSize:10,hiddenPages:6,preloadedPages:6,deadZone:2,debounce:333,enableTop:!1,preloadMillis:333.3}},tk=function(){return pt.value}(),zj=function(e){var t=Vj(e),n=Wj(e),o=e.MonadAff1(),h=Dn(ni(o)),a=o.MonadEffect0(),r=Kv(a.Monad0()),l=Bj(e),u=e.PageElement0().PageOrder0(),i=gd(u.Ord0()),s=Bp(u),f=Xv(e),p=$P(u),d=kj(e),c=Le(xn(a)),_=ZP(e),m=Uj(e);return function(v){if(v instanceof XP){var y=function(F){return function(E){return function(T){var M=T>=F.preloadedPages;return M?bs(new Nt(T)):Yr(t(E))(function(){return bs(new Pt(T+1|0))})}}},C=function(F){return on(n(F))(function(E){return Yr(Ma(function(T){var M={};for(var w in T)({}).hasOwnProperty.call(T,w)&&(M[w]=T[w]);return M.pages=hc(0)(E),M}))(function(){return on(yf(function(T){return T.feedParams}))(function(T){return Yr(VP(Fj(y(T)(F))(0)))(function(){return on(h(xj(GD(T.preloadMillis))(function(){return mP(void 0)})))(function(M){return Ma(function(w){var x={};for(var L in w)({}).hasOwnProperty.call(w,L)&&(x[L]=w[L]);return x.lock=new W(M),x})})})})})})};return Yr(on(kr("feed"))(ru(C)))(function(){return on(r(l))(function(F){return ru(function(E){return VP(Rn(Lj(JP.create)(E)))})(F)})})}if(v instanceof JP){var S=function(F){if(F instanceof V)return V.value;if(F instanceof W)return new W(function(){var E={};for(var T in F.value0)({}).hasOwnProperty.call(F.value0,T)&&(E[T]=F.value0[T]);return E.elements=i(yd(s)(v.value0)(F.value0.elements)),E}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 156, column 5 - line 156, column 33): "+[F.constructor.name])},D=function(F){return function(E){var T={};for(var M in E)({}).hasOwnProperty.call(E,M)&&(T[M]=E[M]);return T.pages=Jv(S)(F)(E.pages),T.preloaded=Jv(S)(F)(E.preloaded),T}};return on(jP)(function(F){return Yr(r(f(v.value0)))(function(){var E=p(v.value0)(Aj(F.preloaded)(F.pages));return Yr(Ma(D(E)))(function(){return Ij(tk)(E)(VS.create(v.value0))})})})}if(v instanceof jv&&v.value0 instanceof zS){var g=function(F){if(F instanceof V)return V.value;if(F instanceof W)return new W(function(){var E={};for(var T in F.value0)({}).hasOwnProperty.call(F.value0,T)&&(E[T]=F.value0[T]);return E.pageHeight=v.value0.value0.height,E}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 165, column 5 - line 165, column 32): "+[F.constructor.name])},b=function(F){var E={};for(var T in F)({}).hasOwnProperty.call(F,T)&&(E[T]=F[T]);return E.pages=Jv(g)(v.value0.value0.id)(F.pages),E.preloaded=Jv(g)(v.value0.value0.id)(F.preloaded),E};return Ma(b)}if(v instanceof jv&&v.value0 instanceof GS)return Yr(Ma(function(F){return Op(KS(jS(v.value0.value0)))(F)}))(function(){return d(on(kr("feed"))(function(F){return $e(ru)(F)(function(E){return on(c(jl(E)))(function(T){return on(Rj(function(M){return Op(KS(BP(M)(v.value0.value0)))(M)}))(function(M){return Yr(c($j(function(w){return np(T+w)(E)})(M.update.scroll)))(function(){return Yr(lr(M))(function(){return Yr(Ma(function(w){var x={};for(var L in w)({}).hasOwnProperty.call(w,L)&&(x[L]=w[L]);return x.update={topLoad:V.value,bottomLoad:V.value,scroll:V.value},x}))(function(){return Yr($e(ru)(M.update.topLoad)(function(w){return on(_(E)(w.value))(function(x){return ru(function(L){return Ma(function(R){var A={};for(var I in R)({}).hasOwnProperty.call(R,I)&&(A[I]=R[I]);return A.preloaded=YS(L.id)(L)(M.preloaded),A})})(x)})}))(function(){return Yr($e(ru)(M.update.bottomLoad)(function(w){return on(m(E)(w.value))(function(x){return ru(function(L){return Ma(function(R){var A={};for(var I in R)({}).hasOwnProperty.call(R,I)&&(A[I]=R[I]);return A.pages=YS(L.id)(L)(R.pages),A})})(x)})}))(function(){return h(GD(M.feedParams.debounce))})})})})})})})})}))});if(v instanceof jv&&v.value0 instanceof JS)return Ma(function(F){var E={};for(var T in F)({}).hasOwnProperty.call(F,T)&&(E[T]=F[T]);return E.pages=KP(v.value0.value0)(F.pages),E});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 120, column 1 - line 122, column 99): "+[v.constructor.name])}},Gj=function(e){var t=IP(e.PageElement0());return function(n){var o=function(u){return Hj(tk)(u.value0)(t)(u.value1)(jv.create)},h=Zt([oi("feed"),Ln(ko(gD(et(-50)))(function(){return ko(vD(et(50)))(function(){return ko(Ho(Ll(100)))(function(){return Pv(Ov)})})}))])(zP(o)(GP(n.pages))),a=Zt([Ln(ko(gD(et(-50)))(function(){return ko(vD(et(50)))(function(){return ko(Ho(Ll(100)))(function(){return ko(Ro(-1))(function(){return ko(hr(Ju))(function(){return Xo(Ll(-100))})})})})}))])([]),r=function(u){return Zt([Ln(ko(Ro(-2-Oj(u.value0)|0))(function(){return ko(R_(0))(function(){return hr(Ju)})}))])([o(u)])},l=Zt([Ln(ko(Ro(-2))(function(){return hr(Ju)}))])(zP(r)(GP(n.preloaded)));return Zt([Ln(ko(Ca(Ll(100)))(function(){return ko(Ho(Ll(100)))(function(){return Ic(Hp)})}))])([h,a,l])}},nk=function(e){return function(t){return Yt({initialState:function(n){return{feedParams:n,pages:mr,preloaded:mr,lock:V.value,update:{topLoad:V.value,bottomLoad:V.value,scroll:V.value}}},render:Gj(t),eval:Xt({receive:at.receive,finalize:at.finalize,handleAction:zj(t),handleQuery:Nj(t),initialize:new W(XP.value)})})}};var Yv={suspend:cI,fork:VD,join:Ud,Monad0:function(){return Ya},Functor1:function(){return _I}};var Zv=function(e){return e.fork};var ok=ne,Fa=ne,ak=function(e){var t=ut(e)($t);return function(n){return Fa(function(o){return t(n)(o.rendering)})}},jj=ne,ik=function(e){return function(t){return Fa(function(n){return jj(t(n.rendering))})}},Kj=ne,eg=function(e){return function(t){return e(t)}},uk=function(e){return function(t){return function(n){return function(o){return function(){var a=cn({})(),r=cn(is)(),l=cn(is)(),u=cn(n)(),i=cn(new W(Ye.value))(),s=cn(new W(Ye.value))(),f=cn(V.value)(),p=cn(1)(),d=cn(new W(mr))(),c=cn(mr)(),_={component:e,state:e.initialState(t),refs:mr,children:is,childrenIn:r,childrenOut:l,selfRef:a,handlerRef:u,pendingQueries:i,pendingOuts:s,pendingHandlers:f,rendering:V.value,fresh:p,subscriptions:d,forks:c,lifecycleHandlers:o};return qt(_)(a)(),Kj(a)}}}}};var Qj=ut(rn)($t),Xj=Cn(Vr),Yj=Zo(Vw),Hn=Z(Kt),en=Le(yn),Zj=nt(rt),xa=Zj(Kt),pk=ut(jr),eK=pk(Bn),hk=Zv(Yv),tK=ql(ns)(vc)(Bn),fi=X(jr),nK=z(Zb),sk=zi(ns),rK=z(Hr),ck=_c(ns),oK=z(Dt),aK=Jr(Vw),iK=W$(vc),uK=Qa(fv),sK=YM(Na),cK=Jr(fv),lk=pk($t),fk=Zo(fv),lK=Zo(zt),fK=UI(Gi),dK=Yu(zt),pK=function(e){return function(t){return function(){var o=Ke(t)(),h=Ke(o.subscriptions)();return Qj(av)(Xj(Yj(e))(h))()}}},tg=function(e){return function(t){return Hn(en(Ke(e)))(function(n){if(n instanceof V)return t;if(n instanceof W)return en(qt(new W(new Xe(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},ng=function(e){return function(t){return xa(en(qt({initializers:Ye.value,finalizers:Ye.value})(e)))(function(){return Hn(en(t))(function(n){return Hn(en(Ke(e)))(function(o){return xa(eK(hk)(o.finalizers))(function(){return xa(tK(o.initializers))(function(){return fi(n)})})})})})}},Pc=Vd(bn(vo)(me(X(rn)(void 0)))),dk=function(e){return function(t){return Hn(en(Ke(t)))(function(n){return en(e0(function(o){return{state:o+1|0,value:e(o)}})(n.fresh))})}},cE=function(e){return function(t){return function(n){return Hn(en(Ke(t)))(function(o){return ws(e)(t)(o.component.eval(new af(nK(W.create)(UR(n)),me(V.value))))})}}},ws=function(e){return function(t){return function(n){var o=function(a){return function(r){return Hn(en(Ke(a)))(function(l){return G$(function(u){var i=function(s){return sk(Hn(en(Ke(s)))(function(f){return Fa(function(p){return cE(e)(p.selfRef)(u.value1)})(f)}))};return rK(u.value2)(ck(u.value0(vc)(i)(l.children)))})(r)})}},h=function(a){return function(r){if(r instanceof gp)return Hn(en(Ke(a)))(function(l){var u=r.value0(l.state);if(Xl(l.state)(u.value1))return fi(u.value0);if(pn)return xa(en(qt({component:l.component,refs:l.refs,children:l.children,childrenIn:l.childrenIn,childrenOut:l.childrenOut,selfRef:l.selfRef,handlerRef:l.handlerRef,pendingQueries:l.pendingQueries,pendingOuts:l.pendingOuts,pendingHandlers:l.pendingHandlers,rendering:l.rendering,fresh:l.fresh,subscriptions:l.subscriptions,forks:l.forks,lifecycleHandlers:l.lifecycleHandlers,state:u.value1})(a)))(function(){return xa(ng(l.lifecycleHandlers)(e(l.lifecycleHandlers)(a)))(function(){return fi(u.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[u.constructor.name])});if(r instanceof yp)return Hn(dk(Y$)(a))(function(l){return Hn(en(X$(r.value0(l))(function(u){return Pc(lE(e)(a)(new Cc(u)))})))(function(u){return Hn(en(Ke(a)))(function(i){return xa(en(ro(oK(aK(l)(u)))(i.subscriptions)))(function(){return fi(r.value1(l))})})})});if(r instanceof Dp)return xa(en(pK(r.value0)(a)))(function(){return fi(r.value1)});if(r instanceof Tc)return r.value0;if(r instanceof Cp)return o(a)(r.value0);if(r instanceof bp)return Hn(en(Ke(a)))(function(l){return Hn(en(Ke(l.handlerRef)))(function(u){return xa(tg(l.pendingOuts)(u(r.value0)))(function(){return fi(r.value1)})})});if(r instanceof iv)return ck(iK(Bw(function(){var l=ws(e)(a);return function(u){return sk(l(u))}}())(r.value0)));if(r instanceof uv)return Hn(dk(Z$)(a))(function(l){return Hn(en(Ke(a)))(function(u){return Hn(en(cn(!1)))(function(i){return Hn(hk(Wd(en(function(){return ro(uK(l))(u.forks)(),qt(!0)(i)()}))(ws(e)(a)(r.value0))))(function(s){return xa(en(sK(Ke(i))(ro(cK(l)(s))(u.forks))))(function(){return fi(r.value1(l))})})})})});if(r instanceof sv)return Hn(en(Ke(a)))(function(l){return Hn(en(Ke(l.forks)))(function(u){return xa(lk(Ud)(fk(r.value0)(u)))(function(){return fi(r.value1)})})});if(r instanceof cv)return Hn(en(Ke(a)))(function(l){return Hn(en(Ke(l.forks)))(function(u){return xa(lk(qd(ar("Cancelled")))(fk(r.value0)(u)))(function(){return fi(r.value1)})})});if(r instanceof wp)return Hn(en(Ke(a)))(function(l){return fi(r.value1(lK(r.value0)(l.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[r.constructor.name])}};return fK(h(t))(n)}}},lE=function(e){return function(t){return function(n){if(n instanceof Vm)return en($e(ro)(t)(eg(function(o){return{component:o.component,state:o.state,children:o.children,childrenIn:o.childrenIn,childrenOut:o.childrenOut,selfRef:o.selfRef,handlerRef:o.handlerRef,pendingQueries:o.pendingQueries,pendingOuts:o.pendingOuts,pendingHandlers:o.pendingHandlers,rendering:o.rendering,fresh:o.fresh,subscriptions:o.subscriptions,forks:o.forks,lifecycleHandlers:o.lifecycleHandlers,refs:dK(me(n.value1))(n.value0)(o.refs)}})));if(n instanceof Cc)return Hn(en(Ke(t)))(function(o){return ws(e)(t)(o.component.eval(new of(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var _K=Z(xr),mK=nt(rt),Ck=r_(rn)($t),bk=ut(jr)(Bn),wk=Zv(Yv),qp=Cn(xr),Sk=ut(rn),Ek=Sk($t),_k=Sk(Ui),mk=mK(Kt),vK=ql(ns)(vc)(Bn),Up=Le(yn),vk=X(rn),fE=z(Pe),dE=X(jr),pE=An(rn),gK=ik(Pe),yK=st(Hr),gk=qm(rn),DK=ak(rn),CK=mn(Xh),bK=nl(Pe),hE=Z(Kt),wK=Le($l),yk=function(){return cn({initializers:Ye.value,finalizers:Ye.value})}(),Dk=function(e){return function(){var n=Ke(e)();return qt(V.value)(e)(),Ck(n)(function(){var o=bk(wk);return function(h){return Pc(o(Ji(h)))}}())()}},SK=function(e){return function(){return qp(Ek(_k(av)))(Ke(e.subscriptions))(),qt(V.value)(e.subscriptions)(),qp(_k(function(){var n=qd(ar("finalized"));return function(o){return Pc(n(o))}}()))(Ke(e.forks))(),qt(mr)(e.forks)()}},Tk=function(e){return function(t){return function(n){var o=function(s){return function(f){return Fa(function(p){var d=ws(r)(p.selfRef)(p.component.eval(new tf(void 0)));return ro(function(c){return{initializers:new Xe(mk(vK(Ji(c.initializers)))(function(){return mk(d)(function(){return Up(function(){return Dk(p.pendingQueries)(),Dk(p.pendingOuts)()})})}),f),finalizers:c.finalizers}})(s)})}},h=function(s){return function(f){return function(p){return Kw(function(d){return function(){var _=yk(),m=uk(d)(p)(f)(_)(),v=Ke(s)();return qt({initializers:Ye.value,finalizers:v.finalizers})(s)(),qp(Fa(function(){var y=r(s);return function(C){return y(function(S){return S.selfRef}(C))}}()))(Ke(m))(),qp(o(s)(v.initializers))(Ke(m))(),m}})}}},a=function(s){return function(f){return function(p){return function(d){return jw(function(c){return function(){var m=fE(c.pop)(Ke(p))(),v=function(){if(m instanceof W){qt(m.value0.value1)(p)();var C=Ke(m.value0.value0)();return Fa(function(S){return function(){return $e(qt)(S.handlerRef)(function(){var g=Qe(dE(void 0))(f);return function(b){return g(c.output(b))}}())(),Pc(ws(r)(S.selfRef)(S.component.eval(new rf(c.input,void 0))))()}})(C)(),m.value0.value0}if(m instanceof V)return h(s)(function(){var S=Qe(dE(void 0))(f);return function(D){return S(c.output(D))}}())(c.input)(c.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[m.constructor.name])}(),y=fE(function(C){return qs(c.get(C))})(Ke(d))();return pE(y)(Gd("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),ro(c.set(v))(d)(),_K(Ke(v))(gK(function(C){if(C instanceof V)return iD("Halogen internal error: child was not initialized in renderChild");if(C instanceof W)return vk(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},r=function(s){return function(f){return function(){var d=Ke(f)(),c=fE(wu)(Ke(d.pendingHandlers))();pE(c)(qt(new W(Ye.value))(d.pendingHandlers))(),qt(is)(d.childrenOut)(),qt(d.children)(d.childrenIn)();var _=function(){var S=tg(d.pendingHandlers),D=lE(r)(d.selfRef);return function(g){return S(yK(D(g)))}}(),m=function(){var S=tg(d.pendingQueries);return function(D){return S(_(Cc.create(D)))}}(),v=e.render(function(S){return Pc(_(S))})(a(s)(m)(d.childrenIn)(d.childrenOut))(d.component.render(d.state))(d.rendering)(),y=Ke(d.childrenOut)(),C=Ke(d.childrenIn)();return gk(C)(function(S){return function(){var g=Ke(S)();return DK(e.removeChild)(g)(),l(s)(g)()}})(),$e(ro)(d.selfRef)(eg(function(S){return{component:S.component,state:S.state,refs:S.refs,childrenIn:S.childrenIn,childrenOut:S.childrenOut,selfRef:S.selfRef,handlerRef:S.handlerRef,pendingQueries:S.pendingQueries,pendingOuts:S.pendingOuts,pendingHandlers:S.pendingHandlers,fresh:S.fresh,subscriptions:S.subscriptions,forks:S.forks,lifecycleHandlers:S.lifecycleHandlers,rendering:new W(v),children:y}}))(),pE(c)($e(CK)(void 0)(function(S){return function(){var g=Ke(d.pendingHandlers)();qt(new W(Ye.value))(d.pendingHandlers)(),Ek(function(){var E=bk(wk);return function(T){return Pc(E(Ji(T)))}}())(g)();var b=Ke(d.pendingHandlers)(),F=Qe(!1)(xI)(b);return F?bK(qt(V.value)(d.pendingHandlers))(new Nt(void 0))():new Pt(void 0)}}))()}}},l=function(s){return Fa(function(f){return function(){SK(f)();var d=ws(r)(f.selfRef)(f.component.eval(new nf(void 0)));return ro(function(c){return{initializers:c.initializers,finalizers:new Xe(d,c.finalizers)}})(s)(),gk(f.children)(function(c){return function(){var m=Ke(c)();return l(s)(m)()}})()}})},u=function(s){return function(f){return function(p){return hE(Up(Ke(s)))(function(d){return d?dE(V.value):cE(r)(f)(p)})}}},i=function(s){return function(f){return function(p){return ng(f)(function(){var c=Ke(s)();return c?void 0:(qt(!0)(s)(),l(f)(p)(),Fa(function(_){return function(){var v=wK(Ke(_.selfRef))();return Ck(v.rendering)(e.dispose)()}})(p)())})}}};return hE(Up(yk))(function(s){return hE(Up(cn(!1)))(function(f){return ng(s)(function(){var d=jn(),c=qp(Ke)(h(s)(function(){var _=Jn(d.listener);return function(m){return Up(_(m))}}())(n)(t))();return Fa(function(_){return vk({query:u(f)(_.selfRef),messages:d.emitter,dispose:i(f)(s)(c)})})(c)()})})})}}};var La=function(e){return function(t){return function(){return t[e]}}};var TK=La("baseURI"),MK=La("ownerDocument"),Mk=La("parentNode"),FK=La("parentElement");var xK=La("childNodes"),LK=La("firstChild"),AK=La("lastChild"),IK=La("previousSibling"),Fk=La("nextSibling"),RK=La("nodeValue");var $K=La("textContent");function _E(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function rg(e){return function(t){return function(){t.appendChild(e)}}}function mE(e){return function(t){return function(){t.removeChild(e)}}}var xk=z(Pe);var vE=function(){var e=xk(ln);return function(t){return e(Mk(t))}}();var Lk=function(){var e=xk(ln);return function(t){return e(Fk(t))}}();var gE=function(e,t,n){var o=0,h;return function(a){if(o===2)return h;if(o===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+a+")",t,a);return o=1,h=n(),o=2,h}},yE=st(Pe),NK=X(rn),BK=ut(rn)($t),WK=In(),UK=An(rn),qK=ha(ud(ud(pa))),VK=he(_e),zK=Z(Kt),GK=Le(yn),JK=z(Pe),jK=Cn(xr);var KK=function(e){return function(t){return function(n){return t instanceof W&&n instanceof W?yE(_E(e)(t.value0)(n.value0)):t instanceof V&&n instanceof W?yE(rg(e)(n.value0)):NK(void 0)}}},Ak=function(e){return function(){var n=vE(e.node)();return BK(function(o){return mE(e.node)(o)})(n)()}},QK=function(e){return function(t){return function(n){var o=ok(function(l){return l.node}),h=function(l){return l instanceof W?bo(l.value0):void 0},a=function(l){var u=tH(WK)(l),i=gE("patch","Halogen.VDom.Driver",function(){return function(_,m){if(_ instanceof W){if(m instanceof uf)return bo(_.value0),f(100)(m.value0);if(m instanceof hv){var v=Co(_.value0,m.value0);return Fn(new Mn(Pr(v),new W(v),i(103),h))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[m.constructor.name])}return s(104)(m)}}),s=gE("render","Halogen.VDom.Driver",function(){return function(_){if(_ instanceof uf)return f(86)(_.value0);if(_ instanceof hv){var m=u(_.value0);return Fn(new Mn(Pr(m),new W(m),i(89),h))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[_.constructor.name])}}),f=gE("renderComponentSlot","Halogen.VDom.Driver",function(){return function(_){var m=Ke(t)(),v=m(_)(),y=o(v);return Fn(new Mn(y,V.value,i(117),h))}}),p=i(91),d=s(82),c=f(109);return d},r=S$(e);return{buildWidget:a,buildAttributes:r,document:n}}}},XK=function(e){return function(t){var n=function(o){return function(h){return function(a){return function(r){if(r instanceof V)return function(){var u=cn(h)(),i=QK(o)(u)(e),s=hp(i)(a),f=Pr(s);return yE(rg(f)(JO(t)))(),{machine:s,node:f,renderChildRef:u}};if(r instanceof W)return function(){qt(h)(r.value0.renderChildRef)();var u=vE(r.value0.node)(),i=Lk(r.value0.node)(),s=Co(r.value0.machine,a),f=Pr(s);return UK(qK(Xl)(r.value0.node)(f))(KK(f)(i)(u))(),{machine:s,node:f,renderChildRef:r.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[r.constructor.name])}}}};return{render:n,renderChild:VK,removeChild:Ak,dispose:Ak}}},DE=function(e){return function(t){return function(n){return zK(GK(JK(qO)(jK(hf)(oa))))(function(o){return Tk(XK(o)(n))(e)(t)})}}};var YK=z(ji),ZK=z($n),eQ=gn(Q_(Tr)),tQ=qm(zd(Tr)),nQ=ai(),rQ=Um(),oQ=yr(),aQ=Bm(),CE=function(){function e(){}return e.value=new e,e}(),bE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rk=function(e){return e},Vp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),og=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ag=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var iQ={lift:function(e){return function(t){return Rk(dt(zp.create(t)))}}},$k=wt(iQ),uQ=Jl;var Df=function(e){return{liftEffect:function(){var t=$k(e.Monad0()),n=Le(e);return function(o){return t(n(o))}}(),Monad0:function(){return uQ}}},Hk=function(e){var t=e.MonadEffect0(),n=Df(t);return{liftAff:function(){var o=$k(t.Monad0()),h=Dn(e);return function(a){return o(h(a))}}(),MonadEffect0:function(){return n}}},Ok=ji,Pk=function(e){var t=z(e);return{map:function(n){return function(o){if(o instanceof Vp)return new Vp(YK(n)(o.value0));if(o instanceof zp)return new zp(t(n)(o.value0));if(o instanceof Gp)return new Gp(function(h){return n(o.value0(h))});if(o instanceof Jp)return new Jp(o.value0,n(o.value1));if(o instanceof jp)return new jp(o.value0,n(o.value1));if(o instanceof og)return new og(o.value0,n(o.value1));if(o instanceof Kp)return new Kp(ZK(n)(o.value0));if(o instanceof ag)return new ag(function(h){return n(o.value0(h))});if(o instanceof Qp)return new Qp(o.value0,n(o.value1));throw new Error("Failed pattern match at Halogen.XShell.Free (line 71, column 1 - line 80, column 60): "+[n.constructor.name,o.constructor.name])}}}},kc=cr,sQ=Z(kc),kk=Qd,Ss=gr,Wt=function(e){return Rk(dt(Vp.create(e)))},Nk=function(e){var t=function(n){return eQ(Tn(n.window))};return Op(tQ(e)(t))([])},Bk=function(e){return dt(new Jp(e,void 0))};var Wk=function(e){return dt(new Qp(e,void 0))},SE=function(){return function(e){var t=nQ(e),n=rQ(e);return function(o){var h=t(o),a=n(o);return function(){return function(r){return function(l){return function(u){return function(i){return function(s){var f=h(r)(l)(u)(i)(function(p){return wE.create(s(p))});return Wk(a(r)(l)({window:f}))}}}}}}}}},cQ=function(e){return dt(new Kp(e))},EE=function(){return function(e){var t=oQ(e);return function(n){var o=t(n);return function(){return function(h){return function(a){return function(r){return cQ(o(h)(a)(r))}}}}}}},di=function(e){return dt(new jp(e,void 0))},So=function(){return dt(new Gp(he(_e)))}(),Kn=function(e){return sQ(So)(function(t){return Bk(e(t))})},TE=function(){return function(e){var t=aQ(e);return function(n){var o=t(n);return function(){return function(h){return function(a){return Wk(function(r){return Qe(r)(hn)(o(h)(a)(r))})}}}}}};var dQ=Mt(zn),pQ=jt(Hu);var ME=pQ(dQ("background-color"));var Ut=Mt(or),Uk=function(){function e(){}return e.value=new e,e}(),_Q=function(){function e(){}return e.value=new e,e}(),qk=function(){function e(){}return e.value=new e,e}(),mQ=function(){function e(){}return e.value=new e,e}(),vQ=function(){function e(){}return e.value=new e,e}(),gQ=function(){function e(){}return e.value=new e,e}(),Vk=function(){function e(){}return e.value=new e,e}(),FE=function(){function e(){}return e.value=new e,e}(),yQ=function(){function e(){}return e.value=new e,e}(),DQ=function(){function e(){}return e.value=new e,e}(),CQ=function(){function e(){}return e.value=new e,e}(),bQ=function(){function e(){}return e.value=new e,e}(),wQ=function(){function e(){}return e.value=new e,e}(),SQ=function(){function e(){}return e.value=new e,e}(),EQ=function(){function e(){}return e.value=new e,e}(),TQ=function(){function e(){}return e.value=new e,e}(),MQ=function(){function e(){}return e.value=new e,e}(),FQ=function(){function e(){}return e.value=new e,e}(),xQ=function(){function e(){}return e.value=new e,e}(),LQ=function(){function e(){}return e.value=new e,e}(),AQ=function(){function e(){}return e.value=new e,e}(),IQ=function(){function e(){}return e.value=new e,e}(),RQ=function(){function e(){}return e.value=new e,e}(),$Q=function(){function e(){}return e.value=new e,e}(),HQ=function(){function e(){}return e.value=new e,e}(),OQ=function(){function e(){}return e.value=new e,e}(),PQ=function(){function e(){}return e.value=new e,e}(),kQ=function(){function e(){}return e.value=new e,e}(),NQ=function(){function e(){}return e.value=new e,e}(),BQ=function(){function e(){}return e.value=new e,e}(),WQ=function(){function e(){}return e.value=new e,e}(),UQ=function(){function e(){}return e.value=new e,e}(),qQ=function(){function e(){}return e.value=new e,e}();var VQ={value:function(e){if(e instanceof Uk)return Ut("default");if(e instanceof _Q)return Ut("help");if(e instanceof qk)return Ut("pointer");if(e instanceof mQ)return Ut("progress");if(e instanceof vQ)return Ut("wait");if(e instanceof gQ)return Ut("cell");if(e instanceof Vk)return Ut("crosshair");if(e instanceof FE)return Ut("text");if(e instanceof yQ)return Ut("vertical-text");if(e instanceof DQ)return Ut("alias");if(e instanceof CQ)return Ut("copy");if(e instanceof bQ)return Ut("move");if(e instanceof wQ)return Ut("no-drop");if(e instanceof SQ)return Ut("not-allowed");if(e instanceof EQ)return Ut("grab");if(e instanceof TQ)return Ut("grabbing");if(e instanceof MQ)return Ut("all-scroll");if(e instanceof FQ)return Ut("col-resize");if(e instanceof xQ)return Ut("row-resize");if(e instanceof LQ)return Ut("n-resize");if(e instanceof AQ)return Ut("e-resize");if(e instanceof IQ)return Ut("s-resize");if(e instanceof RQ)return Ut("w-resize");if(e instanceof $Q)return Ut("ne-resize");if(e instanceof HQ)return Ut("nw-resize");if(e instanceof OQ)return Ut("se-resize");if(e instanceof PQ)return Ut("sw-resize");if(e instanceof kQ)return Ut("ew-resize");if(e instanceof NQ)return Ut("ns-resize");if(e instanceof BQ)return Ut("nesw-resize");if(e instanceof WQ)return Ut("nwse-resize");if(e instanceof UQ)return Ut("zoom-in");if(e instanceof qQ)return Ut("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var xE=function(){return qk.value}();var LE=function(){return Uk.value}(),Nc=jt(VQ)(Mt(zn)("cursor")),zk=function(){return Vk.value}();var GQ=Mt(zn);var Gk=jt(Hu)(GQ("color"));var AE=Mt(or),jQ=Mt(zn);var KQ={value:function(e){return e}},Jk=AE("underline"),ug=jt(KQ)(jQ("text-decoration")),jk=AE("overline");var Kk=AE("line-through");var be=nt(rt)(yo),Qn=jt(Ou),Wn=Mt(zn),XQ=pD(Ou),YQ=De(Fl),ZQ=Mt(E_),eX=jt(cc),IE=function(){var e=ft(Vt)(Ct("xterm")),t=ft(Vt)(Ct("xterm-viewport")),n=be(Ft(ft(Vt)(Ct("xterm-underline-1")))(ug(Jk)))(function(){return be(Ft(ft(Vt)(Ct("xterm-underline-2")))(Qn(Wn("text-decoration"))("double underline")))(function(){return be(Ft(ft(Vt)(Ct("xterm-underline-3")))(Qn(Wn("text-decoration"))("wavy underline")))(function(){return be(Ft(ft(Vt)(Ct("xterm-underline-4")))(Qn(Wn("text-decoration"))("dotted underline")))(function(){return Ft(ft(Vt)(Ct("xterm-underline-5")))(Qn(Wn("text-decoration"))("dashed underline"))})})})}),o=ft(Vt)(Ct("xterm-scroll-area")),h=ft(Vt)(Ct("xterm-screen")),a=ft(Vt)(Ct("xterm-decoration-overview-ruler")),r=be(Ft(ft(Vt)(Ct("xterm-overline")))(ug(jk)))(function(){return be(Ft(ft(ft(Vt)(Ct("xterm-underline-1")))(Ct("xterm-overline")))(Qn(Wn("text-decoration"))("overline underline")))(function(){return be(Ft(ft(ft(Vt)(Ct("xterm-underline-2")))(Ct("xterm-overline")))(Qn(Wn("text-decoration"))("overline double underline")))(function(){return be(Ft(ft(ft(Vt)(Ct("xterm-underline-3")))(Ct("xterm-overline")))(Qn(Wn("text-decoration"))("overline wavy underline")))(function(){return be(Ft(ft(ft(Vt)(Ct("xterm-underline-4")))(Ct("xterm-overline")))(Qn(Wn("text-decoration"))("overline dotted underline")))(function(){return Ft(ft(ft(Vt)(Ct("xterm-underline-5")))(Ct("xterm-overline")))(Qn(Wn("text-decoration"))("overline dashed underline"))})})})})}),l=ft(Vt)(Ct("xterm-message")),u=ft(Vt)(Ct("live-region")),i=ft(Vt)(Ct("xterm-helper-textarea")),s=ft(Vt)(Ct("xterm-helpers")),f=ft(Vt)(Ct("xterm-dim")),p=ft(Vt)(Ct("xterm-decoration-top")),d=ft(Vt)(Ct("xterm-decoration-container")),c=ft(Vt)(Ct("xterm-decoration")),_=ft(Vt)(Ct("composition-view")),m=ft(Vt)(Ct("xterm-char-measure-element")),v=be(hr(Da))(function(){return be(Wi(et(0)))(function(){return be(Xo(et(0)))(function(){return be(yD(et(0)))(function(){return be(H_(et(0)))(function(){return be(Ro(10))(function(){return be(Qn(Wn("color"))("transparent"))(function(){return Qn(Wn("pointer-events"))("none")})})})})})})}),y=ft(Vt)(Ct("xterm-accessibility"));return be(Ft(e)(be(Nc(FE.value))(function(){return be(hr(Ju))(function(){return XQ(YQ(xd)(ZQ("user-select")))("none")})})))(function(){return be(Ft(ft(e)(Ct("focus")))(Qn(Wn("outline"))("none")))(function(){return be(Ft(ft(e)(QL("focus")))(Qn(Wn("outline"))("none")))(function(){return be(Ft(Gn(e)(s))(be(hr(Da))(function(){return be(Xo(et(0)))(function(){return Ro(5)})})))(function(){return be(Ft(Gn(e)(i))(be(O_(et(0))(et(0))(et(0))(et(0)))(function(){return be(eX(Wn("border"))(0))(function(){return be(wA(et(0))(et(0))(et(0))(et(0)))(function(){return be(hr(Da))(function(){return be(R_(0))(function(){return be(Wi(tD(-9999)))(function(){return be(Xo(et(0)))(function(){return be(Ca(et(0)))(function(){return be(Ho(et(0)))(function(){return be(Ro(-5))(function(){return be(Qn(Wn("whitespace"))("nowrap"))(function(){return be(Ic(Hp))(function(){return Qn(Wn("resize"))("none")})})})})})})})})})})})})))(function(){return be(Ft(Gn(e)(_))(be(ME(qa))(function(){return be(Gk(HL))(function(){return be($o(_A))(function(){return be(hr(Da))(function(){return be(Qn(Wn("white-space"))("nowrap"))(function(){return Ro(1)})})})})})))(function(){return be(Ft(Gn(e)(ft(_)(Ct("active"))))($o(mA)))(function(){return be(Ft(Gn(e)(t))(be(ME(qa))(function(){return be(Pv(Ov))(function(){return be(Nc(LE))(function(){return be(hr(Da))(function(){return be(H_(et(0)))(function(){return be(Wi(et(0)))(function(){return be(Xo(et(0)))(function(){return yD(et(0))})})})})})})})))(function(){return be(Ft(Gn(e)(h))(hr(Ju)))(function(){return be(Ft(Gn(e)(Gn(h)(F_("canvas"))))(be(hr(Da))(function(){return be(Wi(et(0)))(function(){return Xo(et(0))})})))(function(){return be(Ft(Gn(e)(o))(Qn(Wn("visibility"))("hidden")))(function(){return be(Ft(m)(be($o(hA))(function(){return be(Qn(Wn("visibility"))("hidden"))(function(){return be(hr(Da))(function(){return be(Xo(et(0)))(function(){return be(Wi(tD(-9999)))(function(){return Qn(Wn("line-height"))("normal")})})})})})))(function(){return be(Ft(ft(e)(Ct("enable-mouse-events")))(Nc(LE)))(function(){return be(Ft(ft(e)(Ct("xterm-cursor-pointer")))(Nc(xE)))(function(){return be(Ft(Gn(e)(ft(Vt)(Ct("xterm-cursor-pointer"))))(Nc(xE)))(function(){return be(Ft(ft(ft(e)(Ct("column-select")))(Ct("focus")))(Nc(zk)))(function(){return be(Ft(Gn(e)(y))(v))(function(){return be(Ft(Gn(e)(l))(v))(function(){return be(Ft(Gn(e)(u))(be(hr(Da))(function(){return be(Wi(et(-9999)))(function(){return be(Ca(et(1)))(function(){return be(Ho(et(1)))(function(){return Ic(Hp)})})})})))(function(){return be(Ft(f)(Qn(Wn("opacity"))("1 !important")))(function(){return be(n)(function(){return be(r)(function(){return be(Ft(ft(Vt)(Ct("xterm-strikethrough")))(ug(Kk)))(function(){return be(Ft(Gn(Gn(h)(d))(c))(be(Ro(6))(function(){return hr(Da)})))(function(){return be(Ft(Gn(Gn(h)(d))(ft(c)(Ct("xterm-decoration-top-layer"))))(Ro(7)))(function(){return be(Ft(a)(be(Ro(8))(function(){return be(hr(Da))(function(){return be(Xo(et(0)))(function(){return be(H_(et(0)))(function(){return Qn(Wn("pointer-events"))("none")})})})})))(function(){return Ft(p)(be(Ro(2))(function(){return hr(Ju)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var Qk=e=>()=>e.type,RE=e=>()=>e.cursorY,$E=e=>()=>e.cursorX,HE=e=>()=>e.viewportY,OE=e=>()=>e.baseY,PE=e=>()=>e.length,Xk=e=>t=>()=>e.getLine(t),kE=e=>()=>e.getNullCell();var Cf=function(e){return tp(e)?V.value:new W(hm(e))};var rX=z(Pe),oX=function(){function e(){}return e.value=new e,e}(),aX=function(){function e(){}return e.value=new e,e}(),Yk=function(e){return function(t){return rX(Cf)(Xk(e)(t))}},Zk=function(e){return function(){var n=Qk(e)();return n==="normal"?oX.value:aX.value}};var BE=e=>()=>e.isWrapped,WE=e=>()=>e.length;var dg=he(_e),pi=z(Pe),UE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),VE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),GE=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),JE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cX={map:function(e){return function(t){if(t instanceof UE)return new UE(function(n){return e(t.value0(n))});if(t instanceof sg)return new sg(function(n){return e(t.value0(n))});if(t instanceof qE)return new qE(function(n){return e(t.value0(n))});if(t instanceof VE)return new VE(function(n){return e(t.value0(n))});if(t instanceof zE)return new zE(function(n){return e(t.value0(n))});if(t instanceof cg)return new cg(function(n){return e(t.value0(n))});if(t instanceof lg)return new lg(t.value0,function(n){return e(t.value1(n))});if(t instanceof GE)return new GE(t.value0,function(n){return e(t.value1(n))});if(t instanceof fg)return new fg(t.value0,function(n){return e(t.value1(n))});if(t instanceof JE)return new JE(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},lX=ta(cX);var e2=function(e){var t=e.Monad0(),n=Z(qi(t.Bind1())),o=Rr(es(t)),h=Le(Xa(e));return function(a){var r=function(l){if(l instanceof UE)return n(o)(function(u){return h(pi(l.value0)(Zk(u)))});if(l instanceof sg)return n(o)(function(u){return h(pi(l.value0)($E(u)))});if(l instanceof qE)return n(o)(function(u){return h(pi(l.value0)(RE(u)))});if(l instanceof VE)return n(o)(function(u){return h(pi(l.value0)(HE(u)))});if(l instanceof zE)return n(o)(function(u){return h(pi(l.value0)(OE(u)))});if(l instanceof cg)return n(o)(function(u){return h(pi(l.value0)(PE(u)))});if(l instanceof lg)return n(o)(function(u){return h(pi(l.value1)(Yk(u)(l.value0)))});if(l instanceof GE)return h(pi(l.value1)(BE(l.value0)));if(l instanceof fg)return h(pi(l.value1)(WE(l.value0)));if(l instanceof JE)return n(o)(function(u){return h(pi(l.value0)(kE(u)))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 19, column 5 - line 21, column 40): "+[l.constructor.name])};return lX(ts(a))(r)}},jE=function(e){return dt(new fg(e,dg))};var KE=function(e){return dt(new lg(e,dg))};var QE=function(){return dt(new sg(dg))}();var XE=function(){return dt(new cg(dg))}();var YE=e=>()=>e.cursorBlink,ZE=e=>t=>()=>e.cursorBlink=t,eT=e=>()=>e.fontFamily,tT=e=>t=>()=>e.fontFamily=t;var n2=tu("fontFamily");var r2=tu("cursorBlink");var a2=z(Pe),vX=nt(rt),i2=he(_e),pg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_g=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nT=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),gX={map:function(e){return function(t){if(t instanceof pg)return new pg(function(n){return e(t.value0(n))});if(t instanceof hg)return new hg(t.value0,e(t.value1));if(t instanceof _g)return new _g(function(n){return e(t.value0(n))});if(t instanceof nT)return new nT(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},yX=ta(gX);var hi=function(e){return dt(new hg(e,void 0))},u2=function(e){var t=e.Monad0(),n=qi(t.Bind1()),o=Z(n),h=Rr(es(t)),a=Le(Xa(e)),r=vX(n),l=X(Bd(t.Applicative0()));return function(u){var i=function(s){if(s instanceof pg)return o(h)(function(f){return a(a2(s.value0)(YE(f)))});if(s instanceof hg)return o(h)(function(f){return r(a(ZE(f)(s.value0)))(function(){return l(s.value1)})});if(s instanceof _g)return o(h)(function(f){return a(a2(s.value0)(eT(f)))});if(s instanceof nT)return o(h)(function(f){return r(a(tT(f)(s.value0)))(function(){return l(s.value1)})});throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 19, column 5 - line 21, column 49): "+[s.constructor.name])};return yX(ts(u))(i)}},rT=function(){return dt(new _g(i2))}(),oT=function(){return dt(new pg(i2))}();var c2=Di(s2(),1),vg=()=>new c2.FitAddon;var f2=Di(l2(),1),yg=()=>new f2.WebglAddon;var p2=Di(d2(),1),Cg=()=>new p2.WebLinksAddon;var h2={addon:ne},_2={addon:ne},m2={addon:he(_e)};var bg=function(e){return e.addon};var cT=e=>e.active,lT=e=>e.normal,fT=e=>e.alternate;var D2=Di(y2(),1),C2=e=>t=>()=>new D2.Terminal(e,t),b2=e=>()=>e.element,w2=e=>()=>e.textarea,pT=e=>()=>e.rows,hT=e=>()=>e.cols,Xp=e=>e.buffer,_T=e=>()=>e.markers;var mT=e=>e.options,vT=e=>t=>()=>e.onBell(t),gT=e=>t=>()=>e.onBinary(n=>t(n)());var yT=e=>t=>()=>e.onData(n=>t(n)()),DT=e=>t=>()=>e.onKey(n=>t(n)()),CT=e=>t=>()=>e.onLineFeed(t),bT=e=>t=>()=>e.onRender(n=>t(n)()),wT=e=>t=>()=>e.onWriteParsed(t),ST=e=>t=>()=>e.onResize(n=>t(n)()),ET=e=>t=>()=>e.onScroll(n=>t(n)()),TT=e=>t=>()=>e.onSelectionChange(t),MT=e=>t=>()=>e.onTitleChange(n=>t(n)());var FT=e=>t=>()=>e.open(t);var xT=e=>t=>n=>()=>e.write(t,n),LT=e=>t=>n=>()=>e.writeln(t,n);var S2=e=>t=>()=>e.loadAddon(t);var E2=z(Pe);var T2=function(){var e=E2(Cf);return function(t){return e(w2(t))}}();var M2=function(e){return function(t){return C2(Rc(e))(Rc(t))}},F2=function(e){var t=bg(e);return function(n){return function(o){return S2(n)(t(o))}}};var x2=function(){var e=E2(Cf);return function(t){return e(b2(t))}}();var Sg=z(ji),Hg=he(_e),ou=z(Pe),IT=e2($l)(Xh),L2=nt(rt),Eg=Id(ZL),$X=F2(m2),Tg=Z(cr),RT=L2(cr),bf=An(gr),Mg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$T=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),HT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),OT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),PT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),NT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ag=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),BT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ig=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$g=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HX={map:function(e){return function(t){if(t instanceof Mg)return new Mg(Sg(e)(t.value0));if(t instanceof $T)return new $T(function(n){return e(t.value0(n))});if(t instanceof HT)return new HT(function(n){return e(t.value0(n))});if(t instanceof Fg)return new Fg(function(n){return e(t.value0(n))});if(t instanceof OT)return new OT(function(n){return e(t.value0(n))});if(t instanceof xg)return new xg(Sg(e)(t.value0));if(t instanceof PT)return new PT(Sg(e)(t.value0));if(t instanceof kT)return new kT(Sg(e)(t.value0));if(t instanceof NT)return new NT(function(n){return e(t.value0(n))});if(t instanceof Lg)return new Lg(t.value0,e(t.value1));if(t instanceof Ag)return new Ag(t.value0,e(t.value1));if(t instanceof BT)return new BT(function(n){return e(t.value0(n))});if(t instanceof Ig)return new Ig(function(n){return e(t.value0(n))});if(t instanceof Rg)return new Rg(function(n){return e(t.value0(n))});if(t instanceof $g)return new $g(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},OX=ta(HX),Xn=function(e){return dt(new Ag(e,void 0))},dn=function(e){return dt(new Lg(e,void 0))};var Og=function(e){return dt(new xg(e))},A2=function(){return dt(new Ig(Hg))}(),I2=function(){return dt(new Rg(Hg))}();var R2=function(e){var t=e.MonadEffect0(),n=t.Monad0(),o=qi(n.Bind1()),h=Z(o),a=Rr(es(n)),r=Xa(t),l=u2(r),u=Le(r),i=Dn(Y_(e)),s=L2(o);return function(f){var p=ts(f),d=l(p),c=function(_){if(_ instanceof Mg)return h(a)(function(m){return Sa(d(_.value0))(mT(m))});if(_ instanceof $T)return h(a)(function(m){return u(ou(_.value0)(x2(m)))});if(_ instanceof HT)return h(a)(function(m){return u(ou(_.value0)(T2(m)))});if(_ instanceof Fg)return h(a)(function(m){return u(ou(_.value0)(pT(m)))});if(_ instanceof OT)return h(a)(function(m){return u(ou(_.value0)(hT(m)))});if(_ instanceof xg)return h(a)(function(m){return u(Sa(IT(_.value0))(cT(Xp(m))))});if(_ instanceof PT)return h(a)(function(m){return u(Sa(IT(_.value0))(lT(Xp(m))))});if(_ instanceof kT)return h(a)(function(m){return u(Sa(IT(_.value0))(fT(Xp(m))))});if(_ instanceof NT)return h(a)(function(m){return u(ou(_.value0)(_T(m)))});if(_ instanceof Lg)return h(a)(function(m){return h(i(kS))(function(v){return s(u(xT(m)(_.value0)(zD(Pp(_.value1)(v)))))(function(){return i(PS(v))})})});if(_ instanceof Ag)return h(a)(function(m){return h(i(kS))(function(v){return s(u(LT(m)(_.value0)(zD(Pp(_.value1)(v)))))(function(){return i(PS(v))})})});if(_ instanceof BT)return u(ou(function(m){return _.value0(Jh(m))})(Eg(vg)));if(_ instanceof Ig)return u(ou(function(m){return _.value0(Jh(m))})(Eg(Cg)));if(_ instanceof Rg)return u(ou(function(m){return _.value0(Jh(m))})(Eg(yg)));if(_ instanceof $g)return h(a)(function(m){return u(ou(function(v){return _.value1($F(v))})(Eg($X(m)(_.value0))))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 32, column 5 - line 34, column 55): "+[_.constructor.name])};return OX(p)(c)}},Pg=function(){return dt(new Fg(Hg))}(),ia=function(e){return dt(Mg.create(e))};var WT=function(e){var t=bg(e);return function(n){return dt(new $g(t(n),Hg))}},PX=WT(_2),kX=WT(h2),UT=function(e){return Tg(I2)(function(t){return RT(function(){if(t instanceof V)return bf(e)(Xn("WebGL Addon unavailable"));if(t instanceof W)return RT(bf(e)(dn("Loading WebGL ")))(function(){return Tg(PX(t.value0))(function(n){return bf(e)(function(){return Xn(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return Tg(A2)(function(n){if(n instanceof V)return bf(e)(Xn("WebLinks Addon unavailable"));if(n instanceof W)return RT(bf(e)(dn("Loading WebLinks ")))(function(){return Tg(kX(n.value0))(function(o){return bf(e)(function(){return Xn(o?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var $2=e=>()=>e.dispose();var H2={toDisposable:he(_e)},BX=function(e){return e.toDisposable},O2=function(e){return{dispose:function(){var t=BX(e);return function(n){return $2(t(n))}}()}},P2=function(e){return e.dispose};var xt=Z(Bt),qT=$r(Ht),UX=z(Hr),qX=R2(rs)(Gi),Aa=gn(Ht),Ia=nt(rt)(Bt),VX=ut(rn)(vt),zX=P2(O2(H2)),VT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JX=function(){function e(){}return e.value=new e,e}(),jX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zT=function(){function e(){}return e.value=new e,e}(),KX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),QX=function(){function e(){}return e.value=new e,e}(),XX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),YX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZX=function(){function e(){}return e.value=new e,e}(),eY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),k2=function(){function e(){}return e.value=new e,e}(),N2=function(){function e(){}return e.value=new e,e}(),ua=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tY=function(e){return function(t){return fr([oO(IE),Zt([oi("terminal")])([])])}},nY=function(e){var t=Dn(ni(e));return function(n){return xt(qT)(function(o){return t(UX(W.create)(Sa(qX(n))(o.terminal)))})}},rY=function(e){var t=Le(xn(e.MonadEffect0())),n=function(d){return xt(t(jn))(function(c){return xt(t(wT(d)(Jn(c.listener)(new ua(QX.value)))))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})},o=function(d){return xt(t(jn))(function(c){return xt(t(MT(d)(function(){var _=Jn(c.listener);return function(m){return _(ua.create(eY.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})},h=function(d){return xt(t(jn))(function(c){return xt(t(TT(d)(Jn(c.listener)(new ua(ZX.value)))))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})},a=function(d){return xt(t(jn))(function(c){return xt(t(ET(d)(function(){var _=Jn(c.listener);return function(m){return _(ua.create(YX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})},r=function(d){return xt(t(jn))(function(c){return xt(t(ST(d)(function(){var _=Jn(c.listener);return function(m){return _(ua.create(XX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})},l=function(d){return xt(t(jn))(function(c){return xt(t(bT(d)(function(){var _=Jn(c.listener);return function(m){return _(ua.create(KX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})},u=function(d){return xt(t(jn))(function(c){return xt(t(CT(d)(Jn(c.listener)(new ua(zT.value)))))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})},i=function(d){return xt(t(jn))(function(c){return xt(t(DT(d)(function(){var _=Jn(c.listener);return function(m){return _(ua.create(jX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})},s=function(d){return xt(t(jn))(function(c){return xt(t(yT(d)(function(){var _=Jn(c.listener);return function(m){return _(ua.create(VT.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})},f=function(d){return xt(t(jn))(function(c){return xt(t(gT(d)(function(){var _=Jn(c.listener);return function(m){return _(ua.create(GX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})},p=function(d){return xt(t(jn))(function(c){return xt(t(vT(d)(Jn(c.listener)(new ua(JX.value)))))(function(_){return xt(Rn(c.emitter))(function(){return Aa(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=Tn(_)(m.disposables),v})})})})};return function(d){if(d instanceof k2)return xt(kr("terminal"))(function(c){if(c instanceof V)return t(Za("no terminal element"));if(c instanceof W)return xt(qT)(function(_){return Ia(t(FT(_.terminal)(c.value0)))(function(){return Ia(p(_.terminal))(function(){return Ia(f(_.terminal))(function(){return Ia(i(_.terminal))(function(){return Ia(u(_.terminal))(function(){return Ia(l(_.terminal))(function(){return Ia(n(_.terminal))(function(){return Ia(r(_.terminal))(function(){return Ia(a(_.terminal))(function(){return Ia(h(_.terminal))(function(){return Ia(o(_.terminal))(function(){return s(_.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.XTerm (line 117, column 5 - line 132, column 28): "+[c.constructor.name])});if(d instanceof N2)return xt(qT)(function(c){return t(VX(zX)(c.disposables))});if(d instanceof ua)return lr(d.value0);throw new Error("Failed pattern match at Halogen.XTerm (line 114, column 16 - line 136, column 23): "+[d.constructor.name])}},B2=function(e){return Yt({initialState:function(t){return{terminal:t,disposables:[]}},render:tY(e),eval:Xt({receive:at.receive,handleAction:rY(e),handleQuery:nY(e),initialize:new W(k2.value),finalize:new W(N2.value)})})};var oY=De(sn),z2={reflectSymbol:function(){return"terminal"}},aY=ai()(z2)(Jt),G2=PD(Mc),GT=Z(G2),JT=wt(q_)(Mc),iY=yr()(z2)(Jt),uY=X(Qt),U2=z($n),sY=wt(ef),J2=$r(Ht),wf=X(ND(Mc)),Ng=nt(rt)(G2),j2=QA(Ht),jT=gn(j2),cY=$r(j2),lY=KA(Sp),q2=Z(Bt),fY=De(gP),dY=ct(yP),pY=gn(Ht),V2=st($n),hY=X(Ss),K2=function(){return pt.value}(),_Y=function(e){var t=B2(e);return function(n){return fr(oY([function(){if(n.terminal instanceof V)return fr([]);if(n.terminal instanceof W)return aY(K2)(void 0)(t)(n.terminal.value0)(bE.create);throw new Error("Failed pattern match at Halogen.XShell (line 49, column 8 - line 51, column 80): "+[n.terminal.constructor.name])}()])(Nk(n.windows)))}},Q2=function(e){var t=e.MonadEffect0().Monad0(),n=sY(t),o=ta(Pk(t.Bind1().Apply0().Functor0()))(lY);return function(h){var a=function(r){if(r instanceof Vp)return GT(JT(iY(K2)(void 0)(r.value0)))(function(l){return uY(l)});if(r instanceof zp)return U2(W.create)(n(r.value0));if(r instanceof Gp)return GT(JT(J2))(function(l){return wf(r.value0(l.shell))});if(r instanceof Jp)return Ng(jT(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.shell=r.value0,u}))(function(){return wf(r.value1)});if(r instanceof jp)return Ng(jT(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.interpreter=r.value0,u}))(function(){return wf(r.value1)});if(r instanceof og)return Ng(JT(lr(r.value0)))(function(){return wf(r.value1)});if(r instanceof Kp)return U2(W.create)(r.value0);if(r instanceof ag)return GT(cY)(function(l){return wf(r.value0(l.windows))});if(r instanceof Qp)return Ng(jT(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.windows=r.value0(l.windows),u}))(function(){return wf(r.value1)});throw new Error("Failed pattern match at Halogen.XShell (line 80, column 5 - line 82, column 22): "+[r.constructor.name])};return jA(o(a)(h))}},mY=function(e){var t=Le(xn(e.MonadEffect0())),n=Q2(e);return function(o){if(o instanceof CE)return q2(t(M2(fY(kp(n2)('"Cascadia Code", Menlo, monospace'))(kp(r2)(!0)))(dY)))(function(h){return pY(function(a){var r={};for(var l in a)({}).hasOwnProperty.call(a,l)&&(r[l]=a[l]);return r.terminal=new W(h),r})});if(o instanceof bE)return q2(J2)(function(h){return V2(n(h.interpreter(o.value0)))});if(o instanceof wE)return V2(n(o.value0));throw new Error("Failed pattern match at Halogen.XShell (line 61, column 16 - line 70, column 35): "+[o.constructor.name])}},Bg=function(e){return Yt({initialState:function(t){return{shell:t,interpreter:me(hY(void 0)),terminal:V.value,windows:is}},render:_Y(e),eval:Xt({receive:at.receive,finalize:at.finalize,handleAction:mY(e),handleQuery:Q2(e),initialize:new W(CE.value)})})};var au=Z(Bt),vY=Ao(Ht),Sf=st($n),tN=yr(),nN={reflectSymbol:function(){return"shell"}},Yp=tN(nN)(Jt),KT=Io(Ht),rN=nt(rt),Ef=rN(Bt),QT=gn(Ht),oN={reflectSymbol:function(){return"feed"}},XT=tN(oN)(Zf),Y2=he(_e),Z2=ut(Qt)($t),YT=Se(Sr),gY=An(Qt),yY=Se(cl(Er)),DY=Ii(hO),CY=Se(Gh(Sr)),Zp=rN(yo),bY=ai()(oN)(Zf),wY=nk(ES)(kO(rs)),SY=ra()(nN)(Jt),EY=Bg(rs),ZT=Fc(A$);var aN=function(){function e(){}return e.value=new e,e}(),e1=function(){function e(){}return e.value=new e,e}(),iN=function(){function e(){}return e.value=new e,e}(),eN=function(){function e(){}return e.value=new e,e}(),uN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),eh=function(e){return Wt(Xn(e))},Tf=function(){return pt.value}(),Wg=function(){return pt.value}(),sN=function(e){var t=Le(xn(e));return function(n){if(n instanceof aN)return au(vY(function(o){var h={};for(var a in o)({}).hasOwnProperty.call(o,a)&&(h[a]=o[a]);return h.top=!o.top,h}))(function(o){var h=function(){return o.top?"top loading/unloading enabled":"top loading/unloading disabled"}();return Sf(Yp(Tf)(void 0)(eh(h)))});if(n instanceof e1)return au(KT(function(o){return o.log}))(function(o){if(o instanceof W)return Ef(QT(function(h){var a={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(a[r]=h[r]);return a.log=V.value,a}))(function(){return Ef(lv(o.value0.value0))(function(){return t(yO(o.value0.value1))})});if(o instanceof V)return au(t(jn))(function(h){return au(t(gO(200)(Jn(h.listener)(eN.value))))(function(a){return au(Rn(h.emitter))(function(r){return QT(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.log=new W(new ee(r,a)),u})})})});throw new Error("Failed pattern match at Examples.Halogen.Infinite.Scroll.Main (line 88, column 10 - line 97, column 60): "+[o.constructor.name])});if(n instanceof iN)return QT(function(o){var h={};for(var a in o)({}).hasOwnProperty.call(o,a)&&(h[a]=o[a]);return h.up=!o.up,h});if(n instanceof eN)return au(KT(function(o){return o.top}))(function(o){return au(XT(Wg)(o)(new Qv(Y2)))(function(h){return au(KT(function(a){return a.up}))(function(a){return $e(Z2)(h)(function(r){var l=function(){return a?-99:99}();return Ef(Sf(XT(Wg)(o)(new uE(l,void 0))))(function(){return au(XT(Wg)(o)(new Qv(Y2)))(function(u){return $e(Z2)(u)(function(i){return Ef(Sf(Yp(Tf)(void 0)(eh("scroll: "+(YT(r)+("+="+YT(l)))))))(function(){return gY(i!==r+l)(Ef(Sf(Yp(Tf)(void 0)(eh("scroll offset error"+YT(i)))))(function(){return sN(e)(e1.value)}))})})})})})})})});if(n instanceof uN)return Ef(Sf(Yp(Tf)(void 0)(eh("pages: "+yY(DY(_O(n.value0.pages)))))))(function(){return Sf(Yp(Tf)(void 0)(eh("adjust: "+CY(n.value0.update.scroll))))});throw new Error("Failed pattern match at Examples.Halogen.Infinite.Scroll.Main (line 81, column 3 - line 114, column 84): "+[n.constructor.name])}},TY=function(e){return Zt([Ln(Zp($o(Ni))(function(){return Bi(ju)}))])([Zt([Ln(Zp(Xo(et(10)))(function(){return Zp(Wi(et(10)))(function(){return Zp(Ca(et(400)))(function(){return Zp(Ho(et(1200)))(function(){return pA(qa)})})})}))])([bY(Wg)(e.top)(wY)(function(){var t=ek(150);return{initialElement:t.initialElement,pageSize:t.pageSize,hiddenPages:t.hiddenPages,preloadedPages:t.preloadedPages,preloadMillis:t.preloadMillis,enableTop:e.top,debounce:0,deadZone:1}}())(uN.create)]),fr([SY(Tf)(void 0)(EY)(void 0),fr([Tp([ZT("type")(Ql.value),lf(me(aN.value))]),Zn("enable top loading/unloading")]),fr([Tp([ZT("type")(Ql.value),lf(me(e1.value))]),Zn("enable automatic scrolling")]),fr([Tp([ZT("type")(Ql.value),lf(me(iN.value))]),Zn("auto scroll up")])])])},cN=function(){return Yt({initialState:me({top:!1,up:!1,log:V.value}),render:TY,eval:Xt({handleQuery:at.handleQuery,receive:at.receive,initialize:at.initialize,finalize:at.finalize,handleAction:sN(yn)})})}();var FY={dimap:function(e){return function(t){return function(n){return function(o){return n(e(o))}}}}},Es={first:function(e){return function(t){return e(rr(t))}},second:function(e){return function(t){return e(hn(t))}},Profunctor0:function(){return FY}};var kY=In(),NY=he(_e);var BY=function(e){return kY(e(NY))},fo=function(e){return function(t){return BY(t)(e)}};var Ug=function(e){return e},No=function(e){return function(t){return Ug(e)(me(t))}};var pN=nt(rt)(Bt),WY=Rl(Ht),UY=X(Qt),qY=he(_e),hN=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),VY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zY=function(e){return function(t){return sf([Lc(function(n){return VY.create(Po(n))})])([Zn(t)])}},GY=function(e){return function(t){return pN(WY(t.value0))(function(){return UY(new W(t.value1))})}},JY=function(e){var t=Le(xn(e.MonadEffect0()));return function(n){return pN(t(_s(n.value0)))(function(){return lr(void 0)})}},_N=function(e){return Yt({initialState:qY,render:zY(e),eval:Xt({receive:at.receive,initialize:at.initialize,finalize:at.finalize,handleAction:JY(e),handleQuery:GY(e)})})};var zg=Di(Vg(),1);function vN(e,t){return function(){return t.edit(e)}}var gN=function(e){return function(t){return vN(e,t)}};var XY=Di(Vg(),1);function yN(e,t){return function(){return t.setValue(e)}}function r1(e){return function(){return e.getValue()}}var CN=function(e){return function(t){return yN(e,t)}};var eZ=Di(Vg(),1);function ue(e){return function(){var t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1);return function(){return t[e].apply(t,n)}}}function Gg(e){return function(t){return function(){return t[e]}}}function tZ(e){return function(t,n){return function(){n[e]=t}}}var nZ=Gg("text"),rZ=tZ("text"),oZ=Gg("renderer"),aZ=Gg("inMultiSelectMode"),iZ=ue("selectMoreLines"),uZ=Gg("container"),sZ=ue("setKeyboardHandler"),cZ=ue("getKeyboardHandler"),lZ=ue("setSession"),o1=ue("getSession"),fZ=ue("setValue"),dZ=ue("getValue"),pZ=ue("getSelection"),hZ=ue("resize"),_Z=ue("setTheme"),mZ=ue("getTheme"),vZ=ue("setStyle"),gZ=ue("unsetStyle"),yZ=ue("setFontSize"),DZ=ue("focus"),CZ=ue("isFocused"),bZ=ue("blur"),wZ=ue("getCopyText"),SZ=ue("insert"),EZ=ue("setOverwrite"),TZ=ue("getOverwrite"),MZ=ue("toggleOverwrite"),FZ=ue("setScrollSpeed"),xZ=ue("getScrollSpeed"),LZ=ue("setDragDelay"),AZ=ue("getDragDelay"),IZ=ue("setSelectionStyle"),RZ=ue("getSelectionStyle"),$Z=ue("setHighlightActiveLine"),HZ=ue("getHighlightActiveLine"),OZ=ue("setHighlightSelectedWord"),PZ=ue("getHighlightSelectedWord"),kZ=ue("setShowInvisibles"),NZ=ue("getShowInvisibles"),BZ=ue("setShowPrintMargin"),WZ=ue("getShowPrintMargin"),UZ=ue("setPrintMarginColumn"),qZ=ue("getPrintMarginColumn"),VZ=ue("setReadOnly"),zZ=ue("getReadOnly"),GZ=ue("setBehavioursEnabled"),JZ=ue("getBehavioursEnabled"),jZ=ue("setWrapBehavioursEnabled"),KZ=ue("getWrapBehavioursEnabled"),QZ=ue("setShowFoldWidgets"),XZ=ue("getShowFoldWidgets"),YZ=ue("remove"),ZZ=ue("removeWordRight"),eee=ue("removeWordLeft"),tee=ue("removeToLineStart"),nee=ue("removeToLineEnd"),ree=ue("splitLine"),oee=ue("transposeLetters"),aee=ue("toLowerCase"),iee=ue("toUpperCase"),uee=ue("indent"),see=ue("blockIndent"),cee=ue("blockOutdent"),lee=ue("toggleCommentLines"),fee=ue("getNumberAt"),dee=ue("modifyNumber"),pee=ue("removeLines"),hee=ue("moveLinesDown"),_ee=ue("moveLinesUp"),mee=ue("copyLinesUp"),vee=ue("copyLinesDown"),gee=ue("getFirstVisibleRow"),yee=ue("getLastVisibleRow"),Dee=ue("isRowVisible"),Cee=ue("isRowFullyVisible"),bee=ue("selectPageDown"),wee=ue("selectPageUp"),See=ue("gotoPageDown"),Eee=ue("gotoPageUp"),Tee=ue("scrollPageDown"),Mee=ue("scrollPageUp"),Fee=ue("scrollToRow"),xee=ue("scrollToLine"),Lee=ue("centerSelection"),Aee=ue("getCursorPosition"),Iee=ue("getCursorPositionScreen"),Ree=ue("getSelectionRange"),$ee=ue("selectAll"),Hee=ue("clearSelection"),Oee=ue("moveCursorTo"),Pee=ue("moveCursorToPosition"),kee=ue("jumpToMatching"),Nee=ue("gotoLine"),Bee=ue("navigateTo"),Wee=ue("navigateUp"),Uee=ue("navigateDown"),qee=ue("navigateLeft"),Vee=ue("navigateRight"),zee=ue("navigateLineStart"),Gee=ue("navigateLineEnd"),Jee=ue("navigateFileEnd"),jee=ue("navigateFileStart"),Kee=ue("navigateWordRight"),Qee=ue("navigateWordLeft"),Xee=ue("replace"),Yee=ue("replaceAll"),Zee=ue("getLastSearchOptions"),ete=ue("find"),tte=ue("findNext"),nte=ue("findPrevious"),rte=ue("undo"),ote=ue("redo"),ate=ue("destroy");function Cr(e){return e}function a1(e){return JSON.stringify(e)}function bN(e,t,n,o,h,a,r){return r==null?e():typeof r=="boolean"?t(r):typeof r=="number"?n(r):typeof r=="string"?o(r):Object.prototype.toString.call(r)==="[object Array]"?h(r):a(r)}var wN=function(e){return function(t){return function(n){return bN(me(e),me(e),me(e),t,me(e),me(e),n)}}};var i1=Se(Ti),lte=Se(Er);var Jg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),u1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),SN=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),s1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),EN=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),c1=function(){function e(){}return e.value=new e,e}(),th={show:function(e){if(e instanceof Jg)return"(TypeMismatch "+(i1(e.value0)+")");if(e instanceof u1)return"(UnexpectedValue "+(a1(e.value0)+")");if(e instanceof SN)return"(AtIndex "+(lte(e.value0)+(" "+(Se(th)(e.value1)+")")));if(e instanceof s1)return"(AtKey "+(i1(e.value0)+(" "+(Se(th)(e.value1)+")")));if(e instanceof EN)return"(Named "+(i1(e.value0)+(" "+(Se(th)(e.value1)+")")));if(e instanceof c1)return"MissingValue";throw new Error("Failed pattern match at Data.Argonaut.Decode.Error (line 24, column 10 - line 30, column 35): "+[e.constructor.name])}};var FN=function(){return wN(new We(new Jg("String")))(Oe.create)}();var Ff={decodeJson:FN};var Kg=function(e){return e.decodeJson};var AN=Cr;var xf={encodeJson:AN};var nh=function(e){return e.encodeJson};var $7e=Di(dM(),1),tre={keyEncoding:"json",valueEncoding:"json"},pM=e=>t=>n=>()=>e.put(t,n),hM=e=>t=>()=>new Promise((o,h)=>{let a=(r,l)=>{o(l)};e.get(t,tre,a)});var _M=e=>t=>()=>e.del(t);var mM=e=>()=>e.keys().all();var My=e=>e===void 0;var d5=Se(th),p5=Z(Kt),dre=Sn(Mu),pre=dre(dl),h5=Le(yn),vM=X(jr);var _5=function(e){var t=nh(e);return function(n){return function(o){var h=nh(o);return function(a){return function(r){return function(l){return function(u){return as(pM(r.value0)(t(l))(h(u)))}}}}}}};var m5=function(e){var t=nh(e);return function(n){return function(o){return function(h){var a=Kg(h);return function(r){return function(l){return p5(as(hM(r.value0)(t(l))))(function(u){var i=My(u);if(i)return vM(V.value);var s=a(u);if(s instanceof We)return h5(vo(ar(d5(s.value0))));if(s instanceof Oe)return vM(new W(s.value0));throw new Error("Failed pattern match at Level.DB.Operations (line 28, column 10 - line 30, column 40): "+[s.constructor.name])})}}}}}};var v5=function(e){var t=nh(e);return function(n){return function(o){return function(h){return function(a){return function(r){return as(_M(a.value0)(t(r)))}}}}}},g5=function(e){var t=Kg(e);return function(n){return function(o){return p5(as(mM(o.value0)))(function(h){var a=pre(t)(h);if(a instanceof We)return h5(vo(ar(d5(a.value0))));if(a instanceof Oe)return vM(a.value0);throw new Error("Failed pattern match at Level.DB.Operations (line 71, column 3 - line 73, column 26): "+[a.constructor.name])})}}};var y5=Di(dM(),1),_re={keyEncoding:"json",valueEncoding:"json"},gM=e=>()=>new y5.Level(e,_re);var yre=z(Pe),Dre=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var D5=function(e){return yre(Dre.create)(gM(e))};var yM=xf,Fy=Ff,bre=_5(yM)(Fy)(xf)(Ff),wre=m5(yM)(Fy)(xf)(Ff),Sre=v5(yM)(Fy)(xf)(Ff),C5=function(e){return function(t){return function(n){return bre(e)(t)(n)}}},b5=function(e){return function(t){return wre(e)(t)}},Sh=D5("filesystem"),w5=g5(Fy)(Ff),S5=function(e){return function(t){return Sre(e)(t)}};var M5=nt(rt),T5=M5(yo),hu=Z(Bt),DM=Io(Ht),xy=ut(Qt)($t),CM=M5(Bt),Ere=gn(Ht),F5=function(){function e(){}return e.value=new e,e}(),x5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),L5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Tre=function(e){return function(t){var n=fr([Zt([oi("editor"),Ln(T5(Ca(et(500)))(function(){return Ho(et(500))}))])([]),sf([Lc(function(o){return x5.create(Po(o))})])([Zn("Save")]),sf([Lc(function(o){return L5.create(Po(o))})])([Zn("Exit")])]);return Zt([Ln(T5($o(Ni))(function(){return Bi(ju)}))])([n])}},Mre=function(e){var t=Le(xn(e.MonadEffect0())),n=Dn(ni(e));return function(o){return function(h){if(h instanceof F5)return hu(t(Sh))(function(a){return hu(DM(function(r){return r.filePath}))(function(r){return hu(n(b5(a)(r)))(function(l){return hu(kr("editor"))(function(u){return $e(xy)(u)(function(i){return $e(xy)($p(i))(function(s){return hu(t(gN(s)(zg.default)))(function(f){return hu(t(o1(f)))(function(p){return CM($e(xy)(l)(function(d){return t(CN(d)(p))}))(function(){return Ere(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.editSession=new W(new ee(a,new ee(f,p))),c})})})})})})})})})});if(h instanceof x5)return CM(t(_s(h.value0)))(function(){return hu(DM(function(a){return a.editSession}))(function(a){return hu(DM(function(r){return r.filePath}))(function(r){return $e(xy)(a)(function(l){return hu(t(r1(l.value1.value1)))(function(u){return n(C5(l.value0)(r)(u))})})})})});if(h instanceof L5)return CM(t(_s(h.value0)))(function(){return lr(void 0)});throw new Error("Failed pattern match at Examples.Halogen.Widgets.Editor (line 73, column 16 - line 95, column 18): "+[h.constructor.name])}}},A5=function(e){var t=Tre(e),n=Mre(e);return function(o){return Yt({initialState:function(h){return{editSession:V.value,filePath:h}},render:t,eval:Xt({handleQuery:at.handleQuery,receive:at.receive,finalize:at.finalize,handleAction:n(o),initialize:new W(F5.value)})})}};function Ly(e){return function(t){return function(){return t.requestAnimationFrame(n=>e(n)())}}}var I5=Z(Bt),k5=nt(rt),R5=st(Pe),$5=Z(xr),Lre=k5(Bt),H5=st($n),Are=z(vp),Ire=$r(Ht),O5=Z(ti),Rre=k5(ti),N5={reflectSymbol:function(){return"canvas"}},$re=yr()(N5)(Jt),Hre=ra()(N5)(Jt),B5=function(){function e(){}return e.value=new e,e}(),P5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),W5=function(){return pt.value}(),Ore=function(e){var t=Le(xn(e.MonadEffect0()));return function(n){return function(o){if(o instanceof B5)return I5(t(jn))(function(h){var a=function(r){return function(){return Jn(h.listener)(r)(),R5($5(oa)(Ly(a)))()}};return Lre(t(R5($5(oa)(Ly(a)))))(function(){return H5(Rn(Are(P5.create)(h.emitter)))})});if(o instanceof P5)return I5(Ire)(function(h){var a=Hm(O5(Om)(function(r){return O5(Pm)(function(l){return Rre(km({x:0,y:0,width:r,height:l}))(function(){return h.animation(o.value0)})})}));return H5($re(W5)(void 0)(a))});throw new Error("Failed pattern match at Halogen.Canvas.Animate (line 58, column 16 - line 73, column 37): "+[o.constructor.name])}}},Pre=function(e){var t=cf(e);return function(n){var o=t(n);return function(h){return Hre(W5)(void 0)(o)(h.dimensions)}}},U5=function(e){var t=Pre(e),n=Ore(e);return function(o){return Yt({initialState:function(h){return{dimensions:h.dimensions,animation:h.animation}},render:t(o),eval:Xt({handleQuery:at.handleQuery,receive:at.receive,finalize:at.finalize,handleAction:n(o),initialize:new W(B5.value)})})}};var bM=function(e){return function(t){var n=uc(t.Profunctor0()),o=Ml(t);return function(h){return n(e)(function(a){return a.value1(a.value0)})(o(h))}}};var V5=X(Ss),q5=z(mt),z5=nt(rt),Wr=z5(kc),_u=Z(kc),Wre=Jr(zt),Ure=Wl(zt)(vt),qre=Zo(zt),Vre=he(_e),Eh=z5(cr),zre=An(gr),Ay=Z(cr),Gre=Sn(Zs)(gr),Jre=ut(gr)($t),G5=ut(Ss)($t);var mu={cmd:function(e){return bM(function(t){return new ee(t.command,function(n){return{prompt:t.prompt,commandEnv:t.commandEnv,foreground:t.foreground,command:n}})})(e)},prompt:function(e){return bM(function(t){return new ee(t.prompt,function(n){return{command:t.command,commandEnv:t.commandEnv,foreground:t.foreground,prompt:n}})})(e)}},Mh=function(e){var t=Le(Df(e));return function(n){return function(o){return o instanceof VT?n(o.value0):o instanceof zT?t(Za("line feed")):V5(void 0)}}},Fh=function(e){return e.prompt},Iy=Fh(mu)(Es),xh=function(e){return e.cmd},J5=xh(mu),Th=J5(jo),j5=J5(Es),jre=function(e){return function(t){return function(n){var o=function(a){var r=`\r
  help\r
    show this help text`,l=function(u){return`\r
  `+(u.name+(`\r
    `+_o(`\r
    `)(u.description)))};return r+_o("")(q5(l)(a))},h=function(a){return Wr(Wt(Xn(o(n))))(function(){return _u(So)(function(r){return Wr(Wt(dn(fo(r)(Iy))))(function(){return Kn(No(Th)(""))})})})};return Wre("help")(h)(Ure(q5(function(a){return new ee(a.name,a.cmd)})(n)))}}},Ry=function(e){var t=jre(e);return function(n){var o=t(n);return function(h){var a=o(h);return _u(So)(function(r){var l=I0(function(s){return!DL(s)})(G0(" ")(fo(r)(j5))),u=Ai(l);if(u instanceof V)return Wr(Wt(Xn("")))(function(){return _u(So)(function(s){return Wr(Wt(dn(fo(s)(Iy))))(function(){return Kn(No(Th)(""))})})});if(u instanceof W){var i=qre(u.value0)(a);if(i instanceof W)return i.value0(Qe([])(Vre)(F0(l)));if(i instanceof V)return Wr(Wt(Xn(`\r
unrecognised command "`+(u.value0+'" - type "help" to see the available commands'))))(function(){return _u(So)(function(s){return Wr(Wt(dn(fo(s)(Iy))))(function(){return Kn(No(Th)(""))})})});throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 199, column 7 - line 206, column 34): "+[i.constructor.name])}throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 191, column 3 - line 206, column 34): "+[u.constructor.name])})}}};var Kre=function(e){return function(t){var n=xh(t),o=n(Es),h=Fh(t)(Es),a=n(jo);return _u(So)(function(r){return Wr(Wt(Ay(Og(QE))(function(l){var u=l===0;return u?Eh(dn("\x1BM"))(function(){return Ay(Og(Ay(XE)(function(i){return Ay(KE(i-1|0))(function(s){return Gre(jE)(s)})})))(function(i){return Eh(dn("\x9BK"))(function(){return $e(Jre)(i)(function(s){var f=(ac(fo(r)(o))-1|0)<=s;return f?Eh(dn(fo(r)(h)))(function(){return dn(b_(1)(fo(r)(o)))}):dn(b_(1)(mL(s)(fo(r)(o))))})})})}):zre(ac(fo(r)(o))>0)(dn("\b \b"))})))(function(){return Kn(Ug(a)(b_(1)))})})}},Lh=function(e){var t=Kre(e),n=Le(Df(e));return function(o){var h=xh(o)(jo),a=Fh(o)(Es),r=t(o);return function(l){return function(u){return u===""?Wr(Kn(No(h)("")))(function(){return _u(So)(function(i){return Wt(Eh(dn("^C"))(function(){return dn(`\r
`+fo(i)(a))}))})}):u==="\r"?l:u==="\x7F"?r:u>=" "&&u<="~"||u>="\xA0"?Wr(Kn(Ug(h)(function(i){return i+u})))(function(){return Wt(dn(u))}):Wr(n(Za("non-printable: "+u)))(function(){return V5(void 0)})}}}},Qre=function(e){var t=e.MonadEffect0(),n=Mh(t),o=Lh(t)(mu),h=Ry(e);return function(a){var r=h(a);return _u(So)(function(l){return Wr($e(G5)(l.foreground)(function(u){return u.kill}))(function(){return Wr(Kn(function(u){return{prompt:u.prompt,command:u.command,commandEnv:u.commandEnv,foreground:V.value}}))(function(){return Wr(Kn(No(Th)("")))(function(){return _u(So)(function(u){return Wr(Wt(Eh(ia(hi(!0)))(function(){return dn(`\r
`+fo(u)(Iy))})))(function(){return di(n(o(r(l.commandEnv))))})})})})})})}},Xre=function(e){return _u(So)(function(t){return Wr($e(G5)(t.foreground)(function(n){return n.stdin(fo(t)(j5))}))(function(){return Wr(Wt(dn(`\r
`)))(function(){return Kn(No(Th)(""))})})})},K5=function(e){var t=e.MonadEffect0(),n=Mh(t),o=Qre(e),h=Lh(t)(mu),a=Xre(e);return function(r){var l=o(r);return n(function(u){return u===""?Wr(Wt(dn("^C")))(function(){return l}):h(a)(u)})}};var $y=Z(kc),EM=nt(rt),Un=EM(kc),Hy=De(Ns),Zre=Fh(mu)(Es),Ah=xh(mu)(jo),eoe=qr(kk),Oy=Z(cr),Q5=Se(Er),toe=Se(xF),noe=Se(Ti),TM=SE(),MM={reflectSymbol:function(){return"button"}},roe=TM(MM)(Jt)(),X5=st(Ok),tW=EE(),ooe=tW(MM)(Jt)(),FM=TE(),aoe=FM(MM)(Jt)(),$h=EM(cr),nW={reflectSymbol:function(){return"editor"}},Y5=FM(nW)(Jt)(),ioe=TM(nW)(Jt)(),Ih=X(Ss),uoe=z(mt),soe=ut(Ss)(vt),xM={reflectSymbol:function(){return"canvas"}},Z5=TM(xM)(Jt)(),eW=FM(xM)(Jt)(),Os=EM(ti),coe=tW(xM)(Jt)(),loe=st($n),rW={reflectSymbol:function(){return"shell"}},foe=yr()(rW)(Jt),doe=ra()(rW)(Jt),poe=function(){function e(){}return e.value=new e,e}();var oW=function(){return pt.value}(),wM=function(){return pt.value}(),Rh=function(){return pt.value}(),SM=function(){return pt.value}(),LM=function(e){var t=_N(e),n=K5(e),o=e.MonadEffect0(),h=Mh(o),a=Lh(o)(mu),r=Ry(e),l=A5(e),u=Le(Df(o)),i=Dn(Hk(e)),s=cf(e),f=U5(e);return function(p){var d=n(p),c=r(p),_=l(p),m=s(p),v=f(p),y=$y(So)(function(S){return Un(Wt(dn(`\r
`+fo(S)(Zre))))(function(){return Kn(No(Ah)(""))})}),C=function(S){return me(eoe(S)(y))};return[{name:"rows",description:["prints the number of rows in the terminal"],cmd:C(Wt(Oy(Pg)(function(){var S=Hy(`\r
`);return function(D){return Xn(S(Q5(D)))}}())))},{name:"cols",description:["prints the number of columns in the terminal"],cmd:C(Wt(Oy(Pg)(function(){var S=Hy(`\r
`);return function(D){return Xn(S(Q5(D)))}}())))},{name:"blinking",description:["prints a boolean indicating whether the cursor is blinking"],cmd:C(Wt(Oy(ia(oT))(function(){var S=Hy(`\r
`);return function(D){return Xn(S(toe(D)))}}())))},{name:"blinkon",description:["turns on cursor blinking"],cmd:C(Wt(ia(hi(!0))))},{name:"blinkoff",description:["turns off cursor blinking"],cmd:C(Wt(ia(hi(!1))))},{name:"fontFamily",description:["prints the font family of the terminal"],cmd:C(Wt(Oy(ia(rT))(function(){var S=Hy(`\r
`);return function(D){return Xn(S(noe(D)))}}())))},{name:"button",description:["creates a button as a subprocess.","the subprocess can be cancelled with ^C","accepts button text as argument.",'clicking the button prints "click!" to the terminal.'],cmd:function(S){return Un(Kn(No(Ah)("")))(function(){return Un(roe(SM)(void 0)(t)(_o(" ")(S))(me(Wt(Xn("click!")))))(function(){var D={stdin:function(g){return X5(ooe(SM)(void 0)(new hN(g,void 0)))},kill:aoe(SM)(void 0)};return Un(Kn(function(g){return{prompt:g.prompt,command:g.command,commandEnv:g.commandEnv,foreground:new W(D)}}))(function(){return Un(Wt($h(ia(hi(!1)))(function(){return dn(`\r
`)})))(function(){return di(d)})})})})}},{name:"edit",description:["opens a file in the editor as a subprocess.","the subprocess can be cancelled with ^C","accepts the file path as argument."],cmd:function(S){return S.length===1&&ac(S[0])>0?Un(Kn(No(Ah)("")))(function(){var D=Un(Y5(wM)(void 0))(function(){return Un(Wt(dn("> ")))(function(){return di(h(a(c(LM(e)(p)))))})});return Un(ioe(wM)(void 0)(_)(S[0])(me(D)))(function(){var g={stdin:me(Ih(void 0)),kill:Y5(wM)(void 0)};return Un(Kn(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new W(g)}}))(function(){return Un(Wt($h(ia(hi(!1)))(function(){return dn(`\r
`)})))(function(){return di(d)})})})}):C(Wt(Xn(`\r
this command expects a single file name as its argument`)))(S)}},{name:"ls",description:["lists files in the file system"],cmd:C($y(u(Sh))(function(S){return $y(i(w5(S)))(function(D){return Wt(Xn(`\r
`+_o(" ")(uoe(function(g){return g})(D))))})}))},{name:"rm",description:["remove files from the file system"],cmd:function(S){return $y(u(Sh))(function(D){return Un(soe(function(g){return i(S5(D)(g))})(S))(function(){return y})})}},{name:"canvas",description:["canvas example"],cmd:function(S){return Un(Kn(No(Ah)("")))(function(){return Un(Z5(Rh)(void 0)(m)({width:200,height:200})(me(Ih(void 0))))(function(){var D={stdin:me(Ih(void 0)),kill:eW(Rh)(void 0)},g=Os(Dc(Ru(255)(255)(200)))(function(){return Os(op({x:0,y:0,width:200,height:200}))(function(){return Os(Dc(Ru(0)(0)(0)))(function(){return Yb("hello")({x:50,y:50})})})});return Un(X5(coe(Rh)(void 0)(g)))(function(){return Un(Kn(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new W(D)}}))(function(){return Un(Wt($h(ia(hi(!1)))(function(){return dn(`\r
`)})))(function(){return di(d)})})})})})}},{name:"animation",description:["canvas animation example"],cmd:function(S){return Un(Kn(No(Ah)("")))(function(){var D=function(g){return Os(Dc(Ru(255)(255)(200)))(function(){return Os(op({x:0,y:0,width:200,height:200}))(function(){return Os(Dc(Ru(0)(0)(0)))(function(){return Os(PR({translateX:50,translateY:50}))(function(){return Os(RR(g/1e3))(function(){return Yb("hello")({x:0,y:0})})})})})})};return Un(Z5(Rh)(void 0)(v)({dimensions:{width:200,height:200},animation:D})(me(Ih(void 0))))(function(){var g={stdin:me(Ih(void 0)),kill:eW(Rh)(void 0)};return Un(Kn(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new W(g)}}))(function(){return Un(Wt($h(ia(hi(!1)))(function(){return dn(`\r
`)})))(function(){return di(d)})})})})}}]}},hoe=function(e){var t=e.MonadEffect0(),n=Mh(t),o=Lh(t)(mu),h=Ry(e),a=LM(e);return function(r){var l=h(r),u=a(r);return function(i){return loe(foe(oW)(void 0)(Un(Wt($h(UT(!0))(function(){return dn("> ")})))(function(){return di(n(o(l(u))))})))}}},_oe=function(e){var t=LM(e);return function(n){return{prompt:"> ",command:"",foreground:V.value,commandEnv:t(n)}}},moe=function(e){var t=Bg(e),n=_oe(e);return function(o){return me(doe(oW)(void 0)(t)(n(o)))}},aW=function(e){var t=moe(e),n=hoe(e);return function(o){return Yt({initialState:me(void 0),render:t(o),eval:Xt({handleQuery:at.handleQuery,receive:at.receive,finalize:at.finalize,handleAction:n(o),initialize:new W(poe.value)})})}};var goe=z(Dt),iW=uH(rv),lW=z(mt),yoe=Ii(Bn),Doe=Z(Bt),uW=Z(xr),fW=nt(rt),sW=fW(Bt),Coe=FI($l),cW=gn(Ht),dW=Zo(zt),boe=X(Qt),Py=fW(yo),woe=qL(yA),Soe=ra()({reflectSymbol:function(){return"example"}})(zt),Eoe=Wl(zt)(vt),Toe=aW(rs)(Gi),Moe=fO(rs)(Gi),Foe=st(Hr),pW=function(){function e(){}return e.value=new e,e}(),AM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xoe=function(e){return Qe(new AM(""))(AM.create)(goe(function(t){return t.value})(aS(e)))},Loe=function(e){var t=function(n){return Yw([iW(n.id)])([Zn(n.name)])};return Zw([iW(e.selected),lf(xoe)])(lW(t)(yoe(kd(e.examples))))},Aoe=function(e){var t=Le(xn(e));return function(n){if(n instanceof pW)return Doe(t(uW(uW(oa)(MS))(TS)))(function(o){return sW(t(Coe(w_(1)(o))))(function(){return sW(cW(function(h){var a=dW(w_(1)(o))(h.examples);if(a instanceof V)return h;if(a instanceof W){var r={};for(var l in h)({}).hasOwnProperty.call(h,l)&&(r[l]=h[l]);return r.selected=a.value0.id,r}throw new Error("Failed pattern match at Main (line 100, column 10 - line 102, column 46): "+[a.constructor.name])}))(function(){return boe(void 0)})})});if(n instanceof AM)return cW(function(o){var h={};for(var a in o)({}).hasOwnProperty.call(o,a)&&(h[a]=o[a]);return h.selected=n.value0,h});throw new Error("Failed pattern match at Main (line 95, column 3 - line 104, column 62): "+[n.constructor.name])}},Ioe=function(){return pt.value}(),Roe=function(e){return Zt([Ln(Py($o(Ni))(function(){return Bi(gA)}))])([Zt([Ln(Py($o(Ni))(function(){return Py(Bi(ju))(function(){return Py(DA(woe))(function(){return Pd(Od)(et(1))(qa)})})}))])([Ep([Zn("Example")]),Zt([Ln(O_(et(0))(et(0))(et(0))(et(10)))])([Loe(e)])]),Zt([Ln(Pd(Od)(et(1))(qa))])([function(){var t=dW(e.selected)(e.examples);if(t instanceof W)return Soe(Ioe)(t.value0.id)(t.value0.component)(void 0);if(t instanceof V)return fr([]);throw new Error("Failed pattern match at Main (line 144, column 11 - line 146, column 34): "+[t.constructor.name])}()])])},$oe=function(){return Yt({initialState:function(e){return{selected:e.value0,examples:Eoe(lW(function(t){return new ee(t.id,t)})(e.value1))}},render:Roe,eval:Xt({handleQuery:at.handleQuery,receive:at.receive,finalize:at.finalize,handleAction:Aoe(yn),initialize:new W(pW.value)})})}(),hW=LS(Z(Kt)(AS)(function(e){var t=[{id:"xterm",name:"XTerm",component:Toe},{id:"infinite-scroll",name:"Infinite Scroll",component:cN},{id:"halogen-canvas-sketch",name:"Line Sketch",component:Moe}];return Foe(DE($oe)(new ee("xterm",t))(e))}));hW();})();
/*! Bundled license information:

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)
  (*! @license
  ==========================================================================
  SproutCore -- JavaScript Application Framework
  copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
  
  SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.
  
  For more information about SproutCore, visit http://www.sproutcore.com
  
  
  ==========================================================================
  @license *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
