(()=>{var eW=Object.create;var kM=Object.defineProperty;var tW=Object.getOwnPropertyDescriptor;var nW=Object.getOwnPropertyNames;var rW=Object.getPrototypeOf,oW=Object.prototype.hasOwnProperty;var Tt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var aW=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let h of nW(t))!oW.call(e,h)&&h!==n&&kM(e,h,{get:()=>t[h],enumerable:!(a=tW(t,h))||a.enumerable});return e};var bi=(e,t,n)=>(n=e!=null?eW(rW(e)):{},aW(t||!e||!e.__esModule?kM(n,"default",{value:e,enumerable:!0}):n,e));var Kk=Tt((bg,cT)=>{(function(e,t){typeof bg=="object"&&typeof cT=="object"?cT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof bg=="object"?bg.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let a=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(a._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,a=n._renderService.dimensions;if(a.css.cell.width===0||a.css.cell.height===0)return;let h=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(o.getPropertyValue("height")),l=Math.max(0,parseInt(o.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),i=r-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),s=l-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-h;return{cols:Math.max(2,Math.floor(s/a.css.cell.width)),rows:Math.max(1,Math.floor(i/a.css.cell.height))}}}})(),e})())});var Xk=Tt((Sg,lT)=>{(function(e,t){typeof Sg=="object"&&typeof lT=="object"?lT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Sg=="object"?Sg.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(h,o,r){var l=this&&this.__decorate||function(D,g,w,F){var b,E=arguments.length,M=E<3?g:F===null?F=Object.getOwnPropertyDescriptor(g,w):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,w,F);else for(var S=D.length-1;S>=0;S--)(b=D[S])&&(M=(E<3?b(M):E>3?b(g,w,M):b(g,w))||M);return E>3&&M&&Object.defineProperty(g,w,M),M};Object.defineProperty(o,"__esModule",{value:!0}),o.GlyphRenderer=void 0;let u=r(374),i=r(509),s=r(855),f=r(859),p=r(776),d=r(381),c=11,_=c*Float32Array.BYTES_PER_ELEMENT,m,v=0,y=0,C=0;class T extends f.Disposable{constructor(g,w,F){super(),this._terminal=g,this._gl=w,this._dimensions=F,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let b=this._gl;i.TextureAtlas.maxAtlasPages===void 0&&(i.TextureAtlas.maxAtlasPages=Math.min(32,(0,u.throwIfFalsy)(b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS))),i.TextureAtlas.maxTextureSize=(0,u.throwIfFalsy)(b.getParameter(b.MAX_TEXTURE_SIZE))),this._program=(0,u.throwIfFalsy)((0,d.createProgram)(b,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(R){let A="";for(let I=1;I<R;I++)A+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${R}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${A}
}`}(i.TextureAtlas.maxAtlasPages))),this.register((0,f.toDisposable)(()=>b.deleteProgram(this._program))),this._projectionLocation=(0,u.throwIfFalsy)(b.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,u.throwIfFalsy)(b.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,u.throwIfFalsy)(b.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=b.createVertexArray(),b.bindVertexArray(this._vertexArrayObject);let E=new Float32Array([0,0,1,0,0,1,1,1]),M=b.createBuffer();this.register((0,f.toDisposable)(()=>b.deleteBuffer(M))),b.bindBuffer(b.ARRAY_BUFFER,M),b.bufferData(b.ARRAY_BUFFER,E,b.STATIC_DRAW),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let S=new Uint8Array([0,1,2,3]),x=b.createBuffer();this.register((0,f.toDisposable)(()=>b.deleteBuffer(x))),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,x),b.bufferData(b.ELEMENT_ARRAY_BUFFER,S,b.STATIC_DRAW),this._attributesBuffer=(0,u.throwIfFalsy)(b.createBuffer()),this.register((0,f.toDisposable)(()=>b.deleteBuffer(this._attributesBuffer))),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.FLOAT,!1,_,0),b.vertexAttribDivisor(2,1),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,_,2*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,!1,_,4*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,2,b.FLOAT,!1,_,5*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(5,1),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,_,7*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(6,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,_,9*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(1,1),b.useProgram(this._program);let L=new Int32Array(i.TextureAtlas.maxAtlasPages);for(let R=0;R<i.TextureAtlas.maxAtlasPages;R++)L[R]=R;b.uniform1iv(this._textureLocation,L),b.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),this._atlasTextures=[];for(let R=0;R<i.TextureAtlas.maxAtlasPages;R++){let A=new d.GLTexture((0,u.throwIfFalsy)(b.createTexture()));this.register((0,f.toDisposable)(()=>b.deleteTexture(A.texture))),b.activeTexture(b.TEXTURE0+R),b.bindTexture(b.TEXTURE_2D,A.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[R]=A}b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,w,F,b,E,M,S,x){this._updateCell(this._vertices.attributes,g,w,F,b,E,M,S,x)}_updateCell(g,w,F,b,E,M,S,x,L){v=(F*this._terminal.cols+w)*c,b!==s.NULL_CELL_CODE&&b!==void 0?this._atlas&&(m=x&&x.length>1?this._atlas.getRasterizedGlyphCombinedChar(x,E,M,S,!1):this._atlas.getRasterizedGlyph(b,E,M,S,!1),y=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),E!==L&&m.offset.x>y?(C=m.offset.x-y,g[v]=-(m.offset.x-C)+this._dimensions.device.char.left,g[v+1]=-m.offset.y+this._dimensions.device.char.top,g[v+2]=(m.size.x-C)/this._dimensions.device.canvas.width,g[v+3]=m.size.y/this._dimensions.device.canvas.height,g[v+4]=m.texturePage,g[v+5]=m.texturePositionClipSpace.x+C/this._atlas.pages[m.texturePage].canvas.width,g[v+6]=m.texturePositionClipSpace.y,g[v+7]=m.sizeClipSpace.x-C/this._atlas.pages[m.texturePage].canvas.width,g[v+8]=m.sizeClipSpace.y):(g[v]=-m.offset.x+this._dimensions.device.char.left,g[v+1]=-m.offset.y+this._dimensions.device.char.top,g[v+2]=m.size.x/this._dimensions.device.canvas.width,g[v+3]=m.size.y/this._dimensions.device.canvas.height,g[v+4]=m.texturePage,g[v+5]=m.texturePositionClipSpace.x,g[v+6]=m.texturePositionClipSpace.y,g[v+7]=m.sizeClipSpace.x,g[v+8]=m.sizeClipSpace.y)):g.fill(0,v,v+c-1-2)}clear(){let g=this._terminal,w=g.cols*g.rows*c;this._vertices.count!==w?this._vertices.attributes=new Float32Array(w):this._vertices.attributes.fill(0);let F=0;for(;F<this._vertices.attributesBuffers.length;F++)this._vertices.count!==w?this._vertices.attributesBuffers[F]=new Float32Array(w):this._vertices.attributesBuffers[F].fill(0);this._vertices.count=w,F=0;for(let b=0;b<g.rows;b++)for(let E=0;E<g.cols;E++)this._vertices.attributes[F+9]=E/g.cols,this._vertices.attributes[F+10]=b/g.rows,F+=c}handleResize(){let g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;let w=this._gl;w.useProgram(this._program),w.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let F=this._vertices.attributesBuffers[this._activeBuffer],b=0;for(let E=0;E<g.lineLengths.length;E++){let M=E*this._terminal.cols*c,S=this._vertices.attributes.subarray(M,M+g.lineLengths[E]*c);F.set(S,b),b+=S.length}w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.bufferData(w.ARRAY_BUFFER,F.subarray(0,b),w.STREAM_DRAW);for(let E=0;E<this._atlas.pages.length;E++)this._atlas.pages[E].version!==this._atlasTextures[E].version&&this._bindAtlasPageTexture(w,this._atlas,E);w.drawElementsInstanced(w.TRIANGLE_STRIP,4,w.UNSIGNED_BYTE,0,b/c)}setAtlas(g){this._atlas=g;for(let w of this._atlasTextures)w.version=-1}_bindAtlasPageTexture(g,w,F){g.activeTexture(g.TEXTURE0+F),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[F].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,w.pages[F].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[F].version=w.pages[F].version}setDimensions(g){this._dimensions=g}}o.GlyphRenderer=T,l([p.traceCall],T.prototype,"updateCell",null)},742:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RectangleRenderer=void 0;let l=r(374),u=r(859),i=r(310),s=r(381),f=8*Float32Array.BYTES_PER_ELEMENT;class p{constructor(){this.attributes=new Float32Array(160),this.count=0}}let d=0,c=0,_=0,m=0,v=0,y=0,C=0;class T extends u.Disposable{constructor(g,w,F,b){super(),this._terminal=g,this._gl=w,this._dimensions=F,this._themeService=b,this._vertices=new p,this._verticesCursor=new p;let E=this._gl;this._program=(0,l.throwIfFalsy)((0,s.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,u.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,l.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),S=E.createBuffer();this.register((0,u.toDisposable)(()=>E.deleteBuffer(S))),E.bindBuffer(E.ARRAY_BUFFER,S),E.bufferData(E.ARRAY_BUFFER,M,E.STATIC_DRAW),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let x=new Uint8Array([0,1,2,3]),L=E.createBuffer();this.register((0,u.toDisposable)(()=>E.deleteBuffer(L))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,L),E.bufferData(E.ELEMENT_ARRAY_BUFFER,x,E.STATIC_DRAW),this._attributesBuffer=(0,l.throwIfFalsy)(E.createBuffer()),this.register((0,u.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,E.FLOAT,!1,f,0),E.vertexAttribDivisor(0,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,f,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,4,E.FLOAT,!1,f,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(2,1),this._updateCachedColors(b.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){let w=this._gl;w.useProgram(this._program),w.bindVertexArray(this._vertexArrayObject),w.uniformMatrix4fv(this._projectionLocation,!1,s.PROJECTION_MATRIX),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.bufferData(w.ARRAY_BUFFER,g.attributes,w.DYNAMIC_DRAW),w.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,w.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){let w=this._terminal,F=this._vertices,b,E,M,S,x,L,R,A,I,$,H,P=1;for(b=0;b<w.rows;b++){for(M=-1,S=0,x=0,L=!1,E=0;E<w.cols;E++)R=(b*w.cols+E)*i.RENDER_MODEL_INDICIES_PER_CELL,A=g.cells[R+i.RENDER_MODEL_BG_OFFSET],I=g.cells[R+i.RENDER_MODEL_FG_OFFSET],$=!!(67108864&I),(A!==S||I!==x&&(L||$))&&((S!==0||L&&x!==0)&&(H=8*P++,this._updateRectangle(F,H,x,S,M,E,b)),M=E,S=A,x=I,L=$);(S!==0||L&&x!==0)&&(H=8*P++,this._updateRectangle(F,H,x,S,M,w.cols,b))}F.count=P}updateCursor(g){let w=this._verticesCursor,F=g.cursor;if(!F||F.style==="block")return void(w.count=0);let b,E=0;F.style!=="bar"&&F.style!=="outline"||(b=8*E++,this._addRectangleFloat(w.attributes,b,F.x*this._dimensions.device.cell.width,F.y*this._dimensions.device.cell.height,F.style==="bar"?F.dpr*F.cursorWidth:F.dpr,this._dimensions.device.cell.height,this._cursorFloat)),F.style!=="underline"&&F.style!=="outline"||(b=8*E++,this._addRectangleFloat(w.attributes,b,F.x*this._dimensions.device.cell.width,(F.y+1)*this._dimensions.device.cell.height-F.dpr,F.width*this._dimensions.device.cell.width,F.dpr,this._cursorFloat)),F.style==="outline"&&(b=8*E++,this._addRectangleFloat(w.attributes,b,F.x*this._dimensions.device.cell.width,F.y*this._dimensions.device.cell.height,F.width*this._dimensions.device.cell.width,F.dpr,this._cursorFloat),b=8*E++,this._addRectangleFloat(w.attributes,b,(F.x+F.width)*this._dimensions.device.cell.width-F.dpr,F.y*this._dimensions.device.cell.height,F.dpr,this._dimensions.device.cell.height,this._cursorFloat)),w.count=E}_updateRectangle(g,w,F,b,E,M,S){if(67108864&F)switch(50331648&F){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&F].rgba;break;case 50331648:d=(16777215&F)<<8;break;default:d=this._themeService.colors.foreground.rgba}else switch(50331648&b){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&b].rgba;break;case 50331648:d=(16777215&b)<<8;break;default:d=this._themeService.colors.background.rgba}g.attributes.length<w+4&&(g.attributes=(0,s.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),c=E*this._dimensions.device.cell.width,_=S*this._dimensions.device.cell.height,m=(d>>24&255)/255,v=(d>>16&255)/255,y=(d>>8&255)/255,C=1,this._addRectangle(g.attributes,w,c,_,(M-E)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,m,v,y,C)}_addRectangle(g,w,F,b,E,M,S,x,L,R){g[w]=F/this._dimensions.device.canvas.width,g[w+1]=b/this._dimensions.device.canvas.height,g[w+2]=E/this._dimensions.device.canvas.width,g[w+3]=M/this._dimensions.device.canvas.height,g[w+4]=S,g[w+5]=x,g[w+6]=L,g[w+7]=R}_addRectangleFloat(g,w,F,b,E,M,S){g[w]=F/this._dimensions.device.canvas.width,g[w+1]=b/this._dimensions.device.canvas.height,g[w+2]=E/this._dimensions.device.canvas.width,g[w+3]=M/this._dimensions.device.canvas.height,g[w+4]=S[0],g[w+5]=S[1],g[w+6]=S[2],g[w+7]=S[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}o.RectangleRenderer=T},310:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderModel=o.COMBINED_CHAR_BIT_MASK=o.RENDER_MODEL_EXT_OFFSET=o.RENDER_MODEL_FG_OFFSET=o.RENDER_MODEL_BG_OFFSET=o.RENDER_MODEL_INDICIES_PER_CELL=void 0;let l=r(296);o.RENDER_MODEL_INDICIES_PER_CELL=4,o.RENDER_MODEL_BG_OFFSET=1,o.RENDER_MODEL_FG_OFFSET=2,o.RENDER_MODEL_EXT_OFFSET=3,o.COMBINED_CHAR_BIT_MASK=2147483648,o.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,l.createSelectionRenderModel)()}resize(u,i){let s=u*i*o.RENDER_MODEL_INDICIES_PER_CELL;s!==this.cells.length&&(this.cells=new Uint32Array(s),this.lineLengths=new Uint32Array(i))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(h,o,r){var l=this&&this.__decorate||function(M,S,x,L){var R,A=arguments.length,I=A<3?S:L===null?L=Object.getOwnPropertyDescriptor(S,x):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(M,S,x,L);else for(var $=M.length-1;$>=0;$--)(R=M[$])&&(I=(A<3?R(I):A>3?R(S,x,I):R(S,x))||I);return A>3&&I&&Object.defineProperty(S,x,I),I};Object.defineProperty(o,"__esModule",{value:!0}),o.JoinedCellData=o.WebglRenderer=void 0;let u=r(820),i=r(274),s=r(627),f=r(457),p=r(56),d=r(374),c=r(345),_=r(859),m=r(147),v=r(782),y=r(855),C=r(776),T=r(965),D=r(742),g=r(310),w=r(733);class F extends _.Disposable{constructor(S,x,L,R,A,I,$,H,P){super(),this._terminal=S,this._characterJoinerService=x,this._charSizeService=L,this._coreBrowserService=R,this._coreService=A,this._decorationService=I,this._optionsService=$,this._themeService=H,this._cursorBlinkStateManager=new _.MutableDisposable,this._charAtlasDisposable=this.register(new _.MutableDisposable),this._model=new g.RenderModel,this._workCell=new v.CellData,this._rectangleRenderer=this.register(new _.MutableDisposable),this._glyphRenderer=this.register(new _.MutableDisposable),this._onChangeTextureAtlas=this.register(new c.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new c.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new c.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new c.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new i.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new w.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,$,this._themeService)],this.dimensions=(0,d.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register($.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let q={antialias:!1,depth:!1,preserveDrawingBuffer:P};if(this._gl=this._canvas.getContext("webgl2",q),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextlost",G=>{console.log("webglcontextlost event received"),G.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(G)},3e3)})),this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextrestored",G=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,s.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,p.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(G,B)=>this._setCanvasDevicePixelDimensions(G,B))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,_.toDisposable)(()=>{var G;for(let B of this._renderLayers)B.dispose();(G=this._canvas.parentElement)===null||G===void 0||G.removeChild(this._canvas),(0,s.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var S;return(S=this._charAtlas)===null||S===void 0?void 0:S.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(S,x){var L,R,A,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let $ of this._renderLayers)$.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(L=this._rectangleRenderer.value)===null||L===void 0||L.setDimensions(this.dimensions),(R=this._rectangleRenderer.value)===null||R===void 0||R.handleResize(),(A=this._glyphRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(I=this._glyphRenderer.value)===null||I===void 0||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var S;for(let x of this._renderLayers)x.handleBlur(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.pause(),this._requestRedrawViewport()}handleFocus(){var S;for(let x of this._renderLayers)x.handleFocus(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.resume(),this._requestRedrawViewport()}handleSelectionChanged(S,x,L){for(let R of this._renderLayers)R.handleSelectionChanged(this._terminal,S,x,L);this._model.selection.update(this._terminal,S,x,L),this._requestRedrawViewport()}handleCursorMove(){var S;for(let x of this._renderLayers)x.handleCursorMove(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new D.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new T.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var S;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let x=(0,s.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==x&&(this._onChangeTextureAtlas.fire(x.pages[0].canvas),this._charAtlasDisposable.value=(0,_.getDisposeArrayDisposable)([(0,c.forwardEvent)(x.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,c.forwardEvent)(x.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=x,this._charAtlas.warmUp(),(S=this._glyphRenderer.value)===null||S===void 0||S.setAtlas(this._charAtlas)}_clearModel(S){var x;this._model.clear(),S&&((x=this._glyphRenderer.value)===null||x===void 0||x.clear())}clearTextureAtlas(){var S;(S=this._charAtlas)===null||S===void 0||S.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var S;this._clearModel(!0);for(let x of this._renderLayers)x.reset(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(S){return-1}deregisterCharacterJoiner(S){return!1}renderRows(S,x){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let L of this._renderLayers)L.handleGridChanged(this._terminal,S,x);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(S,x),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new f.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(S,x){let L=this._core,R,A,I,$,H,P,q,G,B,Q,O,W,U,k=this._workCell;S=E(S,L.rows-1,0),x=E(x,L.rows-1,0);let te=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,j=Math.min(this._terminal.buffer.active.cursorX,L.cols-1),ye=-1,Ae=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let we=!1;for(A=S;A<=x;A++)for(I=A+L.buffer.ydisp,$=L.buffer.lines.get(I),this._model.lineLengths[A]=0,H=this._characterJoinerService.getJoinedCharacters(I),W=0;W<L.cols;W++)if(R=this._cellColorResolver.result.bg,$.loadCell(W,k),W===0&&(R=this._cellColorResolver.result.bg),P=!1,q=W,H.length>0&&W===H[0][0]&&(P=!0,G=H.shift(),k=new b(k,$.translateToString(!0,G[0],G[1]),G[1]-G[0]),q=G[1]-1),B=k.getChars(),Q=k.getCode(),O=(A*L.cols+W)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(k,W,I),Ae&&I===te&&(W===j&&(this._model.cursor={x:j,y:this._terminal.buffer.active.cursorY,width:k.getWidth(),style:this._coreBrowserService.isFocused?L.options.cursorStyle||"block":L.options.cursorInactiveStyle,cursorWidth:L.options.cursorWidth,dpr:this._devicePixelRatio},ye=j+k.getWidth()-1),W>=j&&W<=ye&&(this._coreBrowserService.isFocused&&(L.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&L.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),Q!==y.NULL_CELL_CODE&&(this._model.lineLengths[A]=W+1),(this._model.cells[O]!==Q||this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(we=!0,B.length>1&&(Q|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[O]=Q,this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(W,A,Q,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,B,R),P))for(k=this._workCell,W++;W<q;W++)U=(A*L.cols+W)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(W,A,y.NULL_CELL_CODE,0,0,0,y.NULL_CELL_CHAR,0),this._model.cells[U]=y.NULL_CELL_CODE,this._model.cells[U+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[U+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[U+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;we&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(S,x){this._canvas.width===S&&this._canvas.height===x||(this._canvas.width=S,this._canvas.height=x,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let S=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:S,end:S})}}o.WebglRenderer=F,l([C.traceCall],F.prototype,"renderRows",null);class b extends m.AttributeData{constructor(S,x,L){super(),this.content=0,this.combinedData="",this.fg=S.fg,this.bg=S.bg,this.combinedData=x,this._width=L}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(S){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function E(M,S,x=0){return Math.max(Math.min(M,S),x)}o.JoinedCellData=b},381:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GLTexture=o.expandFloat32Array=o.createShader=o.createProgram=o.PROJECTION_MATRIX=void 0;let l=r(374);function u(i,s,f){let p=(0,l.throwIfFalsy)(i.createShader(s));if(i.shaderSource(p,f),i.compileShader(p),i.getShaderParameter(p,i.COMPILE_STATUS))return p;console.error(i.getShaderInfoLog(p)),i.deleteShader(p)}o.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),o.createProgram=function(i,s,f){let p=(0,l.throwIfFalsy)(i.createProgram());if(i.attachShader(p,(0,l.throwIfFalsy)(u(i,i.VERTEX_SHADER,s))),i.attachShader(p,(0,l.throwIfFalsy)(u(i,i.FRAGMENT_SHADER,f))),i.linkProgram(p),i.getProgramParameter(p,i.LINK_STATUS))return p;console.error(i.getProgramInfoLog(p)),i.deleteProgram(p)},o.createShader=u,o.expandFloat32Array=function(i,s){let f=Math.min(2*i.length,s),p=new Float32Array(f);for(let d=0;d<i.length;d++)p[d]=i[d];return p},o.GLTexture=class{constructor(i){this.texture=i,this.version=-1}}},592:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseRenderLayer=void 0;let l=r(627),u=r(237),i=r(374),s=r(859);class f extends s.Disposable{constructor(d,c,_,m,v,y,C,T){super(),this._container=c,this._alpha=v,this._coreBrowserService=y,this._optionsService=C,this._themeService=T,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${_}-layer`),this._canvas.style.zIndex=m.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(D=>{this._refreshCharAtlas(d,D),this.reset(d)})),this.register((0,s.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,i.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(d){}handleFocus(d){}handleCursorMove(d){}handleGridChanged(d,c,_){}handleSelectionChanged(d,c,_,m=!1){}_setTransparency(d,c){if(c===this._alpha)return;let _=this._canvas;this._alpha=c,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,_),this._refreshCharAtlas(d,this._themeService.colors),this.handleGridChanged(d,0,d.rows-1)}_refreshCharAtlas(d,c){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,l.acquireTextureAtlas)(d,this._optionsService.rawOptions,c,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(d,c){this._deviceCellWidth=c.device.cell.width,this._deviceCellHeight=c.device.cell.height,this._deviceCharWidth=c.device.char.width,this._deviceCharHeight=c.device.char.height,this._deviceCharLeft=c.device.char.left,this._deviceCharTop=c.device.char.top,this._canvas.width=c.device.canvas.width,this._canvas.height=c.device.canvas.height,this._canvas.style.width=`${c.css.canvas.width}px`,this._canvas.style.height=`${c.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(d,this._themeService.colors)}_fillBottomLineAtCells(d,c,_=1){this._ctx.fillRect(d*this._deviceCellWidth,(c+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,_*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(d,c,_,m){this._alpha?this._ctx.clearRect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,m*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,m*this._deviceCellHeight))}_fillCharTrueColor(d,c,_,m){this._ctx.font=this._getFont(d,!1,!1),this._ctx.textBaseline=u.TEXT_BASELINE,this._clipCell(_,m,c.getWidth()),this._ctx.fillText(c.getChars(),_*this._deviceCellWidth+this._deviceCharLeft,m*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(d,c,_){this._ctx.beginPath(),this._ctx.rect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(d,c,_){return`${_?"italic":""} ${c?d.options.fontWeightBold:d.options.fontWeight} ${d.options.fontSize*this._coreBrowserService.dpr}px ${d.options.fontFamily}`}}o.BaseRenderLayer=f},733:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkRenderLayer=void 0;let l=r(197),u=r(237),i=r(592);class s extends i.BaseRenderLayer{constructor(p,d,c,_,m,v,y){super(c,p,"link",d,!0,m,v,y),this.register(_.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(_.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(p,d){super.resize(p,d),this._state=void 0}reset(p){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let p=this._state.y2-this._state.y1-1;p>0&&this._clearCells(0,this._state.y1+1,this._state.cols,p),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(p){if(p.fg===u.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:p.fg!==void 0&&(0,l.is256Color)(p.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[p.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,p.y1===p.y2)this._fillBottomLineAtCells(p.x1,p.y1,p.x2-p.x1);else{this._fillBottomLineAtCells(p.x1,p.y1,p.cols-p.x1);for(let d=p.y1+1;d<p.y2;d++)this._fillBottomLineAtCells(0,d,p.cols);this._fillBottomLineAtCells(0,p.y2,p.x2)}this._state=p}_handleHideLinkUnderline(p){this._clearCurrentLink()}}o.LinkRenderLayer=s},820:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(r,l,u,i){r.addEventListener(l,u,i);let s=!1;return{dispose:()=>{s||(s=!0,r.removeEventListener(l,u,i))}}}},274:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellColorResolver=void 0;let r,l=0,u=0,i=!1,s=!1,f=!1;o.CellColorResolver=class{constructor(p,d,c,_,m){this._terminal=p,this._selectionRenderModel=d,this._decorationService=c,this._coreBrowserService=_,this._themeService=m,this.result={fg:0,bg:0,ext:0}}resolve(p,d,c){this.result.bg=p.bg,this.result.fg=p.fg,this.result.ext=268435456&p.bg?p.extended.ext:0,u=0,l=0,s=!1,i=!1,f=!1,r=this._themeService.colors,this._decorationService.forEachDecorationAtCell(d,c,"bottom",_=>{_.backgroundColorRGB&&(u=_.backgroundColorRGB.rgba>>8&16777215,s=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,i=!0)}),f=this._selectionRenderModel.isCellSelected(this._terminal,d,c),f&&(u=(this._coreBrowserService.isFocused?r.selectionBackgroundOpaque:r.selectionInactiveBackgroundOpaque).rgba>>8&16777215,s=!0,r.selectionForeground&&(l=r.selectionForeground.rgba>>8&16777215,i=!0)),this._decorationService.forEachDecorationAtCell(d,c,"top",_=>{_.backgroundColorRGB&&(u=_.backgroundColorRGB.rgba>>8&16777215,s=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,i=!0)}),s&&(u=f?-16777216&p.bg&-134217729|u|50331648:-16777216&p.bg|u|50331648),i&&(l=-16777216&p.fg&-67108865|l|50331648),67108864&this.result.fg&&(s&&!i&&(l=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&r.background.rgba>>8|50331648,i=!0),!s&&i&&(u=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&r.foreground.rgba>>8|50331648,s=!0)),r=void 0,this.result.bg=s?u:this.result.bg,this.result.fg=i?l:this.result.fg}}},627:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.removeTerminalFromCache=o.acquireTextureAtlas=void 0;let l=r(509),u=r(197),i=[];o.acquireTextureAtlas=function(s,f,p,d,c,_,m,v){let y=(0,u.generateConfig)(d,c,_,m,f,p,v);for(let D=0;D<i.length;D++){let g=i[D],w=g.ownedBy.indexOf(s);if(w>=0){if((0,u.configEquals)(g.config,y))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),i.splice(D,1)):g.ownedBy.splice(w,1);break}}for(let D=0;D<i.length;D++){let g=i[D];if((0,u.configEquals)(g.config,y))return g.ownedBy.push(s),g.atlas}let C=s._core,T={atlas:new l.TextureAtlas(document,y,C.unicodeService),config:y,ownedBy:[s]};return i.push(T),T.atlas},o.removeTerminalFromCache=function(s){for(let f=0;f<i.length;f++){let p=i[f].ownedBy.indexOf(s);if(p!==-1){i[f].ownedBy.length===1?(i[f].atlas.dispose(),i.splice(f,1)):i[f].ownedBy.splice(p,1);break}}}},197:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.is256Color=o.configEquals=o.generateConfig=void 0;let l=r(160);o.generateConfig=function(u,i,s,f,p,d,c){let _={foreground:d.foreground,background:d.background,cursor:l.NULL_COLOR,cursorAccent:l.NULL_COLOR,selectionForeground:l.NULL_COLOR,selectionBackgroundTransparent:l.NULL_COLOR,selectionBackgroundOpaque:l.NULL_COLOR,selectionInactiveBackgroundTransparent:l.NULL_COLOR,selectionInactiveBackgroundOpaque:l.NULL_COLOR,ansi:d.ansi.slice(),contrastCache:d.contrastCache,halfContrastCache:d.halfContrastCache};return{customGlyphs:p.customGlyphs,devicePixelRatio:c,letterSpacing:p.letterSpacing,lineHeight:p.lineHeight,deviceCellWidth:u,deviceCellHeight:i,deviceCharWidth:s,deviceCharHeight:f,fontFamily:p.fontFamily,fontSize:p.fontSize,fontWeight:p.fontWeight,fontWeightBold:p.fontWeightBold,allowTransparency:p.allowTransparency,drawBoldTextInBrightColors:p.drawBoldTextInBrightColors,minimumContrastRatio:p.minimumContrastRatio,colors:_}},o.configEquals=function(u,i){for(let s=0;s<u.colors.ansi.length;s++)if(u.colors.ansi[s].rgba!==i.colors.ansi[s].rgba)return!1;return u.devicePixelRatio===i.devicePixelRatio&&u.customGlyphs===i.customGlyphs&&u.lineHeight===i.lineHeight&&u.letterSpacing===i.letterSpacing&&u.fontFamily===i.fontFamily&&u.fontSize===i.fontSize&&u.fontWeight===i.fontWeight&&u.fontWeightBold===i.fontWeightBold&&u.allowTransparency===i.allowTransparency&&u.deviceCharWidth===i.deviceCharWidth&&u.deviceCharHeight===i.deviceCharHeight&&u.drawBoldTextInBrightColors===i.drawBoldTextInBrightColors&&u.minimumContrastRatio===i.minimumContrastRatio&&u.colors.foreground.rgba===i.colors.foreground.rgba&&u.colors.background.rgba===i.colors.background.rgba},o.is256Color=function(u){return(50331648&u)==16777216||(50331648&u)==33554432}},237:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;let l=r(399);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},457:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CursorBlinkStateManager=void 0,o.CursorBlinkStateManager=class{constructor(r,l){this._renderCallback=r,this._coreBrowserService=l,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(r=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let l=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,l>0)return void this._restartInterval(l)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let l=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(l)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},r)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tryDrawCustomChar=o.powerlineDefinitions=o.boxDrawingDefinitions=o.blockElementDefinitions=void 0;let l=r(374);o.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let u={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};o.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u2551":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2552":{1:(d,c)=>`M.5,1 L.5,${.5-c} L1,${.5-c} M.5,${.5+c} L1,${.5+c}`},"\u2553":{1:(d,c)=>`M${.5-d},1 L${.5-d},.5 L1,.5 M${.5+d},.5 L${.5+d},1`},"\u2554":{1:(d,c)=>`M1,${.5-c} L${.5-d},${.5-c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1`},"\u2555":{1:(d,c)=>`M0,${.5-c} L.5,${.5-c} L.5,1 M0,${.5+c} L.5,${.5+c}`},"\u2556":{1:(d,c)=>`M${.5+d},1 L${.5+d},.5 L0,.5 M${.5-d},.5 L${.5-d},1`},"\u2557":{1:(d,c)=>`M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M0,${.5-c} L${.5+d},${.5-c} L${.5+d},1`},"\u2558":{1:(d,c)=>`M.5,0 L.5,${.5+c} L1,${.5+c} M.5,${.5-c} L1,${.5-c}`},"\u2559":{1:(d,c)=>`M1,.5 L${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u255A":{1:(d,c)=>`M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0 M1,${.5+c} L${.5-d},${.5+c} L${.5-d},0`},"\u255B":{1:(d,c)=>`M0,${.5+c} L.5,${.5+c} L.5,0 M0,${.5-c} L.5,${.5-c}`},"\u255C":{1:(d,c)=>`M0,.5 L${.5+d},.5 L${.5+d},0 M${.5-d},.5 L${.5-d},0`},"\u255D":{1:(d,c)=>`M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M0,${.5+c} L${.5+d},${.5+c} L${.5+d},0`},"\u255E":{1:(d,c)=>`M.5,0 L.5,1 M.5,${.5-c} L1,${.5-c} M.5,${.5+c} L1,${.5+c}`},"\u255F":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1 M${.5+d},.5 L1,.5`},"\u2560":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u2561":{1:(d,c)=>`M.5,0 L.5,1 M0,${.5-c} L.5,${.5-c} M0,${.5+c} L.5,${.5+c}`},"\u2562":{1:(d,c)=>`M0,.5 L${.5-d},.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2563":{1:(d,c)=>`M${.5+d},0 L${.5+d},1 M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0`},"\u2564":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c} M.5,${.5+c} L.5,1`},"\u2565":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},1 M${.5+d},.5 L${.5+d},1`},"\u2566":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1`},"\u2567":{1:(d,c)=>`M.5,0 L.5,${.5-c} M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u2568":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u2569":{1:(d,c)=>`M0,${.5+c} L1,${.5+c} M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u256A":{1:(d,c)=>`M.5,0 L.5,1 M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u256B":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u256C":{1:(d,c)=>`M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1 M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(d,c)=>`M.5,1 L.5,${.5+c/.15*.5} C.5,${.5+c/.15*.5},.5,.5,1,.5`},"\u256E":{1:(d,c)=>`M.5,1 L.5,${.5+c/.15*.5} C.5,${.5+c/.15*.5},.5,.5,0,.5`},"\u256F":{1:(d,c)=>`M.5,0 L.5,${.5-c/.15*.5} C.5,${.5-c/.15*.5},.5,.5,0,.5`},"\u2570":{1:(d,c)=>`M.5,0 L.5,${.5-c/.15*.5} C.5,${.5-c/.15*.5},.5,.5,1,.5`}},o.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},o.powerlineDefinitions["\uE0BB"]=o.powerlineDefinitions["\uE0BD"],o.powerlineDefinitions["\uE0BF"]=o.powerlineDefinitions["\uE0B9"],o.tryDrawCustomChar=function(d,c,_,m,v,y,C,T){let D=o.blockElementDefinitions[c];if(D)return function(b,E,M,S,x,L){for(let R=0;R<E.length;R++){let A=E[R],I=x/8,$=L/8;b.fillRect(M+A.x*I,S+A.y*$,A.w*I,A.h*$)}}(d,D,_,m,v,y),!0;let g=u[c];if(g)return function(b,E,M,S,x,L){let R=i.get(E);R||(R=new Map,i.set(E,R));let A=b.fillStyle;if(typeof A!="string")throw new Error(`Unexpected fillStyle type "${A}"`);let I=R.get(A);if(!I){let $=E[0].length,H=E.length,P=document.createElement("canvas");P.width=$,P.height=H;let q=(0,l.throwIfFalsy)(P.getContext("2d")),G=new ImageData($,H),B,Q,O,W;if(A.startsWith("#"))B=parseInt(A.slice(1,3),16),Q=parseInt(A.slice(3,5),16),O=parseInt(A.slice(5,7),16),W=A.length>7&&parseInt(A.slice(7,9),16)||1;else{if(!A.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${A}" when drawing pattern glyph`);[B,Q,O,W]=A.substring(5,A.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<H;U++)for(let k=0;k<$;k++)G.data[4*(U*$+k)]=B,G.data[4*(U*$+k)+1]=Q,G.data[4*(U*$+k)+2]=O,G.data[4*(U*$+k)+3]=E[U][k]*(255*W);q.putImageData(G,0,0),I=(0,l.throwIfFalsy)(b.createPattern(P,null)),R.set(A,I)}b.fillStyle=I,b.fillRect(M,S,x,L)}(d,g,_,m,v,y),!0;let w=o.boxDrawingDefinitions[c];if(w)return function(b,E,M,S,x,L,R){b.strokeStyle=b.fillStyle;for(let[A,I]of Object.entries(E)){let $;b.beginPath(),b.lineWidth=R*Number.parseInt(A),$=typeof I=="function"?I(.15,.15/L*x):I;for(let H of $.split(" ")){let P=H[0],q=f[P];if(!q){console.error(`Could not find drawing instructions for "${P}"`);continue}let G=H.substring(1).split(",");G[0]&&G[1]&&q(b,p(G,x,L,M,S,!0,R))}b.stroke(),b.closePath()}}(d,w,_,m,v,y,T),!0;let F=o.powerlineDefinitions[c];return!!F&&(function(b,E,M,S,x,L,R,A){var I,$;let H=new Path2D;H.rect(M,S,x,L),b.clip(H),b.beginPath();let P=R/12;b.lineWidth=A*P;for(let q of E.d.split(" ")){let G=q[0],B=f[G];if(!B){console.error(`Could not find drawing instructions for "${G}"`);continue}let Q=q.substring(1).split(",");Q[0]&&Q[1]&&B(b,p(Q,x,L,M,S,!1,A,((I=E.leftPadding)!==null&&I!==void 0?I:0)*(P/2),(($=E.rightPadding)!==null&&$!==void 0?$:0)*(P/2)))}E.type===1?(b.strokeStyle=b.fillStyle,b.stroke()):b.fill(),b.closePath()}(d,F,_,m,v,y,C,T),!0)};let i=new Map;function s(d,c,_=0){return Math.max(Math.min(d,c),_)}let f={C:(d,c)=>d.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]),L:(d,c)=>d.lineTo(c[0],c[1]),M:(d,c)=>d.moveTo(c[0],c[1])};function p(d,c,_,m,v,y,C,T=0,D=0){let g=d.map(w=>parseFloat(w)||parseInt(w));if(g.length<2)throw new Error("Too few arguments for instruction");for(let w=0;w<g.length;w+=2)g[w]*=c-T*C-D*C,y&&g[w]!==0&&(g[w]=s(Math.round(g[w]+.5)-.5,c,0)),g[w]+=m+T*C;for(let w=1;w<g.length;w+=2)g[w]*=_,y&&g[w]!==0&&(g[w]=s(Math.round(g[w]+.5)-.5,_,0)),g[w]+=v;return g}},56:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.observeDevicePixelDimensions=void 0;let l=r(859);o.observeDevicePixelDimensions=function(u,i,s){let f=new i.ResizeObserver(p=>{let d=p.find(m=>m.target===u);if(!d)return;if(!("devicePixelContentBoxSize"in d))return f?.disconnect(),void(f=void 0);let c=d.devicePixelContentBoxSize[0].inlineSize,_=d.devicePixelContentBoxSize[0].blockSize;c>0&&_>0&&s(c,_)});try{f.observe(u,{box:["device-pixel-content-box"]})}catch{f.disconnect(),f=void 0}return(0,l.toDisposable)(()=>f?.disconnect())}},374:(h,o)=>{function r(l){return 57508<=l&&l<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.createRenderDimensions=o.excludeFromContrastRatioDemands=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},o.isPowerlineGlyph=r,o.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},o.excludeFromContrastRatioDemands=function(l){return r(l)||function(u){return 9472<=u&&u<=9631}(l)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createSelectionRenderModel=void 0;class r{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,i,s,f=!1){if(this.selectionStart=i,this.selectionEnd=s,!i||!s||i[0]===s[0]&&i[1]===s[1])return void this.clear();let p=i[1]-u.buffer.active.viewportY,d=s[1]-u.buffer.active.viewportY,c=Math.max(p,0),_=Math.min(d,u.rows-1);c>=u.rows||_<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=p,this.viewportEndRow=d,this.viewportCappedStartRow=c,this.viewportCappedEndRow=_,this.startCol=i[0],this.endCol=s[0])}isCellSelected(u,i,s){return!!this.hasSelection&&(s-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?i>=this.startCol&&s>=this.viewportCappedStartRow&&i<this.endCol&&s<=this.viewportCappedEndRow:i<this.startCol&&s>=this.viewportCappedStartRow&&i>=this.endCol&&s<=this.viewportCappedEndRow:s>this.viewportStartRow&&s<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&s===this.viewportStartRow&&i>=this.startCol&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportEndRow&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportStartRow&&i>=this.startCol)}}o.createSelectionRenderModel=function(){return new r}},509:function(h,o,r){var l=this&&this.__decorate||function(F,b,E,M){var S,x=arguments.length,L=x<3?b:M===null?M=Object.getOwnPropertyDescriptor(b,E):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(F,b,E,M);else for(var R=F.length-1;R>=0;R--)(S=F[R])&&(L=(x<3?S(L):x>3?S(b,E,L):S(b,E))||L);return x>3&&L&&Object.defineProperty(b,E,L),L};Object.defineProperty(o,"__esModule",{value:!0}),o.TextureAtlas=void 0;let u=r(237),i=r(860),s=r(374),f=r(160),p=r(345),d=r(485),c=r(385),_=r(147),m=r(855),v=r(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class T{get pages(){return this._pages}constructor(b,E,M){this._document=b,this._config=E,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new d.FourKeyMap,this._cacheMapCombined=new d.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new _.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new p.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new p.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=w(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,s.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let b=new c.IdleTaskQueue;for(let E=33;E<126;E++)b.enqueue(()=>{if(!this._cacheMap.get(E,m.DEFAULT_COLOR,m.DEFAULT_COLOR,m.DEFAULT_EXT)){let M=this._drawToCache(E,m.DEFAULT_COLOR,m.DEFAULT_COLOR,m.DEFAULT_EXT);this._cacheMap.set(E,m.DEFAULT_COLOR,m.DEFAULT_COLOR,m.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(T.maxAtlasPages&&this._pages.length>=Math.max(4,T.maxAtlasPages)){let E=this._pages.filter(I=>2*I.canvas.width<=(T.maxTextureSize||4096)).sort((I,$)=>$.canvas.width!==I.canvas.width?$.canvas.width-I.canvas.width:$.percentageUsed-I.percentageUsed),M=-1,S=0;for(let I=0;I<E.length;I++)if(E[I].canvas.width!==S)M=I,S=E[I].canvas.width;else if(I-M==3)break;let x=E.slice(M,M+4),L=x.map(I=>I.glyphs[0].texturePage).sort((I,$)=>I>$?1:-1),R=this.pages.length-x.length,A=this._mergePages(x,R);A.version++;for(let I=L.length-1;I>=0;I--)this._deletePage(L[I]);this.pages.push(A),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(A.canvas)}let b=new D(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,E){let M=2*b[0].canvas.width,S=new D(this._document,M,b);for(let[x,L]of b.entries()){let R=x*L.canvas.width%M,A=Math.floor(x/2)*L.canvas.height;S.ctx.drawImage(L.canvas,R,A);for(let $ of L.glyphs)$.texturePage=E,$.sizeClipSpace.x=$.size.x/M,$.sizeClipSpace.y=$.size.y/M,$.texturePosition.x+=R,$.texturePosition.y+=A,$.texturePositionClipSpace.x=$.texturePosition.x/M,$.texturePositionClipSpace.y=$.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(L.canvas);let I=this._activePages.indexOf(L);I!==-1&&this._activePages.splice(I,1)}return S}_deletePage(b){this._pages.splice(b,1);for(let E=b;E<this._pages.length;E++){let M=this._pages[E];for(let S of M.glyphs)S.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(b,E,M,S,x){return this._getFromCacheMap(this._cacheMapCombined,b,E,M,S,x)}getRasterizedGlyph(b,E,M,S,x){return this._getFromCacheMap(this._cacheMap,b,E,M,S,x)}_getFromCacheMap(b,E,M,S,x,L=!1){return C=b.get(E,M,S,x),C||(C=this._drawToCache(E,M,S,x,L),b.set(E,M,S,x,C)),C}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,E,M,S){if(this._config.allowTransparency)return f.NULL_COLOR;let x;switch(b){case 16777216:case 33554432:x=this._getColorFromAnsiIndex(E);break;case 50331648:let L=_.AttributeData.toColorRGB(E);x=f.rgba.toColor(L[0],L[1],L[2]);break;default:x=M?f.color.opaque(this._config.colors.foreground):this._config.colors.background}return x}_getForegroundColor(b,E,M,S,x,L,R,A,I,$){let H=this._getMinimumContrastColor(b,E,M,S,x,L,!1,I,A,$);if(H)return H;let P;switch(x){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&L<8&&(L+=8),P=this._getColorFromAnsiIndex(L);break;case 50331648:let q=_.AttributeData.toColorRGB(L);P=f.rgba.toColor(q[0],q[1],q[2]);break;default:P=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=f.color.opaque(P)),A&&(P=f.color.multiplyOpacity(P,u.DIM_OPACITY)),P}_resolveBackgroundRgba(b,E,M){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,E,M,S){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&S&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,E,M,S,x,L,R,A,I,$){if(this._config.minimumContrastRatio===1||$)return;let H=this._getContrastCache(I),P=H.getColor(b,S);if(P!==void 0)return P||void 0;let q=this._resolveBackgroundRgba(E,M,R),G=this._resolveForegroundRgba(x,L,R,A),B=f.rgba.ensureContrastRatio(q,G,this._config.minimumContrastRatio/(I?2:1));if(!B)return void H.setColor(b,S,null);let Q=f.rgba.toColor(B>>24&255,B>>16&255,B>>8&255);return H.setColor(b,S,Q),Q}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,E,M,S,x=!1){let L=typeof b=="number"?String.fromCharCode(b):b,R=Math.min(this._config.deviceCellWidth*Math.max(L.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);let A=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<A&&(this._tmpCanvas.height=A),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=S,this._workAttributeData.isInvisible())return y;let I=!!this._workAttributeData.isBold(),$=!!this._workAttributeData.isInverse(),H=!!this._workAttributeData.isDim(),P=!!this._workAttributeData.isItalic(),q=!!this._workAttributeData.isUnderline(),G=!!this._workAttributeData.isStrikethrough(),B=!!this._workAttributeData.isOverline(),Q=this._workAttributeData.getFgColor(),O=this._workAttributeData.getFgColorMode(),W=this._workAttributeData.getBgColor(),U=this._workAttributeData.getBgColorMode();if($){let ae=Q;Q=W,W=ae;let K=O;O=U,U=K}let k=this._getBackgroundColor(U,W,$,H);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let te=I?this._config.fontWeightBold:this._config.fontWeight,j=P?"italic":"";this._tmpCtx.font=`${j} ${te} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=u.TEXT_BASELINE;let ye=L.length===1&&(0,s.isPowerlineGlyph)(L.charCodeAt(0)),Ae=L.length===1&&(0,s.isRestrictedPowerlineGlyph)(L.charCodeAt(0)),we=this._getForegroundColor(E,U,W,M,O,Q,$,H,I,(0,s.excludeFromContrastRatioDemands)(L.charCodeAt(0)));this._tmpCtx.fillStyle=we.css;let ce=Ae?0:4,xe=!1;this._config.customGlyphs!==!1&&(xe=(0,i.tryDrawCustomChar)(this._tmpCtx,L,ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let It,un=!ye;if(It=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),q){this._tmpCtx.save();let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),K=ae%2==1?.5:0;if(this._tmpCtx.lineWidth=ae,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())un=!1,this._tmpCtx.strokeStyle=`rgb(${_.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{un=!1;let vt=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&vt<8&&(vt+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(vt).css}this._tmpCtx.beginPath();let ie=ce,pe=Math.ceil(ce+this._config.deviceCharHeight)-K-(x?2*ae:0),Ve=pe+ae,it=pe+2*ae;for(let vt=0;vt<It;vt++){this._tmpCtx.save();let Ge=ie+vt*this._config.deviceCellWidth,Rt=ie+(vt+1)*this._config.deviceCellWidth,Zt=Ge+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe),this._tmpCtx.moveTo(Ge,it),this._tmpCtx.lineTo(Rt,it);break;case 3:let Ot=ae<=1?it:Math.ceil(ce+this._config.deviceCharHeight-ae/2)-K,Zn=ae<=1?pe:Math.ceil(ce+this._config.deviceCharHeight+ae/2)-K,vu=new Path2D;vu.rect(Ge,pe,this._config.deviceCellWidth,it-pe),this._tmpCtx.clip(vu),this._tmpCtx.moveTo(Ge-this._config.deviceCellWidth/2,Ve),this._tmpCtx.bezierCurveTo(Ge-this._config.deviceCellWidth/2,Zn,Ge,Zn,Ge,Ve),this._tmpCtx.bezierCurveTo(Ge,Ot,Zt,Ot,Zt,Ve),this._tmpCtx.bezierCurveTo(Zt,Zn,Rt,Zn,Rt,Ve),this._tmpCtx.bezierCurveTo(Rt,Ot,Rt+this._config.deviceCellWidth/2,Ot,Rt+this._config.deviceCellWidth/2,Ve);break;case 4:this._tmpCtx.setLineDash([Math.round(ae),Math.round(ae)]),this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe);break;default:this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!xe&&this._config.fontSize>=12&&!this._config.allowTransparency&&L!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let vt=this._tmpCtx.measureText(L);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in vt&&vt.actualBoundingBoxDescent>0){this._tmpCtx.save();let Ge=new Path2D;Ge.rect(ie,pe-Math.ceil(ae/2),this._config.deviceCellWidth*It,it-pe+Math.ceil(ae/2)),this._tmpCtx.clip(Ge),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=k.css,this._tmpCtx.strokeText(L,ce,ce+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(B){let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),K=ae%2==1?.5:0;this._tmpCtx.lineWidth=ae,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+K),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*It,ce+K),this._tmpCtx.stroke()}if(xe||this._tmpCtx.fillText(L,ce,ce+this._config.deviceCharHeight),L==="_"&&!this._config.allowTransparency){let ae=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),k,we,un);if(ae)for(let K=1;K<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(L,ce,ce+this._config.deviceCharHeight-K),ae=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),k,we,un),ae);K++);}if(G){let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),K=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ae,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+Math.floor(this._config.deviceCharHeight/2)-K),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*It,ce+Math.floor(this._config.deviceCharHeight/2)-K),this._tmpCtx.stroke()}this._tmpCtx.restore();let Gt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),tt;if(tt=this._config.allowTransparency?function(ae){for(let K=0;K<ae.data.length;K+=4)if(ae.data[K+3]>0)return!1;return!0}(Gt):g(Gt,k,we,un),tt)return y;let le=this._findGlyphBoundingBox(Gt,this._workBoundingBox,R,Ae,xe,ce),ve,fe;for(;;){if(this._activePages.length===0){let ae=this._createNewPage();ve=ae,fe=ae.currentRow,fe.height=le.size.y;break}ve=this._activePages[this._activePages.length-1],fe=ve.currentRow;for(let ae of this._activePages)le.size.y<=ae.currentRow.height&&(ve=ae,fe=ae.currentRow);for(let ae=this._activePages.length-1;ae>=0;ae--)for(let K of this._activePages[ae].fixedRows)K.height<=fe.height&&le.size.y<=K.height&&(ve=this._activePages[ae],fe=K);if(fe.y+le.size.y>=ve.canvas.height||fe.height>le.size.y+2){let ae=!1;if(ve.currentRow.y+ve.currentRow.height+le.size.y>=ve.canvas.height){let K;for(let ie of this._activePages)if(ie.currentRow.y+ie.currentRow.height+le.size.y<ie.canvas.height){K=ie;break}if(K)ve=K;else if(T.maxAtlasPages&&this._pages.length>=T.maxAtlasPages&&fe.y+le.size.y<=ve.canvas.height&&fe.height>=le.size.y&&fe.x+le.size.x<=ve.canvas.width)ae=!0;else{let ie=this._createNewPage();ve=ie,fe=ie.currentRow,fe.height=le.size.y,ae=!0}}ae||(ve.currentRow.height>0&&ve.fixedRows.push(ve.currentRow),fe={x:0,y:ve.currentRow.y+ve.currentRow.height,height:le.size.y},ve.fixedRows.push(fe),ve.currentRow={x:0,y:fe.y+fe.height,height:0})}if(fe.x+le.size.x<=ve.canvas.width)break;fe===ve.currentRow?(fe.x=0,fe.y+=fe.height,fe.height=0):ve.fixedRows.splice(ve.fixedRows.indexOf(fe),1)}return le.texturePage=this._pages.indexOf(ve),le.texturePosition.x=fe.x,le.texturePosition.y=fe.y,le.texturePositionClipSpace.x=fe.x/ve.canvas.width,le.texturePositionClipSpace.y=fe.y/ve.canvas.height,le.sizeClipSpace.x/=ve.canvas.width,le.sizeClipSpace.y/=ve.canvas.height,fe.height=Math.max(fe.height,le.size.y),fe.x+=le.size.x,ve.ctx.putImageData(Gt,le.texturePosition.x-this._workBoundingBox.left,le.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,le.size.x,le.size.y),ve.addGlyph(le),ve.version++,le}_findGlyphBoundingBox(b,E,M,S,x,L){E.top=0;let R=S?this._config.deviceCellHeight:this._tmpCanvas.height,A=S?this._config.deviceCellWidth:M,I=!1;for(let $=0;$<R;$++){for(let H=0;H<A;H++){let P=$*this._tmpCanvas.width*4+4*H+3;if(b.data[P]!==0){E.top=$,I=!0;break}}if(I)break}E.left=0,I=!1;for(let $=0;$<L+A;$++){for(let H=0;H<R;H++){let P=H*this._tmpCanvas.width*4+4*$+3;if(b.data[P]!==0){E.left=$,I=!0;break}}if(I)break}E.right=A,I=!1;for(let $=L+A-1;$>=L;$--){for(let H=0;H<R;H++){let P=H*this._tmpCanvas.width*4+4*$+3;if(b.data[P]!==0){E.right=$,I=!0;break}}if(I)break}E.bottom=R,I=!1;for(let $=R-1;$>=0;$--){for(let H=0;H<A;H++){let P=$*this._tmpCanvas.width*4+4*H+3;if(b.data[P]!==0){E.bottom=$,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+L+(S||x?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+L+(S||x?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}o.TextureAtlas=T,l([v.traceCall],T.prototype,"_drawToCache",null);class D{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,E,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let S of M)this._glyphs.push(...S.glyphs),this._usedPixels+=S._usedPixels;this.canvas=w(b,E,E),this.ctx=(0,s.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(F,b,E,M){let S=b.rgba>>>24,x=b.rgba>>>16&255,L=b.rgba>>>8&255,R=E.rgba>>>24,A=E.rgba>>>16&255,I=E.rgba>>>8&255,$=Math.floor((Math.abs(S-R)+Math.abs(x-A)+Math.abs(L-I))/12),H=!0;for(let P=0;P<F.data.length;P+=4)F.data[P]===S&&F.data[P+1]===x&&F.data[P+2]===L||M&&Math.abs(F.data[P]-S)+Math.abs(F.data[P+1]-x)+Math.abs(F.data[P+2]-L)<$?F.data[P+3]=0:H=!1;return H}function w(F,b,E){let M=F.createElement("canvas");return M.width=b,M.height=E,M}},160:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;let l=r(399),u=0,i=0,s=0,f=0;var p,d,c,_,m;function v(C){let T=C.toString(16);return T.length<2?"0"+T:T}function y(C,T){return C<T?(T+.05)/(C+.05):(C+.05)/(T+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(T,D,g,w){return w!==void 0?`#${v(T)}${v(D)}${v(g)}${v(w)}`:`#${v(T)}${v(D)}${v(g)}`},C.toRgba=function(T,D,g,w=255){return(T<<24|D<<16|g<<8|w)>>>0}}(p||(o.channels=p={})),function(C){function T(D,g){return f=Math.round(255*g),[u,i,s]=m.toChannels(D.rgba),{css:p.toCss(u,i,s,f),rgba:p.toRgba(u,i,s,f)}}C.blend=function(D,g){if(f=(255&g.rgba)/255,f===1)return{css:g.css,rgba:g.rgba};let w=g.rgba>>24&255,F=g.rgba>>16&255,b=g.rgba>>8&255,E=D.rgba>>24&255,M=D.rgba>>16&255,S=D.rgba>>8&255;return u=E+Math.round((w-E)*f),i=M+Math.round((F-M)*f),s=S+Math.round((b-S)*f),{css:p.toCss(u,i,s),rgba:p.toRgba(u,i,s)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,w){let F=m.ensureContrastRatio(D.rgba,g.rgba,w);if(F)return m.toColor(F>>24&255,F>>16&255,F>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,i,s]=m.toChannels(g),{css:p.toCss(u,i,s),rgba:g}},C.opacity=T,C.multiplyOpacity=function(D,g){return f=255&D.rgba,T(D,f*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(d||(o.color=d={})),function(C){let T,D;if(!l.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let w=g.getContext("2d",{willReadFrequently:!0});w&&(T=w,T.globalCompositeOperation="copy",D=T.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),m.toColor(u,i,s);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),f=parseInt(g.slice(4,5).repeat(2),16),m.toColor(u,i,s,f);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let w=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return u=parseInt(w[1]),i=parseInt(w[2]),s=parseInt(w[3]),f=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),m.toColor(u,i,s,f);if(!T||!D)throw new Error("css.toColor: Unsupported css format");if(T.fillStyle=D,T.fillStyle=g,typeof T.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(T.fillRect(0,0,1,1),[u,i,s,f]=T.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(u,i,s,f),css:g}}}(c||(o.css=c={})),function(C){function T(D,g,w){let F=D/255,b=g/255,E=w/255;return .2126*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}C.relativeLuminance=function(D){return T(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=T}(_||(o.rgb=_={})),function(C){function T(g,w,F){let b=g>>24&255,E=g>>16&255,M=g>>8&255,S=w>>24&255,x=w>>16&255,L=w>>8&255,R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));for(;R<F&&(S>0||x>0||L>0);)S-=Math.max(0,Math.ceil(.1*S)),x-=Math.max(0,Math.ceil(.1*x)),L-=Math.max(0,Math.ceil(.1*L)),R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));return(S<<24|x<<16|L<<8|255)>>>0}function D(g,w,F){let b=g>>24&255,E=g>>16&255,M=g>>8&255,S=w>>24&255,x=w>>16&255,L=w>>8&255,R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));for(;R<F&&(S<255||x<255||L<255);)S=Math.min(255,S+Math.ceil(.1*(255-S))),x=Math.min(255,x+Math.ceil(.1*(255-x))),L=Math.min(255,L+Math.ceil(.1*(255-L))),R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));return(S<<24|x<<16|L<<8|255)>>>0}C.ensureContrastRatio=function(g,w,F){let b=_.relativeLuminance(g>>8),E=_.relativeLuminance(w>>8);if(y(b,E)<F){if(E<b){let x=T(g,w,F),L=y(b,_.relativeLuminance(x>>8));if(L<F){let R=D(g,w,F);return L>y(b,_.relativeLuminance(R>>8))?x:R}return x}let M=D(g,w,F),S=y(b,_.relativeLuminance(M>>8));if(S<F){let x=T(g,w,F);return S>y(b,_.relativeLuminance(x>>8))?M:x}return M}},C.reduceLuminance=T,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,w,F,b){return{css:p.toCss(g,w,F,b),rgba:p.toRgba(g,w,F,b)}}}(m||(o.rgba=m={})),o.toPaddedHex=v,o.contrastRatio=y},345:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===r)return void this._listeners.splice(l,1)}}})),this._event}fire(r,l){let u=[];for(let i=0;i<this._listeners.length;i++)u.push(this._listeners[i]);for(let i=0;i<u.length;i++)u[i].call(void 0,r,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(r,l){return r(u=>l.fire(u))}},859:(h,o)=>{function r(l){for(let u of l)u.dispose();l.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){let u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var u;this._isDisposed||l===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},o.toDisposable=function(l){return{dispose:l}},o.disposeArray=r,o.getDisposeArrayDisposable=function(l){return{dispose:()=>r(l)}}},485:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(u,i,s){this._data[u]||(this._data[u]={}),this._data[u][i]=s}get(u,i){return this._data[u]?this._data[u][i]:void 0}clear(){this._data={}}}o.TwoKeyMap=r,o.FourKeyMap=class{constructor(){this._data=new r}set(l,u,i,s,f){this._data.get(l,u)||this._data.set(l,u,new r),this._data.get(l,u).set(i,s,f)}get(l,u,i,s){var f;return(f=this._data.get(l,u))===null||f===void 0?void 0:f.get(i,s)}clear(){this._data.clear()}}},399:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof navigator>"u";let r=o.isNode?"node":navigator.userAgent,l=o.isNode?"node":navigator.platform;o.isFirefox=r.includes("Firefox"),o.isLegacyEdge=r.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(r),o.getSafariVersion=function(){if(!o.isSafari)return 0;let u=r.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),o.isIpad=l==="iPad",o.isIphone=l==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),o.isLinux=l.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(r)},385:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;let l=r(399);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let p=0,d=0,c=f.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),d=Math.max(p,d),_=f.timeRemaining(),1.5*d>_)return c-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-p))}ms`),void this._start();c=_}this.clear()}}class i extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let p=Date.now()+f;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}o.PriorityTaskQueue=i,o.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(s){return requestIdleCallback(s)}_cancelCallback(s){cancelIdleCallback(s)}}:i,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(s){this._queue.clear(),this._queue.enqueue(s)}flush(){this._queue.flush()}}},147:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(i){return[i>>>16&255,i>>>8&255,255&i]}static fromColorRGB(i){return(255&i[0])<<16|(255&i[1])<<8|255&i[2]}clone(){let i=new r;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}o.AttributeData=r;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(i){this._ext&=-67108864,this._ext|=67108863&i}get urlId(){return this._urlId}set urlId(i){this._urlId=i}constructor(i=0,s=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=s}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=l},782:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;let l=r(133),u=r(855),i=r(147);class s extends i.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new i.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let d=new s;return d.setFromCharData(p),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(p[u.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(p[u.CHAR_DATA_CHAR_INDEX].length===2){let c=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let _=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(c-55296)+_-56320+65536|p[u.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[u.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=p[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=s},855:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},133:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},o.utf32ToString=function(r,l=0,u=r.length){let i="";for(let s=l;s<u;++s){let f=r[s];f>65535?(f-=65536,i+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):i+=String.fromCharCode(f)}return i},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,l){let u=r.length;if(!u)return 0;let i=0,s=0;if(this._interim){let f=r.charCodeAt(s++);56320<=f&&f<=57343?l[i++]=1024*(this._interim-55296)+f-56320+65536:(l[i++]=this._interim,l[i++]=f),this._interim=0}for(let f=s;f<u;++f){let p=r.charCodeAt(f);if(55296<=p&&p<=56319){if(++f>=u)return this._interim=p,i;let d=r.charCodeAt(f);56320<=d&&d<=57343?l[i++]=1024*(p-55296)+d-56320+65536:(l[i++]=p,l[i++]=d)}else p!==65279&&(l[i++]=p)}return i}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,l){let u=r.length;if(!u)return 0;let i,s,f,p,d=0,c=0,_=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let T,D=0;for(;(T=63&this.interim[++D])&&D<4;)C<<=6,C|=T;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=g-D;for(;_<w;){if(_>=u)return 0;if(T=r[_++],(192&T)!=128){_--,y=!0;break}this.interim[D++]=T,C<<=6,C|=63&T}y||(g===2?C<128?_--:l[d++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(l[d++]=C):C<65536||C>1114111||(l[d++]=C)),this.interim.fill(0)}let m=u-4,v=_;for(;v<u;){for(;!(!(v<m)||128&(i=r[v])||128&(s=r[v+1])||128&(f=r[v+2])||128&(p=r[v+3]));)l[d++]=i,l[d++]=s,l[d++]=f,l[d++]=p,v+=4;if(i=r[v++],i<128)l[d++]=i;else if((224&i)==192){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(c=(31&i)<<6|63&s,c<128){v--;continue}l[d++]=c}else if((240&i)==224){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[v++],(192&f)!=128){v--;continue}if(c=(15&i)<<12|(63&s)<<6|63&f,c<2048||c>=55296&&c<=57343||c===65279)continue;l[d++]=c}else if((248&i)==240){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[v++],(192&f)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=f,d;if(p=r[v++],(192&p)!=128){v--;continue}if(c=(7&i)<<18|(63&s)<<12|(63&f)<<6|63&p,c<65536||c>1114111)continue;l[d++]=c}}return d}}},776:function(h,o,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,T=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,m,T):y(_,m))||T);return C>3&&T&&Object.defineProperty(_,m,T),T},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;let i=r(859),s=r(97),f={trace:s.LogLevelEnum.TRACE,debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},p,d=o.LogService=class extends i.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let _=0;_<c.length;_++)typeof c[_]=="function"&&(c[_]=c[_]())}_log(c,_,m){this._evalLazyOptionalParams(m),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...m)}trace(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.TRACE&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.trace.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}debug(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.DEBUG&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.debug.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}info(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.INFO&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.info.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.info,c,_)}warn(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.WARN&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.warn.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.warn,c,_)}error(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.ERROR&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.error.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.error,c,_)}};o.LogService=d=l([u(0,s.IOptionsService)],d),o.setTraceLogger=function(c){p=c},o.traceCall=function(c,_,m){if(typeof m.value!="function")throw new Error("not supported");let v=m.value;m.value=function(...y){if(p.logLevel!==s.LogLevelEnum.TRACE)return v.apply(this,y);p.trace(`GlyphRenderer#${v.name}(${y.map(T=>JSON.stringify(T)).join(", ")})`);let C=v.apply(this,y);return p.trace(`GlyphRenderer#${v.name} return`,C),C}}},726:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;let r="di$target",l="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(u){return u[l]||[]},o.createDecorator=function(u){if(o.serviceRegistry.has(u))return o.serviceRegistry.get(u);let i=function(s,f,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,c,_){c[r]===c?c[l].push({id:d,index:_}):(c[l]=[{id:d,index:_}],c[r]=c)})(i,s,p)};return i.toString=()=>u,o.serviceRegistry.set(u,i),i}},97:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;let l=r(726);var u;o.IBufferService=(0,l.createDecorator)("BufferService"),o.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),o.ICoreService=(0,l.createDecorator)("CoreService"),o.ICharsetService=(0,l.createDecorator)("CharsetService"),o.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(i){i[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.OFF=5]="OFF"}(u||(o.LogLevelEnum=u={})),o.ILogService=(0,l.createDecorator)("LogService"),o.IOptionsService=(0,l.createDecorator)("OptionsService"),o.IOscLinkService=(0,l.createDecorator)("OscLinkService"),o.IUnicodeService=(0,l.createDecorator)("UnicodeService"),o.IDecorationService=(0,l.createDecorator)("DecorationService")}},t={};function n(h){var o=t[h];if(o!==void 0)return o.exports;var r=t[h]={exports:{}};return e[h].call(r.exports,r,r.exports,n),r.exports}var a={};return(()=>{var h=a;Object.defineProperty(h,"__esModule",{value:!0}),h.WebglAddon=void 0;let o=n(345),r=n(859),l=n(399),u=n(666),i=n(776);class s extends r.Disposable{constructor(p){if(l.isSafari&&(0,l.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=p,this._onChangeTextureAtlas=this.register(new o.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new o.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new o.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new o.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(p){let d=p._core;if(!p.element)return void this.register(d.onWillOpen(()=>this.activate(p)));this._terminal=p;let c=d.coreService,_=d.optionsService,m=d,v=m._renderService,y=m._characterJoinerService,C=m._charSizeService,T=m._coreBrowserService,D=m._decorationService,g=m._logService,w=m._themeService;(0,i.setTraceLogger)(g),this._renderer=this.register(new u.WebglRenderer(p,y,C,T,c,D,_,w,this._preserveDrawingBuffer)),this.register((0,o.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,o.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,o.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,o.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),v.setRenderer(this._renderer),this.register((0,r.toDisposable)(()=>{let F=this._terminal._core._renderService;F.setRenderer(this._terminal._core._createRenderer()),F.handleResize(p.cols,p.rows)}))}get textureAtlas(){var p;return(p=this._renderer)===null||p===void 0?void 0:p.textureAtlas}clearTextureAtlas(){var p;(p=this._renderer)===null||p===void 0||p.clearTextureAtlas()}}h.WebglAddon=s})(),a})())});var Zk=Tt((Tg,fT)=>{(function(e,t){typeof Tg=="object"&&typeof fT=="object"?fT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Tg=="object"?Tg.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkComputer=o.WebLinkProvider=void 0,o.WebLinkProvider=class{constructor(l,u,i,s={}){this._terminal=l,this._regex=u,this._handler=i,this._options=s}provideLinks(l,u){let i=r.computeLink(l,this._regex,this._terminal,this._handler);u(this._addCallbacks(i))}_addCallbacks(l){return l.map(u=>(u.leave=this._options.leave,u.hover=(i,s)=>{if(this._options.hover){let{range:f}=u;this._options.hover(i,s,f)}},u))}};class r{static computeLink(u,i,s,f){let p=new RegExp(i.source,(i.flags||"")+"g"),[d,c]=r._getWindowedLineStrings(u-1,s),_=d.join(""),m,v=[];for(;m=p.exec(_);){let y=m[0];try{let F=new URL(y),b=decodeURI(F.toString());if(y!==b&&y+"/"!==b)continue}catch{continue}let[C,T]=r._mapStrIdx(s,c,0,m.index),[D,g]=r._mapStrIdx(s,C,T,y.length);if(C===-1||T===-1||D===-1||g===-1)continue;let w={start:{x:T+1,y:C+1},end:{x:g,y:D+1}};v.push({range:w,text:y,activate:f})}return v}static _getWindowedLineStrings(u,i){let s,f=u,p=u,d=0,c="",_=[];if(s=i.buffer.active.getLine(u)){let m=s.translateToString(!0);if(s.isWrapped&&m[0]!==" "){for(d=0;(s=i.buffer.active.getLine(--f))&&d<2048&&(c=s.translateToString(!0),d+=c.length,_.push(c),s.isWrapped&&c.indexOf(" ")===-1););_.reverse()}for(_.push(m),d=0;(s=i.buffer.active.getLine(++p))&&s.isWrapped&&d<2048&&(c=s.translateToString(!0),d+=c.length,_.push(c),c.indexOf(" ")===-1););}return[_,f]}static _mapStrIdx(u,i,s,f){let p=u.buffer.active,d=p.getNullCell(),c=s;for(;f;){let _=p.getLine(i);if(!_)return[-1,-1];for(let m=c;m<_.length;++m){_.getCell(m,d);let v=d.getChars();if(d.getWidth()&&(f-=v.length||1,m===_.length-1&&v==="")){let y=p.getLine(i+1);y&&y.isWrapped&&(y.getCell(0,d),d.getWidth()===2&&(f+=1))}if(f<0)return[i,m]}i++,c=0}return[i,c]}}o.LinkComputer=r}},t={};function n(h){var o=t[h];if(o!==void 0)return o.exports;var r=t[h]={exports:{}};return e[h](r,r.exports,n),r.exports}var a={};return(()=>{var h=a;Object.defineProperty(h,"__esModule",{value:!0}),h.WebLinksAddon=void 0;let o=n(6),r=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function l(u,i){let s=window.open();if(s){try{s.opener=null}catch{}s.location.href=i}else console.warn("Opening link blocked as opener could not be cleared")}h.WebLinksAddon=class{constructor(u=l,i={}){this._handler=u,this._options=i}activate(u){this._terminal=u;let i=this._options,s=i.urlRegex||r;this._linkProvider=this._terminal.registerLinkProvider(new o.WebLinkProvider(this._terminal,s,this._handler,i))}dispose(){var u;(u=this._linkProvider)===null||u===void 0||u.dispose()}}})(),a})())});var i2=Tt((xg,_T)=>{(function(e,t){if(typeof xg=="object"&&typeof _T=="object")_T.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var a in n)(typeof xg=="object"?xg:e)[a]=n[a]}})(self,()=>(()=>{"use strict";var e={4567:function(h,o,r){var l=this&&this.__decorate||function(v,y,C,T){var D,g=arguments.length,w=g<3?y:T===null?T=Object.getOwnPropertyDescriptor(y,C):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(v,y,C,T);else for(var F=v.length-1;F>=0;F--)(D=v[F])&&(w=(g<3?D(w):g>3?D(y,C,w):D(y,C))||w);return g>3&&w&&Object.defineProperty(y,C,w),w},u=this&&this.__param||function(v,y){return function(C,T){y(C,T,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;let i=r(9042),s=r(6114),f=r(9924),p=r(844),d=r(5596),c=r(4725),_=r(3656),m=o.AccessibilityManager=class extends p.Disposable{constructor(v,y){super(),this._terminal=v,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new f.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new d.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,_.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,p.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(v){for(let y=0;y<v;y++)this._handleChar(" ")}_handleChar(v){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==v&&(this._charsToAnnounce+=v):this._charsToAnnounce+=v,v===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=i.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&this._liveRegion.remove()}_handleKey(v){this._clearLiveRegion(),/\p{Control}/u.test(v)||this._charsToConsume.push(v)}_refreshRows(v,y){this._liveRegionDebouncer.refresh(v,y,this._terminal.rows)}_renderRows(v,y){let C=this._terminal.buffer,T=C.lines.length.toString();for(let D=v;D<=y;D++){let g=C.translateBufferLineToString(C.ydisp+D,!0),w=(C.ydisp+D+1).toString(),F=this._rowElements[D];F&&(g.length===0?F.innerText="\xA0":F.textContent=g,F.setAttribute("aria-posinset",w),F.setAttribute("aria-setsize",T))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(v,y){let C=v.target,T=this._rowElements[y===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||v.relatedTarget!==T)return;let D,g;if(y===0?(D=C,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=C,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){let w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{let w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),v.preventDefault(),v.stopImmediatePropagation()}_handleResize(v){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>v;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let v=document.createElement("div");return v.setAttribute("role","listitem"),v.tabIndex=-1,this._refreshRowDimensions(v),v}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let v=0;v<this._terminal.rows;v++)this._refreshRowDimensions(this._rowElements[v])}}_refreshRowDimensions(v){v.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=m=l([u(1,c.IRenderService)],m)},3614:(h,o)=>{function r(s){return s.replace(/\r?\n/g,"\r")}function l(s,f){return f?"\x1B[200~"+s+"\x1B[201~":s}function u(s,f,p,d){s=l(s=r(s),p.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),p.triggerDataEvent(s,!0),f.value=""}function i(s,f,p){let d=p.getBoundingClientRect(),c=s.clientX-d.left-10,_=s.clientY-d.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${c}px`,f.style.top=`${_}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=r,o.bracketTextForPaste=l,o.copyHandler=function(s,f){s.clipboardData&&s.clipboardData.setData("text/plain",f.selectionText),s.preventDefault()},o.handlePasteEvent=function(s,f,p,d){s.stopPropagation(),s.clipboardData&&u(s.clipboardData.getData("text/plain"),f,p,d)},o.paste=u,o.moveTextAreaUnderMouseCursor=i,o.rightClickHandler=function(s,f,p,d,c){i(s,f,p),c&&d.rightClickSelect(s),f.value=d.selectionText,f.select()}},7239:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;let l=r(1505);o.ColorContrastCache=class{constructor(){this._color=new l.TwoKeyMap,this._css=new l.TwoKeyMap}setCss(u,i,s){this._css.set(u,i,s)}getCss(u,i){return this._css.get(u,i)}setColor(u,i,s){this._color.set(u,i,s)}getColor(u,i){return this._color.get(u,i)}clear(){this._color.clear(),this._css.clear()}}},3656:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(r,l,u,i){r.addEventListener(l,u,i);let s=!1;return{dispose:()=>{s||(s=!0,r.removeEventListener(l,u,i))}}}},6465:function(h,o,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,T=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,m,T):y(_,m))||T);return C>3&&T&&Object.defineProperty(_,m,T),T},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier2=void 0;let i=r(3656),s=r(8460),f=r(844),p=r(2585),d=o.Linkifier2=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new s.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new s.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{let _=this._linkProviders.indexOf(c);_!==-1&&this._linkProviders.splice(_,1)}}}attachToDom(c,_,m){this._element=c,this._mouseService=_,this._renderService=m,this.register((0,i.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,i.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,i.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,i.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;let _=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!_)return;this._isMouseOut=!1;let m=c.composedPath();for(let v=0;v<m.length;v++){let y=m[v];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&_.x===this._lastBufferCell.x&&_.y===this._lastBufferCell.y||(this._handleHover(_),this._lastBufferCell=_)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,_){var m,v;this._activeProviderReplies&&_||((m=this._activeProviderReplies)===null||m===void 0||m.forEach(C=>{C?.forEach(T=>{T.link.dispose&&T.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let y=!1;for(let[C,T]of this._linkProviders.entries())_?!((v=this._activeProviderReplies)===null||v===void 0)&&v.get(C)&&(y=this._checkLinkProviderResult(C,c,y)):T.provideLinks(c.y,D=>{var g,w;if(this._isMouseOut)return;let F=D?.map(b=>({link:b}));(g=this._activeProviderReplies)===null||g===void 0||g.set(C,F),y=this._checkLinkProviderResult(C,c,y),((w=this._activeProviderReplies)===null||w===void 0?void 0:w.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,_){let m=new Set;for(let v=0;v<_.size;v++){let y=_.get(v);if(y)for(let C=0;C<y.length;C++){let T=y[C],D=T.link.range.start.y<c?0:T.link.range.start.x,g=T.link.range.end.y>c?this._bufferService.cols:T.link.range.end.x;for(let w=D;w<=g;w++){if(m.has(w)){y.splice(C--,1);break}m.add(w)}}}}_checkLinkProviderResult(c,_,m){var v;if(!this._activeProviderReplies)return m;let y=this._activeProviderReplies.get(c),C=!1;for(let T=0;T<c;T++)this._activeProviderReplies.has(T)&&!this._activeProviderReplies.get(T)||(C=!0);if(!C&&y){let T=y.find(D=>this._linkAtPosition(D.link,_));T&&(m=!0,this._handleNewLink(T))}if(this._activeProviderReplies.size===this._linkProviders.length&&!m)for(let T=0;T<this._activeProviderReplies.size;T++){let D=(v=this._activeProviderReplies.get(T))===null||v===void 0?void 0:v.find(g=>this._linkAtPosition(g.link,_));if(D){m=!0,this._handleNewLink(D);break}}return m}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;let _=this._positionFromMouseEvent(c,this._element,this._mouseService);_&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,_)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,_){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!_||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=_)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(c.link,_)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var m,v;return(v=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||v===void 0?void 0:v.decorations.pointerCursor},set:m=>{var v,y;!((v=this._currentLink)===null||v===void 0)&&v.state&&this._currentLink.state.decorations.pointerCursor!==m&&(this._currentLink.state.decorations.pointerCursor=m,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",m)))}},underline:{get:()=>{var m,v;return(v=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||v===void 0?void 0:v.decorations.underline},set:m=>{var v,y,C;!((v=this._currentLink)===null||v===void 0)&&v.state&&((C=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||C===void 0?void 0:C.decorations.underline)!==m&&(this._currentLink.state.decorations.underline=m,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,m))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(m=>{if(!this._currentLink)return;let v=m.start===0?0:m.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+m.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(v,y),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(c,_,m){var v;!((v=this._currentLink)===null||v===void 0)&&v.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),_.hover&&_.hover(m,_.text)}_fireUnderlineEvent(c,_){let m=c.range,v=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(m.start.x-1,m.start.y-v-1,m.end.x,m.end.y-v-1,void 0);(_?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(c,_,m){var v;!((v=this._currentLink)===null||v===void 0)&&v.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),_.leave&&_.leave(m,_.text)}_linkAtPosition(c,_){let m=c.range.start.y*this._bufferService.cols+c.range.start.x,v=c.range.end.y*this._bufferService.cols+c.range.end.x,y=_.y*this._bufferService.cols+_.x;return m<=y&&y<=v}_positionFromMouseEvent(c,_,m){let v=m.getCoords(c,_,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,_,m,v,y){return{x1:c,y1:_,x2:m,y2:v,cols:this._bufferService.cols,fg:y}}};o.Linkifier2=d=l([u(0,p.IBufferService)],d)},9042:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(h,o,r){var l=this&&this.__decorate||function(d,c,_,m){var v,y=arguments.length,C=y<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,c,_,m);else for(var T=d.length-1;T>=0;T--)(v=d[T])&&(C=(y<3?v(C):y>3?v(c,_,C):v(c,_))||C);return y>3&&C&&Object.defineProperty(c,_,C),C},u=this&&this.__param||function(d,c){return function(_,m){c(_,m,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;let i=r(511),s=r(2585),f=o.OscLinkProvider=class{constructor(d,c,_){this._bufferService=d,this._optionsService=c,this._oscLinkService=_}provideLinks(d,c){var _;let m=this._bufferService.buffer.lines.get(d-1);if(!m)return void c(void 0);let v=[],y=this._optionsService.rawOptions.linkHandler,C=new i.CellData,T=m.getTrimmedLength(),D=-1,g=-1,w=!1;for(let F=0;F<T;F++)if(g!==-1||m.hasContent(F)){if(m.loadCell(F,C),C.hasExtendedAttrs()&&C.extended.urlId){if(g===-1){g=F,D=C.extended.urlId;continue}w=C.extended.urlId!==D}else g!==-1&&(w=!0);if(w||g!==-1&&F===T-1){let b=(_=this._oscLinkService.getLinkData(D))===null||_===void 0?void 0:_.uri;if(b){let E={start:{x:g+1,y:d},end:{x:F+(w||F!==T-1?0:1),y:d}},M=!1;if(!y?.allowNonHttpProtocols)try{let S=new URL(b);["http:","https:"].includes(S.protocol)||(M=!0)}catch{M=!0}M||v.push({text:b,range:E,activate:(S,x)=>y?y.activate(S,x,E):p(0,x),hover:(S,x)=>{var L;return(L=y?.hover)===null||L===void 0?void 0:L.call(y,S,x,E)},leave:(S,x)=>{var L;return(L=y?.leave)===null||L===void 0?void 0:L.call(y,S,x,E)}})}w=!1,C.hasExtendedAttrs()&&C.extended.urlId?(g=F,D=C.extended.urlId):(g=-1,D=-1)}}c(v)}};function p(d,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){let _=window.open();if(_){try{_.opener=null}catch{}_.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=f=l([u(0,s.IBufferService),u(1,s.IOptionsService),u(2,s.IOscLinkService)],f)},6193:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(r,l){this._parentWindow=r,this._renderCallback=l,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(r){return this._refreshCallbacks.push(r),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(r,l,u){this._rowCount=u,r=r!==void 0?r:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let r=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,l),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let r of this._refreshCallbacks)r(0);this._refreshCallbacks=[]}}},5596:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenDprMonitor=void 0;let l=r(844);class u extends l.Disposable{constructor(s){super(),this._parentWindow=s,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,l.toDisposable)(()=>{this.clearListener()}))}setListener(s){this._listener&&this.clearListener(),this._listener=s,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var s;this._outerListener&&((s=this._resolutionMediaMatchList)===null||s===void 0||s.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}o.ScreenDprMonitor=u},3236:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;let l=r(3614),u=r(3656),i=r(6465),s=r(9042),f=r(3730),p=r(1680),d=r(3107),c=r(5744),_=r(2950),m=r(1296),v=r(428),y=r(4269),C=r(5114),T=r(8934),D=r(3230),g=r(9312),w=r(4725),F=r(6731),b=r(8055),E=r(8969),M=r(8460),S=r(844),x=r(6114),L=r(8437),R=r(2584),A=r(7399),I=r(5941),$=r(9074),H=r(2585),P=r(5435),q=r(4567),G=typeof window<"u"?window.document:null;class B extends E.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=x,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new S.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(i.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance($.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((W,U)=>this.refresh(W,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(W=>this._reportWindowsOptions(W))),this.register(this._inputHandler.onColor(W=>this._handleColorEvent(W))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(W=>this._afterResize(W.cols,W.rows))),this.register((0,S.toDisposable)(()=>{var W,U;this._customKeyEventHandler=void 0,(U=(W=this.element)===null||W===void 0?void 0:W.parentNode)===null||U===void 0||U.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let W of O){let U,k="";switch(W.index){case 256:U="foreground",k="10";break;case 257:U="background",k="11";break;case 258:U="cursor",k="12";break;default:U="ansi",k="4;"+W.index}switch(W.type){case 0:let te=b.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[W.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${R.C0.ESC}]${k};${(0,I.toRgbString)(te)}${R.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(j=>j.ansi[W.index]=b.rgba.toColor(...W.color));else{let j=U;this._themeService.modifyColors(ye=>ye[j]=b.rgba.toColor(...W.color))}break;case 2:this._themeService.restoreColor(W.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,W=this.buffer.lines.get(O);if(!W)return;let U=Math.min(this.buffer.x,this.cols-1),k=this._renderService.dimensions.css.cell.height,te=W.getWidth(U),j=this._renderService.dimensions.css.cell.width*te,ye=this.buffer.y*this._renderService.dimensions.css.cell.height,Ae=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ae+"px",this.textarea.style.top=ye+"px",this.textarea.style.width=j+"px",this.textarea.style.height=k+"px",this.textarea.style.lineHeight=k+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",W=>{this.hasSelection()&&(0,l.copyHandler)(W,this._selectionService)}));let O=W=>(0,l.handlePasteEvent)(W,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,u.addDisposableDomListener)(this.element,"paste",O)),x.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",W=>{W.button===2&&(0,l.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",W=>{(0,l.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),x.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",W=>{W.button===1&&(0,l.moveTextAreaUnderMouseCursor)(W,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){var W;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let U=G.createDocumentFragment();this._viewportElement=G.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),U.appendChild(this._viewportElement),this._viewportScrollArea=G.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=G.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=G.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),U.appendChild(this.screenElement),this.textarea=G.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",s.promptLabel),x.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(W=this._document.defaultView)!==null&&W!==void 0?W:window),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",k=>this._handleTextAreaFocus(k))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(v.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(F.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(k=>this._onRender.fire(k))),this.onResize(k=>this._renderService.resize(k.cols,k.rows)),this._compositionView=G.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(U);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(T.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(p.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(k=>this._renderService.handleSelectionChanged(k.start,k.end,k.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(k=>{this.textarea.value=k,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(k=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",k=>this._selectionService.handleMouseDown(k))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",k=>this._handleScreenReaderModeOptionChange(k))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",k=>{!this._overviewRulerRenderer&&k&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(m.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let O=this,W=this.element;function U(j){let ye=O._mouseService.getMouseReportCoords(j,O.screenElement);if(!ye)return!1;let Ae,we;switch(j.overrideType||j.type){case"mousemove":we=32,j.buttons===void 0?(Ae=3,j.button!==void 0&&(Ae=j.button<3?j.button:3)):Ae=1&j.buttons?0:4&j.buttons?1:2&j.buttons?2:3;break;case"mouseup":we=0,Ae=j.button<3?j.button:3;break;case"mousedown":we=1,Ae=j.button<3?j.button:3;break;case"wheel":if(O.viewport.getLinesScrolled(j)===0)return!1;we=j.deltaY<0?0:1,Ae=4;break;default:return!1}return!(we===void 0||Ae===void 0||Ae>4)&&O.coreMouseService.triggerMouseEvent({col:ye.col,row:ye.row,x:ye.x,y:ye.y,button:Ae,action:we,ctrl:j.ctrlKey,alt:j.altKey,shift:j.shiftKey})}let k={mouseup:null,wheel:null,mousedrag:null,mousemove:null},te={mouseup:j=>(U(j),j.buttons||(this._document.removeEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.removeEventListener("mousemove",k.mousedrag)),this.cancel(j)),wheel:j=>(U(j),this.cancel(j,!0)),mousedrag:j=>{j.buttons&&U(j)},mousemove:j=>{j.buttons||U(j)}};this.register(this.coreMouseService.onProtocolChange(j=>{j?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(j)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&j?k.mousemove||(W.addEventListener("mousemove",te.mousemove),k.mousemove=te.mousemove):(W.removeEventListener("mousemove",k.mousemove),k.mousemove=null),16&j?k.wheel||(W.addEventListener("wheel",te.wheel,{passive:!1}),k.wheel=te.wheel):(W.removeEventListener("wheel",k.wheel),k.wheel=null),2&j?k.mouseup||(W.addEventListener("mouseup",te.mouseup),k.mouseup=te.mouseup):(this._document.removeEventListener("mouseup",k.mouseup),W.removeEventListener("mouseup",k.mouseup),k.mouseup=null),4&j?k.mousedrag||(k.mousedrag=te.mousedrag):(this._document.removeEventListener("mousemove",k.mousedrag),k.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(W,"mousedown",j=>{if(j.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(j))return U(j),k.mouseup&&this._document.addEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.addEventListener("mousemove",k.mousedrag),this.cancel(j)})),this.register((0,u.addDisposableDomListener)(W,"wheel",j=>{if(!k.wheel){if(!this.buffer.hasScrollback){let ye=this.viewport.getLinesScrolled(j);if(ye===0)return;let Ae=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(j.deltaY<0?"A":"B"),we="";for(let ce=0;ce<Math.abs(ye);ce++)we+=Ae;return this.coreService.triggerDataEvent(we,!0),this.cancel(j,!0)}return this.viewport.handleWheel(j)?this.cancel(j):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(W,"touchstart",j=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(j),this.cancel(j)},{passive:!0})),this.register((0,u.addDisposableDomListener)(W,"touchmove",j=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(j)?void 0:this.cancel(j)},{passive:!1}))}refresh(O,W){var U;(U=this._renderService)===null||U===void 0||U.refreshRows(O,W)}updateCursorStyle(O){var W;!((W=this._selectionService)===null||W===void 0)&&W.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,W,U=0){var k;U===1?(super.scrollLines(O,W,U),this.refresh(0,this.rows-1)):(k=this.viewport)===null||k===void 0||k.scrollLines(O)}paste(O){(0,l.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}registerLinkProvider(O){return this.linkifier2.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let W=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),W}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,W,U){this._selectionService.setSelection(O,W,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()}selectAll(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()}selectLines(O,W){var U;(U=this._selectionService)===null||U===void 0||U.selectLines(O,W)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let W=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!W&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;W||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let U=(0,A.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),U.type===3||U.type===2){let k=this.rows-1;return this.scrollLines(U.type===2?-k:k),this.cancel(O,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(U.cancel&&this.cancel(O,!0),!U.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==R.C0.ETX&&U.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,W){let U=O.isMac&&!this.options.macOptionIsMeta&&W.altKey&&!W.ctrlKey&&!W.metaKey||O.isWindows&&W.altKey&&W.ctrlKey&&!W.metaKey||O.isWindows&&W.getModifierState("AltGraph");return W.type==="keypress"?U:U&&(!W.keyCode||W.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(W){return W.keyCode===16||W.keyCode===17||W.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let W;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)W=O.charCode;else if(O.which===null||O.which===void 0)W=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;W=O.which}return!(!W||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(W=String.fromCharCode(W),this._onKey.fire({key:W,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(W,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let W=O.data;return this.coreService.triggerDataEvent(W,!0),this.cancel(O),!0}return!1}resize(O,W){O!==this.cols||W!==this.rows?super.resize(O,W):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,W){var U,k;(U=this._charSizeService)===null||U===void 0||U.measure(),(k=this.viewport)===null||k===void 0||k.syncScrollArea(!0)}clear(){var O;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let W=1;W<this.rows;W++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(O=this.viewport)===null||O===void 0||O.reset(),this.refresh(0,this.rows-1)}}reset(){var O,W;this.options.rows=this.rows,this.options.cols=this.cols;let U=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),(W=this.viewport)===null||W===void 0||W.reset(),this._customKeyEventHandler=U,this.refresh(0,this.rows-1)}clearTextureAtlas(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()}_reportFocus(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case P.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let W=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[4;${U};${W}t`);break;case P.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let k=this._renderService.dimensions.css.cell.width.toFixed(0),te=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[6;${te};${k}t`)}}cancel(O,W){if(this.options.cancelEvents||W)return O.preventDefault(),O.stopPropagation(),!1}}o.Terminal=B},9924:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(r,l=1e3){this._renderCallback=r,this._debounceThresholdMS=l,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(r,l,u){this._rowCount=u,r=r!==void 0?r:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l;let i=Date.now();if(i-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=i,this._innerRefresh();else if(!this._additionalRefreshRequested){let s=i-this._lastRefreshMs,f=this._debounceThresholdMS-s;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let r=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,l)}}},1680:function(h,o,r){var l=this&&this.__decorate||function(_,m,v,y){var C,T=arguments.length,D=T<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,m,v,y);else for(var g=_.length-1;g>=0;g--)(C=_[g])&&(D=(T<3?C(D):T>3?C(m,v,D):C(m,v))||D);return T>3&&D&&Object.defineProperty(m,v,D),D},u=this&&this.__param||function(_,m){return function(v,y){m(v,y,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;let i=r(3656),s=r(4725),f=r(8460),p=r(844),d=r(2585),c=o.Viewport=class extends p.Disposable{constructor(_,m,v,y,C,T,D,g){super(),this._viewportElement=_,this._scrollArea=m,this._bufferService=v,this._optionsService=y,this._charSizeService=C,this._renderService=T,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,i.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(_){this._viewportElement.style.backgroundColor=_.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(_){if(_)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let m=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==m&&(this._lastRecordedBufferHeight=m,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let _=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==_&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=_),this._refreshAnimationFrame=null}syncScrollArea(_=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(_);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(_)}_handleScroll(_){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let m=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:m,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let _=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(_*(this._smoothScrollState.target-this._smoothScrollState.origin)),_<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(_,m){let v=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(m<0&&this._viewportElement.scrollTop!==0||m>0&&v<this._lastRecordedBufferHeight)||(_.cancelable&&_.preventDefault(),!1)}handleWheel(_){let m=this._getPixelsScrolled(_);return m!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+m:this._smoothScrollState.target+=m,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=m,this._bubbleScroll(_,m))}scrollLines(_){if(_!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let m=_*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+m,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!1})}_getPixelsScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let m=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_LINE?m*=this._currentRowHeight:_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(m*=this._currentRowHeight*this._bufferService.rows),m}getBufferElements(_,m){var v;let y,C="",T=[],D=m??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let w=_;w<D;w++){let F=g.get(w);if(!F)continue;let b=(v=g.get(w+1))===null||v===void 0?void 0:v.isWrapped;if(C+=F.translateToString(!b),!b||w===g.length-1){let E=document.createElement("div");E.textContent=C,T.push(E),C.length>0&&(y=E),C=""}}return{bufferElements:T,cursorElement:y}}getLinesScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let m=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(m/=this._currentRowHeight+0,this._wheelPartialScroll+=m,m=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(m*=this._bufferService.rows),m}_applyScrollModifier(_,m){let v=this._optionsService.rawOptions.fastScrollModifier;return v==="alt"&&m.altKey||v==="ctrl"&&m.ctrlKey||v==="shift"&&m.shiftKey?_*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:_*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(_){this._lastTouchY=_.touches[0].pageY}handleTouchMove(_){let m=this._lastTouchY-_.touches[0].pageY;return this._lastTouchY=_.touches[0].pageY,m!==0&&(this._viewportElement.scrollTop+=m,this._bubbleScroll(_,m))}};o.Viewport=c=l([u(2,d.IBufferService),u(3,d.IOptionsService),u(4,s.ICharSizeService),u(5,s.IRenderService),u(6,s.ICoreBrowserService),u(7,s.IThemeService)],c)},3107:function(h,o,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,T=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,m,T):y(_,m))||T);return C>3&&T&&Object.defineProperty(_,m,T),T},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;let i=r(3656),s=r(4725),f=r(844),p=r(2585),d=o.BufferDecorationRenderer=class extends f.Disposable{constructor(c,_,m,v){super(),this._screenElement=c,this._bufferService=_,this._decorationService=m,this._renderService=v,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,i.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,f.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var _,m;let v=document.createElement("div");v.classList.add("xterm-decoration"),v.classList.toggle("xterm-decoration-top-layer",((_=c?.options)===null||_===void 0?void 0:_.layer)==="top"),v.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,v.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",v.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",v.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let y=(m=c.options.x)!==null&&m!==void 0?m:0;return y&&y>this._bufferService.cols&&(v.style.display="none"),this._refreshXPosition(c,v),v}_refreshStyle(c){let _=c.marker.line-this._bufferService.buffers.active.ydisp;if(_<0||_>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let m=this._decorationElements.get(c);m||(m=this._createElement(c),c.element=m,this._decorationElements.set(c,m),this._container.appendChild(m),c.onDispose(()=>{this._decorationElements.delete(c),m.remove()})),m.style.top=_*this._renderService.dimensions.css.cell.height+"px",m.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(m)}}_refreshXPosition(c,_=c.element){var m;if(!_)return;let v=(m=c.options.x)!==null&&m!==void 0?m:0;(c.options.anchor||"left")==="right"?_.style.right=v?v*this._renderService.dimensions.css.cell.width+"px":"":_.style.left=v?v*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var _;(_=this._decorationElements.get(c))===null||_===void 0||_.remove(),this._decorationElements.delete(c),c.dispose()}};o.BufferDecorationRenderer=d=l([u(1,p.IBufferService),u(2,p.IDecorationService),u(3,s.IRenderService)],d)},5871:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(r){if(r.options.overviewRulerOptions){for(let l of this._zones)if(l.color===r.options.overviewRulerOptions.color&&l.position===r.options.overviewRulerOptions.position){if(this._lineIntersectsZone(l,r.marker.line))return;if(this._lineAdjacentToZone(l,r.marker.line,r.options.overviewRulerOptions.position))return void this._addLineToZone(l,r.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=r.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=r.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=r.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=r.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:r.options.overviewRulerOptions.color,position:r.options.overviewRulerOptions.position,startBufferLine:r.marker.line,endBufferLine:r.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(r){this._linePadding=r}_lineIntersectsZone(r,l){return l>=r.startBufferLine&&l<=r.endBufferLine}_lineAdjacentToZone(r,l,u){return l>=r.startBufferLine-this._linePadding[u||"full"]&&l<=r.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(r,l){r.startBufferLine=Math.min(r.startBufferLine,l),r.endBufferLine=Math.max(r.endBufferLine,l)}}},5744:function(h,o,r){var l=this&&this.__decorate||function(y,C,T,D){var g,w=arguments.length,F=w<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,T):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,C,T,D);else for(var b=y.length-1;b>=0;b--)(g=y[b])&&(F=(w<3?g(F):w>3?g(C,T,F):g(C,T))||F);return w>3&&F&&Object.defineProperty(C,T,F),F},u=this&&this.__param||function(y,C){return function(T,D){C(T,D,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;let i=r(5871),s=r(3656),f=r(4725),p=r(844),d=r(2585),c={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0},v=o.OverviewRulerRenderer=class extends p.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,C,T,D,g,w,F){var b;super(),this._viewportElement=y,this._screenElement=C,this._bufferService=T,this._decorationService=D,this._renderService=g,this._optionsService=w,this._coreBrowseService=F,this._colorZoneStore=new i.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(b=this._viewportElement.parentElement)===null||b===void 0||b.insertBefore(this._canvas,this._viewportElement);let E=this._canvas.getContext("2d");if(!E)throw new Error("Ctx cannot be null");this._ctx=E,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,p.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,s.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let y=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);_.full=this._canvas.width,_.left=y,_.center=C,_.right=y,this._refreshDrawHeightConstants(),m.full=0,m.left=0,m.center=_.left,m.right=_.left+_.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);let y=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);c.left=C,c.center=C,c.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let y=this._colorZoneStore.zones;for(let C of y)C.position!=="full"&&this._renderColorZone(C);for(let C of y)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(m[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-c[y.position||"full"]/2),_[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[y.position||"full"]))}_queueRefresh(y,C){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};o.OverviewRulerRenderer=v=l([u(2,d.IBufferService),u(3,d.IDecorationService),u(4,f.IRenderService),u(5,d.IOptionsService),u(6,f.ICoreBrowserService)],v)},2950:function(h,o,r){var l=this&&this.__decorate||function(d,c,_,m){var v,y=arguments.length,C=y<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,c,_,m);else for(var T=d.length-1;T>=0;T--)(v=d[T])&&(C=(y<3?v(C):y>3?v(c,_,C):v(c,_))||C);return y>3&&C&&Object.defineProperty(c,_,C),C},u=this&&this.__param||function(d,c){return function(_,m){c(_,m,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;let i=r(4725),s=r(2585),f=r(2584),p=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,c,_,m,v,y){this._textarea=d,this._compositionView=c,this._bufferService=_,this._optionsService=m,this._coreService=v,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){let c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let _;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,_=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),_.length>0&&this._coreService.triggerDataEvent(_,!0)}},0)}else{this._isSendingComposition=!1;let c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){let d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let c=this._textarea.value,_=c.replace(d,"");this._dataAlreadySent=_,c.length>d.length?this._coreService.triggerDataEvent(_,!0):c.length<d.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):c.length===d.length&&c!==d&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),_=this._renderService.dimensions.css.cell.height,m=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,v=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=v+"px",this._compositionView.style.top=m+"px",this._compositionView.style.height=_+"px",this._compositionView.style.lineHeight=_+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let y=this._compositionView.getBoundingClientRect();this._textarea.style.left=v+"px",this._textarea.style.top=m+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};o.CompositionHelper=p=l([u(2,s.IBufferService),u(3,s.IOptionsService),u(4,s.ICoreService),u(5,i.IRenderService)],p)},9806:(h,o)=>{function r(l,u,i){let s=i.getBoundingClientRect(),f=l.getComputedStyle(i),p=parseInt(f.getPropertyValue("padding-left")),d=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-s.left-p,u.clientY-s.top-d]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=r,o.getCoords=function(l,u,i,s,f,p,d,c,_){if(!p)return;let m=r(l,u,i);return m?(m[0]=Math.ceil((m[0]+(_?d/2:0))/d),m[1]=Math.ceil(m[1]/c),m[0]=Math.min(Math.max(m[0],1),s+(_?1:0)),m[1]=Math.min(Math.max(m[1],1),f),m):void 0}},9504:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;let l=r(2584);function u(c,_,m,v){let y=c-i(c,m),C=_-i(_,m),T=Math.abs(y-C)-function(D,g,w){let F=0,b=D-i(D,w),E=g-i(g,w);for(let M=0;M<Math.abs(b-E);M++){let S=s(D,g)==="A"?-1:1,x=w.buffer.lines.get(b+S*M);x?.isWrapped&&F++}return F}(c,_,m);return d(T,p(s(c,_),v))}function i(c,_){let m=0,v=_.buffer.lines.get(c),y=v?.isWrapped;for(;y&&c>=0&&c<_.rows;)m++,v=_.buffer.lines.get(--c),y=v?.isWrapped;return m}function s(c,_){return c>_?"A":"B"}function f(c,_,m,v,y,C){let T=c,D=_,g="";for(;T!==m||D!==v;)T+=y?1:-1,y&&T>C.cols-1?(g+=C.buffer.translateBufferLineToString(D,!1,c,T),T=0,c=0,D++):!y&&T<0&&(g+=C.buffer.translateBufferLineToString(D,!1,0,c+1),T=C.cols-1,c=T,D--);return g+C.buffer.translateBufferLineToString(D,!1,c,T)}function p(c,_){let m=_?"O":"[";return l.C0.ESC+m+c}function d(c,_){c=Math.floor(c);let m="";for(let v=0;v<c;v++)m+=_;return m}o.moveToCellSequence=function(c,_,m,v){let y=m.buffer.x,C=m.buffer.y;if(!m.buffer.hasScrollback)return function(g,w,F,b,E,M){return u(w,b,E,M).length===0?"":d(f(g,w,g,w-i(w,E),!1,E).length,p("D",M))}(y,C,0,_,m,v)+u(C,_,m,v)+function(g,w,F,b,E,M){let S;S=u(w,b,E,M).length>0?b-i(b,E):w;let x=b,L=function(R,A,I,$,H,P){let q;return q=u(I,$,H,P).length>0?$-i($,H):A,R<I&&q<=$||R>=I&&q<$?"C":"D"}(g,w,F,b,E,M);return d(f(g,S,F,x,L==="C",E).length,p(L,M))}(y,C,c,_,m,v);let T;if(C===_)return T=y>c?"D":"C",d(Math.abs(y-c),p(T,v));T=C>_?"D":"C";let D=Math.abs(C-_);return d(function(g,w){return w.cols-g}(C>_?c:y,m)+(D-1)*m.cols+1+((C>_?y:c)-1),p(T,v))}},1296:function(h,o,r){var l=this&&this.__decorate||function(E,M,S,x){var L,R=arguments.length,A=R<3?M:x===null?x=Object.getOwnPropertyDescriptor(M,S):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(E,M,S,x);else for(var I=E.length-1;I>=0;I--)(L=E[I])&&(A=(R<3?L(A):R>3?L(M,S,A):L(M,S))||A);return R>3&&A&&Object.defineProperty(M,S,A),A},u=this&&this.__param||function(E,M){return function(S,x){M(S,x,E)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;let i=r(3787),s=r(2550),f=r(2223),p=r(6171),d=r(4725),c=r(8055),_=r(8460),m=r(844),v=r(2585),y="xterm-dom-renderer-owner-",C="xterm-rows",T="xterm-fg-",D="xterm-bg-",g="xterm-focus",w="xterm-selection",F=1,b=o.DomRenderer=class extends m.Disposable{constructor(E,M,S,x,L,R,A,I,$,H){super(),this._element=E,this._screenElement=M,this._viewportElement=S,this._linkifier2=x,this._charSizeService=R,this._optionsService=A,this._bufferService=I,this._coreBrowserService=$,this._themeService=H,this._terminalClass=F++,this._rowElements=[],this.onRequestRedraw=this.register(new _.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(w),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,p.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(P=>this._injectCss(P))),this._injectCss(this._themeService.colors),this._rowFactory=L.createInstance(i.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(P=>this._handleLinkHover(P))),this.register(this._linkifier2.onHideLinkUnderline(P=>this._handleLinkLeave(P))),this.register((0,m.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new s.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let E=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*E,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*E),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/E),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/E),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let S of this._rowElements)S.style.width=`${this.dimensions.css.canvas.width}px`,S.style.height=`${this.dimensions.css.cell.height}px`,S.style.lineHeight=`${this.dimensions.css.cell.height}px`,S.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let M=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(E){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${C} { color: ${E.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${C} .xterm-dim { color: ${c.color.multiplyOpacity(E.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${E.cursor.css};  color: ${E.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${E.cursor.css}; }}`,M+=`${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${E.cursor.css}; color: ${E.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${E.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${E.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${E.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${w} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${w} div { position: absolute; background-color: ${E.selectionBackgroundOpaque.css};}${this._terminalSelector} .${w} div { position: absolute; background-color: ${E.selectionInactiveBackgroundOpaque.css};}`;for(let[S,x]of E.ansi.entries())M+=`${this._terminalSelector} .${T}${S} { color: ${x.css}; }${this._terminalSelector} .${T}${S}.xterm-dim { color: ${c.color.multiplyOpacity(x,.5).css}; }${this._terminalSelector} .${D}${S} { background-color: ${x.css}; }`;M+=`${this._terminalSelector} .${T}${f.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(E.background).css}; }${this._terminalSelector} .${T}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(E.background),.5).css}; }${this._terminalSelector} .${D}${f.INVERTED_DEFAULT_COLOR} { background-color: ${E.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){let E=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${E}px`,this._rowFactory.defaultSpacing=E}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(E,M){for(let S=this._rowElements.length;S<=M;S++){let x=document.createElement("div");this._rowContainer.appendChild(x),this._rowElements.push(x)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(E,M){this._refreshRowElements(E,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(E,M,S){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(E,M,S),this.renderRows(0,this._bufferService.rows-1),!E||!M)return;let x=E[1]-this._bufferService.buffer.ydisp,L=M[1]-this._bufferService.buffer.ydisp,R=Math.max(x,0),A=Math.min(L,this._bufferService.rows-1);if(R>=this._bufferService.rows||A<0)return;let I=document.createDocumentFragment();if(S){let $=E[0]>M[0];I.appendChild(this._createSelectionElement(R,$?M[0]:E[0],$?E[0]:M[0],A-R+1))}else{let $=x===R?E[0]:0,H=R===L?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,$,H));let P=A-R-1;if(I.appendChild(this._createSelectionElement(R+1,0,this._bufferService.cols,P)),R!==A){let q=L===A?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(A,0,q))}}this._selectionContainer.appendChild(I)}_createSelectionElement(E,M,S,x=1){let L=document.createElement("div");return L.style.height=x*this.dimensions.css.cell.height+"px",L.style.top=E*this.dimensions.css.cell.height+"px",L.style.left=M*this.dimensions.css.cell.width+"px",L.style.width=this.dimensions.css.cell.width*(S-M)+"px",L}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let E of this._rowElements)E.replaceChildren()}renderRows(E,M){let S=this._bufferService.buffer,x=S.ybase+S.y,L=Math.min(S.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink,A=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=E;$<=M;$++){let H=$+S.ydisp,P=this._rowElements[$],q=S.lines.get(H);if(!P||!q)break;P.replaceChildren(...this._rowFactory.createRow(q,H,H===x,A,I,L,R,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!0)}_handleLinkLeave(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!1)}_setCellUnderline(E,M,S,x,L,R){S<0&&(E=0),x<0&&(M=0);let A=this._bufferService.rows-1;S=Math.max(Math.min(S,A),0),x=Math.max(Math.min(x,A),0),L=Math.min(L,this._bufferService.cols);let I=this._bufferService.buffer,$=I.ybase+I.y,H=Math.min(I.x,L-1),P=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,G=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=S;B<=x;++B){let Q=B+I.ydisp,O=this._rowElements[B],W=I.lines.get(Q);if(!O||!W)break;O.replaceChildren(...this._rowFactory.createRow(W,Q,Q===$,q,G,H,P,this.dimensions.css.cell.width,this._widthCache,R?B===S?E:0:-1,R?(B===x?M:L)-1:-1))}}};o.DomRenderer=b=l([u(4,v.IInstantiationService),u(5,d.ICharSizeService),u(6,v.IOptionsService),u(7,v.IBufferService),u(8,d.ICoreBrowserService),u(9,d.IThemeService)],b)},3787:function(h,o,r){var l=this&&this.__decorate||function(T,D,g,w){var F,b=arguments.length,E=b<3?D:w===null?w=Object.getOwnPropertyDescriptor(D,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(T,D,g,w);else for(var M=T.length-1;M>=0;M--)(F=T[M])&&(E=(b<3?F(E):b>3?F(D,g,E):F(D,g))||E);return b>3&&E&&Object.defineProperty(D,g,E),E},u=this&&this.__param||function(T,D){return function(g,w){D(g,w,T)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;let i=r(2223),s=r(643),f=r(511),p=r(2585),d=r(8055),c=r(4725),_=r(4269),m=r(6171),v=r(3734),y=o.DomRendererRowFactory=class{constructor(T,D,g,w,F,b,E){this._document=T,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=w,this._coreService=F,this._decorationService=b,this._themeService=E,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(T,D,g){this._selectionStart=T,this._selectionEnd=D,this._columnSelectMode=g}createRow(T,D,g,w,F,b,E,M,S,x,L){let R=[],A=this._characterJoinerService.getJoinedCharacters(D),I=this._themeService.colors,$,H=T.getNoBgTrimmedLength();g&&H<b+1&&(H=b+1);let P=0,q="",G=0,B=0,Q=0,O=!1,W=0,U=!1,k=0,te=[],j=x!==-1&&L!==-1;for(let ye=0;ye<H;ye++){T.loadCell(ye,this._workCell);let Ae=this._workCell.getWidth();if(Ae===0)continue;let we=!1,ce=ye,xe=this._workCell;if(A.length>0&&ye===A[0][0]){we=!0;let Ge=A.shift();xe=new _.JoinedCellData(this._workCell,T.translateToString(!0,Ge[0],Ge[1]),Ge[1]-Ge[0]),ce=Ge[1]-1,Ae=xe.getWidth()}let It=this._isCellInSelection(ye,D),un=g&&ye===b,Gt=j&&ye>=x&&ye<=L,tt=!1;this._decorationService.forEachDecorationAtCell(ye,D,void 0,Ge=>{tt=!0});let le=xe.getChars()||s.WHITESPACE_CELL_CHAR;if(le===" "&&(xe.isUnderline()||xe.isOverline())&&(le="\xA0"),k=Ae*M-S.get(le,xe.isBold(),xe.isItalic()),$){if(P&&(It&&U||!It&&!U&&xe.bg===G)&&(It&&U&&I.selectionForeground||xe.fg===B)&&xe.extended.ext===Q&&Gt===O&&k===W&&!un&&!we&&!tt){q+=le,P++;continue}P&&($.textContent=q),$=this._document.createElement("span"),P=0,q=""}else $=this._document.createElement("span");if(G=xe.bg,B=xe.fg,Q=xe.extended.ext,O=Gt,W=k,U=It,we&&b>=ye&&b<=ce&&(b=ye),!this._coreService.isCursorHidden&&un){if(te.push("xterm-cursor"),this._coreBrowserService.isFocused)E&&te.push("xterm-cursor-blink"),te.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(F)switch(F){case"outline":te.push("xterm-cursor-outline");break;case"block":te.push("xterm-cursor-block");break;case"bar":te.push("xterm-cursor-bar");break;case"underline":te.push("xterm-cursor-underline")}}if(xe.isBold()&&te.push("xterm-bold"),xe.isItalic()&&te.push("xterm-italic"),xe.isDim()&&te.push("xterm-dim"),q=xe.isInvisible()?s.WHITESPACE_CELL_CHAR:xe.getChars()||s.WHITESPACE_CELL_CHAR,xe.isUnderline()&&(te.push(`xterm-underline-${xe.extended.underlineStyle}`),q===" "&&(q="\xA0"),!xe.isUnderlineColorDefault()))if(xe.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${v.AttributeData.toColorRGB(xe.getUnderlineColor()).join(",")})`;else{let Ge=xe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&xe.isBold()&&Ge<8&&(Ge+=8),$.style.textDecorationColor=I.ansi[Ge].css}xe.isOverline()&&(te.push("xterm-overline"),q===" "&&(q="\xA0")),xe.isStrikethrough()&&te.push("xterm-strikethrough"),Gt&&($.style.textDecoration="underline");let ve=xe.getFgColor(),fe=xe.getFgColorMode(),ae=xe.getBgColor(),K=xe.getBgColorMode(),ie=!!xe.isInverse();if(ie){let Ge=ve;ve=ae,ae=Ge;let Rt=fe;fe=K,K=Rt}let pe,Ve,it,vt=!1;switch(this._decorationService.forEachDecorationAtCell(ye,D,void 0,Ge=>{Ge.options.layer!=="top"&&vt||(Ge.backgroundColorRGB&&(K=50331648,ae=Ge.backgroundColorRGB.rgba>>8&16777215,pe=Ge.backgroundColorRGB),Ge.foregroundColorRGB&&(fe=50331648,ve=Ge.foregroundColorRGB.rgba>>8&16777215,Ve=Ge.foregroundColorRGB),vt=Ge.options.layer==="top")}),!vt&&It&&(pe=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,ae=pe.rgba>>8&16777215,K=50331648,vt=!0,I.selectionForeground&&(fe=50331648,ve=I.selectionForeground.rgba>>8&16777215,Ve=I.selectionForeground)),vt&&te.push("xterm-decoration-top"),K){case 16777216:case 33554432:it=I.ansi[ae],te.push(`xterm-bg-${ae}`);break;case 50331648:it=d.rgba.toColor(ae>>16,ae>>8&255,255&ae),this._addStyle($,`background-color:#${C((ae>>>0).toString(16),"0",6)}`);break;default:ie?(it=I.foreground,te.push(`xterm-bg-${i.INVERTED_DEFAULT_COLOR}`)):it=I.background}switch(pe||xe.isDim()&&(pe=d.color.multiplyOpacity(it,.5)),fe){case 16777216:case 33554432:xe.isBold()&&ve<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ve+=8),this._applyMinimumContrast($,it,I.ansi[ve],xe,pe,void 0)||te.push(`xterm-fg-${ve}`);break;case 50331648:let Ge=d.rgba.toColor(ve>>16&255,ve>>8&255,255&ve);this._applyMinimumContrast($,it,Ge,xe,pe,Ve)||this._addStyle($,`color:#${C(ve.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,it,I.foreground,xe,pe,void 0)||ie&&te.push(`xterm-fg-${i.INVERTED_DEFAULT_COLOR}`)}te.length&&($.className=te.join(" "),te.length=0),un||we||tt?$.textContent=q:P++,k!==this.defaultSpacing&&($.style.letterSpacing=`${k}px`),R.push($),ye=ce}return $&&P&&($.textContent=q),R}_applyMinimumContrast(T,D,g,w,F,b){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,m.excludeFromContrastRatioDemands)(w.getCode()))return!1;let E=this._getContrastCache(w),M;if(F||b||(M=E.getColor(D.rgba,g.rgba)),M===void 0){let S=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);M=d.color.ensureContrastRatio(F||D,b||g,S),E.setColor((F||D).rgba,(b||g).rgba,M??null)}return!!M&&(this._addStyle(T,`color:${M.css}`),!0)}_getContrastCache(T){return T.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(T,D){T.setAttribute("style",`${T.getAttribute("style")||""}${D};`)}_isCellInSelection(T,D){let g=this._selectionStart,w=this._selectionEnd;return!(!g||!w)&&(this._columnSelectMode?g[0]<=w[0]?T>=g[0]&&D>=g[1]&&T<w[0]&&D<=w[1]:T<g[0]&&D>=g[1]&&T>=w[0]&&D<=w[1]:D>g[1]&&D<w[1]||g[1]===w[1]&&D===g[1]&&T>=g[0]&&T<w[0]||g[1]<w[1]&&D===w[1]&&T<w[0]||g[1]<w[1]&&D===g[1]&&T>=g[0])}};function C(T,D,g){for(;T.length<g;)T=D+T;return T}o.DomRendererRowFactory=y=l([u(1,c.ICharacterJoinerService),u(2,p.IOptionsService),u(3,c.ICoreBrowserService),u(4,p.ICoreService),u(5,p.IDecorationService),u(6,c.IThemeService)],y)},2550:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(r){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=r.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let l=r.createElement("span"),u=r.createElement("span");u.style.fontWeight="bold";let i=r.createElement("span");i.style.fontStyle="italic";let s=r.createElement("span");s.style.fontWeight="bold",s.style.fontStyle="italic",this._measureElements=[l,u,i,s],this._container.appendChild(l),this._container.appendChild(u),this._container.appendChild(i),this._container.appendChild(s),r.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(r,l,u,i){r===this._font&&l===this._fontSize&&u===this._weight&&i===this._weightBold||(this._font=r,this._fontSize=l,this._weight=u,this._weightBold=i,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${i}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${i}`,this.clear())}get(r,l,u){let i=0;if(!l&&!u&&r.length===1&&(i=r.charCodeAt(0))<256)return this._flat[i]!==-9999?this._flat[i]:this._flat[i]=this._measure(r,0);let s=r;l&&(s+="B"),u&&(s+="I");let f=this._holey.get(s);if(f===void 0){let p=0;l&&(p|=1),u&&(p|=2),f=this._measure(r,p),this._holey.set(s,f)}return f}_measure(r,l){let u=this._measureElements[l];return u.textContent=r.repeat(32),u.offsetWidth/32}}},2223:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;let l=r(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},6171:(h,o)=>{function r(l){return 57508<=l&&l<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.createRenderDimensions=o.excludeFromContrastRatioDemands=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},o.isPowerlineGlyph=r,o.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},o.excludeFromContrastRatioDemands=function(l){return r(l)||function(u){return 9472<=u&&u<=9631}(l)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(r){this._bufferService=r,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?r%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)-1]:[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[r,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[Math.max(r,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let r=this.selectionStart,l=this.selectionEnd;return!(!r||!l)&&(r[1]>l[1]||r[1]===l[1]&&r[0]>l[0])}handleTrim(r){return this.selectionStart&&(this.selectionStart[1]-=r),this.selectionEnd&&(this.selectionEnd[1]-=r),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(h,o,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,T=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,m,T):y(_,m))||T);return C>3&&T&&Object.defineProperty(_,m,T),T},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;let i=r(2585),s=r(8460),f=r(844),p=o.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,_,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new s.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new d(c,_,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};o.CharSizeService=p=l([u(2,i.IOptionsService)],p);class d{constructor(_,m,v){this._document=_,this._parentElement=m,this._optionsService=v,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let _={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return _.width!==0&&_.height!==0&&(this._result.width=_.width/32,this._result.height=Math.ceil(_.height)),this._result}}},4269:function(h,o,r){var l=this&&this.__decorate||function(_,m,v,y){var C,T=arguments.length,D=T<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,v):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,m,v,y);else for(var g=_.length-1;g>=0;g--)(C=_[g])&&(D=(T<3?C(D):T>3?C(m,v,D):C(m,v))||D);return T>3&&D&&Object.defineProperty(m,v,D),D},u=this&&this.__param||function(_,m){return function(v,y){m(v,y,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;let i=r(3734),s=r(643),f=r(511),p=r(2585);class d extends i.AttributeData{constructor(m,v,y){super(),this.content=0,this.combinedData="",this.fg=m.fg,this.bg=m.bg,this.combinedData=v,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(m){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=d;let c=o.CharacterJoinerService=class a2{constructor(m){this._bufferService=m,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(m){let v={id:this._nextCharacterJoinerId++,handler:m};return this._characterJoiners.push(v),v.id}deregister(m){for(let v=0;v<this._characterJoiners.length;v++)if(this._characterJoiners[v].id===m)return this._characterJoiners.splice(v,1),!0;return!1}getJoinedCharacters(m){if(this._characterJoiners.length===0)return[];let v=this._bufferService.buffer.lines.get(m);if(!v||v.length===0)return[];let y=[],C=v.translateToString(!0),T=0,D=0,g=0,w=v.getFg(0),F=v.getBg(0);for(let b=0;b<v.getTrimmedLength();b++)if(v.loadCell(b,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==F){if(b-T>1){let E=this._getJoinedRanges(C,g,D,v,T);for(let M=0;M<E.length;M++)y.push(E[M])}T=b,g=D,w=this._workCell.fg,F=this._workCell.bg}D+=this._workCell.getChars().length||s.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-T>1){let b=this._getJoinedRanges(C,g,D,v,T);for(let E=0;E<b.length;E++)y.push(b[E])}return y}_getJoinedRanges(m,v,y,C,T){let D=m.substring(v,y),g=[];try{g=this._characterJoiners[0].handler(D)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let F=this._characterJoiners[w].handler(D);for(let b=0;b<F.length;b++)a2._mergeRanges(g,F[b])}catch(F){console.error(F)}return this._stringRangesToCellRanges(g,C,T),g}_stringRangesToCellRanges(m,v,y){let C=0,T=!1,D=0,g=m[C];if(g){for(let w=y;w<this._bufferService.cols;w++){let F=v.getWidth(w),b=v.getString(w).length||s.WHITESPACE_CELL_CHAR.length;if(F!==0){if(!T&&g[0]<=D&&(g[0]=w,T=!0),g[1]<=D){if(g[1]=w,g=m[++C],!g)break;g[0]<=D?(g[0]=w,T=!0):T=!1}D+=b}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(m,v){let y=!1;for(let C=0;C<m.length;C++){let T=m[C];if(y){if(v[1]<=T[0])return m[C-1][1]=v[1],m;if(v[1]<=T[1])return m[C-1][1]=Math.max(v[1],T[1]),m.splice(C,1),m;m.splice(C,1),C--}else{if(v[1]<=T[0])return m.splice(C,0,v),m;if(v[1]<=T[1])return T[0]=Math.min(v[0],T[0]),m;v[0]<T[1]&&(T[0]=Math.min(v[0],T[0]),y=!0)}}return y?m[m.length-1][1]=v[1]:m.push(v),m}};o.CharacterJoinerService=c=l([u(0,p.IBufferService)],c)},5114:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0,o.CoreBrowserService=class{constructor(r,l){this._textarea=r,this.window=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(h,o,r){var l=this&&this.__decorate||function(p,d,c,_){var m,v=arguments.length,y=v<3?d:_===null?_=Object.getOwnPropertyDescriptor(d,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,d,c,_);else for(var C=p.length-1;C>=0;C--)(m=p[C])&&(y=(v<3?m(y):v>3?m(d,c,y):m(d,c))||y);return v>3&&y&&Object.defineProperty(d,c,y),y},u=this&&this.__param||function(p,d){return function(c,_){d(c,_,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;let i=r(4725),s=r(9806),f=o.MouseService=class{constructor(p,d){this._renderService=p,this._charSizeService=d}getCoords(p,d,c,_,m){return(0,s.getCoords)(window,p,d,c,_,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,m)}getMouseReportCoords(p,d){let c=(0,s.getCoordsRelativeToElement)(window,p,d);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};o.MouseService=f=l([u(0,i.IRenderService),u(1,i.ICharSizeService)],f)},3230:function(h,o,r){var l=this&&this.__decorate||function(y,C,T,D){var g,w=arguments.length,F=w<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,T):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,C,T,D);else for(var b=y.length-1;b>=0;b--)(g=y[b])&&(F=(w<3?g(F):w>3?g(C,T,F):g(C,T))||F);return w>3&&F&&Object.defineProperty(C,T,F),F},u=this&&this.__param||function(y,C){return function(T,D){C(T,D,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;let i=r(3656),s=r(6193),f=r(5596),p=r(4725),d=r(8460),c=r(844),_=r(7226),m=r(2585),v=o.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,C,T,D,g,w,F,b){if(super(),this._rowCount=y,this._charSizeService=D,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new d.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new d.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new d.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new d.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new s.RenderDebouncer(F.window,(E,M)=>this._renderRows(E,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new f.ScreenDprMonitor(F.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var E;return(E=this._renderer.value)===null||E===void 0?void 0:E.clear()})),this.register(T.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(T.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(T.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register((0,i.addDisposableDomListener)(F.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(b.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in F.window){let E=new F.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});E.observe(C),this.register({dispose:()=>E.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,C,T=!1){this._isPaused?this._needsFullRefresh=!0:(T||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,C,this._rowCount))}_renderRows(y,C){this._renderer.value&&(y=Math.min(y,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(y,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:C}),this._onRender.fire({start:y,end:C}),this._isNextRenderRedrawOnly=!0)}resize(y,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,C;this._renderer.value&&((C=(y=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,C)):this._renderer.value.handleResize(y,C),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,C,T){var D;this._selectionState.start=y,this._selectionState.end=C,this._selectionState.columnSelectMode=T,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(y,C,T)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};o.RenderService=v=l([u(2,m.IOptionsService),u(3,p.ICharSizeService),u(4,m.IDecorationService),u(5,m.IBufferService),u(6,p.ICoreBrowserService),u(7,p.IThemeService)],v)},9312:function(h,o,r){var l=this&&this.__decorate||function(g,w,F,b){var E,M=arguments.length,S=M<3?w:b===null?b=Object.getOwnPropertyDescriptor(w,F):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,w,F,b);else for(var x=g.length-1;x>=0;x--)(E=g[x])&&(S=(M<3?E(S):M>3?E(w,F,S):E(w,F))||S);return M>3&&S&&Object.defineProperty(w,F,S),S},u=this&&this.__param||function(g,w){return function(F,b){w(F,b,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;let i=r(9806),s=r(9504),f=r(456),p=r(4725),d=r(8460),c=r(844),_=r(6114),m=r(4841),v=r(511),y=r(2585),C="\xA0",T=new RegExp(C,"g"),D=o.SelectionService=class extends c.Disposable{constructor(g,w,F,b,E,M,S,x,L){super(),this._element=g,this._screenElement=w,this._linkifier=F,this._bufferService=b,this._coreService=E,this._mouseService=M,this._optionsService=S,this._renderService=x,this._coreBrowserService=L,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new v.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=R=>this._handleMouseMove(R),this._mouseUpListener=R=>this._handleMouseUp(R),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(R=>this._handleTrim(R)),this.register(this._bufferService.buffers.onBufferActivate(R=>this._handleBufferActivate(R))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let g=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!g||!w||g[0]===w[0]&&g[1]===w[1])}get selectionText(){let g=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!g||!w)return"";let F=this._bufferService.buffer,b=[];if(this._activeSelectionMode===3){if(g[0]===w[0])return"";let E=g[0]<w[0]?g[0]:w[0],M=g[0]<w[0]?w[0]:g[0];for(let S=g[1];S<=w[1];S++){let x=F.translateBufferLineToString(S,!0,E,M);b.push(x)}}else{let E=g[1]===w[1]?w[0]:void 0;b.push(F.translateBufferLineToString(g[1],!0,g[0],E));for(let M=g[1]+1;M<=w[1]-1;M++){let S=F.lines.get(M),x=F.translateBufferLineToString(M,!0);S?.isWrapped?b[b.length-1]+=x:b.push(x)}if(g[1]!==w[1]){let M=F.lines.get(w[1]),S=F.translateBufferLineToString(w[1],!0,0,w[0]);M&&M.isWrapped?b[b.length-1]+=S:b.push(S)}}return b.map(E=>E.replace(T," ")).join(_.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),_.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){let w=this._getMouseBufferCoords(g),F=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!!(F&&b&&w)&&this._areCoordsInSelection(w,F,b)}isCellInSelection(g,w){let F=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!F||!b)&&this._areCoordsInSelection([g,w],F,b)}_areCoordsInSelection(g,w,F){return g[1]>w[1]&&g[1]<F[1]||w[1]===F[1]&&g[1]===w[1]&&g[0]>=w[0]&&g[0]<F[0]||w[1]<F[1]&&g[1]===F[1]&&g[0]<F[0]||w[1]<F[1]&&g[1]===w[1]&&g[0]>=w[0]}_selectWordAtCursor(g,w){var F,b;let E=(b=(F=this._linkifier.currentLink)===null||F===void 0?void 0:F.link)===null||b===void 0?void 0:b.range;if(E)return this._model.selectionStart=[E.start.x-1,E.start.y-1],this._model.selectionStartLength=(0,m.getRangeLength)(E,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let M=this._getMouseBufferCoords(g);return!!M&&(this._selectWordAt(M,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,w){this._model.clearSelection(),g=Math.max(g,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){let w=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(g){let w=(0,i.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1],F=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=F?0:(w>F&&(w-=F),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(g){return _.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){let w=this._getMouseBufferCoords(g);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(g){return g.altKey&&!(_.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;let w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let F=this._bufferService.buffer;if(this._model.selectionEnd[1]<F.lines.length){let b=F.lines.get(this._model.selectionEnd[1]);b&&b.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){let w=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let F=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(F&&F[0]!==void 0&&F[1]!==void 0){let b=(0,s.moveToCellSequence)(F[0]-1,F[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(b,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let g=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,F=!(!g||!w||g[0]===w[0]&&g[1]===w[1]);F?g&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,w,F)):this._oldHasSelection&&this._fireOnSelectionChange(g,w,F)}_fireOnSelectionChange(g,w,F){this._oldSelectionStart=g,this._oldSelectionEnd=w,this._oldHasSelection=F,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(g,w){let F=w;for(let b=0;w>=b;b++){let E=g.loadCell(b,this._workCell).getChars().length;this._workCell.getWidth()===0?F--:E>1&&w!==b&&(F+=E-1)}return F}setSelection(g,w,F){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,w],this._model.selectionStartLength=F,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,w,F=!0,b=!0){if(g[0]>=this._bufferService.cols)return;let E=this._bufferService.buffer,M=E.lines.get(g[1]);if(!M)return;let S=E.translateBufferLineToString(g[1],!1),x=this._convertViewportColToCharacterIndex(M,g[0]),L=x,R=g[0]-x,A=0,I=0,$=0,H=0;if(S.charAt(x)===" "){for(;x>0&&S.charAt(x-1)===" ";)x--;for(;L<S.length&&S.charAt(L+1)===" ";)L++}else{let G=g[0],B=g[0];M.getWidth(G)===0&&(A++,G--),M.getWidth(B)===2&&(I++,B++);let Q=M.getString(B).length;for(Q>1&&(H+=Q-1,L+=Q-1);G>0&&x>0&&!this._isCharWordSeparator(M.loadCell(G-1,this._workCell));){M.loadCell(G-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(A++,G--):O>1&&($+=O-1,x-=O-1),x--,G--}for(;B<M.length&&L+1<S.length&&!this._isCharWordSeparator(M.loadCell(B+1,this._workCell));){M.loadCell(B+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,B++):O>1&&(H+=O-1,L+=O-1),L++,B++}}L++;let P=x+R-A+$,q=Math.min(this._bufferService.cols,L-x+A+I-$-H);if(w||S.slice(x,L).trim()!==""){if(F&&P===0&&M.getCodePoint(0)!==32){let G=E.lines.get(g[1]-1);if(G&&M.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){let B=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(B){let Q=this._bufferService.cols-B.start;P-=Q,q+=Q}}}if(b&&P+q===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let G=E.lines.get(g[1]+1);if(G?.isWrapped&&G.getCodePoint(0)!==32){let B=this._getWordAt([0,g[1]+1],!1,!1,!0);B&&(q+=B.length)}}return{start:P,length:q}}}_selectWordAt(g,w){let F=this._getWordAt(g,w);if(F){for(;F.start<0;)F.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[F.start,g[1]],this._model.selectionStartLength=F.length}}_selectToWordAt(g){let w=this._getWordAt(g,!0);if(w){let F=g[1];for(;w.start<0;)w.start+=this._bufferService.cols,F--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,F++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,F]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){let w=this._bufferService.buffer.getWrappedRangeForLine(g),F={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,m.getRangeLength)(F,this._bufferService.cols)}};o.SelectionService=D=l([u(3,y.IBufferService),u(4,y.ICoreService),u(5,p.IMouseService),u(6,y.IOptionsService),u(7,p.IRenderService),u(8,p.ICoreBrowserService)],D)},4725:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;let l=r(8343);o.ICharSizeService=(0,l.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),o.IMouseService=(0,l.createDecorator)("MouseService"),o.IRenderService=(0,l.createDecorator)("RenderService"),o.ISelectionService=(0,l.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,l.createDecorator)("ThemeService")},6731:function(h,o,r){var l=this&&this.__decorate||function(D,g,w,F){var b,E=arguments.length,M=E<3?g:F===null?F=Object.getOwnPropertyDescriptor(g,w):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,w,F);else for(var S=D.length-1;S>=0;S--)(b=D[S])&&(M=(E<3?b(M):E>3?b(g,w,M):b(g,w))||M);return E>3&&M&&Object.defineProperty(g,w,M),M},u=this&&this.__param||function(D,g){return function(w,F){g(w,F,D)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;let i=r(7239),s=r(8055),f=r(8460),p=r(844),d=r(2585),c=s.css.toColor("#ffffff"),_=s.css.toColor("#000000"),m=s.css.toColor("#ffffff"),v=s.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[s.css.toColor("#2e3436"),s.css.toColor("#cc0000"),s.css.toColor("#4e9a06"),s.css.toColor("#c4a000"),s.css.toColor("#3465a4"),s.css.toColor("#75507b"),s.css.toColor("#06989a"),s.css.toColor("#d3d7cf"),s.css.toColor("#555753"),s.css.toColor("#ef2929"),s.css.toColor("#8ae234"),s.css.toColor("#fce94f"),s.css.toColor("#729fcf"),s.css.toColor("#ad7fa8"),s.css.toColor("#34e2e2"),s.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let w=0;w<216;w++){let F=g[w/36%6|0],b=g[w/6%6|0],E=g[w%6];D.push({css:s.channels.toCss(F,b,E),rgba:s.channels.toRgba(F,b,E)})}for(let w=0;w<24;w++){let F=8+10*w;D.push({css:s.channels.toCss(F,F,F),rgba:s.channels.toRgba(F,F,F)})}return D})());let C=o.ThemeService=class extends p.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new i.ColorContrastCache,this._halfContrastCache=new i.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:_,cursor:m,cursorAccent:v,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:s.color.blend(_,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:s.color.blend(_,y),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let g=this._colors;if(g.foreground=T(D.foreground,c),g.background=T(D.background,_),g.cursor=T(D.cursor,m),g.cursorAccent=T(D.cursorAccent,v),g.selectionBackgroundTransparent=T(D.selectionBackground,y),g.selectionBackgroundOpaque=s.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=T(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=s.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?T(D.selectionForeground,s.NULL_COLOR):void 0,g.selectionForeground===s.NULL_COLOR&&(g.selectionForeground=void 0),s.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=s.color.opacity(g.selectionBackgroundTransparent,.3)),s.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=s.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=o.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=T(D.black,o.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=T(D.red,o.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=T(D.green,o.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=T(D.yellow,o.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=T(D.blue,o.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=T(D.magenta,o.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=T(D.cyan,o.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=T(D.white,o.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=T(D.brightBlack,o.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=T(D.brightRed,o.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=T(D.brightGreen,o.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=T(D.brightYellow,o.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=T(D.brightBlue,o.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=T(D.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=T(D.brightCyan,o.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=T(D.brightWhite,o.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let w=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let F=0;F<w;F++)g.ansi[F+16]=T(D.extendedAnsi[F],o.DEFAULT_ANSI_COLORS[F+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function T(D,g){if(D!==void 0)try{return s.css.toColor(D)}catch{}return g}o.ThemeService=C=l([u(0,d.IOptionsService)],C)},6349:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;let l=r(8460),u=r(844);class i extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new l.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new l.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new l.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;let p=new Array(f);for(let d=0;d<Math.min(f,this.length);d++)p[d]=this._array[this._getCyclicIndex(d)];this._array=p,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let p=this._length;p<f;p++)this._array[p]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,p){this._array[this._getCyclicIndex(f)]=p}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,p,...d){if(p){for(let c=f;c<this._length-p;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+p)];this._length-=p,this.onDeleteEmitter.fire({index:f,amount:p})}for(let c=this._length-1;c>=f;c--)this._array[this._getCyclicIndex(c+d.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<d.length;c++)this._array[this._getCyclicIndex(f+c)]=d[c];if(d.length&&this.onInsertEmitter.fire({index:f,amount:d.length}),this._length+d.length>this._maxLength){let c=this._length+d.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=d.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,p,d){if(!(p<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let _=p-1;_>=0;_--)this.set(f+_+d,this.get(f+_));let c=f+p+d-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<p;c++)this.set(f+c+d,this.get(f+c))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}o.CircularList=i},1439:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function r(l,u=5){if(typeof l!="object")return l;let i=Array.isArray(l)?[]:{};for(let s in l)i[s]=u<=1?l[s]:l[s]&&r(l[s],u-1);return i}},8055:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;let l=r(6114),u=0,i=0,s=0,f=0;var p,d,c,_,m;function v(C){let T=C.toString(16);return T.length<2?"0"+T:T}function y(C,T){return C<T?(T+.05)/(C+.05):(C+.05)/(T+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(T,D,g,w){return w!==void 0?`#${v(T)}${v(D)}${v(g)}${v(w)}`:`#${v(T)}${v(D)}${v(g)}`},C.toRgba=function(T,D,g,w=255){return(T<<24|D<<16|g<<8|w)>>>0}}(p||(o.channels=p={})),function(C){function T(D,g){return f=Math.round(255*g),[u,i,s]=m.toChannels(D.rgba),{css:p.toCss(u,i,s,f),rgba:p.toRgba(u,i,s,f)}}C.blend=function(D,g){if(f=(255&g.rgba)/255,f===1)return{css:g.css,rgba:g.rgba};let w=g.rgba>>24&255,F=g.rgba>>16&255,b=g.rgba>>8&255,E=D.rgba>>24&255,M=D.rgba>>16&255,S=D.rgba>>8&255;return u=E+Math.round((w-E)*f),i=M+Math.round((F-M)*f),s=S+Math.round((b-S)*f),{css:p.toCss(u,i,s),rgba:p.toRgba(u,i,s)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,w){let F=m.ensureContrastRatio(D.rgba,g.rgba,w);if(F)return m.toColor(F>>24&255,F>>16&255,F>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,i,s]=m.toChannels(g),{css:p.toCss(u,i,s),rgba:g}},C.opacity=T,C.multiplyOpacity=function(D,g){return f=255&D.rgba,T(D,f*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(d||(o.color=d={})),function(C){let T,D;if(!l.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let w=g.getContext("2d",{willReadFrequently:!0});w&&(T=w,T.globalCompositeOperation="copy",D=T.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),m.toColor(u,i,s);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),f=parseInt(g.slice(4,5).repeat(2),16),m.toColor(u,i,s,f);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let w=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return u=parseInt(w[1]),i=parseInt(w[2]),s=parseInt(w[3]),f=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),m.toColor(u,i,s,f);if(!T||!D)throw new Error("css.toColor: Unsupported css format");if(T.fillStyle=D,T.fillStyle=g,typeof T.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(T.fillRect(0,0,1,1),[u,i,s,f]=T.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(u,i,s,f),css:g}}}(c||(o.css=c={})),function(C){function T(D,g,w){let F=D/255,b=g/255,E=w/255;return .2126*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}C.relativeLuminance=function(D){return T(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=T}(_||(o.rgb=_={})),function(C){function T(g,w,F){let b=g>>24&255,E=g>>16&255,M=g>>8&255,S=w>>24&255,x=w>>16&255,L=w>>8&255,R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));for(;R<F&&(S>0||x>0||L>0);)S-=Math.max(0,Math.ceil(.1*S)),x-=Math.max(0,Math.ceil(.1*x)),L-=Math.max(0,Math.ceil(.1*L)),R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));return(S<<24|x<<16|L<<8|255)>>>0}function D(g,w,F){let b=g>>24&255,E=g>>16&255,M=g>>8&255,S=w>>24&255,x=w>>16&255,L=w>>8&255,R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));for(;R<F&&(S<255||x<255||L<255);)S=Math.min(255,S+Math.ceil(.1*(255-S))),x=Math.min(255,x+Math.ceil(.1*(255-x))),L=Math.min(255,L+Math.ceil(.1*(255-L))),R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));return(S<<24|x<<16|L<<8|255)>>>0}C.ensureContrastRatio=function(g,w,F){let b=_.relativeLuminance(g>>8),E=_.relativeLuminance(w>>8);if(y(b,E)<F){if(E<b){let x=T(g,w,F),L=y(b,_.relativeLuminance(x>>8));if(L<F){let R=D(g,w,F);return L>y(b,_.relativeLuminance(R>>8))?x:R}return x}let M=D(g,w,F),S=y(b,_.relativeLuminance(M>>8));if(S<F){let x=T(g,w,F);return S>y(b,_.relativeLuminance(x>>8))?M:x}return M}},C.reduceLuminance=T,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,w,F,b){return{css:p.toCss(g,w,F,b),rgba:p.toRgba(g,w,F,b)}}}(m||(o.rgba=m={})),o.toPaddedHex=v,o.contrastRatio=y},8969:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;let l=r(844),u=r(2585),i=r(4348),s=r(7866),f=r(744),p=r(7302),d=r(6975),c=r(8460),_=r(1753),m=r(1480),v=r(7994),y=r(9282),C=r(5435),T=r(5981),D=r(2660),g=!1;class w extends l.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(b=>{var E;(E=this._onScrollApi)===null||E===void 0||E.fire(b.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(b){for(let E in b)this.optionsService.options[E]=b[E]}constructor(b){super(),this._windowsWrappingHeuristics=this.register(new l.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new i.InstantiationService,this.optionsService=this.register(new p.OptionsService(b)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(s.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(_.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(m.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(v.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(E=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(E=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new T.WriteBuffer((E,M)=>this._inputHandler.parse(E,M))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(b,E){this._writeBuffer.write(b,E)}writeSync(b,E){this._logService.logLevel<=u.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(b,E)}resize(b,E){isNaN(b)||isNaN(E)||(b=Math.max(b,f.MINIMUM_COLS),E=Math.max(E,f.MINIMUM_ROWS),this._bufferService.resize(b,E))}scroll(b,E=!1){this._bufferService.scroll(b,E)}scrollLines(b,E,M){this._bufferService.scrollLines(b,E,M)}scrollPages(b){this.scrollLines(b*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(b){let E=b-this._bufferService.buffer.ydisp;E!==0&&this.scrollLines(E)}registerEscHandler(b,E){return this._inputHandler.registerEscHandler(b,E)}registerDcsHandler(b,E){return this._inputHandler.registerDcsHandler(b,E)}registerCsiHandler(b,E){return this._inputHandler.registerCsiHandler(b,E)}registerOscHandler(b,E){return this._inputHandler.registerOscHandler(b,E)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let b=!1,E=this.optionsService.rawOptions.windowsPty;E&&E.buildNumber!==void 0&&E.buildNumber!==void 0?b=E.backend==="conpty"&&E.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(b=!0),b?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let b=[];b.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),b.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,l.toDisposable)(()=>{for(let E of b)E.dispose()})}}}o.CoreTerminal=w},8460:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===r)return void this._listeners.splice(l,1)}}})),this._event}fire(r,l){let u=[];for(let i=0;i<this._listeners.length;i++)u.push(this._listeners[i]);for(let i=0;i<u.length;i++)u[i].call(void 0,r,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(r,l){return r(u=>l.fire(u))}},5435:function(h,o,r){var l=this&&this.__decorate||function(R,A,I,$){var H,P=arguments.length,q=P<3?A:$===null?$=Object.getOwnPropertyDescriptor(A,I):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(R,A,I,$);else for(var G=R.length-1;G>=0;G--)(H=R[G])&&(q=(P<3?H(q):P>3?H(A,I,q):H(A,I))||q);return P>3&&q&&Object.defineProperty(A,I,q),q},u=this&&this.__param||function(R,A){return function(I,$){A(I,$,R)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;let i=r(2584),s=r(7116),f=r(2015),p=r(844),d=r(482),c=r(8437),_=r(8460),m=r(643),v=r(511),y=r(3734),C=r(2585),T=r(6242),D=r(6351),g=r(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},F=131072;function b(R,A){if(R>24)return A.setWinLines||!1;switch(R){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var E;(function(R){R[R.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",R[R.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(E||(o.WindowsOptionsReportType=E={}));let M=0;class S extends p.Disposable{getAttrData(){return this._curAttrData}constructor(A,I,$,H,P,q,G,B,Q=new f.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=I,this._coreService=$,this._logService=H,this._optionsService=P,this._oscLinkService=q,this._coreMouseService=G,this._unicodeService=B,this._parser=Q,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new v.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new _.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new _.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new _.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new _.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new _.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new _.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new _.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new _.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new _.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new _.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new _.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new _.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new _.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new x(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,W)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:W.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,W,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:W,data:U})}),this._parser.setDcsHandlerFallback((O,W,U)=>{W==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:W,payload:U})}),this._parser.setPrintHandler((O,W,U)=>this.print(O,W,U)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(i.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(i.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(i.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(i.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(i.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(i.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(i.C1.IND,()=>this.index()),this._parser.setExecuteHandler(i.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(i.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new T.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new T.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new T.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new T.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new T.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new T.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new T.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new T.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new T.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new T.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new T.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new T.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let O in s.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((O,W)=>this.requestStatusString(O,W)))}_preserveStack(A,I,$,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=$,this._parseStack.position=H}_logSlowResolvingAsync(A){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([A,new Promise((I,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,I){let $,H=this._activeBuffer.x,P=this._activeBuffer.y,q=0,G=this._parseStack.paused;if(G){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync($),$;H=this._parseStack.cursorStartX,P=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>F&&(q=this._parseStack.position+F)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,B=>String.fromCharCode(B)).join("")}"`),typeof A=="string"?A.split("").map(B=>B.charCodeAt(0)):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<F&&(this._parseBuffer=new Uint32Array(Math.min(A.length,F))),G||this._dirtyRowTracker.clearRange(),A.length>F)for(let B=q;B<A.length;B+=F){let Q=B+F<A.length?B+F:A.length,O=typeof A=="string"?this._stringDecoder.decode(A.substring(B,Q),this._parseBuffer):this._utf8Decoder.decode(A.subarray(B,Q),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,O))return this._preserveStack(H,P,O,B),this._logSlowResolvingAsync($),$}else if(!G){let B=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,B))return this._preserveStack(H,P,B,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===H&&this._activeBuffer.y===P||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,I,$){let H,P,q=this._charsetService.charset,G=this._optionsService.rawOptions.screenReaderMode,B=this._bufferService.cols,Q=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,W=this._curAttrData,U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-I>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodePoint(this._activeBuffer.x-1,0,1,W.fg,W.bg,W.extended);for(let k=I;k<$;++k){if(H=A[k],P=this._unicodeService.wcwidth(H),H<127&&q){let te=q[String.fromCharCode(H)];te&&(H=te.charCodeAt(0))}if(G&&this._onA11yChar.fire((0,d.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),P||!this._activeBuffer.x){if(this._activeBuffer.x+P-1>=B){if(Q){for(;this._activeBuffer.x<B;)U.setCellFromCodePoint(this._activeBuffer.x++,0,1,W.fg,W.bg,W.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=B-1,P===2)continue}if(O&&(U.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(W),W),U.getWidth(B-1)===2&&U.setCellFromCodePoint(B-1,m.NULL_CELL_CODE,m.NULL_CELL_WIDTH,W.fg,W.bg,W.extended)),U.setCellFromCodePoint(this._activeBuffer.x++,H,P,W.fg,W.bg,W.extended),P>0)for(;--P;)U.setCellFromCodePoint(this._activeBuffer.x++,0,0,W.fg,W.bg,W.extended)}else U.getWidth(this._activeBuffer.x-1)?U.addCodepointToCell(this._activeBuffer.x-1,H):U.addCodepointToCell(this._activeBuffer.x-2,H)}$-I>0&&(U.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<B&&$-I>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodePoint(this._activeBuffer.x,0,1,W.fg,W.bg,W.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,I){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,I):this._parser.registerCsiHandler(A,$=>!b($.params[0],this._optionsService.rawOptions.windowOptions)||I($))}registerDcsHandler(A,I){return this._parser.registerDcsHandler(A,new D.DcsHandler(I))}registerEscHandler(A,I){return this._parser.registerEscHandler(A,I)}registerOscHandler(A,I){return this._parser.registerOscHandler(A,new T.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=A,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+I)}cursorUp(A){let I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){let I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){let I=A.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){let I=A.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,I,$,H=!1,P=!1){let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);q.replaceCells(I,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),P),H&&(q.isWrapped=!1)}_resetBufferLine(A,I=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),$.isWrapped=!1)}eraseInDisplay(A,I=!1){let $;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);$<this._bufferService.rows;$++)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 3:let H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(A,I=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;I--;)this._activeBuffer.lines.splice(P-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;I--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;let I=A.params[0]||1,$=new Uint32Array(I);for(let H=0;H<I;++H)$[H]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(i.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(i.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(i.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(i.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(i.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,s.DEFAULT_CHARSET),this._charsetService.setgCharset(1,s.DEFAULT_CHARSET),this._charsetService.setgCharset(2,s.DEFAULT_CHARSET),this._charsetService.setgCharset(3,s.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,I){let $=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:P}=this._coreMouseService,q=this._coreService,{buffers:G,cols:B}=this._bufferService,{active:Q,alt:O}=G,W=this._optionsService.rawOptions,U=ye=>ye?1:2,k=A.params[0];return te=k,j=I?k===2?4:k===4?U(q.modes.insertMode):k===12?3:k===20?U(W.convertEol):0:k===1?U($.applicationCursorKeys):k===3?W.windowOptions.setWinLines?B===80?2:B===132?1:0:0:k===6?U($.origin):k===7?U($.wraparound):k===8?3:k===9?U(H==="X10"):k===12?U(W.cursorBlink):k===25?U(!q.isCursorHidden):k===45?U($.reverseWraparound):k===66?U($.applicationKeypad):k===67?4:k===1e3?U(H==="VT200"):k===1002?U(H==="DRAG"):k===1003?U(H==="ANY"):k===1004?U($.sendFocus):k===1005?4:k===1006?U(P==="SGR"):k===1015?4:k===1016?U(P==="SGR_PIXELS"):k===1048?1:k===47||k===1047||k===1049?U(Q===O):k===2004?U($.bracketedPasteMode):0,q.triggerDataEvent(`${i.C0.ESC}[${I?"":"?"}${te};${j}$y`),!0;var te,j}_updateAttrColor(A,I,$,H,P){return I===2?(A|=50331648,A&=-16777216,A|=y.AttributeData.fromColorRGB([$,H,P])):I===5&&(A&=-50331904,A|=33554432|255&$),A}_extractColor(A,I,$){let H=[0,0,-1,0,0,0],P=0,q=0;do{if(H[q+P]=A.params[I+q],A.hasSubParams(I+q)){let G=A.getSubParams(I+q),B=0;do H[1]===5&&(P=1),H[q+B+1+P]=G[B];while(++B<G.length&&B+q+1+P<H.length);break}if(H[1]===5&&q+P>=2||H[1]===2&&q+P>=5)break;H[1]&&(P=1)}while(++q+I<A.length&&q+P<H.length);for(let G=2;G<H.length;++G)H[G]===-1&&(H[G]=0);switch(H[0]){case 38:$.fg=this._updateAttrColor($.fg,H[1],H[3],H[4],H[5]);break;case 48:$.bg=this._updateAttrColor($.bg,H[1],H[3],H[4],H[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,H[1],H[3],H[4],H[5])}return q}_processUnderline(A,I){I.extended=I.extended.clone(),(!~A||A>5)&&(A=1),I.extended.underlineStyle=A,I.fg|=268435456,A===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(A){A.fg=c.DEFAULT_ATTR_DATA.fg,A.bg=c.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;let I=A.length,$,H=this._curAttrData;for(let P=0;P<I;P++)$=A.params[P],$>=30&&$<=37?(H.fg&=-50331904,H.fg|=16777216|$-30):$>=40&&$<=47?(H.bg&=-50331904,H.bg|=16777216|$-40):$>=90&&$<=97?(H.fg&=-50331904,H.fg|=16777224|$-90):$>=100&&$<=107?(H.bg&=-50331904,H.bg|=16777224|$-100):$===0?this._processSGR0(H):$===1?H.fg|=134217728:$===3?H.bg|=67108864:$===4?(H.fg|=268435456,this._processUnderline(A.hasSubParams(P)?A.getSubParams(P)[0]:1,H)):$===5?H.fg|=536870912:$===7?H.fg|=67108864:$===8?H.fg|=1073741824:$===9?H.fg|=2147483648:$===2?H.bg|=134217728:$===21?this._processUnderline(2,H):$===22?(H.fg&=-134217729,H.bg&=-134217729):$===23?H.bg&=-67108865:$===24?(H.fg&=-268435457,this._processUnderline(0,H)):$===25?H.fg&=-536870913:$===27?H.fg&=-67108865:$===28?H.fg&=-1073741825:$===29?H.fg&=2147483647:$===39?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):$===49?(H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?P+=this._extractColor(A,P,H):$===53?H.bg|=1073741824:$===55?H.bg&=-1073741825:$===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):$===100?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${i.C0.ESC}[0n`);break;case 6:let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${i.C0.ESC}[${I};${$}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${i.C0.ESC}[?${I};${$}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){let I=A.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let $=I%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(A){let I=A.params[0]||1,$;return(A.length<2||($=A.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(A){if(!b(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;let I=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(E.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(E.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${i.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){let I=[],$=A.split(";");for(;$.length>1;){let H=$.shift(),P=$.shift();if(/^\d+$/.exec(H)){let q=parseInt(H);if(L(q))if(P==="?")I.push({type:0,index:q});else{let G=(0,g.parseColor)(P);G&&I.push({type:1,index:q,color:G})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(A){let I=A.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(A,I){this._getCurrentLinkId()&&this._finishHyperlink();let $=A.split(":"),H,P=$.findIndex(q=>q.startsWith("id="));return P!==-1&&(H=$[P].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,I){let $=A.split(";");for(let H=0;H<$.length&&!(I>=this._specialColors.length);++H,++I)if($[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{let P=(0,g.parseColor)($[H]);P&&this._onColor.fire([{type:1,index:this._specialColors[I],color:P}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;let I=[],$=A.split(";");for(let H=0;H<$.length;++H)if(/^\d+$/.exec($[H])){let P=parseInt($[H]);L(P)&&I.push({type:2,index:P})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,s.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(w[A[0]],s.CHARSETS[A[1]]||s.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){let A=new v.CellData;A.content=4194373,A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){let $=this._activeBuffer.ybase+this._activeBuffer.y+I,H=this._activeBuffer.lines.get($);H&&(H.fill(A),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,I){let $=this._bufferService.buffer,H=this._optionsService.rawOptions;return(P=>(this._coreService.triggerDataEvent(`${i.C0.ESC}${P}${i.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,I){this._dirtyRowTracker.markRangeDirty(A,I)}}o.InputHandler=S;let x=class{constructor(R){this._bufferService=R,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(R){R<this.start?this.start=R:R>this.end&&(this.end=R)}markRangeDirty(R,A){R>A&&(M=R,R=A,A=M),R<this.start&&(this.start=R),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function L(R){return 0<=R&&R<256}x=l([u(0,C.IBufferService)],x)},844:(h,o)=>{function r(l){for(let u of l)u.dispose();l.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){let u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var u;this._isDisposed||l===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},o.toDisposable=function(l){return{dispose:l}},o.disposeArray=r,o.getDisposeArrayDisposable=function(l){return{dispose:()=>r(l)}}},1505:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(u,i,s){this._data[u]||(this._data[u]={}),this._data[u][i]=s}get(u,i){return this._data[u]?this._data[u][i]:void 0}clear(){this._data={}}}o.TwoKeyMap=r,o.FourKeyMap=class{constructor(){this._data=new r}set(l,u,i,s,f){this._data.get(l,u)||this._data.set(l,u,new r),this._data.get(l,u).set(i,s,f)}get(l,u,i,s){var f;return(f=this._data.get(l,u))===null||f===void 0?void 0:f.get(i,s)}clear(){this._data.clear()}}},6114:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof navigator>"u";let r=o.isNode?"node":navigator.userAgent,l=o.isNode?"node":navigator.platform;o.isFirefox=r.includes("Firefox"),o.isLegacyEdge=r.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(r),o.getSafariVersion=function(){if(!o.isSafari)return 0;let u=r.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),o.isIpad=l==="iPad",o.isIphone=l==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),o.isLinux=l.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(r)},6106:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let r=0;o.SortedList=class{constructor(l){this._getKey=l,this._array=[]}clear(){this._array.length=0}insert(l){this._array.length!==0?(r=this._search(this._getKey(l)),this._array.splice(r,0,l)):this._array.push(l)}delete(l){if(this._array.length===0)return!1;let u=this._getKey(l);if(u===void 0||(r=this._search(u),r===-1)||this._getKey(this._array[r])!==u)return!1;do if(this._array[r]===l)return this._array.splice(r,1),!0;while(++r<this._array.length&&this._getKey(this._array[r])===u);return!1}*getKeyIterator(l){if(this._array.length!==0&&(r=this._search(l),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===l))do yield this._array[r];while(++r<this._array.length&&this._getKey(this._array[r])===l)}forEachByKey(l,u){if(this._array.length!==0&&(r=this._search(l),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===l))do u(this._array[r]);while(++r<this._array.length&&this._getKey(this._array[r])===l)}values(){return[...this._array].values()}_search(l){let u=0,i=this._array.length-1;for(;i>=u;){let s=u+i>>1,f=this._getKey(this._array[s]);if(f>l)i=s-1;else{if(!(f<l)){for(;s>0&&this._getKey(this._array[s-1])===l;)s--;return s}u=s+1}}return u}}},7226:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;let l=r(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let p=0,d=0,c=f.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),d=Math.max(p,d),_=f.timeRemaining(),1.5*d>_)return c-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-p))}ms`),void this._start();c=_}this.clear()}}class i extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let p=Date.now()+f;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}o.PriorityTaskQueue=i,o.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(s){return requestIdleCallback(s)}_cancelCallback(s){cancelIdleCallback(s)}}:i,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(s){this._queue.clear(),this._queue.enqueue(s)}flush(){this._queue.flush()}}},9282:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;let l=r(643);o.updateWindowsModeWrappedState=function(u){let i=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),s=i?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&s&&(f.isWrapped=s[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&s[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(i){return[i>>>16&255,i>>>8&255,255&i]}static fromColorRGB(i){return(255&i[0])<<16|(255&i[1])<<8|255&i[2]}clone(){let i=new r;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}o.AttributeData=r;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(i){this._ext&=-67108864,this._ext|=67108863&i}get urlId(){return this._urlId}set urlId(i){this._urlId=i}constructor(i=0,s=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=s}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=l},9092:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;let l=r(6349),u=r(7226),i=r(3734),s=r(8437),f=r(4634),p=r(511),d=r(643),c=r(4863),_=r(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(m,v,y){this._hasScrollback=m,this._optionsService=v,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=s.DEFAULT_ATTR_DATA.clone(),this.savedCharset=_.DEFAULT_CHARSET,this.markers=[],this._nullCell=p.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=p.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(m){return m?(this._nullCell.fg=m.fg,this._nullCell.bg=m.bg,this._nullCell.extended=m.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new i.ExtendedAttrs),this._nullCell}getWhitespaceCell(m){return m?(this._whitespaceCell.fg=m.fg,this._whitespaceCell.bg=m.bg,this._whitespaceCell.extended=m.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new i.ExtendedAttrs),this._whitespaceCell}getBlankLine(m,v){return new s.BufferLine(this._bufferService.cols,this.getNullCell(m),v)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let m=this.ybase+this.y-this.ydisp;return m>=0&&m<this._rows}_getCorrectBufferLength(m){if(!this._hasScrollback)return m;let v=m+this._optionsService.rawOptions.scrollback;return v>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:v}fillViewportRows(m){if(this.lines.length===0){m===void 0&&(m=s.DEFAULT_ATTR_DATA);let v=this._rows;for(;v--;)this.lines.push(this.getBlankLine(m))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(m,v){let y=this.getNullCell(s.DEFAULT_ATTR_DATA),C=0,T=this._getCorrectBufferLength(v);if(T>this.lines.maxLength&&(this.lines.maxLength=T),this.lines.length>0){if(this._cols<m)for(let g=0;g<this.lines.length;g++)C+=+this.lines.get(g).resize(m,y);let D=0;if(this._rows<v)for(let g=this._rows;g<v;g++)this.lines.length<v+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new s.BufferLine(m,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new s.BufferLine(m,y)));else for(let g=this._rows;g>v;g--)this.lines.length>v+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(T<this.lines.maxLength){let g=this.lines.length-T;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=T}this.x=Math.min(this.x,m-1),this.y=Math.min(this.y,v-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,m-1),this.scrollTop=0}if(this.scrollBottom=v-1,this._isReflowEnabled&&(this._reflow(m,v),this._cols>m))for(let D=0;D<this.lines.length;D++)C+=+this.lines.get(D).resize(m,y);this._cols=m,this._rows=v,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let m=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,m=!1);let v=0;for(;this._memoryCleanupPosition<this.lines.length;)if(v+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),v>100)return!0;return m}get _isReflowEnabled(){let m=this._optionsService.rawOptions.windowsPty;return m&&m.buildNumber?this._hasScrollback&&m.backend==="conpty"&&m.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(m,v){this._cols!==m&&(m>this._cols?this._reflowLarger(m,v):this._reflowSmaller(m,v))}_reflowLarger(m,v){let y=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,m,this.ybase+this.y,this.getNullCell(s.DEFAULT_ATTR_DATA));if(y.length>0){let C=(0,f.reflowLargerCreateNewLayout)(this.lines,y);(0,f.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(m,v,C.countRemoved)}}_reflowLargerAdjustViewport(m,v,y){let C=this.getNullCell(s.DEFAULT_ATTR_DATA),T=y;for(;T-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<v&&this.lines.push(new s.BufferLine(m,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(m,v){let y=this.getNullCell(s.DEFAULT_ATTR_DATA),C=[],T=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=m)continue;let w=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),w.unshift(g);let F=this.ybase+this.y;if(F>=D&&F<D+w.length)continue;let b=w[w.length-1].getTrimmedLength(),E=(0,f.reflowSmallerGetNewLineLengths)(w,this._cols,m),M=E.length-w.length,S;S=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let x=[];for(let H=0;H<M;H++){let P=this.getBlankLine(s.DEFAULT_ATTR_DATA,!0);x.push(P)}x.length>0&&(C.push({start:D+w.length+T,newLines:x}),T+=x.length),w.push(...x);let L=E.length-1,R=E[L];R===0&&(L--,R=E[L]);let A=w.length-M-1,I=b;for(;A>=0;){let H=Math.min(I,R);if(w[L]===void 0)break;if(w[L].copyCellsFrom(w[A],I-H,R-H,H,!0),R-=H,R===0&&(L--,R=E[L]),I-=H,I===0){A--;let P=Math.max(A,0);I=(0,f.getWrappedLineTrimmedLength)(w,P,this._cols)}}for(let H=0;H<w.length;H++)E[H]<m&&w[H].setCell(E[H],y);let $=M-S;for(;$-- >0;)this.ybase===0?this.y<v-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+T)-v&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+v-1)}if(C.length>0){let D=[],g=[];for(let L=0;L<this.lines.length;L++)g.push(this.lines.get(L));let w=this.lines.length,F=w-1,b=0,E=C[b];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+T);let M=0;for(let L=Math.min(this.lines.maxLength-1,w+T-1);L>=0;L--)if(E&&E.start>F+M){for(let R=E.newLines.length-1;R>=0;R--)this.lines.set(L--,E.newLines[R]);L++,D.push({index:F+1,amount:E.newLines.length}),M+=E.newLines.length,E=C[++b]}else this.lines.set(L,g[F--]);let S=0;for(let L=D.length-1;L>=0;L--)D[L].index+=S,this.lines.onInsertEmitter.fire(D[L]),S+=D[L].amount;let x=Math.max(0,w+T-this.lines.maxLength);x>0&&this.lines.onTrimEmitter.fire(x)}}translateBufferLineToString(m,v,y=0,C){let T=this.lines.get(m);return T?T.translateToString(v,y,C):""}getWrappedRangeForLine(m){let v=m,y=m;for(;v>0&&this.lines.get(v).isWrapped;)v--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:v,last:y}}setupTabStops(m){for(m!=null?this.tabs[m]||(m=this.prevStop(m)):(this.tabs={},m=0);m<this._cols;m+=this._optionsService.rawOptions.tabStopWidth)this.tabs[m]=!0}prevStop(m){for(m==null&&(m=this.x);!this.tabs[--m]&&m>0;);return m>=this._cols?this._cols-1:m<0?0:m}nextStop(m){for(m==null&&(m=this.x);!this.tabs[++m]&&m<this._cols;);return m>=this._cols?this._cols-1:m<0?0:m}clearMarkers(m){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].line===m&&(this.markers[v].dispose(),this.markers.splice(v--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].dispose(),this.markers.splice(m--,1);this._isClearing=!1}addMarker(m){let v=new c.Marker(m);return this.markers.push(v),v.register(this.lines.onTrim(y=>{v.line-=y,v.line<0&&v.dispose()})),v.register(this.lines.onInsert(y=>{v.line>=y.index&&(v.line+=y.amount)})),v.register(this.lines.onDelete(y=>{v.line>=y.index&&v.line<y.index+y.amount&&v.dispose(),v.line>y.index&&(v.line-=y.amount)})),v.register(v.onDispose(()=>this._removeMarker(v))),v}_removeMarker(m){this._isClearing||this.markers.splice(this.markers.indexOf(m),1)}}},8437:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;let l=r(3734),u=r(511),i=r(643),s=r(482);o.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let f=0;class p{constructor(c,_,m=!1){this.isWrapped=m,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);let v=_||u.CellData.fromCharData([0,i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE]);for(let y=0;y<c;++y)this.setCell(y,v);this.length=c}get(c){let _=this._data[3*c+0],m=2097151&_;return[this._data[3*c+1],2097152&_?this._combined[c]:m?(0,s.stringFromCodePoint)(m):"",_>>22,2097152&_?this._combined[c].charCodeAt(this._combined[c].length-1):m]}set(c,_){this._data[3*c+1]=_[i.CHAR_DATA_ATTR_INDEX],_[i.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=_[1],this._data[3*c+0]=2097152|c|_[i.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=_[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[i.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){let _=this._data[3*c+0];return 2097152&_?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&_}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){let _=this._data[3*c+0];return 2097152&_?this._combined[c]:2097151&_?(0,s.stringFromCodePoint)(2097151&_):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,_){return f=3*c,_.content=this._data[f+0],_.fg=this._data[f+1],_.bg=this._data[f+2],2097152&_.content&&(_.combinedData=this._combined[c]),268435456&_.bg&&(_.extended=this._extendedAttrs[c]),_}setCell(c,_){2097152&_.content&&(this._combined[c]=_.combinedData),268435456&_.bg&&(this._extendedAttrs[c]=_.extended),this._data[3*c+0]=_.content,this._data[3*c+1]=_.fg,this._data[3*c+2]=_.bg}setCellFromCodePoint(c,_,m,v,y,C){268435456&y&&(this._extendedAttrs[c]=C),this._data[3*c+0]=_|m<<22,this._data[3*c+1]=v,this._data[3*c+2]=y}addCodepointToCell(c,_){let m=this._data[3*c+0];2097152&m?this._combined[c]+=(0,s.stringFromCodePoint)(_):(2097151&m?(this._combined[c]=(0,s.stringFromCodePoint)(2097151&m)+(0,s.stringFromCodePoint)(_),m&=-2097152,m|=2097152):m=_|4194304,this._data[3*c+0]=m)}insertCells(c,_,m,v){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),_<this.length-c){let y=new u.CellData;for(let C=this.length-c-_-1;C>=0;--C)this.setCell(c+_+C,this.loadCell(c+C,y));for(let C=0;C<_;++C)this.setCell(c+C,m)}else for(let y=c;y<this.length;++y)this.setCell(y,m);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs)}deleteCells(c,_,m,v){if(c%=this.length,_<this.length-c){let y=new u.CellData;for(let C=0;C<this.length-c-_;++C)this.setCell(c+C,this.loadCell(c+_+C,y));for(let C=this.length-_;C<this.length;++C)this.setCell(C,m)}else for(let y=c;y<this.length;++y)this.setCell(y,m);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs)}replaceCells(c,_,m,v,y=!1){if(y)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&!this.isProtected(_)&&this.setCellFromCodePoint(_,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs);c<_&&c<this.length;)this.isProtected(c)||this.setCell(c,m),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&this.setCellFromCodePoint(_,0,1,v?.fg||0,v?.bg||0,v?.extended||new l.ExtendedAttrs);c<_&&c<this.length;)this.setCell(c++,m)}resize(c,_){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let m=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*m)this._data=new Uint32Array(this._data.buffer,0,m);else{let v=new Uint32Array(m);v.set(this._data),this._data=v}for(let v=this.length;v<c;++v)this.setCell(v,_)}else{this._data=this._data.subarray(0,m);let v=Object.keys(this._combined);for(let C=0;C<v.length;C++){let T=parseInt(v[C],10);T>=c&&delete this._combined[T]}let y=Object.keys(this._extendedAttrs);for(let C=0;C<y.length;C++){let T=parseInt(y[C],10);T>=c&&delete this._extendedAttrs[T]}}return this.length=c,4*m*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,_=!1){if(_)for(let m=0;m<this.length;++m)this.isProtected(m)||this.setCell(m,c);else{this._combined={},this._extendedAttrs={};for(let m=0;m<this.length;++m)this.setCell(m,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(let _ in c._combined)this._combined[_]=c._combined[_];this._extendedAttrs={};for(let _ in c._extendedAttrs)this._extendedAttrs[_]=c._extendedAttrs[_];this.isWrapped=c.isWrapped}clone(){let c=new p(0);c._data=new Uint32Array(this._data),c.length=this.length;for(let _ in this._combined)c._combined[_]=this._combined[_];for(let _ in this._extendedAttrs)c._extendedAttrs[_]=this._extendedAttrs[_];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,_,m,v,y){let C=c._data;if(y)for(let D=v-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(m+D)+g]=C[3*(_+D)+g];268435456&C[3*(_+D)+2]&&(this._extendedAttrs[m+D]=c._extendedAttrs[_+D])}else for(let D=0;D<v;D++){for(let g=0;g<3;g++)this._data[3*(m+D)+g]=C[3*(_+D)+g];268435456&C[3*(_+D)+2]&&(this._extendedAttrs[m+D]=c._extendedAttrs[_+D])}let T=Object.keys(c._combined);for(let D=0;D<T.length;D++){let g=parseInt(T[D],10);g>=_&&(this._combined[g-_+m]=c._combined[g])}}translateToString(c=!1,_=0,m=this.length){c&&(m=Math.min(m,this.getTrimmedLength()));let v="";for(;_<m;){let y=this._data[3*_+0],C=2097151&y;v+=2097152&y?this._combined[_]:C?(0,s.stringFromCodePoint)(C):i.WHITESPACE_CELL_CHAR,_+=y>>22||1}return v}}o.BufferLine=p},4841:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(r,l){if(r.start.y>r.end.y)throw new Error(`Buffer range end (${r.end.x}, ${r.end.y}) cannot be before start (${r.start.x}, ${r.start.y})`);return l*(r.end.y-r.start.y)+(r.end.x-r.start.x+1)}},4634:(h,o)=>{function r(l,u,i){if(u===l.length-1)return l[u].getTrimmedLength();let s=!l[u].hasContent(i-1)&&l[u].getWidth(i-1)===1,f=l[u+1].getWidth(0)===2;return s&&f?i-1:i}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(l,u,i,s,f){let p=[];for(let d=0;d<l.length-1;d++){let c=d,_=l.get(++c);if(!_.isWrapped)continue;let m=[l.get(d)];for(;c<l.length&&_.isWrapped;)m.push(_),_=l.get(++c);if(s>=d&&s<c){d+=m.length-1;continue}let v=0,y=r(m,v,u),C=1,T=0;for(;C<m.length;){let g=r(m,C,u),w=g-T,F=i-y,b=Math.min(w,F);m[v].copyCellsFrom(m[C],T,y,b,!1),y+=b,y===i&&(v++,y=0),T+=b,T===g&&(C++,T=0),y===0&&v!==0&&m[v-1].getWidth(i-1)===2&&(m[v].copyCellsFrom(m[v-1],i-1,y++,1,!1),m[v-1].setCell(i-1,f))}m[v].replaceCells(y,i,f);let D=0;for(let g=m.length-1;g>0&&(g>v||m[g].getTrimmedLength()===0);g--)D++;D>0&&(p.push(d+m.length-D),p.push(D)),d+=m.length-1}return p},o.reflowLargerCreateNewLayout=function(l,u){let i=[],s=0,f=u[s],p=0;for(let d=0;d<l.length;d++)if(f===d){let c=u[++s];l.onDeleteEmitter.fire({index:d-p,amount:c}),d+=c-1,p+=c,f=u[++s]}else i.push(d);return{layout:i,countRemoved:p}},o.reflowLargerApplyNewLayout=function(l,u){let i=[];for(let s=0;s<u.length;s++)i.push(l.get(u[s]));for(let s=0;s<i.length;s++)l.set(s,i[s]);l.length=u.length},o.reflowSmallerGetNewLineLengths=function(l,u,i){let s=[],f=l.map((_,m)=>r(l,m,u)).reduce((_,m)=>_+m),p=0,d=0,c=0;for(;c<f;){if(f-c<i){s.push(f-c);break}p+=i;let _=r(l,d,u);p>_&&(p-=_,d++);let m=l[d].getWidth(p-1)===2;m&&p--;let v=m?i-1:i;s.push(v),c+=v}return s},o.getWrappedLineTrimmedLength=r},5295:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;let l=r(8460),u=r(844),i=r(9092);class s extends u.Disposable{constructor(p,d){super(),this._optionsService=p,this._bufferService=d,this._onBufferActivate=this.register(new l.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new i.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new i.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(p){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(p),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(p,d){this._normal.resize(p,d),this._alt.resize(p,d),this.setupTabStops(p)}setupTabStops(p){this._normal.setupTabStops(p),this._alt.setupTabStops(p)}}o.BufferSet=s},511:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;let l=r(482),u=r(643),i=r(3734);class s extends i.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new i.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let d=new s;return d.setFromCharData(p),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(p[u.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(p[u.CHAR_DATA_CHAR_INDEX].length===2){let c=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let _=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(c-55296)+_-56320+65536|p[u.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[u.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=p[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=s},643:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;let l=r(8460),u=r(844);class i{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=i._nextId++,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}o.Marker=i,i._nextId=1},7116:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},o.CHARSETS.A={"#":"\xA3"},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},o.CHARSETS.C=o.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},o.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},o.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},o.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},o.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},o.CHARSETS.E=o.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},o.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},o.CHARSETS.H=o.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},o.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(h,o)=>{var r,l,u;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,function(i){i.NUL="\0",i.SOH="",i.STX="",i.ETX="",i.EOT="",i.ENQ="",i.ACK="",i.BEL="\x07",i.BS="\b",i.HT="	",i.LF=`
`,i.VT="\v",i.FF="\f",i.CR="\r",i.SO="",i.SI="",i.DLE="",i.DC1="",i.DC2="",i.DC3="",i.DC4="",i.NAK="",i.SYN="",i.ETB="",i.CAN="",i.EM="",i.SUB="",i.ESC="\x1B",i.FS="",i.GS="",i.RS="",i.US="",i.SP=" ",i.DEL="\x7F"}(r||(o.C0=r={})),function(i){i.PAD="\x80",i.HOP="\x81",i.BPH="\x82",i.NBH="\x83",i.IND="\x84",i.NEL="\x85",i.SSA="\x86",i.ESA="\x87",i.HTS="\x88",i.HTJ="\x89",i.VTS="\x8A",i.PLD="\x8B",i.PLU="\x8C",i.RI="\x8D",i.SS2="\x8E",i.SS3="\x8F",i.DCS="\x90",i.PU1="\x91",i.PU2="\x92",i.STS="\x93",i.CCH="\x94",i.MW="\x95",i.SPA="\x96",i.EPA="\x97",i.SOS="\x98",i.SGCI="\x99",i.SCI="\x9A",i.CSI="\x9B",i.ST="\x9C",i.OSC="\x9D",i.PM="\x9E",i.APC="\x9F"}(l||(o.C1=l={})),function(i){i.ST=`${r.ESC}\\`}(u||(o.C1_ESCAPED=u={}))},7399:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;let l=r(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(i,s,f,p){let d={type:0,cancel:!1,key:void 0},c=(i.shiftKey?1:0)|(i.altKey?2:0)|(i.ctrlKey?4:0)|(i.metaKey?8:0);switch(i.keyCode){case 0:i.key==="UIKeyInputUpArrow"?d.key=s?l.C0.ESC+"OA":l.C0.ESC+"[A":i.key==="UIKeyInputLeftArrow"?d.key=s?l.C0.ESC+"OD":l.C0.ESC+"[D":i.key==="UIKeyInputRightArrow"?d.key=s?l.C0.ESC+"OC":l.C0.ESC+"[C":i.key==="UIKeyInputDownArrow"&&(d.key=s?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(i.altKey){d.key=l.C0.ESC+l.C0.DEL;break}d.key=l.C0.DEL;break;case 9:if(i.shiftKey){d.key=l.C0.ESC+"[Z";break}d.key=l.C0.HT,d.cancel=!0;break;case 13:d.key=i.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,d.cancel=!0;break;case 27:d.key=l.C0.ESC,i.altKey&&(d.key=l.C0.ESC+l.C0.ESC),d.cancel=!0;break;case 37:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"D",d.key===l.C0.ESC+"[1;3D"&&(d.key=l.C0.ESC+(f?"b":"[1;5D"))):d.key=s?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"C",d.key===l.C0.ESC+"[1;3C"&&(d.key=l.C0.ESC+(f?"f":"[1;5C"))):d.key=s?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"A",f||d.key!==l.C0.ESC+"[1;3A"||(d.key=l.C0.ESC+"[1;5A")):d.key=s?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"B",f||d.key!==l.C0.ESC+"[1;3B"||(d.key=l.C0.ESC+"[1;5B")):d.key=s?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:i.shiftKey||i.ctrlKey||(d.key=l.C0.ESC+"[2~");break;case 46:d.key=c?l.C0.ESC+"[3;"+(c+1)+"~":l.C0.ESC+"[3~";break;case 36:d.key=c?l.C0.ESC+"[1;"+(c+1)+"H":s?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:d.key=c?l.C0.ESC+"[1;"+(c+1)+"F":s?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:i.shiftKey?d.type=2:i.ctrlKey?d.key=l.C0.ESC+"[5;"+(c+1)+"~":d.key=l.C0.ESC+"[5~";break;case 34:i.shiftKey?d.type=3:i.ctrlKey?d.key=l.C0.ESC+"[6;"+(c+1)+"~":d.key=l.C0.ESC+"[6~";break;case 112:d.key=c?l.C0.ESC+"[1;"+(c+1)+"P":l.C0.ESC+"OP";break;case 113:d.key=c?l.C0.ESC+"[1;"+(c+1)+"Q":l.C0.ESC+"OQ";break;case 114:d.key=c?l.C0.ESC+"[1;"+(c+1)+"R":l.C0.ESC+"OR";break;case 115:d.key=c?l.C0.ESC+"[1;"+(c+1)+"S":l.C0.ESC+"OS";break;case 116:d.key=c?l.C0.ESC+"[15;"+(c+1)+"~":l.C0.ESC+"[15~";break;case 117:d.key=c?l.C0.ESC+"[17;"+(c+1)+"~":l.C0.ESC+"[17~";break;case 118:d.key=c?l.C0.ESC+"[18;"+(c+1)+"~":l.C0.ESC+"[18~";break;case 119:d.key=c?l.C0.ESC+"[19;"+(c+1)+"~":l.C0.ESC+"[19~";break;case 120:d.key=c?l.C0.ESC+"[20;"+(c+1)+"~":l.C0.ESC+"[20~";break;case 121:d.key=c?l.C0.ESC+"[21;"+(c+1)+"~":l.C0.ESC+"[21~";break;case 122:d.key=c?l.C0.ESC+"[23;"+(c+1)+"~":l.C0.ESC+"[23~";break;case 123:d.key=c?l.C0.ESC+"[24;"+(c+1)+"~":l.C0.ESC+"[24~";break;default:if(!i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)if(f&&!p||!i.altKey||i.metaKey)!f||i.altKey||i.ctrlKey||i.shiftKey||!i.metaKey?i.key&&!i.ctrlKey&&!i.altKey&&!i.metaKey&&i.keyCode>=48&&i.key.length===1?d.key=i.key:i.key&&i.ctrlKey&&(i.key==="_"&&(d.key=l.C0.US),i.key==="@"&&(d.key=l.C0.NUL)):i.keyCode===65&&(d.type=1);else{let _=u[i.keyCode],m=_?.[i.shiftKey?1:0];if(m)d.key=l.C0.ESC+m;else if(i.keyCode>=65&&i.keyCode<=90){let v=i.ctrlKey?i.keyCode-64:i.keyCode+32,y=String.fromCharCode(v);i.shiftKey&&(y=y.toUpperCase()),d.key=l.C0.ESC+y}else if(i.keyCode===32)d.key=l.C0.ESC+(i.ctrlKey?l.C0.NUL:" ");else if(i.key==="Dead"&&i.code.startsWith("Key")){let v=i.code.slice(3,4);i.shiftKey||(v=v.toLowerCase()),d.key=l.C0.ESC+v,d.cancel=!0}}else i.keyCode>=65&&i.keyCode<=90?d.key=String.fromCharCode(i.keyCode-64):i.keyCode===32?d.key=l.C0.NUL:i.keyCode>=51&&i.keyCode<=55?d.key=String.fromCharCode(i.keyCode-51+27):i.keyCode===56?d.key=l.C0.DEL:i.keyCode===219?d.key=l.C0.ESC:i.keyCode===220?d.key=l.C0.FS:i.keyCode===221&&(d.key=l.C0.GS)}return d}},482:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},o.utf32ToString=function(r,l=0,u=r.length){let i="";for(let s=l;s<u;++s){let f=r[s];f>65535?(f-=65536,i+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):i+=String.fromCharCode(f)}return i},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,l){let u=r.length;if(!u)return 0;let i=0,s=0;if(this._interim){let f=r.charCodeAt(s++);56320<=f&&f<=57343?l[i++]=1024*(this._interim-55296)+f-56320+65536:(l[i++]=this._interim,l[i++]=f),this._interim=0}for(let f=s;f<u;++f){let p=r.charCodeAt(f);if(55296<=p&&p<=56319){if(++f>=u)return this._interim=p,i;let d=r.charCodeAt(f);56320<=d&&d<=57343?l[i++]=1024*(p-55296)+d-56320+65536:(l[i++]=p,l[i++]=d)}else p!==65279&&(l[i++]=p)}return i}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,l){let u=r.length;if(!u)return 0;let i,s,f,p,d=0,c=0,_=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let T,D=0;for(;(T=63&this.interim[++D])&&D<4;)C<<=6,C|=T;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=g-D;for(;_<w;){if(_>=u)return 0;if(T=r[_++],(192&T)!=128){_--,y=!0;break}this.interim[D++]=T,C<<=6,C|=63&T}y||(g===2?C<128?_--:l[d++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(l[d++]=C):C<65536||C>1114111||(l[d++]=C)),this.interim.fill(0)}let m=u-4,v=_;for(;v<u;){for(;!(!(v<m)||128&(i=r[v])||128&(s=r[v+1])||128&(f=r[v+2])||128&(p=r[v+3]));)l[d++]=i,l[d++]=s,l[d++]=f,l[d++]=p,v+=4;if(i=r[v++],i<128)l[d++]=i;else if((224&i)==192){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(c=(31&i)<<6|63&s,c<128){v--;continue}l[d++]=c}else if((240&i)==224){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[v++],(192&f)!=128){v--;continue}if(c=(15&i)<<12|(63&s)<<6|63&f,c<2048||c>=55296&&c<=57343||c===65279)continue;l[d++]=c}else if((248&i)==240){if(v>=u)return this.interim[0]=i,d;if(s=r[v++],(192&s)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[v++],(192&f)!=128){v--;continue}if(v>=u)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=f,d;if(p=r[v++],(192&p)!=128){v--;continue}if(c=(7&i)<<18|(63&s)<<12|(63&f)<<6|63&p,c<65536||c>1114111)continue;l[d++]=c}}return d}}},225:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;let r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u;o.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let i=0;i<r.length;++i)u.fill(0,r[i][0],r[i][1]+1)}}wcwidth(i){return i<32?0:i<127?1:i<65536?u[i]:function(s,f){let p,d=0,c=f.length-1;if(s<f[0][0]||s>f[c][1])return!1;for(;c>=d;)if(p=d+c>>1,s>f[p][1])d=p+1;else{if(!(s<f[p][0]))return!0;c=p-1}return!1}(i,l)?0:i>=131072&&i<=196605||i>=196608&&i<=262141?2:1}}},5981:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;let l=r(8460),u=r(844);class i extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,p){if(p!==void 0&&this._syncCalls>p)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);let c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,p){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(p),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(p)}_innerWrite(f=0,p=!0){let d=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let c=this._writeBuffer[this._bufferOffset],_=this._action(c,p);if(_){let v=y=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(d,y);return void _.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(v)}let m=this._callbacks[this._bufferOffset];if(m&&m(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=i},5941:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;let r=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function u(i,s){let f=i.toString(16),p=f.length<2?"0"+f:f;switch(s){case 4:return f[0];case 8:return p;case 12:return(p+p).slice(0,3);default:return p+p}}o.parseColor=function(i){if(!i)return;let s=i.toLowerCase();if(s.indexOf("rgb:")===0){s=s.slice(4);let f=r.exec(s);if(f){let p=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/p*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/p*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/p*255)]}}else if(s.indexOf("#")===0&&(s=s.slice(1),l.exec(s)&&[3,6,9,12].includes(s.length))){let f=s.length/3,p=[0,0,0];for(let d=0;d<3;++d){let c=parseInt(s.slice(f*d,f*d+f),16);p[d]=f===1?c<<4:f===2?c:f===3?c>>4:c>>8}return p}},o.toRgbString=function(i,s=16){let[f,p,d]=i;return`rgb:${u(f,s)}/${u(p,s)}/${u(d,s)}`}},5770:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;let l=r(482),u=r(8742),i=r(5770),s=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=s}registerHandler(p,d){this._handlers[p]===void 0&&(this._handlers[p]=[]);let c=this._handlers[p];return c.push(d),{dispose:()=>{let _=c.indexOf(d);_!==-1&&c.splice(_,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}reset(){if(this._active.length)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=s,this._ident=0}hook(p,d){if(this.reset(),this._ident=p,this._active=this._handlers[p]||s,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(p,d,c){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(p,d,c);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(p,d,c))}unhook(p,d=!0){if(this._active.length){let c=!1,_=this._active.length-1,m=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,c=d,m=this._stack.fallThrough,this._stack.paused=!1),!m&&c===!1){for(;_>=0&&(c=this._active[_].unhook(p),c!==!0);_--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,c;_--}for(;_>=0;_--)if(c=this._active[_].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",p);this._active=s,this._ident=0}};let f=new u.Params;f.addParam(0),o.DcsHandler=class{constructor(p){this._handler=p,this._data="",this._params=f,this._hitLimit=!1}hook(p){this._params=p.length>1||p.params[0]?p.clone():f,this._data="",this._hitLimit=!1}put(p,d,c){this._hitLimit||(this._data+=(0,l.utf32ToString)(p,d,c),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(p){let d=!1;if(this._hitLimit)d=!1;else if(p&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(c=>(this._params=f,this._data="",this._hitLimit=!1,c));return this._params=f,this._data="",this._hitLimit=!1,d}}},2015:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;let l=r(844),u=r(8742),i=r(6242),s=r(6351);class f{constructor(_){this.table=new Uint8Array(_)}setDefault(_,m){this.table.fill(_<<4|m)}add(_,m,v,y){this.table[m<<8|_]=v<<4|y}addMany(_,m,v,y){for(let C=0;C<_.length;C++)this.table[m<<8|_[C]]=v<<4|y}}o.TransitionTable=f;let p=160;o.VT500_TRANSITION_TABLE=function(){let c=new f(4095),_=Array.apply(null,Array(256)).map((D,g)=>g),m=(D,g)=>_.slice(D,g),v=m(32,127),y=m(0,24);y.push(25),y.push.apply(y,m(28,32));let C=m(0,14),T;for(T in c.setDefault(1,0),c.addMany(v,0,2,0),C)c.addMany([24,26,153,154],T,3,0),c.addMany(m(128,144),T,3,0),c.addMany(m(144,152),T,3,0),c.add(156,T,0,0),c.add(27,T,11,1),c.add(157,T,4,8),c.addMany([152,158,159],T,0,7),c.add(155,T,11,3),c.add(144,T,11,9);return c.addMany(y,0,3,0),c.addMany(y,1,3,1),c.add(127,1,0,1),c.addMany(y,8,0,8),c.addMany(y,3,3,3),c.add(127,3,0,3),c.addMany(y,4,3,4),c.add(127,4,0,4),c.addMany(y,6,3,6),c.addMany(y,5,3,5),c.add(127,5,0,5),c.addMany(y,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(v,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(m(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(v,7,0,7),c.addMany(y,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(m(64,127),3,7,0),c.addMany(m(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(m(48,60),4,8,4),c.addMany(m(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(m(32,64),6,0,6),c.add(127,6,0,6),c.addMany(m(64,127),6,0,0),c.addMany(m(32,48),3,9,5),c.addMany(m(32,48),5,9,5),c.addMany(m(48,64),5,0,6),c.addMany(m(64,127),5,7,0),c.addMany(m(32,48),4,9,5),c.addMany(m(32,48),1,9,2),c.addMany(m(32,48),2,9,2),c.addMany(m(48,127),2,10,0),c.addMany(m(48,80),1,10,0),c.addMany(m(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(m(96,127),1,10,0),c.add(80,1,11,9),c.addMany(y,9,0,9),c.add(127,9,0,9),c.addMany(m(28,32),9,0,9),c.addMany(m(32,48),9,9,12),c.addMany(m(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(y,11,0,11),c.addMany(m(32,128),11,0,11),c.addMany(m(28,32),11,0,11),c.addMany(y,10,0,10),c.add(127,10,0,10),c.addMany(m(28,32),10,0,10),c.addMany(m(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(m(32,48),10,9,12),c.addMany(y,12,0,12),c.add(127,12,0,12),c.addMany(m(28,32),12,0,12),c.addMany(m(32,48),12,9,12),c.addMany(m(48,64),12,0,11),c.addMany(m(64,127),12,12,13),c.addMany(m(64,127),10,12,13),c.addMany(m(64,127),9,12,13),c.addMany(y,13,13,13),c.addMany(v,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(p,0,2,0),c.add(p,8,5,8),c.add(p,6,0,6),c.add(p,11,0,11),c.add(p,13,13,13),c}();class d extends l.Disposable{constructor(_=o.VT500_TRANSITION_TABLE){super(),this._transitions=_,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(m,v,y)=>{},this._executeHandlerFb=m=>{},this._csiHandlerFb=(m,v)=>{},this._escHandlerFb=m=>{},this._errorHandlerFb=m=>m,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,l.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new i.OscParser),this._dcsParser=this.register(new s.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(_,m=[64,126]){let v=0;if(_.prefix){if(_.prefix.length>1)throw new Error("only one byte as prefix supported");if(v=_.prefix.charCodeAt(0),v&&60>v||v>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(_.intermediates){if(_.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<_.intermediates.length;++C){let T=_.intermediates.charCodeAt(C);if(32>T||T>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");v<<=8,v|=T}}if(_.final.length!==1)throw new Error("final must be a single byte");let y=_.final.charCodeAt(0);if(m[0]>y||y>m[1])throw new Error(`final must be in range ${m[0]} .. ${m[1]}`);return v<<=8,v|=y,v}identToString(_){let m=[];for(;_;)m.push(String.fromCharCode(255&_)),_>>=8;return m.reverse().join("")}setPrintHandler(_){this._printHandler=_}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(_,m){let v=this._identifier(_,[48,126]);this._escHandlers[v]===void 0&&(this._escHandlers[v]=[]);let y=this._escHandlers[v];return y.push(m),{dispose:()=>{let C=y.indexOf(m);C!==-1&&y.splice(C,1)}}}clearEscHandler(_){this._escHandlers[this._identifier(_,[48,126])]&&delete this._escHandlers[this._identifier(_,[48,126])]}setEscHandlerFallback(_){this._escHandlerFb=_}setExecuteHandler(_,m){this._executeHandlers[_.charCodeAt(0)]=m}clearExecuteHandler(_){this._executeHandlers[_.charCodeAt(0)]&&delete this._executeHandlers[_.charCodeAt(0)]}setExecuteHandlerFallback(_){this._executeHandlerFb=_}registerCsiHandler(_,m){let v=this._identifier(_);this._csiHandlers[v]===void 0&&(this._csiHandlers[v]=[]);let y=this._csiHandlers[v];return y.push(m),{dispose:()=>{let C=y.indexOf(m);C!==-1&&y.splice(C,1)}}}clearCsiHandler(_){this._csiHandlers[this._identifier(_)]&&delete this._csiHandlers[this._identifier(_)]}setCsiHandlerFallback(_){this._csiHandlerFb=_}registerDcsHandler(_,m){return this._dcsParser.registerHandler(this._identifier(_),m)}clearDcsHandler(_){this._dcsParser.clearHandler(this._identifier(_))}setDcsHandlerFallback(_){this._dcsParser.setHandlerFallback(_)}registerOscHandler(_,m){return this._oscParser.registerHandler(_,m)}clearOscHandler(_){this._oscParser.clearHandler(_)}setOscHandlerFallback(_){this._oscParser.setHandlerFallback(_)}setErrorHandler(_){this._errorHandler=_}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(_,m,v,y,C){this._parseStack.state=_,this._parseStack.handlers=m,this._parseStack.handlerPos=v,this._parseStack.transition=y,this._parseStack.chunkPos=C}parse(_,m,v){let y,C=0,T=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(v===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let g=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(v===!1&&w>-1){for(;w>=0&&(y=g[w](this._params),y!==!0);w--)if(y instanceof Promise)return this._parseStack.handlerPos=w,y}this._parseStack.handlers=[];break;case 4:if(v===!1&&w>-1){for(;w>=0&&(y=g[w](),y!==!0);w--)if(y instanceof Promise)return this._parseStack.handlerPos=w,y}this._parseStack.handlers=[];break;case 6:if(C=_[this._parseStack.chunkPos],y=this._dcsParser.unhook(C!==24&&C!==26,v),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=_[this._parseStack.chunkPos],y=this._oscParser.end(C!==24&&C!==26,v),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<m;++g){switch(C=_[g],T=this._transitions.table[this.currentState<<8|(C<160?C:p)],T>>4){case 2:for(let M=g+1;;++M){if(M>=m||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}if(++M>=m||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}if(++M>=m||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}if(++M>=m||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let w=this._csiHandlers[this._collect<<8|C],F=w?w.length-1:-1;for(;F>=0&&(y=w[F](this._params),y!==!0);F--)if(y instanceof Promise)return this._preserveStack(3,w,F,T,g),y;F<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++g<m&&(C=_[g])>47&&C<60);g--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let b=this._escHandlers[this._collect<<8|C],E=b?b.length-1:-1;for(;E>=0&&(y=b[E](),y!==!0);E--)if(y instanceof Promise)return this._preserveStack(4,b,E,T,g),y;E<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let M=g+1;;++M)if(M>=m||(C=_[M])===24||C===26||C===27||C>127&&C<p){this._dcsParser.put(_,g,M),g=M-1;break}break;case 14:if(y=this._dcsParser.unhook(C!==24&&C!==26),y)return this._preserveStack(6,[],0,T,g),y;C===27&&(T|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=g+1;;M++)if(M>=m||(C=_[M])<32||C>127&&C<p){this._oscParser.put(_,g,M),g=M-1;break}break;case 6:if(y=this._oscParser.end(C!==24&&C!==26),y)return this._preserveStack(5,[],0,T,g),y;C===27&&(T|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&T}}}o.EscapeSequenceParser=d},6242:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;let l=r(5770),u=r(482),i=[];o.OscParser=class{constructor(){this._state=0,this._active=i,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(s,f){this._handlers[s]===void 0&&(this._handlers[s]=[]);let p=this._handlers[s];return p.push(f),{dispose:()=>{let d=p.indexOf(f);d!==-1&&p.splice(d,1)}}}clearHandler(s){this._handlers[s]&&delete this._handlers[s]}setHandlerFallback(s){this._handlerFb=s}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=i}reset(){if(this._state===2)for(let s=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;s>=0;--s)this._active[s].end(!1);this._stack.paused=!1,this._active=i,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||i,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].start();else this._handlerFb(this._id,"START")}_put(s,f,p){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(s,f,p);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(s,f,p))}start(){this.reset(),this._state=1}put(s,f,p){if(this._state!==3){if(this._state===1)for(;f<p;){let d=s[f++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&p-f>0&&this._put(s,f,p)}}end(s,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let p=!1,d=this._active.length-1,c=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,p=f,c=this._stack.fallThrough,this._stack.paused=!1),!c&&p===!1){for(;d>=0&&(p=this._active[d].end(s),p!==!0);d--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,p;d--}for(;d>=0;d--)if(p=this._active[d].end(!1),p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",s);this._active=i,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(s){this._handler=s,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(s,f,p){this._hitLimit||(this._data+=(0,u.utf32ToString)(s,f,p),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(s){let f=!1;if(this._hitLimit)f=!1;else if(s&&(f=this._handler(this._data),f instanceof Promise))return f.then(p=>(this._data="",this._hitLimit=!1,p));return this._data="",this._hitLimit=!1,f}}},8742:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;let r=2147483647;class l{static fromArray(i){let s=new l;if(!i.length)return s;for(let f=Array.isArray(i[0])?1:0;f<i.length;++f){let p=i[f];if(Array.isArray(p))for(let d=0;d<p.length;++d)s.addSubParam(p[d]);else s.addParam(p)}return s}constructor(i=32,s=32){if(this.maxLength=i,this.maxSubParamsLength=s,s>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(i),this.length=0,this._subParams=new Int32Array(s),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(i),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let i=new l(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i._subParams.set(this._subParams),i._subParamsLength=this._subParamsLength,i._subParamsIdx.set(this._subParamsIdx),i._rejectDigits=this._rejectDigits,i._rejectSubDigits=this._rejectSubDigits,i._digitIsSub=this._digitIsSub,i}toArray(){let i=[];for(let s=0;s<this.length;++s){i.push(this.params[s]);let f=this._subParamsIdx[s]>>8,p=255&this._subParamsIdx[s];p-f>0&&i.push(Array.prototype.slice.call(this._subParams,f,p))}return i}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(i){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=i>r?r:i}}addSubParam(i){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=i>r?r:i,this._subParamsIdx[this.length-1]++}}hasSubParams(i){return(255&this._subParamsIdx[i])-(this._subParamsIdx[i]>>8)>0}getSubParams(i){let s=this._subParamsIdx[i]>>8,f=255&this._subParamsIdx[i];return f-s>0?this._subParams.subarray(s,f):null}getSubParamsAll(){let i={};for(let s=0;s<this.length;++s){let f=this._subParamsIdx[s]>>8,p=255&this._subParamsIdx[s];p-f>0&&(i[s]=this._subParams.slice(f,p))}return i}addDigit(i){let s;if(this._rejectDigits||!(s=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let f=this._digitIsSub?this._subParams:this.params,p=f[s-1];f[s-1]=~p?Math.min(10*p+i,r):i}}o.Params=l},5741:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let r=this._addons.length-1;r>=0;r--)this._addons[r].instance.dispose()}loadAddon(r,l){let u={instance:l,dispose:l.dispose,isDisposed:!1};this._addons.push(u),l.dispose=()=>this._wrappedAddonDispose(u),l.activate(r)}_wrappedAddonDispose(r){if(r.isDisposed)return;let l=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===r){l=u;break}if(l===-1)throw new Error("Could not dispose an addon that has not been loaded");r.isDisposed=!0,r.dispose.apply(r.instance),this._addons.splice(l,1)}}},8771:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;let l=r(3785),u=r(511);o.BufferApiView=class{constructor(i,s){this._buffer=i,this.type=s}init(i){return this._buffer=i,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(i){let s=this._buffer.lines.get(i);if(s)return new l.BufferLineApiView(s)}getNullCell(){return new u.CellData}}},3785:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;let l=r(511);o.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,i){if(!(u<0||u>=this._line.length))return i?(this._line.loadCell(u,i),i):this._line.loadCell(u,new l.CellData)}translateToString(u,i,s){return this._line.translateToString(u,i,s)}}},8285:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;let l=r(8771),u=r(8460),i=r(844);class s extends i.Disposable{constructor(p){super(),this._core=p,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=s},7975:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(r){this._core=r}registerCsiHandler(r,l){return this._core.registerCsiHandler(r,u=>l(u.toArray()))}addCsiHandler(r,l){return this.registerCsiHandler(r,l)}registerDcsHandler(r,l){return this._core.registerDcsHandler(r,(u,i)=>l(u,i.toArray()))}addDcsHandler(r,l){return this.registerDcsHandler(r,l)}registerEscHandler(r,l){return this._core.registerEscHandler(r,l)}addEscHandler(r,l){return this.registerEscHandler(r,l)}registerOscHandler(r,l){return this._core.registerOscHandler(r,l)}addOscHandler(r,l){return this.registerOscHandler(r,l)}}},7090:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(r){this._core=r}register(r){this._core.unicodeService.register(r)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(r){this._core.unicodeService.activeVersion=r}}},744:function(h,o,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,T=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,m,T):y(_,m))||T);return C>3&&T&&Object.defineProperty(_,m,T),T},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;let i=r(8460),s=r(844),f=r(5295),p=r(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let d=o.BufferService=class extends s.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new i.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new i.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(c,this))}resize(c,_){this.cols=c,this.rows=_,this.buffers.resize(c,_),this._onResize.fire({cols:c,rows:_})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,_=!1){let m=this.buffer,v;v=this._cachedBlankLine,v&&v.length===this.cols&&v.getFg(0)===c.fg&&v.getBg(0)===c.bg||(v=m.getBlankLine(c,_),this._cachedBlankLine=v),v.isWrapped=_;let y=m.ybase+m.scrollTop,C=m.ybase+m.scrollBottom;if(m.scrollTop===0){let T=m.lines.isFull;C===m.lines.length-1?T?m.lines.recycle().copyFrom(v):m.lines.push(v.clone()):m.lines.splice(C+1,0,v.clone()),T?this.isUserScrolling&&(m.ydisp=Math.max(m.ydisp-1,0)):(m.ybase++,this.isUserScrolling||m.ydisp++)}else{let T=C-y+1;m.lines.shiftElements(y+1,T-1,-1),m.lines.set(C,v.clone())}this.isUserScrolling||(m.ydisp=m.ybase),this._onScroll.fire(m.ydisp)}scrollLines(c,_,m){let v=this.buffer;if(c<0){if(v.ydisp===0)return;this.isUserScrolling=!0}else c+v.ydisp>=v.ybase&&(this.isUserScrolling=!1);let y=v.ydisp;v.ydisp=Math.max(Math.min(v.ydisp+c,v.ybase),0),y!==v.ydisp&&(_||this._onScroll.fire(v.ydisp))}};o.BufferService=d=l([u(0,p.IOptionsService)],d)},7994:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(r){this.glevel=r,this.charset=this._charsets[r]}setgCharset(r,l){this._charsets[r]=l,this.glevel===r&&(this.charset=l)}}},1753:function(h,o,r){var l=this&&this.__decorate||function(v,y,C,T){var D,g=arguments.length,w=g<3?y:T===null?T=Object.getOwnPropertyDescriptor(y,C):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(v,y,C,T);else for(var F=v.length-1;F>=0;F--)(D=v[F])&&(w=(g<3?D(w):g>3?D(y,C,w):D(y,C))||w);return g>3&&w&&Object.defineProperty(y,C,w),w},u=this&&this.__param||function(v,y){return function(C,T){y(C,T,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;let i=r(2585),s=r(8460),f=r(844),p={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:v=>v.button!==4&&v.action===1&&(v.ctrl=!1,v.alt=!1,v.shift=!1,!0)},VT200:{events:19,restrict:v=>v.action!==32},DRAG:{events:23,restrict:v=>v.action!==32||v.button!==3},ANY:{events:31,restrict:v=>!0}};function d(v,y){let C=(v.ctrl?16:0)|(v.shift?4:0)|(v.alt?8:0);return v.button===4?(C|=64,C|=v.action):(C|=3&v.button,4&v.button&&(C|=64),8&v.button&&(C|=128),v.action===32?C|=32:v.action!==0||y||(C|=3)),C}let c=String.fromCharCode,_={DEFAULT:v=>{let y=[d(v,!1)+32,v.col+32,v.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${c(y[0])}${c(y[1])}${c(y[2])}`},SGR:v=>{let y=v.action===0&&v.button!==4?"m":"M";return`\x1B[<${d(v,!0)};${v.col};${v.row}${y}`},SGR_PIXELS:v=>{let y=v.action===0&&v.button!==4?"m":"M";return`\x1B[<${d(v,!0)};${v.x};${v.y}${y}`}},m=o.CoreMouseService=class extends f.Disposable{constructor(v,y){super(),this._bufferService=v,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new s.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(p))this.addProtocol(C,p[C]);for(let C of Object.keys(_))this.addEncoding(C,_[C]);this.reset()}addProtocol(v,y){this._protocols[v]=y}addEncoding(v,y){this._encodings[v]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(v){if(!this._protocols[v])throw new Error(`unknown protocol "${v}"`);this._activeProtocol=v,this._onProtocolChange.fire(this._protocols[v].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(v){if(!this._encodings[v])throw new Error(`unknown encoding "${v}"`);this._activeEncoding=v}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(v){if(v.col<0||v.col>=this._bufferService.cols||v.row<0||v.row>=this._bufferService.rows||v.button===4&&v.action===32||v.button===3&&v.action!==32||v.button!==4&&(v.action===2||v.action===3)||(v.col++,v.row++,v.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,v,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(v))return!1;let y=this._encodings[this._activeEncoding](v);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=v,!0}explainEvents(v){return{down:!!(1&v),up:!!(2&v),drag:!!(4&v),move:!!(8&v),wheel:!!(16&v)}}_equalEvents(v,y,C){if(C){if(v.x!==y.x||v.y!==y.y)return!1}else if(v.col!==y.col||v.row!==y.row)return!1;return v.button===y.button&&v.action===y.action&&v.ctrl===y.ctrl&&v.alt===y.alt&&v.shift===y.shift}};o.CoreMouseService=m=l([u(0,i.IBufferService),u(1,i.ICoreService)],m)},6975:function(h,o,r){var l=this&&this.__decorate||function(m,v,y,C){var T,D=arguments.length,g=D<3?v:C===null?C=Object.getOwnPropertyDescriptor(v,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(m,v,y,C);else for(var w=m.length-1;w>=0;w--)(T=m[w])&&(g=(D<3?T(g):D>3?T(v,y,g):T(v,y))||g);return D>3&&g&&Object.defineProperty(v,y,g),g},u=this&&this.__param||function(m,v){return function(y,C){v(y,C,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;let i=r(1439),s=r(8460),f=r(844),p=r(2585),d=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),_=o.CoreService=class extends f.Disposable{constructor(m,v,y){super(),this._bufferService=m,this._logService=v,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new s.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new s.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,i.clone)(d),this.decPrivateModes=(0,i.clone)(c)}reset(){this.modes=(0,i.clone)(d),this.decPrivateModes=(0,i.clone)(c)}triggerDataEvent(m,v=!1){if(this._optionsService.rawOptions.disableStdin)return;let y=this._bufferService.buffer;v&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),v&&this._onUserInput.fire(),this._logService.debug(`sending data "${m}"`,()=>m.split("").map(C=>C.charCodeAt(0))),this._onData.fire(m)}triggerBinaryEvent(m){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${m}"`,()=>m.split("").map(v=>v.charCodeAt(0))),this._onBinary.fire(m))}};o.CoreService=_=l([u(0,p.IBufferService),u(1,p.ILogService),u(2,p.IOptionsService)],_)},9074:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;let l=r(8055),u=r(8460),i=r(844),s=r(6106),f=0,p=0;class d extends i.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new s.SortedList(m=>m?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,i.toDisposable)(()=>this.reset()))}registerDecoration(m){if(m.marker.isDisposed)return;let v=new c(m);if(v){let y=v.marker.onDispose(()=>v.dispose());v.onDispose(()=>{v&&(this._decorations.delete(v)&&this._onDecorationRemoved.fire(v),y.dispose())}),this._decorations.insert(v),this._onDecorationRegistered.fire(v)}return v}reset(){for(let m of this._decorations.values())m.dispose();this._decorations.clear()}*getDecorationsAtCell(m,v,y){var C,T,D;let g=0,w=0;for(let F of this._decorations.getKeyIterator(v))g=(C=F.options.x)!==null&&C!==void 0?C:0,w=g+((T=F.options.width)!==null&&T!==void 0?T:1),m>=g&&m<w&&(!y||((D=F.options.layer)!==null&&D!==void 0?D:"bottom")===y)&&(yield F)}forEachDecorationAtCell(m,v,y,C){this._decorations.forEachByKey(v,T=>{var D,g,w;f=(D=T.options.x)!==null&&D!==void 0?D:0,p=f+((g=T.options.width)!==null&&g!==void 0?g:1),m>=f&&m<p&&(!y||((w=T.options.layer)!==null&&w!==void 0?w:"bottom")===y)&&C(T)})}}o.DecorationService=d;class c extends i.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=l.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=l.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(m){super(),this.options=m,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=m.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;let l=r(2585),u=r(8343);class i{constructor(...f){this._entries=new Map;for(let[p,d]of f)this.set(p,d)}set(f,p){let d=this._entries.get(f);return this._entries.set(f,p),d}forEach(f){for(let[p,d]of this._entries.entries())f(p,d)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}o.ServiceCollection=i,o.InstantiationService=class{constructor(){this._services=new i,this._services.set(l.IInstantiationService,this)}setService(s,f){this._services.set(s,f)}getService(s){return this._services.get(s)}createInstance(s,...f){let p=(0,u.getServiceDependencies)(s).sort((_,m)=>_.index-m.index),d=[];for(let _ of p){let m=this._services.get(_.id);if(!m)throw new Error(`[createInstance] ${s.name} depends on UNKNOWN service ${_.id}.`);d.push(m)}let c=p.length>0?p[0].index:f.length;if(f.length!==c)throw new Error(`[createInstance] First service dependency of ${s.name} at position ${c+1} conflicts with ${f.length} static arguments`);return new s(...f,...d)}}},7866:function(h,o,r){var l=this&&this.__decorate||function(c,_,m,v){var y,C=arguments.length,T=C<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,m):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,m,v);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,m,T):y(_,m))||T);return C>3&&T&&Object.defineProperty(_,m,T),T},u=this&&this.__param||function(c,_){return function(m,v){_(m,v,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;let i=r(844),s=r(2585),f={trace:s.LogLevelEnum.TRACE,debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},p,d=o.LogService=class extends i.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let _=0;_<c.length;_++)typeof c[_]=="function"&&(c[_]=c[_]())}_log(c,_,m){this._evalLazyOptionalParams(m),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...m)}trace(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.TRACE&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.trace.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}debug(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.DEBUG&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.debug.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.log,c,_)}info(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.INFO&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.info.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.info,c,_)}warn(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.WARN&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.warn.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.warn,c,_)}error(c,..._){var m,v;this._logLevel<=s.LogLevelEnum.ERROR&&this._log((v=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.error.bind(this._optionsService.options.logger))!==null&&v!==void 0?v:console.error,c,_)}};o.LogService=d=l([u(0,s.IOptionsService)],d),o.setTraceLogger=function(c){p=c},o.traceCall=function(c,_,m){if(typeof m.value!="function")throw new Error("not supported");let v=m.value;m.value=function(...y){if(p.logLevel!==s.LogLevelEnum.TRACE)return v.apply(this,y);p.trace(`GlyphRenderer#${v.name}(${y.map(T=>JSON.stringify(T)).join(", ")})`);let C=v.apply(this,y);return p.trace(`GlyphRenderer#${v.name} return`,C),C}}},7302:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;let l=r(8460),u=r(844),i=r(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:i.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let s=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(d){super(),this._onOptionChange=this.register(new l.EventEmitter),this.onOptionChange=this._onOptionChange.event;let c=Object.assign({},o.DEFAULT_OPTIONS);for(let _ in d)if(_ in c)try{let m=d[_];c[_]=this._sanitizeAndValidateOption(_,m)}catch(m){console.error(m)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(d,c){return this.onOptionChange(_=>{_===d&&c(this.rawOptions[d])})}onMultipleOptionChange(d,c){return this.onOptionChange(_=>{d.indexOf(_)!==-1&&c()})}_setupOptions(){let d=_=>{if(!(_ in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);return this.rawOptions[_]},c=(_,m)=>{if(!(_ in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);m=this._sanitizeAndValidateOption(_,m),this.rawOptions[_]!==m&&(this.rawOptions[_]=m,this._onOptionChange.fire(_))};for(let _ in this.rawOptions){let m={get:d.bind(this,_),set:c.bind(this,_)};Object.defineProperty(this.options,_,m)}}_sanitizeAndValidateOption(d,c){switch(d){case"cursorStyle":if(c||(c=o.DEFAULT_OPTIONS[d]),!function(_){return _==="block"||_==="underline"||_==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${d}`);break;case"wordSeparator":c||(c=o.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=s.includes(c)?c:o.DEFAULT_OPTIONS[d];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${d} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${d} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}o.OptionsService=f},2660:function(h,o,r){var l=this&&this.__decorate||function(f,p,d,c){var _,m=arguments.length,v=m<3?p:c===null?c=Object.getOwnPropertyDescriptor(p,d):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(f,p,d,c);else for(var y=f.length-1;y>=0;y--)(_=f[y])&&(v=(m<3?_(v):m>3?_(p,d,v):_(p,d))||v);return m>3&&v&&Object.defineProperty(p,d,v),v},u=this&&this.__param||function(f,p){return function(d,c){p(d,c,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;let i=r(2585),s=o.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){let p=this._bufferService.buffer;if(f.id===void 0){let y=p.addMarker(p.ybase+p.y),C={data:f,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(C,y)),this._dataByLinkId.set(C.id,C),C.id}let d=f,c=this._getEntryIdKey(d),_=this._entriesWithId.get(c);if(_)return this.addLineToLink(_.id,p.ybase+p.y),_.id;let m=p.addMarker(p.ybase+p.y),v={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(v,m)),this._entriesWithId.set(v.key,v),this._dataByLinkId.set(v.id,v),v.id}addLineToLink(f,p){let d=this._dataByLinkId.get(f);if(d&&d.lines.every(c=>c.line!==p)){let c=this._bufferService.buffer.addMarker(p);d.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(d,c))}}getLinkData(f){var p;return(p=this._dataByLinkId.get(f))===null||p===void 0?void 0:p.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,p){let d=f.lines.indexOf(p);d!==-1&&(f.lines.splice(d,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};o.OscLinkService=s=l([u(0,i.IBufferService)],s)},8343:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;let r="di$target",l="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(u){return u[l]||[]},o.createDecorator=function(u){if(o.serviceRegistry.has(u))return o.serviceRegistry.get(u);let i=function(s,f,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,c,_){c[r]===c?c[l].push({id:d,index:_}):(c[l]=[{id:d,index:_}],c[r]=c)})(i,s,p)};return i.toString=()=>u,o.serviceRegistry.set(u,i),i}},2585:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;let l=r(8343);var u;o.IBufferService=(0,l.createDecorator)("BufferService"),o.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),o.ICoreService=(0,l.createDecorator)("CoreService"),o.ICharsetService=(0,l.createDecorator)("CharsetService"),o.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(i){i[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.OFF=5]="OFF"}(u||(o.LogLevelEnum=u={})),o.ILogService=(0,l.createDecorator)("LogService"),o.IOptionsService=(0,l.createDecorator)("OptionsService"),o.IOscLinkService=(0,l.createDecorator)("OscLinkService"),o.IUnicodeService=(0,l.createDecorator)("UnicodeService"),o.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;let l=r(8460),u=r(225);o.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter,this.onChange=this._onChange.event;let i=new u.UnicodeV6;this.register(i),this._active=i.version,this._activeProvider=i}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(i){if(!this._providers[i])throw new Error(`unknown Unicode version "${i}"`);this._active=i,this._activeProvider=this._providers[i],this._onChange.fire(i)}register(i){this._providers[i.version]=i}wcwidth(i){return this._activeProvider.wcwidth(i)}getStringCellWidth(i){let s=0,f=i.length;for(let p=0;p<f;++p){let d=i.charCodeAt(p);if(55296<=d&&d<=56319){if(++p>=f)return s+this.wcwidth(d);let c=i.charCodeAt(p);56320<=c&&c<=57343?d=1024*(d-55296)+c-56320+65536:s+=this.wcwidth(c)}s+=this.wcwidth(d)}return s}}}},t={};function n(h){var o=t[h];if(o!==void 0)return o.exports;var r=t[h]={exports:{}};return e[h].call(r.exports,r,r.exports,n),r.exports}var a={};return(()=>{var h=a;Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;let o=n(9042),r=n(3236),l=n(844),u=n(5741),i=n(8285),s=n(7975),f=n(7090),p=["cols","rows"];class d extends l.Disposable{constructor(_){super(),this._core=this.register(new r.Terminal(_)),this._addonManager=this.register(new u.AddonManager),this._publicOptions=Object.assign({},this._core.options);let m=y=>this._core.options[y],v=(y,C)=>{this._checkReadonlyOptions(y),this._core.options[y]=C};for(let y in this._core.options){let C={get:m.bind(this,y),set:v.bind(this,y)};Object.defineProperty(this._publicOptions,y,C)}}_checkReadonlyOptions(_){if(p.includes(_))throw new Error(`Option "${_}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new s.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new i.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let _=this._core.coreService.decPrivateModes,m="none";switch(this._core.coreMouseService.activeProtocol){case"X10":m="x10";break;case"VT200":m="vt200";break;case"DRAG":m="drag";break;case"ANY":m="any"}return{applicationCursorKeysMode:_.applicationCursorKeys,applicationKeypadMode:_.applicationKeypad,bracketedPasteMode:_.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:m,originMode:_.origin,reverseWraparoundMode:_.reverseWraparound,sendFocusMode:_.sendFocus,wraparoundMode:_.wraparound}}get options(){return this._publicOptions}set options(_){for(let m in _)this._publicOptions[m]=_[m]}blur(){this._core.blur()}focus(){this._core.focus()}resize(_,m){this._verifyIntegers(_,m),this._core.resize(_,m)}open(_){this._core.open(_)}attachCustomKeyEventHandler(_){this._core.attachCustomKeyEventHandler(_)}registerLinkProvider(_){return this._core.registerLinkProvider(_)}registerCharacterJoiner(_){return this._checkProposedApi(),this._core.registerCharacterJoiner(_)}deregisterCharacterJoiner(_){this._checkProposedApi(),this._core.deregisterCharacterJoiner(_)}registerMarker(_=0){return this._verifyIntegers(_),this._core.registerMarker(_)}registerDecoration(_){var m,v,y;return this._checkProposedApi(),this._verifyPositiveIntegers((m=_.x)!==null&&m!==void 0?m:0,(v=_.width)!==null&&v!==void 0?v:0,(y=_.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(_)}hasSelection(){return this._core.hasSelection()}select(_,m,v){this._verifyIntegers(_,m,v),this._core.select(_,m,v)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(_,m){this._verifyIntegers(_,m),this._core.selectLines(_,m)}dispose(){super.dispose()}scrollLines(_){this._verifyIntegers(_),this._core.scrollLines(_)}scrollPages(_){this._verifyIntegers(_),this._core.scrollPages(_)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(_){this._verifyIntegers(_),this._core.scrollToLine(_)}clear(){this._core.clear()}write(_,m){this._core.write(_,m)}writeln(_,m){this._core.write(_),this._core.write(`\r
`,m)}paste(_){this._core.paste(_)}refresh(_,m){this._verifyIntegers(_,m),this._core.refresh(_,m)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(_){this._addonManager.loadAddon(this,_)}static get strings(){return o}_verifyIntegers(..._){for(let m of _)if(m===1/0||isNaN(m)||m%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(..._){for(let m of _)if(m&&(m===1/0||isNaN(m)||m%1!=0||m<0))throw new Error("This API only accepts positive integers")}}h.Terminal=d})(),a})())});var Qg=Tt((rN,Kg)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var n=function(u,i,s){if(typeof u!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(s=i),n.modules[u]||(n.payloads[u]=s,n.modules[u]=null)};n.modules={},n.payloads={};var a=function(u,i,s){if(typeof i=="string"){var f=r(u,i);if(f!=null)return s&&s(),f}else if(Object.prototype.toString.call(i)==="[object Array]"){for(var p=[],d=0,c=i.length;d<c;++d){var _=r(u,i[d]);if(_==null&&h.original)return;p.push(_)}return s&&s.apply(null,p)||!0}},h=function(u,i){var s=a("",u,i);return s==null&&h.original?h.original.apply(this,arguments):s},o=function(u,i){if(i.indexOf("!")!==-1){var s=i.split("!");return o(u,s[0])+"!"+o(u,s[1])}if(i.charAt(0)=="."){var f=u.split("/").slice(0,-1).join("/");for(i=f+"/"+i;i.indexOf(".")!==-1&&p!=i;){var p=i;i=i.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return i},r=function(u,i){i=o(u,i);var s=n.modules[i];if(!s){if(s=n.payloads[i],typeof s=="function"){var f={},p={id:i,uri:"",exports:f,packaged:!0},d=function(_,m){return a(i,_,m)},c=s(d,f,p);f=c||p.exports,n.modules[i]=f,delete n.payloads[i]}s=n.modules[i]=f||s}return s};function l(u){var i=t;u&&(t[u]||(t[u]={}),i=t[u]),(!i.define||!i.define.packaged)&&(n.original=i.define,i.define=n,i.define.packaged=!0),(!i.require||!i.require.packaged)&&(h.original=i.require,i.require=h,i.require.packaged=!0)}l(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function a(h,o,r){Object.defineProperty(h,o,{value:r,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||a(String.prototype,"startsWith",function(h,o){return o=o||0,this.lastIndexOf(h,o)===o}),String.prototype.endsWith||a(String.prototype,"endsWith",function(h,o){var r=this;(o===void 0||o>r.length)&&(o=r.length),o-=h.length;var l=r.indexOf(h,o);return l!==-1&&l===o}),String.prototype.repeat||a(String.prototype,"repeat",function(h){for(var o="",r=this;h>0;)h&1&&(o+=r),(h>>=1)&&(r+=r);return o}),String.prototype.includes||a(String.prototype,"includes",function(h,o){return this.indexOf(h,o)!=-1}),Object.assign||(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(h),r=1;r<arguments.length;r++){var l=arguments[r];l!=null&&Object.keys(l).forEach(function(u){o[u]=l[u]})}return o}),Object.values||(Object.values=function(h){return Object.keys(h).map(function(o){return h[o]})}),Array.prototype.find||a(Array.prototype,"find",function(h){for(var o=this.length,r=arguments[1],l=0;l<o;l++){var u=this[l];if(h.call(r,u,l,this))return u}}),Array.prototype.findIndex||a(Array.prototype,"findIndex",function(h){for(var o=this.length,r=arguments[1],l=0;l<o;l++){var u=this[l];if(h.call(r,u,l,this))return l}}),Array.prototype.includes||a(Array.prototype,"includes",function(h,o){return this.indexOf(h,o)!=-1}),Array.prototype.fill||a(Array.prototype,"fill",function(h){for(var o=this,r=o.length>>>0,l=arguments[1],u=l>>0,i=u<0?Math.max(r+u,0):Math.min(u,r),s=arguments[2],f=s===void 0?r:s>>0,p=f<0?Math.max(r+f,0):Math.min(f,r);i<p;)o[i]=h,i++;return o}),Array.of||a(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,n){t.deepCopy=function a(h){if(typeof h!="object"||!h)return h;var o;if(Array.isArray(h)){o=[];for(var r=0;r<h.length;r++)o[r]=a(h[r]);return o}if(Object.prototype.toString.call(h)!=="[object Object]")return h;o={};for(var r in h)o[r]=a(h[r]);return o}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";t.last=function(o){return o[o.length-1]},t.stringReverse=function(o){return o.split("").reverse().join("")},t.stringRepeat=function(o,r){for(var l="";r>0;)r&1&&(l+=o),(r>>=1)&&(o+=o);return l};var a=/^\s\s*/,h=/\s\s*$/;t.stringTrimLeft=function(o){return o.replace(a,"")},t.stringTrimRight=function(o){return o.replace(h,"")},t.copyObject=function(o){var r={};for(var l in o)r[l]=o[l];return r},t.copyArray=function(o){for(var r=[],l=0,u=o.length;l<u;l++)o[l]&&typeof o[l]=="object"?r[l]=this.copyObject(o[l]):r[l]=o[l];return r},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(o){for(var r={},l=0;l<o.length;l++)r[o[l]]=1;return r},t.createMap=function(o){var r=Object.create(null);for(var l in o)r[l]=o[l];return r},t.arrayRemove=function(o,r){for(var l=0;l<=o.length;l++)r===o[l]&&o.splice(l,1)},t.escapeRegExp=function(o){return o.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(o){return(""+o).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(o,r){var l=[];return o.replace(r,function(u){l.push({offset:arguments[arguments.length-2],length:u.length})}),l},t.deferredCall=function(o){var r=null,l=function(){r=null,o()},u=function(i){return u.cancel(),r=setTimeout(l,i||0),u};return u.schedule=u,u.call=function(){return this.cancel(),o(),u},u.cancel=function(){return clearTimeout(r),r=null,u},u.isPending=function(){return r},u},t.delayedCall=function(o,r){var l=null,u=function(){l=null,o()},i=function(s){l==null&&(l=setTimeout(u,s||r))};return i.delay=function(s){l&&clearTimeout(l),l=setTimeout(u,s||r)},i.schedule=i,i.call=function(){this.cancel(),o()},i.cancel=function(){l&&clearTimeout(l),l=null},i.isPending=function(){return l},i},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(o,r,l){return l&&o.codePointAt(r)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var a=typeof navigator=="object"?navigator:{},h=(/mac|win|linux/i.exec(a.platform)||["other"])[0].toLowerCase(),o=a.userAgent||"",r=a.appName||"";t.isWin=h=="win",t.isMac=h=="mac",t.isLinux=h=="linux",t.isIE=r=="Microsoft Internet Explorer"||r.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=o.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(o.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(o.split(" Edge/")[1])||void 0,t.isAIR=o.indexOf("AdobeAIR")>=0,t.isAndroid=o.indexOf("Android")>=0,t.isChromeOS=o.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("./useragent"),h="http://www.w3.org/1999/xhtml";t.buildDom=function s(f,p,d){if(typeof f=="string"&&f){var c=document.createTextNode(f);return p&&p.appendChild(c),c}if(!Array.isArray(f))return f&&f.appendChild&&p&&p.appendChild(f),f;if(typeof f[0]!="string"||!f[0]){for(var _=[],m=0;m<f.length;m++){var v=s(f[m],p,d);v&&_.push(v)}return _}var y=document.createElement(f[0]),C=f[1],T=1;C&&typeof C=="object"&&!Array.isArray(C)&&(T=2);for(var m=T;m<f.length;m++)s(f[m],y,d);return T==2&&Object.keys(C).forEach(function(D){var g=C[D];D==="class"?y.className=Array.isArray(g)?g.join(" "):g:typeof g=="function"||D=="value"||D[0]=="$"?y[D]=g:D==="ref"?d&&(d[g]=y):D==="style"?typeof g=="string"&&(y.style.cssText=g):g!=null&&y.setAttribute(D,g)}),p&&p.appendChild(y),y},t.getDocumentHead=function(s){return s||(s=document),s.head||s.getElementsByTagName("head")[0]||s.documentElement},t.createElement=function(s,f){return document.createElementNS?document.createElementNS(f||h,s):document.createElement(s)},t.removeChildren=function(s){s.innerHTML=""},t.createTextNode=function(s,f){var p=f?f.ownerDocument:document;return p.createTextNode(s)},t.createFragment=function(s){var f=s?s.ownerDocument:document;return f.createDocumentFragment()},t.hasCssClass=function(s,f){var p=(s.className+"").split(/\s+/g);return p.indexOf(f)!==-1},t.addCssClass=function(s,f){t.hasCssClass(s,f)||(s.className+=" "+f)},t.removeCssClass=function(s,f){for(var p=s.className.split(/\s+/g);;){var d=p.indexOf(f);if(d==-1)break;p.splice(d,1)}s.className=p.join(" ")},t.toggleCssClass=function(s,f){for(var p=s.className.split(/\s+/g),d=!0;;){var c=p.indexOf(f);if(c==-1)break;d=!1,p.splice(c,1)}return d&&p.push(f),s.className=p.join(" "),d},t.setCssClass=function(s,f,p){p?t.addCssClass(s,f):t.removeCssClass(s,f)},t.hasCssString=function(s,f){var p=0,d;if(f=f||document,d=f.querySelectorAll("style")){for(;p<d.length;)if(d[p++].id===s)return!0}},t.removeElementById=function(s,f){f=f||document,f.getElementById(s)&&f.getElementById(s).remove()};var o,r=[];t.useStrictCSP=function(s){o=s,s==!1?l():r||(r=[])};function l(){var s=r;r=null,s&&s.forEach(function(f){u(f[0],f[1])})}function u(s,f,p){if(!(typeof document>"u")){if(r){if(p)l();else if(p===!1)return r.push([s,f])}if(!o){var d=p;!p||!p.getRootNode?d=document:(d=p.getRootNode(),(!d||d==p)&&(d=document));var c=d.ownerDocument||d;if(f&&t.hasCssString(f,d))return null;f&&(s+=`
/*# sourceURL=ace/css/`+f+" */");var _=t.createElement("style");_.appendChild(c.createTextNode(s)),f&&(_.id=f),d==c&&(d=t.getDocumentHead(c)),d.insertBefore(_,d.firstChild)}}}if(t.importCssString=u,t.importCssStylsheet=function(s,f){t.buildDom(["link",{rel:"stylesheet",href:s}],t.getDocumentHead(f))},t.scrollbarWidth=function(s){var f=t.createElement("ace_inner");f.style.width="100%",f.style.minWidth="0px",f.style.height="200px",f.style.display="block";var p=t.createElement("ace_outer"),d=p.style;d.position="absolute",d.left="-10000px",d.overflow="hidden",d.width="200px",d.minWidth="0px",d.height="150px",d.display="block",p.appendChild(f);var c=s&&s.documentElement||document&&document.documentElement;if(!c)return 0;c.appendChild(p);var _=f.offsetWidth;d.overflow="scroll";var m=f.offsetWidth;return _===m&&(m=p.clientWidth),c.removeChild(p),_-m},t.computedStyle=function(s,f){return window.getComputedStyle(s,"")||{}},t.setStyle=function(s,f,p){s[f]!==p&&(s[f]=p)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=a.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,a.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var i=document.createElement("div");t.HI_DPI&&i.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!a.isEdge&&typeof i.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),i=null}t.HAS_CSS_TRANSFORMS?t.translate=function(s,f,p){s.style.transform="translate("+Math.round(f)+"px, "+Math.round(p)+"px)"}:t.translate=function(s,f,p){s.style.top=Math.round(p)+"px",s.style.left=Math.round(f)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("./dom");t.get=function(h,o){var r=new XMLHttpRequest;r.open("GET",h,!0),r.onreadystatechange=function(){r.readyState===4&&o(r.responseText)},r.send(null)},t.loadScript=function(h,o){var r=a.getDocumentHead(),l=document.createElement("script");l.src=h,r.appendChild(l),l.onload=l.onreadystatechange=function(u,i){(i||!l.readyState||l.readyState=="loaded"||l.readyState=="complete")&&(l=l.onload=l.onreadystatechange=null,i||o())}},t.qualifyURL=function(h){var o=document.createElement("a");return o.href=h,o.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(a,h){a.super_=h,a.prototype=Object.create(h.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(a,h){for(var o in h)a[o]=h[o];return a},t.implement=function(a,h){t.mixin(a,h)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var a={},h=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};a._emit=a._dispatchEvent=function(r,l){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var u=this._eventRegistry[r]||[],i=this._defaultHandlers[r];if(!(!u.length&&!i)){(typeof l!="object"||!l)&&(l={}),l.type||(l.type=r),l.stopPropagation||(l.stopPropagation=h),l.preventDefault||(l.preventDefault=o),u=u.slice();for(var s=0;s<u.length&&(u[s](l,this),!l.propagationStopped);s++);if(i&&!l.defaultPrevented)return i(l,this)}},a._signal=function(r,l){var u=(this._eventRegistry||{})[r];if(u){u=u.slice();for(var i=0;i<u.length;i++)u[i](l,this)}},a.once=function(r,l){var u=this;if(this.on(r,function i(){u.off(r,i),l.apply(null,arguments)}),!l)return new Promise(function(i){l=i})},a.setDefaultHandler=function(r,l){var u=this._defaultHandlers;if(u||(u=this._defaultHandlers={_disabled_:{}}),u[r]){var i=u[r],s=u._disabled_[r];s||(u._disabled_[r]=s=[]),s.push(i);var f=s.indexOf(l);f!=-1&&s.splice(f,1)}u[r]=l},a.removeDefaultHandler=function(r,l){var u=this._defaultHandlers;if(u){var i=u._disabled_[r];if(u[r]==l)i&&this.setDefaultHandler(r,i.pop());else if(i){var s=i.indexOf(l);s!=-1&&i.splice(s,1)}}},a.on=a.addEventListener=function(r,l,u){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[r];return i||(i=this._eventRegistry[r]=[]),i.indexOf(l)==-1&&i[u?"unshift":"push"](l),l},a.off=a.removeListener=a.removeEventListener=function(r,l){this._eventRegistry=this._eventRegistry||{};var u=this._eventRegistry[r];if(u){var i=u.indexOf(l);i!==-1&&u.splice(i,1)}},a.removeAllListeners=function(r){r||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[r]=void 0),this._defaultHandlers&&(this._defaultHandlers[r]=void 0)},t.EventEmitter=a});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,n){t.reportError=function(h,o){var r=new Error(h);r.data=o,typeof console=="object"&&console.error&&console.error(r),setTimeout(function(){throw r})}});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(e,t,n){"no use strict";var a=e("./oop"),h=e("./event_emitter").EventEmitter,o=e("./report_error").reportError,r={setOptions:function(s){Object.keys(s).forEach(function(f){this.setOption(f,s[f])},this)},getOptions:function(s){var f={};if(s)Array.isArray(s)||(f=s,s=Object.keys(f));else{var p=this.$options;s=Object.keys(p).filter(function(d){return!p[d].hidden})}return s.forEach(function(d){f[d]=this.getOption(d)},this),f},setOption:function(s,f){if(this["$"+s]!==f){var p=this.$options[s];if(!p)return l('misspelled option "'+s+'"');if(p.forwardTo)return this[p.forwardTo]&&this[p.forwardTo].setOption(s,f);p.handlesSet||(this["$"+s]=f),p&&p.set&&p.set.call(this,f)}},getOption:function(s){var f=this.$options[s];return f?f.forwardTo?this[f.forwardTo]&&this[f.forwardTo].getOption(s):f&&f.get?f.get.call(this):this["$"+s]:l('misspelled option "'+s+'"')}};function l(s){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var u,i=function(){function s(){this.$defaultOptions={}}return s.prototype.defineOptions=function(f,p,d){return f.$options||(this.$defaultOptions[p]=f.$options={}),Object.keys(d).forEach(function(c){var _=d[c];typeof _=="string"&&(_={forwardTo:_}),_.name||(_.name=c),f.$options[_.name]=_,"initialValue"in _&&(f["$"+_.name]=_.initialValue)}),a.implement(f,r),this},s.prototype.resetOptions=function(f){Object.keys(f.$options).forEach(function(p){var d=f.$options[p];"value"in d&&f.setOption(p,d.value)})},s.prototype.setDefaultValue=function(f,p,d){if(!f){for(f in this.$defaultOptions)if(this.$defaultOptions[f][p])break;if(!this.$defaultOptions[f][p])return!1}var c=this.$defaultOptions[f]||(this.$defaultOptions[f]={});c[p]&&(c.forwardTo?this.setDefaultValue(c.forwardTo,p,d):c[p].value=d)},s.prototype.setDefaultValues=function(f,p){Object.keys(p).forEach(function(d){this.setDefaultValue(f,d,p[d])},this)},s.prototype.setMessages=function(f){u=f},s.prototype.nls=function(f,p){u&&!u[f]&&l("No message found for '"+f+"' in the provided messages, falling back to default English message.");var d=u&&u[f]||f;return p&&(d=d.replace(/\$(\$|[\d]+)/g,function(c,_){return _=="$"?"$":p[_]})),d},s}();i.prototype.warn=l,i.prototype.reportError=o,a.implement(i.prototype,h),t.AppConfig=i});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var a=e("../lib/dom");a.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){"no use strict";var a=e("./lib/lang"),h=e("./lib/net"),o=e("./lib/dom"),r=e("./lib/app_config").AppConfig;n.exports=t=new r;var l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(f){if(!l.hasOwnProperty(f))throw new Error("Unknown config key: "+f);return l[f]},t.set=function(f,p){if(l.hasOwnProperty(f))l[f]=p;else if(this.setDefaultValue("",f,p)==!1)throw new Error("Unknown config key: "+f);f=="useStrictCSP"&&o.useStrictCSP(p)},t.all=function(){return a.copyObject(l)},t.$modes={},t.moduleUrl=function(f,p){if(l.$moduleUrls[f])return l.$moduleUrls[f];var d=f.split("/");p=p||d[d.length-2]||"";var c=p=="snippets"?"/":"-",_=d[d.length-1];if(p=="worker"&&c=="-"){var m=new RegExp("^"+p+"[\\-_]|[\\-_]"+p+"$","g");_=_.replace(m,"")}(!_||_==p)&&d.length>1&&(_=d[d.length-2]);var v=l[p+"Path"];return v==null?v=l.basePath:c=="/"&&(p=c=""),v&&v.slice(-1)!="/"&&(v+="/"),v+p+c+_+this.get("suffix")},t.setModuleUrl=function(f,p){return l.$moduleUrls[f]=p};var u=function(f,p){if(f==="ace/theme/textmate"||f==="./theme/textmate")return p(null,e("./theme/textmate"));if(i)return i(f,p);console.error("loader is not configured")},i;t.setLoader=function(f){i=f},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(f,p){var d;if(Array.isArray(f))var c=f[0],_=f[1];else if(typeof f=="string")var _=f;var m=function(v){if(v&&!t.$loading[_])return p&&p(v);if(t.$loading[_]||(t.$loading[_]=[]),t.$loading[_].push(p),!(t.$loading[_].length>1)){var y=function(){u(_,function(C,T){T&&(t.$loaded[_]=T),t._emit("load.module",{name:_,module:T});var D=t.$loading[_];t.$loading[_]=null,D.forEach(function(g){g&&g(T)})})};if(!t.get("packaged"))return y();h.loadScript(t.moduleUrl(_,c),y),s()}};if(t.dynamicModules[_])t.dynamicModules[_]().then(function(v){v.default?m(v.default):m(v)});else{try{d=this.$require(_)}catch{}m(d||t.$loaded[_])}},t.$require=function(f){if(typeof n.require=="function"){var p="require";return n[p](f)}},t.setModuleLoader=function(f,p){t.dynamicModules[f]=p};var s=function(){!l.basePath&&!l.workerPath&&!l.modePath&&!l.themePath&&!Object.keys(l.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),s=function(){})};t.version="1.32.3"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var a=e("./config");a.setLoader(function(l,u){e([l],function(i){u(null,i)})});var h=function(){return this||typeof window<"u"&&window}();n.exports=function(l){a.init=o,a.$require=e,l.require=e,typeof define=="function"&&(l.define=define)},o(!0);function o(l){if(!(!h||!h.document)){a.set("packaged",l||e.packaged||n.packaged||h.define&&define.packaged);var u={},i="",s=document.currentScript||document._currentScript,f=s&&s.ownerDocument||document;s&&s.src&&(i=s.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var p=f.getElementsByTagName("script"),d=0;d<p.length;d++){var c=p[d],_=c.src||c.getAttribute("src");if(_){for(var m=c.attributes,v=0,y=m.length;v<y;v++){var C=m[v];C.name.indexOf("data-ace-")===0&&(u[r(C.name.replace(/^data-ace-/,""))]=C.value)}var T=_.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);T&&(i=T[1])}}i&&(u.base=u.base||i,u.packaged=!0),u.basePath=u.base,u.workerPath=u.workerPath||u.base,u.modePath=u.modePath||u.base,u.themePath=u.themePath||u.base,delete u.base;for(var D in u)typeof u[D]<"u"&&a.set(D,u[D])}}function r(l){return l.replace(/-(.)/g,function(u,i){return i.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var a=function(){function h(o,r,l,u){this.start={row:o,column:r},this.end={row:l,column:u}}return h.prototype.isEqual=function(o){return this.start.row===o.start.row&&this.end.row===o.end.row&&this.start.column===o.start.column&&this.end.column===o.end.column},h.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},h.prototype.contains=function(o,r){return this.compare(o,r)==0},h.prototype.compareRange=function(o){var r,l=o.end,u=o.start;return r=this.compare(l.row,l.column),r==1?(r=this.compare(u.row,u.column),r==1?2:r==0?1:0):r==-1?-2:(r=this.compare(u.row,u.column),r==-1?-1:r==1?42:0)},h.prototype.comparePoint=function(o){return this.compare(o.row,o.column)},h.prototype.containsRange=function(o){return this.comparePoint(o.start)==0&&this.comparePoint(o.end)==0},h.prototype.intersects=function(o){var r=this.compareRange(o);return r==-1||r==0||r==1},h.prototype.isEnd=function(o,r){return this.end.row==o&&this.end.column==r},h.prototype.isStart=function(o,r){return this.start.row==o&&this.start.column==r},h.prototype.setStart=function(o,r){typeof o=="object"?(this.start.column=o.column,this.start.row=o.row):(this.start.row=o,this.start.column=r)},h.prototype.setEnd=function(o,r){typeof o=="object"?(this.end.column=o.column,this.end.row=o.row):(this.end.row=o,this.end.column=r)},h.prototype.inside=function(o,r){return this.compare(o,r)==0?!(this.isEnd(o,r)||this.isStart(o,r)):!1},h.prototype.insideStart=function(o,r){return this.compare(o,r)==0?!this.isEnd(o,r):!1},h.prototype.insideEnd=function(o,r){return this.compare(o,r)==0?!this.isStart(o,r):!1},h.prototype.compare=function(o,r){return!this.isMultiLine()&&o===this.start.row?r<this.start.column?-1:r>this.end.column?1:0:o<this.start.row?-1:o>this.end.row?1:this.start.row===o?r>=this.start.column?0:-1:this.end.row===o?r<=this.end.column?0:1:0},h.prototype.compareStart=function(o,r){return this.start.row==o&&this.start.column==r?-1:this.compare(o,r)},h.prototype.compareEnd=function(o,r){return this.end.row==o&&this.end.column==r?1:this.compare(o,r)},h.prototype.compareInside=function(o,r){return this.end.row==o&&this.end.column==r?1:this.start.row==o&&this.start.column==r?-1:this.compare(o,r)},h.prototype.clipRows=function(o,r){if(this.end.row>r)var l={row:r+1,column:0};else if(this.end.row<o)var l={row:o,column:0};if(this.start.row>r)var u={row:r+1,column:0};else if(this.start.row<o)var u={row:o,column:0};return h.fromPoints(u||this.start,l||this.end)},h.prototype.extend=function(o,r){var l=this.compare(o,r);if(l==0)return this;if(l==-1)var u={row:o,column:r};else var i={row:o,column:r};return h.fromPoints(u||this.start,i||this.end)},h.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},h.prototype.isMultiLine=function(){return this.start.row!==this.end.row},h.prototype.clone=function(){return h.fromPoints(this.start,this.end)},h.prototype.collapseRows=function(){return this.end.column==0?new h(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new h(this.start.row,0,this.end.row,0)},h.prototype.toScreenRange=function(o){var r=o.documentToScreenPosition(this.start),l=o.documentToScreenPosition(this.end);return new h(r.row,r.column,l.row,l.column)},h.prototype.moveBy=function(o,r){this.start.row+=o,this.start.column+=r,this.end.row+=o,this.end.column+=r},h}();a.fromPoints=function(h,o){return new a(h.row,h.column,o.row,o.column)},a.comparePoints=function(h,o){return h.row-o.row||h.column-o.column},t.Range=a});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var a=e("./oop"),h=function(){var o={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};o.PRINTABLE_KEYS[173]="-";var r,l;for(l in o.FUNCTION_KEYS)r=o.FUNCTION_KEYS[l].toLowerCase(),o[r]=parseInt(l,10);for(l in o.PRINTABLE_KEYS)r=o.PRINTABLE_KEYS[l].toLowerCase(),o[r]=parseInt(l,10);return a.mixin(o,o.MODIFIER_KEYS),a.mixin(o,o.PRINTABLE_KEYS),a.mixin(o,o.FUNCTION_KEYS),o.enter=o.return,o.escape=o.esc,o.del=o.delete,function(){for(var u=["cmd","ctrl","alt","shift"],i=Math.pow(2,u.length);i--;)o.KEY_MODS[i]=u.filter(function(s){return i&o.KEY_MODS[s]}).join("-")+"-"}(),o.KEY_MODS[0]="",o.KEY_MODS[-1]="input-",o}();a.mixin(t,h),t.default=t,t.keyCodeToString=function(o){var r=h[o];return typeof r!="string"&&(r=String.fromCharCode(o)),r.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("./keys"),h=e("./useragent"),o=null,r=0,l;function u(){l=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return l={passive:!1},!0}})}catch{}}function i(){return l==null&&u(),l}function s(v,y,C){this.elem=v,this.type=y,this.callback=C}s.prototype.destroy=function(){p(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var f=t.addListener=function(v,y,C,T){v.addEventListener(y,C,i()),T&&T.$toDestroy.push(new s(v,y,C))},p=t.removeListener=function(v,y,C){v.removeEventListener(y,C,i())};t.stopEvent=function(v){return t.stopPropagation(v),t.preventDefault(v),!1},t.stopPropagation=function(v){v.stopPropagation&&v.stopPropagation()},t.preventDefault=function(v){v.preventDefault&&v.preventDefault()},t.getButton=function(v){return v.type=="dblclick"?0:v.type=="contextmenu"||h.isMac&&v.ctrlKey&&!v.altKey&&!v.shiftKey?2:v.button},t.capture=function(v,y,C){var T=v&&v.ownerDocument||document;function D(g){y&&y(g),C&&C(g),p(T,"mousemove",y),p(T,"mouseup",D),p(T,"dragstart",D)}return f(T,"mousemove",y),f(T,"mouseup",D),f(T,"dragstart",D),D},t.addMouseWheelListener=function(v,y,C){f(v,"wheel",function(T){var D=.15,g=T.deltaX||0,w=T.deltaY||0;switch(T.deltaMode){case T.DOM_DELTA_PIXEL:T.wheelX=g*D,T.wheelY=w*D;break;case T.DOM_DELTA_LINE:var F=15;T.wheelX=g*F,T.wheelY=w*F;break;case T.DOM_DELTA_PAGE:var b=150;T.wheelX=g*b,T.wheelY=w*b;break}y(T)},C)},t.addMultiMouseDownListener=function(v,y,C,T,D){var g=0,w,F,b,E={2:"dblclick",3:"tripleclick",4:"quadclick"};function M(S){if(t.getButton(S)!==0?g=0:S.detail>1?(g++,g>4&&(g=1)):g=1,h.isIE){var x=Math.abs(S.clientX-w)>5||Math.abs(S.clientY-F)>5;(!b||x)&&(g=1),b&&clearTimeout(b),b=setTimeout(function(){b=null},y[g-1]||600),g==1&&(w=S.clientX,F=S.clientY)}if(S._clicks=g,C[T]("mousedown",S),g>4)g=0;else if(g>1)return C[T](E[g],S)}Array.isArray(v)||(v=[v]),v.forEach(function(S){f(S,"mousedown",M,D)})};var d=function(v){return 0|(v.ctrlKey?1:0)|(v.altKey?2:0)|(v.shiftKey?4:0)|(v.metaKey?8:0)};t.getModifierString=function(v){return a.KEY_MODS[d(v)]};function c(v,y,C){var T=d(y);if(!h.isMac&&o){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(T|=8),o.altGr)if((3&T)!=3)o.altGr=0;else return;if(C===18||C===17){var D="location"in y?y.location:y.keyLocation;if(C===17&&D===1)o[C]==1&&(r=y.timeStamp);else if(C===18&&T===3&&D===2){var g=y.timeStamp-r;g<50&&(o.altGr=!0)}}}if(C in a.MODIFIER_KEYS&&(C=-1),!T&&C===13){var D="location"in y?y.location:y.keyLocation;if(D===3&&(v(y,T,-C),y.defaultPrevented))return}if(h.isChromeOS&&T&8){if(v(y,T,C),y.defaultPrevented)return;T&=-9}return!T&&!(C in a.FUNCTION_KEYS)&&!(C in a.PRINTABLE_KEYS)?!1:v(y,T,C)}t.addCommandKeyListener=function(v,y,C){var T=null;f(v,"keydown",function(D){o[D.keyCode]=(o[D.keyCode]||0)+1;var g=c(y,D,D.keyCode);return T=D.defaultPrevented,g},C),f(v,"keypress",function(D){T&&(D.ctrlKey||D.altKey||D.shiftKey||D.metaKey)&&(t.stopEvent(D),T=null)},C),f(v,"keyup",function(D){o[D.keyCode]=null},C),o||(_(),f(window,"focus",_))};function _(){o=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!h.isOldIE){var m=1;t.nextTick=function(v,y){y=y||window;var C="zero-timeout-message-"+m++,T=function(D){D.data==C&&(t.stopPropagation(D),p(y,"message",T),v())};f(y,"message",T),y.postMessage(C,"*")}}t.$idleBlocked=!1,t.onIdle=function(v,y){return setTimeout(function C(){t.$idleBlocked?setTimeout(C,100):v()},y)},t.$idleBlockId=null,t.blockIdle=function(v){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},v||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(v){setTimeout(v,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var a;n.exports={lineMode:!1,pasteCancelled:function(){return a&&a>Date.now()-50?!0:a=!1},cancel:function(){a=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var a=e("../lib/event"),h=e("../config").nls,o=e("../lib/useragent"),r=e("../lib/dom"),l=e("../lib/lang"),u=e("../clipboard"),i=o.isChrome<18,s=o.isIE,f=o.isChrome>63,p=400,d=e("../lib/keys"),c=d.KEY_MODS,_=o.isIOS,m=_?/\s/:/\n/,v=o.isMobile,y;y=function(C,T){var D=r.createElement("textarea");D.className="ace_text-input",D.setAttribute("wrap","off"),D.setAttribute("autocorrect","off"),D.setAttribute("autocapitalize","off"),D.setAttribute("spellcheck","false"),D.style.opacity="0",C.insertBefore(D,C.firstChild);var g=!1,w=!1,F=!1,b=!1,E="";v||(D.style.fontSize="1px");var M=!1,S=!1,x="",L=0,R=0,A=0,I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,H=0;try{var P=document.activeElement===D}catch{}this.setNumberOfExtraLines=function(K){if(I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,K<0){H=0;return}H=K},this.setAriaOptions=function(K){if(K.activeDescendant?(D.setAttribute("aria-haspopup","true"),D.setAttribute("aria-autocomplete",K.inline?"both":"list"),D.setAttribute("aria-activedescendant",K.activeDescendant)):(D.setAttribute("aria-haspopup","false"),D.setAttribute("aria-autocomplete","both"),D.removeAttribute("aria-activedescendant")),K.role&&D.setAttribute("role",K.role),K.setLabel&&(D.setAttribute("aria-roledescription",h("editor")),T.session)){var ie=T.session.selection.cursor.row;D.setAttribute("aria-label",h("Cursor at row $0",[ie+1]))}},this.setAriaOptions({role:"textbox"}),a.addListener(D,"blur",function(K){S||(T.onBlur(K),P=!1)},T),a.addListener(D,"focus",function(K){if(!S){if(P=!0,o.isEdge)try{if(!document.hasFocus())return}catch{}T.onFocus(K),o.isEdge?setTimeout(G):G()}},T),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:T.renderer.enableKeyboardAccessibility}),E||f||this.$focusScroll=="browser")return D.focus({preventScroll:!0});var K=D.style.top;D.style.position="fixed",D.style.top="0px";try{var ie=D.getBoundingClientRect().top!=0}catch{return}var pe=[];if(ie)for(var Ve=D.parentElement;Ve&&Ve.nodeType==1;)pe.push(Ve),Ve.setAttribute("ace_nocontext","true"),!Ve.parentElement&&Ve.getRootNode?Ve=Ve.getRootNode().host:Ve=Ve.parentElement;D.focus({preventScroll:!0}),ie&&pe.forEach(function(it){it.removeAttribute("ace_nocontext")}),setTimeout(function(){D.style.position="",D.style.top=="0px"&&(D.style.top=K)},0)},this.blur=function(){D.blur()},this.isFocused=function(){return P},T.on("beforeEndOperation",function(){var K=T.curOp,ie=K&&K.command&&K.command.name;if(ie!="insertstring"){var pe=ie&&(K.docChanged||K.selectionChanged);F&&pe&&(x=D.value="",It()),G()}});var q=function(K,ie){for(var pe=ie,Ve=1;Ve<=K-I&&Ve<2*H+1;Ve++)pe+=T.session.getLine(K-Ve).length+1;return pe},G=_?function(K){if(!(!P||g&&!K||b)){K||(K="");var ie=`
 ab`+K+`cde fg
`;ie!=D.value&&(D.value=x=ie);var pe=4,Ve=4+(K.length||(T.selection.isEmpty()?0:1));(L!=pe||R!=Ve)&&D.setSelectionRange(pe,Ve),L=pe,R=Ve}}:function(){if(!(F||b)&&!(!P&&!W)){F=!0;var K=0,ie=0,pe="";if(T.session){var Ve=T.selection,it=Ve.getRange(),vt=Ve.cursor.row;vt===$+1?(I=$+1,$=I+2*H):vt===I-1?($=I-1,I=$-2*H):(vt<I-1||vt>$+1)&&(I=vt>H?vt-H:0,$=vt>H?vt+H:2*H);for(var Ge=[],Rt=I;Rt<=$;Rt++)Ge.push(T.session.getLine(Rt));if(pe=Ge.join(`
`),K=q(it.start.row,it.start.column),ie=q(it.end.row,it.end.column),it.start.row<I){var Zt=T.session.getLine(I-1);K=it.start.row<I-1?0:K,ie+=Zt.length+1,pe=Zt+`
`+pe}else if(it.end.row>$){var Ot=T.session.getLine($+1);ie=it.end.row>$+1?Ot.length:it.end.column,ie+=pe.length+1,pe=pe+`
`+Ot}else v&&vt>0&&(pe=`
`+pe,ie+=1,K+=1);pe.length>p&&(K<p&&ie<p?pe=pe.slice(0,p):(pe=`
`,K==ie?K=ie=0:(K=0,ie=1)));var Zn=pe+`

`;Zn!=x&&(D.value=x=Zn,L=R=Zn.length)}if(W&&(L=D.selectionStart,R=D.selectionEnd),R!=ie||L!=K||D.selectionEnd!=R)try{D.setSelectionRange(K,ie),L=K,R=ie}catch{}F=!1}};this.resetSelection=G,P&&T.onFocus();var B=function(K){return K.selectionStart===0&&K.selectionEnd>=x.length&&K.value===x&&x&&K.selectionEnd!==R},Q=function(K){F||(g?g=!1:B(D)?(T.selectAll(),G()):v&&D.selectionStart!=L&&G())},O=null;this.setInputHandler=function(K){O=K},this.getInputHandler=function(){return O};var W=!1,U=function(K,ie){if(W&&(W=!1),w)return G(),K&&T.onPaste(K),w=!1,"";for(var pe=D.selectionStart,Ve=D.selectionEnd,it=L,vt=x.length-R,Ge=K,Rt=K.length-pe,Zt=K.length-Ve,Ot=0;it>0&&x[Ot]==K[Ot];)Ot++,it--;for(Ge=Ge.slice(Ot),Ot=1;vt>0&&x.length-Ot>L-1&&x[x.length-Ot]==K[K.length-Ot];)Ot++,vt--;Rt-=Ot-1,Zt-=Ot-1;var Zn=Ge.length-Ot+1;if(Zn<0&&(it=-Zn,Zn=0),Ge=Ge.slice(0,Zn),!ie&&!Ge&&!Rt&&!it&&!vt&&!Zt)return"";b=!0;var vu=!1;return o.isAndroid&&Ge==". "&&(Ge="  ",vu=!0),Ge&&!it&&!vt&&!Rt&&!Zt||M?T.onTextInput(Ge):T.onTextInput(Ge,{extendLeft:it,extendRight:vt,restoreStart:Rt,restoreEnd:Zt}),b=!1,x=K,L=pe,R=Ve,A=Zt,vu?`
`:Ge},k=function(K){if(F)return xe();if(K&&K.inputType){if(K.inputType=="historyUndo")return T.execCommand("undo");if(K.inputType=="historyRedo")return T.execCommand("redo")}var ie=D.value,pe=U(ie,!0);(ie.length>p+100||m.test(pe)||v&&L<1&&L==R)&&G()},te=function(K,ie,pe){var Ve=K.clipboardData||window.clipboardData;if(!(!Ve||i)){var it=s||pe?"Text":"text/plain";try{return ie?Ve.setData(it,ie)!==!1:Ve.getData(it)}catch(vt){if(!pe)return te(vt,ie,!0)}}},j=function(K,ie){var pe=T.getCopyText();if(!pe)return a.preventDefault(K);te(K,pe)?(_&&(G(pe),g=pe,setTimeout(function(){g=!1},10)),ie?T.onCut():T.onCopy(),a.preventDefault(K)):(g=!0,D.value=pe,D.select(),setTimeout(function(){g=!1,G(),ie?T.onCut():T.onCopy()}))},ye=function(K){j(K,!0)},Ae=function(K){j(K,!1)},we=function(K){var ie=te(K);u.pasteCancelled()||(typeof ie=="string"?(ie&&T.onPaste(ie,K),o.isIE&&setTimeout(G),a.preventDefault(K)):(D.value="",w=!0))};a.addCommandKeyListener(D,T.onCommandKey.bind(T),T),a.addListener(D,"select",Q,T),a.addListener(D,"input",k,T),a.addListener(D,"cut",ye,T),a.addListener(D,"copy",Ae,T),a.addListener(D,"paste",we,T),(!("oncut"in D)||!("oncopy"in D)||!("onpaste"in D))&&a.addListener(C,"keydown",function(K){if(!(o.isMac&&!K.metaKey||!K.ctrlKey))switch(K.keyCode){case 67:Ae(K);break;case 86:we(K);break;case 88:ye(K);break}},T);var ce=function(K){if(!(F||!T.onCompositionStart||T.$readOnly)&&(F={},!M)){K.data&&(F.useTextareaForIME=!1),setTimeout(xe,0),T._signal("compositionStart"),T.on("mousedown",un);var ie=T.getSelectionRange();ie.end.row=ie.start.row,ie.end.column=ie.start.column,F.markerRange=ie,F.selectionStart=L,T.onCompositionStart(F),F.useTextareaForIME?(x=D.value="",L=0,R=0):(D.msGetInputContext&&(F.context=D.msGetInputContext()),D.getInputContext&&(F.context=D.getInputContext()))}},xe=function(){if(!(!F||!T.onCompositionUpdate||T.$readOnly)){if(M)return un();if(F.useTextareaForIME)T.onCompositionUpdate(D.value);else{var K=D.value;U(K),F.markerRange&&(F.context&&(F.markerRange.start.column=F.selectionStart=F.context.compositionStartOffset),F.markerRange.end.column=F.markerRange.start.column+R-F.selectionStart+A)}}},It=function(K){!T.onCompositionEnd||T.$readOnly||(F=!1,T.onCompositionEnd(),T.off("mousedown",un),K&&k())};function un(){S=!0,D.blur(),D.focus(),S=!1}var Gt=l.delayedCall(xe,50).schedule.bind(null,null);function tt(K){K.keyCode==27&&D.value.length<D.selectionStart&&(F||(x=D.value),L=R=-1,G()),Gt()}a.addListener(D,"compositionstart",ce,T),a.addListener(D,"compositionupdate",xe,T),a.addListener(D,"keyup",tt,T),a.addListener(D,"keydown",Gt,T),a.addListener(D,"compositionend",It,T),this.getElement=function(){return D},this.setCommandMode=function(K){M=K,D.readOnly=!1},this.setReadOnly=function(K){M||(D.readOnly=K)},this.setCopyWithEmptySelection=function(K){},this.onContextMenu=function(K){W=!0,G(),T._emit("nativecontextmenu",{target:T,domEvent:K}),this.moveToMouse(K,!0)},this.moveToMouse=function(K,ie){E||(E=D.style.cssText),D.style.cssText=(ie?"z-index:100000;":"")+(o.isIE?"opacity:0.1;":"")+"text-indent: -"+(L+R)*T.renderer.characterWidth*.5+"px;";var pe=T.container.getBoundingClientRect(),Ve=r.computedStyle(T.container),it=pe.top+(parseInt(Ve.borderTopWidth)||0),vt=pe.left+(parseInt(pe.borderLeftWidth)||0),Ge=pe.bottom-it-D.clientHeight-2,Rt=function(Zt){r.translate(D,Zt.clientX-vt-2,Math.min(Zt.clientY-it-2,Ge))};Rt(K),K.type=="mousedown"&&(T.renderer.$isMousePressed=!0,clearTimeout(le),o.isWin&&a.capture(T.container,Rt,ve))},this.onContextMenuClose=ve;var le;function ve(){clearTimeout(le),le=setTimeout(function(){E&&(D.style.cssText=E,E=""),T.renderer.$isMousePressed=!1,T.renderer.$keepTextAreaAtCursor&&T.renderer.$moveTextAreaToCursor()},0)}var fe=function(K){T.textInput.onContextMenu(K),ve()};a.addListener(D,"mouseup",fe,T),a.addListener(D,"mousedown",function(K){K.preventDefault(),ve()},T),a.addListener(T.renderer.scroller,"contextmenu",fe,T),a.addListener(D,"contextmenu",fe,T),_&&ae(C,T,D);function ae(K,ie,pe){var Ve=null,it=!1;pe.addEventListener("keydown",function(Ge){Ve&&clearTimeout(Ve),it=!0},!0),pe.addEventListener("keyup",function(Ge){Ve=setTimeout(function(){it=!1},100)},!0);var vt=function(Ge){if(document.activeElement===pe&&!(it||F||ie.$mouseHandler.isMousePressed)&&!g){var Rt=pe.selectionStart,Zt=pe.selectionEnd,Ot=null,Zn=0;if(Rt==0?Ot=d.up:Rt==1?Ot=d.home:Zt>R&&x[Zt]==`
`?Ot=d.end:Rt<L&&x[Rt-1]==" "?(Ot=d.left,Zn=c.option):Rt<L||Rt==L&&R!=L&&Rt==Zt?Ot=d.left:Zt>R&&x.slice(0,Zt).split(`
`).length>2?Ot=d.down:Zt>R&&x[Zt-1]==" "?(Ot=d.right,Zn=c.option):(Zt>R||Zt==R&&R!=L&&Rt==Zt)&&(Ot=d.right),Rt!==Zt&&(Zn|=c.shift),Ot){var vu=ie.onCommandKey({},Zn,Ot);if(!vu&&ie.commands){Ot=d.keyCodeToString(Ot);var PM=ie.commands.findKeyCommand(Zn,Ot);PM&&ie.execCommand(PM)}L=Rt,R=Zt,G("")}}};document.addEventListener("selectionchange",vt),ie.on("destroy",function(){document.removeEventListener("selectionchange",vt)})}this.destroy=function(){D.parentElement&&D.parentElement.removeChild(D)}},t.TextInput=y,t.$setUserAgentForTests=function(C,T){v=C,_=T}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("../lib/useragent"),h=0,o=550,r=function(){function i(s){s.$clickSelection=null;var f=s.editor;f.setDefaultHandler("mousedown",this.onMouseDown.bind(s)),f.setDefaultHandler("dblclick",this.onDoubleClick.bind(s)),f.setDefaultHandler("tripleclick",this.onTripleClick.bind(s)),f.setDefaultHandler("quadclick",this.onQuadClick.bind(s)),f.setDefaultHandler("mousewheel",this.onMouseWheel.bind(s));var p=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];p.forEach(function(d){s[d]=this[d]},this),s.selectByLines=this.extendSelectionBy.bind(s,"getLineRange"),s.selectByWords=this.extendSelectionBy.bind(s,"getWordRange")}return i.prototype.onMouseDown=function(s){var f=s.inSelection(),p=s.getDocumentPosition();this.mousedownEvent=s;var d=this.editor,c=s.getButton();if(c!==0){var _=d.getSelectionRange(),m=_.isEmpty();(m||c==1)&&d.selection.moveToPosition(p),c==2&&(d.textInput.onContextMenu(s.domEvent),a.isMozilla||s.preventDefault());return}if(this.mousedownEvent.time=Date.now(),f&&!d.isFocused()&&(d.focus(),this.$focusTimeout&&!this.$clickSelection&&!d.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(s);return}return this.captureMouse(s),this.startSelect(p,s.domEvent._clicks>1),s.preventDefault()},i.prototype.startSelect=function(s,f){s=s||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var p=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?p.selection.selectToPosition(s):f||p.selection.moveToPosition(s),f||this.select(),p.setStyle("ace_selecting"),this.setState("select"))},i.prototype.select=function(){var s,f=this.editor,p=f.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var d=this.$clickSelection.comparePoint(p);if(d==-1)s=this.$clickSelection.end;else if(d==1)s=this.$clickSelection.start;else{var c=u(this.$clickSelection,p);p=c.cursor,s=c.anchor}f.selection.setSelectionAnchor(s.row,s.column)}f.selection.selectToPosition(p),f.renderer.scrollCursorIntoView()},i.prototype.extendSelectionBy=function(s){var f,p=this.editor,d=p.renderer.screenToTextCoordinates(this.x,this.y),c=p.selection[s](d.row,d.column);if(this.$clickSelection){var _=this.$clickSelection.comparePoint(c.start),m=this.$clickSelection.comparePoint(c.end);if(_==-1&&m<=0)f=this.$clickSelection.end,(c.end.row!=d.row||c.end.column!=d.column)&&(d=c.start);else if(m==1&&_>=0)f=this.$clickSelection.start,(c.start.row!=d.row||c.start.column!=d.column)&&(d=c.end);else if(_==-1&&m==1)d=c.end,f=c.start;else{var v=u(this.$clickSelection,d);d=v.cursor,f=v.anchor}p.selection.setSelectionAnchor(f.row,f.column)}p.selection.selectToPosition(d),p.renderer.scrollCursorIntoView()},i.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},i.prototype.focusWait=function(){var s=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),f=Date.now();(s>h||f-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},i.prototype.onDoubleClick=function(s){var f=s.getDocumentPosition(),p=this.editor,d=p.session,c=d.getBracketRange(f);c?(c.isEmpty()&&(c.start.column--,c.end.column++),this.setState("select")):(c=p.selection.getWordRange(f.row,f.column),this.setState("selectByWords")),this.$clickSelection=c,this.select()},i.prototype.onTripleClick=function(s){var f=s.getDocumentPosition(),p=this.editor;this.setState("selectByLines");var d=p.getSelectionRange();d.isMultiLine()&&d.contains(f.row,f.column)?(this.$clickSelection=p.selection.getLineRange(d.start.row),this.$clickSelection.end=p.selection.getLineRange(d.end.row).end):this.$clickSelection=p.selection.getLineRange(f.row),this.select()},i.prototype.onQuadClick=function(s){var f=this.editor;f.selectAll(),this.$clickSelection=f.getSelectionRange(),this.setState("selectAll")},i.prototype.onMouseWheel=function(s){if(!s.getAccelKey()){s.getShiftKey()&&s.wheelY&&!s.wheelX&&(s.wheelX=s.wheelY,s.wheelY=0);var f=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var p=this.$lastScroll,d=s.domEvent.timeStamp,c=d-p.t,_=c?s.wheelX/c:p.vx,m=c?s.wheelY/c:p.vy;c<o&&(_=(_+p.vx)/2,m=(m+p.vy)/2);var v=Math.abs(_/m),y=!1;if(v>=1&&f.renderer.isScrollableBy(s.wheelX*s.speed,0)&&(y=!0),v<=1&&f.renderer.isScrollableBy(0,s.wheelY*s.speed)&&(y=!0),y)p.allowed=d;else if(d-p.allowed<o){var C=Math.abs(_)<=1.5*Math.abs(p.vx)&&Math.abs(m)<=1.5*Math.abs(p.vy);C?(y=!0,p.allowed=d):p.allowed=0}if(p.t=d,p.vx=_,p.vy=m,y)return f.renderer.scrollBy(s.wheelX*s.speed,s.wheelY*s.speed),s.stop()}},i}();r.prototype.selectEnd=r.prototype.selectByLinesEnd,r.prototype.selectAllEnd=r.prototype.selectByLinesEnd,r.prototype.selectByWordsEnd=r.prototype.selectByLinesEnd,t.DefaultHandlers=r;function l(i,s,f,p){return Math.sqrt(Math.pow(f-i,2)+Math.pow(p-s,2))}function u(i,s){if(i.start.row==i.end.row)var f=2*s.column-i.start.column-i.end.column;else if(i.start.row==i.end.row-1&&!i.start.column&&!i.end.column)var f=s.column-4;else var f=2*s.row-i.start.row-i.end.row;return f<0?{cursor:i.start,anchor:i.end}:{cursor:i.end,anchor:i.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,n){t.preventParentScroll=function(h){h.stopPropagation();var o=h.currentTarget,r=o.scrollHeight>o.clientHeight;r||h.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var c=function(_,m){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(v[C]=y[C])},c(_,m)};return function(_,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");c(_,m);function v(){this.constructor=_}_.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}(),h=this&&this.__values||function(c){var _=typeof Symbol=="function"&&Symbol.iterator,m=_&&c[_],v=0;if(m)return m.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&v>=c.length&&(c=void 0),{value:c&&c[v++],done:!c}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},o=e("./lib/dom"),r=e("./lib/event"),l=e("./range").Range,u=e("./lib/scroll").preventParentScroll,i="ace_tooltip",s=function(){function c(_){this.isOpen=!1,this.$element=null,this.$parentNode=_}return c.prototype.$init=function(){return this.$element=o.createElement("div"),this.$element.className=i,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},c.prototype.getElement=function(){return this.$element||this.$init()},c.prototype.setText=function(_){this.getElement().textContent=_},c.prototype.setHtml=function(_){this.getElement().innerHTML=_},c.prototype.setPosition=function(_,m){this.getElement().style.left=_+"px",this.getElement().style.top=m+"px"},c.prototype.setClassName=function(_){o.addCssClass(this.getElement(),_)},c.prototype.setTheme=function(_){this.$element.className=i+" "+(_.isDark?"ace_dark ":"")+(_.cssClass||"")},c.prototype.show=function(_,m,v){_!=null&&this.setText(_),m!=null&&v!=null&&this.setPosition(m,v),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},c.prototype.hide=function(_){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=i,this.isOpen=!1)},c.prototype.getHeight=function(){return this.getElement().offsetHeight},c.prototype.getWidth=function(){return this.getElement().offsetWidth},c.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},c}(),f=function(){function c(){this.popups=[]}return c.prototype.addPopup=function(_){this.popups.push(_),this.updatePopups()},c.prototype.removePopup=function(_){var m=this.popups.indexOf(_);m!==-1&&(this.popups.splice(m,1),this.updatePopups())},c.prototype.updatePopups=function(){var _,m,v,y;this.popups.sort(function(M,S){return S.priority-M.priority});var C=[];try{for(var T=h(this.popups),D=T.next();!D.done;D=T.next()){var g=D.value,w=!0;try{for(var F=(v=void 0,h(C)),b=F.next();!b.done;b=F.next()){var E=b.value;if(this.doPopupsOverlap(E,g)){w=!1;break}}}catch(M){v={error:M}}finally{try{b&&!b.done&&(y=F.return)&&y.call(F)}finally{if(v)throw v.error}}w?C.push(g):g.hide()}}catch(M){_={error:M}}finally{try{D&&!D.done&&(m=T.return)&&m.call(T)}finally{if(_)throw _.error}}},c.prototype.doPopupsOverlap=function(_,m){var v=_.getElement().getBoundingClientRect(),y=m.getElement().getBoundingClientRect();return v.left<y.right&&v.right>y.left&&v.top<y.bottom&&v.bottom>y.top},c}(),p=new f;t.popupManager=p,t.Tooltip=s;var d=function(c){a(_,c);function _(m){m===void 0&&(m=document.body);var v=c.call(this,m)||this;v.timeout=void 0,v.lastT=0,v.idleTime=350,v.lastEvent=void 0,v.onMouseOut=v.onMouseOut.bind(v),v.onMouseMove=v.onMouseMove.bind(v),v.waitForHover=v.waitForHover.bind(v),v.hide=v.hide.bind(v);var y=v.getElement();return y.style.whiteSpace="pre-wrap",y.style.pointerEvents="auto",y.addEventListener("mouseout",v.onMouseOut),y.tabIndex=-1,y.addEventListener("blur",function(){y.contains(document.activeElement)||this.hide()}.bind(v)),y.addEventListener("wheel",u),v}return _.prototype.addToEditor=function(m){m.on("mousemove",this.onMouseMove),m.on("mousedown",this.hide),m.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},_.prototype.removeFromEditor=function(m){m.off("mousemove",this.onMouseMove),m.off("mousedown",this.hide),m.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},_.prototype.onMouseMove=function(m,v){this.lastEvent=m,this.lastT=Date.now();var y=v.$mouseHandler.isMousePressed;if(this.isOpen){var C=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(C.row,C.column)||y||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||y||(this.lastEvent=m,this.timeout=setTimeout(this.waitForHover,this.idleTime))},_.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var m=Date.now()-this.lastT;if(this.idleTime-m>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-m);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},_.prototype.isOutsideOfText=function(m){var v=m.editor,y=m.getDocumentPosition(),C=v.session.getLine(y.row);if(y.column==C.length){var T=v.renderer.pixelToScreenCoordinates(m.clientX,m.clientY),D=v.session.documentToScreenPosition(y.row,y.column);if(D.column!=T.column||D.row!=T.row)return!0}return!1},_.prototype.setDataProvider=function(m){this.$gatherData=m},_.prototype.showForRange=function(m,v,y,C){var T=10;if(!(C&&C!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var D=m.renderer;this.isOpen||(p.addPopup(this),this.$registerCloseEvents(),this.setTheme(D.theme)),this.isOpen=!0,this.addMarker(v,m.session),this.range=l.fromPoints(v.start,v.end);var g=D.textToScreenCoordinates(v.start.row,v.start.column),w=D.scroller.getBoundingClientRect();g.pageX<w.left&&(g.pageX=w.left);var F=this.getElement();F.innerHTML="",F.appendChild(y),F.style.maxHeight="",F.style.display="block";var b=F.clientHeight,E=F.clientWidth,M=window.innerHeight-g.pageY-D.lineHeight,S=!0;g.pageY-b<0&&g.pageY<M&&(S=!1),F.style.maxHeight=(S?g.pageY:M)-T+"px",F.style.top=S?"":g.pageY+D.lineHeight+"px",F.style.bottom=S?window.innerHeight-g.pageY+"px":"",F.style.left=Math.min(g.pageX,window.innerWidth-E-T)+"px"}},_.prototype.addMarker=function(m,v){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=v,this.marker=v&&v.addMarker(m,"ace_highlight-marker","text")},_.prototype.hide=function(m){!m&&document.activeElement==this.getElement()||m&&m.target&&(m.type!="keydown"||m.ctrlKey||m.metaKey)&&this.$element.contains(m.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,p.removePopup(this)))},_.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},_.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},_.prototype.onMouseOut=function(m){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!m.relatedTarget||this.getElement().contains(m.relatedTarget)||m&&m.currentTarget.contains(m.relatedTarget)||m.relatedTarget.classList.contains("ace_content")||this.hide())},_}(s);t.HoverTooltip=d});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var f=function(p,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(c[m]=_[m])},f(p,d)};return function(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(p,d);function c(){this.constructor=p}p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),h=this&&this.__values||function(f){var p=typeof Symbol=="function"&&Symbol.iterator,d=p&&f[p],c=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&c>=f.length&&(f=void 0),{value:f&&f[c++],done:!f}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},o=e("../lib/dom"),r=e("../lib/event"),l=e("../tooltip").Tooltip,u=e("../config").nls;function i(f){var p=f.editor,d=p.renderer.$gutterLayer,c=new s(p);f.editor.setDefaultHandler("guttermousedown",function(T){if(!(!p.isFocused()||T.getButton()!=0)){var D=d.getRegion(T);if(D!="foldWidgets"){var g=T.getDocumentPosition().row,w=p.session.selection;if(T.getShiftKey())w.selectTo(g,0);else{if(T.domEvent.detail==2)return p.selectAll(),T.preventDefault();f.$clickSelection=p.selection.getLineRange(g)}return f.setState("selectByLines"),f.captureMouse(T),T.preventDefault()}}});var _,m;function v(){var T=m.getDocumentPosition().row,D=p.session.getLength();if(T==D){var g=p.renderer.pixelToScreenCoordinates(0,m.y).row,w=m.$pos;if(g>p.session.documentToScreenRow(w.row,w.column))return y()}if(c.showTooltip(T),!!c.isOpen)if(p.on("mousewheel",y),f.$tooltipFollowsMouse)C(m);else{var F=m.getGutterRow(),b=d.$lines.get(F);if(b){var E=b.element.querySelector(".ace_gutter_annotation"),M=E.getBoundingClientRect(),S=c.getElement().style;S.left=M.right+"px",S.top=M.bottom+"px"}else C(m)}}function y(){_&&(_=clearTimeout(_)),c.isOpen&&(c.hideTooltip(),p.off("mousewheel",y))}function C(T){c.setPosition(T.x,T.y)}f.editor.setDefaultHandler("guttermousemove",function(T){var D=T.domEvent.target||T.domEvent.srcElement;if(o.hasCssClass(D,"ace_fold-widget"))return y();c.isOpen&&f.$tooltipFollowsMouse&&C(T),m=T,!_&&(_=setTimeout(function(){_=null,m&&!f.isMousePressed?v():y()},50))}),r.addListener(p.renderer.$gutter,"mouseout",function(T){m=null,!(!c.isOpen||_)&&(_=setTimeout(function(){_=null,y()},50))},p),p.on("changeSession",y),p.on("input",y)}t.GutterHandler=i;var s=function(f){a(p,f);function p(d){var c=f.call(this,d.container)||this;return c.editor=d,c}return p.prototype.setPosition=function(d,c){var _=window.innerWidth||document.documentElement.clientWidth,m=window.innerHeight||document.documentElement.clientHeight,v=this.getWidth(),y=this.getHeight();d+=15,c+=15,d+v>_&&(d-=d+v-_),c+y>m&&(c-=20+y),l.prototype.setPosition.call(this,d,c)},Object.defineProperty(p,"annotationLabels",{get:function(){return{error:{singular:u("error"),plural:u("errors")},warning:{singular:u("warning"),plural:u("warnings")},info:{singular:u("information message"),plural:u("information messages")}}},enumerable:!1,configurable:!0}),p.prototype.showTooltip=function(d){var c=this.editor.renderer.$gutterLayer,_=c.$annotations[d],m;_?m={text:Array.from(_.text),type:Array.from(_.type)}:m={text:[],type:[]};var v=c.session.getFoldLine(d);if(v&&c.$showFoldedAnnotations){for(var y={error:[],warning:[],info:[]},C,T=d+1;T<=v.end.row;T++)if(c.$annotations[T])for(var D=0;D<c.$annotations[T].text.length;D++){var g=c.$annotations[T].type[D];if(y[g].push(c.$annotations[T].text[D]),g==="error"){C="error_fold";continue}if(g==="warning"){C="warning_fold";continue}}if(C==="error_fold"||C==="warning_fold"){var w="".concat(p.annotationsToSummaryString(y)," in folded code.");m.text.push(w),m.type.push(C)}}if(m.text.length===0)return this.hide();for(var F={error:[],warning:[],info:[]},b=c.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",T=0;T<m.text.length;T++){var E="<span class='ace_".concat(m.type[T]," ").concat(b,"' aria-label='").concat(p.annotationLabels[m.type[T].replace("_fold","")].singular,"' role=img> </span> ").concat(m.text[T]);F[m.type[T].replace("_fold","")].push(E)}var M=[].concat(F.error,F.warning,F.info).join("<br>");this.setHtml(M),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},p.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},p.annotationsToSummaryString=function(d){var c,_,m=[],v=["error","warning","info"];try{for(var y=h(v),C=y.next();!C.done;C=y.next()){var T=C.value;if(d[T].length){var D=d[T].length===1?p.annotationLabels[T].singular:p.annotationLabels[T].plural;m.push("".concat(d[T].length," ").concat(D))}}}catch(g){c={error:g}}finally{try{C&&!C.done&&(_=y.return)&&_.call(y)}finally{if(c)throw c.error}}return m.join(", ")},p}(l);t.GutterTooltip=s});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("../lib/event"),h=e("../lib/useragent"),o=function(){function r(l,u){this.speed,this.wheelX,this.wheelY,this.domEvent=l,this.editor=u,this.x=this.clientX=l.clientX,this.y=this.clientY=l.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return r.prototype.stopPropagation=function(){a.stopPropagation(this.domEvent),this.propagationStopped=!0},r.prototype.preventDefault=function(){a.preventDefault(this.domEvent),this.defaultPrevented=!0},r.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},r.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},r.prototype.getGutterRow=function(){var l=this.getDocumentPosition().row,u=this.editor.session.documentToScreenRow(l,0),i=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return u-i},r.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var l=this.editor,u=l.getSelectionRange();if(u.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=u.contains(i.row,i.column)}return this.$inSelection},r.prototype.getButton=function(){return a.getButton(this.domEvent)},r.prototype.getShiftKey=function(){return this.domEvent.shiftKey},r.prototype.getAccelKey=function(){return h.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},r}();t.MouseEvent=o});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=e("../lib/event"),o=e("../lib/useragent"),r=200,l=200,u=5;function i(f){var p=f.editor,d=a.createElement("div");d.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",d.textContent="\xA0";var c=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];c.forEach(function(q){f[q]=this[q]},this),p.on("mousedown",this.onMouseDown.bind(f));var _=p.container,m,v,y,C,T,D,g=0,w,F,b,E,M;this.onDragStart=function(q){if(this.cancelDrag||!_.draggable){var G=this;return setTimeout(function(){G.startSelect(),G.captureMouse(q)},0),q.preventDefault()}T=p.getSelectionRange();var B=q.dataTransfer;B.effectAllowed=p.getReadOnly()?"copy":"copyMove",p.container.appendChild(d),B.setDragImage&&B.setDragImage(d,0,0),setTimeout(function(){p.container.removeChild(d)}),B.clearData(),B.setData("Text",p.session.getTextRange()),F=!0,this.setState("drag")},this.onDragEnd=function(q){if(_.draggable=!1,F=!1,this.setState(null),!p.getReadOnly()){var G=q.dataTransfer.dropEffect;!w&&G=="move"&&p.session.remove(p.getSelectionRange()),p.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(q){if(!(p.getReadOnly()||!H(q.dataTransfer)))return v=q.clientX,y=q.clientY,m||R(),g++,q.dataTransfer.dropEffect=w=P(q),h.preventDefault(q)},this.onDragOver=function(q){if(!(p.getReadOnly()||!H(q.dataTransfer)))return v=q.clientX,y=q.clientY,m||(R(),g++),I!==null&&(I=null),q.dataTransfer.dropEffect=w=P(q),h.preventDefault(q)},this.onDragLeave=function(q){if(g--,g<=0&&m)return A(),w=null,h.preventDefault(q)},this.onDrop=function(q){if(D){var G=q.dataTransfer;if(F)switch(w){case"move":T.contains(D.row,D.column)?T={start:D,end:D}:T=p.moveText(T,D);break;case"copy":T=p.moveText(T,D,!0);break}else{var B=G.getData("Text");T={start:D,end:p.session.insert(D,B)},p.focus(),w=null}return A(),h.preventDefault(q)}},h.addListener(_,"dragstart",this.onDragStart.bind(f),p),h.addListener(_,"dragend",this.onDragEnd.bind(f),p),h.addListener(_,"dragenter",this.onDragEnter.bind(f),p),h.addListener(_,"dragover",this.onDragOver.bind(f),p),h.addListener(_,"dragleave",this.onDragLeave.bind(f),p),h.addListener(_,"drop",this.onDrop.bind(f),p);function S(q,G){var B=Date.now(),Q=!G||q.row!=G.row,O=!G||q.column!=G.column;if(!E||Q||O)p.moveCursorToPosition(q),E=B,M={x:v,y};else{var W=s(M.x,M.y,v,y);W>u?E=null:B-E>=l&&(p.renderer.scrollCursorIntoView(),E=null)}}function x(q,G){var B=Date.now(),Q=p.renderer.layerConfig.lineHeight,O=p.renderer.layerConfig.characterWidth,W=p.renderer.scroller.getBoundingClientRect(),U={x:{left:v-W.left,right:W.right-v},y:{top:y-W.top,bottom:W.bottom-y}},k=Math.min(U.x.left,U.x.right),te=Math.min(U.y.top,U.y.bottom),j={row:q.row,column:q.column};k/O<=2&&(j.column+=U.x.left<U.x.right?-3:2),te/Q<=1&&(j.row+=U.y.top<U.y.bottom?-1:1);var ye=q.row!=j.row,Ae=q.column!=j.column,we=!G||q.row!=G.row;ye||Ae&&!we?b?B-b>=r&&p.renderer.scrollCursorIntoView(j):b=B:b=null}function L(){var q=D;D=p.renderer.screenToTextCoordinates(v,y),S(D,q),x(D,q)}function R(){T=p.selection.toOrientedRange(),m=p.session.addMarker(T,"ace_selection",p.getSelectionStyle()),p.clearSelection(),p.isFocused()&&p.renderer.$cursorLayer.setBlinking(!1),clearInterval(C),L(),C=setInterval(L,20),g=0,h.addListener(document,"mousemove",$)}function A(){clearInterval(C),p.session.removeMarker(m),m=null,p.selection.fromOrientedRange(T),p.isFocused()&&!F&&p.$resetCursorStyle(),T=null,D=null,g=0,b=null,E=null,h.removeListener(document,"mousemove",$)}var I=null;function $(){I==null&&(I=setTimeout(function(){I!=null&&m&&A()},20))}function H(q){var G=q.types;return!G||Array.prototype.some.call(G,function(B){return B=="text/plain"||B=="Text"})}function P(q){var G=["copy","copymove","all","uninitialized"],B=["move","copymove","linkmove","all","uninitialized"],Q=o.isMac?q.altKey:q.ctrlKey,O="uninitialized";try{O=q.dataTransfer.effectAllowed.toLowerCase()}catch{}var W="none";return Q&&G.indexOf(O)>=0?W="copy":B.indexOf(O)>=0?W="move":G.indexOf(O)>=0&&(W="copy"),W}}(function(){this.dragWait=function(){var f=Date.now()-this.mousedownEvent.time;f>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var f=this.editor.container;f.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(f){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var f=this.editor,p=f.container;p.draggable=!0,f.renderer.$cursorLayer.setBlinking(!1),f.setStyle("ace_dragging");var d=o.isWin?"default":"move";f.renderer.setCursorStyle(d),this.setState("dragReady")},this.onMouseDrag=function(f){var p=this.editor.container;if(o.isIE&&this.state=="dragReady"){var d=s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);d>3&&p.dragDrop()}if(this.state==="dragWait"){var d=s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);d>0&&(p.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(f){if(this.$dragEnabled){this.mousedownEvent=f;var p=this.editor,d=f.inSelection(),c=f.getButton(),_=f.domEvent.detail||1;if(_===1&&c===0&&d){if(f.editor.inMultiSelectMode&&(f.getAccelKey()||f.getShiftKey()))return;this.mousedownEvent.time=Date.now();var m=f.domEvent.target||f.domEvent.srcElement;if("unselectable"in m&&(m.unselectable="on"),p.getDragDelay()){if(o.isWebKit){this.cancelDrag=!0;var v=p.container;v.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(f,this.onMouseDrag.bind(this)),f.defaultPrevented=!0}}}}).call(i.prototype);function s(f,p,d,c){return Math.sqrt(Math.pow(d-f,2)+Math.pow(c-p,2))}t.DragdropHandler=i});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var a=e("./mouse_event").MouseEvent,h=e("../lib/event"),o=e("../lib/dom");t.addTouchListeners=function(r,l){var u="scroll",i,s,f,p,d,c,_=0,m,v=0,y=0,C=0,T,D;function g(){var S=window.navigator&&window.navigator.clipboard,x=!1,L=function(){var A=l.getCopyText(),I=l.session.getUndoManager().hasUndo();D.replaceChild(o.buildDom(x?["span",!A&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],A&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],A&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],S&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],I&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),D.firstChild)},R=function(A){var I=A.target.getAttribute("action");if(I=="more"||!x)return x=!x,L();I=="paste"?S.readText().then(function($){l.execCommand(I,$)}):I&&((I=="cut"||I=="copy")&&(S?S.writeText(l.getCopyText()):document.execCommand("copy")),l.execCommand(I)),D.firstChild.style.display="none",x=!1,I!="openCommandPalette"&&l.focus()};D=o.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(A){u="menu",A.stopPropagation(),A.preventDefault(),l.textInput.focus()},ontouchend:function(A){A.stopPropagation(),A.preventDefault(),R(A)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],l.container)}function w(){D||g();var S=l.selection.cursor,x=l.renderer.textToScreenCoordinates(S.row,S.column),L=l.renderer.textToScreenCoordinates(0,0).pageX,R=l.renderer.scrollLeft,A=l.container.getBoundingClientRect();D.style.top=x.pageY-A.top-3+"px",x.pageX-A.left<A.width-70?(D.style.left="",D.style.right="10px"):(D.style.right="",D.style.left=L+R-A.left+"px"),D.style.display="",D.firstChild.style.display="none",l.on("input",F)}function F(S){D&&(D.style.display="none"),l.off("input",F)}function b(){d=null,clearTimeout(d);var S=l.selection.getRange(),x=S.contains(m.row,m.column);(S.isEmpty()||!x)&&(l.selection.moveToPosition(m),l.selection.selectWord()),u="wait",w()}function E(){d=null,clearTimeout(d),l.selection.moveToPosition(m);var S=v>=2?l.selection.getLineRange(m.row):l.session.getBracketRange(m);S&&!S.isEmpty()?l.selection.setRange(S):l.selection.selectWord(),u="wait"}h.addListener(r,"contextmenu",function(S){if(T){var x=l.textInput.getElement();x.focus()}},l),h.addListener(r,"touchstart",function(S){var x=S.touches;if(d||x.length>1){clearTimeout(d),d=null,f=-1,u="zoom";return}T=l.$mouseHandler.isMousePressed=!0;var L=l.renderer.layerConfig.lineHeight,R=l.renderer.layerConfig.lineHeight,A=S.timeStamp;p=A;var I=x[0],$=I.clientX,H=I.clientY;Math.abs(i-$)+Math.abs(s-H)>L&&(f=-1),i=S.clientX=$,s=S.clientY=H,y=C=0;var P=new a(S,l);if(m=P.getDocumentPosition(),A-f<500&&x.length==1&&!_)v++,S.preventDefault(),S.button=0,E();else{v=0;var q=l.selection.cursor,G=l.selection.isEmpty()?q:l.selection.anchor,B=l.renderer.$cursorLayer.getPixelPosition(q,!0),Q=l.renderer.$cursorLayer.getPixelPosition(G,!0),O=l.renderer.scroller.getBoundingClientRect(),W=l.renderer.layerConfig.offset,U=l.renderer.scrollLeft,k=function(ye,Ae){return ye=ye/R,Ae=Ae/L-.75,ye*ye+Ae*Ae};if(S.clientX<O.left){u="zoom";return}var te=k(S.clientX-O.left-B.left+U,S.clientY-O.top-B.top+W),j=k(S.clientX-O.left-Q.left+U,S.clientY-O.top-Q.top+W);te<3.5&&j<3.5&&(u=te>j?"cursor":"anchor"),j<3.5?u="anchor":te<3.5?u="cursor":u="scroll",d=setTimeout(b,450)}f=A},l),h.addListener(r,"touchend",function(S){T=l.$mouseHandler.isMousePressed=!1,c&&clearInterval(c),u=="zoom"?(u="",_=0):d?(l.selection.moveToPosition(m),_=0,w()):u=="scroll"?(M(),F()):w(),clearTimeout(d),d=null},l),h.addListener(r,"touchmove",function(S){d&&(clearTimeout(d),d=null);var x=S.touches;if(!(x.length>1||u=="zoom")){var L=x[0],R=i-L.clientX,A=s-L.clientY;if(u=="wait")if(R*R+A*A>4)u="cursor";else return S.preventDefault();i=L.clientX,s=L.clientY,S.clientX=L.clientX,S.clientY=L.clientY;var I=S.timeStamp,$=I-p;if(p=I,u=="scroll"){var H=new a(S,l);H.speed=1,H.wheelX=R,H.wheelY=A,10*Math.abs(R)<Math.abs(A)&&(R=0),10*Math.abs(A)<Math.abs(R)&&(A=0),$!=0&&(y=R/$,C=A/$),l._emit("mousewheel",H),H.propagationStopped||(y=C=0)}else{var P=new a(S,l),q=P.getDocumentPosition();u=="cursor"?l.selection.moveCursorToPosition(q):u=="anchor"&&l.selection.setSelectionAnchor(q.row,q.column),l.renderer.scrollCursorIntoView(q),S.preventDefault()}}},l);function M(){_+=60,c=setInterval(function(){_--<=0&&(clearInterval(c),c=null),Math.abs(y)<.01&&(y=0),Math.abs(C)<.01&&(C=0),_<20&&(y=.9*y),_<20&&(C=.9*C);var S=l.session.getScrollTop();l.renderer.scrollBy(10*y,10*C),S==l.session.getScrollTop()&&(_=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var a=e("../lib/event"),h=e("../lib/useragent"),o=e("./default_handlers").DefaultHandlers,r=e("./default_gutter_handler").GutterHandler,l=e("./mouse_event").MouseEvent,u=e("./dragdrop_handler").DragdropHandler,i=e("./touch_handler").addTouchListeners,s=e("../config"),f=function(){function p(d){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var c=this;this.editor=d,new o(this),new r(this),new u(this);var _=function(y){var C=!document.hasFocus||!document.hasFocus()||!d.isFocused()&&document.activeElement==(d.textInput&&d.textInput.getElement());C&&window.focus(),d.focus(),setTimeout(function(){d.isFocused()||d.focus()})},m=d.renderer.getMouseEventTarget();a.addListener(m,"click",this.onMouseEvent.bind(this,"click"),d),a.addListener(m,"mousemove",this.onMouseMove.bind(this,"mousemove"),d),a.addMultiMouseDownListener([m,d.renderer.scrollBarV&&d.renderer.scrollBarV.inner,d.renderer.scrollBarH&&d.renderer.scrollBarH.inner,d.textInput&&d.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",d),a.addMouseWheelListener(d.container,this.onMouseWheel.bind(this,"mousewheel"),d),i(d.container,d);var v=d.renderer.$gutter;a.addListener(v,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),d),a.addListener(v,"click",this.onMouseEvent.bind(this,"gutterclick"),d),a.addListener(v,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),d),a.addListener(v,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),d),a.addListener(m,"mousedown",_,d),a.addListener(v,"mousedown",_,d),h.isIE&&d.renderer.scrollBarV&&(a.addListener(d.renderer.scrollBarV.element,"mousedown",_,d),a.addListener(d.renderer.scrollBarH.element,"mousedown",_,d)),d.on("mousemove",function(y){if(!(c.state||c.$dragDelay||!c.$dragEnabled)){var C=d.renderer.screenToTextCoordinates(y.x,y.y),T=d.session.selection.getRange(),D=d.renderer;!T.isEmpty()&&T.insideStart(C.row,C.column)?D.setCursorStyle("default"):D.setCursorStyle("")}},d)}return p.prototype.onMouseEvent=function(d,c){this.editor.session&&this.editor._emit(d,new l(c,this.editor))},p.prototype.onMouseMove=function(d,c){var _=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!_||!_.length||this.editor._emit(d,new l(c,this.editor))},p.prototype.onMouseWheel=function(d,c){var _=new l(c,this.editor);_.speed=this.$scrollSpeed*2,_.wheelX=c.wheelX,_.wheelY=c.wheelY,this.editor._emit(d,_)},p.prototype.setState=function(d){this.state=d},p.prototype.captureMouse=function(d,c){this.x=d.x,this.y=d.y,this.isMousePressed=!0;var _=this.editor,m=this.editor.renderer;m.$isMousePressed=!0;var v=this,y=function(w){if(w){if(h.isWebKit&&!w.which&&v.releaseMouse)return v.releaseMouse();v.x=w.clientX,v.y=w.clientY,c&&c(w),v.mouseEvent=new l(w,v.editor),v.$mouseMoved=!0}},C=function(w){_.off("beforeEndOperation",D),clearInterval(g),_.session&&T(),v[v.state+"End"]&&v[v.state+"End"](w),v.state="",v.isMousePressed=m.$isMousePressed=!1,m.$keepTextAreaAtCursor&&m.$moveTextAreaToCursor(),v.$onCaptureMouseMove=v.releaseMouse=null,w&&v.onMouseEvent("mouseup",w),_.endOperation()},T=function(){v[v.state]&&v[v.state](),v.$mouseMoved=!1};if(h.isOldIE&&d.domEvent.type=="dblclick")return setTimeout(function(){C(d)});var D=function(w){v.releaseMouse&&_.curOp.command.name&&_.curOp.selectionChanged&&(v[v.state+"End"]&&v[v.state+"End"](),v.state="",v.releaseMouse())};_.on("beforeEndOperation",D),_.startOperation({command:{name:"mouse"}}),v.$onCaptureMouseMove=y,v.releaseMouse=a.capture(this.editor.container,y,C);var g=setInterval(T,20)},p.prototype.cancelContextMenu=function(){var d=function(c){c&&c.domEvent&&c.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",d),c&&c.domEvent&&a.stopEvent(c.domEvent))}.bind(this);setTimeout(d,10),this.editor.on("nativecontextmenu",d)},p.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},p}();f.prototype.releaseMouse=null,s.defineOptions(f.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:h.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=f});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=function(){function o(r){r.on("click",function(l){var u=l.getDocumentPosition(),i=r.session,s=i.getFoldAt(u.row,u.column,1);s&&(l.getAccelKey()?i.removeFold(s):i.expandFold(s),l.stop());var f=l.domEvent&&l.domEvent.target;f&&a.hasCssClass(f,"ace_inline_button")&&a.hasCssClass(f,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),r.renderer.scrollCursorIntoView())}),r.on("gutterclick",function(l){var u=r.renderer.$gutterLayer.getRegion(l);if(u=="foldWidgets"){var i=l.getDocumentPosition().row,s=r.session;s.foldWidgets&&s.foldWidgets[i]&&r.session.onFoldWidgetClick(i,l),r.isFocused()||r.focus(),l.stop()}}),r.on("gutterdblclick",function(l){var u=r.renderer.$gutterLayer.getRegion(l);if(u=="foldWidgets"){var i=l.getDocumentPosition().row,s=r.session,f=s.getParentFoldRangeData(i,!0),p=f.range||f.firstRange;if(p){i=p.start.row;var d=s.getFoldAt(i,s.getLine(i).length,1);d?s.removeFold(d):(s.addFold("...",p),r.renderer.scrollCursorIntoView({row:p.start.row,column:0}))}l.stop()}})}return o}();t.FoldHandler=h});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var a=e("../lib/keys"),h=e("../lib/event"),o=function(){function r(l){this.$editor=l,this.$data={editor:l},this.$handlers=[],this.setDefaultHandler(l.commands)}return r.prototype.setDefaultHandler=function(l){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=l,this.addKeyboardHandler(l,0)},r.prototype.setKeyboardHandler=function(l){var u=this.$handlers;if(u[u.length-1]!=l){for(;u[u.length-1]&&u[u.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(u[u.length-1]);this.addKeyboardHandler(l,1)}},r.prototype.addKeyboardHandler=function(l,u){if(l){typeof l=="function"&&!l.handleKeyboard&&(l.handleKeyboard=l);var i=this.$handlers.indexOf(l);i!=-1&&this.$handlers.splice(i,1),u==null?this.$handlers.push(l):this.$handlers.splice(u,0,l),i==-1&&l.attach&&l.attach(this.$editor)}},r.prototype.removeKeyboardHandler=function(l){var u=this.$handlers.indexOf(l);return u==-1?!1:(this.$handlers.splice(u,1),l.detach&&l.detach(this.$editor),!0)},r.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},r.prototype.getStatusText=function(){var l=this.$data,u=l.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(u,l)||""}).filter(Boolean).join(" ")},r.prototype.$callKeyboardHandlers=function(l,u,i,s){for(var f,p=!1,d=this.$editor.commands,c=this.$handlers.length;c--&&(f=this.$handlers[c].handleKeyboard(this.$data,l,u,i,s),!(!(!f||!f.command)&&(f.command=="null"?p=!0:p=d.exec(f.command,this.$editor,f.args,s),p&&s&&l!=-1&&f.passEvent!=!0&&f.command.passEvent!=!0&&h.stopEvent(s),p))););return!p&&l==-1&&(f={command:"insertstring"},p=d.exec("insertstring",this.$editor,u)),p&&this.$editor._signal&&this.$editor._signal("keyboardActivity",f),p},r.prototype.onCommandKey=function(l,u,i){var s=a.keyCodeToString(i);return this.$callKeyboardHandlers(u,s,i,l)},r.prototype.onTextInput=function(l){return this.$callKeyboardHandlers(-1,l)},r}();t.KeyBinding=o});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var a=["\u0621","\u0641"],h=["\u063A","\u064A"],o=0,r=0,l=!1,u=!1,i=!1,s=!1,f=!1,p=!1,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_=0,m=1,v=0,y=1,C=2,T=3,D=4,g=5,w=6,F=7,b=8,E=9,M=10,S=11,x=12,L=13,R=14,A=15,I=16,$=17,H=18,P=[H,H,H,H,H,H,H,H,H,w,g,w,b,g,H,H,H,H,H,H,H,H,H,H,H,H,H,H,g,g,g,w,b,D,D,S,S,S,D,D,D,D,D,M,E,M,E,E,C,C,C,C,C,C,C,C,C,C,E,D,D,D,D,D,D,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,D,D,D,D,D,D,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,D,D,D,D,H,H,H,H,H,H,g,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,E,D,S,S,S,S,D,D,D,D,v,D,D,H,D,D,S,S,C,C,D,v,D,D,D,C,v,D,D,D,D,D],q=[b,b,b,b,b,b,b,b,b,b,b,H,H,H,v,y,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,b,g,L,R,A,I,$,E,S,S,S,S,S,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,b];function G(U,k,te,j){var ye=o?c:d,Ae=null,we=null,ce=null,xe=0,It=null,un=null,Gt=-1,tt=null,le=null,ve=[];if(!j)for(tt=0,j=[];tt<te;tt++)j[tt]=O(U[tt]);for(r=o,l=!1,u=!1,i=!1,s=!1,le=0;le<te;le++){if(Ae=xe,ve[le]=we=Q(U,j,ve,le),xe=ye[Ae][we],It=xe&240,xe&=15,k[le]=ce=ye[xe][5],It>0)if(It==16){for(tt=Gt;tt<le;tt++)k[tt]=1;Gt=-1}else Gt=-1;if(un=ye[xe][6],un)Gt==-1&&(Gt=le);else if(Gt>-1){for(tt=Gt;tt<le;tt++)k[tt]=ce;Gt=-1}j[le]==g&&(k[le]=0),r|=ce}if(s){for(tt=0;tt<te;tt++)if(j[tt]==w){k[tt]=o;for(var fe=tt-1;fe>=0&&j[fe]==b;fe--)k[fe]=o}}}function B(U,k,te){if(!(r<U)){if(U==1&&o==m&&!i){te.reverse();return}for(var j=te.length,ye=0,Ae,we,ce,xe;ye<j;){if(k[ye]>=U){for(Ae=ye+1;Ae<j&&k[Ae]>=U;)Ae++;for(we=ye,ce=Ae-1;we<ce;we++,ce--)xe=te[we],te[we]=te[ce],te[ce]=xe;ye=Ae}ye++}}}function Q(U,k,te,j){var ye=k[j],Ae,we,ce,xe;switch(ye){case v:case y:l=!1;case D:case T:return ye;case C:return l?T:C;case F:return l=!0,u=!0,y;case b:return D;case E:return j<1||j+1>=k.length||(Ae=te[j-1])!=C&&Ae!=T||(we=k[j+1])!=C&&we!=T?D:(l&&(we=T),we==Ae?we:D);case M:return Ae=j>0?te[j-1]:g,Ae==C&&j+1<k.length&&k[j+1]==C?C:D;case S:if(j>0&&te[j-1]==C)return C;if(l)return D;for(xe=j+1,ce=k.length;xe<ce&&k[xe]==S;)xe++;return xe<ce&&k[xe]==C?C:D;case x:for(ce=k.length,xe=j+1;xe<ce&&k[xe]==x;)xe++;if(xe<ce){var It=U[j],un=It>=1425&&It<=2303||It==64286;if(Ae=k[xe],un&&(Ae==y||Ae==F))return y}return j<1||(Ae=k[j-1])==g?D:te[j-1];case g:return l=!1,i=!0,o;case w:return s=!0,D;case L:case R:case I:case $:case A:l=!1;case H:return D}}function O(U){var k=U.charCodeAt(0),te=k>>8;return te==0?k>191?v:P[k]:te==5?/[\u0591-\u05f4]/.test(U)?y:v:te==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(U)?x:/[\u0660-\u0669\u066b-\u066c]/.test(U)?T:k==1642?S:/[\u06f0-\u06f9]/.test(U)?C:F:te==32&&k<=8287?q[k&255]:te==254&&k>=65136?F:D}function W(U){return U>="\u064B"&&U<="\u0655"}t.L=v,t.R=y,t.EN=C,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(U,k,te){if(U.length<2)return{};var j=U.split(""),ye=new Array(j.length),Ae=new Array(j.length),we=[];o=te?m:_,G(j,we,j.length,k);for(var ce=0;ce<ye.length;ye[ce]=ce,ce++);B(2,we,ye),B(1,we,ye);for(var ce=0;ce<ye.length-1;ce++)k[ce]===T?we[ce]=t.AN:we[ce]===y&&(k[ce]>F&&k[ce]<L||k[ce]===D||k[ce]===H)?we[ce]=t.ON_R:ce>0&&j[ce-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(j[ce])&&(we[ce-1]=we[ce]=t.R_H,ce++);j[j.length-1]===t.DOT&&(we[j.length-1]=t.B),j[0]==="\u202B"&&(we[0]=t.RLE);for(var ce=0;ce<ye.length;ce++)Ae[ce]=we[ye[ce]];return{logicalFromVisual:ye,bidiLevels:Ae}},t.hasBidiCharacters=function(U,k){for(var te=!1,j=0;j<U.length;j++)k[j]=O(U.charAt(j)),!te&&(k[j]==y||k[j]==F||k[j]==T)&&(te=!0);return te},t.getVisualFromLogicalIdx=function(U,k){for(var te=0;te<k.logicalFromVisual.length;te++)if(k.logicalFromVisual[te]==U)return te;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var a=e("./lib/bidiutil"),h=e("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,r=function(){function l(u){this.session=u,this.bidiMap={},this.currentRow=null,this.bidiUtil=a,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(u.getValue())}return l.prototype.isBidiRow=function(u,i,s){return this.seenBidi?(u!==this.currentRow&&(this.currentRow=u,this.updateRowLine(i,s),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},l.prototype.onChange=function(u){this.seenBidi?this.currentRow=null:u.action=="insert"&&o.test(u.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},l.prototype.getDocumentRow=function(){var u=0,i=this.session.$screenRowCache;if(i.length){var s=this.session.$getRowCacheIndex(i,this.currentRow);s>=0&&(u=this.session.$docRowCache[s])}return u},l.prototype.getSplitIndex=function(){var u=0,i=this.session.$screenRowCache;if(i.length)for(var s,f=this.session.$getRowCacheIndex(i,this.currentRow);this.currentRow-u>0&&(s=this.session.$getRowCacheIndex(i,this.currentRow-u-1),s===f);)f=s,u++;else u=this.currentRow;return u},l.prototype.updateRowLine=function(u,i){u===void 0&&(u=this.getDocumentRow());var s=u===this.session.getLength()-1,f=s?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(u),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var p=this.session.$wrapData[u];p&&(i===void 0&&(i=this.getSplitIndex()),i>0&&p.length?(this.wrapIndent=p.indent,this.wrapOffset=this.wrapIndent*this.charWidths[a.L],this.line=i<p.length?this.line.substring(p[i-1],p[i]):this.line.substring(p[p.length-1])):this.line=this.line.substring(0,p[i]),i==p.length&&(this.line+=this.showInvisibles?f:a.DOT))}else this.line+=this.showInvisibles?f:a.DOT;var d=this.session,c=0,_;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(m,v){return m==="	"||d.isFullWidth(m.charCodeAt(0))?(_=m==="	"?d.getScreenTabSize(v+c):2,c+=_-1,h.stringRepeat(a.DOT,_)):m}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==a.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},l.prototype.updateBidiMap=function(){var u=[];a.hasBidiCharacters(this.line,u)||this.isRtlDir?this.bidiMap=a.doBidiReorder(this.line,u,this.isRtlDir):this.bidiMap={}},l.prototype.markAsDirty=function(){this.currentRow=null},l.prototype.updateCharacterWidths=function(u){if(this.characterWidth!==u.$characterSize.width){this.fontMetrics=u;var i=this.characterWidth=u.$characterSize.width,s=u.$measureCharWidth("\u05D4");this.charWidths[a.L]=this.charWidths[a.EN]=this.charWidths[a.ON_R]=i,this.charWidths[a.R]=this.charWidths[a.AN]=s,this.charWidths[a.R_H]=s*.45,this.charWidths[a.B]=this.charWidths[a.RLE]=0,this.currentRow=null}},l.prototype.setShowInvisibles=function(u){this.showInvisibles=u,this.currentRow=null},l.prototype.setEolChar=function(u){this.EOL=u},l.prototype.setContentWidth=function(u){this.contentWidth=u},l.prototype.isRtlLine=function(u){return this.$isRtl?!0:u!=null?this.session.getLine(u).charAt(0)==this.RLE:this.isRtlDir},l.prototype.setRtlDirection=function(u,i){for(var s=u.getCursorPosition(),f=u.selection.getSelectionAnchor().row;f<=s.row;f++)!i&&u.session.getLine(f).charAt(0)===u.session.$bidiHandler.RLE?u.session.doc.removeInLine(f,0,1):i&&u.session.getLine(f).charAt(0)!==u.session.$bidiHandler.RLE&&u.session.doc.insert({column:0,row:f},u.session.$bidiHandler.RLE)},l.prototype.getPosLeft=function(u){u-=this.wrapIndent;var i=this.line.charAt(0)===this.RLE?1:0,s=u>i?this.session.getOverwrite()?u:u-1:i,f=a.getVisualFromLogicalIdx(s,this.bidiMap),p=this.bidiMap.bidiLevels,d=0;!this.session.getOverwrite()&&u<=i&&p[f]%2!==0&&f++;for(var c=0;c<f;c++)d+=this.charWidths[p[c]];return!this.session.getOverwrite()&&u>i&&p[f]%2===0&&(d+=this.charWidths[p[f]]),this.wrapIndent&&(d+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(d+=this.rtlLineOffset),d},l.prototype.getSelections=function(u,i){var s=this.bidiMap,f=s.bidiLevels,p,d=[],c=0,_=Math.min(u,i)-this.wrapIndent,m=Math.max(u,i)-this.wrapIndent,v=!1,y=!1,C=0;this.wrapIndent&&(c+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var T,D=0;D<f.length;D++)T=s.logicalFromVisual[D],p=f[D],v=T>=_&&T<m,v&&!y?C=c:!v&&y&&d.push({left:C,width:c-C}),c+=this.charWidths[p],y=v;if(v&&D===f.length&&d.push({left:C,width:c-C}),this.isRtlDir)for(var g=0;g<d.length;g++)d[g].left+=this.rtlLineOffset;return d},l.prototype.offsetToCol=function(s){this.isRtlDir&&(s-=this.rtlLineOffset);var i=0,s=Math.max(s,0),f=0,p=0,d=this.bidiMap.bidiLevels,c=this.charWidths[d[p]];for(this.wrapIndent&&(s-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);s>f+c/2;){if(f+=c,p===d.length-1){c=0;break}c=this.charWidths[d[++p]]}return p>0&&d[p-1]%2!==0&&d[p]%2===0?(s<f&&p--,i=this.bidiMap.logicalFromVisual[p]):p>0&&d[p-1]%2===0&&d[p]%2!==0?i=1+(s>f?this.bidiMap.logicalFromVisual[p]:this.bidiMap.logicalFromVisual[p-1]):this.isRtlDir&&p===d.length-1&&c===0&&d[p-1]%2===0||!this.isRtlDir&&p===0&&d[p]%2!==0?i=1+this.bidiMap.logicalFromVisual[p]:(p>0&&d[p-1]%2!==0&&c!==0&&p--,i=this.bidiMap.logicalFromVisual[p]),i===0&&this.isRtlDir&&i++,i+this.wrapIndent},l}();t.BidiHandler=r});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./lib/lang"),o=e("./lib/event_emitter").EventEmitter,r=e("./range").Range,l=function(){function u(i){this.session=i,this.doc=i.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var s=this;this.cursor.on("change",function(f){s.$cursorChanged=!0,s.$silent||s._emit("changeCursor"),!s.$isEmpty&&!s.$silent&&s._emit("changeSelection"),!s.$keepDesiredColumnOnChange&&f.old.column!=f.value.column&&(s.$desiredColumn=null)}),this.anchor.on("change",function(){s.$anchorChanged=!0,!s.$isEmpty&&!s.$silent&&s._emit("changeSelection")})}return u.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},u.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},u.prototype.getCursor=function(){return this.lead.getPosition()},u.prototype.setAnchor=function(i,s){this.$isEmpty=!1,this.anchor.setPosition(i,s)},u.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},u.prototype.getSelectionLead=function(){return this.lead.getPosition()},u.prototype.isBackwards=function(){var i=this.anchor,s=this.lead;return i.row>s.row||i.row==s.row&&i.column>s.column},u.prototype.getRange=function(){var i=this.anchor,s=this.lead;return this.$isEmpty?r.fromPoints(s,s):this.isBackwards()?r.fromPoints(s,i):r.fromPoints(i,s)},u.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},u.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},u.prototype.setRange=function(i,s){var f=s?i.end:i.start,p=s?i.start:i.end;this.$setSelection(f.row,f.column,p.row,p.column)},u.prototype.$setSelection=function(i,s,f,p){if(!this.$silent){var d=this.$isEmpty,c=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(i,s),this.cursor.setPosition(f,p),this.$isEmpty=!r.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||d!=this.$isEmpty||c)&&this._emit("changeSelection")}},u.prototype.$moveSelection=function(i){var s=this.lead;this.$isEmpty&&this.setSelectionAnchor(s.row,s.column),i.call(this)},u.prototype.selectTo=function(i,s){this.$moveSelection(function(){this.moveCursorTo(i,s)})},u.prototype.selectToPosition=function(i){this.$moveSelection(function(){this.moveCursorToPosition(i)})},u.prototype.moveTo=function(i,s){this.clearSelection(),this.moveCursorTo(i,s)},u.prototype.moveToPosition=function(i){this.clearSelection(),this.moveCursorToPosition(i)},u.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},u.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},u.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},u.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},u.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},u.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},u.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},u.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},u.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},u.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},u.prototype.getWordRange=function(i,s){if(typeof s>"u"){var f=i||this.lead;i=f.row,s=f.column}return this.session.getWordRange(i,s)},u.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},u.prototype.selectAWord=function(){var i=this.getCursor(),s=this.session.getAWordRange(i.row,i.column);this.setSelectionRange(s)},u.prototype.getLineRange=function(i,s){var f=typeof i=="number"?i:this.lead.row,p,d=this.session.getFoldLine(f);return d?(f=d.start.row,p=d.end.row):p=f,s===!0?new r(f,0,p,this.session.getLine(p).length):new r(f,0,p+1,0)},u.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},u.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},u.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},u.prototype.wouldMoveIntoSoftTab=function(i,s,f){var p=i.column,d=i.column+s;return f<0&&(p=i.column-s,d=i.column),this.session.isTabStop(i)&&this.doc.getLine(i.row).slice(p,d).split(" ").length-1==s},u.prototype.moveCursorLeft=function(){var i=this.lead.getPosition(),s;if(s=this.session.getFoldAt(i.row,i.column,-1))this.moveCursorTo(s.start.row,s.start.column);else if(i.column===0)i.row>0&&this.moveCursorTo(i.row-1,this.doc.getLine(i.row-1).length);else{var f=this.session.getTabSize();this.wouldMoveIntoSoftTab(i,f,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-f):this.moveCursorBy(0,-1)}},u.prototype.moveCursorRight=function(){var i=this.lead.getPosition(),s;if(s=this.session.getFoldAt(i.row,i.column,1))this.moveCursorTo(s.end.row,s.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var f=this.session.getTabSize(),i=this.lead;this.wouldMoveIntoSoftTab(i,f,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,f):this.moveCursorBy(0,1)}},u.prototype.moveCursorLineStart=function(){var i=this.lead.row,s=this.lead.column,f=this.session.documentToScreenRow(i,s),p=this.session.screenToDocumentPosition(f,0),d=this.session.getDisplayLine(i,null,p.row,p.column),c=d.match(/^\s*/);c[0].length!=s&&!this.session.$useEmacsStyleLineStart&&(p.column+=c[0].length),this.moveCursorToPosition(p)},u.prototype.moveCursorLineEnd=function(){var i=this.lead,s=this.session.getDocumentLastRowColumnPosition(i.row,i.column);if(this.lead.column==s.column){var f=this.session.getLine(s.row);if(s.column==f.length){var p=f.search(/\s+$/);p>0&&(s.column=p)}}this.moveCursorTo(s.row,s.column)},u.prototype.moveCursorFileEnd=function(){var i=this.doc.getLength()-1,s=this.doc.getLine(i).length;this.moveCursorTo(i,s)},u.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},u.prototype.moveCursorLongWordRight=function(){var i=this.lead.row,s=this.lead.column,f=this.doc.getLine(i),p=f.substring(s);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var d=this.session.getFoldAt(i,s,1);if(d){this.moveCursorTo(d.end.row,d.end.column);return}if(this.session.nonTokenRe.exec(p)&&(s+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,p=f.substring(s)),s>=f.length){this.moveCursorTo(i,f.length),this.moveCursorRight(),i<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(p)&&(s+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,s)},u.prototype.moveCursorLongWordLeft=function(){var i=this.lead.row,s=this.lead.column,f;if(f=this.session.getFoldAt(i,s,-1)){this.moveCursorTo(f.start.row,f.start.column);return}var p=this.session.getFoldStringAt(i,s,-1);p==null&&(p=this.doc.getLine(i).substring(0,s));var d=h.stringReverse(p);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(d)&&(s-=this.session.nonTokenRe.lastIndex,d=d.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),s<=0){this.moveCursorTo(i,0),this.moveCursorLeft(),i>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(d)&&(s-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,s)},u.prototype.$shortWordEndIndex=function(i){var s=0,f,p=/\s/,d=this.session.tokenRe;if(d.lastIndex=0,this.session.tokenRe.exec(i))s=this.session.tokenRe.lastIndex;else{for(;(f=i[s])&&p.test(f);)s++;if(s<1){for(d.lastIndex=0;(f=i[s])&&!d.test(f);)if(d.lastIndex=0,s++,p.test(f))if(s>2){s--;break}else{for(;(f=i[s])&&p.test(f);)s++;if(s>2)break}}}return d.lastIndex=0,s},u.prototype.moveCursorShortWordRight=function(){var i=this.lead.row,s=this.lead.column,f=this.doc.getLine(i),p=f.substring(s),d=this.session.getFoldAt(i,s,1);if(d)return this.moveCursorTo(d.end.row,d.end.column);if(s==f.length){var c=this.doc.getLength();do i++,p=this.doc.getLine(i);while(i<c&&/^\s*$/.test(p));/^\s+/.test(p)||(p=""),s=0}var _=this.$shortWordEndIndex(p);this.moveCursorTo(i,s+_)},u.prototype.moveCursorShortWordLeft=function(){var i=this.lead.row,s=this.lead.column,f;if(f=this.session.getFoldAt(i,s,-1))return this.moveCursorTo(f.start.row,f.start.column);var p=this.session.getLine(i).substring(0,s);if(s===0){do i--,p=this.doc.getLine(i);while(i>0&&/^\s*$/.test(p));s=p.length,/\s+$/.test(p)||(p="")}var d=h.stringReverse(p),c=this.$shortWordEndIndex(d);return this.moveCursorTo(i,s-c)},u.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},u.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},u.prototype.moveCursorBy=function(i,s){var f=this.session.documentToScreenPosition(this.lead.row,this.lead.column),p;if(s===0&&(i!==0&&(this.session.$bidiHandler.isBidiRow(f.row,this.lead.row)?(p=this.session.$bidiHandler.getPosLeft(f.column),f.column=Math.round(p/this.session.$bidiHandler.charWidths[0])):p=f.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?f.column=this.$desiredColumn:this.$desiredColumn=f.column),i!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var d=this.session.lineWidgets[this.lead.row];i<0?i-=d.rowsAbove||0:i>0&&(i+=d.rowCount-(d.rowsAbove||0))}var c=this.session.screenToDocumentPosition(f.row+i,f.column,p);i!==0&&s===0&&c.row===this.lead.row&&(c.column,this.lead.column),this.moveCursorTo(c.row,c.column+s,s===0)},u.prototype.moveCursorToPosition=function(i){this.moveCursorTo(i.row,i.column)},u.prototype.moveCursorTo=function(i,s,f){var p=this.session.getFoldAt(i,s,1);p&&(i=p.start.row,s=p.start.column),this.$keepDesiredColumnOnChange=!0;var d=this.session.getLine(i);/[\uDC00-\uDFFF]/.test(d.charAt(s))&&d.charAt(s-1)&&(this.lead.row==i&&this.lead.column==s+1?s=s-1:s=s+1),this.lead.setPosition(i,s),this.$keepDesiredColumnOnChange=!1,f||(this.$desiredColumn=null)},u.prototype.moveCursorToScreen=function(i,s,f){var p=this.session.screenToDocumentPosition(i,s);this.moveCursorTo(p.row,p.column,f)},u.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},u.prototype.fromOrientedRange=function(i){this.setSelectionRange(i,i.cursor==i.start),this.$desiredColumn=i.desiredColumn||this.$desiredColumn},u.prototype.toOrientedRange=function(i){var s=this.getRange();return i?(i.start.column=s.start.column,i.start.row=s.start.row,i.end.column=s.end.column,i.end.row=s.end.row):i=s,i.cursor=this.isBackwards()?i.start:i.end,i.desiredColumn=this.$desiredColumn,i},u.prototype.getRangeOfMovements=function(i){var s=this.getCursor();try{i(this);var f=this.getCursor();return r.fromPoints(s,f)}catch{return r.fromPoints(s,s)}finally{this.moveCursorToPosition(s)}},u.prototype.toJSON=function(){if(this.rangeCount)var i=this.ranges.map(function(s){var f=s.clone();return f.isBackwards=s.cursor==s.start,f});else{var i=this.getRange();i.isBackwards=this.isBackwards()}return i},u.prototype.fromJSON=function(i){if(i.start==null)if(this.rangeList&&i.length>1){this.toSingleRange(i[0]);for(var s=i.length;s--;){var f=r.fromPoints(i[s].start,i[s].end);i[s].isBackwards&&(f.cursor=f.start),this.addRange(f,!0)}return}else i=i[0];this.rangeList&&this.toSingleRange(i),this.setSelectionRange(i,i.isBackwards)},u.prototype.isEqual=function(i){if((i.length||this.rangeCount)&&i.length!=this.rangeCount)return!1;if(!i.length||!this.ranges)return this.getRange().isEqual(i);for(var s=this.ranges.length;s--;)if(!this.ranges[s].isEqual(i[s]))return!1;return!0},u}();l.prototype.setSelectionAnchor=l.prototype.setAnchor,l.prototype.getSelectionAnchor=l.prototype.getAnchor,l.prototype.setSelectionRange=l.prototype.setRange,a.implement(l.prototype,o),t.Selection=l});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,n){"use strict";var a=e("./lib/report_error").reportError,h=2e3,o=function(){function r(l){this.splitRegex,this.states=l,this.regExps={},this.matchMappings={};for(var u in this.states){for(var i=this.states[u],s=[],f=0,p=this.matchMappings[u]={defaultToken:"text"},d="g",c=[],_=0;_<i.length;_++){var m=i[_];if(m.defaultToken&&(p.defaultToken=m.defaultToken),m.caseInsensitive&&d.indexOf("i")===-1&&(d+="i"),m.unicode&&d.indexOf("u")===-1&&(d+="u"),m.regex!=null){m.regex instanceof RegExp&&(m.regex=m.regex.toString().slice(1,-1));var v=m.regex,y=new RegExp("(?:("+v+")|(.))").exec("a").length-2;Array.isArray(m.token)?m.token.length==1||y==1?m.token=m.token[0]:y-1!=m.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:m,groupCount:y-1}),m.token=m.token[0]):(m.tokenArray=m.token,m.token=null,m.onMatch=this.$arrayTokens):typeof m.token=="function"&&!m.onMatch&&(y>1?m.onMatch=this.$applyToken:m.onMatch=m.token),y>1&&(/\\\d/.test(m.regex)?v=m.regex.replace(/\\([0-9]+)/g,function(C,T){return"\\"+(parseInt(T,10)+f+1)}):(y=1,v=this.removeCapturingGroups(m.regex)),!m.splitRegex&&typeof m.token!="string"&&c.push(m)),p[f]=_,f+=y,s.push(v),m.onMatch||(m.onMatch=null)}}s.length||(p[0]=0,s.push("$")),c.forEach(function(C){C.splitRegex=this.createSplitterRegexp(C.regex,d)},this),this.regExps[u]=new RegExp("("+s.join(")|(")+")|($)",d)}}return r.prototype.$setMaxTokenCount=function(l){h=l|0},r.prototype.$applyToken=function(l){var u=this.splitRegex.exec(l).slice(1),i=this.token.apply(this,u);if(typeof i=="string")return[{type:i,value:l}];for(var s=[],f=0,p=i.length;f<p;f++)u[f]&&(s[s.length]={type:i[f],value:u[f]});return s},r.prototype.$arrayTokens=function(l){if(!l)return[];var u=this.splitRegex.exec(l);if(!u)return"text";for(var i=[],s=this.tokenArray,f=0,p=s.length;f<p;f++)u[f+1]&&(i[i.length]={type:s[f],value:u[f+1]});return i},r.prototype.removeCapturingGroups=function(l){var u=l.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(i,s){return s?"(?:":i});return u},r.prototype.createSplitterRegexp=function(l,u){if(l.indexOf("(?=")!=-1){var i=0,s=!1,f={};l.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(p,d,c,_,m,v){return s?s=m!="]":m?s=!0:_?(i==f.stack&&(f.end=v+1,f.stack=-1),i--):c&&(i++,c.length!=1&&(f.stack=i,f.start=v)),p}),f.end!=null&&/^\)*$/.test(l.substr(f.end))&&(l=l.substring(0,f.start)+l.substr(f.end))}return l.charAt(0)!="^"&&(l="^"+l),l.charAt(l.length-1)!="$"&&(l+="$"),new RegExp(l,(u||"").replace("g",""))},r.prototype.getLineTokens=function(l,u){if(u&&typeof u!="string"){var i=u.slice(0);u=i[0],u==="#tmp"&&(i.shift(),u=i.shift())}else var i=[];var s=u||"start",f=this.states[s];f||(s="start",f=this.states[s]);var p=this.matchMappings[s],d=this.regExps[s];d.lastIndex=0;for(var c,_=[],m=0,v=0,y={type:null,value:""};c=d.exec(l);){var C=p.defaultToken,T=null,D=c[0],g=d.lastIndex;if(g-D.length>m){var w=l.substring(m,g-D.length);y.type==C?y.value+=w:(y.type&&_.push(y),y={type:C,value:w})}for(var F=0;F<c.length-2;F++)if(c[F+1]!==void 0){T=f[p[F]],T.onMatch?C=T.onMatch(D,s,i,l):C=T.token,T.next&&(typeof T.next=="string"?s=T.next:s=T.next(s,i),f=this.states[s],f||(this.reportError("state doesn't exist",s),s="start",f=this.states[s]),p=this.matchMappings[s],m=g,d=this.regExps[s],d.lastIndex=g),T.consumeLineEnd&&(m=g);break}if(D){if(typeof C=="string")(!T||T.merge!==!1)&&y.type===C?y.value+=D:(y.type&&_.push(y),y={type:C,value:D});else if(C){y.type&&_.push(y),y={type:null,value:""};for(var F=0;F<C.length;F++)_.push(C[F])}}if(m==l.length)break;if(m=g,v++>h){for(v>2*l.length&&this.reportError("infinite loop with in ace tokenizer",{startState:u,line:l});m<l.length;)y.type&&_.push(y),y={value:l.substring(m,m+=500),type:"overflow"};s="start",i=[];break}}return y.type&&_.push(y),i.length>1&&i[0]!==s&&i.unshift("#tmp",s),{tokens:_,state:i.length?i:s}},r}();o.prototype.reportError=a,t.Tokenizer=o});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";var a=e("../lib/deep_copy").deepCopy,h;h=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(l,u){if(!u){for(var i in l)this.$rules[i]=l[i];return}for(var i in l){for(var s=l[i],f=0;f<s.length;f++){var p=s[f];(p.next||p.onMatch)&&(typeof p.next=="string"&&p.next.indexOf(u)!==0&&(p.next=u+p.next),p.nextState&&p.nextState.indexOf(u)!==0&&(p.nextState=u+p.nextState))}this.$rules[u+i]=s}},this.getRules=function(){return this.$rules},this.embedRules=function(l,u,i,s,f){var p=typeof l=="function"?new l().getRules():l;if(s)for(var d=0;d<s.length;d++)s[d]=u+s[d];else{s=[];for(var c in p)s.push(u+c)}if(this.addRules(p,u),i)for(var _=Array.prototype[f?"push":"unshift"],d=0;d<s.length;d++)_.apply(this.$rules[s[d]],a(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(u)},this.getEmbeds=function(){return this.$embeds};var o=function(l,u){return(l!="start"||u.length)&&u.unshift(this.nextState,l),this.nextState},r=function(l,u){return u.shift(),u.shift()||"start"};this.normalizeRules=function(){var l=0,u=this.$rules;function i(s){var f=u[s];f.processed=!0;for(var p=0;p<f.length;p++){var d=f[p],c=null;Array.isArray(d)&&(c=d,d={}),!d.regex&&d.start&&(d.regex=d.start,d.next||(d.next=[]),d.next.push({defaultToken:d.token},{token:d.token+".end",regex:d.end||d.start,next:"pop"}),d.token=d.token+".start",d.push=!0);var _=d.next||d.push;if(_&&Array.isArray(_)){var m=d.stateName;m||(m=d.token,typeof m!="string"&&(m=m[0]||""),u[m]&&(m+=l++)),u[m]=_,d.next=m,i(m)}else _=="pop"&&(d.next=r);if(d.push&&(d.nextState=d.next||d.push,d.next=o,delete d.push),d.rules)for(var v in d.rules)u[v]?u[v].push&&u[v].push.apply(u[v],d.rules[v]):u[v]=d.rules[v];var y=typeof d=="string"?d:d.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?c=y.map(function(T){return u[T]}):c=u[y]),c){var C=[p,1].concat(c);d.noEscape&&(C=C.filter(function(T){return!T.next})),f.splice.apply(f,C),p--}d.keywordMap&&(d.token=this.createKeywordMapper(d.keywordMap,d.defaultToken||"text",d.caseInsensitive),delete d.defaultToken)}}Object.keys(u).forEach(i,this)},this.createKeywordMapper=function(l,u,i,s){var f=Object.create(null);return this.$keywordList=[],Object.keys(l).forEach(function(p){for(var d=l[p],c=d.split(s||"|"),_=c.length;_--;){var m=c[_];this.$keywordList.push(m),i&&(m=m.toLowerCase()),f[m]=p}},this),l=null,i?function(p){return f[p.toLowerCase()]||u}:function(p){return f[p]||u}},this.getKeywords=function(){return this.$keywords}}.call(h.prototype),t.TextHighlightRules=h});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var a;a=function(){this.$behaviours={}},function(){this.add=function(h,o,r){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[h]:this.$behaviours[h]={}}this.$behaviours[h][o]=r},this.addBehaviours=function(h){for(var o in h)for(var r in h[o])this.add(o,r,h[o][r])},this.remove=function(h){this.$behaviours&&this.$behaviours[h]&&delete this.$behaviours[h]},this.inherit=function(h,o){if(typeof h=="function")var r=new h().getBehaviours(o);else var r=h.getBehaviours(o);this.addBehaviours(r)},this.getBehaviours=function(h){if(h){for(var o={},r=0;r<h.length;r++)this.$behaviours[h[r]]&&(o[h[r]]=this.$behaviours[h[r]]);return o}else return this.$behaviours}}.call(a.prototype),t.Behaviour=a});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("./range").Range,h=function(){function o(r,l,u){this.$session=r,this.$row=l,this.$rowTokens=r.getTokens(l);var i=r.getTokenAt(l,u);this.$tokenIndex=i?i.index:-1}return o.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},o.prototype.stepForward=function(){this.$tokenIndex+=1;for(var r;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,r||(r=this.$session.getLength()),this.$row>=r)return this.$row=r-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},o.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},o.prototype.getCurrentTokenRow=function(){return this.$row},o.prototype.getCurrentTokenColumn=function(){var r=this.$rowTokens,l=this.$tokenIndex,u=r[l].start;if(u!==void 0)return u;for(u=0;l>0;)l-=1,u+=r[l].value.length;return u},o.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},o.prototype.getCurrentTokenRange=function(){var r=this.$rowTokens[this.$tokenIndex],l=this.getCurrentTokenColumn();return new a(this.$row,l,this.$row,l+r.value.length)},o}();t.TokenIterator=h});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var a=e("../../lib/oop"),h=e("../behaviour").Behaviour,o=e("../../token_iterator").TokenIterator,r=e("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],u=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],i,s={},f={'"':'"',"'":"'"},p=function(_){var m=-1;if(_.multiSelect&&(m=_.selection.index,s.rangeCount!=_.multiSelect.rangeCount&&(s={rangeCount:_.multiSelect.rangeCount})),s[m])return i=s[m];i=s[m]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},d=function(_,m,v,y){var C=_.end.row-_.start.row;return{text:v+m+y,selection:[0,_.start.column+1,C,_.end.column+(C?0:1)]}},c;c=function(_){_=_||{},this.add("braces","insertion",function(m,v,y,C,T){var D=y.getCursorPosition(),g=C.doc.getLine(D.row);if(T=="{"){p(y);var w=y.getSelectionRange(),F=C.doc.getTextRange(w);if(F!==""&&F!=="{"&&y.getWrapBehavioursEnabled())return d(w,F,"{","}");if(c.isSaneInsertion(y,C))return/[\]\}\)]/.test(g[D.column])||y.inMultiSelectMode||_.braces?(c.recordAutoInsert(y,C,"}"),{text:"{}",selection:[1,1]}):(c.recordMaybeInsert(y,C,"{"),{text:"{",selection:[1,1]})}else if(T=="}"){p(y);var b=g.substring(D.column,D.column+1);if(b=="}"){var E=C.$findOpeningBracket("}",{column:D.column+1,row:D.row});if(E!==null&&c.isAutoInsertedClosing(D,g,T))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(T==`
`||T==`\r
`){p(y);var M="";c.isMaybeInsertedClosing(D,g)&&(M=r.stringRepeat("}",i.maybeInsertedBrackets),c.clearMaybeInsertedClosing());var b=g.substring(D.column,D.column+1);if(b==="}"){var S=C.findMatchingBracket({row:D.row,column:D.column+1},"}");if(!S)return null;var x=this.$getIndent(C.getLine(S.row))}else if(M)var x=this.$getIndent(g);else{c.clearMaybeInsertedClosing();return}var L=x+C.getTabString();return{text:`
`+L+`
`+x+M,selection:[1,L.length,1,L.length]}}else c.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(m,v,y,C,T){var D=C.doc.getTextRange(T);if(!T.isMultiLine()&&D=="{"){p(y);var g=C.doc.getLine(T.start.row),w=g.substring(T.end.column,T.end.column+1);if(w=="}")return T.end.column++,T;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(m,v,y,C,T){if(T=="("){p(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return d(D,g,"(",")");if(c.isSaneInsertion(y,C))return c.recordAutoInsert(y,C,")"),{text:"()",selection:[1,1]}}else if(T==")"){p(y);var w=y.getCursorPosition(),F=C.doc.getLine(w.row),b=F.substring(w.column,w.column+1);if(b==")"){var E=C.$findOpeningBracket(")",{column:w.column+1,row:w.row});if(E!==null&&c.isAutoInsertedClosing(w,F,T))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(m,v,y,C,T){var D=C.doc.getTextRange(T);if(!T.isMultiLine()&&D=="("){p(y);var g=C.doc.getLine(T.start.row),w=g.substring(T.start.column+1,T.start.column+2);if(w==")")return T.end.column++,T}}),this.add("brackets","insertion",function(m,v,y,C,T){if(T=="["){p(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return d(D,g,"[","]");if(c.isSaneInsertion(y,C))return c.recordAutoInsert(y,C,"]"),{text:"[]",selection:[1,1]}}else if(T=="]"){p(y);var w=y.getCursorPosition(),F=C.doc.getLine(w.row),b=F.substring(w.column,w.column+1);if(b=="]"){var E=C.$findOpeningBracket("]",{column:w.column+1,row:w.row});if(E!==null&&c.isAutoInsertedClosing(w,F,T))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(m,v,y,C,T){var D=C.doc.getTextRange(T);if(!T.isMultiLine()&&D=="["){p(y);var g=C.doc.getLine(T.start.row),w=g.substring(T.start.column+1,T.start.column+2);if(w=="]")return T.end.column++,T}}),this.add("string_dquotes","insertion",function(m,v,y,C,T){var D=C.$mode.$quotes||f;if(T.length==1&&D[T]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(T)!=-1)return;p(y);var g=T,w=y.getSelectionRange(),F=C.doc.getTextRange(w);if(F!==""&&(F.length!=1||!D[F])&&y.getWrapBehavioursEnabled())return d(w,F,g,g);if(!F){var b=y.getCursorPosition(),E=C.doc.getLine(b.row),M=E.substring(b.column-1,b.column),S=E.substring(b.column,b.column+1),x=C.getTokenAt(b.row,b.column),L=C.getTokenAt(b.row,b.column+1);if(M=="\\"&&x&&/escape/.test(x.type))return null;var R=x&&/string|escape/.test(x.type),A=!L||/string|escape/.test(L.type),I;if(S==g)I=R!==A,I&&/string\.end/.test(L.type)&&(I=!1);else{if(R&&!A||R&&A)return null;var $=C.$mode.tokenRe;$.lastIndex=0;var H=$.test(M);$.lastIndex=0;var P=$.test(S),q=C.$mode.$pairQuotesAfter,G=q&&q[g]&&q[g].test(M);if(!G&&H||P||S&&!/[\s;,.})\]\\]/.test(S))return null;var B=E[b.column-2];if(M==g&&(B==g||$.test(B)))return null;I=!0}return{text:I?g+g:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(m,v,y,C,T){var D=C.$mode.$quotes||f,g=C.doc.getTextRange(T);if(!T.isMultiLine()&&D.hasOwnProperty(g)){p(y);var w=C.doc.getLine(T.start.row),F=w.substring(T.start.column+1,T.start.column+2);if(F==g)return T.end.column++,T}}),_.closeDocComment!==!1&&this.add("doc comment end","insertion",function(m,v,y,C,T){if(m==="doc-start"&&(T===`
`||T===`\r
`)&&y.selection.isEmpty()){var D=y.getCursorPosition(),g=C.doc.getLine(D.row),w=C.doc.getLine(D.row+1),F=this.$getIndent(g);if(/\s*\*/.test(w))return/^\s*\*/.test(g)?{text:T+F+"* ",selection:[1,3+F.length,1,3+F.length]}:{text:T+F+" * ",selection:[1,3+F.length,1,3+F.length]};if(/\/\*\*/.test(g.substring(0,D.column)))return{text:T+F+" * "+T+" "+F+"*/",selection:[1,4+F.length,1,4+F.length]}}})},c.isSaneInsertion=function(_,m){var v=_.getCursorPosition(),y=new o(m,v.row,v.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",l)){if(/[)}\]]/.test(_.session.getLine(v.row)[v.column]))return!0;var C=new o(m,v.row,v.column+1);if(!this.$matchTokenType(C.getCurrentToken()||"text",l))return!1}return y.stepForward(),y.getCurrentTokenRow()!==v.row||this.$matchTokenType(y.getCurrentToken()||"text",u)},c.$matchTokenType=function(_,m){return m.indexOf(_.type||_)>-1},c.recordAutoInsert=function(_,m,v){var y=_.getCursorPosition(),C=m.doc.getLine(y.row);this.isAutoInsertedClosing(y,C,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=y.row,i.autoInsertedLineEnd=v+C.substr(y.column),i.autoInsertedBrackets++},c.recordMaybeInsert=function(_,m,v){var y=_.getCursorPosition(),C=m.doc.getLine(y.row);this.isMaybeInsertedClosing(y,C)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=y.row,i.maybeInsertedLineStart=C.substr(0,y.column)+v,i.maybeInsertedLineEnd=C.substr(y.column),i.maybeInsertedBrackets++},c.isAutoInsertedClosing=function(_,m,v){return i.autoInsertedBrackets>0&&_.row===i.autoInsertedRow&&v===i.autoInsertedLineEnd[0]&&m.substr(_.column)===i.autoInsertedLineEnd},c.isMaybeInsertedClosing=function(_,m){return i.maybeInsertedBrackets>0&&_.row===i.maybeInsertedRow&&m.substr(_.column)===i.maybeInsertedLineEnd&&m.substr(0,_.column)==i.maybeInsertedLineStart},c.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},c.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},a.inherits(c,h),t.CstyleBehaviour=c});ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var a=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],h=0,o=[],r=0;r<a.length;r+=2)o.push(h+=a[r]),a[r+1]&&o.push(45,h+=a[r+1]);t.wordChars=String.fromCharCode.apply(null,o)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var a=e("../config"),h=e("../tokenizer").Tokenizer,o=e("./text_highlight_rules").TextHighlightRules,r=e("./behaviour/cstyle").CstyleBehaviour,l=e("../unicode"),u=e("../lib/lang"),i=e("../token_iterator").TokenIterator,s=e("../range").Range,f;f=function(){this.HighlightRules=o},function(){this.$defaultBehaviour=new r,this.tokenRe=new RegExp("^["+l.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+l.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new h(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(p,d,c,_){var m=d.doc,v=!0,y=!0,C=1/0,T=d.getTabSize(),D=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var F=this.lineCommentStart.map(u.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var F=u.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;F=new RegExp("^(\\s*)(?:"+F+") ?"),D=d.getUseSoftTabs();var M=function(P,q){var G=P.match(F);if(G){var B=G[1].length,Q=G[0].length;!L(P,B,Q)&&G[0][Q-1]==" "&&Q--,m.removeInLine(q,B,Q)}},x=g+" ",E=function(P,q){(!v||/\S/.test(P))&&(L(P,C,C)?m.insertInLine({row:q,column:C},x):m.insertInLine({row:q,column:C},g))},S=function(P,q){return F.test(P)},L=function(P,q,G){for(var B=0;q--&&P.charAt(q)==" ";)B++;if(B%T!=0)return!1;for(var B=0;P.charAt(G++)==" ";)B++;return T>2?B%T!=T-1:B%T==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,w=this.blockComment.end,F=new RegExp("^(\\s*)(?:"+u.escapeRegExp(g)+")"),b=new RegExp("(?:"+u.escapeRegExp(w)+")\\s*$"),E=function(I,$){S(I,$)||(!v||/\S/.test(I))&&(m.insertInLine({row:$,column:I.length},w),m.insertInLine({row:$,column:C},g))},M=function(I,$){var H;(H=I.match(b))&&m.removeInLine($,I.length-H[0].length,I.length),(H=I.match(F))&&m.removeInLine($,H[1].length,H[0].length)},S=function(I,$){if(F.test(I))return!0;for(var H=d.getTokens($),P=0;P<H.length;P++)if(H[P].type==="comment")return!0}}function R(I){for(var $=c;$<=_;$++)I(m.getLine($),$)}var A=1/0;R(function(I,$){var H=I.search(/\S/);H!==-1?(H<C&&(C=H),y&&!S(I,$)&&(y=!1)):A>I.length&&(A=I.length)}),C==1/0&&(C=A,v=!1,y=!1),D&&C%T!=0&&(C=Math.floor(C/T)*T),R(y?M:E)},this.toggleBlockComment=function(p,d,c,_){var m=this.blockComment;if(m){!m.start&&m[0]&&(m=m[0]);var v=new i(d,_.row,_.column),y=v.getCurrentToken(),C=d.selection,T=d.selection.toOrientedRange(),D,g;if(y&&/comment/.test(y.type)){for(var w,F;y&&/comment/.test(y.type);){var b=y.value.indexOf(m.start);if(b!=-1){var E=v.getCurrentTokenRow(),M=v.getCurrentTokenColumn()+b;w=new s(E,M,E,M+m.start.length);break}y=v.stepBackward()}for(var v=new i(d,_.row,_.column),y=v.getCurrentToken();y&&/comment/.test(y.type);){var b=y.value.indexOf(m.end);if(b!=-1){var E=v.getCurrentTokenRow(),M=v.getCurrentTokenColumn()+b;F=new s(E,M,E,M+m.end.length);break}y=v.stepForward()}F&&d.remove(F),w&&(d.remove(w),D=w.start.row,g=-m.start.length)}else g=m.start.length,D=c.start.row,d.insert(c.end,m.end),d.insert(c.start,m.start);T.start.row==D&&(T.start.column+=g),T.end.row==D&&(T.end.column+=g),d.selection.fromOrientedRange(T)}},this.getNextLineIndent=function(p,d,c){return this.$getIndent(d)},this.checkOutdent=function(p,d,c){return!1},this.autoOutdent=function(p,d,c){},this.$getIndent=function(p){return p.match(/^\s*/)[0]},this.createWorker=function(p){return null},this.createModeDelegates=function(p){this.$embeds=[],this.$modes={};for(var d in p)if(p[d]){var c=p[d],_=c.prototype.$id,m=a.$modes[_];m||(a.$modes[_]=m=new c),a.$modes[d]||(a.$modes[d]=m),this.$embeds.push(d),this.$modes[d]=m}for(var v=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(T){(function(D){var g=v[T],w=D[g];D[v[T]]=function(){return this.$delegator(g,arguments,w)}})(C)},C=this,d=0;d<v.length;d++)y(d)},this.$delegator=function(p,d,c){var _=d[0]||"start";if(typeof _!="string"){if(Array.isArray(_[2])){var m=_[2][_[2].length-1],v=this.$modes[m];if(v)return v[p].apply(v,[_[1]].concat([].slice.call(d,1)))}_=_[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var C=_.split(this.$embeds[y]);if(!C[0]&&C[1]){d[0]=C[1];var v=this.$modes[this.$embeds[y]];return v[p].apply(v,d)}}var T=c.apply(this,d);return c?T:void 0},this.transformAction=function(p,d,c,_,m){if(this.$behaviour){var v=this.$behaviour.getBehaviours();for(var y in v)if(v[y][d]){var C=v[y][d].apply(this,arguments);if(C)return C}}},this.getKeywords=function(p){if(!this.completionKeywords){var d=this.$tokenizer.rules,c=[];for(var _ in d)for(var m=d[_],v=0,y=m.length;v<y;v++)if(typeof m[v].token=="string")/keyword|support|storage/.test(m[v].token)&&c.push(m[v].regex);else if(typeof m[v].token=="object"){for(var C=0,T=m[v].token.length;C<T;C++)if(/keyword|support|storage/.test(m[v].token[C])){var _=m[v].regex.match(/\(.+?\)/g)[C];c.push(_.substr(1,_.length-2))}}this.completionKeywords=c}return p?c.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(p,d,c,_){var m=this.$keywordList||this.$createKeywordList();return m.map(function(v){return{name:v,value:v,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(f.prototype),t.Mode=f});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function a(r,l){throw console.log("Invalid Delta:",r),"Invalid Delta: "+l}function h(r,l){return l.row>=0&&l.row<r.length&&l.column>=0&&l.column<=r[l.row].length}function o(r,l){l.action!="insert"&&l.action!="remove"&&a(l,"delta.action must be 'insert' or 'remove'"),l.lines instanceof Array||a(l,"delta.lines must be an Array"),(!l.start||!l.end)&&a(l,"delta.start/end must be an present");var u=l.start;h(r,l.start)||a(l,"delta.start must be contained in document");var i=l.end;l.action=="remove"&&!h(r,i)&&a(l,"delta.end must contained in document for 'remove' actions");var s=i.row-u.row,f=i.column-(s==0?u.column:0);(s!=l.lines.length-1||l.lines[s].length!=f)&&a(l,"delta.range must match delta lines")}t.applyDelta=function(r,l,u){var i=l.start.row,s=l.start.column,f=r[i]||"";switch(l.action){case"insert":var p=l.lines;if(p.length===1)r[i]=f.substring(0,s)+l.lines[0]+f.substring(s);else{var d=[i,1].concat(l.lines);r.splice.apply(r,d),r[i]=f.substring(0,s)+r[i],r[i+l.lines.length-1]+=f.substring(s)}break;case"remove":var c=l.end.column,_=l.end.row;i===_?r[i]=f.substring(0,s)+f.substring(c):r.splice(i,_-i+1,f.substring(0,s)+r[_].substring(c));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./lib/event_emitter").EventEmitter,o=function(){function u(i,s,f){this.$onChange=this.onChange.bind(this),this.attach(i),typeof s!="number"?this.setPosition(s.row,s.column):this.setPosition(s,f)}return u.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},u.prototype.getDocument=function(){return this.document},u.prototype.onChange=function(i){if(!(i.start.row==i.end.row&&i.start.row!=this.row)&&!(i.start.row>this.row)){var s=l(i,{row:this.row,column:this.column},this.$insertRight);this.setPosition(s.row,s.column,!0)}},u.prototype.setPosition=function(i,s,f){var p;if(f?p={row:i,column:s}:p=this.$clipPositionToDocument(i,s),!(this.row==p.row&&this.column==p.column)){var d={row:this.row,column:this.column};this.row=p.row,this.column=p.column,this._signal("change",{old:d,value:p})}},u.prototype.detach=function(){this.document.off("change",this.$onChange)},u.prototype.attach=function(i){this.document=i||this.document,this.document.on("change",this.$onChange)},u.prototype.$clipPositionToDocument=function(i,s){var f={};return i>=this.document.getLength()?(f.row=Math.max(0,this.document.getLength()-1),f.column=this.document.getLine(f.row).length):i<0?(f.row=0,f.column=0):(f.row=i,f.column=Math.min(this.document.getLine(f.row).length,Math.max(0,s))),s<0&&(f.column=0),f},u}();o.prototype.$insertRight=!1,a.implement(o.prototype,h);function r(u,i,s){var f=s?u.column<=i.column:u.column<i.column;return u.row<i.row||u.row==i.row&&f}function l(u,i,s){var f=u.action=="insert",p=(f?1:-1)*(u.end.row-u.start.row),d=(f?1:-1)*(u.end.column-u.start.column),c=u.start,_=f?c:u.end;return r(i,c,s)?{row:i.row,column:i.column}:r(_,i,!s)?{row:i.row+p,column:i.column+(i.row==_.row?d:0)}:{row:c.row,column:c.column}}t.Anchor=o});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./apply_delta").applyDelta,o=e("./lib/event_emitter").EventEmitter,r=e("./range").Range,l=e("./anchor").Anchor,u=function(){function i(s){this.$lines=[""],s.length===0?this.$lines=[""]:Array.isArray(s)?this.insertMergedLines({row:0,column:0},s):this.insert({row:0,column:0},s)}return i.prototype.setValue=function(s){var f=this.getLength()-1;this.remove(new r(0,0,f,this.getLine(f).length)),this.insert({row:0,column:0},s||"")},i.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},i.prototype.createAnchor=function(s,f){return new l(this,s,f)},i.prototype.$detectNewLine=function(s){var f=s.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=f?f[1]:`
`,this._signal("changeNewLineMode")},i.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},i.prototype.setNewLineMode=function(s){this.$newLineMode!==s&&(this.$newLineMode=s,this._signal("changeNewLineMode"))},i.prototype.getNewLineMode=function(){return this.$newLineMode},i.prototype.isNewLine=function(s){return s==`\r
`||s=="\r"||s==`
`},i.prototype.getLine=function(s){return this.$lines[s]||""},i.prototype.getLines=function(s,f){return this.$lines.slice(s,f+1)},i.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},i.prototype.getLength=function(){return this.$lines.length},i.prototype.getTextRange=function(s){return this.getLinesForRange(s).join(this.getNewLineCharacter())},i.prototype.getLinesForRange=function(s){var f;if(s.start.row===s.end.row)f=[this.getLine(s.start.row).substring(s.start.column,s.end.column)];else{f=this.getLines(s.start.row,s.end.row),f[0]=(f[0]||"").substring(s.start.column);var p=f.length-1;s.end.row-s.start.row==p&&(f[p]=f[p].substring(0,s.end.column))}return f},i.prototype.insertLines=function(s,f){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(s,f)},i.prototype.removeLines=function(s,f){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(s,f)},i.prototype.insertNewLine=function(s){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(s,["",""])},i.prototype.insert=function(s,f){return this.getLength()<=1&&this.$detectNewLine(f),this.insertMergedLines(s,this.$split(f))},i.prototype.insertInLine=function(s,f){var p=this.clippedPos(s.row,s.column),d=this.pos(s.row,s.column+f.length);return this.applyDelta({start:p,end:d,action:"insert",lines:[f]},!0),this.clonePos(d)},i.prototype.clippedPos=function(s,f){var p=this.getLength();s===void 0?s=p:s<0?s=0:s>=p&&(s=p-1,f=void 0);var d=this.getLine(s);return f==null&&(f=d.length),f=Math.min(Math.max(f,0),d.length),{row:s,column:f}},i.prototype.clonePos=function(s){return{row:s.row,column:s.column}},i.prototype.pos=function(s,f){return{row:s,column:f}},i.prototype.$clipPosition=function(s){var f=this.getLength();return s.row>=f?(s.row=Math.max(0,f-1),s.column=this.getLine(f-1).length):(s.row=Math.max(0,s.row),s.column=Math.min(Math.max(s.column,0),this.getLine(s.row).length)),s},i.prototype.insertFullLines=function(s,f){s=Math.min(Math.max(s,0),this.getLength());var p=0;s<this.getLength()?(f=f.concat([""]),p=0):(f=[""].concat(f),s--,p=this.$lines[s].length),this.insertMergedLines({row:s,column:p},f)},i.prototype.insertMergedLines=function(s,f){var p=this.clippedPos(s.row,s.column),d={row:p.row+f.length-1,column:(f.length==1?p.column:0)+f[f.length-1].length};return this.applyDelta({start:p,end:d,action:"insert",lines:f}),this.clonePos(d)},i.prototype.remove=function(s){var f=this.clippedPos(s.start.row,s.start.column),p=this.clippedPos(s.end.row,s.end.column);return this.applyDelta({start:f,end:p,action:"remove",lines:this.getLinesForRange({start:f,end:p})}),this.clonePos(f)},i.prototype.removeInLine=function(s,f,p){var d=this.clippedPos(s,f),c=this.clippedPos(s,p);return this.applyDelta({start:d,end:c,action:"remove",lines:this.getLinesForRange({start:d,end:c})},!0),this.clonePos(d)},i.prototype.removeFullLines=function(s,f){s=Math.min(Math.max(0,s),this.getLength()-1),f=Math.min(Math.max(0,f),this.getLength()-1);var p=f==this.getLength()-1&&s>0,d=f<this.getLength()-1,c=p?s-1:s,_=p?this.getLine(c).length:0,m=d?f+1:f,v=d?0:this.getLine(m).length,y=new r(c,_,m,v),C=this.$lines.slice(s,f+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),C},i.prototype.removeNewLine=function(s){s<this.getLength()-1&&s>=0&&this.applyDelta({start:this.pos(s,this.getLine(s).length),end:this.pos(s+1,0),action:"remove",lines:["",""]})},i.prototype.replace=function(s,f){if(s instanceof r||(s=r.fromPoints(s.start,s.end)),f.length===0&&s.isEmpty())return s.start;if(f==this.getTextRange(s))return s.end;this.remove(s);var p;return f?p=this.insert(s.start,f):p=s.start,p},i.prototype.applyDeltas=function(s){for(var f=0;f<s.length;f++)this.applyDelta(s[f])},i.prototype.revertDeltas=function(s){for(var f=s.length-1;f>=0;f--)this.revertDelta(s[f])},i.prototype.applyDelta=function(s,f){var p=s.action=="insert";(p?s.lines.length<=1&&!s.lines[0]:!r.comparePoints(s.start,s.end))||(p&&s.lines.length>2e4?this.$splitAndapplyLargeDelta(s,2e4):(h(this.$lines,s,f),this._signal("change",s)))},i.prototype.$safeApplyDelta=function(s){var f=this.$lines.length;(s.action=="remove"&&s.start.row<f&&s.end.row<f||s.action=="insert"&&s.start.row<=f)&&this.applyDelta(s)},i.prototype.$splitAndapplyLargeDelta=function(s,f){for(var p=s.lines,d=p.length-f+1,c=s.start.row,_=s.start.column,m=0,v=0;m<d;m=v){v+=f-1;var y=p.slice(m,v);y.push(""),this.applyDelta({start:this.pos(c+m,_),end:this.pos(c+v,_=0),action:s.action,lines:y},!0)}s.lines=p.slice(m),s.start.row=c+m,s.start.column=_,this.applyDelta(s,!0)},i.prototype.revertDelta=function(s){this.$safeApplyDelta({start:this.clonePos(s.start),end:this.clonePos(s.end),action:s.action=="insert"?"remove":"insert",lines:s.lines.slice()})},i.prototype.indexToPosition=function(s,f){for(var p=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,c=f||0,_=p.length;c<_;c++)if(s-=p[c].length+d,s<0)return{row:c,column:s+p[c].length+d};return{row:_-1,column:s+p[_-1].length+d}},i.prototype.positionToIndex=function(s,f){for(var p=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,c=0,_=Math.min(s.row,p.length),m=f||0;m<_;++m)c+=p[m].length+d;return c+s.column},i.prototype.$split=function(s){return s.split(/\r\n|\r|\n/)},i}();u.prototype.$autoNewLine="",u.prototype.$newLineMode="auto",a.implement(u.prototype,o),t.Document=u});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./lib/event_emitter").EventEmitter,o=function(){function r(l,u){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=l;var i=this;this.$worker=function(){if(i.running){for(var s=new Date,f=i.currentLine,p=-1,d=i.doc,c=f;i.lines[f];)f++;var _=d.getLength(),m=0;for(i.running=!1;f<_;){i.$tokenizeRow(f),p=f;do f++;while(i.lines[f]);if(m++,m%5===0&&new Date-s>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=f,p==-1&&(p=f),c<=p&&i.fireUpdateEvent(c,p)}}}return r.prototype.setTokenizer=function(l){this.tokenizer=l,this.lines=[],this.states=[],this.start(0)},r.prototype.setDocument=function(l){this.doc=l,this.lines=[],this.states=[],this.stop()},r.prototype.fireUpdateEvent=function(l,u){var i={first:l,last:u};this._signal("update",{data:i})},r.prototype.start=function(l){this.currentLine=Math.min(l||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},r.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},r.prototype.$updateOnChange=function(l){var u=l.start.row,i=l.end.row-u;if(i===0)this.lines[u]=null;else if(l.action=="remove")this.lines.splice(u,i+1,null),this.states.splice(u,i+1,null);else{var s=Array(i+1);s.unshift(u,1),this.lines.splice.apply(this.lines,s),this.states.splice.apply(this.states,s)}this.currentLine=Math.min(u,this.currentLine,this.doc.getLength()),this.stop()},r.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},r.prototype.getTokens=function(l){return this.lines[l]||this.$tokenizeRow(l)},r.prototype.getState=function(l){return this.currentLine==l&&this.$tokenizeRow(l),this.states[l]||"start"},r.prototype.$tokenizeRow=function(l){var u=this.doc.getLine(l),i=this.states[l-1],s=this.tokenizer.getLineTokens(u,i,l);return this.states[l]+""!=s.state+""?(this.states[l]=s.state,this.lines[l+1]=null,this.currentLine>l+1&&(this.currentLine=l+1)):this.currentLine==l&&(this.currentLine=l+1),this.lines[l]=s.tokens},r.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},r}();a.implement(o.prototype,h),t.BackgroundTokenizer=o});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,n){"use strict";var a=e("./lib/lang"),h=e("./range").Range,o=function(){function r(l,u,i){i===void 0&&(i="text"),this.setRegexp(l),this.clazz=u,this.type=i}return r.prototype.setRegexp=function(l){this.regExp+""!=l+""&&(this.regExp=l,this.cache=[])},r.prototype.update=function(l,u,i,s){if(this.regExp)for(var f=s.firstRow,p=s.lastRow,d={},c=f;c<=p;c++){var _=this.cache[c];_==null&&(_=a.getMatchOffsets(i.getLine(c),this.regExp),_.length>this.MAX_RANGES&&(_=_.slice(0,this.MAX_RANGES)),_=_.map(function(C){return new h(c,C.offset,c,C.offset+C.length)}),this.cache[c]=_.length?_:"");for(var m=_.length;m--;){var v=_[m].toScreenRange(i),y=v.toString();d[y]||(d[y]=!0,u.drawSingleLineMarker(l,v,this.clazz,s))}}},r}();o.prototype.MAX_RANGES=500,t.SearchHighlight=o});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=function(){function D(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return D.prototype.addSession=function(g){this.$session=g},D.prototype.add=function(g,w,F){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),w===!1||!this.lastDeltas){this.lastDeltas=[];var b=this.$undoStack.length;b>this.$undoDepth-1&&this.$undoStack.splice(0,b-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},D.prototype.addSelection=function(g,w){this.selections.push({value:g,rev:w||this.$rev})},D.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},D.prototype.markIgnored=function(g,w){w==null&&(w=this.$rev+1);for(var F=this.$undoStack,b=F.length;b--;){var E=F[b][0];if(E.id<=g)break;E.id<w&&(E.ignore=!0)}this.lastDeltas=null},D.prototype.getSelection=function(g,w){for(var F=this.selections,b=F.length;b--;){var E=F[b];if(E.rev<g)return w&&(E=F[b+1]),E}},D.prototype.getRevision=function(){return this.$rev},D.prototype.getDeltas=function(g,w){w==null&&(w=this.$rev+1);for(var F=this.$undoStack,b=null,E=0,M=F.length;M--;){var S=F[M][0];if(S.id<w&&!b&&(b=M+1),S.id<=g){E=M+1;break}}return F.slice(E,b)},D.prototype.getChangedRanges=function(g,w){w==null&&(w=this.$rev+1)},D.prototype.getChangedLines=function(g,w){w==null&&(w=this.$rev+1)},D.prototype.undo=function(g,w){this.lastDeltas=null;var F=this.$undoStack;if(h(F,F.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var b=F.pop(),E=null;return b&&(E=g.undoChanges(b,w),this.$redoStack.push(b),this.$syncRev()),this.$fromUndo=!1,E}},D.prototype.redo=function(g,w){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var F=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);T(this.$redoStack,F),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(M){M[0].id=++this.$maxRev},this)}var b=this.$redoStack.pop(),E=null;return b&&(E=g.redoChanges(b,w),this.$undoStack.push(b),this.$syncRev()),this.$fromUndo=!1,E},D.prototype.$syncRev=function(){var g=this.$undoStack,w=g[g.length-1],F=w&&w[0].id||0;this.$redoStackBaseRev=F,this.$rev=F},D.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},D.prototype.canUndo=function(){return this.$undoStack.length>0},D.prototype.canRedo=function(){return this.$redoStack.length>0},D.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},D.prototype.isAtBookmark=function(){return this.$rev===this.mark},D.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},D.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},D.prototype.$prettyPrint=function(g){return g?f(g):f(this.$undoStack)+`
---
`+f(this.$redoStack)},D}();a.prototype.hasUndo=a.prototype.canUndo,a.prototype.hasRedo=a.prototype.canRedo,a.prototype.isClean=a.prototype.isAtBookmark,a.prototype.markClean=a.prototype.bookmark;function h(D,g){for(var w=g;w--;){var F=D[w];if(F&&!F[0].ignore){for(;w<g-1;){var b=c(D[w],D[w+1]);D[w]=b[0],D[w+1]=b[1],w++}return!0}}}var o=e("./range").Range,r=o.comparePoints,l=o.comparePoints;function u(D){var g=D.action=="insert",w=D.start,F=D.end,b=(F.row-w.row)*(g?1:-1),E=(F.column-w.column)*(g?1:-1);g&&(F=w);for(var M in this.marks){var S=this.marks[M],x=l(S,w);if(!(x<0)){if(x===0&&g)if(S.bias==1)x=1;else{S.bias==-1;continue}var L=g?x:l(S,F);if(L>0){S.row+=b,S.column+=S.row==F.row?E:0;continue}!g&&L<=0&&(S.row=w.row,S.column=w.column,L===0&&(S.bias=1))}}}function i(D){return{row:D.row,column:D.column}}function s(D){return{start:i(D.start),end:i(D.end),action:D.action,lines:D.lines.slice()}}function f(D){if(D=D||this,Array.isArray(D))return D.map(f).join(`
`);var g="";return D.action?(g=D.action=="insert"?"+":"-",g+="["+D.lines+"]"):D.value&&(Array.isArray(D.value)?g=D.value.map(p).join(`
`):g=p(D.value)),D.start&&(g+=p(D)),(D.id||D.rev)&&(g+="	("+(D.id||D.rev)+")"),g}function p(D){return D.start.row+":"+D.start.column+"=>"+D.end.row+":"+D.end.column}function d(D,g){var w=D.action=="insert",F=g.action=="insert";if(w&&F)if(r(g.start,D.end)>=0)m(g,D,-1);else if(r(g.start,D.start)<=0)m(D,g,1);else return null;else if(w&&!F)if(r(g.start,D.end)>=0)m(g,D,-1);else if(r(g.end,D.start)<=0)m(D,g,-1);else return null;else if(!w&&F)if(r(g.start,D.start)>=0)m(g,D,1);else if(r(g.start,D.start)<=0)m(D,g,1);else return null;else if(!w&&!F)if(r(g.start,D.start)>=0)m(g,D,1);else if(r(g.end,D.start)<=0)m(D,g,-1);else return null;return[g,D]}function c(D,g){for(var w=D.length;w--;)for(var F=0;F<g.length;F++)if(!d(D[w],g[F])){for(;w<D.length;){for(;F--;)d(g[F],D[w]);F=g.length,w++}return[D,g]}return D.selectionBefore=g.selectionBefore=D.selectionAfter=g.selectionAfter=null,[g,D]}function _(D,g){var w=D.action=="insert",F=g.action=="insert";if(w&&F)r(D.start,g.start)<0?m(g,D,1):m(D,g,1);else if(w&&!F)r(D.start,g.end)>=0?m(D,g,-1):(r(D.start,g.start)<=0||m(D,o.fromPoints(g.start,D.start),-1),m(g,D,1));else if(!w&&F)r(g.start,D.end)>=0?m(g,D,-1):(r(g.start,D.start)<=0||m(g,o.fromPoints(D.start,g.start),-1),m(D,g,1));else if(!w&&!F)if(r(g.start,D.end)>=0)m(g,D,-1);else if(r(g.end,D.start)<=0)m(D,g,-1);else{var b,E;return r(D.start,g.start)<0&&(b=D,D=y(D,g.start)),r(D.end,g.end)>0&&(E=y(D,g.end)),v(g.end,D.start,D.end,-1),E&&!b&&(D.lines=E.lines,D.start=E.start,D.end=E.end,E=D),[g,b,E].filter(Boolean)}return[g,D]}function m(D,g,w){v(D.start,g.start,g.end,w),v(D.end,g.start,g.end,w)}function v(D,g,w,F){D.row==(F==1?g:w).row&&(D.column+=F*(w.column-g.column)),D.row+=F*(w.row-g.row)}function y(D,g){var w=D.lines,F=D.end;D.end=i(g);var b=D.end.row-D.start.row,E=w.splice(b,w.length),M=b?g.column:g.column-D.start.column;w.push(E[0].substring(0,M)),E[0]=E[0].substr(M);var S={start:i(g),end:F,lines:E,action:D.action};return S}function C(D,g){g=s(g);for(var w=D.length;w--;){for(var F=D[w],b=0;b<F.length;b++){var E=F[b],M=_(E,g);g=M[0],M.length!=2&&(M[2]?(F.splice(b+1,1,M[1],M[2]),b++):M[1]||(F.splice(b,1),b--))}F.length||D.splice(w,1)}return D}function T(D,g){for(var w=0;w<g.length;w++)for(var F=g[w],b=0;b<F.length;b++)C(D,F[b])}t.UndoManager=a});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("../range").Range,h=function(){function o(r,l){this.foldData=r,Array.isArray(l)?this.folds=l:l=this.folds=[l];var u=l[l.length-1];this.range=new a(l[0].start.row,l[0].start.column,u.end.row,u.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(i){i.setFoldLine(this)},this)}return o.prototype.shiftRow=function(r){this.start.row+=r,this.end.row+=r,this.folds.forEach(function(l){l.start.row+=r,l.end.row+=r})},o.prototype.addFold=function(r){if(r.sameRow){if(r.start.row<this.startRow||r.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(r),this.folds.sort(function(l,u){return-l.range.compareEnd(u.start.row,u.start.column)}),this.range.compareEnd(r.start.row,r.start.column)>0?(this.end.row=r.end.row,this.end.column=r.end.column):this.range.compareStart(r.end.row,r.end.column)<0&&(this.start.row=r.start.row,this.start.column=r.start.column)}else if(r.start.row==this.end.row)this.folds.push(r),this.end.row=r.end.row,this.end.column=r.end.column;else if(r.end.row==this.start.row)this.folds.unshift(r),this.start.row=r.start.row,this.start.column=r.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");r.foldLine=this},o.prototype.containsRow=function(r){return r>=this.start.row&&r<=this.end.row},o.prototype.walk=function(r,l,u){var i=0,s=this.folds,f,p,d,c=!0;l==null&&(l=this.end.row,u=this.end.column);for(var _=0;_<s.length;_++){if(f=s[_],p=f.range.compareStart(l,u),p==-1){r(null,l,u,i,c);return}if(d=r(null,f.start.row,f.start.column,i,c),d=!d&&r(f.placeholder,f.start.row,f.start.column,i),d||p===0)return;c=!f.sameRow,i=f.end.column}r(null,l,u,i,c)},o.prototype.getNextFoldTo=function(r,l){for(var u,i,s=0;s<this.folds.length;s++){if(u=this.folds[s],i=u.range.compareEnd(r,l),i==-1)return{fold:u,kind:"after"};if(i===0)return{fold:u,kind:"inside"}}return null},o.prototype.addRemoveChars=function(r,l,u){var i=this.getNextFoldTo(r,l),s,f;if(i){if(s=i.fold,i.kind=="inside"&&s.start.column!=l&&s.start.row!=r)window.console&&window.console.log(r,l,s);else if(s.start.row==r){f=this.folds;var p=f.indexOf(s);for(p===0&&(this.start.column+=u),p;p<f.length;p++){if(s=f[p],s.start.column+=u,!s.sameRow)return;s.end.column+=u}this.end.column+=u}}},o.prototype.split=function(r,l){var u=this.getNextFoldTo(r,l);if(!u||u.kind=="inside")return null;var i=u.fold,s=this.folds,f=this.foldData,p=s.indexOf(i),d=s[p-1];this.end.row=d.end.row,this.end.column=d.end.column,s=s.splice(p,s.length-p);var c=new o(f,s);return f.splice(f.indexOf(this)+1,0,c),c},o.prototype.merge=function(r){for(var l=r.folds,u=0;u<l.length;u++)this.addFold(l[u]);var i=this.foldData;i.splice(i.indexOf(r),1)},o.prototype.toString=function(){var r=[this.range.toString()+": ["];return this.folds.forEach(function(l){r.push("  "+l.toString())}),r.push("]"),r.join(`
`)},o.prototype.idxToPosition=function(r){for(var l=0,u=0;u<this.folds.length;u++){var i=this.folds[u];if(r-=i.start.column-l,r<0)return{row:i.start.row,column:i.start.column+r};if(r-=i.placeholder.length,r<0)return i.start;l=i.end.column}return{row:this.end.row,column:this.end.column+r}},o}();t.FoldLine=h});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("./range").Range,h=a.comparePoints,o=function(){function r(){this.ranges=[],this.$bias=1}return r.prototype.pointIndex=function(l,u,i){for(var s=this.ranges,f=i||0;f<s.length;f++){var p=s[f],d=h(l,p.end);if(!(d>0)){var c=h(l,p.start);return d===0?u&&c!==0?-f-2:f:c>0||c===0&&!u?f:-f-1}}return-f-1},r.prototype.add=function(l){var u=!l.isEmpty(),i=this.pointIndex(l.start,u);i<0&&(i=-i-1);var s=this.pointIndex(l.end,u,i);return s<0?s=-s-1:s++,this.ranges.splice(i,s-i,l)},r.prototype.addList=function(l){for(var u=[],i=l.length;i--;)u.push.apply(u,this.add(l[i]));return u},r.prototype.substractPoint=function(l){var u=this.pointIndex(l);if(u>=0)return this.ranges.splice(u,1)},r.prototype.merge=function(){var l=[],u=this.ranges;u=u.sort(function(d,c){return h(d.start,c.start)});for(var i=u[0],s,f=1;f<u.length;f++){s=i,i=u[f];var p=h(s.end,i.start);p<0||p==0&&!s.isEmpty()&&!i.isEmpty()||(h(s.end,i.end)<0&&(s.end.row=i.end.row,s.end.column=i.end.column),u.splice(f,1),l.push(i),i=s,f--)}return this.ranges=u,l},r.prototype.contains=function(l,u){return this.pointIndex({row:l,column:u})>=0},r.prototype.containsPoint=function(l){return this.pointIndex(l)>=0},r.prototype.rangeAtPoint=function(l){var u=this.pointIndex(l);if(u>=0)return this.ranges[u]},r.prototype.clipRows=function(l,u){var i=this.ranges;if(i[0].start.row>u||i[i.length-1].start.row<l)return[];var s=this.pointIndex({row:l,column:0});s<0&&(s=-s-1);var f=this.pointIndex({row:u,column:0},s);f<0&&(f=-f-1);for(var p=[],d=s;d<f;d++)p.push(i[d]);return p},r.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},r.prototype.attach=function(l){this.session&&this.detach(),this.session=l,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},r.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},r.prototype.$onChange=function(l){for(var u=l.start,i=l.end,s=u.row,f=i.row,p=this.ranges,d=0,c=p.length;d<c;d++){var _=p[d];if(_.end.row>=s)break}if(l.action=="insert")for(var m=f-s,v=-u.column+i.column;d<c;d++){var _=p[d];if(_.start.row>s)break;if(_.start.row==s&&_.start.column>=u.column&&(_.start.column==u.column&&this.$bias<=0||(_.start.column+=v,_.start.row+=m)),_.end.row==s&&_.end.column>=u.column){if(_.end.column==u.column&&this.$bias<0)continue;_.end.column==u.column&&v>0&&d<c-1&&_.end.column>_.start.column&&_.end.column==p[d+1].start.column&&(_.end.column-=v),_.end.column+=v,_.end.row+=m}}else for(var m=s-f,v=u.column-i.column;d<c;d++){var _=p[d];if(_.start.row>f)break;_.end.row<f&&(s<_.end.row||s==_.end.row&&u.column<_.end.column)?(_.end.row=s,_.end.column=u.column):_.end.row==f?_.end.column<=i.column?(m||_.end.column>u.column)&&(_.end.column=u.column,_.end.row=u.row):(_.end.column+=v,_.end.row+=m):_.end.row>f&&(_.end.row+=m),_.start.row<f&&(s<_.start.row||s==_.start.row&&u.column<_.start.column)?(_.start.row=s,_.start.column=u.column):_.start.row==f?_.start.column<=i.column?(m||_.start.column>u.column)&&(_.start.column=u.column,_.start.row=u.row):(_.start.column+=v,_.start.row+=m):_.start.row>f&&(_.start.row+=m)}if(m!=0&&d<c)for(;d<c;d++){var _=p[d];_.start.row+=m,_.end.row+=m}},r}();o.prototype.comparePoints=h,t.RangeList=o});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var s=function(f,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(d[_]=c[_])},s(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");s(f,p);function d(){this.constructor=f}f.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),h=e("../range_list").RangeList,o=function(s){a(f,s);function f(p,d){var c=s.call(this)||this;return c.foldLine=null,c.placeholder=d,c.range=p,c.start=p.start,c.end=p.end,c.sameRow=p.start.row==p.end.row,c.subFolds=c.ranges=[],c}return f.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},f.prototype.setFoldLine=function(p){this.foldLine=p,this.subFolds.forEach(function(d){d.setFoldLine(p)})},f.prototype.clone=function(){var p=this.range.clone(),d=new f(p,this.placeholder);return this.subFolds.forEach(function(c){d.subFolds.push(c.clone())}),d.collapseChildren=this.collapseChildren,d},f.prototype.addSubFold=function(p){if(!this.range.isEqual(p)){l(p,this.start);for(var v=p.start.row,y=p.start.column,d=0,c=-1;d<this.subFolds.length&&(c=this.subFolds[d].range.compare(v,y),c==1);d++);var _=this.subFolds[d],m=0;if(c==0){if(_.range.containsRange(p))return _.addSubFold(p);m=1}for(var v=p.range.end.row,y=p.range.end.column,C=d,c=-1;C<this.subFolds.length&&(c=this.subFolds[C].range.compare(v,y),c==1);C++);c==0&&C++;for(var T=this.subFolds.splice(d,C-d,p),D=c==0?T.length-1:T.length,g=m;g<D;g++)p.addSubFold(T[g]);return p.setFoldLine(this.foldLine),p}},f.prototype.restoreRange=function(p){return i(p,this.start)},f}(h);function r(s,f){s.row-=f.row,s.row==0&&(s.column-=f.column)}function l(s,f){r(s.start,f),r(s.end,f)}function u(s,f){s.row==0&&(s.column+=f.column),s.row+=f.row}function i(s,f){u(s.start,f),u(s.end,f)}t.Fold=o});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,n){"use strict";var a=e("../range").Range,h=e("./fold_line").FoldLine,o=e("./fold").Fold,r=e("../token_iterator").TokenIterator,l=e("../mouse/mouse_event").MouseEvent;function u(){this.getFoldAt=function(i,s,f){var p=this.getFoldLine(i);if(!p)return null;for(var d=p.folds,c=0;c<d.length;c++){var _=d[c].range;if(_.contains(i,s)){if(f==1&&_.isEnd(i,s)&&!_.isEmpty())continue;if(f==-1&&_.isStart(i,s)&&!_.isEmpty())continue;return d[c]}}},this.getFoldsInRange=function(i){var s=i.start,f=i.end,p=this.$foldData,d=[];s.column+=1,f.column-=1;for(var c=0;c<p.length;c++){var _=p[c].range.compareRange(i);if(_!=2){if(_==-2)break;for(var m=p[c].folds,v=0;v<m.length;v++){var y=m[v];if(_=y.range.compareRange(i),_==-2)break;if(_==2)continue;if(_==42)break;d.push(y)}}}return s.column-=1,f.column+=1,d},this.getFoldsInRangeList=function(i){if(Array.isArray(i)){var s=[];i.forEach(function(f){s=s.concat(this.getFoldsInRange(f))},this)}else var s=this.getFoldsInRange(i);return s},this.getAllFolds=function(){for(var i=[],s=this.$foldData,f=0;f<s.length;f++)for(var p=0;p<s[f].folds.length;p++)i.push(s[f].folds[p]);return i},this.getFoldStringAt=function(i,s,f,p){if(p=p||this.getFoldLine(i),!p)return null;for(var d={end:{column:0}},c,_,m=0;m<p.folds.length;m++){_=p.folds[m];var v=_.range.compareEnd(i,s);if(v==-1){c=this.getLine(_.start.row).substring(d.end.column,_.start.column);break}else if(v===0)return null;d=_}return c||(c=this.getLine(_.start.row).substring(d.end.column)),f==-1?c.substring(0,s-d.end.column):f==1?c.substring(s-d.end.column):c},this.getFoldLine=function(i,s){var f=this.$foldData,p=0;for(s&&(p=f.indexOf(s)),p==-1&&(p=0),p;p<f.length;p++){var d=f[p];if(d.start.row<=i&&d.end.row>=i)return d;if(d.end.row>i)return null}return null},this.getNextFoldLine=function(i,s){var f=this.$foldData,p=0;for(s&&(p=f.indexOf(s)),p==-1&&(p=0),p;p<f.length;p++){var d=f[p];if(d.end.row>=i)return d}return null},this.getFoldedRowCount=function(i,s){for(var f=this.$foldData,p=s-i+1,d=0;d<f.length;d++){var c=f[d],_=c.end.row,m=c.start.row;if(_>=s){m<s&&(m>=i?p-=s-m:p=0);break}else _>=i&&(m>=i?p-=_-m:p-=_-i+1)}return p},this.$addFoldLine=function(i){return this.$foldData.push(i),this.$foldData.sort(function(s,f){return s.start.row-f.start.row}),i},this.addFold=function(i,s){var f=this.$foldData,p=!1,d;i instanceof o?d=i:(d=new o(s,i),d.collapseChildren=s.collapseChildren),this.$clipRangeToDocument(d.range);var c=d.start.row,_=d.start.column,m=d.end.row,v=d.end.column,y=this.getFoldAt(c,_,1),C=this.getFoldAt(m,v,-1);if(y&&C==y)return y.addSubFold(d);y&&!y.range.isStart(c,_)&&this.removeFold(y),C&&!C.range.isEnd(m,v)&&this.removeFold(C);var T=this.getFoldsInRange(d.range);T.length>0&&(this.removeFolds(T),d.collapseChildren||T.forEach(function(F){d.addSubFold(F)}));for(var D=0;D<f.length;D++){var g=f[D];if(m==g.start.row){g.addFold(d),p=!0;break}else if(c==g.end.row){if(g.addFold(d),p=!0,!d.sameRow){var w=f[D+1];if(w&&w.start.row==m){g.merge(w);break}}break}else if(m<=g.start.row)break}return p||(g=this.$addFoldLine(new h(this.$foldData,d))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:d,action:"add"}),d},this.addFolds=function(i){i.forEach(function(s){this.addFold(s)},this)},this.removeFold=function(i){var s=i.foldLine,f=s.start.row,p=s.end.row,d=this.$foldData,c=s.folds;if(c.length==1)d.splice(d.indexOf(s),1);else if(s.range.isEnd(i.end.row,i.end.column))c.pop(),s.end.row=c[c.length-1].end.row,s.end.column=c[c.length-1].end.column;else if(s.range.isStart(i.start.row,i.start.column))c.shift(),s.start.row=c[0].start.row,s.start.column=c[0].start.column;else if(i.sameRow)c.splice(c.indexOf(i),1);else{var _=s.split(i.start.row,i.start.column);c=_.folds,c.shift(),_.start.row=c[0].start.row,_.start.column=c[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(f,p):this.$updateRowLengthCache(f,p)),this.$modified=!0,this._signal("changeFold",{data:i,action:"remove"})},this.removeFolds=function(i){for(var s=[],f=0;f<i.length;f++)s.push(i[f]);s.forEach(function(p){this.removeFold(p)},this),this.$modified=!0},this.expandFold=function(i){this.removeFold(i),i.subFolds.forEach(function(s){i.restoreRange(s),this.addFold(s)},this),i.collapseChildren>0&&this.foldAll(i.start.row+1,i.end.row,i.collapseChildren-1),i.subFolds=[]},this.expandFolds=function(i){i.forEach(function(s){this.expandFold(s)},this)},this.unfold=function(i,s){var f,p;if(i==null)f=new a(0,0,this.getLength(),0),s==null&&(s=!0);else if(typeof i=="number")f=new a(i,0,i,this.getLine(i).length);else if("row"in i)f=a.fromPoints(i,i);else{if(Array.isArray(i))return p=[],i.forEach(function(c){p=p.concat(this.unfold(c))},this),p;f=i}p=this.getFoldsInRangeList(f);for(var d=p;p.length==1&&a.comparePoints(p[0].start,f.start)<0&&a.comparePoints(p[0].end,f.end)>0;)this.expandFolds(p),p=this.getFoldsInRangeList(f);if(s!=!1?this.removeFolds(p):this.expandFolds(p),d.length)return d},this.isRowFolded=function(i,s){return!!this.getFoldLine(i,s)},this.getRowFoldEnd=function(i,s){var f=this.getFoldLine(i,s);return f?f.end.row:i},this.getRowFoldStart=function(i,s){var f=this.getFoldLine(i,s);return f?f.start.row:i},this.getFoldDisplayLine=function(i,s,f,p,d){p==null&&(p=i.start.row),d==null&&(d=0),s==null&&(s=i.end.row),f==null&&(f=this.getLine(s).length);var c=this.doc,_="";return i.walk(function(m,v,y,C){if(!(v<p)){if(v==p){if(y<d)return;C=Math.max(d,C)}m!=null?_+=m:_+=c.getLine(v).substring(C,y)}},s,f),_},this.getDisplayLine=function(i,s,f,p){var d=this.getFoldLine(i);if(d)return this.getFoldDisplayLine(d,i,s,f,p);var c;return c=this.doc.getLine(i),c.substring(p||0,s||c.length)},this.$cloneFoldData=function(){var i=[];return i=this.$foldData.map(function(s){var f=s.folds.map(function(p){return p.clone()});return new h(i,f)}),i},this.toggleFold=function(i){var s=this.selection,f=s.getRange(),p,d;if(f.isEmpty()){var c=f.start;if(p=this.getFoldAt(c.row,c.column),p){this.expandFold(p);return}else(d=this.findMatchingBracket(c))?f.comparePoint(d)==1?f.end=d:(f.start=d,f.start.column++,f.end.column--):(d=this.findMatchingBracket({row:c.row,column:c.column+1}))?(f.comparePoint(d)==1?f.end=d:f.start=d,f.start.column++):f=this.getCommentFoldRange(c.row,c.column)||f}else{var _=this.getFoldsInRange(f);if(i&&_.length){this.expandFolds(_);return}else _.length==1&&(p=_[0])}if(p||(p=this.getFoldAt(f.start.row,f.start.column)),p&&p.range.toString()==f.toString()){this.expandFold(p);return}var m="...";if(!f.isMultiLine()){if(m=this.getTextRange(f),m.length<4)return;m=m.trim().substring(0,2)+".."}this.addFold(m,f)},this.getCommentFoldRange=function(i,s,f){var p=new r(this,i,s),d=p.getCurrentToken(),c=d&&d.type;if(d&&/^comment|string/.test(c)){c=c.match(/comment|string/)[0],c=="comment"&&(c+="|doc-start|\\.doc");var _=new RegExp(c),m=new a;if(f!=1){do d=p.stepBackward();while(d&&_.test(d.type)&&!/^comment.end/.test(d.type));d=p.stepForward()}if(m.start.row=p.getCurrentTokenRow(),m.start.column=p.getCurrentTokenColumn()+(/^comment.start/.test(d.type)?d.value.length:2),p=new r(this,i,s),f!=-1){var v=-1;do if(d=p.stepForward(),v==-1){var y=this.getState(p.$row);_.test(y)||(v=p.$row)}else if(p.$row>v)break;while(d&&_.test(d.type)&&!/^comment.start/.test(d.type));d=p.stepBackward()}else d=p.getCurrentToken();return m.end.row=p.getCurrentTokenRow(),m.end.column=p.getCurrentTokenColumn(),/^comment.end/.test(d.type)||(m.end.column+=d.value.length-2),m}},this.foldAll=function(i,s,f,p){f==null&&(f=1e5);var d=this.foldWidgets;if(d){s=s||this.getLength(),i=i||0;for(var c=i;c<s;c++)if(d[c]==null&&(d[c]=this.getFoldWidget(c)),d[c]=="start"&&!(p&&!p(c))){var _=this.getFoldWidgetRange(c);_&&_.isMultiLine()&&_.end.row<=s&&_.start.row>=i&&(c=_.end.row,_.collapseChildren=f,this.addFold("...",_))}}},this.foldToLevel=function(i){for(this.foldAll();i-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var i=this;this.foldAll(null,null,null,function(s){for(var f=i.getTokens(s),p=0;p<f.length;p++){var d=f[p];if(!(d.type=="text"&&/^\s+$/.test(d.value)))return!!/comment/.test(d.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(i){if(!this.$foldStyles[i])throw new Error("invalid fold style: "+i+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=i){this.$foldStyle=i,i=="manual"&&this.unfold();var s=this.$foldMode;this.$setFolding(null),this.$setFolding(s)}},this.$setFolding=function(i){if(this.$foldMode!=i){if(this.$foldMode=i,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!i||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=i.getFoldWidget.bind(i,this,this.$foldStyle),this.getFoldWidgetRange=i.getFoldWidgetRange.bind(i,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(i,s){var f=this.foldWidgets;if(!f||s&&f[i])return{};for(var p=i-1,d;p>=0;){var c=f[p];if(c==null&&(c=f[p]=this.getFoldWidget(p)),c=="start"){var _=this.getFoldWidgetRange(p);if(d||(d=_),_&&_.end.row>=i)break}p--}return{range:p!==-1&&_,firstRange:d}},this.onFoldWidgetClick=function(i,s){s instanceof l&&(s=s.domEvent);var f={children:s.shiftKey,all:s.ctrlKey||s.metaKey,siblings:s.altKey},p=this.$toggleFoldWidget(i,f);if(!p){var d=s.target||s.srcElement;d&&/ace_fold-widget/.test(d.className)&&(d.className+=" ace_invalid")}},this.$toggleFoldWidget=function(i,s){if(this.getFoldWidget){var f=this.getFoldWidget(i),p=this.getLine(i),d=f==="end"?-1:1,c=this.getFoldAt(i,d===-1?0:p.length,d);if(c)return s.children||s.all?this.removeFold(c):this.expandFold(c),c;var _=this.getFoldWidgetRange(i,!0);if(_&&!_.isMultiLine()&&(c=this.getFoldAt(_.start.row,_.start.column,1),c&&_.isEqual(c.range)))return this.removeFold(c),c;if(s.siblings){var m=this.getParentFoldRangeData(i);if(m.range)var v=m.range.start.row+1,y=m.range.end.row;this.foldAll(v,y,s.all?1e4:0)}else s.children?(y=_?_.end.row:this.getLength(),this.foldAll(i+1,y,s.all?1e4:0)):_&&(s.all&&(_.collapseChildren=1e4),this.addFold("...",_));return _}},this.toggleFoldWidget=function(i){var s=this.selection.getCursor().row;s=this.getRowFoldStart(s);var f=this.$toggleFoldWidget(s,{});if(!f){var p=this.getParentFoldRangeData(s,!0);if(f=p.range||p.firstRange,f){s=f.start.row;var d=this.getFoldAt(s,this.getLine(s).length,1);d?this.removeFold(d):this.addFold("...",f)}}},this.updateFoldWidgets=function(i){var s=i.start.row,f=i.end.row-s;if(f===0)this.foldWidgets[s]=null;else if(i.action=="remove")this.foldWidgets.splice(s,f+1,null);else{var p=Array(f+1);p.unshift(s,1),this.foldWidgets.splice.apply(this.foldWidgets,p)}},this.tokenizerUpdateFoldWidgets=function(i){var s=i.data;s.first!=s.last&&this.foldWidgets.length>s.first&&this.foldWidgets.splice(s.first,this.foldWidgets.length)}}t.Folding=u});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var a=e("../token_iterator").TokenIterator,h=e("../range").Range;function o(){this.findMatchingBracket=function(r,l){if(r.column==0)return null;var u=l||this.getLine(r.row).charAt(r.column-1);if(u=="")return null;var i=u.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],r):this.$findOpeningBracket(i[2],r):null},this.getBracketRange=function(r){var l=this.getLine(r.row),u=!0,i,s=l.charAt(r.column-1),f=s&&s.match(/([\(\[\{])|([\)\]\}])/);if(f||(s=l.charAt(r.column),r={row:r.row,column:r.column+1},f=s&&s.match(/([\(\[\{])|([\)\]\}])/),u=!1),!f)return null;if(f[1]){var p=this.$findClosingBracket(f[1],r);if(!p)return null;i=h.fromPoints(r,p),u||(i.end.column++,i.start.column--),i.cursor=i.end}else{var p=this.$findOpeningBracket(f[2],r);if(!p)return null;i=h.fromPoints(p,r),u||(i.start.column++,i.end.column--),i.cursor=i.start}return i},this.getMatchingBracketRanges=function(r,l){var u=this.getLine(r.row),i=/([\(\[\{])|([\)\]\}])/,s=!l&&u.charAt(r.column-1),f=s&&s.match(i);if(f||(s=(l===void 0||l)&&u.charAt(r.column),r={row:r.row,column:r.column+1},f=s&&s.match(i)),!f)return null;var p=new h(r.row,r.column-1,r.row,r.column),d=f[1]?this.$findClosingBracket(f[1],r):this.$findOpeningBracket(f[2],r);if(!d)return[p];var c=new h(d.row,d.column,d.row,d.column+1);return[p,c]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(r,l,u){var i=this.$brackets[r],s=1,f=new a(this,l.row,l.column),p=f.getCurrentToken();if(p||(p=f.stepForward()),!!p){u||(u=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var d=l.column-f.getCurrentTokenColumn()-2,c=p.value;;){for(;d>=0;){var _=c.charAt(d);if(_==i){if(s-=1,s==0)return{row:f.getCurrentTokenRow(),column:d+f.getCurrentTokenColumn()}}else _==r&&(s+=1);d-=1}do p=f.stepBackward();while(p&&!u.test(p.type));if(p==null)break;c=p.value,d=c.length-1}return null}},this.$findClosingBracket=function(r,l,u){var i=this.$brackets[r],s=1,f=new a(this,l.row,l.column),p=f.getCurrentToken();if(p||(p=f.stepForward()),!!p){u||(u=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var d=l.column-f.getCurrentTokenColumn();;){for(var c=p.value,_=c.length;d<_;){var m=c.charAt(d);if(m==i){if(s-=1,s==0)return{row:f.getCurrentTokenRow(),column:d+f.getCurrentTokenColumn()}}else m==r&&(s+=1);d+=1}do p=f.stepForward();while(p&&!u.test(p.type));if(p==null)break;d=0}return null}},this.getMatchingTags=function(r){var l=new a(this,r.row,r.column),u=this.$findTagName(l);if(u){var i=l.stepBackward();return i.value==="<"?this.$findClosingTag(l,u):this.$findOpeningTag(l,u)}},this.$findTagName=function(r){var l=r.getCurrentToken(),u=!1,i=!1;if(l&&l.type.indexOf("tag-name")===-1)do i?l=r.stepBackward():l=r.stepForward(),l&&(l.value==="/>"?i=!0:l.type.indexOf("tag-name")!==-1&&(u=!0));while(l&&!u);return l},this.$findClosingTag=function(r,l){var u,i=l.value,s=l.value,f=0,p=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);l=r.stepForward();var d=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l.value.length),c=!1;do if(u=l,l=r.stepForward(),l){if(l.value===">"&&!c){var _=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);c=!0}if(l.type.indexOf("tag-name")!==-1){if(i=l.value,s===i){if(u.value==="<")f++;else if(u.value==="</"&&(f--,f<0)){r.stepBackward();var m=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+2);l=r.stepForward();var v=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l.value.length);if(l=r.stepForward(),l&&l.value===">")var y=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);else return}}}else if(s===i&&l.value==="/>"&&(f--,f<0))var m=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+2),v=m,y=v,_=new h(d.end.row,d.end.column,d.end.row,d.end.column+1)}while(l&&f>=0);if(p&&_&&m&&y&&d&&v)return{openTag:new h(p.start.row,p.start.column,_.end.row,_.end.column),closeTag:new h(m.start.row,m.start.column,y.end.row,y.end.column),openTagName:d,closeTagName:v}},this.$findOpeningTag=function(r,l){var u=r.getCurrentToken(),i=l.value,s=0,f=r.getCurrentTokenRow(),p=r.getCurrentTokenColumn(),d=p+2,c=new h(f,p,f,d);r.stepForward();var _=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l.value.length);if(l=r.stepForward(),!(!l||l.value!==">")){var m=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);r.stepBackward(),r.stepBackward();do if(l=u,f=r.getCurrentTokenRow(),p=r.getCurrentTokenColumn(),d=p+l.value.length,u=r.stepBackward(),l){if(l.type.indexOf("tag-name")!==-1){if(i===l.value)if(u.value==="<"){if(s++,s>0){var v=new h(f,p,f,d),y=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);do l=r.stepForward();while(l&&l.value!==">");var C=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1)}}else u.value==="</"&&s--}else if(l.value==="/>"){for(var T=0,D=u;D;){if(D.type.indexOf("tag-name")!==-1&&D.value===i){s--;break}else if(D.value==="<")break;D=r.stepBackward(),T++}for(var g=0;g<T;g++)r.stepForward()}}while(u&&s<=0);if(y&&C&&c&&m&&v&&_)return{openTag:new h(y.start.row,y.start.column,C.end.row,C.end.column),closeTag:new h(c.start.row,c.start.column,m.end.row,m.end.column),openTagName:v,closeTagName:_}}}}t.BracketMatch=o});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./lib/lang"),o=e("./bidihandler").BidiHandler,r=e("./config"),l=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,i=e("./mode/text").Mode,s=e("./range").Range,f=e("./document").Document,p=e("./background_tokenizer").BackgroundTokenizer,d=e("./search_highlight").SearchHighlight,c=e("./undomanager").UndoManager,_=function(){function b(E,M){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++b.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new p(new i().getTokenizer(),this);var S=this;this.bgTokenizer.on("update",function(x){S._signal("tokenizerUpdate",x)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof E!="object"||!E.getLine)&&(E=new f(E)),this.setDocument(E),this.selection=new u(this),this.$bidiHandler=new o(this),r.resetOptions(this),this.setMode(M),r._signal("session",this),this.destroyed=!1}return b.prototype.setDocument=function(E){this.doc&&this.doc.off("change",this.$onChange),this.doc=E,E.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},b.prototype.getDocument=function(){return this.doc},b.prototype.$resetRowCache=function(E){if(!E){this.$docRowCache=[],this.$screenRowCache=[];return}var M=this.$docRowCache.length,S=this.$getRowCacheIndex(this.$docRowCache,E)+1;M>S&&(this.$docRowCache.splice(S,M),this.$screenRowCache.splice(S,M))},b.prototype.$getRowCacheIndex=function(E,M){for(var S=0,x=E.length-1;S<=x;){var L=S+x>>1,R=E[L];if(M>R)S=L+1;else if(M<R)x=L-1;else return L}return S-1},b.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},b.prototype.onChangeFold=function(E){var M=E.data;this.$resetRowCache(M.start.row)},b.prototype.onChange=function(E){this.$modified=!0,this.$bidiHandler.onChange(E),this.$resetRowCache(E.start.row);var M=this.$updateInternalDataOnChange(E);!this.$fromUndo&&this.$undoManager&&(M&&M.length&&(this.$undoManager.add({action:"removeFolds",folds:M},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(E,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(E),this._signal("change",E)},b.prototype.setValue=function(E){this.doc.setValue(E),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},b.fromJSON=function(E){typeof E=="string"&&(E=JSON.parse(E));var M=new c;M.$undoStack=E.history.undo,M.$redoStack=E.history.redo,M.mark=E.history.mark,M.$rev=E.history.rev;var S=new b(E.value);return E.folds.forEach(function(x){S.addFold("...",s.fromPoints(x.start,x.end))}),S.setAnnotations(E.annotations),S.setBreakpoints(E.breakpoints),S.setMode(E.mode),S.setScrollLeft(E.scrollLeft),S.setScrollTop(E.scrollTop),S.setUndoManager(M),S.selection.fromJSON(E.selection),S},b.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(E){return E.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},b.prototype.toString=function(){return this.doc.getValue()},b.prototype.getSelection=function(){return this.selection},b.prototype.getState=function(E){return this.bgTokenizer.getState(E)},b.prototype.getTokens=function(E){return this.bgTokenizer.getTokens(E)},b.prototype.getTokenAt=function(E,M){var S=this.bgTokenizer.getTokens(E),x,L=0;if(M==null){var R=S.length-1;L=this.getLine(E).length}else for(var R=0;R<S.length&&(L+=S[R].value.length,!(L>=M));R++);return x=S[R],x?(x.index=R,x.start=L-x.value.length,x):null},b.prototype.setUndoManager=function(E){if(this.$undoManager=E,this.$informUndoManager&&this.$informUndoManager.cancel(),E){var M=this;E.addSession(this),this.$syncInformUndoManager=function(){M.$informUndoManager.cancel(),M.mergeUndoDeltas=!1},this.$informUndoManager=h.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},b.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},b.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},b.prototype.getTabString=function(){return this.getUseSoftTabs()?h.stringRepeat(" ",this.getTabSize()):"	"},b.prototype.setUseSoftTabs=function(E){this.setOption("useSoftTabs",E)},b.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},b.prototype.setTabSize=function(E){this.setOption("tabSize",E)},b.prototype.getTabSize=function(){return this.$tabSize},b.prototype.isTabStop=function(E){return this.$useSoftTabs&&E.column%this.$tabSize===0},b.prototype.setNavigateWithinSoftTabs=function(E){this.setOption("navigateWithinSoftTabs",E)},b.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},b.prototype.setOverwrite=function(E){this.setOption("overwrite",E)},b.prototype.getOverwrite=function(){return this.$overwrite},b.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},b.prototype.addGutterDecoration=function(E,M){this.$decorations[E]||(this.$decorations[E]=""),this.$decorations[E]+=" "+M,this._signal("changeBreakpoint",{})},b.prototype.removeGutterDecoration=function(E,M){this.$decorations[E]=(this.$decorations[E]||"").replace(" "+M,""),this._signal("changeBreakpoint",{})},b.prototype.getBreakpoints=function(){return this.$breakpoints},b.prototype.setBreakpoints=function(E){this.$breakpoints=[];for(var M=0;M<E.length;M++)this.$breakpoints[E[M]]="ace_breakpoint";this._signal("changeBreakpoint",{})},b.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},b.prototype.setBreakpoint=function(E,M){M===void 0&&(M="ace_breakpoint"),M?this.$breakpoints[E]=M:delete this.$breakpoints[E],this._signal("changeBreakpoint",{})},b.prototype.clearBreakpoint=function(E){delete this.$breakpoints[E],this._signal("changeBreakpoint",{})},b.prototype.addMarker=function(E,M,S,x){var L=this.$markerId++,R={range:E,type:S||"line",renderer:typeof S=="function"?S:null,clazz:M,inFront:!!x,id:L};return x?(this.$frontMarkers[L]=R,this._signal("changeFrontMarker")):(this.$backMarkers[L]=R,this._signal("changeBackMarker")),L},b.prototype.addDynamicMarker=function(E,M){if(E.update){var S=this.$markerId++;return E.id=S,E.inFront=!!M,M?(this.$frontMarkers[S]=E,this._signal("changeFrontMarker")):(this.$backMarkers[S]=E,this._signal("changeBackMarker")),E}},b.prototype.removeMarker=function(E){var M=this.$frontMarkers[E]||this.$backMarkers[E];if(M){var S=M.inFront?this.$frontMarkers:this.$backMarkers;delete S[E],this._signal(M.inFront?"changeFrontMarker":"changeBackMarker")}},b.prototype.getMarkers=function(E){return E?this.$frontMarkers:this.$backMarkers},b.prototype.highlight=function(E){if(!this.$searchHighlight){var M=new d(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(M)}this.$searchHighlight.setRegexp(E)},b.prototype.highlightLines=function(E,M,S,x){typeof M!="number"&&(S=M,M=E),S||(S="ace_step");var L=new s(E,0,M,1/0);return L.id=this.addMarker(L,S,"fullLine",x),L},b.prototype.setAnnotations=function(E){this.$annotations=E,this._signal("changeAnnotation",{})},b.prototype.getAnnotations=function(){return this.$annotations||[]},b.prototype.clearAnnotations=function(){this.setAnnotations([])},b.prototype.$detectNewLine=function(E){var M=E.match(/^.*?(\r?\n)/m);M?this.$autoNewLine=M[1]:this.$autoNewLine=`
`},b.prototype.getWordRange=function(E,M){var S=this.getLine(E),x=!1;if(M>0&&(x=!!S.charAt(M-1).match(this.tokenRe)),x||(x=!!S.charAt(M).match(this.tokenRe)),x)var L=this.tokenRe;else if(/^\s+$/.test(S.slice(M-1,M+1)))var L=/\s/;else var L=this.nonTokenRe;var R=M;if(R>0){do R--;while(R>=0&&S.charAt(R).match(L));R++}for(var A=M;A<S.length&&S.charAt(A).match(L);)A++;return new s(E,R,E,A)},b.prototype.getAWordRange=function(E,M){for(var S=this.getWordRange(E,M),x=this.getLine(S.end.row);x.charAt(S.end.column).match(/[ \t]/);)S.end.column+=1;return S},b.prototype.setNewLineMode=function(E){this.doc.setNewLineMode(E)},b.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},b.prototype.setUseWorker=function(E){this.setOption("useWorker",E)},b.prototype.getUseWorker=function(){return this.$useWorker},b.prototype.onReloadTokenizer=function(E){var M=E.data;this.bgTokenizer.start(M.first),this._signal("tokenizerUpdate",E)},b.prototype.setMode=function(E,M){if(E&&typeof E=="object"){if(E.getTokenizer)return this.$onChangeMode(E);var S=E,x=S.path}else x=E||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[x]&&!S){this.$onChangeMode(this.$modes[x]),M&&M();return}this.$modeId=x,r.loadModule(["mode",x],function(L){if(this.$modeId!==x)return M&&M();this.$modes[x]&&!S?this.$onChangeMode(this.$modes[x]):L&&L.Mode&&(L=new L.Mode(S),S||(this.$modes[x]=L,L.$id=x),this.$onChangeMode(L)),M&&M()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},b.prototype.$onChangeMode=function(E,M){if(M||(this.$modeId=E.$id),this.$mode!==E){var S=this.$mode;this.$mode=E,this.$stopWorker(),this.$useWorker&&this.$startWorker();var x=E.getTokenizer();if(x.on!==void 0){var L=this.onReloadTokenizer.bind(this);x.on("update",L)}this.bgTokenizer.setTokenizer(x),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=E.tokenRe,this.nonTokenRe=E.nonTokenRe,M||(E.attachToSession&&E.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(E.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:S,mode:E}))}},b.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},b.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(E){r.warn("Could not load worker",E),this.$worker=null}},b.prototype.getMode=function(){return this.$mode},b.prototype.setScrollTop=function(E){this.$scrollTop===E||isNaN(E)||(this.$scrollTop=E,this._signal("changeScrollTop",E))},b.prototype.getScrollTop=function(){return this.$scrollTop},b.prototype.setScrollLeft=function(E){this.$scrollLeft===E||isNaN(E)||(this.$scrollLeft=E,this._signal("changeScrollLeft",E))},b.prototype.getScrollLeft=function(){return this.$scrollLeft},b.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},b.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var E=0;return this.lineWidgets.forEach(function(M){M&&M.screenWidth>E&&(E=M.screenWidth)}),this.lineWidgetWidth=E},b.prototype.$computeWidth=function(E){if(this.$modified||E){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var M=this.doc.getAllLines(),S=this.$rowLengthCache,x=0,L=0,R=this.$foldData[L],A=R?R.start.row:1/0,I=M.length,$=0;$<I;$++){if($>A){if($=R.end.row+1,$>=I)break;R=this.$foldData[L++],A=R?R.start.row:1/0}S[$]==null&&(S[$]=this.$getStringScreenWidth(M[$])[0]),S[$]>x&&(x=S[$])}this.screenWidth=x}},b.prototype.getLine=function(E){return this.doc.getLine(E)},b.prototype.getLines=function(E,M){return this.doc.getLines(E,M)},b.prototype.getLength=function(){return this.doc.getLength()},b.prototype.getTextRange=function(E){return this.doc.getTextRange(E||this.selection.getRange())},b.prototype.insert=function(E,M){return this.doc.insert(E,M)},b.prototype.remove=function(E){return this.doc.remove(E)},b.prototype.removeFullLines=function(E,M){return this.doc.removeFullLines(E,M)},b.prototype.undoChanges=function(E,M){if(E.length){this.$fromUndo=!0;for(var S=E.length-1;S!=-1;S--){var x=E[S];x.action=="insert"||x.action=="remove"?this.doc.revertDelta(x):x.folds&&this.addFolds(x.folds)}!M&&this.$undoSelect&&(E.selectionBefore?this.selection.fromJSON(E.selectionBefore):this.selection.setRange(this.$getUndoSelection(E,!0))),this.$fromUndo=!1}},b.prototype.redoChanges=function(E,M){if(E.length){this.$fromUndo=!0;for(var S=0;S<E.length;S++){var x=E[S];(x.action=="insert"||x.action=="remove")&&this.doc.$safeApplyDelta(x)}!M&&this.$undoSelect&&(E.selectionAfter?this.selection.fromJSON(E.selectionAfter):this.selection.setRange(this.$getUndoSelection(E,!1))),this.$fromUndo=!1}},b.prototype.setUndoSelect=function(E){this.$undoSelect=E},b.prototype.$getUndoSelection=function(E,M){function S(I){return M?I.action!=="insert":I.action==="insert"}for(var x,L,R=0;R<E.length;R++){var A=E[R];if(A.start){if(!x){S(A)?x=s.fromPoints(A.start,A.end):x=s.fromPoints(A.start,A.start);continue}S(A)?(L=A.start,x.compare(L.row,L.column)==-1&&x.setStart(L),L=A.end,x.compare(L.row,L.column)==1&&x.setEnd(L)):(L=A.start,x.compare(L.row,L.column)==-1&&(x=s.fromPoints(A.start,A.start)))}}return x},b.prototype.replace=function(E,M){return this.doc.replace(E,M)},b.prototype.moveText=function(E,M,S){var x=this.getTextRange(E),L=this.getFoldsInRange(E),R=s.fromPoints(M,M);if(!S){this.remove(E);var A=E.start.row-E.end.row,I=A?-E.end.column:E.start.column-E.end.column;I&&(R.start.row==E.end.row&&R.start.column>E.end.column&&(R.start.column+=I),R.end.row==E.end.row&&R.end.column>E.end.column&&(R.end.column+=I)),A&&R.start.row>=E.end.row&&(R.start.row+=A,R.end.row+=A)}if(R.end=this.insert(R.start,x),L.length){var $=E.start,H=R.start,A=H.row-$.row,I=H.column-$.column;this.addFolds(L.map(function(G){return G=G.clone(),G.start.row==$.row&&(G.start.column+=I),G.end.row==$.row&&(G.end.column+=I),G.start.row+=A,G.end.row+=A,G}))}return R},b.prototype.indentRows=function(E,M,S){S=S.replace(/\t/g,this.getTabString());for(var x=E;x<=M;x++)this.doc.insertInLine({row:x,column:0},S)},b.prototype.outdentRows=function(E){for(var M=E.collapseRows(),S=new s(0,0,0,0),x=this.getTabSize(),L=M.start.row;L<=M.end.row;++L){var R=this.getLine(L);S.start.row=L,S.end.row=L;for(var A=0;A<x&&R.charAt(A)==" ";++A);A<x&&R.charAt(A)=="	"?(S.start.column=A,S.end.column=A+1):(S.start.column=0,S.end.column=A),this.remove(S)}},b.prototype.$moveLines=function(E,M,S){if(E=this.getRowFoldStart(E),M=this.getRowFoldEnd(M),S<0){var x=this.getRowFoldStart(E+S);if(x<0)return 0;var L=x-E}else if(S>0){var x=this.getRowFoldEnd(M+S);if(x>this.doc.getLength()-1)return 0;var L=x-M}else{E=this.$clipRowToDocument(E),M=this.$clipRowToDocument(M);var L=M-E+1}var R=new s(E,0,M,Number.MAX_VALUE),A=this.getFoldsInRange(R).map(function($){return $=$.clone(),$.start.row+=L,$.end.row+=L,$}),I=S==0?this.doc.getLines(E,M):this.doc.removeFullLines(E,M);return this.doc.insertFullLines(E+L,I),A.length&&this.addFolds(A),L},b.prototype.moveLinesUp=function(E,M){return this.$moveLines(E,M,-1)},b.prototype.moveLinesDown=function(E,M){return this.$moveLines(E,M,1)},b.prototype.duplicateLines=function(E,M){return this.$moveLines(E,M,0)},b.prototype.$clipRowToDocument=function(E){return Math.max(0,Math.min(E,this.doc.getLength()-1))},b.prototype.$clipColumnToRow=function(E,M){return M<0?0:Math.min(this.doc.getLine(E).length,M)},b.prototype.$clipPositionToDocument=function(E,M){if(M=Math.max(0,M),E<0)E=0,M=0;else{var S=this.doc.getLength();E>=S?(E=S-1,M=this.doc.getLine(S-1).length):M=Math.min(this.doc.getLine(E).length,M)}return{row:E,column:M}},b.prototype.$clipRangeToDocument=function(E){E.start.row<0?(E.start.row=0,E.start.column=0):E.start.column=this.$clipColumnToRow(E.start.row,E.start.column);var M=this.doc.getLength()-1;return E.end.row>M?(E.end.row=M,E.end.column=this.doc.getLine(M).length):E.end.column=this.$clipColumnToRow(E.end.row,E.end.column),E},b.prototype.setUseWrapMode=function(E){if(E!=this.$useWrapMode){if(this.$useWrapMode=E,this.$modified=!0,this.$resetRowCache(0),E){var M=this.getLength();this.$wrapData=Array(M),this.$updateWrapData(0,M-1)}this._signal("changeWrapMode")}},b.prototype.getUseWrapMode=function(){return this.$useWrapMode},b.prototype.setWrapLimitRange=function(E,M){(this.$wrapLimitRange.min!==E||this.$wrapLimitRange.max!==M)&&(this.$wrapLimitRange={min:E,max:M},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},b.prototype.adjustWrapLimit=function(E,M){var S=this.$wrapLimitRange;S.max<0&&(S={min:M,max:M});var x=this.$constrainWrapLimit(E,S.min,S.max);return x!=this.$wrapLimit&&x>1?(this.$wrapLimit=x,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},b.prototype.$constrainWrapLimit=function(E,M,S){return M&&(E=Math.max(M,E)),S&&(E=Math.min(S,E)),E},b.prototype.getWrapLimit=function(){return this.$wrapLimit},b.prototype.setWrapLimit=function(E){this.setWrapLimitRange(E,E)},b.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},b.prototype.$updateInternalDataOnChange=function(E){var M=this.$useWrapMode,S=E.action,x=E.start,L=E.end,R=x.row,A=L.row,I=A-R,$=null;if(this.$updating=!0,I!=0)if(S==="remove"){this[M?"$wrapData":"$rowLengthCache"].splice(R,I);var H=this.$foldData;$=this.getFoldsInRange(E),this.removeFolds($);var P=this.getFoldLine(L.row),q=0;if(P){P.addRemoveChars(L.row,L.column,x.column-L.column),P.shiftRow(-I);var G=this.getFoldLine(R);G&&G!==P&&(G.merge(P),P=G),q=H.indexOf(P)+1}for(q;q<H.length;q++){var P=H[q];P.start.row>=L.row&&P.shiftRow(-I)}A=R}else{var B=Array(I);B.unshift(R,0);var Q=M?this.$wrapData:this.$rowLengthCache;Q.splice.apply(Q,B);var H=this.$foldData,P=this.getFoldLine(R),q=0;if(P){var O=P.range.compareInside(x.row,x.column);O==0?(P=P.split(x.row,x.column),P&&(P.shiftRow(I),P.addRemoveChars(A,0,L.column-x.column))):O==-1&&(P.addRemoveChars(R,0,L.column-x.column),P.shiftRow(I)),q=H.indexOf(P)+1}for(q;q<H.length;q++){var P=H[q];P.start.row>=R&&P.shiftRow(I)}}else{I=Math.abs(E.start.column-E.end.column),S==="remove"&&($=this.getFoldsInRange(E),this.removeFolds($),I=-I);var P=this.getFoldLine(R);P&&P.addRemoveChars(R,x.column,I)}return M&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,M?this.$updateWrapData(R,A):this.$updateRowLengthCache(R,A),$},b.prototype.$updateRowLengthCache=function(E,M){this.$rowLengthCache[E]=null,this.$rowLengthCache[M]=null},b.prototype.$updateWrapData=function(E,M){var S=this.doc.getAllLines(),x=this.getTabSize(),L=this.$wrapData,R=this.$wrapLimit,A,I,$=E;for(M=Math.min(M,S.length-1);$<=M;)I=this.getFoldLine($,I),I?(A=[],I.walk(function(H,P,q,G){var B;if(H!=null){B=this.$getDisplayTokens(H,A.length),B[0]=y;for(var Q=1;Q<B.length;Q++)B[Q]=C}else B=this.$getDisplayTokens(S[P].substring(G,q),A.length);A=A.concat(B)}.bind(this),I.end.row,S[I.end.row].length+1),L[I.start.row]=this.$computeWrapSplits(A,R,x),$=I.end.row+1):(A=this.$getDisplayTokens(S[$]),L[$]=this.$computeWrapSplits(A,R,x),$++)},b.prototype.$computeWrapSplits=function(E,M,S){if(E.length==0)return[];var x=[],L=E.length,R=0,A=0,I=this.$wrapAsCode,$=this.$indentedSoftWrap,H=M<=Math.max(2*S,8)||$===!1?0:Math.floor(M/2);function P(){var O=0;if(H===0)return O;if($)for(var W=0;W<E.length;W++){var U=E[W];if(U==D)O+=1;else if(U==g)O+=S;else{if(U==w)continue;break}}return I&&$!==!1&&(O+=S),Math.min(O,H)}function q(O){for(var W=O-R,U=R;U<O;U++){var k=E[U];(k===12||k===2)&&(W-=1)}x.length||(G=P(),x.indent=G),A+=W,x.push(A),R=O}for(var G=0;L-R>M-G;){var B=R+M-G;if(E[B-1]>=D&&E[B]>=D){q(B);continue}if(E[B]==y||E[B]==C){for(B;B!=R-1&&E[B]!=y;B--);if(B>R){q(B);continue}for(B=R+M,B;B<E.length&&E[B]==C;B++);if(B==E.length)break;q(B);continue}for(var Q=Math.max(B-(M-(M>>2)),R-1);B>Q&&E[B]<y;)B--;if(I){for(;B>Q&&E[B]<y;)B--;for(;B>Q&&E[B]==T;)B--}else for(;B>Q&&E[B]<D;)B--;if(B>Q){q(++B);continue}B=R+M,E[B]==v&&B--,q(B-G)}return x},b.prototype.$getDisplayTokens=function(E,M){var S=[],x;M=M||0;for(var L=0;L<E.length;L++){var R=E.charCodeAt(L);if(R==9){x=this.getScreenTabSize(S.length+M),S.push(g);for(var A=1;A<x;A++)S.push(w)}else R==32?S.push(D):R>39&&R<48||R>57&&R<64?S.push(T):R>=4352&&F(R)?S.push(m,v):S.push(m)}return S},b.prototype.$getStringScreenWidth=function(E,M,S){if(M==0)return[0,0];M==null&&(M=1/0),S=S||0;var x,L;for(L=0;L<E.length&&(x=E.charCodeAt(L),x==9?S+=this.getScreenTabSize(S):x>=4352&&F(x)?S+=2:S+=1,!(S>M));L++);return[S,L]},b.prototype.getRowLength=function(E){var M=1;return this.lineWidgets&&(M+=this.lineWidgets[E]&&this.lineWidgets[E].rowCount||0),!this.$useWrapMode||!this.$wrapData[E]?M:this.$wrapData[E].length+M},b.prototype.getRowLineCount=function(E){return!this.$useWrapMode||!this.$wrapData[E]?1:this.$wrapData[E].length+1},b.prototype.getRowWrapIndent=function(E){if(this.$useWrapMode){var M=this.screenToDocumentPosition(E,Number.MAX_VALUE),S=this.$wrapData[M.row];return S.length&&S[0]<M.column?S.indent:0}else return 0},b.prototype.getScreenLastRowColumn=function(E){var M=this.screenToDocumentPosition(E,Number.MAX_VALUE);return this.documentToScreenColumn(M.row,M.column)},b.prototype.getDocumentLastRowColumn=function(E,M){var S=this.documentToScreenRow(E,M);return this.getScreenLastRowColumn(S)},b.prototype.getDocumentLastRowColumnPosition=function(E,M){var S=this.documentToScreenRow(E,M);return this.screenToDocumentPosition(S,Number.MAX_VALUE/10)},b.prototype.getRowSplitData=function(E){if(this.$useWrapMode)return this.$wrapData[E]},b.prototype.getScreenTabSize=function(E){return this.$tabSize-(E%this.$tabSize|0)},b.prototype.screenToDocumentRow=function(E,M){return this.screenToDocumentPosition(E,M).row},b.prototype.screenToDocumentColumn=function(E,M){return this.screenToDocumentPosition(E,M).column},b.prototype.screenToDocumentPosition=function(E,M,S){if(E<0)return{row:0,column:0};var x,L=0,R=0,A,I=0,$=0,H=this.$screenRowCache,P=this.$getRowCacheIndex(H,E),q=H.length;if(q&&P>=0)var I=H[P],L=this.$docRowCache[P],G=E>H[q-1];else var G=!q;for(var B=this.getLength()-1,Q=this.getNextFoldLine(L),O=Q?Q.start.row:1/0;I<=E&&($=this.getRowLength(L),!(I+$>E||L>=B));)I+=$,L++,L>O&&(L=Q.end.row+1,Q=this.getNextFoldLine(L,Q),O=Q?Q.start.row:1/0),G&&(this.$docRowCache.push(L),this.$screenRowCache.push(I));if(Q&&Q.start.row<=L)x=this.getFoldDisplayLine(Q),L=Q.start.row;else{if(I+$<=E||L>B)return{row:B,column:this.getLine(B).length};x=this.getLine(L),Q=null}var W=0,U=Math.floor(E-I);if(this.$useWrapMode){var k=this.$wrapData[L];k&&(A=k[U],U>0&&k.length&&(W=k.indent,R=k[U-1]||k[k.length-1],x=x.substring(R)))}return S!==void 0&&this.$bidiHandler.isBidiRow(I+U,L,U)&&(M=this.$bidiHandler.offsetToCol(S)),R+=this.$getStringScreenWidth(x,M-W)[1],this.$useWrapMode&&R>=A&&(R=A-1),Q?Q.idxToPosition(R):{row:L,column:R}},b.prototype.documentToScreenPosition=function(E,M){if(typeof M>"u")var S=this.$clipPositionToDocument(E.row,E.column);else S=this.$clipPositionToDocument(E,M);E=S.row,M=S.column;var x=0,L=null,R=null;R=this.getFoldAt(E,M,1),R&&(E=R.start.row,M=R.start.column);var A,I=0,$=this.$docRowCache,H=this.$getRowCacheIndex($,E),P=$.length;if(P&&H>=0)var I=$[H],x=this.$screenRowCache[H],q=E>$[P-1];else var q=!P;for(var G=this.getNextFoldLine(I),B=G?G.start.row:1/0;I<E;){if(I>=B){if(A=G.end.row+1,A>E)break;G=this.getNextFoldLine(A,G),B=G?G.start.row:1/0}else A=I+1;x+=this.getRowLength(I),I=A,q&&(this.$docRowCache.push(I),this.$screenRowCache.push(x))}var Q="";G&&I>=B?(Q=this.getFoldDisplayLine(G,E,M),L=G.start.row):(Q=this.getLine(E).substring(0,M),L=E);var O=0;if(this.$useWrapMode){var W=this.$wrapData[L];if(W){for(var U=0;Q.length>=W[U];)x++,U++;Q=Q.substring(W[U-1]||0,Q.length),O=U>0?W.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(x+=this.lineWidgets[I].rowsAbove),{row:x,column:O+this.$getStringScreenWidth(Q)[0]}},b.prototype.documentToScreenColumn=function(E,M){return this.documentToScreenPosition(E,M).column},b.prototype.documentToScreenRow=function(E,M){return this.documentToScreenPosition(E,M).row},b.prototype.getScreenLength=function(){var E=0,M=null;if(this.$useWrapMode)for(var L=this.$wrapData.length,R=0,x=0,M=this.$foldData[x++],A=M?M.start.row:1/0;R<L;){var I=this.$wrapData[R];E+=I?I.length+1:1,R++,R>A&&(R=M.end.row+1,M=this.$foldData[x++],A=M?M.start.row:1/0)}else{E=this.getLength();for(var S=this.$foldData,x=0;x<S.length;x++)M=S[x],E-=M.end.row-M.start.row}return this.lineWidgets&&(E+=this.$getWidgetScreenLength()),E},b.prototype.$setFontMetrics=function(E){this.$enableVarChar&&(this.$getStringScreenWidth=function(M,S,x){if(S===0)return[0,0];S||(S=1/0),x=x||0;var L,R;for(R=0;R<M.length&&(L=M.charAt(R),L==="	"?x+=this.getScreenTabSize(x):x+=E.getCharacterWidth(L),!(x>S));R++);return[x,R]})},b.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},b}();_.$uid=0,_.prototype.$modes=r.$modes,_.prototype.getValue=_.prototype.toString,_.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},_.prototype.$overwrite=!1,_.prototype.$mode=null,_.prototype.$modeId=null,_.prototype.$scrollTop=0,_.prototype.$scrollLeft=0,_.prototype.$wrapLimit=80,_.prototype.$useWrapMode=!1,_.prototype.$wrapLimitRange={min:null,max:null},_.prototype.lineWidgets=null,_.prototype.isFullWidth=F,a.implement(_.prototype,l);var m=1,v=2,y=3,C=4,T=9,D=10,g=11,w=12;function F(b){return b<4352?!1:b>=4352&&b<=4447||b>=4515&&b<=4519||b>=4602&&b<=4607||b>=9001&&b<=9002||b>=11904&&b<=11929||b>=11931&&b<=12019||b>=12032&&b<=12245||b>=12272&&b<=12283||b>=12288&&b<=12350||b>=12353&&b<=12438||b>=12441&&b<=12543||b>=12549&&b<=12589||b>=12593&&b<=12686||b>=12688&&b<=12730||b>=12736&&b<=12771||b>=12784&&b<=12830||b>=12832&&b<=12871||b>=12880&&b<=13054||b>=13056&&b<=19903||b>=19968&&b<=42124||b>=42128&&b<=42182||b>=43360&&b<=43388||b>=44032&&b<=55203||b>=55216&&b<=55238||b>=55243&&b<=55291||b>=63744&&b<=64255||b>=65040&&b<=65049||b>=65072&&b<=65106||b>=65108&&b<=65126||b>=65128&&b<=65131||b>=65281&&b<=65376||b>=65504&&b<=65510}e("./edit_session/folding").Folding.call(_.prototype),e("./edit_session/bracket_match").BracketMatch.call(_.prototype),r.defineOptions(_.prototype,"session",{wrap:{set:function(b){if(!b||b=="off"?b=!1:b=="free"?b=!0:b=="printMargin"?b=-1:typeof b=="string"&&(b=parseInt(b,10)||!1),this.$wrap!=b)if(this.$wrap=b,!b)this.setUseWrapMode(!1);else{var E=typeof b=="number"?b:null;this.setWrapLimitRange(E,E),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(b){b=b=="auto"?this.$mode.type!="text":b!="text",b!=this.$wrapAsCode&&(this.$wrapAsCode=b,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(b){this.$useWorker=b,this.$stopWorker(),b&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(b){b=parseInt(b),b>0&&this.$tabSize!==b&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=b,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(b){this.setFoldStyle(b)},handlesSet:!0},overwrite:{set:function(b){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(b){this.doc.setNewLineMode(b)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(b){this.setMode(b)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=_});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var a=e("./lib/lang"),h=e("./lib/oop"),o=e("./range").Range,r=function(){function u(){this.$options={}}return u.prototype.set=function(i){return h.mixin(this.$options,i),this},u.prototype.getOptions=function(){return a.copyObject(this.$options)},u.prototype.setOptions=function(i){this.$options=i},u.prototype.find=function(i){var s=this.$options,f=this.$matchIterator(i,s);if(!f)return!1;var p=null;return f.forEach(function(d,c,_,m){return p=new o(d,c,_,m),c==m&&s.start&&s.start.start&&s.skipCurrent!=!1&&p.isEqual(s.start)?(p=null,!1):!0}),p},u.prototype.findAll=function(i){var s=this.$options;if(!s.needle)return[];this.$assembleRegExp(s);var f=s.range,p=f?i.getLines(f.start.row,f.end.row):i.doc.getAllLines(),d=[],c=s.re;if(s.$isMultiLine){var _=c.length,m=p.length-_,v;e:for(var y=c.offset||0;y<=m;y++){for(var C=0;C<_;C++)if(p[y+C].search(c[C])==-1)continue e;var T=p[y],D=p[y+_-1],g=T.length-T.match(c[0])[0].length,w=D.match(c[_-1])[0].length;v&&v.end.row===y&&v.end.column>g||(d.push(v=new o(y,g,y+_-1,w)),_>2&&(y=y+_-2))}}else for(var F=0;F<p.length;F++)for(var b=a.getMatchOffsets(p[F],c),C=0;C<b.length;C++){var E=b[C];d.push(new o(F,E.offset,F,E.offset+E.length))}if(f){for(var M=f.start.column,S=f.end.column,F=0,C=d.length-1;F<C&&d[F].start.column<M&&d[F].start.row==0;)F++;for(var x=f.end.row-f.start.row;F<C&&d[C].end.column>S&&d[C].end.row==x;)C--;for(d=d.slice(F,C+1),F=0,C=d.length;F<C;F++)d[F].start.row+=f.start.row,d[F].end.row+=f.start.row}return d},u.prototype.replace=function(i,s){var f=this.$options,p=this.$assembleRegExp(f);if(f.$isMultiLine)return s;if(p){var d=p.exec(i);if(!d||d[0].length!=i.length)return null;if(s=i.replace(p,s),f.preserveCase){s=s.split("");for(var c=Math.min(i.length,i.length);c--;){var _=i[c];_&&_.toLowerCase()!=_?s[c]=s[c].toUpperCase():s[c]=s[c].toLowerCase()}s=s.join("")}return s}},u.prototype.$assembleRegExp=function(i,s){if(i.needle instanceof RegExp)return i.re=i.needle;var f=i.needle;if(!i.needle)return i.re=!1;i.regExp||(f=a.escapeRegExp(f));var p=i.caseSensitive?"gm":"gmi";try{new RegExp(f,"u"),i.$supportsUnicodeFlag=!0,p+="u"}catch{i.$supportsUnicodeFlag=!1}if(i.wholeWord&&(f=l(f,i)),i.$isMultiLine=!s&&/[\n\r]/.test(f),i.$isMultiLine)return i.re=this.$assembleMultilineRegExp(f,p);try{var d=new RegExp(f,p)}catch{d=!1}return i.re=d},u.prototype.$assembleMultilineRegExp=function(i,s){for(var f=i.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),p=[],d=0;d<f.length;d++)try{p.push(new RegExp(f[d],s))}catch{return!1}return p},u.prototype.$matchIterator=function(i,s){var f=this.$assembleRegExp(s);if(!f)return!1;var p=s.backwards==!0,d=s.skipCurrent!=!1,c=f.unicode,_=s.range,m=s.start;m||(m=_?_[p?"end":"start"]:i.selection.getRange()),m.start&&(m=m[d!=p?"end":"start"]);var v=_?_.start.row:0,y=_?_.end.row:i.getLength()-1;if(p)var C=function(g){var w=m.row;if(!D(w,m.column,g)){for(w--;w>=v;w--)if(D(w,Number.MAX_VALUE,g))return;if(s.wrap!=!1){for(w=y,v=m.row;w>=v;w--)if(D(w,Number.MAX_VALUE,g))return}}};else var C=function(w){var F=m.row;if(!D(F,m.column,w)){for(F=F+1;F<=y;F++)if(D(F,0,w))return;if(s.wrap!=!1){for(F=v,y=m.row;F<=y;F++)if(D(F,0,w))return}}};if(s.$isMultiLine)var T=f.length,D=function(g,w,F){var b=p?g-T+1:g;if(!(b<0||b+T>i.getLength())){var E=i.getLine(b),M=E.search(f[0]);if(!(!p&&M<w||M===-1)){for(var S=1;S<T;S++)if(E=i.getLine(b+S),E.search(f[S])==-1)return;var x=E.match(f[T-1])[0].length;if(!(p&&x>w)&&F(b,M,b+T-1,x))return!0}}};else if(p)var D=function(w,F,b){var E=i.getLine(w),M=[],S,x=0;for(f.lastIndex=0;S=f.exec(E);){var L=S[0].length;if(x=S.index,!L){if(x>=E.length)break;f.lastIndex=x+=a.skipEmptyMatch(E,x,c)}if(S.index+L>F)break;M.push(S.index,L)}for(var R=M.length-1;R>=0;R-=2){var A=M[R-1],L=M[R];if(b(w,A,w,A+L))return!0}};else var D=function(w,F,b){var E=i.getLine(w),M,S;for(f.lastIndex=F;S=f.exec(E);){var x=S[0].length;if(M=S.index,b(w,M,w,M+x))return!0;if(!x&&(f.lastIndex=M+=a.skipEmptyMatch(E,M,c),M>=E.length))return!1}};return{forEach:C}},u}();function l(u,i){var s=a.supportsLookbehind();function f(_,m){m===void 0&&(m=!0);var v=s&&i.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return v.test(_)||i.regExp?s&&i.$supportsUnicodeFlag?m?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var p=Array.from(u),d=p[0],c=p[p.length-1];return f(d)+u+f(c,!1)}t.Search=r});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var s=function(f,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(d[_]=c[_])},s(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");s(f,p);function d(){this.constructor=f}f.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),h=e("../lib/keys"),o=e("../lib/useragent"),r=h.KEY_MODS,l=function(){function s(f,p){this.$init(f,p,!1)}return s.prototype.$init=function(f,p,d){this.platform=p||(o.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(f),this.$singleCommand=d},s.prototype.addCommand=function(f){this.commands[f.name]&&this.removeCommand(f),this.commands[f.name]=f,f.bindKey&&this._buildKeyHash(f)},s.prototype.removeCommand=function(f,p){var d=f&&(typeof f=="string"?f:f.name);f=this.commands[d],p||delete this.commands[d];var c=this.commandKeyBinding;for(var _ in c){var m=c[_];if(m==f)delete c[_];else if(Array.isArray(m)){var v=m.indexOf(f);v!=-1&&(m.splice(v,1),m.length==1&&(c[_]=m[0]))}}},s.prototype.bindKey=function(f,p,d){if(typeof f=="object"&&f&&(d==null&&(d=f.position),f=f[this.platform]),!!f){if(typeof p=="function")return this.addCommand({exec:p,bindKey:f,name:p.name||f});f.split("|").forEach(function(c){var _="";if(c.indexOf(" ")!=-1){var m=c.split(/\s+/);c=m.pop(),m.forEach(function(C){var T=this.parseKeys(C),D=r[T.hashId]+T.key;_+=(_?" ":"")+D,this._addCommandToBinding(_,"chainKeys")},this),_+=" "}var v=this.parseKeys(c),y=r[v.hashId]+v.key;this._addCommandToBinding(_+y,p,d)},this)}},s.prototype._addCommandToBinding=function(f,p,d){var c=this.commandKeyBinding,_;if(!p)delete c[f];else if(!c[f]||this.$singleCommand)c[f]=p;else{Array.isArray(c[f])?(_=c[f].indexOf(p))!=-1&&c[f].splice(_,1):c[f]=[c[f]],typeof d!="number"&&(d=u(p));var m=c[f];for(_=0;_<m.length;_++){var v=m[_],y=u(v);if(y>d)break}m.splice(_,0,p)}},s.prototype.addCommands=function(f){f&&Object.keys(f).forEach(function(p){var d=f[p];if(d){if(typeof d=="string")return this.bindKey(d,p);typeof d=="function"&&(d={exec:d}),typeof d=="object"&&(d.name||(d.name=p),this.addCommand(d))}},this)},s.prototype.removeCommands=function(f){Object.keys(f).forEach(function(p){this.removeCommand(f[p])},this)},s.prototype.bindKeys=function(f){Object.keys(f).forEach(function(p){this.bindKey(p,f[p])},this)},s.prototype._buildKeyHash=function(f){this.bindKey(f.bindKey,f)},s.prototype.parseKeys=function(f){var p=f.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),d=p.pop(),c=h[d];if(h.FUNCTION_KEYS[c])d=h.FUNCTION_KEYS[c].toLowerCase();else if(p.length){if(p.length==1&&p[0]=="shift")return{key:d.toUpperCase(),hashId:-1}}else return{key:d,hashId:-1};for(var _=0,m=p.length;m--;){var v=h.KEY_MODS[p[m]];if(v==null)return typeof console<"u"&&console.error("invalid modifier "+p[m]+" in "+f),!1;_|=v}return{key:d,hashId:_}},s.prototype.findKeyCommand=function(f,p){var d=r[f]+p;return this.commandKeyBinding[d]},s.prototype.handleKeyboard=function(f,p,d,c){if(!(c<0)){var _=r[p]+d,m=this.commandKeyBinding[_];return f.$keyChain&&(f.$keyChain+=" "+_,m=this.commandKeyBinding[f.$keyChain]||m),m&&(m=="chainKeys"||m[m.length-1]=="chainKeys")?(f.$keyChain=f.$keyChain||_,{command:"null"}):(f.$keyChain&&((!p||p==4)&&d.length==1?f.$keyChain=f.$keyChain.slice(0,-_.length-1):(p==-1||c>0)&&(f.$keyChain="")),{command:m})}},s.prototype.getStatusText=function(f,p){return p.$keyChain||""},s}();function u(s){return typeof s=="object"&&s.bindKey&&s.bindKey.position||(s.isDefault?-100:0)}var i=function(s){a(f,s);function f(p,d){var c=s.call(this,p,d)||this;return c.$singleCommand=!0,c}return f}(l);i.call=function(s,f,p){l.prototype.$init.call(s,f,p,!0)},l.call=function(s,f,p){l.prototype.$init.call(s,f,p,!1)},t.HashHandler=i,t.MultiHashHandler=l});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var u=function(i,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(f[d]=p[d])},u(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");u(i,s);function f(){this.constructor=i}i.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),h=e("../lib/oop"),o=e("../keyboard/hash_handler").MultiHashHandler,r=e("../lib/event_emitter").EventEmitter,l=function(u){a(i,u);function i(s,f){var p=u.call(this,f,s)||this;return p.byName=p.commands,p.setDefaultHandler("exec",function(d){return d.args?d.command.exec(d.editor,d.args,d.event,!1):d.command.exec(d.editor,{},d.event,!0)}),p}return i.prototype.exec=function(s,f,p){if(Array.isArray(s)){for(var d=s.length;d--;)if(this.exec(s[d],f,p))return!0;return!1}if(typeof s=="string"&&(s=this.commands[s]),!s||f&&f.$readOnly&&!s.readOnly||this.$checkCommandState!=!1&&s.isAvailable&&!s.isAvailable(f))return!1;var c={editor:f,command:s,args:p};return c.returnValue=this._emit("exec",c),this._signal("afterExec",c),c.returnValue!==!1},i.prototype.toggleRecording=function(s){if(!this.$inReplay)return s&&s._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(f){this.macro.push([f.command,f.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},i.prototype.replay=function(s){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(s);try{this.$inReplay=!0,this.macro.forEach(function(f){typeof f=="string"?this.exec(f,s):this.exec(f[0],s,f[1])},this)}finally{this.$inReplay=!1}}},i.prototype.trimMacro=function(s){return s.map(function(f){return typeof f[0]!="string"&&(f[0]=f[0].name),f[1]||(f=f[0]),f})},i}(o);h.implement(l.prototype,r),t.CommandManager=l});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var a=e("../lib/lang"),h=e("../config"),o=e("../range").Range;function r(u,i){return{win:u,mac:i}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:r("Ctrl-,","Command-,"),exec:function(u){h.loadModule("ace/ext/settings_menu",function(i){i.init(u),u.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:r("Alt-E","F4"),exec:function(u){h.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(u,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:r("Alt-Shift-E","Shift-F4"),exec:function(u){h.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(u,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:r("Ctrl-A","Command-A"),exec:function(u){u.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:r(null,"Ctrl-L"),exec:function(u){u.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:r("Ctrl-L","Command-L"),exec:function(u,i){typeof i=="number"&&!isNaN(i)&&u.gotoLine(i),u.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:r("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(u){u.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:r("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(u){u.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:r("F2","F2"),exec:function(u){u.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:r("Alt-F2","Alt-F2"),exec:function(u){u.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:r(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:r(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:r("Alt-0","Command-Option-0"),exec:function(u){u.session.foldAll(),u.session.unfold(u.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:r("Alt-Shift-0","Command-Option-Shift-0"),exec:function(u){u.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:r("Ctrl-K","Command-G"),exec:function(u){u.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:r("Ctrl-Shift-K","Command-Shift-G"),exec:function(u){u.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:r("Alt-K","Ctrl-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:r("Alt-Shift-K","Ctrl-Shift-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:r("Ctrl-F","Command-F"),exec:function(u){h.loadModule("ace/ext/searchbox",function(i){i.Search(u)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(u){u.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:r("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(u){u.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:r("Ctrl-Home","Command-Home|Command-Up"),exec:function(u){u.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:r("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(u){u.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:r("Up","Up|Ctrl-P"),exec:function(u,i){u.navigateUp(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:r("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(u){u.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:r("Ctrl-End","Command-End|Command-Down"),exec:function(u){u.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:r("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(u){u.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:r("Down","Down|Ctrl-N"),exec:function(u,i){u.navigateDown(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:r("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(u){u.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:r("Ctrl-Left","Option-Left"),exec:function(u){u.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:r("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:r("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(u){u.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:r("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(u){u.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:r("Left","Left|Ctrl-B"),exec:function(u,i){u.navigateLeft(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:r("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(u){u.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:r("Ctrl-Right","Option-Right"),exec:function(u){u.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:r("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:r("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(u){u.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:r("Shift-Right","Shift-Right"),exec:function(u){u.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:r("Right","Right|Ctrl-F"),exec:function(u,i){u.navigateRight(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(u){u.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:r(null,"Option-PageDown"),exec:function(u){u.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:r("PageDown","PageDown|Ctrl-V"),exec:function(u){u.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(u){u.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:r(null,"Option-PageUp"),exec:function(u){u.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(u){u.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:r("Ctrl-Up",null),exec:function(u){u.renderer.scrollBy(0,-2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:r("Ctrl-Down",null),exec:function(u){u.renderer.scrollBy(0,2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:r("Ctrl-Alt-E","Command-Option-E"),exec:function(u){u.commands.toggleRecording(u)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:r("Ctrl-Shift-E","Command-Shift-E"),exec:function(u){u.commands.replay(u)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:r("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(u){u.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:r("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(u){u.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:r("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(u){u.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:r(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(u){},readOnly:!0},{name:"cut",description:"Cut",exec:function(u){var i=u.$copyWithEmptySelection&&u.selection.isEmpty(),s=i?u.selection.getLineRange():u.selection.getRange();u._emit("cut",s),s.isEmpty()||u.session.remove(s),u.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(u,i){u.$handlePaste(i)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:r("Ctrl-D","Command-D"),exec:function(u){u.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:r("Ctrl-Shift-D","Command-Shift-D"),exec:function(u){u.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:r("Ctrl-Alt-S","Command-Alt-S"),exec:function(u){u.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:r("Ctrl-/","Command-/"),exec:function(u){u.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:r("Ctrl-Shift-/","Command-Shift-/"),exec:function(u){u.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:r("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(u){u.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:r("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(u){u.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:r("Ctrl-H","Command-Option-F"),exec:function(u){h.loadModule("ace/ext/searchbox",function(i){i.Search(u,!0)})}},{name:"undo",description:"Undo",bindKey:r("Ctrl-Z","Command-Z"),exec:function(u){u.undo()}},{name:"redo",description:"Redo",bindKey:r("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(u){u.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:r("Alt-Shift-Up","Command-Option-Up"),exec:function(u){u.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:r("Alt-Up","Option-Up"),exec:function(u){u.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:r("Alt-Shift-Down","Command-Option-Down"),exec:function(u){u.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:r("Alt-Down","Option-Down"),exec:function(u){u.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:r("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(u){u.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:r("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(u){u.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:r("Shift-Delete",null),exec:function(u){if(u.selection.isEmpty())u.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:r("Alt-Backspace","Command-Backspace"),exec:function(u){u.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:r("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(u){u.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:r("Ctrl-Shift-Backspace",null),exec:function(u){var i=u.selection.getRange();i.start.column=0,u.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:r("Ctrl-Shift-Delete",null),exec:function(u){var i=u.selection.getRange();i.end.column=Number.MAX_VALUE,u.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:r("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(u){u.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:r("Ctrl-Delete","Alt-Delete"),exec:function(u){u.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:r("Shift-Tab","Shift-Tab"),exec:function(u){u.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:r("Tab","Tab"),exec:function(u){u.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:r("Ctrl-[","Ctrl-["),exec:function(u){u.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:r("Ctrl-]","Ctrl-]"),exec:function(u){u.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(u,i){u.insert(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(u,i){u.insert(a.stringRepeat(i.text||"",i.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:r(null,"Ctrl-O"),exec:function(u){u.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:r("Alt-Shift-X","Ctrl-T"),exec:function(u){u.transposeLetters()},multiSelectAction:function(u){u.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:r("Ctrl-U","Ctrl-U"),exec:function(u){u.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:r("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(u){u.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:r(null,null),exec:function(u){u.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:r("Ctrl-Shift-L","Command-Shift-L"),exec:function(u){var i=u.selection.getRange();i.start.column=i.end.column=0,i.end.row++,u.selection.setRange(i,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:r("Ctrl+F3","F3"),exec:function(u){u.openLink()}},{name:"joinlines",description:"Join lines",bindKey:r(null,null),exec:function(u){for(var i=u.selection.isBackwards(),s=i?u.selection.getSelectionLead():u.selection.getSelectionAnchor(),f=i?u.selection.getSelectionAnchor():u.selection.getSelectionLead(),p=u.session.doc.getLine(s.row).length,d=u.session.doc.getTextRange(u.selection.getRange()),c=d.replace(/\n\s*/," ").length,_=u.session.doc.getLine(s.row),m=s.row+1;m<=f.row+1;m++){var v=a.stringTrimLeft(a.stringTrimRight(u.session.doc.getLine(m)));v.length!==0&&(v=" "+v),_+=v}f.row+1<u.session.doc.getLength()-1&&(_+=u.session.doc.getNewLineCharacter()),u.clearSelection(),u.session.doc.replace(new o(s.row,0,f.row+2,0),_),c>0?(u.selection.moveCursorTo(s.row,s.column),u.selection.selectTo(s.row,s.column+c)):(p=u.session.doc.getLine(s.row).length>p?p+1:p,u.selection.moveCursorTo(s.row,p))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:r(null,null),exec:function(u){var i=u.session.doc.getLength()-1,s=u.session.doc.getLine(i).length,f=u.selection.rangeList.ranges,p=[];f.length<1&&(f=[u.selection.getRange()]);for(var d=0;d<f.length;d++)d==f.length-1&&(f[d].end.row===i&&f[d].end.column===s||p.push(new o(f[d].end.row,f[d].end.column,i,s))),d===0?f[d].start.row===0&&f[d].start.column===0||p.push(new o(0,0,f[d].start.row,f[d].start.column)):p.push(new o(f[d-1].end.row,f[d-1].end.column,f[d].start.row,f[d].start.column));u.exitMultiSelectMode(),u.clearSelection();for(var d=0;d<p.length;d++)u.selection.addRange(p[d],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(u){u.selection.clearSelection(),u.navigateLineEnd(),u.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(u){u.selection.clearSelection();var i=u.getCursorPosition();u.selection.moveTo(i.row-1,Number.MAX_VALUE),u.insert(`
`),i.row===0&&u.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(u){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),u.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:r("F1","F1"),exec:function(u){u.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:r(null,null),exec:function(u){u.prompt({$type:"modes"})},readOnly:!0}];for(var l=1;l<9;l++)t.commands.push({name:"foldToLevel"+l,description:"Fold To Level "+l,level:l,exec:function(u){u.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("./lib/dom"),h=function(){function o(r){this.session=r,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return o.prototype.getRowLength=function(r){var l;return this.lineWidgets?l=this.lineWidgets[r]&&this.lineWidgets[r].rowCount||0:l=0,!this.$useWrapMode||!this.$wrapData[r]?1+l:this.$wrapData[r].length+1+l},o.prototype.$getWidgetScreenLength=function(){var r=0;return this.lineWidgets.forEach(function(l){l&&l.rowCount&&!l.hidden&&(r+=l.rowCount)}),r},o.prototype.$onChangeEditor=function(r){this.attach(r.editor)},o.prototype.attach=function(r){r&&r.widgetManager&&r.widgetManager!=this&&r.widgetManager.detach(),this.editor!=r&&(this.detach(),this.editor=r,r&&(r.widgetManager=this,r.renderer.on("beforeRender",this.measureWidgets),r.renderer.on("afterRender",this.renderWidgets)))},o.prototype.detach=function(r){var l=this.editor;if(l){this.editor=null,l.widgetManager=null,l.renderer.off("beforeRender",this.measureWidgets),l.renderer.off("afterRender",this.renderWidgets);var u=this.session.lineWidgets;u&&u.forEach(function(i){i&&i.el&&i.el.parentNode&&(i._inDocument=!1,i.el.parentNode.removeChild(i.el))})}},o.prototype.updateOnFold=function(r,l){var u=l.lineWidgets;if(!(!u||!r.action)){for(var i=r.data,s=i.start.row,f=i.end.row,p=r.action=="add",d=s+1;d<f;d++)u[d]&&(u[d].hidden=p);u[f]&&(p?u[s]?u[f].hidden=p:u[s]=u[f]:(u[s]==u[f]&&(u[s]=void 0),u[f].hidden=p))}},o.prototype.updateOnChange=function(r){var l=this.session.lineWidgets;if(l){var u=r.start.row,i=r.end.row-u;if(i!==0)if(r.action=="remove"){var s=l.splice(u+1,i);!l[u]&&s[s.length-1]&&(l[u]=s.pop()),s.forEach(function(p){p&&this.removeLineWidget(p)},this),this.$updateRows()}else{var f=new Array(i);l[u]&&l[u].column!=null&&r.start.column>l[u].column&&u++,f.unshift(u,0),l.splice.apply(l,f),this.$updateRows()}}},o.prototype.$updateRows=function(){var r=this.session.lineWidgets;if(r){var l=!0;r.forEach(function(u,i){if(u)for(l=!1,u.row=i;u.$oldWidget;)u.$oldWidget.row=i,u=u.$oldWidget}),l&&(this.session.lineWidgets=null)}},o.prototype.$registerLineWidget=function(r){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var l=this.session.lineWidgets[r.row];return l&&(r.$oldWidget=l,l.el&&l.el.parentNode&&(l.el.parentNode.removeChild(l.el),l._inDocument=!1)),this.session.lineWidgets[r.row]=r,r},o.prototype.addLineWidget=function(r){if(this.$registerLineWidget(r),r.session=this.session,!this.editor)return r;var l=this.editor.renderer;r.html&&!r.el&&(r.el=a.createElement("div"),r.el.innerHTML=r.html),r.text&&!r.el&&(r.el=a.createElement("div"),r.el.textContent=r.text),r.el&&(a.addCssClass(r.el,"ace_lineWidgetContainer"),r.className&&a.addCssClass(r.el,r.className),r.el.style.position="absolute",r.el.style.zIndex="5",l.container.appendChild(r.el),r._inDocument=!0,r.coverGutter||(r.el.style.zIndex="3"),r.pixelHeight==null&&(r.pixelHeight=r.el.offsetHeight)),r.rowCount==null&&(r.rowCount=r.pixelHeight/l.layerConfig.lineHeight);var u=this.session.getFoldAt(r.row,0);if(r.$fold=u,u){var i=this.session.lineWidgets;r.row==u.end.row&&!i[u.start.row]?i[u.start.row]=r:r.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:r.row}}}),this.$updateRows(),this.renderWidgets(null,l),this.onWidgetChanged(r),r},o.prototype.removeLineWidget=function(r){if(r._inDocument=!1,r.session=null,r.el&&r.el.parentNode&&r.el.parentNode.removeChild(r.el),r.editor&&r.editor.destroy)try{r.editor.destroy()}catch{}if(this.session.lineWidgets){var l=this.session.lineWidgets[r.row];if(l==r)this.session.lineWidgets[r.row]=r.$oldWidget,r.$oldWidget&&this.onWidgetChanged(r.$oldWidget);else for(;l;){if(l.$oldWidget==r){l.$oldWidget=r.$oldWidget;break}l=l.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:r.row}}}),this.$updateRows()},o.prototype.getWidgetsAtRow=function(r){for(var l=this.session.lineWidgets,u=l&&l[r],i=[];u;)i.push(u),u=u.$oldWidget;return i},o.prototype.onWidgetChanged=function(r){this.session._changedWidgets.push(r),this.editor&&this.editor.renderer.updateFull()},o.prototype.measureWidgets=function(r,l){var u=this.session._changedWidgets,i=l.layerConfig;if(!(!u||!u.length)){for(var s=1/0,f=0;f<u.length;f++){var p=u[f];if(!(!p||!p.el)&&p.session==this.session){if(!p._inDocument){if(this.session.lineWidgets[p.row]!=p)continue;p._inDocument=!0,l.container.appendChild(p.el)}p.h=p.el.offsetHeight,p.fixedWidth||(p.w=p.el.offsetWidth,p.screenWidth=Math.ceil(p.w/i.characterWidth));var d=p.h/i.lineHeight;p.coverLine&&(d-=this.session.getRowLineCount(p.row),d<0&&(d=0)),p.rowCount!=d&&(p.rowCount=d,p.row<s&&(s=p.row))}}s!=1/0&&(this.session._emit("changeFold",{data:{start:{row:s}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},o.prototype.renderWidgets=function(r,l){var u=l.layerConfig,i=this.session.lineWidgets;if(i){for(var s=Math.min(this.firstRow,u.firstRow),f=Math.max(this.lastRow,u.lastRow,i.length);s>0&&!i[s];)s--;this.firstRow=u.firstRow,this.lastRow=u.lastRow,l.$cursorLayer.config=u;for(var p=s;p<=f;p++){var d=i[p];if(!(!d||!d.el)){if(d.hidden){d.el.style.top=-100-(d.pixelHeight||0)+"px";continue}d._inDocument||(d._inDocument=!0,l.container.appendChild(d.el));var c=l.$cursorLayer.getPixelPosition({row:p,column:0},!0).top;d.coverLine||(c+=u.lineHeight*this.session.getRowLineCount(d.row)),d.el.style.top=c-u.offset+"px";var _=d.coverGutter?0:l.gutterWidth;d.fixedWidth||(_-=l.scrollLeft),d.el.style.left=_+"px",d.fullWidth&&d.screenWidth&&(d.el.style.minWidth=u.width+2*u.padding+"px"),d.fixedWidth?d.el.style.right=l.scrollBar.getWidth()+"px":d.el.style.right=""}}}},o}();t.LineWidgets=h});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,n){"use strict";var a=e("../lib/keys"),h=e("../mouse/default_gutter_handler").GutterTooltip,o=function(){function l(u){this.editor=u,this.gutterLayer=u.renderer.$gutterLayer,this.element=u.renderer.$gutter,this.lines=u.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new h(this.editor)}return l.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},l.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},l.prototype.$onGutterKeyDown=function(u){if(this.annotationTooltip.isOpen){u.preventDefault(),u.keyCode===a.escape&&this.annotationTooltip.hideTooltip();return}if(u.target===this.element){if(u.keyCode!=a.enter)return;u.preventDefault();var i=this.editor.getCursorPosition().row;this.editor.isRowVisible(i)||this.editor.scrollToLine(i,!0,!0),setTimeout(function(){var s=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),f=this.$findNearestFoldWidget(s),p=this.$findNearestAnnotation(s);if(!(f===null&&p===null)){if(f===null&&p!==null){this.activeRowIndex=p,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(f!==null&&p===null){this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(p-s)<Math.abs(f-s)){this.activeRowIndex=p,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(u),setTimeout(function(){this.editor._signal("gutterkeydown",new r(u,this))}.bind(this),10)},l.prototype.$handleGutterKeyboardInteraction=function(u){if(u.keyCode===a.tab){u.preventDefault();return}if(u.keyCode===a.escape){u.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(u.keyCode===a.up){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(u.keyCode===a.down){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(u.keyCode===a.left){u.preventDefault(),this.$switchLane("annotation");return}if(u.keyCode===a.right){u.preventDefault(),this.$switchLane("fold");return}if(u.keyCode===a.enter||u.keyCode===a.space){switch(u.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var i=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),u),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==i&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(i),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var s=this.lines.cells[this.activeRowIndex].element.childNodes[2],f=s.getBoundingClientRect(),p=this.annotationTooltip.getElement().style;p.left=f.right+"px",p.top=f.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},l.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},l.prototype.$isFoldWidgetVisible=function(u){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),s=this.$getFoldWidget(u).style.display!=="none";return i&&s},l.prototype.$isAnnotationVisible=function(u){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),s=this.$getAnnotation(u).style.display!=="none";return i&&s},l.prototype.$getFoldWidget=function(u){var i=this.lines.get(u),s=i.element;return s.childNodes[1]},l.prototype.$getAnnotation=function(u){var i=this.lines.get(u),s=i.element;return s.childNodes[2]},l.prototype.$findNearestFoldWidget=function(u){if(this.$isFoldWidgetVisible(u))return u;for(var i=0;u-i>0||u+i<this.lines.getLength()-1;){if(i++,u-i>=0&&this.$isFoldWidgetVisible(u-i))return u-i;if(u+i<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(u+i))return u+i}return null},l.prototype.$findNearestAnnotation=function(u){if(this.$isAnnotationVisible(u))return u;for(var i=0;u-i>0||u+i<this.lines.getLength()-1;){if(i++,u-i>=0&&this.$isAnnotationVisible(u-i))return u-i;if(u+i<=this.lines.getLength()-1&&this.$isAnnotationVisible(u+i))return u+i}return null},l.prototype.$focusFoldWidget=function(u){if(u!=null){var i=this.$getFoldWidget(u);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},l.prototype.$focusAnnotation=function(u){if(u!=null){var i=this.$getAnnotation(u);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},l.prototype.$blurFoldWidget=function(u){var i=this.$getFoldWidget(u);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},l.prototype.$blurAnnotation=function(u){var i=this.$getAnnotation(u);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},l.prototype.$moveFoldWidgetUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},l.prototype.$moveFoldWidgetDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},l.prototype.$moveAnnotationUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},l.prototype.$moveAnnotationDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},l.prototype.$switchLane=function(u){switch(u){case"annotation":if(this.activeLane==="annotation")break;var i=this.$findNearestAnnotation(this.activeRowIndex);if(i==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var s=this.$findNearestFoldWidget(this.activeRowIndex);if(s==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=s,this.$focusFoldWidget(this.activeRowIndex);break}},l.prototype.$rowIndexToRow=function(u){var i=this.lines.get(u);return i?i.row:null},l.prototype.$rowToRowIndex=function(u){for(var i=0;i<this.lines.getLength();i++){var s=this.lines.get(i);if(s.row==u)return i}return null},l}();t.GutterKeyboardHandler=o;var r=function(){function l(u,i){this.gutterKeyboardHandler=i,this.domEvent=u}return l.prototype.getKey=function(){return a.keyCodeToString(this.domEvent.keyCode)},l.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},l.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},l.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},l}();t.GutterKeyboardEvent=r});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var a=this&&this.__values||function(M){var S=typeof Symbol=="function"&&Symbol.iterator,x=S&&M[S],L=0;if(x)return x.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&L>=M.length&&(M=void 0),{value:M&&M[L++],done:!M}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},h=e("./lib/oop"),o=e("./lib/dom"),r=e("./lib/lang"),l=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,i=e("./mouse/mouse_handler").MouseHandler,s=e("./mouse/fold_handler").FoldHandler,f=e("./keyboard/keybinding").KeyBinding,p=e("./edit_session").EditSession,d=e("./search").Search,c=e("./range").Range,_=e("./lib/event_emitter").EventEmitter,m=e("./commands/command_manager").CommandManager,v=e("./commands/default_commands").commands,y=e("./config"),C=e("./token_iterator").TokenIterator,T=e("./line_widgets").LineWidgets,D=e("./keyboard/gutter_handler").GutterKeyboardHandler,g=e("./config").nls,w=e("./clipboard"),F=e("./lib/keys"),b=function(){function M(S,x,L){this.session,this.$toDestroy=[];var R=S.getContainerElement();this.container=R,this.renderer=S,this.id="editor"+ ++M.$uid,this.commands=new m(l.isMac?"mac":"win",v),typeof document=="object"&&(this.textInput=new u(S.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new i(this),new s(this)),this.keyBinding=new f(this),this.$search=new d().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=r.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(A,I){I._$emitInputEvent.schedule(31)}),this.setSession(x||L&&L.session||new p("")),y.resetOptions(this),L&&this.setOptions(L),y._signal("editor",this)}return M.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=r.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},M.prototype.startOperation=function(S){if(this.curOp){if(!S||this.curOp.command)return;this.prevOp=this.curOp}S||(this.previousCommand=null,S={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:S.command||{},args:S.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},M.prototype.endOperation=function(S){if(this.curOp&&this.session){if(S&&S.returnValue===!1||!this.session)return this.curOp=null;if(S==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var x=this.curOp.command,L=x&&x.scrollIntoView;if(L){switch(L){case"center-animate":L="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),A=this.renderer.layerConfig;(R.start.row>=A.lastRow||R.end.row<=A.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}L=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},M.prototype.$historyTracker=function(S){if(this.$mergeUndoDeltas){var x=this.prevOp,L=this.$mergeableCommands,R=x.command&&S.command.name==x.command.name;if(S.command.name=="insertstring"){var A=S.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(A)||/\s/.test(x.args)),this.mergeNextCommand=!0}else R=R&&L.indexOf(S.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:L.indexOf(S.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},M.prototype.setKeyboardHandler=function(S,x){if(S&&typeof S=="string"&&S!="ace"){this.$keybindingId=S;var L=this;y.loadModule(["keybinding",S],function(R){L.$keybindingId==S&&L.keyBinding.setKeyboardHandler(R&&R.handler),x&&x()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(S),x&&x()},M.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},M.prototype.setSession=function(S){if(this.session!=S){this.curOp&&this.endOperation(),this.curOp={};var x=this.session;if(x){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var L=this.session.getSelection();L.off("changeCursor",this.$onCursorChange),L.off("changeSelection",this.$onSelectionChange)}this.session=S,S?(this.$onDocumentChange=this.onDocumentChange.bind(this),S.on("change",this.$onDocumentChange),this.renderer.setSession(S),this.$onChangeMode=this.onChangeMode.bind(this),S.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),S.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),S.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),S.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),S.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),S.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=S.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(S)),this._signal("changeSession",{session:S,oldSession:x}),this.curOp=null,x&&x._signal("changeEditor",{oldEditor:this}),S&&S._signal("changeEditor",{editor:this}),S&&!S.destroyed&&S.bgTokenizer.scheduleStart()}},M.prototype.getSession=function(){return this.session},M.prototype.setValue=function(S,x){return this.session.doc.setValue(S),x?x==1?this.navigateFileEnd():x==-1&&this.navigateFileStart():this.selectAll(),S},M.prototype.getValue=function(){return this.session.getValue()},M.prototype.getSelection=function(){return this.selection},M.prototype.resize=function(S){this.renderer.onResize(S)},M.prototype.setTheme=function(S,x){this.renderer.setTheme(S,x)},M.prototype.getTheme=function(){return this.renderer.getTheme()},M.prototype.setStyle=function(S){this.renderer.setStyle(S)},M.prototype.unsetStyle=function(S){this.renderer.unsetStyle(S)},M.prototype.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container).fontSize},M.prototype.setFontSize=function(S){this.setOption("fontSize",S)},M.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var S=this;this.$highlightPending=!0,setTimeout(function(){S.$highlightPending=!1;var x=S.session;if(!(!x||x.destroyed)){x.$bracketHighlight&&(x.$bracketHighlight.markerIds.forEach(function(G){x.removeMarker(G)}),x.$bracketHighlight=null);var L=S.getCursorPosition(),R=S.getKeyboardHandler(),A=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(S),I=x.getMatchingBracketRanges(L,A);if(!I){var $=new C(x,L.row,L.column),H=$.getCurrentToken();if(H&&/\b(?:tag-open|tag-name)/.test(H.type)){var P=x.getMatchingTags(L);P&&(I=[P.openTagName,P.closeTagName])}}if(!I&&x.$mode.getMatching&&(I=x.$mode.getMatching(S.session)),!I){S.getHighlightIndentGuides()&&S.renderer.$textLayer.$highlightIndentGuide();return}var q="ace_bracket";Array.isArray(I)?I.length==1&&(q="ace_error_bracket"):I=[I],I.length==2&&(c.comparePoints(I[0].end,I[1].start)==0?I=[c.fromPoints(I[0].start,I[1].end)]:c.comparePoints(I[0].start,I[1].end)==0&&(I=[c.fromPoints(I[1].start,I[0].end)])),x.$bracketHighlight={ranges:I,markerIds:I.map(function(G){return x.addMarker(G,q,"text")})},S.getHighlightIndentGuides()&&S.renderer.$textLayer.$highlightIndentGuide()}},50)}},M.prototype.focus=function(){this.textInput.focus()},M.prototype.isFocused=function(){return this.textInput.isFocused()},M.prototype.blur=function(){this.textInput.blur()},M.prototype.onFocus=function(S){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",S))},M.prototype.onBlur=function(S){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",S))},M.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},M.prototype.onDocumentChange=function(S){var x=this.session.$useWrapMode,L=S.start.row==S.end.row?S.end.row:1/0;this.renderer.updateLines(S.start.row,L,x),this._signal("change",S),this.$cursorChange()},M.prototype.onTokenizerUpdate=function(S){var x=S.data;this.renderer.updateLines(x.first,x.last)},M.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},M.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},M.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},M.prototype.$updateHighlightActiveLine=function(){var S=this.getSession(),x;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(x=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(x=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(x=!1)),S.$highlightLineMarker&&!x)S.removeMarker(S.$highlightLineMarker.id),S.$highlightLineMarker=null;else if(!S.$highlightLineMarker&&x){var L=new c(x.row,x.column,x.row,1/0);L.id=S.addMarker(L,"ace_active-line","screenLine"),S.$highlightLineMarker=L}else x&&(S.$highlightLineMarker.start.row=x.row,S.$highlightLineMarker.end.row=x.row,S.$highlightLineMarker.start.column=x.column,S._signal("changeBackMarker"))},M.prototype.onSelectionChange=function(S){var x=this.session;if(x.$selectionMarker&&x.removeMarker(x.$selectionMarker),x.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var L=this.selection.getRange(),R=this.getSelectionStyle();x.$selectionMarker=x.addMarker(L,"ace_selection",R)}var A=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(A),this._signal("changeSelection")},M.prototype.$getSelectionHighLightRegexp=function(){var S=this.session,x=this.getSelectionRange();if(!(x.isEmpty()||x.isMultiLine())){var L=x.start.column,R=x.end.column,A=S.getLine(x.start.row),I=A.substring(L,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var $=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),H=A.substring(L-1,R+1);if($.test(H))return $}}},M.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},M.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},M.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},M.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},M.prototype.onChangeMode=function(S){this.renderer.updateText(),this._emit("changeMode",S)},M.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},M.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},M.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},M.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},M.prototype.getCopyText=function(){var S=this.getSelectedText(),x=this.session.doc.getNewLineCharacter(),L=!1;if(!S&&this.$copyWithEmptySelection){L=!0;for(var R=this.selection.getAllRanges(),A=0;A<R.length;A++){var I=R[A];A&&R[A-1].start.row==I.start.row||(S+=this.session.getLine(I.start.row)+x)}}var $={text:S};return this._signal("copy",$),w.lineMode=L?$.text:!1,$.text},M.prototype.onCopy=function(){this.commands.exec("copy",this)},M.prototype.onCut=function(){this.commands.exec("cut",this)},M.prototype.onPaste=function(S,x){var L={text:S,event:x};this.commands.exec("paste",this,L)},M.prototype.$handlePaste=function(S){typeof S=="string"&&(S={text:S}),this._signal("paste",S);var x=S.text,L=x===w.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)L?R.insert({row:this.selection.lead.row,column:0},x):this.insert(x);else if(L)this.selection.rangeList.ranges.forEach(function(q){R.insert({row:q.start.row,column:0},x)});else{var A=x.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,$=A.length==2&&(!A[0]||!A[1]);if(A.length!=I.length||$)return this.commands.exec("insertstring",this,x);for(var H=I.length;H--;){var P=I[H];P.isEmpty()||R.remove(P),R.insert(P.start,A[H])}}},M.prototype.execCommand=function(S,x){return this.commands.exec(S,this,x)},M.prototype.insert=function(S,x){var L=this.session,R=L.getMode(),A=this.getCursorPosition();if(this.getBehavioursEnabled()&&!x){var I=R.transformAction(L.getState(A.row),"insertion",this,L,S);I&&(S!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),S=I.text)}if(S=="	"&&(S=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&S.indexOf(`
`)==-1){var $=c.fromPoints(A,A);$.end.column+=S.length,this.session.remove($)}}else{var $=this.getSelectionRange();A=this.session.remove($),this.clearSelection()}if(S==`
`||S==`\r
`){var G=L.getLine(A.row);if(A.column>G.search(/\S|$/)){var H=G.substr(A.column).search(/\S|$/);L.doc.removeInLine(A.row,A.column,A.column+H)}}this.clearSelection();var P=A.column,q=L.getState(A.row),G=L.getLine(A.row),B=R.checkOutdent(q,G,S);if(L.insert(A,S),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new c(A.row,P+I.selection[0],A.row,P+I.selection[1])):this.selection.setSelectionRange(new c(A.row+I.selection[0],I.selection[1],A.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(L.getDocument().isNewLine(S)){var Q=R.getNextLineIndent(q,G.slice(0,A.column),L.getTabString());L.insert({row:A.row+1,column:0},Q)}B&&R.autoOutdent(q,L,A.row)}},M.prototype.autoIndent=function(){var S=this.session,x=S.getMode(),L,R;if(this.selection.isEmpty())L=0,R=S.doc.getLength()-1;else{var A=this.getSelectionRange();L=A.start.row,R=A.end.row}for(var I="",$="",H="",P,q,G,B=S.getTabString(),Q=L;Q<=R;Q++)Q>0&&(I=S.getState(Q-1),$=S.getLine(Q-1),H=x.getNextLineIndent(I,$,B)),P=S.getLine(Q),q=x.$getIndent(P),H!==q&&(q.length>0&&(G=new c(Q,0,Q,q.length),S.remove(G)),H.length>0&&S.insert({row:Q,column:0},H)),x.autoOutdent(I,S,Q)},M.prototype.onTextInput=function(S,x){if(!x)return this.keyBinding.onTextInput(S);this.startOperation({command:{name:"insertstring"}});var L=this.applyComposition.bind(this,S,x);this.selection.rangeCount?this.forEachSelection(L):L(),this.endOperation()},M.prototype.applyComposition=function(S,x){if(x.extendLeft||x.extendRight){var L=this.selection.getRange();L.start.column-=x.extendLeft,L.end.column+=x.extendRight,L.start.column<0&&(L.start.row--,L.start.column+=this.session.getLine(L.start.row).length+1),this.selection.setRange(L),!S&&!L.isEmpty()&&this.remove()}if((S||!this.selection.isEmpty())&&this.insert(S,!0),x.restoreStart||x.restoreEnd){var L=this.selection.getRange();L.start.column-=x.restoreStart,L.end.column-=x.restoreEnd,this.selection.setRange(L)}},M.prototype.onCommandKey=function(S,x,L){return this.keyBinding.onCommandKey(S,x,L)},M.prototype.setOverwrite=function(S){this.session.setOverwrite(S)},M.prototype.getOverwrite=function(){return this.session.getOverwrite()},M.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},M.prototype.setScrollSpeed=function(S){this.setOption("scrollSpeed",S)},M.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},M.prototype.setDragDelay=function(S){this.setOption("dragDelay",S)},M.prototype.getDragDelay=function(){return this.getOption("dragDelay")},M.prototype.setSelectionStyle=function(S){this.setOption("selectionStyle",S)},M.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},M.prototype.setHighlightActiveLine=function(S){this.setOption("highlightActiveLine",S)},M.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},M.prototype.setHighlightGutterLine=function(S){this.setOption("highlightGutterLine",S)},M.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},M.prototype.setHighlightSelectedWord=function(S){this.setOption("highlightSelectedWord",S)},M.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},M.prototype.setAnimatedScroll=function(S){this.renderer.setAnimatedScroll(S)},M.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},M.prototype.setShowInvisibles=function(S){this.renderer.setShowInvisibles(S)},M.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},M.prototype.setDisplayIndentGuides=function(S){this.renderer.setDisplayIndentGuides(S)},M.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},M.prototype.setHighlightIndentGuides=function(S){this.renderer.setHighlightIndentGuides(S)},M.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},M.prototype.setShowPrintMargin=function(S){this.renderer.setShowPrintMargin(S)},M.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},M.prototype.setPrintMarginColumn=function(S){this.renderer.setPrintMarginColumn(S)},M.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},M.prototype.setReadOnly=function(S){this.setOption("readOnly",S)},M.prototype.getReadOnly=function(){return this.getOption("readOnly")},M.prototype.setBehavioursEnabled=function(S){this.setOption("behavioursEnabled",S)},M.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},M.prototype.setWrapBehavioursEnabled=function(S){this.setOption("wrapBehavioursEnabled",S)},M.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},M.prototype.setShowFoldWidgets=function(S){this.setOption("showFoldWidgets",S)},M.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},M.prototype.setFadeFoldWidgets=function(S){this.setOption("fadeFoldWidgets",S)},M.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},M.prototype.remove=function(S){this.selection.isEmpty()&&(S=="left"?this.selection.selectLeft():this.selection.selectRight());var x=this.getSelectionRange();if(this.getBehavioursEnabled()){var L=this.session,R=L.getState(x.start.row),A=L.getMode().transformAction(R,"deletion",this,L,x);if(x.end.column===0){var I=L.getTextRange(x);if(I[I.length-1]==`
`){var $=L.getLine(x.end.row);/^\s+$/.test($)&&(x.end.column=$.length)}}A&&(x=A)}this.session.remove(x),this.clearSelection()},M.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var S=this.getSelectionRange();S.start.column==S.end.column&&S.start.row==S.end.row&&(S.end.column=0,S.end.row++),this.session.remove(S),this.clearSelection()},M.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var S=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(S)},M.prototype.setGhostText=function(S,x){this.session.widgetManager||(this.session.widgetManager=new T(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(S,x)},M.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},M.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var S=this.getCursorPosition(),x=S.column;if(x!==0){var L=this.session.getLine(S.row),R,A;x<L.length?(R=L.charAt(x)+L.charAt(x-1),A=new c(S.row,x-1,S.row,x+1)):(R=L.charAt(x-1)+L.charAt(x-2),A=new c(S.row,x-2,S.row,x)),this.session.replace(A,R),this.session.selection.moveToPosition(A.end)}}},M.prototype.toLowerCase=function(){var S=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var x=this.getSelectionRange(),L=this.session.getTextRange(x);this.session.replace(x,L.toLowerCase()),this.selection.setSelectionRange(S)},M.prototype.toUpperCase=function(){var S=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var x=this.getSelectionRange(),L=this.session.getTextRange(x);this.session.replace(x,L.toUpperCase()),this.selection.setSelectionRange(S)},M.prototype.indent=function(){var S=this.session,x=this.getSelectionRange();if(x.start.row<x.end.row){var L=this.$getSelectedRows();S.indentRows(L.first,L.last,"	");return}else if(x.start.column<x.end.column){var R=S.getTextRange(x);if(!/^\s+$/.test(R)){var L=this.$getSelectedRows();S.indentRows(L.first,L.last,"	");return}}var A=S.getLine(x.start.row),I=x.start,$=S.getTabSize(),H=S.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var P=$-H%$,q=r.stringRepeat(" ",P);else{for(var P=H%$;A[x.start.column-1]==" "&&P;)x.start.column--,P--;this.selection.setSelectionRange(x),q="	"}return this.insert(q)},M.prototype.blockIndent=function(){var S=this.$getSelectedRows();this.session.indentRows(S.first,S.last,"	")},M.prototype.blockOutdent=function(){var S=this.session.getSelection();this.session.outdentRows(S.getRange())},M.prototype.sortLines=function(){for(var S=this.$getSelectedRows(),x=this.session,L=[],R=S.first;R<=S.last;R++)L.push(x.getLine(R));L.sort(function($,H){return $.toLowerCase()<H.toLowerCase()?-1:$.toLowerCase()>H.toLowerCase()?1:0});for(var A=new c(0,0,0,0),R=S.first;R<=S.last;R++){var I=x.getLine(R);A.start.row=R,A.end.row=R,A.end.column=I.length,x.replace(A,L[R-S.first])}},M.prototype.toggleCommentLines=function(){var S=this.session.getState(this.getCursorPosition().row),x=this.$getSelectedRows();this.session.getMode().toggleCommentLines(S,this.session,x.first,x.last)},M.prototype.toggleBlockComment=function(){var S=this.getCursorPosition(),x=this.session.getState(S.row),L=this.getSelectionRange();this.session.getMode().toggleBlockComment(x,this.session,L,S)},M.prototype.getNumberAt=function(S,x){var L=/[\-]?[0-9]+(?:\.[0-9]+)?/g;L.lastIndex=0;for(var R=this.session.getLine(S);L.lastIndex<x;){var A=L.exec(R);if(A.index<=x&&A.index+A[0].length>=x){var I={value:A[0],start:A.index,end:A.index+A[0].length};return I}}return null},M.prototype.modifyNumber=function(S){var x=this.selection.getCursor().row,L=this.selection.getCursor().column,R=new c(x,L-1,x,L),A=this.session.getTextRange(R);if(!isNaN(parseFloat(A))&&isFinite(A)){var I=this.getNumberAt(x,L);if(I){var $=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,H=I.start+I.value.length-$,P=parseFloat(I.value);P*=Math.pow(10,H),$!==I.end&&L<$?S*=Math.pow(10,I.end-L-1):S*=Math.pow(10,I.end-L),P+=S,P/=Math.pow(10,H);var q=P.toFixed(H),G=new c(x,I.start,x,I.end);this.session.replace(G,q),this.moveCursorTo(x,Math.max(I.start+1,L+q.length-I.value.length))}}else this.toggleWord()},M.prototype.toggleWord=function(){var S=this.selection.getCursor().row,x=this.selection.getCursor().column;this.selection.selectWord();var L=this.getSelectedText(),R=this.selection.getWordRange().start.column,A=L.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=x-R-1;I<0&&(I=0);var $=0,H=0,P=this;L.match(/[A-Za-z0-9_]+/)&&A.forEach(function(te,j){H=$+te.length,I>=$&&I<=H&&(L=te,P.selection.clearSelection(),P.moveCursorTo(S,$+R),P.selection.selectTo(S,H+R)),$=H});for(var q=this.$toggleWordPairs,G,B=0;B<q.length;B++)for(var Q=q[B],O=0;O<=1;O++){var W=+!O,U=L.match(new RegExp("^\\s?_?("+r.escapeRegExp(Q[O])+")\\s?$","i"));if(U){var k=L.match(new RegExp("([_]|^|\\s)("+r.escapeRegExp(U[1])+")($|\\s)","g"));k&&(G=L.replace(new RegExp(r.escapeRegExp(Q[O]),"i"),function(te){var j=Q[W];return te.toUpperCase()==te?j=j.toUpperCase():te.charAt(0).toUpperCase()==te.charAt(0)&&(j=j.substr(0,0)+Q[W].charAt(0).toUpperCase()+j.substr(1)),j}),this.insert(G),G="")}}},M.prototype.findLinkAt=function(S,x){var L,R,A=this.session.getLine(S),I=A.split(/((?:https?|ftp):\/\/[\S]+)/),$=x;$<0&&($=0);var H=0,P=0,q;try{for(var G=a(I),B=G.next();!B.done;B=G.next()){var Q=B.value;if(P=H+Q.length,$>=H&&$<=P&&Q.match(/((?:https?|ftp):\/\/[\S]+)/)){q=Q.replace(/[\s:.,'";}\]]+$/,"");break}H=P}}catch(O){L={error:O}}finally{try{B&&!B.done&&(R=G.return)&&R.call(G)}finally{if(L)throw L.error}}return q},M.prototype.openLink=function(){var S=this.selection.getCursor(),x=this.findLinkAt(S.row,S.column);return x&&window.open(x,"_blank"),x!=null},M.prototype.removeLines=function(){var S=this.$getSelectedRows();this.session.removeFullLines(S.first,S.last),this.clearSelection()},M.prototype.duplicateSelection=function(){var S=this.selection,x=this.session,L=S.getRange(),R=S.isBackwards();if(L.isEmpty()){var A=L.start.row;x.duplicateLines(A,A)}else{var I=R?L.start:L.end,$=x.insert(I,x.getTextRange(L));L.start=I,L.end=$,S.setSelectionRange(L,R)}},M.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},M.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},M.prototype.moveText=function(S,x,L){return this.session.moveText(S,x,L)},M.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},M.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},M.prototype.$moveLines=function(S,x){var L,R,A=this.selection;if(!A.inMultiSelectMode||this.inVirtualSelectionMode){var I=A.toOrientedRange();L=this.$getSelectedRows(I),R=this.session.$moveLines(L.first,L.last,x?0:S),x&&S==-1&&(R=0),I.moveBy(R,0),A.fromOrientedRange(I)}else{var $=A.rangeList.ranges;A.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var H=0,P=0,q=$.length,G=0;G<q;G++){var B=G;$[G].moveBy(H,0),L=this.$getSelectedRows($[G]);for(var Q=L.first,O=L.last;++G<q;){P&&$[G].moveBy(P,0);var W=this.$getSelectedRows($[G]);if(x&&W.first!=O)break;if(!x&&W.first>O+1)break;O=W.last}for(G--,H=this.session.$moveLines(Q,O,x?0:S),x&&S==-1&&(B=G+1);B<=G;)$[B].moveBy(H,0),B++;x||(H=0),P+=H}A.fromOrientedRange(A.ranges[0]),A.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},M.prototype.$getSelectedRows=function(S){return S=(S||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(S.start.row),last:this.session.getRowFoldEnd(S.end.row)}},M.prototype.onCompositionStart=function(S){this.renderer.showComposition(S)},M.prototype.onCompositionUpdate=function(S){this.renderer.setCompositionText(S)},M.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},M.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},M.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},M.prototype.isRowVisible=function(S){return S>=this.getFirstVisibleRow()&&S<=this.getLastVisibleRow()},M.prototype.isRowFullyVisible=function(S){return S>=this.renderer.getFirstFullyVisibleRow()&&S<=this.renderer.getLastFullyVisibleRow()},M.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},M.prototype.$moveByPage=function(S,x){var L=this.renderer,R=this.renderer.layerConfig,A=S*Math.floor(R.height/R.lineHeight);x===!0?this.selection.$moveSelection(function(){this.moveCursorBy(A,0)}):x===!1&&(this.selection.moveCursorBy(A,0),this.selection.clearSelection());var I=L.scrollTop;L.scrollBy(0,A*R.lineHeight),x!=null&&L.scrollCursorIntoView(null,.5),L.animateScrolling(I)},M.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},M.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},M.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},M.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},M.prototype.scrollPageDown=function(){this.$moveByPage(1)},M.prototype.scrollPageUp=function(){this.$moveByPage(-1)},M.prototype.scrollToRow=function(S){this.renderer.scrollToRow(S)},M.prototype.scrollToLine=function(S,x,L,R){this.renderer.scrollToLine(S,x,L,R)},M.prototype.centerSelection=function(){var S=this.getSelectionRange(),x={row:Math.floor(S.start.row+(S.end.row-S.start.row)/2),column:Math.floor(S.start.column+(S.end.column-S.start.column)/2)};this.renderer.alignCursor(x,.5)},M.prototype.getCursorPosition=function(){return this.selection.getCursor()},M.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},M.prototype.getSelectionRange=function(){return this.selection.getRange()},M.prototype.selectAll=function(){this.selection.selectAll()},M.prototype.clearSelection=function(){this.selection.clearSelection()},M.prototype.moveCursorTo=function(S,x){this.selection.moveCursorTo(S,x)},M.prototype.moveCursorToPosition=function(S){this.selection.moveCursorToPosition(S)},M.prototype.jumpToMatching=function(S,x){var L=this.getCursorPosition(),R=new C(this.session,L.row,L.column),A=R.getCurrentToken(),I=0;A&&A.type.indexOf("tag-name")!==-1&&(A=R.stepBackward());var $=A||R.stepForward();if($){var H,P=!1,q={},G=L.column-$.start,B,Q={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if($.value.match(/[{}()\[\]]/g)){for(;G<$.value.length&&!P;G++)if(Q[$.value[G]])switch(B=Q[$.value[G]]+"."+$.type.replace("rparen","lparen"),isNaN(q[B])&&(q[B]=0),$.value[G]){case"(":case"[":case"{":q[B]++;break;case")":case"]":case"}":q[B]--,q[B]===-1&&(H="bracket",P=!0);break}}else $.type.indexOf("tag-name")!==-1&&(isNaN(q[$.value])&&(q[$.value]=0),A.value==="<"&&I>1?q[$.value]++:A.value==="</"&&q[$.value]--,q[$.value]===-1&&(H="tag",P=!0));P||(A=$,I++,$=R.stepForward(),G=0)}while($&&!P);if(H){var O,W;if(H==="bracket")O=this.session.getBracketRange(L),O||(O=new c(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+G-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+G-1),W=O.start,(x||W.row===L.row&&Math.abs(W.column-L.column)<2)&&(O=this.session.getBracketRange(W)));else if(H==="tag"){if(!$||$.type.indexOf("tag-name")===-1)return;if(O=new c(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),O.compare(L.row,L.column)===0){var U=this.session.getMatchingTags(L);U&&(U.openTag.contains(L.row,L.column)?(O=U.closeTag,W=O.start):(O=U.openTag,U.closeTag.start.row===L.row&&U.closeTag.start.column===L.column?W=O.end:W=O.start))}W=W||O.start}W=O&&O.cursor||W,W&&(S?O&&x?this.selection.setRange(O):O&&O.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(W.row,W.column):this.selection.moveTo(W.row,W.column))}}},M.prototype.gotoLine=function(S,x,L){this.selection.clearSelection(),this.session.unfold({row:S-1,column:x||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(S-1,x||0),this.isRowFullyVisible(S-1)||this.scrollToLine(S-1,!0,L)},M.prototype.navigateTo=function(S,x){this.selection.moveTo(S,x)},M.prototype.navigateUp=function(S){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var x=this.selection.anchor.getPosition();return this.moveCursorToPosition(x)}this.selection.clearSelection(),this.selection.moveCursorBy(-S||-1,0)},M.prototype.navigateDown=function(S){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var x=this.selection.anchor.getPosition();return this.moveCursorToPosition(x)}this.selection.clearSelection(),this.selection.moveCursorBy(S||1,0)},M.prototype.navigateLeft=function(S){if(this.selection.isEmpty())for(S=S||1;S--;)this.selection.moveCursorLeft();else{var x=this.getSelectionRange().start;this.moveCursorToPosition(x)}this.clearSelection()},M.prototype.navigateRight=function(S){if(this.selection.isEmpty())for(S=S||1;S--;)this.selection.moveCursorRight();else{var x=this.getSelectionRange().end;this.moveCursorToPosition(x)}this.clearSelection()},M.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},M.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},M.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},M.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},M.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},M.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},M.prototype.replace=function(S,x){x&&this.$search.set(x);var L=this.$search.find(this.session),R=0;return L&&(this.$tryReplace(L,S)&&(R=1),this.selection.setSelectionRange(L),this.renderer.scrollSelectionIntoView(L.start,L.end)),R},M.prototype.replaceAll=function(S,x){x&&this.$search.set(x);var L=this.$search.findAll(this.session),R=0;if(!L.length)return R;var A=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=L.length-1;I>=0;--I)this.$tryReplace(L[I],S)&&R++;return this.selection.setSelectionRange(A),R},M.prototype.$tryReplace=function(S,x){var L=this.session.getTextRange(S);return x=this.$search.replace(L,x),x!==null?(S.end=this.session.replace(S,x),S):null},M.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},M.prototype.find=function(S,x,L){x||(x={}),typeof S=="string"||S instanceof RegExp?x.needle=S:typeof S=="object"&&h.mixin(x,S);var R=this.selection.getRange();x.needle==null&&(S=this.session.getTextRange(R)||this.$search.$options.needle,S||(R=this.session.getWordRange(R.start.row,R.start.column),S=this.session.getTextRange(R)),this.$search.set({needle:S})),this.$search.set(x),x.start||this.$search.set({start:R});var A=this.$search.find(this.session);if(x.preventScroll)return A;if(A)return this.revealRange(A,L),A;x.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},M.prototype.findNext=function(S,x){this.find({skipCurrent:!0,backwards:!1},S,x)},M.prototype.findPrevious=function(S,x){this.find(S,{skipCurrent:!0,backwards:!0},x)},M.prototype.revealRange=function(S,x){this.session.unfold(S),this.selection.setSelectionRange(S);var L=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(S.start,S.end,.5),x!==!1&&this.renderer.animateScrolling(L)},M.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(S){S.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},M.prototype.setAutoScrollEditorIntoView=function(S){if(S){var x,L=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var A=this.$scrollAnchor;A.style.cssText="position:absolute",this.container.insertBefore(A,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),$=this.renderer.on("beforeRender",function(){R&&(x=L.renderer.container.getBoundingClientRect())}),H=this.renderer.on("afterRender",function(){if(R&&x&&(L.isFocused()||L.searchBox&&L.searchBox.isFocused())){var P=L.renderer,q=P.$cursorLayer.$pixelPos,G=P.layerConfig,B=q.top-G.offset;q.top>=0&&B+x.top<0?R=!0:q.top<G.height&&q.top+x.top+G.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(A.style.top=B+"px",A.style.left=q.left+"px",A.style.height=G.lineHeight+"px",A.scrollIntoView(R)),R=x=null}});this.setAutoScrollEditorIntoView=function(P){P||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",H),this.renderer.off("beforeRender",$))}}},M.prototype.$resetCursorStyle=function(){var S=this.$cursorStyle||"ace",x=this.renderer.$cursorLayer;x&&(x.setSmoothBlinking(/smooth/.test(S)),x.isBlinking=!this.$readOnly&&S!="wide",o.setCssClass(x.element,"ace_slim-cursors",/slim/.test(S)))},M.prototype.prompt=function(S,x,L){var R=this;y.loadModule("ace/ext/prompt",function(A){A.prompt(R,S,x,L)})},M}();b.$uid=0,b.prototype.curOp=null,b.prototype.prevOp={},b.prototype.$mergeableCommands=["backspace","del","insertstring"],b.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],h.implement(b.prototype,_),y.defineOptions(b.prototype,"editor",{selectionStyle:{set:function(M){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:M})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(M){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(M){this.textInput.setReadOnly(M),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(M){this.textInput.setCopyWithEmptySelection(M)},initialValue:!1},cursorStyle:{set:function(M){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(M){this.setAutoScrollEditorIntoView(M)}},keyboardHandler:{set:function(M){this.setKeyboardHandler(M)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(M){this.session.setValue(M)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(M){this.setSession(M)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(M){this.renderer.$gutterLayer.setShowLineNumbers(M),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),M&&this.$relativeLineNumbers?E.attach(this):E.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(M){this.$showLineNumbers&&M?E.attach(this):E.detach(this)}},placeholder:{set:function(M){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var S=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(S&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),o.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!S&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),o.addCssClass(this.container,"ace_hasPlaceholder");var x=o.createElement("div");x.className="ace_placeholder",x.textContent=this.$placeholder||"",this.renderer.placeholderNode=x,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!S&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(M){var S={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},x=function(R){if(R.target==this.renderer.scroller&&R.keyCode===F.enter){R.preventDefault();var A=this.getCursorPosition().row;this.isRowVisible(A)||this.scrollToLine(A,!0,!0),this.focus()}},L;M?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(l.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",g("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",g("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",x.bind(this)),this.commands.addCommand(S),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",g("editor")),this.renderer.$gutter.setAttribute("aria-label",g("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),L||(L=new D(this)),L.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",x.bind(this)),this.commands.removeCommand(S),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),L&&L.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var E={getText:function(M,S){return(Math.abs(M.selection.lead.row-S)||S+1+(S<9?"\xB7":""))+""},getWidth:function(M,S,x){return Math.max(S.toString().length,(x.lastRow+1).toString().length,2)*x.characterWidth},update:function(M,S){S.renderer.$loop.schedule(S.renderer.CHANGE_GUTTER)},attach:function(M){M.renderer.$gutterLayer.$renderer=this,M.on("changeSelection",this.update),this.update(null,M)},detach:function(M){M.renderer.$gutterLayer.$renderer==this&&(M.renderer.$gutterLayer.$renderer=null),M.off("changeSelection",this.update),this.update(null,M)}};t.Editor=b});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=function(){function o(r,l){this.element=r,this.canvasHeight=l||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return o.prototype.moveContainer=function(r){a.translate(this.element,0,-(r.firstRowScreen*r.lineHeight%this.canvasHeight)-r.offset*this.$offsetCoefficient)},o.prototype.pageChanged=function(r,l){return Math.floor(r.firstRowScreen*r.lineHeight/this.canvasHeight)!==Math.floor(l.firstRowScreen*l.lineHeight/this.canvasHeight)},o.prototype.computeLineTop=function(r,l,u){var i=l.firstRowScreen*l.lineHeight,s=Math.floor(i/this.canvasHeight),f=u.documentToScreenRow(r,0)*l.lineHeight;return f-s*this.canvasHeight},o.prototype.computeLineHeight=function(r,l,u){return l.lineHeight*u.getRowLineCount(r)},o.prototype.getLength=function(){return this.cells.length},o.prototype.get=function(r){return this.cells[r]},o.prototype.shift=function(){this.$cacheCell(this.cells.shift())},o.prototype.pop=function(){this.$cacheCell(this.cells.pop())},o.prototype.push=function(r){if(Array.isArray(r)){this.cells.push.apply(this.cells,r);for(var l=a.createFragment(this.element),u=0;u<r.length;u++)l.appendChild(r[u].element);this.element.appendChild(l)}else this.cells.push(r),this.element.appendChild(r.element)},o.prototype.unshift=function(r){if(Array.isArray(r)){this.cells.unshift.apply(this.cells,r);for(var l=a.createFragment(this.element),u=0;u<r.length;u++)l.appendChild(r[u].element);this.element.firstChild?this.element.insertBefore(l,this.element.firstChild):this.element.appendChild(l)}else this.cells.unshift(r),this.element.insertAdjacentElement("afterbegin",r.element)},o.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},o.prototype.$cacheCell=function(r){r&&(r.element.remove(),this.cellCache.push(r))},o.prototype.createCell=function(r,l,u,i){var s=this.cellCache.pop();if(!s){var f=a.createElement("div");i&&i(f),this.element.appendChild(f),s={element:f,text:"",row:r}}return s.row=r,s},o}();t.Lines=h});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=e("../lib/oop"),o=e("../lib/lang"),r=e("../lib/event_emitter").EventEmitter,l=e("./lines").Lines,u=e("../config").nls,i=function(){function f(p){this.element=a.createElement("div"),this.element.className="ace_layer ace_gutter-layer",p.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new l(this.element),this.$lines.$offsetCoefficient=1}return f.prototype.setSession=function(p){this.session&&this.session.off("change",this.$updateAnnotations),this.session=p,p&&p.on("change",this.$updateAnnotations)},f.prototype.addGutterDecoration=function(p,d){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(p,d)},f.prototype.removeGutterDecoration=function(p,d){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(p,d)},f.prototype.setAnnotations=function(p){this.$annotations=[];for(var d=0;d<p.length;d++){var c=p[d],_=c.row,m=this.$annotations[_];m||(m=this.$annotations[_]={text:[],type:[]});var v=c.text,y=c.type;v=v?o.escapeHTML(v):c.html||"",m.text.indexOf(v)===-1&&(m.text.push(v),m.type.push(y));var C=c.className;C?m.className=C:y=="error"?m.className=" ace_error":y=="warning"&&m.className!=" ace_error"?m.className=" ace_warning":y=="info"&&!m.className&&(m.className=" ace_info")}},f.prototype.$updateAnnotations=function(p){if(this.$annotations.length){var d=p.start.row,c=p.end.row-d;if(c!==0)if(p.action=="remove")this.$annotations.splice(d,c+1,null);else{var _=new Array(c+1);_.unshift(d,1),this.$annotations.splice.apply(this.$annotations,_)}}},f.prototype.update=function(p){this.config=p;var d=this.session,c=p.firstRow,_=Math.min(p.lastRow+p.gutterOffset,d.getLength()-1);this.oldLastRow=_,this.config=p,this.$lines.moveContainer(p),this.$updateCursorRow();for(var m=d.getNextFoldLine(c),v=m?m.start.row:1/0,y=null,C=-1,T=c;;){if(T>v&&(T=m.end.row+1,m=d.getNextFoldLine(T,m),v=m?m.start.row:1/0),T>_){for(;this.$lines.getLength()>C+1;)this.$lines.pop();break}y=this.$lines.get(++C),y?y.row=T:(y=this.$lines.createCell(T,p,this.session,s),this.$lines.push(y)),this.$renderCell(y,p,m,T),T++}this._signal("afterRender"),this.$updateGutterWidth(p)},f.prototype.$updateGutterWidth=function(p){var d=this.session,c=d.gutterRenderer||this.$renderer,_=d.$firstLineNumber,m=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||d.$useWrapMode)&&(m=d.getLength()+_-1);var v=c?c.getWidth(d,m,p):m.toString().length*p.characterWidth,y=this.$padding||this.$computePadding();v+=y.left+y.right,v!==this.gutterWidth&&!isNaN(v)&&(this.gutterWidth=v,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",v))},f.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var p=this.session.selection.getCursor();this.$cursorRow!==p.row&&(this.$cursorRow=p.row)}},f.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var p=this.session.selection.cursor.row;if(this.$cursorRow=p,!(this.$cursorCell&&this.$cursorCell.row==p)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var d=this.$lines.cells;this.$cursorCell=null;for(var c=0;c<d.length;c++){var _=d[c];if(_.row>=this.$cursorRow){if(_.row>this.$cursorRow){var m=this.session.getFoldLine(this.$cursorRow);if(c>0&&m&&m.start.row==d[c-1].row)_=d[c-1];else break}_.element.className="ace_gutter-active-line "+_.element.className,this.$cursorCell=_;break}}}}},f.prototype.scrollLines=function(p){var d=this.config;if(this.config=p,this.$updateCursorRow(),this.$lines.pageChanged(d,p))return this.update(p);this.$lines.moveContainer(p);var c=Math.min(p.lastRow+p.gutterOffset,this.session.getLength()-1),_=this.oldLastRow;if(this.oldLastRow=c,!d||_<p.firstRow)return this.update(p);if(c<d.firstRow)return this.update(p);if(d.firstRow<p.firstRow)for(var m=this.session.getFoldedRowCount(d.firstRow,p.firstRow-1);m>0;m--)this.$lines.shift();if(_>c)for(var m=this.session.getFoldedRowCount(c+1,_);m>0;m--)this.$lines.pop();p.firstRow<d.firstRow&&this.$lines.unshift(this.$renderLines(p,p.firstRow,d.firstRow-1)),c>_&&this.$lines.push(this.$renderLines(p,_+1,c)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(p)},f.prototype.$renderLines=function(p,d,c){for(var _=[],m=d,v=this.session.getNextFoldLine(m),y=v?v.start.row:1/0;m>y&&(m=v.end.row+1,v=this.session.getNextFoldLine(m,v),y=v?v.start.row:1/0),!(m>c);){var C=this.$lines.createCell(m,p,this.session,s);this.$renderCell(C,p,v,m),_.push(C),m++}return _},f.prototype.$renderCell=function(p,d,c,_){var m=p.element,v=this.session,y=m.childNodes[0],C=m.childNodes[1],T=m.childNodes[2],D=T.firstChild,g=v.$firstLineNumber,w=v.$breakpoints,F=v.$decorations,b=v.gutterRenderer||this.$renderer,E=this.$showFoldWidgets&&v.foldWidgets,M=c?c.start.row:Number.MAX_VALUE,S=d.lineHeight+"px",x=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",L=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(b?b.getText(v,_):_+g).toString();if(this.$highlightGutterLine&&(_==this.$cursorRow||c&&_<this.$cursorRow&&_>=M&&this.$cursorRow<=c.end.row)&&(x+="ace_gutter-active-line ",this.$cursorCell!=p&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=p)),w[_]&&(x+=w[_]),F[_]&&(x+=F[_]),this.$annotations[_]&&_!==M&&(x+=this.$annotations[_].className),E){var A=E[_];A==null&&(A=E[_]=v.getFoldWidget(_))}if(A){var I="ace_fold-widget ace_"+A,$=A=="start"&&_==M&&_<c.end.row;if($){I+=" ace_closed";for(var H="",P=!1,q=_+1;q<=c.end.row;q++)if(this.$annotations[q]){if(this.$annotations[q].className===" ace_error"){P=!0,H=" ace_error_fold";break}if(this.$annotations[q].className===" ace_warning"){P=!0,H=" ace_warning_fold";continue}}x+=H}else I+=" ace_open";C.className!=I&&(C.className=I),a.setStyle(C.style,"height",S),a.setStyle(C.style,"display","inline-block"),C.setAttribute("role","button"),C.setAttribute("tabindex","-1");var G=v.getFoldWidgetRange(_);G?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[G.start.row+1,G.end.row+1])):c?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[c.start.row+1,c.end.row+1])):C.setAttribute("aria-label",u("Toggle code folding, row $0",[_+1])),$?(C.setAttribute("aria-expanded","false"),C.setAttribute("title",u("Unfold code"))):(C.setAttribute("aria-expanded","true"),C.setAttribute("title",u("Fold code")))}else C&&(a.setStyle(C.style,"display","none"),C.setAttribute("tabindex","0"),C.removeAttribute("role"),C.removeAttribute("aria-label"));return P&&this.$showFoldedAnnotations?(T.className="ace_gutter_annotation",D.className=L,D.className+=H,a.setStyle(D.style,"height",S),a.setStyle(T.style,"display","block"),a.setStyle(T.style,"height",S),T.setAttribute("aria-label",u("Read annotations row $0",[R])),T.setAttribute("tabindex","-1"),T.setAttribute("role","button")):this.$annotations[_]?(T.className="ace_gutter_annotation",D.className=L,this.$useSvgGutterIcons?D.className+=this.$annotations[_].className:m.classList.add(this.$annotations[_].className.replace(" ","")),a.setStyle(D.style,"height",S),a.setStyle(T.style,"display","block"),a.setStyle(T.style,"height",S),T.setAttribute("aria-label",u("Read annotations row $0",[R])),T.setAttribute("tabindex","-1"),T.setAttribute("role","button")):(a.setStyle(T.style,"display","none"),T.removeAttribute("aria-label"),T.removeAttribute("role"),T.setAttribute("tabindex","0")),R!==y.data&&(y.data=R),m.className!=x&&(m.className=x),a.setStyle(p.element.style,"height",this.$lines.computeLineHeight(_,d,v)+"px"),a.setStyle(p.element.style,"top",this.$lines.computeLineTop(_,d,v)+"px"),p.text=R,T.style.display==="none"&&C.style.display==="none"?p.element.setAttribute("aria-hidden",!0):p.element.setAttribute("aria-hidden",!1),p},f.prototype.setHighlightGutterLine=function(p){this.$highlightGutterLine=p},f.prototype.setShowLineNumbers=function(p){this.$renderer=!p&&{getWidth:function(){return 0},getText:function(){return""}}},f.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},f.prototype.setShowFoldWidgets=function(p){p?a.addCssClass(this.element,"ace_folding-enabled"):a.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=p,this.$padding=null},f.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},f.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var p=a.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(p.borderLeftWidth)||0)+(parseInt(p.paddingLeft)||0)+1,this.$padding.right=(parseInt(p.borderRightWidth)||0)+(parseInt(p.paddingRight)||0),this.$padding},f.prototype.getRegion=function(p){var d=this.$padding||this.$computePadding(),c=this.element.getBoundingClientRect();if(p.x<d.left+c.left)return"markers";if(this.$showFoldWidgets&&p.x>c.right-d.right)return"foldWidgets"},f}();i.prototype.$fixedWidth=!1,i.prototype.$highlightGutterLine=!0,i.prototype.$renderer="",i.prototype.$showLineNumbers=!0,i.prototype.$showFoldWidgets=!0,h.implement(i.prototype,r);function s(f){var p=document.createTextNode("");f.appendChild(p);var d=a.createElement("span");f.appendChild(d);var c=a.createElement("span");f.appendChild(c);var _=a.createElement("span");return c.appendChild(_),f}t.Gutter=i});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../range").Range,h=e("../lib/dom"),o=function(){function l(u){this.element=h.createElement("div"),this.element.className="ace_layer ace_marker-layer",u.appendChild(this.element)}return l.prototype.setPadding=function(u){this.$padding=u},l.prototype.setSession=function(u){this.session=u},l.prototype.setMarkers=function(u){this.markers=u},l.prototype.elt=function(u,i){var s=this.i!=-1&&this.element.childNodes[this.i];s?this.i++:(s=document.createElement("div"),this.element.appendChild(s),this.i=-1),s.style.cssText=i,s.className=u},l.prototype.update=function(u){if(u){this.config=u,this.i=0;var i;for(var s in this.markers){var f=this.markers[s];if(!f.range){f.update(i,this,this.session,u);continue}var p=f.range.clipRows(u.firstRow,u.lastRow);if(!p.isEmpty())if(p=p.toScreenRange(this.session),f.renderer){var d=this.$getTop(p.start.row,u),c=this.$padding+p.start.column*u.characterWidth;f.renderer(i,p,c,d,u)}else f.type=="fullLine"?this.drawFullLineMarker(i,p,f.clazz,u):f.type=="screenLine"?this.drawScreenLineMarker(i,p,f.clazz,u):p.isMultiLine()?f.type=="text"?this.drawTextMarker(i,p,f.clazz,u):this.drawMultiLineMarker(i,p,f.clazz,u):this.drawSingleLineMarker(i,p,f.clazz+" ace_start ace_br15",u)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},l.prototype.$getTop=function(u,i){return(u-i.firstRowScreen)*i.lineHeight},l.prototype.drawTextMarker=function(u,i,s,f,p){for(var d=this.session,c=i.start.row,_=i.end.row,m=c,v=0,y=0,C=d.getScreenLastRowColumn(m),T=new a(m,i.start.column,m,y);m<=_;m++)T.start.row=T.end.row=m,T.start.column=m==c?i.start.column:d.getRowWrapIndent(m),T.end.column=C,v=y,y=C,C=m+1<_?d.getScreenLastRowColumn(m+1):m==_?0:i.end.column,this.drawSingleLineMarker(u,T,s+(m==c?" ace_start":"")+" ace_br"+r(m==c||m==c+1&&i.start.column,v<y,y>C,m==_),f,m==_?0:1,p)},l.prototype.drawMultiLineMarker=function(u,i,s,f,p){var d=this.$padding,c=f.lineHeight,_=this.$getTop(i.start.row,f),m=d+i.start.column*f.characterWidth;if(p=p||"",this.session.$bidiHandler.isBidiRow(i.start.row)){var v=i.clone();v.end.row=v.start.row,v.end.column=this.session.getLine(v.start.row).length,this.drawBidiSingleLineMarker(u,v,s+" ace_br1 ace_start",f,null,p)}else this.elt(s+" ace_br1 ace_start","height:"+c+"px;right:0;top:"+_+"px;left:"+m+"px;"+(p||""));if(this.session.$bidiHandler.isBidiRow(i.end.row)){var v=i.clone();v.start.row=v.end.row,v.start.column=0,this.drawBidiSingleLineMarker(u,v,s+" ace_br12",f,null,p)}else{_=this.$getTop(i.end.row,f);var y=i.end.column*f.characterWidth;this.elt(s+" ace_br12","height:"+c+"px;width:"+y+"px;top:"+_+"px;left:"+d+"px;"+(p||""))}if(c=(i.end.row-i.start.row-1)*f.lineHeight,!(c<=0)){_=this.$getTop(i.start.row+1,f);var C=(i.start.column?1:0)|(i.end.column?0:8);this.elt(s+(C?" ace_br"+C:""),"height:"+c+"px;right:0;top:"+_+"px;left:"+d+"px;"+(p||""))}},l.prototype.drawSingleLineMarker=function(u,i,s,f,p,d){if(this.session.$bidiHandler.isBidiRow(i.start.row))return this.drawBidiSingleLineMarker(u,i,s,f,p,d);var c=f.lineHeight,_=(i.end.column+(p||0)-i.start.column)*f.characterWidth,m=this.$getTop(i.start.row,f),v=this.$padding+i.start.column*f.characterWidth;this.elt(s,"height:"+c+"px;width:"+_+"px;top:"+m+"px;left:"+v+"px;"+(d||""))},l.prototype.drawBidiSingleLineMarker=function(u,i,s,f,p,d){var c=f.lineHeight,_=this.$getTop(i.start.row,f),m=this.$padding,v=this.session.$bidiHandler.getSelections(i.start.column,i.end.column);v.forEach(function(y){this.elt(s,"height:"+c+"px;width:"+(y.width+(p||0))+"px;top:"+_+"px;left:"+(m+y.left)+"px;"+(d||""))},this)},l.prototype.drawFullLineMarker=function(u,i,s,f,p){var d=this.$getTop(i.start.row,f),c=f.lineHeight;i.start.row!=i.end.row&&(c+=this.$getTop(i.end.row,f)-d),this.elt(s,"height:"+c+"px;top:"+d+"px;left:0;right:0;"+(p||""))},l.prototype.drawScreenLineMarker=function(u,i,s,f,p){var d=this.$getTop(i.start.row,f),c=f.lineHeight;this.elt(s,"height:"+c+"px;top:"+d+"px;left:0;right:0;"+(p||""))},l}();o.prototype.$padding=0;function r(l,u,i,s){return(l?1:0)|(u?2:0)|(i?4:0)|(s?8:0)}t.Marker=o});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,n){var a=new Set(["text","rparen","lparen"]);t.isTextToken=function(h){return a.has(h)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,n){"use strict";var a=e("../lib/oop"),h=e("../lib/dom"),o=e("../lib/lang"),r=e("./lines").Lines,l=e("../lib/event_emitter").EventEmitter,u=e("../config").nls,i=e("./text_util").isTextToken,s=function(){function f(p){this.dom=h,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",p.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new r(this.element)}return f.prototype.$updateEolChar=function(){var p=this.session.doc,d=p.getNewLineCharacter()==`
`&&p.getNewLineMode()!="windows",c=d?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=c)return this.EOL_CHAR=c,!0},f.prototype.setPadding=function(p){this.$padding=p,this.element.style.margin="0 "+p+"px"},f.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},f.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},f.prototype.$setFontMetrics=function(p){this.$fontMetrics=p,this.$fontMetrics.on("changeCharacterSize",function(d){this._signal("changeCharacterSize",d)}.bind(this)),this.$pollSizeChanges()},f.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},f.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},f.prototype.setSession=function(p){this.session=p,p&&this.$computeTabString()},f.prototype.setShowInvisibles=function(p){return this.showInvisibles==p?!1:(this.showInvisibles=p,typeof p=="string"?(this.showSpaces=/tab/i.test(p),this.showTabs=/space/i.test(p),this.showEOL=/eol/i.test(p)):this.showSpaces=this.showTabs=this.showEOL=p,this.$computeTabString(),!0)},f.prototype.setDisplayIndentGuides=function(p){return this.displayIndentGuides==p?!1:(this.displayIndentGuides=p,this.$computeTabString(),!0)},f.prototype.setHighlightIndentGuides=function(p){return this.$highlightIndentGuides===p?!1:(this.$highlightIndentGuides=p,p)},f.prototype.$computeTabString=function(){var p=this.session.getTabSize();this.tabSize=p;for(var d=this.$tabStrings=[0],c=1;c<p+1;c++)if(this.showTabs){var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_tab",_.textContent=o.stringRepeat(this.TAB_CHAR,c),d.push(_)}else d.push(this.dom.createTextNode(o.stringRepeat(" ",c),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var m="ace_indent-guide",v=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?o.stringRepeat(this.SPACE_CHAR,this.tabSize):o.stringRepeat(" ",this.tabSize),C=this.showTabs?" ace_invisible ace_invisible_tab":"",T=this.showTabs?o.stringRepeat(this.TAB_CHAR,this.tabSize):y,_=this.dom.createElement("span");_.className=m+v,_.textContent=y,this.$tabStrings[" "]=_;var _=this.dom.createElement("span");_.className=m+C,_.textContent=T,this.$tabStrings["	"]=_}},f.prototype.updateLines=function(p,d,c){if(this.config.lastRow!=p.lastRow||this.config.firstRow!=p.firstRow)return this.update(p);this.config=p;for(var _=Math.max(d,p.firstRow),m=Math.min(c,p.lastRow),v=this.element.childNodes,y=0,T=p.firstRow;T<_;T++){var D=this.session.getFoldLine(T);if(D)if(D.containsRow(_)){_=D.start.row;break}else T=D.end.row;y++}for(var C=!1,T=_,D=this.session.getNextFoldLine(T),g=D?D.start.row:1/0;T>g&&(T=D.end.row+1,D=this.session.getNextFoldLine(T,D),g=D?D.start.row:1/0),!(T>m);){var w=v[y++];if(w){this.dom.removeChildren(w),this.$renderLine(w,T,T==g?D:!1),C&&(w.style.top=this.$lines.computeLineTop(T,p,this.session)+"px");var F=p.lineHeight*this.session.getRowLength(T)+"px";w.style.height!=F&&(C=!0,w.style.height=F)}T++}if(C)for(;y<this.$lines.cells.length;){var b=this.$lines.cells[y++];b.element.style.top=this.$lines.computeLineTop(b.row,p,this.session)+"px"}},f.prototype.scrollLines=function(p){var d=this.config;if(this.config=p,this.$lines.pageChanged(d,p))return this.update(p);this.$lines.moveContainer(p);var c=p.lastRow,_=d?d.lastRow:-1;if(!d||_<p.firstRow)return this.update(p);if(c<d.firstRow)return this.update(p);if(!d||d.lastRow<p.firstRow)return this.update(p);if(p.lastRow<d.firstRow)return this.update(p);if(d.firstRow<p.firstRow)for(var m=this.session.getFoldedRowCount(d.firstRow,p.firstRow-1);m>0;m--)this.$lines.shift();if(d.lastRow>p.lastRow)for(var m=this.session.getFoldedRowCount(p.lastRow+1,d.lastRow);m>0;m--)this.$lines.pop();p.firstRow<d.firstRow&&this.$lines.unshift(this.$renderLinesFragment(p,p.firstRow,d.firstRow-1)),p.lastRow>d.lastRow&&this.$lines.push(this.$renderLinesFragment(p,d.lastRow+1,p.lastRow)),this.$highlightIndentGuide()},f.prototype.$renderLinesFragment=function(p,d,c){for(var _=[],m=d,v=this.session.getNextFoldLine(m),y=v?v.start.row:1/0;m>y&&(m=v.end.row+1,v=this.session.getNextFoldLine(m,v),y=v?v.start.row:1/0),!(m>c);){var C=this.$lines.createCell(m,p,this.session),T=C.element;this.dom.removeChildren(T),h.setStyle(T.style,"height",this.$lines.computeLineHeight(m,p,this.session)+"px"),h.setStyle(T.style,"top",this.$lines.computeLineTop(m,p,this.session)+"px"),this.$renderLine(T,m,m==y?v:!1),this.$useLineGroups()?T.className="ace_line_group":T.className="ace_line",_.push(C),m++}return _},f.prototype.update=function(p){this.$lines.moveContainer(p),this.config=p;for(var d=p.firstRow,c=p.lastRow,_=this.$lines;_.getLength();)_.pop();_.push(this.$renderLinesFragment(p,d,c))},f.prototype.$renderToken=function(p,d,c,_){for(var m=this,v=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),C,T=0;C=v.exec(_);){var D=C[1],g=C[2],w=C[3],F=C[4],b=C[5];if(!(!m.showSpaces&&g)){var E=T!=C.index?_.slice(T,C.index):"";if(T=C.index+C[0].length,E&&y.appendChild(this.dom.createTextNode(E,this.element)),D){var M=m.session.getScreenTabSize(d+C.index);y.appendChild(m.$tabStrings[M].cloneNode(!0)),d+=M-1}else if(g)if(m.showSpaces){var S=this.dom.createElement("span");S.className="ace_invisible ace_invisible_space",S.textContent=o.stringRepeat(m.SPACE_CHAR,g.length),y.appendChild(S)}else y.appendChild(this.dom.createTextNode(g,this.element));else if(w){var S=this.dom.createElement("span");S.className="ace_invisible ace_invisible_space ace_invalid",S.textContent=o.stringRepeat(m.SPACE_CHAR,w.length),y.appendChild(S)}else if(F){d+=1;var S=this.dom.createElement("span");S.style.width=m.config.characterWidth*2+"px",S.className=m.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",S.textContent=m.showSpaces?m.SPACE_CHAR:F,y.appendChild(S)}else if(b){d+=1;var S=this.dom.createElement("span");S.style.width=m.config.characterWidth*2+"px",S.className="ace_cjk",S.textContent=b,y.appendChild(S)}}}if(y.appendChild(this.dom.createTextNode(T?_.slice(T):_,this.element)),i(c.type))p.appendChild(y);else{var x="ace_"+c.type.replace(/\./g," ace_"),S=this.dom.createElement("span");c.type=="fold"&&(S.style.width=c.value.length*this.config.characterWidth+"px",S.setAttribute("title",u("Unfold code"))),S.className=x,S.appendChild(y),p.appendChild(S)}return d+_.length},f.prototype.renderIndentGuide=function(p,d,c){var _=d.search(this.$indentGuideRe);if(_<=0||_>=c)return d;if(d[0]==" "){_-=_%this.tabSize;for(var m=_/this.tabSize,v=0;v<m;v++)p.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),d.substr(_)}else if(d[0]=="	"){for(var v=0;v<_;v++)p.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),d.substr(_)}return this.$highlightIndentGuide(),d},f.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var p=this.session.doc.$lines;if(p){var d=this.session.selection.getCursor(),c=/^\s*/.exec(this.session.doc.getLine(d.row))[0].length,_=Math.floor(c/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:_,start:d.row};var m=this.session.$bracketHighlight;if(m){for(var v=this.session.$bracketHighlight.ranges,y=0;y<v.length;y++)if(d.row!==v[y].start.row){this.$highlightIndentGuideMarker.end=v[y].start.row,d.row>v[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&p[d.row]!==""&&d.column===p[d.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=d.row+1;y<p.length;y++){var C=p[y],T=/^\s*/.exec(C)[0].length;if(C!==""&&(this.$highlightIndentGuideMarker.end=y,T<=c))break}}this.$renderHighlightIndentGuide()}}},f.prototype.$clearActiveIndentGuide=function(){for(var p=this.$lines.cells,d=0;d<p.length;d++){var c=p[d],_=c.element.childNodes;if(_.length>0){for(var m=0;m<_.length;m++)if(_[m].classList&&_[m].classList.contains("ace_indent-guide-active")){_[m].classList.remove("ace_indent-guide-active");break}}}},f.prototype.$setIndentGuideActive=function(p,d){var c=this.session.doc.getLine(p.row);if(c!==""){var _=p.element.childNodes;if(_){var m=_[d-1];m&&m.classList&&m.classList.contains("ace_indent-guide")&&m.classList.add("ace_indent-guide-active")}}},f.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var p=this.$lines.cells;this.$clearActiveIndentGuide();var d=this.$highlightIndentGuideMarker.indentLevel;if(d!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var c=0;c<p.length;c++){var _=p[c];if(this.$highlightIndentGuideMarker.end&&_.row>=this.$highlightIndentGuideMarker.start+1){if(_.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(_,d)}}else for(var c=p.length-1;c>=0;c--){var _=p[c];if(this.$highlightIndentGuideMarker.end&&_.row<this.$highlightIndentGuideMarker.start){if(_.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(_,d)}}}},f.prototype.$createLineElement=function(p){var d=this.dom.createElement("div");return d.className="ace_line",d.style.height=this.config.lineHeight+"px",d},f.prototype.$renderWrappedLine=function(p,d,c){var _=0,m=0,v=c[0],y=0,C=this.$createLineElement();p.appendChild(C);for(var T=0;T<d.length;T++){var D=d[T],g=D.value;if(T==0&&this.displayIndentGuides){if(_=g.length,g=this.renderIndentGuide(C,g,v),!g)continue;_-=g.length}if(_+g.length<v)y=this.$renderToken(C,y,D,g),_+=g.length;else{for(;_+g.length>=v;)y=this.$renderToken(C,y,D,g.substring(0,v-_)),g=g.substring(v-_),_=v,C=this.$createLineElement(),p.appendChild(C),C.appendChild(this.dom.createTextNode(o.stringRepeat("\xA0",c.indent),this.element)),m++,y=0,v=c[m]||Number.MAX_VALUE;g.length!=0&&(_+=g.length,y=this.$renderToken(C,y,D,g))}}c[c.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(C,y,null,"",!0)},f.prototype.$renderSimpleLine=function(p,d){for(var c=0,_=0;_<d.length;_++){var m=d[_],v=m.value;if(!(_==0&&this.displayIndentGuides&&(v=this.renderIndentGuide(p,v),!v))){if(c+v.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(p,c,m,v);c=this.$renderToken(p,c,m,v)}}},f.prototype.$renderOverflowMessage=function(p,d,c,_,m){c&&this.$renderToken(p,d,c,_.slice(0,this.MAX_LINE_LENGTH-d));var v=this.dom.createElement("span");v.className="ace_inline_button ace_keyword ace_toggle_wrap",v.textContent=m?"<hide>":"<click to see more...>",p.appendChild(v)},f.prototype.$renderLine=function(p,d,c){if(!c&&c!=!1&&(c=this.session.getFoldLine(d)),c)var _=this.$getFoldLineTokens(d,c);else var _=this.session.getTokens(d);var m=p;if(_.length){var v=this.session.getRowSplitData(d);if(v&&v.length){this.$renderWrappedLine(p,_,v);var m=p.lastChild}else{var m=p;this.$useLineGroups()&&(m=this.$createLineElement(),p.appendChild(m)),this.$renderSimpleLine(m,_)}}else this.$useLineGroups()&&(m=this.$createLineElement(),p.appendChild(m));if(this.showEOL&&m){c&&(d=c.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=d==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,m.appendChild(y)}},f.prototype.$getFoldLineTokens=function(p,d){var c=this.session,_=[];function m(y,C,T){for(var D=0,g=0;g+y[D].value.length<C;)if(g+=y[D].value.length,D++,D==y.length)return;if(g!=C){var w=y[D].value.substring(C-g);w.length>T-C&&(w=w.substring(0,T-C)),_.push({type:y[D].type,value:w}),g=C+w.length,D+=1}for(;g<T&&D<y.length;){var w=y[D].value;w.length+g>T?_.push({type:y[D].type,value:w.substring(0,T-g)}):_.push(y[D]),g+=w.length,D+=1}}var v=c.getTokens(p);return d.walk(function(y,C,T,D,g){y!=null?_.push({type:"fold",value:y}):(g&&(v=c.getTokens(C)),v.length&&m(v,D,T))},d.end.row,this.session.getLine(d.end.row).length),_},f.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},f}();s.prototype.EOF_CHAR="\xB6",s.prototype.EOL_CHAR_LF="\xAC",s.prototype.EOL_CHAR_CRLF="\xA4",s.prototype.EOL_CHAR=s.prototype.EOL_CHAR_LF,s.prototype.TAB_CHAR="\u2014",s.prototype.SPACE_CHAR="\xB7",s.prototype.$padding=0,s.prototype.MAX_LINE_LENGTH=1e4,s.prototype.showInvisibles=!1,s.prototype.showSpaces=!1,s.prototype.showTabs=!1,s.prototype.showEOL=!1,s.prototype.displayIndentGuides=!0,s.prototype.$highlightIndentGuides=!0,s.prototype.$tabStrings=[],s.prototype.destroy={},s.prototype.onChangeTabSize=s.prototype.$computeTabString,a.implement(s.prototype,l),t.Text=s});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=function(){function o(r){this.element=a.createElement("div"),this.element.className="ace_layer ace_cursor-layer",r.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),a.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return o.prototype.$updateOpacity=function(r){for(var l=this.cursors,u=l.length;u--;)a.setStyle(l[u].style,"opacity",r?"":"0")},o.prototype.$startCssAnimation=function(){for(var r=this.cursors,l=r.length;l--;)r[l].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&a.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},o.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,a.removeCssClass(this.element,"ace_animate-blinking")},o.prototype.setPadding=function(r){this.$padding=r},o.prototype.setSession=function(r){this.session=r},o.prototype.setBlinking=function(r){r!=this.isBlinking&&(this.isBlinking=r,this.restartTimer())},o.prototype.setBlinkInterval=function(r){r!=this.blinkInterval&&(this.blinkInterval=r,this.restartTimer())},o.prototype.setSmoothBlinking=function(r){r!=this.smoothBlinking&&(this.smoothBlinking=r,a.setCssClass(this.element,"ace_smooth-blinking",r),this.$updateCursors(!0),this.restartTimer())},o.prototype.addCursor=function(){var r=a.createElement("div");return r.className="ace_cursor",this.element.appendChild(r),this.cursors.push(r),r},o.prototype.removeCursor=function(){if(this.cursors.length>1){var r=this.cursors.pop();return r.parentNode.removeChild(r),r}},o.prototype.hideCursor=function(){this.isVisible=!1,a.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},o.prototype.showCursor=function(){this.isVisible=!0,a.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},o.prototype.restartTimer=function(){var r=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,a.removeCssClass(this.element,"ace_smooth-blinking")),r(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&a.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),a.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var l=function(){this.timeoutId=setTimeout(function(){r(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){r(!0),l()},this.blinkInterval),l()}},o.prototype.getPixelPosition=function(r,l){if(!this.config||!this.session)return{left:0,top:0};r||(r=this.session.selection.getCursor());var u=this.session.documentToScreenPosition(r),i=this.$padding+(this.session.$bidiHandler.isBidiRow(u.row,r.row)?this.session.$bidiHandler.getPosLeft(u.column):u.column*this.config.characterWidth),s=(u.row-(l?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:s}},o.prototype.isCursorInView=function(r,l){return r.top>=0&&r.top<l.maxHeight},o.prototype.update=function(r){this.config=r;var l=this.session.$selectionMarkers,u=0,i=0;(l===void 0||l.length===0)&&(l=[{cursor:null}]);for(var u=0,s=l.length;u<s;u++){var f=this.getPixelPosition(l[u].cursor,!0);if(!((f.top>r.height+r.offset||f.top<0)&&u>1)){var p=this.cursors[i++]||this.addCursor(),d=p.style;this.drawCursor?this.drawCursor(p,f,r,l[u],this.session):this.isCursorInView(f,r)?(a.setStyle(d,"display","block"),a.translate(p,f.left,f.top),a.setStyle(d,"width",Math.round(r.characterWidth)+"px"),a.setStyle(d,"height",r.lineHeight+"px")):a.setStyle(d,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=f,this.restartTimer()},o.prototype.$setOverwrite=function(r){r!=this.overwrite&&(this.overwrite=r,r?a.addCssClass(this.element,"ace_overwrite-cursors"):a.removeCssClass(this.element,"ace_overwrite-cursors"))},o.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},o}();h.prototype.$padding=0,h.prototype.drawCursor=null,t.Cursor=h});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var p=function(d,c){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,m){_.__proto__=m}||function(_,m){for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(_[v]=m[v])},p(d,c)};return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");p(d,c);function _(){this.constructor=d}d.prototype=c===null?Object.create(c):(_.prototype=c.prototype,new _)}}(),h=e("./lib/oop"),o=e("./lib/dom"),r=e("./lib/event"),l=e("./lib/event_emitter").EventEmitter,u=32768,i=function(){function p(d,c){this.element=o.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+c,this.inner=o.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),d.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addListener(this.element,"scroll",this.onScroll.bind(this)),r.addListener(this.element,"mousedown",r.preventDefault)}return p.prototype.setVisible=function(d){this.element.style.display=d?"":"none",this.isVisible=d,this.coeff=1},p}();h.implement(i.prototype,l);var s=function(p){a(d,p);function d(c,_){var m=p.call(this,c,"-v")||this;return m.scrollTop=0,m.scrollHeight=0,_.$scrollbarWidth=m.width=o.scrollbarWidth(c.ownerDocument),m.inner.style.width=m.element.style.width=(m.width||15)+5+"px",m.$minWidth=0,m}return d.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var c=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-c)/(this.coeff-c)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},d.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},d.prototype.setHeight=function(c){this.element.style.height=c+"px"},d.prototype.setScrollHeight=function(c){this.scrollHeight=c,c>u?(this.coeff=u/c,c=u):this.coeff!=1&&(this.coeff=1),this.inner.style.height=c+"px"},d.prototype.setScrollTop=function(c){this.scrollTop!=c&&(this.skipEvent=!0,this.scrollTop=c,this.element.scrollTop=c*this.coeff)},d}(i);s.prototype.setInnerHeight=s.prototype.setScrollHeight;var f=function(p){a(d,p);function d(c,_){var m=p.call(this,c,"-h")||this;return m.scrollLeft=0,m.height=_.$scrollbarWidth,m.inner.style.height=m.element.style.height=(m.height||15)+5+"px",m}return d.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},d.prototype.getHeight=function(){return this.isVisible?this.height:0},d.prototype.setWidth=function(c){this.element.style.width=c+"px"},d.prototype.setInnerWidth=function(c){this.inner.style.width=c+"px"},d.prototype.setScrollWidth=function(c){this.inner.style.width=c+"px"},d.prototype.setScrollLeft=function(c){this.scrollLeft!=c&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=c)},d}(i);t.ScrollBar=s,t.ScrollBarV=s,t.ScrollBarH=f,t.VScrollBar=s,t.HScrollBar=f});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var f=function(p,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(c[m]=_[m])},f(p,d)};return function(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(p,d);function c(){this.constructor=p}p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),h=e("./lib/oop"),o=e("./lib/dom"),r=e("./lib/event"),l=e("./lib/event_emitter").EventEmitter;o.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var u=function(){function f(p,d){this.element=o.createElement("div"),this.element.className="ace_sb"+d,this.inner=o.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,p.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return f.prototype.setVisible=function(p){this.element.style.display=p?"":"none",this.isVisible=p,this.coeff=1},f}();h.implement(u.prototype,l);var i=function(f){a(p,f);function p(d,c){var _=f.call(this,d,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,_.parent=d,_.width=_.VScrollWidth,_.renderer=c,_.inner.style.width=_.element.style.width=(_.width||15)+"px",_.$minWidth=0,_}return p.prototype.onMouseDown=function(d,c){if(d==="mousedown"&&!(r.getButton(c)!==0||c.detail===2)){if(c.target===this.inner){var _=this,m=c.clientY,v=function(F){m=F.clientY},y=function(){clearInterval(g)},C=c.clientY,T=this.thumbTop,D=function(){if(m!==void 0){var F=_.scrollTopFromThumbTop(T+m-C);F!==_.scrollTop&&_._emit("scroll",{data:F})}};r.capture(this.inner,v,y);var g=setInterval(D,20);return r.preventDefault(c)}var w=c.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(w)}),r.preventDefault(c)}},p.prototype.getHeight=function(){return this.height},p.prototype.scrollTopFromThumbTop=function(d){var c=d*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return c=c>>0,c<0?c=0:c>this.pageHeight-this.viewHeight&&(c=this.pageHeight-this.viewHeight),c},p.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},p.prototype.setHeight=function(d){this.height=Math.max(0,d),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},p.prototype.setScrollHeight=function(d,c){this.pageHeight===d&&!c||(this.pageHeight=d,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},p.prototype.setScrollTop=function(d){this.scrollTop=d,d<0&&(d=0),this.thumbTop=d*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},p}(u);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var s=function(f){a(p,f);function p(d,c){var _=f.call(this,d,"-h")||this;return _.scrollLeft=0,_.scrollWidth=0,_.height=_.HScrollHeight,_.inner.style.height=_.element.style.height=(_.height||12)+"px",_.renderer=c,_}return p.prototype.onMouseDown=function(d,c){if(d==="mousedown"&&!(r.getButton(c)!==0||c.detail===2)){if(c.target===this.inner){var _=this,m=c.clientX,v=function(F){m=F.clientX},y=function(){clearInterval(g)},C=c.clientX,T=this.thumbLeft,D=function(){if(m!==void 0){var F=_.scrollLeftFromThumbLeft(T+m-C);F!==_.scrollLeft&&_._emit("scroll",{data:F})}};r.capture(this.inner,v,y);var g=setInterval(D,20);return r.preventDefault(c)}var w=c.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(w)}),r.preventDefault(c)}},p.prototype.getHeight=function(){return this.isVisible?this.height:0},p.prototype.scrollLeftFromThumbLeft=function(d){var c=d*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return c=c>>0,c<0?c=0:c>this.pageWidth-this.viewWidth&&(c=this.pageWidth-this.viewWidth),c},p.prototype.setWidth=function(d){this.width=Math.max(0,d),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},p.prototype.setScrollWidth=function(d,c){this.pageWidth===d&&!c||(this.pageWidth=d,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},p.prototype.setScrollLeft=function(d){this.scrollLeft=d,d<0&&(d=0),this.thumbLeft=d*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},p}(u);s.prototype.setInnerWidth=s.prototype.setScrollWidth,t.ScrollBar=i,t.ScrollBarV=i,t.ScrollBarH=s,t.VScrollBar=i,t.HScrollBar=s});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var a=e("./lib/event"),h=function(){function o(r,l){this.onRender=r,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=l||window;var u=this;this._flush=function(i){u.pending=!1;var s=u.changes;if(s&&(a.blockIdle(100),u.changes=0,u.onRender(s)),u.changes){if(u.$recursionLimit--<0)return;u.schedule()}else u.$recursionLimit=2}}return o.prototype.schedule=function(r){this.changes=this.changes|r,this.changes&&!this.pending&&(a.nextFrame(this._flush),this.pending=!0)},o.prototype.clear=function(r){var l=this.changes;return this.changes=0,l},o}();t.RenderLoop=h});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var a=e("../lib/oop"),h=e("../lib/dom"),o=e("../lib/lang"),r=e("../lib/event"),l=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,i=512,s=typeof ResizeObserver=="function",f=200,p=function(){function d(c){this.el=h.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=h.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=h.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),c.appendChild(this.el),this.$measureNode.textContent=o.stringRepeat("X",i),this.$characterSize={width:0,height:0},s?this.$addObserver():this.checkForSizeChanges()}return d.prototype.$setMeasureNodeStyles=function(c,_){c.width=c.height="auto",c.left=c.top="0px",c.visibility="hidden",c.position="absolute",c.whiteSpace="pre",l.isIE<8?c["font-family"]="inherit":c.font="inherit",c.overflow=_?"hidden":"visible"},d.prototype.checkForSizeChanges=function(c){if(c===void 0&&(c=this.$measureSizes()),c&&(this.$characterSize.width!==c.width||this.$characterSize.height!==c.height)){this.$measureNode.style.fontWeight="bold";var _=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=c,this.charSizes=Object.create(null),this.allowBoldFonts=_&&_.width===c.width&&_.height===c.height,this._emit("changeCharacterSize",{data:c})}},d.prototype.$addObserver=function(){var c=this;this.$observer=new window.ResizeObserver(function(_){c.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},d.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var c=this;return this.$pollSizeChangesTimer=r.onIdle(function _(){c.checkForSizeChanges(),r.onIdle(_,500)},500)},d.prototype.setPolling=function(c){c?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},d.prototype.$measureSizes=function(c){var _={height:(c||this.$measureNode).clientHeight,width:(c||this.$measureNode).clientWidth/i};return _.width===0||_.height===0?null:_},d.prototype.$measureCharWidth=function(c){this.$main.textContent=o.stringRepeat(c,i);var _=this.$main.getBoundingClientRect();return _.width/i},d.prototype.getCharacterWidth=function(c){var _=this.charSizes[c];return _===void 0&&(_=this.charSizes[c]=this.$measureCharWidth(c)/this.$characterSize.width),_},d.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},d.prototype.$getZoom=function(c){return!c||!c.parentElement?1:(window.getComputedStyle(c).zoom||1)*this.$getZoom(c.parentElement)},d.prototype.$initTransformMeasureNodes=function(){var c=function(_,m){return["div",{style:"position: absolute;top:"+_+"px;left:"+m+"px;"}]};this.els=h.buildDom([c(0,0),c(f,0),c(0,f),c(f,f)],this.el)},d.prototype.transformCoordinates=function(c,_){if(c){var m=this.$getZoom(this.el);c=T(1/m,c)}function v($,H,P){var q=$[1]*H[0]-$[0]*H[1];return[(-H[1]*P[0]+H[0]*P[1])/q,(+$[1]*P[0]-$[0]*P[1])/q]}function y($,H){return[$[0]-H[0],$[1]-H[1]]}function C($,H){return[$[0]+H[0],$[1]+H[1]]}function T($,H){return[$*H[0],$*H[1]]}this.els||this.$initTransformMeasureNodes();function D($){var H=$.getBoundingClientRect();return[H.left,H.top]}var g=D(this.els[0]),w=D(this.els[1]),F=D(this.els[2]),b=D(this.els[3]),E=v(y(b,w),y(b,F),y(C(w,F),C(b,g))),M=T(1+E[0],y(w,g)),S=T(1+E[1],y(F,g));if(_){var x=_,L=E[0]*x[0]/f+E[1]*x[1]/f+1,R=C(T(x[0],M),T(x[1],S));return C(T(1/L/f,R),g)}var A=y(c,g),I=v(y(M,T(E[0],A)),y(S,T(E[1],A)),A);return T(f,I)},d}();p.prototype.$characterSize={width:0,height:0},a.implement(p.prototype,u),t.FontMetrics=p});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=e("../lib/oop"),o=e("../lib/event_emitter").EventEmitter,r=function(){function l(u,i){this.canvas=a.createElement("canvas"),this.renderer=i,this.pixelRatio=1,this.maxHeight=i.layerConfig.maxHeight,this.lineHeight=i.layerConfig.lineHeight,this.canvasHeight=u.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=u.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},u.element.appendChild(this.canvas)}return l.prototype.$updateDecorators=function(u){var i=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(u){this.maxHeight=u.maxHeight,this.lineHeight=u.lineHeight,this.canvasHeight=u.height;var s=(u.lastRow+1)*this.lineHeight;s<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var f=this.canvas.getContext("2d");function p(b,E){return b.priority<E.priority?-1:b.priority>E.priority?1:0}var d=this.renderer.session.$annotations;if(f.clearRect(0,0,this.canvas.width,this.canvas.height),d){var c={info:1,warning:2,error:3};d.forEach(function(b){b.priority=c[b.type]||null}),d=d.sort(p);for(var _=this.renderer.session.$foldData,m=0;m<d.length;m++){var v=d[m].row,y=this.compensateFoldRows(v,_),C=Math.round((v-y)*this.lineHeight*this.heightRatio),T=Math.round((v-y)*this.lineHeight*this.heightRatio),D=Math.round(((v-y)*this.lineHeight+this.lineHeight)*this.heightRatio),g=D-T;if(g<this.minDecorationHeight){var w=(T+D)/2|0;w<this.halfMinDecorationHeight?w=this.halfMinDecorationHeight:w+this.halfMinDecorationHeight>this.canvasHeight&&(w=this.canvasHeight-this.halfMinDecorationHeight),T=Math.round(w-this.halfMinDecorationHeight),D=Math.round(w+this.halfMinDecorationHeight)}f.fillStyle=i[d[m].type]||null,f.fillRect(0,C,this.canvasWidth,D-T)}}var F=this.renderer.session.selection.getCursor();if(F){var y=this.compensateFoldRows(F.row,_),C=Math.round((F.row-y)*this.lineHeight*this.heightRatio);f.fillStyle="rgba(0, 0, 0, 0.5)",f.fillRect(0,C,this.canvasWidth,2)}},l.prototype.compensateFoldRows=function(u,i){var s=0;if(i&&i.length>0)for(var f=0;f<i.length;f++)u>i[f].start.row&&u<i[f].end.row?s+=u-i[f].start.row:u>=i[f].end.row&&(s+=i[f].end.row-i[f].start.row);return s},l}();h.implement(r.prototype,o),t.Decorator=r});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./lib/dom"),o=e("./lib/lang"),r=e("./config"),l=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,i=e("./layer/text").Text,s=e("./layer/cursor").Cursor,f=e("./scrollbar").HScrollBar,p=e("./scrollbar").VScrollBar,d=e("./scrollbar_custom").HScrollBar,c=e("./scrollbar_custom").VScrollBar,_=e("./renderloop").RenderLoop,m=e("./layer/font_metrics").FontMetrics,v=e("./lib/event_emitter").EventEmitter,y=e("./css/editor-css"),C=e("./layer/decorators").Decorator,T=e("./lib/useragent");h.importCssString(y,"ace_editor.css",!1);var D=function(){function g(w,F){var b=this;this.container=w||h.createElement("div"),h.addCssClass(this.container,"ace_editor"),h.HI_DPI&&h.addCssClass(this.container,"ace_hidpi"),this.setTheme(F),r.get("useStrictCSP")==null&&r.set("useStrictCSP",!1),this.$gutter=h.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=h.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=h.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new l(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var E=this.$textLayer=new i(this.content);this.canvas=E.element,this.$markerFront=new u(this.content),this.$cursorLayer=new s(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new p(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.on("scroll",function(M){b.$scrollAnimation||b.session.setScrollTop(M.data-b.scrollMargin.top)}),this.scrollBarH.on("scroll",function(M){b.$scrollAnimation||b.session.setScrollLeft(M.data-b.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new m(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(M){b.updateCharacterSize(),b.onResize(!0,b.gutterWidth,b.$size.width,b.$size.height),b._signal("changeCharacterSize",M)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!T.isIOS,this.$loop=new _(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),r.resetOptions(this),r._signal("renderer",this)}return g.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),h.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},g.prototype.setSession=function(w){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=w,w&&this.scrollMargin.top&&w.getScrollTop()<=0&&w.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(w),this.$markerBack.setSession(w),this.$markerFront.setSession(w),this.$gutterLayer.setSession(w),this.$textLayer.setSession(w),w&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},g.prototype.updateLines=function(w,F,b){if(F===void 0&&(F=1/0),this.$changedLines?(this.$changedLines.firstRow>w&&(this.$changedLines.firstRow=w),this.$changedLines.lastRow<F&&(this.$changedLines.lastRow=F)):this.$changedLines={firstRow:w,lastRow:F},this.$changedLines.lastRow<this.layerConfig.firstRow)if(b)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},g.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},g.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},g.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},g.prototype.updateFull=function(w){w?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},g.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},g.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},g.prototype.onResize=function(w,F,b,E){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=w?1:0;var M=this.container;E||(E=M.clientHeight||M.scrollHeight),b||(b=M.clientWidth||M.scrollWidth);var S=this.$updateCachedSize(w,F,b,E);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!b&&!E)return this.resizing=0;w&&(this.$gutterLayer.$padding=null),w?this.$renderChanges(S|this.$changes,!0):this.$loop.schedule(S|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},g.prototype.$updateCachedSize=function(w,F,b,E){E-=this.$extraHeight||0;var M=0,S=this.$size,x={width:S.width,height:S.height,scrollerHeight:S.scrollerHeight,scrollerWidth:S.scrollerWidth};if(E&&(w||S.height!=E)&&(S.height=E,M|=this.CHANGE_SIZE,S.scrollerHeight=S.height,this.$horizScroll&&(S.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(S.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",M=M|this.CHANGE_SCROLL),b&&(w||S.width!=b)){M|=this.CHANGE_SIZE,S.width=b,F==null&&(F=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=F,h.setStyle(this.scrollBarH.element.style,"left",F+"px"),h.setStyle(this.scroller.style,"left",F+this.margin.left+"px"),S.scrollerWidth=Math.max(0,b-F-this.scrollBarV.getWidth()-this.margin.h),h.setStyle(this.$gutter.style,"left",this.margin.left+"px");var L=this.scrollBarV.getWidth()+"px";h.setStyle(this.scrollBarH.element.style,"right",L),h.setStyle(this.scroller.style,"right",L),h.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(S.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||w)&&(M|=this.CHANGE_FULL)}return S.$dirty=!b||!E,M&&this._signal("resize",x),M},g.prototype.onGutterResize=function(w){var F=this.$showGutter?w:0;F!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,F,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},g.prototype.adjustWrapLimit=function(){var w=this.$size.scrollerWidth-this.$padding*2,F=Math.floor(w/this.characterWidth);return this.session.adjustWrapLimit(F,this.$showPrintMargin&&this.$printMarginColumn)},g.prototype.setAnimatedScroll=function(w){this.setOption("animatedScroll",w)},g.prototype.getAnimatedScroll=function(){return this.$animatedScroll},g.prototype.setShowInvisibles=function(w){this.setOption("showInvisibles",w),this.session.$bidiHandler.setShowInvisibles(w)},g.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},g.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},g.prototype.setDisplayIndentGuides=function(w){this.setOption("displayIndentGuides",w)},g.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},g.prototype.setHighlightIndentGuides=function(w){this.setOption("highlightIndentGuides",w)},g.prototype.setShowPrintMargin=function(w){this.setOption("showPrintMargin",w)},g.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},g.prototype.setPrintMarginColumn=function(w){this.setOption("printMarginColumn",w)},g.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},g.prototype.getShowGutter=function(){return this.getOption("showGutter")},g.prototype.setShowGutter=function(w){return this.setOption("showGutter",w)},g.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},g.prototype.setFadeFoldWidgets=function(w){this.setOption("fadeFoldWidgets",w)},g.prototype.setHighlightGutterLine=function(w){this.setOption("highlightGutterLine",w)},g.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},g.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var w=h.createElement("div");w.className="ace_layer ace_print-margin-layer",this.$printMarginEl=h.createElement("div"),this.$printMarginEl.className="ace_print-margin",w.appendChild(this.$printMarginEl),this.content.insertBefore(w,this.content.firstChild)}var F=this.$printMarginEl.style;F.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",F.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},g.prototype.getContainerElement=function(){return this.container},g.prototype.getMouseEventTarget=function(){return this.scroller},g.prototype.getTextAreaContainer=function(){return this.container},g.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var w=this.textarea.style,F=this.$composition;if(!this.$keepTextAreaAtCursor&&!F){h.translate(this.textarea,-100,0);return}var b=this.$cursorLayer.$pixelPos;if(b){F&&F.markerRange&&(b=this.$cursorLayer.getPixelPosition(F.markerRange.start,!0));var E=this.layerConfig,M=b.top,S=b.left;M-=E.offset;var x=F&&F.useTextareaForIME||T.isMobile?this.lineHeight:1;if(M<0||M>E.height-x){h.translate(this.textarea,0,0);return}var L=1,R=this.$size.height-x;if(!F)M+=this.lineHeight;else if(F.useTextareaForIME){var A=this.textarea.value;L=this.characterWidth*this.session.$getStringScreenWidth(A)[0]}else M+=this.lineHeight+2;S-=this.scrollLeft,S>this.$size.scrollerWidth-L&&(S=this.$size.scrollerWidth-L),S+=this.gutterWidth+this.margin.left,h.setStyle(w,"height",x+"px"),h.setStyle(w,"width",L+"px"),h.translate(this.textarea,Math.min(S,this.$size.scrollerWidth-L),Math.min(M,R))}}},g.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},g.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},g.prototype.getLastFullyVisibleRow=function(){var w=this.layerConfig,F=w.lastRow,b=this.session.documentToScreenRow(F,0)*w.lineHeight;return b-this.session.getScrollTop()>w.height-w.lineHeight?F-1:F},g.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},g.prototype.setPadding=function(w){this.$padding=w,this.$textLayer.setPadding(w),this.$cursorLayer.setPadding(w),this.$markerFront.setPadding(w),this.$markerBack.setPadding(w),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},g.prototype.setScrollMargin=function(w,F,b,E){var M=this.scrollMargin;M.top=w|0,M.bottom=F|0,M.right=E|0,M.left=b|0,M.v=M.top+M.bottom,M.h=M.left+M.right,M.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-M.top),this.updateFull()},g.prototype.setMargin=function(w,F,b,E){var M=this.margin;M.top=w|0,M.bottom=F|0,M.right=E|0,M.left=b|0,M.v=M.top+M.bottom,M.h=M.left+M.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},g.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},g.prototype.setHScrollBarAlwaysVisible=function(w){this.setOption("hScrollBarAlwaysVisible",w)},g.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},g.prototype.setVScrollBarAlwaysVisible=function(w){this.setOption("vScrollBarAlwaysVisible",w)},g.prototype.$updateScrollBarV=function(){var w=this.layerConfig.maxHeight,F=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(w-=(F-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>w-F&&(w=this.scrollTop+F,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(w+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},g.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},g.prototype.freeze=function(){this.$frozen=!0},g.prototype.unfreeze=function(){this.$frozen=!1},g.prototype.$renderChanges=function(w,F){if(this.$changes&&(w|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!w&&!F){this.$changes|=w;return}if(this.$size.$dirty)return this.$changes|=w,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",w),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var b=this.layerConfig;if(w&this.CHANGE_FULL||w&this.CHANGE_SIZE||w&this.CHANGE_TEXT||w&this.CHANGE_LINES||w&this.CHANGE_SCROLL||w&this.CHANGE_H_SCROLL){if(w|=this.$computeLayerConfig()|this.$loop.clear(),b.firstRow!=this.layerConfig.firstRow&&b.firstRowScreen==this.layerConfig.firstRowScreen){var E=this.scrollTop+(b.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;E>0&&(this.scrollTop=E,w=w|this.CHANGE_SCROLL,w|=this.$computeLayerConfig()|this.$loop.clear())}b=this.layerConfig,this.$updateScrollBarV(),w&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),h.translate(this.content,-this.scrollLeft,-b.offset);var M=b.width+2*this.$padding+"px",S=b.minHeight+"px";h.setStyle(this.content.style,"width",M),h.setStyle(this.content.style,"height",S)}if(w&this.CHANGE_H_SCROLL&&(h.translate(this.content,-this.scrollLeft,-b.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),w&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(b),this.$showGutter&&this.$gutterLayer.update(b),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b),this.$markerBack.update(b),this.$markerFront.update(b),this.$cursorLayer.update(b),this.$moveTextAreaToCursor(),this._signal("afterRender",w);return}if(w&this.CHANGE_SCROLL){this.$changedLines=null,w&this.CHANGE_TEXT||w&this.CHANGE_LINES?this.$textLayer.update(b):this.$textLayer.scrollLines(b),this.$showGutter&&(w&this.CHANGE_GUTTER||w&this.CHANGE_LINES?this.$gutterLayer.update(b):this.$gutterLayer.scrollLines(b)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b),this.$markerBack.update(b),this.$markerFront.update(b),this.$cursorLayer.update(b),this.$moveTextAreaToCursor(),this._signal("afterRender",w);return}w&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(b),this.$showGutter&&this.$gutterLayer.update(b),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b)):w&this.CHANGE_LINES?((this.$updateLines()||w&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(b),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b)):w&this.CHANGE_TEXT||w&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(b),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b)):w&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(b),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b)),w&this.CHANGE_CURSOR&&(this.$cursorLayer.update(b),this.$moveTextAreaToCursor()),w&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(b),w&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(b),this._signal("afterRender",w)},g.prototype.$autosize=function(){var w=this.session.getScreenLength()*this.lineHeight,F=this.$maxLines*this.lineHeight,b=Math.min(F,Math.max((this.$minLines||1)*this.lineHeight,w))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(b+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&b>this.$maxPixelHeight&&(b=this.$maxPixelHeight);var E=b<=2*this.lineHeight,M=!E&&w>F;if(b!=this.desiredHeight||this.$size.height!=this.desiredHeight||M!=this.$vScroll){M!=this.$vScroll&&(this.$vScroll=M,this.scrollBarV.setVisible(M));var S=this.container.clientWidth;this.container.style.height=b+"px",this.$updateCachedSize(!0,this.$gutterWidth,S,b),this.desiredHeight=b,this._signal("autosize")}},g.prototype.$computeLayerConfig=function(){var w=this.session,F=this.$size,b=F.height<=2*this.lineHeight,E=this.session.getScreenLength(),M=E*this.lineHeight,S=this.$getLongestLine(),x=!b&&(this.$hScrollBarAlwaysVisible||F.scrollerWidth-S-2*this.$padding<0),L=this.$horizScroll!==x;L&&(this.$horizScroll=x,this.scrollBarH.setVisible(x));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var A=F.scrollerHeight+this.lineHeight,I=!this.$maxLines&&this.$scrollPastEnd?(F.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;M+=I;var $=this.scrollMargin;this.session.setScrollTop(Math.max(-$.top,Math.min(this.scrollTop,M-F.scrollerHeight+$.bottom))),this.session.setScrollLeft(Math.max(-$.left,Math.min(this.scrollLeft,S+2*this.$padding-F.scrollerWidth+$.right)));var H=!b&&(this.$vScrollBarAlwaysVisible||F.scrollerHeight-M+I<0||this.scrollTop>$.top),P=R!==H;P&&(this.$vScroll=H,this.scrollBarV.setVisible(H));var q=this.scrollTop%this.lineHeight,G=Math.ceil(A/this.lineHeight)-1,B=Math.max(0,Math.round((this.scrollTop-q)/this.lineHeight)),Q=B+G,O,W,U=this.lineHeight;B=w.screenToDocumentRow(B,0);var k=w.getFoldLine(B);k&&(B=k.start.row),O=w.documentToScreenRow(B,0),W=w.getRowLength(B)*U,Q=Math.min(w.screenToDocumentRow(Q,0),w.getLength()-1),A=F.scrollerHeight+w.getRowLength(Q)*U+W,q=this.scrollTop-O*U;var te=0;return(this.layerConfig.width!=S||L)&&(te=this.CHANGE_H_SCROLL),(L||P)&&(te|=this.$updateCachedSize(!0,this.gutterWidth,F.width,F.height),this._signal("scrollbarVisibilityChanged"),P&&(S=this.$getLongestLine())),this.layerConfig={width:S,padding:this.$padding,firstRow:B,firstRowScreen:O,lastRow:Q,lineHeight:U,characterWidth:this.characterWidth,minHeight:A,maxHeight:M,offset:q,gutterOffset:U?Math.max(0,Math.ceil((q+F.height-F.scrollerHeight)/U)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(S-this.$padding),te},g.prototype.$updateLines=function(){if(this.$changedLines){var w=this.$changedLines.firstRow,F=this.$changedLines.lastRow;this.$changedLines=null;var b=this.layerConfig;if(!(w>b.lastRow+1)&&!(F<b.firstRow)){if(F===1/0){this.$showGutter&&this.$gutterLayer.update(b),this.$textLayer.update(b);return}return this.$textLayer.updateLines(b,w,F),!0}}},g.prototype.$getLongestLine=function(){var w=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(w+=1),this.$textLayer&&w>this.$textLayer.MAX_LINE_LENGTH&&(w=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(w*this.characterWidth))},g.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},g.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},g.prototype.addGutterDecoration=function(w,F){this.$gutterLayer.addGutterDecoration(w,F)},g.prototype.removeGutterDecoration=function(w,F){this.$gutterLayer.removeGutterDecoration(w,F)},g.prototype.updateBreakpoints=function(w){this._rows=w,this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.setAnnotations=function(w){this.$gutterLayer.setAnnotations(w),this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},g.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},g.prototype.showCursor=function(){this.$cursorLayer.showCursor()},g.prototype.scrollSelectionIntoView=function(w,F,b){this.scrollCursorIntoView(w,b),this.scrollCursorIntoView(F,b)},g.prototype.scrollCursorIntoView=function(w,F,b){if(this.$size.scrollerHeight!==0){var E=this.$cursorLayer.getPixelPosition(w),M=E.left,S=E.top,x=b&&b.top||0,L=b&&b.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+x>S?(F&&R+x>S+this.lineHeight&&(S-=F*this.$size.scrollerHeight),S===0&&(S=-this.scrollMargin.top),this.session.setScrollTop(S)):R+this.$size.scrollerHeight-L<S+this.lineHeight&&(F&&R+this.$size.scrollerHeight-L<S-this.lineHeight&&(S+=F*this.$size.scrollerHeight),this.session.setScrollTop(S+this.lineHeight+L-this.$size.scrollerHeight));var A=this.scrollLeft,I=2*this.layerConfig.characterWidth;M-I<A?(M-=I,M<this.$padding+I&&(M=-this.scrollMargin.left),this.session.setScrollLeft(M)):(M+=I,A+this.$size.scrollerWidth<M+this.characterWidth?this.session.setScrollLeft(Math.round(M+this.characterWidth-this.$size.scrollerWidth)):A<=this.$padding&&M-A<this.characterWidth&&this.session.setScrollLeft(0))}},g.prototype.getScrollTop=function(){return this.session.getScrollTop()},g.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},g.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},g.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},g.prototype.scrollToRow=function(w){this.session.setScrollTop(w*this.lineHeight)},g.prototype.alignCursor=function(w,F){typeof w=="number"&&(w={row:w,column:0});var b=this.$cursorLayer.getPixelPosition(w),E=this.$size.scrollerHeight-this.lineHeight,M=b.top-E*(F||0);return this.session.setScrollTop(M),M},g.prototype.$calcSteps=function(w,F){var b=0,E=this.STEPS,M=[],S=function(x,L,R){return R*(Math.pow(x-1,3)+1)+L};for(b=0;b<E;++b)M.push(S(b/this.STEPS,w,F-w));return M},g.prototype.scrollToLine=function(w,F,b,E){var M=this.$cursorLayer.getPixelPosition({row:w,column:0}),S=M.top;F&&(S-=this.$size.scrollerHeight/2);var x=this.scrollTop;this.session.setScrollTop(S),b!==!1&&this.animateScrolling(x,E)},g.prototype.animateScrolling=function(w,F){var b=this.scrollTop;if(!this.$animatedScroll)return;var E=this;if(w==b)return;if(this.$scrollAnimation){var M=this.$scrollAnimation.steps;if(M.length&&(w=M[0],w==b))return}var S=E.$calcSteps(w,b);this.$scrollAnimation={from:w,to:b,steps:S},clearInterval(this.$timer),E.session.setScrollTop(S.shift()),E.session.$scrollTop=b;function x(){E.$timer=clearInterval(E.$timer),E.$scrollAnimation=null,E.$stopAnimation=!1,F&&F()}this.$timer=setInterval(function(){if(E.$stopAnimation){x();return}if(!E.session)return clearInterval(E.$timer);S.length?(E.session.setScrollTop(S.shift()),E.session.$scrollTop=b):b!=null?(E.session.$scrollTop=-1,E.session.setScrollTop(b),b=null):x()},10)},g.prototype.scrollToY=function(w){this.scrollTop!==w&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=w)},g.prototype.scrollToX=function(w){this.scrollLeft!==w&&(this.scrollLeft=w),this.$loop.schedule(this.CHANGE_H_SCROLL)},g.prototype.scrollTo=function(w,F){this.session.setScrollTop(F),this.session.setScrollLeft(w)},g.prototype.scrollBy=function(w,F){F&&this.session.setScrollTop(this.session.getScrollTop()+F),w&&this.session.setScrollLeft(this.session.getScrollLeft()+w)},g.prototype.isScrollableBy=function(w,F){if(F<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||F>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||w<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||w>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},g.prototype.pixelToScreenCoordinates=function(w,F){var b;if(this.$hasCssTransforms){b={top:0,left:0};var E=this.$fontMetrics.transformCoordinates([w,F]);w=E[1]-this.gutterWidth-this.margin.left,F=E[0]}else b=this.scroller.getBoundingClientRect();var M=w+this.scrollLeft-b.left-this.$padding,S=M/this.characterWidth,x=Math.floor((F+this.scrollTop-b.top)/this.lineHeight),L=this.$blockCursor?Math.floor(S):Math.round(S);return{row:x,column:L,side:S-L>0?1:-1,offsetX:M}},g.prototype.screenToTextCoordinates=function(w,F){var b;if(this.$hasCssTransforms){b={top:0,left:0};var E=this.$fontMetrics.transformCoordinates([w,F]);w=E[1]-this.gutterWidth-this.margin.left,F=E[0]}else b=this.scroller.getBoundingClientRect();var M=w+this.scrollLeft-b.left-this.$padding,S=M/this.characterWidth,x=this.$blockCursor?Math.floor(S):Math.round(S),L=Math.floor((F+this.scrollTop-b.top)/this.lineHeight);return this.session.screenToDocumentPosition(L,Math.max(x,0),M)},g.prototype.textToScreenCoordinates=function(w,F){var b=this.scroller.getBoundingClientRect(),E=this.session.documentToScreenPosition(w,F),M=this.$padding+(this.session.$bidiHandler.isBidiRow(E.row,w)?this.session.$bidiHandler.getPosLeft(E.column):Math.round(E.column*this.characterWidth)),S=E.row*this.lineHeight;return{pageX:b.left+M-this.scrollLeft,pageY:b.top+S-this.scrollTop}},g.prototype.visualizeFocus=function(){h.addCssClass(this.container,"ace_focus")},g.prototype.visualizeBlur=function(){h.removeCssClass(this.container,"ace_focus")},g.prototype.showComposition=function(w){this.$composition=w,w.cssText||(w.cssText=this.textarea.style.cssText),w.useTextareaForIME==null&&(w.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(h.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):w.markerId=this.session.addMarker(w.markerRange,"ace_composition_marker","text")},g.prototype.setCompositionText=function(w){var F=this.session.selection.cursor;this.addToken(w,"composition_placeholder",F.row,F.column),this.$moveTextAreaToCursor()},g.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),h.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var w=this.session.selection.cursor;this.removeExtraToken(w.row,w.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},g.prototype.setGhostText=function(w,F){var b=this.session.selection.cursor,E=F||{row:b.row,column:b.column};this.removeGhostText();var M=w.split(`
`);if(this.addToken(M[0],"ghost_text",E.row,E.column),this.$ghostText={text:w,position:{row:E.row,column:E.column}},M.length>1){this.$ghostTextWidget={text:M.slice(1).join(`
`),row:E.row,column:E.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var S=this.$cursorLayer.getPixelPosition(E,!0),x=this.container,L=x.getBoundingClientRect().height,R=M.length*this.lineHeight,A=R<L-S.top;if(A)return;R<L?this.scrollBy(0,(M.length-1)*this.lineHeight):this.scrollBy(0,S.top)}},g.prototype.removeGhostText=function(){if(this.$ghostText){var w=this.$ghostText.position;this.removeExtraToken(w.row,w.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},g.prototype.addToken=function(w,F,b,E){var M=this.session;M.bgTokenizer.lines[b]=null;var S={type:F,value:w},x=M.getTokens(b);if(E==null||!x.length)x.push(S);else for(var L=0,R=0;R<x.length;R++){var A=x[R];if(L+=A.value.length,E<=L){var I=A.value.length-(L-E),$=A.value.slice(0,I),H=A.value.slice(I);x.splice(R,1,{type:A.type,value:$},S,{type:A.type,value:H});break}}this.updateLines(b,b)},g.prototype.removeExtraToken=function(w,F){this.session.bgTokenizer.lines[w]=null,this.updateLines(w,w)},g.prototype.setTheme=function(w,F){var b=this;if(this.$themeId=w,b._dispatchEvent("themeChange",{theme:w}),!w||typeof w=="string"){var E=w||this.$options.theme.initialValue;r.loadModule(["theme",E],M)}else M(w);function M(S){if(b.$themeId!=w)return F&&F();if(!S||!S.cssClass)throw new Error("couldn't load module "+w+" or it didn't call define");S.$id&&(b.$themeId=S.$id),h.importCssString(S.cssText,S.cssClass,b.container),b.theme&&h.removeCssClass(b.container,b.theme.cssClass);var x="padding"in S?S.padding:"padding"in(b.theme||{})?4:b.$padding;b.$padding&&x!=b.$padding&&b.setPadding(x),b.$theme=S.cssClass,b.theme=S,h.addCssClass(b.container,S.cssClass),h.setCssClass(b.container,"ace_dark",S.isDark),b.$size&&(b.$size.width=0,b.$updateSizeAsync()),b._dispatchEvent("themeLoaded",{theme:S}),F&&F()}},g.prototype.getTheme=function(){return this.$themeId},g.prototype.setStyle=function(w,F){h.setCssClass(this.container,w,F!==!1)},g.prototype.unsetStyle=function(w){h.removeCssClass(this.container,w)},g.prototype.setCursorStyle=function(w){h.setStyle(this.scroller.style,"cursor",w)},g.prototype.setMouseCursor=function(w){h.setStyle(this.scroller.style,"cursor",w)},g.prototype.attachToShadowRoot=function(){h.importCssString(y,"ace_editor.css",this.container)},g.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},g.prototype.$updateCustomScrollbar=function(w){var F=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,w===!0?(this.scrollBarV=new c(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(b){F.$scrollAnimation||F.session.setScrollTop(b.data-F.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(b){F.$scrollAnimation||F.session.setScrollLeft(b.data-F.scrollMargin.left)}),this.$scrollDecorator=new C(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new p(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.addEventListener("scroll",function(b){F.$scrollAnimation||F.session.setScrollTop(b.data-F.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(b){F.$scrollAnimation||F.session.setScrollLeft(b.data-F.scrollMargin.left)}))},g.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var w=this;this.$resizeTimer=o.delayedCall(function(){w.destroyed||w.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(F){var b=F[0].contentRect.width,E=F[0].contentRect.height;Math.abs(w.$size.width-b)>1||Math.abs(w.$size.height-E)>1?w.$resizeTimer.delay():w.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},g}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,a.implement(D.prototype,v),r.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(g){!g&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):g&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(g){this.$textLayer.setShowInvisibles(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(g){typeof g=="number"&&(this.$printMarginColumn=g),this.$showPrintMargin=!!g,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(g){this.$gutter.style.display=g?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(g){this.$gutterLayer.$useSvgGutterIcons=g},initialValue:!1},showFoldedAnnotations:{set:function(g){this.$gutterLayer.$showFoldedAnnotations=g},initialValue:!1},fadeFoldWidgets:{set:function(g){h.setCssClass(this.$gutter,"ace_fade-fold-widgets",g)},initialValue:!1},showFoldWidgets:{set:function(g){this.$gutterLayer.setShowFoldWidgets(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(g){this.$textLayer.setDisplayIndentGuides(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(g){this.$textLayer.setHighlightIndentGuides(g)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(g){this.$gutterLayer.setHighlightGutterLine(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(g){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(g){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(g){typeof g=="number"&&(g=g+"px"),this.container.style.fontSize=g,this.updateFontSize()},initialValue:12},fontFamily:{set:function(g){this.container.style.fontFamily=g,this.updateFontSize()}},maxLines:{set:function(g){this.updateFull()}},minLines:{set:function(g){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(g){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(g){g=+g||0,this.$scrollPastEnd!=g&&(this.$scrollPastEnd=g,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(g){this.$gutterLayer.$fixedWidth=!!g,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(g){this.$updateCustomScrollbar(g)},initialValue:!1},theme:{set:function(g){this.setTheme(g)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!T.isMobile&&!T.isIE}}),t.VirtualRenderer=D});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var a=e("../lib/oop"),h=e("../lib/net"),o=e("../lib/event_emitter").EventEmitter,r=e("../config");function l(f){var p="importScripts('"+h.qualifyURL(f)+"');";try{return new Blob([p],{type:"application/javascript"})}catch{var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,c=new d;return c.append(p),c.getBlob("application/javascript")}}function u(f){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(r.get("loadWorkerFromBlob")){var p=l(f),d=window.URL||window.webkitURL,c=d.createObjectURL(p);return new Worker(c)}return new Worker(f)}var i=function(f){f.postMessage||(f=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=f,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){a.implement(this,o),this.$createWorkerFromOldConfig=function(f,p,d,c,_){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),r.get("packaged")||!e.toUrl)c=c||r.moduleUrl(p,"worker");else{var m=this.$normalizePath;c=c||m(e.toUrl("ace/worker/worker.js",null,"_"));var v={};f.forEach(function(y){v[y]=m(e.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=u(c),_&&this.send("importScripts",_),this.$worker.postMessage({init:!0,tlns:v,module:p,classname:d}),this.$worker},this.onMessage=function(f){var p=f.data;switch(p.type){case"event":this._signal(p.name,{data:p.data});break;case"call":var d=this.callbacks[p.id];d&&(d(p.data),delete this.callbacks[p.id]);break;case"error":this.reportError(p.data);break;case"log":window.console&&console.log&&console.log.apply(console,p.data);break}},this.reportError=function(f){window.console&&console.error&&console.error(f)},this.$normalizePath=function(f){return h.qualifyURL(f)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(f){f.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(f,p){this.$worker.postMessage({command:f,args:p})},this.call=function(f,p,d){if(d){var c=this.callbackId++;this.callbacks[c]=d,p.push(c)}this.send(f,p)},this.emit=function(f,p){try{p.data&&p.data.err&&(p.data.err={message:p.data.err.message,stack:p.data.err.stack,code:p.data.err.code}),this.$worker&&this.$worker.postMessage({event:f,data:{data:p.data}})}catch(d){console.error(d.stack)}},this.attachToDocument=function(f){this.$doc&&this.terminate(),this.$doc=f,this.call("setValue",[f.getValue()]),f.on("change",this.changeListener,!0)},this.changeListener=function(f){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),f.action=="insert"?this.deltaQueue.push(f.start,f.lines):this.deltaQueue.push(f.start,f.end)},this.$sendDeltaQueue=function(){var f=this.deltaQueue;f&&(this.deltaQueue=null,f.length>50&&f.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:f}))}}).call(i.prototype);var s=function(f,p,d){var c=null,_=!1,m=Object.create(o),v=[],y=new i({messageBuffer:v,terminate:function(){},postMessage:function(T){v.push(T),c&&(_?setTimeout(C):C())}});y.setEmitSync=function(T){_=T};var C=function(){var T=v.shift();T.command?c[T.command].apply(c,T.args):T.event&&m._signal(T.event,T.data)};return m.postMessage=function(T){y.onMessage({data:T})},m.callback=function(T,D){this.postMessage({type:"call",id:D,data:T})},m.emit=function(T,D){this.postMessage({type:"event",name:T,data:D})},r.loadModule(["worker",p],function(T){for(c=new T[d](m);v.length;)C()}),y};t.UIWorkerClient=s,t.WorkerClient=i,t.createWorker=u});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var a=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,o=e("./lib/oop"),r=function(){function l(u,i,s,f,p,d){var c=this;this.length=i,this.session=u,this.doc=u.getDocument(),this.mainClass=p,this.othersClass=d,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=f,this.$onCursorChange=function(){setTimeout(function(){c.onCursorChange()})},this.$pos=s;var _=u.getUndoManager().$undoStack||u.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=_.length,this.setup(),u.selection.on("changeCursor",this.$onCursorChange)}return l.prototype.setup=function(){var u=this,i=this.doc,s=this.session;this.selectionBefore=s.selection.toJSON(),s.selection.inMultiSelectMode&&s.selection.toSingleRange(),this.pos=i.createAnchor(this.$pos.row,this.$pos.column);var f=this.pos;f.$insertRight=!0,f.detach(),f.markerId=s.addMarker(new a(f.row,f.column,f.row,f.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(p){var d=i.createAnchor(p.row,p.column);d.$insertRight=!0,d.detach(),u.others.push(d)}),s.setUndoSelect(!1)},l.prototype.showOtherMarkers=function(){if(!this.othersActive){var u=this.session,i=this;this.othersActive=!0,this.others.forEach(function(s){s.markerId=u.addMarker(new a(s.row,s.column,s.row,s.column+i.length),i.othersClass,null,!1)})}},l.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var u=0;u<this.others.length;u++)this.session.removeMarker(this.others[u].markerId)}},l.prototype.onUpdate=function(u){if(this.$updating)return this.updateAnchors(u);var i=u;if(i.start.row===i.end.row&&i.start.row===this.pos.row){this.$updating=!0;var s=u.action==="insert"?i.end.column-i.start.column:i.start.column-i.end.column,f=i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1,p=i.start.column-this.pos.column;if(this.updateAnchors(u),f&&(this.length+=s),f&&!this.session.$fromUndo){if(u.action==="insert")for(var d=this.others.length-1;d>=0;d--){var c=this.others[d],_={row:c.row,column:c.column+p};this.doc.insertMergedLines(_,u.lines)}else if(u.action==="remove")for(var d=this.others.length-1;d>=0;d--){var c=this.others[d],_={row:c.row,column:c.column+p};this.doc.remove(new a(_.row,_.column,_.row,_.column-s))}}this.$updating=!1,this.updateMarkers()}},l.prototype.updateAnchors=function(u){this.pos.onChange(u);for(var i=this.others.length;i--;)this.others[i].onChange(u);this.updateMarkers()},l.prototype.updateMarkers=function(){if(!this.$updating){var u=this,i=this.session,s=function(p,d){i.removeMarker(p.markerId),p.markerId=i.addMarker(new a(p.row,p.column,p.row,p.column+u.length),d,null,!1)};s(this.pos,this.mainClass);for(var f=this.others.length;f--;)s(this.others[f],this.othersClass)}},l.prototype.onCursorChange=function(u){if(!(this.$updating||!this.session)){var i=this.session.selection.getCursor();i.row===this.pos.row&&i.column>=this.pos.column&&i.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",u)):(this.hideOtherMarkers(),this._emit("cursorLeave",u))}},l.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},l.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var u=this.session.getUndoManager(),i=(u.$undoStack||u.$undostack).length-this.$undoStackDepth,s=0;s<i;s++)u.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},l}();o.implement(r.prototype,h),t.PlaceHolder=r});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var a=e("../lib/event"),h=e("../lib/useragent");function o(l,u){return l.row==u.row&&l.column==u.column}function r(l){var u=l.domEvent,i=u.altKey,s=u.shiftKey,f=u.ctrlKey,p=l.getAccelKey(),d=l.getButton();if(f&&h.isMac&&(d=u.button),l.editor.inMultiSelectMode&&d==2){l.editor.textInput.onContextMenu(l.domEvent);return}if(!f&&!i&&!p){d===0&&l.editor.inMultiSelectMode&&l.editor.exitMultiSelectMode();return}if(d===0){var c=l.editor,_=c.selection,m=c.inMultiSelectMode,v=l.getDocumentPosition(),y=_.getCursor(),C=l.inSelection()||_.isEmpty()&&o(v,y),T=l.x,D=l.y,g=function(H){T=H.clientX,D=H.clientY},w=c.session,F=c.renderer.pixelToScreenCoordinates(T,D),b=F,E;if(c.$mouseHandler.$enableJumpToDef)f&&i||p&&i?E=s?"block":"add":i&&c.$blockSelectEnabled&&(E="block");else if(p&&!i){if(E="add",!m&&s)return}else i&&c.$blockSelectEnabled&&(E="block");if(E&&h.isMac&&u.ctrlKey&&c.$mouseHandler.cancelContextMenu(),E=="add"){if(!m&&C)return;if(!m){var M=_.toOrientedRange();c.addSelectionMarker(M)}var S=_.rangeList.rangeAtPoint(v);c.inVirtualSelectionMode=!0,s&&(S=null,M=_.ranges[0]||M,c.removeSelectionMarker(M)),c.once("mouseup",function(){var H=_.toOrientedRange();S&&H.isEmpty()&&o(S.cursor,H.cursor)?_.substractPoint(H.cursor):(s?_.substractPoint(M.cursor):M&&(c.removeSelectionMarker(M),_.addRange(M)),_.addRange(H)),c.inVirtualSelectionMode=!1})}else if(E=="block"){l.stop(),c.inVirtualSelectionMode=!0;var x,L=[],R=function(){var H=c.renderer.pixelToScreenCoordinates(T,D),P=w.screenToDocumentPosition(H.row,H.column,H.offsetX);o(b,H)&&o(P,_.lead)||(b=H,c.selection.moveToPosition(P),c.renderer.scrollCursorIntoView(),c.removeSelectionMarkers(L),L=_.rectangularRangeBlock(b,F),c.$mouseHandler.$clickSelection&&L.length==1&&L[0].isEmpty()&&(L[0]=c.$mouseHandler.$clickSelection.clone()),L.forEach(c.addSelectionMarker,c),c.updateSelectionMarkers())};m&&!p?_.toSingleRange():!m&&p&&(x=_.toOrientedRange(),c.addSelectionMarker(x)),s?F=w.documentToScreenPosition(_.lead):_.moveToPosition(v),b={row:-1,column:-1};var A=function(H){R(),clearInterval($),c.removeSelectionMarkers(L),L.length||(L=[_.toOrientedRange()]),x&&(c.removeSelectionMarker(x),_.toSingleRange(x));for(var P=0;P<L.length;P++)_.addRange(L[P]);c.inVirtualSelectionMode=!1,c.$mouseHandler.$clickSelection=null},I=R;a.capture(c.container,g,A);var $=setInterval(function(){I()},20);return l.preventDefault()}}}t.onMouseDown=r});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(h){h.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(h){h.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(h){h.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(h){h.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(h){h.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(h){h.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(h){h.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(h){h.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(h){h.multiSelect.rangeCount>1?h.multiSelect.joinSelections():h.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(h){h.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(h){h.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(h){h.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(h){h.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(h){return h&&h.inMultiSelectMode}}];var a=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new a(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var a=e("./range_list").RangeList,h=e("./range").Range,o=e("./selection").Selection,r=e("./mouse/multi_select_handler").onMouseDown,l=e("./lib/event"),u=e("./lib/lang"),i=e("./commands/multi_select_commands");t.commands=i.defaultCommands.concat(i.multiSelectCommands);var s=e("./search").Search,f=new s;function p(y,C,T){return f.$options.wrap=!0,f.$options.needle=C,f.$options.backwards=T==-1,f.find(y)}var d=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(d.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,C){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var T=this.toOrientedRange();if(this.rangeList.add(T),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),C||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(T),this.$onAddRange(T)}y.cursor||(y.cursor=y.end);var D=this.rangeList.add(y);return this.$onAddRange(y),D.length&&this.$onRemoveRange(D),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),C||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var C=this.rangeList.removeAll();C.length&&this.$onRemoveRange(C),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var C=this.rangeList.substractPoint(y);if(C)return this.$onRemoveRange(C),C[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var C=this.rangeList.ranges.pop();y.push(C),this.rangeCount=0}for(var T=y.length;T--;){var D=this.ranges.indexOf(y[T]);this.ranges.splice(D,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),C=C||this.ranges[0],C&&!C.isEqual(this.getRange())&&this.fromOrientedRange(C)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],C=[],T=0;T<y.length;T++){var D=y[T],g=D.start.row,w=D.end.row;if(g===w)C.push(D.clone());else{for(C.push(new h(g,D.start.column,g,this.session.getLine(g).length));++g<w;)C.push(this.getLineRange(g,!0));C.push(new h(w,0,w,D.end.column))}T==0&&!this.isBackwards()&&(C=C.reverse())}this.toSingleRange();for(var T=C.length;T--;)this.addRange(C[T])},this.joinSelections=function(){var y=this.rangeList.ranges,C=y[y.length-1],T=h.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(T,C.cursor==C.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,C=y[y.length-1],T=h.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(T,C.cursor==C.start)}else{var D=this.session.documentToScreenPosition(this.cursor),g=this.session.documentToScreenPosition(this.anchor),w=this.rectangularRangeBlock(D,g);w.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,C,T){var D=[],g=y.column<C.column;if(g)var w=y.column,F=C.column,b=y.offsetX,E=C.offsetX;else var w=C.column,F=y.column,b=C.offsetX,E=y.offsetX;var M=y.row<C.row;if(M)var S=y.row,x=C.row;else var S=C.row,x=y.row;w<0&&(w=0),S<0&&(S=0),S==x&&(T=!0);for(var L,R=S;R<=x;R++){var A=h.fromPoints(this.session.screenToDocumentPosition(R,w,b),this.session.screenToDocumentPosition(R,F,E));if(A.isEmpty()){if(L&&_(A.end,L))break;L=A.end}A.cursor=g?A.start:A.end,D.push(A)}if(M&&D.reverse(),!T){for(var I=D.length-1;D[I].isEmpty()&&I>0;)I--;if(I>0)for(var $=0;D[$].isEmpty();)$++;for(var H=I;H>=$;H--)D[H].isEmpty()&&D.splice(H,1)}return D}}.call(o.prototype);var c=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var C=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",C),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var C=this.session.$selectionMarkers.indexOf(y);C!=-1&&this.session.$selectionMarkers.splice(C,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var C=this.session.$selectionMarkers,T=y.length;T--;){var D=y[T];if(D.marker){this.session.removeMarker(D.marker);var g=C.indexOf(D);g!=-1&&C.splice(g,1)}}this.session.selectionMarkerCount=C.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(i.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(i.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var C=y.command,T=y.editor;if(T.multiSelect){if(C.multiSelectAction)C.multiSelectAction=="forEach"?D=T.forEachSelection(C,y.args):C.multiSelectAction=="forEachLine"?D=T.forEachSelection(C,y.args,!0):C.multiSelectAction=="single"?(T.exitMultiSelectMode(),D=C.exec(T,y.args||{})):D=C.multiSelectAction(T,y.args||{});else{var D=C.exec(T,y.args||{});T.multiSelect.addRange(T.multiSelect.toOrientedRange()),T.multiSelect.mergeOverlappingRanges()}return D}},this.forEachSelection=function(y,C,T){if(!this.inVirtualSelectionMode){var D=T&&T.keepOrder,g=T==!0||T&&T.$byLines,w=this.session,F=this.selection,b=F.rangeList,E=(D?F:b).ranges,M;if(!E.length)return y.exec?y.exec(this,C||{}):y(this,C||{});var S=F._eventRegistry;F._eventRegistry={};var x=new o(w);this.inVirtualSelectionMode=!0;for(var L=E.length;L--;){if(g)for(;L>0&&E[L].start.row==E[L-1].end.row;)L--;x.fromOrientedRange(E[L]),x.index=L,this.selection=w.selection=x;var R=y.exec?y.exec(this,C||{}):y(this,C||{});!M&&R!==void 0&&(M=R),x.toOrientedRange(E[L])}x.detach(),this.selection=w.selection=F,this.inVirtualSelectionMode=!1,F._eventRegistry=S,F.mergeOverlappingRanges(),F.ranges[0]&&F.fromOrientedRange(F.ranges[0]);var A=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),A&&A.from==A.to&&this.renderer.animateScrolling(A.from),M}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var C=this.multiSelect.rangeList.ranges,T=[],D=0;D<C.length;D++)T.push(this.session.getTextRange(C[D]));var g=this.session.getDocument().getNewLineCharacter();y=T.join(g),y.length==(T.length-1)*g.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,C){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var T=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&C==this.multiSelect.anchor)return;var D=C==this.multiSelect.anchor?T.cursor==T.start?T.end:T.start:T.cursor;D.row!=C.row||this.session.$clipPositionToDocument(D.row,D.column).column!=C.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,C,T){if(C=C||{},C.needle=y||C.needle,C.needle==null){var D=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();C.needle=this.session.getTextRange(D)}this.$search.set(C);var g=this.$search.findAll(this.session);if(!g.length)return 0;var w=this.multiSelect;T||w.toSingleRange(g[0]);for(var F=g.length;F--;)w.addRange(g[F],!0);return D&&w.rangeList.rangeAtPoint(D.start)&&w.addRange(D,!0),g.length},this.selectMoreLines=function(y,C){var T=this.selection.toOrientedRange(),D=T.cursor==T.end,g=this.session.documentToScreenPosition(T.cursor);this.selection.$desiredColumn&&(g.column=this.selection.$desiredColumn);var w=this.session.screenToDocumentPosition(g.row+y,g.column);if(T.isEmpty())var b=w;else var F=this.session.documentToScreenPosition(D?T.end:T.start),b=this.session.screenToDocumentPosition(F.row+y,F.column);if(D){var E=h.fromPoints(w,b);E.cursor=E.start}else{var E=h.fromPoints(b,w);E.cursor=E.end}if(E.desiredColumn=g.column,!this.selection.inMultiSelectMode)this.selection.addRange(T);else if(C)var M=T.cursor;this.selection.addRange(E),M&&this.selection.substractPoint(M)},this.transposeSelections=function(y){for(var C=this.session,T=C.multiSelect,D=T.ranges,g=D.length;g--;){var w=D[g];if(w.isEmpty()){var F=C.getWordRange(w.start.row,w.start.column);w.start.row=F.start.row,w.start.column=F.start.column,w.end.row=F.end.row,w.end.column=F.end.column}}T.mergeOverlappingRanges();for(var b=[],g=D.length;g--;){var w=D[g];b.unshift(C.getTextRange(w))}y<0?b.unshift(b.pop()):b.push(b.shift());for(var g=D.length;g--;){var w=D[g],E=w.clone();C.replace(w,b[g]),w.start.row=E.start.row,w.start.column=E.start.column}T.fromOrientedRange(T.ranges[0])},this.selectMore=function(y,C,T){var D=this.session,g=D.multiSelect,w=g.toOrientedRange();if(!(w.isEmpty()&&(w=D.getWordRange(w.start.row,w.start.column),w.cursor=y==-1?w.start:w.end,this.multiSelect.addRange(w),T))){var F=D.getTextRange(w),b=p(D,F,y);b&&(b.cursor=y==-1?b.start:b.end,this.session.unfold(b),this.multiSelect.addRange(b),this.renderer.scrollCursorIntoView(null,.5)),C&&this.multiSelect.substractPoint(w.cursor)}},this.alignCursors=function(){var y=this.session,C=y.multiSelect,T=C.ranges,D=-1,g=T.filter(function(I){if(I.cursor.row==D)return!0;D=I.cursor.row});if(!T.length||g.length==T.length-1){var w=this.selection.getRange(),F=w.start.row,b=w.end.row,E=F==b;if(E){var M=this.session.getLength(),S;do S=this.session.getLine(b);while(/[=:]/.test(S)&&++b<M);do S=this.session.getLine(F);while(/[=:]/.test(S)&&--F>0);F<0&&(F=0),b>=M&&(b=M-1)}var x=this.session.removeFullLines(F,b);x=this.$reAlignText(x,E),this.session.insert({row:F,column:0},x.join(`
`)+`
`),E||(w.start.column=0,w.end.column=x[x.length-1].length),this.selection.setRange(w)}else{g.forEach(function(I){C.substractPoint(I.cursor)});var L=0,R=1/0,A=T.map(function(I){var $=I.cursor,H=y.getLine($.row),P=H.substr($.column).search(/\S/g);return P==-1&&(P=0),$.column>L&&(L=$.column),P<R&&(R=P),P});T.forEach(function(I,$){var H=I.cursor,P=L-H.column,q=A[$]-R;P>q?y.insert(H,u.stringRepeat(" ",P-q)):y.remove(new h(H.row,H.column,H.row,H.column-P+q)),I.start.column=I.end.column=L,I.start.row=I.end.row=H.row,I.cursor=I.end}),C.fromOrientedRange(T[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,C){var T=!0,D=!0,g,w,F;return y.map(function(x){var L=x.match(/(\s*)(.*?)(\s*)([=:].*)/);return L?g==null?(g=L[1].length,w=L[2].length,F=L[3].length,L):(g+w+F!=L[1].length+L[2].length+L[3].length&&(D=!1),g!=L[1].length&&(T=!1),g>L[1].length&&(g=L[1].length),w<L[2].length&&(w=L[2].length),F>L[3].length&&(F=L[3].length),L):[x]}).map(C?E:T?D?M:E:S);function b(x){return u.stringRepeat(" ",x)}function E(x){return x[2]?b(g)+x[2]+b(w-x[2].length+F)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function M(x){return x[2]?b(g+w-x[2].length)+x[2]+b(F)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function S(x){return x[2]?b(g)+x[2]+b(F)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}}}).call(c.prototype);function _(y,C){return y.row==C.row&&y.column==C.column}t.onSessionChange=function(y){var C=y.session;C&&!C.multiSelect&&(C.$selectionMarkers=[],C.selection.$initRangeList(),C.multiSelect=C.selection),this.multiSelect=C&&C.multiSelect;var T=y.oldSession;T&&(T.multiSelect.off("addRange",this.$onAddRange),T.multiSelect.off("removeRange",this.$onRemoveRange),T.multiSelect.off("multiSelect",this.$onMultiSelect),T.multiSelect.off("singleSelect",this.$onSingleSelect),T.multiSelect.lead.off("change",this.$checkMultiselectChange),T.multiSelect.anchor.off("change",this.$checkMultiselectChange)),C&&(C.multiSelect.on("addRange",this.$onAddRange),C.multiSelect.on("removeRange",this.$onRemoveRange),C.multiSelect.on("multiSelect",this.$onMultiSelect),C.multiSelect.on("singleSelect",this.$onSingleSelect),C.multiSelect.lead.on("change",this.$checkMultiselectChange),C.multiSelect.anchor.on("change",this.$checkMultiselectChange)),C&&this.inMultiSelectMode!=C.selection.inMultiSelectMode&&(C.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function m(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=t.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",r),y.commands.addCommands(i.defaultCommands),v(y))}function v(y){if(!y.textInput)return;var C=y.textInput.getElement(),T=!1;l.addListener(C,"keydown",function(g){var w=g.keyCode==18&&!(g.ctrlKey||g.shiftKey||g.metaKey);y.$blockSelectEnabled&&w?T||(y.renderer.setMouseCursor("crosshair"),T=!0):T&&D()},y),l.addListener(C,"keyup",D,y),l.addListener(C,"blur",D,y);function D(g){T&&(y.renderer.setMouseCursor(""),T=!1)}}t.MultiSelect=m,e("./config").defineOptions(c.prototype,"editor",{enableMultiselect:{set:function(y){m(this),y?this.on("mousedown",r):this.off("mousedown",r)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("../../range").Range,h=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(o,r,l){var u=o.getLine(l);return this.foldingStartMarker.test(u)?"start":r=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(u)?"end":""},this.getFoldWidgetRange=function(o,r,l){return null},this.indentationBlock=function(o,r,l){var u=/\S/,i=o.getLine(r),s=i.search(u);if(s!=-1){for(var f=l||i.length,p=o.getLength(),d=r,c=r;++r<p;){var _=o.getLine(r).search(u);if(_!=-1){if(_<=s){var m=o.getTokenAt(r,0);if(!m||m.type!=="string")break}c=r}}if(c>d){var v=o.getLine(c).length;return new a(d,f,c,v)}}},this.openingBracketBlock=function(o,r,l,u,i){var s={row:l,column:u+1},f=o.$findClosingBracket(r,s,i);if(f){var p=o.foldWidgets[f.row];return p==null&&(p=o.getFoldWidget(f.row)),p=="start"&&f.row>s.row&&(f.row--,f.column=o.getLine(f.row).length),a.fromPoints(s,f)}},this.closingBracketBlock=function(o,r,l,u,i){var s={row:l,column:u},f=o.$findOpeningBracket(r,s);if(f)return f.column++,s.column--,a.fromPoints(f,s)}}).call(h.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,n){"use strict";var a=e("../line_widgets").LineWidgets,h=e("../lib/dom"),o=e("../range").Range,r=e("../config").nls;function l(i,s,f){for(var p=0,d=i.length-1;p<=d;){var c=p+d>>1,_=f(s,i[c]);if(_>0)p=c+1;else if(_<0)d=c-1;else return c}return-(p+1)}function u(i,s,f){var p=i.getAnnotations().sort(o.comparePoints);if(p.length){var d=l(p,{row:s,column:-1},o.comparePoints);d<0&&(d=-d-1),d>=p.length?d=f>0?0:p.length-1:d===0&&f<0&&(d=p.length-1);var c=p[d];if(!(!c||!f)){if(c.row===s){do c=p[d+=f];while(c&&c.row===s);if(!c)return p.slice()}var _=[];s=c.row;do _[f<0?"unshift":"push"](c),c=p[d+=f];while(c&&c.row==s);return _.length&&_}}}t.showErrorMarker=function(i,s){var f=i.session;f.widgetManager||(f.widgetManager=new a(f),f.widgetManager.attach(i));var p=i.getCursorPosition(),d=p.row,c=f.widgetManager.getWidgetsAtRow(d).filter(function(w){return w.type=="errorMarker"})[0];c?c.destroy():d-=s;var _=u(f,d,s),m;if(_){var v=_[0];p.column=(v.pos&&typeof v.column!="number"?v.pos.sc:v.column)||0,p.row=v.row,m=i.renderer.$gutterLayer.$annotations[p.row]}else{if(c)return;m={text:[r("Looks good!")],className:"ace_ok"}}i.session.unfold(p.row),i.selection.moveToPosition(p);var y={row:p.row,fixedWidth:!0,coverGutter:!0,el:h.createElement("div"),type:"errorMarker"},C=y.el.appendChild(h.createElement("div")),T=y.el.appendChild(h.createElement("div"));T.className="error_widget_arrow "+m.className;var D=i.renderer.$cursorLayer.getPixelPosition(p).left;T.style.left=D+i.renderer.gutterWidth-5+"px",y.el.className="error_widget_wrapper",C.className="error_widget "+m.className,C.innerHTML=m.text.join("<br>"),C.appendChild(h.createElement("div"));var g=function(w,F,b){if(F===0&&(b==="esc"||b==="return"))return y.destroy(),{command:"null"}};y.destroy=function(){i.$mouseHandler.isMousePressed||(i.keyBinding.removeKeyboardHandler(g),f.widgetManager.removeLineWidget(y),i.off("changeSelection",y.destroy),i.off("changeSession",y.destroy),i.off("mouseup",y.destroy),i.off("change",y.destroy))},i.keyBinding.addKeyboardHandler(g),i.on("changeSelection",y.destroy),i.on("changeSession",y.destroy),i.on("mouseup",y.destroy),i.on("change",y.destroy),i.session.widgetManager.addLineWidget(y),y.el.onmousedown=i.focus.bind(i),i.renderer.scrollCursorIntoView(null,.5,{bottom:y.el.offsetHeight})},h.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var a=e("./lib/dom"),h=e("./range").Range,o=e("./editor").Editor,r=e("./edit_session").EditSession,l=e("./undomanager").UndoManager,u=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(i,s){if(typeof i=="string"){var f=i;if(i=document.getElementById(f),!i)throw new Error("ace.edit can't find div #"+f)}if(i&&i.env&&i.env.editor instanceof o)return i.env.editor;var p="";if(i&&/input|textarea/i.test(i.tagName)){var d=i;p=d.value,i=a.createElement("pre"),d.parentNode.replaceChild(i,d)}else i&&(p=i.textContent,i.innerHTML="");var c=t.createEditSession(p),_=new o(new u(i),c,s),m={document:c,editor:_,onResize:_.resize.bind(_,null)};return d&&(m.textarea=d),_.on("destroy",function(){m.editor.container.env=null}),_.container.env=_.env=m,_},t.createEditSession=function(i,s){var f=new r(i,s);return f.setUndoManager(new l),f},t.Range=h,t.Editor=o,t.EditSession=r,t.UndoManager=l,t.VirtualRenderer=u,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var n in e)e.hasOwnProperty(n)&&(t.ace[n]=e[n]);t.ace.default=t.ace,typeof Kg=="object"&&typeof rN=="object"&&Kg&&(Kg.exports=t.ace)})})()});var CN=Tt(DN=>{"use strict";DN.supports=function(...t){let n=t.reduce((a,h)=>Object.assign(a,h),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}});var Pa=Tt((H8e,bN)=>{"use strict";bN.exports=class extends Error{constructor(t,n){super(t||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var EN=Tt(ny=>{"use strict";ny.byteLength=Gee;ny.toByteArray=jee;ny.fromByteArray=Xee;var vi=[],ca=[],zee=typeof Uint8Array<"u"?Uint8Array:Array,h1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Bc=0,wN=h1.length;Bc<wN;++Bc)vi[Bc]=h1[Bc],ca[h1.charCodeAt(Bc)]=Bc;var Bc,wN;ca[45]=62;ca[95]=63;function SN(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var a=n===t?0:4-n%4;return[n,a]}function Gee(e){var t=SN(e),n=t[0],a=t[1];return(n+a)*3/4-a}function Jee(e,t,n){return(t+n)*3/4-n}function jee(e){var t,n=SN(e),a=n[0],h=n[1],o=new zee(Jee(e,a,h)),r=0,l=h>0?a-4:a,u;for(u=0;u<l;u+=4)t=ca[e.charCodeAt(u)]<<18|ca[e.charCodeAt(u+1)]<<12|ca[e.charCodeAt(u+2)]<<6|ca[e.charCodeAt(u+3)],o[r++]=t>>16&255,o[r++]=t>>8&255,o[r++]=t&255;return h===2&&(t=ca[e.charCodeAt(u)]<<2|ca[e.charCodeAt(u+1)]>>4,o[r++]=t&255),h===1&&(t=ca[e.charCodeAt(u)]<<10|ca[e.charCodeAt(u+1)]<<4|ca[e.charCodeAt(u+2)]>>2,o[r++]=t>>8&255,o[r++]=t&255),o}function Kee(e){return vi[e>>18&63]+vi[e>>12&63]+vi[e>>6&63]+vi[e&63]}function Qee(e,t,n){for(var a,h=[],o=t;o<n;o+=3)a=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),h.push(Kee(a));return h.join("")}function Xee(e){for(var t,n=e.length,a=n%3,h=[],o=16383,r=0,l=n-a;r<l;r+=o)h.push(Qee(e,r,r+o>l?l:r+o));return a===1?(t=e[n-1],h.push(vi[t>>2]+vi[t<<4&63]+"==")):a===2&&(t=(e[n-2]<<8)+e[n-1],h.push(vi[t>>10]+vi[t>>4&63]+vi[t<<2&63]+"=")),h.join("")}});var TN=Tt(_1=>{_1.read=function(e,t,n,a,h){var o,r,l=h*8-a-1,u=(1<<l)-1,i=u>>1,s=-7,f=n?h-1:0,p=n?-1:1,d=e[t+f];for(f+=p,o=d&(1<<-s)-1,d>>=-s,s+=l;s>0;o=o*256+e[t+f],f+=p,s-=8);for(r=o&(1<<-s)-1,o>>=-s,s+=a;s>0;r=r*256+e[t+f],f+=p,s-=8);if(o===0)o=1-i;else{if(o===u)return r?NaN:(d?-1:1)*(1/0);r=r+Math.pow(2,a),o=o-i}return(d?-1:1)*r*Math.pow(2,o-a)};_1.write=function(e,t,n,a,h,o){var r,l,u,i=o*8-h-1,s=(1<<i)-1,f=s>>1,p=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=a?0:o-1,c=a?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,r=s):(r=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-r))<1&&(r--,u*=2),r+f>=1?t+=p/u:t+=p*Math.pow(2,1-f),t*u>=2&&(r++,u/=2),r+f>=s?(l=0,r=s):r+f>=1?(l=(t*u-1)*Math.pow(2,h),r=r+f):(l=t*Math.pow(2,f-1)*Math.pow(2,h),r=0));h>=8;e[n+d]=l&255,d+=c,l/=256,h-=8);for(r=r<<h|l,i+=h;i>0;e[n+d]=r&255,d+=c,r/=256,i-=8);e[n+d-c]|=_*128}});var ay=Tt(Wf=>{"use strict";var m1=EN(),Nf=TN(),MN=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Wf.Buffer=re;Wf.SlowBuffer=rte;Wf.INSPECT_MAX_BYTES=50;var ry=2147483647;Wf.kMaxLength=ry;re.TYPED_ARRAY_SUPPORT=Yee();!re.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Yee(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(re.prototype,"parent",{enumerable:!0,get:function(){if(re.isBuffer(this))return this.buffer}});Object.defineProperty(re.prototype,"offset",{enumerable:!0,get:function(){if(re.isBuffer(this))return this.byteOffset}});function iu(e){if(e>ry)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,re.prototype),t}function re(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return D1(e)}return AN(e,t,n)}re.poolSize=8192;function AN(e,t,n){if(typeof e=="string")return ete(e,t);if(ArrayBuffer.isView(e))return tte(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(gi(e,ArrayBuffer)||e&&gi(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(gi(e,SharedArrayBuffer)||e&&gi(e.buffer,SharedArrayBuffer)))return g1(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let a=e.valueOf&&e.valueOf();if(a!=null&&a!==e)return re.from(a,t,n);let h=nte(e);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return re.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}re.from=function(e,t,n){return AN(e,t,n)};Object.setPrototypeOf(re.prototype,Uint8Array.prototype);Object.setPrototypeOf(re,Uint8Array);function IN(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Zee(e,t,n){return IN(e),e<=0?iu(e):t!==void 0?typeof n=="string"?iu(e).fill(t,n):iu(e).fill(t):iu(e)}re.alloc=function(e,t,n){return Zee(e,t,n)};function D1(e){return IN(e),iu(e<0?0:C1(e)|0)}re.allocUnsafe=function(e){return D1(e)};re.allocUnsafeSlow=function(e){return D1(e)};function ete(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!re.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=RN(e,t)|0,a=iu(n),h=a.write(e,t);return h!==n&&(a=a.slice(0,h)),a}function v1(e){let t=e.length<0?0:C1(e.length)|0,n=iu(t);for(let a=0;a<t;a+=1)n[a]=e[a]&255;return n}function tte(e){if(gi(e,Uint8Array)){let t=new Uint8Array(e);return g1(t.buffer,t.byteOffset,t.byteLength)}return v1(e)}function g1(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let a;return t===void 0&&n===void 0?a=new Uint8Array(e):n===void 0?a=new Uint8Array(e,t):a=new Uint8Array(e,t,n),Object.setPrototypeOf(a,re.prototype),a}function nte(e){if(re.isBuffer(e)){let t=C1(e.length)|0,n=iu(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||w1(e.length)?iu(0):v1(e);if(e.type==="Buffer"&&Array.isArray(e.data))return v1(e.data)}function C1(e){if(e>=ry)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ry.toString(16)+" bytes");return e|0}function rte(e){return+e!=e&&(e=0),re.alloc(+e)}re.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==re.prototype};re.compare=function(t,n){if(gi(t,Uint8Array)&&(t=re.from(t,t.offset,t.byteLength)),gi(n,Uint8Array)&&(n=re.from(n,n.offset,n.byteLength)),!re.isBuffer(t)||!re.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let a=t.length,h=n.length;for(let o=0,r=Math.min(a,h);o<r;++o)if(t[o]!==n[o]){a=t[o],h=n[o];break}return a<h?-1:h<a?1:0};re.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};re.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return re.alloc(0);let a;if(n===void 0)for(n=0,a=0;a<t.length;++a)n+=t[a].length;let h=re.allocUnsafe(n),o=0;for(a=0;a<t.length;++a){let r=t[a];if(gi(r,Uint8Array))o+r.length>h.length?(re.isBuffer(r)||(r=re.from(r)),r.copy(h,o)):Uint8Array.prototype.set.call(h,r,o);else if(re.isBuffer(r))r.copy(h,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=r.length}return h};function RN(e,t){if(re.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||gi(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,a=arguments.length>2&&arguments[2]===!0;if(!a&&n===0)return 0;let h=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return y1(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return UN(e).length;default:if(h)return a?-1:y1(e).length;t=(""+t).toLowerCase(),h=!0}}re.byteLength=RN;function ote(e,t,n){let a=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return hte(this,t,n);case"utf8":case"utf-8":return HN(this,t,n);case"ascii":return dte(this,t,n);case"latin1":case"binary":return pte(this,t,n);case"base64":return lte(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _te(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}re.prototype._isBuffer=!0;function Wc(e,t,n){let a=e[t];e[t]=e[n],e[n]=a}re.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)Wc(this,n,n+1);return this};re.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)Wc(this,n,n+3),Wc(this,n+1,n+2);return this};re.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)Wc(this,n,n+7),Wc(this,n+1,n+6),Wc(this,n+2,n+5),Wc(this,n+3,n+4);return this};re.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?HN(this,0,t):ote.apply(this,arguments)};re.prototype.toLocaleString=re.prototype.toString;re.prototype.equals=function(t){if(!re.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:re.compare(this,t)===0};re.prototype.inspect=function(){let t="",n=Wf.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};MN&&(re.prototype[MN]=re.prototype.inspect);re.prototype.compare=function(t,n,a,h,o){if(gi(t,Uint8Array)&&(t=re.from(t,t.offset,t.byteLength)),!re.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),a===void 0&&(a=t?t.length:0),h===void 0&&(h=0),o===void 0&&(o=this.length),n<0||a>t.length||h<0||o>this.length)throw new RangeError("out of range index");if(h>=o&&n>=a)return 0;if(h>=o)return-1;if(n>=a)return 1;if(n>>>=0,a>>>=0,h>>>=0,o>>>=0,this===t)return 0;let r=o-h,l=a-n,u=Math.min(r,l),i=this.slice(h,o),s=t.slice(n,a);for(let f=0;f<u;++f)if(i[f]!==s[f]){r=i[f],l=s[f];break}return r<l?-1:l<r?1:0};function $N(e,t,n,a,h){if(e.length===0)return-1;if(typeof n=="string"?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,w1(n)&&(n=h?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(h)return-1;n=e.length-1}else if(n<0)if(h)n=0;else return-1;if(typeof t=="string"&&(t=re.from(t,a)),re.isBuffer(t))return t.length===0?-1:FN(e,t,n,a,h);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):FN(e,[t],n,a,h);throw new TypeError("val must be string, number or Buffer")}function FN(e,t,n,a,h){let o=1,r=e.length,l=t.length;if(a!==void 0&&(a=String(a).toLowerCase(),a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,r/=2,l/=2,n/=2}function u(s,f){return o===1?s[f]:s.readUInt16BE(f*o)}let i;if(h){let s=-1;for(i=n;i<r;i++)if(u(e,i)===u(t,s===-1?0:i-s)){if(s===-1&&(s=i),i-s+1===l)return s*o}else s!==-1&&(i-=i-s),s=-1}else for(n+l>r&&(n=r-l),i=n;i>=0;i--){let s=!0;for(let f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){s=!1;break}if(s)return i}return-1}re.prototype.includes=function(t,n,a){return this.indexOf(t,n,a)!==-1};re.prototype.indexOf=function(t,n,a){return $N(this,t,n,a,!0)};re.prototype.lastIndexOf=function(t,n,a){return $N(this,t,n,a,!1)};function ate(e,t,n,a){n=Number(n)||0;let h=e.length-n;a?(a=Number(a),a>h&&(a=h)):a=h;let o=t.length;a>o/2&&(a=o/2);let r;for(r=0;r<a;++r){let l=parseInt(t.substr(r*2,2),16);if(w1(l))return r;e[n+r]=l}return r}function ite(e,t,n,a){return oy(y1(t,e.length-n),e,n,a)}function ute(e,t,n,a){return oy(yte(t),e,n,a)}function ste(e,t,n,a){return oy(UN(t),e,n,a)}function cte(e,t,n,a){return oy(Dte(t,e.length-n),e,n,a)}re.prototype.write=function(t,n,a,h){if(n===void 0)h="utf8",a=this.length,n=0;else if(a===void 0&&typeof n=="string")h=n,a=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(a)?(a=a>>>0,h===void 0&&(h="utf8")):(h=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-n;if((a===void 0||a>o)&&(a=o),t.length>0&&(a<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let r=!1;for(;;)switch(h){case"hex":return ate(this,t,n,a);case"utf8":case"utf-8":return ite(this,t,n,a);case"ascii":case"latin1":case"binary":return ute(this,t,n,a);case"base64":return ste(this,t,n,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return cte(this,t,n,a);default:if(r)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),r=!0}};re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function lte(e,t,n){return t===0&&n===e.length?m1.fromByteArray(e):m1.fromByteArray(e.slice(t,n))}function HN(e,t,n){n=Math.min(e.length,n);let a=[],h=t;for(;h<n;){let o=e[h],r=null,l=o>239?4:o>223?3:o>191?2:1;if(h+l<=n){let u,i,s,f;switch(l){case 1:o<128&&(r=o);break;case 2:u=e[h+1],(u&192)===128&&(f=(o&31)<<6|u&63,f>127&&(r=f));break;case 3:u=e[h+1],i=e[h+2],(u&192)===128&&(i&192)===128&&(f=(o&15)<<12|(u&63)<<6|i&63,f>2047&&(f<55296||f>57343)&&(r=f));break;case 4:u=e[h+1],i=e[h+2],s=e[h+3],(u&192)===128&&(i&192)===128&&(s&192)===128&&(f=(o&15)<<18|(u&63)<<12|(i&63)<<6|s&63,f>65535&&f<1114112&&(r=f))}}r===null?(r=65533,l=1):r>65535&&(r-=65536,a.push(r>>>10&1023|55296),r=56320|r&1023),a.push(r),h+=l}return fte(a)}var xN=4096;function fte(e){let t=e.length;if(t<=xN)return String.fromCharCode.apply(String,e);let n="",a=0;for(;a<t;)n+=String.fromCharCode.apply(String,e.slice(a,a+=xN));return n}function dte(e,t,n){let a="";n=Math.min(e.length,n);for(let h=t;h<n;++h)a+=String.fromCharCode(e[h]&127);return a}function pte(e,t,n){let a="";n=Math.min(e.length,n);for(let h=t;h<n;++h)a+=String.fromCharCode(e[h]);return a}function hte(e,t,n){let a=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>a)&&(n=a);let h="";for(let o=t;o<n;++o)h+=Cte[e[o]];return h}function _te(e,t,n){let a=e.slice(t,n),h="";for(let o=0;o<a.length-1;o+=2)h+=String.fromCharCode(a[o]+a[o+1]*256);return h}re.prototype.slice=function(t,n){let a=this.length;t=~~t,n=n===void 0?a:~~n,t<0?(t+=a,t<0&&(t=0)):t>a&&(t=a),n<0?(n+=a,n<0&&(n=0)):n>a&&(n=a),n<t&&(n=t);let h=this.subarray(t,n);return Object.setPrototypeOf(h,re.prototype),h};function gr(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}re.prototype.readUintLE=re.prototype.readUIntLE=function(t,n,a){t=t>>>0,n=n>>>0,a||gr(t,n,this.length);let h=this[t],o=1,r=0;for(;++r<n&&(o*=256);)h+=this[t+r]*o;return h};re.prototype.readUintBE=re.prototype.readUIntBE=function(t,n,a){t=t>>>0,n=n>>>0,a||gr(t,n,this.length);let h=this[t+--n],o=1;for(;n>0&&(o*=256);)h+=this[t+--n]*o;return h};re.prototype.readUint8=re.prototype.readUInt8=function(t,n){return t=t>>>0,n||gr(t,1,this.length),this[t]};re.prototype.readUint16LE=re.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||gr(t,2,this.length),this[t]|this[t+1]<<8};re.prototype.readUint16BE=re.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||gr(t,2,this.length),this[t]<<8|this[t+1]};re.prototype.readUint32LE=re.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||gr(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};re.prototype.readUint32BE=re.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||gr(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};re.prototype.readBigUInt64LE=ws(function(t){t=t>>>0,Bf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&_h(t,this.length-8);let h=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+a*2**24;return BigInt(h)+(BigInt(o)<<BigInt(32))});re.prototype.readBigUInt64BE=ws(function(t){t=t>>>0,Bf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&_h(t,this.length-8);let h=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+a;return(BigInt(h)<<BigInt(32))+BigInt(o)});re.prototype.readIntLE=function(t,n,a){t=t>>>0,n=n>>>0,a||gr(t,n,this.length);let h=this[t],o=1,r=0;for(;++r<n&&(o*=256);)h+=this[t+r]*o;return o*=128,h>=o&&(h-=Math.pow(2,8*n)),h};re.prototype.readIntBE=function(t,n,a){t=t>>>0,n=n>>>0,a||gr(t,n,this.length);let h=n,o=1,r=this[t+--h];for(;h>0&&(o*=256);)r+=this[t+--h]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*n)),r};re.prototype.readInt8=function(t,n){return t=t>>>0,n||gr(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};re.prototype.readInt16LE=function(t,n){t=t>>>0,n||gr(t,2,this.length);let a=this[t]|this[t+1]<<8;return a&32768?a|4294901760:a};re.prototype.readInt16BE=function(t,n){t=t>>>0,n||gr(t,2,this.length);let a=this[t+1]|this[t]<<8;return a&32768?a|4294901760:a};re.prototype.readInt32LE=function(t,n){return t=t>>>0,n||gr(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};re.prototype.readInt32BE=function(t,n){return t=t>>>0,n||gr(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};re.prototype.readBigInt64LE=ws(function(t){t=t>>>0,Bf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&_h(t,this.length-8);let h=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(a<<24);return(BigInt(h)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});re.prototype.readBigInt64BE=ws(function(t){t=t>>>0,Bf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&_h(t,this.length-8);let h=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(h)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+a)});re.prototype.readFloatLE=function(t,n){return t=t>>>0,n||gr(t,4,this.length),Nf.read(this,t,!0,23,4)};re.prototype.readFloatBE=function(t,n){return t=t>>>0,n||gr(t,4,this.length),Nf.read(this,t,!1,23,4)};re.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||gr(t,8,this.length),Nf.read(this,t,!0,52,8)};re.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||gr(t,8,this.length),Nf.read(this,t,!1,52,8)};function Fo(e,t,n,a,h,o){if(!re.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>h||t<o)throw new RangeError('"value" argument is out of bounds');if(n+a>e.length)throw new RangeError("Index out of range")}re.prototype.writeUintLE=re.prototype.writeUIntLE=function(t,n,a,h){if(t=+t,n=n>>>0,a=a>>>0,!h){let l=Math.pow(2,8*a)-1;Fo(this,t,n,a,l,0)}let o=1,r=0;for(this[n]=t&255;++r<a&&(o*=256);)this[n+r]=t/o&255;return n+a};re.prototype.writeUintBE=re.prototype.writeUIntBE=function(t,n,a,h){if(t=+t,n=n>>>0,a=a>>>0,!h){let l=Math.pow(2,8*a)-1;Fo(this,t,n,a,l,0)}let o=a-1,r=1;for(this[n+o]=t&255;--o>=0&&(r*=256);)this[n+o]=t/r&255;return n+a};re.prototype.writeUint8=re.prototype.writeUInt8=function(t,n,a){return t=+t,n=n>>>0,a||Fo(this,t,n,1,255,0),this[n]=t&255,n+1};re.prototype.writeUint16LE=re.prototype.writeUInt16LE=function(t,n,a){return t=+t,n=n>>>0,a||Fo(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};re.prototype.writeUint16BE=re.prototype.writeUInt16BE=function(t,n,a){return t=+t,n=n>>>0,a||Fo(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};re.prototype.writeUint32LE=re.prototype.writeUInt32LE=function(t,n,a){return t=+t,n=n>>>0,a||Fo(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};re.prototype.writeUint32BE=re.prototype.writeUInt32BE=function(t,n,a){return t=+t,n=n>>>0,a||Fo(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function ON(e,t,n,a,h){WN(t,a,h,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o=o>>8,e[n++]=o,o=o>>8,e[n++]=o,o=o>>8,e[n++]=o;let r=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=r,r=r>>8,e[n++]=r,r=r>>8,e[n++]=r,r=r>>8,e[n++]=r,n}function PN(e,t,n,a,h){WN(t,a,h,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o=o>>8,e[n+6]=o,o=o>>8,e[n+5]=o,o=o>>8,e[n+4]=o;let r=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=r,r=r>>8,e[n+2]=r,r=r>>8,e[n+1]=r,r=r>>8,e[n]=r,n+8}re.prototype.writeBigUInt64LE=ws(function(t,n=0){return ON(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});re.prototype.writeBigUInt64BE=ws(function(t,n=0){return PN(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});re.prototype.writeIntLE=function(t,n,a,h){if(t=+t,n=n>>>0,!h){let u=Math.pow(2,8*a-1);Fo(this,t,n,a,u-1,-u)}let o=0,r=1,l=0;for(this[n]=t&255;++o<a&&(r*=256);)t<0&&l===0&&this[n+o-1]!==0&&(l=1),this[n+o]=(t/r>>0)-l&255;return n+a};re.prototype.writeIntBE=function(t,n,a,h){if(t=+t,n=n>>>0,!h){let u=Math.pow(2,8*a-1);Fo(this,t,n,a,u-1,-u)}let o=a-1,r=1,l=0;for(this[n+o]=t&255;--o>=0&&(r*=256);)t<0&&l===0&&this[n+o+1]!==0&&(l=1),this[n+o]=(t/r>>0)-l&255;return n+a};re.prototype.writeInt8=function(t,n,a){return t=+t,n=n>>>0,a||Fo(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};re.prototype.writeInt16LE=function(t,n,a){return t=+t,n=n>>>0,a||Fo(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};re.prototype.writeInt16BE=function(t,n,a){return t=+t,n=n>>>0,a||Fo(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};re.prototype.writeInt32LE=function(t,n,a){return t=+t,n=n>>>0,a||Fo(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};re.prototype.writeInt32BE=function(t,n,a){return t=+t,n=n>>>0,a||Fo(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};re.prototype.writeBigInt64LE=ws(function(t,n=0){return ON(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});re.prototype.writeBigInt64BE=ws(function(t,n=0){return PN(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function kN(e,t,n,a,h,o){if(n+a>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function NN(e,t,n,a,h){return t=+t,n=n>>>0,h||kN(e,t,n,4,34028234663852886e22,-34028234663852886e22),Nf.write(e,t,n,a,23,4),n+4}re.prototype.writeFloatLE=function(t,n,a){return NN(this,t,n,!0,a)};re.prototype.writeFloatBE=function(t,n,a){return NN(this,t,n,!1,a)};function BN(e,t,n,a,h){return t=+t,n=n>>>0,h||kN(e,t,n,8,17976931348623157e292,-17976931348623157e292),Nf.write(e,t,n,a,52,8),n+8}re.prototype.writeDoubleLE=function(t,n,a){return BN(this,t,n,!0,a)};re.prototype.writeDoubleBE=function(t,n,a){return BN(this,t,n,!1,a)};re.prototype.copy=function(t,n,a,h){if(!re.isBuffer(t))throw new TypeError("argument should be a Buffer");if(a||(a=0),!h&&h!==0&&(h=this.length),n>=t.length&&(n=t.length),n||(n=0),h>0&&h<a&&(h=a),h===a||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),t.length-n<h-a&&(h=t.length-n+a);let o=h-a;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,a,h):Uint8Array.prototype.set.call(t,this.subarray(a,h),n),o};re.prototype.fill=function(t,n,a,h){if(typeof t=="string"){if(typeof n=="string"?(h=n,n=0,a=this.length):typeof a=="string"&&(h=a,a=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!re.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(t.length===1){let r=t.charCodeAt(0);(h==="utf8"&&r<128||h==="latin1")&&(t=r)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<a)throw new RangeError("Out of range index");if(a<=n)return this;n=n>>>0,a=a===void 0?this.length:a>>>0,t||(t=0);let o;if(typeof t=="number")for(o=n;o<a;++o)this[o]=t;else{let r=re.isBuffer(t)?t:re.from(t,h),l=r.length;if(l===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<a-n;++o)this[o+n]=r[o%l]}return this};var kf={};function b1(e,t,n){kf[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}b1("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);b1("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);b1("ERR_OUT_OF_RANGE",function(e,t,n){let a=`The value of "${e}" is out of range.`,h=n;return Number.isInteger(n)&&Math.abs(n)>2**32?h=LN(String(n)):typeof n=="bigint"&&(h=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(h=LN(h)),h+="n"),a+=` It must be ${t}. Received ${h}`,a},RangeError);function LN(e){let t="",n=e.length,a=e[0]==="-"?1:0;for(;n>=a+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function mte(e,t,n){Bf(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&_h(t,e.length-(n+1))}function WN(e,t,n,a,h,o){if(e>n||e<t){let r=typeof t=="bigint"?"n":"",l;throw o>3?t===0||t===BigInt(0)?l=`>= 0${r} and < 2${r} ** ${(o+1)*8}${r}`:l=`>= -(2${r} ** ${(o+1)*8-1}${r}) and < 2 ** ${(o+1)*8-1}${r}`:l=`>= ${t}${r} and <= ${n}${r}`,new kf.ERR_OUT_OF_RANGE("value",l,e)}mte(a,h,o)}function Bf(e,t){if(typeof e!="number")throw new kf.ERR_INVALID_ARG_TYPE(t,"number",e)}function _h(e,t,n){throw Math.floor(e)!==e?(Bf(e,n),new kf.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new kf.ERR_BUFFER_OUT_OF_BOUNDS:new kf.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var vte=/[^+/0-9A-Za-z-_]/g;function gte(e){if(e=e.split("=")[0],e=e.trim().replace(vte,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function y1(e,t){t=t||1/0;let n,a=e.length,h=null,o=[];for(let r=0;r<a;++r){if(n=e.charCodeAt(r),n>55295&&n<57344){if(!h){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(r+1===a){(t-=3)>-1&&o.push(239,191,189);continue}h=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),h=n;continue}n=(h-55296<<10|n-56320)+65536}else h&&(t-=3)>-1&&o.push(239,191,189);if(h=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return o}function yte(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function Dte(e,t){let n,a,h,o=[];for(let r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),a=n>>8,h=n%256,o.push(h),o.push(a);return o}function UN(e){return m1.toByteArray(gte(e))}function oy(e,t,n,a){let h;for(h=0;h<a&&!(h+n>=t.length||h>=e.length);++h)t[h+n]=e[h];return h}function gi(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function w1(e){return e!==e}var Cte=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let a=n*16;for(let h=0;h<16;++h)t[a+h]=e[n]+e[h]}return t}();function ws(e){return typeof BigInt>"u"?bte:e}function bte(){throw new Error("BigInt not supported")}});var E1=Tt((B8e,qN)=>{"use strict";var S1=null;qN.exports=function(){return S1===null&&(S1={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),S1}});var F1=Tt(VN=>{"use strict";var T1=Pa(),wte=new Set(["buffer","view","utf8"]),M1=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!wte.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new T1(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new T1(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new T1(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};VN.Encoding=M1});var I1=Tt(iy=>{"use strict";var{Buffer:L1}=ay()||{},{Encoding:A1}=F1(),Ste=E1(),mh=class extends A1{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new vh({encode:this.encode,decode:t=>this.decode(L1.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},vh=class extends A1{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new mh({encode:t=>{let n=this.encode(t);return L1.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},x1=class extends A1{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new mh({encode:t=>L1.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:t,textDecoder:n}=Ste();return new vh({encode:a=>t.encode(this.encode(a)),decode:a=>this.decode(n.decode(a)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};iy.BufferFormat=mh;iy.ViewFormat=vh;iy.UTF8Format=x1});var jN=Tt(Uc=>{"use strict";var{Buffer:Xr}=ay()||{Buffer:{isBuffer:()=>!1}},{textEncoder:GN,textDecoder:zN}=E1()(),{BufferFormat:gh,ViewFormat:R1,UTF8Format:JN}=I1(),uy=e=>e;Uc.utf8=new JN({encode:function(e){return Xr.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?zN.decode(e):String(e)},decode:uy,name:"utf8",createViewTranscoder(){return new R1({encode:function(e){return ArrayBuffer.isView(e)?e:GN.encode(e)},decode:function(e){return zN.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new gh({encode:function(e){return Xr.isBuffer(e)?e:ArrayBuffer.isView(e)?Xr.from(e.buffer,e.byteOffset,e.byteLength):Xr.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});Uc.json=new JN({encode:JSON.stringify,decode:JSON.parse,name:"json"});Uc.buffer=new gh({encode:function(e){return Xr.isBuffer(e)?e:ArrayBuffer.isView(e)?Xr.from(e.buffer,e.byteOffset,e.byteLength):Xr.from(String(e),"utf8")},decode:uy,name:"buffer",createViewTranscoder(){return new R1({encode:function(e){return ArrayBuffer.isView(e)?e:Xr.from(String(e),"utf8")},decode:function(e){return Xr.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});Uc.view=new R1({encode:function(e){return ArrayBuffer.isView(e)?e:GN.encode(e)},decode:uy,name:"view",createBufferTranscoder(){return new gh({encode:function(e){return Xr.isBuffer(e)?e:ArrayBuffer.isView(e)?Xr.from(e.buffer,e.byteOffset,e.byteLength):Xr.from(String(e),"utf8")},decode:uy,name:`${this.name}+buffer`})}});Uc.hex=new gh({encode:function(e){return Xr.isBuffer(e)?e:Xr.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});Uc.base64=new gh({encode:function(e){return Xr.isBuffer(e)?e:Xr.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})});var XN=Tt(QN=>{"use strict";var KN=Pa(),cy=jN(),{Encoding:Ete}=F1(),{BufferFormat:Tte,ViewFormat:Mte,UTF8Format:Fte}=I1(),yh=Symbol("formats"),sy=Symbol("encodings"),xte=new Set(["buffer","view","utf8"]),$1=class{constructor(t){if(Array.isArray(t)){if(!t.every(n=>xte.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[sy]=new Map,this[yh]=new Set(t);for(let n in cy)try{this.encoding(n)}catch(a){if(a.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw a}}encodings(){return Array.from(new Set(this[sy].values()))}encoding(t){let n=this[sy].get(t);if(n===void 0){if(typeof t=="string"&&t!==""){if(n=Rte[t],!n)throw new KN(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");n=Lte(t)}let{name:a,format:h}=n;if(!this[yh].has(h))if(this[yh].has("view"))n=n.createViewTranscoder();else if(this[yh].has("buffer"))n=n.createBufferTranscoder();else if(this[yh].has("utf8"))n=n.createUTF8Transcoder();else throw new KN(`Encoding '${a}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[t,a,n.name,n.commonName])this[sy].set(o,n)}return n}};QN.Transcoder=$1;function Lte(e){if(e instanceof Ete)return e;let t="type"in e&&typeof e.type=="string"?e.type:void 0,n=e.name||t||`anonymous-${$te++}`;switch(Ate(e)){case"view":return new Mte({...e,name:n});case"utf8":return new Fte({...e,name:n});case"buffer":return new Tte({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function Ate(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}var Ite={binary:cy.buffer,"utf-8":cy.utf8},Rte={...cy,...Ite},$te=0});var sB=Tt((z8e,H1)=>{"use strict";var Uf=typeof Reflect=="object"?Reflect:null,YN=Uf&&typeof Uf.apply=="function"?Uf.apply:function(t,n,a){return Function.prototype.apply.call(t,n,a)},ly;Uf&&typeof Uf.ownKeys=="function"?ly=Uf.ownKeys:Object.getOwnPropertySymbols?ly=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ly=function(t){return Object.getOwnPropertyNames(t)};function Hte(e){console&&console.warn&&console.warn(e)}var eB=Number.isNaN||function(t){return t!==t};function an(){an.init.call(this)}H1.exports=an;H1.exports.once=Nte;an.EventEmitter=an;an.prototype._events=void 0;an.prototype._eventsCount=0;an.prototype._maxListeners=void 0;var ZN=10;function fy(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(an,"defaultMaxListeners",{enumerable:!0,get:function(){return ZN},set:function(e){if(typeof e!="number"||e<0||eB(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");ZN=e}});an.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};an.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||eB(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function tB(e){return e._maxListeners===void 0?an.defaultMaxListeners:e._maxListeners}an.prototype.getMaxListeners=function(){return tB(this)};an.prototype.emit=function(t){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var h=t==="error",o=this._events;if(o!==void 0)h=h&&o.error===void 0;else if(!h)return!1;if(h){var r;if(n.length>0&&(r=n[0]),r instanceof Error)throw r;var l=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw l.context=r,l}var u=o[t];if(u===void 0)return!1;if(typeof u=="function")YN(u,this,n);else for(var i=u.length,s=iB(u,i),a=0;a<i;++a)YN(s[a],this,n);return!0};function nB(e,t,n,a){var h,o,r;if(fy(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),r=o[t]),r===void 0)r=o[t]=n,++e._eventsCount;else if(typeof r=="function"?r=o[t]=a?[n,r]:[r,n]:a?r.unshift(n):r.push(n),h=tB(e),h>0&&r.length>h&&!r.warned){r.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=r.length,Hte(l)}return e}an.prototype.addListener=function(t,n){return nB(this,t,n,!1)};an.prototype.on=an.prototype.addListener;an.prototype.prependListener=function(t,n){return nB(this,t,n,!0)};function Ote(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function rB(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},h=Ote.bind(a);return h.listener=n,a.wrapFn=h,h}an.prototype.once=function(t,n){return fy(n),this.on(t,rB(this,t,n)),this};an.prototype.prependOnceListener=function(t,n){return fy(n),this.prependListener(t,rB(this,t,n)),this};an.prototype.removeListener=function(t,n){var a,h,o,r,l;if(fy(n),h=this._events,h===void 0)return this;if(a=h[t],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete h[t],h.removeListener&&this.emit("removeListener",t,a.listener||n));else if(typeof a!="function"){for(o=-1,r=a.length-1;r>=0;r--)if(a[r]===n||a[r].listener===n){l=a[r].listener,o=r;break}if(o<0)return this;o===0?a.shift():Pte(a,o),a.length===1&&(h[t]=a[0]),h.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};an.prototype.off=an.prototype.removeListener;an.prototype.removeAllListeners=function(t){var n,a,h;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var o=Object.keys(a),r;for(h=0;h<o.length;++h)r=o[h],r!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(h=n.length-1;h>=0;h--)this.removeListener(t,n[h]);return this};function oB(e,t,n){var a=e._events;if(a===void 0)return[];var h=a[t];return h===void 0?[]:typeof h=="function"?n?[h.listener||h]:[h]:n?kte(h):iB(h,h.length)}an.prototype.listeners=function(t){return oB(this,t,!0)};an.prototype.rawListeners=function(t){return oB(this,t,!1)};an.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):aB.call(e,t)};an.prototype.listenerCount=aB;function aB(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}an.prototype.eventNames=function(){return this._eventsCount>0?ly(this._events):[]};function iB(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}function Pte(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function kte(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Nte(e,t){return new Promise(function(n,a){function h(r){e.removeListener(t,o),a(r)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",h),n([].slice.call(arguments))}uB(e,t,o,{once:!0}),t!=="error"&&Bte(e,h,{once:!0})})}function Bte(e,t,n){typeof e.on=="function"&&uB(e,"error",t,n)}function uB(e,t,n,a){if(typeof e.on=="function")a.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function h(o){a.once&&e.removeEventListener(t,h),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var lB=Tt((G8e,cB)=>{cB.exports=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)});var Dh=Tt(O1=>{"use strict";var fB=lB();O1.fromCallback=function(e,t){if(e===void 0){var n=new Promise(function(a,h){e=function(o,r){o?h(o):a(r)}});e[t!==void 0?t:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};O1.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(n){fB(()=>t(null,n))}).catch(function(n){fB(()=>t(n))})}});var dy=Tt(P1=>{"use strict";P1.getCallback=function(e,t){return typeof e=="function"?e:t};P1.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}}});var xs=Tt(my=>{"use strict";var{fromCallback:k1}=Dh(),Wo=Pa(),{getOptions:N1,getCallback:dB}=dy(),qc=Symbol("promise"),qf=Symbol("callback"),yi=Symbol("working"),Vc=Symbol("handleOne"),uu=Symbol("handleMany"),B1=Symbol("autoClose"),Ms=Symbol("finishWork"),Di=Symbol("returnMany"),Ss=Symbol("closing"),Ch=Symbol("handleClose"),py=Symbol("closed"),bh=Symbol("closeCallbacks"),Ts=Symbol("keyEncoding"),zc=Symbol("valueEncoding"),W1=Symbol("abortOnClose"),hy=Symbol("legacy"),U1=Symbol("keys"),q1=Symbol("values"),Es=Symbol("limit"),la=Symbol("count"),_y=Object.freeze({}),Wte=()=>{},pB=!1,wh=class{constructor(t,n,a){if(typeof t!="object"||t===null){let h=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${h}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[py]=!1,this[bh]=[],this[yi]=!1,this[Ss]=!1,this[B1]=!1,this[qf]=null,this[Vc]=this[Vc].bind(this),this[uu]=this[uu].bind(this),this[Ch]=this[Ch].bind(this),this[Ts]=n[Ts],this[zc]=n[zc],this[hy]=a,this[Es]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[la]=0,this[W1]=!!n.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[la]}get limit(){return this[Es]}next(t){let n;if(t===void 0)n=new Promise((a,h)=>{t=(o,r,l)=>{o?h(o):this[hy]?r===void 0&&l===void 0?a():a([r,l]):a(r)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[Ss]?this.nextTick(t,new Wo("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[yi]?this.nextTick(t,new Wo("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[yi]=!0,this[qf]=t,this[la]>=this[Es]?this.nextTick(this[Vc],null):this._next(this[Vc])),n}_next(t){this.nextTick(t)}nextv(t,n,a){return a=dB(n,a),a=k1(a,qc),n=N1(n,_y),Number.isInteger(t)?(this[Ss]?this.nextTick(a,new Wo("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[yi]?this.nextTick(a,new Wo("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[Es]<1/0&&(t=Math.min(t,this[Es]-this[la])),this[yi]=!0,this[qf]=a,t<=0?this.nextTick(this[uu],null,[]):this._nextv(t,n,this[uu])),a[qc]):(this.nextTick(a,new TypeError("The first argument 'size' must be an integer")),a[qc])}_nextv(t,n,a){let h=[],o=(r,l,u)=>{if(r)return a(r);if(this[hy]?l===void 0&&u===void 0:l===void 0)return a(null,h);h.push(this[hy]?[l,u]:l),h.length===t?a(null,h):this._next(o)};this._next(o)}all(t,n){return n=dB(t,n),n=k1(n,qc),t=N1(t,_y),this[Ss]?this.nextTick(n,new Wo("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[yi]?this.nextTick(n,new Wo("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[yi]=!0,this[qf]=n,this[B1]=!0,this[la]>=this[Es]?this.nextTick(this[uu],null,[]):this._all(t,this[uu])),n[qc]}_all(t,n){let a=this[la],h=[],o=()=>{let l=this[Es]<1/0?Math.min(1e3,this[Es]-a):1e3;l<=0?this.nextTick(n,null,h):this._nextv(l,_y,r)},r=(l,u)=>{l?n(l):u.length===0?n(null,h):(h.push.apply(h,u),a+=u.length,o())};o()}[Ms](){let t=this[qf];return this[W1]&&t===null?Wte:(this[yi]=!1,this[qf]=null,this[Ss]&&this._close(this[Ch]),t)}[Di](t,n,a){this[B1]?this.close(t.bind(null,n,a)):t(n,a)}seek(t,n){if(n=N1(n,_y),!this[Ss]){if(this[yi])throw new Wo("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let a=this.db.keyEncoding(n.keyEncoding||this[Ts]),h=a.format;n.keyEncoding!==h&&(n={...n,keyEncoding:h});let o=this.db.prefixKey(a.encode(t),h);this._seek(o,n)}}}_seek(t,n){throw new Wo("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=k1(t,qc),this[py]?this.nextTick(t):this[Ss]?this[bh].push(t):(this[Ss]=!0,this[bh].push(t),this[yi]?this[W1]&&this[Ms]()(new Wo("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Ch])),t[qc]}_close(t){this.nextTick(t)}[Ch](){this[py]=!0,this.db.detachResource(this);let t=this[bh];this[bh]=[];for(let n of t)n()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[py]||await this.close()}}},Vf=class extends wh{constructor(t,n){super(t,n,!0),this[U1]=n.keys!==!1,this[q1]=n.values!==!1}[Vc](t,n,a){let h=this[Ms]();if(t)return h(t);try{n=this[U1]&&n!==void 0?this[Ts].decode(n):void 0,a=this[q1]&&a!==void 0?this[zc].decode(a):void 0}catch(o){return h(new Fs("entry",o))}n===void 0&&a===void 0||this[la]++,h(null,n,a)}[uu](t,n){let a=this[Ms]();if(t)return this[Di](a,t);try{for(let h of n){let o=h[0],r=h[1];h[0]=this[U1]&&o!==void 0?this[Ts].decode(o):void 0,h[1]=this[q1]&&r!==void 0?this[zc].decode(r):void 0}}catch(h){return this[Di](a,new Fs("entries",h))}this[la]+=n.length,this[Di](a,null,n)}end(t){return!pB&&typeof console<"u"&&(pB=!0,console.warn(new Wo("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},V1=class extends wh{constructor(t,n){super(t,n,!1)}[Vc](t,n){let a=this[Ms]();if(t)return a(t);try{n=n!==void 0?this[Ts].decode(n):void 0}catch(h){return a(new Fs("key",h))}n!==void 0&&this[la]++,a(null,n)}[uu](t,n){let a=this[Ms]();if(t)return this[Di](a,t);try{for(let h=0;h<n.length;h++){let o=n[h];n[h]=o!==void 0?this[Ts].decode(o):void 0}}catch(h){return this[Di](a,new Fs("keys",h))}this[la]+=n.length,this[Di](a,null,n)}},z1=class extends wh{constructor(t,n){super(t,n,!1)}[Vc](t,n){let a=this[Ms]();if(t)return a(t);try{n=n!==void 0?this[zc].decode(n):void 0}catch(h){return a(new Fs("value",h))}n!==void 0&&this[la]++,a(null,n)}[uu](t,n){let a=this[Ms]();if(t)return this[Di](a,t);try{for(let h=0;h<n.length;h++){let o=n[h];n[h]=o!==void 0?this[zc].decode(o):void 0}}catch(h){return this[Di](a,new Fs("values",h))}this[la]+=n.length,this[Di](a,null,n)}},Fs=class extends Wo{constructor(t,n){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:n})}};for(let e of["_ended property","_nexting property","_end method"])Object.defineProperty(Vf.prototype,e.split(" ")[0],{get(){throw new Wo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Wo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});Vf.keyEncoding=Ts;Vf.valueEncoding=zc;my.AbstractIterator=Vf;my.AbstractKeyIterator=V1;my.AbstractValueIterator=z1});var hB=Tt(G1=>{"use strict";var{AbstractKeyIterator:Ute,AbstractValueIterator:qte}=xs(),Gc=Symbol("iterator"),Sh=Symbol("callback"),zf=Symbol("handleOne"),Jc=Symbol("handleMany"),Eh=class extends Ute{constructor(t,n){super(t,n),this[Gc]=t.iterator({...n,keys:!0,values:!1}),this[zf]=this[zf].bind(this),this[Jc]=this[Jc].bind(this)}},vy=class extends qte{constructor(t,n){super(t,n),this[Gc]=t.iterator({...n,keys:!1,values:!0}),this[zf]=this[zf].bind(this),this[Jc]=this[Jc].bind(this)}};for(let e of[Eh,vy]){let t=e===Eh,n=t?a=>a[0]:a=>a[1];e.prototype._next=function(a){this[Sh]=a,this[Gc].next(this[zf])},e.prototype[zf]=function(a,h,o){let r=this[Sh];a?r(a):r(null,t?h:o)},e.prototype._nextv=function(a,h,o){this[Sh]=o,this[Gc].nextv(a,h,this[Jc])},e.prototype._all=function(a,h){this[Sh]=h,this[Gc].all(a,this[Jc])},e.prototype[Jc]=function(a,h){let o=this[Sh];a?o(a):o(null,h.map(n))},e.prototype._seek=function(a,h){this[Gc].seek(a,h)},e.prototype._close=function(a){this[Gc].close(a)}}G1.DefaultKeyIterator=Eh;G1.DefaultValueIterator=vy});var _B=Tt(wy=>{"use strict";var{AbstractIterator:Vte,AbstractKeyIterator:zte,AbstractValueIterator:Gte}=xs(),J1=Pa(),xo=Symbol("nut"),Cy=Symbol("undefer"),by=Symbol("factory"),gy=class extends Vte{constructor(t,n){super(t,n),this[xo]=null,this[by]=()=>t.iterator(n),this.db.defer(()=>this[Cy]())}},yy=class extends zte{constructor(t,n){super(t,n),this[xo]=null,this[by]=()=>t.keys(n),this.db.defer(()=>this[Cy]())}},Dy=class extends Gte{constructor(t,n){super(t,n),this[xo]=null,this[by]=()=>t.values(n),this.db.defer(()=>this[Cy]())}};for(let e of[gy,yy,Dy])e.prototype[Cy]=function(){this.db.status==="open"&&(this[xo]=this[by]())},e.prototype._next=function(t){this[xo]!==null?this[xo].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new J1("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,n,a){this[xo]!==null?this[xo].nextv(t,n,a):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,n,a)):this.nextTick(a,new J1("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,n){this[xo]!==null?this[xo].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(t,n)):this.nextTick(n,new J1("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,n){this[xo]!==null?this[xo]._seek(t,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,n))},e.prototype._close=function(t){this[xo]!==null?this[xo].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};wy.DeferredIterator=gy;wy.DeferredKeyIterator=yy;wy.DeferredValueIterator=Dy});var K1=Tt(vB=>{"use strict";var{fromCallback:mB}=Dh(),Sy=Pa(),{getCallback:Jte,getOptions:jte}=dy(),Ey=Symbol("promise"),fa=Symbol("status"),Gf=Symbol("operations"),Th=Symbol("finishClose"),Jf=Symbol("closeCallbacks"),j1=class{constructor(t){if(typeof t!="object"||t===null){let n=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[Gf]=[],this[Jf]=[],this[fa]="open",this[Th]=this[Th].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[Gf].length}put(t,n,a){if(this[fa]!=="open")throw new Sy("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let h=this.db._checkKey(t)||this.db._checkValue(n);if(h)throw h;let o=a&&a.sublevel!=null?a.sublevel:this.db,r=a,l=o.keyEncoding(a&&a.keyEncoding),u=o.valueEncoding(a&&a.valueEncoding),i=l.format;a={...a,keyEncoding:i,valueEncoding:u.format},o!==this.db&&(a.sublevel=null);let s=o.prefixKey(l.encode(t),i),f=u.encode(n);return this._put(s,f,a),this[Gf].push({...r,type:"put",key:t,value:n}),this}_put(t,n,a){}del(t,n){if(this[fa]!=="open")throw new Sy("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let a=this.db._checkKey(t);if(a)throw a;let h=n&&n.sublevel!=null?n.sublevel:this.db,o=n,r=h.keyEncoding(n&&n.keyEncoding),l=r.format;return n={...n,keyEncoding:l},h!==this.db&&(n.sublevel=null),this._del(h.prefixKey(r.encode(t),l),n),this[Gf].push({...o,type:"del",key:t}),this}_del(t,n){}clear(){if(this[fa]!=="open")throw new Sy("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Gf]=[],this}_clear(){}write(t,n){return n=Jte(t,n),n=mB(n,Ey),t=jte(t),this[fa]!=="open"?this.nextTick(n,new Sy("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[fa]="writing",this._write(t,a=>{this[fa]="closing",this[Jf].push(()=>n(a)),a||this.db.emit("batch",this[Gf]),this._close(this[Th])})),n[Ey]}_write(t,n){}close(t){return t=mB(t,Ey),this[fa]==="closing"?this[Jf].push(t):this[fa]==="closed"?this.nextTick(t):(this[Jf].push(t),this[fa]!=="writing"&&(this[fa]="closing",this._close(this[Th]))),t[Ey]}_close(t){this.nextTick(t)}[Th](){this[fa]="closed",this.db.detachResource(this);let t=this[Jf];this[Jf]=[];for(let n of t)n()}};vB.AbstractChainedBatch=j1});var yB=Tt(gB=>{"use strict";var{AbstractChainedBatch:Kte}=K1(),Qte=Pa(),jf=Symbol("encoded"),Q1=class extends Kte{constructor(t){super(t),this[jf]=[]}_put(t,n,a){this[jf].push({...a,type:"put",key:t,value:n})}_del(t,n){this[jf].push({...n,type:"del",key:t})}_clear(){this[jf]=[]}_write(t,n){this.db.status==="opening"?this.db.defer(()=>this._write(t,n)):this.db.status==="open"?this[jf].length===0?this.nextTick(n):this.db._batch(this[jf],t,n):this.nextTick(n,new Qte("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};gB.DefaultChainedBatch=Q1});var bB=Tt((e7e,CB)=>{"use strict";var DB=Pa(),Xte=Object.prototype.hasOwnProperty,Yte=new Set(["lt","lte","gt","gte"]);CB.exports=function(e,t){let n={};for(let a in e)if(Xte.call(e,a)&&!(a==="keyEncoding"||a==="valueEncoding")){if(a==="start"||a==="end")throw new DB(`The legacy range option '${a}' has been removed`,{code:"LEVEL_LEGACY"});if(a==="encoding")throw new DB("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});Yte.has(a)?n[a]=t.encode(e[a]):n[a]=e[a]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}});var X1=Tt((t7e,SB)=>{var wB;SB.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(wB||(wB=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var MB=Tt((n7e,TB)=>{"use strict";var EB=X1();TB.exports=function(e,...t){t.length===0?EB(e):EB(()=>e(...t))}});var FB=Tt(Ty=>{"use strict";var{AbstractIterator:Zte,AbstractKeyIterator:ene,AbstractValueIterator:tne}=xs(),Kf=Symbol("unfix"),ka=Symbol("iterator"),jc=Symbol("handleOne"),Ls=Symbol("handleMany"),su=Symbol("callback"),Mh=class extends Zte{constructor(t,n,a,h){super(t,n),this[ka]=a,this[Kf]=h,this[jc]=this[jc].bind(this),this[Ls]=this[Ls].bind(this),this[su]=null}[jc](t,n,a){let h=this[su];if(t)return h(t);n!==void 0&&(n=this[Kf](n)),h(t,n,a)}[Ls](t,n){let a=this[su];if(t)return a(t);for(let h of n){let o=h[0];o!==void 0&&(h[0]=this[Kf](o))}a(t,n)}},Fh=class extends ene{constructor(t,n,a,h){super(t,n),this[ka]=a,this[Kf]=h,this[jc]=this[jc].bind(this),this[Ls]=this[Ls].bind(this),this[su]=null}[jc](t,n){let a=this[su];if(t)return a(t);n!==void 0&&(n=this[Kf](n)),a(t,n)}[Ls](t,n){let a=this[su];if(t)return a(t);for(let h=0;h<n.length;h++){let o=n[h];o!==void 0&&(n[h]=this[Kf](o))}a(t,n)}},xh=class extends tne{constructor(t,n,a){super(t,n),this[ka]=a}};for(let e of[Mh,Fh])e.prototype._next=function(t){this[su]=t,this[ka].next(this[jc])},e.prototype._nextv=function(t,n,a){this[su]=a,this[ka].nextv(t,n,this[Ls])},e.prototype._all=function(t,n){this[su]=n,this[ka].all(t,this[Ls])};for(let e of[xh])e.prototype._next=function(t){this[ka].next(t)},e.prototype._nextv=function(t,n,a){this[ka].nextv(t,n,a)},e.prototype._all=function(t,n){this[ka].all(t,n)};for(let e of[Mh,Fh,xh])e.prototype._seek=function(t,n){this[ka].seek(t,n)},e.prototype._close=function(t){this[ka].close(t)};Ty.AbstractSublevelIterator=Mh;Ty.AbstractSublevelKeyIterator=Fh;Ty.AbstractSublevelValueIterator=xh});var IB=Tt((o7e,AB)=>{"use strict";var Y1=Pa(),{Buffer:tM}=ay()||{},{AbstractSublevelIterator:nne,AbstractSublevelKeyIterator:rne,AbstractSublevelValueIterator:one}=FB(),cu=Symbol("prefix"),xB=Symbol("upperBound"),Lh=Symbol("prefixRange"),Uo=Symbol("parent"),Z1=Symbol("unfix"),LB=new TextEncoder,ane={separator:"!"};AB.exports=function({AbstractLevel:e}){class t extends e{static defaults(a){if(typeof a=="string")throw new Y1("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(a&&a.open)throw new Y1("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return a==null?ane:a.separator?a:{...a,separator:"!"}}constructor(a,h,o){let{separator:r,manifest:l,...u}=t.defaults(o);h=une(h,r);let i=r.charCodeAt(0)+1,s=a[Uo]||a;if(!LB.encode(h).every(d=>d>i&&d<127))throw new Y1(`Prefix must use bytes > ${i} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(ine(s,l),u);let f=(a.prefix||"")+r+h+r,p=f.slice(0,-1)+String.fromCharCode(i);this[Uo]=s,this[cu]=new My(f),this[xB]=new My(p),this[Z1]=new nM,this.nextTick=s.nextTick}prefixKey(a,h){if(h==="utf8")return this[cu].utf8+a;if(a.byteLength===0)return this[cu][h];if(h==="view"){let o=this[cu].view,r=new Uint8Array(o.byteLength+a.byteLength);return r.set(o,0),r.set(a,o.byteLength),r}else{let o=this[cu].buffer;return tM.concat([o,a],o.byteLength+a.byteLength)}}[Lh](a,h){a.gte!==void 0?a.gte=this.prefixKey(a.gte,h):a.gt!==void 0?a.gt=this.prefixKey(a.gt,h):a.gte=this[cu][h],a.lte!==void 0?a.lte=this.prefixKey(a.lte,h):a.lt!==void 0?a.lt=this.prefixKey(a.lt,h):a.lte=this[xB][h]}get prefix(){return this[cu].utf8}get db(){return this[Uo]}_open(a,h){this[Uo].open({passive:!0},h)}_put(a,h,o,r){this[Uo].put(a,h,o,r)}_get(a,h,o){this[Uo].get(a,h,o)}_getMany(a,h,o){this[Uo].getMany(a,h,o)}_del(a,h,o){this[Uo].del(a,h,o)}_batch(a,h,o){this[Uo].batch(a,h,o)}_clear(a,h){this[Lh](a,a.keyEncoding),this[Uo].clear(a,h)}_iterator(a){this[Lh](a,a.keyEncoding);let h=this[Uo].iterator(a),o=this[Z1].get(this[cu].utf8.length,a.keyEncoding);return new nne(this,a,h,o)}_keys(a){this[Lh](a,a.keyEncoding);let h=this[Uo].keys(a),o=this[Z1].get(this[cu].utf8.length,a.keyEncoding);return new rne(this,a,h,o)}_values(a){this[Lh](a,a.keyEncoding);let h=this[Uo].values(a);return new one(this,a,h)}}return{AbstractSublevel:t}};var ine=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:eM(e,"utf8"),buffer:eM(e,"buffer"),view:eM(e,"view")}}},eM=function(e,t){return e.supports.encodings[t]?e.keyEncoding(t).name===t:!1},My=class{constructor(t){this.utf8=t,this.view=LB.encode(t),this.buffer=tM?tM.from(this.view.buffer,0,this.view.byteLength):{}}},nM=class{constructor(){this.cache=new Map}get(t,n){let a=this.cache.get(n);return a===void 0&&(n==="view"?a=function(h,o){return o.subarray(h)}.bind(null,t):a=function(h,o){return o.slice(h)}.bind(null,t),this.cache.set(n,a)),a}},une=function(e,t){let n=0,a=e.length;for(;n<a&&e[n]===t;)n++;for(;a>n&&e[a-1]===t;)a--;return e.slice(n,a)}});var uM=Tt(iM=>{"use strict";var{supports:sne}=CN(),{Transcoder:cne}=XN(),{EventEmitter:lne}=sB(),{fromCallback:As}=Dh(),Na=Pa(),{AbstractIterator:Kc}=xs(),{DefaultKeyIterator:fne,DefaultValueIterator:dne}=hB(),{DeferredIterator:pne,DeferredKeyIterator:hne,DeferredValueIterator:_ne}=_B(),{DefaultChainedBatch:RB}=yB(),{getCallback:Qc,getOptions:Is}=dy(),Fy=bB(),Et=Symbol("promise"),lu=Symbol("landed"),Xc=Symbol("resources"),rM=Symbol("closeResources"),Ah=Symbol("operations"),Ih=Symbol("undefer"),xy=Symbol("deferOpen"),$B=Symbol("options"),Lt=Symbol("status"),Yc=Symbol("defaultOptions"),Qf=Symbol("transcoder"),Ly=Symbol("keyEncoding"),oM=Symbol("valueEncoding"),mne=()=>{},Rh=class extends lne{constructor(t,n){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");n=Is(n);let{keyEncoding:a,valueEncoding:h,passive:o,...r}=n;this[Xc]=new Set,this[Ah]=[],this[xy]=!0,this[$B]=r,this[Lt]="opening",this.supports=sne(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Qf]=new cne(vne(this)),this[Ly]=this[Qf].encoding(a||"utf8"),this[oM]=this[Qf].encoding(h||"utf8");for(let l of this[Qf].encodings())this.supports.encodings[l.commonName]||(this.supports.encodings[l.commonName]=!0);this[Yc]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Ly].commonName,valueEncoding:this[oM].commonName}),key:Object.freeze({keyEncoding:this[Ly].commonName})},this.nextTick(()=>{this[xy]&&this.open({passive:!1},mne)})}get status(){return this[Lt]}keyEncoding(t){return this[Qf].encoding(t??this[Ly])}valueEncoding(t){return this[Qf].encoding(t??this[oM])}open(t,n){n=Qc(t,n),n=As(n,Et),t={...this[$B],...Is(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;let a=h=>{this[Lt]==="closing"||this[Lt]==="opening"?this.once(lu,h?()=>a(h):a):this[Lt]!=="open"?n(new Na("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:h})):n()};return t.passive?this[Lt]==="opening"?this.once(lu,a):this.nextTick(a):this[Lt]==="closed"||this[xy]?(this[xy]=!1,this[Lt]="opening",this.emit("opening"),this._open(t,h=>{if(h){this[Lt]="closed",this[rM](()=>{this.emit(lu),a(h)}),this[Ih]();return}this[Lt]="open",this[Ih](),this.emit(lu),this[Lt]==="open"&&this.emit("open"),this[Lt]==="open"&&this.emit("ready"),a()})):this[Lt]==="open"?this.nextTick(a):this.once(lu,()=>this.open(t,n)),n[Et]}_open(t,n){this.nextTick(n)}close(t){t=As(t,Et);let n=a=>{this[Lt]==="opening"||this[Lt]==="closing"?this.once(lu,a?n(a):n):this[Lt]!=="closed"?t(new Na("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:a})):t()};if(this[Lt]==="open"){this[Lt]="closing",this.emit("closing");let a=h=>{this[Lt]="open",this[Ih](),this.emit(lu),n(h)};this[rM](()=>{this._close(h=>{if(h)return a(h);this[Lt]="closed",this[Ih](),this.emit(lu),this[Lt]==="closed"&&this.emit("closed"),n()})})}else this[Lt]==="closed"?this.nextTick(n):this.once(lu,()=>this.close(t));return t[Et]}[rM](t){if(this[Xc].size===0)return this.nextTick(t);let n=this[Xc].size,a=!0,h=()=>{--n===0&&(a?this.nextTick(t):t())};for(let o of this[Xc])o.close(h);a=!1,this[Xc].clear()}_close(t){this.nextTick(t)}get(t,n,a){if(a=Qc(n,a),a=As(a,Et),n=Is(n,this[Yc].entry),this[Lt]==="opening")return this.defer(()=>this.get(t,n,a)),a[Et];if(Xf(this,a))return a[Et];let h=this._checkKey(t);if(h)return this.nextTick(a,h),a[Et];let o=this.keyEncoding(n.keyEncoding),r=this.valueEncoding(n.valueEncoding),l=o.format,u=r.format;return(n.keyEncoding!==l||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:l,valueEncoding:u})),this._get(this.prefixKey(o.encode(t),l),n,(i,s)=>{if(i)return(i.code==="LEVEL_NOT_FOUND"||i.notFound||/NotFound/i.test(i))&&(i.code||(i.code="LEVEL_NOT_FOUND"),i.notFound||(i.notFound=!0),i.status||(i.status=404)),a(i);try{s=r.decode(s)}catch(f){return a(new Na("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:f}))}a(null,s)}),a[Et]}_get(t,n,a){this.nextTick(a,new Error("NotFound"))}getMany(t,n,a){if(a=Qc(n,a),a=As(a,Et),n=Is(n,this[Yc].entry),this[Lt]==="opening")return this.defer(()=>this.getMany(t,n,a)),a[Et];if(Xf(this,a))return a[Et];if(!Array.isArray(t))return this.nextTick(a,new TypeError("The first argument 'keys' must be an array")),a[Et];if(t.length===0)return this.nextTick(a,null,[]),a[Et];let h=this.keyEncoding(n.keyEncoding),o=this.valueEncoding(n.valueEncoding),r=h.format,l=o.format;(n.keyEncoding!==r||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:r,valueEncoding:l}));let u=new Array(t.length);for(let i=0;i<t.length;i++){let s=t[i],f=this._checkKey(s);if(f)return this.nextTick(a,f),a[Et];u[i]=this.prefixKey(h.encode(s),r)}return this._getMany(u,n,(i,s)=>{if(i)return a(i);try{for(let f=0;f<s.length;f++)s[f]!==void 0&&(s[f]=o.decode(s[f]))}catch(f){return a(new Na(`Could not decode one or more of ${s.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:f}))}a(null,s)}),a[Et]}_getMany(t,n,a){this.nextTick(a,null,new Array(t.length).fill(void 0))}put(t,n,a,h){if(h=Qc(a,h),h=As(h,Et),a=Is(a,this[Yc].entry),this[Lt]==="opening")return this.defer(()=>this.put(t,n,a,h)),h[Et];if(Xf(this,h))return h[Et];let o=this._checkKey(t)||this._checkValue(n);if(o)return this.nextTick(h,o),h[Et];let r=this.keyEncoding(a.keyEncoding),l=this.valueEncoding(a.valueEncoding),u=r.format,i=l.format;(a.keyEncoding!==u||a.valueEncoding!==i)&&(a=Object.assign({},a,{keyEncoding:u,valueEncoding:i}));let s=this.prefixKey(r.encode(t),u),f=l.encode(n);return this._put(s,f,a,p=>{if(p)return h(p);this.emit("put",t,n),h()}),h[Et]}_put(t,n,a,h){this.nextTick(h)}del(t,n,a){if(a=Qc(n,a),a=As(a,Et),n=Is(n,this[Yc].key),this[Lt]==="opening")return this.defer(()=>this.del(t,n,a)),a[Et];if(Xf(this,a))return a[Et];let h=this._checkKey(t);if(h)return this.nextTick(a,h),a[Et];let o=this.keyEncoding(n.keyEncoding),r=o.format;return n.keyEncoding!==r&&(n=Object.assign({},n,{keyEncoding:r})),this._del(this.prefixKey(o.encode(t),r),n,l=>{if(l)return a(l);this.emit("del",t),a()}),a[Et]}_del(t,n,a){this.nextTick(a)}batch(t,n,a){if(!arguments.length){if(this[Lt]==="opening")return new RB(this);if(this[Lt]!=="open")throw new Na("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?a=t:a=Qc(n,a),a=As(a,Et),n=Is(n,this[Yc].empty),this[Lt]==="opening")return this.defer(()=>this.batch(t,n,a)),a[Et];if(Xf(this,a))return a[Et];if(!Array.isArray(t))return this.nextTick(a,new TypeError("The first argument 'operations' must be an array")),a[Et];if(t.length===0)return this.nextTick(a),a[Et];let h=new Array(t.length),{keyEncoding:o,valueEncoding:r,...l}=n;for(let u=0;u<t.length;u++){if(typeof t[u]!="object"||t[u]===null)return this.nextTick(a,new TypeError("A batch operation must be an object")),a[Et];let i=Object.assign({},t[u]);if(i.type!=="put"&&i.type!=="del")return this.nextTick(a,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),a[Et];let s=this._checkKey(i.key);if(s)return this.nextTick(a,s),a[Et];let f=i.sublevel!=null?i.sublevel:this,p=f.keyEncoding(i.keyEncoding||o),d=p.format;if(i.key=f.prefixKey(p.encode(i.key),d),i.keyEncoding=d,i.type==="put"){let c=this._checkValue(i.value);if(c)return this.nextTick(a,c),a[Et];let _=f.valueEncoding(i.valueEncoding||r);i.value=_.encode(i.value),i.valueEncoding=_.format}f!==this&&(i.sublevel=null),h[u]=i}return this._batch(h,l,u=>{if(u)return a(u);this.emit("batch",t),a()}),a[Et]}_batch(t,n,a){this.nextTick(a)}sublevel(t,n){return this._sublevel(t,aM.defaults(n))}_sublevel(t,n){return new aM(this,t,n)}prefixKey(t,n){return t}clear(t,n){if(n=Qc(t,n),n=As(n,Et),t=Is(t,this[Yc].empty),this[Lt]==="opening")return this.defer(()=>this.clear(t,n)),n[Et];if(Xf(this,n))return n[Et];let a=t,h=this.keyEncoding(t.keyEncoding);return t=Fy(t,h),t.keyEncoding=h.format,t.limit===0?this.nextTick(n):this._clear(t,o=>{if(o)return n(o);this.emit("clear",a),n()}),n[Et]}_clear(t,n){this.nextTick(n)}iterator(t){let n=this.keyEncoding(t&&t.keyEncoding),a=this.valueEncoding(t&&t.valueEncoding);if(t=Fy(t,n),t.keys=t.keys!==!1,t.values=t.values!==!1,t[Kc.keyEncoding]=n,t[Kc.valueEncoding]=a,t.keyEncoding=n.format,t.valueEncoding=a.format,this[Lt]==="opening")return new pne(this,t);if(this[Lt]!=="open")throw new Na("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new Kc(this,t)}keys(t){let n=this.keyEncoding(t&&t.keyEncoding),a=this.valueEncoding(t&&t.valueEncoding);if(t=Fy(t,n),t[Kc.keyEncoding]=n,t[Kc.valueEncoding]=a,t.keyEncoding=n.format,t.valueEncoding=a.format,this[Lt]==="opening")return new hne(this,t);if(this[Lt]!=="open")throw new Na("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new fne(this,t)}values(t){let n=this.keyEncoding(t&&t.keyEncoding),a=this.valueEncoding(t&&t.valueEncoding);if(t=Fy(t,n),t[Kc.keyEncoding]=n,t[Kc.valueEncoding]=a,t.keyEncoding=n.format,t.valueEncoding=a.format,this[Lt]==="opening")return new _ne(this,t);if(this[Lt]!=="open")throw new Na("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new dne(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[Ah].push(t)}[Ih](){if(this[Ah].length===0)return;let t=this[Ah];this[Ah]=[];for(let n of t)n()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[Xc].add(t)}detachResource(t){this[Xc].delete(t)}_chainedBatch(){return new RB(this)}_checkKey(t){if(t==null)return new Na("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new Na("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Rh.prototype.nextTick=MB();var{AbstractSublevel:aM}=IB()({AbstractLevel:Rh});iM.AbstractLevel=Rh;iM.AbstractSublevel=aM;var Xf=function(e,t){return e[Lt]!=="open"?(e.nextTick(t,new Na("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},vne=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])}});var sM=Tt(Zc=>{"use strict";Zc.AbstractLevel=uM().AbstractLevel;Zc.AbstractSublevel=uM().AbstractSublevel;Zc.AbstractIterator=xs().AbstractIterator;Zc.AbstractKeyIterator=xs().AbstractKeyIterator;Zc.AbstractValueIterator=xs().AbstractValueIterator;Zc.AbstractChainedBatch=K1().AbstractChainedBatch});var OB=Tt((u7e,HB)=>{HB.exports=yne;var gne=X1();function yne(e,t,n){if(typeof t!="number")throw new Error("second argument must be a Number");let a,h,o,r,l,u=!0,i;Array.isArray(e)?(a=[],o=h=e.length):(r=Object.keys(e),a={},o=h=r.length);function s(p){function d(){n&&n(p,a),n=null}u?gne(d):d()}function f(p,d,c){if(a[p]=c,d&&(l=!0),--o===0||d)s(d);else if(!l&&i<h){let _;r?(_=r[i],i+=1,e[_](function(m,v){f(_,m,v)})):(_=i,i+=1,e[_](function(m,v){f(_,m,v)}))}}i=t,o?r?r.some(function(p,d){return e[p](function(c,_){f(p,c,_)}),d===t-1}):e.some(function(p,d){return p(function(c,_){f(d,c,_)}),d===t-1}):s(null),u=!1}});var cM=Tt((s7e,PB)=>{"use strict";PB.exports=function(t){let n=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,a=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,h=t.gte===void 0,o=t.lte===void 0;return n!==void 0&&a!==void 0?IDBKeyRange.bound(n,a,h,o):n!==void 0?IDBKeyRange.lowerBound(n,h):a!==void 0?IDBKeyRange.upperBound(a,o):null}});var lM=Tt((c7e,kB)=>{"use strict";var Dne=new TextEncoder;kB.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):Dne.encode(e)}});var qB=Tt(UB=>{"use strict";var{AbstractIterator:Cne}=sM(),NB=cM(),Ay=lM(),Ci=Symbol("cache"),fu=Symbol("finished"),qo=Symbol("options"),du=Symbol("currentOptions"),el=Symbol("position"),fM=Symbol("location"),Yf=Symbol("first"),BB={},dM=class extends Cne{constructor(t,n,a){super(t,a),this[Ci]=[],this[fu]=this.limit===0,this[qo]=a,this[du]={...a},this[el]=void 0,this[fM]=n,this[Yf]=!0}_nextv(t,n,a){if(this[Yf]=!1,this[fu])return this.nextTick(a,null,[]);if(this[Ci].length>0)return t=Math.min(t,this[Ci].length),this.nextTick(a,null,this[Ci].splice(0,t));this[el]!==void 0&&(this[qo].reverse?(this[du].lt=this[el],this[du].lte=void 0):(this[du].gt=this[el],this[du].gte=void 0));let h;try{h=NB(this[du])}catch{return this[fu]=!0,this.nextTick(a,null,[])}let o=this.db.db.transaction([this[fM]],"readonly"),r=o.objectStore(this[fM]),l=[];if(this[qo].reverse){let u=!this[qo].values&&r.openKeyCursor?"openKeyCursor":"openCursor";r[u](h,"prev").onsuccess=i=>{let s=i.target.result;if(s){let{key:f,value:p}=s;this[el]=f,l.push([this[qo].keys&&f!==void 0?Ay(f):void 0,this[qo].values&&p!==void 0?Ay(p):void 0]),l.length<t?s.continue():WB(o)}else this[fu]=!0}}else{let u,i,s=()=>{if(u===void 0||i===void 0)return;let f=Math.max(u.length,i.length);f===0||t===1/0?this[fu]=!0:this[el]=u[f-1],l.length=f;for(let p=0;p<f;p++){let d=u[p],c=i[p];l[p]=[this[qo].keys&&d!==void 0?Ay(d):void 0,this[qo].values&&c!==void 0?Ay(c):void 0]}WB(o)};this[qo].keys||t<1/0?r.getAllKeys(h,t<1/0?t:void 0).onsuccess=f=>{u=f.target.result,s()}:(u=[],this.nextTick(s)),this[qo].values?r.getAll(h,t<1/0?t:void 0).onsuccess=f=>{i=f.target.result,s()}:(i=[],this.nextTick(s))}o.onabort=()=>{a(o.error||new Error("aborted by user")),a=null},o.oncomplete=()=>{a(null,l),a=null}}_next(t){if(this[Ci].length>0){let[n,a]=this[Ci].shift();this.nextTick(t,null,n,a)}else if(this[fu])this.nextTick(t);else{let n=Math.min(100,this.limit-this.count);this[Yf]&&(this[Yf]=!1,n=1),this._nextv(n,BB,(a,h)=>{if(a)return t(a);this[Ci]=h,this._next(t)})}}_all(t,n){this[Yf]=!1;let a=this[Ci].splice(0,this[Ci].length),h=this.limit-this.count-a.length;if(h<=0)return this.nextTick(n,null,a);this._nextv(h,BB,(o,r)=>{if(o)return n(o);a.length>0&&(r=a.concat(r)),n(null,r)})}_seek(t,n){this[Yf]=!0,this[Ci]=[],this[fu]=!1,this[el]=void 0,this[du]={...this[qo]};let a;try{a=NB(this[qo])}catch{this[fu]=!0;return}a!==null&&!a.includes(t)?this[fu]=!0:this[qo].reverse?this[du].lte=t:this[du].gte=t}};UB.Iterator=dM;function WB(e){typeof e.commit=="function"&&e.commit()}});var zB=Tt((f7e,VB)=>{"use strict";VB.exports=function(t,n,a,h,o){if(h.limit===0)return t.nextTick(o);let r=t.db.transaction([n],"readwrite"),l=r.objectStore(n),u=0;r.oncomplete=function(){o()},r.onabort=function(){o(r.error||new Error("aborted by user"))};let i=l.openKeyCursor?"openKeyCursor":"openCursor",s=h.reverse?"prev":"next";l[i](a,s).onsuccess=function(f){let p=f.target.result;p&&(l.delete(p.key).onsuccess=function(){(h.limit<=0||++u<h.limit)&&p.continue()})}}});var XB=Tt(QB=>{"use strict";var{AbstractLevel:bne}=sM(),GB=Pa(),wne=OB(),{fromCallback:Sne}=Dh(),{Iterator:Ene}=qB(),JB=lM(),Tne=zB(),Mne=cM(),KB="level-js-",$h=Symbol("idb"),pM=Symbol("namePrefix"),pu=Symbol("location"),hM=Symbol("version"),tl=Symbol("store"),Hh=Symbol("onComplete"),jB=Symbol("promise"),Iy=class extends bne{constructor(t,n,a){if(typeof n=="function"||typeof a=="function")throw new GB("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:h,version:o,...r}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},r),typeof t!="string")throw new Error("constructor requires a location string argument");this[pu]=t,this[pM]=h??KB,this[hM]=parseInt(o||1,10),this[$h]=null}get location(){return this[pu]}get namePrefix(){return this[pM]}get version(){return this[hM]}get db(){return this[$h]}get type(){return"browser-level"}_open(t,n){let a=indexedDB.open(this[pM]+this[pu],this[hM]);a.onerror=function(){n(a.error||new Error("unknown error"))},a.onsuccess=()=>{this[$h]=a.result,n()},a.onupgradeneeded=h=>{let o=h.target.result;o.objectStoreNames.contains(this[pu])||o.createObjectStore(this[pu])}}[tl](t){return this[$h].transaction([this[pu]],t).objectStore(this[pu])}[Hh](t,n){let a=t.transaction;a.onabort=function(){n(a.error||new Error("aborted by user"))},a.oncomplete=function(){n(null,t.result)}}_get(t,n,a){let h=this[tl]("readonly"),o;try{o=h.get(t)}catch(r){return this.nextTick(a,r)}this[Hh](o,function(r,l){if(r)return a(r);if(l===void 0)return a(new GB("Entry not found",{code:"LEVEL_NOT_FOUND"}));a(null,JB(l))})}_getMany(t,n,a){let h=this[tl]("readonly"),o=t.map(r=>l=>{let u;try{u=h.get(r)}catch(i){return l(i)}u.onsuccess=()=>{let i=u.result;l(null,i===void 0?i:JB(i))},u.onerror=i=>{i.stopPropagation(),l(u.error)}});wne(o,16,a)}_del(t,n,a){let h=this[tl]("readwrite"),o;try{o=h.delete(t)}catch(r){return this.nextTick(a,r)}this[Hh](o,a)}_put(t,n,a,h){let o=this[tl]("readwrite"),r;try{r=o.put(n,t)}catch(l){return this.nextTick(h,l)}this[Hh](r,h)}_iterator(t){return new Ene(this,this[pu],t)}_batch(t,n,a){let h=this[tl]("readwrite"),o=h.transaction,r=0,l;o.onabort=function(){a(l||o.error||new Error("aborted by user"))},o.oncomplete=function(){a()};function u(){let i=t[r++],s=i.key,f;try{f=i.type==="del"?h.delete(s):h.put(i.value,s)}catch(p){l=p,o.abort();return}r<t.length?f.onsuccess=u:typeof o.commit=="function"&&o.commit()}u()}_clear(t,n){let a,h;try{a=Mne(t)}catch{return this.nextTick(n)}if(t.limit>=0)return Tne(this,this[pu],a,t,n);try{let o=this[tl]("readwrite");h=a?o.delete(a):o.clear()}catch(o){return this.nextTick(n,o)}this[Hh](h,n)}_close(t){this[$h].close(),this.nextTick(t)}};Iy.destroy=function(e,t,n){typeof t=="function"&&(n=t,t=KB),n=Sne(n,jB);let a=indexedDB.deleteDatabase(t+e);return a.onsuccess=function(){n()},a.onerror=function(h){n(h)},n[jB]};QB.BrowserLevel=Iy});var _M=Tt(YB=>{YB.Level=XB().BrowserLevel});var qh={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var he=function(e){return e.identity},me={identity:function(e){return e},Semigroupoid0:function(){return qh}};var NM={fromString:he(me)},Mt=function(e){return e.fromString};var BM=function(e){return function(t){for(var n=t.length,a=new Array(n),h=0;h<n;h++)a[h]=e(t[h]);return a}};var hn=!0;var Ie=function(e){return function(t){return function(n){return e(n)(t)}}},_e=function(e){return function(t){return e}};var WM=function(e){return function(t){return t(e)}};var Dt=function(){function e(){}return e.value=new e,e}();var z=function(e){return e.map};var ut=function(e){return z(e)(_e(void 0))},ol=function(e){var t=z(e);return function(n){return function(a){return t(_e(a))(n)}}},zh=function(e){var t=z(e);return function(n){return t(_e(n))}};var Ct={map:BM};var UM=function(e){return function(t){return e+t}},qM=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var er=function(e){return e.reflectSymbol};var Hs={append:UM};var sn={append:qM};var De=function(e){return e.append};var zy={alt:De(sn),Functor0:function(){return Ct}},Pn=function(e){return e.alt};var VM=function(e){return function(t){for(var n=e.length,a=t.length,h=new Array(n*a),o=0,r=0;r<n;r++)for(var l=e[r],u=0;u<a;u++)h[o++]=l(t[u]);return h}};var fW=he(me);var Os={apply:VM,Functor0:function(){return Ct}},pt=function(e){return e.apply};var Pr=function(e){var t=pt(e),n=z(e.Functor0());return function(a){return function(h){return t(n(_e(fW))(a))(h)}}};var X=function(e){return e.pure},td=function(e){var t=X(e);return function(n){return function(a){if(!n)return a;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,a.constructor.name])}}},An=function(e){var t=X(e);return function(n){return function(a){if(n)return a;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,a.constructor.name])}}},nd=function(e){var t=pt(e.Apply0()),n=X(e);return function(a){return function(h){return t(n(a))(h)}}};var al={pure:function(e){return[e]},Apply0:function(){return Os}};var zM=function(e){return function(t){for(var n=[],a=0,h=e.length;a<h;a++)Array.prototype.push.apply(n,t(e[a]));return n}};var hW=he(me),nt=function(e){return e.discard};var yu={bind:zM,Apply0:function(){return Os}},ee=function(e){return e.bind},wn=function(e){return Ie(ee(e))},il=function(e){var t=wn(e);return function(n){return function(a){return function(h){return t(n)(a(h))}}}};var rt={discard:function(e){return ee(e)}};var ul=function(e){var t=ee(e);return function(n){return t(n)(hW)}};var _W=function(e,t){if(e<1)return[];var n=new Array(e);return n.fill(t)},mW=function(e,t){for(var n=[],a=0,h=0;h<e;h++)n[a++]=t;return n},vW=typeof Array.prototype.fill=="function"?_W:mW,GM=function(){function e(h,o){this.head=h,this.tail=o}var t={};function n(h){return function(o){return new e(h,o)}}function a(h){for(var o=[],r=0,l=h;l!==t;)o[r++]=l.head,l=l.tail;return o}return function(h,o){return a(h(n)(t)(o))}}(),yr=function(e){return e.length},Jy=function(e,t,n){return n.length===0?e({}):t(n[0])(n.slice(1))},JM=function(e,t,n,a){return a<0||a>=n.length?t:e(n[a])};var jM=function(e,t,n,a){for(var h=0,o=a.length;h<o;h++)if(n(a[h]))return e(h);return t},KM=function(e,t,n,a){for(var h=a.length-1;h>=0;h--)if(n(a[h]))return e(h);return t},QM=function(e,t,n,a,h){if(n<0||n>h.length)return t;var o=h.slice();return o.splice(n,0,a),e(o)},XM=function(e,t,n,a){if(n<0||n>=a.length)return t;var h=a.slice();return h.splice(n,1),e(h)};var sl=function(e){return e.slice().reverse()};var YM=function(e,t){return t.filter(e)};var ZM=function(){function e(t,n,a,h,o,r){var l,u,i,s,f,p,d;for(l=o+(r-o>>1),l-o>1&&e(t,n,h,a,o,l),r-l>1&&e(t,n,h,a,l,r),u=o,i=l,s=o;u<l&&i<r;)f=h[u],p=h[i],d=n(t(f)(p)),d>0?(a[s++]=p,++i):(a[s++]=f,++u);for(;u<l;)a[s++]=h[u++];for(;i<r;)a[s++]=h[i++]}return function(t,n,a){var h;return a.length<2?a:(h=a.slice(0),e(t,n,h,a.slice(0),0,a.length),h)}}(),eF=function(e,t,n){return n.slice(e,t)};var tF=function(e){var t=ee(e.Bind1()),n=td(e.Applicative0());return function(a){return function(h){return t(a)(function(o){return n(o)(h)})}}};var Ky=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(a){return function(h){return t(h)(function(o){return n(a(o))})}}},Dr=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(a){return function(h){return t(a)(function(o){return t(h)(function(r){return n(o(r))})})}}};var nF="\uFFFF",rF="\0",yW=Number.POSITIVE_INFINITY,DW=Number.NEGATIVE_INFINITY;var rd=function(e){return function(t){return function(n){return function(a){return function(h){return a<h?e:a===h?t:n}}}}},oF=rd,aF=rd,iF=rd,uF=rd,sF=rd,cF=function(e){return function(t){return function(n){for(var a=0,h=t.length,o=n.length;a<h&&a<o;){var r=t[a],l=n[a],u=e(r)(l);if(u!==0)return u;a++}return h===o?0:h>o?-1:1}}};var od=function(e){return function(t){return e===t}},lF=od,fF=od,dF=od,pF=od,hF=od,_F=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(!e(t[a])(n[a]))return!1;return!0}}};var Jh={eq:function(e){return function(t){return!0}}},eo={eq:hF};var ad={eq:dF},Du={eq:fF},mF={eq:pF},jh={eq:lF};var $e=function(e){return e.eq},SW=$e(jh),wi=function(e){return{eq:_F($e(e))}};var id=function(e){var t=$e(e);return function(n){return function(a){return SW(t(n)(a))(!1)}}};var de=function(){function e(){}return e.value=new e,e}(),se=function(){function e(){}return e.value=new e,e}(),qe=function(){function e(){}return e.value=new e,e}();var Si={eq:function(e){return function(t){return e instanceof de&&t instanceof de||e instanceof se&&t instanceof se||e instanceof qe&&t instanceof qe}}};var vF=function(e){return function(t){return e-t|0}};var gF=function(e){return function(t){return e+t|0}},yF=function(e){return function(t){return e*t|0}},DF=function(e){return function(t){return e+t}},CF=function(e){return function(t){return e*t}};var Lo=function(e){return e.zero};var Qy={add:DF,zero:0,mul:CF,one:1},Kh={add:gF,zero:0,mul:yF,one:1};var zo=function(e){return e.add};var ud=function(e){return e.sub};var sd={sub:vF,Semiring0:function(){return Kh}};var Xy=function(e){var t=ud(e),n=Lo(e.Semiring0());return function(a){return t(n)(a)}};var tn={compare:function(e){return function(t){return qe.value}},Eq0:function(){return Jh}},Vt=function(){return{compare:uF(de.value)(qe.value)(se.value),Eq0:function(){return eo}}}();var Ti=function(){return{compare:iF(de.value)(qe.value)(se.value),Eq0:function(){return ad}}}(),gt=function(){return{compare:aF(de.value)(qe.value)(se.value),Eq0:function(){return Du}}}(),Qh=function(){return{compare:sF(de.value)(qe.value)(se.value),Eq0:function(){return mF}}}(),cd=function(){return{compare:oF(de.value)(qe.value)(se.value),Eq0:function(){return jh}}}();var Ee=function(e){return e.compare},MW=Ee(gt),Xh=function(e){var t=Ee(e);return function(n){return function(a){return function(h){return t(n(a))(n(h))}}}};var Yy=function(e){var t=Ee(e);return function(n){return function(a){var h=t(n)(a);return!(h instanceof de)}}};var Mi=function(e){var t=Ee(e);return function(n){return function(a){var h=t(n)(a);if(h instanceof de)return a;if(h instanceof qe||h instanceof se)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[h.constructor.name])}}},cl=function(e){var t=Ee(e);return function(n){return function(a){var h=t(n)(a);if(h instanceof de||h instanceof qe)return n;if(h instanceof se)return a;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[h.constructor.name])}}},Ps=function(e){var t=Ee(e),n=wi(e.Eq0());return{compare:function(){var a=function(h){return function(o){var r=t(h)(o);if(r instanceof qe)return 0;if(r instanceof de)return 1;if(r instanceof se)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[r.constructor.name])}};return function(h){return function(o){return MW(0)(cF(a)(h)(o))}}}(),Eq0:function(){return n}}};var Zy=function(e){var t=cl(e),n=Mi(e);return function(a){return function(h){return function(o){return t(h)(n(a)(o))}}}};var e0=function(e){var t=Yy(e);return function(n){var a=Lo(n.Semiring0()),h=Xy(n);return function(o){var r=t(o)(a);return r?o:h(o)}}};var Ao=function(e){return e.top};var ll={top:2147483647,bottom:-2147483648,Ord0:function(){return gt}},ks={top:nF,bottom:rF,Ord0:function(){return Qh}};var da=function(e){return e.bottom};var TF=function(e){return e.toString()},MF=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var FF=function(e){var t=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(n,a){switch(n){case'"':case"\\":return"\\"+n;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var h=a+1,o=h<t&&e[h]>="0"&&e[h]<="9"?"\\&":"";return"\\"+n.charCodeAt(0).toString(10)+o})+'"'},xF=function(e){return function(t){for(var n=[],a=0,h=t.length;a<h;a++)n[a]=e(t[a]);return"["+n.join(",")+"]"}};var Fi={show:FF};var _o={show:MF},to={show:TF};var LF={show:function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[e.constructor.name])}},Me=function(e){return e.show},fl=function(e){return{show:xF(Me(e))}};var IW=he(me),V=function(){function e(){}return e.value=new e,e}(),N=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),e_=function(e){var t=Me(e);return{show:function(n){if(n instanceof N)return"(Just "+(t(n.value0)+")");if(n instanceof V)return"Nothing";throw new Error("Failed pattern match at Data.Maybe (line 223, column 1 - line 225, column 28): "+[n.constructor.name])}}},t0=function(e){var t=De(e);return{append:function(n){return function(a){if(n instanceof V)return a;if(a instanceof V)return n;if(n instanceof N&&a instanceof N)return new N(t(n.value0)(a.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,a.constructor.name])}}}};var IF=function(e){var t=t0(e);return{mempty:V.value,Semigroup0:function(){return t}}};var Ke=function(e){return function(t){return function(n){if(n instanceof V)return e;if(n instanceof N)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Su=Ke(!0)(_e(!1)),Ns=Ke(!1)(_e(!0));var ht={map:function(e){return function(t){return t instanceof N?new N(e(t.value0)):V.value}}},RW=z(ht);var tr=function(e){return Ke(e)(IW)},Io=function(){return function(e){if(e instanceof N)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var pl=function(e){var t=$e(e);return{eq:function(n){return function(a){return n instanceof V&&a instanceof V?!0:n instanceof N&&a instanceof N?t(n.value0)(a.value0):!1}}}};var ld={apply:function(e){return function(t){if(e instanceof N)return RW(e.value0)(t);if(e instanceof V)return V.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return ht}};var kr={bind:function(e){return function(t){if(e instanceof N)return t(e.value0);if(e instanceof V)return V.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return ld}};var We=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Oe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Eu={map:function(e){return function(t){if(t instanceof We)return new We(t.value0);if(t instanceof Oe)return new Oe(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},$W=z(Eu);var Sn=function(e){return function(t){return function(n){if(n instanceof We)return e(n.value0);if(n instanceof Oe)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},t_=function(){return Sn(_e(V.value))(N.create)}();var RF=Sn(_e(!1))(_e(!0));var n0={apply:function(e){return function(t){if(e instanceof We)return new We(e.value0);if(e instanceof Oe)return $W(e.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Eu}};var hl=function(){return{pure:Oe.create,Apply0:function(){return n0}}}();var Go=function(e){return e};var xi={map:function(e){return function(t){return e(t)}}};var n_={apply:function(e){return function(t){return e(t)}},Functor0:function(){return xi}},r0={bind:function(e){return function(t){return t(e)}},Apply0:function(){return n_}},r_={pure:Go,Apply0:function(){return n_}},Cr={Applicative0:function(){return r_},Bind1:function(){return r0}};var $F=function(e){return Math.min(Math.abs(e),2147483647)},HF=function(e){return function(t){return t===0?0:t>0?Math.floor(e/t):-Math.floor(e/-t)}},OF=function(e){return function(t){if(t===0)return 0;var n=Math.abs(t);return(e%n+n)%n}};var PF={Ring0:function(){return sd}};var _l=function(e){return e.mod};var ml={degree:$F,div:HF,mod:OF,CommutativeRing0:function(){return PF}},fd=function(e){return e.div};var Li={mempty:"",Semigroup0:function(){return Hs}};var Bs={mempty:[],Semigroup0:function(){return sn}};var st=function(e){return e.mempty};var NF=function(e){return function(){return e}},BF=function(e){return function(t){return function(){return t(e())()}}};var WF=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}},qa={Applicative0:function(){return nn},Bind1:function(){return Sr}},Sr={bind:BF,Apply0:function(){return o0(0)}},nn={pure:NF,Apply0:function(){return o0(0)}},UF=WF("functorEffect","Effect",function(){return{map:nd(nn)}}),o0=WF("applyEffect","Effect",function(){return{apply:Dr(qa),Functor0:function(){return UF(0)}}}),Pe=UF(20),a0=o0(23);var qF=function(e){return function(){return{value:e}}};var Qe=function(e){return function(){return e.value}},VF=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},Ut=function(e){return function(t){return function(){t.value=e}}};var WW=ut(Pe),cn=qF,i0=VF,o_=function(e){return i0(function(t){var n=e(t);return{state:n,value:n}})},no=function(e){return function(t){return WW(o_(e)(t))}};var VW=wn(Sr),zW=z(Pe),Pt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gn=function(e){return e.tailRecM};var GW=function(e){var t=function(n){var a=!1,h;function o(r){if(r instanceof Pt){n=e(r.value0);return}if(r instanceof Bt)return a=!0,r.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 103, column 3 - line 103, column 25): "+[r.constructor.name])}for(;!a;)h=o(n);return h};return function(n){return t(e(n))}};var zF={tailRecM:function(e){var t=function(a){return a},n=GW(function(a){return t(e(a))});return function(a){return Go(n(a))}},Monad0:function(){return Cr}};var a_={tailRecM:function(e){return function(t){var n=function(a){if(a instanceof Bt)return a.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[a.constructor.name])};return function(){var h=VW(cn)(e(t))();return function(){for(;!function(){var r=Qe(h)();if(r instanceof Pt){var l=e(r.value0)();return Ut(l)(h)(),!1}if(r instanceof Bt)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[r.constructor.name])}(););return{}}(),zW(n)(Qe(h))()}}},Monad0:function(){return qa}};var GF=function(e){return function(t){return function(){return e(t())}}},JF=function(e){return function(){return e}},jF=function(e){return function(t){return function(){return t(e())()}}};var pd=function(e){return function(t){return function(){for(var n=0,a=e.length;n<a;n++)t(e[n])()}}};var QW=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}};var Ws={map:GF};var c0={Applicative0:function(){return i_},Bind1:function(){return l0}},l0={bind:jF,Apply0:function(){return YF(0)}},i_={pure:JF,Apply0:function(){return YF(0)}},YF=QW("applyST","Control.Monad.ST.Internal",function(){return{apply:Dr(c0),Functor0:function(){return Ws}}});function ZF(e){return e}var ex=ZF,tx=ZF;var nx=function(e,t){return t.push(e)};var u_=function(t){return function(n){return function(){return t(n)}}},f0=function(t){return function(n){return function(a){return function(){return t(n,a)}}}};var rx=u_(tx),d0=u_(ex);var p0=f0(nx);var ax=function(e){return function(t){return e&&t}},ix=function(e){return function(t){return e||t}},ux=function(e){return!e};var _d=function(e){return e.tt};var ha=function(e){return e.not};var h0=function(e){return e.implies};var md=function(e){return e.ff};var Us=function(e){return e.disj},pa={ff:!1,tt:!0,implies:function(e){return function(t){return Us(pa)(ha(pa)(e))(t)}},conj:ax,disj:ix,not:ux};var vl=function(e){return e.conj},vd=function(e){var t=md(e),n=_d(e),a=h0(e),h=vl(e),o=Us(e),r=ha(e);return{ff:function(l){return t},tt:function(l){return n},implies:function(l){return function(u){return function(i){return a(l(i))(u(i))}}},conj:function(l){return function(u){return function(i){return h(l(i))(u(i))}}},disj:function(l){return function(u){return function(i){return o(l(i))(u(i))}}},not:function(l){return function(u){return r(l(u))}}}};var sx=function(e){return function(t){return function(n){for(var a=t,h=n.length,o=h-1;o>=0;o--)a=e(n[o])(a);return a}}},cx=function(e){return function(t){return function(n){for(var a=t,h=n.length,o=0;o<h;o++)a=e(a)(n[o]);return a}}};var lx={empty:[],Alt0:function(){return zy}},Nr=function(e){return e.empty};var Z=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Tu=function(e){return function(t){return e(t.value0)(t.value1)}};var _n=function(e){return e.value1};var Ii={map:function(e){return function(t){return new Z(t.value0,e(t.value1))}}};var nr=function(e){return e.value0};var v0=function(e){var t=$e(e);return function(n){var a=$e(n);return{eq:function(h){return function(o){return t(h.value0)(o.value0)&&a(h.value1)(o.value1)}}}}},gl=function(e){var t=Ee(e),n=v0(e.Eq0());return function(a){var h=Ee(a),o=n(a.Eq0());return{compare:function(r){return function(l){var u=t(r.value0)(l.value0);return u instanceof de?de.value:u instanceof se?se.value:h(r.value1)(l.value1)}},Eq0:function(){return o}}}};var Ro=function(e){return e.bimap};var d3={append:function(e){return function(t){return e instanceof N?e:t}}};var hx=function(){return{mempty:V.value,Semigroup0:function(){return d3}}}();var ne=function(e){return e};var Cd=function(){return ne};var p3=Cd();var In=function(){return p3};var h3=he(me),_3=$e(Si),m3=In();var yn=function(e){return e.foldr};var at=function(e){var t=Pr(e.Apply0()),n=X(e);return function(a){var h=yn(a);return function(o){return h(function(r){return t(o(r))})(n(void 0))}}},f_=function(e){var t=at(e);return function(n){return Ie(t(n))}};var mn=function(e){return e.foldl};var Va=function(e){var t=mn(e);return function(n){var a=De(n.Semigroup0()),h=st(n);return function(o){return function(r){var l=function(u){return function(i){return u.init?{init:!1,acc:i}:{init:!1,acc:a(u.acc)(a(o)(i))}}};return t(l)({init:!0,acc:h})(r).acc}}}};var Dx=function(e){var t=mn(e);return function(n){var a=function(h){return function(o){if(h instanceof V)return new N(o);if(h instanceof N)return new N(function(){var r=_3(n(h.value0)(o))(se.value);return r?h.value0:o}());throw new Error("Failed pattern match at Data.Foldable (line 441, column 3 - line 441, column 27): "+[h.constructor.name,o.constructor.name])}};return t(a)(V.value)}},S0=function(e){var t=Ee(e);return function(n){return Dx(n)(t)}};var E0=function(e){var t=mn(e);return function(n){return t(zo(n))(Lo(n))}};var $t={foldr:function(e){return function(t){return function(n){if(n instanceof V)return t;if(n instanceof N)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof V)return t;if(n instanceof N)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=st(e);return function(n){return function(a){if(a instanceof V)return t;if(a instanceof N)return n(a.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,a.constructor.name])}}}};var d_={foldr:function(e){return function(t){return function(n){if(n instanceof We)return t;if(n instanceof Oe)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof We)return t;if(n instanceof Oe)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=st(e);return function(n){return function(a){if(a instanceof We)return t;if(a instanceof Oe)return n(a.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,a.constructor.name])}}}};var Cx=function(e){var t=yn(e);return function(n){var a=De(n.Semigroup0()),h=st(n);return function(o){return t(function(r){return function(l){return a(o(r))(l)}})(h)}}},mt={foldr:sx,foldl:cx,foldMap:function(e){return Cx(mt)(e)}};var Nn=function(e){return e.foldMap};var p_=function(e){var t=Nn(e)(hx);return function(n){var a=$e(n);return function(h){var o=t(function(r){var l=a(h)(r.value0);return l?new N(r.value1):V.value});return function(r){return m3(o(r))}}}};var Gs=function(e){var t=Nn(e);return function(n){return t(n)(h3)}};var Dl=function(e){return function(t){return function(n){return e(t,n)}}},Cl=function(e){return function(t){return function(n){return function(a){return e(t,n,a)}}}},Mu=function(e){return function(t){return function(n){return function(a){return function(h){return e(t,n,a,h)}}}}},T0=function(e){return function(t){return function(n){return function(a){return function(h){return function(o){return e(t,n,a,h,o)}}}}}};var bx=function(e){return function(t){for(var n=t.length,a=Array(n),h=0;h<n;h++)a[h]=e(h)(t[h]);return a}};var bl=function(e){return e.mapWithIndex};var Td={mapWithIndex:bx,Functor0:function(){return Ct}};var Tx=function(){function e(h){return[h]}function t(h){return function(o){return[h,o]}}function n(h){return function(o){return function(r){return[h,o,r]}}}function a(h){return function(o){return h.concat(o)}}return function(h){return function(o){return function(r){return function(l){return function(u){function i(s,f){switch(f-s){case 0:return r([]);case 1:return o(e)(l(u[s]));case 2:return h(o(t)(l(u[s])))(l(u[s+1]));case 3:return h(h(o(n)(l(u[s])))(l(u[s+1])))(l(u[s+2]));default:var p=s+Math.floor((f-s)/4)*2;return h(o(a)(i(s,p)))(i(p,f))}}return i(0,u.length)}}}}}}();var Y3=he(me),Tn=function(e){return e.traverse};var Js={traverse:function(e){var t=X(e),n=z(e.Apply0().Functor0());return function(a){return function(h){if(h instanceof V)return t(V.value);if(h instanceof N)return n(N.create)(a(h.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[a.constructor.name,h.constructor.name])}}},sequence:function(e){var t=X(e),n=z(e.Apply0().Functor0());return function(a){if(a instanceof V)return t(V.value);if(a instanceof N)return n(N.create)(a.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[a.constructor.name])}},Functor0:function(){return ht},Foldable1:function(){return $t}};var kx=function(e){var t=Tn(e);return function(n){return t(n)(Y3)}},Fu={traverse:function(e){var t=e.Apply0();return Tx(pt(t))(z(t.Functor0()))(X(e))},sequence:function(e){return kx(Fu)(e)},Functor0:function(){return Ct},Foldable1:function(){return mt}};var Nx=function(e){return function(t){return function(n){return function(a){return function(h){return function(o){for(var r=[],l=o;;){var u=h(l);if(e(u))return r;var i=t(u);r.push(n(i)),l=a(i)}}}}}}};var Bx=function(e){return function(t){return function(n){return function(a){return function(h){return function(o){for(var r=[],l=o;;){var u=h(l);r.push(n(u));var i=a(u);if(e(i))return r;l=t(i)}}}}}}};var m_=function(e){return e.foldl1};var uU=Io();var A0={unfoldr1:Bx(Su)(uU)(nr)(_n)};var cU=Io(),_a=function(e){return e.unfoldr};var jo={unfoldr:Nx(Su)(cU)(nr)(_n),Unfoldable10:function(){return A0}};var fU=ut(Ws);var dU=z(Ct),pU=z(Ws),I0=Io(),hU=An(i_),_U=id(Si),mU=$e(Si);var vU=Gs(mt),gU=De(sn);var y_=function(){return Cl(Jy)(_e(V.value))(function(e){return function(t){return new N({head:e,tail:t})}})}();var R0=function(){return Cl(Jy)(_e(V.value))(function(e){return function(t){return new N(t)}})}(),D_=function(e){return Cl(ZM)(e)(function(t){if(t instanceof se)return 1;if(t instanceof qe)return 0;if(t instanceof de)return-1;throw new Error("Failed pattern match at Data.Array (line 897, column 38 - line 900, column 11): "+[t.constructor.name])})},$0=function(e){var t=Xh(e);return function(n){return D_(t(n))}},yU=$0(gt),H0=function(e){var t=Ee(e);return function(n){return D_(t)(n)}};var g_=Cl(eF);var js=function(e){return[e]};var Ks=function(e){return yr(e)===0};var qx=bl(Td);var Vx=function(){return T0(QM)(N.create)(V.value)}();var C_=function(){return Mu(JM)(N.create)(V.value)}(),Tl=function(e){return C_(e)(yr(e)-1|0)};var zx=function(e){return function(t){var n=function(h){var o=!1,r;function l(u){var i=C_(t)(u);if(i instanceof N){var s=e(i.value0);if(s){h=u+1|0;return}return o=!0,new N(u)}if(i instanceof V)return o=!0,V.value;throw new Error("Failed pattern match at Data.Array (line 1035, column 5 - line 1037, column 25): "+[i.constructor.name])}for(;!o;)r=l(h);return r},a=n(0);if(a instanceof N&&a.value0===0)return{init:[],rest:t};if(a instanceof N)return{init:g_(0)(a.value0)(t),rest:g_(a.value0)(yr(t))(t)};if(a instanceof V)return{init:t,rest:[]};throw new Error("Failed pattern match at Data.Array (line 1022, column 3 - line 1028, column 30): "+[a.constructor.name])}},b_=function(e){return function(t){return zx(e)(t).init}};var Ri=function(e){return C_(e)(0)},Gx=function(e){return function(t){var n=D_(function(h){return function(o){return e(_n(h))(_n(o))}})(qx(Z.create)(t)),a=Ri(n);if(a instanceof V)return[];if(a instanceof N)return dU(_n)(yU(nr)(function(){var o=rx(js(a.value0))();return pd(n)(function(r){return function(){var u=pU(function(){var i=function(s){return I0(Tl(s))};return function(s){return _n(i(s))}}())(d0(o))();return hU(_U(e(u)(r.value1))(qe.value))(fU(p0(r)(o)))()}})(),d0(o)()}()));throw new Error("Failed pattern match at Data.Array (line 1115, column 17 - line 1123, column 28): "+[a.constructor.name])}},Fd=function(e){return Gx(Ee(e))};var $i=function(e){return Dl(GM)(yn(e))};var Jx=function(e){return vU(e)};var jx=function(){return Mu(KM)(N.create)(V.value)}(),xd=function(e){return function(t){return function(n){var a=Ke(0)(function(h){return h+1|0})(jx(function(h){return mU(e(t)(h))(se.value)})(n));return I0(Vx(a)(t)(n))}}};var Kx=function(){return Mu(jM)(N.create)(V.value)}();var O0=Dl(YM);var P0=function(e){return function(t){var n=e<1;return n?t:g_(e)(yr(t))(t)}};var Qx=function(){return Mu(XM)(N.create)(V.value)}(),w_=function(e){return function(t){return function(n){return n.length===0?[]:Ke(n)(function(a){return I0(Qx(a)(n))})(Kx(e(t))(n))}}},k0=function(e){return w_($e(e))};var ln=function(e){return function(t){return gU([e])(t)}};var N0=Ie(ee(yu)),za=function(e){return N0(function(){var t=Ke([])(js);return function(n){return t(e(n))}}())};var Ld=function(e){return e.foldrWithIndex};var oo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var W0=function(e){var t=Nr(e);return function(n){return new oo(n,t)}};var S_=function(e){var t=Pn(e.Plus1().Alt0()),n=X(e.Applicative0());return function(a){return t(n(a.value0))(a.value1)}};var Id=function(e){var t=z(e);return{map:function(n){return function(a){return new oo(n(a.value0),t(n)(a.value1))}}}};var E_=function(e){var t=Nn(e),n=mn(e),a=yn(e);return{foldMap:function(h){var o=De(h.Semigroup0()),r=t(h);return function(l){return function(u){return o(l(u.value0))(r(l)(u.value1))}}},foldl:function(h){return function(o){return function(r){return n(h)(h(o)(r.value0))(r.value1)}}},foldr:function(h){return function(o){return function(r){return h(r.value0)(a(h)(o)(r.value1))}}}}};var U0=function(e){var t=mn(e),n=yn(e),a=E_(e);return{foldMap1:function(h){var o=De(h);return function(r){return function(l){return t(function(u){return function(i){return o(u)(r(i))}})(r(l.value0))(l.value1)}}},foldr1:function(h){return function(o){return Ke(o.value0)(h(o.value0))(n(function(r){var l=Ke(r)(h(r));return function(u){return N.create(l(u))}})(V.value)(o.value1))}},foldl1:function(h){return function(o){return t(h)(o.value0)(o.value1)}},Foldable0:function(){return a}}};var eL=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Wn=function(e){return e};var T_=function(e){return function(t){return t.toString(e)}};var M_=isFinite;var Rd=Math.abs;var $d=function(e){return function(t){return e%t}},V0=Math.round;var nL=Ao(ll),rL=da(ll);var z0=16;var G0=function(){return eL(N.create)(V.value)}(),PU=function(e){if(!M_(e))return 0;if(e>=Wn(nL))return nL;if(e<=Wn(rL))return rL;if(hn)return tr(0)(G0(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},Ml=function(e){return PU(V0(e))};var kU=typeof Array.from=="function",NU=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",BU=typeof String.prototype.fromCodePoint=="function",WU=typeof String.prototype.codePointAt=="function",oL=function(e){return WU?function(t){return t.codePointAt(0)}:e};var aL=function(e){return BU?String.fromCodePoint:e},iL=function(e){return function(t){return NU?function(n){for(var a="",h=n[Symbol.iterator](),o=0;o<t;++o){var r=h.next();if(r.done)return a;a+=r.value}return a}:e(t)}},uL=function(e){return function(t){return kU?function(n){return Array.from(n,t)}:e}};function xu(e){return e.charCodeAt(0)}function sL(e){return String.fromCharCode(e)}var Hd={Applicative0:function(){return al},Plus1:function(){return lx}};var lL=da(ks),fL=Ao(ks);var Ys=function(e){return e.toEnum};var j0=function(e){return e.fromEnum},dL=function(e){var t=Ys(e),n=j0(e),a=da(e.Bounded0());return function(h){return function(o){return function(r){var l=t(r);if(l instanceof N)return l.value0;if(l instanceof V){var u=r<n(a);return u?h:o}throw new Error("Failed pattern match at Data.Enum (line 158, column 33 - line 160, column 62): "+[l.constructor.name])}}}};var Lu=function(e){return function(t){return function(n){return e(t(n)+1|0)}}},Au=function(e){return function(t){return function(n){return e(t(n)-1|0)}}};var J0=function(e){return e>=xu(lL)&&e<=xu(fL)?new N(sL(e)):V.value},GU={succ:Lu(J0)(xu),pred:Au(J0)(xu),Ord0:function(){return Qh}};var K0=function(){return{cardinality:xu(fL)-xu(lL)|0,toEnum:J0,fromEnum:xu,Bounded0:function(){return ks},Enum1:function(){return GU}}}();var F_=function(e){return e};var Iu=function(e){return e.length};var x_=function(e){return function(t){return t.substr(0,e)}},Zs=function(e){return function(t){return t.substring(e)}};var Ru=function(e){return function(t){if(e>=0&&e<t.length)return t.charAt(e);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var hL=function(e){return function(t){return Zs(Iu(t)-e|0)(t)}};var L_=function(e){return function(t){return x_(Iu(t)-e|0)(t)}};var Q0=function(e){return function(t){return t.split(e)}};var vo=function(e){return function(t){return t.join(e)}};var gL=function(e){return e===""};var Pd=j0(K0),t4=z(ht),n4=_a(jo),r4=fd(ml),o4=_l(ml);var DL=function(e){return function(t){return(((e-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var CL=function(e){return 56320<=e&&e<=57343},bL=function(e){return 55296<=e&&e<=56319},wL=function(e){var t=Iu(e);if(t===0)return V.value;if(t===1)return new N({head:Pd(Ru(0)(e)),tail:""});var n=Pd(Ru(1)(e)),a=Pd(Ru(0)(e)),h=bL(a)&&CL(n);return h?new N({head:DL(a)(n),tail:Zs(2)(e)}):new N({head:a,tail:Zs(1)(e)})},a4=function(e){return t4(function(t){return new Z(t.head,t.tail)})(wL(e))},i4=function(e){return n4(a4)(e)},u4=function(e){var t=Pd(Ru(0)(e)),n=bL(t)&&Iu(e)>1;if(n){var a=Pd(Ru(1)(e)),h=CL(a);return h?DL(t)(a):t}return t},s4=oL(u4),c4=uL(i4)(s4),ec=function(e){return yr(c4(e))};var X0=function(){var e=dL(K0)(da(ks))(Ao(ks));return function(t){return F_(e(t))}}(),l4=function(e){if(e<=65535)return X0(e);var t=r4(e-65536|0)(1024)+55296|0,n=o4(e-65536|0)(1024)+56320|0;return X0(t)+X0(n)};var SL=aL(l4),EL=function(e){return function(t){if(e<1)return"";var n=wL(t);return n instanceof N?SL(n.value0.head)+EL(e-1|0)(n.value0.tail):t}},TL=iL(EL);var A_=function(e){return function(t){return Zs(Iu(TL(e)(t)))(t)}};var Y0=Zy(gt),ML=Mi(gt),FL=cl(gt);var Z0=Zy(Ti);var xL=Me(_o);var LL=function(){function e(t,n,a,h){this.value0=t,this.value1=n,this.value2=a,this.value3=h}return e.create=function(t){return function(n){return function(a){return function(h){return new e(t,n,a,h)}}}},e}(),AL=function(e){return function(t){return $d($d(e)(t)+t)(t)}},_4=function(e){return function(t){return function(n){return function(a){var h=Y0(0)(255)(e),o=Wn(h)/255,r=Y0(0)(255)(t),l=Wn(r)/255,u=Y0(0)(255)(n),i=ML(ML(h)(r))(u),s=FL(FL(h)(r))(u),f=i-s|0,p=Wn(f)/255,d=Wn(i+s|0)/(255*2),c=function(){if(f===0)return 0;if(hn)return p/(1-Rd(2*d-1));throw new Error("Failed pattern match at Color (line 160, column 3 - line 162, column 64): ")}(),_=Wn(u)/255,m=function(y){if(y===0)return 0;if(i===h)return AL((l-_)/p)(6);if(i===r)return(_-o)/p+2;if(hn)return(o-l)/p+4;throw new Error("Failed pattern match at Color (line 150, column 3 - line 150, column 15): "+[y.constructor.name])},v=60*m(f);return new LL(v,c,d,a)}}}},Ja=function(e){return function(t){return function(n){return _4(e)(t)(n)(1)}}};var m4=function(e){return function(t){return function(n){return function(a){var h=Z0(0)(1)(t),o=Z0(0)(1)(n),r=Z0(0)(1)(a);return new LL(e,h,o,r)}}}};var IL=function(e){return function(t){return function(n){return m4(e)(t)(n)(1)}}},RL=IL(0)(0)(1);var $L=function(e){var t=function(l){return xL(Wn(Ml(100*l))/100)},n=t(e.value1*100)+"%",a=t(e.value2*100)+"%",h=t(e.value0),o=xL(e.value3),r=e.value3===1;return r?"hsl("+(h+(", "+(n+(", "+(a+")"))))):"hsla("+(h+(", "+(n+(", "+(a+(", "+(o+")")))))))};var v4=function(e){var t=e===360;return t?e:AL(e)(360)};var g4=function(e){var t=v4(e.value0)/60,n=(1-Rd(2*e.value2-1))*e.value1,a=e.value2-n/2,h=n*(1-Rd($d(t)(2)-1)),o=function(){if(t<1)return{r:n,g:h,b:0};if(1<=t&&t<2)return{r:h,g:n,b:0};if(2<=t&&t<3)return{r:0,g:n,b:h};if(3<=t&&t<4)return{r:0,g:h,b:n};if(4<=t&&t<5)return{r:h,g:0,b:n};if(hn)return{r:n,g:0,b:h};throw new Error("Failed pattern match at Color (line 356, column 3 - line 362, column 43): ")}();return{r:o.r+a,g:o.g+a,b:o.b+a,a:e.value3}};var y4=function(e){var t=g4(e),n=Ml(255*t.g),a=Ml(255*t.r),h=Ml(255*t.b);return{r:a,g:n,b:h,a:t.a}};var xl=function(e){var t=function(h){var o=T_(z0)(h),r=ec(o)===1;return r?"0"+o:o},n=y4(e),a=function(){if(n.a===1)return"";if(hn)return t(Ml(255*n.a));throw new Error("Failed pattern match at Color (line 429, column 3 - line 431, column 46): ")}();return"#"+(t(n.r)+(t(n.g)+(t(n.b)+a)))};var ja=IL(0)(0)(0);var I_={dimap:function(e){return function(t){return function(n){return function(a){return t(n(e(a)))}}}}},nc=function(e){return e.dimap};var Ko={first:function(e){return function(t){return new Z(e(t.value0),t.value1)}},second:z(Ii),Profunctor0:function(){return I_}},rc=function(e){return e.second},Ll=function(e){return e.first};var OL=z(Ct),PL=rc(Ko),D4=De(sn),C4=p_(mt)(eo);var ao=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),io=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),b4=function(e){return e};var w4=function(e){return e},Xa=function(e){return e.value};var Al={append:function(e){return function(t){if(e instanceof io&&t instanceof io)return new io(e.value0+t.value0);if(e instanceof io&&t instanceof ao)return new ao(OL(PL(function(n){return e.value0+n}))(t.value0));if(e instanceof ao&&t instanceof io)return new ao(OL(PL(function(n){return t.value0+n}))(e.value0));if(e instanceof ao&&t instanceof ao)return new ao(D4(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},S4=De(Al),eD={append:function(e){return function(t){return S4(e)(t)}}},kL=De(eD);var kd=function(e){if(e instanceof ao)return tr("")(C4("")(e.value0));if(e instanceof io)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var R_=function(){return{fromString:io.create}}(),NL=Mt(R_),rr={fromString:function(e){return b4(NL(e))}},$_=Mt(rr);var Hu={value:function(e){return $_($L(e))}};var oc={value:function(){var e=Me(_o);return function(t){return $_(e(t))}}()},Ou={value:$_},Hi=function(e){var t=Xa(e);return function(n){var a=Xa(n);return{value:function(h){return kL(t(h.value0))(kL($_(" "))(a(h.value1)))}}}};var Gn={fromString:function(e){return w4(NL(e))}};var BL=function(e){return e};var WL=function(e){return e.center};var Nd=function(){return new ao([new Z("-webkit-",""),new Z("-moz-",""),new Z("-ms-",""),new Z("-o-",""),new Z("","")])}();var Ya=ne,tD=ne;var nD=De(eD),rD=Xa(oc),oD=Mt(rr),qL=Me(_o),E4=De(Al);var Bd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),T4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),M4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),F4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),x4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Pu=function(e){if(e instanceof Bd)return kd(e.value0);if(e instanceof T4)return Ya(function(t){return Ya(function(n){return"("+(Pu(t)+(" + "+(Pu(n)+")")))})(e.value1)})(e.value0);if(e instanceof M4)return Ya(function(t){return Ya(function(n){return"("+(Pu(t)+(" - "+(Pu(n)+")")))})(e.value1)})(e.value0);if(e instanceof F4)return Ya(function(t){return"("+(qL(e.value0)+(" * "+(Pu(t)+")")))})(e.value1);if(e instanceof x4)return Ya(function(t){return"("+(Pu(t)+(" / "+(qL(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},ga={value:function(e){return e instanceof Bd?e.value0:E4(Nd)(new io("calc"+Pu(e)))}};var et=function(e){return new Bd(nD(rD(e))(oD("px")))};var Rl=function(e){return new Bd(nD(rD(e))(oD("%")))};var aD=function(e){return new Bd(nD(rD(e))(oD("em")))};var L4=De(sn),VL=X(al),A4=$e(wi(eo)),Tr=Ee(Vt),I4=Ee(Ps(Vt)),ku=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ki=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Uu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ni=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$l=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zL=function(e){return e},H_=function(){function e(){}return e.value=new e,e}(),iD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),GL=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),JL=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ft=function(e){return function(t){return new Wd(L4(e.value0)(t),e.value1)}},qt=function(){return new Wd([],H_.value)}(),jL=function(e){return zL(VL(Ni.create(e)))};var R4={eq:function(e){return function(t){return e instanceof ku&&t instanceof ku||e instanceof ki&&t instanceof ki||e instanceof Nu&&t instanceof Nu?e.value0===t.value0:e instanceof Bu&&t instanceof Bu||e instanceof Wu&&t instanceof Wu||e instanceof Uu&&t instanceof Uu||e instanceof qu&&t instanceof qu||e instanceof Vu&&t instanceof Vu||e instanceof zu&&t instanceof zu?e.value0===t.value0&&e.value1===t.value1:e instanceof Ni&&t instanceof Ni?e.value0===t.value0:e instanceof $l&&t instanceof $l?e.value0===t.value0&&A4(e.value1)(t.value1):!1}}};var KL={compare:function(e){return function(t){if(e instanceof ku&&t instanceof ku)return Tr(e.value0)(t.value0);if(e instanceof ku)return de.value;if(t instanceof ku)return se.value;if(e instanceof ki&&t instanceof ki)return Tr(e.value0)(t.value0);if(e instanceof ki)return de.value;if(t instanceof ki)return se.value;if(e instanceof Nu&&t instanceof Nu)return Tr(e.value0)(t.value0);if(e instanceof Nu)return de.value;if(t instanceof Nu)return se.value;if(e instanceof Bu&&t instanceof Bu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof Bu)return de.value;if(t instanceof Bu)return se.value;if(e instanceof Wu&&t instanceof Wu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof Wu)return de.value;if(t instanceof Wu)return se.value;if(e instanceof Uu&&t instanceof Uu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof Uu)return de.value;if(t instanceof Uu)return se.value;if(e instanceof qu&&t instanceof qu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof qu)return de.value;if(t instanceof qu)return se.value;if(e instanceof Vu&&t instanceof Vu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof Vu)return de.value;if(t instanceof Vu)return se.value;if(e instanceof zu&&t instanceof zu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof zu)return de.value;if(t instanceof zu)return se.value;if(e instanceof Ni&&t instanceof Ni)return Tr(e.value0)(t.value0);if(e instanceof Ni)return de.value;if(t instanceof Ni)return se.value;if(e instanceof $l&&t instanceof $l){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:I4(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return R4}};var O_=function(e){return new Wd([],new iD(e))},Jn=function(e){return function(t){return new Wd([],new sD(e,t))}},QL=function(e){return function(t){return new Wd([],new uD(e,t))}};var yt=function(e){return zL(VL(ki.create(e)))};var ya=function(e){return e.tell};function or(e){return new Error(e)}function yo(e){return function(){throw e}}function P_(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var lD=function(e){return yo(or(e))};var ar=function(e){return e.throwError};var O4={throwError:yo,Monad0:function(){return qa}};var XL={catchError:Ie(P_),MonadThrow0:function(){return O4}};var Qo=function(e){return e.catchError};var Ud=function(e){var t=Qo(e),n=e.MonadThrow0().Monad0(),a=z(n.Bind1().Apply0().Functor0()),h=X(n.Applicative0());return function(o){return t(a(Oe.create)(o))(function(r){return h(We.create(r))})}};var Mr=function(e){return e.ask};var uo=function(e){return e.state},Ol=function(e){var t=uo(e);return function(n){return t(function(a){return new Z(void 0,n)})}},Dn=function(e){var t=uo(e);return function(n){return t(function(a){return new Z(void 0,n(a))})}},$o=function(e){var t=uo(e);return function(n){return t(function(a){var h=n(a);return new Z(h,h)})}},Ho=function(e){var t=uo(e);return function(n){return t(function(a){return new Z(n(a),a)})}},Fr=function(e){return uo(e)(function(t){return new Z(t,t)})};var wt=function(e){return e.lift};var Pl={liftEffect:he(me),Monad0:function(){return qa}},Le=function(e){return e.liftEffect};var fD=function(e){return e},dD=function(e){return e};var k_=function(e){return function(t){return e(t)}},pD=function(e){var t=z(e);return{map:function(n){return k_(t(function(a){return new Z(n(a.value0),a.value1)}))}}};var qd=function(e){var t=De(e);return function(n){var a=pt(n),h=n.Functor0(),o=z(h),r=pD(h);return{apply:function(l){return function(u){var i=function(s){return function(f){return new Z(s.value0(f.value0),t(s.value1)(f.value1))}};return a(o(i)(l))(u)}},Functor0:function(){return r}}}},hD=function(e){var t=De(e),n=qd(e);return function(a){var h=ee(a),o=a.Apply0(),r=z(o.Functor0()),l=n(o);return{bind:function(u){return function(i){return h(u)(function(s){var f=i(s.value0);return r(function(p){return new Z(p.value0,t(s.value1)(p.value1))})(f)})}},Apply0:function(){return l}}}};var YL=function(e){var t=st(e),n=qd(e.Semigroup0());return function(a){var h=X(a),o=n(a.Apply0());return{pure:function(r){return h(new Z(r,t))},Apply0:function(){return o}}}},N4=function(e){var t=YL(e),n=hD(e.Semigroup0());return function(a){var h=t(a.Applicative0()),o=n(a.Bind1());return{Applicative0:function(){return h},Bind1:function(){return o}}}};var ZL=function(e){var t=e.Semigroup0(),n=N4(e);return function(a){var h=n(a);return{tell:function(){var o=X(a.Applicative0()),r=Z.create(void 0);return function(l){return fD(o(r(l)))}}(),Semigroup0:function(){return t},Monad1:function(){return h}}}};var B4=In();var W4=function(e){return B4(dD(e))};var eA=function(e){return _n(W4(e))};var z4=z(pD(xi));var G4=pt(qd(sn)(n_)),J4=ee(hD(sn)(r0));var tA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),oA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_D=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),aA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),iA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var j4=function(e){return e},zd=function(e){return eA(e)},cA=function(){var e=ya(ZL(Bs)(Cr));return function(t){return j4(e(js(t)))}}(),Ft=function(e){return function(t){return cA(new mD(new _D(e),zd(t)))}};var Jt=function(e){var t=Xa(e);return function(n){return function(a){return cA(new Vd(BL(n),t(a)))}}},vD=function(e){var t=Jt(e);return function(n){return t(n)}};var K4={map:function(e){return function(t){return z4(e)(t)}}};var Q4={apply:function(e){return function(t){return G4(e)(t)}},Functor0:function(){return K4}},Yo={bind:function(e){return function(t){return J4(e)(function(n){return function(a){return a}(t(n))})}},Apply0:function(){return Q4}};var X4=Mt(rr);var lA=Mt(Gn),Y4=Jt(Hu),Z4=Hi(ga);var e6={value:function(e){return e}},t6=Jt(Hi(e6)(Z4(Hu))),Gd=X4("solid");var fA=Y4(lA("border-color"));var Jd=function(e){return function(t){return function(n){return t6(lA("border"))(new Z(e,new Z(t,n)))}}};var B_=Mt(Gn),Nl=Mt(rr);var Oo=function(){var e=Jt(Ou)(B_("z-index")),t=Me(to);return function(n){return e(t(n))}}();var n6={value:function(e){return e}};var r6={value:function(e){return e}};var Ju=Nl("relative"),fr=Jt(n6)(B_("position")),W_=Jt(oc)(B_("opacity"));var dA=Nl("inline-block");var sc=Nl("flex");var pA=Nl("none");var Da=Jt(r6)(B_("display"));var hA=Nl("block"),Ca=Nl("absolute");var DD=Mt(rr);var _A=Mt(Gn);var o6=function(e){return e};var a6={value:function(e){return e}};var i6={value:function(e){return e}};var Bl=DD("row");var u6={fromString:function(e){return o6(DD(e))}},s6=Mt(u6);var cc=Jt(a6)(_A("flex-direction"));var mA=DD("column");var vA={center:s6("center")};var gA=Jt(i6)(_A("align-items"));var ju=Jt(ga),Za=Mt(Gn),yA=Hi(ga)(ga),DA=Jt(Hi(yA)(yA)),ba=ju(Za("width")),Zo=ju(Za("top")),U_=ju(Za("right"));var bD=ju(Za("padding-right"));var q_=function(e){return function(t){return function(n){return function(a){return DA(Za("padding"))(new Z(new Z(e,t),new Z(n,a)))}}}};var wD=ju(Za("margin-right"));var CA=function(e){return function(t){return function(n){return function(a){return DA(Za("margin"))(new Z(new Z(e,t),new Z(n,a)))}}}};var Wi=ju(Za("left")),Po=ju(Za("height")),SD=ju(Za("bottom"));var Ye=function(){function e(){}return e.value=new e,e}(),Xe=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ED=function(e){return e},l6=function(e){return new Xe(e.value0,e.value1)};var f6=function(e){var t=function(n){return function(a){var h=n,o=!1,r;function l(u,i){if(i instanceof Xe&&i.value1 instanceof Xe&&i.value1.value1 instanceof Xe){h=new Xe(i,u),a=i.value1.value1.value1;return}var s=function(p){return p instanceof Xe&&p.value1 instanceof Xe&&p.value1.value1 instanceof Ye?new Xe(e(p.value0),new Xe(e(p.value1.value0),Ye.value)):p instanceof Xe&&p.value1 instanceof Ye?new Xe(e(p.value0),Ye.value):Ye.value},f=function(p){return function(d){var c=p,_=!1,m;function v(y,C){if(y instanceof Xe&&y.value0 instanceof Xe&&y.value0.value1 instanceof Xe&&y.value0.value1.value1 instanceof Xe){c=y.value1,d=new Xe(e(y.value0.value0),new Xe(e(y.value0.value1.value0),new Xe(e(y.value0.value1.value1.value0),C)));return}return _=!0,C}for(;!_;)m=v(c,d);return m}};return o=!0,f(u)(s(i))}for(;!o;)r=l(h,a);return r}};return t(Ye.value)},wA={map:f6};var qn={foldr:function(e){return function(t){var n=function(){var h=function(o){return function(r){var l=o,u=!1,i;function s(f,p){if(p instanceof Ye)return u=!0,f;if(p instanceof Xe){l=new Xe(p.value0,f),r=p.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[f.constructor.name,p.constructor.name])}for(;!u;)i=s(l,r);return i}};return h(Ye.value)}(),a=mn(qn)(Ie(e))(t);return function(h){return a(n(h))}}},foldl:function(e){var t=function(n){return function(a){var h=n,o=!1,r;function l(u,i){if(i instanceof Ye)return o=!0,u;if(i instanceof Xe){h=e(u)(i.value0),a=i.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[i.constructor.name])}for(;!o;)r=l(h,a);return r}};return t},foldMap:function(e){var t=De(e.Semigroup0()),n=st(e);return function(a){return mn(qn)(function(h){var o=t(h);return function(r){return o(a(r))}})(n)}}};var d6=yn(qn);var TD={append:function(e){return function(t){return d6(Xe.create)(t)(e)}}},SA=De(TD);var EA={append:function(e){return function(t){return new oo(e.value0,SA(e.value1)(l6(t)))}}};var p6={alt:SA,Functor0:function(){return wA}},TA=function(){return{empty:Ye.value,Alt0:function(){return p6}}}();var lc=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}};var _6=z(ht);var At=function(){function e(){}return e.value=new e,e}(),kt=function(){function e(t,n,a,h,o,r){this.value0=t,this.value1=n,this.value2=a,this.value3=h,this.value4=o,this.value5=r}return e.create=function(t){return function(n){return function(a){return function(h){return function(o){return function(r){return new e(t,n,a,h,o,r)}}}}}},e}(),FA=function(){function e(){}return e.value=new e,e}(),MD=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),LD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var V_=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),MA=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),ea=function(e,t,n,a){if(n instanceof At){if(a instanceof At)return new kt(1,1,e,t,n,a);if(a instanceof kt)return new kt(1+a.value0|0,1+a.value1|0,e,t,n,a);throw new Error("Failed pattern match at Data.Map.Internal (line 680, column 5 - line 684, column 39): "+[a.constructor.name])}if(n instanceof kt){if(a instanceof At)return new kt(1+n.value0|0,1+n.value1|0,e,t,n,a);if(a instanceof kt)return new kt(1+function(){var h=n.value0>a.value0;return h?n.value0:a.value0}()|0,(1+n.value1|0)+a.value1|0,e,t,n,a);throw new Error("Failed pattern match at Data.Map.Internal (line 686, column 5 - line 690, column 68): "+[a.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 678, column 32 - line 690, column 68): "+[n.constructor.name])},m6=function(){return Ie(LD.create)(FA.value)}(),v6=function(e){return function(t){return function(n){var a=function(h){var o=!1,r;function l(u){if(u instanceof FA)return o=!0,n(void 0);if(u instanceof MD)return o=!0,t(u.value0,u.value1,u.value2);if(u instanceof LD){h=e(u.value1)(u.value0);return}throw new Error("Failed pattern match at Data.Map.Internal (line 918, column 8 - line 924, column 20): "+[u.constructor.name])}for(;!o;)r=l(h);return r};return a}}},Ku=function(e){if(e instanceof At)return 0;if(e instanceof kt)return e.value1;throw new Error("Failed pattern match at Data.Map.Internal (line 616, column 8 - line 618, column 24): "+[e.constructor.name])},fc=function(e){return function(t){return new kt(1,1,e,t,At.value,At.value)}},wa=function(){var e=function(a){if(a instanceof At)return 0;if(a instanceof kt)return a.value0;throw new Error("Failed pattern match at Data.Map.Internal (line 735, column 12 - line 737, column 26): "+[a.constructor.name])},t=function(a,h,o,r,l,u,i){return u instanceof kt&&u.value0>e(i)?ea(u.value2,u.value3,ea(a,h,o,u.value4),ea(r,l,u.value5,i)):ea(r,l,ea(a,h,o,u),i)},n=function(a,h,o,r,l,u,i){return u instanceof kt&&e(l)<=u.value0?ea(u.value2,u.value3,ea(o,r,l,u.value4),ea(a,h,u.value5,i)):ea(o,r,l,ea(a,h,u,i))};return function(a,h,o,r){if(o instanceof At)return r instanceof At?fc(a)(h):r instanceof kt&&r.value0>1?t(a,h,o,r.value2,r.value3,r.value4,r.value5):ea(a,h,o,r);if(o instanceof kt){if(r instanceof kt){if(r.value0>(o.value0+1|0))return t(a,h,o,r.value2,r.value3,r.value4,r.value5);if(o.value0>(r.value0+1|0))return n(a,h,o.value2,o.value3,o.value4,o.value5,r)}return r instanceof At&&o.value0>1?n(a,h,o.value2,o.value3,o.value4,o.value5,r):ea(a,h,o,r)}throw new Error("Failed pattern match at Data.Map.Internal (line 695, column 40 - line 716, column 34): "+[o.constructor.name])}}(),FD=lc("unsafeSplit","Data.Map.Internal",function(){return function(e,t,n){if(n instanceof At)return new V_(V.value,At.value,At.value);if(n instanceof kt){var a=e(t)(n.value2);if(a instanceof de){var h=FD(771)(e,t,n.value4);return new V_(h.value0,h.value1,wa(n.value2,n.value3,h.value2,n.value5))}if(a instanceof se){var h=FD(774)(e,t,n.value5);return new V_(h.value0,wa(n.value2,n.value3,n.value4,h.value1),h.value2)}if(a instanceof qe)return new V_(new N(n.value3),n.value4,n.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 769, column 5 - line 777, column 30): "+[a.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 765, column 34 - line 777, column 30): "+[n.constructor.name])}}),AD=FD(764),xA=lc("unsafeSplitLast","Data.Map.Internal",function(){return function(e,t,n,a){if(a instanceof At)return new MA(e,t,n);if(a instanceof kt){var h=xA(757)(a.value2,a.value3,a.value4,a.value5);return new MA(h.value0,h.value1,wa(e,t,n,h.value2))}throw new Error("Failed pattern match at Data.Map.Internal (line 754, column 37 - line 758, column 57): "+[a.constructor.name])}}),g6=xA(753),ID=function(e,t){if(e instanceof At)return t;if(e instanceof kt){var n=g6(e.value2,e.value3,e.value4,e.value5);return wa(n.value0,n.value1,n.value2,t)}throw new Error("Failed pattern match at Data.Map.Internal (line 742, column 25 - line 746, column 38): "+[e.constructor.name,t.constructor.name])};var xD=lc("unsafeUnionWith","Data.Map.Internal",function(){return function(e,t,n,a){if(n instanceof At)return a;if(a instanceof At)return n;if(a instanceof kt){var h=AD(e,a.value2,n),o=xD(787)(e,t,h.value1,a.value4),r=xD(788)(e,t,h.value2,a.value5);if(h.value0 instanceof N)return wa(a.value2,t(h.value0.value0)(a.value3),o,r);if(h.value0 instanceof V)return wa(a.value2,a.value3,o,r);throw new Error("Failed pattern match at Data.Map.Internal (line 789, column 5 - line 793, column 46): "+[h.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 782, column 42 - line 793, column 46): "+[n.constructor.name,a.constructor.name])}}),y6=xD(781),RD=function(e){var t=Ee(e);return function(n){return function(a){return function(h){return y6(t,n,a,h)}}}},z_=function(e){return RD(e)(_e)};var $D=function(e){var t=Ee(e);return function(n){return function(a){var h=AD(t,n,a);return _6(function(o){return new Z(o,ID(h.value1,h.value2))})(h.value0)}}};var ta=function(e){var t=Ee(e);return function(n){var a=function(h){var o=!1,r;function l(u){if(u instanceof At)return o=!0,V.value;if(u instanceof kt){var i=t(n)(u.value2);if(i instanceof de){h=u.value4;return}if(i instanceof se){h=u.value5;return}if(i instanceof qe)return o=!0,new N(u.value3);throw new Error("Failed pattern match at Data.Map.Internal (line 281, column 7 - line 284, column 22): "+[i.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 278, column 8 - line 284, column 22): "+[u.constructor.name])}for(;!o;)r=l(h);return r};return a}};var D6=function(){var e=function(t){return function(n){var a=t,h=!1,o;function r(l,u){if(u instanceof At)return h=!0,l;if(u instanceof kt){if(u.value5 instanceof At){a=new MD(u.value2,u.value3,l),n=u.value4;return}a=new MD(u.value2,u.value3,new LD(u.value5,l)),n=u.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 929, column 13 - line 936, column 48): "+[u.constructor.name])}for(;!h;)o=r(a,n);return o}};return e}(),C6=v6(D6);var b6=function(){var e=function(t,n,a){return new N(new Z(new Z(t,n),a))};return C6(e)(function(t){return V.value})}(),Ul=function(e){var t=_a(e)(b6);return function(n){return t(m6(n))}};var Wr=function(e){var t=Ee(e);return function(n){return function(a){var h=function(o){if(o instanceof At)return fc(n)(a);if(o instanceof kt){var r=t(n)(o.value2);if(r instanceof de)return wa(o.value2,o.value3,h(o.value4),o.value5);if(r instanceof se)return wa(o.value2,o.value3,o.value4,h(o.value5));if(r instanceof qe)return new kt(o.value0,o.value1,n,a,o.value4,o.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 469, column 7 - line 472, column 35): "+[r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 466, column 8 - line 472, column 35): "+[o.constructor.name])};return h}}},ql={map:function(e){var t=function(n){if(n instanceof At)return At.value;if(n instanceof kt)return new kt(n.value0,n.value1,n.value2,e(n.value3),t(n.value4),t(n.value5));throw new Error("Failed pattern match at Data.Map.Internal (line 145, column 10 - line 148, column 39): "+[n.constructor.name])};return t}};var Ui={foldr:function(e){return function(t){var n=lc("go","Data.Map.Internal",function(){return function(h,o){if(h instanceof At)return o;if(h instanceof kt)return n(170)(h.value4,e(h.value3)(n(170)(h.value5,o)));throw new Error("Failed pattern match at Data.Map.Internal (line 167, column 26 - line 170, column 43): "+[h.constructor.name])}}),a=n(167);return function(h){return a(h,t)}}},foldl:function(e){return function(t){var n=lc("go","Data.Map.Internal",function(){return function(h,o){if(o instanceof At)return h;if(o instanceof kt)return n(176)(e(n(176)(h,o.value4))(o.value3),o.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 173, column 26 - line 176, column 43): "+[o.constructor.name])}}),a=n(173);return function(h){return a(t,h)}}},foldMap:function(e){var t=st(e),n=De(e.Semigroup0());return function(a){var h=function(o){if(o instanceof At)return t;if(o instanceof kt)return n(h(o.value4))(n(a(o.value3))(h(o.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 179, column 10 - line 182, column 28): "+[o.constructor.name])};return h}}},HD={foldrWithIndex:function(e){return function(t){var n=lc("go","Data.Map.Internal",function(){return function(h,o){if(h instanceof At)return o;if(h instanceof kt)return n(190)(h.value4,e(h.value2)(h.value3)(n(190)(h.value5,o)));throw new Error("Failed pattern match at Data.Map.Internal (line 187, column 26 - line 190, column 45): "+[h.constructor.name])}}),a=n(187);return function(h){return a(h,t)}}},foldlWithIndex:function(e){return function(t){var n=lc("go","Data.Map.Internal",function(){return function(h,o){if(o instanceof At)return h;if(o instanceof kt)return n(196)(e(o.value2)(n(196)(h,o.value4))(o.value3),o.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 193, column 26 - line 196, column 45): "+[o.constructor.name])}}),a=n(193);return function(h){return a(t,h)}}},foldMapWithIndex:function(e){var t=st(e),n=De(e.Semigroup0());return function(a){var h=function(o){if(o instanceof At)return t;if(o instanceof kt)return n(h(o.value4))(n(a(o.value2)(o.value3))(h(o.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 199, column 10 - line 202, column 30): "+[o.constructor.name])};return h}},Foldable0:function(){return Ui}},LA=function(){return Ld(HD)(function(e){return function(t){return function(n){return new Xe(e,n)}}})(Ye.value)}();var Kd=function(){return yn(Ui)(Xe.create)(Ye.value)}();var ei=function(e){var t=!1,n;function a(h){if(h instanceof At)return t=!0,V.value;if(h instanceof kt){if(h.value4 instanceof At)return t=!0,new N({key:h.value2,value:h.value3});e=h.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 359, column 11 - line 364, column 21): "+[h.constructor.name])}for(;!t;)n=a(e);return n};var Qu=function(e){var t=!1,n;function a(h){if(h instanceof At)return t=!0,V.value;if(h instanceof kt){if(h.value5 instanceof At)return t=!0,new N({key:h.value2,value:h.value3});e=h.value5;return}throw new Error("Failed pattern match at Data.Map.Internal (line 350, column 11 - line 355, column 21): "+[h.constructor.name])}for(;!t;)n=a(e);return n};var pr=function(){return At.value}(),Vl=function(e){var t=Wr(e);return function(n){return mn(n)(function(a){return function(h){return t(h.value0)(h.value1)(a)}})(pr)}};var ti=function(e){var t=Ee(e);return function(n){var a=function(h){if(h instanceof At)return At.value;if(h instanceof kt){var o=t(n)(h.value2);if(o instanceof de)return wa(h.value2,h.value3,a(h.value4),h.value5);if(o instanceof se)return wa(h.value2,h.value3,h.value4,a(h.value5));if(o instanceof qe)return ID(h.value4,h.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 496, column 7 - line 499, column 43): "+[o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 493, column 8 - line 499, column 43): "+[h.constructor.name])};return a}};var Xu=function(e){var t=Ee(e);return function(n){return function(a){return function(h){var o=AD(t,a,h),r=n(o.value0);if(r instanceof V)return ID(o.value1,o.value2);if(r instanceof N)return wa(a,r.value0,o.value1,o.value2);throw new Error("Failed pattern match at Data.Map.Internal (line 512, column 3 - line 516, column 41): "+[r.constructor.name])}}}};var hr=function(){var e={},t="Pure",n="Throw",a="Catch",h="Sync",o="Async",r="Bind",l="Bracket",u="Fork",i="Sequential",s="Map",f="Apply",p="Alt",d="Cons",c="Resume",_="Release",m="Finalizer",v="Finalized",y="Forked",C="Fiber",T="Thunk";function D(B,Q,O,W){this.tag=B,this._1=Q,this._2=O,this._3=W}function g(B){var Q=function(O,W,U){return new D(B,O,W,U)};return Q.tag=B,Q}function w(B){return new D(t,void 0)}function F(B){try{B()}catch(Q){setTimeout(function(){throw Q},0)}}function b(B,Q,O){try{return Q(O())}catch(W){return B(W)}}function E(B,Q,O){try{return Q(O)()}catch(W){return O(B(W))(),w}}var M=function(){var B=1024,Q=0,O=0,W=new Array(B),U=!1;function k(){var te;for(U=!0;Q!==0;)Q--,te=W[O],W[O]=void 0,O=(O+1)%B,te();U=!1}return{isDraining:function(){return U},enqueue:function(te){var j,ye;Q===B&&(ye=U,k(),U=ye),W[(O+Q)%B]=te,Q++,U||k()}}}();function S(B){var Q={},O=0,W=0;return{register:function(U){var k=O++;U.onComplete({rethrow:!0,handler:function(te){return function(){W--,delete Q[k]}}})(),Q[k]=U,W++},isEmpty:function(){return W===0},killAll:function(U,k){return function(){if(W===0)return k();var te=0,j={};function ye(we){j[we]=Q[we].kill(U,function(ce){return function(){delete j[we],te--,B.isLeft(ce)&&B.fromLeft(ce)&&setTimeout(function(){throw B.fromLeft(ce)},0),te===0&&k()}})()}for(var Ae in Q)Q.hasOwnProperty(Ae)&&(te++,ye(Ae));return Q={},O=0,W=0,function(we){return new D(h,function(){for(var ce in j)j.hasOwnProperty(ce)&&j[ce]()})}}}}}var x=0,L=1,R=2,A=3,I=4,$=5,H=6;function P(B,Q,O){var W=0,U=x,k=O,te=null,j=null,ye=null,Ae=null,we=null,ce=0,xe=0,It=null,un=!0;function Gt(fe){for(var ae,K,ie;;)switch(ae=null,K=null,ie=null,U){case R:U=L;try{k=ye(k),Ae===null?ye=null:(ye=Ae._1,Ae=Ae._2)}catch(Ve){U=$,te=B.left(Ve),k=null}break;case A:B.isLeft(k)?(U=$,te=k,k=null):ye===null?U=$:(U=R,k=B.fromRight(k));break;case L:switch(k.tag){case r:ye&&(Ae=new D(d,ye,Ae)),ye=k._2,U=L,k=k._1;break;case t:ye===null?(U=$,k=B.right(k._1)):(U=R,k=k._1);break;case h:U=A,k=b(B.left,B.right,k._1);break;case o:U=I,k=E(B.left,k._1,function(Ve){return function(){W===fe&&(W++,M.enqueue(function(){W===fe+1&&(U=A,k=Ve,Gt(W))}))}});return;case n:U=$,te=B.left(k._1),k=null;break;case a:ye===null?we=new D(d,k,we,j):we=new D(d,k,new D(d,new D(c,ye,Ae),we,j),j),ye=null,Ae=null,U=L,k=k._1;break;case l:ce++,ye===null?we=new D(d,k,we,j):we=new D(d,k,new D(d,new D(c,ye,Ae),we,j),j),ye=null,Ae=null,U=L,k=k._1;break;case u:U=A,ae=P(B,Q,k._2),Q&&Q.register(ae),k._1&&ae.run(),k=B.right(ae);break;case i:U=L,k=G(B,Q,k._1);break}break;case $:if(ye=null,Ae=null,we===null)U=H,k=j||te||k;else switch(ae=we._3,ie=we._1,we=we._2,ie.tag){case a:j&&j!==ae&&ce===0?U=$:te&&(U=L,k=ie._2(B.fromLeft(te)),te=null);break;case c:j&&j!==ae&&ce===0||te?U=$:(ye=ie._1,Ae=ie._2,U=R,k=B.fromRight(k));break;case l:ce--,te===null&&(K=B.fromRight(k),we=new D(d,new D(_,ie._2,K),we,ae),(j===ae||ce>0)&&(U=L,k=ie._3(K)));break;case _:we=new D(d,new D(v,k,te),we,j),U=L,j&&j!==ae&&ce===0?k=ie._1.killed(B.fromLeft(j))(ie._2):te?k=ie._1.failed(B.fromLeft(te))(ie._2):k=ie._1.completed(B.fromRight(k))(ie._2),te=null,ce++;break;case m:ce++,we=new D(d,new D(v,k,te),we,j),U=L,k=ie._1;break;case v:ce--,U=$,k=ie._1,te=ie._2;break}break;case H:for(var pe in It)It.hasOwnProperty(pe)&&(un=un&&It[pe].rethrow,F(It[pe].handler(k)));It=null,j&&te?setTimeout(function(){throw B.fromLeft(te)},0):B.isLeft(k)&&un&&setTimeout(function(){if(un)throw B.fromLeft(k)},0);return;case x:U=L;break;case I:return}}function tt(fe){return function(){if(U===H)return un=un&&fe.rethrow,fe.handler(k)(),function(){};var ae=xe++;return It=It||{},It[ae]=fe,function(){It!==null&&delete It[ae]}}}function le(fe,ae){return function(){if(U===H)return ae(B.right(void 0))(),function(){};var K=tt({rethrow:!1,handler:function(){return ae(B.right(void 0))}})();switch(U){case x:j=B.left(fe),U=H,k=j,Gt(W);break;case I:j===null&&(j=B.left(fe)),ce===0&&(U===I&&(we=new D(d,new D(m,k(fe)),we,j)),U=$,k=null,te=null,Gt(++W));break;default:j===null&&(j=B.left(fe)),ce===0&&(U=$,k=null,te=null)}return K}}function ve(fe){return function(){var ae=tt({rethrow:!1,handler:fe})();return U===x&&Gt(W),ae}}return{kill:le,join:ve,onComplete:tt,isSuspended:function(){return U===x},run:function(){U===x&&(M.isDraining()?Gt(W):M.enqueue(function(){Gt(W)}))}}}function q(B,Q,O,W){var U=0,k={},te=0,j={},ye=new Error("[ParAff] Early exit"),Ae=null,we=e;function ce(tt,le,ve){var fe=le,ae=null,K=null,ie=0,pe={},Ve,it;e:for(;;)switch(Ve=null,fe.tag){case y:if(fe._3===e&&(Ve=k[fe._1],pe[ie++]=Ve.kill(tt,function(vt){return function(){ie--,ie===0&&ve(vt)()}})),ae===null)break e;fe=ae._2,K===null?ae=null:(ae=K._1,K=K._2);break;case s:fe=fe._2;break;case f:case p:ae&&(K=new D(d,ae,K)),ae=fe,fe=fe._1;break}if(ie===0)ve(B.right(void 0))();else for(it=0,Ve=ie;it<Ve;it++)pe[it]=pe[it]();return pe}function xe(tt,le,ve){var fe,ae,K,ie,pe,Ve;for(B.isLeft(tt)?(fe=tt,ae=null):(ae=tt,fe=null);;){if(K=null,ie=null,pe=null,Ve=null,Ae!==null)return;if(le===null){W(fe||ae)();return}if(le._3!==e)return;switch(le.tag){case s:fe===null?(le._3=B.right(le._1(B.fromRight(ae))),ae=le._3):le._3=fe;break;case f:if(K=le._1._3,ie=le._2._3,fe){if(le._3=fe,pe=!0,Ve=te++,j[Ve]=ce(ye,fe===K?le._2:le._1,function(){return function(){delete j[Ve],pe?pe=!1:ve===null?xe(fe,null,null):xe(fe,ve._1,ve._2)}}),pe){pe=!1;return}}else{if(K===e||ie===e)return;ae=B.right(B.fromRight(K)(B.fromRight(ie))),le._3=ae}break;case p:if(K=le._1._3,ie=le._2._3,K===e&&B.isLeft(ie)||ie===e&&B.isLeft(K))return;if(K!==e&&B.isLeft(K)&&ie!==e&&B.isLeft(ie))fe=ae===K?ie:K,ae=null,le._3=fe;else if(le._3=ae,pe=!0,Ve=te++,j[Ve]=ce(ye,ae===K?le._2:le._1,function(){return function(){delete j[Ve],pe?pe=!1:ve===null?xe(ae,null,null):xe(ae,ve._1,ve._2)}}),pe){pe=!1;return}break}ve===null?le=null:(le=ve._1,ve=ve._2)}}function It(tt){return function(le){return function(){delete k[tt._1],tt._3=le,xe(le,tt._2._1,tt._2._2)}}}function un(){var tt=L,le=O,ve=null,fe=null,ae,K;e:for(;;)switch(ae=null,K=null,tt){case L:switch(le.tag){case s:ve&&(fe=new D(d,ve,fe)),ve=new D(s,le._1,e,e),le=le._2;break;case f:ve&&(fe=new D(d,ve,fe)),ve=new D(f,e,le._2,e),le=le._1;break;case p:ve&&(fe=new D(d,ve,fe)),ve=new D(p,e,le._2,e),le=le._1;break;default:K=U++,tt=$,ae=le,le=new D(y,K,new D(d,ve,fe),e),ae=P(B,Q,ae),ae.onComplete({rethrow:!1,handler:It(le)})(),k[K]=ae,Q&&Q.register(ae)}break;case $:if(ve===null)break e;ve._1===e?(ve._1=le,tt=L,le=ve._2,ve._2=e):(ve._2=le,le=ve,fe===null?ve=null:(ve=fe._1,fe=fe._2))}for(we=le,K=0;K<U;K++)k[K].run()}function Gt(tt,le){Ae=B.left(tt);var ve;for(var fe in j)if(j.hasOwnProperty(fe)){ve=j[fe];for(fe in ve)ve.hasOwnProperty(fe)&&ve[fe]()}j=null;var ae=ce(tt,we,le);return function(K){return new D(o,function(ie){return function(){for(var pe in ae)ae.hasOwnProperty(pe)&&ae[pe]();return w}})}}return un(),function(tt){return new D(o,function(le){return function(){return Gt(tt,le)}})}}function G(B,Q,O){return new D(o,function(W){return function(){return q(B,Q,O,W)}})}return D.EMPTY=e,D.Pure=g(t),D.Throw=g(n),D.Catch=g(a),D.Sync=g(h),D.Async=g(o),D.Bind=g(r),D.Bracket=g(l),D.Fork=g(u),D.Seq=g(i),D.ParMap=g(s),D.ParApply=g(f),D.ParAlt=g(p),D.Fiber=P,D.Supervisor=S,D.Scheduler=M,D.nonCanceler=w,D}(),AA=hr.Pure,IA=hr.Throw;function RA(e){return function(t){return hr.Catch(e,t)}}function $A(e){return function(t){return t.tag===hr.Pure.tag?hr.Pure(e(t._1)):hr.Bind(t,function(n){return hr.Pure(e(n))})}}function HA(e){return function(t){return hr.Bind(e,t)}}function OD(e){return function(t){return hr.Fork(e,t)}}var OA=hr.Sync;function PA(e){return function(t){return hr.ParMap(e,t)}}function kA(e){return function(t){return hr.ParApply(e,t)}}var Sa=hr.Async;function G_(e){return function(t){return function(n){return hr.Bracket(e,t,n)}}}function NA(e,t){return function(){return hr.Fiber(e,null,t)}}var BA=function(){function e(n,a){return n===0&&typeof setImmediate<"u"?setImmediate(a):setTimeout(a,n)}function t(n,a){return n===0&&typeof clearImmediate<"u"?clearImmediate(a):clearTimeout(a)}return function(n,a){return hr.Async(function(h){return function(){var o=e(a,h(n()));return function(){return hr.Sync(function(){return n(t(a,o))})}}})}}(),WA=hr.Seq;var T6=z(Eu);var PD=function(e){return e};var kD=function(e){return e};var J_=function(e){return function(t){return e(t)}},j_=function(e){var t=z(e);return{map:function(n){return J_(t(T6(n)))}}};var qA=function(e){return{Applicative0:function(){return Qd(e)},Bind1:function(){return K_(e)}}},K_=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return{bind:function(a){return function(h){return t(a)(Sn(function(o){return n(We.create(o))})(function(o){var r=h(o);return r}))}},Apply0:function(){return ND(e)}}},ND=function(e){var t=j_(e.Bind1().Apply0().Functor0());return{apply:Dr(qA(e)),Functor0:function(){return t}}},Qd=function(e){return{pure:function(){var t=X(e.Applicative0());return function(n){return PD(t(Oe.create(n)))}}(),Apply0:function(){return ND(e)}}};var VA=function(e){var t=qA(e);return{throwError:function(){var n=X(e.Applicative0());return function(a){return PD(n(We.create(a)))}}(),Monad0:function(){return t}}};var zA=function(e){var t=De(e);return function(n){var a=n.Bind1(),h=ee(a),o=X(n.Applicative0()),r=j_(a.Apply0().Functor0());return{alt:function(l){return function(u){return h(l)(function(i){if(i instanceof Oe)return o(new Oe(i.value0));if(i instanceof We)return h(u)(function(s){if(s instanceof Oe)return o(new Oe(s.value0));if(s instanceof We)return o(new We(t(i.value0)(s.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[s.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[i.constructor.name])})}},Functor0:function(){return r}}}};var M6=z(ht);var BD=function(e){return e},GA=function(e){return e};var Q_={lift:function(e){var t=Ky(e)(N.create);return function(n){return BD(t(n))}}},F6=wt(Q_);var x6=function(e){var t=z(e);return{map:function(n){return function(a){return t(M6(n))(a)}}}},WD=function(e){return{Applicative0:function(){return VD(e)},Bind1:function(){return UD(e)}}},UD=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return{bind:function(a){return function(h){return t(a)(function(o){if(o instanceof V)return n(V.value);if(o instanceof N){var r=h(o.value0);return r}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[o.constructor.name])})}},Apply0:function(){return qD(e)}}},qD=function(e){var t=x6(e.Bind1().Apply0().Functor0());return{apply:Dr(WD(e)),Functor0:function(){return t}}},VD=function(e){return{pure:function(){var t=X(e.Applicative0());return function(n){return BD(t(N.create(n)))}}(),Apply0:function(){return qD(e)}}};var JA=function(e){var t=gn(e),n=e.Monad0(),a=ee(n.Bind1()),h=X(n.Applicative0()),o=WD(n);return{tailRecM:function(r){var l=t(function(u){var i=r(u);return a(i)(function(s){return h(function(){if(s instanceof V)return new Bt(V.value);if(s instanceof N&&s.value0 instanceof Pt)return new Pt(s.value0.value0);if(s instanceof N&&s.value0 instanceof Bt)return new Bt(new N(s.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[s.constructor.name])}())})});return function(u){return BD(l(u))}},Monad0:function(){return o}}},jA=function(e){var t=e.Monad0(),n=F6(t),a=uo(e),h=WD(t);return{state:function(o){return n(a(o))},Monad0:function(){return h}}};var XA=function(e){return e};var Ea=function(e){return e};var zl={lift:function(e){return function(t){return XA(_e(t))}}},A6=wt(zl),YA=function(e){return function(t){return function(n){return e(t(n))}}},I6=function(e){return{map:function(){var t=z(e);return function(n){return YA(t(n))}}()}};var GD=function(e){var t=pt(e),n=I6(e.Functor0());return{apply:function(a){return function(h){return function(o){return t(a(o))(h(o))}}},Functor0:function(){return n}}},qi=function(e){var t=ee(e),n=GD(e.Apply0());return{bind:function(a){return function(h){return function(o){return t(a(o))(function(r){var l=h(r);return l(o)})}}},Apply0:function(){return n}}};var Xd=function(e){var t=GD(e.Apply0());return{pure:function(){var n=X(e);return function(a){return XA(_e(n(a)))}}(),Apply0:function(){return t}}},Y_=function(e){var t=Xd(e.Applicative0()),n=qi(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},Zu=function(e){var t=Y_(e);return{ask:X(e.Applicative0()),Monad0:function(){return t}}};var ni=function(e){var t=e.Monad0(),n=Y_(t);return{liftEffect:function(){var a=A6(t),h=Le(e);return function(o){return a(h(o))}}(),Monad0:function(){return n}}},es=function(e){var t=e.Monad0(),n=wn(t.Bind1()),a=X(t.Applicative0()),h=gn(e),o=Y_(t);return{tailRecM:function(r){return function(l){var u=function(i){return function(s){var f=r(s);return n(a)(f(i))}};return function(i){return h(u(i))(l)}}},Monad0:function(){return o}}};var dc=function(e){return e.sequential},zi=function(e){return e.parallel};var H6=he(me),O6=function(e){var t=dc(e),n=zi(e);return function(a){var h=at(a);return function(o){var r=h(o);return function(l){var u=r(function(i){return n(l(i))});return function(i){return t(u(i))}}}}};var Gl=function(e){var t=O6(e);return function(n){var a=t(n);return function(h){return a(h)(H6)}}};var pc=function(e){return e()};var nI=function(e){return e()};var rI=function(e){throw new Error(e)};var oI=function(){return rI};var W6=oI(),U6=nI,tm=function(e){return U6(function(){return W6(e)})};var q6=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}},V6=X(nn),jD=ut(Pe),iI=z(Pe);var z6=function(e){return e},uI=OD(!1);var G6={map:PA},xr={map:$A},J6=z(xr),KD=OD(!0),j6=function(){var e=function(a){if(a instanceof Oe)return a.value0;if(a instanceof We)return tm("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[a.constructor.name])},t=function(a){if(a instanceof We)return a.value0;if(a instanceof Oe)return tm("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[a.constructor.name])},n=function(a){if(a instanceof We)return!0;if(a instanceof Oe)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[a.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:We.create,right:Oe.create}}(),sI=function(e){return NA(j6,e)},cI=function(e){return function(){var n=sI(e)();return n.run(),n}},QD=function(e){return jD(cI(e))};var XD=function(e){return BA(Oe.create,e)},lI=function(e){return function(t){return G_(e)({killed:_e(t),failed:_e(t),completed:_e(t)})}},fI={apply:kA,Functor0:function(){return G6}};var ri={Applicative0:function(){return Ur},Bind1:function(){return jt}},jt={bind:HA,Apply0:function(){return YD(0)}},Ur={pure:AA,Apply0:function(){return YD(0)}},YD=q6("applyAff","Effect.Aff",function(){return{apply:Dr(ri),Functor0:function(){return xr}}}),K6=YD(73),Jl=X(Ur),dI=ee(jt);var Q6=wn(jt);var Yd=function(e){return function(t){return lI(Jl(void 0))(_e(e))(_e(t))}},ZD=function(e){return lI(e)(_e(Jl(void 0)))(Jl)};var ts={parallel:ne,sequential:WA,Apply0:function(){return K6},Apply1:function(){return fI}},X6=zi(ts),hc={pure:function(e){return X6(Jl(e))},Apply0:function(){return fI}};var Y6=Gl(ts)(hc)(mt);var Z6={append:function(e){return function(t){return function(n){return Y6([e(n),t(n)])}}}};var Cn={liftEffect:OA,Monad0:function(){return ri}},nm=Le(Cn),_c=function(e){return z6(_e(nm(e)))},Zd=function(e){return Sa(function(t){return iI(_c)(e.join(t))})},pI={map:function(e){return function(t){return pc(sI(J6(e)(Zd(t))))}}};var ep=function(e){return function(t){return dI(nm(t.isSuspended))(function(n){return n?nm(jD(t.kill(e,_e(V6(void 0))))):Sa(function(a){return iI(_c)(t.kill(e,a))})})}};var jl={throwError:IA,Monad0:function(){return ri}},hI={catchError:RA,MonadThrow0:function(){return jl}},_I=Ud(hI);var mI=_I,eq=function(e){return function(t){return cI(Q6(function(n){return nm(e(n))})(_I(t)))}},tp=function(e){return function(t){return jD(eq(e)(t))}};var Gi={tailRecM:function(e){var t=function(n){return dI(e(n))(function(a){if(a instanceof Bt)return Jl(a.value0);if(a instanceof Pt)return t(a.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[a.constructor.name])})};return t},Monad0:function(){return ri}};var eC=_e(Jl(void 0)),vI={mempty:eC,Semigroup0:function(){return Z6}};var aq=function(e){var t=z(e);return{map:function(n){return function(a){return function(h){return t(function(o){return new Z(n(o.value0),o.value1)})(a(h))}}}}};var nC=function(e){return{Applicative0:function(){return np(e)},Bind1:function(){return rC(e)}}},rC=function(e){var t=ee(e.Bind1());return{bind:function(n){return function(a){return function(h){return t(n(h))(function(o){var r=a(o.value0);return r(o.value1)})}}},Apply0:function(){return yI(e)}}},yI=function(e){var t=aq(e.Bind1().Apply0().Functor0());return{apply:Dr(nC(e)),Functor0:function(){return t}}},np=function(e){var t=X(e.Applicative0());return{pure:function(n){return function(a){return t(new Z(n,a))}},Apply0:function(){return yI(e)}}};var DI=function(e){var t=e.Monad0(),n=ee(t.Bind1()),a=X(t.Applicative0()),h=gn(e),o=nC(t);return{tailRecM:function(r){return function(l){var u=function(i){var s=r(i.value0);return n(s(i.value1))(function(f){return a(function(){if(f.value0 instanceof Pt)return new Pt(new Z(f.value0.value0,f.value1));if(f.value0 instanceof Bt)return new Bt(new Z(f.value0.value0,f.value1));throw new Error("Failed pattern match at Control.Monad.State.Trans (line 87, column 16 - line 89, column 40): "+[f.value0.constructor.name])}())})};return function(i){return h(u)(new Z(l,i))}}},Monad0:function(){return o}}},rm=function(e){var t=X(e.Applicative0()),n=nC(e);return{state:function(a){return function(h){return t(a(h))}},Monad0:function(){return n}}};var iq=wt(zl);var ns={liftAff:he(me),MonadEffect0:function(){return Cn}},bn=function(e){return e.liftAff};var am=function(e){var t=e.MonadEffect0(),n=ni(t);return{liftAff:function(){var a=iq(t.Monad0()),h=bn(e);return function(o){return a(h(o))}}(),MonadEffect0:function(){return n}}};var oi=function(e){return function(){console.log(e)}},rp=function(e){return function(){console.warn(e)}};var TI=function(e){var t=Le(e);return function(n){return t(oi(n))}};var Cq=z(ht);var oC=function(e){if(e instanceof Ye)return V.value;if(e instanceof Xe)return new N({head:e.value0,tail:e.value1});throw new Error("Failed pattern match at Data.List (line 259, column 1 - line 259, column 66): "+[e.constructor.name])},im=function(e){return _a(e)(function(t){return Cq(function(n){return new Z(n.head,n.tail)})(oC(t))})};var Ji=function(){var e=function(t){return function(n){var a=t,h=!1,o;function r(l,u){if(u instanceof Ye)return h=!0,l;if(u instanceof Xe){a=new Xe(u.value0,l),n=u.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[l.constructor.name,u.constructor.name])}for(;!h;)o=r(a,n);return o}};return e(Ye.value)}();var MI=function(e){return e instanceof Ye};var um=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var FI=function(e){var t=!1,n;function a(h){if(h.value0 instanceof Ye&&h.value1 instanceof Ye)return t=!0,V.value;if(h.value0 instanceof Ye){e=new um(Ji(h.value1),Ye.value);return}if(h.value0 instanceof Xe)return t=!0,new N(new Z(h.value0.value0,new um(h.value0.value1,h.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[h.constructor.name])}for(;!t;)n=a(e);return n},xI=function(e){return function(t){return new um(e.value0,new Xe(t,e.value1))}};var LI=function(e){return e.value0 instanceof Ye&&e.value1 instanceof Ye};var AI=function(){return new um(Ye.value,Ye.value)}();var Kl=function(){function e(){}return e.value=new e,e}(),sm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var II=function(e){return function(t){if(e instanceof Kl)return t;if(t instanceof Kl)return e;if(e instanceof sm)return new sm(e.value0,xI(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},Sq=function(e){return function(t){return function(n){var a=function(o){return function(r){return function(l){var u=o,i=r,s=!1,f;function p(d,c,_){if(_ instanceof Ye)return s=!0,c;if(_ instanceof Xe){u=d,i=d(c)(_.value0),l=_.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[d.constructor.name,c.constructor.name,_.constructor.name])}for(;!s;)f=p(u,i,l);return f}}},h=function(o){return function(r){var l=o,u=!1,i;function s(f,p){var d=FI(f);if(d instanceof V)return u=!0,a(function(c){return function(_){return _(c)}})(t)(p);if(d instanceof N){l=d.value0.value1,r=new Xe(e(d.value0.value0),p);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[d.constructor.name])}for(;!u;)i=s(l,r);return i}};return h(n)(Ye.value)}}},RI=function(e){if(e instanceof Kl)return V.value;if(e instanceof sm)return new N(new Z(e.value0,function(){var t=LI(e.value1);return t?Kl.value:Sq(II)(Kl.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var $I=function(){return Kl.value}(),HI=II;var OI={append:HI};var PI=function(e){return function(t){return HI(e)(new sm(t,AI))}};var Tq=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}},Mq=De(OI);var aC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ap=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ip=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kI=function(e){var t=!1,n;function a(h){var o=function(u){return u},r=function(u){return function(i){return new aC(u.value0,Mq(u.value1)(i))}};if(h.value0 instanceof ap){var l=RI(h.value1);if(l instanceof V)return t=!0,new ap(h.value0.value0);if(l instanceof N){e=r(o(l.value0.value0)(h.value0.value0))(l.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[l.constructor.name])}if(h.value0 instanceof ip)return t=!0,new ip(h.value0.value0,function(u){return r(h.value0.value1(u))(h.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[h.value0.constructor.name])}for(;!t;)n=a(e);return n},ra=function(e){var t=z(e);return function(n){var a=n.Monad0(),h=z(a.Bind1().Apply0().Functor0()),o=X(a.Applicative0()),r=gn(n);return function(l){var u=function(i){var s=kI(i);if(s instanceof ap)return h(Bt.create)(o(s.value0));if(s instanceof ip)return h(Pt.create)(l(t(s.value1)(s.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[s.constructor.name])};return r(u)}}};var NI=function(e){return new aC(e,$I)};var Ql={Applicative0:function(){return _r},Bind1:function(){return ur}},ji={map:function(e){return function(t){return wn(ur)(function(){var n=X(_r);return function(a){return n(e(a))}}())(t)}}},ur={bind:function(e){return function(t){return new aC(e.value0,PI(e.value1)(t))}},Apply0:function(){return iC(0)}},_r={pure:function(e){return NI(ap.create(e))},Apply0:function(){return iC(0)}},iC=Tq("freeApply","Control.Monad.Free",function(){return{apply:Dr(Ql),Functor0:function(){return ji}}}),up=iC(77);var Fq=X(_r);var dt=function(e){return NI(new ip(e,function(t){return Fq(t)}))};var BI=function(e){var t=e.Monad0(),n=z(t.Bind1().Apply0().Functor0()),a=X(t.Applicative0()),h=gn(e);return function(o){var r=function(l){var u=kI(l);if(u instanceof ap)return n(Bt.create)(a(u.value0));if(u instanceof ip)return n(function(i){return Pt.create(u.value1(i))})(o(u.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[u.constructor.name])};return h(r)}};function cm(e){return function(){return e.getContext("2d")}}function sp(e){return function(){return e.width}}function cp(e){return function(){return e.height}}function lp(e){return function(t){return function(){e.width=t}}}function fp(e){return function(t){return function(){e.height=t}}}function uC(e){return function(){return e.toDataURL()}}function sC(e){return function(t){return function(){e.lineWidth=t}}}function cC(e){return function(t){return function(){e.setLineDash(t)}}}function lC(e){return function(t){return function(){e.fillStyle=t}}}function fC(e){return function(t){return function(){e.strokeStyle=t}}}function dC(e){return function(t){return function(){e.shadowColor=t}}}function pC(e){return function(t){return function(){e.shadowBlur=t}}}function hC(e){return function(t){return function(){e.shadowOffsetX=t}}}function _C(e){return function(t){return function(){e.shadowOffsetY=t}}}function mC(e){return function(t){return function(){e.miterLimit=t}}}function lm(e){return function(t){return function(){e.lineCap=t}}}function fm(e){return function(t){return function(){e.lineJoin=t}}}function WI(e){return function(t){return function(){e.globalCompositeOperation=t}}}function vC(e){return function(t){return function(){e.globalAlpha=t}}}function dm(e){return function(){e.beginPath()}}function pm(e){return function(){e.stroke()}}function hm(e){return function(){e.fill()}}function gC(e){return function(){e.clip()}}function yC(e){return function(t){return function(n){return function(){e.lineTo(t,n)}}}}function DC(e){return function(t){return function(n){return function(){e.moveTo(t,n)}}}}function CC(e){return function(){e.closePath()}}function bC(e){return function(t){return function(){e.arc(t.x,t.y,t.radius,t.start,t.end,t.useCounterClockwise)}}}function wC(e){return function(t){return function(){e.rect(t.x,t.y,t.width,t.height)}}}function SC(e){return function(t){return function(){e.fillRect(t.x,t.y,t.width,t.height)}}}function EC(e){return function(t){return function(){e.strokeRect(t.x,t.y,t.width,t.height)}}}function TC(e){return function(t){return function(){e.clearRect(t.x,t.y,t.width,t.height)}}}function MC(e){return function(t){return function(){e.scale(t.scaleX,t.scaleY)}}}function FC(e){return function(t){return function(){e.rotate(t)}}}function xC(e){return function(t){return function(){e.translate(t.translateX,t.translateY)}}}function LC(e){return function(t){return function(){e.transform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function AC(e){return function(t){return function(){e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function UI(e){return function(){return e.textAlign}}function qI(e){return function(t){return function(){e.textAlign=t}}}function VI(e){return function(){return e.textBaseline}}function zI(e){return function(t){return function(){e.textBaseline=t}}}function IC(e){return function(){return e.font}}function RC(e){return function(t){return function(){e.font=t}}}function $C(e){return function(t){return function(n){return function(a){return function(){e.fillText(t,n,a)}}}}}function HC(e){return function(t){return function(n){return function(a){return function(){e.strokeText(t,n,a)}}}}}function OC(e){return function(t){return function(){return e.measureText(t)}}}function _m(e){return function(){e.save()}}function mm(e){return function(){e.restore()}}function PC(e){return function(t){return function(n){return function(a){return function(h){return function(){return e.getImageData(t,n,a,h)}}}}}}function kC(e){return function(t){return function(n){return function(a){return function(h){return function(o){return function(r){return function(l){return function(){e.putImageData(t,n,a,h,o,r,l)}}}}}}}}}function NC(e){return function(t){return function(n){return function(a){return function(){e.putImageData(t,n,a)}}}}}function BC(e){return function(t){return function(n){return function(){return e.createImageData(t,n)}}}}function WC(e){return function(t){return function(n){return function(a){return function(){e.drawImage(t,n,a)}}}}}function UC(e){return function(t){return function(n){return function(a){return function(h){return function(o){return function(){e.drawImage(t,n,a,h,o)}}}}}}}function qC(e){return function(t){return function(n){return function(a){return function(h){return function(o){return function(r){return function(l){return function(u){return function(i){return function(){e.drawImage(t,n,a,h,o,r,l,u,i)}}}}}}}}}}}function GI(e){return function(t){return function(n){return function(){return e.createPattern(t,n)}}}}function VC(e){return function(t){return function(){e.fillStyle=t}}}function zC(e){return function(t){return function(){return e.createLinearGradient(t.x0,t.y0,t.x1,t.y1)}}}function GC(e){return function(t){return function(){return e.createRadialGradient(t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)}}}function JC(e){return function(t){return function(){e.fillStyle=t}}}function jC(e){return function(t){return function(){e.quadraticCurveTo(t.cpx,t.cpy,t.x,t.y)}}}function KC(e){return function(t){return function(){e.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x,t.y)}}}var Lq=function(e){return pc(yo(e))},QC=function(e){return Lq(or(e))};var JI=z(Pe),Rq=Pr(a0),jI=function(){function e(){}return e.value=new e,e}(),KI=function(){function e(){}return e.value=new e,e}(),QI=function(){function e(){}return e.value=new e,e}(),XI=function(){function e(){}return e.value=new e,e}(),YI=function(){function e(){}return e.value=new e,e}(),ZI=function(){function e(){}return e.value=new e,e}(),eR=function(){function e(){}return e.value=new e,e}(),tR=function(){function e(){}return e.value=new e,e}(),nR=function(){function e(){}return e.value=new e,e}(),rR=function(){function e(){}return e.value=new e,e}(),oR=function(){function e(){}return e.value=new e,e}(),$q=function(){function e(){}return e.value=new e,e}(),Hq=function(){function e(){}return e.value=new e,e}(),Oq=function(){function e(){}return e.value=new e,e}(),Pq=function(){function e(){}return e.value=new e,e}(),kq=function(){function e(){}return e.value=new e,e}(),Nq=function(){function e(){}return e.value=new e,e}(),Bq=function(){function e(){}return e.value=new e,e}(),Wq=function(){function e(){}return e.value=new e,e}(),Uq=function(){function e(){}return e.value=new e,e}(),qq=function(){function e(){}return e.value=new e,e}(),Vq=function(){function e(){}return e.value=new e,e}(),zq=function(){function e(){}return e.value=new e,e}(),Gq=function(){function e(){}return e.value=new e,e}(),Jq=function(){function e(){}return e.value=new e,e}(),jq=function(){function e(){}return e.value=new e,e}(),Kq=function(){function e(){}return e.value=new e,e}(),Qq=function(){function e(){}return e.value=new e,e}(),Xq=function(){function e(){}return e.value=new e,e}(),Yq=function(){function e(){}return e.value=new e,e}(),Zq=function(){function e(){}return e.value=new e,e}(),e8=function(){function e(){}return e.value=new e,e}(),t8=function(){function e(){}return e.value=new e,e}(),n8=function(){function e(){}return e.value=new e,e}(),r8=function(){function e(){}return e.value=new e,e}(),o8=function(){function e(){}return e.value=new e,e}(),a8=function(){function e(){}return e.value=new e,e}(),i8=function(){function e(){}return e.value=new e,e}(),u8=function(){function e(){}return e.value=new e,e}(),s8=function(){function e(){}return e.value=new e,e}(),c8=function(){function e(){}return e.value=new e,e}(),l8=function(){function e(){}return e.value=new e,e}(),f8=function(){function e(){}return e.value=new e,e}(),d8=function(){function e(){}return e.value=new e,e}(),p8=function(){function e(){}return e.value=new e,e}(),h8=function(){function e(){}return e.value=new e,e}(),_8=function(){function e(){}return e.value=new e,e}();var aR=function(e){var t=function(n){return n==="top"?jI.value:n==="hanging"?KI.value:n==="middle"?QI.value:n==="alphabetic"?XI.value:n==="ideographic"?YI.value:n==="bottom"?ZI.value:QC("invalid TextBaseline: "+n)};return JI(t)(VI(e))},iR=function(e){var t=function(n){return n==="left"?eR.value:n==="right"?tR.value:n==="center"?nR.value:n==="start"?rR.value:n==="end"?oR.value:QC("invalid TextAlign: "+n)};return JI(t)(UI(e))};var uR=function(e){return function(t){var n=function(a){if(a instanceof jI)return"top";if(a instanceof KI)return"hanging";if(a instanceof QI)return"middle";if(a instanceof XI)return"alphabetic";if(a instanceof YI)return"ideographic";if(a instanceof ZI)return"bottom";throw new Error("Failed pattern match at Graphics.Canvas (line 577, column 5 - line 577, column 33): "+[a.constructor.name])};return zI(e)(n(t))}},sR=function(e){return function(t){var n=function(a){if(a instanceof eR)return"left";if(a instanceof tR)return"right";if(a instanceof nR)return"center";if(a instanceof rR)return"start";if(a instanceof oR)return"end";throw new Error("Failed pattern match at Graphics.Canvas (line 531, column 5 - line 531, column 32): "+[a.constructor.name])};return qI(e)(n(t))}},cR=function(e){return function(t){if(t instanceof kq)return fm(e)("bevel");if(t instanceof Nq)return fm(e)("round");if(t instanceof Bq)return fm(e)("miter");throw new Error("Failed pattern match at Graphics.Canvas (line 253, column 1 - line 253, column 52): "+[e.constructor.name,t.constructor.name])}},lR=function(e){return function(t){if(t instanceof Wq)return lm(e)("round");if(t instanceof Uq)return lm(e)("square");if(t instanceof qq)return lm(e)("butt");throw new Error("Failed pattern match at Graphics.Canvas (line 238, column 1 - line 238, column 50): "+[e.constructor.name,t.constructor.name])}},fR=function(e){return function(t){var n=function(a){if(a instanceof Vq)return"source-over";if(a instanceof zq)return"source-in";if(a instanceof Gq)return"source-out";if(a instanceof Jq)return"source-atop";if(a instanceof jq)return"destination-over";if(a instanceof Kq)return"destination-in";if(a instanceof Qq)return"destination-out";if(a instanceof Xq)return"destination-atop";if(a instanceof Yq)return"lighter";if(a instanceof Zq)return"copy";if(a instanceof e8)return"xor";if(a instanceof t8)return"multiply";if(a instanceof n8)return"screen";if(a instanceof r8)return"overlay";if(a instanceof o8)return"darken";if(a instanceof a8)return"lighten";if(a instanceof i8)return"color-dodge";if(a instanceof u8)return"color-burn";if(a instanceof s8)return"hard-light";if(a instanceof c8)return"soft-light";if(a instanceof l8)return"difference";if(a instanceof f8)return"exclusion";if(a instanceof d8)return"hue";if(a instanceof p8)return"saturation";if(a instanceof h8)return"color";if(a instanceof _8)return"luminosity";throw new Error("Failed pattern match at Graphics.Canvas (line 326, column 5 - line 326, column 45): "+[a.constructor.name])};return WI(e)(n(t))}},dR=function(e){return function(t){return Rq(fp(e)(t.height))(lp(e)(t.width))}};var pR=function(e){return function(){var n=sp(e)(),a=cp(e)();return{width:n,height:a}}};var hR=function(e){return function(t){return function(n){var a=function(h){if(h instanceof $q)return"repeat";if(h instanceof Hq)return"repeat-x";if(h instanceof Oq)return"repeat-y";if(h instanceof Pq)return"no-repeat";throw new Error("Failed pattern match at Graphics.Canvas (line 677, column 5 - line 677, column 31): "+[h.constructor.name])};return GI(e)(t)(a(n))}}};var mR=e=>t=>()=>e.convertToBlob({type:"image/jpeg",quality:t});function vR(e){return function(t){return function(n){return function(){e.then(n,t)}}}}var y8=In();var XC=function(e){return y8(kD(e))};function vm(e){return typeof e}function gm(e){return Object.prototype.toString.call(e).slice(8,-1)}function dp(e){return e===void 0}var yR=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var ym=function(){var e=W0(TA);return function(t){return ED(e(t))}}();var DR=function(e){return function(t){return new oo(e,new Xe(t.value0,t.value1))}};var YC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var mc=ne,Cm=ne;var ZC=function(e){var t=ar(VA(e));return function(n){return t(ym(n))}};var eb=function(e){var t=X(Qd(e)),n=ZC(e);return function(a){return function(h){if(gm(h)===a)return t(Cm(h));if(hn)return n(new YC(a,gm(h)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[a.constructor.name,h.constructor.name])}}};var bm=function(e){return eb(e)("String")};var b8=zh(Pe),w8=st(vI),S8=he(me),E8=Pn(zA(EA)(Cr)),T8=eb(Cr),M8=z(j_(xi)),F8=bm(Cr),x8=ee(jt),L8=Le(Cn),A8=function(e){return function(t){return Sa(function(n){return b8(w8)(vR(t)(function(a){return n(We.create(e(a)))()})(function(a){return n(Oe.create(a))()}))})}};var I8=function(e){return Sn(function(t){return or("Promise failed, couldn't extract JS Error or String")})(S8)(XC(E8(T8("Error")(e))(M8(or)(F8(e)))))},R8=A8(I8),os=function(e){return x8(L8(e))(R8)};var bR=function(e){return function(t){return os(mR(e)(t))}};var wm=function(e){return function(t){return t[e]}},H8=wm("namespaceURI"),O8=wm("prefix"),P8=wm("localName"),k8=wm("tagName");function Xl(e){return function(){return e.scrollTop}}function pp(e){return function(t){return function(){t.scrollTop=e}}}function nb(e){return function(){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}}function wR(e,t,n){return e==null?t:n(e)}function rb(e){return e}var Ma=Ke(null)(rb),fn=function(e){return wR(e,V.value,N.create)};var Sm=function(e){return function(t){return function(){return t[e]}}},W8=Sm("children"),U8=Sm("firstElementChild"),q8=Sm("lastElementChild"),V8=Sm("childElementCount");function SR(e){return function(t){return function(){return t.querySelector(e)}}}var G8=z(Pe);var ER=function(e){var t=G8(fn),n=SR(e);return function(a){return t(n(a))}};var ob=ne;var Y8=wt(zl),Co=z(Pe),MR=nt(rt),Z8=z(xr),tw=he(me),e7=function(e){return e},ib=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Em=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ub=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Tm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Mm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),db=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),gb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Db=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Am=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Im=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$m=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Sb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Eb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Tb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Mb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Om=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Pm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),km=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ab=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ib=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ob=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Nm=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),Pb=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),kb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Wm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bb=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),Wb=function(){function e(t,n,a,h){this.value0=t,this.value1=n,this.value2=a,this.value3=h}return e.create=function(t){return function(n){return function(a){return function(h){return new e(t,n,a,h)}}}},e}(),Ub=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vb=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),zb=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),Gb=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),Jb=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),jb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Yb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Zb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ew=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),t7=function(e){return e};var n7=function(e){var t=z(e);return{map:function(n){return function(a){if(a instanceof ib)return new ib(t(n)(a.value0));if(a instanceof Em)return new Em(function(h){return n(a.value0(h))});if(a instanceof ub)return new ub(a.value0,n(a.value1));if(a instanceof Tm)return new Tm(function(h){return n(a.value0(h))});if(a instanceof sb)return new sb(a.value0,n(a.value1));if(a instanceof cb)return new cb(function(h){return n(a.value0(h))});if(a instanceof lb)return new lb(a.value0,n(a.value1));if(a instanceof Mm)return new Mm(function(h){return n(a.value0(h))});if(a instanceof fb)return new fb(function(h){return n(a.value0(h))});if(a instanceof Fm)return new Fm(a.value0,n(a.value1));if(a instanceof db)return new db(a.value0,n(a.value1));if(a instanceof xm)return new xm(a.value0,n(a.value1));if(a instanceof Lm)return new Lm(a.value0,n(a.value1));if(a instanceof pb)return new pb(a.value0,n(a.value1));if(a instanceof hb)return new hb(a.value0,n(a.value1));if(a instanceof _b)return new _b(a.value0,n(a.value1));if(a instanceof mb)return new mb(a.value0,n(a.value1));if(a instanceof vb)return new vb(a.value0,n(a.value1));if(a instanceof gb)return new gb(a.value0,n(a.value1));if(a instanceof yb)return new yb(a.value0,n(a.value1));if(a instanceof Db)return new Db(a.value0,n(a.value1));if(a instanceof Cb)return new Cb(a.value0,n(a.value1));if(a instanceof Am)return new Am(n(a.value0));if(a instanceof Im)return new Im(n(a.value0));if(a instanceof bb)return new bb(n(a.value0));if(a instanceof wb)return new wb(n(a.value0));if(a instanceof Rm)return new Rm(a.value0,n(a.value1));if(a instanceof $m)return new $m(a.value0,n(a.value1));if(a instanceof Sb)return new Sb(n(a.value0));if(a instanceof Eb)return new Eb(a.value0,n(a.value1));if(a instanceof Tb)return new Tb(a.value0,n(a.value1));if(a instanceof Hm)return new Hm(a.value0,n(a.value1));if(a instanceof Mb)return new Mb(a.value0,n(a.value1));if(a instanceof Om)return new Om(a.value0,n(a.value1));if(a instanceof Fb)return new Fb(a.value0,n(a.value1));if(a instanceof Pm)return new Pm(a.value0,n(a.value1));if(a instanceof km)return new km(a.value0,n(a.value1));if(a instanceof xb)return new xb(a.value0,n(a.value1));if(a instanceof Lb)return new Lb(a.value0,n(a.value1));if(a instanceof Ab)return new Ab(function(h){return n(a.value0(h))});if(a instanceof Ib)return new Ib(a.value0,n(a.value1));if(a instanceof Rb)return new Rb(function(h){return n(a.value0(h))});if(a instanceof $b)return new $b(a.value0,n(a.value1));if(a instanceof Hb)return new Hb(function(h){return n(a.value0(h))});if(a instanceof Ob)return new Ob(a.value0,n(a.value1));if(a instanceof Nm)return new Nm(a.value0,a.value1,n(a.value2));if(a instanceof Pb)return new Pb(a.value0,a.value1,n(a.value2));if(a instanceof kb)return new kb(a.value0,function(h){return n(a.value1(h))});if(a instanceof Bm)return new Bm(n(a.value0));if(a instanceof Wm)return new Wm(n(a.value0));if(a instanceof Nb)return new Nb(a.value0,function(h){return n(a.value1(h))});if(a instanceof Bb)return new Bb(a.value0,a.value1,n(a.value2));if(a instanceof Wb)return new Wb(a.value0,a.value1,a.value2,n(a.value3));if(a instanceof Ub)return new Ub(a.value0,function(h){return n(a.value1(h))});if(a instanceof qb)return new qb(function(h){return n(a.value0(h))});if(a instanceof Vb)return new Vb(a.value0,a.value1,n(a.value2));if(a instanceof zb)return new zb(a.value0,a.value1,n(a.value2));if(a instanceof Gb)return new Gb(a.value0,a.value1,n(a.value2));if(a instanceof Jb)return new Jb(a.value0,a.value1,function(h){return n(a.value2(h))});if(a instanceof jb)return new jb(a.value0,n(a.value1));if(a instanceof Kb)return new Kb(a.value0,function(h){return n(a.value1(h))});if(a instanceof Qb)return new Qb(a.value0,function(h){return n(a.value1(h))});if(a instanceof Xb)return new Xb(a.value0,n(a.value1));if(a instanceof Yb)return new Yb(a.value0,n(a.value1));if(a instanceof Zb)return new Zb(a.value0,n(a.value1));if(a instanceof ew)return new ew(a.value0,function(h){return n(a.value1(h))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 582, column 1 - line 648, column 64): "+[n.constructor.name,a.constructor.name])}}}},oa=ur,TR=MR(oa),r7=ee(oa);var _p=_r,o7=X(_p),FR=function(e){var t=e.MonadEffect0(),n=t.Monad0(),a=Y8(n),h=n.Bind1(),o=qi(h),r=ee(o),l=Mr(Zu(n)),u=Le(ni(t)),i=MR(o),s=X(Xd(n.Applicative0())),f=bn(am(e)),p=ra(n7(h.Apply0().Functor0()));return function(d){var c=function(m){if(m instanceof ib)return a(m.value0);if(m instanceof Em)return r(l)(function(v){return u(Co(m.value0)(sp(v.canvasElement)))});if(m instanceof ub)return r(l)(function(v){return i(u(lp(v.canvasElement)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Tm)return r(l)(function(v){return u(Co(m.value0)(cp(v.canvasElement)))});if(m instanceof sb)return r(l)(function(v){return i(u(fp(v.canvasElement)(m.value0)))(function(){return s(m.value1)})});if(m instanceof cb)return r(l)(function(v){return u(Co(m.value0)(pR(v.canvasElement)))});if(m instanceof lb)return r(l)(function(v){return i(u(dR(v.canvasElement)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Mm)return r(l)(function(v){return u(Co(m.value0)(nb(v.canvasElement)))});if(m instanceof fb)return r(l)(function(v){return u(Co(m.value0)(uC(v.canvasElement)))});if(m instanceof Fm)return r(l)(function(v){return i(u(sC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof db)return r(l)(function(v){return i(u(cC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof xm)return r(l)(function(v){return i(u(lC(v.context2D)(xl(m.value0))))(function(){return s(m.value1)})});if(m instanceof Lm)return r(l)(function(v){return i(u(fC(v.context2D)(xl(m.value0))))(function(){return s(m.value1)})});if(m instanceof pb)return r(l)(function(v){return i(u(pC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof hb)return r(l)(function(v){return i(u(hC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof _b)return r(l)(function(v){return i(u(_C(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof mb)return r(l)(function(v){return i(u(dC(v.context2D)(xl(m.value0))))(function(){return s(m.value1)})});if(m instanceof vb)return r(l)(function(v){return i(u(mC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof gb)return r(l)(function(v){return i(u(lR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof yb)return r(l)(function(v){return i(u(cR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Db)return r(l)(function(v){return i(u(fR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Cb)return r(l)(function(v){return i(u(vC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Am)return r(l)(function(v){return i(u(dm(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Im)return r(l)(function(v){return i(u(pm(v.context2D)))(function(){return s(m.value0)})});if(m instanceof bb)return r(l)(function(v){return i(u(hm(v.context2D)))(function(){return s(m.value0)})});if(m instanceof wb)return r(l)(function(v){return i(u(gC(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Rm)return r(l)(function(v){return i(u(yC(v.context2D)(m.value0.x)(m.value0.y)))(function(){return s(m.value1)})});if(m instanceof $m)return r(l)(function(v){return i(u(DC(v.context2D)(m.value0.x)(m.value0.y)))(function(){return s(m.value1)})});if(m instanceof Sb)return r(l)(function(v){return i(u(CC(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Eb)return r(l)(function(v){return i(u(bC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Tb)return r(l)(function(v){return i(u(wC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Hm)return r(l)(function(v){return i(u(SC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Mb)return r(l)(function(v){return i(u(EC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Om)return r(l)(function(v){return i(u(TC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Fb)return r(l)(function(v){return i(u(MC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Pm)return r(l)(function(v){return i(u(FC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof km)return r(l)(function(v){return i(u(xC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof xb)return r(l)(function(v){return i(u(LC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Lb)return r(l)(function(v){return i(u(AC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Ab)return r(l)(function(v){return u(Co(m.value0)(iR(v.context2D)))});if(m instanceof Ib)return r(l)(function(v){return i(u(sR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Rb)return r(l)(function(v){return u(Co(m.value0)(aR(v.context2D)))});if(m instanceof $b)return r(l)(function(v){return i(u(uR(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Hb)return r(l)(function(v){return u(Co(function(y){return m.value0(e7(y))})(IC(v.context2D)))});if(m instanceof Ob)return r(l)(function(v){return i(u(RC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Nm)return r(l)(function(v){return i(u($C(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof Pb)return r(l)(function(v){return i(u(HC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof kb)return r(l)(function(v){return u(Co(m.value1)(OC(v.context2D)(m.value0)))});if(m instanceof Bm)return r(l)(function(v){return i(u(_m(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Wm)return r(l)(function(v){return i(u(mm(v.context2D)))(function(){return s(m.value0)})});if(m instanceof Nb)return r(l)(function(v){return u(Co(m.value1)(PC(v.context2D)(m.value0.x)(m.value0.y)(m.value0.width)(m.value0.height)))});if(m instanceof Bb)return r(l)(function(v){return i(u(NC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof Wb)return r(l)(function(v){return i(u(kC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)(m.value2.x)(m.value2.y)(m.value2.width)(m.value2.height)))(function(){return s(m.value3)})});if(m instanceof Ub)return r(l)(function(v){return u(Co(m.value1)(BC(v.context2D)(m.value0.width)(m.value0.height)))});if(m instanceof qb)return r(l)(function(v){return s(m.value0(v.canvasElement))});if(m instanceof Vb)return r(l)(function(v){return i(u(WC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)))(function(){return s(m.value2)})});if(m instanceof zb)return r(l)(function(v){return i(u(UC(v.context2D)(m.value0)(m.value1.x)(m.value1.y)(m.value1.width)(m.value1.height)))(function(){return s(m.value2)})});if(m instanceof Gb)return r(l)(function(v){return i(u(qC(v.context2D)(m.value0)(m.value1.source.x)(m.value1.source.y)(m.value1.source.width)(m.value1.source.height)(m.value1.target.x)(m.value1.target.y)(m.value1.target.width)(m.value1.target.height)))(function(){return s(m.value2)})});if(m instanceof Jb)return r(l)(function(v){return u(Co(m.value2)(hR(v.context2D)(m.value0)(m.value1)))});if(m instanceof jb)return r(l)(function(v){return i(u(VC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Kb)return r(l)(function(v){return u(Co(m.value1)(zC(v.context2D)(m.value0)))});if(m instanceof Qb)return r(l)(function(v){return u(Co(m.value1)(GC(v.context2D)(m.value0)))});if(m instanceof Xb)return r(l)(function(v){return i(u(JC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Yb)return r(l)(function(v){return i(u(jC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof Zb)return r(l)(function(v){return i(u(KC(v.context2D)(m.value0)))(function(){return s(m.value1)})});if(m instanceof ew)return r(l)(function(v){return f(Z8(m.value1)(bR(v.canvasElement)(m.value0)))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 61, column 5 - line 61, column 25): "+[m.constructor.name])},_=p(es(d))(c);return function(m){return _(function(v){return v}(m))}}};var Lr=function(e){return t7(dt(e))},Um=function(e){return Lr(new Rm(e,void 0))};var qm=function(e){return Lr(new $m(e,void 0))};var a7=function(){return Lr(new Wm(void 0))}(),xR=function(e){return Lr(new Pm(e,void 0))},i7=function(){return Lr(new Bm(void 0))}(),mp=function(e){return TR(i7)(function(){return r7(e)(function(t){return TR(a7)(function(){return o7(t)})})})};var as=function(e){return Lr(new xm(e,void 0))};var Vm=function(e){return Lr(new Fm(e,void 0))};var zm=function(e){return Lr(new Lm(e,void 0))};var Gm=function(){return Lr(new Im(void 0))}();var LR=function(e){return Lr(new km(e,void 0))};var Jm=function(){return Lr(new Em(tw))}();var jm=function(){return Lr(new Tm(tw))}();var AR=function(){return Lr(new Mm(tw))}(),nw=function(e){return function(t){return Lr(new Nm(e,t,void 0))}},Yl=function(e){return Lr(new Hm(e,void 0))};var Km=function(e){return Lr(new Om(e,void 0))};var Qm=function(){return Lr(new Am(void 0))}();var u7=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var IR=function(e){return function(t){return Ya(function(n){return e(n.value0)(n.value1)})(t)}};var RR=function(e){return function(t){return tD(new u7(e,t))}},rw={map:function(e){return function(t){return Ya(function(n){return RR(function(a){return e(n.value0(a))})(n.value1)})(t)}}};var $R=RR(he(me));var c7=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}();var Xm=function(e){return c7.create($e(e.Eq0()))(Ee(e))},l7={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},HR={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return l7}};var iw=gl(Vt)(HR);var h7=$D(iw),_7=ta(iw),m7=Wr(iw);var Ym=function(){return function(e){var t=er(e);return function(n){var a=Xm(n);return function(h){return function(o){return function(r){return h7(new Z(t(h),a(o)))(r)}}}}}},Zm=function(){return function(e){var t=er(e);return function(n){var a=Xm(n);return function(h){return function(o){return function(r){return _7(new Z(t(h),a(o)))(r)}}}}}},ev=function(){return function(e){var t=er(e);return function(n){var a=Xm(n);return function(h){return function(o){return function(r){return function(l){return m7(new Z(t(h),a(o)))(r)(l)}}}}}}},tv=function(e){var t=at(e)(Ui);return function(n){return function(a){return t(function(h){return a(h)})(n)}}},is=pr;var OR=function(){function e(){}return e.value=new e,e}(),ef=function(){function e(){}return e.value=new e,e}(),PR=function(){function e(){}return e.value=new e,e}(),kR=function(){function e(){}return e.value=new e,e}(),NR=function(){function e(){}return e.value=new e,e}(),BR=function(){function e(){}return e.value=new e,e}(),WR=function(){function e(){}return e.value=new e,e}(),UR=function(){function e(){}return e.value=new e,e}(),qR=function(){function e(){}return e.value=new e,e}(),VR=function(){function e(){}return e.value=new e,e}(),zR=function(){function e(){}return e.value=new e,e}(),GR=function(){function e(){}return e.value=new e,e}(),JR=function(){function e(){}return e.value=new e,e}(),jR=function(){function e(){}return e.value=new e,e}(),KR=function(){function e(){}return e.value=new e,e}(),QR=function(){function e(){}return e.value=new e,e}(),XR=function(){function e(){}return e.value=new e,e}(),YR=function(){function e(){}return e.value=new e,e}(),ZR=function(){function e(){}return e.value=new e,e}(),e$=function(){function e(){}return e.value=new e,e}(),t$=function(){function e(){}return e.value=new e,e}(),n$=function(){function e(){}return e.value=new e,e}(),r$=function(e){if(e instanceof OR)return"button";if(e instanceof ef)return"checkbox";if(e instanceof PR)return"color";if(e instanceof kR)return"date";if(e instanceof NR)return"datetime-local";if(e instanceof BR)return"email";if(e instanceof WR)return"file";if(e instanceof UR)return"hidden";if(e instanceof qR)return"image";if(e instanceof VR)return"month";if(e instanceof zR)return"number";if(e instanceof GR)return"password";if(e instanceof JR)return"radio";if(e instanceof jR)return"range";if(e instanceof KR)return"reset";if(e instanceof QR)return"search";if(e instanceof XR)return"submit";if(e instanceof YR)return"tel";if(e instanceof ZR)return"text";if(e instanceof e$)return"time";if(e instanceof t$)return"url";if(e instanceof n$)return"week";throw new Error("Failed pattern match at DOM.HTML.Indexed.InputType (line 33, column 19 - line 55, column 22): "+[e.constructor.name])};var nv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Fn=function(){function e(t,n,a,h){this.value0=t,this.value1=n,this.value2=a,this.value3=h}return e.create=function(t){return function(n){return function(a){return function(h){return new e(t,n,a,h)}}}},e}(),yp=ne,bo=function(e,t){return e.value2(e.value1,t)},xn=ne,wo=function(e){return e.value3(e.value1)},Ar=yp(function(e){return e.value0});var a$=z(Ct),I7=z(Ii);var us=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ki=function(){function e(t,n,a,h){this.value0=t,this.value1=n,this.value2=a,this.value3=h}return e.create=function(t){return function(n){return function(a){return function(h){return new e(t,n,a,h)}}}},e}(),ss=function(){function e(t,n,a,h){this.value0=t,this.value1=n,this.value2=a,this.value3=h}return e.create=function(t){return function(n){return function(a){return function(h){return new e(t,n,a,h)}}}},e}(),cs=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),R7=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),i$=function(e){return function(t){return e(t)}};var $7=ne;var H7={bimap:function(e){return function(t){return i$(function(n){return $7(new R7(function(a){return e(n.value0(a))},function(a){return t(n.value1(a))},n.value2))})}}},O7=Ro(H7);var gc=i$(function(e){var t=function(n){if(n instanceof us)return new us(n.value0);if(n instanceof Ki)return new Ki(n.value0,n.value1,e.value0(n.value2),a$(t)(n.value3));if(n instanceof ss)return new ss(n.value0,n.value1,e.value0(n.value2),a$(I7(t))(n.value3));if(n instanceof cs)return new cs(e.value1(n.value0));if(n instanceof Qi)return new Qi(O7(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function yc(e,t){return t[e]}function sw(e,t){return t.hasOwnProperty(e)}function Xi(e,t,n){n[e]=t}function cw(e,t){for(var n=[],a=0;a<e.length;a++)n.push(t(a,e[a]));return n}function lw(e,t){for(var n=0;n<e.length;n++)t(e[n])}function fw(e,t){for(var n=Object.keys(e),a=0;a<n.length;a++){var h=n[a];t(h,e[h])}}function dw(e,t,n,a,h){for(var o=[],r=e.length,l=t.length,u=0;;){if(u<r)u<l?o.push(n(u,e[u],t[u])):a(u,e[u]);else if(u<l)o.push(h(u,t[u]));else break;u++}return o}function Dp(e,t,n){for(var a={},h=0;h<e.length;h++){var o=e[h],r=t(o);a[r]=n(r,h,o)}return a}function Cp(e,t,n,a,h,o){for(var r={},l=0;l<t.length;l++){var u=t[l],i=n(u);e.hasOwnProperty(i)?r[i]=a(i,l,e[i],u):r[i]=o(i,l,u)}for(var i in e)i in r||h(i,e[i]);return r}function Dc(e,t){return e===t}function pw(e,t){return t.createTextNode(e)}function hw(e,t){t.textContent=e}function ov(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function ls(e,t,n){var a=n.childNodes.item(e)||null;a!==t&&n.insertBefore(t,a)}function bp(e,t){t&&e.parentNode===t&&t.removeChild(e)}function wp(e){return e.parentNode}function av(e,t,n,a){e!=null?a.setAttributeNS(e,t,n):a.setAttribute(t,n)}function iv(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function _w(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function mw(e,t,n){n.addEventListener(e,t,!1)}function vw(e,t,n){n.removeEventListener(e,t,!1)}var gw=void 0;var Sp=function(){return{}};function yw(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var Dw=yc,Cw=ne,bw=Xi,ww=Sp;var Ep=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}};var Ew=function(e){return wo(e.widget)},Tw=Ep("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Qi)return Tw(291)(e,gc(t.value0));if(t instanceof cs){var n=bo(e.widget,t.value0),a=yp(function(h){return xn(new Fn(h.value0,{build:e.build,widget:n},Tw(296),Ew))})(n);return a}return Ew(e),e.build(t)}}),W7=Tw(286),uv=function(e){var t=wp(e.node);return bp(e.node,t)},sv=Ep("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Qi)return sv(82)(e,gc(t.value0));if(t instanceof us){if(e.value===t.value0)return xn(new Fn(e.node,e,sv(85),uv));if(hn){var n={build:e.build,node:e.node,value:t.value0};return hw(t.value0,e.node),xn(new Fn(e.node,n,sv(89),uv))}}return uv(e),e.build(t)}}),U7=sv(77),cv=function(e){var t=wp(e.node);return bp(e.node,t),fw(e.children,function(n,a){return wo(a)}),wo(e.attrs)},lv=function(e){var t=wp(e.node);return bp(e.node,t),lw(e.children,wo),wo(e.attrs)},s$=function(e,t,n,a){var h=t===a;return h?e instanceof N&&n instanceof N&&e.value0===n.value0||e instanceof V&&n instanceof V:!1},fv=Ep("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Qi)return fv(135)(e,gc(t.value0));if(t instanceof Ki&&s$(e.ns,e.name,t.value0,t.value1)){var n=yr(t.value3),a=yr(e.children);if(a===0&&n===0){var u=bo(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:e.children};return xn(new Fn(e.node,i,fv(149),lv))}var h=function(s,f){return wo(f)},o=function(s,f,p){var d=bo(f,p);return ls(s,Ar(d),e.node),d},r=function(s,f){var p=e.build(f);return ls(s,Ar(p),e.node),p},l=dw(e.children,t.value3,o,h,r),u=bo(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:l};return xn(new Fn(e.node,i,fv(172),lv))}return lv(e),e.build(t)}}),q7=fv(130),dv=Ep("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Qi)return dv(222)(e,gc(t.value0));if(t instanceof ss&&s$(e.ns,e.name,t.value0,t.value1)){var n=yr(t.value3);if(e.length===0&&n===0){var l=bo(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:e.children,length:0};return xn(new Fn(e.node,u,dv(237),cv))}var a=function(i,s){return wo(s)},h=function(i,s,f,p){var d=bo(f,p.value1);return ls(s,Ar(d),e.node),d},o=function(i,s,f){var p=e.build(f.value1);return ls(s,Ar(p),e.node),p},r=Cp(e.children,t.value3,nr,h,a,o),l=bo(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:r,length:n};return xn(new Fn(e.node,u,dv(261),cv))}return cv(e),e.build(t)}}),V7=dv(217),z7=function(e,t,n){var a=e.buildWidget(e)(n),h=yp(function(o){return xn(new Fn(o.value0,{build:t,widget:a},W7,Ew))})(a);return h},G7=function(e,t,n){var a=pw(n,e.document),h={build:t,node:a,value:n};return xn(new Fn(a,h,U7,uv))},J7=function(e,t,n,a,h,o){var r=ov(Ma(n),a,e.document),l=ob(r),u=function(p,d,c){var _=t(c.value1);return ls(d,Ar(_),l),_},i=Dp(o,nr,u),s=e.buildAttributes(r)(h),f={build:t,node:l,attrs:s,ns:n,name:a,children:i,length:yr(o)};return xn(new Fn(l,f,V7,cv))},j7=function(e,t,n,a,h,o){var r=ov(Ma(n),a,e.document),l=ob(r),u=function(p,d){var c=t(d);return ls(p,Ar(c),l),c},i=cw(o,u),s=e.buildAttributes(r)(h),f={build:t,node:l,attrs:s,ns:n,name:a,children:i};return xn(new Fn(l,f,q7,lv))},Tp=function(e){var t=Ep("build","Halogen.VDom.DOM",function(){return function(a){if(a instanceof us)return G7(e,t(59),a.value0);if(a instanceof Ki)return j7(e,t(60),a.value0,a.value1,a.value2,a.value3);if(a instanceof ss)return J7(e,t(61),a.value0,a.value1,a.value2,a.value3);if(a instanceof cs)return z7(e,t(62),a.value0);if(a instanceof Qi)return t(63)(gc(a.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[a.constructor.name])}}),n=t(58);return n};function xw(e){return e()}function l$(e){return function(t){return function(n){return function(a){var h=n;function o(l){return function(u){return t(u)(l)(a[l])}}for(var r in a)hasOwnProperty.call(a,r)&&(h=e(h)(o(r)));return h}}}}function f$(e,t,n,a){return n in a?t(a[n]):e}function Lw(e){return function(t){var n=[];for(var a in t)hasOwnProperty.call(t,a)&&n.push(e(a)(t[a]));return n}}var K7=Object.keys||Lw(function(e){return function(){return e}});var Y7=ut(Ws);var pv=function(){return Mu(f$)(V.value)(N.create)}();var Mp=function(e){var t=$i(e);return function(n){return xw(function(){var h=Sp();return pd(t(n))(function(o){return Y7(yw(o.value0)(o.value1)(h))})(),h})}};var Z7=l$(WM),d$=function(e){var t=De(e.Semigroup0()),n=st(e);return function(a){return Z7(function(h){return function(o){return function(r){return t(h)(a(o)(r))}}})(n)}};function Fp(e){return function(){return function(t){return e(t)()}}}function Iw(e){return function(t){return function(n){return function(a){return function(){return a.addEventListener(e,t,n)}}}}}function Rw(e){return function(t){return function(n){return function(a){return function(){return a.removeEventListener(e,t,n)}}}}}var eV=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}};var Hw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ow=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yi=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),ds=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ps=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tV=yc,$w=Xi,nV=function(e,t){var n=_w(null,e,t);if(n)return iv(null,e,t);var a=vm(yc(e,t));return a==="string"?Xi(e,"",t):e==="rowSpan"?Xi(e,1,t):e==="colSpan"?Xi(e,1,t):Xi(e,gw,t)},h$=function(e){if(e instanceof Yi&&e.value0 instanceof N)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof Yi)return"attr/:"+e.value1;if(e instanceof ds)return"prop/"+e.value0;if(e instanceof ps)return"handler/"+e.value0;if(e instanceof Cc)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},hv=ne;var _$=ne;var m$=function(e){return function(t){var n=function(s){return function(f,p){if(p instanceof Yi)return iv(Ma(p.value0),p.value1,t);if(p instanceof ds)return nV(p.value0,t);if(p instanceof ps){var d=Dw(p.value0,s);return vw(p.value0,nr(d),t)}if(p instanceof Cc)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[p.constructor.name])}},a=function(s){return s instanceof N?e(s.value0)():void 0},h=function(s){var f=pv("ref")(s.props);return f instanceof N&&f.value0 instanceof Cc?a(f.value0.value0(new Ow(t))):void 0},o=function(s,f){return function(p,d,c,_){if(c instanceof Yi&&_ instanceof Yi){var m=c.value2===_.value2;return m||av(Ma(_.value0),_.value1,_.value2,t),_}if(c instanceof ds&&_ instanceof ds){var v=Dc(c.value1,_.value1);if(v)return _;if(_.value0==="value"){var y=tV("value",t),C=Dc(y,_.value1);return C||$w(_.value0,_.value1,t),_}return $w(_.value0,_.value1,t),_}if(c instanceof ps&&_ instanceof ps){var T=Dw(_.value0,s);return Ut(_.value1)(_n(T))(),bw(_.value0,T,f),_}return _}},r=function(s){return function(f,p,d){if(d instanceof Yi)return av(Ma(d.value0),d.value1,d.value2,t),d;if(d instanceof ds)return $w(d.value0,d.value1,t),d;if(d instanceof ps){var c=yc(d.value0,s);if(sw(d.value0,s))return Ut(d.value1)(_n(c))(),d;var _=cn(d.value1)(),m=Fp(function(v){return function(){var C=Qe(_)();return a(C(v))}})();return bw(d.value0,new Z(m,_),s),mw(d.value0,m,t),d}if(d instanceof Cc)return a(d.value0(new Hw(t))),d;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[d.constructor.name])}},l=eV("patchProp","Halogen.VDom.DOM.Prop",function(){return function(s,f){var p=ww(),d=n(s.events),c=o(s.events,p),_=r(p),m=Cp(s.props,f,h$,c,d,_),v={events:Cw(p),props:m};return xn(new Fn(void 0,v,l(100),h))}}),u=l(87),i=function(s){var f=ww(),p=Dp(s,h$,r(f)),d={events:Cw(f),props:p};return xn(new Fn(void 0,d,u,h))};return i}};var kw=function(e){return e},Nw=function(e){return kw(cs.create(e))},aV=function(e){return e.toPropValue},Ir=function(e){return kw(us.create(e))},D$=function(e){return new Cc(function(t){return e(function(n){if(n instanceof Hw)return new N(n.value0);if(n instanceof Ow)return V.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},C$=function(e){var t=aV(e);return function(n){var a=ds.create(n);return function(h){return a(t(h))}}};var _v={toPropValue:hv};var Bw={toPropValue:function(){var e=In();return function(t){return hv(e(t))}}()};var b$={toPropValue:_$},w$={toPropValue:function(e){return hv(r$(e))}};var Ww=function(){return ps.create}(),S$=function(e){return function(t){return function(n){return function(a){return new Ki(e,t,n,a)}}}};var E$=function(e){return function(t){return Yi.create(e)(t)}};var uV=he(me);var mv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Uw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),M$=function(e){return function(t){return new qw(e,t)}},F$=function(){return Uw.create}(),x$=function(e){var t=X(e);return function(n){return function(a){return function(h){return function(o){return function(r){if(o instanceof mv)return new Z(new Xe({func:t(o.value0),count:r},n),a);if(o instanceof Uw)return new Z(new Xe({func:h(o.value0),count:r},n),a);if(o instanceof qw)return x$(e)(n)(DR(o.value1)(a))(h)(o.value0)(r+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[o.constructor.name])}}}}}},L$=function(e){var t=pt(e.Apply0());return function(n){return function(a){return function(h){if(n instanceof Ye)return new We(h);if(n instanceof Xe){var o=t(n.value0.func)(h),r=n.value0.count===1;if(r)return n.value1 instanceof Ye?new We(o):L$(e)(n.value1)(a)(o);if(a instanceof Ye)return new We(o);if(a instanceof Xe)return new Oe(new Z(new Xe({func:o,count:n.value0.count-1|0},n.value1),new oo(a.value0,a.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[a.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},A$={map:function(e){return function(t){return M$(new mv(e))(t)}}},I$=function(e){var t=L$(e),n=X(e),a=x$(e);return function(h){return function(o){var r=function(l){var u=!1,i;function s(f){if(f.value1.value0 instanceof mv){var p=t(f.value0)(f.value1.value1)(n(f.value1.value0.value0));if(p instanceof We)return u=!0,p.value0;if(p instanceof Oe){l=p.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[p.constructor.name])}if(f.value1.value0 instanceof Uw){var p=t(f.value0)(f.value1.value1)(h(f.value1.value0.value0));if(p instanceof We)return u=!0,p.value0;if(p instanceof Oe){l=p.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[p.constructor.name])}if(f.value1.value0 instanceof qw){var d=new oo(f.value1.value0.value1,f.value1.value1);l=a(f.value0)(d)(h)(f.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[f.value1.value0.constructor.name])}for(;!u;)i=s(l);return i};return r(new Z(Ye.value,ym(o)))}}},R$=function(e){return I$(e)(uV)},$$={apply:function(e){return function(t){return M$(e)(t)}},Functor0:function(){return A$}},H$=function(){return{pure:mv.create,Apply0:function(){return $$}}}(),sV=I$(H$),Vw=function(e){return sV(function(t){return F$(e(t))})};var P$=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),k$=ne,N$=ne;function zw(e){return function(t){return e===t}}var tf=zw;var dV=ut(Pe);var pV=ee(Sr);var hV=De(sn),_V=at(nn),mV=_V(mt);var vv=function(e){return e},q$=function(e){return function(t){return e(function(n){return dV(t(n))})}};var jn=function(e){return function(t){return e(t)}};var xp={map:function(e){return function(t){return function(n){return t(function(a){return n(e(a))})}}}};var Kn=function(){var t=cn([])();return{emitter:function(n){return function(){return no(function(h){return hV(h)([n])})(t)(),no(w_(tf)(n))(t)}},listener:function(n){return pV(Qe(t))(mV(function(a){return a(n)}))}}};var Jw=he(me);var gV=Zm();var V$=function(e){return e},z$=function(e){return e},Lp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ap=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ip=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),bc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$p=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),gv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Dv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var rf=function(e){return e},bv=function(e){return dt(new Ip(e,void 0))};var Rn=function(e){return dt(new Ap(function(t){return e},Jw))};var qr=function(e){return dt(new $p(e,void 0))};var Vr=function(){return function(e){var t=gV(e);return function(n){var a=t(n);return function(h){return function(o){return function(r){return dt(new Rp(N$(new P$(function(l){var u=X(l);return function(i){var s=Ke(u(V.value))(i),f=a(h)(o);return function(p){return s(f(p))}}},r,Jw))))}}}}}},jw=gt,wv=gt;var of={lift:function(e){return function(t){return rf(dt(bc.create(t)))}}},wc=Ql,Ht={state:function(e){return rf(dt(Lp.create(e)))},Monad0:function(){return wc}};var Ln=function(e){return{liftEffect:function(){var t=Le(e);return function(n){return rf(dt(bc.create(t(n))))}}(),Monad0:function(){return wc}}};var ii=function(e){var t=Ln(e.MonadEffect0());return{liftAff:function(){var n=bn(e);return function(a){return rf(dt(bc.create(n(a))))}}(),MonadEffect0:function(){return t}}};var Rr=function(e){return dt(new Hp(e,Jw))},$n=ji;var zt=ur,yV=ee(zt),Sv=up;var Kt=_r,DV=X(Kt),Op={tailRecM:function(e){return function(t){return yV(e(t))(function(n){if(n instanceof Pt)return gn(Op)(e)(n.value0);if(n instanceof Bt)return DV(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return wc}};var af=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var CV=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}};var bV=function(e,t){return Dc(e.value0,t.value0)&&Dc(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var G$=function(e){return e.value2(e.value3)};var J$=function(e){var t=function(o){return wo(o.vdom)},n=CV("patchThunk","Halogen.VDom.Thunk",function(){return function(o,r){var l=bV(o.thunk,r);if(l)return xn(new Fn(Ar(o.vdom),o,n(112),t));var u=bo(o.vdom,e(G$(r)));return xn(new Fn(Ar(u),{vdom:u,thunk:r},n(115),t))}}),a=n(108),h=function(o){return function(r){var l=Tp(o)(e(G$(r)));return xn(new Fn(Ar(l),{thunk:r,vdom:l},a,t))}};return h};var Ev=ol($n),Xw=at(Kt)($t),wV=z($n);var j$=X(Kt),SV=Zm(),EV=Ym(),TV=ev(),ff=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Tv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yw=ne,Zw=ne,Qt=function(e){return function(t){if(t instanceof af)return Ev(Xw(e.handleAction)(e.initialize))(t.value0);if(t instanceof uf)return Ev(Xw(e.handleAction)(e.finalize))(t.value0);if(t instanceof sf)return Ev(Xw(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof cf)return Ev(e.handleAction(t.value0))(t.value1);if(t instanceof lf)return IR(function(n){var a=wV(Ke(t.value1(void 0))(n));return function(h){return a(e.handleQuery(h))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},MV=ne,Xt=ne;var lt=function(){return{handleAction:_e(j$(void 0)),handleQuery:_e(j$(V.value)),receive:_e(V.value),initialize:V.value,finalize:V.value}}(),eS=function(){return function(e){var t=SV(e),n=EV(e),a=TV(e);return function(h){var o=t(h),r=n(h),l=a(h);return function(u){return function(i){return function(s){return function(f){return function(p){return MV({get:o(u)(i),pop:r(u)(i),set:l(u)(i),component:s,input:f,output:p})}}}}}}}};var ui=function(){return S$(V.value)}();var K$=ui("h3"),tS=K$([]);var nS=function(e){return ui("img")(e)([])},Pp=function(e){return ui("input")(e)([])};var rS=ui("option");var oS=ui("select");var aS=ui("style");var pn=ui("div"),co=pn([]);var iS=function(e){return ui("canvas")(e)([])},df=ui("button");var si=function(){var e=function(t){return function(n){return new N(new nv(t,n))}};return function(t){return D$(e(t))}}(),Sc=function(e){return C$(e)};var FV=Sc(_v),Q$=Sc(b$);var X$=FV("src");var Y$=function(e){return Sc(e)("type")},Z$=function(e){return Sc(e)("value")},eH=Q$("width");var tH=Q$("height");var uS=function(){return E$(V.value)}();var sS=ee(zt),xV=Fr(Ht),LV=Tn(Js)(Kt),AV=wt(of),IV=at(Kt)($t),RV=Dn(Ht),$V=function(){function e(){}return e.value=new e,e}(),HV=function(e){return iS([si("canvas"),eH(e.dimensions.width),tH(e.dimensions.height)])},OV=function(e){var t=AV(e.MonadEffect0().Monad0()),n=FR(e);return function(a){var h=n(a);return function(o){return sS(xV)(function(r){return Ie(LV)(r.canvas)(function(l){return t(Ea(h(o))(l))})})}}},PV=function(e){var t=Le(Ln(e.MonadEffect0()));return function(n){return sS(Rr("canvas"))(function(a){return Ie(IV)(a)(function(h){return sS(t(cm(h)))(function(o){return RV(function(r){var l={};for(var u in r)({}).hasOwnProperty.call(r,u)&&(l[u]=r[u]);return l.canvas=new N({canvasElement:h,context2D:o}),l})})})})}},pf=function(e){var t=PV(e),n=OV(e);return function(a){return Xt({initialState:function(h){return{dimensions:h,canvas:V.value}},render:HV,eval:Qt({receive:lt.receive,finalize:lt.finalize,handleAction:t,handleQuery:n(a),initialize:new N($V.value)})})}};var nH=eS();var So=function(){return function(e){var t=nH(e);return function(n){var a=t(n);return function(h){return function(o){return function(r){return function(l){return Nw(new ff(a(h)(o)(r)(l)(_e(V.value))))}}}}}}},_s=function(){return function(e){var t=nH(e);return function(n){var a=t(n);return function(h){return function(o){return function(r){return function(l){return function(u){return Nw(new ff(a(h)(o)(r)(l)(function(i){return N.create(u(i))})))}}}}}}}};function oH(e){return e.target}function Gr(e){return function(){return e.stopPropagation()}}var lS=function(e){return fn(oH(e))};var fS="DOMContentLoaded";var aH="change";var sH="keyup",cH="keydown";var lH="mouseup";var fH="mousemove",dH="mouseleave",pH="mouseenter",hH="mousedown",_H="dblclick",mH="click";var Ec=ne,vH=ne;var li=function(e){return function(t){return Ww(e)(function(n){return new N(new vc(t(n)))})}};var hf=li(aH),Tc=function(){var e=li(mH);return function(t){return e(Ec(t))}}(),gH=function(){var e=li(_H);return function(t){return e(Ec(t))}}();var yH=function(){var e=li(cH);return function(t){return e(vH(t))}}(),DH=function(){var e=li(sH);return function(t){return e(vH(t))}}();var CH=function(){var e=li(hH);return function(t){return e(Ec(t))}}(),bH=function(){var e=li(pH);return function(t){return e(Ec(t))}}(),wH=function(){var e=li(dH);return function(t){return e(Ec(t))}}(),SH=function(){var e=li(fH);return function(t){return e(Ec(t))}}();var EH=function(){var e=li(lH);return function(t){return e(Ec(t))}}();var dS=ne;function Mc(e){return e.clientX}function Fc(e){return e.clientY}var ko=ne;var pS=ee(zt),rz=Fr(Ht),TH=ut($n),FH={reflectSymbol:function(){return"canvas"}},hS=Vr()(FH)(tn),oz=at(Kt)($t),xH=nt(rt),az=xH(zt),iz=$o(Ht),MH=ee(oa),uz=xH(oa),sz=So()(FH)(tn),cz=he(me),LH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),AH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),IH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),RH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_f=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$H=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),HH=function(){function e(){}return e.value=new e,e}(),fi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lz=function(e){if(e instanceof LH)return Gr(dS(e.value0));if(e instanceof AH)return Gr(dS(e.value0));if(e instanceof IH)return Gr(ko(e.value0));if(e instanceof RH)return Gr(ko(e.value0));if(e instanceof _f)return Gr(ko(e.value0));if(e instanceof mf)return Gr(ko(e.value0));if(e instanceof $H)return Gr(ko(e.value0));if(e instanceof vf)return Gr(ko(e.value0));if(e instanceof gf)return Gr(ko(e.value0));throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 104, column 1 - line 104, column 55): "+[e.constructor.name])},Mv=function(){return Dt.value}(),fz=function(e){var t=Le(Ln(e.MonadEffect0()));return function(n){return function(a){if(a instanceof HH)return pS(rz)(function(h){return TH(hS(Mv)(void 0)(mp(h.draw(h.world))))});if(a instanceof fi)return pS(hS(Mv)(void 0)(AR))(function(h){return Ie(oz)(h)(function(o){return az(t(lz(a.value0)))(function(){return pS(iz(function(r){var l={};for(var u in r)({}).hasOwnProperty.call(r,u)&&(l[u]=r[u]);return l.world=r.input(a.value0)(o)(r.world),l}))(function(r){return TH(hS(Mv)(void 0)(mp(MH(Jm)(function(l){return MH(jm)(function(u){return uz(Km({x:0,y:0,width:l,height:u}))(function(){return r.draw(r.world)})})}))))})})})});throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 88, column 16 - line 102, column 23): "+[a.constructor.name])}}},dz=function(e){var t=pf(e);return function(n){var a=t(n);return function(h){return pn([yH(function(o){return fi.create(LH.create(o))}),DH(function(o){return fi.create(AH.create(o))}),Tc(function(o){return fi.create(IH.create(o))}),gH(function(o){return fi.create(RH.create(o))}),CH(function(o){return fi.create(_f.create(o))}),EH(function(o){return fi.create(mf.create(o))}),bH(function(o){return fi.create($H.create(o))}),wH(function(o){return fi.create(vf.create(o))}),SH(function(o){return fi.create(gf.create(o))})])([sz(Mv)(void 0)(a)(h.dimensions)])}}},Fv=function(e){var t=dz(e),n=fz(e);return function(a){return Xt({initialState:cz,render:t(a),eval:Qt({handleQuery:lt.handleQuery,receive:lt.receive,finalize:lt.finalize,handleAction:n(a),initialize:new N(HH.value)})})}};var xc=nt(rt)(oa),pz=at(_p)(mt),hz=z(ht),_z=So()({reflectSymbol:function(){return"sketch"}})(tn),mz=function(){return{dimensions:{width:400,height:400},world:{line:V.value,lines:[]},draw:function(e){return xc(as(Ja(255)(255)(200)))(function(){return xc(Yl({x:0,y:0,width:400,height:400}))(function(){return xc(zm(Ja(0)(0)(0)))(function(){return xc(Vm(5))(function(){return Ie(pz)(Ke(e.lines)(Ie(ln)(e.lines))(e.line))(function(t){return xc(Qm)(function(){return xc(qm(t.value0))(function(){return xc(Um(t.value1))(function(){return Gm})})})})})})})})},input:function(e){return function(t){return function(n){if(e instanceof vf)return{lines:n.lines,line:V.value};if(e instanceof mf)return{line:V.value,lines:function(){if(n.line instanceof V)return n.lines;if(n.line instanceof N)return ln(n.line.value0)(n.lines);throw new Error("Failed pattern match at Examples.Halogen.Canvas.Sketch (line 41, column 22 - line 43, column 45): "+[n.line.constructor.name])}()};if(e instanceof _f){var a={x:Wn(Mc(e.value0))-t.left,y:Wn(Fc(e.value0))-t.top};return{lines:n.lines,line:Ke(new N(new Z(a,a)))(N.create)(n.line)}}if(e instanceof gf){var a={x:Wn(Mc(e.value0))-t.left,y:Wn(Fc(e.value0))-t.top},h=function(r){return new Z(r.value0,a)};return{lines:n.lines,line:hz(h)(n.line)}}return n}}}}}(),vz=function(){return Dt.value}(),PH=function(e){var t=Fv(e);return function(n){return Xt({initialState:_e(void 0),render:_e(_z(vz)(void 0)(t(n))(mz)),eval:Qt(lt)})}};var Ez=Nn(qn),Tz=mn(qn),Mz=yn(qn);var Fz=function(e){return e};var _S=function(e){return LA(e)};var NH=Fz,BH={foldMap:function(e){var t=Ez(e);return function(n){var a=t(n);return function(h){return a(_S(h))}}},foldl:function(e){return function(t){var n=Tz(e)(t);return function(a){return n(_S(a))}}},foldr:function(e){return function(t){var n=Mz(e)(t);return function(a){return n(_S(a))}}}};var WH=function(){var e=ut(ql);return function(t){return NH(e(t))}}();function UH(e){return function(t){return function(){return setInterval(t,e)}}}function qH(e){return function(){clearInterval(e)}}var VH=UH;var zH=qH;var Iz=nt(rt),GH=z(ht),Rz=ti(gt),Lv=ee(jt),mS=Le(Cn),$z=Iz(jt),vS=X(Ur),Hz=z(xr),Oz=gn(Gi);var Pz=at(Ur)(qn),kz=ar(jl);var Nz=function(e){return e},Bz=function(e){var t=function(){var h=Qe(e)();if(h instanceof V)return V.value;if(h instanceof N){var o=Qu(h.value0.releasers);if(o instanceof V)return V.value;if(o instanceof N)return no(GH(function(r){return{nextKey:r.nextKey,references:r.references,releasers:Rz(o.value0.key)(r.releasers)}}))(e)(),new N(o.value0.value);throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 104, column 33 - line 108, column 32): "+[o.constructor.name])}throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 102, column 11 - line 108, column 32): "+[h.constructor.name])},n=function(a){return Lv(mS(t))(function(h){if(h instanceof V)return $z(mS(Ut(V.value)(e)))(function(){return vS(new Bt(a))});if(h instanceof N)return Lv(mI(h.value0))(function(o){return vS(new Pt(Sn(function(r){return new Xe(r,a)})(_e(a))(o)))});throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 92, column 11 - line 98, column 68): "+[h.constructor.name])})};return Hz(Ji)(Oz(n)(Ye.value))};var JH=function(){var e=new N({nextKey:0,references:1,releasers:pr});return z(Pe)(Nz)(cn(e))}(),jH=function(e){return ZD(Lv(mS(o_(GH(function(t){return{nextKey:t.nextKey,releasers:t.releasers,references:t.references-1|0}}))(e)))(function(t){return t instanceof N&&t.value0.references===0?Lv(Bz(e))(Pz(kz)):vS(void 0)}))};var Uz=ee(jt),qz=Le(Cn);var Vz=function(e){return function(t){return Uz(qz(JH))(function(n){return Yd(jH(n))(e(t(n)))})}},Av=Vz(he(me));var gS=function(e){var t=z(e);return{map:function(n){return function(a){var h=t(n);return function(o){return h(a(o))}}}}},KH=function(e){var t=pt(e),n=gS(e.Functor0());return{apply:function(a){return function(h){return function(o){return t(a(o))(h(o))}}},Functor0:function(){return n}}},zz=function(e){var t=ee(e),n=KH(e.Apply0());return{bind:function(a){return function(h){return function(o){return t(a(o))(function(r){var l=h(r);return l(o)})}}},Apply0:function(){return n}}};var Gz=function(e){var t=X(e),n=KH(e.Apply0());return{pure:function(a){return function(h){return t(a)}},Apply0:function(){return n}}},Iv=function(e){var t=Gz(e.Applicative0()),n=zz(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}};var di=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Eo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var YH=function(e){return e instanceof lo?new N(e.value1):e instanceof Eo?new N(e.value0):V.value},ZH=function(e){return e instanceof lo?new N(e.value0):e instanceof di?new N(e.value0):V.value};var eO=function(e){var t=De(e);return function(n){var a=De(n);return{append:function(h){return function(o){if(h instanceof di&&o instanceof di)return new di(t(h.value0)(o.value0));if(h instanceof di&&o instanceof Eo)return new lo(h.value0,o.value0);if(h instanceof di&&o instanceof lo)return new lo(t(h.value0)(o.value0),o.value1);if(h instanceof Eo&&o instanceof di)return new lo(o.value0,h.value0);if(h instanceof Eo&&o instanceof Eo)return new Eo(a(h.value0)(o.value0));if(h instanceof Eo&&o instanceof lo)return new lo(o.value0,a(h.value0)(o.value1));if(h instanceof lo&&o instanceof di)return new lo(t(h.value0)(o.value0),h.value1);if(h instanceof lo&&o instanceof Eo)return new lo(h.value0,a(h.value1)(o.value0));if(h instanceof lo&&o instanceof lo)return new lo(t(h.value0)(o.value0),a(h.value1)(o.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[h.constructor.name,o.constructor.name])}}}}};var nG=De(Hs),rG=st(Li),nO=Gs(mt),rO=nO(Li),$v=Va(mt)(Li),pi=z(Ct),DS=pt(Os),oG=De(sn),oO=Nn(mt),aG=oO(Li),iG=H0(KL),Hv=z(ht),uG=Mt(NM),aO=ee(kr),sG=m_(U0(mt)),iO=z(Id(Ct));var cG=p_(mt)(eo),lG=ee(yu),fG=S_(Hd),dG=ha(vd(pa)),pG=Va(E_(mt))(Li),hG=Me(_o),Ov=function(e){return e},_G=function(e){return e},CS=function(e){return function(t){return function(n){return t+(e+n)}}},mG={append:function(e){return function(t){return e+t}}},vG={append:function(e){return function(t){return e+t}}},uO=eO(mG)(vG),sO=IF(uO),Rv=oO(sO),gG=nO(sO),Wp=De(t0(uO)),tO=function(e){var t=Sn(function(n){return rG})(function(n){return rO([n.value0,": ",n.value1])});return $v("; ")(pi(t)(e))},yG=function(e){if(e instanceof ku)return"#"+e.value0;if(e instanceof ki)return"."+e.value0;if(e instanceof Nu)return"["+(e.value0+"]");if(e instanceof Bu)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof Wu)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof Uu)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof qu)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof Vu)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof zu)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof Ni)return":"+e.value0;if(e instanceof $l)return":"+(e.value0+("("+($v(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},DG=function(e){return function(t){if(e.length===0&&t instanceof H_)return["*"];if(t instanceof H_)return[""];if(t instanceof iD)return[t.value0];if(t instanceof uD)return DS(pi(CS(" > "))(eu(t.value0)))(eu(t.value1));if(t instanceof sD)return DS(pi(CS(" "))(eu(t.value0)))(eu(t.value1));if(t instanceof GL)return DS(pi(CS(" + "))(eu(t.value0)))(eu(t.value1));if(t instanceof JL)return oG(eu(t.value0))(eu(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},eu=function(e){return pi(function(t){return t+aG(yG)(iG(e.value0))})(DG(e.value0)(e.value1))},CG=function(){var e=$v(", ");return function(t){return e(eu(t))}}(),Lc=function(e){return e.length===0?V.value:Hv(function(t){return new oo(t.head,t.tail)})(y_(e))};var yf=function(e){if(e.value0 instanceof oA)return Ke(e.value0.value0)(function(t){return QL(yf(t))(e.value0.value0)})(Lc(e.value1));if(e.value0 instanceof _D)return Ke(e.value0.value0)(function(t){return Jn(yf(t))(e.value0.value0)})(Lc(e.value1));if(e.value0 instanceof nA)return Ke(e.value0.value0)(function(t){return Jn(e.value0.value0)(yf(t))})(Lc(e.value1));if(e.value0 instanceof rA)return Ke(O_("TODO"))(yf)(Lc(P0(e.value0.value0)(ln(e.value0)(e.value1))));if(e.value0 instanceof tA)return Ke(ft(qt)(e.value0.value0))(function(t){return ft(yf(t))(e.value0.value0)})(Lc(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},bG=function(e){return kd(e)},wG=function(e){return N.create(Eo.create(Ov(uG("@import url("+(e+`);
`)))))},SG=function(e){return e},bS=function(e){return aO(e)(function(){var t=Hv(SG);return function(n){return t(YH(n))}}())},EG=function(e){return e},cO=function(e){return aO(e)(function(){var t=Hv(EG);return function(n){return t(ZH(n))}}())},TG=function(e){return Ke(e.value0)(function(t){return"("+(e.value0+(": "+(kd(t)+")")))})(e.value1)},MG=function(e){return"@media "+(bG(e.value1)+sG(nG)(iO(function(t){return function(n){return" and "+n}(TG(t))})(e.value2)))};var FG=function(e){return function(t){if(e instanceof io&&t instanceof io)return[new Oe(new Z(e.value0,t.value0))];if(e instanceof ao&&t instanceof io)return pi(function(n){return new Oe(new Z(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof io&&t instanceof ao)return pi(function(n){return new Oe(new Z(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof ao&&t instanceof ao)return pi(function(n){return Ke(new We(n.value0+n.value1))(function(){var a=Z.create(n.value0+n.value1);return function(h){return Oe.create(a(function(o){return n.value0+o}(h)))}}())(cG(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},wS=function(e){return FG(e.value0)(e.value1)},xG=function(e){return function(t){var n=lG(t)(wS),a=Hv(function(o){return di.create(_G(tO(fG(o))))})(Lc(n)),h=function(o){return N.create(Eo.create(Ov($v(" ")([CG(yf(o)),"{",tO(n),`}
`]))))};return Ke(a)(h)(Lc(e))}},Up=function(e){return function(t){var n=function(_){return _ instanceof aA?new N(new Z(_.value0,_.value1)):V.value},a=Rv(Tu(Ie(LG)(e)))(za(n)(t)),h=function(_){return _ instanceof Vd?new N(new Z(_.value0,_.value1)):V.value},o=function(){var _=za(h)(t),m=dG(Ks)(_);return m?xG(e)(_):V.value}(),r=function(_){return Up(ln(_)(e))},l=function(_){return _ instanceof mD?new N(new Z(_.value0,_.value1)):V.value},u=gG(pi(Tu(r))(za(l)(t))),i=function(_){return _ instanceof uA?new N(_.value0):V.value},s=Rv(AG)(za(i)(t)),f=function(_){return _ instanceof sA?new N(_.value0):V.value},p=Rv(wG)(za(f)(t)),d=function(_){return _ instanceof iA?new N(_.value0):V.value},c=Rv(RG)(za(d)(t));return Wp(o)(Wp(p)(Wp(s)(Wp(c)(Wp(u)(a)))))}},LG=function(e){return function(t){return function(n){return N.create(Eo.create(Ov(MG(e)+(" { "+(tr("")(bS(Up(t)(n)))+` }
`)))))}}},AG=function(e){var t=" "+(e.value0+(" { "+(pG(" ")(iO(Tu(IG))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],a=rO(pi(function(h){return h+t})(n));return new N(new Eo(a))},IG=function(e){return function(t){var n=tr("")(cO(Up([])(t)));return hG(e)+("% "+("{ "+(n+" }")))}},RG=function(e){return N.create(Eo.create(Ov("@font-face { "+(tr("")(cO(Up([])(e)))+` }
`))))},lO=function(){var e=Up([]);return function(t){return e(zd(t))}}();var HG=Y$(Bw),OG=ee(yu),PG=Mp(mt),fO=function(e){var t=tr("")(bS(lO(e)));return aS([HG("text/css")])([Ir(t)])},Vn=function(){var e=function(){var o=vo("; "),r=d$(Bs)(function(l){return function(u){return[l+(": "+u)]}});return function(l){return o(r(l))}}(),t=N0(Nn(d_)(Bs)(js)),n=function(o){return o instanceof Vd?new N(new Z(o.value0,o.value1)):V.value},a=function(o){var r=OG(za(n)(o))(function(l){return t(wS(l))});return PG(r)},h=uS("style");return function(o){return h(e(a(zd(o))))}}();var Jr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var kG=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return{map:function(a){return function(h){var o=function(r){if(r instanceof Jr)return new Jr(r.value0,function(l){return o(r.value1(l))});if(r instanceof jr)return new jr(r.value0,function(l){return o(r.value1(l))});if(r instanceof Kr)return new Kr(t(r.value0)(function(l){return n(o(l))}));if(r instanceof mr)return new mr(a(r.value0));throw new Error("Failed pattern match at Pipes.Internal (line 28, column 12 - line 32, column 41): "+[r.constructor.name])};return o(h)}}}};var qp=function(e){var t;function n(a){e=a}for(;;)t=n(e);return t},SS=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0()),a=kG(e),h=z(a);return{apply:function(o){return function(r){var l=function(u){if(u instanceof Jr)return new Jr(u.value0,function(i){return l(u.value1(i))});if(u instanceof jr)return new jr(u.value0,function(i){return l(u.value1(i))});if(u instanceof Kr)return new Kr(t(u.value0)(function(i){return n(l(i))}));if(u instanceof mr)return h(u.value0)(r);throw new Error("Failed pattern match at Pipes.Internal (line 36, column 13 - line 40, column 33): "+[u.constructor.name])};return l(o)}},Functor0:function(){return a}}},Df=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0()),a=SS(e);return{bind:function(h){return function(o){var r=function(l){if(l instanceof Jr)return new Jr(l.value0,function(u){return r(l.value1(u))});if(l instanceof jr)return new jr(l.value0,function(u){return r(l.value1(u))});if(l instanceof Kr)return new Kr(t(l.value0)(function(u){return n(r(u))}));if(l instanceof mr)return o(l.value0);throw new Error("Failed pattern match at Pipes.Internal (line 47, column 12 - line 51, column 28): "+[l.constructor.name])};return r(h)}},Apply0:function(){return a}}};var Cf=function(e){var t=SS(e);return{pure:mr.create,Apply0:function(){return t}}},dO=function(e){var t=Cf(e),n=Df(e);return{Applicative0:function(){return t},Bind1:function(){return n}}},pO=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0()),a=dO(e);return{tailRecM:function(h){return function(o){var r=function(l){if(l instanceof mr&&l.value0 instanceof Pt)return r(h(l.value0.value0));if(l instanceof mr&&l.value0 instanceof Bt)return new mr(l.value0.value0);if(l instanceof Kr)return new Kr(t(l.value0)(function(u){return n(r(u))}));if(l instanceof Jr)return new Jr(l.value0,function(u){return r(l.value1(u))});if(l instanceof jr)return new jr(l.value0,function(u){return r(l.value1(u))});throw new Error("Failed pattern match at Pipes.Internal (line 163, column 10 - line 168, column 52): "+[l.constructor.name])};return r(h(o))}},Monad0:function(){return a}}};var hO=function(e){return function(t){return new jr(t,mr.create)}},_O=function(e){return function(t){return new Jr(t,mr.create)}};var ES=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(a){return function(h){if(a instanceof Jr)return new Jr(a.value0,function(o){return ES(e)(a.value1(o))(h)});if(a instanceof jr)return Vp(e)(a.value1)(h(a.value0));if(a instanceof Kr)return new Kr(t(a.value0)(function(o){return n(ES(e)(o)(h))}));if(a instanceof mr)return new mr(a.value0);throw new Error("Failed pattern match at Pipes.Core (line 222, column 21 - line 226, column 29): "+[a.constructor.name])}}},Vp=function(e){var t=z(e.Bind1().Apply0().Functor0());return function(n){return function(a){if(a instanceof Jr)return ES(e)(n(a.value0))(a.value1);if(a instanceof jr)return new jr(a.value0,function(h){return function(o){return Vp(e)(n)(o)}(a.value1(h))});if(a instanceof Kr)return new Kr(t(function(h){return Vp(e)(n)(h)})(a.value0));if(a instanceof mr)return new mr(a.value0);throw new Error("Failed pattern match at Pipes.Core (line 197, column 22 - line 201, column 29): "+[a.constructor.name])}}};var kv=function(e){return hO(e)};var TS=function(e){var t=Vp(e);return function(n){return function(a){return t(_e(n))(a)}}};var mO=function(e){return _O(e)(void 0)};var vO=Me(to),wO=Ee(gt),SO=nt(rt),BG=SO(Yo),WG=he(me),gO=_l(ml),Nv=Iv(ri),yO=SO(Df(Nv)),DO=kv(Nv),CO=X(Cf(Nv)),bO=gn(pO(Nv));var UG={eq:function(e){return function(t){return e===t}}},FS={compare:function(e){return function(t){return wO(e)(t)}},Eq0:function(){return UG}},qG={pageOrder:function(e){return function(t){return wO(e)(t)}},Ord0:function(){return FS}},VG=function(e){return{element:function(){var t=function(n){return pn([Vn(Jd(Gd)(et(1))(ja))])([Ir(vO(n)),nS([X$("https://picsum.photos/"+vO(n)),Vn(BG(ba(et(400)))(function(){return Po(et(400))}))])])};return Xt({initialState:WG,render:t,eval:Qt(lt)})}(),PageOrder0:function(){return qG},MonadAff1:function(){return e}}},EO=function(e){var t=X(e.MonadEffect0().Monad0().Applicative0()),n=VG(e);return{feedAbove:function(a){var h=function(o){var r=gO(o-1|0)(300);return yO(DO(r))(function(){return CO(new Pt(r))})};return t(bO(h)(a))},feedBelow:function(a){var h=function(o){var r=gO(o+1|0)(300);return yO(DO(r))(function(){return CO(new Pt(r))})};return t(bO(h)(a))},feedInsert:t(V.value),feedDelete:t(V.value),onElement:function(a){return t(void 0)},PageElement0:function(){return n},MonadAff1:function(){return e}}};var ia=function(){return window};function TO(e){return e.readyState}var zp=function(){function e(){}return e.value=new e,e}(),KG=function(){function e(){}return e.value=new e,e}(),QG=function(){function e(){}return e.value=new e,e}();var MO=function(e){return e==="loading"?new N(zp.value):e==="interactive"?new N(KG.value):e==="complete"?new N(QG.value):V.value};var YG=z(Pe);var xO=ne;var LO=ne;var AO=function(e){return YG(function(){var t=tr(zp.value);return function(n){return t(MO(n))}}())(function(){return TO(e)})};function RO(e,t,n){var a=Object.prototype.toString.call(n);return a.indexOf("[object HTML")===0&&a.indexOf("Element]")===a.length-8?t(n):e}var $O=ne;var Gp=function(e){return RO(V.value,N.create,e)};function xS(e){return function(){return e.hash}}function bf(e){return function(){return e.document}}function LS(e){return function(){return e.location}}var PO=ne;var kO=ee(jt),z9=Le(Cn),IS=wn(Sr),G9=il(Sr),NO=X(Ur),J9=wn(kr),j9=X(nn),K9=z(Pe),Q9=nt(rt),X9=ar(jl),Y9=function(e){return kO(z9(IS(G9(function(){var t=ER(e);return function(n){return t(xO(n))}}())(bf))(ia)))(function(t){return NO(J9(Gp)(t))})},RS=tp(Sn(yo)(_e(j9(void 0)))),Z9=Sa(function(e){return function(){var n=IS(AO)(IS(bf)(ia))();if(n instanceof zp){var a=K9(PO)(ia)(),h=Fp(function(o){return e(new Oe(void 0))})();return Iw(fS)(h)(!1)(a)(),_c(Rw(fS)(h)(!1)(a))}return e(new Oe(void 0))(),eC}}),$S=Q9(jt)(Z9)(function(){return kO(Y9("body"))(function(e){return Ke(X9(or("Could not find body")))(NO)(e)})});var HS=Mt(rr),WO=Mt(Gn);var eJ={value:function(e){return e}},UO=Jt(eJ),Uv=HS("scroll"),qv=UO(WO("overflow-y"));var qO=HS("auto"),Ic=UO(WO("overflow")),Jp=HS("hidden");var jp=function(e){return function(t){var n=e(t);return n.value1}};var ua=function(){function e(){this.head=null,this.last=null,this.size=0}function t(s,f){this.queue=s,this.value=f,this.next=null,this.prev=null}function n(s){this.draining=!1,this.error=null,this.value=s,this.takes=new e,this.reads=new e,this.puts=new e}var a={};function h(s){try{s()}catch(f){setTimeout(function(){throw f},0)}}function o(s,f){var p=new t(s,f);switch(s.size){case 0:s.head=p;break;case 1:p.prev=s.head,s.head.next=p,s.last=p;break;default:p.prev=s.last,s.last.next=p,s.last=p}return s.size++,p}function r(s){var f;switch(s.size){case 0:return null;case 1:f=s.head,s.head=null;break;case 2:f=s.last,s.head.next=null,s.last=null;break;default:f=s.last,s.last=f.prev,s.last.next=null}return f.prev=null,f.queue=null,s.size--,f.value}function l(s){var f;switch(s.size){case 0:return null;case 1:f=s.head,s.head=null;break;case 2:f=s.head,s.last.prev=null,s.head=s.last,s.last=null;break;default:f=s.head,s.head=f.next,s.head.prev=null}return f.next=null,f.queue=null,s.size--,f.value}function u(s){if(s.queue!==null){if(s.queue.last===s){r(s.queue);return}if(s.queue.head===s){l(s.queue);return}s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),s.queue.size--,s.queue=null,s.value=null,s.next=null,s.prev=null}}function i(s,f){if(!f.draining){var p=f.puts,d=f.takes,c=f.reads,_,m,v,y,C;for(f.draining=!0;;){if(_=null,m=null,v=null,y=f.value,C=c.size,f.error!==null){for(y=s.left(f.error);_=l(p);)h(_.cb(y));for(;m=l(c);)h(m(y));for(;v=l(d);)h(v(y));break}if(y===a&&(_=l(p))&&(f.value=y=_.value),y!==a){for(v=l(d);C--&&(m=l(c));)h(m(s.right(y)));v!==null&&(f.value=a,h(v(s.right(y))))}if(_!==null&&h(_.cb(s.right(void 0))),f.value===a&&p.size===0||f.value!==a&&d.size===0)break}f.draining=!1}}return n.EMPTY=a,n.putLast=o,n.takeLast=r,n.takeHead=l,n.deleteCell=u,n.drainVar=i,n}();function PS(){return new ua(ua.EMPTY)}function zO(e){return function(){return new ua(e)}}function GO(e,t,n,a){return function(){var h=ua.putLast(n.puts,{cb:a,value:t});return ua.drainVar(e,n),function(){ua.deleteCell(h)}}}function JO(e,t,n){return function(){var a=ua.putLast(t.takes,n);return ua.drainVar(e,t),function(){ua.deleteCell(a)}}}function jO(e,t){return function(){var n=t.value;return n===ua.EMPTY?e.nothing:(t.value=ua.EMPTY,ua.drainVar(e,t),e.just(n))}}var KO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),QO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),XO=function(){function e(){}return e.value=new e,e}(),YO=zO;var kS=function(){return{left:We.create,right:Oe.create,nothing:V.value,just:N.create,killed:KO.create,filled:QO.create,empty:XO.value}}();var ZO=function(e){return function(t){return function(n){return GO(kS,e,t,n)}}};var eP=function(e){return function(t){return JO(kS,e,t)}};var tP=function(e){return jO(kS,e)};var NS=Le(Cn),nP=function(e){return NS(tP(e))};var BS=function(e){return Sa(function(t){return function(){var a=eP(e)(t)();return _c(a)}})};var Kp=function(e){return function(t){return Sa(function(n){return function(){var h=ZO(e)(t)(n)();return _c(h)}})}},rP=function(e){return NS(YO(e))};var WS=NS(PS);var Vv=function(e){return e};var aJ=Mp(mt);var aP=sn,Rc=function(e){return mc(aJ(e))};var iP=Bs;var iJ=function(e){return function(t){return[new Z(e,mc(t))]}},tu=function(e){return Vv(iJ(e))},Qp=In();var uP=e=>t=>()=>{let n=(a,h)=>{e(a)(h)()};return new IntersectionObserver(n,t)},qS=e=>t=>()=>{e.observe(t)};var sP=function(e){return function(t){return uP(e)(Rc(t))}};var cP=tu("root");var lP=e=>()=>{let t=(n,a)=>{e(n)(a)()};return new ResizeObserver(t)},VS=e=>t=>()=>{e.observe(t)};var fP=function(e){return lP(e)};var zS=z(Ct),dJ=So()({reflectSymbol:function(){return"pageElement"}}),Xp=nt(rt)(zt),dP=Dn(Ht),pP=X(Kt),nu=ee(zt),pJ=$o(Ht),hJ=An(Kt),GS=Ho(Ht),hP=ut($n),_J=Pr(Sv),mJ=at(Kt)($t),_P=E0(mt)(Qy),vJ=he(me),JS=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),gJ=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),KS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),QS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mP=function(){function e(){}return e.value=new e,e}(),vP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gP=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yp=function(e){return e.pageOrder},yJ=function(e){return e.element},DJ=function(){return Dt.value}(),yP=function(e){var t=e.PageOrder0(),n=t.Ord0(),a=dJ(n),h=yJ(e),o=Fd(n),r=Yp(t),l=k0(n.Eq0()),u=Le(Ln(e.MonadAff1().MonadEffect0())),i=function(p){return pn([si("page"),Vn(Ic(qO))])(zS(function(d){return a(DJ)(d)(h)(d)})(p.elements))},s=function(p){if(p instanceof JS)return Xp(dP(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.elements=o(xd(r)(p.value0)(d.elements)),c}))(function(){return pP(new N(p.value1))});if(p instanceof gJ)return nu(pJ(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.elements=l(p.value0)(d.elements),c}))(function(d){return Xp(hJ(Ks(d.elements))(qr(new QS(d.id))))(function(){return pP(new N(p.value1))})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 89, column 5 - line 89, column 99): "+[p.constructor.name])},f=function(p){if(p instanceof mP){var d=function(v){return nu(GS(function(y){return y.parent}))(function(y){return nu(u(Kn))(function(C){return Xp(hP(Rn(C.emitter)))(function(){return nu(u(sP(function(T){return function(D){return jn(C.listener)(new gP(T))}})(Qp(cP)(y))))(function(T){return u(qS(T)(v))})})})})},c=function(v){return nu(u(Kn))(function(y){return Xp(hP(Rn(y.emitter)))(function(){return nu(u(fP(function(C){return function(T){return jn(y.listener)(new vP(C))}})))(function(C){return u(VS(C)(v))})})})},_=function(v){return _J(c(v))(d(v))};return nu(Rr("page"))(mJ(_))}if(p instanceof vP)return nu(GS(function(v){return v.id}))(function(v){var y=_P(zS(function(C){return C.contentRect.height})(p.value0));return qr(new jS({id:v,height:y}))});if(p instanceof gP){var m=_P(zS(function(v){return v.intersectionRect.height})(p.value0));return nu(GS(function(v){return v.id}))(function(v){return Xp(dP(function(y){var C={};for(var T in y)({}).hasOwnProperty.call(y,T)&&(C[T]=y[T]);return C.visibleHeight=m,C}))(function(){return qr(new KS({id:v,height:m}))})})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 98, column 5 - line 98, column 81): "+[p.constructor.name])};return Xt({initialState:vJ,render:i,eval:Qt({receive:lt.receive,finalize:lt.finalize,handleAction:f,handleQuery:s,initialize:new N(mP.value)})})};var CJ=cl(gt),bJ=Mi(gt),wJ=im(jo),SJ=z(ql),$c=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ms=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),EJ={append:function(e){return function(t){if(e instanceof ms)return new ms(e.value0);if(t instanceof ms)return new ms(t.value0);if(e instanceof $c&&t instanceof $c)return new $c(CJ(e.value0)(t.value0));if(e instanceof Hc&&t instanceof Hc)return new Hc(bJ(e.value0)(t.value0));if(e instanceof $c)return new ms(e.value0);if(e instanceof Hc)return new ms(e.value0);throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 19, column 1 - line 25, column 32): "+[e.constructor.name,t.constructor.name])}}},TJ=function(){return{mempty:new $c(Ao(ll)),Semigroup0:function(){return EJ}}}(),MJ=Jx(TJ),CP=function(e){var t=Yp(e);return function(n){return function(a){var h=function(r){var l=new Z(Ri(r.elements),Tl(r.elements));if(l.value0 instanceof N&&l.value1 instanceof N){var u=new Z(t(n)(l.value0.value0),t(n)(l.value1.value0));return u.value0 instanceof de?new $c(r.id):u.value1 instanceof se?new Hc(r.id):new ms(r.id)}return new Hc(r.id)},o=MJ(wJ(Kd(SJ(h)(a))));if(o instanceof $c||o instanceof Hc||o instanceof ms)return o.value0;throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 29, column 3 - line 32, column 18): "+[o.constructor.name])}}};var TP=nt(rt),vs=TP(rC(Cr)),gs=Dn(rm(Cr)),bP=Wr(gt),zv=ti(gt),Oc=X(np(Cr)),wP=$e(pl(Du)),SP=z(ht),xJ=Xu(gt),LJ=Mi(Ti),AJ=he(me),IJ=S0(Ti)(Ui),RJ=z(ql),EP=Ul(jo),wf=TP(ur),Sf=An(_r),Ef=at(_r)($t),Gv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Jv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Yv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$J={map:function(e){return function(t){if(t instanceof Gv)return new Gv(t.value0,e(t.value1));if(t instanceof Jv)return new Jv(t.value0,e(t.value1));if(t instanceof jv)return new jv(t.value0,e(t.value1));if(t instanceof Kv)return new Kv(t.value0,e(t.value1));if(t instanceof Qv)return new Qv(t.value0,e(t.value1));if(t instanceof Xv)return new Xv(t.value0,e(t.value1));if(t instanceof Yv)return new Yv(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 26, column 1 - line 33, column 68): "+[e.constructor.name,t.constructor.name])}}},HJ=ra($J)(DI(zF)),XS=function(e){return dt(new Yv(e,void 0))},OJ=function(e){return dt(new Jv(e,void 0))},PJ=function(e){return dt(new Gv(e,void 0))},kJ=function(e){return dt(new jv(e,void 0))},NJ=function(e){return dt(new Kv(e,void 0))},YS=function(e){var t=function(n){if(n instanceof Gv)return vs(gs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.pages=bP(n.value0.key)(n.value0.value)(h.pages),o.preloaded=zv(n.value0.key)(h.preloaded),o.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.scroll=new N(n.value0.value.pageHeight),l}(),o}))(function(){return Oc(n.value1)});if(n instanceof Jv)return vs(gs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.pages=zv(n.value0.key)(h.pages),o.preloaded=bP(n.value0.key)(n.value0.value)(h.preloaded),o.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.scroll=new N(-n.value0.value.pageHeight),l}(),o}))(function(){return Oc(n.value1)});if(n instanceof jv)return vs(gs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.update=function(){var l=wP(SP(function(p){return p.key})(h.update.topLoad))(new N(n.value0.key));if(l){var u={};for(var i in h.update)({}).hasOwnProperty.call(h.update,i)&&(u[i]=h.update[i]);return u.topLoad=V.value,u}var s={};for(var f in h.update)({}).hasOwnProperty.call(h.update,f)&&(s[f]=h.update[f]);return s.topLoad=new N(n.value0),s}(),o}))(function(){return Oc(n.value1)});if(n instanceof Kv)return vs(gs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.preloaded=zv(n.value0.key)(h.preloaded),o.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.topLoad=V.value,l}(),o}))(function(){return Oc(n.value1)});if(n instanceof Qv)return vs(gs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.update=function(){var l=wP(SP(function(p){return p.key})(h.update.bottomLoad))(new N(n.value0.key));if(l){var u={};for(var i in h.update)({}).hasOwnProperty.call(h.update,i)&&(u[i]=h.update[i]);return u.bottomLoad=V.value,u}var s={};for(var f in h.update)({}).hasOwnProperty.call(h.update,f)&&(s[f]=h.update[f]);return s.bottomLoad=new N(n.value0),s}(),o}))(function(){return Oc(n.value1)});if(n instanceof Xv)return vs(gs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.pages=zv(n.value0.key)(h.pages),o.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.bottomLoad=V.value,l}(),o}))(function(){return Oc(n.value1)});if(n instanceof Yv){var a=function(h){if(h instanceof V)return V.value;if(h instanceof N)return new N(function(){var o={};for(var r in h.value0)({}).hasOwnProperty.call(h.value0,r)&&(o[r]=h.value0[r]);return o.visibleHeight=n.value0.height,o}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 104, column 11 - line 104, column 44): "+[h.constructor.name])};return vs(gs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.pages=xJ(a)(n.value0.id)(h.pages),o}))(function(){return Oc(n.value1)})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 63, column 5 - line 69, column 13): "+[n.constructor.name])};return vs(gs(function(n){var a={};for(var h in n)({}).hasOwnProperty.call(n,h)&&(a[h]=n[h]);return a.update=function(){var o={};for(var r in n.update)({}).hasOwnProperty.call(n.update,r)&&(o[r]=n.update[r]);return o.scroll=V.value,o}(),a}))(function(){return HJ(t)(e)})},BJ=function(e){return dt(new Qv(e,void 0))},WJ=function(e){return dt(new Xv(e,void 0))},MP=function(e){return function(t){var n=Ku(e.preloaded)>(e.feedParams.preloadedPages+e.feedParams.deadZone|0),a=Ku(e.preloaded)<(e.feedParams.preloadedPages-e.feedParams.deadZone|0),h=function(f){return f.value1.visibleHeight<LJ(1)(Ke(0)(AJ)(IJ(RJ(function(p){return p.visibleHeight})(e.pages))))},o=yr(b_(h)(sl(EP(e.pages)))),r=o<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),l=o>(e.feedParams.hiddenPages+e.feedParams.deadZone|0),u=yr(b_(h)(EP(e.pages))),i=u<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),s=u>(e.feedParams.hiddenPages+e.feedParams.deadZone|0);return wf(XS(t))(function(){return wf(Sf(e.feedParams.enableTop&&i)(Ef(PJ)(Qu(e.preloaded))))(function(){return wf(Sf(e.feedParams.enableTop&&s)(Ef(OJ)(ei(e.pages))))(function(){return wf(Sf(e.feedParams.enableTop&&a)(Ef(kJ)(ei(e.preloaded))))(function(){return wf(Sf(e.feedParams.enableTop&&n)(Ef(NJ)(ei(e.preloaded))))(function(){return wf(Sf(r)(Ef(BJ)(Qu(e.pages))))(function(){return Sf(l)(Ef(WJ)(Qu(e.pages)))})})})})})})}};var jJ=ut($n);var KJ=Vr();var ZS=function(){return function(e){var t=KJ(e);return function(n){var a=t(n);return function(h){return function(o){return function(r){return jJ(a(h)(o)(r(void 0)))}}}}}};var XJ=nt(rt);var xP=function(e){var t=X(Cf(e)),n=Df(e),a=ee(n),h=mO(e),o=XJ(n),r=kv(e),l=function(u){return u===0?t(void 0):a(h)(function(i){return o(r(i))(function(){return l(u-1|0)})})};return l};var YJ=function(e){var t=ee(e.Bind1()),n=X(e.Applicative0());return function(a){return function(h){return function(o){return function(r){var l=function(u){return function(i){if(u instanceof Jr)return qp(u.value0);if(u instanceof jr)return l(u.value1(void 0))(a(i)(u.value0));if(u instanceof Kr)return t(u.value0)(function(s){return l(s)(i)});if(u instanceof mr)return n(o(i));throw new Error("Failed pattern match at Pipes.Prelude (line 202, column 14 - line 206, column 39): "+[u.constructor.name])}};return l(r)(h)}}}}};var LP=function(e){var t=function(a){return function(h){return function(o){return a(function(r){return new Xe(h,r)}(o))}}},n=function(a){return a(Ye.value)};return YJ(e)(t)(he(me))(n)};var rn=ee(zt),eE=An(Kt),ej=Pr(Sv),Mf=Ho(Ht),ru=at(Kt)($t),Tf=Tn(Js)(Kt),ys=X(Kt),nE=nt(rt),tg=wt(of),rE=z(gS(xr)),oE=$i(qn),aE=Iv(ri),iE=LP(aE),uE=TS(aE),sE=xP(aE),Zp=z($n),Qr=nE(zt),cE=ul(kr),HP=Fr(Ht),xa=Dn(Ht),tE=Wr(gt),OP=ti(gt),AP=ut($n),tj=gn(Op),nj=nE(jt),rj=z(xp),Zv=Xu(gt),oj=z_(gt),PP={reflectSymbol:function(){return"page"}},aj=ZS()(PP)(gt),ij=$o(Ht),uj=at(nn)($t),sj=_s()(PP)(gt),No=nE(Yo),IP=z(Ct),RP=Ul(jo),cj=e0(gt)(sd),lj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lE=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ng=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kP=function(){function e(){}return e.value=new e,e}(),eg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$P=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rg=function(e){return e.onElement},fj=function(e){var t=bn(ii(e.MonadAff1()));return function(n){var a=function(h){return rn(t(nP(h)))(function(o){return eE(Ns(o))(ej(n)(t(Kp(void 0)(h))))})};return rn(Mf(function(h){return h.lock}))(function(h){return ru(a)(h)})}},dj=function(e){var t=Le(Ln(e.MonadAff1().MonadEffect0()));return function(n){if(n instanceof lj)return rn(Rr("feed"))(function(a){return Ie(Tf)(a)(function(h){var o=function(r){return function(){var u=Xl(h)();return pp(u+r)(h)()}};return ys(n.value0(o))})});if(n instanceof lE)return rn(Rr("feed"))(function(a){return Ie(Tf)(a)(function(h){return t(function(){var r=Xl(h)();return pp(r+n.value0)(h)(),n.value1})})});if(n instanceof ng)return rn(Rr("feed"))(function(a){return Ie(Tf)(a)(function(h){return t(function(){var r=Xl(h)();return n.value0(r)})})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 90, column 1 - line 92, column 93): "+[n.constructor.name])}},pj=function(e){return e.feedInsert};var NP=function(e){return e.feedBelow},hj=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),a=tg(n),h=NP(e),o=bn(ii(t)),r=at(n.Applicative0())(mt),l=rg(e);return function(u){var i=rn(Mf(function(s){return s.feedParams.initialElement}))(function(s){return rn(Mf(function(f){return f.feedParams}))(function(f){return rn(a(h(s)))(function(p){var d=rE(oE)(iE(uE(p)(sE(f.pageSize-1|0))));return Zp(ln(s))(o(Av(d)))})})});return rn(i)(function(s){return Qr(a(r(l)(s)))(function(){return ys({id:0,elements:s,parent:u,pageHeight:0,visibleHeight:0})})})}},_j=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),a=tg(n),h=NP(e),o=bn(ii(t)),r=at(n.Applicative0())(mt),l=rg(e);return function(u){return function(i){var s=function(f){return rn(Mf(function(p){return p.feedParams}))(function(p){return rn(a(h(f)))(function(d){var c=rE(oE)(iE(uE(d)(sE(p.pageSize))));return rn(o(Av(c)))(function(_){return Qr(a(r(l)(_)))(function(){var m=Ks(_);return ys(m?V.value:new N({id:i.id+1|0,elements:_,parent:u,pageHeight:0,visibleHeight:0}))})})})})};return Zp(cE)(Tf(s)(Tl(i.elements)))}}},mj=function(e){return e.feedAbove},BP=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),a=tg(n),h=mj(e),o=bn(ii(t)),r=at(n.Applicative0())(mt),l=rg(e);return function(u){return function(i){var s=function(f){return rn(Mf(function(p){return p.feedParams}))(function(p){return rn(a(h(f)))(function(d){var c=rE(oE)(iE(uE(d)(sE(p.pageSize))));return rn(Zp(sl)(o(Av(c))))(function(_){return Qr(a(r(l)(_)))(function(){var m=Ks(_);return ys(m?V.value:new N({id:i.id-1|0,elements:_,parent:u,pageHeight:0,visibleHeight:0}))})})})})};return Zp(cE)(Tf(s)(Ri(i.elements)))}}},vj=function(e){var t=BP(e);return function(n){return rn(HP)(function(a){var h=Ku(a.preloaded)>a.feedParams.preloadedPages,o=Ku(a.preloaded)<a.feedParams.preloadedPages;return Qr(eE(o)(function(){var r=Ke(ei(a.pages))(N.create)(ei(a.preloaded));return rn(Zp(cE)(Tf(function(l){return t(n)(l.value)})(r)))(function(l){return ru(function(u){return xa(function(i){var s={};for(var f in i)({}).hasOwnProperty.call(i,f)&&(s[f]=i[f]);return s.preloaded=tE(u.id)(u)(i.preloaded),s})})(l)})}()))(function(){return eE(h)(xa(function(r){var l={};for(var u in r)({}).hasOwnProperty.call(r,u)&&(l[u]=r[u]);return l.preloaded=Ke(r.preloaded)(function(i){return OP(i.key)(r.preloaded)})(ei(r.preloaded)),l}))})})}},WP=function(e){return{initialElement:e,pageSize:10,hiddenPages:6,preloadedPages:6,deadZone:2,debounce:333,enableTop:!1,preloadMillis:333.3}},UP=function(){return Dt.value}(),gj=function(e){var t=vj(e),n=hj(e),a=e.MonadAff1(),h=bn(ii(a)),o=a.MonadEffect0(),r=tg(o.Monad0()),l=pj(e),u=e.PageElement0().PageOrder0(),i=Fd(u.Ord0()),s=Yp(u),f=rg(e),p=CP(u),d=fj(e),c=Le(Ln(o)),_=BP(e),m=_j(e);return function(v){if(v instanceof kP){var y=function(F){return function(b){return function(E){var M=E>=F.preloadedPages;return M?ys(new Bt(E)):Qr(t(b))(function(){return ys(new Pt(E+1|0))})}}},C=function(F){return rn(n(F))(function(b){return Qr(xa(function(E){var M={};for(var S in E)({}).hasOwnProperty.call(E,S)&&(M[S]=E[S]);return M.pages=fc(0)(b),M}))(function(){return rn(Mf(function(E){return E.feedParams}))(function(E){return Qr(AP(tj(y(E)(F))(0)))(function(){return rn(h(nj(XD(E.preloadMillis))(function(){return rP(void 0)})))(function(M){return xa(function(S){var x={};for(var L in S)({}).hasOwnProperty.call(S,L)&&(x[L]=S[L]);return x.lock=new N(M),x})})})})})})};return Qr(rn(Rr("feed"))(ru(C)))(function(){return rn(r(l))(function(F){return ru(function(b){return AP(Rn(rj($P.create)(b)))})(F)})})}if(v instanceof $P){var T=function(F){if(F instanceof V)return V.value;if(F instanceof N)return new N(function(){var b={};for(var E in F.value0)({}).hasOwnProperty.call(F.value0,E)&&(b[E]=F.value0[E]);return b.elements=i(xd(s)(v.value0)(F.value0.elements)),b}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 156, column 5 - line 156, column 33): "+[F.constructor.name])},D=function(F){return function(b){var E={};for(var M in b)({}).hasOwnProperty.call(b,M)&&(E[M]=b[M]);return E.pages=Zv(T)(F)(b.pages),E.preloaded=Zv(T)(F)(b.preloaded),E}};return rn(HP)(function(F){return Qr(r(f(v.value0)))(function(){var b=p(v.value0)(oj(F.preloaded)(F.pages));return Qr(xa(D(b)))(function(){return aj(UP)(b)(JS.create(v.value0))})})})}if(v instanceof eg&&v.value0 instanceof jS){var g=function(F){if(F instanceof V)return V.value;if(F instanceof N)return new N(function(){var b={};for(var E in F.value0)({}).hasOwnProperty.call(F.value0,E)&&(b[E]=F.value0[E]);return b.pageHeight=v.value0.value0.height,b}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 165, column 5 - line 165, column 32): "+[F.constructor.name])},w=function(F){var b={};for(var E in F)({}).hasOwnProperty.call(F,E)&&(b[E]=F[E]);return b.pages=Zv(g)(v.value0.value0.id)(F.pages),b.preloaded=Zv(g)(v.value0.value0.id)(F.preloaded),b};return xa(w)}if(v instanceof eg&&v.value0 instanceof KS)return Qr(xa(function(F){return jp(YS(XS(v.value0.value0)))(F)}))(function(){return d(rn(Rr("feed"))(function(F){return Ie(ru)(F)(function(b){return rn(c(Xl(b)))(function(E){return rn(ij(function(M){return jp(YS(MP(M)(v.value0.value0)))(M)}))(function(M){return Qr(c(uj(function(S){return pp(E+S)(b)})(M.update.scroll)))(function(){return Qr(qr(M))(function(){return Qr(xa(function(S){var x={};for(var L in S)({}).hasOwnProperty.call(S,L)&&(x[L]=S[L]);return x.update={topLoad:V.value,bottomLoad:V.value,scroll:V.value},x}))(function(){return Qr(Ie(ru)(M.update.topLoad)(function(S){return rn(_(b)(S.value))(function(x){return ru(function(L){return xa(function(R){var A={};for(var I in R)({}).hasOwnProperty.call(R,I)&&(A[I]=R[I]);return A.preloaded=tE(L.id)(L)(M.preloaded),A})})(x)})}))(function(){return Qr(Ie(ru)(M.update.bottomLoad)(function(S){return rn(m(b)(S.value))(function(x){return ru(function(L){return xa(function(R){var A={};for(var I in R)({}).hasOwnProperty.call(R,I)&&(A[I]=R[I]);return A.pages=tE(L.id)(L)(R.pages),A})})(x)})}))(function(){return h(XD(M.feedParams.debounce))})})})})})})})})}))});if(v instanceof eg&&v.value0 instanceof QS)return xa(function(F){var b={};for(var E in F)({}).hasOwnProperty.call(F,E)&&(b[E]=F[E]);return b.pages=OP(v.value0.value0)(F.pages),b});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 120, column 1 - line 122, column 99): "+[v.constructor.name])}},yj=function(e){var t=yP(e.PageElement0());return function(n){var a=function(u){return sj(UP)(u.value0)(t)(u.value1)(eg.create)},h=pn([si("feed"),Vn(No(wD(et(-50)))(function(){return No(bD(et(50)))(function(){return No(Po(Rl(100)))(function(){return qv(Uv)})})}))])(IP(a)(RP(n.pages))),o=pn([Vn(No(wD(et(-50)))(function(){return No(bD(et(50)))(function(){return No(Po(Rl(100)))(function(){return No(Oo(-1))(function(){return No(fr(Ju))(function(){return Zo(Rl(-100))})})})})}))])([]),r=function(u){return pn([Vn(No(Oo(-2-cj(u.value0)|0))(function(){return No(W_(0))(function(){return fr(Ju)})}))])([a(u)])},l=pn([Vn(No(Oo(-2))(function(){return fr(Ju)}))])(IP(r)(RP(n.preloaded)));return pn([Vn(No(ba(Rl(100)))(function(){return No(Po(Rl(100)))(function(){return Ic(Jp)})}))])([h,o,l])}},qP=function(e){return function(t){return Xt({initialState:function(n){return{feedParams:n,pages:pr,preloaded:pr,lock:V.value,update:{topLoad:V.value,bottomLoad:V.value,scroll:V.value}}},render:yj(t),eval:Qt({receive:lt.receive,finalize:lt.finalize,handleAction:gj(t),handleQuery:dj(t),initialize:new N(kP.value)})})}};var og={suspend:uI,fork:KD,join:Zd,Monad0:function(){return ri},Functor1:function(){return pI}};var ag=function(e){return e.fork};var zP=ne,La=ne,GP=function(e){var t=at(e)($t);return function(n){return La(function(a){return t(n)(a.rendering)})}},Cj=ne,JP=function(e){return function(t){return La(function(n){return Cj(t(n.rendering))})}},bj=ne,ig=function(e){return function(t){return e(t)}},jP=function(e){return function(t){return function(n){return function(a){return function(){var o=cn({})(),r=cn(is)(),l=cn(is)(),u=cn(n)(),i=cn(new N(Ye.value))(),s=cn(new N(Ye.value))(),f=cn(V.value)(),p=cn(1)(),d=cn(new N(pr))(),c=cn(pr)(),_={component:e,state:e.initialState(t),refs:pr,children:is,childrenIn:r,childrenOut:l,selfRef:o,handlerRef:u,pendingQueries:i,pendingOuts:s,pendingHandlers:f,rendering:V.value,fresh:p,subscriptions:d,forks:c,lifecycleHandlers:a};return Ut(_)(o)(),bj(o)}}}}};var wj=at(nn)($t),Sj=wn(kr),Ej=ta(jw),Hn=ee(jt),Yt=Le(Cn),Tj=nt(rt),Aa=Tj(jt),ek=at(Ur),Mj=ek(qn),tk=ag(og),Fj=Gl(ts)(hc)(qn),_i=X(Ur),xj=z(rw),KP=zi(ts),Lj=z(xr),QP=dc(ts),Aj=z(ht),Ij=Wr(jw),Rj=R$(hc),$j=ti(wv),Hj=tF(qa),Oj=Wr(wv),XP=ek($t),YP=ta(wv),Pj=ta(Vt),kj=BI(Gi),Nj=Xu(Vt),Bj=function(e){return function(t){return function(){var a=Qe(t)(),h=Qe(a.subscriptions)();return wj(vv)(Sj(Ej(e))(h))()}}},ug=function(e){return function(t){return Hn(Yt(Qe(e)))(function(n){if(n instanceof V)return t;if(n instanceof N)return Yt(Ut(new N(new Xe(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},sg=function(e){return function(t){return Aa(Yt(Ut({initializers:Ye.value,finalizers:Ye.value})(e)))(function(){return Hn(Yt(t))(function(n){return Hn(Yt(Qe(e)))(function(a){return Aa(Mj(tk)(a.finalizers))(function(){return Aa(Fj(a.initializers))(function(){return _i(n)})})})})})}},Pc=tp(Sn(yo)(_e(X(nn)(void 0)))),ZP=function(e){return function(t){return Hn(Yt(Qe(t)))(function(n){return Yt(i0(function(a){return{state:a+1|0,value:e(a)}})(n.fresh))})}},dE=function(e){return function(t){return function(n){return Hn(Yt(Qe(t)))(function(a){return Ds(e)(t)(a.component.eval(new lf(xj(N.create)($R(n)),_e(V.value))))})}}},Ds=function(e){return function(t){return function(n){var a=function(o){return function(r){return Hn(Yt(Qe(o)))(function(l){return k$(function(u){var i=function(s){return KP(Hn(Yt(Qe(s)))(function(f){return La(function(p){return dE(e)(p.selfRef)(u.value1)})(f)}))};return Lj(u.value2)(QP(u.value0(hc)(i)(l.children)))})(r)})}},h=function(o){return function(r){if(r instanceof Lp)return Hn(Yt(Qe(o)))(function(l){var u=r.value0(l.state);if(tf(l.state)(u.value1))return _i(u.value0);if(hn)return Aa(Yt(Ut({component:l.component,refs:l.refs,children:l.children,childrenIn:l.childrenIn,childrenOut:l.childrenOut,selfRef:l.selfRef,handlerRef:l.handlerRef,pendingQueries:l.pendingQueries,pendingOuts:l.pendingOuts,pendingHandlers:l.pendingHandlers,rendering:l.rendering,fresh:l.fresh,subscriptions:l.subscriptions,forks:l.forks,lifecycleHandlers:l.lifecycleHandlers,state:u.value1})(o)))(function(){return Aa(sg(l.lifecycleHandlers)(e(l.lifecycleHandlers)(o)))(function(){return _i(u.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[u.constructor.name])});if(r instanceof Ap)return Hn(ZP(V$)(o))(function(l){return Hn(Yt(q$(r.value0(l))(function(u){return Pc(pE(e)(o)(new vc(u)))})))(function(u){return Hn(Yt(Qe(o)))(function(i){return Aa(Yt(no(Aj(Ij(l)(u)))(i.subscriptions)))(function(){return _i(r.value1(l))})})})});if(r instanceof Ip)return Aa(Yt(Bj(r.value0)(o)))(function(){return _i(r.value1)});if(r instanceof bc)return r.value0;if(r instanceof Rp)return a(o)(r.value0);if(r instanceof $p)return Hn(Yt(Qe(o)))(function(l){return Hn(Yt(Qe(l.handlerRef)))(function(u){return Aa(ug(l.pendingOuts)(u(r.value0)))(function(){return _i(r.value1)})})});if(r instanceof gv)return QP(Rj(Vw(function(){var l=Ds(e)(o);return function(u){return KP(l(u))}}())(r.value0)));if(r instanceof yv)return Hn(ZP(z$)(o))(function(l){return Hn(Yt(Qe(o)))(function(u){return Hn(Yt(cn(!1)))(function(i){return Hn(tk(Yd(Yt(function(){return no($j(l))(u.forks)(),Ut(!0)(i)()}))(Ds(e)(o)(r.value0))))(function(s){return Aa(Yt(Hj(Qe(i))(no(Oj(l)(s))(u.forks))))(function(){return _i(r.value1(l))})})})})});if(r instanceof Dv)return Hn(Yt(Qe(o)))(function(l){return Hn(Yt(Qe(l.forks)))(function(u){return Aa(XP(Zd)(YP(r.value0)(u)))(function(){return _i(r.value1)})})});if(r instanceof Cv)return Hn(Yt(Qe(o)))(function(l){return Hn(Yt(Qe(l.forks)))(function(u){return Aa(XP(ep(or("Cancelled")))(YP(r.value0)(u)))(function(){return _i(r.value1)})})});if(r instanceof Hp)return Hn(Yt(Qe(o)))(function(l){return _i(r.value1(Pj(r.value0)(l.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[r.constructor.name])}};return kj(h(t))(n)}}},pE=function(e){return function(t){return function(n){if(n instanceof nv)return Yt(Ie(no)(t)(ig(function(a){return{component:a.component,state:a.state,children:a.children,childrenIn:a.childrenIn,childrenOut:a.childrenOut,selfRef:a.selfRef,handlerRef:a.handlerRef,pendingQueries:a.pendingQueries,pendingOuts:a.pendingOuts,pendingHandlers:a.pendingHandlers,rendering:a.rendering,fresh:a.fresh,subscriptions:a.subscriptions,forks:a.forks,lifecycleHandlers:a.lifecycleHandlers,refs:Nj(_e(n.value1))(n.value0)(a.refs)}})));if(n instanceof vc)return Hn(Yt(Qe(t)))(function(a){return Ds(e)(t)(a.component.eval(new cf(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var Uj=ee(Sr),qj=nt(rt),sk=f_(nn)($t),ck=at(Ur)(qn),lk=ag(og),th=wn(Sr),fk=at(nn),dk=fk($t),nk=fk(Ui),rk=qj(jt),Vj=Gl(ts)(hc)(qn),eh=Le(Cn),ok=X(nn),hE=z(Pe),_E=X(Ur),mE=An(nn),zj=JP(Pe),Gj=ut(xr),ak=tv(nn),Jj=GP(nn),jj=gn(a_),Kj=ol(Pe),vE=ee(jt),Qj=Le(Pl),ik=function(){return cn({initializers:Ye.value,finalizers:Ye.value})}(),uk=function(e){return function(){var n=Qe(e)();return Ut(V.value)(e)(),sk(n)(function(){var a=ck(lk);return function(h){return Pc(a(Ji(h)))}}())()}},Xj=function(e){return function(){return th(dk(nk(vv)))(Qe(e.subscriptions))(),Ut(V.value)(e.subscriptions)(),th(nk(function(){var n=ep(or("finalized"));return function(a){return Pc(n(a))}}()))(Qe(e.forks))(),Ut(pr)(e.forks)()}},pk=function(e){return function(t){return function(n){var a=function(s){return function(f){return La(function(p){var d=Ds(r)(p.selfRef)(p.component.eval(new af(void 0)));return no(function(c){return{initializers:new Xe(rk(Vj(Ji(c.initializers)))(function(){return rk(d)(function(){return eh(function(){return uk(p.pendingQueries)(),uk(p.pendingOuts)()})})}),f),finalizers:c.finalizers}})(s)})}},h=function(s){return function(f){return function(p){return Zw(function(d){return function(){var _=ik(),m=jP(d)(p)(f)(_)(),v=Qe(s)();return Ut({initializers:Ye.value,finalizers:v.finalizers})(s)(),th(La(function(){var y=r(s);return function(C){return y(function(T){return T.selfRef}(C))}}()))(Qe(m))(),th(a(s)(v.initializers))(Qe(m))(),m}})}}},o=function(s){return function(f){return function(p){return function(d){return Yw(function(c){return function(){var m=hE(c.pop)(Qe(p))(),v=function(){if(m instanceof N){Ut(m.value0.value1)(p)();var C=Qe(m.value0.value0)();return La(function(T){return function(){return Ie(Ut)(T.handlerRef)(function(){var g=Ke(_E(void 0))(f);return function(w){return g(c.output(w))}}())(),Pc(Ds(r)(T.selfRef)(T.component.eval(new sf(c.input,void 0))))()}})(C)(),m.value0.value0}if(m instanceof V)return h(s)(function(){var T=Ke(_E(void 0))(f);return function(D){return T(c.output(D))}}())(c.input)(c.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[m.constructor.name])}(),y=hE(function(C){return Ns(c.get(C))})(Qe(d))();return mE(y)(rp("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),no(c.set(v))(d)(),Uj(Qe(v))(zj(function(C){if(C instanceof V)return lD("Halogen internal error: child was not initialized in renderChild");if(C instanceof N)return ok(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},r=function(s){return function(f){return function(){var d=Qe(f)(),c=hE(Su)(Qe(d.pendingHandlers))();mE(c)(Ut(new N(Ye.value))(d.pendingHandlers))(),Ut(is)(d.childrenOut)(),Ut(d.children)(d.childrenIn)();var _=function(){var T=ug(d.pendingHandlers),D=pE(r)(d.selfRef);return function(g){return T(Gj(D(g)))}}(),m=function(){var T=ug(d.pendingQueries);return function(D){return T(_(vc.create(D)))}}(),v=e.render(function(T){return Pc(_(T))})(o(s)(m)(d.childrenIn)(d.childrenOut))(d.component.render(d.state))(d.rendering)(),y=Qe(d.childrenOut)(),C=Qe(d.childrenIn)();return ak(C)(function(T){return function(){var g=Qe(T)();return Jj(e.removeChild)(g)(),l(s)(g)()}})(),Ie(no)(d.selfRef)(ig(function(T){return{component:T.component,state:T.state,refs:T.refs,childrenIn:T.childrenIn,childrenOut:T.childrenOut,selfRef:T.selfRef,handlerRef:T.handlerRef,pendingQueries:T.pendingQueries,pendingOuts:T.pendingOuts,pendingHandlers:T.pendingHandlers,fresh:T.fresh,subscriptions:T.subscriptions,forks:T.forks,lifecycleHandlers:T.lifecycleHandlers,rendering:new N(v),children:y}}))(),mE(c)(Ie(jj)(void 0)(function(T){return function(){var g=Qe(d.pendingHandlers)();Ut(new N(Ye.value))(d.pendingHandlers)(),dk(function(){var b=ck(lk);return function(E){return Pc(b(Ji(E)))}}())(g)();var w=Qe(d.pendingHandlers)(),F=Ke(!1)(MI)(w);return F?Kj(Ut(V.value)(d.pendingHandlers))(new Bt(void 0))():new Pt(void 0)}}))()}}},l=function(s){return La(function(f){return function(){Xj(f)();var d=Ds(r)(f.selfRef)(f.component.eval(new uf(void 0)));return no(function(c){return{initializers:c.initializers,finalizers:new Xe(d,c.finalizers)}})(s)(),ak(f.children)(function(c){return function(){var m=Qe(c)();return l(s)(m)()}})()}})},u=function(s){return function(f){return function(p){return vE(eh(Qe(s)))(function(d){return d?_E(V.value):dE(r)(f)(p)})}}},i=function(s){return function(f){return function(p){return sg(f)(function(){var c=Qe(s)();return c?void 0:(Ut(!0)(s)(),l(f)(p)(),La(function(_){return function(){var v=Qj(Qe(_.selfRef))();return sk(v.rendering)(e.dispose)()}})(p)())})}}};return vE(eh(ik))(function(s){return vE(eh(cn(!1)))(function(f){return sg(s)(function(){var d=Kn(),c=th(Qe)(h(s)(function(){var _=jn(d.listener);return function(m){return eh(_(m))}}())(n)(t))();return La(function(_){return ok({query:u(f)(_.selfRef),messages:d.emitter,dispose:i(f)(s)(c)})})(c)()})})})}}};var Ia=function(e){return function(t){return function(){return t[e]}}};var Zj=Ia("baseURI"),eK=Ia("ownerDocument"),hk=Ia("parentNode"),tK=Ia("parentElement");var nK=Ia("childNodes"),rK=Ia("firstChild"),oK=Ia("lastChild"),aK=Ia("previousSibling"),_k=Ia("nextSibling"),iK=Ia("nodeValue");var uK=Ia("textContent");function gE(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function cg(e){return function(t){return function(){t.appendChild(e)}}}function yE(e){return function(t){return function(){t.removeChild(e)}}}var mk=z(Pe);var DE=function(){var e=mk(fn);return function(t){return e(hk(t))}}();var vk=function(){var e=mk(fn);return function(t){return e(_k(t))}}();var CE=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}},bE=ut(Pe),dK=X(nn),pK=at(nn)($t),hK=In(),_K=An(nn),mK=ha(vd(vd(pa))),vK=he(me),gK=ee(jt),yK=Le(Cn),DK=z(Pe),CK=wn(Sr);var bK=function(e){return function(t){return function(n){return t instanceof N&&n instanceof N?bE(gE(e)(t.value0)(n.value0)):t instanceof V&&n instanceof N?bE(cg(e)(n.value0)):dK(void 0)}}},gk=function(e){return function(){var n=DE(e.node)();return pK(function(a){return yE(e.node)(a)})(n)()}},wK=function(e){return function(t){return function(n){var a=zP(function(l){return l.node}),h=function(l){return l instanceof N?wo(l.value0):void 0},o=function(l){var u=J$(hK)(l),i=CE("patch","Halogen.VDom.Driver",function(){return function(_,m){if(_ instanceof N){if(m instanceof ff)return wo(_.value0),f(100)(m.value0);if(m instanceof Tv){var v=bo(_.value0,m.value0);return xn(new Fn(Ar(v),new N(v),i(103),h))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[m.constructor.name])}return s(104)(m)}}),s=CE("render","Halogen.VDom.Driver",function(){return function(_){if(_ instanceof ff)return f(86)(_.value0);if(_ instanceof Tv){var m=u(_.value0);return xn(new Fn(Ar(m),new N(m),i(89),h))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[_.constructor.name])}}),f=CE("renderComponentSlot","Halogen.VDom.Driver",function(){return function(_){var m=Qe(t)(),v=m(_)(),y=a(v);return xn(new Fn(y,V.value,i(117),h))}}),p=i(91),d=s(82),c=f(109);return d},r=m$(e);return{buildWidget:o,buildAttributes:r,document:n}}}},SK=function(e){return function(t){var n=function(a){return function(h){return function(o){return function(r){if(r instanceof V)return function(){var u=cn(h)(),i=wK(a)(u)(e),s=Tp(i)(o),f=Ar(s);return bE(cg(f)($O(t)))(),{machine:s,node:f,renderChildRef:u}};if(r instanceof N)return function(){Ut(h)(r.value0.renderChildRef)();var u=DE(r.value0.node)(),i=vk(r.value0.node)(),s=bo(r.value0.machine,o),f=Ar(s);return _K(mK(tf)(r.value0.node)(f))(bK(f)(i)(u))(),{machine:s,node:f,renderChildRef:r.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[r.constructor.name])}}}};return{render:n,renderChild:vK,removeChild:gk,dispose:gk}}},wE=function(e){return function(t){return function(n){return gK(yK(DK(LO)(CK(bf)(ia))))(function(a){return pk(SK(a)(n))(e)(t)})}}};var EK=z(ji),TK=z($n),MK=Dn(rm(Cr)),FK=tv(np(Cr)),xK=_s(),LK=ev(),AK=Vr(),IK=Ym(),SE=function(){function e(){}return e.value=new e,e}(),EE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),TE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dk=function(e){return e},nh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),oh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ah=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ih=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),uh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var RK={lift:function(e){return function(t){return Dk(dt(rh.create(t)))}}},Ck=wt(RK),$K=Ql;var Ff=function(e){return{liftEffect:function(){var t=Ck(e.Monad0()),n=Le(e);return function(a){return t(n(a))}}(),Monad0:function(){return $K}}},bk=function(e){var t=e.MonadEffect0(),n=Ff(t);return{liftAff:function(){var a=Ck(t.Monad0()),h=bn(e);return function(o){return a(h(o))}}(),MonadEffect0:function(){return n}}},wk=ji,Sk=function(e){var t=z(e);return{map:function(n){return function(a){if(a instanceof nh)return new nh(EK(n)(a.value0));if(a instanceof rh)return new rh(t(n)(a.value0));if(a instanceof oh)return new oh(function(h){return n(a.value0(h))});if(a instanceof ah)return new ah(a.value0,n(a.value1));if(a instanceof ih)return new ih(a.value0,n(a.value1));if(a instanceof lg)return new lg(a.value0,n(a.value1));if(a instanceof uh)return new uh(TK(n)(a.value0));if(a instanceof fg)return new fg(function(h){return n(a.value0(h))});if(a instanceof sh)return new sh(a.value0,n(a.value1));throw new Error("Failed pattern match at Halogen.XShell.Free (line 71, column 1 - line 80, column 60): "+[n.constructor.name,a.constructor.name])}}}},kc=ur,HK=ee(kc),Ek=up,Cs=_r,Nt=function(e){return Dk(dt(nh.create(e)))},Tk=function(e){var t=function(n){return MK(ln(n.window))};return jp(FK(e)(t))([])},Mk=function(e){return dt(new ah(e,void 0))};var Fk=function(e){return dt(new sh(e,void 0))},ME=function(){return function(e){var t=xK(e),n=LK(e);return function(a){var h=t(a),o=n(a);return function(){return function(r){return function(l){return function(u){return function(i){return function(s){var f=h(r)(l)(u)(i)(function(p){return TE.create(s(p))});return Fk(o(r)(l)({window:f}))}}}}}}}}},OK=function(e){return dt(new uh(e))},FE=function(){return function(e){var t=AK(e);return function(n){var a=t(n);return function(){return function(h){return function(o){return function(r){return OK(a(h)(o)(r))}}}}}}},Ra=function(e){return dt(new ih(e,void 0))},To=function(){return dt(new oh(he(me)))}(),On=function(e){return HK(To)(function(t){return Mk(e(t))})},xE=function(){return function(e){var t=IK(e);return function(n){var a=t(n);return function(){return function(h){return function(o){return Fk(function(r){return Ke(r)(_n)(a(h)(o)(r))})}}}}}};var NK=Mt(Gn),BK=Jt(Hu);var LE=BK(NK("background-color"));var Wt=Mt(rr),xk=function(){function e(){}return e.value=new e,e}(),UK=function(){function e(){}return e.value=new e,e}(),Lk=function(){function e(){}return e.value=new e,e}(),qK=function(){function e(){}return e.value=new e,e}(),VK=function(){function e(){}return e.value=new e,e}(),zK=function(){function e(){}return e.value=new e,e}(),Ak=function(){function e(){}return e.value=new e,e}(),AE=function(){function e(){}return e.value=new e,e}(),GK=function(){function e(){}return e.value=new e,e}(),JK=function(){function e(){}return e.value=new e,e}(),jK=function(){function e(){}return e.value=new e,e}(),KK=function(){function e(){}return e.value=new e,e}(),QK=function(){function e(){}return e.value=new e,e}(),XK=function(){function e(){}return e.value=new e,e}(),YK=function(){function e(){}return e.value=new e,e}(),ZK=function(){function e(){}return e.value=new e,e}(),eQ=function(){function e(){}return e.value=new e,e}(),tQ=function(){function e(){}return e.value=new e,e}(),nQ=function(){function e(){}return e.value=new e,e}(),rQ=function(){function e(){}return e.value=new e,e}(),oQ=function(){function e(){}return e.value=new e,e}(),aQ=function(){function e(){}return e.value=new e,e}(),iQ=function(){function e(){}return e.value=new e,e}(),uQ=function(){function e(){}return e.value=new e,e}(),sQ=function(){function e(){}return e.value=new e,e}(),cQ=function(){function e(){}return e.value=new e,e}(),lQ=function(){function e(){}return e.value=new e,e}(),fQ=function(){function e(){}return e.value=new e,e}(),dQ=function(){function e(){}return e.value=new e,e}(),pQ=function(){function e(){}return e.value=new e,e}(),hQ=function(){function e(){}return e.value=new e,e}(),_Q=function(){function e(){}return e.value=new e,e}(),mQ=function(){function e(){}return e.value=new e,e}();var vQ={value:function(e){if(e instanceof xk)return Wt("default");if(e instanceof UK)return Wt("help");if(e instanceof Lk)return Wt("pointer");if(e instanceof qK)return Wt("progress");if(e instanceof VK)return Wt("wait");if(e instanceof zK)return Wt("cell");if(e instanceof Ak)return Wt("crosshair");if(e instanceof AE)return Wt("text");if(e instanceof GK)return Wt("vertical-text");if(e instanceof JK)return Wt("alias");if(e instanceof jK)return Wt("copy");if(e instanceof KK)return Wt("move");if(e instanceof QK)return Wt("no-drop");if(e instanceof XK)return Wt("not-allowed");if(e instanceof YK)return Wt("grab");if(e instanceof ZK)return Wt("grabbing");if(e instanceof eQ)return Wt("all-scroll");if(e instanceof tQ)return Wt("col-resize");if(e instanceof nQ)return Wt("row-resize");if(e instanceof rQ)return Wt("n-resize");if(e instanceof oQ)return Wt("e-resize");if(e instanceof aQ)return Wt("s-resize");if(e instanceof iQ)return Wt("w-resize");if(e instanceof uQ)return Wt("ne-resize");if(e instanceof sQ)return Wt("nw-resize");if(e instanceof cQ)return Wt("se-resize");if(e instanceof lQ)return Wt("sw-resize");if(e instanceof fQ)return Wt("ew-resize");if(e instanceof dQ)return Wt("ns-resize");if(e instanceof pQ)return Wt("nesw-resize");if(e instanceof hQ)return Wt("nwse-resize");if(e instanceof _Q)return Wt("zoom-in");if(e instanceof mQ)return Wt("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var IE=function(){return Lk.value}();var RE=function(){return xk.value}(),Nc=Jt(vQ)(Mt(Gn)("cursor")),Ik=function(){return Ak.value}();var yQ=Mt(Gn);var Rk=Jt(Hu)(yQ("color"));var $E=Mt(rr),CQ=Mt(Gn);var bQ={value:function(e){return e}},$k=$E("underline"),pg=Jt(bQ)(CQ("text-decoration")),Hk=$E("overline");var Ok=$E("line-through");var be=nt(rt)(Yo),Qn=Jt(Ou),zn=Mt(Gn),SQ=vD(Ou),EQ=De(Al),TQ=Mt(R_),MQ=Jt(oc),HE=function(){var e=ft(qt)(yt("xterm")),t=ft(qt)(yt("xterm-viewport")),n=be(Ft(ft(qt)(yt("xterm-underline-1")))(pg($k)))(function(){return be(Ft(ft(qt)(yt("xterm-underline-2")))(Qn(zn("text-decoration"))("double underline")))(function(){return be(Ft(ft(qt)(yt("xterm-underline-3")))(Qn(zn("text-decoration"))("wavy underline")))(function(){return be(Ft(ft(qt)(yt("xterm-underline-4")))(Qn(zn("text-decoration"))("dotted underline")))(function(){return Ft(ft(qt)(yt("xterm-underline-5")))(Qn(zn("text-decoration"))("dashed underline"))})})})}),a=ft(qt)(yt("xterm-scroll-area")),h=ft(qt)(yt("xterm-screen")),o=ft(qt)(yt("xterm-decoration-overview-ruler")),r=be(Ft(ft(qt)(yt("xterm-overline")))(pg(Hk)))(function(){return be(Ft(ft(ft(qt)(yt("xterm-underline-1")))(yt("xterm-overline")))(Qn(zn("text-decoration"))("overline underline")))(function(){return be(Ft(ft(ft(qt)(yt("xterm-underline-2")))(yt("xterm-overline")))(Qn(zn("text-decoration"))("overline double underline")))(function(){return be(Ft(ft(ft(qt)(yt("xterm-underline-3")))(yt("xterm-overline")))(Qn(zn("text-decoration"))("overline wavy underline")))(function(){return be(Ft(ft(ft(qt)(yt("xterm-underline-4")))(yt("xterm-overline")))(Qn(zn("text-decoration"))("overline dotted underline")))(function(){return Ft(ft(ft(qt)(yt("xterm-underline-5")))(yt("xterm-overline")))(Qn(zn("text-decoration"))("overline dashed underline"))})})})})}),l=ft(qt)(yt("xterm-message")),u=ft(qt)(yt("live-region")),i=ft(qt)(yt("xterm-helper-textarea")),s=ft(qt)(yt("xterm-helpers")),f=ft(qt)(yt("xterm-dim")),p=ft(qt)(yt("xterm-decoration-top")),d=ft(qt)(yt("xterm-decoration-container")),c=ft(qt)(yt("xterm-decoration")),_=ft(qt)(yt("composition-view")),m=ft(qt)(yt("xterm-char-measure-element")),v=be(fr(Ca))(function(){return be(Wi(et(0)))(function(){return be(Zo(et(0)))(function(){return be(SD(et(0)))(function(){return be(U_(et(0)))(function(){return be(Oo(10))(function(){return be(Qn(zn("color"))("transparent"))(function(){return Qn(zn("pointer-events"))("none")})})})})})})}),y=ft(qt)(yt("xterm-accessibility"));return be(Ft(e)(be(Nc(AE.value))(function(){return be(fr(Ju))(function(){return SQ(EQ(Nd)(TQ("user-select")))("none")})})))(function(){return be(Ft(ft(e)(yt("focus")))(Qn(zn("outline"))("none")))(function(){return be(Ft(ft(e)(jL("focus")))(Qn(zn("outline"))("none")))(function(){return be(Ft(Jn(e)(s))(be(fr(Ca))(function(){return be(Zo(et(0)))(function(){return Oo(5)})})))(function(){return be(Ft(Jn(e)(i))(be(q_(et(0))(et(0))(et(0))(et(0)))(function(){return be(MQ(zn("border"))(0))(function(){return be(CA(et(0))(et(0))(et(0))(et(0)))(function(){return be(fr(Ca))(function(){return be(W_(0))(function(){return be(Wi(aD(-9999)))(function(){return be(Zo(et(0)))(function(){return be(ba(et(0)))(function(){return be(Po(et(0)))(function(){return be(Oo(-5))(function(){return be(Qn(zn("whitespace"))("nowrap"))(function(){return be(Ic(Jp))(function(){return Qn(zn("resize"))("none")})})})})})})})})})})})})))(function(){return be(Ft(Jn(e)(_))(be(LE(ja))(function(){return be(Rk(RL))(function(){return be(Da(pA))(function(){return be(fr(Ca))(function(){return be(Qn(zn("white-space"))("nowrap"))(function(){return Oo(1)})})})})})))(function(){return be(Ft(Jn(e)(ft(_)(yt("active"))))(Da(hA)))(function(){return be(Ft(Jn(e)(t))(be(LE(ja))(function(){return be(qv(Uv))(function(){return be(Nc(RE))(function(){return be(fr(Ca))(function(){return be(U_(et(0)))(function(){return be(Wi(et(0)))(function(){return be(Zo(et(0)))(function(){return SD(et(0))})})})})})})})))(function(){return be(Ft(Jn(e)(h))(fr(Ju)))(function(){return be(Ft(Jn(e)(Jn(h)(O_("canvas"))))(be(fr(Ca))(function(){return be(Wi(et(0)))(function(){return Zo(et(0))})})))(function(){return be(Ft(Jn(e)(a))(Qn(zn("visibility"))("hidden")))(function(){return be(Ft(m)(be(Da(dA))(function(){return be(Qn(zn("visibility"))("hidden"))(function(){return be(fr(Ca))(function(){return be(Zo(et(0)))(function(){return be(Wi(aD(-9999)))(function(){return Qn(zn("line-height"))("normal")})})})})})))(function(){return be(Ft(ft(e)(yt("enable-mouse-events")))(Nc(RE)))(function(){return be(Ft(ft(e)(yt("xterm-cursor-pointer")))(Nc(IE)))(function(){return be(Ft(Jn(e)(ft(qt)(yt("xterm-cursor-pointer"))))(Nc(IE)))(function(){return be(Ft(ft(ft(e)(yt("column-select")))(yt("focus")))(Nc(Ik)))(function(){return be(Ft(Jn(e)(y))(v))(function(){return be(Ft(Jn(e)(l))(v))(function(){return be(Ft(Jn(e)(u))(be(fr(Ca))(function(){return be(Wi(et(-9999)))(function(){return be(ba(et(1)))(function(){return be(Po(et(1)))(function(){return Ic(Jp)})})})})))(function(){return be(Ft(f)(Qn(zn("opacity"))("1 !important")))(function(){return be(n)(function(){return be(r)(function(){return be(Ft(ft(qt)(yt("xterm-strikethrough")))(pg(Ok)))(function(){return be(Ft(Jn(Jn(h)(d))(c))(be(Oo(6))(function(){return fr(Ca)})))(function(){return be(Ft(Jn(Jn(h)(d))(ft(c)(yt("xterm-decoration-top-layer"))))(Oo(7)))(function(){return be(Ft(o)(be(Oo(8))(function(){return be(fr(Ca))(function(){return be(Zo(et(0)))(function(){return be(U_(et(0)))(function(){return Qn(zn("pointer-events"))("none")})})})})))(function(){return Ft(p)(be(Oo(2))(function(){return fr(Ju)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var Pk=e=>()=>e.type,OE=e=>()=>e.cursorY,PE=e=>()=>e.cursorX,kE=e=>()=>e.viewportY,NE=e=>()=>e.baseY,BE=e=>()=>e.length,kk=e=>t=>()=>e.getLine(t),WE=e=>()=>e.getNullCell();var xf=function(e){return dp(e)?V.value:new N(Cm(e))};var LQ=z(Pe),AQ=function(){function e(){}return e.value=new e,e}(),IQ=function(){function e(){}return e.value=new e,e}(),Nk=function(e){return function(t){return LQ(xf)(kk(e)(t))}},Bk=function(e){return function(){var n=Pk(e)();return n==="normal"?AQ.value:IQ.value}};var qE=e=>()=>e.isWrapped,VE=e=>()=>e.length;var gg=he(me),mi=z(Pe),zE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_g=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),KE=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),QE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),OQ={map:function(e){return function(t){if(t instanceof zE)return new zE(function(n){return e(t.value0(n))});if(t instanceof hg)return new hg(function(n){return e(t.value0(n))});if(t instanceof GE)return new GE(function(n){return e(t.value0(n))});if(t instanceof JE)return new JE(function(n){return e(t.value0(n))});if(t instanceof jE)return new jE(function(n){return e(t.value0(n))});if(t instanceof _g)return new _g(function(n){return e(t.value0(n))});if(t instanceof mg)return new mg(t.value0,function(n){return e(t.value1(n))});if(t instanceof KE)return new KE(t.value0,function(n){return e(t.value1(n))});if(t instanceof vg)return new vg(t.value0,function(n){return e(t.value1(n))});if(t instanceof QE)return new QE(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},PQ=ra(OQ);var Wk=function(e){var t=e.Monad0(),n=ee(qi(t.Bind1())),a=Mr(Zu(t)),h=Le(ni(e));return function(o){var r=function(l){if(l instanceof zE)return n(a)(function(u){return h(mi(l.value0)(Bk(u)))});if(l instanceof hg)return n(a)(function(u){return h(mi(l.value0)(PE(u)))});if(l instanceof GE)return n(a)(function(u){return h(mi(l.value0)(OE(u)))});if(l instanceof JE)return n(a)(function(u){return h(mi(l.value0)(kE(u)))});if(l instanceof jE)return n(a)(function(u){return h(mi(l.value0)(NE(u)))});if(l instanceof _g)return n(a)(function(u){return h(mi(l.value0)(BE(u)))});if(l instanceof mg)return n(a)(function(u){return h(mi(l.value1)(Nk(u)(l.value0)))});if(l instanceof KE)return h(mi(l.value1)(qE(l.value0)));if(l instanceof vg)return h(mi(l.value1)(VE(l.value0)));if(l instanceof QE)return n(a)(function(u){return h(mi(l.value0)(WE(u)))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 19, column 5 - line 21, column 40): "+[l.constructor.name])};return PQ(es(o))(r)}},XE=function(e){return dt(new vg(e,gg))};var YE=function(e){return dt(new mg(e,gg))};var ZE=function(){return dt(new hg(gg))}();var eT=function(){return dt(new _g(gg))}();var tT=e=>()=>e.cursorBlink,nT=e=>t=>()=>e.cursorBlink=t,rT=e=>()=>e.fontFamily,oT=e=>t=>()=>e.fontFamily=t;var qk=tu("fontFamily");var Vk=tu("cursorBlink");var Gk=z(Pe),VQ=nt(rt),Jk=he(me),yg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),aT=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zQ={map:function(e){return function(t){if(t instanceof yg)return new yg(function(n){return e(t.value0(n))});if(t instanceof Dg)return new Dg(t.value0,e(t.value1));if(t instanceof Cg)return new Cg(function(n){return e(t.value0(n))});if(t instanceof aT)return new aT(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},GQ=ra(zQ);var $a=function(e){return dt(new Dg(e,void 0))},jk=function(e){var t=e.Monad0(),n=qi(t.Bind1()),a=ee(n),h=Mr(Zu(t)),o=Le(ni(e)),r=VQ(n),l=X(Xd(t.Applicative0()));return function(u){var i=function(s){if(s instanceof yg)return a(h)(function(f){return o(Gk(s.value0)(tT(f)))});if(s instanceof Dg)return a(h)(function(f){return r(o(nT(f)(s.value0)))(function(){return l(s.value1)})});if(s instanceof Cg)return a(h)(function(f){return o(Gk(s.value0)(rT(f)))});if(s instanceof aT)return a(h)(function(f){return r(o(oT(f)(s.value0)))(function(){return l(s.value1)})});throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 19, column 5 - line 21, column 49): "+[s.constructor.name])};return GQ(es(u))(i)}},iT=function(){return dt(new Cg(Jk))}(),uT=function(){return dt(new yg(Jk))}();var Qk=bi(Kk(),1),wg=()=>new Qk.FitAddon;var Yk=bi(Xk(),1),Eg=()=>new Yk.WebglAddon;var e2=bi(Zk(),1),Mg=()=>new e2.WebLinksAddon;var t2={addon:ne},n2={addon:ne},r2={addon:he(me)};var Fg=function(e){return e.addon};var dT=e=>e.active,pT=e=>e.normal,hT=e=>e.alternate;var u2=bi(i2(),1),s2=e=>t=>()=>new u2.Terminal(e,t),c2=e=>()=>e.element,l2=e=>()=>e.textarea,mT=e=>()=>e.rows,vT=e=>()=>e.cols,ch=e=>e.buffer,gT=e=>()=>e.markers;var yT=e=>e.options,DT=e=>t=>()=>e.onBell(t),CT=e=>t=>()=>e.onBinary(n=>t(n)());var bT=e=>t=>()=>e.onData(n=>t(n)()),wT=e=>t=>()=>e.onKey(n=>t(n)()),ST=e=>t=>()=>e.onLineFeed(t),ET=e=>t=>()=>e.onRender(n=>t(n)()),TT=e=>t=>()=>e.onWriteParsed(t),MT=e=>t=>()=>e.onResize(n=>t(n)()),FT=e=>t=>()=>e.onScroll(n=>t(n)()),xT=e=>t=>()=>e.onSelectionChange(t),LT=e=>t=>()=>e.onTitleChange(n=>t(n)());var AT=e=>t=>()=>e.open(t);var IT=e=>t=>n=>()=>e.write(t,n),RT=e=>t=>n=>()=>e.writeln(t,n);var f2=e=>t=>()=>e.loadAddon(t);var d2=z(Pe);var p2=function(){var e=d2(xf);return function(t){return e(l2(t))}}();var h2=function(e){return function(t){return s2(Rc(e))(Rc(t))}},_2=function(e){var t=Fg(e);return function(n){return function(a){return f2(n)(t(a))}}};var m2=function(){var e=d2(xf);return function(t){return e(c2(t))}}();var Lg=z(ji),Wg=he(me),ou=z(Pe),HT=Wk(Pl)(a_),v2=nt(rt),Ag=Ud(XL),uX=_2(r2),Ig=ee(ur),OT=v2(ur),Lf=An(_r),Rg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),PT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$g=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),NT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),BT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),WT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),UT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Og=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Pg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ng=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sX={map:function(e){return function(t){if(t instanceof Rg)return new Rg(Lg(e)(t.value0));if(t instanceof PT)return new PT(function(n){return e(t.value0(n))});if(t instanceof kT)return new kT(function(n){return e(t.value0(n))});if(t instanceof $g)return new $g(function(n){return e(t.value0(n))});if(t instanceof NT)return new NT(function(n){return e(t.value0(n))});if(t instanceof Hg)return new Hg(Lg(e)(t.value0));if(t instanceof BT)return new BT(Lg(e)(t.value0));if(t instanceof WT)return new WT(Lg(e)(t.value0));if(t instanceof UT)return new UT(function(n){return e(t.value0(n))});if(t instanceof Og)return new Og(t.value0,e(t.value1));if(t instanceof Pg)return new Pg(t.value0,e(t.value1));if(t instanceof qT)return new qT(function(n){return e(t.value0(n))});if(t instanceof kg)return new kg(function(n){return e(t.value0(n))});if(t instanceof Ng)return new Ng(function(n){return e(t.value0(n))});if(t instanceof Bg)return new Bg(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},cX=ra(sX),Xn=function(e){return dt(new Pg(e,void 0))},on=function(e){return dt(new Og(e,void 0))};var Ug=function(e){return dt(new Hg(e))},g2=function(){return dt(new kg(Wg))}(),y2=function(){return dt(new Ng(Wg))}();var D2=function(e){var t=e.MonadEffect0(),n=t.Monad0(),a=qi(n.Bind1()),h=ee(a),o=Mr(Zu(n)),r=ni(t),l=jk(r),u=Le(r),i=bn(am(e)),s=v2(a);return function(f){var p=es(f),d=l(p),c=function(_){if(_ instanceof Rg)return h(o)(function(m){return Ea(d(_.value0))(yT(m))});if(_ instanceof PT)return h(o)(function(m){return u(ou(_.value0)(m2(m)))});if(_ instanceof kT)return h(o)(function(m){return u(ou(_.value0)(p2(m)))});if(_ instanceof $g)return h(o)(function(m){return u(ou(_.value0)(mT(m)))});if(_ instanceof NT)return h(o)(function(m){return u(ou(_.value0)(vT(m)))});if(_ instanceof Hg)return h(o)(function(m){return u(Ea(HT(_.value0))(dT(ch(m))))});if(_ instanceof BT)return h(o)(function(m){return u(Ea(HT(_.value0))(pT(ch(m))))});if(_ instanceof WT)return h(o)(function(m){return u(Ea(HT(_.value0))(hT(ch(m))))});if(_ instanceof UT)return h(o)(function(m){return u(ou(_.value0)(gT(m)))});if(_ instanceof Og)return h(o)(function(m){return h(i(WS))(function(v){return s(u(IT(m)(_.value0)(QD(Kp(_.value1)(v)))))(function(){return i(BS(v))})})});if(_ instanceof Pg)return h(o)(function(m){return h(i(WS))(function(v){return s(u(RT(m)(_.value0)(QD(Kp(_.value1)(v)))))(function(){return i(BS(v))})})});if(_ instanceof qT)return u(ou(function(m){return _.value0(t_(m))})(Ag(wg)));if(_ instanceof kg)return u(ou(function(m){return _.value0(t_(m))})(Ag(Mg)));if(_ instanceof Ng)return u(ou(function(m){return _.value0(t_(m))})(Ag(Eg)));if(_ instanceof Bg)return h(o)(function(m){return u(ou(function(v){return _.value1(RF(v))})(Ag(uX(m)(_.value0))))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 32, column 5 - line 34, column 55): "+[_.constructor.name])};return cX(p)(c)}},qg=function(){return dt(new $g(Wg))}(),Bo=function(e){return dt(Rg.create(e))};var VT=function(e){var t=Fg(e);return function(n){return dt(new Bg(t(n),Wg))}},lX=VT(n2),fX=VT(t2),zT=function(e){return Ig(y2)(function(t){return OT(function(){if(t instanceof V)return Lf(e)(Xn("WebGL Addon unavailable"));if(t instanceof N)return OT(Lf(e)(on("Loading WebGL ")))(function(){return Ig(lX(t.value0))(function(n){return Lf(e)(function(){return Xn(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return Ig(g2)(function(n){if(n instanceof V)return Lf(e)(Xn("WebLinks Addon unavailable"));if(n instanceof N)return OT(Lf(e)(on("Loading WebLinks ")))(function(){return Ig(fX(n.value0))(function(a){return Lf(e)(function(){return Xn(a?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var C2=e=>()=>e.dispose();var b2={toDisposable:he(me)},pX=function(e){return e.toDisposable},w2=function(e){return{dispose:function(){var t=pX(e);return function(n){return C2(t(n))}}()}},S2=function(e){return e.dispose};var xt=ee(zt),GT=Fr(Ht),_X=z(xr),mX=D2(ns)(Gi),Ha=Dn(Ht),Oa=nt(rt)(zt),vX=at(nn)(mt),gX=S2(w2(b2)),JT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),DX=function(){function e(){}return e.value=new e,e}(),CX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jT=function(){function e(){}return e.value=new e,e}(),bX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wX=function(){function e(){}return e.value=new e,e}(),SX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),EX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),TX=function(){function e(){}return e.value=new e,e}(),MX=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),E2=function(){function e(){}return e.value=new e,e}(),T2=function(){function e(){}return e.value=new e,e}(),sa=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),FX=function(e){return function(t){return co([fO(HE),pn([si("terminal")])([])])}},xX=function(e){var t=bn(ii(e));return function(n){return xt(GT)(function(a){return t(_X(N.create)(Ea(mX(n))(a.terminal)))})}},LX=function(e){var t=Le(Ln(e.MonadEffect0())),n=function(d){return xt(t(Kn))(function(c){return xt(t(TT(d)(jn(c.listener)(new sa(wX.value)))))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})},a=function(d){return xt(t(Kn))(function(c){return xt(t(LT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(MX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})},h=function(d){return xt(t(Kn))(function(c){return xt(t(xT(d)(jn(c.listener)(new sa(TX.value)))))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})},o=function(d){return xt(t(Kn))(function(c){return xt(t(FT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(EX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})},r=function(d){return xt(t(Kn))(function(c){return xt(t(MT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(SX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})},l=function(d){return xt(t(Kn))(function(c){return xt(t(ET(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(bX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})},u=function(d){return xt(t(Kn))(function(c){return xt(t(ST(d)(jn(c.listener)(new sa(jT.value)))))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})},i=function(d){return xt(t(Kn))(function(c){return xt(t(wT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(CX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})},s=function(d){return xt(t(Kn))(function(c){return xt(t(bT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(JT.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})},f=function(d){return xt(t(Kn))(function(c){return xt(t(CT(d)(function(){var _=jn(c.listener);return function(m){return _(sa.create(yX.create(m)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})},p=function(d){return xt(t(Kn))(function(c){return xt(t(DT(d)(jn(c.listener)(new sa(DX.value)))))(function(_){return xt(Rn(c.emitter))(function(){return Ha(function(m){var v={};for(var y in m)({}).hasOwnProperty.call(m,y)&&(v[y]=m[y]);return v.disposables=ln(_)(m.disposables),v})})})})};return function(d){if(d instanceof E2)return xt(Rr("terminal"))(function(c){if(c instanceof V)return t(oi("no terminal element"));if(c instanceof N)return xt(GT)(function(_){return Oa(t(AT(_.terminal)(c.value0)))(function(){return Oa(p(_.terminal))(function(){return Oa(f(_.terminal))(function(){return Oa(i(_.terminal))(function(){return Oa(u(_.terminal))(function(){return Oa(l(_.terminal))(function(){return Oa(n(_.terminal))(function(){return Oa(r(_.terminal))(function(){return Oa(o(_.terminal))(function(){return Oa(h(_.terminal))(function(){return Oa(a(_.terminal))(function(){return s(_.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.XTerm (line 117, column 5 - line 132, column 28): "+[c.constructor.name])});if(d instanceof T2)return xt(GT)(function(c){return t(vX(gX)(c.disposables))});if(d instanceof sa)return qr(d.value0);throw new Error("Failed pattern match at Halogen.XTerm (line 114, column 16 - line 136, column 23): "+[d.constructor.name])}},M2=function(e){return Xt({initialState:function(t){return{terminal:t,disposables:[]}},render:FX(e),eval:Qt({receive:lt.receive,handleAction:LX(e),handleQuery:xX(e),initialize:new N(E2.value),finalize:new N(T2.value)})})};var AX=De(sn),I2={reflectSymbol:function(){return"terminal"}},IX=_s()(I2)(tn),R2=UD(wc),KT=ee(R2),QT=wt(Q_)(wc),RX=Vr()(I2)(tn),$X=X(Kt),x2=z($n),HX=wt(of),$2=Fr(Ht),Af=X(VD(wc)),zg=nt(rt)(R2),H2=jA(Ht),XT=Dn(H2),OX=Fr(H2),PX=JA(Op),L2=ee(zt),kX=De(aP),NX=st(iP),BX=Dn(Ht),A2=ut($n),WX=X(Cs),O2=function(){return Dt.value}(),UX=function(e){var t=M2(e);return function(n){return co(AX([function(){if(n.terminal instanceof V)return co([]);if(n.terminal instanceof N)return IX(O2)(void 0)(t)(n.terminal.value0)(EE.create);throw new Error("Failed pattern match at Halogen.XShell (line 49, column 8 - line 51, column 80): "+[n.terminal.constructor.name])}()])(Tk(n.windows)))}},P2=function(e){var t=e.MonadEffect0().Monad0(),n=HX(t),a=ra(Sk(t.Bind1().Apply0().Functor0()))(PX);return function(h){var o=function(r){if(r instanceof nh)return KT(QT(RX(O2)(void 0)(r.value0)))(function(l){return $X(l)});if(r instanceof rh)return x2(N.create)(n(r.value0));if(r instanceof oh)return KT(QT($2))(function(l){return Af(r.value0(l.shell))});if(r instanceof ah)return zg(XT(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.shell=r.value0,u}))(function(){return Af(r.value1)});if(r instanceof ih)return zg(XT(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.interpreter=r.value0,u}))(function(){return Af(r.value1)});if(r instanceof lg)return zg(QT(qr(r.value0)))(function(){return Af(r.value1)});if(r instanceof uh)return x2(N.create)(r.value0);if(r instanceof fg)return KT(OX)(function(l){return Af(r.value0(l.windows))});if(r instanceof sh)return zg(XT(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.windows=r.value0(l.windows),u}))(function(){return Af(r.value1)});throw new Error("Failed pattern match at Halogen.XShell (line 80, column 5 - line 82, column 22): "+[r.constructor.name])};return GA(a(o)(h))}},qX=function(e){var t=Le(Ln(e.MonadEffect0())),n=P2(e);return function(a){if(a instanceof SE)return L2(t(h2(kX(Qp(qk)('"Cascadia Code", Menlo, monospace'))(Qp(Vk)(!0)))(NX)))(function(h){return BX(function(o){var r={};for(var l in o)({}).hasOwnProperty.call(o,l)&&(r[l]=o[l]);return r.terminal=new N(h),r})});if(a instanceof EE)return L2($2)(function(h){return A2(n(h.interpreter(a.value0)))});if(a instanceof TE)return A2(n(a.value0));throw new Error("Failed pattern match at Halogen.XShell (line 61, column 16 - line 70, column 35): "+[a.constructor.name])}},Gg=function(e){return Xt({initialState:function(t){return{shell:t,interpreter:_e(WX(void 0)),terminal:V.value,windows:is}},render:UX(e),eval:Qt({receive:lt.receive,finalize:lt.finalize,handleAction:qX(e),handleQuery:P2(e),initialize:new N(SE.value)})})};var au=ee(zt),VX=$o(Ht),If=ut($n),U2=Vr(),q2={reflectSymbol:function(){return"shell"}},lh=U2(q2)(tn),YT=Ho(Ht),V2=nt(rt),Rf=V2(zt),ZT=Dn(Ht),z2={reflectSymbol:function(){return"feed"}},e1=U2(z2)(cd),N2=he(me),B2=at(Kt)($t),t1=Me(_o),zX=An(Kt),GX=Me(fl(to)),JX=$i(BH),jX=Me(e_(_o)),fh=V2(Yo),KX=_s()(z2)(cd),QX=qP(FS)(EO(ns)),XX=So()(q2)(tn),YX=Gg(ns),n1=Sc(w$);var G2=function(){function e(){}return e.value=new e,e}(),r1=function(){function e(){}return e.value=new e,e}(),J2=function(){function e(){}return e.value=new e,e}(),W2=function(){function e(){}return e.value=new e,e}(),j2=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dh=function(e){return Nt(Xn(e))},$f=function(){return Dt.value}(),Jg=function(){return Dt.value}(),K2=function(e){var t=Le(Ln(e));return function(n){if(n instanceof G2)return au(VX(function(a){var h={};for(var o in a)({}).hasOwnProperty.call(a,o)&&(h[o]=a[o]);return h.top=!a.top,h}))(function(a){var h=function(){return a.top?"top loading/unloading enabled":"top loading/unloading disabled"}();return If(lh($f)(void 0)(dh(h)))});if(n instanceof r1)return au(YT(function(a){return a.log}))(function(a){if(a instanceof N)return Rf(ZT(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.log=V.value,o}))(function(){return Rf(bv(a.value0.value0))(function(){return t(zH(a.value0.value1))})});if(a instanceof V)return au(t(Kn))(function(h){return au(t(VH(200)(jn(h.listener)(W2.value))))(function(o){return au(Rn(h.emitter))(function(r){return ZT(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.log=new N(new Z(r,o)),u})})})});throw new Error("Failed pattern match at Examples.Halogen.Infinite.Scroll.Main (line 88, column 10 - line 97, column 60): "+[a.constructor.name])});if(n instanceof J2)return ZT(function(a){var h={};for(var o in a)({}).hasOwnProperty.call(a,o)&&(h[o]=a[o]);return h.up=!a.up,h});if(n instanceof W2)return au(YT(function(a){return a.top}))(function(a){return au(e1(Jg)(a)(new ng(N2)))(function(h){return au(YT(function(o){return o.up}))(function(o){return Ie(B2)(h)(function(r){var l=function(){return o?-99:99}();return Rf(If(e1(Jg)(a)(new lE(l,void 0))))(function(){return au(e1(Jg)(a)(new ng(N2)))(function(u){return Ie(B2)(u)(function(i){return Rf(If(lh($f)(void 0)(dh("scroll: "+(t1(r)+("+="+t1(l)))))))(function(){return zX(i!==r+l)(Rf(If(lh($f)(void 0)(dh("scroll offset error"+t1(i)))))(function(){return K2(e)(r1.value)}))})})})})})})})});if(n instanceof j2)return Rf(If(lh($f)(void 0)(dh("pages: "+GX(JX(WH(n.value0.pages)))))))(function(){return If(lh($f)(void 0)(dh("adjust: "+jX(n.value0.update.scroll))))});throw new Error("Failed pattern match at Examples.Halogen.Infinite.Scroll.Main (line 81, column 3 - line 114, column 84): "+[n.constructor.name])}},ZX=function(e){return pn([Vn(fh(Da(sc))(function(){return cc(Bl)}))])([pn([Vn(fh(Zo(et(10)))(function(){return fh(Wi(et(10)))(function(){return fh(ba(et(400)))(function(){return fh(Po(et(1200)))(function(){return fA(ja)})})})}))])([KX(Jg)(e.top)(QX)(function(){var t=WP(150);return{initialElement:t.initialElement,pageSize:t.pageSize,hiddenPages:t.hiddenPages,preloadedPages:t.preloadedPages,preloadMillis:t.preloadMillis,enableTop:e.top,debounce:0,deadZone:1}}())(j2.create)]),co([XX($f)(void 0)(YX)(void 0),co([Pp([n1("type")(ef.value),hf(_e(G2.value))]),Ir("enable top loading/unloading")]),co([Pp([n1("type")(ef.value),hf(_e(r1.value))]),Ir("enable automatic scrolling")]),co([Pp([n1("type")(ef.value),hf(_e(J2.value))]),Ir("auto scroll up")])])])},Q2=function(){return Xt({initialState:_e({top:!1,up:!1,log:V.value}),render:ZX,eval:Qt({handleQuery:lt.handleQuery,receive:lt.receive,initialize:lt.initialize,finalize:lt.finalize,handleAction:K2(Cn)})})}();var tY={dimap:function(e){return function(t){return function(n){return function(a){return n(e(a))}}}}},bs={first:function(e){return function(t){return e(nr(t))}},second:function(e){return function(t){return e(_n(t))}},Profunctor0:function(){return tY}};var fY=In(),dY=he(me);var pY=function(e){return fY(e(dY))},fo=function(e){return function(t){return pY(t)(e)}};var jg=function(e){return e},Mo=function(e){return function(t){return jg(e)(_e(t))}};var eN=nt(rt)(zt),hY=Ol(Ht),_Y=X(Kt),mY=he(me),tN=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vY=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gY=function(e){return function(t){return df([Tc(function(n){return vY.create(ko(n))})])([Ir(t)])}},yY=function(e){return function(t){return eN(hY(t.value0))(function(){return _Y(new N(t.value1))})}},DY=function(e){var t=Le(Ln(e.MonadEffect0()));return function(n){return eN(t(Gr(n.value0)))(function(){return qr(void 0)})}},nN=function(e){return Xt({initialState:mY,render:gY(e),eval:Qt({receive:lt.receive,initialize:lt.initialize,finalize:lt.finalize,handleAction:DY(e),handleQuery:yY(e)})})};var Xg=bi(Qg(),1);function oN(e,t){return function(){return t.edit(e)}}var aN=function(e){return function(t){return oN(e,t)}};var SY=bi(Qg(),1);function iN(e,t){return function(){return t.setValue(e)}}function i1(e){return function(){return e.getValue()}}var sN=function(e){return function(t){return iN(e,t)}};var MY=bi(Qg(),1);function ue(e){return function(){var t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1);return function(){return t[e].apply(t,n)}}}function Yg(e){return function(t){return function(){return t[e]}}}function FY(e){return function(t,n){return function(){n[e]=t}}}var xY=Yg("text"),LY=FY("text"),AY=Yg("renderer"),IY=Yg("inMultiSelectMode"),RY=ue("selectMoreLines"),$Y=Yg("container"),HY=ue("setKeyboardHandler"),OY=ue("getKeyboardHandler"),PY=ue("setSession"),u1=ue("getSession"),kY=ue("setValue"),NY=ue("getValue"),BY=ue("getSelection"),WY=ue("resize"),UY=ue("setTheme"),qY=ue("getTheme"),VY=ue("setStyle"),zY=ue("unsetStyle"),GY=ue("setFontSize"),JY=ue("focus"),jY=ue("isFocused"),KY=ue("blur"),QY=ue("getCopyText"),XY=ue("insert"),YY=ue("setOverwrite"),ZY=ue("getOverwrite"),eZ=ue("toggleOverwrite"),tZ=ue("setScrollSpeed"),nZ=ue("getScrollSpeed"),rZ=ue("setDragDelay"),oZ=ue("getDragDelay"),aZ=ue("setSelectionStyle"),iZ=ue("getSelectionStyle"),uZ=ue("setHighlightActiveLine"),sZ=ue("getHighlightActiveLine"),cZ=ue("setHighlightSelectedWord"),lZ=ue("getHighlightSelectedWord"),fZ=ue("setShowInvisibles"),dZ=ue("getShowInvisibles"),pZ=ue("setShowPrintMargin"),hZ=ue("getShowPrintMargin"),_Z=ue("setPrintMarginColumn"),mZ=ue("getPrintMarginColumn"),vZ=ue("setReadOnly"),gZ=ue("getReadOnly"),yZ=ue("setBehavioursEnabled"),DZ=ue("getBehavioursEnabled"),CZ=ue("setWrapBehavioursEnabled"),bZ=ue("getWrapBehavioursEnabled"),wZ=ue("setShowFoldWidgets"),SZ=ue("getShowFoldWidgets"),EZ=ue("remove"),TZ=ue("removeWordRight"),MZ=ue("removeWordLeft"),FZ=ue("removeToLineStart"),xZ=ue("removeToLineEnd"),LZ=ue("splitLine"),AZ=ue("transposeLetters"),IZ=ue("toLowerCase"),RZ=ue("toUpperCase"),$Z=ue("indent"),HZ=ue("blockIndent"),OZ=ue("blockOutdent"),PZ=ue("toggleCommentLines"),kZ=ue("getNumberAt"),NZ=ue("modifyNumber"),BZ=ue("removeLines"),WZ=ue("moveLinesDown"),UZ=ue("moveLinesUp"),qZ=ue("copyLinesUp"),VZ=ue("copyLinesDown"),zZ=ue("getFirstVisibleRow"),GZ=ue("getLastVisibleRow"),JZ=ue("isRowVisible"),jZ=ue("isRowFullyVisible"),KZ=ue("selectPageDown"),QZ=ue("selectPageUp"),XZ=ue("gotoPageDown"),YZ=ue("gotoPageUp"),ZZ=ue("scrollPageDown"),eee=ue("scrollPageUp"),tee=ue("scrollToRow"),nee=ue("scrollToLine"),ree=ue("centerSelection"),oee=ue("getCursorPosition"),aee=ue("getCursorPositionScreen"),iee=ue("getSelectionRange"),uee=ue("selectAll"),see=ue("clearSelection"),cee=ue("moveCursorTo"),lee=ue("moveCursorToPosition"),fee=ue("jumpToMatching"),dee=ue("gotoLine"),pee=ue("navigateTo"),hee=ue("navigateUp"),_ee=ue("navigateDown"),mee=ue("navigateLeft"),vee=ue("navigateRight"),gee=ue("navigateLineStart"),yee=ue("navigateLineEnd"),Dee=ue("navigateFileEnd"),Cee=ue("navigateFileStart"),bee=ue("navigateWordRight"),wee=ue("navigateWordLeft"),See=ue("replace"),Eee=ue("replaceAll"),Tee=ue("getLastSearchOptions"),Mee=ue("find"),Fee=ue("findNext"),xee=ue("findPrevious"),Lee=ue("undo"),Aee=ue("redo"),Iee=ue("destroy");function vr(e){return e}function s1(e){return JSON.stringify(e)}function cN(e,t,n,a,h,o,r){return r==null?e():typeof r=="boolean"?t(r):typeof r=="number"?n(r):typeof r=="string"?a(r):Object.prototype.toString.call(r)==="[object Array]"?h(r):o(r)}var lN=function(e){return function(t){return function(n){return cN(_e(e),_e(e),_e(e),t,_e(e),_e(e),n)}}};var c1=Me(Fi),Pee=Me(to);var Zg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),l1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fN=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),f1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),dN=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),d1=function(){function e(){}return e.value=new e,e}(),ph={show:function(e){if(e instanceof Zg)return"(TypeMismatch "+(c1(e.value0)+")");if(e instanceof l1)return"(UnexpectedValue "+(s1(e.value0)+")");if(e instanceof fN)return"(AtIndex "+(Pee(e.value0)+(" "+(Me(ph)(e.value1)+")")));if(e instanceof f1)return"(AtKey "+(c1(e.value0)+(" "+(Me(ph)(e.value1)+")")));if(e instanceof dN)return"(Named "+(c1(e.value0)+(" "+(Me(ph)(e.value1)+")")));if(e instanceof d1)return"MissingValue";throw new Error("Failed pattern match at Data.Argonaut.Decode.Error (line 24, column 10 - line 30, column 35): "+[e.constructor.name])}};var _N=function(){return lN(new We(new Zg("String")))(Oe.create)}();var Of={decodeJson:_N};var ty=function(e){return e.decodeJson};var gN=vr;var Pf={encodeJson:gN};var hh=function(e){return e.encodeJson};var h7e=bi(_M(),1),Fne={keyEncoding:"json",valueEncoding:"json"},mM=e=>t=>n=>()=>e.put(t,n),vM=e=>t=>()=>new Promise((a,h)=>{let o=(r,l)=>{a(l)};e.get(t,Fne,o)});var gM=e=>t=>()=>e.del(t);var yM=e=>()=>e.keys().all();var Ry=e=>e===void 0;var ZB=Me(ph),e5=ee(jt),Nne=Tn(Fu),Bne=Nne(hl),t5=Le(Cn),DM=X(Ur);var n5=function(e){var t=hh(e);return function(n){return function(a){var h=hh(a);return function(o){return function(r){return function(l){return function(u){return os(mM(r.value0)(t(l))(h(u)))}}}}}}};var r5=function(e){var t=hh(e);return function(n){return function(a){return function(h){var o=ty(h);return function(r){return function(l){return e5(os(vM(r.value0)(t(l))))(function(u){var i=Ry(u);if(i)return DM(V.value);var s=o(u);if(s instanceof We)return t5(yo(or(ZB(s.value0))));if(s instanceof Oe)return DM(new N(s.value0));throw new Error("Failed pattern match at Level.DB.Operations (line 28, column 10 - line 30, column 40): "+[s.constructor.name])})}}}}}};var o5=function(e){var t=hh(e);return function(n){return function(a){return function(h){return function(o){return function(r){return os(gM(o.value0)(t(r)))}}}}}},a5=function(e){var t=ty(e);return function(n){return function(a){return e5(os(yM(a.value0)))(function(h){var o=Bne(t)(h);if(o instanceof We)return t5(yo(or(ZB(o.value0))));if(o instanceof Oe)return DM(o.value0);throw new Error("Failed pattern match at Level.DB.Operations (line 71, column 3 - line 73, column 26): "+[o.constructor.name])})}}};var i5=bi(_M(),1),Une={keyEncoding:"json",valueEncoding:"json"},CM=e=>()=>new i5.Level(e,Une);var Gne=z(Pe),Jne=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var u5=function(e){return Gne(Jne.create)(CM(e))};var bM=Pf,$y=Of,Kne=n5(bM)($y)(Pf)(Of),Qne=r5(bM)($y)(Pf)(Of),Xne=o5(bM)($y)(Pf)(Of),s5=function(e){return function(t){return function(n){return Kne(e)(t)(n)}}},c5=function(e){return function(t){return Qne(e)(t)}},Oh=u5("filesystem"),l5=a5($y)(Of),f5=function(e){return function(t){return Xne(e)(t)}};var h5=nt(rt),p5=h5(Yo),hu=ee(zt),wM=Ho(Ht),Hy=at(Kt)($t),SM=h5(zt),Yne=Dn(Ht),_5=function(){function e(){}return e.value=new e,e}(),m5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),v5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Zne=function(e){return function(t){var n=co([pn([si("editor"),Vn(p5(ba(et(500)))(function(){return Po(et(500))}))])([]),df([Tc(function(a){return m5.create(ko(a))})])([Ir("Save")]),df([Tc(function(a){return v5.create(ko(a))})])([Ir("Exit")])]);return pn([Vn(p5(Da(sc))(function(){return cc(Bl)}))])([n])}},ere=function(e){var t=Le(Ln(e.MonadEffect0())),n=bn(ii(e));return function(a){return function(h){if(h instanceof _5)return hu(t(Oh))(function(o){return hu(wM(function(r){return r.filePath}))(function(r){return hu(n(c5(o)(r)))(function(l){return hu(Rr("editor"))(function(u){return Ie(Hy)(u)(function(i){return Ie(Hy)(Gp(i))(function(s){return hu(t(aN(s)(Xg.default)))(function(f){return hu(t(u1(f)))(function(p){return SM(Ie(Hy)(l)(function(d){return t(sN(d)(p))}))(function(){return Yne(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.editSession=new N(new Z(o,new Z(f,p))),c})})})})})})})})})});if(h instanceof m5)return SM(t(Gr(h.value0)))(function(){return hu(wM(function(o){return o.editSession}))(function(o){return hu(wM(function(r){return r.filePath}))(function(r){return Ie(Hy)(o)(function(l){return hu(t(i1(l.value1.value1)))(function(u){return n(s5(l.value0)(r)(u))})})})})});if(h instanceof v5)return SM(t(Gr(h.value0)))(function(){return qr(void 0)});throw new Error("Failed pattern match at Examples.Halogen.Widgets.Editor (line 73, column 16 - line 95, column 18): "+[h.constructor.name])}}},g5=function(e){var t=Zne(e),n=ere(e);return function(a){return Xt({initialState:function(h){return{editSession:V.value,filePath:h}},render:t,eval:Qt({handleQuery:lt.handleQuery,receive:lt.receive,finalize:lt.finalize,handleAction:n(a),initialize:new N(_5.value)})})}};function Oy(e){return function(t){return function(){return t.requestAnimationFrame(n=>e(n)())}}}var y5=ee(zt),E5=nt(rt),D5=ut(Pe),C5=ee(Sr),rre=E5(zt),b5=ut($n),ore=z(xp),are=Fr(Ht),w5=ee(oa),ire=E5(oa),T5={reflectSymbol:function(){return"canvas"}},ure=Vr()(T5)(tn),sre=So()(T5)(tn),M5=function(){function e(){}return e.value=new e,e}(),S5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),F5=function(){return Dt.value}(),cre=function(e){var t=Le(Ln(e.MonadEffect0()));return function(n){return function(a){if(a instanceof M5)return y5(t(Kn))(function(h){var o=function(r){return function(){return jn(h.listener)(r)(),D5(C5(ia)(Oy(o)))()}};return rre(t(D5(C5(ia)(Oy(o)))))(function(){return b5(Rn(ore(S5.create)(h.emitter)))})});if(a instanceof S5)return y5(are)(function(h){var o=mp(w5(Jm)(function(r){return w5(jm)(function(l){return ire(Km({x:0,y:0,width:r,height:l}))(function(){return h.animation(a.value0)})})}));return b5(ure(F5)(void 0)(o))});throw new Error("Failed pattern match at Halogen.Canvas.Animate (line 58, column 16 - line 73, column 37): "+[a.constructor.name])}}},lre=function(e){var t=pf(e);return function(n){var a=t(n);return function(h){return sre(F5)(void 0)(a)(h.dimensions)}}},x5=function(e){var t=lre(e),n=cre(e);return function(a){return Xt({initialState:function(h){return{dimensions:h.dimensions,animation:h.animation}},render:t(a),eval:Qt({handleQuery:lt.handleQuery,receive:lt.receive,finalize:lt.finalize,handleAction:n(a),initialize:new N(M5.value)})})}};var EM=function(e){return function(t){var n=nc(t.Profunctor0()),a=Ll(t);return function(h){return n(e)(function(o){return o.value1(o.value0)})(a(h))}}};var A5=X(Cs),L5=z(Ct),I5=nt(rt),Hr=I5(kc),_u=ee(kc),hre=Wr(Vt),_re=Vl(Vt)(mt),mre=ta(Vt),vre=he(me),Ph=I5(ur),gre=An(_r),Py=ee(ur),yre=Tn(Js)(_r),Dre=at(_r)($t),R5=at(Cs)($t);var mu={cmd:function(e){return EM(function(t){return new Z(t.command,function(n){return{prompt:t.prompt,commandEnv:t.commandEnv,foreground:t.foreground,command:n}})})(e)},prompt:function(e){return EM(function(t){return new Z(t.prompt,function(n){return{command:t.command,commandEnv:t.commandEnv,foreground:t.foreground,prompt:n}})})(e)}},Nh=function(e){var t=Le(Ff(e));return function(n){return function(a){return a instanceof JT?n(a.value0):a instanceof jT?t(oi("line feed")):A5(void 0)}}},Bh=function(e){return e.prompt},ky=Bh(mu)(bs),Wh=function(e){return e.cmd},$5=Wh(mu),kh=$5(Ko),H5=$5(bs),Cre=function(e){return function(t){return function(n){var a=function(o){var r=`\r
  help\r
    show this help text`,l=function(u){return`\r
  `+(u.name+(`\r
    `+vo(`\r
    `)(u.description)))};return r+vo("")(L5(l)(o))},h=function(o){return Hr(Nt(Xn(a(n))))(function(){return _u(To)(function(r){return Hr(Nt(on(fo(r)(ky))))(function(){return On(Mo(kh)(""))})})})};return hre("help")(h)(_re(L5(function(o){return new Z(o.name,o.cmd)})(n)))}}},Ny=function(e){var t=Cre(e);return function(n){var a=t(n);return function(h){var o=a(h);return _u(To)(function(r){var l=O0(function(s){return!gL(s)})(Q0(" ")(fo(r)(H5))),u=Ri(l);if(u instanceof V)return Hr(Nt(Xn("")))(function(){return _u(To)(function(s){return Hr(Nt(on(fo(s)(ky))))(function(){return On(Mo(kh)(""))})})});if(u instanceof N){var i=mre(u.value0)(o);if(i instanceof N)return i.value0(Ke([])(vre)(R0(l)));if(i instanceof V)return Hr(Nt(Xn(`\r
unrecognised command "`+(u.value0+'" - type "help" to see the available commands'))))(function(){return _u(To)(function(s){return Hr(Nt(on(fo(s)(ky))))(function(){return On(Mo(kh)(""))})})});throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 199, column 7 - line 206, column 34): "+[i.constructor.name])}throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 191, column 3 - line 206, column 34): "+[u.constructor.name])})}}};var bre=function(e){return function(t){var n=Wh(t),a=n(bs),h=Bh(t)(bs),o=n(Ko);return _u(To)(function(r){return Hr(Nt(Py(Ug(ZE))(function(l){var u=l===0;return u?Ph(on("\x1BM"))(function(){return Py(Ug(Py(eT)(function(i){return Py(YE(i-1|0))(function(s){return yre(XE)(s)})})))(function(i){return Ph(on("\x9BK"))(function(){return Ie(Dre)(i)(function(s){var f=(ec(fo(r)(a))-1|0)<=s;return f?Ph(on(fo(r)(h)))(function(){return on(L_(1)(fo(r)(a)))}):on(L_(1)(hL(s)(fo(r)(a))))})})})}):gre(ec(fo(r)(a))>0)(on("\b \b"))})))(function(){return On(jg(o)(L_(1)))})})}},Uh=function(e){var t=bre(e),n=Le(Ff(e));return function(a){var h=Wh(a)(Ko),o=Bh(a)(bs),r=t(a);return function(l){return function(u){return u===""?Hr(On(Mo(h)("")))(function(){return _u(To)(function(i){return Nt(Ph(on("^C"))(function(){return on(`\r
`+fo(i)(o))}))})}):u==="\r"?l:u==="\x7F"?r:u>=" "&&u<="~"||u>="\xA0"?Hr(On(jg(h)(function(i){return i+u})))(function(){return Nt(on(u))}):Hr(n(oi("non-printable: "+u)))(function(){return A5(void 0)})}}}},wre=function(e){var t=e.MonadEffect0(),n=Nh(t),a=Uh(t)(mu),h=Ny(e);return function(o){var r=h(o);return _u(To)(function(l){return Hr(Ie(R5)(l.foreground)(function(u){return u.kill}))(function(){return Hr(On(function(u){return{prompt:u.prompt,command:u.command,commandEnv:u.commandEnv,foreground:V.value}}))(function(){return Hr(On(Mo(kh)("")))(function(){return _u(To)(function(u){return Hr(Nt(Ph(Bo($a(!0)))(function(){return on(`\r
`+fo(u)(ky))})))(function(){return Ra(n(a(r(l.commandEnv))))})})})})})})}},Sre=function(e){return _u(To)(function(t){return Hr(Ie(R5)(t.foreground)(function(n){return n.stdin(fo(t)(H5))}))(function(){return Hr(Nt(on(`\r
`)))(function(){return On(Mo(kh)(""))})})})},O5=function(e){var t=e.MonadEffect0(),n=Nh(t),a=wre(e),h=Uh(t)(mu),o=Sre(e);return function(r){var l=a(r);return n(function(u){return u===""?Hr(Nt(on("^C")))(function(){return l}):h(o)(u)})}};var By=ee(kc),LM=nt(rt),vn=LM(kc),Wy=De(Hs),Tre=Bh(mu)(bs),Zf=Wh(mu)(Ko),Mre=Pr(Ek),Uy=ee(ur),P5=Me(to),Fre=Me(LF),xre=Me(Fi),AM=ME(),IM={reflectSymbol:function(){return"button"}},Lre=AM(IM)(tn)(),k5=ut(wk),B5=FE(),Are=B5(IM)(tn)(),RM=xE(),Ire=RM(IM)(tn)(),ed=LM(ur),W5={reflectSymbol:function(){return"editor"}},N5=RM(W5)(tn)(),Rre=AM(W5)(tn)(),nl=X(Cs),$re=z(Ct),Hre=at(Cs)(mt),$M={reflectSymbol:function(){return"canvas"}},TM=AM($M)(tn)(),MM=RM($M)(tn)(),po=LM(oa),Ore=B5($M)(tn)(),Pre=at(_p)(mt),kre=z(ht),Nre=ut($n),U5={reflectSymbol:function(){return"shell"}},Bre=Vr()(U5)(tn),Wre=So()(U5)(tn),Ure=function(){function e(){}return e.value=new e,e}();var q5=function(){return Dt.value}(),FM=function(){return Dt.value}(),rl=function(){return Dt.value}(),xM=function(){return Dt.value}(),HM=function(e){var t=nN(e),n=O5(e),a=e.MonadEffect0(),h=Nh(a),o=Uh(a)(mu),r=Ny(e),l=g5(e),u=Le(Ff(a)),i=bn(bk(e)),s=pf(e),f=x5(e),p=Fv(e);return function(d){var c=n(d),_=r(d),m=l(d),v=s(d),y=f(d),C=p(d),T=By(To)(function(g){return vn(Nt(on(`\r
`+fo(g)(Tre))))(function(){return On(Mo(Zf)(""))})}),D=function(g){return _e(Mre(g)(T))};return[{name:"rows",description:["prints the number of rows in the terminal"],cmd:D(Nt(Uy(qg)(function(){var g=Wy(`\r
`);return function(w){return Xn(g(P5(w)))}}())))},{name:"cols",description:["prints the number of columns in the terminal"],cmd:D(Nt(Uy(qg)(function(){var g=Wy(`\r
`);return function(w){return Xn(g(P5(w)))}}())))},{name:"blinking",description:["prints a boolean indicating whether the cursor is blinking"],cmd:D(Nt(Uy(Bo(uT))(function(){var g=Wy(`\r
`);return function(w){return Xn(g(Fre(w)))}}())))},{name:"blinkon",description:["turns on cursor blinking"],cmd:D(Nt(Bo($a(!0))))},{name:"blinkoff",description:["turns off cursor blinking"],cmd:D(Nt(Bo($a(!1))))},{name:"fontFamily",description:["prints the font family of the terminal"],cmd:D(Nt(Uy(Bo(iT))(function(){var g=Wy(`\r
`);return function(w){return Xn(g(xre(w)))}}())))},{name:"button",description:["creates a button as a subprocess.","the subprocess can be cancelled with ^C","accepts button text as argument.",'clicking the button prints "click!" to the terminal.'],cmd:function(g){return vn(On(Mo(Zf)("")))(function(){return vn(Lre(xM)(void 0)(t)(vo(" ")(g))(_e(Nt(Xn("click!")))))(function(){var w={stdin:function(F){return k5(Are(xM)(void 0)(new tN(F,void 0)))},kill:Ire(xM)(void 0)};return vn(On(function(F){return{prompt:F.prompt,command:F.command,commandEnv:F.commandEnv,foreground:new N(w)}}))(function(){return vn(Nt(ed(Bo($a(!1)))(function(){return on(`\r
`)})))(function(){return Ra(c)})})})})}},{name:"edit",description:["opens a file in the editor as a subprocess.","the subprocess can be cancelled with ^C","accepts the file path as argument."],cmd:function(g){return g.length===1&&ec(g[0])>0?vn(On(Mo(Zf)("")))(function(){var w=vn(N5(FM)(void 0))(function(){return vn(Nt(on("> ")))(function(){return Ra(h(o(_(HM(e)(d)))))})});return vn(Rre(FM)(void 0)(m)(g[0])(_e(w)))(function(){var F={stdin:_e(nl(void 0)),kill:N5(FM)(void 0)};return vn(On(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new N(F)}}))(function(){return vn(Nt(ed(Bo($a(!1)))(function(){return on(`\r
`)})))(function(){return Ra(c)})})})}):D(Nt(Xn(`\r
this command expects a single file name as its argument`)))(g)}},{name:"ls",description:["lists files in the file system"],cmd:D(By(u(Oh))(function(g){return By(i(l5(g)))(function(w){return Nt(Xn(`\r
`+vo(" ")($re(function(F){return F})(w))))})}))},{name:"rm",description:["remove files from the file system"],cmd:function(g){return By(u(Oh))(function(w){return vn(Hre(function(F){return i(f5(w)(F))})(g))(function(){return T})})}},{name:"canvas",description:["canvas example"],cmd:function(g){return vn(On(Mo(Zf)("")))(function(){return vn(TM(rl)(void 0)(v)({width:200,height:200})(_e(nl(void 0))))(function(){var w={stdin:_e(nl(void 0)),kill:MM(rl)(void 0)},F=po(as(Ja(255)(255)(200)))(function(){return po(Yl({x:0,y:0,width:200,height:200}))(function(){return po(as(Ja(0)(0)(0)))(function(){return nw("hello")({x:50,y:50})})})});return vn(k5(Ore(rl)(void 0)(F)))(function(){return vn(On(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new N(w)}}))(function(){return vn(Nt(ed(Bo($a(!1)))(function(){return on(`\r
`)})))(function(){return Ra(c)})})})})})}},{name:"animation",description:["canvas animation example"],cmd:function(g){return vn(On(Mo(Zf)("")))(function(){var w=function(F){return po(as(Ja(255)(255)(200)))(function(){return po(Yl({x:0,y:0,width:200,height:200}))(function(){return po(as(Ja(0)(0)(0)))(function(){return po(LR({translateX:50,translateY:50}))(function(){return po(xR(F/1e3))(function(){return nw("hello")({x:0,y:0})})})})})})};return vn(TM(rl)(void 0)(y)({dimensions:{width:200,height:200},animation:w})(_e(nl(void 0))))(function(){var F={stdin:_e(nl(void 0)),kill:MM(rl)(void 0)};return vn(On(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new N(F)}}))(function(){return vn(Nt(ed(Bo($a(!1)))(function(){return on(`\r
`)})))(function(){return Ra(c)})})})})}},{name:"sketch",description:["canvas drawing program example"],cmd:function(g){return vn(On(Mo(Zf)("")))(function(){var w={dimensions:{width:400,height:400},world:{line:V.value,lines:[]},draw:function(F){return po(as(Ja(255)(255)(200)))(function(){return po(Yl({x:0,y:0,width:400,height:400}))(function(){return po(zm(Ja(0)(0)(0)))(function(){return po(Vm(5))(function(){return Ie(Pre)(Ke(F.lines)(Ie(ln)(F.lines))(F.line))(function(b){return po(Qm)(function(){return po(qm(b.value0))(function(){return po(Um(b.value1))(function(){return Gm})})})})})})})})},input:function(F){return function(b){return function(E){if(F instanceof vf)return{lines:E.lines,line:V.value};if(F instanceof mf)return{line:V.value,lines:function(){if(E.line instanceof V)return E.lines;if(E.line instanceof N)return ln(E.line.value0)(E.lines);throw new Error("Failed pattern match at Examples.Halogen.XTerm.Component (line 232, column 34 - line 234, column 57): "+[E.line.constructor.name])}()};if(F instanceof _f){var M={x:Wn(Mc(F.value0))-b.left,y:Wn(Fc(F.value0))-b.top};return{lines:E.lines,line:Ke(new N(new Z(M,M)))(N.create)(E.line)}}if(F instanceof gf){var M={x:Wn(Mc(F.value0))-b.left,y:Wn(Fc(F.value0))-b.top},S=function(L){return new Z(L.value0,M)};return{lines:E.lines,line:kre(S)(E.line)}}return E}}}};return vn(TM(rl)(void 0)(C)(w)(_e(nl(void 0))))(function(){var F={stdin:_e(nl(void 0)),kill:MM(rl)(void 0)};return vn(On(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new N(F)}}))(function(){return vn(Nt(ed(Bo($a(!1)))(function(){return on(`\r
`)})))(function(){return Ra(c)})})})})}}]}},qre=function(e){var t=e.MonadEffect0(),n=Nh(t),a=Uh(t)(mu),h=Ny(e),o=HM(e);return function(r){var l=h(r),u=o(r);return function(i){return Nre(Bre(q5)(void 0)(vn(Nt(ed(zT(!0))(function(){return on("> ")})))(function(){return Ra(n(a(l(u))))})))}}},Vre=function(e){var t=HM(e);return function(n){return{prompt:"> ",command:"",foreground:V.value,commandEnv:t(n)}}},zre=function(e){var t=Gg(e),n=Vre(e);return function(a){return _e(Wre(q5)(void 0)(t)(n(a)))}},V5=function(e){var t=zre(e),n=qre(e);return function(a){return Xt({initialState:_e(void 0),render:t(a),eval:Qt({handleQuery:lt.handleQuery,receive:lt.receive,finalize:lt.finalize,handleAction:n(a),initialize:new N(Ure.value)})})}};var Jre=z(ht),z5=Z$(_v),K5=z(Ct),jre=$i(qn),Kre=ee(zt),G5=ee(Sr),Q5=nt(rt),J5=Q5(zt),Qre=TI(Pl),j5=Dn(Ht),X5=ta(Vt),Xre=X(Kt),qy=Q5(Yo),Yre=WL(vA),Zre=So()({reflectSymbol:function(){return"example"}})(Vt),eoe=Vl(Vt)(mt),toe=V5(ns)(Gi),noe=PH(ns)(Gi),roe=ut(xr),Y5=function(){function e(){}return e.value=new e,e}(),OM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ooe=function(e){return Ke(new OM(""))(OM.create)(Jre(function(t){return t.value})(lS(e)))},aoe=function(e){var t=function(n){return rS([z5(n.id)])([Ir(n.name)])};return oS([z5(e.selected),hf(ooe)])(K5(t)(jre(Kd(e.examples))))},ioe=function(e){var t=Le(Ln(e));return function(n){if(n instanceof Y5)return Kre(t(G5(G5(ia)(LS))(xS)))(function(a){return J5(t(Qre(A_(1)(a))))(function(){return J5(j5(function(h){var o=X5(A_(1)(a))(h.examples);if(o instanceof V)return h;if(o instanceof N){var r={};for(var l in h)({}).hasOwnProperty.call(h,l)&&(r[l]=h[l]);return r.selected=o.value0.id,r}throw new Error("Failed pattern match at Main (line 100, column 10 - line 102, column 46): "+[o.constructor.name])}))(function(){return Xre(void 0)})})});if(n instanceof OM)return j5(function(a){var h={};for(var o in a)({}).hasOwnProperty.call(a,o)&&(h[o]=a[o]);return h.selected=n.value0,h});throw new Error("Failed pattern match at Main (line 95, column 3 - line 104, column 62): "+[n.constructor.name])}},uoe=function(){return Dt.value}(),soe=function(e){return pn([Vn(qy(Da(sc))(function(){return cc(mA)}))])([pn([Vn(qy(Da(sc))(function(){return qy(cc(Bl))(function(){return qy(gA(Yre))(function(){return Jd(Gd)(et(1))(ja)})})}))])([tS([Ir("Example")]),pn([Vn(q_(et(0))(et(0))(et(0))(et(10)))])([aoe(e)])]),pn([Vn(Jd(Gd)(et(1))(ja))])([function(){var t=X5(e.selected)(e.examples);if(t instanceof N)return Zre(uoe)(t.value0.id)(t.value0.component)(void 0);if(t instanceof V)return co([]);throw new Error("Failed pattern match at Main (line 144, column 11 - line 146, column 34): "+[t.constructor.name])}()])])},coe=function(){return Xt({initialState:function(e){return{selected:e.value0,examples:eoe(K5(function(t){return new Z(t.id,t)})(e.value1))}},render:soe,eval:Qt({handleQuery:lt.handleQuery,receive:lt.receive,finalize:lt.finalize,handleAction:ioe(Cn),initialize:new N(Y5.value)})})}(),Z5=RS(ee(jt)($S)(function(e){var t=[{id:"xterm",name:"XTerm",component:toe},{id:"infinite-scroll",name:"Infinite Scroll",component:Q2},{id:"halogen-canvas-sketch",name:"Line Sketch",component:noe}];return roe(wE(coe)(new Z("xterm",t))(e))}));Z5();})();
/*! Bundled license information:

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)
  (*! @license
  ==========================================================================
  SproutCore -- JavaScript Application Framework
  copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
  
  SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.
  
  For more information about SproutCore, visit http://www.sproutcore.com
  
  
  ==========================================================================
  @license *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
