<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>infinite scroll test</title>
  </head>
  <body>
   <script>var dM=Object.create;var tD=Object.defineProperty;var vM=Object.getOwnPropertyDescriptor;var mM=Object.getOwnPropertyNames;var hM=Object.getPrototypeOf,gM=Object.prototype.hasOwnProperty;var cf=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var DM=(e,t,n,f)=>{if(t&&typeof t=="object"||typeof t=="function")for(let v of mM(t))!gM.call(e,v)&&v!==n&&tD(e,v,{get:()=>t[v],enumerable:!(f=vM(t,v))||f.enumerable});return e};var sf=(e,t,n)=>(n=e!=null?dM(hM(e)):{},DM(t||!e||!e.__esModule?tD(n,"default",{value:e,enumerable:!0}):n,e));var k1=cf((W_,Zh)=>{(function(e,t){typeof W_=="object"&&typeof Zh=="object"?Zh.exports=t():typeof define=="function"&&define.amd?define([],t):typeof W_=="object"?W_.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let f=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(f._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,f=n._renderService.dimensions;if(f.css.cell.width===0||f.css.cell.height===0)return;let v=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(r.getPropertyValue("height")),s=Math.max(0,parseInt(r.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),u=o-(parseInt(l.getPropertyValue("padding-top"))+parseInt(l.getPropertyValue("padding-bottom"))),d=s-(parseInt(l.getPropertyValue("padding-right"))+parseInt(l.getPropertyValue("padding-left")))-v;return{cols:Math.max(2,Math.floor(d/f.css.cell.width)),rows:Math.max(1,Math.floor(u/f.css.cell.height))}}}})(),e})())});var B1=cf((q_,eg)=>{(function(e,t){typeof q_=="object"&&typeof eg=="object"?eg.exports=t():typeof define=="function"&&define.amd?define([],t):typeof q_=="object"?q_.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(v,r,o){var s=this&&this.__decorate||function(T,m,y,E){var b,w=arguments.length,L=w<3?m:E===null?E=Object.getOwnPropertyDescriptor(m,y):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(T,m,y,E);else for(var I=T.length-1;I>=0;I--)(b=T[I])&&(L=(w<3?b(L):w>3?b(m,y,L):b(m,y))||L);return w>3&&L&&Object.defineProperty(m,y,L),L};Object.defineProperty(r,"__esModule",{value:!0}),r.GlyphRenderer=void 0;let l=o(374),u=o(509),d=o(855),h=o(859),D=o(776),p=o(381),a=11,i=a*Float32Array.BYTES_PER_ELEMENT,c,_=0,g=0,C=0;class S extends h.Disposable{constructor(m,y,E){super(),this._terminal=m,this._gl=y,this._dimensions=E,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let b=this._gl;u.TextureAtlas.maxAtlasPages===void 0&&(u.TextureAtlas.maxAtlasPages=Math.min(32,(0,l.throwIfFalsy)(b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS))),u.TextureAtlas.maxTextureSize=(0,l.throwIfFalsy)(b.getParameter(b.MAX_TEXTURE_SIZE))),this._program=(0,l.throwIfFalsy)((0,p.createProgram)(b,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(W){let M="";for(let A=1;A<W;A++)M+=` else if (v_texpage == ${A}) { outColor = texture(u_texture[${A}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${W}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${M}
}`}(u.TextureAtlas.maxAtlasPages))),this.register((0,h.toDisposable)(()=>b.deleteProgram(this._program))),this._projectionLocation=(0,l.throwIfFalsy)(b.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,l.throwIfFalsy)(b.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,l.throwIfFalsy)(b.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=b.createVertexArray(),b.bindVertexArray(this._vertexArrayObject);let w=new Float32Array([0,0,1,0,0,1,1,1]),L=b.createBuffer();this.register((0,h.toDisposable)(()=>b.deleteBuffer(L))),b.bindBuffer(b.ARRAY_BUFFER,L),b.bufferData(b.ARRAY_BUFFER,w,b.STATIC_DRAW),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let I=new Uint8Array([0,1,2,3]),R=b.createBuffer();this.register((0,h.toDisposable)(()=>b.deleteBuffer(R))),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,R),b.bufferData(b.ELEMENT_ARRAY_BUFFER,I,b.STATIC_DRAW),this._attributesBuffer=(0,l.throwIfFalsy)(b.createBuffer()),this.register((0,h.toDisposable)(()=>b.deleteBuffer(this._attributesBuffer))),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.FLOAT,!1,i,0),b.vertexAttribDivisor(2,1),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,i,2*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,!1,i,4*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,2,b.FLOAT,!1,i,5*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(5,1),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,i,7*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(6,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,i,9*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(1,1),b.useProgram(this._program);let P=new Int32Array(u.TextureAtlas.maxAtlasPages);for(let W=0;W<u.TextureAtlas.maxAtlasPages;W++)P[W]=W;b.uniform1iv(this._textureLocation,P),b.uniformMatrix4fv(this._projectionLocation,!1,p.PROJECTION_MATRIX),this._atlasTextures=[];for(let W=0;W<u.TextureAtlas.maxAtlasPages;W++){let M=new p.GLTexture((0,l.throwIfFalsy)(b.createTexture()));this.register((0,h.toDisposable)(()=>b.deleteTexture(M.texture))),b.activeTexture(b.TEXTURE0+W),b.bindTexture(b.TEXTURE_2D,M.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[W]=M}b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(m,y,E,b,w,L,I,R){this._updateCell(this._vertices.attributes,m,y,E,b,w,L,I,R)}_updateCell(m,y,E,b,w,L,I,R,P){_=(E*this._terminal.cols+y)*a,b!==d.NULL_CELL_CODE&&b!==void 0?this._atlas&&(c=R&&R.length>1?this._atlas.getRasterizedGlyphCombinedChar(R,w,L,I,!1):this._atlas.getRasterizedGlyph(b,w,L,I,!1),g=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),w!==P&&c.offset.x>g?(C=c.offset.x-g,m[_]=-(c.offset.x-C)+this._dimensions.device.char.left,m[_+1]=-c.offset.y+this._dimensions.device.char.top,m[_+2]=(c.size.x-C)/this._dimensions.device.canvas.width,m[_+3]=c.size.y/this._dimensions.device.canvas.height,m[_+4]=c.texturePage,m[_+5]=c.texturePositionClipSpace.x+C/this._atlas.pages[c.texturePage].canvas.width,m[_+6]=c.texturePositionClipSpace.y,m[_+7]=c.sizeClipSpace.x-C/this._atlas.pages[c.texturePage].canvas.width,m[_+8]=c.sizeClipSpace.y):(m[_]=-c.offset.x+this._dimensions.device.char.left,m[_+1]=-c.offset.y+this._dimensions.device.char.top,m[_+2]=c.size.x/this._dimensions.device.canvas.width,m[_+3]=c.size.y/this._dimensions.device.canvas.height,m[_+4]=c.texturePage,m[_+5]=c.texturePositionClipSpace.x,m[_+6]=c.texturePositionClipSpace.y,m[_+7]=c.sizeClipSpace.x,m[_+8]=c.sizeClipSpace.y)):m.fill(0,_,_+a-1-2)}clear(){let m=this._terminal,y=m.cols*m.rows*a;this._vertices.count!==y?this._vertices.attributes=new Float32Array(y):this._vertices.attributes.fill(0);let E=0;for(;E<this._vertices.attributesBuffers.length;E++)this._vertices.count!==y?this._vertices.attributesBuffers[E]=new Float32Array(y):this._vertices.attributesBuffers[E].fill(0);this._vertices.count=y,E=0;for(let b=0;b<m.rows;b++)for(let w=0;w<m.cols;w++)this._vertices.attributes[E+9]=w/m.cols,this._vertices.attributes[E+10]=b/m.rows,E+=a}handleResize(){let m=this._gl;m.useProgram(this._program),m.viewport(0,0,m.canvas.width,m.canvas.height),m.uniform2f(this._resolutionLocation,m.canvas.width,m.canvas.height),this.clear()}render(m){if(!this._atlas)return;let y=this._gl;y.useProgram(this._program),y.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let E=this._vertices.attributesBuffers[this._activeBuffer],b=0;for(let w=0;w<m.lineLengths.length;w++){let L=w*this._terminal.cols*a,I=this._vertices.attributes.subarray(L,L+m.lineLengths[w]*a);E.set(I,b),b+=I.length}y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.bufferData(y.ARRAY_BUFFER,E.subarray(0,b),y.STREAM_DRAW);for(let w=0;w<this._atlas.pages.length;w++)this._atlas.pages[w].version!==this._atlasTextures[w].version&&this._bindAtlasPageTexture(y,this._atlas,w);y.drawElementsInstanced(y.TRIANGLE_STRIP,4,y.UNSIGNED_BYTE,0,b/a)}setAtlas(m){this._atlas=m;for(let y of this._atlasTextures)y.version=-1}_bindAtlasPageTexture(m,y,E){m.activeTexture(m.TEXTURE0+E),m.bindTexture(m.TEXTURE_2D,this._atlasTextures[E].texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,y.pages[E].canvas),m.generateMipmap(m.TEXTURE_2D),this._atlasTextures[E].version=y.pages[E].version}setDimensions(m){this._dimensions=m}}r.GlyphRenderer=S,s([D.traceCall],S.prototype,"updateCell",null)},742:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RectangleRenderer=void 0;let s=o(374),l=o(859),u=o(310),d=o(381),h=8*Float32Array.BYTES_PER_ELEMENT;class D{constructor(){this.attributes=new Float32Array(160),this.count=0}}let p=0,a=0,i=0,c=0,_=0,g=0,C=0;class S extends l.Disposable{constructor(m,y,E,b){super(),this._terminal=m,this._gl=y,this._dimensions=E,this._themeService=b,this._vertices=new D,this._verticesCursor=new D;let w=this._gl;this._program=(0,s.throwIfFalsy)((0,d.createProgram)(w,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,l.toDisposable)(()=>w.deleteProgram(this._program))),this._projectionLocation=(0,s.throwIfFalsy)(w.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=w.createVertexArray(),w.bindVertexArray(this._vertexArrayObject);let L=new Float32Array([0,0,1,0,0,1,1,1]),I=w.createBuffer();this.register((0,l.toDisposable)(()=>w.deleteBuffer(I))),w.bindBuffer(w.ARRAY_BUFFER,I),w.bufferData(w.ARRAY_BUFFER,L,w.STATIC_DRAW),w.enableVertexAttribArray(3),w.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let R=new Uint8Array([0,1,2,3]),P=w.createBuffer();this.register((0,l.toDisposable)(()=>w.deleteBuffer(P))),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,P),w.bufferData(w.ELEMENT_ARRAY_BUFFER,R,w.STATIC_DRAW),this._attributesBuffer=(0,s.throwIfFalsy)(w.createBuffer()),this.register((0,l.toDisposable)(()=>w.deleteBuffer(this._attributesBuffer))),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.enableVertexAttribArray(0),w.vertexAttribPointer(0,2,w.FLOAT,!1,h,0),w.vertexAttribDivisor(0,1),w.enableVertexAttribArray(1),w.vertexAttribPointer(1,2,w.FLOAT,!1,h,2*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(1,1),w.enableVertexAttribArray(2),w.vertexAttribPointer(2,4,w.FLOAT,!1,h,4*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(2,1),this._updateCachedColors(b.colors),this.register(this._themeService.onChangeColors(W=>{this._updateCachedColors(W),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(m){let y=this._gl;y.useProgram(this._program),y.bindVertexArray(this._vertexArrayObject),y.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.bufferData(y.ARRAY_BUFFER,m.attributes,y.DYNAMIC_DRAW),y.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,y.UNSIGNED_BYTE,0,m.count)}handleResize(){this._updateViewportRectangle()}setDimensions(m){this._dimensions=m}_updateCachedColors(m){this._bgFloat=this._colorToFloat32Array(m.background),this._cursorFloat=this._colorToFloat32Array(m.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(m){let y=this._terminal,E=this._vertices,b,w,L,I,R,P,W,M,A,x,H,U=1;for(b=0;b<y.rows;b++){for(L=-1,I=0,R=0,P=!1,w=0;w<y.cols;w++)W=(b*y.cols+w)*u.RENDER_MODEL_INDICIES_PER_CELL,M=m.cells[W+u.RENDER_MODEL_BG_OFFSET],A=m.cells[W+u.RENDER_MODEL_FG_OFFSET],x=!!(67108864&A),(M!==I||A!==R&&(P||x))&&((I!==0||P&&R!==0)&&(H=8*U++,this._updateRectangle(E,H,R,I,L,w,b)),L=w,I=M,R=A,P=x);(I!==0||P&&R!==0)&&(H=8*U++,this._updateRectangle(E,H,R,I,L,y.cols,b))}E.count=U}updateCursor(m){let y=this._verticesCursor,E=m.cursor;if(!E||E.style==="block")return void(y.count=0);let b,w=0;E.style!=="bar"&&E.style!=="outline"||(b=8*w++,this._addRectangleFloat(y.attributes,b,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.style==="bar"?E.dpr*E.cursorWidth:E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),E.style!=="underline"&&E.style!=="outline"||(b=8*w++,this._addRectangleFloat(y.attributes,b,E.x*this._dimensions.device.cell.width,(E.y+1)*this._dimensions.device.cell.height-E.dpr,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat)),E.style==="outline"&&(b=8*w++,this._addRectangleFloat(y.attributes,b,E.x*this._dimensions.device.cell.width,E.y*this._dimensions.device.cell.height,E.width*this._dimensions.device.cell.width,E.dpr,this._cursorFloat),b=8*w++,this._addRectangleFloat(y.attributes,b,(E.x+E.width)*this._dimensions.device.cell.width-E.dpr,E.y*this._dimensions.device.cell.height,E.dpr,this._dimensions.device.cell.height,this._cursorFloat)),y.count=w}_updateRectangle(m,y,E,b,w,L,I){if(67108864&E)switch(50331648&E){case 16777216:case 33554432:p=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:p=(16777215&E)<<8;break;default:p=this._themeService.colors.foreground.rgba}else switch(50331648&b){case 16777216:case 33554432:p=this._themeService.colors.ansi[255&b].rgba;break;case 50331648:p=(16777215&b)<<8;break;default:p=this._themeService.colors.background.rgba}m.attributes.length<y+4&&(m.attributes=(0,d.expandFloat32Array)(m.attributes,this._terminal.rows*this._terminal.cols*8)),a=w*this._dimensions.device.cell.width,i=I*this._dimensions.device.cell.height,c=(p>>24&255)/255,_=(p>>16&255)/255,g=(p>>8&255)/255,C=1,this._addRectangle(m.attributes,y,a,i,(L-w)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,c,_,g,C)}_addRectangle(m,y,E,b,w,L,I,R,P,W){m[y]=E/this._dimensions.device.canvas.width,m[y+1]=b/this._dimensions.device.canvas.height,m[y+2]=w/this._dimensions.device.canvas.width,m[y+3]=L/this._dimensions.device.canvas.height,m[y+4]=I,m[y+5]=R,m[y+6]=P,m[y+7]=W}_addRectangleFloat(m,y,E,b,w,L,I){m[y]=E/this._dimensions.device.canvas.width,m[y+1]=b/this._dimensions.device.canvas.height,m[y+2]=w/this._dimensions.device.canvas.width,m[y+3]=L/this._dimensions.device.canvas.height,m[y+4]=I[0],m[y+5]=I[1],m[y+6]=I[2],m[y+7]=I[3]}_colorToFloat32Array(m){return new Float32Array([(m.rgba>>24&255)/255,(m.rgba>>16&255)/255,(m.rgba>>8&255)/255,(255&m.rgba)/255])}}r.RectangleRenderer=S},310:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModel=r.COMBINED_CHAR_BIT_MASK=r.RENDER_MODEL_EXT_OFFSET=r.RENDER_MODEL_FG_OFFSET=r.RENDER_MODEL_BG_OFFSET=r.RENDER_MODEL_INDICIES_PER_CELL=void 0;let s=o(296);r.RENDER_MODEL_INDICIES_PER_CELL=4,r.RENDER_MODEL_BG_OFFSET=1,r.RENDER_MODEL_FG_OFFSET=2,r.RENDER_MODEL_EXT_OFFSET=3,r.COMBINED_CHAR_BIT_MASK=2147483648,r.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,s.createSelectionRenderModel)()}resize(l,u){let d=l*u*r.RENDER_MODEL_INDICIES_PER_CELL;d!==this.cells.length&&(this.cells=new Uint32Array(d),this.lineLengths=new Uint32Array(u))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(v,r,o){var s=this&&this.__decorate||function(L,I,R,P){var W,M=arguments.length,A=M<3?I:P===null?P=Object.getOwnPropertyDescriptor(I,R):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(L,I,R,P);else for(var x=L.length-1;x>=0;x--)(W=L[x])&&(A=(M<3?W(A):M>3?W(I,R,A):W(I,R))||A);return M>3&&A&&Object.defineProperty(I,R,A),A};Object.defineProperty(r,"__esModule",{value:!0}),r.JoinedCellData=r.WebglRenderer=void 0;let l=o(820),u=o(274),d=o(627),h=o(457),D=o(56),p=o(374),a=o(345),i=o(859),c=o(147),_=o(782),g=o(855),C=o(776),S=o(965),T=o(742),m=o(310),y=o(733);class E extends i.Disposable{constructor(I,R,P,W,M,A,x,H,U){super(),this._terminal=I,this._characterJoinerService=R,this._charSizeService=P,this._coreBrowserService=W,this._coreService=M,this._decorationService=A,this._optionsService=x,this._themeService=H,this._cursorBlinkStateManager=new i.MutableDisposable,this._charAtlasDisposable=this.register(new i.MutableDisposable),this._model=new m.RenderModel,this._workCell=new _.CellData,this._rectangleRenderer=this.register(new i.MutableDisposable),this._glyphRenderer=this.register(new i.MutableDisposable),this._onChangeTextureAtlas=this.register(new a.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new a.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new a.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new a.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new a.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new u.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new y.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,x,this._themeService)],this.dimensions=(0,p.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(x.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let re={antialias:!1,depth:!1,preserveDrawingBuffer:U};if(this._gl=this._canvas.getContext("webgl2",re),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,l.addDisposableDomListener)(this._canvas,"webglcontextlost",oe=>{console.log("webglcontextlost event received"),oe.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(oe)},3e3)})),this.register((0,l.addDisposableDomListener)(this._canvas,"webglcontextrestored",oe=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,d.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,D.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(oe,V)=>this._setCanvasDevicePixelDimensions(oe,V))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,i.toDisposable)(()=>{var oe;for(let V of this._renderLayers)V.dispose();(oe=this._canvas.parentElement)===null||oe===void 0||oe.removeChild(this._canvas),(0,d.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var I;return(I=this._charAtlas)===null||I===void 0?void 0:I.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(I,R){var P,W,M,A;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let x of this._renderLayers)x.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(P=this._rectangleRenderer.value)===null||P===void 0||P.setDimensions(this.dimensions),(W=this._rectangleRenderer.value)===null||W===void 0||W.handleResize(),(M=this._glyphRenderer.value)===null||M===void 0||M.setDimensions(this.dimensions),(A=this._glyphRenderer.value)===null||A===void 0||A.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var I;for(let R of this._renderLayers)R.handleBlur(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.pause(),this._requestRedrawViewport()}handleFocus(){var I;for(let R of this._renderLayers)R.handleFocus(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.resume(),this._requestRedrawViewport()}handleSelectionChanged(I,R,P){for(let W of this._renderLayers)W.handleSelectionChanged(this._terminal,I,R,P);this._model.selection.update(this._terminal,I,R,P),this._requestRedrawViewport()}handleCursorMove(){var I;for(let R of this._renderLayers)R.handleCursorMove(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new T.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new S.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var I;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let R=(0,d.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==R&&(this._onChangeTextureAtlas.fire(R.pages[0].canvas),this._charAtlasDisposable.value=(0,i.getDisposeArrayDisposable)([(0,a.forwardEvent)(R.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,a.forwardEvent)(R.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=R,this._charAtlas.warmUp(),(I=this._glyphRenderer.value)===null||I===void 0||I.setAtlas(this._charAtlas)}_clearModel(I){var R;this._model.clear(),I&&((R=this._glyphRenderer.value)===null||R===void 0||R.clear())}clearTextureAtlas(){var I;(I=this._charAtlas)===null||I===void 0||I.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var I;this._clearModel(!0);for(let R of this._renderLayers)R.reset(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(I){return-1}deregisterCharacterJoiner(I){return!1}renderRows(I,R){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let P of this._renderLayers)P.handleGridChanged(this._terminal,I,R);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(I,R),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new h.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(I,R){let P=this._core,W,M,A,x,H,U,re,oe,V,fe,F,N,q,k=this._workCell;I=w(I,P.rows-1,0),R=w(R,P.rows-1,0);let le=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Q=Math.min(this._terminal.buffer.active.cursorX,P.cols-1),Me=-1,et=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ke=!1;for(M=I;M<=R;M++)for(A=M+P.buffer.ydisp,x=P.buffer.lines.get(A),this._model.lineLengths[M]=0,H=this._characterJoinerService.getJoinedCharacters(A),N=0;N<P.cols;N++)if(W=this._cellColorResolver.result.bg,x.loadCell(N,k),N===0&&(W=this._cellColorResolver.result.bg),U=!1,re=N,H.length>0&&N===H[0][0]&&(U=!0,oe=H.shift(),k=new b(k,x.translateToString(!0,oe[0],oe[1]),oe[1]-oe[0]),re=oe[1]-1),V=k.getChars(),fe=k.getCode(),F=(M*P.cols+N)*m.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(k,N,A),et&&A===le&&(N===Q&&(this._model.cursor={x:Q,y:this._terminal.buffer.active.cursorY,width:k.getWidth(),style:this._coreBrowserService.isFocused?P.options.cursorStyle||"block":P.options.cursorInactiveStyle,cursorWidth:P.options.cursorWidth,dpr:this._devicePixelRatio},Me=Q+k.getWidth()-1),N>=Q&&N<=Me&&(this._coreBrowserService.isFocused&&(P.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&P.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),fe!==g.NULL_CELL_CODE&&(this._model.lineLengths[M]=N+1),(this._model.cells[F]!==fe||this._model.cells[F+m.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[F+m.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[F+m.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ke=!0,V.length>1&&(fe|=m.COMBINED_CHAR_BIT_MASK),this._model.cells[F]=fe,this._model.cells[F+m.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[F+m.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[F+m.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(N,M,fe,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,V,W),U))for(k=this._workCell,N++;N<re;N++)q=(M*P.cols+N)*m.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(N,M,g.NULL_CELL_CODE,0,0,0,g.NULL_CELL_CHAR,0),this._model.cells[q]=g.NULL_CELL_CODE,this._model.cells[q+m.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[q+m.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[q+m.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ke&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(I,R){this._canvas.width===I&&this._canvas.height===R||(this._canvas.width=I,this._canvas.height=R,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let I=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:I,end:I})}}r.WebglRenderer=E,s([C.traceCall],E.prototype,"renderRows",null);class b extends c.AttributeData{constructor(I,R,P){super(),this.content=0,this.combinedData="",this.fg=I.fg,this.bg=I.bg,this.combinedData=R,this._width=P}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(I){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function w(L,I,R=0){return Math.max(Math.min(L,I),R)}r.JoinedCellData=b},381:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GLTexture=r.expandFloat32Array=r.createShader=r.createProgram=r.PROJECTION_MATRIX=void 0;let s=o(374);function l(u,d,h){let D=(0,s.throwIfFalsy)(u.createShader(d));if(u.shaderSource(D,h),u.compileShader(D),u.getShaderParameter(D,u.COMPILE_STATUS))return D;console.error(u.getShaderInfoLog(D)),u.deleteShader(D)}r.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),r.createProgram=function(u,d,h){let D=(0,s.throwIfFalsy)(u.createProgram());if(u.attachShader(D,(0,s.throwIfFalsy)(l(u,u.VERTEX_SHADER,d))),u.attachShader(D,(0,s.throwIfFalsy)(l(u,u.FRAGMENT_SHADER,h))),u.linkProgram(D),u.getProgramParameter(D,u.LINK_STATUS))return D;console.error(u.getProgramInfoLog(D)),u.deleteProgram(D)},r.createShader=l,r.expandFloat32Array=function(u,d){let h=Math.min(2*u.length,d),D=new Float32Array(h);for(let p=0;p<u.length;p++)D[p]=u[p];return D},r.GLTexture=class{constructor(u){this.texture=u,this.version=-1}}},592:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseRenderLayer=void 0;let s=o(627),l=o(237),u=o(374),d=o(859);class h extends d.Disposable{constructor(p,a,i,c,_,g,C,S){super(),this._container=a,this._alpha=_,this._coreBrowserService=g,this._optionsService=C,this._themeService=S,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${i}-layer`),this._canvas.style.zIndex=c.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(T=>{this._refreshCharAtlas(p,T),this.reset(p)})),this.register((0,d.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,u.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(p){}handleFocus(p){}handleCursorMove(p){}handleGridChanged(p,a,i){}handleSelectionChanged(p,a,i,c=!1){}_setTransparency(p,a){if(a===this._alpha)return;let i=this._canvas;this._alpha=a,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,i),this._refreshCharAtlas(p,this._themeService.colors),this.handleGridChanged(p,0,p.rows-1)}_refreshCharAtlas(p,a){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,s.acquireTextureAtlas)(p,this._optionsService.rawOptions,a,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(p,a){this._deviceCellWidth=a.device.cell.width,this._deviceCellHeight=a.device.cell.height,this._deviceCharWidth=a.device.char.width,this._deviceCharHeight=a.device.char.height,this._deviceCharLeft=a.device.char.left,this._deviceCharTop=a.device.char.top,this._canvas.width=a.device.canvas.width,this._canvas.height=a.device.canvas.height,this._canvas.style.width=`${a.css.canvas.width}px`,this._canvas.style.height=`${a.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(p,this._themeService.colors)}_fillBottomLineAtCells(p,a,i=1){this._ctx.fillRect(p*this._deviceCellWidth,(a+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,i*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(p,a,i,c){this._alpha?this._ctx.clearRect(p*this._deviceCellWidth,a*this._deviceCellHeight,i*this._deviceCellWidth,c*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(p*this._deviceCellWidth,a*this._deviceCellHeight,i*this._deviceCellWidth,c*this._deviceCellHeight))}_fillCharTrueColor(p,a,i,c){this._ctx.font=this._getFont(p,!1,!1),this._ctx.textBaseline=l.TEXT_BASELINE,this._clipCell(i,c,a.getWidth()),this._ctx.fillText(a.getChars(),i*this._deviceCellWidth+this._deviceCharLeft,c*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(p,a,i){this._ctx.beginPath(),this._ctx.rect(p*this._deviceCellWidth,a*this._deviceCellHeight,i*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(p,a,i){return`${i?"italic":""} ${a?p.options.fontWeightBold:p.options.fontWeight} ${p.options.fontSize*this._coreBrowserService.dpr}px ${p.options.fontFamily}`}}r.BaseRenderLayer=h},733:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkRenderLayer=void 0;let s=o(197),l=o(237),u=o(592);class d extends u.BaseRenderLayer{constructor(D,p,a,i,c,_,g){super(a,D,"link",p,!0,c,_,g),this.register(i.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(i.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(D,p){super.resize(D,p),this._state=void 0}reset(D){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let D=this._state.y2-this._state.y1-1;D>0&&this._clearCells(0,this._state.y1+1,this._state.cols,D),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(D){if(D.fg===l.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:D.fg!==void 0&&(0,s.is256Color)(D.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[D.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,D.y1===D.y2)this._fillBottomLineAtCells(D.x1,D.y1,D.x2-D.x1);else{this._fillBottomLineAtCells(D.x1,D.y1,D.cols-D.x1);for(let p=D.y1+1;p<D.y2;p++)this._fillBottomLineAtCells(0,p,D.cols);this._fillBottomLineAtCells(0,D.y2,D.x2)}this._state=D}_handleHideLinkUnderline(D){this._clearCurrentLink()}}r.LinkRenderLayer=d},820:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(o,s,l,u){o.addEventListener(s,l,u);let d=!1;return{dispose:()=>{d||(d=!0,o.removeEventListener(s,l,u))}}}},274:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellColorResolver=void 0;let o,s=0,l=0,u=!1,d=!1,h=!1;r.CellColorResolver=class{constructor(D,p,a,i,c){this._terminal=D,this._selectionRenderModel=p,this._decorationService=a,this._coreBrowserService=i,this._themeService=c,this.result={fg:0,bg:0,ext:0}}resolve(D,p,a){this.result.bg=D.bg,this.result.fg=D.fg,this.result.ext=268435456&D.bg?D.extended.ext:0,l=0,s=0,d=!1,u=!1,h=!1,o=this._themeService.colors,this._decorationService.forEachDecorationAtCell(p,a,"bottom",i=>{i.backgroundColorRGB&&(l=i.backgroundColorRGB.rgba>>8&16777215,d=!0),i.foregroundColorRGB&&(s=i.foregroundColorRGB.rgba>>8&16777215,u=!0)}),h=this._selectionRenderModel.isCellSelected(this._terminal,p,a),h&&(l=(this._coreBrowserService.isFocused?o.selectionBackgroundOpaque:o.selectionInactiveBackgroundOpaque).rgba>>8&16777215,d=!0,o.selectionForeground&&(s=o.selectionForeground.rgba>>8&16777215,u=!0)),this._decorationService.forEachDecorationAtCell(p,a,"top",i=>{i.backgroundColorRGB&&(l=i.backgroundColorRGB.rgba>>8&16777215,d=!0),i.foregroundColorRGB&&(s=i.foregroundColorRGB.rgba>>8&16777215,u=!0)}),d&&(l=h?-16777216&D.bg&-134217729|l|50331648:-16777216&D.bg|l|50331648),u&&(s=-16777216&D.fg&-67108865|s|50331648),67108864&this.result.fg&&(d&&!u&&(s=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&o.background.rgba>>8|50331648,u=!0),!d&&u&&(l=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&o.foreground.rgba>>8|50331648,d=!0)),o=void 0,this.result.bg=d?l:this.result.bg,this.result.fg=u?s:this.result.fg}}},627:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.removeTerminalFromCache=r.acquireTextureAtlas=void 0;let s=o(509),l=o(197),u=[];r.acquireTextureAtlas=function(d,h,D,p,a,i,c,_){let g=(0,l.generateConfig)(p,a,i,c,h,D,_);for(let T=0;T<u.length;T++){let m=u[T],y=m.ownedBy.indexOf(d);if(y>=0){if((0,l.configEquals)(m.config,g))return m.atlas;m.ownedBy.length===1?(m.atlas.dispose(),u.splice(T,1)):m.ownedBy.splice(y,1);break}}for(let T=0;T<u.length;T++){let m=u[T];if((0,l.configEquals)(m.config,g))return m.ownedBy.push(d),m.atlas}let C=d._core,S={atlas:new s.TextureAtlas(document,g,C.unicodeService),config:g,ownedBy:[d]};return u.push(S),S.atlas},r.removeTerminalFromCache=function(d){for(let h=0;h<u.length;h++){let D=u[h].ownedBy.indexOf(d);if(D!==-1){u[h].ownedBy.length===1?(u[h].atlas.dispose(),u.splice(h,1)):u[h].ownedBy.splice(D,1);break}}}},197:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.is256Color=r.configEquals=r.generateConfig=void 0;let s=o(160);r.generateConfig=function(l,u,d,h,D,p,a){let i={foreground:p.foreground,background:p.background,cursor:s.NULL_COLOR,cursorAccent:s.NULL_COLOR,selectionForeground:s.NULL_COLOR,selectionBackgroundTransparent:s.NULL_COLOR,selectionBackgroundOpaque:s.NULL_COLOR,selectionInactiveBackgroundTransparent:s.NULL_COLOR,selectionInactiveBackgroundOpaque:s.NULL_COLOR,ansi:p.ansi.slice(),contrastCache:p.contrastCache,halfContrastCache:p.halfContrastCache};return{customGlyphs:D.customGlyphs,devicePixelRatio:a,letterSpacing:D.letterSpacing,lineHeight:D.lineHeight,deviceCellWidth:l,deviceCellHeight:u,deviceCharWidth:d,deviceCharHeight:h,fontFamily:D.fontFamily,fontSize:D.fontSize,fontWeight:D.fontWeight,fontWeightBold:D.fontWeightBold,allowTransparency:D.allowTransparency,drawBoldTextInBrightColors:D.drawBoldTextInBrightColors,minimumContrastRatio:D.minimumContrastRatio,colors:i}},r.configEquals=function(l,u){for(let d=0;d<l.colors.ansi.length;d++)if(l.colors.ansi[d].rgba!==u.colors.ansi[d].rgba)return!1;return l.devicePixelRatio===u.devicePixelRatio&&l.customGlyphs===u.customGlyphs&&l.lineHeight===u.lineHeight&&l.letterSpacing===u.letterSpacing&&l.fontFamily===u.fontFamily&&l.fontSize===u.fontSize&&l.fontWeight===u.fontWeight&&l.fontWeightBold===u.fontWeightBold&&l.allowTransparency===u.allowTransparency&&l.deviceCharWidth===u.deviceCharWidth&&l.deviceCharHeight===u.deviceCharHeight&&l.drawBoldTextInBrightColors===u.drawBoldTextInBrightColors&&l.minimumContrastRatio===u.minimumContrastRatio&&l.colors.foreground.rgba===u.colors.foreground.rgba&&l.colors.background.rgba===u.colors.background.rgba},r.is256Color=function(l){return(50331648&l)==16777216||(50331648&l)==33554432}},237:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;let s=o(399);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=s.isFirefox||s.isLegacyEdge?"bottom":"ideographic"},457:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CursorBlinkStateManager=void 0,r.CursorBlinkStateManager=class{constructor(o,s){this._renderCallback=o,this._coreBrowserService=s,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let s=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,s>0)return void this._restartInterval(s)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let s=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(s)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tryDrawCustomChar=r.powerlineDefinitions=r.boxDrawingDefinitions=r.blockElementDefinitions=void 0;let s=o(374);r.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let l={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};r.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(p,a)=>`M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a}`},"\u2551":{1:(p,a)=>`M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"\u2552":{1:(p,a)=>`M.5,1 L.5,${.5-a} L1,${.5-a} M.5,${.5+a} L1,${.5+a}`},"\u2553":{1:(p,a)=>`M${.5-p},1 L${.5-p},.5 L1,.5 M${.5+p},.5 L${.5+p},1`},"\u2554":{1:(p,a)=>`M1,${.5-a} L${.5-p},${.5-a} L${.5-p},1 M1,${.5+a} L${.5+p},${.5+a} L${.5+p},1`},"\u2555":{1:(p,a)=>`M0,${.5-a} L.5,${.5-a} L.5,1 M0,${.5+a} L.5,${.5+a}`},"\u2556":{1:(p,a)=>`M${.5+p},1 L${.5+p},.5 L0,.5 M${.5-p},.5 L${.5-p},1`},"\u2557":{1:(p,a)=>`M0,${.5+a} L${.5-p},${.5+a} L${.5-p},1 M0,${.5-a} L${.5+p},${.5-a} L${.5+p},1`},"\u2558":{1:(p,a)=>`M.5,0 L.5,${.5+a} L1,${.5+a} M.5,${.5-a} L1,${.5-a}`},"\u2559":{1:(p,a)=>`M1,.5 L${.5-p},.5 L${.5-p},0 M${.5+p},.5 L${.5+p},0`},"\u255A":{1:(p,a)=>`M1,${.5-a} L${.5+p},${.5-a} L${.5+p},0 M1,${.5+a} L${.5-p},${.5+a} L${.5-p},0`},"\u255B":{1:(p,a)=>`M0,${.5+a} L.5,${.5+a} L.5,0 M0,${.5-a} L.5,${.5-a}`},"\u255C":{1:(p,a)=>`M0,.5 L${.5+p},.5 L${.5+p},0 M${.5-p},.5 L${.5-p},0`},"\u255D":{1:(p,a)=>`M0,${.5-a} L${.5-p},${.5-a} L${.5-p},0 M0,${.5+a} L${.5+p},${.5+a} L${.5+p},0`},"\u255E":{1:(p,a)=>`M.5,0 L.5,1 M.5,${.5-a} L1,${.5-a} M.5,${.5+a} L1,${.5+a}`},"\u255F":{1:(p,a)=>`M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1 M${.5+p},.5 L1,.5`},"\u2560":{1:(p,a)=>`M${.5-p},0 L${.5-p},1 M1,${.5+a} L${.5+p},${.5+a} L${.5+p},1 M1,${.5-a} L${.5+p},${.5-a} L${.5+p},0`},"\u2561":{1:(p,a)=>`M.5,0 L.5,1 M0,${.5-a} L.5,${.5-a} M0,${.5+a} L.5,${.5+a}`},"\u2562":{1:(p,a)=>`M0,.5 L${.5-p},.5 M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"\u2563":{1:(p,a)=>`M${.5+p},0 L${.5+p},1 M0,${.5+a} L${.5-p},${.5+a} L${.5-p},1 M0,${.5-a} L${.5-p},${.5-a} L${.5-p},0`},"\u2564":{1:(p,a)=>`M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a} M.5,${.5+a} L.5,1`},"\u2565":{1:(p,a)=>`M0,.5 L1,.5 M${.5-p},.5 L${.5-p},1 M${.5+p},.5 L${.5+p},1`},"\u2566":{1:(p,a)=>`M0,${.5-a} L1,${.5-a} M0,${.5+a} L${.5-p},${.5+a} L${.5-p},1 M1,${.5+a} L${.5+p},${.5+a} L${.5+p},1`},"\u2567":{1:(p,a)=>`M.5,0 L.5,${.5-a} M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a}`},"\u2568":{1:(p,a)=>`M0,.5 L1,.5 M${.5-p},.5 L${.5-p},0 M${.5+p},.5 L${.5+p},0`},"\u2569":{1:(p,a)=>`M0,${.5+a} L1,${.5+a} M0,${.5-a} L${.5-p},${.5-a} L${.5-p},0 M1,${.5-a} L${.5+p},${.5-a} L${.5+p},0`},"\u256A":{1:(p,a)=>`M.5,0 L.5,1 M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a}`},"\u256B":{1:(p,a)=>`M0,.5 L1,.5 M${.5-p},0 L${.5-p},1 M${.5+p},0 L${.5+p},1`},"\u256C":{1:(p,a)=>`M0,${.5+a} L${.5-p},${.5+a} L${.5-p},1 M1,${.5+a} L${.5+p},${.5+a} L${.5+p},1 M0,${.5-a} L${.5-p},${.5-a} L${.5-p},0 M1,${.5-a} L${.5+p},${.5-a} L${.5+p},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(p,a)=>`M.5,1 L.5,${.5+a/.15*.5} C.5,${.5+a/.15*.5},.5,.5,1,.5`},"\u256E":{1:(p,a)=>`M.5,1 L.5,${.5+a/.15*.5} C.5,${.5+a/.15*.5},.5,.5,0,.5`},"\u256F":{1:(p,a)=>`M.5,0 L.5,${.5-a/.15*.5} C.5,${.5-a/.15*.5},.5,.5,0,.5`},"\u2570":{1:(p,a)=>`M.5,0 L.5,${.5-a/.15*.5} C.5,${.5-a/.15*.5},.5,.5,1,.5`}},r.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},r.powerlineDefinitions["\uE0BB"]=r.powerlineDefinitions["\uE0BD"],r.powerlineDefinitions["\uE0BF"]=r.powerlineDefinitions["\uE0B9"],r.tryDrawCustomChar=function(p,a,i,c,_,g,C,S){let T=r.blockElementDefinitions[a];if(T)return function(b,w,L,I,R,P){for(let W=0;W<w.length;W++){let M=w[W],A=R/8,x=P/8;b.fillRect(L+M.x*A,I+M.y*x,M.w*A,M.h*x)}}(p,T,i,c,_,g),!0;let m=l[a];if(m)return function(b,w,L,I,R,P){let W=u.get(w);W||(W=new Map,u.set(w,W));let M=b.fillStyle;if(typeof M!="string")throw new Error(`Unexpected fillStyle type "${M}"`);let A=W.get(M);if(!A){let x=w[0].length,H=w.length,U=document.createElement("canvas");U.width=x,U.height=H;let re=(0,s.throwIfFalsy)(U.getContext("2d")),oe=new ImageData(x,H),V,fe,F,N;if(M.startsWith("#"))V=parseInt(M.slice(1,3),16),fe=parseInt(M.slice(3,5),16),F=parseInt(M.slice(5,7),16),N=M.length>7&&parseInt(M.slice(7,9),16)||1;else{if(!M.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${M}" when drawing pattern glyph`);[V,fe,F,N]=M.substring(5,M.length-1).split(",").map(q=>parseFloat(q))}for(let q=0;q<H;q++)for(let k=0;k<x;k++)oe.data[4*(q*x+k)]=V,oe.data[4*(q*x+k)+1]=fe,oe.data[4*(q*x+k)+2]=F,oe.data[4*(q*x+k)+3]=w[q][k]*(255*N);re.putImageData(oe,0,0),A=(0,s.throwIfFalsy)(b.createPattern(U,null)),W.set(M,A)}b.fillStyle=A,b.fillRect(L,I,R,P)}(p,m,i,c,_,g),!0;let y=r.boxDrawingDefinitions[a];if(y)return function(b,w,L,I,R,P,W){b.strokeStyle=b.fillStyle;for(let[M,A]of Object.entries(w)){let x;b.beginPath(),b.lineWidth=W*Number.parseInt(M),x=typeof A=="function"?A(.15,.15/P*R):A;for(let H of x.split(" ")){let U=H[0],re=h[U];if(!re){console.error(`Could not find drawing instructions for "${U}"`);continue}let oe=H.substring(1).split(",");oe[0]&&oe[1]&&re(b,D(oe,R,P,L,I,!0,W))}b.stroke(),b.closePath()}}(p,y,i,c,_,g,S),!0;let E=r.powerlineDefinitions[a];return!!E&&(function(b,w,L,I,R,P,W,M){var A,x;let H=new Path2D;H.rect(L,I,R,P),b.clip(H),b.beginPath();let U=W/12;b.lineWidth=M*U;for(let re of w.d.split(" ")){let oe=re[0],V=h[oe];if(!V){console.error(`Could not find drawing instructions for "${oe}"`);continue}let fe=re.substring(1).split(",");fe[0]&&fe[1]&&V(b,D(fe,R,P,L,I,!1,M,((A=w.leftPadding)!==null&&A!==void 0?A:0)*(U/2),((x=w.rightPadding)!==null&&x!==void 0?x:0)*(U/2)))}w.type===1?(b.strokeStyle=b.fillStyle,b.stroke()):b.fill(),b.closePath()}(p,E,i,c,_,g,C,S),!0)};let u=new Map;function d(p,a,i=0){return Math.max(Math.min(p,a),i)}let h={C:(p,a)=>p.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]),L:(p,a)=>p.lineTo(a[0],a[1]),M:(p,a)=>p.moveTo(a[0],a[1])};function D(p,a,i,c,_,g,C,S=0,T=0){let m=p.map(y=>parseFloat(y)||parseInt(y));if(m.length<2)throw new Error("Too few arguments for instruction");for(let y=0;y<m.length;y+=2)m[y]*=a-S*C-T*C,g&&m[y]!==0&&(m[y]=d(Math.round(m[y]+.5)-.5,a,0)),m[y]+=c+S*C;for(let y=1;y<m.length;y+=2)m[y]*=i,g&&m[y]!==0&&(m[y]=d(Math.round(m[y]+.5)-.5,i,0)),m[y]+=_;return m}},56:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.observeDevicePixelDimensions=void 0;let s=o(859);r.observeDevicePixelDimensions=function(l,u,d){let h=new u.ResizeObserver(D=>{let p=D.find(c=>c.target===l);if(!p)return;if(!("devicePixelContentBoxSize"in p))return h?.disconnect(),void(h=void 0);let a=p.devicePixelContentBoxSize[0].inlineSize,i=p.devicePixelContentBoxSize[0].blockSize;a>0&&i>0&&d(a,i)});try{h.observe(l,{box:["device-pixel-content-box"]})}catch{h.disconnect(),h=void 0}return(0,s.toDisposable)(()=>h?.disconnect())}},374:(v,r)=>{function o(s){return 57508<=s&&s<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(s){if(!s)throw new Error("value must not be falsy");return s},r.isPowerlineGlyph=o,r.isRestrictedPowerlineGlyph=function(s){return 57520<=s&&s<=57527},r.excludeFromContrastRatioDemands=function(s){return o(s)||function(l){return 9472<=l&&l<=9631}(s)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(l,u,d,h=!1){if(this.selectionStart=u,this.selectionEnd=d,!u||!d||u[0]===d[0]&&u[1]===d[1])return void this.clear();let D=u[1]-l.buffer.active.viewportY,p=d[1]-l.buffer.active.viewportY,a=Math.max(D,0),i=Math.min(p,l.rows-1);a>=l.rows||i<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=h,this.viewportStartRow=D,this.viewportEndRow=p,this.viewportCappedStartRow=a,this.viewportCappedEndRow=i,this.startCol=u[0],this.endCol=d[0])}isCellSelected(l,u,d){return!!this.hasSelection&&(d-=l.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&d>=this.viewportCappedStartRow&&u<this.endCol&&d<=this.viewportCappedEndRow:u<this.startCol&&d>=this.viewportCappedStartRow&&u>=this.endCol&&d<=this.viewportCappedEndRow:d>this.viewportStartRow&&d<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&d===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&d===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&d===this.viewportStartRow&&u>=this.startCol)}}r.createSelectionRenderModel=function(){return new o}},509:function(v,r,o){var s=this&&this.__decorate||function(E,b,w,L){var I,R=arguments.length,P=R<3?b:L===null?L=Object.getOwnPropertyDescriptor(b,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(E,b,w,L);else for(var W=E.length-1;W>=0;W--)(I=E[W])&&(P=(R<3?I(P):R>3?I(b,w,P):I(b,w))||P);return R>3&&P&&Object.defineProperty(b,w,P),P};Object.defineProperty(r,"__esModule",{value:!0}),r.TextureAtlas=void 0;let l=o(237),u=o(860),d=o(374),h=o(160),D=o(345),p=o(485),a=o(385),i=o(147),c=o(855),_=o(776),g={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class S{get pages(){return this._pages}constructor(b,w,L){this._document=b,this._config=w,this._unicodeService=L,this._didWarmUp=!1,this._cacheMap=new p.FourKeyMap,this._cacheMapCombined=new p.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new i.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new D.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new D.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=y(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,d.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let b=new a.IdleTaskQueue;for(let w=33;w<126;w++)b.enqueue(()=>{if(!this._cacheMap.get(w,c.DEFAULT_COLOR,c.DEFAULT_COLOR,c.DEFAULT_EXT)){let L=this._drawToCache(w,c.DEFAULT_COLOR,c.DEFAULT_COLOR,c.DEFAULT_EXT);this._cacheMap.set(w,c.DEFAULT_COLOR,c.DEFAULT_COLOR,c.DEFAULT_EXT,L)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(S.maxAtlasPages&&this._pages.length>=Math.max(4,S.maxAtlasPages)){let w=this._pages.filter(A=>2*A.canvas.width<=(S.maxTextureSize||4096)).sort((A,x)=>x.canvas.width!==A.canvas.width?x.canvas.width-A.canvas.width:x.percentageUsed-A.percentageUsed),L=-1,I=0;for(let A=0;A<w.length;A++)if(w[A].canvas.width!==I)L=A,I=w[A].canvas.width;else if(A-L==3)break;let R=w.slice(L,L+4),P=R.map(A=>A.glyphs[0].texturePage).sort((A,x)=>A>x?1:-1),W=this.pages.length-R.length,M=this._mergePages(R,W);M.version++;for(let A=P.length-1;A>=0;A--)this._deletePage(P[A]);this.pages.push(M),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(M.canvas)}let b=new T(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,w){let L=2*b[0].canvas.width,I=new T(this._document,L,b);for(let[R,P]of b.entries()){let W=R*P.canvas.width%L,M=Math.floor(R/2)*P.canvas.height;I.ctx.drawImage(P.canvas,W,M);for(let x of P.glyphs)x.texturePage=w,x.sizeClipSpace.x=x.size.x/L,x.sizeClipSpace.y=x.size.y/L,x.texturePosition.x+=W,x.texturePosition.y+=M,x.texturePositionClipSpace.x=x.texturePosition.x/L,x.texturePositionClipSpace.y=x.texturePosition.y/L;this._onRemoveTextureAtlasCanvas.fire(P.canvas);let A=this._activePages.indexOf(P);A!==-1&&this._activePages.splice(A,1)}return I}_deletePage(b){this._pages.splice(b,1);for(let w=b;w<this._pages.length;w++){let L=this._pages[w];for(let I of L.glyphs)I.texturePage--;L.version++}}getRasterizedGlyphCombinedChar(b,w,L,I,R){return this._getFromCacheMap(this._cacheMapCombined,b,w,L,I,R)}getRasterizedGlyph(b,w,L,I,R){return this._getFromCacheMap(this._cacheMap,b,w,L,I,R)}_getFromCacheMap(b,w,L,I,R,P=!1){return C=b.get(w,L,I,R),C||(C=this._drawToCache(w,L,I,R,P),b.set(w,L,I,R,C)),C}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,w,L,I){if(this._config.allowTransparency)return h.NULL_COLOR;let R;switch(b){case 16777216:case 33554432:R=this._getColorFromAnsiIndex(w);break;case 50331648:let P=i.AttributeData.toColorRGB(w);R=h.rgba.toColor(P[0],P[1],P[2]);break;default:R=L?h.color.opaque(this._config.colors.foreground):this._config.colors.background}return R}_getForegroundColor(b,w,L,I,R,P,W,M,A,x){let H=this._getMinimumContrastColor(b,w,L,I,R,P,!1,A,M,x);if(H)return H;let U;switch(R){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&A&&P<8&&(P+=8),U=this._getColorFromAnsiIndex(P);break;case 50331648:let re=i.AttributeData.toColorRGB(P);U=h.rgba.toColor(re[0],re[1],re[2]);break;default:U=W?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(U=h.color.opaque(U)),M&&(U=h.color.multiplyOpacity(U,l.DIM_OPACITY)),U}_resolveBackgroundRgba(b,w,L){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(w).rgba;case 50331648:return w<<8;default:return L?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,w,L,I){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&I&&w<8&&(w+=8),this._getColorFromAnsiIndex(w).rgba;case 50331648:return w<<8;default:return L?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,w,L,I,R,P,W,M,A,x){if(this._config.minimumContrastRatio===1||x)return;let H=this._getContrastCache(A),U=H.getColor(b,I);if(U!==void 0)return U||void 0;let re=this._resolveBackgroundRgba(w,L,W),oe=this._resolveForegroundRgba(R,P,W,M),V=h.rgba.ensureContrastRatio(re,oe,this._config.minimumContrastRatio/(A?2:1));if(!V)return void H.setColor(b,I,null);let fe=h.rgba.toColor(V>>24&255,V>>16&255,V>>8&255);return H.setColor(b,I,fe),fe}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,w,L,I,R=!1){let P=typeof b=="number"?String.fromCharCode(b):b,W=Math.min(this._config.deviceCellWidth*Math.max(P.length,2)+4,this._textureSize);this._tmpCanvas.width<W&&(this._tmpCanvas.width=W);let M=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<M&&(this._tmpCanvas.height=M),this._tmpCtx.save(),this._workAttributeData.fg=L,this._workAttributeData.bg=w,this._workAttributeData.extended.ext=I,this._workAttributeData.isInvisible())return g;let A=!!this._workAttributeData.isBold(),x=!!this._workAttributeData.isInverse(),H=!!this._workAttributeData.isDim(),U=!!this._workAttributeData.isItalic(),re=!!this._workAttributeData.isUnderline(),oe=!!this._workAttributeData.isStrikethrough(),V=!!this._workAttributeData.isOverline(),fe=this._workAttributeData.getFgColor(),F=this._workAttributeData.getFgColorMode(),N=this._workAttributeData.getBgColor(),q=this._workAttributeData.getBgColorMode();if(x){let X=fe;fe=N,N=X;let me=F;F=q,q=me}let k=this._getBackgroundColor(q,N,x,H);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let le=A?this._config.fontWeightBold:this._config.fontWeight,Q=U?"italic":"";this._tmpCtx.font=`${Q} ${le} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=l.TEXT_BASELINE;let Me=P.length===1&&(0,d.isPowerlineGlyph)(P.charCodeAt(0)),et=P.length===1&&(0,d.isRestrictedPowerlineGlyph)(P.charCodeAt(0)),ke=this._getForegroundColor(w,q,N,L,F,fe,x,H,A,(0,d.excludeFromContrastRatioDemands)(P.charCodeAt(0)));this._tmpCtx.fillStyle=ke.css;let Re=et?0:4,$e=!1;this._config.customGlyphs!==!1&&($e=(0,u.tryDrawCustomChar)(this._tmpCtx,P,Re,Re,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Nt,Dr=!Me;if(Nt=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),re){this._tmpCtx.save();let X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),me=X%2==1?.5:0;if(this._tmpCtx.lineWidth=X,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Dr=!1,this._tmpCtx.strokeStyle=`rgb(${i.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Dr=!1;let lr=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&lr<8&&(lr+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(lr).css}this._tmpCtx.beginPath();let Be=Re,Ue=Math.ceil(Re+this._config.deviceCharHeight)-me-(R?2*X:0),Lt=Ue+X,rr=Ue+2*X;for(let lr=0;lr<Nt;lr++){this._tmpCtx.save();let rt=Be+lr*this._config.deviceCellWidth,Nn=Be+(lr+1)*this._config.deviceCellWidth,fp=rt+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(rt,Ue),this._tmpCtx.lineTo(Nn,Ue),this._tmpCtx.moveTo(rt,rr),this._tmpCtx.lineTo(Nn,rr);break;case 3:let of=X<=1?rr:Math.ceil(Re+this._config.deviceCharHeight-X/2)-me,uf=X<=1?Ue:Math.ceil(Re+this._config.deviceCharHeight+X/2)-me,eD=new Path2D;eD.rect(rt,Ue,this._config.deviceCellWidth,rr-Ue),this._tmpCtx.clip(eD),this._tmpCtx.moveTo(rt-this._config.deviceCellWidth/2,Lt),this._tmpCtx.bezierCurveTo(rt-this._config.deviceCellWidth/2,uf,rt,uf,rt,Lt),this._tmpCtx.bezierCurveTo(rt,of,fp,of,fp,Lt),this._tmpCtx.bezierCurveTo(fp,uf,Nn,uf,Nn,Lt),this._tmpCtx.bezierCurveTo(Nn,of,Nn+this._config.deviceCellWidth/2,of,Nn+this._config.deviceCellWidth/2,Lt);break;case 4:this._tmpCtx.setLineDash([Math.round(X),Math.round(X)]),this._tmpCtx.moveTo(rt,Ue),this._tmpCtx.lineTo(Nn,Ue);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(rt,Ue),this._tmpCtx.lineTo(Nn,Ue);break;default:this._tmpCtx.moveTo(rt,Ue),this._tmpCtx.lineTo(Nn,Ue)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!$e&&this._config.fontSize>=12&&!this._config.allowTransparency&&P!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let lr=this._tmpCtx.measureText(P);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in lr&&lr.actualBoundingBoxDescent>0){this._tmpCtx.save();let rt=new Path2D;rt.rect(Be,Ue-Math.ceil(X/2),this._config.deviceCellWidth*Nt,rr-Ue+Math.ceil(X/2)),this._tmpCtx.clip(rt),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=k.css,this._tmpCtx.strokeText(P,Re,Re+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(V){let X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),me=X%2==1?.5:0;this._tmpCtx.lineWidth=X,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Re,Re+me),this._tmpCtx.lineTo(Re+this._config.deviceCharWidth*Nt,Re+me),this._tmpCtx.stroke()}if($e||this._tmpCtx.fillText(P,Re,Re+this._config.deviceCharHeight),P==="_"&&!this._config.allowTransparency){let X=m(this._tmpCtx.getImageData(Re,Re,this._config.deviceCellWidth,this._config.deviceCellHeight),k,ke,Dr);if(X)for(let me=1;me<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(P,Re,Re+this._config.deviceCharHeight-me),X=m(this._tmpCtx.getImageData(Re,Re,this._config.deviceCellWidth,this._config.deviceCellHeight),k,ke,Dr),X);me++);}if(oe){let X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),me=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=X,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Re,Re+Math.floor(this._config.deviceCharHeight/2)-me),this._tmpCtx.lineTo(Re+this._config.deviceCharWidth*Nt,Re+Math.floor(this._config.deviceCharHeight/2)-me),this._tmpCtx.stroke()}this._tmpCtx.restore();let Er=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),Tt;if(Tt=this._config.allowTransparency?function(X){for(let me=0;me<X.data.length;me+=4)if(X.data[me+3]>0)return!1;return!0}(Er):m(Er,k,ke,Dr),Tt)return g;let ce=this._findGlyphBoundingBox(Er,this._workBoundingBox,W,et,$e,Re),ue,ne;for(;;){if(this._activePages.length===0){let X=this._createNewPage();ue=X,ne=X.currentRow,ne.height=ce.size.y;break}ue=this._activePages[this._activePages.length-1],ne=ue.currentRow;for(let X of this._activePages)ce.size.y<=X.currentRow.height&&(ue=X,ne=X.currentRow);for(let X=this._activePages.length-1;X>=0;X--)for(let me of this._activePages[X].fixedRows)me.height<=ne.height&&ce.size.y<=me.height&&(ue=this._activePages[X],ne=me);if(ne.y+ce.size.y>=ue.canvas.height||ne.height>ce.size.y+2){let X=!1;if(ue.currentRow.y+ue.currentRow.height+ce.size.y>=ue.canvas.height){let me;for(let Be of this._activePages)if(Be.currentRow.y+Be.currentRow.height+ce.size.y<Be.canvas.height){me=Be;break}if(me)ue=me;else if(S.maxAtlasPages&&this._pages.length>=S.maxAtlasPages&&ne.y+ce.size.y<=ue.canvas.height&&ne.height>=ce.size.y&&ne.x+ce.size.x<=ue.canvas.width)X=!0;else{let Be=this._createNewPage();ue=Be,ne=Be.currentRow,ne.height=ce.size.y,X=!0}}X||(ue.currentRow.height>0&&ue.fixedRows.push(ue.currentRow),ne={x:0,y:ue.currentRow.y+ue.currentRow.height,height:ce.size.y},ue.fixedRows.push(ne),ue.currentRow={x:0,y:ne.y+ne.height,height:0})}if(ne.x+ce.size.x<=ue.canvas.width)break;ne===ue.currentRow?(ne.x=0,ne.y+=ne.height,ne.height=0):ue.fixedRows.splice(ue.fixedRows.indexOf(ne),1)}return ce.texturePage=this._pages.indexOf(ue),ce.texturePosition.x=ne.x,ce.texturePosition.y=ne.y,ce.texturePositionClipSpace.x=ne.x/ue.canvas.width,ce.texturePositionClipSpace.y=ne.y/ue.canvas.height,ce.sizeClipSpace.x/=ue.canvas.width,ce.sizeClipSpace.y/=ue.canvas.height,ne.height=Math.max(ne.height,ce.size.y),ne.x+=ce.size.x,ue.ctx.putImageData(Er,ce.texturePosition.x-this._workBoundingBox.left,ce.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ce.size.x,ce.size.y),ue.addGlyph(ce),ue.version++,ce}_findGlyphBoundingBox(b,w,L,I,R,P){w.top=0;let W=I?this._config.deviceCellHeight:this._tmpCanvas.height,M=I?this._config.deviceCellWidth:L,A=!1;for(let x=0;x<W;x++){for(let H=0;H<M;H++){let U=x*this._tmpCanvas.width*4+4*H+3;if(b.data[U]!==0){w.top=x,A=!0;break}}if(A)break}w.left=0,A=!1;for(let x=0;x<P+M;x++){for(let H=0;H<W;H++){let U=H*this._tmpCanvas.width*4+4*x+3;if(b.data[U]!==0){w.left=x,A=!0;break}}if(A)break}w.right=M,A=!1;for(let x=P+M-1;x>=P;x--){for(let H=0;H<W;H++){let U=H*this._tmpCanvas.width*4+4*x+3;if(b.data[U]!==0){w.right=x,A=!0;break}}if(A)break}w.bottom=W,A=!1;for(let x=W-1;x>=0;x--){for(let H=0;H<M;H++){let U=x*this._tmpCanvas.width*4+4*H+3;if(b.data[U]!==0){w.bottom=x,A=!0;break}}if(A)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:w.right-w.left+1,y:w.bottom-w.top+1},sizeClipSpace:{x:w.right-w.left+1,y:w.bottom-w.top+1},offset:{x:-w.left+P+(I||R?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-w.top+P+(I||R?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}r.TextureAtlas=S,s([_.traceCall],S.prototype,"_drawToCache",null);class T{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,w,L){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],L)for(let I of L)this._glyphs.push(...I.glyphs),this._usedPixels+=I._usedPixels;this.canvas=y(b,w,w),this.ctx=(0,d.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function m(E,b,w,L){let I=b.rgba>>>24,R=b.rgba>>>16&255,P=b.rgba>>>8&255,W=w.rgba>>>24,M=w.rgba>>>16&255,A=w.rgba>>>8&255,x=Math.floor((Math.abs(I-W)+Math.abs(R-M)+Math.abs(P-A))/12),H=!0;for(let U=0;U<E.data.length;U+=4)E.data[U]===I&&E.data[U+1]===R&&E.data[U+2]===P||L&&Math.abs(E.data[U]-I)+Math.abs(E.data[U+1]-R)+Math.abs(E.data[U+2]-P)<x?E.data[U+3]=0:H=!1;return H}function y(E,b,w){let L=E.createElement("canvas");return L.width=b,L.height=w,L}},160:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let s=o(399),l=0,u=0,d=0,h=0;var D,p,a,i,c;function _(C){let S=C.toString(16);return S.length<2?"0"+S:S}function g(C,S){return C<S?(S+.05)/(C+.05):(C+.05)/(S+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(S,T,m,y){return y!==void 0?`#${_(S)}${_(T)}${_(m)}${_(y)}`:`#${_(S)}${_(T)}${_(m)}`},C.toRgba=function(S,T,m,y=255){return(S<<24|T<<16|m<<8|y)>>>0}}(D||(r.channels=D={})),function(C){function S(T,m){return h=Math.round(255*m),[l,u,d]=c.toChannels(T.rgba),{css:D.toCss(l,u,d,h),rgba:D.toRgba(l,u,d,h)}}C.blend=function(T,m){if(h=(255&m.rgba)/255,h===1)return{css:m.css,rgba:m.rgba};let y=m.rgba>>24&255,E=m.rgba>>16&255,b=m.rgba>>8&255,w=T.rgba>>24&255,L=T.rgba>>16&255,I=T.rgba>>8&255;return l=w+Math.round((y-w)*h),u=L+Math.round((E-L)*h),d=I+Math.round((b-I)*h),{css:D.toCss(l,u,d),rgba:D.toRgba(l,u,d)}},C.isOpaque=function(T){return(255&T.rgba)==255},C.ensureContrastRatio=function(T,m,y){let E=c.ensureContrastRatio(T.rgba,m.rgba,y);if(E)return c.toColor(E>>24&255,E>>16&255,E>>8&255)},C.opaque=function(T){let m=(255|T.rgba)>>>0;return[l,u,d]=c.toChannels(m),{css:D.toCss(l,u,d),rgba:m}},C.opacity=S,C.multiplyOpacity=function(T,m){return h=255&T.rgba,S(T,h*m/255)},C.toColorRGB=function(T){return[T.rgba>>24&255,T.rgba>>16&255,T.rgba>>8&255]}}(p||(r.color=p={})),function(C){let S,T;if(!s.isNode){let m=document.createElement("canvas");m.width=1,m.height=1;let y=m.getContext("2d",{willReadFrequently:!0});y&&(S=y,S.globalCompositeOperation="copy",T=S.createLinearGradient(0,0,1,1))}C.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return l=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),d=parseInt(m.slice(3,4).repeat(2),16),c.toColor(l,u,d);case 5:return l=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),d=parseInt(m.slice(3,4).repeat(2),16),h=parseInt(m.slice(4,5).repeat(2),16),c.toColor(l,u,d,h);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}let y=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(y)return l=parseInt(y[1]),u=parseInt(y[2]),d=parseInt(y[3]),h=Math.round(255*(y[5]===void 0?1:parseFloat(y[5]))),c.toColor(l,u,d,h);if(!S||!T)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=T,S.fillStyle=m,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[l,u,d,h]=S.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:D.toRgba(l,u,d,h),css:m}}}(a||(r.css=a={})),function(C){function S(T,m,y){let E=T/255,b=m/255,w=y/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))}C.relativeLuminance=function(T){return S(T>>16&255,T>>8&255,255&T)},C.relativeLuminance2=S}(i||(r.rgb=i={})),function(C){function S(m,y,E){let b=m>>24&255,w=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=g(i.relativeLuminance2(I,R,P),i.relativeLuminance2(b,w,L));for(;W<E&&(I>0||R>0||P>0);)I-=Math.max(0,Math.ceil(.1*I)),R-=Math.max(0,Math.ceil(.1*R)),P-=Math.max(0,Math.ceil(.1*P)),W=g(i.relativeLuminance2(I,R,P),i.relativeLuminance2(b,w,L));return(I<<24|R<<16|P<<8|255)>>>0}function T(m,y,E){let b=m>>24&255,w=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=g(i.relativeLuminance2(I,R,P),i.relativeLuminance2(b,w,L));for(;W<E&&(I<255||R<255||P<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),R=Math.min(255,R+Math.ceil(.1*(255-R))),P=Math.min(255,P+Math.ceil(.1*(255-P))),W=g(i.relativeLuminance2(I,R,P),i.relativeLuminance2(b,w,L));return(I<<24|R<<16|P<<8|255)>>>0}C.ensureContrastRatio=function(m,y,E){let b=i.relativeLuminance(m>>8),w=i.relativeLuminance(y>>8);if(g(b,w)<E){if(w<b){let R=S(m,y,E),P=g(b,i.relativeLuminance(R>>8));if(P<E){let W=T(m,y,E);return P>g(b,i.relativeLuminance(W>>8))?R:W}return R}let L=T(m,y,E),I=g(b,i.relativeLuminance(L>>8));if(I<E){let R=S(m,y,E);return I>g(b,i.relativeLuminance(R>>8))?L:R}return L}},C.reduceLuminance=S,C.increaseLuminance=T,C.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]},C.toColor=function(m,y,E,b){return{css:D.toCss(m,y,E,b),rgba:D.toRgba(m,y,E,b)}}}(c||(r.rgba=c={})),r.toPaddedHex=_,r.contrastRatio=g},345:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let s=0;s<this._listeners.length;s++)if(this._listeners[s]===o)return void this._listeners.splice(s,1)}}})),this._event}fire(o,s){let l=[];for(let u=0;u<this._listeners.length;u++)l.push(this._listeners[u]);for(let u=0;u<l.length;u++)l[u].call(void 0,o,s)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(o,s){return o(l=>s.fire(l))}},859:(v,r)=>{function o(s){for(let l of s)l.dispose();s.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let s of this._disposables)s.dispose();this._disposables.length=0}register(s){return this._disposables.push(s),s}unregister(s){let l=this._disposables.indexOf(s);l!==-1&&this._disposables.splice(l,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(s){var l;this._isDisposed||s===this._value||((l=this._value)===null||l===void 0||l.dispose(),this._value=s)}clear(){this.value=void 0}dispose(){var s;this._isDisposed=!0,(s=this._value)===null||s===void 0||s.dispose(),this._value=void 0}},r.toDisposable=function(s){return{dispose:s}},r.disposeArray=o,r.getDisposeArrayDisposable=function(s){return{dispose:()=>o(s)}}},485:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(l,u,d){this._data[l]||(this._data[l]={}),this._data[l][u]=d}get(l,u){return this._data[l]?this._data[l][u]:void 0}clear(){this._data={}}}r.TwoKeyMap=o,r.FourKeyMap=class{constructor(){this._data=new o}set(s,l,u,d,h){this._data.get(s,l)||this._data.set(s,l,new o),this._data.get(s,l).set(u,d,h)}get(s,l,u,d){var h;return(h=this._data.get(s,l))===null||h===void 0?void 0:h.get(u,d)}clear(){this._data.clear()}}},399:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";let o=r.isNode?"node":navigator.userAgent,s=r.isNode?"node":navigator.platform;r.isFirefox=o.includes("Firefox"),r.isLegacyEdge=o.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(o),r.getSafariVersion=function(){if(!r.isSafari)return 0;let l=o.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(s),r.isIpad=s==="iPad",r.isIphone=s==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(s),r.isLinux=s.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(o)},385:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;let s=o(399);class l{constructor(){this._tasks=[],this._i=0}enqueue(h){this._tasks.push(h),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(h){this._idleCallback=void 0;let D=0,p=0,a=h.timeRemaining(),i=0;for(;this._i<this._tasks.length;){if(D=Date.now(),this._tasks[this._i]()||this._i++,D=Math.max(1,Date.now()-D),p=Math.max(D,p),i=h.timeRemaining(),1.5*p>i)return a-D<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-D))}ms`),void this._start();a=i}this.clear()}}class u extends l{_requestCallback(h){return setTimeout(()=>h(this._createDeadline(16)))}_cancelCallback(h){clearTimeout(h)}_createDeadline(h){let D=Date.now()+h;return{timeRemaining:()=>Math.max(0,D-Date.now())}}}r.PriorityTaskQueue=u,r.IdleTaskQueue=!s.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(d){return requestIdleCallback(d)}_cancelCallback(d){cancelIdleCallback(d)}}:u,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(d){this._queue.clear(),this._queue.enqueue(d)}flush(){this._queue.flush()}}},147:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new s}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){let u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=o;class s{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,d=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=d}clone(){return new s(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=s},782:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;let s=o(133),l=o(855),u=o(147);class d extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(D){let p=new d;return p.setFromCharData(D),p}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,s.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(D){this.fg=D[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let p=!1;if(D[l.CHAR_DATA_CHAR_INDEX].length>2)p=!0;else if(D[l.CHAR_DATA_CHAR_INDEX].length===2){let a=D[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){let i=D[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(a-55296)+i-56320+65536|D[l.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=D[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|D[l.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=D[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|D[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=d},855:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},133:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},r.utf32ToString=function(o,s=0,l=o.length){let u="";for(let d=s;d<l;++d){let h=o[d];h>65535?(h-=65536,u+=String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):u+=String.fromCharCode(h)}return u},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,s){let l=o.length;if(!l)return 0;let u=0,d=0;if(this._interim){let h=o.charCodeAt(d++);56320<=h&&h<=57343?s[u++]=1024*(this._interim-55296)+h-56320+65536:(s[u++]=this._interim,s[u++]=h),this._interim=0}for(let h=d;h<l;++h){let D=o.charCodeAt(h);if(55296<=D&&D<=56319){if(++h>=l)return this._interim=D,u;let p=o.charCodeAt(h);56320<=p&&p<=57343?s[u++]=1024*(D-55296)+p-56320+65536:(s[u++]=D,s[u++]=p)}else D!==65279&&(s[u++]=D)}return u}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,s){let l=o.length;if(!l)return 0;let u,d,h,D,p=0,a=0,i=0;if(this.interim[0]){let g=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,T=0;for(;(S=63&this.interim[++T])&&T<4;)C<<=6,C|=S;let m=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=m-T;for(;i<y;){if(i>=l)return 0;if(S=o[i++],(192&S)!=128){i--,g=!0;break}this.interim[T++]=S,C<<=6,C|=63&S}g||(m===2?C<128?i--:s[p++]=C:m===3?C<2048||C>=55296&&C<=57343||C===65279||(s[p++]=C):C<65536||C>1114111||(s[p++]=C)),this.interim.fill(0)}let c=l-4,_=i;for(;_<l;){for(;!(!(_<c)||128&(u=o[_])||128&(d=o[_+1])||128&(h=o[_+2])||128&(D=o[_+3]));)s[p++]=u,s[p++]=d,s[p++]=h,s[p++]=D,_+=4;if(u=o[_++],u<128)s[p++]=u;else if((224&u)==192){if(_>=l)return this.interim[0]=u,p;if(d=o[_++],(192&d)!=128){_--;continue}if(a=(31&u)<<6|63&d,a<128){_--;continue}s[p++]=a}else if((240&u)==224){if(_>=l)return this.interim[0]=u,p;if(d=o[_++],(192&d)!=128){_--;continue}if(_>=l)return this.interim[0]=u,this.interim[1]=d,p;if(h=o[_++],(192&h)!=128){_--;continue}if(a=(15&u)<<12|(63&d)<<6|63&h,a<2048||a>=55296&&a<=57343||a===65279)continue;s[p++]=a}else if((248&u)==240){if(_>=l)return this.interim[0]=u,p;if(d=o[_++],(192&d)!=128){_--;continue}if(_>=l)return this.interim[0]=u,this.interim[1]=d,p;if(h=o[_++],(192&h)!=128){_--;continue}if(_>=l)return this.interim[0]=u,this.interim[1]=d,this.interim[2]=h,p;if(D=o[_++],(192&D)!=128){_--;continue}if(a=(7&u)<<18|(63&d)<<12|(63&h)<<6|63&D,a<65536||a>1114111)continue;s[p++]=a}}return p}}},776:function(v,r,o){var s=this&&this.__decorate||function(a,i,c,_){var g,C=arguments.length,S=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,i,c,_);else for(var T=a.length-1;T>=0;T--)(g=a[T])&&(S=(C<3?g(S):C>3?g(i,c,S):g(i,c))||S);return C>3&&S&&Object.defineProperty(i,c,S),S},l=this&&this.__param||function(a,i){return function(c,_){i(c,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;let u=o(859),d=o(97),h={trace:d.LogLevelEnum.TRACE,debug:d.LogLevelEnum.DEBUG,info:d.LogLevelEnum.INFO,warn:d.LogLevelEnum.WARN,error:d.LogLevelEnum.ERROR,off:d.LogLevelEnum.OFF},D,p=r.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=d.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),D=this}_updateLogLevel(){this._logLevel=h[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let i=0;i<a.length;i++)typeof a[i]=="function"&&(a[i]=a[i]())}_log(a,i,c){this._evalLazyOptionalParams(c),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+i,...c)}trace(a,...i){var c,_;this._logLevel<=d.LogLevelEnum.TRACE&&this._log((_=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.trace.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,a,i)}debug(a,...i){var c,_;this._logLevel<=d.LogLevelEnum.DEBUG&&this._log((_=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.debug.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,a,i)}info(a,...i){var c,_;this._logLevel<=d.LogLevelEnum.INFO&&this._log((_=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.info.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.info,a,i)}warn(a,...i){var c,_;this._logLevel<=d.LogLevelEnum.WARN&&this._log((_=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.warn.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.warn,a,i)}error(a,...i){var c,_;this._logLevel<=d.LogLevelEnum.ERROR&&this._log((_=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.error.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.error,a,i)}};r.LogService=p=s([l(0,d.IOptionsService)],p),r.setTraceLogger=function(a){D=a},r.traceCall=function(a,i,c){if(typeof c.value!="function")throw new Error("not supported");let _=c.value;c.value=function(...g){if(D.logLevel!==d.LogLevelEnum.TRACE)return _.apply(this,g);D.trace(`GlyphRenderer#${_.name}(${g.map(S=>JSON.stringify(S)).join(", ")})`);let C=_.apply(this,g);return D.trace(`GlyphRenderer#${_.name} return`,C),C}}},726:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;let o="di$target",s="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(l){return l[s]||[]},r.createDecorator=function(l){if(r.serviceRegistry.has(l))return r.serviceRegistry.get(l);let u=function(d,h,D){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(p,a,i){a[o]===a?a[s].push({id:p,index:i}):(a[s]=[{id:p,index:i}],a[o]=a)})(u,d,D)};return u.toString=()=>l,r.serviceRegistry.set(l,u),u}},97:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;let s=o(726);var l;r.IBufferService=(0,s.createDecorator)("BufferService"),r.ICoreMouseService=(0,s.createDecorator)("CoreMouseService"),r.ICoreService=(0,s.createDecorator)("CoreService"),r.ICharsetService=(0,s.createDecorator)("CharsetService"),r.IInstantiationService=(0,s.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(l||(r.LogLevelEnum=l={})),r.ILogService=(0,s.createDecorator)("LogService"),r.IOptionsService=(0,s.createDecorator)("OptionsService"),r.IOscLinkService=(0,s.createDecorator)("OscLinkService"),r.IUnicodeService=(0,s.createDecorator)("UnicodeService"),r.IDecorationService=(0,s.createDecorator)("DecorationService")}},t={};function n(v){var r=t[v];if(r!==void 0)return r.exports;var o=t[v]={exports:{}};return e[v].call(o.exports,o,o.exports,n),o.exports}var f={};return(()=>{var v=f;Object.defineProperty(v,"__esModule",{value:!0}),v.WebglAddon=void 0;let r=n(345),o=n(859),s=n(399),l=n(666),u=n(776);class d extends o.Disposable{constructor(D){if(s.isSafari&&(0,s.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=D,this._onChangeTextureAtlas=this.register(new r.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new r.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new r.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new r.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(D){let p=D._core;if(!D.element)return void this.register(p.onWillOpen(()=>this.activate(D)));this._terminal=D;let a=p.coreService,i=p.optionsService,c=p,_=c._renderService,g=c._characterJoinerService,C=c._charSizeService,S=c._coreBrowserService,T=c._decorationService,m=c._logService,y=c._themeService;(0,u.setTraceLogger)(m),this._renderer=this.register(new l.WebglRenderer(D,g,C,S,a,T,i,y,this._preserveDrawingBuffer)),this.register((0,r.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,r.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,r.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,r.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),_.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{let E=this._terminal._core._renderService;E.setRenderer(this._terminal._core._createRenderer()),E.handleResize(D.cols,D.rows)}))}get textureAtlas(){var D;return(D=this._renderer)===null||D===void 0?void 0:D.textureAtlas}clearTextureAtlas(){var D;(D=this._renderer)===null||D===void 0||D.clearTextureAtlas()}}v.WebglAddon=d})(),f})())});var $1=cf((V_,tg)=>{(function(e,t){typeof V_=="object"&&typeof tg=="object"?tg.exports=t():typeof define=="function"&&define.amd?define([],t):typeof V_=="object"?V_.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkComputer=r.WebLinkProvider=void 0,r.WebLinkProvider=class{constructor(s,l,u,d={}){this._terminal=s,this._regex=l,this._handler=u,this._options=d}provideLinks(s,l){let u=o.computeLink(s,this._regex,this._terminal,this._handler);l(this._addCallbacks(u))}_addCallbacks(s){return s.map(l=>(l.leave=this._options.leave,l.hover=(u,d)=>{if(this._options.hover){let{range:h}=l;this._options.hover(u,d,h)}},l))}};class o{static computeLink(l,u,d,h){let D=new RegExp(u.source,(u.flags||"")+"g"),[p,a]=o._getWindowedLineStrings(l-1,d),i=p.join(""),c,_=[];for(;c=D.exec(i);){let g=c[0];try{let E=new URL(g),b=decodeURI(E.toString());if(g!==b&&g+"/"!==b)continue}catch{continue}let[C,S]=o._mapStrIdx(d,a,0,c.index),[T,m]=o._mapStrIdx(d,C,S,g.length);if(C===-1||S===-1||T===-1||m===-1)continue;let y={start:{x:S+1,y:C+1},end:{x:m,y:T+1}};_.push({range:y,text:g,activate:h})}return _}static _getWindowedLineStrings(l,u){let d,h=l,D=l,p=0,a="",i=[];if(d=u.buffer.active.getLine(l)){let c=d.translateToString(!0);if(d.isWrapped&&c[0]!==" "){for(p=0;(d=u.buffer.active.getLine(--h))&&p<2048&&(a=d.translateToString(!0),p+=a.length,i.push(a),d.isWrapped&&a.indexOf(" ")===-1););i.reverse()}for(i.push(c),p=0;(d=u.buffer.active.getLine(++D))&&d.isWrapped&&p<2048&&(a=d.translateToString(!0),p+=a.length,i.push(a),a.indexOf(" ")===-1););}return[i,h]}static _mapStrIdx(l,u,d,h){let D=l.buffer.active,p=D.getNullCell(),a=d;for(;h;){let i=D.getLine(u);if(!i)return[-1,-1];for(let c=a;c<i.length;++c){i.getCell(c,p);let _=p.getChars();if(p.getWidth()&&(h-=_.length||1,c===i.length-1&&_==="")){let g=D.getLine(u+1);g&&g.isWrapped&&(g.getCell(0,p),p.getWidth()===2&&(h+=1))}if(h<0)return[u,c]}u++,a=0}return[u,a]}}r.LinkComputer=o}},t={};function n(v){var r=t[v];if(r!==void 0)return r.exports;var o=t[v]={exports:{}};return e[v](o,o.exports,n),o.exports}var f={};return(()=>{var v=f;Object.defineProperty(v,"__esModule",{value:!0}),v.WebLinksAddon=void 0;let r=n(6),o=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function s(l,u){let d=window.open();if(d){try{d.opener=null}catch{}d.location.href=u}else console.warn("Opening link blocked as opener could not be cleared")}v.WebLinksAddon=class{constructor(l=s,u={}){this._handler=l,this._options=u}activate(l){this._terminal=l;let u=this._options,d=u.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new r.WebLinkProvider(this._terminal,d,this._handler,u))}dispose(){var l;(l=this._linkProvider)===null||l===void 0||l.dispose()}}})(),f})())});var Q1=cf((j_,og)=>{(function(e,t){if(typeof j_=="object"&&typeof og=="object")og.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var f in n)(typeof j_=="object"?j_:e)[f]=n[f]}})(self,()=>(()=>{"use strict";var e={4567:function(v,r,o){var s=this&&this.__decorate||function(_,g,C,S){var T,m=arguments.length,y=m<3?g:S===null?S=Object.getOwnPropertyDescriptor(g,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(_,g,C,S);else for(var E=_.length-1;E>=0;E--)(T=_[E])&&(y=(m<3?T(y):m>3?T(g,C,y):T(g,C))||y);return m>3&&y&&Object.defineProperty(g,C,y),y},l=this&&this.__param||function(_,g){return function(C,S){g(C,S,_)}};Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityManager=void 0;let u=o(9042),d=o(6114),h=o(9924),D=o(844),p=o(5596),a=o(4725),i=o(3656),c=r.AccessibilityManager=class extends D.Disposable{constructor(_,g){super(),this._terminal=_,this._renderService=g,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new h.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new p.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,i.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,D.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(_){for(let g=0;g<_;g++)this._handleChar(" ")}_handleChar(_){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==_&&(this._charsToAnnounce+=_):this._charsToAnnounce+=_,_===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),d.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,d.isMac&&this._liveRegion.remove()}_handleKey(_){this._clearLiveRegion(),/\p{Control}/u.test(_)||this._charsToConsume.push(_)}_refreshRows(_,g){this._liveRegionDebouncer.refresh(_,g,this._terminal.rows)}_renderRows(_,g){let C=this._terminal.buffer,S=C.lines.length.toString();for(let T=_;T<=g;T++){let m=C.translateBufferLineToString(C.ydisp+T,!0),y=(C.ydisp+T+1).toString(),E=this._rowElements[T];E&&(m.length===0?E.innerText="\xA0":E.textContent=m,E.setAttribute("aria-posinset",y),E.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(_,g){let C=_.target,S=this._rowElements[g===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||_.relatedTarget!==S)return;let T,m;if(g===0?(T=C,m=this._rowElements.pop(),this._rowContainer.removeChild(m)):(T=this._rowElements.shift(),m=C,this._rowContainer.removeChild(T)),T.removeEventListener("focus",this._topBoundaryFocusListener),m.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){let y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{let y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),_.preventDefault(),_.stopImmediatePropagation()}_handleResize(_){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>_;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let _=document.createElement("div");return _.setAttribute("role","listitem"),_.tabIndex=-1,this._refreshRowDimensions(_),_}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let _=0;_<this._terminal.rows;_++)this._refreshRowDimensions(this._rowElements[_])}}_refreshRowDimensions(_){_.style.height=`${this._renderService.dimensions.css.cell.height}px`}};r.AccessibilityManager=c=s([l(1,a.IRenderService)],c)},3614:(v,r)=>{function o(d){return d.replace(/\r?\n/g,"\r")}function s(d,h){return h?"\x1B[200~"+d+"\x1B[201~":d}function l(d,h,D,p){d=s(d=o(d),D.decPrivateModes.bracketedPasteMode&&p.rawOptions.ignoreBracketedPasteMode!==!0),D.triggerDataEvent(d,!0),h.value=""}function u(d,h,D){let p=D.getBoundingClientRect(),a=d.clientX-p.left-10,i=d.clientY-p.top-10;h.style.width="20px",h.style.height="20px",h.style.left=`${a}px`,h.style.top=`${i}px`,h.style.zIndex="1000",h.focus()}Object.defineProperty(r,"__esModule",{value:!0}),r.rightClickHandler=r.moveTextAreaUnderMouseCursor=r.paste=r.handlePasteEvent=r.copyHandler=r.bracketTextForPaste=r.prepareTextForTerminal=void 0,r.prepareTextForTerminal=o,r.bracketTextForPaste=s,r.copyHandler=function(d,h){d.clipboardData&&d.clipboardData.setData("text/plain",h.selectionText),d.preventDefault()},r.handlePasteEvent=function(d,h,D,p){d.stopPropagation(),d.clipboardData&&l(d.clipboardData.getData("text/plain"),h,D,p)},r.paste=l,r.moveTextAreaUnderMouseCursor=u,r.rightClickHandler=function(d,h,D,p,a){u(d,h,D),a&&p.rightClickSelect(d),h.value=p.selectionText,h.select()}},7239:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorContrastCache=void 0;let s=o(1505);r.ColorContrastCache=class{constructor(){this._color=new s.TwoKeyMap,this._css=new s.TwoKeyMap}setCss(l,u,d){this._css.set(l,u,d)}getCss(l,u){return this._css.get(l,u)}setColor(l,u,d){this._color.set(l,u,d)}getColor(l,u){return this._color.get(l,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(o,s,l,u){o.addEventListener(s,l,u);let d=!1;return{dispose:()=>{d||(d=!0,o.removeEventListener(s,l,u))}}}},6465:function(v,r,o){var s=this&&this.__decorate||function(a,i,c,_){var g,C=arguments.length,S=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,i,c,_);else for(var T=a.length-1;T>=0;T--)(g=a[T])&&(S=(C<3?g(S):C>3?g(i,c,S):g(i,c))||S);return C>3&&S&&Object.defineProperty(i,c,S),S},l=this&&this.__param||function(a,i){return function(c,_){i(c,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Linkifier2=void 0;let u=o(3656),d=o(8460),h=o(844),D=o(2585),p=r.Linkifier2=class extends h.Disposable{get currentLink(){return this._currentLink}constructor(a){super(),this._bufferService=a,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new d.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new d.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,h.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,h.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(a){return this._linkProviders.push(a),{dispose:()=>{let i=this._linkProviders.indexOf(a);i!==-1&&this._linkProviders.splice(i,1)}}}attachToDom(a,i,c){this._element=a,this._mouseService=i,this._renderService=c,this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){if(this._lastMouseEvent=a,!this._element||!this._mouseService)return;let i=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!i)return;this._isMouseOut=!1;let c=a.composedPath();for(let _=0;_<c.length;_++){let g=c[_];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._handleHover(i),this._lastBufferCell=i)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,i){var c,_;this._activeProviderReplies&&i||((c=this._activeProviderReplies)===null||c===void 0||c.forEach(C=>{C?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let g=!1;for(let[C,S]of this._linkProviders.entries())i?!((_=this._activeProviderReplies)===null||_===void 0)&&_.get(C)&&(g=this._checkLinkProviderResult(C,a,g)):S.provideLinks(a.y,T=>{var m,y;if(this._isMouseOut)return;let E=T?.map(b=>({link:b}));(m=this._activeProviderReplies)===null||m===void 0||m.set(C,E),g=this._checkLinkProviderResult(C,a,g),((y=this._activeProviderReplies)===null||y===void 0?void 0:y.size)===this._linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,i){let c=new Set;for(let _=0;_<i.size;_++){let g=i.get(_);if(g)for(let C=0;C<g.length;C++){let S=g[C],T=S.link.range.start.y<a?0:S.link.range.start.x,m=S.link.range.end.y>a?this._bufferService.cols:S.link.range.end.x;for(let y=T;y<=m;y++){if(c.has(y)){g.splice(C--,1);break}c.add(y)}}}}_checkLinkProviderResult(a,i,c){var _;if(!this._activeProviderReplies)return c;let g=this._activeProviderReplies.get(a),C=!1;for(let S=0;S<a;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(C=!0);if(!C&&g){let S=g.find(T=>this._linkAtPosition(T.link,i));S&&(c=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(let S=0;S<this._activeProviderReplies.size;S++){let T=(_=this._activeProviderReplies.get(S))===null||_===void 0?void 0:_.find(m=>this._linkAtPosition(m.link,i));if(T){c=!0,this._handleNewLink(T);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._element||!this._mouseService||!this._currentLink)return;let i=this._positionFromMouseEvent(a,this._element,this._mouseService);i&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!a||!i||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,h.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(a.link,i)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var c,_;return(_=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||_===void 0?void 0:_.decorations.pointerCursor},set:c=>{var _,g;!((_=this._currentLink)===null||_===void 0)&&_.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&((g=this._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:()=>{var c,_;return(_=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||_===void 0?void 0:_.decorations.underline},set:c=>{var _,g,C;!((_=this._currentLink)===null||_===void 0)&&_.state&&((C=(g=this._currentLink)===null||g===void 0?void 0:g.state)===null||C===void 0?void 0:C.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;let _=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=_&&this._currentLink.link.range.end.y<=g&&(this._clearCurrentLink(_,g),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(a,i,c){var _;!((_=this._currentLink)===null||_===void 0)&&_.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(c,i.text)}_fireUnderlineEvent(a,i){let c=a.range,_=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-_-1,c.end.x,c.end.y-_-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(a,i,c){var _;!((_=this._currentLink)===null||_===void 0)&&_.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(c,i.text)}_linkAtPosition(a,i){let c=a.range.start.y*this._bufferService.cols+a.range.start.x,_=a.range.end.y*this._bufferService.cols+a.range.end.x,g=i.y*this._bufferService.cols+i.x;return c<=g&&g<=_}_positionFromMouseEvent(a,i,c){let _=c.getCoords(a,i,this._bufferService.cols,this._bufferService.rows);if(_)return{x:_[0],y:_[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,i,c,_,g){return{x1:a,y1:i,x2:c,y2:_,cols:this._bufferService.cols,fg:g}}};r.Linkifier2=p=s([l(0,D.IBufferService)],p)},9042:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tooMuchOutput=r.promptLabel=void 0,r.promptLabel="Terminal input",r.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(v,r,o){var s=this&&this.__decorate||function(p,a,i,c){var _,g=arguments.length,C=g<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,i):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(p,a,i,c);else for(var S=p.length-1;S>=0;S--)(_=p[S])&&(C=(g<3?_(C):g>3?_(a,i,C):_(a,i))||C);return g>3&&C&&Object.defineProperty(a,i,C),C},l=this&&this.__param||function(p,a){return function(i,c){a(i,c,p)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkProvider=void 0;let u=o(511),d=o(2585),h=r.OscLinkProvider=class{constructor(p,a,i){this._bufferService=p,this._optionsService=a,this._oscLinkService=i}provideLinks(p,a){var i;let c=this._bufferService.buffer.lines.get(p-1);if(!c)return void a(void 0);let _=[],g=this._optionsService.rawOptions.linkHandler,C=new u.CellData,S=c.getTrimmedLength(),T=-1,m=-1,y=!1;for(let E=0;E<S;E++)if(m!==-1||c.hasContent(E)){if(c.loadCell(E,C),C.hasExtendedAttrs()&&C.extended.urlId){if(m===-1){m=E,T=C.extended.urlId;continue}y=C.extended.urlId!==T}else m!==-1&&(y=!0);if(y||m!==-1&&E===S-1){let b=(i=this._oscLinkService.getLinkData(T))===null||i===void 0?void 0:i.uri;if(b){let w={start:{x:m+1,y:p},end:{x:E+(y||E!==S-1?0:1),y:p}},L=!1;if(!g?.allowNonHttpProtocols)try{let I=new URL(b);["http:","https:"].includes(I.protocol)||(L=!0)}catch{L=!0}L||_.push({text:b,range:w,activate:(I,R)=>g?g.activate(I,R,w):D(0,R),hover:(I,R)=>{var P;return(P=g?.hover)===null||P===void 0?void 0:P.call(g,I,R,w)},leave:(I,R)=>{var P;return(P=g?.leave)===null||P===void 0?void 0:P.call(g,I,R,w)}})}y=!1,C.hasExtendedAttrs()&&C.extended.urlId?(m=E,T=C.extended.urlId):(m=-1,T=-1)}}a(_)}};function D(p,a){if(confirm(`Do you want to navigate to ${a}?

WARNING: This link could potentially be dangerous`)){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}}r.OscLinkProvider=h=s([l(0,d.IBufferService),l(1,d.IOptionsService),l(2,d.IOscLinkService)],h)},6193:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderDebouncer=void 0,r.RenderDebouncer=class{constructor(o,s){this._parentWindow=o,this._renderCallback=s,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,s,l){this._rowCount=l,o=o!==void 0?o:0,s=s!==void 0?s:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,s):s,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),s=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,s),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ScreenDprMonitor=void 0;let s=o(844);class l extends s.Disposable{constructor(d){super(),this._parentWindow=d,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,s.toDisposable)(()=>{this.clearListener()}))}setListener(d){this._listener&&this.clearListener(),this._listener=d,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var d;this._outerListener&&((d=this._resolutionMediaMatchList)===null||d===void 0||d.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}r.ScreenDprMonitor=l},3236:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;let s=o(3614),l=o(3656),u=o(6465),d=o(9042),h=o(3730),D=o(1680),p=o(3107),a=o(5744),i=o(2950),c=o(1296),_=o(428),g=o(4269),C=o(5114),S=o(8934),T=o(3230),m=o(9312),y=o(4725),E=o(6731),b=o(8055),w=o(8969),L=o(8460),I=o(844),R=o(6114),P=o(8437),W=o(2584),M=o(7399),A=o(5941),x=o(9074),H=o(2585),U=o(5435),re=o(4567),oe=typeof window<"u"?window.document:null;class V extends w.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(F={}){super(F),this.browser=R,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new I.MutableDisposable),this._onCursorMove=this.register(new L.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new L.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new L.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new L.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new L.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new L.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new L.EventEmitter),this._onBlur=this.register(new L.EventEmitter),this._onA11yCharEmitter=this.register(new L.EventEmitter),this._onA11yTabEmitter=this.register(new L.EventEmitter),this._onWillOpen=this.register(new L.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(u.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(h.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(x.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((N,q)=>this.refresh(N,q))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(N=>this._reportWindowsOptions(N))),this.register(this._inputHandler.onColor(N=>this._handleColorEvent(N))),this.register((0,L.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,L.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,L.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,L.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(N=>this._afterResize(N.cols,N.rows))),this.register((0,I.toDisposable)(()=>{var N,q;this._customKeyEventHandler=void 0,(q=(N=this.element)===null||N===void 0?void 0:N.parentNode)===null||q===void 0||q.removeChild(this.element)}))}_handleColorEvent(F){if(this._themeService)for(let N of F){let q,k="";switch(N.index){case 256:q="foreground",k="10";break;case 257:q="background",k="11";break;case 258:q="cursor",k="12";break;default:q="ansi",k="4;"+N.index}switch(N.type){case 0:let le=b.color.toColorRGB(q==="ansi"?this._themeService.colors.ansi[N.index]:this._themeService.colors[q]);this.coreService.triggerDataEvent(`${W.C0.ESC}]${k};${(0,A.toRgbString)(le)}${W.C1_ESCAPED.ST}`);break;case 1:if(q==="ansi")this._themeService.modifyColors(Q=>Q.ansi[N.index]=b.rgba.toColor(...N.color));else{let Q=q;this._themeService.modifyColors(Me=>Me[Q]=b.rgba.toColor(...N.color))}break;case 2:this._themeService.restoreColor(N.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(F){F?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(re.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(F){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[I"),this.updateCursorStyle(F),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var F;return(F=this.textarea)===null||F===void 0?void 0:F.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let F=this.buffer.ybase+this.buffer.y,N=this.buffer.lines.get(F);if(!N)return;let q=Math.min(this.buffer.x,this.cols-1),k=this._renderService.dimensions.css.cell.height,le=N.getWidth(q),Q=this._renderService.dimensions.css.cell.width*le,Me=this.buffer.y*this._renderService.dimensions.css.cell.height,et=q*this._renderService.dimensions.css.cell.width;this.textarea.style.left=et+"px",this.textarea.style.top=Me+"px",this.textarea.style.width=Q+"px",this.textarea.style.height=k+"px",this.textarea.style.lineHeight=k+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,l.addDisposableDomListener)(this.element,"copy",N=>{this.hasSelection()&&(0,s.copyHandler)(N,this._selectionService)}));let F=N=>(0,s.handlePasteEvent)(N,this.textarea,this.coreService,this.optionsService);this.register((0,l.addDisposableDomListener)(this.textarea,"paste",F)),this.register((0,l.addDisposableDomListener)(this.element,"paste",F)),R.isFirefox?this.register((0,l.addDisposableDomListener)(this.element,"mousedown",N=>{N.button===2&&(0,s.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,l.addDisposableDomListener)(this.element,"contextmenu",N=>{(0,s.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),R.isLinux&&this.register((0,l.addDisposableDomListener)(this.element,"auxclick",N=>{N.button===1&&(0,s.moveTextAreaUnderMouseCursor)(N,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,l.addDisposableDomListener)(this.textarea,"keyup",F=>this._keyUp(F),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keydown",F=>this._keyDown(F),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keypress",F=>this._keyPress(F),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionupdate",F=>this._compositionHelper.compositionupdate(F))),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,l.addDisposableDomListener)(this.textarea,"input",F=>this._inputEvent(F),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(F){var N;if(!F)throw new Error("Terminal requires a parent element.");F.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=F.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),F.appendChild(this.element);let q=oe.createDocumentFragment();this._viewportElement=oe.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),q.appendChild(this._viewportElement),this._viewportScrollArea=oe.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=oe.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=oe.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),q.appendChild(this.screenElement),this.textarea=oe.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",d.promptLabel),R.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(N=this._document.defaultView)!==null&&N!==void 0?N:window),this._instantiationService.setService(y.ICoreBrowserService,this._coreBrowserService),this.register((0,l.addDisposableDomListener)(this.textarea,"focus",k=>this._handleTextAreaFocus(k))),this.register((0,l.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(_.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(y.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(y.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(g.CharacterJoinerService),this._instantiationService.setService(y.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(T.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(y.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(k=>this._onRender.fire(k))),this.onResize(k=>this._renderService.resize(k.cols,k.rows)),this._compositionView=oe.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(i.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(q);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(y.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(D.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(y.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(k=>this._renderService.handleSelectionChanged(k.start,k.end,k.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(k=>{this.textarea.value=k,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(k=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(p.BufferDecorationRenderer,this.screenElement)),this.register((0,l.addDisposableDomListener)(this.element,"mousedown",k=>this._selectionService.handleMouseDown(k))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(re.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",k=>this._handleScreenReaderModeOptionChange(k))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",k=>{!this._overviewRulerRenderer&&k&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(c.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let F=this,N=this.element;function q(Q){let Me=F._mouseService.getMouseReportCoords(Q,F.screenElement);if(!Me)return!1;let et,ke;switch(Q.overrideType||Q.type){case"mousemove":ke=32,Q.buttons===void 0?(et=3,Q.button!==void 0&&(et=Q.button<3?Q.button:3)):et=1&Q.buttons?0:4&Q.buttons?1:2&Q.buttons?2:3;break;case"mouseup":ke=0,et=Q.button<3?Q.button:3;break;case"mousedown":ke=1,et=Q.button<3?Q.button:3;break;case"wheel":if(F.viewport.getLinesScrolled(Q)===0)return!1;ke=Q.deltaY<0?0:1,et=4;break;default:return!1}return!(ke===void 0||et===void 0||et>4)&&F.coreMouseService.triggerMouseEvent({col:Me.col,row:Me.row,x:Me.x,y:Me.y,button:et,action:ke,ctrl:Q.ctrlKey,alt:Q.altKey,shift:Q.shiftKey})}let k={mouseup:null,wheel:null,mousedrag:null,mousemove:null},le={mouseup:Q=>(q(Q),Q.buttons||(this._document.removeEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.removeEventListener("mousemove",k.mousedrag)),this.cancel(Q)),wheel:Q=>(q(Q),this.cancel(Q,!0)),mousedrag:Q=>{Q.buttons&&q(Q)},mousemove:Q=>{Q.buttons||q(Q)}};this.register(this.coreMouseService.onProtocolChange(Q=>{Q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Q?k.mousemove||(N.addEventListener("mousemove",le.mousemove),k.mousemove=le.mousemove):(N.removeEventListener("mousemove",k.mousemove),k.mousemove=null),16&Q?k.wheel||(N.addEventListener("wheel",le.wheel,{passive:!1}),k.wheel=le.wheel):(N.removeEventListener("wheel",k.wheel),k.wheel=null),2&Q?k.mouseup||(N.addEventListener("mouseup",le.mouseup),k.mouseup=le.mouseup):(this._document.removeEventListener("mouseup",k.mouseup),N.removeEventListener("mouseup",k.mouseup),k.mouseup=null),4&Q?k.mousedrag||(k.mousedrag=le.mousedrag):(this._document.removeEventListener("mousemove",k.mousedrag),k.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,l.addDisposableDomListener)(N,"mousedown",Q=>{if(Q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Q))return q(Q),k.mouseup&&this._document.addEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.addEventListener("mousemove",k.mousedrag),this.cancel(Q)})),this.register((0,l.addDisposableDomListener)(N,"wheel",Q=>{if(!k.wheel){if(!this.buffer.hasScrollback){let Me=this.viewport.getLinesScrolled(Q);if(Me===0)return;let et=W.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Q.deltaY<0?"A":"B"),ke="";for(let Re=0;Re<Math.abs(Me);Re++)ke+=et;return this.coreService.triggerDataEvent(ke,!0),this.cancel(Q,!0)}return this.viewport.handleWheel(Q)?this.cancel(Q):void 0}},{passive:!1})),this.register((0,l.addDisposableDomListener)(N,"touchstart",Q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Q),this.cancel(Q)},{passive:!0})),this.register((0,l.addDisposableDomListener)(N,"touchmove",Q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Q)?void 0:this.cancel(Q)},{passive:!1}))}refresh(F,N){var q;(q=this._renderService)===null||q===void 0||q.refreshRows(F,N)}updateCursorStyle(F){var N;!((N=this._selectionService)===null||N===void 0)&&N.shouldColumnSelect(F)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(F,N,q=0){var k;q===1?(super.scrollLines(F,N,q),this.refresh(0,this.rows-1)):(k=this.viewport)===null||k===void 0||k.scrollLines(F)}paste(F){(0,s.paste)(F,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(F){this._customKeyEventHandler=F}registerLinkProvider(F){return this.linkifier2.registerLinkProvider(F)}registerCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let N=this._characterJoinerService.register(F);return this.refresh(0,this.rows-1),N}deregisterCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(F)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(F){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+F)}registerDecoration(F){return this._decorationService.registerDecoration(F)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(F,N,q){this._selectionService.setSelection(F,N,q)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var F;(F=this._selectionService)===null||F===void 0||F.clearSelection()}selectAll(){var F;(F=this._selectionService)===null||F===void 0||F.selectAll()}selectLines(F,N){var q;(q=this._selectionService)===null||q===void 0||q.selectLines(F,N)}_keyDown(F){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;let N=this.browser.isMac&&this.options.macOptionIsMeta&&F.altKey;if(!N&&!this._compositionHelper.keydown(F))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;N||F.key!=="Dead"&&F.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let q=(0,M.evaluateKeyboardEvent)(F,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(F),q.type===3||q.type===2){let k=this.rows-1;return this.scrollLines(q.type===2?-k:k),this.cancel(F,!0)}return q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,F)||(q.cancel&&this.cancel(F,!0),!q.key||!!(F.key&&!F.ctrlKey&&!F.altKey&&!F.metaKey&&F.key.length===1&&F.key.charCodeAt(0)>=65&&F.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(q.key!==W.C0.ETX&&q.key!==W.C0.CR||(this.textarea.value=""),this._onKey.fire({key:q.key,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(q.key,!0),!this.optionsService.rawOptions.screenReaderMode||F.altKey||F.ctrlKey?this.cancel(F,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(F,N){let q=F.isMac&&!this.options.macOptionIsMeta&&N.altKey&&!N.ctrlKey&&!N.metaKey||F.isWindows&&N.altKey&&N.ctrlKey&&!N.metaKey||F.isWindows&&N.getModifierState("AltGraph");return N.type==="keypress"?q:q&&(!N.keyCode||N.keyCode>47)}_keyUp(F){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1||(function(N){return N.keyCode===16||N.keyCode===17||N.keyCode===18}(F)||this.focus(),this.updateCursorStyle(F),this._keyPressHandled=!1)}_keyPress(F){let N;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;if(this.cancel(F),F.charCode)N=F.charCode;else if(F.which===null||F.which===void 0)N=F.keyCode;else{if(F.which===0||F.charCode===0)return!1;N=F.which}return!(!N||(F.altKey||F.ctrlKey||F.metaKey)&&!this._isThirdLevelShift(this.browser,F)||(N=String.fromCharCode(N),this._onKey.fire({key:N,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(N,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(F){if(F.data&&F.inputType==="insertText"&&(!F.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let N=F.data;return this.coreService.triggerDataEvent(N,!0),this.cancel(F),!0}return!1}resize(F,N){F!==this.cols||N!==this.rows?super.resize(F,N):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(F,N){var q,k;(q=this._charSizeService)===null||q===void 0||q.measure(),(k=this.viewport)===null||k===void 0||k.syncScrollArea(!0)}clear(){var F;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let N=1;N<this.rows;N++)this.buffer.lines.push(this.buffer.getBlankLine(P.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(F=this.viewport)===null||F===void 0||F.reset(),this.refresh(0,this.rows-1)}}reset(){var F,N;this.options.rows=this.rows,this.options.cols=this.cols;let q=this._customKeyEventHandler;this._setup(),super.reset(),(F=this._selectionService)===null||F===void 0||F.reset(),this._decorationService.reset(),(N=this.viewport)===null||N===void 0||N.reset(),this._customKeyEventHandler=q,this.refresh(0,this.rows-1)}clearTextureAtlas(){var F;(F=this._renderService)===null||F===void 0||F.clearTextureAtlas()}_reportFocus(){var F;!((F=this.element)===null||F===void 0)&&F.classList.contains("focus")?this.coreService.triggerDataEvent(W.C0.ESC+"[I"):this.coreService.triggerDataEvent(W.C0.ESC+"[O")}_reportWindowsOptions(F){if(this._renderService)switch(F){case U.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let N=this._renderService.dimensions.css.canvas.width.toFixed(0),q=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[4;${q};${N}t`);break;case U.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let k=this._renderService.dimensions.css.cell.width.toFixed(0),le=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[6;${le};${k}t`)}}cancel(F,N){if(this.options.cancelEvents||N)return F.preventDefault(),F.stopPropagation(),!1}}r.Terminal=V},9924:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TimeBasedDebouncer=void 0,r.TimeBasedDebouncer=class{constructor(o,s=1e3){this._renderCallback=o,this._debounceThresholdMS=s,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,s,l){this._rowCount=l,o=o!==void 0?o:0,s=s!==void 0?s:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,s):s;let u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){let d=u-this._lastRefreshMs,h=this._debounceThresholdMS-d;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},h)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),s=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,s)}}},1680:function(v,r,o){var s=this&&this.__decorate||function(i,c,_,g){var C,S=arguments.length,T=S<3?c:g===null?g=Object.getOwnPropertyDescriptor(c,_):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(i,c,_,g);else for(var m=i.length-1;m>=0;m--)(C=i[m])&&(T=(S<3?C(T):S>3?C(c,_,T):C(c,_))||T);return S>3&&T&&Object.defineProperty(c,_,T),T},l=this&&this.__param||function(i,c){return function(_,g){c(_,g,i)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Viewport=void 0;let u=o(3656),d=o(4725),h=o(8460),D=o(844),p=o(2585),a=r.Viewport=class extends D.Disposable{constructor(i,c,_,g,C,S,T,m){super(),this._viewportElement=i,this._scrollArea=c,this._bufferService=_,this._optionsService=g,this._charSizeService=C,this._renderService=S,this._coreBrowserService=T,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new h.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(y=>this._renderDimensions=y)),this._handleThemeChange(m.colors),this.register(m.onChangeColors(y=>this._handleThemeChange(y))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(i){this._viewportElement.style.backgroundColor=i.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(i){if(i)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let c=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==c&&(this._lastRecordedBufferHeight=c,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._refreshAnimationFrame=null}syncScrollArea(i=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(i);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(i)}_handleScroll(i){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let c=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let i=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(i*(this._smoothScrollState.target-this._smoothScrollState.origin)),i<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(i,c){let _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(c<0&&this._viewportElement.scrollTop!==0||c>0&&_<this._lastRecordedBufferHeight)||(i.cancelable&&i.preventDefault(),!1)}handleWheel(i){let c=this._getPixelsScrolled(i);return c!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+c:this._smoothScrollState.target+=c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=c,this._bubbleScroll(i,c))}scrollLines(i){if(i!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let c=i*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:i,suppressScrollEvent:!1})}_getPixelsScrolled(i){if(i.deltaY===0||i.shiftKey)return 0;let c=this._applyScrollModifier(i.deltaY,i);return i.deltaMode===WheelEvent.DOM_DELTA_LINE?c*=this._currentRowHeight:i.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._currentRowHeight*this._bufferService.rows),c}getBufferElements(i,c){var _;let g,C="",S=[],T=c??this._bufferService.buffer.lines.length,m=this._bufferService.buffer.lines;for(let y=i;y<T;y++){let E=m.get(y);if(!E)continue;let b=(_=m.get(y+1))===null||_===void 0?void 0:_.isWrapped;if(C+=E.translateToString(!b),!b||y===m.length-1){let w=document.createElement("div");w.textContent=C,S.push(w),C.length>0&&(g=w),C=""}}return{bufferElements:S,cursorElement:g}}getLinesScrolled(i){if(i.deltaY===0||i.shiftKey)return 0;let c=this._applyScrollModifier(i.deltaY,i);return i.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(c/=this._currentRowHeight+0,this._wheelPartialScroll+=c,c=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):i.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._bufferService.rows),c}_applyScrollModifier(i,c){let _=this._optionsService.rawOptions.fastScrollModifier;return _==="alt"&&c.altKey||_==="ctrl"&&c.ctrlKey||_==="shift"&&c.shiftKey?i*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:i*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(i){this._lastTouchY=i.touches[0].pageY}handleTouchMove(i){let c=this._lastTouchY-i.touches[0].pageY;return this._lastTouchY=i.touches[0].pageY,c!==0&&(this._viewportElement.scrollTop+=c,this._bubbleScroll(i,c))}};r.Viewport=a=s([l(2,p.IBufferService),l(3,p.IOptionsService),l(4,d.ICharSizeService),l(5,d.IRenderService),l(6,d.ICoreBrowserService),l(7,d.IThemeService)],a)},3107:function(v,r,o){var s=this&&this.__decorate||function(a,i,c,_){var g,C=arguments.length,S=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,i,c,_);else for(var T=a.length-1;T>=0;T--)(g=a[T])&&(S=(C<3?g(S):C>3?g(i,c,S):g(i,c))||S);return C>3&&S&&Object.defineProperty(i,c,S),S},l=this&&this.__param||function(a,i){return function(c,_){i(c,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferDecorationRenderer=void 0;let u=o(3656),d=o(4725),h=o(844),D=o(2585),p=r.BufferDecorationRenderer=class extends h.Disposable{constructor(a,i,c,_){super(),this._screenElement=a,this._bufferService=i,this._decorationService=c,this._renderService=_,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(g=>this._removeDecoration(g))),this.register((0,h.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let a of this._decorationService.decorations)this._renderDecoration(a);this._dimensionsChanged=!1}_renderDecoration(a){this._refreshStyle(a),this._dimensionsChanged&&this._refreshXPosition(a)}_createElement(a){var i,c;let _=document.createElement("div");_.classList.add("xterm-decoration"),_.classList.toggle("xterm-decoration-top-layer",((i=a?.options)===null||i===void 0?void 0:i.layer)==="top"),_.style.width=`${Math.round((a.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,_.style.height=(a.options.height||1)*this._renderService.dimensions.css.cell.height+"px",_.style.top=(a.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",_.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let g=(c=a.options.x)!==null&&c!==void 0?c:0;return g&&g>this._bufferService.cols&&(_.style.display="none"),this._refreshXPosition(a,_),_}_refreshStyle(a){let i=a.marker.line-this._bufferService.buffers.active.ydisp;if(i<0||i>=this._bufferService.rows)a.element&&(a.element.style.display="none",a.onRenderEmitter.fire(a.element));else{let c=this._decorationElements.get(a);c||(c=this._createElement(a),a.element=c,this._decorationElements.set(a,c),this._container.appendChild(c),a.onDispose(()=>{this._decorationElements.delete(a),c.remove()})),c.style.top=i*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",a.onRenderEmitter.fire(c)}}_refreshXPosition(a,i=a.element){var c;if(!i)return;let _=(c=a.options.x)!==null&&c!==void 0?c:0;(a.options.anchor||"left")==="right"?i.style.right=_?_*this._renderService.dimensions.css.cell.width+"px":"":i.style.left=_?_*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(a){var i;(i=this._decorationElements.get(a))===null||i===void 0||i.remove(),this._decorationElements.delete(a),a.dispose()}};r.BufferDecorationRenderer=p=s([l(1,D.IBufferService),l(2,D.IDecorationService),l(3,d.IRenderService)],p)},5871:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorZoneStore=void 0,r.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let s of this._zones)if(s.color===o.options.overviewRulerOptions.color&&s.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(s,o.marker.line))return;if(this._lineAdjacentToZone(s,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(s,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,s){return s>=o.startBufferLine&&s<=o.endBufferLine}_lineAdjacentToZone(o,s,l){return s>=o.startBufferLine-this._linePadding[l||"full"]&&s<=o.endBufferLine+this._linePadding[l||"full"]}_addLineToZone(o,s){o.startBufferLine=Math.min(o.startBufferLine,s),o.endBufferLine=Math.max(o.endBufferLine,s)}}},5744:function(v,r,o){var s=this&&this.__decorate||function(g,C,S,T){var m,y=arguments.length,E=y<3?C:T===null?T=Object.getOwnPropertyDescriptor(C,S):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,C,S,T);else for(var b=g.length-1;b>=0;b--)(m=g[b])&&(E=(y<3?m(E):y>3?m(C,S,E):m(C,S))||E);return y>3&&E&&Object.defineProperty(C,S,E),E},l=this&&this.__param||function(g,C){return function(S,T){C(S,T,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OverviewRulerRenderer=void 0;let u=o(5871),d=o(3656),h=o(4725),D=o(844),p=o(2585),a={full:0,left:0,center:0,right:0},i={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0},_=r.OverviewRulerRenderer=class extends D.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,C,S,T,m,y,E){var b;super(),this._viewportElement=g,this._screenElement=C,this._bufferService=S,this._decorationService=T,this._renderService=m,this._optionsService=y,this._coreBrowseService=E,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(b=this._viewportElement.parentElement)===null||b===void 0||b.insertBefore(this._canvas,this._viewportElement);let w=this._canvas.getContext("2d");if(!w)throw new Error("Ctx cannot be null");this._ctx=w,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,D.toDisposable)(()=>{var L;(L=this._canvas)===null||L===void 0||L.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,d.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let g=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);i.full=this._canvas.width,i.left=g,i.center=C,i.right=g,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=i.left,c.right=i.left+i.center}_refreshDrawHeightConstants(){a.full=Math.round(2*this._coreBrowseService.dpr);let g=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowseService.dpr);a.left=C,a.center=C,a.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let g=this._colorZoneStore.zones;for(let C of g)C.position!=="full"&&this._renderColorZone(C);for(let C of g)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(c[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-a[g.position||"full"]/2),i[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+a[g.position||"full"]))}_queueRefresh(g,C){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r.OverviewRulerRenderer=_=s([l(2,p.IBufferService),l(3,p.IDecorationService),l(4,h.IRenderService),l(5,p.IOptionsService),l(6,h.ICoreBrowserService)],_)},2950:function(v,r,o){var s=this&&this.__decorate||function(p,a,i,c){var _,g=arguments.length,C=g<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,i):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(p,a,i,c);else for(var S=p.length-1;S>=0;S--)(_=p[S])&&(C=(g<3?_(C):g>3?_(a,i,C):_(a,i))||C);return g>3&&C&&Object.defineProperty(a,i,C),C},l=this&&this.__param||function(p,a){return function(i,c){a(i,c,p)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionHelper=void 0;let u=o(4725),d=o(2585),h=o(2584),D=r.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(p,a,i,c,_,g){this._textarea=p,this._compositionView=a,this._bufferService=i,this._optionsService=c,this._coreService=_,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(p){this._compositionView.textContent=p.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(p){if(this._isComposing||this._isSendingComposition){if(p.keyCode===229||p.keyCode===16||p.keyCode===17||p.keyCode===18)return!1;this._finalizeComposition(!1)}return p.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(p){if(this._compositionView.classList.remove("active"),this._isComposing=!1,p){let a={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let i;this._isSendingComposition=!1,a.start+=this._dataAlreadySent.length,i=this._isComposing?this._textarea.value.substring(a.start,a.end):this._textarea.value.substring(a.start),i.length>0&&this._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;let a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}}_handleAnyTextareaChanges(){let p=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let a=this._textarea.value,i=a.replace(p,"");this._dataAlreadySent=i,a.length>p.length?this._coreService.triggerDataEvent(i,!0):a.length<p.length?this._coreService.triggerDataEvent(`${h.C0.DEL}`,!0):a.length===p.length&&a!==p&&this._coreService.triggerDataEvent(a,!0)}},0)}updateCompositionElements(p){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let a=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.css.cell.height,c=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,_=a*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=_+"px",this._compositionView.style.top=c+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let g=this._compositionView.getBoundingClientRect();this._textarea.style.left=_+"px",this._textarea.style.top=c+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}p||setTimeout(()=>this.updateCompositionElements(!0),0)}}};r.CompositionHelper=D=s([l(2,d.IBufferService),l(3,d.IOptionsService),l(4,d.ICoreService),l(5,u.IRenderService)],D)},9806:(v,r)=>{function o(s,l,u){let d=u.getBoundingClientRect(),h=s.getComputedStyle(u),D=parseInt(h.getPropertyValue("padding-left")),p=parseInt(h.getPropertyValue("padding-top"));return[l.clientX-d.left-D,l.clientY-d.top-p]}Object.defineProperty(r,"__esModule",{value:!0}),r.getCoords=r.getCoordsRelativeToElement=void 0,r.getCoordsRelativeToElement=o,r.getCoords=function(s,l,u,d,h,D,p,a,i){if(!D)return;let c=o(s,l,u);return c?(c[0]=Math.ceil((c[0]+(i?p/2:0))/p),c[1]=Math.ceil(c[1]/a),c[0]=Math.min(Math.max(c[0],1),d+(i?1:0)),c[1]=Math.min(Math.max(c[1],1),h),c):void 0}},9504:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.moveToCellSequence=void 0;let s=o(2584);function l(a,i,c,_){let g=a-u(a,c),C=i-u(i,c),S=Math.abs(g-C)-function(T,m,y){let E=0,b=T-u(T,y),w=m-u(m,y);for(let L=0;L<Math.abs(b-w);L++){let I=d(T,m)==="A"?-1:1,R=y.buffer.lines.get(b+I*L);R?.isWrapped&&E++}return E}(a,i,c);return p(S,D(d(a,i),_))}function u(a,i){let c=0,_=i.buffer.lines.get(a),g=_?.isWrapped;for(;g&&a>=0&&a<i.rows;)c++,_=i.buffer.lines.get(--a),g=_?.isWrapped;return c}function d(a,i){return a>i?"A":"B"}function h(a,i,c,_,g,C){let S=a,T=i,m="";for(;S!==c||T!==_;)S+=g?1:-1,g&&S>C.cols-1?(m+=C.buffer.translateBufferLineToString(T,!1,a,S),S=0,a=0,T++):!g&&S<0&&(m+=C.buffer.translateBufferLineToString(T,!1,0,a+1),S=C.cols-1,a=S,T--);return m+C.buffer.translateBufferLineToString(T,!1,a,S)}function D(a,i){let c=i?"O":"[";return s.C0.ESC+c+a}function p(a,i){a=Math.floor(a);let c="";for(let _=0;_<a;_++)c+=i;return c}r.moveToCellSequence=function(a,i,c,_){let g=c.buffer.x,C=c.buffer.y;if(!c.buffer.hasScrollback)return function(m,y,E,b,w,L){return l(y,b,w,L).length===0?"":p(h(m,y,m,y-u(y,w),!1,w).length,D("D",L))}(g,C,0,i,c,_)+l(C,i,c,_)+function(m,y,E,b,w,L){let I;I=l(y,b,w,L).length>0?b-u(b,w):y;let R=b,P=function(W,M,A,x,H,U){let re;return re=l(A,x,H,U).length>0?x-u(x,H):M,W<A&&re<=x||W>=A&&re<x?"C":"D"}(m,y,E,b,w,L);return p(h(m,I,E,R,P==="C",w).length,D(P,L))}(g,C,a,i,c,_);let S;if(C===i)return S=g>a?"D":"C",p(Math.abs(g-a),D(S,_));S=C>i?"D":"C";let T=Math.abs(C-i);return p(function(m,y){return y.cols-m}(C>i?a:g,c)+(T-1)*c.cols+1+((C>i?g:a)-1),D(S,_))}},1296:function(v,r,o){var s=this&&this.__decorate||function(w,L,I,R){var P,W=arguments.length,M=W<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,I):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(w,L,I,R);else for(var A=w.length-1;A>=0;A--)(P=w[A])&&(M=(W<3?P(M):W>3?P(L,I,M):P(L,I))||M);return W>3&&M&&Object.defineProperty(L,I,M),M},l=this&&this.__param||function(w,L){return function(I,R){L(I,R,w)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRenderer=void 0;let u=o(3787),d=o(2550),h=o(2223),D=o(6171),p=o(4725),a=o(8055),i=o(8460),c=o(844),_=o(2585),g="xterm-dom-renderer-owner-",C="xterm-rows",S="xterm-fg-",T="xterm-bg-",m="xterm-focus",y="xterm-selection",E=1,b=r.DomRenderer=class extends c.Disposable{constructor(w,L,I,R,P,W,M,A,x,H){super(),this._element=w,this._screenElement=L,this._viewportElement=I,this._linkifier2=R,this._charSizeService=W,this._optionsService=M,this._bufferService=A,this._coreBrowserService=x,this._themeService=H,this._terminalClass=E++,this._rowElements=[],this.onRequestRedraw=this.register(new i.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(y),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,D.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(U=>this._injectCss(U))),this._injectCss(this._themeService.colors),this._rowFactory=P.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(U=>this._handleLinkHover(U))),this.register(this._linkifier2.onHideLinkUnderline(U=>this._handleLinkLeave(U))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new d.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let w=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*w,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*w),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/w),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/w),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let I of this._rowElements)I.style.width=`${this.dimensions.css.canvas.width}px`,I.style.height=`${this.dimensions.css.cell.height}px`,I.style.lineHeight=`${this.dimensions.css.cell.height}px`,I.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let L=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=L,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(w){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let L=`${this._terminalSelector} .${C} { color: ${w.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;L+=`${this._terminalSelector} .${C} .xterm-dim { color: ${a.color.multiplyOpacity(w.foreground,.5).css};}`,L+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,L+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",L+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${w.cursor.css};  color: ${w.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${w.cursor.css}; }}`,L+=`${this._terminalSelector} .${C}.${m} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${m} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${w.cursor.css}; color: ${w.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${w.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${w.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${w.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,L+=`${this._terminalSelector} .${y} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${y} div { position: absolute; background-color: ${w.selectionBackgroundOpaque.css};}${this._terminalSelector} .${y} div { position: absolute; background-color: ${w.selectionInactiveBackgroundOpaque.css};}`;for(let[I,R]of w.ansi.entries())L+=`${this._terminalSelector} .${S}${I} { color: ${R.css}; }${this._terminalSelector} .${S}${I}.xterm-dim { color: ${a.color.multiplyOpacity(R,.5).css}; }${this._terminalSelector} .${T}${I} { background-color: ${R.css}; }`;L+=`${this._terminalSelector} .${S}${h.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(w.background).css}; }${this._terminalSelector} .${S}${h.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(w.background),.5).css}; }${this._terminalSelector} .${T}${h.INVERTED_DEFAULT_COLOR} { background-color: ${w.foreground.css}; }`,this._themeStyleElement.textContent=L}_setDefaultSpacing(){let w=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${w}px`,this._rowFactory.defaultSpacing=w}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(w,L){for(let I=this._rowElements.length;I<=L;I++){let R=document.createElement("div");this._rowContainer.appendChild(R),this._rowElements.push(R)}for(;this._rowElements.length>L;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(w,L){this._refreshRowElements(w,L),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(m)}handleFocus(){this._rowContainer.classList.add(m),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(w,L,I){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(w,L,I),this.renderRows(0,this._bufferService.rows-1),!w||!L)return;let R=w[1]-this._bufferService.buffer.ydisp,P=L[1]-this._bufferService.buffer.ydisp,W=Math.max(R,0),M=Math.min(P,this._bufferService.rows-1);if(W>=this._bufferService.rows||M<0)return;let A=document.createDocumentFragment();if(I){let x=w[0]>L[0];A.appendChild(this._createSelectionElement(W,x?L[0]:w[0],x?w[0]:L[0],M-W+1))}else{let x=R===W?w[0]:0,H=W===P?L[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(W,x,H));let U=M-W-1;if(A.appendChild(this._createSelectionElement(W+1,0,this._bufferService.cols,U)),W!==M){let re=P===M?L[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(M,0,re))}}this._selectionContainer.appendChild(A)}_createSelectionElement(w,L,I,R=1){let P=document.createElement("div");return P.style.height=R*this.dimensions.css.cell.height+"px",P.style.top=w*this.dimensions.css.cell.height+"px",P.style.left=L*this.dimensions.css.cell.width+"px",P.style.width=this.dimensions.css.cell.width*(I-L)+"px",P}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let w of this._rowElements)w.replaceChildren()}renderRows(w,L){let I=this._bufferService.buffer,R=I.ybase+I.y,P=Math.min(I.x,this._bufferService.cols-1),W=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let x=w;x<=L;x++){let H=x+I.ydisp,U=this._rowElements[x],re=I.lines.get(H);if(!U||!re)break;U.replaceChildren(...this._rowFactory.createRow(re,H,H===R,M,A,P,W,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!0)}_handleLinkLeave(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!1)}_setCellUnderline(w,L,I,R,P,W){I<0&&(w=0),R<0&&(L=0);let M=this._bufferService.rows-1;I=Math.max(Math.min(I,M),0),R=Math.max(Math.min(R,M),0),P=Math.min(P,this._bufferService.cols);let A=this._bufferService.buffer,x=A.ybase+A.y,H=Math.min(A.x,P-1),U=this._optionsService.rawOptions.cursorBlink,re=this._optionsService.rawOptions.cursorStyle,oe=this._optionsService.rawOptions.cursorInactiveStyle;for(let V=I;V<=R;++V){let fe=V+A.ydisp,F=this._rowElements[V],N=A.lines.get(fe);if(!F||!N)break;F.replaceChildren(...this._rowFactory.createRow(N,fe,fe===x,re,oe,H,U,this.dimensions.css.cell.width,this._widthCache,W?V===I?w:0:-1,W?(V===R?L:P)-1:-1))}}};r.DomRenderer=b=s([l(4,_.IInstantiationService),l(5,p.ICharSizeService),l(6,_.IOptionsService),l(7,_.IBufferService),l(8,p.ICoreBrowserService),l(9,p.IThemeService)],b)},3787:function(v,r,o){var s=this&&this.__decorate||function(S,T,m,y){var E,b=arguments.length,w=b<3?T:y===null?y=Object.getOwnPropertyDescriptor(T,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(S,T,m,y);else for(var L=S.length-1;L>=0;L--)(E=S[L])&&(w=(b<3?E(w):b>3?E(T,m,w):E(T,m))||w);return b>3&&w&&Object.defineProperty(T,m,w),w},l=this&&this.__param||function(S,T){return function(m,y){T(m,y,S)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRendererRowFactory=void 0;let u=o(2223),d=o(643),h=o(511),D=o(2585),p=o(8055),a=o(4725),i=o(4269),c=o(6171),_=o(3734),g=r.DomRendererRowFactory=class{constructor(S,T,m,y,E,b,w){this._document=S,this._characterJoinerService=T,this._optionsService=m,this._coreBrowserService=y,this._coreService=E,this._decorationService=b,this._themeService=w,this._workCell=new h.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,T,m){this._selectionStart=S,this._selectionEnd=T,this._columnSelectMode=m}createRow(S,T,m,y,E,b,w,L,I,R,P){let W=[],M=this._characterJoinerService.getJoinedCharacters(T),A=this._themeService.colors,x,H=S.getNoBgTrimmedLength();m&&H<b+1&&(H=b+1);let U=0,re="",oe=0,V=0,fe=0,F=!1,N=0,q=!1,k=0,le=[],Q=R!==-1&&P!==-1;for(let Me=0;Me<H;Me++){S.loadCell(Me,this._workCell);let et=this._workCell.getWidth();if(et===0)continue;let ke=!1,Re=Me,$e=this._workCell;if(M.length>0&&Me===M[0][0]){ke=!0;let rt=M.shift();$e=new i.JoinedCellData(this._workCell,S.translateToString(!0,rt[0],rt[1]),rt[1]-rt[0]),Re=rt[1]-1,et=$e.getWidth()}let Nt=this._isCellInSelection(Me,T),Dr=m&&Me===b,Er=Q&&Me>=R&&Me<=P,Tt=!1;this._decorationService.forEachDecorationAtCell(Me,T,void 0,rt=>{Tt=!0});let ce=$e.getChars()||d.WHITESPACE_CELL_CHAR;if(ce===" "&&($e.isUnderline()||$e.isOverline())&&(ce="\xA0"),k=et*L-I.get(ce,$e.isBold(),$e.isItalic()),x){if(U&&(Nt&&q||!Nt&&!q&&$e.bg===oe)&&(Nt&&q&&A.selectionForeground||$e.fg===V)&&$e.extended.ext===fe&&Er===F&&k===N&&!Dr&&!ke&&!Tt){re+=ce,U++;continue}U&&(x.textContent=re),x=this._document.createElement("span"),U=0,re=""}else x=this._document.createElement("span");if(oe=$e.bg,V=$e.fg,fe=$e.extended.ext,F=Er,N=k,q=Nt,ke&&b>=Me&&b<=Re&&(b=Me),!this._coreService.isCursorHidden&&Dr){if(le.push("xterm-cursor"),this._coreBrowserService.isFocused)w&&le.push("xterm-cursor-blink"),le.push(y==="bar"?"xterm-cursor-bar":y==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":le.push("xterm-cursor-outline");break;case"block":le.push("xterm-cursor-block");break;case"bar":le.push("xterm-cursor-bar");break;case"underline":le.push("xterm-cursor-underline")}}if($e.isBold()&&le.push("xterm-bold"),$e.isItalic()&&le.push("xterm-italic"),$e.isDim()&&le.push("xterm-dim"),re=$e.isInvisible()?d.WHITESPACE_CELL_CHAR:$e.getChars()||d.WHITESPACE_CELL_CHAR,$e.isUnderline()&&(le.push(`xterm-underline-${$e.extended.underlineStyle}`),re===" "&&(re="\xA0"),!$e.isUnderlineColorDefault()))if($e.isUnderlineColorRGB())x.style.textDecorationColor=`rgb(${_.AttributeData.toColorRGB($e.getUnderlineColor()).join(",")})`;else{let rt=$e.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&$e.isBold()&&rt<8&&(rt+=8),x.style.textDecorationColor=A.ansi[rt].css}$e.isOverline()&&(le.push("xterm-overline"),re===" "&&(re="\xA0")),$e.isStrikethrough()&&le.push("xterm-strikethrough"),Er&&(x.style.textDecoration="underline");let ue=$e.getFgColor(),ne=$e.getFgColorMode(),X=$e.getBgColor(),me=$e.getBgColorMode(),Be=!!$e.isInverse();if(Be){let rt=ue;ue=X,X=rt;let Nn=ne;ne=me,me=Nn}let Ue,Lt,rr,lr=!1;switch(this._decorationService.forEachDecorationAtCell(Me,T,void 0,rt=>{rt.options.layer!=="top"&&lr||(rt.backgroundColorRGB&&(me=50331648,X=rt.backgroundColorRGB.rgba>>8&16777215,Ue=rt.backgroundColorRGB),rt.foregroundColorRGB&&(ne=50331648,ue=rt.foregroundColorRGB.rgba>>8&16777215,Lt=rt.foregroundColorRGB),lr=rt.options.layer==="top")}),!lr&&Nt&&(Ue=this._coreBrowserService.isFocused?A.selectionBackgroundOpaque:A.selectionInactiveBackgroundOpaque,X=Ue.rgba>>8&16777215,me=50331648,lr=!0,A.selectionForeground&&(ne=50331648,ue=A.selectionForeground.rgba>>8&16777215,Lt=A.selectionForeground)),lr&&le.push("xterm-decoration-top"),me){case 16777216:case 33554432:rr=A.ansi[X],le.push(`xterm-bg-${X}`);break;case 50331648:rr=p.rgba.toColor(X>>16,X>>8&255,255&X),this._addStyle(x,`background-color:#${C((X>>>0).toString(16),"0",6)}`);break;default:Be?(rr=A.foreground,le.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):rr=A.background}switch(Ue||$e.isDim()&&(Ue=p.color.multiplyOpacity(rr,.5)),ne){case 16777216:case 33554432:$e.isBold()&&ue<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ue+=8),this._applyMinimumContrast(x,rr,A.ansi[ue],$e,Ue,void 0)||le.push(`xterm-fg-${ue}`);break;case 50331648:let rt=p.rgba.toColor(ue>>16&255,ue>>8&255,255&ue);this._applyMinimumContrast(x,rr,rt,$e,Ue,Lt)||this._addStyle(x,`color:#${C(ue.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(x,rr,A.foreground,$e,Ue,void 0)||Be&&le.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}le.length&&(x.className=le.join(" "),le.length=0),Dr||ke||Tt?x.textContent=re:U++,k!==this.defaultSpacing&&(x.style.letterSpacing=`${k}px`),W.push(x),Me=Re}return x&&U&&(x.textContent=re),W}_applyMinimumContrast(S,T,m,y,E,b){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,c.excludeFromContrastRatioDemands)(y.getCode()))return!1;let w=this._getContrastCache(y),L;if(E||b||(L=w.getColor(T.rgba,m.rgba)),L===void 0){let I=this._optionsService.rawOptions.minimumContrastRatio/(y.isDim()?2:1);L=p.color.ensureContrastRatio(E||T,b||m,I),w.setColor((E||T).rgba,(b||m).rgba,L??null)}return!!L&&(this._addStyle(S,`color:${L.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,T){S.setAttribute("style",`${S.getAttribute("style")||""}${T};`)}_isCellInSelection(S,T){let m=this._selectionStart,y=this._selectionEnd;return!(!m||!y)&&(this._columnSelectMode?m[0]<=y[0]?S>=m[0]&&T>=m[1]&&S<y[0]&&T<=y[1]:S<m[0]&&T>=m[1]&&S>=y[0]&&T<=y[1]:T>m[1]&&T<y[1]||m[1]===y[1]&&T===m[1]&&S>=m[0]&&S<y[0]||m[1]<y[1]&&T===y[1]&&S<y[0]||m[1]<y[1]&&T===m[1]&&S>=m[0])}};function C(S,T,m){for(;S.length<m;)S=T+S;return S}r.DomRendererRowFactory=g=s([l(1,a.ICharacterJoinerService),l(2,D.IOptionsService),l(3,a.ICoreBrowserService),l(4,D.ICoreService),l(5,D.IDecorationService),l(6,a.IThemeService)],g)},2550:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WidthCache=void 0,r.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let s=o.createElement("span"),l=o.createElement("span");l.style.fontWeight="bold";let u=o.createElement("span");u.style.fontStyle="italic";let d=o.createElement("span");d.style.fontWeight="bold",d.style.fontStyle="italic",this._measureElements=[s,l,u,d],this._container.appendChild(s),this._container.appendChild(l),this._container.appendChild(u),this._container.appendChild(d),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,s,l,u){o===this._font&&s===this._fontSize&&l===this._weight&&u===this._weightBold||(this._font=o,this._fontSize=s,this._weight=l,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${l}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${l}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(o,s,l){let u=0;if(!s&&!l&&o.length===1&&(u=o.charCodeAt(0))<256)return this._flat[u]!==-9999?this._flat[u]:this._flat[u]=this._measure(o,0);let d=o;s&&(d+="B"),l&&(d+="I");let h=this._holey.get(d);if(h===void 0){let D=0;s&&(D|=1),l&&(D|=2),h=this._measure(o,D),this._holey.set(d,h)}return h}_measure(o,s){let l=this._measureElements[s];return l.textContent=o.repeat(32),l.offsetWidth/32}}},2223:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;let s=o(6114);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=s.isFirefox||s.isLegacyEdge?"bottom":"ideographic"},6171:(v,r)=>{function o(s){return 57508<=s&&s<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(s){if(!s)throw new Error("value must not be falsy");return s},r.isPowerlineGlyph=o,r.isRestrictedPowerlineGlyph=function(s){return 57520<=s&&s<=57527},r.excludeFromContrastRatioDemands=function(s){return o(s)||function(l){return 9472<=l&&l<=9631}(s)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionModel=void 0,r.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,s=this.selectionEnd;return!(!o||!s)&&(o[1]>s[1]||o[1]===s[1]&&o[0]>s[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(v,r,o){var s=this&&this.__decorate||function(a,i,c,_){var g,C=arguments.length,S=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,i,c,_);else for(var T=a.length-1;T>=0;T--)(g=a[T])&&(S=(C<3?g(S):C>3?g(i,c,S):g(i,c))||S);return C>3&&S&&Object.defineProperty(i,c,S),S},l=this&&this.__param||function(a,i){return function(c,_){i(c,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharSizeService=void 0;let u=o(2585),d=o(8460),h=o(844),D=r.CharSizeService=class extends h.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,i,c){super(),this._optionsService=c,this.width=0,this.height=0,this._onCharSizeChange=this.register(new d.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new p(a,i,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};r.CharSizeService=D=s([l(2,u.IOptionsService)],D);class p{constructor(i,c,_){this._document=i,this._parentElement=c,this._optionsService=_,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let i={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return i.width!==0&&i.height!==0&&(this._result.width=i.width/32,this._result.height=Math.ceil(i.height)),this._result}}},4269:function(v,r,o){var s=this&&this.__decorate||function(i,c,_,g){var C,S=arguments.length,T=S<3?c:g===null?g=Object.getOwnPropertyDescriptor(c,_):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(i,c,_,g);else for(var m=i.length-1;m>=0;m--)(C=i[m])&&(T=(S<3?C(T):S>3?C(c,_,T):C(c,_))||T);return S>3&&T&&Object.defineProperty(c,_,T),T},l=this&&this.__param||function(i,c){return function(_,g){c(_,g,i)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterJoinerService=r.JoinedCellData=void 0;let u=o(3734),d=o(643),h=o(511),D=o(2585);class p extends u.AttributeData{constructor(c,_,g){super(),this.content=0,this.combinedData="",this.fg=c.fg,this.bg=c.bg,this.combinedData=_,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(c){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.JoinedCellData=p;let a=r.CharacterJoinerService=class j1{constructor(c){this._bufferService=c,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new h.CellData}register(c){let _={id:this._nextCharacterJoinerId++,handler:c};return this._characterJoiners.push(_),_.id}deregister(c){for(let _=0;_<this._characterJoiners.length;_++)if(this._characterJoiners[_].id===c)return this._characterJoiners.splice(_,1),!0;return!1}getJoinedCharacters(c){if(this._characterJoiners.length===0)return[];let _=this._bufferService.buffer.lines.get(c);if(!_||_.length===0)return[];let g=[],C=_.translateToString(!0),S=0,T=0,m=0,y=_.getFg(0),E=_.getBg(0);for(let b=0;b<_.getTrimmedLength();b++)if(_.loadCell(b,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==E){if(b-S>1){let w=this._getJoinedRanges(C,m,T,_,S);for(let L=0;L<w.length;L++)g.push(w[L])}S=b,m=T,y=this._workCell.fg,E=this._workCell.bg}T+=this._workCell.getChars().length||d.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let b=this._getJoinedRanges(C,m,T,_,S);for(let w=0;w<b.length;w++)g.push(b[w])}return g}_getJoinedRanges(c,_,g,C,S){let T=c.substring(_,g),m=[];try{m=this._characterJoiners[0].handler(T)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{let E=this._characterJoiners[y].handler(T);for(let b=0;b<E.length;b++)j1._mergeRanges(m,E[b])}catch(E){console.error(E)}return this._stringRangesToCellRanges(m,C,S),m}_stringRangesToCellRanges(c,_,g){let C=0,S=!1,T=0,m=c[C];if(m){for(let y=g;y<this._bufferService.cols;y++){let E=_.getWidth(y),b=_.getString(y).length||d.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!S&&m[0]<=T&&(m[0]=y,S=!0),m[1]<=T){if(m[1]=y,m=c[++C],!m)break;m[0]<=T?(m[0]=y,S=!0):S=!1}T+=b}}m&&(m[1]=this._bufferService.cols)}}static _mergeRanges(c,_){let g=!1;for(let C=0;C<c.length;C++){let S=c[C];if(g){if(_[1]<=S[0])return c[C-1][1]=_[1],c;if(_[1]<=S[1])return c[C-1][1]=Math.max(_[1],S[1]),c.splice(C,1),c;c.splice(C,1),C--}else{if(_[1]<=S[0])return c.splice(C,0,_),c;if(_[1]<=S[1])return S[0]=Math.min(_[0],S[0]),c;_[0]<S[1]&&(S[0]=Math.min(_[0],S[0]),g=!0)}}return g?c[c.length-1][1]=_[1]:c.push(_),c}};r.CharacterJoinerService=a=s([l(0,D.IBufferService)],a)},5114:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreBrowserService=void 0,r.CoreBrowserService=class{constructor(o,s){this._textarea=o,this.window=s,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(v,r,o){var s=this&&this.__decorate||function(D,p,a,i){var c,_=arguments.length,g=_<3?p:i===null?i=Object.getOwnPropertyDescriptor(p,a):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(D,p,a,i);else for(var C=D.length-1;C>=0;C--)(c=D[C])&&(g=(_<3?c(g):_>3?c(p,a,g):c(p,a))||g);return _>3&&g&&Object.defineProperty(p,a,g),g},l=this&&this.__param||function(D,p){return function(a,i){p(a,i,D)}};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseService=void 0;let u=o(4725),d=o(9806),h=r.MouseService=class{constructor(D,p){this._renderService=D,this._charSizeService=p}getCoords(D,p,a,i,c){return(0,d.getCoords)(window,D,p,a,i,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,c)}getMouseReportCoords(D,p){let a=(0,d.getCoordsRelativeToElement)(window,D,p);if(this._charSizeService.hasValidSize)return a[0]=Math.min(Math.max(a[0],0),this._renderService.dimensions.css.canvas.width-1),a[1]=Math.min(Math.max(a[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(a[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(a[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(a[0]),y:Math.floor(a[1])}}};r.MouseService=h=s([l(0,u.IRenderService),l(1,u.ICharSizeService)],h)},3230:function(v,r,o){var s=this&&this.__decorate||function(g,C,S,T){var m,y=arguments.length,E=y<3?C:T===null?T=Object.getOwnPropertyDescriptor(C,S):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,C,S,T);else for(var b=g.length-1;b>=0;b--)(m=g[b])&&(E=(y<3?m(E):y>3?m(C,S,E):m(C,S))||E);return y>3&&E&&Object.defineProperty(C,S,E),E},l=this&&this.__param||function(g,C){return function(S,T){C(S,T,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderService=void 0;let u=o(3656),d=o(6193),h=o(5596),D=o(4725),p=o(8460),a=o(844),i=o(7226),c=o(2585),_=r.RenderService=class extends a.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,C,S,T,m,y,E,b){if(super(),this._rowCount=g,this._charSizeService=T,this._renderer=this.register(new a.MutableDisposable),this._pausedResizeTask=new i.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new p.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new p.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new p.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new p.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer(E.window,(w,L)=>this._renderRows(w,L)),this.register(this._renderDebouncer),this._screenDprMonitor=new h.ScreenDprMonitor(E.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(y.onResize(()=>this._fullRefresh())),this.register(y.buffers.onBufferActivate(()=>{var w;return(w=this._renderer.value)===null||w===void 0?void 0:w.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(m.onDecorationRegistered(()=>this._fullRefresh())),this.register(m.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(y.cols,y.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(y.buffer.y,y.buffer.y,!0))),this.register((0,u.addDisposableDomListener)(E.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(b.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in E.window){let w=new E.window.IntersectionObserver(L=>this._handleIntersectionChange(L[L.length-1]),{threshold:0});w.observe(C),this.register({dispose:()=>w.disconnect()})}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,C,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,C,this._rowCount))}_renderRows(g,C){this._renderer.value&&(g=Math.min(g,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(g,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:C}),this._onRender.fire({start:g,end:C}),this._isNextRenderRedrawOnly=!0)}resize(g,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var g,C;this._renderer.value&&((C=(g=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(g),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(g,C)):this._renderer.value.handleResize(g,C),this._fullRefresh())}handleCharSizeChanged(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCharSizeChanged()}handleBlur(){var g;(g=this._renderer.value)===null||g===void 0||g.handleBlur()}handleFocus(){var g;(g=this._renderer.value)===null||g===void 0||g.handleFocus()}handleSelectionChanged(g,C,S){var T;this._selectionState.start=g,this._selectionState.end=C,this._selectionState.columnSelectMode=S,(T=this._renderer.value)===null||T===void 0||T.handleSelectionChanged(g,C,S)}handleCursorMove(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCursorMove()}clear(){var g;(g=this._renderer.value)===null||g===void 0||g.clear()}};r.RenderService=_=s([l(2,c.IOptionsService),l(3,D.ICharSizeService),l(4,c.IDecorationService),l(5,c.IBufferService),l(6,D.ICoreBrowserService),l(7,D.IThemeService)],_)},9312:function(v,r,o){var s=this&&this.__decorate||function(m,y,E,b){var w,L=arguments.length,I=L<3?y:b===null?b=Object.getOwnPropertyDescriptor(y,E):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(m,y,E,b);else for(var R=m.length-1;R>=0;R--)(w=m[R])&&(I=(L<3?w(I):L>3?w(y,E,I):w(y,E))||I);return L>3&&I&&Object.defineProperty(y,E,I),I},l=this&&this.__param||function(m,y){return function(E,b){y(E,b,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionService=void 0;let u=o(9806),d=o(9504),h=o(456),D=o(4725),p=o(8460),a=o(844),i=o(6114),c=o(4841),_=o(511),g=o(2585),C="\xA0",S=new RegExp(C,"g"),T=r.SelectionService=class extends a.Disposable{constructor(m,y,E,b,w,L,I,R,P){super(),this._element=m,this._screenElement=y,this._linkifier=E,this._bufferService=b,this._coreService=w,this._mouseService=L,this._optionsService=I,this._renderService=R,this._coreBrowserService=P,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new p.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new p.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new p.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=W=>this._handleMouseMove(W),this._mouseUpListener=W=>this._handleMouseUp(W),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(W=>this._handleTrim(W)),this.register(this._bufferService.buffers.onBufferActivate(W=>this._handleBufferActivate(W))),this.enable(),this._model=new h.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,a.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let m=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!m||!y||m[0]===y[0]&&m[1]===y[1])}get selectionText(){let m=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!m||!y)return"";let E=this._bufferService.buffer,b=[];if(this._activeSelectionMode===3){if(m[0]===y[0])return"";let w=m[0]<y[0]?m[0]:y[0],L=m[0]<y[0]?y[0]:m[0];for(let I=m[1];I<=y[1];I++){let R=E.translateBufferLineToString(I,!0,w,L);b.push(R)}}else{let w=m[1]===y[1]?y[0]:void 0;b.push(E.translateBufferLineToString(m[1],!0,m[0],w));for(let L=m[1]+1;L<=y[1]-1;L++){let I=E.lines.get(L),R=E.translateBufferLineToString(L,!0);I?.isWrapped?b[b.length-1]+=R:b.push(R)}if(m[1]!==y[1]){let L=E.lines.get(y[1]),I=E.translateBufferLineToString(y[1],!0,0,y[0]);L&&L.isWrapped?b[b.length-1]+=I:b.push(I)}}return b.map(w=>w.replace(S," ")).join(i.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(m){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),i.isLinux&&m&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(m){let y=this._getMouseBufferCoords(m),E=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!!(E&&b&&y)&&this._areCoordsInSelection(y,E,b)}isCellInSelection(m,y){let E=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!E||!b)&&this._areCoordsInSelection([m,y],E,b)}_areCoordsInSelection(m,y,E){return m[1]>y[1]&&m[1]<E[1]||y[1]===E[1]&&m[1]===y[1]&&m[0]>=y[0]&&m[0]<E[0]||y[1]<E[1]&&m[1]===E[1]&&m[0]<E[0]||y[1]<E[1]&&m[1]===y[1]&&m[0]>=y[0]}_selectWordAtCursor(m,y){var E,b;let w=(b=(E=this._linkifier.currentLink)===null||E===void 0?void 0:E.link)===null||b===void 0?void 0:b.range;if(w)return this._model.selectionStart=[w.start.x-1,w.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(w,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let L=this._getMouseBufferCoords(m);return!!L&&(this._selectWordAt(L,y),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(m,y){this._model.clearSelection(),m=Math.max(m,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,m],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()}_handleTrim(m){this._model.handleTrim(m)&&this.refresh()}_getMouseBufferCoords(m){let y=this._mouseService.getCoords(m,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y}_getMouseEventScrollAmount(m){let y=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,m,this._screenElement)[1],E=this._renderService.dimensions.css.canvas.height;return y>=0&&y<=E?0:(y>E&&(y-=E),y=Math.min(Math.max(y,-50),50),y/=50,y/Math.abs(y)+Math.round(14*y))}shouldForceSelection(m){return i.isMac?m.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:m.shiftKey}handleMouseDown(m){if(this._mouseDownTimeStamp=m.timeStamp,(m.button!==2||!this.hasSelection)&&m.button===0){if(!this._enabled){if(!this.shouldForceSelection(m))return;m.stopPropagation()}m.preventDefault(),this._dragScrollAmount=0,this._enabled&&m.shiftKey?this._handleIncrementalClick(m):m.detail===1?this._handleSingleClick(m):m.detail===2?this._handleDoubleClick(m):m.detail===3&&this._handleTripleClick(m),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(m){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(m))}_handleSingleClick(m){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(m)?3:0,this._model.selectionStart=this._getMouseBufferCoords(m),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(m){this._selectWordAtCursor(m,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(m){let y=this._getMouseBufferCoords(m);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))}shouldColumnSelect(m){return m.altKey&&!(i.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(m){if(m.stopImmediatePropagation(),!this._model.selectionStart)return;let y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(m),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(m),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){let b=E.lines.get(this._model.selectionEnd[1]);b&&b.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let m=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(m.ydisp+this._bufferService.rows,m.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=m.ydisp),this.refresh()}}_handleMouseUp(m){let y=m.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500&&m.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let E=this._mouseService.getCoords(m,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){let b=(0,d.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(b,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let m=this._model.finalSelectionStart,y=this._model.finalSelectionEnd,E=!(!m||!y||m[0]===y[0]&&m[1]===y[1]);E?m&&y&&(this._oldSelectionStart&&this._oldSelectionEnd&&m[0]===this._oldSelectionStart[0]&&m[1]===this._oldSelectionStart[1]&&y[0]===this._oldSelectionEnd[0]&&y[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(m,y,E)):this._oldHasSelection&&this._fireOnSelectionChange(m,y,E)}_fireOnSelectionChange(m,y,E){this._oldSelectionStart=m,this._oldSelectionEnd=y,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(m){this.clearSelection(),this._trimListener.dispose(),this._trimListener=m.activeBuffer.lines.onTrim(y=>this._handleTrim(y))}_convertViewportColToCharacterIndex(m,y){let E=y;for(let b=0;y>=b;b++){let w=m.loadCell(b,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:w>1&&y!==b&&(E+=w-1)}return E}setSelection(m,y,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[m,y],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(m){this._isClickInSelection(m)||(this._selectWordAtCursor(m,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(m,y,E=!0,b=!0){if(m[0]>=this._bufferService.cols)return;let w=this._bufferService.buffer,L=w.lines.get(m[1]);if(!L)return;let I=w.translateBufferLineToString(m[1],!1),R=this._convertViewportColToCharacterIndex(L,m[0]),P=R,W=m[0]-R,M=0,A=0,x=0,H=0;if(I.charAt(R)===" "){for(;R>0&&I.charAt(R-1)===" ";)R--;for(;P<I.length&&I.charAt(P+1)===" ";)P++}else{let oe=m[0],V=m[0];L.getWidth(oe)===0&&(M++,oe--),L.getWidth(V)===2&&(A++,V++);let fe=L.getString(V).length;for(fe>1&&(H+=fe-1,P+=fe-1);oe>0&&R>0&&!this._isCharWordSeparator(L.loadCell(oe-1,this._workCell));){L.loadCell(oe-1,this._workCell);let F=this._workCell.getChars().length;this._workCell.getWidth()===0?(M++,oe--):F>1&&(x+=F-1,R-=F-1),R--,oe--}for(;V<L.length&&P+1<I.length&&!this._isCharWordSeparator(L.loadCell(V+1,this._workCell));){L.loadCell(V+1,this._workCell);let F=this._workCell.getChars().length;this._workCell.getWidth()===2?(A++,V++):F>1&&(H+=F-1,P+=F-1),P++,V++}}P++;let U=R+W-M+x,re=Math.min(this._bufferService.cols,P-R+M+A-x-H);if(y||I.slice(R,P).trim()!==""){if(E&&U===0&&L.getCodePoint(0)!==32){let oe=w.lines.get(m[1]-1);if(oe&&L.isWrapped&&oe.getCodePoint(this._bufferService.cols-1)!==32){let V=this._getWordAt([this._bufferService.cols-1,m[1]-1],!1,!0,!1);if(V){let fe=this._bufferService.cols-V.start;U-=fe,re+=fe}}}if(b&&U+re===this._bufferService.cols&&L.getCodePoint(this._bufferService.cols-1)!==32){let oe=w.lines.get(m[1]+1);if(oe?.isWrapped&&oe.getCodePoint(0)!==32){let V=this._getWordAt([0,m[1]+1],!1,!1,!0);V&&(re+=V.length)}}return{start:U,length:re}}}_selectWordAt(m,y){let E=this._getWordAt(m,y);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,m[1]--;this._model.selectionStart=[E.start,m[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(m){let y=this._getWordAt(m,!0);if(y){let E=m[1];for(;y.start<0;)y.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,E]}}_isCharWordSeparator(m){return m.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(m.getChars())>=0}_selectLineAt(m){let y=this._bufferService.buffer.getWrappedRangeForLine(m),E={start:{x:0,y:y.first},end:{x:this._bufferService.cols-1,y:y.last}};this._model.selectionStart=[0,y.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,c.getRangeLength)(E,this._bufferService.cols)}};r.SelectionService=T=s([l(3,g.IBufferService),l(4,g.ICoreService),l(5,D.IMouseService),l(6,g.IOptionsService),l(7,D.IRenderService),l(8,D.ICoreBrowserService)],T)},4725:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IThemeService=r.ICharacterJoinerService=r.ISelectionService=r.IRenderService=r.IMouseService=r.ICoreBrowserService=r.ICharSizeService=void 0;let s=o(8343);r.ICharSizeService=(0,s.createDecorator)("CharSizeService"),r.ICoreBrowserService=(0,s.createDecorator)("CoreBrowserService"),r.IMouseService=(0,s.createDecorator)("MouseService"),r.IRenderService=(0,s.createDecorator)("RenderService"),r.ISelectionService=(0,s.createDecorator)("SelectionService"),r.ICharacterJoinerService=(0,s.createDecorator)("CharacterJoinerService"),r.IThemeService=(0,s.createDecorator)("ThemeService")},6731:function(v,r,o){var s=this&&this.__decorate||function(T,m,y,E){var b,w=arguments.length,L=w<3?m:E===null?E=Object.getOwnPropertyDescriptor(m,y):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(T,m,y,E);else for(var I=T.length-1;I>=0;I--)(b=T[I])&&(L=(w<3?b(L):w>3?b(m,y,L):b(m,y))||L);return w>3&&L&&Object.defineProperty(m,y,L),L},l=this&&this.__param||function(T,m){return function(y,E){m(y,E,T)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeService=r.DEFAULT_ANSI_COLORS=void 0;let u=o(7239),d=o(8055),h=o(8460),D=o(844),p=o(2585),a=d.css.toColor("#ffffff"),i=d.css.toColor("#000000"),c=d.css.toColor("#ffffff"),_=d.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};r.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let T=[d.css.toColor("#2e3436"),d.css.toColor("#cc0000"),d.css.toColor("#4e9a06"),d.css.toColor("#c4a000"),d.css.toColor("#3465a4"),d.css.toColor("#75507b"),d.css.toColor("#06989a"),d.css.toColor("#d3d7cf"),d.css.toColor("#555753"),d.css.toColor("#ef2929"),d.css.toColor("#8ae234"),d.css.toColor("#fce94f"),d.css.toColor("#729fcf"),d.css.toColor("#ad7fa8"),d.css.toColor("#34e2e2"),d.css.toColor("#eeeeec")],m=[0,95,135,175,215,255];for(let y=0;y<216;y++){let E=m[y/36%6|0],b=m[y/6%6|0],w=m[y%6];T.push({css:d.channels.toCss(E,b,w),rgba:d.channels.toRgba(E,b,w)})}for(let y=0;y<24;y++){let E=8+10*y;T.push({css:d.channels.toCss(E,E,E),rgba:d.channels.toRgba(E,E,E)})}return T})());let C=r.ThemeService=class extends D.Disposable{get colors(){return this._colors}constructor(T){super(),this._optionsService=T,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new h.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:a,background:i,cursor:c,cursorAccent:_,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:d.color.blend(i,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:d.color.blend(i,g),ansi:r.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(T={}){let m=this._colors;if(m.foreground=S(T.foreground,a),m.background=S(T.background,i),m.cursor=S(T.cursor,c),m.cursorAccent=S(T.cursorAccent,_),m.selectionBackgroundTransparent=S(T.selectionBackground,g),m.selectionBackgroundOpaque=d.color.blend(m.background,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundTransparent=S(T.selectionInactiveBackground,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundOpaque=d.color.blend(m.background,m.selectionInactiveBackgroundTransparent),m.selectionForeground=T.selectionForeground?S(T.selectionForeground,d.NULL_COLOR):void 0,m.selectionForeground===d.NULL_COLOR&&(m.selectionForeground=void 0),d.color.isOpaque(m.selectionBackgroundTransparent)&&(m.selectionBackgroundTransparent=d.color.opacity(m.selectionBackgroundTransparent,.3)),d.color.isOpaque(m.selectionInactiveBackgroundTransparent)&&(m.selectionInactiveBackgroundTransparent=d.color.opacity(m.selectionInactiveBackgroundTransparent,.3)),m.ansi=r.DEFAULT_ANSI_COLORS.slice(),m.ansi[0]=S(T.black,r.DEFAULT_ANSI_COLORS[0]),m.ansi[1]=S(T.red,r.DEFAULT_ANSI_COLORS[1]),m.ansi[2]=S(T.green,r.DEFAULT_ANSI_COLORS[2]),m.ansi[3]=S(T.yellow,r.DEFAULT_ANSI_COLORS[3]),m.ansi[4]=S(T.blue,r.DEFAULT_ANSI_COLORS[4]),m.ansi[5]=S(T.magenta,r.DEFAULT_ANSI_COLORS[5]),m.ansi[6]=S(T.cyan,r.DEFAULT_ANSI_COLORS[6]),m.ansi[7]=S(T.white,r.DEFAULT_ANSI_COLORS[7]),m.ansi[8]=S(T.brightBlack,r.DEFAULT_ANSI_COLORS[8]),m.ansi[9]=S(T.brightRed,r.DEFAULT_ANSI_COLORS[9]),m.ansi[10]=S(T.brightGreen,r.DEFAULT_ANSI_COLORS[10]),m.ansi[11]=S(T.brightYellow,r.DEFAULT_ANSI_COLORS[11]),m.ansi[12]=S(T.brightBlue,r.DEFAULT_ANSI_COLORS[12]),m.ansi[13]=S(T.brightMagenta,r.DEFAULT_ANSI_COLORS[13]),m.ansi[14]=S(T.brightCyan,r.DEFAULT_ANSI_COLORS[14]),m.ansi[15]=S(T.brightWhite,r.DEFAULT_ANSI_COLORS[15]),T.extendedAnsi){let y=Math.min(m.ansi.length-16,T.extendedAnsi.length);for(let E=0;E<y;E++)m.ansi[E+16]=S(T.extendedAnsi[E],r.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(T){this._restoreColor(T),this._onChangeColors.fire(this.colors)}_restoreColor(T){if(T!==void 0)switch(T){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[T]=this._restoreColors.ansi[T]}else for(let m=0;m<this._restoreColors.ansi.length;++m)this._colors.ansi[m]=this._restoreColors.ansi[m]}modifyColors(T){T(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(T,m){if(T!==void 0)try{return d.css.toColor(T)}catch{}return m}r.ThemeService=C=s([l(0,p.IOptionsService)],C)},6349:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CircularList=void 0;let s=o(8460),l=o(844);class u extends l.Disposable{constructor(h){super(),this._maxLength=h,this.onDeleteEmitter=this.register(new s.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new s.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new s.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(h){if(this._maxLength===h)return;let D=new Array(h);for(let p=0;p<Math.min(h,this.length);p++)D[p]=this._array[this._getCyclicIndex(p)];this._array=D,this._maxLength=h,this._startIndex=0}get length(){return this._length}set length(h){if(h>this._length)for(let D=this._length;D<h;D++)this._array[D]=void 0;this._length=h}get(h){return this._array[this._getCyclicIndex(h)]}set(h,D){this._array[this._getCyclicIndex(h)]=D}push(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(h,D,...p){if(D){for(let a=h;a<this._length-D;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+D)];this._length-=D,this.onDeleteEmitter.fire({index:h,amount:D})}for(let a=this._length-1;a>=h;a--)this._array[this._getCyclicIndex(a+p.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<p.length;a++)this._array[this._getCyclicIndex(h+a)]=p[a];if(p.length&&this.onInsertEmitter.fire({index:h,amount:p.length}),this._length+p.length>this._maxLength){let a=this._length+p.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=p.length}trimStart(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)}shiftElements(h,D,p){if(!(D<=0)){if(h<0||h>=this._length)throw new Error("start argument out of range");if(h+p<0)throw new Error("Cannot shift elements in list beyond index 0");if(p>0){for(let i=D-1;i>=0;i--)this.set(h+i+p,this.get(h+i));let a=h+D+p-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<D;a++)this.set(h+a+p,this.get(h+a))}}_getCyclicIndex(h){return(this._startIndex+h)%this._maxLength}}r.CircularList=u},1439:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.clone=function o(s,l=5){if(typeof s!="object")return s;let u=Array.isArray(s)?[]:{};for(let d in s)u[d]=l<=1?s[d]:s[d]&&o(s[d],l-1);return u}},8055:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let s=o(6114),l=0,u=0,d=0,h=0;var D,p,a,i,c;function _(C){let S=C.toString(16);return S.length<2?"0"+S:S}function g(C,S){return C<S?(S+.05)/(C+.05):(C+.05)/(S+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(S,T,m,y){return y!==void 0?`#${_(S)}${_(T)}${_(m)}${_(y)}`:`#${_(S)}${_(T)}${_(m)}`},C.toRgba=function(S,T,m,y=255){return(S<<24|T<<16|m<<8|y)>>>0}}(D||(r.channels=D={})),function(C){function S(T,m){return h=Math.round(255*m),[l,u,d]=c.toChannels(T.rgba),{css:D.toCss(l,u,d,h),rgba:D.toRgba(l,u,d,h)}}C.blend=function(T,m){if(h=(255&m.rgba)/255,h===1)return{css:m.css,rgba:m.rgba};let y=m.rgba>>24&255,E=m.rgba>>16&255,b=m.rgba>>8&255,w=T.rgba>>24&255,L=T.rgba>>16&255,I=T.rgba>>8&255;return l=w+Math.round((y-w)*h),u=L+Math.round((E-L)*h),d=I+Math.round((b-I)*h),{css:D.toCss(l,u,d),rgba:D.toRgba(l,u,d)}},C.isOpaque=function(T){return(255&T.rgba)==255},C.ensureContrastRatio=function(T,m,y){let E=c.ensureContrastRatio(T.rgba,m.rgba,y);if(E)return c.toColor(E>>24&255,E>>16&255,E>>8&255)},C.opaque=function(T){let m=(255|T.rgba)>>>0;return[l,u,d]=c.toChannels(m),{css:D.toCss(l,u,d),rgba:m}},C.opacity=S,C.multiplyOpacity=function(T,m){return h=255&T.rgba,S(T,h*m/255)},C.toColorRGB=function(T){return[T.rgba>>24&255,T.rgba>>16&255,T.rgba>>8&255]}}(p||(r.color=p={})),function(C){let S,T;if(!s.isNode){let m=document.createElement("canvas");m.width=1,m.height=1;let y=m.getContext("2d",{willReadFrequently:!0});y&&(S=y,S.globalCompositeOperation="copy",T=S.createLinearGradient(0,0,1,1))}C.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return l=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),d=parseInt(m.slice(3,4).repeat(2),16),c.toColor(l,u,d);case 5:return l=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),d=parseInt(m.slice(3,4).repeat(2),16),h=parseInt(m.slice(4,5).repeat(2),16),c.toColor(l,u,d,h);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}let y=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(y)return l=parseInt(y[1]),u=parseInt(y[2]),d=parseInt(y[3]),h=Math.round(255*(y[5]===void 0?1:parseFloat(y[5]))),c.toColor(l,u,d,h);if(!S||!T)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=T,S.fillStyle=m,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[l,u,d,h]=S.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:D.toRgba(l,u,d,h),css:m}}}(a||(r.css=a={})),function(C){function S(T,m,y){let E=T/255,b=m/255,w=y/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))}C.relativeLuminance=function(T){return S(T>>16&255,T>>8&255,255&T)},C.relativeLuminance2=S}(i||(r.rgb=i={})),function(C){function S(m,y,E){let b=m>>24&255,w=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=g(i.relativeLuminance2(I,R,P),i.relativeLuminance2(b,w,L));for(;W<E&&(I>0||R>0||P>0);)I-=Math.max(0,Math.ceil(.1*I)),R-=Math.max(0,Math.ceil(.1*R)),P-=Math.max(0,Math.ceil(.1*P)),W=g(i.relativeLuminance2(I,R,P),i.relativeLuminance2(b,w,L));return(I<<24|R<<16|P<<8|255)>>>0}function T(m,y,E){let b=m>>24&255,w=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=g(i.relativeLuminance2(I,R,P),i.relativeLuminance2(b,w,L));for(;W<E&&(I<255||R<255||P<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),R=Math.min(255,R+Math.ceil(.1*(255-R))),P=Math.min(255,P+Math.ceil(.1*(255-P))),W=g(i.relativeLuminance2(I,R,P),i.relativeLuminance2(b,w,L));return(I<<24|R<<16|P<<8|255)>>>0}C.ensureContrastRatio=function(m,y,E){let b=i.relativeLuminance(m>>8),w=i.relativeLuminance(y>>8);if(g(b,w)<E){if(w<b){let R=S(m,y,E),P=g(b,i.relativeLuminance(R>>8));if(P<E){let W=T(m,y,E);return P>g(b,i.relativeLuminance(W>>8))?R:W}return R}let L=T(m,y,E),I=g(b,i.relativeLuminance(L>>8));if(I<E){let R=S(m,y,E);return I>g(b,i.relativeLuminance(R>>8))?L:R}return L}},C.reduceLuminance=S,C.increaseLuminance=T,C.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]},C.toColor=function(m,y,E,b){return{css:D.toCss(m,y,E,b),rgba:D.toRgba(m,y,E,b)}}}(c||(r.rgba=c={})),r.toPaddedHex=_,r.contrastRatio=g},8969:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreTerminal=void 0;let s=o(844),l=o(2585),u=o(4348),d=o(7866),h=o(744),D=o(7302),p=o(6975),a=o(8460),i=o(1753),c=o(1480),_=o(7994),g=o(9282),C=o(5435),S=o(5981),T=o(2660),m=!1;class y extends s.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new a.EventEmitter),this._onScroll.event(b=>{var w;(w=this._onScrollApi)===null||w===void 0||w.fire(b.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(b){for(let w in b)this.optionsService.options[w]=b[w]}constructor(b){super(),this._windowsWrappingHeuristics=this.register(new s.MutableDisposable),this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new a.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new D.OptionsService(b)),this._instantiationService.setService(l.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(h.BufferService)),this._instantiationService.setService(l.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(d.LogService)),this._instantiationService.setService(l.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(p.CoreService)),this._instantiationService.setService(l.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(i.CoreMouseService)),this._instantiationService.setService(l.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(c.UnicodeService)),this._instantiationService.setService(l.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(_.CharsetService),this._instantiationService.setService(l.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(T.OscLinkService),this._instantiationService.setService(l.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,a.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,a.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,a.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,a.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(w=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(w=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((w,L)=>this._inputHandler.parse(w,L))),this.register((0,a.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(b,w){this._writeBuffer.write(b,w)}writeSync(b,w){this._logService.logLevel<=l.LogLevelEnum.WARN&&!m&&(this._logService.warn("writeSync is unreliable and will be removed soon."),m=!0),this._writeBuffer.writeSync(b,w)}resize(b,w){isNaN(b)||isNaN(w)||(b=Math.max(b,h.MINIMUM_COLS),w=Math.max(w,h.MINIMUM_ROWS),this._bufferService.resize(b,w))}scroll(b,w=!1){this._bufferService.scroll(b,w)}scrollLines(b,w,L){this._bufferService.scrollLines(b,w,L)}scrollPages(b){this.scrollLines(b*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(b){let w=b-this._bufferService.buffer.ydisp;w!==0&&this.scrollLines(w)}registerEscHandler(b,w){return this._inputHandler.registerEscHandler(b,w)}registerDcsHandler(b,w){return this._inputHandler.registerDcsHandler(b,w)}registerCsiHandler(b,w){return this._inputHandler.registerCsiHandler(b,w)}registerOscHandler(b,w){return this._inputHandler.registerOscHandler(b,w)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let b=!1,w=this.optionsService.rawOptions.windowsPty;w&&w.buildNumber!==void 0&&w.buildNumber!==void 0?b=w.backend==="conpty"&&w.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(b=!0),b?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let b=[];b.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),b.push(this.registerCsiHandler({final:"H"},()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,s.toDisposable)(()=>{for(let w of b)w.dispose()})}}}r.CoreTerminal=y},8460:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let s=0;s<this._listeners.length;s++)if(this._listeners[s]===o)return void this._listeners.splice(s,1)}}})),this._event}fire(o,s){let l=[];for(let u=0;u<this._listeners.length;u++)l.push(this._listeners[u]);for(let u=0;u<l.length;u++)l[u].call(void 0,o,s)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(o,s){return o(l=>s.fire(l))}},5435:function(v,r,o){var s=this&&this.__decorate||function(W,M,A,x){var H,U=arguments.length,re=U<3?M:x===null?x=Object.getOwnPropertyDescriptor(M,A):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(W,M,A,x);else for(var oe=W.length-1;oe>=0;oe--)(H=W[oe])&&(re=(U<3?H(re):U>3?H(M,A,re):H(M,A))||re);return U>3&&re&&Object.defineProperty(M,A,re),re},l=this&&this.__param||function(W,M){return function(A,x){M(A,x,W)}};Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;let u=o(2584),d=o(7116),h=o(2015),D=o(844),p=o(482),a=o(8437),i=o(8460),c=o(643),_=o(511),g=o(3734),C=o(2585),S=o(6242),T=o(6351),m=o(5941),y={"(":0,")":1,"*":2,"+":3,"-":1,".":2},E=131072;function b(W,M){if(W>24)return M.setWinLines||!1;switch(W){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var w;(function(W){W[W.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",W[W.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(w||(r.WindowsOptionsReportType=w={}));let L=0;class I extends D.Disposable{getAttrData(){return this._curAttrData}constructor(M,A,x,H,U,re,oe,V,fe=new h.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=A,this._coreService=x,this._logService=H,this._optionsService=U,this._oscLinkService=re,this._coreMouseService=oe,this._unicodeService=V,this._parser=fe,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new p.StringToUtf32,this._utf8Decoder=new p.Utf8ToUtf32,this._workCell=new _.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new i.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new i.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new i.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new i.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new i.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new i.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new i.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new i.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new i.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new i.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new i.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new i.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new i.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new R(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(F=>this._activeBuffer=F.activeBuffer)),this._parser.setCsiHandlerFallback((F,N)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(F),params:N.toArray()})}),this._parser.setEscHandlerFallback(F=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(F)})}),this._parser.setExecuteHandlerFallback(F=>{this._logService.debug("Unknown EXECUTE code: ",{code:F})}),this._parser.setOscHandlerFallback((F,N,q)=>{this._logService.debug("Unknown OSC code: ",{identifier:F,action:N,data:q})}),this._parser.setDcsHandlerFallback((F,N,q)=>{N==="HOOK"&&(q=q.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(F),action:N,payload:q})}),this._parser.setPrintHandler((F,N,q)=>this.print(F,N,q)),this._parser.registerCsiHandler({final:"@"},F=>this.insertChars(F)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},F=>this.scrollLeft(F)),this._parser.registerCsiHandler({final:"A"},F=>this.cursorUp(F)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},F=>this.scrollRight(F)),this._parser.registerCsiHandler({final:"B"},F=>this.cursorDown(F)),this._parser.registerCsiHandler({final:"C"},F=>this.cursorForward(F)),this._parser.registerCsiHandler({final:"D"},F=>this.cursorBackward(F)),this._parser.registerCsiHandler({final:"E"},F=>this.cursorNextLine(F)),this._parser.registerCsiHandler({final:"F"},F=>this.cursorPrecedingLine(F)),this._parser.registerCsiHandler({final:"G"},F=>this.cursorCharAbsolute(F)),this._parser.registerCsiHandler({final:"H"},F=>this.cursorPosition(F)),this._parser.registerCsiHandler({final:"I"},F=>this.cursorForwardTab(F)),this._parser.registerCsiHandler({final:"J"},F=>this.eraseInDisplay(F,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},F=>this.eraseInDisplay(F,!0)),this._parser.registerCsiHandler({final:"K"},F=>this.eraseInLine(F,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},F=>this.eraseInLine(F,!0)),this._parser.registerCsiHandler({final:"L"},F=>this.insertLines(F)),this._parser.registerCsiHandler({final:"M"},F=>this.deleteLines(F)),this._parser.registerCsiHandler({final:"P"},F=>this.deleteChars(F)),this._parser.registerCsiHandler({final:"S"},F=>this.scrollUp(F)),this._parser.registerCsiHandler({final:"T"},F=>this.scrollDown(F)),this._parser.registerCsiHandler({final:"X"},F=>this.eraseChars(F)),this._parser.registerCsiHandler({final:"Z"},F=>this.cursorBackwardTab(F)),this._parser.registerCsiHandler({final:"`"},F=>this.charPosAbsolute(F)),this._parser.registerCsiHandler({final:"a"},F=>this.hPositionRelative(F)),this._parser.registerCsiHandler({final:"b"},F=>this.repeatPrecedingCharacter(F)),this._parser.registerCsiHandler({final:"c"},F=>this.sendDeviceAttributesPrimary(F)),this._parser.registerCsiHandler({prefix:">",final:"c"},F=>this.sendDeviceAttributesSecondary(F)),this._parser.registerCsiHandler({final:"d"},F=>this.linePosAbsolute(F)),this._parser.registerCsiHandler({final:"e"},F=>this.vPositionRelative(F)),this._parser.registerCsiHandler({final:"f"},F=>this.hVPosition(F)),this._parser.registerCsiHandler({final:"g"},F=>this.tabClear(F)),this._parser.registerCsiHandler({final:"h"},F=>this.setMode(F)),this._parser.registerCsiHandler({prefix:"?",final:"h"},F=>this.setModePrivate(F)),this._parser.registerCsiHandler({final:"l"},F=>this.resetMode(F)),this._parser.registerCsiHandler({prefix:"?",final:"l"},F=>this.resetModePrivate(F)),this._parser.registerCsiHandler({final:"m"},F=>this.charAttributes(F)),this._parser.registerCsiHandler({final:"n"},F=>this.deviceStatus(F)),this._parser.registerCsiHandler({prefix:"?",final:"n"},F=>this.deviceStatusPrivate(F)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},F=>this.softReset(F)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},F=>this.setCursorStyle(F)),this._parser.registerCsiHandler({final:"r"},F=>this.setScrollRegion(F)),this._parser.registerCsiHandler({final:"s"},F=>this.saveCursor(F)),this._parser.registerCsiHandler({final:"t"},F=>this.windowOptions(F)),this._parser.registerCsiHandler({final:"u"},F=>this.restoreCursor(F)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},F=>this.insertColumns(F)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},F=>this.deleteColumns(F)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},F=>this.selectProtected(F)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},F=>this.requestMode(F,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},F=>this.requestMode(F,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(F=>(this.setTitle(F),this.setIconName(F),!0))),this._parser.registerOscHandler(1,new S.OscHandler(F=>this.setIconName(F))),this._parser.registerOscHandler(2,new S.OscHandler(F=>this.setTitle(F))),this._parser.registerOscHandler(4,new S.OscHandler(F=>this.setOrReportIndexedColor(F))),this._parser.registerOscHandler(8,new S.OscHandler(F=>this.setHyperlink(F))),this._parser.registerOscHandler(10,new S.OscHandler(F=>this.setOrReportFgColor(F))),this._parser.registerOscHandler(11,new S.OscHandler(F=>this.setOrReportBgColor(F))),this._parser.registerOscHandler(12,new S.OscHandler(F=>this.setOrReportCursorColor(F))),this._parser.registerOscHandler(104,new S.OscHandler(F=>this.restoreIndexedColor(F))),this._parser.registerOscHandler(110,new S.OscHandler(F=>this.restoreFgColor(F))),this._parser.registerOscHandler(111,new S.OscHandler(F=>this.restoreBgColor(F))),this._parser.registerOscHandler(112,new S.OscHandler(F=>this.restoreCursorColor(F))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let F in d.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:F},()=>this.selectCharset("("+F)),this._parser.registerEscHandler({intermediates:")",final:F},()=>this.selectCharset(")"+F)),this._parser.registerEscHandler({intermediates:"*",final:F},()=>this.selectCharset("*"+F)),this._parser.registerEscHandler({intermediates:"+",final:F},()=>this.selectCharset("+"+F)),this._parser.registerEscHandler({intermediates:"-",final:F},()=>this.selectCharset("-"+F)),this._parser.registerEscHandler({intermediates:".",final:F},()=>this.selectCharset("."+F)),this._parser.registerEscHandler({intermediates:"/",final:F},()=>this.selectCharset("/"+F));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(F=>(this._logService.error("Parsing error: ",F),F)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new T.DcsHandler((F,N)=>this.requestStatusString(F,N)))}_preserveStack(M,A,x,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=x,this._parseStack.position=H}_logSlowResolvingAsync(M){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([M,new Promise((A,x)=>setTimeout(()=>x("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,A){let x,H=this._activeBuffer.x,U=this._activeBuffer.y,re=0,oe=this._parseStack.paused;if(oe){if(x=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(x),x;H=this._parseStack.cursorStartX,U=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>E&&(re=this._parseStack.position+E)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,V=>String.fromCharCode(V)).join("")}"`),typeof M=="string"?M.split("").map(V=>V.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<E&&(this._parseBuffer=new Uint32Array(Math.min(M.length,E))),oe||this._dirtyRowTracker.clearRange(),M.length>E)for(let V=re;V<M.length;V+=E){let fe=V+E<M.length?V+E:M.length,F=typeof M=="string"?this._stringDecoder.decode(M.substring(V,fe),this._parseBuffer):this._utf8Decoder.decode(M.subarray(V,fe),this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,F))return this._preserveStack(H,U,F,V),this._logSlowResolvingAsync(x),x}else if(!oe){let V=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,V))return this._preserveStack(H,U,V,0),this._logSlowResolvingAsync(x),x}this._activeBuffer.x===H&&this._activeBuffer.y===U||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(M,A,x){let H,U,re=this._charsetService.charset,oe=this._optionsService.rawOptions.screenReaderMode,V=this._bufferService.cols,fe=this._coreService.decPrivateModes.wraparound,F=this._coreService.modes.insertMode,N=this._curAttrData,q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&x-A>0&&q.getWidth(this._activeBuffer.x-1)===2&&q.setCellFromCodePoint(this._activeBuffer.x-1,0,1,N.fg,N.bg,N.extended);for(let k=A;k<x;++k){if(H=M[k],U=this._unicodeService.wcwidth(H),H<127&&re){let le=re[String.fromCharCode(H)];le&&(H=le.charCodeAt(0))}if(oe&&this._onA11yChar.fire((0,p.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),U||!this._activeBuffer.x){if(this._activeBuffer.x+U-1>=V){if(fe){for(;this._activeBuffer.x<V;)q.setCellFromCodePoint(this._activeBuffer.x++,0,1,N.fg,N.bg,N.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=V-1,U===2)continue}if(F&&(q.insertCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell(N),N),q.getWidth(V-1)===2&&q.setCellFromCodePoint(V-1,c.NULL_CELL_CODE,c.NULL_CELL_WIDTH,N.fg,N.bg,N.extended)),q.setCellFromCodePoint(this._activeBuffer.x++,H,U,N.fg,N.bg,N.extended),U>0)for(;--U;)q.setCellFromCodePoint(this._activeBuffer.x++,0,0,N.fg,N.bg,N.extended)}else q.getWidth(this._activeBuffer.x-1)?q.addCodepointToCell(this._activeBuffer.x-1,H):q.addCodepointToCell(this._activeBuffer.x-2,H)}x-A>0&&(q.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<V&&x-A>0&&q.getWidth(this._activeBuffer.x)===0&&!q.hasContent(this._activeBuffer.x)&&q.setCellFromCodePoint(this._activeBuffer.x,0,1,N.fg,N.bg,N.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,A){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,A):this._parser.registerCsiHandler(M,x=>!b(x.params[0],this._optionsService.rawOptions.windowOptions)||A(x))}registerDcsHandler(M,A){return this._parser.registerDcsHandler(M,new T.DcsHandler(A))}registerEscHandler(M,A){return this._parser.registerEscHandler(M,A)}registerOscHandler(M,A){return this._parser.registerOscHandler(M,new S.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||M===void 0)&&M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=M,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+A)}cursorUp(M){let A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){let A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){let A=M.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=M.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=M.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){let A=M.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,A,x,H=!1,U=!1){let re=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);re.replaceCells(A,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),U),H&&(re.isWrapped=!1)}_resetBufferLine(M,A=!1){let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);x&&(x.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),x.isWrapped=!1)}eraseInDisplay(M,A=!1){let x;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);x<this._bufferService.rows;x++)this._resetBufferLine(x,A);this._dirtyRowTracker.markDirty(x);break;case 1:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(x=this._bufferService.rows,this._dirtyRowTracker.markDirty(x-1);x--;)this._resetBufferLine(x,A);this._dirtyRowTracker.markDirty(0);break;case 3:let H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(M,A=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let A=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;A--;)this._activeBuffer.lines.splice(U-1,1),this._activeBuffer.lines.splice(x,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let A=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;A--;)this._activeBuffer.lines.splice(x,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let A=M.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let A=M.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=M.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=M.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=M.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=M.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){if(!this._parser.precedingCodepoint)return!0;let A=M.params[0]||1,x=new Uint32Array(A);for(let H=0;H<A;++H)x[H]=this._parser.precedingCodepoint;return this.print(x,0,x.length),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,d.DEFAULT_CHARSET),this._charsetService.setgCharset(1,d.DEFAULT_CHARSET),this._charsetService.setgCharset(2,d.DEFAULT_CHARSET),this._charsetService.setgCharset(3,d.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let A=0;A<M.length;A++)switch(M.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,A){let x=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:U}=this._coreMouseService,re=this._coreService,{buffers:oe,cols:V}=this._bufferService,{active:fe,alt:F}=oe,N=this._optionsService.rawOptions,q=Me=>Me?1:2,k=M.params[0];return le=k,Q=A?k===2?4:k===4?q(re.modes.insertMode):k===12?3:k===20?q(N.convertEol):0:k===1?q(x.applicationCursorKeys):k===3?N.windowOptions.setWinLines?V===80?2:V===132?1:0:0:k===6?q(x.origin):k===7?q(x.wraparound):k===8?3:k===9?q(H==="X10"):k===12?q(N.cursorBlink):k===25?q(!re.isCursorHidden):k===45?q(x.reverseWraparound):k===66?q(x.applicationKeypad):k===67?4:k===1e3?q(H==="VT200"):k===1002?q(H==="DRAG"):k===1003?q(H==="ANY"):k===1004?q(x.sendFocus):k===1005?4:k===1006?q(U==="SGR"):k===1015?4:k===1016?q(U==="SGR_PIXELS"):k===1048?1:k===47||k===1047||k===1049?q(fe===F):k===2004?q(x.bracketedPasteMode):0,re.triggerDataEvent(`${u.C0.ESC}[${A?"":"?"}${le};${Q}$y`),!0;var le,Q}_updateAttrColor(M,A,x,H,U){return A===2?(M|=50331648,M&=-16777216,M|=g.AttributeData.fromColorRGB([x,H,U])):A===5&&(M&=-50331904,M|=33554432|255&x),M}_extractColor(M,A,x){let H=[0,0,-1,0,0,0],U=0,re=0;do{if(H[re+U]=M.params[A+re],M.hasSubParams(A+re)){let oe=M.getSubParams(A+re),V=0;do H[1]===5&&(U=1),H[re+V+1+U]=oe[V];while(++V<oe.length&&V+re+1+U<H.length);break}if(H[1]===5&&re+U>=2||H[1]===2&&re+U>=5)break;H[1]&&(U=1)}while(++re+A<M.length&&re+U<H.length);for(let oe=2;oe<H.length;++oe)H[oe]===-1&&(H[oe]=0);switch(H[0]){case 38:x.fg=this._updateAttrColor(x.fg,H[1],H[3],H[4],H[5]);break;case 48:x.bg=this._updateAttrColor(x.bg,H[1],H[3],H[4],H[5]);break;case 58:x.extended=x.extended.clone(),x.extended.underlineColor=this._updateAttrColor(x.extended.underlineColor,H[1],H[3],H[4],H[5])}return re}_processUnderline(M,A){A.extended=A.extended.clone(),(!~M||M>5)&&(M=1),A.extended.underlineStyle=M,A.fg|=268435456,M===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(M){M.fg=a.DEFAULT_ATTR_DATA.fg,M.bg=a.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;let A=M.length,x,H=this._curAttrData;for(let U=0;U<A;U++)x=M.params[U],x>=30&&x<=37?(H.fg&=-50331904,H.fg|=16777216|x-30):x>=40&&x<=47?(H.bg&=-50331904,H.bg|=16777216|x-40):x>=90&&x<=97?(H.fg&=-50331904,H.fg|=16777224|x-90):x>=100&&x<=107?(H.bg&=-50331904,H.bg|=16777224|x-100):x===0?this._processSGR0(H):x===1?H.fg|=134217728:x===3?H.bg|=67108864:x===4?(H.fg|=268435456,this._processUnderline(M.hasSubParams(U)?M.getSubParams(U)[0]:1,H)):x===5?H.fg|=536870912:x===7?H.fg|=67108864:x===8?H.fg|=1073741824:x===9?H.fg|=2147483648:x===2?H.bg|=134217728:x===21?this._processUnderline(2,H):x===22?(H.fg&=-134217729,H.bg&=-134217729):x===23?H.bg&=-67108865:x===24?(H.fg&=-268435457,this._processUnderline(0,H)):x===25?H.fg&=-536870913:x===27?H.fg&=-67108865:x===28?H.fg&=-1073741825:x===29?H.fg&=2147483647:x===39?(H.fg&=-67108864,H.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):x===49?(H.bg&=-67108864,H.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):x===38||x===48||x===58?U+=this._extractColor(M,U,H):x===53?H.bg|=1073741824:x===55?H.bg&=-1073741825:x===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):x===100?(H.fg&=-67108864,H.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:let A=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${A};${x}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){let A=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${A};${x}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){let A=M.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let x=A%2==1;return this._optionsService.options.cursorBlink=x,!0}setScrollRegion(M){let A=M.params[0]||1,x;return(M.length<2||(x=M.params[1])>this._bufferService.rows||x===0)&&(x=this._bufferService.rows),x>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0}windowOptions(M){if(!b(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;let A=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(w.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(w.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){let A=[],x=M.split(";");for(;x.length>1;){let H=x.shift(),U=x.shift();if(/^\d+$/.exec(H)){let re=parseInt(H);if(P(re))if(U==="?")A.push({type:0,index:re});else{let oe=(0,m.parseColor)(U);oe&&A.push({type:1,index:re,color:oe})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(M){let A=M.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(M,A){this._getCurrentLinkId()&&this._finishHyperlink();let x=M.split(":"),H,U=x.findIndex(re=>re.startsWith("id="));return U!==-1&&(H=x[U].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,A){let x=M.split(";");for(let H=0;H<x.length&&!(A>=this._specialColors.length);++H,++A)if(x[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{let U=(0,m.parseColor)(x[H]);U&&this._onColor.fire([{type:1,index:this._specialColors[A],color:U}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;let A=[],x=M.split(";");for(let H=0;H<x.length;++H)if(/^\d+$/.exec(x[H])){let U=parseInt(x[H]);P(U)&&A.push({type:2,index:U})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,d.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(y[M[0]],d.CHARSETS[M[1]]||d.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){let M=new _.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){let x=this._activeBuffer.ybase+this._activeBuffer.y+A,H=this._activeBuffer.lines.get(x);H&&(H.fill(M),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,A){let x=this._bufferService.buffer,H=this._optionsService.rawOptions;return(U=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${U}${u.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${x.scrollTop+1};${x.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,A){this._dirtyRowTracker.markRangeDirty(M,A)}}r.InputHandler=I;let R=class{constructor(W){this._bufferService=W,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(W){W<this.start?this.start=W:W>this.end&&(this.end=W)}markRangeDirty(W,M){W>M&&(L=W,W=M,M=L),W<this.start&&(this.start=W),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function P(W){return 0<=W&&W<256}R=s([l(0,C.IBufferService)],R)},844:(v,r)=>{function o(s){for(let l of s)l.dispose();s.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let s of this._disposables)s.dispose();this._disposables.length=0}register(s){return this._disposables.push(s),s}unregister(s){let l=this._disposables.indexOf(s);l!==-1&&this._disposables.splice(l,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(s){var l;this._isDisposed||s===this._value||((l=this._value)===null||l===void 0||l.dispose(),this._value=s)}clear(){this.value=void 0}dispose(){var s;this._isDisposed=!0,(s=this._value)===null||s===void 0||s.dispose(),this._value=void 0}},r.toDisposable=function(s){return{dispose:s}},r.disposeArray=o,r.getDisposeArrayDisposable=function(s){return{dispose:()=>o(s)}}},1505:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(l,u,d){this._data[l]||(this._data[l]={}),this._data[l][u]=d}get(l,u){return this._data[l]?this._data[l][u]:void 0}clear(){this._data={}}}r.TwoKeyMap=o,r.FourKeyMap=class{constructor(){this._data=new o}set(s,l,u,d,h){this._data.get(s,l)||this._data.set(s,l,new o),this._data.get(s,l).set(u,d,h)}get(s,l,u,d){var h;return(h=this._data.get(s,l))===null||h===void 0?void 0:h.get(u,d)}clear(){this._data.clear()}}},6114:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";let o=r.isNode?"node":navigator.userAgent,s=r.isNode?"node":navigator.platform;r.isFirefox=o.includes("Firefox"),r.isLegacyEdge=o.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(o),r.getSafariVersion=function(){if(!r.isSafari)return 0;let l=o.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(s),r.isIpad=s==="iPad",r.isIphone=s==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(s),r.isLinux=s.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(o)},6106:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SortedList=void 0;let o=0;r.SortedList=class{constructor(s){this._getKey=s,this._array=[]}clear(){this._array.length=0}insert(s){this._array.length!==0?(o=this._search(this._getKey(s)),this._array.splice(o,0,s)):this._array.push(s)}delete(s){if(this._array.length===0)return!1;let l=this._getKey(s);if(l===void 0||(o=this._search(l),o===-1)||this._getKey(this._array[o])!==l)return!1;do if(this._array[o]===s)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===l);return!1}*getKeyIterator(s){if(this._array.length!==0&&(o=this._search(s),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===s))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===s)}forEachByKey(s,l){if(this._array.length!==0&&(o=this._search(s),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===s))do l(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===s)}values(){return[...this._array].values()}_search(s){let l=0,u=this._array.length-1;for(;u>=l;){let d=l+u>>1,h=this._getKey(this._array[d]);if(h>s)u=d-1;else{if(!(h<s)){for(;d>0&&this._getKey(this._array[d-1])===s;)d--;return d}l=d+1}}return l}}},7226:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;let s=o(6114);class l{constructor(){this._tasks=[],this._i=0}enqueue(h){this._tasks.push(h),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(h){this._idleCallback=void 0;let D=0,p=0,a=h.timeRemaining(),i=0;for(;this._i<this._tasks.length;){if(D=Date.now(),this._tasks[this._i]()||this._i++,D=Math.max(1,Date.now()-D),p=Math.max(D,p),i=h.timeRemaining(),1.5*p>i)return a-D<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-D))}ms`),void this._start();a=i}this.clear()}}class u extends l{_requestCallback(h){return setTimeout(()=>h(this._createDeadline(16)))}_cancelCallback(h){clearTimeout(h)}_createDeadline(h){let D=Date.now()+h;return{timeRemaining:()=>Math.max(0,D-Date.now())}}}r.PriorityTaskQueue=u,r.IdleTaskQueue=!s.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(d){return requestIdleCallback(d)}_cancelCallback(d){cancelIdleCallback(d)}}:u,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(d){this._queue.clear(),this._queue.enqueue(d)}flush(){this._queue.flush()}}},9282:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateWindowsModeWrappedState=void 0;let s=o(643);r.updateWindowsModeWrappedState=function(l){let u=l.buffer.lines.get(l.buffer.ybase+l.buffer.y-1),d=u?.get(l.cols-1),h=l.buffer.lines.get(l.buffer.ybase+l.buffer.y);h&&d&&(h.isWrapped=d[s.CHAR_DATA_CODE_INDEX]!==s.NULL_CELL_CODE&&d[s.CHAR_DATA_CODE_INDEX]!==s.WHITESPACE_CELL_CODE)}},3734:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new s}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){let u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=o;class s{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,d=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=d}clone(){return new s(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=s},9092:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.MAX_BUFFER_SIZE=void 0;let s=o(6349),l=o(7226),u=o(3734),d=o(8437),h=o(4634),D=o(511),p=o(643),a=o(4863),i=o(7116);r.MAX_BUFFER_SIZE=4294967295,r.Buffer=class{constructor(c,_,g){this._hasScrollback=c,this._optionsService=_,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=d.DEFAULT_ATTR_DATA.clone(),this.savedCharset=i.DEFAULT_CHARSET,this.markers=[],this._nullCell=D.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),this._whitespaceCell=D.CellData.fromCharData([0,p.WHITESPACE_CELL_CHAR,p.WHITESPACE_CELL_WIDTH,p.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new l.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(c){return c?(this._nullCell.fg=c.fg,this._nullCell.bg=c.bg,this._nullCell.extended=c.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(c){return c?(this._whitespaceCell.fg=c.fg,this._whitespaceCell.bg=c.bg,this._whitespaceCell.extended=c.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(c,_){return new d.BufferLine(this._bufferService.cols,this.getNullCell(c),_)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let c=this.ybase+this.y-this.ydisp;return c>=0&&c<this._rows}_getCorrectBufferLength(c){if(!this._hasScrollback)return c;let _=c+this._optionsService.rawOptions.scrollback;return _>r.MAX_BUFFER_SIZE?r.MAX_BUFFER_SIZE:_}fillViewportRows(c){if(this.lines.length===0){c===void 0&&(c=d.DEFAULT_ATTR_DATA);let _=this._rows;for(;_--;)this.lines.push(this.getBlankLine(c))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(c,_){let g=this.getNullCell(d.DEFAULT_ATTR_DATA),C=0,S=this._getCorrectBufferLength(_);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<c)for(let m=0;m<this.lines.length;m++)C+=+this.lines.get(m).resize(c,g);let T=0;if(this._rows<_)for(let m=this._rows;m<_;m++)this.lines.length<_+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new d.BufferLine(c,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+T+1?(this.ybase--,T++,this.ydisp>0&&this.ydisp--):this.lines.push(new d.BufferLine(c,g)));else for(let m=this._rows;m>_;m--)this.lines.length>_+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let m=this.lines.length-S;m>0&&(this.lines.trimStart(m),this.ybase=Math.max(this.ybase-m,0),this.ydisp=Math.max(this.ydisp-m,0),this.savedY=Math.max(this.savedY-m,0)),this.lines.maxLength=S}this.x=Math.min(this.x,c-1),this.y=Math.min(this.y,_-1),T&&(this.y+=T),this.savedX=Math.min(this.savedX,c-1),this.scrollTop=0}if(this.scrollBottom=_-1,this._isReflowEnabled&&(this._reflow(c,_),this._cols>c))for(let T=0;T<this.lines.length;T++)C+=+this.lines.get(T).resize(c,g);this._cols=c,this._rows=_,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let c=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,c=!1);let _=0;for(;this._memoryCleanupPosition<this.lines.length;)if(_+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),_>100)return!0;return c}get _isReflowEnabled(){let c=this._optionsService.rawOptions.windowsPty;return c&&c.buildNumber?this._hasScrollback&&c.backend==="conpty"&&c.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(c,_){this._cols!==c&&(c>this._cols?this._reflowLarger(c,_):this._reflowSmaller(c,_))}_reflowLarger(c,_){let g=(0,h.reflowLargerGetLinesToRemove)(this.lines,this._cols,c,this.ybase+this.y,this.getNullCell(d.DEFAULT_ATTR_DATA));if(g.length>0){let C=(0,h.reflowLargerCreateNewLayout)(this.lines,g);(0,h.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(c,_,C.countRemoved)}}_reflowLargerAdjustViewport(c,_,g){let C=this.getNullCell(d.DEFAULT_ATTR_DATA),S=g;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<_&&this.lines.push(new d.BufferLine(c,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(c,_){let g=this.getNullCell(d.DEFAULT_ATTR_DATA),C=[],S=0;for(let T=this.lines.length-1;T>=0;T--){let m=this.lines.get(T);if(!m||!m.isWrapped&&m.getTrimmedLength()<=c)continue;let y=[m];for(;m.isWrapped&&T>0;)m=this.lines.get(--T),y.unshift(m);let E=this.ybase+this.y;if(E>=T&&E<T+y.length)continue;let b=y[y.length-1].getTrimmedLength(),w=(0,h.reflowSmallerGetNewLineLengths)(y,this._cols,c),L=w.length-y.length,I;I=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+L):Math.max(0,this.lines.length-this.lines.maxLength+L);let R=[];for(let H=0;H<L;H++){let U=this.getBlankLine(d.DEFAULT_ATTR_DATA,!0);R.push(U)}R.length>0&&(C.push({start:T+y.length+S,newLines:R}),S+=R.length),y.push(...R);let P=w.length-1,W=w[P];W===0&&(P--,W=w[P]);let M=y.length-L-1,A=b;for(;M>=0;){let H=Math.min(A,W);if(y[P]===void 0)break;if(y[P].copyCellsFrom(y[M],A-H,W-H,H,!0),W-=H,W===0&&(P--,W=w[P]),A-=H,A===0){M--;let U=Math.max(M,0);A=(0,h.getWrappedLineTrimmedLength)(y,U,this._cols)}}for(let H=0;H<y.length;H++)w[H]<c&&y[H].setCell(w[H],g);let x=L-I;for(;x-- >0;)this.ybase===0?this.y<_-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-_&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+L,this.ybase+_-1)}if(C.length>0){let T=[],m=[];for(let P=0;P<this.lines.length;P++)m.push(this.lines.get(P));let y=this.lines.length,E=y-1,b=0,w=C[b];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let L=0;for(let P=Math.min(this.lines.maxLength-1,y+S-1);P>=0;P--)if(w&&w.start>E+L){for(let W=w.newLines.length-1;W>=0;W--)this.lines.set(P--,w.newLines[W]);P++,T.push({index:E+1,amount:w.newLines.length}),L+=w.newLines.length,w=C[++b]}else this.lines.set(P,m[E--]);let I=0;for(let P=T.length-1;P>=0;P--)T[P].index+=I,this.lines.onInsertEmitter.fire(T[P]),I+=T[P].amount;let R=Math.max(0,y+S-this.lines.maxLength);R>0&&this.lines.onTrimEmitter.fire(R)}}translateBufferLineToString(c,_,g=0,C){let S=this.lines.get(c);return S?S.translateToString(_,g,C):""}getWrappedRangeForLine(c){let _=c,g=c;for(;_>0&&this.lines.get(_).isWrapped;)_--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:_,last:g}}setupTabStops(c){for(c!=null?this.tabs[c]||(c=this.prevStop(c)):(this.tabs={},c=0);c<this._cols;c+=this._optionsService.rawOptions.tabStopWidth)this.tabs[c]=!0}prevStop(c){for(c==null&&(c=this.x);!this.tabs[--c]&&c>0;);return c>=this._cols?this._cols-1:c<0?0:c}nextStop(c){for(c==null&&(c=this.x);!this.tabs[++c]&&c<this._cols;);return c>=this._cols?this._cols-1:c<0?0:c}clearMarkers(c){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].line===c&&(this.markers[_].dispose(),this.markers.splice(_--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].dispose(),this.markers.splice(c--,1);this._isClearing=!1}addMarker(c){let _=new a.Marker(c);return this.markers.push(_),_.register(this.lines.onTrim(g=>{_.line-=g,_.line<0&&_.dispose()})),_.register(this.lines.onInsert(g=>{_.line>=g.index&&(_.line+=g.amount)})),_.register(this.lines.onDelete(g=>{_.line>=g.index&&_.line<g.index+g.amount&&_.dispose(),_.line>g.index&&(_.line-=g.amount)})),_.register(_.onDispose(()=>this._removeMarker(_))),_}_removeMarker(c){this._isClearing||this.markers.splice(this.markers.indexOf(c),1)}}},8437:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLine=r.DEFAULT_ATTR_DATA=void 0;let s=o(3734),l=o(511),u=o(643),d=o(482);r.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);let h=0;class D{constructor(a,i,c=!1){this.isWrapped=c,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);let _=i||l.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let g=0;g<a;++g)this.setCell(g,_);this.length=a}get(a){let i=this._data[3*a+0],c=2097151&i;return[this._data[3*a+1],2097152&i?this._combined[a]:c?(0,d.stringFromCodePoint)(c):"",i>>22,2097152&i?this._combined[a].charCodeAt(this._combined[a].length-1):c]}set(a,i){this._data[3*a+1]=i[u.CHAR_DATA_ATTR_INDEX],i[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=i[1],this._data[3*a+0]=2097152|a|i[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=i[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|i[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(a){return this._data[3*a+0]>>22}hasWidth(a){return 12582912&this._data[3*a+0]}getFg(a){return this._data[3*a+1]}getBg(a){return this._data[3*a+2]}hasContent(a){return 4194303&this._data[3*a+0]}getCodePoint(a){let i=this._data[3*a+0];return 2097152&i?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&i}isCombined(a){return 2097152&this._data[3*a+0]}getString(a){let i=this._data[3*a+0];return 2097152&i?this._combined[a]:2097151&i?(0,d.stringFromCodePoint)(2097151&i):""}isProtected(a){return 536870912&this._data[3*a+2]}loadCell(a,i){return h=3*a,i.content=this._data[h+0],i.fg=this._data[h+1],i.bg=this._data[h+2],2097152&i.content&&(i.combinedData=this._combined[a]),268435456&i.bg&&(i.extended=this._extendedAttrs[a]),i}setCell(a,i){2097152&i.content&&(this._combined[a]=i.combinedData),268435456&i.bg&&(this._extendedAttrs[a]=i.extended),this._data[3*a+0]=i.content,this._data[3*a+1]=i.fg,this._data[3*a+2]=i.bg}setCellFromCodePoint(a,i,c,_,g,C){268435456&g&&(this._extendedAttrs[a]=C),this._data[3*a+0]=i|c<<22,this._data[3*a+1]=_,this._data[3*a+2]=g}addCodepointToCell(a,i){let c=this._data[3*a+0];2097152&c?this._combined[a]+=(0,d.stringFromCodePoint)(i):(2097151&c?(this._combined[a]=(0,d.stringFromCodePoint)(2097151&c)+(0,d.stringFromCodePoint)(i),c&=-2097152,c|=2097152):c=i|4194304,this._data[3*a+0]=c)}insertCells(a,i,c,_){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new s.ExtendedAttrs),i<this.length-a){let g=new l.CellData;for(let C=this.length-a-i-1;C>=0;--C)this.setCell(a+i+C,this.loadCell(a+C,g));for(let C=0;C<i;++C)this.setCell(a+C,c)}else for(let g=a;g<this.length;++g)this.setCell(g,c);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new s.ExtendedAttrs)}deleteCells(a,i,c,_){if(a%=this.length,i<this.length-a){let g=new l.CellData;for(let C=0;C<this.length-a-i;++C)this.setCell(a+C,this.loadCell(a+i+C,g));for(let C=this.length-i;C<this.length;++C)this.setCell(C,c)}else for(let g=a;g<this.length;++g)this.setCell(g,c);a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new s.ExtendedAttrs),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,_?.fg||0,_?.bg||0,_?.extended||new s.ExtendedAttrs)}replaceCells(a,i,c,_,g=!1){if(g)for(a&&this.getWidth(a-1)===2&&!this.isProtected(a-1)&&this.setCellFromCodePoint(a-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new s.ExtendedAttrs),i<this.length&&this.getWidth(i-1)===2&&!this.isProtected(i)&&this.setCellFromCodePoint(i,0,1,_?.fg||0,_?.bg||0,_?.extended||new s.ExtendedAttrs);a<i&&a<this.length;)this.isProtected(a)||this.setCell(a,c),a++;else for(a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new s.ExtendedAttrs),i<this.length&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i,0,1,_?.fg||0,_?.bg||0,_?.extended||new s.ExtendedAttrs);a<i&&a<this.length;)this.setCell(a++,c)}resize(a,i){if(a===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let c=3*a;if(a>this.length){if(this._data.buffer.byteLength>=4*c)this._data=new Uint32Array(this._data.buffer,0,c);else{let _=new Uint32Array(c);_.set(this._data),this._data=_}for(let _=this.length;_<a;++_)this.setCell(_,i)}else{this._data=this._data.subarray(0,c);let _=Object.keys(this._combined);for(let C=0;C<_.length;C++){let S=parseInt(_[C],10);S>=a&&delete this._combined[S]}let g=Object.keys(this._extendedAttrs);for(let C=0;C<g.length;C++){let S=parseInt(g[C],10);S>=a&&delete this._extendedAttrs[S]}}return this.length=a,4*c*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let a=new Uint32Array(this._data.length);return a.set(this._data),this._data=a,1}return 0}fill(a,i=!1){if(i)for(let c=0;c<this.length;++c)this.isProtected(c)||this.setCell(c,a);else{this._combined={},this._extendedAttrs={};for(let c=0;c<this.length;++c)this.setCell(c,a)}}copyFrom(a){this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={};for(let i in a._combined)this._combined[i]=a._combined[i];this._extendedAttrs={};for(let i in a._extendedAttrs)this._extendedAttrs[i]=a._extendedAttrs[i];this.isWrapped=a.isWrapped}clone(){let a=new D(0);a._data=new Uint32Array(this._data),a.length=this.length;for(let i in this._combined)a._combined[i]=this._combined[i];for(let i in this._extendedAttrs)a._extendedAttrs[i]=this._extendedAttrs[i];return a.isWrapped=this.isWrapped,a}getTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0}getNoBgTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0]||50331648&this._data[3*a+2])return a+(this._data[3*a+0]>>22);return 0}copyCellsFrom(a,i,c,_,g){let C=a._data;if(g)for(let T=_-1;T>=0;T--){for(let m=0;m<3;m++)this._data[3*(c+T)+m]=C[3*(i+T)+m];268435456&C[3*(i+T)+2]&&(this._extendedAttrs[c+T]=a._extendedAttrs[i+T])}else for(let T=0;T<_;T++){for(let m=0;m<3;m++)this._data[3*(c+T)+m]=C[3*(i+T)+m];268435456&C[3*(i+T)+2]&&(this._extendedAttrs[c+T]=a._extendedAttrs[i+T])}let S=Object.keys(a._combined);for(let T=0;T<S.length;T++){let m=parseInt(S[T],10);m>=i&&(this._combined[m-i+c]=a._combined[m])}}translateToString(a=!1,i=0,c=this.length){a&&(c=Math.min(c,this.getTrimmedLength()));let _="";for(;i<c;){let g=this._data[3*i+0],C=2097151&g;_+=2097152&g?this._combined[i]:C?(0,d.stringFromCodePoint)(C):u.WHITESPACE_CELL_CHAR,i+=g>>22||1}return _}}r.BufferLine=D},4841:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getRangeLength=void 0,r.getRangeLength=function(o,s){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return s*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(v,r)=>{function o(s,l,u){if(l===s.length-1)return s[l].getTrimmedLength();let d=!s[l].hasContent(u-1)&&s[l].getWidth(u-1)===1,h=s[l+1].getWidth(0)===2;return d&&h?u-1:u}Object.defineProperty(r,"__esModule",{value:!0}),r.getWrappedLineTrimmedLength=r.reflowSmallerGetNewLineLengths=r.reflowLargerApplyNewLayout=r.reflowLargerCreateNewLayout=r.reflowLargerGetLinesToRemove=void 0,r.reflowLargerGetLinesToRemove=function(s,l,u,d,h){let D=[];for(let p=0;p<s.length-1;p++){let a=p,i=s.get(++a);if(!i.isWrapped)continue;let c=[s.get(p)];for(;a<s.length&&i.isWrapped;)c.push(i),i=s.get(++a);if(d>=p&&d<a){p+=c.length-1;continue}let _=0,g=o(c,_,l),C=1,S=0;for(;C<c.length;){let m=o(c,C,l),y=m-S,E=u-g,b=Math.min(y,E);c[_].copyCellsFrom(c[C],S,g,b,!1),g+=b,g===u&&(_++,g=0),S+=b,S===m&&(C++,S=0),g===0&&_!==0&&c[_-1].getWidth(u-1)===2&&(c[_].copyCellsFrom(c[_-1],u-1,g++,1,!1),c[_-1].setCell(u-1,h))}c[_].replaceCells(g,u,h);let T=0;for(let m=c.length-1;m>0&&(m>_||c[m].getTrimmedLength()===0);m--)T++;T>0&&(D.push(p+c.length-T),D.push(T)),p+=c.length-1}return D},r.reflowLargerCreateNewLayout=function(s,l){let u=[],d=0,h=l[d],D=0;for(let p=0;p<s.length;p++)if(h===p){let a=l[++d];s.onDeleteEmitter.fire({index:p-D,amount:a}),p+=a-1,D+=a,h=l[++d]}else u.push(p);return{layout:u,countRemoved:D}},r.reflowLargerApplyNewLayout=function(s,l){let u=[];for(let d=0;d<l.length;d++)u.push(s.get(l[d]));for(let d=0;d<u.length;d++)s.set(d,u[d]);s.length=l.length},r.reflowSmallerGetNewLineLengths=function(s,l,u){let d=[],h=s.map((i,c)=>o(s,c,l)).reduce((i,c)=>i+c),D=0,p=0,a=0;for(;a<h;){if(h-a<u){d.push(h-a);break}D+=u;let i=o(s,p,l);D>i&&(D-=i,p++);let c=s[p].getWidth(D-1)===2;c&&D--;let _=c?u-1:u;d.push(_),a+=_}return d},r.getWrappedLineTrimmedLength=o},5295:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferSet=void 0;let s=o(8460),l=o(844),u=o(9092);class d extends l.Disposable{constructor(D,p){super(),this._optionsService=D,this._bufferService=p,this._onBufferActivate=this.register(new s.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(D){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(D),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(D,p){this._normal.resize(D,p),this._alt.resize(D,p),this.setupTabStops(D)}setupTabStops(D){this._normal.setupTabStops(D),this._alt.setupTabStops(D)}}r.BufferSet=d},511:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;let s=o(482),l=o(643),u=o(3734);class d extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(D){let p=new d;return p.setFromCharData(D),p}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,s.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(D){this.fg=D[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let p=!1;if(D[l.CHAR_DATA_CHAR_INDEX].length>2)p=!0;else if(D[l.CHAR_DATA_CHAR_INDEX].length===2){let a=D[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){let i=D[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(a-55296)+i-56320+65536|D[l.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=D[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|D[l.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=D[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|D[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=d},643:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},4863:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Marker=void 0;let s=o(8460),l=o(844);class u{get id(){return this._id}constructor(h){this.line=h,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new s.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,l.disposeArray)(this._disposables),this._disposables.length=0)}register(h){return this._disposables.push(h),h}}r.Marker=u,u._nextId=1},7116:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CHARSET=r.CHARSETS=void 0,r.CHARSETS={},r.DEFAULT_CHARSET=r.CHARSETS.B,r.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},r.CHARSETS.A={"#":"\xA3"},r.CHARSETS.B=void 0,r.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},r.CHARSETS.C=r.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},r.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},r.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},r.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},r.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},r.CHARSETS.E=r.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},r.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},r.CHARSETS.H=r.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},r.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(v,r)=>{var o,s,l;Object.defineProperty(r,"__esModule",{value:!0}),r.C1_ESCAPED=r.C1=r.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F"}(o||(r.C0=o={})),function(u){u.PAD="\x80",u.HOP="\x81",u.BPH="\x82",u.NBH="\x83",u.IND="\x84",u.NEL="\x85",u.SSA="\x86",u.ESA="\x87",u.HTS="\x88",u.HTJ="\x89",u.VTS="\x8A",u.PLD="\x8B",u.PLU="\x8C",u.RI="\x8D",u.SS2="\x8E",u.SS3="\x8F",u.DCS="\x90",u.PU1="\x91",u.PU2="\x92",u.STS="\x93",u.CCH="\x94",u.MW="\x95",u.SPA="\x96",u.EPA="\x97",u.SOS="\x98",u.SGCI="\x99",u.SCI="\x9A",u.CSI="\x9B",u.ST="\x9C",u.OSC="\x9D",u.PM="\x9E",u.APC="\x9F"}(s||(r.C1=s={})),function(u){u.ST=`${o.ESC}\\`}(l||(r.C1_ESCAPED=l={}))},7399:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;let s=o(2584),l={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(u,d,h,D){let p={type:0,cancel:!1,key:void 0},a=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?p.key=d?s.C0.ESC+"OA":s.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?p.key=d?s.C0.ESC+"OD":s.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?p.key=d?s.C0.ESC+"OC":s.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(p.key=d?s.C0.ESC+"OB":s.C0.ESC+"[B");break;case 8:if(u.altKey){p.key=s.C0.ESC+s.C0.DEL;break}p.key=s.C0.DEL;break;case 9:if(u.shiftKey){p.key=s.C0.ESC+"[Z";break}p.key=s.C0.HT,p.cancel=!0;break;case 13:p.key=u.altKey?s.C0.ESC+s.C0.CR:s.C0.CR,p.cancel=!0;break;case 27:p.key=s.C0.ESC,u.altKey&&(p.key=s.C0.ESC+s.C0.ESC),p.cancel=!0;break;case 37:if(u.metaKey)break;a?(p.key=s.C0.ESC+"[1;"+(a+1)+"D",p.key===s.C0.ESC+"[1;3D"&&(p.key=s.C0.ESC+(h?"b":"[1;5D"))):p.key=d?s.C0.ESC+"OD":s.C0.ESC+"[D";break;case 39:if(u.metaKey)break;a?(p.key=s.C0.ESC+"[1;"+(a+1)+"C",p.key===s.C0.ESC+"[1;3C"&&(p.key=s.C0.ESC+(h?"f":"[1;5C"))):p.key=d?s.C0.ESC+"OC":s.C0.ESC+"[C";break;case 38:if(u.metaKey)break;a?(p.key=s.C0.ESC+"[1;"+(a+1)+"A",h||p.key!==s.C0.ESC+"[1;3A"||(p.key=s.C0.ESC+"[1;5A")):p.key=d?s.C0.ESC+"OA":s.C0.ESC+"[A";break;case 40:if(u.metaKey)break;a?(p.key=s.C0.ESC+"[1;"+(a+1)+"B",h||p.key!==s.C0.ESC+"[1;3B"||(p.key=s.C0.ESC+"[1;5B")):p.key=d?s.C0.ESC+"OB":s.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(p.key=s.C0.ESC+"[2~");break;case 46:p.key=a?s.C0.ESC+"[3;"+(a+1)+"~":s.C0.ESC+"[3~";break;case 36:p.key=a?s.C0.ESC+"[1;"+(a+1)+"H":d?s.C0.ESC+"OH":s.C0.ESC+"[H";break;case 35:p.key=a?s.C0.ESC+"[1;"+(a+1)+"F":d?s.C0.ESC+"OF":s.C0.ESC+"[F";break;case 33:u.shiftKey?p.type=2:u.ctrlKey?p.key=s.C0.ESC+"[5;"+(a+1)+"~":p.key=s.C0.ESC+"[5~";break;case 34:u.shiftKey?p.type=3:u.ctrlKey?p.key=s.C0.ESC+"[6;"+(a+1)+"~":p.key=s.C0.ESC+"[6~";break;case 112:p.key=a?s.C0.ESC+"[1;"+(a+1)+"P":s.C0.ESC+"OP";break;case 113:p.key=a?s.C0.ESC+"[1;"+(a+1)+"Q":s.C0.ESC+"OQ";break;case 114:p.key=a?s.C0.ESC+"[1;"+(a+1)+"R":s.C0.ESC+"OR";break;case 115:p.key=a?s.C0.ESC+"[1;"+(a+1)+"S":s.C0.ESC+"OS";break;case 116:p.key=a?s.C0.ESC+"[15;"+(a+1)+"~":s.C0.ESC+"[15~";break;case 117:p.key=a?s.C0.ESC+"[17;"+(a+1)+"~":s.C0.ESC+"[17~";break;case 118:p.key=a?s.C0.ESC+"[18;"+(a+1)+"~":s.C0.ESC+"[18~";break;case 119:p.key=a?s.C0.ESC+"[19;"+(a+1)+"~":s.C0.ESC+"[19~";break;case 120:p.key=a?s.C0.ESC+"[20;"+(a+1)+"~":s.C0.ESC+"[20~";break;case 121:p.key=a?s.C0.ESC+"[21;"+(a+1)+"~":s.C0.ESC+"[21~";break;case 122:p.key=a?s.C0.ESC+"[23;"+(a+1)+"~":s.C0.ESC+"[23~";break;case 123:p.key=a?s.C0.ESC+"[24;"+(a+1)+"~":s.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(h&&!D||!u.altKey||u.metaKey)!h||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?p.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(p.key=s.C0.US),u.key==="@"&&(p.key=s.C0.NUL)):u.keyCode===65&&(p.type=1);else{let i=l[u.keyCode],c=i?.[u.shiftKey?1:0];if(c)p.key=s.C0.ESC+c;else if(u.keyCode>=65&&u.keyCode<=90){let _=u.ctrlKey?u.keyCode-64:u.keyCode+32,g=String.fromCharCode(_);u.shiftKey&&(g=g.toUpperCase()),p.key=s.C0.ESC+g}else if(u.keyCode===32)p.key=s.C0.ESC+(u.ctrlKey?s.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let _=u.code.slice(3,4);u.shiftKey||(_=_.toLowerCase()),p.key=s.C0.ESC+_,p.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?p.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?p.key=s.C0.NUL:u.keyCode>=51&&u.keyCode<=55?p.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?p.key=s.C0.DEL:u.keyCode===219?p.key=s.C0.ESC:u.keyCode===220?p.key=s.C0.FS:u.keyCode===221&&(p.key=s.C0.GS)}return p}},482:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},r.utf32ToString=function(o,s=0,l=o.length){let u="";for(let d=s;d<l;++d){let h=o[d];h>65535?(h-=65536,u+=String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):u+=String.fromCharCode(h)}return u},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,s){let l=o.length;if(!l)return 0;let u=0,d=0;if(this._interim){let h=o.charCodeAt(d++);56320<=h&&h<=57343?s[u++]=1024*(this._interim-55296)+h-56320+65536:(s[u++]=this._interim,s[u++]=h),this._interim=0}for(let h=d;h<l;++h){let D=o.charCodeAt(h);if(55296<=D&&D<=56319){if(++h>=l)return this._interim=D,u;let p=o.charCodeAt(h);56320<=p&&p<=57343?s[u++]=1024*(D-55296)+p-56320+65536:(s[u++]=D,s[u++]=p)}else D!==65279&&(s[u++]=D)}return u}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,s){let l=o.length;if(!l)return 0;let u,d,h,D,p=0,a=0,i=0;if(this.interim[0]){let g=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,T=0;for(;(S=63&this.interim[++T])&&T<4;)C<<=6,C|=S;let m=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=m-T;for(;i<y;){if(i>=l)return 0;if(S=o[i++],(192&S)!=128){i--,g=!0;break}this.interim[T++]=S,C<<=6,C|=63&S}g||(m===2?C<128?i--:s[p++]=C:m===3?C<2048||C>=55296&&C<=57343||C===65279||(s[p++]=C):C<65536||C>1114111||(s[p++]=C)),this.interim.fill(0)}let c=l-4,_=i;for(;_<l;){for(;!(!(_<c)||128&(u=o[_])||128&(d=o[_+1])||128&(h=o[_+2])||128&(D=o[_+3]));)s[p++]=u,s[p++]=d,s[p++]=h,s[p++]=D,_+=4;if(u=o[_++],u<128)s[p++]=u;else if((224&u)==192){if(_>=l)return this.interim[0]=u,p;if(d=o[_++],(192&d)!=128){_--;continue}if(a=(31&u)<<6|63&d,a<128){_--;continue}s[p++]=a}else if((240&u)==224){if(_>=l)return this.interim[0]=u,p;if(d=o[_++],(192&d)!=128){_--;continue}if(_>=l)return this.interim[0]=u,this.interim[1]=d,p;if(h=o[_++],(192&h)!=128){_--;continue}if(a=(15&u)<<12|(63&d)<<6|63&h,a<2048||a>=55296&&a<=57343||a===65279)continue;s[p++]=a}else if((248&u)==240){if(_>=l)return this.interim[0]=u,p;if(d=o[_++],(192&d)!=128){_--;continue}if(_>=l)return this.interim[0]=u,this.interim[1]=d,p;if(h=o[_++],(192&h)!=128){_--;continue}if(_>=l)return this.interim[0]=u,this.interim[1]=d,this.interim[2]=h,p;if(D=o[_++],(192&D)!=128){_--;continue}if(a=(7&u)<<18|(63&d)<<12|(63&h)<<6|63&D,a<65536||a>1114111)continue;s[p++]=a}}return p}}},225:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeV6=void 0;let o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],s=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],l;r.UnicodeV6=class{constructor(){if(this.version="6",!l){l=new Uint8Array(65536),l.fill(1),l[0]=0,l.fill(0,1,32),l.fill(0,127,160),l.fill(2,4352,4448),l[9001]=2,l[9002]=2,l.fill(2,11904,42192),l[12351]=1,l.fill(2,44032,55204),l.fill(2,63744,64256),l.fill(2,65040,65050),l.fill(2,65072,65136),l.fill(2,65280,65377),l.fill(2,65504,65511);for(let u=0;u<o.length;++u)l.fill(0,o[u][0],o[u][1]+1)}}wcwidth(u){return u<32?0:u<127?1:u<65536?l[u]:function(d,h){let D,p=0,a=h.length-1;if(d<h[0][0]||d>h[a][1])return!1;for(;a>=p;)if(D=p+a>>1,d>h[D][1])p=D+1;else{if(!(d<h[D][0]))return!0;a=D-1}return!1}(u,s)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1}}},5981:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WriteBuffer=void 0;let s=o(8460),l=o(844);class u extends l.Disposable{constructor(h){super(),this._action=h,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(h,D){if(D!==void 0&&this._syncCalls>D)return void(this._syncCalls=0);if(this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let p;for(this._isSyncWriting=!0;p=this._writeBuffer.shift();){this._action(p);let a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(h,D){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(D),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(D)}_innerWrite(h=0,D=!0){let p=h||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let a=this._writeBuffer[this._bufferOffset],i=this._action(a,D);if(i){let _=g=>Date.now()-p>=12?setTimeout(()=>this._innerWrite(0,g)):this._innerWrite(p,g);return void i.catch(g=>(queueMicrotask(()=>{throw g}),Promise.resolve(!1))).then(_)}let c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-p>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}r.WriteBuffer=u},5941:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.toRgbString=r.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,s=/^[\da-f]+$/;function l(u,d){let h=u.toString(16),D=h.length<2?"0"+h:h;switch(d){case 4:return h[0];case 8:return D;case 12:return(D+D).slice(0,3);default:return D+D}}r.parseColor=function(u){if(!u)return;let d=u.toLowerCase();if(d.indexOf("rgb:")===0){d=d.slice(4);let h=o.exec(d);if(h){let D=h[1]?15:h[4]?255:h[7]?4095:65535;return[Math.round(parseInt(h[1]||h[4]||h[7]||h[10],16)/D*255),Math.round(parseInt(h[2]||h[5]||h[8]||h[11],16)/D*255),Math.round(parseInt(h[3]||h[6]||h[9]||h[12],16)/D*255)]}}else if(d.indexOf("#")===0&&(d=d.slice(1),s.exec(d)&&[3,6,9,12].includes(d.length))){let h=d.length/3,D=[0,0,0];for(let p=0;p<3;++p){let a=parseInt(d.slice(h*p,h*p+h),16);D[p]=h===1?a<<4:h===2?a:h===3?a>>4:a>>8}return D}},r.toRgbString=function(u,d=16){let[h,D,p]=u;return`rgb:${l(h,d)}/${l(D,d)}/${l(p,d)}`}},5770:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PAYLOAD_LIMIT=void 0,r.PAYLOAD_LIMIT=1e7},6351:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DcsHandler=r.DcsParser=void 0;let s=o(482),l=o(8742),u=o(5770),d=[];r.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=d,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}registerHandler(D,p){this._handlers[D]===void 0&&(this._handlers[D]=[]);let a=this._handlers[D];return a.push(p),{dispose:()=>{let i=a.indexOf(p);i!==-1&&a.splice(i,1)}}}clearHandler(D){this._handlers[D]&&delete this._handlers[D]}setHandlerFallback(D){this._handlerFb=D}reset(){if(this._active.length)for(let D=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;D>=0;--D)this._active[D].unhook(!1);this._stack.paused=!1,this._active=d,this._ident=0}hook(D,p){if(this.reset(),this._ident=D,this._active=this._handlers[D]||d,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].hook(p);else this._handlerFb(this._ident,"HOOK",p)}put(D,p,a){if(this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].put(D,p,a);else this._handlerFb(this._ident,"PUT",(0,s.utf32ToString)(D,p,a))}unhook(D,p=!0){if(this._active.length){let a=!1,i=this._active.length-1,c=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,a=p,c=this._stack.fallThrough,this._stack.paused=!1),!c&&a===!1){for(;i>=0&&(a=this._active[i].unhook(D),a!==!0);i--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,a;i--}for(;i>=0;i--)if(a=this._active[i].unhook(!1),a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",D);this._active=d,this._ident=0}};let h=new l.Params;h.addParam(0),r.DcsHandler=class{constructor(D){this._handler=D,this._data="",this._params=h,this._hitLimit=!1}hook(D){this._params=D.length>1||D.params[0]?D.clone():h,this._data="",this._hitLimit=!1}put(D,p,a){this._hitLimit||(this._data+=(0,s.utf32ToString)(D,p,a),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(D){let p=!1;if(this._hitLimit)p=!1;else if(D&&(p=this._handler(this._data,this._params),p instanceof Promise))return p.then(a=>(this._params=h,this._data="",this._hitLimit=!1,a));return this._params=h,this._data="",this._hitLimit=!1,p}}},2015:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;let s=o(844),l=o(8742),u=o(6242),d=o(6351);class h{constructor(i){this.table=new Uint8Array(i)}setDefault(i,c){this.table.fill(i<<4|c)}add(i,c,_,g){this.table[c<<8|i]=_<<4|g}addMany(i,c,_,g){for(let C=0;C<i.length;C++)this.table[c<<8|i[C]]=_<<4|g}}r.TransitionTable=h;let D=160;r.VT500_TRANSITION_TABLE=function(){let a=new h(4095),i=Array.apply(null,Array(256)).map((T,m)=>m),c=(T,m)=>i.slice(T,m),_=c(32,127),g=c(0,24);g.push(25),g.push.apply(g,c(28,32));let C=c(0,14),S;for(S in a.setDefault(1,0),a.addMany(_,0,2,0),C)a.addMany([24,26,153,154],S,3,0),a.addMany(c(128,144),S,3,0),a.addMany(c(144,152),S,3,0),a.add(156,S,0,0),a.add(27,S,11,1),a.add(157,S,4,8),a.addMany([152,158,159],S,0,7),a.add(155,S,11,3),a.add(144,S,11,9);return a.addMany(g,0,3,0),a.addMany(g,1,3,1),a.add(127,1,0,1),a.addMany(g,8,0,8),a.addMany(g,3,3,3),a.add(127,3,0,3),a.addMany(g,4,3,4),a.add(127,4,0,4),a.addMany(g,6,3,6),a.addMany(g,5,3,5),a.add(127,5,0,5),a.addMany(g,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(_,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(c(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(_,7,0,7),a.addMany(g,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(c(64,127),3,7,0),a.addMany(c(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(c(48,60),4,8,4),a.addMany(c(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(c(32,64),6,0,6),a.add(127,6,0,6),a.addMany(c(64,127),6,0,0),a.addMany(c(32,48),3,9,5),a.addMany(c(32,48),5,9,5),a.addMany(c(48,64),5,0,6),a.addMany(c(64,127),5,7,0),a.addMany(c(32,48),4,9,5),a.addMany(c(32,48),1,9,2),a.addMany(c(32,48),2,9,2),a.addMany(c(48,127),2,10,0),a.addMany(c(48,80),1,10,0),a.addMany(c(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(c(96,127),1,10,0),a.add(80,1,11,9),a.addMany(g,9,0,9),a.add(127,9,0,9),a.addMany(c(28,32),9,0,9),a.addMany(c(32,48),9,9,12),a.addMany(c(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(g,11,0,11),a.addMany(c(32,128),11,0,11),a.addMany(c(28,32),11,0,11),a.addMany(g,10,0,10),a.add(127,10,0,10),a.addMany(c(28,32),10,0,10),a.addMany(c(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(c(32,48),10,9,12),a.addMany(g,12,0,12),a.add(127,12,0,12),a.addMany(c(28,32),12,0,12),a.addMany(c(32,48),12,9,12),a.addMany(c(48,64),12,0,11),a.addMany(c(64,127),12,12,13),a.addMany(c(64,127),10,12,13),a.addMany(c(64,127),9,12,13),a.addMany(g,13,13,13),a.addMany(_,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(D,0,2,0),a.add(D,8,5,8),a.add(D,6,0,6),a.add(D,11,0,11),a.add(D,13,13,13),a}();class p extends s.Disposable{constructor(i=r.VT500_TRANSITION_TABLE){super(),this._transitions=i,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new l.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(c,_,g)=>{},this._executeHandlerFb=c=>{},this._csiHandlerFb=(c,_)=>{},this._escHandlerFb=c=>{},this._errorHandlerFb=c=>c,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,s.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new d.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(i,c=[64,126]){let _=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if(_=i.prefix.charCodeAt(0),_&&60>_||_>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<i.intermediates.length;++C){let S=i.intermediates.charCodeAt(C);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");_<<=8,_|=S}}if(i.final.length!==1)throw new Error("final must be a single byte");let g=i.final.charCodeAt(0);if(c[0]>g||g>c[1])throw new Error(`final must be in range ${c[0]} .. ${c[1]}`);return _<<=8,_|=g,_}identToString(i){let c=[];for(;i;)c.push(String.fromCharCode(255&i)),i>>=8;return c.reverse().join("")}setPrintHandler(i){this._printHandler=i}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(i,c){let _=this._identifier(i,[48,126]);this._escHandlers[_]===void 0&&(this._escHandlers[_]=[]);let g=this._escHandlers[_];return g.push(c),{dispose:()=>{let C=g.indexOf(c);C!==-1&&g.splice(C,1)}}}clearEscHandler(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]}setEscHandlerFallback(i){this._escHandlerFb=i}setExecuteHandler(i,c){this._executeHandlers[i.charCodeAt(0)]=c}clearExecuteHandler(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]}setExecuteHandlerFallback(i){this._executeHandlerFb=i}registerCsiHandler(i,c){let _=this._identifier(i);this._csiHandlers[_]===void 0&&(this._csiHandlers[_]=[]);let g=this._csiHandlers[_];return g.push(c),{dispose:()=>{let C=g.indexOf(c);C!==-1&&g.splice(C,1)}}}clearCsiHandler(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]}setCsiHandlerFallback(i){this._csiHandlerFb=i}registerDcsHandler(i,c){return this._dcsParser.registerHandler(this._identifier(i),c)}clearDcsHandler(i){this._dcsParser.clearHandler(this._identifier(i))}setDcsHandlerFallback(i){this._dcsParser.setHandlerFallback(i)}registerOscHandler(i,c){return this._oscParser.registerHandler(i,c)}clearOscHandler(i){this._oscParser.clearHandler(i)}setOscHandlerFallback(i){this._oscParser.setHandlerFallback(i)}setErrorHandler(i){this._errorHandler=i}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(i,c,_,g,C){this._parseStack.state=i,this._parseStack.handlers=c,this._parseStack.handlerPos=_,this._parseStack.transition=g,this._parseStack.chunkPos=C}parse(i,c,_){let g,C=0,S=0,T=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,T=this._parseStack.chunkPos+1;else{if(_===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let m=this._parseStack.handlers,y=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(_===!1&&y>-1){for(;y>=0&&(g=m[y](this._params),g!==!0);y--)if(g instanceof Promise)return this._parseStack.handlerPos=y,g}this._parseStack.handlers=[];break;case 4:if(_===!1&&y>-1){for(;y>=0&&(g=m[y](),g!==!0);y--)if(g instanceof Promise)return this._parseStack.handlerPos=y,g}this._parseStack.handlers=[];break;case 6:if(C=i[this._parseStack.chunkPos],g=this._dcsParser.unhook(C!==24&&C!==26,_),g)return g;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=i[this._parseStack.chunkPos],g=this._oscParser.end(C!==24&&C!==26,_),g)return g;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,T=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let m=T;m<c;++m){switch(C=i[m],S=this._transitions.table[this.currentState<<8|(C<160?C:D)],S>>4){case 2:for(let L=m+1;;++L){if(L>=c||(C=i[L])<32||C>126&&C<D){this._printHandler(i,m,L),m=L-1;break}if(++L>=c||(C=i[L])<32||C>126&&C<D){this._printHandler(i,m,L),m=L-1;break}if(++L>=c||(C=i[L])<32||C>126&&C<D){this._printHandler(i,m,L),m=L-1;break}if(++L>=c||(C=i[L])<32||C>126&&C<D){this._printHandler(i,m,L),m=L-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:m,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let y=this._csiHandlers[this._collect<<8|C],E=y?y.length-1:-1;for(;E>=0&&(g=y[E](this._params),g!==!0);E--)if(g instanceof Promise)return this._preserveStack(3,y,E,S,m),g;E<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++m<c&&(C=i[m])>47&&C<60);m--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let b=this._escHandlers[this._collect<<8|C],w=b?b.length-1:-1;for(;w>=0&&(g=b[w](),g!==!0);w--)if(g instanceof Promise)return this._preserveStack(4,b,w,S,m),g;w<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let L=m+1;;++L)if(L>=c||(C=i[L])===24||C===26||C===27||C>127&&C<D){this._dcsParser.put(i,m,L),m=L-1;break}break;case 14:if(g=this._dcsParser.unhook(C!==24&&C!==26),g)return this._preserveStack(6,[],0,S,m),g;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let L=m+1;;L++)if(L>=c||(C=i[L])<32||C>127&&C<D){this._oscParser.put(i,m,L),m=L-1;break}break;case 6:if(g=this._oscParser.end(C!==24&&C!==26),g)return this._preserveStack(5,[],0,S,m),g;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}r.EscapeSequenceParser=p},6242:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OscHandler=r.OscParser=void 0;let s=o(5770),l=o(482),u=[];r.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(d,h){this._handlers[d]===void 0&&(this._handlers[d]=[]);let D=this._handlers[d];return D.push(h),{dispose:()=>{let p=D.indexOf(h);p!==-1&&D.splice(p,1)}}}clearHandler(d){this._handlers[d]&&delete this._handlers[d]}setHandlerFallback(d){this._handlerFb=d}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let d=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;d>=0;--d)this._active[d].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].start();else this._handlerFb(this._id,"START")}_put(d,h,D){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(d,h,D);else this._handlerFb(this._id,"PUT",(0,l.utf32ToString)(d,h,D))}start(){this.reset(),this._state=1}put(d,h,D){if(this._state!==3){if(this._state===1)for(;h<D;){let p=d[h++];if(p===59){this._state=2,this._start();break}if(p<48||57<p)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+p-48}this._state===2&&D-h>0&&this._put(d,h,D)}}end(d,h=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let D=!1,p=this._active.length-1,a=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,D=h,a=this._stack.fallThrough,this._stack.paused=!1),!a&&D===!1){for(;p>=0&&(D=this._active[p].end(d),D!==!0);p--)if(D instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,D;p--}for(;p>=0;p--)if(D=this._active[p].end(!1),D instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,D}else this._handlerFb(this._id,"END",d);this._active=u,this._id=-1,this._state=0}}},r.OscHandler=class{constructor(d){this._handler=d,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(d,h,D){this._hitLimit||(this._data+=(0,l.utf32ToString)(d,h,D),this._data.length>s.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(d){let h=!1;if(this._hitLimit)h=!1;else if(d&&(h=this._handler(this._data),h instanceof Promise))return h.then(D=>(this._data="",this._hitLimit=!1,D));return this._data="",this._hitLimit=!1,h}}},8742:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Params=void 0;let o=2147483647;class s{static fromArray(u){let d=new s;if(!u.length)return d;for(let h=Array.isArray(u[0])?1:0;h<u.length;++h){let D=u[h];if(Array.isArray(D))for(let p=0;p<D.length;++p)d.addSubParam(D[p]);else d.addParam(D)}return d}constructor(u=32,d=32){if(this.maxLength=u,this.maxSubParamsLength=d,d>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(d),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let u=new s(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){let u=[];for(let d=0;d<this.length;++d){u.push(this.params[d]);let h=this._subParamsIdx[d]>>8,D=255&this._subParamsIdx[d];D-h>0&&u.push(Array.prototype.slice.call(this._subParams,h,D))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>o?o:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>o?o:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){let d=this._subParamsIdx[u]>>8,h=255&this._subParamsIdx[u];return h-d>0?this._subParams.subarray(d,h):null}getSubParamsAll(){let u={};for(let d=0;d<this.length;++d){let h=this._subParamsIdx[d]>>8,D=255&this._subParamsIdx[d];D-h>0&&(u[d]=this._subParams.slice(h,D))}return u}addDigit(u){let d;if(this._rejectDigits||!(d=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let h=this._digitIsSub?this._subParams:this.params,D=h[d-1];h[d-1]=~D?Math.min(10*D+u,o):u}}r.Params=s},5741:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AddonManager=void 0,r.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,s){let l={instance:s,dispose:s.dispose,isDisposed:!1};this._addons.push(l),s.dispose=()=>this._wrappedAddonDispose(l),s.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let s=-1;for(let l=0;l<this._addons.length;l++)if(this._addons[l]===o){s=l;break}if(s===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(s,1)}}},8771:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferApiView=void 0;let s=o(3785),l=o(511);r.BufferApiView=class{constructor(u,d){this._buffer=u,this.type=d}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){let d=this._buffer.lines.get(u);if(d)return new s.BufferLineApiView(d)}getNullCell(){return new l.CellData}}},3785:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLineApiView=void 0;let s=o(511);r.BufferLineApiView=class{constructor(l){this._line=l}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(l,u){if(!(l<0||l>=this._line.length))return u?(this._line.loadCell(l,u),u):this._line.loadCell(l,new s.CellData)}translateToString(l,u,d){return this._line.translateToString(l,u,d)}}},8285:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferNamespaceApi=void 0;let s=o(8771),l=o(8460),u=o(844);class d extends u.Disposable{constructor(D){super(),this._core=D,this._onBufferChange=this.register(new l.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new s.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new s.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}r.BufferNamespaceApi=d},7975:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ParserApi=void 0,r.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,s){return this._core.registerCsiHandler(o,l=>s(l.toArray()))}addCsiHandler(o,s){return this.registerCsiHandler(o,s)}registerDcsHandler(o,s){return this._core.registerDcsHandler(o,(l,u)=>s(l,u.toArray()))}addDcsHandler(o,s){return this.registerDcsHandler(o,s)}registerEscHandler(o,s){return this._core.registerEscHandler(o,s)}addEscHandler(o,s){return this.registerEscHandler(o,s)}registerOscHandler(o,s){return this._core.registerOscHandler(o,s)}addOscHandler(o,s){return this.registerOscHandler(o,s)}}},7090:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeApi=void 0,r.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(v,r,o){var s=this&&this.__decorate||function(a,i,c,_){var g,C=arguments.length,S=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,i,c,_);else for(var T=a.length-1;T>=0;T--)(g=a[T])&&(S=(C<3?g(S):C>3?g(i,c,S):g(i,c))||S);return C>3&&S&&Object.defineProperty(i,c,S),S},l=this&&this.__param||function(a,i){return function(c,_){i(c,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferService=r.MINIMUM_ROWS=r.MINIMUM_COLS=void 0;let u=o(8460),d=o(844),h=o(5295),D=o(2585);r.MINIMUM_COLS=2,r.MINIMUM_ROWS=1;let p=r.BufferService=class extends d.Disposable{get buffer(){return this.buffers.active}constructor(a){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(a.rawOptions.cols||0,r.MINIMUM_COLS),this.rows=Math.max(a.rawOptions.rows||0,r.MINIMUM_ROWS),this.buffers=this.register(new h.BufferSet(a,this))}resize(a,i){this.cols=a,this.rows=i,this.buffers.resize(a,i),this._onResize.fire({cols:a,rows:i})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(a,i=!1){let c=this.buffer,_;_=this._cachedBlankLine,_&&_.length===this.cols&&_.getFg(0)===a.fg&&_.getBg(0)===a.bg||(_=c.getBlankLine(a,i),this._cachedBlankLine=_),_.isWrapped=i;let g=c.ybase+c.scrollTop,C=c.ybase+c.scrollBottom;if(c.scrollTop===0){let S=c.lines.isFull;C===c.lines.length-1?S?c.lines.recycle().copyFrom(_):c.lines.push(_.clone()):c.lines.splice(C+1,0,_.clone()),S?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{let S=C-g+1;c.lines.shiftElements(g+1,S-1,-1),c.lines.set(C,_.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)}scrollLines(a,i,c){let _=this.buffer;if(a<0){if(_.ydisp===0)return;this.isUserScrolling=!0}else a+_.ydisp>=_.ybase&&(this.isUserScrolling=!1);let g=_.ydisp;_.ydisp=Math.max(Math.min(_.ydisp+a,_.ybase),0),g!==_.ydisp&&(i||this._onScroll.fire(_.ydisp))}};r.BufferService=p=s([l(0,D.IOptionsService)],p)},7994:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharsetService=void 0,r.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,s){this._charsets[o]=s,this.glevel===o&&(this.charset=s)}}},1753:function(v,r,o){var s=this&&this.__decorate||function(_,g,C,S){var T,m=arguments.length,y=m<3?g:S===null?S=Object.getOwnPropertyDescriptor(g,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(_,g,C,S);else for(var E=_.length-1;E>=0;E--)(T=_[E])&&(y=(m<3?T(y):m>3?T(g,C,y):T(g,C))||y);return m>3&&y&&Object.defineProperty(g,C,y),y},l=this&&this.__param||function(_,g){return function(C,S){g(C,S,_)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;let u=o(2585),d=o(8460),h=o(844),D={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:_=>_.button!==4&&_.action===1&&(_.ctrl=!1,_.alt=!1,_.shift=!1,!0)},VT200:{events:19,restrict:_=>_.action!==32},DRAG:{events:23,restrict:_=>_.action!==32||_.button!==3},ANY:{events:31,restrict:_=>!0}};function p(_,g){let C=(_.ctrl?16:0)|(_.shift?4:0)|(_.alt?8:0);return _.button===4?(C|=64,C|=_.action):(C|=3&_.button,4&_.button&&(C|=64),8&_.button&&(C|=128),_.action===32?C|=32:_.action!==0||g||(C|=3)),C}let a=String.fromCharCode,i={DEFAULT:_=>{let g=[p(_,!1)+32,_.col+32,_.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${a(g[0])}${a(g[1])}${a(g[2])}`},SGR:_=>{let g=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${p(_,!0)};${_.col};${_.row}${g}`},SGR_PIXELS:_=>{let g=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${p(_,!0)};${_.x};${_.y}${g}`}},c=r.CoreMouseService=class extends h.Disposable{constructor(_,g){super(),this._bufferService=_,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new d.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(D))this.addProtocol(C,D[C]);for(let C of Object.keys(i))this.addEncoding(C,i[C]);this.reset()}addProtocol(_,g){this._protocols[_]=g}addEncoding(_,g){this._encodings[_]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(_){if(!this._protocols[_])throw new Error(`unknown protocol "${_}"`);this._activeProtocol=_,this._onProtocolChange.fire(this._protocols[_].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(_){if(!this._encodings[_])throw new Error(`unknown encoding "${_}"`);this._activeEncoding=_}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(_){if(_.col<0||_.col>=this._bufferService.cols||_.row<0||_.row>=this._bufferService.rows||_.button===4&&_.action===32||_.button===3&&_.action!==32||_.button!==4&&(_.action===2||_.action===3)||(_.col++,_.row++,_.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,_,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(_))return!1;let g=this._encodings[this._activeEncoding](_);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=_,!0}explainEvents(_){return{down:!!(1&_),up:!!(2&_),drag:!!(4&_),move:!!(8&_),wheel:!!(16&_)}}_equalEvents(_,g,C){if(C){if(_.x!==g.x||_.y!==g.y)return!1}else if(_.col!==g.col||_.row!==g.row)return!1;return _.button===g.button&&_.action===g.action&&_.ctrl===g.ctrl&&_.alt===g.alt&&_.shift===g.shift}};r.CoreMouseService=c=s([l(0,u.IBufferService),l(1,u.ICoreService)],c)},6975:function(v,r,o){var s=this&&this.__decorate||function(c,_,g,C){var S,T=arguments.length,m=T<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,g):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(c,_,g,C);else for(var y=c.length-1;y>=0;y--)(S=c[y])&&(m=(T<3?S(m):T>3?S(_,g,m):S(_,g))||m);return T>3&&m&&Object.defineProperty(_,g,m),m},l=this&&this.__param||function(c,_){return function(g,C){_(g,C,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreService=void 0;let u=o(1439),d=o(8460),h=o(844),D=o(2585),p=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),i=r.CoreService=class extends h.Disposable{constructor(c,_,g){super(),this._bufferService=c,this._logService=_,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new d.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new d.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new d.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new d.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(p),this.decPrivateModes=(0,u.clone)(a)}reset(){this.modes=(0,u.clone)(p),this.decPrivateModes=(0,u.clone)(a)}triggerDataEvent(c,_=!1){if(this._optionsService.rawOptions.disableStdin)return;let g=this._bufferService.buffer;_&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),_&&this._onUserInput.fire(),this._logService.debug(`sending data "${c}"`,()=>c.split("").map(C=>C.charCodeAt(0))),this._onData.fire(c)}triggerBinaryEvent(c){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${c}"`,()=>c.split("").map(_=>_.charCodeAt(0))),this._onBinary.fire(c))}};r.CoreService=i=s([l(0,D.IBufferService),l(1,D.ILogService),l(2,D.IOptionsService)],i)},9074:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DecorationService=void 0;let s=o(8055),l=o(8460),u=o(844),d=o(6106),h=0,D=0;class p extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new d.SortedList(c=>c?.marker.line),this._onDecorationRegistered=this.register(new l.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new l.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(c){if(c.marker.isDisposed)return;let _=new a(c);if(_){let g=_.marker.onDispose(()=>_.dispose());_.onDispose(()=>{_&&(this._decorations.delete(_)&&this._onDecorationRemoved.fire(_),g.dispose())}),this._decorations.insert(_),this._onDecorationRegistered.fire(_)}return _}reset(){for(let c of this._decorations.values())c.dispose();this._decorations.clear()}*getDecorationsAtCell(c,_,g){var C,S,T;let m=0,y=0;for(let E of this._decorations.getKeyIterator(_))m=(C=E.options.x)!==null&&C!==void 0?C:0,y=m+((S=E.options.width)!==null&&S!==void 0?S:1),c>=m&&c<y&&(!g||((T=E.options.layer)!==null&&T!==void 0?T:"bottom")===g)&&(yield E)}forEachDecorationAtCell(c,_,g,C){this._decorations.forEachByKey(_,S=>{var T,m,y;h=(T=S.options.x)!==null&&T!==void 0?T:0,D=h+((m=S.options.width)!==null&&m!==void 0?m:1),c>=h&&c<D&&(!g||((y=S.options.layer)!==null&&y!==void 0?y:"bottom")===g)&&C(S)})}}r.DecorationService=p;class a extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=s.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=s.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(c){super(),this.options=c,this.onRenderEmitter=this.register(new l.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=c.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InstantiationService=r.ServiceCollection=void 0;let s=o(2585),l=o(8343);class u{constructor(...h){this._entries=new Map;for(let[D,p]of h)this.set(D,p)}set(h,D){let p=this._entries.get(h);return this._entries.set(h,D),p}forEach(h){for(let[D,p]of this._entries.entries())h(D,p)}has(h){return this._entries.has(h)}get(h){return this._entries.get(h)}}r.ServiceCollection=u,r.InstantiationService=class{constructor(){this._services=new u,this._services.set(s.IInstantiationService,this)}setService(d,h){this._services.set(d,h)}getService(d){return this._services.get(d)}createInstance(d,...h){let D=(0,l.getServiceDependencies)(d).sort((i,c)=>i.index-c.index),p=[];for(let i of D){let c=this._services.get(i.id);if(!c)throw new Error(`[createInstance] ${d.name} depends on UNKNOWN service ${i.id}.`);p.push(c)}let a=D.length>0?D[0].index:h.length;if(h.length!==a)throw new Error(`[createInstance] First service dependency of ${d.name} at position ${a+1} conflicts with ${h.length} static arguments`);return new d(...h,...p)}}},7866:function(v,r,o){var s=this&&this.__decorate||function(a,i,c,_){var g,C=arguments.length,S=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(a,i,c,_);else for(var T=a.length-1;T>=0;T--)(g=a[T])&&(S=(C<3?g(S):C>3?g(i,c,S):g(i,c))||S);return C>3&&S&&Object.defineProperty(i,c,S),S},l=this&&this.__param||function(a,i){return function(c,_){i(c,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;let u=o(844),d=o(2585),h={trace:d.LogLevelEnum.TRACE,debug:d.LogLevelEnum.DEBUG,info:d.LogLevelEnum.INFO,warn:d.LogLevelEnum.WARN,error:d.LogLevelEnum.ERROR,off:d.LogLevelEnum.OFF},D,p=r.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=d.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),D=this}_updateLogLevel(){this._logLevel=h[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let i=0;i<a.length;i++)typeof a[i]=="function"&&(a[i]=a[i]())}_log(a,i,c){this._evalLazyOptionalParams(c),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+i,...c)}trace(a,...i){var c,_;this._logLevel<=d.LogLevelEnum.TRACE&&this._log((_=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.trace.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,a,i)}debug(a,...i){var c,_;this._logLevel<=d.LogLevelEnum.DEBUG&&this._log((_=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.debug.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,a,i)}info(a,...i){var c,_;this._logLevel<=d.LogLevelEnum.INFO&&this._log((_=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.info.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.info,a,i)}warn(a,...i){var c,_;this._logLevel<=d.LogLevelEnum.WARN&&this._log((_=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.warn.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.warn,a,i)}error(a,...i){var c,_;this._logLevel<=d.LogLevelEnum.ERROR&&this._log((_=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.error.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.error,a,i)}};r.LogService=p=s([l(0,d.IOptionsService)],p),r.setTraceLogger=function(a){D=a},r.traceCall=function(a,i,c){if(typeof c.value!="function")throw new Error("not supported");let _=c.value;c.value=function(...g){if(D.logLevel!==d.LogLevelEnum.TRACE)return _.apply(this,g);D.trace(`GlyphRenderer#${_.name}(${g.map(S=>JSON.stringify(S)).join(", ")})`);let C=_.apply(this,g);return D.trace(`GlyphRenderer#${_.name} return`,C),C}}},7302:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsService=r.DEFAULT_OPTIONS=void 0;let s=o(8460),l=o(844),u=o(6114);r.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let d=["normal","bold","100","200","300","400","500","600","700","800","900"];class h extends l.Disposable{constructor(p){super(),this._onOptionChange=this.register(new s.EventEmitter),this.onOptionChange=this._onOptionChange.event;let a=Object.assign({},r.DEFAULT_OPTIONS);for(let i in p)if(i in a)try{let c=p[i];a[i]=this._sanitizeAndValidateOption(i,c)}catch(c){console.error(c)}this.rawOptions=a,this.options=Object.assign({},a),this._setupOptions()}onSpecificOptionChange(p,a){return this.onOptionChange(i=>{i===p&&a(this.rawOptions[p])})}onMultipleOptionChange(p,a){return this.onOptionChange(i=>{p.indexOf(i)!==-1&&a()})}_setupOptions(){let p=i=>{if(!(i in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${i}"`);return this.rawOptions[i]},a=(i,c)=>{if(!(i in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${i}"`);c=this._sanitizeAndValidateOption(i,c),this.rawOptions[i]!==c&&(this.rawOptions[i]=c,this._onOptionChange.fire(i))};for(let i in this.rawOptions){let c={get:p.bind(this,i),set:a.bind(this,i)};Object.defineProperty(this.options,i,c)}}_sanitizeAndValidateOption(p,a){switch(p){case"cursorStyle":if(a||(a=r.DEFAULT_OPTIONS[p]),!function(i){return i==="block"||i==="underline"||i==="bar"}(a))throw new Error(`"${a}" is not a valid value for ${p}`);break;case"wordSeparator":a||(a=r.DEFAULT_OPTIONS[p]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=d.includes(a)?a:r.DEFAULT_OPTIONS[p];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(`${p} cannot be less than 1, value: ${a}`);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(`${p} cannot be less than 0, value: ${a}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(`${p} cannot be less than or equal to 0, value: ${a}`);break;case"rows":case"cols":if(!a&&a!==0)throw new Error(`${p} must be numeric, value: ${a}`);break;case"windowsPty":a=a??{}}return a}}r.OptionsService=h},2660:function(v,r,o){var s=this&&this.__decorate||function(h,D,p,a){var i,c=arguments.length,_=c<3?D:a===null?a=Object.getOwnPropertyDescriptor(D,p):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(h,D,p,a);else for(var g=h.length-1;g>=0;g--)(i=h[g])&&(_=(c<3?i(_):c>3?i(D,p,_):i(D,p))||_);return c>3&&_&&Object.defineProperty(D,p,_),_},l=this&&this.__param||function(h,D){return function(p,a){D(p,a,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkService=void 0;let u=o(2585),d=r.OscLinkService=class{constructor(h){this._bufferService=h,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(h){let D=this._bufferService.buffer;if(h.id===void 0){let g=D.addMarker(D.ybase+D.y),C={data:h,id:this._nextId++,lines:[g]};return g.onDispose(()=>this._removeMarkerFromLink(C,g)),this._dataByLinkId.set(C.id,C),C.id}let p=h,a=this._getEntryIdKey(p),i=this._entriesWithId.get(a);if(i)return this.addLineToLink(i.id,D.ybase+D.y),i.id;let c=D.addMarker(D.ybase+D.y),_={id:this._nextId++,key:this._getEntryIdKey(p),data:p,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(_,c)),this._entriesWithId.set(_.key,_),this._dataByLinkId.set(_.id,_),_.id}addLineToLink(h,D){let p=this._dataByLinkId.get(h);if(p&&p.lines.every(a=>a.line!==D)){let a=this._bufferService.buffer.addMarker(D);p.lines.push(a),a.onDispose(()=>this._removeMarkerFromLink(p,a))}}getLinkData(h){var D;return(D=this._dataByLinkId.get(h))===null||D===void 0?void 0:D.data}_getEntryIdKey(h){return`${h.id};;${h.uri}`}_removeMarkerFromLink(h,D){let p=h.lines.indexOf(D);p!==-1&&(h.lines.splice(p,1),h.lines.length===0&&(h.data.id!==void 0&&this._entriesWithId.delete(h.key),this._dataByLinkId.delete(h.id)))}};r.OscLinkService=d=s([l(0,u.IBufferService)],d)},8343:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;let o="di$target",s="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(l){return l[s]||[]},r.createDecorator=function(l){if(r.serviceRegistry.has(l))return r.serviceRegistry.get(l);let u=function(d,h,D){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(p,a,i){a[o]===a?a[s].push({id:p,index:i}):(a[s]=[{id:p,index:i}],a[o]=a)})(u,d,D)};return u.toString=()=>l,r.serviceRegistry.set(l,u),u}},2585:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;let s=o(8343);var l;r.IBufferService=(0,s.createDecorator)("BufferService"),r.ICoreMouseService=(0,s.createDecorator)("CoreMouseService"),r.ICoreService=(0,s.createDecorator)("CoreService"),r.ICharsetService=(0,s.createDecorator)("CharsetService"),r.IInstantiationService=(0,s.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(l||(r.LogLevelEnum=l={})),r.ILogService=(0,s.createDecorator)("LogService"),r.IOptionsService=(0,s.createDecorator)("OptionsService"),r.IOscLinkService=(0,s.createDecorator)("OscLinkService"),r.IUnicodeService=(0,s.createDecorator)("UnicodeService"),r.IDecorationService=(0,s.createDecorator)("DecorationService")},1480:(v,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeService=void 0;let s=o(8460),l=o(225);r.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new s.EventEmitter,this.onChange=this._onChange.event;let u=new l.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(u){if(!this._providers[u])throw new Error(`unknown Unicode version "${u}"`);this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)}register(u){this._providers[u.version]=u}wcwidth(u){return this._activeProvider.wcwidth(u)}getStringCellWidth(u){let d=0,h=u.length;for(let D=0;D<h;++D){let p=u.charCodeAt(D);if(55296<=p&&p<=56319){if(++D>=h)return d+this.wcwidth(p);let a=u.charCodeAt(D);56320<=a&&a<=57343?p=1024*(p-55296)+a-56320+65536:d+=this.wcwidth(a)}d+=this.wcwidth(p)}return d}}}},t={};function n(v){var r=t[v];if(r!==void 0)return r.exports;var o=t[v]={exports:{}};return e[v].call(o.exports,o,o.exports,n),o.exports}var f={};return(()=>{var v=f;Object.defineProperty(v,"__esModule",{value:!0}),v.Terminal=void 0;let r=n(9042),o=n(3236),s=n(844),l=n(5741),u=n(8285),d=n(7975),h=n(7090),D=["cols","rows"];class p extends s.Disposable{constructor(i){super(),this._core=this.register(new o.Terminal(i)),this._addonManager=this.register(new l.AddonManager),this._publicOptions=Object.assign({},this._core.options);let c=g=>this._core.options[g],_=(g,C)=>{this._checkReadonlyOptions(g),this._core.options[g]=C};for(let g in this._core.options){let C={get:c.bind(this,g),set:_.bind(this,g)};Object.defineProperty(this._publicOptions,g,C)}}_checkReadonlyOptions(i){if(D.includes(i))throw new Error(`Option "${i}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new d.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new h.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let i=this._core.coreService.decPrivateModes,c="none";switch(this._core.coreMouseService.activeProtocol){case"X10":c="x10";break;case"VT200":c="vt200";break;case"DRAG":c="drag";break;case"ANY":c="any"}return{applicationCursorKeysMode:i.applicationCursorKeys,applicationKeypadMode:i.applicationKeypad,bracketedPasteMode:i.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:c,originMode:i.origin,reverseWraparoundMode:i.reverseWraparound,sendFocusMode:i.sendFocus,wraparoundMode:i.wraparound}}get options(){return this._publicOptions}set options(i){for(let c in i)this._publicOptions[c]=i[c]}blur(){this._core.blur()}focus(){this._core.focus()}resize(i,c){this._verifyIntegers(i,c),this._core.resize(i,c)}open(i){this._core.open(i)}attachCustomKeyEventHandler(i){this._core.attachCustomKeyEventHandler(i)}registerLinkProvider(i){return this._core.registerLinkProvider(i)}registerCharacterJoiner(i){return this._checkProposedApi(),this._core.registerCharacterJoiner(i)}deregisterCharacterJoiner(i){this._checkProposedApi(),this._core.deregisterCharacterJoiner(i)}registerMarker(i=0){return this._verifyIntegers(i),this._core.registerMarker(i)}registerDecoration(i){var c,_,g;return this._checkProposedApi(),this._verifyPositiveIntegers((c=i.x)!==null&&c!==void 0?c:0,(_=i.width)!==null&&_!==void 0?_:0,(g=i.height)!==null&&g!==void 0?g:0),this._core.registerDecoration(i)}hasSelection(){return this._core.hasSelection()}select(i,c,_){this._verifyIntegers(i,c,_),this._core.select(i,c,_)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(i,c){this._verifyIntegers(i,c),this._core.selectLines(i,c)}dispose(){super.dispose()}scrollLines(i){this._verifyIntegers(i),this._core.scrollLines(i)}scrollPages(i){this._verifyIntegers(i),this._core.scrollPages(i)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(i){this._verifyIntegers(i),this._core.scrollToLine(i)}clear(){this._core.clear()}write(i,c){this._core.write(i,c)}writeln(i,c){this._core.write(i),this._core.write(`\r
`,c)}paste(i){this._core.paste(i)}refresh(i,c){this._verifyIntegers(i,c),this._core.refresh(i,c)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(i){this._addonManager.loadAddon(this,i)}static get strings(){return r}_verifyIntegers(...i){for(let c of i)if(c===1/0||isNaN(c)||c%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...i){for(let c of i)if(c&&(c===1/0||isNaN(c)||c%1!=0||c<0))throw new Error("This API only accepts positive integers")}}v.Terminal=p})(),f})())});var ff={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var pe=function(e){return e.identity},ve={identity:function(e){return e},Semigroupoid0:function(){return ff}};var rD={fromString:pe(ve)},ct=function(e){return e.fromString};var nD=function(e){return function(t){for(var n=t.length,f=new Array(n),v=0;v<n;v++)f[v]=e(t[v]);return f}};var nr=!0;var ze=function(e){return function(t){return function(n){return e(n)(t)}}},ge=function(e){return function(t){return e}};var aD=function(e){return function(t){return t(e)}};var Ht=function(){function e(){}return e.value=new e,e}();var $=function(e){return e.map};var st=function(e){return $(e)(ge(void 0))},cu=function(e){var t=$(e);return function(n){return function(f){return t(ge(f))(n)}}};var pt={map:nD};var oD=function(e){return function(t){return e+t}},iD=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var Jr=function(e){return e.reflectSymbol};var _f={append:oD};var At={append:iD};var se=function(e){return e.append};var _p={alt:se(At),Functor0:function(){return pt}},or=function(e){return e.alt};var cD=function(e){return function(t){for(var n=e.length,f=t.length,v=new Array(n*f),r=0,o=0;o<n;o++)for(var s=e[o],l=0;l<f;l++)v[r++]=s(t[l]);return v}};var wM=pe(ve);var _i={apply:cD,Functor0:function(){return pt}},Ye=function(e){return e.apply};var Wn=function(e){var t=Ye(e),n=$(e.Functor0());return function(f){return function(v){return t(n(ge(wM))(f))(v)}}};var z=function(e){return e.pure},pc=function(e){var t=z(e);return function(n){return function(f){if(!n)return f;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,f.constructor.name])}}},pr=function(e){var t=z(e);return function(n){return function(f){if(n)return f;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,f.constructor.name])}}},dc=function(e){var t=Ye(e.Apply0()),n=z(e);return function(f){return function(v){return t(n(f))(v)}}};var fu={pure:function(e){return[e]},Apply0:function(){return _i}};var fD=function(e){return function(t){for(var n=[],f=0,v=e.length;f<v;f++)Array.prototype.push.apply(n,t(e[f]));return n}};var MM=pe(ve),vt=function(e){return e.discard};var Do={bind:fD,Apply0:function(){return _i}},Y=function(e){return e.bind},Vt=function(e){return ze(Y(e))},pf=function(e){var t=Vt(e);return function(n){return function(f){return function(v){return t(n)(f(v))}}}};var mt={discard:function(e){return Y(e)}};var lu=function(e){var t=Y(e);return function(n){return t(n)(MM)}};var FM=function(e,t){if(e<1)return[];var n=new Array(e);return n.fill(t)},LM=function(e,t){for(var n=[],f=0,v=0;v<e;v++)n[f++]=t;return n},AM=typeof Array.prototype.fill=="function"?FM:LM,lD=function(){function e(v,r){this.head=v,this.tail=r}var t={};function n(v){return function(r){return new e(v,r)}}function f(v){for(var r=[],o=0,s=v;s!==t;)r[o++]=s.head,s=s.tail;return r}return function(v,r){return f(v(n)(t)(r))}}(),Hr=function(e){return e.length},_D=function(e,t,n){return n.length===0?e({}):t(n[0])(n.slice(1))},pD=function(e,t,n,f){return f<0||f>=n.length?t:e(n[f])};var dD=function(e,t,n,f){for(var v=0,r=f.length;v<r;v++)if(n(f[v]))return e(v);return t},vD=function(e,t,n,f){for(var v=f.length-1;v>=0;v--)if(n(f[v]))return e(v);return t},mD=function(e,t,n,f,v){if(n<0||n>v.length)return t;var r=v.slice();return r.splice(n,0,f),e(r)},hD=function(e,t,n,f){if(n<0||n>=f.length)return t;var v=f.slice();return v.splice(n,1),e(v)};var _u=function(e){return e.slice().reverse()};var gD=function(){function e(t,n,f,v,r,o){var s,l,u,d,h,D,p;for(s=r+(o-r>>1),s-r>1&&e(t,n,v,f,r,s),o-s>1&&e(t,n,v,f,s,o),l=r,u=s,d=r;l<s&&u<o;)h=v[l],D=v[u],p=n(t(h)(D)),p>0?(f[d++]=D,++u):(f[d++]=h,++l);for(;l<s;)f[d++]=v[l++];for(;u<o;)f[d++]=v[u++]}return function(t,n,f){var v;return f.length<2?f:(v=f.slice(0),e(t,n,v,f.slice(0),0,f.length),v)}}(),DD=function(e,t,n){return n.slice(e,t)};var CD=function(e){var t=Y(e.Bind1()),n=pc(e.Applicative0());return function(f){return function(v){return t(f)(function(r){return n(r)(v)})}}};var dp=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(f){return function(v){return t(v)(function(r){return n(f(r))})}}},Or=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(f){return function(v){return t(f)(function(r){return t(v)(function(o){return n(r(o))})})}}};var IM=Number.POSITIVE_INFINITY,RM=Number.NEGATIVE_INFINITY;var df=function(e){return function(t){return function(n){return function(f){return function(v){return f<v?e:f===v?t:n}}}}},yD=df,bD=df,SD=df,wD=df;var TD=function(e){return function(t){return function(n){for(var f=0,v=t.length,r=n.length;f<v&&f<r;){var o=t[f],s=n[f],l=e(o)(s);if(l!==0)return l;f++}return v===r?0:v>r?-1:1}}};var vf=function(e){return function(t){return e===t}},ED=vf,MD=vf,FD=vf;var LD=vf,AD=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var f=0;f<t.length;f++)if(!e(t[f])(n[f]))return!1;return!0}}};var vp={eq:function(e){return function(t){return!0}}},fn={eq:LD};var vc={eq:FD},Wa={eq:MD};var mf={eq:ED};var Ce=function(e){return e.eq},kM=Ce(mf),$a=function(e){return{eq:AD(Ce(e))}};var mc=function(e){var t=Ce(e);return function(n){return function(f){return kM(t(n)(f))(!1)}}};var ee=function(){function e(){}return e.value=new e,e}(),Z=function(){function e(){}return e.value=new e,e}(),Ee=function(){function e(){}return e.value=new e,e}();var pi={eq:function(e){return function(t){return e instanceof ee&&t instanceof ee||e instanceof Z&&t instanceof Z||e instanceof Ee&&t instanceof Ee}}};var xD=function(e){return function(t){return e-t|0}};var ID=function(e){return function(t){return e+t|0}},RD=function(e){return function(t){return e*t|0}},PD=function(e){return function(t){return e+t}},HD=function(e){return function(t){return e*t}};var bn=function(e){return e.zero};var mp={add:PD,zero:0,mul:HD,one:1},pu={add:ID,zero:0,mul:RD,one:1};var Xn=function(e){return e.one};var Sn=function(e){return e.add};var hf=function(e){return e.sub};var hc={sub:xD,Semiring0:function(){return pu}};var hp=function(e){var t=hf(e),n=bn(e.Semiring0());return function(f){return t(n)(f)}};var qa={compare:function(e){return function(t){return Ee.value}},Eq0:function(){return vp}},Xt=function(){return{compare:wD(ee.value)(Ee.value)(Z.value),Eq0:function(){return fn}}}();var du=function(){return{compare:SD(ee.value)(Ee.value)(Z.value),Eq0:function(){return vc}}}(),nt=function(){return{compare:bD(ee.value)(Ee.value)(Z.value),Eq0:function(){return Wa}}}();var gf=function(){return{compare:yD(ee.value)(Ee.value)(Z.value),Eq0:function(){return mf}}}();var de=function(e){return e.compare},WM=de(nt),Df=function(e){var t=de(e);return function(n){return function(f){return function(v){return t(n(f))(n(v))}}}};var gp=function(e){var t=de(e);return function(n){return function(f){var v=t(n)(f);return!(v instanceof ee)}}};var vu=function(e){var t=de(e);return function(n){return function(f){var v=t(n)(f);if(v instanceof ee)return f;if(v instanceof Ee||v instanceof Z)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[v.constructor.name])}}},gc=function(e){var t=de(e);return function(n){return function(f){var v=t(n)(f);if(v instanceof ee||v instanceof Ee)return n;if(v instanceof Z)return f;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[v.constructor.name])}}},vi=function(e){var t=de(e),n=$a(e.Eq0());return{compare:function(){var f=function(v){return function(r){var o=t(v)(r);if(o instanceof Ee)return 0;if(o instanceof ee)return 1;if(o instanceof Z)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[o.constructor.name])}};return function(v){return function(r){return WM(0)(TD(f)(v)(r))}}}(),Eq0:function(){return n}}};var WD=function(e){var t=gc(e),n=vu(e);return function(f){return function(v){return function(r){return t(v)(n(f)(r))}}}};var Dp=function(e){var t=gp(e);return function(n){var f=bn(n.Semiring0()),v=hp(n);return function(r){var o=t(r)(f);return o?r:v(r)}}};var Yn=function(e){return e.top};var mu={top:2147483647,bottom:-2147483648,Ord0:function(){return nt}};var yo=function(e){return e.bottom};var $D=function(e){return e.toString()},qD=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var wn={show:qD},Ua={show:$D};var Te=function(e){return e.show};var jM=pe(ve),B=function(){function e(){}return e.value=new e,e}(),O=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Sp=function(e){var t=se(e);return{append:function(n){return function(f){if(n instanceof B)return f;if(f instanceof B)return n;if(n instanceof O&&f instanceof O)return new O(t(n.value0)(f.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,f.constructor.name])}}}};var UD=function(e){var t=Sp(e);return{mempty:B.value,Semigroup0:function(){return t}}};var je=function(e){return function(t){return function(n){if(n instanceof B)return e;if(n instanceof O)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},So=je(!0)(ge(!1)),Cc=je(!1)(ge(!0));var ft={map:function(e){return function(t){return t instanceof O?new O(e(t.value0)):B.value}}},QM=$(ft);var dr=function(e){return je(e)(jM)},Zn=function(){return function(e){if(e instanceof O)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var hu=function(e){var t=Ce(e);return{eq:function(n){return function(f){return n instanceof B&&f instanceof B?!0:n instanceof O&&f instanceof O?t(n.value0)(f.value0):!1}}}};var yc={apply:function(e){return function(t){if(e instanceof O)return QM(e.value0)(t);if(e instanceof B)return B.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return ft}};var Yr={bind:function(e){return function(t){if(e instanceof O)return t(e.value0);if(e instanceof B)return B.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return yc}};var tt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var kr=function(e){return function(t){return function(n){if(n instanceof tt)return e(n.value0);if(n instanceof Qe)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Cf=function(){return kr(ge(B.value))(O.create)}();var VD=kr(ge(!1))(ge(!0));var ma=function(e){return e};var mi={map:function(e){return function(t){return e(t)}}};var yf={apply:function(e){return function(t){return e(t)}},Functor0:function(){return mi}},wp={bind:function(e){return function(t){return t(e)}},Apply0:function(){return yf}},Tp={pure:ma,Apply0:function(){return yf}},Va={Applicative0:function(){return Tp},Bind1:function(){return wp}};var zD=function(e){return Math.min(Math.abs(e),2147483647)},GD=function(e){return function(t){return t===0?0:t>0?Math.floor(e/t):-Math.floor(e/-t)}},jD=function(e){return function(t){if(t===0)return 0;var n=Math.abs(t);return(e%n+n)%n}};var QD={Ring0:function(){return hc}};var bc=function(e){return e.mod};var bf={degree:zD,div:GD,mod:jD,CommutativeRing0:function(){return QD}};var wo={mempty:"",Semigroup0:function(){return _f}};var hi={mempty:[],Semigroup0:function(){return At}};var Je=function(e){return e.mempty};var KD=function(e){return function(){return e}},XD=function(e){return function(t){return function(){return t(e())()}}};var YD=function(e,t,n){var f=0,v;return function(r){if(f===2)return v;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,v=n(),f=2,v}},ha={Applicative0:function(){return xt},Bind1:function(){return Zr}},Zr={bind:XD,Apply0:function(){return Ep(0)}},xt={pure:KD,Apply0:function(){return Ep(0)}},ZD=YD("functorEffect","Effect",function(){return{map:dc(xt)}}),Ep=YD("applyEffect","Effect",function(){return{apply:Or(ha),Functor0:function(){return ZD(0)}}}),Ae=ZD(20),Mp=Ep(23);var eC=function(e){return function(){return{value:e}}};var xe=function(e){return function(){return e.value}},tC=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},yt=function(e){return function(t){return function(){t.value=e}}};var rF=st(Ae),It=eC,Fp=tC,wf=function(e){return Fp(function(t){var n=e(t);return{state:n,value:n}})},en=function(e){return function(t){return rF(wf(e)(t))}};var iF=Vt(Zr),uF=$(Ae),dt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ht=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ot=function(e){return e.tailRecM};var cF=function(e){var t=function(n){var f=!1,v;function r(o){if(o instanceof dt){n=e(o.value0);return}if(o instanceof ht)return f=!0,o.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 103, column 3 - line 103, column 25): "+[o.constructor.name])}for(;!f;)v=r(n);return v};return function(n){return t(e(n))}};var rC={tailRecM:function(e){var t=function(f){return f},n=cF(function(f){return t(e(f))});return function(f){return ma(n(f))}},Monad0:function(){return Va}};var Tf={tailRecM:function(e){return function(t){var n=function(f){if(f instanceof ht)return f.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[f.constructor.name])};return function(){var v=iF(It)(e(t))();return function(){for(;!function(){var o=xe(v)();if(o instanceof dt){var s=e(o.value0)();return yt(s)(v)(),!1}if(o instanceof ht)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[o.constructor.name])}(););return{}}(),uF(n)(xe(v))()}}},Monad0:function(){return ha}};var nC=function(e){return function(t){return function(){return e(t())}}},aC=function(e){return function(){return e}},oC=function(e){return function(t){return function(){return t(e())()}}};var Sc=function(e){return function(t){return function(){for(var n=0,f=e.length;n<f;n++)t(e[n])()}}};var _F=function(e,t,n){var f=0,v;return function(r){if(f===2)return v;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,v=n(),f=2,v}};var gi={map:nC};var xp={Applicative0:function(){return Ef},Bind1:function(){return Ip}},Ip={bind:oC,Apply0:function(){return sC(0)}},Ef={pure:aC,Apply0:function(){return sC(0)}},sC=_F("applyST","Control.Monad.ST.Internal",function(){return{apply:Or(xp),Functor0:function(){return gi}}});function fC(e){return e}var lC=fC,_C=fC;var pC=function(e,t){return t.push(e)};var Mf=function(t){return function(n){return function(){return t(n)}}},Rp=function(t){return function(n){return function(f){return function(){return t(n,f)}}}};var dC=Mf(_C),Pp=Mf(lC);var Hp=Rp(pC);var mC=function(e){return function(t){return e&&t}},hC=function(e){return function(t){return e||t}},gC=function(e){return!e};var Tc=function(e){return e.tt};var En=function(e){return e.not};var Op=function(e){return e.implies};var Ec=function(e){return e.ff};var gu=function(e){return e.disj},Tn={ff:!1,tt:!0,implies:function(e){return function(t){return gu(Tn)(En(Tn)(e))(t)}},conj:mC,disj:hC,not:gC};var Mc=function(e){return e.conj},Fc=function(e){var t=Ec(e),n=Tc(e),f=Op(e),v=Mc(e),r=gu(e),o=En(e);return{ff:function(s){return t},tt:function(s){return n},implies:function(s){return function(l){return function(u){return f(s(u))(l(u))}}},conj:function(s){return function(l){return function(u){return v(s(u))(l(u))}}},disj:function(s){return function(l){return function(u){return r(s(u))(l(u))}}},not:function(s){return function(l){return o(s(l))}}}};var DC=function(e){return function(t){return function(n){for(var f=t,v=n.length,r=v-1;r>=0;r--)f=e(n[r])(f);return f}}},CC=function(e){return function(t){return function(n){for(var f=t,v=n.length,r=0;r<v;r++)f=e(f)(n[r]);return f}}};var yC={empty:[],Alt0:function(){return _p}},Br=function(e){return e.empty};var K=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Di=function(e){return function(t){return e(t.value0)(t.value1)}};var Qt=function(e){return e.value1};var Ga={map:function(e){return function(t){return new K(t.value0,e(t.value1))}}};var Fr=function(e){return e.value0};var Bp=function(e){var t=Ce(e);return function(n){var f=Ce(n);return{eq:function(v){return function(r){return t(v.value0)(r.value0)&&f(v.value1)(r.value1)}}}}},Du=function(e){var t=de(e),n=Bp(e.Eq0());return function(f){var v=de(f),r=n(f.Eq0());return{compare:function(o){return function(s){var l=t(o.value0)(s.value0);return l instanceof ee?ee.value:l instanceof Z?Z.value:v(o.value1)(s.value1)}},Eq0:function(){return r}}}};var Mn=function(e){return e.bimap};var FF={append:function(e){return function(t){return e instanceof O?e:t}}};var EC=function(){return{mempty:B.value,Semigroup0:function(){return FF}}}();var j=function(e){return e};var Af=function(){return j};var LF=Af();var ir=function(){return LF};var xF=pe(ve);var IF=ir();var zt=function(e){return e.foldr};var lt=function(e){var t=Wn(e.Apply0()),n=z(e);return function(f){var v=zt(f);return function(r){return v(function(o){return t(r(o))})(n(void 0))}}},xf=function(e){var t=lt(e);return function(n){return ze(t(n))}};var Jt=function(e){return e.foldl};var ja=function(e){var t=Jt(e);return function(n){var f=se(n.Semigroup0()),v=Je(n);return function(r){return function(o){var s=function(l){return function(u){return l.init?{init:!1,acc:u}:{init:!1,acc:f(l.acc)(f(r)(u))}}};return t(s)({init:!0,acc:v})(o).acc}}}};var Gp=function(e){var t=Jt(e);return function(n){return t(Sn(n))(bn(n))}};var Bt={foldr:function(e){return function(t){return function(n){if(n instanceof B)return t;if(n instanceof O)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof B)return t;if(n instanceof O)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=Je(e);return function(n){return function(f){if(f instanceof B)return t;if(f instanceof O)return n(f.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,f.constructor.name])}}}};var If={foldr:function(e){return function(t){return function(n){if(n instanceof tt)return t;if(n instanceof Qe)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof tt)return t;if(n instanceof Qe)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=Je(e);return function(n){return function(f){if(f instanceof tt)return t;if(f instanceof Qe)return n(f.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,f.constructor.name])}}}};var IC=function(e){var t=zt(e);return function(n){var f=se(n.Semigroup0()),v=Je(n);return function(r){return t(function(o){return function(s){return f(r(o))(s)}})(v)}}},bt={foldr:DC,foldl:CC,foldMap:function(e){return IC(bt)(e)}};var cr=function(e){return e.foldMap};var Rf=function(e){var t=cr(e)(EC);return function(n){var f=Ce(n);return function(v){var r=t(function(o){var s=f(v)(o.value0);return s?new O(o.value1):B.value});return function(o){return IF(r(o))}}}};var Si=function(e){var t=cr(e);return function(n){return t(n)(xF)}};var Pf=function(e){return function(t){return function(n){return e(t,n)}}},Rc=function(e){return function(t){return function(n){return function(f){return e(t,n,f)}}}},To=function(e){return function(t){return function(n){return function(f){return function(v){return e(t,n,f,v)}}}}},jp=function(e){return function(t){return function(n){return function(f){return function(v){return function(r){return e(t,n,f,v,r)}}}}}};var RC=function(e){return function(t){for(var n=t.length,f=Array(n),v=0;v<n;v++)f[v]=e(v)(t[v]);return f}};var Cu=function(e){return e.mapWithIndex};var Hc={mapWithIndex:RC,Functor0:function(){return pt}};var tn=function(e){return e.traverse};var Xp={traverse:function(e){var t=z(e),n=$(e.Apply0().Functor0());return function(f){return function(v){if(v instanceof B)return t(B.value);if(v instanceof O)return n(O.create)(f(v.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[f.constructor.name,v.constructor.name])}}},sequence:function(e){var t=z(e),n=$(e.Apply0().Functor0());return function(f){if(f instanceof B)return t(B.value);if(f instanceof O)return n(O.create)(f.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[f.constructor.name])}},Functor0:function(){return ft},Foldable1:function(){return Bt}};var JC=function(e){return function(t){return function(n){return function(f){return function(v){return function(r){for(var o=[],s=r;;){var l=v(s);if(e(l))return o;var u=t(l);o.push(n(u)),s=f(u)}}}}}}};var KC=function(e){return function(t){return function(n){return function(f){return function(v){return function(r){for(var o=[],s=r;;){var l=v(s);o.push(n(l));var u=f(l);if(e(u))return o;s=t(u)}}}}}}};var Bf=function(e){return e.foldl1};var bL=Zn();var Zp={unfoldr1:KC(So)(bL)(Fr)(Qt)};var wL=Zn(),ga=function(e){return e.unfoldr};var ea={unfoldr:JC(So)(wL)(Fr)(Qt),Unfoldable10:function(){return Zp}};var EL=st(gi);var ML=$(pt),FL=$(gi),ed=Zn(),LL=pr(Ef),AL=mc(pi),xL=Ce(pi);var IL=Si(bt),RL=se(At);var td=function(){return Rc(_D)(ge(B.value))(function(e){return function(t){return new O({head:e,tail:t})}})}();var qf=function(e){return Rc(gD)(e)(function(t){if(t instanceof Z)return 1;if(t instanceof Ee)return 0;if(t instanceof ee)return-1;throw new Error("Failed pattern match at Data.Array (line 897, column 38 - line 900, column 11): "+[t.constructor.name])})},rd=function(e){var t=Df(e);return function(n){return qf(t(n))}},PL=rd(nt),nd=function(e){var t=de(e);return function(n){return qf(t)(n)}};var $f=Rc(DD);var wi=function(e){return[e]};var Ti=function(e){return Hr(e)===0};var e0=Cu(Hc);var t0=function(){return jp(mD)(O.create)(B.value)}();var Uf=function(){return To(pD)(O.create)(B.value)}(),wu=function(e){return Uf(e)(Hr(e)-1|0)};var r0=function(e){return function(t){var n=function(v){var r=!1,o;function s(l){var u=Uf(t)(l);if(u instanceof O){var d=e(u.value0);if(d){v=l+1|0;return}return r=!0,new O(l)}if(u instanceof B)return r=!0,B.value;throw new Error("Failed pattern match at Data.Array (line 1035, column 5 - line 1037, column 25): "+[u.constructor.name])}for(;!r;)o=s(v);return o},f=n(0);if(f instanceof O&&f.value0===0)return{init:[],rest:t};if(f instanceof O)return{init:$f(0)(f.value0)(t),rest:$f(f.value0)(Hr(t))(t)};if(f instanceof B)return{init:t,rest:[]};throw new Error("Failed pattern match at Data.Array (line 1022, column 3 - line 1028, column 30): "+[f.constructor.name])}},Vf=function(e){return function(t){return r0(e)(t).init}};var Tu=function(e){return Uf(e)(0)},n0=function(e){return function(t){var n=qf(function(v){return function(r){return e(Qt(v))(Qt(r))}})(e0(K.create)(t)),f=Tu(n);if(f instanceof B)return[];if(f instanceof O)return ML(Qt)(PL(Fr)(function(){var r=dC(wi(f.value0))();return Sc(n)(function(o){return function(){var l=FL(function(){var u=function(d){return ed(wu(d))};return function(d){return Qt(u(d))}}())(Pp(r))();return LL(AL(e(l)(o.value1))(Ee.value))(EL(Hp(o)(r)))()}})(),Pp(r)()}()));throw new Error("Failed pattern match at Data.Array (line 1115, column 17 - line 1123, column 28): "+[f.constructor.name])}},kc=function(e){return n0(de(e))};var Nc=function(e){return Pf(lD)(zt(e))};var a0=function(e){return IL(e)};var o0=function(){return To(vD)(O.create)(B.value)}(),Bc=function(e){return function(t){return function(n){var f=je(0)(function(v){return v+1|0})(o0(function(v){return xL(e(t)(v))(Z.value)})(n));return ed(t0(f)(t)(n))}}};var i0=function(){return To(dD)(O.create)(B.value)}();var ad=function(e){return function(t){var n=e<1;return n?t:$f(e)(Hr(t))(t)}};var u0=function(){return To(hD)(O.create)(B.value)}(),zf=function(e){return function(t){return function(n){return n.length===0?[]:je(n)(function(f){return ed(u0(f)(n))})(i0(e(t))(n))}}},od=function(e){return zf(Ce(e))};var Cr=function(e){return function(t){return RL([e])(t)}};var id=ze(Y(Do)),Da=function(e){return id(function(){var t=je([])(wi);return function(n){return t(e(n))}}())};var An=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var cd=function(e){var t=Br(e);return function(n){return new An(n,t)}};var jf=function(e){var t=or(e.Plus1().Alt0()),n=z(e.Applicative0());return function(f){return t(n(f.value0))(f.value1)}};var Wc=function(e){var t=$(e);return{map:function(n){return function(f){return new An(n(f.value0),t(n)(f.value1))}}}};var Qf=function(e){var t=cr(e),n=Jt(e),f=zt(e);return{foldMap:function(v){var r=se(v.Semigroup0()),o=t(v);return function(s){return function(l){return r(s(l.value0))(o(s)(l.value1))}}},foldl:function(v){return function(r){return function(o){return n(v)(v(r)(o.value0))(o.value1)}}},foldr:function(v){return function(r){return function(o){return v(o.value0)(f(v)(r)(o.value1))}}}}};var sd=function(e){var t=Jt(e),n=zt(e),f=Qf(e);return{foldMap1:function(v){var r=se(v);return function(o){return function(s){return t(function(l){return function(u){return r(l)(o(u))}})(o(s.value0))(s.value1)}}},foldr1:function(v){return function(r){return je(r.value0)(v(r.value0))(n(function(o){var s=je(o)(v(o));return function(l){return O.create(s(l))}})(B.value)(r.value1))}},foldl1:function(v){return function(r){return t(v)(r.value0)(r.value1)}},Foldable0:function(){return f}}};var _0=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Eu=function(e){return e};var Jf=isFinite;var fd=Math.round;var d0=Yn(mu),v0=yo(mu);var h0=function(){return _0(O.create)(B.value)}(),tA=function(e){if(!Jf(e))return 0;if(e>=Eu(d0))return d0;if(e<=Eu(v0))return v0;if(nr)return dr(0)(h0(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},g0=function(e){return tA(fd(e))};var w6=typeof Array.from=="function",T6=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",E6=typeof String.prototype.fromCodePoint=="function",M6=typeof String.prototype.codePointAt=="function";var $c={Applicative0:function(){return fu},Plus1:function(){return yC}};var Eo=function(e){return function(t){return t.join(e)}};var pd=WD(du);var E0=Te(wn);var CA=function(){function e(t,n,f,v){this.value0=t,this.value1=n,this.value2=f,this.value3=v}return e.create=function(t){return function(n){return function(f){return function(v){return new e(t,n,f,v)}}}},e}();var yA=function(e){return function(t){return function(n){return function(f){var v=pd(0)(1)(t),r=pd(0)(1)(n),o=pd(0)(1)(f);return new CA(e,v,r,o)}}}};var M0=function(e){return function(t){return function(n){return yA(e)(t)(n)(1)}}},F0=M0(0)(0)(1);var L0=function(e){var t=function(s){return E0(Eu(g0(100*s))/100)},n=t(e.value1*100)+"%",f=t(e.value2*100)+"%",v=t(e.value0),r=E0(e.value3),o=e.value3===1;return o?"hsl("+(v+(", "+(n+(", "+(f+")"))))):"hsla("+(v+(", "+(n+(", "+(f+(", "+(r+")")))))))};var Mi=M0(0)(0)(0);var dd={dimap:function(e){return function(t){return function(n){return function(f){return t(n(e(f)))}}}}};var vd={first:function(e){return function(t){return new K(e(t.value0),t.value1)}},second:$(Ga),Profunctor0:function(){return dd}},md=function(e){return e.second};var x0=$(pt),I0=md(vd),wA=se(At),TA=Rf(bt)(fn);var rn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),EA=function(e){return e};var MA=function(e){return e},ya=function(e){return e.value};var Fu={append:function(e){return function(t){if(e instanceof nn&&t instanceof nn)return new nn(e.value0+t.value0);if(e instanceof nn&&t instanceof rn)return new rn(x0(I0(function(n){return e.value0+n}))(t.value0));if(e instanceof rn&&t instanceof nn)return new rn(x0(I0(function(n){return t.value0+n}))(e.value0));if(e instanceof rn&&t instanceof rn)return new rn(wA(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},FA=se(Fu),hd={append:function(e){return function(t){return FA(e)(t)}}},R0=se(hd);var zc=function(e){if(e instanceof rn)return dr("")(TA("")(e.value0));if(e instanceof nn)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var Yf=function(){return{fromString:nn.create}}(),P0=ct(Yf),mr={fromString:function(e){return EA(P0(e))}},Zf=ct(mr);var Fo={value:function(e){return Zf(L0(e))}};var Fi={value:function(){var e=Te(wn);return function(t){return Zf(e(t))}}()},Lo={value:Zf},Ja=function(e){var t=ya(e);return function(n){var f=ya(n);return{value:function(v){return R0(t(v.value0))(R0(Zf(" "))(f(v.value1)))}}}};var Yt={fromString:function(e){return MA(P0(e))}};var H0=function(e){return e};var Gc=function(){return new rn([new K("-webkit-",""),new K("-moz-",""),new K("-ms-",""),new K("-o-",""),new K("","")])}();var ba=j,gd=j;var Dd=se(hd),Cd=ya(Fi),yd=ct(mr),k0=Te(wn),LA=se(Fu);var Qc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),AA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),IA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),RA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Ao=function(e){if(e instanceof Qc)return zc(e.value0);if(e instanceof AA)return ba(function(t){return ba(function(n){return"("+(Ao(t)+(" + "+(Ao(n)+")")))})(e.value1)})(e.value0);if(e instanceof xA)return ba(function(t){return ba(function(n){return"("+(Ao(t)+(" - "+(Ao(n)+")")))})(e.value1)})(e.value0);if(e instanceof IA)return ba(function(t){return"("+(k0(e.value0)+(" * "+(Ao(t)+")")))})(e.value1);if(e instanceof RA)return ba(function(t){return"("+(Ao(t)+(" / "+(k0(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},ta={value:function(e){return e instanceof Qc?e.value0:LA(Gc)(new nn("calc"+Ao(e)))}};var Xe=function(e){return new Qc(Dd(Cd(e))(yd("px")))};var Lu=function(e){return new Qc(Dd(Cd(e))(yd("%")))};var bd=function(e){return new Qc(Dd(Cd(e))(yd("em")))};var PA=se(At),N0=z(fu),HA=Ce($a(fn)),Lr=de(Xt),OA=de(vi(Xt)),xo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ya=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Io=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ro=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Po=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ho=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Oo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ko=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),No=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Za=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Au=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),B0=function(e){return e},el=function(){function e(){}return e.value=new e,e}(),Sd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Td=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),W0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Jc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ge=function(e){return function(t){return new Jc(PA(e.value0)(t),e.value1)}},St=function(){return new Jc([],el.value)}(),q0=function(e){return B0(N0(Za.create(e)))};var kA={eq:function(e){return function(t){return e instanceof xo&&t instanceof xo||e instanceof Ya&&t instanceof Ya||e instanceof Io&&t instanceof Io?e.value0===t.value0:e instanceof Ro&&t instanceof Ro||e instanceof Po&&t instanceof Po||e instanceof Ho&&t instanceof Ho||e instanceof Oo&&t instanceof Oo||e instanceof ko&&t instanceof ko||e instanceof No&&t instanceof No?e.value0===t.value0&&e.value1===t.value1:e instanceof Za&&t instanceof Za?e.value0===t.value0:e instanceof Au&&t instanceof Au?e.value0===t.value0&&HA(e.value1)(t.value1):!1}}};var U0={compare:function(e){return function(t){if(e instanceof xo&&t instanceof xo)return Lr(e.value0)(t.value0);if(e instanceof xo)return ee.value;if(t instanceof xo)return Z.value;if(e instanceof Ya&&t instanceof Ya)return Lr(e.value0)(t.value0);if(e instanceof Ya)return ee.value;if(t instanceof Ya)return Z.value;if(e instanceof Io&&t instanceof Io)return Lr(e.value0)(t.value0);if(e instanceof Io)return ee.value;if(t instanceof Io)return Z.value;if(e instanceof Ro&&t instanceof Ro){var n=Lr(e.value0)(t.value0);return n instanceof ee?ee.value:n instanceof Z?Z.value:Lr(e.value1)(t.value1)}if(e instanceof Ro)return ee.value;if(t instanceof Ro)return Z.value;if(e instanceof Po&&t instanceof Po){var n=Lr(e.value0)(t.value0);return n instanceof ee?ee.value:n instanceof Z?Z.value:Lr(e.value1)(t.value1)}if(e instanceof Po)return ee.value;if(t instanceof Po)return Z.value;if(e instanceof Ho&&t instanceof Ho){var n=Lr(e.value0)(t.value0);return n instanceof ee?ee.value:n instanceof Z?Z.value:Lr(e.value1)(t.value1)}if(e instanceof Ho)return ee.value;if(t instanceof Ho)return Z.value;if(e instanceof Oo&&t instanceof Oo){var n=Lr(e.value0)(t.value0);return n instanceof ee?ee.value:n instanceof Z?Z.value:Lr(e.value1)(t.value1)}if(e instanceof Oo)return ee.value;if(t instanceof Oo)return Z.value;if(e instanceof ko&&t instanceof ko){var n=Lr(e.value0)(t.value0);return n instanceof ee?ee.value:n instanceof Z?Z.value:Lr(e.value1)(t.value1)}if(e instanceof ko)return ee.value;if(t instanceof ko)return Z.value;if(e instanceof No&&t instanceof No){var n=Lr(e.value0)(t.value0);return n instanceof ee?ee.value:n instanceof Z?Z.value:Lr(e.value1)(t.value1)}if(e instanceof No)return ee.value;if(t instanceof No)return Z.value;if(e instanceof Za&&t instanceof Za)return Lr(e.value0)(t.value0);if(e instanceof Za)return ee.value;if(t instanceof Za)return Z.value;if(e instanceof Au&&t instanceof Au){var n=Lr(e.value0)(t.value0);return n instanceof ee?ee.value:n instanceof Z?Z.value:OA(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return kA}};var tl=function(e){return new Jc([],new Sd(e))},Zt=function(e){return function(t){return new Jc([],new Td(e,t))}},V0=function(e){return function(t){return new Jc([],new wd(e,t))}};var Ze=function(e){return B0(N0(Ya.create(e)))};var ra=function(e){return e.tell};function na(e){return new Error(e)}function eo(e){return function(){throw e}}function rl(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var Md=function(e){return eo(na(e))};var yr=function(e){return e.throwError};var WA={throwError:eo,Monad0:function(){return ha}};var z0={catchError:ze(rl),MonadThrow0:function(){return WA}};var Vn=function(e){return e.catchError};var Kc=function(e){var t=Vn(e),n=e.MonadThrow0().Monad0(),f=$(n.Bind1().Apply0().Functor0()),v=z(n.Applicative0());return function(r){return t(f(Qe.create)(r))(function(o){return v(tt.create(o))})}};var an=function(e){return e.ask};var dn=function(e){return e.state};var Ar=function(e){var t=dn(e);return function(n){return t(function(f){return new K(void 0,n(f))})}},Sa=function(e){var t=dn(e);return function(n){return t(function(f){var v=n(f);return new K(v,v)})}},Wo=function(e){var t=dn(e);return function(n){return t(function(f){return new K(n(f),f)})}},zn=function(e){return dn(e)(function(t){return new K(t,t)})};var _t=function(e){return e.lift};var nl={liftEffect:pe(ve),Monad0:function(){return ha}},Ve=function(e){return e.liftEffect};var Fd=function(e){return e},Ld=function(e){return e};var al=function(e){return function(t){return e(t)}},Ad=function(e){var t=$(e);return{map:function(n){return al(t(function(f){return new K(n(f.value0),f.value1)}))}}};var Xc=function(e){var t=se(e);return function(n){var f=Ye(n),v=n.Functor0(),r=$(v),o=Ad(v);return{apply:function(s){return function(l){var u=function(d){return function(h){return new K(d.value0(h.value0),t(d.value1)(h.value1))}};return f(r(u)(s))(l)}},Functor0:function(){return o}}}},xd=function(e){var t=se(e),n=Xc(e);return function(f){var v=Y(f),r=f.Apply0(),o=$(r.Functor0()),s=n(r);return{bind:function(l){return function(u){return v(l)(function(d){var h=u(d.value0);return o(function(D){return new K(D.value0,t(d.value1)(D.value1))})(h)})}},Apply0:function(){return s}}}};var G0=function(e){var t=Je(e),n=Xc(e.Semigroup0());return function(f){var v=z(f),r=n(f.Apply0());return{pure:function(o){return v(new K(o,t))},Apply0:function(){return r}}}},UA=function(e){var t=G0(e),n=xd(e.Semigroup0());return function(f){var v=t(f.Applicative0()),r=n(f.Bind1());return{Applicative0:function(){return v},Bind1:function(){return r}}}};var j0=function(e){var t=e.Semigroup0(),n=UA(e);return function(f){var v=n(f);return{tell:function(){var r=z(f.Applicative0()),o=K.create(void 0);return function(s){return Fd(r(o(s)))}}(),Semigroup0:function(){return t},Monad1:function(){return v}}}};var VA=ir();var zA=function(e){return VA(Ld(e))};var Q0=function(e){return Qt(zA(e))};var JA=$(Ad(mi));var KA=Ye(Xc(At)(yf)),XA=Y(xd(At)(wp));var J0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),K0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),X0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Y0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Id=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Z0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ey=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ty=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ry=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var YA=function(e){return e},Zc=function(e){return Q0(e)},ny=function(){var e=ra(j0(hi)(Va));return function(t){return YA(e(wi(t)))}}(),it=function(e){return function(t){return ny(new Rd(new Id(e),Zc(t)))}};var Ft=function(e){var t=ya(e);return function(n){return function(f){return ny(new Yc(H0(n),t(f)))}}},Pd=function(e){var t=Ft(e);return function(n){return t(n)}};var ZA={map:function(e){return function(t){return JA(e)(t)}}};var ex={apply:function(e){return function(t){return KA(e)(t)}},Functor0:function(){return ZA}},$o={bind:function(e){return function(t){return XA(e)(function(n){return function(f){return f}(t(n))})}},Apply0:function(){return ex}};var tx=ct(mr);var ay=ct(Yt),rx=Ft(Fo),nx=Ja(ta);var ax={value:function(e){return e}},ox=Ft(Ja(ax)(nx(Fo))),oy=tx("solid");var iy=rx(ay("border-color"));var uy=function(e){return function(t){return function(n){return ox(ay("border"))(new K(e,new K(t,n)))}}};var il=ct(Yt),Pu=ct(mr);var In=function(){var e=Ft(Lo)(il("z-index")),t=Te(Ua);return function(n){return e(t(n))}}();var ix={value:function(e){return e}};var ux={value:function(e){return e}};var qo=Pu("relative"),br=Ft(ix)(il("position")),ul=Ft(Fi)(il("opacity"));var sy=Pu("inline-block");var fy=Pu("flex");var ly=Pu("none");var Hu=Ft(ux)(il("display"));var _y=Pu("block"),oa=Pu("absolute");var cx=ct(mr);var sx=ct(Yt);var fx={value:function(e){return e}};var py=cx("row");var dy=Ft(fx)(sx("flex-direction"));var Uo=Ft(ta),wa=ct(Yt),vy=Ja(ta)(ta),my=Ft(Ja(vy)(vy)),to=Uo(wa("width")),Gn=Uo(wa("top")),cl=Uo(wa("right"));var kd=Uo(wa("padding-right"));var hy=function(e){return function(t){return function(n){return function(f){return my(wa("padding"))(new K(new K(e,t),new K(n,f)))}}}};var Nd=Uo(wa("margin-right"));var gy=function(e){return function(t){return function(n){return function(f){return my(wa("margin"))(new K(new K(e,t),new K(n,f)))}}}};var ro=Uo(wa("left")),ia=Uo(wa("height")),Bd=Uo(wa("bottom"));var Dy=function(){function e(){}return e.value=new e,e}(),fl=function(){function e(){}return e.value=new e,e}(),Cy=function(){function e(){}return e.value=new e,e}(),yy=function(){function e(){}return e.value=new e,e}(),by=function(){function e(){}return e.value=new e,e}(),Sy=function(){function e(){}return e.value=new e,e}(),wy=function(){function e(){}return e.value=new e,e}(),Ty=function(){function e(){}return e.value=new e,e}(),Ey=function(){function e(){}return e.value=new e,e}(),My=function(){function e(){}return e.value=new e,e}(),Fy=function(){function e(){}return e.value=new e,e}(),Ly=function(){function e(){}return e.value=new e,e}(),Ay=function(){function e(){}return e.value=new e,e}(),xy=function(){function e(){}return e.value=new e,e}(),Iy=function(){function e(){}return e.value=new e,e}(),Ry=function(){function e(){}return e.value=new e,e}(),Py=function(){function e(){}return e.value=new e,e}(),Hy=function(){function e(){}return e.value=new e,e}(),Oy=function(){function e(){}return e.value=new e,e}(),ky=function(){function e(){}return e.value=new e,e}(),Ny=function(){function e(){}return e.value=new e,e}(),By=function(){function e(){}return e.value=new e,e}(),Wy=function(e){if(e instanceof Dy)return"button";if(e instanceof fl)return"checkbox";if(e instanceof Cy)return"color";if(e instanceof yy)return"date";if(e instanceof by)return"datetime-local";if(e instanceof Sy)return"email";if(e instanceof wy)return"file";if(e instanceof Ty)return"hidden";if(e instanceof Ey)return"image";if(e instanceof My)return"month";if(e instanceof Fy)return"number";if(e instanceof Ly)return"password";if(e instanceof Ay)return"radio";if(e instanceof xy)return"range";if(e instanceof Iy)return"reset";if(e instanceof Ry)return"search";if(e instanceof Py)return"submit";if(e instanceof Hy)return"tel";if(e instanceof Oy)return"text";if(e instanceof ky)return"time";if(e instanceof Ny)return"url";if(e instanceof By)return"week";throw new Error("Failed pattern match at DOM.HTML.Indexed.InputType (line 33, column 19 - line 55, column 22): "+[e.constructor.name])};var Sr=function(){var e={},t="Pure",n="Throw",f="Catch",v="Sync",r="Async",o="Bind",s="Bracket",l="Fork",u="Sequential",d="Map",h="Apply",D="Alt",p="Cons",a="Resume",i="Release",c="Finalizer",_="Finalized",g="Forked",C="Fiber",S="Thunk";function T(V,fe,F,N){this.tag=V,this._1=fe,this._2=F,this._3=N}function m(V){var fe=function(F,N,q){return new T(V,F,N,q)};return fe.tag=V,fe}function y(V){return new T(t,void 0)}function E(V){try{V()}catch(fe){setTimeout(function(){throw fe},0)}}function b(V,fe,F){try{return fe(F())}catch(N){return V(N)}}function w(V,fe,F){try{return fe(F)()}catch(N){return F(V(N))(),y}}var L=function(){var V=1024,fe=0,F=0,N=new Array(V),q=!1;function k(){var le;for(q=!0;fe!==0;)fe--,le=N[F],N[F]=void 0,F=(F+1)%V,le();q=!1}return{isDraining:function(){return q},enqueue:function(le){var Q,Me;fe===V&&(Me=q,k(),q=Me),N[(F+fe)%V]=le,fe++,q||k()}}}();function I(V){var fe={},F=0,N=0;return{register:function(q){var k=F++;q.onComplete({rethrow:!0,handler:function(le){return function(){N--,delete fe[k]}}})(),fe[k]=q,N++},isEmpty:function(){return N===0},killAll:function(q,k){return function(){if(N===0)return k();var le=0,Q={};function Me(ke){Q[ke]=fe[ke].kill(q,function(Re){return function(){delete Q[ke],le--,V.isLeft(Re)&&V.fromLeft(Re)&&setTimeout(function(){throw V.fromLeft(Re)},0),le===0&&k()}})()}for(var et in fe)fe.hasOwnProperty(et)&&(le++,Me(et));return fe={},F=0,N=0,function(ke){return new T(v,function(){for(var Re in Q)Q.hasOwnProperty(Re)&&Q[Re]()})}}}}}var R=0,P=1,W=2,M=3,A=4,x=5,H=6;function U(V,fe,F){var N=0,q=R,k=F,le=null,Q=null,Me=null,et=null,ke=null,Re=0,$e=0,Nt=null,Dr=!0;function Er(ne){for(var X,me,Be;;)switch(X=null,me=null,Be=null,q){case W:q=P;try{k=Me(k),et===null?Me=null:(Me=et._1,et=et._2)}catch(Lt){q=x,le=V.left(Lt),k=null}break;case M:V.isLeft(k)?(q=x,le=k,k=null):Me===null?q=x:(q=W,k=V.fromRight(k));break;case P:switch(k.tag){case o:Me&&(et=new T(p,Me,et)),Me=k._2,q=P,k=k._1;break;case t:Me===null?(q=x,k=V.right(k._1)):(q=W,k=k._1);break;case v:q=M,k=b(V.left,V.right,k._1);break;case r:q=A,k=w(V.left,k._1,function(Lt){return function(){N===ne&&(N++,L.enqueue(function(){N===ne+1&&(q=M,k=Lt,Er(N))}))}});return;case n:q=x,le=V.left(k._1),k=null;break;case f:Me===null?ke=new T(p,k,ke,Q):ke=new T(p,k,new T(p,new T(a,Me,et),ke,Q),Q),Me=null,et=null,q=P,k=k._1;break;case s:Re++,Me===null?ke=new T(p,k,ke,Q):ke=new T(p,k,new T(p,new T(a,Me,et),ke,Q),Q),Me=null,et=null,q=P,k=k._1;break;case l:q=M,X=U(V,fe,k._2),fe&&fe.register(X),k._1&&X.run(),k=V.right(X);break;case u:q=P,k=oe(V,fe,k._1);break}break;case x:if(Me=null,et=null,ke===null)q=H,k=Q||le||k;else switch(X=ke._3,Be=ke._1,ke=ke._2,Be.tag){case f:Q&&Q!==X&&Re===0?q=x:le&&(q=P,k=Be._2(V.fromLeft(le)),le=null);break;case a:Q&&Q!==X&&Re===0||le?q=x:(Me=Be._1,et=Be._2,q=W,k=V.fromRight(k));break;case s:Re--,le===null&&(me=V.fromRight(k),ke=new T(p,new T(i,Be._2,me),ke,X),(Q===X||Re>0)&&(q=P,k=Be._3(me)));break;case i:ke=new T(p,new T(_,k,le),ke,Q),q=P,Q&&Q!==X&&Re===0?k=Be._1.killed(V.fromLeft(Q))(Be._2):le?k=Be._1.failed(V.fromLeft(le))(Be._2):k=Be._1.completed(V.fromRight(k))(Be._2),le=null,Re++;break;case c:Re++,ke=new T(p,new T(_,k,le),ke,Q),q=P,k=Be._1;break;case _:Re--,q=x,k=Be._1,le=Be._2;break}break;case H:for(var Ue in Nt)Nt.hasOwnProperty(Ue)&&(Dr=Dr&&Nt[Ue].rethrow,E(Nt[Ue].handler(k)));Nt=null,Q&&le?setTimeout(function(){throw V.fromLeft(le)},0):V.isLeft(k)&&Dr&&setTimeout(function(){if(Dr)throw V.fromLeft(k)},0);return;case R:q=P;break;case A:return}}function Tt(ne){return function(){if(q===H)return Dr=Dr&&ne.rethrow,ne.handler(k)(),function(){};var X=$e++;return Nt=Nt||{},Nt[X]=ne,function(){Nt!==null&&delete Nt[X]}}}function ce(ne,X){return function(){if(q===H)return X(V.right(void 0))(),function(){};var me=Tt({rethrow:!1,handler:function(){return X(V.right(void 0))}})();switch(q){case R:Q=V.left(ne),q=H,k=Q,Er(N);break;case A:Q===null&&(Q=V.left(ne)),Re===0&&(q===A&&(ke=new T(p,new T(c,k(ne)),ke,Q)),q=x,k=null,le=null,Er(++N));break;default:Q===null&&(Q=V.left(ne)),Re===0&&(q=x,k=null,le=null)}return me}}function ue(ne){return function(){var X=Tt({rethrow:!1,handler:ne})();return q===R&&Er(N),X}}return{kill:ce,join:ue,onComplete:Tt,isSuspended:function(){return q===R},run:function(){q===R&&(L.isDraining()?Er(N):L.enqueue(function(){Er(N)}))}}}function re(V,fe,F,N){var q=0,k={},le=0,Q={},Me=new Error("[ParAff] Early exit"),et=null,ke=e;function Re(Tt,ce,ue){var ne=ce,X=null,me=null,Be=0,Ue={},Lt,rr;e:for(;;)switch(Lt=null,ne.tag){case g:if(ne._3===e&&(Lt=k[ne._1],Ue[Be++]=Lt.kill(Tt,function(lr){return function(){Be--,Be===0&&ue(lr)()}})),X===null)break e;ne=X._2,me===null?X=null:(X=me._1,me=me._2);break;case d:ne=ne._2;break;case h:case D:X&&(me=new T(p,X,me)),X=ne,ne=ne._1;break}if(Be===0)ue(V.right(void 0))();else for(rr=0,Lt=Be;rr<Lt;rr++)Ue[rr]=Ue[rr]();return Ue}function $e(Tt,ce,ue){var ne,X,me,Be,Ue,Lt;for(V.isLeft(Tt)?(ne=Tt,X=null):(X=Tt,ne=null);;){if(me=null,Be=null,Ue=null,Lt=null,et!==null)return;if(ce===null){N(ne||X)();return}if(ce._3!==e)return;switch(ce.tag){case d:ne===null?(ce._3=V.right(ce._1(V.fromRight(X))),X=ce._3):ce._3=ne;break;case h:if(me=ce._1._3,Be=ce._2._3,ne){if(ce._3=ne,Ue=!0,Lt=le++,Q[Lt]=Re(Me,ne===me?ce._2:ce._1,function(){return function(){delete Q[Lt],Ue?Ue=!1:ue===null?$e(ne,null,null):$e(ne,ue._1,ue._2)}}),Ue){Ue=!1;return}}else{if(me===e||Be===e)return;X=V.right(V.fromRight(me)(V.fromRight(Be))),ce._3=X}break;case D:if(me=ce._1._3,Be=ce._2._3,me===e&&V.isLeft(Be)||Be===e&&V.isLeft(me))return;if(me!==e&&V.isLeft(me)&&Be!==e&&V.isLeft(Be))ne=X===me?Be:me,X=null,ce._3=ne;else if(ce._3=X,Ue=!0,Lt=le++,Q[Lt]=Re(Me,X===me?ce._2:ce._1,function(){return function(){delete Q[Lt],Ue?Ue=!1:ue===null?$e(X,null,null):$e(X,ue._1,ue._2)}}),Ue){Ue=!1;return}break}ue===null?ce=null:(ce=ue._1,ue=ue._2)}}function Nt(Tt){return function(ce){return function(){delete k[Tt._1],Tt._3=ce,$e(ce,Tt._2._1,Tt._2._2)}}}function Dr(){var Tt=P,ce=F,ue=null,ne=null,X,me;e:for(;;)switch(X=null,me=null,Tt){case P:switch(ce.tag){case d:ue&&(ne=new T(p,ue,ne)),ue=new T(d,ce._1,e,e),ce=ce._2;break;case h:ue&&(ne=new T(p,ue,ne)),ue=new T(h,e,ce._2,e),ce=ce._1;break;case D:ue&&(ne=new T(p,ue,ne)),ue=new T(D,e,ce._2,e),ce=ce._1;break;default:me=q++,Tt=x,X=ce,ce=new T(g,me,new T(p,ue,ne),e),X=U(V,fe,X),X.onComplete({rethrow:!1,handler:Nt(ce)})(),k[me]=X,fe&&fe.register(X)}break;case x:if(ue===null)break e;ue._1===e?(ue._1=ce,Tt=P,ce=ue._2,ue._2=e):(ue._2=ce,ce=ue,ne===null?ue=null:(ue=ne._1,ne=ne._2))}for(ke=ce,me=0;me<q;me++)k[me].run()}function Er(Tt,ce){et=V.left(Tt);var ue;for(var ne in Q)if(Q.hasOwnProperty(ne)){ue=Q[ne];for(ne in ue)ue.hasOwnProperty(ne)&&ue[ne]()}Q=null;var X=Re(Tt,ke,ce);return function(me){return new T(r,function(Be){return function(){for(var Ue in X)X.hasOwnProperty(Ue)&&X[Ue]();return y}})}}return Dr(),function(Tt){return new T(r,function(ce){return function(){return Er(Tt,ce)}})}}function oe(V,fe,F){return new T(r,function(N){return function(){return re(V,fe,F,N)}})}return T.EMPTY=e,T.Pure=m(t),T.Throw=m(n),T.Catch=m(f),T.Sync=m(v),T.Async=m(r),T.Bind=m(o),T.Bracket=m(s),T.Fork=m(l),T.Seq=m(u),T.ParMap=m(d),T.ParApply=m(h),T.ParAlt=m(D),T.Fiber=U,T.Supervisor=I,T.Scheduler=L,T.nonCanceler=y,T}(),qy=Sr.Pure,Uy=Sr.Throw;function Vy(e){return function(t){return Sr.Catch(e,t)}}function zy(e){return function(t){return t.tag===Sr.Pure.tag?Sr.Pure(e(t._1)):Sr.Bind(t,function(n){return Sr.Pure(e(n))})}}function Gy(e){return function(t){return Sr.Bind(e,t)}}function Wd(e){return function(t){return Sr.Fork(e,t)}}var jy=Sr.Sync;function Qy(e){return function(t){return Sr.ParMap(e,t)}}function Jy(e){return function(t){return Sr.ParApply(e,t)}}var no=Sr.Async;function ll(e){return function(t){return function(n){return Sr.Bracket(e,t,n)}}}function Ky(e,t){return function(){return Sr.Fiber(e,null,t)}}var Xy=function(){function e(n,f){return n===0&&typeof setImmediate<"u"?setImmediate(f):setTimeout(f,n)}function t(n,f){return n===0&&typeof clearImmediate<"u"?clearImmediate(f):clearTimeout(f)}return function(n,f){return Sr.Async(function(v){return function(){var r=e(f,v(n()));return function(){return Sr.Sync(function(){return n(t(f,r))})}}})}}(),Yy=Sr.Seq;var vx=$(ft);var $d=function(e){return e},eb=function(e){return e};var _l={lift:function(e){var t=dp(e)(O.create);return function(n){return $d(t(n))}}},mx=_t(_l);var hx=function(e){var t=$(e);return{map:function(n){return function(f){return t(vx(n))(f)}}}},qd=function(e){return{Applicative0:function(){return zd(e)},Bind1:function(){return Ud(e)}}},Ud=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return{bind:function(f){return function(v){return t(f)(function(r){if(r instanceof B)return n(B.value);if(r instanceof O){var o=v(r.value0);return o}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[r.constructor.name])})}},Apply0:function(){return Vd(e)}}},Vd=function(e){var t=hx(e.Bind1().Apply0().Functor0());return{apply:Or(qd(e)),Functor0:function(){return t}}},zd=function(e){return{pure:function(){var t=z(e.Applicative0());return function(n){return $d(t(O.create(n)))}}(),Apply0:function(){return Vd(e)}}};var tb=function(e){var t=Ot(e),n=e.Monad0(),f=Y(n.Bind1()),v=z(n.Applicative0()),r=qd(n);return{tailRecM:function(o){var s=t(function(l){var u=o(l);return f(u)(function(d){return v(function(){if(d instanceof B)return new ht(B.value);if(d instanceof O&&d.value0 instanceof dt)return new dt(d.value0.value0);if(d instanceof O&&d.value0 instanceof ht)return new ht(new O(d.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[d.constructor.name])}())})});return function(l){return $d(s(l))}},Monad0:function(){return r}}},rb=function(e){var t=e.Monad0(),n=mx(t),f=dn(e),v=qd(t);return{state:function(r){return n(f(r))},Monad0:function(){return v}}};var ob=function(e){return e};var Vo=function(e){return e};var dl={lift:function(e){return function(t){return ob(ge(t))}}},Dx=_t(dl),ib=function(e){return function(t){return function(n){return e(t(n))}}},Cx=function(e){return{map:function(){var t=$(e);return function(n){return ib(t(n))}}()}};var jd=function(e){var t=Ye(e),n=Cx(e.Functor0());return{apply:function(f){return function(v){return function(r){return t(f(r))(v(r))}}},Functor0:function(){return n}}},Ii=function(e){var t=Y(e),n=jd(e.Apply0());return{bind:function(f){return function(v){return function(r){return t(f(r))(function(o){var s=v(o);return s(r)})}}},Apply0:function(){return n}}};var Qd=function(e){var t=jd(e.Apply0());return{pure:function(){var n=z(e);return function(f){return ob(ge(n(f)))}}(),Apply0:function(){return t}}},vl=function(e){var t=Qd(e.Applicative0()),n=Ii(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},ku=function(e){var t=vl(e);return{ask:z(e.Applicative0()),Monad0:function(){return t}}};var zo=function(e){var t=e.Monad0(),n=vl(t);return{liftEffect:function(){var f=Dx(t),v=Ve(e);return function(r){return f(v(r))}}(),Monad0:function(){return n}}},Nu=function(e){var t=e.Monad0(),n=Vt(t.Bind1()),f=z(t.Applicative0()),v=Ot(e),r=vl(t);return{tailRecM:function(o){return function(s){var l=function(u){return function(d){var h=o(d);return n(f)(h(u))}};return function(u){return v(l(u))(s)}}},Monad0:function(){return r}}};var Pi=function(e){return e.sequential},ao=function(e){return e.parallel};var Tx=pe(ve),Ex=function(e){var t=Pi(e),n=ao(e);return function(f){var v=lt(f);return function(r){var o=v(r);return function(s){var l=o(function(u){return n(s(u))});return function(u){return t(l(u))}}}}};var es=function(e){var t=Ex(e);return function(n){var f=t(n);return function(v){return f(v)(Tx)}}};var ts=function(e){return e()};var cb=function(e){return e()};var sb=function(e){throw new Error(e)};var fb=function(){return sb};var xx=fb(),Ix=cb,hl=function(e){return Ix(function(){return xx(e)})};var Px=function(e,t,n){var f=0,v;return function(r){if(f===2)return v;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,v=n(),f=2,v}},Hx=z(xt),Xd=st(Ae),_b=$(Ae);var Ox=function(e){return e},pb=Wd(!1);var kx={map:Qy},vn={map:zy},Nx=$(vn),Yd=Wd(!0),Bx=function(){var e=function(f){if(f instanceof Qe)return f.value0;if(f instanceof tt)return hl("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[f.constructor.name])},t=function(f){if(f instanceof tt)return f.value0;if(f instanceof Qe)return hl("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[f.constructor.name])},n=function(f){if(f instanceof tt)return!0;if(f instanceof Qe)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[f.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:tt.create,right:Qe.create}}(),db=function(e){return Ky(Bx,e)},vb=function(e){return function(){var n=db(e)();return n.run(),n}},Zd=function(e){return Xd(vb(e))};var ev=function(e){return Xy(Qe.create,e)},mb=function(e){return function(t){return ll(e)({killed:ge(t),failed:ge(t),completed:ge(t)})}},hb={apply:Jy,Functor0:function(){return kx}};var Ta={Applicative0:function(){return mn},Bind1:function(){return Wt}},Wt={bind:Gy,Apply0:function(){return tv(0)}},mn={pure:qy,Apply0:function(){return tv(0)}},tv=Px("applyAff","Effect.Aff",function(){return{apply:Or(Ta),Functor0:function(){return vn}}}),Wx=tv(73),Bu=z(mn),gb=Y(Wt);var $x=Vt(Wt);var rs=function(e){return function(t){return mb(Bu(void 0))(ge(e))(ge(t))}},rv=function(e){return mb(e)(ge(Bu(void 0)))(Bu)};var Hi={parallel:j,sequential:Yy,Apply0:function(){return Wx},Apply1:function(){return hb}},qx=ao(Hi),Wu={pure:function(e){return qx(Bu(e))},Apply0:function(){return hb}};var xr={liftEffect:jy,Monad0:function(){return Ta}},gl=Ve(xr),Oi=function(e){return Ox(ge(gl(e)))},ns=function(e){return no(function(t){return _b(Oi)(e.join(t))})},Db={map:function(e){return function(t){return ts(db(Nx(e)(ns(t))))}}};var as=function(e){return function(t){return gb(gl(t.isSuspended))(function(n){return n?gl(Xd(t.kill(e,ge(Hx(void 0))))):no(function(f){return _b(Oi)(t.kill(e,f))})})}};var $u={throwError:Uy,Monad0:function(){return Ta}},Cb={catchError:Vy,MonadThrow0:function(){return $u}},yb=Kc(Cb);var bb=yb,Ux=function(e){return function(t){return vb($x(function(n){return gl(e(n))})(yb(t)))}},Dl=function(e){return function(t){return Xd(Ux(e)(t))}};var qu={tailRecM:function(e){var t=function(n){return gb(e(n))(function(f){if(f instanceof ht)return Bu(f.value0);if(f instanceof dt)return t(f.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[f.constructor.name])})};return t},Monad0:function(){return Ta}};var Sb=ge(Bu(void 0));var Qx=function(e){var t=$(e);return{map:function(n){return function(f){return function(v){return t(function(r){return new K(n(r.value0),r.value1)})(f(v))}}}}};var ov=function(e){return{Applicative0:function(){return uv(e)},Bind1:function(){return iv(e)}}},iv=function(e){var t=Y(e.Bind1());return{bind:function(n){return function(f){return function(v){return t(n(v))(function(r){var o=f(r.value0);return o(r.value1)})}}},Apply0:function(){return Tb(e)}}},Tb=function(e){var t=Qx(e.Bind1().Apply0().Functor0());return{apply:Or(ov(e)),Functor0:function(){return t}}},uv=function(e){var t=z(e.Applicative0());return{pure:function(n){return function(f){return t(new K(n,f))}},Apply0:function(){return Tb(e)}}};var Eb=function(e){var t=e.Monad0(),n=Y(t.Bind1()),f=z(t.Applicative0()),v=Ot(e),r=ov(t);return{tailRecM:function(o){return function(s){var l=function(u){var d=o(u.value0);return n(d(u.value1))(function(h){return f(function(){if(h.value0 instanceof dt)return new dt(new K(h.value0.value0,h.value1));if(h.value0 instanceof ht)return new ht(new K(h.value0.value0,h.value1));throw new Error("Failed pattern match at Control.Monad.State.Trans (line 87, column 16 - line 89, column 40): "+[h.value0.constructor.name])}())})};return function(u){return v(l)(new K(s,u))}}},Monad0:function(){return r}}},Mb=function(e){var t=z(e.Applicative0()),n=ov(e);return{state:function(f){return function(v){return t(f(v))}},Monad0:function(){return n}}};var Jx=_t(dl);var os={liftAff:pe(ve),MonadEffect0:function(){return xr}},Ir=function(e){return e.liftAff};var Fb=function(e){var t=e.MonadEffect0(),n=zo(t);return{liftAff:function(){var f=Jx(t.Monad0()),v=Ir(e);return function(r){return f(v(r))}}(),MonadEffect0:function(){return n}}};var Oe=function(){function e(){}return e.value=new e,e}(),Ne=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sv=function(e){return e};var Kx=function(e){var t=function(n){return function(f){var v=n,r=!1,o;function s(l,u){if(u instanceof Ne&&u.value1 instanceof Ne&&u.value1.value1 instanceof Ne){v=new Ne(u,l),f=u.value1.value1.value1;return}var d=function(D){return D instanceof Ne&&D.value1 instanceof Ne&&D.value1.value1 instanceof Oe?new Ne(e(D.value0),new Ne(e(D.value1.value0),Oe.value)):D instanceof Ne&&D.value1 instanceof Oe?new Ne(e(D.value0),Oe.value):Oe.value},h=function(D){return function(p){var a=D,i=!1,c;function _(g,C){if(g instanceof Ne&&g.value0 instanceof Ne&&g.value0.value1 instanceof Ne&&g.value0.value1.value1 instanceof Ne){a=g.value1,p=new Ne(e(g.value0.value0),new Ne(e(g.value0.value1.value0),new Ne(e(g.value0.value1.value1.value0),C)));return}return i=!0,C}for(;!i;)c=_(a,p);return c}};return r=!0,h(l)(d(u))}for(;!r;)o=s(v,f);return o}};return t(Oe.value)},Ab={map:Kx};var hn={foldr:function(e){return function(t){var n=function(){var v=function(r){return function(o){var s=r,l=!1,u;function d(h,D){if(D instanceof Oe)return l=!0,h;if(D instanceof Ne){s=new Ne(D.value0,h),o=D.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[h.constructor.name,D.constructor.name])}for(;!l;)u=d(s,o);return u}};return v(Oe.value)}(),f=Jt(hn)(ze(e))(t);return function(v){return f(n(v))}}},foldl:function(e){var t=function(n){return function(f){var v=n,r=!1,o;function s(l,u){if(u instanceof Oe)return r=!0,l;if(u instanceof Ne){v=e(l)(u.value0),f=u.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[u.constructor.name])}for(;!r;)o=s(v,f);return o}};return t},foldMap:function(e){var t=se(e.Semigroup0()),n=Je(e);return function(f){return Jt(hn)(function(v){var r=t(v);return function(o){return r(f(o))}})(n)}}};var Xx=zt(hn);var fv={append:function(e){return function(t){return Xx(Ne.create)(t)(e)}}},Yx=se(fv);var Zx={alt:Yx,Functor0:function(){return Ab}},xb=function(){return{empty:Oe.value,Alt0:function(){return Zx}}}();var oI=$(ft);var Ib=function(e){if(e instanceof Oe)return B.value;if(e instanceof Ne)return new O({head:e.value0,tail:e.value1});throw new Error("Failed pattern match at Data.List (line 259, column 1 - line 259, column 66): "+[e.constructor.name])},Rb=function(e){return ga(e)(function(t){return oI(function(n){return new K(n.head,n.tail)})(Ib(t))})};var oo=function(){var e=function(t){return function(n){var f=t,v=!1,r;function o(s,l){if(l instanceof Oe)return v=!0,s;if(l instanceof Ne){f=new Ne(l.value0,s),n=l.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[s.constructor.name,l.constructor.name])}for(;!v;)r=o(f,n);return r}};return e(Oe.value)}();var Pb=function(e){return e instanceof Oe};var us=function(e,t,n){var f=0,v;return function(r){if(f===2)return v;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,v=n(),f=2,v}};var uI=$(ft);var gt=function(){function e(){}return e.value=new e,e}(),wt=function(){function e(t,n,f,v,r,o){this.value0=t,this.value1=n,this.value2=f,this.value3=v,this.value4=r,this.value5=o}return e.create=function(t){return function(n){return function(f){return function(v){return function(r){return function(o){return new e(t,n,f,v,r,o)}}}}}},e}(),Ob=function(){function e(){}return e.value=new e,e}(),lv=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),dv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Cl=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),Hb=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),jn=function(e,t,n,f){if(n instanceof gt){if(f instanceof gt)return new wt(1,1,e,t,n,f);if(f instanceof wt)return new wt(1+f.value0|0,1+f.value1|0,e,t,n,f);throw new Error("Failed pattern match at Data.Map.Internal (line 680, column 5 - line 684, column 39): "+[f.constructor.name])}if(n instanceof wt){if(f instanceof gt)return new wt(1+n.value0|0,1+n.value1|0,e,t,n,f);if(f instanceof wt)return new wt(1+function(){var v=n.value0>f.value0;return v?n.value0:f.value0}()|0,(1+n.value1|0)+f.value1|0,e,t,n,f);throw new Error("Failed pattern match at Data.Map.Internal (line 686, column 5 - line 690, column 68): "+[f.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 678, column 32 - line 690, column 68): "+[n.constructor.name])},cI=function(){return ze(dv.create)(Ob.value)}(),sI=function(e){return function(t){return function(n){var f=function(v){var r=!1,o;function s(l){if(l instanceof Ob)return r=!0,n(void 0);if(l instanceof lv)return r=!0,t(l.value0,l.value1,l.value2);if(l instanceof dv){v=e(l.value1)(l.value0);return}throw new Error("Failed pattern match at Data.Map.Internal (line 918, column 8 - line 924, column 20): "+[l.constructor.name])}for(;!r;)o=s(v);return o};return f}}},Uu=function(e){if(e instanceof gt)return 0;if(e instanceof wt)return e.value1;throw new Error("Failed pattern match at Data.Map.Internal (line 616, column 8 - line 618, column 24): "+[e.constructor.name])},cs=function(e){return function(t){return new wt(1,1,e,t,gt.value,gt.value)}},ua=function(){var e=function(f){if(f instanceof gt)return 0;if(f instanceof wt)return f.value0;throw new Error("Failed pattern match at Data.Map.Internal (line 735, column 12 - line 737, column 26): "+[f.constructor.name])},t=function(f,v,r,o,s,l,u){return l instanceof wt&&l.value0>e(u)?jn(l.value2,l.value3,jn(f,v,r,l.value4),jn(o,s,l.value5,u)):jn(o,s,jn(f,v,r,l),u)},n=function(f,v,r,o,s,l,u){return l instanceof wt&&e(s)<=l.value0?jn(l.value2,l.value3,jn(r,o,s,l.value4),jn(f,v,l.value5,u)):jn(r,o,s,jn(f,v,l,u))};return function(f,v,r,o){if(r instanceof gt)return o instanceof gt?cs(f)(v):o instanceof wt&&o.value0>1?t(f,v,r,o.value2,o.value3,o.value4,o.value5):jn(f,v,r,o);if(r instanceof wt){if(o instanceof wt){if(o.value0>(r.value0+1|0))return t(f,v,r,o.value2,o.value3,o.value4,o.value5);if(r.value0>(o.value0+1|0))return n(f,v,r.value2,r.value3,r.value4,r.value5,o)}return o instanceof gt&&r.value0>1?n(f,v,r.value2,r.value3,r.value4,r.value5,o):jn(f,v,r,o)}throw new Error("Failed pattern match at Data.Map.Internal (line 695, column 40 - line 716, column 34): "+[r.constructor.name])}}(),_v=us("unsafeSplit","Data.Map.Internal",function(){return function(e,t,n){if(n instanceof gt)return new Cl(B.value,gt.value,gt.value);if(n instanceof wt){var f=e(t)(n.value2);if(f instanceof ee){var v=_v(771)(e,t,n.value4);return new Cl(v.value0,v.value1,ua(n.value2,n.value3,v.value2,n.value5))}if(f instanceof Z){var v=_v(774)(e,t,n.value5);return new Cl(v.value0,ua(n.value2,n.value3,n.value4,v.value1),v.value2)}if(f instanceof Ee)return new Cl(new O(n.value3),n.value4,n.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 769, column 5 - line 777, column 30): "+[f.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 765, column 34 - line 777, column 30): "+[n.constructor.name])}}),vv=_v(764),kb=us("unsafeSplitLast","Data.Map.Internal",function(){return function(e,t,n,f){if(f instanceof gt)return new Hb(e,t,n);if(f instanceof wt){var v=kb(757)(f.value2,f.value3,f.value4,f.value5);return new Hb(v.value0,v.value1,ua(e,t,n,v.value2))}throw new Error("Failed pattern match at Data.Map.Internal (line 754, column 37 - line 758, column 57): "+[f.constructor.name])}}),fI=kb(753),mv=function(e,t){if(e instanceof gt)return t;if(e instanceof wt){var n=fI(e.value2,e.value3,e.value4,e.value5);return ua(n.value0,n.value1,n.value2,t)}throw new Error("Failed pattern match at Data.Map.Internal (line 742, column 25 - line 746, column 38): "+[e.constructor.name,t.constructor.name])};var pv=us("unsafeUnionWith","Data.Map.Internal",function(){return function(e,t,n,f){if(n instanceof gt)return f;if(f instanceof gt)return n;if(f instanceof wt){var v=vv(e,f.value2,n),r=pv(787)(e,t,v.value1,f.value4),o=pv(788)(e,t,v.value2,f.value5);if(v.value0 instanceof O)return ua(f.value2,t(v.value0.value0)(f.value3),r,o);if(v.value0 instanceof B)return ua(f.value2,f.value3,r,o);throw new Error("Failed pattern match at Data.Map.Internal (line 789, column 5 - line 793, column 46): "+[v.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 782, column 42 - line 793, column 46): "+[n.constructor.name,f.constructor.name])}}),lI=pv(781),_I=function(e){var t=de(e);return function(n){return function(f){return function(v){return lI(t,n,f,v)}}}},Nb=function(e){return _I(e)(ge)};var Bb=function(e){var t=de(e);return function(n){return function(f){var v=vv(t,n,f);return uI(function(r){return new K(r,mv(v.value1,v.value2))})(v.value0)}}};var ki=function(e){var t=de(e);return function(n){var f=function(v){var r=!1,o;function s(l){if(l instanceof gt)return r=!0,B.value;if(l instanceof wt){var u=t(n)(l.value2);if(u instanceof ee){v=l.value4;return}if(u instanceof Z){v=l.value5;return}if(u instanceof Ee)return r=!0,new O(l.value3);throw new Error("Failed pattern match at Data.Map.Internal (line 281, column 7 - line 284, column 22): "+[u.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 278, column 8 - line 284, column 22): "+[l.constructor.name])}for(;!r;)o=s(v);return o};return f}};var pI=function(){var e=function(t){return function(n){var f=t,v=!1,r;function o(s,l){if(l instanceof gt)return v=!0,s;if(l instanceof wt){if(l.value5 instanceof gt){f=new lv(l.value2,l.value3,s),n=l.value4;return}f=new lv(l.value2,l.value3,new dv(l.value5,s)),n=l.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 929, column 13 - line 936, column 48): "+[l.constructor.name])}for(;!v;)r=o(f,n);return r}};return e}(),dI=sI(pI);var vI=function(){var e=function(t,n,f){return new O(new K(new K(t,n),f))};return dI(e)(function(t){return B.value})}(),Vu=function(e){var t=ga(e)(vI);return function(n){return t(cI(n))}};var Pn=function(e){var t=de(e);return function(n){return function(f){var v=function(r){if(r instanceof gt)return cs(n)(f);if(r instanceof wt){var o=t(n)(r.value2);if(o instanceof ee)return ua(r.value2,r.value3,v(r.value4),r.value5);if(o instanceof Z)return ua(r.value2,r.value3,r.value4,v(r.value5));if(o instanceof Ee)return new wt(r.value0,r.value1,n,f,r.value4,r.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 469, column 7 - line 472, column 35): "+[o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 466, column 8 - line 472, column 35): "+[r.constructor.name])};return v}}},Wb={map:function(e){var t=function(n){if(n instanceof gt)return gt.value;if(n instanceof wt)return new wt(n.value0,n.value1,n.value2,e(n.value3),t(n.value4),t(n.value5));throw new Error("Failed pattern match at Data.Map.Internal (line 145, column 10 - line 148, column 39): "+[n.constructor.name])};return t}};var ss={foldr:function(e){return function(t){var n=us("go","Data.Map.Internal",function(){return function(v,r){if(v instanceof gt)return r;if(v instanceof wt)return n(170)(v.value4,e(v.value3)(n(170)(v.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 167, column 26 - line 170, column 43): "+[v.constructor.name])}}),f=n(167);return function(v){return f(v,t)}}},foldl:function(e){return function(t){var n=us("go","Data.Map.Internal",function(){return function(v,r){if(r instanceof gt)return v;if(r instanceof wt)return n(176)(e(n(176)(v,r.value4))(r.value3),r.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 173, column 26 - line 176, column 43): "+[r.constructor.name])}}),f=n(173);return function(v){return f(t,v)}}},foldMap:function(e){var t=Je(e),n=se(e.Semigroup0());return function(f){var v=function(r){if(r instanceof gt)return t;if(r instanceof wt)return n(v(r.value4))(n(f(r.value3))(v(r.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 179, column 10 - line 182, column 28): "+[r.constructor.name])};return v}}};var $b=function(){return zt(ss)(Ne.create)(Oe.value)}();var jo=function(e){var t=!1,n;function f(v){if(v instanceof gt)return t=!0,B.value;if(v instanceof wt){if(v.value4 instanceof gt)return t=!0,new O({key:v.value2,value:v.value3});e=v.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 359, column 11 - line 364, column 21): "+[v.constructor.name])}for(;!t;)n=f(e);return n};var Qo=function(e){var t=!1,n;function f(v){if(v instanceof gt)return t=!0,B.value;if(v instanceof wt){if(v.value5 instanceof gt)return t=!0,new O({key:v.value2,value:v.value3});e=v.value5;return}throw new Error("Failed pattern match at Data.Map.Internal (line 350, column 11 - line 355, column 21): "+[v.constructor.name])}for(;!t;)n=f(e);return n};var Ur=function(){return gt.value}();var Ea=function(e){var t=de(e);return function(n){var f=function(v){if(v instanceof gt)return gt.value;if(v instanceof wt){var r=t(n)(v.value2);if(r instanceof ee)return ua(v.value2,v.value3,f(v.value4),v.value5);if(r instanceof Z)return ua(v.value2,v.value3,v.value4,f(v.value5));if(r instanceof Ee)return mv(v.value4,v.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 496, column 7 - line 499, column 43): "+[r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 493, column 8 - line 499, column 43): "+[v.constructor.name])};return f}};var yl=function(e){var t=de(e);return function(n){return function(f){return function(v){var r=vv(t,f,v),o=n(r.value0);if(o instanceof B)return mv(r.value1,r.value2);if(o instanceof O)return ua(f,o.value0,r.value1,r.value2);throw new Error("Failed pattern match at Data.Map.Internal (line 512, column 3 - line 516, column 41): "+[o.constructor.name])}}}};var hI=vt(mt),Ub=$(ft),gI=Ea(nt),bl=Y(Wt),hv=Ve(xr),DI=hI(Wt),gv=z(mn),CI=$(vn),yI=Ot(qu);var bI=lt(mn)(hn),SI=yr($u);var wI=function(e){return e},TI=function(e){var t=function(){var v=xe(e)();if(v instanceof B)return B.value;if(v instanceof O){var r=Qo(v.value0.releasers);if(r instanceof B)return B.value;if(r instanceof O)return en(Ub(function(o){return{nextKey:o.nextKey,references:o.references,releasers:gI(r.value0.key)(o.releasers)}}))(e)(),new O(r.value0.value);throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 104, column 33 - line 108, column 32): "+[r.constructor.name])}throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 102, column 11 - line 108, column 32): "+[v.constructor.name])},n=function(f){return bl(hv(t))(function(v){if(v instanceof B)return DI(hv(yt(B.value)(e)))(function(){return gv(new ht(f))});if(v instanceof O)return bl(bb(v.value0))(function(r){return gv(new dt(kr(function(o){return new Ne(o,f)})(ge(f))(r)))});throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 92, column 11 - line 98, column 68): "+[v.constructor.name])})};return CI(oo)(yI(n)(Oe.value))};var Vb=function(){var e=new O({nextKey:0,references:1,releasers:Ur});return $(Ae)(wI)(It(e))}(),zb=function(e){return rv(bl(hv(wf(Ub(function(t){return{nextKey:t.nextKey,releasers:t.releasers,references:t.references-1|0}}))(e)))(function(t){return t instanceof O&&t.value0.references===0?bl(TI(e))(bI(SI)):gv(void 0)}))};var MI=Y(Wt),FI=Ve(xr);var LI=function(e){return function(t){return MI(FI(Vb))(function(n){return rs(zb(n))(e(t(n)))})}},Sl=LI(pe(ve));var Dv=function(e){var t=$(e);return{map:function(n){return function(f){var v=t(n);return function(r){return v(f(r))}}}}},Gb=function(e){var t=Ye(e),n=Dv(e.Functor0());return{apply:function(f){return function(v){return function(r){return t(f(r))(v(r))}}},Functor0:function(){return n}}},AI=function(e){var t=Y(e),n=Gb(e.Apply0());return{bind:function(f){return function(v){return function(r){return t(f(r))(function(o){var s=v(o);return s(r)})}}},Apply0:function(){return n}}};var xI=function(e){var t=z(e),n=Gb(e.Apply0());return{pure:function(f){return function(v){return t(f)}},Apply0:function(){return n}}},wl=function(e){var t=xI(e.Applicative0()),n=AI(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}};var II=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Qb=function(e){return function(t){return ba(function(n){return e(n.value0)(n.value1)})(t)}};var Jb=function(e){return function(t){return gd(new II(e,t))}},Cv={map:function(e){return function(t){return ba(function(n){return Jb(function(f){return e(n.value0(f))})(n.value1)})(t)}}};var Kb=Jb(pe(ve));var PI=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}();var Tl=function(e){return PI.create(Ce(e.Eq0()))(de(e))},HI={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},Xb={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return HI}};var bv=Du(Xt)(Xb);var kI=Bb(bv),NI=ki(bv),BI=Pn(bv);var Zb=function(){return function(e){var t=Jr(e);return function(n){var f=Tl(n);return function(v){return function(r){return function(o){return kI(new K(t(v),f(r)))(o)}}}}}},El=function(){return function(e){var t=Jr(e);return function(n){var f=Tl(n);return function(v){return function(r){return function(o){return NI(new K(t(v),f(r)))(o)}}}}}},eS=function(){return function(e){var t=Jr(e);return function(n){var f=Tl(n);return function(v){return function(r){return function(o){return function(s){return BI(new K(t(v),f(r)))(o)(s)}}}}}}},tS=function(e){var t=lt(e)(ss);return function(n){return function(f){return t(function(v){return f(v)})(n)}}},zu=Ur;var Fl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ni=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();function rS(e,t,n){return e==null?t:n(e)}function Sv(e){return e}var io=je(null)(Sv),kt=function(e){return rS(e,B.value,O.create)};var qt=function(){function e(t,n,f,v){this.value0=t,this.value1=n,this.value2=f,this.value3=v}return e.create=function(t){return function(n){return function(f){return function(v){return new e(t,n,f,v)}}}},e}(),_s=j,gn=function(e,t){return e.value2(e.value1,t)},Ut=j,Dn=function(e){return e.value3(e.value1)},Rr=_s(function(e){return e.value0});var nS=$(pt),rR=$(Ga);var Jo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uo=function(){function e(t,n,f,v){this.value0=t,this.value1=n,this.value2=f,this.value3=v}return e.create=function(t){return function(n){return function(f){return function(v){return new e(t,n,f,v)}}}},e}(),Ko=function(){function e(t,n,f,v){this.value0=t,this.value1=n,this.value2=f,this.value3=v}return e.create=function(t){return function(n){return function(f){return function(v){return new e(t,n,f,v)}}}},e}(),Xo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),co=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nR=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),aS=function(e){return function(t){return e(t)}};var aR=j;var oR={bimap:function(e){return function(t){return aS(function(n){return aR(new nR(function(f){return e(n.value0(f))},function(f){return t(n.value1(f))},n.value2))})}}},iR=Mn(oR);var Bi=aS(function(e){var t=function(n){if(n instanceof Jo)return new Jo(n.value0);if(n instanceof uo)return new uo(n.value0,n.value1,e.value0(n.value2),nS(t)(n.value3));if(n instanceof Ko)return new Ko(n.value0,n.value1,e.value0(n.value2),nS(rR(t))(n.value3));if(n instanceof Xo)return new Xo(e.value1(n.value0));if(n instanceof co)return new co(iR(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function Wi(e,t){return t[e]}function Tv(e,t){return t.hasOwnProperty(e)}function so(e,t,n){n[e]=t}function Ev(e,t){for(var n=[],f=0;f<e.length;f++)n.push(t(f,e[f]));return n}function Mv(e,t){for(var n=0;n<e.length;n++)t(e[n])}function Fv(e,t){for(var n=Object.keys(e),f=0;f<n.length;f++){var v=n[f];t(v,e[v])}}function Lv(e,t,n,f,v){for(var r=[],o=e.length,s=t.length,l=0;;){if(l<o)l<s?r.push(n(l,e[l],t[l])):f(l,e[l]);else if(l<s)r.push(v(l,t[l]));else break;l++}return r}function ps(e,t,n){for(var f={},v=0;v<e.length;v++){var r=e[v],o=t(r);f[o]=n(o,v,r)}return f}function ds(e,t,n,f,v,r){for(var o={},s=0;s<t.length;s++){var l=t[s],u=n(l);e.hasOwnProperty(u)?o[u]=f(u,s,e[u],l):o[u]=r(u,s,l)}for(var u in e)u in o||v(u,e[u]);return o}function $i(e,t){return e===t}function Av(e,t){return t.createTextNode(e)}function xv(e,t){t.textContent=e}function Al(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function Yo(e,t,n){var f=n.childNodes.item(e)||null;f!==t&&n.insertBefore(t,f)}function vs(e,t){t&&e.parentNode===t&&t.removeChild(e)}function ms(e){return e.parentNode}function xl(e,t,n,f){e!=null?f.setAttributeNS(e,t,n):f.setAttribute(t,n)}function Il(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function Iv(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function Rv(e,t,n){n.addEventListener(e,t,!1)}function Pv(e,t,n){n.removeEventListener(e,t,!1)}var Hv=void 0;var hs=function(){return{}};function Ov(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var kv=Wi,Nv=j,Bv=so,Wv=hs;var Rl=function(e){return function(t){return t[e]}},lR=Rl("namespaceURI"),_R=Rl("prefix"),pR=Rl("localName"),dR=Rl("tagName");function gs(e){return function(){return e.scrollTop}}function Ds(e){return function(t){return function(){t.scrollTop=e}}}var Pl=function(e){return function(t){return function(){return t[e]}}},mR=Pl("children"),hR=Pl("firstElementChild"),gR=Pl("lastElementChild"),DR=Pl("childElementCount");function iS(e){return function(t){return function(){return t.querySelector(e)}}}var yR=$(Ae);var uS=function(e){var t=yR(kt),n=iS(e);return function(f){return t(n(f))}};var qv=j;var Cs=function(e,t,n){var f=0,v;return function(r){if(f===2)return v;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,v=n(),f=2,v}};var Uv=function(e){return Dn(e.widget)},Vv=Cs("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof co)return Vv(291)(e,Bi(t.value0));if(t instanceof Xo){var n=gn(e.widget,t.value0),f=_s(function(v){return Ut(new qt(v.value0,{build:e.build,widget:n},Vv(296),Uv))})(n);return f}return Uv(e),e.build(t)}}),ER=Vv(286),Hl=function(e){var t=ms(e.node);return vs(e.node,t)},Ol=Cs("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof co)return Ol(82)(e,Bi(t.value0));if(t instanceof Jo){if(e.value===t.value0)return Ut(new qt(e.node,e,Ol(85),Hl));if(nr){var n={build:e.build,node:e.node,value:t.value0};return xv(t.value0,e.node),Ut(new qt(e.node,n,Ol(89),Hl))}}return Hl(e),e.build(t)}}),MR=Ol(77),kl=function(e){var t=ms(e.node);return vs(e.node,t),Fv(e.children,function(n,f){return Dn(f)}),Dn(e.attrs)},Nl=function(e){var t=ms(e.node);return vs(e.node,t),Mv(e.children,Dn),Dn(e.attrs)},sS=function(e,t,n,f){var v=t===f;return v?e instanceof O&&n instanceof O&&e.value0===n.value0||e instanceof B&&n instanceof B:!1},Bl=Cs("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof co)return Bl(135)(e,Bi(t.value0));if(t instanceof uo&&sS(e.ns,e.name,t.value0,t.value1)){var n=Hr(t.value3),f=Hr(e.children);if(f===0&&n===0){var l=gn(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:e.children};return Ut(new qt(e.node,u,Bl(149),Nl))}var v=function(d,h){return Dn(h)},r=function(d,h,D){var p=gn(h,D);return Yo(d,Rr(p),e.node),p},o=function(d,h){var D=e.build(h);return Yo(d,Rr(D),e.node),D},s=Lv(e.children,t.value3,r,v,o),l=gn(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:s};return Ut(new qt(e.node,u,Bl(172),Nl))}return Nl(e),e.build(t)}}),FR=Bl(130),Wl=Cs("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof co)return Wl(222)(e,Bi(t.value0));if(t instanceof Ko&&sS(e.ns,e.name,t.value0,t.value1)){var n=Hr(t.value3);if(e.length===0&&n===0){var s=gn(e.attrs,t.value2),l={build:e.build,node:e.node,attrs:s,ns:t.value0,name:t.value1,children:e.children,length:0};return Ut(new qt(e.node,l,Wl(237),kl))}var f=function(u,d){return Dn(d)},v=function(u,d,h,D){var p=gn(h,D.value1);return Yo(d,Rr(p),e.node),p},r=function(u,d,h){var D=e.build(h.value1);return Yo(d,Rr(D),e.node),D},o=ds(e.children,t.value3,Fr,v,f,r),s=gn(e.attrs,t.value2),l={build:e.build,node:e.node,attrs:s,ns:t.value0,name:t.value1,children:o,length:n};return Ut(new qt(e.node,l,Wl(261),kl))}return kl(e),e.build(t)}}),LR=Wl(217),AR=function(e,t,n){var f=e.buildWidget(e)(n),v=_s(function(r){return Ut(new qt(r.value0,{build:t,widget:f},ER,Uv))})(f);return v},xR=function(e,t,n){var f=Av(n,e.document),v={build:t,node:f,value:n};return Ut(new qt(f,v,MR,Hl))},IR=function(e,t,n,f,v,r){var o=Al(io(n),f,e.document),s=qv(o),l=function(D,p,a){var i=t(a.value1);return Yo(p,Rr(i),s),i},u=ps(r,Fr,l),d=e.buildAttributes(o)(v),h={build:t,node:s,attrs:d,ns:n,name:f,children:u,length:Hr(r)};return Ut(new qt(s,h,LR,kl))},RR=function(e,t,n,f,v,r){var o=Al(io(n),f,e.document),s=qv(o),l=function(D,p){var a=t(p);return Yo(D,Rr(a),s),a},u=Ev(r,l),d=e.buildAttributes(o)(v),h={build:t,node:s,attrs:d,ns:n,name:f,children:u};return Ut(new qt(s,h,FR,Nl))},ys=function(e){var t=Cs("build","Halogen.VDom.DOM",function(){return function(f){if(f instanceof Jo)return xR(e,t(59),f.value0);if(f instanceof uo)return RR(e,t(60),f.value0,f.value1,f.value2,f.value3);if(f instanceof Ko)return IR(e,t(61),f.value0,f.value1,f.value2,f.value3);if(f instanceof Xo)return AR(e,t(62),f.value0);if(f instanceof co)return t(63)(Bi(f.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[f.constructor.name])}}),n=t(58);return n};function $l(e){return typeof e}function bs(e){return e===void 0}var lS=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var jv=function(){var e=cd(xb);return function(t){return sv(e(t))}}();var _S=function(e){return function(t){return new An(e,new Ne(t.value0,t.value1))}};var qi=j,Qv=j;function Jv(e){return e()}function mS(e){return function(t){return function(n){return function(f){var v=n;function r(s){return function(l){return t(l)(s)(f[s])}}for(var o in f)hasOwnProperty.call(f,o)&&(v=e(v)(r(o)));return v}}}}function hS(e,t,n,f){return n in f?t(f[n]):e}function Kv(e){return function(t){var n=[];for(var f in t)hasOwnProperty.call(t,f)&&n.push(e(f)(t[f]));return n}}var NR=Object.keys||Kv(function(e){return function(){return e}});var qR=st(gi);var gS=function(){return To(hS)(B.value)(O.create)}();var ql=function(e){var t=Nc(e);return function(n){return Jv(function(){var v=hs();return Sc(t(n))(function(r){return qR(Ov(r.value0)(r.value1)(v))})(),v})}};var UR=mS(aD),DS=function(e){var t=se(e.Semigroup0()),n=Je(e);return function(f){return UR(function(v){return function(r){return function(o){return t(v)(f(r)(o))}}})(n)}};function Ss(e){return function(){return function(t){return e(t)()}}}function Yv(e){return function(t){return function(n){return function(f){return function(){return f.addEventListener(e,t,n)}}}}}function Zv(e){return function(t){return function(n){return function(f){return function(){return f.removeEventListener(e,t,n)}}}}}var VR=function(e,t,n){var f=0,v;return function(r){if(f===2)return v;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,v=n(),f=2,v}};var tm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fo=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),ei=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ti=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ui=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zR=Wi,em=so,GR=function(e,t){var n=Iv(null,e,t);if(n)return Il(null,e,t);var f=$l(Wi(e,t));return f==="string"?so(e,"",t):e==="rowSpan"?so(e,1,t):e==="colSpan"?so(e,1,t):so(e,Hv,t)},yS=function(e){if(e instanceof fo&&e.value0 instanceof O)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof fo)return"attr/:"+e.value1;if(e instanceof ei)return"prop/"+e.value0;if(e instanceof ti)return"handler/"+e.value0;if(e instanceof Ui)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},Ul=j;var bS=function(e){return function(t){var n=function(d){return function(h,D){if(D instanceof fo)return Il(io(D.value0),D.value1,t);if(D instanceof ei)return GR(D.value0,t);if(D instanceof ti){var p=kv(D.value0,d);return Pv(D.value0,Fr(p),t)}if(D instanceof Ui)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[D.constructor.name])}},f=function(d){return d instanceof O?e(d.value0)():void 0},v=function(d){var h=gS("ref")(d.props);return h instanceof O&&h.value0 instanceof Ui?f(h.value0.value0(new rm(t))):void 0},r=function(d,h){return function(D,p,a,i){if(a instanceof fo&&i instanceof fo){var c=a.value2===i.value2;return c||xl(io(i.value0),i.value1,i.value2,t),i}if(a instanceof ei&&i instanceof ei){var _=$i(a.value1,i.value1);if(_)return i;if(i.value0==="value"){var g=zR("value",t),C=$i(g,i.value1);return C||em(i.value0,i.value1,t),i}return em(i.value0,i.value1,t),i}if(a instanceof ti&&i instanceof ti){var S=kv(i.value0,d);return yt(i.value1)(Qt(S))(),Bv(i.value0,S,h),i}return i}},o=function(d){return function(h,D,p){if(p instanceof fo)return xl(io(p.value0),p.value1,p.value2,t),p;if(p instanceof ei)return em(p.value0,p.value1,t),p;if(p instanceof ti){var a=Wi(p.value0,d);if(Tv(p.value0,d))return yt(p.value1)(Qt(a))(),p;var i=It(p.value1)(),c=Ss(function(_){return function(){var C=xe(i)();return f(C(_))}})();return Bv(p.value0,new K(c,i),d),Rv(p.value0,c,t),p}if(p instanceof Ui)return f(p.value0(new tm(t))),p;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[p.constructor.name])}},s=VR("patchProp","Halogen.VDom.DOM.Prop",function(){return function(d,h){var D=Wv(),p=n(d.events),a=r(d.events,D),i=o(D),c=ds(d.props,h,yS,a,p,i),_={events:Nv(D),props:c};return Ut(new qt(void 0,_,s(100),v))}}),l=s(87),u=function(d){var h=Wv(),D=ps(d,yS,o(h)),p={events:Nv(h),props:D};return Ut(new qt(void 0,p,l,v))};return u}};var am=function(e){return e},om=function(e){return am(Xo.create(e))},JR=function(e){return e.toPropValue},Vi=function(e){return am(Jo.create(e))},ES=function(e){return new Ui(function(t){return e(function(n){if(n instanceof tm)return new O(n.value0);if(n instanceof rm)return B.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},MS=function(e){var t=JR(e);return function(n){var f=ei.create(n);return function(v){return f(t(v))}}};var FS={toPropValue:Ul};var im={toPropValue:function(){var e=ir();return function(t){return Ul(e(t))}}()};var LS={toPropValue:function(e){return Ul(Wy(e))}};var um=function(){return ti.create}(),AS=function(e){return function(t){return function(n){return function(f){return new uo(e,t,n,f)}}}};var xS=function(e){return function(t){return fo.create(e)(t)}};var XR=pe(ve);var Vl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),IS=function(e){return function(t){return new sm(e,t)}},RS=function(){return cm.create}(),PS=function(e){var t=z(e);return function(n){return function(f){return function(v){return function(r){return function(o){if(r instanceof Vl)return new K(new Ne({func:t(r.value0),count:o},n),f);if(r instanceof cm)return new K(new Ne({func:v(r.value0),count:o},n),f);if(r instanceof sm)return PS(e)(n)(_S(r.value1)(f))(v)(r.value0)(o+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[r.constructor.name])}}}}}},HS=function(e){var t=Ye(e.Apply0());return function(n){return function(f){return function(v){if(n instanceof Oe)return new tt(v);if(n instanceof Ne){var r=t(n.value0.func)(v),o=n.value0.count===1;if(o)return n.value1 instanceof Oe?new tt(r):HS(e)(n.value1)(f)(r);if(f instanceof Oe)return new tt(r);if(f instanceof Ne)return new Qe(new K(new Ne({func:r,count:n.value0.count-1|0},n.value1),new An(f.value0,f.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[f.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},OS={map:function(e){return function(t){return IS(new Vl(e))(t)}}},kS=function(e){var t=HS(e),n=z(e),f=PS(e);return function(v){return function(r){var o=function(s){var l=!1,u;function d(h){if(h.value1.value0 instanceof Vl){var D=t(h.value0)(h.value1.value1)(n(h.value1.value0.value0));if(D instanceof tt)return l=!0,D.value0;if(D instanceof Qe){s=D.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[D.constructor.name])}if(h.value1.value0 instanceof cm){var D=t(h.value0)(h.value1.value1)(v(h.value1.value0.value0));if(D instanceof tt)return l=!0,D.value0;if(D instanceof Qe){s=D.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[D.constructor.name])}if(h.value1.value0 instanceof sm){var p=new An(h.value1.value0.value1,h.value1.value1);s=f(h.value0)(p)(v)(h.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[h.value1.value0.constructor.name])}for(;!l;)u=d(s);return u};return o(new K(Oe.value,jv(r)))}}},NS=function(e){return kS(e)(XR)},BS={apply:function(e){return function(t){return IS(e)(t)}},Functor0:function(){return OS}},WS=function(){return{pure:Vl.create,Apply0:function(){return BS}}}(),YR=kS(WS),fm=function(e){return YR(function(t){return RS(e(t))})};var zl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var qS=function(e){var t=!1,n;function f(v){if(v.value0 instanceof Oe&&v.value1 instanceof Oe)return t=!0,B.value;if(v.value0 instanceof Oe){e=new zl(oo(v.value1),Oe.value);return}if(v.value0 instanceof Ne)return t=!0,new O(new K(v.value0.value0,new zl(v.value0.value1,v.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[v.constructor.name])}for(;!t;)n=f(e);return n},US=function(e){return function(t){return new zl(e.value0,new Ne(t,e.value1))}};var VS=function(e){return e.value0 instanceof Oe&&e.value1 instanceof Oe};var zS=function(){return new zl(Oe.value,Oe.value)}();var Gu=function(){function e(){}return e.value=new e,e}(),Gl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var GS=function(e){return function(t){if(e instanceof Gu)return t;if(t instanceof Gu)return e;if(e instanceof Gl)return new Gl(e.value0,US(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},eP=function(e){return function(t){return function(n){var f=function(r){return function(o){return function(s){var l=r,u=o,d=!1,h;function D(p,a,i){if(i instanceof Oe)return d=!0,a;if(i instanceof Ne){l=p,u=p(a)(i.value0),s=i.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[p.constructor.name,a.constructor.name,i.constructor.name])}for(;!d;)h=D(l,u,s);return h}}},v=function(r){return function(o){var s=r,l=!1,u;function d(h,D){var p=qS(h);if(p instanceof B)return l=!0,f(function(a){return function(i){return i(a)}})(t)(D);if(p instanceof O){s=p.value0.value1,o=new Ne(e(p.value0.value0),D);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[p.constructor.name])}for(;!l;)u=d(s,o);return u}};return v(n)(Oe.value)}}},jS=function(e){if(e instanceof Gu)return B.value;if(e instanceof Gl)return new O(new K(e.value0,function(){var t=VS(e.value1);return t?Gu.value:eP(GS)(Gu.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var QS=function(){return Gu.value}(),JS=GS;var KS={append:JS};var XS=function(e){return function(t){return JS(e)(new Gl(t,zS))}};var rP=function(e,t,n){var f=0,v;return function(r){if(f===2)return v;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,v=n(),f=2,v}},nP=se(KS);var lm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ws=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ts=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),YS=function(e){var t=!1,n;function f(v){var r=function(l){return l},o=function(l){return function(u){return new lm(l.value0,nP(l.value1)(u))}};if(v.value0 instanceof ws){var s=jS(v.value1);if(s instanceof B)return t=!0,new ws(v.value0.value0);if(s instanceof O){e=o(r(s.value0.value0)(v.value0.value0))(s.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[s.constructor.name])}if(v.value0 instanceof Ts)return t=!0,new Ts(v.value0.value0,function(l){return o(v.value0.value1(l))(v.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[v.value0.constructor.name])}for(;!t;)n=f(e);return n},Fa=function(e){var t=$(e);return function(n){var f=n.Monad0(),v=$(f.Bind1().Apply0().Functor0()),r=z(f.Applicative0()),o=Ot(n);return function(s){var l=function(u){var d=YS(u);if(d instanceof ws)return v(ht.create)(r(d.value0));if(d instanceof Ts)return v(dt.create)(s(t(d.value1)(d.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[d.constructor.name])};return o(l)}}};var ZS=function(e){return new lm(e,QS)};var jl={Applicative0:function(){return Qn},Bind1:function(){return La}},zi={map:function(e){return function(t){return Vt(La)(function(){var n=z(Qn);return function(f){return n(e(f))}}())(t)}}},La={bind:function(e){return function(t){return new lm(e.value0,XS(e.value1)(t))}},Apply0:function(){return _m(0)}},Qn={pure:function(e){return ZS(ws.create(e))},Apply0:function(){return _m(0)}},_m=rP("freeApply","Control.Monad.Free",function(){return{apply:Or(jl),Functor0:function(){return zi}}}),pm=_m(77);var aP=z(Qn);var Pt=function(e){return ZS(new Ts(e,function(t){return aP(t)}))};var ew=function(e){var t=e.Monad0(),n=$(t.Bind1().Apply0().Functor0()),f=z(t.Applicative0()),v=Ot(e);return function(r){var o=function(s){var l=YS(s);if(l instanceof ws)return n(ht.create)(f(l.value0));if(l instanceof Ts)return n(function(u){return dt.create(l.value1(u))})(r(l.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[l.constructor.name])};return v(o)}};var tw=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),rw=j,nw=j;function dm(e){return function(t){return e===t}}var ju=dm;var cP=st(Ae);var sP=Y(Zr);var fP=se(At),lP=lt(xt),_P=lP(bt);var Ql=function(e){return e},ow=function(e){return function(t){return e(function(n){return cP(t(n))})}};var sr=function(e){return function(t){return e(t)}};var mm={map:function(e){return function(t){return function(n){return t(function(f){return n(e(f))})}}}};var fr=function(){var t=It([])();return{emitter:function(n){return function(){return en(function(v){return fP(v)([n])})(t)(),en(zf(ju)(n))(t)}},listener:function(n){return sP(xe(t))(_P(function(f){return f(n)}))}}};var hm=pe(ve);var pP=El();var uw=function(e){return e},cw=function(e){return e},Es=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ms=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Gi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ls=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),As=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Jl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Kl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Yl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Ju=function(e){return e},Zl=function(e){return Pt(new Fs(e,void 0))};var er=function(e){return Pt(new Ms(function(t){return e},hm))};var Aa=function(e){return Pt(new As(e,void 0))};var ai=function(){return function(e){var t=pP(e);return function(n){var f=t(n);return function(v){return function(r){return function(o){return Pt(new Ls(nw(new tw(function(s){var l=z(s);return function(u){var d=je(l(B.value))(u),h=f(v)(r);return function(D){return d(h(D))}}},o,hm))))}}}}}},gm=nt,e_=nt;var t_={lift:function(e){return function(t){return Ju(Pt(Gi.create(t)))}}},ji=jl,hr={state:function(e){return Ju(Pt(Es.create(e)))},Monad0:function(){return ji}};var xa=function(e){return{liftEffect:function(){var t=Ve(e);return function(n){return Ju(Pt(Gi.create(t(n))))}}(),Monad0:function(){return ji}}};var Qi=function(e){var t=xa(e.MonadEffect0());return{liftAff:function(){var n=Ir(e);return function(f){return Ju(Pt(Gi.create(n(f))))}}(),MonadEffect0:function(){return t}}};var Jn=function(e){return Pt(new xs(e,hm))},un=zi;var Vr=La,dP=Y(Vr),sw=pm;var cn=Qn,vP=z(cn),Is={tailRecM:function(e){return function(t){return dP(e(t))(function(n){if(n instanceof dt)return Ot(Is)(e)(n.value0);if(n instanceof ht)return vP(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return ji}};var Ku=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Zu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ec=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var mP=function(e,t,n){var f=0,v;return function(r){if(f===2)return v;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,v=n(),f=2,v}};var hP=function(e,t){return $i(e.value0,t.value0)&&$i(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var fw=function(e){return e.value2(e.value3)};var lw=function(e){var t=function(r){return Dn(r.vdom)},n=mP("patchThunk","Halogen.VDom.Thunk",function(){return function(r,o){var s=hP(r.thunk,o);if(s)return Ut(new qt(Rr(r.vdom),r,n(112),t));var l=gn(r.vdom,e(fw(o)));return Ut(new qt(Rr(l),{vdom:l,thunk:o},n(115),t))}}),f=n(108),v=function(r){return function(o){var s=ys(r)(e(fw(o)));return Ut(new qt(Rr(s),{thunk:o,vdom:s},f,t))}};return v};var r_=cu(un),ym=lt(cn)(Bt),gP=$(un);var _w=z(cn),DP=El(),CP=Zb(),yP=eS(),tc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),n_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bm=j,Sm=j,Hn=function(e){return function(t){if(t instanceof Ku)return r_(ym(e.handleAction)(e.initialize))(t.value0);if(t instanceof Xu)return r_(ym(e.handleAction)(e.finalize))(t.value0);if(t instanceof Yu)return r_(ym(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof Zu)return r_(e.handleAction(t.value0))(t.value1);if(t instanceof ec)return Qb(function(n){var f=gP(je(t.value1(void 0))(n));return function(v){return f(e.handleQuery(v))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},bP=j,On=j;var gr=function(){return{handleAction:ge(_w(void 0)),handleQuery:ge(_w(B.value)),receive:ge(B.value),initialize:B.value,finalize:B.value}}(),wm=function(){return function(e){var t=DP(e),n=CP(e),f=yP(e);return function(v){var r=t(v),o=n(v),s=f(v);return function(l){return function(u){return function(d){return function(h){return function(D){return bP({get:r(l)(u),pop:o(l)(u),set:s(l)(u),component:d,input:h,output:D})}}}}}}}};var Ia=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sn=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var dw=function(e){return e instanceof sn?new O(e.value1):e instanceof Cn?new O(e.value0):B.value},vw=function(e){return e instanceof sn?new O(e.value0):e instanceof Ia?new O(e.value0):B.value};var mw=function(e){var t=se(e);return function(n){var f=se(n);return{append:function(v){return function(r){if(v instanceof Ia&&r instanceof Ia)return new Ia(t(v.value0)(r.value0));if(v instanceof Ia&&r instanceof Cn)return new sn(v.value0,r.value0);if(v instanceof Ia&&r instanceof sn)return new sn(t(v.value0)(r.value0),r.value1);if(v instanceof Cn&&r instanceof Ia)return new sn(r.value0,v.value0);if(v instanceof Cn&&r instanceof Cn)return new Cn(f(v.value0)(r.value0));if(v instanceof Cn&&r instanceof sn)return new sn(r.value0,f(v.value0)(r.value1));if(v instanceof sn&&r instanceof Ia)return new sn(t(v.value0)(r.value0),v.value1);if(v instanceof sn&&r instanceof Cn)return new sn(v.value0,f(v.value1)(r.value0));if(v instanceof sn&&r instanceof sn)return new sn(t(v.value0)(r.value0),f(v.value1)(r.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[v.constructor.name,r.constructor.name])}}}}};var Ji=function(e){return function(){console.log(e)}},a_=function(e){return function(){console.warn(e)}};var NP=se(_f),BP=Je(wo),gw=Si(bt),Dw=gw(wo),u_=ja(bt)(wo),Ra=$(pt),Em=Ye(_i),WP=se(At),Cw=cr(bt),$P=Cw(wo),qP=nd(U0),c_=$(ft),UP=ct(rD),yw=Y(Yr),VP=Bf(sd(bt)),bw=$(Wc(pt));var zP=Rf(bt)(fn),GP=Y(Do),jP=jf($c),QP=En(Fc(Tn)),JP=ja(Qf(bt))(wo),KP=Te(wn),s_=function(e){return e},XP=function(e){return e},Mm=function(e){return function(t){return function(n){return t+(e+n)}}},YP={append:function(e){return function(t){return e+t}}},ZP={append:function(e){return function(t){return e+t}}},Sw=mw(YP)(ZP),ww=UD(Sw),i_=Cw(ww),e2=gw(ww),Rs=se(Sp(Sw)),hw=function(e){var t=kr(function(n){return BP})(function(n){return Dw([n.value0,": ",n.value1])});return u_("; ")(Ra(t)(e))},t2=function(e){if(e instanceof xo)return"#"+e.value0;if(e instanceof Ya)return"."+e.value0;if(e instanceof Io)return"["+(e.value0+"]");if(e instanceof Ro)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof Po)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof Ho)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof Oo)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof ko)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof No)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof Za)return":"+e.value0;if(e instanceof Au)return":"+(e.value0+("("+(u_(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},r2=function(e){return function(t){if(e.length===0&&t instanceof el)return["*"];if(t instanceof el)return[""];if(t instanceof Sd)return[t.value0];if(t instanceof wd)return Em(Ra(Mm(" > "))(_o(t.value0)))(_o(t.value1));if(t instanceof Td)return Em(Ra(Mm(" "))(_o(t.value0)))(_o(t.value1));if(t instanceof W0)return Em(Ra(Mm(" + "))(_o(t.value0)))(_o(t.value1));if(t instanceof $0)return WP(_o(t.value0))(_o(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},_o=function(e){return Ra(function(t){return t+$P(t2)(qP(e.value0))})(r2(e.value0)(e.value1))},n2=function(){var e=u_(", ");return function(t){return e(_o(t))}}(),Ki=function(e){return e.length===0?B.value:c_(function(t){return new An(t.head,t.tail)})(td(e))};var rc=function(e){if(e.value0 instanceof Y0)return je(e.value0.value0)(function(t){return V0(rc(t))(e.value0.value0)})(Ki(e.value1));if(e.value0 instanceof Id)return je(e.value0.value0)(function(t){return Zt(rc(t))(e.value0.value0)})(Ki(e.value1));if(e.value0 instanceof K0)return je(e.value0.value0)(function(t){return Zt(e.value0.value0)(rc(t))})(Ki(e.value1));if(e.value0 instanceof X0)return je(tl("TODO"))(rc)(Ki(ad(e.value0.value0)(Cr(e.value0)(e.value1))));if(e.value0 instanceof J0)return je(Ge(St)(e.value0.value0))(function(t){return Ge(rc(t))(e.value0.value0)})(Ki(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},a2=function(e){return zc(e)},o2=function(e){return O.create(Cn.create(s_(UP("@import url("+(e+`);
`)))))},i2=function(e){return e},Fm=function(e){return yw(e)(function(){var t=c_(i2);return function(n){return t(dw(n))}}())},u2=function(e){return e},Tw=function(e){return yw(e)(function(){var t=c_(u2);return function(n){return t(vw(n))}}())},c2=function(e){return je(e.value0)(function(t){return"("+(e.value0+(": "+(zc(t)+")")))})(e.value1)},s2=function(e){return"@media "+(a2(e.value1)+VP(NP)(bw(function(t){return function(n){return" and "+n}(c2(t))})(e.value2)))};var f2=function(e){return function(t){if(e instanceof nn&&t instanceof nn)return[new Qe(new K(e.value0,t.value0))];if(e instanceof rn&&t instanceof nn)return Ra(function(n){return new Qe(new K(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof nn&&t instanceof rn)return Ra(function(n){return new Qe(new K(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof rn&&t instanceof rn)return Ra(function(n){return je(new tt(n.value0+n.value1))(function(){var f=K.create(n.value0+n.value1);return function(v){return Qe.create(f(function(r){return n.value0+r}(v)))}}())(zP(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},Lm=function(e){return f2(e.value0)(e.value1)},l2=function(e){return function(t){var n=GP(t)(Lm),f=c_(function(r){return Ia.create(XP(hw(jP(r))))})(Ki(n)),v=function(r){return O.create(Cn.create(s_(u_(" ")([n2(rc(r)),"{",hw(n),`}
`]))))};return je(f)(v)(Ki(e))}},Ps=function(e){return function(t){var n=function(i){return i instanceof Z0?new O(new K(i.value0,i.value1)):B.value},f=i_(Di(ze(_2)(e)))(Da(n)(t)),v=function(i){return i instanceof Yc?new O(new K(i.value0,i.value1)):B.value},r=function(){var i=Da(v)(t),c=QP(Ti)(i);return c?l2(e)(i):B.value}(),o=function(i){return Ps(Cr(i)(e))},s=function(i){return i instanceof Rd?new O(new K(i.value0,i.value1)):B.value},l=e2(Ra(Di(o))(Da(s)(t))),u=function(i){return i instanceof ty?new O(i.value0):B.value},d=i_(p2)(Da(u)(t)),h=function(i){return i instanceof ry?new O(i.value0):B.value},D=i_(o2)(Da(h)(t)),p=function(i){return i instanceof ey?new O(i.value0):B.value},a=i_(v2)(Da(p)(t));return Rs(r)(Rs(D)(Rs(d)(Rs(a)(Rs(l)(f)))))}},_2=function(e){return function(t){return function(n){return O.create(Cn.create(s_(s2(e)+(" { "+(dr("")(Fm(Ps(t)(n)))+` }
`)))))}}},p2=function(e){var t=" "+(e.value0+(" { "+(JP(" ")(bw(Di(d2))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],f=Dw(Ra(function(v){return v+t})(n));return new O(new Cn(f))},d2=function(e){return function(t){var n=dr("")(Tw(Ps([])(t)));return KP(e)+("% "+("{ "+(n+" }")))}},v2=function(e){return O.create(Cn.create(s_("@font-face { "+(dr("")(Tw(Ps([])(e)))+` }
`))))},Ew=function(){var e=Ps([]);return function(t){return e(Zc(t))}}();var Hs=function(){return AS(B.value)}();var Am=function(e){return Hs("img")(e)([])},xm=function(e){return Hs("input")(e)([])};var Im=Hs("style");var Pr=Hs("div"),ii=Pr([]);var nc=function(){var e=function(t){return function(n){return new O(new Fl(t,n))}};return function(t){return ES(e(t))}}(),Os=function(e){return MS(e)};var h2=Os(FS);var Mw=h2("src");var Fw=function(e){return Os(e)("type")};var Rm=function(){return xS(B.value)}();var g2=Fw(im),D2=Y(Do),C2=ql(bt),Lw=function(e){var t=dr("")(Fm(Ew(e)));return Im([g2("text/css")])([Vi(t)])},yn=function(){var e=function(){var r=Eo("; "),o=DS(hi)(function(s){return function(l){return[s+(": "+l)]}});return function(s){return r(o(s))}}(),t=id(cr(If)(hi)(wi)),n=function(r){return r instanceof Yc?new O(new K(r.value0,r.value1)):B.value},f=function(r){var o=D2(Da(n)(r))(function(s){return t(Lm(s))});return C2(o)},v=Rm("style");return function(r){return v(e(f(Zc(r))))}}();var zr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Gr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var y2=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return{map:function(f){return function(v){var r=function(o){if(o instanceof zr)return new zr(o.value0,function(s){return r(o.value1(s))});if(o instanceof Gr)return new Gr(o.value0,function(s){return r(o.value1(s))});if(o instanceof jr)return new jr(t(o.value0)(function(s){return n(r(s))}));if(o instanceof wr)return new wr(f(o.value0));throw new Error("Failed pattern match at Pipes.Internal (line 28, column 12 - line 32, column 41): "+[o.constructor.name])};return r(v)}}}};var Ns=function(e){var t;function n(f){e=f}for(;;)t=n(e);return t},Pm=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0()),f=y2(e),v=$(f);return{apply:function(r){return function(o){var s=function(l){if(l instanceof zr)return new zr(l.value0,function(u){return s(l.value1(u))});if(l instanceof Gr)return new Gr(l.value0,function(u){return s(l.value1(u))});if(l instanceof jr)return new jr(t(l.value0)(function(u){return n(s(u))}));if(l instanceof wr)return v(l.value0)(o);throw new Error("Failed pattern match at Pipes.Internal (line 36, column 13 - line 40, column 33): "+[l.constructor.name])};return s(r)}},Functor0:function(){return f}}},oc=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0()),f=Pm(e);return{bind:function(v){return function(r){var o=function(s){if(s instanceof zr)return new zr(s.value0,function(l){return o(s.value1(l))});if(s instanceof Gr)return new Gr(s.value0,function(l){return o(s.value1(l))});if(s instanceof jr)return new jr(t(s.value0)(function(l){return n(o(l))}));if(s instanceof wr)return r(s.value0);throw new Error("Failed pattern match at Pipes.Internal (line 47, column 12 - line 51, column 28): "+[s.constructor.name])};return o(v)}},Apply0:function(){return f}}};var ic=function(e){var t=Pm(e);return{pure:wr.create,Apply0:function(){return t}}},Aw=function(e){var t=ic(e),n=oc(e);return{Applicative0:function(){return t},Bind1:function(){return n}}},xw=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0()),f=Aw(e);return{tailRecM:function(v){return function(r){var o=function(s){if(s instanceof wr&&s.value0 instanceof dt)return o(v(s.value0.value0));if(s instanceof wr&&s.value0 instanceof ht)return new wr(s.value0.value0);if(s instanceof jr)return new jr(t(s.value0)(function(l){return n(o(l))}));if(s instanceof zr)return new zr(s.value0,function(l){return o(s.value1(l))});if(s instanceof Gr)return new Gr(s.value0,function(l){return o(s.value1(l))});throw new Error("Failed pattern match at Pipes.Internal (line 163, column 10 - line 168, column 52): "+[s.constructor.name])};return o(v(r))}},Monad0:function(){return f}}};var Iw=function(e){return function(t){return new Gr(t,wr.create)}},Rw=function(e){return function(t){return new zr(t,wr.create)}};var Hm=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(f){return function(v){if(f instanceof zr)return new zr(f.value0,function(r){return Hm(e)(f.value1(r))(v)});if(f instanceof Gr)return Bs(e)(f.value1)(v(f.value0));if(f instanceof jr)return new jr(t(f.value0)(function(r){return n(Hm(e)(r)(v))}));if(f instanceof wr)return new wr(f.value0);throw new Error("Failed pattern match at Pipes.Core (line 222, column 21 - line 226, column 29): "+[f.constructor.name])}}},Bs=function(e){var t=$(e.Bind1().Apply0().Functor0());return function(n){return function(f){if(f instanceof zr)return Hm(e)(n(f.value0))(f.value1);if(f instanceof Gr)return new Gr(f.value0,function(v){return function(r){return Bs(e)(n)(r)}(f.value1(v))});if(f instanceof jr)return new jr(t(function(v){return Bs(e)(n)(v)})(f.value0));if(f instanceof wr)return new wr(f.value0);throw new Error("Failed pattern match at Pipes.Core (line 197, column 22 - line 201, column 29): "+[f.constructor.name])}}};var l_=function(e){return Iw(e)};var Om=function(e){var t=Bs(e);return function(n){return function(f){return t(ge(n))(f)}}};var Pw=function(e){return Rw(e)(void 0)};var Hw=Te(Ua),$w=de(nt),qw=vt(mt),S2=qw($o),w2=pe(ve),Ow=bc(bf),__=wl(Ta),kw=qw(oc(__)),Nw=l_(__),Bw=z(ic(__)),Ww=Ot(xw(__));var T2={eq:function(e){return function(t){return e===t}}},Nm={compare:function(e){return function(t){return $w(e)(t)}},Eq0:function(){return T2}},E2={pageOrder:function(e){return function(t){return $w(e)(t)}},Ord0:function(){return Nm}},M2=function(e){return{element:function(){var t=function(n){return Pr([yn(uy(oy)(Xe(1))(Mi))])([Vi(Hw(n)),Am([Mw("https://picsum.photos/"+Hw(n)),yn(S2(to(Xe(400)))(function(){return ia(Xe(400))}))])])};return On({initialState:w2,render:t,eval:Hn(gr)})}(),PageOrder0:function(){return E2},MonadAff1:function(){return e}}},Uw=function(e){var t=z(e.MonadEffect0().Monad0().Applicative0()),n=M2(e);return{feedAbove:function(f){var v=function(r){var o=Ow(r-1|0)(300);return kw(Nw(o))(function(){return Bw(new dt(o))})};return t(Ww(v)(f))},feedBelow:function(f){var v=function(r){var o=Ow(r+1|0)(300);return kw(Nw(o))(function(){return Bw(new dt(o))})};return t(Ww(v)(f))},feedInsert:t(B.value),feedDelete:t(B.value),onElement:function(f){return t(void 0)},PageElement0:function(){return n},MonadAff1:function(){return e}}};var Pa=function(){return window};function Vw(e){return e.readyState}var Ws=function(){function e(){}return e.value=new e,e}(),I2=function(){function e(){}return e.value=new e,e}(),R2=function(){function e(){}return e.value=new e,e}();var zw=function(e){return e==="loading"?new O(Ws.value):e==="interactive"?new O(I2.value):e==="complete"?new O(R2.value):B.value};var H2=$(Ae);var jw=j;var Qw=j;var Jw=function(e){return H2(function(){var t=dr(Ws.value);return function(n){return t(zw(n))}}())(function(){return Vw(e)})};function Xw(e,t,n){var f=Object.prototype.toString.call(n);return f.indexOf("[object HTML")===0&&f.indexOf("Element]")===f.length-8?t(n):e}var Yw=j;var Bm=function(e){return Xw(B.value,O.create,e)};function uc(e){return function(){return e.document}}function p_(e){return function(t){return function(n){return function(){return n.requestIdleCallback(t,e)}}}}var rT=j;var Um="DOMContentLoaded";var nT="change";var oT=Y(Wt),AH=Ve(xr),Vm=Vt(Zr),xH=pf(Zr),iT=z(mn),IH=Vt(Yr),RH=z(xt),PH=$(Ae),HH=vt(mt),OH=yr($u),kH=function(e){return oT(AH(Vm(xH(function(){var t=uS(e);return function(n){return t(jw(n))}}())(uc))(Pa)))(function(t){return iT(IH(Bm)(t))})},uT=Dl(kr(eo)(ge(RH(void 0)))),NH=no(function(e){return function(){var n=Vm(Jw)(Vm(uc)(Pa))();if(n instanceof Ws){var f=PH(rT)(Pa)(),v=Ss(function(r){return e(new Qe(void 0))})();return Yv(Um)(v)(!1)(f)(),Oi(Zv(Um)(v)(!1)(f))}return e(new Qe(void 0))(),Sb}}),cT=HH(Wt)(NH)(function(){return oT(kH("body"))(function(e){return je(OH(na("Could not find body")))(iT)(e)})});var sT=wm();var d_=function(){return function(e){var t=sT(e);return function(n){var f=t(n);return function(v){return function(r){return function(o){return function(s){return om(new tc(f(v)(r)(o)(s)(ge(B.value))))}}}}}}},v_=function(){return function(e){var t=sT(e);return function(n){var f=t(n);return function(v){return function(r){return function(o){return function(s){return function(l){return om(new tc(f(v)(r)(o)(s)(function(u){return O.create(l(u))})))}}}}}}}};var nO=function(e){return function(t){return um(e)(function(n){return new O(new Ni(t(n)))})}};var fT=nO(nT);var zm=ct(mr),lT=ct(Yt);var oO={value:function(e){return e}},_T=Ft(oO),h_=zm("scroll"),g_=_T(lT("overflow-y"));var pT=zm("auto"),Yi=_T(lT("overflow")),$s=zm("hidden");var jm=function(e){return function(t){var n=e(t);return n.value1}};var po=function(){function e(){this.head=null,this.last=null,this.size=0}function t(d,h){this.queue=d,this.value=h,this.next=null,this.prev=null}function n(d){this.draining=!1,this.error=null,this.value=d,this.takes=new e,this.reads=new e,this.puts=new e}var f={};function v(d){try{d()}catch(h){setTimeout(function(){throw h},0)}}function r(d,h){var D=new t(d,h);switch(d.size){case 0:d.head=D;break;case 1:D.prev=d.head,d.head.next=D,d.last=D;break;default:D.prev=d.last,d.last.next=D,d.last=D}return d.size++,D}function o(d){var h;switch(d.size){case 0:return null;case 1:h=d.head,d.head=null;break;case 2:h=d.last,d.head.next=null,d.last=null;break;default:h=d.last,d.last=h.prev,d.last.next=null}return h.prev=null,h.queue=null,d.size--,h.value}function s(d){var h;switch(d.size){case 0:return null;case 1:h=d.head,d.head=null;break;case 2:h=d.head,d.last.prev=null,d.head=d.last,d.last=null;break;default:h=d.head,d.head=h.next,d.head.prev=null}return h.next=null,h.queue=null,d.size--,h.value}function l(d){if(d.queue!==null){if(d.queue.last===d){o(d.queue);return}if(d.queue.head===d){s(d.queue);return}d.prev&&(d.prev.next=d.next),d.next&&(d.next.prev=d.prev),d.queue.size--,d.queue=null,d.value=null,d.next=null,d.prev=null}}function u(d,h){if(!h.draining){var D=h.puts,p=h.takes,a=h.reads,i,c,_,g,C;for(h.draining=!0;;){if(i=null,c=null,_=null,g=h.value,C=a.size,h.error!==null){for(g=d.left(h.error);i=s(D);)v(i.cb(g));for(;c=s(a);)v(c(g));for(;_=s(p);)v(_(g));break}if(g===f&&(i=s(D))&&(h.value=g=i.value),g!==f){for(_=s(p);C--&&(c=s(a));)v(c(d.right(g)));_!==null&&(h.value=f,v(_(d.right(g))))}if(i!==null&&v(i.cb(d.right(void 0))),h.value===f&&D.size===0||h.value!==f&&p.size===0)break}h.draining=!1}}return n.EMPTY=f,n.putLast=r,n.takeLast=o,n.takeHead=s,n.deleteCell=l,n.drainVar=u,n}();function Qm(){return new po(po.EMPTY)}function dT(e){return function(){return new po(e)}}function vT(e,t,n,f){return function(){var v=po.putLast(n.puts,{cb:f,value:t});return po.drainVar(e,n),function(){po.deleteCell(v)}}}function mT(e,t,n){return function(){var f=po.putLast(t.takes,n);return po.drainVar(e,t),function(){po.deleteCell(f)}}}var hT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),DT=function(){function e(){}return e.value=new e,e}(),CT=dT;var yT=function(){return{left:tt.create,right:Qe.create,nothing:B.value,just:O.create,killed:hT.create,filled:gT.create,empty:DT.value}}();var bT=function(e){return function(t){return function(n){return vT(yT,e,t,n)}}};var ST=function(e){return function(t){return mT(yT,e,t)}};var wT=Ve(xr);var Jm=function(e){return no(function(t){return function(){var f=ST(e)(t)();return Oi(f)}})};var Km=function(e){return function(t){return no(function(n){return function(){var v=bT(e)(t)(n)();return Oi(v)}})}},TT=function(e){return wT(CT(e))};var Xm=wT(Qm);var D_=function(e){return e};var lO=ql(bt);var MT=At,Zi=function(e){return qi(lO(e))};var FT=hi;var _O=function(e){return function(t){return[new K(e,qi(t))]}},vo=function(e){return D_(_O(e))},qs=ir();var LT=e=>t=>()=>{let n=(f,v)=>{e(f)(v)()};return new IntersectionObserver(n,t)},Zm=e=>t=>()=>{e.observe(t)};var AT=function(e){return function(t){return LT(e)(Zi(t))}};var xT=vo("root");var IT=e=>()=>{let t=(n,f)=>{e(n)(f)()};return new ResizeObserver(t)},eh=e=>t=>()=>{e.observe(t)};var RT=function(e){return IT(e)};var th=$(pt),gO=d_()({reflectSymbol:function(){return"pageElement"}}),Us=vt(mt)(Vr),PT=Ar(hr),HT=z(cn),mo=Y(Vr),DO=Sa(hr),CO=pr(cn),rh=Wo(hr),OT=st(un),yO=Wn(sw),bO=lt(cn)(Bt),kT=Gp(bt)(mp),SO=pe(ve),nh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),wO=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ah=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),oh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ih=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),NT=function(){function e(){}return e.value=new e,e}(),BT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),WT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vs=function(e){return e.pageOrder},TO=function(e){return e.element},EO=function(){return Ht.value}(),$T=function(e){var t=e.PageOrder0(),n=t.Ord0(),f=gO(n),v=TO(e),r=kc(n),o=Vs(t),s=od(n.Eq0()),l=Ve(xa(e.MonadAff1().MonadEffect0())),u=function(D){return Pr([nc("page"),yn(Yi(pT))])(th(function(p){return f(EO)(p)(v)(p)})(D.elements))},d=function(D){if(D instanceof nh)return Us(PT(function(p){var a={};for(var i in p)({}).hasOwnProperty.call(p,i)&&(a[i]=p[i]);return a.elements=r(Bc(o)(D.value0)(p.elements)),a}))(function(){return HT(new O(D.value1))});if(D instanceof wO)return mo(DO(function(p){var a={};for(var i in p)({}).hasOwnProperty.call(p,i)&&(a[i]=p[i]);return a.elements=s(D.value0)(p.elements),a}))(function(p){return Us(CO(Ti(p.elements))(Aa(new ih(p.id))))(function(){return HT(new O(D.value1))})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 89, column 5 - line 89, column 99): "+[D.constructor.name])},h=function(D){if(D instanceof NT){var p=function(_){return mo(rh(function(g){return g.parent}))(function(g){return mo(l(fr))(function(C){return Us(OT(er(C.emitter)))(function(){return mo(l(AT(function(S){return function(T){return sr(C.listener)(new WT(S))}})(qs(xT)(g))))(function(S){return l(Zm(S)(_))})})})})},a=function(_){return mo(l(fr))(function(g){return Us(OT(er(g.emitter)))(function(){return mo(l(RT(function(C){return function(S){return sr(g.listener)(new BT(C))}})))(function(C){return l(eh(C)(_))})})})},i=function(_){return yO(a(_))(p(_))};return mo(Jn("page"))(bO(i))}if(D instanceof BT)return mo(rh(function(_){return _.id}))(function(_){var g=kT(th(function(C){return C.contentRect.height})(D.value0));return Aa(new ah({id:_,height:g}))});if(D instanceof WT){var c=kT(th(function(_){return _.intersectionRect.height})(D.value0));return mo(rh(function(_){return _.id}))(function(_){return Us(PT(function(g){var C={};for(var S in g)({}).hasOwnProperty.call(g,S)&&(C[S]=g[S]);return C.visibleHeight=c,C}))(function(){return Aa(new oh({id:_,height:c}))})})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 98, column 5 - line 98, column 81): "+[D.constructor.name])};return On({initialState:SO,render:u,eval:Hn({receive:gr.receive,finalize:gr.finalize,handleAction:h,handleQuery:d,initialize:new O(NT.value)})})};var MO=gc(nt),FO=vu(nt),LO=Rb(ea),AO=$(Wb),eu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ui=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xO={append:function(e){return function(t){if(e instanceof ui)return new ui(e.value0);if(t instanceof ui)return new ui(t.value0);if(e instanceof eu&&t instanceof eu)return new eu(MO(e.value0)(t.value0));if(e instanceof tu&&t instanceof tu)return new tu(FO(e.value0)(t.value0));if(e instanceof eu)return new ui(e.value0);if(e instanceof tu)return new ui(e.value0);throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 19, column 1 - line 25, column 32): "+[e.constructor.name,t.constructor.name])}}},IO=function(){return{mempty:new eu(Yn(mu)),Semigroup0:function(){return xO}}}(),RO=a0(IO),UT=function(e){var t=Vs(e);return function(n){return function(f){var v=function(o){var s=new K(Tu(o.elements),wu(o.elements));if(s.value0 instanceof O&&s.value1 instanceof O){var l=new K(t(n)(s.value0.value0),t(n)(s.value1.value0));return l.value0 instanceof ee?new eu(o.id):l.value1 instanceof Z?new tu(o.id):new ui(o.id)}return new tu(o.id)},r=RO(LO($b(AO(v)(f))));if(r instanceof eu||r instanceof tu||r instanceof ui)return r.value0;throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 29, column 3 - line 32, column 18): "+[r.constructor.name])}}};var QT=vt(mt),ru=QT(iv(Va)),nu=Ar(Mb(Va)),VT=Pn(nt),C_=Ea(nt),cc=z(uv(Va)),zT=Ce(hu(Wa)),GT=$(ft),jT=Vu(ea),zs=QT(La),sc=pr(Qn),fc=lt(Qn)(Bt),y_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),b_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),S_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),w_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),T_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),E_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HO={map:function(e){return function(t){if(t instanceof y_)return new y_(t.value0,e(t.value1));if(t instanceof b_)return new b_(t.value0,e(t.value1));if(t instanceof S_)return new S_(t.value0,e(t.value1));if(t instanceof w_)return new w_(t.value0,e(t.value1));if(t instanceof T_)return new T_(t.value0,e(t.value1));if(t instanceof E_)return new E_(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 23, column 1 - line 29, column 56): "+[e.constructor.name,t.constructor.name])}}},OO=Fa(HO)(Eb(rC)),kO=function(e){return Pt(new b_(e,void 0))},NO=function(e){return Pt(new y_(e,void 0))},BO=function(e){return Pt(new S_(e,void 0))},WO=function(e){return Pt(new w_(e,void 0))},uh=function(e){var t=function(n){if(n instanceof y_)return ru(nu(function(f){var v={};for(var r in f)({}).hasOwnProperty.call(f,r)&&(v[r]=f[r]);return v.pages=VT(n.value0.key)(n.value0.value)(f.pages),v.preloaded=C_(n.value0.key)(f.preloaded),v.update=function(){var o={};for(var s in f.update)({}).hasOwnProperty.call(f.update,s)&&(o[s]=f.update[s]);return o.scroll=new O(n.value0.value.pageHeight),o}(),v}))(function(){return cc(n.value1)});if(n instanceof b_)return ru(nu(function(f){var v={};for(var r in f)({}).hasOwnProperty.call(f,r)&&(v[r]=f[r]);return v.pages=C_(n.value0.key)(f.pages),v.preloaded=VT(n.value0.key)(n.value0.value)(f.preloaded),v.update=function(){var o={};for(var s in f.update)({}).hasOwnProperty.call(f.update,s)&&(o[s]=f.update[s]);return o.scroll=new O(-n.value0.value.pageHeight),o}(),v}))(function(){return cc(n.value1)});if(n instanceof S_)return ru(nu(function(f){var v={};for(var r in f)({}).hasOwnProperty.call(f,r)&&(v[r]=f[r]);return v.update=function(){var o=zT(GT(function(h){return h.key})(f.update.topLoad))(new O(n.value0.key));if(o){var s={};for(var l in f.update)({}).hasOwnProperty.call(f.update,l)&&(s[l]=f.update[l]);return s.topLoad=B.value,s}var u={};for(var d in f.update)({}).hasOwnProperty.call(f.update,d)&&(u[d]=f.update[d]);return u.topLoad=new O(n.value0),u}(),v}))(function(){return cc(n.value1)});if(n instanceof w_)return ru(nu(function(f){var v={};for(var r in f)({}).hasOwnProperty.call(f,r)&&(v[r]=f[r]);return v.preloaded=C_(n.value0.key)(f.preloaded),v.update=function(){var o={};for(var s in f.update)({}).hasOwnProperty.call(f.update,s)&&(o[s]=f.update[s]);return o.topLoad=B.value,o}(),v}))(function(){return cc(n.value1)});if(n instanceof T_)return ru(nu(function(f){var v={};for(var r in f)({}).hasOwnProperty.call(f,r)&&(v[r]=f[r]);return v.update=function(){var o=zT(GT(function(h){return h.key})(f.update.bottomLoad))(new O(n.value0.key));if(o){var s={};for(var l in f.update)({}).hasOwnProperty.call(f.update,l)&&(s[l]=f.update[l]);return s.bottomLoad=B.value,s}var u={};for(var d in f.update)({}).hasOwnProperty.call(f.update,d)&&(u[d]=f.update[d]);return u.bottomLoad=new O(n.value0),u}(),v}))(function(){return cc(n.value1)});if(n instanceof E_)return ru(nu(function(f){var v={};for(var r in f)({}).hasOwnProperty.call(f,r)&&(v[r]=f[r]);return v.pages=C_(n.value0.key)(f.pages),v.update=function(){var o={};for(var s in f.update)({}).hasOwnProperty.call(f.update,s)&&(o[s]=f.update[s]);return o.bottomLoad=B.value,o}(),v}))(function(){return cc(n.value1)});throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 57, column 5 - line 63, column 13): "+[n.constructor.name])};return ru(nu(function(n){var f={};for(var v in n)({}).hasOwnProperty.call(n,v)&&(f[v]=n[v]);return f.update=function(){var r={};for(var o in n.update)({}).hasOwnProperty.call(n.update,o)&&(r[o]=n.update[o]);return r.scroll=B.value,r}(),f}))(function(){return OO(t)(e)})},$O=function(e){return Pt(new T_(e,void 0))},qO=function(e){return Pt(new E_(e,void 0))},ch=function(e){var t=Uu(e.preloaded)>(1+e.feedParams.preloadedPages|0),n=Uu(e.preloaded)<e.feedParams.preloadedPages,f=function(d){return d.value1.visibleHeight===0},v=Hr(Vf(f)(_u(jT(e.pages)))),r=v<e.feedParams.hiddenPages,o=v>(1+e.feedParams.hiddenPages|0),s=Hr(Vf(f)(jT(e.pages))),l=s<e.feedParams.hiddenPages,u=s>(1+e.feedParams.hiddenPages|0);return zs(sc(e.feedParams.enableTop&&l)(fc(NO)(Qo(e.preloaded))))(function(){return zs(sc(e.feedParams.enableTop&&u)(fc(kO)(jo(e.pages))))(function(){return zs(sc(e.feedParams.enableTop&&n)(fc(BO)(jo(e.preloaded))))(function(){return zs(sc(e.feedParams.enableTop&&t)(fc(WO)(jo(e.preloaded))))(function(){return zs(sc(r)(fc($O)(Qo(e.pages))))(function(){return sc(o)(fc(qO)(Qo(e.pages)))})})})})})};var JO=st(un);var KO=ai();var Gs=function(){return function(e){var t=KO(e);return function(n){var f=t(n);return function(v){return function(r){return function(o){return JO(f(v)(r)(o(void 0)))}}}}}};var XO=vt(mt);var XT=function(e){var t=z(ic(e)),n=oc(e),f=Y(n),v=Pw(e),r=XO(n),o=l_(e),s=function(l){return l===0?t(void 0):f(v)(function(u){return r(o(u))(function(){return s(l-1|0)})})};return s};var YO=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(f){return function(v){return function(r){return function(o){var s=function(l){return function(u){if(l instanceof zr)return Ns(l.value0);if(l instanceof Gr)return s(l.value1(void 0))(f(u)(l.value0));if(l instanceof jr)return t(l.value0)(function(d){return s(d)(u)});if(l instanceof wr)return n(r(u));throw new Error("Failed pattern match at Pipes.Prelude (line 202, column 14 - line 206, column 39): "+[l.constructor.name])}};return s(o)(v)}}}}};var YT=function(e){var t=function(f){return function(v){return function(r){return f(function(o){return new Ne(v,o)}(r))}}},n=function(f){return f(Oe.value)};return YO(e)(t)(pe(ve))(n)};var Et=Y(Vr),Qs=tn(Xp)(cn),ZT=Y(Zr),ho=z(cn),lh=vt(mt),Js=Wo(hr),L_=_t(t_),_h=$(Dv(vn)),ph=Nc(hn),dh=wl(Ta),vh=YT(dh),mh=Om(dh),hh=XT(dh),Ks=$(un),Tr=lh(Vr),gh=lu(Yr),o1=zn(hr),e1=pr(cn),ci=lt(cn)(Bt),ca=Ar(hr),fh=Pn(nt),i1=Ea(nt),M_=st(un),e5=Ot(Is),t5=lh(Wt),r5=$(mm),js=yl(nt),n5=Nb(nt),u1={reflectSymbol:function(){return"page"}},a5=Gs()(u1)(nt),o5=Sa(hr),i5=lt(xt)(Bt),u5=Wn(Mp),t1=Te(wn),c5=v_()(u1)(nt),kn=lh($o),r1=$(pt),n1=Vu(ea),s5=Dp(nt)(hc),f5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),l5=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),c1=function(){function e(){}return e.value=new e,e}(),sh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),F_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),a1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),A_=function(e){return e.onElement},_5=function(e){var t=Ve(xa(e.MonadAff1().MonadEffect0()));return function(n){if(n instanceof f5)return Et(Jn("feed"))(function(f){return ze(Qs)(f)(function(v){var r=function(o){return function(){var l=gs(v)();return Ds(l+o)(v)()}};return ho(n.value0(r))})});if(n instanceof l5)return Et(Jn("feed"))(function(f){return ze(Qs)(f)(function(v){return t(function(){var o=gs(v)();return Ds(o+n.value0)(v)(),n.value1})})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 89, column 1 - line 91, column 93): "+[n.constructor.name])}},p5=function(e){return e.feedInsert};var s1=function(e){return e.feedBelow},d5=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),f=L_(n),v=s1(e),r=Ir(Qi(t)),o=lt(n.Applicative0())(bt),s=A_(e);return function(l){var u=Et(Js(function(d){return d.feedParams.initialElement}))(function(d){return Et(Js(function(h){return h.feedParams}))(function(h){return Et(f(v(d)))(function(D){var p=_h(ph)(vh(mh(D)(hh(h.pageSize-1|0))));return Ks(Cr(d))(r(Sl(p)))})})});return Et(u)(function(d){return Tr(f(o(s)(d)))(function(){return ho({id:0,elements:d,parent:l,pageHeight:0,visibleHeight:0})})})}},v5=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),f=L_(n),v=s1(e),r=Ir(Qi(t)),o=lt(n.Applicative0())(bt),s=A_(e);return function(l){return function(u){var d=function(h){return Et(Js(function(D){return D.feedParams}))(function(D){return Et(f(v(h)))(function(p){var a=_h(ph)(vh(mh(p)(hh(D.pageSize))));return Et(r(Sl(a)))(function(i){return Tr(f(o(s)(i)))(function(){var c=Ti(i);return ho(c?B.value:new O({id:u.id+1|0,elements:i,parent:l,pageHeight:0,visibleHeight:0}))})})})})};return Ks(gh)(Qs(d)(wu(u.elements)))}}},m5=function(e){return e.feedAbove},f1=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),f=L_(n),v=m5(e),r=Ir(Qi(t)),o=lt(n.Applicative0())(bt),s=A_(e);return function(l){return function(u){var d=function(h){return Et(Js(function(D){return D.feedParams}))(function(D){return Et(f(v(h)))(function(p){var a=_h(ph)(vh(mh(p)(hh(D.pageSize))));return Et(Ks(_u)(r(Sl(a))))(function(i){return Tr(f(o(s)(i)))(function(){var c=Ti(i);return ho(c?B.value:new O({id:u.id-1|0,elements:i,parent:l,pageHeight:0,visibleHeight:0}))})})})})};return Ks(gh)(Qs(d)(Tu(u.elements)))}}},h5=function(e){var t=f1(e);return function(n){return Et(o1)(function(f){var v=Uu(f.preloaded)>f.feedParams.preloadedPages,r=Uu(f.preloaded)<f.feedParams.preloadedPages;return Tr(e1(r)(function(){var o=je(jo(f.pages))(O.create)(jo(f.preloaded));return Et(Ks(gh)(Qs(function(s){return t(n)(s.value)})(o)))(function(s){return ci(function(l){return ca(function(u){var d={};for(var h in u)({}).hasOwnProperty.call(u,h)&&(d[h]=u[h]);return d.preloaded=fh(l.id)(l)(u.preloaded),d})})(s)})}()))(function(){return e1(v)(ca(function(o){var s={};for(var l in o)({}).hasOwnProperty.call(o,l)&&(s[l]=o[l]);return s.preloaded=je(o.preloaded)(function(u){return i1(u.key)(o.preloaded)})(jo(o.preloaded)),s}))})})}},l1=function(e){return{initialElement:e,pageSize:10,hiddenPages:3,preloadedPages:3,enableTop:!1,preloadMillis:333.3}},_1=function(){return Ht.value}(),g5=function(e){var t=h5(e),n=d5(e),f=e.MonadAff1(),v=Ir(Qi(f)),r=f.MonadEffect0(),o=L_(r.Monad0()),s=p5(e),l=Ve(xa(r)),u=e.PageElement0().PageOrder0(),d=kc(u.Ord0()),h=Vs(u),D=A_(e),p=UT(u),a=f1(e),i=v5(e);return function(c){if(c instanceof c1){var _=function(E){return function(b){return function(w){var L=w>=E.preloadedPages;return L?ho(new ht(w)):Tr(t(b))(function(){return ho(new dt(w+1|0))})}}},g=function(E){return Et(n(E))(function(b){return Tr(ca(function(w){var L={};for(var I in w)({}).hasOwnProperty.call(w,I)&&(L[I]=w[I]);return L.pages=cs(0)(b),L}))(function(){return Et(Js(function(w){return w.feedParams}))(function(w){return Tr(M_(e5(_(w)(E))(0)))(function(){return Et(v(t5(ev(w.preloadMillis))(function(){return TT(void 0)})))(function(L){return ca(function(I){var R={};for(var P in I)({}).hasOwnProperty.call(I,P)&&(R[P]=I[P]);return R.lock=new O(L),R})})})})})})};return Tr(Et(Jn("feed"))(ci(g)))(function(){return Et(o(s))(function(E){return Tr(ci(function(b){return M_(er(r5(a1.create)(b)))})(E))(function(){return Et(l(fr))(function(b){return Et(er(b.emitter))(function(w){return Tr(M_(l(ZT(Pa)(p_({timeout:500})(sr(b.listener)(new sh(w)))))))(function(){return ho(void 0)})})})})})})}if(c instanceof a1){var C=function(E){if(E instanceof B)return B.value;if(E instanceof O)return new O(function(){var b={};for(var w in E.value0)({}).hasOwnProperty.call(E.value0,w)&&(b[w]=E.value0[w]);return b.elements=d(Bc(h)(c.value0)(E.value0.elements)),b}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 158, column 5 - line 158, column 33): "+[E.constructor.name])},S=function(E){return function(b){var w={};for(var L in b)({}).hasOwnProperty.call(b,L)&&(w[L]=b[L]);return w.pages=js(C)(E)(b.pages),w.preloaded=js(C)(E)(b.preloaded),w}};return Et(o1)(function(E){return Tr(o(D(c.value0)))(function(){var b=p(c.value0)(n5(E.preloaded)(E.pages));return Tr(ca(S(b)))(function(){return a5(_1)(b)(nh.create(c.value0))})})})}if(c instanceof F_&&c.value0 instanceof ah){var T=function(E){if(E instanceof B)return B.value;if(E instanceof O)return new O(function(){var b={};for(var w in E.value0)({}).hasOwnProperty.call(E.value0,w)&&(b[w]=E.value0[w]);return b.pageHeight=c.value0.value0.height,b}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 167, column 5 - line 167, column 32): "+[E.constructor.name])},m=function(E){var b={};for(var w in E)({}).hasOwnProperty.call(E,w)&&(b[w]=E[w]);return b.pages=js(T)(c.value0.value0.id)(E.pages),b.preloaded=js(T)(c.value0.value0.id)(E.preloaded),b};return ca(m)}if(c instanceof F_&&c.value0 instanceof oh){var y=function(E){if(E instanceof B)return B.value;if(E instanceof O)return new O(function(){var b={};for(var w in E.value0)({}).hasOwnProperty.call(E.value0,w)&&(b[w]=E.value0[w]);return b.visibleHeight=c.value0.value0.height,b}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 170, column 7 - line 170, column 40): "+[E.constructor.name])};return ca(function(E){var b={};for(var w in E)({}).hasOwnProperty.call(E,w)&&(b[w]=E[w]);return b.pages=js(y)(c.value0.value0.id)(E.pages),b})}if(c instanceof sh)return Tr(Zl(c.value0))(function(){return Et(Jn("feed"))(function(E){return Tr(ze(ci)(E)(function(b){return Et(o5(function(w){return jm(uh(ch(w)))(w)}))(function(w){return Tr(ca(function(L){var I={};for(var R in L)({}).hasOwnProperty.call(L,R)&&(I[R]=L[R]);return I.update={topLoad:B.value,bottomLoad:B.value,scroll:B.value},I}))(function(){return Et(l(gs(b)))(function(L){return Tr(l(i5(function(I){return u5(Ji(t1(L)+(" + "+t1(I))))(Ds(L+I)(b))})(w.update.scroll)))(function(){var I=jm(uh(ch(w)))(w).update;return Tr(ze(ci)(I.topLoad)(function(R){return Et(a(b)(R.value))(function(P){return ci(function(W){return ca(function(M){var A={};for(var x in M)({}).hasOwnProperty.call(M,x)&&(A[x]=M[x]);return A.preloaded=fh(W.id)(W)(M.preloaded),A})})(P)})}))(function(){return ze(ci)(I.bottomLoad)(function(R){return Et(i(b)(R.value))(function(P){return ci(function(W){return ca(function(M){var A={};for(var x in M)({}).hasOwnProperty.call(M,x)&&(A[x]=M[x]);return A.pages=fh(W.id)(W)(M.pages),A})})(P)})})})})})})})}))(function(){return Tr(v(ev(500)))(function(){return Et(l(fr))(function(b){return Et(er(b.emitter))(function(w){return M_(l(ZT(Pa)(p_({timeout:500})(sr(b.listener)(new sh(w))))))})})})})})});if(c instanceof F_&&c.value0 instanceof ih)return ca(function(E){var b={};for(var w in E)({}).hasOwnProperty.call(E,w)&&(b[w]=E[w]);return b.pages=i1(c.value0.value0)(E.pages),b});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 115, column 1 - line 117, column 87): "+[c.constructor.name])}},D5=function(e){var t=$T(e.PageElement0());return function(n){var f=function(l){return c5(_1)(l.value0)(t)(l.value1)(F_.create)},v=Pr([nc("feed"),yn(kn(Nd(Xe(-50)))(function(){return kn(kd(Xe(50)))(function(){return kn(ia(Lu(100)))(function(){return g_(h_)})})}))])(r1(f)(n1(n.pages))),r=Pr([yn(kn(Nd(Xe(-50)))(function(){return kn(kd(Xe(50)))(function(){return kn(ia(Lu(100)))(function(){return kn(In(-1))(function(){return kn(br(qo))(function(){return Gn(Lu(-100))})})})})}))])([]),o=function(l){return Pr([yn(kn(In(-2-s5(l.value0)|0))(function(){return kn(ul(0))(function(){return br(qo)})}))])([f(l)])},s=Pr([yn(kn(In(-2))(function(){return br(qo)}))])(r1(o)(n1(n.preloaded)));return Pr([yn(kn(to(Lu(100)))(function(){return kn(ia(Lu(100)))(function(){return Yi($s)})}))])([v,r,s])}},p1=function(e){return function(t){return On({initialState:function(n){return{feedParams:n,pages:Ur,preloaded:Ur,lock:B.value,update:{topLoad:B.value,bottomLoad:B.value,scroll:B.value}}},render:D5(t),eval:Hn({receive:gr.receive,finalize:gr.finalize,handleAction:g5(t),handleQuery:_5(t),initialize:new O(c1.value)})})}};var y5=$(zi);var d1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Xs=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),x_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),I_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),R_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),P_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),H_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),O_=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),k_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),N_=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),b5=function(e){return e};var Dh=pu,Ys=nt;var v1=function(e){var t=$(e);return{map:function(n){return function(f){if(f instanceof Xs)return new Xs(y5(n)(f.value0));if(f instanceof x_)return new x_(t(n)(f.value0));if(f instanceof I_)return new I_(function(v){return n(f.value0(v))});if(f instanceof R_)return new R_(f.value0,n(f.value1));if(f instanceof P_)return new P_(f.value0,n(f.value1));if(f instanceof H_)return new H_(f.value0,n(f.value1));if(f instanceof O_)return new O_(f.value0,f.value1,function(v){return n(f.value2(v))});if(f instanceof k_)return new k_(f.value0,n(f.value1));if(f instanceof N_)return new N_(f.value0,f.value1,n(f.value2));throw new Error("Failed pattern match at Halogen.Shell.Free (line 34, column 1 - line 43, column 38): "+[n.constructor.name,f.constructor.name])}}}};var m1=Qn,Ch=function(e){return b5(Pt(Xs.create(e)))};var T5=ct(Yt),E5=Ft(Fo);var yh=E5(T5("background-color"));var Dt=ct(mr),g1=function(){function e(){}return e.value=new e,e}(),F5=function(){function e(){}return e.value=new e,e}(),D1=function(){function e(){}return e.value=new e,e}(),L5=function(){function e(){}return e.value=new e,e}(),A5=function(){function e(){}return e.value=new e,e}(),x5=function(){function e(){}return e.value=new e,e}(),C1=function(){function e(){}return e.value=new e,e}(),bh=function(){function e(){}return e.value=new e,e}(),I5=function(){function e(){}return e.value=new e,e}(),R5=function(){function e(){}return e.value=new e,e}(),P5=function(){function e(){}return e.value=new e,e}(),H5=function(){function e(){}return e.value=new e,e}(),O5=function(){function e(){}return e.value=new e,e}(),k5=function(){function e(){}return e.value=new e,e}(),N5=function(){function e(){}return e.value=new e,e}(),B5=function(){function e(){}return e.value=new e,e}(),W5=function(){function e(){}return e.value=new e,e}(),$5=function(){function e(){}return e.value=new e,e}(),q5=function(){function e(){}return e.value=new e,e}(),U5=function(){function e(){}return e.value=new e,e}(),V5=function(){function e(){}return e.value=new e,e}(),z5=function(){function e(){}return e.value=new e,e}(),G5=function(){function e(){}return e.value=new e,e}(),j5=function(){function e(){}return e.value=new e,e}(),Q5=function(){function e(){}return e.value=new e,e}(),J5=function(){function e(){}return e.value=new e,e}(),K5=function(){function e(){}return e.value=new e,e}(),X5=function(){function e(){}return e.value=new e,e}(),Y5=function(){function e(){}return e.value=new e,e}(),Z5=function(){function e(){}return e.value=new e,e}(),ek=function(){function e(){}return e.value=new e,e}(),tk=function(){function e(){}return e.value=new e,e}(),rk=function(){function e(){}return e.value=new e,e}();var nk={value:function(e){if(e instanceof g1)return Dt("default");if(e instanceof F5)return Dt("help");if(e instanceof D1)return Dt("pointer");if(e instanceof L5)return Dt("progress");if(e instanceof A5)return Dt("wait");if(e instanceof x5)return Dt("cell");if(e instanceof C1)return Dt("crosshair");if(e instanceof bh)return Dt("text");if(e instanceof I5)return Dt("vertical-text");if(e instanceof R5)return Dt("alias");if(e instanceof P5)return Dt("copy");if(e instanceof H5)return Dt("move");if(e instanceof O5)return Dt("no-drop");if(e instanceof k5)return Dt("not-allowed");if(e instanceof N5)return Dt("grab");if(e instanceof B5)return Dt("grabbing");if(e instanceof W5)return Dt("all-scroll");if(e instanceof $5)return Dt("col-resize");if(e instanceof q5)return Dt("row-resize");if(e instanceof U5)return Dt("n-resize");if(e instanceof V5)return Dt("e-resize");if(e instanceof z5)return Dt("s-resize");if(e instanceof G5)return Dt("w-resize");if(e instanceof j5)return Dt("ne-resize");if(e instanceof Q5)return Dt("nw-resize");if(e instanceof J5)return Dt("se-resize");if(e instanceof K5)return Dt("sw-resize");if(e instanceof X5)return Dt("ew-resize");if(e instanceof Y5)return Dt("ns-resize");if(e instanceof Z5)return Dt("nesw-resize");if(e instanceof ek)return Dt("nwse-resize");if(e instanceof tk)return Dt("zoom-in");if(e instanceof rk)return Dt("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var Sh=function(){return D1.value}();var wh=function(){return g1.value}(),au=Ft(nk)(ct(Yt)("cursor")),y1=function(){return C1.value}();var ok=ct(Yt);var b1=Ft(Fo)(ok("color"));var Th=ct(mr),uk=ct(Yt);var ck={value:function(e){return e}},S1=Th("underline"),B_=Ft(ck)(uk("text-decoration")),w1=Th("overline");var T1=Th("line-through");var ie=vt(mt)($o),tr=Ft(Lo),Kt=ct(Yt),fk=Pd(Lo),lk=se(Fu),_k=ct(Yf),pk=Ft(Fi),E1=function(){var e=Ge(St)(Ze("xterm")),t=Ge(St)(Ze("xterm-viewport")),n=ie(it(Ge(St)(Ze("xterm-underline-1")))(B_(S1)))(function(){return ie(it(Ge(St)(Ze("xterm-underline-2")))(tr(Kt("text-decoration"))("double underline")))(function(){return ie(it(Ge(St)(Ze("xterm-underline-3")))(tr(Kt("text-decoration"))("wavy underline")))(function(){return ie(it(Ge(St)(Ze("xterm-underline-4")))(tr(Kt("text-decoration"))("dotted underline")))(function(){return it(Ge(St)(Ze("xterm-underline-5")))(tr(Kt("text-decoration"))("dashed underline"))})})})}),f=Ge(St)(Ze("xterm-scroll-area")),v=Ge(St)(Ze("xterm-screen")),r=Ge(St)(Ze("xterm-decoration-overview-ruler")),o=ie(it(Ge(St)(Ze("xterm-overline")))(B_(w1)))(function(){return ie(it(Ge(Ge(St)(Ze("xterm-underline-1")))(Ze("xterm-overline")))(tr(Kt("text-decoration"))("overline underline")))(function(){return ie(it(Ge(Ge(St)(Ze("xterm-underline-2")))(Ze("xterm-overline")))(tr(Kt("text-decoration"))("overline double underline")))(function(){return ie(it(Ge(Ge(St)(Ze("xterm-underline-3")))(Ze("xterm-overline")))(tr(Kt("text-decoration"))("overline wavy underline")))(function(){return ie(it(Ge(Ge(St)(Ze("xterm-underline-4")))(Ze("xterm-overline")))(tr(Kt("text-decoration"))("overline dotted underline")))(function(){return it(Ge(Ge(St)(Ze("xterm-underline-5")))(Ze("xterm-overline")))(tr(Kt("text-decoration"))("overline dashed underline"))})})})})}),s=Ge(St)(Ze("xterm-message")),l=Ge(St)(Ze("live-region")),u=Ge(St)(Ze("xterm-helper-textarea")),d=Ge(St)(Ze("xterm-helpers")),h=Ge(St)(Ze("xterm-dim")),D=Ge(St)(Ze("xterm-decoration-top")),p=Ge(St)(Ze("xterm-decoration-container")),a=Ge(St)(Ze("xterm-decoration")),i=Ge(St)(Ze("composition-view")),c=Ge(St)(Ze("xterm-char-measure-element")),_=ie(br(oa))(function(){return ie(ro(Xe(0)))(function(){return ie(Gn(Xe(0)))(function(){return ie(Bd(Xe(0)))(function(){return ie(cl(Xe(0)))(function(){return ie(In(10))(function(){return ie(tr(Kt("color"))("transparent"))(function(){return tr(Kt("pointer-events"))("none")})})})})})})}),g=Ge(St)(Ze("xterm-accessibility"));return ie(it(e)(ie(au(bh.value))(function(){return ie(br(qo))(function(){return fk(lk(Gc)(_k("user-select")))("none")})})))(function(){return ie(it(Ge(e)(Ze("focus")))(tr(Kt("outline"))("none")))(function(){return ie(it(Ge(e)(q0("focus")))(tr(Kt("outline"))("none")))(function(){return ie(it(Zt(e)(d))(ie(br(oa))(function(){return ie(Gn(Xe(0)))(function(){return In(5)})})))(function(){return ie(it(Zt(e)(u))(ie(hy(Xe(0))(Xe(0))(Xe(0))(Xe(0)))(function(){return ie(pk(Kt("border"))(0))(function(){return ie(gy(Xe(0))(Xe(0))(Xe(0))(Xe(0)))(function(){return ie(br(oa))(function(){return ie(ul(0))(function(){return ie(ro(bd(-9999)))(function(){return ie(Gn(Xe(0)))(function(){return ie(to(Xe(0)))(function(){return ie(ia(Xe(0)))(function(){return ie(In(-5))(function(){return ie(tr(Kt("whitespace"))("nowrap"))(function(){return ie(Yi($s))(function(){return tr(Kt("resize"))("none")})})})})})})})})})})})})))(function(){return ie(it(Zt(e)(i))(ie(yh(Mi))(function(){return ie(b1(F0))(function(){return ie(Hu(ly))(function(){return ie(br(oa))(function(){return ie(tr(Kt("white-space"))("nowrap"))(function(){return In(1)})})})})})))(function(){return ie(it(Zt(e)(Ge(i)(Ze("active"))))(Hu(_y)))(function(){return ie(it(Zt(e)(t))(ie(yh(Mi))(function(){return ie(g_(h_))(function(){return ie(au(wh))(function(){return ie(br(oa))(function(){return ie(cl(Xe(0)))(function(){return ie(ro(Xe(0)))(function(){return ie(Gn(Xe(0)))(function(){return Bd(Xe(0))})})})})})})})))(function(){return ie(it(Zt(e)(v))(br(qo)))(function(){return ie(it(Zt(e)(Zt(v)(tl("canvas"))))(ie(br(oa))(function(){return ie(ro(Xe(0)))(function(){return Gn(Xe(0))})})))(function(){return ie(it(Zt(e)(f))(tr(Kt("visibility"))("hidden")))(function(){return ie(it(c)(ie(Hu(sy))(function(){return ie(tr(Kt("visibility"))("hidden"))(function(){return ie(br(oa))(function(){return ie(Gn(Xe(0)))(function(){return ie(ro(bd(-9999)))(function(){return tr(Kt("line-height"))("normal")})})})})})))(function(){return ie(it(Ge(e)(Ze("enable-mouse-events")))(au(wh)))(function(){return ie(it(Ge(e)(Ze("xterm-cursor-pointer")))(au(Sh)))(function(){return ie(it(Zt(e)(Ge(St)(Ze("xterm-cursor-pointer"))))(au(Sh)))(function(){return ie(it(Ge(Ge(e)(Ze("column-select")))(Ze("focus")))(au(y1)))(function(){return ie(it(Zt(e)(g))(_))(function(){return ie(it(Zt(e)(s))(_))(function(){return ie(it(Zt(e)(l))(ie(br(oa))(function(){return ie(ro(Xe(-9999)))(function(){return ie(to(Xe(1)))(function(){return ie(ia(Xe(1)))(function(){return Yi($s)})})})})))(function(){return ie(it(h)(tr(Kt("opacity"))("1 !important")))(function(){return ie(n)(function(){return ie(o)(function(){return ie(it(Ge(St)(Ze("xterm-strikethrough")))(B_(T1)))(function(){return ie(it(Zt(Zt(v)(p))(a))(ie(In(6))(function(){return br(oa)})))(function(){return ie(it(Zt(Zt(v)(p))(Ge(a)(Ze("xterm-decoration-top-layer"))))(In(7)))(function(){return ie(it(r)(ie(In(8))(function(){return ie(br(oa))(function(){return ie(Gn(Xe(0)))(function(){return ie(cl(Xe(0)))(function(){return tr(Kt("pointer-events"))("none")})})})})))(function(){return it(D)(ie(In(2))(function(){return br(qo)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var M1=e=>()=>e.type,Eh=e=>()=>e.cursorY,Mh=e=>()=>e.cursorX,Fh=e=>()=>e.viewportY,Lh=e=>()=>e.baseY,Ah=e=>()=>e.length,F1=e=>t=>()=>e.getLine(t),xh=e=>()=>e.getNullCell();var lc=function(e){return bs(e)?B.value:new O(Qv(e))};var mk=$(Ae),hk=function(){function e(){}return e.value=new e,e}(),gk=function(){function e(){}return e.value=new e,e}(),L1=function(e){return function(t){return mk(lc)(F1(e)(t))}},A1=function(e){return function(){var n=M1(e)();return n==="normal"?hk.value:gk.value}};var Rh=e=>()=>e.isWrapped,Ph=e=>()=>e.length;var Oa=$(Ae),Hh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Oh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Wh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$h=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Uh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bk={map:function(e){return function(t){if(t instanceof Hh)return new Hh(function(n){return e(t.value0(n))});if(t instanceof Oh)return new Oh(function(n){return e(t.value0(n))});if(t instanceof kh)return new kh(function(n){return e(t.value0(n))});if(t instanceof Nh)return new Nh(function(n){return e(t.value0(n))});if(t instanceof Bh)return new Bh(function(n){return e(t.value0(n))});if(t instanceof Wh)return new Wh(function(n){return e(t.value0(n))});if(t instanceof $h)return new $h(t.value0,function(n){return e(t.value1(n))});if(t instanceof qh)return new qh(t.value0,function(n){return e(t.value1(n))});if(t instanceof Uh)return new Uh(t.value0,function(n){return e(t.value1(n))});if(t instanceof Vh)return new Vh(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.Buffer.Free (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},Sk=Fa(bk);var x1=function(e){var t=e.Monad0(),n=Y(Ii(t.Bind1())),f=an(ku(t)),v=Ve(zo(e));return function(r){var o=function(s){if(s instanceof Hh)return n(f)(function(l){return v(Oa(s.value0)(A1(l)))});if(s instanceof Oh)return n(f)(function(l){return v(Oa(s.value0)(Mh(l)))});if(s instanceof kh)return n(f)(function(l){return v(Oa(s.value0)(Eh(l)))});if(s instanceof Nh)return n(f)(function(l){return v(Oa(s.value0)(Fh(l)))});if(s instanceof Bh)return n(f)(function(l){return v(Oa(s.value0)(Lh(l)))});if(s instanceof Wh)return n(f)(function(l){return v(Oa(s.value0)(Ah(l)))});if(s instanceof $h)return n(f)(function(l){return v(Oa(s.value1)(L1(l)(s.value0)))});if(s instanceof qh)return v(Oa(s.value1)(Rh(s.value0)));if(s instanceof Uh)return v(Oa(s.value1)(Ph(s.value0)));if(s instanceof Vh)return n(f)(function(l){return v(Oa(s.value0)(xh(l)))});throw new Error("Failed pattern match at Halogen.Buffer.Free (line 19, column 5 - line 21, column 40): "+[s.constructor.name])};return Sk(Nu(r))(o)}};var zh=e=>()=>e.cursorBlink,Gh=e=>t=>()=>e.cursorBlink=t,jh=e=>()=>e.fontFamily,Qh=e=>t=>()=>e.fontFamily=t;var I1=vo("fontFamily");var R1=vo("cursorBlink");var H1=$(Ae),xk=vt(mt);var Jh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Kh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ik={map:function(e){return function(t){if(t instanceof Jh)return new Jh(function(n){return e(t.value0(n))});if(t instanceof Kh)return new Kh(t.value0,e(t.value1));if(t instanceof Xh)return new Xh(function(n){return e(t.value0(n))});if(t instanceof Yh)return new Yh(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Terminal.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},Rk=Fa(Ik);var O1=function(e){var t=e.Monad0(),n=Ii(t.Bind1()),f=Y(n),v=an(ku(t)),r=Ve(zo(e)),o=xk(n),s=z(Qd(t.Applicative0()));return function(l){var u=function(d){if(d instanceof Jh)return f(v)(function(h){return r(H1(d.value0)(zh(h)))});if(d instanceof Kh)return f(v)(function(h){return o(r(Gh(h)(d.value0)))(function(){return s(d.value1)})});if(d instanceof Xh)return f(v)(function(h){return r(H1(d.value0)(jh(h)))});if(d instanceof Yh)return f(v)(function(h){return o(r(Qh(h)(d.value0)))(function(){return s(d.value1)})});throw new Error("Failed pattern match at Halogen.Terminal.Free.Options (line 19, column 5 - line 21, column 49): "+[d.constructor.name])};return Rk(Nu(l))(u)}};var N1=sf(k1(),1),$_=()=>new N1.FitAddon;var W1=sf(B1(),1),U_=()=>new W1.WebglAddon;var q1=sf($1(),1),z_=()=>new q1.WebLinksAddon;var U1={addon:j},V1={addon:j},z1={addon:pe(ve)};var G_=function(e){return e.addon};var rg=e=>e.active,ng=e=>e.normal,ag=e=>e.alternate;var J1=sf(Q1(),1),K1=e=>t=>()=>new J1.Terminal(e,t),X1=e=>()=>e.element,Y1=e=>()=>e.textarea,ig=e=>()=>e.rows,ug=e=>()=>e.cols,Zs=e=>e.buffer,cg=e=>()=>e.markers;var sg=e=>e.options,fg=e=>t=>()=>e.onBell(t),lg=e=>t=>()=>e.onBinary(n=>t(n)());var _g=e=>t=>()=>e.onData(n=>t(n)()),pg=e=>t=>()=>e.onKey(n=>t(n)()),dg=e=>t=>()=>e.onLineFeed(t),vg=e=>t=>()=>e.onRender(n=>t(n)()),mg=e=>t=>()=>e.onWriteParsed(t),hg=e=>t=>()=>e.onResize(n=>t(n)()),gg=e=>t=>()=>e.onScroll(n=>t(n)()),Dg=e=>t=>()=>e.onSelectionChange(t),Cg=e=>t=>()=>e.onTitleChange(n=>t(n)());var yg=e=>t=>()=>e.open(t);var bg=e=>t=>n=>()=>e.write(t,n),Sg=e=>t=>n=>()=>e.writeln(t,n);var Z1=e=>t=>()=>e.loadAddon(t);var eE=$(Ae);var tE=function(){var e=eE(lc);return function(t){return e(Y1(t))}}();var rE=function(e){return function(t){return K1(Zi(e))(Zi(t))}},nE=function(e){var t=G_(e);return function(n){return function(f){return Z1(n)(t(f))}}};var aE=function(){var e=eE(lc);return function(t){return e(X1(t))}}();var Q_=$(zi),kg=pe(ve),go=$(Ae),Tg=x1(nl)(Tf),iE=vt(mt),J_=Kc(z0),Kk=nE(z1),K_=Y(La),Eg=iE(La),_c=pr(Qn),Mg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ag=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ig=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),X_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Y_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Og=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Z_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ep=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Xk={map:function(e){return function(t){if(t instanceof Mg)return new Mg(Q_(e)(t.value0));if(t instanceof Fg)return new Fg(function(n){return e(t.value0(n))});if(t instanceof Lg)return new Lg(function(n){return e(t.value0(n))});if(t instanceof Ag)return new Ag(function(n){return e(t.value0(n))});if(t instanceof xg)return new xg(function(n){return e(t.value0(n))});if(t instanceof Ig)return new Ig(Q_(e)(t.value0));if(t instanceof Rg)return new Rg(Q_(e)(t.value0));if(t instanceof Pg)return new Pg(Q_(e)(t.value0));if(t instanceof Hg)return new Hg(function(n){return e(t.value0(n))});if(t instanceof X_)return new X_(t.value0,e(t.value1));if(t instanceof Y_)return new Y_(t.value0,e(t.value1));if(t instanceof Og)return new Og(function(n){return e(t.value0(n))});if(t instanceof Z_)return new Z_(function(n){return e(t.value0(n))});if(t instanceof ep)return new ep(function(n){return e(t.value0(n))});if(t instanceof tp)return new tp(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},Yk=Fa(Xk),si=function(e){return Pt(new Y_(e,void 0))},oE=function(e){return Pt(new X_(e,void 0))};var Zk=function(){return Pt(new Z_(kg))}(),eN=function(){return Pt(new ep(kg))}();var uE=function(e){var t=e.MonadEffect0(),n=t.Monad0(),f=Ii(n.Bind1()),v=Y(f),r=an(ku(n)),o=zo(t),s=O1(o),l=Ve(o),u=Ir(Fb(e)),d=iE(f);return function(h){var D=Nu(h),p=s(D),a=function(i){if(i instanceof Mg)return v(r)(function(c){return Vo(p(i.value0))(sg(c))});if(i instanceof Fg)return v(r)(function(c){return l(go(i.value0)(aE(c)))});if(i instanceof Lg)return v(r)(function(c){return l(go(i.value0)(tE(c)))});if(i instanceof Ag)return v(r)(function(c){return l(go(i.value0)(ig(c)))});if(i instanceof xg)return v(r)(function(c){return l(go(i.value0)(ug(c)))});if(i instanceof Ig)return v(r)(function(c){return l(Vo(Tg(i.value0))(rg(Zs(c))))});if(i instanceof Rg)return v(r)(function(c){return l(Vo(Tg(i.value0))(ng(Zs(c))))});if(i instanceof Pg)return v(r)(function(c){return l(Vo(Tg(i.value0))(ag(Zs(c))))});if(i instanceof Hg)return v(r)(function(c){return l(go(i.value0)(cg(c)))});if(i instanceof X_)return v(r)(function(c){return v(u(Xm))(function(_){return d(l(bg(c)(i.value0)(Zd(Km(i.value1)(_)))))(function(){return u(Jm(_))})})});if(i instanceof Y_)return v(r)(function(c){return v(u(Xm))(function(_){return d(l(Sg(c)(i.value0)(Zd(Km(i.value1)(_)))))(function(){return u(Jm(_))})})});if(i instanceof Og)return l(go(function(c){return i.value0(Cf(c))})(J_($_)));if(i instanceof Z_)return l(go(function(c){return i.value0(Cf(c))})(J_(z_)));if(i instanceof ep)return l(go(function(c){return i.value0(Cf(c))})(J_(U_)));if(i instanceof tp)return v(r)(function(c){return l(go(function(_){return i.value1(VD(_))})(J_(Kk(c)(i.value0))))});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 32, column 5 - line 34, column 55): "+[i.constructor.name])};return Yk(D)(a)}};var cE=function(e){var t=G_(e);return function(n){return Pt(new tp(t(n),kg))}},tN=cE(V1),rN=cE(U1),sE=function(e){return K_(eN)(function(t){return Eg(function(){if(t instanceof B)return _c(e)(si("WebGL Addon unavailable"));if(t instanceof O)return Eg(_c(e)(oE("Loading WebGL ")))(function(){return K_(tN(t.value0))(function(n){return _c(e)(function(){return si(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return K_(Zk)(function(n){if(n instanceof B)return _c(e)(si("WebLinks Addon unavailable"));if(n instanceof O)return Eg(_c(e)(oE("Loading WebLinks ")))(function(){return K_(rN(n.value0))(function(f){return _c(e)(function(){return si(f?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var lE=e=>()=>e.dispose();var _E={toDisposable:pe(ve)},aN=function(e){return e.toDisposable},pE=function(e){return{dispose:function(){var t=aN(e);return function(n){return lE(t(n))}}()}},dE=function(e){return e.dispose};var ut=Y(Vr),Ng=zn(hr),iN=$(vn),uN=uE(os)(qu),sa=Ar(hr),fa=vt(mt)(Vr),cN=lt(xt)(bt),sN=dE(pE(_E)),fN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_N=function(){function e(){}return e.value=new e,e}(),pN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dN=function(){function e(){}return e.value=new e,e}(),vN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mN=function(){function e(){}return e.value=new e,e}(),hN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),DN=function(){function e(){}return e.value=new e,e}(),CN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vE=function(){function e(){}return e.value=new e,e}(),mE=function(){function e(){}return e.value=new e,e}(),Kn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yN=function(e){return function(t){return ii([Lw(E1),Pr([nc("terminal")])([])])}},bN=function(e){var t=Ir(Qi(e));return function(n){return ut(Ng)(function(f){return t(iN(O.create)(Vo(uN(n))(f.terminal)))})}},SN=function(e){var t=Ve(xa(e.MonadEffect0())),n=function(p){return ut(t(fr))(function(a){return ut(t(mg(p)(sr(a.listener)(new Kn(mN.value)))))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})},f=function(p){return ut(t(fr))(function(a){return ut(t(Cg(p)(function(){var i=sr(a.listener);return function(c){return i(Kn.create(CN.create(c)))}}())))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})},v=function(p){return ut(t(fr))(function(a){return ut(t(Dg(p)(sr(a.listener)(new Kn(DN.value)))))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})},r=function(p){return ut(t(fr))(function(a){return ut(t(gg(p)(function(){var i=sr(a.listener);return function(c){return i(Kn.create(gN.create(c)))}}())))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})},o=function(p){return ut(t(fr))(function(a){return ut(t(hg(p)(function(){var i=sr(a.listener);return function(c){return i(Kn.create(hN.create(c)))}}())))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})},s=function(p){return ut(t(fr))(function(a){return ut(t(vg(p)(function(){var i=sr(a.listener);return function(c){return i(Kn.create(vN.create(c)))}}())))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})},l=function(p){return ut(t(fr))(function(a){return ut(t(dg(p)(sr(a.listener)(new Kn(dN.value)))))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})},u=function(p){return ut(t(fr))(function(a){return ut(t(pg(p)(function(){var i=sr(a.listener);return function(c){return i(Kn.create(pN.create(c)))}}())))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})},d=function(p){return ut(t(fr))(function(a){return ut(t(_g(p)(function(){var i=sr(a.listener);return function(c){return i(Kn.create(fN.create(c)))}}())))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})},h=function(p){return ut(t(fr))(function(a){return ut(t(lg(p)(function(){var i=sr(a.listener);return function(c){return i(Kn.create(lN.create(c)))}}())))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})},D=function(p){return ut(t(fr))(function(a){return ut(t(fg(p)(sr(a.listener)(new Kn(_N.value)))))(function(i){return ut(er(a.emitter))(function(){return sa(function(c){var _={};for(var g in c)({}).hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _.disposables=Cr(i)(c.disposables),_})})})})};return function(p){if(p instanceof vE)return ut(Jn("terminal"))(function(a){if(a instanceof B)return t(Ji("no terminal element"));if(a instanceof O)return ut(Ng)(function(i){return fa(t(yg(i.terminal)(a.value0)))(function(){return fa(D(i.terminal))(function(){return fa(h(i.terminal))(function(){return fa(u(i.terminal))(function(){return fa(l(i.terminal))(function(){return fa(s(i.terminal))(function(){return fa(n(i.terminal))(function(){return fa(o(i.terminal))(function(){return fa(r(i.terminal))(function(){return fa(v(i.terminal))(function(){return fa(f(i.terminal))(function(){return d(i.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.Terminal (line 73, column 5 - line 88, column 28): "+[a.constructor.name])});if(p instanceof mE)return ut(Ng)(function(a){return t(cN(sN)(a.disposables))});if(p instanceof Kn)return Aa(p.value0);throw new Error("Failed pattern match at Halogen.Terminal (line 70, column 16 - line 92, column 23): "+[p.constructor.name])}},hE=function(e){return On({initialState:function(t){return{terminal:t,disposables:[]}},render:yN(e),eval:Hn({receive:gr.receive,handleAction:SN(e),handleQuery:bN(e),initialize:new O(vE.value),finalize:new O(mE.value)})})};var TN=se(At),gE=v_(),DE={reflectSymbol:function(){return"terminal"}},EN=gE(DE)(qa),MN=$(pt),CE={reflectSymbol:function(){return"process"}},FN=gE(CE)(Ys),LN=Vu(ea),yE=Ud(ji),Bg=Y(yE),rp=_t(_l)(ji),AN=ai()(DE)(qa),bE=z(cn),xN=$(un),IN=_t(t_),np=zn(hr),ou=z(zd(ji)),SE=vt(mt),ef=SE(yE),wE=rb(hr),Wg=Ar(wE),RN=Sa(wE),PN=Pn(Ys),HN=Sn(Dh),ON=Xn(Dh),kN=Ea(Ys),NN=Gs()(CE)(Ys),BN=tb(Is),tf=Y(Vr),WN=se(MT),$N=Je(FT),qN=SE(Vr),UN=Ar(hr),$g=st(un),VN=$(ft),zN=z(m1),TE=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),EE=function(){function e(){}return e.value=new e,e}(),ME=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),FE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),LE=function(){return Ht.value}(),AE=function(){return Ht.value}(),GN=function(e){var t=hE(e);return function(n){return ii(TN([function(){if(n.terminal instanceof B)return ii([]);if(n.terminal instanceof O)return EN(LE)(void 0)(t)(n.terminal.value0)(ME.create);throw new Error("Failed pattern match at Halogen.Shell (line 69, column 8 - line 71, column 80): "+[n.terminal.constructor.name])}()])(MN(function(f){return FN(AE)(f.value0)(f.value1.value0)(f.value1.value1)(FE.create)})(LN(n.processes))))}},xE=function(e){var t=e.MonadEffect0().Monad0(),n=IN(t),f=Fa(v1(t.Bind1().Apply0().Functor0()))(BN);return function(v){var r=function(o){if(o instanceof Xs)return Bg(rp(AN(LE)(void 0)(o.value0)))(function(l){return bE(l)});if(o instanceof x_)return xN(O.create)(n(o.value0));if(o instanceof I_)return Bg(rp(np))(function(l){return ou(o.value0(l.shell.shell))});if(o instanceof R_)return ef(Wg(function(l){var u={};for(var d in l)({}).hasOwnProperty.call(l,d)&&(u[d]=l[d]);return u.shell=function(){var h={};for(var D in l.shell)({}).hasOwnProperty.call(l.shell,D)&&(h[D]=l.shell[D]);return h.shell=o.value0,h}(),u}))(function(){return ou(o.value1)});if(o instanceof P_)return ef(Wg(function(l){var u={};for(var d in l)({}).hasOwnProperty.call(l,d)&&(u[d]=l[d]);return u.interpreter=o.value0,u}))(function(){return ou(o.value1)});if(o instanceof H_)return ef(rp(Aa(o.value0)))(function(){return ou(o.value1)});if(o instanceof O_){var s=function(l){return je(0)(function(u){return u.key})(Qo(l))};return Bg(RN(function(l){var u={};for(var d in l)({}).hasOwnProperty.call(l,d)&&(u[d]=l[d]);return u.processes=PN(HN(ON)(s(l.processes)))(new K(o.value0,o.value1))(l.processes),u}))(function(l){return ou(o.value2(s(l.processes)))})}if(o instanceof k_)return ef(Wg(function(l){var u={};for(var d in l)({}).hasOwnProperty.call(l,d)&&(u[d]=l[d]);return u.processes=kN(o.value0)(l.processes),u}))(function(){return ou(o.value1)});if(o instanceof N_)return ef(rp(NN(AE)(o.value0)(d1.create(o.value1))))(function(){return ou(o.value2)});throw new Error("Failed pattern match at Halogen.Shell (line 111, column 5 - line 113, column 22): "+[o.constructor.name])};return eb(f(r)(v))}},jN=function(e){var t=Ve(xa(e.MonadEffect0())),n=xE(e);return function(f){if(f instanceof EE)return tf(t(rE(WN(qs(I1)('"Cascadia Code", Menlo, monospace'))(qs(R1)(!0)))($N)))(function(v){return qN(UN(function(r){var o={};for(var s in r)({}).hasOwnProperty.call(r,s)&&(o[s]=r[s]);return o.terminal=new O(v),o}))(function(){return tf(np)(function(r){return $g(n(r.shell.init))})})});if(f instanceof ME)return tf(np)(function(v){return $g(n(v.interpreter(f.value0)))});if(f instanceof FE)return $g(n(f.value0));throw new Error("Failed pattern match at Halogen.Shell (line 80, column 16 - line 91, column 51): "+[f.constructor.name])}},QN=function(e){var t=xE(e);return function(n){return tf(np)(function(f){return tf(t(f.shell.query(n.value0)))(function(v){return bE(VN(n.value1)(v))})})}},IE=function(e){return On({initialState:function(t){return{shell:t,interpreter:ge(zN(void 0)),terminal:B.value,processes:Ur}},render:GN(e),eval:Hn({receive:gr.receive,finalize:gr.finalize,handleAction:jN(e),handleQuery:QN(e),initialize:new O(EE.value)})})};var ap={suspend:pb,fork:Yd,join:ns,Monad0:function(){return Ta},Functor1:function(){return Db}};var op=function(e){return e.fork};var PE=j,la=j,HE=function(e){var t=lt(e)(Bt);return function(n){return la(function(f){return t(n)(f.rendering)})}},KN=j,OE=function(e){return function(t){return la(function(n){return KN(t(n.rendering))})}},XN=j,ip=function(e){return function(t){return e(t)}},kE=function(e){return function(t){return function(n){return function(f){return function(){var r=It({})(),o=It(zu)(),s=It(zu)(),l=It(n)(),u=It(new O(Oe.value))(),d=It(new O(Oe.value))(),h=It(B.value)(),D=It(1)(),p=It(new O(Ur))(),a=It(Ur)(),i={component:e,state:e.initialState(t),refs:Ur,children:zu,childrenIn:o,childrenOut:s,selfRef:r,handlerRef:l,pendingQueries:u,pendingOuts:d,pendingHandlers:h,rendering:B.value,fresh:D,subscriptions:p,forks:a,lifecycleHandlers:f};return yt(i)(r)(),XN(r)}}}}};var YN=lt(xt)(Bt),ZN=Vt(Yr),e3=ki(gm),Gt=Y(Wt),Mt=Ve(xr),t3=vt(mt),_a=t3(Wt),UE=lt(mn),r3=UE(hn),VE=op(ap),n3=es(Hi)(Wu)(hn),ka=z(mn),a3=$(Cv),NE=ao(Hi),o3=$(vn),BE=Pi(Hi),i3=$(ft),u3=Pn(gm),c3=NS(Wu),s3=Ea(e_),f3=CD(ha),l3=Pn(e_),WE=UE(Bt),$E=ki(e_),_3=ki(Xt),p3=ew(qu),d3=yl(Xt),v3=function(e){return function(t){return function(){var f=xe(t)(),v=xe(f.subscriptions)();return YN(Ql)(ZN(e3(e))(v))()}}},up=function(e){return function(t){return Gt(Mt(xe(e)))(function(n){if(n instanceof B)return t;if(n instanceof O)return Mt(yt(new O(new Ne(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},cp=function(e){return function(t){return _a(Mt(yt({initializers:Oe.value,finalizers:Oe.value})(e)))(function(){return Gt(Mt(t))(function(n){return Gt(Mt(xe(e)))(function(f){return _a(r3(VE)(f.finalizers))(function(){return _a(n3(f.initializers))(function(){return ka(n)})})})})})}},iu=Dl(kr(eo)(ge(z(xt)(void 0)))),qE=function(e){return function(t){return Gt(Mt(xe(t)))(function(n){return Mt(Fp(function(f){return{state:f+1|0,value:e(f)}})(n.fresh))})}},Ug=function(e){return function(t){return function(n){return Gt(Mt(xe(t)))(function(f){return fi(e)(t)(f.component.eval(new ec(a3(O.create)(Kb(n)),ge(B.value))))})}}},fi=function(e){return function(t){return function(n){var f=function(r){return function(o){return Gt(Mt(xe(r)))(function(s){return rw(function(l){var u=function(d){return NE(Gt(Mt(xe(d)))(function(h){return la(function(D){return Ug(e)(D.selfRef)(l.value1)})(h)}))};return o3(l.value2)(BE(l.value0(Wu)(u)(s.children)))})(o)})}},v=function(r){return function(o){if(o instanceof Es)return Gt(Mt(xe(r)))(function(s){var l=o.value0(s.state);if(ju(s.state)(l.value1))return ka(l.value0);if(nr)return _a(Mt(yt({component:s.component,refs:s.refs,children:s.children,childrenIn:s.childrenIn,childrenOut:s.childrenOut,selfRef:s.selfRef,handlerRef:s.handlerRef,pendingQueries:s.pendingQueries,pendingOuts:s.pendingOuts,pendingHandlers:s.pendingHandlers,rendering:s.rendering,fresh:s.fresh,subscriptions:s.subscriptions,forks:s.forks,lifecycleHandlers:s.lifecycleHandlers,state:l.value1})(r)))(function(){return _a(cp(s.lifecycleHandlers)(e(s.lifecycleHandlers)(r)))(function(){return ka(l.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[l.constructor.name])});if(o instanceof Ms)return Gt(qE(uw)(r))(function(s){return Gt(Mt(ow(o.value0(s))(function(l){return iu(Vg(e)(r)(new Ni(l)))})))(function(l){return Gt(Mt(xe(r)))(function(u){return _a(Mt(en(i3(u3(s)(l)))(u.subscriptions)))(function(){return ka(o.value1(s))})})})});if(o instanceof Fs)return _a(Mt(v3(o.value0)(r)))(function(){return ka(o.value1)});if(o instanceof Gi)return o.value0;if(o instanceof Ls)return f(r)(o.value0);if(o instanceof As)return Gt(Mt(xe(r)))(function(s){return Gt(Mt(xe(s.handlerRef)))(function(l){return _a(up(s.pendingOuts)(l(o.value0)))(function(){return ka(o.value1)})})});if(o instanceof Jl)return BE(c3(fm(function(){var s=fi(e)(r);return function(l){return NE(s(l))}}())(o.value0)));if(o instanceof Kl)return Gt(qE(cw)(r))(function(s){return Gt(Mt(xe(r)))(function(l){return Gt(Mt(It(!1)))(function(u){return Gt(VE(rs(Mt(function(){return en(s3(s))(l.forks)(),yt(!0)(u)()}))(fi(e)(r)(o.value0))))(function(d){return _a(Mt(f3(xe(u))(en(l3(s)(d))(l.forks))))(function(){return ka(o.value1(s))})})})})});if(o instanceof Xl)return Gt(Mt(xe(r)))(function(s){return Gt(Mt(xe(s.forks)))(function(l){return _a(WE(ns)($E(o.value0)(l)))(function(){return ka(o.value1)})})});if(o instanceof Yl)return Gt(Mt(xe(r)))(function(s){return Gt(Mt(xe(s.forks)))(function(l){return _a(WE(as(na("Cancelled")))($E(o.value0)(l)))(function(){return ka(o.value1)})})});if(o instanceof xs)return Gt(Mt(xe(r)))(function(s){return ka(o.value1(_3(o.value0)(s.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[o.constructor.name])}};return p3(v(t))(n)}}},Vg=function(e){return function(t){return function(n){if(n instanceof Fl)return Mt(ze(en)(t)(ip(function(f){return{component:f.component,state:f.state,children:f.children,childrenIn:f.childrenIn,childrenOut:f.childrenOut,selfRef:f.selfRef,handlerRef:f.handlerRef,pendingQueries:f.pendingQueries,pendingOuts:f.pendingOuts,pendingHandlers:f.pendingHandlers,rendering:f.rendering,fresh:f.fresh,subscriptions:f.subscriptions,forks:f.forks,lifecycleHandlers:f.lifecycleHandlers,refs:d3(ge(n.value1))(n.value0)(f.refs)}})));if(n instanceof Ni)return Gt(Mt(xe(t)))(function(f){return fi(e)(t)(f.component.eval(new Zu(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var h3=Y(Zr),g3=vt(mt),XE=xf(xt)(Bt),YE=lt(mn)(hn),ZE=op(ap),nf=Vt(Zr),eM=lt(xt),tM=eM(Bt),zE=eM(ss),GE=g3(Wt),D3=es(Hi)(Wu)(hn),rf=Ve(xr),jE=z(xt),zg=$(Ae),Gg=z(mn),jg=pr(xt),C3=OE(Ae),y3=st(vn),QE=tS(xt),b3=HE(xt),S3=Ot(Tf),w3=cu(Ae),Qg=Y(Wt),T3=Ve(nl),JE=function(){return It({initializers:Oe.value,finalizers:Oe.value})}(),KE=function(e){return function(){var n=xe(e)();return yt(B.value)(e)(),XE(n)(function(){var f=YE(ZE);return function(v){return iu(f(oo(v)))}}())()}},E3=function(e){return function(){return nf(tM(zE(Ql)))(xe(e.subscriptions))(),yt(B.value)(e.subscriptions)(),nf(zE(function(){var n=as(na("finalized"));return function(f){return iu(n(f))}}()))(xe(e.forks))(),yt(Ur)(e.forks)()}},rM=function(e){return function(t){return function(n){var f=function(d){return function(h){return la(function(D){var p=fi(o)(D.selfRef)(D.component.eval(new Ku(void 0)));return en(function(a){return{initializers:new Ne(GE(D3(oo(a.initializers)))(function(){return GE(p)(function(){return rf(function(){return KE(D.pendingQueries)(),KE(D.pendingOuts)()})})}),h),finalizers:a.finalizers}})(d)})}},v=function(d){return function(h){return function(D){return Sm(function(p){return function(){var i=JE(),c=kE(p)(D)(h)(i)(),_=xe(d)();return yt({initializers:Oe.value,finalizers:_.finalizers})(d)(),nf(la(function(){var g=o(d);return function(C){return g(function(S){return S.selfRef}(C))}}()))(xe(c))(),nf(f(d)(_.initializers))(xe(c))(),c}})}}},r=function(d){return function(h){return function(D){return function(p){return bm(function(a){return function(){var c=zg(a.pop)(xe(D))(),_=function(){if(c instanceof O){yt(c.value0.value1)(D)();var C=xe(c.value0.value0)();return la(function(S){return function(){return ze(yt)(S.handlerRef)(function(){var m=je(Gg(void 0))(h);return function(y){return m(a.output(y))}}())(),iu(fi(o)(S.selfRef)(S.component.eval(new Yu(a.input,void 0))))()}})(C)(),c.value0.value0}if(c instanceof B)return v(d)(function(){var S=je(Gg(void 0))(h);return function(T){return S(a.output(T))}}())(a.input)(a.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[c.constructor.name])}(),g=zg(function(C){return Cc(a.get(C))})(xe(p))();return jg(g)(a_("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),en(a.set(_))(p)(),h3(xe(_))(C3(function(C){if(C instanceof B)return Md("Halogen internal error: child was not initialized in renderChild");if(C instanceof O)return jE(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},o=function(d){return function(h){return function(){var p=xe(h)(),a=zg(So)(xe(p.pendingHandlers))();jg(a)(yt(new O(Oe.value))(p.pendingHandlers))(),yt(zu)(p.childrenOut)(),yt(p.children)(p.childrenIn)();var i=function(){var S=up(p.pendingHandlers),T=Vg(o)(p.selfRef);return function(m){return S(y3(T(m)))}}(),c=function(){var S=up(p.pendingQueries);return function(T){return S(i(Ni.create(T)))}}(),_=e.render(function(S){return iu(i(S))})(r(d)(c)(p.childrenIn)(p.childrenOut))(p.component.render(p.state))(p.rendering)(),g=xe(p.childrenOut)(),C=xe(p.childrenIn)();return QE(C)(function(S){return function(){var m=xe(S)();return b3(e.removeChild)(m)(),s(d)(m)()}})(),ze(en)(p.selfRef)(ip(function(S){return{component:S.component,state:S.state,refs:S.refs,childrenIn:S.childrenIn,childrenOut:S.childrenOut,selfRef:S.selfRef,handlerRef:S.handlerRef,pendingQueries:S.pendingQueries,pendingOuts:S.pendingOuts,pendingHandlers:S.pendingHandlers,fresh:S.fresh,subscriptions:S.subscriptions,forks:S.forks,lifecycleHandlers:S.lifecycleHandlers,rendering:new O(_),children:g}}))(),jg(a)(ze(S3)(void 0)(function(S){return function(){var m=xe(p.pendingHandlers)();yt(new O(Oe.value))(p.pendingHandlers)(),tM(function(){var b=YE(ZE);return function(w){return iu(b(oo(w)))}}())(m)();var y=xe(p.pendingHandlers)(),E=je(!1)(Pb)(y);return E?w3(yt(B.value)(p.pendingHandlers))(new ht(void 0))():new dt(void 0)}}))()}}},s=function(d){return la(function(h){return function(){E3(h)();var p=fi(o)(h.selfRef)(h.component.eval(new Xu(void 0)));return en(function(a){return{initializers:a.initializers,finalizers:new Ne(p,a.finalizers)}})(d)(),QE(h.children)(function(a){return function(){var c=xe(a)();return s(d)(c)()}})()}})},l=function(d){return function(h){return function(D){return Qg(rf(xe(d)))(function(p){return p?Gg(B.value):Ug(o)(h)(D)})}}},u=function(d){return function(h){return function(D){return cp(h)(function(){var a=xe(d)();return a?void 0:(yt(!0)(d)(),s(h)(D)(),la(function(i){return function(){var _=T3(xe(i.selfRef))();return XE(_.rendering)(e.dispose)()}})(D)())})}}};return Qg(rf(JE))(function(d){return Qg(rf(It(!1)))(function(h){return cp(d)(function(){var p=fr(),a=nf(xe)(v(d)(function(){var i=sr(p.listener);return function(c){return rf(i(c))}}())(n)(t))();return la(function(i){return jE({query:l(h)(i.selfRef),messages:p.emitter,dispose:u(h)(d)(a)})})(a)()})})})}}};var pa=function(e){return function(t){return function(){return t[e]}}};var F3=pa("baseURI"),L3=pa("ownerDocument"),nM=pa("parentNode"),A3=pa("parentElement");var x3=pa("childNodes"),I3=pa("firstChild"),R3=pa("lastChild"),P3=pa("previousSibling"),aM=pa("nextSibling"),H3=pa("nodeValue");var O3=pa("textContent");function Jg(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function sp(e){return function(t){return function(){t.appendChild(e)}}}function Kg(e){return function(t){return function(){t.removeChild(e)}}}var oM=$(Ae);var Xg=function(){var e=oM(kt);return function(t){return e(nM(t))}}();var iM=function(){var e=oM(kt);return function(t){return e(aM(t))}}();var Yg=function(e,t,n){var f=0,v;return function(r){if(f===2)return v;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,v=n(),f=2,v}},Zg=st(Ae),$3=z(xt),q3=lt(xt)(Bt),U3=ir(),V3=pr(xt),z3=En(Fc(Fc(Tn))),G3=pe(ve),j3=Y(Wt),Q3=Ve(xr),J3=$(Ae),K3=Vt(Zr);var X3=function(e){return function(t){return function(n){return t instanceof O&&n instanceof O?Zg(Jg(e)(t.value0)(n.value0)):t instanceof B&&n instanceof O?Zg(sp(e)(n.value0)):$3(void 0)}}},uM=function(e){return function(){var n=Xg(e.node)();return q3(function(f){return Kg(e.node)(f)})(n)()}},Y3=function(e){return function(t){return function(n){var f=PE(function(s){return s.node}),v=function(s){return s instanceof O?Dn(s.value0):void 0},r=function(s){var l=lw(U3)(s),u=Yg("patch","Halogen.VDom.Driver",function(){return function(i,c){if(i instanceof O){if(c instanceof tc)return Dn(i.value0),h(100)(c.value0);if(c instanceof n_){var _=gn(i.value0,c.value0);return Ut(new qt(Rr(_),new O(_),u(103),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[c.constructor.name])}return d(104)(c)}}),d=Yg("render","Halogen.VDom.Driver",function(){return function(i){if(i instanceof tc)return h(86)(i.value0);if(i instanceof n_){var c=l(i.value0);return Ut(new qt(Rr(c),new O(c),u(89),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[i.constructor.name])}}),h=Yg("renderComponentSlot","Halogen.VDom.Driver",function(){return function(i){var c=xe(t)(),_=c(i)(),g=f(_);return Ut(new qt(g,B.value,u(117),v))}}),D=u(91),p=d(82),a=h(109);return p},o=bS(e);return{buildWidget:r,buildAttributes:o,document:n}}}},Z3=function(e){return function(t){var n=function(f){return function(v){return function(r){return function(o){if(o instanceof B)return function(){var l=It(v)(),u=Y3(f)(l)(e),d=ys(u)(r),h=Rr(d);return Zg(sp(h)(Yw(t)))(),{machine:d,node:h,renderChildRef:l}};if(o instanceof O)return function(){yt(v)(o.value0.renderChildRef)();var l=Xg(o.value0.node)(),u=iM(o.value0.node)(),d=gn(o.value0.machine,r),h=Rr(d);return V3(z3(ju)(o.value0.node)(h))(X3(h)(u)(l))(),{machine:d,node:h,renderChildRef:o.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[o.constructor.name])}}}};return{render:n,renderChild:G3,removeChild:uM,dispose:uM}}},cM=function(e){return function(t){return function(n){return j3(Q3(J3(Qw)(K3(uc)(Pa))))(function(f){return rM(Z3(f)(n))(e)(t)})}}};var tB=pe(ve),sM=vt(mt),rB=sM(Vr),nB=Ar(hr),aB=En(Tn),oB=Y(Vr),iB=zn(hr),uB=st(un),fM={reflectSymbol:function(){return"shell"}},cB=ai()(fM)(qa),af=sM($o),sB=Os(LS),lM=d_(),fB=lM({reflectSymbol:function(){return"feed"}})(gf),lB=p1(Nm)(Uw(os)),_B=lM(fM)(qa),pB=IE(os),dB=st(vn),vB=function(){function e(){}return e.value=new e,e}(),_M=function(){return Ht.value}(),mB=function(e){var t=function(n){return new TE(n,tB)};return rB(nB(aB))(function(){return oB(iB)(function(n){return uB(cB(_M)(void 0)(t(function(){return n?"top loading/unloading enabled":"top loading/unloading disabled"}())))})})},hB=function(){return Ht.value}(),gB=function(e){var t={init:Ch(sE(!1)),query:function(n){return Ch(si(n))},shell:void 0};return Pr([yn(af(Hu(fy))(function(){return dy(py)}))])([ii([xm([sB("type")(fl.value),fT(ge(vB.value))]),Vi("enable top loading/unloading")]),Pr([yn(af(Gn(Xe(10)))(function(){return af(ro(Xe(10)))(function(){return af(to(Xe(400)))(function(){return af(ia(Xe(1200)))(function(){return iy(Mi)})})})}))])([fB(hB)(e)(lB)(function(){var n=l1(150);return{initialElement:n.initialElement,pageSize:n.pageSize,hiddenPages:n.hiddenPages,preloadedPages:n.preloadedPages,preloadMillis:n.preloadMillis,enableTop:e}}())]),_B(_M)(void 0)(pB)(t)])},DB=function(){return On({initialState:ge(!1),render:gB,eval:Hn({handleQuery:gr.handleQuery,receive:gr.receive,initialize:gr.initialize,finalize:gr.finalize,handleAction:mB})})}(),pM=uT(Y(Wt)(cT)(function(e){return dB(cM(DB)(void 0)(e))}));pM();
</script>
  </body>
</html>
