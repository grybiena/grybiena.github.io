<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>infinite scroll test</title>
  </head>
  <body>
   <script>var ZM=Object.create;var MD=Object.defineProperty;var eF=Object.getOwnPropertyDescriptor;var tF=Object.getOwnPropertyNames;var rF=Object.getPrototypeOf,nF=Object.prototype.hasOwnProperty;var Sf=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var aF=(e,t,n,f)=>{if(t&&typeof t=="object"||typeof t=="function")for(let _ of tF(t))!nF.call(e,_)&&_!==n&&MD(e,_,{get:()=>t[_],enumerable:!(f=eF(t,_))||f.enumerable});return e};var wf=(e,t,n)=>(n=e!=null?ZM(rF(e)):{},aF(t||!e||!e.__esModule?MD(n,"default",{value:e,enumerable:!0}):n,e));var mE=Sf((rp,gg)=>{(function(e,t){typeof rp=="object"&&typeof gg=="object"?gg.exports=t():typeof define=="function"&&define.amd?define([],t):typeof rp=="object"?rp.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let f=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(f._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,f=n._renderService.dimensions;if(f.css.cell.width===0||f.css.cell.height===0)return;let _=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(r.getPropertyValue("height")),c=Math.max(0,parseInt(r.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),u=o-(parseInt(l.getPropertyValue("padding-top"))+parseInt(l.getPropertyValue("padding-bottom"))),v=c-(parseInt(l.getPropertyValue("padding-right"))+parseInt(l.getPropertyValue("padding-left")))-_;return{cols:Math.max(2,Math.floor(v/f.css.cell.width)),rows:Math.max(1,Math.floor(u/f.css.cell.height))}}}})(),e})())});var gE=Sf((ap,Dg)=>{(function(e,t){typeof ap=="object"&&typeof Dg=="object"?Dg.exports=t():typeof define=="function"&&define.amd?define([],t):typeof ap=="object"?ap.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(_,r,o){var c=this&&this.__decorate||function(w,m,y,M){var S,T=arguments.length,L=T<3?m:M===null?M=Object.getOwnPropertyDescriptor(m,y):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(w,m,y,M);else for(var I=w.length-1;I>=0;I--)(S=w[I])&&(L=(T<3?S(L):T>3?S(m,y,L):S(m,y))||L);return T>3&&L&&Object.defineProperty(m,y,L),L};Object.defineProperty(r,"__esModule",{value:!0}),r.GlyphRenderer=void 0;let l=o(374),u=o(509),v=o(855),h=o(859),g=o(776),d=o(381),a=11,i=a*Float32Array.BYTES_PER_ELEMENT,s,p=0,D=0,C=0;class b extends h.Disposable{constructor(m,y,M){super(),this._terminal=m,this._gl=y,this._dimensions=M,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let S=this._gl;u.TextureAtlas.maxAtlasPages===void 0&&(u.TextureAtlas.maxAtlasPages=Math.min(32,(0,l.throwIfFalsy)(S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS))),u.TextureAtlas.maxTextureSize=(0,l.throwIfFalsy)(S.getParameter(S.MAX_TEXTURE_SIZE))),this._program=(0,l.throwIfFalsy)((0,d.createProgram)(S,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(W){let E="";for(let A=1;A<W;A++)E+=` else if (v_texpage == ${A}) { outColor = texture(u_texture[${A}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${W}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${E}
}`}(u.TextureAtlas.maxAtlasPages))),this.register((0,h.toDisposable)(()=>S.deleteProgram(this._program))),this._projectionLocation=(0,l.throwIfFalsy)(S.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,l.throwIfFalsy)(S.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,l.throwIfFalsy)(S.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=S.createVertexArray(),S.bindVertexArray(this._vertexArrayObject);let T=new Float32Array([0,0,1,0,0,1,1,1]),L=S.createBuffer();this.register((0,h.toDisposable)(()=>S.deleteBuffer(L))),S.bindBuffer(S.ARRAY_BUFFER,L),S.bufferData(S.ARRAY_BUFFER,T,S.STATIC_DRAW),S.enableVertexAttribArray(0),S.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let I=new Uint8Array([0,1,2,3]),R=S.createBuffer();this.register((0,h.toDisposable)(()=>S.deleteBuffer(R))),S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,R),S.bufferData(S.ELEMENT_ARRAY_BUFFER,I,S.STATIC_DRAW),this._attributesBuffer=(0,l.throwIfFalsy)(S.createBuffer()),this.register((0,h.toDisposable)(()=>S.deleteBuffer(this._attributesBuffer))),S.bindBuffer(S.ARRAY_BUFFER,this._attributesBuffer),S.enableVertexAttribArray(2),S.vertexAttribPointer(2,2,S.FLOAT,!1,i,0),S.vertexAttribDivisor(2,1),S.enableVertexAttribArray(3),S.vertexAttribPointer(3,2,S.FLOAT,!1,i,2*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(3,1),S.enableVertexAttribArray(4),S.vertexAttribPointer(4,1,S.FLOAT,!1,i,4*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(4,1),S.enableVertexAttribArray(5),S.vertexAttribPointer(5,2,S.FLOAT,!1,i,5*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(5,1),S.enableVertexAttribArray(6),S.vertexAttribPointer(6,2,S.FLOAT,!1,i,7*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(6,1),S.enableVertexAttribArray(1),S.vertexAttribPointer(1,2,S.FLOAT,!1,i,9*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(1,1),S.useProgram(this._program);let P=new Int32Array(u.TextureAtlas.maxAtlasPages);for(let W=0;W<u.TextureAtlas.maxAtlasPages;W++)P[W]=W;S.uniform1iv(this._textureLocation,P),S.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),this._atlasTextures=[];for(let W=0;W<u.TextureAtlas.maxAtlasPages;W++){let E=new d.GLTexture((0,l.throwIfFalsy)(S.createTexture()));this.register((0,h.toDisposable)(()=>S.deleteTexture(E.texture))),S.activeTexture(S.TEXTURE0+W),S.bindTexture(S.TEXTURE_2D,E.texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[W]=E}S.enable(S.BLEND),S.blendFunc(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(m,y,M,S,T,L,I,R){this._updateCell(this._vertices.attributes,m,y,M,S,T,L,I,R)}_updateCell(m,y,M,S,T,L,I,R,P){p=(M*this._terminal.cols+y)*a,S!==v.NULL_CELL_CODE&&S!==void 0?this._atlas&&(s=R&&R.length>1?this._atlas.getRasterizedGlyphCombinedChar(R,T,L,I,!1):this._atlas.getRasterizedGlyph(S,T,L,I,!1),D=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),T!==P&&s.offset.x>D?(C=s.offset.x-D,m[p]=-(s.offset.x-C)+this._dimensions.device.char.left,m[p+1]=-s.offset.y+this._dimensions.device.char.top,m[p+2]=(s.size.x-C)/this._dimensions.device.canvas.width,m[p+3]=s.size.y/this._dimensions.device.canvas.height,m[p+4]=s.texturePage,m[p+5]=s.texturePositionClipSpace.x+C/this._atlas.pages[s.texturePage].canvas.width,m[p+6]=s.texturePositionClipSpace.y,m[p+7]=s.sizeClipSpace.x-C/this._atlas.pages[s.texturePage].canvas.width,m[p+8]=s.sizeClipSpace.y):(m[p]=-s.offset.x+this._dimensions.device.char.left,m[p+1]=-s.offset.y+this._dimensions.device.char.top,m[p+2]=s.size.x/this._dimensions.device.canvas.width,m[p+3]=s.size.y/this._dimensions.device.canvas.height,m[p+4]=s.texturePage,m[p+5]=s.texturePositionClipSpace.x,m[p+6]=s.texturePositionClipSpace.y,m[p+7]=s.sizeClipSpace.x,m[p+8]=s.sizeClipSpace.y)):m.fill(0,p,p+a-1-2)}clear(){let m=this._terminal,y=m.cols*m.rows*a;this._vertices.count!==y?this._vertices.attributes=new Float32Array(y):this._vertices.attributes.fill(0);let M=0;for(;M<this._vertices.attributesBuffers.length;M++)this._vertices.count!==y?this._vertices.attributesBuffers[M]=new Float32Array(y):this._vertices.attributesBuffers[M].fill(0);this._vertices.count=y,M=0;for(let S=0;S<m.rows;S++)for(let T=0;T<m.cols;T++)this._vertices.attributes[M+9]=T/m.cols,this._vertices.attributes[M+10]=S/m.rows,M+=a}handleResize(){let m=this._gl;m.useProgram(this._program),m.viewport(0,0,m.canvas.width,m.canvas.height),m.uniform2f(this._resolutionLocation,m.canvas.width,m.canvas.height),this.clear()}render(m){if(!this._atlas)return;let y=this._gl;y.useProgram(this._program),y.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let M=this._vertices.attributesBuffers[this._activeBuffer],S=0;for(let T=0;T<m.lineLengths.length;T++){let L=T*this._terminal.cols*a,I=this._vertices.attributes.subarray(L,L+m.lineLengths[T]*a);M.set(I,S),S+=I.length}y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.bufferData(y.ARRAY_BUFFER,M.subarray(0,S),y.STREAM_DRAW);for(let T=0;T<this._atlas.pages.length;T++)this._atlas.pages[T].version!==this._atlasTextures[T].version&&this._bindAtlasPageTexture(y,this._atlas,T);y.drawElementsInstanced(y.TRIANGLE_STRIP,4,y.UNSIGNED_BYTE,0,S/a)}setAtlas(m){this._atlas=m;for(let y of this._atlasTextures)y.version=-1}_bindAtlasPageTexture(m,y,M){m.activeTexture(m.TEXTURE0+M),m.bindTexture(m.TEXTURE_2D,this._atlasTextures[M].texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,y.pages[M].canvas),m.generateMipmap(m.TEXTURE_2D),this._atlasTextures[M].version=y.pages[M].version}setDimensions(m){this._dimensions=m}}r.GlyphRenderer=b,c([g.traceCall],b.prototype,"updateCell",null)},742:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RectangleRenderer=void 0;let c=o(374),l=o(859),u=o(310),v=o(381),h=8*Float32Array.BYTES_PER_ELEMENT;class g{constructor(){this.attributes=new Float32Array(160),this.count=0}}let d=0,a=0,i=0,s=0,p=0,D=0,C=0;class b extends l.Disposable{constructor(m,y,M,S){super(),this._terminal=m,this._gl=y,this._dimensions=M,this._themeService=S,this._vertices=new g,this._verticesCursor=new g;let T=this._gl;this._program=(0,c.throwIfFalsy)((0,v.createProgram)(T,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,l.toDisposable)(()=>T.deleteProgram(this._program))),this._projectionLocation=(0,c.throwIfFalsy)(T.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=T.createVertexArray(),T.bindVertexArray(this._vertexArrayObject);let L=new Float32Array([0,0,1,0,0,1,1,1]),I=T.createBuffer();this.register((0,l.toDisposable)(()=>T.deleteBuffer(I))),T.bindBuffer(T.ARRAY_BUFFER,I),T.bufferData(T.ARRAY_BUFFER,L,T.STATIC_DRAW),T.enableVertexAttribArray(3),T.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let R=new Uint8Array([0,1,2,3]),P=T.createBuffer();this.register((0,l.toDisposable)(()=>T.deleteBuffer(P))),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,P),T.bufferData(T.ELEMENT_ARRAY_BUFFER,R,T.STATIC_DRAW),this._attributesBuffer=(0,c.throwIfFalsy)(T.createBuffer()),this.register((0,l.toDisposable)(()=>T.deleteBuffer(this._attributesBuffer))),T.bindBuffer(T.ARRAY_BUFFER,this._attributesBuffer),T.enableVertexAttribArray(0),T.vertexAttribPointer(0,2,T.FLOAT,!1,h,0),T.vertexAttribDivisor(0,1),T.enableVertexAttribArray(1),T.vertexAttribPointer(1,2,T.FLOAT,!1,h,2*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(1,1),T.enableVertexAttribArray(2),T.vertexAttribPointer(2,4,T.FLOAT,!1,h,4*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(2,1),this._updateCachedColors(S.colors),this.register(this._themeService.onChangeColors(W=>{this._updateCachedColors(W),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(m){let y=this._gl;y.useProgram(this._program),y.bindVertexArray(this._vertexArrayObject),y.uniformMatrix4fv(this._projectionLocation,!1,v.PROJECTION_MATRIX),y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.bufferData(y.ARRAY_BUFFER,m.attributes,y.DYNAMIC_DRAW),y.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,y.UNSIGNED_BYTE,0,m.count)}handleResize(){this._updateViewportRectangle()}setDimensions(m){this._dimensions=m}_updateCachedColors(m){this._bgFloat=this._colorToFloat32Array(m.background),this._cursorFloat=this._colorToFloat32Array(m.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(m){let y=this._terminal,M=this._vertices,S,T,L,I,R,P,W,E,A,x,H,U=1;for(S=0;S<y.rows;S++){for(L=-1,I=0,R=0,P=!1,T=0;T<y.cols;T++)W=(S*y.cols+T)*u.RENDER_MODEL_INDICIES_PER_CELL,E=m.cells[W+u.RENDER_MODEL_BG_OFFSET],A=m.cells[W+u.RENDER_MODEL_FG_OFFSET],x=!!(67108864&A),(E!==I||A!==R&&(P||x))&&((I!==0||P&&R!==0)&&(H=8*U++,this._updateRectangle(M,H,R,I,L,T,S)),L=T,I=E,R=A,P=x);(I!==0||P&&R!==0)&&(H=8*U++,this._updateRectangle(M,H,R,I,L,y.cols,S))}M.count=U}updateCursor(m){let y=this._verticesCursor,M=m.cursor;if(!M||M.style==="block")return void(y.count=0);let S,T=0;M.style!=="bar"&&M.style!=="outline"||(S=8*T++,this._addRectangleFloat(y.attributes,S,M.x*this._dimensions.device.cell.width,M.y*this._dimensions.device.cell.height,M.style==="bar"?M.dpr*M.cursorWidth:M.dpr,this._dimensions.device.cell.height,this._cursorFloat)),M.style!=="underline"&&M.style!=="outline"||(S=8*T++,this._addRectangleFloat(y.attributes,S,M.x*this._dimensions.device.cell.width,(M.y+1)*this._dimensions.device.cell.height-M.dpr,M.width*this._dimensions.device.cell.width,M.dpr,this._cursorFloat)),M.style==="outline"&&(S=8*T++,this._addRectangleFloat(y.attributes,S,M.x*this._dimensions.device.cell.width,M.y*this._dimensions.device.cell.height,M.width*this._dimensions.device.cell.width,M.dpr,this._cursorFloat),S=8*T++,this._addRectangleFloat(y.attributes,S,(M.x+M.width)*this._dimensions.device.cell.width-M.dpr,M.y*this._dimensions.device.cell.height,M.dpr,this._dimensions.device.cell.height,this._cursorFloat)),y.count=T}_updateRectangle(m,y,M,S,T,L,I){if(67108864&M)switch(50331648&M){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&M].rgba;break;case 50331648:d=(16777215&M)<<8;break;default:d=this._themeService.colors.foreground.rgba}else switch(50331648&S){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&S].rgba;break;case 50331648:d=(16777215&S)<<8;break;default:d=this._themeService.colors.background.rgba}m.attributes.length<y+4&&(m.attributes=(0,v.expandFloat32Array)(m.attributes,this._terminal.rows*this._terminal.cols*8)),a=T*this._dimensions.device.cell.width,i=I*this._dimensions.device.cell.height,s=(d>>24&255)/255,p=(d>>16&255)/255,D=(d>>8&255)/255,C=1,this._addRectangle(m.attributes,y,a,i,(L-T)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,s,p,D,C)}_addRectangle(m,y,M,S,T,L,I,R,P,W){m[y]=M/this._dimensions.device.canvas.width,m[y+1]=S/this._dimensions.device.canvas.height,m[y+2]=T/this._dimensions.device.canvas.width,m[y+3]=L/this._dimensions.device.canvas.height,m[y+4]=I,m[y+5]=R,m[y+6]=P,m[y+7]=W}_addRectangleFloat(m,y,M,S,T,L,I){m[y]=M/this._dimensions.device.canvas.width,m[y+1]=S/this._dimensions.device.canvas.height,m[y+2]=T/this._dimensions.device.canvas.width,m[y+3]=L/this._dimensions.device.canvas.height,m[y+4]=I[0],m[y+5]=I[1],m[y+6]=I[2],m[y+7]=I[3]}_colorToFloat32Array(m){return new Float32Array([(m.rgba>>24&255)/255,(m.rgba>>16&255)/255,(m.rgba>>8&255)/255,(255&m.rgba)/255])}}r.RectangleRenderer=b},310:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModel=r.COMBINED_CHAR_BIT_MASK=r.RENDER_MODEL_EXT_OFFSET=r.RENDER_MODEL_FG_OFFSET=r.RENDER_MODEL_BG_OFFSET=r.RENDER_MODEL_INDICIES_PER_CELL=void 0;let c=o(296);r.RENDER_MODEL_INDICIES_PER_CELL=4,r.RENDER_MODEL_BG_OFFSET=1,r.RENDER_MODEL_FG_OFFSET=2,r.RENDER_MODEL_EXT_OFFSET=3,r.COMBINED_CHAR_BIT_MASK=2147483648,r.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,c.createSelectionRenderModel)()}resize(l,u){let v=l*u*r.RENDER_MODEL_INDICIES_PER_CELL;v!==this.cells.length&&(this.cells=new Uint32Array(v),this.lineLengths=new Uint32Array(u))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(_,r,o){var c=this&&this.__decorate||function(L,I,R,P){var W,E=arguments.length,A=E<3?I:P===null?P=Object.getOwnPropertyDescriptor(I,R):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(L,I,R,P);else for(var x=L.length-1;x>=0;x--)(W=L[x])&&(A=(E<3?W(A):E>3?W(I,R,A):W(I,R))||A);return E>3&&A&&Object.defineProperty(I,R,A),A};Object.defineProperty(r,"__esModule",{value:!0}),r.JoinedCellData=r.WebglRenderer=void 0;let l=o(820),u=o(274),v=o(627),h=o(457),g=o(56),d=o(374),a=o(345),i=o(859),s=o(147),p=o(782),D=o(855),C=o(776),b=o(965),w=o(742),m=o(310),y=o(733);class M extends i.Disposable{constructor(I,R,P,W,E,A,x,H,U){super(),this._terminal=I,this._characterJoinerService=R,this._charSizeService=P,this._coreBrowserService=W,this._coreService=E,this._decorationService=A,this._optionsService=x,this._themeService=H,this._cursorBlinkStateManager=new i.MutableDisposable,this._charAtlasDisposable=this.register(new i.MutableDisposable),this._model=new m.RenderModel,this._workCell=new p.CellData,this._rectangleRenderer=this.register(new i.MutableDisposable),this._glyphRenderer=this.register(new i.MutableDisposable),this._onChangeTextureAtlas=this.register(new a.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new a.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new a.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new a.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new a.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new u.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new y.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,x,this._themeService)],this.dimensions=(0,d.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(x.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let re={antialias:!1,depth:!1,preserveDrawingBuffer:U};if(this._gl=this._canvas.getContext("webgl2",re),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,l.addDisposableDomListener)(this._canvas,"webglcontextlost",oe=>{console.log("webglcontextlost event received"),oe.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(oe)},3e3)})),this.register((0,l.addDisposableDomListener)(this._canvas,"webglcontextrestored",oe=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,v.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,g.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(oe,V)=>this._setCanvasDevicePixelDimensions(oe,V))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,i.toDisposable)(()=>{var oe;for(let V of this._renderLayers)V.dispose();(oe=this._canvas.parentElement)===null||oe===void 0||oe.removeChild(this._canvas),(0,v.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var I;return(I=this._charAtlas)===null||I===void 0?void 0:I.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(I,R){var P,W,E,A;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let x of this._renderLayers)x.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(P=this._rectangleRenderer.value)===null||P===void 0||P.setDimensions(this.dimensions),(W=this._rectangleRenderer.value)===null||W===void 0||W.handleResize(),(E=this._glyphRenderer.value)===null||E===void 0||E.setDimensions(this.dimensions),(A=this._glyphRenderer.value)===null||A===void 0||A.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var I;for(let R of this._renderLayers)R.handleBlur(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.pause(),this._requestRedrawViewport()}handleFocus(){var I;for(let R of this._renderLayers)R.handleFocus(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.resume(),this._requestRedrawViewport()}handleSelectionChanged(I,R,P){for(let W of this._renderLayers)W.handleSelectionChanged(this._terminal,I,R,P);this._model.selection.update(this._terminal,I,R,P),this._requestRedrawViewport()}handleCursorMove(){var I;for(let R of this._renderLayers)R.handleCursorMove(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new w.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new b.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var I;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let R=(0,v.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==R&&(this._onChangeTextureAtlas.fire(R.pages[0].canvas),this._charAtlasDisposable.value=(0,i.getDisposeArrayDisposable)([(0,a.forwardEvent)(R.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,a.forwardEvent)(R.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=R,this._charAtlas.warmUp(),(I=this._glyphRenderer.value)===null||I===void 0||I.setAtlas(this._charAtlas)}_clearModel(I){var R;this._model.clear(),I&&((R=this._glyphRenderer.value)===null||R===void 0||R.clear())}clearTextureAtlas(){var I;(I=this._charAtlas)===null||I===void 0||I.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var I;this._clearModel(!0);for(let R of this._renderLayers)R.reset(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(I){return-1}deregisterCharacterJoiner(I){return!1}renderRows(I,R){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let P of this._renderLayers)P.handleGridChanged(this._terminal,I,R);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(I,R),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new h.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(I,R){let P=this._core,W,E,A,x,H,U,re,oe,V,fe,F,B,q,k=this._workCell;I=T(I,P.rows-1,0),R=T(R,P.rows-1,0);let de=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,J=Math.min(this._terminal.buffer.active.cursorX,P.cols-1),Fe=-1,et=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let Ne=!1;for(E=I;E<=R;E++)for(A=E+P.buffer.ydisp,x=P.buffer.lines.get(A),this._model.lineLengths[E]=0,H=this._characterJoinerService.getJoinedCharacters(A),B=0;B<P.cols;B++)if(W=this._cellColorResolver.result.bg,x.loadCell(B,k),B===0&&(W=this._cellColorResolver.result.bg),U=!1,re=B,H.length>0&&B===H[0][0]&&(U=!0,oe=H.shift(),k=new S(k,x.translateToString(!0,oe[0],oe[1]),oe[1]-oe[0]),re=oe[1]-1),V=k.getChars(),fe=k.getCode(),F=(E*P.cols+B)*m.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(k,B,A),et&&A===de&&(B===J&&(this._model.cursor={x:J,y:this._terminal.buffer.active.cursorY,width:k.getWidth(),style:this._coreBrowserService.isFocused?P.options.cursorStyle||"block":P.options.cursorInactiveStyle,cursorWidth:P.options.cursorWidth,dpr:this._devicePixelRatio},Fe=J+k.getWidth()-1),B>=J&&B<=Fe&&(this._coreBrowserService.isFocused&&(P.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&P.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),fe!==D.NULL_CELL_CODE&&(this._model.lineLengths[E]=B+1),(this._model.cells[F]!==fe||this._model.cells[F+m.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[F+m.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[F+m.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(Ne=!0,V.length>1&&(fe|=m.COMBINED_CHAR_BIT_MASK),this._model.cells[F]=fe,this._model.cells[F+m.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[F+m.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[F+m.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(B,E,fe,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,V,W),U))for(k=this._workCell,B++;B<re;B++)q=(E*P.cols+B)*m.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(B,E,D.NULL_CELL_CODE,0,0,0,D.NULL_CELL_CHAR,0),this._model.cells[q]=D.NULL_CELL_CODE,this._model.cells[q+m.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[q+m.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[q+m.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;Ne&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(I,R){this._canvas.width===I&&this._canvas.height===R||(this._canvas.width=I,this._canvas.height=R,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let I=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:I,end:I})}}r.WebglRenderer=M,c([C.traceCall],M.prototype,"renderRows",null);class S extends s.AttributeData{constructor(I,R,P){super(),this.content=0,this.combinedData="",this.fg=I.fg,this.bg=I.bg,this.combinedData=R,this._width=P}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(I){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function T(L,I,R=0){return Math.max(Math.min(L,I),R)}r.JoinedCellData=S},381:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GLTexture=r.expandFloat32Array=r.createShader=r.createProgram=r.PROJECTION_MATRIX=void 0;let c=o(374);function l(u,v,h){let g=(0,c.throwIfFalsy)(u.createShader(v));if(u.shaderSource(g,h),u.compileShader(g),u.getShaderParameter(g,u.COMPILE_STATUS))return g;console.error(u.getShaderInfoLog(g)),u.deleteShader(g)}r.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),r.createProgram=function(u,v,h){let g=(0,c.throwIfFalsy)(u.createProgram());if(u.attachShader(g,(0,c.throwIfFalsy)(l(u,u.VERTEX_SHADER,v))),u.attachShader(g,(0,c.throwIfFalsy)(l(u,u.FRAGMENT_SHADER,h))),u.linkProgram(g),u.getProgramParameter(g,u.LINK_STATUS))return g;console.error(u.getProgramInfoLog(g)),u.deleteProgram(g)},r.createShader=l,r.expandFloat32Array=function(u,v){let h=Math.min(2*u.length,v),g=new Float32Array(h);for(let d=0;d<u.length;d++)g[d]=u[d];return g},r.GLTexture=class{constructor(u){this.texture=u,this.version=-1}}},592:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseRenderLayer=void 0;let c=o(627),l=o(237),u=o(374),v=o(859);class h extends v.Disposable{constructor(d,a,i,s,p,D,C,b){super(),this._container=a,this._alpha=p,this._coreBrowserService=D,this._optionsService=C,this._themeService=b,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${i}-layer`),this._canvas.style.zIndex=s.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(w=>{this._refreshCharAtlas(d,w),this.reset(d)})),this.register((0,v.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,u.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(d){}handleFocus(d){}handleCursorMove(d){}handleGridChanged(d,a,i){}handleSelectionChanged(d,a,i,s=!1){}_setTransparency(d,a){if(a===this._alpha)return;let i=this._canvas;this._alpha=a,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,i),this._refreshCharAtlas(d,this._themeService.colors),this.handleGridChanged(d,0,d.rows-1)}_refreshCharAtlas(d,a){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,c.acquireTextureAtlas)(d,this._optionsService.rawOptions,a,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(d,a){this._deviceCellWidth=a.device.cell.width,this._deviceCellHeight=a.device.cell.height,this._deviceCharWidth=a.device.char.width,this._deviceCharHeight=a.device.char.height,this._deviceCharLeft=a.device.char.left,this._deviceCharTop=a.device.char.top,this._canvas.width=a.device.canvas.width,this._canvas.height=a.device.canvas.height,this._canvas.style.width=`${a.css.canvas.width}px`,this._canvas.style.height=`${a.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(d,this._themeService.colors)}_fillBottomLineAtCells(d,a,i=1){this._ctx.fillRect(d*this._deviceCellWidth,(a+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,i*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(d,a,i,s){this._alpha?this._ctx.clearRect(d*this._deviceCellWidth,a*this._deviceCellHeight,i*this._deviceCellWidth,s*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(d*this._deviceCellWidth,a*this._deviceCellHeight,i*this._deviceCellWidth,s*this._deviceCellHeight))}_fillCharTrueColor(d,a,i,s){this._ctx.font=this._getFont(d,!1,!1),this._ctx.textBaseline=l.TEXT_BASELINE,this._clipCell(i,s,a.getWidth()),this._ctx.fillText(a.getChars(),i*this._deviceCellWidth+this._deviceCharLeft,s*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(d,a,i){this._ctx.beginPath(),this._ctx.rect(d*this._deviceCellWidth,a*this._deviceCellHeight,i*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(d,a,i){return`${i?"italic":""} ${a?d.options.fontWeightBold:d.options.fontWeight} ${d.options.fontSize*this._coreBrowserService.dpr}px ${d.options.fontFamily}`}}r.BaseRenderLayer=h},733:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkRenderLayer=void 0;let c=o(197),l=o(237),u=o(592);class v extends u.BaseRenderLayer{constructor(g,d,a,i,s,p,D){super(a,g,"link",d,!0,s,p,D),this.register(i.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(i.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(g,d){super.resize(g,d),this._state=void 0}reset(g){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let g=this._state.y2-this._state.y1-1;g>0&&this._clearCells(0,this._state.y1+1,this._state.cols,g),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(g){if(g.fg===l.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:g.fg!==void 0&&(0,c.is256Color)(g.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[g.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,g.y1===g.y2)this._fillBottomLineAtCells(g.x1,g.y1,g.x2-g.x1);else{this._fillBottomLineAtCells(g.x1,g.y1,g.cols-g.x1);for(let d=g.y1+1;d<g.y2;d++)this._fillBottomLineAtCells(0,d,g.cols);this._fillBottomLineAtCells(0,g.y2,g.x2)}this._state=g}_handleHideLinkUnderline(g){this._clearCurrentLink()}}r.LinkRenderLayer=v},820:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(o,c,l,u){o.addEventListener(c,l,u);let v=!1;return{dispose:()=>{v||(v=!0,o.removeEventListener(c,l,u))}}}},274:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellColorResolver=void 0;let o,c=0,l=0,u=!1,v=!1,h=!1;r.CellColorResolver=class{constructor(g,d,a,i,s){this._terminal=g,this._selectionRenderModel=d,this._decorationService=a,this._coreBrowserService=i,this._themeService=s,this.result={fg:0,bg:0,ext:0}}resolve(g,d,a){this.result.bg=g.bg,this.result.fg=g.fg,this.result.ext=268435456&g.bg?g.extended.ext:0,l=0,c=0,v=!1,u=!1,h=!1,o=this._themeService.colors,this._decorationService.forEachDecorationAtCell(d,a,"bottom",i=>{i.backgroundColorRGB&&(l=i.backgroundColorRGB.rgba>>8&16777215,v=!0),i.foregroundColorRGB&&(c=i.foregroundColorRGB.rgba>>8&16777215,u=!0)}),h=this._selectionRenderModel.isCellSelected(this._terminal,d,a),h&&(l=(this._coreBrowserService.isFocused?o.selectionBackgroundOpaque:o.selectionInactiveBackgroundOpaque).rgba>>8&16777215,v=!0,o.selectionForeground&&(c=o.selectionForeground.rgba>>8&16777215,u=!0)),this._decorationService.forEachDecorationAtCell(d,a,"top",i=>{i.backgroundColorRGB&&(l=i.backgroundColorRGB.rgba>>8&16777215,v=!0),i.foregroundColorRGB&&(c=i.foregroundColorRGB.rgba>>8&16777215,u=!0)}),v&&(l=h?-16777216&g.bg&-134217729|l|50331648:-16777216&g.bg|l|50331648),u&&(c=-16777216&g.fg&-67108865|c|50331648),67108864&this.result.fg&&(v&&!u&&(c=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&o.background.rgba>>8|50331648,u=!0),!v&&u&&(l=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&o.foreground.rgba>>8|50331648,v=!0)),o=void 0,this.result.bg=v?l:this.result.bg,this.result.fg=u?c:this.result.fg}}},627:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.removeTerminalFromCache=r.acquireTextureAtlas=void 0;let c=o(509),l=o(197),u=[];r.acquireTextureAtlas=function(v,h,g,d,a,i,s,p){let D=(0,l.generateConfig)(d,a,i,s,h,g,p);for(let w=0;w<u.length;w++){let m=u[w],y=m.ownedBy.indexOf(v);if(y>=0){if((0,l.configEquals)(m.config,D))return m.atlas;m.ownedBy.length===1?(m.atlas.dispose(),u.splice(w,1)):m.ownedBy.splice(y,1);break}}for(let w=0;w<u.length;w++){let m=u[w];if((0,l.configEquals)(m.config,D))return m.ownedBy.push(v),m.atlas}let C=v._core,b={atlas:new c.TextureAtlas(document,D,C.unicodeService),config:D,ownedBy:[v]};return u.push(b),b.atlas},r.removeTerminalFromCache=function(v){for(let h=0;h<u.length;h++){let g=u[h].ownedBy.indexOf(v);if(g!==-1){u[h].ownedBy.length===1?(u[h].atlas.dispose(),u.splice(h,1)):u[h].ownedBy.splice(g,1);break}}}},197:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.is256Color=r.configEquals=r.generateConfig=void 0;let c=o(160);r.generateConfig=function(l,u,v,h,g,d,a){let i={foreground:d.foreground,background:d.background,cursor:c.NULL_COLOR,cursorAccent:c.NULL_COLOR,selectionForeground:c.NULL_COLOR,selectionBackgroundTransparent:c.NULL_COLOR,selectionBackgroundOpaque:c.NULL_COLOR,selectionInactiveBackgroundTransparent:c.NULL_COLOR,selectionInactiveBackgroundOpaque:c.NULL_COLOR,ansi:d.ansi.slice(),contrastCache:d.contrastCache,halfContrastCache:d.halfContrastCache};return{customGlyphs:g.customGlyphs,devicePixelRatio:a,letterSpacing:g.letterSpacing,lineHeight:g.lineHeight,deviceCellWidth:l,deviceCellHeight:u,deviceCharWidth:v,deviceCharHeight:h,fontFamily:g.fontFamily,fontSize:g.fontSize,fontWeight:g.fontWeight,fontWeightBold:g.fontWeightBold,allowTransparency:g.allowTransparency,drawBoldTextInBrightColors:g.drawBoldTextInBrightColors,minimumContrastRatio:g.minimumContrastRatio,colors:i}},r.configEquals=function(l,u){for(let v=0;v<l.colors.ansi.length;v++)if(l.colors.ansi[v].rgba!==u.colors.ansi[v].rgba)return!1;return l.devicePixelRatio===u.devicePixelRatio&&l.customGlyphs===u.customGlyphs&&l.lineHeight===u.lineHeight&&l.letterSpacing===u.letterSpacing&&l.fontFamily===u.fontFamily&&l.fontSize===u.fontSize&&l.fontWeight===u.fontWeight&&l.fontWeightBold===u.fontWeightBold&&l.allowTransparency===u.allowTransparency&&l.deviceCharWidth===u.deviceCharWidth&&l.deviceCharHeight===u.deviceCharHeight&&l.drawBoldTextInBrightColors===u.drawBoldTextInBrightColors&&l.minimumContrastRatio===u.minimumContrastRatio&&l.colors.foreground.rgba===u.colors.foreground.rgba&&l.colors.background.rgba===u.colors.background.rgba},r.is256Color=function(l){return(50331648&l)==16777216||(50331648&l)==33554432}},237:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;let c=o(399);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},457:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CursorBlinkStateManager=void 0,r.CursorBlinkStateManager=class{constructor(o,c){this._renderCallback=o,this._coreBrowserService=c,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let c=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,c>0)return void this._restartInterval(c)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let c=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(c)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tryDrawCustomChar=r.powerlineDefinitions=r.boxDrawingDefinitions=r.blockElementDefinitions=void 0;let c=o(374);r.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let l={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};r.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(d,a)=>`M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a}`},"\u2551":{1:(d,a)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2552":{1:(d,a)=>`M.5,1 L.5,${.5-a} L1,${.5-a} M.5,${.5+a} L1,${.5+a}`},"\u2553":{1:(d,a)=>`M${.5-d},1 L${.5-d},.5 L1,.5 M${.5+d},.5 L${.5+d},1`},"\u2554":{1:(d,a)=>`M1,${.5-a} L${.5-d},${.5-a} L${.5-d},1 M1,${.5+a} L${.5+d},${.5+a} L${.5+d},1`},"\u2555":{1:(d,a)=>`M0,${.5-a} L.5,${.5-a} L.5,1 M0,${.5+a} L.5,${.5+a}`},"\u2556":{1:(d,a)=>`M${.5+d},1 L${.5+d},.5 L0,.5 M${.5-d},.5 L${.5-d},1`},"\u2557":{1:(d,a)=>`M0,${.5+a} L${.5-d},${.5+a} L${.5-d},1 M0,${.5-a} L${.5+d},${.5-a} L${.5+d},1`},"\u2558":{1:(d,a)=>`M.5,0 L.5,${.5+a} L1,${.5+a} M.5,${.5-a} L1,${.5-a}`},"\u2559":{1:(d,a)=>`M1,.5 L${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u255A":{1:(d,a)=>`M1,${.5-a} L${.5+d},${.5-a} L${.5+d},0 M1,${.5+a} L${.5-d},${.5+a} L${.5-d},0`},"\u255B":{1:(d,a)=>`M0,${.5+a} L.5,${.5+a} L.5,0 M0,${.5-a} L.5,${.5-a}`},"\u255C":{1:(d,a)=>`M0,.5 L${.5+d},.5 L${.5+d},0 M${.5-d},.5 L${.5-d},0`},"\u255D":{1:(d,a)=>`M0,${.5-a} L${.5-d},${.5-a} L${.5-d},0 M0,${.5+a} L${.5+d},${.5+a} L${.5+d},0`},"\u255E":{1:(d,a)=>`M.5,0 L.5,1 M.5,${.5-a} L1,${.5-a} M.5,${.5+a} L1,${.5+a}`},"\u255F":{1:(d,a)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1 M${.5+d},.5 L1,.5`},"\u2560":{1:(d,a)=>`M${.5-d},0 L${.5-d},1 M1,${.5+a} L${.5+d},${.5+a} L${.5+d},1 M1,${.5-a} L${.5+d},${.5-a} L${.5+d},0`},"\u2561":{1:(d,a)=>`M.5,0 L.5,1 M0,${.5-a} L.5,${.5-a} M0,${.5+a} L.5,${.5+a}`},"\u2562":{1:(d,a)=>`M0,.5 L${.5-d},.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2563":{1:(d,a)=>`M${.5+d},0 L${.5+d},1 M0,${.5+a} L${.5-d},${.5+a} L${.5-d},1 M0,${.5-a} L${.5-d},${.5-a} L${.5-d},0`},"\u2564":{1:(d,a)=>`M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a} M.5,${.5+a} L.5,1`},"\u2565":{1:(d,a)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},1 M${.5+d},.5 L${.5+d},1`},"\u2566":{1:(d,a)=>`M0,${.5-a} L1,${.5-a} M0,${.5+a} L${.5-d},${.5+a} L${.5-d},1 M1,${.5+a} L${.5+d},${.5+a} L${.5+d},1`},"\u2567":{1:(d,a)=>`M.5,0 L.5,${.5-a} M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a}`},"\u2568":{1:(d,a)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u2569":{1:(d,a)=>`M0,${.5+a} L1,${.5+a} M0,${.5-a} L${.5-d},${.5-a} L${.5-d},0 M1,${.5-a} L${.5+d},${.5-a} L${.5+d},0`},"\u256A":{1:(d,a)=>`M.5,0 L.5,1 M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a}`},"\u256B":{1:(d,a)=>`M0,.5 L1,.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u256C":{1:(d,a)=>`M0,${.5+a} L${.5-d},${.5+a} L${.5-d},1 M1,${.5+a} L${.5+d},${.5+a} L${.5+d},1 M0,${.5-a} L${.5-d},${.5-a} L${.5-d},0 M1,${.5-a} L${.5+d},${.5-a} L${.5+d},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(d,a)=>`M.5,1 L.5,${.5+a/.15*.5} C.5,${.5+a/.15*.5},.5,.5,1,.5`},"\u256E":{1:(d,a)=>`M.5,1 L.5,${.5+a/.15*.5} C.5,${.5+a/.15*.5},.5,.5,0,.5`},"\u256F":{1:(d,a)=>`M.5,0 L.5,${.5-a/.15*.5} C.5,${.5-a/.15*.5},.5,.5,0,.5`},"\u2570":{1:(d,a)=>`M.5,0 L.5,${.5-a/.15*.5} C.5,${.5-a/.15*.5},.5,.5,1,.5`}},r.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},r.powerlineDefinitions["\uE0BB"]=r.powerlineDefinitions["\uE0BD"],r.powerlineDefinitions["\uE0BF"]=r.powerlineDefinitions["\uE0B9"],r.tryDrawCustomChar=function(d,a,i,s,p,D,C,b){let w=r.blockElementDefinitions[a];if(w)return function(S,T,L,I,R,P){for(let W=0;W<T.length;W++){let E=T[W],A=R/8,x=P/8;S.fillRect(L+E.x*A,I+E.y*x,E.w*A,E.h*x)}}(d,w,i,s,p,D),!0;let m=l[a];if(m)return function(S,T,L,I,R,P){let W=u.get(T);W||(W=new Map,u.set(T,W));let E=S.fillStyle;if(typeof E!="string")throw new Error(`Unexpected fillStyle type "${E}"`);let A=W.get(E);if(!A){let x=T[0].length,H=T.length,U=document.createElement("canvas");U.width=x,U.height=H;let re=(0,c.throwIfFalsy)(U.getContext("2d")),oe=new ImageData(x,H),V,fe,F,B;if(E.startsWith("#"))V=parseInt(E.slice(1,3),16),fe=parseInt(E.slice(3,5),16),F=parseInt(E.slice(5,7),16),B=E.length>7&&parseInt(E.slice(7,9),16)||1;else{if(!E.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${E}" when drawing pattern glyph`);[V,fe,F,B]=E.substring(5,E.length-1).split(",").map(q=>parseFloat(q))}for(let q=0;q<H;q++)for(let k=0;k<x;k++)oe.data[4*(q*x+k)]=V,oe.data[4*(q*x+k)+1]=fe,oe.data[4*(q*x+k)+2]=F,oe.data[4*(q*x+k)+3]=T[q][k]*(255*B);re.putImageData(oe,0,0),A=(0,c.throwIfFalsy)(S.createPattern(U,null)),W.set(E,A)}S.fillStyle=A,S.fillRect(L,I,R,P)}(d,m,i,s,p,D),!0;let y=r.boxDrawingDefinitions[a];if(y)return function(S,T,L,I,R,P,W){S.strokeStyle=S.fillStyle;for(let[E,A]of Object.entries(T)){let x;S.beginPath(),S.lineWidth=W*Number.parseInt(E),x=typeof A=="function"?A(.15,.15/P*R):A;for(let H of x.split(" ")){let U=H[0],re=h[U];if(!re){console.error(`Could not find drawing instructions for "${U}"`);continue}let oe=H.substring(1).split(",");oe[0]&&oe[1]&&re(S,g(oe,R,P,L,I,!0,W))}S.stroke(),S.closePath()}}(d,y,i,s,p,D,b),!0;let M=r.powerlineDefinitions[a];return!!M&&(function(S,T,L,I,R,P,W,E){var A,x;let H=new Path2D;H.rect(L,I,R,P),S.clip(H),S.beginPath();let U=W/12;S.lineWidth=E*U;for(let re of T.d.split(" ")){let oe=re[0],V=h[oe];if(!V){console.error(`Could not find drawing instructions for "${oe}"`);continue}let fe=re.substring(1).split(",");fe[0]&&fe[1]&&V(S,g(fe,R,P,L,I,!1,E,((A=T.leftPadding)!==null&&A!==void 0?A:0)*(U/2),((x=T.rightPadding)!==null&&x!==void 0?x:0)*(U/2)))}T.type===1?(S.strokeStyle=S.fillStyle,S.stroke()):S.fill(),S.closePath()}(d,M,i,s,p,D,C,b),!0)};let u=new Map;function v(d,a,i=0){return Math.max(Math.min(d,a),i)}let h={C:(d,a)=>d.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]),L:(d,a)=>d.lineTo(a[0],a[1]),M:(d,a)=>d.moveTo(a[0],a[1])};function g(d,a,i,s,p,D,C,b=0,w=0){let m=d.map(y=>parseFloat(y)||parseInt(y));if(m.length<2)throw new Error("Too few arguments for instruction");for(let y=0;y<m.length;y+=2)m[y]*=a-b*C-w*C,D&&m[y]!==0&&(m[y]=v(Math.round(m[y]+.5)-.5,a,0)),m[y]+=s+b*C;for(let y=1;y<m.length;y+=2)m[y]*=i,D&&m[y]!==0&&(m[y]=v(Math.round(m[y]+.5)-.5,i,0)),m[y]+=p;return m}},56:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.observeDevicePixelDimensions=void 0;let c=o(859);r.observeDevicePixelDimensions=function(l,u,v){let h=new u.ResizeObserver(g=>{let d=g.find(s=>s.target===l);if(!d)return;if(!("devicePixelContentBoxSize"in d))return h?.disconnect(),void(h=void 0);let a=d.devicePixelContentBoxSize[0].inlineSize,i=d.devicePixelContentBoxSize[0].blockSize;a>0&&i>0&&v(a,i)});try{h.observe(l,{box:["device-pixel-content-box"]})}catch{h.disconnect(),h=void 0}return(0,c.toDisposable)(()=>h?.disconnect())}},374:(_,r)=>{function o(c){return 57508<=c&&c<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},r.isPowerlineGlyph=o,r.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},r.excludeFromContrastRatioDemands=function(c){return o(c)||function(l){return 9472<=l&&l<=9631}(c)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(l,u,v,h=!1){if(this.selectionStart=u,this.selectionEnd=v,!u||!v||u[0]===v[0]&&u[1]===v[1])return void this.clear();let g=u[1]-l.buffer.active.viewportY,d=v[1]-l.buffer.active.viewportY,a=Math.max(g,0),i=Math.min(d,l.rows-1);a>=l.rows||i<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=h,this.viewportStartRow=g,this.viewportEndRow=d,this.viewportCappedStartRow=a,this.viewportCappedEndRow=i,this.startCol=u[0],this.endCol=v[0])}isCellSelected(l,u,v){return!!this.hasSelection&&(v-=l.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&v>=this.viewportCappedStartRow&&u<this.endCol&&v<=this.viewportCappedEndRow:u<this.startCol&&v>=this.viewportCappedStartRow&&u>=this.endCol&&v<=this.viewportCappedEndRow:v>this.viewportStartRow&&v<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&v===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportStartRow&&u>=this.startCol)}}r.createSelectionRenderModel=function(){return new o}},509:function(_,r,o){var c=this&&this.__decorate||function(M,S,T,L){var I,R=arguments.length,P=R<3?S:L===null?L=Object.getOwnPropertyDescriptor(S,T):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(M,S,T,L);else for(var W=M.length-1;W>=0;W--)(I=M[W])&&(P=(R<3?I(P):R>3?I(S,T,P):I(S,T))||P);return R>3&&P&&Object.defineProperty(S,T,P),P};Object.defineProperty(r,"__esModule",{value:!0}),r.TextureAtlas=void 0;let l=o(237),u=o(860),v=o(374),h=o(160),g=o(345),d=o(485),a=o(385),i=o(147),s=o(855),p=o(776),D={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class b{get pages(){return this._pages}constructor(S,T,L){this._document=S,this._config=T,this._unicodeService=L,this._didWarmUp=!1,this._cacheMap=new d.FourKeyMap,this._cacheMapCombined=new d.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new i.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new g.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new g.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=y(S,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,v.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let S of this.pages)S.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let S=new a.IdleTaskQueue;for(let T=33;T<126;T++)S.enqueue(()=>{if(!this._cacheMap.get(T,s.DEFAULT_COLOR,s.DEFAULT_COLOR,s.DEFAULT_EXT)){let L=this._drawToCache(T,s.DEFAULT_COLOR,s.DEFAULT_COLOR,s.DEFAULT_EXT);this._cacheMap.set(T,s.DEFAULT_COLOR,s.DEFAULT_COLOR,s.DEFAULT_EXT,L)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let S of this._pages)S.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(b.maxAtlasPages&&this._pages.length>=Math.max(4,b.maxAtlasPages)){let T=this._pages.filter(A=>2*A.canvas.width<=(b.maxTextureSize||4096)).sort((A,x)=>x.canvas.width!==A.canvas.width?x.canvas.width-A.canvas.width:x.percentageUsed-A.percentageUsed),L=-1,I=0;for(let A=0;A<T.length;A++)if(T[A].canvas.width!==I)L=A,I=T[A].canvas.width;else if(A-L==3)break;let R=T.slice(L,L+4),P=R.map(A=>A.glyphs[0].texturePage).sort((A,x)=>A>x?1:-1),W=this.pages.length-R.length,E=this._mergePages(R,W);E.version++;for(let A=P.length-1;A>=0;A--)this._deletePage(P[A]);this.pages.push(E),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(E.canvas)}let S=new w(this._document,this._textureSize);return this._pages.push(S),this._activePages.push(S),this._onAddTextureAtlasCanvas.fire(S.canvas),S}_mergePages(S,T){let L=2*S[0].canvas.width,I=new w(this._document,L,S);for(let[R,P]of S.entries()){let W=R*P.canvas.width%L,E=Math.floor(R/2)*P.canvas.height;I.ctx.drawImage(P.canvas,W,E);for(let x of P.glyphs)x.texturePage=T,x.sizeClipSpace.x=x.size.x/L,x.sizeClipSpace.y=x.size.y/L,x.texturePosition.x+=W,x.texturePosition.y+=E,x.texturePositionClipSpace.x=x.texturePosition.x/L,x.texturePositionClipSpace.y=x.texturePosition.y/L;this._onRemoveTextureAtlasCanvas.fire(P.canvas);let A=this._activePages.indexOf(P);A!==-1&&this._activePages.splice(A,1)}return I}_deletePage(S){this._pages.splice(S,1);for(let T=S;T<this._pages.length;T++){let L=this._pages[T];for(let I of L.glyphs)I.texturePage--;L.version++}}getRasterizedGlyphCombinedChar(S,T,L,I,R){return this._getFromCacheMap(this._cacheMapCombined,S,T,L,I,R)}getRasterizedGlyph(S,T,L,I,R){return this._getFromCacheMap(this._cacheMap,S,T,L,I,R)}_getFromCacheMap(S,T,L,I,R,P=!1){return C=S.get(T,L,I,R),C||(C=this._drawToCache(T,L,I,R,P),S.set(T,L,I,R,C)),C}_getColorFromAnsiIndex(S){if(S>=this._config.colors.ansi.length)throw new Error("No color found for idx "+S);return this._config.colors.ansi[S]}_getBackgroundColor(S,T,L,I){if(this._config.allowTransparency)return h.NULL_COLOR;let R;switch(S){case 16777216:case 33554432:R=this._getColorFromAnsiIndex(T);break;case 50331648:let P=i.AttributeData.toColorRGB(T);R=h.rgba.toColor(P[0],P[1],P[2]);break;default:R=L?h.color.opaque(this._config.colors.foreground):this._config.colors.background}return R}_getForegroundColor(S,T,L,I,R,P,W,E,A,x){let H=this._getMinimumContrastColor(S,T,L,I,R,P,!1,A,E,x);if(H)return H;let U;switch(R){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&A&&P<8&&(P+=8),U=this._getColorFromAnsiIndex(P);break;case 50331648:let re=i.AttributeData.toColorRGB(P);U=h.rgba.toColor(re[0],re[1],re[2]);break;default:U=W?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(U=h.color.opaque(U)),E&&(U=h.color.multiplyOpacity(U,l.DIM_OPACITY)),U}_resolveBackgroundRgba(S,T,L){switch(S){case 16777216:case 33554432:return this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return L?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(S,T,L,I){switch(S){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&I&&T<8&&(T+=8),this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return L?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(S,T,L,I,R,P,W,E,A,x){if(this._config.minimumContrastRatio===1||x)return;let H=this._getContrastCache(A),U=H.getColor(S,I);if(U!==void 0)return U||void 0;let re=this._resolveBackgroundRgba(T,L,W),oe=this._resolveForegroundRgba(R,P,W,E),V=h.rgba.ensureContrastRatio(re,oe,this._config.minimumContrastRatio/(A?2:1));if(!V)return void H.setColor(S,I,null);let fe=h.rgba.toColor(V>>24&255,V>>16&255,V>>8&255);return H.setColor(S,I,fe),fe}_getContrastCache(S){return S?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(S,T,L,I,R=!1){let P=typeof S=="number"?String.fromCharCode(S):S,W=Math.min(this._config.deviceCellWidth*Math.max(P.length,2)+4,this._textureSize);this._tmpCanvas.width<W&&(this._tmpCanvas.width=W);let E=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<E&&(this._tmpCanvas.height=E),this._tmpCtx.save(),this._workAttributeData.fg=L,this._workAttributeData.bg=T,this._workAttributeData.extended.ext=I,this._workAttributeData.isInvisible())return D;let A=!!this._workAttributeData.isBold(),x=!!this._workAttributeData.isInverse(),H=!!this._workAttributeData.isDim(),U=!!this._workAttributeData.isItalic(),re=!!this._workAttributeData.isUnderline(),oe=!!this._workAttributeData.isStrikethrough(),V=!!this._workAttributeData.isOverline(),fe=this._workAttributeData.getFgColor(),F=this._workAttributeData.getFgColorMode(),B=this._workAttributeData.getBgColor(),q=this._workAttributeData.getBgColorMode();if(x){let X=fe;fe=B,B=X;let he=F;F=q,q=he}let k=this._getBackgroundColor(q,B,x,H);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let de=A?this._config.fontWeightBold:this._config.fontWeight,J=U?"italic":"";this._tmpCtx.font=`${J} ${de} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=l.TEXT_BASELINE;let Fe=P.length===1&&(0,v.isPowerlineGlyph)(P.charCodeAt(0)),et=P.length===1&&(0,v.isRestrictedPowerlineGlyph)(P.charCodeAt(0)),Ne=this._getForegroundColor(T,q,B,L,F,fe,x,H,A,(0,v.excludeFromContrastRatioDemands)(P.charCodeAt(0)));this._tmpCtx.fillStyle=Ne.css;let Pe=et?0:4,qe=!1;this._config.customGlyphs!==!1&&(qe=(0,u.tryDrawCustomChar)(this._tmpCtx,P,Pe,Pe,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let $t,yr=!Fe;if($t=typeof S=="number"?this._unicodeService.wcwidth(S):this._unicodeService.getStringCellWidth(S),re){this._tmpCtx.save();let X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),he=X%2==1?.5:0;if(this._tmpCtx.lineWidth=X,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())yr=!1,this._tmpCtx.strokeStyle=`rgb(${i.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{yr=!1;let lr=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&lr<8&&(lr+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(lr).css}this._tmpCtx.beginPath();let Be=Pe,ze=Math.ceil(Pe+this._config.deviceCharHeight)-he-(R?2*X:0),xt=ze+X,ar=ze+2*X;for(let lr=0;lr<$t;lr++){this._tmpCtx.save();let nt=Be+lr*this._config.deviceCellWidth,kn=Be+(lr+1)*this._config.deviceCellWidth,Mp=nt+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(nt,ze),this._tmpCtx.lineTo(kn,ze),this._tmpCtx.moveTo(nt,ar),this._tmpCtx.lineTo(kn,ar);break;case 3:let yf=X<=1?ar:Math.ceil(Pe+this._config.deviceCharHeight-X/2)-he,bf=X<=1?ze:Math.ceil(Pe+this._config.deviceCharHeight+X/2)-he,ED=new Path2D;ED.rect(nt,ze,this._config.deviceCellWidth,ar-ze),this._tmpCtx.clip(ED),this._tmpCtx.moveTo(nt-this._config.deviceCellWidth/2,xt),this._tmpCtx.bezierCurveTo(nt-this._config.deviceCellWidth/2,bf,nt,bf,nt,xt),this._tmpCtx.bezierCurveTo(nt,yf,Mp,yf,Mp,xt),this._tmpCtx.bezierCurveTo(Mp,bf,kn,bf,kn,xt),this._tmpCtx.bezierCurveTo(kn,yf,kn+this._config.deviceCellWidth/2,yf,kn+this._config.deviceCellWidth/2,xt);break;case 4:this._tmpCtx.setLineDash([Math.round(X),Math.round(X)]),this._tmpCtx.moveTo(nt,ze),this._tmpCtx.lineTo(kn,ze);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(nt,ze),this._tmpCtx.lineTo(kn,ze);break;default:this._tmpCtx.moveTo(nt,ze),this._tmpCtx.lineTo(kn,ze)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!qe&&this._config.fontSize>=12&&!this._config.allowTransparency&&P!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let lr=this._tmpCtx.measureText(P);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in lr&&lr.actualBoundingBoxDescent>0){this._tmpCtx.save();let nt=new Path2D;nt.rect(Be,ze-Math.ceil(X/2),this._config.deviceCellWidth*$t,ar-ze+Math.ceil(X/2)),this._tmpCtx.clip(nt),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=k.css,this._tmpCtx.strokeText(P,Pe,Pe+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(V){let X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),he=X%2==1?.5:0;this._tmpCtx.lineWidth=X,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Pe,Pe+he),this._tmpCtx.lineTo(Pe+this._config.deviceCharWidth*$t,Pe+he),this._tmpCtx.stroke()}if(qe||this._tmpCtx.fillText(P,Pe,Pe+this._config.deviceCharHeight),P==="_"&&!this._config.allowTransparency){let X=m(this._tmpCtx.getImageData(Pe,Pe,this._config.deviceCellWidth,this._config.deviceCellHeight),k,Ne,yr);if(X)for(let he=1;he<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(P,Pe,Pe+this._config.deviceCharHeight-he),X=m(this._tmpCtx.getImageData(Pe,Pe,this._config.deviceCellWidth,this._config.deviceCellHeight),k,Ne,yr),X);he++);}if(oe){let X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),he=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=X,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Pe,Pe+Math.floor(this._config.deviceCharHeight/2)-he),this._tmpCtx.lineTo(Pe+this._config.deviceCharWidth*$t,Pe+Math.floor(this._config.deviceCharHeight/2)-he),this._tmpCtx.stroke()}this._tmpCtx.restore();let Ar=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),Tt;if(Tt=this._config.allowTransparency?function(X){for(let he=0;he<X.data.length;he+=4)if(X.data[he+3]>0)return!1;return!0}(Ar):m(Ar,k,Ne,yr),Tt)return D;let se=this._findGlyphBoundingBox(Ar,this._workBoundingBox,W,et,qe,Pe),ue,ne;for(;;){if(this._activePages.length===0){let X=this._createNewPage();ue=X,ne=X.currentRow,ne.height=se.size.y;break}ue=this._activePages[this._activePages.length-1],ne=ue.currentRow;for(let X of this._activePages)se.size.y<=X.currentRow.height&&(ue=X,ne=X.currentRow);for(let X=this._activePages.length-1;X>=0;X--)for(let he of this._activePages[X].fixedRows)he.height<=ne.height&&se.size.y<=he.height&&(ue=this._activePages[X],ne=he);if(ne.y+se.size.y>=ue.canvas.height||ne.height>se.size.y+2){let X=!1;if(ue.currentRow.y+ue.currentRow.height+se.size.y>=ue.canvas.height){let he;for(let Be of this._activePages)if(Be.currentRow.y+Be.currentRow.height+se.size.y<Be.canvas.height){he=Be;break}if(he)ue=he;else if(b.maxAtlasPages&&this._pages.length>=b.maxAtlasPages&&ne.y+se.size.y<=ue.canvas.height&&ne.height>=se.size.y&&ne.x+se.size.x<=ue.canvas.width)X=!0;else{let Be=this._createNewPage();ue=Be,ne=Be.currentRow,ne.height=se.size.y,X=!0}}X||(ue.currentRow.height>0&&ue.fixedRows.push(ue.currentRow),ne={x:0,y:ue.currentRow.y+ue.currentRow.height,height:se.size.y},ue.fixedRows.push(ne),ue.currentRow={x:0,y:ne.y+ne.height,height:0})}if(ne.x+se.size.x<=ue.canvas.width)break;ne===ue.currentRow?(ne.x=0,ne.y+=ne.height,ne.height=0):ue.fixedRows.splice(ue.fixedRows.indexOf(ne),1)}return se.texturePage=this._pages.indexOf(ue),se.texturePosition.x=ne.x,se.texturePosition.y=ne.y,se.texturePositionClipSpace.x=ne.x/ue.canvas.width,se.texturePositionClipSpace.y=ne.y/ue.canvas.height,se.sizeClipSpace.x/=ue.canvas.width,se.sizeClipSpace.y/=ue.canvas.height,ne.height=Math.max(ne.height,se.size.y),ne.x+=se.size.x,ue.ctx.putImageData(Ar,se.texturePosition.x-this._workBoundingBox.left,se.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,se.size.x,se.size.y),ue.addGlyph(se),ue.version++,se}_findGlyphBoundingBox(S,T,L,I,R,P){T.top=0;let W=I?this._config.deviceCellHeight:this._tmpCanvas.height,E=I?this._config.deviceCellWidth:L,A=!1;for(let x=0;x<W;x++){for(let H=0;H<E;H++){let U=x*this._tmpCanvas.width*4+4*H+3;if(S.data[U]!==0){T.top=x,A=!0;break}}if(A)break}T.left=0,A=!1;for(let x=0;x<P+E;x++){for(let H=0;H<W;H++){let U=H*this._tmpCanvas.width*4+4*x+3;if(S.data[U]!==0){T.left=x,A=!0;break}}if(A)break}T.right=E,A=!1;for(let x=P+E-1;x>=P;x--){for(let H=0;H<W;H++){let U=H*this._tmpCanvas.width*4+4*x+3;if(S.data[U]!==0){T.right=x,A=!0;break}}if(A)break}T.bottom=W,A=!1;for(let x=W-1;x>=0;x--){for(let H=0;H<E;H++){let U=x*this._tmpCanvas.width*4+4*H+3;if(S.data[U]!==0){T.bottom=x,A=!0;break}}if(A)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:T.right-T.left+1,y:T.bottom-T.top+1},sizeClipSpace:{x:T.right-T.left+1,y:T.bottom-T.top+1},offset:{x:-T.left+P+(I||R?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-T.top+P+(I||R?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}r.TextureAtlas=b,c([p.traceCall],b.prototype,"_drawToCache",null);class w{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(S){this._glyphs.push(S),this._usedPixels+=S.size.x*S.size.y}constructor(S,T,L){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],L)for(let I of L)this._glyphs.push(...I.glyphs),this._usedPixels+=I._usedPixels;this.canvas=y(S,T,T),this.ctx=(0,v.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function m(M,S,T,L){let I=S.rgba>>>24,R=S.rgba>>>16&255,P=S.rgba>>>8&255,W=T.rgba>>>24,E=T.rgba>>>16&255,A=T.rgba>>>8&255,x=Math.floor((Math.abs(I-W)+Math.abs(R-E)+Math.abs(P-A))/12),H=!0;for(let U=0;U<M.data.length;U+=4)M.data[U]===I&&M.data[U+1]===R&&M.data[U+2]===P||L&&Math.abs(M.data[U]-I)+Math.abs(M.data[U+1]-R)+Math.abs(M.data[U+2]-P)<x?M.data[U+3]=0:H=!1;return H}function y(M,S,T){let L=M.createElement("canvas");return L.width=S,L.height=T,L}},160:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let c=o(399),l=0,u=0,v=0,h=0;var g,d,a,i,s;function p(C){let b=C.toString(16);return b.length<2?"0"+b:b}function D(C,b){return C<b?(b+.05)/(C+.05):(C+.05)/(b+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(b,w,m,y){return y!==void 0?`#${p(b)}${p(w)}${p(m)}${p(y)}`:`#${p(b)}${p(w)}${p(m)}`},C.toRgba=function(b,w,m,y=255){return(b<<24|w<<16|m<<8|y)>>>0}}(g||(r.channels=g={})),function(C){function b(w,m){return h=Math.round(255*m),[l,u,v]=s.toChannels(w.rgba),{css:g.toCss(l,u,v,h),rgba:g.toRgba(l,u,v,h)}}C.blend=function(w,m){if(h=(255&m.rgba)/255,h===1)return{css:m.css,rgba:m.rgba};let y=m.rgba>>24&255,M=m.rgba>>16&255,S=m.rgba>>8&255,T=w.rgba>>24&255,L=w.rgba>>16&255,I=w.rgba>>8&255;return l=T+Math.round((y-T)*h),u=L+Math.round((M-L)*h),v=I+Math.round((S-I)*h),{css:g.toCss(l,u,v),rgba:g.toRgba(l,u,v)}},C.isOpaque=function(w){return(255&w.rgba)==255},C.ensureContrastRatio=function(w,m,y){let M=s.ensureContrastRatio(w.rgba,m.rgba,y);if(M)return s.toColor(M>>24&255,M>>16&255,M>>8&255)},C.opaque=function(w){let m=(255|w.rgba)>>>0;return[l,u,v]=s.toChannels(m),{css:g.toCss(l,u,v),rgba:m}},C.opacity=b,C.multiplyOpacity=function(w,m){return h=255&w.rgba,b(w,h*m/255)},C.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(d||(r.color=d={})),function(C){let b,w;if(!c.isNode){let m=document.createElement("canvas");m.width=1,m.height=1;let y=m.getContext("2d",{willReadFrequently:!0});y&&(b=y,b.globalCompositeOperation="copy",w=b.createLinearGradient(0,0,1,1))}C.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return l=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),v=parseInt(m.slice(3,4).repeat(2),16),s.toColor(l,u,v);case 5:return l=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),v=parseInt(m.slice(3,4).repeat(2),16),h=parseInt(m.slice(4,5).repeat(2),16),s.toColor(l,u,v,h);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}let y=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(y)return l=parseInt(y[1]),u=parseInt(y[2]),v=parseInt(y[3]),h=Math.round(255*(y[5]===void 0?1:parseFloat(y[5]))),s.toColor(l,u,v,h);if(!b||!w)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=w,b.fillStyle=m,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[l,u,v,h]=b.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(l,u,v,h),css:m}}}(a||(r.css=a={})),function(C){function b(w,m,y){let M=w/255,S=m/255,T=y/255;return .2126*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(w){return b(w>>16&255,w>>8&255,255&w)},C.relativeLuminance2=b}(i||(r.rgb=i={})),function(C){function b(m,y,M){let S=m>>24&255,T=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,T,L));for(;W<M&&(I>0||R>0||P>0);)I-=Math.max(0,Math.ceil(.1*I)),R-=Math.max(0,Math.ceil(.1*R)),P-=Math.max(0,Math.ceil(.1*P)),W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,T,L));return(I<<24|R<<16|P<<8|255)>>>0}function w(m,y,M){let S=m>>24&255,T=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,T,L));for(;W<M&&(I<255||R<255||P<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),R=Math.min(255,R+Math.ceil(.1*(255-R))),P=Math.min(255,P+Math.ceil(.1*(255-P))),W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,T,L));return(I<<24|R<<16|P<<8|255)>>>0}C.ensureContrastRatio=function(m,y,M){let S=i.relativeLuminance(m>>8),T=i.relativeLuminance(y>>8);if(D(S,T)<M){if(T<S){let R=b(m,y,M),P=D(S,i.relativeLuminance(R>>8));if(P<M){let W=w(m,y,M);return P>D(S,i.relativeLuminance(W>>8))?R:W}return R}let L=w(m,y,M),I=D(S,i.relativeLuminance(L>>8));if(I<M){let R=b(m,y,M);return I>D(S,i.relativeLuminance(R>>8))?L:R}return L}},C.reduceLuminance=b,C.increaseLuminance=w,C.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]},C.toColor=function(m,y,M,S){return{css:g.toCss(m,y,M,S),rgba:g.toRgba(m,y,M,S)}}}(s||(r.rgba=s={})),r.toPaddedHex=p,r.contrastRatio=D},345:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===o)return void this._listeners.splice(c,1)}}})),this._event}fire(o,c){let l=[];for(let u=0;u<this._listeners.length;u++)l.push(this._listeners[u]);for(let u=0;u<l.length;u++)l[u].call(void 0,o,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(o,c){return o(l=>c.fire(l))}},859:(_,r)=>{function o(c){for(let l of c)l.dispose();c.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){let l=this._disposables.indexOf(c);l!==-1&&this._disposables.splice(l,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){var l;this._isDisposed||c===this._value||((l=this._value)===null||l===void 0||l.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){var c;this._isDisposed=!0,(c=this._value)===null||c===void 0||c.dispose(),this._value=void 0}},r.toDisposable=function(c){return{dispose:c}},r.disposeArray=o,r.getDisposeArrayDisposable=function(c){return{dispose:()=>o(c)}}},485:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(l,u,v){this._data[l]||(this._data[l]={}),this._data[l][u]=v}get(l,u){return this._data[l]?this._data[l][u]:void 0}clear(){this._data={}}}r.TwoKeyMap=o,r.FourKeyMap=class{constructor(){this._data=new o}set(c,l,u,v,h){this._data.get(c,l)||this._data.set(c,l,new o),this._data.get(c,l).set(u,v,h)}get(c,l,u,v){var h;return(h=this._data.get(c,l))===null||h===void 0?void 0:h.get(u,v)}clear(){this._data.clear()}}},399:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";let o=r.isNode?"node":navigator.userAgent,c=r.isNode?"node":navigator.platform;r.isFirefox=o.includes("Firefox"),r.isLegacyEdge=o.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(o),r.getSafariVersion=function(){if(!r.isSafari)return 0;let l=o.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),r.isIpad=c==="iPad",r.isIphone=c==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),r.isLinux=c.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(o)},385:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;let c=o(399);class l{constructor(){this._tasks=[],this._i=0}enqueue(h){this._tasks.push(h),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(h){this._idleCallback=void 0;let g=0,d=0,a=h.timeRemaining(),i=0;for(;this._i<this._tasks.length;){if(g=Date.now(),this._tasks[this._i]()||this._i++,g=Math.max(1,Date.now()-g),d=Math.max(g,d),i=h.timeRemaining(),1.5*d>i)return a-g<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-g))}ms`),void this._start();a=i}this.clear()}}class u extends l{_requestCallback(h){return setTimeout(()=>h(this._createDeadline(16)))}_cancelCallback(h){clearTimeout(h)}_createDeadline(h){let g=Date.now()+h;return{timeRemaining:()=>Math.max(0,g-Date.now())}}}r.PriorityTaskQueue=u,r.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:u,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},147:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){let u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=o;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,v=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=v}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=c},782:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;let c=o(133),l=o(855),u=o(147);class v extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(g){let d=new v;return d.setFromCharData(g),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(g){this.fg=g[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(g[l.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(g[l.CHAR_DATA_CHAR_INDEX].length===2){let a=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){let i=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(a-55296)+i-56320+65536|g[l.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[l.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=g[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=v},855:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},133:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},r.utf32ToString=function(o,c=0,l=o.length){let u="";for(let v=c;v<l;++v){let h=o[v];h>65535?(h-=65536,u+=String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):u+=String.fromCharCode(h)}return u},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,c){let l=o.length;if(!l)return 0;let u=0,v=0;if(this._interim){let h=o.charCodeAt(v++);56320<=h&&h<=57343?c[u++]=1024*(this._interim-55296)+h-56320+65536:(c[u++]=this._interim,c[u++]=h),this._interim=0}for(let h=v;h<l;++h){let g=o.charCodeAt(h);if(55296<=g&&g<=56319){if(++h>=l)return this._interim=g,u;let d=o.charCodeAt(h);56320<=d&&d<=57343?c[u++]=1024*(g-55296)+d-56320+65536:(c[u++]=g,c[u++]=d)}else g!==65279&&(c[u++]=g)}return u}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,c){let l=o.length;if(!l)return 0;let u,v,h,g,d=0,a=0,i=0;if(this.interim[0]){let D=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let b,w=0;for(;(b=63&this.interim[++w])&&w<4;)C<<=6,C|=b;let m=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=m-w;for(;i<y;){if(i>=l)return 0;if(b=o[i++],(192&b)!=128){i--,D=!0;break}this.interim[w++]=b,C<<=6,C|=63&b}D||(m===2?C<128?i--:c[d++]=C:m===3?C<2048||C>=55296&&C<=57343||C===65279||(c[d++]=C):C<65536||C>1114111||(c[d++]=C)),this.interim.fill(0)}let s=l-4,p=i;for(;p<l;){for(;!(!(p<s)||128&(u=o[p])||128&(v=o[p+1])||128&(h=o[p+2])||128&(g=o[p+3]));)c[d++]=u,c[d++]=v,c[d++]=h,c[d++]=g,p+=4;if(u=o[p++],u<128)c[d++]=u;else if((224&u)==192){if(p>=l)return this.interim[0]=u,d;if(v=o[p++],(192&v)!=128){p--;continue}if(a=(31&u)<<6|63&v,a<128){p--;continue}c[d++]=a}else if((240&u)==224){if(p>=l)return this.interim[0]=u,d;if(v=o[p++],(192&v)!=128){p--;continue}if(p>=l)return this.interim[0]=u,this.interim[1]=v,d;if(h=o[p++],(192&h)!=128){p--;continue}if(a=(15&u)<<12|(63&v)<<6|63&h,a<2048||a>=55296&&a<=57343||a===65279)continue;c[d++]=a}else if((248&u)==240){if(p>=l)return this.interim[0]=u,d;if(v=o[p++],(192&v)!=128){p--;continue}if(p>=l)return this.interim[0]=u,this.interim[1]=v,d;if(h=o[p++],(192&h)!=128){p--;continue}if(p>=l)return this.interim[0]=u,this.interim[1]=v,this.interim[2]=h,d;if(g=o[p++],(192&g)!=128){p--;continue}if(a=(7&u)<<18|(63&v)<<12|(63&h)<<6|63&g,a<65536||a>1114111)continue;c[d++]=a}}return d}}},776:function(_,r,o){var c=this&&this.__decorate||function(a,i,s,p){var D,C=arguments.length,b=C<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,s):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,p);else for(var w=a.length-1;w>=0;w--)(D=a[w])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},l=this&&this.__param||function(a,i){return function(s,p){i(s,p,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;let u=o(859),v=o(97),h={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF},g,d=r.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),g=this}_updateLogLevel(){this._logLevel=h[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let i=0;i<a.length;i++)typeof a[i]=="function"&&(a[i]=a[i]())}_log(a,i,s){this._evalLazyOptionalParams(s),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+i,...s)}trace(a,...i){var s,p;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((p=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.trace.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.log,a,i)}debug(a,...i){var s,p;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((p=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.debug.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.log,a,i)}info(a,...i){var s,p;this._logLevel<=v.LogLevelEnum.INFO&&this._log((p=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.info.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.info,a,i)}warn(a,...i){var s,p;this._logLevel<=v.LogLevelEnum.WARN&&this._log((p=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.warn.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.warn,a,i)}error(a,...i){var s,p;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((p=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.error.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.error,a,i)}};r.LogService=d=c([l(0,v.IOptionsService)],d),r.setTraceLogger=function(a){g=a},r.traceCall=function(a,i,s){if(typeof s.value!="function")throw new Error("not supported");let p=s.value;s.value=function(...D){if(g.logLevel!==v.LogLevelEnum.TRACE)return p.apply(this,D);g.trace(`GlyphRenderer#${p.name}(${D.map(b=>JSON.stringify(b)).join(", ")})`);let C=p.apply(this,D);return g.trace(`GlyphRenderer#${p.name} return`,C),C}}},726:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;let o="di$target",c="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(l){return l[c]||[]},r.createDecorator=function(l){if(r.serviceRegistry.has(l))return r.serviceRegistry.get(l);let u=function(v,h,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,a,i){a[o]===a?a[c].push({id:d,index:i}):(a[c]=[{id:d,index:i}],a[o]=a)})(u,v,g)};return u.toString=()=>l,r.serviceRegistry.set(l,u),u}},97:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;let c=o(726);var l;r.IBufferService=(0,c.createDecorator)("BufferService"),r.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),r.ICoreService=(0,c.createDecorator)("CoreService"),r.ICharsetService=(0,c.createDecorator)("CharsetService"),r.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(l||(r.LogLevelEnum=l={})),r.ILogService=(0,c.createDecorator)("LogService"),r.IOptionsService=(0,c.createDecorator)("OptionsService"),r.IOscLinkService=(0,c.createDecorator)("OscLinkService"),r.IUnicodeService=(0,c.createDecorator)("UnicodeService"),r.IDecorationService=(0,c.createDecorator)("DecorationService")}},t={};function n(_){var r=t[_];if(r!==void 0)return r.exports;var o=t[_]={exports:{}};return e[_].call(o.exports,o,o.exports,n),o.exports}var f={};return(()=>{var _=f;Object.defineProperty(_,"__esModule",{value:!0}),_.WebglAddon=void 0;let r=n(345),o=n(859),c=n(399),l=n(666),u=n(776);class v extends o.Disposable{constructor(g){if(c.isSafari&&(0,c.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=g,this._onChangeTextureAtlas=this.register(new r.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new r.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new r.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new r.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(g){let d=g._core;if(!g.element)return void this.register(d.onWillOpen(()=>this.activate(g)));this._terminal=g;let a=d.coreService,i=d.optionsService,s=d,p=s._renderService,D=s._characterJoinerService,C=s._charSizeService,b=s._coreBrowserService,w=s._decorationService,m=s._logService,y=s._themeService;(0,u.setTraceLogger)(m),this._renderer=this.register(new l.WebglRenderer(g,D,C,b,a,w,i,y,this._preserveDrawingBuffer)),this.register((0,r.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,r.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,r.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,r.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),p.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{let M=this._terminal._core._renderService;M.setRenderer(this._terminal._core._createRenderer()),M.handleResize(g.cols,g.rows)}))}get textureAtlas(){var g;return(g=this._renderer)===null||g===void 0?void 0:g.textureAtlas}clearTextureAtlas(){var g;(g=this._renderer)===null||g===void 0||g.clearTextureAtlas()}}_.WebglAddon=v})(),f})())});var CE=Sf((ip,Cg)=>{(function(e,t){typeof ip=="object"&&typeof Cg=="object"?Cg.exports=t():typeof define=="function"&&define.amd?define([],t):typeof ip=="object"?ip.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkComputer=r.WebLinkProvider=void 0,r.WebLinkProvider=class{constructor(c,l,u,v={}){this._terminal=c,this._regex=l,this._handler=u,this._options=v}provideLinks(c,l){let u=o.computeLink(c,this._regex,this._terminal,this._handler);l(this._addCallbacks(u))}_addCallbacks(c){return c.map(l=>(l.leave=this._options.leave,l.hover=(u,v)=>{if(this._options.hover){let{range:h}=l;this._options.hover(u,v,h)}},l))}};class o{static computeLink(l,u,v,h){let g=new RegExp(u.source,(u.flags||"")+"g"),[d,a]=o._getWindowedLineStrings(l-1,v),i=d.join(""),s,p=[];for(;s=g.exec(i);){let D=s[0];try{let M=new URL(D),S=decodeURI(M.toString());if(D!==S&&D+"/"!==S)continue}catch{continue}let[C,b]=o._mapStrIdx(v,a,0,s.index),[w,m]=o._mapStrIdx(v,C,b,D.length);if(C===-1||b===-1||w===-1||m===-1)continue;let y={start:{x:b+1,y:C+1},end:{x:m,y:w+1}};p.push({range:y,text:D,activate:h})}return p}static _getWindowedLineStrings(l,u){let v,h=l,g=l,d=0,a="",i=[];if(v=u.buffer.active.getLine(l)){let s=v.translateToString(!0);if(v.isWrapped&&s[0]!==" "){for(d=0;(v=u.buffer.active.getLine(--h))&&d<2048&&(a=v.translateToString(!0),d+=a.length,i.push(a),v.isWrapped&&a.indexOf(" ")===-1););i.reverse()}for(i.push(s),d=0;(v=u.buffer.active.getLine(++g))&&v.isWrapped&&d<2048&&(a=v.translateToString(!0),d+=a.length,i.push(a),a.indexOf(" ")===-1););}return[i,h]}static _mapStrIdx(l,u,v,h){let g=l.buffer.active,d=g.getNullCell(),a=v;for(;h;){let i=g.getLine(u);if(!i)return[-1,-1];for(let s=a;s<i.length;++s){i.getCell(s,d);let p=d.getChars();if(d.getWidth()&&(h-=p.length||1,s===i.length-1&&p==="")){let D=g.getLine(u+1);D&&D.isWrapped&&(D.getCell(0,d),d.getWidth()===2&&(h+=1))}if(h<0)return[u,s]}u++,a=0}return[u,a]}}r.LinkComputer=o}},t={};function n(_){var r=t[_];if(r!==void 0)return r.exports;var o=t[_]={exports:{}};return e[_](o,o.exports,n),o.exports}var f={};return(()=>{var _=f;Object.defineProperty(_,"__esModule",{value:!0}),_.WebLinksAddon=void 0;let r=n(6),o=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function c(l,u){let v=window.open();if(v){try{v.opener=null}catch{}v.location.href=u}else console.warn("Opening link blocked as opener could not be cleared")}_.WebLinksAddon=class{constructor(l=c,u={}){this._handler=l,this._options=u}activate(l){this._terminal=l;let u=this._options,v=u.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new r.WebLinkProvider(this._terminal,v,this._handler,u))}dispose(){var l;(l=this._linkProvider)===null||l===void 0||l.dispose()}}})(),f})())});var ME=Sf((sp,wg)=>{(function(e,t){if(typeof sp=="object"&&typeof wg=="object")wg.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var f in n)(typeof sp=="object"?sp:e)[f]=n[f]}})(self,()=>(()=>{"use strict";var e={4567:function(_,r,o){var c=this&&this.__decorate||function(p,D,C,b){var w,m=arguments.length,y=m<3?D:b===null?b=Object.getOwnPropertyDescriptor(D,C):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,D,C,b);else for(var M=p.length-1;M>=0;M--)(w=p[M])&&(y=(m<3?w(y):m>3?w(D,C,y):w(D,C))||y);return m>3&&y&&Object.defineProperty(D,C,y),y},l=this&&this.__param||function(p,D){return function(C,b){D(C,b,p)}};Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityManager=void 0;let u=o(9042),v=o(6114),h=o(9924),g=o(844),d=o(5596),a=o(4725),i=o(3656),s=r.AccessibilityManager=class extends g.Disposable{constructor(p,D){super(),this._terminal=p,this._renderService=D,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new h.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new d.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,i.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,g.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(p){for(let D=0;D<p;D++)this._handleChar(" ")}_handleChar(p){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==p&&(this._charsToAnnounce+=p):this._charsToAnnounce+=p,p===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&this._liveRegion.remove()}_handleKey(p){this._clearLiveRegion(),/\p{Control}/u.test(p)||this._charsToConsume.push(p)}_refreshRows(p,D){this._liveRegionDebouncer.refresh(p,D,this._terminal.rows)}_renderRows(p,D){let C=this._terminal.buffer,b=C.lines.length.toString();for(let w=p;w<=D;w++){let m=C.translateBufferLineToString(C.ydisp+w,!0),y=(C.ydisp+w+1).toString(),M=this._rowElements[w];M&&(m.length===0?M.innerText="\xA0":M.textContent=m,M.setAttribute("aria-posinset",y),M.setAttribute("aria-setsize",b))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(p,D){let C=p.target,b=this._rowElements[D===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(D===0?"1":`${this._terminal.buffer.lines.length}`)||p.relatedTarget!==b)return;let w,m;if(D===0?(w=C,m=this._rowElements.pop(),this._rowContainer.removeChild(m)):(w=this._rowElements.shift(),m=C,this._rowContainer.removeChild(w)),w.removeEventListener("focus",this._topBoundaryFocusListener),m.removeEventListener("focus",this._bottomBoundaryFocusListener),D===0){let y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{let y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(D===0?-1:1),this._rowElements[D===0?1:this._rowElements.length-2].focus(),p.preventDefault(),p.stopImmediatePropagation()}_handleResize(p){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let D=this._rowContainer.children.length;D<this._terminal.rows;D++)this._rowElements[D]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[D]);for(;this._rowElements.length>p;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let p=document.createElement("div");return p.setAttribute("role","listitem"),p.tabIndex=-1,this._refreshRowDimensions(p),p}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let p=0;p<this._terminal.rows;p++)this._refreshRowDimensions(this._rowElements[p])}}_refreshRowDimensions(p){p.style.height=`${this._renderService.dimensions.css.cell.height}px`}};r.AccessibilityManager=s=c([l(1,a.IRenderService)],s)},3614:(_,r)=>{function o(v){return v.replace(/\r?\n/g,"\r")}function c(v,h){return h?"\x1B[200~"+v+"\x1B[201~":v}function l(v,h,g,d){v=c(v=o(v),g.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),g.triggerDataEvent(v,!0),h.value=""}function u(v,h,g){let d=g.getBoundingClientRect(),a=v.clientX-d.left-10,i=v.clientY-d.top-10;h.style.width="20px",h.style.height="20px",h.style.left=`${a}px`,h.style.top=`${i}px`,h.style.zIndex="1000",h.focus()}Object.defineProperty(r,"__esModule",{value:!0}),r.rightClickHandler=r.moveTextAreaUnderMouseCursor=r.paste=r.handlePasteEvent=r.copyHandler=r.bracketTextForPaste=r.prepareTextForTerminal=void 0,r.prepareTextForTerminal=o,r.bracketTextForPaste=c,r.copyHandler=function(v,h){v.clipboardData&&v.clipboardData.setData("text/plain",h.selectionText),v.preventDefault()},r.handlePasteEvent=function(v,h,g,d){v.stopPropagation(),v.clipboardData&&l(v.clipboardData.getData("text/plain"),h,g,d)},r.paste=l,r.moveTextAreaUnderMouseCursor=u,r.rightClickHandler=function(v,h,g,d,a){u(v,h,g),a&&d.rightClickSelect(v),h.value=d.selectionText,h.select()}},7239:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorContrastCache=void 0;let c=o(1505);r.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(l,u,v){this._css.set(l,u,v)}getCss(l,u){return this._css.get(l,u)}setColor(l,u,v){this._color.set(l,u,v)}getColor(l,u){return this._color.get(l,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(o,c,l,u){o.addEventListener(c,l,u);let v=!1;return{dispose:()=>{v||(v=!0,o.removeEventListener(c,l,u))}}}},6465:function(_,r,o){var c=this&&this.__decorate||function(a,i,s,p){var D,C=arguments.length,b=C<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,s):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,p);else for(var w=a.length-1;w>=0;w--)(D=a[w])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},l=this&&this.__param||function(a,i){return function(s,p){i(s,p,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Linkifier2=void 0;let u=o(3656),v=o(8460),h=o(844),g=o(2585),d=r.Linkifier2=class extends h.Disposable{get currentLink(){return this._currentLink}constructor(a){super(),this._bufferService=a,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,h.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,h.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(a){return this._linkProviders.push(a),{dispose:()=>{let i=this._linkProviders.indexOf(a);i!==-1&&this._linkProviders.splice(i,1)}}}attachToDom(a,i,s){this._element=a,this._mouseService=i,this._renderService=s,this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){if(this._lastMouseEvent=a,!this._element||!this._mouseService)return;let i=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!i)return;this._isMouseOut=!1;let s=a.composedPath();for(let p=0;p<s.length;p++){let D=s[p];if(D.classList.contains("xterm"))break;if(D.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._handleHover(i),this._lastBufferCell=i)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,i){var s,p;this._activeProviderReplies&&i||((s=this._activeProviderReplies)===null||s===void 0||s.forEach(C=>{C?.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let D=!1;for(let[C,b]of this._linkProviders.entries())i?!((p=this._activeProviderReplies)===null||p===void 0)&&p.get(C)&&(D=this._checkLinkProviderResult(C,a,D)):b.provideLinks(a.y,w=>{var m,y;if(this._isMouseOut)return;let M=w?.map(S=>({link:S}));(m=this._activeProviderReplies)===null||m===void 0||m.set(C,M),D=this._checkLinkProviderResult(C,a,D),((y=this._activeProviderReplies)===null||y===void 0?void 0:y.size)===this._linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,i){let s=new Set;for(let p=0;p<i.size;p++){let D=i.get(p);if(D)for(let C=0;C<D.length;C++){let b=D[C],w=b.link.range.start.y<a?0:b.link.range.start.x,m=b.link.range.end.y>a?this._bufferService.cols:b.link.range.end.x;for(let y=w;y<=m;y++){if(s.has(y)){D.splice(C--,1);break}s.add(y)}}}}_checkLinkProviderResult(a,i,s){var p;if(!this._activeProviderReplies)return s;let D=this._activeProviderReplies.get(a),C=!1;for(let b=0;b<a;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(C=!0);if(!C&&D){let b=D.find(w=>this._linkAtPosition(w.link,i));b&&(s=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviders.length&&!s)for(let b=0;b<this._activeProviderReplies.size;b++){let w=(p=this._activeProviderReplies.get(b))===null||p===void 0?void 0:p.find(m=>this._linkAtPosition(m.link,i));if(w){s=!0,this._handleNewLink(w);break}}return s}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._element||!this._mouseService||!this._currentLink)return;let i=this._positionFromMouseEvent(a,this._element,this._mouseService);i&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!a||!i||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,h.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(a.link,i)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var s,p;return(p=(s=this._currentLink)===null||s===void 0?void 0:s.state)===null||p===void 0?void 0:p.decorations.pointerCursor},set:s=>{var p,D;!((p=this._currentLink)===null||p===void 0)&&p.state&&this._currentLink.state.decorations.pointerCursor!==s&&(this._currentLink.state.decorations.pointerCursor=s,this._currentLink.state.isHovered&&((D=this._element)===null||D===void 0||D.classList.toggle("xterm-cursor-pointer",s)))}},underline:{get:()=>{var s,p;return(p=(s=this._currentLink)===null||s===void 0?void 0:s.state)===null||p===void 0?void 0:p.decorations.underline},set:s=>{var p,D,C;!((p=this._currentLink)===null||p===void 0)&&p.state&&((C=(D=this._currentLink)===null||D===void 0?void 0:D.state)===null||C===void 0?void 0:C.decorations.underline)!==s&&(this._currentLink.state.decorations.underline=s,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,s))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(s=>{if(!this._currentLink)return;let p=s.start===0?0:s.start+1+this._bufferService.buffer.ydisp,D=this._bufferService.buffer.ydisp+1+s.end;if(this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=D&&(this._clearCurrentLink(p,D),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(a,i,s){var p;!((p=this._currentLink)===null||p===void 0)&&p.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(s,i.text)}_fireUnderlineEvent(a,i){let s=a.range,p=this._bufferService.buffer.ydisp,D=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-p-1,s.end.x,s.end.y-p-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(D)}_linkLeave(a,i,s){var p;!((p=this._currentLink)===null||p===void 0)&&p.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(s,i.text)}_linkAtPosition(a,i){let s=a.range.start.y*this._bufferService.cols+a.range.start.x,p=a.range.end.y*this._bufferService.cols+a.range.end.x,D=i.y*this._bufferService.cols+i.x;return s<=D&&D<=p}_positionFromMouseEvent(a,i,s){let p=s.getCoords(a,i,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,i,s,p,D){return{x1:a,y1:i,x2:s,y2:p,cols:this._bufferService.cols,fg:D}}};r.Linkifier2=d=c([l(0,g.IBufferService)],d)},9042:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tooMuchOutput=r.promptLabel=void 0,r.promptLabel="Terminal input",r.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(_,r,o){var c=this&&this.__decorate||function(d,a,i,s){var p,D=arguments.length,C=D<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,a,i,s);else for(var b=d.length-1;b>=0;b--)(p=d[b])&&(C=(D<3?p(C):D>3?p(a,i,C):p(a,i))||C);return D>3&&C&&Object.defineProperty(a,i,C),C},l=this&&this.__param||function(d,a){return function(i,s){a(i,s,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkProvider=void 0;let u=o(511),v=o(2585),h=r.OscLinkProvider=class{constructor(d,a,i){this._bufferService=d,this._optionsService=a,this._oscLinkService=i}provideLinks(d,a){var i;let s=this._bufferService.buffer.lines.get(d-1);if(!s)return void a(void 0);let p=[],D=this._optionsService.rawOptions.linkHandler,C=new u.CellData,b=s.getTrimmedLength(),w=-1,m=-1,y=!1;for(let M=0;M<b;M++)if(m!==-1||s.hasContent(M)){if(s.loadCell(M,C),C.hasExtendedAttrs()&&C.extended.urlId){if(m===-1){m=M,w=C.extended.urlId;continue}y=C.extended.urlId!==w}else m!==-1&&(y=!0);if(y||m!==-1&&M===b-1){let S=(i=this._oscLinkService.getLinkData(w))===null||i===void 0?void 0:i.uri;if(S){let T={start:{x:m+1,y:d},end:{x:M+(y||M!==b-1?0:1),y:d}},L=!1;if(!D?.allowNonHttpProtocols)try{let I=new URL(S);["http:","https:"].includes(I.protocol)||(L=!0)}catch{L=!0}L||p.push({text:S,range:T,activate:(I,R)=>D?D.activate(I,R,T):g(0,R),hover:(I,R)=>{var P;return(P=D?.hover)===null||P===void 0?void 0:P.call(D,I,R,T)},leave:(I,R)=>{var P;return(P=D?.leave)===null||P===void 0?void 0:P.call(D,I,R,T)}})}y=!1,C.hasExtendedAttrs()&&C.extended.urlId?(m=M,w=C.extended.urlId):(m=-1,w=-1)}}a(p)}};function g(d,a){if(confirm(`Do you want to navigate to ${a}?

WARNING: This link could potentially be dangerous`)){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}}r.OscLinkProvider=h=c([l(0,v.IBufferService),l(1,v.IOptionsService),l(2,v.IOscLinkService)],h)},6193:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderDebouncer=void 0,r.RenderDebouncer=class{constructor(o,c){this._parentWindow=o,this._renderCallback=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,c,l){this._rowCount=l,o=o!==void 0?o:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ScreenDprMonitor=void 0;let c=o(844);class l extends c.Disposable{constructor(v){super(),this._parentWindow=v,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,c.toDisposable)(()=>{this.clearListener()}))}setListener(v){this._listener&&this.clearListener(),this._listener=v,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}r.ScreenDprMonitor=l},3236:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;let c=o(3614),l=o(3656),u=o(6465),v=o(9042),h=o(3730),g=o(1680),d=o(3107),a=o(5744),i=o(2950),s=o(1296),p=o(428),D=o(4269),C=o(5114),b=o(8934),w=o(3230),m=o(9312),y=o(4725),M=o(6731),S=o(8055),T=o(8969),L=o(8460),I=o(844),R=o(6114),P=o(8437),W=o(2584),E=o(7399),A=o(5941),x=o(9074),H=o(2585),U=o(5435),re=o(4567),oe=typeof window<"u"?window.document:null;class V extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(F={}){super(F),this.browser=R,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new I.MutableDisposable),this._onCursorMove=this.register(new L.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new L.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new L.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new L.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new L.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new L.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new L.EventEmitter),this._onBlur=this.register(new L.EventEmitter),this._onA11yCharEmitter=this.register(new L.EventEmitter),this._onA11yTabEmitter=this.register(new L.EventEmitter),this._onWillOpen=this.register(new L.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(u.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(h.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(x.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((B,q)=>this.refresh(B,q))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(B=>this._reportWindowsOptions(B))),this.register(this._inputHandler.onColor(B=>this._handleColorEvent(B))),this.register((0,L.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,L.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,L.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,L.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(B=>this._afterResize(B.cols,B.rows))),this.register((0,I.toDisposable)(()=>{var B,q;this._customKeyEventHandler=void 0,(q=(B=this.element)===null||B===void 0?void 0:B.parentNode)===null||q===void 0||q.removeChild(this.element)}))}_handleColorEvent(F){if(this._themeService)for(let B of F){let q,k="";switch(B.index){case 256:q="foreground",k="10";break;case 257:q="background",k="11";break;case 258:q="cursor",k="12";break;default:q="ansi",k="4;"+B.index}switch(B.type){case 0:let de=S.color.toColorRGB(q==="ansi"?this._themeService.colors.ansi[B.index]:this._themeService.colors[q]);this.coreService.triggerDataEvent(`${W.C0.ESC}]${k};${(0,A.toRgbString)(de)}${W.C1_ESCAPED.ST}`);break;case 1:if(q==="ansi")this._themeService.modifyColors(J=>J.ansi[B.index]=S.rgba.toColor(...B.color));else{let J=q;this._themeService.modifyColors(Fe=>Fe[J]=S.rgba.toColor(...B.color))}break;case 2:this._themeService.restoreColor(B.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(F){F?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(re.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(F){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[I"),this.updateCursorStyle(F),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var F;return(F=this.textarea)===null||F===void 0?void 0:F.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let F=this.buffer.ybase+this.buffer.y,B=this.buffer.lines.get(F);if(!B)return;let q=Math.min(this.buffer.x,this.cols-1),k=this._renderService.dimensions.css.cell.height,de=B.getWidth(q),J=this._renderService.dimensions.css.cell.width*de,Fe=this.buffer.y*this._renderService.dimensions.css.cell.height,et=q*this._renderService.dimensions.css.cell.width;this.textarea.style.left=et+"px",this.textarea.style.top=Fe+"px",this.textarea.style.width=J+"px",this.textarea.style.height=k+"px",this.textarea.style.lineHeight=k+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,l.addDisposableDomListener)(this.element,"copy",B=>{this.hasSelection()&&(0,c.copyHandler)(B,this._selectionService)}));let F=B=>(0,c.handlePasteEvent)(B,this.textarea,this.coreService,this.optionsService);this.register((0,l.addDisposableDomListener)(this.textarea,"paste",F)),this.register((0,l.addDisposableDomListener)(this.element,"paste",F)),R.isFirefox?this.register((0,l.addDisposableDomListener)(this.element,"mousedown",B=>{B.button===2&&(0,c.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,l.addDisposableDomListener)(this.element,"contextmenu",B=>{(0,c.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),R.isLinux&&this.register((0,l.addDisposableDomListener)(this.element,"auxclick",B=>{B.button===1&&(0,c.moveTextAreaUnderMouseCursor)(B,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,l.addDisposableDomListener)(this.textarea,"keyup",F=>this._keyUp(F),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keydown",F=>this._keyDown(F),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keypress",F=>this._keyPress(F),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionupdate",F=>this._compositionHelper.compositionupdate(F))),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,l.addDisposableDomListener)(this.textarea,"input",F=>this._inputEvent(F),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(F){var B;if(!F)throw new Error("Terminal requires a parent element.");F.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=F.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),F.appendChild(this.element);let q=oe.createDocumentFragment();this._viewportElement=oe.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),q.appendChild(this._viewportElement),this._viewportScrollArea=oe.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=oe.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=oe.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),q.appendChild(this.screenElement),this.textarea=oe.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),R.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(B=this._document.defaultView)!==null&&B!==void 0?B:window),this._instantiationService.setService(y.ICoreBrowserService,this._coreBrowserService),this.register((0,l.addDisposableDomListener)(this.textarea,"focus",k=>this._handleTextAreaFocus(k))),this.register((0,l.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(p.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(y.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(M.ThemeService),this._instantiationService.setService(y.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(D.CharacterJoinerService),this._instantiationService.setService(y.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(y.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(k=>this._onRender.fire(k))),this.onResize(k=>this._renderService.resize(k.cols,k.rows)),this._compositionView=oe.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(i.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(q);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(y.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(g.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(y.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(k=>this._renderService.handleSelectionChanged(k.start,k.end,k.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(k=>{this.textarea.value=k,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(k=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,l.addDisposableDomListener)(this.element,"mousedown",k=>this._selectionService.handleMouseDown(k))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(re.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",k=>this._handleScreenReaderModeOptionChange(k))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",k=>{!this._overviewRulerRenderer&&k&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(s.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let F=this,B=this.element;function q(J){let Fe=F._mouseService.getMouseReportCoords(J,F.screenElement);if(!Fe)return!1;let et,Ne;switch(J.overrideType||J.type){case"mousemove":Ne=32,J.buttons===void 0?(et=3,J.button!==void 0&&(et=J.button<3?J.button:3)):et=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":Ne=0,et=J.button<3?J.button:3;break;case"mousedown":Ne=1,et=J.button<3?J.button:3;break;case"wheel":if(F.viewport.getLinesScrolled(J)===0)return!1;Ne=J.deltaY<0?0:1,et=4;break;default:return!1}return!(Ne===void 0||et===void 0||et>4)&&F.coreMouseService.triggerMouseEvent({col:Fe.col,row:Fe.row,x:Fe.x,y:Fe.y,button:et,action:Ne,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}let k={mouseup:null,wheel:null,mousedrag:null,mousemove:null},de={mouseup:J=>(q(J),J.buttons||(this._document.removeEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.removeEventListener("mousemove",k.mousedrag)),this.cancel(J)),wheel:J=>(q(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&q(J)},mousemove:J=>{J.buttons||q(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?k.mousemove||(B.addEventListener("mousemove",de.mousemove),k.mousemove=de.mousemove):(B.removeEventListener("mousemove",k.mousemove),k.mousemove=null),16&J?k.wheel||(B.addEventListener("wheel",de.wheel,{passive:!1}),k.wheel=de.wheel):(B.removeEventListener("wheel",k.wheel),k.wheel=null),2&J?k.mouseup||(B.addEventListener("mouseup",de.mouseup),k.mouseup=de.mouseup):(this._document.removeEventListener("mouseup",k.mouseup),B.removeEventListener("mouseup",k.mouseup),k.mouseup=null),4&J?k.mousedrag||(k.mousedrag=de.mousedrag):(this._document.removeEventListener("mousemove",k.mousedrag),k.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,l.addDisposableDomListener)(B,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return q(J),k.mouseup&&this._document.addEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.addEventListener("mousemove",k.mousedrag),this.cancel(J)})),this.register((0,l.addDisposableDomListener)(B,"wheel",J=>{if(!k.wheel){if(!this.buffer.hasScrollback){let Fe=this.viewport.getLinesScrolled(J);if(Fe===0)return;let et=W.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B"),Ne="";for(let Pe=0;Pe<Math.abs(Fe);Pe++)Ne+=et;return this.coreService.triggerDataEvent(Ne,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,l.addDisposableDomListener)(B,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,l.addDisposableDomListener)(B,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(F,B){var q;(q=this._renderService)===null||q===void 0||q.refreshRows(F,B)}updateCursorStyle(F){var B;!((B=this._selectionService)===null||B===void 0)&&B.shouldColumnSelect(F)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(F,B,q=0){var k;q===1?(super.scrollLines(F,B,q),this.refresh(0,this.rows-1)):(k=this.viewport)===null||k===void 0||k.scrollLines(F)}paste(F){(0,c.paste)(F,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(F){this._customKeyEventHandler=F}registerLinkProvider(F){return this.linkifier2.registerLinkProvider(F)}registerCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let B=this._characterJoinerService.register(F);return this.refresh(0,this.rows-1),B}deregisterCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(F)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(F){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+F)}registerDecoration(F){return this._decorationService.registerDecoration(F)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(F,B,q){this._selectionService.setSelection(F,B,q)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var F;(F=this._selectionService)===null||F===void 0||F.clearSelection()}selectAll(){var F;(F=this._selectionService)===null||F===void 0||F.selectAll()}selectLines(F,B){var q;(q=this._selectionService)===null||q===void 0||q.selectLines(F,B)}_keyDown(F){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;let B=this.browser.isMac&&this.options.macOptionIsMeta&&F.altKey;if(!B&&!this._compositionHelper.keydown(F))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;B||F.key!=="Dead"&&F.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let q=(0,E.evaluateKeyboardEvent)(F,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(F),q.type===3||q.type===2){let k=this.rows-1;return this.scrollLines(q.type===2?-k:k),this.cancel(F,!0)}return q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,F)||(q.cancel&&this.cancel(F,!0),!q.key||!!(F.key&&!F.ctrlKey&&!F.altKey&&!F.metaKey&&F.key.length===1&&F.key.charCodeAt(0)>=65&&F.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(q.key!==W.C0.ETX&&q.key!==W.C0.CR||(this.textarea.value=""),this._onKey.fire({key:q.key,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(q.key,!0),!this.optionsService.rawOptions.screenReaderMode||F.altKey||F.ctrlKey?this.cancel(F,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(F,B){let q=F.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||F.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||F.isWindows&&B.getModifierState("AltGraph");return B.type==="keypress"?q:q&&(!B.keyCode||B.keyCode>47)}_keyUp(F){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1||(function(B){return B.keyCode===16||B.keyCode===17||B.keyCode===18}(F)||this.focus(),this.updateCursorStyle(F),this._keyPressHandled=!1)}_keyPress(F){let B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;if(this.cancel(F),F.charCode)B=F.charCode;else if(F.which===null||F.which===void 0)B=F.keyCode;else{if(F.which===0||F.charCode===0)return!1;B=F.which}return!(!B||(F.altKey||F.ctrlKey||F.metaKey)&&!this._isThirdLevelShift(this.browser,F)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(F){if(F.data&&F.inputType==="insertText"&&(!F.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let B=F.data;return this.coreService.triggerDataEvent(B,!0),this.cancel(F),!0}return!1}resize(F,B){F!==this.cols||B!==this.rows?super.resize(F,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(F,B){var q,k;(q=this._charSizeService)===null||q===void 0||q.measure(),(k=this.viewport)===null||k===void 0||k.syncScrollArea(!0)}clear(){var F;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(P.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(F=this.viewport)===null||F===void 0||F.reset(),this.refresh(0,this.rows-1)}}reset(){var F,B;this.options.rows=this.rows,this.options.cols=this.cols;let q=this._customKeyEventHandler;this._setup(),super.reset(),(F=this._selectionService)===null||F===void 0||F.reset(),this._decorationService.reset(),(B=this.viewport)===null||B===void 0||B.reset(),this._customKeyEventHandler=q,this.refresh(0,this.rows-1)}clearTextureAtlas(){var F;(F=this._renderService)===null||F===void 0||F.clearTextureAtlas()}_reportFocus(){var F;!((F=this.element)===null||F===void 0)&&F.classList.contains("focus")?this.coreService.triggerDataEvent(W.C0.ESC+"[I"):this.coreService.triggerDataEvent(W.C0.ESC+"[O")}_reportWindowsOptions(F){if(this._renderService)switch(F){case U.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let B=this._renderService.dimensions.css.canvas.width.toFixed(0),q=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[4;${q};${B}t`);break;case U.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let k=this._renderService.dimensions.css.cell.width.toFixed(0),de=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[6;${de};${k}t`)}}cancel(F,B){if(this.options.cancelEvents||B)return F.preventDefault(),F.stopPropagation(),!1}}r.Terminal=V},9924:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TimeBasedDebouncer=void 0,r.TimeBasedDebouncer=class{constructor(o,c=1e3){this._renderCallback=o,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,c,l){this._rowCount=l,o=o!==void 0?o:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;let u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){let v=u-this._lastRefreshMs,h=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},h)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,c)}}},1680:function(_,r,o){var c=this&&this.__decorate||function(i,s,p,D){var C,b=arguments.length,w=b<3?s:D===null?D=Object.getOwnPropertyDescriptor(s,p):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(i,s,p,D);else for(var m=i.length-1;m>=0;m--)(C=i[m])&&(w=(b<3?C(w):b>3?C(s,p,w):C(s,p))||w);return b>3&&w&&Object.defineProperty(s,p,w),w},l=this&&this.__param||function(i,s){return function(p,D){s(p,D,i)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Viewport=void 0;let u=o(3656),v=o(4725),h=o(8460),g=o(844),d=o(2585),a=r.Viewport=class extends g.Disposable{constructor(i,s,p,D,C,b,w,m){super(),this._viewportElement=i,this._scrollArea=s,this._bufferService=p,this._optionsService=D,this._charSizeService=C,this._renderService=b,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new h.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(y=>this._renderDimensions=y)),this._handleThemeChange(m.colors),this.register(m.onChangeColors(y=>this._handleThemeChange(y))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(i){this._viewportElement.style.backgroundColor=i.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(i){if(i)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let s=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==s&&(this._lastRecordedBufferHeight=s,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._refreshAnimationFrame=null}syncScrollArea(i=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(i);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(i)}_handleScroll(i){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let s=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let i=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(i*(this._smoothScrollState.target-this._smoothScrollState.origin)),i<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(i,s){let p=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(s<0&&this._viewportElement.scrollTop!==0||s>0&&p<this._lastRecordedBufferHeight)||(i.cancelable&&i.preventDefault(),!1)}handleWheel(i){let s=this._getPixelsScrolled(i);return s!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+s:this._smoothScrollState.target+=s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=s,this._bubbleScroll(i,s))}scrollLines(i){if(i!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let s=i*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:i,suppressScrollEvent:!1})}_getPixelsScrolled(i){if(i.deltaY===0||i.shiftKey)return 0;let s=this._applyScrollModifier(i.deltaY,i);return i.deltaMode===WheelEvent.DOM_DELTA_LINE?s*=this._currentRowHeight:i.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._currentRowHeight*this._bufferService.rows),s}getBufferElements(i,s){var p;let D,C="",b=[],w=s??this._bufferService.buffer.lines.length,m=this._bufferService.buffer.lines;for(let y=i;y<w;y++){let M=m.get(y);if(!M)continue;let S=(p=m.get(y+1))===null||p===void 0?void 0:p.isWrapped;if(C+=M.translateToString(!S),!S||y===m.length-1){let T=document.createElement("div");T.textContent=C,b.push(T),C.length>0&&(D=T),C=""}}return{bufferElements:b,cursorElement:D}}getLinesScrolled(i){if(i.deltaY===0||i.shiftKey)return 0;let s=this._applyScrollModifier(i.deltaY,i);return i.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(s/=this._currentRowHeight+0,this._wheelPartialScroll+=s,s=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):i.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._bufferService.rows),s}_applyScrollModifier(i,s){let p=this._optionsService.rawOptions.fastScrollModifier;return p==="alt"&&s.altKey||p==="ctrl"&&s.ctrlKey||p==="shift"&&s.shiftKey?i*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:i*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(i){this._lastTouchY=i.touches[0].pageY}handleTouchMove(i){let s=this._lastTouchY-i.touches[0].pageY;return this._lastTouchY=i.touches[0].pageY,s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(i,s))}};r.Viewport=a=c([l(2,d.IBufferService),l(3,d.IOptionsService),l(4,v.ICharSizeService),l(5,v.IRenderService),l(6,v.ICoreBrowserService),l(7,v.IThemeService)],a)},3107:function(_,r,o){var c=this&&this.__decorate||function(a,i,s,p){var D,C=arguments.length,b=C<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,s):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,p);else for(var w=a.length-1;w>=0;w--)(D=a[w])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},l=this&&this.__param||function(a,i){return function(s,p){i(s,p,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferDecorationRenderer=void 0;let u=o(3656),v=o(4725),h=o(844),g=o(2585),d=r.BufferDecorationRenderer=class extends h.Disposable{constructor(a,i,s,p){super(),this._screenElement=a,this._bufferService=i,this._decorationService=s,this._renderService=p,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(D=>this._removeDecoration(D))),this.register((0,h.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let a of this._decorationService.decorations)this._renderDecoration(a);this._dimensionsChanged=!1}_renderDecoration(a){this._refreshStyle(a),this._dimensionsChanged&&this._refreshXPosition(a)}_createElement(a){var i,s;let p=document.createElement("div");p.classList.add("xterm-decoration"),p.classList.toggle("xterm-decoration-top-layer",((i=a?.options)===null||i===void 0?void 0:i.layer)==="top"),p.style.width=`${Math.round((a.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,p.style.height=(a.options.height||1)*this._renderService.dimensions.css.cell.height+"px",p.style.top=(a.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",p.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let D=(s=a.options.x)!==null&&s!==void 0?s:0;return D&&D>this._bufferService.cols&&(p.style.display="none"),this._refreshXPosition(a,p),p}_refreshStyle(a){let i=a.marker.line-this._bufferService.buffers.active.ydisp;if(i<0||i>=this._bufferService.rows)a.element&&(a.element.style.display="none",a.onRenderEmitter.fire(a.element));else{let s=this._decorationElements.get(a);s||(s=this._createElement(a),a.element=s,this._decorationElements.set(a,s),this._container.appendChild(s),a.onDispose(()=>{this._decorationElements.delete(a),s.remove()})),s.style.top=i*this._renderService.dimensions.css.cell.height+"px",s.style.display=this._altBufferIsActive?"none":"block",a.onRenderEmitter.fire(s)}}_refreshXPosition(a,i=a.element){var s;if(!i)return;let p=(s=a.options.x)!==null&&s!==void 0?s:0;(a.options.anchor||"left")==="right"?i.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":i.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(a){var i;(i=this._decorationElements.get(a))===null||i===void 0||i.remove(),this._decorationElements.delete(a),a.dispose()}};r.BufferDecorationRenderer=d=c([l(1,g.IBufferService),l(2,g.IDecorationService),l(3,v.IRenderService)],d)},5871:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorZoneStore=void 0,r.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let c of this._zones)if(c.color===o.options.overviewRulerOptions.color&&c.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,o.marker.line))return;if(this._lineAdjacentToZone(c,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(c,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,c){return c>=o.startBufferLine&&c<=o.endBufferLine}_lineAdjacentToZone(o,c,l){return c>=o.startBufferLine-this._linePadding[l||"full"]&&c<=o.endBufferLine+this._linePadding[l||"full"]}_addLineToZone(o,c){o.startBufferLine=Math.min(o.startBufferLine,c),o.endBufferLine=Math.max(o.endBufferLine,c)}}},5744:function(_,r,o){var c=this&&this.__decorate||function(D,C,b,w){var m,y=arguments.length,M=y<3?C:w===null?w=Object.getOwnPropertyDescriptor(C,b):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,C,b,w);else for(var S=D.length-1;S>=0;S--)(m=D[S])&&(M=(y<3?m(M):y>3?m(C,b,M):m(C,b))||M);return y>3&&M&&Object.defineProperty(C,b,M),M},l=this&&this.__param||function(D,C){return function(b,w){C(b,w,D)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OverviewRulerRenderer=void 0;let u=o(5871),v=o(3656),h=o(4725),g=o(844),d=o(2585),a={full:0,left:0,center:0,right:0},i={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0},p=r.OverviewRulerRenderer=class extends g.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(D,C,b,w,m,y,M){var S;super(),this._viewportElement=D,this._screenElement=C,this._bufferService=b,this._decorationService=w,this._renderService=m,this._optionsService=y,this._coreBrowseService=M,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(S=this._viewportElement.parentElement)===null||S===void 0||S.insertBefore(this._canvas,this._viewportElement);let T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,g.toDisposable)(()=>{var L;(L=this._canvas)===null||L===void 0||L.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,v.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let D=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);i.full=this._canvas.width,i.left=D,i.center=C,i.right=D,this._refreshDrawHeightConstants(),s.full=0,s.left=0,s.center=i.left,s.right=i.left+i.center}_refreshDrawHeightConstants(){a.full=Math.round(2*this._coreBrowseService.dpr);let D=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(D,12),6)*this._coreBrowseService.dpr);a.left=C,a.center=C,a.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let D=this._colorZoneStore.zones;for(let C of D)C.position!=="full"&&this._renderColorZone(C);for(let C of D)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(D){this._ctx.fillStyle=D.color,this._ctx.fillRect(s[D.position||"full"],Math.round((this._canvas.height-1)*(D.startBufferLine/this._bufferService.buffers.active.lines.length)-a[D.position||"full"]/2),i[D.position||"full"],Math.round((this._canvas.height-1)*((D.endBufferLine-D.startBufferLine)/this._bufferService.buffers.active.lines.length)+a[D.position||"full"]))}_queueRefresh(D,C){this._shouldUpdateDimensions=D||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r.OverviewRulerRenderer=p=c([l(2,d.IBufferService),l(3,d.IDecorationService),l(4,h.IRenderService),l(5,d.IOptionsService),l(6,h.ICoreBrowserService)],p)},2950:function(_,r,o){var c=this&&this.__decorate||function(d,a,i,s){var p,D=arguments.length,C=D<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,a,i,s);else for(var b=d.length-1;b>=0;b--)(p=d[b])&&(C=(D<3?p(C):D>3?p(a,i,C):p(a,i))||C);return D>3&&C&&Object.defineProperty(a,i,C),C},l=this&&this.__param||function(d,a){return function(i,s){a(i,s,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionHelper=void 0;let u=o(4725),v=o(2585),h=o(2584),g=r.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,a,i,s,p,D){this._textarea=d,this._compositionView=a,this._bufferService=i,this._optionsService=s,this._coreService=p,this._renderService=D,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){let a={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let i;this._isSendingComposition=!1,a.start+=this._dataAlreadySent.length,i=this._isComposing?this._textarea.value.substring(a.start,a.end):this._textarea.value.substring(a.start),i.length>0&&this._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;let a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}}_handleAnyTextareaChanges(){let d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let a=this._textarea.value,i=a.replace(d,"");this._dataAlreadySent=i,a.length>d.length?this._coreService.triggerDataEvent(i,!0):a.length<d.length?this._coreService.triggerDataEvent(`${h.C0.DEL}`,!0):a.length===d.length&&a!==d&&this._coreService.triggerDataEvent(a,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let a=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,p=a*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=p+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let D=this._compositionView.getBoundingClientRect();this._textarea.style.left=p+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(D.width,1)+"px",this._textarea.style.height=Math.max(D.height,1)+"px",this._textarea.style.lineHeight=D.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};r.CompositionHelper=g=c([l(2,v.IBufferService),l(3,v.IOptionsService),l(4,v.ICoreService),l(5,u.IRenderService)],g)},9806:(_,r)=>{function o(c,l,u){let v=u.getBoundingClientRect(),h=c.getComputedStyle(u),g=parseInt(h.getPropertyValue("padding-left")),d=parseInt(h.getPropertyValue("padding-top"));return[l.clientX-v.left-g,l.clientY-v.top-d]}Object.defineProperty(r,"__esModule",{value:!0}),r.getCoords=r.getCoordsRelativeToElement=void 0,r.getCoordsRelativeToElement=o,r.getCoords=function(c,l,u,v,h,g,d,a,i){if(!g)return;let s=o(c,l,u);return s?(s[0]=Math.ceil((s[0]+(i?d/2:0))/d),s[1]=Math.ceil(s[1]/a),s[0]=Math.min(Math.max(s[0],1),v+(i?1:0)),s[1]=Math.min(Math.max(s[1],1),h),s):void 0}},9504:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.moveToCellSequence=void 0;let c=o(2584);function l(a,i,s,p){let D=a-u(a,s),C=i-u(i,s),b=Math.abs(D-C)-function(w,m,y){let M=0,S=w-u(w,y),T=m-u(m,y);for(let L=0;L<Math.abs(S-T);L++){let I=v(w,m)==="A"?-1:1,R=y.buffer.lines.get(S+I*L);R?.isWrapped&&M++}return M}(a,i,s);return d(b,g(v(a,i),p))}function u(a,i){let s=0,p=i.buffer.lines.get(a),D=p?.isWrapped;for(;D&&a>=0&&a<i.rows;)s++,p=i.buffer.lines.get(--a),D=p?.isWrapped;return s}function v(a,i){return a>i?"A":"B"}function h(a,i,s,p,D,C){let b=a,w=i,m="";for(;b!==s||w!==p;)b+=D?1:-1,D&&b>C.cols-1?(m+=C.buffer.translateBufferLineToString(w,!1,a,b),b=0,a=0,w++):!D&&b<0&&(m+=C.buffer.translateBufferLineToString(w,!1,0,a+1),b=C.cols-1,a=b,w--);return m+C.buffer.translateBufferLineToString(w,!1,a,b)}function g(a,i){let s=i?"O":"[";return c.C0.ESC+s+a}function d(a,i){a=Math.floor(a);let s="";for(let p=0;p<a;p++)s+=i;return s}r.moveToCellSequence=function(a,i,s,p){let D=s.buffer.x,C=s.buffer.y;if(!s.buffer.hasScrollback)return function(m,y,M,S,T,L){return l(y,S,T,L).length===0?"":d(h(m,y,m,y-u(y,T),!1,T).length,g("D",L))}(D,C,0,i,s,p)+l(C,i,s,p)+function(m,y,M,S,T,L){let I;I=l(y,S,T,L).length>0?S-u(S,T):y;let R=S,P=function(W,E,A,x,H,U){let re;return re=l(A,x,H,U).length>0?x-u(x,H):E,W<A&&re<=x||W>=A&&re<x?"C":"D"}(m,y,M,S,T,L);return d(h(m,I,M,R,P==="C",T).length,g(P,L))}(D,C,a,i,s,p);let b;if(C===i)return b=D>a?"D":"C",d(Math.abs(D-a),g(b,p));b=C>i?"D":"C";let w=Math.abs(C-i);return d(function(m,y){return y.cols-m}(C>i?a:D,s)+(w-1)*s.cols+1+((C>i?D:a)-1),g(b,p))}},1296:function(_,r,o){var c=this&&this.__decorate||function(T,L,I,R){var P,W=arguments.length,E=W<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,I):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(T,L,I,R);else for(var A=T.length-1;A>=0;A--)(P=T[A])&&(E=(W<3?P(E):W>3?P(L,I,E):P(L,I))||E);return W>3&&E&&Object.defineProperty(L,I,E),E},l=this&&this.__param||function(T,L){return function(I,R){L(I,R,T)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRenderer=void 0;let u=o(3787),v=o(2550),h=o(2223),g=o(6171),d=o(4725),a=o(8055),i=o(8460),s=o(844),p=o(2585),D="xterm-dom-renderer-owner-",C="xterm-rows",b="xterm-fg-",w="xterm-bg-",m="xterm-focus",y="xterm-selection",M=1,S=r.DomRenderer=class extends s.Disposable{constructor(T,L,I,R,P,W,E,A,x,H){super(),this._element=T,this._screenElement=L,this._viewportElement=I,this._linkifier2=R,this._charSizeService=W,this._optionsService=E,this._bufferService=A,this._coreBrowserService=x,this._themeService=H,this._terminalClass=M++,this._rowElements=[],this.onRequestRedraw=this.register(new i.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(y),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,g.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(U=>this._injectCss(U))),this._injectCss(this._themeService.colors),this._rowFactory=P.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(D+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(U=>this._handleLinkHover(U))),this.register(this._linkifier2.onHideLinkUnderline(U=>this._handleLinkLeave(U))),this.register((0,s.toDisposable)(()=>{this._element.classList.remove(D+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let I of this._rowElements)I.style.width=`${this.dimensions.css.canvas.width}px`,I.style.height=`${this.dimensions.css.cell.height}px`,I.style.lineHeight=`${this.dimensions.css.cell.height}px`,I.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let L=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=L,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let L=`${this._terminalSelector} .${C} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;L+=`${this._terminalSelector} .${C} .xterm-dim { color: ${a.color.multiplyOpacity(T.foreground,.5).css};}`,L+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,L+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",L+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,L+=`${this._terminalSelector} .${C}.${m} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${m} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,L+=`${this._terminalSelector} .${y} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${y} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${y} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(let[I,R]of T.ansi.entries())L+=`${this._terminalSelector} .${b}${I} { color: ${R.css}; }${this._terminalSelector} .${b}${I}.xterm-dim { color: ${a.color.multiplyOpacity(R,.5).css}; }${this._terminalSelector} .${w}${I} { background-color: ${R.css}; }`;L+=`${this._terminalSelector} .${b}${h.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(T.background).css}; }${this._terminalSelector} .${b}${h.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${w}${h.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=L}_setDefaultSpacing(){let T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,L){for(let I=this._rowElements.length;I<=L;I++){let R=document.createElement("div");this._rowContainer.appendChild(R),this._rowElements.push(R)}for(;this._rowElements.length>L;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,L){this._refreshRowElements(T,L),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(m)}handleFocus(){this._rowContainer.classList.add(m),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,L,I){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,L,I),this.renderRows(0,this._bufferService.rows-1),!T||!L)return;let R=T[1]-this._bufferService.buffer.ydisp,P=L[1]-this._bufferService.buffer.ydisp,W=Math.max(R,0),E=Math.min(P,this._bufferService.rows-1);if(W>=this._bufferService.rows||E<0)return;let A=document.createDocumentFragment();if(I){let x=T[0]>L[0];A.appendChild(this._createSelectionElement(W,x?L[0]:T[0],x?T[0]:L[0],E-W+1))}else{let x=R===W?T[0]:0,H=W===P?L[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(W,x,H));let U=E-W-1;if(A.appendChild(this._createSelectionElement(W+1,0,this._bufferService.cols,U)),W!==E){let re=P===E?L[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(E,0,re))}}this._selectionContainer.appendChild(A)}_createSelectionElement(T,L,I,R=1){let P=document.createElement("div");return P.style.height=R*this.dimensions.css.cell.height+"px",P.style.top=T*this.dimensions.css.cell.height+"px",P.style.left=L*this.dimensions.css.cell.width+"px",P.style.width=this.dimensions.css.cell.width*(I-L)+"px",P}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let T of this._rowElements)T.replaceChildren()}renderRows(T,L){let I=this._bufferService.buffer,R=I.ybase+I.y,P=Math.min(I.x,this._bufferService.cols-1),W=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let x=T;x<=L;x++){let H=x+I.ydisp,U=this._rowElements[x],re=I.lines.get(H);if(!U||!re)break;U.replaceChildren(...this._rowFactory.createRow(re,H,H===R,E,A,P,W,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${D}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,L,I,R,P,W){I<0&&(T=0),R<0&&(L=0);let E=this._bufferService.rows-1;I=Math.max(Math.min(I,E),0),R=Math.max(Math.min(R,E),0),P=Math.min(P,this._bufferService.cols);let A=this._bufferService.buffer,x=A.ybase+A.y,H=Math.min(A.x,P-1),U=this._optionsService.rawOptions.cursorBlink,re=this._optionsService.rawOptions.cursorStyle,oe=this._optionsService.rawOptions.cursorInactiveStyle;for(let V=I;V<=R;++V){let fe=V+A.ydisp,F=this._rowElements[V],B=A.lines.get(fe);if(!F||!B)break;F.replaceChildren(...this._rowFactory.createRow(B,fe,fe===x,re,oe,H,U,this.dimensions.css.cell.width,this._widthCache,W?V===I?T:0:-1,W?(V===R?L:P)-1:-1))}}};r.DomRenderer=S=c([l(4,p.IInstantiationService),l(5,d.ICharSizeService),l(6,p.IOptionsService),l(7,p.IBufferService),l(8,d.ICoreBrowserService),l(9,d.IThemeService)],S)},3787:function(_,r,o){var c=this&&this.__decorate||function(b,w,m,y){var M,S=arguments.length,T=S<3?w:y===null?y=Object.getOwnPropertyDescriptor(w,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(b,w,m,y);else for(var L=b.length-1;L>=0;L--)(M=b[L])&&(T=(S<3?M(T):S>3?M(w,m,T):M(w,m))||T);return S>3&&T&&Object.defineProperty(w,m,T),T},l=this&&this.__param||function(b,w){return function(m,y){w(m,y,b)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRendererRowFactory=void 0;let u=o(2223),v=o(643),h=o(511),g=o(2585),d=o(8055),a=o(4725),i=o(4269),s=o(6171),p=o(3734),D=r.DomRendererRowFactory=class{constructor(b,w,m,y,M,S,T){this._document=b,this._characterJoinerService=w,this._optionsService=m,this._coreBrowserService=y,this._coreService=M,this._decorationService=S,this._themeService=T,this._workCell=new h.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,w,m){this._selectionStart=b,this._selectionEnd=w,this._columnSelectMode=m}createRow(b,w,m,y,M,S,T,L,I,R,P){let W=[],E=this._characterJoinerService.getJoinedCharacters(w),A=this._themeService.colors,x,H=b.getNoBgTrimmedLength();m&&H<S+1&&(H=S+1);let U=0,re="",oe=0,V=0,fe=0,F=!1,B=0,q=!1,k=0,de=[],J=R!==-1&&P!==-1;for(let Fe=0;Fe<H;Fe++){b.loadCell(Fe,this._workCell);let et=this._workCell.getWidth();if(et===0)continue;let Ne=!1,Pe=Fe,qe=this._workCell;if(E.length>0&&Fe===E[0][0]){Ne=!0;let nt=E.shift();qe=new i.JoinedCellData(this._workCell,b.translateToString(!0,nt[0],nt[1]),nt[1]-nt[0]),Pe=nt[1]-1,et=qe.getWidth()}let $t=this._isCellInSelection(Fe,w),yr=m&&Fe===S,Ar=J&&Fe>=R&&Fe<=P,Tt=!1;this._decorationService.forEachDecorationAtCell(Fe,w,void 0,nt=>{Tt=!0});let se=qe.getChars()||v.WHITESPACE_CELL_CHAR;if(se===" "&&(qe.isUnderline()||qe.isOverline())&&(se="\xA0"),k=et*L-I.get(se,qe.isBold(),qe.isItalic()),x){if(U&&($t&&q||!$t&&!q&&qe.bg===oe)&&($t&&q&&A.selectionForeground||qe.fg===V)&&qe.extended.ext===fe&&Ar===F&&k===B&&!yr&&!Ne&&!Tt){re+=se,U++;continue}U&&(x.textContent=re),x=this._document.createElement("span"),U=0,re=""}else x=this._document.createElement("span");if(oe=qe.bg,V=qe.fg,fe=qe.extended.ext,F=Ar,B=k,q=$t,Ne&&S>=Fe&&S<=Pe&&(S=Fe),!this._coreService.isCursorHidden&&yr){if(de.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&de.push("xterm-cursor-blink"),de.push(y==="bar"?"xterm-cursor-bar":y==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(M)switch(M){case"outline":de.push("xterm-cursor-outline");break;case"block":de.push("xterm-cursor-block");break;case"bar":de.push("xterm-cursor-bar");break;case"underline":de.push("xterm-cursor-underline")}}if(qe.isBold()&&de.push("xterm-bold"),qe.isItalic()&&de.push("xterm-italic"),qe.isDim()&&de.push("xterm-dim"),re=qe.isInvisible()?v.WHITESPACE_CELL_CHAR:qe.getChars()||v.WHITESPACE_CELL_CHAR,qe.isUnderline()&&(de.push(`xterm-underline-${qe.extended.underlineStyle}`),re===" "&&(re="\xA0"),!qe.isUnderlineColorDefault()))if(qe.isUnderlineColorRGB())x.style.textDecorationColor=`rgb(${p.AttributeData.toColorRGB(qe.getUnderlineColor()).join(",")})`;else{let nt=qe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&qe.isBold()&&nt<8&&(nt+=8),x.style.textDecorationColor=A.ansi[nt].css}qe.isOverline()&&(de.push("xterm-overline"),re===" "&&(re="\xA0")),qe.isStrikethrough()&&de.push("xterm-strikethrough"),Ar&&(x.style.textDecoration="underline");let ue=qe.getFgColor(),ne=qe.getFgColorMode(),X=qe.getBgColor(),he=qe.getBgColorMode(),Be=!!qe.isInverse();if(Be){let nt=ue;ue=X,X=nt;let kn=ne;ne=he,he=kn}let ze,xt,ar,lr=!1;switch(this._decorationService.forEachDecorationAtCell(Fe,w,void 0,nt=>{nt.options.layer!=="top"&&lr||(nt.backgroundColorRGB&&(he=50331648,X=nt.backgroundColorRGB.rgba>>8&16777215,ze=nt.backgroundColorRGB),nt.foregroundColorRGB&&(ne=50331648,ue=nt.foregroundColorRGB.rgba>>8&16777215,xt=nt.foregroundColorRGB),lr=nt.options.layer==="top")}),!lr&&$t&&(ze=this._coreBrowserService.isFocused?A.selectionBackgroundOpaque:A.selectionInactiveBackgroundOpaque,X=ze.rgba>>8&16777215,he=50331648,lr=!0,A.selectionForeground&&(ne=50331648,ue=A.selectionForeground.rgba>>8&16777215,xt=A.selectionForeground)),lr&&de.push("xterm-decoration-top"),he){case 16777216:case 33554432:ar=A.ansi[X],de.push(`xterm-bg-${X}`);break;case 50331648:ar=d.rgba.toColor(X>>16,X>>8&255,255&X),this._addStyle(x,`background-color:#${C((X>>>0).toString(16),"0",6)}`);break;default:Be?(ar=A.foreground,de.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):ar=A.background}switch(ze||qe.isDim()&&(ze=d.color.multiplyOpacity(ar,.5)),ne){case 16777216:case 33554432:qe.isBold()&&ue<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ue+=8),this._applyMinimumContrast(x,ar,A.ansi[ue],qe,ze,void 0)||de.push(`xterm-fg-${ue}`);break;case 50331648:let nt=d.rgba.toColor(ue>>16&255,ue>>8&255,255&ue);this._applyMinimumContrast(x,ar,nt,qe,ze,xt)||this._addStyle(x,`color:#${C(ue.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(x,ar,A.foreground,qe,ze,void 0)||Be&&de.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}de.length&&(x.className=de.join(" "),de.length=0),yr||Ne||Tt?x.textContent=re:U++,k!==this.defaultSpacing&&(x.style.letterSpacing=`${k}px`),W.push(x),Fe=Pe}return x&&U&&(x.textContent=re),W}_applyMinimumContrast(b,w,m,y,M,S){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,s.excludeFromContrastRatioDemands)(y.getCode()))return!1;let T=this._getContrastCache(y),L;if(M||S||(L=T.getColor(w.rgba,m.rgba)),L===void 0){let I=this._optionsService.rawOptions.minimumContrastRatio/(y.isDim()?2:1);L=d.color.ensureContrastRatio(M||w,S||m,I),T.setColor((M||w).rgba,(S||m).rgba,L??null)}return!!L&&(this._addStyle(b,`color:${L.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,w){b.setAttribute("style",`${b.getAttribute("style")||""}${w};`)}_isCellInSelection(b,w){let m=this._selectionStart,y=this._selectionEnd;return!(!m||!y)&&(this._columnSelectMode?m[0]<=y[0]?b>=m[0]&&w>=m[1]&&b<y[0]&&w<=y[1]:b<m[0]&&w>=m[1]&&b>=y[0]&&w<=y[1]:w>m[1]&&w<y[1]||m[1]===y[1]&&w===m[1]&&b>=m[0]&&b<y[0]||m[1]<y[1]&&w===y[1]&&b<y[0]||m[1]<y[1]&&w===m[1]&&b>=m[0])}};function C(b,w,m){for(;b.length<m;)b=w+b;return b}r.DomRendererRowFactory=D=c([l(1,a.ICharacterJoinerService),l(2,g.IOptionsService),l(3,a.ICoreBrowserService),l(4,g.ICoreService),l(5,g.IDecorationService),l(6,a.IThemeService)],D)},2550:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WidthCache=void 0,r.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let c=o.createElement("span"),l=o.createElement("span");l.style.fontWeight="bold";let u=o.createElement("span");u.style.fontStyle="italic";let v=o.createElement("span");v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[c,l,u,v],this._container.appendChild(c),this._container.appendChild(l),this._container.appendChild(u),this._container.appendChild(v),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,c,l,u){o===this._font&&c===this._fontSize&&l===this._weight&&u===this._weightBold||(this._font=o,this._fontSize=c,this._weight=l,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${l}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${l}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(o,c,l){let u=0;if(!c&&!l&&o.length===1&&(u=o.charCodeAt(0))<256)return this._flat[u]!==-9999?this._flat[u]:this._flat[u]=this._measure(o,0);let v=o;c&&(v+="B"),l&&(v+="I");let h=this._holey.get(v);if(h===void 0){let g=0;c&&(g|=1),l&&(g|=2),h=this._measure(o,g),this._holey.set(v,h)}return h}_measure(o,c){let l=this._measureElements[c];return l.textContent=o.repeat(32),l.offsetWidth/32}}},2223:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;let c=o(6114);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(_,r)=>{function o(c){return 57508<=c&&c<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},r.isPowerlineGlyph=o,r.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},r.excludeFromContrastRatioDemands=function(c){return o(c)||function(l){return 9472<=l&&l<=9631}(c)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionModel=void 0,r.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,c=this.selectionEnd;return!(!o||!c)&&(o[1]>c[1]||o[1]===c[1]&&o[0]>c[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(_,r,o){var c=this&&this.__decorate||function(a,i,s,p){var D,C=arguments.length,b=C<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,s):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,p);else for(var w=a.length-1;w>=0;w--)(D=a[w])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},l=this&&this.__param||function(a,i){return function(s,p){i(s,p,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharSizeService=void 0;let u=o(2585),v=o(8460),h=o(844),g=r.CharSizeService=class extends h.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,i,s){super(),this._optionsService=s,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new d(a,i,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};r.CharSizeService=g=c([l(2,u.IOptionsService)],g);class d{constructor(i,s,p){this._document=i,this._parentElement=s,this._optionsService=p,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let i={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return i.width!==0&&i.height!==0&&(this._result.width=i.width/32,this._result.height=Math.ceil(i.height)),this._result}}},4269:function(_,r,o){var c=this&&this.__decorate||function(i,s,p,D){var C,b=arguments.length,w=b<3?s:D===null?D=Object.getOwnPropertyDescriptor(s,p):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(i,s,p,D);else for(var m=i.length-1;m>=0;m--)(C=i[m])&&(w=(b<3?C(w):b>3?C(s,p,w):C(s,p))||w);return b>3&&w&&Object.defineProperty(s,p,w),w},l=this&&this.__param||function(i,s){return function(p,D){s(p,D,i)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterJoinerService=r.JoinedCellData=void 0;let u=o(3734),v=o(643),h=o(511),g=o(2585);class d extends u.AttributeData{constructor(s,p,D){super(),this.content=0,this.combinedData="",this.fg=s.fg,this.bg=s.bg,this.combinedData=p,this._width=D}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(s){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.JoinedCellData=d;let a=r.CharacterJoinerService=class EE{constructor(s){this._bufferService=s,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new h.CellData}register(s){let p={id:this._nextCharacterJoinerId++,handler:s};return this._characterJoiners.push(p),p.id}deregister(s){for(let p=0;p<this._characterJoiners.length;p++)if(this._characterJoiners[p].id===s)return this._characterJoiners.splice(p,1),!0;return!1}getJoinedCharacters(s){if(this._characterJoiners.length===0)return[];let p=this._bufferService.buffer.lines.get(s);if(!p||p.length===0)return[];let D=[],C=p.translateToString(!0),b=0,w=0,m=0,y=p.getFg(0),M=p.getBg(0);for(let S=0;S<p.getTrimmedLength();S++)if(p.loadCell(S,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==M){if(S-b>1){let T=this._getJoinedRanges(C,m,w,p,b);for(let L=0;L<T.length;L++)D.push(T[L])}b=S,m=w,y=this._workCell.fg,M=this._workCell.bg}w+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){let S=this._getJoinedRanges(C,m,w,p,b);for(let T=0;T<S.length;T++)D.push(S[T])}return D}_getJoinedRanges(s,p,D,C,b){let w=s.substring(p,D),m=[];try{m=this._characterJoiners[0].handler(w)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{let M=this._characterJoiners[y].handler(w);for(let S=0;S<M.length;S++)EE._mergeRanges(m,M[S])}catch(M){console.error(M)}return this._stringRangesToCellRanges(m,C,b),m}_stringRangesToCellRanges(s,p,D){let C=0,b=!1,w=0,m=s[C];if(m){for(let y=D;y<this._bufferService.cols;y++){let M=p.getWidth(y),S=p.getString(y).length||v.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!b&&m[0]<=w&&(m[0]=y,b=!0),m[1]<=w){if(m[1]=y,m=s[++C],!m)break;m[0]<=w?(m[0]=y,b=!0):b=!1}w+=S}}m&&(m[1]=this._bufferService.cols)}}static _mergeRanges(s,p){let D=!1;for(let C=0;C<s.length;C++){let b=s[C];if(D){if(p[1]<=b[0])return s[C-1][1]=p[1],s;if(p[1]<=b[1])return s[C-1][1]=Math.max(p[1],b[1]),s.splice(C,1),s;s.splice(C,1),C--}else{if(p[1]<=b[0])return s.splice(C,0,p),s;if(p[1]<=b[1])return b[0]=Math.min(p[0],b[0]),s;p[0]<b[1]&&(b[0]=Math.min(p[0],b[0]),D=!0)}}return D?s[s.length-1][1]=p[1]:s.push(p),s}};r.CharacterJoinerService=a=c([l(0,g.IBufferService)],a)},5114:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreBrowserService=void 0,r.CoreBrowserService=class{constructor(o,c){this._textarea=o,this.window=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(_,r,o){var c=this&&this.__decorate||function(g,d,a,i){var s,p=arguments.length,D=p<3?d:i===null?i=Object.getOwnPropertyDescriptor(d,a):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,d,a,i);else for(var C=g.length-1;C>=0;C--)(s=g[C])&&(D=(p<3?s(D):p>3?s(d,a,D):s(d,a))||D);return p>3&&D&&Object.defineProperty(d,a,D),D},l=this&&this.__param||function(g,d){return function(a,i){d(a,i,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseService=void 0;let u=o(4725),v=o(9806),h=r.MouseService=class{constructor(g,d){this._renderService=g,this._charSizeService=d}getCoords(g,d,a,i,s){return(0,v.getCoords)(window,g,d,a,i,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,s)}getMouseReportCoords(g,d){let a=(0,v.getCoordsRelativeToElement)(window,g,d);if(this._charSizeService.hasValidSize)return a[0]=Math.min(Math.max(a[0],0),this._renderService.dimensions.css.canvas.width-1),a[1]=Math.min(Math.max(a[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(a[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(a[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(a[0]),y:Math.floor(a[1])}}};r.MouseService=h=c([l(0,u.IRenderService),l(1,u.ICharSizeService)],h)},3230:function(_,r,o){var c=this&&this.__decorate||function(D,C,b,w){var m,y=arguments.length,M=y<3?C:w===null?w=Object.getOwnPropertyDescriptor(C,b):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,C,b,w);else for(var S=D.length-1;S>=0;S--)(m=D[S])&&(M=(y<3?m(M):y>3?m(C,b,M):m(C,b))||M);return y>3&&M&&Object.defineProperty(C,b,M),M},l=this&&this.__param||function(D,C){return function(b,w){C(b,w,D)}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderService=void 0;let u=o(3656),v=o(6193),h=o(5596),g=o(4725),d=o(8460),a=o(844),i=o(7226),s=o(2585),p=r.RenderService=class extends a.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(D,C,b,w,m,y,M,S){if(super(),this._rowCount=D,this._charSizeService=w,this._renderer=this.register(new a.MutableDisposable),this._pausedResizeTask=new i.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new d.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new d.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new d.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new d.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer(M.window,(T,L)=>this._renderRows(T,L)),this.register(this._renderDebouncer),this._screenDprMonitor=new h.ScreenDprMonitor(M.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(y.onResize(()=>this._fullRefresh())),this.register(y.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(m.onDecorationRegistered(()=>this._fullRefresh())),this.register(m.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(y.cols,y.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(y.buffer.y,y.buffer.y,!0))),this.register((0,u.addDisposableDomListener)(M.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(S.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in M.window){let T=new M.window.IntersectionObserver(L=>this._handleIntersectionChange(L[L.length-1]),{threshold:0});T.observe(C),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(D){this._isPaused=D.isIntersecting===void 0?D.intersectionRatio===0:!D.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(D,C,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(D,C,this._rowCount))}_renderRows(D,C){this._renderer.value&&(D=Math.min(D,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(D,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:D,end:C}),this._onRender.fire({start:D,end:C}),this._isNextRenderRedrawOnly=!0)}resize(D,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(D){this._renderer.value=D,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(D){return this._renderDebouncer.addRefreshCallback(D)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var D,C;this._renderer.value&&((C=(D=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(D),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(D,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(D,C)):this._renderer.value.handleResize(D,C),this._fullRefresh())}handleCharSizeChanged(){var D;(D=this._renderer.value)===null||D===void 0||D.handleCharSizeChanged()}handleBlur(){var D;(D=this._renderer.value)===null||D===void 0||D.handleBlur()}handleFocus(){var D;(D=this._renderer.value)===null||D===void 0||D.handleFocus()}handleSelectionChanged(D,C,b){var w;this._selectionState.start=D,this._selectionState.end=C,this._selectionState.columnSelectMode=b,(w=this._renderer.value)===null||w===void 0||w.handleSelectionChanged(D,C,b)}handleCursorMove(){var D;(D=this._renderer.value)===null||D===void 0||D.handleCursorMove()}clear(){var D;(D=this._renderer.value)===null||D===void 0||D.clear()}};r.RenderService=p=c([l(2,s.IOptionsService),l(3,g.ICharSizeService),l(4,s.IDecorationService),l(5,s.IBufferService),l(6,g.ICoreBrowserService),l(7,g.IThemeService)],p)},9312:function(_,r,o){var c=this&&this.__decorate||function(m,y,M,S){var T,L=arguments.length,I=L<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,M):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(m,y,M,S);else for(var R=m.length-1;R>=0;R--)(T=m[R])&&(I=(L<3?T(I):L>3?T(y,M,I):T(y,M))||I);return L>3&&I&&Object.defineProperty(y,M,I),I},l=this&&this.__param||function(m,y){return function(M,S){y(M,S,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionService=void 0;let u=o(9806),v=o(9504),h=o(456),g=o(4725),d=o(8460),a=o(844),i=o(6114),s=o(4841),p=o(511),D=o(2585),C="\xA0",b=new RegExp(C,"g"),w=r.SelectionService=class extends a.Disposable{constructor(m,y,M,S,T,L,I,R,P){super(),this._element=m,this._screenElement=y,this._linkifier=M,this._bufferService=S,this._coreService=T,this._mouseService=L,this._optionsService=I,this._renderService=R,this._coreBrowserService=P,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new p.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=W=>this._handleMouseMove(W),this._mouseUpListener=W=>this._handleMouseUp(W),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(W=>this._handleTrim(W)),this.register(this._bufferService.buffers.onBufferActivate(W=>this._handleBufferActivate(W))),this.enable(),this._model=new h.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,a.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let m=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!m||!y||m[0]===y[0]&&m[1]===y[1])}get selectionText(){let m=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!m||!y)return"";let M=this._bufferService.buffer,S=[];if(this._activeSelectionMode===3){if(m[0]===y[0])return"";let T=m[0]<y[0]?m[0]:y[0],L=m[0]<y[0]?y[0]:m[0];for(let I=m[1];I<=y[1];I++){let R=M.translateBufferLineToString(I,!0,T,L);S.push(R)}}else{let T=m[1]===y[1]?y[0]:void 0;S.push(M.translateBufferLineToString(m[1],!0,m[0],T));for(let L=m[1]+1;L<=y[1]-1;L++){let I=M.lines.get(L),R=M.translateBufferLineToString(L,!0);I?.isWrapped?S[S.length-1]+=R:S.push(R)}if(m[1]!==y[1]){let L=M.lines.get(y[1]),I=M.translateBufferLineToString(y[1],!0,0,y[0]);L&&L.isWrapped?S[S.length-1]+=I:S.push(I)}}return S.map(T=>T.replace(b," ")).join(i.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(m){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),i.isLinux&&m&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(m){let y=this._getMouseBufferCoords(m),M=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!!(M&&S&&y)&&this._areCoordsInSelection(y,M,S)}isCellInSelection(m,y){let M=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!(!M||!S)&&this._areCoordsInSelection([m,y],M,S)}_areCoordsInSelection(m,y,M){return m[1]>y[1]&&m[1]<M[1]||y[1]===M[1]&&m[1]===y[1]&&m[0]>=y[0]&&m[0]<M[0]||y[1]<M[1]&&m[1]===M[1]&&m[0]<M[0]||y[1]<M[1]&&m[1]===y[1]&&m[0]>=y[0]}_selectWordAtCursor(m,y){var M,S;let T=(S=(M=this._linkifier.currentLink)===null||M===void 0?void 0:M.link)===null||S===void 0?void 0:S.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,s.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let L=this._getMouseBufferCoords(m);return!!L&&(this._selectWordAt(L,y),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(m,y){this._model.clearSelection(),m=Math.max(m,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,m],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()}_handleTrim(m){this._model.handleTrim(m)&&this.refresh()}_getMouseBufferCoords(m){let y=this._mouseService.getCoords(m,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y}_getMouseEventScrollAmount(m){let y=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,m,this._screenElement)[1],M=this._renderService.dimensions.css.canvas.height;return y>=0&&y<=M?0:(y>M&&(y-=M),y=Math.min(Math.max(y,-50),50),y/=50,y/Math.abs(y)+Math.round(14*y))}shouldForceSelection(m){return i.isMac?m.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:m.shiftKey}handleMouseDown(m){if(this._mouseDownTimeStamp=m.timeStamp,(m.button!==2||!this.hasSelection)&&m.button===0){if(!this._enabled){if(!this.shouldForceSelection(m))return;m.stopPropagation()}m.preventDefault(),this._dragScrollAmount=0,this._enabled&&m.shiftKey?this._handleIncrementalClick(m):m.detail===1?this._handleSingleClick(m):m.detail===2?this._handleDoubleClick(m):m.detail===3&&this._handleTripleClick(m),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(m){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(m))}_handleSingleClick(m){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(m)?3:0,this._model.selectionStart=this._getMouseBufferCoords(m),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(m){this._selectWordAtCursor(m,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(m){let y=this._getMouseBufferCoords(m);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))}shouldColumnSelect(m){return m.altKey&&!(i.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(m){if(m.stopImmediatePropagation(),!this._model.selectionStart)return;let y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(m),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(m),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let M=this._bufferService.buffer;if(this._model.selectionEnd[1]<M.lines.length){let S=M.lines.get(this._model.selectionEnd[1]);S&&S.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let m=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(m.ydisp+this._bufferService.rows,m.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=m.ydisp),this.refresh()}}_handleMouseUp(m){let y=m.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500&&m.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let M=this._mouseService.getCoords(m,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(M&&M[0]!==void 0&&M[1]!==void 0){let S=(0,v.moveToCellSequence)(M[0]-1,M[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(S,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let m=this._model.finalSelectionStart,y=this._model.finalSelectionEnd,M=!(!m||!y||m[0]===y[0]&&m[1]===y[1]);M?m&&y&&(this._oldSelectionStart&&this._oldSelectionEnd&&m[0]===this._oldSelectionStart[0]&&m[1]===this._oldSelectionStart[1]&&y[0]===this._oldSelectionEnd[0]&&y[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(m,y,M)):this._oldHasSelection&&this._fireOnSelectionChange(m,y,M)}_fireOnSelectionChange(m,y,M){this._oldSelectionStart=m,this._oldSelectionEnd=y,this._oldHasSelection=M,this._onSelectionChange.fire()}_handleBufferActivate(m){this.clearSelection(),this._trimListener.dispose(),this._trimListener=m.activeBuffer.lines.onTrim(y=>this._handleTrim(y))}_convertViewportColToCharacterIndex(m,y){let M=y;for(let S=0;y>=S;S++){let T=m.loadCell(S,this._workCell).getChars().length;this._workCell.getWidth()===0?M--:T>1&&y!==S&&(M+=T-1)}return M}setSelection(m,y,M){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[m,y],this._model.selectionStartLength=M,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(m){this._isClickInSelection(m)||(this._selectWordAtCursor(m,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(m,y,M=!0,S=!0){if(m[0]>=this._bufferService.cols)return;let T=this._bufferService.buffer,L=T.lines.get(m[1]);if(!L)return;let I=T.translateBufferLineToString(m[1],!1),R=this._convertViewportColToCharacterIndex(L,m[0]),P=R,W=m[0]-R,E=0,A=0,x=0,H=0;if(I.charAt(R)===" "){for(;R>0&&I.charAt(R-1)===" ";)R--;for(;P<I.length&&I.charAt(P+1)===" ";)P++}else{let oe=m[0],V=m[0];L.getWidth(oe)===0&&(E++,oe--),L.getWidth(V)===2&&(A++,V++);let fe=L.getString(V).length;for(fe>1&&(H+=fe-1,P+=fe-1);oe>0&&R>0&&!this._isCharWordSeparator(L.loadCell(oe-1,this._workCell));){L.loadCell(oe-1,this._workCell);let F=this._workCell.getChars().length;this._workCell.getWidth()===0?(E++,oe--):F>1&&(x+=F-1,R-=F-1),R--,oe--}for(;V<L.length&&P+1<I.length&&!this._isCharWordSeparator(L.loadCell(V+1,this._workCell));){L.loadCell(V+1,this._workCell);let F=this._workCell.getChars().length;this._workCell.getWidth()===2?(A++,V++):F>1&&(H+=F-1,P+=F-1),P++,V++}}P++;let U=R+W-E+x,re=Math.min(this._bufferService.cols,P-R+E+A-x-H);if(y||I.slice(R,P).trim()!==""){if(M&&U===0&&L.getCodePoint(0)!==32){let oe=T.lines.get(m[1]-1);if(oe&&L.isWrapped&&oe.getCodePoint(this._bufferService.cols-1)!==32){let V=this._getWordAt([this._bufferService.cols-1,m[1]-1],!1,!0,!1);if(V){let fe=this._bufferService.cols-V.start;U-=fe,re+=fe}}}if(S&&U+re===this._bufferService.cols&&L.getCodePoint(this._bufferService.cols-1)!==32){let oe=T.lines.get(m[1]+1);if(oe?.isWrapped&&oe.getCodePoint(0)!==32){let V=this._getWordAt([0,m[1]+1],!1,!1,!0);V&&(re+=V.length)}}return{start:U,length:re}}}_selectWordAt(m,y){let M=this._getWordAt(m,y);if(M){for(;M.start<0;)M.start+=this._bufferService.cols,m[1]--;this._model.selectionStart=[M.start,m[1]],this._model.selectionStartLength=M.length}}_selectToWordAt(m){let y=this._getWordAt(m,!0);if(y){let M=m[1];for(;y.start<0;)y.start+=this._bufferService.cols,M--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,M++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,M]}}_isCharWordSeparator(m){return m.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(m.getChars())>=0}_selectLineAt(m){let y=this._bufferService.buffer.getWrappedRangeForLine(m),M={start:{x:0,y:y.first},end:{x:this._bufferService.cols-1,y:y.last}};this._model.selectionStart=[0,y.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,s.getRangeLength)(M,this._bufferService.cols)}};r.SelectionService=w=c([l(3,D.IBufferService),l(4,D.ICoreService),l(5,g.IMouseService),l(6,D.IOptionsService),l(7,g.IRenderService),l(8,g.ICoreBrowserService)],w)},4725:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IThemeService=r.ICharacterJoinerService=r.ISelectionService=r.IRenderService=r.IMouseService=r.ICoreBrowserService=r.ICharSizeService=void 0;let c=o(8343);r.ICharSizeService=(0,c.createDecorator)("CharSizeService"),r.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),r.IMouseService=(0,c.createDecorator)("MouseService"),r.IRenderService=(0,c.createDecorator)("RenderService"),r.ISelectionService=(0,c.createDecorator)("SelectionService"),r.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),r.IThemeService=(0,c.createDecorator)("ThemeService")},6731:function(_,r,o){var c=this&&this.__decorate||function(w,m,y,M){var S,T=arguments.length,L=T<3?m:M===null?M=Object.getOwnPropertyDescriptor(m,y):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(w,m,y,M);else for(var I=w.length-1;I>=0;I--)(S=w[I])&&(L=(T<3?S(L):T>3?S(m,y,L):S(m,y))||L);return T>3&&L&&Object.defineProperty(m,y,L),L},l=this&&this.__param||function(w,m){return function(y,M){m(y,M,w)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeService=r.DEFAULT_ANSI_COLORS=void 0;let u=o(7239),v=o(8055),h=o(8460),g=o(844),d=o(2585),a=v.css.toColor("#ffffff"),i=v.css.toColor("#000000"),s=v.css.toColor("#ffffff"),p=v.css.toColor("#000000"),D={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};r.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let w=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],m=[0,95,135,175,215,255];for(let y=0;y<216;y++){let M=m[y/36%6|0],S=m[y/6%6|0],T=m[y%6];w.push({css:v.channels.toCss(M,S,T),rgba:v.channels.toRgba(M,S,T)})}for(let y=0;y<24;y++){let M=8+10*y;w.push({css:v.channels.toCss(M,M,M),rgba:v.channels.toRgba(M,M,M)})}return w})());let C=r.ThemeService=class extends g.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new h.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:a,background:i,cursor:s,cursorAccent:p,selectionForeground:void 0,selectionBackgroundTransparent:D,selectionBackgroundOpaque:v.color.blend(i,D),selectionInactiveBackgroundTransparent:D,selectionInactiveBackgroundOpaque:v.color.blend(i,D),ansi:r.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(w={}){let m=this._colors;if(m.foreground=b(w.foreground,a),m.background=b(w.background,i),m.cursor=b(w.cursor,s),m.cursorAccent=b(w.cursorAccent,p),m.selectionBackgroundTransparent=b(w.selectionBackground,D),m.selectionBackgroundOpaque=v.color.blend(m.background,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundTransparent=b(w.selectionInactiveBackground,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundOpaque=v.color.blend(m.background,m.selectionInactiveBackgroundTransparent),m.selectionForeground=w.selectionForeground?b(w.selectionForeground,v.NULL_COLOR):void 0,m.selectionForeground===v.NULL_COLOR&&(m.selectionForeground=void 0),v.color.isOpaque(m.selectionBackgroundTransparent)&&(m.selectionBackgroundTransparent=v.color.opacity(m.selectionBackgroundTransparent,.3)),v.color.isOpaque(m.selectionInactiveBackgroundTransparent)&&(m.selectionInactiveBackgroundTransparent=v.color.opacity(m.selectionInactiveBackgroundTransparent,.3)),m.ansi=r.DEFAULT_ANSI_COLORS.slice(),m.ansi[0]=b(w.black,r.DEFAULT_ANSI_COLORS[0]),m.ansi[1]=b(w.red,r.DEFAULT_ANSI_COLORS[1]),m.ansi[2]=b(w.green,r.DEFAULT_ANSI_COLORS[2]),m.ansi[3]=b(w.yellow,r.DEFAULT_ANSI_COLORS[3]),m.ansi[4]=b(w.blue,r.DEFAULT_ANSI_COLORS[4]),m.ansi[5]=b(w.magenta,r.DEFAULT_ANSI_COLORS[5]),m.ansi[6]=b(w.cyan,r.DEFAULT_ANSI_COLORS[6]),m.ansi[7]=b(w.white,r.DEFAULT_ANSI_COLORS[7]),m.ansi[8]=b(w.brightBlack,r.DEFAULT_ANSI_COLORS[8]),m.ansi[9]=b(w.brightRed,r.DEFAULT_ANSI_COLORS[9]),m.ansi[10]=b(w.brightGreen,r.DEFAULT_ANSI_COLORS[10]),m.ansi[11]=b(w.brightYellow,r.DEFAULT_ANSI_COLORS[11]),m.ansi[12]=b(w.brightBlue,r.DEFAULT_ANSI_COLORS[12]),m.ansi[13]=b(w.brightMagenta,r.DEFAULT_ANSI_COLORS[13]),m.ansi[14]=b(w.brightCyan,r.DEFAULT_ANSI_COLORS[14]),m.ansi[15]=b(w.brightWhite,r.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){let y=Math.min(m.ansi.length-16,w.extendedAnsi.length);for(let M=0;M<y;M++)m.ansi[M+16]=b(w.extendedAnsi[M],r.DEFAULT_ANSI_COLORS[M+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let m=0;m<this._restoreColors.ansi.length;++m)this._colors.ansi[m]=this._restoreColors.ansi[m]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(w,m){if(w!==void 0)try{return v.css.toColor(w)}catch{}return m}r.ThemeService=C=c([l(0,d.IOptionsService)],C)},6349:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CircularList=void 0;let c=o(8460),l=o(844);class u extends l.Disposable{constructor(h){super(),this._maxLength=h,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(h){if(this._maxLength===h)return;let g=new Array(h);for(let d=0;d<Math.min(h,this.length);d++)g[d]=this._array[this._getCyclicIndex(d)];this._array=g,this._maxLength=h,this._startIndex=0}get length(){return this._length}set length(h){if(h>this._length)for(let g=this._length;g<h;g++)this._array[g]=void 0;this._length=h}get(h){return this._array[this._getCyclicIndex(h)]}set(h,g){this._array[this._getCyclicIndex(h)]=g}push(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(h,g,...d){if(g){for(let a=h;a<this._length-g;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+g)];this._length-=g,this.onDeleteEmitter.fire({index:h,amount:g})}for(let a=this._length-1;a>=h;a--)this._array[this._getCyclicIndex(a+d.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<d.length;a++)this._array[this._getCyclicIndex(h+a)]=d[a];if(d.length&&this.onInsertEmitter.fire({index:h,amount:d.length}),this._length+d.length>this._maxLength){let a=this._length+d.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=d.length}trimStart(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)}shiftElements(h,g,d){if(!(g<=0)){if(h<0||h>=this._length)throw new Error("start argument out of range");if(h+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let i=g-1;i>=0;i--)this.set(h+i+d,this.get(h+i));let a=h+g+d-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<g;a++)this.set(h+a+d,this.get(h+a))}}_getCyclicIndex(h){return(this._startIndex+h)%this._maxLength}}r.CircularList=u},1439:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.clone=function o(c,l=5){if(typeof c!="object")return c;let u=Array.isArray(c)?[]:{};for(let v in c)u[v]=l<=1?c[v]:c[v]&&o(c[v],l-1);return u}},8055:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let c=o(6114),l=0,u=0,v=0,h=0;var g,d,a,i,s;function p(C){let b=C.toString(16);return b.length<2?"0"+b:b}function D(C,b){return C<b?(b+.05)/(C+.05):(C+.05)/(b+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(b,w,m,y){return y!==void 0?`#${p(b)}${p(w)}${p(m)}${p(y)}`:`#${p(b)}${p(w)}${p(m)}`},C.toRgba=function(b,w,m,y=255){return(b<<24|w<<16|m<<8|y)>>>0}}(g||(r.channels=g={})),function(C){function b(w,m){return h=Math.round(255*m),[l,u,v]=s.toChannels(w.rgba),{css:g.toCss(l,u,v,h),rgba:g.toRgba(l,u,v,h)}}C.blend=function(w,m){if(h=(255&m.rgba)/255,h===1)return{css:m.css,rgba:m.rgba};let y=m.rgba>>24&255,M=m.rgba>>16&255,S=m.rgba>>8&255,T=w.rgba>>24&255,L=w.rgba>>16&255,I=w.rgba>>8&255;return l=T+Math.round((y-T)*h),u=L+Math.round((M-L)*h),v=I+Math.round((S-I)*h),{css:g.toCss(l,u,v),rgba:g.toRgba(l,u,v)}},C.isOpaque=function(w){return(255&w.rgba)==255},C.ensureContrastRatio=function(w,m,y){let M=s.ensureContrastRatio(w.rgba,m.rgba,y);if(M)return s.toColor(M>>24&255,M>>16&255,M>>8&255)},C.opaque=function(w){let m=(255|w.rgba)>>>0;return[l,u,v]=s.toChannels(m),{css:g.toCss(l,u,v),rgba:m}},C.opacity=b,C.multiplyOpacity=function(w,m){return h=255&w.rgba,b(w,h*m/255)},C.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(d||(r.color=d={})),function(C){let b,w;if(!c.isNode){let m=document.createElement("canvas");m.width=1,m.height=1;let y=m.getContext("2d",{willReadFrequently:!0});y&&(b=y,b.globalCompositeOperation="copy",w=b.createLinearGradient(0,0,1,1))}C.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return l=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),v=parseInt(m.slice(3,4).repeat(2),16),s.toColor(l,u,v);case 5:return l=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),v=parseInt(m.slice(3,4).repeat(2),16),h=parseInt(m.slice(4,5).repeat(2),16),s.toColor(l,u,v,h);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}let y=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(y)return l=parseInt(y[1]),u=parseInt(y[2]),v=parseInt(y[3]),h=Math.round(255*(y[5]===void 0?1:parseFloat(y[5]))),s.toColor(l,u,v,h);if(!b||!w)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=w,b.fillStyle=m,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[l,u,v,h]=b.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(l,u,v,h),css:m}}}(a||(r.css=a={})),function(C){function b(w,m,y){let M=w/255,S=m/255,T=y/255;return .2126*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(w){return b(w>>16&255,w>>8&255,255&w)},C.relativeLuminance2=b}(i||(r.rgb=i={})),function(C){function b(m,y,M){let S=m>>24&255,T=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,T,L));for(;W<M&&(I>0||R>0||P>0);)I-=Math.max(0,Math.ceil(.1*I)),R-=Math.max(0,Math.ceil(.1*R)),P-=Math.max(0,Math.ceil(.1*P)),W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,T,L));return(I<<24|R<<16|P<<8|255)>>>0}function w(m,y,M){let S=m>>24&255,T=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,T,L));for(;W<M&&(I<255||R<255||P<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),R=Math.min(255,R+Math.ceil(.1*(255-R))),P=Math.min(255,P+Math.ceil(.1*(255-P))),W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,T,L));return(I<<24|R<<16|P<<8|255)>>>0}C.ensureContrastRatio=function(m,y,M){let S=i.relativeLuminance(m>>8),T=i.relativeLuminance(y>>8);if(D(S,T)<M){if(T<S){let R=b(m,y,M),P=D(S,i.relativeLuminance(R>>8));if(P<M){let W=w(m,y,M);return P>D(S,i.relativeLuminance(W>>8))?R:W}return R}let L=w(m,y,M),I=D(S,i.relativeLuminance(L>>8));if(I<M){let R=b(m,y,M);return I>D(S,i.relativeLuminance(R>>8))?L:R}return L}},C.reduceLuminance=b,C.increaseLuminance=w,C.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]},C.toColor=function(m,y,M,S){return{css:g.toCss(m,y,M,S),rgba:g.toRgba(m,y,M,S)}}}(s||(r.rgba=s={})),r.toPaddedHex=p,r.contrastRatio=D},8969:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreTerminal=void 0;let c=o(844),l=o(2585),u=o(4348),v=o(7866),h=o(744),g=o(7302),d=o(6975),a=o(8460),i=o(1753),s=o(1480),p=o(7994),D=o(9282),C=o(5435),b=o(5981),w=o(2660),m=!1;class y extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new a.EventEmitter),this._onScroll.event(S=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(S.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(S){for(let T in S)this.optionsService.options[T]=S[T]}constructor(S){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new a.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new g.OptionsService(S)),this._instantiationService.setService(l.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(h.BufferService)),this._instantiationService.setService(l.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(l.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(l.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(i.CoreMouseService)),this._instantiationService.setService(l.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(s.UnicodeService)),this._instantiationService.setService(l.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(p.CharsetService),this._instantiationService.setService(l.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(l.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,a.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,a.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,a.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,a.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((T,L)=>this._inputHandler.parse(T,L))),this.register((0,a.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(S,T){this._writeBuffer.write(S,T)}writeSync(S,T){this._logService.logLevel<=l.LogLevelEnum.WARN&&!m&&(this._logService.warn("writeSync is unreliable and will be removed soon."),m=!0),this._writeBuffer.writeSync(S,T)}resize(S,T){isNaN(S)||isNaN(T)||(S=Math.max(S,h.MINIMUM_COLS),T=Math.max(T,h.MINIMUM_ROWS),this._bufferService.resize(S,T))}scroll(S,T=!1){this._bufferService.scroll(S,T)}scrollLines(S,T,L){this._bufferService.scrollLines(S,T,L)}scrollPages(S){this.scrollLines(S*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(S){let T=S-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(S,T){return this._inputHandler.registerEscHandler(S,T)}registerDcsHandler(S,T){return this._inputHandler.registerDcsHandler(S,T)}registerCsiHandler(S,T){return this._inputHandler.registerCsiHandler(S,T)}registerOscHandler(S,T){return this._inputHandler.registerOscHandler(S,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let S=!1,T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?S=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(S=!0),S?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let S=[];S.push(this.onLineFeed(D.updateWindowsModeWrappedState.bind(null,this._bufferService))),S.push(this.registerCsiHandler({final:"H"},()=>((0,D.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(let T of S)T.dispose()})}}}r.CoreTerminal=y},8460:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===o)return void this._listeners.splice(c,1)}}})),this._event}fire(o,c){let l=[];for(let u=0;u<this._listeners.length;u++)l.push(this._listeners[u]);for(let u=0;u<l.length;u++)l[u].call(void 0,o,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(o,c){return o(l=>c.fire(l))}},5435:function(_,r,o){var c=this&&this.__decorate||function(W,E,A,x){var H,U=arguments.length,re=U<3?E:x===null?x=Object.getOwnPropertyDescriptor(E,A):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(W,E,A,x);else for(var oe=W.length-1;oe>=0;oe--)(H=W[oe])&&(re=(U<3?H(re):U>3?H(E,A,re):H(E,A))||re);return U>3&&re&&Object.defineProperty(E,A,re),re},l=this&&this.__param||function(W,E){return function(A,x){E(A,x,W)}};Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;let u=o(2584),v=o(7116),h=o(2015),g=o(844),d=o(482),a=o(8437),i=o(8460),s=o(643),p=o(511),D=o(3734),C=o(2585),b=o(6242),w=o(6351),m=o(5941),y={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function S(W,E){if(W>24)return E.setWinLines||!1;switch(W){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var T;(function(W){W[W.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",W[W.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(r.WindowsOptionsReportType=T={}));let L=0;class I extends g.Disposable{getAttrData(){return this._curAttrData}constructor(E,A,x,H,U,re,oe,V,fe=new h.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=A,this._coreService=x,this._logService=H,this._optionsService=U,this._oscLinkService=re,this._coreMouseService=oe,this._unicodeService=V,this._parser=fe,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new p.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new i.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new i.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new i.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new i.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new i.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new i.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new i.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new i.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new i.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new i.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new i.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new i.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new i.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new R(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(F=>this._activeBuffer=F.activeBuffer)),this._parser.setCsiHandlerFallback((F,B)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(F),params:B.toArray()})}),this._parser.setEscHandlerFallback(F=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(F)})}),this._parser.setExecuteHandlerFallback(F=>{this._logService.debug("Unknown EXECUTE code: ",{code:F})}),this._parser.setOscHandlerFallback((F,B,q)=>{this._logService.debug("Unknown OSC code: ",{identifier:F,action:B,data:q})}),this._parser.setDcsHandlerFallback((F,B,q)=>{B==="HOOK"&&(q=q.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(F),action:B,payload:q})}),this._parser.setPrintHandler((F,B,q)=>this.print(F,B,q)),this._parser.registerCsiHandler({final:"@"},F=>this.insertChars(F)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},F=>this.scrollLeft(F)),this._parser.registerCsiHandler({final:"A"},F=>this.cursorUp(F)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},F=>this.scrollRight(F)),this._parser.registerCsiHandler({final:"B"},F=>this.cursorDown(F)),this._parser.registerCsiHandler({final:"C"},F=>this.cursorForward(F)),this._parser.registerCsiHandler({final:"D"},F=>this.cursorBackward(F)),this._parser.registerCsiHandler({final:"E"},F=>this.cursorNextLine(F)),this._parser.registerCsiHandler({final:"F"},F=>this.cursorPrecedingLine(F)),this._parser.registerCsiHandler({final:"G"},F=>this.cursorCharAbsolute(F)),this._parser.registerCsiHandler({final:"H"},F=>this.cursorPosition(F)),this._parser.registerCsiHandler({final:"I"},F=>this.cursorForwardTab(F)),this._parser.registerCsiHandler({final:"J"},F=>this.eraseInDisplay(F,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},F=>this.eraseInDisplay(F,!0)),this._parser.registerCsiHandler({final:"K"},F=>this.eraseInLine(F,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},F=>this.eraseInLine(F,!0)),this._parser.registerCsiHandler({final:"L"},F=>this.insertLines(F)),this._parser.registerCsiHandler({final:"M"},F=>this.deleteLines(F)),this._parser.registerCsiHandler({final:"P"},F=>this.deleteChars(F)),this._parser.registerCsiHandler({final:"S"},F=>this.scrollUp(F)),this._parser.registerCsiHandler({final:"T"},F=>this.scrollDown(F)),this._parser.registerCsiHandler({final:"X"},F=>this.eraseChars(F)),this._parser.registerCsiHandler({final:"Z"},F=>this.cursorBackwardTab(F)),this._parser.registerCsiHandler({final:"`"},F=>this.charPosAbsolute(F)),this._parser.registerCsiHandler({final:"a"},F=>this.hPositionRelative(F)),this._parser.registerCsiHandler({final:"b"},F=>this.repeatPrecedingCharacter(F)),this._parser.registerCsiHandler({final:"c"},F=>this.sendDeviceAttributesPrimary(F)),this._parser.registerCsiHandler({prefix:">",final:"c"},F=>this.sendDeviceAttributesSecondary(F)),this._parser.registerCsiHandler({final:"d"},F=>this.linePosAbsolute(F)),this._parser.registerCsiHandler({final:"e"},F=>this.vPositionRelative(F)),this._parser.registerCsiHandler({final:"f"},F=>this.hVPosition(F)),this._parser.registerCsiHandler({final:"g"},F=>this.tabClear(F)),this._parser.registerCsiHandler({final:"h"},F=>this.setMode(F)),this._parser.registerCsiHandler({prefix:"?",final:"h"},F=>this.setModePrivate(F)),this._parser.registerCsiHandler({final:"l"},F=>this.resetMode(F)),this._parser.registerCsiHandler({prefix:"?",final:"l"},F=>this.resetModePrivate(F)),this._parser.registerCsiHandler({final:"m"},F=>this.charAttributes(F)),this._parser.registerCsiHandler({final:"n"},F=>this.deviceStatus(F)),this._parser.registerCsiHandler({prefix:"?",final:"n"},F=>this.deviceStatusPrivate(F)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},F=>this.softReset(F)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},F=>this.setCursorStyle(F)),this._parser.registerCsiHandler({final:"r"},F=>this.setScrollRegion(F)),this._parser.registerCsiHandler({final:"s"},F=>this.saveCursor(F)),this._parser.registerCsiHandler({final:"t"},F=>this.windowOptions(F)),this._parser.registerCsiHandler({final:"u"},F=>this.restoreCursor(F)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},F=>this.insertColumns(F)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},F=>this.deleteColumns(F)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},F=>this.selectProtected(F)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},F=>this.requestMode(F,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},F=>this.requestMode(F,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(F=>(this.setTitle(F),this.setIconName(F),!0))),this._parser.registerOscHandler(1,new b.OscHandler(F=>this.setIconName(F))),this._parser.registerOscHandler(2,new b.OscHandler(F=>this.setTitle(F))),this._parser.registerOscHandler(4,new b.OscHandler(F=>this.setOrReportIndexedColor(F))),this._parser.registerOscHandler(8,new b.OscHandler(F=>this.setHyperlink(F))),this._parser.registerOscHandler(10,new b.OscHandler(F=>this.setOrReportFgColor(F))),this._parser.registerOscHandler(11,new b.OscHandler(F=>this.setOrReportBgColor(F))),this._parser.registerOscHandler(12,new b.OscHandler(F=>this.setOrReportCursorColor(F))),this._parser.registerOscHandler(104,new b.OscHandler(F=>this.restoreIndexedColor(F))),this._parser.registerOscHandler(110,new b.OscHandler(F=>this.restoreFgColor(F))),this._parser.registerOscHandler(111,new b.OscHandler(F=>this.restoreBgColor(F))),this._parser.registerOscHandler(112,new b.OscHandler(F=>this.restoreCursorColor(F))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let F in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:F},()=>this.selectCharset("("+F)),this._parser.registerEscHandler({intermediates:")",final:F},()=>this.selectCharset(")"+F)),this._parser.registerEscHandler({intermediates:"*",final:F},()=>this.selectCharset("*"+F)),this._parser.registerEscHandler({intermediates:"+",final:F},()=>this.selectCharset("+"+F)),this._parser.registerEscHandler({intermediates:"-",final:F},()=>this.selectCharset("-"+F)),this._parser.registerEscHandler({intermediates:".",final:F},()=>this.selectCharset("."+F)),this._parser.registerEscHandler({intermediates:"/",final:F},()=>this.selectCharset("/"+F));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(F=>(this._logService.error("Parsing error: ",F),F)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler((F,B)=>this.requestStatusString(F,B)))}_preserveStack(E,A,x,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=x,this._parseStack.position=H}_logSlowResolvingAsync(E){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([E,new Promise((A,x)=>setTimeout(()=>x("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,A){let x,H=this._activeBuffer.x,U=this._activeBuffer.y,re=0,oe=this._parseStack.paused;if(oe){if(x=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(x),x;H=this._parseStack.cursorStartX,U=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>M&&(re=this._parseStack.position+M)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,V=>String.fromCharCode(V)).join("")}"`),typeof E=="string"?E.split("").map(V=>V.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(E.length,M))),oe||this._dirtyRowTracker.clearRange(),E.length>M)for(let V=re;V<E.length;V+=M){let fe=V+M<E.length?V+M:E.length,F=typeof E=="string"?this._stringDecoder.decode(E.substring(V,fe),this._parseBuffer):this._utf8Decoder.decode(E.subarray(V,fe),this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,F))return this._preserveStack(H,U,F,V),this._logSlowResolvingAsync(x),x}else if(!oe){let V=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,V))return this._preserveStack(H,U,V,0),this._logSlowResolvingAsync(x),x}this._activeBuffer.x===H&&this._activeBuffer.y===U||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,A,x){let H,U,re=this._charsetService.charset,oe=this._optionsService.rawOptions.screenReaderMode,V=this._bufferService.cols,fe=this._coreService.decPrivateModes.wraparound,F=this._coreService.modes.insertMode,B=this._curAttrData,q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&x-A>0&&q.getWidth(this._activeBuffer.x-1)===2&&q.setCellFromCodePoint(this._activeBuffer.x-1,0,1,B.fg,B.bg,B.extended);for(let k=A;k<x;++k){if(H=E[k],U=this._unicodeService.wcwidth(H),H<127&&re){let de=re[String.fromCharCode(H)];de&&(H=de.charCodeAt(0))}if(oe&&this._onA11yChar.fire((0,d.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),U||!this._activeBuffer.x){if(this._activeBuffer.x+U-1>=V){if(fe){for(;this._activeBuffer.x<V;)q.setCellFromCodePoint(this._activeBuffer.x++,0,1,B.fg,B.bg,B.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=V-1,U===2)continue}if(F&&(q.insertCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell(B),B),q.getWidth(V-1)===2&&q.setCellFromCodePoint(V-1,s.NULL_CELL_CODE,s.NULL_CELL_WIDTH,B.fg,B.bg,B.extended)),q.setCellFromCodePoint(this._activeBuffer.x++,H,U,B.fg,B.bg,B.extended),U>0)for(;--U;)q.setCellFromCodePoint(this._activeBuffer.x++,0,0,B.fg,B.bg,B.extended)}else q.getWidth(this._activeBuffer.x-1)?q.addCodepointToCell(this._activeBuffer.x-1,H):q.addCodepointToCell(this._activeBuffer.x-2,H)}x-A>0&&(q.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<V&&x-A>0&&q.getWidth(this._activeBuffer.x)===0&&!q.hasContent(this._activeBuffer.x)&&q.setCellFromCodePoint(this._activeBuffer.x,0,1,B.fg,B.bg,B.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,A){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,A):this._parser.registerCsiHandler(E,x=>!S(x.params[0],this._optionsService.rawOptions.windowOptions)||A(x))}registerDcsHandler(E,A){return this._parser.registerDcsHandler(E,new w.DcsHandler(A))}registerEscHandler(E,A){return this._parser.registerEscHandler(E,A)}registerOscHandler(E,A){return this._parser.registerOscHandler(E,new b.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=E,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+A)}cursorUp(E){let A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){let A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){let A=E.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=E.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=E.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){let A=E.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,A,x,H=!1,U=!1){let re=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);re.replaceCells(A,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),U),H&&(re.isWrapped=!1)}_resetBufferLine(E,A=!1){let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);x&&(x.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),x.isWrapped=!1)}eraseInDisplay(E,A=!1){let x;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);x<this._bufferService.rows;x++)this._resetBufferLine(x,A);this._dirtyRowTracker.markDirty(x);break;case 1:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(x=this._bufferService.rows,this._dirtyRowTracker.markDirty(x-1);x--;)this._resetBufferLine(x,A);this._dirtyRowTracker.markDirty(0);break;case 3:let H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(E,A=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let A=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;A--;)this._activeBuffer.lines.splice(U-1,1),this._activeBuffer.lines.splice(x,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let A=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;A--;)this._activeBuffer.lines.splice(x,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let A=E.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let A=E.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;let A=E.params[0]||1,x=new Uint32Array(A);for(let H=0;H<A;++H)x[H]=this._parser.precedingCodepoint;return this.print(x,0,x.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let A=0;A<E.length;A++)switch(E.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let A=0;A<E.length;A++)switch(E.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let A=0;A<E.length;A++)switch(E.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let A=0;A<E.length;A++)switch(E.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,A){let x=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:U}=this._coreMouseService,re=this._coreService,{buffers:oe,cols:V}=this._bufferService,{active:fe,alt:F}=oe,B=this._optionsService.rawOptions,q=Fe=>Fe?1:2,k=E.params[0];return de=k,J=A?k===2?4:k===4?q(re.modes.insertMode):k===12?3:k===20?q(B.convertEol):0:k===1?q(x.applicationCursorKeys):k===3?B.windowOptions.setWinLines?V===80?2:V===132?1:0:0:k===6?q(x.origin):k===7?q(x.wraparound):k===8?3:k===9?q(H==="X10"):k===12?q(B.cursorBlink):k===25?q(!re.isCursorHidden):k===45?q(x.reverseWraparound):k===66?q(x.applicationKeypad):k===67?4:k===1e3?q(H==="VT200"):k===1002?q(H==="DRAG"):k===1003?q(H==="ANY"):k===1004?q(x.sendFocus):k===1005?4:k===1006?q(U==="SGR"):k===1015?4:k===1016?q(U==="SGR_PIXELS"):k===1048?1:k===47||k===1047||k===1049?q(fe===F):k===2004?q(x.bracketedPasteMode):0,re.triggerDataEvent(`${u.C0.ESC}[${A?"":"?"}${de};${J}$y`),!0;var de,J}_updateAttrColor(E,A,x,H,U){return A===2?(E|=50331648,E&=-16777216,E|=D.AttributeData.fromColorRGB([x,H,U])):A===5&&(E&=-50331904,E|=33554432|255&x),E}_extractColor(E,A,x){let H=[0,0,-1,0,0,0],U=0,re=0;do{if(H[re+U]=E.params[A+re],E.hasSubParams(A+re)){let oe=E.getSubParams(A+re),V=0;do H[1]===5&&(U=1),H[re+V+1+U]=oe[V];while(++V<oe.length&&V+re+1+U<H.length);break}if(H[1]===5&&re+U>=2||H[1]===2&&re+U>=5)break;H[1]&&(U=1)}while(++re+A<E.length&&re+U<H.length);for(let oe=2;oe<H.length;++oe)H[oe]===-1&&(H[oe]=0);switch(H[0]){case 38:x.fg=this._updateAttrColor(x.fg,H[1],H[3],H[4],H[5]);break;case 48:x.bg=this._updateAttrColor(x.bg,H[1],H[3],H[4],H[5]);break;case 58:x.extended=x.extended.clone(),x.extended.underlineColor=this._updateAttrColor(x.extended.underlineColor,H[1],H[3],H[4],H[5])}return re}_processUnderline(E,A){A.extended=A.extended.clone(),(!~E||E>5)&&(E=1),A.extended.underlineStyle=E,A.fg|=268435456,E===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(E){E.fg=a.DEFAULT_ATTR_DATA.fg,E.bg=a.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;let A=E.length,x,H=this._curAttrData;for(let U=0;U<A;U++)x=E.params[U],x>=30&&x<=37?(H.fg&=-50331904,H.fg|=16777216|x-30):x>=40&&x<=47?(H.bg&=-50331904,H.bg|=16777216|x-40):x>=90&&x<=97?(H.fg&=-50331904,H.fg|=16777224|x-90):x>=100&&x<=107?(H.bg&=-50331904,H.bg|=16777224|x-100):x===0?this._processSGR0(H):x===1?H.fg|=134217728:x===3?H.bg|=67108864:x===4?(H.fg|=268435456,this._processUnderline(E.hasSubParams(U)?E.getSubParams(U)[0]:1,H)):x===5?H.fg|=536870912:x===7?H.fg|=67108864:x===8?H.fg|=1073741824:x===9?H.fg|=2147483648:x===2?H.bg|=134217728:x===21?this._processUnderline(2,H):x===22?(H.fg&=-134217729,H.bg&=-134217729):x===23?H.bg&=-67108865:x===24?(H.fg&=-268435457,this._processUnderline(0,H)):x===25?H.fg&=-536870913:x===27?H.fg&=-67108865:x===28?H.fg&=-1073741825:x===29?H.fg&=2147483647:x===39?(H.fg&=-67108864,H.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):x===49?(H.bg&=-67108864,H.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):x===38||x===48||x===58?U+=this._extractColor(E,U,H):x===53?H.bg|=1073741824:x===55?H.bg&=-1073741825:x===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):x===100?(H.fg&=-67108864,H.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:let A=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${A};${x}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){let A=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${A};${x}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){let A=E.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let x=A%2==1;return this._optionsService.options.cursorBlink=x,!0}setScrollRegion(E){let A=E.params[0]||1,x;return(E.length<2||(x=E.params[1])>this._bufferService.rows||x===0)&&(x=this._bufferService.rows),x>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0}windowOptions(E){if(!S(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;let A=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){let A=[],x=E.split(";");for(;x.length>1;){let H=x.shift(),U=x.shift();if(/^\d+$/.exec(H)){let re=parseInt(H);if(P(re))if(U==="?")A.push({type:0,index:re});else{let oe=(0,m.parseColor)(U);oe&&A.push({type:1,index:re,color:oe})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(E){let A=E.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(E,A){this._getCurrentLinkId()&&this._finishHyperlink();let x=E.split(":"),H,U=x.findIndex(re=>re.startsWith("id="));return U!==-1&&(H=x[U].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,A){let x=E.split(";");for(let H=0;H<x.length&&!(A>=this._specialColors.length);++H,++A)if(x[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{let U=(0,m.parseColor)(x[H]);U&&this._onColor.fire([{type:1,index:this._specialColors[A],color:U}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;let A=[],x=E.split(";");for(let H=0;H<x.length;++H)if(/^\d+$/.exec(x[H])){let U=parseInt(x[H]);P(U)&&A.push({type:2,index:U})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(y[E[0]],v.CHARSETS[E[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){let E=new p.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){let x=this._activeBuffer.ybase+this._activeBuffer.y+A,H=this._activeBuffer.lines.get(x);H&&(H.fill(E),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,A){let x=this._bufferService.buffer,H=this._optionsService.rawOptions;return(U=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${U}${u.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${x.scrollTop+1};${x.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,A){this._dirtyRowTracker.markRangeDirty(E,A)}}r.InputHandler=I;let R=class{constructor(W){this._bufferService=W,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(W){W<this.start?this.start=W:W>this.end&&(this.end=W)}markRangeDirty(W,E){W>E&&(L=W,W=E,E=L),W<this.start&&(this.start=W),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function P(W){return 0<=W&&W<256}R=c([l(0,C.IBufferService)],R)},844:(_,r)=>{function o(c){for(let l of c)l.dispose();c.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){let l=this._disposables.indexOf(c);l!==-1&&this._disposables.splice(l,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){var l;this._isDisposed||c===this._value||((l=this._value)===null||l===void 0||l.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){var c;this._isDisposed=!0,(c=this._value)===null||c===void 0||c.dispose(),this._value=void 0}},r.toDisposable=function(c){return{dispose:c}},r.disposeArray=o,r.getDisposeArrayDisposable=function(c){return{dispose:()=>o(c)}}},1505:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(l,u,v){this._data[l]||(this._data[l]={}),this._data[l][u]=v}get(l,u){return this._data[l]?this._data[l][u]:void 0}clear(){this._data={}}}r.TwoKeyMap=o,r.FourKeyMap=class{constructor(){this._data=new o}set(c,l,u,v,h){this._data.get(c,l)||this._data.set(c,l,new o),this._data.get(c,l).set(u,v,h)}get(c,l,u,v){var h;return(h=this._data.get(c,l))===null||h===void 0?void 0:h.get(u,v)}clear(){this._data.clear()}}},6114:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";let o=r.isNode?"node":navigator.userAgent,c=r.isNode?"node":navigator.platform;r.isFirefox=o.includes("Firefox"),r.isLegacyEdge=o.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(o),r.getSafariVersion=function(){if(!r.isSafari)return 0;let l=o.match(/Version\/(\d+)/);return l===null||l.length<2?0:parseInt(l[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),r.isIpad=c==="iPad",r.isIphone=c==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),r.isLinux=c.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(o)},6106:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SortedList=void 0;let o=0;r.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(o=this._search(this._getKey(c)),this._array.splice(o,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;let l=this._getKey(c);if(l===void 0||(o=this._search(l),o===-1)||this._getKey(this._array[o])!==l)return!1;do if(this._array[o]===c)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===l);return!1}*getKeyIterator(c){if(this._array.length!==0&&(o=this._search(c),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===c))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===c)}forEachByKey(c,l){if(this._array.length!==0&&(o=this._search(c),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===c))do l(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===c)}values(){return[...this._array].values()}_search(c){let l=0,u=this._array.length-1;for(;u>=l;){let v=l+u>>1,h=this._getKey(this._array[v]);if(h>c)u=v-1;else{if(!(h<c)){for(;v>0&&this._getKey(this._array[v-1])===c;)v--;return v}l=v+1}}return l}}},7226:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;let c=o(6114);class l{constructor(){this._tasks=[],this._i=0}enqueue(h){this._tasks.push(h),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(h){this._idleCallback=void 0;let g=0,d=0,a=h.timeRemaining(),i=0;for(;this._i<this._tasks.length;){if(g=Date.now(),this._tasks[this._i]()||this._i++,g=Math.max(1,Date.now()-g),d=Math.max(g,d),i=h.timeRemaining(),1.5*d>i)return a-g<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-g))}ms`),void this._start();a=i}this.clear()}}class u extends l{_requestCallback(h){return setTimeout(()=>h(this._createDeadline(16)))}_cancelCallback(h){clearTimeout(h)}_createDeadline(h){let g=Date.now()+h;return{timeRemaining:()=>Math.max(0,g-Date.now())}}}r.PriorityTaskQueue=u,r.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends l{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:u,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateWindowsModeWrappedState=void 0;let c=o(643);r.updateWindowsModeWrappedState=function(l){let u=l.buffer.lines.get(l.buffer.ybase+l.buffer.y-1),v=u?.get(l.cols-1),h=l.buffer.lines.get(l.buffer.ybase+l.buffer.y);h&&v&&(h.isWrapped=v[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&v[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){let u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=o;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,v=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=v}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=c},9092:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.MAX_BUFFER_SIZE=void 0;let c=o(6349),l=o(7226),u=o(3734),v=o(8437),h=o(4634),g=o(511),d=o(643),a=o(4863),i=o(7116);r.MAX_BUFFER_SIZE=4294967295,r.Buffer=class{constructor(s,p,D){this._hasScrollback=s,this._optionsService=p,this._bufferService=D,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=i.DEFAULT_CHARSET,this.markers=[],this._nullCell=g.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=g.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new l.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(s){return s?(this._nullCell.fg=s.fg,this._nullCell.bg=s.bg,this._nullCell.extended=s.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(s){return s?(this._whitespaceCell.fg=s.fg,this._whitespaceCell.bg=s.bg,this._whitespaceCell.extended=s.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(s,p){return new v.BufferLine(this._bufferService.cols,this.getNullCell(s),p)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let s=this.ybase+this.y-this.ydisp;return s>=0&&s<this._rows}_getCorrectBufferLength(s){if(!this._hasScrollback)return s;let p=s+this._optionsService.rawOptions.scrollback;return p>r.MAX_BUFFER_SIZE?r.MAX_BUFFER_SIZE:p}fillViewportRows(s){if(this.lines.length===0){s===void 0&&(s=v.DEFAULT_ATTR_DATA);let p=this._rows;for(;p--;)this.lines.push(this.getBlankLine(s))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(s,p){let D=this.getNullCell(v.DEFAULT_ATTR_DATA),C=0,b=this._getCorrectBufferLength(p);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<s)for(let m=0;m<this.lines.length;m++)C+=+this.lines.get(m).resize(s,D);let w=0;if(this._rows<p)for(let m=this._rows;m<p;m++)this.lines.length<p+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(s,D)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(s,D)));else for(let m=this._rows;m>p;m--)this.lines.length>p+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){let m=this.lines.length-b;m>0&&(this.lines.trimStart(m),this.ybase=Math.max(this.ybase-m,0),this.ydisp=Math.max(this.ydisp-m,0),this.savedY=Math.max(this.savedY-m,0)),this.lines.maxLength=b}this.x=Math.min(this.x,s-1),this.y=Math.min(this.y,p-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,s-1),this.scrollTop=0}if(this.scrollBottom=p-1,this._isReflowEnabled&&(this._reflow(s,p),this._cols>s))for(let w=0;w<this.lines.length;w++)C+=+this.lines.get(w).resize(s,D);this._cols=s,this._rows=p,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let s=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,s=!1);let p=0;for(;this._memoryCleanupPosition<this.lines.length;)if(p+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),p>100)return!0;return s}get _isReflowEnabled(){let s=this._optionsService.rawOptions.windowsPty;return s&&s.buildNumber?this._hasScrollback&&s.backend==="conpty"&&s.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(s,p){this._cols!==s&&(s>this._cols?this._reflowLarger(s,p):this._reflowSmaller(s,p))}_reflowLarger(s,p){let D=(0,h.reflowLargerGetLinesToRemove)(this.lines,this._cols,s,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(D.length>0){let C=(0,h.reflowLargerCreateNewLayout)(this.lines,D);(0,h.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(s,p,C.countRemoved)}}_reflowLargerAdjustViewport(s,p,D){let C=this.getNullCell(v.DEFAULT_ATTR_DATA),b=D;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<p&&this.lines.push(new v.BufferLine(s,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-D,0)}_reflowSmaller(s,p){let D=this.getNullCell(v.DEFAULT_ATTR_DATA),C=[],b=0;for(let w=this.lines.length-1;w>=0;w--){let m=this.lines.get(w);if(!m||!m.isWrapped&&m.getTrimmedLength()<=s)continue;let y=[m];for(;m.isWrapped&&w>0;)m=this.lines.get(--w),y.unshift(m);let M=this.ybase+this.y;if(M>=w&&M<w+y.length)continue;let S=y[y.length-1].getTrimmedLength(),T=(0,h.reflowSmallerGetNewLineLengths)(y,this._cols,s),L=T.length-y.length,I;I=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+L):Math.max(0,this.lines.length-this.lines.maxLength+L);let R=[];for(let H=0;H<L;H++){let U=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);R.push(U)}R.length>0&&(C.push({start:w+y.length+b,newLines:R}),b+=R.length),y.push(...R);let P=T.length-1,W=T[P];W===0&&(P--,W=T[P]);let E=y.length-L-1,A=S;for(;E>=0;){let H=Math.min(A,W);if(y[P]===void 0)break;if(y[P].copyCellsFrom(y[E],A-H,W-H,H,!0),W-=H,W===0&&(P--,W=T[P]),A-=H,A===0){E--;let U=Math.max(E,0);A=(0,h.getWrappedLineTrimmedLength)(y,U,this._cols)}}for(let H=0;H<y.length;H++)T[H]<s&&y[H].setCell(T[H],D);let x=L-I;for(;x-- >0;)this.ybase===0?this.y<p-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-p&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+L,this.ybase+p-1)}if(C.length>0){let w=[],m=[];for(let P=0;P<this.lines.length;P++)m.push(this.lines.get(P));let y=this.lines.length,M=y-1,S=0,T=C[S];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let L=0;for(let P=Math.min(this.lines.maxLength-1,y+b-1);P>=0;P--)if(T&&T.start>M+L){for(let W=T.newLines.length-1;W>=0;W--)this.lines.set(P--,T.newLines[W]);P++,w.push({index:M+1,amount:T.newLines.length}),L+=T.newLines.length,T=C[++S]}else this.lines.set(P,m[M--]);let I=0;for(let P=w.length-1;P>=0;P--)w[P].index+=I,this.lines.onInsertEmitter.fire(w[P]),I+=w[P].amount;let R=Math.max(0,y+b-this.lines.maxLength);R>0&&this.lines.onTrimEmitter.fire(R)}}translateBufferLineToString(s,p,D=0,C){let b=this.lines.get(s);return b?b.translateToString(p,D,C):""}getWrappedRangeForLine(s){let p=s,D=s;for(;p>0&&this.lines.get(p).isWrapped;)p--;for(;D+1<this.lines.length&&this.lines.get(D+1).isWrapped;)D++;return{first:p,last:D}}setupTabStops(s){for(s!=null?this.tabs[s]||(s=this.prevStop(s)):(this.tabs={},s=0);s<this._cols;s+=this._optionsService.rawOptions.tabStopWidth)this.tabs[s]=!0}prevStop(s){for(s==null&&(s=this.x);!this.tabs[--s]&&s>0;);return s>=this._cols?this._cols-1:s<0?0:s}nextStop(s){for(s==null&&(s=this.x);!this.tabs[++s]&&s<this._cols;);return s>=this._cols?this._cols-1:s<0?0:s}clearMarkers(s){this._isClearing=!0;for(let p=0;p<this.markers.length;p++)this.markers[p].line===s&&(this.markers[p].dispose(),this.markers.splice(p--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].dispose(),this.markers.splice(s--,1);this._isClearing=!1}addMarker(s){let p=new a.Marker(s);return this.markers.push(p),p.register(this.lines.onTrim(D=>{p.line-=D,p.line<0&&p.dispose()})),p.register(this.lines.onInsert(D=>{p.line>=D.index&&(p.line+=D.amount)})),p.register(this.lines.onDelete(D=>{p.line>=D.index&&p.line<D.index+D.amount&&p.dispose(),p.line>D.index&&(p.line-=D.amount)})),p.register(p.onDispose(()=>this._removeMarker(p))),p}_removeMarker(s){this._isClearing||this.markers.splice(this.markers.indexOf(s),1)}}},8437:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLine=r.DEFAULT_ATTR_DATA=void 0;let c=o(3734),l=o(511),u=o(643),v=o(482);r.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let h=0;class g{constructor(a,i,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);let p=i||l.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let D=0;D<a;++D)this.setCell(D,p);this.length=a}get(a){let i=this._data[3*a+0],s=2097151&i;return[this._data[3*a+1],2097152&i?this._combined[a]:s?(0,v.stringFromCodePoint)(s):"",i>>22,2097152&i?this._combined[a].charCodeAt(this._combined[a].length-1):s]}set(a,i){this._data[3*a+1]=i[u.CHAR_DATA_ATTR_INDEX],i[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=i[1],this._data[3*a+0]=2097152|a|i[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=i[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|i[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(a){return this._data[3*a+0]>>22}hasWidth(a){return 12582912&this._data[3*a+0]}getFg(a){return this._data[3*a+1]}getBg(a){return this._data[3*a+2]}hasContent(a){return 4194303&this._data[3*a+0]}getCodePoint(a){let i=this._data[3*a+0];return 2097152&i?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&i}isCombined(a){return 2097152&this._data[3*a+0]}getString(a){let i=this._data[3*a+0];return 2097152&i?this._combined[a]:2097151&i?(0,v.stringFromCodePoint)(2097151&i):""}isProtected(a){return 536870912&this._data[3*a+2]}loadCell(a,i){return h=3*a,i.content=this._data[h+0],i.fg=this._data[h+1],i.bg=this._data[h+2],2097152&i.content&&(i.combinedData=this._combined[a]),268435456&i.bg&&(i.extended=this._extendedAttrs[a]),i}setCell(a,i){2097152&i.content&&(this._combined[a]=i.combinedData),268435456&i.bg&&(this._extendedAttrs[a]=i.extended),this._data[3*a+0]=i.content,this._data[3*a+1]=i.fg,this._data[3*a+2]=i.bg}setCellFromCodePoint(a,i,s,p,D,C){268435456&D&&(this._extendedAttrs[a]=C),this._data[3*a+0]=i|s<<22,this._data[3*a+1]=p,this._data[3*a+2]=D}addCodepointToCell(a,i){let s=this._data[3*a+0];2097152&s?this._combined[a]+=(0,v.stringFromCodePoint)(i):(2097151&s?(this._combined[a]=(0,v.stringFromCodePoint)(2097151&s)+(0,v.stringFromCodePoint)(i),s&=-2097152,s|=2097152):s=i|4194304,this._data[3*a+0]=s)}insertCells(a,i,s,p){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,p?.fg||0,p?.bg||0,p?.extended||new c.ExtendedAttrs),i<this.length-a){let D=new l.CellData;for(let C=this.length-a-i-1;C>=0;--C)this.setCell(a+i+C,this.loadCell(a+C,D));for(let C=0;C<i;++C)this.setCell(a+C,s)}else for(let D=a;D<this.length;++D)this.setCell(D,s);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,p?.fg||0,p?.bg||0,p?.extended||new c.ExtendedAttrs)}deleteCells(a,i,s,p){if(a%=this.length,i<this.length-a){let D=new l.CellData;for(let C=0;C<this.length-a-i;++C)this.setCell(a+C,this.loadCell(a+i+C,D));for(let C=this.length-i;C<this.length;++C)this.setCell(C,s)}else for(let D=a;D<this.length;++D)this.setCell(D,s);a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,p?.fg||0,p?.bg||0,p?.extended||new c.ExtendedAttrs),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,p?.fg||0,p?.bg||0,p?.extended||new c.ExtendedAttrs)}replaceCells(a,i,s,p,D=!1){if(D)for(a&&this.getWidth(a-1)===2&&!this.isProtected(a-1)&&this.setCellFromCodePoint(a-1,0,1,p?.fg||0,p?.bg||0,p?.extended||new c.ExtendedAttrs),i<this.length&&this.getWidth(i-1)===2&&!this.isProtected(i)&&this.setCellFromCodePoint(i,0,1,p?.fg||0,p?.bg||0,p?.extended||new c.ExtendedAttrs);a<i&&a<this.length;)this.isProtected(a)||this.setCell(a,s),a++;else for(a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,p?.fg||0,p?.bg||0,p?.extended||new c.ExtendedAttrs),i<this.length&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i,0,1,p?.fg||0,p?.bg||0,p?.extended||new c.ExtendedAttrs);a<i&&a<this.length;)this.setCell(a++,s)}resize(a,i){if(a===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let s=3*a;if(a>this.length){if(this._data.buffer.byteLength>=4*s)this._data=new Uint32Array(this._data.buffer,0,s);else{let p=new Uint32Array(s);p.set(this._data),this._data=p}for(let p=this.length;p<a;++p)this.setCell(p,i)}else{this._data=this._data.subarray(0,s);let p=Object.keys(this._combined);for(let C=0;C<p.length;C++){let b=parseInt(p[C],10);b>=a&&delete this._combined[b]}let D=Object.keys(this._extendedAttrs);for(let C=0;C<D.length;C++){let b=parseInt(D[C],10);b>=a&&delete this._extendedAttrs[b]}}return this.length=a,4*s*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let a=new Uint32Array(this._data.length);return a.set(this._data),this._data=a,1}return 0}fill(a,i=!1){if(i)for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,a);else{this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,a)}}copyFrom(a){this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={};for(let i in a._combined)this._combined[i]=a._combined[i];this._extendedAttrs={};for(let i in a._extendedAttrs)this._extendedAttrs[i]=a._extendedAttrs[i];this.isWrapped=a.isWrapped}clone(){let a=new g(0);a._data=new Uint32Array(this._data),a.length=this.length;for(let i in this._combined)a._combined[i]=this._combined[i];for(let i in this._extendedAttrs)a._extendedAttrs[i]=this._extendedAttrs[i];return a.isWrapped=this.isWrapped,a}getTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0}getNoBgTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0]||50331648&this._data[3*a+2])return a+(this._data[3*a+0]>>22);return 0}copyCellsFrom(a,i,s,p,D){let C=a._data;if(D)for(let w=p-1;w>=0;w--){for(let m=0;m<3;m++)this._data[3*(s+w)+m]=C[3*(i+w)+m];268435456&C[3*(i+w)+2]&&(this._extendedAttrs[s+w]=a._extendedAttrs[i+w])}else for(let w=0;w<p;w++){for(let m=0;m<3;m++)this._data[3*(s+w)+m]=C[3*(i+w)+m];268435456&C[3*(i+w)+2]&&(this._extendedAttrs[s+w]=a._extendedAttrs[i+w])}let b=Object.keys(a._combined);for(let w=0;w<b.length;w++){let m=parseInt(b[w],10);m>=i&&(this._combined[m-i+s]=a._combined[m])}}translateToString(a=!1,i=0,s=this.length){a&&(s=Math.min(s,this.getTrimmedLength()));let p="";for(;i<s;){let D=this._data[3*i+0],C=2097151&D;p+=2097152&D?this._combined[i]:C?(0,v.stringFromCodePoint)(C):u.WHITESPACE_CELL_CHAR,i+=D>>22||1}return p}}r.BufferLine=g},4841:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getRangeLength=void 0,r.getRangeLength=function(o,c){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return c*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(_,r)=>{function o(c,l,u){if(l===c.length-1)return c[l].getTrimmedLength();let v=!c[l].hasContent(u-1)&&c[l].getWidth(u-1)===1,h=c[l+1].getWidth(0)===2;return v&&h?u-1:u}Object.defineProperty(r,"__esModule",{value:!0}),r.getWrappedLineTrimmedLength=r.reflowSmallerGetNewLineLengths=r.reflowLargerApplyNewLayout=r.reflowLargerCreateNewLayout=r.reflowLargerGetLinesToRemove=void 0,r.reflowLargerGetLinesToRemove=function(c,l,u,v,h){let g=[];for(let d=0;d<c.length-1;d++){let a=d,i=c.get(++a);if(!i.isWrapped)continue;let s=[c.get(d)];for(;a<c.length&&i.isWrapped;)s.push(i),i=c.get(++a);if(v>=d&&v<a){d+=s.length-1;continue}let p=0,D=o(s,p,l),C=1,b=0;for(;C<s.length;){let m=o(s,C,l),y=m-b,M=u-D,S=Math.min(y,M);s[p].copyCellsFrom(s[C],b,D,S,!1),D+=S,D===u&&(p++,D=0),b+=S,b===m&&(C++,b=0),D===0&&p!==0&&s[p-1].getWidth(u-1)===2&&(s[p].copyCellsFrom(s[p-1],u-1,D++,1,!1),s[p-1].setCell(u-1,h))}s[p].replaceCells(D,u,h);let w=0;for(let m=s.length-1;m>0&&(m>p||s[m].getTrimmedLength()===0);m--)w++;w>0&&(g.push(d+s.length-w),g.push(w)),d+=s.length-1}return g},r.reflowLargerCreateNewLayout=function(c,l){let u=[],v=0,h=l[v],g=0;for(let d=0;d<c.length;d++)if(h===d){let a=l[++v];c.onDeleteEmitter.fire({index:d-g,amount:a}),d+=a-1,g+=a,h=l[++v]}else u.push(d);return{layout:u,countRemoved:g}},r.reflowLargerApplyNewLayout=function(c,l){let u=[];for(let v=0;v<l.length;v++)u.push(c.get(l[v]));for(let v=0;v<u.length;v++)c.set(v,u[v]);c.length=l.length},r.reflowSmallerGetNewLineLengths=function(c,l,u){let v=[],h=c.map((i,s)=>o(c,s,l)).reduce((i,s)=>i+s),g=0,d=0,a=0;for(;a<h;){if(h-a<u){v.push(h-a);break}g+=u;let i=o(c,d,l);g>i&&(g-=i,d++);let s=c[d].getWidth(g-1)===2;s&&g--;let p=s?u-1:u;v.push(p),a+=p}return v},r.getWrappedLineTrimmedLength=o},5295:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferSet=void 0;let c=o(8460),l=o(844),u=o(9092);class v extends l.Disposable{constructor(g,d){super(),this._optionsService=g,this._bufferService=d,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(g){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(g),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(g,d){this._normal.resize(g,d),this._alt.resize(g,d),this.setupTabStops(g)}setupTabStops(g){this._normal.setupTabStops(g),this._alt.setupTabStops(g)}}r.BufferSet=v},511:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;let c=o(482),l=o(643),u=o(3734);class v extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(g){let d=new v;return d.setFromCharData(g),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(g){this.fg=g[l.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(g[l.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(g[l.CHAR_DATA_CHAR_INDEX].length===2){let a=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){let i=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(a-55296)+i-56320+65536|g[l.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=g[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[l.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=g[l.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[l.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=v},643:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},4863:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Marker=void 0;let c=o(8460),l=o(844);class u{get id(){return this._id}constructor(h){this.line=h,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,l.disposeArray)(this._disposables),this._disposables.length=0)}register(h){return this._disposables.push(h),h}}r.Marker=u,u._nextId=1},7116:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CHARSET=r.CHARSETS=void 0,r.CHARSETS={},r.DEFAULT_CHARSET=r.CHARSETS.B,r.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},r.CHARSETS.A={"#":"\xA3"},r.CHARSETS.B=void 0,r.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},r.CHARSETS.C=r.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},r.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},r.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},r.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},r.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},r.CHARSETS.E=r.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},r.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},r.CHARSETS.H=r.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},r.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(_,r)=>{var o,c,l;Object.defineProperty(r,"__esModule",{value:!0}),r.C1_ESCAPED=r.C1=r.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F"}(o||(r.C0=o={})),function(u){u.PAD="\x80",u.HOP="\x81",u.BPH="\x82",u.NBH="\x83",u.IND="\x84",u.NEL="\x85",u.SSA="\x86",u.ESA="\x87",u.HTS="\x88",u.HTJ="\x89",u.VTS="\x8A",u.PLD="\x8B",u.PLU="\x8C",u.RI="\x8D",u.SS2="\x8E",u.SS3="\x8F",u.DCS="\x90",u.PU1="\x91",u.PU2="\x92",u.STS="\x93",u.CCH="\x94",u.MW="\x95",u.SPA="\x96",u.EPA="\x97",u.SOS="\x98",u.SGCI="\x99",u.SCI="\x9A",u.CSI="\x9B",u.ST="\x9C",u.OSC="\x9D",u.PM="\x9E",u.APC="\x9F"}(c||(r.C1=c={})),function(u){u.ST=`${o.ESC}\\`}(l||(r.C1_ESCAPED=l={}))},7399:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;let c=o(2584),l={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(u,v,h,g){let d={type:0,cancel:!1,key:void 0},a=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?d.key=v?c.C0.ESC+"OA":c.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?d.key=v?c.C0.ESC+"OD":c.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?d.key=v?c.C0.ESC+"OC":c.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(d.key=v?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(u.altKey){d.key=c.C0.ESC+c.C0.DEL;break}d.key=c.C0.DEL;break;case 9:if(u.shiftKey){d.key=c.C0.ESC+"[Z";break}d.key=c.C0.HT,d.cancel=!0;break;case 13:d.key=u.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,d.cancel=!0;break;case 27:d.key=c.C0.ESC,u.altKey&&(d.key=c.C0.ESC+c.C0.ESC),d.cancel=!0;break;case 37:if(u.metaKey)break;a?(d.key=c.C0.ESC+"[1;"+(a+1)+"D",d.key===c.C0.ESC+"[1;3D"&&(d.key=c.C0.ESC+(h?"b":"[1;5D"))):d.key=v?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(u.metaKey)break;a?(d.key=c.C0.ESC+"[1;"+(a+1)+"C",d.key===c.C0.ESC+"[1;3C"&&(d.key=c.C0.ESC+(h?"f":"[1;5C"))):d.key=v?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(u.metaKey)break;a?(d.key=c.C0.ESC+"[1;"+(a+1)+"A",h||d.key!==c.C0.ESC+"[1;3A"||(d.key=c.C0.ESC+"[1;5A")):d.key=v?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(u.metaKey)break;a?(d.key=c.C0.ESC+"[1;"+(a+1)+"B",h||d.key!==c.C0.ESC+"[1;3B"||(d.key=c.C0.ESC+"[1;5B")):d.key=v?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(d.key=c.C0.ESC+"[2~");break;case 46:d.key=a?c.C0.ESC+"[3;"+(a+1)+"~":c.C0.ESC+"[3~";break;case 36:d.key=a?c.C0.ESC+"[1;"+(a+1)+"H":v?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:d.key=a?c.C0.ESC+"[1;"+(a+1)+"F":v?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:u.shiftKey?d.type=2:u.ctrlKey?d.key=c.C0.ESC+"[5;"+(a+1)+"~":d.key=c.C0.ESC+"[5~";break;case 34:u.shiftKey?d.type=3:u.ctrlKey?d.key=c.C0.ESC+"[6;"+(a+1)+"~":d.key=c.C0.ESC+"[6~";break;case 112:d.key=a?c.C0.ESC+"[1;"+(a+1)+"P":c.C0.ESC+"OP";break;case 113:d.key=a?c.C0.ESC+"[1;"+(a+1)+"Q":c.C0.ESC+"OQ";break;case 114:d.key=a?c.C0.ESC+"[1;"+(a+1)+"R":c.C0.ESC+"OR";break;case 115:d.key=a?c.C0.ESC+"[1;"+(a+1)+"S":c.C0.ESC+"OS";break;case 116:d.key=a?c.C0.ESC+"[15;"+(a+1)+"~":c.C0.ESC+"[15~";break;case 117:d.key=a?c.C0.ESC+"[17;"+(a+1)+"~":c.C0.ESC+"[17~";break;case 118:d.key=a?c.C0.ESC+"[18;"+(a+1)+"~":c.C0.ESC+"[18~";break;case 119:d.key=a?c.C0.ESC+"[19;"+(a+1)+"~":c.C0.ESC+"[19~";break;case 120:d.key=a?c.C0.ESC+"[20;"+(a+1)+"~":c.C0.ESC+"[20~";break;case 121:d.key=a?c.C0.ESC+"[21;"+(a+1)+"~":c.C0.ESC+"[21~";break;case 122:d.key=a?c.C0.ESC+"[23;"+(a+1)+"~":c.C0.ESC+"[23~";break;case 123:d.key=a?c.C0.ESC+"[24;"+(a+1)+"~":c.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(h&&!g||!u.altKey||u.metaKey)!h||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?d.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(d.key=c.C0.US),u.key==="@"&&(d.key=c.C0.NUL)):u.keyCode===65&&(d.type=1);else{let i=l[u.keyCode],s=i?.[u.shiftKey?1:0];if(s)d.key=c.C0.ESC+s;else if(u.keyCode>=65&&u.keyCode<=90){let p=u.ctrlKey?u.keyCode-64:u.keyCode+32,D=String.fromCharCode(p);u.shiftKey&&(D=D.toUpperCase()),d.key=c.C0.ESC+D}else if(u.keyCode===32)d.key=c.C0.ESC+(u.ctrlKey?c.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let p=u.code.slice(3,4);u.shiftKey||(p=p.toLowerCase()),d.key=c.C0.ESC+p,d.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?d.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?d.key=c.C0.NUL:u.keyCode>=51&&u.keyCode<=55?d.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?d.key=c.C0.DEL:u.keyCode===219?d.key=c.C0.ESC:u.keyCode===220?d.key=c.C0.FS:u.keyCode===221&&(d.key=c.C0.GS)}return d}},482:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},r.utf32ToString=function(o,c=0,l=o.length){let u="";for(let v=c;v<l;++v){let h=o[v];h>65535?(h-=65536,u+=String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):u+=String.fromCharCode(h)}return u},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,c){let l=o.length;if(!l)return 0;let u=0,v=0;if(this._interim){let h=o.charCodeAt(v++);56320<=h&&h<=57343?c[u++]=1024*(this._interim-55296)+h-56320+65536:(c[u++]=this._interim,c[u++]=h),this._interim=0}for(let h=v;h<l;++h){let g=o.charCodeAt(h);if(55296<=g&&g<=56319){if(++h>=l)return this._interim=g,u;let d=o.charCodeAt(h);56320<=d&&d<=57343?c[u++]=1024*(g-55296)+d-56320+65536:(c[u++]=g,c[u++]=d)}else g!==65279&&(c[u++]=g)}return u}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,c){let l=o.length;if(!l)return 0;let u,v,h,g,d=0,a=0,i=0;if(this.interim[0]){let D=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let b,w=0;for(;(b=63&this.interim[++w])&&w<4;)C<<=6,C|=b;let m=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=m-w;for(;i<y;){if(i>=l)return 0;if(b=o[i++],(192&b)!=128){i--,D=!0;break}this.interim[w++]=b,C<<=6,C|=63&b}D||(m===2?C<128?i--:c[d++]=C:m===3?C<2048||C>=55296&&C<=57343||C===65279||(c[d++]=C):C<65536||C>1114111||(c[d++]=C)),this.interim.fill(0)}let s=l-4,p=i;for(;p<l;){for(;!(!(p<s)||128&(u=o[p])||128&(v=o[p+1])||128&(h=o[p+2])||128&(g=o[p+3]));)c[d++]=u,c[d++]=v,c[d++]=h,c[d++]=g,p+=4;if(u=o[p++],u<128)c[d++]=u;else if((224&u)==192){if(p>=l)return this.interim[0]=u,d;if(v=o[p++],(192&v)!=128){p--;continue}if(a=(31&u)<<6|63&v,a<128){p--;continue}c[d++]=a}else if((240&u)==224){if(p>=l)return this.interim[0]=u,d;if(v=o[p++],(192&v)!=128){p--;continue}if(p>=l)return this.interim[0]=u,this.interim[1]=v,d;if(h=o[p++],(192&h)!=128){p--;continue}if(a=(15&u)<<12|(63&v)<<6|63&h,a<2048||a>=55296&&a<=57343||a===65279)continue;c[d++]=a}else if((248&u)==240){if(p>=l)return this.interim[0]=u,d;if(v=o[p++],(192&v)!=128){p--;continue}if(p>=l)return this.interim[0]=u,this.interim[1]=v,d;if(h=o[p++],(192&h)!=128){p--;continue}if(p>=l)return this.interim[0]=u,this.interim[1]=v,this.interim[2]=h,d;if(g=o[p++],(192&g)!=128){p--;continue}if(a=(7&u)<<18|(63&v)<<12|(63&h)<<6|63&g,a<65536||a>1114111)continue;c[d++]=a}}return d}}},225:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeV6=void 0;let o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],l;r.UnicodeV6=class{constructor(){if(this.version="6",!l){l=new Uint8Array(65536),l.fill(1),l[0]=0,l.fill(0,1,32),l.fill(0,127,160),l.fill(2,4352,4448),l[9001]=2,l[9002]=2,l.fill(2,11904,42192),l[12351]=1,l.fill(2,44032,55204),l.fill(2,63744,64256),l.fill(2,65040,65050),l.fill(2,65072,65136),l.fill(2,65280,65377),l.fill(2,65504,65511);for(let u=0;u<o.length;++u)l.fill(0,o[u][0],o[u][1]+1)}}wcwidth(u){return u<32?0:u<127?1:u<65536?l[u]:function(v,h){let g,d=0,a=h.length-1;if(v<h[0][0]||v>h[a][1])return!1;for(;a>=d;)if(g=d+a>>1,v>h[g][1])d=g+1;else{if(!(v<h[g][0]))return!0;a=g-1}return!1}(u,c)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1}}},5981:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WriteBuffer=void 0;let c=o(8460),l=o(844);class u extends l.Disposable{constructor(h){super(),this._action=h,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(h,g){if(g!==void 0&&this._syncCalls>g)return void(this._syncCalls=0);if(this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);let a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(h,g){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(g),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(g)}_innerWrite(h=0,g=!0){let d=h||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let a=this._writeBuffer[this._bufferOffset],i=this._action(a,g);if(i){let p=D=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,D)):this._innerWrite(d,D);return void i.catch(D=>(queueMicrotask(()=>{throw D}),Promise.resolve(!1))).then(p)}let s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}r.WriteBuffer=u},5941:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.toRgbString=r.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function l(u,v){let h=u.toString(16),g=h.length<2?"0"+h:h;switch(v){case 4:return h[0];case 8:return g;case 12:return(g+g).slice(0,3);default:return g+g}}r.parseColor=function(u){if(!u)return;let v=u.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);let h=o.exec(v);if(h){let g=h[1]?15:h[4]?255:h[7]?4095:65535;return[Math.round(parseInt(h[1]||h[4]||h[7]||h[10],16)/g*255),Math.round(parseInt(h[2]||h[5]||h[8]||h[11],16)/g*255),Math.round(parseInt(h[3]||h[6]||h[9]||h[12],16)/g*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),c.exec(v)&&[3,6,9,12].includes(v.length))){let h=v.length/3,g=[0,0,0];for(let d=0;d<3;++d){let a=parseInt(v.slice(h*d,h*d+h),16);g[d]=h===1?a<<4:h===2?a:h===3?a>>4:a>>8}return g}},r.toRgbString=function(u,v=16){let[h,g,d]=u;return`rgb:${l(h,v)}/${l(g,v)}/${l(d,v)}`}},5770:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PAYLOAD_LIMIT=void 0,r.PAYLOAD_LIMIT=1e7},6351:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DcsHandler=r.DcsParser=void 0;let c=o(482),l=o(8742),u=o(5770),v=[];r.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(g,d){this._handlers[g]===void 0&&(this._handlers[g]=[]);let a=this._handlers[g];return a.push(d),{dispose:()=>{let i=a.indexOf(d);i!==-1&&a.splice(i,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}reset(){if(this._active.length)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(g,d){if(this.reset(),this._ident=g,this._active=this._handlers[g]||v,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(g,d,a){if(this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].put(g,d,a);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(g,d,a))}unhook(g,d=!0){if(this._active.length){let a=!1,i=this._active.length-1,s=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,a=d,s=this._stack.fallThrough,this._stack.paused=!1),!s&&a===!1){for(;i>=0&&(a=this._active[i].unhook(g),a!==!0);i--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,a;i--}for(;i>=0;i--)if(a=this._active[i].unhook(!1),a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",g);this._active=v,this._ident=0}};let h=new l.Params;h.addParam(0),r.DcsHandler=class{constructor(g){this._handler=g,this._data="",this._params=h,this._hitLimit=!1}hook(g){this._params=g.length>1||g.params[0]?g.clone():h,this._data="",this._hitLimit=!1}put(g,d,a){this._hitLimit||(this._data+=(0,c.utf32ToString)(g,d,a),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(g){let d=!1;if(this._hitLimit)d=!1;else if(g&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(a=>(this._params=h,this._data="",this._hitLimit=!1,a));return this._params=h,this._data="",this._hitLimit=!1,d}}},2015:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;let c=o(844),l=o(8742),u=o(6242),v=o(6351);class h{constructor(i){this.table=new Uint8Array(i)}setDefault(i,s){this.table.fill(i<<4|s)}add(i,s,p,D){this.table[s<<8|i]=p<<4|D}addMany(i,s,p,D){for(let C=0;C<i.length;C++)this.table[s<<8|i[C]]=p<<4|D}}r.TransitionTable=h;let g=160;r.VT500_TRANSITION_TABLE=function(){let a=new h(4095),i=Array.apply(null,Array(256)).map((w,m)=>m),s=(w,m)=>i.slice(w,m),p=s(32,127),D=s(0,24);D.push(25),D.push.apply(D,s(28,32));let C=s(0,14),b;for(b in a.setDefault(1,0),a.addMany(p,0,2,0),C)a.addMany([24,26,153,154],b,3,0),a.addMany(s(128,144),b,3,0),a.addMany(s(144,152),b,3,0),a.add(156,b,0,0),a.add(27,b,11,1),a.add(157,b,4,8),a.addMany([152,158,159],b,0,7),a.add(155,b,11,3),a.add(144,b,11,9);return a.addMany(D,0,3,0),a.addMany(D,1,3,1),a.add(127,1,0,1),a.addMany(D,8,0,8),a.addMany(D,3,3,3),a.add(127,3,0,3),a.addMany(D,4,3,4),a.add(127,4,0,4),a.addMany(D,6,3,6),a.addMany(D,5,3,5),a.add(127,5,0,5),a.addMany(D,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(p,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(s(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(p,7,0,7),a.addMany(D,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(s(64,127),3,7,0),a.addMany(s(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(s(48,60),4,8,4),a.addMany(s(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(s(32,64),6,0,6),a.add(127,6,0,6),a.addMany(s(64,127),6,0,0),a.addMany(s(32,48),3,9,5),a.addMany(s(32,48),5,9,5),a.addMany(s(48,64),5,0,6),a.addMany(s(64,127),5,7,0),a.addMany(s(32,48),4,9,5),a.addMany(s(32,48),1,9,2),a.addMany(s(32,48),2,9,2),a.addMany(s(48,127),2,10,0),a.addMany(s(48,80),1,10,0),a.addMany(s(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(s(96,127),1,10,0),a.add(80,1,11,9),a.addMany(D,9,0,9),a.add(127,9,0,9),a.addMany(s(28,32),9,0,9),a.addMany(s(32,48),9,9,12),a.addMany(s(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(D,11,0,11),a.addMany(s(32,128),11,0,11),a.addMany(s(28,32),11,0,11),a.addMany(D,10,0,10),a.add(127,10,0,10),a.addMany(s(28,32),10,0,10),a.addMany(s(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(s(32,48),10,9,12),a.addMany(D,12,0,12),a.add(127,12,0,12),a.addMany(s(28,32),12,0,12),a.addMany(s(32,48),12,9,12),a.addMany(s(48,64),12,0,11),a.addMany(s(64,127),12,12,13),a.addMany(s(64,127),10,12,13),a.addMany(s(64,127),9,12,13),a.addMany(D,13,13,13),a.addMany(p,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(g,0,2,0),a.add(g,8,5,8),a.add(g,6,0,6),a.add(g,11,0,11),a.add(g,13,13,13),a}();class d extends c.Disposable{constructor(i=r.VT500_TRANSITION_TABLE){super(),this._transitions=i,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new l.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(s,p,D)=>{},this._executeHandlerFb=s=>{},this._csiHandlerFb=(s,p)=>{},this._escHandlerFb=s=>{},this._errorHandlerFb=s=>s,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(i,s=[64,126]){let p=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if(p=i.prefix.charCodeAt(0),p&&60>p||p>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<i.intermediates.length;++C){let b=i.intermediates.charCodeAt(C);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");p<<=8,p|=b}}if(i.final.length!==1)throw new Error("final must be a single byte");let D=i.final.charCodeAt(0);if(s[0]>D||D>s[1])throw new Error(`final must be in range ${s[0]} .. ${s[1]}`);return p<<=8,p|=D,p}identToString(i){let s=[];for(;i;)s.push(String.fromCharCode(255&i)),i>>=8;return s.reverse().join("")}setPrintHandler(i){this._printHandler=i}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(i,s){let p=this._identifier(i,[48,126]);this._escHandlers[p]===void 0&&(this._escHandlers[p]=[]);let D=this._escHandlers[p];return D.push(s),{dispose:()=>{let C=D.indexOf(s);C!==-1&&D.splice(C,1)}}}clearEscHandler(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]}setEscHandlerFallback(i){this._escHandlerFb=i}setExecuteHandler(i,s){this._executeHandlers[i.charCodeAt(0)]=s}clearExecuteHandler(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]}setExecuteHandlerFallback(i){this._executeHandlerFb=i}registerCsiHandler(i,s){let p=this._identifier(i);this._csiHandlers[p]===void 0&&(this._csiHandlers[p]=[]);let D=this._csiHandlers[p];return D.push(s),{dispose:()=>{let C=D.indexOf(s);C!==-1&&D.splice(C,1)}}}clearCsiHandler(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]}setCsiHandlerFallback(i){this._csiHandlerFb=i}registerDcsHandler(i,s){return this._dcsParser.registerHandler(this._identifier(i),s)}clearDcsHandler(i){this._dcsParser.clearHandler(this._identifier(i))}setDcsHandlerFallback(i){this._dcsParser.setHandlerFallback(i)}registerOscHandler(i,s){return this._oscParser.registerHandler(i,s)}clearOscHandler(i){this._oscParser.clearHandler(i)}setOscHandlerFallback(i){this._oscParser.setHandlerFallback(i)}setErrorHandler(i){this._errorHandler=i}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(i,s,p,D,C){this._parseStack.state=i,this._parseStack.handlers=s,this._parseStack.handlerPos=p,this._parseStack.transition=D,this._parseStack.chunkPos=C}parse(i,s,p){let D,C=0,b=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(p===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let m=this._parseStack.handlers,y=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(p===!1&&y>-1){for(;y>=0&&(D=m[y](this._params),D!==!0);y--)if(D instanceof Promise)return this._parseStack.handlerPos=y,D}this._parseStack.handlers=[];break;case 4:if(p===!1&&y>-1){for(;y>=0&&(D=m[y](),D!==!0);y--)if(D instanceof Promise)return this._parseStack.handlerPos=y,D}this._parseStack.handlers=[];break;case 6:if(C=i[this._parseStack.chunkPos],D=this._dcsParser.unhook(C!==24&&C!==26,p),D)return D;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=i[this._parseStack.chunkPos],D=this._oscParser.end(C!==24&&C!==26,p),D)return D;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let m=w;m<s;++m){switch(C=i[m],b=this._transitions.table[this.currentState<<8|(C<160?C:g)],b>>4){case 2:for(let L=m+1;;++L){if(L>=s||(C=i[L])<32||C>126&&C<g){this._printHandler(i,m,L),m=L-1;break}if(++L>=s||(C=i[L])<32||C>126&&C<g){this._printHandler(i,m,L),m=L-1;break}if(++L>=s||(C=i[L])<32||C>126&&C<g){this._printHandler(i,m,L),m=L-1;break}if(++L>=s||(C=i[L])<32||C>126&&C<g){this._printHandler(i,m,L),m=L-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:m,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let y=this._csiHandlers[this._collect<<8|C],M=y?y.length-1:-1;for(;M>=0&&(D=y[M](this._params),D!==!0);M--)if(D instanceof Promise)return this._preserveStack(3,y,M,b,m),D;M<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++m<s&&(C=i[m])>47&&C<60);m--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let S=this._escHandlers[this._collect<<8|C],T=S?S.length-1:-1;for(;T>=0&&(D=S[T](),D!==!0);T--)if(D instanceof Promise)return this._preserveStack(4,S,T,b,m),D;T<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let L=m+1;;++L)if(L>=s||(C=i[L])===24||C===26||C===27||C>127&&C<g){this._dcsParser.put(i,m,L),m=L-1;break}break;case 14:if(D=this._dcsParser.unhook(C!==24&&C!==26),D)return this._preserveStack(6,[],0,b,m),D;C===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let L=m+1;;L++)if(L>=s||(C=i[L])<32||C>127&&C<g){this._oscParser.put(i,m,L),m=L-1;break}break;case 6:if(D=this._oscParser.end(C!==24&&C!==26),D)return this._preserveStack(5,[],0,b,m),D;C===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}}}r.EscapeSequenceParser=d},6242:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OscHandler=r.OscParser=void 0;let c=o(5770),l=o(482),u=[];r.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,h){this._handlers[v]===void 0&&(this._handlers[v]=[]);let g=this._handlers[v];return g.push(h),{dispose:()=>{let d=g.indexOf(h);d!==-1&&g.splice(d,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,h,g){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(v,h,g);else this._handlerFb(this._id,"PUT",(0,l.utf32ToString)(v,h,g))}start(){this.reset(),this._state=1}put(v,h,g){if(this._state!==3){if(this._state===1)for(;h<g;){let d=v[h++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&g-h>0&&this._put(v,h,g)}}end(v,h=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let g=!1,d=this._active.length-1,a=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,g=h,a=this._stack.fallThrough,this._stack.paused=!1),!a&&g===!1){for(;d>=0&&(g=this._active[d].end(v),g!==!0);d--)if(g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,g;d--}for(;d>=0;d--)if(g=this._active[d].end(!1),g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,g}else this._handlerFb(this._id,"END",v);this._active=u,this._id=-1,this._state=0}}},r.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,h,g){this._hitLimit||(this._data+=(0,l.utf32ToString)(v,h,g),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let h=!1;if(this._hitLimit)h=!1;else if(v&&(h=this._handler(this._data),h instanceof Promise))return h.then(g=>(this._data="",this._hitLimit=!1,g));return this._data="",this._hitLimit=!1,h}}},8742:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Params=void 0;let o=2147483647;class c{static fromArray(u){let v=new c;if(!u.length)return v;for(let h=Array.isArray(u[0])?1:0;h<u.length;++h){let g=u[h];if(Array.isArray(g))for(let d=0;d<g.length;++d)v.addSubParam(g[d]);else v.addParam(g)}return v}constructor(u=32,v=32){if(this.maxLength=u,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let u=new c(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){let u=[];for(let v=0;v<this.length;++v){u.push(this.params[v]);let h=this._subParamsIdx[v]>>8,g=255&this._subParamsIdx[v];g-h>0&&u.push(Array.prototype.slice.call(this._subParams,h,g))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>o?o:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>o?o:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){let v=this._subParamsIdx[u]>>8,h=255&this._subParamsIdx[u];return h-v>0?this._subParams.subarray(v,h):null}getSubParamsAll(){let u={};for(let v=0;v<this.length;++v){let h=this._subParamsIdx[v]>>8,g=255&this._subParamsIdx[v];g-h>0&&(u[v]=this._subParams.slice(h,g))}return u}addDigit(u){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let h=this._digitIsSub?this._subParams:this.params,g=h[v-1];h[v-1]=~g?Math.min(10*g+u,o):u}}r.Params=c},5741:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AddonManager=void 0,r.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,c){let l={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(l),c.dispose=()=>this._wrappedAddonDispose(l),c.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let c=-1;for(let l=0;l<this._addons.length;l++)if(this._addons[l]===o){c=l;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(c,1)}}},8771:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferApiView=void 0;let c=o(3785),l=o(511);r.BufferApiView=class{constructor(u,v){this._buffer=u,this.type=v}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){let v=this._buffer.lines.get(u);if(v)return new c.BufferLineApiView(v)}getNullCell(){return new l.CellData}}},3785:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLineApiView=void 0;let c=o(511);r.BufferLineApiView=class{constructor(l){this._line=l}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(l,u){if(!(l<0||l>=this._line.length))return u?(this._line.loadCell(l,u),u):this._line.loadCell(l,new c.CellData)}translateToString(l,u,v){return this._line.translateToString(l,u,v)}}},8285:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferNamespaceApi=void 0;let c=o(8771),l=o(8460),u=o(844);class v extends u.Disposable{constructor(g){super(),this._core=g,this._onBufferChange=this.register(new l.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}r.BufferNamespaceApi=v},7975:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ParserApi=void 0,r.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,c){return this._core.registerCsiHandler(o,l=>c(l.toArray()))}addCsiHandler(o,c){return this.registerCsiHandler(o,c)}registerDcsHandler(o,c){return this._core.registerDcsHandler(o,(l,u)=>c(l,u.toArray()))}addDcsHandler(o,c){return this.registerDcsHandler(o,c)}registerEscHandler(o,c){return this._core.registerEscHandler(o,c)}addEscHandler(o,c){return this.registerEscHandler(o,c)}registerOscHandler(o,c){return this._core.registerOscHandler(o,c)}addOscHandler(o,c){return this.registerOscHandler(o,c)}}},7090:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeApi=void 0,r.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(_,r,o){var c=this&&this.__decorate||function(a,i,s,p){var D,C=arguments.length,b=C<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,s):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,p);else for(var w=a.length-1;w>=0;w--)(D=a[w])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},l=this&&this.__param||function(a,i){return function(s,p){i(s,p,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferService=r.MINIMUM_ROWS=r.MINIMUM_COLS=void 0;let u=o(8460),v=o(844),h=o(5295),g=o(2585);r.MINIMUM_COLS=2,r.MINIMUM_ROWS=1;let d=r.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(a){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(a.rawOptions.cols||0,r.MINIMUM_COLS),this.rows=Math.max(a.rawOptions.rows||0,r.MINIMUM_ROWS),this.buffers=this.register(new h.BufferSet(a,this))}resize(a,i){this.cols=a,this.rows=i,this.buffers.resize(a,i),this._onResize.fire({cols:a,rows:i})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(a,i=!1){let s=this.buffer,p;p=this._cachedBlankLine,p&&p.length===this.cols&&p.getFg(0)===a.fg&&p.getBg(0)===a.bg||(p=s.getBlankLine(a,i),this._cachedBlankLine=p),p.isWrapped=i;let D=s.ybase+s.scrollTop,C=s.ybase+s.scrollBottom;if(s.scrollTop===0){let b=s.lines.isFull;C===s.lines.length-1?b?s.lines.recycle().copyFrom(p):s.lines.push(p.clone()):s.lines.splice(C+1,0,p.clone()),b?this.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this.isUserScrolling||s.ydisp++)}else{let b=C-D+1;s.lines.shiftElements(D+1,b-1,-1),s.lines.set(C,p.clone())}this.isUserScrolling||(s.ydisp=s.ybase),this._onScroll.fire(s.ydisp)}scrollLines(a,i,s){let p=this.buffer;if(a<0){if(p.ydisp===0)return;this.isUserScrolling=!0}else a+p.ydisp>=p.ybase&&(this.isUserScrolling=!1);let D=p.ydisp;p.ydisp=Math.max(Math.min(p.ydisp+a,p.ybase),0),D!==p.ydisp&&(i||this._onScroll.fire(p.ydisp))}};r.BufferService=d=c([l(0,g.IOptionsService)],d)},7994:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharsetService=void 0,r.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,c){this._charsets[o]=c,this.glevel===o&&(this.charset=c)}}},1753:function(_,r,o){var c=this&&this.__decorate||function(p,D,C,b){var w,m=arguments.length,y=m<3?D:b===null?b=Object.getOwnPropertyDescriptor(D,C):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,D,C,b);else for(var M=p.length-1;M>=0;M--)(w=p[M])&&(y=(m<3?w(y):m>3?w(D,C,y):w(D,C))||y);return m>3&&y&&Object.defineProperty(D,C,y),y},l=this&&this.__param||function(p,D){return function(C,b){D(C,b,p)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;let u=o(2585),v=o(8460),h=o(844),g={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:p=>p.button!==4&&p.action===1&&(p.ctrl=!1,p.alt=!1,p.shift=!1,!0)},VT200:{events:19,restrict:p=>p.action!==32},DRAG:{events:23,restrict:p=>p.action!==32||p.button!==3},ANY:{events:31,restrict:p=>!0}};function d(p,D){let C=(p.ctrl?16:0)|(p.shift?4:0)|(p.alt?8:0);return p.button===4?(C|=64,C|=p.action):(C|=3&p.button,4&p.button&&(C|=64),8&p.button&&(C|=128),p.action===32?C|=32:p.action!==0||D||(C|=3)),C}let a=String.fromCharCode,i={DEFAULT:p=>{let D=[d(p,!1)+32,p.col+32,p.row+32];return D[0]>255||D[1]>255||D[2]>255?"":`\x1B[M${a(D[0])}${a(D[1])}${a(D[2])}`},SGR:p=>{let D=p.action===0&&p.button!==4?"m":"M";return`\x1B[<${d(p,!0)};${p.col};${p.row}${D}`},SGR_PIXELS:p=>{let D=p.action===0&&p.button!==4?"m":"M";return`\x1B[<${d(p,!0)};${p.x};${p.y}${D}`}},s=r.CoreMouseService=class extends h.Disposable{constructor(p,D){super(),this._bufferService=p,this._coreService=D,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(g))this.addProtocol(C,g[C]);for(let C of Object.keys(i))this.addEncoding(C,i[C]);this.reset()}addProtocol(p,D){this._protocols[p]=D}addEncoding(p,D){this._encodings[p]=D}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(p){if(!this._protocols[p])throw new Error(`unknown protocol "${p}"`);this._activeProtocol=p,this._onProtocolChange.fire(this._protocols[p].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(p){if(!this._encodings[p])throw new Error(`unknown encoding "${p}"`);this._activeEncoding=p}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(p){if(p.col<0||p.col>=this._bufferService.cols||p.row<0||p.row>=this._bufferService.rows||p.button===4&&p.action===32||p.button===3&&p.action!==32||p.button!==4&&(p.action===2||p.action===3)||(p.col++,p.row++,p.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,p,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(p))return!1;let D=this._encodings[this._activeEncoding](p);return D&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(D):this._coreService.triggerDataEvent(D,!0)),this._lastEvent=p,!0}explainEvents(p){return{down:!!(1&p),up:!!(2&p),drag:!!(4&p),move:!!(8&p),wheel:!!(16&p)}}_equalEvents(p,D,C){if(C){if(p.x!==D.x||p.y!==D.y)return!1}else if(p.col!==D.col||p.row!==D.row)return!1;return p.button===D.button&&p.action===D.action&&p.ctrl===D.ctrl&&p.alt===D.alt&&p.shift===D.shift}};r.CoreMouseService=s=c([l(0,u.IBufferService),l(1,u.ICoreService)],s)},6975:function(_,r,o){var c=this&&this.__decorate||function(s,p,D,C){var b,w=arguments.length,m=w<3?p:C===null?C=Object.getOwnPropertyDescriptor(p,D):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(s,p,D,C);else for(var y=s.length-1;y>=0;y--)(b=s[y])&&(m=(w<3?b(m):w>3?b(p,D,m):b(p,D))||m);return w>3&&m&&Object.defineProperty(p,D,m),m},l=this&&this.__param||function(s,p){return function(D,C){p(D,C,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreService=void 0;let u=o(1439),v=o(8460),h=o(844),g=o(2585),d=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),i=r.CoreService=class extends h.Disposable{constructor(s,p,D){super(),this._bufferService=s,this._logService=p,this._optionsService=D,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(d),this.decPrivateModes=(0,u.clone)(a)}reset(){this.modes=(0,u.clone)(d),this.decPrivateModes=(0,u.clone)(a)}triggerDataEvent(s,p=!1){if(this._optionsService.rawOptions.disableStdin)return;let D=this._bufferService.buffer;p&&this._optionsService.rawOptions.scrollOnUserInput&&D.ybase!==D.ydisp&&this._onRequestScrollToBottom.fire(),p&&this._onUserInput.fire(),this._logService.debug(`sending data "${s}"`,()=>s.split("").map(C=>C.charCodeAt(0))),this._onData.fire(s)}triggerBinaryEvent(s){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${s}"`,()=>s.split("").map(p=>p.charCodeAt(0))),this._onBinary.fire(s))}};r.CoreService=i=c([l(0,g.IBufferService),l(1,g.ILogService),l(2,g.IOptionsService)],i)},9074:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DecorationService=void 0;let c=o(8055),l=o(8460),u=o(844),v=o(6106),h=0,g=0;class d extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(s=>s?.marker.line),this._onDecorationRegistered=this.register(new l.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new l.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(s){if(s.marker.isDisposed)return;let p=new a(s);if(p){let D=p.marker.onDispose(()=>p.dispose());p.onDispose(()=>{p&&(this._decorations.delete(p)&&this._onDecorationRemoved.fire(p),D.dispose())}),this._decorations.insert(p),this._onDecorationRegistered.fire(p)}return p}reset(){for(let s of this._decorations.values())s.dispose();this._decorations.clear()}*getDecorationsAtCell(s,p,D){var C,b,w;let m=0,y=0;for(let M of this._decorations.getKeyIterator(p))m=(C=M.options.x)!==null&&C!==void 0?C:0,y=m+((b=M.options.width)!==null&&b!==void 0?b:1),s>=m&&s<y&&(!D||((w=M.options.layer)!==null&&w!==void 0?w:"bottom")===D)&&(yield M)}forEachDecorationAtCell(s,p,D,C){this._decorations.forEachByKey(p,b=>{var w,m,y;h=(w=b.options.x)!==null&&w!==void 0?w:0,g=h+((m=b.options.width)!==null&&m!==void 0?m:1),s>=h&&s<g&&(!D||((y=b.options.layer)!==null&&y!==void 0?y:"bottom")===D)&&C(b)})}}r.DecorationService=d;class a extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(s){super(),this.options=s,this.onRenderEmitter=this.register(new l.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=s.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InstantiationService=r.ServiceCollection=void 0;let c=o(2585),l=o(8343);class u{constructor(...h){this._entries=new Map;for(let[g,d]of h)this.set(g,d)}set(h,g){let d=this._entries.get(h);return this._entries.set(h,g),d}forEach(h){for(let[g,d]of this._entries.entries())h(g,d)}has(h){return this._entries.has(h)}get(h){return this._entries.get(h)}}r.ServiceCollection=u,r.InstantiationService=class{constructor(){this._services=new u,this._services.set(c.IInstantiationService,this)}setService(v,h){this._services.set(v,h)}getService(v){return this._services.get(v)}createInstance(v,...h){let g=(0,l.getServiceDependencies)(v).sort((i,s)=>i.index-s.index),d=[];for(let i of g){let s=this._services.get(i.id);if(!s)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${i.id}.`);d.push(s)}let a=g.length>0?g[0].index:h.length;if(h.length!==a)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${a+1} conflicts with ${h.length} static arguments`);return new v(...h,...d)}}},7866:function(_,r,o){var c=this&&this.__decorate||function(a,i,s,p){var D,C=arguments.length,b=C<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,s):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,p);else for(var w=a.length-1;w>=0;w--)(D=a[w])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},l=this&&this.__param||function(a,i){return function(s,p){i(s,p,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;let u=o(844),v=o(2585),h={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF},g,d=r.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),g=this}_updateLogLevel(){this._logLevel=h[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let i=0;i<a.length;i++)typeof a[i]=="function"&&(a[i]=a[i]())}_log(a,i,s){this._evalLazyOptionalParams(s),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+i,...s)}trace(a,...i){var s,p;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((p=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.trace.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.log,a,i)}debug(a,...i){var s,p;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((p=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.debug.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.log,a,i)}info(a,...i){var s,p;this._logLevel<=v.LogLevelEnum.INFO&&this._log((p=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.info.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.info,a,i)}warn(a,...i){var s,p;this._logLevel<=v.LogLevelEnum.WARN&&this._log((p=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.warn.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.warn,a,i)}error(a,...i){var s,p;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((p=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.error.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.error,a,i)}};r.LogService=d=c([l(0,v.IOptionsService)],d),r.setTraceLogger=function(a){g=a},r.traceCall=function(a,i,s){if(typeof s.value!="function")throw new Error("not supported");let p=s.value;s.value=function(...D){if(g.logLevel!==v.LogLevelEnum.TRACE)return p.apply(this,D);g.trace(`GlyphRenderer#${p.name}(${D.map(b=>JSON.stringify(b)).join(", ")})`);let C=p.apply(this,D);return g.trace(`GlyphRenderer#${p.name} return`,C),C}}},7302:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsService=r.DEFAULT_OPTIONS=void 0;let c=o(8460),l=o(844),u=o(6114);r.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let v=["normal","bold","100","200","300","400","500","600","700","800","900"];class h extends l.Disposable{constructor(d){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;let a=Object.assign({},r.DEFAULT_OPTIONS);for(let i in d)if(i in a)try{let s=d[i];a[i]=this._sanitizeAndValidateOption(i,s)}catch(s){console.error(s)}this.rawOptions=a,this.options=Object.assign({},a),this._setupOptions()}onSpecificOptionChange(d,a){return this.onOptionChange(i=>{i===d&&a(this.rawOptions[d])})}onMultipleOptionChange(d,a){return this.onOptionChange(i=>{d.indexOf(i)!==-1&&a()})}_setupOptions(){let d=i=>{if(!(i in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${i}"`);return this.rawOptions[i]},a=(i,s)=>{if(!(i in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${i}"`);s=this._sanitizeAndValidateOption(i,s),this.rawOptions[i]!==s&&(this.rawOptions[i]=s,this._onOptionChange.fire(i))};for(let i in this.rawOptions){let s={get:d.bind(this,i),set:a.bind(this,i)};Object.defineProperty(this.options,i,s)}}_sanitizeAndValidateOption(d,a){switch(d){case"cursorStyle":if(a||(a=r.DEFAULT_OPTIONS[d]),!function(i){return i==="block"||i==="underline"||i==="bar"}(a))throw new Error(`"${a}" is not a valid value for ${d}`);break;case"wordSeparator":a||(a=r.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=v.includes(a)?a:r.DEFAULT_OPTIONS[d];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(`${d} cannot be less than 1, value: ${a}`);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${a}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${a}`);break;case"rows":case"cols":if(!a&&a!==0)throw new Error(`${d} must be numeric, value: ${a}`);break;case"windowsPty":a=a??{}}return a}}r.OptionsService=h},2660:function(_,r,o){var c=this&&this.__decorate||function(h,g,d,a){var i,s=arguments.length,p=s<3?g:a===null?a=Object.getOwnPropertyDescriptor(g,d):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(h,g,d,a);else for(var D=h.length-1;D>=0;D--)(i=h[D])&&(p=(s<3?i(p):s>3?i(g,d,p):i(g,d))||p);return s>3&&p&&Object.defineProperty(g,d,p),p},l=this&&this.__param||function(h,g){return function(d,a){g(d,a,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkService=void 0;let u=o(2585),v=r.OscLinkService=class{constructor(h){this._bufferService=h,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(h){let g=this._bufferService.buffer;if(h.id===void 0){let D=g.addMarker(g.ybase+g.y),C={data:h,id:this._nextId++,lines:[D]};return D.onDispose(()=>this._removeMarkerFromLink(C,D)),this._dataByLinkId.set(C.id,C),C.id}let d=h,a=this._getEntryIdKey(d),i=this._entriesWithId.get(a);if(i)return this.addLineToLink(i.id,g.ybase+g.y),i.id;let s=g.addMarker(g.ybase+g.y),p={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[s]};return s.onDispose(()=>this._removeMarkerFromLink(p,s)),this._entriesWithId.set(p.key,p),this._dataByLinkId.set(p.id,p),p.id}addLineToLink(h,g){let d=this._dataByLinkId.get(h);if(d&&d.lines.every(a=>a.line!==g)){let a=this._bufferService.buffer.addMarker(g);d.lines.push(a),a.onDispose(()=>this._removeMarkerFromLink(d,a))}}getLinkData(h){var g;return(g=this._dataByLinkId.get(h))===null||g===void 0?void 0:g.data}_getEntryIdKey(h){return`${h.id};;${h.uri}`}_removeMarkerFromLink(h,g){let d=h.lines.indexOf(g);d!==-1&&(h.lines.splice(d,1),h.lines.length===0&&(h.data.id!==void 0&&this._entriesWithId.delete(h.key),this._dataByLinkId.delete(h.id)))}};r.OscLinkService=v=c([l(0,u.IBufferService)],v)},8343:(_,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;let o="di$target",c="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(l){return l[c]||[]},r.createDecorator=function(l){if(r.serviceRegistry.has(l))return r.serviceRegistry.get(l);let u=function(v,h,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,a,i){a[o]===a?a[c].push({id:d,index:i}):(a[c]=[{id:d,index:i}],a[o]=a)})(u,v,g)};return u.toString=()=>l,r.serviceRegistry.set(l,u),u}},2585:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;let c=o(8343);var l;r.IBufferService=(0,c.createDecorator)("BufferService"),r.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),r.ICoreService=(0,c.createDecorator)("CoreService"),r.ICharsetService=(0,c.createDecorator)("CharsetService"),r.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(l||(r.LogLevelEnum=l={})),r.ILogService=(0,c.createDecorator)("LogService"),r.IOptionsService=(0,c.createDecorator)("OptionsService"),r.IOscLinkService=(0,c.createDecorator)("OscLinkService"),r.IUnicodeService=(0,c.createDecorator)("UnicodeService"),r.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(_,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeService=void 0;let c=o(8460),l=o(225);r.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;let u=new l.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(u){if(!this._providers[u])throw new Error(`unknown Unicode version "${u}"`);this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)}register(u){this._providers[u.version]=u}wcwidth(u){return this._activeProvider.wcwidth(u)}getStringCellWidth(u){let v=0,h=u.length;for(let g=0;g<h;++g){let d=u.charCodeAt(g);if(55296<=d&&d<=56319){if(++g>=h)return v+this.wcwidth(d);let a=u.charCodeAt(g);56320<=a&&a<=57343?d=1024*(d-55296)+a-56320+65536:v+=this.wcwidth(a)}v+=this.wcwidth(d)}return v}}}},t={};function n(_){var r=t[_];if(r!==void 0)return r.exports;var o=t[_]={exports:{}};return e[_].call(o.exports,o,o.exports,n),o.exports}var f={};return(()=>{var _=f;Object.defineProperty(_,"__esModule",{value:!0}),_.Terminal=void 0;let r=n(9042),o=n(3236),c=n(844),l=n(5741),u=n(8285),v=n(7975),h=n(7090),g=["cols","rows"];class d extends c.Disposable{constructor(i){super(),this._core=this.register(new o.Terminal(i)),this._addonManager=this.register(new l.AddonManager),this._publicOptions=Object.assign({},this._core.options);let s=D=>this._core.options[D],p=(D,C)=>{this._checkReadonlyOptions(D),this._core.options[D]=C};for(let D in this._core.options){let C={get:s.bind(this,D),set:p.bind(this,D)};Object.defineProperty(this._publicOptions,D,C)}}_checkReadonlyOptions(i){if(g.includes(i))throw new Error(`Option "${i}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new h.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let i=this._core.coreService.decPrivateModes,s="none";switch(this._core.coreMouseService.activeProtocol){case"X10":s="x10";break;case"VT200":s="vt200";break;case"DRAG":s="drag";break;case"ANY":s="any"}return{applicationCursorKeysMode:i.applicationCursorKeys,applicationKeypadMode:i.applicationKeypad,bracketedPasteMode:i.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:s,originMode:i.origin,reverseWraparoundMode:i.reverseWraparound,sendFocusMode:i.sendFocus,wraparoundMode:i.wraparound}}get options(){return this._publicOptions}set options(i){for(let s in i)this._publicOptions[s]=i[s]}blur(){this._core.blur()}focus(){this._core.focus()}resize(i,s){this._verifyIntegers(i,s),this._core.resize(i,s)}open(i){this._core.open(i)}attachCustomKeyEventHandler(i){this._core.attachCustomKeyEventHandler(i)}registerLinkProvider(i){return this._core.registerLinkProvider(i)}registerCharacterJoiner(i){return this._checkProposedApi(),this._core.registerCharacterJoiner(i)}deregisterCharacterJoiner(i){this._checkProposedApi(),this._core.deregisterCharacterJoiner(i)}registerMarker(i=0){return this._verifyIntegers(i),this._core.registerMarker(i)}registerDecoration(i){var s,p,D;return this._checkProposedApi(),this._verifyPositiveIntegers((s=i.x)!==null&&s!==void 0?s:0,(p=i.width)!==null&&p!==void 0?p:0,(D=i.height)!==null&&D!==void 0?D:0),this._core.registerDecoration(i)}hasSelection(){return this._core.hasSelection()}select(i,s,p){this._verifyIntegers(i,s,p),this._core.select(i,s,p)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(i,s){this._verifyIntegers(i,s),this._core.selectLines(i,s)}dispose(){super.dispose()}scrollLines(i){this._verifyIntegers(i),this._core.scrollLines(i)}scrollPages(i){this._verifyIntegers(i),this._core.scrollPages(i)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(i){this._verifyIntegers(i),this._core.scrollToLine(i)}clear(){this._core.clear()}write(i,s){this._core.write(i,s)}writeln(i,s){this._core.write(i),this._core.write(`\r
`,s)}paste(i){this._core.paste(i)}refresh(i,s){this._verifyIntegers(i,s),this._core.refresh(i,s)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(i){this._addonManager.loadAddon(this,i)}static get strings(){return r}_verifyIntegers(...i){for(let s of i)if(s===1/0||isNaN(s)||s%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...i){for(let s of i)if(s&&(s===1/0||isNaN(s)||s%1!=0||s<0))throw new Error("This API only accepts positive integers")}}_.Terminal=d})(),f})())});var Tf={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var le=function(e){return e.identity},ve={identity:function(e){return e},Semigroupoid0:function(){return Tf}};var FD={fromString:le(ve)},lt=function(e){return e.fromString};var LD=function(e){return function(t){for(var n=t.length,f=new Array(n),_=0;_<n;_++)f[_]=e(t[_]);return f}};var or=!0;var We=function(e){return function(t){return function(n){return e(n)(t)}}},ge=function(e){return function(t){return e}};var AD=function(e){return function(t){return t(e)}};var Ht=function(){function e(){}return e.value=new e,e}();var $=function(e){return e.map};var ot=function(e){return $(e)(ge(void 0))},Cu=function(e){var t=$(e);return function(n){return function(f){return t(ge(f))(n)}}};var dt={map:LD};var xD=function(e){return function(t){return e+t}},ID=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var Xr=function(e){return e.reflectSymbol};var Mf={append:xD};var It={append:ID};var ce=function(e){return e.append};var Lp={alt:ce(It),Functor0:function(){return dt}},ur=function(e){return e.alt};var PD=function(e){return function(t){for(var n=e.length,f=t.length,_=new Array(n*f),r=0,o=0;o<n;o++)for(var c=e[o],l=0;l<f;l++)_[r++]=c(t[l]);return _}};var sF=le(ve);var Si={apply:PD,Functor0:function(){return dt}},Ye=function(e){return e.apply};var Bn=function(e){var t=Ye(e),n=$(e.Functor0());return function(f){return function(_){return t(n(ge(sF))(f))(_)}}};var z=function(e){return e.pure},xc=function(e){var t=z(e);return function(n){return function(f){if(!n)return f;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,f.constructor.name])}}},Yt=function(e){var t=z(e);return function(n){return function(f){if(n)return f;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,f.constructor.name])}}},Ic=function(e){var t=Ye(e.Apply0()),n=z(e);return function(f){return function(_){return t(n(f))(_)}}};var bu={pure:function(e){return[e]},Apply0:function(){return Si}};var OD=function(e){return function(t){for(var n=[],f=0,_=e.length;f<_;f++)Array.prototype.push.apply(n,t(e[f]));return n}};var _F=le(ve),ht=function(e){return e.discard};var Eo={bind:OD,Apply0:function(){return Si}},Y=function(e){return e.bind},Gt=function(e){return We(Y(e))},Ff=function(e){var t=Gt(e);return function(n){return function(f){return function(_){return t(n)(f(_))}}}};var gt={discard:function(e){return Y(e)}};var Su=function(e){var t=Y(e);return function(n){return t(n)(_F)}};var pF=function(e,t){if(e<1)return[];var n=new Array(e);return n.fill(t)},dF=function(e,t){for(var n=[],f=0,_=0;_<e;_++)n[f++]=t;return n},vF=typeof Array.prototype.fill=="function"?pF:dF,kD=function(){function e(_,r){this.head=_,this.tail=r}var t={};function n(_){return function(r){return new e(_,r)}}function f(_){for(var r=[],o=0,c=_;c!==t;)r[o++]=c.head,c=c.tail;return r}return function(_,r){return f(_(n)(t)(r))}}(),kr=function(e){return e.length},ND=function(e,t,n){return n.length===0?e({}):t(n[0])(n.slice(1))},BD=function(e,t,n,f){return f<0||f>=n.length?t:e(n[f])};var WD=function(e,t,n,f){for(var _=0,r=f.length;_<r;_++)if(n(f[_]))return e(_);return t},$D=function(e,t,n,f){for(var _=f.length-1;_>=0;_--)if(n(f[_]))return e(_);return t},qD=function(e,t,n,f,_){if(n<0||n>_.length)return t;var r=_.slice();return r.splice(n,0,f),e(r)},UD=function(e,t,n,f){if(n<0||n>=f.length)return t;var _=f.slice();return _.splice(n,1),e(_)};var wu=function(e){return e.slice().reverse()};var VD=function(){function e(t,n,f,_,r,o){var c,l,u,v,h,g,d;for(c=r+(o-r>>1),c-r>1&&e(t,n,_,f,r,c),o-c>1&&e(t,n,_,f,c,o),l=r,u=c,v=r;l<c&&u<o;)h=_[l],g=_[u],d=n(t(h)(g)),d>0?(f[v++]=g,++u):(f[v++]=h,++l);for(;l<c;)f[v++]=_[l++];for(;u<o;)f[v++]=_[u++]}return function(t,n,f){var _;return f.length<2?f:(_=f.slice(0),e(t,n,_,f.slice(0),0,f.length),_)}}(),zD=function(e,t,n){return n.slice(e,t)};var GD=function(e){var t=Y(e.Bind1()),n=xc(e.Applicative0());return function(f){return function(_){return t(f)(function(r){return n(r)(_)})}}};var xp=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(f){return function(_){return t(_)(function(r){return n(f(r))})}}},Nr=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(f){return function(_){return t(f)(function(r){return t(_)(function(o){return n(r(o))})})}}};var hF=Number.POSITIVE_INFINITY,gF=Number.NEGATIVE_INFINITY;var Lf=function(e){return function(t){return function(n){return function(f){return function(_){return f<_?e:f===_?t:n}}}}},jD=Lf,QD=Lf,JD=Lf,KD=Lf;var XD=function(e){return function(t){return function(n){for(var f=0,_=t.length,r=n.length;f<_&&f<r;){var o=t[f],c=n[f],l=e(o)(c);if(l!==0)return l;f++}return _===r?0:_>r?-1:1}}};var Af=function(e){return function(t){return e===t}},YD=Af,ZD=Af,eC=Af;var tC=Af,rC=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var f=0;f<t.length;f++)if(!e(t[f])(n[f]))return!1;return!0}}};var xf={eq:function(e){return function(t){return!0}}},_n={eq:tC};var Rc={eq:eC},za={eq:ZD};var If={eq:YD};var Ce=function(e){return e.eq},bF=Ce(If),Ga=function(e){return{eq:rC(Ce(e))}};var Pc=function(e){var t=Ce(e);return function(n){return function(f){return bF(t(n)(f))(!1)}}};var te=function(){function e(){}return e.value=new e,e}(),Z=function(){function e(){}return e.value=new e,e}(),Me=function(){function e(){}return e.value=new e,e}();var Mo={eq:function(e){return function(t){return e instanceof te&&t instanceof te||e instanceof Z&&t instanceof Z||e instanceof Me&&t instanceof Me}}};var nC=function(e){return function(t){return e-t|0}};var aC=function(e){return function(t){return e+t|0}},oC=function(e){return function(t){return e*t|0}},iC=function(e){return function(t){return e+t}},uC=function(e){return function(t){return e*t}};var Tn=function(e){return e.zero};var Ip={add:iC,zero:0,mul:uC,one:1},Tu={add:aC,zero:0,mul:oC,one:1};var ea=function(e){return e.one};var En=function(e){return e.add};var Rf=function(e){return e.sub};var Hc={sub:nC,Semiring0:function(){return Tu}};var Rp=function(e){var t=Rf(e),n=Tn(e.Semiring0());return function(f){return t(n)(f)}};var ja={compare:function(e){return function(t){return Me.value}},Eq0:function(){return xf}},Zt=function(){return{compare:KD(te.value)(Me.value)(Z.value),Eq0:function(){return _n}}}();var Qa=function(){return{compare:JD(te.value)(Me.value)(Z.value),Eq0:function(){return Rc}}}(),rt=function(){return{compare:QD(te.value)(Me.value)(Z.value),Eq0:function(){return za}}}();var Oc=function(){return{compare:jD(te.value)(Me.value)(Z.value),Eq0:function(){return If}}}();var pe=function(e){return e.compare},TF=pe(rt),Pf=function(e){var t=pe(e);return function(n){return function(f){return function(_){return t(n(f))(n(_))}}}};var Pp=function(e){var t=pe(e);return function(n){return function(f){var _=t(n)(f);return!(_ instanceof te)}}};var Lo=function(e){var t=pe(e);return function(n){return function(f){var _=t(n)(f);if(_ instanceof te)return f;if(_ instanceof Me||_ instanceof Z)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[_.constructor.name])}}},kc=function(e){var t=pe(e);return function(n){return function(f){var _=t(n)(f);if(_ instanceof te||_ instanceof Me)return n;if(_ instanceof Z)return f;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[_.constructor.name])}}},Ti=function(e){var t=pe(e),n=Ga(e.Eq0());return{compare:function(){var f=function(_){return function(r){var o=t(_)(r);if(o instanceof Me)return 0;if(o instanceof te)return 1;if(o instanceof Z)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[o.constructor.name])}};return function(_){return function(r){return TF(0)(XD(f)(_)(r))}}}(),Eq0:function(){return n}}};var _C=function(e){var t=kc(e),n=Lo(e);return function(f){return function(_){return function(r){return t(_)(n(f)(r))}}}};var Hp=function(e){var t=Pp(e);return function(n){var f=Tn(n.Semiring0()),_=Rp(n);return function(r){var o=t(r)(f);return o?r:_(r)}}};var ta=function(e){return e.top};var Eu={top:2147483647,bottom:-2147483648,Ord0:function(){return rt}};var Ao=function(e){return e.bottom};var pC=function(e){return e.toString()},dC=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var vC=function(e){return function(t){for(var n=[],f=0,_=t.length;f<_;f++)n[f]=e(t[f]);return"["+n.join(",")+"]"}};var pn={show:dC},ra={show:pC};var ye=function(e){return e.show},Mu=function(e){return{show:vC(ye(e))}};var IF=le(ve),N=function(){function e(){}return e.value=new e,e}(),O=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hf=function(e){var t=ye(e);return{show:function(n){if(n instanceof O)return"(Just "+(t(n.value0)+")");if(n instanceof N)return"Nothing";throw new Error("Failed pattern match at Data.Maybe (line 223, column 1 - line 225, column 28): "+[n.constructor.name])}}},Bp=function(e){var t=ce(e);return{append:function(n){return function(f){if(n instanceof N)return f;if(f instanceof N)return n;if(n instanceof O&&f instanceof O)return new O(t(n.value0)(f.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,f.constructor.name])}}}};var mC=function(e){var t=Bp(e);return{mempty:N.value,Semigroup0:function(){return t}}};var Ge=function(e){return function(t){return function(n){if(n instanceof N)return e;if(n instanceof O)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Io=Ge(!0)(ge(!1)),Ei=Ge(!1)(ge(!0));var it={map:function(e){return function(t){return t instanceof O?new O(e(t.value0)):N.value}}},RF=$(it);var pr=function(e){return Ge(e)(IF)},na=function(){return function(e){if(e instanceof O)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var Fu=function(e){var t=Ce(e);return{eq:function(n){return function(f){return n instanceof N&&f instanceof N?!0:n instanceof O&&f instanceof O?t(n.value0)(f.value0):!1}}}};var Bc={apply:function(e){return function(t){if(e instanceof O)return RF(e.value0)(t);if(e instanceof N)return N.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return it}};var en={bind:function(e){return function(t){if(e instanceof O)return t(e.value0);if(e instanceof N)return N.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return Bc}};var tt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Br=function(e){return function(t){return function(n){if(n instanceof tt)return e(n.value0);if(n instanceof Qe)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Of=function(){return Br(ge(N.value))(O.create)}();var hC=Br(ge(!1))(ge(!0));var Sa=function(e){return e};var Mi={map:function(e){return function(t){return e(t)}}};var kf={apply:function(e){return function(t){return e(t)}},Functor0:function(){return Mi}},Wp={bind:function(e){return function(t){return t(e)}},Apply0:function(){return kf}},$p={pure:Sa,Apply0:function(){return kf}},Ja={Applicative0:function(){return $p},Bind1:function(){return Wp}};var gC=function(e){return Math.min(Math.abs(e),2147483647)},DC=function(e){return function(t){return t===0?0:t>0?Math.floor(e/t):-Math.floor(e/-t)}},CC=function(e){return function(t){if(t===0)return 0;var n=Math.abs(t);return(e%n+n)%n}};var yC={Ring0:function(){return Hc}};var Wc=function(e){return e.mod};var Nf={degree:gC,div:DC,mod:CC,CommutativeRing0:function(){return yC}};var Ro={mempty:"",Semigroup0:function(){return Mf}};var Fi={mempty:[],Semigroup0:function(){return It}};var Je=function(e){return e.mempty};var SC=function(e){return function(){return e}},wC=function(e){return function(t){return function(){return t(e())()}}};var TC=function(e,t,n){var f=0,_;return function(r){if(f===2)return _;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,_=n(),f=2,_}},wa={Applicative0:function(){return Rt},Bind1:function(){return Mn}},Mn={bind:wC,Apply0:function(){return MC(0)}},Rt={pure:SC,Apply0:function(){return MC(0)}},EC=TC("functorEffect","Effect",function(){return{map:Ic(Rt)}}),MC=TC("applyEffect","Effect",function(){return{apply:Nr(wa),Functor0:function(){return EC(0)}}}),Ae=EC(20);var FC=function(e){return function(){return{value:e}}};var xe=function(e){return function(){return e.value}},LC=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},bt=function(e){return function(t){return function(){t.value=e}}};var $F=ot(Ae),Pt=FC,qp=LC,Wf=function(e){return qp(function(t){var n=e(t);return{state:n,value:n}})},tn=function(e){return function(t){return $F(Wf(e)(t))}};var zF=Gt(Mn),GF=$(Ae),vt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kt=function(e){return e.tailRecM};var jF=function(e){var t=function(n){var f=!1,_;function r(o){if(o instanceof vt){n=e(o.value0);return}if(o instanceof Dt)return f=!0,o.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 103, column 3 - line 103, column 25): "+[o.constructor.name])}for(;!f;)_=r(n);return _};return function(n){return t(e(n))}};var AC={tailRecM:function(e){var t=function(f){return f},n=jF(function(f){return t(e(f))});return function(f){return Sa(n(f))}},Monad0:function(){return Ja}};var $f={tailRecM:function(e){return function(t){var n=function(f){if(f instanceof Dt)return f.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[f.constructor.name])};return function(){var _=zF(Pt)(e(t))();return function(){for(;!function(){var o=xe(_)();if(o instanceof vt){var c=e(o.value0)();return bt(c)(_)(),!1}if(o instanceof Dt)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[o.constructor.name])}(););return{}}(),GF(n)(xe(_))()}}},Monad0:function(){return wa}};var xC=function(e){return function(t){return function(){return e(t())}}},IC=function(e){return function(){return e}},RC=function(e){return function(t){return function(){return t(e())()}}};var $c=function(e){return function(t){return function(){for(var n=0,f=e.length;n<f;n++)t(e[n])()}}};var XF=function(e,t,n){var f=0,_;return function(r){if(f===2)return _;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,_=n(),f=2,_}};var Li={map:xC};var zp={Applicative0:function(){return qf},Bind1:function(){return Gp}},Gp={bind:RC,Apply0:function(){return kC(0)}},qf={pure:IC,Apply0:function(){return kC(0)}},kC=XF("applyST","Control.Monad.ST.Internal",function(){return{apply:Nr(zp),Functor0:function(){return Li}}});function NC(e){return e}var BC=NC,WC=NC;var $C=function(e,t){return t.push(e)};var Uf=function(t){return function(n){return function(){return t(n)}}},jp=function(t){return function(n){return function(f){return function(){return t(n,f)}}}};var qC=Uf(WC),Qp=Uf(BC);var Jp=jp($C);var VC=function(e){return function(t){return e&&t}},zC=function(e){return function(t){return e||t}},GC=function(e){return!e};var Uc=function(e){return e.tt};var oa=function(e){return e.not};var Kp=function(e){return e.implies};var Vc=function(e){return e.ff};var Lu=function(e){return e.disj},aa={ff:!1,tt:!0,implies:function(e){return function(t){return Lu(aa)(oa(aa)(e))(t)}},conj:VC,disj:zC,not:GC};var zc=function(e){return e.conj},Gc=function(e){var t=Vc(e),n=Uc(e),f=Kp(e),_=zc(e),r=Lu(e),o=oa(e);return{ff:function(c){return t},tt:function(c){return n},implies:function(c){return function(l){return function(u){return f(c(u))(l(u))}}},conj:function(c){return function(l){return function(u){return _(c(u))(l(u))}}},disj:function(c){return function(l){return function(u){return r(c(u))(l(u))}}},not:function(c){return function(l){return o(c(l))}}}};var jC=function(e){return function(t){return function(n){for(var f=t,_=n.length,r=_-1;r>=0;r--)f=e(n[r])(f);return f}}},QC=function(e){return function(t){return function(n){for(var f=t,_=n.length,r=0;r<_;r++)f=e(f)(n[r]);return f}}};var JC={empty:[],Alt0:function(){return Lp}},$r=function(e){return e.empty};var K=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ai=function(e){return function(t){return e(t.value0)(t.value1)}};var Jt=function(e){return e.value1};var Xa={map:function(e){return function(t){return new K(t.value0,e(t.value1))}}};var Ir=function(e){return e.value0};var Zp=function(e){var t=Ce(e);return function(n){var f=Ce(n);return{eq:function(_){return function(r){return t(_.value0)(r.value0)&&f(_.value1)(r.value1)}}}}},Au=function(e){var t=pe(e),n=Zp(e.Eq0());return function(f){var _=pe(f),r=n(f.Eq0());return{compare:function(o){return function(c){var l=t(o.value0)(c.value0);return l instanceof te?te.value:l instanceof Z?Z.value:_(o.value1)(c.value1)}},Eq0:function(){return r}}}};var Fn=function(e){return e.bimap};var _L={append:function(e){return function(t){return e instanceof O?e:t}}};var e0=function(){return{mempty:N.value,Semigroup0:function(){return _L}}}();var Q=function(e){return e};var Kc=function(){return Q};var pL=Kc();var cr=function(){return pL};var vL=le(ve),mL=Ce(Mo),hL=cr();var Nt=function(e){return e.foldr};var ct=function(e){var t=Bn(e.Apply0()),n=z(e);return function(f){var _=Nt(f);return function(r){return _(function(o){return t(r(o))})(n(void 0))}}},jf=function(e){var t=ct(e);return function(n){return We(t(n))}};var Bt=function(e){return e.foldl};var Ya=function(e){var t=Bt(e);return function(n){var f=ce(n.Semigroup0()),_=Je(n);return function(r){return function(o){var c=function(l){return function(u){return l.init?{init:!1,acc:u}:{init:!1,acc:f(l.acc)(f(r)(u))}}};return t(c)({init:!0,acc:_})(o).acc}}}};var i0=function(e){var t=Bt(e);return function(n){var f=function(_){return function(r){if(_ instanceof N)return new O(r);if(_ instanceof O)return new O(function(){var o=mL(n(_.value0)(r))(Z.value);return o?_.value0:r}());throw new Error("Failed pattern match at Data.Foldable (line 441, column 3 - line 441, column 27): "+[_.constructor.name,r.constructor.name])}};return t(f)(N.value)}},od=function(e){var t=pe(e);return function(n){return i0(n)(t)}};var id=function(e){var t=Bt(e);return function(n){return t(En(n))(Tn(n))}};var Ot={foldr:function(e){return function(t){return function(n){if(n instanceof N)return t;if(n instanceof O)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof N)return t;if(n instanceof O)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=Je(e);return function(n){return function(f){if(f instanceof N)return t;if(f instanceof O)return n(f.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,f.constructor.name])}}}};var Qf={foldr:function(e){return function(t){return function(n){if(n instanceof tt)return t;if(n instanceof Qe)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof tt)return t;if(n instanceof Qe)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=Je(e);return function(n){return function(f){if(f instanceof tt)return t;if(f instanceof Qe)return n(f.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,f.constructor.name])}}}};var u0=function(e){var t=Nt(e);return function(n){var f=ce(n.Semigroup0()),_=Je(n);return function(r){return t(function(o){return function(c){return f(r(o))(c)}})(_)}}},St={foldr:jC,foldl:QC,foldMap:function(e){return u0(St)(e)}};var Kt=function(e){return e.foldMap};var Jf=function(e){var t=Kt(e)(e0);return function(n){var f=Ce(n);return function(_){var r=t(function(o){var c=f(_)(o.value0);return c?new O(o.value1):N.value});return function(o){return hL(r(o))}}}};var Pi=function(e){var t=Kt(e);return function(n){return t(n)(vL)}};var Kf=function(e){return function(t){return function(n){return e(t,n)}}},Yc=function(e){return function(t){return function(n){return function(f){return e(t,n,f)}}}},Po=function(e){return function(t){return function(n){return function(f){return function(_){return e(t,n,f,_)}}}}},ud=function(e){return function(t){return function(n){return function(f){return function(_){return function(r){return e(t,n,f,_,r)}}}}}};var c0=function(e){return function(t){for(var n=t.length,f=Array(n),_=0;_<n;_++)f[_]=e(_)(t[_]);return f}};var xu=function(e){return e.mapWithIndex};var es={mapWithIndex:c0,Functor0:function(){return dt}};var rn=function(e){return e.traverse};var ld={traverse:function(e){var t=z(e),n=$(e.Apply0().Functor0());return function(f){return function(_){if(_ instanceof N)return t(N.value);if(_ instanceof O)return n(O.create)(f(_.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[f.constructor.name,_.constructor.name])}}},sequence:function(e){var t=z(e),n=$(e.Apply0().Functor0());return function(f){if(f instanceof N)return t(N.value);if(f instanceof O)return n(O.create)(f.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[f.constructor.name])}},Functor0:function(){return it},Foldable1:function(){return Ot}};var w0=function(e){return function(t){return function(n){return function(f){return function(_){return function(r){for(var o=[],c=r;;){var l=_(c);if(e(l))return o;var u=t(l);o.push(n(u)),c=f(u)}}}}}}};var T0=function(e){return function(t){return function(n){return function(f){return function(_){return function(r){for(var o=[],c=r;;){var l=_(c);o.push(n(l));var u=f(l);if(e(u))return o;c=t(u)}}}}}}};var tl=function(e){return e.foldl1};var uA=na();var pd={unfoldr1:T0(Io)(uA)(Ir)(Jt)};var sA=na(),Ta=function(e){return e.unfoldr};var $n={unfoldr:w0(Io)(sA)(Ir)(Jt),Unfoldable10:function(){return pd}};var lA=ot(Li);var _A=$(dt),pA=$(Li),dd=na(),dA=Yt(qf),vA=Pc(Mo),mA=Ce(Mo);var hA=Pi(St),gA=ce(It);var vd=function(){return Yc(ND)(ge(N.value))(function(e){return function(t){return new O({head:e,tail:t})}})}();var al=function(e){return Yc(VD)(e)(function(t){if(t instanceof Z)return 1;if(t instanceof Me)return 0;if(t instanceof te)return-1;throw new Error("Failed pattern match at Data.Array (line 897, column 38 - line 900, column 11): "+[t.constructor.name])})},md=function(e){var t=Pf(e);return function(n){return al(t(n))}},DA=md(rt),hd=function(e){var t=pe(e);return function(n){return al(t)(n)}};var nl=Yc(zD);var Hi=function(e){return[e]};var Oi=function(e){return kr(e)===0};var L0=xu(es);var A0=function(){return ud(qD)(O.create)(N.value)}();var ol=function(){return Po(BD)(O.create)(N.value)}(),Hu=function(e){return ol(e)(kr(e)-1|0)};var x0=function(e){return function(t){var n=function(_){var r=!1,o;function c(l){var u=ol(t)(l);if(u instanceof O){var v=e(u.value0);if(v){_=l+1|0;return}return r=!0,new O(l)}if(u instanceof N)return r=!0,N.value;throw new Error("Failed pattern match at Data.Array (line 1035, column 5 - line 1037, column 25): "+[u.constructor.name])}for(;!r;)o=c(_);return o},f=n(0);if(f instanceof O&&f.value0===0)return{init:[],rest:t};if(f instanceof O)return{init:nl(0)(f.value0)(t),rest:nl(f.value0)(kr(t))(t)};if(f instanceof N)return{init:t,rest:[]};throw new Error("Failed pattern match at Data.Array (line 1022, column 3 - line 1028, column 30): "+[f.constructor.name])}},il=function(e){return function(t){return x0(e)(t).init}};var Ou=function(e){return ol(e)(0)},I0=function(e){return function(t){var n=al(function(_){return function(r){return e(Jt(_))(Jt(r))}})(L0(K.create)(t)),f=Ou(n);if(f instanceof N)return[];if(f instanceof O)return _A(Jt)(DA(Ir)(function(){var r=qC(Hi(f.value0))();return $c(n)(function(o){return function(){var l=pA(function(){var u=function(v){return dd(Hu(v))};return function(v){return Jt(u(v))}}())(Qp(r))();return dA(vA(e(l)(o.value1))(Me.value))(lA(Jp(o)(r)))()}})(),Qp(r)()}()));throw new Error("Failed pattern match at Data.Array (line 1115, column 17 - line 1123, column 28): "+[f.constructor.name])}},rs=function(e){return I0(pe(e))};var ki=function(e){return Kf(kD)(Nt(e))};var R0=function(e){return hA(e)};var P0=function(){return Po($D)(O.create)(N.value)}(),ns=function(e){return function(t){return function(n){var f=Ge(0)(function(_){return _+1|0})(P0(function(_){return mA(e(t)(_))(Z.value)})(n));return dd(A0(f)(t)(n))}}};var H0=function(){return Po(WD)(O.create)(N.value)}();var gd=function(e){return function(t){var n=e<1;return n?t:nl(e)(kr(t))(t)}};var O0=function(){return Po(UD)(O.create)(N.value)}(),ul=function(e){return function(t){return function(n){return n.length===0?[]:Ge(n)(function(f){return dd(O0(f)(n))})(H0(e(t))(n))}}},Dd=function(e){return ul(Ce(e))};var br=function(e){return function(t){return gA([e])(t)}};var Cd=We(Y(Eo)),Ea=function(e){return Cd(function(){var t=Ge([])(Hi);return function(n){return t(e(n))}}())};var as=function(e){return e.foldrWithIndex};var An=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var yd=function(e){var t=$r(e);return function(n){return new An(n,t)}};var sl=function(e){var t=ur(e.Plus1().Alt0()),n=z(e.Applicative0());return function(f){return t(n(f.value0))(f.value1)}};var os=function(e){var t=$(e);return{map:function(n){return function(f){return new An(n(f.value0),t(n)(f.value1))}}}};var fl=function(e){var t=Kt(e),n=Bt(e),f=Nt(e);return{foldMap:function(_){var r=ce(_.Semigroup0()),o=t(_);return function(c){return function(l){return r(c(l.value0))(o(c)(l.value1))}}},foldl:function(_){return function(r){return function(o){return n(_)(_(r)(o.value0))(o.value1)}}},foldr:function(_){return function(r){return function(o){return _(o.value0)(f(_)(r)(o.value1))}}}}};var bd=function(e){var t=Bt(e),n=Nt(e),f=fl(e);return{foldMap1:function(_){var r=ce(_);return function(o){return function(c){return t(function(l){return function(u){return r(l)(o(u))}})(o(c.value0))(c.value1)}}},foldr1:function(_){return function(r){return Ge(r.value0)(_(r.value0))(n(function(o){var c=Ge(o)(_(o));return function(l){return O.create(c(l))}})(N.value)(r.value1))}},foldl1:function(_){return function(r){return t(_)(r.value0)(r.value1)}},Foldable0:function(){return f}}};var W0=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},ku=function(e){return e};var ll=isFinite;var Sd=Math.round;var q0=ta(Eu),U0=Ao(Eu);var z0=function(){return W0(O.create)(N.value)}(),WA=function(e){if(!ll(e))return 0;if(e>=ku(q0))return q0;if(e<=ku(U0))return U0;if(or)return pr(0)(z0(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},G0=function(e){return WA(Sd(e))};var C8=typeof Array.from=="function",y8=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",b8=typeof String.prototype.fromCodePoint=="function",S8=typeof String.prototype.codePointAt=="function";var is={Applicative0:function(){return bu},Plus1:function(){return JC}};var Ho=function(e){return function(t){return t.join(e)}};var Ed=_C(Qa);var ey=ye(pn);var ox=function(){function e(t,n,f,_){this.value0=t,this.value1=n,this.value2=f,this.value3=_}return e.create=function(t){return function(n){return function(f){return function(_){return new e(t,n,f,_)}}}},e}();var ix=function(e){return function(t){return function(n){return function(f){var _=Ed(0)(1)(t),r=Ed(0)(1)(n),o=Ed(0)(1)(f);return new ox(e,_,r,o)}}}};var ty=function(e){return function(t){return function(n){return ix(e)(t)(n)(1)}}},ry=ty(0)(0)(1);var ny=function(e){var t=function(c){return ey(ku(G0(100*c))/100)},n=t(e.value1*100)+"%",f=t(e.value2*100)+"%",_=t(e.value0),r=ey(e.value3),o=e.value3===1;return o?"hsl("+(_+(", "+(n+(", "+(f+")"))))):"hsla("+(_+(", "+(n+(", "+(f+(", "+(r+")")))))))};var Bi=ty(0)(0)(0);var Md={dimap:function(e){return function(t){return function(n){return function(f){return t(n(e(f)))}}}}};var Fd={first:function(e){return function(t){return new K(e(t.value0),t.value1)}},second:$(Xa),Profunctor0:function(){return Md}},Ld=function(e){return e.second};var oy=$(dt),iy=Ld(Fd),sx=ce(It),fx=Jf(St)(_n);var an=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),on=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lx=function(e){return e};var _x=function(e){return e},Fa=function(e){return e.value};var Bu={append:function(e){return function(t){if(e instanceof on&&t instanceof on)return new on(e.value0+t.value0);if(e instanceof on&&t instanceof an)return new an(oy(iy(function(n){return e.value0+n}))(t.value0));if(e instanceof an&&t instanceof on)return new an(oy(iy(function(n){return t.value0+n}))(e.value0));if(e instanceof an&&t instanceof an)return new an(sx(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},px=ce(Bu),Ad={append:function(e){return function(t){return px(e)(t)}}},uy=ce(Ad);var fs=function(e){if(e instanceof an)return pr("")(fx("")(e.value0));if(e instanceof on)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var dl=function(){return{fromString:on.create}}(),cy=lt(dl),vr={fromString:function(e){return lx(cy(e))}},vl=lt(vr);var ko={value:function(e){return vl(ny(e))}};var Wi={value:function(){var e=ye(pn);return function(t){return vl(e(t))}}()},No={value:vl},eo=function(e){var t=Fa(e);return function(n){var f=Fa(n);return{value:function(_){return uy(t(_.value0))(uy(vl(" "))(f(_.value1)))}}}};var er={fromString:function(e){return _x(cy(e))}};var sy=function(e){return e};var ls=function(){return new an([new K("-webkit-",""),new K("-moz-",""),new K("-ms-",""),new K("-o-",""),new K("","")])}();var La=Q,xd=Q;var Id=ce(Ad),Rd=Fa(Wi),Pd=lt(vr),ly=ye(pn),dx=ce(Bu);var ps=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vx=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mx=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hx=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),gx=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Bo=function(e){if(e instanceof ps)return fs(e.value0);if(e instanceof vx)return La(function(t){return La(function(n){return"("+(Bo(t)+(" + "+(Bo(n)+")")))})(e.value1)})(e.value0);if(e instanceof mx)return La(function(t){return La(function(n){return"("+(Bo(t)+(" - "+(Bo(n)+")")))})(e.value1)})(e.value0);if(e instanceof hx)return La(function(t){return"("+(ly(e.value0)+(" * "+(Bo(t)+")")))})(e.value1);if(e instanceof gx)return La(function(t){return"("+(Bo(t)+(" / "+(ly(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},ua={value:function(e){return e instanceof ps?e.value0:dx(ls)(new on("calc"+Bo(e)))}};var Xe=function(e){return new ps(Id(Rd(e))(Pd("px")))};var Wu=function(e){return new ps(Id(Rd(e))(Pd("%")))};var Hd=function(e){return new ps(Id(Rd(e))(Pd("em")))};var Dx=ce(It),_y=z(bu),Cx=Ce(Ga(_n)),Rr=pe(Zt),yx=pe(Ti(Zt)),Wo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),no=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$o=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Uo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Go=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ao=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$u=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),py=function(e){return e},ml=function(){function e(){}return e.value=new e,e}(),Od=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Nd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),dy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ds=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),je=function(e){return function(t){return new ds(Dx(e.value0)(t),e.value1)}},wt=function(){return new ds([],ml.value)}(),my=function(e){return py(_y(ao.create(e)))};var bx={eq:function(e){return function(t){return e instanceof Wo&&t instanceof Wo||e instanceof no&&t instanceof no||e instanceof $o&&t instanceof $o?e.value0===t.value0:e instanceof qo&&t instanceof qo||e instanceof Uo&&t instanceof Uo||e instanceof Vo&&t instanceof Vo||e instanceof zo&&t instanceof zo||e instanceof Go&&t instanceof Go||e instanceof jo&&t instanceof jo?e.value0===t.value0&&e.value1===t.value1:e instanceof ao&&t instanceof ao?e.value0===t.value0:e instanceof $u&&t instanceof $u?e.value0===t.value0&&Cx(e.value1)(t.value1):!1}}};var hy={compare:function(e){return function(t){if(e instanceof Wo&&t instanceof Wo)return Rr(e.value0)(t.value0);if(e instanceof Wo)return te.value;if(t instanceof Wo)return Z.value;if(e instanceof no&&t instanceof no)return Rr(e.value0)(t.value0);if(e instanceof no)return te.value;if(t instanceof no)return Z.value;if(e instanceof $o&&t instanceof $o)return Rr(e.value0)(t.value0);if(e instanceof $o)return te.value;if(t instanceof $o)return Z.value;if(e instanceof qo&&t instanceof qo){var n=Rr(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Rr(e.value1)(t.value1)}if(e instanceof qo)return te.value;if(t instanceof qo)return Z.value;if(e instanceof Uo&&t instanceof Uo){var n=Rr(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Rr(e.value1)(t.value1)}if(e instanceof Uo)return te.value;if(t instanceof Uo)return Z.value;if(e instanceof Vo&&t instanceof Vo){var n=Rr(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Rr(e.value1)(t.value1)}if(e instanceof Vo)return te.value;if(t instanceof Vo)return Z.value;if(e instanceof zo&&t instanceof zo){var n=Rr(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Rr(e.value1)(t.value1)}if(e instanceof zo)return te.value;if(t instanceof zo)return Z.value;if(e instanceof Go&&t instanceof Go){var n=Rr(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Rr(e.value1)(t.value1)}if(e instanceof Go)return te.value;if(t instanceof Go)return Z.value;if(e instanceof jo&&t instanceof jo){var n=Rr(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Rr(e.value1)(t.value1)}if(e instanceof jo)return te.value;if(t instanceof jo)return Z.value;if(e instanceof ao&&t instanceof ao)return Rr(e.value0)(t.value0);if(e instanceof ao)return te.value;if(t instanceof ao)return Z.value;if(e instanceof $u&&t instanceof $u){var n=Rr(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:yx(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return bx}};var hl=function(e){return new ds([],new Od(e))},tr=function(e){return function(t){return new ds([],new Nd(e,t))}},gy=function(e){return function(t){return new ds([],new kd(e,t))}};var Ze=function(e){return py(_y(no.create(e)))};var ca=function(e){return e.tell};function sa(e){return new Error(e)}function oo(e){return function(){throw e}}function gl(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var Wd=function(e){return oo(sa(e))};var Sr=function(e){return e.throwError};var Tx={throwError:oo,Monad0:function(){return wa}};var Dy={catchError:We(gl),MonadThrow0:function(){return Tx}};var Un=function(e){return e.catchError};var vs=function(e){var t=Un(e),n=e.MonadThrow0().Monad0(),f=$(n.Bind1().Apply0().Functor0()),_=z(n.Applicative0());return function(r){return t(f(Qe.create)(r))(function(o){return _(tt.create(o))})}};var un=function(e){return e.ask};var hn=function(e){return e.state};var Pr=function(e){var t=hn(e);return function(n){return t(function(f){return new K(void 0,n(f))})}},Vn=function(e){var t=hn(e);return function(n){return t(function(f){var _=n(f);return new K(_,_)})}},Aa=function(e){var t=hn(e);return function(n){return t(function(f){return new K(n(f),f)})}},xa=function(e){return hn(e)(function(t){return new K(t,t)})};var pt=function(e){return e.lift};var Dl={liftEffect:le(ve),Monad0:function(){return wa}},Ve=function(e){return e.liftEffect};var $d=function(e){return e},qd=function(e){return e};var Cl=function(e){return function(t){return e(t)}},Ud=function(e){var t=$(e);return{map:function(n){return Cl(t(function(f){return new K(n(f.value0),f.value1)}))}}};var ms=function(e){var t=ce(e);return function(n){var f=Ye(n),_=n.Functor0(),r=$(_),o=Ud(_);return{apply:function(c){return function(l){var u=function(v){return function(h){return new K(v.value0(h.value0),t(v.value1)(h.value1))}};return f(r(u)(c))(l)}},Functor0:function(){return o}}}},Vd=function(e){var t=ce(e),n=ms(e);return function(f){var _=Y(f),r=f.Apply0(),o=$(r.Functor0()),c=n(r);return{bind:function(l){return function(u){return _(l)(function(v){var h=u(v.value0);return o(function(g){return new K(g.value0,t(v.value1)(g.value1))})(h)})}},Apply0:function(){return c}}}};var Cy=function(e){var t=Je(e),n=ms(e.Semigroup0());return function(f){var _=z(f),r=n(f.Apply0());return{pure:function(o){return _(new K(o,t))},Apply0:function(){return r}}}},Fx=function(e){var t=Cy(e),n=Vd(e.Semigroup0());return function(f){var _=t(f.Applicative0()),r=n(f.Bind1());return{Applicative0:function(){return _},Bind1:function(){return r}}}};var yy=function(e){var t=e.Semigroup0(),n=Fx(e);return function(f){var _=n(f);return{tell:function(){var r=z(f.Applicative0()),o=K.create(void 0);return function(c){return $d(r(o(c)))}}(),Semigroup0:function(){return t},Monad1:function(){return _}}}};var Lx=cr();var Ax=function(e){return Lx(qd(e))};var by=function(e){return Jt(Ax(e))};var Px=$(Ud(Mi));var Hx=Ye(ms(It)(kf)),Ox=Y(Vd(It)(Wp));var Sy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ty=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ey=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Gd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),My=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ly=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ay=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var kx=function(e){return e},gs=function(e){return by(e)},xy=function(){var e=ca(yy(Fi)(Ja));return function(t){return kx(e(Hi(t)))}}(),st=function(e){return function(t){return xy(new Gd(new zd(e),gs(t)))}};var Ft=function(e){var t=Fa(e);return function(n){return function(f){return xy(new hs(sy(n),t(f)))}}},jd=function(e){var t=Ft(e);return function(n){return t(n)}};var Nx={map:function(e){return function(t){return Px(e)(t)}}};var Bx={apply:function(e){return function(t){return Hx(e)(t)}},Functor0:function(){return Nx}},Jo={bind:function(e){return function(t){return Ox(e)(function(n){return function(f){return f}(t(n))})}},Apply0:function(){return Bx}};var Wx=lt(vr);var Iy=lt(er),$x=Ft(ko),qx=eo(ua);var Ux={value:function(e){return e}},Vx=Ft(eo(Ux)(qx(ko))),Ry=Wx("solid");var Py=$x(Iy("border-color"));var Hy=function(e){return function(t){return function(n){return Vx(Iy("border"))(new K(e,new K(t,n)))}}};var bl=lt(er),zu=lt(vr);var In=function(){var e=Ft(No)(bl("z-index")),t=ye(ra);return function(n){return e(t(n))}}();var zx={value:function(e){return e}};var Gx={value:function(e){return e}};var Ko=zu("relative"),wr=Ft(zx)(bl("position")),Sl=Ft(Wi)(bl("opacity"));var ky=zu("inline-block");var Ny=zu("flex");var By=zu("none");var Gu=Ft(Gx)(bl("display"));var Wy=zu("block"),la=zu("absolute");var jx=lt(vr);var Qx=lt(er);var Jx={value:function(e){return e}};var $y=jx("row");var qy=Ft(Jx)(Qx("flex-direction"));var Xo=Ft(ua),Ia=lt(er),Uy=eo(ua)(ua),Vy=Ft(eo(Uy)(Uy)),io=Xo(Ia("width")),zn=Xo(Ia("top")),wl=Xo(Ia("right"));var Kd=Xo(Ia("padding-right"));var zy=function(e){return function(t){return function(n){return function(f){return Vy(Ia("padding"))(new K(new K(e,t),new K(n,f)))}}}};var Xd=Xo(Ia("margin-right"));var Gy=function(e){return function(t){return function(n){return function(f){return Vy(Ia("margin"))(new K(new K(e,t),new K(n,f)))}}}};var uo=Xo(Ia("left")),_a=Xo(Ia("height")),Yd=Xo(Ia("bottom"));var jy=function(){function e(){}return e.value=new e,e}(),ju=function(){function e(){}return e.value=new e,e}(),Qy=function(){function e(){}return e.value=new e,e}(),Jy=function(){function e(){}return e.value=new e,e}(),Ky=function(){function e(){}return e.value=new e,e}(),Xy=function(){function e(){}return e.value=new e,e}(),Yy=function(){function e(){}return e.value=new e,e}(),Zy=function(){function e(){}return e.value=new e,e}(),eb=function(){function e(){}return e.value=new e,e}(),tb=function(){function e(){}return e.value=new e,e}(),rb=function(){function e(){}return e.value=new e,e}(),nb=function(){function e(){}return e.value=new e,e}(),ab=function(){function e(){}return e.value=new e,e}(),ob=function(){function e(){}return e.value=new e,e}(),ib=function(){function e(){}return e.value=new e,e}(),ub=function(){function e(){}return e.value=new e,e}(),cb=function(){function e(){}return e.value=new e,e}(),sb=function(){function e(){}return e.value=new e,e}(),fb=function(){function e(){}return e.value=new e,e}(),lb=function(){function e(){}return e.value=new e,e}(),_b=function(){function e(){}return e.value=new e,e}(),pb=function(){function e(){}return e.value=new e,e}(),db=function(e){if(e instanceof jy)return"button";if(e instanceof ju)return"checkbox";if(e instanceof Qy)return"color";if(e instanceof Jy)return"date";if(e instanceof Ky)return"datetime-local";if(e instanceof Xy)return"email";if(e instanceof Yy)return"file";if(e instanceof Zy)return"hidden";if(e instanceof eb)return"image";if(e instanceof tb)return"month";if(e instanceof rb)return"number";if(e instanceof nb)return"password";if(e instanceof ab)return"radio";if(e instanceof ob)return"range";if(e instanceof ib)return"reset";if(e instanceof ub)return"search";if(e instanceof cb)return"submit";if(e instanceof sb)return"tel";if(e instanceof fb)return"text";if(e instanceof lb)return"time";if(e instanceof _b)return"url";if(e instanceof pb)return"week";throw new Error("Failed pattern match at DOM.HTML.Indexed.InputType (line 33, column 19 - line 55, column 22): "+[e.constructor.name])};var Oe=function(){function e(){}return e.value=new e,e}(),ke=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Zd=function(e){return e};var Xx=function(e){var t=function(n){return function(f){var _=n,r=!1,o;function c(l,u){if(u instanceof ke&&u.value1 instanceof ke&&u.value1.value1 instanceof ke){_=new ke(u,l),f=u.value1.value1.value1;return}var v=function(g){return g instanceof ke&&g.value1 instanceof ke&&g.value1.value1 instanceof Oe?new ke(e(g.value0),new ke(e(g.value1.value0),Oe.value)):g instanceof ke&&g.value1 instanceof Oe?new ke(e(g.value0),Oe.value):Oe.value},h=function(g){return function(d){var a=g,i=!1,s;function p(D,C){if(D instanceof ke&&D.value0 instanceof ke&&D.value0.value1 instanceof ke&&D.value0.value1.value1 instanceof ke){a=D.value1,d=new ke(e(D.value0.value0),new ke(e(D.value0.value1.value0),new ke(e(D.value0.value1.value1.value0),C)));return}return i=!0,C}for(;!i;)s=p(a,d);return s}};return r=!0,h(l)(v(u))}for(;!r;)o=c(_,f);return o}};return t(Oe.value)},hb={map:Xx};var Tr={foldr:function(e){return function(t){var n=function(){var _=function(r){return function(o){var c=r,l=!1,u;function v(h,g){if(g instanceof Oe)return l=!0,h;if(g instanceof ke){c=new ke(g.value0,h),o=g.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[h.constructor.name,g.constructor.name])}for(;!l;)u=v(c,o);return u}};return _(Oe.value)}(),f=Bt(Tr)(We(e))(t);return function(_){return f(n(_))}}},foldl:function(e){var t=function(n){return function(f){var _=n,r=!1,o;function c(l,u){if(u instanceof Oe)return r=!0,l;if(u instanceof ke){_=e(l)(u.value0),f=u.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[u.constructor.name])}for(;!r;)o=c(_,f);return o}};return t},foldMap:function(e){var t=ce(e.Semigroup0()),n=Je(e);return function(f){return Bt(Tr)(function(_){var r=t(_);return function(o){return r(f(o))}})(n)}}};var Yx=Nt(Tr);var ev={append:function(e){return function(t){return Yx(ke.create)(t)(e)}}},Zx=ce(ev);var eI={alt:Zx,Functor0:function(){return hb}},gb=function(){return{empty:Oe.value,Alt0:function(){return eI}}}();var Vi=function(e,t,n){var f=0,_;return function(r){if(f===2)return _;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,_=n(),f=2,_}};var rI=$(it);var _t=function(){function e(){}return e.value=new e,e}(),mt=function(){function e(t,n,f,_,r,o){this.value0=t,this.value1=n,this.value2=f,this.value3=_,this.value4=r,this.value5=o}return e.create=function(t){return function(n){return function(f){return function(_){return function(r){return function(o){return new e(t,n,f,_,r,o)}}}}}},e}(),Cb=function(){function e(){}return e.value=new e,e}(),tv=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),av=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var El=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),Db=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),Gn=function(e,t,n,f){if(n instanceof _t){if(f instanceof _t)return new mt(1,1,e,t,n,f);if(f instanceof mt)return new mt(1+f.value0|0,1+f.value1|0,e,t,n,f);throw new Error("Failed pattern match at Data.Map.Internal (line 680, column 5 - line 684, column 39): "+[f.constructor.name])}if(n instanceof mt){if(f instanceof _t)return new mt(1+n.value0|0,1+n.value1|0,e,t,n,f);if(f instanceof mt)return new mt(1+function(){var _=n.value0>f.value0;return _?n.value0:f.value0}()|0,(1+n.value1|0)+f.value1|0,e,t,n,f);throw new Error("Failed pattern match at Data.Map.Internal (line 686, column 5 - line 690, column 68): "+[f.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 678, column 32 - line 690, column 68): "+[n.constructor.name])},nI=function(){return We(av.create)(Cb.value)}(),aI=function(e){return function(t){return function(n){var f=function(_){var r=!1,o;function c(l){if(l instanceof Cb)return r=!0,n(void 0);if(l instanceof tv)return r=!0,t(l.value0,l.value1,l.value2);if(l instanceof av){_=e(l.value1)(l.value0);return}throw new Error("Failed pattern match at Data.Map.Internal (line 918, column 8 - line 924, column 20): "+[l.constructor.name])}for(;!r;)o=c(_);return o};return f}}},Yo=function(e){if(e instanceof _t)return 0;if(e instanceof mt)return e.value1;throw new Error("Failed pattern match at Data.Map.Internal (line 616, column 8 - line 618, column 24): "+[e.constructor.name])},zi=function(e){return function(t){return new mt(1,1,e,t,_t.value,_t.value)}},pa=function(){var e=function(f){if(f instanceof _t)return 0;if(f instanceof mt)return f.value0;throw new Error("Failed pattern match at Data.Map.Internal (line 735, column 12 - line 737, column 26): "+[f.constructor.name])},t=function(f,_,r,o,c,l,u){return l instanceof mt&&l.value0>e(u)?Gn(l.value2,l.value3,Gn(f,_,r,l.value4),Gn(o,c,l.value5,u)):Gn(o,c,Gn(f,_,r,l),u)},n=function(f,_,r,o,c,l,u){return l instanceof mt&&e(c)<=l.value0?Gn(l.value2,l.value3,Gn(r,o,c,l.value4),Gn(f,_,l.value5,u)):Gn(r,o,c,Gn(f,_,l,u))};return function(f,_,r,o){if(r instanceof _t)return o instanceof _t?zi(f)(_):o instanceof mt&&o.value0>1?t(f,_,r,o.value2,o.value3,o.value4,o.value5):Gn(f,_,r,o);if(r instanceof mt){if(o instanceof mt){if(o.value0>(r.value0+1|0))return t(f,_,r,o.value2,o.value3,o.value4,o.value5);if(r.value0>(o.value0+1|0))return n(f,_,r.value2,r.value3,r.value4,r.value5,o)}return o instanceof _t&&r.value0>1?n(f,_,r.value2,r.value3,r.value4,r.value5,o):Gn(f,_,r,o)}throw new Error("Failed pattern match at Data.Map.Internal (line 695, column 40 - line 716, column 34): "+[r.constructor.name])}}(),rv=Vi("unsafeSplit","Data.Map.Internal",function(){return function(e,t,n){if(n instanceof _t)return new El(N.value,_t.value,_t.value);if(n instanceof mt){var f=e(t)(n.value2);if(f instanceof te){var _=rv(771)(e,t,n.value4);return new El(_.value0,_.value1,pa(n.value2,n.value3,_.value2,n.value5))}if(f instanceof Z){var _=rv(774)(e,t,n.value5);return new El(_.value0,pa(n.value2,n.value3,n.value4,_.value1),_.value2)}if(f instanceof Me)return new El(new O(n.value3),n.value4,n.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 769, column 5 - line 777, column 30): "+[f.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 765, column 34 - line 777, column 30): "+[n.constructor.name])}}),ov=rv(764),yb=Vi("unsafeSplitLast","Data.Map.Internal",function(){return function(e,t,n,f){if(f instanceof _t)return new Db(e,t,n);if(f instanceof mt){var _=yb(757)(f.value2,f.value3,f.value4,f.value5);return new Db(_.value0,_.value1,pa(e,t,n,_.value2))}throw new Error("Failed pattern match at Data.Map.Internal (line 754, column 37 - line 758, column 57): "+[f.constructor.name])}}),oI=yb(753),iv=function(e,t){if(e instanceof _t)return t;if(e instanceof mt){var n=oI(e.value2,e.value3,e.value4,e.value5);return pa(n.value0,n.value1,n.value2,t)}throw new Error("Failed pattern match at Data.Map.Internal (line 742, column 25 - line 746, column 38): "+[e.constructor.name,t.constructor.name])};var nv=Vi("unsafeUnionWith","Data.Map.Internal",function(){return function(e,t,n,f){if(n instanceof _t)return f;if(f instanceof _t)return n;if(f instanceof mt){var _=ov(e,f.value2,n),r=nv(787)(e,t,_.value1,f.value4),o=nv(788)(e,t,_.value2,f.value5);if(_.value0 instanceof O)return pa(f.value2,t(_.value0.value0)(f.value3),r,o);if(_.value0 instanceof N)return pa(f.value2,f.value3,r,o);throw new Error("Failed pattern match at Data.Map.Internal (line 789, column 5 - line 793, column 46): "+[_.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 782, column 42 - line 793, column 46): "+[n.constructor.name,f.constructor.name])}}),iI=nv(781),uv=function(e){var t=pe(e);return function(n){return function(f){return function(_){return iI(t,n,f,_)}}}},Ml=function(e){return uv(e)(ge)};var cv=function(e){var t=pe(e);return function(n){return function(f){var _=ov(t,n,f);return rI(function(r){return new K(r,iv(_.value1,_.value2))})(_.value0)}}};var Zo=function(e){var t=pe(e);return function(n){var f=function(_){var r=!1,o;function c(l){if(l instanceof _t)return r=!0,N.value;if(l instanceof mt){var u=t(n)(l.value2);if(u instanceof te){_=l.value4;return}if(u instanceof Z){_=l.value5;return}if(u instanceof Me)return r=!0,new O(l.value3);throw new Error("Failed pattern match at Data.Map.Internal (line 281, column 7 - line 284, column 22): "+[u.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 278, column 8 - line 284, column 22): "+[l.constructor.name])}for(;!r;)o=c(_);return o};return f}};var uI=function(){var e=function(t){return function(n){var f=t,_=!1,r;function o(c,l){if(l instanceof _t)return _=!0,c;if(l instanceof mt){if(l.value5 instanceof _t){f=new tv(l.value2,l.value3,c),n=l.value4;return}f=new tv(l.value2,l.value3,new av(l.value5,c)),n=l.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 929, column 13 - line 936, column 48): "+[l.constructor.name])}for(;!_;)r=o(f,n);return r}};return e}(),cI=aI(uI);var sI=function(){var e=function(t,n,f){return new O(new K(new K(t,n),f))};return cI(e)(function(t){return N.value})}(),Gi=function(e){var t=Ta(e)(sI);return function(n){return t(nI(n))}};var cn=function(e){var t=pe(e);return function(n){return function(f){var _=function(r){if(r instanceof _t)return zi(n)(f);if(r instanceof mt){var o=t(n)(r.value2);if(o instanceof te)return pa(r.value2,r.value3,_(r.value4),r.value5);if(o instanceof Z)return pa(r.value2,r.value3,r.value4,_(r.value5));if(o instanceof Me)return new mt(r.value0,r.value1,n,f,r.value4,r.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 469, column 7 - line 472, column 35): "+[o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 466, column 8 - line 472, column 35): "+[r.constructor.name])};return _}}},Qu={map:function(e){var t=function(n){if(n instanceof _t)return _t.value;if(n instanceof mt)return new mt(n.value0,n.value1,n.value2,e(n.value3),t(n.value4),t(n.value5));throw new Error("Failed pattern match at Data.Map.Internal (line 145, column 10 - line 148, column 39): "+[n.constructor.name])};return t}};var co={foldr:function(e){return function(t){var n=Vi("go","Data.Map.Internal",function(){return function(_,r){if(_ instanceof _t)return r;if(_ instanceof mt)return n(170)(_.value4,e(_.value3)(n(170)(_.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 167, column 26 - line 170, column 43): "+[_.constructor.name])}}),f=n(167);return function(_){return f(_,t)}}},foldl:function(e){return function(t){var n=Vi("go","Data.Map.Internal",function(){return function(_,r){if(r instanceof _t)return _;if(r instanceof mt)return n(176)(e(n(176)(_,r.value4))(r.value3),r.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 173, column 26 - line 176, column 43): "+[r.constructor.name])}}),f=n(173);return function(_){return f(t,_)}}},foldMap:function(e){var t=Je(e),n=ce(e.Semigroup0());return function(f){var _=function(r){if(r instanceof _t)return t;if(r instanceof mt)return n(_(r.value4))(n(f(r.value3))(_(r.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 179, column 10 - line 182, column 28): "+[r.constructor.name])};return _}}},sv={foldrWithIndex:function(e){return function(t){var n=Vi("go","Data.Map.Internal",function(){return function(_,r){if(_ instanceof _t)return r;if(_ instanceof mt)return n(190)(_.value4,e(_.value2)(_.value3)(n(190)(_.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 187, column 26 - line 190, column 45): "+[_.constructor.name])}}),f=n(187);return function(_){return f(_,t)}}},foldlWithIndex:function(e){return function(t){var n=Vi("go","Data.Map.Internal",function(){return function(_,r){if(r instanceof _t)return _;if(r instanceof mt)return n(196)(e(r.value2)(n(196)(_,r.value4))(r.value3),r.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 193, column 26 - line 196, column 45): "+[r.constructor.name])}}),f=n(193);return function(_){return f(t,_)}}},foldMapWithIndex:function(e){var t=Je(e),n=ce(e.Semigroup0());return function(f){var _=function(r){if(r instanceof _t)return t;if(r instanceof mt)return n(_(r.value4))(n(f(r.value2)(r.value3))(_(r.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 199, column 10 - line 202, column 30): "+[r.constructor.name])};return _}},Foldable0:function(){return co}},bb=function(){return as(sv)(function(e){return function(t){return function(n){return new ke(e,n)}}})(Oe.value)}();var fv=function(){return Nt(co)(ke.create)(Oe.value)}();var Ra=function(e){var t=!1,n;function f(_){if(_ instanceof _t)return t=!0,N.value;if(_ instanceof mt){if(_.value4 instanceof _t)return t=!0,new O({key:_.value2,value:_.value3});e=_.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 359, column 11 - line 364, column 21): "+[_.constructor.name])}for(;!t;)n=f(e);return n};var Pa=function(e){var t=!1,n;function f(_){if(_ instanceof _t)return t=!0,N.value;if(_ instanceof mt){if(_.value5 instanceof _t)return t=!0,new O({key:_.value2,value:_.value3});e=_.value5;return}throw new Error("Failed pattern match at Data.Map.Internal (line 350, column 11 - line 355, column 21): "+[_.constructor.name])}for(;!t;)n=f(e);return n};var mr=function(){return _t.value}();var jn=function(e){var t=pe(e);return function(n){var f=function(_){if(_ instanceof _t)return _t.value;if(_ instanceof mt){var r=t(n)(_.value2);if(r instanceof te)return pa(_.value2,_.value3,f(_.value4),_.value5);if(r instanceof Z)return pa(_.value2,_.value3,_.value4,f(_.value5));if(r instanceof Me)return iv(_.value4,_.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 496, column 7 - line 499, column 43): "+[r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 493, column 8 - line 499, column 43): "+[_.constructor.name])};return f}};var ei=function(e){var t=pe(e);return function(n){return function(f){return function(_){var r=ov(t,f,_),o=n(r.value0);if(o instanceof N)return iv(r.value1,r.value2);if(o instanceof O)return pa(f,o.value0,r.value1,r.value2);throw new Error("Failed pattern match at Data.Map.Internal (line 512, column 3 - line 516, column 41): "+[o.constructor.name])}}}};var mI=$(it);var Sb=function(e){if(e instanceof Oe)return N.value;if(e instanceof ke)return new O({head:e.value0,tail:e.value1});throw new Error("Failed pattern match at Data.List (line 259, column 1 - line 259, column 66): "+[e.constructor.name])},lv=function(e){return Ta(e)(function(t){return mI(function(n){return new K(n.head,n.tail)})(Sb(t))})};var so=function(){var e=function(t){return function(n){var f=t,_=!1,r;function o(c,l){if(l instanceof Oe)return _=!0,c;if(l instanceof ke){f=new ke(l.value0,c),n=l.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[c.constructor.name,l.constructor.name])}for(;!_;)r=o(f,n);return r}};return e(Oe.value)}();var wb=function(e){return e instanceof Oe};var SI=Kt(Tr),wI=Bt(Tr),TI=Nt(Tr);var EI=function(e){return e};var _v=function(e){return bb(e)};var Eb=EI,Mb={foldMap:function(e){var t=SI(e);return function(n){var f=t(n);return function(_){return f(_v(_))}}},foldl:function(e){return function(t){var n=wI(e)(t);return function(f){return n(_v(f))}}},foldr:function(e){return function(t){var n=TI(e)(t);return function(f){return n(_v(f))}}}};var Lb=function(){var e=ot(Qu);return function(t){return Eb(e(t))}}();var Er=function(){var e={},t="Pure",n="Throw",f="Catch",_="Sync",r="Async",o="Bind",c="Bracket",l="Fork",u="Sequential",v="Map",h="Apply",g="Alt",d="Cons",a="Resume",i="Release",s="Finalizer",p="Finalized",D="Forked",C="Fiber",b="Thunk";function w(V,fe,F,B){this.tag=V,this._1=fe,this._2=F,this._3=B}function m(V){var fe=function(F,B,q){return new w(V,F,B,q)};return fe.tag=V,fe}function y(V){return new w(t,void 0)}function M(V){try{V()}catch(fe){setTimeout(function(){throw fe},0)}}function S(V,fe,F){try{return fe(F())}catch(B){return V(B)}}function T(V,fe,F){try{return fe(F)()}catch(B){return F(V(B))(),y}}var L=function(){var V=1024,fe=0,F=0,B=new Array(V),q=!1;function k(){var de;for(q=!0;fe!==0;)fe--,de=B[F],B[F]=void 0,F=(F+1)%V,de();q=!1}return{isDraining:function(){return q},enqueue:function(de){var J,Fe;fe===V&&(Fe=q,k(),q=Fe),B[(F+fe)%V]=de,fe++,q||k()}}}();function I(V){var fe={},F=0,B=0;return{register:function(q){var k=F++;q.onComplete({rethrow:!0,handler:function(de){return function(){B--,delete fe[k]}}})(),fe[k]=q,B++},isEmpty:function(){return B===0},killAll:function(q,k){return function(){if(B===0)return k();var de=0,J={};function Fe(Ne){J[Ne]=fe[Ne].kill(q,function(Pe){return function(){delete J[Ne],de--,V.isLeft(Pe)&&V.fromLeft(Pe)&&setTimeout(function(){throw V.fromLeft(Pe)},0),de===0&&k()}})()}for(var et in fe)fe.hasOwnProperty(et)&&(de++,Fe(et));return fe={},F=0,B=0,function(Ne){return new w(_,function(){for(var Pe in J)J.hasOwnProperty(Pe)&&J[Pe]()})}}}}}var R=0,P=1,W=2,E=3,A=4,x=5,H=6;function U(V,fe,F){var B=0,q=R,k=F,de=null,J=null,Fe=null,et=null,Ne=null,Pe=0,qe=0,$t=null,yr=!0;function Ar(ne){for(var X,he,Be;;)switch(X=null,he=null,Be=null,q){case W:q=P;try{k=Fe(k),et===null?Fe=null:(Fe=et._1,et=et._2)}catch(xt){q=x,de=V.left(xt),k=null}break;case E:V.isLeft(k)?(q=x,de=k,k=null):Fe===null?q=x:(q=W,k=V.fromRight(k));break;case P:switch(k.tag){case o:Fe&&(et=new w(d,Fe,et)),Fe=k._2,q=P,k=k._1;break;case t:Fe===null?(q=x,k=V.right(k._1)):(q=W,k=k._1);break;case _:q=E,k=S(V.left,V.right,k._1);break;case r:q=A,k=T(V.left,k._1,function(xt){return function(){B===ne&&(B++,L.enqueue(function(){B===ne+1&&(q=E,k=xt,Ar(B))}))}});return;case n:q=x,de=V.left(k._1),k=null;break;case f:Fe===null?Ne=new w(d,k,Ne,J):Ne=new w(d,k,new w(d,new w(a,Fe,et),Ne,J),J),Fe=null,et=null,q=P,k=k._1;break;case c:Pe++,Fe===null?Ne=new w(d,k,Ne,J):Ne=new w(d,k,new w(d,new w(a,Fe,et),Ne,J),J),Fe=null,et=null,q=P,k=k._1;break;case l:q=E,X=U(V,fe,k._2),fe&&fe.register(X),k._1&&X.run(),k=V.right(X);break;case u:q=P,k=oe(V,fe,k._1);break}break;case x:if(Fe=null,et=null,Ne===null)q=H,k=J||de||k;else switch(X=Ne._3,Be=Ne._1,Ne=Ne._2,Be.tag){case f:J&&J!==X&&Pe===0?q=x:de&&(q=P,k=Be._2(V.fromLeft(de)),de=null);break;case a:J&&J!==X&&Pe===0||de?q=x:(Fe=Be._1,et=Be._2,q=W,k=V.fromRight(k));break;case c:Pe--,de===null&&(he=V.fromRight(k),Ne=new w(d,new w(i,Be._2,he),Ne,X),(J===X||Pe>0)&&(q=P,k=Be._3(he)));break;case i:Ne=new w(d,new w(p,k,de),Ne,J),q=P,J&&J!==X&&Pe===0?k=Be._1.killed(V.fromLeft(J))(Be._2):de?k=Be._1.failed(V.fromLeft(de))(Be._2):k=Be._1.completed(V.fromRight(k))(Be._2),de=null,Pe++;break;case s:Pe++,Ne=new w(d,new w(p,k,de),Ne,J),q=P,k=Be._1;break;case p:Pe--,q=x,k=Be._1,de=Be._2;break}break;case H:for(var ze in $t)$t.hasOwnProperty(ze)&&(yr=yr&&$t[ze].rethrow,M($t[ze].handler(k)));$t=null,J&&de?setTimeout(function(){throw V.fromLeft(de)},0):V.isLeft(k)&&yr&&setTimeout(function(){if(yr)throw V.fromLeft(k)},0);return;case R:q=P;break;case A:return}}function Tt(ne){return function(){if(q===H)return yr=yr&&ne.rethrow,ne.handler(k)(),function(){};var X=qe++;return $t=$t||{},$t[X]=ne,function(){$t!==null&&delete $t[X]}}}function se(ne,X){return function(){if(q===H)return X(V.right(void 0))(),function(){};var he=Tt({rethrow:!1,handler:function(){return X(V.right(void 0))}})();switch(q){case R:J=V.left(ne),q=H,k=J,Ar(B);break;case A:J===null&&(J=V.left(ne)),Pe===0&&(q===A&&(Ne=new w(d,new w(s,k(ne)),Ne,J)),q=x,k=null,de=null,Ar(++B));break;default:J===null&&(J=V.left(ne)),Pe===0&&(q=x,k=null,de=null)}return he}}function ue(ne){return function(){var X=Tt({rethrow:!1,handler:ne})();return q===R&&Ar(B),X}}return{kill:se,join:ue,onComplete:Tt,isSuspended:function(){return q===R},run:function(){q===R&&(L.isDraining()?Ar(B):L.enqueue(function(){Ar(B)}))}}}function re(V,fe,F,B){var q=0,k={},de=0,J={},Fe=new Error("[ParAff] Early exit"),et=null,Ne=e;function Pe(Tt,se,ue){var ne=se,X=null,he=null,Be=0,ze={},xt,ar;e:for(;;)switch(xt=null,ne.tag){case D:if(ne._3===e&&(xt=k[ne._1],ze[Be++]=xt.kill(Tt,function(lr){return function(){Be--,Be===0&&ue(lr)()}})),X===null)break e;ne=X._2,he===null?X=null:(X=he._1,he=he._2);break;case v:ne=ne._2;break;case h:case g:X&&(he=new w(d,X,he)),X=ne,ne=ne._1;break}if(Be===0)ue(V.right(void 0))();else for(ar=0,xt=Be;ar<xt;ar++)ze[ar]=ze[ar]();return ze}function qe(Tt,se,ue){var ne,X,he,Be,ze,xt;for(V.isLeft(Tt)?(ne=Tt,X=null):(X=Tt,ne=null);;){if(he=null,Be=null,ze=null,xt=null,et!==null)return;if(se===null){B(ne||X)();return}if(se._3!==e)return;switch(se.tag){case v:ne===null?(se._3=V.right(se._1(V.fromRight(X))),X=se._3):se._3=ne;break;case h:if(he=se._1._3,Be=se._2._3,ne){if(se._3=ne,ze=!0,xt=de++,J[xt]=Pe(Fe,ne===he?se._2:se._1,function(){return function(){delete J[xt],ze?ze=!1:ue===null?qe(ne,null,null):qe(ne,ue._1,ue._2)}}),ze){ze=!1;return}}else{if(he===e||Be===e)return;X=V.right(V.fromRight(he)(V.fromRight(Be))),se._3=X}break;case g:if(he=se._1._3,Be=se._2._3,he===e&&V.isLeft(Be)||Be===e&&V.isLeft(he))return;if(he!==e&&V.isLeft(he)&&Be!==e&&V.isLeft(Be))ne=X===he?Be:he,X=null,se._3=ne;else if(se._3=X,ze=!0,xt=de++,J[xt]=Pe(Fe,X===he?se._2:se._1,function(){return function(){delete J[xt],ze?ze=!1:ue===null?qe(X,null,null):qe(X,ue._1,ue._2)}}),ze){ze=!1;return}break}ue===null?se=null:(se=ue._1,ue=ue._2)}}function $t(Tt){return function(se){return function(){delete k[Tt._1],Tt._3=se,qe(se,Tt._2._1,Tt._2._2)}}}function yr(){var Tt=P,se=F,ue=null,ne=null,X,he;e:for(;;)switch(X=null,he=null,Tt){case P:switch(se.tag){case v:ue&&(ne=new w(d,ue,ne)),ue=new w(v,se._1,e,e),se=se._2;break;case h:ue&&(ne=new w(d,ue,ne)),ue=new w(h,e,se._2,e),se=se._1;break;case g:ue&&(ne=new w(d,ue,ne)),ue=new w(g,e,se._2,e),se=se._1;break;default:he=q++,Tt=x,X=se,se=new w(D,he,new w(d,ue,ne),e),X=U(V,fe,X),X.onComplete({rethrow:!1,handler:$t(se)})(),k[he]=X,fe&&fe.register(X)}break;case x:if(ue===null)break e;ue._1===e?(ue._1=se,Tt=P,se=ue._2,ue._2=e):(ue._2=se,se=ue,ne===null?ue=null:(ue=ne._1,ne=ne._2))}for(Ne=se,he=0;he<q;he++)k[he].run()}function Ar(Tt,se){et=V.left(Tt);var ue;for(var ne in J)if(J.hasOwnProperty(ne)){ue=J[ne];for(ne in ue)ue.hasOwnProperty(ne)&&ue[ne]()}J=null;var X=Pe(Tt,Ne,se);return function(he){return new w(r,function(Be){return function(){for(var ze in X)X.hasOwnProperty(ze)&&X[ze]();return y}})}}return yr(),function(Tt){return new w(r,function(se){return function(){return Ar(Tt,se)}})}}function oe(V,fe,F){return new w(r,function(B){return function(){return re(V,fe,F,B)}})}return w.EMPTY=e,w.Pure=m(t),w.Throw=m(n),w.Catch=m(f),w.Sync=m(_),w.Async=m(r),w.Bind=m(o),w.Bracket=m(c),w.Fork=m(l),w.Seq=m(u),w.ParMap=m(v),w.ParApply=m(h),w.ParAlt=m(g),w.Fiber=U,w.Supervisor=I,w.Scheduler=L,w.nonCanceler=y,w}(),Ab=Er.Pure,xb=Er.Throw;function Ib(e){return function(t){return Er.Catch(e,t)}}function Rb(e){return function(t){return t.tag===Er.Pure.tag?Er.Pure(e(t._1)):Er.Bind(t,function(n){return Er.Pure(e(n))})}}function Pb(e){return function(t){return Er.Bind(e,t)}}function pv(e){return function(t){return Er.Fork(e,t)}}var Hb=Er.Sync;function Ob(e){return function(t){return Er.ParMap(e,t)}}function kb(e){return function(t){return Er.ParApply(e,t)}}var fo=Er.Async;function Fl(e){return function(t){return function(n){return Er.Bracket(e,t,n)}}}function Nb(e,t){return function(){return Er.Fiber(e,null,t)}}var Bb=function(){function e(n,f){return n===0&&typeof setImmediate<"u"?setImmediate(f):setTimeout(f,n)}function t(n,f){return n===0&&typeof clearImmediate<"u"?clearImmediate(f):clearTimeout(f)}return function(n,f){return Er.Async(function(_){return function(){var r=e(f,_(n()));return function(){return Er.Sync(function(){return n(t(f,r))})}}})}}(),Wb=Er.Seq;var PI=$(it);var dv=function(e){return e},qb=function(e){return e};var Ll={lift:function(e){var t=xp(e)(O.create);return function(n){return dv(t(n))}}},HI=pt(Ll);var OI=function(e){var t=$(e);return{map:function(n){return function(f){return t(PI(n))(f)}}}},vv=function(e){return{Applicative0:function(){return gv(e)},Bind1:function(){return mv(e)}}},mv=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return{bind:function(f){return function(_){return t(f)(function(r){if(r instanceof N)return n(N.value);if(r instanceof O){var o=_(r.value0);return o}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[r.constructor.name])})}},Apply0:function(){return hv(e)}}},hv=function(e){var t=OI(e.Bind1().Apply0().Functor0());return{apply:Nr(vv(e)),Functor0:function(){return t}}},gv=function(e){return{pure:function(){var t=z(e.Applicative0());return function(n){return dv(t(O.create(n)))}}(),Apply0:function(){return hv(e)}}};var Ub=function(e){var t=kt(e),n=e.Monad0(),f=Y(n.Bind1()),_=z(n.Applicative0()),r=vv(n);return{tailRecM:function(o){var c=t(function(l){var u=o(l);return f(u)(function(v){return _(function(){if(v instanceof N)return new Dt(N.value);if(v instanceof O&&v.value0 instanceof vt)return new vt(v.value0.value0);if(v instanceof O&&v.value0 instanceof Dt)return new Dt(new O(v.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[v.constructor.name])}())})});return function(l){return dv(c(l))}},Monad0:function(){return r}}},Vb=function(e){var t=e.Monad0(),n=HI(t),f=hn(e),_=vv(t);return{state:function(r){return n(f(r))},Monad0:function(){return _}}};var jb=function(e){return e};var ti=function(e){return e};var xl={lift:function(e){return function(t){return jb(ge(t))}}},NI=pt(xl),Qb=function(e){return function(t){return function(n){return e(t(n))}}},BI=function(e){return{map:function(){var t=$(e);return function(n){return Qb(t(n))}}()}};var Cv=function(e){var t=Ye(e),n=BI(e.Functor0());return{apply:function(f){return function(_){return function(r){return t(f(r))(_(r))}}},Functor0:function(){return n}}},ji=function(e){var t=Y(e),n=Cv(e.Apply0());return{bind:function(f){return function(_){return function(r){return t(f(r))(function(o){var c=_(o);return c(r)})}}},Apply0:function(){return n}}};var yv=function(e){var t=Cv(e.Apply0());return{pure:function(){var n=z(e);return function(f){return jb(ge(n(f)))}}(),Apply0:function(){return t}}},Il=function(e){var t=yv(e.Applicative0()),n=ji(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},Xu=function(e){var t=Il(e);return{ask:z(e.Applicative0()),Monad0:function(){return t}}};var ri=function(e){var t=e.Monad0(),n=Il(t);return{liftEffect:function(){var f=NI(t),_=Ve(e);return function(r){return f(_(r))}}(),Monad0:function(){return n}}},Yu=function(e){var t=e.Monad0(),n=Gt(t.Bind1()),f=z(t.Applicative0()),_=kt(e),r=Il(t);return{tailRecM:function(o){return function(c){var l=function(u){return function(v){var h=o(v);return n(f)(h(u))}};return function(u){return _(l(u))(c)}}},Monad0:function(){return r}}};var Ji=function(e){return e.sequential},lo=function(e){return e.parallel};var VI=le(ve),zI=function(e){var t=Ji(e),n=lo(e);return function(f){var _=ct(f);return function(r){var o=_(r);return function(c){var l=o(function(u){return n(c(u))});return function(u){return t(l(u))}}}}};var Ds=function(e){var t=zI(e);return function(n){var f=t(n);return function(_){return f(_)(VI)}}};var Cs=function(e){return e()};var Kb=function(e){return e()};var Xb=function(e){throw new Error(e)};var Yb=function(){return Xb};var KI=Yb(),XI=Kb,Pl=function(e){return XI(function(){return KI(e)})};var ZI=function(e,t,n){var f=0,_;return function(r){if(f===2)return _;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,_=n(),f=2,_}},eR=z(Rt),wv=ot(Ae),eS=$(Ae);var tR=function(e){return e},tS=pv(!1);var rR={map:Ob},Dn={map:Rb},nR=$(Dn),Tv=pv(!0),aR=function(){var e=function(f){if(f instanceof Qe)return f.value0;if(f instanceof tt)return Pl("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[f.constructor.name])},t=function(f){if(f instanceof tt)return f.value0;if(f instanceof Qe)return Pl("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[f.constructor.name])},n=function(f){if(f instanceof tt)return!0;if(f instanceof Qe)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[f.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:tt.create,right:Qe.create}}(),rS=function(e){return Nb(aR,e)},nS=function(e){return function(){var n=rS(e)();return n.run(),n}},Ev=function(e){return wv(nS(e))};var Mv=function(e){return Bb(Qe.create,e)},aS=function(e){return function(t){return Fl(e)({killed:ge(t),failed:ge(t),completed:ge(t)})}},oS={apply:kb,Functor0:function(){return rR}};var Ha={Applicative0:function(){return Cn},Bind1:function(){return qt}},qt={bind:Pb,Apply0:function(){return Fv(0)}},Cn={pure:Ab,Apply0:function(){return Fv(0)}},Fv=ZI("applyAff","Effect.Aff",function(){return{apply:Nr(Ha),Functor0:function(){return Dn}}}),oR=Fv(73),Zu=z(Cn),iS=Y(qt);var iR=Gt(qt);var ys=function(e){return function(t){return aS(Zu(void 0))(ge(e))(ge(t))}},Lv=function(e){return aS(e)(ge(Zu(void 0)))(Zu)};var Ki={parallel:Q,sequential:Wb,Apply0:function(){return oR},Apply1:function(){return oS}},uR=lo(Ki),ec={pure:function(e){return uR(Zu(e))},Apply0:function(){return oS}};var hr={liftEffect:Hb,Monad0:function(){return Ha}},Hl=Ve(hr),Xi=function(e){return tR(ge(Hl(e)))},bs=function(e){return fo(function(t){return eS(Xi)(e.join(t))})},uS={map:function(e){return function(t){return Cs(rS(nR(e)(bs(t))))}}};var Ss=function(e){return function(t){return iS(Hl(t.isSuspended))(function(n){return n?Hl(wv(t.kill(e,ge(eR(void 0))))):fo(function(f){return eS(Xi)(t.kill(e,f))})})}};var tc={throwError:xb,Monad0:function(){return Ha}},cS={catchError:Ib,MonadThrow0:function(){return tc}},sS=vs(cS);var fS=sS,cR=function(e){return function(t){return nS(iR(function(n){return Hl(e(n))})(sS(t)))}},Ol=function(e){return function(t){return wv(cR(e)(t))}};var rc={tailRecM:function(e){var t=function(n){return iS(e(n))(function(f){if(f instanceof Dt)return Zu(f.value0);if(f instanceof vt)return t(f.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[f.constructor.name])})};return t},Monad0:function(){return Ha}};var lS=ge(Zu(void 0));var pR=function(e){var t=$(e);return{map:function(n){return function(f){return function(_){return t(function(r){return new K(n(r.value0),r.value1)})(f(_))}}}}};var Iv=function(e){return{Applicative0:function(){return Pv(e)},Bind1:function(){return Rv(e)}}},Rv=function(e){var t=Y(e.Bind1());return{bind:function(n){return function(f){return function(_){return t(n(_))(function(r){var o=f(r.value0);return o(r.value1)})}}},Apply0:function(){return pS(e)}}},pS=function(e){var t=pR(e.Bind1().Apply0().Functor0());return{apply:Nr(Iv(e)),Functor0:function(){return t}}},Pv=function(e){var t=z(e.Applicative0());return{pure:function(n){return function(f){return t(new K(n,f))}},Apply0:function(){return pS(e)}}};var dS=function(e){var t=e.Monad0(),n=Y(t.Bind1()),f=z(t.Applicative0()),_=kt(e),r=Iv(t);return{tailRecM:function(o){return function(c){var l=function(u){var v=o(u.value0);return n(v(u.value1))(function(h){return f(function(){if(h.value0 instanceof vt)return new vt(new K(h.value0.value0,h.value1));if(h.value0 instanceof Dt)return new Dt(new K(h.value0.value0,h.value1));throw new Error("Failed pattern match at Control.Monad.State.Trans (line 87, column 16 - line 89, column 40): "+[h.value0.constructor.name])}())})};return function(u){return _(l)(new K(c,u))}}},Monad0:function(){return r}}},vS=function(e){var t=z(e.Applicative0()),n=Iv(e);return{state:function(f){return function(_){return t(f(_))}},Monad0:function(){return n}}};var dR=pt(xl);var ws={liftAff:le(ve),MonadEffect0:function(){return hr}},Mr=function(e){return e.liftAff};var mS=function(e){var t=e.MonadEffect0(),n=ri(t);return{liftAff:function(){var f=dR(t.Monad0()),_=Mr(e);return function(r){return f(_(r))}}(),MonadEffect0:function(){return n}}};function hS(e){return function(t){return function(){return setInterval(t,e)}}}function gS(e){return function(){clearInterval(e)}}var DS=hS;var CS=gS;var gR=ht(gt),bS=$(it),DR=jn(rt),kl=Y(qt),Ov=Ve(hr),CR=gR(qt),kv=z(Cn),yR=$(Dn),bR=kt(rc);var SR=ct(Cn)(Tr),wR=Sr(tc);var TR=function(e){return e},ER=function(e){var t=function(){var _=xe(e)();if(_ instanceof N)return N.value;if(_ instanceof O){var r=Pa(_.value0.releasers);if(r instanceof N)return N.value;if(r instanceof O)return tn(bS(function(o){return{nextKey:o.nextKey,references:o.references,releasers:DR(r.value0.key)(o.releasers)}}))(e)(),new O(r.value0.value);throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 104, column 33 - line 108, column 32): "+[r.constructor.name])}throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 102, column 11 - line 108, column 32): "+[_.constructor.name])},n=function(f){return kl(Ov(t))(function(_){if(_ instanceof N)return CR(Ov(bt(N.value)(e)))(function(){return kv(new Dt(f))});if(_ instanceof O)return kl(fS(_.value0))(function(r){return kv(new vt(Br(function(o){return new ke(o,f)})(ge(f))(r)))});throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 92, column 11 - line 98, column 68): "+[_.constructor.name])})};return yR(so)(bR(n)(Oe.value))};var SS=function(){var e=new O({nextKey:0,references:1,releasers:mr});return $(Ae)(TR)(Pt(e))}(),wS=function(e){return Lv(kl(Ov(Wf(bS(function(t){return{nextKey:t.nextKey,releasers:t.releasers,references:t.references-1|0}}))(e)))(function(t){return t instanceof O&&t.value0.references===0?kl(ER(e))(SR(wR)):kv(void 0)}))};var FR=Y(qt),LR=Ve(hr);var AR=function(e){return function(t){return FR(LR(SS))(function(n){return ys(wS(n))(e(t(n)))})}},Nl=AR(le(ve));var Nv=function(e){var t=$(e);return{map:function(n){return function(f){var _=t(n);return function(r){return _(f(r))}}}}},TS=function(e){var t=Ye(e),n=Nv(e.Functor0());return{apply:function(f){return function(_){return function(r){return t(f(r))(_(r))}}},Functor0:function(){return n}}},xR=function(e){var t=Y(e),n=TS(e.Apply0());return{bind:function(f){return function(_){return function(r){return t(f(r))(function(o){var c=_(o);return c(r)})}}},Apply0:function(){return n}}};var IR=function(e){var t=z(e),n=TS(e.Apply0());return{pure:function(f){return function(_){return t(f)}},Apply0:function(){return n}}},Bl=function(e){var t=IR(e.Applicative0()),n=xR(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}};var RR=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var MS=function(e){return function(t){return La(function(n){return e(n.value0)(n.value1)})(t)}};var FS=function(e){return function(t){return xd(new RR(e,t))}},Bv={map:function(e){return function(t){return La(function(n){return FS(function(f){return e(n.value0(f))})(n.value1)})(t)}}};var LS=FS(le(ve));var HR=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}();var Wl=function(e){return HR.create(Ce(e.Eq0()))(pe(e))},OR={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},AS={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return OR}};var $v=Au(Zt)(AS);var NR=cv($v),BR=Zo($v),WR=cn($v);var IS=function(){return function(e){var t=Xr(e);return function(n){var f=Wl(n);return function(_){return function(r){return function(o){return NR(new K(t(_),f(r)))(o)}}}}}},$l=function(){return function(e){var t=Xr(e);return function(n){var f=Wl(n);return function(_){return function(r){return function(o){return BR(new K(t(_),f(r)))(o)}}}}}},RS=function(){return function(e){var t=Xr(e);return function(n){var f=Wl(n);return function(_){return function(r){return function(o){return function(c){return WR(new K(t(_),f(r)))(o)(c)}}}}}}},PS=function(e){var t=ct(e)(co);return function(n){return function(f){return t(function(_){return f(_)})(n)}}},nc=mr;var Ul=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Yi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();function HS(e,t,n){return e==null?t:n(e)}function qv(e){return e}var _o=Ge(null)(qv),Wt=function(e){return HS(e,N.value,O.create)};var Vt=function(){function e(t,n,f,_){this.value0=t,this.value1=n,this.value2=f,this.value3=_}return e.create=function(t){return function(n){return function(f){return function(_){return new e(t,n,f,_)}}}},e}(),Ms=Q,yn=function(e,t){return e.value2(e.value1,t)},zt=Q,bn=function(e){return e.value3(e.value1)},Hr=Ms(function(e){return e.value0});var OS=$(dt),nP=$(Xa);var ai=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),po=function(){function e(t,n,f,_){this.value0=t,this.value1=n,this.value2=f,this.value3=_}return e.create=function(t){return function(n){return function(f){return function(_){return new e(t,n,f,_)}}}},e}(),oi=function(){function e(t,n,f,_){this.value0=t,this.value1=n,this.value2=f,this.value3=_}return e.create=function(t){return function(n){return function(f){return function(_){return new e(t,n,f,_)}}}},e}(),ii=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),aP=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),kS=function(e){return function(t){return e(t)}};var oP=Q;var iP={bimap:function(e){return function(t){return kS(function(n){return oP(new aP(function(f){return e(n.value0(f))},function(f){return t(n.value1(f))},n.value2))})}}},uP=Fn(iP);var Zi=kS(function(e){var t=function(n){if(n instanceof ai)return new ai(n.value0);if(n instanceof po)return new po(n.value0,n.value1,e.value0(n.value2),OS(t)(n.value3));if(n instanceof oi)return new oi(n.value0,n.value1,e.value0(n.value2),OS(nP(t))(n.value3));if(n instanceof ii)return new ii(e.value1(n.value0));if(n instanceof vo)return new vo(uP(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function eu(e,t){return t[e]}function Vv(e,t){return t.hasOwnProperty(e)}function mo(e,t,n){n[e]=t}function zv(e,t){for(var n=[],f=0;f<e.length;f++)n.push(t(f,e[f]));return n}function Gv(e,t){for(var n=0;n<e.length;n++)t(e[n])}function jv(e,t){for(var n=Object.keys(e),f=0;f<n.length;f++){var _=n[f];t(_,e[_])}}function Qv(e,t,n,f,_){for(var r=[],o=e.length,c=t.length,l=0;;){if(l<o)l<c?r.push(n(l,e[l],t[l])):f(l,e[l]);else if(l<c)r.push(_(l,t[l]));else break;l++}return r}function Fs(e,t,n){for(var f={},_=0;_<e.length;_++){var r=e[_],o=t(r);f[o]=n(o,_,r)}return f}function Ls(e,t,n,f,_,r){for(var o={},c=0;c<t.length;c++){var l=t[c],u=n(l);e.hasOwnProperty(u)?o[u]=f(u,c,e[u],l):o[u]=r(u,c,l)}for(var u in e)u in o||_(u,e[u]);return o}function tu(e,t){return e===t}function Jv(e,t){return t.createTextNode(e)}function Kv(e,t){t.textContent=e}function zl(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function ui(e,t,n){var f=n.childNodes.item(e)||null;f!==t&&n.insertBefore(t,f)}function As(e,t){t&&e.parentNode===t&&t.removeChild(e)}function xs(e){return e.parentNode}function Gl(e,t,n,f){e!=null?f.setAttributeNS(e,t,n):f.setAttribute(t,n)}function jl(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function Xv(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function Yv(e,t,n){n.addEventListener(e,t,!1)}function Zv(e,t,n){n.removeEventListener(e,t,!1)}var em=void 0;var Is=function(){return{}};function tm(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var rm=eu,nm=Q,am=mo,om=Is;var Ql=function(e){return function(t){return t[e]}},_P=Ql("namespaceURI"),pP=Ql("prefix"),dP=Ql("localName"),vP=Ql("tagName");function ac(e){return function(){return e.scrollTop}}function Rs(e){return function(t){return function(){t.scrollTop=e}}}var Jl=function(e){return function(t){return function(){return t[e]}}},hP=Jl("children"),gP=Jl("firstElementChild"),DP=Jl("lastElementChild"),CP=Jl("childElementCount");function BS(e){return function(t){return function(){return t.querySelector(e)}}}var bP=$(Ae);var WS=function(e){var t=bP(Wt),n=BS(e);return function(f){return t(n(f))}};var um=Q;var Ps=function(e,t,n){var f=0,_;return function(r){if(f===2)return _;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,_=n(),f=2,_}};var cm=function(e){return bn(e.widget)},sm=Ps("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof vo)return sm(291)(e,Zi(t.value0));if(t instanceof ii){var n=yn(e.widget,t.value0),f=Ms(function(_){return zt(new Vt(_.value0,{build:e.build,widget:n},sm(296),cm))})(n);return f}return cm(e),e.build(t)}}),MP=sm(286),Kl=function(e){var t=xs(e.node);return As(e.node,t)},Xl=Ps("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof vo)return Xl(82)(e,Zi(t.value0));if(t instanceof ai){if(e.value===t.value0)return zt(new Vt(e.node,e,Xl(85),Kl));if(or){var n={build:e.build,node:e.node,value:t.value0};return Kv(t.value0,e.node),zt(new Vt(e.node,n,Xl(89),Kl))}}return Kl(e),e.build(t)}}),FP=Xl(77),Yl=function(e){var t=xs(e.node);return As(e.node,t),jv(e.children,function(n,f){return bn(f)}),bn(e.attrs)},Zl=function(e){var t=xs(e.node);return As(e.node,t),Gv(e.children,bn),bn(e.attrs)},qS=function(e,t,n,f){var _=t===f;return _?e instanceof O&&n instanceof O&&e.value0===n.value0||e instanceof N&&n instanceof N:!1},e_=Ps("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof vo)return e_(135)(e,Zi(t.value0));if(t instanceof po&&qS(e.ns,e.name,t.value0,t.value1)){var n=kr(t.value3),f=kr(e.children);if(f===0&&n===0){var l=yn(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:e.children};return zt(new Vt(e.node,u,e_(149),Zl))}var _=function(v,h){return bn(h)},r=function(v,h,g){var d=yn(h,g);return ui(v,Hr(d),e.node),d},o=function(v,h){var g=e.build(h);return ui(v,Hr(g),e.node),g},c=Qv(e.children,t.value3,r,_,o),l=yn(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:c};return zt(new Vt(e.node,u,e_(172),Zl))}return Zl(e),e.build(t)}}),LP=e_(130),t_=Ps("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof vo)return t_(222)(e,Zi(t.value0));if(t instanceof oi&&qS(e.ns,e.name,t.value0,t.value1)){var n=kr(t.value3);if(e.length===0&&n===0){var c=yn(e.attrs,t.value2),l={build:e.build,node:e.node,attrs:c,ns:t.value0,name:t.value1,children:e.children,length:0};return zt(new Vt(e.node,l,t_(237),Yl))}var f=function(u,v){return bn(v)},_=function(u,v,h,g){var d=yn(h,g.value1);return ui(v,Hr(d),e.node),d},r=function(u,v,h){var g=e.build(h.value1);return ui(v,Hr(g),e.node),g},o=Ls(e.children,t.value3,Ir,_,f,r),c=yn(e.attrs,t.value2),l={build:e.build,node:e.node,attrs:c,ns:t.value0,name:t.value1,children:o,length:n};return zt(new Vt(e.node,l,t_(261),Yl))}return Yl(e),e.build(t)}}),AP=t_(217),xP=function(e,t,n){var f=e.buildWidget(e)(n),_=Ms(function(r){return zt(new Vt(r.value0,{build:t,widget:f},MP,cm))})(f);return _},IP=function(e,t,n){var f=Jv(n,e.document),_={build:t,node:f,value:n};return zt(new Vt(f,_,FP,Kl))},RP=function(e,t,n,f,_,r){var o=zl(_o(n),f,e.document),c=um(o),l=function(g,d,a){var i=t(a.value1);return ui(d,Hr(i),c),i},u=Fs(r,Ir,l),v=e.buildAttributes(o)(_),h={build:t,node:c,attrs:v,ns:n,name:f,children:u,length:kr(r)};return zt(new Vt(c,h,AP,Yl))},PP=function(e,t,n,f,_,r){var o=zl(_o(n),f,e.document),c=um(o),l=function(g,d){var a=t(d);return ui(g,Hr(a),c),a},u=zv(r,l),v=e.buildAttributes(o)(_),h={build:t,node:c,attrs:v,ns:n,name:f,children:u};return zt(new Vt(c,h,LP,Zl))},Hs=function(e){var t=Ps("build","Halogen.VDom.DOM",function(){return function(f){if(f instanceof ai)return IP(e,t(59),f.value0);if(f instanceof po)return PP(e,t(60),f.value0,f.value1,f.value2,f.value3);if(f instanceof oi)return RP(e,t(61),f.value0,f.value1,f.value2,f.value3);if(f instanceof ii)return xP(e,t(62),f.value0);if(f instanceof vo)return t(63)(Zi(f.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[f.constructor.name])}}),n=t(58);return n};function r_(e){return typeof e}function Os(e){return e===void 0}var VS=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var _m=function(){var e=yd(gb);return function(t){return Zd(e(t))}}();var zS=function(e){return function(t){return new An(e,new ke(t.value0,t.value1))}};var ru=Q,pm=Q;function dm(e){return e()}function JS(e){return function(t){return function(n){return function(f){var _=n;function r(c){return function(l){return t(l)(c)(f[c])}}for(var o in f)hasOwnProperty.call(f,o)&&(_=e(_)(r(o)));return _}}}}function KS(e,t,n,f){return n in f?t(f[n]):e}function vm(e){return function(t){var n=[];for(var f in t)hasOwnProperty.call(t,f)&&n.push(e(f)(t[f]));return n}}var BP=Object.keys||vm(function(e){return function(){return e}});var UP=ot(Li);var XS=function(){return Po(KS)(N.value)(O.create)}();var n_=function(e){var t=ki(e);return function(n){return dm(function(){var _=Is();return $c(t(n))(function(r){return UP(tm(r.value0)(r.value1)(_))})(),_})}};var VP=JS(AD),YS=function(e){var t=ce(e.Semigroup0()),n=Je(e);return function(f){return VP(function(_){return function(r){return function(o){return t(_)(f(r)(o))}}})(n)}};function ks(e){return function(){return function(t){return e(t)()}}}function hm(e){return function(t){return function(n){return function(f){return function(){return f.addEventListener(e,t,n)}}}}}function gm(e){return function(t){return function(n){return function(f){return function(){return f.removeEventListener(e,t,n)}}}}}var zP=function(e,t,n){var f=0,_;return function(r){if(f===2)return _;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,_=n(),f=2,_}};var Cm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ym=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ho=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),si=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),nu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GP=eu,Dm=mo,jP=function(e,t){var n=Xv(null,e,t);if(n)return jl(null,e,t);var f=r_(eu(e,t));return f==="string"?mo(e,"",t):e==="rowSpan"?mo(e,1,t):e==="colSpan"?mo(e,1,t):mo(e,em,t)},ew=function(e){if(e instanceof ho&&e.value0 instanceof O)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof ho)return"attr/:"+e.value1;if(e instanceof si)return"prop/"+e.value0;if(e instanceof fi)return"handler/"+e.value0;if(e instanceof nu)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},a_=Q;var tw=function(e){return function(t){var n=function(v){return function(h,g){if(g instanceof ho)return jl(_o(g.value0),g.value1,t);if(g instanceof si)return jP(g.value0,t);if(g instanceof fi){var d=rm(g.value0,v);return Zv(g.value0,Ir(d),t)}if(g instanceof nu)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[g.constructor.name])}},f=function(v){return v instanceof O?e(v.value0)():void 0},_=function(v){var h=XS("ref")(v.props);return h instanceof O&&h.value0 instanceof nu?f(h.value0.value0(new ym(t))):void 0},r=function(v,h){return function(g,d,a,i){if(a instanceof ho&&i instanceof ho){var s=a.value2===i.value2;return s||Gl(_o(i.value0),i.value1,i.value2,t),i}if(a instanceof si&&i instanceof si){var p=tu(a.value1,i.value1);if(p)return i;if(i.value0==="value"){var D=GP("value",t),C=tu(D,i.value1);return C||Dm(i.value0,i.value1,t),i}return Dm(i.value0,i.value1,t),i}if(a instanceof fi&&i instanceof fi){var b=rm(i.value0,v);return bt(i.value1)(Jt(b))(),am(i.value0,b,h),i}return i}},o=function(v){return function(h,g,d){if(d instanceof ho)return Gl(_o(d.value0),d.value1,d.value2,t),d;if(d instanceof si)return Dm(d.value0,d.value1,t),d;if(d instanceof fi){var a=eu(d.value0,v);if(Vv(d.value0,v))return bt(d.value1)(Jt(a))(),d;var i=Pt(d.value1)(),s=ks(function(p){return function(){var C=xe(i)();return f(C(p))}})();return am(d.value0,new K(s,i),v),Yv(d.value0,s,t),d}if(d instanceof nu)return f(d.value0(new Cm(t))),d;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[d.constructor.name])}},c=zP("patchProp","Halogen.VDom.DOM.Prop",function(){return function(v,h){var g=om(),d=n(v.events),a=r(v.events,g),i=o(g),s=Ls(v.props,h,ew,a,d,i),p={events:nm(g),props:s};return zt(new Vt(void 0,p,c(100),_))}}),l=c(87),u=function(v){var h=om(),g=Fs(v,ew,o(h)),d={events:nm(h),props:g};return zt(new Vt(void 0,d,l,_))};return u}};var Sm=function(e){return e},wm=function(e){return Sm(ii.create(e))},KP=function(e){return e.toPropValue},go=function(e){return Sm(ai.create(e))},ow=function(e){return new nu(function(t){return e(function(n){if(n instanceof Cm)return new O(n.value0);if(n instanceof ym)return N.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},iw=function(e){var t=KP(e);return function(n){var f=si.create(n);return function(_){return f(t(_))}}};var uw={toPropValue:a_};var Tm={toPropValue:function(){var e=cr();return function(t){return a_(e(t))}}()};var cw={toPropValue:function(e){return a_(db(e))}};var Em=function(){return fi.create}(),sw=function(e){return function(t){return function(n){return function(f){return new po(e,t,n,f)}}}};var fw=function(e){return function(t){return ho.create(e)(t)}};var YP=le(ve);var o_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lw=function(e){return function(t){return new Fm(e,t)}},_w=function(){return Mm.create}(),pw=function(e){var t=z(e);return function(n){return function(f){return function(_){return function(r){return function(o){if(r instanceof o_)return new K(new ke({func:t(r.value0),count:o},n),f);if(r instanceof Mm)return new K(new ke({func:_(r.value0),count:o},n),f);if(r instanceof Fm)return pw(e)(n)(zS(r.value1)(f))(_)(r.value0)(o+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[r.constructor.name])}}}}}},dw=function(e){var t=Ye(e.Apply0());return function(n){return function(f){return function(_){if(n instanceof Oe)return new tt(_);if(n instanceof ke){var r=t(n.value0.func)(_),o=n.value0.count===1;if(o)return n.value1 instanceof Oe?new tt(r):dw(e)(n.value1)(f)(r);if(f instanceof Oe)return new tt(r);if(f instanceof ke)return new Qe(new K(new ke({func:r,count:n.value0.count-1|0},n.value1),new An(f.value0,f.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[f.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},vw={map:function(e){return function(t){return lw(new o_(e))(t)}}},mw=function(e){var t=dw(e),n=z(e),f=pw(e);return function(_){return function(r){var o=function(c){var l=!1,u;function v(h){if(h.value1.value0 instanceof o_){var g=t(h.value0)(h.value1.value1)(n(h.value1.value0.value0));if(g instanceof tt)return l=!0,g.value0;if(g instanceof Qe){c=g.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[g.constructor.name])}if(h.value1.value0 instanceof Mm){var g=t(h.value0)(h.value1.value1)(_(h.value1.value0.value0));if(g instanceof tt)return l=!0,g.value0;if(g instanceof Qe){c=g.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[g.constructor.name])}if(h.value1.value0 instanceof Fm){var d=new An(h.value1.value0.value1,h.value1.value1);c=f(h.value0)(d)(_)(h.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[h.value1.value0.constructor.name])}for(;!l;)u=v(c);return u};return o(new K(Oe.value,_m(r)))}}},hw=function(e){return mw(e)(YP)},gw={apply:function(e){return function(t){return lw(e)(t)}},Functor0:function(){return vw}},Dw=function(){return{pure:o_.create,Apply0:function(){return gw}}}(),ZP=mw(Dw),Lm=function(e){return ZP(function(t){return _w(e(t))})};var i_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var yw=function(e){var t=!1,n;function f(_){if(_.value0 instanceof Oe&&_.value1 instanceof Oe)return t=!0,N.value;if(_.value0 instanceof Oe){e=new i_(so(_.value1),Oe.value);return}if(_.value0 instanceof ke)return t=!0,new O(new K(_.value0.value0,new i_(_.value0.value1,_.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[_.constructor.name])}for(;!t;)n=f(e);return n},bw=function(e){return function(t){return new i_(e.value0,new ke(t,e.value1))}};var Sw=function(e){return e.value0 instanceof Oe&&e.value1 instanceof Oe};var ww=function(){return new i_(Oe.value,Oe.value)}();var oc=function(){function e(){}return e.value=new e,e}(),u_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Tw=function(e){return function(t){if(e instanceof oc)return t;if(t instanceof oc)return e;if(e instanceof u_)return new u_(e.value0,bw(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},t2=function(e){return function(t){return function(n){var f=function(r){return function(o){return function(c){var l=r,u=o,v=!1,h;function g(d,a,i){if(i instanceof Oe)return v=!0,a;if(i instanceof ke){l=d,u=d(a)(i.value0),c=i.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[d.constructor.name,a.constructor.name,i.constructor.name])}for(;!v;)h=g(l,u,c);return h}}},_=function(r){return function(o){var c=r,l=!1,u;function v(h,g){var d=yw(h);if(d instanceof N)return l=!0,f(function(a){return function(i){return i(a)}})(t)(g);if(d instanceof O){c=d.value0.value1,o=new ke(e(d.value0.value0),g);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[d.constructor.name])}for(;!l;)u=v(c,o);return u}};return _(n)(Oe.value)}}},Ew=function(e){if(e instanceof oc)return N.value;if(e instanceof u_)return new O(new K(e.value0,function(){var t=Sw(e.value1);return t?oc.value:t2(Tw)(oc.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var Mw=function(){return oc.value}(),Fw=Tw;var Lw={append:Fw};var Aw=function(e){return function(t){return Fw(e)(new u_(t,ww))}};var n2=function(e,t,n){var f=0,_;return function(r){if(f===2)return _;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,_=n(),f=2,_}},a2=ce(Lw);var Am=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ns=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xw=function(e){var t=!1,n;function f(_){var r=function(l){return l},o=function(l){return function(u){return new Am(l.value0,a2(l.value1)(u))}};if(_.value0 instanceof Ns){var c=Ew(_.value1);if(c instanceof N)return t=!0,new Ns(_.value0.value0);if(c instanceof O){e=o(r(c.value0.value0)(_.value0.value0))(c.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[c.constructor.name])}if(_.value0 instanceof Bs)return t=!0,new Bs(_.value0.value0,function(l){return o(_.value0.value1(l))(_.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[_.value0.constructor.name])}for(;!t;)n=f(e);return n},Oa=function(e){var t=$(e);return function(n){var f=n.Monad0(),_=$(f.Bind1().Apply0().Functor0()),r=z(f.Applicative0()),o=kt(n);return function(c){var l=function(u){var v=xw(u);if(v instanceof Ns)return _(Dt.create)(r(v.value0));if(v instanceof Bs)return _(vt.create)(c(t(v.value1)(v.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[v.constructor.name])};return o(l)}}};var Iw=function(e){return new Am(e,Mw)};var c_={Applicative0:function(){return Jn},Bind1:function(){return ka}},au={map:function(e){return function(t){return Gt(ka)(function(){var n=z(Jn);return function(f){return n(e(f))}}())(t)}}},ka={bind:function(e){return function(t){return new Am(e.value0,Aw(e.value1)(t))}},Apply0:function(){return xm(0)}},Jn={pure:function(e){return Iw(Ns.create(e))},Apply0:function(){return xm(0)}},xm=n2("freeApply","Control.Monad.Free",function(){return{apply:Nr(c_),Functor0:function(){return au}}}),Im=xm(77);var o2=z(Jn);var Lt=function(e){return Iw(new Bs(e,function(t){return o2(t)}))};var Rw=function(e){var t=e.Monad0(),n=$(t.Bind1().Apply0().Functor0()),f=z(t.Applicative0()),_=kt(e);return function(r){var o=function(c){var l=xw(c);if(l instanceof Ns)return n(Dt.create)(f(l.value0));if(l instanceof Bs)return n(function(u){return vt.create(l.value1(u))})(r(l.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[l.constructor.name])};return _(o)}};var Pw=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),Hw=Q,Ow=Q;function Rm(e){return function(t){return e===t}}var ic=Rm;var s2=ot(Ae);var f2=Y(Mn);var l2=ce(It),_2=ct(Rt),p2=_2(St);var s_=function(e){return e},Nw=function(e){return function(t){return e(function(n){return s2(t(n))})}};var gr=function(e){return function(t){return e(t)}};var Hm={map:function(e){return function(t){return function(n){return t(function(f){return n(e(f))})}}}};var Dr=function(){var t=Pt([])();return{emitter:function(n){return function(){return tn(function(_){return l2(_)([n])})(t)(),tn(ul(ic)(n))(t)}},listener:function(n){return f2(xe(t))(p2(function(f){return f(n)}))}}};var Om=le(ve);var d2=$l();var Ww=function(e){return e},$w=function(e){return e},Ws=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$s=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),iu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Us=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),f_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),l_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),__=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),p_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var uc=function(e){return e},d_=function(e){return Lt(new qs(e,void 0))};var rr=function(e){return Lt(new $s(function(t){return e},Om))};var Kn=function(e){return Lt(new Vs(e,void 0))};var pi=function(){return function(e){var t=d2(e);return function(n){var f=t(n);return function(_){return function(r){return function(o){return Lt(new Us(Ow(new Pw(function(c){var l=z(c);return function(u){var v=Ge(l(N.value))(u),h=f(_)(r);return function(g){return v(h(g))}}},o,Om))))}}}}}},km=rt,v_=rt;var m_={lift:function(e){return function(t){return uc(Lt(iu.create(t)))}}},uu=c_,fr={state:function(e){return uc(Lt(Ws.create(e)))},Monad0:function(){return uu}};var Xn=function(e){return{liftEffect:function(){var t=Ve(e);return function(n){return uc(Lt(iu.create(t(n))))}}(),Monad0:function(){return uu}}};var di=function(e){var t=Xn(e.MonadEffect0());return{liftAff:function(){var n=Mr(e);return function(f){return uc(Lt(iu.create(n(f))))}}(),MonadEffect0:function(){return t}}};var Rn=function(e){return Lt(new zs(e,Om))},fn=au;var zr=ka,v2=Y(zr),h_=Im;var Fr=Jn,m2=z(Fr),Gs={tailRecM:function(e){return function(t){return v2(e(t))(function(n){if(n instanceof vt)return kt(Gs)(e)(n.value0);if(n instanceof Dt)return m2(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return uu}};var cc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_c=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var h2=function(e,t,n){var f=0,_;return function(r){if(f===2)return _;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,_=n(),f=2,_}};var g2=function(e,t){return tu(e.value0,t.value0)&&tu(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var qw=function(e){return e.value2(e.value3)};var Uw=function(e){var t=function(r){return bn(r.vdom)},n=h2("patchThunk","Halogen.VDom.Thunk",function(){return function(r,o){var c=g2(r.thunk,o);if(c)return zt(new Vt(Hr(r.vdom),r,n(112),t));var l=yn(r.vdom,e(qw(o)));return zt(new Vt(Hr(l),{vdom:l,thunk:o},n(115),t))}}),f=n(108),_=function(r){return function(o){var c=Hs(r)(e(qw(o)));return zt(new Vt(Hr(c),{thunk:o,vdom:c},f,t))}};return _};var g_=Cu(fn),Wm=ct(Fr)(Ot),D2=$(fn);var Vw=z(Fr),C2=$l(),y2=IS(),b2=RS(),pc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),D_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$m=Q,qm=Q,Pn=function(e){return function(t){if(t instanceof cc)return g_(Wm(e.handleAction)(e.initialize))(t.value0);if(t instanceof sc)return g_(Wm(e.handleAction)(e.finalize))(t.value0);if(t instanceof fc)return g_(Wm(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof lc)return g_(e.handleAction(t.value0))(t.value1);if(t instanceof _c)return MS(function(n){var f=D2(Ge(t.value1(void 0))(n));return function(_){return f(e.handleQuery(_))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},S2=Q,Hn=Q;var Cr=function(){return{handleAction:ge(Vw(void 0)),handleQuery:ge(Vw(N.value)),receive:ge(N.value),initialize:N.value,finalize:N.value}}(),Um=function(){return function(e){var t=C2(e),n=y2(e),f=b2(e);return function(_){var r=t(_),o=n(_),c=f(_);return function(l){return function(u){return function(v){return function(h){return function(g){return S2({get:r(l)(u),pop:o(l)(u),set:c(l)(u),component:v,input:h,output:g})}}}}}}}};var Na=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Sn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ln=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Gw=function(e){return e instanceof ln?new O(e.value1):e instanceof Sn?new O(e.value0):N.value},jw=function(e){return e instanceof ln?new O(e.value0):e instanceof Na?new O(e.value0):N.value};var Qw=function(e){var t=ce(e);return function(n){var f=ce(n);return{append:function(_){return function(r){if(_ instanceof Na&&r instanceof Na)return new Na(t(_.value0)(r.value0));if(_ instanceof Na&&r instanceof Sn)return new ln(_.value0,r.value0);if(_ instanceof Na&&r instanceof ln)return new ln(t(_.value0)(r.value0),r.value1);if(_ instanceof Sn&&r instanceof Na)return new ln(r.value0,_.value0);if(_ instanceof Sn&&r instanceof Sn)return new Sn(f(_.value0)(r.value0));if(_ instanceof Sn&&r instanceof ln)return new ln(r.value0,f(_.value0)(r.value1));if(_ instanceof ln&&r instanceof Na)return new ln(t(_.value0)(r.value0),_.value1);if(_ instanceof ln&&r instanceof Sn)return new ln(_.value0,f(_.value1)(r.value0));if(_ instanceof ln&&r instanceof ln)return new ln(t(_.value0)(r.value0),f(_.value1)(r.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[_.constructor.name,r.constructor.name])}}}}};var js=function(e){return function(){console.log(e)}},C_=function(e){return function(){console.warn(e)}};var B2=ce(Mf),W2=Je(Ro),Kw=Pi(St),Xw=Kw(Ro),b_=Ya(St)(Ro),Ba=$(dt),Gm=Ye(Si),$2=ce(It),Yw=Kt(St),q2=Yw(Ro),U2=hd(hy),S_=$(it),V2=lt(FD),Zw=Y(en),z2=tl(bd(St)),eT=$(os(dt));var G2=Jf(St)(_n),j2=Y(Eo),Q2=sl(is),J2=oa(Gc(aa)),K2=Ya(fl(St))(Ro),X2=ye(pn),w_=function(e){return e},Y2=function(e){return e},jm=function(e){return function(t){return function(n){return t+(e+n)}}},Z2={append:function(e){return function(t){return e+t}}},eH={append:function(e){return function(t){return e+t}}},tT=Qw(Z2)(eH),rT=mC(tT),y_=Yw(rT),tH=Kw(rT),Qs=ce(Bp(tT)),Jw=function(e){var t=Br(function(n){return W2})(function(n){return Xw([n.value0,": ",n.value1])});return b_("; ")(Ba(t)(e))},rH=function(e){if(e instanceof Wo)return"#"+e.value0;if(e instanceof no)return"."+e.value0;if(e instanceof $o)return"["+(e.value0+"]");if(e instanceof qo)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof Uo)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof Vo)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof zo)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof Go)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof jo)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof ao)return":"+e.value0;if(e instanceof $u)return":"+(e.value0+("("+(b_(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},nH=function(e){return function(t){if(e.length===0&&t instanceof ml)return["*"];if(t instanceof ml)return[""];if(t instanceof Od)return[t.value0];if(t instanceof kd)return Gm(Ba(jm(" > "))(Co(t.value0)))(Co(t.value1));if(t instanceof Nd)return Gm(Ba(jm(" "))(Co(t.value0)))(Co(t.value1));if(t instanceof dy)return Gm(Ba(jm(" + "))(Co(t.value0)))(Co(t.value1));if(t instanceof vy)return $2(Co(t.value0))(Co(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},Co=function(e){return Ba(function(t){return t+q2(rH)(U2(e.value0))})(nH(e.value0)(e.value1))},aH=function(){var e=b_(", ");return function(t){return e(Co(t))}}(),cu=function(e){return e.length===0?N.value:S_(function(t){return new An(t.head,t.tail)})(vd(e))};var dc=function(e){if(e.value0 instanceof Ey)return Ge(e.value0.value0)(function(t){return gy(dc(t))(e.value0.value0)})(cu(e.value1));if(e.value0 instanceof zd)return Ge(e.value0.value0)(function(t){return tr(dc(t))(e.value0.value0)})(cu(e.value1));if(e.value0 instanceof wy)return Ge(e.value0.value0)(function(t){return tr(e.value0.value0)(dc(t))})(cu(e.value1));if(e.value0 instanceof Ty)return Ge(hl("TODO"))(dc)(cu(gd(e.value0.value0)(br(e.value0)(e.value1))));if(e.value0 instanceof Sy)return Ge(je(wt)(e.value0.value0))(function(t){return je(dc(t))(e.value0.value0)})(cu(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},oH=function(e){return fs(e)},iH=function(e){return O.create(Sn.create(w_(V2("@import url("+(e+`);
`)))))},uH=function(e){return e},Qm=function(e){return Zw(e)(function(){var t=S_(uH);return function(n){return t(Gw(n))}}())},cH=function(e){return e},nT=function(e){return Zw(e)(function(){var t=S_(cH);return function(n){return t(jw(n))}}())},sH=function(e){return Ge(e.value0)(function(t){return"("+(e.value0+(": "+(fs(t)+")")))})(e.value1)},fH=function(e){return"@media "+(oH(e.value1)+z2(B2)(eT(function(t){return function(n){return" and "+n}(sH(t))})(e.value2)))};var lH=function(e){return function(t){if(e instanceof on&&t instanceof on)return[new Qe(new K(e.value0,t.value0))];if(e instanceof an&&t instanceof on)return Ba(function(n){return new Qe(new K(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof on&&t instanceof an)return Ba(function(n){return new Qe(new K(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof an&&t instanceof an)return Ba(function(n){return Ge(new tt(n.value0+n.value1))(function(){var f=K.create(n.value0+n.value1);return function(_){return Qe.create(f(function(r){return n.value0+r}(_)))}}())(G2(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},Jm=function(e){return lH(e.value0)(e.value1)},_H=function(e){return function(t){var n=j2(t)(Jm),f=S_(function(r){return Na.create(Y2(Jw(Q2(r))))})(cu(n)),_=function(r){return O.create(Sn.create(w_(b_(" ")([aH(dc(r)),"{",Jw(n),`}
`]))))};return Ge(f)(_)(cu(e))}},Js=function(e){return function(t){var n=function(i){return i instanceof My?new O(new K(i.value0,i.value1)):N.value},f=y_(Ai(We(pH)(e)))(Ea(n)(t)),_=function(i){return i instanceof hs?new O(new K(i.value0,i.value1)):N.value},r=function(){var i=Ea(_)(t),s=J2(Oi)(i);return s?_H(e)(i):N.value}(),o=function(i){return Js(br(i)(e))},c=function(i){return i instanceof Gd?new O(new K(i.value0,i.value1)):N.value},l=tH(Ba(Ai(o))(Ea(c)(t))),u=function(i){return i instanceof Ly?new O(i.value0):N.value},v=y_(dH)(Ea(u)(t)),h=function(i){return i instanceof Ay?new O(i.value0):N.value},g=y_(iH)(Ea(h)(t)),d=function(i){return i instanceof Fy?new O(i.value0):N.value},a=y_(mH)(Ea(d)(t));return Qs(r)(Qs(g)(Qs(v)(Qs(a)(Qs(l)(f)))))}},pH=function(e){return function(t){return function(n){return O.create(Sn.create(w_(fH(e)+(" { "+(pr("")(Qm(Js(t)(n)))+` }
`)))))}}},dH=function(e){var t=" "+(e.value0+(" { "+(K2(" ")(eT(Ai(vH))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],f=Xw(Ba(function(_){return _+t})(n));return new O(new Sn(f))},vH=function(e){return function(t){var n=pr("")(nT(Js([])(t)));return X2(e)+("% "+("{ "+(n+" }")))}},mH=function(e){return O.create(Sn.create(w_("@font-face { "+(pr("")(nT(Js([])(e)))+` }
`))))},aT=function(){var e=Js([]);return function(t){return e(gs(t))}}();var Ks=function(){return sw(N.value)}();var Km=function(e){return Ks("img")(e)([])},Xs=function(e){return Ks("input")(e)([])};var Xm=Ks("style");var Or=Ks("div"),da=Or([]);var vc=function(){var e=function(t){return function(n){return new O(new Ul(t,n))}};return function(t){return ow(e(t))}}(),Ys=function(e){return iw(e)};var gH=Ys(uw);var oT=gH("src");var iT=function(e){return Ys(e)("type")};var Ym=function(){return fw(N.value)}();var DH=iT(Tm),CH=Y(Eo),yH=n_(St),uT=function(e){var t=pr("")(Qm(aT(e)));return Xm([DH("text/css")])([go(t)])},wn=function(){var e=function(){var r=Ho("; "),o=YS(Fi)(function(c){return function(l){return[c+(": "+l)]}});return function(c){return r(o(c))}}(),t=Cd(Kt(Qf)(Fi)(Hi)),n=function(r){return r instanceof hs?new O(new K(r.value0,r.value1)):N.value},f=function(r){var o=CH(Ea(n)(r))(function(c){return t(Jm(c))});return yH(o)},_=Ym("style");return function(r){return _(e(f(gs(r))))}}();var Gr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var bH=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return{map:function(f){return function(_){var r=function(o){if(o instanceof Gr)return new Gr(o.value0,function(c){return r(o.value1(c))});if(o instanceof jr)return new jr(o.value0,function(c){return r(o.value1(c))});if(o instanceof Qr)return new Qr(t(o.value0)(function(c){return n(r(c))}));if(o instanceof Lr)return new Lr(f(o.value0));throw new Error("Failed pattern match at Pipes.Internal (line 28, column 12 - line 32, column 41): "+[o.constructor.name])};return r(_)}}}};var ef=function(e){var t;function n(f){e=f}for(;;)t=n(e);return t},Zm=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0()),f=bH(e),_=$(f);return{apply:function(r){return function(o){var c=function(l){if(l instanceof Gr)return new Gr(l.value0,function(u){return c(l.value1(u))});if(l instanceof jr)return new jr(l.value0,function(u){return c(l.value1(u))});if(l instanceof Qr)return new Qr(t(l.value0)(function(u){return n(c(u))}));if(l instanceof Lr)return _(l.value0)(o);throw new Error("Failed pattern match at Pipes.Internal (line 36, column 13 - line 40, column 33): "+[l.constructor.name])};return c(r)}},Functor0:function(){return f}}},hc=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0()),f=Zm(e);return{bind:function(_){return function(r){var o=function(c){if(c instanceof Gr)return new Gr(c.value0,function(l){return o(c.value1(l))});if(c instanceof jr)return new jr(c.value0,function(l){return o(c.value1(l))});if(c instanceof Qr)return new Qr(t(c.value0)(function(l){return n(o(l))}));if(c instanceof Lr)return r(c.value0);throw new Error("Failed pattern match at Pipes.Internal (line 47, column 12 - line 51, column 28): "+[c.constructor.name])};return o(_)}},Apply0:function(){return f}}};var gc=function(e){var t=Zm(e);return{pure:Lr.create,Apply0:function(){return t}}},cT=function(e){var t=gc(e),n=hc(e);return{Applicative0:function(){return t},Bind1:function(){return n}}},sT=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0()),f=cT(e);return{tailRecM:function(_){return function(r){var o=function(c){if(c instanceof Lr&&c.value0 instanceof vt)return o(_(c.value0.value0));if(c instanceof Lr&&c.value0 instanceof Dt)return new Lr(c.value0.value0);if(c instanceof Qr)return new Qr(t(c.value0)(function(l){return n(o(l))}));if(c instanceof Gr)return new Gr(c.value0,function(l){return o(c.value1(l))});if(c instanceof jr)return new jr(c.value0,function(l){return o(c.value1(l))});throw new Error("Failed pattern match at Pipes.Internal (line 163, column 10 - line 168, column 52): "+[c.constructor.name])};return o(_(r))}},Monad0:function(){return f}}};var fT=function(e){return function(t){return new jr(t,Lr.create)}},lT=function(e){return function(t){return new Gr(t,Lr.create)}};var eh=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(f){return function(_){if(f instanceof Gr)return new Gr(f.value0,function(r){return eh(e)(f.value1(r))(_)});if(f instanceof jr)return tf(e)(f.value1)(_(f.value0));if(f instanceof Qr)return new Qr(t(f.value0)(function(r){return n(eh(e)(r)(_))}));if(f instanceof Lr)return new Lr(f.value0);throw new Error("Failed pattern match at Pipes.Core (line 222, column 21 - line 226, column 29): "+[f.constructor.name])}}},tf=function(e){var t=$(e.Bind1().Apply0().Functor0());return function(n){return function(f){if(f instanceof Gr)return eh(e)(n(f.value0))(f.value1);if(f instanceof jr)return new jr(f.value0,function(_){return function(r){return tf(e)(n)(r)}(f.value1(_))});if(f instanceof Qr)return new Qr(t(function(_){return tf(e)(n)(_)})(f.value0));if(f instanceof Lr)return new Lr(f.value0);throw new Error("Failed pattern match at Pipes.Core (line 197, column 22 - line 201, column 29): "+[f.constructor.name])}}};var E_=function(e){return fT(e)};var th=function(e){var t=tf(e);return function(n){return function(f){return t(ge(n))(f)}}};var _T=function(e){return lT(e)(void 0)};var pT=ye(ra),DT=pe(rt),CT=ht(gt),wH=CT(Jo),TH=le(ve),dT=Wc(Nf),M_=Bl(Ha),vT=CT(hc(M_)),mT=E_(M_),hT=z(gc(M_)),gT=kt(sT(M_));var EH={eq:function(e){return function(t){return e===t}}},nh={compare:function(e){return function(t){return DT(e)(t)}},Eq0:function(){return EH}},MH={pageOrder:function(e){return function(t){return DT(e)(t)}},Ord0:function(){return nh}},FH=function(e){return{element:function(){var t=function(n){return Or([wn(Hy(Ry)(Xe(1))(Bi))])([go(pT(n)),Km([oT("https://picsum.photos/"+pT(n)),wn(wH(io(Xe(400)))(function(){return _a(Xe(400))}))])])};return Hn({initialState:TH,render:t,eval:Pn(Cr)})}(),PageOrder0:function(){return MH},MonadAff1:function(){return e}}},yT=function(e){var t=z(e.MonadEffect0().Monad0().Applicative0()),n=FH(e);return{feedAbove:function(f){var _=function(r){var o=dT(r-1|0)(300);return vT(mT(o))(function(){return hT(new vt(o))})};return t(gT(_)(f))},feedBelow:function(f){var _=function(r){var o=dT(r+1|0)(300);return vT(mT(o))(function(){return hT(new vt(o))})};return t(gT(_)(f))},feedInsert:t(N.value),feedDelete:t(N.value),onElement:function(f){return t(void 0)},PageElement0:function(){return n},MonadAff1:function(){return e}}};var fu=function(){return window};function bT(e){return e.readyState}var rf=function(){function e(){}return e.value=new e,e}(),RH=function(){function e(){}return e.value=new e,e}(),PH=function(){function e(){}return e.value=new e,e}();var ST=function(e){return e==="loading"?new O(rf.value):e==="interactive"?new O(RH.value):e==="complete"?new O(PH.value):N.value};var OH=$(Ae);var TT=Q;var ET=Q;var MT=function(e){return OH(function(){var t=pr(rf.value);return function(n){return t(ST(n))}}())(function(){return bT(e)})};function LT(e,t,n){var f=Object.prototype.toString.call(n);return f.indexOf("[object HTML")===0&&f.indexOf("Element]")===f.length-8?t(n):e}var AT=Q;var ah=function(e){return LT(N.value,O.create,e)};function Dc(e){return function(){return e.document}}var PT=Q;var ih="DOMContentLoaded";var kT="change";var BT=Y(qt),xO=Ve(hr),uh=Gt(Mn),IO=Ff(Mn),WT=z(Cn),RO=Gt(en),PO=z(Rt),HO=$(Ae),OO=ht(gt),kO=Sr(tc),NO=function(e){return BT(xO(uh(IO(function(){var t=WS(e);return function(n){return t(TT(n))}}())(Dc))(fu)))(function(t){return WT(RO(ah)(t))})},$T=Ol(Br(oo)(ge(PO(void 0)))),BO=fo(function(e){return function(){var n=uh(MT)(uh(Dc)(fu))();if(n instanceof rf){var f=HO(PT)(fu)(),_=ks(function(r){return e(new Qe(void 0))})();return hm(ih)(_)(!1)(f)(),Xi(gm(ih)(_)(!1)(f))}return e(new Qe(void 0))(),lS}}),qT=OO(qt)(BO)(function(){return BT(NO("body"))(function(e){return Ge(kO(sa("Could not find body")))(WT)(e)})});var UT=Um();var F_=function(){return function(e){var t=UT(e);return function(n){var f=t(n);return function(_){return function(r){return function(o){return function(c){return wm(new pc(f(_)(r)(o)(c)(ge(N.value))))}}}}}}},Cc=function(){return function(e){var t=UT(e);return function(n){var f=t(n);return function(_){return function(r){return function(o){return function(c){return function(l){return wm(new pc(f(_)(r)(o)(c)(function(u){return O.create(l(u))})))}}}}}}}};var a5=function(e){return function(t){return Em(e)(function(n){return new O(new Yi(t(n)))})}};var A_=a5(kT);var ch=lt(vr),VT=lt(er);var i5={value:function(e){return e}},zT=Ft(i5),x_=ch("scroll"),I_=zT(VT("overflow-y"));var GT=ch("auto"),lu=zT(VT("overflow")),nf=ch("hidden");var fh=function(e){return function(t){var n=e(t);return n.value1}};var Yn=function(){function e(){this.head=null,this.last=null,this.size=0}function t(v,h){this.queue=v,this.value=h,this.next=null,this.prev=null}function n(v){this.draining=!1,this.error=null,this.value=v,this.takes=new e,this.reads=new e,this.puts=new e}var f={};function _(v){try{v()}catch(h){setTimeout(function(){throw h},0)}}function r(v,h){var g=new t(v,h);switch(v.size){case 0:v.head=g;break;case 1:g.prev=v.head,v.head.next=g,v.last=g;break;default:g.prev=v.last,v.last.next=g,v.last=g}return v.size++,g}function o(v){var h;switch(v.size){case 0:return null;case 1:h=v.head,v.head=null;break;case 2:h=v.last,v.head.next=null,v.last=null;break;default:h=v.last,v.last=h.prev,v.last.next=null}return h.prev=null,h.queue=null,v.size--,h.value}function c(v){var h;switch(v.size){case 0:return null;case 1:h=v.head,v.head=null;break;case 2:h=v.head,v.last.prev=null,v.head=v.last,v.last=null;break;default:h=v.head,v.head=h.next,v.head.prev=null}return h.next=null,h.queue=null,v.size--,h.value}function l(v){if(v.queue!==null){if(v.queue.last===v){o(v.queue);return}if(v.queue.head===v){c(v.queue);return}v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),v.queue.size--,v.queue=null,v.value=null,v.next=null,v.prev=null}}function u(v,h){if(!h.draining){var g=h.puts,d=h.takes,a=h.reads,i,s,p,D,C;for(h.draining=!0;;){if(i=null,s=null,p=null,D=h.value,C=a.size,h.error!==null){for(D=v.left(h.error);i=c(g);)_(i.cb(D));for(;s=c(a);)_(s(D));for(;p=c(d);)_(p(D));break}if(D===f&&(i=c(g))&&(h.value=D=i.value),D!==f){for(p=c(d);C--&&(s=c(a));)_(s(v.right(D)));p!==null&&(h.value=f,_(p(v.right(D))))}if(i!==null&&_(i.cb(v.right(void 0))),h.value===f&&g.size===0||h.value!==f&&d.size===0)break}h.draining=!1}}return n.EMPTY=f,n.putLast=r,n.takeLast=o,n.takeHead=c,n.deleteCell=l,n.drainVar=u,n}();function lh(){return new Yn(Yn.EMPTY)}function jT(e){return function(){return new Yn(e)}}function QT(e,t,n,f){return function(){var _=Yn.putLast(n.puts,{cb:f,value:t});return Yn.drainVar(e,n),function(){Yn.deleteCell(_)}}}function JT(e,t,n){return function(){var f=Yn.putLast(t.takes,n);return Yn.drainVar(e,t),function(){Yn.deleteCell(f)}}}function KT(e,t){return function(){var n=t.value;return n===Yn.EMPTY?e.nothing:(t.value=Yn.EMPTY,Yn.drainVar(e,t),e.just(n))}}var XT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),YT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZT=function(){function e(){}return e.value=new e,e}(),e1=jT;var _h=function(){return{left:tt.create,right:Qe.create,nothing:N.value,just:O.create,killed:XT.create,filled:YT.create,empty:ZT.value}}();var t1=function(e){return function(t){return function(n){return QT(_h,e,t,n)}}};var r1=function(e){return function(t){return JT(_h,e,t)}};var n1=function(e){return KT(_h,e)};var ph=Ve(hr),a1=function(e){return ph(n1(e))};var dh=function(e){return fo(function(t){return function(){var f=r1(e)(t)();return Xi(f)}})};var af=function(e){return function(t){return fo(function(n){return function(){var _=t1(e)(t)(n)();return Xi(_)}})}},o1=function(e){return ph(e1(e))};var vh=ph(lh);var R_=function(e){return e};var _5=n_(St);var u1=It,_u=function(e){return ru(_5(e))};var c1=Fi;var p5=function(e){return function(t){return[new K(e,ru(t))]}},yo=function(e){return R_(p5(e))},of=cr();var s1=e=>t=>()=>{let n=(f,_)=>{e(f)(_)()};return new IntersectionObserver(n,t)},hh=e=>t=>()=>{e.observe(t)};var f1=function(e){return function(t){return s1(e)(_u(t))}};var l1=yo("root");var _1=e=>()=>{let t=(n,f)=>{e(n)(f)()};return new ResizeObserver(t)},gh=e=>t=>()=>{e.observe(t)};var p1=function(e){return _1(e)};var Dh=$(dt),D5=F_()({reflectSymbol:function(){return"pageElement"}}),uf=ht(gt)(zr),d1=Pr(fr),v1=z(Fr),bo=Y(zr),C5=Vn(fr),y5=Yt(Fr),Ch=Aa(fr),m1=ot(fn),b5=Bn(h_),S5=ct(Fr)(Ot),h1=id(St)(Ip),w5=le(ve),yh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),T5=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),bh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Sh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),g1=function(){function e(){}return e.value=new e,e}(),D1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),C1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cf=function(e){return e.pageOrder},E5=function(e){return e.element},M5=function(){return Ht.value}(),y1=function(e){var t=e.PageOrder0(),n=t.Ord0(),f=D5(n),_=E5(e),r=rs(n),o=cf(t),c=Dd(n.Eq0()),l=Ve(Xn(e.MonadAff1().MonadEffect0())),u=function(g){return Or([vc("page"),wn(lu(GT))])(Dh(function(d){return f(M5)(d)(_)(d)})(g.elements))},v=function(g){if(g instanceof yh)return uf(d1(function(d){var a={};for(var i in d)({}).hasOwnProperty.call(d,i)&&(a[i]=d[i]);return a.elements=r(ns(o)(g.value0)(d.elements)),a}))(function(){return v1(new O(g.value1))});if(g instanceof T5)return bo(C5(function(d){var a={};for(var i in d)({}).hasOwnProperty.call(d,i)&&(a[i]=d[i]);return a.elements=c(g.value0)(d.elements),a}))(function(d){return uf(y5(Oi(d.elements))(Kn(new wh(d.id))))(function(){return v1(new O(g.value1))})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 89, column 5 - line 89, column 99): "+[g.constructor.name])},h=function(g){if(g instanceof g1){var d=function(p){return bo(Ch(function(D){return D.parent}))(function(D){return bo(l(Dr))(function(C){return uf(m1(rr(C.emitter)))(function(){return bo(l(f1(function(b){return function(w){return gr(C.listener)(new C1(b))}})(of(l1)(D))))(function(b){return l(hh(b)(p))})})})})},a=function(p){return bo(l(Dr))(function(D){return uf(m1(rr(D.emitter)))(function(){return bo(l(p1(function(C){return function(b){return gr(D.listener)(new D1(C))}})))(function(C){return l(gh(C)(p))})})})},i=function(p){return b5(a(p))(d(p))};return bo(Rn("page"))(S5(i))}if(g instanceof D1)return bo(Ch(function(p){return p.id}))(function(p){var D=h1(Dh(function(C){return C.contentRect.height})(g.value0));return Kn(new bh({id:p,height:D}))});if(g instanceof C1){var s=h1(Dh(function(p){return p.intersectionRect.height})(g.value0));return bo(Ch(function(p){return p.id}))(function(p){return uf(d1(function(D){var C={};for(var b in D)({}).hasOwnProperty.call(D,b)&&(C[b]=D[b]);return C.visibleHeight=s,C}))(function(){return Kn(new Sh({id:p,height:s}))})})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 98, column 5 - line 98, column 81): "+[g.constructor.name])};return Hn({initialState:w5,render:u,eval:Pn({receive:Cr.receive,finalize:Cr.finalize,handleAction:h,handleQuery:v,initialize:new O(g1.value)})})};var F5=kc(rt),L5=Lo(rt),A5=lv($n),x5=$(Qu),pu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),du=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),I5={append:function(e){return function(t){if(e instanceof mi)return new mi(e.value0);if(t instanceof mi)return new mi(t.value0);if(e instanceof pu&&t instanceof pu)return new pu(F5(e.value0)(t.value0));if(e instanceof du&&t instanceof du)return new du(L5(e.value0)(t.value0));if(e instanceof pu)return new mi(e.value0);if(e instanceof du)return new mi(e.value0);throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 19, column 1 - line 25, column 32): "+[e.constructor.name,t.constructor.name])}}},R5=function(){return{mempty:new pu(ta(Eu)),Semigroup0:function(){return I5}}}(),P5=R0(R5),S1=function(e){var t=cf(e);return function(n){return function(f){var _=function(o){var c=new K(Ou(o.elements),Hu(o.elements));if(c.value0 instanceof O&&c.value1 instanceof O){var l=new K(t(n)(c.value0.value0),t(n)(c.value1.value0));return l.value0 instanceof te?new pu(o.id):l.value1 instanceof Z?new du(o.id):new mi(o.id)}return new du(o.id)},r=P5(A5(fv(x5(_)(f))));if(r instanceof pu||r instanceof du||r instanceof mi)return r.value0;throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 29, column 3 - line 32, column 18): "+[r.constructor.name])}}};var F1=ht(gt),hi=F1(Rv(Ja)),gi=Pr(vS(Ja)),w1=cn(rt),P_=jn(rt),vu=z(Pv(Ja)),T1=Ce(Fu(za)),E1=$(it),O5=ei(rt),k5=Lo(Qa),N5=le(ve),B5=od(Qa)(co),W5=$(Qu),M1=Gi($n),yc=F1(ka),bc=Yt(Jn),Sc=ct(Jn)(Ot),H_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),O_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),k_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),N_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),B_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),W_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$5={map:function(e){return function(t){if(t instanceof H_)return new H_(t.value0,e(t.value1));if(t instanceof O_)return new O_(t.value0,e(t.value1));if(t instanceof k_)return new k_(t.value0,e(t.value1));if(t instanceof N_)return new N_(t.value0,e(t.value1));if(t instanceof B_)return new B_(t.value0,e(t.value1));if(t instanceof W_)return new W_(t.value0,e(t.value1));if(t instanceof $_)return new $_(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 26, column 1 - line 33, column 68): "+[e.constructor.name,t.constructor.name])}}},q5=Oa($5)(dS(AC)),Th=function(e){return Lt(new $_(e,void 0))},U5=function(e){return Lt(new O_(e,void 0))},V5=function(e){return Lt(new H_(e,void 0))},z5=function(e){return Lt(new k_(e,void 0))},G5=function(e){return Lt(new N_(e,void 0))},Eh=function(e){var t=function(n){if(n instanceof H_)return hi(gi(function(_){var r={};for(var o in _)({}).hasOwnProperty.call(_,o)&&(r[o]=_[o]);return r.pages=w1(n.value0.key)(n.value0.value)(_.pages),r.preloaded=P_(n.value0.key)(_.preloaded),r.update=function(){var c={};for(var l in _.update)({}).hasOwnProperty.call(_.update,l)&&(c[l]=_.update[l]);return c.scroll=new O(n.value0.value.pageHeight),c}(),r}))(function(){return vu(n.value1)});if(n instanceof O_)return hi(gi(function(_){var r={};for(var o in _)({}).hasOwnProperty.call(_,o)&&(r[o]=_[o]);return r.pages=P_(n.value0.key)(_.pages),r.preloaded=w1(n.value0.key)(n.value0.value)(_.preloaded),r.update=function(){var c={};for(var l in _.update)({}).hasOwnProperty.call(_.update,l)&&(c[l]=_.update[l]);return c.scroll=new O(-n.value0.value.pageHeight),c}(),r}))(function(){return vu(n.value1)});if(n instanceof k_)return hi(gi(function(_){var r={};for(var o in _)({}).hasOwnProperty.call(_,o)&&(r[o]=_[o]);return r.update=function(){var c=T1(E1(function(g){return g.key})(_.update.topLoad))(new O(n.value0.key));if(c){var l={};for(var u in _.update)({}).hasOwnProperty.call(_.update,u)&&(l[u]=_.update[u]);return l.topLoad=N.value,l}var v={};for(var h in _.update)({}).hasOwnProperty.call(_.update,h)&&(v[h]=_.update[h]);return v.topLoad=new O(n.value0),v}(),r}))(function(){return vu(n.value1)});if(n instanceof N_)return hi(gi(function(_){var r={};for(var o in _)({}).hasOwnProperty.call(_,o)&&(r[o]=_[o]);return r.preloaded=P_(n.value0.key)(_.preloaded),r.update=function(){var c={};for(var l in _.update)({}).hasOwnProperty.call(_.update,l)&&(c[l]=_.update[l]);return c.topLoad=N.value,c}(),r}))(function(){return vu(n.value1)});if(n instanceof B_)return hi(gi(function(_){var r={};for(var o in _)({}).hasOwnProperty.call(_,o)&&(r[o]=_[o]);return r.update=function(){var c=T1(E1(function(g){return g.key})(_.update.bottomLoad))(new O(n.value0.key));if(c){var l={};for(var u in _.update)({}).hasOwnProperty.call(_.update,u)&&(l[u]=_.update[u]);return l.bottomLoad=N.value,l}var v={};for(var h in _.update)({}).hasOwnProperty.call(_.update,h)&&(v[h]=_.update[h]);return v.bottomLoad=new O(n.value0),v}(),r}))(function(){return vu(n.value1)});if(n instanceof W_)return hi(gi(function(_){var r={};for(var o in _)({}).hasOwnProperty.call(_,o)&&(r[o]=_[o]);return r.pages=P_(n.value0.key)(_.pages),r.update=function(){var c={};for(var l in _.update)({}).hasOwnProperty.call(_.update,l)&&(c[l]=_.update[l]);return c.bottomLoad=N.value,c}(),r}))(function(){return vu(n.value1)});if(n instanceof $_){var f=function(_){if(_ instanceof N)return N.value;if(_ instanceof O)return new O(function(){var r={};for(var o in _.value0)({}).hasOwnProperty.call(_.value0,o)&&(r[o]=_.value0[o]);return r.visibleHeight=n.value0.height,r}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 104, column 11 - line 104, column 44): "+[_.constructor.name])};return hi(gi(function(_){var r={};for(var o in _)({}).hasOwnProperty.call(_,o)&&(r[o]=_[o]);return r.pages=O5(f)(n.value0.id)(_.pages),r}))(function(){return vu(n.value1)})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 63, column 5 - line 69, column 13): "+[n.constructor.name])};return hi(gi(function(n){var f={};for(var _ in n)({}).hasOwnProperty.call(n,_)&&(f[_]=n[_]);return f.update=function(){var r={};for(var o in n.update)({}).hasOwnProperty.call(n.update,o)&&(r[o]=n.update[o]);return r.scroll=N.value,r}(),f}))(function(){return q5(t)(e)})},j5=function(e){return Lt(new B_(e,void 0))},Q5=function(e){return Lt(new W_(e,void 0))},L1=function(e){return function(t){var n=Yo(e.preloaded)>(e.feedParams.preloadedPages+e.feedParams.deadZone|0),f=Yo(e.preloaded)<(e.feedParams.preloadedPages-e.feedParams.deadZone|0),_=function(h){return h.value1.visibleHeight<k5(1)(Ge(0)(N5)(B5(W5(function(g){return g.visibleHeight})(e.pages))))},r=kr(il(_)(wu(M1(e.pages)))),o=r<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),c=r>(e.feedParams.hiddenPages+e.feedParams.deadZone|0),l=kr(il(_)(M1(e.pages))),u=l<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),v=l>(e.feedParams.hiddenPages+e.feedParams.deadZone|0);return yc(Th(t))(function(){return yc(bc(e.feedParams.enableTop&&u)(Sc(V5)(Pa(e.preloaded))))(function(){return yc(bc(e.feedParams.enableTop&&v)(Sc(U5)(Ra(e.pages))))(function(){return yc(bc(e.feedParams.enableTop&&f)(Sc(z5)(Ra(e.preloaded))))(function(){return yc(bc(e.feedParams.enableTop&&n)(Sc(G5)(Ra(e.preloaded))))(function(){return yc(bc(o)(Sc(j5)(Pa(e.pages))))(function(){return bc(c)(Sc(Q5)(Pa(e.pages)))})})})})})})}};var tk=ot(fn);var rk=pi();var sf=function(){return function(e){var t=rk(e);return function(n){var f=t(n);return function(_){return function(r){return function(o){return tk(f(_)(r)(o(void 0)))}}}}}};var nk=ht(gt);var I1=function(e){var t=z(gc(e)),n=hc(e),f=Y(n),_=_T(e),r=nk(n),o=E_(e),c=function(l){return l===0?t(void 0):f(_)(function(u){return r(o(u))(function(){return c(l-1|0)})})};return c};var ak=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(f){return function(_){return function(r){return function(o){var c=function(l){return function(u){if(l instanceof Gr)return ef(l.value0);if(l instanceof jr)return c(l.value1(void 0))(f(u)(l.value0));if(l instanceof Qr)return t(l.value0)(function(v){return c(v)(u)});if(l instanceof Lr)return n(r(u));throw new Error("Failed pattern match at Pipes.Prelude (line 202, column 14 - line 206, column 39): "+[l.constructor.name])}};return c(o)(_)}}}}};var R1=function(e){var t=function(f){return function(_){return function(r){return f(function(o){return new ke(_,o)}(r))}}},n=function(f){return f(Oe.value)};return ak(e)(t)(le(ve))(n)};var At=Y(zr),Mh=Yt(Fr),ik=Bn(h_),Tc=Aa(fr),So=ct(Fr)(Ot),wc=rn(ld)(Fr),Di=z(Fr),Lh=ht(gt),V_=pt(m_),Ah=$(Nv(Dn)),xh=ki(Tr),Ih=Bl(Ha),Rh=R1(Ih),Ph=th(Ih),Hh=I1(Ih),ff=$(fn),Jr=Lh(zr),Oh=Su(en),N1=xa(fr),va=Pr(fr),Fh=cn(rt),B1=jn(rt),P1=ot(fn),uk=kt(Gs),ck=Lh(qt),sk=$(Hm),q_=ei(rt),fk=Ml(rt),W1={reflectSymbol:function(){return"page"}},lk=sf()(W1)(rt),_k=Vn(fr),pk=ct(Rt)(Ot),dk=Cc()(W1)(rt),On=Lh(Jo),H1=$(dt),O1=Gi($n),vk=Hp(rt)(Hc),mk=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),z_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$1=function(){function e(){}return e.value=new e,e}(),U_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),k1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),G_=function(e){return e.onElement},hk=function(e){var t=Mr(di(e.MonadAff1()));return function(n){var f=function(_){return At(t(a1(_)))(function(r){return Mh(Ei(r))(ik(n)(t(af(void 0)(_))))})};return At(Tc(function(_){return _.lock}))(function(_){return So(f)(_)})}},gk=function(e){var t=Ve(Xn(e.MonadAff1().MonadEffect0()));return function(n){if(n instanceof mk)return At(Rn("feed"))(function(f){return We(wc)(f)(function(_){var r=function(o){return function(){var l=ac(_)();return Rs(l+o)(_)()}};return Di(n.value0(r))})});if(n instanceof kh)return At(Rn("feed"))(function(f){return We(wc)(f)(function(_){return t(function(){var o=ac(_)();return Rs(o+n.value0)(_)(),n.value1})})});if(n instanceof z_)return At(Rn("feed"))(function(f){return We(wc)(f)(function(_){return t(function(){var o=ac(_)();return n.value0(o)})})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 90, column 1 - line 92, column 93): "+[n.constructor.name])}},Dk=function(e){return e.feedInsert};var q1=function(e){return e.feedBelow},Ck=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),f=V_(n),_=q1(e),r=Mr(di(t)),o=ct(n.Applicative0())(St),c=G_(e);return function(l){var u=At(Tc(function(v){return v.feedParams.initialElement}))(function(v){return At(Tc(function(h){return h.feedParams}))(function(h){return At(f(_(v)))(function(g){var d=Ah(xh)(Rh(Ph(g)(Hh(h.pageSize-1|0))));return ff(br(v))(r(Nl(d)))})})});return At(u)(function(v){return Jr(f(o(c)(v)))(function(){return Di({id:0,elements:v,parent:l,pageHeight:0,visibleHeight:0})})})}},yk=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),f=V_(n),_=q1(e),r=Mr(di(t)),o=ct(n.Applicative0())(St),c=G_(e);return function(l){return function(u){var v=function(h){return At(Tc(function(g){return g.feedParams}))(function(g){return At(f(_(h)))(function(d){var a=Ah(xh)(Rh(Ph(d)(Hh(g.pageSize))));return At(r(Nl(a)))(function(i){return Jr(f(o(c)(i)))(function(){var s=Oi(i);return Di(s?N.value:new O({id:u.id+1|0,elements:i,parent:l,pageHeight:0,visibleHeight:0}))})})})})};return ff(Oh)(wc(v)(Hu(u.elements)))}}},bk=function(e){return e.feedAbove},U1=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),f=V_(n),_=bk(e),r=Mr(di(t)),o=ct(n.Applicative0())(St),c=G_(e);return function(l){return function(u){var v=function(h){return At(Tc(function(g){return g.feedParams}))(function(g){return At(f(_(h)))(function(d){var a=Ah(xh)(Rh(Ph(d)(Hh(g.pageSize))));return At(ff(wu)(r(Nl(a))))(function(i){return Jr(f(o(c)(i)))(function(){var s=Oi(i);return Di(s?N.value:new O({id:u.id-1|0,elements:i,parent:l,pageHeight:0,visibleHeight:0}))})})})})};return ff(Oh)(wc(v)(Ou(u.elements)))}}},Sk=function(e){var t=U1(e);return function(n){return At(N1)(function(f){var _=Yo(f.preloaded)>f.feedParams.preloadedPages,r=Yo(f.preloaded)<f.feedParams.preloadedPages;return Jr(Mh(r)(function(){var o=Ge(Ra(f.pages))(O.create)(Ra(f.preloaded));return At(ff(Oh)(wc(function(c){return t(n)(c.value)})(o)))(function(c){return So(function(l){return va(function(u){var v={};for(var h in u)({}).hasOwnProperty.call(u,h)&&(v[h]=u[h]);return v.preloaded=Fh(l.id)(l)(u.preloaded),v})})(c)})}()))(function(){return Mh(_)(va(function(o){var c={};for(var l in o)({}).hasOwnProperty.call(o,l)&&(c[l]=o[l]);return c.preloaded=Ge(o.preloaded)(function(u){return B1(u.key)(o.preloaded)})(Ra(o.preloaded)),c}))})})}},V1=function(e){return{initialElement:e,pageSize:10,hiddenPages:6,preloadedPages:6,deadZone:2,debounce:333,enableTop:!1,preloadMillis:333.3}},z1=function(){return Ht.value}(),wk=function(e){var t=Sk(e),n=Ck(e),f=e.MonadAff1(),_=Mr(di(f)),r=f.MonadEffect0(),o=V_(r.Monad0()),c=Dk(e),l=e.PageElement0().PageOrder0(),u=rs(l.Ord0()),v=cf(l),h=G_(e),g=S1(l),d=hk(e),a=Ve(Xn(r)),i=U1(e),s=yk(e);return function(p){if(p instanceof $1){var D=function(M){return function(S){return function(T){var L=T>=M.preloadedPages;return L?Di(new Dt(T)):Jr(t(S))(function(){return Di(new vt(T+1|0))})}}},C=function(M){return At(n(M))(function(S){return Jr(va(function(T){var L={};for(var I in T)({}).hasOwnProperty.call(T,I)&&(L[I]=T[I]);return L.pages=zi(0)(S),L}))(function(){return At(Tc(function(T){return T.feedParams}))(function(T){return Jr(P1(uk(D(T)(M))(0)))(function(){return At(_(ck(Mv(T.preloadMillis))(function(){return o1(void 0)})))(function(L){return va(function(I){var R={};for(var P in I)({}).hasOwnProperty.call(I,P)&&(R[P]=I[P]);return R.lock=new O(L),R})})})})})})};return Jr(At(Rn("feed"))(So(C)))(function(){return At(o(c))(function(M){return So(function(S){return P1(rr(sk(k1.create)(S)))})(M)})})}if(p instanceof k1){var b=function(M){if(M instanceof N)return N.value;if(M instanceof O)return new O(function(){var S={};for(var T in M.value0)({}).hasOwnProperty.call(M.value0,T)&&(S[T]=M.value0[T]);return S.elements=u(ns(v)(p.value0)(M.value0.elements)),S}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 156, column 5 - line 156, column 33): "+[M.constructor.name])},w=function(M){return function(S){var T={};for(var L in S)({}).hasOwnProperty.call(S,L)&&(T[L]=S[L]);return T.pages=q_(b)(M)(S.pages),T.preloaded=q_(b)(M)(S.preloaded),T}};return At(N1)(function(M){return Jr(o(h(p.value0)))(function(){var S=g(p.value0)(fk(M.preloaded)(M.pages));return Jr(va(w(S)))(function(){return lk(z1)(S)(yh.create(p.value0))})})})}if(p instanceof U_&&p.value0 instanceof bh){var m=function(M){if(M instanceof N)return N.value;if(M instanceof O)return new O(function(){var S={};for(var T in M.value0)({}).hasOwnProperty.call(M.value0,T)&&(S[T]=M.value0[T]);return S.pageHeight=p.value0.value0.height,S}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 165, column 5 - line 165, column 32): "+[M.constructor.name])},y=function(M){var S={};for(var T in M)({}).hasOwnProperty.call(M,T)&&(S[T]=M[T]);return S.pages=q_(m)(p.value0.value0.id)(M.pages),S.preloaded=q_(m)(p.value0.value0.id)(M.preloaded),S};return va(y)}if(p instanceof U_&&p.value0 instanceof Sh)return Jr(va(function(M){return fh(Eh(Th(p.value0.value0)))(M)}))(function(){return d(At(Rn("feed"))(function(M){return We(So)(M)(function(S){return At(a(ac(S)))(function(T){return At(_k(function(L){return fh(Eh(L1(L)(p.value0.value0)))(L)}))(function(L){return Jr(a(pk(function(I){return Rs(T+I)(S)})(L.update.scroll)))(function(){return Jr(Kn(L))(function(){return Jr(va(function(I){var R={};for(var P in I)({}).hasOwnProperty.call(I,P)&&(R[P]=I[P]);return R.update={topLoad:N.value,bottomLoad:N.value,scroll:N.value},R}))(function(){return Jr(We(So)(L.update.topLoad)(function(I){return At(i(S)(I.value))(function(R){return So(function(P){return va(function(W){var E={};for(var A in W)({}).hasOwnProperty.call(W,A)&&(E[A]=W[A]);return E.preloaded=Fh(P.id)(P)(L.preloaded),E})})(R)})}))(function(){return Jr(We(So)(L.update.bottomLoad)(function(I){return At(s(S)(I.value))(function(R){return So(function(P){return va(function(W){var E={};for(var A in W)({}).hasOwnProperty.call(W,A)&&(E[A]=W[A]);return E.pages=Fh(P.id)(P)(W.pages),E})})(R)})}))(function(){return _(Mv(L.feedParams.debounce))})})})})})})})})}))});if(p instanceof U_&&p.value0 instanceof wh)return va(function(M){var S={};for(var T in M)({}).hasOwnProperty.call(M,T)&&(S[T]=M[T]);return S.pages=B1(p.value0.value0)(M.pages),S});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 120, column 1 - line 122, column 99): "+[p.constructor.name])}},Tk=function(e){var t=y1(e.PageElement0());return function(n){var f=function(l){return dk(z1)(l.value0)(t)(l.value1)(U_.create)},_=Or([vc("feed"),wn(On(Xd(Xe(-50)))(function(){return On(Kd(Xe(50)))(function(){return On(_a(Wu(100)))(function(){return I_(x_)})})}))])(H1(f)(O1(n.pages))),r=Or([wn(On(Xd(Xe(-50)))(function(){return On(Kd(Xe(50)))(function(){return On(_a(Wu(100)))(function(){return On(In(-1))(function(){return On(wr(Ko))(function(){return zn(Wu(-100))})})})})}))])([]),o=function(l){return Or([wn(On(In(-2-vk(l.value0)|0))(function(){return On(Sl(0))(function(){return wr(Ko)})}))])([f(l)])},c=Or([wn(On(In(-2))(function(){return wr(Ko)}))])(H1(o)(O1(n.preloaded)));return Or([wn(On(io(Wu(100)))(function(){return On(_a(Wu(100)))(function(){return lu(nf)})}))])([_,r,c])}},G1=function(e){return function(t){return Hn({initialState:function(n){return{feedParams:n,pages:mr,preloaded:mr,lock:N.value,update:{topLoad:N.value,bottomLoad:N.value,scroll:N.value}}},render:Tk(t),eval:Pn({receive:Cr.receive,finalize:Cr.finalize,handleAction:wk(t),handleQuery:gk(t),initialize:new O($1.value)})})}};var Mk=$(au);var j1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var lf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),j_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Q_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),J_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),K_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),X_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Y_=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),Z_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ep=function(){function e(t,n,f){this.value0=t,this.value1=n,this.value2=f}return e.create=function(t){return function(n){return function(f){return new e(t,n,f)}}},e}(),Fk=function(e){return e};var Nh=Tu,_f=rt;var Q1=function(e){var t=$(e);return{map:function(n){return function(f){if(f instanceof lf)return new lf(Mk(n)(f.value0));if(f instanceof j_)return new j_(t(n)(f.value0));if(f instanceof Q_)return new Q_(function(_){return n(f.value0(_))});if(f instanceof J_)return new J_(f.value0,n(f.value1));if(f instanceof K_)return new K_(f.value0,n(f.value1));if(f instanceof X_)return new X_(f.value0,n(f.value1));if(f instanceof Y_)return new Y_(f.value0,f.value1,function(_){return n(f.value2(_))});if(f instanceof Z_)return new Z_(f.value0,n(f.value1));if(f instanceof ep)return new ep(f.value0,f.value1,n(f.value2));throw new Error("Failed pattern match at Halogen.Shell.Free (line 34, column 1 - line 43, column 38): "+[n.constructor.name,f.constructor.name])}}}};var J1=Jn,Bh=function(e){return Fk(Lt(lf.create(e)))};var xk=lt(er),Ik=Ft(ko);var Wh=Ik(xk("background-color"));var Ct=lt(vr),X1=function(){function e(){}return e.value=new e,e}(),Pk=function(){function e(){}return e.value=new e,e}(),Y1=function(){function e(){}return e.value=new e,e}(),Hk=function(){function e(){}return e.value=new e,e}(),Ok=function(){function e(){}return e.value=new e,e}(),kk=function(){function e(){}return e.value=new e,e}(),Z1=function(){function e(){}return e.value=new e,e}(),$h=function(){function e(){}return e.value=new e,e}(),Nk=function(){function e(){}return e.value=new e,e}(),Bk=function(){function e(){}return e.value=new e,e}(),Wk=function(){function e(){}return e.value=new e,e}(),$k=function(){function e(){}return e.value=new e,e}(),qk=function(){function e(){}return e.value=new e,e}(),Uk=function(){function e(){}return e.value=new e,e}(),Vk=function(){function e(){}return e.value=new e,e}(),zk=function(){function e(){}return e.value=new e,e}(),Gk=function(){function e(){}return e.value=new e,e}(),jk=function(){function e(){}return e.value=new e,e}(),Qk=function(){function e(){}return e.value=new e,e}(),Jk=function(){function e(){}return e.value=new e,e}(),Kk=function(){function e(){}return e.value=new e,e}(),Xk=function(){function e(){}return e.value=new e,e}(),Yk=function(){function e(){}return e.value=new e,e}(),Zk=function(){function e(){}return e.value=new e,e}(),eN=function(){function e(){}return e.value=new e,e}(),tN=function(){function e(){}return e.value=new e,e}(),rN=function(){function e(){}return e.value=new e,e}(),nN=function(){function e(){}return e.value=new e,e}(),aN=function(){function e(){}return e.value=new e,e}(),oN=function(){function e(){}return e.value=new e,e}(),iN=function(){function e(){}return e.value=new e,e}(),uN=function(){function e(){}return e.value=new e,e}(),cN=function(){function e(){}return e.value=new e,e}();var sN={value:function(e){if(e instanceof X1)return Ct("default");if(e instanceof Pk)return Ct("help");if(e instanceof Y1)return Ct("pointer");if(e instanceof Hk)return Ct("progress");if(e instanceof Ok)return Ct("wait");if(e instanceof kk)return Ct("cell");if(e instanceof Z1)return Ct("crosshair");if(e instanceof $h)return Ct("text");if(e instanceof Nk)return Ct("vertical-text");if(e instanceof Bk)return Ct("alias");if(e instanceof Wk)return Ct("copy");if(e instanceof $k)return Ct("move");if(e instanceof qk)return Ct("no-drop");if(e instanceof Uk)return Ct("not-allowed");if(e instanceof Vk)return Ct("grab");if(e instanceof zk)return Ct("grabbing");if(e instanceof Gk)return Ct("all-scroll");if(e instanceof jk)return Ct("col-resize");if(e instanceof Qk)return Ct("row-resize");if(e instanceof Jk)return Ct("n-resize");if(e instanceof Kk)return Ct("e-resize");if(e instanceof Xk)return Ct("s-resize");if(e instanceof Yk)return Ct("w-resize");if(e instanceof Zk)return Ct("ne-resize");if(e instanceof eN)return Ct("nw-resize");if(e instanceof tN)return Ct("se-resize");if(e instanceof rN)return Ct("sw-resize");if(e instanceof nN)return Ct("ew-resize");if(e instanceof aN)return Ct("ns-resize");if(e instanceof oN)return Ct("nesw-resize");if(e instanceof iN)return Ct("nwse-resize");if(e instanceof uN)return Ct("zoom-in");if(e instanceof cN)return Ct("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var qh=function(){return Y1.value}();var Uh=function(){return X1.value}(),mu=Ft(sN)(lt(er)("cursor")),eE=function(){return Z1.value}();var lN=lt(er);var tE=Ft(ko)(lN("color"));var Vh=lt(vr),pN=lt(er);var dN={value:function(e){return e}},rE=Vh("underline"),tp=Ft(dN)(pN("text-decoration")),nE=Vh("overline");var aE=Vh("line-through");var ie=ht(gt)(Jo),nr=Ft(No),Xt=lt(er),mN=jd(No),hN=ce(Bu),gN=lt(dl),DN=Ft(Wi),oE=function(){var e=je(wt)(Ze("xterm")),t=je(wt)(Ze("xterm-viewport")),n=ie(st(je(wt)(Ze("xterm-underline-1")))(tp(rE)))(function(){return ie(st(je(wt)(Ze("xterm-underline-2")))(nr(Xt("text-decoration"))("double underline")))(function(){return ie(st(je(wt)(Ze("xterm-underline-3")))(nr(Xt("text-decoration"))("wavy underline")))(function(){return ie(st(je(wt)(Ze("xterm-underline-4")))(nr(Xt("text-decoration"))("dotted underline")))(function(){return st(je(wt)(Ze("xterm-underline-5")))(nr(Xt("text-decoration"))("dashed underline"))})})})}),f=je(wt)(Ze("xterm-scroll-area")),_=je(wt)(Ze("xterm-screen")),r=je(wt)(Ze("xterm-decoration-overview-ruler")),o=ie(st(je(wt)(Ze("xterm-overline")))(tp(nE)))(function(){return ie(st(je(je(wt)(Ze("xterm-underline-1")))(Ze("xterm-overline")))(nr(Xt("text-decoration"))("overline underline")))(function(){return ie(st(je(je(wt)(Ze("xterm-underline-2")))(Ze("xterm-overline")))(nr(Xt("text-decoration"))("overline double underline")))(function(){return ie(st(je(je(wt)(Ze("xterm-underline-3")))(Ze("xterm-overline")))(nr(Xt("text-decoration"))("overline wavy underline")))(function(){return ie(st(je(je(wt)(Ze("xterm-underline-4")))(Ze("xterm-overline")))(nr(Xt("text-decoration"))("overline dotted underline")))(function(){return st(je(je(wt)(Ze("xterm-underline-5")))(Ze("xterm-overline")))(nr(Xt("text-decoration"))("overline dashed underline"))})})})})}),c=je(wt)(Ze("xterm-message")),l=je(wt)(Ze("live-region")),u=je(wt)(Ze("xterm-helper-textarea")),v=je(wt)(Ze("xterm-helpers")),h=je(wt)(Ze("xterm-dim")),g=je(wt)(Ze("xterm-decoration-top")),d=je(wt)(Ze("xterm-decoration-container")),a=je(wt)(Ze("xterm-decoration")),i=je(wt)(Ze("composition-view")),s=je(wt)(Ze("xterm-char-measure-element")),p=ie(wr(la))(function(){return ie(uo(Xe(0)))(function(){return ie(zn(Xe(0)))(function(){return ie(Yd(Xe(0)))(function(){return ie(wl(Xe(0)))(function(){return ie(In(10))(function(){return ie(nr(Xt("color"))("transparent"))(function(){return nr(Xt("pointer-events"))("none")})})})})})})}),D=je(wt)(Ze("xterm-accessibility"));return ie(st(e)(ie(mu($h.value))(function(){return ie(wr(Ko))(function(){return mN(hN(ls)(gN("user-select")))("none")})})))(function(){return ie(st(je(e)(Ze("focus")))(nr(Xt("outline"))("none")))(function(){return ie(st(je(e)(my("focus")))(nr(Xt("outline"))("none")))(function(){return ie(st(tr(e)(v))(ie(wr(la))(function(){return ie(zn(Xe(0)))(function(){return In(5)})})))(function(){return ie(st(tr(e)(u))(ie(zy(Xe(0))(Xe(0))(Xe(0))(Xe(0)))(function(){return ie(DN(Xt("border"))(0))(function(){return ie(Gy(Xe(0))(Xe(0))(Xe(0))(Xe(0)))(function(){return ie(wr(la))(function(){return ie(Sl(0))(function(){return ie(uo(Hd(-9999)))(function(){return ie(zn(Xe(0)))(function(){return ie(io(Xe(0)))(function(){return ie(_a(Xe(0)))(function(){return ie(In(-5))(function(){return ie(nr(Xt("whitespace"))("nowrap"))(function(){return ie(lu(nf))(function(){return nr(Xt("resize"))("none")})})})})})})})})})})})})))(function(){return ie(st(tr(e)(i))(ie(Wh(Bi))(function(){return ie(tE(ry))(function(){return ie(Gu(By))(function(){return ie(wr(la))(function(){return ie(nr(Xt("white-space"))("nowrap"))(function(){return In(1)})})})})})))(function(){return ie(st(tr(e)(je(i)(Ze("active"))))(Gu(Wy)))(function(){return ie(st(tr(e)(t))(ie(Wh(Bi))(function(){return ie(I_(x_))(function(){return ie(mu(Uh))(function(){return ie(wr(la))(function(){return ie(wl(Xe(0)))(function(){return ie(uo(Xe(0)))(function(){return ie(zn(Xe(0)))(function(){return Yd(Xe(0))})})})})})})})))(function(){return ie(st(tr(e)(_))(wr(Ko)))(function(){return ie(st(tr(e)(tr(_)(hl("canvas"))))(ie(wr(la))(function(){return ie(uo(Xe(0)))(function(){return zn(Xe(0))})})))(function(){return ie(st(tr(e)(f))(nr(Xt("visibility"))("hidden")))(function(){return ie(st(s)(ie(Gu(ky))(function(){return ie(nr(Xt("visibility"))("hidden"))(function(){return ie(wr(la))(function(){return ie(zn(Xe(0)))(function(){return ie(uo(Hd(-9999)))(function(){return nr(Xt("line-height"))("normal")})})})})})))(function(){return ie(st(je(e)(Ze("enable-mouse-events")))(mu(Uh)))(function(){return ie(st(je(e)(Ze("xterm-cursor-pointer")))(mu(qh)))(function(){return ie(st(tr(e)(je(wt)(Ze("xterm-cursor-pointer"))))(mu(qh)))(function(){return ie(st(je(je(e)(Ze("column-select")))(Ze("focus")))(mu(eE)))(function(){return ie(st(tr(e)(D))(p))(function(){return ie(st(tr(e)(c))(p))(function(){return ie(st(tr(e)(l))(ie(wr(la))(function(){return ie(uo(Xe(-9999)))(function(){return ie(io(Xe(1)))(function(){return ie(_a(Xe(1)))(function(){return lu(nf)})})})})))(function(){return ie(st(h)(nr(Xt("opacity"))("1 !important")))(function(){return ie(n)(function(){return ie(o)(function(){return ie(st(je(wt)(Ze("xterm-strikethrough")))(tp(aE)))(function(){return ie(st(tr(tr(_)(d))(a))(ie(In(6))(function(){return wr(la)})))(function(){return ie(st(tr(tr(_)(d))(je(a)(Ze("xterm-decoration-top-layer"))))(In(7)))(function(){return ie(st(r)(ie(In(8))(function(){return ie(wr(la))(function(){return ie(zn(Xe(0)))(function(){return ie(wl(Xe(0)))(function(){return nr(Xt("pointer-events"))("none")})})})})))(function(){return st(g)(ie(In(2))(function(){return wr(Ko)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var iE=e=>()=>e.type,zh=e=>()=>e.cursorY,Gh=e=>()=>e.cursorX,jh=e=>()=>e.viewportY,Qh=e=>()=>e.baseY,Jh=e=>()=>e.length,uE=e=>t=>()=>e.getLine(t),Kh=e=>()=>e.getNullCell();var Ec=function(e){return Os(e)?N.value:new O(pm(e))};var bN=$(Ae),SN=function(){function e(){}return e.value=new e,e}(),wN=function(){function e(){}return e.value=new e,e}(),cE=function(e){return function(t){return bN(Ec)(uE(e)(t))}},sE=function(e){return function(){var n=iE(e)();return n==="normal"?SN.value:wN.value}};var Yh=e=>()=>e.isWrapped,Zh=e=>()=>e.length;var $a=$(Ae),eg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ng=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ag=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),og=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ig=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ug=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),FN={map:function(e){return function(t){if(t instanceof eg)return new eg(function(n){return e(t.value0(n))});if(t instanceof tg)return new tg(function(n){return e(t.value0(n))});if(t instanceof rg)return new rg(function(n){return e(t.value0(n))});if(t instanceof ng)return new ng(function(n){return e(t.value0(n))});if(t instanceof ag)return new ag(function(n){return e(t.value0(n))});if(t instanceof og)return new og(function(n){return e(t.value0(n))});if(t instanceof ig)return new ig(t.value0,function(n){return e(t.value1(n))});if(t instanceof ug)return new ug(t.value0,function(n){return e(t.value1(n))});if(t instanceof cg)return new cg(t.value0,function(n){return e(t.value1(n))});if(t instanceof sg)return new sg(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.Buffer.Free (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},LN=Oa(FN);var fE=function(e){var t=e.Monad0(),n=Y(ji(t.Bind1())),f=un(Xu(t)),_=Ve(ri(e));return function(r){var o=function(c){if(c instanceof eg)return n(f)(function(l){return _($a(c.value0)(sE(l)))});if(c instanceof tg)return n(f)(function(l){return _($a(c.value0)(Gh(l)))});if(c instanceof rg)return n(f)(function(l){return _($a(c.value0)(zh(l)))});if(c instanceof ng)return n(f)(function(l){return _($a(c.value0)(jh(l)))});if(c instanceof ag)return n(f)(function(l){return _($a(c.value0)(Qh(l)))});if(c instanceof og)return n(f)(function(l){return _($a(c.value0)(Jh(l)))});if(c instanceof ig)return n(f)(function(l){return _($a(c.value1)(cE(l)(c.value0)))});if(c instanceof ug)return _($a(c.value1)(Yh(c.value0)));if(c instanceof cg)return _($a(c.value1)(Zh(c.value0)));if(c instanceof sg)return n(f)(function(l){return _($a(c.value0)(Kh(l)))});throw new Error("Failed pattern match at Halogen.Buffer.Free (line 19, column 5 - line 21, column 40): "+[c.constructor.name])};return LN(Yu(r))(o)}};var fg=e=>()=>e.cursorBlink,lg=e=>t=>()=>e.cursorBlink=t,_g=e=>()=>e.fontFamily,pg=e=>t=>()=>e.fontFamily=t;var lE=yo("fontFamily");var _E=yo("cursorBlink");var dE=$(Ae),kN=ht(gt);var dg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),NN={map:function(e){return function(t){if(t instanceof dg)return new dg(function(n){return e(t.value0(n))});if(t instanceof vg)return new vg(t.value0,e(t.value1));if(t instanceof mg)return new mg(function(n){return e(t.value0(n))});if(t instanceof hg)return new hg(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Terminal.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},BN=Oa(NN);var vE=function(e){var t=e.Monad0(),n=ji(t.Bind1()),f=Y(n),_=un(Xu(t)),r=Ve(ri(e)),o=kN(n),c=z(yv(t.Applicative0()));return function(l){var u=function(v){if(v instanceof dg)return f(_)(function(h){return r(dE(v.value0)(fg(h)))});if(v instanceof vg)return f(_)(function(h){return o(r(lg(h)(v.value0)))(function(){return c(v.value1)})});if(v instanceof mg)return f(_)(function(h){return r(dE(v.value0)(_g(h)))});if(v instanceof hg)return f(_)(function(h){return o(r(pg(h)(v.value0)))(function(){return c(v.value1)})});throw new Error("Failed pattern match at Halogen.Terminal.Free.Options (line 19, column 5 - line 21, column 49): "+[v.constructor.name])};return BN(Yu(l))(u)}};var hE=wf(mE(),1),np=()=>new hE.FitAddon;var DE=wf(gE(),1),op=()=>new DE.WebglAddon;var yE=wf(CE(),1),up=()=>new yE.WebLinksAddon;var bE={addon:Q},SE={addon:Q},wE={addon:le(ve)};var cp=function(e){return e.addon};var yg=e=>e.active,bg=e=>e.normal,Sg=e=>e.alternate;var FE=wf(ME(),1),LE=e=>t=>()=>new FE.Terminal(e,t),AE=e=>()=>e.element,xE=e=>()=>e.textarea,Tg=e=>()=>e.rows,Eg=e=>()=>e.cols,pf=e=>e.buffer,Mg=e=>()=>e.markers;var Fg=e=>e.options,Lg=e=>t=>()=>e.onBell(t),Ag=e=>t=>()=>e.onBinary(n=>t(n)());var xg=e=>t=>()=>e.onData(n=>t(n)()),Ig=e=>t=>()=>e.onKey(n=>t(n)()),Rg=e=>t=>()=>e.onLineFeed(t),Pg=e=>t=>()=>e.onRender(n=>t(n)()),Hg=e=>t=>()=>e.onWriteParsed(t),Og=e=>t=>()=>e.onResize(n=>t(n)()),kg=e=>t=>()=>e.onScroll(n=>t(n)()),Ng=e=>t=>()=>e.onSelectionChange(t),Bg=e=>t=>()=>e.onTitleChange(n=>t(n)());var Wg=e=>t=>()=>e.open(t);var $g=e=>t=>n=>()=>e.write(t,n),qg=e=>t=>n=>()=>e.writeln(t,n);var IE=e=>t=>()=>e.loadAddon(t);var RE=$(Ae);var PE=function(){var e=RE(Ec);return function(t){return e(xE(t))}}();var HE=function(e){return function(t){return LE(_u(e))(_u(t))}},OE=function(e){var t=cp(e);return function(n){return function(f){return IE(n)(t(f))}}};var kE=function(){var e=RE(Ec);return function(t){return e(AE(t))}}();var fp=$(au),rD=le(ve),wo=$(Ae),Vg=fE(Dl)($f),BE=ht(gt),lp=vs(Dy),r3=OE(wE),_p=Y(ka),zg=BE(ka),Mc=Yt(Jn),Gg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Kg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Zg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),eD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),dp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),n3={map:function(e){return function(t){if(t instanceof Gg)return new Gg(fp(e)(t.value0));if(t instanceof jg)return new jg(function(n){return e(t.value0(n))});if(t instanceof Qg)return new Qg(function(n){return e(t.value0(n))});if(t instanceof Jg)return new Jg(function(n){return e(t.value0(n))});if(t instanceof Kg)return new Kg(function(n){return e(t.value0(n))});if(t instanceof Xg)return new Xg(fp(e)(t.value0));if(t instanceof Yg)return new Yg(fp(e)(t.value0));if(t instanceof Zg)return new Zg(fp(e)(t.value0));if(t instanceof eD)return new eD(function(n){return e(t.value0(n))});if(t instanceof pp)return new pp(t.value0,e(t.value1));if(t instanceof dp)return new dp(t.value0,e(t.value1));if(t instanceof tD)return new tD(function(n){return e(t.value0(n))});if(t instanceof vp)return new vp(function(n){return e(t.value0(n))});if(t instanceof mp)return new mp(function(n){return e(t.value0(n))});if(t instanceof hp)return new hp(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},a3=Oa(n3),Ci=function(e){return Lt(new dp(e,void 0))},NE=function(e){return Lt(new pp(e,void 0))};var o3=function(){return Lt(new vp(rD))}(),i3=function(){return Lt(new mp(rD))}();var WE=function(e){var t=e.MonadEffect0(),n=t.Monad0(),f=ji(n.Bind1()),_=Y(f),r=un(Xu(n)),o=ri(t),c=vE(o),l=Ve(o),u=Mr(mS(e)),v=BE(f);return function(h){var g=Yu(h),d=c(g),a=function(i){if(i instanceof Gg)return _(r)(function(s){return ti(d(i.value0))(Fg(s))});if(i instanceof jg)return _(r)(function(s){return l(wo(i.value0)(kE(s)))});if(i instanceof Qg)return _(r)(function(s){return l(wo(i.value0)(PE(s)))});if(i instanceof Jg)return _(r)(function(s){return l(wo(i.value0)(Tg(s)))});if(i instanceof Kg)return _(r)(function(s){return l(wo(i.value0)(Eg(s)))});if(i instanceof Xg)return _(r)(function(s){return l(ti(Vg(i.value0))(yg(pf(s))))});if(i instanceof Yg)return _(r)(function(s){return l(ti(Vg(i.value0))(bg(pf(s))))});if(i instanceof Zg)return _(r)(function(s){return l(ti(Vg(i.value0))(Sg(pf(s))))});if(i instanceof eD)return _(r)(function(s){return l(wo(i.value0)(Mg(s)))});if(i instanceof pp)return _(r)(function(s){return _(u(vh))(function(p){return v(l($g(s)(i.value0)(Ev(af(i.value1)(p)))))(function(){return u(dh(p))})})});if(i instanceof dp)return _(r)(function(s){return _(u(vh))(function(p){return v(l(qg(s)(i.value0)(Ev(af(i.value1)(p)))))(function(){return u(dh(p))})})});if(i instanceof tD)return l(wo(function(s){return i.value0(Of(s))})(lp(np)));if(i instanceof vp)return l(wo(function(s){return i.value0(Of(s))})(lp(up)));if(i instanceof mp)return l(wo(function(s){return i.value0(Of(s))})(lp(op)));if(i instanceof hp)return _(r)(function(s){return l(wo(function(p){return i.value1(hC(p))})(lp(r3(s)(i.value0))))});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 32, column 5 - line 34, column 55): "+[i.constructor.name])};return a3(g)(a)}};var $E=function(e){var t=cp(e);return function(n){return Lt(new hp(t(n),rD))}},u3=$E(SE),c3=$E(bE),qE=function(e){return _p(i3)(function(t){return zg(function(){if(t instanceof N)return Mc(e)(Ci("WebGL Addon unavailable"));if(t instanceof O)return zg(Mc(e)(NE("Loading WebGL ")))(function(){return _p(u3(t.value0))(function(n){return Mc(e)(function(){return Ci(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return _p(o3)(function(n){if(n instanceof N)return Mc(e)(Ci("WebLinks Addon unavailable"));if(n instanceof O)return zg(Mc(e)(NE("Loading WebLinks ")))(function(){return _p(c3(n.value0))(function(f){return Mc(e)(function(){return Ci(f?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var VE=e=>()=>e.dispose();var zE={toDisposable:le(ve)},f3=function(e){return e.toDisposable},GE=function(e){return{dispose:function(){var t=f3(e);return function(n){return VE(t(n))}}()}},jE=function(e){return e.dispose};var ft=Y(zr),nD=xa(fr),_3=$(Dn),p3=WE(ws)(rc),ma=Pr(fr),ha=ht(gt)(zr),d3=ct(Rt)(St),v3=jE(GE(zE)),m3=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),h3=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),g3=function(){function e(){}return e.value=new e,e}(),D3=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),C3=function(){function e(){}return e.value=new e,e}(),y3=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),b3=function(){function e(){}return e.value=new e,e}(),S3=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),w3=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),T3=function(){function e(){}return e.value=new e,e}(),E3=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),QE=function(){function e(){}return e.value=new e,e}(),JE=function(){function e(){}return e.value=new e,e}(),Zn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),M3=function(e){return function(t){return da([uT(oE),Or([vc("terminal")])([])])}},F3=function(e){var t=Mr(di(e));return function(n){return ft(nD)(function(f){return t(_3(O.create)(ti(p3(n))(f.terminal)))})}},L3=function(e){var t=Ve(Xn(e.MonadEffect0())),n=function(d){return ft(t(Dr))(function(a){return ft(t(Hg(d)(gr(a.listener)(new Zn(b3.value)))))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})},f=function(d){return ft(t(Dr))(function(a){return ft(t(Bg(d)(function(){var i=gr(a.listener);return function(s){return i(Zn.create(E3.create(s)))}}())))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})},_=function(d){return ft(t(Dr))(function(a){return ft(t(Ng(d)(gr(a.listener)(new Zn(T3.value)))))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})},r=function(d){return ft(t(Dr))(function(a){return ft(t(kg(d)(function(){var i=gr(a.listener);return function(s){return i(Zn.create(w3.create(s)))}}())))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})},o=function(d){return ft(t(Dr))(function(a){return ft(t(Og(d)(function(){var i=gr(a.listener);return function(s){return i(Zn.create(S3.create(s)))}}())))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})},c=function(d){return ft(t(Dr))(function(a){return ft(t(Pg(d)(function(){var i=gr(a.listener);return function(s){return i(Zn.create(y3.create(s)))}}())))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})},l=function(d){return ft(t(Dr))(function(a){return ft(t(Rg(d)(gr(a.listener)(new Zn(C3.value)))))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})},u=function(d){return ft(t(Dr))(function(a){return ft(t(Ig(d)(function(){var i=gr(a.listener);return function(s){return i(Zn.create(D3.create(s)))}}())))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})},v=function(d){return ft(t(Dr))(function(a){return ft(t(xg(d)(function(){var i=gr(a.listener);return function(s){return i(Zn.create(m3.create(s)))}}())))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})},h=function(d){return ft(t(Dr))(function(a){return ft(t(Ag(d)(function(){var i=gr(a.listener);return function(s){return i(Zn.create(h3.create(s)))}}())))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})},g=function(d){return ft(t(Dr))(function(a){return ft(t(Lg(d)(gr(a.listener)(new Zn(g3.value)))))(function(i){return ft(rr(a.emitter))(function(){return ma(function(s){var p={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(p[D]=s[D]);return p.disposables=br(i)(s.disposables),p})})})})};return function(d){if(d instanceof QE)return ft(Rn("terminal"))(function(a){if(a instanceof N)return t(js("no terminal element"));if(a instanceof O)return ft(nD)(function(i){return ha(t(Wg(i.terminal)(a.value0)))(function(){return ha(g(i.terminal))(function(){return ha(h(i.terminal))(function(){return ha(u(i.terminal))(function(){return ha(l(i.terminal))(function(){return ha(c(i.terminal))(function(){return ha(n(i.terminal))(function(){return ha(o(i.terminal))(function(){return ha(r(i.terminal))(function(){return ha(_(i.terminal))(function(){return ha(f(i.terminal))(function(){return v(i.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.Terminal (line 73, column 5 - line 88, column 28): "+[a.constructor.name])});if(d instanceof JE)return ft(nD)(function(a){return t(d3(v3)(a.disposables))});if(d instanceof Zn)return Kn(d.value0);throw new Error("Failed pattern match at Halogen.Terminal (line 70, column 16 - line 92, column 23): "+[d.constructor.name])}},KE=function(e){return Hn({initialState:function(t){return{terminal:t,disposables:[]}},render:M3(e),eval:Pn({receive:Cr.receive,handleAction:L3(e),handleQuery:F3(e),initialize:new O(QE.value),finalize:new O(JE.value)})})};var x3=ce(It),XE=Cc(),YE={reflectSymbol:function(){return"terminal"}},I3=XE(YE)(ja),R3=$(dt),ZE={reflectSymbol:function(){return"process"}},P3=XE(ZE)(_f),H3=Gi($n),eM=mv(uu),aD=Y(eM),gp=pt(Ll)(uu),O3=pi()(YE)(ja),tM=z(Fr),k3=$(fn),N3=pt(m_),Dp=xa(fr),hu=z(gv(uu)),rM=ht(gt),df=rM(eM),nM=Vb(fr),oD=Pr(nM),B3=Vn(nM),W3=cn(_f),$3=En(Nh),q3=ea(Nh),U3=jn(_f),V3=sf()(ZE)(_f),z3=Ub(Gs),vf=Y(zr),G3=ce(u1),j3=Je(c1),Q3=rM(zr),J3=Pr(fr),iD=ot(fn),K3=$(it),X3=z(J1),aM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),oM=function(){function e(){}return e.value=new e,e}(),iM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cM=function(){return Ht.value}(),sM=function(){return Ht.value}(),Y3=function(e){var t=KE(e);return function(n){return da(x3([function(){if(n.terminal instanceof N)return da([]);if(n.terminal instanceof O)return I3(cM)(void 0)(t)(n.terminal.value0)(iM.create);throw new Error("Failed pattern match at Halogen.Shell (line 69, column 8 - line 71, column 80): "+[n.terminal.constructor.name])}()])(R3(function(f){return P3(sM)(f.value0)(f.value1.value0)(f.value1.value1)(uM.create)})(H3(n.processes))))}},fM=function(e){var t=e.MonadEffect0().Monad0(),n=N3(t),f=Oa(Q1(t.Bind1().Apply0().Functor0()))(z3);return function(_){var r=function(o){if(o instanceof lf)return aD(gp(O3(cM)(void 0)(o.value0)))(function(l){return tM(l)});if(o instanceof j_)return k3(O.create)(n(o.value0));if(o instanceof Q_)return aD(gp(Dp))(function(l){return hu(o.value0(l.shell.shell))});if(o instanceof J_)return df(oD(function(l){var u={};for(var v in l)({}).hasOwnProperty.call(l,v)&&(u[v]=l[v]);return u.shell=function(){var h={};for(var g in l.shell)({}).hasOwnProperty.call(l.shell,g)&&(h[g]=l.shell[g]);return h.shell=o.value0,h}(),u}))(function(){return hu(o.value1)});if(o instanceof K_)return df(oD(function(l){var u={};for(var v in l)({}).hasOwnProperty.call(l,v)&&(u[v]=l[v]);return u.interpreter=o.value0,u}))(function(){return hu(o.value1)});if(o instanceof X_)return df(gp(Kn(o.value0)))(function(){return hu(o.value1)});if(o instanceof Y_){var c=function(l){return Ge(0)(function(u){return u.key})(Pa(l))};return aD(B3(function(l){var u={};for(var v in l)({}).hasOwnProperty.call(l,v)&&(u[v]=l[v]);return u.processes=W3($3(q3)(c(l.processes)))(new K(o.value0,o.value1))(l.processes),u}))(function(l){return hu(o.value2(c(l.processes)))})}if(o instanceof Z_)return df(oD(function(l){var u={};for(var v in l)({}).hasOwnProperty.call(l,v)&&(u[v]=l[v]);return u.processes=U3(o.value0)(l.processes),u}))(function(){return hu(o.value1)});if(o instanceof ep)return df(gp(V3(sM)(o.value0)(j1.create(o.value1))))(function(){return hu(o.value2)});throw new Error("Failed pattern match at Halogen.Shell (line 111, column 5 - line 113, column 22): "+[o.constructor.name])};return qb(f(r)(_))}},Z3=function(e){var t=Ve(Xn(e.MonadEffect0())),n=fM(e);return function(f){if(f instanceof oM)return vf(t(HE(G3(of(lE)('"Cascadia Code", Menlo, monospace'))(of(_E)(!0)))(j3)))(function(_){return Q3(J3(function(r){var o={};for(var c in r)({}).hasOwnProperty.call(r,c)&&(o[c]=r[c]);return o.terminal=new O(_),o}))(function(){return vf(Dp)(function(r){return iD(n(r.shell.init))})})});if(f instanceof iM)return vf(Dp)(function(_){return iD(n(_.interpreter(f.value0)))});if(f instanceof uM)return iD(n(f.value0));throw new Error("Failed pattern match at Halogen.Shell (line 80, column 16 - line 91, column 51): "+[f.constructor.name])}},eB=function(e){var t=fM(e);return function(n){return vf(Dp)(function(f){return vf(t(f.shell.query(n.value0)))(function(_){return tM(K3(n.value1)(_))})})}},lM=function(e){return Hn({initialState:function(t){return{shell:t,interpreter:ge(X3(void 0)),terminal:N.value,processes:mr}},render:Y3(e),eval:Pn({receive:Cr.receive,finalize:Cr.finalize,handleAction:Z3(e),handleQuery:eB(e),initialize:new O(oM.value)})})};var Cp={suspend:tS,fork:Tv,join:bs,Monad0:function(){return Ha},Functor1:function(){return uS}};var yp=function(e){return e.fork};var pM=Q,ga=Q,dM=function(e){var t=ct(e)(Ot);return function(n){return ga(function(f){return t(n)(f.rendering)})}},rB=Q,vM=function(e){return function(t){return ga(function(n){return rB(t(n.rendering))})}},nB=Q,bp=function(e){return function(t){return e(t)}},mM=function(e){return function(t){return function(n){return function(f){return function(){var r=Pt({})(),o=Pt(nc)(),c=Pt(nc)(),l=Pt(n)(),u=Pt(new O(Oe.value))(),v=Pt(new O(Oe.value))(),h=Pt(N.value)(),g=Pt(1)(),d=Pt(new O(mr))(),a=Pt(mr)(),i={component:e,state:e.initialState(t),refs:mr,children:nc,childrenIn:o,childrenOut:c,selfRef:r,handlerRef:l,pendingQueries:u,pendingOuts:v,pendingHandlers:h,rendering:N.value,fresh:g,subscriptions:d,forks:a,lifecycleHandlers:f};return bt(i)(r)(),nB(r)}}}}};var aB=ct(Rt)(Ot),oB=Gt(en),iB=Zo(km),jt=Y(qt),Et=Ve(hr),uB=ht(gt),Da=uB(qt),bM=ct(Cn),cB=bM(Tr),SM=yp(Cp),sB=Ds(Ki)(ec)(Tr),qa=z(Cn),fB=$(Bv),hM=lo(Ki),lB=$(Dn),gM=Ji(Ki),_B=$(it),pB=cn(km),dB=hw(ec),vB=jn(v_),mB=GD(wa),hB=cn(v_),DM=bM(Ot),CM=Zo(v_),gB=Zo(Zt),DB=Rw(rc),CB=ei(Zt),yB=function(e){return function(t){return function(){var f=xe(t)(),_=xe(f.subscriptions)();return aB(s_)(oB(iB(e))(_))()}}},Sp=function(e){return function(t){return jt(Et(xe(e)))(function(n){if(n instanceof N)return t;if(n instanceof O)return Et(bt(new O(new ke(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},wp=function(e){return function(t){return Da(Et(bt({initializers:Oe.value,finalizers:Oe.value})(e)))(function(){return jt(Et(t))(function(n){return jt(Et(xe(e)))(function(f){return Da(cB(SM)(f.finalizers))(function(){return Da(sB(f.initializers))(function(){return qa(n)})})})})})}},gu=Ol(Br(oo)(ge(z(Rt)(void 0)))),yM=function(e){return function(t){return jt(Et(xe(t)))(function(n){return Et(qp(function(f){return{state:f+1|0,value:e(f)}})(n.fresh))})}},cD=function(e){return function(t){return function(n){return jt(Et(xe(t)))(function(f){return yi(e)(t)(f.component.eval(new _c(fB(O.create)(LS(n)),ge(N.value))))})}}},yi=function(e){return function(t){return function(n){var f=function(r){return function(o){return jt(Et(xe(r)))(function(c){return Hw(function(l){var u=function(v){return hM(jt(Et(xe(v)))(function(h){return ga(function(g){return cD(e)(g.selfRef)(l.value1)})(h)}))};return lB(l.value2)(gM(l.value0(ec)(u)(c.children)))})(o)})}},_=function(r){return function(o){if(o instanceof Ws)return jt(Et(xe(r)))(function(c){var l=o.value0(c.state);if(ic(c.state)(l.value1))return qa(l.value0);if(or)return Da(Et(bt({component:c.component,refs:c.refs,children:c.children,childrenIn:c.childrenIn,childrenOut:c.childrenOut,selfRef:c.selfRef,handlerRef:c.handlerRef,pendingQueries:c.pendingQueries,pendingOuts:c.pendingOuts,pendingHandlers:c.pendingHandlers,rendering:c.rendering,fresh:c.fresh,subscriptions:c.subscriptions,forks:c.forks,lifecycleHandlers:c.lifecycleHandlers,state:l.value1})(r)))(function(){return Da(wp(c.lifecycleHandlers)(e(c.lifecycleHandlers)(r)))(function(){return qa(l.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[l.constructor.name])});if(o instanceof $s)return jt(yM(Ww)(r))(function(c){return jt(Et(Nw(o.value0(c))(function(l){return gu(sD(e)(r)(new Yi(l)))})))(function(l){return jt(Et(xe(r)))(function(u){return Da(Et(tn(_B(pB(c)(l)))(u.subscriptions)))(function(){return qa(o.value1(c))})})})});if(o instanceof qs)return Da(Et(yB(o.value0)(r)))(function(){return qa(o.value1)});if(o instanceof iu)return o.value0;if(o instanceof Us)return f(r)(o.value0);if(o instanceof Vs)return jt(Et(xe(r)))(function(c){return jt(Et(xe(c.handlerRef)))(function(l){return Da(Sp(c.pendingOuts)(l(o.value0)))(function(){return qa(o.value1)})})});if(o instanceof f_)return gM(dB(Lm(function(){var c=yi(e)(r);return function(l){return hM(c(l))}}())(o.value0)));if(o instanceof l_)return jt(yM($w)(r))(function(c){return jt(Et(xe(r)))(function(l){return jt(Et(Pt(!1)))(function(u){return jt(SM(ys(Et(function(){return tn(vB(c))(l.forks)(),bt(!0)(u)()}))(yi(e)(r)(o.value0))))(function(v){return Da(Et(mB(xe(u))(tn(hB(c)(v))(l.forks))))(function(){return qa(o.value1(c))})})})})});if(o instanceof __)return jt(Et(xe(r)))(function(c){return jt(Et(xe(c.forks)))(function(l){return Da(DM(bs)(CM(o.value0)(l)))(function(){return qa(o.value1)})})});if(o instanceof p_)return jt(Et(xe(r)))(function(c){return jt(Et(xe(c.forks)))(function(l){return Da(DM(Ss(sa("Cancelled")))(CM(o.value0)(l)))(function(){return qa(o.value1)})})});if(o instanceof zs)return jt(Et(xe(r)))(function(c){return qa(o.value1(gB(o.value0)(c.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[o.constructor.name])}};return DB(_(t))(n)}}},sD=function(e){return function(t){return function(n){if(n instanceof Ul)return Et(We(tn)(t)(bp(function(f){return{component:f.component,state:f.state,children:f.children,childrenIn:f.childrenIn,childrenOut:f.childrenOut,selfRef:f.selfRef,handlerRef:f.handlerRef,pendingQueries:f.pendingQueries,pendingOuts:f.pendingOuts,pendingHandlers:f.pendingHandlers,rendering:f.rendering,fresh:f.fresh,subscriptions:f.subscriptions,forks:f.forks,lifecycleHandlers:f.lifecycleHandlers,refs:CB(ge(n.value1))(n.value0)(f.refs)}})));if(n instanceof Yi)return jt(Et(xe(t)))(function(f){return yi(e)(t)(f.component.eval(new lc(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var SB=Y(Mn),wB=ht(gt),AM=jf(Rt)(Ot),xM=ct(Cn)(Tr),IM=yp(Cp),hf=Gt(Mn),RM=ct(Rt),PM=RM(Ot),wM=RM(co),TM=wB(qt),TB=Ds(Ki)(ec)(Tr),mf=Ve(hr),EM=z(Rt),fD=$(Ae),lD=z(Cn),_D=Yt(Rt),EB=vM(Ae),MB=ot(Dn),MM=PS(Rt),FB=dM(Rt),LB=kt($f),AB=Cu(Ae),pD=Y(qt),xB=Ve(Dl),FM=function(){return Pt({initializers:Oe.value,finalizers:Oe.value})}(),LM=function(e){return function(){var n=xe(e)();return bt(N.value)(e)(),AM(n)(function(){var f=xM(IM);return function(_){return gu(f(so(_)))}}())()}},IB=function(e){return function(){return hf(PM(wM(s_)))(xe(e.subscriptions))(),bt(N.value)(e.subscriptions)(),hf(wM(function(){var n=Ss(sa("finalized"));return function(f){return gu(n(f))}}()))(xe(e.forks))(),bt(mr)(e.forks)()}},HM=function(e){return function(t){return function(n){var f=function(v){return function(h){return ga(function(g){var d=yi(o)(g.selfRef)(g.component.eval(new cc(void 0)));return tn(function(a){return{initializers:new ke(TM(TB(so(a.initializers)))(function(){return TM(d)(function(){return mf(function(){return LM(g.pendingQueries)(),LM(g.pendingOuts)()})})}),h),finalizers:a.finalizers}})(v)})}},_=function(v){return function(h){return function(g){return qm(function(d){return function(){var i=FM(),s=mM(d)(g)(h)(i)(),p=xe(v)();return bt({initializers:Oe.value,finalizers:p.finalizers})(v)(),hf(ga(function(){var D=o(v);return function(C){return D(function(b){return b.selfRef}(C))}}()))(xe(s))(),hf(f(v)(p.initializers))(xe(s))(),s}})}}},r=function(v){return function(h){return function(g){return function(d){return $m(function(a){return function(){var s=fD(a.pop)(xe(g))(),p=function(){if(s instanceof O){bt(s.value0.value1)(g)();var C=xe(s.value0.value0)();return ga(function(b){return function(){return We(bt)(b.handlerRef)(function(){var m=Ge(lD(void 0))(h);return function(y){return m(a.output(y))}}())(),gu(yi(o)(b.selfRef)(b.component.eval(new fc(a.input,void 0))))()}})(C)(),s.value0.value0}if(s instanceof N)return _(v)(function(){var b=Ge(lD(void 0))(h);return function(w){return b(a.output(w))}}())(a.input)(a.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[s.constructor.name])}(),D=fD(function(C){return Ei(a.get(C))})(xe(d))();return _D(D)(C_("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),tn(a.set(p))(d)(),SB(xe(p))(EB(function(C){if(C instanceof N)return Wd("Halogen internal error: child was not initialized in renderChild");if(C instanceof O)return EM(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},o=function(v){return function(h){return function(){var d=xe(h)(),a=fD(Io)(xe(d.pendingHandlers))();_D(a)(bt(new O(Oe.value))(d.pendingHandlers))(),bt(nc)(d.childrenOut)(),bt(d.children)(d.childrenIn)();var i=function(){var b=Sp(d.pendingHandlers),w=sD(o)(d.selfRef);return function(m){return b(MB(w(m)))}}(),s=function(){var b=Sp(d.pendingQueries);return function(w){return b(i(Yi.create(w)))}}(),p=e.render(function(b){return gu(i(b))})(r(v)(s)(d.childrenIn)(d.childrenOut))(d.component.render(d.state))(d.rendering)(),D=xe(d.childrenOut)(),C=xe(d.childrenIn)();return MM(C)(function(b){return function(){var m=xe(b)();return FB(e.removeChild)(m)(),c(v)(m)()}})(),We(tn)(d.selfRef)(bp(function(b){return{component:b.component,state:b.state,refs:b.refs,childrenIn:b.childrenIn,childrenOut:b.childrenOut,selfRef:b.selfRef,handlerRef:b.handlerRef,pendingQueries:b.pendingQueries,pendingOuts:b.pendingOuts,pendingHandlers:b.pendingHandlers,fresh:b.fresh,subscriptions:b.subscriptions,forks:b.forks,lifecycleHandlers:b.lifecycleHandlers,rendering:new O(p),children:D}}))(),_D(a)(We(LB)(void 0)(function(b){return function(){var m=xe(d.pendingHandlers)();bt(new O(Oe.value))(d.pendingHandlers)(),PM(function(){var S=xM(IM);return function(T){return gu(S(so(T)))}}())(m)();var y=xe(d.pendingHandlers)(),M=Ge(!1)(wb)(y);return M?AB(bt(N.value)(d.pendingHandlers))(new Dt(void 0))():new vt(void 0)}}))()}}},c=function(v){return ga(function(h){return function(){IB(h)();var d=yi(o)(h.selfRef)(h.component.eval(new sc(void 0)));return tn(function(a){return{initializers:a.initializers,finalizers:new ke(d,a.finalizers)}})(v)(),MM(h.children)(function(a){return function(){var s=xe(a)();return c(v)(s)()}})()}})},l=function(v){return function(h){return function(g){return pD(mf(xe(v)))(function(d){return d?lD(N.value):cD(o)(h)(g)})}}},u=function(v){return function(h){return function(g){return wp(h)(function(){var a=xe(v)();return a?void 0:(bt(!0)(v)(),c(h)(g)(),ga(function(i){return function(){var p=xB(xe(i.selfRef))();return AM(p.rendering)(e.dispose)()}})(g)())})}}};return pD(mf(FM))(function(v){return pD(mf(Pt(!1)))(function(h){return wp(v)(function(){var d=Dr(),a=hf(xe)(_(v)(function(){var i=gr(d.listener);return function(s){return mf(i(s))}}())(n)(t))();return ga(function(i){return EM({query:l(h)(i.selfRef),messages:d.emitter,dispose:u(h)(v)(a)})})(a)()})})})}}};var Ca=function(e){return function(t){return function(){return t[e]}}};var PB=Ca("baseURI"),HB=Ca("ownerDocument"),OM=Ca("parentNode"),OB=Ca("parentElement");var kB=Ca("childNodes"),NB=Ca("firstChild"),BB=Ca("lastChild"),WB=Ca("previousSibling"),kM=Ca("nextSibling"),$B=Ca("nodeValue");var qB=Ca("textContent");function dD(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function Tp(e){return function(t){return function(){t.appendChild(e)}}}function vD(e){return function(t){return function(){t.removeChild(e)}}}var NM=$(Ae);var mD=function(){var e=NM(Wt);return function(t){return e(OM(t))}}();var BM=function(){var e=NM(Wt);return function(t){return e(kM(t))}}();var hD=function(e,t,n){var f=0,_;return function(r){if(f===2)return _;if(f===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return f=1,_=n(),f=2,_}},gD=ot(Ae),jB=z(Rt),QB=ct(Rt)(Ot),JB=cr(),KB=Yt(Rt),XB=oa(Gc(Gc(aa))),YB=le(ve),ZB=Y(qt),eW=Ve(hr),tW=$(Ae),rW=Gt(Mn);var nW=function(e){return function(t){return function(n){return t instanceof O&&n instanceof O?gD(dD(e)(t.value0)(n.value0)):t instanceof N&&n instanceof O?gD(Tp(e)(n.value0)):jB(void 0)}}},WM=function(e){return function(){var n=mD(e.node)();return QB(function(f){return vD(e.node)(f)})(n)()}},aW=function(e){return function(t){return function(n){var f=pM(function(c){return c.node}),_=function(c){return c instanceof O?bn(c.value0):void 0},r=function(c){var l=Uw(JB)(c),u=hD("patch","Halogen.VDom.Driver",function(){return function(i,s){if(i instanceof O){if(s instanceof pc)return bn(i.value0),h(100)(s.value0);if(s instanceof D_){var p=yn(i.value0,s.value0);return zt(new Vt(Hr(p),new O(p),u(103),_))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[s.constructor.name])}return v(104)(s)}}),v=hD("render","Halogen.VDom.Driver",function(){return function(i){if(i instanceof pc)return h(86)(i.value0);if(i instanceof D_){var s=l(i.value0);return zt(new Vt(Hr(s),new O(s),u(89),_))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[i.constructor.name])}}),h=hD("renderComponentSlot","Halogen.VDom.Driver",function(){return function(i){var s=xe(t)(),p=s(i)(),D=f(p);return zt(new Vt(D,N.value,u(117),_))}}),g=u(91),d=v(82),a=h(109);return d},o=tw(e);return{buildWidget:r,buildAttributes:o,document:n}}}},oW=function(e){return function(t){var n=function(f){return function(_){return function(r){return function(o){if(o instanceof N)return function(){var l=Pt(_)(),u=aW(f)(l)(e),v=Hs(u)(r),h=Hr(v);return gD(Tp(h)(AT(t)))(),{machine:v,node:h,renderChildRef:l}};if(o instanceof O)return function(){bt(_)(o.value0.renderChildRef)();var l=mD(o.value0.node)(),u=BM(o.value0.node)(),v=yn(o.value0.machine,r),h=Hr(v);return KB(XB(ic)(o.value0.node)(h))(nW(h)(u)(l))(),{machine:v,node:h,renderChildRef:o.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[o.constructor.name])}}}};return{render:n,renderChild:YB,removeChild:WM,dispose:WM}}},$M=function(e){return function(t){return function(n){return ZB(eW(tW(ET)(rW(Dc)(fu))))(function(f){return HM(oW(f)(n))(e)(t)})}}};var wD=le(ve),To=Y(zr),uW=Vn(fr),Fc=ot(fn),VM=pi(),zM={reflectSymbol:function(){return"shell"}},gf=VM(zM)(ja),DD=Aa(fr),GM=ht(gt),Lc=GM(zr),CD=Pr(fr),jM={reflectSymbol:function(){return"feed"}},yD=VM(jM)(Oc),qM=ct(Fr)(Ot),bD=ye(pn),cW=Yt(Fr),sW=ye(Mu(ra)),fW=ki(Mb),lW=ye(Hf(pn)),Df=GM(Jo),_W=Cc()(jM)(Oc),pW=G1(nh)(yT(ws)),dW=F_()(zM)(ja),vW=lM(ws),SD=Ys(cw),mW=ot(Dn),QM=function(){function e(){}return e.value=new e,e}(),TD=function(){function e(){}return e.value=new e,e}(),JM=function(){function e(){}return e.value=new e,e}(),UM=function(){function e(){}return e.value=new e,e}(),KM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cf=function(e){return new aM(e,wD)},Ac=function(){return Ht.value}(),Ep=function(){return Ht.value}(),XM=function(e){var t=Ve(Xn(e));return function(n){if(n instanceof QM)return To(uW(function(f){var _={};for(var r in f)({}).hasOwnProperty.call(f,r)&&(_[r]=f[r]);return _.top=!f.top,_}))(function(f){var _=function(){return f.top?"top loading/unloading enabled":"top loading/unloading disabled"}();return Fc(gf(Ac)(void 0)(Cf(_)))});if(n instanceof TD)return To(DD(function(f){return f.log}))(function(f){if(f instanceof O)return Lc(CD(function(_){var r={};for(var o in _)({}).hasOwnProperty.call(_,o)&&(r[o]=_[o]);return r.log=N.value,r}))(function(){return Lc(d_(f.value0.value0))(function(){return t(CS(f.value0.value1))})});if(f instanceof N)return To(t(Dr))(function(_){return To(t(DS(200)(gr(_.listener)(UM.value))))(function(r){return To(rr(_.emitter))(function(o){return CD(function(c){var l={};for(var u in c)({}).hasOwnProperty.call(c,u)&&(l[u]=c[u]);return l.log=new O(new K(o,r)),l})})})});throw new Error("Failed pattern match at Example (line 87, column 10 - line 96, column 60): "+[f.constructor.name])});if(n instanceof JM)return CD(function(f){var _={};for(var r in f)({}).hasOwnProperty.call(f,r)&&(_[r]=f[r]);return _.up=!f.up,_});if(n instanceof UM)return To(DD(function(f){return f.top}))(function(f){return To(yD(Ep)(f)(new z_(wD)))(function(_){return To(DD(function(r){return r.up}))(function(r){return We(qM)(_)(function(o){var c=function(){return r?-99:99}();return Lc(Fc(yD(Ep)(f)(new kh(c,void 0))))(function(){return To(yD(Ep)(f)(new z_(wD)))(function(l){return We(qM)(l)(function(u){return Lc(Fc(gf(Ac)(void 0)(Cf("scroll: "+(bD(o)+("+="+bD(c)))))))(function(){return cW(u!==o+c)(Lc(Fc(gf(Ac)(void 0)(Cf("scroll offset error"+bD(u)))))(function(){return XM(e)(TD.value)}))})})})})})})})});if(n instanceof KM)return Lc(Fc(gf(Ac)(void 0)(Cf("pages: "+sW(fW(Lb(n.value0.pages)))))))(function(){return Fc(gf(Ac)(void 0)(Cf("adjust: "+lW(n.value0.update.scroll))))});throw new Error("Failed pattern match at Example (line 80, column 3 - line 113, column 84): "+[n.constructor.name])}},hW=function(e){var t={init:Bh(qE(!1)),query:function(n){return Bh(Ci(n))},shell:void 0};return Or([wn(Df(Gu(Ny))(function(){return qy($y)}))])([Or([wn(Df(zn(Xe(10)))(function(){return Df(uo(Xe(10)))(function(){return Df(io(Xe(400)))(function(){return Df(_a(Xe(1200)))(function(){return Py(Bi)})})})}))])([_W(Ep)(e.top)(pW)(function(){var n=V1(150);return{initialElement:n.initialElement,pageSize:n.pageSize,hiddenPages:n.hiddenPages,preloadedPages:n.preloadedPages,preloadMillis:n.preloadMillis,enableTop:e.top,debounce:0,deadZone:1}}())(KM.create)]),da([dW(Ac)(void 0)(vW)(t),da([Xs([SD("type")(ju.value),A_(ge(QM.value))]),go("enable top loading/unloading")]),da([Xs([SD("type")(ju.value),A_(ge(TD.value))]),go("enable automatic scrolling")]),da([Xs([SD("type")(ju.value),A_(ge(JM.value))]),go("auto scroll up")])])])},gW=function(){return Hn({initialState:ge({top:!1,up:!1,log:N.value}),render:hW,eval:Pn({handleQuery:Cr.handleQuery,receive:Cr.receive,initialize:Cr.initialize,finalize:Cr.finalize,handleAction:XM(hr)})})}(),YM=$T(Y(qt)(qT)(function(e){return mW($M(gW)(void 0)(e))}));YM();
</script>
  </body>
</html>
