<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>infinite scroll test</title>
  </head>
  <body>
   <script>var RM=Object.create;var Zg=Object.defineProperty;var PM=Object.getOwnPropertyDescriptor;var HM=Object.getOwnPropertyNames;var OM=Object.getPrototypeOf,kM=Object.prototype.hasOwnProperty;var _f=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var NM=(e,t,n,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let p of HM(t))!kM.call(e,p)&&p!==n&&Zg(e,p,{get:()=>t[p],enumerable:!(l=PM(t,p))||l.enumerable});return e};var pf=(e,t,n)=>(n=e!=null?RM(OM(e)):{},NM(t||!e||!e.__esModule?Zg(n,"default",{value:e,enumerable:!0}):n,e));var U1=_f((q_,Kh)=>{(function(e,t){typeof q_=="object"&&typeof Kh=="object"?Kh.exports=t():typeof define=="function"&&define.amd?define([],t):typeof q_=="object"?q_.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let l=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(l._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,l=n._renderService.dimensions;if(l.css.cell.width===0||l.css.cell.height===0)return;let p=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(r.getPropertyValue("height")),c=Math.max(0,parseInt(r.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),u=o-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),v=c-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-p;return{cols:Math.max(2,Math.floor(v/l.css.cell.width)),rows:Math.max(1,Math.floor(u/l.css.cell.height))}}}})(),e})())});var z1=_f((V_,Xh)=>{(function(e,t){typeof V_=="object"&&typeof Xh=="object"?Xh.exports=t():typeof define=="function"&&define.amd?define([],t):typeof V_=="object"?V_.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(p,r,o){var c=this&&this.__decorate||function(T,m,y,M){var S,w=arguments.length,L=w<3?m:M===null?M=Object.getOwnPropertyDescriptor(m,y):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(T,m,y,M);else for(var I=T.length-1;I>=0;I--)(S=T[I])&&(L=(w<3?S(L):w>3?S(m,y,L):S(m,y))||L);return w>3&&L&&Object.defineProperty(m,y,L),L};Object.defineProperty(r,"__esModule",{value:!0}),r.GlyphRenderer=void 0;let f=o(374),u=o(509),v=o(855),h=o(859),g=o(776),d=o(381),a=11,i=a*Float32Array.BYTES_PER_ELEMENT,s,_=0,D=0,C=0;class b extends h.Disposable{constructor(m,y,M){super(),this._terminal=m,this._gl=y,this._dimensions=M,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let S=this._gl;u.TextureAtlas.maxAtlasPages===void 0&&(u.TextureAtlas.maxAtlasPages=Math.min(32,(0,f.throwIfFalsy)(S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS))),u.TextureAtlas.maxTextureSize=(0,f.throwIfFalsy)(S.getParameter(S.MAX_TEXTURE_SIZE))),this._program=(0,f.throwIfFalsy)((0,d.createProgram)(S,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(W){let E="";for(let A=1;A<W;A++)E+=` else if (v_texpage == ${A}) { outColor = texture(u_texture[${A}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${W}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${E}
}`}(u.TextureAtlas.maxAtlasPages))),this.register((0,h.toDisposable)(()=>S.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(S.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(S.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(S.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=S.createVertexArray(),S.bindVertexArray(this._vertexArrayObject);let w=new Float32Array([0,0,1,0,0,1,1,1]),L=S.createBuffer();this.register((0,h.toDisposable)(()=>S.deleteBuffer(L))),S.bindBuffer(S.ARRAY_BUFFER,L),S.bufferData(S.ARRAY_BUFFER,w,S.STATIC_DRAW),S.enableVertexAttribArray(0),S.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let I=new Uint8Array([0,1,2,3]),R=S.createBuffer();this.register((0,h.toDisposable)(()=>S.deleteBuffer(R))),S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,R),S.bufferData(S.ELEMENT_ARRAY_BUFFER,I,S.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(S.createBuffer()),this.register((0,h.toDisposable)(()=>S.deleteBuffer(this._attributesBuffer))),S.bindBuffer(S.ARRAY_BUFFER,this._attributesBuffer),S.enableVertexAttribArray(2),S.vertexAttribPointer(2,2,S.FLOAT,!1,i,0),S.vertexAttribDivisor(2,1),S.enableVertexAttribArray(3),S.vertexAttribPointer(3,2,S.FLOAT,!1,i,2*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(3,1),S.enableVertexAttribArray(4),S.vertexAttribPointer(4,1,S.FLOAT,!1,i,4*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(4,1),S.enableVertexAttribArray(5),S.vertexAttribPointer(5,2,S.FLOAT,!1,i,5*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(5,1),S.enableVertexAttribArray(6),S.vertexAttribPointer(6,2,S.FLOAT,!1,i,7*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(6,1),S.enableVertexAttribArray(1),S.vertexAttribPointer(1,2,S.FLOAT,!1,i,9*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(1,1),S.useProgram(this._program);let P=new Int32Array(u.TextureAtlas.maxAtlasPages);for(let W=0;W<u.TextureAtlas.maxAtlasPages;W++)P[W]=W;S.uniform1iv(this._textureLocation,P),S.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),this._atlasTextures=[];for(let W=0;W<u.TextureAtlas.maxAtlasPages;W++){let E=new d.GLTexture((0,f.throwIfFalsy)(S.createTexture()));this.register((0,h.toDisposable)(()=>S.deleteTexture(E.texture))),S.activeTexture(S.TEXTURE0+W),S.bindTexture(S.TEXTURE_2D,E.texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[W]=E}S.enable(S.BLEND),S.blendFunc(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(m,y,M,S,w,L,I,R){this._updateCell(this._vertices.attributes,m,y,M,S,w,L,I,R)}_updateCell(m,y,M,S,w,L,I,R,P){_=(M*this._terminal.cols+y)*a,S!==v.NULL_CELL_CODE&&S!==void 0?this._atlas&&(s=R&&R.length>1?this._atlas.getRasterizedGlyphCombinedChar(R,w,L,I,!1):this._atlas.getRasterizedGlyph(S,w,L,I,!1),D=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),w!==P&&s.offset.x>D?(C=s.offset.x-D,m[_]=-(s.offset.x-C)+this._dimensions.device.char.left,m[_+1]=-s.offset.y+this._dimensions.device.char.top,m[_+2]=(s.size.x-C)/this._dimensions.device.canvas.width,m[_+3]=s.size.y/this._dimensions.device.canvas.height,m[_+4]=s.texturePage,m[_+5]=s.texturePositionClipSpace.x+C/this._atlas.pages[s.texturePage].canvas.width,m[_+6]=s.texturePositionClipSpace.y,m[_+7]=s.sizeClipSpace.x-C/this._atlas.pages[s.texturePage].canvas.width,m[_+8]=s.sizeClipSpace.y):(m[_]=-s.offset.x+this._dimensions.device.char.left,m[_+1]=-s.offset.y+this._dimensions.device.char.top,m[_+2]=s.size.x/this._dimensions.device.canvas.width,m[_+3]=s.size.y/this._dimensions.device.canvas.height,m[_+4]=s.texturePage,m[_+5]=s.texturePositionClipSpace.x,m[_+6]=s.texturePositionClipSpace.y,m[_+7]=s.sizeClipSpace.x,m[_+8]=s.sizeClipSpace.y)):m.fill(0,_,_+a-1-2)}clear(){let m=this._terminal,y=m.cols*m.rows*a;this._vertices.count!==y?this._vertices.attributes=new Float32Array(y):this._vertices.attributes.fill(0);let M=0;for(;M<this._vertices.attributesBuffers.length;M++)this._vertices.count!==y?this._vertices.attributesBuffers[M]=new Float32Array(y):this._vertices.attributesBuffers[M].fill(0);this._vertices.count=y,M=0;for(let S=0;S<m.rows;S++)for(let w=0;w<m.cols;w++)this._vertices.attributes[M+9]=w/m.cols,this._vertices.attributes[M+10]=S/m.rows,M+=a}handleResize(){let m=this._gl;m.useProgram(this._program),m.viewport(0,0,m.canvas.width,m.canvas.height),m.uniform2f(this._resolutionLocation,m.canvas.width,m.canvas.height),this.clear()}render(m){if(!this._atlas)return;let y=this._gl;y.useProgram(this._program),y.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let M=this._vertices.attributesBuffers[this._activeBuffer],S=0;for(let w=0;w<m.lineLengths.length;w++){let L=w*this._terminal.cols*a,I=this._vertices.attributes.subarray(L,L+m.lineLengths[w]*a);M.set(I,S),S+=I.length}y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.bufferData(y.ARRAY_BUFFER,M.subarray(0,S),y.STREAM_DRAW);for(let w=0;w<this._atlas.pages.length;w++)this._atlas.pages[w].version!==this._atlasTextures[w].version&&this._bindAtlasPageTexture(y,this._atlas,w);y.drawElementsInstanced(y.TRIANGLE_STRIP,4,y.UNSIGNED_BYTE,0,S/a)}setAtlas(m){this._atlas=m;for(let y of this._atlasTextures)y.version=-1}_bindAtlasPageTexture(m,y,M){m.activeTexture(m.TEXTURE0+M),m.bindTexture(m.TEXTURE_2D,this._atlasTextures[M].texture),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,y.pages[M].canvas),m.generateMipmap(m.TEXTURE_2D),this._atlasTextures[M].version=y.pages[M].version}setDimensions(m){this._dimensions=m}}r.GlyphRenderer=b,c([g.traceCall],b.prototype,"updateCell",null)},742:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RectangleRenderer=void 0;let c=o(374),f=o(859),u=o(310),v=o(381),h=8*Float32Array.BYTES_PER_ELEMENT;class g{constructor(){this.attributes=new Float32Array(160),this.count=0}}let d=0,a=0,i=0,s=0,_=0,D=0,C=0;class b extends f.Disposable{constructor(m,y,M,S){super(),this._terminal=m,this._gl=y,this._dimensions=M,this._themeService=S,this._vertices=new g,this._verticesCursor=new g;let w=this._gl;this._program=(0,c.throwIfFalsy)((0,v.createProgram)(w,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,f.toDisposable)(()=>w.deleteProgram(this._program))),this._projectionLocation=(0,c.throwIfFalsy)(w.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=w.createVertexArray(),w.bindVertexArray(this._vertexArrayObject);let L=new Float32Array([0,0,1,0,0,1,1,1]),I=w.createBuffer();this.register((0,f.toDisposable)(()=>w.deleteBuffer(I))),w.bindBuffer(w.ARRAY_BUFFER,I),w.bufferData(w.ARRAY_BUFFER,L,w.STATIC_DRAW),w.enableVertexAttribArray(3),w.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let R=new Uint8Array([0,1,2,3]),P=w.createBuffer();this.register((0,f.toDisposable)(()=>w.deleteBuffer(P))),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,P),w.bufferData(w.ELEMENT_ARRAY_BUFFER,R,w.STATIC_DRAW),this._attributesBuffer=(0,c.throwIfFalsy)(w.createBuffer()),this.register((0,f.toDisposable)(()=>w.deleteBuffer(this._attributesBuffer))),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.enableVertexAttribArray(0),w.vertexAttribPointer(0,2,w.FLOAT,!1,h,0),w.vertexAttribDivisor(0,1),w.enableVertexAttribArray(1),w.vertexAttribPointer(1,2,w.FLOAT,!1,h,2*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(1,1),w.enableVertexAttribArray(2),w.vertexAttribPointer(2,4,w.FLOAT,!1,h,4*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(2,1),this._updateCachedColors(S.colors),this.register(this._themeService.onChangeColors(W=>{this._updateCachedColors(W),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(m){let y=this._gl;y.useProgram(this._program),y.bindVertexArray(this._vertexArrayObject),y.uniformMatrix4fv(this._projectionLocation,!1,v.PROJECTION_MATRIX),y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.bufferData(y.ARRAY_BUFFER,m.attributes,y.DYNAMIC_DRAW),y.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,y.UNSIGNED_BYTE,0,m.count)}handleResize(){this._updateViewportRectangle()}setDimensions(m){this._dimensions=m}_updateCachedColors(m){this._bgFloat=this._colorToFloat32Array(m.background),this._cursorFloat=this._colorToFloat32Array(m.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(m){let y=this._terminal,M=this._vertices,S,w,L,I,R,P,W,E,A,x,H,U=1;for(S=0;S<y.rows;S++){for(L=-1,I=0,R=0,P=!1,w=0;w<y.cols;w++)W=(S*y.cols+w)*u.RENDER_MODEL_INDICIES_PER_CELL,E=m.cells[W+u.RENDER_MODEL_BG_OFFSET],A=m.cells[W+u.RENDER_MODEL_FG_OFFSET],x=!!(67108864&A),(E!==I||A!==R&&(P||x))&&((I!==0||P&&R!==0)&&(H=8*U++,this._updateRectangle(M,H,R,I,L,w,S)),L=w,I=E,R=A,P=x);(I!==0||P&&R!==0)&&(H=8*U++,this._updateRectangle(M,H,R,I,L,y.cols,S))}M.count=U}updateCursor(m){let y=this._verticesCursor,M=m.cursor;if(!M||M.style==="block")return void(y.count=0);let S,w=0;M.style!=="bar"&&M.style!=="outline"||(S=8*w++,this._addRectangleFloat(y.attributes,S,M.x*this._dimensions.device.cell.width,M.y*this._dimensions.device.cell.height,M.style==="bar"?M.dpr*M.cursorWidth:M.dpr,this._dimensions.device.cell.height,this._cursorFloat)),M.style!=="underline"&&M.style!=="outline"||(S=8*w++,this._addRectangleFloat(y.attributes,S,M.x*this._dimensions.device.cell.width,(M.y+1)*this._dimensions.device.cell.height-M.dpr,M.width*this._dimensions.device.cell.width,M.dpr,this._cursorFloat)),M.style==="outline"&&(S=8*w++,this._addRectangleFloat(y.attributes,S,M.x*this._dimensions.device.cell.width,M.y*this._dimensions.device.cell.height,M.width*this._dimensions.device.cell.width,M.dpr,this._cursorFloat),S=8*w++,this._addRectangleFloat(y.attributes,S,(M.x+M.width)*this._dimensions.device.cell.width-M.dpr,M.y*this._dimensions.device.cell.height,M.dpr,this._dimensions.device.cell.height,this._cursorFloat)),y.count=w}_updateRectangle(m,y,M,S,w,L,I){if(67108864&M)switch(50331648&M){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&M].rgba;break;case 50331648:d=(16777215&M)<<8;break;default:d=this._themeService.colors.foreground.rgba}else switch(50331648&S){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&S].rgba;break;case 50331648:d=(16777215&S)<<8;break;default:d=this._themeService.colors.background.rgba}m.attributes.length<y+4&&(m.attributes=(0,v.expandFloat32Array)(m.attributes,this._terminal.rows*this._terminal.cols*8)),a=w*this._dimensions.device.cell.width,i=I*this._dimensions.device.cell.height,s=(d>>24&255)/255,_=(d>>16&255)/255,D=(d>>8&255)/255,C=1,this._addRectangle(m.attributes,y,a,i,(L-w)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,s,_,D,C)}_addRectangle(m,y,M,S,w,L,I,R,P,W){m[y]=M/this._dimensions.device.canvas.width,m[y+1]=S/this._dimensions.device.canvas.height,m[y+2]=w/this._dimensions.device.canvas.width,m[y+3]=L/this._dimensions.device.canvas.height,m[y+4]=I,m[y+5]=R,m[y+6]=P,m[y+7]=W}_addRectangleFloat(m,y,M,S,w,L,I){m[y]=M/this._dimensions.device.canvas.width,m[y+1]=S/this._dimensions.device.canvas.height,m[y+2]=w/this._dimensions.device.canvas.width,m[y+3]=L/this._dimensions.device.canvas.height,m[y+4]=I[0],m[y+5]=I[1],m[y+6]=I[2],m[y+7]=I[3]}_colorToFloat32Array(m){return new Float32Array([(m.rgba>>24&255)/255,(m.rgba>>16&255)/255,(m.rgba>>8&255)/255,(255&m.rgba)/255])}}r.RectangleRenderer=b},310:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderModel=r.COMBINED_CHAR_BIT_MASK=r.RENDER_MODEL_EXT_OFFSET=r.RENDER_MODEL_FG_OFFSET=r.RENDER_MODEL_BG_OFFSET=r.RENDER_MODEL_INDICIES_PER_CELL=void 0;let c=o(296);r.RENDER_MODEL_INDICIES_PER_CELL=4,r.RENDER_MODEL_BG_OFFSET=1,r.RENDER_MODEL_FG_OFFSET=2,r.RENDER_MODEL_EXT_OFFSET=3,r.COMBINED_CHAR_BIT_MASK=2147483648,r.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,c.createSelectionRenderModel)()}resize(f,u){let v=f*u*r.RENDER_MODEL_INDICIES_PER_CELL;v!==this.cells.length&&(this.cells=new Uint32Array(v),this.lineLengths=new Uint32Array(u))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(p,r,o){var c=this&&this.__decorate||function(L,I,R,P){var W,E=arguments.length,A=E<3?I:P===null?P=Object.getOwnPropertyDescriptor(I,R):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(L,I,R,P);else for(var x=L.length-1;x>=0;x--)(W=L[x])&&(A=(E<3?W(A):E>3?W(I,R,A):W(I,R))||A);return E>3&&A&&Object.defineProperty(I,R,A),A};Object.defineProperty(r,"__esModule",{value:!0}),r.JoinedCellData=r.WebglRenderer=void 0;let f=o(820),u=o(274),v=o(627),h=o(457),g=o(56),d=o(374),a=o(345),i=o(859),s=o(147),_=o(782),D=o(855),C=o(776),b=o(965),T=o(742),m=o(310),y=o(733);class M extends i.Disposable{constructor(I,R,P,W,E,A,x,H,U){super(),this._terminal=I,this._characterJoinerService=R,this._charSizeService=P,this._coreBrowserService=W,this._coreService=E,this._decorationService=A,this._optionsService=x,this._themeService=H,this._cursorBlinkStateManager=new i.MutableDisposable,this._charAtlasDisposable=this.register(new i.MutableDisposable),this._model=new m.RenderModel,this._workCell=new _.CellData,this._rectangleRenderer=this.register(new i.MutableDisposable),this._glyphRenderer=this.register(new i.MutableDisposable),this._onChangeTextureAtlas=this.register(new a.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new a.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new a.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new a.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new a.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new u.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new y.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,x,this._themeService)],this.dimensions=(0,d.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(x.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let re={antialias:!1,depth:!1,preserveDrawingBuffer:U};if(this._gl=this._canvas.getContext("webgl2",re),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextlost",oe=>{console.log("webglcontextlost event received"),oe.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(oe)},3e3)})),this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextrestored",oe=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,v.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,g.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(oe,V)=>this._setCanvasDevicePixelDimensions(oe,V))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,i.toDisposable)(()=>{var oe;for(let V of this._renderLayers)V.dispose();(oe=this._canvas.parentElement)===null||oe===void 0||oe.removeChild(this._canvas),(0,v.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var I;return(I=this._charAtlas)===null||I===void 0?void 0:I.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(I,R){var P,W,E,A;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let x of this._renderLayers)x.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(P=this._rectangleRenderer.value)===null||P===void 0||P.setDimensions(this.dimensions),(W=this._rectangleRenderer.value)===null||W===void 0||W.handleResize(),(E=this._glyphRenderer.value)===null||E===void 0||E.setDimensions(this.dimensions),(A=this._glyphRenderer.value)===null||A===void 0||A.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var I;for(let R of this._renderLayers)R.handleBlur(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.pause(),this._requestRedrawViewport()}handleFocus(){var I;for(let R of this._renderLayers)R.handleFocus(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.resume(),this._requestRedrawViewport()}handleSelectionChanged(I,R,P){for(let W of this._renderLayers)W.handleSelectionChanged(this._terminal,I,R,P);this._model.selection.update(this._terminal,I,R,P),this._requestRedrawViewport()}handleCursorMove(){var I;for(let R of this._renderLayers)R.handleCursorMove(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new T.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new b.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var I;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let R=(0,v.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==R&&(this._onChangeTextureAtlas.fire(R.pages[0].canvas),this._charAtlasDisposable.value=(0,i.getDisposeArrayDisposable)([(0,a.forwardEvent)(R.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,a.forwardEvent)(R.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=R,this._charAtlas.warmUp(),(I=this._glyphRenderer.value)===null||I===void 0||I.setAtlas(this._charAtlas)}_clearModel(I){var R;this._model.clear(),I&&((R=this._glyphRenderer.value)===null||R===void 0||R.clear())}clearTextureAtlas(){var I;(I=this._charAtlas)===null||I===void 0||I.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var I;this._clearModel(!0);for(let R of this._renderLayers)R.reset(this._terminal);(I=this._cursorBlinkStateManager.value)===null||I===void 0||I.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(I){return-1}deregisterCharacterJoiner(I){return!1}renderRows(I,R){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let P of this._renderLayers)P.handleGridChanged(this._terminal,I,R);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(I,R),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new h.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(I,R){let P=this._core,W,E,A,x,H,U,re,oe,V,fe,F,N,q,k=this._workCell;I=w(I,P.rows-1,0),R=w(R,P.rows-1,0);let _e=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Q=Math.min(this._terminal.buffer.active.cursorX,P.cols-1),Me=-1,et=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ke=!1;for(E=I;E<=R;E++)for(A=E+P.buffer.ydisp,x=P.buffer.lines.get(A),this._model.lineLengths[E]=0,H=this._characterJoinerService.getJoinedCharacters(A),N=0;N<P.cols;N++)if(W=this._cellColorResolver.result.bg,x.loadCell(N,k),N===0&&(W=this._cellColorResolver.result.bg),U=!1,re=N,H.length>0&&N===H[0][0]&&(U=!0,oe=H.shift(),k=new S(k,x.translateToString(!0,oe[0],oe[1]),oe[1]-oe[0]),re=oe[1]-1),V=k.getChars(),fe=k.getCode(),F=(E*P.cols+N)*m.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(k,N,A),et&&A===_e&&(N===Q&&(this._model.cursor={x:Q,y:this._terminal.buffer.active.cursorY,width:k.getWidth(),style:this._coreBrowserService.isFocused?P.options.cursorStyle||"block":P.options.cursorInactiveStyle,cursorWidth:P.options.cursorWidth,dpr:this._devicePixelRatio},Me=Q+k.getWidth()-1),N>=Q&&N<=Me&&(this._coreBrowserService.isFocused&&(P.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&P.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),fe!==D.NULL_CELL_CODE&&(this._model.lineLengths[E]=N+1),(this._model.cells[F]!==fe||this._model.cells[F+m.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[F+m.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[F+m.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ke=!0,V.length>1&&(fe|=m.COMBINED_CHAR_BIT_MASK),this._model.cells[F]=fe,this._model.cells[F+m.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[F+m.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[F+m.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(N,E,fe,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,V,W),U))for(k=this._workCell,N++;N<re;N++)q=(E*P.cols+N)*m.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(N,E,D.NULL_CELL_CODE,0,0,0,D.NULL_CELL_CHAR,0),this._model.cells[q]=D.NULL_CELL_CODE,this._model.cells[q+m.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[q+m.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[q+m.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ke&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(I,R){this._canvas.width===I&&this._canvas.height===R||(this._canvas.width=I,this._canvas.height=R,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let I=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:I,end:I})}}r.WebglRenderer=M,c([C.traceCall],M.prototype,"renderRows",null);class S extends s.AttributeData{constructor(I,R,P){super(),this.content=0,this.combinedData="",this.fg=I.fg,this.bg=I.bg,this.combinedData=R,this._width=P}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(I){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function w(L,I,R=0){return Math.max(Math.min(L,I),R)}r.JoinedCellData=S},381:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GLTexture=r.expandFloat32Array=r.createShader=r.createProgram=r.PROJECTION_MATRIX=void 0;let c=o(374);function f(u,v,h){let g=(0,c.throwIfFalsy)(u.createShader(v));if(u.shaderSource(g,h),u.compileShader(g),u.getShaderParameter(g,u.COMPILE_STATUS))return g;console.error(u.getShaderInfoLog(g)),u.deleteShader(g)}r.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),r.createProgram=function(u,v,h){let g=(0,c.throwIfFalsy)(u.createProgram());if(u.attachShader(g,(0,c.throwIfFalsy)(f(u,u.VERTEX_SHADER,v))),u.attachShader(g,(0,c.throwIfFalsy)(f(u,u.FRAGMENT_SHADER,h))),u.linkProgram(g),u.getProgramParameter(g,u.LINK_STATUS))return g;console.error(u.getProgramInfoLog(g)),u.deleteProgram(g)},r.createShader=f,r.expandFloat32Array=function(u,v){let h=Math.min(2*u.length,v),g=new Float32Array(h);for(let d=0;d<u.length;d++)g[d]=u[d];return g},r.GLTexture=class{constructor(u){this.texture=u,this.version=-1}}},592:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseRenderLayer=void 0;let c=o(627),f=o(237),u=o(374),v=o(859);class h extends v.Disposable{constructor(d,a,i,s,_,D,C,b){super(),this._container=a,this._alpha=_,this._coreBrowserService=D,this._optionsService=C,this._themeService=b,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${i}-layer`),this._canvas.style.zIndex=s.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(T=>{this._refreshCharAtlas(d,T),this.reset(d)})),this.register((0,v.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,u.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(d){}handleFocus(d){}handleCursorMove(d){}handleGridChanged(d,a,i){}handleSelectionChanged(d,a,i,s=!1){}_setTransparency(d,a){if(a===this._alpha)return;let i=this._canvas;this._alpha=a,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,i),this._refreshCharAtlas(d,this._themeService.colors),this.handleGridChanged(d,0,d.rows-1)}_refreshCharAtlas(d,a){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,c.acquireTextureAtlas)(d,this._optionsService.rawOptions,a,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(d,a){this._deviceCellWidth=a.device.cell.width,this._deviceCellHeight=a.device.cell.height,this._deviceCharWidth=a.device.char.width,this._deviceCharHeight=a.device.char.height,this._deviceCharLeft=a.device.char.left,this._deviceCharTop=a.device.char.top,this._canvas.width=a.device.canvas.width,this._canvas.height=a.device.canvas.height,this._canvas.style.width=`${a.css.canvas.width}px`,this._canvas.style.height=`${a.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(d,this._themeService.colors)}_fillBottomLineAtCells(d,a,i=1){this._ctx.fillRect(d*this._deviceCellWidth,(a+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,i*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(d,a,i,s){this._alpha?this._ctx.clearRect(d*this._deviceCellWidth,a*this._deviceCellHeight,i*this._deviceCellWidth,s*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(d*this._deviceCellWidth,a*this._deviceCellHeight,i*this._deviceCellWidth,s*this._deviceCellHeight))}_fillCharTrueColor(d,a,i,s){this._ctx.font=this._getFont(d,!1,!1),this._ctx.textBaseline=f.TEXT_BASELINE,this._clipCell(i,s,a.getWidth()),this._ctx.fillText(a.getChars(),i*this._deviceCellWidth+this._deviceCharLeft,s*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(d,a,i){this._ctx.beginPath(),this._ctx.rect(d*this._deviceCellWidth,a*this._deviceCellHeight,i*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(d,a,i){return`${i?"italic":""} ${a?d.options.fontWeightBold:d.options.fontWeight} ${d.options.fontSize*this._coreBrowserService.dpr}px ${d.options.fontFamily}`}}r.BaseRenderLayer=h},733:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkRenderLayer=void 0;let c=o(197),f=o(237),u=o(592);class v extends u.BaseRenderLayer{constructor(g,d,a,i,s,_,D){super(a,g,"link",d,!0,s,_,D),this.register(i.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(i.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(g,d){super.resize(g,d),this._state=void 0}reset(g){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let g=this._state.y2-this._state.y1-1;g>0&&this._clearCells(0,this._state.y1+1,this._state.cols,g),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(g){if(g.fg===f.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:g.fg!==void 0&&(0,c.is256Color)(g.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[g.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,g.y1===g.y2)this._fillBottomLineAtCells(g.x1,g.y1,g.x2-g.x1);else{this._fillBottomLineAtCells(g.x1,g.y1,g.cols-g.x1);for(let d=g.y1+1;d<g.y2;d++)this._fillBottomLineAtCells(0,d,g.cols);this._fillBottomLineAtCells(0,g.y2,g.x2)}this._state=g}_handleHideLinkUnderline(g){this._clearCurrentLink()}}r.LinkRenderLayer=v},820:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(o,c,f,u){o.addEventListener(c,f,u);let v=!1;return{dispose:()=>{v||(v=!0,o.removeEventListener(c,f,u))}}}},274:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellColorResolver=void 0;let o,c=0,f=0,u=!1,v=!1,h=!1;r.CellColorResolver=class{constructor(g,d,a,i,s){this._terminal=g,this._selectionRenderModel=d,this._decorationService=a,this._coreBrowserService=i,this._themeService=s,this.result={fg:0,bg:0,ext:0}}resolve(g,d,a){this.result.bg=g.bg,this.result.fg=g.fg,this.result.ext=268435456&g.bg?g.extended.ext:0,f=0,c=0,v=!1,u=!1,h=!1,o=this._themeService.colors,this._decorationService.forEachDecorationAtCell(d,a,"bottom",i=>{i.backgroundColorRGB&&(f=i.backgroundColorRGB.rgba>>8&16777215,v=!0),i.foregroundColorRGB&&(c=i.foregroundColorRGB.rgba>>8&16777215,u=!0)}),h=this._selectionRenderModel.isCellSelected(this._terminal,d,a),h&&(f=(this._coreBrowserService.isFocused?o.selectionBackgroundOpaque:o.selectionInactiveBackgroundOpaque).rgba>>8&16777215,v=!0,o.selectionForeground&&(c=o.selectionForeground.rgba>>8&16777215,u=!0)),this._decorationService.forEachDecorationAtCell(d,a,"top",i=>{i.backgroundColorRGB&&(f=i.backgroundColorRGB.rgba>>8&16777215,v=!0),i.foregroundColorRGB&&(c=i.foregroundColorRGB.rgba>>8&16777215,u=!0)}),v&&(f=h?-16777216&g.bg&-134217729|f|50331648:-16777216&g.bg|f|50331648),u&&(c=-16777216&g.fg&-67108865|c|50331648),67108864&this.result.fg&&(v&&!u&&(c=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&o.background.rgba>>8|50331648,u=!0),!v&&u&&(f=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&o.foreground.rgba>>8|50331648,v=!0)),o=void 0,this.result.bg=v?f:this.result.bg,this.result.fg=u?c:this.result.fg}}},627:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.removeTerminalFromCache=r.acquireTextureAtlas=void 0;let c=o(509),f=o(197),u=[];r.acquireTextureAtlas=function(v,h,g,d,a,i,s,_){let D=(0,f.generateConfig)(d,a,i,s,h,g,_);for(let T=0;T<u.length;T++){let m=u[T],y=m.ownedBy.indexOf(v);if(y>=0){if((0,f.configEquals)(m.config,D))return m.atlas;m.ownedBy.length===1?(m.atlas.dispose(),u.splice(T,1)):m.ownedBy.splice(y,1);break}}for(let T=0;T<u.length;T++){let m=u[T];if((0,f.configEquals)(m.config,D))return m.ownedBy.push(v),m.atlas}let C=v._core,b={atlas:new c.TextureAtlas(document,D,C.unicodeService),config:D,ownedBy:[v]};return u.push(b),b.atlas},r.removeTerminalFromCache=function(v){for(let h=0;h<u.length;h++){let g=u[h].ownedBy.indexOf(v);if(g!==-1){u[h].ownedBy.length===1?(u[h].atlas.dispose(),u.splice(h,1)):u[h].ownedBy.splice(g,1);break}}}},197:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.is256Color=r.configEquals=r.generateConfig=void 0;let c=o(160);r.generateConfig=function(f,u,v,h,g,d,a){let i={foreground:d.foreground,background:d.background,cursor:c.NULL_COLOR,cursorAccent:c.NULL_COLOR,selectionForeground:c.NULL_COLOR,selectionBackgroundTransparent:c.NULL_COLOR,selectionBackgroundOpaque:c.NULL_COLOR,selectionInactiveBackgroundTransparent:c.NULL_COLOR,selectionInactiveBackgroundOpaque:c.NULL_COLOR,ansi:d.ansi.slice(),contrastCache:d.contrastCache,halfContrastCache:d.halfContrastCache};return{customGlyphs:g.customGlyphs,devicePixelRatio:a,letterSpacing:g.letterSpacing,lineHeight:g.lineHeight,deviceCellWidth:f,deviceCellHeight:u,deviceCharWidth:v,deviceCharHeight:h,fontFamily:g.fontFamily,fontSize:g.fontSize,fontWeight:g.fontWeight,fontWeightBold:g.fontWeightBold,allowTransparency:g.allowTransparency,drawBoldTextInBrightColors:g.drawBoldTextInBrightColors,minimumContrastRatio:g.minimumContrastRatio,colors:i}},r.configEquals=function(f,u){for(let v=0;v<f.colors.ansi.length;v++)if(f.colors.ansi[v].rgba!==u.colors.ansi[v].rgba)return!1;return f.devicePixelRatio===u.devicePixelRatio&&f.customGlyphs===u.customGlyphs&&f.lineHeight===u.lineHeight&&f.letterSpacing===u.letterSpacing&&f.fontFamily===u.fontFamily&&f.fontSize===u.fontSize&&f.fontWeight===u.fontWeight&&f.fontWeightBold===u.fontWeightBold&&f.allowTransparency===u.allowTransparency&&f.deviceCharWidth===u.deviceCharWidth&&f.deviceCharHeight===u.deviceCharHeight&&f.drawBoldTextInBrightColors===u.drawBoldTextInBrightColors&&f.minimumContrastRatio===u.minimumContrastRatio&&f.colors.foreground.rgba===u.colors.foreground.rgba&&f.colors.background.rgba===u.colors.background.rgba},r.is256Color=function(f){return(50331648&f)==16777216||(50331648&f)==33554432}},237:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;let c=o(399);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},457:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CursorBlinkStateManager=void 0,r.CursorBlinkStateManager=class{constructor(o,c){this._renderCallback=o,this._coreBrowserService=c,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(o=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let c=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,c>0)return void this._restartInterval(c)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let c=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(c)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},o)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tryDrawCustomChar=r.powerlineDefinitions=r.boxDrawingDefinitions=r.blockElementDefinitions=void 0;let c=o(374);r.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let f={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};r.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(d,a)=>`M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a}`},"\u2551":{1:(d,a)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2552":{1:(d,a)=>`M.5,1 L.5,${.5-a} L1,${.5-a} M.5,${.5+a} L1,${.5+a}`},"\u2553":{1:(d,a)=>`M${.5-d},1 L${.5-d},.5 L1,.5 M${.5+d},.5 L${.5+d},1`},"\u2554":{1:(d,a)=>`M1,${.5-a} L${.5-d},${.5-a} L${.5-d},1 M1,${.5+a} L${.5+d},${.5+a} L${.5+d},1`},"\u2555":{1:(d,a)=>`M0,${.5-a} L.5,${.5-a} L.5,1 M0,${.5+a} L.5,${.5+a}`},"\u2556":{1:(d,a)=>`M${.5+d},1 L${.5+d},.5 L0,.5 M${.5-d},.5 L${.5-d},1`},"\u2557":{1:(d,a)=>`M0,${.5+a} L${.5-d},${.5+a} L${.5-d},1 M0,${.5-a} L${.5+d},${.5-a} L${.5+d},1`},"\u2558":{1:(d,a)=>`M.5,0 L.5,${.5+a} L1,${.5+a} M.5,${.5-a} L1,${.5-a}`},"\u2559":{1:(d,a)=>`M1,.5 L${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u255A":{1:(d,a)=>`M1,${.5-a} L${.5+d},${.5-a} L${.5+d},0 M1,${.5+a} L${.5-d},${.5+a} L${.5-d},0`},"\u255B":{1:(d,a)=>`M0,${.5+a} L.5,${.5+a} L.5,0 M0,${.5-a} L.5,${.5-a}`},"\u255C":{1:(d,a)=>`M0,.5 L${.5+d},.5 L${.5+d},0 M${.5-d},.5 L${.5-d},0`},"\u255D":{1:(d,a)=>`M0,${.5-a} L${.5-d},${.5-a} L${.5-d},0 M0,${.5+a} L${.5+d},${.5+a} L${.5+d},0`},"\u255E":{1:(d,a)=>`M.5,0 L.5,1 M.5,${.5-a} L1,${.5-a} M.5,${.5+a} L1,${.5+a}`},"\u255F":{1:(d,a)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1 M${.5+d},.5 L1,.5`},"\u2560":{1:(d,a)=>`M${.5-d},0 L${.5-d},1 M1,${.5+a} L${.5+d},${.5+a} L${.5+d},1 M1,${.5-a} L${.5+d},${.5-a} L${.5+d},0`},"\u2561":{1:(d,a)=>`M.5,0 L.5,1 M0,${.5-a} L.5,${.5-a} M0,${.5+a} L.5,${.5+a}`},"\u2562":{1:(d,a)=>`M0,.5 L${.5-d},.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2563":{1:(d,a)=>`M${.5+d},0 L${.5+d},1 M0,${.5+a} L${.5-d},${.5+a} L${.5-d},1 M0,${.5-a} L${.5-d},${.5-a} L${.5-d},0`},"\u2564":{1:(d,a)=>`M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a} M.5,${.5+a} L.5,1`},"\u2565":{1:(d,a)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},1 M${.5+d},.5 L${.5+d},1`},"\u2566":{1:(d,a)=>`M0,${.5-a} L1,${.5-a} M0,${.5+a} L${.5-d},${.5+a} L${.5-d},1 M1,${.5+a} L${.5+d},${.5+a} L${.5+d},1`},"\u2567":{1:(d,a)=>`M.5,0 L.5,${.5-a} M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a}`},"\u2568":{1:(d,a)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u2569":{1:(d,a)=>`M0,${.5+a} L1,${.5+a} M0,${.5-a} L${.5-d},${.5-a} L${.5-d},0 M1,${.5-a} L${.5+d},${.5-a} L${.5+d},0`},"\u256A":{1:(d,a)=>`M.5,0 L.5,1 M0,${.5-a} L1,${.5-a} M0,${.5+a} L1,${.5+a}`},"\u256B":{1:(d,a)=>`M0,.5 L1,.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u256C":{1:(d,a)=>`M0,${.5+a} L${.5-d},${.5+a} L${.5-d},1 M1,${.5+a} L${.5+d},${.5+a} L${.5+d},1 M0,${.5-a} L${.5-d},${.5-a} L${.5-d},0 M1,${.5-a} L${.5+d},${.5-a} L${.5+d},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(d,a)=>`M.5,1 L.5,${.5+a/.15*.5} C.5,${.5+a/.15*.5},.5,.5,1,.5`},"\u256E":{1:(d,a)=>`M.5,1 L.5,${.5+a/.15*.5} C.5,${.5+a/.15*.5},.5,.5,0,.5`},"\u256F":{1:(d,a)=>`M.5,0 L.5,${.5-a/.15*.5} C.5,${.5-a/.15*.5},.5,.5,0,.5`},"\u2570":{1:(d,a)=>`M.5,0 L.5,${.5-a/.15*.5} C.5,${.5-a/.15*.5},.5,.5,1,.5`}},r.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},r.powerlineDefinitions["\uE0BB"]=r.powerlineDefinitions["\uE0BD"],r.powerlineDefinitions["\uE0BF"]=r.powerlineDefinitions["\uE0B9"],r.tryDrawCustomChar=function(d,a,i,s,_,D,C,b){let T=r.blockElementDefinitions[a];if(T)return function(S,w,L,I,R,P){for(let W=0;W<w.length;W++){let E=w[W],A=R/8,x=P/8;S.fillRect(L+E.x*A,I+E.y*x,E.w*A,E.h*x)}}(d,T,i,s,_,D),!0;let m=f[a];if(m)return function(S,w,L,I,R,P){let W=u.get(w);W||(W=new Map,u.set(w,W));let E=S.fillStyle;if(typeof E!="string")throw new Error(`Unexpected fillStyle type "${E}"`);let A=W.get(E);if(!A){let x=w[0].length,H=w.length,U=document.createElement("canvas");U.width=x,U.height=H;let re=(0,c.throwIfFalsy)(U.getContext("2d")),oe=new ImageData(x,H),V,fe,F,N;if(E.startsWith("#"))V=parseInt(E.slice(1,3),16),fe=parseInt(E.slice(3,5),16),F=parseInt(E.slice(5,7),16),N=E.length>7&&parseInt(E.slice(7,9),16)||1;else{if(!E.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${E}" when drawing pattern glyph`);[V,fe,F,N]=E.substring(5,E.length-1).split(",").map(q=>parseFloat(q))}for(let q=0;q<H;q++)for(let k=0;k<x;k++)oe.data[4*(q*x+k)]=V,oe.data[4*(q*x+k)+1]=fe,oe.data[4*(q*x+k)+2]=F,oe.data[4*(q*x+k)+3]=w[q][k]*(255*N);re.putImageData(oe,0,0),A=(0,c.throwIfFalsy)(S.createPattern(U,null)),W.set(E,A)}S.fillStyle=A,S.fillRect(L,I,R,P)}(d,m,i,s,_,D),!0;let y=r.boxDrawingDefinitions[a];if(y)return function(S,w,L,I,R,P,W){S.strokeStyle=S.fillStyle;for(let[E,A]of Object.entries(w)){let x;S.beginPath(),S.lineWidth=W*Number.parseInt(E),x=typeof A=="function"?A(.15,.15/P*R):A;for(let H of x.split(" ")){let U=H[0],re=h[U];if(!re){console.error(`Could not find drawing instructions for "${U}"`);continue}let oe=H.substring(1).split(",");oe[0]&&oe[1]&&re(S,g(oe,R,P,L,I,!0,W))}S.stroke(),S.closePath()}}(d,y,i,s,_,D,b),!0;let M=r.powerlineDefinitions[a];return!!M&&(function(S,w,L,I,R,P,W,E){var A,x;let H=new Path2D;H.rect(L,I,R,P),S.clip(H),S.beginPath();let U=W/12;S.lineWidth=E*U;for(let re of w.d.split(" ")){let oe=re[0],V=h[oe];if(!V){console.error(`Could not find drawing instructions for "${oe}"`);continue}let fe=re.substring(1).split(",");fe[0]&&fe[1]&&V(S,g(fe,R,P,L,I,!1,E,((A=w.leftPadding)!==null&&A!==void 0?A:0)*(U/2),((x=w.rightPadding)!==null&&x!==void 0?x:0)*(U/2)))}w.type===1?(S.strokeStyle=S.fillStyle,S.stroke()):S.fill(),S.closePath()}(d,M,i,s,_,D,C,b),!0)};let u=new Map;function v(d,a,i=0){return Math.max(Math.min(d,a),i)}let h={C:(d,a)=>d.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]),L:(d,a)=>d.lineTo(a[0],a[1]),M:(d,a)=>d.moveTo(a[0],a[1])};function g(d,a,i,s,_,D,C,b=0,T=0){let m=d.map(y=>parseFloat(y)||parseInt(y));if(m.length<2)throw new Error("Too few arguments for instruction");for(let y=0;y<m.length;y+=2)m[y]*=a-b*C-T*C,D&&m[y]!==0&&(m[y]=v(Math.round(m[y]+.5)-.5,a,0)),m[y]+=s+b*C;for(let y=1;y<m.length;y+=2)m[y]*=i,D&&m[y]!==0&&(m[y]=v(Math.round(m[y]+.5)-.5,i,0)),m[y]+=_;return m}},56:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.observeDevicePixelDimensions=void 0;let c=o(859);r.observeDevicePixelDimensions=function(f,u,v){let h=new u.ResizeObserver(g=>{let d=g.find(s=>s.target===f);if(!d)return;if(!("devicePixelContentBoxSize"in d))return h?.disconnect(),void(h=void 0);let a=d.devicePixelContentBoxSize[0].inlineSize,i=d.devicePixelContentBoxSize[0].blockSize;a>0&&i>0&&v(a,i)});try{h.observe(f,{box:["device-pixel-content-box"]})}catch{h.disconnect(),h=void 0}return(0,c.toDisposable)(()=>h?.disconnect())}},374:(p,r)=>{function o(c){return 57508<=c&&c<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},r.isPowerlineGlyph=o,r.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},r.excludeFromContrastRatioDemands=function(c){return o(c)||function(f){return 9472<=f&&f<=9631}(c)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createSelectionRenderModel=void 0;class o{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(f,u,v,h=!1){if(this.selectionStart=u,this.selectionEnd=v,!u||!v||u[0]===v[0]&&u[1]===v[1])return void this.clear();let g=u[1]-f.buffer.active.viewportY,d=v[1]-f.buffer.active.viewportY,a=Math.max(g,0),i=Math.min(d,f.rows-1);a>=f.rows||i<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=h,this.viewportStartRow=g,this.viewportEndRow=d,this.viewportCappedStartRow=a,this.viewportCappedEndRow=i,this.startCol=u[0],this.endCol=v[0])}isCellSelected(f,u,v){return!!this.hasSelection&&(v-=f.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?u>=this.startCol&&v>=this.viewportCappedStartRow&&u<this.endCol&&v<=this.viewportCappedEndRow:u<this.startCol&&v>=this.viewportCappedStartRow&&u>=this.endCol&&v<=this.viewportCappedEndRow:v>this.viewportStartRow&&v<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&v===this.viewportStartRow&&u>=this.startCol&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportEndRow&&u<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportStartRow&&u>=this.startCol)}}r.createSelectionRenderModel=function(){return new o}},509:function(p,r,o){var c=this&&this.__decorate||function(M,S,w,L){var I,R=arguments.length,P=R<3?S:L===null?L=Object.getOwnPropertyDescriptor(S,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(M,S,w,L);else for(var W=M.length-1;W>=0;W--)(I=M[W])&&(P=(R<3?I(P):R>3?I(S,w,P):I(S,w))||P);return R>3&&P&&Object.defineProperty(S,w,P),P};Object.defineProperty(r,"__esModule",{value:!0}),r.TextureAtlas=void 0;let f=o(237),u=o(860),v=o(374),h=o(160),g=o(345),d=o(485),a=o(385),i=o(147),s=o(855),_=o(776),D={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class b{get pages(){return this._pages}constructor(S,w,L){this._document=S,this._config=w,this._unicodeService=L,this._didWarmUp=!1,this._cacheMap=new d.FourKeyMap,this._cacheMapCombined=new d.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new i.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new g.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new g.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=y(S,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,v.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let S of this.pages)S.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let S=new a.IdleTaskQueue;for(let w=33;w<126;w++)S.enqueue(()=>{if(!this._cacheMap.get(w,s.DEFAULT_COLOR,s.DEFAULT_COLOR,s.DEFAULT_EXT)){let L=this._drawToCache(w,s.DEFAULT_COLOR,s.DEFAULT_COLOR,s.DEFAULT_EXT);this._cacheMap.set(w,s.DEFAULT_COLOR,s.DEFAULT_COLOR,s.DEFAULT_EXT,L)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let S of this._pages)S.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(b.maxAtlasPages&&this._pages.length>=Math.max(4,b.maxAtlasPages)){let w=this._pages.filter(A=>2*A.canvas.width<=(b.maxTextureSize||4096)).sort((A,x)=>x.canvas.width!==A.canvas.width?x.canvas.width-A.canvas.width:x.percentageUsed-A.percentageUsed),L=-1,I=0;for(let A=0;A<w.length;A++)if(w[A].canvas.width!==I)L=A,I=w[A].canvas.width;else if(A-L==3)break;let R=w.slice(L,L+4),P=R.map(A=>A.glyphs[0].texturePage).sort((A,x)=>A>x?1:-1),W=this.pages.length-R.length,E=this._mergePages(R,W);E.version++;for(let A=P.length-1;A>=0;A--)this._deletePage(P[A]);this.pages.push(E),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(E.canvas)}let S=new T(this._document,this._textureSize);return this._pages.push(S),this._activePages.push(S),this._onAddTextureAtlasCanvas.fire(S.canvas),S}_mergePages(S,w){let L=2*S[0].canvas.width,I=new T(this._document,L,S);for(let[R,P]of S.entries()){let W=R*P.canvas.width%L,E=Math.floor(R/2)*P.canvas.height;I.ctx.drawImage(P.canvas,W,E);for(let x of P.glyphs)x.texturePage=w,x.sizeClipSpace.x=x.size.x/L,x.sizeClipSpace.y=x.size.y/L,x.texturePosition.x+=W,x.texturePosition.y+=E,x.texturePositionClipSpace.x=x.texturePosition.x/L,x.texturePositionClipSpace.y=x.texturePosition.y/L;this._onRemoveTextureAtlasCanvas.fire(P.canvas);let A=this._activePages.indexOf(P);A!==-1&&this._activePages.splice(A,1)}return I}_deletePage(S){this._pages.splice(S,1);for(let w=S;w<this._pages.length;w++){let L=this._pages[w];for(let I of L.glyphs)I.texturePage--;L.version++}}getRasterizedGlyphCombinedChar(S,w,L,I,R){return this._getFromCacheMap(this._cacheMapCombined,S,w,L,I,R)}getRasterizedGlyph(S,w,L,I,R){return this._getFromCacheMap(this._cacheMap,S,w,L,I,R)}_getFromCacheMap(S,w,L,I,R,P=!1){return C=S.get(w,L,I,R),C||(C=this._drawToCache(w,L,I,R,P),S.set(w,L,I,R,C)),C}_getColorFromAnsiIndex(S){if(S>=this._config.colors.ansi.length)throw new Error("No color found for idx "+S);return this._config.colors.ansi[S]}_getBackgroundColor(S,w,L,I){if(this._config.allowTransparency)return h.NULL_COLOR;let R;switch(S){case 16777216:case 33554432:R=this._getColorFromAnsiIndex(w);break;case 50331648:let P=i.AttributeData.toColorRGB(w);R=h.rgba.toColor(P[0],P[1],P[2]);break;default:R=L?h.color.opaque(this._config.colors.foreground):this._config.colors.background}return R}_getForegroundColor(S,w,L,I,R,P,W,E,A,x){let H=this._getMinimumContrastColor(S,w,L,I,R,P,!1,A,E,x);if(H)return H;let U;switch(R){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&A&&P<8&&(P+=8),U=this._getColorFromAnsiIndex(P);break;case 50331648:let re=i.AttributeData.toColorRGB(P);U=h.rgba.toColor(re[0],re[1],re[2]);break;default:U=W?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(U=h.color.opaque(U)),E&&(U=h.color.multiplyOpacity(U,f.DIM_OPACITY)),U}_resolveBackgroundRgba(S,w,L){switch(S){case 16777216:case 33554432:return this._getColorFromAnsiIndex(w).rgba;case 50331648:return w<<8;default:return L?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(S,w,L,I){switch(S){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&I&&w<8&&(w+=8),this._getColorFromAnsiIndex(w).rgba;case 50331648:return w<<8;default:return L?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(S,w,L,I,R,P,W,E,A,x){if(this._config.minimumContrastRatio===1||x)return;let H=this._getContrastCache(A),U=H.getColor(S,I);if(U!==void 0)return U||void 0;let re=this._resolveBackgroundRgba(w,L,W),oe=this._resolveForegroundRgba(R,P,W,E),V=h.rgba.ensureContrastRatio(re,oe,this._config.minimumContrastRatio/(A?2:1));if(!V)return void H.setColor(S,I,null);let fe=h.rgba.toColor(V>>24&255,V>>16&255,V>>8&255);return H.setColor(S,I,fe),fe}_getContrastCache(S){return S?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(S,w,L,I,R=!1){let P=typeof S=="number"?String.fromCharCode(S):S,W=Math.min(this._config.deviceCellWidth*Math.max(P.length,2)+4,this._textureSize);this._tmpCanvas.width<W&&(this._tmpCanvas.width=W);let E=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<E&&(this._tmpCanvas.height=E),this._tmpCtx.save(),this._workAttributeData.fg=L,this._workAttributeData.bg=w,this._workAttributeData.extended.ext=I,this._workAttributeData.isInvisible())return D;let A=!!this._workAttributeData.isBold(),x=!!this._workAttributeData.isInverse(),H=!!this._workAttributeData.isDim(),U=!!this._workAttributeData.isItalic(),re=!!this._workAttributeData.isUnderline(),oe=!!this._workAttributeData.isStrikethrough(),V=!!this._workAttributeData.isOverline(),fe=this._workAttributeData.getFgColor(),F=this._workAttributeData.getFgColorMode(),N=this._workAttributeData.getBgColor(),q=this._workAttributeData.getBgColorMode();if(x){let X=fe;fe=N,N=X;let me=F;F=q,q=me}let k=this._getBackgroundColor(q,N,x,H);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let _e=A?this._config.fontWeightBold:this._config.fontWeight,Q=U?"italic":"";this._tmpCtx.font=`${Q} ${_e} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;let Me=P.length===1&&(0,v.isPowerlineGlyph)(P.charCodeAt(0)),et=P.length===1&&(0,v.isRestrictedPowerlineGlyph)(P.charCodeAt(0)),ke=this._getForegroundColor(w,q,N,L,F,fe,x,H,A,(0,v.excludeFromContrastRatioDemands)(P.charCodeAt(0)));this._tmpCtx.fillStyle=ke.css;let Re=et?0:4,$e=!1;this._config.customGlyphs!==!1&&($e=(0,u.tryDrawCustomChar)(this._tmpCtx,P,Re,Re,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Bt,Cr=!Me;if(Bt=typeof S=="number"?this._unicodeService.wcwidth(S):this._unicodeService.getStringCellWidth(S),re){this._tmpCtx.save();let X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),me=X%2==1?.5:0;if(this._tmpCtx.lineWidth=X,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Cr=!1,this._tmpCtx.strokeStyle=`rgb(${i.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Cr=!1;let fr=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&fr<8&&(fr+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(fr).css}this._tmpCtx.beginPath();let Be=Re,ze=Math.ceil(Re+this._config.deviceCharHeight)-me-(R?2*X:0),xt=ze+X,rr=ze+2*X;for(let fr=0;fr<Bt;fr++){this._tmpCtx.save();let nt=Be+fr*this._config.deviceCellWidth,kn=Be+(fr+1)*this._config.deviceCellWidth,_p=nt+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(nt,ze),this._tmpCtx.lineTo(kn,ze),this._tmpCtx.moveTo(nt,rr),this._tmpCtx.lineTo(kn,rr);break;case 3:let ff=X<=1?rr:Math.ceil(Re+this._config.deviceCharHeight-X/2)-me,lf=X<=1?ze:Math.ceil(Re+this._config.deviceCharHeight+X/2)-me,Yg=new Path2D;Yg.rect(nt,ze,this._config.deviceCellWidth,rr-ze),this._tmpCtx.clip(Yg),this._tmpCtx.moveTo(nt-this._config.deviceCellWidth/2,xt),this._tmpCtx.bezierCurveTo(nt-this._config.deviceCellWidth/2,lf,nt,lf,nt,xt),this._tmpCtx.bezierCurveTo(nt,ff,_p,ff,_p,xt),this._tmpCtx.bezierCurveTo(_p,lf,kn,lf,kn,xt),this._tmpCtx.bezierCurveTo(kn,ff,kn+this._config.deviceCellWidth/2,ff,kn+this._config.deviceCellWidth/2,xt);break;case 4:this._tmpCtx.setLineDash([Math.round(X),Math.round(X)]),this._tmpCtx.moveTo(nt,ze),this._tmpCtx.lineTo(kn,ze);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(nt,ze),this._tmpCtx.lineTo(kn,ze);break;default:this._tmpCtx.moveTo(nt,ze),this._tmpCtx.lineTo(kn,ze)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!$e&&this._config.fontSize>=12&&!this._config.allowTransparency&&P!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let fr=this._tmpCtx.measureText(P);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in fr&&fr.actualBoundingBoxDescent>0){this._tmpCtx.save();let nt=new Path2D;nt.rect(Be,ze-Math.ceil(X/2),this._config.deviceCellWidth*Bt,rr-ze+Math.ceil(X/2)),this._tmpCtx.clip(nt),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=k.css,this._tmpCtx.strokeText(P,Re,Re+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(V){let X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),me=X%2==1?.5:0;this._tmpCtx.lineWidth=X,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Re,Re+me),this._tmpCtx.lineTo(Re+this._config.deviceCharWidth*Bt,Re+me),this._tmpCtx.stroke()}if($e||this._tmpCtx.fillText(P,Re,Re+this._config.deviceCharHeight),P==="_"&&!this._config.allowTransparency){let X=m(this._tmpCtx.getImageData(Re,Re,this._config.deviceCellWidth,this._config.deviceCellHeight),k,ke,Cr);if(X)for(let me=1;me<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(P,Re,Re+this._config.deviceCharHeight-me),X=m(this._tmpCtx.getImageData(Re,Re,this._config.deviceCellWidth,this._config.deviceCellHeight),k,ke,Cr),X);me++);}if(oe){let X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),me=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=X,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Re,Re+Math.floor(this._config.deviceCharHeight/2)-me),this._tmpCtx.lineTo(Re+this._config.deviceCharWidth*Bt,Re+Math.floor(this._config.deviceCharHeight/2)-me),this._tmpCtx.stroke()}this._tmpCtx.restore();let Mr=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),Tt;if(Tt=this._config.allowTransparency?function(X){for(let me=0;me<X.data.length;me+=4)if(X.data[me+3]>0)return!1;return!0}(Mr):m(Mr,k,ke,Cr),Tt)return D;let ce=this._findGlyphBoundingBox(Mr,this._workBoundingBox,W,et,$e,Re),ue,ne;for(;;){if(this._activePages.length===0){let X=this._createNewPage();ue=X,ne=X.currentRow,ne.height=ce.size.y;break}ue=this._activePages[this._activePages.length-1],ne=ue.currentRow;for(let X of this._activePages)ce.size.y<=X.currentRow.height&&(ue=X,ne=X.currentRow);for(let X=this._activePages.length-1;X>=0;X--)for(let me of this._activePages[X].fixedRows)me.height<=ne.height&&ce.size.y<=me.height&&(ue=this._activePages[X],ne=me);if(ne.y+ce.size.y>=ue.canvas.height||ne.height>ce.size.y+2){let X=!1;if(ue.currentRow.y+ue.currentRow.height+ce.size.y>=ue.canvas.height){let me;for(let Be of this._activePages)if(Be.currentRow.y+Be.currentRow.height+ce.size.y<Be.canvas.height){me=Be;break}if(me)ue=me;else if(b.maxAtlasPages&&this._pages.length>=b.maxAtlasPages&&ne.y+ce.size.y<=ue.canvas.height&&ne.height>=ce.size.y&&ne.x+ce.size.x<=ue.canvas.width)X=!0;else{let Be=this._createNewPage();ue=Be,ne=Be.currentRow,ne.height=ce.size.y,X=!0}}X||(ue.currentRow.height>0&&ue.fixedRows.push(ue.currentRow),ne={x:0,y:ue.currentRow.y+ue.currentRow.height,height:ce.size.y},ue.fixedRows.push(ne),ue.currentRow={x:0,y:ne.y+ne.height,height:0})}if(ne.x+ce.size.x<=ue.canvas.width)break;ne===ue.currentRow?(ne.x=0,ne.y+=ne.height,ne.height=0):ue.fixedRows.splice(ue.fixedRows.indexOf(ne),1)}return ce.texturePage=this._pages.indexOf(ue),ce.texturePosition.x=ne.x,ce.texturePosition.y=ne.y,ce.texturePositionClipSpace.x=ne.x/ue.canvas.width,ce.texturePositionClipSpace.y=ne.y/ue.canvas.height,ce.sizeClipSpace.x/=ue.canvas.width,ce.sizeClipSpace.y/=ue.canvas.height,ne.height=Math.max(ne.height,ce.size.y),ne.x+=ce.size.x,ue.ctx.putImageData(Mr,ce.texturePosition.x-this._workBoundingBox.left,ce.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ce.size.x,ce.size.y),ue.addGlyph(ce),ue.version++,ce}_findGlyphBoundingBox(S,w,L,I,R,P){w.top=0;let W=I?this._config.deviceCellHeight:this._tmpCanvas.height,E=I?this._config.deviceCellWidth:L,A=!1;for(let x=0;x<W;x++){for(let H=0;H<E;H++){let U=x*this._tmpCanvas.width*4+4*H+3;if(S.data[U]!==0){w.top=x,A=!0;break}}if(A)break}w.left=0,A=!1;for(let x=0;x<P+E;x++){for(let H=0;H<W;H++){let U=H*this._tmpCanvas.width*4+4*x+3;if(S.data[U]!==0){w.left=x,A=!0;break}}if(A)break}w.right=E,A=!1;for(let x=P+E-1;x>=P;x--){for(let H=0;H<W;H++){let U=H*this._tmpCanvas.width*4+4*x+3;if(S.data[U]!==0){w.right=x,A=!0;break}}if(A)break}w.bottom=W,A=!1;for(let x=W-1;x>=0;x--){for(let H=0;H<E;H++){let U=x*this._tmpCanvas.width*4+4*H+3;if(S.data[U]!==0){w.bottom=x,A=!0;break}}if(A)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:w.right-w.left+1,y:w.bottom-w.top+1},sizeClipSpace:{x:w.right-w.left+1,y:w.bottom-w.top+1},offset:{x:-w.left+P+(I||R?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-w.top+P+(I||R?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}r.TextureAtlas=b,c([_.traceCall],b.prototype,"_drawToCache",null);class T{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(S){this._glyphs.push(S),this._usedPixels+=S.size.x*S.size.y}constructor(S,w,L){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],L)for(let I of L)this._glyphs.push(...I.glyphs),this._usedPixels+=I._usedPixels;this.canvas=y(S,w,w),this.ctx=(0,v.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function m(M,S,w,L){let I=S.rgba>>>24,R=S.rgba>>>16&255,P=S.rgba>>>8&255,W=w.rgba>>>24,E=w.rgba>>>16&255,A=w.rgba>>>8&255,x=Math.floor((Math.abs(I-W)+Math.abs(R-E)+Math.abs(P-A))/12),H=!0;for(let U=0;U<M.data.length;U+=4)M.data[U]===I&&M.data[U+1]===R&&M.data[U+2]===P||L&&Math.abs(M.data[U]-I)+Math.abs(M.data[U+1]-R)+Math.abs(M.data[U+2]-P)<x?M.data[U+3]=0:H=!1;return H}function y(M,S,w){let L=M.createElement("canvas");return L.width=S,L.height=w,L}},160:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let c=o(399),f=0,u=0,v=0,h=0;var g,d,a,i,s;function _(C){let b=C.toString(16);return b.length<2?"0"+b:b}function D(C,b){return C<b?(b+.05)/(C+.05):(C+.05)/(b+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(b,T,m,y){return y!==void 0?`#${_(b)}${_(T)}${_(m)}${_(y)}`:`#${_(b)}${_(T)}${_(m)}`},C.toRgba=function(b,T,m,y=255){return(b<<24|T<<16|m<<8|y)>>>0}}(g||(r.channels=g={})),function(C){function b(T,m){return h=Math.round(255*m),[f,u,v]=s.toChannels(T.rgba),{css:g.toCss(f,u,v,h),rgba:g.toRgba(f,u,v,h)}}C.blend=function(T,m){if(h=(255&m.rgba)/255,h===1)return{css:m.css,rgba:m.rgba};let y=m.rgba>>24&255,M=m.rgba>>16&255,S=m.rgba>>8&255,w=T.rgba>>24&255,L=T.rgba>>16&255,I=T.rgba>>8&255;return f=w+Math.round((y-w)*h),u=L+Math.round((M-L)*h),v=I+Math.round((S-I)*h),{css:g.toCss(f,u,v),rgba:g.toRgba(f,u,v)}},C.isOpaque=function(T){return(255&T.rgba)==255},C.ensureContrastRatio=function(T,m,y){let M=s.ensureContrastRatio(T.rgba,m.rgba,y);if(M)return s.toColor(M>>24&255,M>>16&255,M>>8&255)},C.opaque=function(T){let m=(255|T.rgba)>>>0;return[f,u,v]=s.toChannels(m),{css:g.toCss(f,u,v),rgba:m}},C.opacity=b,C.multiplyOpacity=function(T,m){return h=255&T.rgba,b(T,h*m/255)},C.toColorRGB=function(T){return[T.rgba>>24&255,T.rgba>>16&255,T.rgba>>8&255]}}(d||(r.color=d={})),function(C){let b,T;if(!c.isNode){let m=document.createElement("canvas");m.width=1,m.height=1;let y=m.getContext("2d",{willReadFrequently:!0});y&&(b=y,b.globalCompositeOperation="copy",T=b.createLinearGradient(0,0,1,1))}C.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return f=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),v=parseInt(m.slice(3,4).repeat(2),16),s.toColor(f,u,v);case 5:return f=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),v=parseInt(m.slice(3,4).repeat(2),16),h=parseInt(m.slice(4,5).repeat(2),16),s.toColor(f,u,v,h);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}let y=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(y)return f=parseInt(y[1]),u=parseInt(y[2]),v=parseInt(y[3]),h=Math.round(255*(y[5]===void 0?1:parseFloat(y[5]))),s.toColor(f,u,v,h);if(!b||!T)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=T,b.fillStyle=m,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[f,u,v,h]=b.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(f,u,v,h),css:m}}}(a||(r.css=a={})),function(C){function b(T,m,y){let M=T/255,S=m/255,w=y/255;return .2126*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))}C.relativeLuminance=function(T){return b(T>>16&255,T>>8&255,255&T)},C.relativeLuminance2=b}(i||(r.rgb=i={})),function(C){function b(m,y,M){let S=m>>24&255,w=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,w,L));for(;W<M&&(I>0||R>0||P>0);)I-=Math.max(0,Math.ceil(.1*I)),R-=Math.max(0,Math.ceil(.1*R)),P-=Math.max(0,Math.ceil(.1*P)),W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,w,L));return(I<<24|R<<16|P<<8|255)>>>0}function T(m,y,M){let S=m>>24&255,w=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,w,L));for(;W<M&&(I<255||R<255||P<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),R=Math.min(255,R+Math.ceil(.1*(255-R))),P=Math.min(255,P+Math.ceil(.1*(255-P))),W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,w,L));return(I<<24|R<<16|P<<8|255)>>>0}C.ensureContrastRatio=function(m,y,M){let S=i.relativeLuminance(m>>8),w=i.relativeLuminance(y>>8);if(D(S,w)<M){if(w<S){let R=b(m,y,M),P=D(S,i.relativeLuminance(R>>8));if(P<M){let W=T(m,y,M);return P>D(S,i.relativeLuminance(W>>8))?R:W}return R}let L=T(m,y,M),I=D(S,i.relativeLuminance(L>>8));if(I<M){let R=b(m,y,M);return I>D(S,i.relativeLuminance(R>>8))?L:R}return L}},C.reduceLuminance=b,C.increaseLuminance=T,C.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]},C.toColor=function(m,y,M,S){return{css:g.toCss(m,y,M,S),rgba:g.toRgba(m,y,M,S)}}}(s||(r.rgba=s={})),r.toPaddedHex=_,r.contrastRatio=D},345:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===o)return void this._listeners.splice(c,1)}}})),this._event}fire(o,c){let f=[];for(let u=0;u<this._listeners.length;u++)f.push(this._listeners[u]);for(let u=0;u<f.length;u++)f[u].call(void 0,o,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(o,c){return o(f=>c.fire(f))}},859:(p,r)=>{function o(c){for(let f of c)f.dispose();c.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){let f=this._disposables.indexOf(c);f!==-1&&this._disposables.splice(f,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){var f;this._isDisposed||c===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){var c;this._isDisposed=!0,(c=this._value)===null||c===void 0||c.dispose(),this._value=void 0}},r.toDisposable=function(c){return{dispose:c}},r.disposeArray=o,r.getDisposeArrayDisposable=function(c){return{dispose:()=>o(c)}}},485:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(f,u,v){this._data[f]||(this._data[f]={}),this._data[f][u]=v}get(f,u){return this._data[f]?this._data[f][u]:void 0}clear(){this._data={}}}r.TwoKeyMap=o,r.FourKeyMap=class{constructor(){this._data=new o}set(c,f,u,v,h){this._data.get(c,f)||this._data.set(c,f,new o),this._data.get(c,f).set(u,v,h)}get(c,f,u,v){var h;return(h=this._data.get(c,f))===null||h===void 0?void 0:h.get(u,v)}clear(){this._data.clear()}}},399:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";let o=r.isNode?"node":navigator.userAgent,c=r.isNode?"node":navigator.platform;r.isFirefox=o.includes("Firefox"),r.isLegacyEdge=o.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(o),r.getSafariVersion=function(){if(!r.isSafari)return 0;let f=o.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),r.isIpad=c==="iPad",r.isIphone=c==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),r.isLinux=c.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(o)},385:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;let c=o(399);class f{constructor(){this._tasks=[],this._i=0}enqueue(h){this._tasks.push(h),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(h){this._idleCallback=void 0;let g=0,d=0,a=h.timeRemaining(),i=0;for(;this._i<this._tasks.length;){if(g=Date.now(),this._tasks[this._i]()||this._i++,g=Math.max(1,Date.now()-g),d=Math.max(g,d),i=h.timeRemaining(),1.5*d>i)return a-g<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-g))}ms`),void this._start();a=i}this.clear()}}class u extends f{_requestCallback(h){return setTimeout(()=>h(this._createDeadline(16)))}_cancelCallback(h){clearTimeout(h)}_createDeadline(h){let g=Date.now()+h;return{timeRemaining:()=>Math.max(0,g-Date.now())}}}r.PriorityTaskQueue=u,r.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:u,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},147:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){let u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=o;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,v=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=v}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=c},782:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;let c=o(133),f=o(855),u=o(147);class v extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(g){let d=new v;return d.setFromCharData(g),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(g){this.fg=g[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(g[f.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(g[f.CHAR_DATA_CHAR_INDEX].length===2){let a=g[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){let i=g[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(a-55296)+i-56320+65536|g[f.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=g[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[f.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=g[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=v},855:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},133:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},r.utf32ToString=function(o,c=0,f=o.length){let u="";for(let v=c;v<f;++v){let h=o[v];h>65535?(h-=65536,u+=String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):u+=String.fromCharCode(h)}return u},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,c){let f=o.length;if(!f)return 0;let u=0,v=0;if(this._interim){let h=o.charCodeAt(v++);56320<=h&&h<=57343?c[u++]=1024*(this._interim-55296)+h-56320+65536:(c[u++]=this._interim,c[u++]=h),this._interim=0}for(let h=v;h<f;++h){let g=o.charCodeAt(h);if(55296<=g&&g<=56319){if(++h>=f)return this._interim=g,u;let d=o.charCodeAt(h);56320<=d&&d<=57343?c[u++]=1024*(g-55296)+d-56320+65536:(c[u++]=g,c[u++]=d)}else g!==65279&&(c[u++]=g)}return u}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,c){let f=o.length;if(!f)return 0;let u,v,h,g,d=0,a=0,i=0;if(this.interim[0]){let D=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let b,T=0;for(;(b=63&this.interim[++T])&&T<4;)C<<=6,C|=b;let m=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=m-T;for(;i<y;){if(i>=f)return 0;if(b=o[i++],(192&b)!=128){i--,D=!0;break}this.interim[T++]=b,C<<=6,C|=63&b}D||(m===2?C<128?i--:c[d++]=C:m===3?C<2048||C>=55296&&C<=57343||C===65279||(c[d++]=C):C<65536||C>1114111||(c[d++]=C)),this.interim.fill(0)}let s=f-4,_=i;for(;_<f;){for(;!(!(_<s)||128&(u=o[_])||128&(v=o[_+1])||128&(h=o[_+2])||128&(g=o[_+3]));)c[d++]=u,c[d++]=v,c[d++]=h,c[d++]=g,_+=4;if(u=o[_++],u<128)c[d++]=u;else if((224&u)==192){if(_>=f)return this.interim[0]=u,d;if(v=o[_++],(192&v)!=128){_--;continue}if(a=(31&u)<<6|63&v,a<128){_--;continue}c[d++]=a}else if((240&u)==224){if(_>=f)return this.interim[0]=u,d;if(v=o[_++],(192&v)!=128){_--;continue}if(_>=f)return this.interim[0]=u,this.interim[1]=v,d;if(h=o[_++],(192&h)!=128){_--;continue}if(a=(15&u)<<12|(63&v)<<6|63&h,a<2048||a>=55296&&a<=57343||a===65279)continue;c[d++]=a}else if((248&u)==240){if(_>=f)return this.interim[0]=u,d;if(v=o[_++],(192&v)!=128){_--;continue}if(_>=f)return this.interim[0]=u,this.interim[1]=v,d;if(h=o[_++],(192&h)!=128){_--;continue}if(_>=f)return this.interim[0]=u,this.interim[1]=v,this.interim[2]=h,d;if(g=o[_++],(192&g)!=128){_--;continue}if(a=(7&u)<<18|(63&v)<<12|(63&h)<<6|63&g,a<65536||a>1114111)continue;c[d++]=a}}return d}}},776:function(p,r,o){var c=this&&this.__decorate||function(a,i,s,_){var D,C=arguments.length,b=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,s):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,_);else for(var T=a.length-1;T>=0;T--)(D=a[T])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},f=this&&this.__param||function(a,i){return function(s,_){i(s,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;let u=o(859),v=o(97),h={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF},g,d=r.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),g=this}_updateLogLevel(){this._logLevel=h[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let i=0;i<a.length;i++)typeof a[i]=="function"&&(a[i]=a[i]())}_log(a,i,s){this._evalLazyOptionalParams(s),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+i,...s)}trace(a,...i){var s,_;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((_=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.trace.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,a,i)}debug(a,...i){var s,_;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((_=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.debug.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,a,i)}info(a,...i){var s,_;this._logLevel<=v.LogLevelEnum.INFO&&this._log((_=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.info.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.info,a,i)}warn(a,...i){var s,_;this._logLevel<=v.LogLevelEnum.WARN&&this._log((_=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.warn.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.warn,a,i)}error(a,...i){var s,_;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((_=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.error.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.error,a,i)}};r.LogService=d=c([f(0,v.IOptionsService)],d),r.setTraceLogger=function(a){g=a},r.traceCall=function(a,i,s){if(typeof s.value!="function")throw new Error("not supported");let _=s.value;s.value=function(...D){if(g.logLevel!==v.LogLevelEnum.TRACE)return _.apply(this,D);g.trace(`GlyphRenderer#${_.name}(${D.map(b=>JSON.stringify(b)).join(", ")})`);let C=_.apply(this,D);return g.trace(`GlyphRenderer#${_.name} return`,C),C}}},726:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;let o="di$target",c="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(f){return f[c]||[]},r.createDecorator=function(f){if(r.serviceRegistry.has(f))return r.serviceRegistry.get(f);let u=function(v,h,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,a,i){a[o]===a?a[c].push({id:d,index:i}):(a[c]=[{id:d,index:i}],a[o]=a)})(u,v,g)};return u.toString=()=>f,r.serviceRegistry.set(f,u),u}},97:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;let c=o(726);var f;r.IBufferService=(0,c.createDecorator)("BufferService"),r.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),r.ICoreService=(0,c.createDecorator)("CoreService"),r.ICharsetService=(0,c.createDecorator)("CharsetService"),r.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(f||(r.LogLevelEnum=f={})),r.ILogService=(0,c.createDecorator)("LogService"),r.IOptionsService=(0,c.createDecorator)("OptionsService"),r.IOscLinkService=(0,c.createDecorator)("OscLinkService"),r.IUnicodeService=(0,c.createDecorator)("UnicodeService"),r.IDecorationService=(0,c.createDecorator)("DecorationService")}},t={};function n(p){var r=t[p];if(r!==void 0)return r.exports;var o=t[p]={exports:{}};return e[p].call(o.exports,o,o.exports,n),o.exports}var l={};return(()=>{var p=l;Object.defineProperty(p,"__esModule",{value:!0}),p.WebglAddon=void 0;let r=n(345),o=n(859),c=n(399),f=n(666),u=n(776);class v extends o.Disposable{constructor(g){if(c.isSafari&&(0,c.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=g,this._onChangeTextureAtlas=this.register(new r.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new r.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new r.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new r.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(g){let d=g._core;if(!g.element)return void this.register(d.onWillOpen(()=>this.activate(g)));this._terminal=g;let a=d.coreService,i=d.optionsService,s=d,_=s._renderService,D=s._characterJoinerService,C=s._charSizeService,b=s._coreBrowserService,T=s._decorationService,m=s._logService,y=s._themeService;(0,u.setTraceLogger)(m),this._renderer=this.register(new f.WebglRenderer(g,D,C,b,a,T,i,y,this._preserveDrawingBuffer)),this.register((0,r.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,r.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,r.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,r.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),_.setRenderer(this._renderer),this.register((0,o.toDisposable)(()=>{let M=this._terminal._core._renderService;M.setRenderer(this._terminal._core._createRenderer()),M.handleResize(g.cols,g.rows)}))}get textureAtlas(){var g;return(g=this._renderer)===null||g===void 0?void 0:g.textureAtlas}clearTextureAtlas(){var g;(g=this._renderer)===null||g===void 0||g.clearTextureAtlas()}}p.WebglAddon=v})(),l})())});var j1=_f((G_,Yh)=>{(function(e,t){typeof G_=="object"&&typeof Yh=="object"?Yh.exports=t():typeof define=="function"&&define.amd?define([],t):typeof G_=="object"?G_.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkComputer=r.WebLinkProvider=void 0,r.WebLinkProvider=class{constructor(c,f,u,v={}){this._terminal=c,this._regex=f,this._handler=u,this._options=v}provideLinks(c,f){let u=o.computeLink(c,this._regex,this._terminal,this._handler);f(this._addCallbacks(u))}_addCallbacks(c){return c.map(f=>(f.leave=this._options.leave,f.hover=(u,v)=>{if(this._options.hover){let{range:h}=f;this._options.hover(u,v,h)}},f))}};class o{static computeLink(f,u,v,h){let g=new RegExp(u.source,(u.flags||"")+"g"),[d,a]=o._getWindowedLineStrings(f-1,v),i=d.join(""),s,_=[];for(;s=g.exec(i);){let D=s[0];try{let M=new URL(D),S=decodeURI(M.toString());if(D!==S&&D+"/"!==S)continue}catch{continue}let[C,b]=o._mapStrIdx(v,a,0,s.index),[T,m]=o._mapStrIdx(v,C,b,D.length);if(C===-1||b===-1||T===-1||m===-1)continue;let y={start:{x:b+1,y:C+1},end:{x:m,y:T+1}};_.push({range:y,text:D,activate:h})}return _}static _getWindowedLineStrings(f,u){let v,h=f,g=f,d=0,a="",i=[];if(v=u.buffer.active.getLine(f)){let s=v.translateToString(!0);if(v.isWrapped&&s[0]!==" "){for(d=0;(v=u.buffer.active.getLine(--h))&&d<2048&&(a=v.translateToString(!0),d+=a.length,i.push(a),v.isWrapped&&a.indexOf(" ")===-1););i.reverse()}for(i.push(s),d=0;(v=u.buffer.active.getLine(++g))&&v.isWrapped&&d<2048&&(a=v.translateToString(!0),d+=a.length,i.push(a),a.indexOf(" ")===-1););}return[i,h]}static _mapStrIdx(f,u,v,h){let g=f.buffer.active,d=g.getNullCell(),a=v;for(;h;){let i=g.getLine(u);if(!i)return[-1,-1];for(let s=a;s<i.length;++s){i.getCell(s,d);let _=d.getChars();if(d.getWidth()&&(h-=_.length||1,s===i.length-1&&_==="")){let D=g.getLine(u+1);D&&D.isWrapped&&(D.getCell(0,d),d.getWidth()===2&&(h+=1))}if(h<0)return[u,s]}u++,a=0}return[u,a]}}r.LinkComputer=o}},t={};function n(p){var r=t[p];if(r!==void 0)return r.exports;var o=t[p]={exports:{}};return e[p](o,o.exports,n),o.exports}var l={};return(()=>{var p=l;Object.defineProperty(p,"__esModule",{value:!0}),p.WebLinksAddon=void 0;let r=n(6),o=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function c(f,u){let v=window.open();if(v){try{v.opener=null}catch{}v.location.href=u}else console.warn("Opening link blocked as opener could not be cleared")}p.WebLinksAddon=class{constructor(f=c,u={}){this._handler=f,this._options=u}activate(f){this._terminal=f;let u=this._options,v=u.urlRegex||o;this._linkProvider=this._terminal.registerLinkProvider(new r.WebLinkProvider(this._terminal,v,this._handler,u))}dispose(){var f;(f=this._linkProvider)===null||f===void 0||f.dispose()}}})(),l})())});var eE=_f((J_,rg)=>{(function(e,t){if(typeof J_=="object"&&typeof rg=="object")rg.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var l in n)(typeof J_=="object"?J_:e)[l]=n[l]}})(self,()=>(()=>{"use strict";var e={4567:function(p,r,o){var c=this&&this.__decorate||function(_,D,C,b){var T,m=arguments.length,y=m<3?D:b===null?b=Object.getOwnPropertyDescriptor(D,C):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(_,D,C,b);else for(var M=_.length-1;M>=0;M--)(T=_[M])&&(y=(m<3?T(y):m>3?T(D,C,y):T(D,C))||y);return m>3&&y&&Object.defineProperty(D,C,y),y},f=this&&this.__param||function(_,D){return function(C,b){D(C,b,_)}};Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityManager=void 0;let u=o(9042),v=o(6114),h=o(9924),g=o(844),d=o(5596),a=o(4725),i=o(3656),s=r.AccessibilityManager=class extends g.Disposable{constructor(_,D){super(),this._terminal=_,this._renderService=D,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new h.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new d.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,i.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,g.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(_){for(let D=0;D<_;D++)this._handleChar(" ")}_handleChar(_){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==_&&(this._charsToAnnounce+=_):this._charsToAnnounce+=_,_===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&this._liveRegion.remove()}_handleKey(_){this._clearLiveRegion(),/\p{Control}/u.test(_)||this._charsToConsume.push(_)}_refreshRows(_,D){this._liveRegionDebouncer.refresh(_,D,this._terminal.rows)}_renderRows(_,D){let C=this._terminal.buffer,b=C.lines.length.toString();for(let T=_;T<=D;T++){let m=C.translateBufferLineToString(C.ydisp+T,!0),y=(C.ydisp+T+1).toString(),M=this._rowElements[T];M&&(m.length===0?M.innerText="\xA0":M.textContent=m,M.setAttribute("aria-posinset",y),M.setAttribute("aria-setsize",b))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(_,D){let C=_.target,b=this._rowElements[D===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(D===0?"1":`${this._terminal.buffer.lines.length}`)||_.relatedTarget!==b)return;let T,m;if(D===0?(T=C,m=this._rowElements.pop(),this._rowContainer.removeChild(m)):(T=this._rowElements.shift(),m=C,this._rowContainer.removeChild(T)),T.removeEventListener("focus",this._topBoundaryFocusListener),m.removeEventListener("focus",this._bottomBoundaryFocusListener),D===0){let y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{let y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(D===0?-1:1),this._rowElements[D===0?1:this._rowElements.length-2].focus(),_.preventDefault(),_.stopImmediatePropagation()}_handleResize(_){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let D=this._rowContainer.children.length;D<this._terminal.rows;D++)this._rowElements[D]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[D]);for(;this._rowElements.length>_;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let _=document.createElement("div");return _.setAttribute("role","listitem"),_.tabIndex=-1,this._refreshRowDimensions(_),_}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let _=0;_<this._terminal.rows;_++)this._refreshRowDimensions(this._rowElements[_])}}_refreshRowDimensions(_){_.style.height=`${this._renderService.dimensions.css.cell.height}px`}};r.AccessibilityManager=s=c([f(1,a.IRenderService)],s)},3614:(p,r)=>{function o(v){return v.replace(/\r?\n/g,"\r")}function c(v,h){return h?"\x1B[200~"+v+"\x1B[201~":v}function f(v,h,g,d){v=c(v=o(v),g.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),g.triggerDataEvent(v,!0),h.value=""}function u(v,h,g){let d=g.getBoundingClientRect(),a=v.clientX-d.left-10,i=v.clientY-d.top-10;h.style.width="20px",h.style.height="20px",h.style.left=`${a}px`,h.style.top=`${i}px`,h.style.zIndex="1000",h.focus()}Object.defineProperty(r,"__esModule",{value:!0}),r.rightClickHandler=r.moveTextAreaUnderMouseCursor=r.paste=r.handlePasteEvent=r.copyHandler=r.bracketTextForPaste=r.prepareTextForTerminal=void 0,r.prepareTextForTerminal=o,r.bracketTextForPaste=c,r.copyHandler=function(v,h){v.clipboardData&&v.clipboardData.setData("text/plain",h.selectionText),v.preventDefault()},r.handlePasteEvent=function(v,h,g,d){v.stopPropagation(),v.clipboardData&&f(v.clipboardData.getData("text/plain"),h,g,d)},r.paste=f,r.moveTextAreaUnderMouseCursor=u,r.rightClickHandler=function(v,h,g,d,a){u(v,h,g),a&&d.rightClickSelect(v),h.value=d.selectionText,h.select()}},7239:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorContrastCache=void 0;let c=o(1505);r.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(f,u,v){this._css.set(f,u,v)}getCss(f,u){return this._css.get(f,u)}setColor(f,u,v){this._color.set(f,u,v)}getColor(f,u){return this._color.get(f,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(o,c,f,u){o.addEventListener(c,f,u);let v=!1;return{dispose:()=>{v||(v=!0,o.removeEventListener(c,f,u))}}}},6465:function(p,r,o){var c=this&&this.__decorate||function(a,i,s,_){var D,C=arguments.length,b=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,s):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,_);else for(var T=a.length-1;T>=0;T--)(D=a[T])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},f=this&&this.__param||function(a,i){return function(s,_){i(s,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Linkifier2=void 0;let u=o(3656),v=o(8460),h=o(844),g=o(2585),d=r.Linkifier2=class extends h.Disposable{get currentLink(){return this._currentLink}constructor(a){super(),this._bufferService=a,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,h.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,h.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(a){return this._linkProviders.push(a),{dispose:()=>{let i=this._linkProviders.indexOf(a);i!==-1&&this._linkProviders.splice(i,1)}}}attachToDom(a,i,s){this._element=a,this._mouseService=i,this._renderService=s,this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){if(this._lastMouseEvent=a,!this._element||!this._mouseService)return;let i=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!i)return;this._isMouseOut=!1;let s=a.composedPath();for(let _=0;_<s.length;_++){let D=s[_];if(D.classList.contains("xterm"))break;if(D.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._handleHover(i),this._lastBufferCell=i)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,i){var s,_;this._activeProviderReplies&&i||((s=this._activeProviderReplies)===null||s===void 0||s.forEach(C=>{C?.forEach(b=>{b.link.dispose&&b.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let D=!1;for(let[C,b]of this._linkProviders.entries())i?!((_=this._activeProviderReplies)===null||_===void 0)&&_.get(C)&&(D=this._checkLinkProviderResult(C,a,D)):b.provideLinks(a.y,T=>{var m,y;if(this._isMouseOut)return;let M=T?.map(S=>({link:S}));(m=this._activeProviderReplies)===null||m===void 0||m.set(C,M),D=this._checkLinkProviderResult(C,a,D),((y=this._activeProviderReplies)===null||y===void 0?void 0:y.size)===this._linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,i){let s=new Set;for(let _=0;_<i.size;_++){let D=i.get(_);if(D)for(let C=0;C<D.length;C++){let b=D[C],T=b.link.range.start.y<a?0:b.link.range.start.x,m=b.link.range.end.y>a?this._bufferService.cols:b.link.range.end.x;for(let y=T;y<=m;y++){if(s.has(y)){D.splice(C--,1);break}s.add(y)}}}}_checkLinkProviderResult(a,i,s){var _;if(!this._activeProviderReplies)return s;let D=this._activeProviderReplies.get(a),C=!1;for(let b=0;b<a;b++)this._activeProviderReplies.has(b)&&!this._activeProviderReplies.get(b)||(C=!0);if(!C&&D){let b=D.find(T=>this._linkAtPosition(T.link,i));b&&(s=!0,this._handleNewLink(b))}if(this._activeProviderReplies.size===this._linkProviders.length&&!s)for(let b=0;b<this._activeProviderReplies.size;b++){let T=(_=this._activeProviderReplies.get(b))===null||_===void 0?void 0:_.find(m=>this._linkAtPosition(m.link,i));if(T){s=!0,this._handleNewLink(T);break}}return s}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._element||!this._mouseService||!this._currentLink)return;let i=this._positionFromMouseEvent(a,this._element,this._mouseService);i&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!a||!i||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,h.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(a.link,i)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var s,_;return(_=(s=this._currentLink)===null||s===void 0?void 0:s.state)===null||_===void 0?void 0:_.decorations.pointerCursor},set:s=>{var _,D;!((_=this._currentLink)===null||_===void 0)&&_.state&&this._currentLink.state.decorations.pointerCursor!==s&&(this._currentLink.state.decorations.pointerCursor=s,this._currentLink.state.isHovered&&((D=this._element)===null||D===void 0||D.classList.toggle("xterm-cursor-pointer",s)))}},underline:{get:()=>{var s,_;return(_=(s=this._currentLink)===null||s===void 0?void 0:s.state)===null||_===void 0?void 0:_.decorations.underline},set:s=>{var _,D,C;!((_=this._currentLink)===null||_===void 0)&&_.state&&((C=(D=this._currentLink)===null||D===void 0?void 0:D.state)===null||C===void 0?void 0:C.decorations.underline)!==s&&(this._currentLink.state.decorations.underline=s,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,s))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(s=>{if(!this._currentLink)return;let _=s.start===0?0:s.start+1+this._bufferService.buffer.ydisp,D=this._bufferService.buffer.ydisp+1+s.end;if(this._currentLink.link.range.start.y>=_&&this._currentLink.link.range.end.y<=D&&(this._clearCurrentLink(_,D),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(a,i,s){var _;!((_=this._currentLink)===null||_===void 0)&&_.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(s,i.text)}_fireUnderlineEvent(a,i){let s=a.range,_=this._bufferService.buffer.ydisp,D=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-_-1,s.end.x,s.end.y-_-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(D)}_linkLeave(a,i,s){var _;!((_=this._currentLink)===null||_===void 0)&&_.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(s,i.text)}_linkAtPosition(a,i){let s=a.range.start.y*this._bufferService.cols+a.range.start.x,_=a.range.end.y*this._bufferService.cols+a.range.end.x,D=i.y*this._bufferService.cols+i.x;return s<=D&&D<=_}_positionFromMouseEvent(a,i,s){let _=s.getCoords(a,i,this._bufferService.cols,this._bufferService.rows);if(_)return{x:_[0],y:_[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,i,s,_,D){return{x1:a,y1:i,x2:s,y2:_,cols:this._bufferService.cols,fg:D}}};r.Linkifier2=d=c([f(0,g.IBufferService)],d)},9042:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tooMuchOutput=r.promptLabel=void 0,r.promptLabel="Terminal input",r.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(p,r,o){var c=this&&this.__decorate||function(d,a,i,s){var _,D=arguments.length,C=D<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,a,i,s);else for(var b=d.length-1;b>=0;b--)(_=d[b])&&(C=(D<3?_(C):D>3?_(a,i,C):_(a,i))||C);return D>3&&C&&Object.defineProperty(a,i,C),C},f=this&&this.__param||function(d,a){return function(i,s){a(i,s,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkProvider=void 0;let u=o(511),v=o(2585),h=r.OscLinkProvider=class{constructor(d,a,i){this._bufferService=d,this._optionsService=a,this._oscLinkService=i}provideLinks(d,a){var i;let s=this._bufferService.buffer.lines.get(d-1);if(!s)return void a(void 0);let _=[],D=this._optionsService.rawOptions.linkHandler,C=new u.CellData,b=s.getTrimmedLength(),T=-1,m=-1,y=!1;for(let M=0;M<b;M++)if(m!==-1||s.hasContent(M)){if(s.loadCell(M,C),C.hasExtendedAttrs()&&C.extended.urlId){if(m===-1){m=M,T=C.extended.urlId;continue}y=C.extended.urlId!==T}else m!==-1&&(y=!0);if(y||m!==-1&&M===b-1){let S=(i=this._oscLinkService.getLinkData(T))===null||i===void 0?void 0:i.uri;if(S){let w={start:{x:m+1,y:d},end:{x:M+(y||M!==b-1?0:1),y:d}},L=!1;if(!D?.allowNonHttpProtocols)try{let I=new URL(S);["http:","https:"].includes(I.protocol)||(L=!0)}catch{L=!0}L||_.push({text:S,range:w,activate:(I,R)=>D?D.activate(I,R,w):g(0,R),hover:(I,R)=>{var P;return(P=D?.hover)===null||P===void 0?void 0:P.call(D,I,R,w)},leave:(I,R)=>{var P;return(P=D?.leave)===null||P===void 0?void 0:P.call(D,I,R,w)}})}y=!1,C.hasExtendedAttrs()&&C.extended.urlId?(m=M,T=C.extended.urlId):(m=-1,T=-1)}}a(_)}};function g(d,a){if(confirm(`Do you want to navigate to ${a}?

WARNING: This link could potentially be dangerous`)){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}}r.OscLinkProvider=h=c([f(0,v.IBufferService),f(1,v.IOptionsService),f(2,v.IOscLinkService)],h)},6193:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderDebouncer=void 0,r.RenderDebouncer=class{constructor(o,c){this._parentWindow=o,this._renderCallback=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,c,f){this._rowCount=f,o=o!==void 0?o:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let o=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ScreenDprMonitor=void 0;let c=o(844);class f extends c.Disposable{constructor(v){super(),this._parentWindow=v,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,c.toDisposable)(()=>{this.clearListener()}))}setListener(v){this._listener&&this.clearListener(),this._listener=v,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}r.ScreenDprMonitor=f},3236:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;let c=o(3614),f=o(3656),u=o(6465),v=o(9042),h=o(3730),g=o(1680),d=o(3107),a=o(5744),i=o(2950),s=o(1296),_=o(428),D=o(4269),C=o(5114),b=o(8934),T=o(3230),m=o(9312),y=o(4725),M=o(6731),S=o(8055),w=o(8969),L=o(8460),I=o(844),R=o(6114),P=o(8437),W=o(2584),E=o(7399),A=o(5941),x=o(9074),H=o(2585),U=o(5435),re=o(4567),oe=typeof window<"u"?window.document:null;class V extends w.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(F={}){super(F),this.browser=R,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new I.MutableDisposable),this._onCursorMove=this.register(new L.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new L.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new L.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new L.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new L.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new L.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new L.EventEmitter),this._onBlur=this.register(new L.EventEmitter),this._onA11yCharEmitter=this.register(new L.EventEmitter),this._onA11yTabEmitter=this.register(new L.EventEmitter),this._onWillOpen=this.register(new L.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(u.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(h.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(x.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((N,q)=>this.refresh(N,q))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(N=>this._reportWindowsOptions(N))),this.register(this._inputHandler.onColor(N=>this._handleColorEvent(N))),this.register((0,L.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,L.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,L.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,L.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(N=>this._afterResize(N.cols,N.rows))),this.register((0,I.toDisposable)(()=>{var N,q;this._customKeyEventHandler=void 0,(q=(N=this.element)===null||N===void 0?void 0:N.parentNode)===null||q===void 0||q.removeChild(this.element)}))}_handleColorEvent(F){if(this._themeService)for(let N of F){let q,k="";switch(N.index){case 256:q="foreground",k="10";break;case 257:q="background",k="11";break;case 258:q="cursor",k="12";break;default:q="ansi",k="4;"+N.index}switch(N.type){case 0:let _e=S.color.toColorRGB(q==="ansi"?this._themeService.colors.ansi[N.index]:this._themeService.colors[q]);this.coreService.triggerDataEvent(`${W.C0.ESC}]${k};${(0,A.toRgbString)(_e)}${W.C1_ESCAPED.ST}`);break;case 1:if(q==="ansi")this._themeService.modifyColors(Q=>Q.ansi[N.index]=S.rgba.toColor(...N.color));else{let Q=q;this._themeService.modifyColors(Me=>Me[Q]=S.rgba.toColor(...N.color))}break;case 2:this._themeService.restoreColor(N.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(F){F?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(re.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(F){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[I"),this.updateCursorStyle(F),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var F;return(F=this.textarea)===null||F===void 0?void 0:F.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let F=this.buffer.ybase+this.buffer.y,N=this.buffer.lines.get(F);if(!N)return;let q=Math.min(this.buffer.x,this.cols-1),k=this._renderService.dimensions.css.cell.height,_e=N.getWidth(q),Q=this._renderService.dimensions.css.cell.width*_e,Me=this.buffer.y*this._renderService.dimensions.css.cell.height,et=q*this._renderService.dimensions.css.cell.width;this.textarea.style.left=et+"px",this.textarea.style.top=Me+"px",this.textarea.style.width=Q+"px",this.textarea.style.height=k+"px",this.textarea.style.lineHeight=k+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",N=>{this.hasSelection()&&(0,c.copyHandler)(N,this._selectionService)}));let F=N=>(0,c.handlePasteEvent)(N,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",F)),this.register((0,f.addDisposableDomListener)(this.element,"paste",F)),R.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",N=>{N.button===2&&(0,c.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",N=>{(0,c.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),R.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",N=>{N.button===1&&(0,c.moveTextAreaUnderMouseCursor)(N,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",F=>this._keyUp(F),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",F=>this._keyDown(F),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",F=>this._keyPress(F),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",F=>this._compositionHelper.compositionupdate(F))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",F=>this._inputEvent(F),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(F){var N;if(!F)throw new Error("Terminal requires a parent element.");F.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=F.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),F.appendChild(this.element);let q=oe.createDocumentFragment();this._viewportElement=oe.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),q.appendChild(this._viewportElement),this._viewportScrollArea=oe.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=oe.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=oe.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),q.appendChild(this.screenElement),this.textarea=oe.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),R.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(N=this._document.defaultView)!==null&&N!==void 0?N:window),this._instantiationService.setService(y.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",k=>this._handleTextAreaFocus(k))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(_.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(y.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(M.ThemeService),this._instantiationService.setService(y.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(D.CharacterJoinerService),this._instantiationService.setService(y.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(T.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(y.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(k=>this._onRender.fire(k))),this.onResize(k=>this._renderService.resize(k.cols,k.rows)),this._compositionView=oe.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(i.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(q);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(b.MouseService),this._instantiationService.setService(y.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(g.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(y.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(k=>this._renderService.handleSelectionChanged(k.start,k.end,k.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(k=>{this.textarea.value=k,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(k=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",k=>this._selectionService.handleMouseDown(k))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(re.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",k=>this._handleScreenReaderModeOptionChange(k))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",k=>{!this._overviewRulerRenderer&&k&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(s.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let F=this,N=this.element;function q(Q){let Me=F._mouseService.getMouseReportCoords(Q,F.screenElement);if(!Me)return!1;let et,ke;switch(Q.overrideType||Q.type){case"mousemove":ke=32,Q.buttons===void 0?(et=3,Q.button!==void 0&&(et=Q.button<3?Q.button:3)):et=1&Q.buttons?0:4&Q.buttons?1:2&Q.buttons?2:3;break;case"mouseup":ke=0,et=Q.button<3?Q.button:3;break;case"mousedown":ke=1,et=Q.button<3?Q.button:3;break;case"wheel":if(F.viewport.getLinesScrolled(Q)===0)return!1;ke=Q.deltaY<0?0:1,et=4;break;default:return!1}return!(ke===void 0||et===void 0||et>4)&&F.coreMouseService.triggerMouseEvent({col:Me.col,row:Me.row,x:Me.x,y:Me.y,button:et,action:ke,ctrl:Q.ctrlKey,alt:Q.altKey,shift:Q.shiftKey})}let k={mouseup:null,wheel:null,mousedrag:null,mousemove:null},_e={mouseup:Q=>(q(Q),Q.buttons||(this._document.removeEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.removeEventListener("mousemove",k.mousedrag)),this.cancel(Q)),wheel:Q=>(q(Q),this.cancel(Q,!0)),mousedrag:Q=>{Q.buttons&&q(Q)},mousemove:Q=>{Q.buttons||q(Q)}};this.register(this.coreMouseService.onProtocolChange(Q=>{Q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Q?k.mousemove||(N.addEventListener("mousemove",_e.mousemove),k.mousemove=_e.mousemove):(N.removeEventListener("mousemove",k.mousemove),k.mousemove=null),16&Q?k.wheel||(N.addEventListener("wheel",_e.wheel,{passive:!1}),k.wheel=_e.wheel):(N.removeEventListener("wheel",k.wheel),k.wheel=null),2&Q?k.mouseup||(N.addEventListener("mouseup",_e.mouseup),k.mouseup=_e.mouseup):(this._document.removeEventListener("mouseup",k.mouseup),N.removeEventListener("mouseup",k.mouseup),k.mouseup=null),4&Q?k.mousedrag||(k.mousedrag=_e.mousedrag):(this._document.removeEventListener("mousemove",k.mousedrag),k.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(N,"mousedown",Q=>{if(Q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Q))return q(Q),k.mouseup&&this._document.addEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.addEventListener("mousemove",k.mousedrag),this.cancel(Q)})),this.register((0,f.addDisposableDomListener)(N,"wheel",Q=>{if(!k.wheel){if(!this.buffer.hasScrollback){let Me=this.viewport.getLinesScrolled(Q);if(Me===0)return;let et=W.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Q.deltaY<0?"A":"B"),ke="";for(let Re=0;Re<Math.abs(Me);Re++)ke+=et;return this.coreService.triggerDataEvent(ke,!0),this.cancel(Q,!0)}return this.viewport.handleWheel(Q)?this.cancel(Q):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(N,"touchstart",Q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Q),this.cancel(Q)},{passive:!0})),this.register((0,f.addDisposableDomListener)(N,"touchmove",Q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Q)?void 0:this.cancel(Q)},{passive:!1}))}refresh(F,N){var q;(q=this._renderService)===null||q===void 0||q.refreshRows(F,N)}updateCursorStyle(F){var N;!((N=this._selectionService)===null||N===void 0)&&N.shouldColumnSelect(F)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(F,N,q=0){var k;q===1?(super.scrollLines(F,N,q),this.refresh(0,this.rows-1)):(k=this.viewport)===null||k===void 0||k.scrollLines(F)}paste(F){(0,c.paste)(F,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(F){this._customKeyEventHandler=F}registerLinkProvider(F){return this.linkifier2.registerLinkProvider(F)}registerCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let N=this._characterJoinerService.register(F);return this.refresh(0,this.rows-1),N}deregisterCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(F)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(F){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+F)}registerDecoration(F){return this._decorationService.registerDecoration(F)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(F,N,q){this._selectionService.setSelection(F,N,q)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var F;(F=this._selectionService)===null||F===void 0||F.clearSelection()}selectAll(){var F;(F=this._selectionService)===null||F===void 0||F.selectAll()}selectLines(F,N){var q;(q=this._selectionService)===null||q===void 0||q.selectLines(F,N)}_keyDown(F){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;let N=this.browser.isMac&&this.options.macOptionIsMeta&&F.altKey;if(!N&&!this._compositionHelper.keydown(F))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;N||F.key!=="Dead"&&F.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let q=(0,E.evaluateKeyboardEvent)(F,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(F),q.type===3||q.type===2){let k=this.rows-1;return this.scrollLines(q.type===2?-k:k),this.cancel(F,!0)}return q.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,F)||(q.cancel&&this.cancel(F,!0),!q.key||!!(F.key&&!F.ctrlKey&&!F.altKey&&!F.metaKey&&F.key.length===1&&F.key.charCodeAt(0)>=65&&F.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(q.key!==W.C0.ETX&&q.key!==W.C0.CR||(this.textarea.value=""),this._onKey.fire({key:q.key,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(q.key,!0),!this.optionsService.rawOptions.screenReaderMode||F.altKey||F.ctrlKey?this.cancel(F,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(F,N){let q=F.isMac&&!this.options.macOptionIsMeta&&N.altKey&&!N.ctrlKey&&!N.metaKey||F.isWindows&&N.altKey&&N.ctrlKey&&!N.metaKey||F.isWindows&&N.getModifierState("AltGraph");return N.type==="keypress"?q:q&&(!N.keyCode||N.keyCode>47)}_keyUp(F){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1||(function(N){return N.keyCode===16||N.keyCode===17||N.keyCode===18}(F)||this.focus(),this.updateCursorStyle(F),this._keyPressHandled=!1)}_keyPress(F){let N;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;if(this.cancel(F),F.charCode)N=F.charCode;else if(F.which===null||F.which===void 0)N=F.keyCode;else{if(F.which===0||F.charCode===0)return!1;N=F.which}return!(!N||(F.altKey||F.ctrlKey||F.metaKey)&&!this._isThirdLevelShift(this.browser,F)||(N=String.fromCharCode(N),this._onKey.fire({key:N,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(N,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(F){if(F.data&&F.inputType==="insertText"&&(!F.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let N=F.data;return this.coreService.triggerDataEvent(N,!0),this.cancel(F),!0}return!1}resize(F,N){F!==this.cols||N!==this.rows?super.resize(F,N):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(F,N){var q,k;(q=this._charSizeService)===null||q===void 0||q.measure(),(k=this.viewport)===null||k===void 0||k.syncScrollArea(!0)}clear(){var F;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let N=1;N<this.rows;N++)this.buffer.lines.push(this.buffer.getBlankLine(P.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(F=this.viewport)===null||F===void 0||F.reset(),this.refresh(0,this.rows-1)}}reset(){var F,N;this.options.rows=this.rows,this.options.cols=this.cols;let q=this._customKeyEventHandler;this._setup(),super.reset(),(F=this._selectionService)===null||F===void 0||F.reset(),this._decorationService.reset(),(N=this.viewport)===null||N===void 0||N.reset(),this._customKeyEventHandler=q,this.refresh(0,this.rows-1)}clearTextureAtlas(){var F;(F=this._renderService)===null||F===void 0||F.clearTextureAtlas()}_reportFocus(){var F;!((F=this.element)===null||F===void 0)&&F.classList.contains("focus")?this.coreService.triggerDataEvent(W.C0.ESC+"[I"):this.coreService.triggerDataEvent(W.C0.ESC+"[O")}_reportWindowsOptions(F){if(this._renderService)switch(F){case U.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let N=this._renderService.dimensions.css.canvas.width.toFixed(0),q=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[4;${q};${N}t`);break;case U.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let k=this._renderService.dimensions.css.cell.width.toFixed(0),_e=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[6;${_e};${k}t`)}}cancel(F,N){if(this.options.cancelEvents||N)return F.preventDefault(),F.stopPropagation(),!1}}r.Terminal=V},9924:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TimeBasedDebouncer=void 0,r.TimeBasedDebouncer=class{constructor(o,c=1e3){this._renderCallback=o,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,c,f){this._rowCount=f,o=o!==void 0?o:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;let u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){let v=u-this._lastRefreshMs,h=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},h)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let o=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,c)}}},1680:function(p,r,o){var c=this&&this.__decorate||function(i,s,_,D){var C,b=arguments.length,T=b<3?s:D===null?D=Object.getOwnPropertyDescriptor(s,_):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(i,s,_,D);else for(var m=i.length-1;m>=0;m--)(C=i[m])&&(T=(b<3?C(T):b>3?C(s,_,T):C(s,_))||T);return b>3&&T&&Object.defineProperty(s,_,T),T},f=this&&this.__param||function(i,s){return function(_,D){s(_,D,i)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Viewport=void 0;let u=o(3656),v=o(4725),h=o(8460),g=o(844),d=o(2585),a=r.Viewport=class extends g.Disposable{constructor(i,s,_,D,C,b,T,m){super(),this._viewportElement=i,this._scrollArea=s,this._bufferService=_,this._optionsService=D,this._charSizeService=C,this._renderService=b,this._coreBrowserService=T,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new h.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(y=>this._renderDimensions=y)),this._handleThemeChange(m.colors),this.register(m.onChangeColors(y=>this._handleThemeChange(y))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(i){this._viewportElement.style.backgroundColor=i.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(i){if(i)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let s=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==s&&(this._lastRecordedBufferHeight=s,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this._refreshAnimationFrame=null}syncScrollArea(i=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(i);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(i)}_handleScroll(i){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let s=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let i=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(i*(this._smoothScrollState.target-this._smoothScrollState.origin)),i<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(i,s){let _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(s<0&&this._viewportElement.scrollTop!==0||s>0&&_<this._lastRecordedBufferHeight)||(i.cancelable&&i.preventDefault(),!1)}handleWheel(i){let s=this._getPixelsScrolled(i);return s!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+s:this._smoothScrollState.target+=s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=s,this._bubbleScroll(i,s))}scrollLines(i){if(i!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let s=i*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:i,suppressScrollEvent:!1})}_getPixelsScrolled(i){if(i.deltaY===0||i.shiftKey)return 0;let s=this._applyScrollModifier(i.deltaY,i);return i.deltaMode===WheelEvent.DOM_DELTA_LINE?s*=this._currentRowHeight:i.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._currentRowHeight*this._bufferService.rows),s}getBufferElements(i,s){var _;let D,C="",b=[],T=s??this._bufferService.buffer.lines.length,m=this._bufferService.buffer.lines;for(let y=i;y<T;y++){let M=m.get(y);if(!M)continue;let S=(_=m.get(y+1))===null||_===void 0?void 0:_.isWrapped;if(C+=M.translateToString(!S),!S||y===m.length-1){let w=document.createElement("div");w.textContent=C,b.push(w),C.length>0&&(D=w),C=""}}return{bufferElements:b,cursorElement:D}}getLinesScrolled(i){if(i.deltaY===0||i.shiftKey)return 0;let s=this._applyScrollModifier(i.deltaY,i);return i.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(s/=this._currentRowHeight+0,this._wheelPartialScroll+=s,s=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):i.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._bufferService.rows),s}_applyScrollModifier(i,s){let _=this._optionsService.rawOptions.fastScrollModifier;return _==="alt"&&s.altKey||_==="ctrl"&&s.ctrlKey||_==="shift"&&s.shiftKey?i*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:i*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(i){this._lastTouchY=i.touches[0].pageY}handleTouchMove(i){let s=this._lastTouchY-i.touches[0].pageY;return this._lastTouchY=i.touches[0].pageY,s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(i,s))}};r.Viewport=a=c([f(2,d.IBufferService),f(3,d.IOptionsService),f(4,v.ICharSizeService),f(5,v.IRenderService),f(6,v.ICoreBrowserService),f(7,v.IThemeService)],a)},3107:function(p,r,o){var c=this&&this.__decorate||function(a,i,s,_){var D,C=arguments.length,b=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,s):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,_);else for(var T=a.length-1;T>=0;T--)(D=a[T])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},f=this&&this.__param||function(a,i){return function(s,_){i(s,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferDecorationRenderer=void 0;let u=o(3656),v=o(4725),h=o(844),g=o(2585),d=r.BufferDecorationRenderer=class extends h.Disposable{constructor(a,i,s,_){super(),this._screenElement=a,this._bufferService=i,this._decorationService=s,this._renderService=_,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(D=>this._removeDecoration(D))),this.register((0,h.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let a of this._decorationService.decorations)this._renderDecoration(a);this._dimensionsChanged=!1}_renderDecoration(a){this._refreshStyle(a),this._dimensionsChanged&&this._refreshXPosition(a)}_createElement(a){var i,s;let _=document.createElement("div");_.classList.add("xterm-decoration"),_.classList.toggle("xterm-decoration-top-layer",((i=a?.options)===null||i===void 0?void 0:i.layer)==="top"),_.style.width=`${Math.round((a.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,_.style.height=(a.options.height||1)*this._renderService.dimensions.css.cell.height+"px",_.style.top=(a.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",_.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let D=(s=a.options.x)!==null&&s!==void 0?s:0;return D&&D>this._bufferService.cols&&(_.style.display="none"),this._refreshXPosition(a,_),_}_refreshStyle(a){let i=a.marker.line-this._bufferService.buffers.active.ydisp;if(i<0||i>=this._bufferService.rows)a.element&&(a.element.style.display="none",a.onRenderEmitter.fire(a.element));else{let s=this._decorationElements.get(a);s||(s=this._createElement(a),a.element=s,this._decorationElements.set(a,s),this._container.appendChild(s),a.onDispose(()=>{this._decorationElements.delete(a),s.remove()})),s.style.top=i*this._renderService.dimensions.css.cell.height+"px",s.style.display=this._altBufferIsActive?"none":"block",a.onRenderEmitter.fire(s)}}_refreshXPosition(a,i=a.element){var s;if(!i)return;let _=(s=a.options.x)!==null&&s!==void 0?s:0;(a.options.anchor||"left")==="right"?i.style.right=_?_*this._renderService.dimensions.css.cell.width+"px":"":i.style.left=_?_*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(a){var i;(i=this._decorationElements.get(a))===null||i===void 0||i.remove(),this._decorationElements.delete(a),a.dispose()}};r.BufferDecorationRenderer=d=c([f(1,g.IBufferService),f(2,g.IDecorationService),f(3,v.IRenderService)],d)},5871:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorZoneStore=void 0,r.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(let c of this._zones)if(c.color===o.options.overviewRulerOptions.color&&c.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,o.marker.line))return;if(this._lineAdjacentToZone(c,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(c,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,c){return c>=o.startBufferLine&&c<=o.endBufferLine}_lineAdjacentToZone(o,c,f){return c>=o.startBufferLine-this._linePadding[f||"full"]&&c<=o.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(o,c){o.startBufferLine=Math.min(o.startBufferLine,c),o.endBufferLine=Math.max(o.endBufferLine,c)}}},5744:function(p,r,o){var c=this&&this.__decorate||function(D,C,b,T){var m,y=arguments.length,M=y<3?C:T===null?T=Object.getOwnPropertyDescriptor(C,b):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,C,b,T);else for(var S=D.length-1;S>=0;S--)(m=D[S])&&(M=(y<3?m(M):y>3?m(C,b,M):m(C,b))||M);return y>3&&M&&Object.defineProperty(C,b,M),M},f=this&&this.__param||function(D,C){return function(b,T){C(b,T,D)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OverviewRulerRenderer=void 0;let u=o(5871),v=o(3656),h=o(4725),g=o(844),d=o(2585),a={full:0,left:0,center:0,right:0},i={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0},_=r.OverviewRulerRenderer=class extends g.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(D,C,b,T,m,y,M){var S;super(),this._viewportElement=D,this._screenElement=C,this._bufferService=b,this._decorationService=T,this._renderService=m,this._optionsService=y,this._coreBrowseService=M,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(S=this._viewportElement.parentElement)===null||S===void 0||S.insertBefore(this._canvas,this._viewportElement);let w=this._canvas.getContext("2d");if(!w)throw new Error("Ctx cannot be null");this._ctx=w,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,g.toDisposable)(()=>{var L;(L=this._canvas)===null||L===void 0||L.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,v.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let D=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);i.full=this._canvas.width,i.left=D,i.center=C,i.right=D,this._refreshDrawHeightConstants(),s.full=0,s.left=0,s.center=i.left,s.right=i.left+i.center}_refreshDrawHeightConstants(){a.full=Math.round(2*this._coreBrowseService.dpr);let D=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(D,12),6)*this._coreBrowseService.dpr);a.left=C,a.center=C,a.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let D=this._colorZoneStore.zones;for(let C of D)C.position!=="full"&&this._renderColorZone(C);for(let C of D)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(D){this._ctx.fillStyle=D.color,this._ctx.fillRect(s[D.position||"full"],Math.round((this._canvas.height-1)*(D.startBufferLine/this._bufferService.buffers.active.lines.length)-a[D.position||"full"]/2),i[D.position||"full"],Math.round((this._canvas.height-1)*((D.endBufferLine-D.startBufferLine)/this._bufferService.buffers.active.lines.length)+a[D.position||"full"]))}_queueRefresh(D,C){this._shouldUpdateDimensions=D||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r.OverviewRulerRenderer=_=c([f(2,d.IBufferService),f(3,d.IDecorationService),f(4,h.IRenderService),f(5,d.IOptionsService),f(6,h.ICoreBrowserService)],_)},2950:function(p,r,o){var c=this&&this.__decorate||function(d,a,i,s){var _,D=arguments.length,C=D<3?a:s===null?s=Object.getOwnPropertyDescriptor(a,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,a,i,s);else for(var b=d.length-1;b>=0;b--)(_=d[b])&&(C=(D<3?_(C):D>3?_(a,i,C):_(a,i))||C);return D>3&&C&&Object.defineProperty(a,i,C),C},f=this&&this.__param||function(d,a){return function(i,s){a(i,s,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionHelper=void 0;let u=o(4725),v=o(2585),h=o(2584),g=r.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,a,i,s,_,D){this._textarea=d,this._compositionView=a,this._bufferService=i,this._optionsService=s,this._coreService=_,this._renderService=D,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){let a={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let i;this._isSendingComposition=!1,a.start+=this._dataAlreadySent.length,i=this._isComposing?this._textarea.value.substring(a.start,a.end):this._textarea.value.substring(a.start),i.length>0&&this._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;let a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}}_handleAnyTextareaChanges(){let d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let a=this._textarea.value,i=a.replace(d,"");this._dataAlreadySent=i,a.length>d.length?this._coreService.triggerDataEvent(i,!0):a.length<d.length?this._coreService.triggerDataEvent(`${h.C0.DEL}`,!0):a.length===d.length&&a!==d&&this._coreService.triggerDataEvent(a,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let a=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,_=a*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=_+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let D=this._compositionView.getBoundingClientRect();this._textarea.style.left=_+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(D.width,1)+"px",this._textarea.style.height=Math.max(D.height,1)+"px",this._textarea.style.lineHeight=D.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};r.CompositionHelper=g=c([f(2,v.IBufferService),f(3,v.IOptionsService),f(4,v.ICoreService),f(5,u.IRenderService)],g)},9806:(p,r)=>{function o(c,f,u){let v=u.getBoundingClientRect(),h=c.getComputedStyle(u),g=parseInt(h.getPropertyValue("padding-left")),d=parseInt(h.getPropertyValue("padding-top"));return[f.clientX-v.left-g,f.clientY-v.top-d]}Object.defineProperty(r,"__esModule",{value:!0}),r.getCoords=r.getCoordsRelativeToElement=void 0,r.getCoordsRelativeToElement=o,r.getCoords=function(c,f,u,v,h,g,d,a,i){if(!g)return;let s=o(c,f,u);return s?(s[0]=Math.ceil((s[0]+(i?d/2:0))/d),s[1]=Math.ceil(s[1]/a),s[0]=Math.min(Math.max(s[0],1),v+(i?1:0)),s[1]=Math.min(Math.max(s[1],1),h),s):void 0}},9504:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.moveToCellSequence=void 0;let c=o(2584);function f(a,i,s,_){let D=a-u(a,s),C=i-u(i,s),b=Math.abs(D-C)-function(T,m,y){let M=0,S=T-u(T,y),w=m-u(m,y);for(let L=0;L<Math.abs(S-w);L++){let I=v(T,m)==="A"?-1:1,R=y.buffer.lines.get(S+I*L);R?.isWrapped&&M++}return M}(a,i,s);return d(b,g(v(a,i),_))}function u(a,i){let s=0,_=i.buffer.lines.get(a),D=_?.isWrapped;for(;D&&a>=0&&a<i.rows;)s++,_=i.buffer.lines.get(--a),D=_?.isWrapped;return s}function v(a,i){return a>i?"A":"B"}function h(a,i,s,_,D,C){let b=a,T=i,m="";for(;b!==s||T!==_;)b+=D?1:-1,D&&b>C.cols-1?(m+=C.buffer.translateBufferLineToString(T,!1,a,b),b=0,a=0,T++):!D&&b<0&&(m+=C.buffer.translateBufferLineToString(T,!1,0,a+1),b=C.cols-1,a=b,T--);return m+C.buffer.translateBufferLineToString(T,!1,a,b)}function g(a,i){let s=i?"O":"[";return c.C0.ESC+s+a}function d(a,i){a=Math.floor(a);let s="";for(let _=0;_<a;_++)s+=i;return s}r.moveToCellSequence=function(a,i,s,_){let D=s.buffer.x,C=s.buffer.y;if(!s.buffer.hasScrollback)return function(m,y,M,S,w,L){return f(y,S,w,L).length===0?"":d(h(m,y,m,y-u(y,w),!1,w).length,g("D",L))}(D,C,0,i,s,_)+f(C,i,s,_)+function(m,y,M,S,w,L){let I;I=f(y,S,w,L).length>0?S-u(S,w):y;let R=S,P=function(W,E,A,x,H,U){let re;return re=f(A,x,H,U).length>0?x-u(x,H):E,W<A&&re<=x||W>=A&&re<x?"C":"D"}(m,y,M,S,w,L);return d(h(m,I,M,R,P==="C",w).length,g(P,L))}(D,C,a,i,s,_);let b;if(C===i)return b=D>a?"D":"C",d(Math.abs(D-a),g(b,_));b=C>i?"D":"C";let T=Math.abs(C-i);return d(function(m,y){return y.cols-m}(C>i?a:D,s)+(T-1)*s.cols+1+((C>i?D:a)-1),g(b,_))}},1296:function(p,r,o){var c=this&&this.__decorate||function(w,L,I,R){var P,W=arguments.length,E=W<3?L:R===null?R=Object.getOwnPropertyDescriptor(L,I):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(w,L,I,R);else for(var A=w.length-1;A>=0;A--)(P=w[A])&&(E=(W<3?P(E):W>3?P(L,I,E):P(L,I))||E);return W>3&&E&&Object.defineProperty(L,I,E),E},f=this&&this.__param||function(w,L){return function(I,R){L(I,R,w)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRenderer=void 0;let u=o(3787),v=o(2550),h=o(2223),g=o(6171),d=o(4725),a=o(8055),i=o(8460),s=o(844),_=o(2585),D="xterm-dom-renderer-owner-",C="xterm-rows",b="xterm-fg-",T="xterm-bg-",m="xterm-focus",y="xterm-selection",M=1,S=r.DomRenderer=class extends s.Disposable{constructor(w,L,I,R,P,W,E,A,x,H){super(),this._element=w,this._screenElement=L,this._viewportElement=I,this._linkifier2=R,this._charSizeService=W,this._optionsService=E,this._bufferService=A,this._coreBrowserService=x,this._themeService=H,this._terminalClass=M++,this._rowElements=[],this.onRequestRedraw=this.register(new i.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(y),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,g.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(U=>this._injectCss(U))),this._injectCss(this._themeService.colors),this._rowFactory=P.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(D+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(U=>this._handleLinkHover(U))),this.register(this._linkifier2.onHideLinkUnderline(U=>this._handleLinkLeave(U))),this.register((0,s.toDisposable)(()=>{this._element.classList.remove(D+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let w=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*w,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*w),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/w),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/w),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let I of this._rowElements)I.style.width=`${this.dimensions.css.canvas.width}px`,I.style.height=`${this.dimensions.css.cell.height}px`,I.style.lineHeight=`${this.dimensions.css.cell.height}px`,I.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let L=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=L,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(w){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let L=`${this._terminalSelector} .${C} { color: ${w.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;L+=`${this._terminalSelector} .${C} .xterm-dim { color: ${a.color.multiplyOpacity(w.foreground,.5).css};}`,L+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,L+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",L+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${w.cursor.css};  color: ${w.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${w.cursor.css}; }}`,L+=`${this._terminalSelector} .${C}.${m} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${m} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${w.cursor.css}; color: ${w.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${w.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${w.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${w.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,L+=`${this._terminalSelector} .${y} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${y} div { position: absolute; background-color: ${w.selectionBackgroundOpaque.css};}${this._terminalSelector} .${y} div { position: absolute; background-color: ${w.selectionInactiveBackgroundOpaque.css};}`;for(let[I,R]of w.ansi.entries())L+=`${this._terminalSelector} .${b}${I} { color: ${R.css}; }${this._terminalSelector} .${b}${I}.xterm-dim { color: ${a.color.multiplyOpacity(R,.5).css}; }${this._terminalSelector} .${T}${I} { background-color: ${R.css}; }`;L+=`${this._terminalSelector} .${b}${h.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(w.background).css}; }${this._terminalSelector} .${b}${h.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(w.background),.5).css}; }${this._terminalSelector} .${T}${h.INVERTED_DEFAULT_COLOR} { background-color: ${w.foreground.css}; }`,this._themeStyleElement.textContent=L}_setDefaultSpacing(){let w=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${w}px`,this._rowFactory.defaultSpacing=w}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(w,L){for(let I=this._rowElements.length;I<=L;I++){let R=document.createElement("div");this._rowContainer.appendChild(R),this._rowElements.push(R)}for(;this._rowElements.length>L;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(w,L){this._refreshRowElements(w,L),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(m)}handleFocus(){this._rowContainer.classList.add(m),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(w,L,I){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(w,L,I),this.renderRows(0,this._bufferService.rows-1),!w||!L)return;let R=w[1]-this._bufferService.buffer.ydisp,P=L[1]-this._bufferService.buffer.ydisp,W=Math.max(R,0),E=Math.min(P,this._bufferService.rows-1);if(W>=this._bufferService.rows||E<0)return;let A=document.createDocumentFragment();if(I){let x=w[0]>L[0];A.appendChild(this._createSelectionElement(W,x?L[0]:w[0],x?w[0]:L[0],E-W+1))}else{let x=R===W?w[0]:0,H=W===P?L[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(W,x,H));let U=E-W-1;if(A.appendChild(this._createSelectionElement(W+1,0,this._bufferService.cols,U)),W!==E){let re=P===E?L[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(E,0,re))}}this._selectionContainer.appendChild(A)}_createSelectionElement(w,L,I,R=1){let P=document.createElement("div");return P.style.height=R*this.dimensions.css.cell.height+"px",P.style.top=w*this.dimensions.css.cell.height+"px",P.style.left=L*this.dimensions.css.cell.width+"px",P.style.width=this.dimensions.css.cell.width*(I-L)+"px",P}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let w of this._rowElements)w.replaceChildren()}renderRows(w,L){let I=this._bufferService.buffer,R=I.ybase+I.y,P=Math.min(I.x,this._bufferService.cols-1),W=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let x=w;x<=L;x++){let H=x+I.ydisp,U=this._rowElements[x],re=I.lines.get(H);if(!U||!re)break;U.replaceChildren(...this._rowFactory.createRow(re,H,H===R,E,A,P,W,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${D}${this._terminalClass}`}_handleLinkHover(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!0)}_handleLinkLeave(w){this._setCellUnderline(w.x1,w.x2,w.y1,w.y2,w.cols,!1)}_setCellUnderline(w,L,I,R,P,W){I<0&&(w=0),R<0&&(L=0);let E=this._bufferService.rows-1;I=Math.max(Math.min(I,E),0),R=Math.max(Math.min(R,E),0),P=Math.min(P,this._bufferService.cols);let A=this._bufferService.buffer,x=A.ybase+A.y,H=Math.min(A.x,P-1),U=this._optionsService.rawOptions.cursorBlink,re=this._optionsService.rawOptions.cursorStyle,oe=this._optionsService.rawOptions.cursorInactiveStyle;for(let V=I;V<=R;++V){let fe=V+A.ydisp,F=this._rowElements[V],N=A.lines.get(fe);if(!F||!N)break;F.replaceChildren(...this._rowFactory.createRow(N,fe,fe===x,re,oe,H,U,this.dimensions.css.cell.width,this._widthCache,W?V===I?w:0:-1,W?(V===R?L:P)-1:-1))}}};r.DomRenderer=S=c([f(4,_.IInstantiationService),f(5,d.ICharSizeService),f(6,_.IOptionsService),f(7,_.IBufferService),f(8,d.ICoreBrowserService),f(9,d.IThemeService)],S)},3787:function(p,r,o){var c=this&&this.__decorate||function(b,T,m,y){var M,S=arguments.length,w=S<3?T:y===null?y=Object.getOwnPropertyDescriptor(T,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(b,T,m,y);else for(var L=b.length-1;L>=0;L--)(M=b[L])&&(w=(S<3?M(w):S>3?M(T,m,w):M(T,m))||w);return S>3&&w&&Object.defineProperty(T,m,w),w},f=this&&this.__param||function(b,T){return function(m,y){T(m,y,b)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRendererRowFactory=void 0;let u=o(2223),v=o(643),h=o(511),g=o(2585),d=o(8055),a=o(4725),i=o(4269),s=o(6171),_=o(3734),D=r.DomRendererRowFactory=class{constructor(b,T,m,y,M,S,w){this._document=b,this._characterJoinerService=T,this._optionsService=m,this._coreBrowserService=y,this._coreService=M,this._decorationService=S,this._themeService=w,this._workCell=new h.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(b,T,m){this._selectionStart=b,this._selectionEnd=T,this._columnSelectMode=m}createRow(b,T,m,y,M,S,w,L,I,R,P){let W=[],E=this._characterJoinerService.getJoinedCharacters(T),A=this._themeService.colors,x,H=b.getNoBgTrimmedLength();m&&H<S+1&&(H=S+1);let U=0,re="",oe=0,V=0,fe=0,F=!1,N=0,q=!1,k=0,_e=[],Q=R!==-1&&P!==-1;for(let Me=0;Me<H;Me++){b.loadCell(Me,this._workCell);let et=this._workCell.getWidth();if(et===0)continue;let ke=!1,Re=Me,$e=this._workCell;if(E.length>0&&Me===E[0][0]){ke=!0;let nt=E.shift();$e=new i.JoinedCellData(this._workCell,b.translateToString(!0,nt[0],nt[1]),nt[1]-nt[0]),Re=nt[1]-1,et=$e.getWidth()}let Bt=this._isCellInSelection(Me,T),Cr=m&&Me===S,Mr=Q&&Me>=R&&Me<=P,Tt=!1;this._decorationService.forEachDecorationAtCell(Me,T,void 0,nt=>{Tt=!0});let ce=$e.getChars()||v.WHITESPACE_CELL_CHAR;if(ce===" "&&($e.isUnderline()||$e.isOverline())&&(ce="\xA0"),k=et*L-I.get(ce,$e.isBold(),$e.isItalic()),x){if(U&&(Bt&&q||!Bt&&!q&&$e.bg===oe)&&(Bt&&q&&A.selectionForeground||$e.fg===V)&&$e.extended.ext===fe&&Mr===F&&k===N&&!Cr&&!ke&&!Tt){re+=ce,U++;continue}U&&(x.textContent=re),x=this._document.createElement("span"),U=0,re=""}else x=this._document.createElement("span");if(oe=$e.bg,V=$e.fg,fe=$e.extended.ext,F=Mr,N=k,q=Bt,ke&&S>=Me&&S<=Re&&(S=Me),!this._coreService.isCursorHidden&&Cr){if(_e.push("xterm-cursor"),this._coreBrowserService.isFocused)w&&_e.push("xterm-cursor-blink"),_e.push(y==="bar"?"xterm-cursor-bar":y==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(M)switch(M){case"outline":_e.push("xterm-cursor-outline");break;case"block":_e.push("xterm-cursor-block");break;case"bar":_e.push("xterm-cursor-bar");break;case"underline":_e.push("xterm-cursor-underline")}}if($e.isBold()&&_e.push("xterm-bold"),$e.isItalic()&&_e.push("xterm-italic"),$e.isDim()&&_e.push("xterm-dim"),re=$e.isInvisible()?v.WHITESPACE_CELL_CHAR:$e.getChars()||v.WHITESPACE_CELL_CHAR,$e.isUnderline()&&(_e.push(`xterm-underline-${$e.extended.underlineStyle}`),re===" "&&(re="\xA0"),!$e.isUnderlineColorDefault()))if($e.isUnderlineColorRGB())x.style.textDecorationColor=`rgb(${_.AttributeData.toColorRGB($e.getUnderlineColor()).join(",")})`;else{let nt=$e.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&$e.isBold()&&nt<8&&(nt+=8),x.style.textDecorationColor=A.ansi[nt].css}$e.isOverline()&&(_e.push("xterm-overline"),re===" "&&(re="\xA0")),$e.isStrikethrough()&&_e.push("xterm-strikethrough"),Mr&&(x.style.textDecoration="underline");let ue=$e.getFgColor(),ne=$e.getFgColorMode(),X=$e.getBgColor(),me=$e.getBgColorMode(),Be=!!$e.isInverse();if(Be){let nt=ue;ue=X,X=nt;let kn=ne;ne=me,me=kn}let ze,xt,rr,fr=!1;switch(this._decorationService.forEachDecorationAtCell(Me,T,void 0,nt=>{nt.options.layer!=="top"&&fr||(nt.backgroundColorRGB&&(me=50331648,X=nt.backgroundColorRGB.rgba>>8&16777215,ze=nt.backgroundColorRGB),nt.foregroundColorRGB&&(ne=50331648,ue=nt.foregroundColorRGB.rgba>>8&16777215,xt=nt.foregroundColorRGB),fr=nt.options.layer==="top")}),!fr&&Bt&&(ze=this._coreBrowserService.isFocused?A.selectionBackgroundOpaque:A.selectionInactiveBackgroundOpaque,X=ze.rgba>>8&16777215,me=50331648,fr=!0,A.selectionForeground&&(ne=50331648,ue=A.selectionForeground.rgba>>8&16777215,xt=A.selectionForeground)),fr&&_e.push("xterm-decoration-top"),me){case 16777216:case 33554432:rr=A.ansi[X],_e.push(`xterm-bg-${X}`);break;case 50331648:rr=d.rgba.toColor(X>>16,X>>8&255,255&X),this._addStyle(x,`background-color:#${C((X>>>0).toString(16),"0",6)}`);break;default:Be?(rr=A.foreground,_e.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):rr=A.background}switch(ze||$e.isDim()&&(ze=d.color.multiplyOpacity(rr,.5)),ne){case 16777216:case 33554432:$e.isBold()&&ue<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ue+=8),this._applyMinimumContrast(x,rr,A.ansi[ue],$e,ze,void 0)||_e.push(`xterm-fg-${ue}`);break;case 50331648:let nt=d.rgba.toColor(ue>>16&255,ue>>8&255,255&ue);this._applyMinimumContrast(x,rr,nt,$e,ze,xt)||this._addStyle(x,`color:#${C(ue.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(x,rr,A.foreground,$e,ze,void 0)||Be&&_e.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}_e.length&&(x.className=_e.join(" "),_e.length=0),Cr||ke||Tt?x.textContent=re:U++,k!==this.defaultSpacing&&(x.style.letterSpacing=`${k}px`),W.push(x),Me=Re}return x&&U&&(x.textContent=re),W}_applyMinimumContrast(b,T,m,y,M,S){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,s.excludeFromContrastRatioDemands)(y.getCode()))return!1;let w=this._getContrastCache(y),L;if(M||S||(L=w.getColor(T.rgba,m.rgba)),L===void 0){let I=this._optionsService.rawOptions.minimumContrastRatio/(y.isDim()?2:1);L=d.color.ensureContrastRatio(M||T,S||m,I),w.setColor((M||T).rgba,(S||m).rgba,L??null)}return!!L&&(this._addStyle(b,`color:${L.css}`),!0)}_getContrastCache(b){return b.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(b,T){b.setAttribute("style",`${b.getAttribute("style")||""}${T};`)}_isCellInSelection(b,T){let m=this._selectionStart,y=this._selectionEnd;return!(!m||!y)&&(this._columnSelectMode?m[0]<=y[0]?b>=m[0]&&T>=m[1]&&b<y[0]&&T<=y[1]:b<m[0]&&T>=m[1]&&b>=y[0]&&T<=y[1]:T>m[1]&&T<y[1]||m[1]===y[1]&&T===m[1]&&b>=m[0]&&b<y[0]||m[1]<y[1]&&T===y[1]&&b<y[0]||m[1]<y[1]&&T===m[1]&&b>=m[0])}};function C(b,T,m){for(;b.length<m;)b=T+b;return b}r.DomRendererRowFactory=D=c([f(1,a.ICharacterJoinerService),f(2,g.IOptionsService),f(3,a.ICoreBrowserService),f(4,g.ICoreService),f(5,g.IDecorationService),f(6,a.IThemeService)],D)},2550:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WidthCache=void 0,r.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let c=o.createElement("span"),f=o.createElement("span");f.style.fontWeight="bold";let u=o.createElement("span");u.style.fontStyle="italic";let v=o.createElement("span");v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[c,f,u,v],this._container.appendChild(c),this._container.appendChild(f),this._container.appendChild(u),this._container.appendChild(v),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,c,f,u){o===this._font&&c===this._fontSize&&f===this._weight&&u===this._weightBold||(this._font=o,this._fontSize=c,this._weight=f,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(o,c,f){let u=0;if(!c&&!f&&o.length===1&&(u=o.charCodeAt(0))<256)return this._flat[u]!==-9999?this._flat[u]:this._flat[u]=this._measure(o,0);let v=o;c&&(v+="B"),f&&(v+="I");let h=this._holey.get(v);if(h===void 0){let g=0;c&&(g|=1),f&&(g|=2),h=this._measure(o,g),this._holey.set(v,h)}return h}_measure(o,c){let f=this._measureElements[c];return f.textContent=o.repeat(32),f.offsetWidth/32}}},2223:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;let c=o(6114);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(p,r)=>{function o(c){return 57508<=c&&c<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},r.isPowerlineGlyph=o,r.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},r.excludeFromContrastRatioDemands=function(c){return o(c)||function(f){return 9472<=f&&f<=9631}(c)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionModel=void 0,r.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let o=this.selectionStart,c=this.selectionEnd;return!(!o||!c)&&(o[1]>c[1]||o[1]===c[1]&&o[0]>c[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(p,r,o){var c=this&&this.__decorate||function(a,i,s,_){var D,C=arguments.length,b=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,s):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,_);else for(var T=a.length-1;T>=0;T--)(D=a[T])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},f=this&&this.__param||function(a,i){return function(s,_){i(s,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharSizeService=void 0;let u=o(2585),v=o(8460),h=o(844),g=r.CharSizeService=class extends h.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,i,s){super(),this._optionsService=s,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new d(a,i,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};r.CharSizeService=g=c([f(2,u.IOptionsService)],g);class d{constructor(i,s,_){this._document=i,this._parentElement=s,this._optionsService=_,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let i={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return i.width!==0&&i.height!==0&&(this._result.width=i.width/32,this._result.height=Math.ceil(i.height)),this._result}}},4269:function(p,r,o){var c=this&&this.__decorate||function(i,s,_,D){var C,b=arguments.length,T=b<3?s:D===null?D=Object.getOwnPropertyDescriptor(s,_):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(i,s,_,D);else for(var m=i.length-1;m>=0;m--)(C=i[m])&&(T=(b<3?C(T):b>3?C(s,_,T):C(s,_))||T);return b>3&&T&&Object.defineProperty(s,_,T),T},f=this&&this.__param||function(i,s){return function(_,D){s(_,D,i)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterJoinerService=r.JoinedCellData=void 0;let u=o(3734),v=o(643),h=o(511),g=o(2585);class d extends u.AttributeData{constructor(s,_,D){super(),this.content=0,this.combinedData="",this.fg=s.fg,this.bg=s.bg,this.combinedData=_,this._width=D}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(s){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.JoinedCellData=d;let a=r.CharacterJoinerService=class Z1{constructor(s){this._bufferService=s,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new h.CellData}register(s){let _={id:this._nextCharacterJoinerId++,handler:s};return this._characterJoiners.push(_),_.id}deregister(s){for(let _=0;_<this._characterJoiners.length;_++)if(this._characterJoiners[_].id===s)return this._characterJoiners.splice(_,1),!0;return!1}getJoinedCharacters(s){if(this._characterJoiners.length===0)return[];let _=this._bufferService.buffer.lines.get(s);if(!_||_.length===0)return[];let D=[],C=_.translateToString(!0),b=0,T=0,m=0,y=_.getFg(0),M=_.getBg(0);for(let S=0;S<_.getTrimmedLength();S++)if(_.loadCell(S,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==M){if(S-b>1){let w=this._getJoinedRanges(C,m,T,_,b);for(let L=0;L<w.length;L++)D.push(w[L])}b=S,m=T,y=this._workCell.fg,M=this._workCell.bg}T+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-b>1){let S=this._getJoinedRanges(C,m,T,_,b);for(let w=0;w<S.length;w++)D.push(S[w])}return D}_getJoinedRanges(s,_,D,C,b){let T=s.substring(_,D),m=[];try{m=this._characterJoiners[0].handler(T)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{let M=this._characterJoiners[y].handler(T);for(let S=0;S<M.length;S++)Z1._mergeRanges(m,M[S])}catch(M){console.error(M)}return this._stringRangesToCellRanges(m,C,b),m}_stringRangesToCellRanges(s,_,D){let C=0,b=!1,T=0,m=s[C];if(m){for(let y=D;y<this._bufferService.cols;y++){let M=_.getWidth(y),S=_.getString(y).length||v.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!b&&m[0]<=T&&(m[0]=y,b=!0),m[1]<=T){if(m[1]=y,m=s[++C],!m)break;m[0]<=T?(m[0]=y,b=!0):b=!1}T+=S}}m&&(m[1]=this._bufferService.cols)}}static _mergeRanges(s,_){let D=!1;for(let C=0;C<s.length;C++){let b=s[C];if(D){if(_[1]<=b[0])return s[C-1][1]=_[1],s;if(_[1]<=b[1])return s[C-1][1]=Math.max(_[1],b[1]),s.splice(C,1),s;s.splice(C,1),C--}else{if(_[1]<=b[0])return s.splice(C,0,_),s;if(_[1]<=b[1])return b[0]=Math.min(_[0],b[0]),s;_[0]<b[1]&&(b[0]=Math.min(_[0],b[0]),D=!0)}}return D?s[s.length-1][1]=_[1]:s.push(_),s}};r.CharacterJoinerService=a=c([f(0,g.IBufferService)],a)},5114:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreBrowserService=void 0,r.CoreBrowserService=class{constructor(o,c){this._textarea=o,this.window=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(p,r,o){var c=this&&this.__decorate||function(g,d,a,i){var s,_=arguments.length,D=_<3?d:i===null?i=Object.getOwnPropertyDescriptor(d,a):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,d,a,i);else for(var C=g.length-1;C>=0;C--)(s=g[C])&&(D=(_<3?s(D):_>3?s(d,a,D):s(d,a))||D);return _>3&&D&&Object.defineProperty(d,a,D),D},f=this&&this.__param||function(g,d){return function(a,i){d(a,i,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseService=void 0;let u=o(4725),v=o(9806),h=r.MouseService=class{constructor(g,d){this._renderService=g,this._charSizeService=d}getCoords(g,d,a,i,s){return(0,v.getCoords)(window,g,d,a,i,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,s)}getMouseReportCoords(g,d){let a=(0,v.getCoordsRelativeToElement)(window,g,d);if(this._charSizeService.hasValidSize)return a[0]=Math.min(Math.max(a[0],0),this._renderService.dimensions.css.canvas.width-1),a[1]=Math.min(Math.max(a[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(a[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(a[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(a[0]),y:Math.floor(a[1])}}};r.MouseService=h=c([f(0,u.IRenderService),f(1,u.ICharSizeService)],h)},3230:function(p,r,o){var c=this&&this.__decorate||function(D,C,b,T){var m,y=arguments.length,M=y<3?C:T===null?T=Object.getOwnPropertyDescriptor(C,b):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,C,b,T);else for(var S=D.length-1;S>=0;S--)(m=D[S])&&(M=(y<3?m(M):y>3?m(C,b,M):m(C,b))||M);return y>3&&M&&Object.defineProperty(C,b,M),M},f=this&&this.__param||function(D,C){return function(b,T){C(b,T,D)}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderService=void 0;let u=o(3656),v=o(6193),h=o(5596),g=o(4725),d=o(8460),a=o(844),i=o(7226),s=o(2585),_=r.RenderService=class extends a.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(D,C,b,T,m,y,M,S){if(super(),this._rowCount=D,this._charSizeService=T,this._renderer=this.register(new a.MutableDisposable),this._pausedResizeTask=new i.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new d.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new d.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new d.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new d.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer(M.window,(w,L)=>this._renderRows(w,L)),this.register(this._renderDebouncer),this._screenDprMonitor=new h.ScreenDprMonitor(M.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(y.onResize(()=>this._fullRefresh())),this.register(y.buffers.onBufferActivate(()=>{var w;return(w=this._renderer.value)===null||w===void 0?void 0:w.clear()})),this.register(b.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(m.onDecorationRegistered(()=>this._fullRefresh())),this.register(m.onDecorationRemoved(()=>this._fullRefresh())),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(y.cols,y.rows),this._fullRefresh()})),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(y.buffer.y,y.buffer.y,!0))),this.register((0,u.addDisposableDomListener)(M.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(S.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in M.window){let w=new M.window.IntersectionObserver(L=>this._handleIntersectionChange(L[L.length-1]),{threshold:0});w.observe(C),this.register({dispose:()=>w.disconnect()})}}_handleIntersectionChange(D){this._isPaused=D.isIntersecting===void 0?D.intersectionRatio===0:!D.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(D,C,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(D,C,this._rowCount))}_renderRows(D,C){this._renderer.value&&(D=Math.min(D,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(D,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:D,end:C}),this._onRender.fire({start:D,end:C}),this._isNextRenderRedrawOnly=!0)}resize(D,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(D){this._renderer.value=D,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(D){return this._renderDebouncer.addRefreshCallback(D)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var D,C;this._renderer.value&&((C=(D=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(D),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(D,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(D,C)):this._renderer.value.handleResize(D,C),this._fullRefresh())}handleCharSizeChanged(){var D;(D=this._renderer.value)===null||D===void 0||D.handleCharSizeChanged()}handleBlur(){var D;(D=this._renderer.value)===null||D===void 0||D.handleBlur()}handleFocus(){var D;(D=this._renderer.value)===null||D===void 0||D.handleFocus()}handleSelectionChanged(D,C,b){var T;this._selectionState.start=D,this._selectionState.end=C,this._selectionState.columnSelectMode=b,(T=this._renderer.value)===null||T===void 0||T.handleSelectionChanged(D,C,b)}handleCursorMove(){var D;(D=this._renderer.value)===null||D===void 0||D.handleCursorMove()}clear(){var D;(D=this._renderer.value)===null||D===void 0||D.clear()}};r.RenderService=_=c([f(2,s.IOptionsService),f(3,g.ICharSizeService),f(4,s.IDecorationService),f(5,s.IBufferService),f(6,g.ICoreBrowserService),f(7,g.IThemeService)],_)},9312:function(p,r,o){var c=this&&this.__decorate||function(m,y,M,S){var w,L=arguments.length,I=L<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,M):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(m,y,M,S);else for(var R=m.length-1;R>=0;R--)(w=m[R])&&(I=(L<3?w(I):L>3?w(y,M,I):w(y,M))||I);return L>3&&I&&Object.defineProperty(y,M,I),I},f=this&&this.__param||function(m,y){return function(M,S){y(M,S,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionService=void 0;let u=o(9806),v=o(9504),h=o(456),g=o(4725),d=o(8460),a=o(844),i=o(6114),s=o(4841),_=o(511),D=o(2585),C="\xA0",b=new RegExp(C,"g"),T=r.SelectionService=class extends a.Disposable{constructor(m,y,M,S,w,L,I,R,P){super(),this._element=m,this._screenElement=y,this._linkifier=M,this._bufferService=S,this._coreService=w,this._mouseService=L,this._optionsService=I,this._renderService=R,this._coreBrowserService=P,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=W=>this._handleMouseMove(W),this._mouseUpListener=W=>this._handleMouseUp(W),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(W=>this._handleTrim(W)),this.register(this._bufferService.buffers.onBufferActivate(W=>this._handleBufferActivate(W))),this.enable(),this._model=new h.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,a.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let m=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!m||!y||m[0]===y[0]&&m[1]===y[1])}get selectionText(){let m=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!m||!y)return"";let M=this._bufferService.buffer,S=[];if(this._activeSelectionMode===3){if(m[0]===y[0])return"";let w=m[0]<y[0]?m[0]:y[0],L=m[0]<y[0]?y[0]:m[0];for(let I=m[1];I<=y[1];I++){let R=M.translateBufferLineToString(I,!0,w,L);S.push(R)}}else{let w=m[1]===y[1]?y[0]:void 0;S.push(M.translateBufferLineToString(m[1],!0,m[0],w));for(let L=m[1]+1;L<=y[1]-1;L++){let I=M.lines.get(L),R=M.translateBufferLineToString(L,!0);I?.isWrapped?S[S.length-1]+=R:S.push(R)}if(m[1]!==y[1]){let L=M.lines.get(y[1]),I=M.translateBufferLineToString(y[1],!0,0,y[0]);L&&L.isWrapped?S[S.length-1]+=I:S.push(I)}}return S.map(w=>w.replace(b," ")).join(i.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(m){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),i.isLinux&&m&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(m){let y=this._getMouseBufferCoords(m),M=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!!(M&&S&&y)&&this._areCoordsInSelection(y,M,S)}isCellInSelection(m,y){let M=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!(!M||!S)&&this._areCoordsInSelection([m,y],M,S)}_areCoordsInSelection(m,y,M){return m[1]>y[1]&&m[1]<M[1]||y[1]===M[1]&&m[1]===y[1]&&m[0]>=y[0]&&m[0]<M[0]||y[1]<M[1]&&m[1]===M[1]&&m[0]<M[0]||y[1]<M[1]&&m[1]===y[1]&&m[0]>=y[0]}_selectWordAtCursor(m,y){var M,S;let w=(S=(M=this._linkifier.currentLink)===null||M===void 0?void 0:M.link)===null||S===void 0?void 0:S.range;if(w)return this._model.selectionStart=[w.start.x-1,w.start.y-1],this._model.selectionStartLength=(0,s.getRangeLength)(w,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let L=this._getMouseBufferCoords(m);return!!L&&(this._selectWordAt(L,y),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(m,y){this._model.clearSelection(),m=Math.max(m,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,m],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()}_handleTrim(m){this._model.handleTrim(m)&&this.refresh()}_getMouseBufferCoords(m){let y=this._mouseService.getCoords(m,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y}_getMouseEventScrollAmount(m){let y=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,m,this._screenElement)[1],M=this._renderService.dimensions.css.canvas.height;return y>=0&&y<=M?0:(y>M&&(y-=M),y=Math.min(Math.max(y,-50),50),y/=50,y/Math.abs(y)+Math.round(14*y))}shouldForceSelection(m){return i.isMac?m.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:m.shiftKey}handleMouseDown(m){if(this._mouseDownTimeStamp=m.timeStamp,(m.button!==2||!this.hasSelection)&&m.button===0){if(!this._enabled){if(!this.shouldForceSelection(m))return;m.stopPropagation()}m.preventDefault(),this._dragScrollAmount=0,this._enabled&&m.shiftKey?this._handleIncrementalClick(m):m.detail===1?this._handleSingleClick(m):m.detail===2?this._handleDoubleClick(m):m.detail===3&&this._handleTripleClick(m),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(m){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(m))}_handleSingleClick(m){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(m)?3:0,this._model.selectionStart=this._getMouseBufferCoords(m),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(m){this._selectWordAtCursor(m,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(m){let y=this._getMouseBufferCoords(m);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))}shouldColumnSelect(m){return m.altKey&&!(i.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(m){if(m.stopImmediatePropagation(),!this._model.selectionStart)return;let y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(m),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(m),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let M=this._bufferService.buffer;if(this._model.selectionEnd[1]<M.lines.length){let S=M.lines.get(this._model.selectionEnd[1]);S&&S.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let m=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(m.ydisp+this._bufferService.rows,m.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=m.ydisp),this.refresh()}}_handleMouseUp(m){let y=m.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500&&m.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let M=this._mouseService.getCoords(m,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(M&&M[0]!==void 0&&M[1]!==void 0){let S=(0,v.moveToCellSequence)(M[0]-1,M[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(S,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let m=this._model.finalSelectionStart,y=this._model.finalSelectionEnd,M=!(!m||!y||m[0]===y[0]&&m[1]===y[1]);M?m&&y&&(this._oldSelectionStart&&this._oldSelectionEnd&&m[0]===this._oldSelectionStart[0]&&m[1]===this._oldSelectionStart[1]&&y[0]===this._oldSelectionEnd[0]&&y[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(m,y,M)):this._oldHasSelection&&this._fireOnSelectionChange(m,y,M)}_fireOnSelectionChange(m,y,M){this._oldSelectionStart=m,this._oldSelectionEnd=y,this._oldHasSelection=M,this._onSelectionChange.fire()}_handleBufferActivate(m){this.clearSelection(),this._trimListener.dispose(),this._trimListener=m.activeBuffer.lines.onTrim(y=>this._handleTrim(y))}_convertViewportColToCharacterIndex(m,y){let M=y;for(let S=0;y>=S;S++){let w=m.loadCell(S,this._workCell).getChars().length;this._workCell.getWidth()===0?M--:w>1&&y!==S&&(M+=w-1)}return M}setSelection(m,y,M){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[m,y],this._model.selectionStartLength=M,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(m){this._isClickInSelection(m)||(this._selectWordAtCursor(m,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(m,y,M=!0,S=!0){if(m[0]>=this._bufferService.cols)return;let w=this._bufferService.buffer,L=w.lines.get(m[1]);if(!L)return;let I=w.translateBufferLineToString(m[1],!1),R=this._convertViewportColToCharacterIndex(L,m[0]),P=R,W=m[0]-R,E=0,A=0,x=0,H=0;if(I.charAt(R)===" "){for(;R>0&&I.charAt(R-1)===" ";)R--;for(;P<I.length&&I.charAt(P+1)===" ";)P++}else{let oe=m[0],V=m[0];L.getWidth(oe)===0&&(E++,oe--),L.getWidth(V)===2&&(A++,V++);let fe=L.getString(V).length;for(fe>1&&(H+=fe-1,P+=fe-1);oe>0&&R>0&&!this._isCharWordSeparator(L.loadCell(oe-1,this._workCell));){L.loadCell(oe-1,this._workCell);let F=this._workCell.getChars().length;this._workCell.getWidth()===0?(E++,oe--):F>1&&(x+=F-1,R-=F-1),R--,oe--}for(;V<L.length&&P+1<I.length&&!this._isCharWordSeparator(L.loadCell(V+1,this._workCell));){L.loadCell(V+1,this._workCell);let F=this._workCell.getChars().length;this._workCell.getWidth()===2?(A++,V++):F>1&&(H+=F-1,P+=F-1),P++,V++}}P++;let U=R+W-E+x,re=Math.min(this._bufferService.cols,P-R+E+A-x-H);if(y||I.slice(R,P).trim()!==""){if(M&&U===0&&L.getCodePoint(0)!==32){let oe=w.lines.get(m[1]-1);if(oe&&L.isWrapped&&oe.getCodePoint(this._bufferService.cols-1)!==32){let V=this._getWordAt([this._bufferService.cols-1,m[1]-1],!1,!0,!1);if(V){let fe=this._bufferService.cols-V.start;U-=fe,re+=fe}}}if(S&&U+re===this._bufferService.cols&&L.getCodePoint(this._bufferService.cols-1)!==32){let oe=w.lines.get(m[1]+1);if(oe?.isWrapped&&oe.getCodePoint(0)!==32){let V=this._getWordAt([0,m[1]+1],!1,!1,!0);V&&(re+=V.length)}}return{start:U,length:re}}}_selectWordAt(m,y){let M=this._getWordAt(m,y);if(M){for(;M.start<0;)M.start+=this._bufferService.cols,m[1]--;this._model.selectionStart=[M.start,m[1]],this._model.selectionStartLength=M.length}}_selectToWordAt(m){let y=this._getWordAt(m,!0);if(y){let M=m[1];for(;y.start<0;)y.start+=this._bufferService.cols,M--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,M++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,M]}}_isCharWordSeparator(m){return m.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(m.getChars())>=0}_selectLineAt(m){let y=this._bufferService.buffer.getWrappedRangeForLine(m),M={start:{x:0,y:y.first},end:{x:this._bufferService.cols-1,y:y.last}};this._model.selectionStart=[0,y.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,s.getRangeLength)(M,this._bufferService.cols)}};r.SelectionService=T=c([f(3,D.IBufferService),f(4,D.ICoreService),f(5,g.IMouseService),f(6,D.IOptionsService),f(7,g.IRenderService),f(8,g.ICoreBrowserService)],T)},4725:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IThemeService=r.ICharacterJoinerService=r.ISelectionService=r.IRenderService=r.IMouseService=r.ICoreBrowserService=r.ICharSizeService=void 0;let c=o(8343);r.ICharSizeService=(0,c.createDecorator)("CharSizeService"),r.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),r.IMouseService=(0,c.createDecorator)("MouseService"),r.IRenderService=(0,c.createDecorator)("RenderService"),r.ISelectionService=(0,c.createDecorator)("SelectionService"),r.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),r.IThemeService=(0,c.createDecorator)("ThemeService")},6731:function(p,r,o){var c=this&&this.__decorate||function(T,m,y,M){var S,w=arguments.length,L=w<3?m:M===null?M=Object.getOwnPropertyDescriptor(m,y):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(T,m,y,M);else for(var I=T.length-1;I>=0;I--)(S=T[I])&&(L=(w<3?S(L):w>3?S(m,y,L):S(m,y))||L);return w>3&&L&&Object.defineProperty(m,y,L),L},f=this&&this.__param||function(T,m){return function(y,M){m(y,M,T)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeService=r.DEFAULT_ANSI_COLORS=void 0;let u=o(7239),v=o(8055),h=o(8460),g=o(844),d=o(2585),a=v.css.toColor("#ffffff"),i=v.css.toColor("#000000"),s=v.css.toColor("#ffffff"),_=v.css.toColor("#000000"),D={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};r.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let T=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],m=[0,95,135,175,215,255];for(let y=0;y<216;y++){let M=m[y/36%6|0],S=m[y/6%6|0],w=m[y%6];T.push({css:v.channels.toCss(M,S,w),rgba:v.channels.toRgba(M,S,w)})}for(let y=0;y<24;y++){let M=8+10*y;T.push({css:v.channels.toCss(M,M,M),rgba:v.channels.toRgba(M,M,M)})}return T})());let C=r.ThemeService=class extends g.Disposable{get colors(){return this._colors}constructor(T){super(),this._optionsService=T,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new h.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:a,background:i,cursor:s,cursorAccent:_,selectionForeground:void 0,selectionBackgroundTransparent:D,selectionBackgroundOpaque:v.color.blend(i,D),selectionInactiveBackgroundTransparent:D,selectionInactiveBackgroundOpaque:v.color.blend(i,D),ansi:r.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(T={}){let m=this._colors;if(m.foreground=b(T.foreground,a),m.background=b(T.background,i),m.cursor=b(T.cursor,s),m.cursorAccent=b(T.cursorAccent,_),m.selectionBackgroundTransparent=b(T.selectionBackground,D),m.selectionBackgroundOpaque=v.color.blend(m.background,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundTransparent=b(T.selectionInactiveBackground,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundOpaque=v.color.blend(m.background,m.selectionInactiveBackgroundTransparent),m.selectionForeground=T.selectionForeground?b(T.selectionForeground,v.NULL_COLOR):void 0,m.selectionForeground===v.NULL_COLOR&&(m.selectionForeground=void 0),v.color.isOpaque(m.selectionBackgroundTransparent)&&(m.selectionBackgroundTransparent=v.color.opacity(m.selectionBackgroundTransparent,.3)),v.color.isOpaque(m.selectionInactiveBackgroundTransparent)&&(m.selectionInactiveBackgroundTransparent=v.color.opacity(m.selectionInactiveBackgroundTransparent,.3)),m.ansi=r.DEFAULT_ANSI_COLORS.slice(),m.ansi[0]=b(T.black,r.DEFAULT_ANSI_COLORS[0]),m.ansi[1]=b(T.red,r.DEFAULT_ANSI_COLORS[1]),m.ansi[2]=b(T.green,r.DEFAULT_ANSI_COLORS[2]),m.ansi[3]=b(T.yellow,r.DEFAULT_ANSI_COLORS[3]),m.ansi[4]=b(T.blue,r.DEFAULT_ANSI_COLORS[4]),m.ansi[5]=b(T.magenta,r.DEFAULT_ANSI_COLORS[5]),m.ansi[6]=b(T.cyan,r.DEFAULT_ANSI_COLORS[6]),m.ansi[7]=b(T.white,r.DEFAULT_ANSI_COLORS[7]),m.ansi[8]=b(T.brightBlack,r.DEFAULT_ANSI_COLORS[8]),m.ansi[9]=b(T.brightRed,r.DEFAULT_ANSI_COLORS[9]),m.ansi[10]=b(T.brightGreen,r.DEFAULT_ANSI_COLORS[10]),m.ansi[11]=b(T.brightYellow,r.DEFAULT_ANSI_COLORS[11]),m.ansi[12]=b(T.brightBlue,r.DEFAULT_ANSI_COLORS[12]),m.ansi[13]=b(T.brightMagenta,r.DEFAULT_ANSI_COLORS[13]),m.ansi[14]=b(T.brightCyan,r.DEFAULT_ANSI_COLORS[14]),m.ansi[15]=b(T.brightWhite,r.DEFAULT_ANSI_COLORS[15]),T.extendedAnsi){let y=Math.min(m.ansi.length-16,T.extendedAnsi.length);for(let M=0;M<y;M++)m.ansi[M+16]=b(T.extendedAnsi[M],r.DEFAULT_ANSI_COLORS[M+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(T){this._restoreColor(T),this._onChangeColors.fire(this.colors)}_restoreColor(T){if(T!==void 0)switch(T){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[T]=this._restoreColors.ansi[T]}else for(let m=0;m<this._restoreColors.ansi.length;++m)this._colors.ansi[m]=this._restoreColors.ansi[m]}modifyColors(T){T(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function b(T,m){if(T!==void 0)try{return v.css.toColor(T)}catch{}return m}r.ThemeService=C=c([f(0,d.IOptionsService)],C)},6349:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CircularList=void 0;let c=o(8460),f=o(844);class u extends f.Disposable{constructor(h){super(),this._maxLength=h,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(h){if(this._maxLength===h)return;let g=new Array(h);for(let d=0;d<Math.min(h,this.length);d++)g[d]=this._array[this._getCyclicIndex(d)];this._array=g,this._maxLength=h,this._startIndex=0}get length(){return this._length}set length(h){if(h>this._length)for(let g=this._length;g<h;g++)this._array[g]=void 0;this._length=h}get(h){return this._array[this._getCyclicIndex(h)]}set(h,g){this._array[this._getCyclicIndex(h)]=g}push(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(h,g,...d){if(g){for(let a=h;a<this._length-g;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+g)];this._length-=g,this.onDeleteEmitter.fire({index:h,amount:g})}for(let a=this._length-1;a>=h;a--)this._array[this._getCyclicIndex(a+d.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<d.length;a++)this._array[this._getCyclicIndex(h+a)]=d[a];if(d.length&&this.onInsertEmitter.fire({index:h,amount:d.length}),this._length+d.length>this._maxLength){let a=this._length+d.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=d.length}trimStart(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)}shiftElements(h,g,d){if(!(g<=0)){if(h<0||h>=this._length)throw new Error("start argument out of range");if(h+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let i=g-1;i>=0;i--)this.set(h+i+d,this.get(h+i));let a=h+g+d-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<g;a++)this.set(h+a+d,this.get(h+a))}}_getCyclicIndex(h){return(this._startIndex+h)%this._maxLength}}r.CircularList=u},1439:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.clone=function o(c,f=5){if(typeof c!="object")return c;let u=Array.isArray(c)?[]:{};for(let v in c)u[v]=f<=1?c[v]:c[v]&&o(c[v],f-1);return u}},8055:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let c=o(6114),f=0,u=0,v=0,h=0;var g,d,a,i,s;function _(C){let b=C.toString(16);return b.length<2?"0"+b:b}function D(C,b){return C<b?(b+.05)/(C+.05):(C+.05)/(b+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(b,T,m,y){return y!==void 0?`#${_(b)}${_(T)}${_(m)}${_(y)}`:`#${_(b)}${_(T)}${_(m)}`},C.toRgba=function(b,T,m,y=255){return(b<<24|T<<16|m<<8|y)>>>0}}(g||(r.channels=g={})),function(C){function b(T,m){return h=Math.round(255*m),[f,u,v]=s.toChannels(T.rgba),{css:g.toCss(f,u,v,h),rgba:g.toRgba(f,u,v,h)}}C.blend=function(T,m){if(h=(255&m.rgba)/255,h===1)return{css:m.css,rgba:m.rgba};let y=m.rgba>>24&255,M=m.rgba>>16&255,S=m.rgba>>8&255,w=T.rgba>>24&255,L=T.rgba>>16&255,I=T.rgba>>8&255;return f=w+Math.round((y-w)*h),u=L+Math.round((M-L)*h),v=I+Math.round((S-I)*h),{css:g.toCss(f,u,v),rgba:g.toRgba(f,u,v)}},C.isOpaque=function(T){return(255&T.rgba)==255},C.ensureContrastRatio=function(T,m,y){let M=s.ensureContrastRatio(T.rgba,m.rgba,y);if(M)return s.toColor(M>>24&255,M>>16&255,M>>8&255)},C.opaque=function(T){let m=(255|T.rgba)>>>0;return[f,u,v]=s.toChannels(m),{css:g.toCss(f,u,v),rgba:m}},C.opacity=b,C.multiplyOpacity=function(T,m){return h=255&T.rgba,b(T,h*m/255)},C.toColorRGB=function(T){return[T.rgba>>24&255,T.rgba>>16&255,T.rgba>>8&255]}}(d||(r.color=d={})),function(C){let b,T;if(!c.isNode){let m=document.createElement("canvas");m.width=1,m.height=1;let y=m.getContext("2d",{willReadFrequently:!0});y&&(b=y,b.globalCompositeOperation="copy",T=b.createLinearGradient(0,0,1,1))}C.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return f=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),v=parseInt(m.slice(3,4).repeat(2),16),s.toColor(f,u,v);case 5:return f=parseInt(m.slice(1,2).repeat(2),16),u=parseInt(m.slice(2,3).repeat(2),16),v=parseInt(m.slice(3,4).repeat(2),16),h=parseInt(m.slice(4,5).repeat(2),16),s.toColor(f,u,v,h);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}let y=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(y)return f=parseInt(y[1]),u=parseInt(y[2]),v=parseInt(y[3]),h=Math.round(255*(y[5]===void 0?1:parseFloat(y[5]))),s.toColor(f,u,v,h);if(!b||!T)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=T,b.fillStyle=m,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[f,u,v,h]=b.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(f,u,v,h),css:m}}}(a||(r.css=a={})),function(C){function b(T,m,y){let M=T/255,S=m/255,w=y/255;return .2126*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))}C.relativeLuminance=function(T){return b(T>>16&255,T>>8&255,255&T)},C.relativeLuminance2=b}(i||(r.rgb=i={})),function(C){function b(m,y,M){let S=m>>24&255,w=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,w,L));for(;W<M&&(I>0||R>0||P>0);)I-=Math.max(0,Math.ceil(.1*I)),R-=Math.max(0,Math.ceil(.1*R)),P-=Math.max(0,Math.ceil(.1*P)),W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,w,L));return(I<<24|R<<16|P<<8|255)>>>0}function T(m,y,M){let S=m>>24&255,w=m>>16&255,L=m>>8&255,I=y>>24&255,R=y>>16&255,P=y>>8&255,W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,w,L));for(;W<M&&(I<255||R<255||P<255);)I=Math.min(255,I+Math.ceil(.1*(255-I))),R=Math.min(255,R+Math.ceil(.1*(255-R))),P=Math.min(255,P+Math.ceil(.1*(255-P))),W=D(i.relativeLuminance2(I,R,P),i.relativeLuminance2(S,w,L));return(I<<24|R<<16|P<<8|255)>>>0}C.ensureContrastRatio=function(m,y,M){let S=i.relativeLuminance(m>>8),w=i.relativeLuminance(y>>8);if(D(S,w)<M){if(w<S){let R=b(m,y,M),P=D(S,i.relativeLuminance(R>>8));if(P<M){let W=T(m,y,M);return P>D(S,i.relativeLuminance(W>>8))?R:W}return R}let L=T(m,y,M),I=D(S,i.relativeLuminance(L>>8));if(I<M){let R=b(m,y,M);return I>D(S,i.relativeLuminance(R>>8))?L:R}return L}},C.reduceLuminance=b,C.increaseLuminance=T,C.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]},C.toColor=function(m,y,M,S){return{css:g.toCss(m,y,M,S),rgba:g.toRgba(m,y,M,S)}}}(s||(r.rgba=s={})),r.toPaddedHex=_,r.contrastRatio=D},8969:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreTerminal=void 0;let c=o(844),f=o(2585),u=o(4348),v=o(7866),h=o(744),g=o(7302),d=o(6975),a=o(8460),i=o(1753),s=o(1480),_=o(7994),D=o(9282),C=o(5435),b=o(5981),T=o(2660),m=!1;class y extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new a.EventEmitter),this._onScroll.event(S=>{var w;(w=this._onScrollApi)===null||w===void 0||w.fire(S.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(S){for(let w in S)this.optionsService.options[w]=S[w]}constructor(S){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new a.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new g.OptionsService(S)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(h.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(i.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(s.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(_.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(T.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,a.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,a.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,a.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,a.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(w=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(w=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new b.WriteBuffer((w,L)=>this._inputHandler.parse(w,L))),this.register((0,a.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(S,w){this._writeBuffer.write(S,w)}writeSync(S,w){this._logService.logLevel<=f.LogLevelEnum.WARN&&!m&&(this._logService.warn("writeSync is unreliable and will be removed soon."),m=!0),this._writeBuffer.writeSync(S,w)}resize(S,w){isNaN(S)||isNaN(w)||(S=Math.max(S,h.MINIMUM_COLS),w=Math.max(w,h.MINIMUM_ROWS),this._bufferService.resize(S,w))}scroll(S,w=!1){this._bufferService.scroll(S,w)}scrollLines(S,w,L){this._bufferService.scrollLines(S,w,L)}scrollPages(S){this.scrollLines(S*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(S){let w=S-this._bufferService.buffer.ydisp;w!==0&&this.scrollLines(w)}registerEscHandler(S,w){return this._inputHandler.registerEscHandler(S,w)}registerDcsHandler(S,w){return this._inputHandler.registerDcsHandler(S,w)}registerCsiHandler(S,w){return this._inputHandler.registerCsiHandler(S,w)}registerOscHandler(S,w){return this._inputHandler.registerOscHandler(S,w)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let S=!1,w=this.optionsService.rawOptions.windowsPty;w&&w.buildNumber!==void 0&&w.buildNumber!==void 0?S=w.backend==="conpty"&&w.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(S=!0),S?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let S=[];S.push(this.onLineFeed(D.updateWindowsModeWrappedState.bind(null,this._bufferService))),S.push(this.registerCsiHandler({final:"H"},()=>((0,D.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(let w of S)w.dispose()})}}}r.CoreTerminal=y},8460:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===o)return void this._listeners.splice(c,1)}}})),this._event}fire(o,c){let f=[];for(let u=0;u<this._listeners.length;u++)f.push(this._listeners[u]);for(let u=0;u<f.length;u++)f[u].call(void 0,o,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(o,c){return o(f=>c.fire(f))}},5435:function(p,r,o){var c=this&&this.__decorate||function(W,E,A,x){var H,U=arguments.length,re=U<3?E:x===null?x=Object.getOwnPropertyDescriptor(E,A):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(W,E,A,x);else for(var oe=W.length-1;oe>=0;oe--)(H=W[oe])&&(re=(U<3?H(re):U>3?H(E,A,re):H(E,A))||re);return U>3&&re&&Object.defineProperty(E,A,re),re},f=this&&this.__param||function(W,E){return function(A,x){E(A,x,W)}};Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;let u=o(2584),v=o(7116),h=o(2015),g=o(844),d=o(482),a=o(8437),i=o(8460),s=o(643),_=o(511),D=o(3734),C=o(2585),b=o(6242),T=o(6351),m=o(5941),y={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function S(W,E){if(W>24)return E.setWinLines||!1;switch(W){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var w;(function(W){W[W.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",W[W.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(w||(r.WindowsOptionsReportType=w={}));let L=0;class I extends g.Disposable{getAttrData(){return this._curAttrData}constructor(E,A,x,H,U,re,oe,V,fe=new h.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=A,this._coreService=x,this._logService=H,this._optionsService=U,this._oscLinkService=re,this._coreMouseService=oe,this._unicodeService=V,this._parser=fe,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new _.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new i.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new i.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new i.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new i.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new i.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new i.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new i.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new i.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new i.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new i.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new i.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new i.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new i.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new R(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(F=>this._activeBuffer=F.activeBuffer)),this._parser.setCsiHandlerFallback((F,N)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(F),params:N.toArray()})}),this._parser.setEscHandlerFallback(F=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(F)})}),this._parser.setExecuteHandlerFallback(F=>{this._logService.debug("Unknown EXECUTE code: ",{code:F})}),this._parser.setOscHandlerFallback((F,N,q)=>{this._logService.debug("Unknown OSC code: ",{identifier:F,action:N,data:q})}),this._parser.setDcsHandlerFallback((F,N,q)=>{N==="HOOK"&&(q=q.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(F),action:N,payload:q})}),this._parser.setPrintHandler((F,N,q)=>this.print(F,N,q)),this._parser.registerCsiHandler({final:"@"},F=>this.insertChars(F)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},F=>this.scrollLeft(F)),this._parser.registerCsiHandler({final:"A"},F=>this.cursorUp(F)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},F=>this.scrollRight(F)),this._parser.registerCsiHandler({final:"B"},F=>this.cursorDown(F)),this._parser.registerCsiHandler({final:"C"},F=>this.cursorForward(F)),this._parser.registerCsiHandler({final:"D"},F=>this.cursorBackward(F)),this._parser.registerCsiHandler({final:"E"},F=>this.cursorNextLine(F)),this._parser.registerCsiHandler({final:"F"},F=>this.cursorPrecedingLine(F)),this._parser.registerCsiHandler({final:"G"},F=>this.cursorCharAbsolute(F)),this._parser.registerCsiHandler({final:"H"},F=>this.cursorPosition(F)),this._parser.registerCsiHandler({final:"I"},F=>this.cursorForwardTab(F)),this._parser.registerCsiHandler({final:"J"},F=>this.eraseInDisplay(F,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},F=>this.eraseInDisplay(F,!0)),this._parser.registerCsiHandler({final:"K"},F=>this.eraseInLine(F,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},F=>this.eraseInLine(F,!0)),this._parser.registerCsiHandler({final:"L"},F=>this.insertLines(F)),this._parser.registerCsiHandler({final:"M"},F=>this.deleteLines(F)),this._parser.registerCsiHandler({final:"P"},F=>this.deleteChars(F)),this._parser.registerCsiHandler({final:"S"},F=>this.scrollUp(F)),this._parser.registerCsiHandler({final:"T"},F=>this.scrollDown(F)),this._parser.registerCsiHandler({final:"X"},F=>this.eraseChars(F)),this._parser.registerCsiHandler({final:"Z"},F=>this.cursorBackwardTab(F)),this._parser.registerCsiHandler({final:"`"},F=>this.charPosAbsolute(F)),this._parser.registerCsiHandler({final:"a"},F=>this.hPositionRelative(F)),this._parser.registerCsiHandler({final:"b"},F=>this.repeatPrecedingCharacter(F)),this._parser.registerCsiHandler({final:"c"},F=>this.sendDeviceAttributesPrimary(F)),this._parser.registerCsiHandler({prefix:">",final:"c"},F=>this.sendDeviceAttributesSecondary(F)),this._parser.registerCsiHandler({final:"d"},F=>this.linePosAbsolute(F)),this._parser.registerCsiHandler({final:"e"},F=>this.vPositionRelative(F)),this._parser.registerCsiHandler({final:"f"},F=>this.hVPosition(F)),this._parser.registerCsiHandler({final:"g"},F=>this.tabClear(F)),this._parser.registerCsiHandler({final:"h"},F=>this.setMode(F)),this._parser.registerCsiHandler({prefix:"?",final:"h"},F=>this.setModePrivate(F)),this._parser.registerCsiHandler({final:"l"},F=>this.resetMode(F)),this._parser.registerCsiHandler({prefix:"?",final:"l"},F=>this.resetModePrivate(F)),this._parser.registerCsiHandler({final:"m"},F=>this.charAttributes(F)),this._parser.registerCsiHandler({final:"n"},F=>this.deviceStatus(F)),this._parser.registerCsiHandler({prefix:"?",final:"n"},F=>this.deviceStatusPrivate(F)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},F=>this.softReset(F)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},F=>this.setCursorStyle(F)),this._parser.registerCsiHandler({final:"r"},F=>this.setScrollRegion(F)),this._parser.registerCsiHandler({final:"s"},F=>this.saveCursor(F)),this._parser.registerCsiHandler({final:"t"},F=>this.windowOptions(F)),this._parser.registerCsiHandler({final:"u"},F=>this.restoreCursor(F)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},F=>this.insertColumns(F)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},F=>this.deleteColumns(F)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},F=>this.selectProtected(F)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},F=>this.requestMode(F,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},F=>this.requestMode(F,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new b.OscHandler(F=>(this.setTitle(F),this.setIconName(F),!0))),this._parser.registerOscHandler(1,new b.OscHandler(F=>this.setIconName(F))),this._parser.registerOscHandler(2,new b.OscHandler(F=>this.setTitle(F))),this._parser.registerOscHandler(4,new b.OscHandler(F=>this.setOrReportIndexedColor(F))),this._parser.registerOscHandler(8,new b.OscHandler(F=>this.setHyperlink(F))),this._parser.registerOscHandler(10,new b.OscHandler(F=>this.setOrReportFgColor(F))),this._parser.registerOscHandler(11,new b.OscHandler(F=>this.setOrReportBgColor(F))),this._parser.registerOscHandler(12,new b.OscHandler(F=>this.setOrReportCursorColor(F))),this._parser.registerOscHandler(104,new b.OscHandler(F=>this.restoreIndexedColor(F))),this._parser.registerOscHandler(110,new b.OscHandler(F=>this.restoreFgColor(F))),this._parser.registerOscHandler(111,new b.OscHandler(F=>this.restoreBgColor(F))),this._parser.registerOscHandler(112,new b.OscHandler(F=>this.restoreCursorColor(F))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let F in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:F},()=>this.selectCharset("("+F)),this._parser.registerEscHandler({intermediates:")",final:F},()=>this.selectCharset(")"+F)),this._parser.registerEscHandler({intermediates:"*",final:F},()=>this.selectCharset("*"+F)),this._parser.registerEscHandler({intermediates:"+",final:F},()=>this.selectCharset("+"+F)),this._parser.registerEscHandler({intermediates:"-",final:F},()=>this.selectCharset("-"+F)),this._parser.registerEscHandler({intermediates:".",final:F},()=>this.selectCharset("."+F)),this._parser.registerEscHandler({intermediates:"/",final:F},()=>this.selectCharset("/"+F));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(F=>(this._logService.error("Parsing error: ",F),F)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new T.DcsHandler((F,N)=>this.requestStatusString(F,N)))}_preserveStack(E,A,x,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=x,this._parseStack.position=H}_logSlowResolvingAsync(E){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([E,new Promise((A,x)=>setTimeout(()=>x("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,A){let x,H=this._activeBuffer.x,U=this._activeBuffer.y,re=0,oe=this._parseStack.paused;if(oe){if(x=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(x),x;H=this._parseStack.cursorStartX,U=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>M&&(re=this._parseStack.position+M)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,V=>String.fromCharCode(V)).join("")}"`),typeof E=="string"?E.split("").map(V=>V.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(E.length,M))),oe||this._dirtyRowTracker.clearRange(),E.length>M)for(let V=re;V<E.length;V+=M){let fe=V+M<E.length?V+M:E.length,F=typeof E=="string"?this._stringDecoder.decode(E.substring(V,fe),this._parseBuffer):this._utf8Decoder.decode(E.subarray(V,fe),this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,F))return this._preserveStack(H,U,F,V),this._logSlowResolvingAsync(x),x}else if(!oe){let V=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(x=this._parser.parse(this._parseBuffer,V))return this._preserveStack(H,U,V,0),this._logSlowResolvingAsync(x),x}this._activeBuffer.x===H&&this._activeBuffer.y===U||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,A,x){let H,U,re=this._charsetService.charset,oe=this._optionsService.rawOptions.screenReaderMode,V=this._bufferService.cols,fe=this._coreService.decPrivateModes.wraparound,F=this._coreService.modes.insertMode,N=this._curAttrData,q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&x-A>0&&q.getWidth(this._activeBuffer.x-1)===2&&q.setCellFromCodePoint(this._activeBuffer.x-1,0,1,N.fg,N.bg,N.extended);for(let k=A;k<x;++k){if(H=E[k],U=this._unicodeService.wcwidth(H),H<127&&re){let _e=re[String.fromCharCode(H)];_e&&(H=_e.charCodeAt(0))}if(oe&&this._onA11yChar.fire((0,d.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),U||!this._activeBuffer.x){if(this._activeBuffer.x+U-1>=V){if(fe){for(;this._activeBuffer.x<V;)q.setCellFromCodePoint(this._activeBuffer.x++,0,1,N.fg,N.bg,N.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),q=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=V-1,U===2)continue}if(F&&(q.insertCells(this._activeBuffer.x,U,this._activeBuffer.getNullCell(N),N),q.getWidth(V-1)===2&&q.setCellFromCodePoint(V-1,s.NULL_CELL_CODE,s.NULL_CELL_WIDTH,N.fg,N.bg,N.extended)),q.setCellFromCodePoint(this._activeBuffer.x++,H,U,N.fg,N.bg,N.extended),U>0)for(;--U;)q.setCellFromCodePoint(this._activeBuffer.x++,0,0,N.fg,N.bg,N.extended)}else q.getWidth(this._activeBuffer.x-1)?q.addCodepointToCell(this._activeBuffer.x-1,H):q.addCodepointToCell(this._activeBuffer.x-2,H)}x-A>0&&(q.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<V&&x-A>0&&q.getWidth(this._activeBuffer.x)===0&&!q.hasContent(this._activeBuffer.x)&&q.setCellFromCodePoint(this._activeBuffer.x,0,1,N.fg,N.bg,N.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,A){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,A):this._parser.registerCsiHandler(E,x=>!S(x.params[0],this._optionsService.rawOptions.windowOptions)||A(x))}registerDcsHandler(E,A){return this._parser.registerDcsHandler(E,new T.DcsHandler(A))}registerEscHandler(E,A){return this._parser.registerEscHandler(E,A)}registerOscHandler(E,A){return this._parser.registerOscHandler(E,new b.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=E,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+A)}cursorUp(E){let A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){let A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){let A=E.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=E.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=E.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){let A=E.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,A,x,H=!1,U=!1){let re=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);re.replaceCells(A,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),U),H&&(re.isWrapped=!1)}_resetBufferLine(E,A=!1){let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);x&&(x.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),x.isWrapped=!1)}eraseInDisplay(E,A=!1){let x;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);x<this._bufferService.rows;x++)this._resetBufferLine(x,A);this._dirtyRowTracker.markDirty(x);break;case 1:for(x=this._activeBuffer.y,this._dirtyRowTracker.markDirty(x),this._eraseInBufferLine(x,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(x+1).isWrapped=!1);x--;)this._resetBufferLine(x,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(x=this._bufferService.rows,this._dirtyRowTracker.markDirty(x-1);x--;)this._resetBufferLine(x,A);this._dirtyRowTracker.markDirty(0);break;case 3:let H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(E,A=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let A=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;A--;)this._activeBuffer.lines.splice(U-1,1),this._activeBuffer.lines.splice(x,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let A=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=this._activeBuffer.ybase+this._activeBuffer.y,H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;A--;)this._activeBuffer.lines.splice(x,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let A=E.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let A=E.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let A=E.params[0]||1;for(let x=this._activeBuffer.scrollTop;x<=this._activeBuffer.scrollBottom;++x){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();let A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;let A=E.params[0]||1,x=new Uint32Array(A);for(let H=0;H<A;++H)x[H]=this._parser.precedingCodepoint;return this.print(x,0,x.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let A=0;A<E.length;A++)switch(E.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let A=0;A<E.length;A++)switch(E.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let A=0;A<E.length;A++)switch(E.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let A=0;A<E.length;A++)switch(E.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,A){let x=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:U}=this._coreMouseService,re=this._coreService,{buffers:oe,cols:V}=this._bufferService,{active:fe,alt:F}=oe,N=this._optionsService.rawOptions,q=Me=>Me?1:2,k=E.params[0];return _e=k,Q=A?k===2?4:k===4?q(re.modes.insertMode):k===12?3:k===20?q(N.convertEol):0:k===1?q(x.applicationCursorKeys):k===3?N.windowOptions.setWinLines?V===80?2:V===132?1:0:0:k===6?q(x.origin):k===7?q(x.wraparound):k===8?3:k===9?q(H==="X10"):k===12?q(N.cursorBlink):k===25?q(!re.isCursorHidden):k===45?q(x.reverseWraparound):k===66?q(x.applicationKeypad):k===67?4:k===1e3?q(H==="VT200"):k===1002?q(H==="DRAG"):k===1003?q(H==="ANY"):k===1004?q(x.sendFocus):k===1005?4:k===1006?q(U==="SGR"):k===1015?4:k===1016?q(U==="SGR_PIXELS"):k===1048?1:k===47||k===1047||k===1049?q(fe===F):k===2004?q(x.bracketedPasteMode):0,re.triggerDataEvent(`${u.C0.ESC}[${A?"":"?"}${_e};${Q}$y`),!0;var _e,Q}_updateAttrColor(E,A,x,H,U){return A===2?(E|=50331648,E&=-16777216,E|=D.AttributeData.fromColorRGB([x,H,U])):A===5&&(E&=-50331904,E|=33554432|255&x),E}_extractColor(E,A,x){let H=[0,0,-1,0,0,0],U=0,re=0;do{if(H[re+U]=E.params[A+re],E.hasSubParams(A+re)){let oe=E.getSubParams(A+re),V=0;do H[1]===5&&(U=1),H[re+V+1+U]=oe[V];while(++V<oe.length&&V+re+1+U<H.length);break}if(H[1]===5&&re+U>=2||H[1]===2&&re+U>=5)break;H[1]&&(U=1)}while(++re+A<E.length&&re+U<H.length);for(let oe=2;oe<H.length;++oe)H[oe]===-1&&(H[oe]=0);switch(H[0]){case 38:x.fg=this._updateAttrColor(x.fg,H[1],H[3],H[4],H[5]);break;case 48:x.bg=this._updateAttrColor(x.bg,H[1],H[3],H[4],H[5]);break;case 58:x.extended=x.extended.clone(),x.extended.underlineColor=this._updateAttrColor(x.extended.underlineColor,H[1],H[3],H[4],H[5])}return re}_processUnderline(E,A){A.extended=A.extended.clone(),(!~E||E>5)&&(E=1),A.extended.underlineStyle=E,A.fg|=268435456,E===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(E){E.fg=a.DEFAULT_ATTR_DATA.fg,E.bg=a.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;let A=E.length,x,H=this._curAttrData;for(let U=0;U<A;U++)x=E.params[U],x>=30&&x<=37?(H.fg&=-50331904,H.fg|=16777216|x-30):x>=40&&x<=47?(H.bg&=-50331904,H.bg|=16777216|x-40):x>=90&&x<=97?(H.fg&=-50331904,H.fg|=16777224|x-90):x>=100&&x<=107?(H.bg&=-50331904,H.bg|=16777224|x-100):x===0?this._processSGR0(H):x===1?H.fg|=134217728:x===3?H.bg|=67108864:x===4?(H.fg|=268435456,this._processUnderline(E.hasSubParams(U)?E.getSubParams(U)[0]:1,H)):x===5?H.fg|=536870912:x===7?H.fg|=67108864:x===8?H.fg|=1073741824:x===9?H.fg|=2147483648:x===2?H.bg|=134217728:x===21?this._processUnderline(2,H):x===22?(H.fg&=-134217729,H.bg&=-134217729):x===23?H.bg&=-67108865:x===24?(H.fg&=-268435457,this._processUnderline(0,H)):x===25?H.fg&=-536870913:x===27?H.fg&=-67108865:x===28?H.fg&=-1073741825:x===29?H.fg&=2147483647:x===39?(H.fg&=-67108864,H.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):x===49?(H.bg&=-67108864,H.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):x===38||x===48||x===58?U+=this._extractColor(E,U,H):x===53?H.bg|=1073741824:x===55?H.bg&=-1073741825:x===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):x===100?(H.fg&=-67108864,H.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",x);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:let A=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${A};${x}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){let A=this._activeBuffer.y+1,x=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${A};${x}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){let A=E.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let x=A%2==1;return this._optionsService.options.cursorBlink=x,!0}setScrollRegion(E){let A=E.params[0]||1,x;return(E.length<2||(x=E.params[1])>this._bufferService.rows||x===0)&&(x=this._bufferService.rows),x>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=x-1,this._setCursor(0,0)),!0}windowOptions(E){if(!S(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;let A=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(w.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(w.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){let A=[],x=E.split(";");for(;x.length>1;){let H=x.shift(),U=x.shift();if(/^\d+$/.exec(H)){let re=parseInt(H);if(P(re))if(U==="?")A.push({type:0,index:re});else{let oe=(0,m.parseColor)(U);oe&&A.push({type:1,index:re,color:oe})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(E){let A=E.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(E,A){this._getCurrentLinkId()&&this._finishHyperlink();let x=E.split(":"),H,U=x.findIndex(re=>re.startsWith("id="));return U!==-1&&(H=x[U].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,A){let x=E.split(";");for(let H=0;H<x.length&&!(A>=this._specialColors.length);++H,++A)if(x[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{let U=(0,m.parseColor)(x[H]);U&&this._onColor.fire([{type:1,index:this._specialColors[A],color:U}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;let A=[],x=E.split(";");for(let H=0;H<x.length;++H)if(/^\d+$/.exec(x[H])){let U=parseInt(x[H]);P(U)&&A.push({type:2,index:U})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(y[E[0]],v.CHARSETS[E[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){let E=new _.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){let x=this._activeBuffer.ybase+this._activeBuffer.y+A,H=this._activeBuffer.lines.get(x);H&&(H.fill(E),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,A){let x=this._bufferService.buffer,H=this._optionsService.rawOptions;return(U=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${U}${u.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${x.scrollTop+1};${x.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,A){this._dirtyRowTracker.markRangeDirty(E,A)}}r.InputHandler=I;let R=class{constructor(W){this._bufferService=W,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(W){W<this.start?this.start=W:W>this.end&&(this.end=W)}markRangeDirty(W,E){W>E&&(L=W,W=E,E=L),W<this.start&&(this.start=W),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function P(W){return 0<=W&&W<256}R=c([f(0,C.IBufferService)],R)},844:(p,r)=>{function o(c){for(let f of c)f.dispose();c.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){let f=this._disposables.indexOf(c);f!==-1&&this._disposables.splice(f,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){var f;this._isDisposed||c===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){var c;this._isDisposed=!0,(c=this._value)===null||c===void 0||c.dispose(),this._value=void 0}},r.toDisposable=function(c){return{dispose:c}},r.disposeArray=o,r.getDisposeArrayDisposable=function(c){return{dispose:()=>o(c)}}},1505:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(f,u,v){this._data[f]||(this._data[f]={}),this._data[f][u]=v}get(f,u){return this._data[f]?this._data[f][u]:void 0}clear(){this._data={}}}r.TwoKeyMap=o,r.FourKeyMap=class{constructor(){this._data=new o}set(c,f,u,v,h){this._data.get(c,f)||this._data.set(c,f,new o),this._data.get(c,f).set(u,v,h)}get(c,f,u,v){var h;return(h=this._data.get(c,f))===null||h===void 0?void 0:h.get(u,v)}clear(){this._data.clear()}}},6114:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";let o=r.isNode?"node":navigator.userAgent,c=r.isNode?"node":navigator.platform;r.isFirefox=o.includes("Firefox"),r.isLegacyEdge=o.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(o),r.getSafariVersion=function(){if(!r.isSafari)return 0;let f=o.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),r.isIpad=c==="iPad",r.isIphone=c==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),r.isLinux=c.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(o)},6106:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SortedList=void 0;let o=0;r.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(o=this._search(this._getKey(c)),this._array.splice(o,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;let f=this._getKey(c);if(f===void 0||(o=this._search(f),o===-1)||this._getKey(this._array[o])!==f)return!1;do if(this._array[o]===c)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===f);return!1}*getKeyIterator(c){if(this._array.length!==0&&(o=this._search(c),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===c))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===c)}forEachByKey(c,f){if(this._array.length!==0&&(o=this._search(c),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===c))do f(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===c)}values(){return[...this._array].values()}_search(c){let f=0,u=this._array.length-1;for(;u>=f;){let v=f+u>>1,h=this._getKey(this._array[v]);if(h>c)u=v-1;else{if(!(h<c)){for(;v>0&&this._getKey(this._array[v-1])===c;)v--;return v}f=v+1}}return f}}},7226:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;let c=o(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(h){this._tasks.push(h),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(h){this._idleCallback=void 0;let g=0,d=0,a=h.timeRemaining(),i=0;for(;this._i<this._tasks.length;){if(g=Date.now(),this._tasks[this._i]()||this._i++,g=Math.max(1,Date.now()-g),d=Math.max(g,d),i=h.timeRemaining(),1.5*d>i)return a-g<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-g))}ms`),void this._start();a=i}this.clear()}}class u extends f{_requestCallback(h){return setTimeout(()=>h(this._createDeadline(16)))}_cancelCallback(h){clearTimeout(h)}_createDeadline(h){let g=Date.now()+h;return{timeRemaining:()=>Math.max(0,g-Date.now())}}}r.PriorityTaskQueue=u,r.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:u,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateWindowsModeWrappedState=void 0;let c=o(643);r.updateWindowsModeWrappedState=function(f){let u=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),v=u?.get(f.cols-1),h=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);h&&v&&(h.isWrapped=v[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&v[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){let u=new o;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=o;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,v=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=v}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=c},9092:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.MAX_BUFFER_SIZE=void 0;let c=o(6349),f=o(7226),u=o(3734),v=o(8437),h=o(4634),g=o(511),d=o(643),a=o(4863),i=o(7116);r.MAX_BUFFER_SIZE=4294967295,r.Buffer=class{constructor(s,_,D){this._hasScrollback=s,this._optionsService=_,this._bufferService=D,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=i.DEFAULT_CHARSET,this.markers=[],this._nullCell=g.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=g.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(s){return s?(this._nullCell.fg=s.fg,this._nullCell.bg=s.bg,this._nullCell.extended=s.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(s){return s?(this._whitespaceCell.fg=s.fg,this._whitespaceCell.bg=s.bg,this._whitespaceCell.extended=s.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(s,_){return new v.BufferLine(this._bufferService.cols,this.getNullCell(s),_)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let s=this.ybase+this.y-this.ydisp;return s>=0&&s<this._rows}_getCorrectBufferLength(s){if(!this._hasScrollback)return s;let _=s+this._optionsService.rawOptions.scrollback;return _>r.MAX_BUFFER_SIZE?r.MAX_BUFFER_SIZE:_}fillViewportRows(s){if(this.lines.length===0){s===void 0&&(s=v.DEFAULT_ATTR_DATA);let _=this._rows;for(;_--;)this.lines.push(this.getBlankLine(s))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(s,_){let D=this.getNullCell(v.DEFAULT_ATTR_DATA),C=0,b=this._getCorrectBufferLength(_);if(b>this.lines.maxLength&&(this.lines.maxLength=b),this.lines.length>0){if(this._cols<s)for(let m=0;m<this.lines.length;m++)C+=+this.lines.get(m).resize(s,D);let T=0;if(this._rows<_)for(let m=this._rows;m<_;m++)this.lines.length<_+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(s,D)):this.ybase>0&&this.lines.length<=this.ybase+this.y+T+1?(this.ybase--,T++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(s,D)));else for(let m=this._rows;m>_;m--)this.lines.length>_+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(b<this.lines.maxLength){let m=this.lines.length-b;m>0&&(this.lines.trimStart(m),this.ybase=Math.max(this.ybase-m,0),this.ydisp=Math.max(this.ydisp-m,0),this.savedY=Math.max(this.savedY-m,0)),this.lines.maxLength=b}this.x=Math.min(this.x,s-1),this.y=Math.min(this.y,_-1),T&&(this.y+=T),this.savedX=Math.min(this.savedX,s-1),this.scrollTop=0}if(this.scrollBottom=_-1,this._isReflowEnabled&&(this._reflow(s,_),this._cols>s))for(let T=0;T<this.lines.length;T++)C+=+this.lines.get(T).resize(s,D);this._cols=s,this._rows=_,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let s=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,s=!1);let _=0;for(;this._memoryCleanupPosition<this.lines.length;)if(_+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),_>100)return!0;return s}get _isReflowEnabled(){let s=this._optionsService.rawOptions.windowsPty;return s&&s.buildNumber?this._hasScrollback&&s.backend==="conpty"&&s.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(s,_){this._cols!==s&&(s>this._cols?this._reflowLarger(s,_):this._reflowSmaller(s,_))}_reflowLarger(s,_){let D=(0,h.reflowLargerGetLinesToRemove)(this.lines,this._cols,s,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(D.length>0){let C=(0,h.reflowLargerCreateNewLayout)(this.lines,D);(0,h.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(s,_,C.countRemoved)}}_reflowLargerAdjustViewport(s,_,D){let C=this.getNullCell(v.DEFAULT_ATTR_DATA),b=D;for(;b-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<_&&this.lines.push(new v.BufferLine(s,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-D,0)}_reflowSmaller(s,_){let D=this.getNullCell(v.DEFAULT_ATTR_DATA),C=[],b=0;for(let T=this.lines.length-1;T>=0;T--){let m=this.lines.get(T);if(!m||!m.isWrapped&&m.getTrimmedLength()<=s)continue;let y=[m];for(;m.isWrapped&&T>0;)m=this.lines.get(--T),y.unshift(m);let M=this.ybase+this.y;if(M>=T&&M<T+y.length)continue;let S=y[y.length-1].getTrimmedLength(),w=(0,h.reflowSmallerGetNewLineLengths)(y,this._cols,s),L=w.length-y.length,I;I=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+L):Math.max(0,this.lines.length-this.lines.maxLength+L);let R=[];for(let H=0;H<L;H++){let U=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);R.push(U)}R.length>0&&(C.push({start:T+y.length+b,newLines:R}),b+=R.length),y.push(...R);let P=w.length-1,W=w[P];W===0&&(P--,W=w[P]);let E=y.length-L-1,A=S;for(;E>=0;){let H=Math.min(A,W);if(y[P]===void 0)break;if(y[P].copyCellsFrom(y[E],A-H,W-H,H,!0),W-=H,W===0&&(P--,W=w[P]),A-=H,A===0){E--;let U=Math.max(E,0);A=(0,h.getWrappedLineTrimmedLength)(y,U,this._cols)}}for(let H=0;H<y.length;H++)w[H]<s&&y[H].setCell(w[H],D);let x=L-I;for(;x-- >0;)this.ybase===0?this.y<_-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+b)-_&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+L,this.ybase+_-1)}if(C.length>0){let T=[],m=[];for(let P=0;P<this.lines.length;P++)m.push(this.lines.get(P));let y=this.lines.length,M=y-1,S=0,w=C[S];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+b);let L=0;for(let P=Math.min(this.lines.maxLength-1,y+b-1);P>=0;P--)if(w&&w.start>M+L){for(let W=w.newLines.length-1;W>=0;W--)this.lines.set(P--,w.newLines[W]);P++,T.push({index:M+1,amount:w.newLines.length}),L+=w.newLines.length,w=C[++S]}else this.lines.set(P,m[M--]);let I=0;for(let P=T.length-1;P>=0;P--)T[P].index+=I,this.lines.onInsertEmitter.fire(T[P]),I+=T[P].amount;let R=Math.max(0,y+b-this.lines.maxLength);R>0&&this.lines.onTrimEmitter.fire(R)}}translateBufferLineToString(s,_,D=0,C){let b=this.lines.get(s);return b?b.translateToString(_,D,C):""}getWrappedRangeForLine(s){let _=s,D=s;for(;_>0&&this.lines.get(_).isWrapped;)_--;for(;D+1<this.lines.length&&this.lines.get(D+1).isWrapped;)D++;return{first:_,last:D}}setupTabStops(s){for(s!=null?this.tabs[s]||(s=this.prevStop(s)):(this.tabs={},s=0);s<this._cols;s+=this._optionsService.rawOptions.tabStopWidth)this.tabs[s]=!0}prevStop(s){for(s==null&&(s=this.x);!this.tabs[--s]&&s>0;);return s>=this._cols?this._cols-1:s<0?0:s}nextStop(s){for(s==null&&(s=this.x);!this.tabs[++s]&&s<this._cols;);return s>=this._cols?this._cols-1:s<0?0:s}clearMarkers(s){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].line===s&&(this.markers[_].dispose(),this.markers.splice(_--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].dispose(),this.markers.splice(s--,1);this._isClearing=!1}addMarker(s){let _=new a.Marker(s);return this.markers.push(_),_.register(this.lines.onTrim(D=>{_.line-=D,_.line<0&&_.dispose()})),_.register(this.lines.onInsert(D=>{_.line>=D.index&&(_.line+=D.amount)})),_.register(this.lines.onDelete(D=>{_.line>=D.index&&_.line<D.index+D.amount&&_.dispose(),_.line>D.index&&(_.line-=D.amount)})),_.register(_.onDispose(()=>this._removeMarker(_))),_}_removeMarker(s){this._isClearing||this.markers.splice(this.markers.indexOf(s),1)}}},8437:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLine=r.DEFAULT_ATTR_DATA=void 0;let c=o(3734),f=o(511),u=o(643),v=o(482);r.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let h=0;class g{constructor(a,i,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);let _=i||f.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let D=0;D<a;++D)this.setCell(D,_);this.length=a}get(a){let i=this._data[3*a+0],s=2097151&i;return[this._data[3*a+1],2097152&i?this._combined[a]:s?(0,v.stringFromCodePoint)(s):"",i>>22,2097152&i?this._combined[a].charCodeAt(this._combined[a].length-1):s]}set(a,i){this._data[3*a+1]=i[u.CHAR_DATA_ATTR_INDEX],i[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=i[1],this._data[3*a+0]=2097152|a|i[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=i[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|i[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(a){return this._data[3*a+0]>>22}hasWidth(a){return 12582912&this._data[3*a+0]}getFg(a){return this._data[3*a+1]}getBg(a){return this._data[3*a+2]}hasContent(a){return 4194303&this._data[3*a+0]}getCodePoint(a){let i=this._data[3*a+0];return 2097152&i?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&i}isCombined(a){return 2097152&this._data[3*a+0]}getString(a){let i=this._data[3*a+0];return 2097152&i?this._combined[a]:2097151&i?(0,v.stringFromCodePoint)(2097151&i):""}isProtected(a){return 536870912&this._data[3*a+2]}loadCell(a,i){return h=3*a,i.content=this._data[h+0],i.fg=this._data[h+1],i.bg=this._data[h+2],2097152&i.content&&(i.combinedData=this._combined[a]),268435456&i.bg&&(i.extended=this._extendedAttrs[a]),i}setCell(a,i){2097152&i.content&&(this._combined[a]=i.combinedData),268435456&i.bg&&(this._extendedAttrs[a]=i.extended),this._data[3*a+0]=i.content,this._data[3*a+1]=i.fg,this._data[3*a+2]=i.bg}setCellFromCodePoint(a,i,s,_,D,C){268435456&D&&(this._extendedAttrs[a]=C),this._data[3*a+0]=i|s<<22,this._data[3*a+1]=_,this._data[3*a+2]=D}addCodepointToCell(a,i){let s=this._data[3*a+0];2097152&s?this._combined[a]+=(0,v.stringFromCodePoint)(i):(2097151&s?(this._combined[a]=(0,v.stringFromCodePoint)(2097151&s)+(0,v.stringFromCodePoint)(i),s&=-2097152,s|=2097152):s=i|4194304,this._data[3*a+0]=s)}insertCells(a,i,s,_){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new c.ExtendedAttrs),i<this.length-a){let D=new f.CellData;for(let C=this.length-a-i-1;C>=0;--C)this.setCell(a+i+C,this.loadCell(a+C,D));for(let C=0;C<i;++C)this.setCell(a+C,s)}else for(let D=a;D<this.length;++D)this.setCell(D,s);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new c.ExtendedAttrs)}deleteCells(a,i,s,_){if(a%=this.length,i<this.length-a){let D=new f.CellData;for(let C=0;C<this.length-a-i;++C)this.setCell(a+C,this.loadCell(a+i+C,D));for(let C=this.length-i;C<this.length;++C)this.setCell(C,s)}else for(let D=a;D<this.length;++D)this.setCell(D,s);a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new c.ExtendedAttrs),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,_?.fg||0,_?.bg||0,_?.extended||new c.ExtendedAttrs)}replaceCells(a,i,s,_,D=!1){if(D)for(a&&this.getWidth(a-1)===2&&!this.isProtected(a-1)&&this.setCellFromCodePoint(a-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new c.ExtendedAttrs),i<this.length&&this.getWidth(i-1)===2&&!this.isProtected(i)&&this.setCellFromCodePoint(i,0,1,_?.fg||0,_?.bg||0,_?.extended||new c.ExtendedAttrs);a<i&&a<this.length;)this.isProtected(a)||this.setCell(a,s),a++;else for(a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,_?.fg||0,_?.bg||0,_?.extended||new c.ExtendedAttrs),i<this.length&&this.getWidth(i-1)===2&&this.setCellFromCodePoint(i,0,1,_?.fg||0,_?.bg||0,_?.extended||new c.ExtendedAttrs);a<i&&a<this.length;)this.setCell(a++,s)}resize(a,i){if(a===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let s=3*a;if(a>this.length){if(this._data.buffer.byteLength>=4*s)this._data=new Uint32Array(this._data.buffer,0,s);else{let _=new Uint32Array(s);_.set(this._data),this._data=_}for(let _=this.length;_<a;++_)this.setCell(_,i)}else{this._data=this._data.subarray(0,s);let _=Object.keys(this._combined);for(let C=0;C<_.length;C++){let b=parseInt(_[C],10);b>=a&&delete this._combined[b]}let D=Object.keys(this._extendedAttrs);for(let C=0;C<D.length;C++){let b=parseInt(D[C],10);b>=a&&delete this._extendedAttrs[b]}}return this.length=a,4*s*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let a=new Uint32Array(this._data.length);return a.set(this._data),this._data=a,1}return 0}fill(a,i=!1){if(i)for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,a);else{this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,a)}}copyFrom(a){this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={};for(let i in a._combined)this._combined[i]=a._combined[i];this._extendedAttrs={};for(let i in a._extendedAttrs)this._extendedAttrs[i]=a._extendedAttrs[i];this.isWrapped=a.isWrapped}clone(){let a=new g(0);a._data=new Uint32Array(this._data),a.length=this.length;for(let i in this._combined)a._combined[i]=this._combined[i];for(let i in this._extendedAttrs)a._extendedAttrs[i]=this._extendedAttrs[i];return a.isWrapped=this.isWrapped,a}getTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0}getNoBgTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0]||50331648&this._data[3*a+2])return a+(this._data[3*a+0]>>22);return 0}copyCellsFrom(a,i,s,_,D){let C=a._data;if(D)for(let T=_-1;T>=0;T--){for(let m=0;m<3;m++)this._data[3*(s+T)+m]=C[3*(i+T)+m];268435456&C[3*(i+T)+2]&&(this._extendedAttrs[s+T]=a._extendedAttrs[i+T])}else for(let T=0;T<_;T++){for(let m=0;m<3;m++)this._data[3*(s+T)+m]=C[3*(i+T)+m];268435456&C[3*(i+T)+2]&&(this._extendedAttrs[s+T]=a._extendedAttrs[i+T])}let b=Object.keys(a._combined);for(let T=0;T<b.length;T++){let m=parseInt(b[T],10);m>=i&&(this._combined[m-i+s]=a._combined[m])}}translateToString(a=!1,i=0,s=this.length){a&&(s=Math.min(s,this.getTrimmedLength()));let _="";for(;i<s;){let D=this._data[3*i+0],C=2097151&D;_+=2097152&D?this._combined[i]:C?(0,v.stringFromCodePoint)(C):u.WHITESPACE_CELL_CHAR,i+=D>>22||1}return _}}r.BufferLine=g},4841:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getRangeLength=void 0,r.getRangeLength=function(o,c){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return c*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(p,r)=>{function o(c,f,u){if(f===c.length-1)return c[f].getTrimmedLength();let v=!c[f].hasContent(u-1)&&c[f].getWidth(u-1)===1,h=c[f+1].getWidth(0)===2;return v&&h?u-1:u}Object.defineProperty(r,"__esModule",{value:!0}),r.getWrappedLineTrimmedLength=r.reflowSmallerGetNewLineLengths=r.reflowLargerApplyNewLayout=r.reflowLargerCreateNewLayout=r.reflowLargerGetLinesToRemove=void 0,r.reflowLargerGetLinesToRemove=function(c,f,u,v,h){let g=[];for(let d=0;d<c.length-1;d++){let a=d,i=c.get(++a);if(!i.isWrapped)continue;let s=[c.get(d)];for(;a<c.length&&i.isWrapped;)s.push(i),i=c.get(++a);if(v>=d&&v<a){d+=s.length-1;continue}let _=0,D=o(s,_,f),C=1,b=0;for(;C<s.length;){let m=o(s,C,f),y=m-b,M=u-D,S=Math.min(y,M);s[_].copyCellsFrom(s[C],b,D,S,!1),D+=S,D===u&&(_++,D=0),b+=S,b===m&&(C++,b=0),D===0&&_!==0&&s[_-1].getWidth(u-1)===2&&(s[_].copyCellsFrom(s[_-1],u-1,D++,1,!1),s[_-1].setCell(u-1,h))}s[_].replaceCells(D,u,h);let T=0;for(let m=s.length-1;m>0&&(m>_||s[m].getTrimmedLength()===0);m--)T++;T>0&&(g.push(d+s.length-T),g.push(T)),d+=s.length-1}return g},r.reflowLargerCreateNewLayout=function(c,f){let u=[],v=0,h=f[v],g=0;for(let d=0;d<c.length;d++)if(h===d){let a=f[++v];c.onDeleteEmitter.fire({index:d-g,amount:a}),d+=a-1,g+=a,h=f[++v]}else u.push(d);return{layout:u,countRemoved:g}},r.reflowLargerApplyNewLayout=function(c,f){let u=[];for(let v=0;v<f.length;v++)u.push(c.get(f[v]));for(let v=0;v<u.length;v++)c.set(v,u[v]);c.length=f.length},r.reflowSmallerGetNewLineLengths=function(c,f,u){let v=[],h=c.map((i,s)=>o(c,s,f)).reduce((i,s)=>i+s),g=0,d=0,a=0;for(;a<h;){if(h-a<u){v.push(h-a);break}g+=u;let i=o(c,d,f);g>i&&(g-=i,d++);let s=c[d].getWidth(g-1)===2;s&&g--;let _=s?u-1:u;v.push(_),a+=_}return v},r.getWrappedLineTrimmedLength=o},5295:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferSet=void 0;let c=o(8460),f=o(844),u=o(9092);class v extends f.Disposable{constructor(g,d){super(),this._optionsService=g,this._bufferService=d,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(g){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(g),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(g,d){this._normal.resize(g,d),this._alt.resize(g,d),this.setupTabStops(g)}setupTabStops(g){this._normal.setupTabStops(g),this._alt.setupTabStops(g)}}r.BufferSet=v},511:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;let c=o(482),f=o(643),u=o(3734);class v extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(g){let d=new v;return d.setFromCharData(g),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(g){this.fg=g[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(g[f.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(g[f.CHAR_DATA_CHAR_INDEX].length===2){let a=g[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){let i=g[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=i&&i<=57343?this.content=1024*(a-55296)+i-56320+65536|g[f.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=g[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[f.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=g[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=v},643:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},4863:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Marker=void 0;let c=o(8460),f=o(844);class u{get id(){return this._id}constructor(h){this.line=h,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(h){return this._disposables.push(h),h}}r.Marker=u,u._nextId=1},7116:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CHARSET=r.CHARSETS=void 0,r.CHARSETS={},r.DEFAULT_CHARSET=r.CHARSETS.B,r.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},r.CHARSETS.A={"#":"\xA3"},r.CHARSETS.B=void 0,r.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},r.CHARSETS.C=r.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},r.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},r.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},r.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},r.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},r.CHARSETS.E=r.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},r.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},r.CHARSETS.H=r.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},r.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(p,r)=>{var o,c,f;Object.defineProperty(r,"__esModule",{value:!0}),r.C1_ESCAPED=r.C1=r.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F"}(o||(r.C0=o={})),function(u){u.PAD="\x80",u.HOP="\x81",u.BPH="\x82",u.NBH="\x83",u.IND="\x84",u.NEL="\x85",u.SSA="\x86",u.ESA="\x87",u.HTS="\x88",u.HTJ="\x89",u.VTS="\x8A",u.PLD="\x8B",u.PLU="\x8C",u.RI="\x8D",u.SS2="\x8E",u.SS3="\x8F",u.DCS="\x90",u.PU1="\x91",u.PU2="\x92",u.STS="\x93",u.CCH="\x94",u.MW="\x95",u.SPA="\x96",u.EPA="\x97",u.SOS="\x98",u.SGCI="\x99",u.SCI="\x9A",u.CSI="\x9B",u.ST="\x9C",u.OSC="\x9D",u.PM="\x9E",u.APC="\x9F"}(c||(r.C1=c={})),function(u){u.ST=`${o.ESC}\\`}(f||(r.C1_ESCAPED=f={}))},7399:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;let c=o(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(u,v,h,g){let d={type:0,cancel:!1,key:void 0},a=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?d.key=v?c.C0.ESC+"OA":c.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?d.key=v?c.C0.ESC+"OD":c.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?d.key=v?c.C0.ESC+"OC":c.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(d.key=v?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(u.altKey){d.key=c.C0.ESC+c.C0.DEL;break}d.key=c.C0.DEL;break;case 9:if(u.shiftKey){d.key=c.C0.ESC+"[Z";break}d.key=c.C0.HT,d.cancel=!0;break;case 13:d.key=u.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,d.cancel=!0;break;case 27:d.key=c.C0.ESC,u.altKey&&(d.key=c.C0.ESC+c.C0.ESC),d.cancel=!0;break;case 37:if(u.metaKey)break;a?(d.key=c.C0.ESC+"[1;"+(a+1)+"D",d.key===c.C0.ESC+"[1;3D"&&(d.key=c.C0.ESC+(h?"b":"[1;5D"))):d.key=v?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(u.metaKey)break;a?(d.key=c.C0.ESC+"[1;"+(a+1)+"C",d.key===c.C0.ESC+"[1;3C"&&(d.key=c.C0.ESC+(h?"f":"[1;5C"))):d.key=v?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(u.metaKey)break;a?(d.key=c.C0.ESC+"[1;"+(a+1)+"A",h||d.key!==c.C0.ESC+"[1;3A"||(d.key=c.C0.ESC+"[1;5A")):d.key=v?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(u.metaKey)break;a?(d.key=c.C0.ESC+"[1;"+(a+1)+"B",h||d.key!==c.C0.ESC+"[1;3B"||(d.key=c.C0.ESC+"[1;5B")):d.key=v?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(d.key=c.C0.ESC+"[2~");break;case 46:d.key=a?c.C0.ESC+"[3;"+(a+1)+"~":c.C0.ESC+"[3~";break;case 36:d.key=a?c.C0.ESC+"[1;"+(a+1)+"H":v?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:d.key=a?c.C0.ESC+"[1;"+(a+1)+"F":v?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:u.shiftKey?d.type=2:u.ctrlKey?d.key=c.C0.ESC+"[5;"+(a+1)+"~":d.key=c.C0.ESC+"[5~";break;case 34:u.shiftKey?d.type=3:u.ctrlKey?d.key=c.C0.ESC+"[6;"+(a+1)+"~":d.key=c.C0.ESC+"[6~";break;case 112:d.key=a?c.C0.ESC+"[1;"+(a+1)+"P":c.C0.ESC+"OP";break;case 113:d.key=a?c.C0.ESC+"[1;"+(a+1)+"Q":c.C0.ESC+"OQ";break;case 114:d.key=a?c.C0.ESC+"[1;"+(a+1)+"R":c.C0.ESC+"OR";break;case 115:d.key=a?c.C0.ESC+"[1;"+(a+1)+"S":c.C0.ESC+"OS";break;case 116:d.key=a?c.C0.ESC+"[15;"+(a+1)+"~":c.C0.ESC+"[15~";break;case 117:d.key=a?c.C0.ESC+"[17;"+(a+1)+"~":c.C0.ESC+"[17~";break;case 118:d.key=a?c.C0.ESC+"[18;"+(a+1)+"~":c.C0.ESC+"[18~";break;case 119:d.key=a?c.C0.ESC+"[19;"+(a+1)+"~":c.C0.ESC+"[19~";break;case 120:d.key=a?c.C0.ESC+"[20;"+(a+1)+"~":c.C0.ESC+"[20~";break;case 121:d.key=a?c.C0.ESC+"[21;"+(a+1)+"~":c.C0.ESC+"[21~";break;case 122:d.key=a?c.C0.ESC+"[23;"+(a+1)+"~":c.C0.ESC+"[23~";break;case 123:d.key=a?c.C0.ESC+"[24;"+(a+1)+"~":c.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(h&&!g||!u.altKey||u.metaKey)!h||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?d.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(d.key=c.C0.US),u.key==="@"&&(d.key=c.C0.NUL)):u.keyCode===65&&(d.type=1);else{let i=f[u.keyCode],s=i?.[u.shiftKey?1:0];if(s)d.key=c.C0.ESC+s;else if(u.keyCode>=65&&u.keyCode<=90){let _=u.ctrlKey?u.keyCode-64:u.keyCode+32,D=String.fromCharCode(_);u.shiftKey&&(D=D.toUpperCase()),d.key=c.C0.ESC+D}else if(u.keyCode===32)d.key=c.C0.ESC+(u.ctrlKey?c.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let _=u.code.slice(3,4);u.shiftKey||(_=_.toLowerCase()),d.key=c.C0.ESC+_,d.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?d.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?d.key=c.C0.NUL:u.keyCode>=51&&u.keyCode<=55?d.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?d.key=c.C0.DEL:u.keyCode===219?d.key=c.C0.ESC:u.keyCode===220?d.key=c.C0.FS:u.keyCode===221&&(d.key=c.C0.GS)}return d}},482:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},r.utf32ToString=function(o,c=0,f=o.length){let u="";for(let v=c;v<f;++v){let h=o[v];h>65535?(h-=65536,u+=String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):u+=String.fromCharCode(h)}return u},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,c){let f=o.length;if(!f)return 0;let u=0,v=0;if(this._interim){let h=o.charCodeAt(v++);56320<=h&&h<=57343?c[u++]=1024*(this._interim-55296)+h-56320+65536:(c[u++]=this._interim,c[u++]=h),this._interim=0}for(let h=v;h<f;++h){let g=o.charCodeAt(h);if(55296<=g&&g<=56319){if(++h>=f)return this._interim=g,u;let d=o.charCodeAt(h);56320<=d&&d<=57343?c[u++]=1024*(g-55296)+d-56320+65536:(c[u++]=g,c[u++]=d)}else g!==65279&&(c[u++]=g)}return u}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,c){let f=o.length;if(!f)return 0;let u,v,h,g,d=0,a=0,i=0;if(this.interim[0]){let D=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let b,T=0;for(;(b=63&this.interim[++T])&&T<4;)C<<=6,C|=b;let m=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=m-T;for(;i<y;){if(i>=f)return 0;if(b=o[i++],(192&b)!=128){i--,D=!0;break}this.interim[T++]=b,C<<=6,C|=63&b}D||(m===2?C<128?i--:c[d++]=C:m===3?C<2048||C>=55296&&C<=57343||C===65279||(c[d++]=C):C<65536||C>1114111||(c[d++]=C)),this.interim.fill(0)}let s=f-4,_=i;for(;_<f;){for(;!(!(_<s)||128&(u=o[_])||128&(v=o[_+1])||128&(h=o[_+2])||128&(g=o[_+3]));)c[d++]=u,c[d++]=v,c[d++]=h,c[d++]=g,_+=4;if(u=o[_++],u<128)c[d++]=u;else if((224&u)==192){if(_>=f)return this.interim[0]=u,d;if(v=o[_++],(192&v)!=128){_--;continue}if(a=(31&u)<<6|63&v,a<128){_--;continue}c[d++]=a}else if((240&u)==224){if(_>=f)return this.interim[0]=u,d;if(v=o[_++],(192&v)!=128){_--;continue}if(_>=f)return this.interim[0]=u,this.interim[1]=v,d;if(h=o[_++],(192&h)!=128){_--;continue}if(a=(15&u)<<12|(63&v)<<6|63&h,a<2048||a>=55296&&a<=57343||a===65279)continue;c[d++]=a}else if((248&u)==240){if(_>=f)return this.interim[0]=u,d;if(v=o[_++],(192&v)!=128){_--;continue}if(_>=f)return this.interim[0]=u,this.interim[1]=v,d;if(h=o[_++],(192&h)!=128){_--;continue}if(_>=f)return this.interim[0]=u,this.interim[1]=v,this.interim[2]=h,d;if(g=o[_++],(192&g)!=128){_--;continue}if(a=(7&u)<<18|(63&v)<<12|(63&h)<<6|63&g,a<65536||a>1114111)continue;c[d++]=a}}return d}}},225:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeV6=void 0;let o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],f;r.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let u=0;u<o.length;++u)f.fill(0,o[u][0],o[u][1]+1)}}wcwidth(u){return u<32?0:u<127?1:u<65536?f[u]:function(v,h){let g,d=0,a=h.length-1;if(v<h[0][0]||v>h[a][1])return!1;for(;a>=d;)if(g=d+a>>1,v>h[g][1])d=g+1;else{if(!(v<h[g][0]))return!0;a=g-1}return!1}(u,c)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1}}},5981:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WriteBuffer=void 0;let c=o(8460),f=o(844);class u extends f.Disposable{constructor(h){super(),this._action=h,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(h,g){if(g!==void 0&&this._syncCalls>g)return void(this._syncCalls=0);if(this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);let a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(h,g){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(g),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(g)}_innerWrite(h=0,g=!0){let d=h||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let a=this._writeBuffer[this._bufferOffset],i=this._action(a,g);if(i){let _=D=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,D)):this._innerWrite(d,D);return void i.catch(D=>(queueMicrotask(()=>{throw D}),Promise.resolve(!1))).then(_)}let s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}r.WriteBuffer=u},5941:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.toRgbString=r.parseColor=void 0;let o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function f(u,v){let h=u.toString(16),g=h.length<2?"0"+h:h;switch(v){case 4:return h[0];case 8:return g;case 12:return(g+g).slice(0,3);default:return g+g}}r.parseColor=function(u){if(!u)return;let v=u.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);let h=o.exec(v);if(h){let g=h[1]?15:h[4]?255:h[7]?4095:65535;return[Math.round(parseInt(h[1]||h[4]||h[7]||h[10],16)/g*255),Math.round(parseInt(h[2]||h[5]||h[8]||h[11],16)/g*255),Math.round(parseInt(h[3]||h[6]||h[9]||h[12],16)/g*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),c.exec(v)&&[3,6,9,12].includes(v.length))){let h=v.length/3,g=[0,0,0];for(let d=0;d<3;++d){let a=parseInt(v.slice(h*d,h*d+h),16);g[d]=h===1?a<<4:h===2?a:h===3?a>>4:a>>8}return g}},r.toRgbString=function(u,v=16){let[h,g,d]=u;return`rgb:${f(h,v)}/${f(g,v)}/${f(d,v)}`}},5770:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PAYLOAD_LIMIT=void 0,r.PAYLOAD_LIMIT=1e7},6351:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DcsHandler=r.DcsParser=void 0;let c=o(482),f=o(8742),u=o(5770),v=[];r.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(g,d){this._handlers[g]===void 0&&(this._handlers[g]=[]);let a=this._handlers[g];return a.push(d),{dispose:()=>{let i=a.indexOf(d);i!==-1&&a.splice(i,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}reset(){if(this._active.length)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(g,d){if(this.reset(),this._ident=g,this._active=this._handlers[g]||v,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(g,d,a){if(this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].put(g,d,a);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(g,d,a))}unhook(g,d=!0){if(this._active.length){let a=!1,i=this._active.length-1,s=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,a=d,s=this._stack.fallThrough,this._stack.paused=!1),!s&&a===!1){for(;i>=0&&(a=this._active[i].unhook(g),a!==!0);i--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,a;i--}for(;i>=0;i--)if(a=this._active[i].unhook(!1),a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",g);this._active=v,this._ident=0}};let h=new f.Params;h.addParam(0),r.DcsHandler=class{constructor(g){this._handler=g,this._data="",this._params=h,this._hitLimit=!1}hook(g){this._params=g.length>1||g.params[0]?g.clone():h,this._data="",this._hitLimit=!1}put(g,d,a){this._hitLimit||(this._data+=(0,c.utf32ToString)(g,d,a),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(g){let d=!1;if(this._hitLimit)d=!1;else if(g&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(a=>(this._params=h,this._data="",this._hitLimit=!1,a));return this._params=h,this._data="",this._hitLimit=!1,d}}},2015:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;let c=o(844),f=o(8742),u=o(6242),v=o(6351);class h{constructor(i){this.table=new Uint8Array(i)}setDefault(i,s){this.table.fill(i<<4|s)}add(i,s,_,D){this.table[s<<8|i]=_<<4|D}addMany(i,s,_,D){for(let C=0;C<i.length;C++)this.table[s<<8|i[C]]=_<<4|D}}r.TransitionTable=h;let g=160;r.VT500_TRANSITION_TABLE=function(){let a=new h(4095),i=Array.apply(null,Array(256)).map((T,m)=>m),s=(T,m)=>i.slice(T,m),_=s(32,127),D=s(0,24);D.push(25),D.push.apply(D,s(28,32));let C=s(0,14),b;for(b in a.setDefault(1,0),a.addMany(_,0,2,0),C)a.addMany([24,26,153,154],b,3,0),a.addMany(s(128,144),b,3,0),a.addMany(s(144,152),b,3,0),a.add(156,b,0,0),a.add(27,b,11,1),a.add(157,b,4,8),a.addMany([152,158,159],b,0,7),a.add(155,b,11,3),a.add(144,b,11,9);return a.addMany(D,0,3,0),a.addMany(D,1,3,1),a.add(127,1,0,1),a.addMany(D,8,0,8),a.addMany(D,3,3,3),a.add(127,3,0,3),a.addMany(D,4,3,4),a.add(127,4,0,4),a.addMany(D,6,3,6),a.addMany(D,5,3,5),a.add(127,5,0,5),a.addMany(D,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(_,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(s(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(_,7,0,7),a.addMany(D,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(s(64,127),3,7,0),a.addMany(s(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(s(48,60),4,8,4),a.addMany(s(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(s(32,64),6,0,6),a.add(127,6,0,6),a.addMany(s(64,127),6,0,0),a.addMany(s(32,48),3,9,5),a.addMany(s(32,48),5,9,5),a.addMany(s(48,64),5,0,6),a.addMany(s(64,127),5,7,0),a.addMany(s(32,48),4,9,5),a.addMany(s(32,48),1,9,2),a.addMany(s(32,48),2,9,2),a.addMany(s(48,127),2,10,0),a.addMany(s(48,80),1,10,0),a.addMany(s(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(s(96,127),1,10,0),a.add(80,1,11,9),a.addMany(D,9,0,9),a.add(127,9,0,9),a.addMany(s(28,32),9,0,9),a.addMany(s(32,48),9,9,12),a.addMany(s(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(D,11,0,11),a.addMany(s(32,128),11,0,11),a.addMany(s(28,32),11,0,11),a.addMany(D,10,0,10),a.add(127,10,0,10),a.addMany(s(28,32),10,0,10),a.addMany(s(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(s(32,48),10,9,12),a.addMany(D,12,0,12),a.add(127,12,0,12),a.addMany(s(28,32),12,0,12),a.addMany(s(32,48),12,9,12),a.addMany(s(48,64),12,0,11),a.addMany(s(64,127),12,12,13),a.addMany(s(64,127),10,12,13),a.addMany(s(64,127),9,12,13),a.addMany(D,13,13,13),a.addMany(_,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(g,0,2,0),a.add(g,8,5,8),a.add(g,6,0,6),a.add(g,11,0,11),a.add(g,13,13,13),a}();class d extends c.Disposable{constructor(i=r.VT500_TRANSITION_TABLE){super(),this._transitions=i,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(s,_,D)=>{},this._executeHandlerFb=s=>{},this._csiHandlerFb=(s,_)=>{},this._escHandlerFb=s=>{},this._errorHandlerFb=s=>s,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(i,s=[64,126]){let _=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if(_=i.prefix.charCodeAt(0),_&&60>_||_>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<i.intermediates.length;++C){let b=i.intermediates.charCodeAt(C);if(32>b||b>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");_<<=8,_|=b}}if(i.final.length!==1)throw new Error("final must be a single byte");let D=i.final.charCodeAt(0);if(s[0]>D||D>s[1])throw new Error(`final must be in range ${s[0]} .. ${s[1]}`);return _<<=8,_|=D,_}identToString(i){let s=[];for(;i;)s.push(String.fromCharCode(255&i)),i>>=8;return s.reverse().join("")}setPrintHandler(i){this._printHandler=i}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(i,s){let _=this._identifier(i,[48,126]);this._escHandlers[_]===void 0&&(this._escHandlers[_]=[]);let D=this._escHandlers[_];return D.push(s),{dispose:()=>{let C=D.indexOf(s);C!==-1&&D.splice(C,1)}}}clearEscHandler(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]}setEscHandlerFallback(i){this._escHandlerFb=i}setExecuteHandler(i,s){this._executeHandlers[i.charCodeAt(0)]=s}clearExecuteHandler(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]}setExecuteHandlerFallback(i){this._executeHandlerFb=i}registerCsiHandler(i,s){let _=this._identifier(i);this._csiHandlers[_]===void 0&&(this._csiHandlers[_]=[]);let D=this._csiHandlers[_];return D.push(s),{dispose:()=>{let C=D.indexOf(s);C!==-1&&D.splice(C,1)}}}clearCsiHandler(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]}setCsiHandlerFallback(i){this._csiHandlerFb=i}registerDcsHandler(i,s){return this._dcsParser.registerHandler(this._identifier(i),s)}clearDcsHandler(i){this._dcsParser.clearHandler(this._identifier(i))}setDcsHandlerFallback(i){this._dcsParser.setHandlerFallback(i)}registerOscHandler(i,s){return this._oscParser.registerHandler(i,s)}clearOscHandler(i){this._oscParser.clearHandler(i)}setOscHandlerFallback(i){this._oscParser.setHandlerFallback(i)}setErrorHandler(i){this._errorHandler=i}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(i,s,_,D,C){this._parseStack.state=i,this._parseStack.handlers=s,this._parseStack.handlerPos=_,this._parseStack.transition=D,this._parseStack.chunkPos=C}parse(i,s,_){let D,C=0,b=0,T=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,T=this._parseStack.chunkPos+1;else{if(_===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let m=this._parseStack.handlers,y=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(_===!1&&y>-1){for(;y>=0&&(D=m[y](this._params),D!==!0);y--)if(D instanceof Promise)return this._parseStack.handlerPos=y,D}this._parseStack.handlers=[];break;case 4:if(_===!1&&y>-1){for(;y>=0&&(D=m[y](),D!==!0);y--)if(D instanceof Promise)return this._parseStack.handlerPos=y,D}this._parseStack.handlers=[];break;case 6:if(C=i[this._parseStack.chunkPos],D=this._dcsParser.unhook(C!==24&&C!==26,_),D)return D;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=i[this._parseStack.chunkPos],D=this._oscParser.end(C!==24&&C!==26,_),D)return D;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,T=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let m=T;m<s;++m){switch(C=i[m],b=this._transitions.table[this.currentState<<8|(C<160?C:g)],b>>4){case 2:for(let L=m+1;;++L){if(L>=s||(C=i[L])<32||C>126&&C<g){this._printHandler(i,m,L),m=L-1;break}if(++L>=s||(C=i[L])<32||C>126&&C<g){this._printHandler(i,m,L),m=L-1;break}if(++L>=s||(C=i[L])<32||C>126&&C<g){this._printHandler(i,m,L),m=L-1;break}if(++L>=s||(C=i[L])<32||C>126&&C<g){this._printHandler(i,m,L),m=L-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:m,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let y=this._csiHandlers[this._collect<<8|C],M=y?y.length-1:-1;for(;M>=0&&(D=y[M](this._params),D!==!0);M--)if(D instanceof Promise)return this._preserveStack(3,y,M,b,m),D;M<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++m<s&&(C=i[m])>47&&C<60);m--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let S=this._escHandlers[this._collect<<8|C],w=S?S.length-1:-1;for(;w>=0&&(D=S[w](),D!==!0);w--)if(D instanceof Promise)return this._preserveStack(4,S,w,b,m),D;w<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let L=m+1;;++L)if(L>=s||(C=i[L])===24||C===26||C===27||C>127&&C<g){this._dcsParser.put(i,m,L),m=L-1;break}break;case 14:if(D=this._dcsParser.unhook(C!==24&&C!==26),D)return this._preserveStack(6,[],0,b,m),D;C===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let L=m+1;;L++)if(L>=s||(C=i[L])<32||C>127&&C<g){this._oscParser.put(i,m,L),m=L-1;break}break;case 6:if(D=this._oscParser.end(C!==24&&C!==26),D)return this._preserveStack(5,[],0,b,m),D;C===27&&(b|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&b}}}r.EscapeSequenceParser=d},6242:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OscHandler=r.OscParser=void 0;let c=o(5770),f=o(482),u=[];r.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,h){this._handlers[v]===void 0&&(this._handlers[v]=[]);let g=this._handlers[v];return g.push(h),{dispose:()=>{let d=g.indexOf(h);d!==-1&&g.splice(d,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,h,g){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(v,h,g);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(v,h,g))}start(){this.reset(),this._state=1}put(v,h,g){if(this._state!==3){if(this._state===1)for(;h<g;){let d=v[h++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&g-h>0&&this._put(v,h,g)}}end(v,h=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let g=!1,d=this._active.length-1,a=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,g=h,a=this._stack.fallThrough,this._stack.paused=!1),!a&&g===!1){for(;d>=0&&(g=this._active[d].end(v),g!==!0);d--)if(g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,g;d--}for(;d>=0;d--)if(g=this._active[d].end(!1),g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,g}else this._handlerFb(this._id,"END",v);this._active=u,this._id=-1,this._state=0}}},r.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,h,g){this._hitLimit||(this._data+=(0,f.utf32ToString)(v,h,g),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let h=!1;if(this._hitLimit)h=!1;else if(v&&(h=this._handler(this._data),h instanceof Promise))return h.then(g=>(this._data="",this._hitLimit=!1,g));return this._data="",this._hitLimit=!1,h}}},8742:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Params=void 0;let o=2147483647;class c{static fromArray(u){let v=new c;if(!u.length)return v;for(let h=Array.isArray(u[0])?1:0;h<u.length;++h){let g=u[h];if(Array.isArray(g))for(let d=0;d<g.length;++d)v.addSubParam(g[d]);else v.addParam(g)}return v}constructor(u=32,v=32){if(this.maxLength=u,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let u=new c(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){let u=[];for(let v=0;v<this.length;++v){u.push(this.params[v]);let h=this._subParamsIdx[v]>>8,g=255&this._subParamsIdx[v];g-h>0&&u.push(Array.prototype.slice.call(this._subParams,h,g))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>o?o:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>o?o:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){let v=this._subParamsIdx[u]>>8,h=255&this._subParamsIdx[u];return h-v>0?this._subParams.subarray(v,h):null}getSubParamsAll(){let u={};for(let v=0;v<this.length;++v){let h=this._subParamsIdx[v]>>8,g=255&this._subParamsIdx[v];g-h>0&&(u[v]=this._subParams.slice(h,g))}return u}addDigit(u){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let h=this._digitIsSub?this._subParams:this.params,g=h[v-1];h[v-1]=~g?Math.min(10*g+u,o):u}}r.Params=c},5741:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AddonManager=void 0,r.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,c){let f={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(f),c.dispose=()=>this._wrappedAddonDispose(f),c.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let c=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===o){c=f;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(c,1)}}},8771:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferApiView=void 0;let c=o(3785),f=o(511);r.BufferApiView=class{constructor(u,v){this._buffer=u,this.type=v}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){let v=this._buffer.lines.get(u);if(v)return new c.BufferLineApiView(v)}getNullCell(){return new f.CellData}}},3785:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLineApiView=void 0;let c=o(511);r.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,u){if(!(f<0||f>=this._line.length))return u?(this._line.loadCell(f,u),u):this._line.loadCell(f,new c.CellData)}translateToString(f,u,v){return this._line.translateToString(f,u,v)}}},8285:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferNamespaceApi=void 0;let c=o(8771),f=o(8460),u=o(844);class v extends u.Disposable{constructor(g){super(),this._core=g,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}r.BufferNamespaceApi=v},7975:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ParserApi=void 0,r.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,c){return this._core.registerCsiHandler(o,f=>c(f.toArray()))}addCsiHandler(o,c){return this.registerCsiHandler(o,c)}registerDcsHandler(o,c){return this._core.registerDcsHandler(o,(f,u)=>c(f,u.toArray()))}addDcsHandler(o,c){return this.registerDcsHandler(o,c)}registerEscHandler(o,c){return this._core.registerEscHandler(o,c)}addEscHandler(o,c){return this.registerEscHandler(o,c)}registerOscHandler(o,c){return this._core.registerOscHandler(o,c)}addOscHandler(o,c){return this.registerOscHandler(o,c)}}},7090:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeApi=void 0,r.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(p,r,o){var c=this&&this.__decorate||function(a,i,s,_){var D,C=arguments.length,b=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,s):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,_);else for(var T=a.length-1;T>=0;T--)(D=a[T])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},f=this&&this.__param||function(a,i){return function(s,_){i(s,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferService=r.MINIMUM_ROWS=r.MINIMUM_COLS=void 0;let u=o(8460),v=o(844),h=o(5295),g=o(2585);r.MINIMUM_COLS=2,r.MINIMUM_ROWS=1;let d=r.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(a){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(a.rawOptions.cols||0,r.MINIMUM_COLS),this.rows=Math.max(a.rawOptions.rows||0,r.MINIMUM_ROWS),this.buffers=this.register(new h.BufferSet(a,this))}resize(a,i){this.cols=a,this.rows=i,this.buffers.resize(a,i),this._onResize.fire({cols:a,rows:i})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(a,i=!1){let s=this.buffer,_;_=this._cachedBlankLine,_&&_.length===this.cols&&_.getFg(0)===a.fg&&_.getBg(0)===a.bg||(_=s.getBlankLine(a,i),this._cachedBlankLine=_),_.isWrapped=i;let D=s.ybase+s.scrollTop,C=s.ybase+s.scrollBottom;if(s.scrollTop===0){let b=s.lines.isFull;C===s.lines.length-1?b?s.lines.recycle().copyFrom(_):s.lines.push(_.clone()):s.lines.splice(C+1,0,_.clone()),b?this.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this.isUserScrolling||s.ydisp++)}else{let b=C-D+1;s.lines.shiftElements(D+1,b-1,-1),s.lines.set(C,_.clone())}this.isUserScrolling||(s.ydisp=s.ybase),this._onScroll.fire(s.ydisp)}scrollLines(a,i,s){let _=this.buffer;if(a<0){if(_.ydisp===0)return;this.isUserScrolling=!0}else a+_.ydisp>=_.ybase&&(this.isUserScrolling=!1);let D=_.ydisp;_.ydisp=Math.max(Math.min(_.ydisp+a,_.ybase),0),D!==_.ydisp&&(i||this._onScroll.fire(_.ydisp))}};r.BufferService=d=c([f(0,g.IOptionsService)],d)},7994:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharsetService=void 0,r.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,c){this._charsets[o]=c,this.glevel===o&&(this.charset=c)}}},1753:function(p,r,o){var c=this&&this.__decorate||function(_,D,C,b){var T,m=arguments.length,y=m<3?D:b===null?b=Object.getOwnPropertyDescriptor(D,C):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(_,D,C,b);else for(var M=_.length-1;M>=0;M--)(T=_[M])&&(y=(m<3?T(y):m>3?T(D,C,y):T(D,C))||y);return m>3&&y&&Object.defineProperty(D,C,y),y},f=this&&this.__param||function(_,D){return function(C,b){D(C,b,_)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;let u=o(2585),v=o(8460),h=o(844),g={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:_=>_.button!==4&&_.action===1&&(_.ctrl=!1,_.alt=!1,_.shift=!1,!0)},VT200:{events:19,restrict:_=>_.action!==32},DRAG:{events:23,restrict:_=>_.action!==32||_.button!==3},ANY:{events:31,restrict:_=>!0}};function d(_,D){let C=(_.ctrl?16:0)|(_.shift?4:0)|(_.alt?8:0);return _.button===4?(C|=64,C|=_.action):(C|=3&_.button,4&_.button&&(C|=64),8&_.button&&(C|=128),_.action===32?C|=32:_.action!==0||D||(C|=3)),C}let a=String.fromCharCode,i={DEFAULT:_=>{let D=[d(_,!1)+32,_.col+32,_.row+32];return D[0]>255||D[1]>255||D[2]>255?"":`\x1B[M${a(D[0])}${a(D[1])}${a(D[2])}`},SGR:_=>{let D=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${d(_,!0)};${_.col};${_.row}${D}`},SGR_PIXELS:_=>{let D=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${d(_,!0)};${_.x};${_.y}${D}`}},s=r.CoreMouseService=class extends h.Disposable{constructor(_,D){super(),this._bufferService=_,this._coreService=D,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(g))this.addProtocol(C,g[C]);for(let C of Object.keys(i))this.addEncoding(C,i[C]);this.reset()}addProtocol(_,D){this._protocols[_]=D}addEncoding(_,D){this._encodings[_]=D}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(_){if(!this._protocols[_])throw new Error(`unknown protocol "${_}"`);this._activeProtocol=_,this._onProtocolChange.fire(this._protocols[_].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(_){if(!this._encodings[_])throw new Error(`unknown encoding "${_}"`);this._activeEncoding=_}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(_){if(_.col<0||_.col>=this._bufferService.cols||_.row<0||_.row>=this._bufferService.rows||_.button===4&&_.action===32||_.button===3&&_.action!==32||_.button!==4&&(_.action===2||_.action===3)||(_.col++,_.row++,_.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,_,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(_))return!1;let D=this._encodings[this._activeEncoding](_);return D&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(D):this._coreService.triggerDataEvent(D,!0)),this._lastEvent=_,!0}explainEvents(_){return{down:!!(1&_),up:!!(2&_),drag:!!(4&_),move:!!(8&_),wheel:!!(16&_)}}_equalEvents(_,D,C){if(C){if(_.x!==D.x||_.y!==D.y)return!1}else if(_.col!==D.col||_.row!==D.row)return!1;return _.button===D.button&&_.action===D.action&&_.ctrl===D.ctrl&&_.alt===D.alt&&_.shift===D.shift}};r.CoreMouseService=s=c([f(0,u.IBufferService),f(1,u.ICoreService)],s)},6975:function(p,r,o){var c=this&&this.__decorate||function(s,_,D,C){var b,T=arguments.length,m=T<3?_:C===null?C=Object.getOwnPropertyDescriptor(_,D):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(s,_,D,C);else for(var y=s.length-1;y>=0;y--)(b=s[y])&&(m=(T<3?b(m):T>3?b(_,D,m):b(_,D))||m);return T>3&&m&&Object.defineProperty(_,D,m),m},f=this&&this.__param||function(s,_){return function(D,C){_(D,C,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreService=void 0;let u=o(1439),v=o(8460),h=o(844),g=o(2585),d=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),i=r.CoreService=class extends h.Disposable{constructor(s,_,D){super(),this._bufferService=s,this._logService=_,this._optionsService=D,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(d),this.decPrivateModes=(0,u.clone)(a)}reset(){this.modes=(0,u.clone)(d),this.decPrivateModes=(0,u.clone)(a)}triggerDataEvent(s,_=!1){if(this._optionsService.rawOptions.disableStdin)return;let D=this._bufferService.buffer;_&&this._optionsService.rawOptions.scrollOnUserInput&&D.ybase!==D.ydisp&&this._onRequestScrollToBottom.fire(),_&&this._onUserInput.fire(),this._logService.debug(`sending data "${s}"`,()=>s.split("").map(C=>C.charCodeAt(0))),this._onData.fire(s)}triggerBinaryEvent(s){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${s}"`,()=>s.split("").map(_=>_.charCodeAt(0))),this._onBinary.fire(s))}};r.CoreService=i=c([f(0,g.IBufferService),f(1,g.ILogService),f(2,g.IOptionsService)],i)},9074:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DecorationService=void 0;let c=o(8055),f=o(8460),u=o(844),v=o(6106),h=0,g=0;class d extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(s=>s?.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(s){if(s.marker.isDisposed)return;let _=new a(s);if(_){let D=_.marker.onDispose(()=>_.dispose());_.onDispose(()=>{_&&(this._decorations.delete(_)&&this._onDecorationRemoved.fire(_),D.dispose())}),this._decorations.insert(_),this._onDecorationRegistered.fire(_)}return _}reset(){for(let s of this._decorations.values())s.dispose();this._decorations.clear()}*getDecorationsAtCell(s,_,D){var C,b,T;let m=0,y=0;for(let M of this._decorations.getKeyIterator(_))m=(C=M.options.x)!==null&&C!==void 0?C:0,y=m+((b=M.options.width)!==null&&b!==void 0?b:1),s>=m&&s<y&&(!D||((T=M.options.layer)!==null&&T!==void 0?T:"bottom")===D)&&(yield M)}forEachDecorationAtCell(s,_,D,C){this._decorations.forEachByKey(_,b=>{var T,m,y;h=(T=b.options.x)!==null&&T!==void 0?T:0,g=h+((m=b.options.width)!==null&&m!==void 0?m:1),s>=h&&s<g&&(!D||((y=b.options.layer)!==null&&y!==void 0?y:"bottom")===D)&&C(b)})}}r.DecorationService=d;class a extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(s){super(),this.options=s,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=s.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InstantiationService=r.ServiceCollection=void 0;let c=o(2585),f=o(8343);class u{constructor(...h){this._entries=new Map;for(let[g,d]of h)this.set(g,d)}set(h,g){let d=this._entries.get(h);return this._entries.set(h,g),d}forEach(h){for(let[g,d]of this._entries.entries())h(g,d)}has(h){return this._entries.has(h)}get(h){return this._entries.get(h)}}r.ServiceCollection=u,r.InstantiationService=class{constructor(){this._services=new u,this._services.set(c.IInstantiationService,this)}setService(v,h){this._services.set(v,h)}getService(v){return this._services.get(v)}createInstance(v,...h){let g=(0,f.getServiceDependencies)(v).sort((i,s)=>i.index-s.index),d=[];for(let i of g){let s=this._services.get(i.id);if(!s)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${i.id}.`);d.push(s)}let a=g.length>0?g[0].index:h.length;if(h.length!==a)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${a+1} conflicts with ${h.length} static arguments`);return new v(...h,...d)}}},7866:function(p,r,o){var c=this&&this.__decorate||function(a,i,s,_){var D,C=arguments.length,b=C<3?i:_===null?_=Object.getOwnPropertyDescriptor(i,s):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,i,s,_);else for(var T=a.length-1;T>=0;T--)(D=a[T])&&(b=(C<3?D(b):C>3?D(i,s,b):D(i,s))||b);return C>3&&b&&Object.defineProperty(i,s,b),b},f=this&&this.__param||function(a,i){return function(s,_){i(s,_,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;let u=o(844),v=o(2585),h={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF},g,d=r.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),g=this}_updateLogLevel(){this._logLevel=h[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let i=0;i<a.length;i++)typeof a[i]=="function"&&(a[i]=a[i]())}_log(a,i,s){this._evalLazyOptionalParams(s),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+i,...s)}trace(a,...i){var s,_;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((_=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.trace.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,a,i)}debug(a,...i){var s,_;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((_=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.debug.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.log,a,i)}info(a,...i){var s,_;this._logLevel<=v.LogLevelEnum.INFO&&this._log((_=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.info.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.info,a,i)}warn(a,...i){var s,_;this._logLevel<=v.LogLevelEnum.WARN&&this._log((_=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.warn.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.warn,a,i)}error(a,...i){var s,_;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((_=(s=this._optionsService.options.logger)===null||s===void 0?void 0:s.error.bind(this._optionsService.options.logger))!==null&&_!==void 0?_:console.error,a,i)}};r.LogService=d=c([f(0,v.IOptionsService)],d),r.setTraceLogger=function(a){g=a},r.traceCall=function(a,i,s){if(typeof s.value!="function")throw new Error("not supported");let _=s.value;s.value=function(...D){if(g.logLevel!==v.LogLevelEnum.TRACE)return _.apply(this,D);g.trace(`GlyphRenderer#${_.name}(${D.map(b=>JSON.stringify(b)).join(", ")})`);let C=_.apply(this,D);return g.trace(`GlyphRenderer#${_.name} return`,C),C}}},7302:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsService=r.DEFAULT_OPTIONS=void 0;let c=o(8460),f=o(844),u=o(6114);r.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let v=["normal","bold","100","200","300","400","500","600","700","800","900"];class h extends f.Disposable{constructor(d){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;let a=Object.assign({},r.DEFAULT_OPTIONS);for(let i in d)if(i in a)try{let s=d[i];a[i]=this._sanitizeAndValidateOption(i,s)}catch(s){console.error(s)}this.rawOptions=a,this.options=Object.assign({},a),this._setupOptions()}onSpecificOptionChange(d,a){return this.onOptionChange(i=>{i===d&&a(this.rawOptions[d])})}onMultipleOptionChange(d,a){return this.onOptionChange(i=>{d.indexOf(i)!==-1&&a()})}_setupOptions(){let d=i=>{if(!(i in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${i}"`);return this.rawOptions[i]},a=(i,s)=>{if(!(i in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${i}"`);s=this._sanitizeAndValidateOption(i,s),this.rawOptions[i]!==s&&(this.rawOptions[i]=s,this._onOptionChange.fire(i))};for(let i in this.rawOptions){let s={get:d.bind(this,i),set:a.bind(this,i)};Object.defineProperty(this.options,i,s)}}_sanitizeAndValidateOption(d,a){switch(d){case"cursorStyle":if(a||(a=r.DEFAULT_OPTIONS[d]),!function(i){return i==="block"||i==="underline"||i==="bar"}(a))throw new Error(`"${a}" is not a valid value for ${d}`);break;case"wordSeparator":a||(a=r.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=v.includes(a)?a:r.DEFAULT_OPTIONS[d];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(`${d} cannot be less than 1, value: ${a}`);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${a}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${a}`);break;case"rows":case"cols":if(!a&&a!==0)throw new Error(`${d} must be numeric, value: ${a}`);break;case"windowsPty":a=a??{}}return a}}r.OptionsService=h},2660:function(p,r,o){var c=this&&this.__decorate||function(h,g,d,a){var i,s=arguments.length,_=s<3?g:a===null?a=Object.getOwnPropertyDescriptor(g,d):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(h,g,d,a);else for(var D=h.length-1;D>=0;D--)(i=h[D])&&(_=(s<3?i(_):s>3?i(g,d,_):i(g,d))||_);return s>3&&_&&Object.defineProperty(g,d,_),_},f=this&&this.__param||function(h,g){return function(d,a){g(d,a,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkService=void 0;let u=o(2585),v=r.OscLinkService=class{constructor(h){this._bufferService=h,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(h){let g=this._bufferService.buffer;if(h.id===void 0){let D=g.addMarker(g.ybase+g.y),C={data:h,id:this._nextId++,lines:[D]};return D.onDispose(()=>this._removeMarkerFromLink(C,D)),this._dataByLinkId.set(C.id,C),C.id}let d=h,a=this._getEntryIdKey(d),i=this._entriesWithId.get(a);if(i)return this.addLineToLink(i.id,g.ybase+g.y),i.id;let s=g.addMarker(g.ybase+g.y),_={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[s]};return s.onDispose(()=>this._removeMarkerFromLink(_,s)),this._entriesWithId.set(_.key,_),this._dataByLinkId.set(_.id,_),_.id}addLineToLink(h,g){let d=this._dataByLinkId.get(h);if(d&&d.lines.every(a=>a.line!==g)){let a=this._bufferService.buffer.addMarker(g);d.lines.push(a),a.onDispose(()=>this._removeMarkerFromLink(d,a))}}getLinkData(h){var g;return(g=this._dataByLinkId.get(h))===null||g===void 0?void 0:g.data}_getEntryIdKey(h){return`${h.id};;${h.uri}`}_removeMarkerFromLink(h,g){let d=h.lines.indexOf(g);d!==-1&&(h.lines.splice(d,1),h.lines.length===0&&(h.data.id!==void 0&&this._entriesWithId.delete(h.key),this._dataByLinkId.delete(h.id)))}};r.OscLinkService=v=c([f(0,u.IBufferService)],v)},8343:(p,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;let o="di$target",c="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(f){return f[c]||[]},r.createDecorator=function(f){if(r.serviceRegistry.has(f))return r.serviceRegistry.get(f);let u=function(v,h,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,a,i){a[o]===a?a[c].push({id:d,index:i}):(a[c]=[{id:d,index:i}],a[o]=a)})(u,v,g)};return u.toString=()=>f,r.serviceRegistry.set(f,u),u}},2585:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;let c=o(8343);var f;r.IBufferService=(0,c.createDecorator)("BufferService"),r.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),r.ICoreService=(0,c.createDecorator)("CoreService"),r.ICharsetService=(0,c.createDecorator)("CharsetService"),r.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(f||(r.LogLevelEnum=f={})),r.ILogService=(0,c.createDecorator)("LogService"),r.IOptionsService=(0,c.createDecorator)("OptionsService"),r.IOscLinkService=(0,c.createDecorator)("OscLinkService"),r.IUnicodeService=(0,c.createDecorator)("UnicodeService"),r.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(p,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeService=void 0;let c=o(8460),f=o(225);r.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;let u=new f.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(u){if(!this._providers[u])throw new Error(`unknown Unicode version "${u}"`);this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)}register(u){this._providers[u.version]=u}wcwidth(u){return this._activeProvider.wcwidth(u)}getStringCellWidth(u){let v=0,h=u.length;for(let g=0;g<h;++g){let d=u.charCodeAt(g);if(55296<=d&&d<=56319){if(++g>=h)return v+this.wcwidth(d);let a=u.charCodeAt(g);56320<=a&&a<=57343?d=1024*(d-55296)+a-56320+65536:v+=this.wcwidth(a)}v+=this.wcwidth(d)}return v}}}},t={};function n(p){var r=t[p];if(r!==void 0)return r.exports;var o=t[p]={exports:{}};return e[p].call(o.exports,o,o.exports,n),o.exports}var l={};return(()=>{var p=l;Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;let r=n(9042),o=n(3236),c=n(844),f=n(5741),u=n(8285),v=n(7975),h=n(7090),g=["cols","rows"];class d extends c.Disposable{constructor(i){super(),this._core=this.register(new o.Terminal(i)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);let s=D=>this._core.options[D],_=(D,C)=>{this._checkReadonlyOptions(D),this._core.options[D]=C};for(let D in this._core.options){let C={get:s.bind(this,D),set:_.bind(this,D)};Object.defineProperty(this._publicOptions,D,C)}}_checkReadonlyOptions(i){if(g.includes(i))throw new Error(`Option "${i}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new h.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let i=this._core.coreService.decPrivateModes,s="none";switch(this._core.coreMouseService.activeProtocol){case"X10":s="x10";break;case"VT200":s="vt200";break;case"DRAG":s="drag";break;case"ANY":s="any"}return{applicationCursorKeysMode:i.applicationCursorKeys,applicationKeypadMode:i.applicationKeypad,bracketedPasteMode:i.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:s,originMode:i.origin,reverseWraparoundMode:i.reverseWraparound,sendFocusMode:i.sendFocus,wraparoundMode:i.wraparound}}get options(){return this._publicOptions}set options(i){for(let s in i)this._publicOptions[s]=i[s]}blur(){this._core.blur()}focus(){this._core.focus()}resize(i,s){this._verifyIntegers(i,s),this._core.resize(i,s)}open(i){this._core.open(i)}attachCustomKeyEventHandler(i){this._core.attachCustomKeyEventHandler(i)}registerLinkProvider(i){return this._core.registerLinkProvider(i)}registerCharacterJoiner(i){return this._checkProposedApi(),this._core.registerCharacterJoiner(i)}deregisterCharacterJoiner(i){this._checkProposedApi(),this._core.deregisterCharacterJoiner(i)}registerMarker(i=0){return this._verifyIntegers(i),this._core.registerMarker(i)}registerDecoration(i){var s,_,D;return this._checkProposedApi(),this._verifyPositiveIntegers((s=i.x)!==null&&s!==void 0?s:0,(_=i.width)!==null&&_!==void 0?_:0,(D=i.height)!==null&&D!==void 0?D:0),this._core.registerDecoration(i)}hasSelection(){return this._core.hasSelection()}select(i,s,_){this._verifyIntegers(i,s,_),this._core.select(i,s,_)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(i,s){this._verifyIntegers(i,s),this._core.selectLines(i,s)}dispose(){super.dispose()}scrollLines(i){this._verifyIntegers(i),this._core.scrollLines(i)}scrollPages(i){this._verifyIntegers(i),this._core.scrollPages(i)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(i){this._verifyIntegers(i),this._core.scrollToLine(i)}clear(){this._core.clear()}write(i,s){this._core.write(i,s)}writeln(i,s){this._core.write(i),this._core.write(`\r
`,s)}paste(i){this._core.paste(i)}refresh(i,s){this._verifyIntegers(i,s),this._core.refresh(i,s)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(i){this._addonManager.loadAddon(this,i)}static get strings(){return r}_verifyIntegers(...i){for(let s of i)if(s===1/0||isNaN(s)||s%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...i){for(let s of i)if(s&&(s===1/0||isNaN(s)||s%1!=0||s<0))throw new Error("This API only accepts positive integers")}}p.Terminal=d})(),l})())});var df={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var pe=function(e){return e.identity},ve={identity:function(e){return e},Semigroupoid0:function(){return df}};var eD={fromString:pe(ve)},st=function(e){return e.fromString};var tD=function(e){return function(t){for(var n=t.length,l=new Array(n),p=0;p<n;p++)l[p]=e(t[p]);return l}};var nr=!0;var qe=function(e){return function(t){return function(n){return e(n)(t)}}},ge=function(e){return function(t){return e}};var rD=function(e){return function(t){return t(e)}};var Ht=function(){function e(){}return e.value=new e,e}();var $=function(e){return e.map};var ft=function(e){return $(e)(ge(void 0))},lu=function(e){var t=$(e);return function(n){return function(l){return t(ge(l))(n)}}};var pt={map:tD};var nD=function(e){return function(t){return e+t}},aD=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var Jr=function(e){return e.reflectSymbol};var mf={append:nD};var It={append:aD};var se=function(e){return e.append};var dp={alt:se(It),Functor0:function(){return pt}},or=function(e){return e.alt};var iD=function(e){return function(t){for(var n=e.length,l=t.length,p=new Array(n*l),r=0,o=0;o<n;o++)for(var c=e[o],f=0;f<l;f++)p[r++]=c(t[f]);return p}};var UM=pe(ve);var vi={apply:iD,Functor0:function(){return pt}},Ye=function(e){return e.apply};var Bn=function(e){var t=Ye(e),n=$(e.Functor0());return function(l){return function(p){return t(n(ge(UM))(l))(p)}}};var z=function(e){return e.pure},Dc=function(e){var t=z(e);return function(n){return function(l){if(!n)return l;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,l.constructor.name])}}},_r=function(e){var t=z(e);return function(n){return function(l){if(n)return l;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,l.constructor.name])}}},Cc=function(e){var t=Ye(e.Apply0()),n=z(e);return function(l){return function(p){return t(n(l))(p)}}};var pu={pure:function(e){return[e]},Apply0:function(){return vi}};var cD=function(e){return function(t){for(var n=[],l=0,p=e.length;l<p;l++)Array.prototype.push.apply(n,t(e[l]));return n}};var GM=pe(ve),vt=function(e){return e.discard};var Co={bind:cD,Apply0:function(){return vi}},Y=function(e){return e.bind},Vt=function(e){return qe(Y(e))},hf=function(e){var t=Vt(e);return function(n){return function(l){return function(p){return t(n)(l(p))}}}};var mt={discard:function(e){return Y(e)}};var du=function(e){var t=Y(e);return function(n){return t(n)(GM)}};var jM=function(e,t){if(e<1)return[];var n=new Array(e);return n.fill(t)},QM=function(e,t){for(var n=[],l=0,p=0;p<e;p++)n[l++]=t;return n},JM=typeof Array.prototype.fill=="function"?jM:QM,sD=function(){function e(p,r){this.head=p,this.tail=r}var t={};function n(p){return function(r){return new e(p,r)}}function l(p){for(var r=[],o=0,c=p;c!==t;)r[o++]=c.head,c=c.tail;return r}return function(p,r){return l(p(n)(t)(r))}}(),Hr=function(e){return e.length},fD=function(e,t,n){return n.length===0?e({}):t(n[0])(n.slice(1))},lD=function(e,t,n,l){return l<0||l>=n.length?t:e(n[l])};var _D=function(e,t,n,l){for(var p=0,r=l.length;p<r;p++)if(n(l[p]))return e(p);return t},pD=function(e,t,n,l){for(var p=l.length-1;p>=0;p--)if(n(l[p]))return e(p);return t},dD=function(e,t,n,l,p){if(n<0||n>p.length)return t;var r=p.slice();return r.splice(n,0,l),e(r)},vD=function(e,t,n,l){if(n<0||n>=l.length)return t;var p=l.slice();return p.splice(n,1),e(p)};var vu=function(e){return e.slice().reverse()};var mD=function(){function e(t,n,l,p,r,o){var c,f,u,v,h,g,d;for(c=r+(o-r>>1),c-r>1&&e(t,n,p,l,r,c),o-c>1&&e(t,n,p,l,c,o),f=r,u=c,v=r;f<c&&u<o;)h=p[f],g=p[u],d=n(t(h)(g)),d>0?(l[v++]=g,++u):(l[v++]=h,++f);for(;f<c;)l[v++]=p[f++];for(;u<o;)l[v++]=p[u++]}return function(t,n,l){var p;return l.length<2?l:(p=l.slice(0),e(t,n,p,l.slice(0),0,l.length),p)}}(),hD=function(e,t,n){return n.slice(e,t)};var gD=function(e){var t=Y(e.Bind1()),n=Dc(e.Applicative0());return function(l){return function(p){return t(l)(function(r){return n(r)(p)})}}};var mp=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(l){return function(p){return t(p)(function(r){return n(l(r))})}}},Or=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(l){return function(p){return t(l)(function(r){return t(p)(function(o){return n(r(o))})})}}};var XM=Number.POSITIVE_INFINITY,YM=Number.NEGATIVE_INFINITY;var gf=function(e){return function(t){return function(n){return function(l){return function(p){return l<p?e:l===p?t:n}}}}},DD=gf,CD=gf,yD=gf,bD=gf;var SD=function(e){return function(t){return function(n){for(var l=0,p=t.length,r=n.length;l<p&&l<r;){var o=t[l],c=n[l],f=e(o)(c);if(f!==0)return f;l++}return p===r?0:p>r?-1:1}}};var Df=function(e){return function(t){return e===t}},wD=Df,TD=Df,ED=Df;var MD=Df,FD=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l])(n[l]))return!1;return!0}}};var hp={eq:function(e){return function(t){return!0}}},cn={eq:MD};var yc={eq:ED},qa={eq:TD};var Cf={eq:wD};var Ce=function(e){return e.eq},rF=Ce(Cf),Ua=function(e){return{eq:FD(Ce(e))}};var bc=function(e){var t=Ce(e);return function(n){return function(l){return rF(t(n)(l))(!1)}}};var te=function(){function e(){}return e.value=new e,e}(),Z=function(){function e(){}return e.value=new e,e}(),Ee=function(){function e(){}return e.value=new e,e}();var mi={eq:function(e){return function(t){return e instanceof te&&t instanceof te||e instanceof Z&&t instanceof Z||e instanceof Ee&&t instanceof Ee}}};var LD=function(e){return function(t){return e-t|0}};var AD=function(e){return function(t){return e+t|0}},xD=function(e){return function(t){return e*t|0}},ID=function(e){return function(t){return e+t}},RD=function(e){return function(t){return e*t}};var Cn=function(e){return e.zero};var gp={add:ID,zero:0,mul:RD,one:1},mu={add:AD,zero:0,mul:xD,one:1};var Kn=function(e){return e.one};var yn=function(e){return e.add};var yf=function(e){return e.sub};var Sc={sub:LD,Semiring0:function(){return mu}};var Dp=function(e){var t=yf(e),n=Cn(e.Semiring0());return function(l){return t(n)(l)}};var Va={compare:function(e){return function(t){return Ee.value}},Eq0:function(){return hp}},Xt=function(){return{compare:bD(te.value)(Ee.value)(Z.value),Eq0:function(){return cn}}}();var hu=function(){return{compare:yD(te.value)(Ee.value)(Z.value),Eq0:function(){return yc}}}(),rt=function(){return{compare:CD(te.value)(Ee.value)(Z.value),Eq0:function(){return qa}}}();var wc=function(){return{compare:DD(te.value)(Ee.value)(Z.value),Eq0:function(){return Cf}}}();var de=function(e){return e.compare},oF=de(rt),bf=function(e){var t=de(e);return function(n){return function(l){return function(p){return t(n(l))(n(p))}}}};var Cp=function(e){var t=de(e);return function(n){return function(l){var p=t(n)(l);return!(p instanceof te)}}};var gu=function(e){var t=de(e);return function(n){return function(l){var p=t(n)(l);if(p instanceof te)return l;if(p instanceof Ee||p instanceof Z)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[p.constructor.name])}}},Tc=function(e){var t=de(e);return function(n){return function(l){var p=t(n)(l);if(p instanceof te||p instanceof Ee)return n;if(p instanceof Z)return l;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[p.constructor.name])}}},gi=function(e){var t=de(e),n=Ua(e.Eq0());return{compare:function(){var l=function(p){return function(r){var o=t(p)(r);if(o instanceof Ee)return 0;if(o instanceof te)return 1;if(o instanceof Z)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[o.constructor.name])}};return function(p){return function(r){return oF(0)(SD(l)(p)(r))}}}(),Eq0:function(){return n}}};var ND=function(e){var t=Tc(e),n=gu(e);return function(l){return function(p){return function(r){return t(p)(n(l)(r))}}}};var yp=function(e){var t=Cp(e);return function(n){var l=Cn(n.Semiring0()),p=Dp(n);return function(r){var o=t(r)(l);return o?r:p(r)}}};var Xn=function(e){return e.top};var Du={top:2147483647,bottom:-2147483648,Ord0:function(){return rt}};var bo=function(e){return e.bottom};var BD=function(e){return e.toString()},WD=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var bn={show:WD},za={show:BD};var Te=function(e){return e.show};var _F=pe(ve),B=function(){function e(){}return e.value=new e,e}(),O=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Tp=function(e){var t=se(e);return{append:function(n){return function(l){if(n instanceof B)return l;if(l instanceof B)return n;if(n instanceof O&&l instanceof O)return new O(t(n.value0)(l.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,l.constructor.name])}}}};var $D=function(e){var t=Tp(e);return{mempty:B.value,Semigroup0:function(){return t}}};var je=function(e){return function(t){return function(n){if(n instanceof B)return e;if(n instanceof O)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},wo=je(!0)(ge(!1)),Di=je(!1)(ge(!0));var lt={map:function(e){return function(t){return t instanceof O?new O(e(t.value0)):B.value}}},pF=$(lt);var pr=function(e){return je(e)(_F)},Yn=function(){return function(e){if(e instanceof O)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var Cu=function(e){var t=Ce(e);return{eq:function(n){return function(l){return n instanceof B&&l instanceof B?!0:n instanceof O&&l instanceof O?t(n.value0)(l.value0):!1}}}};var Mc={apply:function(e){return function(t){if(e instanceof O)return pF(e.value0)(t);if(e instanceof B)return B.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return lt}};var Yr={bind:function(e){return function(t){if(e instanceof O)return t(e.value0);if(e instanceof B)return B.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return Mc}};var tt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var kr=function(e){return function(t){return function(n){if(n instanceof tt)return e(n.value0);if(n instanceof Qe)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Sf=function(){return kr(ge(B.value))(O.create)}();var qD=kr(ge(!1))(ge(!0));var ha=function(e){return e};var Ci={map:function(e){return function(t){return e(t)}}};var wf={apply:function(e){return function(t){return e(t)}},Functor0:function(){return Ci}},Ep={bind:function(e){return function(t){return t(e)}},Apply0:function(){return wf}},Mp={pure:ha,Apply0:function(){return wf}},Ga={Applicative0:function(){return Mp},Bind1:function(){return Ep}};var UD=function(e){return Math.min(Math.abs(e),2147483647)},VD=function(e){return function(t){return t===0?0:t>0?Math.floor(e/t):-Math.floor(e/-t)}},zD=function(e){return function(t){if(t===0)return 0;var n=Math.abs(t);return(e%n+n)%n}};var GD={Ring0:function(){return Sc}};var Fc=function(e){return e.mod};var Tf={degree:UD,div:VD,mod:zD,CommutativeRing0:function(){return GD}};var To={mempty:"",Semigroup0:function(){return mf}};var yi={mempty:[],Semigroup0:function(){return It}};var Je=function(e){return e.mempty};var QD=function(e){return function(){return e}},JD=function(e){return function(t){return function(){return t(e())()}}};var KD=function(e,t,n){var l=0,p;return function(r){if(l===2)return p;if(l===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return l=1,p=n(),l=2,p}},ga={Applicative0:function(){return Rt},Bind1:function(){return Sn}},Sn={bind:JD,Apply0:function(){return YD(0)}},Rt={pure:QD,Apply0:function(){return YD(0)}},XD=KD("functorEffect","Effect",function(){return{map:Cc(Rt)}}),YD=KD("applyEffect","Effect",function(){return{apply:Or(ga),Functor0:function(){return XD(0)}}}),Ae=XD(20);var ZD=function(e){return function(){return{value:e}}};var xe=function(e){return function(){return e.value}},eC=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},yt=function(e){return function(t){return function(){t.value=e}}};var yF=ft(Ae),Pt=ZD,Fp=eC,Mf=function(e){return Fp(function(t){var n=e(t);return{state:n,value:n}})},Zr=function(e){return function(t){return yF(Mf(e)(t))}};var TF=Vt(Sn),EF=$(Ae),dt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ht=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kt=function(e){return e.tailRecM};var MF=function(e){var t=function(n){var l=!1,p;function r(o){if(o instanceof dt){n=e(o.value0);return}if(o instanceof ht)return l=!0,o.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 103, column 3 - line 103, column 25): "+[o.constructor.name])}for(;!l;)p=r(n);return p};return function(n){return t(e(n))}};var tC={tailRecM:function(e){var t=function(l){return l},n=MF(function(l){return t(e(l))});return function(l){return ha(n(l))}},Monad0:function(){return Ga}};var Ff={tailRecM:function(e){return function(t){var n=function(l){if(l instanceof ht)return l.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[l.constructor.name])};return function(){var p=TF(Pt)(e(t))();return function(){for(;!function(){var o=xe(p)();if(o instanceof dt){var c=e(o.value0)();return yt(c)(p)(),!1}if(o instanceof ht)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[o.constructor.name])}(););return{}}(),EF(n)(xe(p))()}}},Monad0:function(){return ga}};var rC=function(e){return function(t){return function(){return e(t())}}},nC=function(e){return function(){return e}},aC=function(e){return function(t){return function(){return t(e())()}}};var Lc=function(e){return function(t){return function(){for(var n=0,l=e.length;n<l;n++)t(e[n])()}}};var xF=function(e,t,n){var l=0,p;return function(r){if(l===2)return p;if(l===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return l=1,p=n(),l=2,p}};var bi={map:rC};var xp={Applicative0:function(){return Lf},Bind1:function(){return Ip}},Ip={bind:aC,Apply0:function(){return cC(0)}},Lf={pure:nC,Apply0:function(){return cC(0)}},cC=xF("applyST","Control.Monad.ST.Internal",function(){return{apply:Or(xp),Functor0:function(){return bi}}});function sC(e){return e}var fC=sC,lC=sC;var _C=function(e,t){return t.push(e)};var Af=function(t){return function(n){return function(){return t(n)}}},Rp=function(t){return function(n){return function(l){return function(){return t(n,l)}}}};var pC=Af(lC),Pp=Af(fC);var Hp=Rp(_C);var vC=function(e){return function(t){return e&&t}},mC=function(e){return function(t){return e||t}},hC=function(e){return!e};var xc=function(e){return e.tt};var ea=function(e){return e.not};var Op=function(e){return e.implies};var Ic=function(e){return e.ff};var yu=function(e){return e.disj},Zn={ff:!1,tt:!0,implies:function(e){return function(t){return yu(Zn)(ea(Zn)(e))(t)}},conj:vC,disj:mC,not:hC};var Rc=function(e){return e.conj},Pc=function(e){var t=Ic(e),n=xc(e),l=Op(e),p=Rc(e),r=yu(e),o=ea(e);return{ff:function(c){return t},tt:function(c){return n},implies:function(c){return function(f){return function(u){return l(c(u))(f(u))}}},conj:function(c){return function(f){return function(u){return p(c(u))(f(u))}}},disj:function(c){return function(f){return function(u){return r(c(u))(f(u))}}},not:function(c){return function(f){return o(c(f))}}}};var gC=function(e){return function(t){return function(n){for(var l=t,p=n.length,r=p-1;r>=0;r--)l=e(n[r])(l);return l}}},DC=function(e){return function(t){return function(n){for(var l=t,p=n.length,r=0;r<p;r++)l=e(l)(n[r]);return l}}};var CC={empty:[],Alt0:function(){return dp}},Br=function(e){return e.empty};var K=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Si=function(e){return function(t){return e(t.value0)(t.value1)}};var Qt=function(e){return e.value1};var Qa={map:function(e){return function(t){return new K(t.value0,e(t.value1))}}};var Lr=function(e){return e.value0};var Bp=function(e){var t=Ce(e);return function(n){var l=Ce(n);return{eq:function(p){return function(r){return t(p.value0)(r.value0)&&l(p.value1)(r.value1)}}}}},bu=function(e){var t=de(e),n=Bp(e.Eq0());return function(l){var p=de(l),r=n(l.Eq0());return{compare:function(o){return function(c){var f=t(o.value0)(c.value0);return f instanceof te?te.value:f instanceof Z?Z.value:p(o.value1)(c.value1)}},Eq0:function(){return r}}}};var wn=function(e){return e.bimap};var jF={append:function(e){return function(t){return e instanceof O?e:t}}};var TC=function(){return{mempty:B.value,Semigroup0:function(){return jF}}}();var j=function(e){return e};var Rf=function(){return j};var QF=Rf();var ir=function(){return QF};var KF=pe(ve);var XF=ir();var zt=function(e){return e.foldr};var it=function(e){var t=Bn(e.Apply0()),n=z(e);return function(l){var p=zt(l);return function(r){return p(function(o){return t(r(o))})(n(void 0))}}},Pf=function(e){var t=it(e);return function(n){return qe(t(n))}};var Jt=function(e){return e.foldl};var Ja=function(e){var t=Jt(e);return function(n){var l=se(n.Semigroup0()),p=Je(n);return function(r){return function(o){var c=function(f){return function(u){return f.init?{init:!1,acc:u}:{init:!1,acc:l(f.acc)(l(r)(u))}}};return t(c)({init:!0,acc:p})(o).acc}}}};var Gp=function(e){var t=Jt(e);return function(n){return t(yn(n))(Cn(n))}};var Ot={foldr:function(e){return function(t){return function(n){if(n instanceof B)return t;if(n instanceof O)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof B)return t;if(n instanceof O)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=Je(e);return function(n){return function(l){if(l instanceof B)return t;if(l instanceof O)return n(l.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,l.constructor.name])}}}};var Hf={foldr:function(e){return function(t){return function(n){if(n instanceof tt)return t;if(n instanceof Qe)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof tt)return t;if(n instanceof Qe)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=Je(e);return function(n){return function(l){if(l instanceof tt)return t;if(l instanceof Qe)return n(l.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,l.constructor.name])}}}};var xC=function(e){var t=zt(e);return function(n){var l=se(n.Semigroup0()),p=Je(n);return function(r){return t(function(o){return function(c){return l(r(o))(c)}})(p)}}},bt={foldr:gC,foldl:DC,foldMap:function(e){return xC(bt)(e)}};var cr=function(e){return e.foldMap};var Of=function(e){var t=cr(e)(TC);return function(n){var l=Ce(n);return function(p){var r=t(function(o){var c=l(p)(o.value0);return c?new O(o.value1):B.value});return function(o){return XF(r(o))}}}};var Mi=function(e){var t=cr(e);return function(n){return t(n)(KF)}};var kf=function(e){return function(t){return function(n){return e(t,n)}}},Bc=function(e){return function(t){return function(n){return function(l){return e(t,n,l)}}}},Eo=function(e){return function(t){return function(n){return function(l){return function(p){return e(t,n,l,p)}}}}},jp=function(e){return function(t){return function(n){return function(l){return function(p){return function(r){return e(t,n,l,p,r)}}}}}};var IC=function(e){return function(t){for(var n=t.length,l=Array(n),p=0;p<n;p++)l[p]=e(p)(t[p]);return l}};var Su=function(e){return e.mapWithIndex};var $c={mapWithIndex:IC,Functor0:function(){return pt}};var en=function(e){return e.traverse};var Xp={traverse:function(e){var t=z(e),n=$(e.Apply0().Functor0());return function(l){return function(p){if(p instanceof B)return t(B.value);if(p instanceof O)return n(O.create)(l(p.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[l.constructor.name,p.constructor.name])}}},sequence:function(e){var t=z(e),n=$(e.Apply0().Functor0());return function(l){if(l instanceof B)return t(B.value);if(l instanceof O)return n(O.create)(l.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[l.constructor.name])}},Functor0:function(){return lt},Foldable1:function(){return Ot}};var QC=function(e){return function(t){return function(n){return function(l){return function(p){return function(r){for(var o=[],c=r;;){var f=p(c);if(e(f))return o;var u=t(f);o.push(n(u)),c=l(u)}}}}}}};var JC=function(e){return function(t){return function(n){return function(l){return function(p){return function(r){for(var o=[],c=r;;){var f=p(c);o.push(n(f));var u=l(f);if(e(u))return o;c=t(u)}}}}}}};var qf=function(e){return e.foldl1};var $L=Yn();var Zp={unfoldr1:JC(wo)($L)(Lr)(Qt)};var UL=Yn(),Da=function(e){return e.unfoldr};var ra={unfoldr:QC(wo)(UL)(Lr)(Qt),Unfoldable10:function(){return Zp}};var zL=ft(bi);var GL=$(pt),jL=$(bi),ed=Yn(),QL=_r(Lf),JL=bc(mi),KL=Ce(mi);var XL=Mi(bt),YL=se(It);var td=function(){return Bc(fD)(ge(B.value))(function(e){return function(t){return new O({head:e,tail:t})}})}();var zf=function(e){return Bc(mD)(e)(function(t){if(t instanceof Z)return 1;if(t instanceof Ee)return 0;if(t instanceof te)return-1;throw new Error("Failed pattern match at Data.Array (line 897, column 38 - line 900, column 11): "+[t.constructor.name])})},rd=function(e){var t=bf(e);return function(n){return zf(t(n))}},ZL=rd(rt),nd=function(e){var t=de(e);return function(n){return zf(t)(n)}};var Vf=Bc(hD);var Fi=function(e){return[e]};var Li=function(e){return Hr(e)===0};var ZC=Su($c);var e0=function(){return jp(dD)(O.create)(B.value)}();var Gf=function(){return Eo(lD)(O.create)(B.value)}(),Mu=function(e){return Gf(e)(Hr(e)-1|0)};var t0=function(e){return function(t){var n=function(p){var r=!1,o;function c(f){var u=Gf(t)(f);if(u instanceof O){var v=e(u.value0);if(v){p=f+1|0;return}return r=!0,new O(f)}if(u instanceof B)return r=!0,B.value;throw new Error("Failed pattern match at Data.Array (line 1035, column 5 - line 1037, column 25): "+[u.constructor.name])}for(;!r;)o=c(p);return o},l=n(0);if(l instanceof O&&l.value0===0)return{init:[],rest:t};if(l instanceof O)return{init:Vf(0)(l.value0)(t),rest:Vf(l.value0)(Hr(t))(t)};if(l instanceof B)return{init:t,rest:[]};throw new Error("Failed pattern match at Data.Array (line 1022, column 3 - line 1028, column 30): "+[l.constructor.name])}},jf=function(e){return function(t){return t0(e)(t).init}};var Fu=function(e){return Gf(e)(0)},r0=function(e){return function(t){var n=zf(function(p){return function(r){return e(Qt(p))(Qt(r))}})(ZC(K.create)(t)),l=Fu(n);if(l instanceof B)return[];if(l instanceof O)return GL(Qt)(ZL(Lr)(function(){var r=pC(Fi(l.value0))();return Lc(n)(function(o){return function(){var f=jL(function(){var u=function(v){return ed(Mu(v))};return function(v){return Qt(u(v))}}())(Pp(r))();return QL(JL(e(f)(o.value1))(Ee.value))(zL(Hp(o)(r)))()}})(),Pp(r)()}()));throw new Error("Failed pattern match at Data.Array (line 1115, column 17 - line 1123, column 28): "+[l.constructor.name])}},Uc=function(e){return r0(de(e))};var Vc=function(e){return kf(sD)(zt(e))};var n0=function(e){return XL(e)};var a0=function(){return Eo(pD)(O.create)(B.value)}(),zc=function(e){return function(t){return function(n){var l=je(0)(function(p){return p+1|0})(a0(function(p){return KL(e(t)(p))(Z.value)})(n));return ed(e0(l)(t)(n))}}};var o0=function(){return Eo(_D)(O.create)(B.value)}();var ad=function(e){return function(t){var n=e<1;return n?t:Vf(e)(Hr(t))(t)}};var i0=function(){return Eo(vD)(O.create)(B.value)}(),Qf=function(e){return function(t){return function(n){return n.length===0?[]:je(n)(function(l){return ed(i0(l)(n))})(o0(e(t))(n))}}},od=function(e){return Qf(Ce(e))};var yr=function(e){return function(t){return YL([e])(t)}};var id=qe(Y(Co)),Ca=function(e){return id(function(){var t=je([])(Fi);return function(n){return t(e(n))}}())};var Mn=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var cd=function(e){var t=Br(e);return function(n){return new Mn(n,t)}};var Kf=function(e){var t=or(e.Plus1().Alt0()),n=z(e.Applicative0());return function(l){return t(n(l.value0))(l.value1)}};var Gc=function(e){var t=$(e);return{map:function(n){return function(l){return new Mn(n(l.value0),t(n)(l.value1))}}}};var Xf=function(e){var t=cr(e),n=Jt(e),l=zt(e);return{foldMap:function(p){var r=se(p.Semigroup0()),o=t(p);return function(c){return function(f){return r(c(f.value0))(o(c)(f.value1))}}},foldl:function(p){return function(r){return function(o){return n(p)(p(r)(o.value0))(o.value1)}}},foldr:function(p){return function(r){return function(o){return p(o.value0)(l(p)(r)(o.value1))}}}}};var sd=function(e){var t=Jt(e),n=zt(e),l=Xf(e);return{foldMap1:function(p){var r=se(p);return function(o){return function(c){return t(function(f){return function(u){return r(f)(o(u))}})(o(c.value0))(c.value1)}}},foldr1:function(p){return function(r){return je(r.value0)(p(r.value0))(n(function(o){var c=je(o)(p(o));return function(f){return O.create(c(f))}})(B.value)(r.value1))}},foldl1:function(p){return function(r){return t(p)(r.value0)(r.value1)}},Foldable0:function(){return l}}};var l0=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Lu=function(e){return e};var Yf=isFinite;var fd=Math.round;var p0=Xn(Du),d0=bo(Du);var m0=function(){return l0(O.create)(B.value)}(),CA=function(e){if(!Yf(e))return 0;if(e>=Lu(p0))return p0;if(e<=Lu(d0))return d0;if(nr)return pr(0)(m0(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},h0=function(e){return CA(fd(e))};var $6=typeof Array.from=="function",q6=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",U6=typeof String.prototype.fromCodePoint=="function",V6=typeof String.prototype.codePointAt=="function";var jc={Applicative0:function(){return pu},Plus1:function(){return CC}};var Mo=function(e){return function(t){return t.join(e)}};var pd=ND(hu);var T0=Te(bn);var BA=function(){function e(t,n,l,p){this.value0=t,this.value1=n,this.value2=l,this.value3=p}return e.create=function(t){return function(n){return function(l){return function(p){return new e(t,n,l,p)}}}},e}();var WA=function(e){return function(t){return function(n){return function(l){var p=pd(0)(1)(t),r=pd(0)(1)(n),o=pd(0)(1)(l);return new BA(e,p,r,o)}}}};var E0=function(e){return function(t){return function(n){return WA(e)(t)(n)(1)}}},M0=E0(0)(0)(1);var F0=function(e){var t=function(c){return T0(Lu(h0(100*c))/100)},n=t(e.value1*100)+"%",l=t(e.value2*100)+"%",p=t(e.value0),r=T0(e.value3),o=e.value3===1;return o?"hsl("+(p+(", "+(n+(", "+(l+")"))))):"hsla("+(p+(", "+(n+(", "+(l+(", "+(r+")")))))))};var xi=E0(0)(0)(0);var dd={dimap:function(e){return function(t){return function(n){return function(l){return t(n(e(l)))}}}}};var vd={first:function(e){return function(t){return new K(e(t.value0),t.value1)}},second:$(Qa),Profunctor0:function(){return dd}},md=function(e){return e.second};var A0=$(pt),x0=md(vd),UA=se(It),VA=Of(bt)(cn);var tn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zA=function(e){return e};var GA=function(e){return e},ba=function(e){return e.value};var xu={append:function(e){return function(t){if(e instanceof rn&&t instanceof rn)return new rn(e.value0+t.value0);if(e instanceof rn&&t instanceof tn)return new tn(A0(x0(function(n){return e.value0+n}))(t.value0));if(e instanceof tn&&t instanceof rn)return new tn(A0(x0(function(n){return t.value0+n}))(e.value0));if(e instanceof tn&&t instanceof tn)return new tn(UA(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},jA=se(xu),hd={append:function(e){return function(t){return jA(e)(t)}}},I0=se(hd);var Xc=function(e){if(e instanceof tn)return pr("")(VA("")(e.value0));if(e instanceof rn)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var tl=function(){return{fromString:rn.create}}(),R0=st(tl),vr={fromString:function(e){return zA(R0(e))}},rl=st(vr);var Lo={value:function(e){return rl(F0(e))}};var Ii={value:function(){var e=Te(bn);return function(t){return rl(e(t))}}()},Ao={value:rl},Xa=function(e){var t=ba(e);return function(n){var l=ba(n);return{value:function(p){return I0(t(p.value0))(I0(rl(" "))(l(p.value1)))}}}};var Yt={fromString:function(e){return GA(R0(e))}};var P0=function(e){return e};var Yc=function(){return new tn([new K("-webkit-",""),new K("-moz-",""),new K("-ms-",""),new K("-o-",""),new K("","")])}();var Sa=j,gd=j;var Dd=se(hd),Cd=ba(Ii),yd=st(vr),O0=Te(bn),QA=se(xu);var es=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),KA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),XA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),YA=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var xo=function(e){if(e instanceof es)return Xc(e.value0);if(e instanceof JA)return Sa(function(t){return Sa(function(n){return"("+(xo(t)+(" + "+(xo(n)+")")))})(e.value1)})(e.value0);if(e instanceof KA)return Sa(function(t){return Sa(function(n){return"("+(xo(t)+(" - "+(xo(n)+")")))})(e.value1)})(e.value0);if(e instanceof XA)return Sa(function(t){return"("+(O0(e.value0)+(" * "+(xo(t)+")")))})(e.value1);if(e instanceof YA)return Sa(function(t){return"("+(xo(t)+(" / "+(O0(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},na={value:function(e){return e instanceof es?e.value0:QA(Yc)(new rn("calc"+xo(e)))}};var Xe=function(e){return new es(Dd(Cd(e))(yd("px")))};var Iu=function(e){return new es(Dd(Cd(e))(yd("%")))};var bd=function(e){return new es(Dd(Cd(e))(yd("em")))};var ZA=se(It),k0=z(pu),ex=Ce(Ua(cn)),Ar=de(Xt),tx=de(gi(Xt)),Io=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),eo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ro=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Po=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ho=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Oo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ko=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),No=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),to=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ru=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),N0=function(e){return e},nl=function(){function e(){}return e.value=new e,e}(),Sd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Td=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),B0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),W0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ts=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ge=function(e){return function(t){return new ts(ZA(e.value0)(t),e.value1)}},St=function(){return new ts([],nl.value)}(),$0=function(e){return N0(k0(to.create(e)))};var rx={eq:function(e){return function(t){return e instanceof Io&&t instanceof Io||e instanceof eo&&t instanceof eo||e instanceof Ro&&t instanceof Ro?e.value0===t.value0:e instanceof Po&&t instanceof Po||e instanceof Ho&&t instanceof Ho||e instanceof Oo&&t instanceof Oo||e instanceof ko&&t instanceof ko||e instanceof No&&t instanceof No||e instanceof Bo&&t instanceof Bo?e.value0===t.value0&&e.value1===t.value1:e instanceof to&&t instanceof to?e.value0===t.value0:e instanceof Ru&&t instanceof Ru?e.value0===t.value0&&ex(e.value1)(t.value1):!1}}};var q0={compare:function(e){return function(t){if(e instanceof Io&&t instanceof Io)return Ar(e.value0)(t.value0);if(e instanceof Io)return te.value;if(t instanceof Io)return Z.value;if(e instanceof eo&&t instanceof eo)return Ar(e.value0)(t.value0);if(e instanceof eo)return te.value;if(t instanceof eo)return Z.value;if(e instanceof Ro&&t instanceof Ro)return Ar(e.value0)(t.value0);if(e instanceof Ro)return te.value;if(t instanceof Ro)return Z.value;if(e instanceof Po&&t instanceof Po){var n=Ar(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Ar(e.value1)(t.value1)}if(e instanceof Po)return te.value;if(t instanceof Po)return Z.value;if(e instanceof Ho&&t instanceof Ho){var n=Ar(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Ar(e.value1)(t.value1)}if(e instanceof Ho)return te.value;if(t instanceof Ho)return Z.value;if(e instanceof Oo&&t instanceof Oo){var n=Ar(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Ar(e.value1)(t.value1)}if(e instanceof Oo)return te.value;if(t instanceof Oo)return Z.value;if(e instanceof ko&&t instanceof ko){var n=Ar(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Ar(e.value1)(t.value1)}if(e instanceof ko)return te.value;if(t instanceof ko)return Z.value;if(e instanceof No&&t instanceof No){var n=Ar(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Ar(e.value1)(t.value1)}if(e instanceof No)return te.value;if(t instanceof No)return Z.value;if(e instanceof Bo&&t instanceof Bo){var n=Ar(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:Ar(e.value1)(t.value1)}if(e instanceof Bo)return te.value;if(t instanceof Bo)return Z.value;if(e instanceof to&&t instanceof to)return Ar(e.value0)(t.value0);if(e instanceof to)return te.value;if(t instanceof to)return Z.value;if(e instanceof Ru&&t instanceof Ru){var n=Ar(e.value0)(t.value0);return n instanceof te?te.value:n instanceof Z?Z.value:tx(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return rx}};var al=function(e){return new ts([],new Sd(e))},Zt=function(e){return function(t){return new ts([],new Td(e,t))}},U0=function(e){return function(t){return new ts([],new wd(e,t))}};var Ze=function(e){return N0(k0(eo.create(e)))};var aa=function(e){return e.tell};function oa(e){return new Error(e)}function ro(e){return function(){throw e}}function ol(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var Md=function(e){return ro(oa(e))};var br=function(e){return e.throwError};var ox={throwError:ro,Monad0:function(){return ga}};var V0={catchError:qe(ol),MonadThrow0:function(){return ox}};var qn=function(e){return e.catchError};var rs=function(e){var t=qn(e),n=e.MonadThrow0().Monad0(),l=$(n.Bind1().Apply0().Functor0()),p=z(n.Applicative0());return function(r){return t(l(Qe.create)(r))(function(o){return p(tt.create(o))})}};var nn=function(e){return e.ask};var _n=function(e){return e.state};var xr=function(e){var t=_n(e);return function(n){return t(function(l){return new K(void 0,n(l))})}},Un=function(e){var t=_n(e);return function(n){return t(function(l){var p=n(l);return new K(p,p)})}},wa=function(e){var t=_n(e);return function(n){return t(function(l){return new K(n(l),l)})}},Ta=function(e){return _n(e)(function(t){return new K(t,t)})};var _t=function(e){return e.lift};var il={liftEffect:pe(ve),Monad0:function(){return ga}},Ve=function(e){return e.liftEffect};var Fd=function(e){return e},Ld=function(e){return e};var ul=function(e){return function(t){return e(t)}},Ad=function(e){var t=$(e);return{map:function(n){return ul(t(function(l){return new K(n(l.value0),l.value1)}))}}};var ns=function(e){var t=se(e);return function(n){var l=Ye(n),p=n.Functor0(),r=$(p),o=Ad(p);return{apply:function(c){return function(f){var u=function(v){return function(h){return new K(v.value0(h.value0),t(v.value1)(h.value1))}};return l(r(u)(c))(f)}},Functor0:function(){return o}}}},xd=function(e){var t=se(e),n=ns(e);return function(l){var p=Y(l),r=l.Apply0(),o=$(r.Functor0()),c=n(r);return{bind:function(f){return function(u){return p(f)(function(v){var h=u(v.value0);return o(function(g){return new K(g.value0,t(v.value1)(g.value1))})(h)})}},Apply0:function(){return c}}}};var z0=function(e){var t=Je(e),n=ns(e.Semigroup0());return function(l){var p=z(l),r=n(l.Apply0());return{pure:function(o){return p(new K(o,t))},Apply0:function(){return r}}}},cx=function(e){var t=z0(e),n=xd(e.Semigroup0());return function(l){var p=t(l.Applicative0()),r=n(l.Bind1());return{Applicative0:function(){return p},Bind1:function(){return r}}}};var G0=function(e){var t=e.Semigroup0(),n=cx(e);return function(l){var p=n(l);return{tell:function(){var r=z(l.Applicative0()),o=K.create(void 0);return function(c){return Fd(r(o(c)))}}(),Semigroup0:function(){return t},Monad1:function(){return p}}}};var sx=ir();var fx=function(e){return sx(Ld(e))};var j0=function(e){return Qt(fx(e))};var dx=$(Ad(Ci));var vx=Ye(ns(It)(wf)),mx=Y(xd(It)(Ep));var Q0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),J0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),K0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),X0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Id=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),as=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Y0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Z0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ey=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ty=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var hx=function(e){return e},os=function(e){return j0(e)},ry=function(){var e=aa(G0(yi)(Ga));return function(t){return hx(e(Fi(t)))}}(),ut=function(e){return function(t){return ry(new Rd(new Id(e),os(t)))}};var Ft=function(e){var t=ba(e);return function(n){return function(l){return ry(new as(P0(n),t(l)))}}},Pd=function(e){var t=Ft(e);return function(n){return t(n)}};var gx={map:function(e){return function(t){return dx(e)(t)}}};var Dx={apply:function(e){return function(t){return vx(e)(t)}},Functor0:function(){return gx}},$o={bind:function(e){return function(t){return mx(e)(function(n){return function(l){return l}(t(n))})}},Apply0:function(){return Dx}};var Cx=st(vr);var ny=st(Yt),yx=Ft(Lo),bx=Xa(na);var Sx={value:function(e){return e}},wx=Ft(Xa(Sx)(bx(Lo))),ay=Cx("solid");var oy=yx(ny("border-color"));var iy=function(e){return function(t){return function(n){return wx(ny("border"))(new K(e,new K(t,n)))}}};var sl=st(Yt),ku=st(vr);var Ln=function(){var e=Ft(Ao)(sl("z-index")),t=Te(za);return function(n){return e(t(n))}}();var Tx={value:function(e){return e}};var Ex={value:function(e){return e}};var qo=ku("relative"),Sr=Ft(Tx)(sl("position")),fl=Ft(Ii)(sl("opacity"));var cy=ku("inline-block");var sy=ku("flex");var fy=ku("none");var Nu=Ft(Ex)(sl("display"));var ly=ku("block"),ua=ku("absolute");var Mx=st(vr);var Fx=st(Yt);var Lx={value:function(e){return e}};var _y=Mx("row");var py=Ft(Lx)(Fx("flex-direction"));var Uo=Ft(na),Ea=st(Yt),dy=Xa(na)(na),vy=Ft(Xa(dy)(dy)),no=Uo(Ea("width")),Vn=Uo(Ea("top")),ll=Uo(Ea("right"));var kd=Uo(Ea("padding-right"));var my=function(e){return function(t){return function(n){return function(l){return vy(Ea("padding"))(new K(new K(e,t),new K(n,l)))}}}};var Nd=Uo(Ea("margin-right"));var hy=function(e){return function(t){return function(n){return function(l){return vy(Ea("margin"))(new K(new K(e,t),new K(n,l)))}}}};var ao=Uo(Ea("left")),ca=Uo(Ea("height")),Bd=Uo(Ea("bottom"));var gy=function(){function e(){}return e.value=new e,e}(),is=function(){function e(){}return e.value=new e,e}(),Dy=function(){function e(){}return e.value=new e,e}(),Cy=function(){function e(){}return e.value=new e,e}(),yy=function(){function e(){}return e.value=new e,e}(),by=function(){function e(){}return e.value=new e,e}(),Sy=function(){function e(){}return e.value=new e,e}(),wy=function(){function e(){}return e.value=new e,e}(),Ty=function(){function e(){}return e.value=new e,e}(),Ey=function(){function e(){}return e.value=new e,e}(),My=function(){function e(){}return e.value=new e,e}(),Fy=function(){function e(){}return e.value=new e,e}(),Ly=function(){function e(){}return e.value=new e,e}(),Ay=function(){function e(){}return e.value=new e,e}(),xy=function(){function e(){}return e.value=new e,e}(),Iy=function(){function e(){}return e.value=new e,e}(),Ry=function(){function e(){}return e.value=new e,e}(),Py=function(){function e(){}return e.value=new e,e}(),Hy=function(){function e(){}return e.value=new e,e}(),Oy=function(){function e(){}return e.value=new e,e}(),ky=function(){function e(){}return e.value=new e,e}(),Ny=function(){function e(){}return e.value=new e,e}(),By=function(e){if(e instanceof gy)return"button";if(e instanceof is)return"checkbox";if(e instanceof Dy)return"color";if(e instanceof Cy)return"date";if(e instanceof yy)return"datetime-local";if(e instanceof by)return"email";if(e instanceof Sy)return"file";if(e instanceof wy)return"hidden";if(e instanceof Ty)return"image";if(e instanceof Ey)return"month";if(e instanceof My)return"number";if(e instanceof Fy)return"password";if(e instanceof Ly)return"radio";if(e instanceof Ay)return"range";if(e instanceof xy)return"reset";if(e instanceof Iy)return"search";if(e instanceof Ry)return"submit";if(e instanceof Py)return"tel";if(e instanceof Hy)return"text";if(e instanceof Oy)return"time";if(e instanceof ky)return"url";if(e instanceof Ny)return"week";throw new Error("Failed pattern match at DOM.HTML.Indexed.InputType (line 33, column 19 - line 55, column 22): "+[e.constructor.name])};var wr=function(){var e={},t="Pure",n="Throw",l="Catch",p="Sync",r="Async",o="Bind",c="Bracket",f="Fork",u="Sequential",v="Map",h="Apply",g="Alt",d="Cons",a="Resume",i="Release",s="Finalizer",_="Finalized",D="Forked",C="Fiber",b="Thunk";function T(V,fe,F,N){this.tag=V,this._1=fe,this._2=F,this._3=N}function m(V){var fe=function(F,N,q){return new T(V,F,N,q)};return fe.tag=V,fe}function y(V){return new T(t,void 0)}function M(V){try{V()}catch(fe){setTimeout(function(){throw fe},0)}}function S(V,fe,F){try{return fe(F())}catch(N){return V(N)}}function w(V,fe,F){try{return fe(F)()}catch(N){return F(V(N))(),y}}var L=function(){var V=1024,fe=0,F=0,N=new Array(V),q=!1;function k(){var _e;for(q=!0;fe!==0;)fe--,_e=N[F],N[F]=void 0,F=(F+1)%V,_e();q=!1}return{isDraining:function(){return q},enqueue:function(_e){var Q,Me;fe===V&&(Me=q,k(),q=Me),N[(F+fe)%V]=_e,fe++,q||k()}}}();function I(V){var fe={},F=0,N=0;return{register:function(q){var k=F++;q.onComplete({rethrow:!0,handler:function(_e){return function(){N--,delete fe[k]}}})(),fe[k]=q,N++},isEmpty:function(){return N===0},killAll:function(q,k){return function(){if(N===0)return k();var _e=0,Q={};function Me(ke){Q[ke]=fe[ke].kill(q,function(Re){return function(){delete Q[ke],_e--,V.isLeft(Re)&&V.fromLeft(Re)&&setTimeout(function(){throw V.fromLeft(Re)},0),_e===0&&k()}})()}for(var et in fe)fe.hasOwnProperty(et)&&(_e++,Me(et));return fe={},F=0,N=0,function(ke){return new T(p,function(){for(var Re in Q)Q.hasOwnProperty(Re)&&Q[Re]()})}}}}}var R=0,P=1,W=2,E=3,A=4,x=5,H=6;function U(V,fe,F){var N=0,q=R,k=F,_e=null,Q=null,Me=null,et=null,ke=null,Re=0,$e=0,Bt=null,Cr=!0;function Mr(ne){for(var X,me,Be;;)switch(X=null,me=null,Be=null,q){case W:q=P;try{k=Me(k),et===null?Me=null:(Me=et._1,et=et._2)}catch(xt){q=x,_e=V.left(xt),k=null}break;case E:V.isLeft(k)?(q=x,_e=k,k=null):Me===null?q=x:(q=W,k=V.fromRight(k));break;case P:switch(k.tag){case o:Me&&(et=new T(d,Me,et)),Me=k._2,q=P,k=k._1;break;case t:Me===null?(q=x,k=V.right(k._1)):(q=W,k=k._1);break;case p:q=E,k=S(V.left,V.right,k._1);break;case r:q=A,k=w(V.left,k._1,function(xt){return function(){N===ne&&(N++,L.enqueue(function(){N===ne+1&&(q=E,k=xt,Mr(N))}))}});return;case n:q=x,_e=V.left(k._1),k=null;break;case l:Me===null?ke=new T(d,k,ke,Q):ke=new T(d,k,new T(d,new T(a,Me,et),ke,Q),Q),Me=null,et=null,q=P,k=k._1;break;case c:Re++,Me===null?ke=new T(d,k,ke,Q):ke=new T(d,k,new T(d,new T(a,Me,et),ke,Q),Q),Me=null,et=null,q=P,k=k._1;break;case f:q=E,X=U(V,fe,k._2),fe&&fe.register(X),k._1&&X.run(),k=V.right(X);break;case u:q=P,k=oe(V,fe,k._1);break}break;case x:if(Me=null,et=null,ke===null)q=H,k=Q||_e||k;else switch(X=ke._3,Be=ke._1,ke=ke._2,Be.tag){case l:Q&&Q!==X&&Re===0?q=x:_e&&(q=P,k=Be._2(V.fromLeft(_e)),_e=null);break;case a:Q&&Q!==X&&Re===0||_e?q=x:(Me=Be._1,et=Be._2,q=W,k=V.fromRight(k));break;case c:Re--,_e===null&&(me=V.fromRight(k),ke=new T(d,new T(i,Be._2,me),ke,X),(Q===X||Re>0)&&(q=P,k=Be._3(me)));break;case i:ke=new T(d,new T(_,k,_e),ke,Q),q=P,Q&&Q!==X&&Re===0?k=Be._1.killed(V.fromLeft(Q))(Be._2):_e?k=Be._1.failed(V.fromLeft(_e))(Be._2):k=Be._1.completed(V.fromRight(k))(Be._2),_e=null,Re++;break;case s:Re++,ke=new T(d,new T(_,k,_e),ke,Q),q=P,k=Be._1;break;case _:Re--,q=x,k=Be._1,_e=Be._2;break}break;case H:for(var ze in Bt)Bt.hasOwnProperty(ze)&&(Cr=Cr&&Bt[ze].rethrow,M(Bt[ze].handler(k)));Bt=null,Q&&_e?setTimeout(function(){throw V.fromLeft(_e)},0):V.isLeft(k)&&Cr&&setTimeout(function(){if(Cr)throw V.fromLeft(k)},0);return;case R:q=P;break;case A:return}}function Tt(ne){return function(){if(q===H)return Cr=Cr&&ne.rethrow,ne.handler(k)(),function(){};var X=$e++;return Bt=Bt||{},Bt[X]=ne,function(){Bt!==null&&delete Bt[X]}}}function ce(ne,X){return function(){if(q===H)return X(V.right(void 0))(),function(){};var me=Tt({rethrow:!1,handler:function(){return X(V.right(void 0))}})();switch(q){case R:Q=V.left(ne),q=H,k=Q,Mr(N);break;case A:Q===null&&(Q=V.left(ne)),Re===0&&(q===A&&(ke=new T(d,new T(s,k(ne)),ke,Q)),q=x,k=null,_e=null,Mr(++N));break;default:Q===null&&(Q=V.left(ne)),Re===0&&(q=x,k=null,_e=null)}return me}}function ue(ne){return function(){var X=Tt({rethrow:!1,handler:ne})();return q===R&&Mr(N),X}}return{kill:ce,join:ue,onComplete:Tt,isSuspended:function(){return q===R},run:function(){q===R&&(L.isDraining()?Mr(N):L.enqueue(function(){Mr(N)}))}}}function re(V,fe,F,N){var q=0,k={},_e=0,Q={},Me=new Error("[ParAff] Early exit"),et=null,ke=e;function Re(Tt,ce,ue){var ne=ce,X=null,me=null,Be=0,ze={},xt,rr;e:for(;;)switch(xt=null,ne.tag){case D:if(ne._3===e&&(xt=k[ne._1],ze[Be++]=xt.kill(Tt,function(fr){return function(){Be--,Be===0&&ue(fr)()}})),X===null)break e;ne=X._2,me===null?X=null:(X=me._1,me=me._2);break;case v:ne=ne._2;break;case h:case g:X&&(me=new T(d,X,me)),X=ne,ne=ne._1;break}if(Be===0)ue(V.right(void 0))();else for(rr=0,xt=Be;rr<xt;rr++)ze[rr]=ze[rr]();return ze}function $e(Tt,ce,ue){var ne,X,me,Be,ze,xt;for(V.isLeft(Tt)?(ne=Tt,X=null):(X=Tt,ne=null);;){if(me=null,Be=null,ze=null,xt=null,et!==null)return;if(ce===null){N(ne||X)();return}if(ce._3!==e)return;switch(ce.tag){case v:ne===null?(ce._3=V.right(ce._1(V.fromRight(X))),X=ce._3):ce._3=ne;break;case h:if(me=ce._1._3,Be=ce._2._3,ne){if(ce._3=ne,ze=!0,xt=_e++,Q[xt]=Re(Me,ne===me?ce._2:ce._1,function(){return function(){delete Q[xt],ze?ze=!1:ue===null?$e(ne,null,null):$e(ne,ue._1,ue._2)}}),ze){ze=!1;return}}else{if(me===e||Be===e)return;X=V.right(V.fromRight(me)(V.fromRight(Be))),ce._3=X}break;case g:if(me=ce._1._3,Be=ce._2._3,me===e&&V.isLeft(Be)||Be===e&&V.isLeft(me))return;if(me!==e&&V.isLeft(me)&&Be!==e&&V.isLeft(Be))ne=X===me?Be:me,X=null,ce._3=ne;else if(ce._3=X,ze=!0,xt=_e++,Q[xt]=Re(Me,X===me?ce._2:ce._1,function(){return function(){delete Q[xt],ze?ze=!1:ue===null?$e(X,null,null):$e(X,ue._1,ue._2)}}),ze){ze=!1;return}break}ue===null?ce=null:(ce=ue._1,ue=ue._2)}}function Bt(Tt){return function(ce){return function(){delete k[Tt._1],Tt._3=ce,$e(ce,Tt._2._1,Tt._2._2)}}}function Cr(){var Tt=P,ce=F,ue=null,ne=null,X,me;e:for(;;)switch(X=null,me=null,Tt){case P:switch(ce.tag){case v:ue&&(ne=new T(d,ue,ne)),ue=new T(v,ce._1,e,e),ce=ce._2;break;case h:ue&&(ne=new T(d,ue,ne)),ue=new T(h,e,ce._2,e),ce=ce._1;break;case g:ue&&(ne=new T(d,ue,ne)),ue=new T(g,e,ce._2,e),ce=ce._1;break;default:me=q++,Tt=x,X=ce,ce=new T(D,me,new T(d,ue,ne),e),X=U(V,fe,X),X.onComplete({rethrow:!1,handler:Bt(ce)})(),k[me]=X,fe&&fe.register(X)}break;case x:if(ue===null)break e;ue._1===e?(ue._1=ce,Tt=P,ce=ue._2,ue._2=e):(ue._2=ce,ce=ue,ne===null?ue=null:(ue=ne._1,ne=ne._2))}for(ke=ce,me=0;me<q;me++)k[me].run()}function Mr(Tt,ce){et=V.left(Tt);var ue;for(var ne in Q)if(Q.hasOwnProperty(ne)){ue=Q[ne];for(ne in ue)ue.hasOwnProperty(ne)&&ue[ne]()}Q=null;var X=Re(Tt,ke,ce);return function(me){return new T(r,function(Be){return function(){for(var ze in X)X.hasOwnProperty(ze)&&X[ze]();return y}})}}return Cr(),function(Tt){return new T(r,function(ce){return function(){return Mr(Tt,ce)}})}}function oe(V,fe,F){return new T(r,function(N){return function(){return re(V,fe,F,N)}})}return T.EMPTY=e,T.Pure=m(t),T.Throw=m(n),T.Catch=m(l),T.Sync=m(p),T.Async=m(r),T.Bind=m(o),T.Bracket=m(c),T.Fork=m(f),T.Seq=m(u),T.ParMap=m(v),T.ParApply=m(h),T.ParAlt=m(g),T.Fiber=U,T.Supervisor=I,T.Scheduler=L,T.nonCanceler=y,T}(),$y=wr.Pure,qy=wr.Throw;function Uy(e){return function(t){return wr.Catch(e,t)}}function Vy(e){return function(t){return t.tag===wr.Pure.tag?wr.Pure(e(t._1)):wr.Bind(t,function(n){return wr.Pure(e(n))})}}function zy(e){return function(t){return wr.Bind(e,t)}}function Wd(e){return function(t){return wr.Fork(e,t)}}var Gy=wr.Sync;function jy(e){return function(t){return wr.ParMap(e,t)}}function Qy(e){return function(t){return wr.ParApply(e,t)}}var oo=wr.Async;function pl(e){return function(t){return function(n){return wr.Bracket(e,t,n)}}}function Jy(e,t){return function(){return wr.Fiber(e,null,t)}}var Ky=function(){function e(n,l){return n===0&&typeof setImmediate<"u"?setImmediate(l):setTimeout(l,n)}function t(n,l){return n===0&&typeof clearImmediate<"u"?clearImmediate(l):clearTimeout(l)}return function(n,l){return wr.Async(function(p){return function(){var r=e(l,p(n()));return function(){return wr.Sync(function(){return n(t(l,r))})}}})}}(),Xy=wr.Seq;var Px=$(lt);var $d=function(e){return e},Zy=function(e){return e};var dl={lift:function(e){var t=mp(e)(O.create);return function(n){return $d(t(n))}}},Hx=_t(dl);var Ox=function(e){var t=$(e);return{map:function(n){return function(l){return t(Px(n))(l)}}}},qd=function(e){return{Applicative0:function(){return zd(e)},Bind1:function(){return Ud(e)}}},Ud=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return{bind:function(l){return function(p){return t(l)(function(r){if(r instanceof B)return n(B.value);if(r instanceof O){var o=p(r.value0);return o}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[r.constructor.name])})}},Apply0:function(){return Vd(e)}}},Vd=function(e){var t=Ox(e.Bind1().Apply0().Functor0());return{apply:Or(qd(e)),Functor0:function(){return t}}},zd=function(e){return{pure:function(){var t=z(e.Applicative0());return function(n){return $d(t(O.create(n)))}}(),Apply0:function(){return Vd(e)}}};var eb=function(e){var t=kt(e),n=e.Monad0(),l=Y(n.Bind1()),p=z(n.Applicative0()),r=qd(n);return{tailRecM:function(o){var c=t(function(f){var u=o(f);return l(u)(function(v){return p(function(){if(v instanceof B)return new ht(B.value);if(v instanceof O&&v.value0 instanceof dt)return new dt(v.value0.value0);if(v instanceof O&&v.value0 instanceof ht)return new ht(new O(v.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[v.constructor.name])}())})});return function(f){return $d(c(f))}},Monad0:function(){return r}}},tb=function(e){var t=e.Monad0(),n=Hx(t),l=_n(e),p=qd(t);return{state:function(r){return n(l(r))},Monad0:function(){return p}}};var ab=function(e){return e};var Vo=function(e){return e};var ml={lift:function(e){return function(t){return ab(ge(t))}}},Nx=_t(ml),ob=function(e){return function(t){return function(n){return e(t(n))}}},Bx=function(e){return{map:function(){var t=$(e);return function(n){return ob(t(n))}}()}};var jd=function(e){var t=Ye(e),n=Bx(e.Functor0());return{apply:function(l){return function(p){return function(r){return t(l(r))(p(r))}}},Functor0:function(){return n}}},Oi=function(e){var t=Y(e),n=jd(e.Apply0());return{bind:function(l){return function(p){return function(r){return t(l(r))(function(o){var c=p(o);return c(r)})}}},Apply0:function(){return n}}};var Qd=function(e){var t=jd(e.Apply0());return{pure:function(){var n=z(e);return function(l){return ab(ge(n(l)))}}(),Apply0:function(){return t}}},hl=function(e){var t=Qd(e.Applicative0()),n=Oi(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},Wu=function(e){var t=hl(e);return{ask:z(e.Applicative0()),Monad0:function(){return t}}};var zo=function(e){var t=e.Monad0(),n=hl(t);return{liftEffect:function(){var l=Nx(t),p=Ve(e);return function(r){return l(p(r))}}(),Monad0:function(){return n}}},$u=function(e){var t=e.Monad0(),n=Vt(t.Bind1()),l=z(t.Applicative0()),p=kt(e),r=hl(t);return{tailRecM:function(o){return function(c){var f=function(u){return function(v){var h=o(v);return n(l)(h(u))}};return function(u){return p(f(u))(c)}}},Monad0:function(){return r}}};var Ni=function(e){return e.sequential},io=function(e){return e.parallel};var Vx=pe(ve),zx=function(e){var t=Ni(e),n=io(e);return function(l){var p=it(l);return function(r){var o=p(r);return function(c){var f=o(function(u){return n(c(u))});return function(u){return t(f(u))}}}}};var us=function(e){var t=zx(e);return function(n){var l=t(n);return function(p){return l(p)(Vx)}}};var cs=function(e){return e()};var ub=function(e){return e()};var cb=function(e){throw new Error(e)};var sb=function(){return cb};var Kx=sb(),Xx=ub,Dl=function(e){return Xx(function(){return Kx(e)})};var Zx=function(e,t,n){var l=0,p;return function(r){if(l===2)return p;if(l===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return l=1,p=n(),l=2,p}},eI=z(Rt),Xd=ft(Ae),lb=$(Ae);var tI=function(e){return e},_b=Wd(!1);var rI={map:jy},pn={map:Vy},nI=$(pn),Yd=Wd(!0),aI=function(){var e=function(l){if(l instanceof Qe)return l.value0;if(l instanceof tt)return Dl("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[l.constructor.name])},t=function(l){if(l instanceof tt)return l.value0;if(l instanceof Qe)return Dl("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[l.constructor.name])},n=function(l){if(l instanceof tt)return!0;if(l instanceof Qe)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[l.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:tt.create,right:Qe.create}}(),pb=function(e){return Jy(aI,e)},db=function(e){return function(){var n=pb(e)();return n.run(),n}},Zd=function(e){return Xd(db(e))};var vb=function(e){return Ky(Qe.create,e)},mb=function(e){return function(t){return pl(e)({killed:ge(t),failed:ge(t),completed:ge(t)})}},hb={apply:Qy,Functor0:function(){return rI}};var Ma={Applicative0:function(){return dn},Bind1:function(){return Wt}},Wt={bind:zy,Apply0:function(){return ev(0)}},dn={pure:$y,Apply0:function(){return ev(0)}},ev=Zx("applyAff","Effect.Aff",function(){return{apply:Or(Ma),Functor0:function(){return pn}}}),oI=ev(73),qu=z(dn),gb=Y(Wt);var iI=Vt(Wt);var ss=function(e){return function(t){return mb(qu(void 0))(ge(e))(ge(t))}},tv=function(e){return mb(e)(ge(qu(void 0)))(qu)};var Bi={parallel:j,sequential:Xy,Apply0:function(){return oI},Apply1:function(){return hb}},uI=io(Bi),Uu={pure:function(e){return uI(qu(e))},Apply0:function(){return hb}};var mr={liftEffect:Gy,Monad0:function(){return Ma}},Cl=Ve(mr),Wi=function(e){return tI(ge(Cl(e)))},fs=function(e){return oo(function(t){return lb(Wi)(e.join(t))})},Db={map:function(e){return function(t){return cs(pb(nI(e)(fs(t))))}}};var ls=function(e){return function(t){return gb(Cl(t.isSuspended))(function(n){return n?Cl(Xd(t.kill(e,ge(eI(void 0))))):oo(function(l){return lb(Wi)(t.kill(e,l))})})}};var Vu={throwError:qy,Monad0:function(){return Ma}},Cb={catchError:Uy,MonadThrow0:function(){return Vu}},yb=rs(Cb);var bb=yb,cI=function(e){return function(t){return db(iI(function(n){return Cl(e(n))})(yb(t)))}},yl=function(e){return function(t){return Xd(cI(e)(t))}};var zu={tailRecM:function(e){var t=function(n){return gb(e(n))(function(l){if(l instanceof ht)return qu(l.value0);if(l instanceof dt)return t(l.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[l.constructor.name])})};return t},Monad0:function(){return Ma}};var Sb=ge(qu(void 0));var pI=function(e){var t=$(e);return{map:function(n){return function(l){return function(p){return t(function(r){return new K(n(r.value0),r.value1)})(l(p))}}}}};var av=function(e){return{Applicative0:function(){return iv(e)},Bind1:function(){return ov(e)}}},ov=function(e){var t=Y(e.Bind1());return{bind:function(n){return function(l){return function(p){return t(n(p))(function(r){var o=l(r.value0);return o(r.value1)})}}},Apply0:function(){return Tb(e)}}},Tb=function(e){var t=pI(e.Bind1().Apply0().Functor0());return{apply:Or(av(e)),Functor0:function(){return t}}},iv=function(e){var t=z(e.Applicative0());return{pure:function(n){return function(l){return t(new K(n,l))}},Apply0:function(){return Tb(e)}}};var Eb=function(e){var t=e.Monad0(),n=Y(t.Bind1()),l=z(t.Applicative0()),p=kt(e),r=av(t);return{tailRecM:function(o){return function(c){var f=function(u){var v=o(u.value0);return n(v(u.value1))(function(h){return l(function(){if(h.value0 instanceof dt)return new dt(new K(h.value0.value0,h.value1));if(h.value0 instanceof ht)return new ht(new K(h.value0.value0,h.value1));throw new Error("Failed pattern match at Control.Monad.State.Trans (line 87, column 16 - line 89, column 40): "+[h.value0.constructor.name])}())})};return function(u){return p(f)(new K(c,u))}}},Monad0:function(){return r}}},Mb=function(e){var t=z(e.Applicative0()),n=av(e);return{state:function(l){return function(p){return t(l(p))}},Monad0:function(){return n}}};var dI=_t(ml);var _s={liftAff:pe(ve),MonadEffect0:function(){return mr}},Tr=function(e){return e.liftAff};var Fb=function(e){var t=e.MonadEffect0(),n=zo(t);return{liftAff:function(){var l=dI(t.Monad0()),p=Tr(e);return function(r){return l(p(r))}}(),MonadEffect0:function(){return n}}};function Lb(e){return function(t){return function(){return setInterval(t,e)}}}function Ab(e){return function(){clearInterval(e)}}var xb=Lb;var Ib=Ab;var Oe=function(){function e(){}return e.value=new e,e}(),Ne=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cv=function(e){return e};var hI=function(e){var t=function(n){return function(l){var p=n,r=!1,o;function c(f,u){if(u instanceof Ne&&u.value1 instanceof Ne&&u.value1.value1 instanceof Ne){p=new Ne(u,f),l=u.value1.value1.value1;return}var v=function(g){return g instanceof Ne&&g.value1 instanceof Ne&&g.value1.value1 instanceof Oe?new Ne(e(g.value0),new Ne(e(g.value1.value0),Oe.value)):g instanceof Ne&&g.value1 instanceof Oe?new Ne(e(g.value0),Oe.value):Oe.value},h=function(g){return function(d){var a=g,i=!1,s;function _(D,C){if(D instanceof Ne&&D.value0 instanceof Ne&&D.value0.value1 instanceof Ne&&D.value0.value1.value1 instanceof Ne){a=D.value1,d=new Ne(e(D.value0.value0),new Ne(e(D.value0.value1.value0),new Ne(e(D.value0.value1.value1.value0),C)));return}return i=!0,C}for(;!i;)s=_(a,d);return s}};return r=!0,h(f)(v(u))}for(;!r;)o=c(p,l);return o}};return t(Oe.value)},Pb={map:hI};var vn={foldr:function(e){return function(t){var n=function(){var p=function(r){return function(o){var c=r,f=!1,u;function v(h,g){if(g instanceof Oe)return f=!0,h;if(g instanceof Ne){c=new Ne(g.value0,h),o=g.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[h.constructor.name,g.constructor.name])}for(;!f;)u=v(c,o);return u}};return p(Oe.value)}(),l=Jt(vn)(qe(e))(t);return function(p){return l(n(p))}}},foldl:function(e){var t=function(n){return function(l){var p=n,r=!1,o;function c(f,u){if(u instanceof Oe)return r=!0,f;if(u instanceof Ne){p=e(f)(u.value0),l=u.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[u.constructor.name])}for(;!r;)o=c(p,l);return o}};return t},foldMap:function(e){var t=se(e.Semigroup0()),n=Je(e);return function(l){return Jt(vn)(function(p){var r=t(p);return function(o){return r(l(o))}})(n)}}};var gI=zt(vn);var sv={append:function(e){return function(t){return gI(Ne.create)(t)(e)}}},DI=se(sv);var CI={alt:DI,Functor0:function(){return Pb}},Hb=function(){return{empty:Oe.value,Alt0:function(){return CI}}}();var EI=$(lt);var Ob=function(e){if(e instanceof Oe)return B.value;if(e instanceof Ne)return new O({head:e.value0,tail:e.value1});throw new Error("Failed pattern match at Data.List (line 259, column 1 - line 259, column 66): "+[e.constructor.name])},kb=function(e){return Da(e)(function(t){return EI(function(n){return new K(n.head,n.tail)})(Ob(t))})};var uo=function(){var e=function(t){return function(n){var l=t,p=!1,r;function o(c,f){if(f instanceof Oe)return p=!0,c;if(f instanceof Ne){l=new Ne(f.value0,c),n=f.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[c.constructor.name,f.constructor.name])}for(;!p;)r=o(l,n);return r}};return e(Oe.value)}();var Nb=function(e){return e instanceof Oe};var ds=function(e,t,n){var l=0,p;return function(r){if(l===2)return p;if(l===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return l=1,p=n(),l=2,p}};var FI=$(lt);var gt=function(){function e(){}return e.value=new e,e}(),wt=function(){function e(t,n,l,p,r,o){this.value0=t,this.value1=n,this.value2=l,this.value3=p,this.value4=r,this.value5=o}return e.create=function(t){return function(n){return function(l){return function(p){return function(r){return function(o){return new e(t,n,l,p,r,o)}}}}}},e}(),Wb=function(){function e(){}return e.value=new e,e}(),fv=function(){function e(t,n,l){this.value0=t,this.value1=n,this.value2=l}return e.create=function(t){return function(n){return function(l){return new e(t,n,l)}}},e}(),pv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var bl=function(){function e(t,n,l){this.value0=t,this.value1=n,this.value2=l}return e.create=function(t){return function(n){return function(l){return new e(t,n,l)}}},e}(),Bb=function(){function e(t,n,l){this.value0=t,this.value1=n,this.value2=l}return e.create=function(t){return function(n){return function(l){return new e(t,n,l)}}},e}(),zn=function(e,t,n,l){if(n instanceof gt){if(l instanceof gt)return new wt(1,1,e,t,n,l);if(l instanceof wt)return new wt(1+l.value0|0,1+l.value1|0,e,t,n,l);throw new Error("Failed pattern match at Data.Map.Internal (line 680, column 5 - line 684, column 39): "+[l.constructor.name])}if(n instanceof wt){if(l instanceof gt)return new wt(1+n.value0|0,1+n.value1|0,e,t,n,l);if(l instanceof wt)return new wt(1+function(){var p=n.value0>l.value0;return p?n.value0:l.value0}()|0,(1+n.value1|0)+l.value1|0,e,t,n,l);throw new Error("Failed pattern match at Data.Map.Internal (line 686, column 5 - line 690, column 68): "+[l.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 678, column 32 - line 690, column 68): "+[n.constructor.name])},LI=function(){return qe(pv.create)(Wb.value)}(),AI=function(e){return function(t){return function(n){var l=function(p){var r=!1,o;function c(f){if(f instanceof Wb)return r=!0,n(void 0);if(f instanceof fv)return r=!0,t(f.value0,f.value1,f.value2);if(f instanceof pv){p=e(f.value1)(f.value0);return}throw new Error("Failed pattern match at Data.Map.Internal (line 918, column 8 - line 924, column 20): "+[f.constructor.name])}for(;!r;)o=c(p);return o};return l}}},Gu=function(e){if(e instanceof gt)return 0;if(e instanceof wt)return e.value1;throw new Error("Failed pattern match at Data.Map.Internal (line 616, column 8 - line 618, column 24): "+[e.constructor.name])},vs=function(e){return function(t){return new wt(1,1,e,t,gt.value,gt.value)}},sa=function(){var e=function(l){if(l instanceof gt)return 0;if(l instanceof wt)return l.value0;throw new Error("Failed pattern match at Data.Map.Internal (line 735, column 12 - line 737, column 26): "+[l.constructor.name])},t=function(l,p,r,o,c,f,u){return f instanceof wt&&f.value0>e(u)?zn(f.value2,f.value3,zn(l,p,r,f.value4),zn(o,c,f.value5,u)):zn(o,c,zn(l,p,r,f),u)},n=function(l,p,r,o,c,f,u){return f instanceof wt&&e(c)<=f.value0?zn(f.value2,f.value3,zn(r,o,c,f.value4),zn(l,p,f.value5,u)):zn(r,o,c,zn(l,p,f,u))};return function(l,p,r,o){if(r instanceof gt)return o instanceof gt?vs(l)(p):o instanceof wt&&o.value0>1?t(l,p,r,o.value2,o.value3,o.value4,o.value5):zn(l,p,r,o);if(r instanceof wt){if(o instanceof wt){if(o.value0>(r.value0+1|0))return t(l,p,r,o.value2,o.value3,o.value4,o.value5);if(r.value0>(o.value0+1|0))return n(l,p,r.value2,r.value3,r.value4,r.value5,o)}return o instanceof gt&&r.value0>1?n(l,p,r.value2,r.value3,r.value4,r.value5,o):zn(l,p,r,o)}throw new Error("Failed pattern match at Data.Map.Internal (line 695, column 40 - line 716, column 34): "+[r.constructor.name])}}(),lv=ds("unsafeSplit","Data.Map.Internal",function(){return function(e,t,n){if(n instanceof gt)return new bl(B.value,gt.value,gt.value);if(n instanceof wt){var l=e(t)(n.value2);if(l instanceof te){var p=lv(771)(e,t,n.value4);return new bl(p.value0,p.value1,sa(n.value2,n.value3,p.value2,n.value5))}if(l instanceof Z){var p=lv(774)(e,t,n.value5);return new bl(p.value0,sa(n.value2,n.value3,n.value4,p.value1),p.value2)}if(l instanceof Ee)return new bl(new O(n.value3),n.value4,n.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 769, column 5 - line 777, column 30): "+[l.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 765, column 34 - line 777, column 30): "+[n.constructor.name])}}),dv=lv(764),$b=ds("unsafeSplitLast","Data.Map.Internal",function(){return function(e,t,n,l){if(l instanceof gt)return new Bb(e,t,n);if(l instanceof wt){var p=$b(757)(l.value2,l.value3,l.value4,l.value5);return new Bb(p.value0,p.value1,sa(e,t,n,p.value2))}throw new Error("Failed pattern match at Data.Map.Internal (line 754, column 37 - line 758, column 57): "+[l.constructor.name])}}),xI=$b(753),vv=function(e,t){if(e instanceof gt)return t;if(e instanceof wt){var n=xI(e.value2,e.value3,e.value4,e.value5);return sa(n.value0,n.value1,n.value2,t)}throw new Error("Failed pattern match at Data.Map.Internal (line 742, column 25 - line 746, column 38): "+[e.constructor.name,t.constructor.name])};var _v=ds("unsafeUnionWith","Data.Map.Internal",function(){return function(e,t,n,l){if(n instanceof gt)return l;if(l instanceof gt)return n;if(l instanceof wt){var p=dv(e,l.value2,n),r=_v(787)(e,t,p.value1,l.value4),o=_v(788)(e,t,p.value2,l.value5);if(p.value0 instanceof O)return sa(l.value2,t(p.value0.value0)(l.value3),r,o);if(p.value0 instanceof B)return sa(l.value2,l.value3,r,o);throw new Error("Failed pattern match at Data.Map.Internal (line 789, column 5 - line 793, column 46): "+[p.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 782, column 42 - line 793, column 46): "+[n.constructor.name,l.constructor.name])}}),II=_v(781),RI=function(e){var t=de(e);return function(n){return function(l){return function(p){return II(t,n,l,p)}}}},qb=function(e){return RI(e)(ge)};var Ub=function(e){var t=de(e);return function(n){return function(l){var p=dv(t,n,l);return FI(function(r){return new K(r,vv(p.value1,p.value2))})(p.value0)}}};var $i=function(e){var t=de(e);return function(n){var l=function(p){var r=!1,o;function c(f){if(f instanceof gt)return r=!0,B.value;if(f instanceof wt){var u=t(n)(f.value2);if(u instanceof te){p=f.value4;return}if(u instanceof Z){p=f.value5;return}if(u instanceof Ee)return r=!0,new O(f.value3);throw new Error("Failed pattern match at Data.Map.Internal (line 281, column 7 - line 284, column 22): "+[u.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 278, column 8 - line 284, column 22): "+[f.constructor.name])}for(;!r;)o=c(p);return o};return l}};var PI=function(){var e=function(t){return function(n){var l=t,p=!1,r;function o(c,f){if(f instanceof gt)return p=!0,c;if(f instanceof wt){if(f.value5 instanceof gt){l=new fv(f.value2,f.value3,c),n=f.value4;return}l=new fv(f.value2,f.value3,new pv(f.value5,c)),n=f.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 929, column 13 - line 936, column 48): "+[f.constructor.name])}for(;!p;)r=o(l,n);return r}};return e}(),HI=AI(PI);var OI=function(){var e=function(t,n,l){return new O(new K(new K(t,n),l))};return HI(e)(function(t){return B.value})}(),ju=function(e){var t=Da(e)(OI);return function(n){return t(LI(n))}};var xn=function(e){var t=de(e);return function(n){return function(l){var p=function(r){if(r instanceof gt)return vs(n)(l);if(r instanceof wt){var o=t(n)(r.value2);if(o instanceof te)return sa(r.value2,r.value3,p(r.value4),r.value5);if(o instanceof Z)return sa(r.value2,r.value3,r.value4,p(r.value5));if(o instanceof Ee)return new wt(r.value0,r.value1,n,l,r.value4,r.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 469, column 7 - line 472, column 35): "+[o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 466, column 8 - line 472, column 35): "+[r.constructor.name])};return p}}},Vb={map:function(e){var t=function(n){if(n instanceof gt)return gt.value;if(n instanceof wt)return new wt(n.value0,n.value1,n.value2,e(n.value3),t(n.value4),t(n.value5));throw new Error("Failed pattern match at Data.Map.Internal (line 145, column 10 - line 148, column 39): "+[n.constructor.name])};return t}};var ms={foldr:function(e){return function(t){var n=ds("go","Data.Map.Internal",function(){return function(p,r){if(p instanceof gt)return r;if(p instanceof wt)return n(170)(p.value4,e(p.value3)(n(170)(p.value5,r)));throw new Error("Failed pattern match at Data.Map.Internal (line 167, column 26 - line 170, column 43): "+[p.constructor.name])}}),l=n(167);return function(p){return l(p,t)}}},foldl:function(e){return function(t){var n=ds("go","Data.Map.Internal",function(){return function(p,r){if(r instanceof gt)return p;if(r instanceof wt)return n(176)(e(n(176)(p,r.value4))(r.value3),r.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 173, column 26 - line 176, column 43): "+[r.constructor.name])}}),l=n(173);return function(p){return l(t,p)}}},foldMap:function(e){var t=Je(e),n=se(e.Semigroup0());return function(l){var p=function(r){if(r instanceof gt)return t;if(r instanceof wt)return n(p(r.value4))(n(l(r.value3))(p(r.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 179, column 10 - line 182, column 28): "+[r.constructor.name])};return p}}};var zb=function(){return zt(ms)(Ne.create)(Oe.value)}();var jo=function(e){var t=!1,n;function l(p){if(p instanceof gt)return t=!0,B.value;if(p instanceof wt){if(p.value4 instanceof gt)return t=!0,new O({key:p.value2,value:p.value3});e=p.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 359, column 11 - line 364, column 21): "+[p.constructor.name])}for(;!t;)n=l(e);return n};var Qo=function(e){var t=!1,n;function l(p){if(p instanceof gt)return t=!0,B.value;if(p instanceof wt){if(p.value5 instanceof gt)return t=!0,new O({key:p.value2,value:p.value3});e=p.value5;return}throw new Error("Failed pattern match at Data.Map.Internal (line 350, column 11 - line 355, column 21): "+[p.constructor.name])}for(;!t;)n=l(e);return n};var Ur=function(){return gt.value}();var Fa=function(e){var t=de(e);return function(n){var l=function(p){if(p instanceof gt)return gt.value;if(p instanceof wt){var r=t(n)(p.value2);if(r instanceof te)return sa(p.value2,p.value3,l(p.value4),p.value5);if(r instanceof Z)return sa(p.value2,p.value3,p.value4,l(p.value5));if(r instanceof Ee)return vv(p.value4,p.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 496, column 7 - line 499, column 43): "+[r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 493, column 8 - line 499, column 43): "+[p.constructor.name])};return l}};var Qu=function(e){var t=de(e);return function(n){return function(l){return function(p){var r=dv(t,l,p),o=n(r.value0);if(o instanceof B)return vv(r.value1,r.value2);if(o instanceof O)return sa(l,o.value0,r.value1,r.value2);throw new Error("Failed pattern match at Data.Map.Internal (line 512, column 3 - line 516, column 41): "+[o.constructor.name])}}}};var NI=vt(mt),jb=$(lt),BI=Fa(rt),Sl=Y(Wt),mv=Ve(mr),WI=NI(Wt),hv=z(dn),$I=$(pn),qI=kt(zu);var UI=it(dn)(vn),VI=br(Vu);var zI=function(e){return e},GI=function(e){var t=function(){var p=xe(e)();if(p instanceof B)return B.value;if(p instanceof O){var r=Qo(p.value0.releasers);if(r instanceof B)return B.value;if(r instanceof O)return Zr(jb(function(o){return{nextKey:o.nextKey,references:o.references,releasers:BI(r.value0.key)(o.releasers)}}))(e)(),new O(r.value0.value);throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 104, column 33 - line 108, column 32): "+[r.constructor.name])}throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 102, column 11 - line 108, column 32): "+[p.constructor.name])},n=function(l){return Sl(mv(t))(function(p){if(p instanceof B)return WI(mv(yt(B.value)(e)))(function(){return hv(new ht(l))});if(p instanceof O)return Sl(bb(p.value0))(function(r){return hv(new dt(kr(function(o){return new Ne(o,l)})(ge(l))(r)))});throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 92, column 11 - line 98, column 68): "+[p.constructor.name])})};return $I(uo)(qI(n)(Oe.value))};var Qb=function(){var e=new O({nextKey:0,references:1,releasers:Ur});return $(Ae)(zI)(Pt(e))}(),Jb=function(e){return tv(Sl(mv(Mf(jb(function(t){return{nextKey:t.nextKey,releasers:t.releasers,references:t.references-1|0}}))(e)))(function(t){return t instanceof O&&t.value0.references===0?Sl(GI(e))(UI(VI)):hv(void 0)}))};var QI=Y(Wt),JI=Ve(mr);var KI=function(e){return function(t){return QI(JI(Qb))(function(n){return ss(Jb(n))(e(t(n)))})}},wl=KI(pe(ve));var gv=function(e){var t=$(e);return{map:function(n){return function(l){var p=t(n);return function(r){return p(l(r))}}}}},Kb=function(e){var t=Ye(e),n=gv(e.Functor0());return{apply:function(l){return function(p){return function(r){return t(l(r))(p(r))}}},Functor0:function(){return n}}},XI=function(e){var t=Y(e),n=Kb(e.Apply0());return{bind:function(l){return function(p){return function(r){return t(l(r))(function(o){var c=p(o);return c(r)})}}},Apply0:function(){return n}}};var YI=function(e){var t=z(e),n=Kb(e.Apply0());return{pure:function(l){return function(p){return t(l)}},Apply0:function(){return n}}},Tl=function(e){var t=YI(e.Applicative0()),n=XI(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}};var ZI=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Yb=function(e){return function(t){return Sa(function(n){return e(n.value0)(n.value1)})(t)}};var Zb=function(e){return function(t){return gd(new ZI(e,t))}},Dv={map:function(e){return function(t){return Sa(function(n){return Zb(function(l){return e(n.value0(l))})(n.value1)})(t)}}};var eS=Zb(pe(ve));var tR=function(){function e(t,n,l){this.value0=t,this.value1=n,this.value2=l}return e.create=function(t){return function(n){return function(l){return new e(t,n,l)}}},e}();var El=function(e){return tR.create(Ce(e.Eq0()))(de(e))},rR={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},tS={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return rR}};var yv=bu(Xt)(tS);var aR=Ub(yv),oR=$i(yv),iR=xn(yv);var nS=function(){return function(e){var t=Jr(e);return function(n){var l=El(n);return function(p){return function(r){return function(o){return aR(new K(t(p),l(r)))(o)}}}}}},Ml=function(){return function(e){var t=Jr(e);return function(n){var l=El(n);return function(p){return function(r){return function(o){return oR(new K(t(p),l(r)))(o)}}}}}},aS=function(){return function(e){var t=Jr(e);return function(n){var l=El(n);return function(p){return function(r){return function(o){return function(c){return iR(new K(t(p),l(r)))(o)(c)}}}}}}},oS=function(e){var t=it(e)(ms);return function(n){return function(l){return t(function(p){return l(p)})(n)}}},Ju=Ur;var Ll=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();function iS(e,t,n){return e==null?t:n(e)}function bv(e){return e}var co=je(null)(bv),Nt=function(e){return iS(e,B.value,O.create)};var qt=function(){function e(t,n,l,p){this.value0=t,this.value1=n,this.value2=l,this.value3=p}return e.create=function(t){return function(n){return function(l){return function(p){return new e(t,n,l,p)}}}},e}(),Ds=j,mn=function(e,t){return e.value2(e.value1,t)},Ut=j,hn=function(e){return e.value3(e.value1)},Ir=Ds(function(e){return e.value0});var uS=$(pt),SR=$(Qa);var Jo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),so=function(){function e(t,n,l,p){this.value0=t,this.value1=n,this.value2=l,this.value3=p}return e.create=function(t){return function(n){return function(l){return function(p){return new e(t,n,l,p)}}}},e}(),Ko=function(){function e(t,n,l,p){this.value0=t,this.value1=n,this.value2=l,this.value3=p}return e.create=function(t){return function(n){return function(l){return function(p){return new e(t,n,l,p)}}}},e}(),Xo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wR=function(){function e(t,n,l){this.value0=t,this.value1=n,this.value2=l}return e.create=function(t){return function(n){return function(l){return new e(t,n,l)}}},e}(),cS=function(e){return function(t){return e(t)}};var TR=j;var ER={bimap:function(e){return function(t){return cS(function(n){return TR(new wR(function(l){return e(n.value0(l))},function(l){return t(n.value1(l))},n.value2))})}}},MR=wn(ER);var Ui=cS(function(e){var t=function(n){if(n instanceof Jo)return new Jo(n.value0);if(n instanceof so)return new so(n.value0,n.value1,e.value0(n.value2),uS(t)(n.value3));if(n instanceof Ko)return new Ko(n.value0,n.value1,e.value0(n.value2),uS(SR(t))(n.value3));if(n instanceof Xo)return new Xo(e.value1(n.value0));if(n instanceof fo)return new fo(MR(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function Vi(e,t){return t[e]}function wv(e,t){return t.hasOwnProperty(e)}function lo(e,t,n){n[e]=t}function Tv(e,t){for(var n=[],l=0;l<e.length;l++)n.push(t(l,e[l]));return n}function Ev(e,t){for(var n=0;n<e.length;n++)t(e[n])}function Mv(e,t){for(var n=Object.keys(e),l=0;l<n.length;l++){var p=n[l];t(p,e[p])}}function Fv(e,t,n,l,p){for(var r=[],o=e.length,c=t.length,f=0;;){if(f<o)f<c?r.push(n(f,e[f],t[f])):l(f,e[f]);else if(f<c)r.push(p(f,t[f]));else break;f++}return r}function Cs(e,t,n){for(var l={},p=0;p<e.length;p++){var r=e[p],o=t(r);l[o]=n(o,p,r)}return l}function ys(e,t,n,l,p,r){for(var o={},c=0;c<t.length;c++){var f=t[c],u=n(f);e.hasOwnProperty(u)?o[u]=l(u,c,e[u],f):o[u]=r(u,c,f)}for(var u in e)u in o||p(u,e[u]);return o}function zi(e,t){return e===t}function Lv(e,t){return t.createTextNode(e)}function Av(e,t){t.textContent=e}function xl(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function Yo(e,t,n){var l=n.childNodes.item(e)||null;l!==t&&n.insertBefore(t,l)}function bs(e,t){t&&e.parentNode===t&&t.removeChild(e)}function Ss(e){return e.parentNode}function Il(e,t,n,l){e!=null?l.setAttributeNS(e,t,n):l.setAttribute(t,n)}function Rl(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function xv(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function Iv(e,t,n){n.addEventListener(e,t,!1)}function Rv(e,t,n){n.removeEventListener(e,t,!1)}var Pv=void 0;var ws=function(){return{}};function Hv(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var Ov=Vi,kv=j,Nv=lo,Bv=ws;var Pl=function(e){return function(t){return t[e]}},IR=Pl("namespaceURI"),RR=Pl("prefix"),PR=Pl("localName"),HR=Pl("tagName");function Ku(e){return function(){return e.scrollTop}}function Ts(e){return function(t){return function(){t.scrollTop=e}}}var Hl=function(e){return function(t){return function(){return t[e]}}},kR=Hl("children"),NR=Hl("firstElementChild"),BR=Hl("lastElementChild"),WR=Hl("childElementCount");function fS(e){return function(t){return function(){return t.querySelector(e)}}}var qR=$(Ae);var lS=function(e){var t=qR(Nt),n=fS(e);return function(l){return t(n(l))}};var $v=j;var Es=function(e,t,n){var l=0,p;return function(r){if(l===2)return p;if(l===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return l=1,p=n(),l=2,p}};var qv=function(e){return hn(e.widget)},Uv=Es("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof fo)return Uv(291)(e,Ui(t.value0));if(t instanceof Xo){var n=mn(e.widget,t.value0),l=Ds(function(p){return Ut(new qt(p.value0,{build:e.build,widget:n},Uv(296),qv))})(n);return l}return qv(e),e.build(t)}}),jR=Uv(286),Ol=function(e){var t=Ss(e.node);return bs(e.node,t)},kl=Es("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof fo)return kl(82)(e,Ui(t.value0));if(t instanceof Jo){if(e.value===t.value0)return Ut(new qt(e.node,e,kl(85),Ol));if(nr){var n={build:e.build,node:e.node,value:t.value0};return Av(t.value0,e.node),Ut(new qt(e.node,n,kl(89),Ol))}}return Ol(e),e.build(t)}}),QR=kl(77),Nl=function(e){var t=Ss(e.node);return bs(e.node,t),Mv(e.children,function(n,l){return hn(l)}),hn(e.attrs)},Bl=function(e){var t=Ss(e.node);return bs(e.node,t),Ev(e.children,hn),hn(e.attrs)},pS=function(e,t,n,l){var p=t===l;return p?e instanceof O&&n instanceof O&&e.value0===n.value0||e instanceof B&&n instanceof B:!1},Wl=Es("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof fo)return Wl(135)(e,Ui(t.value0));if(t instanceof so&&pS(e.ns,e.name,t.value0,t.value1)){var n=Hr(t.value3),l=Hr(e.children);if(l===0&&n===0){var f=mn(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:f,ns:t.value0,name:t.value1,children:e.children};return Ut(new qt(e.node,u,Wl(149),Bl))}var p=function(v,h){return hn(h)},r=function(v,h,g){var d=mn(h,g);return Yo(v,Ir(d),e.node),d},o=function(v,h){var g=e.build(h);return Yo(v,Ir(g),e.node),g},c=Fv(e.children,t.value3,r,p,o),f=mn(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:f,ns:t.value0,name:t.value1,children:c};return Ut(new qt(e.node,u,Wl(172),Bl))}return Bl(e),e.build(t)}}),JR=Wl(130),$l=Es("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof fo)return $l(222)(e,Ui(t.value0));if(t instanceof Ko&&pS(e.ns,e.name,t.value0,t.value1)){var n=Hr(t.value3);if(e.length===0&&n===0){var c=mn(e.attrs,t.value2),f={build:e.build,node:e.node,attrs:c,ns:t.value0,name:t.value1,children:e.children,length:0};return Ut(new qt(e.node,f,$l(237),Nl))}var l=function(u,v){return hn(v)},p=function(u,v,h,g){var d=mn(h,g.value1);return Yo(v,Ir(d),e.node),d},r=function(u,v,h){var g=e.build(h.value1);return Yo(v,Ir(g),e.node),g},o=ys(e.children,t.value3,Lr,p,l,r),c=mn(e.attrs,t.value2),f={build:e.build,node:e.node,attrs:c,ns:t.value0,name:t.value1,children:o,length:n};return Ut(new qt(e.node,f,$l(261),Nl))}return Nl(e),e.build(t)}}),KR=$l(217),XR=function(e,t,n){var l=e.buildWidget(e)(n),p=Ds(function(r){return Ut(new qt(r.value0,{build:t,widget:l},jR,qv))})(l);return p},YR=function(e,t,n){var l=Lv(n,e.document),p={build:t,node:l,value:n};return Ut(new qt(l,p,QR,Ol))},ZR=function(e,t,n,l,p,r){var o=xl(co(n),l,e.document),c=$v(o),f=function(g,d,a){var i=t(a.value1);return Yo(d,Ir(i),c),i},u=Cs(r,Lr,f),v=e.buildAttributes(o)(p),h={build:t,node:c,attrs:v,ns:n,name:l,children:u,length:Hr(r)};return Ut(new qt(c,h,KR,Nl))},eP=function(e,t,n,l,p,r){var o=xl(co(n),l,e.document),c=$v(o),f=function(g,d){var a=t(d);return Yo(g,Ir(a),c),a},u=Tv(r,f),v=e.buildAttributes(o)(p),h={build:t,node:c,attrs:v,ns:n,name:l,children:u};return Ut(new qt(c,h,JR,Bl))},Ms=function(e){var t=Es("build","Halogen.VDom.DOM",function(){return function(l){if(l instanceof Jo)return YR(e,t(59),l.value0);if(l instanceof so)return eP(e,t(60),l.value0,l.value1,l.value2,l.value3);if(l instanceof Ko)return ZR(e,t(61),l.value0,l.value1,l.value2,l.value3);if(l instanceof Xo)return XR(e,t(62),l.value0);if(l instanceof fo)return t(63)(Ui(l.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[l.constructor.name])}}),n=t(58);return n};function ql(e){return typeof e}function Fs(e){return e===void 0}var vS=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var Gv=function(){var e=cd(Hb);return function(t){return cv(e(t))}}();var mS=function(e){return function(t){return new Mn(e,new Ne(t.value0,t.value1))}};var Gi=j,jv=j;function Qv(e){return e()}function CS(e){return function(t){return function(n){return function(l){var p=n;function r(c){return function(f){return t(f)(c)(l[c])}}for(var o in l)hasOwnProperty.call(l,o)&&(p=e(p)(r(o)));return p}}}}function yS(e,t,n,l){return n in l?t(l[n]):e}function Jv(e){return function(t){var n=[];for(var l in t)hasOwnProperty.call(t,l)&&n.push(e(l)(t[l]));return n}}var oP=Object.keys||Jv(function(e){return function(){return e}});var sP=ft(bi);var bS=function(){return Eo(yS)(B.value)(O.create)}();var Ul=function(e){var t=Vc(e);return function(n){return Qv(function(){var p=ws();return Lc(t(n))(function(r){return sP(Hv(r.value0)(r.value1)(p))})(),p})}};var fP=CS(rD),SS=function(e){var t=se(e.Semigroup0()),n=Je(e);return function(l){return fP(function(p){return function(r){return function(o){return t(p)(l(r)(o))}}})(n)}};function Ls(e){return function(){return function(t){return e(t)()}}}function Xv(e){return function(t){return function(n){return function(l){return function(){return l.addEventListener(e,t,n)}}}}}function Yv(e){return function(t){return function(n){return function(l){return function(){return l.removeEventListener(e,t,n)}}}}}var lP=function(e,t,n){var l=0,p;return function(r){if(l===2)return p;if(l===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return l=1,p=n(),l=2,p}};var em=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_o=function(){function e(t,n,l){this.value0=t,this.value1=n,this.value2=l}return e.create=function(t){return function(n){return function(l){return new e(t,n,l)}}},e}(),ei=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ti=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ji=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_P=Vi,Zv=lo,pP=function(e,t){var n=xv(null,e,t);if(n)return Rl(null,e,t);var l=ql(Vi(e,t));return l==="string"?lo(e,"",t):e==="rowSpan"?lo(e,1,t):e==="colSpan"?lo(e,1,t):lo(e,Pv,t)},TS=function(e){if(e instanceof _o&&e.value0 instanceof O)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof _o)return"attr/:"+e.value1;if(e instanceof ei)return"prop/"+e.value0;if(e instanceof ti)return"handler/"+e.value0;if(e instanceof ji)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},Vl=j;var ES=function(e){return function(t){var n=function(v){return function(h,g){if(g instanceof _o)return Rl(co(g.value0),g.value1,t);if(g instanceof ei)return pP(g.value0,t);if(g instanceof ti){var d=Ov(g.value0,v);return Rv(g.value0,Lr(d),t)}if(g instanceof ji)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[g.constructor.name])}},l=function(v){return v instanceof O?e(v.value0)():void 0},p=function(v){var h=bS("ref")(v.props);return h instanceof O&&h.value0 instanceof ji?l(h.value0.value0(new tm(t))):void 0},r=function(v,h){return function(g,d,a,i){if(a instanceof _o&&i instanceof _o){var s=a.value2===i.value2;return s||Il(co(i.value0),i.value1,i.value2,t),i}if(a instanceof ei&&i instanceof ei){var _=zi(a.value1,i.value1);if(_)return i;if(i.value0==="value"){var D=_P("value",t),C=zi(D,i.value1);return C||Zv(i.value0,i.value1,t),i}return Zv(i.value0,i.value1,t),i}if(a instanceof ti&&i instanceof ti){var b=Ov(i.value0,v);return yt(i.value1)(Qt(b))(),Nv(i.value0,b,h),i}return i}},o=function(v){return function(h,g,d){if(d instanceof _o)return Il(co(d.value0),d.value1,d.value2,t),d;if(d instanceof ei)return Zv(d.value0,d.value1,t),d;if(d instanceof ti){var a=Vi(d.value0,v);if(wv(d.value0,v))return yt(d.value1)(Qt(a))(),d;var i=Pt(d.value1)(),s=Ls(function(_){return function(){var C=xe(i)();return l(C(_))}})();return Nv(d.value0,new K(s,i),v),Iv(d.value0,s,t),d}if(d instanceof ji)return l(d.value0(new em(t))),d;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[d.constructor.name])}},c=lP("patchProp","Halogen.VDom.DOM.Prop",function(){return function(v,h){var g=Bv(),d=n(v.events),a=r(v.events,g),i=o(g),s=ys(v.props,h,TS,a,d,i),_={events:kv(g),props:s};return Ut(new qt(void 0,_,c(100),p))}}),f=c(87),u=function(v){var h=Bv(),g=Cs(v,TS,o(h)),d={events:kv(h),props:g};return Ut(new qt(void 0,d,f,p))};return u}};var nm=function(e){return e},am=function(e){return nm(Xo.create(e))},mP=function(e){return e.toPropValue},ri=function(e){return nm(Jo.create(e))},AS=function(e){return new ji(function(t){return e(function(n){if(n instanceof em)return new O(n.value0);if(n instanceof tm)return B.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},xS=function(e){var t=mP(e);return function(n){var l=ei.create(n);return function(p){return l(t(p))}}};var IS={toPropValue:Vl};var om={toPropValue:function(){var e=ir();return function(t){return Vl(e(t))}}()};var RS={toPropValue:function(e){return Vl(By(e))}};var im=function(){return ti.create}(),PS=function(e){return function(t){return function(n){return function(l){return new so(e,t,n,l)}}}};var HS=function(e){return function(t){return _o.create(e)(t)}};var gP=pe(ve);var zl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),um=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),OS=function(e){return function(t){return new cm(e,t)}},kS=function(){return um.create}(),NS=function(e){var t=z(e);return function(n){return function(l){return function(p){return function(r){return function(o){if(r instanceof zl)return new K(new Ne({func:t(r.value0),count:o},n),l);if(r instanceof um)return new K(new Ne({func:p(r.value0),count:o},n),l);if(r instanceof cm)return NS(e)(n)(mS(r.value1)(l))(p)(r.value0)(o+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[r.constructor.name])}}}}}},BS=function(e){var t=Ye(e.Apply0());return function(n){return function(l){return function(p){if(n instanceof Oe)return new tt(p);if(n instanceof Ne){var r=t(n.value0.func)(p),o=n.value0.count===1;if(o)return n.value1 instanceof Oe?new tt(r):BS(e)(n.value1)(l)(r);if(l instanceof Oe)return new tt(r);if(l instanceof Ne)return new Qe(new K(new Ne({func:r,count:n.value0.count-1|0},n.value1),new Mn(l.value0,l.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[l.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},WS={map:function(e){return function(t){return OS(new zl(e))(t)}}},$S=function(e){var t=BS(e),n=z(e),l=NS(e);return function(p){return function(r){var o=function(c){var f=!1,u;function v(h){if(h.value1.value0 instanceof zl){var g=t(h.value0)(h.value1.value1)(n(h.value1.value0.value0));if(g instanceof tt)return f=!0,g.value0;if(g instanceof Qe){c=g.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[g.constructor.name])}if(h.value1.value0 instanceof um){var g=t(h.value0)(h.value1.value1)(p(h.value1.value0.value0));if(g instanceof tt)return f=!0,g.value0;if(g instanceof Qe){c=g.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[g.constructor.name])}if(h.value1.value0 instanceof cm){var d=new Mn(h.value1.value0.value1,h.value1.value1);c=l(h.value0)(d)(p)(h.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[h.value1.value0.constructor.name])}for(;!f;)u=v(c);return u};return o(new K(Oe.value,Gv(r)))}}},qS=function(e){return $S(e)(gP)},US={apply:function(e){return function(t){return OS(e)(t)}},Functor0:function(){return WS}},VS=function(){return{pure:zl.create,Apply0:function(){return US}}}(),DP=$S(VS),sm=function(e){return DP(function(t){return kS(e(t))})};var Gl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var GS=function(e){var t=!1,n;function l(p){if(p.value0 instanceof Oe&&p.value1 instanceof Oe)return t=!0,B.value;if(p.value0 instanceof Oe){e=new Gl(uo(p.value1),Oe.value);return}if(p.value0 instanceof Ne)return t=!0,new O(new K(p.value0.value0,new Gl(p.value0.value1,p.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[p.constructor.name])}for(;!t;)n=l(e);return n},jS=function(e){return function(t){return new Gl(e.value0,new Ne(t,e.value1))}};var QS=function(e){return e.value0 instanceof Oe&&e.value1 instanceof Oe};var JS=function(){return new Gl(Oe.value,Oe.value)}();var Xu=function(){function e(){}return e.value=new e,e}(),jl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var KS=function(e){return function(t){if(e instanceof Xu)return t;if(t instanceof Xu)return e;if(e instanceof jl)return new jl(e.value0,jS(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},yP=function(e){return function(t){return function(n){var l=function(r){return function(o){return function(c){var f=r,u=o,v=!1,h;function g(d,a,i){if(i instanceof Oe)return v=!0,a;if(i instanceof Ne){f=d,u=d(a)(i.value0),c=i.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[d.constructor.name,a.constructor.name,i.constructor.name])}for(;!v;)h=g(f,u,c);return h}}},p=function(r){return function(o){var c=r,f=!1,u;function v(h,g){var d=GS(h);if(d instanceof B)return f=!0,l(function(a){return function(i){return i(a)}})(t)(g);if(d instanceof O){c=d.value0.value1,o=new Ne(e(d.value0.value0),g);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[d.constructor.name])}for(;!f;)u=v(c,o);return u}};return p(n)(Oe.value)}}},XS=function(e){if(e instanceof Xu)return B.value;if(e instanceof jl)return new O(new K(e.value0,function(){var t=QS(e.value1);return t?Xu.value:yP(KS)(Xu.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var YS=function(){return Xu.value}(),ZS=KS;var ew={append:ZS};var tw=function(e){return function(t){return ZS(e)(new jl(t,JS))}};var SP=function(e,t,n){var l=0,p;return function(r){if(l===2)return p;if(l===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return l=1,p=n(),l=2,p}},wP=se(ew);var fm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),As=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rw=function(e){var t=!1,n;function l(p){var r=function(f){return f},o=function(f){return function(u){return new fm(f.value0,wP(f.value1)(u))}};if(p.value0 instanceof As){var c=XS(p.value1);if(c instanceof B)return t=!0,new As(p.value0.value0);if(c instanceof O){e=o(r(c.value0.value0)(p.value0.value0))(c.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[c.constructor.name])}if(p.value0 instanceof xs)return t=!0,new xs(p.value0.value0,function(f){return o(p.value0.value1(f))(p.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[p.value0.constructor.name])}for(;!t;)n=l(e);return n},Aa=function(e){var t=$(e);return function(n){var l=n.Monad0(),p=$(l.Bind1().Apply0().Functor0()),r=z(l.Applicative0()),o=kt(n);return function(c){var f=function(u){var v=rw(u);if(v instanceof As)return p(ht.create)(r(v.value0));if(v instanceof xs)return p(dt.create)(c(t(v.value1)(v.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[v.constructor.name])};return o(f)}}};var nw=function(e){return new fm(e,YS)};var Ql={Applicative0:function(){return Gn},Bind1:function(){return xa}},Qi={map:function(e){return function(t){return Vt(xa)(function(){var n=z(Gn);return function(l){return n(e(l))}}())(t)}}},xa={bind:function(e){return function(t){return new fm(e.value0,tw(e.value1)(t))}},Apply0:function(){return lm(0)}},Gn={pure:function(e){return nw(As.create(e))},Apply0:function(){return lm(0)}},lm=SP("freeApply","Control.Monad.Free",function(){return{apply:Or(Ql),Functor0:function(){return Qi}}}),_m=lm(77);var TP=z(Gn);var Lt=function(e){return nw(new xs(e,function(t){return TP(t)}))};var aw=function(e){var t=e.Monad0(),n=$(t.Bind1().Apply0().Functor0()),l=z(t.Applicative0()),p=kt(e);return function(r){var o=function(c){var f=rw(c);if(f instanceof As)return n(ht.create)(l(f.value0));if(f instanceof xs)return n(function(u){return dt.create(f.value1(u))})(r(f.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[f.constructor.name])};return p(o)}};var ow=function(){function e(t,n,l){this.value0=t,this.value1=n,this.value2=l}return e.create=function(t){return function(n){return function(l){return new e(t,n,l)}}},e}(),iw=j,uw=j;function pm(e){return function(t){return e===t}}var Yu=pm;var LP=ft(Ae);var AP=Y(Sn);var xP=se(It),IP=it(Rt),RP=IP(bt);var Jl=function(e){return e},sw=function(e){return function(t){return e(function(n){return LP(t(n))})}};var hr=function(e){return function(t){return e(t)}};var vm={map:function(e){return function(t){return function(n){return t(function(l){return n(e(l))})}}}};var gr=function(){var t=Pt([])();return{emitter:function(n){return function(){return Zr(function(p){return xP(p)([n])})(t)(),Zr(Qf(Yu)(n))(t)}},listener:function(n){return AP(xe(t))(RP(function(l){return l(n)}))}}};var mm=pe(ve);var PP=Ml();var lw=function(e){return e},_w=function(e){return e},Is=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ps=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ki=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hs=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Os=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Yl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Zl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ks=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Zu=function(e){return e},e_=function(e){return Lt(new Ps(e,void 0))};var er=function(e){return Lt(new Rs(function(t){return e},mm))};var Ia=function(e){return Lt(new Os(e,void 0))};var oi=function(){return function(e){var t=PP(e);return function(n){var l=t(n);return function(p){return function(r){return function(o){return Lt(new Hs(uw(new ow(function(c){var f=z(c);return function(u){var v=je(f(B.value))(u),h=l(p)(r);return function(g){return v(h(g))}}},o,mm))))}}}}}},hm=rt,t_=rt;var r_={lift:function(e){return function(t){return Zu(Lt(Ki.create(t)))}}},Xi=Ql,sr={state:function(e){return Zu(Lt(Is.create(e)))},Monad0:function(){return Xi}};var jn=function(e){return{liftEffect:function(){var t=Ve(e);return function(n){return Zu(Lt(Ki.create(t(n))))}}(),Monad0:function(){return Xi}}};var ii=function(e){var t=jn(e.MonadEffect0());return{liftAff:function(){var n=Tr(e);return function(l){return Zu(Lt(Ki.create(n(l))))}}(),MonadEffect0:function(){return t}}};var In=function(e){return Lt(new ks(e,mm))},on=Qi;var Vr=xa,HP=Y(Vr),n_=_m;var Rr=Gn,OP=z(Rr),Ns={tailRecM:function(e){return function(t){return HP(e(t))(function(n){if(n instanceof dt)return kt(Ns)(e)(n.value0);if(n instanceof ht)return OP(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return Xi}};var ec=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),nc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ac=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var kP=function(e,t,n){var l=0,p;return function(r){if(l===2)return p;if(l===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return l=1,p=n(),l=2,p}};var NP=function(e,t){return zi(e.value0,t.value0)&&zi(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var pw=function(e){return e.value2(e.value3)};var dw=function(e){var t=function(r){return hn(r.vdom)},n=kP("patchThunk","Halogen.VDom.Thunk",function(){return function(r,o){var c=NP(r.thunk,o);if(c)return Ut(new qt(Ir(r.vdom),r,n(112),t));var f=mn(r.vdom,e(pw(o)));return Ut(new qt(Ir(f),{vdom:f,thunk:o},n(115),t))}}),l=n(108),p=function(r){return function(o){var c=Ms(r)(e(pw(o)));return Ut(new qt(Ir(c),{thunk:o,vdom:c},l,t))}};return p};var a_=lu(on),Cm=it(Rr)(Ot),BP=$(on);var vw=z(Rr),WP=Ml(),$P=nS(),qP=aS(),oc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),o_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ym=j,bm=j,Rn=function(e){return function(t){if(t instanceof ec)return a_(Cm(e.handleAction)(e.initialize))(t.value0);if(t instanceof tc)return a_(Cm(e.handleAction)(e.finalize))(t.value0);if(t instanceof rc)return a_(Cm(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof nc)return a_(e.handleAction(t.value0))(t.value1);if(t instanceof ac)return Yb(function(n){var l=BP(je(t.value1(void 0))(n));return function(p){return l(e.handleQuery(p))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},UP=j,Pn=j;var Dr=function(){return{handleAction:ge(vw(void 0)),handleQuery:ge(vw(B.value)),receive:ge(B.value),initialize:B.value,finalize:B.value}}(),Sm=function(){return function(e){var t=WP(e),n=$P(e),l=qP(e);return function(p){var r=t(p),o=n(p),c=l(p);return function(f){return function(u){return function(v){return function(h){return function(g){return UP({get:r(f)(u),pop:o(f)(u),set:c(f)(u),component:v,input:h,output:g})}}}}}}}};var Ra=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),un=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var hw=function(e){return e instanceof un?new O(e.value1):e instanceof gn?new O(e.value0):B.value},gw=function(e){return e instanceof un?new O(e.value0):e instanceof Ra?new O(e.value0):B.value};var Dw=function(e){var t=se(e);return function(n){var l=se(n);return{append:function(p){return function(r){if(p instanceof Ra&&r instanceof Ra)return new Ra(t(p.value0)(r.value0));if(p instanceof Ra&&r instanceof gn)return new un(p.value0,r.value0);if(p instanceof Ra&&r instanceof un)return new un(t(p.value0)(r.value0),r.value1);if(p instanceof gn&&r instanceof Ra)return new un(r.value0,p.value0);if(p instanceof gn&&r instanceof gn)return new gn(l(p.value0)(r.value0));if(p instanceof gn&&r instanceof un)return new un(r.value0,l(p.value0)(r.value1));if(p instanceof un&&r instanceof Ra)return new un(t(p.value0)(r.value0),p.value1);if(p instanceof un&&r instanceof gn)return new un(p.value0,l(p.value1)(r.value0));if(p instanceof un&&r instanceof un)return new un(t(p.value0)(r.value0),l(p.value1)(r.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[p.constructor.name,r.constructor.name])}}}}};var Bs=function(e){return function(){console.log(e)}},i_=function(e){return function(){console.warn(e)}};var o2=se(mf),i2=Je(To),yw=Mi(bt),bw=yw(To),c_=Ja(bt)(To),Pa=$(pt),Em=Ye(vi),u2=se(It),Sw=cr(bt),c2=Sw(To),s2=nd(q0),s_=$(lt),f2=st(eD),ww=Y(Yr),l2=qf(sd(bt)),Tw=$(Gc(pt));var _2=Of(bt)(cn),p2=Y(Co),d2=Kf(jc),v2=ea(Pc(Zn)),m2=Ja(Xf(bt))(To),h2=Te(bn),f_=function(e){return e},g2=function(e){return e},Mm=function(e){return function(t){return function(n){return t+(e+n)}}},D2={append:function(e){return function(t){return e+t}}},C2={append:function(e){return function(t){return e+t}}},Ew=Dw(D2)(C2),Mw=$D(Ew),u_=Sw(Mw),y2=yw(Mw),Ws=se(Tp(Ew)),Cw=function(e){var t=kr(function(n){return i2})(function(n){return bw([n.value0,": ",n.value1])});return c_("; ")(Pa(t)(e))},b2=function(e){if(e instanceof Io)return"#"+e.value0;if(e instanceof eo)return"."+e.value0;if(e instanceof Ro)return"["+(e.value0+"]");if(e instanceof Po)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof Ho)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof Oo)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof ko)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof No)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof Bo)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof to)return":"+e.value0;if(e instanceof Ru)return":"+(e.value0+("("+(c_(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},S2=function(e){return function(t){if(e.length===0&&t instanceof nl)return["*"];if(t instanceof nl)return[""];if(t instanceof Sd)return[t.value0];if(t instanceof wd)return Em(Pa(Mm(" > "))(vo(t.value0)))(vo(t.value1));if(t instanceof Td)return Em(Pa(Mm(" "))(vo(t.value0)))(vo(t.value1));if(t instanceof B0)return Em(Pa(Mm(" + "))(vo(t.value0)))(vo(t.value1));if(t instanceof W0)return u2(vo(t.value0))(vo(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},vo=function(e){return Pa(function(t){return t+c2(b2)(s2(e.value0))})(S2(e.value0)(e.value1))},w2=function(){var e=c_(", ");return function(t){return e(vo(t))}}(),Yi=function(e){return e.length===0?B.value:s_(function(t){return new Mn(t.head,t.tail)})(td(e))};var ic=function(e){if(e.value0 instanceof X0)return je(e.value0.value0)(function(t){return U0(ic(t))(e.value0.value0)})(Yi(e.value1));if(e.value0 instanceof Id)return je(e.value0.value0)(function(t){return Zt(ic(t))(e.value0.value0)})(Yi(e.value1));if(e.value0 instanceof J0)return je(e.value0.value0)(function(t){return Zt(e.value0.value0)(ic(t))})(Yi(e.value1));if(e.value0 instanceof K0)return je(al("TODO"))(ic)(Yi(ad(e.value0.value0)(yr(e.value0)(e.value1))));if(e.value0 instanceof Q0)return je(Ge(St)(e.value0.value0))(function(t){return Ge(ic(t))(e.value0.value0)})(Yi(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},T2=function(e){return Xc(e)},E2=function(e){return O.create(gn.create(f_(f2("@import url("+(e+`);
`)))))},M2=function(e){return e},Fm=function(e){return ww(e)(function(){var t=s_(M2);return function(n){return t(hw(n))}}())},F2=function(e){return e},Fw=function(e){return ww(e)(function(){var t=s_(F2);return function(n){return t(gw(n))}}())},L2=function(e){return je(e.value0)(function(t){return"("+(e.value0+(": "+(Xc(t)+")")))})(e.value1)},A2=function(e){return"@media "+(T2(e.value1)+l2(o2)(Tw(function(t){return function(n){return" and "+n}(L2(t))})(e.value2)))};var x2=function(e){return function(t){if(e instanceof rn&&t instanceof rn)return[new Qe(new K(e.value0,t.value0))];if(e instanceof tn&&t instanceof rn)return Pa(function(n){return new Qe(new K(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof rn&&t instanceof tn)return Pa(function(n){return new Qe(new K(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof tn&&t instanceof tn)return Pa(function(n){return je(new tt(n.value0+n.value1))(function(){var l=K.create(n.value0+n.value1);return function(p){return Qe.create(l(function(r){return n.value0+r}(p)))}}())(_2(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},Lm=function(e){return x2(e.value0)(e.value1)},I2=function(e){return function(t){var n=p2(t)(Lm),l=s_(function(r){return Ra.create(g2(Cw(d2(r))))})(Yi(n)),p=function(r){return O.create(gn.create(f_(c_(" ")([w2(ic(r)),"{",Cw(n),`}
`]))))};return je(l)(p)(Yi(e))}},$s=function(e){return function(t){var n=function(i){return i instanceof Y0?new O(new K(i.value0,i.value1)):B.value},l=u_(Si(qe(R2)(e)))(Ca(n)(t)),p=function(i){return i instanceof as?new O(new K(i.value0,i.value1)):B.value},r=function(){var i=Ca(p)(t),s=v2(Li)(i);return s?I2(e)(i):B.value}(),o=function(i){return $s(yr(i)(e))},c=function(i){return i instanceof Rd?new O(new K(i.value0,i.value1)):B.value},f=y2(Pa(Si(o))(Ca(c)(t))),u=function(i){return i instanceof ey?new O(i.value0):B.value},v=u_(P2)(Ca(u)(t)),h=function(i){return i instanceof ty?new O(i.value0):B.value},g=u_(E2)(Ca(h)(t)),d=function(i){return i instanceof Z0?new O(i.value0):B.value},a=u_(O2)(Ca(d)(t));return Ws(r)(Ws(g)(Ws(v)(Ws(a)(Ws(f)(l)))))}},R2=function(e){return function(t){return function(n){return O.create(gn.create(f_(A2(e)+(" { "+(pr("")(Fm($s(t)(n)))+` }
`)))))}}},P2=function(e){var t=" "+(e.value0+(" { "+(m2(" ")(Tw(Si(H2))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],l=bw(Pa(function(p){return p+t})(n));return new O(new gn(l))},H2=function(e){return function(t){var n=pr("")(Fw($s([])(t)));return h2(e)+("% "+("{ "+(n+" }")))}},O2=function(e){return O.create(gn.create(f_("@font-face { "+(pr("")(Fw($s([])(e)))+` }
`))))},Lw=function(){var e=$s([]);return function(t){return e(os(t))}}();var qs=function(){return PS(B.value)}();var Am=function(e){return qs("img")(e)([])},l_=function(e){return qs("input")(e)([])};var xm=qs("style");var Pr=qs("div"),Ha=Pr([]);var uc=function(){var e=function(t){return function(n){return new O(new Ll(t,n))}};return function(t){return AS(e(t))}}(),Us=function(e){return xS(e)};var N2=Us(IS);var Aw=N2("src");var xw=function(e){return Us(e)("type")};var Im=function(){return HS(B.value)}();var B2=xw(om),W2=Y(Co),$2=Ul(bt),Iw=function(e){var t=pr("")(Fm(Lw(e)));return xm([B2("text/css")])([ri(t)])},Dn=function(){var e=function(){var r=Mo("; "),o=SS(yi)(function(c){return function(f){return[c+(": "+f)]}});return function(c){return r(o(c))}}(),t=id(cr(Hf)(yi)(Fi)),n=function(r){return r instanceof as?new O(new K(r.value0,r.value1)):B.value},l=function(r){var o=W2(Ca(n)(r))(function(c){return t(Lm(c))});return $2(o)},p=Im("style");return function(r){return p(e(l(os(r))))}}();var zr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Gr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Er=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var q2=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return{map:function(l){return function(p){var r=function(o){if(o instanceof zr)return new zr(o.value0,function(c){return r(o.value1(c))});if(o instanceof Gr)return new Gr(o.value0,function(c){return r(o.value1(c))});if(o instanceof jr)return new jr(t(o.value0)(function(c){return n(r(c))}));if(o instanceof Er)return new Er(l(o.value0));throw new Error("Failed pattern match at Pipes.Internal (line 28, column 12 - line 32, column 41): "+[o.constructor.name])};return r(p)}}}};var zs=function(e){var t;function n(l){e=l}for(;;)t=n(e);return t},Rm=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0()),l=q2(e),p=$(l);return{apply:function(r){return function(o){var c=function(f){if(f instanceof zr)return new zr(f.value0,function(u){return c(f.value1(u))});if(f instanceof Gr)return new Gr(f.value0,function(u){return c(f.value1(u))});if(f instanceof jr)return new jr(t(f.value0)(function(u){return n(c(u))}));if(f instanceof Er)return p(f.value0)(o);throw new Error("Failed pattern match at Pipes.Internal (line 36, column 13 - line 40, column 33): "+[f.constructor.name])};return c(r)}},Functor0:function(){return l}}},sc=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0()),l=Rm(e);return{bind:function(p){return function(r){var o=function(c){if(c instanceof zr)return new zr(c.value0,function(f){return o(c.value1(f))});if(c instanceof Gr)return new Gr(c.value0,function(f){return o(c.value1(f))});if(c instanceof jr)return new jr(t(c.value0)(function(f){return n(o(f))}));if(c instanceof Er)return r(c.value0);throw new Error("Failed pattern match at Pipes.Internal (line 47, column 12 - line 51, column 28): "+[c.constructor.name])};return o(p)}},Apply0:function(){return l}}};var fc=function(e){var t=Rm(e);return{pure:Er.create,Apply0:function(){return t}}},Rw=function(e){var t=fc(e),n=sc(e);return{Applicative0:function(){return t},Bind1:function(){return n}}},Pw=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0()),l=Rw(e);return{tailRecM:function(p){return function(r){var o=function(c){if(c instanceof Er&&c.value0 instanceof dt)return o(p(c.value0.value0));if(c instanceof Er&&c.value0 instanceof ht)return new Er(c.value0.value0);if(c instanceof jr)return new jr(t(c.value0)(function(f){return n(o(f))}));if(c instanceof zr)return new zr(c.value0,function(f){return o(c.value1(f))});if(c instanceof Gr)return new Gr(c.value0,function(f){return o(c.value1(f))});throw new Error("Failed pattern match at Pipes.Internal (line 163, column 10 - line 168, column 52): "+[c.constructor.name])};return o(p(r))}},Monad0:function(){return l}}};var Hw=function(e){return function(t){return new Gr(t,Er.create)}},Ow=function(e){return function(t){return new zr(t,Er.create)}};var Pm=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(l){return function(p){if(l instanceof zr)return new zr(l.value0,function(r){return Pm(e)(l.value1(r))(p)});if(l instanceof Gr)return Gs(e)(l.value1)(p(l.value0));if(l instanceof jr)return new jr(t(l.value0)(function(r){return n(Pm(e)(r)(p))}));if(l instanceof Er)return new Er(l.value0);throw new Error("Failed pattern match at Pipes.Core (line 222, column 21 - line 226, column 29): "+[l.constructor.name])}}},Gs=function(e){var t=$(e.Bind1().Apply0().Functor0());return function(n){return function(l){if(l instanceof zr)return Pm(e)(n(l.value0))(l.value1);if(l instanceof Gr)return new Gr(l.value0,function(p){return function(r){return Gs(e)(n)(r)}(l.value1(p))});if(l instanceof jr)return new jr(t(function(p){return Gs(e)(n)(p)})(l.value0));if(l instanceof Er)return new Er(l.value0);throw new Error("Failed pattern match at Pipes.Core (line 197, column 22 - line 201, column 29): "+[l.constructor.name])}}};var p_=function(e){return Hw(e)};var Hm=function(e){var t=Gs(e);return function(n){return function(l){return t(ge(n))(l)}}};var kw=function(e){return Ow(e)(void 0)};var Nw=Te(za),Vw=de(rt),zw=vt(mt),V2=zw($o),z2=pe(ve),Bw=Fc(Tf),d_=Tl(Ma),Ww=zw(sc(d_)),$w=p_(d_),qw=z(fc(d_)),Uw=kt(Pw(d_));var G2={eq:function(e){return function(t){return e===t}}},km={compare:function(e){return function(t){return Vw(e)(t)}},Eq0:function(){return G2}},j2={pageOrder:function(e){return function(t){return Vw(e)(t)}},Ord0:function(){return km}},Q2=function(e){return{element:function(){var t=function(n){return Pr([Dn(iy(ay)(Xe(1))(xi))])([ri(Nw(n)),Am([Aw("https://picsum.photos/"+Nw(n)),Dn(V2(no(Xe(400)))(function(){return ca(Xe(400))}))])])};return Pn({initialState:z2,render:t,eval:Rn(Dr)})}(),PageOrder0:function(){return j2},MonadAff1:function(){return e}}},Gw=function(e){var t=z(e.MonadEffect0().Monad0().Applicative0()),n=Q2(e);return{feedAbove:function(l){var p=function(r){var o=Bw(r-1|0)(300);return Ww($w(o))(function(){return qw(new dt(o))})};return t(Uw(p)(l))},feedBelow:function(l){var p=function(r){var o=Bw(r+1|0)(300);return Ww($w(o))(function(){return qw(new dt(o))})};return t(Uw(p)(l))},feedInsert:t(B.value),feedDelete:t(B.value),onElement:function(l){return t(void 0)},PageElement0:function(){return n},MonadAff1:function(){return e}}};var eu=function(){return window};function jw(e){return e.readyState}var js=function(){function e(){}return e.value=new e,e}(),Z2=function(){function e(){}return e.value=new e,e}(),eH=function(){function e(){}return e.value=new e,e}();var Qw=function(e){return e==="loading"?new O(js.value):e==="interactive"?new O(Z2.value):e==="complete"?new O(eH.value):B.value};var rH=$(Ae);var Kw=j;var Xw=j;var Yw=function(e){return rH(function(){var t=pr(js.value);return function(n){return t(Qw(n))}}())(function(){return jw(e)})};function eT(e,t,n){var l=Object.prototype.toString.call(n);return l.indexOf("[object HTML")===0&&l.indexOf("Element]")===l.length-8?t(n):e}var tT=j;var Nm=function(e){return eT(B.value,O.create,e)};function lc(e){return function(){return e.document}}var oT=j;var Wm="DOMContentLoaded";var cT="change";var fT=Y(Wt),XH=Ve(mr),$m=Vt(Sn),YH=hf(Sn),lT=z(dn),ZH=Vt(Yr),eO=z(Rt),tO=$(Ae),rO=vt(mt),nO=br(Vu),aO=function(e){return fT(XH($m(YH(function(){var t=lS(e);return function(n){return t(Kw(n))}}())(lc))(eu)))(function(t){return lT(ZH(Nm)(t))})},_T=yl(kr(ro)(ge(eO(void 0)))),oO=oo(function(e){return function(){var n=$m(Yw)($m(lc)(eu))();if(n instanceof js){var l=tO(oT)(eu)(),p=Ls(function(r){return e(new Qe(void 0))})();return Xv(Wm)(p)(!1)(l)(),Wi(Yv(Wm)(p)(!1)(l))}return e(new Qe(void 0))(),Sb}}),pT=rO(Wt)(oO)(function(){return fT(aO("body"))(function(e){return je(nO(oa("Could not find body")))(lT)(e)})});var dT=Sm();var v_=function(){return function(e){var t=dT(e);return function(n){var l=t(n);return function(p){return function(r){return function(o){return function(c){return am(new oc(l(p)(r)(o)(c)(ge(B.value))))}}}}}}},m_=function(){return function(e){var t=dT(e);return function(n){var l=t(n);return function(p){return function(r){return function(o){return function(c){return function(f){return am(new oc(l(p)(r)(o)(c)(function(u){return O.create(f(u))})))}}}}}}}};var wO=function(e){return function(t){return im(e)(function(n){return new O(new qi(t(n)))})}};var qm=wO(cT);var Um=st(vr),vT=st(Yt);var EO={value:function(e){return e}},mT=Ft(EO),g_=Um("scroll"),D_=mT(vT("overflow-y"));var hT=Um("auto"),tu=mT(vT("overflow")),Qs=Um("hidden");var gT=function(e){return function(t){var n=e(t);return n.value1}};var Qn=function(){function e(){this.head=null,this.last=null,this.size=0}function t(v,h){this.queue=v,this.value=h,this.next=null,this.prev=null}function n(v){this.draining=!1,this.error=null,this.value=v,this.takes=new e,this.reads=new e,this.puts=new e}var l={};function p(v){try{v()}catch(h){setTimeout(function(){throw h},0)}}function r(v,h){var g=new t(v,h);switch(v.size){case 0:v.head=g;break;case 1:g.prev=v.head,v.head.next=g,v.last=g;break;default:g.prev=v.last,v.last.next=g,v.last=g}return v.size++,g}function o(v){var h;switch(v.size){case 0:return null;case 1:h=v.head,v.head=null;break;case 2:h=v.last,v.head.next=null,v.last=null;break;default:h=v.last,v.last=h.prev,v.last.next=null}return h.prev=null,h.queue=null,v.size--,h.value}function c(v){var h;switch(v.size){case 0:return null;case 1:h=v.head,v.head=null;break;case 2:h=v.head,v.last.prev=null,v.head=v.last,v.last=null;break;default:h=v.head,v.head=h.next,v.head.prev=null}return h.next=null,h.queue=null,v.size--,h.value}function f(v){if(v.queue!==null){if(v.queue.last===v){o(v.queue);return}if(v.queue.head===v){c(v.queue);return}v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),v.queue.size--,v.queue=null,v.value=null,v.next=null,v.prev=null}}function u(v,h){if(!h.draining){var g=h.puts,d=h.takes,a=h.reads,i,s,_,D,C;for(h.draining=!0;;){if(i=null,s=null,_=null,D=h.value,C=a.size,h.error!==null){for(D=v.left(h.error);i=c(g);)p(i.cb(D));for(;s=c(a);)p(s(D));for(;_=c(d);)p(_(D));break}if(D===l&&(i=c(g))&&(h.value=D=i.value),D!==l){for(_=c(d);C--&&(s=c(a));)p(s(v.right(D)));_!==null&&(h.value=l,p(_(v.right(D))))}if(i!==null&&p(i.cb(v.right(void 0))),h.value===l&&g.size===0||h.value!==l&&d.size===0)break}h.draining=!1}}return n.EMPTY=l,n.putLast=r,n.takeLast=o,n.takeHead=c,n.deleteCell=f,n.drainVar=u,n}();function zm(){return new Qn(Qn.EMPTY)}function DT(e){return function(){return new Qn(e)}}function CT(e,t,n,l){return function(){var p=Qn.putLast(n.puts,{cb:l,value:t});return Qn.drainVar(e,n),function(){Qn.deleteCell(p)}}}function yT(e,t,n){return function(){var l=Qn.putLast(t.takes,n);return Qn.drainVar(e,t),function(){Qn.deleteCell(l)}}}function bT(e,t){return function(){var n=t.value;return n===Qn.EMPTY?e.nothing:(t.value=Qn.EMPTY,Qn.drainVar(e,t),e.just(n))}}var ST=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),TT=function(){function e(){}return e.value=new e,e}(),ET=DT;var Gm=function(){return{left:tt.create,right:Qe.create,nothing:B.value,just:O.create,killed:ST.create,filled:wT.create,empty:TT.value}}();var MT=function(e){return function(t){return function(n){return CT(Gm,e,t,n)}}};var FT=function(e){return function(t){return yT(Gm,e,t)}};var LT=function(e){return bT(Gm,e)};var jm=Ve(mr),AT=function(e){return jm(LT(e))};var Qm=function(e){return oo(function(t){return function(){var l=FT(e)(t)();return Wi(l)}})};var Js=function(e){return function(t){return oo(function(n){return function(){var p=MT(e)(t)(n)();return Wi(p)}})}},xT=function(e){return jm(ET(e))};var Jm=jm(zm);var C_=function(e){return e};var IO=Ul(bt);var RT=It,ru=function(e){return Gi(IO(e))};var PT=yi;var RO=function(e){return function(t){return[new K(e,Gi(t))]}},mo=function(e){return C_(RO(e))},Ks=ir();var HT=e=>t=>()=>{let n=(l,p)=>{e(l)(p)()};return new IntersectionObserver(n,t)},Xm=e=>t=>()=>{e.observe(t)};var OT=function(e){return function(t){return HT(e)(ru(t))}};var kT=mo("root");var NT=e=>()=>{let t=(n,l)=>{e(n)(l)()};return new ResizeObserver(t)},Ym=e=>t=>()=>{e.observe(t)};var BT=function(e){return NT(e)};var Zm=$(pt),BO=v_()({reflectSymbol:function(){return"pageElement"}}),Xs=vt(mt)(Vr),WT=xr(sr),$T=z(Rr),ho=Y(Vr),WO=Un(sr),$O=_r(Rr),eh=wa(sr),qT=ft(on),qO=Bn(n_),UO=it(Rr)(Ot),UT=Gp(bt)(gp),VO=pe(ve),th=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zO=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ah=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),VT=function(){function e(){}return e.value=new e,e}(),zT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ys=function(e){return e.pageOrder},GO=function(e){return e.element},jO=function(){return Ht.value}(),jT=function(e){var t=e.PageOrder0(),n=t.Ord0(),l=BO(n),p=GO(e),r=Uc(n),o=Ys(t),c=od(n.Eq0()),f=Ve(jn(e.MonadAff1().MonadEffect0())),u=function(g){return Pr([uc("page"),Dn(tu(hT))])(Zm(function(d){return l(jO)(d)(p)(d)})(g.elements))},v=function(g){if(g instanceof th)return Xs(WT(function(d){var a={};for(var i in d)({}).hasOwnProperty.call(d,i)&&(a[i]=d[i]);return a.elements=r(zc(o)(g.value0)(d.elements)),a}))(function(){return $T(new O(g.value1))});if(g instanceof zO)return ho(WO(function(d){var a={};for(var i in d)({}).hasOwnProperty.call(d,i)&&(a[i]=d[i]);return a.elements=c(g.value0)(d.elements),a}))(function(d){return Xs($O(Li(d.elements))(Ia(new ah(d.id))))(function(){return $T(new O(g.value1))})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 89, column 5 - line 89, column 99): "+[g.constructor.name])},h=function(g){if(g instanceof VT){var d=function(_){return ho(eh(function(D){return D.parent}))(function(D){return ho(f(gr))(function(C){return Xs(qT(er(C.emitter)))(function(){return ho(f(OT(function(b){return function(T){return hr(C.listener)(new GT(b))}})(Ks(kT)(D))))(function(b){return f(Xm(b)(_))})})})})},a=function(_){return ho(f(gr))(function(D){return Xs(qT(er(D.emitter)))(function(){return ho(f(BT(function(C){return function(b){return hr(D.listener)(new zT(C))}})))(function(C){return f(Ym(C)(_))})})})},i=function(_){return qO(a(_))(d(_))};return ho(In("page"))(UO(i))}if(g instanceof zT)return ho(eh(function(_){return _.id}))(function(_){var D=UT(Zm(function(C){return C.contentRect.height})(g.value0));return Ia(new rh({id:_,height:D}))});if(g instanceof GT){var s=UT(Zm(function(_){return _.intersectionRect.height})(g.value0));return ho(eh(function(_){return _.id}))(function(_){return Xs(WT(function(D){var C={};for(var b in D)({}).hasOwnProperty.call(D,b)&&(C[b]=D[b]);return C.visibleHeight=s,C}))(function(){return Ia(new nh({id:_,height:s}))})})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 98, column 5 - line 98, column 81): "+[g.constructor.name])};return Pn({initialState:VO,render:u,eval:Rn({receive:Dr.receive,finalize:Dr.finalize,handleAction:h,handleQuery:v,initialize:new O(VT.value)})})};var QO=Tc(rt),JO=gu(rt),KO=kb(ra),XO=$(Vb),nu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ci=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),au=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),YO={append:function(e){return function(t){if(e instanceof ci)return new ci(e.value0);if(t instanceof ci)return new ci(t.value0);if(e instanceof nu&&t instanceof nu)return new nu(QO(e.value0)(t.value0));if(e instanceof au&&t instanceof au)return new au(JO(e.value0)(t.value0));if(e instanceof nu)return new ci(e.value0);if(e instanceof au)return new ci(e.value0);throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 19, column 1 - line 25, column 32): "+[e.constructor.name,t.constructor.name])}}},ZO=function(){return{mempty:new nu(Xn(Du)),Semigroup0:function(){return YO}}}(),e5=n0(ZO),JT=function(e){var t=Ys(e);return function(n){return function(l){var p=function(o){var c=new K(Fu(o.elements),Mu(o.elements));if(c.value0 instanceof O&&c.value1 instanceof O){var f=new K(t(n)(c.value0.value0),t(n)(c.value1.value0));return f.value0 instanceof te?new nu(o.id):f.value1 instanceof Z?new au(o.id):new ci(o.id)}return new au(o.id)},r=e5(KO(zb(XO(p)(l))));if(r instanceof nu||r instanceof au||r instanceof ci)return r.value0;throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 29, column 3 - line 32, column 18): "+[r.constructor.name])}}};var e1=vt(mt),si=e1(ov(Ga)),fi=xr(Mb(Ga)),KT=xn(rt),y_=Fa(rt),ou=z(iv(Ga)),XT=Ce(Cu(qa)),YT=$(lt),r5=Qu(rt),ZT=ju(ra),_c=e1(xa),pc=_r(Gn),dc=it(Gn)(Ot),b_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),S_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),w_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),T_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),E_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),M_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),F_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),n5={map:function(e){return function(t){if(t instanceof b_)return new b_(t.value0,e(t.value1));if(t instanceof S_)return new S_(t.value0,e(t.value1));if(t instanceof w_)return new w_(t.value0,e(t.value1));if(t instanceof T_)return new T_(t.value0,e(t.value1));if(t instanceof E_)return new E_(t.value0,e(t.value1));if(t instanceof M_)return new M_(t.value0,e(t.value1));if(t instanceof F_)return new F_(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 24, column 1 - line 31, column 68): "+[e.constructor.name,t.constructor.name])}}},a5=Aa(n5)(Eb(tC)),o5=function(e){return Lt(new F_(e,void 0))},i5=function(e){return Lt(new S_(e,void 0))},u5=function(e){return Lt(new b_(e,void 0))},c5=function(e){return Lt(new w_(e,void 0))},s5=function(e){return Lt(new T_(e,void 0))},t1=function(e){var t=function(n){if(n instanceof b_)return si(fi(function(p){var r={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(r[o]=p[o]);return r.pages=KT(n.value0.key)(n.value0.value)(p.pages),r.preloaded=y_(n.value0.key)(p.preloaded),r.update=function(){var c={};for(var f in p.update)({}).hasOwnProperty.call(p.update,f)&&(c[f]=p.update[f]);return c.scroll=new O(n.value0.value.pageHeight),c}(),r}))(function(){return ou(n.value1)});if(n instanceof S_)return si(fi(function(p){var r={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(r[o]=p[o]);return r.pages=y_(n.value0.key)(p.pages),r.preloaded=KT(n.value0.key)(n.value0.value)(p.preloaded),r.update=function(){var c={};for(var f in p.update)({}).hasOwnProperty.call(p.update,f)&&(c[f]=p.update[f]);return c.scroll=new O(-n.value0.value.pageHeight),c}(),r}))(function(){return ou(n.value1)});if(n instanceof w_)return si(fi(function(p){var r={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(r[o]=p[o]);return r.update=function(){var c=XT(YT(function(g){return g.key})(p.update.topLoad))(new O(n.value0.key));if(c){var f={};for(var u in p.update)({}).hasOwnProperty.call(p.update,u)&&(f[u]=p.update[u]);return f.topLoad=B.value,f}var v={};for(var h in p.update)({}).hasOwnProperty.call(p.update,h)&&(v[h]=p.update[h]);return v.topLoad=new O(n.value0),v}(),r}))(function(){return ou(n.value1)});if(n instanceof T_)return si(fi(function(p){var r={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(r[o]=p[o]);return r.preloaded=y_(n.value0.key)(p.preloaded),r.update=function(){var c={};for(var f in p.update)({}).hasOwnProperty.call(p.update,f)&&(c[f]=p.update[f]);return c.topLoad=B.value,c}(),r}))(function(){return ou(n.value1)});if(n instanceof E_)return si(fi(function(p){var r={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(r[o]=p[o]);return r.update=function(){var c=XT(YT(function(g){return g.key})(p.update.bottomLoad))(new O(n.value0.key));if(c){var f={};for(var u in p.update)({}).hasOwnProperty.call(p.update,u)&&(f[u]=p.update[u]);return f.bottomLoad=B.value,f}var v={};for(var h in p.update)({}).hasOwnProperty.call(p.update,h)&&(v[h]=p.update[h]);return v.bottomLoad=new O(n.value0),v}(),r}))(function(){return ou(n.value1)});if(n instanceof M_)return si(fi(function(p){var r={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(r[o]=p[o]);return r.pages=y_(n.value0.key)(p.pages),r.update=function(){var c={};for(var f in p.update)({}).hasOwnProperty.call(p.update,f)&&(c[f]=p.update[f]);return c.bottomLoad=B.value,c}(),r}))(function(){return ou(n.value1)});if(n instanceof F_){var l=function(p){if(p instanceof B)return B.value;if(p instanceof O)return new O(function(){var r={};for(var o in p.value0)({}).hasOwnProperty.call(p.value0,o)&&(r[o]=p.value0[o]);return r.visibleHeight=n.value0.height,r}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 102, column 11 - line 102, column 44): "+[p.constructor.name])};return si(fi(function(p){var r={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(r[o]=p[o]);return r.pages=r5(l)(n.value0.id)(p.pages),r}))(function(){return ou(n.value1)})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 61, column 5 - line 67, column 13): "+[n.constructor.name])};return si(fi(function(n){var l={};for(var p in n)({}).hasOwnProperty.call(n,p)&&(l[p]=n[p]);return l.update=function(){var r={};for(var o in n.update)({}).hasOwnProperty.call(n.update,o)&&(r[o]=n.update[o]);return r.scroll=B.value,r}(),l}))(function(){return a5(t)(e)})},f5=function(e){return Lt(new E_(e,void 0))},l5=function(e){return Lt(new M_(e,void 0))},r1=function(e){return function(t){var n=Gu(e.preloaded)>e.feedParams.preloadedPages,l=Gu(e.preloaded)<e.feedParams.preloadedPages,p=function(h){return h.value1.visibleHeight===0},r=Hr(jf(p)(vu(ZT(e.pages)))),o=r<e.feedParams.hiddenPages,c=r>e.feedParams.hiddenPages,f=Hr(jf(p)(ZT(e.pages))),u=f<e.feedParams.hiddenPages,v=f>e.feedParams.hiddenPages;return _c(o5(t))(function(){return _c(pc(e.feedParams.enableTop&&u)(dc(u5)(Qo(e.preloaded))))(function(){return _c(pc(e.feedParams.enableTop&&v)(dc(i5)(jo(e.pages))))(function(){return _c(pc(e.feedParams.enableTop&&l)(dc(c5)(jo(e.preloaded))))(function(){return _c(pc(e.feedParams.enableTop&&n)(dc(s5)(jo(e.preloaded))))(function(){return _c(pc(o)(dc(f5)(Qo(e.pages))))(function(){return pc(c)(dc(l5)(Qo(e.pages)))})})})})})})}};var g5=ft(on);var D5=oi();var Zs=function(){return function(e){var t=D5(e);return function(n){var l=t(n);return function(p){return function(r){return function(o){return g5(l(p)(r)(o(void 0)))}}}}}};var C5=vt(mt);var o1=function(e){var t=z(fc(e)),n=sc(e),l=Y(n),p=kw(e),r=C5(n),o=p_(e),c=function(f){return f===0?t(void 0):l(p)(function(u){return r(o(u))(function(){return c(f-1|0)})})};return c};var y5=function(e){var t=Y(e.Bind1()),n=z(e.Applicative0());return function(l){return function(p){return function(r){return function(o){var c=function(f){return function(u){if(f instanceof zr)return zs(f.value0);if(f instanceof Gr)return c(f.value1(void 0))(l(u)(f.value0));if(f instanceof jr)return t(f.value0)(function(v){return c(v)(u)});if(f instanceof Er)return n(r(u));throw new Error("Failed pattern match at Pipes.Prelude (line 202, column 14 - line 206, column 39): "+[f.constructor.name])}};return c(o)(p)}}}}};var i1=function(e){var t=function(l){return function(p){return function(r){return l(function(o){return new Ne(p,o)}(r))}}},n=function(l){return l(Oe.value)};return y5(e)(t)(pe(ve))(n)};var At=Y(Vr),oh=_r(Rr),S5=Bn(n_),mc=wa(sr),go=it(Rr)(Ot),vc=en(Xp)(Rr),li=z(Rr),uh=vt(mt),x_=_t(r_),ch=$(gv(pn)),sh=Vc(vn),fh=Tl(Ma),lh=i1(fh),_h=Hm(fh),ph=o1(fh),ef=$(on),On=uh(Vr),dh=du(Yr),l1=Ta(sr),ka=xr(sr),ih=xn(rt),_1=Fa(rt),u1=ft(on),w5=kt(Ns),T5=uh(Wt),E5=$(vm),L_=Qu(rt),M5=qb(rt),p1={reflectSymbol:function(){return"page"}},F5=Zs()(p1)(rt),L5=Un(sr),A5=it(Rt)(Ot),x5=m_()(p1)(rt),Hn=uh($o),c1=$(pt),s1=ju(ra),I5=yp(rt)(Sc),R5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),P5=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),d1=function(){function e(){}return e.value=new e,e}(),A_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),f1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),I_=function(e){return e.onElement},H5=function(e){var t=Tr(ii(e.MonadAff1()));return function(n){var l=function(p){return At(t(AT(p)))(function(r){return oh(Di(r))(S5(n)(t(Js(void 0)(p))))})};return At(mc(function(p){return p.lock}))(function(p){return go(l)(p)})}},O5=function(e){var t=Ve(jn(e.MonadAff1().MonadEffect0()));return function(n){if(n instanceof R5)return At(In("feed"))(function(l){return qe(vc)(l)(function(p){var r=function(o){return function(){var f=Ku(p)();return Ts(f+o)(p)()}};return li(n.value0(r))})});if(n instanceof P5)return At(In("feed"))(function(l){return qe(vc)(l)(function(p){return t(function(){var o=Ku(p)();return Ts(o+n.value0)(p)(),n.value1})})});if(n instanceof vh)return At(In("feed"))(function(l){return qe(vc)(l)(function(p){return t(function(){var o=Ku(p)();return n.value0(o)})})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 86, column 1 - line 88, column 93): "+[n.constructor.name])}},k5=function(e){return e.feedInsert};var v1=function(e){return e.feedBelow},N5=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),l=x_(n),p=v1(e),r=Tr(ii(t)),o=it(n.Applicative0())(bt),c=I_(e);return function(f){var u=At(mc(function(v){return v.feedParams.initialElement}))(function(v){return At(mc(function(h){return h.feedParams}))(function(h){return At(l(p(v)))(function(g){var d=ch(sh)(lh(_h(g)(ph(h.pageSize-1|0))));return ef(yr(v))(r(wl(d)))})})});return At(u)(function(v){return On(l(o(c)(v)))(function(){return li({id:0,elements:v,parent:f,pageHeight:0,visibleHeight:0})})})}},B5=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),l=x_(n),p=v1(e),r=Tr(ii(t)),o=it(n.Applicative0())(bt),c=I_(e);return function(f){return function(u){var v=function(h){return At(mc(function(g){return g.feedParams}))(function(g){return At(l(p(h)))(function(d){var a=ch(sh)(lh(_h(d)(ph(g.pageSize))));return At(r(wl(a)))(function(i){return On(l(o(c)(i)))(function(){var s=Li(i);return li(s?B.value:new O({id:u.id+1|0,elements:i,parent:f,pageHeight:0,visibleHeight:0}))})})})})};return ef(dh)(vc(v)(Mu(u.elements)))}}},W5=function(e){return e.feedAbove},m1=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),l=x_(n),p=W5(e),r=Tr(ii(t)),o=it(n.Applicative0())(bt),c=I_(e);return function(f){return function(u){var v=function(h){return At(mc(function(g){return g.feedParams}))(function(g){return At(l(p(h)))(function(d){var a=ch(sh)(lh(_h(d)(ph(g.pageSize))));return At(ef(vu)(r(wl(a))))(function(i){return On(l(o(c)(i)))(function(){var s=Li(i);return li(s?B.value:new O({id:u.id-1|0,elements:i,parent:f,pageHeight:0,visibleHeight:0}))})})})})};return ef(dh)(vc(v)(Fu(u.elements)))}}},$5=function(e){var t=m1(e);return function(n){return At(l1)(function(l){var p=Gu(l.preloaded)>l.feedParams.preloadedPages,r=Gu(l.preloaded)<l.feedParams.preloadedPages;return On(oh(r)(function(){var o=je(jo(l.pages))(O.create)(jo(l.preloaded));return At(ef(dh)(vc(function(c){return t(n)(c.value)})(o)))(function(c){return go(function(f){return ka(function(u){var v={};for(var h in u)({}).hasOwnProperty.call(u,h)&&(v[h]=u[h]);return v.preloaded=ih(f.id)(f)(u.preloaded),v})})(c)})}()))(function(){return oh(p)(ka(function(o){var c={};for(var f in o)({}).hasOwnProperty.call(o,f)&&(c[f]=o[f]);return c.preloaded=je(o.preloaded)(function(u){return _1(u.key)(o.preloaded)})(jo(o.preloaded)),c}))})})}},h1=function(e){return{initialElement:e,pageSize:10,hiddenPages:3,preloadedPages:3,enableTop:!1,preloadMillis:333.3}},g1=function(){return Ht.value}(),q5=function(e){var t=$5(e),n=N5(e),l=e.MonadAff1(),p=Tr(ii(l)),r=l.MonadEffect0(),o=x_(r.Monad0()),c=k5(e),f=e.PageElement0().PageOrder0(),u=Uc(f.Ord0()),v=Ys(f),h=I_(e),g=JT(f),d=H5(e),a=Ve(jn(r)),i=m1(e),s=B5(e);return function(_){if(_ instanceof d1){var D=function(M){return function(S){return function(w){var L=w>=M.preloadedPages;return L?li(new ht(w)):On(t(S))(function(){return li(new dt(w+1|0))})}}},C=function(M){return At(n(M))(function(S){return On(ka(function(w){var L={};for(var I in w)({}).hasOwnProperty.call(w,I)&&(L[I]=w[I]);return L.pages=vs(0)(S),L}))(function(){return At(mc(function(w){return w.feedParams}))(function(w){return On(u1(w5(D(w)(M))(0)))(function(){return At(p(T5(vb(w.preloadMillis))(function(){return xT(void 0)})))(function(L){return ka(function(I){var R={};for(var P in I)({}).hasOwnProperty.call(I,P)&&(R[P]=I[P]);return R.lock=new O(L),R})})})})})})};return On(At(In("feed"))(go(C)))(function(){return At(o(c))(function(M){return go(function(S){return u1(er(E5(f1.create)(S)))})(M)})})}if(_ instanceof f1){var b=function(M){if(M instanceof B)return B.value;if(M instanceof O)return new O(function(){var S={};for(var w in M.value0)({}).hasOwnProperty.call(M.value0,w)&&(S[w]=M.value0[w]);return S.elements=u(zc(v)(_.value0)(M.value0.elements)),S}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 152, column 5 - line 152, column 33): "+[M.constructor.name])},T=function(M){return function(S){var w={};for(var L in S)({}).hasOwnProperty.call(S,L)&&(w[L]=S[L]);return w.pages=L_(b)(M)(S.pages),w.preloaded=L_(b)(M)(S.preloaded),w}};return At(l1)(function(M){return On(o(h(_.value0)))(function(){var S=g(_.value0)(M5(M.preloaded)(M.pages));return On(ka(T(S)))(function(){return F5(g1)(S)(th.create(_.value0))})})})}if(_ instanceof A_&&_.value0 instanceof rh){var m=function(M){if(M instanceof B)return B.value;if(M instanceof O)return new O(function(){var S={};for(var w in M.value0)({}).hasOwnProperty.call(M.value0,w)&&(S[w]=M.value0[w]);return S.pageHeight=_.value0.value0.height,S}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 161, column 5 - line 161, column 32): "+[M.constructor.name])},y=function(M){var S={};for(var w in M)({}).hasOwnProperty.call(M,w)&&(S[w]=M[w]);return S.pages=L_(m)(_.value0.value0.id)(M.pages),S.preloaded=L_(m)(_.value0.value0.id)(M.preloaded),S};return ka(y)}if(_ instanceof A_&&_.value0 instanceof nh)return d(At(In("feed"))(function(M){return qe(go)(M)(function(S){return At(L5(function(w){return gT(t1(r1(w)(_.value0.value0)))(w)}))(function(w){return At(a(Ku(S)))(function(L){return On(a(A5(function(I){return Ts(L+I)(S)})(w.update.scroll)))(function(){return On(ka(function(I){var R={};for(var P in I)({}).hasOwnProperty.call(I,P)&&(R[P]=I[P]);return R.update={topLoad:B.value,bottomLoad:B.value,scroll:B.value},R}))(function(){return On(qe(go)(w.update.topLoad)(function(I){return At(i(S)(I.value))(function(R){return go(function(P){return ka(function(W){var E={};for(var A in W)({}).hasOwnProperty.call(W,A)&&(E[A]=W[A]);return E.preloaded=ih(P.id)(P)(w.preloaded),E})})(R)})}))(function(){return qe(go)(w.update.bottomLoad)(function(I){return At(s(S)(I.value))(function(R){return go(function(P){return ka(function(W){var E={};for(var A in W)({}).hasOwnProperty.call(W,A)&&(E[A]=W[A]);return E.pages=ih(P.id)(P)(W.pages),E})})(R)})})})})})})})})}));if(_ instanceof A_&&_.value0 instanceof ah)return ka(function(M){var S={};for(var w in M)({}).hasOwnProperty.call(M,w)&&(S[w]=M[w]);return S.pages=_1(_.value0.value0)(M.pages),S});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 116, column 1 - line 118, column 87): "+[_.constructor.name])}},U5=function(e){var t=jT(e.PageElement0());return function(n){var l=function(f){return x5(g1)(f.value0)(t)(f.value1)(A_.create)},p=Pr([uc("feed"),Dn(Hn(Nd(Xe(-50)))(function(){return Hn(kd(Xe(50)))(function(){return Hn(ca(Iu(100)))(function(){return D_(g_)})})}))])(c1(l)(s1(n.pages))),r=Pr([Dn(Hn(Nd(Xe(-50)))(function(){return Hn(kd(Xe(50)))(function(){return Hn(ca(Iu(100)))(function(){return Hn(Ln(-1))(function(){return Hn(Sr(qo))(function(){return Vn(Iu(-100))})})})})}))])([]),o=function(f){return Pr([Dn(Hn(Ln(-2-I5(f.value0)|0))(function(){return Hn(fl(0))(function(){return Sr(qo)})}))])([l(f)])},c=Pr([Dn(Hn(Ln(-2))(function(){return Sr(qo)}))])(c1(o)(s1(n.preloaded)));return Pr([Dn(Hn(no(Iu(100)))(function(){return Hn(ca(Iu(100)))(function(){return tu(Qs)})}))])([p,r,c])}},D1=function(e){return function(t){return Pn({initialState:function(n){return{feedParams:n,pages:Ur,preloaded:Ur,lock:B.value,update:{topLoad:B.value,bottomLoad:B.value,scroll:B.value}}},render:U5(t),eval:Rn({receive:Dr.receive,finalize:Dr.finalize,handleAction:q5(t),handleQuery:O5(t),initialize:new O(d1.value)})})}};var z5=$(Qi);var C1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var tf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),R_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),P_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),H_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),O_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),k_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),N_=function(){function e(t,n,l){this.value0=t,this.value1=n,this.value2=l}return e.create=function(t){return function(n){return function(l){return new e(t,n,l)}}},e}(),B_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),W_=function(){function e(t,n,l){this.value0=t,this.value1=n,this.value2=l}return e.create=function(t){return function(n){return function(l){return new e(t,n,l)}}},e}(),G5=function(e){return e};var mh=mu,rf=rt;var y1=function(e){var t=$(e);return{map:function(n){return function(l){if(l instanceof tf)return new tf(z5(n)(l.value0));if(l instanceof R_)return new R_(t(n)(l.value0));if(l instanceof P_)return new P_(function(p){return n(l.value0(p))});if(l instanceof H_)return new H_(l.value0,n(l.value1));if(l instanceof O_)return new O_(l.value0,n(l.value1));if(l instanceof k_)return new k_(l.value0,n(l.value1));if(l instanceof N_)return new N_(l.value0,l.value1,function(p){return n(l.value2(p))});if(l instanceof B_)return new B_(l.value0,n(l.value1));if(l instanceof W_)return new W_(l.value0,l.value1,n(l.value2));throw new Error("Failed pattern match at Halogen.Shell.Free (line 34, column 1 - line 43, column 38): "+[n.constructor.name,l.constructor.name])}}}};var b1=Gn,hh=function(e){return G5(Lt(tf.create(e)))};var J5=st(Yt),K5=Ft(Lo);var gh=K5(J5("background-color"));var Dt=st(vr),w1=function(){function e(){}return e.value=new e,e}(),Y5=function(){function e(){}return e.value=new e,e}(),T1=function(){function e(){}return e.value=new e,e}(),Z5=function(){function e(){}return e.value=new e,e}(),ek=function(){function e(){}return e.value=new e,e}(),tk=function(){function e(){}return e.value=new e,e}(),E1=function(){function e(){}return e.value=new e,e}(),Dh=function(){function e(){}return e.value=new e,e}(),rk=function(){function e(){}return e.value=new e,e}(),nk=function(){function e(){}return e.value=new e,e}(),ak=function(){function e(){}return e.value=new e,e}(),ok=function(){function e(){}return e.value=new e,e}(),ik=function(){function e(){}return e.value=new e,e}(),uk=function(){function e(){}return e.value=new e,e}(),ck=function(){function e(){}return e.value=new e,e}(),sk=function(){function e(){}return e.value=new e,e}(),fk=function(){function e(){}return e.value=new e,e}(),lk=function(){function e(){}return e.value=new e,e}(),_k=function(){function e(){}return e.value=new e,e}(),pk=function(){function e(){}return e.value=new e,e}(),dk=function(){function e(){}return e.value=new e,e}(),vk=function(){function e(){}return e.value=new e,e}(),mk=function(){function e(){}return e.value=new e,e}(),hk=function(){function e(){}return e.value=new e,e}(),gk=function(){function e(){}return e.value=new e,e}(),Dk=function(){function e(){}return e.value=new e,e}(),Ck=function(){function e(){}return e.value=new e,e}(),yk=function(){function e(){}return e.value=new e,e}(),bk=function(){function e(){}return e.value=new e,e}(),Sk=function(){function e(){}return e.value=new e,e}(),wk=function(){function e(){}return e.value=new e,e}(),Tk=function(){function e(){}return e.value=new e,e}(),Ek=function(){function e(){}return e.value=new e,e}();var Mk={value:function(e){if(e instanceof w1)return Dt("default");if(e instanceof Y5)return Dt("help");if(e instanceof T1)return Dt("pointer");if(e instanceof Z5)return Dt("progress");if(e instanceof ek)return Dt("wait");if(e instanceof tk)return Dt("cell");if(e instanceof E1)return Dt("crosshair");if(e instanceof Dh)return Dt("text");if(e instanceof rk)return Dt("vertical-text");if(e instanceof nk)return Dt("alias");if(e instanceof ak)return Dt("copy");if(e instanceof ok)return Dt("move");if(e instanceof ik)return Dt("no-drop");if(e instanceof uk)return Dt("not-allowed");if(e instanceof ck)return Dt("grab");if(e instanceof sk)return Dt("grabbing");if(e instanceof fk)return Dt("all-scroll");if(e instanceof lk)return Dt("col-resize");if(e instanceof _k)return Dt("row-resize");if(e instanceof pk)return Dt("n-resize");if(e instanceof dk)return Dt("e-resize");if(e instanceof vk)return Dt("s-resize");if(e instanceof mk)return Dt("w-resize");if(e instanceof hk)return Dt("ne-resize");if(e instanceof gk)return Dt("nw-resize");if(e instanceof Dk)return Dt("se-resize");if(e instanceof Ck)return Dt("sw-resize");if(e instanceof yk)return Dt("ew-resize");if(e instanceof bk)return Dt("ns-resize");if(e instanceof Sk)return Dt("nesw-resize");if(e instanceof wk)return Dt("nwse-resize");if(e instanceof Tk)return Dt("zoom-in");if(e instanceof Ek)return Dt("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var Ch=function(){return T1.value}();var yh=function(){return w1.value}(),iu=Ft(Mk)(st(Yt)("cursor")),M1=function(){return E1.value}();var Lk=st(Yt);var F1=Ft(Lo)(Lk("color"));var bh=st(vr),xk=st(Yt);var Ik={value:function(e){return e}},L1=bh("underline"),$_=Ft(Ik)(xk("text-decoration")),A1=bh("overline");var x1=bh("line-through");var ie=vt(mt)($o),tr=Ft(Ao),Kt=st(Yt),Pk=Pd(Ao),Hk=se(xu),Ok=st(tl),kk=Ft(Ii),I1=function(){var e=Ge(St)(Ze("xterm")),t=Ge(St)(Ze("xterm-viewport")),n=ie(ut(Ge(St)(Ze("xterm-underline-1")))($_(L1)))(function(){return ie(ut(Ge(St)(Ze("xterm-underline-2")))(tr(Kt("text-decoration"))("double underline")))(function(){return ie(ut(Ge(St)(Ze("xterm-underline-3")))(tr(Kt("text-decoration"))("wavy underline")))(function(){return ie(ut(Ge(St)(Ze("xterm-underline-4")))(tr(Kt("text-decoration"))("dotted underline")))(function(){return ut(Ge(St)(Ze("xterm-underline-5")))(tr(Kt("text-decoration"))("dashed underline"))})})})}),l=Ge(St)(Ze("xterm-scroll-area")),p=Ge(St)(Ze("xterm-screen")),r=Ge(St)(Ze("xterm-decoration-overview-ruler")),o=ie(ut(Ge(St)(Ze("xterm-overline")))($_(A1)))(function(){return ie(ut(Ge(Ge(St)(Ze("xterm-underline-1")))(Ze("xterm-overline")))(tr(Kt("text-decoration"))("overline underline")))(function(){return ie(ut(Ge(Ge(St)(Ze("xterm-underline-2")))(Ze("xterm-overline")))(tr(Kt("text-decoration"))("overline double underline")))(function(){return ie(ut(Ge(Ge(St)(Ze("xterm-underline-3")))(Ze("xterm-overline")))(tr(Kt("text-decoration"))("overline wavy underline")))(function(){return ie(ut(Ge(Ge(St)(Ze("xterm-underline-4")))(Ze("xterm-overline")))(tr(Kt("text-decoration"))("overline dotted underline")))(function(){return ut(Ge(Ge(St)(Ze("xterm-underline-5")))(Ze("xterm-overline")))(tr(Kt("text-decoration"))("overline dashed underline"))})})})})}),c=Ge(St)(Ze("xterm-message")),f=Ge(St)(Ze("live-region")),u=Ge(St)(Ze("xterm-helper-textarea")),v=Ge(St)(Ze("xterm-helpers")),h=Ge(St)(Ze("xterm-dim")),g=Ge(St)(Ze("xterm-decoration-top")),d=Ge(St)(Ze("xterm-decoration-container")),a=Ge(St)(Ze("xterm-decoration")),i=Ge(St)(Ze("composition-view")),s=Ge(St)(Ze("xterm-char-measure-element")),_=ie(Sr(ua))(function(){return ie(ao(Xe(0)))(function(){return ie(Vn(Xe(0)))(function(){return ie(Bd(Xe(0)))(function(){return ie(ll(Xe(0)))(function(){return ie(Ln(10))(function(){return ie(tr(Kt("color"))("transparent"))(function(){return tr(Kt("pointer-events"))("none")})})})})})})}),D=Ge(St)(Ze("xterm-accessibility"));return ie(ut(e)(ie(iu(Dh.value))(function(){return ie(Sr(qo))(function(){return Pk(Hk(Yc)(Ok("user-select")))("none")})})))(function(){return ie(ut(Ge(e)(Ze("focus")))(tr(Kt("outline"))("none")))(function(){return ie(ut(Ge(e)($0("focus")))(tr(Kt("outline"))("none")))(function(){return ie(ut(Zt(e)(v))(ie(Sr(ua))(function(){return ie(Vn(Xe(0)))(function(){return Ln(5)})})))(function(){return ie(ut(Zt(e)(u))(ie(my(Xe(0))(Xe(0))(Xe(0))(Xe(0)))(function(){return ie(kk(Kt("border"))(0))(function(){return ie(hy(Xe(0))(Xe(0))(Xe(0))(Xe(0)))(function(){return ie(Sr(ua))(function(){return ie(fl(0))(function(){return ie(ao(bd(-9999)))(function(){return ie(Vn(Xe(0)))(function(){return ie(no(Xe(0)))(function(){return ie(ca(Xe(0)))(function(){return ie(Ln(-5))(function(){return ie(tr(Kt("whitespace"))("nowrap"))(function(){return ie(tu(Qs))(function(){return tr(Kt("resize"))("none")})})})})})})})})})})})})))(function(){return ie(ut(Zt(e)(i))(ie(gh(xi))(function(){return ie(F1(M0))(function(){return ie(Nu(fy))(function(){return ie(Sr(ua))(function(){return ie(tr(Kt("white-space"))("nowrap"))(function(){return Ln(1)})})})})})))(function(){return ie(ut(Zt(e)(Ge(i)(Ze("active"))))(Nu(ly)))(function(){return ie(ut(Zt(e)(t))(ie(gh(xi))(function(){return ie(D_(g_))(function(){return ie(iu(yh))(function(){return ie(Sr(ua))(function(){return ie(ll(Xe(0)))(function(){return ie(ao(Xe(0)))(function(){return ie(Vn(Xe(0)))(function(){return Bd(Xe(0))})})})})})})})))(function(){return ie(ut(Zt(e)(p))(Sr(qo)))(function(){return ie(ut(Zt(e)(Zt(p)(al("canvas"))))(ie(Sr(ua))(function(){return ie(ao(Xe(0)))(function(){return Vn(Xe(0))})})))(function(){return ie(ut(Zt(e)(l))(tr(Kt("visibility"))("hidden")))(function(){return ie(ut(s)(ie(Nu(cy))(function(){return ie(tr(Kt("visibility"))("hidden"))(function(){return ie(Sr(ua))(function(){return ie(Vn(Xe(0)))(function(){return ie(ao(bd(-9999)))(function(){return tr(Kt("line-height"))("normal")})})})})})))(function(){return ie(ut(Ge(e)(Ze("enable-mouse-events")))(iu(yh)))(function(){return ie(ut(Ge(e)(Ze("xterm-cursor-pointer")))(iu(Ch)))(function(){return ie(ut(Zt(e)(Ge(St)(Ze("xterm-cursor-pointer"))))(iu(Ch)))(function(){return ie(ut(Ge(Ge(e)(Ze("column-select")))(Ze("focus")))(iu(M1)))(function(){return ie(ut(Zt(e)(D))(_))(function(){return ie(ut(Zt(e)(c))(_))(function(){return ie(ut(Zt(e)(f))(ie(Sr(ua))(function(){return ie(ao(Xe(-9999)))(function(){return ie(no(Xe(1)))(function(){return ie(ca(Xe(1)))(function(){return tu(Qs)})})})})))(function(){return ie(ut(h)(tr(Kt("opacity"))("1 !important")))(function(){return ie(n)(function(){return ie(o)(function(){return ie(ut(Ge(St)(Ze("xterm-strikethrough")))($_(x1)))(function(){return ie(ut(Zt(Zt(p)(d))(a))(ie(Ln(6))(function(){return Sr(ua)})))(function(){return ie(ut(Zt(Zt(p)(d))(Ge(a)(Ze("xterm-decoration-top-layer"))))(Ln(7)))(function(){return ie(ut(r)(ie(Ln(8))(function(){return ie(Sr(ua))(function(){return ie(Vn(Xe(0)))(function(){return ie(ll(Xe(0)))(function(){return tr(Kt("pointer-events"))("none")})})})})))(function(){return ut(g)(ie(Ln(2))(function(){return Sr(qo)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var R1=e=>()=>e.type,Sh=e=>()=>e.cursorY,wh=e=>()=>e.cursorX,Th=e=>()=>e.viewportY,Eh=e=>()=>e.baseY,Mh=e=>()=>e.length,P1=e=>t=>()=>e.getLine(t),Fh=e=>()=>e.getNullCell();var hc=function(e){return Fs(e)?B.value:new O(jv(e))};var Wk=$(Ae),$k=function(){function e(){}return e.value=new e,e}(),qk=function(){function e(){}return e.value=new e,e}(),H1=function(e){return function(t){return Wk(hc)(P1(e)(t))}},O1=function(e){return function(){var n=R1(e)();return n==="normal"?$k.value:qk.value}};var Ah=e=>()=>e.isWrapped,xh=e=>()=>e.length;var Na=$(Ae),Ih=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ph=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Oh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$h=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gk={map:function(e){return function(t){if(t instanceof Ih)return new Ih(function(n){return e(t.value0(n))});if(t instanceof Rh)return new Rh(function(n){return e(t.value0(n))});if(t instanceof Ph)return new Ph(function(n){return e(t.value0(n))});if(t instanceof Hh)return new Hh(function(n){return e(t.value0(n))});if(t instanceof Oh)return new Oh(function(n){return e(t.value0(n))});if(t instanceof kh)return new kh(function(n){return e(t.value0(n))});if(t instanceof Nh)return new Nh(t.value0,function(n){return e(t.value1(n))});if(t instanceof Bh)return new Bh(t.value0,function(n){return e(t.value1(n))});if(t instanceof Wh)return new Wh(t.value0,function(n){return e(t.value1(n))});if(t instanceof $h)return new $h(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.Buffer.Free (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},jk=Aa(Gk);var k1=function(e){var t=e.Monad0(),n=Y(Oi(t.Bind1())),l=nn(Wu(t)),p=Ve(zo(e));return function(r){var o=function(c){if(c instanceof Ih)return n(l)(function(f){return p(Na(c.value0)(O1(f)))});if(c instanceof Rh)return n(l)(function(f){return p(Na(c.value0)(wh(f)))});if(c instanceof Ph)return n(l)(function(f){return p(Na(c.value0)(Sh(f)))});if(c instanceof Hh)return n(l)(function(f){return p(Na(c.value0)(Th(f)))});if(c instanceof Oh)return n(l)(function(f){return p(Na(c.value0)(Eh(f)))});if(c instanceof kh)return n(l)(function(f){return p(Na(c.value0)(Mh(f)))});if(c instanceof Nh)return n(l)(function(f){return p(Na(c.value1)(H1(f)(c.value0)))});if(c instanceof Bh)return p(Na(c.value1)(Ah(c.value0)));if(c instanceof Wh)return p(Na(c.value1)(xh(c.value0)));if(c instanceof $h)return n(l)(function(f){return p(Na(c.value0)(Fh(f)))});throw new Error("Failed pattern match at Halogen.Buffer.Free (line 19, column 5 - line 21, column 40): "+[c.constructor.name])};return jk($u(r))(o)}};var qh=e=>()=>e.cursorBlink,Uh=e=>t=>()=>e.cursorBlink=t,Vh=e=>()=>e.fontFamily,zh=e=>t=>()=>e.fontFamily=t;var N1=mo("fontFamily");var B1=mo("cursorBlink");var $1=$(Ae),tN=vt(mt);var Gh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Qh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rN={map:function(e){return function(t){if(t instanceof Gh)return new Gh(function(n){return e(t.value0(n))});if(t instanceof jh)return new jh(t.value0,e(t.value1));if(t instanceof Qh)return new Qh(function(n){return e(t.value0(n))});if(t instanceof Jh)return new Jh(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Terminal.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},nN=Aa(rN);var q1=function(e){var t=e.Monad0(),n=Oi(t.Bind1()),l=Y(n),p=nn(Wu(t)),r=Ve(zo(e)),o=tN(n),c=z(Qd(t.Applicative0()));return function(f){var u=function(v){if(v instanceof Gh)return l(p)(function(h){return r($1(v.value0)(qh(h)))});if(v instanceof jh)return l(p)(function(h){return o(r(Uh(h)(v.value0)))(function(){return c(v.value1)})});if(v instanceof Qh)return l(p)(function(h){return r($1(v.value0)(Vh(h)))});if(v instanceof Jh)return l(p)(function(h){return o(r(zh(h)(v.value0)))(function(){return c(v.value1)})});throw new Error("Failed pattern match at Halogen.Terminal.Free.Options (line 19, column 5 - line 21, column 49): "+[v.constructor.name])};return nN($u(f))(u)}};var V1=pf(U1(),1),U_=()=>new V1.FitAddon;var G1=pf(z1(),1),z_=()=>new G1.WebglAddon;var Q1=pf(j1(),1),j_=()=>new Q1.WebLinksAddon;var J1={addon:j},K1={addon:j},X1={addon:pe(ve)};var Q_=function(e){return e.addon};var Zh=e=>e.active,eg=e=>e.normal,tg=e=>e.alternate;var tE=pf(eE(),1),rE=e=>t=>()=>new tE.Terminal(e,t),nE=e=>()=>e.element,aE=e=>()=>e.textarea,ng=e=>()=>e.rows,ag=e=>()=>e.cols,nf=e=>e.buffer,og=e=>()=>e.markers;var ig=e=>e.options,ug=e=>t=>()=>e.onBell(t),cg=e=>t=>()=>e.onBinary(n=>t(n)());var sg=e=>t=>()=>e.onData(n=>t(n)()),fg=e=>t=>()=>e.onKey(n=>t(n)()),lg=e=>t=>()=>e.onLineFeed(t),_g=e=>t=>()=>e.onRender(n=>t(n)()),pg=e=>t=>()=>e.onWriteParsed(t),dg=e=>t=>()=>e.onResize(n=>t(n)()),vg=e=>t=>()=>e.onScroll(n=>t(n)()),mg=e=>t=>()=>e.onSelectionChange(t),hg=e=>t=>()=>e.onTitleChange(n=>t(n)());var gg=e=>t=>()=>e.open(t);var Dg=e=>t=>n=>()=>e.write(t,n),Cg=e=>t=>n=>()=>e.writeln(t,n);var oE=e=>t=>()=>e.loadAddon(t);var iE=$(Ae);var uE=function(){var e=iE(hc);return function(t){return e(aE(t))}}();var cE=function(e){return function(t){return rE(ru(e))(ru(t))}},sE=function(e){var t=Q_(e);return function(n){return function(l){return oE(n)(t(l))}}};var fE=function(){var e=iE(hc);return function(t){return e(nE(t))}}();var K_=$(Qi),Pg=pe(ve),Do=$(Ae),bg=k1(il)(Ff),_E=vt(mt),X_=rs(V0),CN=sE(X1),Y_=Y(xa),Sg=_E(xa),gc=_r(Gn),wg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Tg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Eg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ag=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ig=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Z_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ep=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),np=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yN={map:function(e){return function(t){if(t instanceof wg)return new wg(K_(e)(t.value0));if(t instanceof Tg)return new Tg(function(n){return e(t.value0(n))});if(t instanceof Eg)return new Eg(function(n){return e(t.value0(n))});if(t instanceof Mg)return new Mg(function(n){return e(t.value0(n))});if(t instanceof Fg)return new Fg(function(n){return e(t.value0(n))});if(t instanceof Lg)return new Lg(K_(e)(t.value0));if(t instanceof Ag)return new Ag(K_(e)(t.value0));if(t instanceof xg)return new xg(K_(e)(t.value0));if(t instanceof Ig)return new Ig(function(n){return e(t.value0(n))});if(t instanceof Z_)return new Z_(t.value0,e(t.value1));if(t instanceof ep)return new ep(t.value0,e(t.value1));if(t instanceof Rg)return new Rg(function(n){return e(t.value0(n))});if(t instanceof tp)return new tp(function(n){return e(t.value0(n))});if(t instanceof rp)return new rp(function(n){return e(t.value0(n))});if(t instanceof np)return new np(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},bN=Aa(yN),_i=function(e){return Lt(new ep(e,void 0))},lE=function(e){return Lt(new Z_(e,void 0))};var SN=function(){return Lt(new tp(Pg))}(),wN=function(){return Lt(new rp(Pg))}();var pE=function(e){var t=e.MonadEffect0(),n=t.Monad0(),l=Oi(n.Bind1()),p=Y(l),r=nn(Wu(n)),o=zo(t),c=q1(o),f=Ve(o),u=Tr(Fb(e)),v=_E(l);return function(h){var g=$u(h),d=c(g),a=function(i){if(i instanceof wg)return p(r)(function(s){return Vo(d(i.value0))(ig(s))});if(i instanceof Tg)return p(r)(function(s){return f(Do(i.value0)(fE(s)))});if(i instanceof Eg)return p(r)(function(s){return f(Do(i.value0)(uE(s)))});if(i instanceof Mg)return p(r)(function(s){return f(Do(i.value0)(ng(s)))});if(i instanceof Fg)return p(r)(function(s){return f(Do(i.value0)(ag(s)))});if(i instanceof Lg)return p(r)(function(s){return f(Vo(bg(i.value0))(Zh(nf(s))))});if(i instanceof Ag)return p(r)(function(s){return f(Vo(bg(i.value0))(eg(nf(s))))});if(i instanceof xg)return p(r)(function(s){return f(Vo(bg(i.value0))(tg(nf(s))))});if(i instanceof Ig)return p(r)(function(s){return f(Do(i.value0)(og(s)))});if(i instanceof Z_)return p(r)(function(s){return p(u(Jm))(function(_){return v(f(Dg(s)(i.value0)(Zd(Js(i.value1)(_)))))(function(){return u(Qm(_))})})});if(i instanceof ep)return p(r)(function(s){return p(u(Jm))(function(_){return v(f(Cg(s)(i.value0)(Zd(Js(i.value1)(_)))))(function(){return u(Qm(_))})})});if(i instanceof Rg)return f(Do(function(s){return i.value0(Sf(s))})(X_(U_)));if(i instanceof tp)return f(Do(function(s){return i.value0(Sf(s))})(X_(j_)));if(i instanceof rp)return f(Do(function(s){return i.value0(Sf(s))})(X_(z_)));if(i instanceof np)return p(r)(function(s){return f(Do(function(_){return i.value1(qD(_))})(X_(CN(s)(i.value0))))});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 32, column 5 - line 34, column 55): "+[i.constructor.name])};return bN(g)(a)}};var dE=function(e){var t=Q_(e);return function(n){return Lt(new np(t(n),Pg))}},TN=dE(K1),EN=dE(J1),vE=function(e){return Y_(wN)(function(t){return Sg(function(){if(t instanceof B)return gc(e)(_i("WebGL Addon unavailable"));if(t instanceof O)return Sg(gc(e)(lE("Loading WebGL ")))(function(){return Y_(TN(t.value0))(function(n){return gc(e)(function(){return _i(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return Y_(SN)(function(n){if(n instanceof B)return gc(e)(_i("WebLinks Addon unavailable"));if(n instanceof O)return Sg(gc(e)(lE("Loading WebLinks ")))(function(){return Y_(EN(n.value0))(function(l){return gc(e)(function(){return _i(l?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var hE=e=>()=>e.dispose();var gE={toDisposable:pe(ve)},FN=function(e){return e.toDisposable},DE=function(e){return{dispose:function(){var t=FN(e);return function(n){return hE(t(n))}}()}},CE=function(e){return e.dispose};var ct=Y(Vr),Hg=Ta(sr),AN=$(pn),xN=pE(_s)(zu),fa=xr(sr),la=vt(mt)(Vr),IN=it(Rt)(bt),RN=CE(DE(gE)),PN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),HN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ON=function(){function e(){}return e.value=new e,e}(),kN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),NN=function(){function e(){}return e.value=new e,e}(),BN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),WN=function(){function e(){}return e.value=new e,e}(),$N=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),UN=function(){function e(){}return e.value=new e,e}(),VN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yE=function(){function e(){}return e.value=new e,e}(),bE=function(){function e(){}return e.value=new e,e}(),Jn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zN=function(e){return function(t){return Ha([Iw(I1),Pr([uc("terminal")])([])])}},GN=function(e){var t=Tr(ii(e));return function(n){return ct(Hg)(function(l){return t(AN(O.create)(Vo(xN(n))(l.terminal)))})}},jN=function(e){var t=Ve(jn(e.MonadEffect0())),n=function(d){return ct(t(gr))(function(a){return ct(t(pg(d)(hr(a.listener)(new Jn(WN.value)))))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})},l=function(d){return ct(t(gr))(function(a){return ct(t(hg(d)(function(){var i=hr(a.listener);return function(s){return i(Jn.create(VN.create(s)))}}())))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})},p=function(d){return ct(t(gr))(function(a){return ct(t(mg(d)(hr(a.listener)(new Jn(UN.value)))))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})},r=function(d){return ct(t(gr))(function(a){return ct(t(vg(d)(function(){var i=hr(a.listener);return function(s){return i(Jn.create(qN.create(s)))}}())))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})},o=function(d){return ct(t(gr))(function(a){return ct(t(dg(d)(function(){var i=hr(a.listener);return function(s){return i(Jn.create($N.create(s)))}}())))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})},c=function(d){return ct(t(gr))(function(a){return ct(t(_g(d)(function(){var i=hr(a.listener);return function(s){return i(Jn.create(BN.create(s)))}}())))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})},f=function(d){return ct(t(gr))(function(a){return ct(t(lg(d)(hr(a.listener)(new Jn(NN.value)))))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})},u=function(d){return ct(t(gr))(function(a){return ct(t(fg(d)(function(){var i=hr(a.listener);return function(s){return i(Jn.create(kN.create(s)))}}())))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})},v=function(d){return ct(t(gr))(function(a){return ct(t(sg(d)(function(){var i=hr(a.listener);return function(s){return i(Jn.create(PN.create(s)))}}())))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})},h=function(d){return ct(t(gr))(function(a){return ct(t(cg(d)(function(){var i=hr(a.listener);return function(s){return i(Jn.create(HN.create(s)))}}())))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})},g=function(d){return ct(t(gr))(function(a){return ct(t(ug(d)(hr(a.listener)(new Jn(ON.value)))))(function(i){return ct(er(a.emitter))(function(){return fa(function(s){var _={};for(var D in s)({}).hasOwnProperty.call(s,D)&&(_[D]=s[D]);return _.disposables=yr(i)(s.disposables),_})})})})};return function(d){if(d instanceof yE)return ct(In("terminal"))(function(a){if(a instanceof B)return t(Bs("no terminal element"));if(a instanceof O)return ct(Hg)(function(i){return la(t(gg(i.terminal)(a.value0)))(function(){return la(g(i.terminal))(function(){return la(h(i.terminal))(function(){return la(u(i.terminal))(function(){return la(f(i.terminal))(function(){return la(c(i.terminal))(function(){return la(n(i.terminal))(function(){return la(o(i.terminal))(function(){return la(r(i.terminal))(function(){return la(p(i.terminal))(function(){return la(l(i.terminal))(function(){return v(i.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.Terminal (line 73, column 5 - line 88, column 28): "+[a.constructor.name])});if(d instanceof bE)return ct(Hg)(function(a){return t(IN(RN)(a.disposables))});if(d instanceof Jn)return Ia(d.value0);throw new Error("Failed pattern match at Halogen.Terminal (line 70, column 16 - line 92, column 23): "+[d.constructor.name])}},SE=function(e){return Pn({initialState:function(t){return{terminal:t,disposables:[]}},render:zN(e),eval:Rn({receive:Dr.receive,handleAction:jN(e),handleQuery:GN(e),initialize:new O(yE.value),finalize:new O(bE.value)})})};var JN=se(It),wE=m_(),TE={reflectSymbol:function(){return"terminal"}},KN=wE(TE)(Va),XN=$(pt),EE={reflectSymbol:function(){return"process"}},YN=wE(EE)(rf),ZN=ju(ra),ME=Ud(Xi),Og=Y(ME),ap=_t(dl)(Xi),e3=oi()(TE)(Va),FE=z(Rr),t3=$(on),r3=_t(r_),op=Ta(sr),uu=z(zd(Xi)),LE=vt(mt),af=LE(ME),AE=tb(sr),kg=xr(AE),n3=Un(AE),a3=xn(rf),o3=yn(mh),i3=Kn(mh),u3=Fa(rf),c3=Zs()(EE)(rf),s3=eb(Ns),of=Y(Vr),f3=se(RT),l3=Je(PT),_3=LE(Vr),p3=xr(sr),Ng=ft(on),d3=$(lt),v3=z(b1),xE=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),IE=function(){function e(){}return e.value=new e,e}(),RE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),PE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),HE=function(){return Ht.value}(),OE=function(){return Ht.value}(),m3=function(e){var t=SE(e);return function(n){return Ha(JN([function(){if(n.terminal instanceof B)return Ha([]);if(n.terminal instanceof O)return KN(HE)(void 0)(t)(n.terminal.value0)(RE.create);throw new Error("Failed pattern match at Halogen.Shell (line 69, column 8 - line 71, column 80): "+[n.terminal.constructor.name])}()])(XN(function(l){return YN(OE)(l.value0)(l.value1.value0)(l.value1.value1)(PE.create)})(ZN(n.processes))))}},kE=function(e){var t=e.MonadEffect0().Monad0(),n=r3(t),l=Aa(y1(t.Bind1().Apply0().Functor0()))(s3);return function(p){var r=function(o){if(o instanceof tf)return Og(ap(e3(HE)(void 0)(o.value0)))(function(f){return FE(f)});if(o instanceof R_)return t3(O.create)(n(o.value0));if(o instanceof P_)return Og(ap(op))(function(f){return uu(o.value0(f.shell.shell))});if(o instanceof H_)return af(kg(function(f){var u={};for(var v in f)({}).hasOwnProperty.call(f,v)&&(u[v]=f[v]);return u.shell=function(){var h={};for(var g in f.shell)({}).hasOwnProperty.call(f.shell,g)&&(h[g]=f.shell[g]);return h.shell=o.value0,h}(),u}))(function(){return uu(o.value1)});if(o instanceof O_)return af(kg(function(f){var u={};for(var v in f)({}).hasOwnProperty.call(f,v)&&(u[v]=f[v]);return u.interpreter=o.value0,u}))(function(){return uu(o.value1)});if(o instanceof k_)return af(ap(Ia(o.value0)))(function(){return uu(o.value1)});if(o instanceof N_){var c=function(f){return je(0)(function(u){return u.key})(Qo(f))};return Og(n3(function(f){var u={};for(var v in f)({}).hasOwnProperty.call(f,v)&&(u[v]=f[v]);return u.processes=a3(o3(i3)(c(f.processes)))(new K(o.value0,o.value1))(f.processes),u}))(function(f){return uu(o.value2(c(f.processes)))})}if(o instanceof B_)return af(kg(function(f){var u={};for(var v in f)({}).hasOwnProperty.call(f,v)&&(u[v]=f[v]);return u.processes=u3(o.value0)(f.processes),u}))(function(){return uu(o.value1)});if(o instanceof W_)return af(ap(c3(OE)(o.value0)(C1.create(o.value1))))(function(){return uu(o.value2)});throw new Error("Failed pattern match at Halogen.Shell (line 111, column 5 - line 113, column 22): "+[o.constructor.name])};return Zy(l(r)(p))}},h3=function(e){var t=Ve(jn(e.MonadEffect0())),n=kE(e);return function(l){if(l instanceof IE)return of(t(cE(f3(Ks(N1)('"Cascadia Code", Menlo, monospace'))(Ks(B1)(!0)))(l3)))(function(p){return _3(p3(function(r){var o={};for(var c in r)({}).hasOwnProperty.call(r,c)&&(o[c]=r[c]);return o.terminal=new O(p),o}))(function(){return of(op)(function(r){return Ng(n(r.shell.init))})})});if(l instanceof RE)return of(op)(function(p){return Ng(n(p.interpreter(l.value0)))});if(l instanceof PE)return Ng(n(l.value0));throw new Error("Failed pattern match at Halogen.Shell (line 80, column 16 - line 91, column 51): "+[l.constructor.name])}},g3=function(e){var t=kE(e);return function(n){return of(op)(function(l){return of(t(l.shell.query(n.value0)))(function(p){return FE(d3(n.value1)(p))})})}},NE=function(e){return Pn({initialState:function(t){return{shell:t,interpreter:ge(v3(void 0)),terminal:B.value,processes:Ur}},render:m3(e),eval:Rn({receive:Dr.receive,finalize:Dr.finalize,handleAction:h3(e),handleQuery:g3(e),initialize:new O(IE.value)})})};var ip={suspend:_b,fork:Yd,join:fs,Monad0:function(){return Ma},Functor1:function(){return Db}};var up=function(e){return e.fork};var WE=j,_a=j,$E=function(e){var t=it(e)(Ot);return function(n){return _a(function(l){return t(n)(l.rendering)})}},C3=j,qE=function(e){return function(t){return _a(function(n){return C3(t(n.rendering))})}},y3=j,cp=function(e){return function(t){return e(t)}},UE=function(e){return function(t){return function(n){return function(l){return function(){var r=Pt({})(),o=Pt(Ju)(),c=Pt(Ju)(),f=Pt(n)(),u=Pt(new O(Oe.value))(),v=Pt(new O(Oe.value))(),h=Pt(B.value)(),g=Pt(1)(),d=Pt(new O(Ur))(),a=Pt(Ur)(),i={component:e,state:e.initialState(t),refs:Ur,children:Ju,childrenIn:o,childrenOut:c,selfRef:r,handlerRef:f,pendingQueries:u,pendingOuts:v,pendingHandlers:h,rendering:B.value,fresh:g,subscriptions:d,forks:a,lifecycleHandlers:l};return yt(i)(r)(),y3(r)}}}}};var b3=it(Rt)(Ot),S3=Vt(Yr),w3=$i(hm),Gt=Y(Wt),Et=Ve(mr),T3=vt(mt),pa=T3(Wt),JE=it(dn),E3=JE(vn),KE=up(ip),M3=us(Bi)(Uu)(vn),Ba=z(dn),F3=$(Dv),VE=io(Bi),L3=$(pn),zE=Ni(Bi),A3=$(lt),x3=xn(hm),I3=qS(Uu),R3=Fa(t_),P3=gD(ga),H3=xn(t_),GE=JE(Ot),jE=$i(t_),O3=$i(Xt),k3=aw(zu),N3=Qu(Xt),B3=function(e){return function(t){return function(){var l=xe(t)(),p=xe(l.subscriptions)();return b3(Jl)(S3(w3(e))(p))()}}},sp=function(e){return function(t){return Gt(Et(xe(e)))(function(n){if(n instanceof B)return t;if(n instanceof O)return Et(yt(new O(new Ne(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},fp=function(e){return function(t){return pa(Et(yt({initializers:Oe.value,finalizers:Oe.value})(e)))(function(){return Gt(Et(t))(function(n){return Gt(Et(xe(e)))(function(l){return pa(E3(KE)(l.finalizers))(function(){return pa(M3(l.initializers))(function(){return Ba(n)})})})})})}},cu=yl(kr(ro)(ge(z(Rt)(void 0)))),QE=function(e){return function(t){return Gt(Et(xe(t)))(function(n){return Et(Fp(function(l){return{state:l+1|0,value:e(l)}})(n.fresh))})}},Wg=function(e){return function(t){return function(n){return Gt(Et(xe(t)))(function(l){return pi(e)(t)(l.component.eval(new ac(F3(O.create)(eS(n)),ge(B.value))))})}}},pi=function(e){return function(t){return function(n){var l=function(r){return function(o){return Gt(Et(xe(r)))(function(c){return iw(function(f){var u=function(v){return VE(Gt(Et(xe(v)))(function(h){return _a(function(g){return Wg(e)(g.selfRef)(f.value1)})(h)}))};return L3(f.value2)(zE(f.value0(Uu)(u)(c.children)))})(o)})}},p=function(r){return function(o){if(o instanceof Is)return Gt(Et(xe(r)))(function(c){var f=o.value0(c.state);if(Yu(c.state)(f.value1))return Ba(f.value0);if(nr)return pa(Et(yt({component:c.component,refs:c.refs,children:c.children,childrenIn:c.childrenIn,childrenOut:c.childrenOut,selfRef:c.selfRef,handlerRef:c.handlerRef,pendingQueries:c.pendingQueries,pendingOuts:c.pendingOuts,pendingHandlers:c.pendingHandlers,rendering:c.rendering,fresh:c.fresh,subscriptions:c.subscriptions,forks:c.forks,lifecycleHandlers:c.lifecycleHandlers,state:f.value1})(r)))(function(){return pa(fp(c.lifecycleHandlers)(e(c.lifecycleHandlers)(r)))(function(){return Ba(f.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[f.constructor.name])});if(o instanceof Rs)return Gt(QE(lw)(r))(function(c){return Gt(Et(sw(o.value0(c))(function(f){return cu($g(e)(r)(new qi(f)))})))(function(f){return Gt(Et(xe(r)))(function(u){return pa(Et(Zr(A3(x3(c)(f)))(u.subscriptions)))(function(){return Ba(o.value1(c))})})})});if(o instanceof Ps)return pa(Et(B3(o.value0)(r)))(function(){return Ba(o.value1)});if(o instanceof Ki)return o.value0;if(o instanceof Hs)return l(r)(o.value0);if(o instanceof Os)return Gt(Et(xe(r)))(function(c){return Gt(Et(xe(c.handlerRef)))(function(f){return pa(sp(c.pendingOuts)(f(o.value0)))(function(){return Ba(o.value1)})})});if(o instanceof Kl)return zE(I3(sm(function(){var c=pi(e)(r);return function(f){return VE(c(f))}}())(o.value0)));if(o instanceof Xl)return Gt(QE(_w)(r))(function(c){return Gt(Et(xe(r)))(function(f){return Gt(Et(Pt(!1)))(function(u){return Gt(KE(ss(Et(function(){return Zr(R3(c))(f.forks)(),yt(!0)(u)()}))(pi(e)(r)(o.value0))))(function(v){return pa(Et(P3(xe(u))(Zr(H3(c)(v))(f.forks))))(function(){return Ba(o.value1(c))})})})})});if(o instanceof Yl)return Gt(Et(xe(r)))(function(c){return Gt(Et(xe(c.forks)))(function(f){return pa(GE(fs)(jE(o.value0)(f)))(function(){return Ba(o.value1)})})});if(o instanceof Zl)return Gt(Et(xe(r)))(function(c){return Gt(Et(xe(c.forks)))(function(f){return pa(GE(ls(oa("Cancelled")))(jE(o.value0)(f)))(function(){return Ba(o.value1)})})});if(o instanceof ks)return Gt(Et(xe(r)))(function(c){return Ba(o.value1(O3(o.value0)(c.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[o.constructor.name])}};return k3(p(t))(n)}}},$g=function(e){return function(t){return function(n){if(n instanceof Ll)return Et(qe(Zr)(t)(cp(function(l){return{component:l.component,state:l.state,children:l.children,childrenIn:l.childrenIn,childrenOut:l.childrenOut,selfRef:l.selfRef,handlerRef:l.handlerRef,pendingQueries:l.pendingQueries,pendingOuts:l.pendingOuts,pendingHandlers:l.pendingHandlers,rendering:l.rendering,fresh:l.fresh,subscriptions:l.subscriptions,forks:l.forks,lifecycleHandlers:l.lifecycleHandlers,refs:N3(ge(n.value1))(n.value0)(l.refs)}})));if(n instanceof qi)return Gt(Et(xe(t)))(function(l){return pi(e)(t)(l.component.eval(new nc(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var $3=Y(Sn),q3=vt(mt),nM=Pf(Rt)(Ot),aM=it(dn)(vn),oM=up(ip),cf=Vt(Sn),iM=it(Rt),uM=iM(Ot),XE=iM(ms),YE=q3(Wt),U3=us(Bi)(Uu)(vn),uf=Ve(mr),ZE=z(Rt),qg=$(Ae),Ug=z(dn),Vg=_r(Rt),V3=qE(Ae),z3=ft(pn),eM=oS(Rt),G3=$E(Rt),j3=kt(Ff),Q3=lu(Ae),zg=Y(Wt),J3=Ve(il),tM=function(){return Pt({initializers:Oe.value,finalizers:Oe.value})}(),rM=function(e){return function(){var n=xe(e)();return yt(B.value)(e)(),nM(n)(function(){var l=aM(oM);return function(p){return cu(l(uo(p)))}}())()}},K3=function(e){return function(){return cf(uM(XE(Jl)))(xe(e.subscriptions))(),yt(B.value)(e.subscriptions)(),cf(XE(function(){var n=ls(oa("finalized"));return function(l){return cu(n(l))}}()))(xe(e.forks))(),yt(Ur)(e.forks)()}},cM=function(e){return function(t){return function(n){var l=function(v){return function(h){return _a(function(g){var d=pi(o)(g.selfRef)(g.component.eval(new ec(void 0)));return Zr(function(a){return{initializers:new Ne(YE(U3(uo(a.initializers)))(function(){return YE(d)(function(){return uf(function(){return rM(g.pendingQueries)(),rM(g.pendingOuts)()})})}),h),finalizers:a.finalizers}})(v)})}},p=function(v){return function(h){return function(g){return bm(function(d){return function(){var i=tM(),s=UE(d)(g)(h)(i)(),_=xe(v)();return yt({initializers:Oe.value,finalizers:_.finalizers})(v)(),cf(_a(function(){var D=o(v);return function(C){return D(function(b){return b.selfRef}(C))}}()))(xe(s))(),cf(l(v)(_.initializers))(xe(s))(),s}})}}},r=function(v){return function(h){return function(g){return function(d){return ym(function(a){return function(){var s=qg(a.pop)(xe(g))(),_=function(){if(s instanceof O){yt(s.value0.value1)(g)();var C=xe(s.value0.value0)();return _a(function(b){return function(){return qe(yt)(b.handlerRef)(function(){var m=je(Ug(void 0))(h);return function(y){return m(a.output(y))}}())(),cu(pi(o)(b.selfRef)(b.component.eval(new rc(a.input,void 0))))()}})(C)(),s.value0.value0}if(s instanceof B)return p(v)(function(){var b=je(Ug(void 0))(h);return function(T){return b(a.output(T))}}())(a.input)(a.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[s.constructor.name])}(),D=qg(function(C){return Di(a.get(C))})(xe(d))();return Vg(D)(i_("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),Zr(a.set(_))(d)(),$3(xe(_))(V3(function(C){if(C instanceof B)return Md("Halogen internal error: child was not initialized in renderChild");if(C instanceof O)return ZE(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},o=function(v){return function(h){return function(){var d=xe(h)(),a=qg(wo)(xe(d.pendingHandlers))();Vg(a)(yt(new O(Oe.value))(d.pendingHandlers))(),yt(Ju)(d.childrenOut)(),yt(d.children)(d.childrenIn)();var i=function(){var b=sp(d.pendingHandlers),T=$g(o)(d.selfRef);return function(m){return b(z3(T(m)))}}(),s=function(){var b=sp(d.pendingQueries);return function(T){return b(i(qi.create(T)))}}(),_=e.render(function(b){return cu(i(b))})(r(v)(s)(d.childrenIn)(d.childrenOut))(d.component.render(d.state))(d.rendering)(),D=xe(d.childrenOut)(),C=xe(d.childrenIn)();return eM(C)(function(b){return function(){var m=xe(b)();return G3(e.removeChild)(m)(),c(v)(m)()}})(),qe(Zr)(d.selfRef)(cp(function(b){return{component:b.component,state:b.state,refs:b.refs,childrenIn:b.childrenIn,childrenOut:b.childrenOut,selfRef:b.selfRef,handlerRef:b.handlerRef,pendingQueries:b.pendingQueries,pendingOuts:b.pendingOuts,pendingHandlers:b.pendingHandlers,fresh:b.fresh,subscriptions:b.subscriptions,forks:b.forks,lifecycleHandlers:b.lifecycleHandlers,rendering:new O(_),children:D}}))(),Vg(a)(qe(j3)(void 0)(function(b){return function(){var m=xe(d.pendingHandlers)();yt(new O(Oe.value))(d.pendingHandlers)(),uM(function(){var S=aM(oM);return function(w){return cu(S(uo(w)))}}())(m)();var y=xe(d.pendingHandlers)(),M=je(!1)(Nb)(y);return M?Q3(yt(B.value)(d.pendingHandlers))(new ht(void 0))():new dt(void 0)}}))()}}},c=function(v){return _a(function(h){return function(){K3(h)();var d=pi(o)(h.selfRef)(h.component.eval(new tc(void 0)));return Zr(function(a){return{initializers:a.initializers,finalizers:new Ne(d,a.finalizers)}})(v)(),eM(h.children)(function(a){return function(){var s=xe(a)();return c(v)(s)()}})()}})},f=function(v){return function(h){return function(g){return zg(uf(xe(v)))(function(d){return d?Ug(B.value):Wg(o)(h)(g)})}}},u=function(v){return function(h){return function(g){return fp(h)(function(){var a=xe(v)();return a?void 0:(yt(!0)(v)(),c(h)(g)(),_a(function(i){return function(){var _=J3(xe(i.selfRef))();return nM(_.rendering)(e.dispose)()}})(g)())})}}};return zg(uf(tM))(function(v){return zg(uf(Pt(!1)))(function(h){return fp(v)(function(){var d=gr(),a=cf(xe)(p(v)(function(){var i=hr(d.listener);return function(s){return uf(i(s))}}())(n)(t))();return _a(function(i){return ZE({query:f(h)(i.selfRef),messages:d.emitter,dispose:u(h)(v)(a)})})(a)()})})})}}};var da=function(e){return function(t){return function(){return t[e]}}};var Y3=da("baseURI"),Z3=da("ownerDocument"),sM=da("parentNode"),eB=da("parentElement");var tB=da("childNodes"),rB=da("firstChild"),nB=da("lastChild"),aB=da("previousSibling"),fM=da("nextSibling"),oB=da("nodeValue");var iB=da("textContent");function Gg(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function lp(e){return function(t){return function(){t.appendChild(e)}}}function jg(e){return function(t){return function(){t.removeChild(e)}}}var lM=$(Ae);var Qg=function(){var e=lM(Nt);return function(t){return e(sM(t))}}();var _M=function(){var e=lM(Nt);return function(t){return e(fM(t))}}();var Jg=function(e,t,n){var l=0,p;return function(r){if(l===2)return p;if(l===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+r+")",t,r);return l=1,p=n(),l=2,p}},Kg=ft(Ae),lB=z(Rt),_B=it(Rt)(Ot),pB=ir(),dB=_r(Rt),vB=ea(Pc(Pc(Zn))),mB=pe(ve),hB=Y(Wt),gB=Ve(mr),DB=$(Ae),CB=Vt(Sn);var yB=function(e){return function(t){return function(n){return t instanceof O&&n instanceof O?Kg(Gg(e)(t.value0)(n.value0)):t instanceof B&&n instanceof O?Kg(lp(e)(n.value0)):lB(void 0)}}},pM=function(e){return function(){var n=Qg(e.node)();return _B(function(l){return jg(e.node)(l)})(n)()}},bB=function(e){return function(t){return function(n){var l=WE(function(c){return c.node}),p=function(c){return c instanceof O?hn(c.value0):void 0},r=function(c){var f=dw(pB)(c),u=Jg("patch","Halogen.VDom.Driver",function(){return function(i,s){if(i instanceof O){if(s instanceof oc)return hn(i.value0),h(100)(s.value0);if(s instanceof o_){var _=mn(i.value0,s.value0);return Ut(new qt(Ir(_),new O(_),u(103),p))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[s.constructor.name])}return v(104)(s)}}),v=Jg("render","Halogen.VDom.Driver",function(){return function(i){if(i instanceof oc)return h(86)(i.value0);if(i instanceof o_){var s=f(i.value0);return Ut(new qt(Ir(s),new O(s),u(89),p))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[i.constructor.name])}}),h=Jg("renderComponentSlot","Halogen.VDom.Driver",function(){return function(i){var s=xe(t)(),_=s(i)(),D=l(_);return Ut(new qt(D,B.value,u(117),p))}}),g=u(91),d=v(82),a=h(109);return d},o=ES(e);return{buildWidget:r,buildAttributes:o,document:n}}}},SB=function(e){return function(t){var n=function(l){return function(p){return function(r){return function(o){if(o instanceof B)return function(){var f=Pt(p)(),u=bB(l)(f)(e),v=Ms(u)(r),h=Ir(v);return Kg(lp(h)(tT(t)))(),{machine:v,node:h,renderChildRef:f}};if(o instanceof O)return function(){yt(p)(o.value0.renderChildRef)();var f=Qg(o.value0.node)(),u=_M(o.value0.node)(),v=mn(o.value0.machine,r),h=Ir(v);return dB(vB(Yu)(o.value0.node)(h))(yB(h)(u)(f))(),{machine:v,node:h,renderChildRef:o.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[o.constructor.name])}}}};return{render:n,renderChild:mB,removeChild:pM,dispose:pM}}},dM=function(e){return function(t){return function(n){return hB(gB(DB(Xw)(CB(lc)(eu))))(function(l){return cM(SB(l)(n))(e)(t)})}}};var SM=pe(ve),su=Y(Vr),TB=Un(sr),vM=ft(on),wM=oi(),TM={reflectSymbol:function(){return"shell"}},mM=wM(TM)(Va),hM=wa(sr),EM=vt(mt),gM=EM(Vr),DM=xr(sr),MM={reflectSymbol:function(){return"feed"}},EB=wM(MM)(wc),MB=it(Rr)(Ot),FB=Te(bn),sf=EM($o),CM=Us(RS),FM=v_(),LB=FM(MM)(wc),AB=D1(km)(Gw(_s)),xB=FM(TM)(Va),IB=NE(_s),RB=ft(pn),LM=function(){function e(){}return e.value=new e,e}(),AM=function(){function e(){}return e.value=new e,e}(),yM=function(){function e(){}return e.value=new e,e}(),bM=function(e){return new xE(e,SM)},Xg=function(){return Ht.value}(),xM=function(){return Ht.value}(),PB=function(e){var t=Ve(jn(e));return function(n){if(n instanceof LM)return su(TB(function(l){var p={};for(var r in l)({}).hasOwnProperty.call(l,r)&&(p[r]=l[r]);return p.top=!l.top,p}))(function(l){var p=function(){return l.top?"top loading/unloading enabled":"top loading/unloading disabled"}();return vM(mM(Xg)(void 0)(bM(p)))});if(n instanceof AM)return su(hM(function(l){return l.log}))(function(l){if(l instanceof O)return gM(DM(function(p){var r={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(r[o]=p[o]);return r.log=B.value,r}))(function(){return gM(e_(l.value0.value0))(function(){return t(Ib(l.value0.value1))})});if(l instanceof B)return su(t(gr))(function(p){return su(t(xb(1e3)(hr(p.listener)(yM.value))))(function(r){return su(er(p.emitter))(function(o){return DM(function(c){var f={};for(var u in c)({}).hasOwnProperty.call(c,u)&&(f[u]=c[u]);return f.log=new O(new K(o,r)),f})})})});throw new Error("Failed pattern match at Example (line 81, column 10 - line 90, column 60): "+[l.constructor.name])});if(n instanceof yM)return su(hM(function(l){return l.top}))(function(l){return su(EB(xM)(l)(new vh(SM)))(function(p){return qe(MB)(p)(function(r){return vM(mM(Xg)(void 0)(bM(FB(r))))})})});throw new Error("Failed pattern match at Example (line 74, column 3 - line 95, column 58): "+[n.constructor.name])}},HB=function(e){var t={init:hh(vE(!1)),query:function(n){return hh(_i(n))},shell:void 0};return Pr([Dn(sf(Nu(sy))(function(){return py(_y)}))])([Ha([Ha([l_([CM("type")(is.value),qm(ge(LM.value))]),ri("enable top loading/unloading")]),Ha([l_([CM("type")(is.value),qm(ge(AM.value))]),ri("enable scrollTop logging")])]),Pr([Dn(sf(Vn(Xe(10)))(function(){return sf(ao(Xe(10)))(function(){return sf(no(Xe(400)))(function(){return sf(ca(Xe(1200)))(function(){return oy(xi)})})})}))])([LB(xM)(e.top)(AB)(function(){var n=h1(150);return{initialElement:n.initialElement,pageSize:n.pageSize,hiddenPages:n.hiddenPages,preloadedPages:n.preloadedPages,preloadMillis:n.preloadMillis,enableTop:e.top}}())]),xB(Xg)(void 0)(IB)(t)])},OB=function(){return Pn({initialState:ge({top:!1,log:B.value}),render:HB,eval:Rn({handleQuery:Dr.handleQuery,receive:Dr.receive,initialize:Dr.initialize,finalize:Dr.finalize,handleAction:PB(mr)})})}(),IM=_T(Y(Wt)(pT)(function(e){return RB(dM(OB)(void 0)(e))}));IM();
</script>
  </body>
</html>
