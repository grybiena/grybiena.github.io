(()=>{var X5=Object.create;var LM=Object.defineProperty;var Y5=Object.getOwnPropertyDescriptor;var Z5=Object.getOwnPropertyNames;var eW=Object.getPrototypeOf,tW=Object.prototype.hasOwnProperty;var Tt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var nW=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let h of Z5(t))!tW.call(e,h)&&h!==n&&LM(e,h,{get:()=>t[h],enumerable:!(a=Y5(t,h))||a.enumerable});return e};var yi=(e,t,n)=>(n=e!=null?X5(eW(e)):{},nW(t||!e||!e.__esModule?LM(n,"default",{value:e,enumerable:!0}):n,e));var zP=Tt((xm,uS)=>{(function(e,t){typeof xm=="object"&&typeof uS=="object"?uS.exports=t():typeof define=="function"&&define.amd?define([],t):typeof xm=="object"?xm.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let a=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(a._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,a=n._renderService.dimensions;if(a.css.cell.width===0||a.css.cell.height===0)return;let h=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(o.getPropertyValue("height")),l=Math.max(0,parseInt(o.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),i=r-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),s=l-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-h;return{cols:Math.max(2,Math.floor(s/a.css.cell.width)),rows:Math.max(1,Math.floor(i/a.css.cell.height))}}}})(),e})())});var JP=Tt((Am,sS)=>{(function(e,t){typeof Am=="object"&&typeof sS=="object"?sS.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Am=="object"?Am.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(h,o,r){var l=this&&this.__decorate||function(D,g,w,F){var b,E=arguments.length,M=E<3?g:F===null?F=Object.getOwnPropertyDescriptor(g,w):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,w,F);else for(var S=D.length-1;S>=0;S--)(b=D[S])&&(M=(E<3?b(M):E>3?b(g,w,M):b(g,w))||M);return E>3&&M&&Object.defineProperty(g,w,M),M};Object.defineProperty(o,"__esModule",{value:!0}),o.GlyphRenderer=void 0;let u=r(374),i=r(509),s=r(855),f=r(859),p=r(776),d=r(381),c=11,_=c*Float32Array.BYTES_PER_ELEMENT,v,m=0,y=0,C=0;class T extends f.Disposable{constructor(g,w,F){super(),this._terminal=g,this._gl=w,this._dimensions=F,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let b=this._gl;i.TextureAtlas.maxAtlasPages===void 0&&(i.TextureAtlas.maxAtlasPages=Math.min(32,(0,u.throwIfFalsy)(b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS))),i.TextureAtlas.maxTextureSize=(0,u.throwIfFalsy)(b.getParameter(b.MAX_TEXTURE_SIZE))),this._program=(0,u.throwIfFalsy)((0,d.createProgram)(b,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(R){let A="";for(let I=1;I<R;I++)A+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${R}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${A}
}`}(i.TextureAtlas.maxAtlasPages))),this.register((0,f.toDisposable)(()=>b.deleteProgram(this._program))),this._projectionLocation=(0,u.throwIfFalsy)(b.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,u.throwIfFalsy)(b.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,u.throwIfFalsy)(b.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=b.createVertexArray(),b.bindVertexArray(this._vertexArrayObject);let E=new Float32Array([0,0,1,0,0,1,1,1]),M=b.createBuffer();this.register((0,f.toDisposable)(()=>b.deleteBuffer(M))),b.bindBuffer(b.ARRAY_BUFFER,M),b.bufferData(b.ARRAY_BUFFER,E,b.STATIC_DRAW),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let S=new Uint8Array([0,1,2,3]),x=b.createBuffer();this.register((0,f.toDisposable)(()=>b.deleteBuffer(x))),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,x),b.bufferData(b.ELEMENT_ARRAY_BUFFER,S,b.STATIC_DRAW),this._attributesBuffer=(0,u.throwIfFalsy)(b.createBuffer()),this.register((0,f.toDisposable)(()=>b.deleteBuffer(this._attributesBuffer))),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.FLOAT,!1,_,0),b.vertexAttribDivisor(2,1),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,_,2*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,!1,_,4*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,2,b.FLOAT,!1,_,5*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(5,1),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,_,7*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(6,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,_,9*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(1,1),b.useProgram(this._program);let L=new Int32Array(i.TextureAtlas.maxAtlasPages);for(let R=0;R<i.TextureAtlas.maxAtlasPages;R++)L[R]=R;b.uniform1iv(this._textureLocation,L),b.uniformMatrix4fv(this._projectionLocation,!1,d.PROJECTION_MATRIX),this._atlasTextures=[];for(let R=0;R<i.TextureAtlas.maxAtlasPages;R++){let A=new d.GLTexture((0,u.throwIfFalsy)(b.createTexture()));this.register((0,f.toDisposable)(()=>b.deleteTexture(A.texture))),b.activeTexture(b.TEXTURE0+R),b.bindTexture(b.TEXTURE_2D,A.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[R]=A}b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,w,F,b,E,M,S,x){this._updateCell(this._vertices.attributes,g,w,F,b,E,M,S,x)}_updateCell(g,w,F,b,E,M,S,x,L){m=(F*this._terminal.cols+w)*c,b!==s.NULL_CELL_CODE&&b!==void 0?this._atlas&&(v=x&&x.length>1?this._atlas.getRasterizedGlyphCombinedChar(x,E,M,S,!1):this._atlas.getRasterizedGlyph(b,E,M,S,!1),y=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),E!==L&&v.offset.x>y?(C=v.offset.x-y,g[m]=-(v.offset.x-C)+this._dimensions.device.char.left,g[m+1]=-v.offset.y+this._dimensions.device.char.top,g[m+2]=(v.size.x-C)/this._dimensions.device.canvas.width,g[m+3]=v.size.y/this._dimensions.device.canvas.height,g[m+4]=v.texturePage,g[m+5]=v.texturePositionClipSpace.x+C/this._atlas.pages[v.texturePage].canvas.width,g[m+6]=v.texturePositionClipSpace.y,g[m+7]=v.sizeClipSpace.x-C/this._atlas.pages[v.texturePage].canvas.width,g[m+8]=v.sizeClipSpace.y):(g[m]=-v.offset.x+this._dimensions.device.char.left,g[m+1]=-v.offset.y+this._dimensions.device.char.top,g[m+2]=v.size.x/this._dimensions.device.canvas.width,g[m+3]=v.size.y/this._dimensions.device.canvas.height,g[m+4]=v.texturePage,g[m+5]=v.texturePositionClipSpace.x,g[m+6]=v.texturePositionClipSpace.y,g[m+7]=v.sizeClipSpace.x,g[m+8]=v.sizeClipSpace.y)):g.fill(0,m,m+c-1-2)}clear(){let g=this._terminal,w=g.cols*g.rows*c;this._vertices.count!==w?this._vertices.attributes=new Float32Array(w):this._vertices.attributes.fill(0);let F=0;for(;F<this._vertices.attributesBuffers.length;F++)this._vertices.count!==w?this._vertices.attributesBuffers[F]=new Float32Array(w):this._vertices.attributesBuffers[F].fill(0);this._vertices.count=w,F=0;for(let b=0;b<g.rows;b++)for(let E=0;E<g.cols;E++)this._vertices.attributes[F+9]=E/g.cols,this._vertices.attributes[F+10]=b/g.rows,F+=c}handleResize(){let g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;let w=this._gl;w.useProgram(this._program),w.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let F=this._vertices.attributesBuffers[this._activeBuffer],b=0;for(let E=0;E<g.lineLengths.length;E++){let M=E*this._terminal.cols*c,S=this._vertices.attributes.subarray(M,M+g.lineLengths[E]*c);F.set(S,b),b+=S.length}w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.bufferData(w.ARRAY_BUFFER,F.subarray(0,b),w.STREAM_DRAW);for(let E=0;E<this._atlas.pages.length;E++)this._atlas.pages[E].version!==this._atlasTextures[E].version&&this._bindAtlasPageTexture(w,this._atlas,E);w.drawElementsInstanced(w.TRIANGLE_STRIP,4,w.UNSIGNED_BYTE,0,b/c)}setAtlas(g){this._atlas=g;for(let w of this._atlasTextures)w.version=-1}_bindAtlasPageTexture(g,w,F){g.activeTexture(g.TEXTURE0+F),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[F].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,w.pages[F].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[F].version=w.pages[F].version}setDimensions(g){this._dimensions=g}}o.GlyphRenderer=T,l([p.traceCall],T.prototype,"updateCell",null)},742:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RectangleRenderer=void 0;let l=r(374),u=r(859),i=r(310),s=r(381),f=8*Float32Array.BYTES_PER_ELEMENT;class p{constructor(){this.attributes=new Float32Array(160),this.count=0}}let d=0,c=0,_=0,v=0,m=0,y=0,C=0;class T extends u.Disposable{constructor(g,w,F,b){super(),this._terminal=g,this._gl=w,this._dimensions=F,this._themeService=b,this._vertices=new p,this._verticesCursor=new p;let E=this._gl;this._program=(0,l.throwIfFalsy)((0,s.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,u.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,l.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),S=E.createBuffer();this.register((0,u.toDisposable)(()=>E.deleteBuffer(S))),E.bindBuffer(E.ARRAY_BUFFER,S),E.bufferData(E.ARRAY_BUFFER,M,E.STATIC_DRAW),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let x=new Uint8Array([0,1,2,3]),L=E.createBuffer();this.register((0,u.toDisposable)(()=>E.deleteBuffer(L))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,L),E.bufferData(E.ELEMENT_ARRAY_BUFFER,x,E.STATIC_DRAW),this._attributesBuffer=(0,l.throwIfFalsy)(E.createBuffer()),this.register((0,u.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,E.FLOAT,!1,f,0),E.vertexAttribDivisor(0,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,f,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,4,E.FLOAT,!1,f,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(2,1),this._updateCachedColors(b.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){let w=this._gl;w.useProgram(this._program),w.bindVertexArray(this._vertexArrayObject),w.uniformMatrix4fv(this._projectionLocation,!1,s.PROJECTION_MATRIX),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.bufferData(w.ARRAY_BUFFER,g.attributes,w.DYNAMIC_DRAW),w.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,w.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){let w=this._terminal,F=this._vertices,b,E,M,S,x,L,R,A,I,$,H,P=1;for(b=0;b<w.rows;b++){for(M=-1,S=0,x=0,L=!1,E=0;E<w.cols;E++)R=(b*w.cols+E)*i.RENDER_MODEL_INDICIES_PER_CELL,A=g.cells[R+i.RENDER_MODEL_BG_OFFSET],I=g.cells[R+i.RENDER_MODEL_FG_OFFSET],$=!!(67108864&I),(A!==S||I!==x&&(L||$))&&((S!==0||L&&x!==0)&&(H=8*P++,this._updateRectangle(F,H,x,S,M,E,b)),M=E,S=A,x=I,L=$);(S!==0||L&&x!==0)&&(H=8*P++,this._updateRectangle(F,H,x,S,M,w.cols,b))}F.count=P}updateCursor(g){let w=this._verticesCursor,F=g.cursor;if(!F||F.style==="block")return void(w.count=0);let b,E=0;F.style!=="bar"&&F.style!=="outline"||(b=8*E++,this._addRectangleFloat(w.attributes,b,F.x*this._dimensions.device.cell.width,F.y*this._dimensions.device.cell.height,F.style==="bar"?F.dpr*F.cursorWidth:F.dpr,this._dimensions.device.cell.height,this._cursorFloat)),F.style!=="underline"&&F.style!=="outline"||(b=8*E++,this._addRectangleFloat(w.attributes,b,F.x*this._dimensions.device.cell.width,(F.y+1)*this._dimensions.device.cell.height-F.dpr,F.width*this._dimensions.device.cell.width,F.dpr,this._cursorFloat)),F.style==="outline"&&(b=8*E++,this._addRectangleFloat(w.attributes,b,F.x*this._dimensions.device.cell.width,F.y*this._dimensions.device.cell.height,F.width*this._dimensions.device.cell.width,F.dpr,this._cursorFloat),b=8*E++,this._addRectangleFloat(w.attributes,b,(F.x+F.width)*this._dimensions.device.cell.width-F.dpr,F.y*this._dimensions.device.cell.height,F.dpr,this._dimensions.device.cell.height,this._cursorFloat)),w.count=E}_updateRectangle(g,w,F,b,E,M,S){if(67108864&F)switch(50331648&F){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&F].rgba;break;case 50331648:d=(16777215&F)<<8;break;default:d=this._themeService.colors.foreground.rgba}else switch(50331648&b){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&b].rgba;break;case 50331648:d=(16777215&b)<<8;break;default:d=this._themeService.colors.background.rgba}g.attributes.length<w+4&&(g.attributes=(0,s.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),c=E*this._dimensions.device.cell.width,_=S*this._dimensions.device.cell.height,v=(d>>24&255)/255,m=(d>>16&255)/255,y=(d>>8&255)/255,C=1,this._addRectangle(g.attributes,w,c,_,(M-E)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,v,m,y,C)}_addRectangle(g,w,F,b,E,M,S,x,L,R){g[w]=F/this._dimensions.device.canvas.width,g[w+1]=b/this._dimensions.device.canvas.height,g[w+2]=E/this._dimensions.device.canvas.width,g[w+3]=M/this._dimensions.device.canvas.height,g[w+4]=S,g[w+5]=x,g[w+6]=L,g[w+7]=R}_addRectangleFloat(g,w,F,b,E,M,S){g[w]=F/this._dimensions.device.canvas.width,g[w+1]=b/this._dimensions.device.canvas.height,g[w+2]=E/this._dimensions.device.canvas.width,g[w+3]=M/this._dimensions.device.canvas.height,g[w+4]=S[0],g[w+5]=S[1],g[w+6]=S[2],g[w+7]=S[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}o.RectangleRenderer=T},310:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderModel=o.COMBINED_CHAR_BIT_MASK=o.RENDER_MODEL_EXT_OFFSET=o.RENDER_MODEL_FG_OFFSET=o.RENDER_MODEL_BG_OFFSET=o.RENDER_MODEL_INDICIES_PER_CELL=void 0;let l=r(296);o.RENDER_MODEL_INDICIES_PER_CELL=4,o.RENDER_MODEL_BG_OFFSET=1,o.RENDER_MODEL_FG_OFFSET=2,o.RENDER_MODEL_EXT_OFFSET=3,o.COMBINED_CHAR_BIT_MASK=2147483648,o.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,l.createSelectionRenderModel)()}resize(u,i){let s=u*i*o.RENDER_MODEL_INDICIES_PER_CELL;s!==this.cells.length&&(this.cells=new Uint32Array(s),this.lineLengths=new Uint32Array(i))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(h,o,r){var l=this&&this.__decorate||function(M,S,x,L){var R,A=arguments.length,I=A<3?S:L===null?L=Object.getOwnPropertyDescriptor(S,x):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(M,S,x,L);else for(var $=M.length-1;$>=0;$--)(R=M[$])&&(I=(A<3?R(I):A>3?R(S,x,I):R(S,x))||I);return A>3&&I&&Object.defineProperty(S,x,I),I};Object.defineProperty(o,"__esModule",{value:!0}),o.JoinedCellData=o.WebglRenderer=void 0;let u=r(820),i=r(274),s=r(627),f=r(457),p=r(56),d=r(374),c=r(345),_=r(859),v=r(147),m=r(782),y=r(855),C=r(776),T=r(965),D=r(742),g=r(310),w=r(733);class F extends _.Disposable{constructor(S,x,L,R,A,I,$,H,P){super(),this._terminal=S,this._characterJoinerService=x,this._charSizeService=L,this._coreBrowserService=R,this._coreService=A,this._decorationService=I,this._optionsService=$,this._themeService=H,this._cursorBlinkStateManager=new _.MutableDisposable,this._charAtlasDisposable=this.register(new _.MutableDisposable),this._model=new g.RenderModel,this._workCell=new m.CellData,this._rectangleRenderer=this.register(new _.MutableDisposable),this._glyphRenderer=this.register(new _.MutableDisposable),this._onChangeTextureAtlas=this.register(new c.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new c.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new c.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new c.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new i.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new w.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,$,this._themeService)],this.dimensions=(0,d.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register($.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let q={antialias:!1,depth:!1,preserveDrawingBuffer:P};if(this._gl=this._canvas.getContext("webgl2",q),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextlost",z=>{console.log("webglcontextlost event received"),z.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(z)},3e3)})),this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextrestored",z=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,s.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,p.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(z,N)=>this._setCanvasDevicePixelDimensions(z,N))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,_.toDisposable)(()=>{var z;for(let N of this._renderLayers)N.dispose();(z=this._canvas.parentElement)===null||z===void 0||z.removeChild(this._canvas),(0,s.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var S;return(S=this._charAtlas)===null||S===void 0?void 0:S.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(S,x){var L,R,A,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let $ of this._renderLayers)$.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(L=this._rectangleRenderer.value)===null||L===void 0||L.setDimensions(this.dimensions),(R=this._rectangleRenderer.value)===null||R===void 0||R.handleResize(),(A=this._glyphRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(I=this._glyphRenderer.value)===null||I===void 0||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var S;for(let x of this._renderLayers)x.handleBlur(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.pause(),this._requestRedrawViewport()}handleFocus(){var S;for(let x of this._renderLayers)x.handleFocus(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.resume(),this._requestRedrawViewport()}handleSelectionChanged(S,x,L){for(let R of this._renderLayers)R.handleSelectionChanged(this._terminal,S,x,L);this._model.selection.update(this._terminal,S,x,L),this._requestRedrawViewport()}handleCursorMove(){var S;for(let x of this._renderLayers)x.handleCursorMove(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new D.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new T.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var S;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let x=(0,s.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==x&&(this._onChangeTextureAtlas.fire(x.pages[0].canvas),this._charAtlasDisposable.value=(0,_.getDisposeArrayDisposable)([(0,c.forwardEvent)(x.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,c.forwardEvent)(x.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=x,this._charAtlas.warmUp(),(S=this._glyphRenderer.value)===null||S===void 0||S.setAtlas(this._charAtlas)}_clearModel(S){var x;this._model.clear(),S&&((x=this._glyphRenderer.value)===null||x===void 0||x.clear())}clearTextureAtlas(){var S;(S=this._charAtlas)===null||S===void 0||S.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var S;this._clearModel(!0);for(let x of this._renderLayers)x.reset(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(S){return-1}deregisterCharacterJoiner(S){return!1}renderRows(S,x){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let L of this._renderLayers)L.handleGridChanged(this._terminal,S,x);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(S,x),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new f.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(S,x){let L=this._core,R,A,I,$,H,P,q,z,N,Q,O,W,U,k=this._workCell;S=E(S,L.rows-1,0),x=E(x,L.rows-1,0);let te=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,J=Math.min(this._terminal.buffer.active.cursorX,L.cols-1),ye=-1,Ae=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let we=!1;for(A=S;A<=x;A++)for(I=A+L.buffer.ydisp,$=L.buffer.lines.get(I),this._model.lineLengths[A]=0,H=this._characterJoinerService.getJoinedCharacters(I),W=0;W<L.cols;W++)if(R=this._cellColorResolver.result.bg,$.loadCell(W,k),W===0&&(R=this._cellColorResolver.result.bg),P=!1,q=W,H.length>0&&W===H[0][0]&&(P=!0,z=H.shift(),k=new b(k,$.translateToString(!0,z[0],z[1]),z[1]-z[0]),q=z[1]-1),N=k.getChars(),Q=k.getCode(),O=(A*L.cols+W)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(k,W,I),Ae&&I===te&&(W===J&&(this._model.cursor={x:J,y:this._terminal.buffer.active.cursorY,width:k.getWidth(),style:this._coreBrowserService.isFocused?L.options.cursorStyle||"block":L.options.cursorInactiveStyle,cursorWidth:L.options.cursorWidth,dpr:this._devicePixelRatio},ye=J+k.getWidth()-1),W>=J&&W<=ye&&(this._coreBrowserService.isFocused&&(L.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&L.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),Q!==y.NULL_CELL_CODE&&(this._model.lineLengths[A]=W+1),(this._model.cells[O]!==Q||this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(we=!0,N.length>1&&(Q|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[O]=Q,this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(W,A,Q,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,N,R),P))for(k=this._workCell,W++;W<q;W++)U=(A*L.cols+W)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(W,A,y.NULL_CELL_CODE,0,0,0,y.NULL_CELL_CHAR,0),this._model.cells[U]=y.NULL_CELL_CODE,this._model.cells[U+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[U+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[U+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;we&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(S,x){this._canvas.width===S&&this._canvas.height===x||(this._canvas.width=S,this._canvas.height=x,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let S=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:S,end:S})}}o.WebglRenderer=F,l([C.traceCall],F.prototype,"renderRows",null);class b extends v.AttributeData{constructor(S,x,L){super(),this.content=0,this.combinedData="",this.fg=S.fg,this.bg=S.bg,this.combinedData=x,this._width=L}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(S){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function E(M,S,x=0){return Math.max(Math.min(M,S),x)}o.JoinedCellData=b},381:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GLTexture=o.expandFloat32Array=o.createShader=o.createProgram=o.PROJECTION_MATRIX=void 0;let l=r(374);function u(i,s,f){let p=(0,l.throwIfFalsy)(i.createShader(s));if(i.shaderSource(p,f),i.compileShader(p),i.getShaderParameter(p,i.COMPILE_STATUS))return p;console.error(i.getShaderInfoLog(p)),i.deleteShader(p)}o.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),o.createProgram=function(i,s,f){let p=(0,l.throwIfFalsy)(i.createProgram());if(i.attachShader(p,(0,l.throwIfFalsy)(u(i,i.VERTEX_SHADER,s))),i.attachShader(p,(0,l.throwIfFalsy)(u(i,i.FRAGMENT_SHADER,f))),i.linkProgram(p),i.getProgramParameter(p,i.LINK_STATUS))return p;console.error(i.getProgramInfoLog(p)),i.deleteProgram(p)},o.createShader=u,o.expandFloat32Array=function(i,s){let f=Math.min(2*i.length,s),p=new Float32Array(f);for(let d=0;d<i.length;d++)p[d]=i[d];return p},o.GLTexture=class{constructor(i){this.texture=i,this.version=-1}}},592:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseRenderLayer=void 0;let l=r(627),u=r(237),i=r(374),s=r(859);class f extends s.Disposable{constructor(d,c,_,v,m,y,C,T){super(),this._container=c,this._alpha=m,this._coreBrowserService=y,this._optionsService=C,this._themeService=T,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${_}-layer`),this._canvas.style.zIndex=v.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(D=>{this._refreshCharAtlas(d,D),this.reset(d)})),this.register((0,s.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,i.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(d){}handleFocus(d){}handleCursorMove(d){}handleGridChanged(d,c,_){}handleSelectionChanged(d,c,_,v=!1){}_setTransparency(d,c){if(c===this._alpha)return;let _=this._canvas;this._alpha=c,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,_),this._refreshCharAtlas(d,this._themeService.colors),this.handleGridChanged(d,0,d.rows-1)}_refreshCharAtlas(d,c){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,l.acquireTextureAtlas)(d,this._optionsService.rawOptions,c,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(d,c){this._deviceCellWidth=c.device.cell.width,this._deviceCellHeight=c.device.cell.height,this._deviceCharWidth=c.device.char.width,this._deviceCharHeight=c.device.char.height,this._deviceCharLeft=c.device.char.left,this._deviceCharTop=c.device.char.top,this._canvas.width=c.device.canvas.width,this._canvas.height=c.device.canvas.height,this._canvas.style.width=`${c.css.canvas.width}px`,this._canvas.style.height=`${c.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(d,this._themeService.colors)}_fillBottomLineAtCells(d,c,_=1){this._ctx.fillRect(d*this._deviceCellWidth,(c+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,_*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(d,c,_,v){this._alpha?this._ctx.clearRect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,v*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,v*this._deviceCellHeight))}_fillCharTrueColor(d,c,_,v){this._ctx.font=this._getFont(d,!1,!1),this._ctx.textBaseline=u.TEXT_BASELINE,this._clipCell(_,v,c.getWidth()),this._ctx.fillText(c.getChars(),_*this._deviceCellWidth+this._deviceCharLeft,v*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(d,c,_){this._ctx.beginPath(),this._ctx.rect(d*this._deviceCellWidth,c*this._deviceCellHeight,_*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(d,c,_){return`${_?"italic":""} ${c?d.options.fontWeightBold:d.options.fontWeight} ${d.options.fontSize*this._coreBrowserService.dpr}px ${d.options.fontFamily}`}}o.BaseRenderLayer=f},733:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkRenderLayer=void 0;let l=r(197),u=r(237),i=r(592);class s extends i.BaseRenderLayer{constructor(p,d,c,_,v,m,y){super(c,p,"link",d,!0,v,m,y),this.register(_.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(_.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(p,d){super.resize(p,d),this._state=void 0}reset(p){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let p=this._state.y2-this._state.y1-1;p>0&&this._clearCells(0,this._state.y1+1,this._state.cols,p),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(p){if(p.fg===u.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:p.fg!==void 0&&(0,l.is256Color)(p.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[p.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,p.y1===p.y2)this._fillBottomLineAtCells(p.x1,p.y1,p.x2-p.x1);else{this._fillBottomLineAtCells(p.x1,p.y1,p.cols-p.x1);for(let d=p.y1+1;d<p.y2;d++)this._fillBottomLineAtCells(0,d,p.cols);this._fillBottomLineAtCells(0,p.y2,p.x2)}this._state=p}_handleHideLinkUnderline(p){this._clearCurrentLink()}}o.LinkRenderLayer=s},820:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(r,l,u,i){r.addEventListener(l,u,i);let s=!1;return{dispose:()=>{s||(s=!0,r.removeEventListener(l,u,i))}}}},274:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellColorResolver=void 0;let r,l=0,u=0,i=!1,s=!1,f=!1;o.CellColorResolver=class{constructor(p,d,c,_,v){this._terminal=p,this._selectionRenderModel=d,this._decorationService=c,this._coreBrowserService=_,this._themeService=v,this.result={fg:0,bg:0,ext:0}}resolve(p,d,c){this.result.bg=p.bg,this.result.fg=p.fg,this.result.ext=268435456&p.bg?p.extended.ext:0,u=0,l=0,s=!1,i=!1,f=!1,r=this._themeService.colors,this._decorationService.forEachDecorationAtCell(d,c,"bottom",_=>{_.backgroundColorRGB&&(u=_.backgroundColorRGB.rgba>>8&16777215,s=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,i=!0)}),f=this._selectionRenderModel.isCellSelected(this._terminal,d,c),f&&(u=(this._coreBrowserService.isFocused?r.selectionBackgroundOpaque:r.selectionInactiveBackgroundOpaque).rgba>>8&16777215,s=!0,r.selectionForeground&&(l=r.selectionForeground.rgba>>8&16777215,i=!0)),this._decorationService.forEachDecorationAtCell(d,c,"top",_=>{_.backgroundColorRGB&&(u=_.backgroundColorRGB.rgba>>8&16777215,s=!0),_.foregroundColorRGB&&(l=_.foregroundColorRGB.rgba>>8&16777215,i=!0)}),s&&(u=f?-16777216&p.bg&-134217729|u|50331648:-16777216&p.bg|u|50331648),i&&(l=-16777216&p.fg&-67108865|l|50331648),67108864&this.result.fg&&(s&&!i&&(l=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&r.background.rgba>>8|50331648,i=!0),!s&&i&&(u=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&r.foreground.rgba>>8|50331648,s=!0)),r=void 0,this.result.bg=s?u:this.result.bg,this.result.fg=i?l:this.result.fg}}},627:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.removeTerminalFromCache=o.acquireTextureAtlas=void 0;let l=r(509),u=r(197),i=[];o.acquireTextureAtlas=function(s,f,p,d,c,_,v,m){let y=(0,u.generateConfig)(d,c,_,v,f,p,m);for(let D=0;D<i.length;D++){let g=i[D],w=g.ownedBy.indexOf(s);if(w>=0){if((0,u.configEquals)(g.config,y))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),i.splice(D,1)):g.ownedBy.splice(w,1);break}}for(let D=0;D<i.length;D++){let g=i[D];if((0,u.configEquals)(g.config,y))return g.ownedBy.push(s),g.atlas}let C=s._core,T={atlas:new l.TextureAtlas(document,y,C.unicodeService),config:y,ownedBy:[s]};return i.push(T),T.atlas},o.removeTerminalFromCache=function(s){for(let f=0;f<i.length;f++){let p=i[f].ownedBy.indexOf(s);if(p!==-1){i[f].ownedBy.length===1?(i[f].atlas.dispose(),i.splice(f,1)):i[f].ownedBy.splice(p,1);break}}}},197:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.is256Color=o.configEquals=o.generateConfig=void 0;let l=r(160);o.generateConfig=function(u,i,s,f,p,d,c){let _={foreground:d.foreground,background:d.background,cursor:l.NULL_COLOR,cursorAccent:l.NULL_COLOR,selectionForeground:l.NULL_COLOR,selectionBackgroundTransparent:l.NULL_COLOR,selectionBackgroundOpaque:l.NULL_COLOR,selectionInactiveBackgroundTransparent:l.NULL_COLOR,selectionInactiveBackgroundOpaque:l.NULL_COLOR,ansi:d.ansi.slice(),contrastCache:d.contrastCache,halfContrastCache:d.halfContrastCache};return{customGlyphs:p.customGlyphs,devicePixelRatio:c,letterSpacing:p.letterSpacing,lineHeight:p.lineHeight,deviceCellWidth:u,deviceCellHeight:i,deviceCharWidth:s,deviceCharHeight:f,fontFamily:p.fontFamily,fontSize:p.fontSize,fontWeight:p.fontWeight,fontWeightBold:p.fontWeightBold,allowTransparency:p.allowTransparency,drawBoldTextInBrightColors:p.drawBoldTextInBrightColors,minimumContrastRatio:p.minimumContrastRatio,colors:_}},o.configEquals=function(u,i){for(let s=0;s<u.colors.ansi.length;s++)if(u.colors.ansi[s].rgba!==i.colors.ansi[s].rgba)return!1;return u.devicePixelRatio===i.devicePixelRatio&&u.customGlyphs===i.customGlyphs&&u.lineHeight===i.lineHeight&&u.letterSpacing===i.letterSpacing&&u.fontFamily===i.fontFamily&&u.fontSize===i.fontSize&&u.fontWeight===i.fontWeight&&u.fontWeightBold===i.fontWeightBold&&u.allowTransparency===i.allowTransparency&&u.deviceCharWidth===i.deviceCharWidth&&u.deviceCharHeight===i.deviceCharHeight&&u.drawBoldTextInBrightColors===i.drawBoldTextInBrightColors&&u.minimumContrastRatio===i.minimumContrastRatio&&u.colors.foreground.rgba===i.colors.foreground.rgba&&u.colors.background.rgba===i.colors.background.rgba},o.is256Color=function(u){return(50331648&u)==16777216||(50331648&u)==33554432}},237:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;let l=r(399);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},457:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CursorBlinkStateManager=void 0,o.CursorBlinkStateManager=class{constructor(r,l){this._renderCallback=r,this._coreBrowserService=l,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(r=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let l=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,l>0)return void this._restartInterval(l)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let l=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(l)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},r)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tryDrawCustomChar=o.powerlineDefinitions=o.boxDrawingDefinitions=o.blockElementDefinitions=void 0;let l=r(374);o.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let u={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};o.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u2551":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2552":{1:(d,c)=>`M.5,1 L.5,${.5-c} L1,${.5-c} M.5,${.5+c} L1,${.5+c}`},"\u2553":{1:(d,c)=>`M${.5-d},1 L${.5-d},.5 L1,.5 M${.5+d},.5 L${.5+d},1`},"\u2554":{1:(d,c)=>`M1,${.5-c} L${.5-d},${.5-c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1`},"\u2555":{1:(d,c)=>`M0,${.5-c} L.5,${.5-c} L.5,1 M0,${.5+c} L.5,${.5+c}`},"\u2556":{1:(d,c)=>`M${.5+d},1 L${.5+d},.5 L0,.5 M${.5-d},.5 L${.5-d},1`},"\u2557":{1:(d,c)=>`M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M0,${.5-c} L${.5+d},${.5-c} L${.5+d},1`},"\u2558":{1:(d,c)=>`M.5,0 L.5,${.5+c} L1,${.5+c} M.5,${.5-c} L1,${.5-c}`},"\u2559":{1:(d,c)=>`M1,.5 L${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u255A":{1:(d,c)=>`M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0 M1,${.5+c} L${.5-d},${.5+c} L${.5-d},0`},"\u255B":{1:(d,c)=>`M0,${.5+c} L.5,${.5+c} L.5,0 M0,${.5-c} L.5,${.5-c}`},"\u255C":{1:(d,c)=>`M0,.5 L${.5+d},.5 L${.5+d},0 M${.5-d},.5 L${.5-d},0`},"\u255D":{1:(d,c)=>`M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M0,${.5+c} L${.5+d},${.5+c} L${.5+d},0`},"\u255E":{1:(d,c)=>`M.5,0 L.5,1 M.5,${.5-c} L1,${.5-c} M.5,${.5+c} L1,${.5+c}`},"\u255F":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1 M${.5+d},.5 L1,.5`},"\u2560":{1:(d,c)=>`M${.5-d},0 L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u2561":{1:(d,c)=>`M.5,0 L.5,1 M0,${.5-c} L.5,${.5-c} M0,${.5+c} L.5,${.5+c}`},"\u2562":{1:(d,c)=>`M0,.5 L${.5-d},.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u2563":{1:(d,c)=>`M${.5+d},0 L${.5+d},1 M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0`},"\u2564":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c} M.5,${.5+c} L.5,1`},"\u2565":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},1 M${.5+d},.5 L${.5+d},1`},"\u2566":{1:(d,c)=>`M0,${.5-c} L1,${.5-c} M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1`},"\u2567":{1:(d,c)=>`M.5,0 L.5,${.5-c} M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u2568":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"\u2569":{1:(d,c)=>`M0,${.5+c} L1,${.5+c} M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u256A":{1:(d,c)=>`M.5,0 L.5,1 M0,${.5-c} L1,${.5-c} M0,${.5+c} L1,${.5+c}`},"\u256B":{1:(d,c)=>`M0,.5 L1,.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"\u256C":{1:(d,c)=>`M0,${.5+c} L${.5-d},${.5+c} L${.5-d},1 M1,${.5+c} L${.5+d},${.5+c} L${.5+d},1 M0,${.5-c} L${.5-d},${.5-c} L${.5-d},0 M1,${.5-c} L${.5+d},${.5-c} L${.5+d},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(d,c)=>`M.5,1 L.5,${.5+c/.15*.5} C.5,${.5+c/.15*.5},.5,.5,1,.5`},"\u256E":{1:(d,c)=>`M.5,1 L.5,${.5+c/.15*.5} C.5,${.5+c/.15*.5},.5,.5,0,.5`},"\u256F":{1:(d,c)=>`M.5,0 L.5,${.5-c/.15*.5} C.5,${.5-c/.15*.5},.5,.5,0,.5`},"\u2570":{1:(d,c)=>`M.5,0 L.5,${.5-c/.15*.5} C.5,${.5-c/.15*.5},.5,.5,1,.5`}},o.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},o.powerlineDefinitions["\uE0BB"]=o.powerlineDefinitions["\uE0BD"],o.powerlineDefinitions["\uE0BF"]=o.powerlineDefinitions["\uE0B9"],o.tryDrawCustomChar=function(d,c,_,v,m,y,C,T){let D=o.blockElementDefinitions[c];if(D)return function(b,E,M,S,x,L){for(let R=0;R<E.length;R++){let A=E[R],I=x/8,$=L/8;b.fillRect(M+A.x*I,S+A.y*$,A.w*I,A.h*$)}}(d,D,_,v,m,y),!0;let g=u[c];if(g)return function(b,E,M,S,x,L){let R=i.get(E);R||(R=new Map,i.set(E,R));let A=b.fillStyle;if(typeof A!="string")throw new Error(`Unexpected fillStyle type "${A}"`);let I=R.get(A);if(!I){let $=E[0].length,H=E.length,P=document.createElement("canvas");P.width=$,P.height=H;let q=(0,l.throwIfFalsy)(P.getContext("2d")),z=new ImageData($,H),N,Q,O,W;if(A.startsWith("#"))N=parseInt(A.slice(1,3),16),Q=parseInt(A.slice(3,5),16),O=parseInt(A.slice(5,7),16),W=A.length>7&&parseInt(A.slice(7,9),16)||1;else{if(!A.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${A}" when drawing pattern glyph`);[N,Q,O,W]=A.substring(5,A.length-1).split(",").map(U=>parseFloat(U))}for(let U=0;U<H;U++)for(let k=0;k<$;k++)z.data[4*(U*$+k)]=N,z.data[4*(U*$+k)+1]=Q,z.data[4*(U*$+k)+2]=O,z.data[4*(U*$+k)+3]=E[U][k]*(255*W);q.putImageData(z,0,0),I=(0,l.throwIfFalsy)(b.createPattern(P,null)),R.set(A,I)}b.fillStyle=I,b.fillRect(M,S,x,L)}(d,g,_,v,m,y),!0;let w=o.boxDrawingDefinitions[c];if(w)return function(b,E,M,S,x,L,R){b.strokeStyle=b.fillStyle;for(let[A,I]of Object.entries(E)){let $;b.beginPath(),b.lineWidth=R*Number.parseInt(A),$=typeof I=="function"?I(.15,.15/L*x):I;for(let H of $.split(" ")){let P=H[0],q=f[P];if(!q){console.error(`Could not find drawing instructions for "${P}"`);continue}let z=H.substring(1).split(",");z[0]&&z[1]&&q(b,p(z,x,L,M,S,!0,R))}b.stroke(),b.closePath()}}(d,w,_,v,m,y,T),!0;let F=o.powerlineDefinitions[c];return!!F&&(function(b,E,M,S,x,L,R,A){var I,$;let H=new Path2D;H.rect(M,S,x,L),b.clip(H),b.beginPath();let P=R/12;b.lineWidth=A*P;for(let q of E.d.split(" ")){let z=q[0],N=f[z];if(!N){console.error(`Could not find drawing instructions for "${z}"`);continue}let Q=q.substring(1).split(",");Q[0]&&Q[1]&&N(b,p(Q,x,L,M,S,!1,A,((I=E.leftPadding)!==null&&I!==void 0?I:0)*(P/2),(($=E.rightPadding)!==null&&$!==void 0?$:0)*(P/2)))}E.type===1?(b.strokeStyle=b.fillStyle,b.stroke()):b.fill(),b.closePath()}(d,F,_,v,m,y,C,T),!0)};let i=new Map;function s(d,c,_=0){return Math.max(Math.min(d,c),_)}let f={C:(d,c)=>d.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]),L:(d,c)=>d.lineTo(c[0],c[1]),M:(d,c)=>d.moveTo(c[0],c[1])};function p(d,c,_,v,m,y,C,T=0,D=0){let g=d.map(w=>parseFloat(w)||parseInt(w));if(g.length<2)throw new Error("Too few arguments for instruction");for(let w=0;w<g.length;w+=2)g[w]*=c-T*C-D*C,y&&g[w]!==0&&(g[w]=s(Math.round(g[w]+.5)-.5,c,0)),g[w]+=v+T*C;for(let w=1;w<g.length;w+=2)g[w]*=_,y&&g[w]!==0&&(g[w]=s(Math.round(g[w]+.5)-.5,_,0)),g[w]+=m;return g}},56:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.observeDevicePixelDimensions=void 0;let l=r(859);o.observeDevicePixelDimensions=function(u,i,s){let f=new i.ResizeObserver(p=>{let d=p.find(v=>v.target===u);if(!d)return;if(!("devicePixelContentBoxSize"in d))return f?.disconnect(),void(f=void 0);let c=d.devicePixelContentBoxSize[0].inlineSize,_=d.devicePixelContentBoxSize[0].blockSize;c>0&&_>0&&s(c,_)});try{f.observe(u,{box:["device-pixel-content-box"]})}catch{f.disconnect(),f=void 0}return(0,l.toDisposable)(()=>f?.disconnect())}},374:(h,o)=>{function r(l){return 57508<=l&&l<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.createRenderDimensions=o.excludeFromContrastRatioDemands=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},o.isPowerlineGlyph=r,o.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},o.excludeFromContrastRatioDemands=function(l){return r(l)||function(u){return 9472<=u&&u<=9631}(l)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createSelectionRenderModel=void 0;class r{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,i,s,f=!1){if(this.selectionStart=i,this.selectionEnd=s,!i||!s||i[0]===s[0]&&i[1]===s[1])return void this.clear();let p=i[1]-u.buffer.active.viewportY,d=s[1]-u.buffer.active.viewportY,c=Math.max(p,0),_=Math.min(d,u.rows-1);c>=u.rows||_<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=p,this.viewportEndRow=d,this.viewportCappedStartRow=c,this.viewportCappedEndRow=_,this.startCol=i[0],this.endCol=s[0])}isCellSelected(u,i,s){return!!this.hasSelection&&(s-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?i>=this.startCol&&s>=this.viewportCappedStartRow&&i<this.endCol&&s<=this.viewportCappedEndRow:i<this.startCol&&s>=this.viewportCappedStartRow&&i>=this.endCol&&s<=this.viewportCappedEndRow:s>this.viewportStartRow&&s<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&s===this.viewportStartRow&&i>=this.startCol&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportEndRow&&i<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportStartRow&&i>=this.startCol)}}o.createSelectionRenderModel=function(){return new r}},509:function(h,o,r){var l=this&&this.__decorate||function(F,b,E,M){var S,x=arguments.length,L=x<3?b:M===null?M=Object.getOwnPropertyDescriptor(b,E):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(F,b,E,M);else for(var R=F.length-1;R>=0;R--)(S=F[R])&&(L=(x<3?S(L):x>3?S(b,E,L):S(b,E))||L);return x>3&&L&&Object.defineProperty(b,E,L),L};Object.defineProperty(o,"__esModule",{value:!0}),o.TextureAtlas=void 0;let u=r(237),i=r(860),s=r(374),f=r(160),p=r(345),d=r(485),c=r(385),_=r(147),v=r(855),m=r(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class T{get pages(){return this._pages}constructor(b,E,M){this._document=b,this._config=E,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new d.FourKeyMap,this._cacheMapCombined=new d.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new _.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new p.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new p.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=w(b,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,s.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let b of this.pages)b.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let b=new c.IdleTaskQueue;for(let E=33;E<126;E++)b.enqueue(()=>{if(!this._cacheMap.get(E,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT)){let M=this._drawToCache(E,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT);this._cacheMap.set(E,v.DEFAULT_COLOR,v.DEFAULT_COLOR,v.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let b of this._pages)b.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(T.maxAtlasPages&&this._pages.length>=Math.max(4,T.maxAtlasPages)){let E=this._pages.filter(I=>2*I.canvas.width<=(T.maxTextureSize||4096)).sort((I,$)=>$.canvas.width!==I.canvas.width?$.canvas.width-I.canvas.width:$.percentageUsed-I.percentageUsed),M=-1,S=0;for(let I=0;I<E.length;I++)if(E[I].canvas.width!==S)M=I,S=E[I].canvas.width;else if(I-M==3)break;let x=E.slice(M,M+4),L=x.map(I=>I.glyphs[0].texturePage).sort((I,$)=>I>$?1:-1),R=this.pages.length-x.length,A=this._mergePages(x,R);A.version++;for(let I=L.length-1;I>=0;I--)this._deletePage(L[I]);this.pages.push(A),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(A.canvas)}let b=new D(this._document,this._textureSize);return this._pages.push(b),this._activePages.push(b),this._onAddTextureAtlasCanvas.fire(b.canvas),b}_mergePages(b,E){let M=2*b[0].canvas.width,S=new D(this._document,M,b);for(let[x,L]of b.entries()){let R=x*L.canvas.width%M,A=Math.floor(x/2)*L.canvas.height;S.ctx.drawImage(L.canvas,R,A);for(let $ of L.glyphs)$.texturePage=E,$.sizeClipSpace.x=$.size.x/M,$.sizeClipSpace.y=$.size.y/M,$.texturePosition.x+=R,$.texturePosition.y+=A,$.texturePositionClipSpace.x=$.texturePosition.x/M,$.texturePositionClipSpace.y=$.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(L.canvas);let I=this._activePages.indexOf(L);I!==-1&&this._activePages.splice(I,1)}return S}_deletePage(b){this._pages.splice(b,1);for(let E=b;E<this._pages.length;E++){let M=this._pages[E];for(let S of M.glyphs)S.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(b,E,M,S,x){return this._getFromCacheMap(this._cacheMapCombined,b,E,M,S,x)}getRasterizedGlyph(b,E,M,S,x){return this._getFromCacheMap(this._cacheMap,b,E,M,S,x)}_getFromCacheMap(b,E,M,S,x,L=!1){return C=b.get(E,M,S,x),C||(C=this._drawToCache(E,M,S,x,L),b.set(E,M,S,x,C)),C}_getColorFromAnsiIndex(b){if(b>=this._config.colors.ansi.length)throw new Error("No color found for idx "+b);return this._config.colors.ansi[b]}_getBackgroundColor(b,E,M,S){if(this._config.allowTransparency)return f.NULL_COLOR;let x;switch(b){case 16777216:case 33554432:x=this._getColorFromAnsiIndex(E);break;case 50331648:let L=_.AttributeData.toColorRGB(E);x=f.rgba.toColor(L[0],L[1],L[2]);break;default:x=M?f.color.opaque(this._config.colors.foreground):this._config.colors.background}return x}_getForegroundColor(b,E,M,S,x,L,R,A,I,$){let H=this._getMinimumContrastColor(b,E,M,S,x,L,!1,I,A,$);if(H)return H;let P;switch(x){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&L<8&&(L+=8),P=this._getColorFromAnsiIndex(L);break;case 50331648:let q=_.AttributeData.toColorRGB(L);P=f.rgba.toColor(q[0],q[1],q[2]);break;default:P=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=f.color.opaque(P)),A&&(P=f.color.multiplyOpacity(P,u.DIM_OPACITY)),P}_resolveBackgroundRgba(b,E,M){switch(b){case 16777216:case 33554432:return this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(b,E,M,S){switch(b){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&S&&E<8&&(E+=8),this._getColorFromAnsiIndex(E).rgba;case 50331648:return E<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(b,E,M,S,x,L,R,A,I,$){if(this._config.minimumContrastRatio===1||$)return;let H=this._getContrastCache(I),P=H.getColor(b,S);if(P!==void 0)return P||void 0;let q=this._resolveBackgroundRgba(E,M,R),z=this._resolveForegroundRgba(x,L,R,A),N=f.rgba.ensureContrastRatio(q,z,this._config.minimumContrastRatio/(I?2:1));if(!N)return void H.setColor(b,S,null);let Q=f.rgba.toColor(N>>24&255,N>>16&255,N>>8&255);return H.setColor(b,S,Q),Q}_getContrastCache(b){return b?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(b,E,M,S,x=!1){let L=typeof b=="number"?String.fromCharCode(b):b,R=Math.min(this._config.deviceCellWidth*Math.max(L.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);let A=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<A&&(this._tmpCanvas.height=A),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=E,this._workAttributeData.extended.ext=S,this._workAttributeData.isInvisible())return y;let I=!!this._workAttributeData.isBold(),$=!!this._workAttributeData.isInverse(),H=!!this._workAttributeData.isDim(),P=!!this._workAttributeData.isItalic(),q=!!this._workAttributeData.isUnderline(),z=!!this._workAttributeData.isStrikethrough(),N=!!this._workAttributeData.isOverline(),Q=this._workAttributeData.getFgColor(),O=this._workAttributeData.getFgColorMode(),W=this._workAttributeData.getBgColor(),U=this._workAttributeData.getBgColorMode();if($){let ae=Q;Q=W,W=ae;let K=O;O=U,U=K}let k=this._getBackgroundColor(U,W,$,H);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let te=I?this._config.fontWeightBold:this._config.fontWeight,J=P?"italic":"";this._tmpCtx.font=`${J} ${te} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=u.TEXT_BASELINE;let ye=L.length===1&&(0,s.isPowerlineGlyph)(L.charCodeAt(0)),Ae=L.length===1&&(0,s.isRestrictedPowerlineGlyph)(L.charCodeAt(0)),we=this._getForegroundColor(E,U,W,M,O,Q,$,H,I,(0,s.excludeFromContrastRatioDemands)(L.charCodeAt(0)));this._tmpCtx.fillStyle=we.css;let ce=Ae?0:4,Fe=!1;this._config.customGlyphs!==!1&&(Fe=(0,i.tryDrawCustomChar)(this._tmpCtx,L,ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let It,nn=!ye;if(It=typeof b=="number"?this._unicodeService.wcwidth(b):this._unicodeService.getStringCellWidth(b),q){this._tmpCtx.save();let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),K=ae%2==1?.5:0;if(this._tmpCtx.lineWidth=ae,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())nn=!1,this._tmpCtx.strokeStyle=`rgb(${_.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{nn=!1;let _t=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&_t<8&&(_t+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(_t).css}this._tmpCtx.beginPath();let ie=ce,pe=Math.ceil(ce+this._config.deviceCharHeight)-K-(x?2*ae:0),Ve=pe+ae,rt=pe+2*ae;for(let _t=0;_t<It;_t++){this._tmpCtx.save();let Ge=ie+_t*this._config.deviceCellWidth,Rt=ie+(_t+1)*this._config.deviceCellWidth,Xt=Ge+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe),this._tmpCtx.moveTo(Ge,rt),this._tmpCtx.lineTo(Rt,rt);break;case 3:let Ot=ae<=1?rt:Math.ceil(ce+this._config.deviceCharHeight-ae/2)-K,Yn=ae<=1?pe:Math.ceil(ce+this._config.deviceCharHeight+ae/2)-K,_u=new Path2D;_u.rect(Ge,pe,this._config.deviceCellWidth,rt-pe),this._tmpCtx.clip(_u),this._tmpCtx.moveTo(Ge-this._config.deviceCellWidth/2,Ve),this._tmpCtx.bezierCurveTo(Ge-this._config.deviceCellWidth/2,Yn,Ge,Yn,Ge,Ve),this._tmpCtx.bezierCurveTo(Ge,Ot,Xt,Ot,Xt,Ve),this._tmpCtx.bezierCurveTo(Xt,Yn,Rt,Yn,Rt,Ve),this._tmpCtx.bezierCurveTo(Rt,Ot,Rt+this._config.deviceCellWidth/2,Ot,Rt+this._config.deviceCellWidth/2,Ve);break;case 4:this._tmpCtx.setLineDash([Math.round(ae),Math.round(ae)]),this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe);break;default:this._tmpCtx.moveTo(Ge,pe),this._tmpCtx.lineTo(Rt,pe)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Fe&&this._config.fontSize>=12&&!this._config.allowTransparency&&L!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let _t=this._tmpCtx.measureText(L);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in _t&&_t.actualBoundingBoxDescent>0){this._tmpCtx.save();let Ge=new Path2D;Ge.rect(ie,pe-Math.ceil(ae/2),this._config.deviceCellWidth*It,rt-pe+Math.ceil(ae/2)),this._tmpCtx.clip(Ge),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=k.css,this._tmpCtx.strokeText(L,ce,ce+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(N){let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),K=ae%2==1?.5:0;this._tmpCtx.lineWidth=ae,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+K),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*It,ce+K),this._tmpCtx.stroke()}if(Fe||this._tmpCtx.fillText(L,ce,ce+this._config.deviceCharHeight),L==="_"&&!this._config.allowTransparency){let ae=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),k,we,nn);if(ae)for(let K=1;K<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=k.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(L,ce,ce+this._config.deviceCharHeight-K),ae=g(this._tmpCtx.getImageData(ce,ce,this._config.deviceCellWidth,this._config.deviceCellHeight),k,we,nn),ae);K++);}if(z){let ae=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),K=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ae,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ce,ce+Math.floor(this._config.deviceCharHeight/2)-K),this._tmpCtx.lineTo(ce+this._config.deviceCharWidth*It,ce+Math.floor(this._config.deviceCharHeight/2)-K),this._tmpCtx.stroke()}this._tmpCtx.restore();let Gt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),tt;if(tt=this._config.allowTransparency?function(ae){for(let K=0;K<ae.data.length;K+=4)if(ae.data[K+3]>0)return!1;return!0}(Gt):g(Gt,k,we,nn),tt)return y;let le=this._findGlyphBoundingBox(Gt,this._workBoundingBox,R,Ae,Fe,ce),me,fe;for(;;){if(this._activePages.length===0){let ae=this._createNewPage();me=ae,fe=ae.currentRow,fe.height=le.size.y;break}me=this._activePages[this._activePages.length-1],fe=me.currentRow;for(let ae of this._activePages)le.size.y<=ae.currentRow.height&&(me=ae,fe=ae.currentRow);for(let ae=this._activePages.length-1;ae>=0;ae--)for(let K of this._activePages[ae].fixedRows)K.height<=fe.height&&le.size.y<=K.height&&(me=this._activePages[ae],fe=K);if(fe.y+le.size.y>=me.canvas.height||fe.height>le.size.y+2){let ae=!1;if(me.currentRow.y+me.currentRow.height+le.size.y>=me.canvas.height){let K;for(let ie of this._activePages)if(ie.currentRow.y+ie.currentRow.height+le.size.y<ie.canvas.height){K=ie;break}if(K)me=K;else if(T.maxAtlasPages&&this._pages.length>=T.maxAtlasPages&&fe.y+le.size.y<=me.canvas.height&&fe.height>=le.size.y&&fe.x+le.size.x<=me.canvas.width)ae=!0;else{let ie=this._createNewPage();me=ie,fe=ie.currentRow,fe.height=le.size.y,ae=!0}}ae||(me.currentRow.height>0&&me.fixedRows.push(me.currentRow),fe={x:0,y:me.currentRow.y+me.currentRow.height,height:le.size.y},me.fixedRows.push(fe),me.currentRow={x:0,y:fe.y+fe.height,height:0})}if(fe.x+le.size.x<=me.canvas.width)break;fe===me.currentRow?(fe.x=0,fe.y+=fe.height,fe.height=0):me.fixedRows.splice(me.fixedRows.indexOf(fe),1)}return le.texturePage=this._pages.indexOf(me),le.texturePosition.x=fe.x,le.texturePosition.y=fe.y,le.texturePositionClipSpace.x=fe.x/me.canvas.width,le.texturePositionClipSpace.y=fe.y/me.canvas.height,le.sizeClipSpace.x/=me.canvas.width,le.sizeClipSpace.y/=me.canvas.height,fe.height=Math.max(fe.height,le.size.y),fe.x+=le.size.x,me.ctx.putImageData(Gt,le.texturePosition.x-this._workBoundingBox.left,le.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,le.size.x,le.size.y),me.addGlyph(le),me.version++,le}_findGlyphBoundingBox(b,E,M,S,x,L){E.top=0;let R=S?this._config.deviceCellHeight:this._tmpCanvas.height,A=S?this._config.deviceCellWidth:M,I=!1;for(let $=0;$<R;$++){for(let H=0;H<A;H++){let P=$*this._tmpCanvas.width*4+4*H+3;if(b.data[P]!==0){E.top=$,I=!0;break}}if(I)break}E.left=0,I=!1;for(let $=0;$<L+A;$++){for(let H=0;H<R;H++){let P=H*this._tmpCanvas.width*4+4*$+3;if(b.data[P]!==0){E.left=$,I=!0;break}}if(I)break}E.right=A,I=!1;for(let $=L+A-1;$>=L;$--){for(let H=0;H<R;H++){let P=H*this._tmpCanvas.width*4+4*$+3;if(b.data[P]!==0){E.right=$,I=!0;break}}if(I)break}E.bottom=R,I=!1;for(let $=R-1;$>=0;$--){for(let H=0;H<A;H++){let P=$*this._tmpCanvas.width*4+4*H+3;if(b.data[P]!==0){E.bottom=$,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:E.right-E.left+1,y:E.bottom-E.top+1},sizeClipSpace:{x:E.right-E.left+1,y:E.bottom-E.top+1},offset:{x:-E.left+L+(S||x?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-E.top+L+(S||x?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}o.TextureAtlas=T,l([m.traceCall],T.prototype,"_drawToCache",null);class D{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(b){this._glyphs.push(b),this._usedPixels+=b.size.x*b.size.y}constructor(b,E,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let S of M)this._glyphs.push(...S.glyphs),this._usedPixels+=S._usedPixels;this.canvas=w(b,E,E),this.ctx=(0,s.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(F,b,E,M){let S=b.rgba>>>24,x=b.rgba>>>16&255,L=b.rgba>>>8&255,R=E.rgba>>>24,A=E.rgba>>>16&255,I=E.rgba>>>8&255,$=Math.floor((Math.abs(S-R)+Math.abs(x-A)+Math.abs(L-I))/12),H=!0;for(let P=0;P<F.data.length;P+=4)F.data[P]===S&&F.data[P+1]===x&&F.data[P+2]===L||M&&Math.abs(F.data[P]-S)+Math.abs(F.data[P+1]-x)+Math.abs(F.data[P+2]-L)<$?F.data[P+3]=0:H=!1;return H}function w(F,b,E){let M=F.createElement("canvas");return M.width=b,M.height=E,M}},160:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;let l=r(399),u=0,i=0,s=0,f=0;var p,d,c,_,v;function m(C){let T=C.toString(16);return T.length<2?"0"+T:T}function y(C,T){return C<T?(T+.05)/(C+.05):(C+.05)/(T+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(T,D,g,w){return w!==void 0?`#${m(T)}${m(D)}${m(g)}${m(w)}`:`#${m(T)}${m(D)}${m(g)}`},C.toRgba=function(T,D,g,w=255){return(T<<24|D<<16|g<<8|w)>>>0}}(p||(o.channels=p={})),function(C){function T(D,g){return f=Math.round(255*g),[u,i,s]=v.toChannels(D.rgba),{css:p.toCss(u,i,s,f),rgba:p.toRgba(u,i,s,f)}}C.blend=function(D,g){if(f=(255&g.rgba)/255,f===1)return{css:g.css,rgba:g.rgba};let w=g.rgba>>24&255,F=g.rgba>>16&255,b=g.rgba>>8&255,E=D.rgba>>24&255,M=D.rgba>>16&255,S=D.rgba>>8&255;return u=E+Math.round((w-E)*f),i=M+Math.round((F-M)*f),s=S+Math.round((b-S)*f),{css:p.toCss(u,i,s),rgba:p.toRgba(u,i,s)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,w){let F=v.ensureContrastRatio(D.rgba,g.rgba,w);if(F)return v.toColor(F>>24&255,F>>16&255,F>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,i,s]=v.toChannels(g),{css:p.toCss(u,i,s),rgba:g}},C.opacity=T,C.multiplyOpacity=function(D,g){return f=255&D.rgba,T(D,f*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(d||(o.color=d={})),function(C){let T,D;if(!l.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let w=g.getContext("2d",{willReadFrequently:!0});w&&(T=w,T.globalCompositeOperation="copy",D=T.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),v.toColor(u,i,s);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),f=parseInt(g.slice(4,5).repeat(2),16),v.toColor(u,i,s,f);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let w=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return u=parseInt(w[1]),i=parseInt(w[2]),s=parseInt(w[3]),f=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),v.toColor(u,i,s,f);if(!T||!D)throw new Error("css.toColor: Unsupported css format");if(T.fillStyle=D,T.fillStyle=g,typeof T.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(T.fillRect(0,0,1,1),[u,i,s,f]=T.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(u,i,s,f),css:g}}}(c||(o.css=c={})),function(C){function T(D,g,w){let F=D/255,b=g/255,E=w/255;return .2126*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}C.relativeLuminance=function(D){return T(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=T}(_||(o.rgb=_={})),function(C){function T(g,w,F){let b=g>>24&255,E=g>>16&255,M=g>>8&255,S=w>>24&255,x=w>>16&255,L=w>>8&255,R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));for(;R<F&&(S>0||x>0||L>0);)S-=Math.max(0,Math.ceil(.1*S)),x-=Math.max(0,Math.ceil(.1*x)),L-=Math.max(0,Math.ceil(.1*L)),R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));return(S<<24|x<<16|L<<8|255)>>>0}function D(g,w,F){let b=g>>24&255,E=g>>16&255,M=g>>8&255,S=w>>24&255,x=w>>16&255,L=w>>8&255,R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));for(;R<F&&(S<255||x<255||L<255);)S=Math.min(255,S+Math.ceil(.1*(255-S))),x=Math.min(255,x+Math.ceil(.1*(255-x))),L=Math.min(255,L+Math.ceil(.1*(255-L))),R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));return(S<<24|x<<16|L<<8|255)>>>0}C.ensureContrastRatio=function(g,w,F){let b=_.relativeLuminance(g>>8),E=_.relativeLuminance(w>>8);if(y(b,E)<F){if(E<b){let x=T(g,w,F),L=y(b,_.relativeLuminance(x>>8));if(L<F){let R=D(g,w,F);return L>y(b,_.relativeLuminance(R>>8))?x:R}return x}let M=D(g,w,F),S=y(b,_.relativeLuminance(M>>8));if(S<F){let x=T(g,w,F);return S>y(b,_.relativeLuminance(x>>8))?M:x}return M}},C.reduceLuminance=T,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,w,F,b){return{css:p.toCss(g,w,F,b),rgba:p.toRgba(g,w,F,b)}}}(v||(o.rgba=v={})),o.toPaddedHex=m,o.contrastRatio=y},345:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===r)return void this._listeners.splice(l,1)}}})),this._event}fire(r,l){let u=[];for(let i=0;i<this._listeners.length;i++)u.push(this._listeners[i]);for(let i=0;i<u.length;i++)u[i].call(void 0,r,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(r,l){return r(u=>l.fire(u))}},859:(h,o)=>{function r(l){for(let u of l)u.dispose();l.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){let u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var u;this._isDisposed||l===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},o.toDisposable=function(l){return{dispose:l}},o.disposeArray=r,o.getDisposeArrayDisposable=function(l){return{dispose:()=>r(l)}}},485:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(u,i,s){this._data[u]||(this._data[u]={}),this._data[u][i]=s}get(u,i){return this._data[u]?this._data[u][i]:void 0}clear(){this._data={}}}o.TwoKeyMap=r,o.FourKeyMap=class{constructor(){this._data=new r}set(l,u,i,s,f){this._data.get(l,u)||this._data.set(l,u,new r),this._data.get(l,u).set(i,s,f)}get(l,u,i,s){var f;return(f=this._data.get(l,u))===null||f===void 0?void 0:f.get(i,s)}clear(){this._data.clear()}}},399:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof navigator>"u";let r=o.isNode?"node":navigator.userAgent,l=o.isNode?"node":navigator.platform;o.isFirefox=r.includes("Firefox"),o.isLegacyEdge=r.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(r),o.getSafariVersion=function(){if(!o.isSafari)return 0;let u=r.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),o.isIpad=l==="iPad",o.isIphone=l==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),o.isLinux=l.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(r)},385:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;let l=r(399);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let p=0,d=0,c=f.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),d=Math.max(p,d),_=f.timeRemaining(),1.5*d>_)return c-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-p))}ms`),void this._start();c=_}this.clear()}}class i extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let p=Date.now()+f;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}o.PriorityTaskQueue=i,o.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(s){return requestIdleCallback(s)}_cancelCallback(s){cancelIdleCallback(s)}}:i,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(s){this._queue.clear(),this._queue.enqueue(s)}flush(){this._queue.flush()}}},147:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(i){return[i>>>16&255,i>>>8&255,255&i]}static fromColorRGB(i){return(255&i[0])<<16|(255&i[1])<<8|255&i[2]}clone(){let i=new r;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}o.AttributeData=r;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(i){this._ext&=-67108864,this._ext|=67108863&i}get urlId(){return this._urlId}set urlId(i){this._urlId=i}constructor(i=0,s=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=s}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=l},782:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;let l=r(133),u=r(855),i=r(147);class s extends i.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new i.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let d=new s;return d.setFromCharData(p),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(p[u.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(p[u.CHAR_DATA_CHAR_INDEX].length===2){let c=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let _=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(c-55296)+_-56320+65536|p[u.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[u.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=p[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=s},855:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},133:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},o.utf32ToString=function(r,l=0,u=r.length){let i="";for(let s=l;s<u;++s){let f=r[s];f>65535?(f-=65536,i+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):i+=String.fromCharCode(f)}return i},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,l){let u=r.length;if(!u)return 0;let i=0,s=0;if(this._interim){let f=r.charCodeAt(s++);56320<=f&&f<=57343?l[i++]=1024*(this._interim-55296)+f-56320+65536:(l[i++]=this._interim,l[i++]=f),this._interim=0}for(let f=s;f<u;++f){let p=r.charCodeAt(f);if(55296<=p&&p<=56319){if(++f>=u)return this._interim=p,i;let d=r.charCodeAt(f);56320<=d&&d<=57343?l[i++]=1024*(p-55296)+d-56320+65536:(l[i++]=p,l[i++]=d)}else p!==65279&&(l[i++]=p)}return i}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,l){let u=r.length;if(!u)return 0;let i,s,f,p,d=0,c=0,_=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let T,D=0;for(;(T=63&this.interim[++D])&&D<4;)C<<=6,C|=T;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=g-D;for(;_<w;){if(_>=u)return 0;if(T=r[_++],(192&T)!=128){_--,y=!0;break}this.interim[D++]=T,C<<=6,C|=63&T}y||(g===2?C<128?_--:l[d++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(l[d++]=C):C<65536||C>1114111||(l[d++]=C)),this.interim.fill(0)}let v=u-4,m=_;for(;m<u;){for(;!(!(m<v)||128&(i=r[m])||128&(s=r[m+1])||128&(f=r[m+2])||128&(p=r[m+3]));)l[d++]=i,l[d++]=s,l[d++]=f,l[d++]=p,m+=4;if(i=r[m++],i<128)l[d++]=i;else if((224&i)==192){if(m>=u)return this.interim[0]=i,d;if(s=r[m++],(192&s)!=128){m--;continue}if(c=(31&i)<<6|63&s,c<128){m--;continue}l[d++]=c}else if((240&i)==224){if(m>=u)return this.interim[0]=i,d;if(s=r[m++],(192&s)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[m++],(192&f)!=128){m--;continue}if(c=(15&i)<<12|(63&s)<<6|63&f,c<2048||c>=55296&&c<=57343||c===65279)continue;l[d++]=c}else if((248&i)==240){if(m>=u)return this.interim[0]=i,d;if(s=r[m++],(192&s)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[m++],(192&f)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=f,d;if(p=r[m++],(192&p)!=128){m--;continue}if(c=(7&i)<<18|(63&s)<<12|(63&f)<<6|63&p,c<65536||c>1114111)continue;l[d++]=c}}return d}}},776:function(h,o,r){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,T=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,v,T):y(_,v))||T);return C>3&&T&&Object.defineProperty(_,v,T),T},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;let i=r(859),s=r(97),f={trace:s.LogLevelEnum.TRACE,debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},p,d=o.LogService=class extends i.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let _=0;_<c.length;_++)typeof c[_]=="function"&&(c[_]=c[_]())}_log(c,_,v){this._evalLazyOptionalParams(v),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...v)}trace(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.TRACE&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,c,_)}debug(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.DEBUG&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,c,_)}info(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.INFO&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,c,_)}warn(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.WARN&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,c,_)}error(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.ERROR&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,c,_)}};o.LogService=d=l([u(0,s.IOptionsService)],d),o.setTraceLogger=function(c){p=c},o.traceCall=function(c,_,v){if(typeof v.value!="function")throw new Error("not supported");let m=v.value;v.value=function(...y){if(p.logLevel!==s.LogLevelEnum.TRACE)return m.apply(this,y);p.trace(`GlyphRenderer#${m.name}(${y.map(T=>JSON.stringify(T)).join(", ")})`);let C=m.apply(this,y);return p.trace(`GlyphRenderer#${m.name} return`,C),C}}},726:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;let r="di$target",l="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(u){return u[l]||[]},o.createDecorator=function(u){if(o.serviceRegistry.has(u))return o.serviceRegistry.get(u);let i=function(s,f,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,c,_){c[r]===c?c[l].push({id:d,index:_}):(c[l]=[{id:d,index:_}],c[r]=c)})(i,s,p)};return i.toString=()=>u,o.serviceRegistry.set(u,i),i}},97:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;let l=r(726);var u;o.IBufferService=(0,l.createDecorator)("BufferService"),o.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),o.ICoreService=(0,l.createDecorator)("CoreService"),o.ICharsetService=(0,l.createDecorator)("CharsetService"),o.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(i){i[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.OFF=5]="OFF"}(u||(o.LogLevelEnum=u={})),o.ILogService=(0,l.createDecorator)("LogService"),o.IOptionsService=(0,l.createDecorator)("OptionsService"),o.IOscLinkService=(0,l.createDecorator)("OscLinkService"),o.IUnicodeService=(0,l.createDecorator)("UnicodeService"),o.IDecorationService=(0,l.createDecorator)("DecorationService")}},t={};function n(h){var o=t[h];if(o!==void 0)return o.exports;var r=t[h]={exports:{}};return e[h].call(r.exports,r,r.exports,n),r.exports}var a={};return(()=>{var h=a;Object.defineProperty(h,"__esModule",{value:!0}),h.WebglAddon=void 0;let o=n(345),r=n(859),l=n(399),u=n(666),i=n(776);class s extends r.Disposable{constructor(p){if(l.isSafari&&(0,l.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=p,this._onChangeTextureAtlas=this.register(new o.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new o.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new o.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new o.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(p){let d=p._core;if(!p.element)return void this.register(d.onWillOpen(()=>this.activate(p)));this._terminal=p;let c=d.coreService,_=d.optionsService,v=d,m=v._renderService,y=v._characterJoinerService,C=v._charSizeService,T=v._coreBrowserService,D=v._decorationService,g=v._logService,w=v._themeService;(0,i.setTraceLogger)(g),this._renderer=this.register(new u.WebglRenderer(p,y,C,T,c,D,_,w,this._preserveDrawingBuffer)),this.register((0,o.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,o.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,o.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,o.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),m.setRenderer(this._renderer),this.register((0,r.toDisposable)(()=>{let F=this._terminal._core._renderService;F.setRenderer(this._terminal._core._createRenderer()),F.handleResize(p.cols,p.rows)}))}get textureAtlas(){var p;return(p=this._renderer)===null||p===void 0?void 0:p.textureAtlas}clearTextureAtlas(){var p;(p=this._renderer)===null||p===void 0||p.clearTextureAtlas()}}h.WebglAddon=s})(),a})())});var KP=Tt((Rm,cS)=>{(function(e,t){typeof Rm=="object"&&typeof cS=="object"?cS.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Rm=="object"?Rm.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkComputer=o.WebLinkProvider=void 0,o.WebLinkProvider=class{constructor(l,u,i,s={}){this._terminal=l,this._regex=u,this._handler=i,this._options=s}provideLinks(l,u){let i=r.computeLink(l,this._regex,this._terminal,this._handler);u(this._addCallbacks(i))}_addCallbacks(l){return l.map(u=>(u.leave=this._options.leave,u.hover=(i,s)=>{if(this._options.hover){let{range:f}=u;this._options.hover(i,s,f)}},u))}};class r{static computeLink(u,i,s,f){let p=new RegExp(i.source,(i.flags||"")+"g"),[d,c]=r._getWindowedLineStrings(u-1,s),_=d.join(""),v,m=[];for(;v=p.exec(_);){let y=v[0];try{let F=new URL(y),b=decodeURI(F.toString());if(y!==b&&y+"/"!==b)continue}catch{continue}let[C,T]=r._mapStrIdx(s,c,0,v.index),[D,g]=r._mapStrIdx(s,C,T,y.length);if(C===-1||T===-1||D===-1||g===-1)continue;let w={start:{x:T+1,y:C+1},end:{x:g,y:D+1}};m.push({range:w,text:y,activate:f})}return m}static _getWindowedLineStrings(u,i){let s,f=u,p=u,d=0,c="",_=[];if(s=i.buffer.active.getLine(u)){let v=s.translateToString(!0);if(s.isWrapped&&v[0]!==" "){for(d=0;(s=i.buffer.active.getLine(--f))&&d<2048&&(c=s.translateToString(!0),d+=c.length,_.push(c),s.isWrapped&&c.indexOf(" ")===-1););_.reverse()}for(_.push(v),d=0;(s=i.buffer.active.getLine(++p))&&s.isWrapped&&d<2048&&(c=s.translateToString(!0),d+=c.length,_.push(c),c.indexOf(" ")===-1););}return[_,f]}static _mapStrIdx(u,i,s,f){let p=u.buffer.active,d=p.getNullCell(),c=s;for(;f;){let _=p.getLine(i);if(!_)return[-1,-1];for(let v=c;v<_.length;++v){_.getCell(v,d);let m=d.getChars();if(d.getWidth()&&(f-=m.length||1,v===_.length-1&&m==="")){let y=p.getLine(i+1);y&&y.isWrapped&&(y.getCell(0,d),d.getWidth()===2&&(f+=1))}if(f<0)return[i,v]}i++,c=0}return[i,c]}}o.LinkComputer=r}},t={};function n(h){var o=t[h];if(o!==void 0)return o.exports;var r=t[h]={exports:{}};return e[h](r,r.exports,n),r.exports}var a={};return(()=>{var h=a;Object.defineProperty(h,"__esModule",{value:!0}),h.WebLinksAddon=void 0;let o=n(6),r=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function l(u,i){let s=window.open();if(s){try{s.opener=null}catch{}s.location.href=i}else console.warn("Opening link blocked as opener could not be cleared")}h.WebLinksAddon=class{constructor(u=l,i={}){this._handler=u,this._options=i}activate(u){this._terminal=u;let i=this._options,s=i.urlRegex||r;this._linkProvider=this._terminal.registerLinkProvider(new o.WebLinkProvider(this._terminal,s,this._handler,i))}dispose(){var u;(u=this._linkProvider)===null||u===void 0||u.dispose()}}})(),a})())});var nk=Tt((Om,pS)=>{(function(e,t){if(typeof Om=="object"&&typeof pS=="object")pS.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var a in n)(typeof Om=="object"?Om:e)[a]=n[a]}})(self,()=>(()=>{"use strict";var e={4567:function(h,o,r){var l=this&&this.__decorate||function(m,y,C,T){var D,g=arguments.length,w=g<3?y:T===null?T=Object.getOwnPropertyDescriptor(y,C):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,y,C,T);else for(var F=m.length-1;F>=0;F--)(D=m[F])&&(w=(g<3?D(w):g>3?D(y,C,w):D(y,C))||w);return g>3&&w&&Object.defineProperty(y,C,w),w},u=this&&this.__param||function(m,y){return function(C,T){y(C,T,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;let i=r(9042),s=r(6114),f=r(9924),p=r(844),d=r(5596),c=r(4725),_=r(3656),v=o.AccessibilityManager=class extends p.Disposable{constructor(m,y){super(),this._terminal=m,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new f.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new d.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,_.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,p.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(m){for(let y=0;y<m;y++)this._handleChar(" ")}_handleChar(m){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==m&&(this._charsToAnnounce+=m):this._charsToAnnounce+=m,m===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=i.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&this._liveRegion.remove()}_handleKey(m){this._clearLiveRegion(),/\p{Control}/u.test(m)||this._charsToConsume.push(m)}_refreshRows(m,y){this._liveRegionDebouncer.refresh(m,y,this._terminal.rows)}_renderRows(m,y){let C=this._terminal.buffer,T=C.lines.length.toString();for(let D=m;D<=y;D++){let g=C.translateBufferLineToString(C.ydisp+D,!0),w=(C.ydisp+D+1).toString(),F=this._rowElements[D];F&&(g.length===0?F.innerText="\xA0":F.textContent=g,F.setAttribute("aria-posinset",w),F.setAttribute("aria-setsize",T))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(m,y){let C=m.target,T=this._rowElements[y===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||m.relatedTarget!==T)return;let D,g;if(y===0?(D=C,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=C,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){let w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{let w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),m.preventDefault(),m.stopImmediatePropagation()}_handleResize(m){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>m;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let m=document.createElement("div");return m.setAttribute("role","listitem"),m.tabIndex=-1,this._refreshRowDimensions(m),m}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let m=0;m<this._terminal.rows;m++)this._refreshRowDimensions(this._rowElements[m])}}_refreshRowDimensions(m){m.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=v=l([u(1,c.IRenderService)],v)},3614:(h,o)=>{function r(s){return s.replace(/\r?\n/g,"\r")}function l(s,f){return f?"\x1B[200~"+s+"\x1B[201~":s}function u(s,f,p,d){s=l(s=r(s),p.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),p.triggerDataEvent(s,!0),f.value=""}function i(s,f,p){let d=p.getBoundingClientRect(),c=s.clientX-d.left-10,_=s.clientY-d.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${c}px`,f.style.top=`${_}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=r,o.bracketTextForPaste=l,o.copyHandler=function(s,f){s.clipboardData&&s.clipboardData.setData("text/plain",f.selectionText),s.preventDefault()},o.handlePasteEvent=function(s,f,p,d){s.stopPropagation(),s.clipboardData&&u(s.clipboardData.getData("text/plain"),f,p,d)},o.paste=u,o.moveTextAreaUnderMouseCursor=i,o.rightClickHandler=function(s,f,p,d,c){i(s,f,p),c&&d.rightClickSelect(s),f.value=d.selectionText,f.select()}},7239:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;let l=r(1505);o.ColorContrastCache=class{constructor(){this._color=new l.TwoKeyMap,this._css=new l.TwoKeyMap}setCss(u,i,s){this._css.set(u,i,s)}getCss(u,i){return this._css.get(u,i)}setColor(u,i,s){this._color.set(u,i,s)}getColor(u,i){return this._color.get(u,i)}clear(){this._color.clear(),this._css.clear()}}},3656:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(r,l,u,i){r.addEventListener(l,u,i);let s=!1;return{dispose:()=>{s||(s=!0,r.removeEventListener(l,u,i))}}}},6465:function(h,o,r){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,T=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,v,T):y(_,v))||T);return C>3&&T&&Object.defineProperty(_,v,T),T},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier2=void 0;let i=r(3656),s=r(8460),f=r(844),p=r(2585),d=o.Linkifier2=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new s.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new s.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{let _=this._linkProviders.indexOf(c);_!==-1&&this._linkProviders.splice(_,1)}}}attachToDom(c,_,v){this._element=c,this._mouseService=_,this._renderService=v,this.register((0,i.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,i.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,i.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,i.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;let _=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!_)return;this._isMouseOut=!1;let v=c.composedPath();for(let m=0;m<v.length;m++){let y=v[m];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&_.x===this._lastBufferCell.x&&_.y===this._lastBufferCell.y||(this._handleHover(_),this._lastBufferCell=_)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,_){var v,m;this._activeProviderReplies&&_||((v=this._activeProviderReplies)===null||v===void 0||v.forEach(C=>{C?.forEach(T=>{T.link.dispose&&T.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let y=!1;for(let[C,T]of this._linkProviders.entries())_?!((m=this._activeProviderReplies)===null||m===void 0)&&m.get(C)&&(y=this._checkLinkProviderResult(C,c,y)):T.provideLinks(c.y,D=>{var g,w;if(this._isMouseOut)return;let F=D?.map(b=>({link:b}));(g=this._activeProviderReplies)===null||g===void 0||g.set(C,F),y=this._checkLinkProviderResult(C,c,y),((w=this._activeProviderReplies)===null||w===void 0?void 0:w.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,_){let v=new Set;for(let m=0;m<_.size;m++){let y=_.get(m);if(y)for(let C=0;C<y.length;C++){let T=y[C],D=T.link.range.start.y<c?0:T.link.range.start.x,g=T.link.range.end.y>c?this._bufferService.cols:T.link.range.end.x;for(let w=D;w<=g;w++){if(v.has(w)){y.splice(C--,1);break}v.add(w)}}}}_checkLinkProviderResult(c,_,v){var m;if(!this._activeProviderReplies)return v;let y=this._activeProviderReplies.get(c),C=!1;for(let T=0;T<c;T++)this._activeProviderReplies.has(T)&&!this._activeProviderReplies.get(T)||(C=!0);if(!C&&y){let T=y.find(D=>this._linkAtPosition(D.link,_));T&&(v=!0,this._handleNewLink(T))}if(this._activeProviderReplies.size===this._linkProviders.length&&!v)for(let T=0;T<this._activeProviderReplies.size;T++){let D=(m=this._activeProviderReplies.get(T))===null||m===void 0?void 0:m.find(g=>this._linkAtPosition(g.link,_));if(D){v=!0,this._handleNewLink(D);break}}return v}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;let _=this._positionFromMouseEvent(c,this._element,this._mouseService);_&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,_)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,_){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!_||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=_)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(c.link,_)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var v,m;return(m=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:v=>{var m,y;!((m=this._currentLink)===null||m===void 0)&&m.state&&this._currentLink.state.decorations.pointerCursor!==v&&(this._currentLink.state.decorations.pointerCursor=v,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",v)))}},underline:{get:()=>{var v,m;return(m=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||m===void 0?void 0:m.decorations.underline},set:v=>{var m,y,C;!((m=this._currentLink)===null||m===void 0)&&m.state&&((C=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||C===void 0?void 0:C.decorations.underline)!==v&&(this._currentLink.state.decorations.underline=v,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,v))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(v=>{if(!this._currentLink)return;let m=v.start===0?0:v.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+v.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(m,y),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(c,_,v){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),_.hover&&_.hover(v,_.text)}_fireUnderlineEvent(c,_){let v=c.range,m=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(v.start.x-1,v.start.y-m-1,v.end.x,v.end.y-m-1,void 0);(_?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(c,_,v){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),_.leave&&_.leave(v,_.text)}_linkAtPosition(c,_){let v=c.range.start.y*this._bufferService.cols+c.range.start.x,m=c.range.end.y*this._bufferService.cols+c.range.end.x,y=_.y*this._bufferService.cols+_.x;return v<=y&&y<=m}_positionFromMouseEvent(c,_,v){let m=v.getCoords(c,_,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,_,v,m,y){return{x1:c,y1:_,x2:v,y2:m,cols:this._bufferService.cols,fg:y}}};o.Linkifier2=d=l([u(0,p.IBufferService)],d)},9042:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(h,o,r){var l=this&&this.__decorate||function(d,c,_,v){var m,y=arguments.length,C=y<3?c:v===null?v=Object.getOwnPropertyDescriptor(c,_):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,c,_,v);else for(var T=d.length-1;T>=0;T--)(m=d[T])&&(C=(y<3?m(C):y>3?m(c,_,C):m(c,_))||C);return y>3&&C&&Object.defineProperty(c,_,C),C},u=this&&this.__param||function(d,c){return function(_,v){c(_,v,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;let i=r(511),s=r(2585),f=o.OscLinkProvider=class{constructor(d,c,_){this._bufferService=d,this._optionsService=c,this._oscLinkService=_}provideLinks(d,c){var _;let v=this._bufferService.buffer.lines.get(d-1);if(!v)return void c(void 0);let m=[],y=this._optionsService.rawOptions.linkHandler,C=new i.CellData,T=v.getTrimmedLength(),D=-1,g=-1,w=!1;for(let F=0;F<T;F++)if(g!==-1||v.hasContent(F)){if(v.loadCell(F,C),C.hasExtendedAttrs()&&C.extended.urlId){if(g===-1){g=F,D=C.extended.urlId;continue}w=C.extended.urlId!==D}else g!==-1&&(w=!0);if(w||g!==-1&&F===T-1){let b=(_=this._oscLinkService.getLinkData(D))===null||_===void 0?void 0:_.uri;if(b){let E={start:{x:g+1,y:d},end:{x:F+(w||F!==T-1?0:1),y:d}},M=!1;if(!y?.allowNonHttpProtocols)try{let S=new URL(b);["http:","https:"].includes(S.protocol)||(M=!0)}catch{M=!0}M||m.push({text:b,range:E,activate:(S,x)=>y?y.activate(S,x,E):p(0,x),hover:(S,x)=>{var L;return(L=y?.hover)===null||L===void 0?void 0:L.call(y,S,x,E)},leave:(S,x)=>{var L;return(L=y?.leave)===null||L===void 0?void 0:L.call(y,S,x,E)}})}w=!1,C.hasExtendedAttrs()&&C.extended.urlId?(g=F,D=C.extended.urlId):(g=-1,D=-1)}}c(m)}};function p(d,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){let _=window.open();if(_){try{_.opener=null}catch{}_.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=f=l([u(0,s.IBufferService),u(1,s.IOptionsService),u(2,s.IOscLinkService)],f)},6193:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(r,l){this._parentWindow=r,this._renderCallback=l,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(r){return this._refreshCallbacks.push(r),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(r,l,u){this._rowCount=u,r=r!==void 0?r:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let r=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,l),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let r of this._refreshCallbacks)r(0);this._refreshCallbacks=[]}}},5596:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenDprMonitor=void 0;let l=r(844);class u extends l.Disposable{constructor(s){super(),this._parentWindow=s,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,l.toDisposable)(()=>{this.clearListener()}))}setListener(s){this._listener&&this.clearListener(),this._listener=s,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var s;this._outerListener&&((s=this._resolutionMediaMatchList)===null||s===void 0||s.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}o.ScreenDprMonitor=u},3236:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;let l=r(3614),u=r(3656),i=r(6465),s=r(9042),f=r(3730),p=r(1680),d=r(3107),c=r(5744),_=r(2950),v=r(1296),m=r(428),y=r(4269),C=r(5114),T=r(8934),D=r(3230),g=r(9312),w=r(4725),F=r(6731),b=r(8055),E=r(8969),M=r(8460),S=r(844),x=r(6114),L=r(8437),R=r(2584),A=r(7399),I=r(5941),$=r(9074),H=r(2585),P=r(5435),q=r(4567),z=typeof window<"u"?window.document:null;class N extends E.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=x,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new S.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(i.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance($.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((W,U)=>this.refresh(W,U))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(W=>this._reportWindowsOptions(W))),this.register(this._inputHandler.onColor(W=>this._handleColorEvent(W))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(W=>this._afterResize(W.cols,W.rows))),this.register((0,S.toDisposable)(()=>{var W,U;this._customKeyEventHandler=void 0,(U=(W=this.element)===null||W===void 0?void 0:W.parentNode)===null||U===void 0||U.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let W of O){let U,k="";switch(W.index){case 256:U="foreground",k="10";break;case 257:U="background",k="11";break;case 258:U="cursor",k="12";break;default:U="ansi",k="4;"+W.index}switch(W.type){case 0:let te=b.color.toColorRGB(U==="ansi"?this._themeService.colors.ansi[W.index]:this._themeService.colors[U]);this.coreService.triggerDataEvent(`${R.C0.ESC}]${k};${(0,I.toRgbString)(te)}${R.C1_ESCAPED.ST}`);break;case 1:if(U==="ansi")this._themeService.modifyColors(J=>J.ansi[W.index]=b.rgba.toColor(...W.color));else{let J=U;this._themeService.modifyColors(ye=>ye[J]=b.rgba.toColor(...W.color))}break;case 2:this._themeService.restoreColor(W.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,W=this.buffer.lines.get(O);if(!W)return;let U=Math.min(this.buffer.x,this.cols-1),k=this._renderService.dimensions.css.cell.height,te=W.getWidth(U),J=this._renderService.dimensions.css.cell.width*te,ye=this.buffer.y*this._renderService.dimensions.css.cell.height,Ae=U*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ae+"px",this.textarea.style.top=ye+"px",this.textarea.style.width=J+"px",this.textarea.style.height=k+"px",this.textarea.style.lineHeight=k+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",W=>{this.hasSelection()&&(0,l.copyHandler)(W,this._selectionService)}));let O=W=>(0,l.handlePasteEvent)(W,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,u.addDisposableDomListener)(this.element,"paste",O)),x.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",W=>{W.button===2&&(0,l.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",W=>{(0,l.rightClickHandler)(W,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),x.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",W=>{W.button===1&&(0,l.moveTextAreaUnderMouseCursor)(W,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){var W;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let U=z.createDocumentFragment();this._viewportElement=z.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),U.appendChild(this._viewportElement),this._viewportScrollArea=z.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=z.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=z.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),U.appendChild(this.screenElement),this.textarea=z.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",s.promptLabel),x.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(W=this._document.defaultView)!==null&&W!==void 0?W:window),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",k=>this._handleTextAreaFocus(k))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(m.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(F.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(k=>this._onRender.fire(k))),this.onResize(k=>this._renderService.resize(k.cols,k.rows)),this._compositionView=z.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(_.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(U);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(T.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(p.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(k=>this.scrollLines(k.amount,k.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(k=>this._renderService.handleSelectionChanged(k.start,k.end,k.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(k=>{this.textarea.value=k,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(k=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",k=>this._selectionService.handleMouseDown(k))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",k=>this._handleScreenReaderModeOptionChange(k))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",k=>{!this._overviewRulerRenderer&&k&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(v.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let O=this,W=this.element;function U(J){let ye=O._mouseService.getMouseReportCoords(J,O.screenElement);if(!ye)return!1;let Ae,we;switch(J.overrideType||J.type){case"mousemove":we=32,J.buttons===void 0?(Ae=3,J.button!==void 0&&(Ae=J.button<3?J.button:3)):Ae=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":we=0,Ae=J.button<3?J.button:3;break;case"mousedown":we=1,Ae=J.button<3?J.button:3;break;case"wheel":if(O.viewport.getLinesScrolled(J)===0)return!1;we=J.deltaY<0?0:1,Ae=4;break;default:return!1}return!(we===void 0||Ae===void 0||Ae>4)&&O.coreMouseService.triggerMouseEvent({col:ye.col,row:ye.row,x:ye.x,y:ye.y,button:Ae,action:we,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}let k={mouseup:null,wheel:null,mousedrag:null,mousemove:null},te={mouseup:J=>(U(J),J.buttons||(this._document.removeEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.removeEventListener("mousemove",k.mousedrag)),this.cancel(J)),wheel:J=>(U(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&U(J)},mousemove:J=>{J.buttons||U(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?k.mousemove||(W.addEventListener("mousemove",te.mousemove),k.mousemove=te.mousemove):(W.removeEventListener("mousemove",k.mousemove),k.mousemove=null),16&J?k.wheel||(W.addEventListener("wheel",te.wheel,{passive:!1}),k.wheel=te.wheel):(W.removeEventListener("wheel",k.wheel),k.wheel=null),2&J?k.mouseup||(W.addEventListener("mouseup",te.mouseup),k.mouseup=te.mouseup):(this._document.removeEventListener("mouseup",k.mouseup),W.removeEventListener("mouseup",k.mouseup),k.mouseup=null),4&J?k.mousedrag||(k.mousedrag=te.mousedrag):(this._document.removeEventListener("mousemove",k.mousedrag),k.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(W,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return U(J),k.mouseup&&this._document.addEventListener("mouseup",k.mouseup),k.mousedrag&&this._document.addEventListener("mousemove",k.mousedrag),this.cancel(J)})),this.register((0,u.addDisposableDomListener)(W,"wheel",J=>{if(!k.wheel){if(!this.buffer.hasScrollback){let ye=this.viewport.getLinesScrolled(J);if(ye===0)return;let Ae=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B"),we="";for(let ce=0;ce<Math.abs(ye);ce++)we+=Ae;return this.coreService.triggerDataEvent(we,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(W,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,u.addDisposableDomListener)(W,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(O,W){var U;(U=this._renderService)===null||U===void 0||U.refreshRows(O,W)}updateCursorStyle(O){var W;!((W=this._selectionService)===null||W===void 0)&&W.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,W,U=0){var k;U===1?(super.scrollLines(O,W,U),this.refresh(0,this.rows-1)):(k=this.viewport)===null||k===void 0||k.scrollLines(O)}paste(O){(0,l.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}registerLinkProvider(O){return this.linkifier2.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let W=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),W}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,W,U){this._selectionService.setSelection(O,W,U)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()}selectAll(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()}selectLines(O,W){var U;(U=this._selectionService)===null||U===void 0||U.selectLines(O,W)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let W=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!W&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;W||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let U=(0,A.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),U.type===3||U.type===2){let k=this.rows-1;return this.scrollLines(U.type===2?-k:k),this.cancel(O,!0)}return U.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(U.cancel&&this.cancel(O,!0),!U.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(U.key!==R.C0.ETX&&U.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:U.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(U.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,W){let U=O.isMac&&!this.options.macOptionIsMeta&&W.altKey&&!W.ctrlKey&&!W.metaKey||O.isWindows&&W.altKey&&W.ctrlKey&&!W.metaKey||O.isWindows&&W.getModifierState("AltGraph");return W.type==="keypress"?U:U&&(!W.keyCode||W.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(W){return W.keyCode===16||W.keyCode===17||W.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let W;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)W=O.charCode;else if(O.which===null||O.which===void 0)W=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;W=O.which}return!(!W||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(W=String.fromCharCode(W),this._onKey.fire({key:W,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(W,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let W=O.data;return this.coreService.triggerDataEvent(W,!0),this.cancel(O),!0}return!1}resize(O,W){O!==this.cols||W!==this.rows?super.resize(O,W):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,W){var U,k;(U=this._charSizeService)===null||U===void 0||U.measure(),(k=this.viewport)===null||k===void 0||k.syncScrollArea(!0)}clear(){var O;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let W=1;W<this.rows;W++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(O=this.viewport)===null||O===void 0||O.reset(),this.refresh(0,this.rows-1)}}reset(){var O,W;this.options.rows=this.rows,this.options.cols=this.cols;let U=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),(W=this.viewport)===null||W===void 0||W.reset(),this._customKeyEventHandler=U,this.refresh(0,this.rows-1)}clearTextureAtlas(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()}_reportFocus(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case P.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let W=this._renderService.dimensions.css.canvas.width.toFixed(0),U=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[4;${U};${W}t`);break;case P.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let k=this._renderService.dimensions.css.cell.width.toFixed(0),te=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[6;${te};${k}t`)}}cancel(O,W){if(this.options.cancelEvents||W)return O.preventDefault(),O.stopPropagation(),!1}}o.Terminal=N},9924:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(r,l=1e3){this._renderCallback=r,this._debounceThresholdMS=l,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(r,l,u){this._rowCount=u,r=r!==void 0?r:0,l=l!==void 0?l:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,r):r,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,l):l;let i=Date.now();if(i-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=i,this._innerRefresh();else if(!this._additionalRefreshRequested){let s=i-this._lastRefreshMs,f=this._debounceThresholdMS-s;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let r=Math.max(this._rowStart,0),l=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(r,l)}}},1680:function(h,o,r){var l=this&&this.__decorate||function(_,v,m,y){var C,T=arguments.length,D=T<3?v:y===null?y=Object.getOwnPropertyDescriptor(v,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,v,m,y);else for(var g=_.length-1;g>=0;g--)(C=_[g])&&(D=(T<3?C(D):T>3?C(v,m,D):C(v,m))||D);return T>3&&D&&Object.defineProperty(v,m,D),D},u=this&&this.__param||function(_,v){return function(m,y){v(m,y,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;let i=r(3656),s=r(4725),f=r(8460),p=r(844),d=r(2585),c=o.Viewport=class extends p.Disposable{constructor(_,v,m,y,C,T,D,g){super(),this._viewportElement=_,this._scrollArea=v,this._bufferService=m,this._optionsService=y,this._charSizeService=C,this._renderService=T,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,i.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(_){this._viewportElement.style.backgroundColor=_.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(_){if(_)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let v=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==v&&(this._lastRecordedBufferHeight=v,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let _=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==_&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=_),this._refreshAnimationFrame=null}syncScrollArea(_=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(_);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(_)}_handleScroll(_){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let v=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:v,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let _=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(_*(this._smoothScrollState.target-this._smoothScrollState.origin)),_<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(_,v){let m=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(v<0&&this._viewportElement.scrollTop!==0||v>0&&m<this._lastRecordedBufferHeight)||(_.cancelable&&_.preventDefault(),!1)}handleWheel(_){let v=this._getPixelsScrolled(_);return v!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+v:this._smoothScrollState.target+=v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=v,this._bubbleScroll(_,v))}scrollLines(_){if(_!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let v=_*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!1})}_getPixelsScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let v=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_LINE?v*=this._currentRowHeight:_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._currentRowHeight*this._bufferService.rows),v}getBufferElements(_,v){var m;let y,C="",T=[],D=v??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let w=_;w<D;w++){let F=g.get(w);if(!F)continue;let b=(m=g.get(w+1))===null||m===void 0?void 0:m.isWrapped;if(C+=F.translateToString(!b),!b||w===g.length-1){let E=document.createElement("div");E.textContent=C,T.push(E),C.length>0&&(y=E),C=""}}return{bufferElements:T,cursorElement:y}}getLinesScrolled(_){if(_.deltaY===0||_.shiftKey)return 0;let v=this._applyScrollModifier(_.deltaY,_);return _.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(v/=this._currentRowHeight+0,this._wheelPartialScroll+=v,v=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):_.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._bufferService.rows),v}_applyScrollModifier(_,v){let m=this._optionsService.rawOptions.fastScrollModifier;return m==="alt"&&v.altKey||m==="ctrl"&&v.ctrlKey||m==="shift"&&v.shiftKey?_*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:_*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(_){this._lastTouchY=_.touches[0].pageY}handleTouchMove(_){let v=this._lastTouchY-_.touches[0].pageY;return this._lastTouchY=_.touches[0].pageY,v!==0&&(this._viewportElement.scrollTop+=v,this._bubbleScroll(_,v))}};o.Viewport=c=l([u(2,d.IBufferService),u(3,d.IOptionsService),u(4,s.ICharSizeService),u(5,s.IRenderService),u(6,s.ICoreBrowserService),u(7,s.IThemeService)],c)},3107:function(h,o,r){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,T=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,v,T):y(_,v))||T);return C>3&&T&&Object.defineProperty(_,v,T),T},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;let i=r(3656),s=r(4725),f=r(844),p=r(2585),d=o.BufferDecorationRenderer=class extends f.Disposable{constructor(c,_,v,m){super(),this._screenElement=c,this._bufferService=_,this._decorationService=v,this._renderService=m,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,i.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,f.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var _,v;let m=document.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",((_=c?.options)===null||_===void 0?void 0:_.layer)==="top"),m.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let y=(v=c.options.x)!==null&&v!==void 0?v:0;return y&&y>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(c,m),m}_refreshStyle(c){let _=c.marker.line-this._bufferService.buffers.active.ydisp;if(_<0||_>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let v=this._decorationElements.get(c);v||(v=this._createElement(c),c.element=v,this._decorationElements.set(c,v),this._container.appendChild(v),c.onDispose(()=>{this._decorationElements.delete(c),v.remove()})),v.style.top=_*this._renderService.dimensions.css.cell.height+"px",v.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(v)}}_refreshXPosition(c,_=c.element){var v;if(!_)return;let m=(v=c.options.x)!==null&&v!==void 0?v:0;(c.options.anchor||"left")==="right"?_.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":_.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var _;(_=this._decorationElements.get(c))===null||_===void 0||_.remove(),this._decorationElements.delete(c),c.dispose()}};o.BufferDecorationRenderer=d=l([u(1,p.IBufferService),u(2,p.IDecorationService),u(3,s.IRenderService)],d)},5871:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(r){if(r.options.overviewRulerOptions){for(let l of this._zones)if(l.color===r.options.overviewRulerOptions.color&&l.position===r.options.overviewRulerOptions.position){if(this._lineIntersectsZone(l,r.marker.line))return;if(this._lineAdjacentToZone(l,r.marker.line,r.options.overviewRulerOptions.position))return void this._addLineToZone(l,r.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=r.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=r.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=r.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=r.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:r.options.overviewRulerOptions.color,position:r.options.overviewRulerOptions.position,startBufferLine:r.marker.line,endBufferLine:r.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(r){this._linePadding=r}_lineIntersectsZone(r,l){return l>=r.startBufferLine&&l<=r.endBufferLine}_lineAdjacentToZone(r,l,u){return l>=r.startBufferLine-this._linePadding[u||"full"]&&l<=r.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(r,l){r.startBufferLine=Math.min(r.startBufferLine,l),r.endBufferLine=Math.max(r.endBufferLine,l)}}},5744:function(h,o,r){var l=this&&this.__decorate||function(y,C,T,D){var g,w=arguments.length,F=w<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,T):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,C,T,D);else for(var b=y.length-1;b>=0;b--)(g=y[b])&&(F=(w<3?g(F):w>3?g(C,T,F):g(C,T))||F);return w>3&&F&&Object.defineProperty(C,T,F),F},u=this&&this.__param||function(y,C){return function(T,D){C(T,D,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;let i=r(5871),s=r(3656),f=r(4725),p=r(844),d=r(2585),c={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},v={full:0,left:0,center:0,right:0},m=o.OverviewRulerRenderer=class extends p.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,C,T,D,g,w,F){var b;super(),this._viewportElement=y,this._screenElement=C,this._bufferService=T,this._decorationService=D,this._renderService=g,this._optionsService=w,this._coreBrowseService=F,this._colorZoneStore=new i.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(b=this._viewportElement.parentElement)===null||b===void 0||b.insertBefore(this._canvas,this._viewportElement);let E=this._canvas.getContext("2d");if(!E)throw new Error("Ctx cannot be null");this._ctx=E,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,p.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,s.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let y=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);_.full=this._canvas.width,_.left=y,_.center=C,_.right=y,this._refreshDrawHeightConstants(),v.full=0,v.left=0,v.center=_.left,v.right=_.left+_.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);let y=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);c.left=C,c.center=C,c.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let y=this._colorZoneStore.zones;for(let C of y)C.position!=="full"&&this._renderColorZone(C);for(let C of y)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(v[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-c[y.position||"full"]/2),_[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[y.position||"full"]))}_queueRefresh(y,C){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};o.OverviewRulerRenderer=m=l([u(2,d.IBufferService),u(3,d.IDecorationService),u(4,f.IRenderService),u(5,d.IOptionsService),u(6,f.ICoreBrowserService)],m)},2950:function(h,o,r){var l=this&&this.__decorate||function(d,c,_,v){var m,y=arguments.length,C=y<3?c:v===null?v=Object.getOwnPropertyDescriptor(c,_):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,c,_,v);else for(var T=d.length-1;T>=0;T--)(m=d[T])&&(C=(y<3?m(C):y>3?m(c,_,C):m(c,_))||C);return y>3&&C&&Object.defineProperty(c,_,C),C},u=this&&this.__param||function(d,c){return function(_,v){c(_,v,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;let i=r(4725),s=r(2585),f=r(2584),p=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,c,_,v,m,y){this._textarea=d,this._compositionView=c,this._bufferService=_,this._optionsService=v,this._coreService=m,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){let c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let _;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,_=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),_.length>0&&this._coreService.triggerDataEvent(_,!0)}},0)}else{this._isSendingComposition=!1;let c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){let d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let c=this._textarea.value,_=c.replace(d,"");this._dataAlreadySent=_,c.length>d.length?this._coreService.triggerDataEvent(_,!0):c.length<d.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):c.length===d.length&&c!==d&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),_=this._renderService.dimensions.css.cell.height,v=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,m=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=m+"px",this._compositionView.style.top=v+"px",this._compositionView.style.height=_+"px",this._compositionView.style.lineHeight=_+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let y=this._compositionView.getBoundingClientRect();this._textarea.style.left=m+"px",this._textarea.style.top=v+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};o.CompositionHelper=p=l([u(2,s.IBufferService),u(3,s.IOptionsService),u(4,s.ICoreService),u(5,i.IRenderService)],p)},9806:(h,o)=>{function r(l,u,i){let s=i.getBoundingClientRect(),f=l.getComputedStyle(i),p=parseInt(f.getPropertyValue("padding-left")),d=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-s.left-p,u.clientY-s.top-d]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=r,o.getCoords=function(l,u,i,s,f,p,d,c,_){if(!p)return;let v=r(l,u,i);return v?(v[0]=Math.ceil((v[0]+(_?d/2:0))/d),v[1]=Math.ceil(v[1]/c),v[0]=Math.min(Math.max(v[0],1),s+(_?1:0)),v[1]=Math.min(Math.max(v[1],1),f),v):void 0}},9504:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;let l=r(2584);function u(c,_,v,m){let y=c-i(c,v),C=_-i(_,v),T=Math.abs(y-C)-function(D,g,w){let F=0,b=D-i(D,w),E=g-i(g,w);for(let M=0;M<Math.abs(b-E);M++){let S=s(D,g)==="A"?-1:1,x=w.buffer.lines.get(b+S*M);x?.isWrapped&&F++}return F}(c,_,v);return d(T,p(s(c,_),m))}function i(c,_){let v=0,m=_.buffer.lines.get(c),y=m?.isWrapped;for(;y&&c>=0&&c<_.rows;)v++,m=_.buffer.lines.get(--c),y=m?.isWrapped;return v}function s(c,_){return c>_?"A":"B"}function f(c,_,v,m,y,C){let T=c,D=_,g="";for(;T!==v||D!==m;)T+=y?1:-1,y&&T>C.cols-1?(g+=C.buffer.translateBufferLineToString(D,!1,c,T),T=0,c=0,D++):!y&&T<0&&(g+=C.buffer.translateBufferLineToString(D,!1,0,c+1),T=C.cols-1,c=T,D--);return g+C.buffer.translateBufferLineToString(D,!1,c,T)}function p(c,_){let v=_?"O":"[";return l.C0.ESC+v+c}function d(c,_){c=Math.floor(c);let v="";for(let m=0;m<c;m++)v+=_;return v}o.moveToCellSequence=function(c,_,v,m){let y=v.buffer.x,C=v.buffer.y;if(!v.buffer.hasScrollback)return function(g,w,F,b,E,M){return u(w,b,E,M).length===0?"":d(f(g,w,g,w-i(w,E),!1,E).length,p("D",M))}(y,C,0,_,v,m)+u(C,_,v,m)+function(g,w,F,b,E,M){let S;S=u(w,b,E,M).length>0?b-i(b,E):w;let x=b,L=function(R,A,I,$,H,P){let q;return q=u(I,$,H,P).length>0?$-i($,H):A,R<I&&q<=$||R>=I&&q<$?"C":"D"}(g,w,F,b,E,M);return d(f(g,S,F,x,L==="C",E).length,p(L,M))}(y,C,c,_,v,m);let T;if(C===_)return T=y>c?"D":"C",d(Math.abs(y-c),p(T,m));T=C>_?"D":"C";let D=Math.abs(C-_);return d(function(g,w){return w.cols-g}(C>_?c:y,v)+(D-1)*v.cols+1+((C>_?y:c)-1),p(T,m))}},1296:function(h,o,r){var l=this&&this.__decorate||function(E,M,S,x){var L,R=arguments.length,A=R<3?M:x===null?x=Object.getOwnPropertyDescriptor(M,S):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(E,M,S,x);else for(var I=E.length-1;I>=0;I--)(L=E[I])&&(A=(R<3?L(A):R>3?L(M,S,A):L(M,S))||A);return R>3&&A&&Object.defineProperty(M,S,A),A},u=this&&this.__param||function(E,M){return function(S,x){M(S,x,E)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;let i=r(3787),s=r(2550),f=r(2223),p=r(6171),d=r(4725),c=r(8055),_=r(8460),v=r(844),m=r(2585),y="xterm-dom-renderer-owner-",C="xterm-rows",T="xterm-fg-",D="xterm-bg-",g="xterm-focus",w="xterm-selection",F=1,b=o.DomRenderer=class extends v.Disposable{constructor(E,M,S,x,L,R,A,I,$,H){super(),this._element=E,this._screenElement=M,this._viewportElement=S,this._linkifier2=x,this._charSizeService=R,this._optionsService=A,this._bufferService=I,this._coreBrowserService=$,this._themeService=H,this._terminalClass=F++,this._rowElements=[],this.onRequestRedraw=this.register(new _.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(w),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,p.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(P=>this._injectCss(P))),this._injectCss(this._themeService.colors),this._rowFactory=L.createInstance(i.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(P=>this._handleLinkHover(P))),this.register(this._linkifier2.onHideLinkUnderline(P=>this._handleLinkLeave(P))),this.register((0,v.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new s.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let E=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*E,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*E),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/E),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/E),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let S of this._rowElements)S.style.width=`${this.dimensions.css.canvas.width}px`,S.style.height=`${this.dimensions.css.cell.height}px`,S.style.lineHeight=`${this.dimensions.css.cell.height}px`,S.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let M=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(E){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${C} { color: ${E.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${C} .xterm-dim { color: ${c.color.multiplyOpacity(E.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${E.cursor.css};  color: ${E.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${E.cursor.css}; }}`,M+=`${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${E.cursor.css}; color: ${E.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${E.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${E.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${E.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${w} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${w} div { position: absolute; background-color: ${E.selectionBackgroundOpaque.css};}${this._terminalSelector} .${w} div { position: absolute; background-color: ${E.selectionInactiveBackgroundOpaque.css};}`;for(let[S,x]of E.ansi.entries())M+=`${this._terminalSelector} .${T}${S} { color: ${x.css}; }${this._terminalSelector} .${T}${S}.xterm-dim { color: ${c.color.multiplyOpacity(x,.5).css}; }${this._terminalSelector} .${D}${S} { background-color: ${x.css}; }`;M+=`${this._terminalSelector} .${T}${f.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(E.background).css}; }${this._terminalSelector} .${T}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(E.background),.5).css}; }${this._terminalSelector} .${D}${f.INVERTED_DEFAULT_COLOR} { background-color: ${E.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){let E=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${E}px`,this._rowFactory.defaultSpacing=E}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(E,M){for(let S=this._rowElements.length;S<=M;S++){let x=document.createElement("div");this._rowContainer.appendChild(x),this._rowElements.push(x)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(E,M){this._refreshRowElements(E,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(E,M,S){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(E,M,S),this.renderRows(0,this._bufferService.rows-1),!E||!M)return;let x=E[1]-this._bufferService.buffer.ydisp,L=M[1]-this._bufferService.buffer.ydisp,R=Math.max(x,0),A=Math.min(L,this._bufferService.rows-1);if(R>=this._bufferService.rows||A<0)return;let I=document.createDocumentFragment();if(S){let $=E[0]>M[0];I.appendChild(this._createSelectionElement(R,$?M[0]:E[0],$?E[0]:M[0],A-R+1))}else{let $=x===R?E[0]:0,H=R===L?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,$,H));let P=A-R-1;if(I.appendChild(this._createSelectionElement(R+1,0,this._bufferService.cols,P)),R!==A){let q=L===A?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(A,0,q))}}this._selectionContainer.appendChild(I)}_createSelectionElement(E,M,S,x=1){let L=document.createElement("div");return L.style.height=x*this.dimensions.css.cell.height+"px",L.style.top=E*this.dimensions.css.cell.height+"px",L.style.left=M*this.dimensions.css.cell.width+"px",L.style.width=this.dimensions.css.cell.width*(S-M)+"px",L}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let E of this._rowElements)E.replaceChildren()}renderRows(E,M){let S=this._bufferService.buffer,x=S.ybase+S.y,L=Math.min(S.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink,A=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=E;$<=M;$++){let H=$+S.ydisp,P=this._rowElements[$],q=S.lines.get(H);if(!P||!q)break;P.replaceChildren(...this._rowFactory.createRow(q,H,H===x,A,I,L,R,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!0)}_handleLinkLeave(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!1)}_setCellUnderline(E,M,S,x,L,R){S<0&&(E=0),x<0&&(M=0);let A=this._bufferService.rows-1;S=Math.max(Math.min(S,A),0),x=Math.max(Math.min(x,A),0),L=Math.min(L,this._bufferService.cols);let I=this._bufferService.buffer,$=I.ybase+I.y,H=Math.min(I.x,L-1),P=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,z=this._optionsService.rawOptions.cursorInactiveStyle;for(let N=S;N<=x;++N){let Q=N+I.ydisp,O=this._rowElements[N],W=I.lines.get(Q);if(!O||!W)break;O.replaceChildren(...this._rowFactory.createRow(W,Q,Q===$,q,z,H,P,this.dimensions.css.cell.width,this._widthCache,R?N===S?E:0:-1,R?(N===x?M:L)-1:-1))}}};o.DomRenderer=b=l([u(4,m.IInstantiationService),u(5,d.ICharSizeService),u(6,m.IOptionsService),u(7,m.IBufferService),u(8,d.ICoreBrowserService),u(9,d.IThemeService)],b)},3787:function(h,o,r){var l=this&&this.__decorate||function(T,D,g,w){var F,b=arguments.length,E=b<3?D:w===null?w=Object.getOwnPropertyDescriptor(D,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(T,D,g,w);else for(var M=T.length-1;M>=0;M--)(F=T[M])&&(E=(b<3?F(E):b>3?F(D,g,E):F(D,g))||E);return b>3&&E&&Object.defineProperty(D,g,E),E},u=this&&this.__param||function(T,D){return function(g,w){D(g,w,T)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;let i=r(2223),s=r(643),f=r(511),p=r(2585),d=r(8055),c=r(4725),_=r(4269),v=r(6171),m=r(3734),y=o.DomRendererRowFactory=class{constructor(T,D,g,w,F,b,E){this._document=T,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=w,this._coreService=F,this._decorationService=b,this._themeService=E,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(T,D,g){this._selectionStart=T,this._selectionEnd=D,this._columnSelectMode=g}createRow(T,D,g,w,F,b,E,M,S,x,L){let R=[],A=this._characterJoinerService.getJoinedCharacters(D),I=this._themeService.colors,$,H=T.getNoBgTrimmedLength();g&&H<b+1&&(H=b+1);let P=0,q="",z=0,N=0,Q=0,O=!1,W=0,U=!1,k=0,te=[],J=x!==-1&&L!==-1;for(let ye=0;ye<H;ye++){T.loadCell(ye,this._workCell);let Ae=this._workCell.getWidth();if(Ae===0)continue;let we=!1,ce=ye,Fe=this._workCell;if(A.length>0&&ye===A[0][0]){we=!0;let Ge=A.shift();Fe=new _.JoinedCellData(this._workCell,T.translateToString(!0,Ge[0],Ge[1]),Ge[1]-Ge[0]),ce=Ge[1]-1,Ae=Fe.getWidth()}let It=this._isCellInSelection(ye,D),nn=g&&ye===b,Gt=J&&ye>=x&&ye<=L,tt=!1;this._decorationService.forEachDecorationAtCell(ye,D,void 0,Ge=>{tt=!0});let le=Fe.getChars()||s.WHITESPACE_CELL_CHAR;if(le===" "&&(Fe.isUnderline()||Fe.isOverline())&&(le="\xA0"),k=Ae*M-S.get(le,Fe.isBold(),Fe.isItalic()),$){if(P&&(It&&U||!It&&!U&&Fe.bg===z)&&(It&&U&&I.selectionForeground||Fe.fg===N)&&Fe.extended.ext===Q&&Gt===O&&k===W&&!nn&&!we&&!tt){q+=le,P++;continue}P&&($.textContent=q),$=this._document.createElement("span"),P=0,q=""}else $=this._document.createElement("span");if(z=Fe.bg,N=Fe.fg,Q=Fe.extended.ext,O=Gt,W=k,U=It,we&&b>=ye&&b<=ce&&(b=ye),!this._coreService.isCursorHidden&&nn){if(te.push("xterm-cursor"),this._coreBrowserService.isFocused)E&&te.push("xterm-cursor-blink"),te.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(F)switch(F){case"outline":te.push("xterm-cursor-outline");break;case"block":te.push("xterm-cursor-block");break;case"bar":te.push("xterm-cursor-bar");break;case"underline":te.push("xterm-cursor-underline")}}if(Fe.isBold()&&te.push("xterm-bold"),Fe.isItalic()&&te.push("xterm-italic"),Fe.isDim()&&te.push("xterm-dim"),q=Fe.isInvisible()?s.WHITESPACE_CELL_CHAR:Fe.getChars()||s.WHITESPACE_CELL_CHAR,Fe.isUnderline()&&(te.push(`xterm-underline-${Fe.extended.underlineStyle}`),q===" "&&(q="\xA0"),!Fe.isUnderlineColorDefault()))if(Fe.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${m.AttributeData.toColorRGB(Fe.getUnderlineColor()).join(",")})`;else{let Ge=Fe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Fe.isBold()&&Ge<8&&(Ge+=8),$.style.textDecorationColor=I.ansi[Ge].css}Fe.isOverline()&&(te.push("xterm-overline"),q===" "&&(q="\xA0")),Fe.isStrikethrough()&&te.push("xterm-strikethrough"),Gt&&($.style.textDecoration="underline");let me=Fe.getFgColor(),fe=Fe.getFgColorMode(),ae=Fe.getBgColor(),K=Fe.getBgColorMode(),ie=!!Fe.isInverse();if(ie){let Ge=me;me=ae,ae=Ge;let Rt=fe;fe=K,K=Rt}let pe,Ve,rt,_t=!1;switch(this._decorationService.forEachDecorationAtCell(ye,D,void 0,Ge=>{Ge.options.layer!=="top"&&_t||(Ge.backgroundColorRGB&&(K=50331648,ae=Ge.backgroundColorRGB.rgba>>8&16777215,pe=Ge.backgroundColorRGB),Ge.foregroundColorRGB&&(fe=50331648,me=Ge.foregroundColorRGB.rgba>>8&16777215,Ve=Ge.foregroundColorRGB),_t=Ge.options.layer==="top")}),!_t&&It&&(pe=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,ae=pe.rgba>>8&16777215,K=50331648,_t=!0,I.selectionForeground&&(fe=50331648,me=I.selectionForeground.rgba>>8&16777215,Ve=I.selectionForeground)),_t&&te.push("xterm-decoration-top"),K){case 16777216:case 33554432:rt=I.ansi[ae],te.push(`xterm-bg-${ae}`);break;case 50331648:rt=d.rgba.toColor(ae>>16,ae>>8&255,255&ae),this._addStyle($,`background-color:#${C((ae>>>0).toString(16),"0",6)}`);break;default:ie?(rt=I.foreground,te.push(`xterm-bg-${i.INVERTED_DEFAULT_COLOR}`)):rt=I.background}switch(pe||Fe.isDim()&&(pe=d.color.multiplyOpacity(rt,.5)),fe){case 16777216:case 33554432:Fe.isBold()&&me<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(me+=8),this._applyMinimumContrast($,rt,I.ansi[me],Fe,pe,void 0)||te.push(`xterm-fg-${me}`);break;case 50331648:let Ge=d.rgba.toColor(me>>16&255,me>>8&255,255&me);this._applyMinimumContrast($,rt,Ge,Fe,pe,Ve)||this._addStyle($,`color:#${C(me.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,rt,I.foreground,Fe,pe,void 0)||ie&&te.push(`xterm-fg-${i.INVERTED_DEFAULT_COLOR}`)}te.length&&($.className=te.join(" "),te.length=0),nn||we||tt?$.textContent=q:P++,k!==this.defaultSpacing&&($.style.letterSpacing=`${k}px`),R.push($),ye=ce}return $&&P&&($.textContent=q),R}_applyMinimumContrast(T,D,g,w,F,b){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,v.excludeFromContrastRatioDemands)(w.getCode()))return!1;let E=this._getContrastCache(w),M;if(F||b||(M=E.getColor(D.rgba,g.rgba)),M===void 0){let S=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);M=d.color.ensureContrastRatio(F||D,b||g,S),E.setColor((F||D).rgba,(b||g).rgba,M??null)}return!!M&&(this._addStyle(T,`color:${M.css}`),!0)}_getContrastCache(T){return T.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(T,D){T.setAttribute("style",`${T.getAttribute("style")||""}${D};`)}_isCellInSelection(T,D){let g=this._selectionStart,w=this._selectionEnd;return!(!g||!w)&&(this._columnSelectMode?g[0]<=w[0]?T>=g[0]&&D>=g[1]&&T<w[0]&&D<=w[1]:T<g[0]&&D>=g[1]&&T>=w[0]&&D<=w[1]:D>g[1]&&D<w[1]||g[1]===w[1]&&D===g[1]&&T>=g[0]&&T<w[0]||g[1]<w[1]&&D===w[1]&&T<w[0]||g[1]<w[1]&&D===g[1]&&T>=g[0])}};function C(T,D,g){for(;T.length<g;)T=D+T;return T}o.DomRendererRowFactory=y=l([u(1,c.ICharacterJoinerService),u(2,p.IOptionsService),u(3,c.ICoreBrowserService),u(4,p.ICoreService),u(5,p.IDecorationService),u(6,c.IThemeService)],y)},2550:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(r){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=r.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let l=r.createElement("span"),u=r.createElement("span");u.style.fontWeight="bold";let i=r.createElement("span");i.style.fontStyle="italic";let s=r.createElement("span");s.style.fontWeight="bold",s.style.fontStyle="italic",this._measureElements=[l,u,i,s],this._container.appendChild(l),this._container.appendChild(u),this._container.appendChild(i),this._container.appendChild(s),r.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(r,l,u,i){r===this._font&&l===this._fontSize&&u===this._weight&&i===this._weightBold||(this._font=r,this._fontSize=l,this._weight=u,this._weightBold=i,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${i}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${i}`,this.clear())}get(r,l,u){let i=0;if(!l&&!u&&r.length===1&&(i=r.charCodeAt(0))<256)return this._flat[i]!==-9999?this._flat[i]:this._flat[i]=this._measure(r,0);let s=r;l&&(s+="B"),u&&(s+="I");let f=this._holey.get(s);if(f===void 0){let p=0;l&&(p|=1),u&&(p|=2),f=this._measure(r,p),this._holey.set(s,f)}return f}_measure(r,l){let u=this._measureElements[l];return u.textContent=r.repeat(32),u.offsetWidth/32}}},2223:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;let l=r(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic"},6171:(h,o)=>{function r(l){return 57508<=l&&l<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.createRenderDimensions=o.excludeFromContrastRatioDemands=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l},o.isPowerlineGlyph=r,o.isRestrictedPowerlineGlyph=function(l){return 57520<=l&&l<=57527},o.excludeFromContrastRatioDemands=function(l){return r(l)||function(u){return 9472<=u&&u<=9631}(l)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(r){this._bufferService=r,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?r%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)-1]:[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[r,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let r=this.selectionStart[0]+this.selectionStartLength;return r>this._bufferService.cols?[r%this._bufferService.cols,this.selectionStart[1]+Math.floor(r/this._bufferService.cols)]:[Math.max(r,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let r=this.selectionStart,l=this.selectionEnd;return!(!r||!l)&&(r[1]>l[1]||r[1]===l[1]&&r[0]>l[0])}handleTrim(r){return this.selectionStart&&(this.selectionStart[1]-=r),this.selectionEnd&&(this.selectionEnd[1]-=r),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(h,o,r){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,T=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,v,T):y(_,v))||T);return C>3&&T&&Object.defineProperty(_,v,T),T},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;let i=r(2585),s=r(8460),f=r(844),p=o.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,_,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new s.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new d(c,_,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};o.CharSizeService=p=l([u(2,i.IOptionsService)],p);class d{constructor(_,v,m){this._document=_,this._parentElement=v,this._optionsService=m,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let _={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return _.width!==0&&_.height!==0&&(this._result.width=_.width/32,this._result.height=Math.ceil(_.height)),this._result}}},4269:function(h,o,r){var l=this&&this.__decorate||function(_,v,m,y){var C,T=arguments.length,D=T<3?v:y===null?y=Object.getOwnPropertyDescriptor(v,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,v,m,y);else for(var g=_.length-1;g>=0;g--)(C=_[g])&&(D=(T<3?C(D):T>3?C(v,m,D):C(v,m))||D);return T>3&&D&&Object.defineProperty(v,m,D),D},u=this&&this.__param||function(_,v){return function(m,y){v(m,y,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;let i=r(3734),s=r(643),f=r(511),p=r(2585);class d extends i.AttributeData{constructor(v,m,y){super(),this.content=0,this.combinedData="",this.fg=v.fg,this.bg=v.bg,this.combinedData=m,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(v){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=d;let c=o.CharacterJoinerService=class tk{constructor(v){this._bufferService=v,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(v){let m={id:this._nextCharacterJoinerId++,handler:v};return this._characterJoiners.push(m),m.id}deregister(v){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===v)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(v){if(this._characterJoiners.length===0)return[];let m=this._bufferService.buffer.lines.get(v);if(!m||m.length===0)return[];let y=[],C=m.translateToString(!0),T=0,D=0,g=0,w=m.getFg(0),F=m.getBg(0);for(let b=0;b<m.getTrimmedLength();b++)if(m.loadCell(b,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==F){if(b-T>1){let E=this._getJoinedRanges(C,g,D,m,T);for(let M=0;M<E.length;M++)y.push(E[M])}T=b,g=D,w=this._workCell.fg,F=this._workCell.bg}D+=this._workCell.getChars().length||s.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-T>1){let b=this._getJoinedRanges(C,g,D,m,T);for(let E=0;E<b.length;E++)y.push(b[E])}return y}_getJoinedRanges(v,m,y,C,T){let D=v.substring(m,y),g=[];try{g=this._characterJoiners[0].handler(D)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let F=this._characterJoiners[w].handler(D);for(let b=0;b<F.length;b++)tk._mergeRanges(g,F[b])}catch(F){console.error(F)}return this._stringRangesToCellRanges(g,C,T),g}_stringRangesToCellRanges(v,m,y){let C=0,T=!1,D=0,g=v[C];if(g){for(let w=y;w<this._bufferService.cols;w++){let F=m.getWidth(w),b=m.getString(w).length||s.WHITESPACE_CELL_CHAR.length;if(F!==0){if(!T&&g[0]<=D&&(g[0]=w,T=!0),g[1]<=D){if(g[1]=w,g=v[++C],!g)break;g[0]<=D?(g[0]=w,T=!0):T=!1}D+=b}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(v,m){let y=!1;for(let C=0;C<v.length;C++){let T=v[C];if(y){if(m[1]<=T[0])return v[C-1][1]=m[1],v;if(m[1]<=T[1])return v[C-1][1]=Math.max(m[1],T[1]),v.splice(C,1),v;v.splice(C,1),C--}else{if(m[1]<=T[0])return v.splice(C,0,m),v;if(m[1]<=T[1])return T[0]=Math.min(m[0],T[0]),v;m[0]<T[1]&&(T[0]=Math.min(m[0],T[0]),y=!0)}}return y?v[v.length-1][1]=m[1]:v.push(m),v}};o.CharacterJoinerService=c=l([u(0,p.IBufferService)],c)},5114:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0,o.CoreBrowserService=class{constructor(r,l){this._textarea=r,this.window=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(h,o,r){var l=this&&this.__decorate||function(p,d,c,_){var v,m=arguments.length,y=m<3?d:_===null?_=Object.getOwnPropertyDescriptor(d,c):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,d,c,_);else for(var C=p.length-1;C>=0;C--)(v=p[C])&&(y=(m<3?v(y):m>3?v(d,c,y):v(d,c))||y);return m>3&&y&&Object.defineProperty(d,c,y),y},u=this&&this.__param||function(p,d){return function(c,_){d(c,_,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;let i=r(4725),s=r(9806),f=o.MouseService=class{constructor(p,d){this._renderService=p,this._charSizeService=d}getCoords(p,d,c,_,v){return(0,s.getCoords)(window,p,d,c,_,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,v)}getMouseReportCoords(p,d){let c=(0,s.getCoordsRelativeToElement)(window,p,d);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};o.MouseService=f=l([u(0,i.IRenderService),u(1,i.ICharSizeService)],f)},3230:function(h,o,r){var l=this&&this.__decorate||function(y,C,T,D){var g,w=arguments.length,F=w<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,T):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,C,T,D);else for(var b=y.length-1;b>=0;b--)(g=y[b])&&(F=(w<3?g(F):w>3?g(C,T,F):g(C,T))||F);return w>3&&F&&Object.defineProperty(C,T,F),F},u=this&&this.__param||function(y,C){return function(T,D){C(T,D,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;let i=r(3656),s=r(6193),f=r(5596),p=r(4725),d=r(8460),c=r(844),_=r(7226),v=r(2585),m=o.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,C,T,D,g,w,F,b){if(super(),this._rowCount=y,this._charSizeService=D,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new d.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new d.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new d.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new d.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new s.RenderDebouncer(F.window,(E,M)=>this._renderRows(E,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new f.ScreenDprMonitor(F.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var E;return(E=this._renderer.value)===null||E===void 0?void 0:E.clear()})),this.register(T.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(T.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(T.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register((0,i.addDisposableDomListener)(F.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(b.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in F.window){let E=new F.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});E.observe(C),this.register({dispose:()=>E.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,C,T=!1){this._isPaused?this._needsFullRefresh=!0:(T||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,C,this._rowCount))}_renderRows(y,C){this._renderer.value&&(y=Math.min(y,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(y,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:C}),this._onRender.fire({start:y,end:C}),this._isNextRenderRedrawOnly=!0)}resize(y,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,C;this._renderer.value&&((C=(y=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,C)):this._renderer.value.handleResize(y,C),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,C,T){var D;this._selectionState.start=y,this._selectionState.end=C,this._selectionState.columnSelectMode=T,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(y,C,T)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};o.RenderService=m=l([u(2,v.IOptionsService),u(3,p.ICharSizeService),u(4,v.IDecorationService),u(5,v.IBufferService),u(6,p.ICoreBrowserService),u(7,p.IThemeService)],m)},9312:function(h,o,r){var l=this&&this.__decorate||function(g,w,F,b){var E,M=arguments.length,S=M<3?w:b===null?b=Object.getOwnPropertyDescriptor(w,F):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,w,F,b);else for(var x=g.length-1;x>=0;x--)(E=g[x])&&(S=(M<3?E(S):M>3?E(w,F,S):E(w,F))||S);return M>3&&S&&Object.defineProperty(w,F,S),S},u=this&&this.__param||function(g,w){return function(F,b){w(F,b,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;let i=r(9806),s=r(9504),f=r(456),p=r(4725),d=r(8460),c=r(844),_=r(6114),v=r(4841),m=r(511),y=r(2585),C="\xA0",T=new RegExp(C,"g"),D=o.SelectionService=class extends c.Disposable{constructor(g,w,F,b,E,M,S,x,L){super(),this._element=g,this._screenElement=w,this._linkifier=F,this._bufferService=b,this._coreService=E,this._mouseService=M,this._optionsService=S,this._renderService=x,this._coreBrowserService=L,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=R=>this._handleMouseMove(R),this._mouseUpListener=R=>this._handleMouseUp(R),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(R=>this._handleTrim(R)),this.register(this._bufferService.buffers.onBufferActivate(R=>this._handleBufferActivate(R))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let g=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!g||!w||g[0]===w[0]&&g[1]===w[1])}get selectionText(){let g=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!g||!w)return"";let F=this._bufferService.buffer,b=[];if(this._activeSelectionMode===3){if(g[0]===w[0])return"";let E=g[0]<w[0]?g[0]:w[0],M=g[0]<w[0]?w[0]:g[0];for(let S=g[1];S<=w[1];S++){let x=F.translateBufferLineToString(S,!0,E,M);b.push(x)}}else{let E=g[1]===w[1]?w[0]:void 0;b.push(F.translateBufferLineToString(g[1],!0,g[0],E));for(let M=g[1]+1;M<=w[1]-1;M++){let S=F.lines.get(M),x=F.translateBufferLineToString(M,!0);S?.isWrapped?b[b.length-1]+=x:b.push(x)}if(g[1]!==w[1]){let M=F.lines.get(w[1]),S=F.translateBufferLineToString(w[1],!0,0,w[0]);M&&M.isWrapped?b[b.length-1]+=S:b.push(S)}}return b.map(E=>E.replace(T," ")).join(_.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),_.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){let w=this._getMouseBufferCoords(g),F=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!!(F&&b&&w)&&this._areCoordsInSelection(w,F,b)}isCellInSelection(g,w){let F=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!F||!b)&&this._areCoordsInSelection([g,w],F,b)}_areCoordsInSelection(g,w,F){return g[1]>w[1]&&g[1]<F[1]||w[1]===F[1]&&g[1]===w[1]&&g[0]>=w[0]&&g[0]<F[0]||w[1]<F[1]&&g[1]===F[1]&&g[0]<F[0]||w[1]<F[1]&&g[1]===w[1]&&g[0]>=w[0]}_selectWordAtCursor(g,w){var F,b;let E=(b=(F=this._linkifier.currentLink)===null||F===void 0?void 0:F.link)===null||b===void 0?void 0:b.range;if(E)return this._model.selectionStart=[E.start.x-1,E.start.y-1],this._model.selectionStartLength=(0,v.getRangeLength)(E,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let M=this._getMouseBufferCoords(g);return!!M&&(this._selectWordAt(M,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,w){this._model.clearSelection(),g=Math.max(g,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){let w=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(g){let w=(0,i.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1],F=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=F?0:(w>F&&(w-=F),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(g){return _.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){let w=this._getMouseBufferCoords(g);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(g){return g.altKey&&!(_.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;let w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let F=this._bufferService.buffer;if(this._model.selectionEnd[1]<F.lines.length){let b=F.lines.get(this._model.selectionEnd[1]);b&&b.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){let w=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let F=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(F&&F[0]!==void 0&&F[1]!==void 0){let b=(0,s.moveToCellSequence)(F[0]-1,F[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(b,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let g=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,F=!(!g||!w||g[0]===w[0]&&g[1]===w[1]);F?g&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,w,F)):this._oldHasSelection&&this._fireOnSelectionChange(g,w,F)}_fireOnSelectionChange(g,w,F){this._oldSelectionStart=g,this._oldSelectionEnd=w,this._oldHasSelection=F,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(g,w){let F=w;for(let b=0;w>=b;b++){let E=g.loadCell(b,this._workCell).getChars().length;this._workCell.getWidth()===0?F--:E>1&&w!==b&&(F+=E-1)}return F}setSelection(g,w,F){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,w],this._model.selectionStartLength=F,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,w,F=!0,b=!0){if(g[0]>=this._bufferService.cols)return;let E=this._bufferService.buffer,M=E.lines.get(g[1]);if(!M)return;let S=E.translateBufferLineToString(g[1],!1),x=this._convertViewportColToCharacterIndex(M,g[0]),L=x,R=g[0]-x,A=0,I=0,$=0,H=0;if(S.charAt(x)===" "){for(;x>0&&S.charAt(x-1)===" ";)x--;for(;L<S.length&&S.charAt(L+1)===" ";)L++}else{let z=g[0],N=g[0];M.getWidth(z)===0&&(A++,z--),M.getWidth(N)===2&&(I++,N++);let Q=M.getString(N).length;for(Q>1&&(H+=Q-1,L+=Q-1);z>0&&x>0&&!this._isCharWordSeparator(M.loadCell(z-1,this._workCell));){M.loadCell(z-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(A++,z--):O>1&&($+=O-1,x-=O-1),x--,z--}for(;N<M.length&&L+1<S.length&&!this._isCharWordSeparator(M.loadCell(N+1,this._workCell));){M.loadCell(N+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,N++):O>1&&(H+=O-1,L+=O-1),L++,N++}}L++;let P=x+R-A+$,q=Math.min(this._bufferService.cols,L-x+A+I-$-H);if(w||S.slice(x,L).trim()!==""){if(F&&P===0&&M.getCodePoint(0)!==32){let z=E.lines.get(g[1]-1);if(z&&M.isWrapped&&z.getCodePoint(this._bufferService.cols-1)!==32){let N=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(N){let Q=this._bufferService.cols-N.start;P-=Q,q+=Q}}}if(b&&P+q===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let z=E.lines.get(g[1]+1);if(z?.isWrapped&&z.getCodePoint(0)!==32){let N=this._getWordAt([0,g[1]+1],!1,!1,!0);N&&(q+=N.length)}}return{start:P,length:q}}}_selectWordAt(g,w){let F=this._getWordAt(g,w);if(F){for(;F.start<0;)F.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[F.start,g[1]],this._model.selectionStartLength=F.length}}_selectToWordAt(g){let w=this._getWordAt(g,!0);if(w){let F=g[1];for(;w.start<0;)w.start+=this._bufferService.cols,F--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,F++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,F]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){let w=this._bufferService.buffer.getWrappedRangeForLine(g),F={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,v.getRangeLength)(F,this._bufferService.cols)}};o.SelectionService=D=l([u(3,y.IBufferService),u(4,y.ICoreService),u(5,p.IMouseService),u(6,y.IOptionsService),u(7,p.IRenderService),u(8,p.ICoreBrowserService)],D)},4725:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;let l=r(8343);o.ICharSizeService=(0,l.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),o.IMouseService=(0,l.createDecorator)("MouseService"),o.IRenderService=(0,l.createDecorator)("RenderService"),o.ISelectionService=(0,l.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,l.createDecorator)("ThemeService")},6731:function(h,o,r){var l=this&&this.__decorate||function(D,g,w,F){var b,E=arguments.length,M=E<3?g:F===null?F=Object.getOwnPropertyDescriptor(g,w):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,w,F);else for(var S=D.length-1;S>=0;S--)(b=D[S])&&(M=(E<3?b(M):E>3?b(g,w,M):b(g,w))||M);return E>3&&M&&Object.defineProperty(g,w,M),M},u=this&&this.__param||function(D,g){return function(w,F){g(w,F,D)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;let i=r(7239),s=r(8055),f=r(8460),p=r(844),d=r(2585),c=s.css.toColor("#ffffff"),_=s.css.toColor("#000000"),v=s.css.toColor("#ffffff"),m=s.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[s.css.toColor("#2e3436"),s.css.toColor("#cc0000"),s.css.toColor("#4e9a06"),s.css.toColor("#c4a000"),s.css.toColor("#3465a4"),s.css.toColor("#75507b"),s.css.toColor("#06989a"),s.css.toColor("#d3d7cf"),s.css.toColor("#555753"),s.css.toColor("#ef2929"),s.css.toColor("#8ae234"),s.css.toColor("#fce94f"),s.css.toColor("#729fcf"),s.css.toColor("#ad7fa8"),s.css.toColor("#34e2e2"),s.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let w=0;w<216;w++){let F=g[w/36%6|0],b=g[w/6%6|0],E=g[w%6];D.push({css:s.channels.toCss(F,b,E),rgba:s.channels.toRgba(F,b,E)})}for(let w=0;w<24;w++){let F=8+10*w;D.push({css:s.channels.toCss(F,F,F),rgba:s.channels.toRgba(F,F,F)})}return D})());let C=o.ThemeService=class extends p.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new i.ColorContrastCache,this._halfContrastCache=new i.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:_,cursor:v,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:s.color.blend(_,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:s.color.blend(_,y),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let g=this._colors;if(g.foreground=T(D.foreground,c),g.background=T(D.background,_),g.cursor=T(D.cursor,v),g.cursorAccent=T(D.cursorAccent,m),g.selectionBackgroundTransparent=T(D.selectionBackground,y),g.selectionBackgroundOpaque=s.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=T(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=s.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?T(D.selectionForeground,s.NULL_COLOR):void 0,g.selectionForeground===s.NULL_COLOR&&(g.selectionForeground=void 0),s.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=s.color.opacity(g.selectionBackgroundTransparent,.3)),s.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=s.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=o.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=T(D.black,o.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=T(D.red,o.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=T(D.green,o.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=T(D.yellow,o.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=T(D.blue,o.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=T(D.magenta,o.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=T(D.cyan,o.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=T(D.white,o.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=T(D.brightBlack,o.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=T(D.brightRed,o.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=T(D.brightGreen,o.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=T(D.brightYellow,o.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=T(D.brightBlue,o.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=T(D.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=T(D.brightCyan,o.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=T(D.brightWhite,o.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let w=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let F=0;F<w;F++)g.ansi[F+16]=T(D.extendedAnsi[F],o.DEFAULT_ANSI_COLORS[F+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function T(D,g){if(D!==void 0)try{return s.css.toColor(D)}catch{}return g}o.ThemeService=C=l([u(0,d.IOptionsService)],C)},6349:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;let l=r(8460),u=r(844);class i extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new l.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new l.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new l.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;let p=new Array(f);for(let d=0;d<Math.min(f,this.length);d++)p[d]=this._array[this._getCyclicIndex(d)];this._array=p,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let p=this._length;p<f;p++)this._array[p]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,p){this._array[this._getCyclicIndex(f)]=p}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,p,...d){if(p){for(let c=f;c<this._length-p;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+p)];this._length-=p,this.onDeleteEmitter.fire({index:f,amount:p})}for(let c=this._length-1;c>=f;c--)this._array[this._getCyclicIndex(c+d.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<d.length;c++)this._array[this._getCyclicIndex(f+c)]=d[c];if(d.length&&this.onInsertEmitter.fire({index:f,amount:d.length}),this._length+d.length>this._maxLength){let c=this._length+d.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=d.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,p,d){if(!(p<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let _=p-1;_>=0;_--)this.set(f+_+d,this.get(f+_));let c=f+p+d-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<p;c++)this.set(f+c+d,this.get(f+c))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}o.CircularList=i},1439:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function r(l,u=5){if(typeof l!="object")return l;let i=Array.isArray(l)?[]:{};for(let s in l)i[s]=u<=1?l[s]:l[s]&&r(l[s],u-1);return i}},8055:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;let l=r(6114),u=0,i=0,s=0,f=0;var p,d,c,_,v;function m(C){let T=C.toString(16);return T.length<2?"0"+T:T}function y(C,T){return C<T?(T+.05)/(C+.05):(C+.05)/(T+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(T,D,g,w){return w!==void 0?`#${m(T)}${m(D)}${m(g)}${m(w)}`:`#${m(T)}${m(D)}${m(g)}`},C.toRgba=function(T,D,g,w=255){return(T<<24|D<<16|g<<8|w)>>>0}}(p||(o.channels=p={})),function(C){function T(D,g){return f=Math.round(255*g),[u,i,s]=v.toChannels(D.rgba),{css:p.toCss(u,i,s,f),rgba:p.toRgba(u,i,s,f)}}C.blend=function(D,g){if(f=(255&g.rgba)/255,f===1)return{css:g.css,rgba:g.rgba};let w=g.rgba>>24&255,F=g.rgba>>16&255,b=g.rgba>>8&255,E=D.rgba>>24&255,M=D.rgba>>16&255,S=D.rgba>>8&255;return u=E+Math.round((w-E)*f),i=M+Math.round((F-M)*f),s=S+Math.round((b-S)*f),{css:p.toCss(u,i,s),rgba:p.toRgba(u,i,s)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,w){let F=v.ensureContrastRatio(D.rgba,g.rgba,w);if(F)return v.toColor(F>>24&255,F>>16&255,F>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,i,s]=v.toChannels(g),{css:p.toCss(u,i,s),rgba:g}},C.opacity=T,C.multiplyOpacity=function(D,g){return f=255&D.rgba,T(D,f*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(d||(o.color=d={})),function(C){let T,D;if(!l.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let w=g.getContext("2d",{willReadFrequently:!0});w&&(T=w,T.globalCompositeOperation="copy",D=T.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),v.toColor(u,i,s);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),i=parseInt(g.slice(2,3).repeat(2),16),s=parseInt(g.slice(3,4).repeat(2),16),f=parseInt(g.slice(4,5).repeat(2),16),v.toColor(u,i,s,f);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let w=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return u=parseInt(w[1]),i=parseInt(w[2]),s=parseInt(w[3]),f=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),v.toColor(u,i,s,f);if(!T||!D)throw new Error("css.toColor: Unsupported css format");if(T.fillStyle=D,T.fillStyle=g,typeof T.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(T.fillRect(0,0,1,1),[u,i,s,f]=T.getImageData(0,0,1,1).data,f!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(u,i,s,f),css:g}}}(c||(o.css=c={})),function(C){function T(D,g,w){let F=D/255,b=g/255,E=w/255;return .2126*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}C.relativeLuminance=function(D){return T(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=T}(_||(o.rgb=_={})),function(C){function T(g,w,F){let b=g>>24&255,E=g>>16&255,M=g>>8&255,S=w>>24&255,x=w>>16&255,L=w>>8&255,R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));for(;R<F&&(S>0||x>0||L>0);)S-=Math.max(0,Math.ceil(.1*S)),x-=Math.max(0,Math.ceil(.1*x)),L-=Math.max(0,Math.ceil(.1*L)),R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));return(S<<24|x<<16|L<<8|255)>>>0}function D(g,w,F){let b=g>>24&255,E=g>>16&255,M=g>>8&255,S=w>>24&255,x=w>>16&255,L=w>>8&255,R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));for(;R<F&&(S<255||x<255||L<255);)S=Math.min(255,S+Math.ceil(.1*(255-S))),x=Math.min(255,x+Math.ceil(.1*(255-x))),L=Math.min(255,L+Math.ceil(.1*(255-L))),R=y(_.relativeLuminance2(S,x,L),_.relativeLuminance2(b,E,M));return(S<<24|x<<16|L<<8|255)>>>0}C.ensureContrastRatio=function(g,w,F){let b=_.relativeLuminance(g>>8),E=_.relativeLuminance(w>>8);if(y(b,E)<F){if(E<b){let x=T(g,w,F),L=y(b,_.relativeLuminance(x>>8));if(L<F){let R=D(g,w,F);return L>y(b,_.relativeLuminance(R>>8))?x:R}return x}let M=D(g,w,F),S=y(b,_.relativeLuminance(M>>8));if(S<F){let x=T(g,w,F);return S>y(b,_.relativeLuminance(x>>8))?M:x}return M}},C.reduceLuminance=T,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,w,F,b){return{css:p.toCss(g,w,F,b),rgba:p.toRgba(g,w,F,b)}}}(v||(o.rgba=v={})),o.toPaddedHex=m,o.contrastRatio=y},8969:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;let l=r(844),u=r(2585),i=r(4348),s=r(7866),f=r(744),p=r(7302),d=r(6975),c=r(8460),_=r(1753),v=r(1480),m=r(7994),y=r(9282),C=r(5435),T=r(5981),D=r(2660),g=!1;class w extends l.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(b=>{var E;(E=this._onScrollApi)===null||E===void 0||E.fire(b.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(b){for(let E in b)this.optionsService.options[E]=b[E]}constructor(b){super(),this._windowsWrappingHeuristics=this.register(new l.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new i.InstantiationService,this.optionsService=this.register(new p.OptionsService(b)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(s.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(_.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(v.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(m.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(E=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(E=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new T.WriteBuffer((E,M)=>this._inputHandler.parse(E,M))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(b,E){this._writeBuffer.write(b,E)}writeSync(b,E){this._logService.logLevel<=u.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(b,E)}resize(b,E){isNaN(b)||isNaN(E)||(b=Math.max(b,f.MINIMUM_COLS),E=Math.max(E,f.MINIMUM_ROWS),this._bufferService.resize(b,E))}scroll(b,E=!1){this._bufferService.scroll(b,E)}scrollLines(b,E,M){this._bufferService.scrollLines(b,E,M)}scrollPages(b){this.scrollLines(b*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(b){let E=b-this._bufferService.buffer.ydisp;E!==0&&this.scrollLines(E)}registerEscHandler(b,E){return this._inputHandler.registerEscHandler(b,E)}registerDcsHandler(b,E){return this._inputHandler.registerDcsHandler(b,E)}registerCsiHandler(b,E){return this._inputHandler.registerCsiHandler(b,E)}registerOscHandler(b,E){return this._inputHandler.registerOscHandler(b,E)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let b=!1,E=this.optionsService.rawOptions.windowsPty;E&&E.buildNumber!==void 0&&E.buildNumber!==void 0?b=E.backend==="conpty"&&E.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(b=!0),b?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let b=[];b.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),b.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,l.toDisposable)(()=>{for(let E of b)E.dispose()})}}}o.CoreTerminal=w},8460:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=r=>(this._listeners.push(r),{dispose:()=>{if(!this._disposed){for(let l=0;l<this._listeners.length;l++)if(this._listeners[l]===r)return void this._listeners.splice(l,1)}}})),this._event}fire(r,l){let u=[];for(let i=0;i<this._listeners.length;i++)u.push(this._listeners[i]);for(let i=0;i<u.length;i++)u[i].call(void 0,r,l)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(r,l){return r(u=>l.fire(u))}},5435:function(h,o,r){var l=this&&this.__decorate||function(R,A,I,$){var H,P=arguments.length,q=P<3?A:$===null?$=Object.getOwnPropertyDescriptor(A,I):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(R,A,I,$);else for(var z=R.length-1;z>=0;z--)(H=R[z])&&(q=(P<3?H(q):P>3?H(A,I,q):H(A,I))||q);return P>3&&q&&Object.defineProperty(A,I,q),q},u=this&&this.__param||function(R,A){return function(I,$){A(I,$,R)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;let i=r(2584),s=r(7116),f=r(2015),p=r(844),d=r(482),c=r(8437),_=r(8460),v=r(643),m=r(511),y=r(3734),C=r(2585),T=r(6242),D=r(6351),g=r(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},F=131072;function b(R,A){if(R>24)return A.setWinLines||!1;switch(R){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var E;(function(R){R[R.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",R[R.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(E||(o.WindowsOptionsReportType=E={}));let M=0;class S extends p.Disposable{getAttrData(){return this._curAttrData}constructor(A,I,$,H,P,q,z,N,Q=new f.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=I,this._coreService=$,this._logService=H,this._optionsService=P,this._oscLinkService=q,this._coreMouseService=z,this._unicodeService=N,this._parser=Q,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new m.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new _.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new _.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new _.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new _.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new _.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new _.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new _.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new _.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new _.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new _.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new _.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new _.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new _.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new x(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,W)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:W.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,W,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:W,data:U})}),this._parser.setDcsHandlerFallback((O,W,U)=>{W==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:W,payload:U})}),this._parser.setPrintHandler((O,W,U)=>this.print(O,W,U)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(i.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(i.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(i.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(i.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(i.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(i.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(i.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(i.C1.IND,()=>this.index()),this._parser.setExecuteHandler(i.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(i.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new T.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new T.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new T.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new T.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new T.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new T.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new T.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new T.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new T.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new T.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new T.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new T.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let O in s.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((O,W)=>this.requestStatusString(O,W)))}_preserveStack(A,I,$,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=$,this._parseStack.position=H}_logSlowResolvingAsync(A){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([A,new Promise((I,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,I){let $,H=this._activeBuffer.x,P=this._activeBuffer.y,q=0,z=this._parseStack.paused;if(z){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync($),$;H=this._parseStack.cursorStartX,P=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>F&&(q=this._parseStack.position+F)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,N=>String.fromCharCode(N)).join("")}"`),typeof A=="string"?A.split("").map(N=>N.charCodeAt(0)):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<F&&(this._parseBuffer=new Uint32Array(Math.min(A.length,F))),z||this._dirtyRowTracker.clearRange(),A.length>F)for(let N=q;N<A.length;N+=F){let Q=N+F<A.length?N+F:A.length,O=typeof A=="string"?this._stringDecoder.decode(A.substring(N,Q),this._parseBuffer):this._utf8Decoder.decode(A.subarray(N,Q),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,O))return this._preserveStack(H,P,O,N),this._logSlowResolvingAsync($),$}else if(!z){let N=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,N))return this._preserveStack(H,P,N,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===H&&this._activeBuffer.y===P||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,I,$){let H,P,q=this._charsetService.charset,z=this._optionsService.rawOptions.screenReaderMode,N=this._bufferService.cols,Q=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,W=this._curAttrData,U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-I>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodePoint(this._activeBuffer.x-1,0,1,W.fg,W.bg,W.extended);for(let k=I;k<$;++k){if(H=A[k],P=this._unicodeService.wcwidth(H),H<127&&q){let te=q[String.fromCharCode(H)];te&&(H=te.charCodeAt(0))}if(z&&this._onA11yChar.fire((0,d.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),P||!this._activeBuffer.x){if(this._activeBuffer.x+P-1>=N){if(Q){for(;this._activeBuffer.x<N;)U.setCellFromCodePoint(this._activeBuffer.x++,0,1,W.fg,W.bg,W.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=N-1,P===2)continue}if(O&&(U.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(W),W),U.getWidth(N-1)===2&&U.setCellFromCodePoint(N-1,v.NULL_CELL_CODE,v.NULL_CELL_WIDTH,W.fg,W.bg,W.extended)),U.setCellFromCodePoint(this._activeBuffer.x++,H,P,W.fg,W.bg,W.extended),P>0)for(;--P;)U.setCellFromCodePoint(this._activeBuffer.x++,0,0,W.fg,W.bg,W.extended)}else U.getWidth(this._activeBuffer.x-1)?U.addCodepointToCell(this._activeBuffer.x-1,H):U.addCodepointToCell(this._activeBuffer.x-2,H)}$-I>0&&(U.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<N&&$-I>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodePoint(this._activeBuffer.x,0,1,W.fg,W.bg,W.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,I){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,I):this._parser.registerCsiHandler(A,$=>!b($.params[0],this._optionsService.rawOptions.windowOptions)||I($))}registerDcsHandler(A,I){return this._parser.registerDcsHandler(A,new D.DcsHandler(I))}registerEscHandler(A,I){return this._parser.registerEscHandler(A,I)}registerOscHandler(A,I){return this._parser.registerOscHandler(A,new T.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=A,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+I)}cursorUp(A){let I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){let I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){let I=A.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){let I=A.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,I,$,H=!1,P=!1){let q=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);q.replaceCells(I,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),P),H&&(q.isWrapped=!1)}_resetBufferLine(A,I=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),$.isWrapped=!1)}eraseInDisplay(A,I=!1){let $;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);$<this._bufferService.rows;$++)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 3:let H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(A,I=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;I--;)this._activeBuffer.lines.splice(P-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;I--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);H.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;let I=A.params[0]||1,$=new Uint32Array(I);for(let H=0;H<I;++H)$[H]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(i.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(i.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(i.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(i.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(i.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,s.DEFAULT_CHARSET),this._charsetService.setgCharset(1,s.DEFAULT_CHARSET),this._charsetService.setgCharset(2,s.DEFAULT_CHARSET),this._charsetService.setgCharset(3,s.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,I){let $=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:P}=this._coreMouseService,q=this._coreService,{buffers:z,cols:N}=this._bufferService,{active:Q,alt:O}=z,W=this._optionsService.rawOptions,U=ye=>ye?1:2,k=A.params[0];return te=k,J=I?k===2?4:k===4?U(q.modes.insertMode):k===12?3:k===20?U(W.convertEol):0:k===1?U($.applicationCursorKeys):k===3?W.windowOptions.setWinLines?N===80?2:N===132?1:0:0:k===6?U($.origin):k===7?U($.wraparound):k===8?3:k===9?U(H==="X10"):k===12?U(W.cursorBlink):k===25?U(!q.isCursorHidden):k===45?U($.reverseWraparound):k===66?U($.applicationKeypad):k===67?4:k===1e3?U(H==="VT200"):k===1002?U(H==="DRAG"):k===1003?U(H==="ANY"):k===1004?U($.sendFocus):k===1005?4:k===1006?U(P==="SGR"):k===1015?4:k===1016?U(P==="SGR_PIXELS"):k===1048?1:k===47||k===1047||k===1049?U(Q===O):k===2004?U($.bracketedPasteMode):0,q.triggerDataEvent(`${i.C0.ESC}[${I?"":"?"}${te};${J}$y`),!0;var te,J}_updateAttrColor(A,I,$,H,P){return I===2?(A|=50331648,A&=-16777216,A|=y.AttributeData.fromColorRGB([$,H,P])):I===5&&(A&=-50331904,A|=33554432|255&$),A}_extractColor(A,I,$){let H=[0,0,-1,0,0,0],P=0,q=0;do{if(H[q+P]=A.params[I+q],A.hasSubParams(I+q)){let z=A.getSubParams(I+q),N=0;do H[1]===5&&(P=1),H[q+N+1+P]=z[N];while(++N<z.length&&N+q+1+P<H.length);break}if(H[1]===5&&q+P>=2||H[1]===2&&q+P>=5)break;H[1]&&(P=1)}while(++q+I<A.length&&q+P<H.length);for(let z=2;z<H.length;++z)H[z]===-1&&(H[z]=0);switch(H[0]){case 38:$.fg=this._updateAttrColor($.fg,H[1],H[3],H[4],H[5]);break;case 48:$.bg=this._updateAttrColor($.bg,H[1],H[3],H[4],H[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,H[1],H[3],H[4],H[5])}return q}_processUnderline(A,I){I.extended=I.extended.clone(),(!~A||A>5)&&(A=1),I.extended.underlineStyle=A,I.fg|=268435456,A===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(A){A.fg=c.DEFAULT_ATTR_DATA.fg,A.bg=c.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;let I=A.length,$,H=this._curAttrData;for(let P=0;P<I;P++)$=A.params[P],$>=30&&$<=37?(H.fg&=-50331904,H.fg|=16777216|$-30):$>=40&&$<=47?(H.bg&=-50331904,H.bg|=16777216|$-40):$>=90&&$<=97?(H.fg&=-50331904,H.fg|=16777224|$-90):$>=100&&$<=107?(H.bg&=-50331904,H.bg|=16777224|$-100):$===0?this._processSGR0(H):$===1?H.fg|=134217728:$===3?H.bg|=67108864:$===4?(H.fg|=268435456,this._processUnderline(A.hasSubParams(P)?A.getSubParams(P)[0]:1,H)):$===5?H.fg|=536870912:$===7?H.fg|=67108864:$===8?H.fg|=1073741824:$===9?H.fg|=2147483648:$===2?H.bg|=134217728:$===21?this._processUnderline(2,H):$===22?(H.fg&=-134217729,H.bg&=-134217729):$===23?H.bg&=-67108865:$===24?(H.fg&=-268435457,this._processUnderline(0,H)):$===25?H.fg&=-536870913:$===27?H.fg&=-67108865:$===28?H.fg&=-1073741825:$===29?H.fg&=2147483647:$===39?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):$===49?(H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?P+=this._extractColor(A,P,H):$===53?H.bg|=1073741824:$===55?H.bg&=-1073741825:$===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):$===100?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${i.C0.ESC}[0n`);break;case 6:let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${i.C0.ESC}[${I};${$}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${i.C0.ESC}[?${I};${$}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){let I=A.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let $=I%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(A){let I=A.params[0]||1,$;return(A.length<2||($=A.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(A){if(!b(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;let I=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(E.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(E.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${i.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){let I=[],$=A.split(";");for(;$.length>1;){let H=$.shift(),P=$.shift();if(/^\d+$/.exec(H)){let q=parseInt(H);if(L(q))if(P==="?")I.push({type:0,index:q});else{let z=(0,g.parseColor)(P);z&&I.push({type:1,index:q,color:z})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(A){let I=A.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(A,I){this._getCurrentLinkId()&&this._finishHyperlink();let $=A.split(":"),H,P=$.findIndex(q=>q.startsWith("id="));return P!==-1&&(H=$[P].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,I){let $=A.split(";");for(let H=0;H<$.length&&!(I>=this._specialColors.length);++H,++I)if($[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{let P=(0,g.parseColor)($[H]);P&&this._onColor.fire([{type:1,index:this._specialColors[I],color:P}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;let I=[],$=A.split(";");for(let H=0;H<$.length;++H)if(/^\d+$/.exec($[H])){let P=parseInt($[H]);L(P)&&I.push({type:2,index:P})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,s.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(w[A[0]],s.CHARSETS[A[1]]||s.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){let A=new m.CellData;A.content=4194373,A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){let $=this._activeBuffer.ybase+this._activeBuffer.y+I,H=this._activeBuffer.lines.get($);H&&(H.fill(A),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,I){let $=this._bufferService.buffer,H=this._optionsService.rawOptions;return(P=>(this._coreService.triggerDataEvent(`${i.C0.ESC}${P}${i.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,I){this._dirtyRowTracker.markRangeDirty(A,I)}}o.InputHandler=S;let x=class{constructor(R){this._bufferService=R,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(R){R<this.start?this.start=R:R>this.end&&(this.end=R)}markRangeDirty(R,A){R>A&&(M=R,R=A,A=M),R<this.start&&(this.start=R),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function L(R){return 0<=R&&R<256}x=l([u(0,C.IBufferService)],x)},844:(h,o)=>{function r(l){for(let u of l)u.dispose();l.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let l of this._disposables)l.dispose();this._disposables.length=0}register(l){return this._disposables.push(l),l}unregister(l){let u=this._disposables.indexOf(l);u!==-1&&this._disposables.splice(u,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(l){var u;this._isDisposed||l===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=l)}clear(){this.value=void 0}dispose(){var l;this._isDisposed=!0,(l=this._value)===null||l===void 0||l.dispose(),this._value=void 0}},o.toDisposable=function(l){return{dispose:l}},o.disposeArray=r,o.getDisposeArrayDisposable=function(l){return{dispose:()=>r(l)}}},1505:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class r{constructor(){this._data={}}set(u,i,s){this._data[u]||(this._data[u]={}),this._data[u][i]=s}get(u,i){return this._data[u]?this._data[u][i]:void 0}clear(){this._data={}}}o.TwoKeyMap=r,o.FourKeyMap=class{constructor(){this._data=new r}set(l,u,i,s,f){this._data.get(l,u)||this._data.set(l,u,new r),this._data.get(l,u).set(i,s,f)}get(l,u,i,s){var f;return(f=this._data.get(l,u))===null||f===void 0?void 0:f.get(i,s)}clear(){this._data.clear()}}},6114:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof navigator>"u";let r=o.isNode?"node":navigator.userAgent,l=o.isNode?"node":navigator.platform;o.isFirefox=r.includes("Firefox"),o.isLegacyEdge=r.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(r),o.getSafariVersion=function(){if(!o.isSafari)return 0;let u=r.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(l),o.isIpad=l==="iPad",o.isIphone=l==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(l),o.isLinux=l.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(r)},6106:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let r=0;o.SortedList=class{constructor(l){this._getKey=l,this._array=[]}clear(){this._array.length=0}insert(l){this._array.length!==0?(r=this._search(this._getKey(l)),this._array.splice(r,0,l)):this._array.push(l)}delete(l){if(this._array.length===0)return!1;let u=this._getKey(l);if(u===void 0||(r=this._search(u),r===-1)||this._getKey(this._array[r])!==u)return!1;do if(this._array[r]===l)return this._array.splice(r,1),!0;while(++r<this._array.length&&this._getKey(this._array[r])===u);return!1}*getKeyIterator(l){if(this._array.length!==0&&(r=this._search(l),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===l))do yield this._array[r];while(++r<this._array.length&&this._getKey(this._array[r])===l)}forEachByKey(l,u){if(this._array.length!==0&&(r=this._search(l),!(r<0||r>=this._array.length)&&this._getKey(this._array[r])===l))do u(this._array[r]);while(++r<this._array.length&&this._getKey(this._array[r])===l)}values(){return[...this._array].values()}_search(l){let u=0,i=this._array.length-1;for(;i>=u;){let s=u+i>>1,f=this._getKey(this._array[s]);if(f>l)i=s-1;else{if(!(f<l)){for(;s>0&&this._getKey(this._array[s-1])===l;)s--;return s}u=s+1}}return u}}},7226:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;let l=r(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let p=0,d=0,c=f.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),d=Math.max(p,d),_=f.timeRemaining(),1.5*d>_)return c-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-p))}ms`),void this._start();c=_}this.clear()}}class i extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){let p=Date.now()+f;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}o.PriorityTaskQueue=i,o.IdleTaskQueue=!l.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(s){return requestIdleCallback(s)}_cancelCallback(s){cancelIdleCallback(s)}}:i,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(s){this._queue.clear(),this._queue.enqueue(s)}flush(){this._queue.flush()}}},9282:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;let l=r(643);o.updateWindowsModeWrappedState=function(u){let i=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),s=i?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&s&&(f.isWrapped=s[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&s[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class r{constructor(){this.fg=0,this.bg=0,this.extended=new l}static toColorRGB(i){return[i>>>16&255,i>>>8&255,255&i]}static fromColorRGB(i){return(255&i[0])<<16|(255&i[1])<<8|255&i[2]}clone(){let i=new r;return i.fg=this.fg,i.bg=this.bg,i.extended=this.extended.clone(),i}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}o.AttributeData=r;class l{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(i){this._ext=i}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(i){this._ext&=-469762049,this._ext|=i<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(i){this._ext&=-67108864,this._ext|=67108863&i}get urlId(){return this._urlId}set urlId(i){this._urlId=i}constructor(i=0,s=0){this._ext=0,this._urlId=0,this._ext=i,this._urlId=s}clone(){return new l(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=l},9092:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;let l=r(6349),u=r(7226),i=r(3734),s=r(8437),f=r(4634),p=r(511),d=r(643),c=r(4863),_=r(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(v,m,y){this._hasScrollback=v,this._optionsService=m,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=s.DEFAULT_ATTR_DATA.clone(),this.savedCharset=_.DEFAULT_CHARSET,this.markers=[],this._nullCell=p.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=p.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(v){return v?(this._nullCell.fg=v.fg,this._nullCell.bg=v.bg,this._nullCell.extended=v.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new i.ExtendedAttrs),this._nullCell}getWhitespaceCell(v){return v?(this._whitespaceCell.fg=v.fg,this._whitespaceCell.bg=v.bg,this._whitespaceCell.extended=v.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new i.ExtendedAttrs),this._whitespaceCell}getBlankLine(v,m){return new s.BufferLine(this._bufferService.cols,this.getNullCell(v),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let v=this.ybase+this.y-this.ydisp;return v>=0&&v<this._rows}_getCorrectBufferLength(v){if(!this._hasScrollback)return v;let m=v+this._optionsService.rawOptions.scrollback;return m>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:m}fillViewportRows(v){if(this.lines.length===0){v===void 0&&(v=s.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(v))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(v,m){let y=this.getNullCell(s.DEFAULT_ATTR_DATA),C=0,T=this._getCorrectBufferLength(m);if(T>this.lines.maxLength&&(this.lines.maxLength=T),this.lines.length>0){if(this._cols<v)for(let g=0;g<this.lines.length;g++)C+=+this.lines.get(g).resize(v,y);let D=0;if(this._rows<m)for(let g=this._rows;g<m;g++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new s.BufferLine(v,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new s.BufferLine(v,y)));else for(let g=this._rows;g>m;g--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(T<this.lines.maxLength){let g=this.lines.length-T;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=T}this.x=Math.min(this.x,v-1),this.y=Math.min(this.y,m-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,v-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(v,m),this._cols>v))for(let D=0;D<this.lines.length;D++)C+=+this.lines.get(D).resize(v,y);this._cols=v,this._rows=m,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let v=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,v=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return v}get _isReflowEnabled(){let v=this._optionsService.rawOptions.windowsPty;return v&&v.buildNumber?this._hasScrollback&&v.backend==="conpty"&&v.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(v,m){this._cols!==v&&(v>this._cols?this._reflowLarger(v,m):this._reflowSmaller(v,m))}_reflowLarger(v,m){let y=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,v,this.ybase+this.y,this.getNullCell(s.DEFAULT_ATTR_DATA));if(y.length>0){let C=(0,f.reflowLargerCreateNewLayout)(this.lines,y);(0,f.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(v,m,C.countRemoved)}}_reflowLargerAdjustViewport(v,m,y){let C=this.getNullCell(s.DEFAULT_ATTR_DATA),T=y;for(;T-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new s.BufferLine(v,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(v,m){let y=this.getNullCell(s.DEFAULT_ATTR_DATA),C=[],T=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=v)continue;let w=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),w.unshift(g);let F=this.ybase+this.y;if(F>=D&&F<D+w.length)continue;let b=w[w.length-1].getTrimmedLength(),E=(0,f.reflowSmallerGetNewLineLengths)(w,this._cols,v),M=E.length-w.length,S;S=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let x=[];for(let H=0;H<M;H++){let P=this.getBlankLine(s.DEFAULT_ATTR_DATA,!0);x.push(P)}x.length>0&&(C.push({start:D+w.length+T,newLines:x}),T+=x.length),w.push(...x);let L=E.length-1,R=E[L];R===0&&(L--,R=E[L]);let A=w.length-M-1,I=b;for(;A>=0;){let H=Math.min(I,R);if(w[L]===void 0)break;if(w[L].copyCellsFrom(w[A],I-H,R-H,H,!0),R-=H,R===0&&(L--,R=E[L]),I-=H,I===0){A--;let P=Math.max(A,0);I=(0,f.getWrappedLineTrimmedLength)(w,P,this._cols)}}for(let H=0;H<w.length;H++)E[H]<v&&w[H].setCell(E[H],y);let $=M-S;for(;$-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+T)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+m-1)}if(C.length>0){let D=[],g=[];for(let L=0;L<this.lines.length;L++)g.push(this.lines.get(L));let w=this.lines.length,F=w-1,b=0,E=C[b];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+T);let M=0;for(let L=Math.min(this.lines.maxLength-1,w+T-1);L>=0;L--)if(E&&E.start>F+M){for(let R=E.newLines.length-1;R>=0;R--)this.lines.set(L--,E.newLines[R]);L++,D.push({index:F+1,amount:E.newLines.length}),M+=E.newLines.length,E=C[++b]}else this.lines.set(L,g[F--]);let S=0;for(let L=D.length-1;L>=0;L--)D[L].index+=S,this.lines.onInsertEmitter.fire(D[L]),S+=D[L].amount;let x=Math.max(0,w+T-this.lines.maxLength);x>0&&this.lines.onTrimEmitter.fire(x)}}translateBufferLineToString(v,m,y=0,C){let T=this.lines.get(v);return T?T.translateToString(m,y,C):""}getWrappedRangeForLine(v){let m=v,y=v;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:m,last:y}}setupTabStops(v){for(v!=null?this.tabs[v]||(v=this.prevStop(v)):(this.tabs={},v=0);v<this._cols;v+=this._optionsService.rawOptions.tabStopWidth)this.tabs[v]=!0}prevStop(v){for(v==null&&(v=this.x);!this.tabs[--v]&&v>0;);return v>=this._cols?this._cols-1:v<0?0:v}nextStop(v){for(v==null&&(v=this.x);!this.tabs[++v]&&v<this._cols;);return v>=this._cols?this._cols-1:v<0?0:v}clearMarkers(v){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===v&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].dispose(),this.markers.splice(v--,1);this._isClearing=!1}addMarker(v){let m=new c.Marker(v);return this.markers.push(m),m.register(this.lines.onTrim(y=>{m.line-=y,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(y=>{m.line>=y.index&&(m.line+=y.amount)})),m.register(this.lines.onDelete(y=>{m.line>=y.index&&m.line<y.index+y.amount&&m.dispose(),m.line>y.index&&(m.line-=y.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(v){this._isClearing||this.markers.splice(this.markers.indexOf(v),1)}}},8437:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;let l=r(3734),u=r(511),i=r(643),s=r(482);o.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let f=0;class p{constructor(c,_,v=!1){this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);let m=_||u.CellData.fromCharData([0,i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE]);for(let y=0;y<c;++y)this.setCell(y,m);this.length=c}get(c){let _=this._data[3*c+0],v=2097151&_;return[this._data[3*c+1],2097152&_?this._combined[c]:v?(0,s.stringFromCodePoint)(v):"",_>>22,2097152&_?this._combined[c].charCodeAt(this._combined[c].length-1):v]}set(c,_){this._data[3*c+1]=_[i.CHAR_DATA_ATTR_INDEX],_[i.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=_[1],this._data[3*c+0]=2097152|c|_[i.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=_[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[i.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){let _=this._data[3*c+0];return 2097152&_?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&_}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){let _=this._data[3*c+0];return 2097152&_?this._combined[c]:2097151&_?(0,s.stringFromCodePoint)(2097151&_):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,_){return f=3*c,_.content=this._data[f+0],_.fg=this._data[f+1],_.bg=this._data[f+2],2097152&_.content&&(_.combinedData=this._combined[c]),268435456&_.bg&&(_.extended=this._extendedAttrs[c]),_}setCell(c,_){2097152&_.content&&(this._combined[c]=_.combinedData),268435456&_.bg&&(this._extendedAttrs[c]=_.extended),this._data[3*c+0]=_.content,this._data[3*c+1]=_.fg,this._data[3*c+2]=_.bg}setCellFromCodePoint(c,_,v,m,y,C){268435456&y&&(this._extendedAttrs[c]=C),this._data[3*c+0]=_|v<<22,this._data[3*c+1]=m,this._data[3*c+2]=y}addCodepointToCell(c,_){let v=this._data[3*c+0];2097152&v?this._combined[c]+=(0,s.stringFromCodePoint)(_):(2097151&v?(this._combined[c]=(0,s.stringFromCodePoint)(2097151&v)+(0,s.stringFromCodePoint)(_),v&=-2097152,v|=2097152):v=_|4194304,this._data[3*c+0]=v)}insertCells(c,_,v,m){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs),_<this.length-c){let y=new u.CellData;for(let C=this.length-c-_-1;C>=0;--C)this.setCell(c+_+C,this.loadCell(c+C,y));for(let C=0;C<_;++C)this.setCell(c+C,v)}else for(let y=c;y<this.length;++y)this.setCell(y,v);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs)}deleteCells(c,_,v,m){if(c%=this.length,_<this.length-c){let y=new u.CellData;for(let C=0;C<this.length-c-_;++C)this.setCell(c+C,this.loadCell(c+_+C,y));for(let C=this.length-_;C<this.length;++C)this.setCell(C,v)}else for(let y=c;y<this.length;++y)this.setCell(y,v);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs)}replaceCells(c,_,v,m,y=!1){if(y)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&!this.isProtected(_)&&this.setCellFromCodePoint(_,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs);c<_&&c<this.length;)this.isProtected(c)||this.setCell(c,v),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&this.setCellFromCodePoint(_,0,1,m?.fg||0,m?.bg||0,m?.extended||new l.ExtendedAttrs);c<_&&c<this.length;)this.setCell(c++,v)}resize(c,_){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let v=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*v)this._data=new Uint32Array(this._data.buffer,0,v);else{let m=new Uint32Array(v);m.set(this._data),this._data=m}for(let m=this.length;m<c;++m)this.setCell(m,_)}else{this._data=this._data.subarray(0,v);let m=Object.keys(this._combined);for(let C=0;C<m.length;C++){let T=parseInt(m[C],10);T>=c&&delete this._combined[T]}let y=Object.keys(this._extendedAttrs);for(let C=0;C<y.length;C++){let T=parseInt(y[C],10);T>=c&&delete this._extendedAttrs[T]}}return this.length=c,4*v*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,_=!1){if(_)for(let v=0;v<this.length;++v)this.isProtected(v)||this.setCell(v,c);else{this._combined={},this._extendedAttrs={};for(let v=0;v<this.length;++v)this.setCell(v,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(let _ in c._combined)this._combined[_]=c._combined[_];this._extendedAttrs={};for(let _ in c._extendedAttrs)this._extendedAttrs[_]=c._extendedAttrs[_];this.isWrapped=c.isWrapped}clone(){let c=new p(0);c._data=new Uint32Array(this._data),c.length=this.length;for(let _ in this._combined)c._combined[_]=this._combined[_];for(let _ in this._extendedAttrs)c._extendedAttrs[_]=this._extendedAttrs[_];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,_,v,m,y){let C=c._data;if(y)for(let D=m-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(v+D)+g]=C[3*(_+D)+g];268435456&C[3*(_+D)+2]&&(this._extendedAttrs[v+D]=c._extendedAttrs[_+D])}else for(let D=0;D<m;D++){for(let g=0;g<3;g++)this._data[3*(v+D)+g]=C[3*(_+D)+g];268435456&C[3*(_+D)+2]&&(this._extendedAttrs[v+D]=c._extendedAttrs[_+D])}let T=Object.keys(c._combined);for(let D=0;D<T.length;D++){let g=parseInt(T[D],10);g>=_&&(this._combined[g-_+v]=c._combined[g])}}translateToString(c=!1,_=0,v=this.length){c&&(v=Math.min(v,this.getTrimmedLength()));let m="";for(;_<v;){let y=this._data[3*_+0],C=2097151&y;m+=2097152&y?this._combined[_]:C?(0,s.stringFromCodePoint)(C):i.WHITESPACE_CELL_CHAR,_+=y>>22||1}return m}}o.BufferLine=p},4841:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(r,l){if(r.start.y>r.end.y)throw new Error(`Buffer range end (${r.end.x}, ${r.end.y}) cannot be before start (${r.start.x}, ${r.start.y})`);return l*(r.end.y-r.start.y)+(r.end.x-r.start.x+1)}},4634:(h,o)=>{function r(l,u,i){if(u===l.length-1)return l[u].getTrimmedLength();let s=!l[u].hasContent(i-1)&&l[u].getWidth(i-1)===1,f=l[u+1].getWidth(0)===2;return s&&f?i-1:i}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(l,u,i,s,f){let p=[];for(let d=0;d<l.length-1;d++){let c=d,_=l.get(++c);if(!_.isWrapped)continue;let v=[l.get(d)];for(;c<l.length&&_.isWrapped;)v.push(_),_=l.get(++c);if(s>=d&&s<c){d+=v.length-1;continue}let m=0,y=r(v,m,u),C=1,T=0;for(;C<v.length;){let g=r(v,C,u),w=g-T,F=i-y,b=Math.min(w,F);v[m].copyCellsFrom(v[C],T,y,b,!1),y+=b,y===i&&(m++,y=0),T+=b,T===g&&(C++,T=0),y===0&&m!==0&&v[m-1].getWidth(i-1)===2&&(v[m].copyCellsFrom(v[m-1],i-1,y++,1,!1),v[m-1].setCell(i-1,f))}v[m].replaceCells(y,i,f);let D=0;for(let g=v.length-1;g>0&&(g>m||v[g].getTrimmedLength()===0);g--)D++;D>0&&(p.push(d+v.length-D),p.push(D)),d+=v.length-1}return p},o.reflowLargerCreateNewLayout=function(l,u){let i=[],s=0,f=u[s],p=0;for(let d=0;d<l.length;d++)if(f===d){let c=u[++s];l.onDeleteEmitter.fire({index:d-p,amount:c}),d+=c-1,p+=c,f=u[++s]}else i.push(d);return{layout:i,countRemoved:p}},o.reflowLargerApplyNewLayout=function(l,u){let i=[];for(let s=0;s<u.length;s++)i.push(l.get(u[s]));for(let s=0;s<i.length;s++)l.set(s,i[s]);l.length=u.length},o.reflowSmallerGetNewLineLengths=function(l,u,i){let s=[],f=l.map((_,v)=>r(l,v,u)).reduce((_,v)=>_+v),p=0,d=0,c=0;for(;c<f;){if(f-c<i){s.push(f-c);break}p+=i;let _=r(l,d,u);p>_&&(p-=_,d++);let v=l[d].getWidth(p-1)===2;v&&p--;let m=v?i-1:i;s.push(m),c+=m}return s},o.getWrappedLineTrimmedLength=r},5295:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;let l=r(8460),u=r(844),i=r(9092);class s extends u.Disposable{constructor(p,d){super(),this._optionsService=p,this._bufferService=d,this._onBufferActivate=this.register(new l.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new i.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new i.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(p){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(p),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(p,d){this._normal.resize(p,d),this._alt.resize(p,d),this.setupTabStops(p)}setupTabStops(p){this._normal.setupTabStops(p),this._alt.setupTabStops(p)}}o.BufferSet=s},511:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;let l=r(482),u=r(643),i=r(3734);class s extends i.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new i.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let d=new s;return d.setFromCharData(p),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,l.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(p[u.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(p[u.CHAR_DATA_CHAR_INDEX].length===2){let c=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let _=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(c-55296)+_-56320+65536|p[u.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=p[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[u.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=p[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=s},643:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;let l=r(8460),u=r(844);class i{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=i._nextId++,this._onDispose=this.register(new l.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}o.Marker=i,i._nextId=1},7116:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},o.CHARSETS.A={"#":"\xA3"},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},o.CHARSETS.C=o.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},o.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},o.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},o.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},o.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},o.CHARSETS.E=o.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},o.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},o.CHARSETS.H=o.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},o.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(h,o)=>{var r,l,u;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,function(i){i.NUL="\0",i.SOH="",i.STX="",i.ETX="",i.EOT="",i.ENQ="",i.ACK="",i.BEL="\x07",i.BS="\b",i.HT="	",i.LF=`
`,i.VT="\v",i.FF="\f",i.CR="\r",i.SO="",i.SI="",i.DLE="",i.DC1="",i.DC2="",i.DC3="",i.DC4="",i.NAK="",i.SYN="",i.ETB="",i.CAN="",i.EM="",i.SUB="",i.ESC="\x1B",i.FS="",i.GS="",i.RS="",i.US="",i.SP=" ",i.DEL="\x7F"}(r||(o.C0=r={})),function(i){i.PAD="\x80",i.HOP="\x81",i.BPH="\x82",i.NBH="\x83",i.IND="\x84",i.NEL="\x85",i.SSA="\x86",i.ESA="\x87",i.HTS="\x88",i.HTJ="\x89",i.VTS="\x8A",i.PLD="\x8B",i.PLU="\x8C",i.RI="\x8D",i.SS2="\x8E",i.SS3="\x8F",i.DCS="\x90",i.PU1="\x91",i.PU2="\x92",i.STS="\x93",i.CCH="\x94",i.MW="\x95",i.SPA="\x96",i.EPA="\x97",i.SOS="\x98",i.SGCI="\x99",i.SCI="\x9A",i.CSI="\x9B",i.ST="\x9C",i.OSC="\x9D",i.PM="\x9E",i.APC="\x9F"}(l||(o.C1=l={})),function(i){i.ST=`${r.ESC}\\`}(u||(o.C1_ESCAPED=u={}))},7399:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;let l=r(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(i,s,f,p){let d={type:0,cancel:!1,key:void 0},c=(i.shiftKey?1:0)|(i.altKey?2:0)|(i.ctrlKey?4:0)|(i.metaKey?8:0);switch(i.keyCode){case 0:i.key==="UIKeyInputUpArrow"?d.key=s?l.C0.ESC+"OA":l.C0.ESC+"[A":i.key==="UIKeyInputLeftArrow"?d.key=s?l.C0.ESC+"OD":l.C0.ESC+"[D":i.key==="UIKeyInputRightArrow"?d.key=s?l.C0.ESC+"OC":l.C0.ESC+"[C":i.key==="UIKeyInputDownArrow"&&(d.key=s?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(i.altKey){d.key=l.C0.ESC+l.C0.DEL;break}d.key=l.C0.DEL;break;case 9:if(i.shiftKey){d.key=l.C0.ESC+"[Z";break}d.key=l.C0.HT,d.cancel=!0;break;case 13:d.key=i.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,d.cancel=!0;break;case 27:d.key=l.C0.ESC,i.altKey&&(d.key=l.C0.ESC+l.C0.ESC),d.cancel=!0;break;case 37:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"D",d.key===l.C0.ESC+"[1;3D"&&(d.key=l.C0.ESC+(f?"b":"[1;5D"))):d.key=s?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"C",d.key===l.C0.ESC+"[1;3C"&&(d.key=l.C0.ESC+(f?"f":"[1;5C"))):d.key=s?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"A",f||d.key!==l.C0.ESC+"[1;3A"||(d.key=l.C0.ESC+"[1;5A")):d.key=s?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(i.metaKey)break;c?(d.key=l.C0.ESC+"[1;"+(c+1)+"B",f||d.key!==l.C0.ESC+"[1;3B"||(d.key=l.C0.ESC+"[1;5B")):d.key=s?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:i.shiftKey||i.ctrlKey||(d.key=l.C0.ESC+"[2~");break;case 46:d.key=c?l.C0.ESC+"[3;"+(c+1)+"~":l.C0.ESC+"[3~";break;case 36:d.key=c?l.C0.ESC+"[1;"+(c+1)+"H":s?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:d.key=c?l.C0.ESC+"[1;"+(c+1)+"F":s?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:i.shiftKey?d.type=2:i.ctrlKey?d.key=l.C0.ESC+"[5;"+(c+1)+"~":d.key=l.C0.ESC+"[5~";break;case 34:i.shiftKey?d.type=3:i.ctrlKey?d.key=l.C0.ESC+"[6;"+(c+1)+"~":d.key=l.C0.ESC+"[6~";break;case 112:d.key=c?l.C0.ESC+"[1;"+(c+1)+"P":l.C0.ESC+"OP";break;case 113:d.key=c?l.C0.ESC+"[1;"+(c+1)+"Q":l.C0.ESC+"OQ";break;case 114:d.key=c?l.C0.ESC+"[1;"+(c+1)+"R":l.C0.ESC+"OR";break;case 115:d.key=c?l.C0.ESC+"[1;"+(c+1)+"S":l.C0.ESC+"OS";break;case 116:d.key=c?l.C0.ESC+"[15;"+(c+1)+"~":l.C0.ESC+"[15~";break;case 117:d.key=c?l.C0.ESC+"[17;"+(c+1)+"~":l.C0.ESC+"[17~";break;case 118:d.key=c?l.C0.ESC+"[18;"+(c+1)+"~":l.C0.ESC+"[18~";break;case 119:d.key=c?l.C0.ESC+"[19;"+(c+1)+"~":l.C0.ESC+"[19~";break;case 120:d.key=c?l.C0.ESC+"[20;"+(c+1)+"~":l.C0.ESC+"[20~";break;case 121:d.key=c?l.C0.ESC+"[21;"+(c+1)+"~":l.C0.ESC+"[21~";break;case 122:d.key=c?l.C0.ESC+"[23;"+(c+1)+"~":l.C0.ESC+"[23~";break;case 123:d.key=c?l.C0.ESC+"[24;"+(c+1)+"~":l.C0.ESC+"[24~";break;default:if(!i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)if(f&&!p||!i.altKey||i.metaKey)!f||i.altKey||i.ctrlKey||i.shiftKey||!i.metaKey?i.key&&!i.ctrlKey&&!i.altKey&&!i.metaKey&&i.keyCode>=48&&i.key.length===1?d.key=i.key:i.key&&i.ctrlKey&&(i.key==="_"&&(d.key=l.C0.US),i.key==="@"&&(d.key=l.C0.NUL)):i.keyCode===65&&(d.type=1);else{let _=u[i.keyCode],v=_?.[i.shiftKey?1:0];if(v)d.key=l.C0.ESC+v;else if(i.keyCode>=65&&i.keyCode<=90){let m=i.ctrlKey?i.keyCode-64:i.keyCode+32,y=String.fromCharCode(m);i.shiftKey&&(y=y.toUpperCase()),d.key=l.C0.ESC+y}else if(i.keyCode===32)d.key=l.C0.ESC+(i.ctrlKey?l.C0.NUL:" ");else if(i.key==="Dead"&&i.code.startsWith("Key")){let m=i.code.slice(3,4);i.shiftKey||(m=m.toLowerCase()),d.key=l.C0.ESC+m,d.cancel=!0}}else i.keyCode>=65&&i.keyCode<=90?d.key=String.fromCharCode(i.keyCode-64):i.keyCode===32?d.key=l.C0.NUL:i.keyCode>=51&&i.keyCode<=55?d.key=String.fromCharCode(i.keyCode-51+27):i.keyCode===56?d.key=l.C0.DEL:i.keyCode===219?d.key=l.C0.ESC:i.keyCode===220?d.key=l.C0.FS:i.keyCode===221&&(d.key=l.C0.GS)}return d}},482:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(r){return r>65535?(r-=65536,String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):String.fromCharCode(r)},o.utf32ToString=function(r,l=0,u=r.length){let i="";for(let s=l;s<u;++s){let f=r[s];f>65535?(f-=65536,i+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):i+=String.fromCharCode(f)}return i},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(r,l){let u=r.length;if(!u)return 0;let i=0,s=0;if(this._interim){let f=r.charCodeAt(s++);56320<=f&&f<=57343?l[i++]=1024*(this._interim-55296)+f-56320+65536:(l[i++]=this._interim,l[i++]=f),this._interim=0}for(let f=s;f<u;++f){let p=r.charCodeAt(f);if(55296<=p&&p<=56319){if(++f>=u)return this._interim=p,i;let d=r.charCodeAt(f);56320<=d&&d<=57343?l[i++]=1024*(p-55296)+d-56320+65536:(l[i++]=p,l[i++]=d)}else p!==65279&&(l[i++]=p)}return i}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(r,l){let u=r.length;if(!u)return 0;let i,s,f,p,d=0,c=0,_=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let T,D=0;for(;(T=63&this.interim[++D])&&D<4;)C<<=6,C|=T;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=g-D;for(;_<w;){if(_>=u)return 0;if(T=r[_++],(192&T)!=128){_--,y=!0;break}this.interim[D++]=T,C<<=6,C|=63&T}y||(g===2?C<128?_--:l[d++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(l[d++]=C):C<65536||C>1114111||(l[d++]=C)),this.interim.fill(0)}let v=u-4,m=_;for(;m<u;){for(;!(!(m<v)||128&(i=r[m])||128&(s=r[m+1])||128&(f=r[m+2])||128&(p=r[m+3]));)l[d++]=i,l[d++]=s,l[d++]=f,l[d++]=p,m+=4;if(i=r[m++],i<128)l[d++]=i;else if((224&i)==192){if(m>=u)return this.interim[0]=i,d;if(s=r[m++],(192&s)!=128){m--;continue}if(c=(31&i)<<6|63&s,c<128){m--;continue}l[d++]=c}else if((240&i)==224){if(m>=u)return this.interim[0]=i,d;if(s=r[m++],(192&s)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[m++],(192&f)!=128){m--;continue}if(c=(15&i)<<12|(63&s)<<6|63&f,c<2048||c>=55296&&c<=57343||c===65279)continue;l[d++]=c}else if((248&i)==240){if(m>=u)return this.interim[0]=i,d;if(s=r[m++],(192&s)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,d;if(f=r[m++],(192&f)!=128){m--;continue}if(m>=u)return this.interim[0]=i,this.interim[1]=s,this.interim[2]=f,d;if(p=r[m++],(192&p)!=128){m--;continue}if(c=(7&i)<<18|(63&s)<<12|(63&f)<<6|63&p,c<65536||c>1114111)continue;l[d++]=c}}return d}}},225:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;let r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],l=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u;o.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let i=0;i<r.length;++i)u.fill(0,r[i][0],r[i][1]+1)}}wcwidth(i){return i<32?0:i<127?1:i<65536?u[i]:function(s,f){let p,d=0,c=f.length-1;if(s<f[0][0]||s>f[c][1])return!1;for(;c>=d;)if(p=d+c>>1,s>f[p][1])d=p+1;else{if(!(s<f[p][0]))return!0;c=p-1}return!1}(i,l)?0:i>=131072&&i<=196605||i>=196608&&i<=262141?2:1}}},5981:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;let l=r(8460),u=r(844);class i extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,p){if(p!==void 0&&this._syncCalls>p)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);let c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,p){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(p),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(p)}_innerWrite(f=0,p=!0){let d=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let c=this._writeBuffer[this._bufferOffset],_=this._action(c,p);if(_){let m=y=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(d,y);return void _.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(m)}let v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=i},5941:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;let r=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function u(i,s){let f=i.toString(16),p=f.length<2?"0"+f:f;switch(s){case 4:return f[0];case 8:return p;case 12:return(p+p).slice(0,3);default:return p+p}}o.parseColor=function(i){if(!i)return;let s=i.toLowerCase();if(s.indexOf("rgb:")===0){s=s.slice(4);let f=r.exec(s);if(f){let p=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/p*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/p*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/p*255)]}}else if(s.indexOf("#")===0&&(s=s.slice(1),l.exec(s)&&[3,6,9,12].includes(s.length))){let f=s.length/3,p=[0,0,0];for(let d=0;d<3;++d){let c=parseInt(s.slice(f*d,f*d+f),16);p[d]=f===1?c<<4:f===2?c:f===3?c>>4:c>>8}return p}},o.toRgbString=function(i,s=16){let[f,p,d]=i;return`rgb:${u(f,s)}/${u(p,s)}/${u(d,s)}`}},5770:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;let l=r(482),u=r(8742),i=r(5770),s=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=s}registerHandler(p,d){this._handlers[p]===void 0&&(this._handlers[p]=[]);let c=this._handlers[p];return c.push(d),{dispose:()=>{let _=c.indexOf(d);_!==-1&&c.splice(_,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}reset(){if(this._active.length)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=s,this._ident=0}hook(p,d){if(this.reset(),this._ident=p,this._active=this._handlers[p]||s,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(p,d,c){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(p,d,c);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(p,d,c))}unhook(p,d=!0){if(this._active.length){let c=!1,_=this._active.length-1,v=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,c=d,v=this._stack.fallThrough,this._stack.paused=!1),!v&&c===!1){for(;_>=0&&(c=this._active[_].unhook(p),c!==!0);_--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,c;_--}for(;_>=0;_--)if(c=this._active[_].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",p);this._active=s,this._ident=0}};let f=new u.Params;f.addParam(0),o.DcsHandler=class{constructor(p){this._handler=p,this._data="",this._params=f,this._hitLimit=!1}hook(p){this._params=p.length>1||p.params[0]?p.clone():f,this._data="",this._hitLimit=!1}put(p,d,c){this._hitLimit||(this._data+=(0,l.utf32ToString)(p,d,c),this._data.length>i.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(p){let d=!1;if(this._hitLimit)d=!1;else if(p&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(c=>(this._params=f,this._data="",this._hitLimit=!1,c));return this._params=f,this._data="",this._hitLimit=!1,d}}},2015:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;let l=r(844),u=r(8742),i=r(6242),s=r(6351);class f{constructor(_){this.table=new Uint8Array(_)}setDefault(_,v){this.table.fill(_<<4|v)}add(_,v,m,y){this.table[v<<8|_]=m<<4|y}addMany(_,v,m,y){for(let C=0;C<_.length;C++)this.table[v<<8|_[C]]=m<<4|y}}o.TransitionTable=f;let p=160;o.VT500_TRANSITION_TABLE=function(){let c=new f(4095),_=Array.apply(null,Array(256)).map((D,g)=>g),v=(D,g)=>_.slice(D,g),m=v(32,127),y=v(0,24);y.push(25),y.push.apply(y,v(28,32));let C=v(0,14),T;for(T in c.setDefault(1,0),c.addMany(m,0,2,0),C)c.addMany([24,26,153,154],T,3,0),c.addMany(v(128,144),T,3,0),c.addMany(v(144,152),T,3,0),c.add(156,T,0,0),c.add(27,T,11,1),c.add(157,T,4,8),c.addMany([152,158,159],T,0,7),c.add(155,T,11,3),c.add(144,T,11,9);return c.addMany(y,0,3,0),c.addMany(y,1,3,1),c.add(127,1,0,1),c.addMany(y,8,0,8),c.addMany(y,3,3,3),c.add(127,3,0,3),c.addMany(y,4,3,4),c.add(127,4,0,4),c.addMany(y,6,3,6),c.addMany(y,5,3,5),c.add(127,5,0,5),c.addMany(y,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(m,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(v(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(m,7,0,7),c.addMany(y,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(v(64,127),3,7,0),c.addMany(v(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(v(48,60),4,8,4),c.addMany(v(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(v(32,64),6,0,6),c.add(127,6,0,6),c.addMany(v(64,127),6,0,0),c.addMany(v(32,48),3,9,5),c.addMany(v(32,48),5,9,5),c.addMany(v(48,64),5,0,6),c.addMany(v(64,127),5,7,0),c.addMany(v(32,48),4,9,5),c.addMany(v(32,48),1,9,2),c.addMany(v(32,48),2,9,2),c.addMany(v(48,127),2,10,0),c.addMany(v(48,80),1,10,0),c.addMany(v(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(v(96,127),1,10,0),c.add(80,1,11,9),c.addMany(y,9,0,9),c.add(127,9,0,9),c.addMany(v(28,32),9,0,9),c.addMany(v(32,48),9,9,12),c.addMany(v(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(y,11,0,11),c.addMany(v(32,128),11,0,11),c.addMany(v(28,32),11,0,11),c.addMany(y,10,0,10),c.add(127,10,0,10),c.addMany(v(28,32),10,0,10),c.addMany(v(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(v(32,48),10,9,12),c.addMany(y,12,0,12),c.add(127,12,0,12),c.addMany(v(28,32),12,0,12),c.addMany(v(32,48),12,9,12),c.addMany(v(48,64),12,0,11),c.addMany(v(64,127),12,12,13),c.addMany(v(64,127),10,12,13),c.addMany(v(64,127),9,12,13),c.addMany(y,13,13,13),c.addMany(m,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(p,0,2,0),c.add(p,8,5,8),c.add(p,6,0,6),c.add(p,11,0,11),c.add(p,13,13,13),c}();class d extends l.Disposable{constructor(_=o.VT500_TRANSITION_TABLE){super(),this._transitions=_,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(v,m,y)=>{},this._executeHandlerFb=v=>{},this._csiHandlerFb=(v,m)=>{},this._escHandlerFb=v=>{},this._errorHandlerFb=v=>v,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,l.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new i.OscParser),this._dcsParser=this.register(new s.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(_,v=[64,126]){let m=0;if(_.prefix){if(_.prefix.length>1)throw new Error("only one byte as prefix supported");if(m=_.prefix.charCodeAt(0),m&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(_.intermediates){if(_.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<_.intermediates.length;++C){let T=_.intermediates.charCodeAt(C);if(32>T||T>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=T}}if(_.final.length!==1)throw new Error("final must be a single byte");let y=_.final.charCodeAt(0);if(v[0]>y||y>v[1])throw new Error(`final must be in range ${v[0]} .. ${v[1]}`);return m<<=8,m|=y,m}identToString(_){let v=[];for(;_;)v.push(String.fromCharCode(255&_)),_>>=8;return v.reverse().join("")}setPrintHandler(_){this._printHandler=_}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(_,v){let m=this._identifier(_,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);let y=this._escHandlers[m];return y.push(v),{dispose:()=>{let C=y.indexOf(v);C!==-1&&y.splice(C,1)}}}clearEscHandler(_){this._escHandlers[this._identifier(_,[48,126])]&&delete this._escHandlers[this._identifier(_,[48,126])]}setEscHandlerFallback(_){this._escHandlerFb=_}setExecuteHandler(_,v){this._executeHandlers[_.charCodeAt(0)]=v}clearExecuteHandler(_){this._executeHandlers[_.charCodeAt(0)]&&delete this._executeHandlers[_.charCodeAt(0)]}setExecuteHandlerFallback(_){this._executeHandlerFb=_}registerCsiHandler(_,v){let m=this._identifier(_);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);let y=this._csiHandlers[m];return y.push(v),{dispose:()=>{let C=y.indexOf(v);C!==-1&&y.splice(C,1)}}}clearCsiHandler(_){this._csiHandlers[this._identifier(_)]&&delete this._csiHandlers[this._identifier(_)]}setCsiHandlerFallback(_){this._csiHandlerFb=_}registerDcsHandler(_,v){return this._dcsParser.registerHandler(this._identifier(_),v)}clearDcsHandler(_){this._dcsParser.clearHandler(this._identifier(_))}setDcsHandlerFallback(_){this._dcsParser.setHandlerFallback(_)}registerOscHandler(_,v){return this._oscParser.registerHandler(_,v)}clearOscHandler(_){this._oscParser.clearHandler(_)}setOscHandlerFallback(_){this._oscParser.setHandlerFallback(_)}setErrorHandler(_){this._errorHandler=_}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(_,v,m,y,C){this._parseStack.state=_,this._parseStack.handlers=v,this._parseStack.handlerPos=m,this._parseStack.transition=y,this._parseStack.chunkPos=C}parse(_,v,m){let y,C=0,T=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let g=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&w>-1){for(;w>=0&&(y=g[w](this._params),y!==!0);w--)if(y instanceof Promise)return this._parseStack.handlerPos=w,y}this._parseStack.handlers=[];break;case 4:if(m===!1&&w>-1){for(;w>=0&&(y=g[w](),y!==!0);w--)if(y instanceof Promise)return this._parseStack.handlerPos=w,y}this._parseStack.handlers=[];break;case 6:if(C=_[this._parseStack.chunkPos],y=this._dcsParser.unhook(C!==24&&C!==26,m),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=_[this._parseStack.chunkPos],y=this._oscParser.end(C!==24&&C!==26,m),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<v;++g){switch(C=_[g],T=this._transitions.table[this.currentState<<8|(C<160?C:p)],T>>4){case 2:for(let M=g+1;;++M){if(M>=v||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}if(++M>=v||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}if(++M>=v||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}if(++M>=v||(C=_[M])<32||C>126&&C<p){this._printHandler(_,g,M),g=M-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let w=this._csiHandlers[this._collect<<8|C],F=w?w.length-1:-1;for(;F>=0&&(y=w[F](this._params),y!==!0);F--)if(y instanceof Promise)return this._preserveStack(3,w,F,T,g),y;F<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++g<v&&(C=_[g])>47&&C<60);g--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let b=this._escHandlers[this._collect<<8|C],E=b?b.length-1:-1;for(;E>=0&&(y=b[E](),y!==!0);E--)if(y instanceof Promise)return this._preserveStack(4,b,E,T,g),y;E<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let M=g+1;;++M)if(M>=v||(C=_[M])===24||C===26||C===27||C>127&&C<p){this._dcsParser.put(_,g,M),g=M-1;break}break;case 14:if(y=this._dcsParser.unhook(C!==24&&C!==26),y)return this._preserveStack(6,[],0,T,g),y;C===27&&(T|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=g+1;;M++)if(M>=v||(C=_[M])<32||C>127&&C<p){this._oscParser.put(_,g,M),g=M-1;break}break;case 6:if(y=this._oscParser.end(C!==24&&C!==26),y)return this._preserveStack(5,[],0,T,g),y;C===27&&(T|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&T}}}o.EscapeSequenceParser=d},6242:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;let l=r(5770),u=r(482),i=[];o.OscParser=class{constructor(){this._state=0,this._active=i,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(s,f){this._handlers[s]===void 0&&(this._handlers[s]=[]);let p=this._handlers[s];return p.push(f),{dispose:()=>{let d=p.indexOf(f);d!==-1&&p.splice(d,1)}}}clearHandler(s){this._handlers[s]&&delete this._handlers[s]}setHandlerFallback(s){this._handlerFb=s}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=i}reset(){if(this._state===2)for(let s=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;s>=0;--s)this._active[s].end(!1);this._stack.paused=!1,this._active=i,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||i,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].start();else this._handlerFb(this._id,"START")}_put(s,f,p){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(s,f,p);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(s,f,p))}start(){this.reset(),this._state=1}put(s,f,p){if(this._state!==3){if(this._state===1)for(;f<p;){let d=s[f++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&p-f>0&&this._put(s,f,p)}}end(s,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let p=!1,d=this._active.length-1,c=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,p=f,c=this._stack.fallThrough,this._stack.paused=!1),!c&&p===!1){for(;d>=0&&(p=this._active[d].end(s),p!==!0);d--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,p;d--}for(;d>=0;d--)if(p=this._active[d].end(!1),p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",s);this._active=i,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(s){this._handler=s,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(s,f,p){this._hitLimit||(this._data+=(0,u.utf32ToString)(s,f,p),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(s){let f=!1;if(this._hitLimit)f=!1;else if(s&&(f=this._handler(this._data),f instanceof Promise))return f.then(p=>(this._data="",this._hitLimit=!1,p));return this._data="",this._hitLimit=!1,f}}},8742:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;let r=2147483647;class l{static fromArray(i){let s=new l;if(!i.length)return s;for(let f=Array.isArray(i[0])?1:0;f<i.length;++f){let p=i[f];if(Array.isArray(p))for(let d=0;d<p.length;++d)s.addSubParam(p[d]);else s.addParam(p)}return s}constructor(i=32,s=32){if(this.maxLength=i,this.maxSubParamsLength=s,s>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(i),this.length=0,this._subParams=new Int32Array(s),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(i),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let i=new l(this.maxLength,this.maxSubParamsLength);return i.params.set(this.params),i.length=this.length,i._subParams.set(this._subParams),i._subParamsLength=this._subParamsLength,i._subParamsIdx.set(this._subParamsIdx),i._rejectDigits=this._rejectDigits,i._rejectSubDigits=this._rejectSubDigits,i._digitIsSub=this._digitIsSub,i}toArray(){let i=[];for(let s=0;s<this.length;++s){i.push(this.params[s]);let f=this._subParamsIdx[s]>>8,p=255&this._subParamsIdx[s];p-f>0&&i.push(Array.prototype.slice.call(this._subParams,f,p))}return i}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(i){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=i>r?r:i}}addSubParam(i){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(i<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=i>r?r:i,this._subParamsIdx[this.length-1]++}}hasSubParams(i){return(255&this._subParamsIdx[i])-(this._subParamsIdx[i]>>8)>0}getSubParams(i){let s=this._subParamsIdx[i]>>8,f=255&this._subParamsIdx[i];return f-s>0?this._subParams.subarray(s,f):null}getSubParamsAll(){let i={};for(let s=0;s<this.length;++s){let f=this._subParamsIdx[s]>>8,p=255&this._subParamsIdx[s];p-f>0&&(i[s]=this._subParams.slice(f,p))}return i}addDigit(i){let s;if(this._rejectDigits||!(s=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let f=this._digitIsSub?this._subParams:this.params,p=f[s-1];f[s-1]=~p?Math.min(10*p+i,r):i}}o.Params=l},5741:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let r=this._addons.length-1;r>=0;r--)this._addons[r].instance.dispose()}loadAddon(r,l){let u={instance:l,dispose:l.dispose,isDisposed:!1};this._addons.push(u),l.dispose=()=>this._wrappedAddonDispose(u),l.activate(r)}_wrappedAddonDispose(r){if(r.isDisposed)return;let l=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===r){l=u;break}if(l===-1)throw new Error("Could not dispose an addon that has not been loaded");r.isDisposed=!0,r.dispose.apply(r.instance),this._addons.splice(l,1)}}},8771:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;let l=r(3785),u=r(511);o.BufferApiView=class{constructor(i,s){this._buffer=i,this.type=s}init(i){return this._buffer=i,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(i){let s=this._buffer.lines.get(i);if(s)return new l.BufferLineApiView(s)}getNullCell(){return new u.CellData}}},3785:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;let l=r(511);o.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,i){if(!(u<0||u>=this._line.length))return i?(this._line.loadCell(u,i),i):this._line.loadCell(u,new l.CellData)}translateToString(u,i,s){return this._line.translateToString(u,i,s)}}},8285:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;let l=r(8771),u=r(8460),i=r(844);class s extends i.Disposable{constructor(p){super(),this._core=p,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=s},7975:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(r){this._core=r}registerCsiHandler(r,l){return this._core.registerCsiHandler(r,u=>l(u.toArray()))}addCsiHandler(r,l){return this.registerCsiHandler(r,l)}registerDcsHandler(r,l){return this._core.registerDcsHandler(r,(u,i)=>l(u,i.toArray()))}addDcsHandler(r,l){return this.registerDcsHandler(r,l)}registerEscHandler(r,l){return this._core.registerEscHandler(r,l)}addEscHandler(r,l){return this.registerEscHandler(r,l)}registerOscHandler(r,l){return this._core.registerOscHandler(r,l)}addOscHandler(r,l){return this.registerOscHandler(r,l)}}},7090:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(r){this._core=r}register(r){this._core.unicodeService.register(r)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(r){this._core.unicodeService.activeVersion=r}}},744:function(h,o,r){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,T=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,v,T):y(_,v))||T);return C>3&&T&&Object.defineProperty(_,v,T),T},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;let i=r(8460),s=r(844),f=r(5295),p=r(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let d=o.BufferService=class extends s.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new i.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new i.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(c,this))}resize(c,_){this.cols=c,this.rows=_,this.buffers.resize(c,_),this._onResize.fire({cols:c,rows:_})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,_=!1){let v=this.buffer,m;m=this._cachedBlankLine,m&&m.length===this.cols&&m.getFg(0)===c.fg&&m.getBg(0)===c.bg||(m=v.getBlankLine(c,_),this._cachedBlankLine=m),m.isWrapped=_;let y=v.ybase+v.scrollTop,C=v.ybase+v.scrollBottom;if(v.scrollTop===0){let T=v.lines.isFull;C===v.lines.length-1?T?v.lines.recycle().copyFrom(m):v.lines.push(m.clone()):v.lines.splice(C+1,0,m.clone()),T?this.isUserScrolling&&(v.ydisp=Math.max(v.ydisp-1,0)):(v.ybase++,this.isUserScrolling||v.ydisp++)}else{let T=C-y+1;v.lines.shiftElements(y+1,T-1,-1),v.lines.set(C,m.clone())}this.isUserScrolling||(v.ydisp=v.ybase),this._onScroll.fire(v.ydisp)}scrollLines(c,_,v){let m=this.buffer;if(c<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else c+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);let y=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+c,m.ybase),0),y!==m.ydisp&&(_||this._onScroll.fire(m.ydisp))}};o.BufferService=d=l([u(0,p.IOptionsService)],d)},7994:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(r){this.glevel=r,this.charset=this._charsets[r]}setgCharset(r,l){this._charsets[r]=l,this.glevel===r&&(this.charset=l)}}},1753:function(h,o,r){var l=this&&this.__decorate||function(m,y,C,T){var D,g=arguments.length,w=g<3?y:T===null?T=Object.getOwnPropertyDescriptor(y,C):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,y,C,T);else for(var F=m.length-1;F>=0;F--)(D=m[F])&&(w=(g<3?D(w):g>3?D(y,C,w):D(y,C))||w);return g>3&&w&&Object.defineProperty(y,C,w),w},u=this&&this.__param||function(m,y){return function(C,T){y(C,T,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;let i=r(2585),s=r(8460),f=r(844),p={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:m=>m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)},VT200:{events:19,restrict:m=>m.action!==32},DRAG:{events:23,restrict:m=>m.action!==32||m.button!==3},ANY:{events:31,restrict:m=>!0}};function d(m,y){let C=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(C|=64,C|=m.action):(C|=3&m.button,4&m.button&&(C|=64),8&m.button&&(C|=128),m.action===32?C|=32:m.action!==0||y||(C|=3)),C}let c=String.fromCharCode,_={DEFAULT:m=>{let y=[d(m,!1)+32,m.col+32,m.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${c(y[0])}${c(y[1])}${c(y[2])}`},SGR:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${d(m,!0)};${m.col};${m.row}${y}`},SGR_PIXELS:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${d(m,!0)};${m.x};${m.y}${y}`}},v=o.CoreMouseService=class extends f.Disposable{constructor(m,y){super(),this._bufferService=m,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new s.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(p))this.addProtocol(C,p[C]);for(let C of Object.keys(_))this.addEncoding(C,_[C]);this.reset()}addProtocol(m,y){this._protocols[m]=y}addEncoding(m,y){this._encodings[m]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(m){if(!this._protocols[m])throw new Error(`unknown protocol "${m}"`);this._activeProtocol=m,this._onProtocolChange.fire(this._protocols[m].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(m){if(!this._encodings[m])throw new Error(`unknown encoding "${m}"`);this._activeEncoding=m}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(m){if(m.col<0||m.col>=this._bufferService.cols||m.row<0||m.row>=this._bufferService.rows||m.button===4&&m.action===32||m.button===3&&m.action!==32||m.button!==4&&(m.action===2||m.action===3)||(m.col++,m.row++,m.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,m,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(m))return!1;let y=this._encodings[this._activeEncoding](m);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=m,!0}explainEvents(m){return{down:!!(1&m),up:!!(2&m),drag:!!(4&m),move:!!(8&m),wheel:!!(16&m)}}_equalEvents(m,y,C){if(C){if(m.x!==y.x||m.y!==y.y)return!1}else if(m.col!==y.col||m.row!==y.row)return!1;return m.button===y.button&&m.action===y.action&&m.ctrl===y.ctrl&&m.alt===y.alt&&m.shift===y.shift}};o.CoreMouseService=v=l([u(0,i.IBufferService),u(1,i.ICoreService)],v)},6975:function(h,o,r){var l=this&&this.__decorate||function(v,m,y,C){var T,D=arguments.length,g=D<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(v,m,y,C);else for(var w=v.length-1;w>=0;w--)(T=v[w])&&(g=(D<3?T(g):D>3?T(m,y,g):T(m,y))||g);return D>3&&g&&Object.defineProperty(m,y,g),g},u=this&&this.__param||function(v,m){return function(y,C){m(y,C,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;let i=r(1439),s=r(8460),f=r(844),p=r(2585),d=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),_=o.CoreService=class extends f.Disposable{constructor(v,m,y){super(),this._bufferService=v,this._logService=m,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new s.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new s.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,i.clone)(d),this.decPrivateModes=(0,i.clone)(c)}reset(){this.modes=(0,i.clone)(d),this.decPrivateModes=(0,i.clone)(c)}triggerDataEvent(v,m=!1){if(this._optionsService.rawOptions.disableStdin)return;let y=this._bufferService.buffer;m&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),m&&this._onUserInput.fire(),this._logService.debug(`sending data "${v}"`,()=>v.split("").map(C=>C.charCodeAt(0))),this._onData.fire(v)}triggerBinaryEvent(v){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${v}"`,()=>v.split("").map(m=>m.charCodeAt(0))),this._onBinary.fire(v))}};o.CoreService=_=l([u(0,p.IBufferService),u(1,p.ILogService),u(2,p.IOptionsService)],_)},9074:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;let l=r(8055),u=r(8460),i=r(844),s=r(6106),f=0,p=0;class d extends i.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new s.SortedList(v=>v?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,i.toDisposable)(()=>this.reset()))}registerDecoration(v){if(v.marker.isDisposed)return;let m=new c(v);if(m){let y=m.marker.onDispose(()=>m.dispose());m.onDispose(()=>{m&&(this._decorations.delete(m)&&this._onDecorationRemoved.fire(m),y.dispose())}),this._decorations.insert(m),this._onDecorationRegistered.fire(m)}return m}reset(){for(let v of this._decorations.values())v.dispose();this._decorations.clear()}*getDecorationsAtCell(v,m,y){var C,T,D;let g=0,w=0;for(let F of this._decorations.getKeyIterator(m))g=(C=F.options.x)!==null&&C!==void 0?C:0,w=g+((T=F.options.width)!==null&&T!==void 0?T:1),v>=g&&v<w&&(!y||((D=F.options.layer)!==null&&D!==void 0?D:"bottom")===y)&&(yield F)}forEachDecorationAtCell(v,m,y,C){this._decorations.forEachByKey(m,T=>{var D,g,w;f=(D=T.options.x)!==null&&D!==void 0?D:0,p=f+((g=T.options.width)!==null&&g!==void 0?g:1),v>=f&&v<p&&(!y||((w=T.options.layer)!==null&&w!==void 0?w:"bottom")===y)&&C(T)})}}o.DecorationService=d;class c extends i.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=l.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=l.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(v){super(),this.options=v,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=v.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;let l=r(2585),u=r(8343);class i{constructor(...f){this._entries=new Map;for(let[p,d]of f)this.set(p,d)}set(f,p){let d=this._entries.get(f);return this._entries.set(f,p),d}forEach(f){for(let[p,d]of this._entries.entries())f(p,d)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}o.ServiceCollection=i,o.InstantiationService=class{constructor(){this._services=new i,this._services.set(l.IInstantiationService,this)}setService(s,f){this._services.set(s,f)}getService(s){return this._services.get(s)}createInstance(s,...f){let p=(0,u.getServiceDependencies)(s).sort((_,v)=>_.index-v.index),d=[];for(let _ of p){let v=this._services.get(_.id);if(!v)throw new Error(`[createInstance] ${s.name} depends on UNKNOWN service ${_.id}.`);d.push(v)}let c=p.length>0?p[0].index:f.length;if(f.length!==c)throw new Error(`[createInstance] First service dependency of ${s.name} at position ${c+1} conflicts with ${f.length} static arguments`);return new s(...f,...d)}}},7866:function(h,o,r){var l=this&&this.__decorate||function(c,_,v,m){var y,C=arguments.length,T=C<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,v):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(c,_,v,m);else for(var D=c.length-1;D>=0;D--)(y=c[D])&&(T=(C<3?y(T):C>3?y(_,v,T):y(_,v))||T);return C>3&&T&&Object.defineProperty(_,v,T),T},u=this&&this.__param||function(c,_){return function(v,m){_(v,m,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;let i=r(844),s=r(2585),f={trace:s.LogLevelEnum.TRACE,debug:s.LogLevelEnum.DEBUG,info:s.LogLevelEnum.INFO,warn:s.LogLevelEnum.WARN,error:s.LogLevelEnum.ERROR,off:s.LogLevelEnum.OFF},p,d=o.LogService=class extends i.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=s.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let _=0;_<c.length;_++)typeof c[_]=="function"&&(c[_]=c[_]())}_log(c,_,v){this._evalLazyOptionalParams(v),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+_,...v)}trace(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.TRACE&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,c,_)}debug(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.DEBUG&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,c,_)}info(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.INFO&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,c,_)}warn(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.WARN&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,c,_)}error(c,..._){var v,m;this._logLevel<=s.LogLevelEnum.ERROR&&this._log((m=(v=this._optionsService.options.logger)===null||v===void 0?void 0:v.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,c,_)}};o.LogService=d=l([u(0,s.IOptionsService)],d),o.setTraceLogger=function(c){p=c},o.traceCall=function(c,_,v){if(typeof v.value!="function")throw new Error("not supported");let m=v.value;v.value=function(...y){if(p.logLevel!==s.LogLevelEnum.TRACE)return m.apply(this,y);p.trace(`GlyphRenderer#${m.name}(${y.map(T=>JSON.stringify(T)).join(", ")})`);let C=m.apply(this,y);return p.trace(`GlyphRenderer#${m.name} return`,C),C}}},7302:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;let l=r(8460),u=r(844),i=r(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:i.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let s=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(d){super(),this._onOptionChange=this.register(new l.EventEmitter),this.onOptionChange=this._onOptionChange.event;let c=Object.assign({},o.DEFAULT_OPTIONS);for(let _ in d)if(_ in c)try{let v=d[_];c[_]=this._sanitizeAndValidateOption(_,v)}catch(v){console.error(v)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(d,c){return this.onOptionChange(_=>{_===d&&c(this.rawOptions[d])})}onMultipleOptionChange(d,c){return this.onOptionChange(_=>{d.indexOf(_)!==-1&&c()})}_setupOptions(){let d=_=>{if(!(_ in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);return this.rawOptions[_]},c=(_,v)=>{if(!(_ in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);v=this._sanitizeAndValidateOption(_,v),this.rawOptions[_]!==v&&(this.rawOptions[_]=v,this._onOptionChange.fire(_))};for(let _ in this.rawOptions){let v={get:d.bind(this,_),set:c.bind(this,_)};Object.defineProperty(this.options,_,v)}}_sanitizeAndValidateOption(d,c){switch(d){case"cursorStyle":if(c||(c=o.DEFAULT_OPTIONS[d]),!function(_){return _==="block"||_==="underline"||_==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${d}`);break;case"wordSeparator":c||(c=o.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=s.includes(c)?c:o.DEFAULT_OPTIONS[d];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${d} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${d} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}o.OptionsService=f},2660:function(h,o,r){var l=this&&this.__decorate||function(f,p,d,c){var _,v=arguments.length,m=v<3?p:c===null?c=Object.getOwnPropertyDescriptor(p,d):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(f,p,d,c);else for(var y=f.length-1;y>=0;y--)(_=f[y])&&(m=(v<3?_(m):v>3?_(p,d,m):_(p,d))||m);return v>3&&m&&Object.defineProperty(p,d,m),m},u=this&&this.__param||function(f,p){return function(d,c){p(d,c,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;let i=r(2585),s=o.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){let p=this._bufferService.buffer;if(f.id===void 0){let y=p.addMarker(p.ybase+p.y),C={data:f,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(C,y)),this._dataByLinkId.set(C.id,C),C.id}let d=f,c=this._getEntryIdKey(d),_=this._entriesWithId.get(c);if(_)return this.addLineToLink(_.id,p.ybase+p.y),_.id;let v=p.addMarker(p.ybase+p.y),m={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(m,v)),this._entriesWithId.set(m.key,m),this._dataByLinkId.set(m.id,m),m.id}addLineToLink(f,p){let d=this._dataByLinkId.get(f);if(d&&d.lines.every(c=>c.line!==p)){let c=this._bufferService.buffer.addMarker(p);d.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(d,c))}}getLinkData(f){var p;return(p=this._dataByLinkId.get(f))===null||p===void 0?void 0:p.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,p){let d=f.lines.indexOf(p);d!==-1&&(f.lines.splice(d,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};o.OscLinkService=s=l([u(0,i.IBufferService)],s)},8343:(h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;let r="di$target",l="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(u){return u[l]||[]},o.createDecorator=function(u){if(o.serviceRegistry.has(u))return o.serviceRegistry.get(u);let i=function(s,f,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,c,_){c[r]===c?c[l].push({id:d,index:_}):(c[l]=[{id:d,index:_}],c[r]=c)})(i,s,p)};return i.toString=()=>u,o.serviceRegistry.set(u,i),i}},2585:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;let l=r(8343);var u;o.IBufferService=(0,l.createDecorator)("BufferService"),o.ICoreMouseService=(0,l.createDecorator)("CoreMouseService"),o.ICoreService=(0,l.createDecorator)("CoreService"),o.ICharsetService=(0,l.createDecorator)("CharsetService"),o.IInstantiationService=(0,l.createDecorator)("InstantiationService"),function(i){i[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.OFF=5]="OFF"}(u||(o.LogLevelEnum=u={})),o.ILogService=(0,l.createDecorator)("LogService"),o.IOptionsService=(0,l.createDecorator)("OptionsService"),o.IOscLinkService=(0,l.createDecorator)("OscLinkService"),o.IUnicodeService=(0,l.createDecorator)("UnicodeService"),o.IDecorationService=(0,l.createDecorator)("DecorationService")},1480:(h,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;let l=r(8460),u=r(225);o.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter,this.onChange=this._onChange.event;let i=new u.UnicodeV6;this.register(i),this._active=i.version,this._activeProvider=i}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(i){if(!this._providers[i])throw new Error(`unknown Unicode version "${i}"`);this._active=i,this._activeProvider=this._providers[i],this._onChange.fire(i)}register(i){this._providers[i.version]=i}wcwidth(i){return this._activeProvider.wcwidth(i)}getStringCellWidth(i){let s=0,f=i.length;for(let p=0;p<f;++p){let d=i.charCodeAt(p);if(55296<=d&&d<=56319){if(++p>=f)return s+this.wcwidth(d);let c=i.charCodeAt(p);56320<=c&&c<=57343?d=1024*(d-55296)+c-56320+65536:s+=this.wcwidth(c)}s+=this.wcwidth(d)}return s}}}},t={};function n(h){var o=t[h];if(o!==void 0)return o.exports;var r=t[h]={exports:{}};return e[h].call(r.exports,r,r.exports,n),r.exports}var a={};return(()=>{var h=a;Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;let o=n(9042),r=n(3236),l=n(844),u=n(5741),i=n(8285),s=n(7975),f=n(7090),p=["cols","rows"];class d extends l.Disposable{constructor(_){super(),this._core=this.register(new r.Terminal(_)),this._addonManager=this.register(new u.AddonManager),this._publicOptions=Object.assign({},this._core.options);let v=y=>this._core.options[y],m=(y,C)=>{this._checkReadonlyOptions(y),this._core.options[y]=C};for(let y in this._core.options){let C={get:v.bind(this,y),set:m.bind(this,y)};Object.defineProperty(this._publicOptions,y,C)}}_checkReadonlyOptions(_){if(p.includes(_))throw new Error(`Option "${_}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new s.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new i.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let _=this._core.coreService.decPrivateModes,v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:_.applicationCursorKeys,applicationKeypadMode:_.applicationKeypad,bracketedPasteMode:_.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:_.origin,reverseWraparoundMode:_.reverseWraparound,sendFocusMode:_.sendFocus,wraparoundMode:_.wraparound}}get options(){return this._publicOptions}set options(_){for(let v in _)this._publicOptions[v]=_[v]}blur(){this._core.blur()}focus(){this._core.focus()}resize(_,v){this._verifyIntegers(_,v),this._core.resize(_,v)}open(_){this._core.open(_)}attachCustomKeyEventHandler(_){this._core.attachCustomKeyEventHandler(_)}registerLinkProvider(_){return this._core.registerLinkProvider(_)}registerCharacterJoiner(_){return this._checkProposedApi(),this._core.registerCharacterJoiner(_)}deregisterCharacterJoiner(_){this._checkProposedApi(),this._core.deregisterCharacterJoiner(_)}registerMarker(_=0){return this._verifyIntegers(_),this._core.registerMarker(_)}registerDecoration(_){var v,m,y;return this._checkProposedApi(),this._verifyPositiveIntegers((v=_.x)!==null&&v!==void 0?v:0,(m=_.width)!==null&&m!==void 0?m:0,(y=_.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(_)}hasSelection(){return this._core.hasSelection()}select(_,v,m){this._verifyIntegers(_,v,m),this._core.select(_,v,m)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(_,v){this._verifyIntegers(_,v),this._core.selectLines(_,v)}dispose(){super.dispose()}scrollLines(_){this._verifyIntegers(_),this._core.scrollLines(_)}scrollPages(_){this._verifyIntegers(_),this._core.scrollPages(_)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(_){this._verifyIntegers(_),this._core.scrollToLine(_)}clear(){this._core.clear()}write(_,v){this._core.write(_,v)}writeln(_,v){this._core.write(_),this._core.write(`\r
`,v)}paste(_){this._core.paste(_)}refresh(_,v){this._verifyIntegers(_,v),this._core.refresh(_,v)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(_){this._addonManager.loadAddon(this,_)}static get strings(){return o}_verifyIntegers(..._){for(let v of _)if(v===1/0||isNaN(v)||v%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(..._){for(let v of _)if(v&&(v===1/0||isNaN(v)||v%1!=0||v<0))throw new Error("This API only accepts positive integers")}}h.Terminal=d})(),a})())});var ig=Tt((Zk,ag)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var n=function(u,i,s){if(typeof u!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(s=i),n.modules[u]||(n.payloads[u]=s,n.modules[u]=null)};n.modules={},n.payloads={};var a=function(u,i,s){if(typeof i=="string"){var f=r(u,i);if(f!=null)return s&&s(),f}else if(Object.prototype.toString.call(i)==="[object Array]"){for(var p=[],d=0,c=i.length;d<c;++d){var _=r(u,i[d]);if(_==null&&h.original)return;p.push(_)}return s&&s.apply(null,p)||!0}},h=function(u,i){var s=a("",u,i);return s==null&&h.original?h.original.apply(this,arguments):s},o=function(u,i){if(i.indexOf("!")!==-1){var s=i.split("!");return o(u,s[0])+"!"+o(u,s[1])}if(i.charAt(0)=="."){var f=u.split("/").slice(0,-1).join("/");for(i=f+"/"+i;i.indexOf(".")!==-1&&p!=i;){var p=i;i=i.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return i},r=function(u,i){i=o(u,i);var s=n.modules[i];if(!s){if(s=n.payloads[i],typeof s=="function"){var f={},p={id:i,uri:"",exports:f,packaged:!0},d=function(_,v){return a(i,_,v)},c=s(d,f,p);f=c||p.exports,n.modules[i]=f,delete n.payloads[i]}s=n.modules[i]=f||s}return s};function l(u){var i=t;u&&(t[u]||(t[u]={}),i=t[u]),(!i.define||!i.define.packaged)&&(n.original=i.define,i.define=n,i.define.packaged=!0),(!i.require||!i.require.packaged)&&(h.original=i.require,i.require=h,i.require.packaged=!0)}l(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function a(h,o,r){Object.defineProperty(h,o,{value:r,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||a(String.prototype,"startsWith",function(h,o){return o=o||0,this.lastIndexOf(h,o)===o}),String.prototype.endsWith||a(String.prototype,"endsWith",function(h,o){var r=this;(o===void 0||o>r.length)&&(o=r.length),o-=h.length;var l=r.indexOf(h,o);return l!==-1&&l===o}),String.prototype.repeat||a(String.prototype,"repeat",function(h){for(var o="",r=this;h>0;)h&1&&(o+=r),(h>>=1)&&(r+=r);return o}),String.prototype.includes||a(String.prototype,"includes",function(h,o){return this.indexOf(h,o)!=-1}),Object.assign||(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(h),r=1;r<arguments.length;r++){var l=arguments[r];l!=null&&Object.keys(l).forEach(function(u){o[u]=l[u]})}return o}),Object.values||(Object.values=function(h){return Object.keys(h).map(function(o){return h[o]})}),Array.prototype.find||a(Array.prototype,"find",function(h){for(var o=this.length,r=arguments[1],l=0;l<o;l++){var u=this[l];if(h.call(r,u,l,this))return u}}),Array.prototype.findIndex||a(Array.prototype,"findIndex",function(h){for(var o=this.length,r=arguments[1],l=0;l<o;l++){var u=this[l];if(h.call(r,u,l,this))return l}}),Array.prototype.includes||a(Array.prototype,"includes",function(h,o){return this.indexOf(h,o)!=-1}),Array.prototype.fill||a(Array.prototype,"fill",function(h){for(var o=this,r=o.length>>>0,l=arguments[1],u=l>>0,i=u<0?Math.max(r+u,0):Math.min(u,r),s=arguments[2],f=s===void 0?r:s>>0,p=f<0?Math.max(r+f,0):Math.min(f,r);i<p;)o[i]=h,i++;return o}),Array.of||a(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,n){t.deepCopy=function a(h){if(typeof h!="object"||!h)return h;var o;if(Array.isArray(h)){o=[];for(var r=0;r<h.length;r++)o[r]=a(h[r]);return o}if(Object.prototype.toString.call(h)!=="[object Object]")return h;o={};for(var r in h)o[r]=a(h[r]);return o}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";t.last=function(o){return o[o.length-1]},t.stringReverse=function(o){return o.split("").reverse().join("")},t.stringRepeat=function(o,r){for(var l="";r>0;)r&1&&(l+=o),(r>>=1)&&(o+=o);return l};var a=/^\s\s*/,h=/\s\s*$/;t.stringTrimLeft=function(o){return o.replace(a,"")},t.stringTrimRight=function(o){return o.replace(h,"")},t.copyObject=function(o){var r={};for(var l in o)r[l]=o[l];return r},t.copyArray=function(o){for(var r=[],l=0,u=o.length;l<u;l++)o[l]&&typeof o[l]=="object"?r[l]=this.copyObject(o[l]):r[l]=o[l];return r},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(o){for(var r={},l=0;l<o.length;l++)r[o[l]]=1;return r},t.createMap=function(o){var r=Object.create(null);for(var l in o)r[l]=o[l];return r},t.arrayRemove=function(o,r){for(var l=0;l<=o.length;l++)r===o[l]&&o.splice(l,1)},t.escapeRegExp=function(o){return o.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(o){return(""+o).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(o,r){var l=[];return o.replace(r,function(u){l.push({offset:arguments[arguments.length-2],length:u.length})}),l},t.deferredCall=function(o){var r=null,l=function(){r=null,o()},u=function(i){return u.cancel(),r=setTimeout(l,i||0),u};return u.schedule=u,u.call=function(){return this.cancel(),o(),u},u.cancel=function(){return clearTimeout(r),r=null,u},u.isPending=function(){return r},u},t.delayedCall=function(o,r){var l=null,u=function(){l=null,o()},i=function(s){l==null&&(l=setTimeout(u,s||r))};return i.delay=function(s){l&&clearTimeout(l),l=setTimeout(u,s||r)},i.schedule=i,i.call=function(){this.cancel(),o()},i.cancel=function(){l&&clearTimeout(l),l=null},i.isPending=function(){return l},i},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(o,r,l){return l&&o.codePointAt(r)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var a=typeof navigator=="object"?navigator:{},h=(/mac|win|linux/i.exec(a.platform)||["other"])[0].toLowerCase(),o=a.userAgent||"",r=a.appName||"";t.isWin=h=="win",t.isMac=h=="mac",t.isLinux=h=="linux",t.isIE=r=="Microsoft Internet Explorer"||r.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=o.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(o.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(o.split(" Edge/")[1])||void 0,t.isAIR=o.indexOf("AdobeAIR")>=0,t.isAndroid=o.indexOf("Android")>=0,t.isChromeOS=o.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("./useragent"),h="http://www.w3.org/1999/xhtml";t.buildDom=function s(f,p,d){if(typeof f=="string"&&f){var c=document.createTextNode(f);return p&&p.appendChild(c),c}if(!Array.isArray(f))return f&&f.appendChild&&p&&p.appendChild(f),f;if(typeof f[0]!="string"||!f[0]){for(var _=[],v=0;v<f.length;v++){var m=s(f[v],p,d);m&&_.push(m)}return _}var y=document.createElement(f[0]),C=f[1],T=1;C&&typeof C=="object"&&!Array.isArray(C)&&(T=2);for(var v=T;v<f.length;v++)s(f[v],y,d);return T==2&&Object.keys(C).forEach(function(D){var g=C[D];D==="class"?y.className=Array.isArray(g)?g.join(" "):g:typeof g=="function"||D=="value"||D[0]=="$"?y[D]=g:D==="ref"?d&&(d[g]=y):D==="style"?typeof g=="string"&&(y.style.cssText=g):g!=null&&y.setAttribute(D,g)}),p&&p.appendChild(y),y},t.getDocumentHead=function(s){return s||(s=document),s.head||s.getElementsByTagName("head")[0]||s.documentElement},t.createElement=function(s,f){return document.createElementNS?document.createElementNS(f||h,s):document.createElement(s)},t.removeChildren=function(s){s.innerHTML=""},t.createTextNode=function(s,f){var p=f?f.ownerDocument:document;return p.createTextNode(s)},t.createFragment=function(s){var f=s?s.ownerDocument:document;return f.createDocumentFragment()},t.hasCssClass=function(s,f){var p=(s.className+"").split(/\s+/g);return p.indexOf(f)!==-1},t.addCssClass=function(s,f){t.hasCssClass(s,f)||(s.className+=" "+f)},t.removeCssClass=function(s,f){for(var p=s.className.split(/\s+/g);;){var d=p.indexOf(f);if(d==-1)break;p.splice(d,1)}s.className=p.join(" ")},t.toggleCssClass=function(s,f){for(var p=s.className.split(/\s+/g),d=!0;;){var c=p.indexOf(f);if(c==-1)break;d=!1,p.splice(c,1)}return d&&p.push(f),s.className=p.join(" "),d},t.setCssClass=function(s,f,p){p?t.addCssClass(s,f):t.removeCssClass(s,f)},t.hasCssString=function(s,f){var p=0,d;if(f=f||document,d=f.querySelectorAll("style")){for(;p<d.length;)if(d[p++].id===s)return!0}},t.removeElementById=function(s,f){f=f||document,f.getElementById(s)&&f.getElementById(s).remove()};var o,r=[];t.useStrictCSP=function(s){o=s,s==!1?l():r||(r=[])};function l(){var s=r;r=null,s&&s.forEach(function(f){u(f[0],f[1])})}function u(s,f,p){if(!(typeof document>"u")){if(r){if(p)l();else if(p===!1)return r.push([s,f])}if(!o){var d=p;!p||!p.getRootNode?d=document:(d=p.getRootNode(),(!d||d==p)&&(d=document));var c=d.ownerDocument||d;if(f&&t.hasCssString(f,d))return null;f&&(s+=`
/*# sourceURL=ace/css/`+f+" */");var _=t.createElement("style");_.appendChild(c.createTextNode(s)),f&&(_.id=f),d==c&&(d=t.getDocumentHead(c)),d.insertBefore(_,d.firstChild)}}}if(t.importCssString=u,t.importCssStylsheet=function(s,f){t.buildDom(["link",{rel:"stylesheet",href:s}],t.getDocumentHead(f))},t.scrollbarWidth=function(s){var f=t.createElement("ace_inner");f.style.width="100%",f.style.minWidth="0px",f.style.height="200px",f.style.display="block";var p=t.createElement("ace_outer"),d=p.style;d.position="absolute",d.left="-10000px",d.overflow="hidden",d.width="200px",d.minWidth="0px",d.height="150px",d.display="block",p.appendChild(f);var c=s&&s.documentElement||document&&document.documentElement;if(!c)return 0;c.appendChild(p);var _=f.offsetWidth;d.overflow="scroll";var v=f.offsetWidth;return _===v&&(v=p.clientWidth),c.removeChild(p),_-v},t.computedStyle=function(s,f){return window.getComputedStyle(s,"")||{}},t.setStyle=function(s,f,p){s[f]!==p&&(s[f]=p)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=a.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,a.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var i=document.createElement("div");t.HI_DPI&&i.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!a.isEdge&&typeof i.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),i=null}t.HAS_CSS_TRANSFORMS?t.translate=function(s,f,p){s.style.transform="translate("+Math.round(f)+"px, "+Math.round(p)+"px)"}:t.translate=function(s,f,p){s.style.top=Math.round(p)+"px",s.style.left=Math.round(f)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("./dom");t.get=function(h,o){var r=new XMLHttpRequest;r.open("GET",h,!0),r.onreadystatechange=function(){r.readyState===4&&o(r.responseText)},r.send(null)},t.loadScript=function(h,o){var r=a.getDocumentHead(),l=document.createElement("script");l.src=h,r.appendChild(l),l.onload=l.onreadystatechange=function(u,i){(i||!l.readyState||l.readyState=="loaded"||l.readyState=="complete")&&(l=l.onload=l.onreadystatechange=null,i||o())}},t.qualifyURL=function(h){var o=document.createElement("a");return o.href=h,o.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(a,h){a.super_=h,a.prototype=Object.create(h.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(a,h){for(var o in h)a[o]=h[o];return a},t.implement=function(a,h){t.mixin(a,h)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var a={},h=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};a._emit=a._dispatchEvent=function(r,l){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var u=this._eventRegistry[r]||[],i=this._defaultHandlers[r];if(!(!u.length&&!i)){(typeof l!="object"||!l)&&(l={}),l.type||(l.type=r),l.stopPropagation||(l.stopPropagation=h),l.preventDefault||(l.preventDefault=o),u=u.slice();for(var s=0;s<u.length&&(u[s](l,this),!l.propagationStopped);s++);if(i&&!l.defaultPrevented)return i(l,this)}},a._signal=function(r,l){var u=(this._eventRegistry||{})[r];if(u){u=u.slice();for(var i=0;i<u.length;i++)u[i](l,this)}},a.once=function(r,l){var u=this;if(this.on(r,function i(){u.off(r,i),l.apply(null,arguments)}),!l)return new Promise(function(i){l=i})},a.setDefaultHandler=function(r,l){var u=this._defaultHandlers;if(u||(u=this._defaultHandlers={_disabled_:{}}),u[r]){var i=u[r],s=u._disabled_[r];s||(u._disabled_[r]=s=[]),s.push(i);var f=s.indexOf(l);f!=-1&&s.splice(f,1)}u[r]=l},a.removeDefaultHandler=function(r,l){var u=this._defaultHandlers;if(u){var i=u._disabled_[r];if(u[r]==l)i&&this.setDefaultHandler(r,i.pop());else if(i){var s=i.indexOf(l);s!=-1&&i.splice(s,1)}}},a.on=a.addEventListener=function(r,l,u){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[r];return i||(i=this._eventRegistry[r]=[]),i.indexOf(l)==-1&&i[u?"unshift":"push"](l),l},a.off=a.removeListener=a.removeEventListener=function(r,l){this._eventRegistry=this._eventRegistry||{};var u=this._eventRegistry[r];if(u){var i=u.indexOf(l);i!==-1&&u.splice(i,1)}},a.removeAllListeners=function(r){r||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[r]=void 0),this._defaultHandlers&&(this._defaultHandlers[r]=void 0)},t.EventEmitter=a});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,n){t.reportError=function(h,o){var r=new Error(h);r.data=o,typeof console=="object"&&console.error&&console.error(r),setTimeout(function(){throw r})}});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(e,t,n){"no use strict";var a=e("./oop"),h=e("./event_emitter").EventEmitter,o=e("./report_error").reportError,r={setOptions:function(s){Object.keys(s).forEach(function(f){this.setOption(f,s[f])},this)},getOptions:function(s){var f={};if(s)Array.isArray(s)||(f=s,s=Object.keys(f));else{var p=this.$options;s=Object.keys(p).filter(function(d){return!p[d].hidden})}return s.forEach(function(d){f[d]=this.getOption(d)},this),f},setOption:function(s,f){if(this["$"+s]!==f){var p=this.$options[s];if(!p)return l('misspelled option "'+s+'"');if(p.forwardTo)return this[p.forwardTo]&&this[p.forwardTo].setOption(s,f);p.handlesSet||(this["$"+s]=f),p&&p.set&&p.set.call(this,f)}},getOption:function(s){var f=this.$options[s];return f?f.forwardTo?this[f.forwardTo]&&this[f.forwardTo].getOption(s):f&&f.get?f.get.call(this):this["$"+s]:l('misspelled option "'+s+'"')}};function l(s){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var u,i=function(){function s(){this.$defaultOptions={}}return s.prototype.defineOptions=function(f,p,d){return f.$options||(this.$defaultOptions[p]=f.$options={}),Object.keys(d).forEach(function(c){var _=d[c];typeof _=="string"&&(_={forwardTo:_}),_.name||(_.name=c),f.$options[_.name]=_,"initialValue"in _&&(f["$"+_.name]=_.initialValue)}),a.implement(f,r),this},s.prototype.resetOptions=function(f){Object.keys(f.$options).forEach(function(p){var d=f.$options[p];"value"in d&&f.setOption(p,d.value)})},s.prototype.setDefaultValue=function(f,p,d){if(!f){for(f in this.$defaultOptions)if(this.$defaultOptions[f][p])break;if(!this.$defaultOptions[f][p])return!1}var c=this.$defaultOptions[f]||(this.$defaultOptions[f]={});c[p]&&(c.forwardTo?this.setDefaultValue(c.forwardTo,p,d):c[p].value=d)},s.prototype.setDefaultValues=function(f,p){Object.keys(p).forEach(function(d){this.setDefaultValue(f,d,p[d])},this)},s.prototype.setMessages=function(f){u=f},s.prototype.nls=function(f,p){u&&!u[f]&&l("No message found for '"+f+"' in the provided messages, falling back to default English message.");var d=u&&u[f]||f;return p&&(d=d.replace(/\$(\$|[\d]+)/g,function(c,_){return _=="$"?"$":p[_]})),d},s}();i.prototype.warn=l,i.prototype.reportError=o,a.implement(i.prototype,h),t.AppConfig=i});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var a=e("../lib/dom");a.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){"no use strict";var a=e("./lib/lang"),h=e("./lib/net"),o=e("./lib/dom"),r=e("./lib/app_config").AppConfig;n.exports=t=new r;var l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(f){if(!l.hasOwnProperty(f))throw new Error("Unknown config key: "+f);return l[f]},t.set=function(f,p){if(l.hasOwnProperty(f))l[f]=p;else if(this.setDefaultValue("",f,p)==!1)throw new Error("Unknown config key: "+f);f=="useStrictCSP"&&o.useStrictCSP(p)},t.all=function(){return a.copyObject(l)},t.$modes={},t.moduleUrl=function(f,p){if(l.$moduleUrls[f])return l.$moduleUrls[f];var d=f.split("/");p=p||d[d.length-2]||"";var c=p=="snippets"?"/":"-",_=d[d.length-1];if(p=="worker"&&c=="-"){var v=new RegExp("^"+p+"[\\-_]|[\\-_]"+p+"$","g");_=_.replace(v,"")}(!_||_==p)&&d.length>1&&(_=d[d.length-2]);var m=l[p+"Path"];return m==null?m=l.basePath:c=="/"&&(p=c=""),m&&m.slice(-1)!="/"&&(m+="/"),m+p+c+_+this.get("suffix")},t.setModuleUrl=function(f,p){return l.$moduleUrls[f]=p};var u=function(f,p){if(f==="ace/theme/textmate"||f==="./theme/textmate")return p(null,e("./theme/textmate"));if(i)return i(f,p);console.error("loader is not configured")},i;t.setLoader=function(f){i=f},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(f,p){var d;if(Array.isArray(f))var c=f[0],_=f[1];else if(typeof f=="string")var _=f;var v=function(m){if(m&&!t.$loading[_])return p&&p(m);if(t.$loading[_]||(t.$loading[_]=[]),t.$loading[_].push(p),!(t.$loading[_].length>1)){var y=function(){u(_,function(C,T){T&&(t.$loaded[_]=T),t._emit("load.module",{name:_,module:T});var D=t.$loading[_];t.$loading[_]=null,D.forEach(function(g){g&&g(T)})})};if(!t.get("packaged"))return y();h.loadScript(t.moduleUrl(_,c),y),s()}};if(t.dynamicModules[_])t.dynamicModules[_]().then(function(m){m.default?v(m.default):v(m)});else{try{d=this.$require(_)}catch{}v(d||t.$loaded[_])}},t.$require=function(f){if(typeof n.require=="function"){var p="require";return n[p](f)}},t.setModuleLoader=function(f,p){t.dynamicModules[f]=p};var s=function(){!l.basePath&&!l.workerPath&&!l.modePath&&!l.themePath&&!Object.keys(l.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),s=function(){})};t.version="1.32.3"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var a=e("./config");a.setLoader(function(l,u){e([l],function(i){u(null,i)})});var h=function(){return this||typeof window<"u"&&window}();n.exports=function(l){a.init=o,a.$require=e,l.require=e,typeof define=="function"&&(l.define=define)},o(!0);function o(l){if(!(!h||!h.document)){a.set("packaged",l||e.packaged||n.packaged||h.define&&define.packaged);var u={},i="",s=document.currentScript||document._currentScript,f=s&&s.ownerDocument||document;s&&s.src&&(i=s.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var p=f.getElementsByTagName("script"),d=0;d<p.length;d++){var c=p[d],_=c.src||c.getAttribute("src");if(_){for(var v=c.attributes,m=0,y=v.length;m<y;m++){var C=v[m];C.name.indexOf("data-ace-")===0&&(u[r(C.name.replace(/^data-ace-/,""))]=C.value)}var T=_.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);T&&(i=T[1])}}i&&(u.base=u.base||i,u.packaged=!0),u.basePath=u.base,u.workerPath=u.workerPath||u.base,u.modePath=u.modePath||u.base,u.themePath=u.themePath||u.base,delete u.base;for(var D in u)typeof u[D]<"u"&&a.set(D,u[D])}}function r(l){return l.replace(/-(.)/g,function(u,i){return i.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var a=function(){function h(o,r,l,u){this.start={row:o,column:r},this.end={row:l,column:u}}return h.prototype.isEqual=function(o){return this.start.row===o.start.row&&this.end.row===o.end.row&&this.start.column===o.start.column&&this.end.column===o.end.column},h.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},h.prototype.contains=function(o,r){return this.compare(o,r)==0},h.prototype.compareRange=function(o){var r,l=o.end,u=o.start;return r=this.compare(l.row,l.column),r==1?(r=this.compare(u.row,u.column),r==1?2:r==0?1:0):r==-1?-2:(r=this.compare(u.row,u.column),r==-1?-1:r==1?42:0)},h.prototype.comparePoint=function(o){return this.compare(o.row,o.column)},h.prototype.containsRange=function(o){return this.comparePoint(o.start)==0&&this.comparePoint(o.end)==0},h.prototype.intersects=function(o){var r=this.compareRange(o);return r==-1||r==0||r==1},h.prototype.isEnd=function(o,r){return this.end.row==o&&this.end.column==r},h.prototype.isStart=function(o,r){return this.start.row==o&&this.start.column==r},h.prototype.setStart=function(o,r){typeof o=="object"?(this.start.column=o.column,this.start.row=o.row):(this.start.row=o,this.start.column=r)},h.prototype.setEnd=function(o,r){typeof o=="object"?(this.end.column=o.column,this.end.row=o.row):(this.end.row=o,this.end.column=r)},h.prototype.inside=function(o,r){return this.compare(o,r)==0?!(this.isEnd(o,r)||this.isStart(o,r)):!1},h.prototype.insideStart=function(o,r){return this.compare(o,r)==0?!this.isEnd(o,r):!1},h.prototype.insideEnd=function(o,r){return this.compare(o,r)==0?!this.isStart(o,r):!1},h.prototype.compare=function(o,r){return!this.isMultiLine()&&o===this.start.row?r<this.start.column?-1:r>this.end.column?1:0:o<this.start.row?-1:o>this.end.row?1:this.start.row===o?r>=this.start.column?0:-1:this.end.row===o?r<=this.end.column?0:1:0},h.prototype.compareStart=function(o,r){return this.start.row==o&&this.start.column==r?-1:this.compare(o,r)},h.prototype.compareEnd=function(o,r){return this.end.row==o&&this.end.column==r?1:this.compare(o,r)},h.prototype.compareInside=function(o,r){return this.end.row==o&&this.end.column==r?1:this.start.row==o&&this.start.column==r?-1:this.compare(o,r)},h.prototype.clipRows=function(o,r){if(this.end.row>r)var l={row:r+1,column:0};else if(this.end.row<o)var l={row:o,column:0};if(this.start.row>r)var u={row:r+1,column:0};else if(this.start.row<o)var u={row:o,column:0};return h.fromPoints(u||this.start,l||this.end)},h.prototype.extend=function(o,r){var l=this.compare(o,r);if(l==0)return this;if(l==-1)var u={row:o,column:r};else var i={row:o,column:r};return h.fromPoints(u||this.start,i||this.end)},h.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},h.prototype.isMultiLine=function(){return this.start.row!==this.end.row},h.prototype.clone=function(){return h.fromPoints(this.start,this.end)},h.prototype.collapseRows=function(){return this.end.column==0?new h(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new h(this.start.row,0,this.end.row,0)},h.prototype.toScreenRange=function(o){var r=o.documentToScreenPosition(this.start),l=o.documentToScreenPosition(this.end);return new h(r.row,r.column,l.row,l.column)},h.prototype.moveBy=function(o,r){this.start.row+=o,this.start.column+=r,this.end.row+=o,this.end.column+=r},h}();a.fromPoints=function(h,o){return new a(h.row,h.column,o.row,o.column)},a.comparePoints=function(h,o){return h.row-o.row||h.column-o.column},t.Range=a});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var a=e("./oop"),h=function(){var o={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};o.PRINTABLE_KEYS[173]="-";var r,l;for(l in o.FUNCTION_KEYS)r=o.FUNCTION_KEYS[l].toLowerCase(),o[r]=parseInt(l,10);for(l in o.PRINTABLE_KEYS)r=o.PRINTABLE_KEYS[l].toLowerCase(),o[r]=parseInt(l,10);return a.mixin(o,o.MODIFIER_KEYS),a.mixin(o,o.PRINTABLE_KEYS),a.mixin(o,o.FUNCTION_KEYS),o.enter=o.return,o.escape=o.esc,o.del=o.delete,function(){for(var u=["cmd","ctrl","alt","shift"],i=Math.pow(2,u.length);i--;)o.KEY_MODS[i]=u.filter(function(s){return i&o.KEY_MODS[s]}).join("-")+"-"}(),o.KEY_MODS[0]="",o.KEY_MODS[-1]="input-",o}();a.mixin(t,h),t.default=t,t.keyCodeToString=function(o){var r=h[o];return typeof r!="string"&&(r=String.fromCharCode(o)),r.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("./keys"),h=e("./useragent"),o=null,r=0,l;function u(){l=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return l={passive:!1},!0}})}catch{}}function i(){return l==null&&u(),l}function s(m,y,C){this.elem=m,this.type=y,this.callback=C}s.prototype.destroy=function(){p(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var f=t.addListener=function(m,y,C,T){m.addEventListener(y,C,i()),T&&T.$toDestroy.push(new s(m,y,C))},p=t.removeListener=function(m,y,C){m.removeEventListener(y,C,i())};t.stopEvent=function(m){return t.stopPropagation(m),t.preventDefault(m),!1},t.stopPropagation=function(m){m.stopPropagation&&m.stopPropagation()},t.preventDefault=function(m){m.preventDefault&&m.preventDefault()},t.getButton=function(m){return m.type=="dblclick"?0:m.type=="contextmenu"||h.isMac&&m.ctrlKey&&!m.altKey&&!m.shiftKey?2:m.button},t.capture=function(m,y,C){var T=m&&m.ownerDocument||document;function D(g){y&&y(g),C&&C(g),p(T,"mousemove",y),p(T,"mouseup",D),p(T,"dragstart",D)}return f(T,"mousemove",y),f(T,"mouseup",D),f(T,"dragstart",D),D},t.addMouseWheelListener=function(m,y,C){f(m,"wheel",function(T){var D=.15,g=T.deltaX||0,w=T.deltaY||0;switch(T.deltaMode){case T.DOM_DELTA_PIXEL:T.wheelX=g*D,T.wheelY=w*D;break;case T.DOM_DELTA_LINE:var F=15;T.wheelX=g*F,T.wheelY=w*F;break;case T.DOM_DELTA_PAGE:var b=150;T.wheelX=g*b,T.wheelY=w*b;break}y(T)},C)},t.addMultiMouseDownListener=function(m,y,C,T,D){var g=0,w,F,b,E={2:"dblclick",3:"tripleclick",4:"quadclick"};function M(S){if(t.getButton(S)!==0?g=0:S.detail>1?(g++,g>4&&(g=1)):g=1,h.isIE){var x=Math.abs(S.clientX-w)>5||Math.abs(S.clientY-F)>5;(!b||x)&&(g=1),b&&clearTimeout(b),b=setTimeout(function(){b=null},y[g-1]||600),g==1&&(w=S.clientX,F=S.clientY)}if(S._clicks=g,C[T]("mousedown",S),g>4)g=0;else if(g>1)return C[T](E[g],S)}Array.isArray(m)||(m=[m]),m.forEach(function(S){f(S,"mousedown",M,D)})};var d=function(m){return 0|(m.ctrlKey?1:0)|(m.altKey?2:0)|(m.shiftKey?4:0)|(m.metaKey?8:0)};t.getModifierString=function(m){return a.KEY_MODS[d(m)]};function c(m,y,C){var T=d(y);if(!h.isMac&&o){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(T|=8),o.altGr)if((3&T)!=3)o.altGr=0;else return;if(C===18||C===17){var D="location"in y?y.location:y.keyLocation;if(C===17&&D===1)o[C]==1&&(r=y.timeStamp);else if(C===18&&T===3&&D===2){var g=y.timeStamp-r;g<50&&(o.altGr=!0)}}}if(C in a.MODIFIER_KEYS&&(C=-1),!T&&C===13){var D="location"in y?y.location:y.keyLocation;if(D===3&&(m(y,T,-C),y.defaultPrevented))return}if(h.isChromeOS&&T&8){if(m(y,T,C),y.defaultPrevented)return;T&=-9}return!T&&!(C in a.FUNCTION_KEYS)&&!(C in a.PRINTABLE_KEYS)?!1:m(y,T,C)}t.addCommandKeyListener=function(m,y,C){var T=null;f(m,"keydown",function(D){o[D.keyCode]=(o[D.keyCode]||0)+1;var g=c(y,D,D.keyCode);return T=D.defaultPrevented,g},C),f(m,"keypress",function(D){T&&(D.ctrlKey||D.altKey||D.shiftKey||D.metaKey)&&(t.stopEvent(D),T=null)},C),f(m,"keyup",function(D){o[D.keyCode]=null},C),o||(_(),f(window,"focus",_))};function _(){o=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!h.isOldIE){var v=1;t.nextTick=function(m,y){y=y||window;var C="zero-timeout-message-"+v++,T=function(D){D.data==C&&(t.stopPropagation(D),p(y,"message",T),m())};f(y,"message",T),y.postMessage(C,"*")}}t.$idleBlocked=!1,t.onIdle=function(m,y){return setTimeout(function C(){t.$idleBlocked?setTimeout(C,100):m()},y)},t.$idleBlockId=null,t.blockIdle=function(m){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},m||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(m){setTimeout(m,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var a;n.exports={lineMode:!1,pasteCancelled:function(){return a&&a>Date.now()-50?!0:a=!1},cancel:function(){a=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var a=e("../lib/event"),h=e("../config").nls,o=e("../lib/useragent"),r=e("../lib/dom"),l=e("../lib/lang"),u=e("../clipboard"),i=o.isChrome<18,s=o.isIE,f=o.isChrome>63,p=400,d=e("../lib/keys"),c=d.KEY_MODS,_=o.isIOS,v=_?/\s/:/\n/,m=o.isMobile,y;y=function(C,T){var D=r.createElement("textarea");D.className="ace_text-input",D.setAttribute("wrap","off"),D.setAttribute("autocorrect","off"),D.setAttribute("autocapitalize","off"),D.setAttribute("spellcheck","false"),D.style.opacity="0",C.insertBefore(D,C.firstChild);var g=!1,w=!1,F=!1,b=!1,E="";m||(D.style.fontSize="1px");var M=!1,S=!1,x="",L=0,R=0,A=0,I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,H=0;try{var P=document.activeElement===D}catch{}this.setNumberOfExtraLines=function(K){if(I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,K<0){H=0;return}H=K},this.setAriaOptions=function(K){if(K.activeDescendant?(D.setAttribute("aria-haspopup","true"),D.setAttribute("aria-autocomplete",K.inline?"both":"list"),D.setAttribute("aria-activedescendant",K.activeDescendant)):(D.setAttribute("aria-haspopup","false"),D.setAttribute("aria-autocomplete","both"),D.removeAttribute("aria-activedescendant")),K.role&&D.setAttribute("role",K.role),K.setLabel&&(D.setAttribute("aria-roledescription",h("editor")),T.session)){var ie=T.session.selection.cursor.row;D.setAttribute("aria-label",h("Cursor at row $0",[ie+1]))}},this.setAriaOptions({role:"textbox"}),a.addListener(D,"blur",function(K){S||(T.onBlur(K),P=!1)},T),a.addListener(D,"focus",function(K){if(!S){if(P=!0,o.isEdge)try{if(!document.hasFocus())return}catch{}T.onFocus(K),o.isEdge?setTimeout(z):z()}},T),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:T.renderer.enableKeyboardAccessibility}),E||f||this.$focusScroll=="browser")return D.focus({preventScroll:!0});var K=D.style.top;D.style.position="fixed",D.style.top="0px";try{var ie=D.getBoundingClientRect().top!=0}catch{return}var pe=[];if(ie)for(var Ve=D.parentElement;Ve&&Ve.nodeType==1;)pe.push(Ve),Ve.setAttribute("ace_nocontext","true"),!Ve.parentElement&&Ve.getRootNode?Ve=Ve.getRootNode().host:Ve=Ve.parentElement;D.focus({preventScroll:!0}),ie&&pe.forEach(function(rt){rt.removeAttribute("ace_nocontext")}),setTimeout(function(){D.style.position="",D.style.top=="0px"&&(D.style.top=K)},0)},this.blur=function(){D.blur()},this.isFocused=function(){return P},T.on("beforeEndOperation",function(){var K=T.curOp,ie=K&&K.command&&K.command.name;if(ie!="insertstring"){var pe=ie&&(K.docChanged||K.selectionChanged);F&&pe&&(x=D.value="",It()),z()}});var q=function(K,ie){for(var pe=ie,Ve=1;Ve<=K-I&&Ve<2*H+1;Ve++)pe+=T.session.getLine(K-Ve).length+1;return pe},z=_?function(K){if(!(!P||g&&!K||b)){K||(K="");var ie=`
 ab`+K+`cde fg
`;ie!=D.value&&(D.value=x=ie);var pe=4,Ve=4+(K.length||(T.selection.isEmpty()?0:1));(L!=pe||R!=Ve)&&D.setSelectionRange(pe,Ve),L=pe,R=Ve}}:function(){if(!(F||b)&&!(!P&&!W)){F=!0;var K=0,ie=0,pe="";if(T.session){var Ve=T.selection,rt=Ve.getRange(),_t=Ve.cursor.row;_t===$+1?(I=$+1,$=I+2*H):_t===I-1?($=I-1,I=$-2*H):(_t<I-1||_t>$+1)&&(I=_t>H?_t-H:0,$=_t>H?_t+H:2*H);for(var Ge=[],Rt=I;Rt<=$;Rt++)Ge.push(T.session.getLine(Rt));if(pe=Ge.join(`
`),K=q(rt.start.row,rt.start.column),ie=q(rt.end.row,rt.end.column),rt.start.row<I){var Xt=T.session.getLine(I-1);K=rt.start.row<I-1?0:K,ie+=Xt.length+1,pe=Xt+`
`+pe}else if(rt.end.row>$){var Ot=T.session.getLine($+1);ie=rt.end.row>$+1?Ot.length:rt.end.column,ie+=pe.length+1,pe=pe+`
`+Ot}else m&&_t>0&&(pe=`
`+pe,ie+=1,K+=1);pe.length>p&&(K<p&&ie<p?pe=pe.slice(0,p):(pe=`
`,K==ie?K=ie=0:(K=0,ie=1)));var Yn=pe+`

`;Yn!=x&&(D.value=x=Yn,L=R=Yn.length)}if(W&&(L=D.selectionStart,R=D.selectionEnd),R!=ie||L!=K||D.selectionEnd!=R)try{D.setSelectionRange(K,ie),L=K,R=ie}catch{}F=!1}};this.resetSelection=z,P&&T.onFocus();var N=function(K){return K.selectionStart===0&&K.selectionEnd>=x.length&&K.value===x&&x&&K.selectionEnd!==R},Q=function(K){F||(g?g=!1:N(D)?(T.selectAll(),z()):m&&D.selectionStart!=L&&z())},O=null;this.setInputHandler=function(K){O=K},this.getInputHandler=function(){return O};var W=!1,U=function(K,ie){if(W&&(W=!1),w)return z(),K&&T.onPaste(K),w=!1,"";for(var pe=D.selectionStart,Ve=D.selectionEnd,rt=L,_t=x.length-R,Ge=K,Rt=K.length-pe,Xt=K.length-Ve,Ot=0;rt>0&&x[Ot]==K[Ot];)Ot++,rt--;for(Ge=Ge.slice(Ot),Ot=1;_t>0&&x.length-Ot>L-1&&x[x.length-Ot]==K[K.length-Ot];)Ot++,_t--;Rt-=Ot-1,Xt-=Ot-1;var Yn=Ge.length-Ot+1;if(Yn<0&&(rt=-Yn,Yn=0),Ge=Ge.slice(0,Yn),!ie&&!Ge&&!Rt&&!rt&&!_t&&!Xt)return"";b=!0;var _u=!1;return o.isAndroid&&Ge==". "&&(Ge="  ",_u=!0),Ge&&!rt&&!_t&&!Rt&&!Xt||M?T.onTextInput(Ge):T.onTextInput(Ge,{extendLeft:rt,extendRight:_t,restoreStart:Rt,restoreEnd:Xt}),b=!1,x=K,L=pe,R=Ve,A=Xt,_u?`
`:Ge},k=function(K){if(F)return Fe();if(K&&K.inputType){if(K.inputType=="historyUndo")return T.execCommand("undo");if(K.inputType=="historyRedo")return T.execCommand("redo")}var ie=D.value,pe=U(ie,!0);(ie.length>p+100||v.test(pe)||m&&L<1&&L==R)&&z()},te=function(K,ie,pe){var Ve=K.clipboardData||window.clipboardData;if(!(!Ve||i)){var rt=s||pe?"Text":"text/plain";try{return ie?Ve.setData(rt,ie)!==!1:Ve.getData(rt)}catch(_t){if(!pe)return te(_t,ie,!0)}}},J=function(K,ie){var pe=T.getCopyText();if(!pe)return a.preventDefault(K);te(K,pe)?(_&&(z(pe),g=pe,setTimeout(function(){g=!1},10)),ie?T.onCut():T.onCopy(),a.preventDefault(K)):(g=!0,D.value=pe,D.select(),setTimeout(function(){g=!1,z(),ie?T.onCut():T.onCopy()}))},ye=function(K){J(K,!0)},Ae=function(K){J(K,!1)},we=function(K){var ie=te(K);u.pasteCancelled()||(typeof ie=="string"?(ie&&T.onPaste(ie,K),o.isIE&&setTimeout(z),a.preventDefault(K)):(D.value="",w=!0))};a.addCommandKeyListener(D,T.onCommandKey.bind(T),T),a.addListener(D,"select",Q,T),a.addListener(D,"input",k,T),a.addListener(D,"cut",ye,T),a.addListener(D,"copy",Ae,T),a.addListener(D,"paste",we,T),(!("oncut"in D)||!("oncopy"in D)||!("onpaste"in D))&&a.addListener(C,"keydown",function(K){if(!(o.isMac&&!K.metaKey||!K.ctrlKey))switch(K.keyCode){case 67:Ae(K);break;case 86:we(K);break;case 88:ye(K);break}},T);var ce=function(K){if(!(F||!T.onCompositionStart||T.$readOnly)&&(F={},!M)){K.data&&(F.useTextareaForIME=!1),setTimeout(Fe,0),T._signal("compositionStart"),T.on("mousedown",nn);var ie=T.getSelectionRange();ie.end.row=ie.start.row,ie.end.column=ie.start.column,F.markerRange=ie,F.selectionStart=L,T.onCompositionStart(F),F.useTextareaForIME?(x=D.value="",L=0,R=0):(D.msGetInputContext&&(F.context=D.msGetInputContext()),D.getInputContext&&(F.context=D.getInputContext()))}},Fe=function(){if(!(!F||!T.onCompositionUpdate||T.$readOnly)){if(M)return nn();if(F.useTextareaForIME)T.onCompositionUpdate(D.value);else{var K=D.value;U(K),F.markerRange&&(F.context&&(F.markerRange.start.column=F.selectionStart=F.context.compositionStartOffset),F.markerRange.end.column=F.markerRange.start.column+R-F.selectionStart+A)}}},It=function(K){!T.onCompositionEnd||T.$readOnly||(F=!1,T.onCompositionEnd(),T.off("mousedown",nn),K&&k())};function nn(){S=!0,D.blur(),D.focus(),S=!1}var Gt=l.delayedCall(Fe,50).schedule.bind(null,null);function tt(K){K.keyCode==27&&D.value.length<D.selectionStart&&(F||(x=D.value),L=R=-1,z()),Gt()}a.addListener(D,"compositionstart",ce,T),a.addListener(D,"compositionupdate",Fe,T),a.addListener(D,"keyup",tt,T),a.addListener(D,"keydown",Gt,T),a.addListener(D,"compositionend",It,T),this.getElement=function(){return D},this.setCommandMode=function(K){M=K,D.readOnly=!1},this.setReadOnly=function(K){M||(D.readOnly=K)},this.setCopyWithEmptySelection=function(K){},this.onContextMenu=function(K){W=!0,z(),T._emit("nativecontextmenu",{target:T,domEvent:K}),this.moveToMouse(K,!0)},this.moveToMouse=function(K,ie){E||(E=D.style.cssText),D.style.cssText=(ie?"z-index:100000;":"")+(o.isIE?"opacity:0.1;":"")+"text-indent: -"+(L+R)*T.renderer.characterWidth*.5+"px;";var pe=T.container.getBoundingClientRect(),Ve=r.computedStyle(T.container),rt=pe.top+(parseInt(Ve.borderTopWidth)||0),_t=pe.left+(parseInt(pe.borderLeftWidth)||0),Ge=pe.bottom-rt-D.clientHeight-2,Rt=function(Xt){r.translate(D,Xt.clientX-_t-2,Math.min(Xt.clientY-rt-2,Ge))};Rt(K),K.type=="mousedown"&&(T.renderer.$isMousePressed=!0,clearTimeout(le),o.isWin&&a.capture(T.container,Rt,me))},this.onContextMenuClose=me;var le;function me(){clearTimeout(le),le=setTimeout(function(){E&&(D.style.cssText=E,E=""),T.renderer.$isMousePressed=!1,T.renderer.$keepTextAreaAtCursor&&T.renderer.$moveTextAreaToCursor()},0)}var fe=function(K){T.textInput.onContextMenu(K),me()};a.addListener(D,"mouseup",fe,T),a.addListener(D,"mousedown",function(K){K.preventDefault(),me()},T),a.addListener(T.renderer.scroller,"contextmenu",fe,T),a.addListener(D,"contextmenu",fe,T),_&&ae(C,T,D);function ae(K,ie,pe){var Ve=null,rt=!1;pe.addEventListener("keydown",function(Ge){Ve&&clearTimeout(Ve),rt=!0},!0),pe.addEventListener("keyup",function(Ge){Ve=setTimeout(function(){rt=!1},100)},!0);var _t=function(Ge){if(document.activeElement===pe&&!(rt||F||ie.$mouseHandler.isMousePressed)&&!g){var Rt=pe.selectionStart,Xt=pe.selectionEnd,Ot=null,Yn=0;if(Rt==0?Ot=d.up:Rt==1?Ot=d.home:Xt>R&&x[Xt]==`
`?Ot=d.end:Rt<L&&x[Rt-1]==" "?(Ot=d.left,Yn=c.option):Rt<L||Rt==L&&R!=L&&Rt==Xt?Ot=d.left:Xt>R&&x.slice(0,Xt).split(`
`).length>2?Ot=d.down:Xt>R&&x[Xt-1]==" "?(Ot=d.right,Yn=c.option):(Xt>R||Xt==R&&R!=L&&Rt==Xt)&&(Ot=d.right),Rt!==Xt&&(Yn|=c.shift),Ot){var _u=ie.onCommandKey({},Yn,Ot);if(!_u&&ie.commands){Ot=d.keyCodeToString(Ot);var xM=ie.commands.findKeyCommand(Yn,Ot);xM&&ie.execCommand(xM)}L=Rt,R=Xt,z("")}}};document.addEventListener("selectionchange",_t),ie.on("destroy",function(){document.removeEventListener("selectionchange",_t)})}this.destroy=function(){D.parentElement&&D.parentElement.removeChild(D)}},t.TextInput=y,t.$setUserAgentForTests=function(C,T){m=C,_=T}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("../lib/useragent"),h=0,o=550,r=function(){function i(s){s.$clickSelection=null;var f=s.editor;f.setDefaultHandler("mousedown",this.onMouseDown.bind(s)),f.setDefaultHandler("dblclick",this.onDoubleClick.bind(s)),f.setDefaultHandler("tripleclick",this.onTripleClick.bind(s)),f.setDefaultHandler("quadclick",this.onQuadClick.bind(s)),f.setDefaultHandler("mousewheel",this.onMouseWheel.bind(s));var p=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];p.forEach(function(d){s[d]=this[d]},this),s.selectByLines=this.extendSelectionBy.bind(s,"getLineRange"),s.selectByWords=this.extendSelectionBy.bind(s,"getWordRange")}return i.prototype.onMouseDown=function(s){var f=s.inSelection(),p=s.getDocumentPosition();this.mousedownEvent=s;var d=this.editor,c=s.getButton();if(c!==0){var _=d.getSelectionRange(),v=_.isEmpty();(v||c==1)&&d.selection.moveToPosition(p),c==2&&(d.textInput.onContextMenu(s.domEvent),a.isMozilla||s.preventDefault());return}if(this.mousedownEvent.time=Date.now(),f&&!d.isFocused()&&(d.focus(),this.$focusTimeout&&!this.$clickSelection&&!d.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(s);return}return this.captureMouse(s),this.startSelect(p,s.domEvent._clicks>1),s.preventDefault()},i.prototype.startSelect=function(s,f){s=s||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var p=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?p.selection.selectToPosition(s):f||p.selection.moveToPosition(s),f||this.select(),p.setStyle("ace_selecting"),this.setState("select"))},i.prototype.select=function(){var s,f=this.editor,p=f.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var d=this.$clickSelection.comparePoint(p);if(d==-1)s=this.$clickSelection.end;else if(d==1)s=this.$clickSelection.start;else{var c=u(this.$clickSelection,p);p=c.cursor,s=c.anchor}f.selection.setSelectionAnchor(s.row,s.column)}f.selection.selectToPosition(p),f.renderer.scrollCursorIntoView()},i.prototype.extendSelectionBy=function(s){var f,p=this.editor,d=p.renderer.screenToTextCoordinates(this.x,this.y),c=p.selection[s](d.row,d.column);if(this.$clickSelection){var _=this.$clickSelection.comparePoint(c.start),v=this.$clickSelection.comparePoint(c.end);if(_==-1&&v<=0)f=this.$clickSelection.end,(c.end.row!=d.row||c.end.column!=d.column)&&(d=c.start);else if(v==1&&_>=0)f=this.$clickSelection.start,(c.start.row!=d.row||c.start.column!=d.column)&&(d=c.end);else if(_==-1&&v==1)d=c.end,f=c.start;else{var m=u(this.$clickSelection,d);d=m.cursor,f=m.anchor}p.selection.setSelectionAnchor(f.row,f.column)}p.selection.selectToPosition(d),p.renderer.scrollCursorIntoView()},i.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},i.prototype.focusWait=function(){var s=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),f=Date.now();(s>h||f-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},i.prototype.onDoubleClick=function(s){var f=s.getDocumentPosition(),p=this.editor,d=p.session,c=d.getBracketRange(f);c?(c.isEmpty()&&(c.start.column--,c.end.column++),this.setState("select")):(c=p.selection.getWordRange(f.row,f.column),this.setState("selectByWords")),this.$clickSelection=c,this.select()},i.prototype.onTripleClick=function(s){var f=s.getDocumentPosition(),p=this.editor;this.setState("selectByLines");var d=p.getSelectionRange();d.isMultiLine()&&d.contains(f.row,f.column)?(this.$clickSelection=p.selection.getLineRange(d.start.row),this.$clickSelection.end=p.selection.getLineRange(d.end.row).end):this.$clickSelection=p.selection.getLineRange(f.row),this.select()},i.prototype.onQuadClick=function(s){var f=this.editor;f.selectAll(),this.$clickSelection=f.getSelectionRange(),this.setState("selectAll")},i.prototype.onMouseWheel=function(s){if(!s.getAccelKey()){s.getShiftKey()&&s.wheelY&&!s.wheelX&&(s.wheelX=s.wheelY,s.wheelY=0);var f=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var p=this.$lastScroll,d=s.domEvent.timeStamp,c=d-p.t,_=c?s.wheelX/c:p.vx,v=c?s.wheelY/c:p.vy;c<o&&(_=(_+p.vx)/2,v=(v+p.vy)/2);var m=Math.abs(_/v),y=!1;if(m>=1&&f.renderer.isScrollableBy(s.wheelX*s.speed,0)&&(y=!0),m<=1&&f.renderer.isScrollableBy(0,s.wheelY*s.speed)&&(y=!0),y)p.allowed=d;else if(d-p.allowed<o){var C=Math.abs(_)<=1.5*Math.abs(p.vx)&&Math.abs(v)<=1.5*Math.abs(p.vy);C?(y=!0,p.allowed=d):p.allowed=0}if(p.t=d,p.vx=_,p.vy=v,y)return f.renderer.scrollBy(s.wheelX*s.speed,s.wheelY*s.speed),s.stop()}},i}();r.prototype.selectEnd=r.prototype.selectByLinesEnd,r.prototype.selectAllEnd=r.prototype.selectByLinesEnd,r.prototype.selectByWordsEnd=r.prototype.selectByLinesEnd,t.DefaultHandlers=r;function l(i,s,f,p){return Math.sqrt(Math.pow(f-i,2)+Math.pow(p-s,2))}function u(i,s){if(i.start.row==i.end.row)var f=2*s.column-i.start.column-i.end.column;else if(i.start.row==i.end.row-1&&!i.start.column&&!i.end.column)var f=s.column-4;else var f=2*s.row-i.start.row-i.end.row;return f<0?{cursor:i.start,anchor:i.end}:{cursor:i.end,anchor:i.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,n){t.preventParentScroll=function(h){h.stopPropagation();var o=h.currentTarget,r=o.scrollHeight>o.clientHeight;r||h.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var c=function(_,v){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(m[C]=y[C])},c(_,v)};return function(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");c(_,v);function m(){this.constructor=_}_.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}}(),h=this&&this.__values||function(c){var _=typeof Symbol=="function"&&Symbol.iterator,v=_&&c[_],m=0;if(v)return v.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&m>=c.length&&(c=void 0),{value:c&&c[m++],done:!c}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},o=e("./lib/dom"),r=e("./lib/event"),l=e("./range").Range,u=e("./lib/scroll").preventParentScroll,i="ace_tooltip",s=function(){function c(_){this.isOpen=!1,this.$element=null,this.$parentNode=_}return c.prototype.$init=function(){return this.$element=o.createElement("div"),this.$element.className=i,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},c.prototype.getElement=function(){return this.$element||this.$init()},c.prototype.setText=function(_){this.getElement().textContent=_},c.prototype.setHtml=function(_){this.getElement().innerHTML=_},c.prototype.setPosition=function(_,v){this.getElement().style.left=_+"px",this.getElement().style.top=v+"px"},c.prototype.setClassName=function(_){o.addCssClass(this.getElement(),_)},c.prototype.setTheme=function(_){this.$element.className=i+" "+(_.isDark?"ace_dark ":"")+(_.cssClass||"")},c.prototype.show=function(_,v,m){_!=null&&this.setText(_),v!=null&&m!=null&&this.setPosition(v,m),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},c.prototype.hide=function(_){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=i,this.isOpen=!1)},c.prototype.getHeight=function(){return this.getElement().offsetHeight},c.prototype.getWidth=function(){return this.getElement().offsetWidth},c.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},c}(),f=function(){function c(){this.popups=[]}return c.prototype.addPopup=function(_){this.popups.push(_),this.updatePopups()},c.prototype.removePopup=function(_){var v=this.popups.indexOf(_);v!==-1&&(this.popups.splice(v,1),this.updatePopups())},c.prototype.updatePopups=function(){var _,v,m,y;this.popups.sort(function(M,S){return S.priority-M.priority});var C=[];try{for(var T=h(this.popups),D=T.next();!D.done;D=T.next()){var g=D.value,w=!0;try{for(var F=(m=void 0,h(C)),b=F.next();!b.done;b=F.next()){var E=b.value;if(this.doPopupsOverlap(E,g)){w=!1;break}}}catch(M){m={error:M}}finally{try{b&&!b.done&&(y=F.return)&&y.call(F)}finally{if(m)throw m.error}}w?C.push(g):g.hide()}}catch(M){_={error:M}}finally{try{D&&!D.done&&(v=T.return)&&v.call(T)}finally{if(_)throw _.error}}},c.prototype.doPopupsOverlap=function(_,v){var m=_.getElement().getBoundingClientRect(),y=v.getElement().getBoundingClientRect();return m.left<y.right&&m.right>y.left&&m.top<y.bottom&&m.bottom>y.top},c}(),p=new f;t.popupManager=p,t.Tooltip=s;var d=function(c){a(_,c);function _(v){v===void 0&&(v=document.body);var m=c.call(this,v)||this;m.timeout=void 0,m.lastT=0,m.idleTime=350,m.lastEvent=void 0,m.onMouseOut=m.onMouseOut.bind(m),m.onMouseMove=m.onMouseMove.bind(m),m.waitForHover=m.waitForHover.bind(m),m.hide=m.hide.bind(m);var y=m.getElement();return y.style.whiteSpace="pre-wrap",y.style.pointerEvents="auto",y.addEventListener("mouseout",m.onMouseOut),y.tabIndex=-1,y.addEventListener("blur",function(){y.contains(document.activeElement)||this.hide()}.bind(m)),y.addEventListener("wheel",u),m}return _.prototype.addToEditor=function(v){v.on("mousemove",this.onMouseMove),v.on("mousedown",this.hide),v.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},_.prototype.removeFromEditor=function(v){v.off("mousemove",this.onMouseMove),v.off("mousedown",this.hide),v.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},_.prototype.onMouseMove=function(v,m){this.lastEvent=v,this.lastT=Date.now();var y=m.$mouseHandler.isMousePressed;if(this.isOpen){var C=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(C.row,C.column)||y||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||y||(this.lastEvent=v,this.timeout=setTimeout(this.waitForHover,this.idleTime))},_.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var v=Date.now()-this.lastT;if(this.idleTime-v>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-v);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},_.prototype.isOutsideOfText=function(v){var m=v.editor,y=v.getDocumentPosition(),C=m.session.getLine(y.row);if(y.column==C.length){var T=m.renderer.pixelToScreenCoordinates(v.clientX,v.clientY),D=m.session.documentToScreenPosition(y.row,y.column);if(D.column!=T.column||D.row!=T.row)return!0}return!1},_.prototype.setDataProvider=function(v){this.$gatherData=v},_.prototype.showForRange=function(v,m,y,C){var T=10;if(!(C&&C!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var D=v.renderer;this.isOpen||(p.addPopup(this),this.$registerCloseEvents(),this.setTheme(D.theme)),this.isOpen=!0,this.addMarker(m,v.session),this.range=l.fromPoints(m.start,m.end);var g=D.textToScreenCoordinates(m.start.row,m.start.column),w=D.scroller.getBoundingClientRect();g.pageX<w.left&&(g.pageX=w.left);var F=this.getElement();F.innerHTML="",F.appendChild(y),F.style.maxHeight="",F.style.display="block";var b=F.clientHeight,E=F.clientWidth,M=window.innerHeight-g.pageY-D.lineHeight,S=!0;g.pageY-b<0&&g.pageY<M&&(S=!1),F.style.maxHeight=(S?g.pageY:M)-T+"px",F.style.top=S?"":g.pageY+D.lineHeight+"px",F.style.bottom=S?window.innerHeight-g.pageY+"px":"",F.style.left=Math.min(g.pageX,window.innerWidth-E-T)+"px"}},_.prototype.addMarker=function(v,m){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=m,this.marker=m&&m.addMarker(v,"ace_highlight-marker","text")},_.prototype.hide=function(v){!v&&document.activeElement==this.getElement()||v&&v.target&&(v.type!="keydown"||v.ctrlKey||v.metaKey)&&this.$element.contains(v.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,p.removePopup(this)))},_.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},_.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},_.prototype.onMouseOut=function(v){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!v.relatedTarget||this.getElement().contains(v.relatedTarget)||v&&v.currentTarget.contains(v.relatedTarget)||v.relatedTarget.classList.contains("ace_content")||this.hide())},_}(s);t.HoverTooltip=d});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var f=function(p,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&(c[v]=_[v])},f(p,d)};return function(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(p,d);function c(){this.constructor=p}p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),h=this&&this.__values||function(f){var p=typeof Symbol=="function"&&Symbol.iterator,d=p&&f[p],c=0;if(d)return d.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&c>=f.length&&(f=void 0),{value:f&&f[c++],done:!f}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},o=e("../lib/dom"),r=e("../lib/event"),l=e("../tooltip").Tooltip,u=e("../config").nls;function i(f){var p=f.editor,d=p.renderer.$gutterLayer,c=new s(p);f.editor.setDefaultHandler("guttermousedown",function(T){if(!(!p.isFocused()||T.getButton()!=0)){var D=d.getRegion(T);if(D!="foldWidgets"){var g=T.getDocumentPosition().row,w=p.session.selection;if(T.getShiftKey())w.selectTo(g,0);else{if(T.domEvent.detail==2)return p.selectAll(),T.preventDefault();f.$clickSelection=p.selection.getLineRange(g)}return f.setState("selectByLines"),f.captureMouse(T),T.preventDefault()}}});var _,v;function m(){var T=v.getDocumentPosition().row,D=p.session.getLength();if(T==D){var g=p.renderer.pixelToScreenCoordinates(0,v.y).row,w=v.$pos;if(g>p.session.documentToScreenRow(w.row,w.column))return y()}if(c.showTooltip(T),!!c.isOpen)if(p.on("mousewheel",y),f.$tooltipFollowsMouse)C(v);else{var F=v.getGutterRow(),b=d.$lines.get(F);if(b){var E=b.element.querySelector(".ace_gutter_annotation"),M=E.getBoundingClientRect(),S=c.getElement().style;S.left=M.right+"px",S.top=M.bottom+"px"}else C(v)}}function y(){_&&(_=clearTimeout(_)),c.isOpen&&(c.hideTooltip(),p.off("mousewheel",y))}function C(T){c.setPosition(T.x,T.y)}f.editor.setDefaultHandler("guttermousemove",function(T){var D=T.domEvent.target||T.domEvent.srcElement;if(o.hasCssClass(D,"ace_fold-widget"))return y();c.isOpen&&f.$tooltipFollowsMouse&&C(T),v=T,!_&&(_=setTimeout(function(){_=null,v&&!f.isMousePressed?m():y()},50))}),r.addListener(p.renderer.$gutter,"mouseout",function(T){v=null,!(!c.isOpen||_)&&(_=setTimeout(function(){_=null,y()},50))},p),p.on("changeSession",y),p.on("input",y)}t.GutterHandler=i;var s=function(f){a(p,f);function p(d){var c=f.call(this,d.container)||this;return c.editor=d,c}return p.prototype.setPosition=function(d,c){var _=window.innerWidth||document.documentElement.clientWidth,v=window.innerHeight||document.documentElement.clientHeight,m=this.getWidth(),y=this.getHeight();d+=15,c+=15,d+m>_&&(d-=d+m-_),c+y>v&&(c-=20+y),l.prototype.setPosition.call(this,d,c)},Object.defineProperty(p,"annotationLabels",{get:function(){return{error:{singular:u("error"),plural:u("errors")},warning:{singular:u("warning"),plural:u("warnings")},info:{singular:u("information message"),plural:u("information messages")}}},enumerable:!1,configurable:!0}),p.prototype.showTooltip=function(d){var c=this.editor.renderer.$gutterLayer,_=c.$annotations[d],v;_?v={text:Array.from(_.text),type:Array.from(_.type)}:v={text:[],type:[]};var m=c.session.getFoldLine(d);if(m&&c.$showFoldedAnnotations){for(var y={error:[],warning:[],info:[]},C,T=d+1;T<=m.end.row;T++)if(c.$annotations[T])for(var D=0;D<c.$annotations[T].text.length;D++){var g=c.$annotations[T].type[D];if(y[g].push(c.$annotations[T].text[D]),g==="error"){C="error_fold";continue}if(g==="warning"){C="warning_fold";continue}}if(C==="error_fold"||C==="warning_fold"){var w="".concat(p.annotationsToSummaryString(y)," in folded code.");v.text.push(w),v.type.push(C)}}if(v.text.length===0)return this.hide();for(var F={error:[],warning:[],info:[]},b=c.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",T=0;T<v.text.length;T++){var E="<span class='ace_".concat(v.type[T]," ").concat(b,"' aria-label='").concat(p.annotationLabels[v.type[T].replace("_fold","")].singular,"' role=img> </span> ").concat(v.text[T]);F[v.type[T].replace("_fold","")].push(E)}var M=[].concat(F.error,F.warning,F.info).join("<br>");this.setHtml(M),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},p.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},p.annotationsToSummaryString=function(d){var c,_,v=[],m=["error","warning","info"];try{for(var y=h(m),C=y.next();!C.done;C=y.next()){var T=C.value;if(d[T].length){var D=d[T].length===1?p.annotationLabels[T].singular:p.annotationLabels[T].plural;v.push("".concat(d[T].length," ").concat(D))}}}catch(g){c={error:g}}finally{try{C&&!C.done&&(_=y.return)&&_.call(y)}finally{if(c)throw c.error}}return v.join(", ")},p}(l);t.GutterTooltip=s});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("../lib/event"),h=e("../lib/useragent"),o=function(){function r(l,u){this.speed,this.wheelX,this.wheelY,this.domEvent=l,this.editor=u,this.x=this.clientX=l.clientX,this.y=this.clientY=l.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return r.prototype.stopPropagation=function(){a.stopPropagation(this.domEvent),this.propagationStopped=!0},r.prototype.preventDefault=function(){a.preventDefault(this.domEvent),this.defaultPrevented=!0},r.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},r.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},r.prototype.getGutterRow=function(){var l=this.getDocumentPosition().row,u=this.editor.session.documentToScreenRow(l,0),i=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return u-i},r.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var l=this.editor,u=l.getSelectionRange();if(u.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=u.contains(i.row,i.column)}return this.$inSelection},r.prototype.getButton=function(){return a.getButton(this.domEvent)},r.prototype.getShiftKey=function(){return this.domEvent.shiftKey},r.prototype.getAccelKey=function(){return h.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},r}();t.MouseEvent=o});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=e("../lib/event"),o=e("../lib/useragent"),r=200,l=200,u=5;function i(f){var p=f.editor,d=a.createElement("div");d.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",d.textContent="\xA0";var c=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];c.forEach(function(q){f[q]=this[q]},this),p.on("mousedown",this.onMouseDown.bind(f));var _=p.container,v,m,y,C,T,D,g=0,w,F,b,E,M;this.onDragStart=function(q){if(this.cancelDrag||!_.draggable){var z=this;return setTimeout(function(){z.startSelect(),z.captureMouse(q)},0),q.preventDefault()}T=p.getSelectionRange();var N=q.dataTransfer;N.effectAllowed=p.getReadOnly()?"copy":"copyMove",p.container.appendChild(d),N.setDragImage&&N.setDragImage(d,0,0),setTimeout(function(){p.container.removeChild(d)}),N.clearData(),N.setData("Text",p.session.getTextRange()),F=!0,this.setState("drag")},this.onDragEnd=function(q){if(_.draggable=!1,F=!1,this.setState(null),!p.getReadOnly()){var z=q.dataTransfer.dropEffect;!w&&z=="move"&&p.session.remove(p.getSelectionRange()),p.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(q){if(!(p.getReadOnly()||!H(q.dataTransfer)))return m=q.clientX,y=q.clientY,v||R(),g++,q.dataTransfer.dropEffect=w=P(q),h.preventDefault(q)},this.onDragOver=function(q){if(!(p.getReadOnly()||!H(q.dataTransfer)))return m=q.clientX,y=q.clientY,v||(R(),g++),I!==null&&(I=null),q.dataTransfer.dropEffect=w=P(q),h.preventDefault(q)},this.onDragLeave=function(q){if(g--,g<=0&&v)return A(),w=null,h.preventDefault(q)},this.onDrop=function(q){if(D){var z=q.dataTransfer;if(F)switch(w){case"move":T.contains(D.row,D.column)?T={start:D,end:D}:T=p.moveText(T,D);break;case"copy":T=p.moveText(T,D,!0);break}else{var N=z.getData("Text");T={start:D,end:p.session.insert(D,N)},p.focus(),w=null}return A(),h.preventDefault(q)}},h.addListener(_,"dragstart",this.onDragStart.bind(f),p),h.addListener(_,"dragend",this.onDragEnd.bind(f),p),h.addListener(_,"dragenter",this.onDragEnter.bind(f),p),h.addListener(_,"dragover",this.onDragOver.bind(f),p),h.addListener(_,"dragleave",this.onDragLeave.bind(f),p),h.addListener(_,"drop",this.onDrop.bind(f),p);function S(q,z){var N=Date.now(),Q=!z||q.row!=z.row,O=!z||q.column!=z.column;if(!E||Q||O)p.moveCursorToPosition(q),E=N,M={x:m,y};else{var W=s(M.x,M.y,m,y);W>u?E=null:N-E>=l&&(p.renderer.scrollCursorIntoView(),E=null)}}function x(q,z){var N=Date.now(),Q=p.renderer.layerConfig.lineHeight,O=p.renderer.layerConfig.characterWidth,W=p.renderer.scroller.getBoundingClientRect(),U={x:{left:m-W.left,right:W.right-m},y:{top:y-W.top,bottom:W.bottom-y}},k=Math.min(U.x.left,U.x.right),te=Math.min(U.y.top,U.y.bottom),J={row:q.row,column:q.column};k/O<=2&&(J.column+=U.x.left<U.x.right?-3:2),te/Q<=1&&(J.row+=U.y.top<U.y.bottom?-1:1);var ye=q.row!=J.row,Ae=q.column!=J.column,we=!z||q.row!=z.row;ye||Ae&&!we?b?N-b>=r&&p.renderer.scrollCursorIntoView(J):b=N:b=null}function L(){var q=D;D=p.renderer.screenToTextCoordinates(m,y),S(D,q),x(D,q)}function R(){T=p.selection.toOrientedRange(),v=p.session.addMarker(T,"ace_selection",p.getSelectionStyle()),p.clearSelection(),p.isFocused()&&p.renderer.$cursorLayer.setBlinking(!1),clearInterval(C),L(),C=setInterval(L,20),g=0,h.addListener(document,"mousemove",$)}function A(){clearInterval(C),p.session.removeMarker(v),v=null,p.selection.fromOrientedRange(T),p.isFocused()&&!F&&p.$resetCursorStyle(),T=null,D=null,g=0,b=null,E=null,h.removeListener(document,"mousemove",$)}var I=null;function $(){I==null&&(I=setTimeout(function(){I!=null&&v&&A()},20))}function H(q){var z=q.types;return!z||Array.prototype.some.call(z,function(N){return N=="text/plain"||N=="Text"})}function P(q){var z=["copy","copymove","all","uninitialized"],N=["move","copymove","linkmove","all","uninitialized"],Q=o.isMac?q.altKey:q.ctrlKey,O="uninitialized";try{O=q.dataTransfer.effectAllowed.toLowerCase()}catch{}var W="none";return Q&&z.indexOf(O)>=0?W="copy":N.indexOf(O)>=0?W="move":z.indexOf(O)>=0&&(W="copy"),W}}(function(){this.dragWait=function(){var f=Date.now()-this.mousedownEvent.time;f>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var f=this.editor.container;f.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(f){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var f=this.editor,p=f.container;p.draggable=!0,f.renderer.$cursorLayer.setBlinking(!1),f.setStyle("ace_dragging");var d=o.isWin?"default":"move";f.renderer.setCursorStyle(d),this.setState("dragReady")},this.onMouseDrag=function(f){var p=this.editor.container;if(o.isIE&&this.state=="dragReady"){var d=s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);d>3&&p.dragDrop()}if(this.state==="dragWait"){var d=s(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);d>0&&(p.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(f){if(this.$dragEnabled){this.mousedownEvent=f;var p=this.editor,d=f.inSelection(),c=f.getButton(),_=f.domEvent.detail||1;if(_===1&&c===0&&d){if(f.editor.inMultiSelectMode&&(f.getAccelKey()||f.getShiftKey()))return;this.mousedownEvent.time=Date.now();var v=f.domEvent.target||f.domEvent.srcElement;if("unselectable"in v&&(v.unselectable="on"),p.getDragDelay()){if(o.isWebKit){this.cancelDrag=!0;var m=p.container;m.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(f,this.onMouseDrag.bind(this)),f.defaultPrevented=!0}}}}).call(i.prototype);function s(f,p,d,c){return Math.sqrt(Math.pow(d-f,2)+Math.pow(c-p,2))}t.DragdropHandler=i});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var a=e("./mouse_event").MouseEvent,h=e("../lib/event"),o=e("../lib/dom");t.addTouchListeners=function(r,l){var u="scroll",i,s,f,p,d,c,_=0,v,m=0,y=0,C=0,T,D;function g(){var S=window.navigator&&window.navigator.clipboard,x=!1,L=function(){var A=l.getCopyText(),I=l.session.getUndoManager().hasUndo();D.replaceChild(o.buildDom(x?["span",!A&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],A&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],A&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],S&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],I&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),D.firstChild)},R=function(A){var I=A.target.getAttribute("action");if(I=="more"||!x)return x=!x,L();I=="paste"?S.readText().then(function($){l.execCommand(I,$)}):I&&((I=="cut"||I=="copy")&&(S?S.writeText(l.getCopyText()):document.execCommand("copy")),l.execCommand(I)),D.firstChild.style.display="none",x=!1,I!="openCommandPalette"&&l.focus()};D=o.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(A){u="menu",A.stopPropagation(),A.preventDefault(),l.textInput.focus()},ontouchend:function(A){A.stopPropagation(),A.preventDefault(),R(A)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],l.container)}function w(){D||g();var S=l.selection.cursor,x=l.renderer.textToScreenCoordinates(S.row,S.column),L=l.renderer.textToScreenCoordinates(0,0).pageX,R=l.renderer.scrollLeft,A=l.container.getBoundingClientRect();D.style.top=x.pageY-A.top-3+"px",x.pageX-A.left<A.width-70?(D.style.left="",D.style.right="10px"):(D.style.right="",D.style.left=L+R-A.left+"px"),D.style.display="",D.firstChild.style.display="none",l.on("input",F)}function F(S){D&&(D.style.display="none"),l.off("input",F)}function b(){d=null,clearTimeout(d);var S=l.selection.getRange(),x=S.contains(v.row,v.column);(S.isEmpty()||!x)&&(l.selection.moveToPosition(v),l.selection.selectWord()),u="wait",w()}function E(){d=null,clearTimeout(d),l.selection.moveToPosition(v);var S=m>=2?l.selection.getLineRange(v.row):l.session.getBracketRange(v);S&&!S.isEmpty()?l.selection.setRange(S):l.selection.selectWord(),u="wait"}h.addListener(r,"contextmenu",function(S){if(T){var x=l.textInput.getElement();x.focus()}},l),h.addListener(r,"touchstart",function(S){var x=S.touches;if(d||x.length>1){clearTimeout(d),d=null,f=-1,u="zoom";return}T=l.$mouseHandler.isMousePressed=!0;var L=l.renderer.layerConfig.lineHeight,R=l.renderer.layerConfig.lineHeight,A=S.timeStamp;p=A;var I=x[0],$=I.clientX,H=I.clientY;Math.abs(i-$)+Math.abs(s-H)>L&&(f=-1),i=S.clientX=$,s=S.clientY=H,y=C=0;var P=new a(S,l);if(v=P.getDocumentPosition(),A-f<500&&x.length==1&&!_)m++,S.preventDefault(),S.button=0,E();else{m=0;var q=l.selection.cursor,z=l.selection.isEmpty()?q:l.selection.anchor,N=l.renderer.$cursorLayer.getPixelPosition(q,!0),Q=l.renderer.$cursorLayer.getPixelPosition(z,!0),O=l.renderer.scroller.getBoundingClientRect(),W=l.renderer.layerConfig.offset,U=l.renderer.scrollLeft,k=function(ye,Ae){return ye=ye/R,Ae=Ae/L-.75,ye*ye+Ae*Ae};if(S.clientX<O.left){u="zoom";return}var te=k(S.clientX-O.left-N.left+U,S.clientY-O.top-N.top+W),J=k(S.clientX-O.left-Q.left+U,S.clientY-O.top-Q.top+W);te<3.5&&J<3.5&&(u=te>J?"cursor":"anchor"),J<3.5?u="anchor":te<3.5?u="cursor":u="scroll",d=setTimeout(b,450)}f=A},l),h.addListener(r,"touchend",function(S){T=l.$mouseHandler.isMousePressed=!1,c&&clearInterval(c),u=="zoom"?(u="",_=0):d?(l.selection.moveToPosition(v),_=0,w()):u=="scroll"?(M(),F()):w(),clearTimeout(d),d=null},l),h.addListener(r,"touchmove",function(S){d&&(clearTimeout(d),d=null);var x=S.touches;if(!(x.length>1||u=="zoom")){var L=x[0],R=i-L.clientX,A=s-L.clientY;if(u=="wait")if(R*R+A*A>4)u="cursor";else return S.preventDefault();i=L.clientX,s=L.clientY,S.clientX=L.clientX,S.clientY=L.clientY;var I=S.timeStamp,$=I-p;if(p=I,u=="scroll"){var H=new a(S,l);H.speed=1,H.wheelX=R,H.wheelY=A,10*Math.abs(R)<Math.abs(A)&&(R=0),10*Math.abs(A)<Math.abs(R)&&(A=0),$!=0&&(y=R/$,C=A/$),l._emit("mousewheel",H),H.propagationStopped||(y=C=0)}else{var P=new a(S,l),q=P.getDocumentPosition();u=="cursor"?l.selection.moveCursorToPosition(q):u=="anchor"&&l.selection.setSelectionAnchor(q.row,q.column),l.renderer.scrollCursorIntoView(q),S.preventDefault()}}},l);function M(){_+=60,c=setInterval(function(){_--<=0&&(clearInterval(c),c=null),Math.abs(y)<.01&&(y=0),Math.abs(C)<.01&&(C=0),_<20&&(y=.9*y),_<20&&(C=.9*C);var S=l.session.getScrollTop();l.renderer.scrollBy(10*y,10*C),S==l.session.getScrollTop()&&(_=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var a=e("../lib/event"),h=e("../lib/useragent"),o=e("./default_handlers").DefaultHandlers,r=e("./default_gutter_handler").GutterHandler,l=e("./mouse_event").MouseEvent,u=e("./dragdrop_handler").DragdropHandler,i=e("./touch_handler").addTouchListeners,s=e("../config"),f=function(){function p(d){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var c=this;this.editor=d,new o(this),new r(this),new u(this);var _=function(y){var C=!document.hasFocus||!document.hasFocus()||!d.isFocused()&&document.activeElement==(d.textInput&&d.textInput.getElement());C&&window.focus(),d.focus(),setTimeout(function(){d.isFocused()||d.focus()})},v=d.renderer.getMouseEventTarget();a.addListener(v,"click",this.onMouseEvent.bind(this,"click"),d),a.addListener(v,"mousemove",this.onMouseMove.bind(this,"mousemove"),d),a.addMultiMouseDownListener([v,d.renderer.scrollBarV&&d.renderer.scrollBarV.inner,d.renderer.scrollBarH&&d.renderer.scrollBarH.inner,d.textInput&&d.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",d),a.addMouseWheelListener(d.container,this.onMouseWheel.bind(this,"mousewheel"),d),i(d.container,d);var m=d.renderer.$gutter;a.addListener(m,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),d),a.addListener(m,"click",this.onMouseEvent.bind(this,"gutterclick"),d),a.addListener(m,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),d),a.addListener(m,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),d),a.addListener(v,"mousedown",_,d),a.addListener(m,"mousedown",_,d),h.isIE&&d.renderer.scrollBarV&&(a.addListener(d.renderer.scrollBarV.element,"mousedown",_,d),a.addListener(d.renderer.scrollBarH.element,"mousedown",_,d)),d.on("mousemove",function(y){if(!(c.state||c.$dragDelay||!c.$dragEnabled)){var C=d.renderer.screenToTextCoordinates(y.x,y.y),T=d.session.selection.getRange(),D=d.renderer;!T.isEmpty()&&T.insideStart(C.row,C.column)?D.setCursorStyle("default"):D.setCursorStyle("")}},d)}return p.prototype.onMouseEvent=function(d,c){this.editor.session&&this.editor._emit(d,new l(c,this.editor))},p.prototype.onMouseMove=function(d,c){var _=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!_||!_.length||this.editor._emit(d,new l(c,this.editor))},p.prototype.onMouseWheel=function(d,c){var _=new l(c,this.editor);_.speed=this.$scrollSpeed*2,_.wheelX=c.wheelX,_.wheelY=c.wheelY,this.editor._emit(d,_)},p.prototype.setState=function(d){this.state=d},p.prototype.captureMouse=function(d,c){this.x=d.x,this.y=d.y,this.isMousePressed=!0;var _=this.editor,v=this.editor.renderer;v.$isMousePressed=!0;var m=this,y=function(w){if(w){if(h.isWebKit&&!w.which&&m.releaseMouse)return m.releaseMouse();m.x=w.clientX,m.y=w.clientY,c&&c(w),m.mouseEvent=new l(w,m.editor),m.$mouseMoved=!0}},C=function(w){_.off("beforeEndOperation",D),clearInterval(g),_.session&&T(),m[m.state+"End"]&&m[m.state+"End"](w),m.state="",m.isMousePressed=v.$isMousePressed=!1,v.$keepTextAreaAtCursor&&v.$moveTextAreaToCursor(),m.$onCaptureMouseMove=m.releaseMouse=null,w&&m.onMouseEvent("mouseup",w),_.endOperation()},T=function(){m[m.state]&&m[m.state](),m.$mouseMoved=!1};if(h.isOldIE&&d.domEvent.type=="dblclick")return setTimeout(function(){C(d)});var D=function(w){m.releaseMouse&&_.curOp.command.name&&_.curOp.selectionChanged&&(m[m.state+"End"]&&m[m.state+"End"](),m.state="",m.releaseMouse())};_.on("beforeEndOperation",D),_.startOperation({command:{name:"mouse"}}),m.$onCaptureMouseMove=y,m.releaseMouse=a.capture(this.editor.container,y,C);var g=setInterval(T,20)},p.prototype.cancelContextMenu=function(){var d=function(c){c&&c.domEvent&&c.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",d),c&&c.domEvent&&a.stopEvent(c.domEvent))}.bind(this);setTimeout(d,10),this.editor.on("nativecontextmenu",d)},p.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},p}();f.prototype.releaseMouse=null,s.defineOptions(f.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:h.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=f});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=function(){function o(r){r.on("click",function(l){var u=l.getDocumentPosition(),i=r.session,s=i.getFoldAt(u.row,u.column,1);s&&(l.getAccelKey()?i.removeFold(s):i.expandFold(s),l.stop());var f=l.domEvent&&l.domEvent.target;f&&a.hasCssClass(f,"ace_inline_button")&&a.hasCssClass(f,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),r.renderer.scrollCursorIntoView())}),r.on("gutterclick",function(l){var u=r.renderer.$gutterLayer.getRegion(l);if(u=="foldWidgets"){var i=l.getDocumentPosition().row,s=r.session;s.foldWidgets&&s.foldWidgets[i]&&r.session.onFoldWidgetClick(i,l),r.isFocused()||r.focus(),l.stop()}}),r.on("gutterdblclick",function(l){var u=r.renderer.$gutterLayer.getRegion(l);if(u=="foldWidgets"){var i=l.getDocumentPosition().row,s=r.session,f=s.getParentFoldRangeData(i,!0),p=f.range||f.firstRange;if(p){i=p.start.row;var d=s.getFoldAt(i,s.getLine(i).length,1);d?s.removeFold(d):(s.addFold("...",p),r.renderer.scrollCursorIntoView({row:p.start.row,column:0}))}l.stop()}})}return o}();t.FoldHandler=h});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var a=e("../lib/keys"),h=e("../lib/event"),o=function(){function r(l){this.$editor=l,this.$data={editor:l},this.$handlers=[],this.setDefaultHandler(l.commands)}return r.prototype.setDefaultHandler=function(l){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=l,this.addKeyboardHandler(l,0)},r.prototype.setKeyboardHandler=function(l){var u=this.$handlers;if(u[u.length-1]!=l){for(;u[u.length-1]&&u[u.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(u[u.length-1]);this.addKeyboardHandler(l,1)}},r.prototype.addKeyboardHandler=function(l,u){if(l){typeof l=="function"&&!l.handleKeyboard&&(l.handleKeyboard=l);var i=this.$handlers.indexOf(l);i!=-1&&this.$handlers.splice(i,1),u==null?this.$handlers.push(l):this.$handlers.splice(u,0,l),i==-1&&l.attach&&l.attach(this.$editor)}},r.prototype.removeKeyboardHandler=function(l){var u=this.$handlers.indexOf(l);return u==-1?!1:(this.$handlers.splice(u,1),l.detach&&l.detach(this.$editor),!0)},r.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},r.prototype.getStatusText=function(){var l=this.$data,u=l.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(u,l)||""}).filter(Boolean).join(" ")},r.prototype.$callKeyboardHandlers=function(l,u,i,s){for(var f,p=!1,d=this.$editor.commands,c=this.$handlers.length;c--&&(f=this.$handlers[c].handleKeyboard(this.$data,l,u,i,s),!(!(!f||!f.command)&&(f.command=="null"?p=!0:p=d.exec(f.command,this.$editor,f.args,s),p&&s&&l!=-1&&f.passEvent!=!0&&f.command.passEvent!=!0&&h.stopEvent(s),p))););return!p&&l==-1&&(f={command:"insertstring"},p=d.exec("insertstring",this.$editor,u)),p&&this.$editor._signal&&this.$editor._signal("keyboardActivity",f),p},r.prototype.onCommandKey=function(l,u,i){var s=a.keyCodeToString(i);return this.$callKeyboardHandlers(u,s,i,l)},r.prototype.onTextInput=function(l){return this.$callKeyboardHandlers(-1,l)},r}();t.KeyBinding=o});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var a=["\u0621","\u0641"],h=["\u063A","\u064A"],o=0,r=0,l=!1,u=!1,i=!1,s=!1,f=!1,p=!1,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_=0,v=1,m=0,y=1,C=2,T=3,D=4,g=5,w=6,F=7,b=8,E=9,M=10,S=11,x=12,L=13,R=14,A=15,I=16,$=17,H=18,P=[H,H,H,H,H,H,H,H,H,w,g,w,b,g,H,H,H,H,H,H,H,H,H,H,H,H,H,H,g,g,g,w,b,D,D,S,S,S,D,D,D,D,D,M,E,M,E,E,C,C,C,C,C,C,C,C,C,C,E,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,H,H,H,H,H,H,g,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,E,D,S,S,S,S,D,D,D,D,m,D,D,H,D,D,S,S,C,C,D,m,D,D,D,C,m,D,D,D,D,D],q=[b,b,b,b,b,b,b,b,b,b,b,H,H,H,m,y,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,b,g,L,R,A,I,$,E,S,S,S,S,S,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,b];function z(U,k,te,J){var ye=o?c:d,Ae=null,we=null,ce=null,Fe=0,It=null,nn=null,Gt=-1,tt=null,le=null,me=[];if(!J)for(tt=0,J=[];tt<te;tt++)J[tt]=O(U[tt]);for(r=o,l=!1,u=!1,i=!1,s=!1,le=0;le<te;le++){if(Ae=Fe,me[le]=we=Q(U,J,me,le),Fe=ye[Ae][we],It=Fe&240,Fe&=15,k[le]=ce=ye[Fe][5],It>0)if(It==16){for(tt=Gt;tt<le;tt++)k[tt]=1;Gt=-1}else Gt=-1;if(nn=ye[Fe][6],nn)Gt==-1&&(Gt=le);else if(Gt>-1){for(tt=Gt;tt<le;tt++)k[tt]=ce;Gt=-1}J[le]==g&&(k[le]=0),r|=ce}if(s){for(tt=0;tt<te;tt++)if(J[tt]==w){k[tt]=o;for(var fe=tt-1;fe>=0&&J[fe]==b;fe--)k[fe]=o}}}function N(U,k,te){if(!(r<U)){if(U==1&&o==v&&!i){te.reverse();return}for(var J=te.length,ye=0,Ae,we,ce,Fe;ye<J;){if(k[ye]>=U){for(Ae=ye+1;Ae<J&&k[Ae]>=U;)Ae++;for(we=ye,ce=Ae-1;we<ce;we++,ce--)Fe=te[we],te[we]=te[ce],te[ce]=Fe;ye=Ae}ye++}}}function Q(U,k,te,J){var ye=k[J],Ae,we,ce,Fe;switch(ye){case m:case y:l=!1;case D:case T:return ye;case C:return l?T:C;case F:return l=!0,u=!0,y;case b:return D;case E:return J<1||J+1>=k.length||(Ae=te[J-1])!=C&&Ae!=T||(we=k[J+1])!=C&&we!=T?D:(l&&(we=T),we==Ae?we:D);case M:return Ae=J>0?te[J-1]:g,Ae==C&&J+1<k.length&&k[J+1]==C?C:D;case S:if(J>0&&te[J-1]==C)return C;if(l)return D;for(Fe=J+1,ce=k.length;Fe<ce&&k[Fe]==S;)Fe++;return Fe<ce&&k[Fe]==C?C:D;case x:for(ce=k.length,Fe=J+1;Fe<ce&&k[Fe]==x;)Fe++;if(Fe<ce){var It=U[J],nn=It>=1425&&It<=2303||It==64286;if(Ae=k[Fe],nn&&(Ae==y||Ae==F))return y}return J<1||(Ae=k[J-1])==g?D:te[J-1];case g:return l=!1,i=!0,o;case w:return s=!0,D;case L:case R:case I:case $:case A:l=!1;case H:return D}}function O(U){var k=U.charCodeAt(0),te=k>>8;return te==0?k>191?m:P[k]:te==5?/[\u0591-\u05f4]/.test(U)?y:m:te==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(U)?x:/[\u0660-\u0669\u066b-\u066c]/.test(U)?T:k==1642?S:/[\u06f0-\u06f9]/.test(U)?C:F:te==32&&k<=8287?q[k&255]:te==254&&k>=65136?F:D}function W(U){return U>="\u064B"&&U<="\u0655"}t.L=m,t.R=y,t.EN=C,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(U,k,te){if(U.length<2)return{};var J=U.split(""),ye=new Array(J.length),Ae=new Array(J.length),we=[];o=te?v:_,z(J,we,J.length,k);for(var ce=0;ce<ye.length;ye[ce]=ce,ce++);N(2,we,ye),N(1,we,ye);for(var ce=0;ce<ye.length-1;ce++)k[ce]===T?we[ce]=t.AN:we[ce]===y&&(k[ce]>F&&k[ce]<L||k[ce]===D||k[ce]===H)?we[ce]=t.ON_R:ce>0&&J[ce-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(J[ce])&&(we[ce-1]=we[ce]=t.R_H,ce++);J[J.length-1]===t.DOT&&(we[J.length-1]=t.B),J[0]==="\u202B"&&(we[0]=t.RLE);for(var ce=0;ce<ye.length;ce++)Ae[ce]=we[ye[ce]];return{logicalFromVisual:ye,bidiLevels:Ae}},t.hasBidiCharacters=function(U,k){for(var te=!1,J=0;J<U.length;J++)k[J]=O(U.charAt(J)),!te&&(k[J]==y||k[J]==F||k[J]==T)&&(te=!0);return te},t.getVisualFromLogicalIdx=function(U,k){for(var te=0;te<k.logicalFromVisual.length;te++)if(k.logicalFromVisual[te]==U)return te;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var a=e("./lib/bidiutil"),h=e("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,r=function(){function l(u){this.session=u,this.bidiMap={},this.currentRow=null,this.bidiUtil=a,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(u.getValue())}return l.prototype.isBidiRow=function(u,i,s){return this.seenBidi?(u!==this.currentRow&&(this.currentRow=u,this.updateRowLine(i,s),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},l.prototype.onChange=function(u){this.seenBidi?this.currentRow=null:u.action=="insert"&&o.test(u.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},l.prototype.getDocumentRow=function(){var u=0,i=this.session.$screenRowCache;if(i.length){var s=this.session.$getRowCacheIndex(i,this.currentRow);s>=0&&(u=this.session.$docRowCache[s])}return u},l.prototype.getSplitIndex=function(){var u=0,i=this.session.$screenRowCache;if(i.length)for(var s,f=this.session.$getRowCacheIndex(i,this.currentRow);this.currentRow-u>0&&(s=this.session.$getRowCacheIndex(i,this.currentRow-u-1),s===f);)f=s,u++;else u=this.currentRow;return u},l.prototype.updateRowLine=function(u,i){u===void 0&&(u=this.getDocumentRow());var s=u===this.session.getLength()-1,f=s?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(u),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var p=this.session.$wrapData[u];p&&(i===void 0&&(i=this.getSplitIndex()),i>0&&p.length?(this.wrapIndent=p.indent,this.wrapOffset=this.wrapIndent*this.charWidths[a.L],this.line=i<p.length?this.line.substring(p[i-1],p[i]):this.line.substring(p[p.length-1])):this.line=this.line.substring(0,p[i]),i==p.length&&(this.line+=this.showInvisibles?f:a.DOT))}else this.line+=this.showInvisibles?f:a.DOT;var d=this.session,c=0,_;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(v,m){return v==="	"||d.isFullWidth(v.charCodeAt(0))?(_=v==="	"?d.getScreenTabSize(m+c):2,c+=_-1,h.stringRepeat(a.DOT,_)):v}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==a.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},l.prototype.updateBidiMap=function(){var u=[];a.hasBidiCharacters(this.line,u)||this.isRtlDir?this.bidiMap=a.doBidiReorder(this.line,u,this.isRtlDir):this.bidiMap={}},l.prototype.markAsDirty=function(){this.currentRow=null},l.prototype.updateCharacterWidths=function(u){if(this.characterWidth!==u.$characterSize.width){this.fontMetrics=u;var i=this.characterWidth=u.$characterSize.width,s=u.$measureCharWidth("\u05D4");this.charWidths[a.L]=this.charWidths[a.EN]=this.charWidths[a.ON_R]=i,this.charWidths[a.R]=this.charWidths[a.AN]=s,this.charWidths[a.R_H]=s*.45,this.charWidths[a.B]=this.charWidths[a.RLE]=0,this.currentRow=null}},l.prototype.setShowInvisibles=function(u){this.showInvisibles=u,this.currentRow=null},l.prototype.setEolChar=function(u){this.EOL=u},l.prototype.setContentWidth=function(u){this.contentWidth=u},l.prototype.isRtlLine=function(u){return this.$isRtl?!0:u!=null?this.session.getLine(u).charAt(0)==this.RLE:this.isRtlDir},l.prototype.setRtlDirection=function(u,i){for(var s=u.getCursorPosition(),f=u.selection.getSelectionAnchor().row;f<=s.row;f++)!i&&u.session.getLine(f).charAt(0)===u.session.$bidiHandler.RLE?u.session.doc.removeInLine(f,0,1):i&&u.session.getLine(f).charAt(0)!==u.session.$bidiHandler.RLE&&u.session.doc.insert({column:0,row:f},u.session.$bidiHandler.RLE)},l.prototype.getPosLeft=function(u){u-=this.wrapIndent;var i=this.line.charAt(0)===this.RLE?1:0,s=u>i?this.session.getOverwrite()?u:u-1:i,f=a.getVisualFromLogicalIdx(s,this.bidiMap),p=this.bidiMap.bidiLevels,d=0;!this.session.getOverwrite()&&u<=i&&p[f]%2!==0&&f++;for(var c=0;c<f;c++)d+=this.charWidths[p[c]];return!this.session.getOverwrite()&&u>i&&p[f]%2===0&&(d+=this.charWidths[p[f]]),this.wrapIndent&&(d+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(d+=this.rtlLineOffset),d},l.prototype.getSelections=function(u,i){var s=this.bidiMap,f=s.bidiLevels,p,d=[],c=0,_=Math.min(u,i)-this.wrapIndent,v=Math.max(u,i)-this.wrapIndent,m=!1,y=!1,C=0;this.wrapIndent&&(c+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var T,D=0;D<f.length;D++)T=s.logicalFromVisual[D],p=f[D],m=T>=_&&T<v,m&&!y?C=c:!m&&y&&d.push({left:C,width:c-C}),c+=this.charWidths[p],y=m;if(m&&D===f.length&&d.push({left:C,width:c-C}),this.isRtlDir)for(var g=0;g<d.length;g++)d[g].left+=this.rtlLineOffset;return d},l.prototype.offsetToCol=function(s){this.isRtlDir&&(s-=this.rtlLineOffset);var i=0,s=Math.max(s,0),f=0,p=0,d=this.bidiMap.bidiLevels,c=this.charWidths[d[p]];for(this.wrapIndent&&(s-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);s>f+c/2;){if(f+=c,p===d.length-1){c=0;break}c=this.charWidths[d[++p]]}return p>0&&d[p-1]%2!==0&&d[p]%2===0?(s<f&&p--,i=this.bidiMap.logicalFromVisual[p]):p>0&&d[p-1]%2===0&&d[p]%2!==0?i=1+(s>f?this.bidiMap.logicalFromVisual[p]:this.bidiMap.logicalFromVisual[p-1]):this.isRtlDir&&p===d.length-1&&c===0&&d[p-1]%2===0||!this.isRtlDir&&p===0&&d[p]%2!==0?i=1+this.bidiMap.logicalFromVisual[p]:(p>0&&d[p-1]%2!==0&&c!==0&&p--,i=this.bidiMap.logicalFromVisual[p]),i===0&&this.isRtlDir&&i++,i+this.wrapIndent},l}();t.BidiHandler=r});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./lib/lang"),o=e("./lib/event_emitter").EventEmitter,r=e("./range").Range,l=function(){function u(i){this.session=i,this.doc=i.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var s=this;this.cursor.on("change",function(f){s.$cursorChanged=!0,s.$silent||s._emit("changeCursor"),!s.$isEmpty&&!s.$silent&&s._emit("changeSelection"),!s.$keepDesiredColumnOnChange&&f.old.column!=f.value.column&&(s.$desiredColumn=null)}),this.anchor.on("change",function(){s.$anchorChanged=!0,!s.$isEmpty&&!s.$silent&&s._emit("changeSelection")})}return u.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},u.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},u.prototype.getCursor=function(){return this.lead.getPosition()},u.prototype.setAnchor=function(i,s){this.$isEmpty=!1,this.anchor.setPosition(i,s)},u.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},u.prototype.getSelectionLead=function(){return this.lead.getPosition()},u.prototype.isBackwards=function(){var i=this.anchor,s=this.lead;return i.row>s.row||i.row==s.row&&i.column>s.column},u.prototype.getRange=function(){var i=this.anchor,s=this.lead;return this.$isEmpty?r.fromPoints(s,s):this.isBackwards()?r.fromPoints(s,i):r.fromPoints(i,s)},u.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},u.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},u.prototype.setRange=function(i,s){var f=s?i.end:i.start,p=s?i.start:i.end;this.$setSelection(f.row,f.column,p.row,p.column)},u.prototype.$setSelection=function(i,s,f,p){if(!this.$silent){var d=this.$isEmpty,c=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(i,s),this.cursor.setPosition(f,p),this.$isEmpty=!r.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||d!=this.$isEmpty||c)&&this._emit("changeSelection")}},u.prototype.$moveSelection=function(i){var s=this.lead;this.$isEmpty&&this.setSelectionAnchor(s.row,s.column),i.call(this)},u.prototype.selectTo=function(i,s){this.$moveSelection(function(){this.moveCursorTo(i,s)})},u.prototype.selectToPosition=function(i){this.$moveSelection(function(){this.moveCursorToPosition(i)})},u.prototype.moveTo=function(i,s){this.clearSelection(),this.moveCursorTo(i,s)},u.prototype.moveToPosition=function(i){this.clearSelection(),this.moveCursorToPosition(i)},u.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},u.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},u.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},u.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},u.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},u.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},u.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},u.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},u.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},u.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},u.prototype.getWordRange=function(i,s){if(typeof s>"u"){var f=i||this.lead;i=f.row,s=f.column}return this.session.getWordRange(i,s)},u.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},u.prototype.selectAWord=function(){var i=this.getCursor(),s=this.session.getAWordRange(i.row,i.column);this.setSelectionRange(s)},u.prototype.getLineRange=function(i,s){var f=typeof i=="number"?i:this.lead.row,p,d=this.session.getFoldLine(f);return d?(f=d.start.row,p=d.end.row):p=f,s===!0?new r(f,0,p,this.session.getLine(p).length):new r(f,0,p+1,0)},u.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},u.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},u.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},u.prototype.wouldMoveIntoSoftTab=function(i,s,f){var p=i.column,d=i.column+s;return f<0&&(p=i.column-s,d=i.column),this.session.isTabStop(i)&&this.doc.getLine(i.row).slice(p,d).split(" ").length-1==s},u.prototype.moveCursorLeft=function(){var i=this.lead.getPosition(),s;if(s=this.session.getFoldAt(i.row,i.column,-1))this.moveCursorTo(s.start.row,s.start.column);else if(i.column===0)i.row>0&&this.moveCursorTo(i.row-1,this.doc.getLine(i.row-1).length);else{var f=this.session.getTabSize();this.wouldMoveIntoSoftTab(i,f,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-f):this.moveCursorBy(0,-1)}},u.prototype.moveCursorRight=function(){var i=this.lead.getPosition(),s;if(s=this.session.getFoldAt(i.row,i.column,1))this.moveCursorTo(s.end.row,s.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var f=this.session.getTabSize(),i=this.lead;this.wouldMoveIntoSoftTab(i,f,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,f):this.moveCursorBy(0,1)}},u.prototype.moveCursorLineStart=function(){var i=this.lead.row,s=this.lead.column,f=this.session.documentToScreenRow(i,s),p=this.session.screenToDocumentPosition(f,0),d=this.session.getDisplayLine(i,null,p.row,p.column),c=d.match(/^\s*/);c[0].length!=s&&!this.session.$useEmacsStyleLineStart&&(p.column+=c[0].length),this.moveCursorToPosition(p)},u.prototype.moveCursorLineEnd=function(){var i=this.lead,s=this.session.getDocumentLastRowColumnPosition(i.row,i.column);if(this.lead.column==s.column){var f=this.session.getLine(s.row);if(s.column==f.length){var p=f.search(/\s+$/);p>0&&(s.column=p)}}this.moveCursorTo(s.row,s.column)},u.prototype.moveCursorFileEnd=function(){var i=this.doc.getLength()-1,s=this.doc.getLine(i).length;this.moveCursorTo(i,s)},u.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},u.prototype.moveCursorLongWordRight=function(){var i=this.lead.row,s=this.lead.column,f=this.doc.getLine(i),p=f.substring(s);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var d=this.session.getFoldAt(i,s,1);if(d){this.moveCursorTo(d.end.row,d.end.column);return}if(this.session.nonTokenRe.exec(p)&&(s+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,p=f.substring(s)),s>=f.length){this.moveCursorTo(i,f.length),this.moveCursorRight(),i<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(p)&&(s+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,s)},u.prototype.moveCursorLongWordLeft=function(){var i=this.lead.row,s=this.lead.column,f;if(f=this.session.getFoldAt(i,s,-1)){this.moveCursorTo(f.start.row,f.start.column);return}var p=this.session.getFoldStringAt(i,s,-1);p==null&&(p=this.doc.getLine(i).substring(0,s));var d=h.stringReverse(p);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(d)&&(s-=this.session.nonTokenRe.lastIndex,d=d.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),s<=0){this.moveCursorTo(i,0),this.moveCursorLeft(),i>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(d)&&(s-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,s)},u.prototype.$shortWordEndIndex=function(i){var s=0,f,p=/\s/,d=this.session.tokenRe;if(d.lastIndex=0,this.session.tokenRe.exec(i))s=this.session.tokenRe.lastIndex;else{for(;(f=i[s])&&p.test(f);)s++;if(s<1){for(d.lastIndex=0;(f=i[s])&&!d.test(f);)if(d.lastIndex=0,s++,p.test(f))if(s>2){s--;break}else{for(;(f=i[s])&&p.test(f);)s++;if(s>2)break}}}return d.lastIndex=0,s},u.prototype.moveCursorShortWordRight=function(){var i=this.lead.row,s=this.lead.column,f=this.doc.getLine(i),p=f.substring(s),d=this.session.getFoldAt(i,s,1);if(d)return this.moveCursorTo(d.end.row,d.end.column);if(s==f.length){var c=this.doc.getLength();do i++,p=this.doc.getLine(i);while(i<c&&/^\s*$/.test(p));/^\s+/.test(p)||(p=""),s=0}var _=this.$shortWordEndIndex(p);this.moveCursorTo(i,s+_)},u.prototype.moveCursorShortWordLeft=function(){var i=this.lead.row,s=this.lead.column,f;if(f=this.session.getFoldAt(i,s,-1))return this.moveCursorTo(f.start.row,f.start.column);var p=this.session.getLine(i).substring(0,s);if(s===0){do i--,p=this.doc.getLine(i);while(i>0&&/^\s*$/.test(p));s=p.length,/\s+$/.test(p)||(p="")}var d=h.stringReverse(p),c=this.$shortWordEndIndex(d);return this.moveCursorTo(i,s-c)},u.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},u.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},u.prototype.moveCursorBy=function(i,s){var f=this.session.documentToScreenPosition(this.lead.row,this.lead.column),p;if(s===0&&(i!==0&&(this.session.$bidiHandler.isBidiRow(f.row,this.lead.row)?(p=this.session.$bidiHandler.getPosLeft(f.column),f.column=Math.round(p/this.session.$bidiHandler.charWidths[0])):p=f.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?f.column=this.$desiredColumn:this.$desiredColumn=f.column),i!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var d=this.session.lineWidgets[this.lead.row];i<0?i-=d.rowsAbove||0:i>0&&(i+=d.rowCount-(d.rowsAbove||0))}var c=this.session.screenToDocumentPosition(f.row+i,f.column,p);i!==0&&s===0&&c.row===this.lead.row&&(c.column,this.lead.column),this.moveCursorTo(c.row,c.column+s,s===0)},u.prototype.moveCursorToPosition=function(i){this.moveCursorTo(i.row,i.column)},u.prototype.moveCursorTo=function(i,s,f){var p=this.session.getFoldAt(i,s,1);p&&(i=p.start.row,s=p.start.column),this.$keepDesiredColumnOnChange=!0;var d=this.session.getLine(i);/[\uDC00-\uDFFF]/.test(d.charAt(s))&&d.charAt(s-1)&&(this.lead.row==i&&this.lead.column==s+1?s=s-1:s=s+1),this.lead.setPosition(i,s),this.$keepDesiredColumnOnChange=!1,f||(this.$desiredColumn=null)},u.prototype.moveCursorToScreen=function(i,s,f){var p=this.session.screenToDocumentPosition(i,s);this.moveCursorTo(p.row,p.column,f)},u.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},u.prototype.fromOrientedRange=function(i){this.setSelectionRange(i,i.cursor==i.start),this.$desiredColumn=i.desiredColumn||this.$desiredColumn},u.prototype.toOrientedRange=function(i){var s=this.getRange();return i?(i.start.column=s.start.column,i.start.row=s.start.row,i.end.column=s.end.column,i.end.row=s.end.row):i=s,i.cursor=this.isBackwards()?i.start:i.end,i.desiredColumn=this.$desiredColumn,i},u.prototype.getRangeOfMovements=function(i){var s=this.getCursor();try{i(this);var f=this.getCursor();return r.fromPoints(s,f)}catch{return r.fromPoints(s,s)}finally{this.moveCursorToPosition(s)}},u.prototype.toJSON=function(){if(this.rangeCount)var i=this.ranges.map(function(s){var f=s.clone();return f.isBackwards=s.cursor==s.start,f});else{var i=this.getRange();i.isBackwards=this.isBackwards()}return i},u.prototype.fromJSON=function(i){if(i.start==null)if(this.rangeList&&i.length>1){this.toSingleRange(i[0]);for(var s=i.length;s--;){var f=r.fromPoints(i[s].start,i[s].end);i[s].isBackwards&&(f.cursor=f.start),this.addRange(f,!0)}return}else i=i[0];this.rangeList&&this.toSingleRange(i),this.setSelectionRange(i,i.isBackwards)},u.prototype.isEqual=function(i){if((i.length||this.rangeCount)&&i.length!=this.rangeCount)return!1;if(!i.length||!this.ranges)return this.getRange().isEqual(i);for(var s=this.ranges.length;s--;)if(!this.ranges[s].isEqual(i[s]))return!1;return!0},u}();l.prototype.setSelectionAnchor=l.prototype.setAnchor,l.prototype.getSelectionAnchor=l.prototype.getAnchor,l.prototype.setSelectionRange=l.prototype.setRange,a.implement(l.prototype,o),t.Selection=l});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,n){"use strict";var a=e("./lib/report_error").reportError,h=2e3,o=function(){function r(l){this.splitRegex,this.states=l,this.regExps={},this.matchMappings={};for(var u in this.states){for(var i=this.states[u],s=[],f=0,p=this.matchMappings[u]={defaultToken:"text"},d="g",c=[],_=0;_<i.length;_++){var v=i[_];if(v.defaultToken&&(p.defaultToken=v.defaultToken),v.caseInsensitive&&d.indexOf("i")===-1&&(d+="i"),v.unicode&&d.indexOf("u")===-1&&(d+="u"),v.regex!=null){v.regex instanceof RegExp&&(v.regex=v.regex.toString().slice(1,-1));var m=v.regex,y=new RegExp("(?:("+m+")|(.))").exec("a").length-2;Array.isArray(v.token)?v.token.length==1||y==1?v.token=v.token[0]:y-1!=v.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:v,groupCount:y-1}),v.token=v.token[0]):(v.tokenArray=v.token,v.token=null,v.onMatch=this.$arrayTokens):typeof v.token=="function"&&!v.onMatch&&(y>1?v.onMatch=this.$applyToken:v.onMatch=v.token),y>1&&(/\\\d/.test(v.regex)?m=v.regex.replace(/\\([0-9]+)/g,function(C,T){return"\\"+(parseInt(T,10)+f+1)}):(y=1,m=this.removeCapturingGroups(v.regex)),!v.splitRegex&&typeof v.token!="string"&&c.push(v)),p[f]=_,f+=y,s.push(m),v.onMatch||(v.onMatch=null)}}s.length||(p[0]=0,s.push("$")),c.forEach(function(C){C.splitRegex=this.createSplitterRegexp(C.regex,d)},this),this.regExps[u]=new RegExp("("+s.join(")|(")+")|($)",d)}}return r.prototype.$setMaxTokenCount=function(l){h=l|0},r.prototype.$applyToken=function(l){var u=this.splitRegex.exec(l).slice(1),i=this.token.apply(this,u);if(typeof i=="string")return[{type:i,value:l}];for(var s=[],f=0,p=i.length;f<p;f++)u[f]&&(s[s.length]={type:i[f],value:u[f]});return s},r.prototype.$arrayTokens=function(l){if(!l)return[];var u=this.splitRegex.exec(l);if(!u)return"text";for(var i=[],s=this.tokenArray,f=0,p=s.length;f<p;f++)u[f+1]&&(i[i.length]={type:s[f],value:u[f+1]});return i},r.prototype.removeCapturingGroups=function(l){var u=l.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(i,s){return s?"(?:":i});return u},r.prototype.createSplitterRegexp=function(l,u){if(l.indexOf("(?=")!=-1){var i=0,s=!1,f={};l.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(p,d,c,_,v,m){return s?s=v!="]":v?s=!0:_?(i==f.stack&&(f.end=m+1,f.stack=-1),i--):c&&(i++,c.length!=1&&(f.stack=i,f.start=m)),p}),f.end!=null&&/^\)*$/.test(l.substr(f.end))&&(l=l.substring(0,f.start)+l.substr(f.end))}return l.charAt(0)!="^"&&(l="^"+l),l.charAt(l.length-1)!="$"&&(l+="$"),new RegExp(l,(u||"").replace("g",""))},r.prototype.getLineTokens=function(l,u){if(u&&typeof u!="string"){var i=u.slice(0);u=i[0],u==="#tmp"&&(i.shift(),u=i.shift())}else var i=[];var s=u||"start",f=this.states[s];f||(s="start",f=this.states[s]);var p=this.matchMappings[s],d=this.regExps[s];d.lastIndex=0;for(var c,_=[],v=0,m=0,y={type:null,value:""};c=d.exec(l);){var C=p.defaultToken,T=null,D=c[0],g=d.lastIndex;if(g-D.length>v){var w=l.substring(v,g-D.length);y.type==C?y.value+=w:(y.type&&_.push(y),y={type:C,value:w})}for(var F=0;F<c.length-2;F++)if(c[F+1]!==void 0){T=f[p[F]],T.onMatch?C=T.onMatch(D,s,i,l):C=T.token,T.next&&(typeof T.next=="string"?s=T.next:s=T.next(s,i),f=this.states[s],f||(this.reportError("state doesn't exist",s),s="start",f=this.states[s]),p=this.matchMappings[s],v=g,d=this.regExps[s],d.lastIndex=g),T.consumeLineEnd&&(v=g);break}if(D){if(typeof C=="string")(!T||T.merge!==!1)&&y.type===C?y.value+=D:(y.type&&_.push(y),y={type:C,value:D});else if(C){y.type&&_.push(y),y={type:null,value:""};for(var F=0;F<C.length;F++)_.push(C[F])}}if(v==l.length)break;if(v=g,m++>h){for(m>2*l.length&&this.reportError("infinite loop with in ace tokenizer",{startState:u,line:l});v<l.length;)y.type&&_.push(y),y={value:l.substring(v,v+=500),type:"overflow"};s="start",i=[];break}}return y.type&&_.push(y),i.length>1&&i[0]!==s&&i.unshift("#tmp",s),{tokens:_,state:i.length?i:s}},r}();o.prototype.reportError=a,t.Tokenizer=o});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";var a=e("../lib/deep_copy").deepCopy,h;h=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(l,u){if(!u){for(var i in l)this.$rules[i]=l[i];return}for(var i in l){for(var s=l[i],f=0;f<s.length;f++){var p=s[f];(p.next||p.onMatch)&&(typeof p.next=="string"&&p.next.indexOf(u)!==0&&(p.next=u+p.next),p.nextState&&p.nextState.indexOf(u)!==0&&(p.nextState=u+p.nextState))}this.$rules[u+i]=s}},this.getRules=function(){return this.$rules},this.embedRules=function(l,u,i,s,f){var p=typeof l=="function"?new l().getRules():l;if(s)for(var d=0;d<s.length;d++)s[d]=u+s[d];else{s=[];for(var c in p)s.push(u+c)}if(this.addRules(p,u),i)for(var _=Array.prototype[f?"push":"unshift"],d=0;d<s.length;d++)_.apply(this.$rules[s[d]],a(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(u)},this.getEmbeds=function(){return this.$embeds};var o=function(l,u){return(l!="start"||u.length)&&u.unshift(this.nextState,l),this.nextState},r=function(l,u){return u.shift(),u.shift()||"start"};this.normalizeRules=function(){var l=0,u=this.$rules;function i(s){var f=u[s];f.processed=!0;for(var p=0;p<f.length;p++){var d=f[p],c=null;Array.isArray(d)&&(c=d,d={}),!d.regex&&d.start&&(d.regex=d.start,d.next||(d.next=[]),d.next.push({defaultToken:d.token},{token:d.token+".end",regex:d.end||d.start,next:"pop"}),d.token=d.token+".start",d.push=!0);var _=d.next||d.push;if(_&&Array.isArray(_)){var v=d.stateName;v||(v=d.token,typeof v!="string"&&(v=v[0]||""),u[v]&&(v+=l++)),u[v]=_,d.next=v,i(v)}else _=="pop"&&(d.next=r);if(d.push&&(d.nextState=d.next||d.push,d.next=o,delete d.push),d.rules)for(var m in d.rules)u[m]?u[m].push&&u[m].push.apply(u[m],d.rules[m]):u[m]=d.rules[m];var y=typeof d=="string"?d:d.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?c=y.map(function(T){return u[T]}):c=u[y]),c){var C=[p,1].concat(c);d.noEscape&&(C=C.filter(function(T){return!T.next})),f.splice.apply(f,C),p--}d.keywordMap&&(d.token=this.createKeywordMapper(d.keywordMap,d.defaultToken||"text",d.caseInsensitive),delete d.defaultToken)}}Object.keys(u).forEach(i,this)},this.createKeywordMapper=function(l,u,i,s){var f=Object.create(null);return this.$keywordList=[],Object.keys(l).forEach(function(p){for(var d=l[p],c=d.split(s||"|"),_=c.length;_--;){var v=c[_];this.$keywordList.push(v),i&&(v=v.toLowerCase()),f[v]=p}},this),l=null,i?function(p){return f[p.toLowerCase()]||u}:function(p){return f[p]||u}},this.getKeywords=function(){return this.$keywords}}.call(h.prototype),t.TextHighlightRules=h});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var a;a=function(){this.$behaviours={}},function(){this.add=function(h,o,r){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[h]:this.$behaviours[h]={}}this.$behaviours[h][o]=r},this.addBehaviours=function(h){for(var o in h)for(var r in h[o])this.add(o,r,h[o][r])},this.remove=function(h){this.$behaviours&&this.$behaviours[h]&&delete this.$behaviours[h]},this.inherit=function(h,o){if(typeof h=="function")var r=new h().getBehaviours(o);else var r=h.getBehaviours(o);this.addBehaviours(r)},this.getBehaviours=function(h){if(h){for(var o={},r=0;r<h.length;r++)this.$behaviours[h[r]]&&(o[h[r]]=this.$behaviours[h[r]]);return o}else return this.$behaviours}}.call(a.prototype),t.Behaviour=a});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("./range").Range,h=function(){function o(r,l,u){this.$session=r,this.$row=l,this.$rowTokens=r.getTokens(l);var i=r.getTokenAt(l,u);this.$tokenIndex=i?i.index:-1}return o.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},o.prototype.stepForward=function(){this.$tokenIndex+=1;for(var r;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,r||(r=this.$session.getLength()),this.$row>=r)return this.$row=r-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},o.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},o.prototype.getCurrentTokenRow=function(){return this.$row},o.prototype.getCurrentTokenColumn=function(){var r=this.$rowTokens,l=this.$tokenIndex,u=r[l].start;if(u!==void 0)return u;for(u=0;l>0;)l-=1,u+=r[l].value.length;return u},o.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},o.prototype.getCurrentTokenRange=function(){var r=this.$rowTokens[this.$tokenIndex],l=this.getCurrentTokenColumn();return new a(this.$row,l,this.$row,l+r.value.length)},o}();t.TokenIterator=h});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var a=e("../../lib/oop"),h=e("../behaviour").Behaviour,o=e("../../token_iterator").TokenIterator,r=e("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],u=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],i,s={},f={'"':'"',"'":"'"},p=function(_){var v=-1;if(_.multiSelect&&(v=_.selection.index,s.rangeCount!=_.multiSelect.rangeCount&&(s={rangeCount:_.multiSelect.rangeCount})),s[v])return i=s[v];i=s[v]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},d=function(_,v,m,y){var C=_.end.row-_.start.row;return{text:m+v+y,selection:[0,_.start.column+1,C,_.end.column+(C?0:1)]}},c;c=function(_){_=_||{},this.add("braces","insertion",function(v,m,y,C,T){var D=y.getCursorPosition(),g=C.doc.getLine(D.row);if(T=="{"){p(y);var w=y.getSelectionRange(),F=C.doc.getTextRange(w);if(F!==""&&F!=="{"&&y.getWrapBehavioursEnabled())return d(w,F,"{","}");if(c.isSaneInsertion(y,C))return/[\]\}\)]/.test(g[D.column])||y.inMultiSelectMode||_.braces?(c.recordAutoInsert(y,C,"}"),{text:"{}",selection:[1,1]}):(c.recordMaybeInsert(y,C,"{"),{text:"{",selection:[1,1]})}else if(T=="}"){p(y);var b=g.substring(D.column,D.column+1);if(b=="}"){var E=C.$findOpeningBracket("}",{column:D.column+1,row:D.row});if(E!==null&&c.isAutoInsertedClosing(D,g,T))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(T==`
`||T==`\r
`){p(y);var M="";c.isMaybeInsertedClosing(D,g)&&(M=r.stringRepeat("}",i.maybeInsertedBrackets),c.clearMaybeInsertedClosing());var b=g.substring(D.column,D.column+1);if(b==="}"){var S=C.findMatchingBracket({row:D.row,column:D.column+1},"}");if(!S)return null;var x=this.$getIndent(C.getLine(S.row))}else if(M)var x=this.$getIndent(g);else{c.clearMaybeInsertedClosing();return}var L=x+C.getTabString();return{text:`
`+L+`
`+x+M,selection:[1,L.length,1,L.length]}}else c.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(v,m,y,C,T){var D=C.doc.getTextRange(T);if(!T.isMultiLine()&&D=="{"){p(y);var g=C.doc.getLine(T.start.row),w=g.substring(T.end.column,T.end.column+1);if(w=="}")return T.end.column++,T;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(v,m,y,C,T){if(T=="("){p(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return d(D,g,"(",")");if(c.isSaneInsertion(y,C))return c.recordAutoInsert(y,C,")"),{text:"()",selection:[1,1]}}else if(T==")"){p(y);var w=y.getCursorPosition(),F=C.doc.getLine(w.row),b=F.substring(w.column,w.column+1);if(b==")"){var E=C.$findOpeningBracket(")",{column:w.column+1,row:w.row});if(E!==null&&c.isAutoInsertedClosing(w,F,T))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(v,m,y,C,T){var D=C.doc.getTextRange(T);if(!T.isMultiLine()&&D=="("){p(y);var g=C.doc.getLine(T.start.row),w=g.substring(T.start.column+1,T.start.column+2);if(w==")")return T.end.column++,T}}),this.add("brackets","insertion",function(v,m,y,C,T){if(T=="["){p(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return d(D,g,"[","]");if(c.isSaneInsertion(y,C))return c.recordAutoInsert(y,C,"]"),{text:"[]",selection:[1,1]}}else if(T=="]"){p(y);var w=y.getCursorPosition(),F=C.doc.getLine(w.row),b=F.substring(w.column,w.column+1);if(b=="]"){var E=C.$findOpeningBracket("]",{column:w.column+1,row:w.row});if(E!==null&&c.isAutoInsertedClosing(w,F,T))return c.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(v,m,y,C,T){var D=C.doc.getTextRange(T);if(!T.isMultiLine()&&D=="["){p(y);var g=C.doc.getLine(T.start.row),w=g.substring(T.start.column+1,T.start.column+2);if(w=="]")return T.end.column++,T}}),this.add("string_dquotes","insertion",function(v,m,y,C,T){var D=C.$mode.$quotes||f;if(T.length==1&&D[T]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(T)!=-1)return;p(y);var g=T,w=y.getSelectionRange(),F=C.doc.getTextRange(w);if(F!==""&&(F.length!=1||!D[F])&&y.getWrapBehavioursEnabled())return d(w,F,g,g);if(!F){var b=y.getCursorPosition(),E=C.doc.getLine(b.row),M=E.substring(b.column-1,b.column),S=E.substring(b.column,b.column+1),x=C.getTokenAt(b.row,b.column),L=C.getTokenAt(b.row,b.column+1);if(M=="\\"&&x&&/escape/.test(x.type))return null;var R=x&&/string|escape/.test(x.type),A=!L||/string|escape/.test(L.type),I;if(S==g)I=R!==A,I&&/string\.end/.test(L.type)&&(I=!1);else{if(R&&!A||R&&A)return null;var $=C.$mode.tokenRe;$.lastIndex=0;var H=$.test(M);$.lastIndex=0;var P=$.test(S),q=C.$mode.$pairQuotesAfter,z=q&&q[g]&&q[g].test(M);if(!z&&H||P||S&&!/[\s;,.})\]\\]/.test(S))return null;var N=E[b.column-2];if(M==g&&(N==g||$.test(N)))return null;I=!0}return{text:I?g+g:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(v,m,y,C,T){var D=C.$mode.$quotes||f,g=C.doc.getTextRange(T);if(!T.isMultiLine()&&D.hasOwnProperty(g)){p(y);var w=C.doc.getLine(T.start.row),F=w.substring(T.start.column+1,T.start.column+2);if(F==g)return T.end.column++,T}}),_.closeDocComment!==!1&&this.add("doc comment end","insertion",function(v,m,y,C,T){if(v==="doc-start"&&(T===`
`||T===`\r
`)&&y.selection.isEmpty()){var D=y.getCursorPosition(),g=C.doc.getLine(D.row),w=C.doc.getLine(D.row+1),F=this.$getIndent(g);if(/\s*\*/.test(w))return/^\s*\*/.test(g)?{text:T+F+"* ",selection:[1,3+F.length,1,3+F.length]}:{text:T+F+" * ",selection:[1,3+F.length,1,3+F.length]};if(/\/\*\*/.test(g.substring(0,D.column)))return{text:T+F+" * "+T+" "+F+"*/",selection:[1,4+F.length,1,4+F.length]}}})},c.isSaneInsertion=function(_,v){var m=_.getCursorPosition(),y=new o(v,m.row,m.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",l)){if(/[)}\]]/.test(_.session.getLine(m.row)[m.column]))return!0;var C=new o(v,m.row,m.column+1);if(!this.$matchTokenType(C.getCurrentToken()||"text",l))return!1}return y.stepForward(),y.getCurrentTokenRow()!==m.row||this.$matchTokenType(y.getCurrentToken()||"text",u)},c.$matchTokenType=function(_,v){return v.indexOf(_.type||_)>-1},c.recordAutoInsert=function(_,v,m){var y=_.getCursorPosition(),C=v.doc.getLine(y.row);this.isAutoInsertedClosing(y,C,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=y.row,i.autoInsertedLineEnd=m+C.substr(y.column),i.autoInsertedBrackets++},c.recordMaybeInsert=function(_,v,m){var y=_.getCursorPosition(),C=v.doc.getLine(y.row);this.isMaybeInsertedClosing(y,C)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=y.row,i.maybeInsertedLineStart=C.substr(0,y.column)+m,i.maybeInsertedLineEnd=C.substr(y.column),i.maybeInsertedBrackets++},c.isAutoInsertedClosing=function(_,v,m){return i.autoInsertedBrackets>0&&_.row===i.autoInsertedRow&&m===i.autoInsertedLineEnd[0]&&v.substr(_.column)===i.autoInsertedLineEnd},c.isMaybeInsertedClosing=function(_,v){return i.maybeInsertedBrackets>0&&_.row===i.maybeInsertedRow&&v.substr(_.column)===i.maybeInsertedLineEnd&&v.substr(0,_.column)==i.maybeInsertedLineStart},c.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},c.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},a.inherits(c,h),t.CstyleBehaviour=c});ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var a=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],h=0,o=[],r=0;r<a.length;r+=2)o.push(h+=a[r]),a[r+1]&&o.push(45,h+=a[r+1]);t.wordChars=String.fromCharCode.apply(null,o)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var a=e("../config"),h=e("../tokenizer").Tokenizer,o=e("./text_highlight_rules").TextHighlightRules,r=e("./behaviour/cstyle").CstyleBehaviour,l=e("../unicode"),u=e("../lib/lang"),i=e("../token_iterator").TokenIterator,s=e("../range").Range,f;f=function(){this.HighlightRules=o},function(){this.$defaultBehaviour=new r,this.tokenRe=new RegExp("^["+l.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+l.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new h(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(p,d,c,_){var v=d.doc,m=!0,y=!0,C=1/0,T=d.getTabSize(),D=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var F=this.lineCommentStart.map(u.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var F=u.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;F=new RegExp("^(\\s*)(?:"+F+") ?"),D=d.getUseSoftTabs();var M=function(P,q){var z=P.match(F);if(z){var N=z[1].length,Q=z[0].length;!L(P,N,Q)&&z[0][Q-1]==" "&&Q--,v.removeInLine(q,N,Q)}},x=g+" ",E=function(P,q){(!m||/\S/.test(P))&&(L(P,C,C)?v.insertInLine({row:q,column:C},x):v.insertInLine({row:q,column:C},g))},S=function(P,q){return F.test(P)},L=function(P,q,z){for(var N=0;q--&&P.charAt(q)==" ";)N++;if(N%T!=0)return!1;for(var N=0;P.charAt(z++)==" ";)N++;return T>2?N%T!=T-1:N%T==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,w=this.blockComment.end,F=new RegExp("^(\\s*)(?:"+u.escapeRegExp(g)+")"),b=new RegExp("(?:"+u.escapeRegExp(w)+")\\s*$"),E=function(I,$){S(I,$)||(!m||/\S/.test(I))&&(v.insertInLine({row:$,column:I.length},w),v.insertInLine({row:$,column:C},g))},M=function(I,$){var H;(H=I.match(b))&&v.removeInLine($,I.length-H[0].length,I.length),(H=I.match(F))&&v.removeInLine($,H[1].length,H[0].length)},S=function(I,$){if(F.test(I))return!0;for(var H=d.getTokens($),P=0;P<H.length;P++)if(H[P].type==="comment")return!0}}function R(I){for(var $=c;$<=_;$++)I(v.getLine($),$)}var A=1/0;R(function(I,$){var H=I.search(/\S/);H!==-1?(H<C&&(C=H),y&&!S(I,$)&&(y=!1)):A>I.length&&(A=I.length)}),C==1/0&&(C=A,m=!1,y=!1),D&&C%T!=0&&(C=Math.floor(C/T)*T),R(y?M:E)},this.toggleBlockComment=function(p,d,c,_){var v=this.blockComment;if(v){!v.start&&v[0]&&(v=v[0]);var m=new i(d,_.row,_.column),y=m.getCurrentToken(),C=d.selection,T=d.selection.toOrientedRange(),D,g;if(y&&/comment/.test(y.type)){for(var w,F;y&&/comment/.test(y.type);){var b=y.value.indexOf(v.start);if(b!=-1){var E=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+b;w=new s(E,M,E,M+v.start.length);break}y=m.stepBackward()}for(var m=new i(d,_.row,_.column),y=m.getCurrentToken();y&&/comment/.test(y.type);){var b=y.value.indexOf(v.end);if(b!=-1){var E=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+b;F=new s(E,M,E,M+v.end.length);break}y=m.stepForward()}F&&d.remove(F),w&&(d.remove(w),D=w.start.row,g=-v.start.length)}else g=v.start.length,D=c.start.row,d.insert(c.end,v.end),d.insert(c.start,v.start);T.start.row==D&&(T.start.column+=g),T.end.row==D&&(T.end.column+=g),d.selection.fromOrientedRange(T)}},this.getNextLineIndent=function(p,d,c){return this.$getIndent(d)},this.checkOutdent=function(p,d,c){return!1},this.autoOutdent=function(p,d,c){},this.$getIndent=function(p){return p.match(/^\s*/)[0]},this.createWorker=function(p){return null},this.createModeDelegates=function(p){this.$embeds=[],this.$modes={};for(var d in p)if(p[d]){var c=p[d],_=c.prototype.$id,v=a.$modes[_];v||(a.$modes[_]=v=new c),a.$modes[d]||(a.$modes[d]=v),this.$embeds.push(d),this.$modes[d]=v}for(var m=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(T){(function(D){var g=m[T],w=D[g];D[m[T]]=function(){return this.$delegator(g,arguments,w)}})(C)},C=this,d=0;d<m.length;d++)y(d)},this.$delegator=function(p,d,c){var _=d[0]||"start";if(typeof _!="string"){if(Array.isArray(_[2])){var v=_[2][_[2].length-1],m=this.$modes[v];if(m)return m[p].apply(m,[_[1]].concat([].slice.call(d,1)))}_=_[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var C=_.split(this.$embeds[y]);if(!C[0]&&C[1]){d[0]=C[1];var m=this.$modes[this.$embeds[y]];return m[p].apply(m,d)}}var T=c.apply(this,d);return c?T:void 0},this.transformAction=function(p,d,c,_,v){if(this.$behaviour){var m=this.$behaviour.getBehaviours();for(var y in m)if(m[y][d]){var C=m[y][d].apply(this,arguments);if(C)return C}}},this.getKeywords=function(p){if(!this.completionKeywords){var d=this.$tokenizer.rules,c=[];for(var _ in d)for(var v=d[_],m=0,y=v.length;m<y;m++)if(typeof v[m].token=="string")/keyword|support|storage/.test(v[m].token)&&c.push(v[m].regex);else if(typeof v[m].token=="object"){for(var C=0,T=v[m].token.length;C<T;C++)if(/keyword|support|storage/.test(v[m].token[C])){var _=v[m].regex.match(/\(.+?\)/g)[C];c.push(_.substr(1,_.length-2))}}this.completionKeywords=c}return p?c.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(p,d,c,_){var v=this.$keywordList||this.$createKeywordList();return v.map(function(m){return{name:m,value:m,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(f.prototype),t.Mode=f});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function a(r,l){throw console.log("Invalid Delta:",r),"Invalid Delta: "+l}function h(r,l){return l.row>=0&&l.row<r.length&&l.column>=0&&l.column<=r[l.row].length}function o(r,l){l.action!="insert"&&l.action!="remove"&&a(l,"delta.action must be 'insert' or 'remove'"),l.lines instanceof Array||a(l,"delta.lines must be an Array"),(!l.start||!l.end)&&a(l,"delta.start/end must be an present");var u=l.start;h(r,l.start)||a(l,"delta.start must be contained in document");var i=l.end;l.action=="remove"&&!h(r,i)&&a(l,"delta.end must contained in document for 'remove' actions");var s=i.row-u.row,f=i.column-(s==0?u.column:0);(s!=l.lines.length-1||l.lines[s].length!=f)&&a(l,"delta.range must match delta lines")}t.applyDelta=function(r,l,u){var i=l.start.row,s=l.start.column,f=r[i]||"";switch(l.action){case"insert":var p=l.lines;if(p.length===1)r[i]=f.substring(0,s)+l.lines[0]+f.substring(s);else{var d=[i,1].concat(l.lines);r.splice.apply(r,d),r[i]=f.substring(0,s)+r[i],r[i+l.lines.length-1]+=f.substring(s)}break;case"remove":var c=l.end.column,_=l.end.row;i===_?r[i]=f.substring(0,s)+f.substring(c):r.splice(i,_-i+1,f.substring(0,s)+r[_].substring(c));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./lib/event_emitter").EventEmitter,o=function(){function u(i,s,f){this.$onChange=this.onChange.bind(this),this.attach(i),typeof s!="number"?this.setPosition(s.row,s.column):this.setPosition(s,f)}return u.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},u.prototype.getDocument=function(){return this.document},u.prototype.onChange=function(i){if(!(i.start.row==i.end.row&&i.start.row!=this.row)&&!(i.start.row>this.row)){var s=l(i,{row:this.row,column:this.column},this.$insertRight);this.setPosition(s.row,s.column,!0)}},u.prototype.setPosition=function(i,s,f){var p;if(f?p={row:i,column:s}:p=this.$clipPositionToDocument(i,s),!(this.row==p.row&&this.column==p.column)){var d={row:this.row,column:this.column};this.row=p.row,this.column=p.column,this._signal("change",{old:d,value:p})}},u.prototype.detach=function(){this.document.off("change",this.$onChange)},u.prototype.attach=function(i){this.document=i||this.document,this.document.on("change",this.$onChange)},u.prototype.$clipPositionToDocument=function(i,s){var f={};return i>=this.document.getLength()?(f.row=Math.max(0,this.document.getLength()-1),f.column=this.document.getLine(f.row).length):i<0?(f.row=0,f.column=0):(f.row=i,f.column=Math.min(this.document.getLine(f.row).length,Math.max(0,s))),s<0&&(f.column=0),f},u}();o.prototype.$insertRight=!1,a.implement(o.prototype,h);function r(u,i,s){var f=s?u.column<=i.column:u.column<i.column;return u.row<i.row||u.row==i.row&&f}function l(u,i,s){var f=u.action=="insert",p=(f?1:-1)*(u.end.row-u.start.row),d=(f?1:-1)*(u.end.column-u.start.column),c=u.start,_=f?c:u.end;return r(i,c,s)?{row:i.row,column:i.column}:r(_,i,!s)?{row:i.row+p,column:i.column+(i.row==_.row?d:0)}:{row:c.row,column:c.column}}t.Anchor=o});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./apply_delta").applyDelta,o=e("./lib/event_emitter").EventEmitter,r=e("./range").Range,l=e("./anchor").Anchor,u=function(){function i(s){this.$lines=[""],s.length===0?this.$lines=[""]:Array.isArray(s)?this.insertMergedLines({row:0,column:0},s):this.insert({row:0,column:0},s)}return i.prototype.setValue=function(s){var f=this.getLength()-1;this.remove(new r(0,0,f,this.getLine(f).length)),this.insert({row:0,column:0},s||"")},i.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},i.prototype.createAnchor=function(s,f){return new l(this,s,f)},i.prototype.$detectNewLine=function(s){var f=s.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=f?f[1]:`
`,this._signal("changeNewLineMode")},i.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},i.prototype.setNewLineMode=function(s){this.$newLineMode!==s&&(this.$newLineMode=s,this._signal("changeNewLineMode"))},i.prototype.getNewLineMode=function(){return this.$newLineMode},i.prototype.isNewLine=function(s){return s==`\r
`||s=="\r"||s==`
`},i.prototype.getLine=function(s){return this.$lines[s]||""},i.prototype.getLines=function(s,f){return this.$lines.slice(s,f+1)},i.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},i.prototype.getLength=function(){return this.$lines.length},i.prototype.getTextRange=function(s){return this.getLinesForRange(s).join(this.getNewLineCharacter())},i.prototype.getLinesForRange=function(s){var f;if(s.start.row===s.end.row)f=[this.getLine(s.start.row).substring(s.start.column,s.end.column)];else{f=this.getLines(s.start.row,s.end.row),f[0]=(f[0]||"").substring(s.start.column);var p=f.length-1;s.end.row-s.start.row==p&&(f[p]=f[p].substring(0,s.end.column))}return f},i.prototype.insertLines=function(s,f){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(s,f)},i.prototype.removeLines=function(s,f){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(s,f)},i.prototype.insertNewLine=function(s){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(s,["",""])},i.prototype.insert=function(s,f){return this.getLength()<=1&&this.$detectNewLine(f),this.insertMergedLines(s,this.$split(f))},i.prototype.insertInLine=function(s,f){var p=this.clippedPos(s.row,s.column),d=this.pos(s.row,s.column+f.length);return this.applyDelta({start:p,end:d,action:"insert",lines:[f]},!0),this.clonePos(d)},i.prototype.clippedPos=function(s,f){var p=this.getLength();s===void 0?s=p:s<0?s=0:s>=p&&(s=p-1,f=void 0);var d=this.getLine(s);return f==null&&(f=d.length),f=Math.min(Math.max(f,0),d.length),{row:s,column:f}},i.prototype.clonePos=function(s){return{row:s.row,column:s.column}},i.prototype.pos=function(s,f){return{row:s,column:f}},i.prototype.$clipPosition=function(s){var f=this.getLength();return s.row>=f?(s.row=Math.max(0,f-1),s.column=this.getLine(f-1).length):(s.row=Math.max(0,s.row),s.column=Math.min(Math.max(s.column,0),this.getLine(s.row).length)),s},i.prototype.insertFullLines=function(s,f){s=Math.min(Math.max(s,0),this.getLength());var p=0;s<this.getLength()?(f=f.concat([""]),p=0):(f=[""].concat(f),s--,p=this.$lines[s].length),this.insertMergedLines({row:s,column:p},f)},i.prototype.insertMergedLines=function(s,f){var p=this.clippedPos(s.row,s.column),d={row:p.row+f.length-1,column:(f.length==1?p.column:0)+f[f.length-1].length};return this.applyDelta({start:p,end:d,action:"insert",lines:f}),this.clonePos(d)},i.prototype.remove=function(s){var f=this.clippedPos(s.start.row,s.start.column),p=this.clippedPos(s.end.row,s.end.column);return this.applyDelta({start:f,end:p,action:"remove",lines:this.getLinesForRange({start:f,end:p})}),this.clonePos(f)},i.prototype.removeInLine=function(s,f,p){var d=this.clippedPos(s,f),c=this.clippedPos(s,p);return this.applyDelta({start:d,end:c,action:"remove",lines:this.getLinesForRange({start:d,end:c})},!0),this.clonePos(d)},i.prototype.removeFullLines=function(s,f){s=Math.min(Math.max(0,s),this.getLength()-1),f=Math.min(Math.max(0,f),this.getLength()-1);var p=f==this.getLength()-1&&s>0,d=f<this.getLength()-1,c=p?s-1:s,_=p?this.getLine(c).length:0,v=d?f+1:f,m=d?0:this.getLine(v).length,y=new r(c,_,v,m),C=this.$lines.slice(s,f+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),C},i.prototype.removeNewLine=function(s){s<this.getLength()-1&&s>=0&&this.applyDelta({start:this.pos(s,this.getLine(s).length),end:this.pos(s+1,0),action:"remove",lines:["",""]})},i.prototype.replace=function(s,f){if(s instanceof r||(s=r.fromPoints(s.start,s.end)),f.length===0&&s.isEmpty())return s.start;if(f==this.getTextRange(s))return s.end;this.remove(s);var p;return f?p=this.insert(s.start,f):p=s.start,p},i.prototype.applyDeltas=function(s){for(var f=0;f<s.length;f++)this.applyDelta(s[f])},i.prototype.revertDeltas=function(s){for(var f=s.length-1;f>=0;f--)this.revertDelta(s[f])},i.prototype.applyDelta=function(s,f){var p=s.action=="insert";(p?s.lines.length<=1&&!s.lines[0]:!r.comparePoints(s.start,s.end))||(p&&s.lines.length>2e4?this.$splitAndapplyLargeDelta(s,2e4):(h(this.$lines,s,f),this._signal("change",s)))},i.prototype.$safeApplyDelta=function(s){var f=this.$lines.length;(s.action=="remove"&&s.start.row<f&&s.end.row<f||s.action=="insert"&&s.start.row<=f)&&this.applyDelta(s)},i.prototype.$splitAndapplyLargeDelta=function(s,f){for(var p=s.lines,d=p.length-f+1,c=s.start.row,_=s.start.column,v=0,m=0;v<d;v=m){m+=f-1;var y=p.slice(v,m);y.push(""),this.applyDelta({start:this.pos(c+v,_),end:this.pos(c+m,_=0),action:s.action,lines:y},!0)}s.lines=p.slice(v),s.start.row=c+v,s.start.column=_,this.applyDelta(s,!0)},i.prototype.revertDelta=function(s){this.$safeApplyDelta({start:this.clonePos(s.start),end:this.clonePos(s.end),action:s.action=="insert"?"remove":"insert",lines:s.lines.slice()})},i.prototype.indexToPosition=function(s,f){for(var p=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,c=f||0,_=p.length;c<_;c++)if(s-=p[c].length+d,s<0)return{row:c,column:s+p[c].length+d};return{row:_-1,column:s+p[_-1].length+d}},i.prototype.positionToIndex=function(s,f){for(var p=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,c=0,_=Math.min(s.row,p.length),v=f||0;v<_;++v)c+=p[v].length+d;return c+s.column},i.prototype.$split=function(s){return s.split(/\r\n|\r|\n/)},i}();u.prototype.$autoNewLine="",u.prototype.$newLineMode="auto",a.implement(u.prototype,o),t.Document=u});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./lib/event_emitter").EventEmitter,o=function(){function r(l,u){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=l;var i=this;this.$worker=function(){if(i.running){for(var s=new Date,f=i.currentLine,p=-1,d=i.doc,c=f;i.lines[f];)f++;var _=d.getLength(),v=0;for(i.running=!1;f<_;){i.$tokenizeRow(f),p=f;do f++;while(i.lines[f]);if(v++,v%5===0&&new Date-s>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=f,p==-1&&(p=f),c<=p&&i.fireUpdateEvent(c,p)}}}return r.prototype.setTokenizer=function(l){this.tokenizer=l,this.lines=[],this.states=[],this.start(0)},r.prototype.setDocument=function(l){this.doc=l,this.lines=[],this.states=[],this.stop()},r.prototype.fireUpdateEvent=function(l,u){var i={first:l,last:u};this._signal("update",{data:i})},r.prototype.start=function(l){this.currentLine=Math.min(l||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},r.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},r.prototype.$updateOnChange=function(l){var u=l.start.row,i=l.end.row-u;if(i===0)this.lines[u]=null;else if(l.action=="remove")this.lines.splice(u,i+1,null),this.states.splice(u,i+1,null);else{var s=Array(i+1);s.unshift(u,1),this.lines.splice.apply(this.lines,s),this.states.splice.apply(this.states,s)}this.currentLine=Math.min(u,this.currentLine,this.doc.getLength()),this.stop()},r.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},r.prototype.getTokens=function(l){return this.lines[l]||this.$tokenizeRow(l)},r.prototype.getState=function(l){return this.currentLine==l&&this.$tokenizeRow(l),this.states[l]||"start"},r.prototype.$tokenizeRow=function(l){var u=this.doc.getLine(l),i=this.states[l-1],s=this.tokenizer.getLineTokens(u,i,l);return this.states[l]+""!=s.state+""?(this.states[l]=s.state,this.lines[l+1]=null,this.currentLine>l+1&&(this.currentLine=l+1)):this.currentLine==l&&(this.currentLine=l+1),this.lines[l]=s.tokens},r.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},r}();a.implement(o.prototype,h),t.BackgroundTokenizer=o});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,n){"use strict";var a=e("./lib/lang"),h=e("./range").Range,o=function(){function r(l,u,i){i===void 0&&(i="text"),this.setRegexp(l),this.clazz=u,this.type=i}return r.prototype.setRegexp=function(l){this.regExp+""!=l+""&&(this.regExp=l,this.cache=[])},r.prototype.update=function(l,u,i,s){if(this.regExp)for(var f=s.firstRow,p=s.lastRow,d={},c=f;c<=p;c++){var _=this.cache[c];_==null&&(_=a.getMatchOffsets(i.getLine(c),this.regExp),_.length>this.MAX_RANGES&&(_=_.slice(0,this.MAX_RANGES)),_=_.map(function(C){return new h(c,C.offset,c,C.offset+C.length)}),this.cache[c]=_.length?_:"");for(var v=_.length;v--;){var m=_[v].toScreenRange(i),y=m.toString();d[y]||(d[y]=!0,u.drawSingleLineMarker(l,m,this.clazz,s))}}},r}();o.prototype.MAX_RANGES=500,t.SearchHighlight=o});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=function(){function D(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return D.prototype.addSession=function(g){this.$session=g},D.prototype.add=function(g,w,F){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),w===!1||!this.lastDeltas){this.lastDeltas=[];var b=this.$undoStack.length;b>this.$undoDepth-1&&this.$undoStack.splice(0,b-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},D.prototype.addSelection=function(g,w){this.selections.push({value:g,rev:w||this.$rev})},D.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},D.prototype.markIgnored=function(g,w){w==null&&(w=this.$rev+1);for(var F=this.$undoStack,b=F.length;b--;){var E=F[b][0];if(E.id<=g)break;E.id<w&&(E.ignore=!0)}this.lastDeltas=null},D.prototype.getSelection=function(g,w){for(var F=this.selections,b=F.length;b--;){var E=F[b];if(E.rev<g)return w&&(E=F[b+1]),E}},D.prototype.getRevision=function(){return this.$rev},D.prototype.getDeltas=function(g,w){w==null&&(w=this.$rev+1);for(var F=this.$undoStack,b=null,E=0,M=F.length;M--;){var S=F[M][0];if(S.id<w&&!b&&(b=M+1),S.id<=g){E=M+1;break}}return F.slice(E,b)},D.prototype.getChangedRanges=function(g,w){w==null&&(w=this.$rev+1)},D.prototype.getChangedLines=function(g,w){w==null&&(w=this.$rev+1)},D.prototype.undo=function(g,w){this.lastDeltas=null;var F=this.$undoStack;if(h(F,F.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var b=F.pop(),E=null;return b&&(E=g.undoChanges(b,w),this.$redoStack.push(b),this.$syncRev()),this.$fromUndo=!1,E}},D.prototype.redo=function(g,w){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var F=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);T(this.$redoStack,F),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(M){M[0].id=++this.$maxRev},this)}var b=this.$redoStack.pop(),E=null;return b&&(E=g.redoChanges(b,w),this.$undoStack.push(b),this.$syncRev()),this.$fromUndo=!1,E},D.prototype.$syncRev=function(){var g=this.$undoStack,w=g[g.length-1],F=w&&w[0].id||0;this.$redoStackBaseRev=F,this.$rev=F},D.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},D.prototype.canUndo=function(){return this.$undoStack.length>0},D.prototype.canRedo=function(){return this.$redoStack.length>0},D.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},D.prototype.isAtBookmark=function(){return this.$rev===this.mark},D.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},D.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},D.prototype.$prettyPrint=function(g){return g?f(g):f(this.$undoStack)+`
---
`+f(this.$redoStack)},D}();a.prototype.hasUndo=a.prototype.canUndo,a.prototype.hasRedo=a.prototype.canRedo,a.prototype.isClean=a.prototype.isAtBookmark,a.prototype.markClean=a.prototype.bookmark;function h(D,g){for(var w=g;w--;){var F=D[w];if(F&&!F[0].ignore){for(;w<g-1;){var b=c(D[w],D[w+1]);D[w]=b[0],D[w+1]=b[1],w++}return!0}}}var o=e("./range").Range,r=o.comparePoints,l=o.comparePoints;function u(D){var g=D.action=="insert",w=D.start,F=D.end,b=(F.row-w.row)*(g?1:-1),E=(F.column-w.column)*(g?1:-1);g&&(F=w);for(var M in this.marks){var S=this.marks[M],x=l(S,w);if(!(x<0)){if(x===0&&g)if(S.bias==1)x=1;else{S.bias==-1;continue}var L=g?x:l(S,F);if(L>0){S.row+=b,S.column+=S.row==F.row?E:0;continue}!g&&L<=0&&(S.row=w.row,S.column=w.column,L===0&&(S.bias=1))}}}function i(D){return{row:D.row,column:D.column}}function s(D){return{start:i(D.start),end:i(D.end),action:D.action,lines:D.lines.slice()}}function f(D){if(D=D||this,Array.isArray(D))return D.map(f).join(`
`);var g="";return D.action?(g=D.action=="insert"?"+":"-",g+="["+D.lines+"]"):D.value&&(Array.isArray(D.value)?g=D.value.map(p).join(`
`):g=p(D.value)),D.start&&(g+=p(D)),(D.id||D.rev)&&(g+="	("+(D.id||D.rev)+")"),g}function p(D){return D.start.row+":"+D.start.column+"=>"+D.end.row+":"+D.end.column}function d(D,g){var w=D.action=="insert",F=g.action=="insert";if(w&&F)if(r(g.start,D.end)>=0)v(g,D,-1);else if(r(g.start,D.start)<=0)v(D,g,1);else return null;else if(w&&!F)if(r(g.start,D.end)>=0)v(g,D,-1);else if(r(g.end,D.start)<=0)v(D,g,-1);else return null;else if(!w&&F)if(r(g.start,D.start)>=0)v(g,D,1);else if(r(g.start,D.start)<=0)v(D,g,1);else return null;else if(!w&&!F)if(r(g.start,D.start)>=0)v(g,D,1);else if(r(g.end,D.start)<=0)v(D,g,-1);else return null;return[g,D]}function c(D,g){for(var w=D.length;w--;)for(var F=0;F<g.length;F++)if(!d(D[w],g[F])){for(;w<D.length;){for(;F--;)d(g[F],D[w]);F=g.length,w++}return[D,g]}return D.selectionBefore=g.selectionBefore=D.selectionAfter=g.selectionAfter=null,[g,D]}function _(D,g){var w=D.action=="insert",F=g.action=="insert";if(w&&F)r(D.start,g.start)<0?v(g,D,1):v(D,g,1);else if(w&&!F)r(D.start,g.end)>=0?v(D,g,-1):(r(D.start,g.start)<=0||v(D,o.fromPoints(g.start,D.start),-1),v(g,D,1));else if(!w&&F)r(g.start,D.end)>=0?v(g,D,-1):(r(g.start,D.start)<=0||v(g,o.fromPoints(D.start,g.start),-1),v(D,g,1));else if(!w&&!F)if(r(g.start,D.end)>=0)v(g,D,-1);else if(r(g.end,D.start)<=0)v(D,g,-1);else{var b,E;return r(D.start,g.start)<0&&(b=D,D=y(D,g.start)),r(D.end,g.end)>0&&(E=y(D,g.end)),m(g.end,D.start,D.end,-1),E&&!b&&(D.lines=E.lines,D.start=E.start,D.end=E.end,E=D),[g,b,E].filter(Boolean)}return[g,D]}function v(D,g,w){m(D.start,g.start,g.end,w),m(D.end,g.start,g.end,w)}function m(D,g,w,F){D.row==(F==1?g:w).row&&(D.column+=F*(w.column-g.column)),D.row+=F*(w.row-g.row)}function y(D,g){var w=D.lines,F=D.end;D.end=i(g);var b=D.end.row-D.start.row,E=w.splice(b,w.length),M=b?g.column:g.column-D.start.column;w.push(E[0].substring(0,M)),E[0]=E[0].substr(M);var S={start:i(g),end:F,lines:E,action:D.action};return S}function C(D,g){g=s(g);for(var w=D.length;w--;){for(var F=D[w],b=0;b<F.length;b++){var E=F[b],M=_(E,g);g=M[0],M.length!=2&&(M[2]?(F.splice(b+1,1,M[1],M[2]),b++):M[1]||(F.splice(b,1),b--))}F.length||D.splice(w,1)}return D}function T(D,g){for(var w=0;w<g.length;w++)for(var F=g[w],b=0;b<F.length;b++)C(D,F[b])}t.UndoManager=a});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("../range").Range,h=function(){function o(r,l){this.foldData=r,Array.isArray(l)?this.folds=l:l=this.folds=[l];var u=l[l.length-1];this.range=new a(l[0].start.row,l[0].start.column,u.end.row,u.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(i){i.setFoldLine(this)},this)}return o.prototype.shiftRow=function(r){this.start.row+=r,this.end.row+=r,this.folds.forEach(function(l){l.start.row+=r,l.end.row+=r})},o.prototype.addFold=function(r){if(r.sameRow){if(r.start.row<this.startRow||r.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(r),this.folds.sort(function(l,u){return-l.range.compareEnd(u.start.row,u.start.column)}),this.range.compareEnd(r.start.row,r.start.column)>0?(this.end.row=r.end.row,this.end.column=r.end.column):this.range.compareStart(r.end.row,r.end.column)<0&&(this.start.row=r.start.row,this.start.column=r.start.column)}else if(r.start.row==this.end.row)this.folds.push(r),this.end.row=r.end.row,this.end.column=r.end.column;else if(r.end.row==this.start.row)this.folds.unshift(r),this.start.row=r.start.row,this.start.column=r.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");r.foldLine=this},o.prototype.containsRow=function(r){return r>=this.start.row&&r<=this.end.row},o.prototype.walk=function(r,l,u){var i=0,s=this.folds,f,p,d,c=!0;l==null&&(l=this.end.row,u=this.end.column);for(var _=0;_<s.length;_++){if(f=s[_],p=f.range.compareStart(l,u),p==-1){r(null,l,u,i,c);return}if(d=r(null,f.start.row,f.start.column,i,c),d=!d&&r(f.placeholder,f.start.row,f.start.column,i),d||p===0)return;c=!f.sameRow,i=f.end.column}r(null,l,u,i,c)},o.prototype.getNextFoldTo=function(r,l){for(var u,i,s=0;s<this.folds.length;s++){if(u=this.folds[s],i=u.range.compareEnd(r,l),i==-1)return{fold:u,kind:"after"};if(i===0)return{fold:u,kind:"inside"}}return null},o.prototype.addRemoveChars=function(r,l,u){var i=this.getNextFoldTo(r,l),s,f;if(i){if(s=i.fold,i.kind=="inside"&&s.start.column!=l&&s.start.row!=r)window.console&&window.console.log(r,l,s);else if(s.start.row==r){f=this.folds;var p=f.indexOf(s);for(p===0&&(this.start.column+=u),p;p<f.length;p++){if(s=f[p],s.start.column+=u,!s.sameRow)return;s.end.column+=u}this.end.column+=u}}},o.prototype.split=function(r,l){var u=this.getNextFoldTo(r,l);if(!u||u.kind=="inside")return null;var i=u.fold,s=this.folds,f=this.foldData,p=s.indexOf(i),d=s[p-1];this.end.row=d.end.row,this.end.column=d.end.column,s=s.splice(p,s.length-p);var c=new o(f,s);return f.splice(f.indexOf(this)+1,0,c),c},o.prototype.merge=function(r){for(var l=r.folds,u=0;u<l.length;u++)this.addFold(l[u]);var i=this.foldData;i.splice(i.indexOf(r),1)},o.prototype.toString=function(){var r=[this.range.toString()+": ["];return this.folds.forEach(function(l){r.push("  "+l.toString())}),r.push("]"),r.join(`
`)},o.prototype.idxToPosition=function(r){for(var l=0,u=0;u<this.folds.length;u++){var i=this.folds[u];if(r-=i.start.column-l,r<0)return{row:i.start.row,column:i.start.column+r};if(r-=i.placeholder.length,r<0)return i.start;l=i.end.column}return{row:this.end.row,column:this.end.column+r}},o}();t.FoldLine=h});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("./range").Range,h=a.comparePoints,o=function(){function r(){this.ranges=[],this.$bias=1}return r.prototype.pointIndex=function(l,u,i){for(var s=this.ranges,f=i||0;f<s.length;f++){var p=s[f],d=h(l,p.end);if(!(d>0)){var c=h(l,p.start);return d===0?u&&c!==0?-f-2:f:c>0||c===0&&!u?f:-f-1}}return-f-1},r.prototype.add=function(l){var u=!l.isEmpty(),i=this.pointIndex(l.start,u);i<0&&(i=-i-1);var s=this.pointIndex(l.end,u,i);return s<0?s=-s-1:s++,this.ranges.splice(i,s-i,l)},r.prototype.addList=function(l){for(var u=[],i=l.length;i--;)u.push.apply(u,this.add(l[i]));return u},r.prototype.substractPoint=function(l){var u=this.pointIndex(l);if(u>=0)return this.ranges.splice(u,1)},r.prototype.merge=function(){var l=[],u=this.ranges;u=u.sort(function(d,c){return h(d.start,c.start)});for(var i=u[0],s,f=1;f<u.length;f++){s=i,i=u[f];var p=h(s.end,i.start);p<0||p==0&&!s.isEmpty()&&!i.isEmpty()||(h(s.end,i.end)<0&&(s.end.row=i.end.row,s.end.column=i.end.column),u.splice(f,1),l.push(i),i=s,f--)}return this.ranges=u,l},r.prototype.contains=function(l,u){return this.pointIndex({row:l,column:u})>=0},r.prototype.containsPoint=function(l){return this.pointIndex(l)>=0},r.prototype.rangeAtPoint=function(l){var u=this.pointIndex(l);if(u>=0)return this.ranges[u]},r.prototype.clipRows=function(l,u){var i=this.ranges;if(i[0].start.row>u||i[i.length-1].start.row<l)return[];var s=this.pointIndex({row:l,column:0});s<0&&(s=-s-1);var f=this.pointIndex({row:u,column:0},s);f<0&&(f=-f-1);for(var p=[],d=s;d<f;d++)p.push(i[d]);return p},r.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},r.prototype.attach=function(l){this.session&&this.detach(),this.session=l,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},r.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},r.prototype.$onChange=function(l){for(var u=l.start,i=l.end,s=u.row,f=i.row,p=this.ranges,d=0,c=p.length;d<c;d++){var _=p[d];if(_.end.row>=s)break}if(l.action=="insert")for(var v=f-s,m=-u.column+i.column;d<c;d++){var _=p[d];if(_.start.row>s)break;if(_.start.row==s&&_.start.column>=u.column&&(_.start.column==u.column&&this.$bias<=0||(_.start.column+=m,_.start.row+=v)),_.end.row==s&&_.end.column>=u.column){if(_.end.column==u.column&&this.$bias<0)continue;_.end.column==u.column&&m>0&&d<c-1&&_.end.column>_.start.column&&_.end.column==p[d+1].start.column&&(_.end.column-=m),_.end.column+=m,_.end.row+=v}}else for(var v=s-f,m=u.column-i.column;d<c;d++){var _=p[d];if(_.start.row>f)break;_.end.row<f&&(s<_.end.row||s==_.end.row&&u.column<_.end.column)?(_.end.row=s,_.end.column=u.column):_.end.row==f?_.end.column<=i.column?(v||_.end.column>u.column)&&(_.end.column=u.column,_.end.row=u.row):(_.end.column+=m,_.end.row+=v):_.end.row>f&&(_.end.row+=v),_.start.row<f&&(s<_.start.row||s==_.start.row&&u.column<_.start.column)?(_.start.row=s,_.start.column=u.column):_.start.row==f?_.start.column<=i.column?(v||_.start.column>u.column)&&(_.start.column=u.column,_.start.row=u.row):(_.start.column+=m,_.start.row+=v):_.start.row>f&&(_.start.row+=v)}if(v!=0&&d<c)for(;d<c;d++){var _=p[d];_.start.row+=v,_.end.row+=v}},r}();o.prototype.comparePoints=h,t.RangeList=o});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var s=function(f,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(d[_]=c[_])},s(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");s(f,p);function d(){this.constructor=f}f.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),h=e("../range_list").RangeList,o=function(s){a(f,s);function f(p,d){var c=s.call(this)||this;return c.foldLine=null,c.placeholder=d,c.range=p,c.start=p.start,c.end=p.end,c.sameRow=p.start.row==p.end.row,c.subFolds=c.ranges=[],c}return f.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},f.prototype.setFoldLine=function(p){this.foldLine=p,this.subFolds.forEach(function(d){d.setFoldLine(p)})},f.prototype.clone=function(){var p=this.range.clone(),d=new f(p,this.placeholder);return this.subFolds.forEach(function(c){d.subFolds.push(c.clone())}),d.collapseChildren=this.collapseChildren,d},f.prototype.addSubFold=function(p){if(!this.range.isEqual(p)){l(p,this.start);for(var m=p.start.row,y=p.start.column,d=0,c=-1;d<this.subFolds.length&&(c=this.subFolds[d].range.compare(m,y),c==1);d++);var _=this.subFolds[d],v=0;if(c==0){if(_.range.containsRange(p))return _.addSubFold(p);v=1}for(var m=p.range.end.row,y=p.range.end.column,C=d,c=-1;C<this.subFolds.length&&(c=this.subFolds[C].range.compare(m,y),c==1);C++);c==0&&C++;for(var T=this.subFolds.splice(d,C-d,p),D=c==0?T.length-1:T.length,g=v;g<D;g++)p.addSubFold(T[g]);return p.setFoldLine(this.foldLine),p}},f.prototype.restoreRange=function(p){return i(p,this.start)},f}(h);function r(s,f){s.row-=f.row,s.row==0&&(s.column-=f.column)}function l(s,f){r(s.start,f),r(s.end,f)}function u(s,f){s.row==0&&(s.column+=f.column),s.row+=f.row}function i(s,f){u(s.start,f),u(s.end,f)}t.Fold=o});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,n){"use strict";var a=e("../range").Range,h=e("./fold_line").FoldLine,o=e("./fold").Fold,r=e("../token_iterator").TokenIterator,l=e("../mouse/mouse_event").MouseEvent;function u(){this.getFoldAt=function(i,s,f){var p=this.getFoldLine(i);if(!p)return null;for(var d=p.folds,c=0;c<d.length;c++){var _=d[c].range;if(_.contains(i,s)){if(f==1&&_.isEnd(i,s)&&!_.isEmpty())continue;if(f==-1&&_.isStart(i,s)&&!_.isEmpty())continue;return d[c]}}},this.getFoldsInRange=function(i){var s=i.start,f=i.end,p=this.$foldData,d=[];s.column+=1,f.column-=1;for(var c=0;c<p.length;c++){var _=p[c].range.compareRange(i);if(_!=2){if(_==-2)break;for(var v=p[c].folds,m=0;m<v.length;m++){var y=v[m];if(_=y.range.compareRange(i),_==-2)break;if(_==2)continue;if(_==42)break;d.push(y)}}}return s.column-=1,f.column+=1,d},this.getFoldsInRangeList=function(i){if(Array.isArray(i)){var s=[];i.forEach(function(f){s=s.concat(this.getFoldsInRange(f))},this)}else var s=this.getFoldsInRange(i);return s},this.getAllFolds=function(){for(var i=[],s=this.$foldData,f=0;f<s.length;f++)for(var p=0;p<s[f].folds.length;p++)i.push(s[f].folds[p]);return i},this.getFoldStringAt=function(i,s,f,p){if(p=p||this.getFoldLine(i),!p)return null;for(var d={end:{column:0}},c,_,v=0;v<p.folds.length;v++){_=p.folds[v];var m=_.range.compareEnd(i,s);if(m==-1){c=this.getLine(_.start.row).substring(d.end.column,_.start.column);break}else if(m===0)return null;d=_}return c||(c=this.getLine(_.start.row).substring(d.end.column)),f==-1?c.substring(0,s-d.end.column):f==1?c.substring(s-d.end.column):c},this.getFoldLine=function(i,s){var f=this.$foldData,p=0;for(s&&(p=f.indexOf(s)),p==-1&&(p=0),p;p<f.length;p++){var d=f[p];if(d.start.row<=i&&d.end.row>=i)return d;if(d.end.row>i)return null}return null},this.getNextFoldLine=function(i,s){var f=this.$foldData,p=0;for(s&&(p=f.indexOf(s)),p==-1&&(p=0),p;p<f.length;p++){var d=f[p];if(d.end.row>=i)return d}return null},this.getFoldedRowCount=function(i,s){for(var f=this.$foldData,p=s-i+1,d=0;d<f.length;d++){var c=f[d],_=c.end.row,v=c.start.row;if(_>=s){v<s&&(v>=i?p-=s-v:p=0);break}else _>=i&&(v>=i?p-=_-v:p-=_-i+1)}return p},this.$addFoldLine=function(i){return this.$foldData.push(i),this.$foldData.sort(function(s,f){return s.start.row-f.start.row}),i},this.addFold=function(i,s){var f=this.$foldData,p=!1,d;i instanceof o?d=i:(d=new o(s,i),d.collapseChildren=s.collapseChildren),this.$clipRangeToDocument(d.range);var c=d.start.row,_=d.start.column,v=d.end.row,m=d.end.column,y=this.getFoldAt(c,_,1),C=this.getFoldAt(v,m,-1);if(y&&C==y)return y.addSubFold(d);y&&!y.range.isStart(c,_)&&this.removeFold(y),C&&!C.range.isEnd(v,m)&&this.removeFold(C);var T=this.getFoldsInRange(d.range);T.length>0&&(this.removeFolds(T),d.collapseChildren||T.forEach(function(F){d.addSubFold(F)}));for(var D=0;D<f.length;D++){var g=f[D];if(v==g.start.row){g.addFold(d),p=!0;break}else if(c==g.end.row){if(g.addFold(d),p=!0,!d.sameRow){var w=f[D+1];if(w&&w.start.row==v){g.merge(w);break}}break}else if(v<=g.start.row)break}return p||(g=this.$addFoldLine(new h(this.$foldData,d))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:d,action:"add"}),d},this.addFolds=function(i){i.forEach(function(s){this.addFold(s)},this)},this.removeFold=function(i){var s=i.foldLine,f=s.start.row,p=s.end.row,d=this.$foldData,c=s.folds;if(c.length==1)d.splice(d.indexOf(s),1);else if(s.range.isEnd(i.end.row,i.end.column))c.pop(),s.end.row=c[c.length-1].end.row,s.end.column=c[c.length-1].end.column;else if(s.range.isStart(i.start.row,i.start.column))c.shift(),s.start.row=c[0].start.row,s.start.column=c[0].start.column;else if(i.sameRow)c.splice(c.indexOf(i),1);else{var _=s.split(i.start.row,i.start.column);c=_.folds,c.shift(),_.start.row=c[0].start.row,_.start.column=c[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(f,p):this.$updateRowLengthCache(f,p)),this.$modified=!0,this._signal("changeFold",{data:i,action:"remove"})},this.removeFolds=function(i){for(var s=[],f=0;f<i.length;f++)s.push(i[f]);s.forEach(function(p){this.removeFold(p)},this),this.$modified=!0},this.expandFold=function(i){this.removeFold(i),i.subFolds.forEach(function(s){i.restoreRange(s),this.addFold(s)},this),i.collapseChildren>0&&this.foldAll(i.start.row+1,i.end.row,i.collapseChildren-1),i.subFolds=[]},this.expandFolds=function(i){i.forEach(function(s){this.expandFold(s)},this)},this.unfold=function(i,s){var f,p;if(i==null)f=new a(0,0,this.getLength(),0),s==null&&(s=!0);else if(typeof i=="number")f=new a(i,0,i,this.getLine(i).length);else if("row"in i)f=a.fromPoints(i,i);else{if(Array.isArray(i))return p=[],i.forEach(function(c){p=p.concat(this.unfold(c))},this),p;f=i}p=this.getFoldsInRangeList(f);for(var d=p;p.length==1&&a.comparePoints(p[0].start,f.start)<0&&a.comparePoints(p[0].end,f.end)>0;)this.expandFolds(p),p=this.getFoldsInRangeList(f);if(s!=!1?this.removeFolds(p):this.expandFolds(p),d.length)return d},this.isRowFolded=function(i,s){return!!this.getFoldLine(i,s)},this.getRowFoldEnd=function(i,s){var f=this.getFoldLine(i,s);return f?f.end.row:i},this.getRowFoldStart=function(i,s){var f=this.getFoldLine(i,s);return f?f.start.row:i},this.getFoldDisplayLine=function(i,s,f,p,d){p==null&&(p=i.start.row),d==null&&(d=0),s==null&&(s=i.end.row),f==null&&(f=this.getLine(s).length);var c=this.doc,_="";return i.walk(function(v,m,y,C){if(!(m<p)){if(m==p){if(y<d)return;C=Math.max(d,C)}v!=null?_+=v:_+=c.getLine(m).substring(C,y)}},s,f),_},this.getDisplayLine=function(i,s,f,p){var d=this.getFoldLine(i);if(d)return this.getFoldDisplayLine(d,i,s,f,p);var c;return c=this.doc.getLine(i),c.substring(p||0,s||c.length)},this.$cloneFoldData=function(){var i=[];return i=this.$foldData.map(function(s){var f=s.folds.map(function(p){return p.clone()});return new h(i,f)}),i},this.toggleFold=function(i){var s=this.selection,f=s.getRange(),p,d;if(f.isEmpty()){var c=f.start;if(p=this.getFoldAt(c.row,c.column),p){this.expandFold(p);return}else(d=this.findMatchingBracket(c))?f.comparePoint(d)==1?f.end=d:(f.start=d,f.start.column++,f.end.column--):(d=this.findMatchingBracket({row:c.row,column:c.column+1}))?(f.comparePoint(d)==1?f.end=d:f.start=d,f.start.column++):f=this.getCommentFoldRange(c.row,c.column)||f}else{var _=this.getFoldsInRange(f);if(i&&_.length){this.expandFolds(_);return}else _.length==1&&(p=_[0])}if(p||(p=this.getFoldAt(f.start.row,f.start.column)),p&&p.range.toString()==f.toString()){this.expandFold(p);return}var v="...";if(!f.isMultiLine()){if(v=this.getTextRange(f),v.length<4)return;v=v.trim().substring(0,2)+".."}this.addFold(v,f)},this.getCommentFoldRange=function(i,s,f){var p=new r(this,i,s),d=p.getCurrentToken(),c=d&&d.type;if(d&&/^comment|string/.test(c)){c=c.match(/comment|string/)[0],c=="comment"&&(c+="|doc-start|\\.doc");var _=new RegExp(c),v=new a;if(f!=1){do d=p.stepBackward();while(d&&_.test(d.type)&&!/^comment.end/.test(d.type));d=p.stepForward()}if(v.start.row=p.getCurrentTokenRow(),v.start.column=p.getCurrentTokenColumn()+(/^comment.start/.test(d.type)?d.value.length:2),p=new r(this,i,s),f!=-1){var m=-1;do if(d=p.stepForward(),m==-1){var y=this.getState(p.$row);_.test(y)||(m=p.$row)}else if(p.$row>m)break;while(d&&_.test(d.type)&&!/^comment.start/.test(d.type));d=p.stepBackward()}else d=p.getCurrentToken();return v.end.row=p.getCurrentTokenRow(),v.end.column=p.getCurrentTokenColumn(),/^comment.end/.test(d.type)||(v.end.column+=d.value.length-2),v}},this.foldAll=function(i,s,f,p){f==null&&(f=1e5);var d=this.foldWidgets;if(d){s=s||this.getLength(),i=i||0;for(var c=i;c<s;c++)if(d[c]==null&&(d[c]=this.getFoldWidget(c)),d[c]=="start"&&!(p&&!p(c))){var _=this.getFoldWidgetRange(c);_&&_.isMultiLine()&&_.end.row<=s&&_.start.row>=i&&(c=_.end.row,_.collapseChildren=f,this.addFold("...",_))}}},this.foldToLevel=function(i){for(this.foldAll();i-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var i=this;this.foldAll(null,null,null,function(s){for(var f=i.getTokens(s),p=0;p<f.length;p++){var d=f[p];if(!(d.type=="text"&&/^\s+$/.test(d.value)))return!!/comment/.test(d.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(i){if(!this.$foldStyles[i])throw new Error("invalid fold style: "+i+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=i){this.$foldStyle=i,i=="manual"&&this.unfold();var s=this.$foldMode;this.$setFolding(null),this.$setFolding(s)}},this.$setFolding=function(i){if(this.$foldMode!=i){if(this.$foldMode=i,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!i||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=i.getFoldWidget.bind(i,this,this.$foldStyle),this.getFoldWidgetRange=i.getFoldWidgetRange.bind(i,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(i,s){var f=this.foldWidgets;if(!f||s&&f[i])return{};for(var p=i-1,d;p>=0;){var c=f[p];if(c==null&&(c=f[p]=this.getFoldWidget(p)),c=="start"){var _=this.getFoldWidgetRange(p);if(d||(d=_),_&&_.end.row>=i)break}p--}return{range:p!==-1&&_,firstRange:d}},this.onFoldWidgetClick=function(i,s){s instanceof l&&(s=s.domEvent);var f={children:s.shiftKey,all:s.ctrlKey||s.metaKey,siblings:s.altKey},p=this.$toggleFoldWidget(i,f);if(!p){var d=s.target||s.srcElement;d&&/ace_fold-widget/.test(d.className)&&(d.className+=" ace_invalid")}},this.$toggleFoldWidget=function(i,s){if(this.getFoldWidget){var f=this.getFoldWidget(i),p=this.getLine(i),d=f==="end"?-1:1,c=this.getFoldAt(i,d===-1?0:p.length,d);if(c)return s.children||s.all?this.removeFold(c):this.expandFold(c),c;var _=this.getFoldWidgetRange(i,!0);if(_&&!_.isMultiLine()&&(c=this.getFoldAt(_.start.row,_.start.column,1),c&&_.isEqual(c.range)))return this.removeFold(c),c;if(s.siblings){var v=this.getParentFoldRangeData(i);if(v.range)var m=v.range.start.row+1,y=v.range.end.row;this.foldAll(m,y,s.all?1e4:0)}else s.children?(y=_?_.end.row:this.getLength(),this.foldAll(i+1,y,s.all?1e4:0)):_&&(s.all&&(_.collapseChildren=1e4),this.addFold("...",_));return _}},this.toggleFoldWidget=function(i){var s=this.selection.getCursor().row;s=this.getRowFoldStart(s);var f=this.$toggleFoldWidget(s,{});if(!f){var p=this.getParentFoldRangeData(s,!0);if(f=p.range||p.firstRange,f){s=f.start.row;var d=this.getFoldAt(s,this.getLine(s).length,1);d?this.removeFold(d):this.addFold("...",f)}}},this.updateFoldWidgets=function(i){var s=i.start.row,f=i.end.row-s;if(f===0)this.foldWidgets[s]=null;else if(i.action=="remove")this.foldWidgets.splice(s,f+1,null);else{var p=Array(f+1);p.unshift(s,1),this.foldWidgets.splice.apply(this.foldWidgets,p)}},this.tokenizerUpdateFoldWidgets=function(i){var s=i.data;s.first!=s.last&&this.foldWidgets.length>s.first&&this.foldWidgets.splice(s.first,this.foldWidgets.length)}}t.Folding=u});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var a=e("../token_iterator").TokenIterator,h=e("../range").Range;function o(){this.findMatchingBracket=function(r,l){if(r.column==0)return null;var u=l||this.getLine(r.row).charAt(r.column-1);if(u=="")return null;var i=u.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],r):this.$findOpeningBracket(i[2],r):null},this.getBracketRange=function(r){var l=this.getLine(r.row),u=!0,i,s=l.charAt(r.column-1),f=s&&s.match(/([\(\[\{])|([\)\]\}])/);if(f||(s=l.charAt(r.column),r={row:r.row,column:r.column+1},f=s&&s.match(/([\(\[\{])|([\)\]\}])/),u=!1),!f)return null;if(f[1]){var p=this.$findClosingBracket(f[1],r);if(!p)return null;i=h.fromPoints(r,p),u||(i.end.column++,i.start.column--),i.cursor=i.end}else{var p=this.$findOpeningBracket(f[2],r);if(!p)return null;i=h.fromPoints(p,r),u||(i.start.column++,i.end.column--),i.cursor=i.start}return i},this.getMatchingBracketRanges=function(r,l){var u=this.getLine(r.row),i=/([\(\[\{])|([\)\]\}])/,s=!l&&u.charAt(r.column-1),f=s&&s.match(i);if(f||(s=(l===void 0||l)&&u.charAt(r.column),r={row:r.row,column:r.column+1},f=s&&s.match(i)),!f)return null;var p=new h(r.row,r.column-1,r.row,r.column),d=f[1]?this.$findClosingBracket(f[1],r):this.$findOpeningBracket(f[2],r);if(!d)return[p];var c=new h(d.row,d.column,d.row,d.column+1);return[p,c]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(r,l,u){var i=this.$brackets[r],s=1,f=new a(this,l.row,l.column),p=f.getCurrentToken();if(p||(p=f.stepForward()),!!p){u||(u=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var d=l.column-f.getCurrentTokenColumn()-2,c=p.value;;){for(;d>=0;){var _=c.charAt(d);if(_==i){if(s-=1,s==0)return{row:f.getCurrentTokenRow(),column:d+f.getCurrentTokenColumn()}}else _==r&&(s+=1);d-=1}do p=f.stepBackward();while(p&&!u.test(p.type));if(p==null)break;c=p.value,d=c.length-1}return null}},this.$findClosingBracket=function(r,l,u){var i=this.$brackets[r],s=1,f=new a(this,l.row,l.column),p=f.getCurrentToken();if(p||(p=f.stepForward()),!!p){u||(u=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var d=l.column-f.getCurrentTokenColumn();;){for(var c=p.value,_=c.length;d<_;){var v=c.charAt(d);if(v==i){if(s-=1,s==0)return{row:f.getCurrentTokenRow(),column:d+f.getCurrentTokenColumn()}}else v==r&&(s+=1);d+=1}do p=f.stepForward();while(p&&!u.test(p.type));if(p==null)break;d=0}return null}},this.getMatchingTags=function(r){var l=new a(this,r.row,r.column),u=this.$findTagName(l);if(u){var i=l.stepBackward();return i.value==="<"?this.$findClosingTag(l,u):this.$findOpeningTag(l,u)}},this.$findTagName=function(r){var l=r.getCurrentToken(),u=!1,i=!1;if(l&&l.type.indexOf("tag-name")===-1)do i?l=r.stepBackward():l=r.stepForward(),l&&(l.value==="/>"?i=!0:l.type.indexOf("tag-name")!==-1&&(u=!0));while(l&&!u);return l},this.$findClosingTag=function(r,l){var u,i=l.value,s=l.value,f=0,p=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);l=r.stepForward();var d=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l.value.length),c=!1;do if(u=l,l=r.stepForward(),l){if(l.value===">"&&!c){var _=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);c=!0}if(l.type.indexOf("tag-name")!==-1){if(i=l.value,s===i){if(u.value==="<")f++;else if(u.value==="</"&&(f--,f<0)){r.stepBackward();var v=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+2);l=r.stepForward();var m=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l.value.length);if(l=r.stepForward(),l&&l.value===">")var y=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);else return}}}else if(s===i&&l.value==="/>"&&(f--,f<0))var v=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+2),m=v,y=m,_=new h(d.end.row,d.end.column,d.end.row,d.end.column+1)}while(l&&f>=0);if(p&&_&&v&&y&&d&&m)return{openTag:new h(p.start.row,p.start.column,_.end.row,_.end.column),closeTag:new h(v.start.row,v.start.column,y.end.row,y.end.column),openTagName:d,closeTagName:m}},this.$findOpeningTag=function(r,l){var u=r.getCurrentToken(),i=l.value,s=0,f=r.getCurrentTokenRow(),p=r.getCurrentTokenColumn(),d=p+2,c=new h(f,p,f,d);r.stepForward();var _=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+l.value.length);if(l=r.stepForward(),!(!l||l.value!==">")){var v=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);r.stepBackward(),r.stepBackward();do if(l=u,f=r.getCurrentTokenRow(),p=r.getCurrentTokenColumn(),d=p+l.value.length,u=r.stepBackward(),l){if(l.type.indexOf("tag-name")!==-1){if(i===l.value)if(u.value==="<"){if(s++,s>0){var m=new h(f,p,f,d),y=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1);do l=r.stepForward();while(l&&l.value!==">");var C=new h(r.getCurrentTokenRow(),r.getCurrentTokenColumn(),r.getCurrentTokenRow(),r.getCurrentTokenColumn()+1)}}else u.value==="</"&&s--}else if(l.value==="/>"){for(var T=0,D=u;D;){if(D.type.indexOf("tag-name")!==-1&&D.value===i){s--;break}else if(D.value==="<")break;D=r.stepBackward(),T++}for(var g=0;g<T;g++)r.stepForward()}}while(u&&s<=0);if(y&&C&&c&&v&&m&&_)return{openTag:new h(y.start.row,y.start.column,C.end.row,C.end.column),closeTag:new h(c.start.row,c.start.column,v.end.row,v.end.column),openTagName:m,closeTagName:_}}}}t.BracketMatch=o});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./lib/lang"),o=e("./bidihandler").BidiHandler,r=e("./config"),l=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,i=e("./mode/text").Mode,s=e("./range").Range,f=e("./document").Document,p=e("./background_tokenizer").BackgroundTokenizer,d=e("./search_highlight").SearchHighlight,c=e("./undomanager").UndoManager,_=function(){function b(E,M){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++b.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new p(new i().getTokenizer(),this);var S=this;this.bgTokenizer.on("update",function(x){S._signal("tokenizerUpdate",x)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof E!="object"||!E.getLine)&&(E=new f(E)),this.setDocument(E),this.selection=new u(this),this.$bidiHandler=new o(this),r.resetOptions(this),this.setMode(M),r._signal("session",this),this.destroyed=!1}return b.prototype.setDocument=function(E){this.doc&&this.doc.off("change",this.$onChange),this.doc=E,E.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},b.prototype.getDocument=function(){return this.doc},b.prototype.$resetRowCache=function(E){if(!E){this.$docRowCache=[],this.$screenRowCache=[];return}var M=this.$docRowCache.length,S=this.$getRowCacheIndex(this.$docRowCache,E)+1;M>S&&(this.$docRowCache.splice(S,M),this.$screenRowCache.splice(S,M))},b.prototype.$getRowCacheIndex=function(E,M){for(var S=0,x=E.length-1;S<=x;){var L=S+x>>1,R=E[L];if(M>R)S=L+1;else if(M<R)x=L-1;else return L}return S-1},b.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},b.prototype.onChangeFold=function(E){var M=E.data;this.$resetRowCache(M.start.row)},b.prototype.onChange=function(E){this.$modified=!0,this.$bidiHandler.onChange(E),this.$resetRowCache(E.start.row);var M=this.$updateInternalDataOnChange(E);!this.$fromUndo&&this.$undoManager&&(M&&M.length&&(this.$undoManager.add({action:"removeFolds",folds:M},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(E,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(E),this._signal("change",E)},b.prototype.setValue=function(E){this.doc.setValue(E),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},b.fromJSON=function(E){typeof E=="string"&&(E=JSON.parse(E));var M=new c;M.$undoStack=E.history.undo,M.$redoStack=E.history.redo,M.mark=E.history.mark,M.$rev=E.history.rev;var S=new b(E.value);return E.folds.forEach(function(x){S.addFold("...",s.fromPoints(x.start,x.end))}),S.setAnnotations(E.annotations),S.setBreakpoints(E.breakpoints),S.setMode(E.mode),S.setScrollLeft(E.scrollLeft),S.setScrollTop(E.scrollTop),S.setUndoManager(M),S.selection.fromJSON(E.selection),S},b.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(E){return E.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},b.prototype.toString=function(){return this.doc.getValue()},b.prototype.getSelection=function(){return this.selection},b.prototype.getState=function(E){return this.bgTokenizer.getState(E)},b.prototype.getTokens=function(E){return this.bgTokenizer.getTokens(E)},b.prototype.getTokenAt=function(E,M){var S=this.bgTokenizer.getTokens(E),x,L=0;if(M==null){var R=S.length-1;L=this.getLine(E).length}else for(var R=0;R<S.length&&(L+=S[R].value.length,!(L>=M));R++);return x=S[R],x?(x.index=R,x.start=L-x.value.length,x):null},b.prototype.setUndoManager=function(E){if(this.$undoManager=E,this.$informUndoManager&&this.$informUndoManager.cancel(),E){var M=this;E.addSession(this),this.$syncInformUndoManager=function(){M.$informUndoManager.cancel(),M.mergeUndoDeltas=!1},this.$informUndoManager=h.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},b.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},b.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},b.prototype.getTabString=function(){return this.getUseSoftTabs()?h.stringRepeat(" ",this.getTabSize()):"	"},b.prototype.setUseSoftTabs=function(E){this.setOption("useSoftTabs",E)},b.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},b.prototype.setTabSize=function(E){this.setOption("tabSize",E)},b.prototype.getTabSize=function(){return this.$tabSize},b.prototype.isTabStop=function(E){return this.$useSoftTabs&&E.column%this.$tabSize===0},b.prototype.setNavigateWithinSoftTabs=function(E){this.setOption("navigateWithinSoftTabs",E)},b.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},b.prototype.setOverwrite=function(E){this.setOption("overwrite",E)},b.prototype.getOverwrite=function(){return this.$overwrite},b.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},b.prototype.addGutterDecoration=function(E,M){this.$decorations[E]||(this.$decorations[E]=""),this.$decorations[E]+=" "+M,this._signal("changeBreakpoint",{})},b.prototype.removeGutterDecoration=function(E,M){this.$decorations[E]=(this.$decorations[E]||"").replace(" "+M,""),this._signal("changeBreakpoint",{})},b.prototype.getBreakpoints=function(){return this.$breakpoints},b.prototype.setBreakpoints=function(E){this.$breakpoints=[];for(var M=0;M<E.length;M++)this.$breakpoints[E[M]]="ace_breakpoint";this._signal("changeBreakpoint",{})},b.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},b.prototype.setBreakpoint=function(E,M){M===void 0&&(M="ace_breakpoint"),M?this.$breakpoints[E]=M:delete this.$breakpoints[E],this._signal("changeBreakpoint",{})},b.prototype.clearBreakpoint=function(E){delete this.$breakpoints[E],this._signal("changeBreakpoint",{})},b.prototype.addMarker=function(E,M,S,x){var L=this.$markerId++,R={range:E,type:S||"line",renderer:typeof S=="function"?S:null,clazz:M,inFront:!!x,id:L};return x?(this.$frontMarkers[L]=R,this._signal("changeFrontMarker")):(this.$backMarkers[L]=R,this._signal("changeBackMarker")),L},b.prototype.addDynamicMarker=function(E,M){if(E.update){var S=this.$markerId++;return E.id=S,E.inFront=!!M,M?(this.$frontMarkers[S]=E,this._signal("changeFrontMarker")):(this.$backMarkers[S]=E,this._signal("changeBackMarker")),E}},b.prototype.removeMarker=function(E){var M=this.$frontMarkers[E]||this.$backMarkers[E];if(M){var S=M.inFront?this.$frontMarkers:this.$backMarkers;delete S[E],this._signal(M.inFront?"changeFrontMarker":"changeBackMarker")}},b.prototype.getMarkers=function(E){return E?this.$frontMarkers:this.$backMarkers},b.prototype.highlight=function(E){if(!this.$searchHighlight){var M=new d(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(M)}this.$searchHighlight.setRegexp(E)},b.prototype.highlightLines=function(E,M,S,x){typeof M!="number"&&(S=M,M=E),S||(S="ace_step");var L=new s(E,0,M,1/0);return L.id=this.addMarker(L,S,"fullLine",x),L},b.prototype.setAnnotations=function(E){this.$annotations=E,this._signal("changeAnnotation",{})},b.prototype.getAnnotations=function(){return this.$annotations||[]},b.prototype.clearAnnotations=function(){this.setAnnotations([])},b.prototype.$detectNewLine=function(E){var M=E.match(/^.*?(\r?\n)/m);M?this.$autoNewLine=M[1]:this.$autoNewLine=`
`},b.prototype.getWordRange=function(E,M){var S=this.getLine(E),x=!1;if(M>0&&(x=!!S.charAt(M-1).match(this.tokenRe)),x||(x=!!S.charAt(M).match(this.tokenRe)),x)var L=this.tokenRe;else if(/^\s+$/.test(S.slice(M-1,M+1)))var L=/\s/;else var L=this.nonTokenRe;var R=M;if(R>0){do R--;while(R>=0&&S.charAt(R).match(L));R++}for(var A=M;A<S.length&&S.charAt(A).match(L);)A++;return new s(E,R,E,A)},b.prototype.getAWordRange=function(E,M){for(var S=this.getWordRange(E,M),x=this.getLine(S.end.row);x.charAt(S.end.column).match(/[ \t]/);)S.end.column+=1;return S},b.prototype.setNewLineMode=function(E){this.doc.setNewLineMode(E)},b.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},b.prototype.setUseWorker=function(E){this.setOption("useWorker",E)},b.prototype.getUseWorker=function(){return this.$useWorker},b.prototype.onReloadTokenizer=function(E){var M=E.data;this.bgTokenizer.start(M.first),this._signal("tokenizerUpdate",E)},b.prototype.setMode=function(E,M){if(E&&typeof E=="object"){if(E.getTokenizer)return this.$onChangeMode(E);var S=E,x=S.path}else x=E||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[x]&&!S){this.$onChangeMode(this.$modes[x]),M&&M();return}this.$modeId=x,r.loadModule(["mode",x],function(L){if(this.$modeId!==x)return M&&M();this.$modes[x]&&!S?this.$onChangeMode(this.$modes[x]):L&&L.Mode&&(L=new L.Mode(S),S||(this.$modes[x]=L,L.$id=x),this.$onChangeMode(L)),M&&M()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},b.prototype.$onChangeMode=function(E,M){if(M||(this.$modeId=E.$id),this.$mode!==E){var S=this.$mode;this.$mode=E,this.$stopWorker(),this.$useWorker&&this.$startWorker();var x=E.getTokenizer();if(x.on!==void 0){var L=this.onReloadTokenizer.bind(this);x.on("update",L)}this.bgTokenizer.setTokenizer(x),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=E.tokenRe,this.nonTokenRe=E.nonTokenRe,M||(E.attachToSession&&E.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(E.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:S,mode:E}))}},b.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},b.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(E){r.warn("Could not load worker",E),this.$worker=null}},b.prototype.getMode=function(){return this.$mode},b.prototype.setScrollTop=function(E){this.$scrollTop===E||isNaN(E)||(this.$scrollTop=E,this._signal("changeScrollTop",E))},b.prototype.getScrollTop=function(){return this.$scrollTop},b.prototype.setScrollLeft=function(E){this.$scrollLeft===E||isNaN(E)||(this.$scrollLeft=E,this._signal("changeScrollLeft",E))},b.prototype.getScrollLeft=function(){return this.$scrollLeft},b.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},b.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var E=0;return this.lineWidgets.forEach(function(M){M&&M.screenWidth>E&&(E=M.screenWidth)}),this.lineWidgetWidth=E},b.prototype.$computeWidth=function(E){if(this.$modified||E){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var M=this.doc.getAllLines(),S=this.$rowLengthCache,x=0,L=0,R=this.$foldData[L],A=R?R.start.row:1/0,I=M.length,$=0;$<I;$++){if($>A){if($=R.end.row+1,$>=I)break;R=this.$foldData[L++],A=R?R.start.row:1/0}S[$]==null&&(S[$]=this.$getStringScreenWidth(M[$])[0]),S[$]>x&&(x=S[$])}this.screenWidth=x}},b.prototype.getLine=function(E){return this.doc.getLine(E)},b.prototype.getLines=function(E,M){return this.doc.getLines(E,M)},b.prototype.getLength=function(){return this.doc.getLength()},b.prototype.getTextRange=function(E){return this.doc.getTextRange(E||this.selection.getRange())},b.prototype.insert=function(E,M){return this.doc.insert(E,M)},b.prototype.remove=function(E){return this.doc.remove(E)},b.prototype.removeFullLines=function(E,M){return this.doc.removeFullLines(E,M)},b.prototype.undoChanges=function(E,M){if(E.length){this.$fromUndo=!0;for(var S=E.length-1;S!=-1;S--){var x=E[S];x.action=="insert"||x.action=="remove"?this.doc.revertDelta(x):x.folds&&this.addFolds(x.folds)}!M&&this.$undoSelect&&(E.selectionBefore?this.selection.fromJSON(E.selectionBefore):this.selection.setRange(this.$getUndoSelection(E,!0))),this.$fromUndo=!1}},b.prototype.redoChanges=function(E,M){if(E.length){this.$fromUndo=!0;for(var S=0;S<E.length;S++){var x=E[S];(x.action=="insert"||x.action=="remove")&&this.doc.$safeApplyDelta(x)}!M&&this.$undoSelect&&(E.selectionAfter?this.selection.fromJSON(E.selectionAfter):this.selection.setRange(this.$getUndoSelection(E,!1))),this.$fromUndo=!1}},b.prototype.setUndoSelect=function(E){this.$undoSelect=E},b.prototype.$getUndoSelection=function(E,M){function S(I){return M?I.action!=="insert":I.action==="insert"}for(var x,L,R=0;R<E.length;R++){var A=E[R];if(A.start){if(!x){S(A)?x=s.fromPoints(A.start,A.end):x=s.fromPoints(A.start,A.start);continue}S(A)?(L=A.start,x.compare(L.row,L.column)==-1&&x.setStart(L),L=A.end,x.compare(L.row,L.column)==1&&x.setEnd(L)):(L=A.start,x.compare(L.row,L.column)==-1&&(x=s.fromPoints(A.start,A.start)))}}return x},b.prototype.replace=function(E,M){return this.doc.replace(E,M)},b.prototype.moveText=function(E,M,S){var x=this.getTextRange(E),L=this.getFoldsInRange(E),R=s.fromPoints(M,M);if(!S){this.remove(E);var A=E.start.row-E.end.row,I=A?-E.end.column:E.start.column-E.end.column;I&&(R.start.row==E.end.row&&R.start.column>E.end.column&&(R.start.column+=I),R.end.row==E.end.row&&R.end.column>E.end.column&&(R.end.column+=I)),A&&R.start.row>=E.end.row&&(R.start.row+=A,R.end.row+=A)}if(R.end=this.insert(R.start,x),L.length){var $=E.start,H=R.start,A=H.row-$.row,I=H.column-$.column;this.addFolds(L.map(function(z){return z=z.clone(),z.start.row==$.row&&(z.start.column+=I),z.end.row==$.row&&(z.end.column+=I),z.start.row+=A,z.end.row+=A,z}))}return R},b.prototype.indentRows=function(E,M,S){S=S.replace(/\t/g,this.getTabString());for(var x=E;x<=M;x++)this.doc.insertInLine({row:x,column:0},S)},b.prototype.outdentRows=function(E){for(var M=E.collapseRows(),S=new s(0,0,0,0),x=this.getTabSize(),L=M.start.row;L<=M.end.row;++L){var R=this.getLine(L);S.start.row=L,S.end.row=L;for(var A=0;A<x&&R.charAt(A)==" ";++A);A<x&&R.charAt(A)=="	"?(S.start.column=A,S.end.column=A+1):(S.start.column=0,S.end.column=A),this.remove(S)}},b.prototype.$moveLines=function(E,M,S){if(E=this.getRowFoldStart(E),M=this.getRowFoldEnd(M),S<0){var x=this.getRowFoldStart(E+S);if(x<0)return 0;var L=x-E}else if(S>0){var x=this.getRowFoldEnd(M+S);if(x>this.doc.getLength()-1)return 0;var L=x-M}else{E=this.$clipRowToDocument(E),M=this.$clipRowToDocument(M);var L=M-E+1}var R=new s(E,0,M,Number.MAX_VALUE),A=this.getFoldsInRange(R).map(function($){return $=$.clone(),$.start.row+=L,$.end.row+=L,$}),I=S==0?this.doc.getLines(E,M):this.doc.removeFullLines(E,M);return this.doc.insertFullLines(E+L,I),A.length&&this.addFolds(A),L},b.prototype.moveLinesUp=function(E,M){return this.$moveLines(E,M,-1)},b.prototype.moveLinesDown=function(E,M){return this.$moveLines(E,M,1)},b.prototype.duplicateLines=function(E,M){return this.$moveLines(E,M,0)},b.prototype.$clipRowToDocument=function(E){return Math.max(0,Math.min(E,this.doc.getLength()-1))},b.prototype.$clipColumnToRow=function(E,M){return M<0?0:Math.min(this.doc.getLine(E).length,M)},b.prototype.$clipPositionToDocument=function(E,M){if(M=Math.max(0,M),E<0)E=0,M=0;else{var S=this.doc.getLength();E>=S?(E=S-1,M=this.doc.getLine(S-1).length):M=Math.min(this.doc.getLine(E).length,M)}return{row:E,column:M}},b.prototype.$clipRangeToDocument=function(E){E.start.row<0?(E.start.row=0,E.start.column=0):E.start.column=this.$clipColumnToRow(E.start.row,E.start.column);var M=this.doc.getLength()-1;return E.end.row>M?(E.end.row=M,E.end.column=this.doc.getLine(M).length):E.end.column=this.$clipColumnToRow(E.end.row,E.end.column),E},b.prototype.setUseWrapMode=function(E){if(E!=this.$useWrapMode){if(this.$useWrapMode=E,this.$modified=!0,this.$resetRowCache(0),E){var M=this.getLength();this.$wrapData=Array(M),this.$updateWrapData(0,M-1)}this._signal("changeWrapMode")}},b.prototype.getUseWrapMode=function(){return this.$useWrapMode},b.prototype.setWrapLimitRange=function(E,M){(this.$wrapLimitRange.min!==E||this.$wrapLimitRange.max!==M)&&(this.$wrapLimitRange={min:E,max:M},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},b.prototype.adjustWrapLimit=function(E,M){var S=this.$wrapLimitRange;S.max<0&&(S={min:M,max:M});var x=this.$constrainWrapLimit(E,S.min,S.max);return x!=this.$wrapLimit&&x>1?(this.$wrapLimit=x,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},b.prototype.$constrainWrapLimit=function(E,M,S){return M&&(E=Math.max(M,E)),S&&(E=Math.min(S,E)),E},b.prototype.getWrapLimit=function(){return this.$wrapLimit},b.prototype.setWrapLimit=function(E){this.setWrapLimitRange(E,E)},b.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},b.prototype.$updateInternalDataOnChange=function(E){var M=this.$useWrapMode,S=E.action,x=E.start,L=E.end,R=x.row,A=L.row,I=A-R,$=null;if(this.$updating=!0,I!=0)if(S==="remove"){this[M?"$wrapData":"$rowLengthCache"].splice(R,I);var H=this.$foldData;$=this.getFoldsInRange(E),this.removeFolds($);var P=this.getFoldLine(L.row),q=0;if(P){P.addRemoveChars(L.row,L.column,x.column-L.column),P.shiftRow(-I);var z=this.getFoldLine(R);z&&z!==P&&(z.merge(P),P=z),q=H.indexOf(P)+1}for(q;q<H.length;q++){var P=H[q];P.start.row>=L.row&&P.shiftRow(-I)}A=R}else{var N=Array(I);N.unshift(R,0);var Q=M?this.$wrapData:this.$rowLengthCache;Q.splice.apply(Q,N);var H=this.$foldData,P=this.getFoldLine(R),q=0;if(P){var O=P.range.compareInside(x.row,x.column);O==0?(P=P.split(x.row,x.column),P&&(P.shiftRow(I),P.addRemoveChars(A,0,L.column-x.column))):O==-1&&(P.addRemoveChars(R,0,L.column-x.column),P.shiftRow(I)),q=H.indexOf(P)+1}for(q;q<H.length;q++){var P=H[q];P.start.row>=R&&P.shiftRow(I)}}else{I=Math.abs(E.start.column-E.end.column),S==="remove"&&($=this.getFoldsInRange(E),this.removeFolds($),I=-I);var P=this.getFoldLine(R);P&&P.addRemoveChars(R,x.column,I)}return M&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,M?this.$updateWrapData(R,A):this.$updateRowLengthCache(R,A),$},b.prototype.$updateRowLengthCache=function(E,M){this.$rowLengthCache[E]=null,this.$rowLengthCache[M]=null},b.prototype.$updateWrapData=function(E,M){var S=this.doc.getAllLines(),x=this.getTabSize(),L=this.$wrapData,R=this.$wrapLimit,A,I,$=E;for(M=Math.min(M,S.length-1);$<=M;)I=this.getFoldLine($,I),I?(A=[],I.walk(function(H,P,q,z){var N;if(H!=null){N=this.$getDisplayTokens(H,A.length),N[0]=y;for(var Q=1;Q<N.length;Q++)N[Q]=C}else N=this.$getDisplayTokens(S[P].substring(z,q),A.length);A=A.concat(N)}.bind(this),I.end.row,S[I.end.row].length+1),L[I.start.row]=this.$computeWrapSplits(A,R,x),$=I.end.row+1):(A=this.$getDisplayTokens(S[$]),L[$]=this.$computeWrapSplits(A,R,x),$++)},b.prototype.$computeWrapSplits=function(E,M,S){if(E.length==0)return[];var x=[],L=E.length,R=0,A=0,I=this.$wrapAsCode,$=this.$indentedSoftWrap,H=M<=Math.max(2*S,8)||$===!1?0:Math.floor(M/2);function P(){var O=0;if(H===0)return O;if($)for(var W=0;W<E.length;W++){var U=E[W];if(U==D)O+=1;else if(U==g)O+=S;else{if(U==w)continue;break}}return I&&$!==!1&&(O+=S),Math.min(O,H)}function q(O){for(var W=O-R,U=R;U<O;U++){var k=E[U];(k===12||k===2)&&(W-=1)}x.length||(z=P(),x.indent=z),A+=W,x.push(A),R=O}for(var z=0;L-R>M-z;){var N=R+M-z;if(E[N-1]>=D&&E[N]>=D){q(N);continue}if(E[N]==y||E[N]==C){for(N;N!=R-1&&E[N]!=y;N--);if(N>R){q(N);continue}for(N=R+M,N;N<E.length&&E[N]==C;N++);if(N==E.length)break;q(N);continue}for(var Q=Math.max(N-(M-(M>>2)),R-1);N>Q&&E[N]<y;)N--;if(I){for(;N>Q&&E[N]<y;)N--;for(;N>Q&&E[N]==T;)N--}else for(;N>Q&&E[N]<D;)N--;if(N>Q){q(++N);continue}N=R+M,E[N]==m&&N--,q(N-z)}return x},b.prototype.$getDisplayTokens=function(E,M){var S=[],x;M=M||0;for(var L=0;L<E.length;L++){var R=E.charCodeAt(L);if(R==9){x=this.getScreenTabSize(S.length+M),S.push(g);for(var A=1;A<x;A++)S.push(w)}else R==32?S.push(D):R>39&&R<48||R>57&&R<64?S.push(T):R>=4352&&F(R)?S.push(v,m):S.push(v)}return S},b.prototype.$getStringScreenWidth=function(E,M,S){if(M==0)return[0,0];M==null&&(M=1/0),S=S||0;var x,L;for(L=0;L<E.length&&(x=E.charCodeAt(L),x==9?S+=this.getScreenTabSize(S):x>=4352&&F(x)?S+=2:S+=1,!(S>M));L++);return[S,L]},b.prototype.getRowLength=function(E){var M=1;return this.lineWidgets&&(M+=this.lineWidgets[E]&&this.lineWidgets[E].rowCount||0),!this.$useWrapMode||!this.$wrapData[E]?M:this.$wrapData[E].length+M},b.prototype.getRowLineCount=function(E){return!this.$useWrapMode||!this.$wrapData[E]?1:this.$wrapData[E].length+1},b.prototype.getRowWrapIndent=function(E){if(this.$useWrapMode){var M=this.screenToDocumentPosition(E,Number.MAX_VALUE),S=this.$wrapData[M.row];return S.length&&S[0]<M.column?S.indent:0}else return 0},b.prototype.getScreenLastRowColumn=function(E){var M=this.screenToDocumentPosition(E,Number.MAX_VALUE);return this.documentToScreenColumn(M.row,M.column)},b.prototype.getDocumentLastRowColumn=function(E,M){var S=this.documentToScreenRow(E,M);return this.getScreenLastRowColumn(S)},b.prototype.getDocumentLastRowColumnPosition=function(E,M){var S=this.documentToScreenRow(E,M);return this.screenToDocumentPosition(S,Number.MAX_VALUE/10)},b.prototype.getRowSplitData=function(E){if(this.$useWrapMode)return this.$wrapData[E]},b.prototype.getScreenTabSize=function(E){return this.$tabSize-(E%this.$tabSize|0)},b.prototype.screenToDocumentRow=function(E,M){return this.screenToDocumentPosition(E,M).row},b.prototype.screenToDocumentColumn=function(E,M){return this.screenToDocumentPosition(E,M).column},b.prototype.screenToDocumentPosition=function(E,M,S){if(E<0)return{row:0,column:0};var x,L=0,R=0,A,I=0,$=0,H=this.$screenRowCache,P=this.$getRowCacheIndex(H,E),q=H.length;if(q&&P>=0)var I=H[P],L=this.$docRowCache[P],z=E>H[q-1];else var z=!q;for(var N=this.getLength()-1,Q=this.getNextFoldLine(L),O=Q?Q.start.row:1/0;I<=E&&($=this.getRowLength(L),!(I+$>E||L>=N));)I+=$,L++,L>O&&(L=Q.end.row+1,Q=this.getNextFoldLine(L,Q),O=Q?Q.start.row:1/0),z&&(this.$docRowCache.push(L),this.$screenRowCache.push(I));if(Q&&Q.start.row<=L)x=this.getFoldDisplayLine(Q),L=Q.start.row;else{if(I+$<=E||L>N)return{row:N,column:this.getLine(N).length};x=this.getLine(L),Q=null}var W=0,U=Math.floor(E-I);if(this.$useWrapMode){var k=this.$wrapData[L];k&&(A=k[U],U>0&&k.length&&(W=k.indent,R=k[U-1]||k[k.length-1],x=x.substring(R)))}return S!==void 0&&this.$bidiHandler.isBidiRow(I+U,L,U)&&(M=this.$bidiHandler.offsetToCol(S)),R+=this.$getStringScreenWidth(x,M-W)[1],this.$useWrapMode&&R>=A&&(R=A-1),Q?Q.idxToPosition(R):{row:L,column:R}},b.prototype.documentToScreenPosition=function(E,M){if(typeof M>"u")var S=this.$clipPositionToDocument(E.row,E.column);else S=this.$clipPositionToDocument(E,M);E=S.row,M=S.column;var x=0,L=null,R=null;R=this.getFoldAt(E,M,1),R&&(E=R.start.row,M=R.start.column);var A,I=0,$=this.$docRowCache,H=this.$getRowCacheIndex($,E),P=$.length;if(P&&H>=0)var I=$[H],x=this.$screenRowCache[H],q=E>$[P-1];else var q=!P;for(var z=this.getNextFoldLine(I),N=z?z.start.row:1/0;I<E;){if(I>=N){if(A=z.end.row+1,A>E)break;z=this.getNextFoldLine(A,z),N=z?z.start.row:1/0}else A=I+1;x+=this.getRowLength(I),I=A,q&&(this.$docRowCache.push(I),this.$screenRowCache.push(x))}var Q="";z&&I>=N?(Q=this.getFoldDisplayLine(z,E,M),L=z.start.row):(Q=this.getLine(E).substring(0,M),L=E);var O=0;if(this.$useWrapMode){var W=this.$wrapData[L];if(W){for(var U=0;Q.length>=W[U];)x++,U++;Q=Q.substring(W[U-1]||0,Q.length),O=U>0?W.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(x+=this.lineWidgets[I].rowsAbove),{row:x,column:O+this.$getStringScreenWidth(Q)[0]}},b.prototype.documentToScreenColumn=function(E,M){return this.documentToScreenPosition(E,M).column},b.prototype.documentToScreenRow=function(E,M){return this.documentToScreenPosition(E,M).row},b.prototype.getScreenLength=function(){var E=0,M=null;if(this.$useWrapMode)for(var L=this.$wrapData.length,R=0,x=0,M=this.$foldData[x++],A=M?M.start.row:1/0;R<L;){var I=this.$wrapData[R];E+=I?I.length+1:1,R++,R>A&&(R=M.end.row+1,M=this.$foldData[x++],A=M?M.start.row:1/0)}else{E=this.getLength();for(var S=this.$foldData,x=0;x<S.length;x++)M=S[x],E-=M.end.row-M.start.row}return this.lineWidgets&&(E+=this.$getWidgetScreenLength()),E},b.prototype.$setFontMetrics=function(E){this.$enableVarChar&&(this.$getStringScreenWidth=function(M,S,x){if(S===0)return[0,0];S||(S=1/0),x=x||0;var L,R;for(R=0;R<M.length&&(L=M.charAt(R),L==="	"?x+=this.getScreenTabSize(x):x+=E.getCharacterWidth(L),!(x>S));R++);return[x,R]})},b.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},b}();_.$uid=0,_.prototype.$modes=r.$modes,_.prototype.getValue=_.prototype.toString,_.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},_.prototype.$overwrite=!1,_.prototype.$mode=null,_.prototype.$modeId=null,_.prototype.$scrollTop=0,_.prototype.$scrollLeft=0,_.prototype.$wrapLimit=80,_.prototype.$useWrapMode=!1,_.prototype.$wrapLimitRange={min:null,max:null},_.prototype.lineWidgets=null,_.prototype.isFullWidth=F,a.implement(_.prototype,l);var v=1,m=2,y=3,C=4,T=9,D=10,g=11,w=12;function F(b){return b<4352?!1:b>=4352&&b<=4447||b>=4515&&b<=4519||b>=4602&&b<=4607||b>=9001&&b<=9002||b>=11904&&b<=11929||b>=11931&&b<=12019||b>=12032&&b<=12245||b>=12272&&b<=12283||b>=12288&&b<=12350||b>=12353&&b<=12438||b>=12441&&b<=12543||b>=12549&&b<=12589||b>=12593&&b<=12686||b>=12688&&b<=12730||b>=12736&&b<=12771||b>=12784&&b<=12830||b>=12832&&b<=12871||b>=12880&&b<=13054||b>=13056&&b<=19903||b>=19968&&b<=42124||b>=42128&&b<=42182||b>=43360&&b<=43388||b>=44032&&b<=55203||b>=55216&&b<=55238||b>=55243&&b<=55291||b>=63744&&b<=64255||b>=65040&&b<=65049||b>=65072&&b<=65106||b>=65108&&b<=65126||b>=65128&&b<=65131||b>=65281&&b<=65376||b>=65504&&b<=65510}e("./edit_session/folding").Folding.call(_.prototype),e("./edit_session/bracket_match").BracketMatch.call(_.prototype),r.defineOptions(_.prototype,"session",{wrap:{set:function(b){if(!b||b=="off"?b=!1:b=="free"?b=!0:b=="printMargin"?b=-1:typeof b=="string"&&(b=parseInt(b,10)||!1),this.$wrap!=b)if(this.$wrap=b,!b)this.setUseWrapMode(!1);else{var E=typeof b=="number"?b:null;this.setWrapLimitRange(E,E),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(b){b=b=="auto"?this.$mode.type!="text":b!="text",b!=this.$wrapAsCode&&(this.$wrapAsCode=b,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(b){this.$useWorker=b,this.$stopWorker(),b&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(b){b=parseInt(b),b>0&&this.$tabSize!==b&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=b,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(b){this.setFoldStyle(b)},handlesSet:!0},overwrite:{set:function(b){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(b){this.doc.setNewLineMode(b)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(b){this.setMode(b)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=_});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var a=e("./lib/lang"),h=e("./lib/oop"),o=e("./range").Range,r=function(){function u(){this.$options={}}return u.prototype.set=function(i){return h.mixin(this.$options,i),this},u.prototype.getOptions=function(){return a.copyObject(this.$options)},u.prototype.setOptions=function(i){this.$options=i},u.prototype.find=function(i){var s=this.$options,f=this.$matchIterator(i,s);if(!f)return!1;var p=null;return f.forEach(function(d,c,_,v){return p=new o(d,c,_,v),c==v&&s.start&&s.start.start&&s.skipCurrent!=!1&&p.isEqual(s.start)?(p=null,!1):!0}),p},u.prototype.findAll=function(i){var s=this.$options;if(!s.needle)return[];this.$assembleRegExp(s);var f=s.range,p=f?i.getLines(f.start.row,f.end.row):i.doc.getAllLines(),d=[],c=s.re;if(s.$isMultiLine){var _=c.length,v=p.length-_,m;e:for(var y=c.offset||0;y<=v;y++){for(var C=0;C<_;C++)if(p[y+C].search(c[C])==-1)continue e;var T=p[y],D=p[y+_-1],g=T.length-T.match(c[0])[0].length,w=D.match(c[_-1])[0].length;m&&m.end.row===y&&m.end.column>g||(d.push(m=new o(y,g,y+_-1,w)),_>2&&(y=y+_-2))}}else for(var F=0;F<p.length;F++)for(var b=a.getMatchOffsets(p[F],c),C=0;C<b.length;C++){var E=b[C];d.push(new o(F,E.offset,F,E.offset+E.length))}if(f){for(var M=f.start.column,S=f.end.column,F=0,C=d.length-1;F<C&&d[F].start.column<M&&d[F].start.row==0;)F++;for(var x=f.end.row-f.start.row;F<C&&d[C].end.column>S&&d[C].end.row==x;)C--;for(d=d.slice(F,C+1),F=0,C=d.length;F<C;F++)d[F].start.row+=f.start.row,d[F].end.row+=f.start.row}return d},u.prototype.replace=function(i,s){var f=this.$options,p=this.$assembleRegExp(f);if(f.$isMultiLine)return s;if(p){var d=p.exec(i);if(!d||d[0].length!=i.length)return null;if(s=i.replace(p,s),f.preserveCase){s=s.split("");for(var c=Math.min(i.length,i.length);c--;){var _=i[c];_&&_.toLowerCase()!=_?s[c]=s[c].toUpperCase():s[c]=s[c].toLowerCase()}s=s.join("")}return s}},u.prototype.$assembleRegExp=function(i,s){if(i.needle instanceof RegExp)return i.re=i.needle;var f=i.needle;if(!i.needle)return i.re=!1;i.regExp||(f=a.escapeRegExp(f));var p=i.caseSensitive?"gm":"gmi";try{new RegExp(f,"u"),i.$supportsUnicodeFlag=!0,p+="u"}catch{i.$supportsUnicodeFlag=!1}if(i.wholeWord&&(f=l(f,i)),i.$isMultiLine=!s&&/[\n\r]/.test(f),i.$isMultiLine)return i.re=this.$assembleMultilineRegExp(f,p);try{var d=new RegExp(f,p)}catch{d=!1}return i.re=d},u.prototype.$assembleMultilineRegExp=function(i,s){for(var f=i.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),p=[],d=0;d<f.length;d++)try{p.push(new RegExp(f[d],s))}catch{return!1}return p},u.prototype.$matchIterator=function(i,s){var f=this.$assembleRegExp(s);if(!f)return!1;var p=s.backwards==!0,d=s.skipCurrent!=!1,c=f.unicode,_=s.range,v=s.start;v||(v=_?_[p?"end":"start"]:i.selection.getRange()),v.start&&(v=v[d!=p?"end":"start"]);var m=_?_.start.row:0,y=_?_.end.row:i.getLength()-1;if(p)var C=function(g){var w=v.row;if(!D(w,v.column,g)){for(w--;w>=m;w--)if(D(w,Number.MAX_VALUE,g))return;if(s.wrap!=!1){for(w=y,m=v.row;w>=m;w--)if(D(w,Number.MAX_VALUE,g))return}}};else var C=function(w){var F=v.row;if(!D(F,v.column,w)){for(F=F+1;F<=y;F++)if(D(F,0,w))return;if(s.wrap!=!1){for(F=m,y=v.row;F<=y;F++)if(D(F,0,w))return}}};if(s.$isMultiLine)var T=f.length,D=function(g,w,F){var b=p?g-T+1:g;if(!(b<0||b+T>i.getLength())){var E=i.getLine(b),M=E.search(f[0]);if(!(!p&&M<w||M===-1)){for(var S=1;S<T;S++)if(E=i.getLine(b+S),E.search(f[S])==-1)return;var x=E.match(f[T-1])[0].length;if(!(p&&x>w)&&F(b,M,b+T-1,x))return!0}}};else if(p)var D=function(w,F,b){var E=i.getLine(w),M=[],S,x=0;for(f.lastIndex=0;S=f.exec(E);){var L=S[0].length;if(x=S.index,!L){if(x>=E.length)break;f.lastIndex=x+=a.skipEmptyMatch(E,x,c)}if(S.index+L>F)break;M.push(S.index,L)}for(var R=M.length-1;R>=0;R-=2){var A=M[R-1],L=M[R];if(b(w,A,w,A+L))return!0}};else var D=function(w,F,b){var E=i.getLine(w),M,S;for(f.lastIndex=F;S=f.exec(E);){var x=S[0].length;if(M=S.index,b(w,M,w,M+x))return!0;if(!x&&(f.lastIndex=M+=a.skipEmptyMatch(E,M,c),M>=E.length))return!1}};return{forEach:C}},u}();function l(u,i){var s=a.supportsLookbehind();function f(_,v){v===void 0&&(v=!0);var m=s&&i.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return m.test(_)||i.regExp?s&&i.$supportsUnicodeFlag?v?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var p=Array.from(u),d=p[0],c=p[p.length-1];return f(d)+u+f(c,!1)}t.Search=r});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var s=function(f,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var _ in c)Object.prototype.hasOwnProperty.call(c,_)&&(d[_]=c[_])},s(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");s(f,p);function d(){this.constructor=f}f.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),h=e("../lib/keys"),o=e("../lib/useragent"),r=h.KEY_MODS,l=function(){function s(f,p){this.$init(f,p,!1)}return s.prototype.$init=function(f,p,d){this.platform=p||(o.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(f),this.$singleCommand=d},s.prototype.addCommand=function(f){this.commands[f.name]&&this.removeCommand(f),this.commands[f.name]=f,f.bindKey&&this._buildKeyHash(f)},s.prototype.removeCommand=function(f,p){var d=f&&(typeof f=="string"?f:f.name);f=this.commands[d],p||delete this.commands[d];var c=this.commandKeyBinding;for(var _ in c){var v=c[_];if(v==f)delete c[_];else if(Array.isArray(v)){var m=v.indexOf(f);m!=-1&&(v.splice(m,1),v.length==1&&(c[_]=v[0]))}}},s.prototype.bindKey=function(f,p,d){if(typeof f=="object"&&f&&(d==null&&(d=f.position),f=f[this.platform]),!!f){if(typeof p=="function")return this.addCommand({exec:p,bindKey:f,name:p.name||f});f.split("|").forEach(function(c){var _="";if(c.indexOf(" ")!=-1){var v=c.split(/\s+/);c=v.pop(),v.forEach(function(C){var T=this.parseKeys(C),D=r[T.hashId]+T.key;_+=(_?" ":"")+D,this._addCommandToBinding(_,"chainKeys")},this),_+=" "}var m=this.parseKeys(c),y=r[m.hashId]+m.key;this._addCommandToBinding(_+y,p,d)},this)}},s.prototype._addCommandToBinding=function(f,p,d){var c=this.commandKeyBinding,_;if(!p)delete c[f];else if(!c[f]||this.$singleCommand)c[f]=p;else{Array.isArray(c[f])?(_=c[f].indexOf(p))!=-1&&c[f].splice(_,1):c[f]=[c[f]],typeof d!="number"&&(d=u(p));var v=c[f];for(_=0;_<v.length;_++){var m=v[_],y=u(m);if(y>d)break}v.splice(_,0,p)}},s.prototype.addCommands=function(f){f&&Object.keys(f).forEach(function(p){var d=f[p];if(d){if(typeof d=="string")return this.bindKey(d,p);typeof d=="function"&&(d={exec:d}),typeof d=="object"&&(d.name||(d.name=p),this.addCommand(d))}},this)},s.prototype.removeCommands=function(f){Object.keys(f).forEach(function(p){this.removeCommand(f[p])},this)},s.prototype.bindKeys=function(f){Object.keys(f).forEach(function(p){this.bindKey(p,f[p])},this)},s.prototype._buildKeyHash=function(f){this.bindKey(f.bindKey,f)},s.prototype.parseKeys=function(f){var p=f.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),d=p.pop(),c=h[d];if(h.FUNCTION_KEYS[c])d=h.FUNCTION_KEYS[c].toLowerCase();else if(p.length){if(p.length==1&&p[0]=="shift")return{key:d.toUpperCase(),hashId:-1}}else return{key:d,hashId:-1};for(var _=0,v=p.length;v--;){var m=h.KEY_MODS[p[v]];if(m==null)return typeof console<"u"&&console.error("invalid modifier "+p[v]+" in "+f),!1;_|=m}return{key:d,hashId:_}},s.prototype.findKeyCommand=function(f,p){var d=r[f]+p;return this.commandKeyBinding[d]},s.prototype.handleKeyboard=function(f,p,d,c){if(!(c<0)){var _=r[p]+d,v=this.commandKeyBinding[_];return f.$keyChain&&(f.$keyChain+=" "+_,v=this.commandKeyBinding[f.$keyChain]||v),v&&(v=="chainKeys"||v[v.length-1]=="chainKeys")?(f.$keyChain=f.$keyChain||_,{command:"null"}):(f.$keyChain&&((!p||p==4)&&d.length==1?f.$keyChain=f.$keyChain.slice(0,-_.length-1):(p==-1||c>0)&&(f.$keyChain="")),{command:v})}},s.prototype.getStatusText=function(f,p){return p.$keyChain||""},s}();function u(s){return typeof s=="object"&&s.bindKey&&s.bindKey.position||(s.isDefault?-100:0)}var i=function(s){a(f,s);function f(p,d){var c=s.call(this,p,d)||this;return c.$singleCommand=!0,c}return f}(l);i.call=function(s,f,p){l.prototype.$init.call(s,f,p,!0)},l.call=function(s,f,p){l.prototype.$init.call(s,f,p,!1)},t.HashHandler=i,t.MultiHashHandler=l});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var u=function(i,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&(f[d]=p[d])},u(i,s)};return function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");u(i,s);function f(){this.constructor=i}i.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),h=e("../lib/oop"),o=e("../keyboard/hash_handler").MultiHashHandler,r=e("../lib/event_emitter").EventEmitter,l=function(u){a(i,u);function i(s,f){var p=u.call(this,f,s)||this;return p.byName=p.commands,p.setDefaultHandler("exec",function(d){return d.args?d.command.exec(d.editor,d.args,d.event,!1):d.command.exec(d.editor,{},d.event,!0)}),p}return i.prototype.exec=function(s,f,p){if(Array.isArray(s)){for(var d=s.length;d--;)if(this.exec(s[d],f,p))return!0;return!1}if(typeof s=="string"&&(s=this.commands[s]),!s||f&&f.$readOnly&&!s.readOnly||this.$checkCommandState!=!1&&s.isAvailable&&!s.isAvailable(f))return!1;var c={editor:f,command:s,args:p};return c.returnValue=this._emit("exec",c),this._signal("afterExec",c),c.returnValue!==!1},i.prototype.toggleRecording=function(s){if(!this.$inReplay)return s&&s._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(f){this.macro.push([f.command,f.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},i.prototype.replay=function(s){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(s);try{this.$inReplay=!0,this.macro.forEach(function(f){typeof f=="string"?this.exec(f,s):this.exec(f[0],s,f[1])},this)}finally{this.$inReplay=!1}}},i.prototype.trimMacro=function(s){return s.map(function(f){return typeof f[0]!="string"&&(f[0]=f[0].name),f[1]||(f=f[0]),f})},i}(o);h.implement(l.prototype,r),t.CommandManager=l});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var a=e("../lib/lang"),h=e("../config"),o=e("../range").Range;function r(u,i){return{win:u,mac:i}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:r("Ctrl-,","Command-,"),exec:function(u){h.loadModule("ace/ext/settings_menu",function(i){i.init(u),u.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:r("Alt-E","F4"),exec:function(u){h.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(u,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:r("Alt-Shift-E","Shift-F4"),exec:function(u){h.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(u,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:r("Ctrl-A","Command-A"),exec:function(u){u.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:r(null,"Ctrl-L"),exec:function(u){u.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:r("Ctrl-L","Command-L"),exec:function(u,i){typeof i=="number"&&!isNaN(i)&&u.gotoLine(i),u.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:r("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(u){u.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:r("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(u){u.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:r("F2","F2"),exec:function(u){u.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:r("Alt-F2","Alt-F2"),exec:function(u){u.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:r(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:r(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:r("Alt-0","Command-Option-0"),exec:function(u){u.session.foldAll(),u.session.unfold(u.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:r("Alt-Shift-0","Command-Option-Shift-0"),exec:function(u){u.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:r("Ctrl-K","Command-G"),exec:function(u){u.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:r("Ctrl-Shift-K","Command-Shift-G"),exec:function(u){u.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:r("Alt-K","Ctrl-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:r("Alt-Shift-K","Ctrl-Shift-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:r("Ctrl-F","Command-F"),exec:function(u){h.loadModule("ace/ext/searchbox",function(i){i.Search(u)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(u){u.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:r("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(u){u.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:r("Ctrl-Home","Command-Home|Command-Up"),exec:function(u){u.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:r("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(u){u.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:r("Up","Up|Ctrl-P"),exec:function(u,i){u.navigateUp(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:r("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(u){u.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:r("Ctrl-End","Command-End|Command-Down"),exec:function(u){u.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:r("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(u){u.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:r("Down","Down|Ctrl-N"),exec:function(u,i){u.navigateDown(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:r("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(u){u.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:r("Ctrl-Left","Option-Left"),exec:function(u){u.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:r("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:r("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(u){u.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:r("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(u){u.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:r("Left","Left|Ctrl-B"),exec:function(u,i){u.navigateLeft(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:r("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(u){u.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:r("Ctrl-Right","Option-Right"),exec:function(u){u.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:r("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:r("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(u){u.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:r("Shift-Right","Shift-Right"),exec:function(u){u.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:r("Right","Right|Ctrl-F"),exec:function(u,i){u.navigateRight(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(u){u.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:r(null,"Option-PageDown"),exec:function(u){u.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:r("PageDown","PageDown|Ctrl-V"),exec:function(u){u.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(u){u.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:r(null,"Option-PageUp"),exec:function(u){u.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(u){u.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:r("Ctrl-Up",null),exec:function(u){u.renderer.scrollBy(0,-2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:r("Ctrl-Down",null),exec:function(u){u.renderer.scrollBy(0,2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:r("Ctrl-Alt-E","Command-Option-E"),exec:function(u){u.commands.toggleRecording(u)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:r("Ctrl-Shift-E","Command-Shift-E"),exec:function(u){u.commands.replay(u)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:r("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(u){u.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:r("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(u){u.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:r("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(u){u.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:r(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(u){},readOnly:!0},{name:"cut",description:"Cut",exec:function(u){var i=u.$copyWithEmptySelection&&u.selection.isEmpty(),s=i?u.selection.getLineRange():u.selection.getRange();u._emit("cut",s),s.isEmpty()||u.session.remove(s),u.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(u,i){u.$handlePaste(i)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:r("Ctrl-D","Command-D"),exec:function(u){u.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:r("Ctrl-Shift-D","Command-Shift-D"),exec:function(u){u.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:r("Ctrl-Alt-S","Command-Alt-S"),exec:function(u){u.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:r("Ctrl-/","Command-/"),exec:function(u){u.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:r("Ctrl-Shift-/","Command-Shift-/"),exec:function(u){u.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:r("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(u){u.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:r("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(u){u.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:r("Ctrl-H","Command-Option-F"),exec:function(u){h.loadModule("ace/ext/searchbox",function(i){i.Search(u,!0)})}},{name:"undo",description:"Undo",bindKey:r("Ctrl-Z","Command-Z"),exec:function(u){u.undo()}},{name:"redo",description:"Redo",bindKey:r("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(u){u.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:r("Alt-Shift-Up","Command-Option-Up"),exec:function(u){u.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:r("Alt-Up","Option-Up"),exec:function(u){u.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:r("Alt-Shift-Down","Command-Option-Down"),exec:function(u){u.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:r("Alt-Down","Option-Down"),exec:function(u){u.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:r("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(u){u.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:r("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(u){u.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:r("Shift-Delete",null),exec:function(u){if(u.selection.isEmpty())u.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:r("Alt-Backspace","Command-Backspace"),exec:function(u){u.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:r("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(u){u.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:r("Ctrl-Shift-Backspace",null),exec:function(u){var i=u.selection.getRange();i.start.column=0,u.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:r("Ctrl-Shift-Delete",null),exec:function(u){var i=u.selection.getRange();i.end.column=Number.MAX_VALUE,u.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:r("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(u){u.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:r("Ctrl-Delete","Alt-Delete"),exec:function(u){u.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:r("Shift-Tab","Shift-Tab"),exec:function(u){u.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:r("Tab","Tab"),exec:function(u){u.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:r("Ctrl-[","Ctrl-["),exec:function(u){u.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:r("Ctrl-]","Ctrl-]"),exec:function(u){u.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(u,i){u.insert(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(u,i){u.insert(a.stringRepeat(i.text||"",i.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:r(null,"Ctrl-O"),exec:function(u){u.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:r("Alt-Shift-X","Ctrl-T"),exec:function(u){u.transposeLetters()},multiSelectAction:function(u){u.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:r("Ctrl-U","Ctrl-U"),exec:function(u){u.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:r("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(u){u.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:r(null,null),exec:function(u){u.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:r("Ctrl-Shift-L","Command-Shift-L"),exec:function(u){var i=u.selection.getRange();i.start.column=i.end.column=0,i.end.row++,u.selection.setRange(i,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:r("Ctrl+F3","F3"),exec:function(u){u.openLink()}},{name:"joinlines",description:"Join lines",bindKey:r(null,null),exec:function(u){for(var i=u.selection.isBackwards(),s=i?u.selection.getSelectionLead():u.selection.getSelectionAnchor(),f=i?u.selection.getSelectionAnchor():u.selection.getSelectionLead(),p=u.session.doc.getLine(s.row).length,d=u.session.doc.getTextRange(u.selection.getRange()),c=d.replace(/\n\s*/," ").length,_=u.session.doc.getLine(s.row),v=s.row+1;v<=f.row+1;v++){var m=a.stringTrimLeft(a.stringTrimRight(u.session.doc.getLine(v)));m.length!==0&&(m=" "+m),_+=m}f.row+1<u.session.doc.getLength()-1&&(_+=u.session.doc.getNewLineCharacter()),u.clearSelection(),u.session.doc.replace(new o(s.row,0,f.row+2,0),_),c>0?(u.selection.moveCursorTo(s.row,s.column),u.selection.selectTo(s.row,s.column+c)):(p=u.session.doc.getLine(s.row).length>p?p+1:p,u.selection.moveCursorTo(s.row,p))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:r(null,null),exec:function(u){var i=u.session.doc.getLength()-1,s=u.session.doc.getLine(i).length,f=u.selection.rangeList.ranges,p=[];f.length<1&&(f=[u.selection.getRange()]);for(var d=0;d<f.length;d++)d==f.length-1&&(f[d].end.row===i&&f[d].end.column===s||p.push(new o(f[d].end.row,f[d].end.column,i,s))),d===0?f[d].start.row===0&&f[d].start.column===0||p.push(new o(0,0,f[d].start.row,f[d].start.column)):p.push(new o(f[d-1].end.row,f[d-1].end.column,f[d].start.row,f[d].start.column));u.exitMultiSelectMode(),u.clearSelection();for(var d=0;d<p.length;d++)u.selection.addRange(p[d],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(u){u.selection.clearSelection(),u.navigateLineEnd(),u.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(u){u.selection.clearSelection();var i=u.getCursorPosition();u.selection.moveTo(i.row-1,Number.MAX_VALUE),u.insert(`
`),i.row===0&&u.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(u){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),u.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:r("F1","F1"),exec:function(u){u.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:r(null,null),exec:function(u){u.prompt({$type:"modes"})},readOnly:!0}];for(var l=1;l<9;l++)t.commands.push({name:"foldToLevel"+l,description:"Fold To Level "+l,level:l,exec:function(u){u.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("./lib/dom"),h=function(){function o(r){this.session=r,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return o.prototype.getRowLength=function(r){var l;return this.lineWidgets?l=this.lineWidgets[r]&&this.lineWidgets[r].rowCount||0:l=0,!this.$useWrapMode||!this.$wrapData[r]?1+l:this.$wrapData[r].length+1+l},o.prototype.$getWidgetScreenLength=function(){var r=0;return this.lineWidgets.forEach(function(l){l&&l.rowCount&&!l.hidden&&(r+=l.rowCount)}),r},o.prototype.$onChangeEditor=function(r){this.attach(r.editor)},o.prototype.attach=function(r){r&&r.widgetManager&&r.widgetManager!=this&&r.widgetManager.detach(),this.editor!=r&&(this.detach(),this.editor=r,r&&(r.widgetManager=this,r.renderer.on("beforeRender",this.measureWidgets),r.renderer.on("afterRender",this.renderWidgets)))},o.prototype.detach=function(r){var l=this.editor;if(l){this.editor=null,l.widgetManager=null,l.renderer.off("beforeRender",this.measureWidgets),l.renderer.off("afterRender",this.renderWidgets);var u=this.session.lineWidgets;u&&u.forEach(function(i){i&&i.el&&i.el.parentNode&&(i._inDocument=!1,i.el.parentNode.removeChild(i.el))})}},o.prototype.updateOnFold=function(r,l){var u=l.lineWidgets;if(!(!u||!r.action)){for(var i=r.data,s=i.start.row,f=i.end.row,p=r.action=="add",d=s+1;d<f;d++)u[d]&&(u[d].hidden=p);u[f]&&(p?u[s]?u[f].hidden=p:u[s]=u[f]:(u[s]==u[f]&&(u[s]=void 0),u[f].hidden=p))}},o.prototype.updateOnChange=function(r){var l=this.session.lineWidgets;if(l){var u=r.start.row,i=r.end.row-u;if(i!==0)if(r.action=="remove"){var s=l.splice(u+1,i);!l[u]&&s[s.length-1]&&(l[u]=s.pop()),s.forEach(function(p){p&&this.removeLineWidget(p)},this),this.$updateRows()}else{var f=new Array(i);l[u]&&l[u].column!=null&&r.start.column>l[u].column&&u++,f.unshift(u,0),l.splice.apply(l,f),this.$updateRows()}}},o.prototype.$updateRows=function(){var r=this.session.lineWidgets;if(r){var l=!0;r.forEach(function(u,i){if(u)for(l=!1,u.row=i;u.$oldWidget;)u.$oldWidget.row=i,u=u.$oldWidget}),l&&(this.session.lineWidgets=null)}},o.prototype.$registerLineWidget=function(r){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var l=this.session.lineWidgets[r.row];return l&&(r.$oldWidget=l,l.el&&l.el.parentNode&&(l.el.parentNode.removeChild(l.el),l._inDocument=!1)),this.session.lineWidgets[r.row]=r,r},o.prototype.addLineWidget=function(r){if(this.$registerLineWidget(r),r.session=this.session,!this.editor)return r;var l=this.editor.renderer;r.html&&!r.el&&(r.el=a.createElement("div"),r.el.innerHTML=r.html),r.text&&!r.el&&(r.el=a.createElement("div"),r.el.textContent=r.text),r.el&&(a.addCssClass(r.el,"ace_lineWidgetContainer"),r.className&&a.addCssClass(r.el,r.className),r.el.style.position="absolute",r.el.style.zIndex="5",l.container.appendChild(r.el),r._inDocument=!0,r.coverGutter||(r.el.style.zIndex="3"),r.pixelHeight==null&&(r.pixelHeight=r.el.offsetHeight)),r.rowCount==null&&(r.rowCount=r.pixelHeight/l.layerConfig.lineHeight);var u=this.session.getFoldAt(r.row,0);if(r.$fold=u,u){var i=this.session.lineWidgets;r.row==u.end.row&&!i[u.start.row]?i[u.start.row]=r:r.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:r.row}}}),this.$updateRows(),this.renderWidgets(null,l),this.onWidgetChanged(r),r},o.prototype.removeLineWidget=function(r){if(r._inDocument=!1,r.session=null,r.el&&r.el.parentNode&&r.el.parentNode.removeChild(r.el),r.editor&&r.editor.destroy)try{r.editor.destroy()}catch{}if(this.session.lineWidgets){var l=this.session.lineWidgets[r.row];if(l==r)this.session.lineWidgets[r.row]=r.$oldWidget,r.$oldWidget&&this.onWidgetChanged(r.$oldWidget);else for(;l;){if(l.$oldWidget==r){l.$oldWidget=r.$oldWidget;break}l=l.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:r.row}}}),this.$updateRows()},o.prototype.getWidgetsAtRow=function(r){for(var l=this.session.lineWidgets,u=l&&l[r],i=[];u;)i.push(u),u=u.$oldWidget;return i},o.prototype.onWidgetChanged=function(r){this.session._changedWidgets.push(r),this.editor&&this.editor.renderer.updateFull()},o.prototype.measureWidgets=function(r,l){var u=this.session._changedWidgets,i=l.layerConfig;if(!(!u||!u.length)){for(var s=1/0,f=0;f<u.length;f++){var p=u[f];if(!(!p||!p.el)&&p.session==this.session){if(!p._inDocument){if(this.session.lineWidgets[p.row]!=p)continue;p._inDocument=!0,l.container.appendChild(p.el)}p.h=p.el.offsetHeight,p.fixedWidth||(p.w=p.el.offsetWidth,p.screenWidth=Math.ceil(p.w/i.characterWidth));var d=p.h/i.lineHeight;p.coverLine&&(d-=this.session.getRowLineCount(p.row),d<0&&(d=0)),p.rowCount!=d&&(p.rowCount=d,p.row<s&&(s=p.row))}}s!=1/0&&(this.session._emit("changeFold",{data:{start:{row:s}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},o.prototype.renderWidgets=function(r,l){var u=l.layerConfig,i=this.session.lineWidgets;if(i){for(var s=Math.min(this.firstRow,u.firstRow),f=Math.max(this.lastRow,u.lastRow,i.length);s>0&&!i[s];)s--;this.firstRow=u.firstRow,this.lastRow=u.lastRow,l.$cursorLayer.config=u;for(var p=s;p<=f;p++){var d=i[p];if(!(!d||!d.el)){if(d.hidden){d.el.style.top=-100-(d.pixelHeight||0)+"px";continue}d._inDocument||(d._inDocument=!0,l.container.appendChild(d.el));var c=l.$cursorLayer.getPixelPosition({row:p,column:0},!0).top;d.coverLine||(c+=u.lineHeight*this.session.getRowLineCount(d.row)),d.el.style.top=c-u.offset+"px";var _=d.coverGutter?0:l.gutterWidth;d.fixedWidth||(_-=l.scrollLeft),d.el.style.left=_+"px",d.fullWidth&&d.screenWidth&&(d.el.style.minWidth=u.width+2*u.padding+"px"),d.fixedWidth?d.el.style.right=l.scrollBar.getWidth()+"px":d.el.style.right=""}}}},o}();t.LineWidgets=h});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,n){"use strict";var a=e("../lib/keys"),h=e("../mouse/default_gutter_handler").GutterTooltip,o=function(){function l(u){this.editor=u,this.gutterLayer=u.renderer.$gutterLayer,this.element=u.renderer.$gutter,this.lines=u.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new h(this.editor)}return l.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},l.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},l.prototype.$onGutterKeyDown=function(u){if(this.annotationTooltip.isOpen){u.preventDefault(),u.keyCode===a.escape&&this.annotationTooltip.hideTooltip();return}if(u.target===this.element){if(u.keyCode!=a.enter)return;u.preventDefault();var i=this.editor.getCursorPosition().row;this.editor.isRowVisible(i)||this.editor.scrollToLine(i,!0,!0),setTimeout(function(){var s=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),f=this.$findNearestFoldWidget(s),p=this.$findNearestAnnotation(s);if(!(f===null&&p===null)){if(f===null&&p!==null){this.activeRowIndex=p,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(f!==null&&p===null){this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(p-s)<Math.abs(f-s)){this.activeRowIndex=p,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(u),setTimeout(function(){this.editor._signal("gutterkeydown",new r(u,this))}.bind(this),10)},l.prototype.$handleGutterKeyboardInteraction=function(u){if(u.keyCode===a.tab){u.preventDefault();return}if(u.keyCode===a.escape){u.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(u.keyCode===a.up){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(u.keyCode===a.down){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(u.keyCode===a.left){u.preventDefault(),this.$switchLane("annotation");return}if(u.keyCode===a.right){u.preventDefault(),this.$switchLane("fold");return}if(u.keyCode===a.enter||u.keyCode===a.space){switch(u.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var i=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),u),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==i&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(i),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var s=this.lines.cells[this.activeRowIndex].element.childNodes[2],f=s.getBoundingClientRect(),p=this.annotationTooltip.getElement().style;p.left=f.right+"px",p.top=f.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},l.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},l.prototype.$isFoldWidgetVisible=function(u){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),s=this.$getFoldWidget(u).style.display!=="none";return i&&s},l.prototype.$isAnnotationVisible=function(u){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),s=this.$getAnnotation(u).style.display!=="none";return i&&s},l.prototype.$getFoldWidget=function(u){var i=this.lines.get(u),s=i.element;return s.childNodes[1]},l.prototype.$getAnnotation=function(u){var i=this.lines.get(u),s=i.element;return s.childNodes[2]},l.prototype.$findNearestFoldWidget=function(u){if(this.$isFoldWidgetVisible(u))return u;for(var i=0;u-i>0||u+i<this.lines.getLength()-1;){if(i++,u-i>=0&&this.$isFoldWidgetVisible(u-i))return u-i;if(u+i<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(u+i))return u+i}return null},l.prototype.$findNearestAnnotation=function(u){if(this.$isAnnotationVisible(u))return u;for(var i=0;u-i>0||u+i<this.lines.getLength()-1;){if(i++,u-i>=0&&this.$isAnnotationVisible(u-i))return u-i;if(u+i<=this.lines.getLength()-1&&this.$isAnnotationVisible(u+i))return u+i}return null},l.prototype.$focusFoldWidget=function(u){if(u!=null){var i=this.$getFoldWidget(u);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},l.prototype.$focusAnnotation=function(u){if(u!=null){var i=this.$getAnnotation(u);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},l.prototype.$blurFoldWidget=function(u){var i=this.$getFoldWidget(u);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},l.prototype.$blurAnnotation=function(u){var i=this.$getAnnotation(u);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},l.prototype.$moveFoldWidgetUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},l.prototype.$moveFoldWidgetDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},l.prototype.$moveAnnotationUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},l.prototype.$moveAnnotationDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},l.prototype.$switchLane=function(u){switch(u){case"annotation":if(this.activeLane==="annotation")break;var i=this.$findNearestAnnotation(this.activeRowIndex);if(i==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var s=this.$findNearestFoldWidget(this.activeRowIndex);if(s==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=s,this.$focusFoldWidget(this.activeRowIndex);break}},l.prototype.$rowIndexToRow=function(u){var i=this.lines.get(u);return i?i.row:null},l.prototype.$rowToRowIndex=function(u){for(var i=0;i<this.lines.getLength();i++){var s=this.lines.get(i);if(s.row==u)return i}return null},l}();t.GutterKeyboardHandler=o;var r=function(){function l(u,i){this.gutterKeyboardHandler=i,this.domEvent=u}return l.prototype.getKey=function(){return a.keyCodeToString(this.domEvent.keyCode)},l.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},l.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},l.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},l}();t.GutterKeyboardEvent=r});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var a=this&&this.__values||function(M){var S=typeof Symbol=="function"&&Symbol.iterator,x=S&&M[S],L=0;if(x)return x.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&L>=M.length&&(M=void 0),{value:M&&M[L++],done:!M}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},h=e("./lib/oop"),o=e("./lib/dom"),r=e("./lib/lang"),l=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,i=e("./mouse/mouse_handler").MouseHandler,s=e("./mouse/fold_handler").FoldHandler,f=e("./keyboard/keybinding").KeyBinding,p=e("./edit_session").EditSession,d=e("./search").Search,c=e("./range").Range,_=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,y=e("./config"),C=e("./token_iterator").TokenIterator,T=e("./line_widgets").LineWidgets,D=e("./keyboard/gutter_handler").GutterKeyboardHandler,g=e("./config").nls,w=e("./clipboard"),F=e("./lib/keys"),b=function(){function M(S,x,L){this.session,this.$toDestroy=[];var R=S.getContainerElement();this.container=R,this.renderer=S,this.id="editor"+ ++M.$uid,this.commands=new v(l.isMac?"mac":"win",m),typeof document=="object"&&(this.textInput=new u(S.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new i(this),new s(this)),this.keyBinding=new f(this),this.$search=new d().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=r.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(A,I){I._$emitInputEvent.schedule(31)}),this.setSession(x||L&&L.session||new p("")),y.resetOptions(this),L&&this.setOptions(L),y._signal("editor",this)}return M.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=r.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},M.prototype.startOperation=function(S){if(this.curOp){if(!S||this.curOp.command)return;this.prevOp=this.curOp}S||(this.previousCommand=null,S={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:S.command||{},args:S.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},M.prototype.endOperation=function(S){if(this.curOp&&this.session){if(S&&S.returnValue===!1||!this.session)return this.curOp=null;if(S==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var x=this.curOp.command,L=x&&x.scrollIntoView;if(L){switch(L){case"center-animate":L="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),A=this.renderer.layerConfig;(R.start.row>=A.lastRow||R.end.row<=A.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}L=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},M.prototype.$historyTracker=function(S){if(this.$mergeUndoDeltas){var x=this.prevOp,L=this.$mergeableCommands,R=x.command&&S.command.name==x.command.name;if(S.command.name=="insertstring"){var A=S.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(A)||/\s/.test(x.args)),this.mergeNextCommand=!0}else R=R&&L.indexOf(S.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:L.indexOf(S.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},M.prototype.setKeyboardHandler=function(S,x){if(S&&typeof S=="string"&&S!="ace"){this.$keybindingId=S;var L=this;y.loadModule(["keybinding",S],function(R){L.$keybindingId==S&&L.keyBinding.setKeyboardHandler(R&&R.handler),x&&x()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(S),x&&x()},M.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},M.prototype.setSession=function(S){if(this.session!=S){this.curOp&&this.endOperation(),this.curOp={};var x=this.session;if(x){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var L=this.session.getSelection();L.off("changeCursor",this.$onCursorChange),L.off("changeSelection",this.$onSelectionChange)}this.session=S,S?(this.$onDocumentChange=this.onDocumentChange.bind(this),S.on("change",this.$onDocumentChange),this.renderer.setSession(S),this.$onChangeMode=this.onChangeMode.bind(this),S.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),S.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),S.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),S.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),S.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),S.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=S.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(S)),this._signal("changeSession",{session:S,oldSession:x}),this.curOp=null,x&&x._signal("changeEditor",{oldEditor:this}),S&&S._signal("changeEditor",{editor:this}),S&&!S.destroyed&&S.bgTokenizer.scheduleStart()}},M.prototype.getSession=function(){return this.session},M.prototype.setValue=function(S,x){return this.session.doc.setValue(S),x?x==1?this.navigateFileEnd():x==-1&&this.navigateFileStart():this.selectAll(),S},M.prototype.getValue=function(){return this.session.getValue()},M.prototype.getSelection=function(){return this.selection},M.prototype.resize=function(S){this.renderer.onResize(S)},M.prototype.setTheme=function(S,x){this.renderer.setTheme(S,x)},M.prototype.getTheme=function(){return this.renderer.getTheme()},M.prototype.setStyle=function(S){this.renderer.setStyle(S)},M.prototype.unsetStyle=function(S){this.renderer.unsetStyle(S)},M.prototype.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container).fontSize},M.prototype.setFontSize=function(S){this.setOption("fontSize",S)},M.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var S=this;this.$highlightPending=!0,setTimeout(function(){S.$highlightPending=!1;var x=S.session;if(!(!x||x.destroyed)){x.$bracketHighlight&&(x.$bracketHighlight.markerIds.forEach(function(z){x.removeMarker(z)}),x.$bracketHighlight=null);var L=S.getCursorPosition(),R=S.getKeyboardHandler(),A=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(S),I=x.getMatchingBracketRanges(L,A);if(!I){var $=new C(x,L.row,L.column),H=$.getCurrentToken();if(H&&/\b(?:tag-open|tag-name)/.test(H.type)){var P=x.getMatchingTags(L);P&&(I=[P.openTagName,P.closeTagName])}}if(!I&&x.$mode.getMatching&&(I=x.$mode.getMatching(S.session)),!I){S.getHighlightIndentGuides()&&S.renderer.$textLayer.$highlightIndentGuide();return}var q="ace_bracket";Array.isArray(I)?I.length==1&&(q="ace_error_bracket"):I=[I],I.length==2&&(c.comparePoints(I[0].end,I[1].start)==0?I=[c.fromPoints(I[0].start,I[1].end)]:c.comparePoints(I[0].start,I[1].end)==0&&(I=[c.fromPoints(I[1].start,I[0].end)])),x.$bracketHighlight={ranges:I,markerIds:I.map(function(z){return x.addMarker(z,q,"text")})},S.getHighlightIndentGuides()&&S.renderer.$textLayer.$highlightIndentGuide()}},50)}},M.prototype.focus=function(){this.textInput.focus()},M.prototype.isFocused=function(){return this.textInput.isFocused()},M.prototype.blur=function(){this.textInput.blur()},M.prototype.onFocus=function(S){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",S))},M.prototype.onBlur=function(S){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",S))},M.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},M.prototype.onDocumentChange=function(S){var x=this.session.$useWrapMode,L=S.start.row==S.end.row?S.end.row:1/0;this.renderer.updateLines(S.start.row,L,x),this._signal("change",S),this.$cursorChange()},M.prototype.onTokenizerUpdate=function(S){var x=S.data;this.renderer.updateLines(x.first,x.last)},M.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},M.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},M.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},M.prototype.$updateHighlightActiveLine=function(){var S=this.getSession(),x;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(x=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(x=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(x=!1)),S.$highlightLineMarker&&!x)S.removeMarker(S.$highlightLineMarker.id),S.$highlightLineMarker=null;else if(!S.$highlightLineMarker&&x){var L=new c(x.row,x.column,x.row,1/0);L.id=S.addMarker(L,"ace_active-line","screenLine"),S.$highlightLineMarker=L}else x&&(S.$highlightLineMarker.start.row=x.row,S.$highlightLineMarker.end.row=x.row,S.$highlightLineMarker.start.column=x.column,S._signal("changeBackMarker"))},M.prototype.onSelectionChange=function(S){var x=this.session;if(x.$selectionMarker&&x.removeMarker(x.$selectionMarker),x.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var L=this.selection.getRange(),R=this.getSelectionStyle();x.$selectionMarker=x.addMarker(L,"ace_selection",R)}var A=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(A),this._signal("changeSelection")},M.prototype.$getSelectionHighLightRegexp=function(){var S=this.session,x=this.getSelectionRange();if(!(x.isEmpty()||x.isMultiLine())){var L=x.start.column,R=x.end.column,A=S.getLine(x.start.row),I=A.substring(L,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var $=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),H=A.substring(L-1,R+1);if($.test(H))return $}}},M.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},M.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},M.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},M.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},M.prototype.onChangeMode=function(S){this.renderer.updateText(),this._emit("changeMode",S)},M.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},M.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},M.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},M.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},M.prototype.getCopyText=function(){var S=this.getSelectedText(),x=this.session.doc.getNewLineCharacter(),L=!1;if(!S&&this.$copyWithEmptySelection){L=!0;for(var R=this.selection.getAllRanges(),A=0;A<R.length;A++){var I=R[A];A&&R[A-1].start.row==I.start.row||(S+=this.session.getLine(I.start.row)+x)}}var $={text:S};return this._signal("copy",$),w.lineMode=L?$.text:!1,$.text},M.prototype.onCopy=function(){this.commands.exec("copy",this)},M.prototype.onCut=function(){this.commands.exec("cut",this)},M.prototype.onPaste=function(S,x){var L={text:S,event:x};this.commands.exec("paste",this,L)},M.prototype.$handlePaste=function(S){typeof S=="string"&&(S={text:S}),this._signal("paste",S);var x=S.text,L=x===w.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)L?R.insert({row:this.selection.lead.row,column:0},x):this.insert(x);else if(L)this.selection.rangeList.ranges.forEach(function(q){R.insert({row:q.start.row,column:0},x)});else{var A=x.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,$=A.length==2&&(!A[0]||!A[1]);if(A.length!=I.length||$)return this.commands.exec("insertstring",this,x);for(var H=I.length;H--;){var P=I[H];P.isEmpty()||R.remove(P),R.insert(P.start,A[H])}}},M.prototype.execCommand=function(S,x){return this.commands.exec(S,this,x)},M.prototype.insert=function(S,x){var L=this.session,R=L.getMode(),A=this.getCursorPosition();if(this.getBehavioursEnabled()&&!x){var I=R.transformAction(L.getState(A.row),"insertion",this,L,S);I&&(S!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),S=I.text)}if(S=="	"&&(S=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&S.indexOf(`
`)==-1){var $=c.fromPoints(A,A);$.end.column+=S.length,this.session.remove($)}}else{var $=this.getSelectionRange();A=this.session.remove($),this.clearSelection()}if(S==`
`||S==`\r
`){var z=L.getLine(A.row);if(A.column>z.search(/\S|$/)){var H=z.substr(A.column).search(/\S|$/);L.doc.removeInLine(A.row,A.column,A.column+H)}}this.clearSelection();var P=A.column,q=L.getState(A.row),z=L.getLine(A.row),N=R.checkOutdent(q,z,S);if(L.insert(A,S),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new c(A.row,P+I.selection[0],A.row,P+I.selection[1])):this.selection.setSelectionRange(new c(A.row+I.selection[0],I.selection[1],A.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(L.getDocument().isNewLine(S)){var Q=R.getNextLineIndent(q,z.slice(0,A.column),L.getTabString());L.insert({row:A.row+1,column:0},Q)}N&&R.autoOutdent(q,L,A.row)}},M.prototype.autoIndent=function(){var S=this.session,x=S.getMode(),L,R;if(this.selection.isEmpty())L=0,R=S.doc.getLength()-1;else{var A=this.getSelectionRange();L=A.start.row,R=A.end.row}for(var I="",$="",H="",P,q,z,N=S.getTabString(),Q=L;Q<=R;Q++)Q>0&&(I=S.getState(Q-1),$=S.getLine(Q-1),H=x.getNextLineIndent(I,$,N)),P=S.getLine(Q),q=x.$getIndent(P),H!==q&&(q.length>0&&(z=new c(Q,0,Q,q.length),S.remove(z)),H.length>0&&S.insert({row:Q,column:0},H)),x.autoOutdent(I,S,Q)},M.prototype.onTextInput=function(S,x){if(!x)return this.keyBinding.onTextInput(S);this.startOperation({command:{name:"insertstring"}});var L=this.applyComposition.bind(this,S,x);this.selection.rangeCount?this.forEachSelection(L):L(),this.endOperation()},M.prototype.applyComposition=function(S,x){if(x.extendLeft||x.extendRight){var L=this.selection.getRange();L.start.column-=x.extendLeft,L.end.column+=x.extendRight,L.start.column<0&&(L.start.row--,L.start.column+=this.session.getLine(L.start.row).length+1),this.selection.setRange(L),!S&&!L.isEmpty()&&this.remove()}if((S||!this.selection.isEmpty())&&this.insert(S,!0),x.restoreStart||x.restoreEnd){var L=this.selection.getRange();L.start.column-=x.restoreStart,L.end.column-=x.restoreEnd,this.selection.setRange(L)}},M.prototype.onCommandKey=function(S,x,L){return this.keyBinding.onCommandKey(S,x,L)},M.prototype.setOverwrite=function(S){this.session.setOverwrite(S)},M.prototype.getOverwrite=function(){return this.session.getOverwrite()},M.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},M.prototype.setScrollSpeed=function(S){this.setOption("scrollSpeed",S)},M.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},M.prototype.setDragDelay=function(S){this.setOption("dragDelay",S)},M.prototype.getDragDelay=function(){return this.getOption("dragDelay")},M.prototype.setSelectionStyle=function(S){this.setOption("selectionStyle",S)},M.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},M.prototype.setHighlightActiveLine=function(S){this.setOption("highlightActiveLine",S)},M.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},M.prototype.setHighlightGutterLine=function(S){this.setOption("highlightGutterLine",S)},M.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},M.prototype.setHighlightSelectedWord=function(S){this.setOption("highlightSelectedWord",S)},M.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},M.prototype.setAnimatedScroll=function(S){this.renderer.setAnimatedScroll(S)},M.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},M.prototype.setShowInvisibles=function(S){this.renderer.setShowInvisibles(S)},M.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},M.prototype.setDisplayIndentGuides=function(S){this.renderer.setDisplayIndentGuides(S)},M.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},M.prototype.setHighlightIndentGuides=function(S){this.renderer.setHighlightIndentGuides(S)},M.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},M.prototype.setShowPrintMargin=function(S){this.renderer.setShowPrintMargin(S)},M.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},M.prototype.setPrintMarginColumn=function(S){this.renderer.setPrintMarginColumn(S)},M.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},M.prototype.setReadOnly=function(S){this.setOption("readOnly",S)},M.prototype.getReadOnly=function(){return this.getOption("readOnly")},M.prototype.setBehavioursEnabled=function(S){this.setOption("behavioursEnabled",S)},M.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},M.prototype.setWrapBehavioursEnabled=function(S){this.setOption("wrapBehavioursEnabled",S)},M.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},M.prototype.setShowFoldWidgets=function(S){this.setOption("showFoldWidgets",S)},M.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},M.prototype.setFadeFoldWidgets=function(S){this.setOption("fadeFoldWidgets",S)},M.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},M.prototype.remove=function(S){this.selection.isEmpty()&&(S=="left"?this.selection.selectLeft():this.selection.selectRight());var x=this.getSelectionRange();if(this.getBehavioursEnabled()){var L=this.session,R=L.getState(x.start.row),A=L.getMode().transformAction(R,"deletion",this,L,x);if(x.end.column===0){var I=L.getTextRange(x);if(I[I.length-1]==`
`){var $=L.getLine(x.end.row);/^\s+$/.test($)&&(x.end.column=$.length)}}A&&(x=A)}this.session.remove(x),this.clearSelection()},M.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var S=this.getSelectionRange();S.start.column==S.end.column&&S.start.row==S.end.row&&(S.end.column=0,S.end.row++),this.session.remove(S),this.clearSelection()},M.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var S=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(S)},M.prototype.setGhostText=function(S,x){this.session.widgetManager||(this.session.widgetManager=new T(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(S,x)},M.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},M.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var S=this.getCursorPosition(),x=S.column;if(x!==0){var L=this.session.getLine(S.row),R,A;x<L.length?(R=L.charAt(x)+L.charAt(x-1),A=new c(S.row,x-1,S.row,x+1)):(R=L.charAt(x-1)+L.charAt(x-2),A=new c(S.row,x-2,S.row,x)),this.session.replace(A,R),this.session.selection.moveToPosition(A.end)}}},M.prototype.toLowerCase=function(){var S=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var x=this.getSelectionRange(),L=this.session.getTextRange(x);this.session.replace(x,L.toLowerCase()),this.selection.setSelectionRange(S)},M.prototype.toUpperCase=function(){var S=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var x=this.getSelectionRange(),L=this.session.getTextRange(x);this.session.replace(x,L.toUpperCase()),this.selection.setSelectionRange(S)},M.prototype.indent=function(){var S=this.session,x=this.getSelectionRange();if(x.start.row<x.end.row){var L=this.$getSelectedRows();S.indentRows(L.first,L.last,"	");return}else if(x.start.column<x.end.column){var R=S.getTextRange(x);if(!/^\s+$/.test(R)){var L=this.$getSelectedRows();S.indentRows(L.first,L.last,"	");return}}var A=S.getLine(x.start.row),I=x.start,$=S.getTabSize(),H=S.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var P=$-H%$,q=r.stringRepeat(" ",P);else{for(var P=H%$;A[x.start.column-1]==" "&&P;)x.start.column--,P--;this.selection.setSelectionRange(x),q="	"}return this.insert(q)},M.prototype.blockIndent=function(){var S=this.$getSelectedRows();this.session.indentRows(S.first,S.last,"	")},M.prototype.blockOutdent=function(){var S=this.session.getSelection();this.session.outdentRows(S.getRange())},M.prototype.sortLines=function(){for(var S=this.$getSelectedRows(),x=this.session,L=[],R=S.first;R<=S.last;R++)L.push(x.getLine(R));L.sort(function($,H){return $.toLowerCase()<H.toLowerCase()?-1:$.toLowerCase()>H.toLowerCase()?1:0});for(var A=new c(0,0,0,0),R=S.first;R<=S.last;R++){var I=x.getLine(R);A.start.row=R,A.end.row=R,A.end.column=I.length,x.replace(A,L[R-S.first])}},M.prototype.toggleCommentLines=function(){var S=this.session.getState(this.getCursorPosition().row),x=this.$getSelectedRows();this.session.getMode().toggleCommentLines(S,this.session,x.first,x.last)},M.prototype.toggleBlockComment=function(){var S=this.getCursorPosition(),x=this.session.getState(S.row),L=this.getSelectionRange();this.session.getMode().toggleBlockComment(x,this.session,L,S)},M.prototype.getNumberAt=function(S,x){var L=/[\-]?[0-9]+(?:\.[0-9]+)?/g;L.lastIndex=0;for(var R=this.session.getLine(S);L.lastIndex<x;){var A=L.exec(R);if(A.index<=x&&A.index+A[0].length>=x){var I={value:A[0],start:A.index,end:A.index+A[0].length};return I}}return null},M.prototype.modifyNumber=function(S){var x=this.selection.getCursor().row,L=this.selection.getCursor().column,R=new c(x,L-1,x,L),A=this.session.getTextRange(R);if(!isNaN(parseFloat(A))&&isFinite(A)){var I=this.getNumberAt(x,L);if(I){var $=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,H=I.start+I.value.length-$,P=parseFloat(I.value);P*=Math.pow(10,H),$!==I.end&&L<$?S*=Math.pow(10,I.end-L-1):S*=Math.pow(10,I.end-L),P+=S,P/=Math.pow(10,H);var q=P.toFixed(H),z=new c(x,I.start,x,I.end);this.session.replace(z,q),this.moveCursorTo(x,Math.max(I.start+1,L+q.length-I.value.length))}}else this.toggleWord()},M.prototype.toggleWord=function(){var S=this.selection.getCursor().row,x=this.selection.getCursor().column;this.selection.selectWord();var L=this.getSelectedText(),R=this.selection.getWordRange().start.column,A=L.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=x-R-1;I<0&&(I=0);var $=0,H=0,P=this;L.match(/[A-Za-z0-9_]+/)&&A.forEach(function(te,J){H=$+te.length,I>=$&&I<=H&&(L=te,P.selection.clearSelection(),P.moveCursorTo(S,$+R),P.selection.selectTo(S,H+R)),$=H});for(var q=this.$toggleWordPairs,z,N=0;N<q.length;N++)for(var Q=q[N],O=0;O<=1;O++){var W=+!O,U=L.match(new RegExp("^\\s?_?("+r.escapeRegExp(Q[O])+")\\s?$","i"));if(U){var k=L.match(new RegExp("([_]|^|\\s)("+r.escapeRegExp(U[1])+")($|\\s)","g"));k&&(z=L.replace(new RegExp(r.escapeRegExp(Q[O]),"i"),function(te){var J=Q[W];return te.toUpperCase()==te?J=J.toUpperCase():te.charAt(0).toUpperCase()==te.charAt(0)&&(J=J.substr(0,0)+Q[W].charAt(0).toUpperCase()+J.substr(1)),J}),this.insert(z),z="")}}},M.prototype.findLinkAt=function(S,x){var L,R,A=this.session.getLine(S),I=A.split(/((?:https?|ftp):\/\/[\S]+)/),$=x;$<0&&($=0);var H=0,P=0,q;try{for(var z=a(I),N=z.next();!N.done;N=z.next()){var Q=N.value;if(P=H+Q.length,$>=H&&$<=P&&Q.match(/((?:https?|ftp):\/\/[\S]+)/)){q=Q.replace(/[\s:.,'";}\]]+$/,"");break}H=P}}catch(O){L={error:O}}finally{try{N&&!N.done&&(R=z.return)&&R.call(z)}finally{if(L)throw L.error}}return q},M.prototype.openLink=function(){var S=this.selection.getCursor(),x=this.findLinkAt(S.row,S.column);return x&&window.open(x,"_blank"),x!=null},M.prototype.removeLines=function(){var S=this.$getSelectedRows();this.session.removeFullLines(S.first,S.last),this.clearSelection()},M.prototype.duplicateSelection=function(){var S=this.selection,x=this.session,L=S.getRange(),R=S.isBackwards();if(L.isEmpty()){var A=L.start.row;x.duplicateLines(A,A)}else{var I=R?L.start:L.end,$=x.insert(I,x.getTextRange(L));L.start=I,L.end=$,S.setSelectionRange(L,R)}},M.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},M.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},M.prototype.moveText=function(S,x,L){return this.session.moveText(S,x,L)},M.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},M.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},M.prototype.$moveLines=function(S,x){var L,R,A=this.selection;if(!A.inMultiSelectMode||this.inVirtualSelectionMode){var I=A.toOrientedRange();L=this.$getSelectedRows(I),R=this.session.$moveLines(L.first,L.last,x?0:S),x&&S==-1&&(R=0),I.moveBy(R,0),A.fromOrientedRange(I)}else{var $=A.rangeList.ranges;A.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var H=0,P=0,q=$.length,z=0;z<q;z++){var N=z;$[z].moveBy(H,0),L=this.$getSelectedRows($[z]);for(var Q=L.first,O=L.last;++z<q;){P&&$[z].moveBy(P,0);var W=this.$getSelectedRows($[z]);if(x&&W.first!=O)break;if(!x&&W.first>O+1)break;O=W.last}for(z--,H=this.session.$moveLines(Q,O,x?0:S),x&&S==-1&&(N=z+1);N<=z;)$[N].moveBy(H,0),N++;x||(H=0),P+=H}A.fromOrientedRange(A.ranges[0]),A.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},M.prototype.$getSelectedRows=function(S){return S=(S||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(S.start.row),last:this.session.getRowFoldEnd(S.end.row)}},M.prototype.onCompositionStart=function(S){this.renderer.showComposition(S)},M.prototype.onCompositionUpdate=function(S){this.renderer.setCompositionText(S)},M.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},M.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},M.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},M.prototype.isRowVisible=function(S){return S>=this.getFirstVisibleRow()&&S<=this.getLastVisibleRow()},M.prototype.isRowFullyVisible=function(S){return S>=this.renderer.getFirstFullyVisibleRow()&&S<=this.renderer.getLastFullyVisibleRow()},M.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},M.prototype.$moveByPage=function(S,x){var L=this.renderer,R=this.renderer.layerConfig,A=S*Math.floor(R.height/R.lineHeight);x===!0?this.selection.$moveSelection(function(){this.moveCursorBy(A,0)}):x===!1&&(this.selection.moveCursorBy(A,0),this.selection.clearSelection());var I=L.scrollTop;L.scrollBy(0,A*R.lineHeight),x!=null&&L.scrollCursorIntoView(null,.5),L.animateScrolling(I)},M.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},M.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},M.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},M.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},M.prototype.scrollPageDown=function(){this.$moveByPage(1)},M.prototype.scrollPageUp=function(){this.$moveByPage(-1)},M.prototype.scrollToRow=function(S){this.renderer.scrollToRow(S)},M.prototype.scrollToLine=function(S,x,L,R){this.renderer.scrollToLine(S,x,L,R)},M.prototype.centerSelection=function(){var S=this.getSelectionRange(),x={row:Math.floor(S.start.row+(S.end.row-S.start.row)/2),column:Math.floor(S.start.column+(S.end.column-S.start.column)/2)};this.renderer.alignCursor(x,.5)},M.prototype.getCursorPosition=function(){return this.selection.getCursor()},M.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},M.prototype.getSelectionRange=function(){return this.selection.getRange()},M.prototype.selectAll=function(){this.selection.selectAll()},M.prototype.clearSelection=function(){this.selection.clearSelection()},M.prototype.moveCursorTo=function(S,x){this.selection.moveCursorTo(S,x)},M.prototype.moveCursorToPosition=function(S){this.selection.moveCursorToPosition(S)},M.prototype.jumpToMatching=function(S,x){var L=this.getCursorPosition(),R=new C(this.session,L.row,L.column),A=R.getCurrentToken(),I=0;A&&A.type.indexOf("tag-name")!==-1&&(A=R.stepBackward());var $=A||R.stepForward();if($){var H,P=!1,q={},z=L.column-$.start,N,Q={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if($.value.match(/[{}()\[\]]/g)){for(;z<$.value.length&&!P;z++)if(Q[$.value[z]])switch(N=Q[$.value[z]]+"."+$.type.replace("rparen","lparen"),isNaN(q[N])&&(q[N]=0),$.value[z]){case"(":case"[":case"{":q[N]++;break;case")":case"]":case"}":q[N]--,q[N]===-1&&(H="bracket",P=!0);break}}else $.type.indexOf("tag-name")!==-1&&(isNaN(q[$.value])&&(q[$.value]=0),A.value==="<"&&I>1?q[$.value]++:A.value==="</"&&q[$.value]--,q[$.value]===-1&&(H="tag",P=!0));P||(A=$,I++,$=R.stepForward(),z=0)}while($&&!P);if(H){var O,W;if(H==="bracket")O=this.session.getBracketRange(L),O||(O=new c(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+z-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+z-1),W=O.start,(x||W.row===L.row&&Math.abs(W.column-L.column)<2)&&(O=this.session.getBracketRange(W)));else if(H==="tag"){if(!$||$.type.indexOf("tag-name")===-1)return;if(O=new c(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),O.compare(L.row,L.column)===0){var U=this.session.getMatchingTags(L);U&&(U.openTag.contains(L.row,L.column)?(O=U.closeTag,W=O.start):(O=U.openTag,U.closeTag.start.row===L.row&&U.closeTag.start.column===L.column?W=O.end:W=O.start))}W=W||O.start}W=O&&O.cursor||W,W&&(S?O&&x?this.selection.setRange(O):O&&O.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(W.row,W.column):this.selection.moveTo(W.row,W.column))}}},M.prototype.gotoLine=function(S,x,L){this.selection.clearSelection(),this.session.unfold({row:S-1,column:x||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(S-1,x||0),this.isRowFullyVisible(S-1)||this.scrollToLine(S-1,!0,L)},M.prototype.navigateTo=function(S,x){this.selection.moveTo(S,x)},M.prototype.navigateUp=function(S){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var x=this.selection.anchor.getPosition();return this.moveCursorToPosition(x)}this.selection.clearSelection(),this.selection.moveCursorBy(-S||-1,0)},M.prototype.navigateDown=function(S){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var x=this.selection.anchor.getPosition();return this.moveCursorToPosition(x)}this.selection.clearSelection(),this.selection.moveCursorBy(S||1,0)},M.prototype.navigateLeft=function(S){if(this.selection.isEmpty())for(S=S||1;S--;)this.selection.moveCursorLeft();else{var x=this.getSelectionRange().start;this.moveCursorToPosition(x)}this.clearSelection()},M.prototype.navigateRight=function(S){if(this.selection.isEmpty())for(S=S||1;S--;)this.selection.moveCursorRight();else{var x=this.getSelectionRange().end;this.moveCursorToPosition(x)}this.clearSelection()},M.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},M.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},M.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},M.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},M.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},M.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},M.prototype.replace=function(S,x){x&&this.$search.set(x);var L=this.$search.find(this.session),R=0;return L&&(this.$tryReplace(L,S)&&(R=1),this.selection.setSelectionRange(L),this.renderer.scrollSelectionIntoView(L.start,L.end)),R},M.prototype.replaceAll=function(S,x){x&&this.$search.set(x);var L=this.$search.findAll(this.session),R=0;if(!L.length)return R;var A=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=L.length-1;I>=0;--I)this.$tryReplace(L[I],S)&&R++;return this.selection.setSelectionRange(A),R},M.prototype.$tryReplace=function(S,x){var L=this.session.getTextRange(S);return x=this.$search.replace(L,x),x!==null?(S.end=this.session.replace(S,x),S):null},M.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},M.prototype.find=function(S,x,L){x||(x={}),typeof S=="string"||S instanceof RegExp?x.needle=S:typeof S=="object"&&h.mixin(x,S);var R=this.selection.getRange();x.needle==null&&(S=this.session.getTextRange(R)||this.$search.$options.needle,S||(R=this.session.getWordRange(R.start.row,R.start.column),S=this.session.getTextRange(R)),this.$search.set({needle:S})),this.$search.set(x),x.start||this.$search.set({start:R});var A=this.$search.find(this.session);if(x.preventScroll)return A;if(A)return this.revealRange(A,L),A;x.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},M.prototype.findNext=function(S,x){this.find({skipCurrent:!0,backwards:!1},S,x)},M.prototype.findPrevious=function(S,x){this.find(S,{skipCurrent:!0,backwards:!0},x)},M.prototype.revealRange=function(S,x){this.session.unfold(S),this.selection.setSelectionRange(S);var L=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(S.start,S.end,.5),x!==!1&&this.renderer.animateScrolling(L)},M.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(S){S.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},M.prototype.setAutoScrollEditorIntoView=function(S){if(S){var x,L=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var A=this.$scrollAnchor;A.style.cssText="position:absolute",this.container.insertBefore(A,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),$=this.renderer.on("beforeRender",function(){R&&(x=L.renderer.container.getBoundingClientRect())}),H=this.renderer.on("afterRender",function(){if(R&&x&&(L.isFocused()||L.searchBox&&L.searchBox.isFocused())){var P=L.renderer,q=P.$cursorLayer.$pixelPos,z=P.layerConfig,N=q.top-z.offset;q.top>=0&&N+x.top<0?R=!0:q.top<z.height&&q.top+x.top+z.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(A.style.top=N+"px",A.style.left=q.left+"px",A.style.height=z.lineHeight+"px",A.scrollIntoView(R)),R=x=null}});this.setAutoScrollEditorIntoView=function(P){P||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",H),this.renderer.off("beforeRender",$))}}},M.prototype.$resetCursorStyle=function(){var S=this.$cursorStyle||"ace",x=this.renderer.$cursorLayer;x&&(x.setSmoothBlinking(/smooth/.test(S)),x.isBlinking=!this.$readOnly&&S!="wide",o.setCssClass(x.element,"ace_slim-cursors",/slim/.test(S)))},M.prototype.prompt=function(S,x,L){var R=this;y.loadModule("ace/ext/prompt",function(A){A.prompt(R,S,x,L)})},M}();b.$uid=0,b.prototype.curOp=null,b.prototype.prevOp={},b.prototype.$mergeableCommands=["backspace","del","insertstring"],b.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],h.implement(b.prototype,_),y.defineOptions(b.prototype,"editor",{selectionStyle:{set:function(M){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:M})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(M){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(M){this.textInput.setReadOnly(M),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(M){this.textInput.setCopyWithEmptySelection(M)},initialValue:!1},cursorStyle:{set:function(M){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(M){this.setAutoScrollEditorIntoView(M)}},keyboardHandler:{set:function(M){this.setKeyboardHandler(M)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(M){this.session.setValue(M)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(M){this.setSession(M)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(M){this.renderer.$gutterLayer.setShowLineNumbers(M),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),M&&this.$relativeLineNumbers?E.attach(this):E.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(M){this.$showLineNumbers&&M?E.attach(this):E.detach(this)}},placeholder:{set:function(M){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var S=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(S&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),o.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!S&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),o.addCssClass(this.container,"ace_hasPlaceholder");var x=o.createElement("div");x.className="ace_placeholder",x.textContent=this.$placeholder||"",this.renderer.placeholderNode=x,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!S&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(M){var S={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},x=function(R){if(R.target==this.renderer.scroller&&R.keyCode===F.enter){R.preventDefault();var A=this.getCursorPosition().row;this.isRowVisible(A)||this.scrollToLine(A,!0,!0),this.focus()}},L;M?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(l.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",g("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",g("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",x.bind(this)),this.commands.addCommand(S),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",g("editor")),this.renderer.$gutter.setAttribute("aria-label",g("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),L||(L=new D(this)),L.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",x.bind(this)),this.commands.removeCommand(S),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),L&&L.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var E={getText:function(M,S){return(Math.abs(M.selection.lead.row-S)||S+1+(S<9?"\xB7":""))+""},getWidth:function(M,S,x){return Math.max(S.toString().length,(x.lastRow+1).toString().length,2)*x.characterWidth},update:function(M,S){S.renderer.$loop.schedule(S.renderer.CHANGE_GUTTER)},attach:function(M){M.renderer.$gutterLayer.$renderer=this,M.on("changeSelection",this.update),this.update(null,M)},detach:function(M){M.renderer.$gutterLayer.$renderer==this&&(M.renderer.$gutterLayer.$renderer=null),M.off("changeSelection",this.update),this.update(null,M)}};t.Editor=b});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=function(){function o(r,l){this.element=r,this.canvasHeight=l||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return o.prototype.moveContainer=function(r){a.translate(this.element,0,-(r.firstRowScreen*r.lineHeight%this.canvasHeight)-r.offset*this.$offsetCoefficient)},o.prototype.pageChanged=function(r,l){return Math.floor(r.firstRowScreen*r.lineHeight/this.canvasHeight)!==Math.floor(l.firstRowScreen*l.lineHeight/this.canvasHeight)},o.prototype.computeLineTop=function(r,l,u){var i=l.firstRowScreen*l.lineHeight,s=Math.floor(i/this.canvasHeight),f=u.documentToScreenRow(r,0)*l.lineHeight;return f-s*this.canvasHeight},o.prototype.computeLineHeight=function(r,l,u){return l.lineHeight*u.getRowLineCount(r)},o.prototype.getLength=function(){return this.cells.length},o.prototype.get=function(r){return this.cells[r]},o.prototype.shift=function(){this.$cacheCell(this.cells.shift())},o.prototype.pop=function(){this.$cacheCell(this.cells.pop())},o.prototype.push=function(r){if(Array.isArray(r)){this.cells.push.apply(this.cells,r);for(var l=a.createFragment(this.element),u=0;u<r.length;u++)l.appendChild(r[u].element);this.element.appendChild(l)}else this.cells.push(r),this.element.appendChild(r.element)},o.prototype.unshift=function(r){if(Array.isArray(r)){this.cells.unshift.apply(this.cells,r);for(var l=a.createFragment(this.element),u=0;u<r.length;u++)l.appendChild(r[u].element);this.element.firstChild?this.element.insertBefore(l,this.element.firstChild):this.element.appendChild(l)}else this.cells.unshift(r),this.element.insertAdjacentElement("afterbegin",r.element)},o.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},o.prototype.$cacheCell=function(r){r&&(r.element.remove(),this.cellCache.push(r))},o.prototype.createCell=function(r,l,u,i){var s=this.cellCache.pop();if(!s){var f=a.createElement("div");i&&i(f),this.element.appendChild(f),s={element:f,text:"",row:r}}return s.row=r,s},o}();t.Lines=h});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=e("../lib/oop"),o=e("../lib/lang"),r=e("../lib/event_emitter").EventEmitter,l=e("./lines").Lines,u=e("../config").nls,i=function(){function f(p){this.element=a.createElement("div"),this.element.className="ace_layer ace_gutter-layer",p.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new l(this.element),this.$lines.$offsetCoefficient=1}return f.prototype.setSession=function(p){this.session&&this.session.off("change",this.$updateAnnotations),this.session=p,p&&p.on("change",this.$updateAnnotations)},f.prototype.addGutterDecoration=function(p,d){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(p,d)},f.prototype.removeGutterDecoration=function(p,d){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(p,d)},f.prototype.setAnnotations=function(p){this.$annotations=[];for(var d=0;d<p.length;d++){var c=p[d],_=c.row,v=this.$annotations[_];v||(v=this.$annotations[_]={text:[],type:[]});var m=c.text,y=c.type;m=m?o.escapeHTML(m):c.html||"",v.text.indexOf(m)===-1&&(v.text.push(m),v.type.push(y));var C=c.className;C?v.className=C:y=="error"?v.className=" ace_error":y=="warning"&&v.className!=" ace_error"?v.className=" ace_warning":y=="info"&&!v.className&&(v.className=" ace_info")}},f.prototype.$updateAnnotations=function(p){if(this.$annotations.length){var d=p.start.row,c=p.end.row-d;if(c!==0)if(p.action=="remove")this.$annotations.splice(d,c+1,null);else{var _=new Array(c+1);_.unshift(d,1),this.$annotations.splice.apply(this.$annotations,_)}}},f.prototype.update=function(p){this.config=p;var d=this.session,c=p.firstRow,_=Math.min(p.lastRow+p.gutterOffset,d.getLength()-1);this.oldLastRow=_,this.config=p,this.$lines.moveContainer(p),this.$updateCursorRow();for(var v=d.getNextFoldLine(c),m=v?v.start.row:1/0,y=null,C=-1,T=c;;){if(T>m&&(T=v.end.row+1,v=d.getNextFoldLine(T,v),m=v?v.start.row:1/0),T>_){for(;this.$lines.getLength()>C+1;)this.$lines.pop();break}y=this.$lines.get(++C),y?y.row=T:(y=this.$lines.createCell(T,p,this.session,s),this.$lines.push(y)),this.$renderCell(y,p,v,T),T++}this._signal("afterRender"),this.$updateGutterWidth(p)},f.prototype.$updateGutterWidth=function(p){var d=this.session,c=d.gutterRenderer||this.$renderer,_=d.$firstLineNumber,v=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||d.$useWrapMode)&&(v=d.getLength()+_-1);var m=c?c.getWidth(d,v,p):v.toString().length*p.characterWidth,y=this.$padding||this.$computePadding();m+=y.left+y.right,m!==this.gutterWidth&&!isNaN(m)&&(this.gutterWidth=m,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",m))},f.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var p=this.session.selection.getCursor();this.$cursorRow!==p.row&&(this.$cursorRow=p.row)}},f.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var p=this.session.selection.cursor.row;if(this.$cursorRow=p,!(this.$cursorCell&&this.$cursorCell.row==p)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var d=this.$lines.cells;this.$cursorCell=null;for(var c=0;c<d.length;c++){var _=d[c];if(_.row>=this.$cursorRow){if(_.row>this.$cursorRow){var v=this.session.getFoldLine(this.$cursorRow);if(c>0&&v&&v.start.row==d[c-1].row)_=d[c-1];else break}_.element.className="ace_gutter-active-line "+_.element.className,this.$cursorCell=_;break}}}}},f.prototype.scrollLines=function(p){var d=this.config;if(this.config=p,this.$updateCursorRow(),this.$lines.pageChanged(d,p))return this.update(p);this.$lines.moveContainer(p);var c=Math.min(p.lastRow+p.gutterOffset,this.session.getLength()-1),_=this.oldLastRow;if(this.oldLastRow=c,!d||_<p.firstRow)return this.update(p);if(c<d.firstRow)return this.update(p);if(d.firstRow<p.firstRow)for(var v=this.session.getFoldedRowCount(d.firstRow,p.firstRow-1);v>0;v--)this.$lines.shift();if(_>c)for(var v=this.session.getFoldedRowCount(c+1,_);v>0;v--)this.$lines.pop();p.firstRow<d.firstRow&&this.$lines.unshift(this.$renderLines(p,p.firstRow,d.firstRow-1)),c>_&&this.$lines.push(this.$renderLines(p,_+1,c)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(p)},f.prototype.$renderLines=function(p,d,c){for(var _=[],v=d,m=this.session.getNextFoldLine(v),y=m?m.start.row:1/0;v>y&&(v=m.end.row+1,m=this.session.getNextFoldLine(v,m),y=m?m.start.row:1/0),!(v>c);){var C=this.$lines.createCell(v,p,this.session,s);this.$renderCell(C,p,m,v),_.push(C),v++}return _},f.prototype.$renderCell=function(p,d,c,_){var v=p.element,m=this.session,y=v.childNodes[0],C=v.childNodes[1],T=v.childNodes[2],D=T.firstChild,g=m.$firstLineNumber,w=m.$breakpoints,F=m.$decorations,b=m.gutterRenderer||this.$renderer,E=this.$showFoldWidgets&&m.foldWidgets,M=c?c.start.row:Number.MAX_VALUE,S=d.lineHeight+"px",x=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",L=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(b?b.getText(m,_):_+g).toString();if(this.$highlightGutterLine&&(_==this.$cursorRow||c&&_<this.$cursorRow&&_>=M&&this.$cursorRow<=c.end.row)&&(x+="ace_gutter-active-line ",this.$cursorCell!=p&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=p)),w[_]&&(x+=w[_]),F[_]&&(x+=F[_]),this.$annotations[_]&&_!==M&&(x+=this.$annotations[_].className),E){var A=E[_];A==null&&(A=E[_]=m.getFoldWidget(_))}if(A){var I="ace_fold-widget ace_"+A,$=A=="start"&&_==M&&_<c.end.row;if($){I+=" ace_closed";for(var H="",P=!1,q=_+1;q<=c.end.row;q++)if(this.$annotations[q]){if(this.$annotations[q].className===" ace_error"){P=!0,H=" ace_error_fold";break}if(this.$annotations[q].className===" ace_warning"){P=!0,H=" ace_warning_fold";continue}}x+=H}else I+=" ace_open";C.className!=I&&(C.className=I),a.setStyle(C.style,"height",S),a.setStyle(C.style,"display","inline-block"),C.setAttribute("role","button"),C.setAttribute("tabindex","-1");var z=m.getFoldWidgetRange(_);z?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[z.start.row+1,z.end.row+1])):c?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[c.start.row+1,c.end.row+1])):C.setAttribute("aria-label",u("Toggle code folding, row $0",[_+1])),$?(C.setAttribute("aria-expanded","false"),C.setAttribute("title",u("Unfold code"))):(C.setAttribute("aria-expanded","true"),C.setAttribute("title",u("Fold code")))}else C&&(a.setStyle(C.style,"display","none"),C.setAttribute("tabindex","0"),C.removeAttribute("role"),C.removeAttribute("aria-label"));return P&&this.$showFoldedAnnotations?(T.className="ace_gutter_annotation",D.className=L,D.className+=H,a.setStyle(D.style,"height",S),a.setStyle(T.style,"display","block"),a.setStyle(T.style,"height",S),T.setAttribute("aria-label",u("Read annotations row $0",[R])),T.setAttribute("tabindex","-1"),T.setAttribute("role","button")):this.$annotations[_]?(T.className="ace_gutter_annotation",D.className=L,this.$useSvgGutterIcons?D.className+=this.$annotations[_].className:v.classList.add(this.$annotations[_].className.replace(" ","")),a.setStyle(D.style,"height",S),a.setStyle(T.style,"display","block"),a.setStyle(T.style,"height",S),T.setAttribute("aria-label",u("Read annotations row $0",[R])),T.setAttribute("tabindex","-1"),T.setAttribute("role","button")):(a.setStyle(T.style,"display","none"),T.removeAttribute("aria-label"),T.removeAttribute("role"),T.setAttribute("tabindex","0")),R!==y.data&&(y.data=R),v.className!=x&&(v.className=x),a.setStyle(p.element.style,"height",this.$lines.computeLineHeight(_,d,m)+"px"),a.setStyle(p.element.style,"top",this.$lines.computeLineTop(_,d,m)+"px"),p.text=R,T.style.display==="none"&&C.style.display==="none"?p.element.setAttribute("aria-hidden",!0):p.element.setAttribute("aria-hidden",!1),p},f.prototype.setHighlightGutterLine=function(p){this.$highlightGutterLine=p},f.prototype.setShowLineNumbers=function(p){this.$renderer=!p&&{getWidth:function(){return 0},getText:function(){return""}}},f.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},f.prototype.setShowFoldWidgets=function(p){p?a.addCssClass(this.element,"ace_folding-enabled"):a.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=p,this.$padding=null},f.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},f.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var p=a.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(p.borderLeftWidth)||0)+(parseInt(p.paddingLeft)||0)+1,this.$padding.right=(parseInt(p.borderRightWidth)||0)+(parseInt(p.paddingRight)||0),this.$padding},f.prototype.getRegion=function(p){var d=this.$padding||this.$computePadding(),c=this.element.getBoundingClientRect();if(p.x<d.left+c.left)return"markers";if(this.$showFoldWidgets&&p.x>c.right-d.right)return"foldWidgets"},f}();i.prototype.$fixedWidth=!1,i.prototype.$highlightGutterLine=!0,i.prototype.$renderer="",i.prototype.$showLineNumbers=!0,i.prototype.$showFoldWidgets=!0,h.implement(i.prototype,r);function s(f){var p=document.createTextNode("");f.appendChild(p);var d=a.createElement("span");f.appendChild(d);var c=a.createElement("span");f.appendChild(c);var _=a.createElement("span");return c.appendChild(_),f}t.Gutter=i});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../range").Range,h=e("../lib/dom"),o=function(){function l(u){this.element=h.createElement("div"),this.element.className="ace_layer ace_marker-layer",u.appendChild(this.element)}return l.prototype.setPadding=function(u){this.$padding=u},l.prototype.setSession=function(u){this.session=u},l.prototype.setMarkers=function(u){this.markers=u},l.prototype.elt=function(u,i){var s=this.i!=-1&&this.element.childNodes[this.i];s?this.i++:(s=document.createElement("div"),this.element.appendChild(s),this.i=-1),s.style.cssText=i,s.className=u},l.prototype.update=function(u){if(u){this.config=u,this.i=0;var i;for(var s in this.markers){var f=this.markers[s];if(!f.range){f.update(i,this,this.session,u);continue}var p=f.range.clipRows(u.firstRow,u.lastRow);if(!p.isEmpty())if(p=p.toScreenRange(this.session),f.renderer){var d=this.$getTop(p.start.row,u),c=this.$padding+p.start.column*u.characterWidth;f.renderer(i,p,c,d,u)}else f.type=="fullLine"?this.drawFullLineMarker(i,p,f.clazz,u):f.type=="screenLine"?this.drawScreenLineMarker(i,p,f.clazz,u):p.isMultiLine()?f.type=="text"?this.drawTextMarker(i,p,f.clazz,u):this.drawMultiLineMarker(i,p,f.clazz,u):this.drawSingleLineMarker(i,p,f.clazz+" ace_start ace_br15",u)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},l.prototype.$getTop=function(u,i){return(u-i.firstRowScreen)*i.lineHeight},l.prototype.drawTextMarker=function(u,i,s,f,p){for(var d=this.session,c=i.start.row,_=i.end.row,v=c,m=0,y=0,C=d.getScreenLastRowColumn(v),T=new a(v,i.start.column,v,y);v<=_;v++)T.start.row=T.end.row=v,T.start.column=v==c?i.start.column:d.getRowWrapIndent(v),T.end.column=C,m=y,y=C,C=v+1<_?d.getScreenLastRowColumn(v+1):v==_?0:i.end.column,this.drawSingleLineMarker(u,T,s+(v==c?" ace_start":"")+" ace_br"+r(v==c||v==c+1&&i.start.column,m<y,y>C,v==_),f,v==_?0:1,p)},l.prototype.drawMultiLineMarker=function(u,i,s,f,p){var d=this.$padding,c=f.lineHeight,_=this.$getTop(i.start.row,f),v=d+i.start.column*f.characterWidth;if(p=p||"",this.session.$bidiHandler.isBidiRow(i.start.row)){var m=i.clone();m.end.row=m.start.row,m.end.column=this.session.getLine(m.start.row).length,this.drawBidiSingleLineMarker(u,m,s+" ace_br1 ace_start",f,null,p)}else this.elt(s+" ace_br1 ace_start","height:"+c+"px;right:0;top:"+_+"px;left:"+v+"px;"+(p||""));if(this.session.$bidiHandler.isBidiRow(i.end.row)){var m=i.clone();m.start.row=m.end.row,m.start.column=0,this.drawBidiSingleLineMarker(u,m,s+" ace_br12",f,null,p)}else{_=this.$getTop(i.end.row,f);var y=i.end.column*f.characterWidth;this.elt(s+" ace_br12","height:"+c+"px;width:"+y+"px;top:"+_+"px;left:"+d+"px;"+(p||""))}if(c=(i.end.row-i.start.row-1)*f.lineHeight,!(c<=0)){_=this.$getTop(i.start.row+1,f);var C=(i.start.column?1:0)|(i.end.column?0:8);this.elt(s+(C?" ace_br"+C:""),"height:"+c+"px;right:0;top:"+_+"px;left:"+d+"px;"+(p||""))}},l.prototype.drawSingleLineMarker=function(u,i,s,f,p,d){if(this.session.$bidiHandler.isBidiRow(i.start.row))return this.drawBidiSingleLineMarker(u,i,s,f,p,d);var c=f.lineHeight,_=(i.end.column+(p||0)-i.start.column)*f.characterWidth,v=this.$getTop(i.start.row,f),m=this.$padding+i.start.column*f.characterWidth;this.elt(s,"height:"+c+"px;width:"+_+"px;top:"+v+"px;left:"+m+"px;"+(d||""))},l.prototype.drawBidiSingleLineMarker=function(u,i,s,f,p,d){var c=f.lineHeight,_=this.$getTop(i.start.row,f),v=this.$padding,m=this.session.$bidiHandler.getSelections(i.start.column,i.end.column);m.forEach(function(y){this.elt(s,"height:"+c+"px;width:"+(y.width+(p||0))+"px;top:"+_+"px;left:"+(v+y.left)+"px;"+(d||""))},this)},l.prototype.drawFullLineMarker=function(u,i,s,f,p){var d=this.$getTop(i.start.row,f),c=f.lineHeight;i.start.row!=i.end.row&&(c+=this.$getTop(i.end.row,f)-d),this.elt(s,"height:"+c+"px;top:"+d+"px;left:0;right:0;"+(p||""))},l.prototype.drawScreenLineMarker=function(u,i,s,f,p){var d=this.$getTop(i.start.row,f),c=f.lineHeight;this.elt(s,"height:"+c+"px;top:"+d+"px;left:0;right:0;"+(p||""))},l}();o.prototype.$padding=0;function r(l,u,i,s){return(l?1:0)|(u?2:0)|(i?4:0)|(s?8:0)}t.Marker=o});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,n){var a=new Set(["text","rparen","lparen"]);t.isTextToken=function(h){return a.has(h)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,n){"use strict";var a=e("../lib/oop"),h=e("../lib/dom"),o=e("../lib/lang"),r=e("./lines").Lines,l=e("../lib/event_emitter").EventEmitter,u=e("../config").nls,i=e("./text_util").isTextToken,s=function(){function f(p){this.dom=h,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",p.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new r(this.element)}return f.prototype.$updateEolChar=function(){var p=this.session.doc,d=p.getNewLineCharacter()==`
`&&p.getNewLineMode()!="windows",c=d?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=c)return this.EOL_CHAR=c,!0},f.prototype.setPadding=function(p){this.$padding=p,this.element.style.margin="0 "+p+"px"},f.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},f.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},f.prototype.$setFontMetrics=function(p){this.$fontMetrics=p,this.$fontMetrics.on("changeCharacterSize",function(d){this._signal("changeCharacterSize",d)}.bind(this)),this.$pollSizeChanges()},f.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},f.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},f.prototype.setSession=function(p){this.session=p,p&&this.$computeTabString()},f.prototype.setShowInvisibles=function(p){return this.showInvisibles==p?!1:(this.showInvisibles=p,typeof p=="string"?(this.showSpaces=/tab/i.test(p),this.showTabs=/space/i.test(p),this.showEOL=/eol/i.test(p)):this.showSpaces=this.showTabs=this.showEOL=p,this.$computeTabString(),!0)},f.prototype.setDisplayIndentGuides=function(p){return this.displayIndentGuides==p?!1:(this.displayIndentGuides=p,this.$computeTabString(),!0)},f.prototype.setHighlightIndentGuides=function(p){return this.$highlightIndentGuides===p?!1:(this.$highlightIndentGuides=p,p)},f.prototype.$computeTabString=function(){var p=this.session.getTabSize();this.tabSize=p;for(var d=this.$tabStrings=[0],c=1;c<p+1;c++)if(this.showTabs){var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_tab",_.textContent=o.stringRepeat(this.TAB_CHAR,c),d.push(_)}else d.push(this.dom.createTextNode(o.stringRepeat(" ",c),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var v="ace_indent-guide",m=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?o.stringRepeat(this.SPACE_CHAR,this.tabSize):o.stringRepeat(" ",this.tabSize),C=this.showTabs?" ace_invisible ace_invisible_tab":"",T=this.showTabs?o.stringRepeat(this.TAB_CHAR,this.tabSize):y,_=this.dom.createElement("span");_.className=v+m,_.textContent=y,this.$tabStrings[" "]=_;var _=this.dom.createElement("span");_.className=v+C,_.textContent=T,this.$tabStrings["	"]=_}},f.prototype.updateLines=function(p,d,c){if(this.config.lastRow!=p.lastRow||this.config.firstRow!=p.firstRow)return this.update(p);this.config=p;for(var _=Math.max(d,p.firstRow),v=Math.min(c,p.lastRow),m=this.element.childNodes,y=0,T=p.firstRow;T<_;T++){var D=this.session.getFoldLine(T);if(D)if(D.containsRow(_)){_=D.start.row;break}else T=D.end.row;y++}for(var C=!1,T=_,D=this.session.getNextFoldLine(T),g=D?D.start.row:1/0;T>g&&(T=D.end.row+1,D=this.session.getNextFoldLine(T,D),g=D?D.start.row:1/0),!(T>v);){var w=m[y++];if(w){this.dom.removeChildren(w),this.$renderLine(w,T,T==g?D:!1),C&&(w.style.top=this.$lines.computeLineTop(T,p,this.session)+"px");var F=p.lineHeight*this.session.getRowLength(T)+"px";w.style.height!=F&&(C=!0,w.style.height=F)}T++}if(C)for(;y<this.$lines.cells.length;){var b=this.$lines.cells[y++];b.element.style.top=this.$lines.computeLineTop(b.row,p,this.session)+"px"}},f.prototype.scrollLines=function(p){var d=this.config;if(this.config=p,this.$lines.pageChanged(d,p))return this.update(p);this.$lines.moveContainer(p);var c=p.lastRow,_=d?d.lastRow:-1;if(!d||_<p.firstRow)return this.update(p);if(c<d.firstRow)return this.update(p);if(!d||d.lastRow<p.firstRow)return this.update(p);if(p.lastRow<d.firstRow)return this.update(p);if(d.firstRow<p.firstRow)for(var v=this.session.getFoldedRowCount(d.firstRow,p.firstRow-1);v>0;v--)this.$lines.shift();if(d.lastRow>p.lastRow)for(var v=this.session.getFoldedRowCount(p.lastRow+1,d.lastRow);v>0;v--)this.$lines.pop();p.firstRow<d.firstRow&&this.$lines.unshift(this.$renderLinesFragment(p,p.firstRow,d.firstRow-1)),p.lastRow>d.lastRow&&this.$lines.push(this.$renderLinesFragment(p,d.lastRow+1,p.lastRow)),this.$highlightIndentGuide()},f.prototype.$renderLinesFragment=function(p,d,c){for(var _=[],v=d,m=this.session.getNextFoldLine(v),y=m?m.start.row:1/0;v>y&&(v=m.end.row+1,m=this.session.getNextFoldLine(v,m),y=m?m.start.row:1/0),!(v>c);){var C=this.$lines.createCell(v,p,this.session),T=C.element;this.dom.removeChildren(T),h.setStyle(T.style,"height",this.$lines.computeLineHeight(v,p,this.session)+"px"),h.setStyle(T.style,"top",this.$lines.computeLineTop(v,p,this.session)+"px"),this.$renderLine(T,v,v==y?m:!1),this.$useLineGroups()?T.className="ace_line_group":T.className="ace_line",_.push(C),v++}return _},f.prototype.update=function(p){this.$lines.moveContainer(p),this.config=p;for(var d=p.firstRow,c=p.lastRow,_=this.$lines;_.getLength();)_.pop();_.push(this.$renderLinesFragment(p,d,c))},f.prototype.$renderToken=function(p,d,c,_){for(var v=this,m=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),C,T=0;C=m.exec(_);){var D=C[1],g=C[2],w=C[3],F=C[4],b=C[5];if(!(!v.showSpaces&&g)){var E=T!=C.index?_.slice(T,C.index):"";if(T=C.index+C[0].length,E&&y.appendChild(this.dom.createTextNode(E,this.element)),D){var M=v.session.getScreenTabSize(d+C.index);y.appendChild(v.$tabStrings[M].cloneNode(!0)),d+=M-1}else if(g)if(v.showSpaces){var S=this.dom.createElement("span");S.className="ace_invisible ace_invisible_space",S.textContent=o.stringRepeat(v.SPACE_CHAR,g.length),y.appendChild(S)}else y.appendChild(this.dom.createTextNode(g,this.element));else if(w){var S=this.dom.createElement("span");S.className="ace_invisible ace_invisible_space ace_invalid",S.textContent=o.stringRepeat(v.SPACE_CHAR,w.length),y.appendChild(S)}else if(F){d+=1;var S=this.dom.createElement("span");S.style.width=v.config.characterWidth*2+"px",S.className=v.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",S.textContent=v.showSpaces?v.SPACE_CHAR:F,y.appendChild(S)}else if(b){d+=1;var S=this.dom.createElement("span");S.style.width=v.config.characterWidth*2+"px",S.className="ace_cjk",S.textContent=b,y.appendChild(S)}}}if(y.appendChild(this.dom.createTextNode(T?_.slice(T):_,this.element)),i(c.type))p.appendChild(y);else{var x="ace_"+c.type.replace(/\./g," ace_"),S=this.dom.createElement("span");c.type=="fold"&&(S.style.width=c.value.length*this.config.characterWidth+"px",S.setAttribute("title",u("Unfold code"))),S.className=x,S.appendChild(y),p.appendChild(S)}return d+_.length},f.prototype.renderIndentGuide=function(p,d,c){var _=d.search(this.$indentGuideRe);if(_<=0||_>=c)return d;if(d[0]==" "){_-=_%this.tabSize;for(var v=_/this.tabSize,m=0;m<v;m++)p.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),d.substr(_)}else if(d[0]=="	"){for(var m=0;m<_;m++)p.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),d.substr(_)}return this.$highlightIndentGuide(),d},f.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var p=this.session.doc.$lines;if(p){var d=this.session.selection.getCursor(),c=/^\s*/.exec(this.session.doc.getLine(d.row))[0].length,_=Math.floor(c/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:_,start:d.row};var v=this.session.$bracketHighlight;if(v){for(var m=this.session.$bracketHighlight.ranges,y=0;y<m.length;y++)if(d.row!==m[y].start.row){this.$highlightIndentGuideMarker.end=m[y].start.row,d.row>m[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&p[d.row]!==""&&d.column===p[d.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=d.row+1;y<p.length;y++){var C=p[y],T=/^\s*/.exec(C)[0].length;if(C!==""&&(this.$highlightIndentGuideMarker.end=y,T<=c))break}}this.$renderHighlightIndentGuide()}}},f.prototype.$clearActiveIndentGuide=function(){for(var p=this.$lines.cells,d=0;d<p.length;d++){var c=p[d],_=c.element.childNodes;if(_.length>0){for(var v=0;v<_.length;v++)if(_[v].classList&&_[v].classList.contains("ace_indent-guide-active")){_[v].classList.remove("ace_indent-guide-active");break}}}},f.prototype.$setIndentGuideActive=function(p,d){var c=this.session.doc.getLine(p.row);if(c!==""){var _=p.element.childNodes;if(_){var v=_[d-1];v&&v.classList&&v.classList.contains("ace_indent-guide")&&v.classList.add("ace_indent-guide-active")}}},f.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var p=this.$lines.cells;this.$clearActiveIndentGuide();var d=this.$highlightIndentGuideMarker.indentLevel;if(d!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var c=0;c<p.length;c++){var _=p[c];if(this.$highlightIndentGuideMarker.end&&_.row>=this.$highlightIndentGuideMarker.start+1){if(_.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(_,d)}}else for(var c=p.length-1;c>=0;c--){var _=p[c];if(this.$highlightIndentGuideMarker.end&&_.row<this.$highlightIndentGuideMarker.start){if(_.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(_,d)}}}},f.prototype.$createLineElement=function(p){var d=this.dom.createElement("div");return d.className="ace_line",d.style.height=this.config.lineHeight+"px",d},f.prototype.$renderWrappedLine=function(p,d,c){var _=0,v=0,m=c[0],y=0,C=this.$createLineElement();p.appendChild(C);for(var T=0;T<d.length;T++){var D=d[T],g=D.value;if(T==0&&this.displayIndentGuides){if(_=g.length,g=this.renderIndentGuide(C,g,m),!g)continue;_-=g.length}if(_+g.length<m)y=this.$renderToken(C,y,D,g),_+=g.length;else{for(;_+g.length>=m;)y=this.$renderToken(C,y,D,g.substring(0,m-_)),g=g.substring(m-_),_=m,C=this.$createLineElement(),p.appendChild(C),C.appendChild(this.dom.createTextNode(o.stringRepeat("\xA0",c.indent),this.element)),v++,y=0,m=c[v]||Number.MAX_VALUE;g.length!=0&&(_+=g.length,y=this.$renderToken(C,y,D,g))}}c[c.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(C,y,null,"",!0)},f.prototype.$renderSimpleLine=function(p,d){for(var c=0,_=0;_<d.length;_++){var v=d[_],m=v.value;if(!(_==0&&this.displayIndentGuides&&(m=this.renderIndentGuide(p,m),!m))){if(c+m.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(p,c,v,m);c=this.$renderToken(p,c,v,m)}}},f.prototype.$renderOverflowMessage=function(p,d,c,_,v){c&&this.$renderToken(p,d,c,_.slice(0,this.MAX_LINE_LENGTH-d));var m=this.dom.createElement("span");m.className="ace_inline_button ace_keyword ace_toggle_wrap",m.textContent=v?"<hide>":"<click to see more...>",p.appendChild(m)},f.prototype.$renderLine=function(p,d,c){if(!c&&c!=!1&&(c=this.session.getFoldLine(d)),c)var _=this.$getFoldLineTokens(d,c);else var _=this.session.getTokens(d);var v=p;if(_.length){var m=this.session.getRowSplitData(d);if(m&&m.length){this.$renderWrappedLine(p,_,m);var v=p.lastChild}else{var v=p;this.$useLineGroups()&&(v=this.$createLineElement(),p.appendChild(v)),this.$renderSimpleLine(v,_)}}else this.$useLineGroups()&&(v=this.$createLineElement(),p.appendChild(v));if(this.showEOL&&v){c&&(d=c.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=d==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,v.appendChild(y)}},f.prototype.$getFoldLineTokens=function(p,d){var c=this.session,_=[];function v(y,C,T){for(var D=0,g=0;g+y[D].value.length<C;)if(g+=y[D].value.length,D++,D==y.length)return;if(g!=C){var w=y[D].value.substring(C-g);w.length>T-C&&(w=w.substring(0,T-C)),_.push({type:y[D].type,value:w}),g=C+w.length,D+=1}for(;g<T&&D<y.length;){var w=y[D].value;w.length+g>T?_.push({type:y[D].type,value:w.substring(0,T-g)}):_.push(y[D]),g+=w.length,D+=1}}var m=c.getTokens(p);return d.walk(function(y,C,T,D,g){y!=null?_.push({type:"fold",value:y}):(g&&(m=c.getTokens(C)),m.length&&v(m,D,T))},d.end.row,this.session.getLine(d.end.row).length),_},f.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},f}();s.prototype.EOF_CHAR="\xB6",s.prototype.EOL_CHAR_LF="\xAC",s.prototype.EOL_CHAR_CRLF="\xA4",s.prototype.EOL_CHAR=s.prototype.EOL_CHAR_LF,s.prototype.TAB_CHAR="\u2014",s.prototype.SPACE_CHAR="\xB7",s.prototype.$padding=0,s.prototype.MAX_LINE_LENGTH=1e4,s.prototype.showInvisibles=!1,s.prototype.showSpaces=!1,s.prototype.showTabs=!1,s.prototype.showEOL=!1,s.prototype.displayIndentGuides=!0,s.prototype.$highlightIndentGuides=!0,s.prototype.$tabStrings=[],s.prototype.destroy={},s.prototype.onChangeTabSize=s.prototype.$computeTabString,a.implement(s.prototype,l),t.Text=s});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=function(){function o(r){this.element=a.createElement("div"),this.element.className="ace_layer ace_cursor-layer",r.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),a.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return o.prototype.$updateOpacity=function(r){for(var l=this.cursors,u=l.length;u--;)a.setStyle(l[u].style,"opacity",r?"":"0")},o.prototype.$startCssAnimation=function(){for(var r=this.cursors,l=r.length;l--;)r[l].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&a.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},o.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,a.removeCssClass(this.element,"ace_animate-blinking")},o.prototype.setPadding=function(r){this.$padding=r},o.prototype.setSession=function(r){this.session=r},o.prototype.setBlinking=function(r){r!=this.isBlinking&&(this.isBlinking=r,this.restartTimer())},o.prototype.setBlinkInterval=function(r){r!=this.blinkInterval&&(this.blinkInterval=r,this.restartTimer())},o.prototype.setSmoothBlinking=function(r){r!=this.smoothBlinking&&(this.smoothBlinking=r,a.setCssClass(this.element,"ace_smooth-blinking",r),this.$updateCursors(!0),this.restartTimer())},o.prototype.addCursor=function(){var r=a.createElement("div");return r.className="ace_cursor",this.element.appendChild(r),this.cursors.push(r),r},o.prototype.removeCursor=function(){if(this.cursors.length>1){var r=this.cursors.pop();return r.parentNode.removeChild(r),r}},o.prototype.hideCursor=function(){this.isVisible=!1,a.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},o.prototype.showCursor=function(){this.isVisible=!0,a.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},o.prototype.restartTimer=function(){var r=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,a.removeCssClass(this.element,"ace_smooth-blinking")),r(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&a.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),a.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var l=function(){this.timeoutId=setTimeout(function(){r(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){r(!0),l()},this.blinkInterval),l()}},o.prototype.getPixelPosition=function(r,l){if(!this.config||!this.session)return{left:0,top:0};r||(r=this.session.selection.getCursor());var u=this.session.documentToScreenPosition(r),i=this.$padding+(this.session.$bidiHandler.isBidiRow(u.row,r.row)?this.session.$bidiHandler.getPosLeft(u.column):u.column*this.config.characterWidth),s=(u.row-(l?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:s}},o.prototype.isCursorInView=function(r,l){return r.top>=0&&r.top<l.maxHeight},o.prototype.update=function(r){this.config=r;var l=this.session.$selectionMarkers,u=0,i=0;(l===void 0||l.length===0)&&(l=[{cursor:null}]);for(var u=0,s=l.length;u<s;u++){var f=this.getPixelPosition(l[u].cursor,!0);if(!((f.top>r.height+r.offset||f.top<0)&&u>1)){var p=this.cursors[i++]||this.addCursor(),d=p.style;this.drawCursor?this.drawCursor(p,f,r,l[u],this.session):this.isCursorInView(f,r)?(a.setStyle(d,"display","block"),a.translate(p,f.left,f.top),a.setStyle(d,"width",Math.round(r.characterWidth)+"px"),a.setStyle(d,"height",r.lineHeight+"px")):a.setStyle(d,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=f,this.restartTimer()},o.prototype.$setOverwrite=function(r){r!=this.overwrite&&(this.overwrite=r,r?a.addCssClass(this.element,"ace_overwrite-cursors"):a.removeCssClass(this.element,"ace_overwrite-cursors"))},o.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},o}();h.prototype.$padding=0,h.prototype.drawCursor=null,t.Cursor=h});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var p=function(d,c){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,v){_.__proto__=v}||function(_,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(_[m]=v[m])},p(d,c)};return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");p(d,c);function _(){this.constructor=d}d.prototype=c===null?Object.create(c):(_.prototype=c.prototype,new _)}}(),h=e("./lib/oop"),o=e("./lib/dom"),r=e("./lib/event"),l=e("./lib/event_emitter").EventEmitter,u=32768,i=function(){function p(d,c){this.element=o.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+c,this.inner=o.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),d.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addListener(this.element,"scroll",this.onScroll.bind(this)),r.addListener(this.element,"mousedown",r.preventDefault)}return p.prototype.setVisible=function(d){this.element.style.display=d?"":"none",this.isVisible=d,this.coeff=1},p}();h.implement(i.prototype,l);var s=function(p){a(d,p);function d(c,_){var v=p.call(this,c,"-v")||this;return v.scrollTop=0,v.scrollHeight=0,_.$scrollbarWidth=v.width=o.scrollbarWidth(c.ownerDocument),v.inner.style.width=v.element.style.width=(v.width||15)+5+"px",v.$minWidth=0,v}return d.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var c=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-c)/(this.coeff-c)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},d.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},d.prototype.setHeight=function(c){this.element.style.height=c+"px"},d.prototype.setScrollHeight=function(c){this.scrollHeight=c,c>u?(this.coeff=u/c,c=u):this.coeff!=1&&(this.coeff=1),this.inner.style.height=c+"px"},d.prototype.setScrollTop=function(c){this.scrollTop!=c&&(this.skipEvent=!0,this.scrollTop=c,this.element.scrollTop=c*this.coeff)},d}(i);s.prototype.setInnerHeight=s.prototype.setScrollHeight;var f=function(p){a(d,p);function d(c,_){var v=p.call(this,c,"-h")||this;return v.scrollLeft=0,v.height=_.$scrollbarWidth,v.inner.style.height=v.element.style.height=(v.height||15)+5+"px",v}return d.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},d.prototype.getHeight=function(){return this.isVisible?this.height:0},d.prototype.setWidth=function(c){this.element.style.width=c+"px"},d.prototype.setInnerWidth=function(c){this.inner.style.width=c+"px"},d.prototype.setScrollWidth=function(c){this.inner.style.width=c+"px"},d.prototype.setScrollLeft=function(c){this.scrollLeft!=c&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=c)},d}(i);t.ScrollBar=s,t.ScrollBarV=s,t.ScrollBarH=f,t.VScrollBar=s,t.HScrollBar=f});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=this&&this.__extends||function(){var f=function(p,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,_){c.__proto__=_}||function(c,_){for(var v in _)Object.prototype.hasOwnProperty.call(_,v)&&(c[v]=_[v])},f(p,d)};return function(p,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(p,d);function c(){this.constructor=p}p.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}}(),h=e("./lib/oop"),o=e("./lib/dom"),r=e("./lib/event"),l=e("./lib/event_emitter").EventEmitter;o.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var u=function(){function f(p,d){this.element=o.createElement("div"),this.element.className="ace_sb"+d,this.inner=o.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,p.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return f.prototype.setVisible=function(p){this.element.style.display=p?"":"none",this.isVisible=p,this.coeff=1},f}();h.implement(u.prototype,l);var i=function(f){a(p,f);function p(d,c){var _=f.call(this,d,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,_.parent=d,_.width=_.VScrollWidth,_.renderer=c,_.inner.style.width=_.element.style.width=(_.width||15)+"px",_.$minWidth=0,_}return p.prototype.onMouseDown=function(d,c){if(d==="mousedown"&&!(r.getButton(c)!==0||c.detail===2)){if(c.target===this.inner){var _=this,v=c.clientY,m=function(F){v=F.clientY},y=function(){clearInterval(g)},C=c.clientY,T=this.thumbTop,D=function(){if(v!==void 0){var F=_.scrollTopFromThumbTop(T+v-C);F!==_.scrollTop&&_._emit("scroll",{data:F})}};r.capture(this.inner,m,y);var g=setInterval(D,20);return r.preventDefault(c)}var w=c.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(w)}),r.preventDefault(c)}},p.prototype.getHeight=function(){return this.height},p.prototype.scrollTopFromThumbTop=function(d){var c=d*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return c=c>>0,c<0?c=0:c>this.pageHeight-this.viewHeight&&(c=this.pageHeight-this.viewHeight),c},p.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},p.prototype.setHeight=function(d){this.height=Math.max(0,d),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},p.prototype.setScrollHeight=function(d,c){this.pageHeight===d&&!c||(this.pageHeight=d,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},p.prototype.setScrollTop=function(d){this.scrollTop=d,d<0&&(d=0),this.thumbTop=d*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},p}(u);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var s=function(f){a(p,f);function p(d,c){var _=f.call(this,d,"-h")||this;return _.scrollLeft=0,_.scrollWidth=0,_.height=_.HScrollHeight,_.inner.style.height=_.element.style.height=(_.height||12)+"px",_.renderer=c,_}return p.prototype.onMouseDown=function(d,c){if(d==="mousedown"&&!(r.getButton(c)!==0||c.detail===2)){if(c.target===this.inner){var _=this,v=c.clientX,m=function(F){v=F.clientX},y=function(){clearInterval(g)},C=c.clientX,T=this.thumbLeft,D=function(){if(v!==void 0){var F=_.scrollLeftFromThumbLeft(T+v-C);F!==_.scrollLeft&&_._emit("scroll",{data:F})}};r.capture(this.inner,m,y);var g=setInterval(D,20);return r.preventDefault(c)}var w=c.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(w)}),r.preventDefault(c)}},p.prototype.getHeight=function(){return this.isVisible?this.height:0},p.prototype.scrollLeftFromThumbLeft=function(d){var c=d*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return c=c>>0,c<0?c=0:c>this.pageWidth-this.viewWidth&&(c=this.pageWidth-this.viewWidth),c},p.prototype.setWidth=function(d){this.width=Math.max(0,d),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},p.prototype.setScrollWidth=function(d,c){this.pageWidth===d&&!c||(this.pageWidth=d,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},p.prototype.setScrollLeft=function(d){this.scrollLeft=d,d<0&&(d=0),this.thumbLeft=d*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},p}(u);s.prototype.setInnerWidth=s.prototype.setScrollWidth,t.ScrollBar=i,t.ScrollBarV=i,t.ScrollBarH=s,t.VScrollBar=i,t.HScrollBar=s});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var a=e("./lib/event"),h=function(){function o(r,l){this.onRender=r,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=l||window;var u=this;this._flush=function(i){u.pending=!1;var s=u.changes;if(s&&(a.blockIdle(100),u.changes=0,u.onRender(s)),u.changes){if(u.$recursionLimit--<0)return;u.schedule()}else u.$recursionLimit=2}}return o.prototype.schedule=function(r){this.changes=this.changes|r,this.changes&&!this.pending&&(a.nextFrame(this._flush),this.pending=!0)},o.prototype.clear=function(r){var l=this.changes;return this.changes=0,l},o}();t.RenderLoop=h});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var a=e("../lib/oop"),h=e("../lib/dom"),o=e("../lib/lang"),r=e("../lib/event"),l=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,i=512,s=typeof ResizeObserver=="function",f=200,p=function(){function d(c){this.el=h.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=h.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=h.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),c.appendChild(this.el),this.$measureNode.textContent=o.stringRepeat("X",i),this.$characterSize={width:0,height:0},s?this.$addObserver():this.checkForSizeChanges()}return d.prototype.$setMeasureNodeStyles=function(c,_){c.width=c.height="auto",c.left=c.top="0px",c.visibility="hidden",c.position="absolute",c.whiteSpace="pre",l.isIE<8?c["font-family"]="inherit":c.font="inherit",c.overflow=_?"hidden":"visible"},d.prototype.checkForSizeChanges=function(c){if(c===void 0&&(c=this.$measureSizes()),c&&(this.$characterSize.width!==c.width||this.$characterSize.height!==c.height)){this.$measureNode.style.fontWeight="bold";var _=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=c,this.charSizes=Object.create(null),this.allowBoldFonts=_&&_.width===c.width&&_.height===c.height,this._emit("changeCharacterSize",{data:c})}},d.prototype.$addObserver=function(){var c=this;this.$observer=new window.ResizeObserver(function(_){c.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},d.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var c=this;return this.$pollSizeChangesTimer=r.onIdle(function _(){c.checkForSizeChanges(),r.onIdle(_,500)},500)},d.prototype.setPolling=function(c){c?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},d.prototype.$measureSizes=function(c){var _={height:(c||this.$measureNode).clientHeight,width:(c||this.$measureNode).clientWidth/i};return _.width===0||_.height===0?null:_},d.prototype.$measureCharWidth=function(c){this.$main.textContent=o.stringRepeat(c,i);var _=this.$main.getBoundingClientRect();return _.width/i},d.prototype.getCharacterWidth=function(c){var _=this.charSizes[c];return _===void 0&&(_=this.charSizes[c]=this.$measureCharWidth(c)/this.$characterSize.width),_},d.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},d.prototype.$getZoom=function(c){return!c||!c.parentElement?1:(window.getComputedStyle(c).zoom||1)*this.$getZoom(c.parentElement)},d.prototype.$initTransformMeasureNodes=function(){var c=function(_,v){return["div",{style:"position: absolute;top:"+_+"px;left:"+v+"px;"}]};this.els=h.buildDom([c(0,0),c(f,0),c(0,f),c(f,f)],this.el)},d.prototype.transformCoordinates=function(c,_){if(c){var v=this.$getZoom(this.el);c=T(1/v,c)}function m($,H,P){var q=$[1]*H[0]-$[0]*H[1];return[(-H[1]*P[0]+H[0]*P[1])/q,(+$[1]*P[0]-$[0]*P[1])/q]}function y($,H){return[$[0]-H[0],$[1]-H[1]]}function C($,H){return[$[0]+H[0],$[1]+H[1]]}function T($,H){return[$*H[0],$*H[1]]}this.els||this.$initTransformMeasureNodes();function D($){var H=$.getBoundingClientRect();return[H.left,H.top]}var g=D(this.els[0]),w=D(this.els[1]),F=D(this.els[2]),b=D(this.els[3]),E=m(y(b,w),y(b,F),y(C(w,F),C(b,g))),M=T(1+E[0],y(w,g)),S=T(1+E[1],y(F,g));if(_){var x=_,L=E[0]*x[0]/f+E[1]*x[1]/f+1,R=C(T(x[0],M),T(x[1],S));return C(T(1/L/f,R),g)}var A=y(c,g),I=m(y(M,T(E[0],A)),y(S,T(E[1],A)),A);return T(f,I)},d}();p.prototype.$characterSize={width:0,height:0},a.implement(p.prototype,u),t.FontMetrics=p});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var a=e("../lib/dom"),h=e("../lib/oop"),o=e("../lib/event_emitter").EventEmitter,r=function(){function l(u,i){this.canvas=a.createElement("canvas"),this.renderer=i,this.pixelRatio=1,this.maxHeight=i.layerConfig.maxHeight,this.lineHeight=i.layerConfig.lineHeight,this.canvasHeight=u.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=u.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},u.element.appendChild(this.canvas)}return l.prototype.$updateDecorators=function(u){var i=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(u){this.maxHeight=u.maxHeight,this.lineHeight=u.lineHeight,this.canvasHeight=u.height;var s=(u.lastRow+1)*this.lineHeight;s<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var f=this.canvas.getContext("2d");function p(b,E){return b.priority<E.priority?-1:b.priority>E.priority?1:0}var d=this.renderer.session.$annotations;if(f.clearRect(0,0,this.canvas.width,this.canvas.height),d){var c={info:1,warning:2,error:3};d.forEach(function(b){b.priority=c[b.type]||null}),d=d.sort(p);for(var _=this.renderer.session.$foldData,v=0;v<d.length;v++){var m=d[v].row,y=this.compensateFoldRows(m,_),C=Math.round((m-y)*this.lineHeight*this.heightRatio),T=Math.round((m-y)*this.lineHeight*this.heightRatio),D=Math.round(((m-y)*this.lineHeight+this.lineHeight)*this.heightRatio),g=D-T;if(g<this.minDecorationHeight){var w=(T+D)/2|0;w<this.halfMinDecorationHeight?w=this.halfMinDecorationHeight:w+this.halfMinDecorationHeight>this.canvasHeight&&(w=this.canvasHeight-this.halfMinDecorationHeight),T=Math.round(w-this.halfMinDecorationHeight),D=Math.round(w+this.halfMinDecorationHeight)}f.fillStyle=i[d[v].type]||null,f.fillRect(0,C,this.canvasWidth,D-T)}}var F=this.renderer.session.selection.getCursor();if(F){var y=this.compensateFoldRows(F.row,_),C=Math.round((F.row-y)*this.lineHeight*this.heightRatio);f.fillStyle="rgba(0, 0, 0, 0.5)",f.fillRect(0,C,this.canvasWidth,2)}},l.prototype.compensateFoldRows=function(u,i){var s=0;if(i&&i.length>0)for(var f=0;f<i.length;f++)u>i[f].start.row&&u<i[f].end.row?s+=u-i[f].start.row:u>=i[f].end.row&&(s+=i[f].end.row-i[f].start.row);return s},l}();h.implement(r.prototype,o),t.Decorator=r});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var a=e("./lib/oop"),h=e("./lib/dom"),o=e("./lib/lang"),r=e("./config"),l=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,i=e("./layer/text").Text,s=e("./layer/cursor").Cursor,f=e("./scrollbar").HScrollBar,p=e("./scrollbar").VScrollBar,d=e("./scrollbar_custom").HScrollBar,c=e("./scrollbar_custom").VScrollBar,_=e("./renderloop").RenderLoop,v=e("./layer/font_metrics").FontMetrics,m=e("./lib/event_emitter").EventEmitter,y=e("./css/editor-css"),C=e("./layer/decorators").Decorator,T=e("./lib/useragent");h.importCssString(y,"ace_editor.css",!1);var D=function(){function g(w,F){var b=this;this.container=w||h.createElement("div"),h.addCssClass(this.container,"ace_editor"),h.HI_DPI&&h.addCssClass(this.container,"ace_hidpi"),this.setTheme(F),r.get("useStrictCSP")==null&&r.set("useStrictCSP",!1),this.$gutter=h.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=h.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=h.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new l(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var E=this.$textLayer=new i(this.content);this.canvas=E.element,this.$markerFront=new u(this.content),this.$cursorLayer=new s(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new p(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.on("scroll",function(M){b.$scrollAnimation||b.session.setScrollTop(M.data-b.scrollMargin.top)}),this.scrollBarH.on("scroll",function(M){b.$scrollAnimation||b.session.setScrollLeft(M.data-b.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new v(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(M){b.updateCharacterSize(),b.onResize(!0,b.gutterWidth,b.$size.width,b.$size.height),b._signal("changeCharacterSize",M)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!T.isIOS,this.$loop=new _(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),r.resetOptions(this),r._signal("renderer",this)}return g.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),h.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},g.prototype.setSession=function(w){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=w,w&&this.scrollMargin.top&&w.getScrollTop()<=0&&w.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(w),this.$markerBack.setSession(w),this.$markerFront.setSession(w),this.$gutterLayer.setSession(w),this.$textLayer.setSession(w),w&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},g.prototype.updateLines=function(w,F,b){if(F===void 0&&(F=1/0),this.$changedLines?(this.$changedLines.firstRow>w&&(this.$changedLines.firstRow=w),this.$changedLines.lastRow<F&&(this.$changedLines.lastRow=F)):this.$changedLines={firstRow:w,lastRow:F},this.$changedLines.lastRow<this.layerConfig.firstRow)if(b)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},g.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},g.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},g.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},g.prototype.updateFull=function(w){w?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},g.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},g.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},g.prototype.onResize=function(w,F,b,E){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=w?1:0;var M=this.container;E||(E=M.clientHeight||M.scrollHeight),b||(b=M.clientWidth||M.scrollWidth);var S=this.$updateCachedSize(w,F,b,E);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!b&&!E)return this.resizing=0;w&&(this.$gutterLayer.$padding=null),w?this.$renderChanges(S|this.$changes,!0):this.$loop.schedule(S|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},g.prototype.$updateCachedSize=function(w,F,b,E){E-=this.$extraHeight||0;var M=0,S=this.$size,x={width:S.width,height:S.height,scrollerHeight:S.scrollerHeight,scrollerWidth:S.scrollerWidth};if(E&&(w||S.height!=E)&&(S.height=E,M|=this.CHANGE_SIZE,S.scrollerHeight=S.height,this.$horizScroll&&(S.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(S.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",M=M|this.CHANGE_SCROLL),b&&(w||S.width!=b)){M|=this.CHANGE_SIZE,S.width=b,F==null&&(F=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=F,h.setStyle(this.scrollBarH.element.style,"left",F+"px"),h.setStyle(this.scroller.style,"left",F+this.margin.left+"px"),S.scrollerWidth=Math.max(0,b-F-this.scrollBarV.getWidth()-this.margin.h),h.setStyle(this.$gutter.style,"left",this.margin.left+"px");var L=this.scrollBarV.getWidth()+"px";h.setStyle(this.scrollBarH.element.style,"right",L),h.setStyle(this.scroller.style,"right",L),h.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(S.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||w)&&(M|=this.CHANGE_FULL)}return S.$dirty=!b||!E,M&&this._signal("resize",x),M},g.prototype.onGutterResize=function(w){var F=this.$showGutter?w:0;F!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,F,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},g.prototype.adjustWrapLimit=function(){var w=this.$size.scrollerWidth-this.$padding*2,F=Math.floor(w/this.characterWidth);return this.session.adjustWrapLimit(F,this.$showPrintMargin&&this.$printMarginColumn)},g.prototype.setAnimatedScroll=function(w){this.setOption("animatedScroll",w)},g.prototype.getAnimatedScroll=function(){return this.$animatedScroll},g.prototype.setShowInvisibles=function(w){this.setOption("showInvisibles",w),this.session.$bidiHandler.setShowInvisibles(w)},g.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},g.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},g.prototype.setDisplayIndentGuides=function(w){this.setOption("displayIndentGuides",w)},g.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},g.prototype.setHighlightIndentGuides=function(w){this.setOption("highlightIndentGuides",w)},g.prototype.setShowPrintMargin=function(w){this.setOption("showPrintMargin",w)},g.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},g.prototype.setPrintMarginColumn=function(w){this.setOption("printMarginColumn",w)},g.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},g.prototype.getShowGutter=function(){return this.getOption("showGutter")},g.prototype.setShowGutter=function(w){return this.setOption("showGutter",w)},g.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},g.prototype.setFadeFoldWidgets=function(w){this.setOption("fadeFoldWidgets",w)},g.prototype.setHighlightGutterLine=function(w){this.setOption("highlightGutterLine",w)},g.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},g.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var w=h.createElement("div");w.className="ace_layer ace_print-margin-layer",this.$printMarginEl=h.createElement("div"),this.$printMarginEl.className="ace_print-margin",w.appendChild(this.$printMarginEl),this.content.insertBefore(w,this.content.firstChild)}var F=this.$printMarginEl.style;F.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",F.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},g.prototype.getContainerElement=function(){return this.container},g.prototype.getMouseEventTarget=function(){return this.scroller},g.prototype.getTextAreaContainer=function(){return this.container},g.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var w=this.textarea.style,F=this.$composition;if(!this.$keepTextAreaAtCursor&&!F){h.translate(this.textarea,-100,0);return}var b=this.$cursorLayer.$pixelPos;if(b){F&&F.markerRange&&(b=this.$cursorLayer.getPixelPosition(F.markerRange.start,!0));var E=this.layerConfig,M=b.top,S=b.left;M-=E.offset;var x=F&&F.useTextareaForIME||T.isMobile?this.lineHeight:1;if(M<0||M>E.height-x){h.translate(this.textarea,0,0);return}var L=1,R=this.$size.height-x;if(!F)M+=this.lineHeight;else if(F.useTextareaForIME){var A=this.textarea.value;L=this.characterWidth*this.session.$getStringScreenWidth(A)[0]}else M+=this.lineHeight+2;S-=this.scrollLeft,S>this.$size.scrollerWidth-L&&(S=this.$size.scrollerWidth-L),S+=this.gutterWidth+this.margin.left,h.setStyle(w,"height",x+"px"),h.setStyle(w,"width",L+"px"),h.translate(this.textarea,Math.min(S,this.$size.scrollerWidth-L),Math.min(M,R))}}},g.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},g.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},g.prototype.getLastFullyVisibleRow=function(){var w=this.layerConfig,F=w.lastRow,b=this.session.documentToScreenRow(F,0)*w.lineHeight;return b-this.session.getScrollTop()>w.height-w.lineHeight?F-1:F},g.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},g.prototype.setPadding=function(w){this.$padding=w,this.$textLayer.setPadding(w),this.$cursorLayer.setPadding(w),this.$markerFront.setPadding(w),this.$markerBack.setPadding(w),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},g.prototype.setScrollMargin=function(w,F,b,E){var M=this.scrollMargin;M.top=w|0,M.bottom=F|0,M.right=E|0,M.left=b|0,M.v=M.top+M.bottom,M.h=M.left+M.right,M.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-M.top),this.updateFull()},g.prototype.setMargin=function(w,F,b,E){var M=this.margin;M.top=w|0,M.bottom=F|0,M.right=E|0,M.left=b|0,M.v=M.top+M.bottom,M.h=M.left+M.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},g.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},g.prototype.setHScrollBarAlwaysVisible=function(w){this.setOption("hScrollBarAlwaysVisible",w)},g.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},g.prototype.setVScrollBarAlwaysVisible=function(w){this.setOption("vScrollBarAlwaysVisible",w)},g.prototype.$updateScrollBarV=function(){var w=this.layerConfig.maxHeight,F=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(w-=(F-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>w-F&&(w=this.scrollTop+F,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(w+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},g.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},g.prototype.freeze=function(){this.$frozen=!0},g.prototype.unfreeze=function(){this.$frozen=!1},g.prototype.$renderChanges=function(w,F){if(this.$changes&&(w|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!w&&!F){this.$changes|=w;return}if(this.$size.$dirty)return this.$changes|=w,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",w),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var b=this.layerConfig;if(w&this.CHANGE_FULL||w&this.CHANGE_SIZE||w&this.CHANGE_TEXT||w&this.CHANGE_LINES||w&this.CHANGE_SCROLL||w&this.CHANGE_H_SCROLL){if(w|=this.$computeLayerConfig()|this.$loop.clear(),b.firstRow!=this.layerConfig.firstRow&&b.firstRowScreen==this.layerConfig.firstRowScreen){var E=this.scrollTop+(b.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;E>0&&(this.scrollTop=E,w=w|this.CHANGE_SCROLL,w|=this.$computeLayerConfig()|this.$loop.clear())}b=this.layerConfig,this.$updateScrollBarV(),w&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),h.translate(this.content,-this.scrollLeft,-b.offset);var M=b.width+2*this.$padding+"px",S=b.minHeight+"px";h.setStyle(this.content.style,"width",M),h.setStyle(this.content.style,"height",S)}if(w&this.CHANGE_H_SCROLL&&(h.translate(this.content,-this.scrollLeft,-b.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),w&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(b),this.$showGutter&&this.$gutterLayer.update(b),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b),this.$markerBack.update(b),this.$markerFront.update(b),this.$cursorLayer.update(b),this.$moveTextAreaToCursor(),this._signal("afterRender",w);return}if(w&this.CHANGE_SCROLL){this.$changedLines=null,w&this.CHANGE_TEXT||w&this.CHANGE_LINES?this.$textLayer.update(b):this.$textLayer.scrollLines(b),this.$showGutter&&(w&this.CHANGE_GUTTER||w&this.CHANGE_LINES?this.$gutterLayer.update(b):this.$gutterLayer.scrollLines(b)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b),this.$markerBack.update(b),this.$markerFront.update(b),this.$cursorLayer.update(b),this.$moveTextAreaToCursor(),this._signal("afterRender",w);return}w&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(b),this.$showGutter&&this.$gutterLayer.update(b),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b)):w&this.CHANGE_LINES?((this.$updateLines()||w&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(b),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b)):w&this.CHANGE_TEXT||w&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(b),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b)):w&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(b),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(b)),w&this.CHANGE_CURSOR&&(this.$cursorLayer.update(b),this.$moveTextAreaToCursor()),w&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(b),w&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(b),this._signal("afterRender",w)},g.prototype.$autosize=function(){var w=this.session.getScreenLength()*this.lineHeight,F=this.$maxLines*this.lineHeight,b=Math.min(F,Math.max((this.$minLines||1)*this.lineHeight,w))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(b+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&b>this.$maxPixelHeight&&(b=this.$maxPixelHeight);var E=b<=2*this.lineHeight,M=!E&&w>F;if(b!=this.desiredHeight||this.$size.height!=this.desiredHeight||M!=this.$vScroll){M!=this.$vScroll&&(this.$vScroll=M,this.scrollBarV.setVisible(M));var S=this.container.clientWidth;this.container.style.height=b+"px",this.$updateCachedSize(!0,this.$gutterWidth,S,b),this.desiredHeight=b,this._signal("autosize")}},g.prototype.$computeLayerConfig=function(){var w=this.session,F=this.$size,b=F.height<=2*this.lineHeight,E=this.session.getScreenLength(),M=E*this.lineHeight,S=this.$getLongestLine(),x=!b&&(this.$hScrollBarAlwaysVisible||F.scrollerWidth-S-2*this.$padding<0),L=this.$horizScroll!==x;L&&(this.$horizScroll=x,this.scrollBarH.setVisible(x));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var A=F.scrollerHeight+this.lineHeight,I=!this.$maxLines&&this.$scrollPastEnd?(F.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;M+=I;var $=this.scrollMargin;this.session.setScrollTop(Math.max(-$.top,Math.min(this.scrollTop,M-F.scrollerHeight+$.bottom))),this.session.setScrollLeft(Math.max(-$.left,Math.min(this.scrollLeft,S+2*this.$padding-F.scrollerWidth+$.right)));var H=!b&&(this.$vScrollBarAlwaysVisible||F.scrollerHeight-M+I<0||this.scrollTop>$.top),P=R!==H;P&&(this.$vScroll=H,this.scrollBarV.setVisible(H));var q=this.scrollTop%this.lineHeight,z=Math.ceil(A/this.lineHeight)-1,N=Math.max(0,Math.round((this.scrollTop-q)/this.lineHeight)),Q=N+z,O,W,U=this.lineHeight;N=w.screenToDocumentRow(N,0);var k=w.getFoldLine(N);k&&(N=k.start.row),O=w.documentToScreenRow(N,0),W=w.getRowLength(N)*U,Q=Math.min(w.screenToDocumentRow(Q,0),w.getLength()-1),A=F.scrollerHeight+w.getRowLength(Q)*U+W,q=this.scrollTop-O*U;var te=0;return(this.layerConfig.width!=S||L)&&(te=this.CHANGE_H_SCROLL),(L||P)&&(te|=this.$updateCachedSize(!0,this.gutterWidth,F.width,F.height),this._signal("scrollbarVisibilityChanged"),P&&(S=this.$getLongestLine())),this.layerConfig={width:S,padding:this.$padding,firstRow:N,firstRowScreen:O,lastRow:Q,lineHeight:U,characterWidth:this.characterWidth,minHeight:A,maxHeight:M,offset:q,gutterOffset:U?Math.max(0,Math.ceil((q+F.height-F.scrollerHeight)/U)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(S-this.$padding),te},g.prototype.$updateLines=function(){if(this.$changedLines){var w=this.$changedLines.firstRow,F=this.$changedLines.lastRow;this.$changedLines=null;var b=this.layerConfig;if(!(w>b.lastRow+1)&&!(F<b.firstRow)){if(F===1/0){this.$showGutter&&this.$gutterLayer.update(b),this.$textLayer.update(b);return}return this.$textLayer.updateLines(b,w,F),!0}}},g.prototype.$getLongestLine=function(){var w=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(w+=1),this.$textLayer&&w>this.$textLayer.MAX_LINE_LENGTH&&(w=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(w*this.characterWidth))},g.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},g.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},g.prototype.addGutterDecoration=function(w,F){this.$gutterLayer.addGutterDecoration(w,F)},g.prototype.removeGutterDecoration=function(w,F){this.$gutterLayer.removeGutterDecoration(w,F)},g.prototype.updateBreakpoints=function(w){this._rows=w,this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.setAnnotations=function(w){this.$gutterLayer.setAnnotations(w),this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},g.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},g.prototype.showCursor=function(){this.$cursorLayer.showCursor()},g.prototype.scrollSelectionIntoView=function(w,F,b){this.scrollCursorIntoView(w,b),this.scrollCursorIntoView(F,b)},g.prototype.scrollCursorIntoView=function(w,F,b){if(this.$size.scrollerHeight!==0){var E=this.$cursorLayer.getPixelPosition(w),M=E.left,S=E.top,x=b&&b.top||0,L=b&&b.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+x>S?(F&&R+x>S+this.lineHeight&&(S-=F*this.$size.scrollerHeight),S===0&&(S=-this.scrollMargin.top),this.session.setScrollTop(S)):R+this.$size.scrollerHeight-L<S+this.lineHeight&&(F&&R+this.$size.scrollerHeight-L<S-this.lineHeight&&(S+=F*this.$size.scrollerHeight),this.session.setScrollTop(S+this.lineHeight+L-this.$size.scrollerHeight));var A=this.scrollLeft,I=2*this.layerConfig.characterWidth;M-I<A?(M-=I,M<this.$padding+I&&(M=-this.scrollMargin.left),this.session.setScrollLeft(M)):(M+=I,A+this.$size.scrollerWidth<M+this.characterWidth?this.session.setScrollLeft(Math.round(M+this.characterWidth-this.$size.scrollerWidth)):A<=this.$padding&&M-A<this.characterWidth&&this.session.setScrollLeft(0))}},g.prototype.getScrollTop=function(){return this.session.getScrollTop()},g.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},g.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},g.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},g.prototype.scrollToRow=function(w){this.session.setScrollTop(w*this.lineHeight)},g.prototype.alignCursor=function(w,F){typeof w=="number"&&(w={row:w,column:0});var b=this.$cursorLayer.getPixelPosition(w),E=this.$size.scrollerHeight-this.lineHeight,M=b.top-E*(F||0);return this.session.setScrollTop(M),M},g.prototype.$calcSteps=function(w,F){var b=0,E=this.STEPS,M=[],S=function(x,L,R){return R*(Math.pow(x-1,3)+1)+L};for(b=0;b<E;++b)M.push(S(b/this.STEPS,w,F-w));return M},g.prototype.scrollToLine=function(w,F,b,E){var M=this.$cursorLayer.getPixelPosition({row:w,column:0}),S=M.top;F&&(S-=this.$size.scrollerHeight/2);var x=this.scrollTop;this.session.setScrollTop(S),b!==!1&&this.animateScrolling(x,E)},g.prototype.animateScrolling=function(w,F){var b=this.scrollTop;if(!this.$animatedScroll)return;var E=this;if(w==b)return;if(this.$scrollAnimation){var M=this.$scrollAnimation.steps;if(M.length&&(w=M[0],w==b))return}var S=E.$calcSteps(w,b);this.$scrollAnimation={from:w,to:b,steps:S},clearInterval(this.$timer),E.session.setScrollTop(S.shift()),E.session.$scrollTop=b;function x(){E.$timer=clearInterval(E.$timer),E.$scrollAnimation=null,E.$stopAnimation=!1,F&&F()}this.$timer=setInterval(function(){if(E.$stopAnimation){x();return}if(!E.session)return clearInterval(E.$timer);S.length?(E.session.setScrollTop(S.shift()),E.session.$scrollTop=b):b!=null?(E.session.$scrollTop=-1,E.session.setScrollTop(b),b=null):x()},10)},g.prototype.scrollToY=function(w){this.scrollTop!==w&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=w)},g.prototype.scrollToX=function(w){this.scrollLeft!==w&&(this.scrollLeft=w),this.$loop.schedule(this.CHANGE_H_SCROLL)},g.prototype.scrollTo=function(w,F){this.session.setScrollTop(F),this.session.setScrollLeft(w)},g.prototype.scrollBy=function(w,F){F&&this.session.setScrollTop(this.session.getScrollTop()+F),w&&this.session.setScrollLeft(this.session.getScrollLeft()+w)},g.prototype.isScrollableBy=function(w,F){if(F<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||F>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||w<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||w>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},g.prototype.pixelToScreenCoordinates=function(w,F){var b;if(this.$hasCssTransforms){b={top:0,left:0};var E=this.$fontMetrics.transformCoordinates([w,F]);w=E[1]-this.gutterWidth-this.margin.left,F=E[0]}else b=this.scroller.getBoundingClientRect();var M=w+this.scrollLeft-b.left-this.$padding,S=M/this.characterWidth,x=Math.floor((F+this.scrollTop-b.top)/this.lineHeight),L=this.$blockCursor?Math.floor(S):Math.round(S);return{row:x,column:L,side:S-L>0?1:-1,offsetX:M}},g.prototype.screenToTextCoordinates=function(w,F){var b;if(this.$hasCssTransforms){b={top:0,left:0};var E=this.$fontMetrics.transformCoordinates([w,F]);w=E[1]-this.gutterWidth-this.margin.left,F=E[0]}else b=this.scroller.getBoundingClientRect();var M=w+this.scrollLeft-b.left-this.$padding,S=M/this.characterWidth,x=this.$blockCursor?Math.floor(S):Math.round(S),L=Math.floor((F+this.scrollTop-b.top)/this.lineHeight);return this.session.screenToDocumentPosition(L,Math.max(x,0),M)},g.prototype.textToScreenCoordinates=function(w,F){var b=this.scroller.getBoundingClientRect(),E=this.session.documentToScreenPosition(w,F),M=this.$padding+(this.session.$bidiHandler.isBidiRow(E.row,w)?this.session.$bidiHandler.getPosLeft(E.column):Math.round(E.column*this.characterWidth)),S=E.row*this.lineHeight;return{pageX:b.left+M-this.scrollLeft,pageY:b.top+S-this.scrollTop}},g.prototype.visualizeFocus=function(){h.addCssClass(this.container,"ace_focus")},g.prototype.visualizeBlur=function(){h.removeCssClass(this.container,"ace_focus")},g.prototype.showComposition=function(w){this.$composition=w,w.cssText||(w.cssText=this.textarea.style.cssText),w.useTextareaForIME==null&&(w.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(h.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):w.markerId=this.session.addMarker(w.markerRange,"ace_composition_marker","text")},g.prototype.setCompositionText=function(w){var F=this.session.selection.cursor;this.addToken(w,"composition_placeholder",F.row,F.column),this.$moveTextAreaToCursor()},g.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),h.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var w=this.session.selection.cursor;this.removeExtraToken(w.row,w.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},g.prototype.setGhostText=function(w,F){var b=this.session.selection.cursor,E=F||{row:b.row,column:b.column};this.removeGhostText();var M=w.split(`
`);if(this.addToken(M[0],"ghost_text",E.row,E.column),this.$ghostText={text:w,position:{row:E.row,column:E.column}},M.length>1){this.$ghostTextWidget={text:M.slice(1).join(`
`),row:E.row,column:E.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var S=this.$cursorLayer.getPixelPosition(E,!0),x=this.container,L=x.getBoundingClientRect().height,R=M.length*this.lineHeight,A=R<L-S.top;if(A)return;R<L?this.scrollBy(0,(M.length-1)*this.lineHeight):this.scrollBy(0,S.top)}},g.prototype.removeGhostText=function(){if(this.$ghostText){var w=this.$ghostText.position;this.removeExtraToken(w.row,w.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},g.prototype.addToken=function(w,F,b,E){var M=this.session;M.bgTokenizer.lines[b]=null;var S={type:F,value:w},x=M.getTokens(b);if(E==null||!x.length)x.push(S);else for(var L=0,R=0;R<x.length;R++){var A=x[R];if(L+=A.value.length,E<=L){var I=A.value.length-(L-E),$=A.value.slice(0,I),H=A.value.slice(I);x.splice(R,1,{type:A.type,value:$},S,{type:A.type,value:H});break}}this.updateLines(b,b)},g.prototype.removeExtraToken=function(w,F){this.session.bgTokenizer.lines[w]=null,this.updateLines(w,w)},g.prototype.setTheme=function(w,F){var b=this;if(this.$themeId=w,b._dispatchEvent("themeChange",{theme:w}),!w||typeof w=="string"){var E=w||this.$options.theme.initialValue;r.loadModule(["theme",E],M)}else M(w);function M(S){if(b.$themeId!=w)return F&&F();if(!S||!S.cssClass)throw new Error("couldn't load module "+w+" or it didn't call define");S.$id&&(b.$themeId=S.$id),h.importCssString(S.cssText,S.cssClass,b.container),b.theme&&h.removeCssClass(b.container,b.theme.cssClass);var x="padding"in S?S.padding:"padding"in(b.theme||{})?4:b.$padding;b.$padding&&x!=b.$padding&&b.setPadding(x),b.$theme=S.cssClass,b.theme=S,h.addCssClass(b.container,S.cssClass),h.setCssClass(b.container,"ace_dark",S.isDark),b.$size&&(b.$size.width=0,b.$updateSizeAsync()),b._dispatchEvent("themeLoaded",{theme:S}),F&&F()}},g.prototype.getTheme=function(){return this.$themeId},g.prototype.setStyle=function(w,F){h.setCssClass(this.container,w,F!==!1)},g.prototype.unsetStyle=function(w){h.removeCssClass(this.container,w)},g.prototype.setCursorStyle=function(w){h.setStyle(this.scroller.style,"cursor",w)},g.prototype.setMouseCursor=function(w){h.setStyle(this.scroller.style,"cursor",w)},g.prototype.attachToShadowRoot=function(){h.importCssString(y,"ace_editor.css",this.container)},g.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},g.prototype.$updateCustomScrollbar=function(w){var F=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,w===!0?(this.scrollBarV=new c(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(b){F.$scrollAnimation||F.session.setScrollTop(b.data-F.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(b){F.$scrollAnimation||F.session.setScrollLeft(b.data-F.scrollMargin.left)}),this.$scrollDecorator=new C(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new p(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.addEventListener("scroll",function(b){F.$scrollAnimation||F.session.setScrollTop(b.data-F.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(b){F.$scrollAnimation||F.session.setScrollLeft(b.data-F.scrollMargin.left)}))},g.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var w=this;this.$resizeTimer=o.delayedCall(function(){w.destroyed||w.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(F){var b=F[0].contentRect.width,E=F[0].contentRect.height;Math.abs(w.$size.width-b)>1||Math.abs(w.$size.height-E)>1?w.$resizeTimer.delay():w.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},g}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,a.implement(D.prototype,m),r.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(g){!g&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):g&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(g){this.$textLayer.setShowInvisibles(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(g){typeof g=="number"&&(this.$printMarginColumn=g),this.$showPrintMargin=!!g,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(g){this.$gutter.style.display=g?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(g){this.$gutterLayer.$useSvgGutterIcons=g},initialValue:!1},showFoldedAnnotations:{set:function(g){this.$gutterLayer.$showFoldedAnnotations=g},initialValue:!1},fadeFoldWidgets:{set:function(g){h.setCssClass(this.$gutter,"ace_fade-fold-widgets",g)},initialValue:!1},showFoldWidgets:{set:function(g){this.$gutterLayer.setShowFoldWidgets(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(g){this.$textLayer.setDisplayIndentGuides(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(g){this.$textLayer.setHighlightIndentGuides(g)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(g){this.$gutterLayer.setHighlightGutterLine(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(g){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(g){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(g){typeof g=="number"&&(g=g+"px"),this.container.style.fontSize=g,this.updateFontSize()},initialValue:12},fontFamily:{set:function(g){this.container.style.fontFamily=g,this.updateFontSize()}},maxLines:{set:function(g){this.updateFull()}},minLines:{set:function(g){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(g){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(g){g=+g||0,this.$scrollPastEnd!=g&&(this.$scrollPastEnd=g,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(g){this.$gutterLayer.$fixedWidth=!!g,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(g){this.$updateCustomScrollbar(g)},initialValue:!1},theme:{set:function(g){this.setTheme(g)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!T.isMobile&&!T.isIE}}),t.VirtualRenderer=D});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var a=e("../lib/oop"),h=e("../lib/net"),o=e("../lib/event_emitter").EventEmitter,r=e("../config");function l(f){var p="importScripts('"+h.qualifyURL(f)+"');";try{return new Blob([p],{type:"application/javascript"})}catch{var d=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,c=new d;return c.append(p),c.getBlob("application/javascript")}}function u(f){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(r.get("loadWorkerFromBlob")){var p=l(f),d=window.URL||window.webkitURL,c=d.createObjectURL(p);return new Worker(c)}return new Worker(f)}var i=function(f){f.postMessage||(f=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=f,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){a.implement(this,o),this.$createWorkerFromOldConfig=function(f,p,d,c,_){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),r.get("packaged")||!e.toUrl)c=c||r.moduleUrl(p,"worker");else{var v=this.$normalizePath;c=c||v(e.toUrl("ace/worker/worker.js",null,"_"));var m={};f.forEach(function(y){m[y]=v(e.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=u(c),_&&this.send("importScripts",_),this.$worker.postMessage({init:!0,tlns:m,module:p,classname:d}),this.$worker},this.onMessage=function(f){var p=f.data;switch(p.type){case"event":this._signal(p.name,{data:p.data});break;case"call":var d=this.callbacks[p.id];d&&(d(p.data),delete this.callbacks[p.id]);break;case"error":this.reportError(p.data);break;case"log":window.console&&console.log&&console.log.apply(console,p.data);break}},this.reportError=function(f){window.console&&console.error&&console.error(f)},this.$normalizePath=function(f){return h.qualifyURL(f)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(f){f.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(f,p){this.$worker.postMessage({command:f,args:p})},this.call=function(f,p,d){if(d){var c=this.callbackId++;this.callbacks[c]=d,p.push(c)}this.send(f,p)},this.emit=function(f,p){try{p.data&&p.data.err&&(p.data.err={message:p.data.err.message,stack:p.data.err.stack,code:p.data.err.code}),this.$worker&&this.$worker.postMessage({event:f,data:{data:p.data}})}catch(d){console.error(d.stack)}},this.attachToDocument=function(f){this.$doc&&this.terminate(),this.$doc=f,this.call("setValue",[f.getValue()]),f.on("change",this.changeListener,!0)},this.changeListener=function(f){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),f.action=="insert"?this.deltaQueue.push(f.start,f.lines):this.deltaQueue.push(f.start,f.end)},this.$sendDeltaQueue=function(){var f=this.deltaQueue;f&&(this.deltaQueue=null,f.length>50&&f.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:f}))}}).call(i.prototype);var s=function(f,p,d){var c=null,_=!1,v=Object.create(o),m=[],y=new i({messageBuffer:m,terminate:function(){},postMessage:function(T){m.push(T),c&&(_?setTimeout(C):C())}});y.setEmitSync=function(T){_=T};var C=function(){var T=m.shift();T.command?c[T.command].apply(c,T.args):T.event&&v._signal(T.event,T.data)};return v.postMessage=function(T){y.onMessage({data:T})},v.callback=function(T,D){this.postMessage({type:"call",id:D,data:T})},v.emit=function(T,D){this.postMessage({type:"event",name:T,data:D})},r.loadModule(["worker",p],function(T){for(c=new T[d](v);m.length;)C()}),y};t.UIWorkerClient=s,t.WorkerClient=i,t.createWorker=u});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var a=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,o=e("./lib/oop"),r=function(){function l(u,i,s,f,p,d){var c=this;this.length=i,this.session=u,this.doc=u.getDocument(),this.mainClass=p,this.othersClass=d,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=f,this.$onCursorChange=function(){setTimeout(function(){c.onCursorChange()})},this.$pos=s;var _=u.getUndoManager().$undoStack||u.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=_.length,this.setup(),u.selection.on("changeCursor",this.$onCursorChange)}return l.prototype.setup=function(){var u=this,i=this.doc,s=this.session;this.selectionBefore=s.selection.toJSON(),s.selection.inMultiSelectMode&&s.selection.toSingleRange(),this.pos=i.createAnchor(this.$pos.row,this.$pos.column);var f=this.pos;f.$insertRight=!0,f.detach(),f.markerId=s.addMarker(new a(f.row,f.column,f.row,f.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(p){var d=i.createAnchor(p.row,p.column);d.$insertRight=!0,d.detach(),u.others.push(d)}),s.setUndoSelect(!1)},l.prototype.showOtherMarkers=function(){if(!this.othersActive){var u=this.session,i=this;this.othersActive=!0,this.others.forEach(function(s){s.markerId=u.addMarker(new a(s.row,s.column,s.row,s.column+i.length),i.othersClass,null,!1)})}},l.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var u=0;u<this.others.length;u++)this.session.removeMarker(this.others[u].markerId)}},l.prototype.onUpdate=function(u){if(this.$updating)return this.updateAnchors(u);var i=u;if(i.start.row===i.end.row&&i.start.row===this.pos.row){this.$updating=!0;var s=u.action==="insert"?i.end.column-i.start.column:i.start.column-i.end.column,f=i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1,p=i.start.column-this.pos.column;if(this.updateAnchors(u),f&&(this.length+=s),f&&!this.session.$fromUndo){if(u.action==="insert")for(var d=this.others.length-1;d>=0;d--){var c=this.others[d],_={row:c.row,column:c.column+p};this.doc.insertMergedLines(_,u.lines)}else if(u.action==="remove")for(var d=this.others.length-1;d>=0;d--){var c=this.others[d],_={row:c.row,column:c.column+p};this.doc.remove(new a(_.row,_.column,_.row,_.column-s))}}this.$updating=!1,this.updateMarkers()}},l.prototype.updateAnchors=function(u){this.pos.onChange(u);for(var i=this.others.length;i--;)this.others[i].onChange(u);this.updateMarkers()},l.prototype.updateMarkers=function(){if(!this.$updating){var u=this,i=this.session,s=function(p,d){i.removeMarker(p.markerId),p.markerId=i.addMarker(new a(p.row,p.column,p.row,p.column+u.length),d,null,!1)};s(this.pos,this.mainClass);for(var f=this.others.length;f--;)s(this.others[f],this.othersClass)}},l.prototype.onCursorChange=function(u){if(!(this.$updating||!this.session)){var i=this.session.selection.getCursor();i.row===this.pos.row&&i.column>=this.pos.column&&i.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",u)):(this.hideOtherMarkers(),this._emit("cursorLeave",u))}},l.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},l.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var u=this.session.getUndoManager(),i=(u.$undoStack||u.$undostack).length-this.$undoStackDepth,s=0;s<i;s++)u.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},l}();o.implement(r.prototype,h),t.PlaceHolder=r});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var a=e("../lib/event"),h=e("../lib/useragent");function o(l,u){return l.row==u.row&&l.column==u.column}function r(l){var u=l.domEvent,i=u.altKey,s=u.shiftKey,f=u.ctrlKey,p=l.getAccelKey(),d=l.getButton();if(f&&h.isMac&&(d=u.button),l.editor.inMultiSelectMode&&d==2){l.editor.textInput.onContextMenu(l.domEvent);return}if(!f&&!i&&!p){d===0&&l.editor.inMultiSelectMode&&l.editor.exitMultiSelectMode();return}if(d===0){var c=l.editor,_=c.selection,v=c.inMultiSelectMode,m=l.getDocumentPosition(),y=_.getCursor(),C=l.inSelection()||_.isEmpty()&&o(m,y),T=l.x,D=l.y,g=function(H){T=H.clientX,D=H.clientY},w=c.session,F=c.renderer.pixelToScreenCoordinates(T,D),b=F,E;if(c.$mouseHandler.$enableJumpToDef)f&&i||p&&i?E=s?"block":"add":i&&c.$blockSelectEnabled&&(E="block");else if(p&&!i){if(E="add",!v&&s)return}else i&&c.$blockSelectEnabled&&(E="block");if(E&&h.isMac&&u.ctrlKey&&c.$mouseHandler.cancelContextMenu(),E=="add"){if(!v&&C)return;if(!v){var M=_.toOrientedRange();c.addSelectionMarker(M)}var S=_.rangeList.rangeAtPoint(m);c.inVirtualSelectionMode=!0,s&&(S=null,M=_.ranges[0]||M,c.removeSelectionMarker(M)),c.once("mouseup",function(){var H=_.toOrientedRange();S&&H.isEmpty()&&o(S.cursor,H.cursor)?_.substractPoint(H.cursor):(s?_.substractPoint(M.cursor):M&&(c.removeSelectionMarker(M),_.addRange(M)),_.addRange(H)),c.inVirtualSelectionMode=!1})}else if(E=="block"){l.stop(),c.inVirtualSelectionMode=!0;var x,L=[],R=function(){var H=c.renderer.pixelToScreenCoordinates(T,D),P=w.screenToDocumentPosition(H.row,H.column,H.offsetX);o(b,H)&&o(P,_.lead)||(b=H,c.selection.moveToPosition(P),c.renderer.scrollCursorIntoView(),c.removeSelectionMarkers(L),L=_.rectangularRangeBlock(b,F),c.$mouseHandler.$clickSelection&&L.length==1&&L[0].isEmpty()&&(L[0]=c.$mouseHandler.$clickSelection.clone()),L.forEach(c.addSelectionMarker,c),c.updateSelectionMarkers())};v&&!p?_.toSingleRange():!v&&p&&(x=_.toOrientedRange(),c.addSelectionMarker(x)),s?F=w.documentToScreenPosition(_.lead):_.moveToPosition(m),b={row:-1,column:-1};var A=function(H){R(),clearInterval($),c.removeSelectionMarkers(L),L.length||(L=[_.toOrientedRange()]),x&&(c.removeSelectionMarker(x),_.toSingleRange(x));for(var P=0;P<L.length;P++)_.addRange(L[P]);c.inVirtualSelectionMode=!1,c.$mouseHandler.$clickSelection=null},I=R;a.capture(c.container,g,A);var $=setInterval(function(){I()},20);return l.preventDefault()}}}t.onMouseDown=r});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(h){h.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(h){h.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(h){h.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(h){h.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(h){h.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(h){h.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(h){h.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(h){h.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(h){h.multiSelect.rangeCount>1?h.multiSelect.joinSelections():h.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(h){h.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(h){h.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(h){h.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(h){h.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(h){return h&&h.inMultiSelectMode}}];var a=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new a(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var a=e("./range_list").RangeList,h=e("./range").Range,o=e("./selection").Selection,r=e("./mouse/multi_select_handler").onMouseDown,l=e("./lib/event"),u=e("./lib/lang"),i=e("./commands/multi_select_commands");t.commands=i.defaultCommands.concat(i.multiSelectCommands);var s=e("./search").Search,f=new s;function p(y,C,T){return f.$options.wrap=!0,f.$options.needle=C,f.$options.backwards=T==-1,f.find(y)}var d=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(d.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,C){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var T=this.toOrientedRange();if(this.rangeList.add(T),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),C||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(T),this.$onAddRange(T)}y.cursor||(y.cursor=y.end);var D=this.rangeList.add(y);return this.$onAddRange(y),D.length&&this.$onRemoveRange(D),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),C||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var C=this.rangeList.removeAll();C.length&&this.$onRemoveRange(C),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var C=this.rangeList.substractPoint(y);if(C)return this.$onRemoveRange(C),C[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var C=this.rangeList.ranges.pop();y.push(C),this.rangeCount=0}for(var T=y.length;T--;){var D=this.ranges.indexOf(y[T]);this.ranges.splice(D,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),C=C||this.ranges[0],C&&!C.isEqual(this.getRange())&&this.fromOrientedRange(C)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],C=[],T=0;T<y.length;T++){var D=y[T],g=D.start.row,w=D.end.row;if(g===w)C.push(D.clone());else{for(C.push(new h(g,D.start.column,g,this.session.getLine(g).length));++g<w;)C.push(this.getLineRange(g,!0));C.push(new h(w,0,w,D.end.column))}T==0&&!this.isBackwards()&&(C=C.reverse())}this.toSingleRange();for(var T=C.length;T--;)this.addRange(C[T])},this.joinSelections=function(){var y=this.rangeList.ranges,C=y[y.length-1],T=h.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(T,C.cursor==C.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,C=y[y.length-1],T=h.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(T,C.cursor==C.start)}else{var D=this.session.documentToScreenPosition(this.cursor),g=this.session.documentToScreenPosition(this.anchor),w=this.rectangularRangeBlock(D,g);w.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,C,T){var D=[],g=y.column<C.column;if(g)var w=y.column,F=C.column,b=y.offsetX,E=C.offsetX;else var w=C.column,F=y.column,b=C.offsetX,E=y.offsetX;var M=y.row<C.row;if(M)var S=y.row,x=C.row;else var S=C.row,x=y.row;w<0&&(w=0),S<0&&(S=0),S==x&&(T=!0);for(var L,R=S;R<=x;R++){var A=h.fromPoints(this.session.screenToDocumentPosition(R,w,b),this.session.screenToDocumentPosition(R,F,E));if(A.isEmpty()){if(L&&_(A.end,L))break;L=A.end}A.cursor=g?A.start:A.end,D.push(A)}if(M&&D.reverse(),!T){for(var I=D.length-1;D[I].isEmpty()&&I>0;)I--;if(I>0)for(var $=0;D[$].isEmpty();)$++;for(var H=I;H>=$;H--)D[H].isEmpty()&&D.splice(H,1)}return D}}.call(o.prototype);var c=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var C=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",C),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var C=this.session.$selectionMarkers.indexOf(y);C!=-1&&this.session.$selectionMarkers.splice(C,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var C=this.session.$selectionMarkers,T=y.length;T--;){var D=y[T];if(D.marker){this.session.removeMarker(D.marker);var g=C.indexOf(D);g!=-1&&C.splice(g,1)}}this.session.selectionMarkerCount=C.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(i.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(i.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var C=y.command,T=y.editor;if(T.multiSelect){if(C.multiSelectAction)C.multiSelectAction=="forEach"?D=T.forEachSelection(C,y.args):C.multiSelectAction=="forEachLine"?D=T.forEachSelection(C,y.args,!0):C.multiSelectAction=="single"?(T.exitMultiSelectMode(),D=C.exec(T,y.args||{})):D=C.multiSelectAction(T,y.args||{});else{var D=C.exec(T,y.args||{});T.multiSelect.addRange(T.multiSelect.toOrientedRange()),T.multiSelect.mergeOverlappingRanges()}return D}},this.forEachSelection=function(y,C,T){if(!this.inVirtualSelectionMode){var D=T&&T.keepOrder,g=T==!0||T&&T.$byLines,w=this.session,F=this.selection,b=F.rangeList,E=(D?F:b).ranges,M;if(!E.length)return y.exec?y.exec(this,C||{}):y(this,C||{});var S=F._eventRegistry;F._eventRegistry={};var x=new o(w);this.inVirtualSelectionMode=!0;for(var L=E.length;L--;){if(g)for(;L>0&&E[L].start.row==E[L-1].end.row;)L--;x.fromOrientedRange(E[L]),x.index=L,this.selection=w.selection=x;var R=y.exec?y.exec(this,C||{}):y(this,C||{});!M&&R!==void 0&&(M=R),x.toOrientedRange(E[L])}x.detach(),this.selection=w.selection=F,this.inVirtualSelectionMode=!1,F._eventRegistry=S,F.mergeOverlappingRanges(),F.ranges[0]&&F.fromOrientedRange(F.ranges[0]);var A=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),A&&A.from==A.to&&this.renderer.animateScrolling(A.from),M}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var C=this.multiSelect.rangeList.ranges,T=[],D=0;D<C.length;D++)T.push(this.session.getTextRange(C[D]));var g=this.session.getDocument().getNewLineCharacter();y=T.join(g),y.length==(T.length-1)*g.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,C){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var T=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&C==this.multiSelect.anchor)return;var D=C==this.multiSelect.anchor?T.cursor==T.start?T.end:T.start:T.cursor;D.row!=C.row||this.session.$clipPositionToDocument(D.row,D.column).column!=C.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,C,T){if(C=C||{},C.needle=y||C.needle,C.needle==null){var D=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();C.needle=this.session.getTextRange(D)}this.$search.set(C);var g=this.$search.findAll(this.session);if(!g.length)return 0;var w=this.multiSelect;T||w.toSingleRange(g[0]);for(var F=g.length;F--;)w.addRange(g[F],!0);return D&&w.rangeList.rangeAtPoint(D.start)&&w.addRange(D,!0),g.length},this.selectMoreLines=function(y,C){var T=this.selection.toOrientedRange(),D=T.cursor==T.end,g=this.session.documentToScreenPosition(T.cursor);this.selection.$desiredColumn&&(g.column=this.selection.$desiredColumn);var w=this.session.screenToDocumentPosition(g.row+y,g.column);if(T.isEmpty())var b=w;else var F=this.session.documentToScreenPosition(D?T.end:T.start),b=this.session.screenToDocumentPosition(F.row+y,F.column);if(D){var E=h.fromPoints(w,b);E.cursor=E.start}else{var E=h.fromPoints(b,w);E.cursor=E.end}if(E.desiredColumn=g.column,!this.selection.inMultiSelectMode)this.selection.addRange(T);else if(C)var M=T.cursor;this.selection.addRange(E),M&&this.selection.substractPoint(M)},this.transposeSelections=function(y){for(var C=this.session,T=C.multiSelect,D=T.ranges,g=D.length;g--;){var w=D[g];if(w.isEmpty()){var F=C.getWordRange(w.start.row,w.start.column);w.start.row=F.start.row,w.start.column=F.start.column,w.end.row=F.end.row,w.end.column=F.end.column}}T.mergeOverlappingRanges();for(var b=[],g=D.length;g--;){var w=D[g];b.unshift(C.getTextRange(w))}y<0?b.unshift(b.pop()):b.push(b.shift());for(var g=D.length;g--;){var w=D[g],E=w.clone();C.replace(w,b[g]),w.start.row=E.start.row,w.start.column=E.start.column}T.fromOrientedRange(T.ranges[0])},this.selectMore=function(y,C,T){var D=this.session,g=D.multiSelect,w=g.toOrientedRange();if(!(w.isEmpty()&&(w=D.getWordRange(w.start.row,w.start.column),w.cursor=y==-1?w.start:w.end,this.multiSelect.addRange(w),T))){var F=D.getTextRange(w),b=p(D,F,y);b&&(b.cursor=y==-1?b.start:b.end,this.session.unfold(b),this.multiSelect.addRange(b),this.renderer.scrollCursorIntoView(null,.5)),C&&this.multiSelect.substractPoint(w.cursor)}},this.alignCursors=function(){var y=this.session,C=y.multiSelect,T=C.ranges,D=-1,g=T.filter(function(I){if(I.cursor.row==D)return!0;D=I.cursor.row});if(!T.length||g.length==T.length-1){var w=this.selection.getRange(),F=w.start.row,b=w.end.row,E=F==b;if(E){var M=this.session.getLength(),S;do S=this.session.getLine(b);while(/[=:]/.test(S)&&++b<M);do S=this.session.getLine(F);while(/[=:]/.test(S)&&--F>0);F<0&&(F=0),b>=M&&(b=M-1)}var x=this.session.removeFullLines(F,b);x=this.$reAlignText(x,E),this.session.insert({row:F,column:0},x.join(`
`)+`
`),E||(w.start.column=0,w.end.column=x[x.length-1].length),this.selection.setRange(w)}else{g.forEach(function(I){C.substractPoint(I.cursor)});var L=0,R=1/0,A=T.map(function(I){var $=I.cursor,H=y.getLine($.row),P=H.substr($.column).search(/\S/g);return P==-1&&(P=0),$.column>L&&(L=$.column),P<R&&(R=P),P});T.forEach(function(I,$){var H=I.cursor,P=L-H.column,q=A[$]-R;P>q?y.insert(H,u.stringRepeat(" ",P-q)):y.remove(new h(H.row,H.column,H.row,H.column-P+q)),I.start.column=I.end.column=L,I.start.row=I.end.row=H.row,I.cursor=I.end}),C.fromOrientedRange(T[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,C){var T=!0,D=!0,g,w,F;return y.map(function(x){var L=x.match(/(\s*)(.*?)(\s*)([=:].*)/);return L?g==null?(g=L[1].length,w=L[2].length,F=L[3].length,L):(g+w+F!=L[1].length+L[2].length+L[3].length&&(D=!1),g!=L[1].length&&(T=!1),g>L[1].length&&(g=L[1].length),w<L[2].length&&(w=L[2].length),F>L[3].length&&(F=L[3].length),L):[x]}).map(C?E:T?D?M:E:S);function b(x){return u.stringRepeat(" ",x)}function E(x){return x[2]?b(g)+x[2]+b(w-x[2].length+F)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function M(x){return x[2]?b(g+w-x[2].length)+x[2]+b(F)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function S(x){return x[2]?b(g)+x[2]+b(F)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}}}).call(c.prototype);function _(y,C){return y.row==C.row&&y.column==C.column}t.onSessionChange=function(y){var C=y.session;C&&!C.multiSelect&&(C.$selectionMarkers=[],C.selection.$initRangeList(),C.multiSelect=C.selection),this.multiSelect=C&&C.multiSelect;var T=y.oldSession;T&&(T.multiSelect.off("addRange",this.$onAddRange),T.multiSelect.off("removeRange",this.$onRemoveRange),T.multiSelect.off("multiSelect",this.$onMultiSelect),T.multiSelect.off("singleSelect",this.$onSingleSelect),T.multiSelect.lead.off("change",this.$checkMultiselectChange),T.multiSelect.anchor.off("change",this.$checkMultiselectChange)),C&&(C.multiSelect.on("addRange",this.$onAddRange),C.multiSelect.on("removeRange",this.$onRemoveRange),C.multiSelect.on("multiSelect",this.$onMultiSelect),C.multiSelect.on("singleSelect",this.$onSingleSelect),C.multiSelect.lead.on("change",this.$checkMultiselectChange),C.multiSelect.anchor.on("change",this.$checkMultiselectChange)),C&&this.inMultiSelectMode!=C.selection.inMultiSelectMode&&(C.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function v(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=t.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",r),y.commands.addCommands(i.defaultCommands),m(y))}function m(y){if(!y.textInput)return;var C=y.textInput.getElement(),T=!1;l.addListener(C,"keydown",function(g){var w=g.keyCode==18&&!(g.ctrlKey||g.shiftKey||g.metaKey);y.$blockSelectEnabled&&w?T||(y.renderer.setMouseCursor("crosshair"),T=!0):T&&D()},y),l.addListener(C,"keyup",D,y),l.addListener(C,"blur",D,y);function D(g){T&&(y.renderer.setMouseCursor(""),T=!1)}}t.MultiSelect=v,e("./config").defineOptions(c.prototype,"editor",{enableMultiselect:{set:function(y){v(this),y?this.on("mousedown",r):this.off("mousedown",r)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("../../range").Range,h=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(o,r,l){var u=o.getLine(l);return this.foldingStartMarker.test(u)?"start":r=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(u)?"end":""},this.getFoldWidgetRange=function(o,r,l){return null},this.indentationBlock=function(o,r,l){var u=/\S/,i=o.getLine(r),s=i.search(u);if(s!=-1){for(var f=l||i.length,p=o.getLength(),d=r,c=r;++r<p;){var _=o.getLine(r).search(u);if(_!=-1){if(_<=s){var v=o.getTokenAt(r,0);if(!v||v.type!=="string")break}c=r}}if(c>d){var m=o.getLine(c).length;return new a(d,f,c,m)}}},this.openingBracketBlock=function(o,r,l,u,i){var s={row:l,column:u+1},f=o.$findClosingBracket(r,s,i);if(f){var p=o.foldWidgets[f.row];return p==null&&(p=o.getFoldWidget(f.row)),p=="start"&&f.row>s.row&&(f.row--,f.column=o.getLine(f.row).length),a.fromPoints(s,f)}},this.closingBracketBlock=function(o,r,l,u,i){var s={row:l,column:u},f=o.$findOpeningBracket(r,s);if(f)return f.column++,s.column--,a.fromPoints(f,s)}}).call(h.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,n){"use strict";var a=e("../line_widgets").LineWidgets,h=e("../lib/dom"),o=e("../range").Range,r=e("../config").nls;function l(i,s,f){for(var p=0,d=i.length-1;p<=d;){var c=p+d>>1,_=f(s,i[c]);if(_>0)p=c+1;else if(_<0)d=c-1;else return c}return-(p+1)}function u(i,s,f){var p=i.getAnnotations().sort(o.comparePoints);if(p.length){var d=l(p,{row:s,column:-1},o.comparePoints);d<0&&(d=-d-1),d>=p.length?d=f>0?0:p.length-1:d===0&&f<0&&(d=p.length-1);var c=p[d];if(!(!c||!f)){if(c.row===s){do c=p[d+=f];while(c&&c.row===s);if(!c)return p.slice()}var _=[];s=c.row;do _[f<0?"unshift":"push"](c),c=p[d+=f];while(c&&c.row==s);return _.length&&_}}}t.showErrorMarker=function(i,s){var f=i.session;f.widgetManager||(f.widgetManager=new a(f),f.widgetManager.attach(i));var p=i.getCursorPosition(),d=p.row,c=f.widgetManager.getWidgetsAtRow(d).filter(function(w){return w.type=="errorMarker"})[0];c?c.destroy():d-=s;var _=u(f,d,s),v;if(_){var m=_[0];p.column=(m.pos&&typeof m.column!="number"?m.pos.sc:m.column)||0,p.row=m.row,v=i.renderer.$gutterLayer.$annotations[p.row]}else{if(c)return;v={text:[r("Looks good!")],className:"ace_ok"}}i.session.unfold(p.row),i.selection.moveToPosition(p);var y={row:p.row,fixedWidth:!0,coverGutter:!0,el:h.createElement("div"),type:"errorMarker"},C=y.el.appendChild(h.createElement("div")),T=y.el.appendChild(h.createElement("div"));T.className="error_widget_arrow "+v.className;var D=i.renderer.$cursorLayer.getPixelPosition(p).left;T.style.left=D+i.renderer.gutterWidth-5+"px",y.el.className="error_widget_wrapper",C.className="error_widget "+v.className,C.innerHTML=v.text.join("<br>"),C.appendChild(h.createElement("div"));var g=function(w,F,b){if(F===0&&(b==="esc"||b==="return"))return y.destroy(),{command:"null"}};y.destroy=function(){i.$mouseHandler.isMousePressed||(i.keyBinding.removeKeyboardHandler(g),f.widgetManager.removeLineWidget(y),i.off("changeSelection",y.destroy),i.off("changeSession",y.destroy),i.off("mouseup",y.destroy),i.off("change",y.destroy))},i.keyBinding.addKeyboardHandler(g),i.on("changeSelection",y.destroy),i.on("changeSession",y.destroy),i.on("mouseup",y.destroy),i.on("change",y.destroy),i.session.widgetManager.addLineWidget(y),y.el.onmousedown=i.focus.bind(i),i.renderer.scrollCursorIntoView(null,.5,{bottom:y.el.offsetHeight})},h.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var a=e("./lib/dom"),h=e("./range").Range,o=e("./editor").Editor,r=e("./edit_session").EditSession,l=e("./undomanager").UndoManager,u=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(i,s){if(typeof i=="string"){var f=i;if(i=document.getElementById(f),!i)throw new Error("ace.edit can't find div #"+f)}if(i&&i.env&&i.env.editor instanceof o)return i.env.editor;var p="";if(i&&/input|textarea/i.test(i.tagName)){var d=i;p=d.value,i=a.createElement("pre"),d.parentNode.replaceChild(i,d)}else i&&(p=i.textContent,i.innerHTML="");var c=t.createEditSession(p),_=new o(new u(i),c,s),v={document:c,editor:_,onResize:_.resize.bind(_,null)};return d&&(v.textarea=d),_.on("destroy",function(){v.editor.container.env=null}),_.container.env=_.env=v,_},t.createEditSession=function(i,s){var f=new r(i,s);return f.setUndoManager(new l),f},t.Range=h,t.Editor=o,t.EditSession=r,t.UndoManager=l,t.VirtualRenderer=u,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var n in e)e.hasOwnProperty(n)&&(t.ace[n]=e[n]);t.ace.default=t.ace,typeof ag=="object"&&typeof Zk=="object"&&ag&&(ag.exports=t.ace)})})()});var m2=Tt(v2=>{"use strict";v2.supports=function(...t){let n=t.reduce((a,h)=>Object.assign(a,h),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}});var Oa=Tt((t8e,g2)=>{"use strict";g2.exports=class extends Error{constructor(t,n){super(t||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var C2=Tt(dg=>{"use strict";dg.byteLength=oZ;dg.toByteArray=iZ;dg.fromByteArray=cZ;var di=[],sa=[],rZ=typeof Uint8Array<"u"?Uint8Array:Array,dE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Hc=0,y2=dE.length;Hc<y2;++Hc)di[Hc]=dE[Hc],sa[dE.charCodeAt(Hc)]=Hc;var Hc,y2;sa[45]=62;sa[95]=63;function D2(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var a=n===t?0:4-n%4;return[n,a]}function oZ(e){var t=D2(e),n=t[0],a=t[1];return(n+a)*3/4-a}function aZ(e,t,n){return(t+n)*3/4-n}function iZ(e){var t,n=D2(e),a=n[0],h=n[1],o=new rZ(aZ(e,a,h)),r=0,l=h>0?a-4:a,u;for(u=0;u<l;u+=4)t=sa[e.charCodeAt(u)]<<18|sa[e.charCodeAt(u+1)]<<12|sa[e.charCodeAt(u+2)]<<6|sa[e.charCodeAt(u+3)],o[r++]=t>>16&255,o[r++]=t>>8&255,o[r++]=t&255;return h===2&&(t=sa[e.charCodeAt(u)]<<2|sa[e.charCodeAt(u+1)]>>4,o[r++]=t&255),h===1&&(t=sa[e.charCodeAt(u)]<<10|sa[e.charCodeAt(u+1)]<<4|sa[e.charCodeAt(u+2)]>>2,o[r++]=t>>8&255,o[r++]=t&255),o}function uZ(e){return di[e>>18&63]+di[e>>12&63]+di[e>>6&63]+di[e&63]}function sZ(e,t,n){for(var a,h=[],o=t;o<n;o+=3)a=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),h.push(uZ(a));return h.join("")}function cZ(e){for(var t,n=e.length,a=n%3,h=[],o=16383,r=0,l=n-a;r<l;r+=o)h.push(sZ(e,r,r+o>l?l:r+o));return a===1?(t=e[n-1],h.push(di[t>>2]+di[t<<4&63]+"==")):a===2&&(t=(e[n-2]<<8)+e[n-1],h.push(di[t>>10]+di[t>>4&63]+di[t<<2&63]+"=")),h.join("")}});var b2=Tt(pE=>{pE.read=function(e,t,n,a,h){var o,r,l=h*8-a-1,u=(1<<l)-1,i=u>>1,s=-7,f=n?h-1:0,p=n?-1:1,d=e[t+f];for(f+=p,o=d&(1<<-s)-1,d>>=-s,s+=l;s>0;o=o*256+e[t+f],f+=p,s-=8);for(r=o&(1<<-s)-1,o>>=-s,s+=a;s>0;r=r*256+e[t+f],f+=p,s-=8);if(o===0)o=1-i;else{if(o===u)return r?NaN:(d?-1:1)*(1/0);r=r+Math.pow(2,a),o=o-i}return(d?-1:1)*r*Math.pow(2,o-a)};pE.write=function(e,t,n,a,h,o){var r,l,u,i=o*8-h-1,s=(1<<i)-1,f=s>>1,p=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=a?0:o-1,c=a?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,r=s):(r=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-r))<1&&(r--,u*=2),r+f>=1?t+=p/u:t+=p*Math.pow(2,1-f),t*u>=2&&(r++,u/=2),r+f>=s?(l=0,r=s):r+f>=1?(l=(t*u-1)*Math.pow(2,h),r=r+f):(l=t*Math.pow(2,f-1)*Math.pow(2,h),r=0));h>=8;e[n+d]=l&255,d+=c,l/=256,h-=8);for(r=r<<h|l,i+=h;i>0;e[n+d]=r&255,d+=c,r/=256,i-=8);e[n+d-c]|=_*128}});var _g=Tt(Af=>{"use strict";var hE=C2(),xf=b2(),w2=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Af.Buffer=re;Af.SlowBuffer=_Z;Af.INSPECT_MAX_BYTES=50;var pg=2147483647;Af.kMaxLength=pg;re.TYPED_ARRAY_SUPPORT=lZ();!re.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function lZ(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(re.prototype,"parent",{enumerable:!0,get:function(){if(re.isBuffer(this))return this.buffer}});Object.defineProperty(re.prototype,"offset",{enumerable:!0,get:function(){if(re.isBuffer(this))return this.byteOffset}});function ou(e){if(e>pg)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,re.prototype),t}function re(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return gE(e)}return M2(e,t,n)}re.poolSize=8192;function M2(e,t,n){if(typeof e=="string")return dZ(e,t);if(ArrayBuffer.isView(e))return pZ(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(pi(e,ArrayBuffer)||e&&pi(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pi(e,SharedArrayBuffer)||e&&pi(e.buffer,SharedArrayBuffer)))return vE(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let a=e.valueOf&&e.valueOf();if(a!=null&&a!==e)return re.from(a,t,n);let h=hZ(e);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return re.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}re.from=function(e,t,n){return M2(e,t,n)};Object.setPrototypeOf(re.prototype,Uint8Array.prototype);Object.setPrototypeOf(re,Uint8Array);function F2(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function fZ(e,t,n){return F2(e),e<=0?ou(e):t!==void 0?typeof n=="string"?ou(e).fill(t,n):ou(e).fill(t):ou(e)}re.alloc=function(e,t,n){return fZ(e,t,n)};function gE(e){return F2(e),ou(e<0?0:yE(e)|0)}re.allocUnsafe=function(e){return gE(e)};re.allocUnsafeSlow=function(e){return gE(e)};function dZ(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!re.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=x2(e,t)|0,a=ou(n),h=a.write(e,t);return h!==n&&(a=a.slice(0,h)),a}function _E(e){let t=e.length<0?0:yE(e.length)|0,n=ou(t);for(let a=0;a<t;a+=1)n[a]=e[a]&255;return n}function pZ(e){if(pi(e,Uint8Array)){let t=new Uint8Array(e);return vE(t.buffer,t.byteOffset,t.byteLength)}return _E(e)}function vE(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let a;return t===void 0&&n===void 0?a=new Uint8Array(e):n===void 0?a=new Uint8Array(e,t):a=new Uint8Array(e,t,n),Object.setPrototypeOf(a,re.prototype),a}function hZ(e){if(re.isBuffer(e)){let t=yE(e.length)|0,n=ou(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||CE(e.length)?ou(0):_E(e);if(e.type==="Buffer"&&Array.isArray(e.data))return _E(e.data)}function yE(e){if(e>=pg)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+pg.toString(16)+" bytes");return e|0}function _Z(e){return+e!=e&&(e=0),re.alloc(+e)}re.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==re.prototype};re.compare=function(t,n){if(pi(t,Uint8Array)&&(t=re.from(t,t.offset,t.byteLength)),pi(n,Uint8Array)&&(n=re.from(n,n.offset,n.byteLength)),!re.isBuffer(t)||!re.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let a=t.length,h=n.length;for(let o=0,r=Math.min(a,h);o<r;++o)if(t[o]!==n[o]){a=t[o],h=n[o];break}return a<h?-1:h<a?1:0};re.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};re.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return re.alloc(0);let a;if(n===void 0)for(n=0,a=0;a<t.length;++a)n+=t[a].length;let h=re.allocUnsafe(n),o=0;for(a=0;a<t.length;++a){let r=t[a];if(pi(r,Uint8Array))o+r.length>h.length?(re.isBuffer(r)||(r=re.from(r)),r.copy(h,o)):Uint8Array.prototype.set.call(h,r,o);else if(re.isBuffer(r))r.copy(h,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=r.length}return h};function x2(e,t){if(re.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||pi(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,a=arguments.length>2&&arguments[2]===!0;if(!a&&n===0)return 0;let h=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return mE(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return k2(e).length;default:if(h)return a?-1:mE(e).length;t=(""+t).toLowerCase(),h=!0}}re.byteLength=x2;function vZ(e,t,n){let a=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return TZ(this,t,n);case"utf8":case"utf-8":return A2(this,t,n);case"ascii":return SZ(this,t,n);case"latin1":case"binary":return EZ(this,t,n);case"base64":return bZ(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return MZ(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}re.prototype._isBuffer=!0;function Oc(e,t,n){let a=e[t];e[t]=e[n],e[n]=a}re.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)Oc(this,n,n+1);return this};re.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)Oc(this,n,n+3),Oc(this,n+1,n+2);return this};re.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)Oc(this,n,n+7),Oc(this,n+1,n+6),Oc(this,n+2,n+5),Oc(this,n+3,n+4);return this};re.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?A2(this,0,t):vZ.apply(this,arguments)};re.prototype.toLocaleString=re.prototype.toString;re.prototype.equals=function(t){if(!re.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:re.compare(this,t)===0};re.prototype.inspect=function(){let t="",n=Af.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};w2&&(re.prototype[w2]=re.prototype.inspect);re.prototype.compare=function(t,n,a,h,o){if(pi(t,Uint8Array)&&(t=re.from(t,t.offset,t.byteLength)),!re.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),a===void 0&&(a=t?t.length:0),h===void 0&&(h=0),o===void 0&&(o=this.length),n<0||a>t.length||h<0||o>this.length)throw new RangeError("out of range index");if(h>=o&&n>=a)return 0;if(h>=o)return-1;if(n>=a)return 1;if(n>>>=0,a>>>=0,h>>>=0,o>>>=0,this===t)return 0;let r=o-h,l=a-n,u=Math.min(r,l),i=this.slice(h,o),s=t.slice(n,a);for(let f=0;f<u;++f)if(i[f]!==s[f]){r=i[f],l=s[f];break}return r<l?-1:l<r?1:0};function L2(e,t,n,a,h){if(e.length===0)return-1;if(typeof n=="string"?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,CE(n)&&(n=h?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(h)return-1;n=e.length-1}else if(n<0)if(h)n=0;else return-1;if(typeof t=="string"&&(t=re.from(t,a)),re.isBuffer(t))return t.length===0?-1:S2(e,t,n,a,h);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S2(e,[t],n,a,h);throw new TypeError("val must be string, number or Buffer")}function S2(e,t,n,a,h){let o=1,r=e.length,l=t.length;if(a!==void 0&&(a=String(a).toLowerCase(),a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,r/=2,l/=2,n/=2}function u(s,f){return o===1?s[f]:s.readUInt16BE(f*o)}let i;if(h){let s=-1;for(i=n;i<r;i++)if(u(e,i)===u(t,s===-1?0:i-s)){if(s===-1&&(s=i),i-s+1===l)return s*o}else s!==-1&&(i-=i-s),s=-1}else for(n+l>r&&(n=r-l),i=n;i>=0;i--){let s=!0;for(let f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){s=!1;break}if(s)return i}return-1}re.prototype.includes=function(t,n,a){return this.indexOf(t,n,a)!==-1};re.prototype.indexOf=function(t,n,a){return L2(this,t,n,a,!0)};re.prototype.lastIndexOf=function(t,n,a){return L2(this,t,n,a,!1)};function mZ(e,t,n,a){n=Number(n)||0;let h=e.length-n;a?(a=Number(a),a>h&&(a=h)):a=h;let o=t.length;a>o/2&&(a=o/2);let r;for(r=0;r<a;++r){let l=parseInt(t.substr(r*2,2),16);if(CE(l))return r;e[n+r]=l}return r}function gZ(e,t,n,a){return hg(mE(t,e.length-n),e,n,a)}function yZ(e,t,n,a){return hg(AZ(t),e,n,a)}function DZ(e,t,n,a){return hg(k2(t),e,n,a)}function CZ(e,t,n,a){return hg(IZ(t,e.length-n),e,n,a)}re.prototype.write=function(t,n,a,h){if(n===void 0)h="utf8",a=this.length,n=0;else if(a===void 0&&typeof n=="string")h=n,a=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(a)?(a=a>>>0,h===void 0&&(h="utf8")):(h=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-n;if((a===void 0||a>o)&&(a=o),t.length>0&&(a<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let r=!1;for(;;)switch(h){case"hex":return mZ(this,t,n,a);case"utf8":case"utf-8":return gZ(this,t,n,a);case"ascii":case"latin1":case"binary":return yZ(this,t,n,a);case"base64":return DZ(this,t,n,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return CZ(this,t,n,a);default:if(r)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),r=!0}};re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function bZ(e,t,n){return t===0&&n===e.length?hE.fromByteArray(e):hE.fromByteArray(e.slice(t,n))}function A2(e,t,n){n=Math.min(e.length,n);let a=[],h=t;for(;h<n;){let o=e[h],r=null,l=o>239?4:o>223?3:o>191?2:1;if(h+l<=n){let u,i,s,f;switch(l){case 1:o<128&&(r=o);break;case 2:u=e[h+1],(u&192)===128&&(f=(o&31)<<6|u&63,f>127&&(r=f));break;case 3:u=e[h+1],i=e[h+2],(u&192)===128&&(i&192)===128&&(f=(o&15)<<12|(u&63)<<6|i&63,f>2047&&(f<55296||f>57343)&&(r=f));break;case 4:u=e[h+1],i=e[h+2],s=e[h+3],(u&192)===128&&(i&192)===128&&(s&192)===128&&(f=(o&15)<<18|(u&63)<<12|(i&63)<<6|s&63,f>65535&&f<1114112&&(r=f))}}r===null?(r=65533,l=1):r>65535&&(r-=65536,a.push(r>>>10&1023|55296),r=56320|r&1023),a.push(r),h+=l}return wZ(a)}var E2=4096;function wZ(e){let t=e.length;if(t<=E2)return String.fromCharCode.apply(String,e);let n="",a=0;for(;a<t;)n+=String.fromCharCode.apply(String,e.slice(a,a+=E2));return n}function SZ(e,t,n){let a="";n=Math.min(e.length,n);for(let h=t;h<n;++h)a+=String.fromCharCode(e[h]&127);return a}function EZ(e,t,n){let a="";n=Math.min(e.length,n);for(let h=t;h<n;++h)a+=String.fromCharCode(e[h]);return a}function TZ(e,t,n){let a=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>a)&&(n=a);let h="";for(let o=t;o<n;++o)h+=RZ[e[o]];return h}function MZ(e,t,n){let a=e.slice(t,n),h="";for(let o=0;o<a.length-1;o+=2)h+=String.fromCharCode(a[o]+a[o+1]*256);return h}re.prototype.slice=function(t,n){let a=this.length;t=~~t,n=n===void 0?a:~~n,t<0?(t+=a,t<0&&(t=0)):t>a&&(t=a),n<0?(n+=a,n<0&&(n=0)):n>a&&(n=a),n<t&&(n=t);let h=this.subarray(t,n);return Object.setPrototypeOf(h,re.prototype),h};function mr(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}re.prototype.readUintLE=re.prototype.readUIntLE=function(t,n,a){t=t>>>0,n=n>>>0,a||mr(t,n,this.length);let h=this[t],o=1,r=0;for(;++r<n&&(o*=256);)h+=this[t+r]*o;return h};re.prototype.readUintBE=re.prototype.readUIntBE=function(t,n,a){t=t>>>0,n=n>>>0,a||mr(t,n,this.length);let h=this[t+--n],o=1;for(;n>0&&(o*=256);)h+=this[t+--n]*o;return h};re.prototype.readUint8=re.prototype.readUInt8=function(t,n){return t=t>>>0,n||mr(t,1,this.length),this[t]};re.prototype.readUint16LE=re.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||mr(t,2,this.length),this[t]|this[t+1]<<8};re.prototype.readUint16BE=re.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||mr(t,2,this.length),this[t]<<8|this[t+1]};re.prototype.readUint32LE=re.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||mr(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};re.prototype.readUint32BE=re.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||mr(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};re.prototype.readBigUInt64LE=ys(function(t){t=t>>>0,Lf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&Zp(t,this.length-8);let h=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+a*2**24;return BigInt(h)+(BigInt(o)<<BigInt(32))});re.prototype.readBigUInt64BE=ys(function(t){t=t>>>0,Lf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&Zp(t,this.length-8);let h=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+a;return(BigInt(h)<<BigInt(32))+BigInt(o)});re.prototype.readIntLE=function(t,n,a){t=t>>>0,n=n>>>0,a||mr(t,n,this.length);let h=this[t],o=1,r=0;for(;++r<n&&(o*=256);)h+=this[t+r]*o;return o*=128,h>=o&&(h-=Math.pow(2,8*n)),h};re.prototype.readIntBE=function(t,n,a){t=t>>>0,n=n>>>0,a||mr(t,n,this.length);let h=n,o=1,r=this[t+--h];for(;h>0&&(o*=256);)r+=this[t+--h]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*n)),r};re.prototype.readInt8=function(t,n){return t=t>>>0,n||mr(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};re.prototype.readInt16LE=function(t,n){t=t>>>0,n||mr(t,2,this.length);let a=this[t]|this[t+1]<<8;return a&32768?a|4294901760:a};re.prototype.readInt16BE=function(t,n){t=t>>>0,n||mr(t,2,this.length);let a=this[t+1]|this[t]<<8;return a&32768?a|4294901760:a};re.prototype.readInt32LE=function(t,n){return t=t>>>0,n||mr(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};re.prototype.readInt32BE=function(t,n){return t=t>>>0,n||mr(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};re.prototype.readBigInt64LE=ys(function(t){t=t>>>0,Lf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&Zp(t,this.length-8);let h=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(a<<24);return(BigInt(h)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});re.prototype.readBigInt64BE=ys(function(t){t=t>>>0,Lf(t,"offset");let n=this[t],a=this[t+7];(n===void 0||a===void 0)&&Zp(t,this.length-8);let h=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(h)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+a)});re.prototype.readFloatLE=function(t,n){return t=t>>>0,n||mr(t,4,this.length),xf.read(this,t,!0,23,4)};re.prototype.readFloatBE=function(t,n){return t=t>>>0,n||mr(t,4,this.length),xf.read(this,t,!1,23,4)};re.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||mr(t,8,this.length),xf.read(this,t,!0,52,8)};re.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||mr(t,8,this.length),xf.read(this,t,!1,52,8)};function To(e,t,n,a,h,o){if(!re.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>h||t<o)throw new RangeError('"value" argument is out of bounds');if(n+a>e.length)throw new RangeError("Index out of range")}re.prototype.writeUintLE=re.prototype.writeUIntLE=function(t,n,a,h){if(t=+t,n=n>>>0,a=a>>>0,!h){let l=Math.pow(2,8*a)-1;To(this,t,n,a,l,0)}let o=1,r=0;for(this[n]=t&255;++r<a&&(o*=256);)this[n+r]=t/o&255;return n+a};re.prototype.writeUintBE=re.prototype.writeUIntBE=function(t,n,a,h){if(t=+t,n=n>>>0,a=a>>>0,!h){let l=Math.pow(2,8*a)-1;To(this,t,n,a,l,0)}let o=a-1,r=1;for(this[n+o]=t&255;--o>=0&&(r*=256);)this[n+o]=t/r&255;return n+a};re.prototype.writeUint8=re.prototype.writeUInt8=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,1,255,0),this[n]=t&255,n+1};re.prototype.writeUint16LE=re.prototype.writeUInt16LE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};re.prototype.writeUint16BE=re.prototype.writeUInt16BE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};re.prototype.writeUint32LE=re.prototype.writeUInt32LE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};re.prototype.writeUint32BE=re.prototype.writeUInt32BE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function I2(e,t,n,a,h){P2(t,a,h,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o=o>>8,e[n++]=o,o=o>>8,e[n++]=o,o=o>>8,e[n++]=o;let r=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=r,r=r>>8,e[n++]=r,r=r>>8,e[n++]=r,r=r>>8,e[n++]=r,n}function R2(e,t,n,a,h){P2(t,a,h,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o=o>>8,e[n+6]=o,o=o>>8,e[n+5]=o,o=o>>8,e[n+4]=o;let r=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=r,r=r>>8,e[n+2]=r,r=r>>8,e[n+1]=r,r=r>>8,e[n]=r,n+8}re.prototype.writeBigUInt64LE=ys(function(t,n=0){return I2(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});re.prototype.writeBigUInt64BE=ys(function(t,n=0){return R2(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});re.prototype.writeIntLE=function(t,n,a,h){if(t=+t,n=n>>>0,!h){let u=Math.pow(2,8*a-1);To(this,t,n,a,u-1,-u)}let o=0,r=1,l=0;for(this[n]=t&255;++o<a&&(r*=256);)t<0&&l===0&&this[n+o-1]!==0&&(l=1),this[n+o]=(t/r>>0)-l&255;return n+a};re.prototype.writeIntBE=function(t,n,a,h){if(t=+t,n=n>>>0,!h){let u=Math.pow(2,8*a-1);To(this,t,n,a,u-1,-u)}let o=a-1,r=1,l=0;for(this[n+o]=t&255;--o>=0&&(r*=256);)t<0&&l===0&&this[n+o+1]!==0&&(l=1),this[n+o]=(t/r>>0)-l&255;return n+a};re.prototype.writeInt8=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};re.prototype.writeInt16LE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};re.prototype.writeInt16BE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};re.prototype.writeInt32LE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};re.prototype.writeInt32BE=function(t,n,a){return t=+t,n=n>>>0,a||To(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};re.prototype.writeBigInt64LE=ys(function(t,n=0){return I2(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});re.prototype.writeBigInt64BE=ys(function(t,n=0){return R2(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function $2(e,t,n,a,h,o){if(n+a>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H2(e,t,n,a,h){return t=+t,n=n>>>0,h||$2(e,t,n,4,34028234663852886e22,-34028234663852886e22),xf.write(e,t,n,a,23,4),n+4}re.prototype.writeFloatLE=function(t,n,a){return H2(this,t,n,!0,a)};re.prototype.writeFloatBE=function(t,n,a){return H2(this,t,n,!1,a)};function O2(e,t,n,a,h){return t=+t,n=n>>>0,h||$2(e,t,n,8,17976931348623157e292,-17976931348623157e292),xf.write(e,t,n,a,52,8),n+8}re.prototype.writeDoubleLE=function(t,n,a){return O2(this,t,n,!0,a)};re.prototype.writeDoubleBE=function(t,n,a){return O2(this,t,n,!1,a)};re.prototype.copy=function(t,n,a,h){if(!re.isBuffer(t))throw new TypeError("argument should be a Buffer");if(a||(a=0),!h&&h!==0&&(h=this.length),n>=t.length&&(n=t.length),n||(n=0),h>0&&h<a&&(h=a),h===a||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),t.length-n<h-a&&(h=t.length-n+a);let o=h-a;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,a,h):Uint8Array.prototype.set.call(t,this.subarray(a,h),n),o};re.prototype.fill=function(t,n,a,h){if(typeof t=="string"){if(typeof n=="string"?(h=n,n=0,a=this.length):typeof a=="string"&&(h=a,a=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!re.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(t.length===1){let r=t.charCodeAt(0);(h==="utf8"&&r<128||h==="latin1")&&(t=r)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<a)throw new RangeError("Out of range index");if(a<=n)return this;n=n>>>0,a=a===void 0?this.length:a>>>0,t||(t=0);let o;if(typeof t=="number")for(o=n;o<a;++o)this[o]=t;else{let r=re.isBuffer(t)?t:re.from(t,h),l=r.length;if(l===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<a-n;++o)this[o+n]=r[o%l]}return this};var Ff={};function DE(e,t,n){Ff[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}DE("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);DE("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);DE("ERR_OUT_OF_RANGE",function(e,t,n){let a=`The value of "${e}" is out of range.`,h=n;return Number.isInteger(n)&&Math.abs(n)>2**32?h=T2(String(n)):typeof n=="bigint"&&(h=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(h=T2(h)),h+="n"),a+=` It must be ${t}. Received ${h}`,a},RangeError);function T2(e){let t="",n=e.length,a=e[0]==="-"?1:0;for(;n>=a+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function FZ(e,t,n){Lf(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&Zp(t,e.length-(n+1))}function P2(e,t,n,a,h,o){if(e>n||e<t){let r=typeof t=="bigint"?"n":"",l;throw o>3?t===0||t===BigInt(0)?l=`>= 0${r} and < 2${r} ** ${(o+1)*8}${r}`:l=`>= -(2${r} ** ${(o+1)*8-1}${r}) and < 2 ** ${(o+1)*8-1}${r}`:l=`>= ${t}${r} and <= ${n}${r}`,new Ff.ERR_OUT_OF_RANGE("value",l,e)}FZ(a,h,o)}function Lf(e,t){if(typeof e!="number")throw new Ff.ERR_INVALID_ARG_TYPE(t,"number",e)}function Zp(e,t,n){throw Math.floor(e)!==e?(Lf(e,n),new Ff.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new Ff.ERR_BUFFER_OUT_OF_BOUNDS:new Ff.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var xZ=/[^+/0-9A-Za-z-_]/g;function LZ(e){if(e=e.split("=")[0],e=e.trim().replace(xZ,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function mE(e,t){t=t||1/0;let n,a=e.length,h=null,o=[];for(let r=0;r<a;++r){if(n=e.charCodeAt(r),n>55295&&n<57344){if(!h){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(r+1===a){(t-=3)>-1&&o.push(239,191,189);continue}h=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),h=n;continue}n=(h-55296<<10|n-56320)+65536}else h&&(t-=3)>-1&&o.push(239,191,189);if(h=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return o}function AZ(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function IZ(e,t){let n,a,h,o=[];for(let r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),a=n>>8,h=n%256,o.push(h),o.push(a);return o}function k2(e){return hE.toByteArray(LZ(e))}function hg(e,t,n,a){let h;for(h=0;h<a&&!(h+n>=t.length||h>=e.length);++h)t[h+n]=e[h];return h}function pi(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function CE(e){return e!==e}var RZ=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let a=n*16;for(let h=0;h<16;++h)t[a+h]=e[n]+e[h]}return t}();function ys(e){return typeof BigInt>"u"?$Z:e}function $Z(){throw new Error("BigInt not supported")}});var wE=Tt((i8e,N2)=>{"use strict";var bE=null;N2.exports=function(){return bE===null&&(bE={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),bE}});var TE=Tt(B2=>{"use strict";var SE=Oa(),HZ=new Set(["buffer","view","utf8"]),EE=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!HZ.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new SE(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new SE(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new SE(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};B2.Encoding=EE});var LE=Tt(vg=>{"use strict";var{Buffer:FE}=_g()||{},{Encoding:xE}=TE(),OZ=wE(),eh=class extends xE{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new th({encode:this.encode,decode:t=>this.decode(FE.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},th=class extends xE{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new eh({encode:t=>{let n=this.encode(t);return FE.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},ME=class extends xE{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new eh({encode:t=>FE.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:t,textDecoder:n}=OZ();return new th({encode:a=>t.encode(this.encode(a)),decode:a=>this.decode(n.decode(a)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};vg.BufferFormat=eh;vg.ViewFormat=th;vg.UTF8Format=ME});var V2=Tt(Pc=>{"use strict";var{Buffer:Xr}=_g()||{Buffer:{isBuffer:()=>!1}},{textEncoder:U2,textDecoder:W2}=wE()(),{BufferFormat:nh,ViewFormat:AE,UTF8Format:q2}=LE(),mg=e=>e;Pc.utf8=new q2({encode:function(e){return Xr.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?W2.decode(e):String(e)},decode:mg,name:"utf8",createViewTranscoder(){return new AE({encode:function(e){return ArrayBuffer.isView(e)?e:U2.encode(e)},decode:function(e){return W2.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new nh({encode:function(e){return Xr.isBuffer(e)?e:ArrayBuffer.isView(e)?Xr.from(e.buffer,e.byteOffset,e.byteLength):Xr.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});Pc.json=new q2({encode:JSON.stringify,decode:JSON.parse,name:"json"});Pc.buffer=new nh({encode:function(e){return Xr.isBuffer(e)?e:ArrayBuffer.isView(e)?Xr.from(e.buffer,e.byteOffset,e.byteLength):Xr.from(String(e),"utf8")},decode:mg,name:"buffer",createViewTranscoder(){return new AE({encode:function(e){return ArrayBuffer.isView(e)?e:Xr.from(String(e),"utf8")},decode:function(e){return Xr.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});Pc.view=new AE({encode:function(e){return ArrayBuffer.isView(e)?e:U2.encode(e)},decode:mg,name:"view",createBufferTranscoder(){return new nh({encode:function(e){return Xr.isBuffer(e)?e:ArrayBuffer.isView(e)?Xr.from(e.buffer,e.byteOffset,e.byteLength):Xr.from(String(e),"utf8")},decode:mg,name:`${this.name}+buffer`})}});Pc.hex=new nh({encode:function(e){return Xr.isBuffer(e)?e:Xr.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});Pc.base64=new nh({encode:function(e){return Xr.isBuffer(e)?e:Xr.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})});var J2=Tt(G2=>{"use strict";var z2=Oa(),yg=V2(),{Encoding:PZ}=TE(),{BufferFormat:kZ,ViewFormat:NZ,UTF8Format:BZ}=LE(),rh=Symbol("formats"),gg=Symbol("encodings"),WZ=new Set(["buffer","view","utf8"]),IE=class{constructor(t){if(Array.isArray(t)){if(!t.every(n=>WZ.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[gg]=new Map,this[rh]=new Set(t);for(let n in yg)try{this.encoding(n)}catch(a){if(a.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw a}}encodings(){return Array.from(new Set(this[gg].values()))}encoding(t){let n=this[gg].get(t);if(n===void 0){if(typeof t=="string"&&t!==""){if(n=zZ[t],!n)throw new z2(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");n=UZ(t)}let{name:a,format:h}=n;if(!this[rh].has(h))if(this[rh].has("view"))n=n.createViewTranscoder();else if(this[rh].has("buffer"))n=n.createBufferTranscoder();else if(this[rh].has("utf8"))n=n.createUTF8Transcoder();else throw new z2(`Encoding '${a}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[t,a,n.name,n.commonName])this[gg].set(o,n)}return n}};G2.Transcoder=IE;function UZ(e){if(e instanceof PZ)return e;let t="type"in e&&typeof e.type=="string"?e.type:void 0,n=e.name||t||`anonymous-${GZ++}`;switch(qZ(e)){case"view":return new NZ({...e,name:n});case"utf8":return new BZ({...e,name:n});case"buffer":return new kZ({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function qZ(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}var VZ={binary:yg.buffer,"utf-8":yg.utf8},zZ={...yg,...VZ},GZ=0});var oN=Tt((f8e,RE)=>{"use strict";var If=typeof Reflect=="object"?Reflect:null,j2=If&&typeof If.apply=="function"?If.apply:function(t,n,a){return Function.prototype.apply.call(t,n,a)},Dg;If&&typeof If.ownKeys=="function"?Dg=If.ownKeys:Object.getOwnPropertySymbols?Dg=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Dg=function(t){return Object.getOwnPropertyNames(t)};function JZ(e){console&&console.warn&&console.warn(e)}var Q2=Number.isNaN||function(t){return t!==t};function tn(){tn.init.call(this)}RE.exports=tn;RE.exports.once=XZ;tn.EventEmitter=tn;tn.prototype._events=void 0;tn.prototype._eventsCount=0;tn.prototype._maxListeners=void 0;var K2=10;function Cg(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(tn,"defaultMaxListeners",{enumerable:!0,get:function(){return K2},set:function(e){if(typeof e!="number"||e<0||Q2(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");K2=e}});tn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};tn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Q2(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function X2(e){return e._maxListeners===void 0?tn.defaultMaxListeners:e._maxListeners}tn.prototype.getMaxListeners=function(){return X2(this)};tn.prototype.emit=function(t){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var h=t==="error",o=this._events;if(o!==void 0)h=h&&o.error===void 0;else if(!h)return!1;if(h){var r;if(n.length>0&&(r=n[0]),r instanceof Error)throw r;var l=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw l.context=r,l}var u=o[t];if(u===void 0)return!1;if(typeof u=="function")j2(u,this,n);else for(var i=u.length,s=nN(u,i),a=0;a<i;++a)j2(s[a],this,n);return!0};function Y2(e,t,n,a){var h,o,r;if(Cg(n),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),r=o[t]),r===void 0)r=o[t]=n,++e._eventsCount;else if(typeof r=="function"?r=o[t]=a?[n,r]:[r,n]:a?r.unshift(n):r.push(n),h=X2(e),h>0&&r.length>h&&!r.warned){r.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=r.length,JZ(l)}return e}tn.prototype.addListener=function(t,n){return Y2(this,t,n,!1)};tn.prototype.on=tn.prototype.addListener;tn.prototype.prependListener=function(t,n){return Y2(this,t,n,!0)};function jZ(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Z2(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},h=jZ.bind(a);return h.listener=n,a.wrapFn=h,h}tn.prototype.once=function(t,n){return Cg(n),this.on(t,Z2(this,t,n)),this};tn.prototype.prependOnceListener=function(t,n){return Cg(n),this.prependListener(t,Z2(this,t,n)),this};tn.prototype.removeListener=function(t,n){var a,h,o,r,l;if(Cg(n),h=this._events,h===void 0)return this;if(a=h[t],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete h[t],h.removeListener&&this.emit("removeListener",t,a.listener||n));else if(typeof a!="function"){for(o=-1,r=a.length-1;r>=0;r--)if(a[r]===n||a[r].listener===n){l=a[r].listener,o=r;break}if(o<0)return this;o===0?a.shift():KZ(a,o),a.length===1&&(h[t]=a[0]),h.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};tn.prototype.off=tn.prototype.removeListener;tn.prototype.removeAllListeners=function(t){var n,a,h;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var o=Object.keys(a),r;for(h=0;h<o.length;++h)r=o[h],r!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(h=n.length-1;h>=0;h--)this.removeListener(t,n[h]);return this};function eN(e,t,n){var a=e._events;if(a===void 0)return[];var h=a[t];return h===void 0?[]:typeof h=="function"?n?[h.listener||h]:[h]:n?QZ(h):nN(h,h.length)}tn.prototype.listeners=function(t){return eN(this,t,!0)};tn.prototype.rawListeners=function(t){return eN(this,t,!1)};tn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):tN.call(e,t)};tn.prototype.listenerCount=tN;function tN(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}tn.prototype.eventNames=function(){return this._eventsCount>0?Dg(this._events):[]};function nN(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}function KZ(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function QZ(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function XZ(e,t){return new Promise(function(n,a){function h(r){e.removeListener(t,o),a(r)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",h),n([].slice.call(arguments))}rN(e,t,o,{once:!0}),t!=="error"&&YZ(e,h,{once:!0})})}function YZ(e,t,n){typeof e.on=="function"&&rN(e,"error",t,n)}function rN(e,t,n,a){if(typeof e.on=="function")a.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function h(o){a.once&&e.removeEventListener(t,h),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var iN=Tt((d8e,aN)=>{aN.exports=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)});var oh=Tt($E=>{"use strict";var uN=iN();$E.fromCallback=function(e,t){if(e===void 0){var n=new Promise(function(a,h){e=function(o,r){o?h(o):a(r)}});e[t!==void 0?t:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};$E.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(n){uN(()=>t(null,n))}).catch(function(n){uN(()=>t(n))})}});var bg=Tt(HE=>{"use strict";HE.getCallback=function(e,t){return typeof e=="function"?e:t};HE.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}}});var Es=Tt(Tg=>{"use strict";var{fromCallback:OE}=oh(),Bo=Oa(),{getOptions:PE,getCallback:sN}=bg(),kc=Symbol("promise"),Rf=Symbol("callback"),hi=Symbol("working"),Nc=Symbol("handleOne"),au=Symbol("handleMany"),kE=Symbol("autoClose"),ws=Symbol("finishWork"),_i=Symbol("returnMany"),Ds=Symbol("closing"),ah=Symbol("handleClose"),wg=Symbol("closed"),ih=Symbol("closeCallbacks"),bs=Symbol("keyEncoding"),Bc=Symbol("valueEncoding"),NE=Symbol("abortOnClose"),Sg=Symbol("legacy"),BE=Symbol("keys"),WE=Symbol("values"),Cs=Symbol("limit"),ca=Symbol("count"),Eg=Object.freeze({}),ZZ=()=>{},cN=!1,uh=class{constructor(t,n,a){if(typeof t!="object"||t===null){let h=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${h}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[wg]=!1,this[ih]=[],this[hi]=!1,this[Ds]=!1,this[kE]=!1,this[Rf]=null,this[Nc]=this[Nc].bind(this),this[au]=this[au].bind(this),this[ah]=this[ah].bind(this),this[bs]=n[bs],this[Bc]=n[Bc],this[Sg]=a,this[Cs]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[ca]=0,this[NE]=!!n.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[ca]}get limit(){return this[Cs]}next(t){let n;if(t===void 0)n=new Promise((a,h)=>{t=(o,r,l)=>{o?h(o):this[Sg]?r===void 0&&l===void 0?a():a([r,l]):a(r)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[Ds]?this.nextTick(t,new Bo("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[hi]?this.nextTick(t,new Bo("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[hi]=!0,this[Rf]=t,this[ca]>=this[Cs]?this.nextTick(this[Nc],null):this._next(this[Nc])),n}_next(t){this.nextTick(t)}nextv(t,n,a){return a=sN(n,a),a=OE(a,kc),n=PE(n,Eg),Number.isInteger(t)?(this[Ds]?this.nextTick(a,new Bo("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[hi]?this.nextTick(a,new Bo("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[Cs]<1/0&&(t=Math.min(t,this[Cs]-this[ca])),this[hi]=!0,this[Rf]=a,t<=0?this.nextTick(this[au],null,[]):this._nextv(t,n,this[au])),a[kc]):(this.nextTick(a,new TypeError("The first argument 'size' must be an integer")),a[kc])}_nextv(t,n,a){let h=[],o=(r,l,u)=>{if(r)return a(r);if(this[Sg]?l===void 0&&u===void 0:l===void 0)return a(null,h);h.push(this[Sg]?[l,u]:l),h.length===t?a(null,h):this._next(o)};this._next(o)}all(t,n){return n=sN(t,n),n=OE(n,kc),t=PE(t,Eg),this[Ds]?this.nextTick(n,new Bo("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[hi]?this.nextTick(n,new Bo("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[hi]=!0,this[Rf]=n,this[kE]=!0,this[ca]>=this[Cs]?this.nextTick(this[au],null,[]):this._all(t,this[au])),n[kc]}_all(t,n){let a=this[ca],h=[],o=()=>{let l=this[Cs]<1/0?Math.min(1e3,this[Cs]-a):1e3;l<=0?this.nextTick(n,null,h):this._nextv(l,Eg,r)},r=(l,u)=>{l?n(l):u.length===0?n(null,h):(h.push.apply(h,u),a+=u.length,o())};o()}[ws](){let t=this[Rf];return this[NE]&&t===null?ZZ:(this[hi]=!1,this[Rf]=null,this[Ds]&&this._close(this[ah]),t)}[_i](t,n,a){this[kE]?this.close(t.bind(null,n,a)):t(n,a)}seek(t,n){if(n=PE(n,Eg),!this[Ds]){if(this[hi])throw new Bo("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let a=this.db.keyEncoding(n.keyEncoding||this[bs]),h=a.format;n.keyEncoding!==h&&(n={...n,keyEncoding:h});let o=this.db.prefixKey(a.encode(t),h);this._seek(o,n)}}}_seek(t,n){throw new Bo("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=OE(t,kc),this[wg]?this.nextTick(t):this[Ds]?this[ih].push(t):(this[Ds]=!0,this[ih].push(t),this[hi]?this[NE]&&this[ws]()(new Bo("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[ah])),t[kc]}_close(t){this.nextTick(t)}[ah](){this[wg]=!0,this.db.detachResource(this);let t=this[ih];this[ih]=[];for(let n of t)n()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[wg]||await this.close()}}},$f=class extends uh{constructor(t,n){super(t,n,!0),this[BE]=n.keys!==!1,this[WE]=n.values!==!1}[Nc](t,n,a){let h=this[ws]();if(t)return h(t);try{n=this[BE]&&n!==void 0?this[bs].decode(n):void 0,a=this[WE]&&a!==void 0?this[Bc].decode(a):void 0}catch(o){return h(new Ss("entry",o))}n===void 0&&a===void 0||this[ca]++,h(null,n,a)}[au](t,n){let a=this[ws]();if(t)return this[_i](a,t);try{for(let h of n){let o=h[0],r=h[1];h[0]=this[BE]&&o!==void 0?this[bs].decode(o):void 0,h[1]=this[WE]&&r!==void 0?this[Bc].decode(r):void 0}}catch(h){return this[_i](a,new Ss("entries",h))}this[ca]+=n.length,this[_i](a,null,n)}end(t){return!cN&&typeof console<"u"&&(cN=!0,console.warn(new Bo("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},UE=class extends uh{constructor(t,n){super(t,n,!1)}[Nc](t,n){let a=this[ws]();if(t)return a(t);try{n=n!==void 0?this[bs].decode(n):void 0}catch(h){return a(new Ss("key",h))}n!==void 0&&this[ca]++,a(null,n)}[au](t,n){let a=this[ws]();if(t)return this[_i](a,t);try{for(let h=0;h<n.length;h++){let o=n[h];n[h]=o!==void 0?this[bs].decode(o):void 0}}catch(h){return this[_i](a,new Ss("keys",h))}this[ca]+=n.length,this[_i](a,null,n)}},qE=class extends uh{constructor(t,n){super(t,n,!1)}[Nc](t,n){let a=this[ws]();if(t)return a(t);try{n=n!==void 0?this[Bc].decode(n):void 0}catch(h){return a(new Ss("value",h))}n!==void 0&&this[ca]++,a(null,n)}[au](t,n){let a=this[ws]();if(t)return this[_i](a,t);try{for(let h=0;h<n.length;h++){let o=n[h];n[h]=o!==void 0?this[Bc].decode(o):void 0}}catch(h){return this[_i](a,new Ss("values",h))}this[ca]+=n.length,this[_i](a,null,n)}},Ss=class extends Bo{constructor(t,n){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:n})}};for(let e of["_ended property","_nexting property","_end method"])Object.defineProperty($f.prototype,e.split(" ")[0],{get(){throw new Bo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Bo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});$f.keyEncoding=bs;$f.valueEncoding=Bc;Tg.AbstractIterator=$f;Tg.AbstractKeyIterator=UE;Tg.AbstractValueIterator=qE});var lN=Tt(VE=>{"use strict";var{AbstractKeyIterator:eee,AbstractValueIterator:tee}=Es(),Wc=Symbol("iterator"),sh=Symbol("callback"),Hf=Symbol("handleOne"),Uc=Symbol("handleMany"),ch=class extends eee{constructor(t,n){super(t,n),this[Wc]=t.iterator({...n,keys:!0,values:!1}),this[Hf]=this[Hf].bind(this),this[Uc]=this[Uc].bind(this)}},Mg=class extends tee{constructor(t,n){super(t,n),this[Wc]=t.iterator({...n,keys:!1,values:!0}),this[Hf]=this[Hf].bind(this),this[Uc]=this[Uc].bind(this)}};for(let e of[ch,Mg]){let t=e===ch,n=t?a=>a[0]:a=>a[1];e.prototype._next=function(a){this[sh]=a,this[Wc].next(this[Hf])},e.prototype[Hf]=function(a,h,o){let r=this[sh];a?r(a):r(null,t?h:o)},e.prototype._nextv=function(a,h,o){this[sh]=o,this[Wc].nextv(a,h,this[Uc])},e.prototype._all=function(a,h){this[sh]=h,this[Wc].all(a,this[Uc])},e.prototype[Uc]=function(a,h){let o=this[sh];a?o(a):o(null,h.map(n))},e.prototype._seek=function(a,h){this[Wc].seek(a,h)},e.prototype._close=function(a){this[Wc].close(a)}}VE.DefaultKeyIterator=ch;VE.DefaultValueIterator=Mg});var fN=Tt(Rg=>{"use strict";var{AbstractIterator:nee,AbstractKeyIterator:ree,AbstractValueIterator:oee}=Es(),zE=Oa(),Mo=Symbol("nut"),Ag=Symbol("undefer"),Ig=Symbol("factory"),Fg=class extends nee{constructor(t,n){super(t,n),this[Mo]=null,this[Ig]=()=>t.iterator(n),this.db.defer(()=>this[Ag]())}},xg=class extends ree{constructor(t,n){super(t,n),this[Mo]=null,this[Ig]=()=>t.keys(n),this.db.defer(()=>this[Ag]())}},Lg=class extends oee{constructor(t,n){super(t,n),this[Mo]=null,this[Ig]=()=>t.values(n),this.db.defer(()=>this[Ag]())}};for(let e of[Fg,xg,Lg])e.prototype[Ag]=function(){this.db.status==="open"&&(this[Mo]=this[Ig]())},e.prototype._next=function(t){this[Mo]!==null?this[Mo].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new zE("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,n,a){this[Mo]!==null?this[Mo].nextv(t,n,a):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,n,a)):this.nextTick(a,new zE("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,n){this[Mo]!==null?this[Mo].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(t,n)):this.nextTick(n,new zE("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,n){this[Mo]!==null?this[Mo]._seek(t,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,n))},e.prototype._close=function(t){this[Mo]!==null?this[Mo].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};Rg.DeferredIterator=Fg;Rg.DeferredKeyIterator=xg;Rg.DeferredValueIterator=Lg});var JE=Tt(pN=>{"use strict";var{fromCallback:dN}=oh(),$g=Oa(),{getCallback:aee,getOptions:iee}=bg(),Hg=Symbol("promise"),la=Symbol("status"),Of=Symbol("operations"),lh=Symbol("finishClose"),Pf=Symbol("closeCallbacks"),GE=class{constructor(t){if(typeof t!="object"||t===null){let n=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[Of]=[],this[Pf]=[],this[la]="open",this[lh]=this[lh].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[Of].length}put(t,n,a){if(this[la]!=="open")throw new $g("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let h=this.db._checkKey(t)||this.db._checkValue(n);if(h)throw h;let o=a&&a.sublevel!=null?a.sublevel:this.db,r=a,l=o.keyEncoding(a&&a.keyEncoding),u=o.valueEncoding(a&&a.valueEncoding),i=l.format;a={...a,keyEncoding:i,valueEncoding:u.format},o!==this.db&&(a.sublevel=null);let s=o.prefixKey(l.encode(t),i),f=u.encode(n);return this._put(s,f,a),this[Of].push({...r,type:"put",key:t,value:n}),this}_put(t,n,a){}del(t,n){if(this[la]!=="open")throw new $g("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let a=this.db._checkKey(t);if(a)throw a;let h=n&&n.sublevel!=null?n.sublevel:this.db,o=n,r=h.keyEncoding(n&&n.keyEncoding),l=r.format;return n={...n,keyEncoding:l},h!==this.db&&(n.sublevel=null),this._del(h.prefixKey(r.encode(t),l),n),this[Of].push({...o,type:"del",key:t}),this}_del(t,n){}clear(){if(this[la]!=="open")throw new $g("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Of]=[],this}_clear(){}write(t,n){return n=aee(t,n),n=dN(n,Hg),t=iee(t),this[la]!=="open"?this.nextTick(n,new $g("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[la]="writing",this._write(t,a=>{this[la]="closing",this[Pf].push(()=>n(a)),a||this.db.emit("batch",this[Of]),this._close(this[lh])})),n[Hg]}_write(t,n){}close(t){return t=dN(t,Hg),this[la]==="closing"?this[Pf].push(t):this[la]==="closed"?this.nextTick(t):(this[Pf].push(t),this[la]!=="writing"&&(this[la]="closing",this._close(this[lh]))),t[Hg]}_close(t){this.nextTick(t)}[lh](){this[la]="closed",this.db.detachResource(this);let t=this[Pf];this[Pf]=[];for(let n of t)n()}};pN.AbstractChainedBatch=GE});var _N=Tt(hN=>{"use strict";var{AbstractChainedBatch:uee}=JE(),see=Oa(),kf=Symbol("encoded"),jE=class extends uee{constructor(t){super(t),this[kf]=[]}_put(t,n,a){this[kf].push({...a,type:"put",key:t,value:n})}_del(t,n){this[kf].push({...n,type:"del",key:t})}_clear(){this[kf]=[]}_write(t,n){this.db.status==="opening"?this.db.defer(()=>this._write(t,n)):this.db.status==="open"?this[kf].length===0?this.nextTick(n):this.db._batch(this[kf],t,n):this.nextTick(n,new see("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};hN.DefaultChainedBatch=jE});var gN=Tt((D8e,mN)=>{"use strict";var vN=Oa(),cee=Object.prototype.hasOwnProperty,lee=new Set(["lt","lte","gt","gte"]);mN.exports=function(e,t){let n={};for(let a in e)if(cee.call(e,a)&&!(a==="keyEncoding"||a==="valueEncoding")){if(a==="start"||a==="end")throw new vN(`The legacy range option '${a}' has been removed`,{code:"LEVEL_LEGACY"});if(a==="encoding")throw new vN("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});lee.has(a)?n[a]=t.encode(e[a]):n[a]=e[a]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}});var KE=Tt((C8e,DN)=>{var yN;DN.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(yN||(yN=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var wN=Tt((b8e,bN)=>{"use strict";var CN=KE();bN.exports=function(e,...t){t.length===0?CN(e):CN(()=>e(...t))}});var SN=Tt(Og=>{"use strict";var{AbstractIterator:fee,AbstractKeyIterator:dee,AbstractValueIterator:pee}=Es(),Nf=Symbol("unfix"),Pa=Symbol("iterator"),qc=Symbol("handleOne"),Ts=Symbol("handleMany"),iu=Symbol("callback"),fh=class extends fee{constructor(t,n,a,h){super(t,n),this[Pa]=a,this[Nf]=h,this[qc]=this[qc].bind(this),this[Ts]=this[Ts].bind(this),this[iu]=null}[qc](t,n,a){let h=this[iu];if(t)return h(t);n!==void 0&&(n=this[Nf](n)),h(t,n,a)}[Ts](t,n){let a=this[iu];if(t)return a(t);for(let h of n){let o=h[0];o!==void 0&&(h[0]=this[Nf](o))}a(t,n)}},dh=class extends dee{constructor(t,n,a,h){super(t,n),this[Pa]=a,this[Nf]=h,this[qc]=this[qc].bind(this),this[Ts]=this[Ts].bind(this),this[iu]=null}[qc](t,n){let a=this[iu];if(t)return a(t);n!==void 0&&(n=this[Nf](n)),a(t,n)}[Ts](t,n){let a=this[iu];if(t)return a(t);for(let h=0;h<n.length;h++){let o=n[h];o!==void 0&&(n[h]=this[Nf](o))}a(t,n)}},ph=class extends pee{constructor(t,n,a){super(t,n),this[Pa]=a}};for(let e of[fh,dh])e.prototype._next=function(t){this[iu]=t,this[Pa].next(this[qc])},e.prototype._nextv=function(t,n,a){this[iu]=a,this[Pa].nextv(t,n,this[Ts])},e.prototype._all=function(t,n){this[iu]=n,this[Pa].all(t,this[Ts])};for(let e of[ph])e.prototype._next=function(t){this[Pa].next(t)},e.prototype._nextv=function(t,n,a){this[Pa].nextv(t,n,a)},e.prototype._all=function(t,n){this[Pa].all(t,n)};for(let e of[fh,dh,ph])e.prototype._seek=function(t,n){this[Pa].seek(t,n)},e.prototype._close=function(t){this[Pa].close(t)};Og.AbstractSublevelIterator=fh;Og.AbstractSublevelKeyIterator=dh;Og.AbstractSublevelValueIterator=ph});var FN=Tt((S8e,MN)=>{"use strict";var QE=Oa(),{Buffer:ZE}=_g()||{},{AbstractSublevelIterator:hee,AbstractSublevelKeyIterator:_ee,AbstractSublevelValueIterator:vee}=SN(),uu=Symbol("prefix"),EN=Symbol("upperBound"),hh=Symbol("prefixRange"),Wo=Symbol("parent"),XE=Symbol("unfix"),TN=new TextEncoder,mee={separator:"!"};MN.exports=function({AbstractLevel:e}){class t extends e{static defaults(a){if(typeof a=="string")throw new QE("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(a&&a.open)throw new QE("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return a==null?mee:a.separator?a:{...a,separator:"!"}}constructor(a,h,o){let{separator:r,manifest:l,...u}=t.defaults(o);h=yee(h,r);let i=r.charCodeAt(0)+1,s=a[Wo]||a;if(!TN.encode(h).every(d=>d>i&&d<127))throw new QE(`Prefix must use bytes > ${i} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(gee(s,l),u);let f=(a.prefix||"")+r+h+r,p=f.slice(0,-1)+String.fromCharCode(i);this[Wo]=s,this[uu]=new Pg(f),this[EN]=new Pg(p),this[XE]=new eT,this.nextTick=s.nextTick}prefixKey(a,h){if(h==="utf8")return this[uu].utf8+a;if(a.byteLength===0)return this[uu][h];if(h==="view"){let o=this[uu].view,r=new Uint8Array(o.byteLength+a.byteLength);return r.set(o,0),r.set(a,o.byteLength),r}else{let o=this[uu].buffer;return ZE.concat([o,a],o.byteLength+a.byteLength)}}[hh](a,h){a.gte!==void 0?a.gte=this.prefixKey(a.gte,h):a.gt!==void 0?a.gt=this.prefixKey(a.gt,h):a.gte=this[uu][h],a.lte!==void 0?a.lte=this.prefixKey(a.lte,h):a.lt!==void 0?a.lt=this.prefixKey(a.lt,h):a.lte=this[EN][h]}get prefix(){return this[uu].utf8}get db(){return this[Wo]}_open(a,h){this[Wo].open({passive:!0},h)}_put(a,h,o,r){this[Wo].put(a,h,o,r)}_get(a,h,o){this[Wo].get(a,h,o)}_getMany(a,h,o){this[Wo].getMany(a,h,o)}_del(a,h,o){this[Wo].del(a,h,o)}_batch(a,h,o){this[Wo].batch(a,h,o)}_clear(a,h){this[hh](a,a.keyEncoding),this[Wo].clear(a,h)}_iterator(a){this[hh](a,a.keyEncoding);let h=this[Wo].iterator(a),o=this[XE].get(this[uu].utf8.length,a.keyEncoding);return new hee(this,a,h,o)}_keys(a){this[hh](a,a.keyEncoding);let h=this[Wo].keys(a),o=this[XE].get(this[uu].utf8.length,a.keyEncoding);return new _ee(this,a,h,o)}_values(a){this[hh](a,a.keyEncoding);let h=this[Wo].values(a);return new vee(this,a,h)}}return{AbstractSublevel:t}};var gee=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:YE(e,"utf8"),buffer:YE(e,"buffer"),view:YE(e,"view")}}},YE=function(e,t){return e.supports.encodings[t]?e.keyEncoding(t).name===t:!1},Pg=class{constructor(t){this.utf8=t,this.view=TN.encode(t),this.buffer=ZE?ZE.from(this.view.buffer,0,this.view.byteLength):{}}},eT=class{constructor(){this.cache=new Map}get(t,n){let a=this.cache.get(n);return a===void 0&&(n==="view"?a=function(h,o){return o.subarray(h)}.bind(null,t):a=function(h,o){return o.slice(h)}.bind(null,t),this.cache.set(n,a)),a}},yee=function(e,t){let n=0,a=e.length;for(;n<a&&e[n]===t;)n++;for(;a>n&&e[a-1]===t;)a--;return e.slice(n,a)}});var aT=Tt(oT=>{"use strict";var{supports:Dee}=m2(),{Transcoder:Cee}=J2(),{EventEmitter:bee}=oN(),{fromCallback:Ms}=oh(),ka=Oa(),{AbstractIterator:Vc}=Es(),{DefaultKeyIterator:wee,DefaultValueIterator:See}=lN(),{DeferredIterator:Eee,DeferredKeyIterator:Tee,DeferredValueIterator:Mee}=fN(),{DefaultChainedBatch:xN}=_N(),{getCallback:zc,getOptions:Fs}=bg(),kg=gN(),St=Symbol("promise"),su=Symbol("landed"),Gc=Symbol("resources"),tT=Symbol("closeResources"),_h=Symbol("operations"),vh=Symbol("undefer"),Ng=Symbol("deferOpen"),LN=Symbol("options"),Lt=Symbol("status"),Jc=Symbol("defaultOptions"),Bf=Symbol("transcoder"),Bg=Symbol("keyEncoding"),nT=Symbol("valueEncoding"),Fee=()=>{},mh=class extends bee{constructor(t,n){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");n=Fs(n);let{keyEncoding:a,valueEncoding:h,passive:o,...r}=n;this[Gc]=new Set,this[_h]=[],this[Ng]=!0,this[LN]=r,this[Lt]="opening",this.supports=Dee(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Bf]=new Cee(xee(this)),this[Bg]=this[Bf].encoding(a||"utf8"),this[nT]=this[Bf].encoding(h||"utf8");for(let l of this[Bf].encodings())this.supports.encodings[l.commonName]||(this.supports.encodings[l.commonName]=!0);this[Jc]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Bg].commonName,valueEncoding:this[nT].commonName}),key:Object.freeze({keyEncoding:this[Bg].commonName})},this.nextTick(()=>{this[Ng]&&this.open({passive:!1},Fee)})}get status(){return this[Lt]}keyEncoding(t){return this[Bf].encoding(t??this[Bg])}valueEncoding(t){return this[Bf].encoding(t??this[nT])}open(t,n){n=zc(t,n),n=Ms(n,St),t={...this[LN],...Fs(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;let a=h=>{this[Lt]==="closing"||this[Lt]==="opening"?this.once(su,h?()=>a(h):a):this[Lt]!=="open"?n(new ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:h})):n()};return t.passive?this[Lt]==="opening"?this.once(su,a):this.nextTick(a):this[Lt]==="closed"||this[Ng]?(this[Ng]=!1,this[Lt]="opening",this.emit("opening"),this._open(t,h=>{if(h){this[Lt]="closed",this[tT](()=>{this.emit(su),a(h)}),this[vh]();return}this[Lt]="open",this[vh](),this.emit(su),this[Lt]==="open"&&this.emit("open"),this[Lt]==="open"&&this.emit("ready"),a()})):this[Lt]==="open"?this.nextTick(a):this.once(su,()=>this.open(t,n)),n[St]}_open(t,n){this.nextTick(n)}close(t){t=Ms(t,St);let n=a=>{this[Lt]==="opening"||this[Lt]==="closing"?this.once(su,a?n(a):n):this[Lt]!=="closed"?t(new ka("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:a})):t()};if(this[Lt]==="open"){this[Lt]="closing",this.emit("closing");let a=h=>{this[Lt]="open",this[vh](),this.emit(su),n(h)};this[tT](()=>{this._close(h=>{if(h)return a(h);this[Lt]="closed",this[vh](),this.emit(su),this[Lt]==="closed"&&this.emit("closed"),n()})})}else this[Lt]==="closed"?this.nextTick(n):this.once(su,()=>this.close(t));return t[St]}[tT](t){if(this[Gc].size===0)return this.nextTick(t);let n=this[Gc].size,a=!0,h=()=>{--n===0&&(a?this.nextTick(t):t())};for(let o of this[Gc])o.close(h);a=!1,this[Gc].clear()}_close(t){this.nextTick(t)}get(t,n,a){if(a=zc(n,a),a=Ms(a,St),n=Fs(n,this[Jc].entry),this[Lt]==="opening")return this.defer(()=>this.get(t,n,a)),a[St];if(Wf(this,a))return a[St];let h=this._checkKey(t);if(h)return this.nextTick(a,h),a[St];let o=this.keyEncoding(n.keyEncoding),r=this.valueEncoding(n.valueEncoding),l=o.format,u=r.format;return(n.keyEncoding!==l||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:l,valueEncoding:u})),this._get(this.prefixKey(o.encode(t),l),n,(i,s)=>{if(i)return(i.code==="LEVEL_NOT_FOUND"||i.notFound||/NotFound/i.test(i))&&(i.code||(i.code="LEVEL_NOT_FOUND"),i.notFound||(i.notFound=!0),i.status||(i.status=404)),a(i);try{s=r.decode(s)}catch(f){return a(new ka("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:f}))}a(null,s)}),a[St]}_get(t,n,a){this.nextTick(a,new Error("NotFound"))}getMany(t,n,a){if(a=zc(n,a),a=Ms(a,St),n=Fs(n,this[Jc].entry),this[Lt]==="opening")return this.defer(()=>this.getMany(t,n,a)),a[St];if(Wf(this,a))return a[St];if(!Array.isArray(t))return this.nextTick(a,new TypeError("The first argument 'keys' must be an array")),a[St];if(t.length===0)return this.nextTick(a,null,[]),a[St];let h=this.keyEncoding(n.keyEncoding),o=this.valueEncoding(n.valueEncoding),r=h.format,l=o.format;(n.keyEncoding!==r||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:r,valueEncoding:l}));let u=new Array(t.length);for(let i=0;i<t.length;i++){let s=t[i],f=this._checkKey(s);if(f)return this.nextTick(a,f),a[St];u[i]=this.prefixKey(h.encode(s),r)}return this._getMany(u,n,(i,s)=>{if(i)return a(i);try{for(let f=0;f<s.length;f++)s[f]!==void 0&&(s[f]=o.decode(s[f]))}catch(f){return a(new ka(`Could not decode one or more of ${s.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:f}))}a(null,s)}),a[St]}_getMany(t,n,a){this.nextTick(a,null,new Array(t.length).fill(void 0))}put(t,n,a,h){if(h=zc(a,h),h=Ms(h,St),a=Fs(a,this[Jc].entry),this[Lt]==="opening")return this.defer(()=>this.put(t,n,a,h)),h[St];if(Wf(this,h))return h[St];let o=this._checkKey(t)||this._checkValue(n);if(o)return this.nextTick(h,o),h[St];let r=this.keyEncoding(a.keyEncoding),l=this.valueEncoding(a.valueEncoding),u=r.format,i=l.format;(a.keyEncoding!==u||a.valueEncoding!==i)&&(a=Object.assign({},a,{keyEncoding:u,valueEncoding:i}));let s=this.prefixKey(r.encode(t),u),f=l.encode(n);return this._put(s,f,a,p=>{if(p)return h(p);this.emit("put",t,n),h()}),h[St]}_put(t,n,a,h){this.nextTick(h)}del(t,n,a){if(a=zc(n,a),a=Ms(a,St),n=Fs(n,this[Jc].key),this[Lt]==="opening")return this.defer(()=>this.del(t,n,a)),a[St];if(Wf(this,a))return a[St];let h=this._checkKey(t);if(h)return this.nextTick(a,h),a[St];let o=this.keyEncoding(n.keyEncoding),r=o.format;return n.keyEncoding!==r&&(n=Object.assign({},n,{keyEncoding:r})),this._del(this.prefixKey(o.encode(t),r),n,l=>{if(l)return a(l);this.emit("del",t),a()}),a[St]}_del(t,n,a){this.nextTick(a)}batch(t,n,a){if(!arguments.length){if(this[Lt]==="opening")return new xN(this);if(this[Lt]!=="open")throw new ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?a=t:a=zc(n,a),a=Ms(a,St),n=Fs(n,this[Jc].empty),this[Lt]==="opening")return this.defer(()=>this.batch(t,n,a)),a[St];if(Wf(this,a))return a[St];if(!Array.isArray(t))return this.nextTick(a,new TypeError("The first argument 'operations' must be an array")),a[St];if(t.length===0)return this.nextTick(a),a[St];let h=new Array(t.length),{keyEncoding:o,valueEncoding:r,...l}=n;for(let u=0;u<t.length;u++){if(typeof t[u]!="object"||t[u]===null)return this.nextTick(a,new TypeError("A batch operation must be an object")),a[St];let i=Object.assign({},t[u]);if(i.type!=="put"&&i.type!=="del")return this.nextTick(a,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),a[St];let s=this._checkKey(i.key);if(s)return this.nextTick(a,s),a[St];let f=i.sublevel!=null?i.sublevel:this,p=f.keyEncoding(i.keyEncoding||o),d=p.format;if(i.key=f.prefixKey(p.encode(i.key),d),i.keyEncoding=d,i.type==="put"){let c=this._checkValue(i.value);if(c)return this.nextTick(a,c),a[St];let _=f.valueEncoding(i.valueEncoding||r);i.value=_.encode(i.value),i.valueEncoding=_.format}f!==this&&(i.sublevel=null),h[u]=i}return this._batch(h,l,u=>{if(u)return a(u);this.emit("batch",t),a()}),a[St]}_batch(t,n,a){this.nextTick(a)}sublevel(t,n){return this._sublevel(t,rT.defaults(n))}_sublevel(t,n){return new rT(this,t,n)}prefixKey(t,n){return t}clear(t,n){if(n=zc(t,n),n=Ms(n,St),t=Fs(t,this[Jc].empty),this[Lt]==="opening")return this.defer(()=>this.clear(t,n)),n[St];if(Wf(this,n))return n[St];let a=t,h=this.keyEncoding(t.keyEncoding);return t=kg(t,h),t.keyEncoding=h.format,t.limit===0?this.nextTick(n):this._clear(t,o=>{if(o)return n(o);this.emit("clear",a),n()}),n[St]}_clear(t,n){this.nextTick(n)}iterator(t){let n=this.keyEncoding(t&&t.keyEncoding),a=this.valueEncoding(t&&t.valueEncoding);if(t=kg(t,n),t.keys=t.keys!==!1,t.values=t.values!==!1,t[Vc.keyEncoding]=n,t[Vc.valueEncoding]=a,t.keyEncoding=n.format,t.valueEncoding=a.format,this[Lt]==="opening")return new Eee(this,t);if(this[Lt]!=="open")throw new ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new Vc(this,t)}keys(t){let n=this.keyEncoding(t&&t.keyEncoding),a=this.valueEncoding(t&&t.valueEncoding);if(t=kg(t,n),t[Vc.keyEncoding]=n,t[Vc.valueEncoding]=a,t.keyEncoding=n.format,t.valueEncoding=a.format,this[Lt]==="opening")return new Tee(this,t);if(this[Lt]!=="open")throw new ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new wee(this,t)}values(t){let n=this.keyEncoding(t&&t.keyEncoding),a=this.valueEncoding(t&&t.valueEncoding);if(t=kg(t,n),t[Vc.keyEncoding]=n,t[Vc.valueEncoding]=a,t.keyEncoding=n.format,t.valueEncoding=a.format,this[Lt]==="opening")return new Mee(this,t);if(this[Lt]!=="open")throw new ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new See(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[_h].push(t)}[vh](){if(this[_h].length===0)return;let t=this[_h];this[_h]=[];for(let n of t)n()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[Gc].add(t)}detachResource(t){this[Gc].delete(t)}_chainedBatch(){return new xN(this)}_checkKey(t){if(t==null)return new ka("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new ka("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};mh.prototype.nextTick=wN();var{AbstractSublevel:rT}=FN()({AbstractLevel:mh});oT.AbstractLevel=mh;oT.AbstractSublevel=rT;var Wf=function(e,t){return e[Lt]!=="open"?(e.nextTick(t,new ka("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},xee=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])}});var iT=Tt(jc=>{"use strict";jc.AbstractLevel=aT().AbstractLevel;jc.AbstractSublevel=aT().AbstractSublevel;jc.AbstractIterator=Es().AbstractIterator;jc.AbstractKeyIterator=Es().AbstractKeyIterator;jc.AbstractValueIterator=Es().AbstractValueIterator;jc.AbstractChainedBatch=JE().AbstractChainedBatch});var IN=Tt((M8e,AN)=>{AN.exports=Aee;var Lee=KE();function Aee(e,t,n){if(typeof t!="number")throw new Error("second argument must be a Number");let a,h,o,r,l,u=!0,i;Array.isArray(e)?(a=[],o=h=e.length):(r=Object.keys(e),a={},o=h=r.length);function s(p){function d(){n&&n(p,a),n=null}u?Lee(d):d()}function f(p,d,c){if(a[p]=c,d&&(l=!0),--o===0||d)s(d);else if(!l&&i<h){let _;r?(_=r[i],i+=1,e[_](function(v,m){f(_,v,m)})):(_=i,i+=1,e[_](function(v,m){f(_,v,m)}))}}i=t,o?r?r.some(function(p,d){return e[p](function(c,_){f(p,c,_)}),d===t-1}):e.some(function(p,d){return p(function(c,_){f(d,c,_)}),d===t-1}):s(null),u=!1}});var uT=Tt((F8e,RN)=>{"use strict";RN.exports=function(t){let n=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,a=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,h=t.gte===void 0,o=t.lte===void 0;return n!==void 0&&a!==void 0?IDBKeyRange.bound(n,a,h,o):n!==void 0?IDBKeyRange.lowerBound(n,h):a!==void 0?IDBKeyRange.upperBound(a,o):null}});var sT=Tt((x8e,$N)=>{"use strict";var Iee=new TextEncoder;$N.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):Iee.encode(e)}});var NN=Tt(kN=>{"use strict";var{AbstractIterator:Ree}=iT(),HN=uT(),Wg=sT(),vi=Symbol("cache"),cu=Symbol("finished"),Uo=Symbol("options"),lu=Symbol("currentOptions"),Kc=Symbol("position"),cT=Symbol("location"),Uf=Symbol("first"),ON={},lT=class extends Ree{constructor(t,n,a){super(t,a),this[vi]=[],this[cu]=this.limit===0,this[Uo]=a,this[lu]={...a},this[Kc]=void 0,this[cT]=n,this[Uf]=!0}_nextv(t,n,a){if(this[Uf]=!1,this[cu])return this.nextTick(a,null,[]);if(this[vi].length>0)return t=Math.min(t,this[vi].length),this.nextTick(a,null,this[vi].splice(0,t));this[Kc]!==void 0&&(this[Uo].reverse?(this[lu].lt=this[Kc],this[lu].lte=void 0):(this[lu].gt=this[Kc],this[lu].gte=void 0));let h;try{h=HN(this[lu])}catch{return this[cu]=!0,this.nextTick(a,null,[])}let o=this.db.db.transaction([this[cT]],"readonly"),r=o.objectStore(this[cT]),l=[];if(this[Uo].reverse){let u=!this[Uo].values&&r.openKeyCursor?"openKeyCursor":"openCursor";r[u](h,"prev").onsuccess=i=>{let s=i.target.result;if(s){let{key:f,value:p}=s;this[Kc]=f,l.push([this[Uo].keys&&f!==void 0?Wg(f):void 0,this[Uo].values&&p!==void 0?Wg(p):void 0]),l.length<t?s.continue():PN(o)}else this[cu]=!0}}else{let u,i,s=()=>{if(u===void 0||i===void 0)return;let f=Math.max(u.length,i.length);f===0||t===1/0?this[cu]=!0:this[Kc]=u[f-1],l.length=f;for(let p=0;p<f;p++){let d=u[p],c=i[p];l[p]=[this[Uo].keys&&d!==void 0?Wg(d):void 0,this[Uo].values&&c!==void 0?Wg(c):void 0]}PN(o)};this[Uo].keys||t<1/0?r.getAllKeys(h,t<1/0?t:void 0).onsuccess=f=>{u=f.target.result,s()}:(u=[],this.nextTick(s)),this[Uo].values?r.getAll(h,t<1/0?t:void 0).onsuccess=f=>{i=f.target.result,s()}:(i=[],this.nextTick(s))}o.onabort=()=>{a(o.error||new Error("aborted by user")),a=null},o.oncomplete=()=>{a(null,l),a=null}}_next(t){if(this[vi].length>0){let[n,a]=this[vi].shift();this.nextTick(t,null,n,a)}else if(this[cu])this.nextTick(t);else{let n=Math.min(100,this.limit-this.count);this[Uf]&&(this[Uf]=!1,n=1),this._nextv(n,ON,(a,h)=>{if(a)return t(a);this[vi]=h,this._next(t)})}}_all(t,n){this[Uf]=!1;let a=this[vi].splice(0,this[vi].length),h=this.limit-this.count-a.length;if(h<=0)return this.nextTick(n,null,a);this._nextv(h,ON,(o,r)=>{if(o)return n(o);a.length>0&&(r=a.concat(r)),n(null,r)})}_seek(t,n){this[Uf]=!0,this[vi]=[],this[cu]=!1,this[Kc]=void 0,this[lu]={...this[Uo]};let a;try{a=HN(this[Uo])}catch{this[cu]=!0;return}a!==null&&!a.includes(t)?this[cu]=!0:this[Uo].reverse?this[lu].lte=t:this[lu].gte=t}};kN.Iterator=lT;function PN(e){typeof e.commit=="function"&&e.commit()}});var WN=Tt((A8e,BN)=>{"use strict";BN.exports=function(t,n,a,h,o){if(h.limit===0)return t.nextTick(o);let r=t.db.transaction([n],"readwrite"),l=r.objectStore(n),u=0;r.oncomplete=function(){o()},r.onabort=function(){o(r.error||new Error("aborted by user"))};let i=l.openKeyCursor?"openKeyCursor":"openCursor",s=h.reverse?"prev":"next";l[i](a,s).onsuccess=function(f){let p=f.target.result;p&&(l.delete(p.key).onsuccess=function(){(h.limit<=0||++u<h.limit)&&p.continue()})}}});var JN=Tt(GN=>{"use strict";var{AbstractLevel:$ee}=iT(),UN=Oa(),Hee=IN(),{fromCallback:Oee}=oh(),{Iterator:Pee}=NN(),qN=sT(),kee=WN(),Nee=uT(),zN="level-js-",gh=Symbol("idb"),fT=Symbol("namePrefix"),fu=Symbol("location"),dT=Symbol("version"),Qc=Symbol("store"),yh=Symbol("onComplete"),VN=Symbol("promise"),Ug=class extends $ee{constructor(t,n,a){if(typeof n=="function"||typeof a=="function")throw new UN("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:h,version:o,...r}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},r),typeof t!="string")throw new Error("constructor requires a location string argument");this[fu]=t,this[fT]=h??zN,this[dT]=parseInt(o||1,10),this[gh]=null}get location(){return this[fu]}get namePrefix(){return this[fT]}get version(){return this[dT]}get db(){return this[gh]}get type(){return"browser-level"}_open(t,n){let a=indexedDB.open(this[fT]+this[fu],this[dT]);a.onerror=function(){n(a.error||new Error("unknown error"))},a.onsuccess=()=>{this[gh]=a.result,n()},a.onupgradeneeded=h=>{let o=h.target.result;o.objectStoreNames.contains(this[fu])||o.createObjectStore(this[fu])}}[Qc](t){return this[gh].transaction([this[fu]],t).objectStore(this[fu])}[yh](t,n){let a=t.transaction;a.onabort=function(){n(a.error||new Error("aborted by user"))},a.oncomplete=function(){n(null,t.result)}}_get(t,n,a){let h=this[Qc]("readonly"),o;try{o=h.get(t)}catch(r){return this.nextTick(a,r)}this[yh](o,function(r,l){if(r)return a(r);if(l===void 0)return a(new UN("Entry not found",{code:"LEVEL_NOT_FOUND"}));a(null,qN(l))})}_getMany(t,n,a){let h=this[Qc]("readonly"),o=t.map(r=>l=>{let u;try{u=h.get(r)}catch(i){return l(i)}u.onsuccess=()=>{let i=u.result;l(null,i===void 0?i:qN(i))},u.onerror=i=>{i.stopPropagation(),l(u.error)}});Hee(o,16,a)}_del(t,n,a){let h=this[Qc]("readwrite"),o;try{o=h.delete(t)}catch(r){return this.nextTick(a,r)}this[yh](o,a)}_put(t,n,a,h){let o=this[Qc]("readwrite"),r;try{r=o.put(n,t)}catch(l){return this.nextTick(h,l)}this[yh](r,h)}_iterator(t){return new Pee(this,this[fu],t)}_batch(t,n,a){let h=this[Qc]("readwrite"),o=h.transaction,r=0,l;o.onabort=function(){a(l||o.error||new Error("aborted by user"))},o.oncomplete=function(){a()};function u(){let i=t[r++],s=i.key,f;try{f=i.type==="del"?h.delete(s):h.put(i.value,s)}catch(p){l=p,o.abort();return}r<t.length?f.onsuccess=u:typeof o.commit=="function"&&o.commit()}u()}_clear(t,n){let a,h;try{a=Nee(t)}catch{return this.nextTick(n)}if(t.limit>=0)return kee(this,this[fu],a,t,n);try{let o=this[Qc]("readwrite");h=a?o.delete(a):o.clear()}catch(o){return this.nextTick(n,o)}this[yh](h,n)}_close(t){this[gh].close(),this.nextTick(t)}};Ug.destroy=function(e,t,n){typeof t=="function"&&(n=t,t=zN),n=Oee(n,VN);let a=indexedDB.deleteDatabase(t+e);return a.onsuccess=function(){n()},a.onerror=function(h){n(h)},n[VN]};GN.BrowserLevel=Ug});var pT=Tt(jN=>{jN.Level=JN().BrowserLevel});var Ih={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var he=function(e){return e.identity},_e={identity:function(e){return e},Semigroupoid0:function(){return Ih}};var AM={fromString:he(_e)},Mt=function(e){return e.fromString};var IM=function(e){return function(t){for(var n=t.length,a=new Array(n),h=0;h<n;h++)a[h]=e(t[h]);return a}};var dn=!0;var $e=function(e){return function(t){return function(n){return e(n)(t)}}},ve=function(e){return function(t){return e}};var RM=function(e){return function(t){return t(e)}};var Et=function(){function e(){}return e.value=new e,e}();var G=function(e){return e.map};var ut=function(e){return G(e)(ve(void 0))},Zc=function(e){var t=G(e);return function(n){return function(a){return t(ve(a))(n)}}},$h=function(e){var t=G(e);return function(n){return t(ve(n))}};var Dt={map:IM};var $M=function(e){return function(t){return e+t}},HM=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var Zn=function(e){return e.reflectSymbol};var Is={append:$M};var on={append:HM};var De=function(e){return e.append};var Oy={alt:De(on),Functor0:function(){return Dt}},Pn=function(e){return e.alt};var OM=function(e){return function(t){for(var n=e.length,a=t.length,h=new Array(n*a),o=0,r=0;r<n;r++)for(var l=e[r],u=0;u<a;u++)h[o++]=l(t[u]);return h}};var sW=he(_e);var Rs={apply:OM,Functor0:function(){return Dt}},pt=function(e){return e.apply};var Or=function(e){var t=pt(e),n=G(e.Functor0());return function(a){return function(h){return t(n(ve(sW))(a))(h)}}};var X=function(e){return e.pure},Jf=function(e){var t=X(e);return function(n){return function(a){if(!n)return a;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,a.constructor.name])}}},An=function(e){var t=X(e);return function(n){return function(a){if(n)return a;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,a.constructor.name])}}},jf=function(e){var t=pt(e.Apply0()),n=X(e);return function(a){return function(h){return t(n(a))(h)}}};var el={pure:function(e){return[e]},Apply0:function(){return Rs}};var PM=function(e){return function(t){for(var n=[],a=0,h=e.length;a<h;a++)Array.prototype.push.apply(n,t(e[a]));return n}};var fW=he(_e),ot=function(e){return e.discard};var mu={bind:PM,Apply0:function(){return Rs}},Z=function(e){return e.bind},bn=function(e){return $e(Z(e))},tl=function(e){var t=bn(e);return function(n){return function(a){return function(h){return t(n)(a(h))}}}};var at={discard:function(e){return Z(e)}};var nl=function(e){var t=Z(e);return function(n){return t(n)(fW)}};var dW=function(e,t){if(e<1)return[];var n=new Array(e);return n.fill(t)},pW=function(e,t){for(var n=[],a=0,h=0;h<e;h++)n[a++]=t;return n},hW=typeof Array.prototype.fill=="function"?dW:pW,kM=function(){function e(h,o){this.head=h,this.tail=o}var t={};function n(h){return function(o){return new e(h,o)}}function a(h){for(var o=[],r=0,l=h;l!==t;)o[r++]=l.head,l=l.tail;return o}return function(h,o){return a(h(n)(t)(o))}}(),gr=function(e){return e.length},ky=function(e,t,n){return n.length===0?e({}):t(n[0])(n.slice(1))},NM=function(e,t,n,a){return a<0||a>=n.length?t:e(n[a])};var BM=function(e,t,n,a){for(var h=0,o=a.length;h<o;h++)if(n(a[h]))return e(h);return t},WM=function(e,t,n,a){for(var h=a.length-1;h>=0;h--)if(n(a[h]))return e(h);return t},UM=function(e,t,n,a,h){if(n<0||n>h.length)return t;var o=h.slice();return o.splice(n,0,a),e(o)},qM=function(e,t,n,a){if(n<0||n>=a.length)return t;var h=a.slice();return h.splice(n,1),e(h)};var rl=function(e){return e.slice().reverse()};var VM=function(e,t){return t.filter(e)};var zM=function(){function e(t,n,a,h,o,r){var l,u,i,s,f,p,d;for(l=o+(r-o>>1),l-o>1&&e(t,n,h,a,o,l),r-l>1&&e(t,n,h,a,l,r),u=o,i=l,s=o;u<l&&i<r;)f=h[u],p=h[i],d=n(t(f)(p)),d>0?(a[s++]=p,++i):(a[s++]=f,++u);for(;u<l;)a[s++]=h[u++];for(;i<r;)a[s++]=h[i++]}return function(t,n,a){var h;return a.length<2?a:(h=a.slice(0),e(t,n,h,a.slice(0),0,a.length),h)}}(),GM=function(e,t,n){return n.slice(e,t)};var JM=function(e){var t=Z(e.Bind1()),n=Jf(e.Applicative0());return function(a){return function(h){return t(a)(function(o){return n(o)(h)})}}};var By=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return function(a){return function(h){return t(h)(function(o){return n(a(o))})}}},yr=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return function(a){return function(h){return t(a)(function(o){return t(h)(function(r){return n(o(r))})})}}};var jM="\uFFFF",KM="\0",vW=Number.POSITIVE_INFINITY,mW=Number.NEGATIVE_INFINITY;var Kf=function(e){return function(t){return function(n){return function(a){return function(h){return a<h?e:a===h?t:n}}}}},QM=Kf,XM=Kf,YM=Kf,ZM=Kf,eF=Kf,tF=function(e){return function(t){return function(n){for(var a=0,h=t.length,o=n.length;a<h&&a<o;){var r=t[a],l=n[a],u=e(r)(l);if(u!==0)return u;a++}return h===o?0:h>o?-1:1}}};var Qf=function(e){return function(t){return e===t}},nF=Qf,rF=Qf,oF=Qf,aF=Qf,iF=Qf,uF=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var a=0;a<t.length;a++)if(!e(t[a])(n[a]))return!1;return!0}}};var Oh={eq:function(e){return function(t){return!0}}},eo={eq:iF};var Xf={eq:oF},gu={eq:rF},sF={eq:aF},Ph={eq:nF};var Re=function(e){return e.eq},CW=Re(Ph),Di=function(e){return{eq:uF(Re(e))}};var Yf=function(e){var t=Re(e);return function(n){return function(a){return CW(t(n)(a))(!1)}}};var de=function(){function e(){}return e.value=new e,e}(),se=function(){function e(){}return e.value=new e,e}(),qe=function(){function e(){}return e.value=new e,e}();var Ci={eq:function(e){return function(t){return e instanceof de&&t instanceof de||e instanceof se&&t instanceof se||e instanceof qe&&t instanceof qe}}};var cF=function(e){return function(t){return e-t|0}};var lF=function(e){return function(t){return e+t|0}},fF=function(e){return function(t){return e*t|0}},dF=function(e){return function(t){return e+t}},pF=function(e){return function(t){return e*t}};var xo=function(e){return e.zero};var Wy={add:dF,zero:0,mul:pF,one:1},kh={add:lF,zero:0,mul:fF,one:1};var Vo=function(e){return e.add};var Zf=function(e){return e.sub};var ed={sub:cF,Semiring0:function(){return kh}};var Uy=function(e){var t=Zf(e),n=xo(e.Semiring0());return function(a){return t(n)(a)}};var pn={compare:function(e){return function(t){return qe.value}},Eq0:function(){return Oh}},Vt=function(){return{compare:ZM(de.value)(qe.value)(se.value),Eq0:function(){return eo}}}();var wi=function(){return{compare:YM(de.value)(qe.value)(se.value),Eq0:function(){return Xf}}}(),vt=function(){return{compare:XM(de.value)(qe.value)(se.value),Eq0:function(){return gu}}}(),Nh=function(){return{compare:eF(de.value)(qe.value)(se.value),Eq0:function(){return sF}}}(),td=function(){return{compare:QM(de.value)(qe.value)(se.value),Eq0:function(){return Ph}}}();var Ee=function(e){return e.compare},SW=Ee(vt),Bh=function(e){var t=Ee(e);return function(n){return function(a){return function(h){return t(n(a))(n(h))}}}};var qy=function(e){var t=Ee(e);return function(n){return function(a){var h=t(n)(a);return!(h instanceof de)}}};var Si=function(e){var t=Ee(e);return function(n){return function(a){var h=t(n)(a);if(h instanceof de)return a;if(h instanceof qe||h instanceof se)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[h.constructor.name])}}},ol=function(e){var t=Ee(e);return function(n){return function(a){var h=t(n)(a);if(h instanceof de||h instanceof qe)return n;if(h instanceof se)return a;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[h.constructor.name])}}},$s=function(e){var t=Ee(e),n=Di(e.Eq0());return{compare:function(){var a=function(h){return function(o){var r=t(h)(o);if(r instanceof qe)return 0;if(r instanceof de)return 1;if(r instanceof se)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[r.constructor.name])}};return function(h){return function(o){return SW(0)(tF(a)(h)(o))}}}(),Eq0:function(){return n}}};var Vy=function(e){var t=ol(e),n=Si(e);return function(a){return function(h){return function(o){return t(h)(n(a)(o))}}}};var zy=function(e){var t=qy(e);return function(n){var a=xo(n.Semiring0()),h=Uy(n);return function(o){var r=t(o)(a);return r?o:h(o)}}};var Lo=function(e){return e.top};var al={top:2147483647,bottom:-2147483648,Ord0:function(){return vt}},Hs={top:jM,bottom:KM,Ord0:function(){return Nh}};var fa=function(e){return e.bottom};var gF=function(e){return e.toString()},yF=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var DF=function(e){var t=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(n,a){switch(n){case'"':case"\\":return"\\"+n;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var h=a+1,o=h<t&&e[h]>="0"&&e[h]<="9"?"\\&":"";return"\\"+n.charCodeAt(0).toString(10)+o})+'"'},CF=function(e){return function(t){for(var n=[],a=0,h=t.length;a<h;a++)n[a]=e(t[a]);return"["+n.join(",")+"]"}};var Ei={show:DF};var _o={show:yF},to={show:gF};var bF={show:function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[e.constructor.name])}},Me=function(e){return e.show},il=function(e){return{show:CF(Me(e))}};var xW=he(_e),V=function(){function e(){}return e.value=new e,e}(),B=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qh=function(e){var t=Me(e);return{show:function(n){if(n instanceof B)return"(Just "+(t(n.value0)+")");if(n instanceof V)return"Nothing";throw new Error("Failed pattern match at Data.Maybe (line 223, column 1 - line 225, column 28): "+[n.constructor.name])}}},Gy=function(e){var t=De(e);return{append:function(n){return function(a){if(n instanceof V)return a;if(a instanceof V)return n;if(n instanceof B&&a instanceof B)return new B(t(n.value0)(a.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,a.constructor.name])}}}};var SF=function(e){var t=Gy(e);return{mempty:V.value,Semigroup0:function(){return t}}};var Qe=function(e){return function(t){return function(n){if(n instanceof V)return e;if(n instanceof B)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},bu=Qe(!0)(ve(!1)),Os=Qe(!1)(ve(!0));var mt={map:function(e){return function(t){return t instanceof B?new B(e(t.value0)):V.value}}},LW=G(mt);var er=function(e){return Qe(e)(xW)},Ao=function(){return function(e){if(e instanceof B)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var sl=function(e){var t=Re(e);return{eq:function(n){return function(a){return n instanceof V&&a instanceof V?!0:n instanceof B&&a instanceof B?t(n.value0)(a.value0):!1}}}};var nd={apply:function(e){return function(t){if(e instanceof B)return LW(e.value0)(t);if(e instanceof V)return V.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return mt}};var Pr={bind:function(e){return function(t){if(e instanceof B)return t(e.value0);if(e instanceof V)return V.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return nd}};var We=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Oe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var wu={map:function(e){return function(t){if(t instanceof We)return new We(t.value0);if(t instanceof Oe)return new Oe(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},AW=G(wu);var wn=function(e){return function(t){return function(n){if(n instanceof We)return e(n.value0);if(n instanceof Oe)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Vh=function(){return wn(ve(V.value))(B.create)}();var EF=wn(ve(!1))(ve(!0));var Jy={apply:function(e){return function(t){if(e instanceof We)return new We(e.value0);if(e instanceof Oe)return AW(e.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return wu}};var cl=function(){return{pure:Oe.create,Apply0:function(){return Jy}}}();var zo=function(e){return e};var Ti={map:function(e){return function(t){return e(t)}}};var zh={apply:function(e){return function(t){return e(t)}},Functor0:function(){return Ti}},jy={bind:function(e){return function(t){return t(e)}},Apply0:function(){return zh}},Gh={pure:zo,Apply0:function(){return zh}},Dr={Applicative0:function(){return Gh},Bind1:function(){return jy}};var TF=function(e){return Math.min(Math.abs(e),2147483647)},MF=function(e){return function(t){return t===0?0:t>0?Math.floor(e/t):-Math.floor(e/-t)}},FF=function(e){return function(t){if(t===0)return 0;var n=Math.abs(t);return(e%n+n)%n}};var xF={Ring0:function(){return ed}};var ll=function(e){return e.mod};var fl={degree:TF,div:MF,mod:FF,CommutativeRing0:function(){return xF}},rd=function(e){return e.div};var Mi={mempty:"",Semigroup0:function(){return Is}};var Ps={mempty:[],Semigroup0:function(){return on}};var st=function(e){return e.mempty};var AF=function(e){return function(){return e}},IF=function(e){return function(t){return function(){return t(e())()}}};var RF=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}},Ua={Applicative0:function(){return Yt},Bind1:function(){return wr}},wr={bind:IF,Apply0:function(){return Ky(0)}},Yt={pure:AF,Apply0:function(){return Ky(0)}},$F=RF("functorEffect","Effect",function(){return{map:jf(Yt)}}),Ky=RF("applyEffect","Effect",function(){return{apply:yr(Ua),Functor0:function(){return $F(0)}}}),Pe=$F(20),Qy=Ky(23);var HF=function(e){return function(){return{value:e}}};var Ke=function(e){return function(){return e.value}},OF=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},Ut=function(e){return function(t){return function(){t.value=e}}};var kW=ut(Pe),an=HF,Xy=OF,Jh=function(e){return Xy(function(t){var n=e(t);return{state:n,value:n}})},no=function(e){return function(t){return kW(Jh(e)(t))}};var WW=bn(wr),UW=G(Pe),Pt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mn=function(e){return e.tailRecM};var qW=function(e){var t=function(n){var a=!1,h;function o(r){if(r instanceof Pt){n=e(r.value0);return}if(r instanceof Bt)return a=!0,r.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 103, column 3 - line 103, column 25): "+[r.constructor.name])}for(;!a;)h=o(n);return h};return function(n){return t(e(n))}};var PF={tailRecM:function(e){var t=function(a){return a},n=qW(function(a){return t(e(a))});return function(a){return zo(n(a))}},Monad0:function(){return Dr}};var jh={tailRecM:function(e){return function(t){var n=function(a){if(a instanceof Bt)return a.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[a.constructor.name])};return function(){var h=WW(an)(e(t))();return function(){for(;!function(){var r=Ke(h)();if(r instanceof Pt){var l=e(r.value0)();return Ut(l)(h)(),!1}if(r instanceof Bt)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[r.constructor.name])}(););return{}}(),UW(n)(Ke(h))()}}},Monad0:function(){return Ua}};var kF=function(e){return function(t){return function(){return e(t())}}},NF=function(e){return function(){return e}},BF=function(e){return function(t){return function(){return t(e())()}}};var ad=function(e){return function(t){return function(){for(var n=0,a=e.length;n<a;n++)t(e[n])()}}};var JW=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}};var ks={map:kF};var e0={Applicative0:function(){return Kh},Bind1:function(){return t0}},t0={bind:BF,Apply0:function(){return VF(0)}},Kh={pure:NF,Apply0:function(){return VF(0)}},VF=JW("applyST","Control.Monad.ST.Internal",function(){return{apply:yr(e0),Functor0:function(){return ks}}});function zF(e){return e}var GF=zF,JF=zF;var jF=function(e,t){return t.push(e)};var Qh=function(t){return function(n){return function(){return t(n)}}},n0=function(t){return function(n){return function(a){return function(){return t(n,a)}}}};var KF=Qh(JF),r0=Qh(GF);var o0=n0(jF);var XF=function(e){return function(t){return e&&t}},YF=function(e){return function(t){return e||t}},ZF=function(e){return!e};var ud=function(e){return e.tt};var pa=function(e){return e.not};var a0=function(e){return e.implies};var sd=function(e){return e.ff};var Ns=function(e){return e.disj},da={ff:!1,tt:!0,implies:function(e){return function(t){return Ns(da)(pa(da)(e))(t)}},conj:XF,disj:YF,not:ZF};var dl=function(e){return e.conj},cd=function(e){var t=sd(e),n=ud(e),a=a0(e),h=dl(e),o=Ns(e),r=pa(e);return{ff:function(l){return t},tt:function(l){return n},implies:function(l){return function(u){return function(i){return a(l(i))(u(i))}}},conj:function(l){return function(u){return function(i){return h(l(i))(u(i))}}},disj:function(l){return function(u){return function(i){return o(l(i))(u(i))}}},not:function(l){return function(u){return r(l(u))}}}};var ex=function(e){return function(t){return function(n){for(var a=t,h=n.length,o=h-1;o>=0;o--)a=e(n[o])(a);return a}}},tx=function(e){return function(t){return function(n){for(var a=t,h=n.length,o=0;o<h;o++)a=e(a)(n[o]);return a}}};var nx={empty:[],Alt0:function(){return Oy}},kr=function(e){return e.empty};var ee=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Su=function(e){return function(t){return e(t.value0)(t.value1)}};var hn=function(e){return e.value1};var xi={map:function(e){return function(t){return new ee(t.value0,e(t.value1))}}};var tr=function(e){return e.value0};var s0=function(e){var t=Re(e);return function(n){var a=Re(n);return{eq:function(h){return function(o){return t(h.value0)(o.value0)&&a(h.value1)(o.value1)}}}}},pl=function(e){var t=Ee(e),n=s0(e.Eq0());return function(a){var h=Ee(a),o=n(a.Eq0());return{compare:function(r){return function(l){var u=t(r.value0)(l.value0);return u instanceof de?de.value:u instanceof se?se.value:h(r.value1)(l.value1)}},Eq0:function(){return o}}}};var Io=function(e){return e.bimap};var c3={append:function(e){return function(t){return e instanceof B?e:t}}};var ix=function(){return{mempty:V.value,Semigroup0:function(){return c3}}}();var ne=function(e){return e};var pd=function(){return ne};var l3=pd();var In=function(){return l3};var f3=he(_e),d3=Re(Ci),p3=In();var gn=function(e){return e.foldr};var it=function(e){var t=Or(e.Apply0()),n=X(e);return function(a){var h=gn(a);return function(o){return h(function(r){return t(o(r))})(n(void 0))}}},e_=function(e){var t=it(e);return function(n){return $e(t(n))}};var _n=function(e){return e.foldl};var qa=function(e){var t=_n(e);return function(n){var a=De(n.Semigroup0()),h=st(n);return function(o){return function(r){var l=function(u){return function(i){return u.init?{init:!1,acc:i}:{init:!1,acc:a(u.acc)(a(o)(i))}}};return t(l)({init:!0,acc:h})(r).acc}}}};var dx=function(e){var t=_n(e);return function(n){var a=function(h){return function(o){if(h instanceof V)return new B(o);if(h instanceof B)return new B(function(){var r=d3(n(h.value0)(o))(se.value);return r?h.value0:o}());throw new Error("Failed pattern match at Data.Foldable (line 441, column 3 - line 441, column 27): "+[h.constructor.name,o.constructor.name])}};return t(a)(V.value)}},_0=function(e){var t=Ee(e);return function(n){return dx(n)(t)}};var v0=function(e){var t=_n(e);return function(n){return t(Vo(n))(xo(n))}};var $t={foldr:function(e){return function(t){return function(n){if(n instanceof V)return t;if(n instanceof B)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof V)return t;if(n instanceof B)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=st(e);return function(n){return function(a){if(a instanceof V)return t;if(a instanceof B)return n(a.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,a.constructor.name])}}}};var t_={foldr:function(e){return function(t){return function(n){if(n instanceof We)return t;if(n instanceof Oe)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof We)return t;if(n instanceof Oe)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=st(e);return function(n){return function(a){if(a instanceof We)return t;if(a instanceof Oe)return n(a.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,a.constructor.name])}}}};var px=function(e){var t=gn(e);return function(n){var a=De(n.Semigroup0()),h=st(n);return function(o){return t(function(r){return function(l){return a(o(r))(l)}})(h)}}},gt={foldr:ex,foldl:tx,foldMap:function(e){return px(gt)(e)}};var Nn=function(e){return e.foldMap};var n_=function(e){var t=Nn(e)(ix);return function(n){var a=Re(n);return function(h){var o=t(function(r){var l=a(h)(r.value0);return l?new B(r.value1):V.value});return function(r){return p3(o(r))}}}};var qs=function(e){var t=Nn(e);return function(n){return t(n)(f3)}};var _l=function(e){return function(t){return function(n){return e(t,n)}}},vl=function(e){return function(t){return function(n){return function(a){return e(t,n,a)}}}},Eu=function(e){return function(t){return function(n){return function(a){return function(h){return e(t,n,a,h)}}}}},m0=function(e){return function(t){return function(n){return function(a){return function(h){return function(o){return e(t,n,a,h,o)}}}}}};var hx=function(e){return function(t){for(var n=t.length,a=Array(n),h=0;h<n;h++)a[h]=e(h)(t[h]);return a}};var ml=function(e){return e.mapWithIndex};var gd={mapWithIndex:hx,Functor0:function(){return Dt}};var gx=function(){function e(h){return[h]}function t(h){return function(o){return[h,o]}}function n(h){return function(o){return function(r){return[h,o,r]}}}function a(h){return function(o){return h.concat(o)}}return function(h){return function(o){return function(r){return function(l){return function(u){function i(s,f){switch(f-s){case 0:return r([]);case 1:return o(e)(l(u[s]));case 2:return h(o(t)(l(u[s])))(l(u[s+1]));case 3:return h(h(o(n)(l(u[s])))(l(u[s+1])))(l(u[s+2]));default:var p=s+Math.floor((f-s)/4)*2;return h(o(a)(i(s,p)))(i(p,f))}}return i(0,u.length)}}}}}}();var K3=he(_e),En=function(e){return e.traverse};var Vs={traverse:function(e){var t=X(e),n=G(e.Apply0().Functor0());return function(a){return function(h){if(h instanceof V)return t(V.value);if(h instanceof B)return n(B.create)(a(h.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[a.constructor.name,h.constructor.name])}}},sequence:function(e){var t=X(e),n=G(e.Apply0().Functor0());return function(a){if(a instanceof V)return t(V.value);if(a instanceof B)return n(B.create)(a.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[a.constructor.name])}},Functor0:function(){return mt},Foldable1:function(){return $t}};var Lx=function(e){var t=En(e);return function(n){return t(n)(K3)}},Tu={traverse:function(e){var t=e.Apply0();return gx(pt(t))(G(t.Functor0()))(X(e))},sequence:function(e){return Lx(Tu)(e)},Functor0:function(){return Dt},Foldable1:function(){return gt}};var Ax=function(e){return function(t){return function(n){return function(a){return function(h){return function(o){for(var r=[],l=o;;){var u=h(l);if(e(u))return r;var i=t(u);r.push(n(i)),l=a(i)}}}}}}};var Ix=function(e){return function(t){return function(n){return function(a){return function(h){return function(o){for(var r=[],l=o;;){var u=h(l);r.push(n(u));var i=a(u);if(e(i))return r;l=t(i)}}}}}}};var a_=function(e){return e.foldl1};var oU=Ao();var b0={unfoldr1:Ix(bu)(oU)(tr)(hn)};var iU=Ao(),ha=function(e){return e.unfoldr};var Jo={unfoldr:Ax(bu)(iU)(tr)(hn),Unfoldable10:function(){return b0}};var sU=ut(ks);var cU=G(Dt),lU=G(ks),w0=Ao(),fU=An(Kh),dU=Yf(Ci),pU=Re(Ci);var hU=qs(gt),_U=De(on);var s_=function(){return vl(ky)(ve(V.value))(function(e){return function(t){return new B({head:e,tail:t})}})}();var S0=function(){return vl(ky)(ve(V.value))(function(e){return function(t){return new B(t)}})}(),c_=function(e){return vl(zM)(e)(function(t){if(t instanceof se)return 1;if(t instanceof qe)return 0;if(t instanceof de)return-1;throw new Error("Failed pattern match at Data.Array (line 897, column 38 - line 900, column 11): "+[t.constructor.name])})},E0=function(e){var t=Bh(e);return function(n){return c_(t(n))}},vU=E0(vt),T0=function(e){var t=Ee(e);return function(n){return c_(t)(n)}};var u_=vl(GM);var zs=function(e){return[e]};var Gs=function(e){return gr(e)===0};var Hx=ml(gd);var Ox=function(){return m0(UM)(B.create)(V.value)}();var l_=function(){return Eu(NM)(B.create)(V.value)}(),Cl=function(e){return l_(e)(gr(e)-1|0)};var Px=function(e){return function(t){var n=function(h){var o=!1,r;function l(u){var i=l_(t)(u);if(i instanceof B){var s=e(i.value0);if(s){h=u+1|0;return}return o=!0,new B(u)}if(i instanceof V)return o=!0,V.value;throw new Error("Failed pattern match at Data.Array (line 1035, column 5 - line 1037, column 25): "+[i.constructor.name])}for(;!o;)r=l(h);return r},a=n(0);if(a instanceof B&&a.value0===0)return{init:[],rest:t};if(a instanceof B)return{init:u_(0)(a.value0)(t),rest:u_(a.value0)(gr(t))(t)};if(a instanceof V)return{init:t,rest:[]};throw new Error("Failed pattern match at Data.Array (line 1022, column 3 - line 1028, column 30): "+[a.constructor.name])}},f_=function(e){return function(t){return Px(e)(t).init}};var Li=function(e){return l_(e)(0)},kx=function(e){return function(t){var n=c_(function(h){return function(o){return e(hn(h))(hn(o))}})(Hx(ee.create)(t)),a=Li(n);if(a instanceof V)return[];if(a instanceof B)return cU(hn)(vU(tr)(function(){var o=KF(zs(a.value0))();return ad(n)(function(r){return function(){var u=lU(function(){var i=function(s){return w0(Cl(s))};return function(s){return hn(i(s))}}())(r0(o))();return fU(dU(e(u)(r.value1))(qe.value))(sU(o0(r)(o)))()}})(),r0(o)()}()));throw new Error("Failed pattern match at Data.Array (line 1115, column 17 - line 1123, column 28): "+[a.constructor.name])}},Dd=function(e){return kx(Ee(e))};var Ai=function(e){return _l(kM)(gn(e))};var Nx=function(e){return hU(e)};var Bx=function(){return Eu(WM)(B.create)(V.value)}(),Cd=function(e){return function(t){return function(n){var a=Qe(0)(function(h){return h+1|0})(Bx(function(h){return pU(e(t)(h))(se.value)})(n));return w0(Ox(a)(t)(n))}}};var Wx=function(){return Eu(BM)(B.create)(V.value)}();var M0=_l(VM);var F0=function(e){return function(t){var n=e<1;return n?t:u_(e)(gr(t))(t)}};var Ux=function(){return Eu(qM)(B.create)(V.value)}(),d_=function(e){return function(t){return function(n){return n.length===0?[]:Qe(n)(function(a){return w0(Ux(a)(n))})(Wx(e(t))(n))}}},x0=function(e){return d_(Re(e))};var Mn=function(e){return function(t){return _U([e])(t)}};var L0=$e(Z(mu)),Va=function(e){return L0(function(){var t=Qe([])(zs);return function(n){return t(e(n))}}())};var bd=function(e){return e.foldrWithIndex};var oo=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var I0=function(e){var t=kr(e);return function(n){return new oo(n,t)}};var p_=function(e){var t=Pn(e.Plus1().Alt0()),n=X(e.Applicative0());return function(a){return t(n(a.value0))(a.value1)}};var Sd=function(e){var t=G(e);return{map:function(n){return function(a){return new oo(n(a.value0),t(n)(a.value1))}}}};var h_=function(e){var t=Nn(e),n=_n(e),a=gn(e);return{foldMap:function(h){var o=De(h.Semigroup0()),r=t(h);return function(l){return function(u){return o(l(u.value0))(r(l)(u.value1))}}},foldl:function(h){return function(o){return function(r){return n(h)(h(o)(r.value0))(r.value1)}}},foldr:function(h){return function(o){return function(r){return h(r.value0)(a(h)(o)(r.value1))}}}}};var R0=function(e){var t=_n(e),n=gn(e),a=h_(e);return{foldMap1:function(h){var o=De(h);return function(r){return function(l){return t(function(u){return function(i){return o(u)(r(i))}})(r(l.value0))(l.value1)}}},foldr1:function(h){return function(o){return Qe(o.value0)(h(o.value0))(n(function(r){var l=Qe(r)(h(r));return function(u){return B.create(l(u))}})(V.value)(o.value1))}},foldl1:function(h){return function(o){return t(h)(o.value0)(o.value1)}},Foldable0:function(){return a}}};var Gx=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Er=function(e){return e};var __=function(e){return function(t){return t.toString(e)}};var v_=isFinite;var Ed=Math.abs;var Td=function(e){return function(t){return e%t}},H0=Math.round;var jx=Lo(al),Kx=fa(al);var O0=16;var P0=function(){return Gx(B.create)(V.value)}(),$U=function(e){if(!v_(e))return 0;if(e>=Er(jx))return jx;if(e<=Er(Kx))return Kx;if(dn)return er(0)(P0(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},bl=function(e){return $U(H0(e))};var HU=typeof Array.from=="function",OU=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",PU=typeof String.prototype.fromCodePoint=="function",kU=typeof String.prototype.codePointAt=="function",Qx=function(e){return kU?function(t){return t.codePointAt(0)}:e};var Xx=function(e){return PU?String.fromCodePoint:e},Yx=function(e){return function(t){return OU?function(n){for(var a="",h=n[Symbol.iterator](),o=0;o<t;++o){var r=h.next();if(r.done)return a;a+=r.value}return a}:e(t)}},Zx=function(e){return function(t){return HU?function(n){return Array.from(n,t)}:e}};function Mu(e){return e.charCodeAt(0)}function eL(e){return String.fromCharCode(e)}var Md={Applicative0:function(){return el},Plus1:function(){return nx}};var nL=fa(Hs),rL=Lo(Hs);var js=function(e){return e.toEnum};var N0=function(e){return e.fromEnum},oL=function(e){var t=js(e),n=N0(e),a=fa(e.Bounded0());return function(h){return function(o){return function(r){var l=t(r);if(l instanceof B)return l.value0;if(l instanceof V){var u=r<n(a);return u?h:o}throw new Error("Failed pattern match at Data.Enum (line 158, column 33 - line 160, column 62): "+[l.constructor.name])}}}};var Fu=function(e){return function(t){return function(n){return e(t(n)+1|0)}}},xu=function(e){return function(t){return function(n){return e(t(n)-1|0)}}};var k0=function(e){return e>=Mu(nL)&&e<=Mu(rL)?new B(eL(e)):V.value},qU={succ:Fu(k0)(Mu),pred:xu(k0)(Mu),Ord0:function(){return Nh}};var B0=function(){return{cardinality:Mu(rL)-Mu(nL)|0,toEnum:k0,fromEnum:Mu,Bounded0:function(){return Hs},Enum1:function(){return qU}}}();var m_=function(e){return e};var Lu=function(e){return e.length};var g_=function(e){return function(t){return t.substr(0,e)}},Ks=function(e){return function(t){return t.substring(e)}};var Au=function(e){return function(t){if(e>=0&&e<t.length)return t.charAt(e);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var iL=function(e){return function(t){return Ks(Lu(t)-e|0)(t)}};var y_=function(e){return function(t){return g_(Lu(t)-e|0)(t)}};var W0=function(e){return function(t){return t.split(e)}};var mo=function(e){return function(t){return t.join(e)}};var lL=function(e){return e===""};var xd=N0(B0),YU=G(mt),ZU=ha(Jo),e4=rd(fl),t4=ll(fl);var dL=function(e){return function(t){return(((e-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var pL=function(e){return 56320<=e&&e<=57343},hL=function(e){return 55296<=e&&e<=56319},_L=function(e){var t=Lu(e);if(t===0)return V.value;if(t===1)return new B({head:xd(Au(0)(e)),tail:""});var n=xd(Au(1)(e)),a=xd(Au(0)(e)),h=hL(a)&&pL(n);return h?new B({head:dL(a)(n),tail:Ks(2)(e)}):new B({head:a,tail:Ks(1)(e)})},n4=function(e){return YU(function(t){return new ee(t.head,t.tail)})(_L(e))},r4=function(e){return ZU(n4)(e)},o4=function(e){var t=xd(Au(0)(e)),n=hL(t)&&Lu(e)>1;if(n){var a=xd(Au(1)(e)),h=pL(a);return h?dL(t)(a):t}return t},a4=Qx(o4),i4=Zx(r4)(a4),Qs=function(e){return gr(i4(e))};var U0=function(){var e=oL(B0)(fa(Hs))(Lo(Hs));return function(t){return m_(e(t))}}(),u4=function(e){if(e<=65535)return U0(e);var t=e4(e-65536|0)(1024)+55296|0,n=t4(e-65536|0)(1024)+56320|0;return U0(t)+U0(n)};var vL=Xx(u4),mL=function(e){return function(t){if(e<1)return"";var n=_L(t);return n instanceof B?vL(n.value0.head)+mL(e-1|0)(n.value0.tail):t}},gL=Yx(mL);var D_=function(e){return function(t){return Ks(Lu(gL(e)(t)))(t)}};var q0=Vy(vt),yL=Si(vt),DL=ol(vt);var V0=Vy(wi);var CL=Me(_o);var bL=function(){function e(t,n,a,h){this.value0=t,this.value1=n,this.value2=a,this.value3=h}return e.create=function(t){return function(n){return function(a){return function(h){return new e(t,n,a,h)}}}},e}(),wL=function(e){return function(t){return Td(Td(e)(t)+t)(t)}},d4=function(e){return function(t){return function(n){return function(a){var h=q0(0)(255)(e),o=Er(h)/255,r=q0(0)(255)(t),l=Er(r)/255,u=q0(0)(255)(n),i=yL(yL(h)(r))(u),s=DL(DL(h)(r))(u),f=i-s|0,p=Er(f)/255,d=Er(i+s|0)/(255*2),c=function(){if(f===0)return 0;if(dn)return p/(1-Ed(2*d-1));throw new Error("Failed pattern match at Color (line 160, column 3 - line 162, column 64): ")}(),_=Er(u)/255,v=function(y){if(y===0)return 0;if(i===h)return wL((l-_)/p)(6);if(i===r)return(_-o)/p+2;if(dn)return(o-l)/p+4;throw new Error("Failed pattern match at Color (line 150, column 3 - line 150, column 15): "+[y.constructor.name])},m=60*v(f);return new bL(m,c,d,a)}}}},Ys=function(e){return function(t){return function(n){return d4(e)(t)(n)(1)}}};var p4=function(e){return function(t){return function(n){return function(a){var h=V0(0)(1)(t),o=V0(0)(1)(n),r=V0(0)(1)(a);return new bL(e,h,o,r)}}}};var SL=function(e){return function(t){return function(n){return p4(e)(t)(n)(1)}}},EL=SL(0)(0)(1);var TL=function(e){var t=function(l){return CL(Er(bl(100*l))/100)},n=t(e.value1*100)+"%",a=t(e.value2*100)+"%",h=t(e.value0),o=CL(e.value3),r=e.value3===1;return r?"hsl("+(h+(", "+(n+(", "+(a+")"))))):"hsla("+(h+(", "+(n+(", "+(a+(", "+(o+")")))))))};var h4=function(e){var t=e===360;return t?e:wL(e)(360)};var _4=function(e){var t=h4(e.value0)/60,n=(1-Ed(2*e.value2-1))*e.value1,a=e.value2-n/2,h=n*(1-Ed(Td(t)(2)-1)),o=function(){if(t<1)return{r:n,g:h,b:0};if(1<=t&&t<2)return{r:h,g:n,b:0};if(2<=t&&t<3)return{r:0,g:n,b:h};if(3<=t&&t<4)return{r:0,g:h,b:n};if(4<=t&&t<5)return{r:h,g:0,b:n};if(dn)return{r:n,g:0,b:h};throw new Error("Failed pattern match at Color (line 356, column 3 - line 362, column 43): ")}();return{r:o.r+a,g:o.g+a,b:o.b+a,a:e.value3}};var v4=function(e){var t=_4(e),n=bl(255*t.g),a=bl(255*t.r),h=bl(255*t.b);return{r:a,g:n,b:h,a:t.a}};var El=function(e){var t=function(h){var o=__(O0)(h),r=Qs(o)===1;return r?"0"+o:o},n=v4(e),a=function(){if(n.a===1)return"";if(dn)return t(bl(255*n.a));throw new Error("Failed pattern match at Color (line 429, column 3 - line 431, column 46): ")}();return"#"+(t(n.r)+(t(n.g)+(t(n.b)+a)))};var Ga=SL(0)(0)(0);var C_={dimap:function(e){return function(t){return function(n){return function(a){return t(n(e(a)))}}}}},Zs=function(e){return e.dimap};var jo={first:function(e){return function(t){return new ee(e(t.value0),t.value1)}},second:G(xi),Profunctor0:function(){return C_}},ec=function(e){return e.second},Tl=function(e){return e.first};var FL=G(Dt),xL=ec(jo),m4=De(on),g4=n_(gt)(eo);var ao=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),io=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),y4=function(e){return e};var D4=function(e){return e},ja=function(e){return e.value};var Ml={append:function(e){return function(t){if(e instanceof io&&t instanceof io)return new io(e.value0+t.value0);if(e instanceof io&&t instanceof ao)return new ao(FL(xL(function(n){return e.value0+n}))(t.value0));if(e instanceof ao&&t instanceof io)return new ao(FL(xL(function(n){return t.value0+n}))(e.value0));if(e instanceof ao&&t instanceof ao)return new ao(m4(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},C4=De(Ml),z0={append:function(e){return function(t){return C4(e)(t)}}},LL=De(z0);var Ld=function(e){if(e instanceof ao)return er("")(g4("")(e.value0));if(e instanceof io)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var b_=function(){return{fromString:io.create}}(),AL=Mt(b_),nr={fromString:function(e){return y4(AL(e))}},w_=Mt(nr);var Ru={value:function(e){return w_(TL(e))}};var tc={value:function(){var e=Me(_o);return function(t){return w_(e(t))}}()},$u={value:w_},Ri=function(e){var t=ja(e);return function(n){var a=ja(n);return{value:function(h){return LL(t(h.value0))(LL(w_(" "))(a(h.value1)))}}}};var zn={fromString:function(e){return D4(AL(e))}};var IL=function(e){return e};var RL=function(e){return e.center};var Ad=function(){return new ao([new ee("-webkit-",""),new ee("-moz-",""),new ee("-ms-",""),new ee("-o-",""),new ee("","")])}();var Ka=ne,G0=ne;var J0=De(z0),j0=ja(tc),K0=Mt(nr),HL=Me(_o),b4=De(Ml);var Id=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),w4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),S4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),E4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),T4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Hu=function(e){if(e instanceof Id)return Ld(e.value0);if(e instanceof w4)return Ka(function(t){return Ka(function(n){return"("+(Hu(t)+(" + "+(Hu(n)+")")))})(e.value1)})(e.value0);if(e instanceof S4)return Ka(function(t){return Ka(function(n){return"("+(Hu(t)+(" - "+(Hu(n)+")")))})(e.value1)})(e.value0);if(e instanceof E4)return Ka(function(t){return"("+(HL(e.value0)+(" * "+(Hu(t)+")")))})(e.value1);if(e instanceof T4)return Ka(function(t){return"("+(Hu(t)+(" / "+(HL(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},ma={value:function(e){return e instanceof Id?e.value0:b4(Ad)(new io("calc"+Hu(e)))}};var et=function(e){return new Id(J0(j0(e))(K0("px")))};var xl=function(e){return new Id(J0(j0(e))(K0("%")))};var Q0=function(e){return new Id(J0(j0(e))(K0("em")))};var M4=De(on),OL=X(el),F4=Re(Di(eo)),Tr=Ee(Vt),x4=Ee($s(Vt)),Ou=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Oi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ku=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Nu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Uu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Pi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ll=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),PL=function(e){return e},S_=function(){function e(){}return e.value=new e,e}(),X0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Y0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Z0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kL=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),NL=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lt=function(e){return function(t){return new Rd(M4(e.value0)(t),e.value1)}},qt=function(){return new Rd([],S_.value)}(),BL=function(e){return PL(OL(Pi.create(e)))};var L4={eq:function(e){return function(t){return e instanceof Ou&&t instanceof Ou||e instanceof Oi&&t instanceof Oi||e instanceof Pu&&t instanceof Pu?e.value0===t.value0:e instanceof ku&&t instanceof ku||e instanceof Nu&&t instanceof Nu||e instanceof Bu&&t instanceof Bu||e instanceof Wu&&t instanceof Wu||e instanceof Uu&&t instanceof Uu||e instanceof qu&&t instanceof qu?e.value0===t.value0&&e.value1===t.value1:e instanceof Pi&&t instanceof Pi?e.value0===t.value0:e instanceof Ll&&t instanceof Ll?e.value0===t.value0&&F4(e.value1)(t.value1):!1}}};var WL={compare:function(e){return function(t){if(e instanceof Ou&&t instanceof Ou)return Tr(e.value0)(t.value0);if(e instanceof Ou)return de.value;if(t instanceof Ou)return se.value;if(e instanceof Oi&&t instanceof Oi)return Tr(e.value0)(t.value0);if(e instanceof Oi)return de.value;if(t instanceof Oi)return se.value;if(e instanceof Pu&&t instanceof Pu)return Tr(e.value0)(t.value0);if(e instanceof Pu)return de.value;if(t instanceof Pu)return se.value;if(e instanceof ku&&t instanceof ku){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof ku)return de.value;if(t instanceof ku)return se.value;if(e instanceof Nu&&t instanceof Nu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof Nu)return de.value;if(t instanceof Nu)return se.value;if(e instanceof Bu&&t instanceof Bu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof Bu)return de.value;if(t instanceof Bu)return se.value;if(e instanceof Wu&&t instanceof Wu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof Wu)return de.value;if(t instanceof Wu)return se.value;if(e instanceof Uu&&t instanceof Uu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof Uu)return de.value;if(t instanceof Uu)return se.value;if(e instanceof qu&&t instanceof qu){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:Tr(e.value1)(t.value1)}if(e instanceof qu)return de.value;if(t instanceof qu)return se.value;if(e instanceof Pi&&t instanceof Pi)return Tr(e.value0)(t.value0);if(e instanceof Pi)return de.value;if(t instanceof Pi)return se.value;if(e instanceof Ll&&t instanceof Ll){var n=Tr(e.value0)(t.value0);return n instanceof de?de.value:n instanceof se?se.value:x4(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return L4}};var E_=function(e){return new Rd([],new X0(e))},Gn=function(e){return function(t){return new Rd([],new Z0(e,t))}},UL=function(e){return function(t){return new Rd([],new Y0(e,t))}};var yt=function(e){return PL(OL(Oi.create(e)))};var ga=function(e){return e.tell};function rr(e){return new Error(e)}function yo(e){return function(){throw e}}function T_(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var tD=function(e){return yo(rr(e))};var or=function(e){return e.throwError};var R4={throwError:yo,Monad0:function(){return Ua}};var qL={catchError:$e(T_),MonadThrow0:function(){return R4}};var Ko=function(e){return e.catchError};var $d=function(e){var t=Ko(e),n=e.MonadThrow0().Monad0(),a=G(n.Bind1().Apply0().Functor0()),h=X(n.Applicative0());return function(o){return t(a(Oe.create)(o))(function(r){return h(We.create(r))})}};var Mr=function(e){return e.ask};var uo=function(e){return e.state},Il=function(e){var t=uo(e);return function(n){return t(function(a){return new ee(void 0,n)})}},yn=function(e){var t=uo(e);return function(n){return t(function(a){return new ee(void 0,n(a))})}},Ro=function(e){var t=uo(e);return function(n){return t(function(a){var h=n(a);return new ee(h,h)})}},$o=function(e){var t=uo(e);return function(n){return t(function(a){return new ee(n(a),a)})}},Fr=function(e){return uo(e)(function(t){return new ee(t,t)})};var bt=function(e){return e.lift};var Rl={liftEffect:he(_e),Monad0:function(){return Ua}},Le=function(e){return e.liftEffect};var nD=function(e){return e},rD=function(e){return e};var M_=function(e){return function(t){return e(t)}},oD=function(e){var t=G(e);return{map:function(n){return M_(t(function(a){return new ee(n(a.value0),a.value1)}))}}};var Hd=function(e){var t=De(e);return function(n){var a=pt(n),h=n.Functor0(),o=G(h),r=oD(h);return{apply:function(l){return function(u){var i=function(s){return function(f){return new ee(s.value0(f.value0),t(s.value1)(f.value1))}};return a(o(i)(l))(u)}},Functor0:function(){return r}}}},aD=function(e){var t=De(e),n=Hd(e);return function(a){var h=Z(a),o=a.Apply0(),r=G(o.Functor0()),l=n(o);return{bind:function(u){return function(i){return h(u)(function(s){var f=i(s.value0);return r(function(p){return new ee(p.value0,t(s.value1)(p.value1))})(f)})}},Apply0:function(){return l}}}};var VL=function(e){var t=st(e),n=Hd(e.Semigroup0());return function(a){var h=X(a),o=n(a.Apply0());return{pure:function(r){return h(new ee(r,t))},Apply0:function(){return o}}}},O4=function(e){var t=VL(e),n=aD(e.Semigroup0());return function(a){var h=t(a.Applicative0()),o=n(a.Bind1());return{Applicative0:function(){return h},Bind1:function(){return o}}}};var zL=function(e){var t=e.Semigroup0(),n=O4(e);return function(a){var h=n(a);return{tell:function(){var o=X(a.Applicative0()),r=ee.create(void 0);return function(l){return nD(o(r(l)))}}(),Semigroup0:function(){return t},Monad1:function(){return h}}}};var P4=In();var k4=function(e){return P4(rD(e))};var GL=function(e){return hn(k4(e))};var U4=G(oD(Ti));var q4=pt(Hd(on)(zh)),V4=Z(aD(on)(jy));var JL=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jL=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),KL=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),QL=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),iD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Od=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),uD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),XL=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),YL=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZL=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),eA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var z4=function(e){return e},Pd=function(e){return GL(e)},tA=function(){var e=ga(zL(Ps)(Dr));return function(t){return z4(e(zs(t)))}}(),Ft=function(e){return function(t){return tA(new uD(new iD(e),Pd(t)))}};var Jt=function(e){var t=ja(e);return function(n){return function(a){return tA(new Od(IL(n),t(a)))}}},sD=function(e){var t=Jt(e);return function(n){return t(n)}};var G4={map:function(e){return function(t){return U4(e)(t)}}};var J4={apply:function(e){return function(t){return q4(e)(t)}},Functor0:function(){return G4}},Xo={bind:function(e){return function(t){return V4(e)(function(n){return function(a){return a}(t(n))})}},Apply0:function(){return J4}};var j4=Mt(nr);var nA=Mt(zn),K4=Jt(Ru),Q4=Ri(ma);var X4={value:function(e){return e}},Y4=Jt(Ri(X4)(Q4(Ru))),kd=j4("solid");var rA=K4(nA("border-color"));var Nd=function(e){return function(t){return function(n){return Y4(nA("border"))(new ee(e,new ee(t,n)))}}};var x_=Mt(zn),Hl=Mt(nr);var Ho=function(){var e=Jt($u)(x_("z-index")),t=Me(to);return function(n){return e(t(n))}}();var Z4={value:function(e){return e}};var e6={value:function(e){return e}};var zu=Hl("relative"),lr=Jt(Z4)(x_("position")),L_=Jt(tc)(x_("opacity"));var oA=Hl("inline-block");var ac=Hl("flex");var aA=Hl("none");var ya=Jt(e6)(x_("display"));var iA=Hl("block"),Da=Hl("absolute");var fD=Mt(nr);var uA=Mt(zn);var t6=function(e){return e};var n6={value:function(e){return e}};var r6={value:function(e){return e}};var Ol=fD("row");var o6={fromString:function(e){return t6(fD(e))}},a6=Mt(o6);var ic=Jt(n6)(uA("flex-direction"));var sA=fD("column");var cA={center:a6("center")};var lA=Jt(r6)(uA("align-items"));var Gu=Jt(ma),Qa=Mt(zn),fA=Ri(ma)(ma),dA=Jt(Ri(fA)(fA)),Ca=Gu(Qa("width")),Yo=Gu(Qa("top")),A_=Gu(Qa("right"));var pD=Gu(Qa("padding-right"));var I_=function(e){return function(t){return function(n){return function(a){return dA(Qa("padding"))(new ee(new ee(e,t),new ee(n,a)))}}}};var hD=Gu(Qa("margin-right"));var pA=function(e){return function(t){return function(n){return function(a){return dA(Qa("margin"))(new ee(new ee(e,t),new ee(n,a)))}}}};var Ni=Gu(Qa("left")),Oo=Gu(Qa("height")),_D=Gu(Qa("bottom"));var Ye=function(){function e(){}return e.value=new e,e}(),Xe=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vD=function(e){return e},u6=function(e){return new Xe(e.value0,e.value1)};var s6=function(e){var t=function(n){return function(a){var h=n,o=!1,r;function l(u,i){if(i instanceof Xe&&i.value1 instanceof Xe&&i.value1.value1 instanceof Xe){h=new Xe(i,u),a=i.value1.value1.value1;return}var s=function(p){return p instanceof Xe&&p.value1 instanceof Xe&&p.value1.value1 instanceof Ye?new Xe(e(p.value0),new Xe(e(p.value1.value0),Ye.value)):p instanceof Xe&&p.value1 instanceof Ye?new Xe(e(p.value0),Ye.value):Ye.value},f=function(p){return function(d){var c=p,_=!1,v;function m(y,C){if(y instanceof Xe&&y.value0 instanceof Xe&&y.value0.value1 instanceof Xe&&y.value0.value1.value1 instanceof Xe){c=y.value1,d=new Xe(e(y.value0.value0),new Xe(e(y.value0.value1.value0),new Xe(e(y.value0.value1.value1.value0),C)));return}return _=!0,C}for(;!_;)v=m(c,d);return v}};return o=!0,f(u)(s(i))}for(;!o;)r=l(h,a);return r}};return t(Ye.value)},_A={map:s6};var Wn={foldr:function(e){return function(t){var n=function(){var h=function(o){return function(r){var l=o,u=!1,i;function s(f,p){if(p instanceof Ye)return u=!0,f;if(p instanceof Xe){l=new Xe(p.value0,f),r=p.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[f.constructor.name,p.constructor.name])}for(;!u;)i=s(l,r);return i}};return h(Ye.value)}(),a=_n(Wn)($e(e))(t);return function(h){return a(n(h))}}},foldl:function(e){var t=function(n){return function(a){var h=n,o=!1,r;function l(u,i){if(i instanceof Ye)return o=!0,u;if(i instanceof Xe){h=e(u)(i.value0),a=i.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[i.constructor.name])}for(;!o;)r=l(h,a);return r}};return t},foldMap:function(e){var t=De(e.Semigroup0()),n=st(e);return function(a){return _n(Wn)(function(h){var o=t(h);return function(r){return o(a(r))}})(n)}}};var c6=gn(Wn);var mD={append:function(e){return function(t){return c6(Xe.create)(t)(e)}}},vA=De(mD);var mA={append:function(e){return function(t){return new oo(e.value0,vA(e.value1)(u6(t)))}}};var l6={alt:vA,Functor0:function(){return _A}},gA=function(){return{empty:Ye.value,Alt0:function(){return l6}}}();var uc=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}};var d6=G(mt);var At=function(){function e(){}return e.value=new e,e}(),kt=function(){function e(t,n,a,h,o,r){this.value0=t,this.value1=n,this.value2=a,this.value3=h,this.value4=o,this.value5=r}return e.create=function(t){return function(n){return function(a){return function(h){return function(o){return function(r){return new e(t,n,a,h,o,r)}}}}}},e}(),DA=function(){function e(){}return e.value=new e,e}(),gD=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),CD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var R_=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),yA=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),Zo=function(e,t,n,a){if(n instanceof At){if(a instanceof At)return new kt(1,1,e,t,n,a);if(a instanceof kt)return new kt(1+a.value0|0,1+a.value1|0,e,t,n,a);throw new Error("Failed pattern match at Data.Map.Internal (line 680, column 5 - line 684, column 39): "+[a.constructor.name])}if(n instanceof kt){if(a instanceof At)return new kt(1+n.value0|0,1+n.value1|0,e,t,n,a);if(a instanceof kt)return new kt(1+function(){var h=n.value0>a.value0;return h?n.value0:a.value0}()|0,(1+n.value1|0)+a.value1|0,e,t,n,a);throw new Error("Failed pattern match at Data.Map.Internal (line 686, column 5 - line 690, column 68): "+[a.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 678, column 32 - line 690, column 68): "+[n.constructor.name])},p6=function(){return $e(CD.create)(DA.value)}(),h6=function(e){return function(t){return function(n){var a=function(h){var o=!1,r;function l(u){if(u instanceof DA)return o=!0,n(void 0);if(u instanceof gD)return o=!0,t(u.value0,u.value1,u.value2);if(u instanceof CD){h=e(u.value1)(u.value0);return}throw new Error("Failed pattern match at Data.Map.Internal (line 918, column 8 - line 924, column 20): "+[u.constructor.name])}for(;!o;)r=l(h);return r};return a}}},Ju=function(e){if(e instanceof At)return 0;if(e instanceof kt)return e.value1;throw new Error("Failed pattern match at Data.Map.Internal (line 616, column 8 - line 618, column 24): "+[e.constructor.name])},sc=function(e){return function(t){return new kt(1,1,e,t,At.value,At.value)}},ba=function(){var e=function(a){if(a instanceof At)return 0;if(a instanceof kt)return a.value0;throw new Error("Failed pattern match at Data.Map.Internal (line 735, column 12 - line 737, column 26): "+[a.constructor.name])},t=function(a,h,o,r,l,u,i){return u instanceof kt&&u.value0>e(i)?Zo(u.value2,u.value3,Zo(a,h,o,u.value4),Zo(r,l,u.value5,i)):Zo(r,l,Zo(a,h,o,u),i)},n=function(a,h,o,r,l,u,i){return u instanceof kt&&e(l)<=u.value0?Zo(u.value2,u.value3,Zo(o,r,l,u.value4),Zo(a,h,u.value5,i)):Zo(o,r,l,Zo(a,h,u,i))};return function(a,h,o,r){if(o instanceof At)return r instanceof At?sc(a)(h):r instanceof kt&&r.value0>1?t(a,h,o,r.value2,r.value3,r.value4,r.value5):Zo(a,h,o,r);if(o instanceof kt){if(r instanceof kt){if(r.value0>(o.value0+1|0))return t(a,h,o,r.value2,r.value3,r.value4,r.value5);if(o.value0>(r.value0+1|0))return n(a,h,o.value2,o.value3,o.value4,o.value5,r)}return r instanceof At&&o.value0>1?n(a,h,o.value2,o.value3,o.value4,o.value5,r):Zo(a,h,o,r)}throw new Error("Failed pattern match at Data.Map.Internal (line 695, column 40 - line 716, column 34): "+[o.constructor.name])}}(),yD=uc("unsafeSplit","Data.Map.Internal",function(){return function(e,t,n){if(n instanceof At)return new R_(V.value,At.value,At.value);if(n instanceof kt){var a=e(t)(n.value2);if(a instanceof de){var h=yD(771)(e,t,n.value4);return new R_(h.value0,h.value1,ba(n.value2,n.value3,h.value2,n.value5))}if(a instanceof se){var h=yD(774)(e,t,n.value5);return new R_(h.value0,ba(n.value2,n.value3,n.value4,h.value1),h.value2)}if(a instanceof qe)return new R_(new B(n.value3),n.value4,n.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 769, column 5 - line 777, column 30): "+[a.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 765, column 34 - line 777, column 30): "+[n.constructor.name])}}),bD=yD(764),CA=uc("unsafeSplitLast","Data.Map.Internal",function(){return function(e,t,n,a){if(a instanceof At)return new yA(e,t,n);if(a instanceof kt){var h=CA(757)(a.value2,a.value3,a.value4,a.value5);return new yA(h.value0,h.value1,ba(e,t,n,h.value2))}throw new Error("Failed pattern match at Data.Map.Internal (line 754, column 37 - line 758, column 57): "+[a.constructor.name])}}),_6=CA(753),wD=function(e,t){if(e instanceof At)return t;if(e instanceof kt){var n=_6(e.value2,e.value3,e.value4,e.value5);return ba(n.value0,n.value1,n.value2,t)}throw new Error("Failed pattern match at Data.Map.Internal (line 742, column 25 - line 746, column 38): "+[e.constructor.name,t.constructor.name])};var DD=uc("unsafeUnionWith","Data.Map.Internal",function(){return function(e,t,n,a){if(n instanceof At)return a;if(a instanceof At)return n;if(a instanceof kt){var h=bD(e,a.value2,n),o=DD(787)(e,t,h.value1,a.value4),r=DD(788)(e,t,h.value2,a.value5);if(h.value0 instanceof B)return ba(a.value2,t(h.value0.value0)(a.value3),o,r);if(h.value0 instanceof V)return ba(a.value2,a.value3,o,r);throw new Error("Failed pattern match at Data.Map.Internal (line 789, column 5 - line 793, column 46): "+[h.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 782, column 42 - line 793, column 46): "+[n.constructor.name,a.constructor.name])}}),v6=DD(781),SD=function(e){var t=Ee(e);return function(n){return function(a){return function(h){return v6(t,n,a,h)}}}},$_=function(e){return SD(e)(ve)};var ED=function(e){var t=Ee(e);return function(n){return function(a){var h=bD(t,n,a);return d6(function(o){return new ee(o,wD(h.value1,h.value2))})(h.value0)}}};var ea=function(e){var t=Ee(e);return function(n){var a=function(h){var o=!1,r;function l(u){if(u instanceof At)return o=!0,V.value;if(u instanceof kt){var i=t(n)(u.value2);if(i instanceof de){h=u.value4;return}if(i instanceof se){h=u.value5;return}if(i instanceof qe)return o=!0,new B(u.value3);throw new Error("Failed pattern match at Data.Map.Internal (line 281, column 7 - line 284, column 22): "+[i.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 278, column 8 - line 284, column 22): "+[u.constructor.name])}for(;!o;)r=l(h);return r};return a}};var m6=function(){var e=function(t){return function(n){var a=t,h=!1,o;function r(l,u){if(u instanceof At)return h=!0,l;if(u instanceof kt){if(u.value5 instanceof At){a=new gD(u.value2,u.value3,l),n=u.value4;return}a=new gD(u.value2,u.value3,new CD(u.value5,l)),n=u.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 929, column 13 - line 936, column 48): "+[u.constructor.name])}for(;!h;)o=r(a,n);return o}};return e}(),g6=h6(m6);var y6=function(){var e=function(t,n,a){return new B(new ee(new ee(t,n),a))};return g6(e)(function(t){return V.value})}(),kl=function(e){var t=ha(e)(y6);return function(n){return t(p6(n))}};var Br=function(e){var t=Ee(e);return function(n){return function(a){var h=function(o){if(o instanceof At)return sc(n)(a);if(o instanceof kt){var r=t(n)(o.value2);if(r instanceof de)return ba(o.value2,o.value3,h(o.value4),o.value5);if(r instanceof se)return ba(o.value2,o.value3,o.value4,h(o.value5));if(r instanceof qe)return new kt(o.value0,o.value1,n,a,o.value4,o.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 469, column 7 - line 472, column 35): "+[r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 466, column 8 - line 472, column 35): "+[o.constructor.name])};return h}}},Nl={map:function(e){var t=function(n){if(n instanceof At)return At.value;if(n instanceof kt)return new kt(n.value0,n.value1,n.value2,e(n.value3),t(n.value4),t(n.value5));throw new Error("Failed pattern match at Data.Map.Internal (line 145, column 10 - line 148, column 39): "+[n.constructor.name])};return t}};var Bi={foldr:function(e){return function(t){var n=uc("go","Data.Map.Internal",function(){return function(h,o){if(h instanceof At)return o;if(h instanceof kt)return n(170)(h.value4,e(h.value3)(n(170)(h.value5,o)));throw new Error("Failed pattern match at Data.Map.Internal (line 167, column 26 - line 170, column 43): "+[h.constructor.name])}}),a=n(167);return function(h){return a(h,t)}}},foldl:function(e){return function(t){var n=uc("go","Data.Map.Internal",function(){return function(h,o){if(o instanceof At)return h;if(o instanceof kt)return n(176)(e(n(176)(h,o.value4))(o.value3),o.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 173, column 26 - line 176, column 43): "+[o.constructor.name])}}),a=n(173);return function(h){return a(t,h)}}},foldMap:function(e){var t=st(e),n=De(e.Semigroup0());return function(a){var h=function(o){if(o instanceof At)return t;if(o instanceof kt)return n(h(o.value4))(n(a(o.value3))(h(o.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 179, column 10 - line 182, column 28): "+[o.constructor.name])};return h}}},TD={foldrWithIndex:function(e){return function(t){var n=uc("go","Data.Map.Internal",function(){return function(h,o){if(h instanceof At)return o;if(h instanceof kt)return n(190)(h.value4,e(h.value2)(h.value3)(n(190)(h.value5,o)));throw new Error("Failed pattern match at Data.Map.Internal (line 187, column 26 - line 190, column 45): "+[h.constructor.name])}}),a=n(187);return function(h){return a(h,t)}}},foldlWithIndex:function(e){return function(t){var n=uc("go","Data.Map.Internal",function(){return function(h,o){if(o instanceof At)return h;if(o instanceof kt)return n(196)(e(o.value2)(n(196)(h,o.value4))(o.value3),o.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 193, column 26 - line 196, column 45): "+[o.constructor.name])}}),a=n(193);return function(h){return a(t,h)}}},foldMapWithIndex:function(e){var t=st(e),n=De(e.Semigroup0());return function(a){var h=function(o){if(o instanceof At)return t;if(o instanceof kt)return n(h(o.value4))(n(a(o.value2)(o.value3))(h(o.value5)));throw new Error("Failed pattern match at Data.Map.Internal (line 199, column 10 - line 202, column 30): "+[o.constructor.name])};return h}},Foldable0:function(){return Bi}},bA=function(){return bd(TD)(function(e){return function(t){return function(n){return new Xe(e,n)}}})(Ye.value)}();var Wd=function(){return gn(Bi)(Xe.create)(Ye.value)}();var Xa=function(e){var t=!1,n;function a(h){if(h instanceof At)return t=!0,V.value;if(h instanceof kt){if(h.value4 instanceof At)return t=!0,new B({key:h.value2,value:h.value3});e=h.value4;return}throw new Error("Failed pattern match at Data.Map.Internal (line 359, column 11 - line 364, column 21): "+[h.constructor.name])}for(;!t;)n=a(e);return n};var ju=function(e){var t=!1,n;function a(h){if(h instanceof At)return t=!0,V.value;if(h instanceof kt){if(h.value5 instanceof At)return t=!0,new B({key:h.value2,value:h.value3});e=h.value5;return}throw new Error("Failed pattern match at Data.Map.Internal (line 350, column 11 - line 355, column 21): "+[h.constructor.name])}for(;!t;)n=a(e);return n};var dr=function(){return At.value}(),Bl=function(e){var t=Br(e);return function(n){return _n(n)(function(a){return function(h){return t(h.value0)(h.value1)(a)}})(dr)}};var Ya=function(e){var t=Ee(e);return function(n){var a=function(h){if(h instanceof At)return At.value;if(h instanceof kt){var o=t(n)(h.value2);if(o instanceof de)return ba(h.value2,h.value3,a(h.value4),h.value5);if(o instanceof se)return ba(h.value2,h.value3,h.value4,a(h.value5));if(o instanceof qe)return wD(h.value4,h.value5);throw new Error("Failed pattern match at Data.Map.Internal (line 496, column 7 - line 499, column 43): "+[o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 493, column 8 - line 499, column 43): "+[h.constructor.name])};return a}};var Ku=function(e){var t=Ee(e);return function(n){return function(a){return function(h){var o=bD(t,a,h),r=n(o.value0);if(r instanceof V)return wD(o.value1,o.value2);if(r instanceof B)return ba(a,r.value0,o.value1,o.value2);throw new Error("Failed pattern match at Data.Map.Internal (line 512, column 3 - line 516, column 41): "+[r.constructor.name])}}}};var pr=function(){var e={},t="Pure",n="Throw",a="Catch",h="Sync",o="Async",r="Bind",l="Bracket",u="Fork",i="Sequential",s="Map",f="Apply",p="Alt",d="Cons",c="Resume",_="Release",v="Finalizer",m="Finalized",y="Forked",C="Fiber",T="Thunk";function D(N,Q,O,W){this.tag=N,this._1=Q,this._2=O,this._3=W}function g(N){var Q=function(O,W,U){return new D(N,O,W,U)};return Q.tag=N,Q}function w(N){return new D(t,void 0)}function F(N){try{N()}catch(Q){setTimeout(function(){throw Q},0)}}function b(N,Q,O){try{return Q(O())}catch(W){return N(W)}}function E(N,Q,O){try{return Q(O)()}catch(W){return O(N(W))(),w}}var M=function(){var N=1024,Q=0,O=0,W=new Array(N),U=!1;function k(){var te;for(U=!0;Q!==0;)Q--,te=W[O],W[O]=void 0,O=(O+1)%N,te();U=!1}return{isDraining:function(){return U},enqueue:function(te){var J,ye;Q===N&&(ye=U,k(),U=ye),W[(O+Q)%N]=te,Q++,U||k()}}}();function S(N){var Q={},O=0,W=0;return{register:function(U){var k=O++;U.onComplete({rethrow:!0,handler:function(te){return function(){W--,delete Q[k]}}})(),Q[k]=U,W++},isEmpty:function(){return W===0},killAll:function(U,k){return function(){if(W===0)return k();var te=0,J={};function ye(we){J[we]=Q[we].kill(U,function(ce){return function(){delete J[we],te--,N.isLeft(ce)&&N.fromLeft(ce)&&setTimeout(function(){throw N.fromLeft(ce)},0),te===0&&k()}})()}for(var Ae in Q)Q.hasOwnProperty(Ae)&&(te++,ye(Ae));return Q={},O=0,W=0,function(we){return new D(h,function(){for(var ce in J)J.hasOwnProperty(ce)&&J[ce]()})}}}}}var x=0,L=1,R=2,A=3,I=4,$=5,H=6;function P(N,Q,O){var W=0,U=x,k=O,te=null,J=null,ye=null,Ae=null,we=null,ce=0,Fe=0,It=null,nn=!0;function Gt(fe){for(var ae,K,ie;;)switch(ae=null,K=null,ie=null,U){case R:U=L;try{k=ye(k),Ae===null?ye=null:(ye=Ae._1,Ae=Ae._2)}catch(Ve){U=$,te=N.left(Ve),k=null}break;case A:N.isLeft(k)?(U=$,te=k,k=null):ye===null?U=$:(U=R,k=N.fromRight(k));break;case L:switch(k.tag){case r:ye&&(Ae=new D(d,ye,Ae)),ye=k._2,U=L,k=k._1;break;case t:ye===null?(U=$,k=N.right(k._1)):(U=R,k=k._1);break;case h:U=A,k=b(N.left,N.right,k._1);break;case o:U=I,k=E(N.left,k._1,function(Ve){return function(){W===fe&&(W++,M.enqueue(function(){W===fe+1&&(U=A,k=Ve,Gt(W))}))}});return;case n:U=$,te=N.left(k._1),k=null;break;case a:ye===null?we=new D(d,k,we,J):we=new D(d,k,new D(d,new D(c,ye,Ae),we,J),J),ye=null,Ae=null,U=L,k=k._1;break;case l:ce++,ye===null?we=new D(d,k,we,J):we=new D(d,k,new D(d,new D(c,ye,Ae),we,J),J),ye=null,Ae=null,U=L,k=k._1;break;case u:U=A,ae=P(N,Q,k._2),Q&&Q.register(ae),k._1&&ae.run(),k=N.right(ae);break;case i:U=L,k=z(N,Q,k._1);break}break;case $:if(ye=null,Ae=null,we===null)U=H,k=J||te||k;else switch(ae=we._3,ie=we._1,we=we._2,ie.tag){case a:J&&J!==ae&&ce===0?U=$:te&&(U=L,k=ie._2(N.fromLeft(te)),te=null);break;case c:J&&J!==ae&&ce===0||te?U=$:(ye=ie._1,Ae=ie._2,U=R,k=N.fromRight(k));break;case l:ce--,te===null&&(K=N.fromRight(k),we=new D(d,new D(_,ie._2,K),we,ae),(J===ae||ce>0)&&(U=L,k=ie._3(K)));break;case _:we=new D(d,new D(m,k,te),we,J),U=L,J&&J!==ae&&ce===0?k=ie._1.killed(N.fromLeft(J))(ie._2):te?k=ie._1.failed(N.fromLeft(te))(ie._2):k=ie._1.completed(N.fromRight(k))(ie._2),te=null,ce++;break;case v:ce++,we=new D(d,new D(m,k,te),we,J),U=L,k=ie._1;break;case m:ce--,U=$,k=ie._1,te=ie._2;break}break;case H:for(var pe in It)It.hasOwnProperty(pe)&&(nn=nn&&It[pe].rethrow,F(It[pe].handler(k)));It=null,J&&te?setTimeout(function(){throw N.fromLeft(te)},0):N.isLeft(k)&&nn&&setTimeout(function(){if(nn)throw N.fromLeft(k)},0);return;case x:U=L;break;case I:return}}function tt(fe){return function(){if(U===H)return nn=nn&&fe.rethrow,fe.handler(k)(),function(){};var ae=Fe++;return It=It||{},It[ae]=fe,function(){It!==null&&delete It[ae]}}}function le(fe,ae){return function(){if(U===H)return ae(N.right(void 0))(),function(){};var K=tt({rethrow:!1,handler:function(){return ae(N.right(void 0))}})();switch(U){case x:J=N.left(fe),U=H,k=J,Gt(W);break;case I:J===null&&(J=N.left(fe)),ce===0&&(U===I&&(we=new D(d,new D(v,k(fe)),we,J)),U=$,k=null,te=null,Gt(++W));break;default:J===null&&(J=N.left(fe)),ce===0&&(U=$,k=null,te=null)}return K}}function me(fe){return function(){var ae=tt({rethrow:!1,handler:fe})();return U===x&&Gt(W),ae}}return{kill:le,join:me,onComplete:tt,isSuspended:function(){return U===x},run:function(){U===x&&(M.isDraining()?Gt(W):M.enqueue(function(){Gt(W)}))}}}function q(N,Q,O,W){var U=0,k={},te=0,J={},ye=new Error("[ParAff] Early exit"),Ae=null,we=e;function ce(tt,le,me){var fe=le,ae=null,K=null,ie=0,pe={},Ve,rt;e:for(;;)switch(Ve=null,fe.tag){case y:if(fe._3===e&&(Ve=k[fe._1],pe[ie++]=Ve.kill(tt,function(_t){return function(){ie--,ie===0&&me(_t)()}})),ae===null)break e;fe=ae._2,K===null?ae=null:(ae=K._1,K=K._2);break;case s:fe=fe._2;break;case f:case p:ae&&(K=new D(d,ae,K)),ae=fe,fe=fe._1;break}if(ie===0)me(N.right(void 0))();else for(rt=0,Ve=ie;rt<Ve;rt++)pe[rt]=pe[rt]();return pe}function Fe(tt,le,me){var fe,ae,K,ie,pe,Ve;for(N.isLeft(tt)?(fe=tt,ae=null):(ae=tt,fe=null);;){if(K=null,ie=null,pe=null,Ve=null,Ae!==null)return;if(le===null){W(fe||ae)();return}if(le._3!==e)return;switch(le.tag){case s:fe===null?(le._3=N.right(le._1(N.fromRight(ae))),ae=le._3):le._3=fe;break;case f:if(K=le._1._3,ie=le._2._3,fe){if(le._3=fe,pe=!0,Ve=te++,J[Ve]=ce(ye,fe===K?le._2:le._1,function(){return function(){delete J[Ve],pe?pe=!1:me===null?Fe(fe,null,null):Fe(fe,me._1,me._2)}}),pe){pe=!1;return}}else{if(K===e||ie===e)return;ae=N.right(N.fromRight(K)(N.fromRight(ie))),le._3=ae}break;case p:if(K=le._1._3,ie=le._2._3,K===e&&N.isLeft(ie)||ie===e&&N.isLeft(K))return;if(K!==e&&N.isLeft(K)&&ie!==e&&N.isLeft(ie))fe=ae===K?ie:K,ae=null,le._3=fe;else if(le._3=ae,pe=!0,Ve=te++,J[Ve]=ce(ye,ae===K?le._2:le._1,function(){return function(){delete J[Ve],pe?pe=!1:me===null?Fe(ae,null,null):Fe(ae,me._1,me._2)}}),pe){pe=!1;return}break}me===null?le=null:(le=me._1,me=me._2)}}function It(tt){return function(le){return function(){delete k[tt._1],tt._3=le,Fe(le,tt._2._1,tt._2._2)}}}function nn(){var tt=L,le=O,me=null,fe=null,ae,K;e:for(;;)switch(ae=null,K=null,tt){case L:switch(le.tag){case s:me&&(fe=new D(d,me,fe)),me=new D(s,le._1,e,e),le=le._2;break;case f:me&&(fe=new D(d,me,fe)),me=new D(f,e,le._2,e),le=le._1;break;case p:me&&(fe=new D(d,me,fe)),me=new D(p,e,le._2,e),le=le._1;break;default:K=U++,tt=$,ae=le,le=new D(y,K,new D(d,me,fe),e),ae=P(N,Q,ae),ae.onComplete({rethrow:!1,handler:It(le)})(),k[K]=ae,Q&&Q.register(ae)}break;case $:if(me===null)break e;me._1===e?(me._1=le,tt=L,le=me._2,me._2=e):(me._2=le,le=me,fe===null?me=null:(me=fe._1,fe=fe._2))}for(we=le,K=0;K<U;K++)k[K].run()}function Gt(tt,le){Ae=N.left(tt);var me;for(var fe in J)if(J.hasOwnProperty(fe)){me=J[fe];for(fe in me)me.hasOwnProperty(fe)&&me[fe]()}J=null;var ae=ce(tt,we,le);return function(K){return new D(o,function(ie){return function(){for(var pe in ae)ae.hasOwnProperty(pe)&&ae[pe]();return w}})}}return nn(),function(tt){return new D(o,function(le){return function(){return Gt(tt,le)}})}}function z(N,Q,O){return new D(o,function(W){return function(){return q(N,Q,O,W)}})}return D.EMPTY=e,D.Pure=g(t),D.Throw=g(n),D.Catch=g(a),D.Sync=g(h),D.Async=g(o),D.Bind=g(r),D.Bracket=g(l),D.Fork=g(u),D.Seq=g(i),D.ParMap=g(s),D.ParApply=g(f),D.ParAlt=g(p),D.Fiber=P,D.Supervisor=S,D.Scheduler=M,D.nonCanceler=w,D}(),wA=pr.Pure,SA=pr.Throw;function EA(e){return function(t){return pr.Catch(e,t)}}function TA(e){return function(t){return t.tag===pr.Pure.tag?pr.Pure(e(t._1)):pr.Bind(t,function(n){return pr.Pure(e(n))})}}function MA(e){return function(t){return pr.Bind(e,t)}}function MD(e){return function(t){return pr.Fork(e,t)}}var FA=pr.Sync;function xA(e){return function(t){return pr.ParMap(e,t)}}function LA(e){return function(t){return pr.ParApply(e,t)}}var wa=pr.Async;function H_(e){return function(t){return function(n){return pr.Bracket(e,t,n)}}}function AA(e,t){return function(){return pr.Fiber(e,null,t)}}var IA=function(){function e(n,a){return n===0&&typeof setImmediate<"u"?setImmediate(a):setTimeout(a,n)}function t(n,a){return n===0&&typeof clearImmediate<"u"?clearImmediate(a):clearTimeout(a)}return function(n,a){return pr.Async(function(h){return function(){var o=e(a,h(n()));return function(){return pr.Sync(function(){return n(t(a,o))})}}})}}(),RA=pr.Seq;var w6=G(wu);var FD=function(e){return e};var xD=function(e){return e};var O_=function(e){return function(t){return e(t)}},P_=function(e){var t=G(e);return{map:function(n){return O_(t(w6(n)))}}};var HA=function(e){return{Applicative0:function(){return Ud(e)},Bind1:function(){return k_(e)}}},k_=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return{bind:function(a){return function(h){return t(a)(wn(function(o){return n(We.create(o))})(function(o){var r=h(o);return r}))}},Apply0:function(){return LD(e)}}},LD=function(e){var t=P_(e.Bind1().Apply0().Functor0());return{apply:yr(HA(e)),Functor0:function(){return t}}},Ud=function(e){return{pure:function(){var t=X(e.Applicative0());return function(n){return FD(t(Oe.create(n)))}}(),Apply0:function(){return LD(e)}}};var OA=function(e){var t=HA(e);return{throwError:function(){var n=X(e.Applicative0());return function(a){return FD(n(We.create(a)))}}(),Monad0:function(){return t}}};var PA=function(e){var t=De(e);return function(n){var a=n.Bind1(),h=Z(a),o=X(n.Applicative0()),r=P_(a.Apply0().Functor0());return{alt:function(l){return function(u){return h(l)(function(i){if(i instanceof Oe)return o(new Oe(i.value0));if(i instanceof We)return h(u)(function(s){if(s instanceof Oe)return o(new Oe(s.value0));if(s instanceof We)return o(new We(t(i.value0)(s.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[s.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[i.constructor.name])})}},Functor0:function(){return r}}}};var S6=G(mt);var AD=function(e){return e},kA=function(e){return e};var N_={lift:function(e){var t=By(e)(B.create);return function(n){return AD(t(n))}}},E6=bt(N_);var T6=function(e){var t=G(e);return{map:function(n){return function(a){return t(S6(n))(a)}}}},ID=function(e){return{Applicative0:function(){return HD(e)},Bind1:function(){return RD(e)}}},RD=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return{bind:function(a){return function(h){return t(a)(function(o){if(o instanceof V)return n(V.value);if(o instanceof B){var r=h(o.value0);return r}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[o.constructor.name])})}},Apply0:function(){return $D(e)}}},$D=function(e){var t=T6(e.Bind1().Apply0().Functor0());return{apply:yr(ID(e)),Functor0:function(){return t}}},HD=function(e){return{pure:function(){var t=X(e.Applicative0());return function(n){return AD(t(B.create(n)))}}(),Apply0:function(){return $D(e)}}};var NA=function(e){var t=mn(e),n=e.Monad0(),a=Z(n.Bind1()),h=X(n.Applicative0()),o=ID(n);return{tailRecM:function(r){var l=t(function(u){var i=r(u);return a(i)(function(s){return h(function(){if(s instanceof V)return new Bt(V.value);if(s instanceof B&&s.value0 instanceof Pt)return new Pt(s.value0.value0);if(s instanceof B&&s.value0 instanceof Bt)return new Bt(new B(s.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[s.constructor.name])}())})});return function(u){return AD(l(u))}},Monad0:function(){return o}}},BA=function(e){var t=e.Monad0(),n=E6(t),a=uo(e),h=ID(t);return{state:function(o){return n(a(o))},Monad0:function(){return h}}};var qA=function(e){return e};var Sa=function(e){return e};var Wl={lift:function(e){return function(t){return qA(ve(t))}}},F6=bt(Wl),VA=function(e){return function(t){return function(n){return e(t(n))}}},x6=function(e){return{map:function(){var t=G(e);return function(n){return VA(t(n))}}()}};var PD=function(e){var t=pt(e),n=x6(e.Functor0());return{apply:function(a){return function(h){return function(o){return t(a(o))(h(o))}}},Functor0:function(){return n}}},Wi=function(e){var t=Z(e),n=PD(e.Apply0());return{bind:function(a){return function(h){return function(o){return t(a(o))(function(r){var l=h(r);return l(o)})}}},Apply0:function(){return n}}};var qd=function(e){var t=PD(e.Apply0());return{pure:function(){var n=X(e);return function(a){return qA(ve(n(a)))}}(),Apply0:function(){return t}}},W_=function(e){var t=qd(e.Applicative0()),n=Wi(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},Xu=function(e){var t=W_(e);return{ask:X(e.Applicative0()),Monad0:function(){return t}}};var Za=function(e){var t=e.Monad0(),n=W_(t);return{liftEffect:function(){var a=F6(t),h=Le(e);return function(o){return a(h(o))}}(),Monad0:function(){return n}}},Yu=function(e){var t=e.Monad0(),n=bn(t.Bind1()),a=X(t.Applicative0()),h=mn(e),o=W_(t);return{tailRecM:function(r){return function(l){var u=function(i){return function(s){var f=r(s);return n(a)(f(i))}};return function(i){return h(u(i))(l)}}},Monad0:function(){return o}}};var cc=function(e){return e.sequential},qi=function(e){return e.parallel};var I6=he(_e),R6=function(e){var t=cc(e),n=qi(e);return function(a){var h=it(a);return function(o){var r=h(o);return function(l){var u=r(function(i){return n(l(i))});return function(i){return t(u(i))}}}}};var Ul=function(e){var t=R6(e);return function(n){var a=t(n);return function(h){return a(h)(I6)}}};var lc=function(e){return e()};var jA=function(e){return e()};var KA=function(e){throw new Error(e)};var QA=function(){return KA};var k6=QA(),N6=jA,V_=function(e){return N6(function(){return k6(e)})};var B6=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}},W6=X(Yt),ND=ut(Pe),YA=G(Pe);var U6=function(e){return e},ZA=MD(!1);var q6={map:xA},xr={map:TA},V6=G(xr),BD=MD(!0),z6=function(){var e=function(a){if(a instanceof Oe)return a.value0;if(a instanceof We)return V_("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[a.constructor.name])},t=function(a){if(a instanceof We)return a.value0;if(a instanceof Oe)return V_("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[a.constructor.name])},n=function(a){if(a instanceof We)return!0;if(a instanceof Oe)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[a.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:We.create,right:Oe.create}}(),eI=function(e){return AA(z6,e)},tI=function(e){return function(){var n=eI(e)();return n.run(),n}},WD=function(e){return ND(tI(e))};var UD=function(e){return IA(Oe.create,e)},nI=function(e){return function(t){return H_(e)({killed:ve(t),failed:ve(t),completed:ve(t)})}},rI={apply:LA,Functor0:function(){return q6}};var ei={Applicative0:function(){return Wr},Bind1:function(){return jt}},jt={bind:MA,Apply0:function(){return qD(0)}},Wr={pure:wA,Apply0:function(){return qD(0)}},qD=B6("applyAff","Effect.Aff",function(){return{apply:yr(ei),Functor0:function(){return xr}}}),G6=qD(73),ql=X(Wr),oI=Z(jt);var J6=bn(jt);var Vd=function(e){return function(t){return nI(ql(void 0))(ve(e))(ve(t))}},VD=function(e){return nI(e)(ve(ql(void 0)))(ql)};var Zu={parallel:ne,sequential:RA,Apply0:function(){return G6},Apply1:function(){return rI}},j6=qi(Zu),fc={pure:function(e){return j6(ql(e))},Apply0:function(){return rI}};var K6=Ul(Zu)(fc)(gt);var Q6={append:function(e){return function(t){return function(n){return K6([e(n),t(n)])}}}};var Dn={liftEffect:FA,Monad0:function(){return ei}},z_=Le(Dn),dc=function(e){return U6(ve(z_(e)))},zd=function(e){return wa(function(t){return YA(dc)(e.join(t))})},aI={map:function(e){return function(t){return lc(eI(V6(e)(zd(t))))}}};var Gd=function(e){return function(t){return oI(z_(t.isSuspended))(function(n){return n?z_(ND(t.kill(e,ve(W6(void 0))))):wa(function(a){return YA(dc)(t.kill(e,a))})})}};var Vl={throwError:SA,Monad0:function(){return ei}},iI={catchError:EA,MonadThrow0:function(){return Vl}},uI=$d(iI);var sI=uI,X6=function(e){return function(t){return tI(J6(function(n){return z_(e(n))})(uI(t)))}},Jd=function(e){return function(t){return ND(X6(e)(t))}};var es={tailRecM:function(e){var t=function(n){return oI(e(n))(function(a){if(a instanceof Bt)return ql(a.value0);if(a instanceof Pt)return t(a.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[a.constructor.name])})};return t},Monad0:function(){return ei}};var zD=ve(ql(void 0)),cI={mempty:zD,Semigroup0:function(){return Q6}};var nq=function(e){var t=G(e);return{map:function(n){return function(a){return function(h){return t(function(o){return new ee(n(o.value0),o.value1)})(a(h))}}}}};var JD=function(e){return{Applicative0:function(){return jd(e)},Bind1:function(){return jD(e)}}},jD=function(e){var t=Z(e.Bind1());return{bind:function(n){return function(a){return function(h){return t(n(h))(function(o){var r=a(o.value0);return r(o.value1)})}}},Apply0:function(){return fI(e)}}},fI=function(e){var t=nq(e.Bind1().Apply0().Functor0());return{apply:yr(JD(e)),Functor0:function(){return t}}},jd=function(e){var t=X(e.Applicative0());return{pure:function(n){return function(a){return t(new ee(n,a))}},Apply0:function(){return fI(e)}}};var dI=function(e){var t=e.Monad0(),n=Z(t.Bind1()),a=X(t.Applicative0()),h=mn(e),o=JD(t);return{tailRecM:function(r){return function(l){var u=function(i){var s=r(i.value0);return n(s(i.value1))(function(f){return a(function(){if(f.value0 instanceof Pt)return new Pt(new ee(f.value0.value0,f.value1));if(f.value0 instanceof Bt)return new Bt(new ee(f.value0.value0,f.value1));throw new Error("Failed pattern match at Control.Monad.State.Trans (line 87, column 16 - line 89, column 40): "+[f.value0.constructor.name])}())})};return function(i){return h(u)(new ee(l,i))}}},Monad0:function(){return o}}},G_=function(e){var t=X(e.Applicative0()),n=JD(e);return{state:function(a){return function(h){return t(a(h))}},Monad0:function(){return n}}};var rq=bt(Wl);var pc={liftAff:he(_e),MonadEffect0:function(){return Dn}},Cn=function(e){return e.liftAff};var j_=function(e){var t=e.MonadEffect0(),n=Za(t);return{liftAff:function(){var a=rq(t.Monad0()),h=Cn(e);return function(o){return a(h(o))}}(),MonadEffect0:function(){return n}}};var ti=function(e){return function(){console.log(e)}},Kd=function(e){return function(){console.warn(e)}};var gI=function(e){var t=Le(e);return function(n){return t(ti(n))}};var yI=function(){function e(){}return e.value=new e,e}(),zl=function(){function e(){}return e.value=new e,e}(),DI=function(){function e(){}return e.value=new e,e}(),CI=function(){function e(){}return e.value=new e,e}(),bI=function(){function e(){}return e.value=new e,e}(),wI=function(){function e(){}return e.value=new e,e}(),SI=function(){function e(){}return e.value=new e,e}(),EI=function(){function e(){}return e.value=new e,e}(),TI=function(){function e(){}return e.value=new e,e}(),MI=function(){function e(){}return e.value=new e,e}(),FI=function(){function e(){}return e.value=new e,e}(),xI=function(){function e(){}return e.value=new e,e}(),LI=function(){function e(){}return e.value=new e,e}(),AI=function(){function e(){}return e.value=new e,e}(),II=function(){function e(){}return e.value=new e,e}(),RI=function(){function e(){}return e.value=new e,e}(),$I=function(){function e(){}return e.value=new e,e}(),HI=function(){function e(){}return e.value=new e,e}(),OI=function(){function e(){}return e.value=new e,e}(),PI=function(){function e(){}return e.value=new e,e}(),kI=function(){function e(){}return e.value=new e,e}(),NI=function(){function e(){}return e.value=new e,e}(),BI=function(e){if(e instanceof yI)return"button";if(e instanceof zl)return"checkbox";if(e instanceof DI)return"color";if(e instanceof CI)return"date";if(e instanceof bI)return"datetime-local";if(e instanceof wI)return"email";if(e instanceof SI)return"file";if(e instanceof EI)return"hidden";if(e instanceof TI)return"image";if(e instanceof MI)return"month";if(e instanceof FI)return"number";if(e instanceof xI)return"password";if(e instanceof LI)return"radio";if(e instanceof AI)return"range";if(e instanceof II)return"reset";if(e instanceof RI)return"search";if(e instanceof $I)return"submit";if(e instanceof HI)return"tel";if(e instanceof OI)return"text";if(e instanceof PI)return"time";if(e instanceof kI)return"url";if(e instanceof NI)return"week";throw new Error("Failed pattern match at DOM.HTML.Indexed.InputType (line 33, column 19 - line 55, column 22): "+[e.constructor.name])};var gq=G(mt);var KD=function(e){if(e instanceof Ye)return V.value;if(e instanceof Xe)return new B({head:e.value0,tail:e.value1});throw new Error("Failed pattern match at Data.List (line 259, column 1 - line 259, column 66): "+[e.constructor.name])},K_=function(e){return ha(e)(function(t){return gq(function(n){return new ee(n.head,n.tail)})(KD(t))})};var Vi=function(){var e=function(t){return function(n){var a=t,h=!1,o;function r(l,u){if(u instanceof Ye)return h=!0,l;if(u instanceof Xe){a=new Xe(u.value0,l),n=u.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[l.constructor.name,u.constructor.name])}for(;!h;)o=r(a,n);return o}};return e(Ye.value)}();var UI=function(e){return e instanceof Ye};var Eq=Nn(Wn),Tq=_n(Wn),Mq=gn(Wn);var Fq=function(e){return e};var QD=function(e){return bA(e)};var VI=Fq,zI={foldMap:function(e){var t=Eq(e);return function(n){var a=t(n);return function(h){return a(QD(h))}}},foldl:function(e){return function(t){var n=Tq(e)(t);return function(a){return n(QD(a))}}},foldr:function(e){return function(t){var n=Mq(e)(t);return function(a){return n(QD(a))}}}};var GI=function(){var e=ut(Nl);return function(t){return VI(e(t))}}();function JI(e){return function(t){return function(){return setInterval(t,e)}}}function jI(e){return function(){clearInterval(e)}}var KI=JI;var QI=jI;var Oq=ot(at),YI=G(mt),Pq=Ya(vt),X_=Z(jt),XD=Le(Dn),kq=Oq(jt),YD=X(Wr),Nq=G(xr),Bq=mn(es);var Wq=it(Wr)(Wn),Uq=or(Vl);var qq=function(e){return e},Vq=function(e){var t=function(){var h=Ke(e)();if(h instanceof V)return V.value;if(h instanceof B){var o=ju(h.value0.releasers);if(o instanceof V)return V.value;if(o instanceof B)return no(YI(function(r){return{nextKey:r.nextKey,references:r.references,releasers:Pq(o.value0.key)(r.releasers)}}))(e)(),new B(o.value0.value);throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 104, column 33 - line 108, column 32): "+[o.constructor.name])}throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 102, column 11 - line 108, column 32): "+[h.constructor.name])},n=function(a){return X_(XD(t))(function(h){if(h instanceof V)return kq(XD(Ut(V.value)(e)))(function(){return YD(new Bt(a))});if(h instanceof B)return X_(sI(h.value0))(function(o){return YD(new Pt(wn(function(r){return new Xe(r,a)})(ve(a))(o)))});throw new Error("Failed pattern match at Control.Monad.Resource.Internal.Registry (line 92, column 11 - line 98, column 68): "+[h.constructor.name])})};return Nq(Vi)(Bq(n)(Ye.value))};var ZI=function(){var e=new B({nextKey:0,references:1,releasers:dr});return G(Pe)(qq)(an(e))}(),eR=function(e){return VD(X_(XD(Jh(YI(function(t){return{nextKey:t.nextKey,releasers:t.releasers,references:t.references-1|0}}))(e)))(function(t){return t instanceof B&&t.value0.references===0?X_(Vq(e))(Wq(Uq)):YD(void 0)}))};var Gq=Z(jt),Jq=Le(Dn);var jq=function(e){return function(t){return Gq(Jq(ZI))(function(n){return Vd(eR(n))(e(t(n)))})}},Y_=jq(he(_e));var ZD=function(e){var t=G(e);return{map:function(n){return function(a){var h=t(n);return function(o){return h(a(o))}}}}},tR=function(e){var t=pt(e),n=ZD(e.Functor0());return{apply:function(a){return function(h){return function(o){return t(a(o))(h(o))}}},Functor0:function(){return n}}},Kq=function(e){var t=Z(e),n=tR(e.Apply0());return{bind:function(a){return function(h){return function(o){return t(a(o))(function(r){var l=h(r);return l(o)})}}},Apply0:function(){return n}}};var Qq=function(e){var t=X(e),n=tR(e.Apply0());return{pure:function(a){return function(h){return t(a)}},Apply0:function(){return n}}},Z_=function(e){var t=Qq(e.Applicative0()),n=Kq(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}};var Xq=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var rR=function(e){return function(t){return Ka(function(n){return e(n.value0)(n.value1)})(t)}};var oR=function(e){return function(t){return G0(new Xq(e,t))}},eC={map:function(e){return function(t){return Ka(function(n){return oR(function(a){return e(n.value0(a))})(n.value1)})(t)}}};var aR=oR(he(_e));var Zq=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}();var ev=function(e){return Zq.create(Re(e.Eq0()))(Ee(e))},e8={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},iR={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return e8}};var rC=pl(Vt)(iR);var n8=ED(rC),r8=ea(rC),o8=Br(rC);var tv=function(){return function(e){var t=Zn(e);return function(n){var a=ev(n);return function(h){return function(o){return function(r){return n8(new ee(t(h),a(o)))(r)}}}}}},nv=function(){return function(e){var t=Zn(e);return function(n){var a=ev(n);return function(h){return function(o){return function(r){return r8(new ee(t(h),a(o)))(r)}}}}}},rv=function(){return function(e){var t=Zn(e);return function(n){var a=ev(n);return function(h){return function(o){return function(r){return function(l){return o8(new ee(t(h),a(o)))(r)(l)}}}}}}},ov=function(e){var t=it(e)(Bi);return function(n){return function(a){return t(function(h){return a(h)})(n)}}},ns=dr;var av=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();function uR(e,t,n){return e==null?t:n(e)}function oC(e){return e}var Ea=Qe(null)(oC),un=function(e){return uR(e,V.value,B.create)};var Fn=function(){function e(t,n,a,h){this.value0=t,this.value1=n,this.value2=a,this.value3=h}return e.create=function(t){return function(n){return function(a){return function(h){return new e(t,n,a,h)}}}},e}(),Zd=ne,Co=function(e,t){return e.value2(e.value1,t)},xn=ne,bo=function(e){return e.value3(e.value1)},Lr=Zd(function(e){return e.value0});var sR=G(Dt),C8=G(xi);var rs=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zi=function(){function e(t,n,a,h){this.value0=t,this.value1=n,this.value2=a,this.value3=h}return e.create=function(t){return function(n){return function(a){return function(h){return new e(t,n,a,h)}}}},e}(),os=function(){function e(t,n,a,h){this.value0=t,this.value1=n,this.value2=a,this.value3=h}return e.create=function(t){return function(n){return function(a){return function(h){return new e(t,n,a,h)}}}},e}(),as=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),b8=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),cR=function(e){return function(t){return e(t)}};var w8=ne;var S8={bimap:function(e){return function(t){return cR(function(n){return w8(new b8(function(a){return e(n.value0(a))},function(a){return t(n.value1(a))},n.value2))})}}},E8=Io(S8);var _c=cR(function(e){var t=function(n){if(n instanceof rs)return new rs(n.value0);if(n instanceof zi)return new zi(n.value0,n.value1,e.value0(n.value2),sR(t)(n.value3));if(n instanceof os)return new os(n.value0,n.value1,e.value0(n.value2),sR(C8(t))(n.value3));if(n instanceof as)return new as(e.value1(n.value0));if(n instanceof Gi)return new Gi(E8(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function vc(e,t){return t[e]}function iC(e,t){return t.hasOwnProperty(e)}function Ji(e,t,n){n[e]=t}function uC(e,t){for(var n=[],a=0;a<e.length;a++)n.push(t(a,e[a]));return n}function sC(e,t){for(var n=0;n<e.length;n++)t(e[n])}function cC(e,t){for(var n=Object.keys(e),a=0;a<n.length;a++){var h=n[a];t(h,e[h])}}function lC(e,t,n,a,h){for(var o=[],r=e.length,l=t.length,u=0;;){if(u<r)u<l?o.push(n(u,e[u],t[u])):a(u,e[u]);else if(u<l)o.push(h(u,t[u]));else break;u++}return o}function ep(e,t,n){for(var a={},h=0;h<e.length;h++){var o=e[h],r=t(o);a[r]=n(r,h,o)}return a}function tp(e,t,n,a,h,o){for(var r={},l=0;l<t.length;l++){var u=t[l],i=n(u);e.hasOwnProperty(i)?r[i]=a(i,l,e[i],u):r[i]=o(i,l,u)}for(var i in e)i in r||h(i,e[i]);return r}function mc(e,t){return e===t}function fC(e,t){return t.createTextNode(e)}function dC(e,t){t.textContent=e}function uv(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function is(e,t,n){var a=n.childNodes.item(e)||null;a!==t&&n.insertBefore(t,a)}function np(e,t){t&&e.parentNode===t&&t.removeChild(e)}function rp(e){return e.parentNode}function sv(e,t,n,a){e!=null?a.setAttributeNS(e,t,n):a.setAttribute(t,n)}function cv(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function pC(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function hC(e,t,n){n.addEventListener(e,t,!1)}function _C(e,t,n){n.removeEventListener(e,t,!1)}var vC=void 0;var op=function(){return{}};function mC(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var gC=vc,yC=ne,DC=Ji,CC=op;var lv=function(e){return function(t){return t[e]}},L8=lv("namespaceURI"),A8=lv("prefix"),I8=lv("localName"),R8=lv("tagName");function Jl(e){return function(){return e.scrollTop}}function ap(e){return function(t){return function(){t.scrollTop=e}}}function wC(e){return function(){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}}var fv=function(e){return function(t){return function(){return t[e]}}},H8=fv("children"),O8=fv("firstElementChild"),P8=fv("lastElementChild"),k8=fv("childElementCount");function fR(e){return function(t){return function(){return t.querySelector(e)}}}var B8=G(Pe);var dR=function(e){var t=B8(un),n=fR(e);return function(a){return t(n(a))}};var SC=ne;var ip=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}};var TC=function(e){return bo(e.widget)},MC=ip("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Gi)return MC(291)(e,_c(t.value0));if(t instanceof as){var n=Co(e.widget,t.value0),a=Zd(function(h){return xn(new Fn(h.value0,{build:e.build,widget:n},MC(296),TC))})(n);return a}return TC(e),e.build(t)}}),z8=MC(286),dv=function(e){var t=rp(e.node);return np(e.node,t)},pv=ip("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Gi)return pv(82)(e,_c(t.value0));if(t instanceof rs){if(e.value===t.value0)return xn(new Fn(e.node,e,pv(85),dv));if(dn){var n={build:e.build,node:e.node,value:t.value0};return dC(t.value0,e.node),xn(new Fn(e.node,n,pv(89),dv))}}return dv(e),e.build(t)}}),G8=pv(77),hv=function(e){var t=rp(e.node);return np(e.node,t),cC(e.children,function(n,a){return bo(a)}),bo(e.attrs)},_v=function(e){var t=rp(e.node);return np(e.node,t),sC(e.children,bo),bo(e.attrs)},pR=function(e,t,n,a){var h=t===a;return h?e instanceof B&&n instanceof B&&e.value0===n.value0||e instanceof V&&n instanceof V:!1},vv=ip("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Gi)return vv(135)(e,_c(t.value0));if(t instanceof zi&&pR(e.ns,e.name,t.value0,t.value1)){var n=gr(t.value3),a=gr(e.children);if(a===0&&n===0){var u=Co(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:e.children};return xn(new Fn(e.node,i,vv(149),_v))}var h=function(s,f){return bo(f)},o=function(s,f,p){var d=Co(f,p);return is(s,Lr(d),e.node),d},r=function(s,f){var p=e.build(f);return is(s,Lr(p),e.node),p},l=lC(e.children,t.value3,o,h,r),u=Co(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:l};return xn(new Fn(e.node,i,vv(172),_v))}return _v(e),e.build(t)}}),J8=vv(130),mv=ip("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Gi)return mv(222)(e,_c(t.value0));if(t instanceof os&&pR(e.ns,e.name,t.value0,t.value1)){var n=gr(t.value3);if(e.length===0&&n===0){var l=Co(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:e.children,length:0};return xn(new Fn(e.node,u,mv(237),hv))}var a=function(i,s){return bo(s)},h=function(i,s,f,p){var d=Co(f,p.value1);return is(s,Lr(d),e.node),d},o=function(i,s,f){var p=e.build(f.value1);return is(s,Lr(p),e.node),p},r=tp(e.children,t.value3,tr,h,a,o),l=Co(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:l,ns:t.value0,name:t.value1,children:r,length:n};return xn(new Fn(e.node,u,mv(261),hv))}return hv(e),e.build(t)}}),j8=mv(217),K8=function(e,t,n){var a=e.buildWidget(e)(n),h=Zd(function(o){return xn(new Fn(o.value0,{build:t,widget:a},z8,TC))})(a);return h},Q8=function(e,t,n){var a=fC(n,e.document),h={build:t,node:a,value:n};return xn(new Fn(a,h,G8,dv))},X8=function(e,t,n,a,h,o){var r=uv(Ea(n),a,e.document),l=SC(r),u=function(p,d,c){var _=t(c.value1);return is(d,Lr(_),l),_},i=ep(o,tr,u),s=e.buildAttributes(r)(h),f={build:t,node:l,attrs:s,ns:n,name:a,children:i,length:gr(o)};return xn(new Fn(l,f,j8,hv))},Y8=function(e,t,n,a,h,o){var r=uv(Ea(n),a,e.document),l=SC(r),u=function(p,d){var c=t(d);return is(p,Lr(c),l),c},i=uC(o,u),s=e.buildAttributes(r)(h),f={build:t,node:l,attrs:s,ns:n,name:a,children:i};return xn(new Fn(l,f,J8,_v))},up=function(e){var t=ip("build","Halogen.VDom.DOM",function(){return function(a){if(a instanceof rs)return Q8(e,t(59),a.value0);if(a instanceof zi)return Y8(e,t(60),a.value0,a.value1,a.value2,a.value3);if(a instanceof os)return X8(e,t(61),a.value0,a.value1,a.value2,a.value3);if(a instanceof as)return K8(e,t(62),a.value0);if(a instanceof Gi)return t(63)(_c(a.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[a.constructor.name])}}),n=t(58);return n};function gv(e){return typeof e}function yv(e){return Object.prototype.toString.call(e).slice(8,-1)}function sp(e){return e===void 0}var _R=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var Dv=function(){var e=I0(gA);return function(t){return vD(e(t))}}();var vR=function(e){return function(t){return new oo(e,new Xe(t.value0,t.value1))}};var LC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var gc=ne,bv=ne;var AC=function(e){var t=or(OA(e));return function(n){return t(Dv(n))}};var IC=function(e){var t=X(Ud(e)),n=AC(e);return function(a){return function(h){if(yv(h)===a)return t(bv(h));if(dn)return n(new LC(a,yv(h)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[a.constructor.name,h.constructor.name])}}};var wv=function(e){return IC(e)("String")};function RC(e){return e()}function gR(e){return function(t){return function(n){return function(a){var h=n;function o(l){return function(u){return t(u)(l)(a[l])}}for(var r in a)hasOwnProperty.call(a,r)&&(h=e(h)(o(r)));return h}}}}function yR(e,t,n,a){return n in a?t(a[n]):e}function $C(e){return function(t){var n=[];for(var a in t)hasOwnProperty.call(t,a)&&n.push(e(a)(t[a]));return n}}var n7=Object.keys||$C(function(e){return function(){return e}});var a7=ut(ks);var Sv=function(){return Eu(yR)(V.value)(B.create)}();var cp=function(e){var t=Ai(e);return function(n){return RC(function(){var h=op();return ad(t(n))(function(o){return a7(mC(o.value0)(o.value1)(h))})(),h})}};var i7=gR(RM),DR=function(e){var t=De(e.Semigroup0()),n=st(e);return function(a){return i7(function(h){return function(o){return function(r){return t(h)(a(o)(r))}}})(n)}};function lp(e){return function(){return function(t){return e(t)()}}}function OC(e){return function(t){return function(n){return function(a){return function(){return a.addEventListener(e,t,n)}}}}}function PC(e){return function(t){return function(n){return function(a){return function(){return a.removeEventListener(e,t,n)}}}}}var u7=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}};var NC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),BC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ji=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),ss=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cs=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),s7=vc,kC=Ji,c7=function(e,t){var n=pC(null,e,t);if(n)return cv(null,e,t);var a=gv(vc(e,t));return a==="string"?Ji(e,"",t):e==="rowSpan"?Ji(e,1,t):e==="colSpan"?Ji(e,1,t):Ji(e,vC,t)},bR=function(e){if(e instanceof ji&&e.value0 instanceof B)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof ji)return"attr/:"+e.value1;if(e instanceof ss)return"prop/"+e.value0;if(e instanceof cs)return"handler/"+e.value0;if(e instanceof yc)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},Ev=ne;var wR=ne;var SR=function(e){return function(t){var n=function(s){return function(f,p){if(p instanceof ji)return cv(Ea(p.value0),p.value1,t);if(p instanceof ss)return c7(p.value0,t);if(p instanceof cs){var d=gC(p.value0,s);return _C(p.value0,tr(d),t)}if(p instanceof yc)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[p.constructor.name])}},a=function(s){return s instanceof B?e(s.value0)():void 0},h=function(s){var f=Sv("ref")(s.props);return f instanceof B&&f.value0 instanceof yc?a(f.value0.value0(new BC(t))):void 0},o=function(s,f){return function(p,d,c,_){if(c instanceof ji&&_ instanceof ji){var v=c.value2===_.value2;return v||sv(Ea(_.value0),_.value1,_.value2,t),_}if(c instanceof ss&&_ instanceof ss){var m=mc(c.value1,_.value1);if(m)return _;if(_.value0==="value"){var y=s7("value",t),C=mc(y,_.value1);return C||kC(_.value0,_.value1,t),_}return kC(_.value0,_.value1,t),_}if(c instanceof cs&&_ instanceof cs){var T=gC(_.value0,s);return Ut(_.value1)(hn(T))(),DC(_.value0,T,f),_}return _}},r=function(s){return function(f,p,d){if(d instanceof ji)return sv(Ea(d.value0),d.value1,d.value2,t),d;if(d instanceof ss)return kC(d.value0,d.value1,t),d;if(d instanceof cs){var c=vc(d.value0,s);if(iC(d.value0,s))return Ut(d.value1)(hn(c))(),d;var _=an(d.value1)(),v=lp(function(m){return function(){var C=Ke(_)();return a(C(m))}})();return DC(d.value0,new ee(v,_),s),hC(d.value0,v,t),d}if(d instanceof yc)return a(d.value0(new NC(t))),d;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[d.constructor.name])}},l=u7("patchProp","Halogen.VDom.DOM.Prop",function(){return function(s,f){var p=CC(),d=n(s.events),c=o(s.events,p),_=r(p),v=tp(s.props,f,bR,c,d,_),m={events:yC(p),props:v};return xn(new Fn(void 0,m,l(100),h))}}),u=l(87),i=function(s){var f=CC(),p=ep(s,bR,r(f)),d={events:yC(f),props:p};return xn(new Fn(void 0,d,u,h))};return i}};var UC=function(e){return e},qC=function(e){return UC(as.create(e))},d7=function(e){return e.toPropValue},Ar=function(e){return UC(rs.create(e))},FR=function(e){return new yc(function(t){return e(function(n){if(n instanceof NC)return new B(n.value0);if(n instanceof BC)return V.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},xR=function(e){var t=d7(e);return function(n){var a=ss.create(n);return function(h){return a(t(h))}}};var Tv={toPropValue:Ev};var VC={toPropValue:function(){var e=In();return function(t){return Ev(e(t))}}()};var LR={toPropValue:wR},AR={toPropValue:function(e){return Ev(BI(e))}};var zC=function(){return cs.create}(),IR=function(e){return function(t){return function(n){return function(a){return new zi(e,t,n,a)}}}};var RR=function(e){return function(t){return ji.create(e)(t)}};var h7=he(_e);var Mv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HR=function(e){return function(t){return new JC(e,t)}},OR=function(){return GC.create}(),PR=function(e){var t=X(e);return function(n){return function(a){return function(h){return function(o){return function(r){if(o instanceof Mv)return new ee(new Xe({func:t(o.value0),count:r},n),a);if(o instanceof GC)return new ee(new Xe({func:h(o.value0),count:r},n),a);if(o instanceof JC)return PR(e)(n)(vR(o.value1)(a))(h)(o.value0)(r+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[o.constructor.name])}}}}}},kR=function(e){var t=pt(e.Apply0());return function(n){return function(a){return function(h){if(n instanceof Ye)return new We(h);if(n instanceof Xe){var o=t(n.value0.func)(h),r=n.value0.count===1;if(r)return n.value1 instanceof Ye?new We(o):kR(e)(n.value1)(a)(o);if(a instanceof Ye)return new We(o);if(a instanceof Xe)return new Oe(new ee(new Xe({func:o,count:n.value0.count-1|0},n.value1),new oo(a.value0,a.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[a.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},NR={map:function(e){return function(t){return HR(new Mv(e))(t)}}},BR=function(e){var t=kR(e),n=X(e),a=PR(e);return function(h){return function(o){var r=function(l){var u=!1,i;function s(f){if(f.value1.value0 instanceof Mv){var p=t(f.value0)(f.value1.value1)(n(f.value1.value0.value0));if(p instanceof We)return u=!0,p.value0;if(p instanceof Oe){l=p.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[p.constructor.name])}if(f.value1.value0 instanceof GC){var p=t(f.value0)(f.value1.value1)(h(f.value1.value0.value0));if(p instanceof We)return u=!0,p.value0;if(p instanceof Oe){l=p.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[p.constructor.name])}if(f.value1.value0 instanceof JC){var d=new oo(f.value1.value0.value1,f.value1.value1);l=a(f.value0)(d)(h)(f.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[f.value1.value0.constructor.name])}for(;!u;)i=s(l);return i};return r(new ee(Ye.value,Dv(o)))}}},WR=function(e){return BR(e)(h7)},UR={apply:function(e){return function(t){return HR(e)(t)}},Functor0:function(){return NR}},qR=function(){return{pure:Mv.create,Apply0:function(){return UR}}}(),_7=BR(qR),jC=function(e){return _7(function(t){return OR(e(t))})};var Fv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var zR=function(e){var t=!1,n;function a(h){if(h.value0 instanceof Ye&&h.value1 instanceof Ye)return t=!0,V.value;if(h.value0 instanceof Ye){e=new Fv(Vi(h.value1),Ye.value);return}if(h.value0 instanceof Xe)return t=!0,new B(new ee(h.value0.value0,new Fv(h.value0.value1,h.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[h.constructor.name])}for(;!t;)n=a(e);return n},GR=function(e){return function(t){return new Fv(e.value0,new Xe(t,e.value1))}};var JR=function(e){return e.value0 instanceof Ye&&e.value1 instanceof Ye};var jR=function(){return new Fv(Ye.value,Ye.value)}();var jl=function(){function e(){}return e.value=new e,e}(),xv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var KR=function(e){return function(t){if(e instanceof jl)return t;if(t instanceof jl)return e;if(e instanceof xv)return new xv(e.value0,GR(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},m7=function(e){return function(t){return function(n){var a=function(o){return function(r){return function(l){var u=o,i=r,s=!1,f;function p(d,c,_){if(_ instanceof Ye)return s=!0,c;if(_ instanceof Xe){u=d,i=d(c)(_.value0),l=_.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[d.constructor.name,c.constructor.name,_.constructor.name])}for(;!s;)f=p(u,i,l);return f}}},h=function(o){return function(r){var l=o,u=!1,i;function s(f,p){var d=zR(f);if(d instanceof V)return u=!0,a(function(c){return function(_){return _(c)}})(t)(p);if(d instanceof B){l=d.value0.value1,r=new Xe(e(d.value0.value0),p);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[d.constructor.name])}for(;!u;)i=s(l,r);return i}};return h(n)(Ye.value)}}},QR=function(e){if(e instanceof jl)return V.value;if(e instanceof xv)return new B(new ee(e.value0,function(){var t=JR(e.value1);return t?jl.value:m7(KR)(jl.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var XR=function(){return jl.value}(),YR=KR;var ZR={append:YR};var e$=function(e){return function(t){return YR(e)(new xv(t,jR))}};var y7=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}},D7=De(ZR);var KC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),t$=function(e){var t=!1,n;function a(h){var o=function(u){return u},r=function(u){return function(i){return new KC(u.value0,D7(u.value1)(i))}};if(h.value0 instanceof fp){var l=QR(h.value1);if(l instanceof V)return t=!0,new fp(h.value0.value0);if(l instanceof B){e=r(o(l.value0.value0)(h.value0.value0))(l.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[l.constructor.name])}if(h.value0 instanceof dp)return t=!0,new dp(h.value0.value0,function(u){return r(h.value0.value1(u))(h.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[h.value0.constructor.name])}for(;!t;)n=a(e);return n},na=function(e){var t=G(e);return function(n){var a=n.Monad0(),h=G(a.Bind1().Apply0().Functor0()),o=X(a.Applicative0()),r=mn(n);return function(l){var u=function(i){var s=t$(i);if(s instanceof fp)return h(Bt.create)(o(s.value0));if(s instanceof dp)return h(Pt.create)(l(t(s.value1)(s.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[s.constructor.name])};return r(u)}}};var n$=function(e){return new KC(e,XR)};var Kl={Applicative0:function(){return hr},Bind1:function(){return ir}},Ki={map:function(e){return function(t){return bn(ir)(function(){var n=X(hr);return function(a){return n(e(a))}}())(t)}}},ir={bind:function(e){return function(t){return new KC(e.value0,e$(e.value1)(t))}},Apply0:function(){return QC(0)}},hr={pure:function(e){return n$(fp.create(e))},Apply0:function(){return QC(0)}},QC=y7("freeApply","Control.Monad.Free",function(){return{apply:yr(Kl),Functor0:function(){return Ki}}}),pp=QC(77);var C7=X(hr);var ft=function(e){return n$(new dp(e,function(t){return C7(t)}))};var r$=function(e){var t=e.Monad0(),n=G(t.Bind1().Apply0().Functor0()),a=X(t.Applicative0()),h=mn(e);return function(o){var r=function(l){var u=t$(l);if(u instanceof fp)return n(Bt.create)(a(u.value0));if(u instanceof dp)return n(function(i){return Pt.create(u.value1(i))})(o(u.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[u.constructor.name])};return h(r)}};var o$=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),a$=ne,i$=ne;function XC(e){return function(t){return e===t}}var Ql=XC;var S7=ut(Pe);var E7=Z(wr);var T7=De(on),M7=it(Yt),F7=M7(gt);var Lv=function(e){return e},c$=function(e){return function(t){return e(function(n){return S7(t(n))})}};var Jn=function(e){return function(t){return e(t)}};var hp={map:function(e){return function(t){return function(n){return t(function(a){return n(e(a))})}}}};var jn=function(){var t=an([])();return{emitter:function(n){return function(){return no(function(h){return T7(h)([n])})(t)(),no(d_(Ql)(n))(t)}},listener:function(n){return E7(Ke(t))(F7(function(a){return a(n)}))}}};var ZC=he(_e);var x7=nv();var l$=function(e){return e},f$=function(e){return e},_p=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Dc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Av=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Iv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$v=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Dp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Yl=function(e){return e},Hv=function(e){return ft(new mp(e,void 0))};var Rn=function(e){return ft(new vp(function(t){return e},ZC))};var Ur=function(e){return ft(new yp(e,void 0))};var qr=function(){return function(e){var t=x7(e);return function(n){var a=t(n);return function(h){return function(o){return function(r){return ft(new gp(i$(new o$(function(l){var u=X(l);return function(i){var s=Qe(u(V.value))(i),f=a(h)(o);return function(p){return s(f(p))}}},r,ZC))))}}}}}},eb=vt,Ov=vt;var Zl={lift:function(e){return function(t){return Yl(ft(Dc.create(t)))}}},Cc=Kl,Ht={state:function(e){return Yl(ft(_p.create(e)))},Monad0:function(){return Cc}};var Ln=function(e){return{liftEffect:function(){var t=Le(e);return function(n){return Yl(ft(Dc.create(t(n))))}}(),Monad0:function(){return Cc}}};var ri=function(e){var t=Ln(e.MonadEffect0());return{liftAff:function(){var n=Cn(e);return function(a){return Yl(ft(Dc.create(n(a))))}}(),MonadEffect0:function(){return t}}};var Ir=function(e){return ft(new Dp(e,ZC))},$n=Ki;var zt=ir,L7=Z(zt),Pv=pp;var Kt=hr,A7=X(Kt),Cp={tailRecM:function(e){return function(t){return L7(e(t))(function(n){if(n instanceof Pt)return mn(Cp)(e)(n.value0);if(n instanceof Bt)return A7(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return Cc}};var ef=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),of=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var I7=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}};var R7=function(e,t){return mc(e.value0,t.value0)&&mc(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var d$=function(e){return e.value2(e.value3)};var p$=function(e){var t=function(o){return bo(o.vdom)},n=I7("patchThunk","Halogen.VDom.Thunk",function(){return function(o,r){var l=R7(o.thunk,r);if(l)return xn(new Fn(Lr(o.vdom),o,n(112),t));var u=Co(o.vdom,e(d$(r)));return xn(new Fn(Lr(u),{vdom:u,thunk:r},n(115),t))}}),a=n(108),h=function(o){return function(r){var l=up(o)(e(d$(r)));return xn(new Fn(Lr(l),{thunk:r,vdom:l},a,t))}};return h};var kv=Zc($n),rb=it(Kt)($t),$7=G($n);var h$=X(Kt),H7=nv(),O7=tv(),P7=rv(),af=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ob=ne,ab=ne,cn=function(e){return function(t){if(t instanceof ef)return kv(rb(e.handleAction)(e.initialize))(t.value0);if(t instanceof tf)return kv(rb(e.handleAction)(e.finalize))(t.value0);if(t instanceof nf)return kv(rb(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof rf)return kv(e.handleAction(t.value0))(t.value1);if(t instanceof of)return rR(function(n){var a=$7(Qe(t.value1(void 0))(n));return function(h){return a(e.handleQuery(h))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},k7=ne,ln=ne;var dt=function(){return{handleAction:ve(h$(void 0)),handleQuery:ve(h$(V.value)),receive:ve(V.value),initialize:V.value,finalize:V.value}}(),ib=function(){return function(e){var t=H7(e),n=O7(e),a=P7(e);return function(h){var o=t(h),r=n(h),l=a(h);return function(u){return function(i){return function(s){return function(f){return function(p){return k7({get:o(u)(i),pop:r(u)(i),set:l(u)(i),component:s,input:f,output:p})}}}}}}}};var oi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),co=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var v$=function(e){return e instanceof co?new B(e.value1):e instanceof wo?new B(e.value0):V.value},m$=function(e){return e instanceof co?new B(e.value0):e instanceof oi?new B(e.value0):V.value};var g$=function(e){var t=De(e);return function(n){var a=De(n);return{append:function(h){return function(o){if(h instanceof oi&&o instanceof oi)return new oi(t(h.value0)(o.value0));if(h instanceof oi&&o instanceof wo)return new co(h.value0,o.value0);if(h instanceof oi&&o instanceof co)return new co(t(h.value0)(o.value0),o.value1);if(h instanceof wo&&o instanceof oi)return new co(o.value0,h.value0);if(h instanceof wo&&o instanceof wo)return new wo(a(h.value0)(o.value0));if(h instanceof wo&&o instanceof co)return new co(o.value0,a(h.value0)(o.value1));if(h instanceof co&&o instanceof oi)return new co(t(h.value0)(o.value0),h.value1);if(h instanceof co&&o instanceof wo)return new co(h.value0,a(h.value1)(o.value0));if(h instanceof co&&o instanceof co)return new co(t(h.value0)(o.value0),a(h.value1)(o.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[h.constructor.name,o.constructor.name])}}}}};var j7=De(Is),K7=st(Mi),D$=qs(gt),C$=D$(Mi),Wv=qa(gt)(Mi),ai=G(Dt),sb=pt(Rs),Q7=De(on),b$=Nn(gt),X7=b$(Mi),Y7=T0(WL),Uv=G(mt),Z7=Mt(AM),w$=Z(Pr),eV=a_(R0(gt)),S$=G(Sd(Dt));var tV=n_(gt)(eo),nV=Z(mu),rV=p_(Md),oV=pa(cd(da)),aV=qa(h_(gt))(Mi),iV=Me(_o),qv=function(e){return e},uV=function(e){return e},cb=function(e){return function(t){return function(n){return t+(e+n)}}},sV={append:function(e){return function(t){return e+t}}},cV={append:function(e){return function(t){return e+t}}},E$=g$(sV)(cV),T$=SF(E$),Bv=b$(T$),lV=D$(T$),bp=De(Gy(E$)),y$=function(e){var t=wn(function(n){return K7})(function(n){return C$([n.value0,": ",n.value1])});return Wv("; ")(ai(t)(e))},fV=function(e){if(e instanceof Ou)return"#"+e.value0;if(e instanceof Oi)return"."+e.value0;if(e instanceof Pu)return"["+(e.value0+"]");if(e instanceof ku)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof Nu)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof Bu)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof Wu)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof Uu)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof qu)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof Pi)return":"+e.value0;if(e instanceof Ll)return":"+(e.value0+("("+(Wv(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},dV=function(e){return function(t){if(e.length===0&&t instanceof S_)return["*"];if(t instanceof S_)return[""];if(t instanceof X0)return[t.value0];if(t instanceof Y0)return sb(ai(cb(" > "))(Qi(t.value0)))(Qi(t.value1));if(t instanceof Z0)return sb(ai(cb(" "))(Qi(t.value0)))(Qi(t.value1));if(t instanceof kL)return sb(ai(cb(" + "))(Qi(t.value0)))(Qi(t.value1));if(t instanceof NL)return Q7(Qi(t.value0))(Qi(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},Qi=function(e){return ai(function(t){return t+X7(fV)(Y7(e.value0))})(dV(e.value0)(e.value1))},pV=function(){var e=Wv(", ");return function(t){return e(Qi(t))}}(),bc=function(e){return e.length===0?V.value:Uv(function(t){return new oo(t.head,t.tail)})(s_(e))};var uf=function(e){if(e.value0 instanceof QL)return Qe(e.value0.value0)(function(t){return UL(uf(t))(e.value0.value0)})(bc(e.value1));if(e.value0 instanceof iD)return Qe(e.value0.value0)(function(t){return Gn(uf(t))(e.value0.value0)})(bc(e.value1));if(e.value0 instanceof jL)return Qe(e.value0.value0)(function(t){return Gn(e.value0.value0)(uf(t))})(bc(e.value1));if(e.value0 instanceof KL)return Qe(E_("TODO"))(uf)(bc(F0(e.value0.value0)(Mn(e.value0)(e.value1))));if(e.value0 instanceof JL)return Qe(lt(qt)(e.value0.value0))(function(t){return lt(uf(t))(e.value0.value0)})(bc(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},hV=function(e){return Ld(e)},_V=function(e){return B.create(wo.create(qv(Z7("@import url("+(e+`);
`)))))},vV=function(e){return e},lb=function(e){return w$(e)(function(){var t=Uv(vV);return function(n){return t(v$(n))}}())},mV=function(e){return e},M$=function(e){return w$(e)(function(){var t=Uv(mV);return function(n){return t(m$(n))}}())},gV=function(e){return Qe(e.value0)(function(t){return"("+(e.value0+(": "+(Ld(t)+")")))})(e.value1)},yV=function(e){return"@media "+(hV(e.value1)+eV(j7)(S$(function(t){return function(n){return" and "+n}(gV(t))})(e.value2)))};var DV=function(e){return function(t){if(e instanceof io&&t instanceof io)return[new Oe(new ee(e.value0,t.value0))];if(e instanceof ao&&t instanceof io)return ai(function(n){return new Oe(new ee(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof io&&t instanceof ao)return ai(function(n){return new Oe(new ee(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof ao&&t instanceof ao)return ai(function(n){return Qe(new We(n.value0+n.value1))(function(){var a=ee.create(n.value0+n.value1);return function(h){return Oe.create(a(function(o){return n.value0+o}(h)))}}())(tV(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},fb=function(e){return DV(e.value0)(e.value1)},CV=function(e){return function(t){var n=nV(t)(fb),a=Uv(function(o){return oi.create(uV(y$(rV(o))))})(bc(n)),h=function(o){return B.create(wo.create(qv(Wv(" ")([pV(uf(o)),"{",y$(n),`}
`]))))};return Qe(a)(h)(bc(e))}},wp=function(e){return function(t){var n=function(_){return _ instanceof XL?new B(new ee(_.value0,_.value1)):V.value},a=Bv(Su($e(bV)(e)))(Va(n)(t)),h=function(_){return _ instanceof Od?new B(new ee(_.value0,_.value1)):V.value},o=function(){var _=Va(h)(t),v=oV(Gs)(_);return v?CV(e)(_):V.value}(),r=function(_){return wp(Mn(_)(e))},l=function(_){return _ instanceof uD?new B(new ee(_.value0,_.value1)):V.value},u=lV(ai(Su(r))(Va(l)(t))),i=function(_){return _ instanceof ZL?new B(_.value0):V.value},s=Bv(wV)(Va(i)(t)),f=function(_){return _ instanceof eA?new B(_.value0):V.value},p=Bv(_V)(Va(f)(t)),d=function(_){return _ instanceof YL?new B(_.value0):V.value},c=Bv(EV)(Va(d)(t));return bp(o)(bp(p)(bp(s)(bp(c)(bp(u)(a)))))}},bV=function(e){return function(t){return function(n){return B.create(wo.create(qv(yV(e)+(" { "+(er("")(lb(wp(t)(n)))+` }
`)))))}}},wV=function(e){var t=" "+(e.value0+(" { "+(aV(" ")(S$(Su(SV))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],a=C$(ai(function(h){return h+t})(n));return new B(new wo(a))},SV=function(e){return function(t){var n=er("")(M$(wp([])(t)));return iV(e)+("% "+("{ "+(n+" }")))}},EV=function(e){return B.create(wo.create(qv("@font-face { "+(er("")(M$(wp([])(e)))+` }
`))))},F$=function(){var e=wp([]);return function(t){return e(Pd(t))}}();var ii=function(){return IR(V.value)}();var x$=ii("h3"),db=x$([]);var pb=function(e){return ii("img")(e)([])},Sp=function(e){return ii("input")(e)([])};var hb=ii("option");var _b=ii("select");var vb=ii("style");var fn=ii("div"),lo=fn([]);var mb=function(e){return ii("canvas")(e)([])},sf=ii("button");var ui=function(){var e=function(t){return function(n){return new B(new av(t,n))}};return function(t){return FR(e(t))}}(),wc=function(e){return xR(e)};var MV=wc(Tv),L$=wc(LR);var A$=MV("src");var I$=function(e){return wc(e)("type")},R$=function(e){return wc(e)("value")},$$=L$("width");var H$=L$("height");var gb=function(){return RR(V.value)}();var FV=I$(VC),xV=Z(mu),LV=cp(gt),O$=function(e){var t=er("")(lb(F$(e)));return vb([FV("text/css")])([Ar(t)])},Un=function(){var e=function(){var o=mo("; "),r=DR(Ps)(function(l){return function(u){return[l+(": "+u)]}});return function(l){return o(r(l))}}(),t=L0(Nn(t_)(Ps)(zs)),n=function(o){return o instanceof Od?new B(new ee(o.value0,o.value1)):V.value},a=function(o){var r=xV(Va(n)(o))(function(l){return t(fb(l))});return LV(r)},h=gb("style");return function(o){return h(e(a(Pd(o))))}}();var Gr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Jr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_r=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var AV=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return{map:function(a){return function(h){var o=function(r){if(r instanceof Gr)return new Gr(r.value0,function(l){return o(r.value1(l))});if(r instanceof Jr)return new Jr(r.value0,function(l){return o(r.value1(l))});if(r instanceof jr)return new jr(t(r.value0)(function(l){return n(o(l))}));if(r instanceof _r)return new _r(a(r.value0));throw new Error("Failed pattern match at Pipes.Internal (line 28, column 12 - line 32, column 41): "+[r.constructor.name])};return o(h)}}}};var Ep=function(e){var t;function n(a){e=a}for(;;)t=n(e);return t},yb=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0()),a=AV(e),h=G(a);return{apply:function(o){return function(r){var l=function(u){if(u instanceof Gr)return new Gr(u.value0,function(i){return l(u.value1(i))});if(u instanceof Jr)return new Jr(u.value0,function(i){return l(u.value1(i))});if(u instanceof jr)return new jr(t(u.value0)(function(i){return n(l(i))}));if(u instanceof _r)return h(u.value0)(r);throw new Error("Failed pattern match at Pipes.Internal (line 36, column 13 - line 40, column 33): "+[u.constructor.name])};return l(o)}},Functor0:function(){return a}}},cf=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0()),a=yb(e);return{bind:function(h){return function(o){var r=function(l){if(l instanceof Gr)return new Gr(l.value0,function(u){return r(l.value1(u))});if(l instanceof Jr)return new Jr(l.value0,function(u){return r(l.value1(u))});if(l instanceof jr)return new jr(t(l.value0)(function(u){return n(r(u))}));if(l instanceof _r)return o(l.value0);throw new Error("Failed pattern match at Pipes.Internal (line 47, column 12 - line 51, column 28): "+[l.constructor.name])};return r(h)}},Apply0:function(){return a}}};var lf=function(e){var t=yb(e);return{pure:_r.create,Apply0:function(){return t}}},P$=function(e){var t=lf(e),n=cf(e);return{Applicative0:function(){return t},Bind1:function(){return n}}},k$=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0()),a=P$(e);return{tailRecM:function(h){return function(o){var r=function(l){if(l instanceof _r&&l.value0 instanceof Pt)return r(h(l.value0.value0));if(l instanceof _r&&l.value0 instanceof Bt)return new _r(l.value0.value0);if(l instanceof jr)return new jr(t(l.value0)(function(u){return n(r(u))}));if(l instanceof Gr)return new Gr(l.value0,function(u){return r(l.value1(u))});if(l instanceof Jr)return new Jr(l.value0,function(u){return r(l.value1(u))});throw new Error("Failed pattern match at Pipes.Internal (line 163, column 10 - line 168, column 52): "+[l.constructor.name])};return r(h(o))}},Monad0:function(){return a}}};var N$=function(e){return function(t){return new Jr(t,_r.create)}},B$=function(e){return function(t){return new Gr(t,_r.create)}};var Db=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return function(a){return function(h){if(a instanceof Gr)return new Gr(a.value0,function(o){return Db(e)(a.value1(o))(h)});if(a instanceof Jr)return Tp(e)(a.value1)(h(a.value0));if(a instanceof jr)return new jr(t(a.value0)(function(o){return n(Db(e)(o)(h))}));if(a instanceof _r)return new _r(a.value0);throw new Error("Failed pattern match at Pipes.Core (line 222, column 21 - line 226, column 29): "+[a.constructor.name])}}},Tp=function(e){var t=G(e.Bind1().Apply0().Functor0());return function(n){return function(a){if(a instanceof Gr)return Db(e)(n(a.value0))(a.value1);if(a instanceof Jr)return new Jr(a.value0,function(h){return function(o){return Tp(e)(n)(o)}(a.value1(h))});if(a instanceof jr)return new jr(t(function(h){return Tp(e)(n)(h)})(a.value0));if(a instanceof _r)return new _r(a.value0);throw new Error("Failed pattern match at Pipes.Core (line 197, column 22 - line 201, column 29): "+[a.constructor.name])}}};var zv=function(e){return N$(e)};var Cb=function(e){var t=Tp(e);return function(n){return function(a){return t(ve(n))(a)}}};var W$=function(e){return B$(e)(void 0)};var U$=Me(to),j$=Ee(vt),K$=ot(at),RV=K$(Xo),$V=he(_e),q$=ll(fl),Gv=Z_(ei),V$=K$(cf(Gv)),z$=zv(Gv),G$=X(lf(Gv)),J$=mn(k$(Gv));var HV={eq:function(e){return function(t){return e===t}}},wb={compare:function(e){return function(t){return j$(e)(t)}},Eq0:function(){return HV}},OV={pageOrder:function(e){return function(t){return j$(e)(t)}},Ord0:function(){return wb}},PV=function(e){return{element:function(){var t=function(n){return fn([Un(Nd(kd)(et(1))(Ga))])([Ar(U$(n)),pb([A$("https://picsum.photos/"+U$(n)),Un(RV(Ca(et(400)))(function(){return Oo(et(400))}))])])};return ln({initialState:$V,render:t,eval:cn(dt)})}(),PageOrder0:function(){return OV},MonadAff1:function(){return e}}},Q$=function(e){var t=X(e.MonadEffect0().Monad0().Applicative0()),n=PV(e);return{feedAbove:function(a){var h=function(o){var r=q$(o-1|0)(300);return V$(z$(r))(function(){return G$(new Pt(r))})};return t(J$(h)(a))},feedBelow:function(a){var h=function(o){var r=q$(o+1|0)(300);return V$(z$(r))(function(){return G$(new Pt(r))})};return t(J$(h)(a))},feedInsert:t(V.value),feedDelete:t(V.value),onElement:function(a){return t(void 0)},PageElement0:function(){return n},MonadAff1:function(){return e}}};var oa=function(){return window};function X$(e){return e.readyState}var Mp=function(){function e(){}return e.value=new e,e}(),UV=function(){function e(){}return e.value=new e,e}(),qV=function(){function e(){}return e.value=new e,e}();var Y$=function(e){return e==="loading"?new B(Mp.value):e==="interactive"?new B(UV.value):e==="complete"?new B(qV.value):V.value};var zV=G(Pe);var eH=ne;var tH=ne;var nH=function(e){return zV(function(){var t=er(Mp.value);return function(n){return t(Y$(n))}}())(function(){return X$(e)})};function oH(e,t,n){var a=Object.prototype.toString.call(n);return a.indexOf("[object HTML")===0&&a.indexOf("Element]")===a.length-8?t(n):e}var aH=ne;var Fp=function(e){return oH(V.value,B.create,e)};function Sb(e){return function(){return e.hash}}function ff(e){return function(){return e.document}}function Eb(e){return function(){return e.location}}var cH=ne;var Mb="DOMContentLoaded";var lH="change";var dH=Z(jt),Wz=Le(Dn),Fb=bn(wr),Uz=tl(wr),pH=X(Wr),qz=bn(Pr),Vz=X(Yt),zz=G(Pe),Gz=ot(at),Jz=or(Vl),jz=function(e){return dH(Wz(Fb(Uz(function(){var t=dR(e);return function(n){return t(eH(n))}}())(ff))(oa)))(function(t){return pH(qz(Fp)(t))})},xb=Jd(wn(yo)(ve(Vz(void 0)))),Kz=wa(function(e){return function(){var n=Fb(nH)(Fb(ff)(oa))();if(n instanceof Mp){var a=zz(cH)(oa)(),h=lp(function(o){return e(new Oe(void 0))})();return OC(Mb)(h)(!1)(a)(),dc(PC(Mb)(h)(!1)(a))}return e(new Oe(void 0))(),zD}}),Lb=Gz(jt)(Kz)(function(){return dH(jz("body"))(function(e){return Qe(Jz(rr("Could not find body")))(pH)(e)})});var _H=ib();var aa=function(){return function(e){var t=_H(e);return function(n){var a=t(n);return function(h){return function(o){return function(r){return function(l){return qC(new af(a(h)(o)(r)(l)(ve(V.value))))}}}}}}},fs=function(){return function(e){var t=_H(e);return function(n){var a=t(n);return function(h){return function(o){return function(r){return function(l){return function(u){return qC(new af(a(h)(o)(r)(l)(function(i){return B.create(u(i))})))}}}}}}}};var Xz=In();var Ab=function(e){return Xz(xD(e))};function gH(e){return e.target}function Kr(e){return function(){return e.stopPropagation()}}var Ib=function(e){return un(gH(e))};var yH="keyup",DH="keydown";var CH="mouseup";var bH="mousemove",wH="mouseleave",SH="mouseenter",EH="mousedown",TH="dblclick",MH="click";var Ec=ne,FH=ne;var si=function(e){return function(t){return zC(e)(function(n){return new B(new hc(t(n)))})}};var df=si(lH),Tc=function(){var e=si(MH);return function(t){return e(Ec(t))}}(),xH=function(){var e=si(TH);return function(t){return e(Ec(t))}}();var LH=function(){var e=si(DH);return function(t){return e(FH(t))}}(),AH=function(){var e=si(yH);return function(t){return e(FH(t))}}();var IH=function(){var e=si(EH);return function(t){return e(Ec(t))}}(),RH=function(){var e=si(SH);return function(t){return e(Ec(t))}}(),$H=function(){var e=si(wH);return function(t){return e(Ec(t))}}(),HH=function(){var e=si(bH);return function(t){return e(Ec(t))}}();var OH=function(){var e=si(CH);return function(t){return e(Ec(t))}}();var Rb=Mt(nr),PH=Mt(zn);var lG={value:function(e){return e}},kH=Jt(lG),Kv=Rb("scroll"),Qv=kH(PH("overflow-y"));var NH=Rb("auto"),Mc=kH(PH("overflow")),Ap=Rb("hidden");var Ip=function(e){return function(t){var n=e(t);return n.value1}};var ia=function(){function e(){this.head=null,this.last=null,this.size=0}function t(s,f){this.queue=s,this.value=f,this.next=null,this.prev=null}function n(s){this.draining=!1,this.error=null,this.value=s,this.takes=new e,this.reads=new e,this.puts=new e}var a={};function h(s){try{s()}catch(f){setTimeout(function(){throw f},0)}}function o(s,f){var p=new t(s,f);switch(s.size){case 0:s.head=p;break;case 1:p.prev=s.head,s.head.next=p,s.last=p;break;default:p.prev=s.last,s.last.next=p,s.last=p}return s.size++,p}function r(s){var f;switch(s.size){case 0:return null;case 1:f=s.head,s.head=null;break;case 2:f=s.last,s.head.next=null,s.last=null;break;default:f=s.last,s.last=f.prev,s.last.next=null}return f.prev=null,f.queue=null,s.size--,f.value}function l(s){var f;switch(s.size){case 0:return null;case 1:f=s.head,s.head=null;break;case 2:f=s.head,s.last.prev=null,s.head=s.last,s.last=null;break;default:f=s.head,s.head=f.next,s.head.prev=null}return f.next=null,f.queue=null,s.size--,f.value}function u(s){if(s.queue!==null){if(s.queue.last===s){r(s.queue);return}if(s.queue.head===s){l(s.queue);return}s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),s.queue.size--,s.queue=null,s.value=null,s.next=null,s.prev=null}}function i(s,f){if(!f.draining){var p=f.puts,d=f.takes,c=f.reads,_,v,m,y,C;for(f.draining=!0;;){if(_=null,v=null,m=null,y=f.value,C=c.size,f.error!==null){for(y=s.left(f.error);_=l(p);)h(_.cb(y));for(;v=l(c);)h(v(y));for(;m=l(d);)h(m(y));break}if(y===a&&(_=l(p))&&(f.value=y=_.value),y!==a){for(m=l(d);C--&&(v=l(c));)h(v(s.right(y)));m!==null&&(f.value=a,h(m(s.right(y))))}if(_!==null&&h(_.cb(s.right(void 0))),f.value===a&&p.size===0||f.value!==a&&d.size===0)break}f.draining=!1}}return n.EMPTY=a,n.putLast=o,n.takeLast=r,n.takeHead=l,n.deleteCell=u,n.drainVar=i,n}();function Hb(){return new ia(ia.EMPTY)}function WH(e){return function(){return new ia(e)}}function UH(e,t,n,a){return function(){var h=ia.putLast(n.puts,{cb:a,value:t});return ia.drainVar(e,n),function(){ia.deleteCell(h)}}}function qH(e,t,n){return function(){var a=ia.putLast(t.takes,n);return ia.drainVar(e,t),function(){ia.deleteCell(a)}}}function VH(e,t){return function(){var n=t.value;return n===ia.EMPTY?e.nothing:(t.value=ia.EMPTY,ia.drainVar(e,t),e.just(n))}}var zH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JH=function(){function e(){}return e.value=new e,e}(),jH=WH;var Ob=function(){return{left:We.create,right:Oe.create,nothing:V.value,just:B.create,killed:zH.create,filled:GH.create,empty:JH.value}}();var KH=function(e){return function(t){return function(n){return UH(Ob,e,t,n)}}};var QH=function(e){return function(t){return qH(Ob,e,t)}};var XH=function(e){return VH(Ob,e)};var Pb=Le(Dn),YH=function(e){return Pb(XH(e))};var kb=function(e){return wa(function(t){return function(){var a=QH(e)(t)();return dc(a)}})};var Rp=function(e){return function(t){return wa(function(n){return function(){var h=KH(e)(t)(n)();return dc(h)}})}},ZH=function(e){return Pb(jH(e))};var Nb=Pb(Hb);var Xv=function(e){return e};var _G=cp(gt);var tO=on,Fc=function(e){return gc(_G(e))};var nO=Ps;var vG=function(e){return function(t){return[new ee(e,gc(t))]}},Zi=function(e){return Xv(vG(e))},$p=In();var rO=e=>t=>()=>{let n=(a,h)=>{e(a)(h)()};return new IntersectionObserver(n,t)},Wb=e=>t=>()=>{e.observe(t)};var oO=function(e){return function(t){return rO(e)(Fc(t))}};var aO=Zi("root");var iO=e=>()=>{let t=(n,a)=>{e(n)(a)()};return new ResizeObserver(t)},Ub=e=>t=>()=>{e.observe(t)};var uO=function(e){return iO(e)};var qb=G(Dt),bG=aa()({reflectSymbol:function(){return"pageElement"}}),Hp=ot(at)(zt),sO=yn(Ht),cO=X(Kt),eu=Z(zt),wG=Ro(Ht),SG=An(Kt),Vb=$o(Ht),lO=ut($n),EG=Or(Pv),TG=it(Kt)($t),fO=v0(gt)(Wy),MG=he(_e),zb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),FG=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Gb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dO=function(){function e(){}return e.value=new e,e}(),pO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Op=function(e){return e.pageOrder},xG=function(e){return e.element},LG=function(){return Et.value}(),_O=function(e){var t=e.PageOrder0(),n=t.Ord0(),a=bG(n),h=xG(e),o=Dd(n),r=Op(t),l=x0(n.Eq0()),u=Le(Ln(e.MonadAff1().MonadEffect0())),i=function(p){return fn([ui("page"),Un(Mc(NH))])(qb(function(d){return a(LG)(d)(h)(d)})(p.elements))},s=function(p){if(p instanceof zb)return Hp(sO(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.elements=o(Cd(r)(p.value0)(d.elements)),c}))(function(){return cO(new B(p.value1))});if(p instanceof FG)return eu(wG(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.elements=l(p.value0)(d.elements),c}))(function(d){return Hp(SG(Gs(d.elements))(Ur(new jb(d.id))))(function(){return cO(new B(p.value1))})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 89, column 5 - line 89, column 99): "+[p.constructor.name])},f=function(p){if(p instanceof dO){var d=function(m){return eu(Vb(function(y){return y.parent}))(function(y){return eu(u(jn))(function(C){return Hp(lO(Rn(C.emitter)))(function(){return eu(u(oO(function(T){return function(D){return Jn(C.listener)(new hO(T))}})($p(aO)(y))))(function(T){return u(Wb(T)(m))})})})})},c=function(m){return eu(u(jn))(function(y){return Hp(lO(Rn(y.emitter)))(function(){return eu(u(uO(function(C){return function(T){return Jn(y.listener)(new pO(C))}})))(function(C){return u(Ub(C)(m))})})})},_=function(m){return EG(c(m))(d(m))};return eu(Ir("page"))(TG(_))}if(p instanceof pO)return eu(Vb(function(m){return m.id}))(function(m){var y=fO(qb(function(C){return C.contentRect.height})(p.value0));return Ur(new Gb({id:m,height:y}))});if(p instanceof hO){var v=fO(qb(function(m){return m.intersectionRect.height})(p.value0));return eu(Vb(function(m){return m.id}))(function(m){return Hp(sO(function(y){var C={};for(var T in y)({}).hasOwnProperty.call(y,T)&&(C[T]=y[T]);return C.visibleHeight=v,C}))(function(){return Ur(new Jb({id:m,height:v}))})})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page (line 98, column 5 - line 98, column 81): "+[p.constructor.name])};return ln({initialState:MG,render:i,eval:cn({receive:dt.receive,finalize:dt.finalize,handleAction:f,handleQuery:s,initialize:new B(dO.value)})})};var AG=ol(vt),IG=Si(vt),RG=K_(Jo),$G=G(Nl),xc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ds=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),HG={append:function(e){return function(t){if(e instanceof ds)return new ds(e.value0);if(t instanceof ds)return new ds(t.value0);if(e instanceof xc&&t instanceof xc)return new xc(AG(e.value0)(t.value0));if(e instanceof Lc&&t instanceof Lc)return new Lc(IG(e.value0)(t.value0));if(e instanceof xc)return new ds(e.value0);if(e instanceof Lc)return new ds(e.value0);throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 19, column 1 - line 25, column 32): "+[e.constructor.name,t.constructor.name])}}},OG=function(){return{mempty:new xc(Lo(al)),Semigroup0:function(){return HG}}}(),PG=Nx(OG),mO=function(e){var t=Op(e);return function(n){return function(a){var h=function(r){var l=new ee(Li(r.elements),Cl(r.elements));if(l.value0 instanceof B&&l.value1 instanceof B){var u=new ee(t(n)(l.value0.value0),t(n)(l.value1.value0));return u.value0 instanceof de?new xc(r.id):u.value1 instanceof se?new Lc(r.id):new ds(r.id)}return new Lc(r.id)},o=PG(RG(Wd($G(h)(a))));if(o instanceof xc||o instanceof Lc||o instanceof ds)return o.value0;throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Page.Find (line 29, column 3 - line 32, column 18): "+[o.constructor.name])}}};var bO=ot(at),ps=bO(jD(Dr)),hs=yn(G_(Dr)),gO=Br(vt),Yv=Ya(vt),Ac=X(jd(Dr)),yO=Re(sl(gu)),DO=G(mt),NG=Ku(vt),BG=Si(wi),WG=he(_e),UG=_0(wi)(Bi),qG=G(Nl),CO=kl(Jo),pf=bO(ir),hf=An(hr),_f=it(hr)($t),Zv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),em=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),nm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),om=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),am=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),VG={map:function(e){return function(t){if(t instanceof Zv)return new Zv(t.value0,e(t.value1));if(t instanceof em)return new em(t.value0,e(t.value1));if(t instanceof tm)return new tm(t.value0,e(t.value1));if(t instanceof nm)return new nm(t.value0,e(t.value1));if(t instanceof rm)return new rm(t.value0,e(t.value1));if(t instanceof om)return new om(t.value0,e(t.value1));if(t instanceof am)return new am(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 26, column 1 - line 33, column 68): "+[e.constructor.name,t.constructor.name])}}},zG=na(VG)(dI(PF)),Kb=function(e){return ft(new am(e,void 0))},GG=function(e){return ft(new em(e,void 0))},JG=function(e){return ft(new Zv(e,void 0))},jG=function(e){return ft(new tm(e,void 0))},KG=function(e){return ft(new nm(e,void 0))},Qb=function(e){var t=function(n){if(n instanceof Zv)return ps(hs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.pages=gO(n.value0.key)(n.value0.value)(h.pages),o.preloaded=Yv(n.value0.key)(h.preloaded),o.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.scroll=new B(n.value0.value.pageHeight),l}(),o}))(function(){return Ac(n.value1)});if(n instanceof em)return ps(hs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.pages=Yv(n.value0.key)(h.pages),o.preloaded=gO(n.value0.key)(n.value0.value)(h.preloaded),o.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.scroll=new B(-n.value0.value.pageHeight),l}(),o}))(function(){return Ac(n.value1)});if(n instanceof tm)return ps(hs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.update=function(){var l=yO(DO(function(p){return p.key})(h.update.topLoad))(new B(n.value0.key));if(l){var u={};for(var i in h.update)({}).hasOwnProperty.call(h.update,i)&&(u[i]=h.update[i]);return u.topLoad=V.value,u}var s={};for(var f in h.update)({}).hasOwnProperty.call(h.update,f)&&(s[f]=h.update[f]);return s.topLoad=new B(n.value0),s}(),o}))(function(){return Ac(n.value1)});if(n instanceof nm)return ps(hs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.preloaded=Yv(n.value0.key)(h.preloaded),o.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.topLoad=V.value,l}(),o}))(function(){return Ac(n.value1)});if(n instanceof rm)return ps(hs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.update=function(){var l=yO(DO(function(p){return p.key})(h.update.bottomLoad))(new B(n.value0.key));if(l){var u={};for(var i in h.update)({}).hasOwnProperty.call(h.update,i)&&(u[i]=h.update[i]);return u.bottomLoad=V.value,u}var s={};for(var f in h.update)({}).hasOwnProperty.call(h.update,f)&&(s[f]=h.update[f]);return s.bottomLoad=new B(n.value0),s}(),o}))(function(){return Ac(n.value1)});if(n instanceof om)return ps(hs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.pages=Yv(n.value0.key)(h.pages),o.update=function(){var l={};for(var u in h.update)({}).hasOwnProperty.call(h.update,u)&&(l[u]=h.update[u]);return l.bottomLoad=V.value,l}(),o}))(function(){return Ac(n.value1)});if(n instanceof am){var a=function(h){if(h instanceof V)return V.value;if(h instanceof B)return new B(function(){var o={};for(var r in h.value0)({}).hasOwnProperty.call(h.value0,r)&&(o[r]=h.value0[r]);return o.visibleHeight=n.value0.height,o}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 104, column 11 - line 104, column 44): "+[h.constructor.name])};return ps(hs(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.pages=NG(a)(n.value0.id)(h.pages),o}))(function(){return Ac(n.value1)})}throw new Error("Failed pattern match at Halogen.Infinite.Scroll.Update (line 63, column 5 - line 69, column 13): "+[n.constructor.name])};return ps(hs(function(n){var a={};for(var h in n)({}).hasOwnProperty.call(n,h)&&(a[h]=n[h]);return a.update=function(){var o={};for(var r in n.update)({}).hasOwnProperty.call(n.update,r)&&(o[r]=n.update[r]);return o.scroll=V.value,o}(),a}))(function(){return zG(t)(e)})},QG=function(e){return ft(new rm(e,void 0))},XG=function(e){return ft(new om(e,void 0))},wO=function(e){return function(t){var n=Ju(e.preloaded)>(e.feedParams.preloadedPages+e.feedParams.deadZone|0),a=Ju(e.preloaded)<(e.feedParams.preloadedPages-e.feedParams.deadZone|0),h=function(f){return f.value1.visibleHeight<BG(1)(Qe(0)(WG)(UG(qG(function(p){return p.visibleHeight})(e.pages))))},o=gr(f_(h)(rl(CO(e.pages)))),r=o<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),l=o>(e.feedParams.hiddenPages+e.feedParams.deadZone|0),u=gr(f_(h)(CO(e.pages))),i=u<(e.feedParams.hiddenPages-e.feedParams.deadZone|0),s=u>(e.feedParams.hiddenPages+e.feedParams.deadZone|0);return pf(Kb(t))(function(){return pf(hf(e.feedParams.enableTop&&i)(_f(JG)(ju(e.preloaded))))(function(){return pf(hf(e.feedParams.enableTop&&s)(_f(GG)(Xa(e.pages))))(function(){return pf(hf(e.feedParams.enableTop&&a)(_f(jG)(Xa(e.preloaded))))(function(){return pf(hf(e.feedParams.enableTop&&n)(_f(KG)(Xa(e.preloaded))))(function(){return pf(hf(r)(_f(QG)(ju(e.pages))))(function(){return hf(l)(_f(XG)(ju(e.pages)))})})})})})})}};var o9=ut($n);var a9=qr();var Xb=function(){return function(e){var t=a9(e);return function(n){var a=t(n);return function(h){return function(o){return function(r){return o9(a(h)(o)(r(void 0)))}}}}}};var u9=ot(at);var EO=function(e){var t=X(lf(e)),n=cf(e),a=Z(n),h=W$(e),o=u9(n),r=zv(e),l=function(u){return u===0?t(void 0):a(h)(function(i){return o(r(i))(function(){return l(u-1|0)})})};return l};var s9=function(e){var t=Z(e.Bind1()),n=X(e.Applicative0());return function(a){return function(h){return function(o){return function(r){var l=function(u){return function(i){if(u instanceof Gr)return Ep(u.value0);if(u instanceof Jr)return l(u.value1(void 0))(a(i)(u.value0));if(u instanceof jr)return t(u.value0)(function(s){return l(s)(i)});if(u instanceof _r)return n(o(i));throw new Error("Failed pattern match at Pipes.Prelude (line 202, column 14 - line 206, column 39): "+[u.constructor.name])}};return l(r)(h)}}}}};var TO=function(e){var t=function(a){return function(h){return function(o){return a(function(r){return new Xe(h,r)}(o))}}},n=function(a){return a(Ye.value)};return s9(e)(t)(he(_e))(n)};var Zt=Z(zt),Yb=An(Kt),l9=Or(Pv),mf=$o(Ht),tu=it(Kt)($t),vf=En(Vs)(Kt),_s=X(Kt),ew=ot(at),sm=bt(Zl),tw=G(ZD(xr)),nw=Ai(Wn),rw=Z_(ei),ow=TO(rw),aw=Cb(rw),iw=EO(rw),Pp=G($n),Qr=ew(zt),uw=nl(Pr),AO=Fr(Ht),Fa=yn(Ht),Zb=Br(vt),IO=Ya(vt),MO=ut($n),f9=mn(Cp),d9=ew(jt),p9=G(hp),im=Ku(vt),h9=$_(vt),RO={reflectSymbol:function(){return"page"}},_9=Xb()(RO)(vt),v9=Ro(Ht),m9=it(Yt)($t),g9=fs()(RO)(vt),Po=ew(Xo),FO=G(Dt),xO=kl(Jo),y9=zy(vt)(ed),D9=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$O=function(){function e(){}return e.value=new e,e}(),um=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),LO=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lm=function(e){return e.onElement},C9=function(e){var t=Cn(ri(e.MonadAff1()));return function(n){var a=function(h){return Zt(t(YH(h)))(function(o){return Yb(Os(o))(l9(n)(t(Rp(void 0)(h))))})};return Zt(mf(function(h){return h.lock}))(function(h){return tu(a)(h)})}},b9=function(e){var t=Le(Ln(e.MonadAff1().MonadEffect0()));return function(n){if(n instanceof D9)return Zt(Ir("feed"))(function(a){return $e(vf)(a)(function(h){var o=function(r){return function(){var u=Jl(h)();return ap(u+r)(h)()}};return _s(n.value0(o))})});if(n instanceof sw)return Zt(Ir("feed"))(function(a){return $e(vf)(a)(function(h){return t(function(){var r=Jl(h)();return ap(r+n.value0)(h)(),n.value1})})});if(n instanceof cm)return Zt(Ir("feed"))(function(a){return $e(vf)(a)(function(h){return t(function(){var r=Jl(h)();return n.value0(r)})})});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 90, column 1 - line 92, column 93): "+[n.constructor.name])}},w9=function(e){return e.feedInsert};var HO=function(e){return e.feedBelow},S9=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),a=sm(n),h=HO(e),o=Cn(ri(t)),r=it(n.Applicative0())(gt),l=lm(e);return function(u){var i=Zt(mf(function(s){return s.feedParams.initialElement}))(function(s){return Zt(mf(function(f){return f.feedParams}))(function(f){return Zt(a(h(s)))(function(p){var d=tw(nw)(ow(aw(p)(iw(f.pageSize-1|0))));return Pp(Mn(s))(o(Y_(d)))})})});return Zt(i)(function(s){return Qr(a(r(l)(s)))(function(){return _s({id:0,elements:s,parent:u,pageHeight:0,visibleHeight:0})})})}},E9=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),a=sm(n),h=HO(e),o=Cn(ri(t)),r=it(n.Applicative0())(gt),l=lm(e);return function(u){return function(i){var s=function(f){return Zt(mf(function(p){return p.feedParams}))(function(p){return Zt(a(h(f)))(function(d){var c=tw(nw)(ow(aw(d)(iw(p.pageSize))));return Zt(o(Y_(c)))(function(_){return Qr(a(r(l)(_)))(function(){var v=Gs(_);return _s(v?V.value:new B({id:i.id+1|0,elements:_,parent:u,pageHeight:0,visibleHeight:0}))})})})})};return Pp(uw)(vf(s)(Cl(i.elements)))}}},T9=function(e){return e.feedAbove},OO=function(e){var t=e.MonadAff1(),n=t.MonadEffect0().Monad0(),a=sm(n),h=T9(e),o=Cn(ri(t)),r=it(n.Applicative0())(gt),l=lm(e);return function(u){return function(i){var s=function(f){return Zt(mf(function(p){return p.feedParams}))(function(p){return Zt(a(h(f)))(function(d){var c=tw(nw)(ow(aw(d)(iw(p.pageSize))));return Zt(Pp(rl)(o(Y_(c))))(function(_){return Qr(a(r(l)(_)))(function(){var v=Gs(_);return _s(v?V.value:new B({id:i.id-1|0,elements:_,parent:u,pageHeight:0,visibleHeight:0}))})})})})};return Pp(uw)(vf(s)(Li(i.elements)))}}},M9=function(e){var t=OO(e);return function(n){return Zt(AO)(function(a){var h=Ju(a.preloaded)>a.feedParams.preloadedPages,o=Ju(a.preloaded)<a.feedParams.preloadedPages;return Qr(Yb(o)(function(){var r=Qe(Xa(a.pages))(B.create)(Xa(a.preloaded));return Zt(Pp(uw)(vf(function(l){return t(n)(l.value)})(r)))(function(l){return tu(function(u){return Fa(function(i){var s={};for(var f in i)({}).hasOwnProperty.call(i,f)&&(s[f]=i[f]);return s.preloaded=Zb(u.id)(u)(i.preloaded),s})})(l)})}()))(function(){return Yb(h)(Fa(function(r){var l={};for(var u in r)({}).hasOwnProperty.call(r,u)&&(l[u]=r[u]);return l.preloaded=Qe(r.preloaded)(function(i){return IO(i.key)(r.preloaded)})(Xa(r.preloaded)),l}))})})}},PO=function(e){return{initialElement:e,pageSize:10,hiddenPages:6,preloadedPages:6,deadZone:2,debounce:333,enableTop:!1,preloadMillis:333.3}},kO=function(){return Et.value}(),F9=function(e){var t=M9(e),n=S9(e),a=e.MonadAff1(),h=Cn(ri(a)),o=a.MonadEffect0(),r=sm(o.Monad0()),l=w9(e),u=e.PageElement0().PageOrder0(),i=Dd(u.Ord0()),s=Op(u),f=lm(e),p=mO(u),d=C9(e),c=Le(Ln(o)),_=OO(e),v=E9(e);return function(m){if(m instanceof $O){var y=function(F){return function(b){return function(E){var M=E>=F.preloadedPages;return M?_s(new Bt(E)):Qr(t(b))(function(){return _s(new Pt(E+1|0))})}}},C=function(F){return Zt(n(F))(function(b){return Qr(Fa(function(E){var M={};for(var S in E)({}).hasOwnProperty.call(E,S)&&(M[S]=E[S]);return M.pages=sc(0)(b),M}))(function(){return Zt(mf(function(E){return E.feedParams}))(function(E){return Qr(MO(f9(y(E)(F))(0)))(function(){return Zt(h(d9(UD(E.preloadMillis))(function(){return ZH(void 0)})))(function(M){return Fa(function(S){var x={};for(var L in S)({}).hasOwnProperty.call(S,L)&&(x[L]=S[L]);return x.lock=new B(M),x})})})})})})};return Qr(Zt(Ir("feed"))(tu(C)))(function(){return Zt(r(l))(function(F){return tu(function(b){return MO(Rn(p9(LO.create)(b)))})(F)})})}if(m instanceof LO){var T=function(F){if(F instanceof V)return V.value;if(F instanceof B)return new B(function(){var b={};for(var E in F.value0)({}).hasOwnProperty.call(F.value0,E)&&(b[E]=F.value0[E]);return b.elements=i(Cd(s)(m.value0)(F.value0.elements)),b}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 156, column 5 - line 156, column 33): "+[F.constructor.name])},D=function(F){return function(b){var E={};for(var M in b)({}).hasOwnProperty.call(b,M)&&(E[M]=b[M]);return E.pages=im(T)(F)(b.pages),E.preloaded=im(T)(F)(b.preloaded),E}};return Zt(AO)(function(F){return Qr(r(f(m.value0)))(function(){var b=p(m.value0)(h9(F.preloaded)(F.pages));return Qr(Fa(D(b)))(function(){return _9(kO)(b)(zb.create(m.value0))})})})}if(m instanceof um&&m.value0 instanceof Gb){var g=function(F){if(F instanceof V)return V.value;if(F instanceof B)return new B(function(){var b={};for(var E in F.value0)({}).hasOwnProperty.call(F.value0,E)&&(b[E]=F.value0[E]);return b.pageHeight=m.value0.value0.height,b}());throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 165, column 5 - line 165, column 32): "+[F.constructor.name])},w=function(F){var b={};for(var E in F)({}).hasOwnProperty.call(F,E)&&(b[E]=F[E]);return b.pages=im(g)(m.value0.value0.id)(F.pages),b.preloaded=im(g)(m.value0.value0.id)(F.preloaded),b};return Fa(w)}if(m instanceof um&&m.value0 instanceof Jb)return Qr(Fa(function(F){return Ip(Qb(Kb(m.value0.value0)))(F)}))(function(){return d(Zt(Ir("feed"))(function(F){return $e(tu)(F)(function(b){return Zt(c(Jl(b)))(function(E){return Zt(v9(function(M){return Ip(Qb(wO(M)(m.value0.value0)))(M)}))(function(M){return Qr(c(m9(function(S){return ap(E+S)(b)})(M.update.scroll)))(function(){return Qr(Ur(M))(function(){return Qr(Fa(function(S){var x={};for(var L in S)({}).hasOwnProperty.call(S,L)&&(x[L]=S[L]);return x.update={topLoad:V.value,bottomLoad:V.value,scroll:V.value},x}))(function(){return Qr($e(tu)(M.update.topLoad)(function(S){return Zt(_(b)(S.value))(function(x){return tu(function(L){return Fa(function(R){var A={};for(var I in R)({}).hasOwnProperty.call(R,I)&&(A[I]=R[I]);return A.preloaded=Zb(L.id)(L)(M.preloaded),A})})(x)})}))(function(){return Qr($e(tu)(M.update.bottomLoad)(function(S){return Zt(v(b)(S.value))(function(x){return tu(function(L){return Fa(function(R){var A={};for(var I in R)({}).hasOwnProperty.call(R,I)&&(A[I]=R[I]);return A.pages=Zb(L.id)(L)(R.pages),A})})(x)})}))(function(){return h(UD(M.feedParams.debounce))})})})})})})})})}))});if(m instanceof um&&m.value0 instanceof jb)return Fa(function(F){var b={};for(var E in F)({}).hasOwnProperty.call(F,E)&&(b[E]=F[E]);return b.pages=IO(m.value0.value0)(F.pages),b});throw new Error("Failed pattern match at Halogen.Infinite.Scroll (line 120, column 1 - line 122, column 99): "+[m.constructor.name])}},x9=function(e){var t=_O(e.PageElement0());return function(n){var a=function(u){return g9(kO)(u.value0)(t)(u.value1)(um.create)},h=fn([ui("feed"),Un(Po(hD(et(-50)))(function(){return Po(pD(et(50)))(function(){return Po(Oo(xl(100)))(function(){return Qv(Kv)})})}))])(FO(a)(xO(n.pages))),o=fn([Un(Po(hD(et(-50)))(function(){return Po(pD(et(50)))(function(){return Po(Oo(xl(100)))(function(){return Po(Ho(-1))(function(){return Po(lr(zu))(function(){return Yo(xl(-100))})})})})}))])([]),r=function(u){return fn([Un(Po(Ho(-2-y9(u.value0)|0))(function(){return Po(L_(0))(function(){return lr(zu)})}))])([a(u)])},l=fn([Un(Po(Ho(-2))(function(){return lr(zu)}))])(FO(r)(xO(n.preloaded)));return fn([Un(Po(Ca(xl(100)))(function(){return Po(Oo(xl(100)))(function(){return Mc(Ap)})}))])([h,o,l])}},NO=function(e){return function(t){return ln({initialState:function(n){return{feedParams:n,pages:dr,preloaded:dr,lock:V.value,update:{topLoad:V.value,bottomLoad:V.value,scroll:V.value}}},render:x9(t),eval:cn({receive:dt.receive,finalize:dt.finalize,handleAction:F9(t),handleQuery:b9(t),initialize:new B($O.value)})})}};var fm={suspend:ZA,fork:BD,join:zd,Monad0:function(){return ei},Functor1:function(){return aI}};var dm=function(e){return e.fork};var WO=ne,xa=ne,UO=function(e){var t=it(e)($t);return function(n){return xa(function(a){return t(n)(a.rendering)})}},A9=ne,qO=function(e){return function(t){return xa(function(n){return A9(t(n.rendering))})}},I9=ne,pm=function(e){return function(t){return e(t)}},VO=function(e){return function(t){return function(n){return function(a){return function(){var o=an({})(),r=an(ns)(),l=an(ns)(),u=an(n)(),i=an(new B(Ye.value))(),s=an(new B(Ye.value))(),f=an(V.value)(),p=an(1)(),d=an(new B(dr))(),c=an(dr)(),_={component:e,state:e.initialState(t),refs:dr,children:ns,childrenIn:r,childrenOut:l,selfRef:o,handlerRef:u,pendingQueries:i,pendingOuts:s,pendingHandlers:f,rendering:V.value,fresh:p,subscriptions:d,forks:c,lifecycleHandlers:a};return Ut(_)(o)(),I9(o)}}}}};var R9=it(Yt)($t),$9=bn(Pr),H9=ea(eb),Hn=Z(jt),Qt=Le(Dn),O9=ot(at),La=O9(jt),QO=it(Wr),P9=QO(Wn),XO=dm(fm),k9=Ul(Zu)(fc)(Wn),li=X(Wr),N9=G(eC),zO=qi(Zu),B9=G(xr),GO=cc(Zu),W9=G(mt),U9=Br(eb),q9=WR(fc),V9=Ya(Ov),z9=JM(Ua),G9=Br(Ov),JO=QO($t),jO=ea(Ov),J9=ea(Vt),j9=r$(es),K9=Ku(Vt),Q9=function(e){return function(t){return function(){var a=Ke(t)(),h=Ke(a.subscriptions)();return R9(Lv)($9(H9(e))(h))()}}},hm=function(e){return function(t){return Hn(Qt(Ke(e)))(function(n){if(n instanceof V)return t;if(n instanceof B)return Qt(Ut(new B(new Xe(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},_m=function(e){return function(t){return La(Qt(Ut({initializers:Ye.value,finalizers:Ye.value})(e)))(function(){return Hn(Qt(t))(function(n){return Hn(Qt(Ke(e)))(function(a){return La(P9(XO)(a.finalizers))(function(){return La(k9(a.initializers))(function(){return li(n)})})})})})}},Ic=Jd(wn(yo)(ve(X(Yt)(void 0)))),KO=function(e){return function(t){return Hn(Qt(Ke(t)))(function(n){return Qt(Xy(function(a){return{state:a+1|0,value:e(a)}})(n.fresh))})}},lw=function(e){return function(t){return function(n){return Hn(Qt(Ke(t)))(function(a){return vs(e)(t)(a.component.eval(new of(N9(B.create)(aR(n)),ve(V.value))))})}}},vs=function(e){return function(t){return function(n){var a=function(o){return function(r){return Hn(Qt(Ke(o)))(function(l){return a$(function(u){var i=function(s){return zO(Hn(Qt(Ke(s)))(function(f){return xa(function(p){return lw(e)(p.selfRef)(u.value1)})(f)}))};return B9(u.value2)(GO(u.value0(fc)(i)(l.children)))})(r)})}},h=function(o){return function(r){if(r instanceof _p)return Hn(Qt(Ke(o)))(function(l){var u=r.value0(l.state);if(Ql(l.state)(u.value1))return li(u.value0);if(dn)return La(Qt(Ut({component:l.component,refs:l.refs,children:l.children,childrenIn:l.childrenIn,childrenOut:l.childrenOut,selfRef:l.selfRef,handlerRef:l.handlerRef,pendingQueries:l.pendingQueries,pendingOuts:l.pendingOuts,pendingHandlers:l.pendingHandlers,rendering:l.rendering,fresh:l.fresh,subscriptions:l.subscriptions,forks:l.forks,lifecycleHandlers:l.lifecycleHandlers,state:u.value1})(o)))(function(){return La(_m(l.lifecycleHandlers)(e(l.lifecycleHandlers)(o)))(function(){return li(u.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[u.constructor.name])});if(r instanceof vp)return Hn(KO(l$)(o))(function(l){return Hn(Qt(c$(r.value0(l))(function(u){return Ic(fw(e)(o)(new hc(u)))})))(function(u){return Hn(Qt(Ke(o)))(function(i){return La(Qt(no(W9(U9(l)(u)))(i.subscriptions)))(function(){return li(r.value1(l))})})})});if(r instanceof mp)return La(Qt(Q9(r.value0)(o)))(function(){return li(r.value1)});if(r instanceof Dc)return r.value0;if(r instanceof gp)return a(o)(r.value0);if(r instanceof yp)return Hn(Qt(Ke(o)))(function(l){return Hn(Qt(Ke(l.handlerRef)))(function(u){return La(hm(l.pendingOuts)(u(r.value0)))(function(){return li(r.value1)})})});if(r instanceof Av)return GO(q9(jC(function(){var l=vs(e)(o);return function(u){return zO(l(u))}}())(r.value0)));if(r instanceof Iv)return Hn(KO(f$)(o))(function(l){return Hn(Qt(Ke(o)))(function(u){return Hn(Qt(an(!1)))(function(i){return Hn(XO(Vd(Qt(function(){return no(V9(l))(u.forks)(),Ut(!0)(i)()}))(vs(e)(o)(r.value0))))(function(s){return La(Qt(z9(Ke(i))(no(G9(l)(s))(u.forks))))(function(){return li(r.value1(l))})})})})});if(r instanceof Rv)return Hn(Qt(Ke(o)))(function(l){return Hn(Qt(Ke(l.forks)))(function(u){return La(JO(zd)(jO(r.value0)(u)))(function(){return li(r.value1)})})});if(r instanceof $v)return Hn(Qt(Ke(o)))(function(l){return Hn(Qt(Ke(l.forks)))(function(u){return La(JO(Gd(rr("Cancelled")))(jO(r.value0)(u)))(function(){return li(r.value1)})})});if(r instanceof Dp)return Hn(Qt(Ke(o)))(function(l){return li(r.value1(J9(r.value0)(l.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[r.constructor.name])}};return j9(h(t))(n)}}},fw=function(e){return function(t){return function(n){if(n instanceof av)return Qt($e(no)(t)(pm(function(a){return{component:a.component,state:a.state,children:a.children,childrenIn:a.childrenIn,childrenOut:a.childrenOut,selfRef:a.selfRef,handlerRef:a.handlerRef,pendingQueries:a.pendingQueries,pendingOuts:a.pendingOuts,pendingHandlers:a.pendingHandlers,rendering:a.rendering,fresh:a.fresh,subscriptions:a.subscriptions,forks:a.forks,lifecycleHandlers:a.lifecycleHandlers,refs:K9(ve(n.value1))(n.value0)(a.refs)}})));if(n instanceof hc)return Hn(Qt(Ke(t)))(function(a){return vs(e)(t)(a.component.eval(new rf(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var Y9=Z(wr),Z9=ot(at),oP=e_(Yt)($t),aP=it(Wr)(Wn),iP=dm(fm),Np=bn(wr),uP=it(Yt),sP=uP($t),YO=uP(Bi),ZO=Z9(jt),eJ=Ul(Zu)(fc)(Wn),kp=Le(Dn),eP=X(Yt),dw=G(Pe),pw=X(Wr),hw=An(Yt),tJ=qO(Pe),nJ=ut(xr),tP=ov(Yt),rJ=UO(Yt),oJ=mn(jh),aJ=Zc(Pe),_w=Z(jt),iJ=Le(Rl),nP=function(){return an({initializers:Ye.value,finalizers:Ye.value})}(),rP=function(e){return function(){var n=Ke(e)();return Ut(V.value)(e)(),oP(n)(function(){var a=aP(iP);return function(h){return Ic(a(Vi(h)))}}())()}},uJ=function(e){return function(){return Np(sP(YO(Lv)))(Ke(e.subscriptions))(),Ut(V.value)(e.subscriptions)(),Np(YO(function(){var n=Gd(rr("finalized"));return function(a){return Ic(n(a))}}()))(Ke(e.forks))(),Ut(dr)(e.forks)()}},cP=function(e){return function(t){return function(n){var a=function(s){return function(f){return xa(function(p){var d=vs(r)(p.selfRef)(p.component.eval(new ef(void 0)));return no(function(c){return{initializers:new Xe(ZO(eJ(Vi(c.initializers)))(function(){return ZO(d)(function(){return kp(function(){return rP(p.pendingQueries)(),rP(p.pendingOuts)()})})}),f),finalizers:c.finalizers}})(s)})}},h=function(s){return function(f){return function(p){return ab(function(d){return function(){var _=nP(),v=VO(d)(p)(f)(_)(),m=Ke(s)();return Ut({initializers:Ye.value,finalizers:m.finalizers})(s)(),Np(xa(function(){var y=r(s);return function(C){return y(function(T){return T.selfRef}(C))}}()))(Ke(v))(),Np(a(s)(m.initializers))(Ke(v))(),v}})}}},o=function(s){return function(f){return function(p){return function(d){return ob(function(c){return function(){var v=dw(c.pop)(Ke(p))(),m=function(){if(v instanceof B){Ut(v.value0.value1)(p)();var C=Ke(v.value0.value0)();return xa(function(T){return function(){return $e(Ut)(T.handlerRef)(function(){var g=Qe(pw(void 0))(f);return function(w){return g(c.output(w))}}())(),Ic(vs(r)(T.selfRef)(T.component.eval(new nf(c.input,void 0))))()}})(C)(),v.value0.value0}if(v instanceof V)return h(s)(function(){var T=Qe(pw(void 0))(f);return function(D){return T(c.output(D))}}())(c.input)(c.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[v.constructor.name])}(),y=dw(function(C){return Os(c.get(C))})(Ke(d))();return hw(y)(Kd("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),no(c.set(m))(d)(),Y9(Ke(m))(tJ(function(C){if(C instanceof V)return tD("Halogen internal error: child was not initialized in renderChild");if(C instanceof B)return eP(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},r=function(s){return function(f){return function(){var d=Ke(f)(),c=dw(bu)(Ke(d.pendingHandlers))();hw(c)(Ut(new B(Ye.value))(d.pendingHandlers))(),Ut(ns)(d.childrenOut)(),Ut(d.children)(d.childrenIn)();var _=function(){var T=hm(d.pendingHandlers),D=fw(r)(d.selfRef);return function(g){return T(nJ(D(g)))}}(),v=function(){var T=hm(d.pendingQueries);return function(D){return T(_(hc.create(D)))}}(),m=e.render(function(T){return Ic(_(T))})(o(s)(v)(d.childrenIn)(d.childrenOut))(d.component.render(d.state))(d.rendering)(),y=Ke(d.childrenOut)(),C=Ke(d.childrenIn)();return tP(C)(function(T){return function(){var g=Ke(T)();return rJ(e.removeChild)(g)(),l(s)(g)()}})(),$e(no)(d.selfRef)(pm(function(T){return{component:T.component,state:T.state,refs:T.refs,childrenIn:T.childrenIn,childrenOut:T.childrenOut,selfRef:T.selfRef,handlerRef:T.handlerRef,pendingQueries:T.pendingQueries,pendingOuts:T.pendingOuts,pendingHandlers:T.pendingHandlers,fresh:T.fresh,subscriptions:T.subscriptions,forks:T.forks,lifecycleHandlers:T.lifecycleHandlers,rendering:new B(m),children:y}}))(),hw(c)($e(oJ)(void 0)(function(T){return function(){var g=Ke(d.pendingHandlers)();Ut(new B(Ye.value))(d.pendingHandlers)(),sP(function(){var b=aP(iP);return function(E){return Ic(b(Vi(E)))}}())(g)();var w=Ke(d.pendingHandlers)(),F=Qe(!1)(UI)(w);return F?aJ(Ut(V.value)(d.pendingHandlers))(new Bt(void 0))():new Pt(void 0)}}))()}}},l=function(s){return xa(function(f){return function(){uJ(f)();var d=vs(r)(f.selfRef)(f.component.eval(new tf(void 0)));return no(function(c){return{initializers:c.initializers,finalizers:new Xe(d,c.finalizers)}})(s)(),tP(f.children)(function(c){return function(){var v=Ke(c)();return l(s)(v)()}})()}})},u=function(s){return function(f){return function(p){return _w(kp(Ke(s)))(function(d){return d?pw(V.value):lw(r)(f)(p)})}}},i=function(s){return function(f){return function(p){return _m(f)(function(){var c=Ke(s)();return c?void 0:(Ut(!0)(s)(),l(f)(p)(),xa(function(_){return function(){var m=iJ(Ke(_.selfRef))();return oP(m.rendering)(e.dispose)()}})(p)())})}}};return _w(kp(nP))(function(s){return _w(kp(an(!1)))(function(f){return _m(s)(function(){var d=jn(),c=Np(Ke)(h(s)(function(){var _=Jn(d.listener);return function(v){return kp(_(v))}}())(n)(t))();return xa(function(_){return eP({query:u(f)(_.selfRef),messages:d.emitter,dispose:i(f)(s)(c)})})(c)()})})})}}};var Aa=function(e){return function(t){return function(){return t[e]}}};var cJ=Aa("baseURI"),lJ=Aa("ownerDocument"),lP=Aa("parentNode"),fJ=Aa("parentElement");var dJ=Aa("childNodes"),pJ=Aa("firstChild"),hJ=Aa("lastChild"),_J=Aa("previousSibling"),fP=Aa("nextSibling"),vJ=Aa("nodeValue");var mJ=Aa("textContent");function vw(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function vm(e){return function(t){return function(){t.appendChild(e)}}}function mw(e){return function(t){return function(){t.removeChild(e)}}}var dP=G(Pe);var gw=function(){var e=dP(un);return function(t){return e(lP(t))}}();var pP=function(){var e=dP(un);return function(t){return e(fP(t))}}();var yw=function(e,t,n){var a=0,h;return function(o){if(a===2)return h;if(a===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+o+")",t,o);return a=1,h=n(),a=2,h}},Dw=ut(Pe),bJ=X(Yt),wJ=it(Yt)($t),SJ=In(),EJ=An(Yt),TJ=pa(cd(cd(da))),MJ=he(_e),FJ=Z(jt),xJ=Le(Dn),LJ=G(Pe),AJ=bn(wr);var IJ=function(e){return function(t){return function(n){return t instanceof B&&n instanceof B?Dw(vw(e)(t.value0)(n.value0)):t instanceof V&&n instanceof B?Dw(vm(e)(n.value0)):bJ(void 0)}}},hP=function(e){return function(){var n=gw(e.node)();return wJ(function(a){return mw(e.node)(a)})(n)()}},RJ=function(e){return function(t){return function(n){var a=WO(function(l){return l.node}),h=function(l){return l instanceof B?bo(l.value0):void 0},o=function(l){var u=p$(SJ)(l),i=yw("patch","Halogen.VDom.Driver",function(){return function(_,v){if(_ instanceof B){if(v instanceof af)return bo(_.value0),f(100)(v.value0);if(v instanceof Nv){var m=Co(_.value0,v.value0);return xn(new Fn(Lr(m),new B(m),i(103),h))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[v.constructor.name])}return s(104)(v)}}),s=yw("render","Halogen.VDom.Driver",function(){return function(_){if(_ instanceof af)return f(86)(_.value0);if(_ instanceof Nv){var v=u(_.value0);return xn(new Fn(Lr(v),new B(v),i(89),h))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[_.constructor.name])}}),f=yw("renderComponentSlot","Halogen.VDom.Driver",function(){return function(_){var v=Ke(t)(),m=v(_)(),y=a(m);return xn(new Fn(y,V.value,i(117),h))}}),p=i(91),d=s(82),c=f(109);return d},r=SR(e);return{buildWidget:o,buildAttributes:r,document:n}}}},$J=function(e){return function(t){var n=function(a){return function(h){return function(o){return function(r){if(r instanceof V)return function(){var u=an(h)(),i=RJ(a)(u)(e),s=up(i)(o),f=Lr(s);return Dw(vm(f)(aH(t)))(),{machine:s,node:f,renderChildRef:u}};if(r instanceof B)return function(){Ut(h)(r.value0.renderChildRef)();var u=gw(r.value0.node)(),i=pP(r.value0.node)(),s=Co(r.value0.machine,o),f=Lr(s);return EJ(TJ(Ql)(r.value0.node)(f))(IJ(f)(i)(u))(),{machine:s,node:f,renderChildRef:r.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[r.constructor.name])}}}};return{render:n,renderChild:MJ,removeChild:hP,dispose:hP}}},Cw=function(e){return function(t){return function(n){return FJ(xJ(LJ(tH)(AJ(ff)(oa))))(function(a){return cP($J(a)(n))(e)(t)})}}};var OJ=G(Ki),PJ=G($n),kJ=yn(G_(Dr)),NJ=ov(jd(Dr)),BJ=fs(),WJ=rv(),UJ=qr(),qJ=tv(),bw=function(){function e(){}return e.value=new e,e}(),ww=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Sw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vP=function(e){return e},Bp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Wp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Up=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var VJ={lift:function(e){return function(t){return vP(ft(Wp.create(t)))}}},mP=bt(VJ),zJ=Kl;var gf=function(e){return{liftEffect:function(){var t=mP(e.Monad0()),n=Le(e);return function(a){return t(n(a))}}(),Monad0:function(){return zJ}}},gP=function(e){var t=e.MonadEffect0(),n=gf(t);return{liftAff:function(){var a=mP(t.Monad0()),h=Cn(e);return function(o){return a(h(o))}}(),MonadEffect0:function(){return n}}},yP=Ki,DP=function(e){var t=G(e);return{map:function(n){return function(a){if(a instanceof Bp)return new Bp(OJ(n)(a.value0));if(a instanceof Wp)return new Wp(t(n)(a.value0));if(a instanceof Up)return new Up(function(h){return n(a.value0(h))});if(a instanceof qp)return new qp(a.value0,n(a.value1));if(a instanceof Vp)return new Vp(a.value0,n(a.value1));if(a instanceof mm)return new mm(a.value0,n(a.value1));if(a instanceof zp)return new zp(PJ(n)(a.value0));if(a instanceof gm)return new gm(function(h){return n(a.value0(h))});if(a instanceof Gp)return new Gp(a.value0,n(a.value1));throw new Error("Failed pattern match at Halogen.XShell.Free (line 71, column 1 - line 80, column 60): "+[n.constructor.name,a.constructor.name])}}}},Rc=ir,GJ=Z(Rc),CP=pp,ms=hr,Nt=function(e){return vP(ft(Bp.create(e)))},bP=function(e){var t=function(n){return kJ(Mn(n.window))};return Ip(NJ(e)(t))([])},wP=function(e){return ft(new qp(e,void 0))};var SP=function(e){return ft(new Gp(e,void 0))},Ew=function(){return function(e){var t=BJ(e),n=WJ(e);return function(a){var h=t(a),o=n(a);return function(){return function(r){return function(l){return function(u){return function(i){return function(s){var f=h(r)(l)(u)(i)(function(p){return Sw.create(s(p))});return SP(o(r)(l)({window:f}))}}}}}}}}},JJ=function(e){return ft(new zp(e))},Tw=function(){return function(e){var t=UJ(e);return function(n){var a=t(n);return function(){return function(h){return function(o){return function(r){return JJ(a(h)(o)(r))}}}}}}},Ia=function(e){return ft(new Vp(e,void 0))},So=function(){return ft(new Up(he(_e)))}(),On=function(e){return GJ(So)(function(t){return wP(e(t))})},Mw=function(){return function(e){var t=qJ(e);return function(n){var a=t(n);return function(){return function(h){return function(o){return SP(function(r){return Qe(r)(hn)(a(h)(o)(r))})}}}}}};var QJ=Mt(zn),XJ=Jt(Ru);var Fw=XJ(QJ("background-color"));var Wt=Mt(nr),EP=function(){function e(){}return e.value=new e,e}(),ZJ=function(){function e(){}return e.value=new e,e}(),TP=function(){function e(){}return e.value=new e,e}(),ej=function(){function e(){}return e.value=new e,e}(),tj=function(){function e(){}return e.value=new e,e}(),nj=function(){function e(){}return e.value=new e,e}(),MP=function(){function e(){}return e.value=new e,e}(),xw=function(){function e(){}return e.value=new e,e}(),rj=function(){function e(){}return e.value=new e,e}(),oj=function(){function e(){}return e.value=new e,e}(),aj=function(){function e(){}return e.value=new e,e}(),ij=function(){function e(){}return e.value=new e,e}(),uj=function(){function e(){}return e.value=new e,e}(),sj=function(){function e(){}return e.value=new e,e}(),cj=function(){function e(){}return e.value=new e,e}(),lj=function(){function e(){}return e.value=new e,e}(),fj=function(){function e(){}return e.value=new e,e}(),dj=function(){function e(){}return e.value=new e,e}(),pj=function(){function e(){}return e.value=new e,e}(),hj=function(){function e(){}return e.value=new e,e}(),_j=function(){function e(){}return e.value=new e,e}(),vj=function(){function e(){}return e.value=new e,e}(),mj=function(){function e(){}return e.value=new e,e}(),gj=function(){function e(){}return e.value=new e,e}(),yj=function(){function e(){}return e.value=new e,e}(),Dj=function(){function e(){}return e.value=new e,e}(),Cj=function(){function e(){}return e.value=new e,e}(),bj=function(){function e(){}return e.value=new e,e}(),wj=function(){function e(){}return e.value=new e,e}(),Sj=function(){function e(){}return e.value=new e,e}(),Ej=function(){function e(){}return e.value=new e,e}(),Tj=function(){function e(){}return e.value=new e,e}(),Mj=function(){function e(){}return e.value=new e,e}();var Fj={value:function(e){if(e instanceof EP)return Wt("default");if(e instanceof ZJ)return Wt("help");if(e instanceof TP)return Wt("pointer");if(e instanceof ej)return Wt("progress");if(e instanceof tj)return Wt("wait");if(e instanceof nj)return Wt("cell");if(e instanceof MP)return Wt("crosshair");if(e instanceof xw)return Wt("text");if(e instanceof rj)return Wt("vertical-text");if(e instanceof oj)return Wt("alias");if(e instanceof aj)return Wt("copy");if(e instanceof ij)return Wt("move");if(e instanceof uj)return Wt("no-drop");if(e instanceof sj)return Wt("not-allowed");if(e instanceof cj)return Wt("grab");if(e instanceof lj)return Wt("grabbing");if(e instanceof fj)return Wt("all-scroll");if(e instanceof dj)return Wt("col-resize");if(e instanceof pj)return Wt("row-resize");if(e instanceof hj)return Wt("n-resize");if(e instanceof _j)return Wt("e-resize");if(e instanceof vj)return Wt("s-resize");if(e instanceof mj)return Wt("w-resize");if(e instanceof gj)return Wt("ne-resize");if(e instanceof yj)return Wt("nw-resize");if(e instanceof Dj)return Wt("se-resize");if(e instanceof Cj)return Wt("sw-resize");if(e instanceof bj)return Wt("ew-resize");if(e instanceof wj)return Wt("ns-resize");if(e instanceof Sj)return Wt("nesw-resize");if(e instanceof Ej)return Wt("nwse-resize");if(e instanceof Tj)return Wt("zoom-in");if(e instanceof Mj)return Wt("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var Lw=function(){return TP.value}();var Aw=function(){return EP.value}(),$c=Jt(Fj)(Mt(zn)("cursor")),FP=function(){return MP.value}();var Lj=Mt(zn);var xP=Jt(Ru)(Lj("color"));var Iw=Mt(nr),Ij=Mt(zn);var Rj={value:function(e){return e}},LP=Iw("underline"),Dm=Jt(Rj)(Ij("text-decoration")),AP=Iw("overline");var IP=Iw("line-through");var be=ot(at)(Xo),Kn=Jt($u),qn=Mt(zn),Hj=sD($u),Oj=De(Ml),Pj=Mt(b_),kj=Jt(tc),Rw=function(){var e=lt(qt)(yt("xterm")),t=lt(qt)(yt("xterm-viewport")),n=be(Ft(lt(qt)(yt("xterm-underline-1")))(Dm(LP)))(function(){return be(Ft(lt(qt)(yt("xterm-underline-2")))(Kn(qn("text-decoration"))("double underline")))(function(){return be(Ft(lt(qt)(yt("xterm-underline-3")))(Kn(qn("text-decoration"))("wavy underline")))(function(){return be(Ft(lt(qt)(yt("xterm-underline-4")))(Kn(qn("text-decoration"))("dotted underline")))(function(){return Ft(lt(qt)(yt("xterm-underline-5")))(Kn(qn("text-decoration"))("dashed underline"))})})})}),a=lt(qt)(yt("xterm-scroll-area")),h=lt(qt)(yt("xterm-screen")),o=lt(qt)(yt("xterm-decoration-overview-ruler")),r=be(Ft(lt(qt)(yt("xterm-overline")))(Dm(AP)))(function(){return be(Ft(lt(lt(qt)(yt("xterm-underline-1")))(yt("xterm-overline")))(Kn(qn("text-decoration"))("overline underline")))(function(){return be(Ft(lt(lt(qt)(yt("xterm-underline-2")))(yt("xterm-overline")))(Kn(qn("text-decoration"))("overline double underline")))(function(){return be(Ft(lt(lt(qt)(yt("xterm-underline-3")))(yt("xterm-overline")))(Kn(qn("text-decoration"))("overline wavy underline")))(function(){return be(Ft(lt(lt(qt)(yt("xterm-underline-4")))(yt("xterm-overline")))(Kn(qn("text-decoration"))("overline dotted underline")))(function(){return Ft(lt(lt(qt)(yt("xterm-underline-5")))(yt("xterm-overline")))(Kn(qn("text-decoration"))("overline dashed underline"))})})})})}),l=lt(qt)(yt("xterm-message")),u=lt(qt)(yt("live-region")),i=lt(qt)(yt("xterm-helper-textarea")),s=lt(qt)(yt("xterm-helpers")),f=lt(qt)(yt("xterm-dim")),p=lt(qt)(yt("xterm-decoration-top")),d=lt(qt)(yt("xterm-decoration-container")),c=lt(qt)(yt("xterm-decoration")),_=lt(qt)(yt("composition-view")),v=lt(qt)(yt("xterm-char-measure-element")),m=be(lr(Da))(function(){return be(Ni(et(0)))(function(){return be(Yo(et(0)))(function(){return be(_D(et(0)))(function(){return be(A_(et(0)))(function(){return be(Ho(10))(function(){return be(Kn(qn("color"))("transparent"))(function(){return Kn(qn("pointer-events"))("none")})})})})})})}),y=lt(qt)(yt("xterm-accessibility"));return be(Ft(e)(be($c(xw.value))(function(){return be(lr(zu))(function(){return Hj(Oj(Ad)(Pj("user-select")))("none")})})))(function(){return be(Ft(lt(e)(yt("focus")))(Kn(qn("outline"))("none")))(function(){return be(Ft(lt(e)(BL("focus")))(Kn(qn("outline"))("none")))(function(){return be(Ft(Gn(e)(s))(be(lr(Da))(function(){return be(Yo(et(0)))(function(){return Ho(5)})})))(function(){return be(Ft(Gn(e)(i))(be(I_(et(0))(et(0))(et(0))(et(0)))(function(){return be(kj(qn("border"))(0))(function(){return be(pA(et(0))(et(0))(et(0))(et(0)))(function(){return be(lr(Da))(function(){return be(L_(0))(function(){return be(Ni(Q0(-9999)))(function(){return be(Yo(et(0)))(function(){return be(Ca(et(0)))(function(){return be(Oo(et(0)))(function(){return be(Ho(-5))(function(){return be(Kn(qn("whitespace"))("nowrap"))(function(){return be(Mc(Ap))(function(){return Kn(qn("resize"))("none")})})})})})})})})})})})})))(function(){return be(Ft(Gn(e)(_))(be(Fw(Ga))(function(){return be(xP(EL))(function(){return be(ya(aA))(function(){return be(lr(Da))(function(){return be(Kn(qn("white-space"))("nowrap"))(function(){return Ho(1)})})})})})))(function(){return be(Ft(Gn(e)(lt(_)(yt("active"))))(ya(iA)))(function(){return be(Ft(Gn(e)(t))(be(Fw(Ga))(function(){return be(Qv(Kv))(function(){return be($c(Aw))(function(){return be(lr(Da))(function(){return be(A_(et(0)))(function(){return be(Ni(et(0)))(function(){return be(Yo(et(0)))(function(){return _D(et(0))})})})})})})})))(function(){return be(Ft(Gn(e)(h))(lr(zu)))(function(){return be(Ft(Gn(e)(Gn(h)(E_("canvas"))))(be(lr(Da))(function(){return be(Ni(et(0)))(function(){return Yo(et(0))})})))(function(){return be(Ft(Gn(e)(a))(Kn(qn("visibility"))("hidden")))(function(){return be(Ft(v)(be(ya(oA))(function(){return be(Kn(qn("visibility"))("hidden"))(function(){return be(lr(Da))(function(){return be(Yo(et(0)))(function(){return be(Ni(Q0(-9999)))(function(){return Kn(qn("line-height"))("normal")})})})})})))(function(){return be(Ft(lt(e)(yt("enable-mouse-events")))($c(Aw)))(function(){return be(Ft(lt(e)(yt("xterm-cursor-pointer")))($c(Lw)))(function(){return be(Ft(Gn(e)(lt(qt)(yt("xterm-cursor-pointer"))))($c(Lw)))(function(){return be(Ft(lt(lt(e)(yt("column-select")))(yt("focus")))($c(FP)))(function(){return be(Ft(Gn(e)(y))(m))(function(){return be(Ft(Gn(e)(l))(m))(function(){return be(Ft(Gn(e)(u))(be(lr(Da))(function(){return be(Ni(et(-9999)))(function(){return be(Ca(et(1)))(function(){return be(Oo(et(1)))(function(){return Mc(Ap)})})})})))(function(){return be(Ft(f)(Kn(qn("opacity"))("1 !important")))(function(){return be(n)(function(){return be(r)(function(){return be(Ft(lt(qt)(yt("xterm-strikethrough")))(Dm(IP)))(function(){return be(Ft(Gn(Gn(h)(d))(c))(be(Ho(6))(function(){return lr(Da)})))(function(){return be(Ft(Gn(Gn(h)(d))(lt(c)(yt("xterm-decoration-top-layer"))))(Ho(7)))(function(){return be(Ft(o)(be(Ho(8))(function(){return be(lr(Da))(function(){return be(Yo(et(0)))(function(){return be(A_(et(0)))(function(){return Kn(qn("pointer-events"))("none")})})})})))(function(){return Ft(p)(be(Ho(2))(function(){return lr(zu)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var RP=e=>()=>e.type,$w=e=>()=>e.cursorY,Hw=e=>()=>e.cursorX,Ow=e=>()=>e.viewportY,Pw=e=>()=>e.baseY,kw=e=>()=>e.length,$P=e=>t=>()=>e.getLine(t),Nw=e=>()=>e.getNullCell();var yf=function(e){return sp(e)?V.value:new B(bv(e))};var Wj=G(Pe),Uj=function(){function e(){}return e.value=new e,e}(),qj=function(){function e(){}return e.value=new e,e}(),HP=function(e){return function(t){return Wj(yf)($P(e)(t))}},OP=function(e){return function(){var n=RP(e)();return n==="normal"?Uj.value:qj.value}};var Ww=e=>()=>e.isWrapped,Uw=e=>()=>e.length;var Em=he(_e),fi=G(Pe),qw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Jw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Sm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jj={map:function(e){return function(t){if(t instanceof qw)return new qw(function(n){return e(t.value0(n))});if(t instanceof Cm)return new Cm(function(n){return e(t.value0(n))});if(t instanceof Vw)return new Vw(function(n){return e(t.value0(n))});if(t instanceof zw)return new zw(function(n){return e(t.value0(n))});if(t instanceof Gw)return new Gw(function(n){return e(t.value0(n))});if(t instanceof bm)return new bm(function(n){return e(t.value0(n))});if(t instanceof wm)return new wm(t.value0,function(n){return e(t.value1(n))});if(t instanceof Jw)return new Jw(t.value0,function(n){return e(t.value1(n))});if(t instanceof Sm)return new Sm(t.value0,function(n){return e(t.value1(n))});if(t instanceof jw)return new jw(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},jj=na(Jj);var PP=function(e){var t=e.Monad0(),n=Z(Wi(t.Bind1())),a=Mr(Xu(t)),h=Le(Za(e));return function(o){var r=function(l){if(l instanceof qw)return n(a)(function(u){return h(fi(l.value0)(OP(u)))});if(l instanceof Cm)return n(a)(function(u){return h(fi(l.value0)(Hw(u)))});if(l instanceof Vw)return n(a)(function(u){return h(fi(l.value0)($w(u)))});if(l instanceof zw)return n(a)(function(u){return h(fi(l.value0)(Ow(u)))});if(l instanceof Gw)return n(a)(function(u){return h(fi(l.value0)(Pw(u)))});if(l instanceof bm)return n(a)(function(u){return h(fi(l.value0)(kw(u)))});if(l instanceof wm)return n(a)(function(u){return h(fi(l.value1)(HP(u)(l.value0)))});if(l instanceof Jw)return h(fi(l.value1)(Ww(l.value0)));if(l instanceof Sm)return h(fi(l.value1)(Uw(l.value0)));if(l instanceof jw)return n(a)(function(u){return h(fi(l.value0)(Nw(u)))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 19, column 5 - line 21, column 40): "+[l.constructor.name])};return jj(Yu(o))(r)}},Kw=function(e){return ft(new Sm(e,Em))};var Qw=function(e){return ft(new wm(e,Em))};var Xw=function(){return ft(new Cm(Em))}();var Yw=function(){return ft(new bm(Em))}();var Zw=e=>()=>e.cursorBlink,eS=e=>t=>()=>e.cursorBlink=t,tS=e=>()=>e.fontFamily,nS=e=>t=>()=>e.fontFamily=t;var NP=Zi("fontFamily");var BP=Zi("cursorBlink");var UP=G(Pe),tK=ot(at),qP=he(_e),Tm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rS=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),nK={map:function(e){return function(t){if(t instanceof Tm)return new Tm(function(n){return e(t.value0(n))});if(t instanceof Mm)return new Mm(t.value0,e(t.value1));if(t instanceof Fm)return new Fm(function(n){return e(t.value0(n))});if(t instanceof rS)return new rS(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},rK=na(nK);var Ra=function(e){return ft(new Mm(e,void 0))},VP=function(e){var t=e.Monad0(),n=Wi(t.Bind1()),a=Z(n),h=Mr(Xu(t)),o=Le(Za(e)),r=tK(n),l=X(qd(t.Applicative0()));return function(u){var i=function(s){if(s instanceof Tm)return a(h)(function(f){return o(UP(s.value0)(Zw(f)))});if(s instanceof Mm)return a(h)(function(f){return r(o(eS(f)(s.value0)))(function(){return l(s.value1)})});if(s instanceof Fm)return a(h)(function(f){return o(UP(s.value0)(tS(f)))});if(s instanceof rS)return a(h)(function(f){return r(o(nS(f)(s.value0)))(function(){return l(s.value1)})});throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 19, column 5 - line 21, column 49): "+[s.constructor.name])};return rK(Yu(u))(i)}},oS=function(){return ft(new Fm(qP))}(),aS=function(){return ft(new Tm(qP))}();var GP=yi(zP(),1),Lm=()=>new GP.FitAddon;var jP=yi(JP(),1),Im=()=>new jP.WebglAddon;var QP=yi(KP(),1),$m=()=>new QP.WebLinksAddon;var XP={addon:ne},YP={addon:ne},ZP={addon:he(_e)};var Hm=function(e){return e.addon};var lS=e=>e.active,fS=e=>e.normal,dS=e=>e.alternate;var rk=yi(nk(),1),ok=e=>t=>()=>new rk.Terminal(e,t),ak=e=>()=>e.element,ik=e=>()=>e.textarea,hS=e=>()=>e.rows,_S=e=>()=>e.cols,Jp=e=>e.buffer,vS=e=>()=>e.markers;var mS=e=>e.options,gS=e=>t=>()=>e.onBell(t),yS=e=>t=>()=>e.onBinary(n=>t(n)());var DS=e=>t=>()=>e.onData(n=>t(n)()),CS=e=>t=>()=>e.onKey(n=>t(n)()),bS=e=>t=>()=>e.onLineFeed(t),wS=e=>t=>()=>e.onRender(n=>t(n)()),SS=e=>t=>()=>e.onWriteParsed(t),ES=e=>t=>()=>e.onResize(n=>t(n)()),TS=e=>t=>()=>e.onScroll(n=>t(n)()),MS=e=>t=>()=>e.onSelectionChange(t),FS=e=>t=>()=>e.onTitleChange(n=>t(n)());var xS=e=>t=>()=>e.open(t);var LS=e=>t=>n=>()=>e.write(t,n),AS=e=>t=>n=>()=>e.writeln(t,n);var uk=e=>t=>()=>e.loadAddon(t);var sk=G(Pe);var ck=function(){var e=sk(yf);return function(t){return e(ik(t))}}();var lk=function(e){return function(t){return ok(Fc(e))(Fc(t))}},fk=function(e){var t=Hm(e);return function(n){return function(a){return uk(n)(t(a))}}};var dk=function(){var e=sk(yf);return function(t){return e(ak(t))}}();var Pm=G(Ki),jm=he(_e),nu=G(Pe),RS=PP(Rl)(jh),pk=ot(at),km=$d(qL),gK=fk(ZP),Nm=Z(ir),$S=pk(ir),Df=An(hr),Bm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),HS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),OS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Wm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),PS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Um=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),NS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),BS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),WS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yK={map:function(e){return function(t){if(t instanceof Bm)return new Bm(Pm(e)(t.value0));if(t instanceof HS)return new HS(function(n){return e(t.value0(n))});if(t instanceof OS)return new OS(function(n){return e(t.value0(n))});if(t instanceof Wm)return new Wm(function(n){return e(t.value0(n))});if(t instanceof PS)return new PS(function(n){return e(t.value0(n))});if(t instanceof Um)return new Um(Pm(e)(t.value0));if(t instanceof kS)return new kS(Pm(e)(t.value0));if(t instanceof NS)return new NS(Pm(e)(t.value0));if(t instanceof BS)return new BS(function(n){return e(t.value0(n))});if(t instanceof qm)return new qm(t.value0,e(t.value1));if(t instanceof Vm)return new Vm(t.value0,e(t.value1));if(t instanceof WS)return new WS(function(n){return e(t.value0(n))});if(t instanceof zm)return new zm(function(n){return e(t.value0(n))});if(t instanceof Gm)return new Gm(function(n){return e(t.value0(n))});if(t instanceof Jm)return new Jm(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},DK=na(yK),Qn=function(e){return ft(new Vm(e,void 0))},en=function(e){return ft(new qm(e,void 0))};var Km=function(e){return ft(new Um(e))},hk=function(){return ft(new zm(jm))}(),_k=function(){return ft(new Gm(jm))}();var vk=function(e){var t=e.MonadEffect0(),n=t.Monad0(),a=Wi(n.Bind1()),h=Z(a),o=Mr(Xu(n)),r=Za(t),l=VP(r),u=Le(r),i=Cn(j_(e)),s=pk(a);return function(f){var p=Yu(f),d=l(p),c=function(_){if(_ instanceof Bm)return h(o)(function(v){return Sa(d(_.value0))(mS(v))});if(_ instanceof HS)return h(o)(function(v){return u(nu(_.value0)(dk(v)))});if(_ instanceof OS)return h(o)(function(v){return u(nu(_.value0)(ck(v)))});if(_ instanceof Wm)return h(o)(function(v){return u(nu(_.value0)(hS(v)))});if(_ instanceof PS)return h(o)(function(v){return u(nu(_.value0)(_S(v)))});if(_ instanceof Um)return h(o)(function(v){return u(Sa(RS(_.value0))(lS(Jp(v))))});if(_ instanceof kS)return h(o)(function(v){return u(Sa(RS(_.value0))(fS(Jp(v))))});if(_ instanceof NS)return h(o)(function(v){return u(Sa(RS(_.value0))(dS(Jp(v))))});if(_ instanceof BS)return h(o)(function(v){return u(nu(_.value0)(vS(v)))});if(_ instanceof qm)return h(o)(function(v){return h(i(Nb))(function(m){return s(u(LS(v)(_.value0)(WD(Rp(_.value1)(m)))))(function(){return i(kb(m))})})});if(_ instanceof Vm)return h(o)(function(v){return h(i(Nb))(function(m){return s(u(AS(v)(_.value0)(WD(Rp(_.value1)(m)))))(function(){return i(kb(m))})})});if(_ instanceof WS)return u(nu(function(v){return _.value0(Vh(v))})(km(Lm)));if(_ instanceof zm)return u(nu(function(v){return _.value0(Vh(v))})(km($m)));if(_ instanceof Gm)return u(nu(function(v){return _.value0(Vh(v))})(km(Im)));if(_ instanceof Jm)return h(o)(function(v){return u(nu(function(m){return _.value1(EF(m))})(km(gK(v)(_.value0))))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 32, column 5 - line 34, column 55): "+[_.constructor.name])};return DK(p)(c)}},Qm=function(){return ft(new Wm(jm))}(),ko=function(e){return ft(Bm.create(e))};var US=function(e){var t=Hm(e);return function(n){return ft(new Jm(t(n),jm))}},CK=US(YP),bK=US(XP),qS=function(e){return Nm(_k)(function(t){return $S(function(){if(t instanceof V)return Df(e)(Qn("WebGL Addon unavailable"));if(t instanceof B)return $S(Df(e)(en("Loading WebGL ")))(function(){return Nm(CK(t.value0))(function(n){return Df(e)(function(){return Qn(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return Nm(hk)(function(n){if(n instanceof V)return Df(e)(Qn("WebLinks Addon unavailable"));if(n instanceof B)return $S(Df(e)(en("Loading WebLinks ")))(function(){return Nm(bK(n.value0))(function(a){return Df(e)(function(){return Qn(a?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var mk=e=>()=>e.dispose();var gk={toDisposable:he(_e)},SK=function(e){return e.toDisposable},yk=function(e){return{dispose:function(){var t=SK(e);return function(n){return mk(t(n))}}()}},Dk=function(e){return e.dispose};var xt=Z(zt),VS=Fr(Ht),TK=G(xr),MK=vk(pc)(es),$a=yn(Ht),Ha=ot(at)(zt),FK=it(Yt)(gt),xK=Dk(yk(gk)),zS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),LK=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),AK=function(){function e(){}return e.value=new e,e}(),IK=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GS=function(){function e(){}return e.value=new e,e}(),RK=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$K=function(){function e(){}return e.value=new e,e}(),HK=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),OK=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),PK=function(){function e(){}return e.value=new e,e}(),kK=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ck=function(){function e(){}return e.value=new e,e}(),bk=function(){function e(){}return e.value=new e,e}(),ua=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),NK=function(e){return function(t){return lo([O$(Rw),fn([ui("terminal")])([])])}},BK=function(e){var t=Cn(ri(e));return function(n){return xt(VS)(function(a){return t(TK(B.create)(Sa(MK(n))(a.terminal)))})}},WK=function(e){var t=Le(Ln(e.MonadEffect0())),n=function(d){return xt(t(jn))(function(c){return xt(t(SS(d)(Jn(c.listener)(new ua($K.value)))))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})},a=function(d){return xt(t(jn))(function(c){return xt(t(FS(d)(function(){var _=Jn(c.listener);return function(v){return _(ua.create(kK.create(v)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})},h=function(d){return xt(t(jn))(function(c){return xt(t(MS(d)(Jn(c.listener)(new ua(PK.value)))))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})},o=function(d){return xt(t(jn))(function(c){return xt(t(TS(d)(function(){var _=Jn(c.listener);return function(v){return _(ua.create(OK.create(v)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})},r=function(d){return xt(t(jn))(function(c){return xt(t(ES(d)(function(){var _=Jn(c.listener);return function(v){return _(ua.create(HK.create(v)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})},l=function(d){return xt(t(jn))(function(c){return xt(t(wS(d)(function(){var _=Jn(c.listener);return function(v){return _(ua.create(RK.create(v)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})},u=function(d){return xt(t(jn))(function(c){return xt(t(bS(d)(Jn(c.listener)(new ua(GS.value)))))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})},i=function(d){return xt(t(jn))(function(c){return xt(t(CS(d)(function(){var _=Jn(c.listener);return function(v){return _(ua.create(IK.create(v)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})},s=function(d){return xt(t(jn))(function(c){return xt(t(DS(d)(function(){var _=Jn(c.listener);return function(v){return _(ua.create(zS.create(v)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})},f=function(d){return xt(t(jn))(function(c){return xt(t(yS(d)(function(){var _=Jn(c.listener);return function(v){return _(ua.create(LK.create(v)))}}())))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})},p=function(d){return xt(t(jn))(function(c){return xt(t(gS(d)(Jn(c.listener)(new ua(AK.value)))))(function(_){return xt(Rn(c.emitter))(function(){return $a(function(v){var m={};for(var y in v)({}).hasOwnProperty.call(v,y)&&(m[y]=v[y]);return m.disposables=Mn(_)(v.disposables),m})})})})};return function(d){if(d instanceof Ck)return xt(Ir("terminal"))(function(c){if(c instanceof V)return t(ti("no terminal element"));if(c instanceof B)return xt(VS)(function(_){return Ha(t(xS(_.terminal)(c.value0)))(function(){return Ha(p(_.terminal))(function(){return Ha(f(_.terminal))(function(){return Ha(i(_.terminal))(function(){return Ha(u(_.terminal))(function(){return Ha(l(_.terminal))(function(){return Ha(n(_.terminal))(function(){return Ha(r(_.terminal))(function(){return Ha(o(_.terminal))(function(){return Ha(h(_.terminal))(function(){return Ha(a(_.terminal))(function(){return s(_.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.XTerm (line 117, column 5 - line 132, column 28): "+[c.constructor.name])});if(d instanceof bk)return xt(VS)(function(c){return t(FK(xK)(c.disposables))});if(d instanceof ua)return Ur(d.value0);throw new Error("Failed pattern match at Halogen.XTerm (line 114, column 16 - line 136, column 23): "+[d.constructor.name])}},wk=function(e){return ln({initialState:function(t){return{terminal:t,disposables:[]}},render:NK(e),eval:cn({receive:dt.receive,handleAction:WK(e),handleQuery:BK(e),initialize:new B(Ck.value),finalize:new B(bk.value)})})};var UK=De(on),Fk={reflectSymbol:function(){return"terminal"}},qK=fs()(Fk)(pn),xk=RD(Cc),JS=Z(xk),jS=bt(N_)(Cc),VK=qr()(Fk)(pn),zK=X(Kt),Ek=G($n),GK=bt(Zl),Lk=Fr(Ht),Cf=X(HD(Cc)),Ym=ot(at)(xk),Ak=BA(Ht),KS=yn(Ak),JK=Fr(Ak),jK=NA(Cp),Tk=Z(zt),KK=De(tO),QK=st(nO),XK=yn(Ht),Mk=ut($n),YK=X(ms),Ik=function(){return Et.value}(),ZK=function(e){var t=wk(e);return function(n){return lo(UK([function(){if(n.terminal instanceof V)return lo([]);if(n.terminal instanceof B)return qK(Ik)(void 0)(t)(n.terminal.value0)(ww.create);throw new Error("Failed pattern match at Halogen.XShell (line 49, column 8 - line 51, column 80): "+[n.terminal.constructor.name])}()])(bP(n.windows)))}},Rk=function(e){var t=e.MonadEffect0().Monad0(),n=GK(t),a=na(DP(t.Bind1().Apply0().Functor0()))(jK);return function(h){var o=function(r){if(r instanceof Bp)return JS(jS(VK(Ik)(void 0)(r.value0)))(function(l){return zK(l)});if(r instanceof Wp)return Ek(B.create)(n(r.value0));if(r instanceof Up)return JS(jS(Lk))(function(l){return Cf(r.value0(l.shell))});if(r instanceof qp)return Ym(KS(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.shell=r.value0,u}))(function(){return Cf(r.value1)});if(r instanceof Vp)return Ym(KS(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.interpreter=r.value0,u}))(function(){return Cf(r.value1)});if(r instanceof mm)return Ym(jS(Ur(r.value0)))(function(){return Cf(r.value1)});if(r instanceof zp)return Ek(B.create)(r.value0);if(r instanceof gm)return JS(JK)(function(l){return Cf(r.value0(l.windows))});if(r instanceof Gp)return Ym(KS(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.windows=r.value0(l.windows),u}))(function(){return Cf(r.value1)});throw new Error("Failed pattern match at Halogen.XShell (line 80, column 5 - line 82, column 22): "+[r.constructor.name])};return kA(a(o)(h))}},eQ=function(e){var t=Le(Ln(e.MonadEffect0())),n=Rk(e);return function(a){if(a instanceof bw)return Tk(t(lk(KK($p(NP)('"Cascadia Code", Menlo, monospace'))($p(BP)(!0)))(QK)))(function(h){return XK(function(o){var r={};for(var l in o)({}).hasOwnProperty.call(o,l)&&(r[l]=o[l]);return r.terminal=new B(h),r})});if(a instanceof ww)return Tk(Lk)(function(h){return Mk(n(h.interpreter(a.value0)))});if(a instanceof Sw)return Mk(n(a.value0));throw new Error("Failed pattern match at Halogen.XShell (line 61, column 16 - line 70, column 35): "+[a.constructor.name])}},Zm=function(e){return ln({initialState:function(t){return{shell:t,interpreter:ve(YK(void 0)),terminal:V.value,windows:ns}},render:ZK(e),eval:cn({receive:dt.receive,finalize:dt.finalize,handleAction:eQ(e),handleQuery:Rk(e),initialize:new B(bw.value)})})};var ru=Z(zt),tQ=Ro(Ht),bf=ut($n),kk=qr(),Nk={reflectSymbol:function(){return"shell"}},jp=kk(Nk)(pn),QS=$o(Ht),Bk=ot(at),wf=Bk(zt),XS=yn(Ht),Wk={reflectSymbol:function(){return"feed"}},YS=kk(Wk)(td),Hk=he(_e),Ok=it(Kt)($t),ZS=Me(_o),nQ=An(Kt),rQ=Me(il(to)),oQ=Ai(zI),aQ=Me(qh(_o)),Kp=Bk(Xo),iQ=fs()(Wk)(td),uQ=NO(wb)(Q$(pc)),sQ=aa()(Nk)(pn),cQ=Zm(pc),eE=wc(AR);var Uk=function(){function e(){}return e.value=new e,e}(),tE=function(){function e(){}return e.value=new e,e}(),qk=function(){function e(){}return e.value=new e,e}(),Pk=function(){function e(){}return e.value=new e,e}(),Vk=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qp=function(e){return Nt(Qn(e))},Sf=function(){return Et.value}(),eg=function(){return Et.value}(),zk=function(e){var t=Le(Ln(e));return function(n){if(n instanceof Uk)return ru(tQ(function(a){var h={};for(var o in a)({}).hasOwnProperty.call(a,o)&&(h[o]=a[o]);return h.top=!a.top,h}))(function(a){var h=function(){return a.top?"top loading/unloading enabled":"top loading/unloading disabled"}();return bf(jp(Sf)(void 0)(Qp(h)))});if(n instanceof tE)return ru(QS(function(a){return a.log}))(function(a){if(a instanceof B)return wf(XS(function(h){var o={};for(var r in h)({}).hasOwnProperty.call(h,r)&&(o[r]=h[r]);return o.log=V.value,o}))(function(){return wf(Hv(a.value0.value0))(function(){return t(QI(a.value0.value1))})});if(a instanceof V)return ru(t(jn))(function(h){return ru(t(KI(200)(Jn(h.listener)(Pk.value))))(function(o){return ru(Rn(h.emitter))(function(r){return XS(function(l){var u={};for(var i in l)({}).hasOwnProperty.call(l,i)&&(u[i]=l[i]);return u.log=new B(new ee(r,o)),u})})})});throw new Error("Failed pattern match at Examples.Halogen.Infinite.Scroll.Main (line 88, column 10 - line 97, column 60): "+[a.constructor.name])});if(n instanceof qk)return XS(function(a){var h={};for(var o in a)({}).hasOwnProperty.call(a,o)&&(h[o]=a[o]);return h.up=!a.up,h});if(n instanceof Pk)return ru(QS(function(a){return a.top}))(function(a){return ru(YS(eg)(a)(new cm(Hk)))(function(h){return ru(QS(function(o){return o.up}))(function(o){return $e(Ok)(h)(function(r){var l=function(){return o?-99:99}();return wf(bf(YS(eg)(a)(new sw(l,void 0))))(function(){return ru(YS(eg)(a)(new cm(Hk)))(function(u){return $e(Ok)(u)(function(i){return wf(bf(jp(Sf)(void 0)(Qp("scroll: "+(ZS(r)+("+="+ZS(l)))))))(function(){return nQ(i!==r+l)(wf(bf(jp(Sf)(void 0)(Qp("scroll offset error"+ZS(i)))))(function(){return zk(e)(tE.value)}))})})})})})})})});if(n instanceof Vk)return wf(bf(jp(Sf)(void 0)(Qp("pages: "+rQ(oQ(GI(n.value0.pages)))))))(function(){return bf(jp(Sf)(void 0)(Qp("adjust: "+aQ(n.value0.update.scroll))))});throw new Error("Failed pattern match at Examples.Halogen.Infinite.Scroll.Main (line 81, column 3 - line 114, column 84): "+[n.constructor.name])}},lQ=function(e){return fn([Un(Kp(ya(ac))(function(){return ic(Ol)}))])([fn([Un(Kp(Yo(et(10)))(function(){return Kp(Ni(et(10)))(function(){return Kp(Ca(et(400)))(function(){return Kp(Oo(et(1200)))(function(){return rA(Ga)})})})}))])([iQ(eg)(e.top)(uQ)(function(){var t=PO(150);return{initialElement:t.initialElement,pageSize:t.pageSize,hiddenPages:t.hiddenPages,preloadedPages:t.preloadedPages,preloadMillis:t.preloadMillis,enableTop:e.top,debounce:0,deadZone:1}}())(Vk.create)]),lo([sQ(Sf)(void 0)(cQ)(void 0),lo([Sp([eE("type")(zl.value),df(ve(Uk.value))]),Ar("enable top loading/unloading")]),lo([Sp([eE("type")(zl.value),df(ve(tE.value))]),Ar("enable automatic scrolling")]),lo([Sp([eE("type")(zl.value),df(ve(qk.value))]),Ar("auto scroll up")])])])},Gk=function(){return ln({initialState:ve({top:!1,up:!1,log:V.value}),render:lQ,eval:cn({handleQuery:dt.handleQuery,receive:dt.receive,initialize:dt.initialize,finalize:dt.finalize,handleAction:zk(Dn)})})}();var dQ={dimap:function(e){return function(t){return function(n){return function(a){return n(e(a))}}}}},gs={first:function(e){return function(t){return e(tr(t))}},second:function(e){return function(t){return e(hn(t))}},Profunctor0:function(){return dQ}};var bQ=In(),wQ=he(_e);var SQ=function(e){return bQ(e(wQ))},fo=function(e){return function(t){return SQ(t)(e)}};var tg=function(e){return e},Eo=function(e){return function(t){return tg(e)(ve(t))}};function ng(e){return e.clientX}function rg(e){return e.clientY}var No=ne;var Qk=ot(at)(zt),TQ=Il(Ht),MQ=X(Kt),FQ=he(_e),Xk=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xQ=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),LQ=function(e){return function(t){return sf([Tc(function(n){return xQ.create(No(n))})])([Ar(t)])}},AQ=function(e){return function(t){return Qk(TQ(t.value0))(function(){return MQ(new B(t.value1))})}},IQ=function(e){var t=Le(Ln(e.MonadEffect0()));return function(n){return Qk(t(Kr(n.value0)))(function(){return Ur(void 0)})}},Yk=function(e){return ln({initialState:FQ,render:LQ(e),eval:cn({receive:dt.receive,initialize:dt.initialize,finalize:dt.finalize,handleAction:IQ(e),handleQuery:AQ(e)})})};var ug=yi(ig(),1);function e2(e,t){return function(){return t.edit(e)}}var t2=function(e){return function(t){return e2(e,t)}};var OQ=yi(ig(),1);function n2(e,t){return function(){return t.setValue(e)}}function oE(e){return function(){return e.getValue()}}var o2=function(e){return function(t){return n2(e,t)}};var NQ=yi(ig(),1);function ue(e){return function(){var t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1);return function(){return t[e].apply(t,n)}}}function sg(e){return function(t){return function(){return t[e]}}}function BQ(e){return function(t,n){return function(){n[e]=t}}}var WQ=sg("text"),UQ=BQ("text"),qQ=sg("renderer"),VQ=sg("inMultiSelectMode"),zQ=ue("selectMoreLines"),GQ=sg("container"),JQ=ue("setKeyboardHandler"),jQ=ue("getKeyboardHandler"),KQ=ue("setSession"),aE=ue("getSession"),QQ=ue("setValue"),XQ=ue("getValue"),YQ=ue("getSelection"),ZQ=ue("resize"),eX=ue("setTheme"),tX=ue("getTheme"),nX=ue("setStyle"),rX=ue("unsetStyle"),oX=ue("setFontSize"),aX=ue("focus"),iX=ue("isFocused"),uX=ue("blur"),sX=ue("getCopyText"),cX=ue("insert"),lX=ue("setOverwrite"),fX=ue("getOverwrite"),dX=ue("toggleOverwrite"),pX=ue("setScrollSpeed"),hX=ue("getScrollSpeed"),_X=ue("setDragDelay"),vX=ue("getDragDelay"),mX=ue("setSelectionStyle"),gX=ue("getSelectionStyle"),yX=ue("setHighlightActiveLine"),DX=ue("getHighlightActiveLine"),CX=ue("setHighlightSelectedWord"),bX=ue("getHighlightSelectedWord"),wX=ue("setShowInvisibles"),SX=ue("getShowInvisibles"),EX=ue("setShowPrintMargin"),TX=ue("getShowPrintMargin"),MX=ue("setPrintMarginColumn"),FX=ue("getPrintMarginColumn"),xX=ue("setReadOnly"),LX=ue("getReadOnly"),AX=ue("setBehavioursEnabled"),IX=ue("getBehavioursEnabled"),RX=ue("setWrapBehavioursEnabled"),$X=ue("getWrapBehavioursEnabled"),HX=ue("setShowFoldWidgets"),OX=ue("getShowFoldWidgets"),PX=ue("remove"),kX=ue("removeWordRight"),NX=ue("removeWordLeft"),BX=ue("removeToLineStart"),WX=ue("removeToLineEnd"),UX=ue("splitLine"),qX=ue("transposeLetters"),VX=ue("toLowerCase"),zX=ue("toUpperCase"),GX=ue("indent"),JX=ue("blockIndent"),jX=ue("blockOutdent"),KX=ue("toggleCommentLines"),QX=ue("getNumberAt"),XX=ue("modifyNumber"),YX=ue("removeLines"),ZX=ue("moveLinesDown"),eY=ue("moveLinesUp"),tY=ue("copyLinesUp"),nY=ue("copyLinesDown"),rY=ue("getFirstVisibleRow"),oY=ue("getLastVisibleRow"),aY=ue("isRowVisible"),iY=ue("isRowFullyVisible"),uY=ue("selectPageDown"),sY=ue("selectPageUp"),cY=ue("gotoPageDown"),lY=ue("gotoPageUp"),fY=ue("scrollPageDown"),dY=ue("scrollPageUp"),pY=ue("scrollToRow"),hY=ue("scrollToLine"),_Y=ue("centerSelection"),vY=ue("getCursorPosition"),mY=ue("getCursorPositionScreen"),gY=ue("getSelectionRange"),yY=ue("selectAll"),DY=ue("clearSelection"),CY=ue("moveCursorTo"),bY=ue("moveCursorToPosition"),wY=ue("jumpToMatching"),SY=ue("gotoLine"),EY=ue("navigateTo"),TY=ue("navigateUp"),MY=ue("navigateDown"),FY=ue("navigateLeft"),xY=ue("navigateRight"),LY=ue("navigateLineStart"),AY=ue("navigateLineEnd"),IY=ue("navigateFileEnd"),RY=ue("navigateFileStart"),$Y=ue("navigateWordRight"),HY=ue("navigateWordLeft"),OY=ue("replace"),PY=ue("replaceAll"),kY=ue("getLastSearchOptions"),NY=ue("find"),BY=ue("findNext"),WY=ue("findPrevious"),UY=ue("undo"),qY=ue("redo"),VY=ue("destroy");function vr(e){return e}function iE(e){return JSON.stringify(e)}function a2(e,t,n,a,h,o,r){return r==null?e():typeof r=="boolean"?t(r):typeof r=="number"?n(r):typeof r=="string"?a(r):Object.prototype.toString.call(r)==="[object Array]"?h(r):o(r)}var i2=function(e){return function(t){return function(n){return a2(ve(e),ve(e),ve(e),t,ve(e),ve(e),n)}}};var uE=Me(Ei),KY=Me(to);var cg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),u2=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cE=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),s2=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lE=function(){function e(){}return e.value=new e,e}(),Xp={show:function(e){if(e instanceof cg)return"(TypeMismatch "+(uE(e.value0)+")");if(e instanceof sE)return"(UnexpectedValue "+(iE(e.value0)+")");if(e instanceof u2)return"(AtIndex "+(KY(e.value0)+(" "+(Me(Xp)(e.value1)+")")));if(e instanceof cE)return"(AtKey "+(uE(e.value0)+(" "+(Me(Xp)(e.value1)+")")));if(e instanceof s2)return"(Named "+(uE(e.value0)+(" "+(Me(Xp)(e.value1)+")")));if(e instanceof lE)return"MissingValue";throw new Error("Failed pattern match at Data.Argonaut.Decode.Error (line 24, column 10 - line 30, column 35): "+[e.constructor.name])}};var f2=function(){return i2(new We(new cg("String")))(Oe.create)}();var Tf={decodeJson:f2};var fg=function(e){return e.decodeJson};var h2=vr;var Mf={encodeJson:h2};var Yp=function(e){return e.encodeJson};var $8e=yi(pT(),1),Bee={keyEncoding:"json",valueEncoding:"json"},hT=e=>t=>n=>()=>e.put(t,n),_T=e=>t=>()=>new Promise((a,h)=>{let o=(r,l)=>{a(l)};e.get(t,Bee,o)});var vT=e=>t=>()=>e.del(t);var mT=e=>()=>e.keys().all();function KN(e){return function(t){return function(n){return function(){e.then(n,t)}}}}var qee=$h(Pe),Vee=st(cI),zee=he(_e),Gee=Pn(PA(mA)(Dr)),Jee=IC(Dr),jee=G(P_(Ti)),Kee=wv(Dr),Qee=Z(jt),Xee=Le(Dn),Yee=function(e){return function(t){return wa(function(n){return qee(Vee)(KN(t)(function(a){return n(We.create(e(a)))()})(function(a){return n(Oe.create(a))()}))})}};var Zee=function(e){return wn(function(t){return rr("Promise failed, couldn't extract JS Error or String")})(zee)(Ab(Gee(Jee("Error")(e))(jee(rr)(Kee(e)))))},ete=Yee(Zee),xs=function(e){return Qee(Xee(e))(ete)};var qg=e=>e===void 0;var QN=Me(Xp),XN=Z(jt),lte=En(Tu),fte=lte(cl),YN=Le(Dn),yT=X(Wr);var ZN=function(e){var t=Yp(e);return function(n){return function(a){var h=Yp(a);return function(o){return function(r){return function(l){return function(u){return xs(hT(r.value0)(t(l))(h(u)))}}}}}}};var eB=function(e){var t=Yp(e);return function(n){return function(a){return function(h){var o=fg(h);return function(r){return function(l){return XN(xs(_T(r.value0)(t(l))))(function(u){var i=qg(u);if(i)return yT(V.value);var s=o(u);if(s instanceof We)return YN(yo(rr(QN(s.value0))));if(s instanceof Oe)return yT(new B(s.value0));throw new Error("Failed pattern match at Level.DB.Operations (line 28, column 10 - line 30, column 40): "+[s.constructor.name])})}}}}}};var tB=function(e){var t=Yp(e);return function(n){return function(a){return function(h){return function(o){return function(r){return xs(vT(o.value0)(t(r)))}}}}}},nB=function(e){var t=fg(e);return function(n){return function(a){return XN(xs(mT(a.value0)))(function(h){var o=fte(t)(h);if(o instanceof We)return YN(yo(rr(QN(o.value0))));if(o instanceof Oe)return yT(o.value0);throw new Error("Failed pattern match at Level.DB.Operations (line 71, column 3 - line 73, column 26): "+[o.constructor.name])})}}};var rB=yi(pT(),1),pte={keyEncoding:"json",valueEncoding:"json"},DT=e=>()=>new rB.Level(e,pte);var mte=G(Pe),gte=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var oB=function(e){return mte(gte.create)(DT(e))};var CT=Mf,Vg=Tf,Dte=ZN(CT)(Vg)(Mf)(Tf),Cte=eB(CT)(Vg)(Mf)(Tf),bte=tB(CT)(Vg)(Mf)(Tf),aB=function(e){return function(t){return function(n){return Dte(e)(t)(n)}}},iB=function(e){return function(t){return Cte(e)(t)}},Dh=oB("filesystem"),uB=nB(Vg)(Tf),sB=function(e){return function(t){return bte(e)(t)}};var fB=ot(at),lB=fB(Xo),du=Z(zt),bT=$o(Ht),zg=it(Kt)($t),wT=fB(zt),wte=yn(Ht),dB=function(){function e(){}return e.value=new e,e}(),pB=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hB=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ste=function(e){return function(t){var n=lo([fn([ui("editor"),Un(lB(Ca(et(500)))(function(){return Oo(et(500))}))])([]),sf([Tc(function(a){return pB.create(No(a))})])([Ar("Save")]),sf([Tc(function(a){return hB.create(No(a))})])([Ar("Exit")])]);return fn([Un(lB(ya(ac))(function(){return ic(Ol)}))])([n])}},Ete=function(e){var t=Le(Ln(e.MonadEffect0())),n=Cn(ri(e));return function(a){return function(h){if(h instanceof dB)return du(t(Dh))(function(o){return du(bT(function(r){return r.filePath}))(function(r){return du(n(iB(o)(r)))(function(l){return du(Ir("editor"))(function(u){return $e(zg)(u)(function(i){return $e(zg)(Fp(i))(function(s){return du(t(t2(s)(ug.default)))(function(f){return du(t(aE(f)))(function(p){return wT($e(zg)(l)(function(d){return t(o2(d)(p))}))(function(){return wte(function(d){var c={};for(var _ in d)({}).hasOwnProperty.call(d,_)&&(c[_]=d[_]);return c.editSession=new B(new ee(o,new ee(f,p))),c})})})})})})})})})});if(h instanceof pB)return wT(t(Kr(h.value0)))(function(){return du(bT(function(o){return o.editSession}))(function(o){return du(bT(function(r){return r.filePath}))(function(r){return $e(zg)(o)(function(l){return du(t(oE(l.value1.value1)))(function(u){return n(aB(l.value0)(r)(u))})})})})});if(h instanceof hB)return wT(t(Kr(h.value0)))(function(){return Ur(void 0)});throw new Error("Failed pattern match at Examples.Halogen.Widgets.Editor (line 73, column 16 - line 95, column 18): "+[h.constructor.name])}}},_B=function(e){var t=Ste(e),n=Ete(e);return function(a){return ln({initialState:function(h){return{editSession:V.value,filePath:h}},render:t,eval:cn({handleQuery:dt.handleQuery,receive:dt.receive,finalize:dt.finalize,handleAction:n(a),initialize:new B(dB.value)})})}};function Gg(e){return function(){return e.getContext("2d")}}function Ch(e){return function(){return e.width}}function bh(e){return function(){return e.height}}function wh(e){return function(t){return function(){e.width=t}}}function Sh(e){return function(t){return function(){e.height=t}}}function ST(e){return function(){return e.toDataURL()}}function ET(e){return function(t){return function(){e.lineWidth=t}}}function TT(e){return function(t){return function(){e.setLineDash(t)}}}function MT(e){return function(t){return function(){e.fillStyle=t}}}function FT(e){return function(t){return function(){e.strokeStyle=t}}}function xT(e){return function(t){return function(){e.shadowColor=t}}}function LT(e){return function(t){return function(){e.shadowBlur=t}}}function AT(e){return function(t){return function(){e.shadowOffsetX=t}}}function IT(e){return function(t){return function(){e.shadowOffsetY=t}}}function RT(e){return function(t){return function(){e.miterLimit=t}}}function Jg(e){return function(t){return function(){e.lineCap=t}}}function jg(e){return function(t){return function(){e.lineJoin=t}}}function vB(e){return function(t){return function(){e.globalCompositeOperation=t}}}function $T(e){return function(t){return function(){e.globalAlpha=t}}}function Kg(e){return function(){e.beginPath()}}function Qg(e){return function(){e.stroke()}}function Xg(e){return function(){e.fill()}}function HT(e){return function(){e.clip()}}function OT(e){return function(t){return function(n){return function(){e.lineTo(t,n)}}}}function PT(e){return function(t){return function(n){return function(){e.moveTo(t,n)}}}}function kT(e){return function(){e.closePath()}}function NT(e){return function(t){return function(){e.arc(t.x,t.y,t.radius,t.start,t.end,t.useCounterClockwise)}}}function BT(e){return function(t){return function(){e.rect(t.x,t.y,t.width,t.height)}}}function WT(e){return function(t){return function(){e.fillRect(t.x,t.y,t.width,t.height)}}}function UT(e){return function(t){return function(){e.strokeRect(t.x,t.y,t.width,t.height)}}}function qT(e){return function(t){return function(){e.clearRect(t.x,t.y,t.width,t.height)}}}function VT(e){return function(t){return function(){e.scale(t.scaleX,t.scaleY)}}}function zT(e){return function(t){return function(){e.rotate(t)}}}function GT(e){return function(t){return function(){e.translate(t.translateX,t.translateY)}}}function JT(e){return function(t){return function(){e.transform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function jT(e){return function(t){return function(){e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function mB(e){return function(){return e.textAlign}}function gB(e){return function(t){return function(){e.textAlign=t}}}function yB(e){return function(){return e.textBaseline}}function DB(e){return function(t){return function(){e.textBaseline=t}}}function KT(e){return function(){return e.font}}function QT(e){return function(t){return function(){e.font=t}}}function XT(e){return function(t){return function(n){return function(a){return function(){e.fillText(t,n,a)}}}}}function YT(e){return function(t){return function(n){return function(a){return function(){e.strokeText(t,n,a)}}}}}function ZT(e){return function(t){return function(){return e.measureText(t)}}}function Yg(e){return function(){e.save()}}function Zg(e){return function(){e.restore()}}function e1(e){return function(t){return function(n){return function(a){return function(h){return function(){return e.getImageData(t,n,a,h)}}}}}}function t1(e){return function(t){return function(n){return function(a){return function(h){return function(o){return function(r){return function(l){return function(){e.putImageData(t,n,a,h,o,r,l)}}}}}}}}}function n1(e){return function(t){return function(n){return function(a){return function(){e.putImageData(t,n,a)}}}}}function r1(e){return function(t){return function(n){return function(){return e.createImageData(t,n)}}}}function o1(e){return function(t){return function(n){return function(a){return function(){e.drawImage(t,n,a)}}}}}function a1(e){return function(t){return function(n){return function(a){return function(h){return function(o){return function(){e.drawImage(t,n,a,h,o)}}}}}}}function i1(e){return function(t){return function(n){return function(a){return function(h){return function(o){return function(r){return function(l){return function(u){return function(i){return function(){e.drawImage(t,n,a,h,o,r,l,u,i)}}}}}}}}}}}function CB(e){return function(t){return function(n){return function(){return e.createPattern(t,n)}}}}function u1(e){return function(t){return function(){e.fillStyle=t}}}function s1(e){return function(t){return function(){return e.createLinearGradient(t.x0,t.y0,t.x1,t.y1)}}}function c1(e){return function(t){return function(){return e.createRadialGradient(t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)}}}function l1(e){return function(t){return function(){e.fillStyle=t}}}function f1(e){return function(t){return function(){e.quadraticCurveTo(t.cpx,t.cpy,t.x,t.y)}}}function d1(e){return function(t){return function(){e.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x,t.y)}}}var Fte=function(e){return lc(yo(e))},p1=function(e){return Fte(rr(e))};var bB=G(Pe),Ate=Or(Qy),wB=function(){function e(){}return e.value=new e,e}(),SB=function(){function e(){}return e.value=new e,e}(),EB=function(){function e(){}return e.value=new e,e}(),TB=function(){function e(){}return e.value=new e,e}(),MB=function(){function e(){}return e.value=new e,e}(),FB=function(){function e(){}return e.value=new e,e}(),xB=function(){function e(){}return e.value=new e,e}(),LB=function(){function e(){}return e.value=new e,e}(),AB=function(){function e(){}return e.value=new e,e}(),IB=function(){function e(){}return e.value=new e,e}(),RB=function(){function e(){}return e.value=new e,e}(),Ite=function(){function e(){}return e.value=new e,e}(),Rte=function(){function e(){}return e.value=new e,e}(),$te=function(){function e(){}return e.value=new e,e}(),Hte=function(){function e(){}return e.value=new e,e}(),Ote=function(){function e(){}return e.value=new e,e}(),Pte=function(){function e(){}return e.value=new e,e}(),kte=function(){function e(){}return e.value=new e,e}(),Nte=function(){function e(){}return e.value=new e,e}(),Bte=function(){function e(){}return e.value=new e,e}(),Wte=function(){function e(){}return e.value=new e,e}(),Ute=function(){function e(){}return e.value=new e,e}(),qte=function(){function e(){}return e.value=new e,e}(),Vte=function(){function e(){}return e.value=new e,e}(),zte=function(){function e(){}return e.value=new e,e}(),Gte=function(){function e(){}return e.value=new e,e}(),Jte=function(){function e(){}return e.value=new e,e}(),jte=function(){function e(){}return e.value=new e,e}(),Kte=function(){function e(){}return e.value=new e,e}(),Qte=function(){function e(){}return e.value=new e,e}(),Xte=function(){function e(){}return e.value=new e,e}(),Yte=function(){function e(){}return e.value=new e,e}(),Zte=function(){function e(){}return e.value=new e,e}(),ene=function(){function e(){}return e.value=new e,e}(),tne=function(){function e(){}return e.value=new e,e}(),nne=function(){function e(){}return e.value=new e,e}(),rne=function(){function e(){}return e.value=new e,e}(),one=function(){function e(){}return e.value=new e,e}(),ane=function(){function e(){}return e.value=new e,e}(),ine=function(){function e(){}return e.value=new e,e}(),une=function(){function e(){}return e.value=new e,e}(),sne=function(){function e(){}return e.value=new e,e}(),cne=function(){function e(){}return e.value=new e,e}(),lne=function(){function e(){}return e.value=new e,e}(),fne=function(){function e(){}return e.value=new e,e}(),dne=function(){function e(){}return e.value=new e,e}(),pne=function(){function e(){}return e.value=new e,e}();var $B=function(e){var t=function(n){return n==="top"?wB.value:n==="hanging"?SB.value:n==="middle"?EB.value:n==="alphabetic"?TB.value:n==="ideographic"?MB.value:n==="bottom"?FB.value:p1("invalid TextBaseline: "+n)};return bB(t)(yB(e))},HB=function(e){var t=function(n){return n==="left"?xB.value:n==="right"?LB.value:n==="center"?AB.value:n==="start"?IB.value:n==="end"?RB.value:p1("invalid TextAlign: "+n)};return bB(t)(mB(e))};var OB=function(e){return function(t){var n=function(a){if(a instanceof wB)return"top";if(a instanceof SB)return"hanging";if(a instanceof EB)return"middle";if(a instanceof TB)return"alphabetic";if(a instanceof MB)return"ideographic";if(a instanceof FB)return"bottom";throw new Error("Failed pattern match at Graphics.Canvas (line 577, column 5 - line 577, column 33): "+[a.constructor.name])};return DB(e)(n(t))}},PB=function(e){return function(t){var n=function(a){if(a instanceof xB)return"left";if(a instanceof LB)return"right";if(a instanceof AB)return"center";if(a instanceof IB)return"start";if(a instanceof RB)return"end";throw new Error("Failed pattern match at Graphics.Canvas (line 531, column 5 - line 531, column 32): "+[a.constructor.name])};return gB(e)(n(t))}},kB=function(e){return function(t){if(t instanceof Ote)return jg(e)("bevel");if(t instanceof Pte)return jg(e)("round");if(t instanceof kte)return jg(e)("miter");throw new Error("Failed pattern match at Graphics.Canvas (line 253, column 1 - line 253, column 52): "+[e.constructor.name,t.constructor.name])}},NB=function(e){return function(t){if(t instanceof Nte)return Jg(e)("round");if(t instanceof Bte)return Jg(e)("square");if(t instanceof Wte)return Jg(e)("butt");throw new Error("Failed pattern match at Graphics.Canvas (line 238, column 1 - line 238, column 50): "+[e.constructor.name,t.constructor.name])}},BB=function(e){return function(t){var n=function(a){if(a instanceof Ute)return"source-over";if(a instanceof qte)return"source-in";if(a instanceof Vte)return"source-out";if(a instanceof zte)return"source-atop";if(a instanceof Gte)return"destination-over";if(a instanceof Jte)return"destination-in";if(a instanceof jte)return"destination-out";if(a instanceof Kte)return"destination-atop";if(a instanceof Qte)return"lighter";if(a instanceof Xte)return"copy";if(a instanceof Yte)return"xor";if(a instanceof Zte)return"multiply";if(a instanceof ene)return"screen";if(a instanceof tne)return"overlay";if(a instanceof nne)return"darken";if(a instanceof rne)return"lighten";if(a instanceof one)return"color-dodge";if(a instanceof ane)return"color-burn";if(a instanceof ine)return"hard-light";if(a instanceof une)return"soft-light";if(a instanceof sne)return"difference";if(a instanceof cne)return"exclusion";if(a instanceof lne)return"hue";if(a instanceof fne)return"saturation";if(a instanceof dne)return"color";if(a instanceof pne)return"luminosity";throw new Error("Failed pattern match at Graphics.Canvas (line 326, column 5 - line 326, column 45): "+[a.constructor.name])};return vB(e)(n(t))}},WB=function(e){return function(t){return Ate(Sh(e)(t.height))(wh(e)(t.width))}};var UB=function(e){return function(){var n=Ch(e)(),a=bh(e)();return{width:n,height:a}}};var qB=function(e){return function(t){return function(n){var a=function(h){if(h instanceof Ite)return"repeat";if(h instanceof Rte)return"repeat-x";if(h instanceof $te)return"repeat-y";if(h instanceof Hte)return"no-repeat";throw new Error("Failed pattern match at Graphics.Canvas (line 677, column 5 - line 677, column 31): "+[h.constructor.name])};return CB(e)(t)(a(n))}}};var zB=e=>t=>()=>e.convertToBlob({type:"image/jpeg",quality:t});var GB=function(e){return function(t){return xs(zB(e)(t))}};var vne=bt(Wl),Fo=G(Pe),jB=ot(at),mne=G(xr),cM=he(_e),gne=function(e){return e},h1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ey=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ty=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),v1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),m1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),g1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ny=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),y1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ry=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),D1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),oy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ay=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),C1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),b1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),w1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),S1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),E1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),T1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),M1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),F1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),x1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),iy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),L1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),A1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),I1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),R1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ly=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),H1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),O1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),dy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),py=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),P1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),k1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),N1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),B1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),W1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),U1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),q1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),V1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hy=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),z1=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),G1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_y=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),J1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),j1=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),K1=function(){function e(t,n,a,h){this.value0=t,this.value1=n,this.value2=a,this.value3=h}return e.create=function(t){return function(n){return function(a){return function(h){return new e(t,n,a,h)}}}},e}(),Q1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),X1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Y1=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),Z1=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),eM=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),tM=function(){function e(t,n,a){this.value0=t,this.value1=n,this.value2=a}return e.create=function(t){return function(n){return function(a){return new e(t,n,a)}}},e}(),nM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),oM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),aM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),iM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),uM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yne=function(e){return e};var Dne=function(e){var t=G(e);return{map:function(n){return function(a){if(a instanceof h1)return new h1(t(n)(a.value0));if(a instanceof ey)return new ey(function(h){return n(a.value0(h))});if(a instanceof _1)return new _1(a.value0,n(a.value1));if(a instanceof ty)return new ty(function(h){return n(a.value0(h))});if(a instanceof v1)return new v1(a.value0,n(a.value1));if(a instanceof m1)return new m1(function(h){return n(a.value0(h))});if(a instanceof g1)return new g1(a.value0,n(a.value1));if(a instanceof ny)return new ny(function(h){return n(a.value0(h))});if(a instanceof y1)return new y1(function(h){return n(a.value0(h))});if(a instanceof ry)return new ry(a.value0,n(a.value1));if(a instanceof D1)return new D1(a.value0,n(a.value1));if(a instanceof oy)return new oy(a.value0,n(a.value1));if(a instanceof ay)return new ay(a.value0,n(a.value1));if(a instanceof C1)return new C1(a.value0,n(a.value1));if(a instanceof b1)return new b1(a.value0,n(a.value1));if(a instanceof w1)return new w1(a.value0,n(a.value1));if(a instanceof S1)return new S1(a.value0,n(a.value1));if(a instanceof E1)return new E1(a.value0,n(a.value1));if(a instanceof T1)return new T1(a.value0,n(a.value1));if(a instanceof M1)return new M1(a.value0,n(a.value1));if(a instanceof F1)return new F1(a.value0,n(a.value1));if(a instanceof x1)return new x1(a.value0,n(a.value1));if(a instanceof iy)return new iy(n(a.value0));if(a instanceof uy)return new uy(n(a.value0));if(a instanceof L1)return new L1(n(a.value0));if(a instanceof A1)return new A1(n(a.value0));if(a instanceof sy)return new sy(a.value0,n(a.value1));if(a instanceof cy)return new cy(a.value0,n(a.value1));if(a instanceof I1)return new I1(n(a.value0));if(a instanceof R1)return new R1(a.value0,n(a.value1));if(a instanceof $1)return new $1(a.value0,n(a.value1));if(a instanceof ly)return new ly(a.value0,n(a.value1));if(a instanceof H1)return new H1(a.value0,n(a.value1));if(a instanceof fy)return new fy(a.value0,n(a.value1));if(a instanceof O1)return new O1(a.value0,n(a.value1));if(a instanceof dy)return new dy(a.value0,n(a.value1));if(a instanceof py)return new py(a.value0,n(a.value1));if(a instanceof P1)return new P1(a.value0,n(a.value1));if(a instanceof k1)return new k1(a.value0,n(a.value1));if(a instanceof N1)return new N1(function(h){return n(a.value0(h))});if(a instanceof B1)return new B1(a.value0,n(a.value1));if(a instanceof W1)return new W1(function(h){return n(a.value0(h))});if(a instanceof U1)return new U1(a.value0,n(a.value1));if(a instanceof q1)return new q1(function(h){return n(a.value0(h))});if(a instanceof V1)return new V1(a.value0,n(a.value1));if(a instanceof hy)return new hy(a.value0,a.value1,n(a.value2));if(a instanceof z1)return new z1(a.value0,a.value1,n(a.value2));if(a instanceof G1)return new G1(a.value0,function(h){return n(a.value1(h))});if(a instanceof _y)return new _y(n(a.value0));if(a instanceof vy)return new vy(n(a.value0));if(a instanceof J1)return new J1(a.value0,function(h){return n(a.value1(h))});if(a instanceof j1)return new j1(a.value0,a.value1,n(a.value2));if(a instanceof K1)return new K1(a.value0,a.value1,a.value2,n(a.value3));if(a instanceof Q1)return new Q1(a.value0,function(h){return n(a.value1(h))});if(a instanceof X1)return new X1(function(h){return n(a.value0(h))});if(a instanceof Y1)return new Y1(a.value0,a.value1,n(a.value2));if(a instanceof Z1)return new Z1(a.value0,a.value1,n(a.value2));if(a instanceof eM)return new eM(a.value0,a.value1,n(a.value2));if(a instanceof tM)return new tM(a.value0,a.value1,function(h){return n(a.value2(h))});if(a instanceof nM)return new nM(a.value0,n(a.value1));if(a instanceof rM)return new rM(a.value0,function(h){return n(a.value1(h))});if(a instanceof oM)return new oM(a.value0,function(h){return n(a.value1(h))});if(a instanceof aM)return new aM(a.value0,n(a.value1));if(a instanceof iM)return new iM(a.value0,n(a.value1));if(a instanceof uM)return new uM(a.value0,n(a.value1));if(a instanceof sM)return new sM(a.value0,function(h){return n(a.value1(h))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 582, column 1 - line 648, column 64): "+[n.constructor.name,a.constructor.name])}}}},mi=ir,JB=jB(mi),Cne=Z(mi);var lM=hr,bne=X(lM),KB=function(e){var t=e.MonadEffect0(),n=t.Monad0(),a=vne(n),h=n.Bind1(),o=Wi(h),r=Z(o),l=Mr(Xu(n)),u=Le(Za(t)),i=jB(o),s=X(qd(n.Applicative0())),f=Cn(j_(e)),p=na(Dne(h.Apply0().Functor0()));return function(d){var c=function(v){if(v instanceof h1)return a(v.value0);if(v instanceof ey)return r(l)(function(m){return u(Fo(v.value0)(Ch(m.canvasElement)))});if(v instanceof _1)return r(l)(function(m){return i(u(wh(m.canvasElement)(v.value0)))(function(){return s(v.value1)})});if(v instanceof ty)return r(l)(function(m){return u(Fo(v.value0)(bh(m.canvasElement)))});if(v instanceof v1)return r(l)(function(m){return i(u(Sh(m.canvasElement)(v.value0)))(function(){return s(v.value1)})});if(v instanceof m1)return r(l)(function(m){return u(Fo(v.value0)(UB(m.canvasElement)))});if(v instanceof g1)return r(l)(function(m){return i(u(WB(m.canvasElement)(v.value0)))(function(){return s(v.value1)})});if(v instanceof ny)return r(l)(function(m){return u(Fo(v.value0)(wC(m.canvasElement)))});if(v instanceof y1)return r(l)(function(m){return u(Fo(v.value0)(ST(m.canvasElement)))});if(v instanceof ry)return r(l)(function(m){return i(u(ET(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof D1)return r(l)(function(m){return i(u(TT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof oy)return r(l)(function(m){return i(u(MT(m.context2D)(El(v.value0))))(function(){return s(v.value1)})});if(v instanceof ay)return r(l)(function(m){return i(u(FT(m.context2D)(El(v.value0))))(function(){return s(v.value1)})});if(v instanceof C1)return r(l)(function(m){return i(u(LT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof b1)return r(l)(function(m){return i(u(AT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof w1)return r(l)(function(m){return i(u(IT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof S1)return r(l)(function(m){return i(u(xT(m.context2D)(El(v.value0))))(function(){return s(v.value1)})});if(v instanceof E1)return r(l)(function(m){return i(u(RT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof T1)return r(l)(function(m){return i(u(NB(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof M1)return r(l)(function(m){return i(u(kB(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof F1)return r(l)(function(m){return i(u(BB(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof x1)return r(l)(function(m){return i(u($T(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof iy)return r(l)(function(m){return i(u(Kg(m.context2D)))(function(){return s(v.value0)})});if(v instanceof uy)return r(l)(function(m){return i(u(Qg(m.context2D)))(function(){return s(v.value0)})});if(v instanceof L1)return r(l)(function(m){return i(u(Xg(m.context2D)))(function(){return s(v.value0)})});if(v instanceof A1)return r(l)(function(m){return i(u(HT(m.context2D)))(function(){return s(v.value0)})});if(v instanceof sy)return r(l)(function(m){return i(u(OT(m.context2D)(v.value0.x)(v.value0.y)))(function(){return s(v.value1)})});if(v instanceof cy)return r(l)(function(m){return i(u(PT(m.context2D)(v.value0.x)(v.value0.y)))(function(){return s(v.value1)})});if(v instanceof I1)return r(l)(function(m){return i(u(kT(m.context2D)))(function(){return s(v.value0)})});if(v instanceof R1)return r(l)(function(m){return i(u(NT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof $1)return r(l)(function(m){return i(u(BT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof ly)return r(l)(function(m){return i(u(WT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof H1)return r(l)(function(m){return i(u(UT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof fy)return r(l)(function(m){return i(u(qT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof O1)return r(l)(function(m){return i(u(VT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof dy)return r(l)(function(m){return i(u(zT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof py)return r(l)(function(m){return i(u(GT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof P1)return r(l)(function(m){return i(u(JT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof k1)return r(l)(function(m){return i(u(jT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof N1)return r(l)(function(m){return u(Fo(v.value0)(HB(m.context2D)))});if(v instanceof B1)return r(l)(function(m){return i(u(PB(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof W1)return r(l)(function(m){return u(Fo(v.value0)($B(m.context2D)))});if(v instanceof U1)return r(l)(function(m){return i(u(OB(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof q1)return r(l)(function(m){return u(Fo(function(y){return v.value0(gne(y))})(KT(m.context2D)))});if(v instanceof V1)return r(l)(function(m){return i(u(QT(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof hy)return r(l)(function(m){return i(u(XT(m.context2D)(v.value0)(v.value1.x)(v.value1.y)))(function(){return s(v.value2)})});if(v instanceof z1)return r(l)(function(m){return i(u(YT(m.context2D)(v.value0)(v.value1.x)(v.value1.y)))(function(){return s(v.value2)})});if(v instanceof G1)return r(l)(function(m){return u(Fo(v.value1)(ZT(m.context2D)(v.value0)))});if(v instanceof _y)return r(l)(function(m){return i(u(Yg(m.context2D)))(function(){return s(v.value0)})});if(v instanceof vy)return r(l)(function(m){return i(u(Zg(m.context2D)))(function(){return s(v.value0)})});if(v instanceof J1)return r(l)(function(m){return u(Fo(v.value1)(e1(m.context2D)(v.value0.x)(v.value0.y)(v.value0.width)(v.value0.height)))});if(v instanceof j1)return r(l)(function(m){return i(u(n1(m.context2D)(v.value0)(v.value1.x)(v.value1.y)))(function(){return s(v.value2)})});if(v instanceof K1)return r(l)(function(m){return i(u(t1(m.context2D)(v.value0)(v.value1.x)(v.value1.y)(v.value2.x)(v.value2.y)(v.value2.width)(v.value2.height)))(function(){return s(v.value3)})});if(v instanceof Q1)return r(l)(function(m){return u(Fo(v.value1)(r1(m.context2D)(v.value0.width)(v.value0.height)))});if(v instanceof X1)return r(l)(function(m){return s(v.value0(m.canvasElement))});if(v instanceof Y1)return r(l)(function(m){return i(u(o1(m.context2D)(v.value0)(v.value1.x)(v.value1.y)))(function(){return s(v.value2)})});if(v instanceof Z1)return r(l)(function(m){return i(u(a1(m.context2D)(v.value0)(v.value1.x)(v.value1.y)(v.value1.width)(v.value1.height)))(function(){return s(v.value2)})});if(v instanceof eM)return r(l)(function(m){return i(u(i1(m.context2D)(v.value0)(v.value1.source.x)(v.value1.source.y)(v.value1.source.width)(v.value1.source.height)(v.value1.target.x)(v.value1.target.y)(v.value1.target.width)(v.value1.target.height)))(function(){return s(v.value2)})});if(v instanceof tM)return r(l)(function(m){return u(Fo(v.value2)(qB(m.context2D)(v.value0)(v.value1)))});if(v instanceof nM)return r(l)(function(m){return i(u(u1(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof rM)return r(l)(function(m){return u(Fo(v.value1)(s1(m.context2D)(v.value0)))});if(v instanceof oM)return r(l)(function(m){return u(Fo(v.value1)(c1(m.context2D)(v.value0)))});if(v instanceof aM)return r(l)(function(m){return i(u(l1(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof iM)return r(l)(function(m){return i(u(f1(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof uM)return r(l)(function(m){return i(u(d1(m.context2D)(v.value0)))(function(){return s(v.value1)})});if(v instanceof sM)return r(l)(function(m){return f(mne(v.value1)(GB(m.canvasElement)(v.value0)))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 61, column 5 - line 61, column 25): "+[v.constructor.name])},_=p(Yu(d))(c);return function(v){return _(function(m){return m}(v))}}};var Rr=function(e){return yne(ft(e))},QB=function(e){return Rr(new sy(e,void 0))};var XB=function(e){return Rr(new cy(e,void 0))};var wne=function(){return Rr(new vy(void 0))}(),YB=function(e){return Rr(new dy(e,void 0))},Sne=function(){return Rr(new _y(void 0))}(),Eh=function(e){return JB(Sne)(function(){return Cne(e)(function(t){return JB(wne)(function(){return bne(t)})})})};var qf=function(e){return Rr(new oy(e,void 0))};var ZB=function(e){return Rr(new ry(e,void 0))};var e5=function(e){return Rr(new ay(e,void 0))};var t5=function(){return Rr(new uy(void 0))}();var n5=function(e){return Rr(new py(e,void 0))};var my=function(){return Rr(new ey(cM))}();var gy=function(){return Rr(new ty(cM))}();var r5=function(){return Rr(new ny(cM))}(),fM=function(e){return function(t){return Rr(new hy(e,t,void 0))}},yy=function(e){return Rr(new ly(e,void 0))};var Dy=function(e){return Rr(new fy(e,void 0))};var o5=function(){return Rr(new iy(void 0))}();var dM=Z(zt),Ene=Fr(Ht),Tne=En(Vs)(Kt),Mne=bt(Zl),Fne=it(Kt)($t),xne=yn(Ht),Lne=function(){function e(){}return e.value=new e,e}(),Ane=function(e){return mb([ui("canvas"),$$(e.dimensions.width),H$(e.dimensions.height)])},Ine=function(e){var t=Mne(e.MonadEffect0().Monad0()),n=KB(e);return function(a){var h=n(a);return function(o){return dM(Ene)(function(r){return $e(Tne)(r.canvas)(function(l){return t(Sa(h(o))(l))})})}}},Rne=function(e){var t=Le(Ln(e.MonadEffect0()));return function(n){return dM(Ir("canvas"))(function(a){return $e(Fne)(a)(function(h){return dM(t(Gg(h)))(function(o){return xne(function(r){var l={};for(var u in r)({}).hasOwnProperty.call(r,u)&&(l[u]=r[u]);return l.canvas=new B({canvasElement:h,context2D:o}),l})})})})}},Vf=function(e){var t=Rne(e),n=Ine(e);return function(a){return ln({initialState:function(h){return{dimensions:h,canvas:V.value}},render:Ane,eval:cn({receive:dt.receive,finalize:dt.finalize,handleAction:t,handleQuery:n(a),initialize:new B(Lne.value)})})}};function by(e){return function(t){return function(){return t.requestAnimationFrame(n=>e(n)())}}}var a5=Z(zt),f5=ot(at),i5=ut(Pe),u5=Z(wr),Hne=f5(zt),s5=ut($n),One=G(hp),Pne=Fr(Ht),c5=Z(mi),kne=f5(mi),d5={reflectSymbol:function(){return"canvas"}},Nne=qr()(d5)(pn),Bne=aa()(d5)(pn),p5=function(){function e(){}return e.value=new e,e}(),l5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),h5=function(){return Et.value}(),Wne=function(e){var t=Le(Ln(e.MonadEffect0()));return function(n){return function(a){if(a instanceof p5)return a5(t(jn))(function(h){var o=function(r){return function(){return Jn(h.listener)(r)(),i5(u5(oa)(by(o)))()}};return Hne(t(i5(u5(oa)(by(o)))))(function(){return s5(Rn(One(l5.create)(h.emitter)))})});if(a instanceof l5)return a5(Pne)(function(h){var o=Eh(c5(my)(function(r){return c5(gy)(function(l){return kne(Dy({x:0,y:0,width:r,height:l}))(function(){return h.animation(a.value0)})})}));return s5(Nne(h5)(void 0)(o))});throw new Error("Failed pattern match at Halogen.Canvas.Animate (line 58, column 16 - line 73, column 37): "+[a.constructor.name])}}},Une=function(e){var t=Vf(e);return function(n){var a=t(n);return function(h){return Bne(h5)(void 0)(a)(h.dimensions)}}},_5=function(e){var t=Une(e),n=Wne(e);return function(a){return ln({initialState:function(h){return{dimensions:h.dimensions,animation:h.animation}},render:t(a),eval:cn({handleQuery:dt.handleQuery,receive:dt.receive,finalize:dt.finalize,handleAction:n(a),initialize:new B(p5.value)})})}};var hM=ne;var _M=Z(zt),Jne=Fr(Ht),v5=ut($n),g5={reflectSymbol:function(){return"canvas"}},vM=qr()(g5)(pn),jne=it(Kt)($t),y5=ot(at),Kne=y5(zt),Qne=Ro(Ht),m5=Z(mi),Xne=y5(mi),Yne=aa()(g5)(pn),Zne=he(_e),D5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),C5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),b5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),w5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Sy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ey=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),S5=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ty=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),My=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),E5=function(){function e(){}return e.value=new e,e}(),gi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ere=function(e){if(e instanceof D5)return Kr(hM(e.value0));if(e instanceof C5)return Kr(hM(e.value0));if(e instanceof b5)return Kr(No(e.value0));if(e instanceof w5)return Kr(No(e.value0));if(e instanceof Sy)return Kr(No(e.value0));if(e instanceof Ey)return Kr(No(e.value0));if(e instanceof S5)return Kr(No(e.value0));if(e instanceof Ty)return Kr(No(e.value0));if(e instanceof My)return Kr(No(e.value0));throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 104, column 1 - line 104, column 55): "+[e.constructor.name])},wy=function(){return Et.value}(),tre=function(e){var t=Le(Ln(e.MonadEffect0()));return function(n){return function(a){if(a instanceof E5)return _M(Jne)(function(h){return v5(vM(wy)(void 0)(Eh(h.draw(h.world))))});if(a instanceof gi)return _M(vM(wy)(void 0)(r5))(function(h){return $e(jne)(h)(function(o){return Kne(t(ere(a.value0)))(function(){return _M(Qne(function(r){var l={};for(var u in r)({}).hasOwnProperty.call(r,u)&&(l[u]=r[u]);return l.world=r.input(a.value0)(o)(r.world),l}))(function(r){return v5(vM(wy)(void 0)(Eh(m5(my)(function(l){return m5(gy)(function(u){return Xne(Dy({x:0,y:0,width:l,height:u}))(function(){return r.draw(r.world)})})}))))})})})});throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 88, column 16 - line 102, column 23): "+[a.constructor.name])}}},nre=function(e){var t=Vf(e);return function(n){var a=t(n);return function(h){return fn([LH(function(o){return gi.create(D5.create(o))}),AH(function(o){return gi.create(C5.create(o))}),Tc(function(o){return gi.create(b5.create(o))}),xH(function(o){return gi.create(w5.create(o))}),IH(function(o){return gi.create(Sy.create(o))}),OH(function(o){return gi.create(Ey.create(o))}),RH(function(o){return gi.create(S5.create(o))}),$H(function(o){return gi.create(Ty.create(o))}),HH(function(o){return gi.create(My.create(o))})])([Yne(wy)(void 0)(a)(h.dimensions)])}}},T5=function(e){var t=nre(e),n=tre(e);return function(a){return ln({initialState:Zne,render:t(a),eval:cn({handleQuery:dt.handleQuery,receive:dt.receive,finalize:dt.finalize,handleAction:n(a),initialize:new B(E5.value)})})}};var mM=function(e){return function(t){var n=Zs(t.Profunctor0()),a=Tl(t);return function(h){return n(e)(function(o){return o.value1(o.value0)})(a(h))}}};var F5=X(ms),M5=G(Dt),x5=ot(at),$r=x5(Rc),pu=Z(Rc),ire=Br(Vt),ure=Bl(Vt)(gt),sre=ea(Vt),cre=he(_e),Th=x5(ir),lre=An(hr),Fy=Z(ir),fre=En(Vs)(hr),dre=it(hr)($t),L5=it(ms)($t);var hu={cmd:function(e){return mM(function(t){return new ee(t.command,function(n){return{prompt:t.prompt,commandEnv:t.commandEnv,foreground:t.foreground,command:n}})})(e)},prompt:function(e){return mM(function(t){return new ee(t.prompt,function(n){return{command:t.command,commandEnv:t.commandEnv,foreground:t.foreground,prompt:n}})})(e)}},Fh=function(e){var t=Le(gf(e));return function(n){return function(a){return a instanceof zS?n(a.value0):a instanceof GS?t(ti("line feed")):F5(void 0)}}},xh=function(e){return e.prompt},xy=xh(hu)(gs),Lh=function(e){return e.cmd},A5=Lh(hu),Mh=A5(jo),I5=A5(gs),pre=function(e){return function(t){return function(n){var a=function(o){var r=`\r
  help\r
    show this help text`,l=function(u){return`\r
  `+(u.name+(`\r
    `+mo(`\r
    `)(u.description)))};return r+mo("")(M5(l)(o))},h=function(o){return $r(Nt(Qn(a(n))))(function(){return pu(So)(function(r){return $r(Nt(en(fo(r)(xy))))(function(){return On(Eo(Mh)(""))})})})};return ire("help")(h)(ure(M5(function(o){return new ee(o.name,o.cmd)})(n)))}}},Ly=function(e){var t=pre(e);return function(n){var a=t(n);return function(h){var o=a(h);return pu(So)(function(r){var l=M0(function(s){return!lL(s)})(W0(" ")(fo(r)(I5))),u=Li(l);if(u instanceof V)return $r(Nt(Qn("")))(function(){return pu(So)(function(s){return $r(Nt(en(fo(s)(xy))))(function(){return On(Eo(Mh)(""))})})});if(u instanceof B){var i=sre(u.value0)(o);if(i instanceof B)return i.value0(Qe([])(cre)(S0(l)));if(i instanceof V)return $r(Nt(Qn(`\r
unrecognised command "`+(u.value0+'" - type "help" to see the available commands'))))(function(){return pu(So)(function(s){return $r(Nt(en(fo(s)(xy))))(function(){return On(Eo(Mh)(""))})})});throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 199, column 7 - line 206, column 34): "+[i.constructor.name])}throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 191, column 3 - line 206, column 34): "+[u.constructor.name])})}}};var hre=function(e){return function(t){var n=Lh(t),a=n(gs),h=xh(t)(gs),o=n(jo);return pu(So)(function(r){return $r(Nt(Fy(Km(Xw))(function(l){var u=l===0;return u?Th(en("\x1BM"))(function(){return Fy(Km(Fy(Yw)(function(i){return Fy(Qw(i-1|0))(function(s){return fre(Kw)(s)})})))(function(i){return Th(en("\x9BK"))(function(){return $e(dre)(i)(function(s){var f=(Qs(fo(r)(a))-1|0)<=s;return f?Th(en(fo(r)(h)))(function(){return en(y_(1)(fo(r)(a)))}):en(y_(1)(iL(s)(fo(r)(a))))})})})}):lre(Qs(fo(r)(a))>0)(en("\b \b"))})))(function(){return On(tg(o)(y_(1)))})})}},Ah=function(e){var t=hre(e),n=Le(gf(e));return function(a){var h=Lh(a)(jo),o=xh(a)(gs),r=t(a);return function(l){return function(u){return u===""?$r(On(Eo(h)("")))(function(){return pu(So)(function(i){return Nt(Th(en("^C"))(function(){return en(`\r
`+fo(i)(o))}))})}):u==="\r"?l:u==="\x7F"?r:u>=" "&&u<="~"||u>="\xA0"?$r(On(tg(h)(function(i){return i+u})))(function(){return Nt(en(u))}):$r(n(ti("non-printable: "+u)))(function(){return F5(void 0)})}}}},_re=function(e){var t=e.MonadEffect0(),n=Fh(t),a=Ah(t)(hu),h=Ly(e);return function(o){var r=h(o);return pu(So)(function(l){return $r($e(L5)(l.foreground)(function(u){return u.kill}))(function(){return $r(On(function(u){return{prompt:u.prompt,command:u.command,commandEnv:u.commandEnv,foreground:V.value}}))(function(){return $r(On(Eo(Mh)("")))(function(){return pu(So)(function(u){return $r(Nt(Th(ko(Ra(!0)))(function(){return en(`\r
`+fo(u)(xy))})))(function(){return Ia(n(a(r(l.commandEnv))))})})})})})})}},vre=function(e){return pu(So)(function(t){return $r($e(L5)(t.foreground)(function(n){return n.stdin(fo(t)(I5))}))(function(){return $r(Nt(en(`\r
`)))(function(){return On(Eo(Mh)(""))})})})},R5=function(e){var t=e.MonadEffect0(),n=Fh(t),a=_re(e),h=Ah(t)(hu),o=vre(e);return function(r){var l=a(r);return n(function(u){return u===""?$r(Nt(en("^C")))(function(){return l}):h(o)(u)})}};var Ay=Z(Rc),bM=ot(at),vn=bM(Rc),Iy=De(Is),gre=xh(hu)(gs),zf=Lh(hu)(jo),yre=Or(CP),Ry=Z(ir),$5=Me(to),Dre=Me(bF),Cre=Me(Ei),wM=Ew(),SM={reflectSymbol:function(){return"button"}},bre=wM(SM)(pn)(),H5=ut(yP),P5=Tw(),wre=P5(SM)(pn)(),EM=Mw(),Sre=EM(SM)(pn)(),Gf=bM(ir),k5={reflectSymbol:function(){return"editor"}},O5=EM(k5)(pn)(),Ere=wM(k5)(pn)(),Xc=X(ms),Tre=G(Dt),Mre=it(ms)(gt),TM={reflectSymbol:function(){return"canvas"}},gM=wM(TM)(pn)(),yM=EM(TM)(pn)(),po=bM(mi),Fre=P5(TM)(pn)(),xre=it(lM)(gt),Lre=G(mt),Are=ut($n),N5={reflectSymbol:function(){return"shell"}},Ire=qr()(N5)(pn),Rre=aa()(N5)(pn),$re=function(){function e(){}return e.value=new e,e}();var B5=function(){return Et.value}(),DM=function(){return Et.value}(),Yc=function(){return Et.value}(),CM=function(){return Et.value}(),MM=function(e){var t=Yk(e),n=R5(e),a=e.MonadEffect0(),h=Fh(a),o=Ah(a)(hu),r=Ly(e),l=_B(e),u=Le(gf(a)),i=Cn(gP(e)),s=Vf(e),f=_5(e),p=T5(e);return function(d){var c=n(d),_=r(d),v=l(d),m=s(d),y=f(d),C=p(d),T=Ay(So)(function(g){return vn(Nt(en(`\r
`+fo(g)(gre))))(function(){return On(Eo(zf)(""))})}),D=function(g){return ve(yre(g)(T))};return[{name:"rows",description:["prints the number of rows in the terminal"],cmd:D(Nt(Ry(Qm)(function(){var g=Iy(`\r
`);return function(w){return Qn(g($5(w)))}}())))},{name:"cols",description:["prints the number of columns in the terminal"],cmd:D(Nt(Ry(Qm)(function(){var g=Iy(`\r
`);return function(w){return Qn(g($5(w)))}}())))},{name:"blinking",description:["prints a boolean indicating whether the cursor is blinking"],cmd:D(Nt(Ry(ko(aS))(function(){var g=Iy(`\r
`);return function(w){return Qn(g(Dre(w)))}}())))},{name:"blinkon",description:["turns on cursor blinking"],cmd:D(Nt(ko(Ra(!0))))},{name:"blinkoff",description:["turns off cursor blinking"],cmd:D(Nt(ko(Ra(!1))))},{name:"fontFamily",description:["prints the font family of the terminal"],cmd:D(Nt(Ry(ko(oS))(function(){var g=Iy(`\r
`);return function(w){return Qn(g(Cre(w)))}}())))},{name:"button",description:["creates a button as a subprocess.","the subprocess can be cancelled with ^C","accepts button text as argument.",'clicking the button prints "click!" to the terminal.'],cmd:function(g){return vn(On(Eo(zf)("")))(function(){return vn(bre(CM)(void 0)(t)(mo(" ")(g))(ve(Nt(Qn("click!")))))(function(){var w={stdin:function(F){return H5(wre(CM)(void 0)(new Xk(F,void 0)))},kill:Sre(CM)(void 0)};return vn(On(function(F){return{prompt:F.prompt,command:F.command,commandEnv:F.commandEnv,foreground:new B(w)}}))(function(){return vn(Nt(Gf(ko(Ra(!1)))(function(){return en(`\r
`)})))(function(){return Ia(c)})})})})}},{name:"edit",description:["opens a file in the editor as a subprocess.","the subprocess can be cancelled with ^C","accepts the file path as argument."],cmd:function(g){return g.length===1&&Qs(g[0])>0?vn(On(Eo(zf)("")))(function(){var w=vn(O5(DM)(void 0))(function(){return vn(Nt(en("> ")))(function(){return Ia(h(o(_(MM(e)(d)))))})});return vn(Ere(DM)(void 0)(v)(g[0])(ve(w)))(function(){var F={stdin:ve(Xc(void 0)),kill:O5(DM)(void 0)};return vn(On(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new B(F)}}))(function(){return vn(Nt(Gf(ko(Ra(!1)))(function(){return en(`\r
`)})))(function(){return Ia(c)})})})}):D(Nt(Qn(`\r
this command expects a single file name as its argument`)))(g)}},{name:"ls",description:["lists files in the file system"],cmd:D(Ay(u(Dh))(function(g){return Ay(i(uB(g)))(function(w){return Nt(Qn(`\r
`+mo(" ")(Tre(function(F){return F})(w))))})}))},{name:"rm",description:["remove files from the file system"],cmd:function(g){return Ay(u(Dh))(function(w){return vn(Mre(function(F){return i(sB(w)(F))})(g))(function(){return T})})}},{name:"canvas",description:["canvas example"],cmd:function(g){return vn(On(Eo(zf)("")))(function(){return vn(gM(Yc)(void 0)(m)({width:200,height:200})(ve(Xc(void 0))))(function(){var w={stdin:ve(Xc(void 0)),kill:yM(Yc)(void 0)},F=po(qf(Ys(255)(255)(200)))(function(){return po(yy({x:0,y:0,width:200,height:200}))(function(){return po(qf(Ys(0)(0)(0)))(function(){return fM("hello")({x:50,y:50})})})});return vn(H5(Fre(Yc)(void 0)(F)))(function(){return vn(On(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new B(w)}}))(function(){return vn(Nt(Gf(ko(Ra(!1)))(function(){return en(`\r
`)})))(function(){return Ia(c)})})})})})}},{name:"animation",description:["canvas animation example"],cmd:function(g){return vn(On(Eo(zf)("")))(function(){var w=function(F){return po(qf(Ys(255)(255)(200)))(function(){return po(yy({x:0,y:0,width:200,height:200}))(function(){return po(qf(Ys(0)(0)(0)))(function(){return po(n5({translateX:50,translateY:50}))(function(){return po(YB(F/1e3))(function(){return fM("hello")({x:0,y:0})})})})})})};return vn(gM(Yc)(void 0)(y)({dimensions:{width:200,height:200},animation:w})(ve(Xc(void 0))))(function(){var F={stdin:ve(Xc(void 0)),kill:yM(Yc)(void 0)};return vn(On(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new B(F)}}))(function(){return vn(Nt(Gf(ko(Ra(!1)))(function(){return en(`\r
`)})))(function(){return Ia(c)})})})})}},{name:"sketch",description:["canvas drawing program example"],cmd:function(g){return vn(On(Eo(zf)("")))(function(){var w={dimensions:{width:400,height:400},world:{line:V.value,lines:[]},draw:function(F){return po(qf(Ys(255)(255)(200)))(function(){return po(yy({x:0,y:0,width:400,height:400}))(function(){return po(e5(Ys(0)(0)(0)))(function(){return po(ZB(5))(function(){return $e(xre)(Qe(F.lines)($e(Mn)(F.lines))(F.line))(function(b){return po(o5)(function(){return po(XB(b.value0))(function(){return po(QB(b.value1))(function(){return t5})})})})})})})})},input:function(F){return function(b){return function(E){if(F instanceof Ty)return{lines:E.lines,line:V.value};if(F instanceof Ey)return{line:V.value,lines:function(){if(E.line instanceof V)return E.lines;if(E.line instanceof B)return Mn(E.line.value0)(E.lines);throw new Error("Failed pattern match at Examples.Halogen.XTerm.Component (line 232, column 34 - line 234, column 57): "+[E.line.constructor.name])}()};if(F instanceof Sy){var M={x:Er(ng(F.value0))-b.left,y:Er(rg(F.value0))-b.top};return{lines:E.lines,line:Qe(new B(new ee(M,M)))(B.create)(E.line)}}if(F instanceof My){var M={x:Er(ng(F.value0))-b.left,y:Er(rg(F.value0))-b.top},S=function(L){return new ee(L.value0,M)};return{lines:E.lines,line:Lre(S)(E.line)}}return E}}}};return vn(gM(Yc)(void 0)(C)(w)(ve(Xc(void 0))))(function(){var F={stdin:ve(Xc(void 0)),kill:yM(Yc)(void 0)};return vn(On(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new B(F)}}))(function(){return vn(Nt(Gf(ko(Ra(!1)))(function(){return en(`\r
`)})))(function(){return Ia(c)})})})})}}]}},Hre=function(e){var t=e.MonadEffect0(),n=Fh(t),a=Ah(t)(hu),h=Ly(e),o=MM(e);return function(r){var l=h(r),u=o(r);return function(i){return Are(Ire(B5)(void 0)(vn(Nt(Gf(qS(!0))(function(){return en("> ")})))(function(){return Ia(n(a(l(u))))})))}}},Ore=function(e){var t=MM(e);return function(n){return{prompt:"> ",command:"",foreground:V.value,commandEnv:t(n)}}},Pre=function(e){var t=Zm(e),n=Ore(e);return function(a){return ve(Rre(B5)(void 0)(t)(n(a)))}},W5=function(e){var t=Pre(e),n=Hre(e);return function(a){return ln({initialState:ve(void 0),render:t(a),eval:cn({handleQuery:dt.handleQuery,receive:dt.receive,finalize:dt.finalize,handleAction:n(a),initialize:new B($re.value)})})}};var Nre=G(mt),U5=R$(Tv),G5=G(Dt),Bre=Ai(Wn),Wre=Z(zt),q5=Z(wr),J5=ot(at),V5=J5(zt),Ure=gI(Rl),z5=yn(Ht),j5=ea(Vt),qre=X(Kt),$y=J5(Xo),Vre=RL(cA),zre=aa()({reflectSymbol:function(){return"example"}})(Vt),Gre=Bl(Vt)(gt),Jre=W5(pc)(es),jre=ut(xr),K5=function(){function e(){}return e.value=new e,e}(),FM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Kre=function(e){return Qe(new FM(""))(FM.create)(Nre(function(t){return t.value})(Ib(e)))},Qre=function(e){var t=function(n){return hb([U5(n.id)])([Ar(n.name)])};return _b([U5(e.selected),df(Kre)])(G5(t)(Bre(Wd(e.examples))))},Xre=function(e){var t=Le(Ln(e));return function(n){if(n instanceof K5)return Wre(t(q5(q5(oa)(Eb))(Sb)))(function(a){return V5(t(Ure(D_(1)(a))))(function(){return V5(z5(function(h){var o=j5(D_(1)(a))(h.examples);if(o instanceof V)return h;if(o instanceof B){var r={};for(var l in h)({}).hasOwnProperty.call(h,l)&&(r[l]=h[l]);return r.selected=o.value0.id,r}throw new Error("Failed pattern match at Main (line 95, column 10 - line 97, column 46): "+[o.constructor.name])}))(function(){return qre(void 0)})})});if(n instanceof FM)return z5(function(a){var h={};for(var o in a)({}).hasOwnProperty.call(a,o)&&(h[o]=a[o]);return h.selected=n.value0,h});throw new Error("Failed pattern match at Main (line 90, column 3 - line 99, column 62): "+[n.constructor.name])}},Yre=function(){return Et.value}(),Zre=function(e){return fn([Un($y(ya(ac))(function(){return ic(sA)}))])([fn([Un($y(ya(ac))(function(){return $y(ic(Ol))(function(){return $y(lA(Vre))(function(){return Nd(kd)(et(1))(Ga)})})}))])([db([Ar("Example")]),fn([Un(I_(et(0))(et(0))(et(0))(et(10)))])([Qre(e)])]),fn([Un(Nd(kd)(et(1))(Ga))])([function(){var t=j5(e.selected)(e.examples);if(t instanceof B)return zre(Yre)(t.value0.id)(t.value0.component)(void 0);if(t instanceof V)return lo([]);throw new Error("Failed pattern match at Main (line 139, column 11 - line 141, column 34): "+[t.constructor.name])}()])])},eoe=function(){return ln({initialState:function(e){return{selected:e.value0,examples:Gre(G5(function(t){return new ee(t.id,t)})(e.value1))}},render:Zre,eval:cn({handleQuery:dt.handleQuery,receive:dt.receive,finalize:dt.finalize,handleAction:Xre(Dn),initialize:new B(K5.value)})})}(),Q5=xb(Z(jt)(Lb)(function(e){var t=[{id:"xterm",name:"XTerm",component:Jre},{id:"infinite-scroll",name:"Infinite Scroll",component:Gk}];return jre(Cw(eoe)(new ee("xterm",t))(e))}));Q5();})();
/*! Bundled license information:

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)
  (*! @license
  ==========================================================================
  SproutCore -- JavaScript Application Framework
  copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
  
  SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.
  
  For more information about SproutCore, visit http://www.sproutcore.com
  
  
  ==========================================================================
  @license *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
