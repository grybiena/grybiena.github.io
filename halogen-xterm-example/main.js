(()=>{var UO=Object.create;var KS=Object.defineProperty;var qO=Object.getOwnPropertyDescriptor;var zO=Object.getOwnPropertyNames;var VO=Object.getPrototypeOf,GO=Object.prototype.hasOwnProperty;var ht=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var JO=(e,t,n,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let v of zO(t))!GO.call(e,v)&&v!==n&&KS(e,v,{get:()=>t[v],enumerable:!(c=qO(t,v))||c.enumerable});return e};var Fa=(e,t,n)=>(n=e!=null?UO(VO(e)):{},JO(t||!e||!e.__esModule?KS(n,"default",{value:e,enumerable:!0}):n,e));var $h=ht((SF,Rh)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var n=function(i,r,u){if(typeof i!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(u=r),n.modules[i]||(n.payloads[i]=u,n.modules[i]=null)};n.modules={},n.payloads={};var c=function(i,r,u){if(typeof r=="string"){var l=a(i,r);if(l!=null)return u&&u(),l}else if(Object.prototype.toString.call(r)==="[object Array]"){for(var p=[],f=0,o=r.length;f<o;++f){var h=a(i,r[f]);if(h==null&&v.original)return;p.push(h)}return u&&u.apply(null,p)||!0}},v=function(i,r){var u=c("",i,r);return u==null&&v.original?v.original.apply(this,arguments):u},s=function(i,r){if(r.indexOf("!")!==-1){var u=r.split("!");return s(i,u[0])+"!"+s(i,u[1])}if(r.charAt(0)=="."){var l=i.split("/").slice(0,-1).join("/");for(r=l+"/"+r;r.indexOf(".")!==-1&&p!=r;){var p=r;r=r.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return r},a=function(i,r){r=s(i,r);var u=n.modules[r];if(!u){if(u=n.payloads[r],typeof u=="function"){var l={},p={id:r,uri:"",exports:l,packaged:!0},f=function(h,_){return c(r,h,_)},o=u(f,l,p);l=o||p.exports,n.modules[r]=l,delete n.payloads[r]}u=n.modules[r]=l||u}return u};function d(i){var r=t;i&&(t[i]||(t[i]={}),r=t[i]),(!r.define||!r.define.packaged)&&(n.original=r.define,r.define=n,r.define.packaged=!0),(!r.require||!r.require.packaged)&&(v.original=r.require,r.require=v,r.require.packaged=!0)}d(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function c(v,s,a){Object.defineProperty(v,s,{value:a,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||c(String.prototype,"startsWith",function(v,s){return s=s||0,this.lastIndexOf(v,s)===s}),String.prototype.endsWith||c(String.prototype,"endsWith",function(v,s){var a=this;(s===void 0||s>a.length)&&(s=a.length),s-=v.length;var d=a.indexOf(v,s);return d!==-1&&d===s}),String.prototype.repeat||c(String.prototype,"repeat",function(v){for(var s="",a=this;v>0;)v&1&&(s+=a),(v>>=1)&&(a+=a);return s}),String.prototype.includes||c(String.prototype,"includes",function(v,s){return this.indexOf(v,s)!=-1}),Object.assign||(Object.assign=function(v){if(v==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(v),a=1;a<arguments.length;a++){var d=arguments[a];d!=null&&Object.keys(d).forEach(function(i){s[i]=d[i]})}return s}),Object.values||(Object.values=function(v){return Object.keys(v).map(function(s){return v[s]})}),Array.prototype.find||c(Array.prototype,"find",function(v){for(var s=this.length,a=arguments[1],d=0;d<s;d++){var i=this[d];if(v.call(a,i,d,this))return i}}),Array.prototype.findIndex||c(Array.prototype,"findIndex",function(v){for(var s=this.length,a=arguments[1],d=0;d<s;d++){var i=this[d];if(v.call(a,i,d,this))return d}}),Array.prototype.includes||c(Array.prototype,"includes",function(v,s){return this.indexOf(v,s)!=-1}),Array.prototype.fill||c(Array.prototype,"fill",function(v){for(var s=this,a=s.length>>>0,d=arguments[1],i=d>>0,r=i<0?Math.max(a+i,0):Math.min(i,a),u=arguments[2],l=u===void 0?a:u>>0,p=l<0?Math.max(a+l,0):Math.min(l,a);r<p;)s[r]=v,r++;return s}),Array.of||c(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,n){t.deepCopy=function c(v){if(typeof v!="object"||!v)return v;var s;if(Array.isArray(v)){s=[];for(var a=0;a<v.length;a++)s[a]=c(v[a]);return s}if(Object.prototype.toString.call(v)!=="[object Object]")return v;s={};for(var a in v)s[a]=c(v[a]);return s}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";t.last=function(s){return s[s.length-1]},t.stringReverse=function(s){return s.split("").reverse().join("")},t.stringRepeat=function(s,a){for(var d="";a>0;)a&1&&(d+=s),(a>>=1)&&(s+=s);return d};var c=/^\s\s*/,v=/\s\s*$/;t.stringTrimLeft=function(s){return s.replace(c,"")},t.stringTrimRight=function(s){return s.replace(v,"")},t.copyObject=function(s){var a={};for(var d in s)a[d]=s[d];return a},t.copyArray=function(s){for(var a=[],d=0,i=s.length;d<i;d++)s[d]&&typeof s[d]=="object"?a[d]=this.copyObject(s[d]):a[d]=s[d];return a},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(s){for(var a={},d=0;d<s.length;d++)a[s[d]]=1;return a},t.createMap=function(s){var a=Object.create(null);for(var d in s)a[d]=s[d];return a},t.arrayRemove=function(s,a){for(var d=0;d<=s.length;d++)a===s[d]&&s.splice(d,1)},t.escapeRegExp=function(s){return s.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(s){return(""+s).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(s,a){var d=[];return s.replace(a,function(i){d.push({offset:arguments[arguments.length-2],length:i.length})}),d},t.deferredCall=function(s){var a=null,d=function(){a=null,s()},i=function(r){return i.cancel(),a=setTimeout(d,r||0),i};return i.schedule=i,i.call=function(){return this.cancel(),s(),i},i.cancel=function(){return clearTimeout(a),a=null,i},i.isPending=function(){return a},i},t.delayedCall=function(s,a){var d=null,i=function(){d=null,s()},r=function(u){d==null&&(d=setTimeout(i,u||a))};return r.delay=function(u){d&&clearTimeout(d),d=setTimeout(i,u||a)},r.schedule=r,r.call=function(){this.cancel(),s()},r.cancel=function(){d&&clearTimeout(d),d=null},r.isPending=function(){return d},r},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(s,a,d){return d&&s.codePointAt(a)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var c=typeof navigator=="object"?navigator:{},v=(/mac|win|linux/i.exec(c.platform)||["other"])[0].toLowerCase(),s=c.userAgent||"",a=c.appName||"";t.isWin=v=="win",t.isMac=v=="mac",t.isLinux=v=="linux",t.isIE=a=="Microsoft Internet Explorer"||a.indexOf("MSAppHost")>=0?parseFloat((s.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((s.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=s.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(s.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(s.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(s.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(s.split(" Edge/")[1])||void 0,t.isAIR=s.indexOf("AdobeAIR")>=0,t.isAndroid=s.indexOf("Android")>=0,t.isChromeOS=s.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(s)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("./useragent"),v="http://www.w3.org/1999/xhtml";t.buildDom=function u(l,p,f){if(typeof l=="string"&&l){var o=document.createTextNode(l);return p&&p.appendChild(o),o}if(!Array.isArray(l))return l&&l.appendChild&&p&&p.appendChild(l),l;if(typeof l[0]!="string"||!l[0]){for(var h=[],_=0;_<l.length;_++){var m=u(l[_],p,f);m&&h.push(m)}return h}var y=document.createElement(l[0]),C=l[1],E=1;C&&typeof C=="object"&&!Array.isArray(C)&&(E=2);for(var _=E;_<l.length;_++)u(l[_],y,f);return E==2&&Object.keys(C).forEach(function(D){var g=C[D];D==="class"?y.className=Array.isArray(g)?g.join(" "):g:typeof g=="function"||D=="value"||D[0]=="$"?y[D]=g:D==="ref"?f&&(f[g]=y):D==="style"?typeof g=="string"&&(y.style.cssText=g):g!=null&&y.setAttribute(D,g)}),p&&p.appendChild(y),y},t.getDocumentHead=function(u){return u||(u=document),u.head||u.getElementsByTagName("head")[0]||u.documentElement},t.createElement=function(u,l){return document.createElementNS?document.createElementNS(l||v,u):document.createElement(u)},t.removeChildren=function(u){u.innerHTML=""},t.createTextNode=function(u,l){var p=l?l.ownerDocument:document;return p.createTextNode(u)},t.createFragment=function(u){var l=u?u.ownerDocument:document;return l.createDocumentFragment()},t.hasCssClass=function(u,l){var p=(u.className+"").split(/\s+/g);return p.indexOf(l)!==-1},t.addCssClass=function(u,l){t.hasCssClass(u,l)||(u.className+=" "+l)},t.removeCssClass=function(u,l){for(var p=u.className.split(/\s+/g);;){var f=p.indexOf(l);if(f==-1)break;p.splice(f,1)}u.className=p.join(" ")},t.toggleCssClass=function(u,l){for(var p=u.className.split(/\s+/g),f=!0;;){var o=p.indexOf(l);if(o==-1)break;f=!1,p.splice(o,1)}return f&&p.push(l),u.className=p.join(" "),f},t.setCssClass=function(u,l,p){p?t.addCssClass(u,l):t.removeCssClass(u,l)},t.hasCssString=function(u,l){var p=0,f;if(l=l||document,f=l.querySelectorAll("style")){for(;p<f.length;)if(f[p++].id===u)return!0}},t.removeElementById=function(u,l){l=l||document,l.getElementById(u)&&l.getElementById(u).remove()};var s,a=[];t.useStrictCSP=function(u){s=u,u==!1?d():a||(a=[])};function d(){var u=a;a=null,u&&u.forEach(function(l){i(l[0],l[1])})}function i(u,l,p){if(!(typeof document>"u")){if(a){if(p)d();else if(p===!1)return a.push([u,l])}if(!s){var f=p;!p||!p.getRootNode?f=document:(f=p.getRootNode(),(!f||f==p)&&(f=document));var o=f.ownerDocument||f;if(l&&t.hasCssString(l,f))return null;l&&(u+=`
/*# sourceURL=ace/css/`+l+" */");var h=t.createElement("style");h.appendChild(o.createTextNode(u)),l&&(h.id=l),f==o&&(f=t.getDocumentHead(o)),f.insertBefore(h,f.firstChild)}}}if(t.importCssString=i,t.importCssStylsheet=function(u,l){t.buildDom(["link",{rel:"stylesheet",href:u}],t.getDocumentHead(l))},t.scrollbarWidth=function(u){var l=t.createElement("ace_inner");l.style.width="100%",l.style.minWidth="0px",l.style.height="200px",l.style.display="block";var p=t.createElement("ace_outer"),f=p.style;f.position="absolute",f.left="-10000px",f.overflow="hidden",f.width="200px",f.minWidth="0px",f.height="150px",f.display="block",p.appendChild(l);var o=u&&u.documentElement||document&&document.documentElement;if(!o)return 0;o.appendChild(p);var h=l.offsetWidth;f.overflow="scroll";var _=l.offsetWidth;return h===_&&(_=p.clientWidth),o.removeChild(p),h-_},t.computedStyle=function(u,l){return window.getComputedStyle(u,"")||{}},t.setStyle=function(u,l,p){u[l]!==p&&(u[l]=p)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=c.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,c.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var r=document.createElement("div");t.HI_DPI&&r.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!c.isEdge&&typeof r.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),r=null}t.HAS_CSS_TRANSFORMS?t.translate=function(u,l,p){u.style.transform="translate("+Math.round(l)+"px, "+Math.round(p)+"px)"}:t.translate=function(u,l,p){u.style.top=Math.round(p)+"px",u.style.left=Math.round(l)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("./dom");t.get=function(v,s){var a=new XMLHttpRequest;a.open("GET",v,!0),a.onreadystatechange=function(){a.readyState===4&&s(a.responseText)},a.send(null)},t.loadScript=function(v,s){var a=c.getDocumentHead(),d=document.createElement("script");d.src=v,a.appendChild(d),d.onload=d.onreadystatechange=function(i,r){(r||!d.readyState||d.readyState=="loaded"||d.readyState=="complete")&&(d=d.onload=d.onreadystatechange=null,r||s())}},t.qualifyURL=function(v){var s=document.createElement("a");return s.href=v,s.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(c,v){c.super_=v,c.prototype=Object.create(v.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(c,v){for(var s in v)c[s]=v[s];return c},t.implement=function(c,v){t.mixin(c,v)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var c={},v=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};c._emit=c._dispatchEvent=function(a,d){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[a]||[],r=this._defaultHandlers[a];if(!(!i.length&&!r)){(typeof d!="object"||!d)&&(d={}),d.type||(d.type=a),d.stopPropagation||(d.stopPropagation=v),d.preventDefault||(d.preventDefault=s),i=i.slice();for(var u=0;u<i.length&&(i[u](d,this),!d.propagationStopped);u++);if(r&&!d.defaultPrevented)return r(d,this)}},c._signal=function(a,d){var i=(this._eventRegistry||{})[a];if(i){i=i.slice();for(var r=0;r<i.length;r++)i[r](d,this)}},c.once=function(a,d){var i=this;if(this.on(a,function r(){i.off(a,r),d.apply(null,arguments)}),!d)return new Promise(function(r){d=r})},c.setDefaultHandler=function(a,d){var i=this._defaultHandlers;if(i||(i=this._defaultHandlers={_disabled_:{}}),i[a]){var r=i[a],u=i._disabled_[a];u||(i._disabled_[a]=u=[]),u.push(r);var l=u.indexOf(d);l!=-1&&u.splice(l,1)}i[a]=d},c.removeDefaultHandler=function(a,d){var i=this._defaultHandlers;if(i){var r=i._disabled_[a];if(i[a]==d)r&&this.setDefaultHandler(a,r.pop());else if(r){var u=r.indexOf(d);u!=-1&&r.splice(u,1)}}},c.on=c.addEventListener=function(a,d,i){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[a];return r||(r=this._eventRegistry[a]=[]),r.indexOf(d)==-1&&r[i?"unshift":"push"](d),d},c.off=c.removeListener=c.removeEventListener=function(a,d){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[a];if(i){var r=i.indexOf(d);r!==-1&&i.splice(r,1)}},c.removeAllListeners=function(a){a||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[a]=void 0),this._defaultHandlers&&(this._defaultHandlers[a]=void 0)},t.EventEmitter=c});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,n){t.reportError=function(v,s){var a=new Error(v);a.data=s,typeof console=="object"&&console.error&&console.error(a),setTimeout(function(){throw a})}});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(e,t,n){"no use strict";var c=e("./oop"),v=e("./event_emitter").EventEmitter,s=e("./report_error").reportError,a={setOptions:function(u){Object.keys(u).forEach(function(l){this.setOption(l,u[l])},this)},getOptions:function(u){var l={};if(u)Array.isArray(u)||(l=u,u=Object.keys(l));else{var p=this.$options;u=Object.keys(p).filter(function(f){return!p[f].hidden})}return u.forEach(function(f){l[f]=this.getOption(f)},this),l},setOption:function(u,l){if(this["$"+u]!==l){var p=this.$options[u];if(!p)return d('misspelled option "'+u+'"');if(p.forwardTo)return this[p.forwardTo]&&this[p.forwardTo].setOption(u,l);p.handlesSet||(this["$"+u]=l),p&&p.set&&p.set.call(this,l)}},getOption:function(u){var l=this.$options[u];return l?l.forwardTo?this[l.forwardTo]&&this[l.forwardTo].getOption(u):l&&l.get?l.get.call(this):this["$"+u]:d('misspelled option "'+u+'"')}};function d(u){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var i,r=function(){function u(){this.$defaultOptions={}}return u.prototype.defineOptions=function(l,p,f){return l.$options||(this.$defaultOptions[p]=l.$options={}),Object.keys(f).forEach(function(o){var h=f[o];typeof h=="string"&&(h={forwardTo:h}),h.name||(h.name=o),l.$options[h.name]=h,"initialValue"in h&&(l["$"+h.name]=h.initialValue)}),c.implement(l,a),this},u.prototype.resetOptions=function(l){Object.keys(l.$options).forEach(function(p){var f=l.$options[p];"value"in f&&l.setOption(p,f.value)})},u.prototype.setDefaultValue=function(l,p,f){if(!l){for(l in this.$defaultOptions)if(this.$defaultOptions[l][p])break;if(!this.$defaultOptions[l][p])return!1}var o=this.$defaultOptions[l]||(this.$defaultOptions[l]={});o[p]&&(o.forwardTo?this.setDefaultValue(o.forwardTo,p,f):o[p].value=f)},u.prototype.setDefaultValues=function(l,p){Object.keys(p).forEach(function(f){this.setDefaultValue(l,f,p[f])},this)},u.prototype.setMessages=function(l){i=l},u.prototype.nls=function(l,p){i&&!i[l]&&d("No message found for '"+l+"' in the provided messages, falling back to default English message.");var f=i&&i[l]||l;return p&&(f=f.replace(/\$(\$|[\d]+)/g,function(o,h){return h=="$"?"$":p[h]})),f},u}();r.prototype.warn=d,r.prototype.reportError=s,c.implement(r.prototype,v),t.AppConfig=r});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var c=e("../lib/dom");c.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){"no use strict";var c=e("./lib/lang"),v=e("./lib/net"),s=e("./lib/dom"),a=e("./lib/app_config").AppConfig;n.exports=t=new a;var d={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(l){if(!d.hasOwnProperty(l))throw new Error("Unknown config key: "+l);return d[l]},t.set=function(l,p){if(d.hasOwnProperty(l))d[l]=p;else if(this.setDefaultValue("",l,p)==!1)throw new Error("Unknown config key: "+l);l=="useStrictCSP"&&s.useStrictCSP(p)},t.all=function(){return c.copyObject(d)},t.$modes={},t.moduleUrl=function(l,p){if(d.$moduleUrls[l])return d.$moduleUrls[l];var f=l.split("/");p=p||f[f.length-2]||"";var o=p=="snippets"?"/":"-",h=f[f.length-1];if(p=="worker"&&o=="-"){var _=new RegExp("^"+p+"[\\-_]|[\\-_]"+p+"$","g");h=h.replace(_,"")}(!h||h==p)&&f.length>1&&(h=f[f.length-2]);var m=d[p+"Path"];return m==null?m=d.basePath:o=="/"&&(p=o=""),m&&m.slice(-1)!="/"&&(m+="/"),m+p+o+h+this.get("suffix")},t.setModuleUrl=function(l,p){return d.$moduleUrls[l]=p};var i=function(l,p){if(l==="ace/theme/textmate"||l==="./theme/textmate")return p(null,e("./theme/textmate"));if(r)return r(l,p);console.error("loader is not configured")},r;t.setLoader=function(l){r=l},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(l,p){var f;if(Array.isArray(l))var o=l[0],h=l[1];else if(typeof l=="string")var h=l;var _=function(m){if(m&&!t.$loading[h])return p&&p(m);if(t.$loading[h]||(t.$loading[h]=[]),t.$loading[h].push(p),!(t.$loading[h].length>1)){var y=function(){i(h,function(C,E){E&&(t.$loaded[h]=E),t._emit("load.module",{name:h,module:E});var D=t.$loading[h];t.$loading[h]=null,D.forEach(function(g){g&&g(E)})})};if(!t.get("packaged"))return y();v.loadScript(t.moduleUrl(h,o),y),u()}};if(t.dynamicModules[h])t.dynamicModules[h]().then(function(m){m.default?_(m.default):_(m)});else{try{f=this.$require(h)}catch{}_(f||t.$loaded[h])}},t.$require=function(l){if(typeof n.require=="function"){var p="require";return n[p](l)}},t.setModuleLoader=function(l,p){t.dynamicModules[l]=p};var u=function(){!d.basePath&&!d.workerPath&&!d.modePath&&!d.themePath&&!Object.keys(d.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),u=function(){})};t.version="1.32.3"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var c=e("./config");c.setLoader(function(d,i){e([d],function(r){i(null,r)})});var v=function(){return this||typeof window<"u"&&window}();n.exports=function(d){c.init=s,c.$require=e,d.require=e,typeof define=="function"&&(d.define=define)},s(!0);function s(d){if(!(!v||!v.document)){c.set("packaged",d||e.packaged||n.packaged||v.define&&define.packaged);var i={},r="",u=document.currentScript||document._currentScript,l=u&&u.ownerDocument||document;u&&u.src&&(r=u.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var p=l.getElementsByTagName("script"),f=0;f<p.length;f++){var o=p[f],h=o.src||o.getAttribute("src");if(h){for(var _=o.attributes,m=0,y=_.length;m<y;m++){var C=_[m];C.name.indexOf("data-ace-")===0&&(i[a(C.name.replace(/^data-ace-/,""))]=C.value)}var E=h.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);E&&(r=E[1])}}r&&(i.base=i.base||r,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var D in i)typeof i[D]<"u"&&c.set(D,i[D])}}function a(d){return d.replace(/-(.)/g,function(i,r){return r.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var c=function(){function v(s,a,d,i){this.start={row:s,column:a},this.end={row:d,column:i}}return v.prototype.isEqual=function(s){return this.start.row===s.start.row&&this.end.row===s.end.row&&this.start.column===s.start.column&&this.end.column===s.end.column},v.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},v.prototype.contains=function(s,a){return this.compare(s,a)==0},v.prototype.compareRange=function(s){var a,d=s.end,i=s.start;return a=this.compare(d.row,d.column),a==1?(a=this.compare(i.row,i.column),a==1?2:a==0?1:0):a==-1?-2:(a=this.compare(i.row,i.column),a==-1?-1:a==1?42:0)},v.prototype.comparePoint=function(s){return this.compare(s.row,s.column)},v.prototype.containsRange=function(s){return this.comparePoint(s.start)==0&&this.comparePoint(s.end)==0},v.prototype.intersects=function(s){var a=this.compareRange(s);return a==-1||a==0||a==1},v.prototype.isEnd=function(s,a){return this.end.row==s&&this.end.column==a},v.prototype.isStart=function(s,a){return this.start.row==s&&this.start.column==a},v.prototype.setStart=function(s,a){typeof s=="object"?(this.start.column=s.column,this.start.row=s.row):(this.start.row=s,this.start.column=a)},v.prototype.setEnd=function(s,a){typeof s=="object"?(this.end.column=s.column,this.end.row=s.row):(this.end.row=s,this.end.column=a)},v.prototype.inside=function(s,a){return this.compare(s,a)==0?!(this.isEnd(s,a)||this.isStart(s,a)):!1},v.prototype.insideStart=function(s,a){return this.compare(s,a)==0?!this.isEnd(s,a):!1},v.prototype.insideEnd=function(s,a){return this.compare(s,a)==0?!this.isStart(s,a):!1},v.prototype.compare=function(s,a){return!this.isMultiLine()&&s===this.start.row?a<this.start.column?-1:a>this.end.column?1:0:s<this.start.row?-1:s>this.end.row?1:this.start.row===s?a>=this.start.column?0:-1:this.end.row===s?a<=this.end.column?0:1:0},v.prototype.compareStart=function(s,a){return this.start.row==s&&this.start.column==a?-1:this.compare(s,a)},v.prototype.compareEnd=function(s,a){return this.end.row==s&&this.end.column==a?1:this.compare(s,a)},v.prototype.compareInside=function(s,a){return this.end.row==s&&this.end.column==a?1:this.start.row==s&&this.start.column==a?-1:this.compare(s,a)},v.prototype.clipRows=function(s,a){if(this.end.row>a)var d={row:a+1,column:0};else if(this.end.row<s)var d={row:s,column:0};if(this.start.row>a)var i={row:a+1,column:0};else if(this.start.row<s)var i={row:s,column:0};return v.fromPoints(i||this.start,d||this.end)},v.prototype.extend=function(s,a){var d=this.compare(s,a);if(d==0)return this;if(d==-1)var i={row:s,column:a};else var r={row:s,column:a};return v.fromPoints(i||this.start,r||this.end)},v.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},v.prototype.isMultiLine=function(){return this.start.row!==this.end.row},v.prototype.clone=function(){return v.fromPoints(this.start,this.end)},v.prototype.collapseRows=function(){return this.end.column==0?new v(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new v(this.start.row,0,this.end.row,0)},v.prototype.toScreenRange=function(s){var a=s.documentToScreenPosition(this.start),d=s.documentToScreenPosition(this.end);return new v(a.row,a.column,d.row,d.column)},v.prototype.moveBy=function(s,a){this.start.row+=s,this.start.column+=a,this.end.row+=s,this.end.column+=a},v}();c.fromPoints=function(v,s){return new c(v.row,v.column,s.row,s.column)},c.comparePoints=function(v,s){return v.row-s.row||v.column-s.column},t.Range=c});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var c=e("./oop"),v=function(){var s={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};s.PRINTABLE_KEYS[173]="-";var a,d;for(d in s.FUNCTION_KEYS)a=s.FUNCTION_KEYS[d].toLowerCase(),s[a]=parseInt(d,10);for(d in s.PRINTABLE_KEYS)a=s.PRINTABLE_KEYS[d].toLowerCase(),s[a]=parseInt(d,10);return c.mixin(s,s.MODIFIER_KEYS),c.mixin(s,s.PRINTABLE_KEYS),c.mixin(s,s.FUNCTION_KEYS),s.enter=s.return,s.escape=s.esc,s.del=s.delete,function(){for(var i=["cmd","ctrl","alt","shift"],r=Math.pow(2,i.length);r--;)s.KEY_MODS[r]=i.filter(function(u){return r&s.KEY_MODS[u]}).join("-")+"-"}(),s.KEY_MODS[0]="",s.KEY_MODS[-1]="input-",s}();c.mixin(t,v),t.default=t,t.keyCodeToString=function(s){var a=v[s];return typeof a!="string"&&(a=String.fromCharCode(s)),a.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("./keys"),v=e("./useragent"),s=null,a=0,d;function i(){d=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return d={passive:!1},!0}})}catch{}}function r(){return d==null&&i(),d}function u(m,y,C){this.elem=m,this.type=y,this.callback=C}u.prototype.destroy=function(){p(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var l=t.addListener=function(m,y,C,E){m.addEventListener(y,C,r()),E&&E.$toDestroy.push(new u(m,y,C))},p=t.removeListener=function(m,y,C){m.removeEventListener(y,C,r())};t.stopEvent=function(m){return t.stopPropagation(m),t.preventDefault(m),!1},t.stopPropagation=function(m){m.stopPropagation&&m.stopPropagation()},t.preventDefault=function(m){m.preventDefault&&m.preventDefault()},t.getButton=function(m){return m.type=="dblclick"?0:m.type=="contextmenu"||v.isMac&&m.ctrlKey&&!m.altKey&&!m.shiftKey?2:m.button},t.capture=function(m,y,C){var E=m&&m.ownerDocument||document;function D(g){y&&y(g),C&&C(g),p(E,"mousemove",y),p(E,"mouseup",D),p(E,"dragstart",D)}return l(E,"mousemove",y),l(E,"mouseup",D),l(E,"dragstart",D),D},t.addMouseWheelListener=function(m,y,C){l(m,"wheel",function(E){var D=.15,g=E.deltaX||0,b=E.deltaY||0;switch(E.deltaMode){case E.DOM_DELTA_PIXEL:E.wheelX=g*D,E.wheelY=b*D;break;case E.DOM_DELTA_LINE:var L=15;E.wheelX=g*L,E.wheelY=b*L;break;case E.DOM_DELTA_PAGE:var S=150;E.wheelX=g*S,E.wheelY=b*S;break}y(E)},C)},t.addMultiMouseDownListener=function(m,y,C,E,D){var g=0,b,L,S,T={2:"dblclick",3:"tripleclick",4:"quadclick"};function M(w){if(t.getButton(w)!==0?g=0:w.detail>1?(g++,g>4&&(g=1)):g=1,v.isIE){var F=Math.abs(w.clientX-b)>5||Math.abs(w.clientY-L)>5;(!S||F)&&(g=1),S&&clearTimeout(S),S=setTimeout(function(){S=null},y[g-1]||600),g==1&&(b=w.clientX,L=w.clientY)}if(w._clicks=g,C[E]("mousedown",w),g>4)g=0;else if(g>1)return C[E](T[g],w)}Array.isArray(m)||(m=[m]),m.forEach(function(w){l(w,"mousedown",M,D)})};var f=function(m){return 0|(m.ctrlKey?1:0)|(m.altKey?2:0)|(m.shiftKey?4:0)|(m.metaKey?8:0)};t.getModifierString=function(m){return c.KEY_MODS[f(m)]};function o(m,y,C){var E=f(y);if(!v.isMac&&s){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(E|=8),s.altGr)if((3&E)!=3)s.altGr=0;else return;if(C===18||C===17){var D="location"in y?y.location:y.keyLocation;if(C===17&&D===1)s[C]==1&&(a=y.timeStamp);else if(C===18&&E===3&&D===2){var g=y.timeStamp-a;g<50&&(s.altGr=!0)}}}if(C in c.MODIFIER_KEYS&&(C=-1),!E&&C===13){var D="location"in y?y.location:y.keyLocation;if(D===3&&(m(y,E,-C),y.defaultPrevented))return}if(v.isChromeOS&&E&8){if(m(y,E,C),y.defaultPrevented)return;E&=-9}return!E&&!(C in c.FUNCTION_KEYS)&&!(C in c.PRINTABLE_KEYS)?!1:m(y,E,C)}t.addCommandKeyListener=function(m,y,C){var E=null;l(m,"keydown",function(D){s[D.keyCode]=(s[D.keyCode]||0)+1;var g=o(y,D,D.keyCode);return E=D.defaultPrevented,g},C),l(m,"keypress",function(D){E&&(D.ctrlKey||D.altKey||D.shiftKey||D.metaKey)&&(t.stopEvent(D),E=null)},C),l(m,"keyup",function(D){s[D.keyCode]=null},C),s||(h(),l(window,"focus",h))};function h(){s=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!v.isOldIE){var _=1;t.nextTick=function(m,y){y=y||window;var C="zero-timeout-message-"+_++,E=function(D){D.data==C&&(t.stopPropagation(D),p(y,"message",E),m())};l(y,"message",E),y.postMessage(C,"*")}}t.$idleBlocked=!1,t.onIdle=function(m,y){return setTimeout(function C(){t.$idleBlocked?setTimeout(C,100):m()},y)},t.$idleBlockId=null,t.blockIdle=function(m){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},m||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(m){setTimeout(m,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var c;n.exports={lineMode:!1,pasteCancelled:function(){return c&&c>Date.now()-50?!0:c=!1},cancel:function(){c=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var c=e("../lib/event"),v=e("../config").nls,s=e("../lib/useragent"),a=e("../lib/dom"),d=e("../lib/lang"),i=e("../clipboard"),r=s.isChrome<18,u=s.isIE,l=s.isChrome>63,p=400,f=e("../lib/keys"),o=f.KEY_MODS,h=s.isIOS,_=h?/\s/:/\n/,m=s.isMobile,y;y=function(C,E){var D=a.createElement("textarea");D.className="ace_text-input",D.setAttribute("wrap","off"),D.setAttribute("autocorrect","off"),D.setAttribute("autocapitalize","off"),D.setAttribute("spellcheck","false"),D.style.opacity="0",C.insertBefore(D,C.firstChild);var g=!1,b=!1,L=!1,S=!1,T="";m||(D.style.fontSize="1px");var M=!1,w=!1,F="",x=0,R=0,A=0,I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,k=0;try{var H=document.activeElement===D}catch{}this.setNumberOfExtraLines=function(j){if(I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,j<0){k=0;return}k=j},this.setAriaOptions=function(j){if(j.activeDescendant?(D.setAttribute("aria-haspopup","true"),D.setAttribute("aria-autocomplete",j.inline?"both":"list"),D.setAttribute("aria-activedescendant",j.activeDescendant)):(D.setAttribute("aria-haspopup","false"),D.setAttribute("aria-autocomplete","both"),D.removeAttribute("aria-activedescendant")),j.role&&D.setAttribute("role",j.role),j.setLabel&&(D.setAttribute("aria-roledescription",v("editor")),E.session)){var ie=E.session.selection.cursor.row;D.setAttribute("aria-label",v("Cursor at row $0",[ie+1]))}},this.setAriaOptions({role:"textbox"}),c.addListener(D,"blur",function(j){w||(E.onBlur(j),H=!1)},E),c.addListener(D,"focus",function(j){if(!w){if(H=!0,s.isEdge)try{if(!document.hasFocus())return}catch{}E.onFocus(j),s.isEdge?setTimeout(q):q()}},E),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:E.renderer.enableKeyboardAccessibility}),T||l||this.$focusScroll=="browser")return D.focus({preventScroll:!0});var j=D.style.top;D.style.position="fixed",D.style.top="0px";try{var ie=D.getBoundingClientRect().top!=0}catch{return}var de=[];if(ie)for(var Be=D.parentElement;Be&&Be.nodeType==1;)de.push(Be),Be.setAttribute("ace_nocontext","true"),!Be.parentElement&&Be.getRootNode?Be=Be.getRootNode().host:Be=Be.parentElement;D.focus({preventScroll:!0}),ie&&de.forEach(function(nt){nt.removeAttribute("ace_nocontext")}),setTimeout(function(){D.style.position="",D.style.top=="0px"&&(D.style.top=j)},0)},this.blur=function(){D.blur()},this.isFocused=function(){return H},E.on("beforeEndOperation",function(){var j=E.curOp,ie=j&&j.command&&j.command.name;if(ie!="insertstring"){var de=ie&&(j.docChanged||j.selectionChanged);L&&de&&(F=D.value="",Ct()),q()}});var U=function(j,ie){for(var de=ie,Be=1;Be<=j-I&&Be<2*k+1;Be++)de+=E.session.getLine(j-Be).length+1;return de},q=h?function(j){if(!(!H||g&&!j||S)){j||(j="");var ie=`
 ab`+j+`cde fg
`;ie!=D.value&&(D.value=F=ie);var de=4,Be=4+(j.length||(E.selection.isEmpty()?0:1));(x!=de||R!=Be)&&D.setSelectionRange(de,Be),x=de,R=Be}}:function(){if(!(L||S)&&!(!H&&!B)){L=!0;var j=0,ie=0,de="";if(E.session){var Be=E.selection,nt=Be.getRange(),st=Be.cursor.row;st===$+1?(I=$+1,$=I+2*k):st===I-1?($=I-1,I=$-2*k):(st<I-1||st>$+1)&&(I=st>k?st-k:0,$=st>k?st+k:2*k);for(var ze=[],bt=I;bt<=$;bt++)ze.push(E.session.getLine(bt));if(de=ze.join(`
`),j=U(nt.start.row,nt.start.column),ie=U(nt.end.row,nt.end.column),nt.start.row<I){var zt=E.session.getLine(I-1);j=nt.start.row<I-1?0:j,ie+=zt.length+1,de=zt+`
`+de}else if(nt.end.row>$){var Et=E.session.getLine($+1);ie=nt.end.row>$+1?Et.length:nt.end.column,ie+=de.length+1,de=de+`
`+Et}else m&&st>0&&(de=`
`+de,ie+=1,j+=1);de.length>p&&(j<p&&ie<p?de=de.slice(0,p):(de=`
`,j==ie?j=ie=0:(j=0,ie=1)));var An=de+`

`;An!=F&&(D.value=F=An,x=R=An.length)}if(B&&(x=D.selectionStart,R=D.selectionEnd),R!=ie||x!=j||D.selectionEnd!=R)try{D.setSelectionRange(j,ie),x=j,R=ie}catch{}L=!1}};this.resetSelection=q,H&&E.onFocus();var N=function(j){return j.selectionStart===0&&j.selectionEnd>=F.length&&j.value===F&&F&&j.selectionEnd!==R},K=function(j){L||(g?g=!1:N(D)?(E.selectAll(),q()):m&&D.selectionStart!=x&&q())},O=null;this.setInputHandler=function(j){O=j},this.getInputHandler=function(){return O};var B=!1,W=function(j,ie){if(B&&(B=!1),b)return q(),j&&E.onPaste(j),b=!1,"";for(var de=D.selectionStart,Be=D.selectionEnd,nt=x,st=F.length-R,ze=j,bt=j.length-de,zt=j.length-Be,Et=0;nt>0&&F[Et]==j[Et];)Et++,nt--;for(ze=ze.slice(Et),Et=1;st>0&&F.length-Et>x-1&&F[F.length-Et]==j[j.length-Et];)Et++,st--;bt-=Et-1,zt-=Et-1;var An=ze.length-Et+1;if(An<0&&(nt=-An,An=0),ze=ze.slice(0,An),!ie&&!ze&&!bt&&!nt&&!st&&!zt)return"";S=!0;var mi=!1;return s.isAndroid&&ze==". "&&(ze="  ",mi=!0),ze&&!nt&&!st&&!bt&&!zt||M?E.onTextInput(ze):E.onTextInput(ze,{extendLeft:nt,extendRight:st,restoreStart:bt,restoreEnd:zt}),S=!1,F=j,x=de,R=Be,A=zt,mi?`
`:ze},P=function(j){if(L)return Se();if(j&&j.inputType){if(j.inputType=="historyUndo")return E.execCommand("undo");if(j.inputType=="historyRedo")return E.execCommand("redo")}var ie=D.value,de=W(ie,!0);(ie.length>p+100||_.test(de)||m&&x<1&&x==R)&&q()},Y=function(j,ie,de){var Be=j.clipboardData||window.clipboardData;if(!(!Be||r)){var nt=u||de?"Text":"text/plain";try{return ie?Be.setData(nt,ie)!==!1:Be.getData(nt)}catch(st){if(!de)return Y(st,ie,!0)}}},J=function(j,ie){var de=E.getCopyText();if(!de)return c.preventDefault(j);Y(j,de)?(h&&(q(de),g=de,setTimeout(function(){g=!1},10)),ie?E.onCut():E.onCopy(),c.preventDefault(j)):(g=!0,D.value=de,D.select(),setTimeout(function(){g=!1,q(),ie?E.onCut():E.onCopy()}))},ve=function(j){J(j,!0)},Ee=function(j){J(j,!1)},Ce=function(j){var ie=Y(j);i.pasteCancelled()||(typeof ie=="string"?(ie&&E.onPaste(ie,j),s.isIE&&setTimeout(q),c.preventDefault(j)):(D.value="",b=!0))};c.addCommandKeyListener(D,E.onCommandKey.bind(E),E),c.addListener(D,"select",K,E),c.addListener(D,"input",P,E),c.addListener(D,"cut",ve,E),c.addListener(D,"copy",Ee,E),c.addListener(D,"paste",Ce,E),(!("oncut"in D)||!("oncopy"in D)||!("onpaste"in D))&&c.addListener(C,"keydown",function(j){if(!(s.isMac&&!j.metaKey||!j.ctrlKey))switch(j.keyCode){case 67:Ee(j);break;case 86:Ce(j);break;case 88:ve(j);break}},E);var se=function(j){if(!(L||!E.onCompositionStart||E.$readOnly)&&(L={},!M)){j.data&&(L.useTextareaForIME=!1),setTimeout(Se,0),E._signal("compositionStart"),E.on("mousedown",Jt);var ie=E.getSelectionRange();ie.end.row=ie.start.row,ie.end.column=ie.start.column,L.markerRange=ie,L.selectionStart=x,E.onCompositionStart(L),L.useTextareaForIME?(F=D.value="",x=0,R=0):(D.msGetInputContext&&(L.context=D.msGetInputContext()),D.getInputContext&&(L.context=D.getInputContext()))}},Se=function(){if(!(!L||!E.onCompositionUpdate||E.$readOnly)){if(M)return Jt();if(L.useTextareaForIME)E.onCompositionUpdate(D.value);else{var j=D.value;W(j),L.markerRange&&(L.context&&(L.markerRange.start.column=L.selectionStart=L.context.compositionStartOffset),L.markerRange.end.column=L.markerRange.start.column+R-L.selectionStart+A)}}},Ct=function(j){!E.onCompositionEnd||E.$readOnly||(L=!1,E.onCompositionEnd(),E.off("mousedown",Jt),j&&P())};function Jt(){w=!0,D.blur(),D.focus(),w=!1}var Bt=d.delayedCall(Se,50).schedule.bind(null,null);function Ze(j){j.keyCode==27&&D.value.length<D.selectionStart&&(L||(F=D.value),x=R=-1,q()),Bt()}c.addListener(D,"compositionstart",se,E),c.addListener(D,"compositionupdate",Se,E),c.addListener(D,"keyup",Ze,E),c.addListener(D,"keydown",Bt,E),c.addListener(D,"compositionend",Ct,E),this.getElement=function(){return D},this.setCommandMode=function(j){M=j,D.readOnly=!1},this.setReadOnly=function(j){M||(D.readOnly=j)},this.setCopyWithEmptySelection=function(j){},this.onContextMenu=function(j){B=!0,q(),E._emit("nativecontextmenu",{target:E,domEvent:j}),this.moveToMouse(j,!0)},this.moveToMouse=function(j,ie){T||(T=D.style.cssText),D.style.cssText=(ie?"z-index:100000;":"")+(s.isIE?"opacity:0.1;":"")+"text-indent: -"+(x+R)*E.renderer.characterWidth*.5+"px;";var de=E.container.getBoundingClientRect(),Be=a.computedStyle(E.container),nt=de.top+(parseInt(Be.borderTopWidth)||0),st=de.left+(parseInt(de.borderLeftWidth)||0),ze=de.bottom-nt-D.clientHeight-2,bt=function(zt){a.translate(D,zt.clientX-st-2,Math.min(zt.clientY-nt-2,ze))};bt(j),j.type=="mousedown"&&(E.renderer.$isMousePressed=!0,clearTimeout(ce),s.isWin&&c.capture(E.container,bt,he))},this.onContextMenuClose=he;var ce;function he(){clearTimeout(ce),ce=setTimeout(function(){T&&(D.style.cssText=T,T=""),E.renderer.$isMousePressed=!1,E.renderer.$keepTextAreaAtCursor&&E.renderer.$moveTextAreaToCursor()},0)}var le=function(j){E.textInput.onContextMenu(j),he()};c.addListener(D,"mouseup",le,E),c.addListener(D,"mousedown",function(j){j.preventDefault(),he()},E),c.addListener(E.renderer.scroller,"contextmenu",le,E),c.addListener(D,"contextmenu",le,E),h&&oe(C,E,D);function oe(j,ie,de){var Be=null,nt=!1;de.addEventListener("keydown",function(ze){Be&&clearTimeout(Be),nt=!0},!0),de.addEventListener("keyup",function(ze){Be=setTimeout(function(){nt=!1},100)},!0);var st=function(ze){if(document.activeElement===de&&!(nt||L||ie.$mouseHandler.isMousePressed)&&!g){var bt=de.selectionStart,zt=de.selectionEnd,Et=null,An=0;if(bt==0?Et=f.up:bt==1?Et=f.home:zt>R&&F[zt]==`
`?Et=f.end:bt<x&&F[bt-1]==" "?(Et=f.left,An=o.option):bt<x||bt==x&&R!=x&&bt==zt?Et=f.left:zt>R&&F.slice(0,zt).split(`
`).length>2?Et=f.down:zt>R&&F[zt-1]==" "?(Et=f.right,An=o.option):(zt>R||zt==R&&R!=x&&bt==zt)&&(Et=f.right),bt!==zt&&(An|=o.shift),Et){var mi=ie.onCommandKey({},An,Et);if(!mi&&ie.commands){Et=f.keyCodeToString(Et);var jS=ie.commands.findKeyCommand(An,Et);jS&&ie.execCommand(jS)}x=bt,R=zt,q("")}}};document.addEventListener("selectionchange",st),ie.on("destroy",function(){document.removeEventListener("selectionchange",st)})}this.destroy=function(){D.parentElement&&D.parentElement.removeChild(D)}},t.TextInput=y,t.$setUserAgentForTests=function(C,E){m=C,h=E}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("../lib/useragent"),v=0,s=550,a=function(){function r(u){u.$clickSelection=null;var l=u.editor;l.setDefaultHandler("mousedown",this.onMouseDown.bind(u)),l.setDefaultHandler("dblclick",this.onDoubleClick.bind(u)),l.setDefaultHandler("tripleclick",this.onTripleClick.bind(u)),l.setDefaultHandler("quadclick",this.onQuadClick.bind(u)),l.setDefaultHandler("mousewheel",this.onMouseWheel.bind(u));var p=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];p.forEach(function(f){u[f]=this[f]},this),u.selectByLines=this.extendSelectionBy.bind(u,"getLineRange"),u.selectByWords=this.extendSelectionBy.bind(u,"getWordRange")}return r.prototype.onMouseDown=function(u){var l=u.inSelection(),p=u.getDocumentPosition();this.mousedownEvent=u;var f=this.editor,o=u.getButton();if(o!==0){var h=f.getSelectionRange(),_=h.isEmpty();(_||o==1)&&f.selection.moveToPosition(p),o==2&&(f.textInput.onContextMenu(u.domEvent),c.isMozilla||u.preventDefault());return}if(this.mousedownEvent.time=Date.now(),l&&!f.isFocused()&&(f.focus(),this.$focusTimeout&&!this.$clickSelection&&!f.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(u);return}return this.captureMouse(u),this.startSelect(p,u.domEvent._clicks>1),u.preventDefault()},r.prototype.startSelect=function(u,l){u=u||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var p=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?p.selection.selectToPosition(u):l||p.selection.moveToPosition(u),l||this.select(),p.setStyle("ace_selecting"),this.setState("select"))},r.prototype.select=function(){var u,l=this.editor,p=l.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var f=this.$clickSelection.comparePoint(p);if(f==-1)u=this.$clickSelection.end;else if(f==1)u=this.$clickSelection.start;else{var o=i(this.$clickSelection,p);p=o.cursor,u=o.anchor}l.selection.setSelectionAnchor(u.row,u.column)}l.selection.selectToPosition(p),l.renderer.scrollCursorIntoView()},r.prototype.extendSelectionBy=function(u){var l,p=this.editor,f=p.renderer.screenToTextCoordinates(this.x,this.y),o=p.selection[u](f.row,f.column);if(this.$clickSelection){var h=this.$clickSelection.comparePoint(o.start),_=this.$clickSelection.comparePoint(o.end);if(h==-1&&_<=0)l=this.$clickSelection.end,(o.end.row!=f.row||o.end.column!=f.column)&&(f=o.start);else if(_==1&&h>=0)l=this.$clickSelection.start,(o.start.row!=f.row||o.start.column!=f.column)&&(f=o.end);else if(h==-1&&_==1)f=o.end,l=o.start;else{var m=i(this.$clickSelection,f);f=m.cursor,l=m.anchor}p.selection.setSelectionAnchor(l.row,l.column)}p.selection.selectToPosition(f),p.renderer.scrollCursorIntoView()},r.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},r.prototype.focusWait=function(){var u=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),l=Date.now();(u>v||l-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},r.prototype.onDoubleClick=function(u){var l=u.getDocumentPosition(),p=this.editor,f=p.session,o=f.getBracketRange(l);o?(o.isEmpty()&&(o.start.column--,o.end.column++),this.setState("select")):(o=p.selection.getWordRange(l.row,l.column),this.setState("selectByWords")),this.$clickSelection=o,this.select()},r.prototype.onTripleClick=function(u){var l=u.getDocumentPosition(),p=this.editor;this.setState("selectByLines");var f=p.getSelectionRange();f.isMultiLine()&&f.contains(l.row,l.column)?(this.$clickSelection=p.selection.getLineRange(f.start.row),this.$clickSelection.end=p.selection.getLineRange(f.end.row).end):this.$clickSelection=p.selection.getLineRange(l.row),this.select()},r.prototype.onQuadClick=function(u){var l=this.editor;l.selectAll(),this.$clickSelection=l.getSelectionRange(),this.setState("selectAll")},r.prototype.onMouseWheel=function(u){if(!u.getAccelKey()){u.getShiftKey()&&u.wheelY&&!u.wheelX&&(u.wheelX=u.wheelY,u.wheelY=0);var l=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var p=this.$lastScroll,f=u.domEvent.timeStamp,o=f-p.t,h=o?u.wheelX/o:p.vx,_=o?u.wheelY/o:p.vy;o<s&&(h=(h+p.vx)/2,_=(_+p.vy)/2);var m=Math.abs(h/_),y=!1;if(m>=1&&l.renderer.isScrollableBy(u.wheelX*u.speed,0)&&(y=!0),m<=1&&l.renderer.isScrollableBy(0,u.wheelY*u.speed)&&(y=!0),y)p.allowed=f;else if(f-p.allowed<s){var C=Math.abs(h)<=1.5*Math.abs(p.vx)&&Math.abs(_)<=1.5*Math.abs(p.vy);C?(y=!0,p.allowed=f):p.allowed=0}if(p.t=f,p.vx=h,p.vy=_,y)return l.renderer.scrollBy(u.wheelX*u.speed,u.wheelY*u.speed),u.stop()}},r}();a.prototype.selectEnd=a.prototype.selectByLinesEnd,a.prototype.selectAllEnd=a.prototype.selectByLinesEnd,a.prototype.selectByWordsEnd=a.prototype.selectByLinesEnd,t.DefaultHandlers=a;function d(r,u,l,p){return Math.sqrt(Math.pow(l-r,2)+Math.pow(p-u,2))}function i(r,u){if(r.start.row==r.end.row)var l=2*u.column-r.start.column-r.end.column;else if(r.start.row==r.end.row-1&&!r.start.column&&!r.end.column)var l=u.column-4;else var l=2*u.row-r.start.row-r.end.row;return l<0?{cursor:r.start,anchor:r.end}:{cursor:r.end,anchor:r.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,n){t.preventParentScroll=function(v){v.stopPropagation();var s=v.currentTarget,a=s.scrollHeight>s.clientHeight;a||v.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var o=function(h,_){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(m[C]=y[C])},o(h,_)};return function(h,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");o(h,_);function m(){this.constructor=h}h.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),v=this&&this.__values||function(o){var h=typeof Symbol=="function"&&Symbol.iterator,_=h&&o[h],m=0;if(_)return _.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&m>=o.length&&(o=void 0),{value:o&&o[m++],done:!o}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},s=e("./lib/dom"),a=e("./lib/event"),d=e("./range").Range,i=e("./lib/scroll").preventParentScroll,r="ace_tooltip",u=function(){function o(h){this.isOpen=!1,this.$element=null,this.$parentNode=h}return o.prototype.$init=function(){return this.$element=s.createElement("div"),this.$element.className=r,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},o.prototype.getElement=function(){return this.$element||this.$init()},o.prototype.setText=function(h){this.getElement().textContent=h},o.prototype.setHtml=function(h){this.getElement().innerHTML=h},o.prototype.setPosition=function(h,_){this.getElement().style.left=h+"px",this.getElement().style.top=_+"px"},o.prototype.setClassName=function(h){s.addCssClass(this.getElement(),h)},o.prototype.setTheme=function(h){this.$element.className=r+" "+(h.isDark?"ace_dark ":"")+(h.cssClass||"")},o.prototype.show=function(h,_,m){h!=null&&this.setText(h),_!=null&&m!=null&&this.setPosition(_,m),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},o.prototype.hide=function(h){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=r,this.isOpen=!1)},o.prototype.getHeight=function(){return this.getElement().offsetHeight},o.prototype.getWidth=function(){return this.getElement().offsetWidth},o.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},o}(),l=function(){function o(){this.popups=[]}return o.prototype.addPopup=function(h){this.popups.push(h),this.updatePopups()},o.prototype.removePopup=function(h){var _=this.popups.indexOf(h);_!==-1&&(this.popups.splice(_,1),this.updatePopups())},o.prototype.updatePopups=function(){var h,_,m,y;this.popups.sort(function(M,w){return w.priority-M.priority});var C=[];try{for(var E=v(this.popups),D=E.next();!D.done;D=E.next()){var g=D.value,b=!0;try{for(var L=(m=void 0,v(C)),S=L.next();!S.done;S=L.next()){var T=S.value;if(this.doPopupsOverlap(T,g)){b=!1;break}}}catch(M){m={error:M}}finally{try{S&&!S.done&&(y=L.return)&&y.call(L)}finally{if(m)throw m.error}}b?C.push(g):g.hide()}}catch(M){h={error:M}}finally{try{D&&!D.done&&(_=E.return)&&_.call(E)}finally{if(h)throw h.error}}},o.prototype.doPopupsOverlap=function(h,_){var m=h.getElement().getBoundingClientRect(),y=_.getElement().getBoundingClientRect();return m.left<y.right&&m.right>y.left&&m.top<y.bottom&&m.bottom>y.top},o}(),p=new l;t.popupManager=p,t.Tooltip=u;var f=function(o){c(h,o);function h(_){_===void 0&&(_=document.body);var m=o.call(this,_)||this;m.timeout=void 0,m.lastT=0,m.idleTime=350,m.lastEvent=void 0,m.onMouseOut=m.onMouseOut.bind(m),m.onMouseMove=m.onMouseMove.bind(m),m.waitForHover=m.waitForHover.bind(m),m.hide=m.hide.bind(m);var y=m.getElement();return y.style.whiteSpace="pre-wrap",y.style.pointerEvents="auto",y.addEventListener("mouseout",m.onMouseOut),y.tabIndex=-1,y.addEventListener("blur",function(){y.contains(document.activeElement)||this.hide()}.bind(m)),y.addEventListener("wheel",i),m}return h.prototype.addToEditor=function(_){_.on("mousemove",this.onMouseMove),_.on("mousedown",this.hide),_.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},h.prototype.removeFromEditor=function(_){_.off("mousemove",this.onMouseMove),_.off("mousedown",this.hide),_.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},h.prototype.onMouseMove=function(_,m){this.lastEvent=_,this.lastT=Date.now();var y=m.$mouseHandler.isMousePressed;if(this.isOpen){var C=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(C.row,C.column)||y||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||y||(this.lastEvent=_,this.timeout=setTimeout(this.waitForHover,this.idleTime))},h.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var _=Date.now()-this.lastT;if(this.idleTime-_>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-_);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},h.prototype.isOutsideOfText=function(_){var m=_.editor,y=_.getDocumentPosition(),C=m.session.getLine(y.row);if(y.column==C.length){var E=m.renderer.pixelToScreenCoordinates(_.clientX,_.clientY),D=m.session.documentToScreenPosition(y.row,y.column);if(D.column!=E.column||D.row!=E.row)return!0}return!1},h.prototype.setDataProvider=function(_){this.$gatherData=_},h.prototype.showForRange=function(_,m,y,C){var E=10;if(!(C&&C!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var D=_.renderer;this.isOpen||(p.addPopup(this),this.$registerCloseEvents(),this.setTheme(D.theme)),this.isOpen=!0,this.addMarker(m,_.session),this.range=d.fromPoints(m.start,m.end);var g=D.textToScreenCoordinates(m.start.row,m.start.column),b=D.scroller.getBoundingClientRect();g.pageX<b.left&&(g.pageX=b.left);var L=this.getElement();L.innerHTML="",L.appendChild(y),L.style.maxHeight="",L.style.display="block";var S=L.clientHeight,T=L.clientWidth,M=window.innerHeight-g.pageY-D.lineHeight,w=!0;g.pageY-S<0&&g.pageY<M&&(w=!1),L.style.maxHeight=(w?g.pageY:M)-E+"px",L.style.top=w?"":g.pageY+D.lineHeight+"px",L.style.bottom=w?window.innerHeight-g.pageY+"px":"",L.style.left=Math.min(g.pageX,window.innerWidth-T-E)+"px"}},h.prototype.addMarker=function(_,m){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=m,this.marker=m&&m.addMarker(_,"ace_highlight-marker","text")},h.prototype.hide=function(_){!_&&document.activeElement==this.getElement()||_&&_.target&&(_.type!="keydown"||_.ctrlKey||_.metaKey)&&this.$element.contains(_.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,p.removePopup(this)))},h.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},h.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},h.prototype.onMouseOut=function(_){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!_.relatedTarget||this.getElement().contains(_.relatedTarget)||_&&_.currentTarget.contains(_.relatedTarget)||_.relatedTarget.classList.contains("ace_content")||this.hide())},h}(u);t.HoverTooltip=f});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var l=function(p,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(o[_]=h[_])},l(p,f)};return function(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");l(p,f);function o(){this.constructor=p}p.prototype=f===null?Object.create(f):(o.prototype=f.prototype,new o)}}(),v=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,f=p&&l[p],o=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&o>=l.length&&(l=void 0),{value:l&&l[o++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},s=e("../lib/dom"),a=e("../lib/event"),d=e("../tooltip").Tooltip,i=e("../config").nls;function r(l){var p=l.editor,f=p.renderer.$gutterLayer,o=new u(p);l.editor.setDefaultHandler("guttermousedown",function(E){if(!(!p.isFocused()||E.getButton()!=0)){var D=f.getRegion(E);if(D!="foldWidgets"){var g=E.getDocumentPosition().row,b=p.session.selection;if(E.getShiftKey())b.selectTo(g,0);else{if(E.domEvent.detail==2)return p.selectAll(),E.preventDefault();l.$clickSelection=p.selection.getLineRange(g)}return l.setState("selectByLines"),l.captureMouse(E),E.preventDefault()}}});var h,_;function m(){var E=_.getDocumentPosition().row,D=p.session.getLength();if(E==D){var g=p.renderer.pixelToScreenCoordinates(0,_.y).row,b=_.$pos;if(g>p.session.documentToScreenRow(b.row,b.column))return y()}if(o.showTooltip(E),!!o.isOpen)if(p.on("mousewheel",y),l.$tooltipFollowsMouse)C(_);else{var L=_.getGutterRow(),S=f.$lines.get(L);if(S){var T=S.element.querySelector(".ace_gutter_annotation"),M=T.getBoundingClientRect(),w=o.getElement().style;w.left=M.right+"px",w.top=M.bottom+"px"}else C(_)}}function y(){h&&(h=clearTimeout(h)),o.isOpen&&(o.hideTooltip(),p.off("mousewheel",y))}function C(E){o.setPosition(E.x,E.y)}l.editor.setDefaultHandler("guttermousemove",function(E){var D=E.domEvent.target||E.domEvent.srcElement;if(s.hasCssClass(D,"ace_fold-widget"))return y();o.isOpen&&l.$tooltipFollowsMouse&&C(E),_=E,!h&&(h=setTimeout(function(){h=null,_&&!l.isMousePressed?m():y()},50))}),a.addListener(p.renderer.$gutter,"mouseout",function(E){_=null,!(!o.isOpen||h)&&(h=setTimeout(function(){h=null,y()},50))},p),p.on("changeSession",y),p.on("input",y)}t.GutterHandler=r;var u=function(l){c(p,l);function p(f){var o=l.call(this,f.container)||this;return o.editor=f,o}return p.prototype.setPosition=function(f,o){var h=window.innerWidth||document.documentElement.clientWidth,_=window.innerHeight||document.documentElement.clientHeight,m=this.getWidth(),y=this.getHeight();f+=15,o+=15,f+m>h&&(f-=f+m-h),o+y>_&&(o-=20+y),d.prototype.setPosition.call(this,f,o)},Object.defineProperty(p,"annotationLabels",{get:function(){return{error:{singular:i("error"),plural:i("errors")},warning:{singular:i("warning"),plural:i("warnings")},info:{singular:i("information message"),plural:i("information messages")}}},enumerable:!1,configurable:!0}),p.prototype.showTooltip=function(f){var o=this.editor.renderer.$gutterLayer,h=o.$annotations[f],_;h?_={text:Array.from(h.text),type:Array.from(h.type)}:_={text:[],type:[]};var m=o.session.getFoldLine(f);if(m&&o.$showFoldedAnnotations){for(var y={error:[],warning:[],info:[]},C,E=f+1;E<=m.end.row;E++)if(o.$annotations[E])for(var D=0;D<o.$annotations[E].text.length;D++){var g=o.$annotations[E].type[D];if(y[g].push(o.$annotations[E].text[D]),g==="error"){C="error_fold";continue}if(g==="warning"){C="warning_fold";continue}}if(C==="error_fold"||C==="warning_fold"){var b="".concat(p.annotationsToSummaryString(y)," in folded code.");_.text.push(b),_.type.push(C)}}if(_.text.length===0)return this.hide();for(var L={error:[],warning:[],info:[]},S=o.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",E=0;E<_.text.length;E++){var T="<span class='ace_".concat(_.type[E]," ").concat(S,"' aria-label='").concat(p.annotationLabels[_.type[E].replace("_fold","")].singular,"' role=img> </span> ").concat(_.text[E]);L[_.type[E].replace("_fold","")].push(T)}var M=[].concat(L.error,L.warning,L.info).join("<br>");this.setHtml(M),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},p.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},p.annotationsToSummaryString=function(f){var o,h,_=[],m=["error","warning","info"];try{for(var y=v(m),C=y.next();!C.done;C=y.next()){var E=C.value;if(f[E].length){var D=f[E].length===1?p.annotationLabels[E].singular:p.annotationLabels[E].plural;_.push("".concat(f[E].length," ").concat(D))}}}catch(g){o={error:g}}finally{try{C&&!C.done&&(h=y.return)&&h.call(y)}finally{if(o)throw o.error}}return _.join(", ")},p}(d);t.GutterTooltip=u});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("../lib/event"),v=e("../lib/useragent"),s=function(){function a(d,i){this.speed,this.wheelX,this.wheelY,this.domEvent=d,this.editor=i,this.x=this.clientX=d.clientX,this.y=this.clientY=d.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return a.prototype.stopPropagation=function(){c.stopPropagation(this.domEvent),this.propagationStopped=!0},a.prototype.preventDefault=function(){c.preventDefault(this.domEvent),this.defaultPrevented=!0},a.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},a.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},a.prototype.getGutterRow=function(){var d=this.getDocumentPosition().row,i=this.editor.session.documentToScreenRow(d,0),r=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return i-r},a.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var d=this.editor,i=d.getSelectionRange();if(i.isEmpty())this.$inSelection=!1;else{var r=this.getDocumentPosition();this.$inSelection=i.contains(r.row,r.column)}return this.$inSelection},a.prototype.getButton=function(){return c.getButton(this.domEvent)},a.prototype.getShiftKey=function(){return this.domEvent.shiftKey},a.prototype.getAccelKey=function(){return v.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},a}();t.MouseEvent=s});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=e("../lib/event"),s=e("../lib/useragent"),a=200,d=200,i=5;function r(l){var p=l.editor,f=c.createElement("div");f.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",f.textContent="\xA0";var o=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];o.forEach(function(U){l[U]=this[U]},this),p.on("mousedown",this.onMouseDown.bind(l));var h=p.container,_,m,y,C,E,D,g=0,b,L,S,T,M;this.onDragStart=function(U){if(this.cancelDrag||!h.draggable){var q=this;return setTimeout(function(){q.startSelect(),q.captureMouse(U)},0),U.preventDefault()}E=p.getSelectionRange();var N=U.dataTransfer;N.effectAllowed=p.getReadOnly()?"copy":"copyMove",p.container.appendChild(f),N.setDragImage&&N.setDragImage(f,0,0),setTimeout(function(){p.container.removeChild(f)}),N.clearData(),N.setData("Text",p.session.getTextRange()),L=!0,this.setState("drag")},this.onDragEnd=function(U){if(h.draggable=!1,L=!1,this.setState(null),!p.getReadOnly()){var q=U.dataTransfer.dropEffect;!b&&q=="move"&&p.session.remove(p.getSelectionRange()),p.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(U){if(!(p.getReadOnly()||!k(U.dataTransfer)))return m=U.clientX,y=U.clientY,_||R(),g++,U.dataTransfer.dropEffect=b=H(U),v.preventDefault(U)},this.onDragOver=function(U){if(!(p.getReadOnly()||!k(U.dataTransfer)))return m=U.clientX,y=U.clientY,_||(R(),g++),I!==null&&(I=null),U.dataTransfer.dropEffect=b=H(U),v.preventDefault(U)},this.onDragLeave=function(U){if(g--,g<=0&&_)return A(),b=null,v.preventDefault(U)},this.onDrop=function(U){if(D){var q=U.dataTransfer;if(L)switch(b){case"move":E.contains(D.row,D.column)?E={start:D,end:D}:E=p.moveText(E,D);break;case"copy":E=p.moveText(E,D,!0);break}else{var N=q.getData("Text");E={start:D,end:p.session.insert(D,N)},p.focus(),b=null}return A(),v.preventDefault(U)}},v.addListener(h,"dragstart",this.onDragStart.bind(l),p),v.addListener(h,"dragend",this.onDragEnd.bind(l),p),v.addListener(h,"dragenter",this.onDragEnter.bind(l),p),v.addListener(h,"dragover",this.onDragOver.bind(l),p),v.addListener(h,"dragleave",this.onDragLeave.bind(l),p),v.addListener(h,"drop",this.onDrop.bind(l),p);function w(U,q){var N=Date.now(),K=!q||U.row!=q.row,O=!q||U.column!=q.column;if(!T||K||O)p.moveCursorToPosition(U),T=N,M={x:m,y};else{var B=u(M.x,M.y,m,y);B>i?T=null:N-T>=d&&(p.renderer.scrollCursorIntoView(),T=null)}}function F(U,q){var N=Date.now(),K=p.renderer.layerConfig.lineHeight,O=p.renderer.layerConfig.characterWidth,B=p.renderer.scroller.getBoundingClientRect(),W={x:{left:m-B.left,right:B.right-m},y:{top:y-B.top,bottom:B.bottom-y}},P=Math.min(W.x.left,W.x.right),Y=Math.min(W.y.top,W.y.bottom),J={row:U.row,column:U.column};P/O<=2&&(J.column+=W.x.left<W.x.right?-3:2),Y/K<=1&&(J.row+=W.y.top<W.y.bottom?-1:1);var ve=U.row!=J.row,Ee=U.column!=J.column,Ce=!q||U.row!=q.row;ve||Ee&&!Ce?S?N-S>=a&&p.renderer.scrollCursorIntoView(J):S=N:S=null}function x(){var U=D;D=p.renderer.screenToTextCoordinates(m,y),w(D,U),F(D,U)}function R(){E=p.selection.toOrientedRange(),_=p.session.addMarker(E,"ace_selection",p.getSelectionStyle()),p.clearSelection(),p.isFocused()&&p.renderer.$cursorLayer.setBlinking(!1),clearInterval(C),x(),C=setInterval(x,20),g=0,v.addListener(document,"mousemove",$)}function A(){clearInterval(C),p.session.removeMarker(_),_=null,p.selection.fromOrientedRange(E),p.isFocused()&&!L&&p.$resetCursorStyle(),E=null,D=null,g=0,S=null,T=null,v.removeListener(document,"mousemove",$)}var I=null;function $(){I==null&&(I=setTimeout(function(){I!=null&&_&&A()},20))}function k(U){var q=U.types;return!q||Array.prototype.some.call(q,function(N){return N=="text/plain"||N=="Text"})}function H(U){var q=["copy","copymove","all","uninitialized"],N=["move","copymove","linkmove","all","uninitialized"],K=s.isMac?U.altKey:U.ctrlKey,O="uninitialized";try{O=U.dataTransfer.effectAllowed.toLowerCase()}catch{}var B="none";return K&&q.indexOf(O)>=0?B="copy":N.indexOf(O)>=0?B="move":q.indexOf(O)>=0&&(B="copy"),B}}(function(){this.dragWait=function(){var l=Date.now()-this.mousedownEvent.time;l>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var l=this.editor.container;l.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(l){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var l=this.editor,p=l.container;p.draggable=!0,l.renderer.$cursorLayer.setBlinking(!1),l.setStyle("ace_dragging");var f=s.isWin?"default":"move";l.renderer.setCursorStyle(f),this.setState("dragReady")},this.onMouseDrag=function(l){var p=this.editor.container;if(s.isIE&&this.state=="dragReady"){var f=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);f>3&&p.dragDrop()}if(this.state==="dragWait"){var f=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);f>0&&(p.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(l){if(this.$dragEnabled){this.mousedownEvent=l;var p=this.editor,f=l.inSelection(),o=l.getButton(),h=l.domEvent.detail||1;if(h===1&&o===0&&f){if(l.editor.inMultiSelectMode&&(l.getAccelKey()||l.getShiftKey()))return;this.mousedownEvent.time=Date.now();var _=l.domEvent.target||l.domEvent.srcElement;if("unselectable"in _&&(_.unselectable="on"),p.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var m=p.container;m.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(l,this.onMouseDrag.bind(this)),l.defaultPrevented=!0}}}}).call(r.prototype);function u(l,p,f,o){return Math.sqrt(Math.pow(f-l,2)+Math.pow(o-p,2))}t.DragdropHandler=r});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var c=e("./mouse_event").MouseEvent,v=e("../lib/event"),s=e("../lib/dom");t.addTouchListeners=function(a,d){var i="scroll",r,u,l,p,f,o,h=0,_,m=0,y=0,C=0,E,D;function g(){var w=window.navigator&&window.navigator.clipboard,F=!1,x=function(){var A=d.getCopyText(),I=d.session.getUndoManager().hasUndo();D.replaceChild(s.buildDom(F?["span",!A&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],A&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],A&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],w&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],I&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),D.firstChild)},R=function(A){var I=A.target.getAttribute("action");if(I=="more"||!F)return F=!F,x();I=="paste"?w.readText().then(function($){d.execCommand(I,$)}):I&&((I=="cut"||I=="copy")&&(w?w.writeText(d.getCopyText()):document.execCommand("copy")),d.execCommand(I)),D.firstChild.style.display="none",F=!1,I!="openCommandPalette"&&d.focus()};D=s.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(A){i="menu",A.stopPropagation(),A.preventDefault(),d.textInput.focus()},ontouchend:function(A){A.stopPropagation(),A.preventDefault(),R(A)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],d.container)}function b(){D||g();var w=d.selection.cursor,F=d.renderer.textToScreenCoordinates(w.row,w.column),x=d.renderer.textToScreenCoordinates(0,0).pageX,R=d.renderer.scrollLeft,A=d.container.getBoundingClientRect();D.style.top=F.pageY-A.top-3+"px",F.pageX-A.left<A.width-70?(D.style.left="",D.style.right="10px"):(D.style.right="",D.style.left=x+R-A.left+"px"),D.style.display="",D.firstChild.style.display="none",d.on("input",L)}function L(w){D&&(D.style.display="none"),d.off("input",L)}function S(){f=null,clearTimeout(f);var w=d.selection.getRange(),F=w.contains(_.row,_.column);(w.isEmpty()||!F)&&(d.selection.moveToPosition(_),d.selection.selectWord()),i="wait",b()}function T(){f=null,clearTimeout(f),d.selection.moveToPosition(_);var w=m>=2?d.selection.getLineRange(_.row):d.session.getBracketRange(_);w&&!w.isEmpty()?d.selection.setRange(w):d.selection.selectWord(),i="wait"}v.addListener(a,"contextmenu",function(w){if(E){var F=d.textInput.getElement();F.focus()}},d),v.addListener(a,"touchstart",function(w){var F=w.touches;if(f||F.length>1){clearTimeout(f),f=null,l=-1,i="zoom";return}E=d.$mouseHandler.isMousePressed=!0;var x=d.renderer.layerConfig.lineHeight,R=d.renderer.layerConfig.lineHeight,A=w.timeStamp;p=A;var I=F[0],$=I.clientX,k=I.clientY;Math.abs(r-$)+Math.abs(u-k)>x&&(l=-1),r=w.clientX=$,u=w.clientY=k,y=C=0;var H=new c(w,d);if(_=H.getDocumentPosition(),A-l<500&&F.length==1&&!h)m++,w.preventDefault(),w.button=0,T();else{m=0;var U=d.selection.cursor,q=d.selection.isEmpty()?U:d.selection.anchor,N=d.renderer.$cursorLayer.getPixelPosition(U,!0),K=d.renderer.$cursorLayer.getPixelPosition(q,!0),O=d.renderer.scroller.getBoundingClientRect(),B=d.renderer.layerConfig.offset,W=d.renderer.scrollLeft,P=function(ve,Ee){return ve=ve/R,Ee=Ee/x-.75,ve*ve+Ee*Ee};if(w.clientX<O.left){i="zoom";return}var Y=P(w.clientX-O.left-N.left+W,w.clientY-O.top-N.top+B),J=P(w.clientX-O.left-K.left+W,w.clientY-O.top-K.top+B);Y<3.5&&J<3.5&&(i=Y>J?"cursor":"anchor"),J<3.5?i="anchor":Y<3.5?i="cursor":i="scroll",f=setTimeout(S,450)}l=A},d),v.addListener(a,"touchend",function(w){E=d.$mouseHandler.isMousePressed=!1,o&&clearInterval(o),i=="zoom"?(i="",h=0):f?(d.selection.moveToPosition(_),h=0,b()):i=="scroll"?(M(),L()):b(),clearTimeout(f),f=null},d),v.addListener(a,"touchmove",function(w){f&&(clearTimeout(f),f=null);var F=w.touches;if(!(F.length>1||i=="zoom")){var x=F[0],R=r-x.clientX,A=u-x.clientY;if(i=="wait")if(R*R+A*A>4)i="cursor";else return w.preventDefault();r=x.clientX,u=x.clientY,w.clientX=x.clientX,w.clientY=x.clientY;var I=w.timeStamp,$=I-p;if(p=I,i=="scroll"){var k=new c(w,d);k.speed=1,k.wheelX=R,k.wheelY=A,10*Math.abs(R)<Math.abs(A)&&(R=0),10*Math.abs(A)<Math.abs(R)&&(A=0),$!=0&&(y=R/$,C=A/$),d._emit("mousewheel",k),k.propagationStopped||(y=C=0)}else{var H=new c(w,d),U=H.getDocumentPosition();i=="cursor"?d.selection.moveCursorToPosition(U):i=="anchor"&&d.selection.setSelectionAnchor(U.row,U.column),d.renderer.scrollCursorIntoView(U),w.preventDefault()}}},d);function M(){h+=60,o=setInterval(function(){h--<=0&&(clearInterval(o),o=null),Math.abs(y)<.01&&(y=0),Math.abs(C)<.01&&(C=0),h<20&&(y=.9*y),h<20&&(C=.9*C);var w=d.session.getScrollTop();d.renderer.scrollBy(10*y,10*C),w==d.session.getScrollTop()&&(h=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var c=e("../lib/event"),v=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,a=e("./default_gutter_handler").GutterHandler,d=e("./mouse_event").MouseEvent,i=e("./dragdrop_handler").DragdropHandler,r=e("./touch_handler").addTouchListeners,u=e("../config"),l=function(){function p(f){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var o=this;this.editor=f,new s(this),new a(this),new i(this);var h=function(y){var C=!document.hasFocus||!document.hasFocus()||!f.isFocused()&&document.activeElement==(f.textInput&&f.textInput.getElement());C&&window.focus(),f.focus(),setTimeout(function(){f.isFocused()||f.focus()})},_=f.renderer.getMouseEventTarget();c.addListener(_,"click",this.onMouseEvent.bind(this,"click"),f),c.addListener(_,"mousemove",this.onMouseMove.bind(this,"mousemove"),f),c.addMultiMouseDownListener([_,f.renderer.scrollBarV&&f.renderer.scrollBarV.inner,f.renderer.scrollBarH&&f.renderer.scrollBarH.inner,f.textInput&&f.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",f),c.addMouseWheelListener(f.container,this.onMouseWheel.bind(this,"mousewheel"),f),r(f.container,f);var m=f.renderer.$gutter;c.addListener(m,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),f),c.addListener(m,"click",this.onMouseEvent.bind(this,"gutterclick"),f),c.addListener(m,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),f),c.addListener(m,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),f),c.addListener(_,"mousedown",h,f),c.addListener(m,"mousedown",h,f),v.isIE&&f.renderer.scrollBarV&&(c.addListener(f.renderer.scrollBarV.element,"mousedown",h,f),c.addListener(f.renderer.scrollBarH.element,"mousedown",h,f)),f.on("mousemove",function(y){if(!(o.state||o.$dragDelay||!o.$dragEnabled)){var C=f.renderer.screenToTextCoordinates(y.x,y.y),E=f.session.selection.getRange(),D=f.renderer;!E.isEmpty()&&E.insideStart(C.row,C.column)?D.setCursorStyle("default"):D.setCursorStyle("")}},f)}return p.prototype.onMouseEvent=function(f,o){this.editor.session&&this.editor._emit(f,new d(o,this.editor))},p.prototype.onMouseMove=function(f,o){var h=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!h||!h.length||this.editor._emit(f,new d(o,this.editor))},p.prototype.onMouseWheel=function(f,o){var h=new d(o,this.editor);h.speed=this.$scrollSpeed*2,h.wheelX=o.wheelX,h.wheelY=o.wheelY,this.editor._emit(f,h)},p.prototype.setState=function(f){this.state=f},p.prototype.captureMouse=function(f,o){this.x=f.x,this.y=f.y,this.isMousePressed=!0;var h=this.editor,_=this.editor.renderer;_.$isMousePressed=!0;var m=this,y=function(b){if(b){if(v.isWebKit&&!b.which&&m.releaseMouse)return m.releaseMouse();m.x=b.clientX,m.y=b.clientY,o&&o(b),m.mouseEvent=new d(b,m.editor),m.$mouseMoved=!0}},C=function(b){h.off("beforeEndOperation",D),clearInterval(g),h.session&&E(),m[m.state+"End"]&&m[m.state+"End"](b),m.state="",m.isMousePressed=_.$isMousePressed=!1,_.$keepTextAreaAtCursor&&_.$moveTextAreaToCursor(),m.$onCaptureMouseMove=m.releaseMouse=null,b&&m.onMouseEvent("mouseup",b),h.endOperation()},E=function(){m[m.state]&&m[m.state](),m.$mouseMoved=!1};if(v.isOldIE&&f.domEvent.type=="dblclick")return setTimeout(function(){C(f)});var D=function(b){m.releaseMouse&&h.curOp.command.name&&h.curOp.selectionChanged&&(m[m.state+"End"]&&m[m.state+"End"](),m.state="",m.releaseMouse())};h.on("beforeEndOperation",D),h.startOperation({command:{name:"mouse"}}),m.$onCaptureMouseMove=y,m.releaseMouse=c.capture(this.editor.container,y,C);var g=setInterval(E,20)},p.prototype.cancelContextMenu=function(){var f=function(o){o&&o.domEvent&&o.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",f),o&&o.domEvent&&c.stopEvent(o.domEvent))}.bind(this);setTimeout(f,10),this.editor.on("nativecontextmenu",f)},p.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},p}();l.prototype.releaseMouse=null,u.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:v.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=function(){function s(a){a.on("click",function(d){var i=d.getDocumentPosition(),r=a.session,u=r.getFoldAt(i.row,i.column,1);u&&(d.getAccelKey()?r.removeFold(u):r.expandFold(u),d.stop());var l=d.domEvent&&d.domEvent.target;l&&c.hasCssClass(l,"ace_inline_button")&&c.hasCssClass(l,"ace_toggle_wrap")&&(r.setOption("wrap",!r.getUseWrapMode()),a.renderer.scrollCursorIntoView())}),a.on("gutterclick",function(d){var i=a.renderer.$gutterLayer.getRegion(d);if(i=="foldWidgets"){var r=d.getDocumentPosition().row,u=a.session;u.foldWidgets&&u.foldWidgets[r]&&a.session.onFoldWidgetClick(r,d),a.isFocused()||a.focus(),d.stop()}}),a.on("gutterdblclick",function(d){var i=a.renderer.$gutterLayer.getRegion(d);if(i=="foldWidgets"){var r=d.getDocumentPosition().row,u=a.session,l=u.getParentFoldRangeData(r,!0),p=l.range||l.firstRange;if(p){r=p.start.row;var f=u.getFoldAt(r,u.getLine(r).length,1);f?u.removeFold(f):(u.addFold("...",p),a.renderer.scrollCursorIntoView({row:p.start.row,column:0}))}d.stop()}})}return s}();t.FoldHandler=v});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var c=e("../lib/keys"),v=e("../lib/event"),s=function(){function a(d){this.$editor=d,this.$data={editor:d},this.$handlers=[],this.setDefaultHandler(d.commands)}return a.prototype.setDefaultHandler=function(d){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=d,this.addKeyboardHandler(d,0)},a.prototype.setKeyboardHandler=function(d){var i=this.$handlers;if(i[i.length-1]!=d){for(;i[i.length-1]&&i[i.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(i[i.length-1]);this.addKeyboardHandler(d,1)}},a.prototype.addKeyboardHandler=function(d,i){if(d){typeof d=="function"&&!d.handleKeyboard&&(d.handleKeyboard=d);var r=this.$handlers.indexOf(d);r!=-1&&this.$handlers.splice(r,1),i==null?this.$handlers.push(d):this.$handlers.splice(i,0,d),r==-1&&d.attach&&d.attach(this.$editor)}},a.prototype.removeKeyboardHandler=function(d){var i=this.$handlers.indexOf(d);return i==-1?!1:(this.$handlers.splice(i,1),d.detach&&d.detach(this.$editor),!0)},a.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},a.prototype.getStatusText=function(){var d=this.$data,i=d.editor;return this.$handlers.map(function(r){return r.getStatusText&&r.getStatusText(i,d)||""}).filter(Boolean).join(" ")},a.prototype.$callKeyboardHandlers=function(d,i,r,u){for(var l,p=!1,f=this.$editor.commands,o=this.$handlers.length;o--&&(l=this.$handlers[o].handleKeyboard(this.$data,d,i,r,u),!(!(!l||!l.command)&&(l.command=="null"?p=!0:p=f.exec(l.command,this.$editor,l.args,u),p&&u&&d!=-1&&l.passEvent!=!0&&l.command.passEvent!=!0&&v.stopEvent(u),p))););return!p&&d==-1&&(l={command:"insertstring"},p=f.exec("insertstring",this.$editor,i)),p&&this.$editor._signal&&this.$editor._signal("keyboardActivity",l),p},a.prototype.onCommandKey=function(d,i,r){var u=c.keyCodeToString(r);return this.$callKeyboardHandlers(i,u,r,d)},a.prototype.onTextInput=function(d){return this.$callKeyboardHandlers(-1,d)},a}();t.KeyBinding=s});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var c=["\u0621","\u0641"],v=["\u063A","\u064A"],s=0,a=0,d=!1,i=!1,r=!1,u=!1,l=!1,p=!1,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],o=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,_=1,m=0,y=1,C=2,E=3,D=4,g=5,b=6,L=7,S=8,T=9,M=10,w=11,F=12,x=13,R=14,A=15,I=16,$=17,k=18,H=[k,k,k,k,k,k,k,k,k,b,g,b,S,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,g,g,g,b,S,D,D,w,w,w,D,D,D,D,D,M,T,M,T,T,C,C,C,C,C,C,C,C,C,C,T,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,k,k,k,k,k,k,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,T,D,w,w,w,w,D,D,D,D,m,D,D,k,D,D,w,w,C,C,D,m,D,D,D,C,m,D,D,D,D,D],U=[S,S,S,S,S,S,S,S,S,S,S,k,k,k,m,y,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,S,g,x,R,A,I,$,T,w,w,w,w,w,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,T,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,S];function q(W,P,Y,J){var ve=s?o:f,Ee=null,Ce=null,se=null,Se=0,Ct=null,Jt=null,Bt=-1,Ze=null,ce=null,he=[];if(!J)for(Ze=0,J=[];Ze<Y;Ze++)J[Ze]=O(W[Ze]);for(a=s,d=!1,i=!1,r=!1,u=!1,ce=0;ce<Y;ce++){if(Ee=Se,he[ce]=Ce=K(W,J,he,ce),Se=ve[Ee][Ce],Ct=Se&240,Se&=15,P[ce]=se=ve[Se][5],Ct>0)if(Ct==16){for(Ze=Bt;Ze<ce;Ze++)P[Ze]=1;Bt=-1}else Bt=-1;if(Jt=ve[Se][6],Jt)Bt==-1&&(Bt=ce);else if(Bt>-1){for(Ze=Bt;Ze<ce;Ze++)P[Ze]=se;Bt=-1}J[ce]==g&&(P[ce]=0),a|=se}if(u){for(Ze=0;Ze<Y;Ze++)if(J[Ze]==b){P[Ze]=s;for(var le=Ze-1;le>=0&&J[le]==S;le--)P[le]=s}}}function N(W,P,Y){if(!(a<W)){if(W==1&&s==_&&!r){Y.reverse();return}for(var J=Y.length,ve=0,Ee,Ce,se,Se;ve<J;){if(P[ve]>=W){for(Ee=ve+1;Ee<J&&P[Ee]>=W;)Ee++;for(Ce=ve,se=Ee-1;Ce<se;Ce++,se--)Se=Y[Ce],Y[Ce]=Y[se],Y[se]=Se;ve=Ee}ve++}}}function K(W,P,Y,J){var ve=P[J],Ee,Ce,se,Se;switch(ve){case m:case y:d=!1;case D:case E:return ve;case C:return d?E:C;case L:return d=!0,i=!0,y;case S:return D;case T:return J<1||J+1>=P.length||(Ee=Y[J-1])!=C&&Ee!=E||(Ce=P[J+1])!=C&&Ce!=E?D:(d&&(Ce=E),Ce==Ee?Ce:D);case M:return Ee=J>0?Y[J-1]:g,Ee==C&&J+1<P.length&&P[J+1]==C?C:D;case w:if(J>0&&Y[J-1]==C)return C;if(d)return D;for(Se=J+1,se=P.length;Se<se&&P[Se]==w;)Se++;return Se<se&&P[Se]==C?C:D;case F:for(se=P.length,Se=J+1;Se<se&&P[Se]==F;)Se++;if(Se<se){var Ct=W[J],Jt=Ct>=1425&&Ct<=2303||Ct==64286;if(Ee=P[Se],Jt&&(Ee==y||Ee==L))return y}return J<1||(Ee=P[J-1])==g?D:Y[J-1];case g:return d=!1,r=!0,s;case b:return u=!0,D;case x:case R:case I:case $:case A:d=!1;case k:return D}}function O(W){var P=W.charCodeAt(0),Y=P>>8;return Y==0?P>191?m:H[P]:Y==5?/[\u0591-\u05f4]/.test(W)?y:m:Y==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(W)?F:/[\u0660-\u0669\u066b-\u066c]/.test(W)?E:P==1642?w:/[\u06f0-\u06f9]/.test(W)?C:L:Y==32&&P<=8287?U[P&255]:Y==254&&P>=65136?L:D}function B(W){return W>="\u064B"&&W<="\u0655"}t.L=m,t.R=y,t.EN=C,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(W,P,Y){if(W.length<2)return{};var J=W.split(""),ve=new Array(J.length),Ee=new Array(J.length),Ce=[];s=Y?_:h,q(J,Ce,J.length,P);for(var se=0;se<ve.length;ve[se]=se,se++);N(2,Ce,ve),N(1,Ce,ve);for(var se=0;se<ve.length-1;se++)P[se]===E?Ce[se]=t.AN:Ce[se]===y&&(P[se]>L&&P[se]<x||P[se]===D||P[se]===k)?Ce[se]=t.ON_R:se>0&&J[se-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(J[se])&&(Ce[se-1]=Ce[se]=t.R_H,se++);J[J.length-1]===t.DOT&&(Ce[J.length-1]=t.B),J[0]==="\u202B"&&(Ce[0]=t.RLE);for(var se=0;se<ve.length;se++)Ee[se]=Ce[ve[se]];return{logicalFromVisual:ve,bidiLevels:Ee}},t.hasBidiCharacters=function(W,P){for(var Y=!1,J=0;J<W.length;J++)P[J]=O(W.charAt(J)),!Y&&(P[J]==y||P[J]==L||P[J]==E)&&(Y=!0);return Y},t.getVisualFromLogicalIdx=function(W,P){for(var Y=0;Y<P.logicalFromVisual.length;Y++)if(P.logicalFromVisual[Y]==W)return Y;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var c=e("./lib/bidiutil"),v=e("./lib/lang"),s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(){function d(i){this.session=i,this.bidiMap={},this.currentRow=null,this.bidiUtil=c,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=s.test(i.getValue())}return d.prototype.isBidiRow=function(i,r,u){return this.seenBidi?(i!==this.currentRow&&(this.currentRow=i,this.updateRowLine(r,u),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},d.prototype.onChange=function(i){this.seenBidi?this.currentRow=null:i.action=="insert"&&s.test(i.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},d.prototype.getDocumentRow=function(){var i=0,r=this.session.$screenRowCache;if(r.length){var u=this.session.$getRowCacheIndex(r,this.currentRow);u>=0&&(i=this.session.$docRowCache[u])}return i},d.prototype.getSplitIndex=function(){var i=0,r=this.session.$screenRowCache;if(r.length)for(var u,l=this.session.$getRowCacheIndex(r,this.currentRow);this.currentRow-i>0&&(u=this.session.$getRowCacheIndex(r,this.currentRow-i-1),u===l);)l=u,i++;else i=this.currentRow;return i},d.prototype.updateRowLine=function(i,r){i===void 0&&(i=this.getDocumentRow());var u=i===this.session.getLength()-1,l=u?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(i),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var p=this.session.$wrapData[i];p&&(r===void 0&&(r=this.getSplitIndex()),r>0&&p.length?(this.wrapIndent=p.indent,this.wrapOffset=this.wrapIndent*this.charWidths[c.L],this.line=r<p.length?this.line.substring(p[r-1],p[r]):this.line.substring(p[p.length-1])):this.line=this.line.substring(0,p[r]),r==p.length&&(this.line+=this.showInvisibles?l:c.DOT))}else this.line+=this.showInvisibles?l:c.DOT;var f=this.session,o=0,h;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(_,m){return _==="	"||f.isFullWidth(_.charCodeAt(0))?(h=_==="	"?f.getScreenTabSize(m+o):2,o+=h-1,v.stringRepeat(c.DOT,h)):_}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==c.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},d.prototype.updateBidiMap=function(){var i=[];c.hasBidiCharacters(this.line,i)||this.isRtlDir?this.bidiMap=c.doBidiReorder(this.line,i,this.isRtlDir):this.bidiMap={}},d.prototype.markAsDirty=function(){this.currentRow=null},d.prototype.updateCharacterWidths=function(i){if(this.characterWidth!==i.$characterSize.width){this.fontMetrics=i;var r=this.characterWidth=i.$characterSize.width,u=i.$measureCharWidth("\u05D4");this.charWidths[c.L]=this.charWidths[c.EN]=this.charWidths[c.ON_R]=r,this.charWidths[c.R]=this.charWidths[c.AN]=u,this.charWidths[c.R_H]=u*.45,this.charWidths[c.B]=this.charWidths[c.RLE]=0,this.currentRow=null}},d.prototype.setShowInvisibles=function(i){this.showInvisibles=i,this.currentRow=null},d.prototype.setEolChar=function(i){this.EOL=i},d.prototype.setContentWidth=function(i){this.contentWidth=i},d.prototype.isRtlLine=function(i){return this.$isRtl?!0:i!=null?this.session.getLine(i).charAt(0)==this.RLE:this.isRtlDir},d.prototype.setRtlDirection=function(i,r){for(var u=i.getCursorPosition(),l=i.selection.getSelectionAnchor().row;l<=u.row;l++)!r&&i.session.getLine(l).charAt(0)===i.session.$bidiHandler.RLE?i.session.doc.removeInLine(l,0,1):r&&i.session.getLine(l).charAt(0)!==i.session.$bidiHandler.RLE&&i.session.doc.insert({column:0,row:l},i.session.$bidiHandler.RLE)},d.prototype.getPosLeft=function(i){i-=this.wrapIndent;var r=this.line.charAt(0)===this.RLE?1:0,u=i>r?this.session.getOverwrite()?i:i-1:r,l=c.getVisualFromLogicalIdx(u,this.bidiMap),p=this.bidiMap.bidiLevels,f=0;!this.session.getOverwrite()&&i<=r&&p[l]%2!==0&&l++;for(var o=0;o<l;o++)f+=this.charWidths[p[o]];return!this.session.getOverwrite()&&i>r&&p[l]%2===0&&(f+=this.charWidths[p[l]]),this.wrapIndent&&(f+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(f+=this.rtlLineOffset),f},d.prototype.getSelections=function(i,r){var u=this.bidiMap,l=u.bidiLevels,p,f=[],o=0,h=Math.min(i,r)-this.wrapIndent,_=Math.max(i,r)-this.wrapIndent,m=!1,y=!1,C=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var E,D=0;D<l.length;D++)E=u.logicalFromVisual[D],p=l[D],m=E>=h&&E<_,m&&!y?C=o:!m&&y&&f.push({left:C,width:o-C}),o+=this.charWidths[p],y=m;if(m&&D===l.length&&f.push({left:C,width:o-C}),this.isRtlDir)for(var g=0;g<f.length;g++)f[g].left+=this.rtlLineOffset;return f},d.prototype.offsetToCol=function(u){this.isRtlDir&&(u-=this.rtlLineOffset);var r=0,u=Math.max(u,0),l=0,p=0,f=this.bidiMap.bidiLevels,o=this.charWidths[f[p]];for(this.wrapIndent&&(u-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);u>l+o/2;){if(l+=o,p===f.length-1){o=0;break}o=this.charWidths[f[++p]]}return p>0&&f[p-1]%2!==0&&f[p]%2===0?(u<l&&p--,r=this.bidiMap.logicalFromVisual[p]):p>0&&f[p-1]%2===0&&f[p]%2!==0?r=1+(u>l?this.bidiMap.logicalFromVisual[p]:this.bidiMap.logicalFromVisual[p-1]):this.isRtlDir&&p===f.length-1&&o===0&&f[p-1]%2===0||!this.isRtlDir&&p===0&&f[p]%2!==0?r=1+this.bidiMap.logicalFromVisual[p]:(p>0&&f[p-1]%2!==0&&o!==0&&p--,r=this.bidiMap.logicalFromVisual[p]),r===0&&this.isRtlDir&&r++,r+this.wrapIndent},d}();t.BidiHandler=a});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,d=function(){function i(r){this.session=r,this.doc=r.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var u=this;this.cursor.on("change",function(l){u.$cursorChanged=!0,u.$silent||u._emit("changeCursor"),!u.$isEmpty&&!u.$silent&&u._emit("changeSelection"),!u.$keepDesiredColumnOnChange&&l.old.column!=l.value.column&&(u.$desiredColumn=null)}),this.anchor.on("change",function(){u.$anchorChanged=!0,!u.$isEmpty&&!u.$silent&&u._emit("changeSelection")})}return i.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},i.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},i.prototype.getCursor=function(){return this.lead.getPosition()},i.prototype.setAnchor=function(r,u){this.$isEmpty=!1,this.anchor.setPosition(r,u)},i.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},i.prototype.getSelectionLead=function(){return this.lead.getPosition()},i.prototype.isBackwards=function(){var r=this.anchor,u=this.lead;return r.row>u.row||r.row==u.row&&r.column>u.column},i.prototype.getRange=function(){var r=this.anchor,u=this.lead;return this.$isEmpty?a.fromPoints(u,u):this.isBackwards()?a.fromPoints(u,r):a.fromPoints(r,u)},i.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},i.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},i.prototype.setRange=function(r,u){var l=u?r.end:r.start,p=u?r.start:r.end;this.$setSelection(l.row,l.column,p.row,p.column)},i.prototype.$setSelection=function(r,u,l,p){if(!this.$silent){var f=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(r,u),this.cursor.setPosition(l,p),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||f!=this.$isEmpty||o)&&this._emit("changeSelection")}},i.prototype.$moveSelection=function(r){var u=this.lead;this.$isEmpty&&this.setSelectionAnchor(u.row,u.column),r.call(this)},i.prototype.selectTo=function(r,u){this.$moveSelection(function(){this.moveCursorTo(r,u)})},i.prototype.selectToPosition=function(r){this.$moveSelection(function(){this.moveCursorToPosition(r)})},i.prototype.moveTo=function(r,u){this.clearSelection(),this.moveCursorTo(r,u)},i.prototype.moveToPosition=function(r){this.clearSelection(),this.moveCursorToPosition(r)},i.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},i.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},i.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},i.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},i.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},i.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},i.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},i.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},i.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},i.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},i.prototype.getWordRange=function(r,u){if(typeof u>"u"){var l=r||this.lead;r=l.row,u=l.column}return this.session.getWordRange(r,u)},i.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},i.prototype.selectAWord=function(){var r=this.getCursor(),u=this.session.getAWordRange(r.row,r.column);this.setSelectionRange(u)},i.prototype.getLineRange=function(r,u){var l=typeof r=="number"?r:this.lead.row,p,f=this.session.getFoldLine(l);return f?(l=f.start.row,p=f.end.row):p=l,u===!0?new a(l,0,p,this.session.getLine(p).length):new a(l,0,p+1,0)},i.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},i.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},i.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},i.prototype.wouldMoveIntoSoftTab=function(r,u,l){var p=r.column,f=r.column+u;return l<0&&(p=r.column-u,f=r.column),this.session.isTabStop(r)&&this.doc.getLine(r.row).slice(p,f).split(" ").length-1==u},i.prototype.moveCursorLeft=function(){var r=this.lead.getPosition(),u;if(u=this.session.getFoldAt(r.row,r.column,-1))this.moveCursorTo(u.start.row,u.start.column);else if(r.column===0)r.row>0&&this.moveCursorTo(r.row-1,this.doc.getLine(r.row-1).length);else{var l=this.session.getTabSize();this.wouldMoveIntoSoftTab(r,l,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-l):this.moveCursorBy(0,-1)}},i.prototype.moveCursorRight=function(){var r=this.lead.getPosition(),u;if(u=this.session.getFoldAt(r.row,r.column,1))this.moveCursorTo(u.end.row,u.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var l=this.session.getTabSize(),r=this.lead;this.wouldMoveIntoSoftTab(r,l,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,l):this.moveCursorBy(0,1)}},i.prototype.moveCursorLineStart=function(){var r=this.lead.row,u=this.lead.column,l=this.session.documentToScreenRow(r,u),p=this.session.screenToDocumentPosition(l,0),f=this.session.getDisplayLine(r,null,p.row,p.column),o=f.match(/^\s*/);o[0].length!=u&&!this.session.$useEmacsStyleLineStart&&(p.column+=o[0].length),this.moveCursorToPosition(p)},i.prototype.moveCursorLineEnd=function(){var r=this.lead,u=this.session.getDocumentLastRowColumnPosition(r.row,r.column);if(this.lead.column==u.column){var l=this.session.getLine(u.row);if(u.column==l.length){var p=l.search(/\s+$/);p>0&&(u.column=p)}}this.moveCursorTo(u.row,u.column)},i.prototype.moveCursorFileEnd=function(){var r=this.doc.getLength()-1,u=this.doc.getLine(r).length;this.moveCursorTo(r,u)},i.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},i.prototype.moveCursorLongWordRight=function(){var r=this.lead.row,u=this.lead.column,l=this.doc.getLine(r),p=l.substring(u);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var f=this.session.getFoldAt(r,u,1);if(f){this.moveCursorTo(f.end.row,f.end.column);return}if(this.session.nonTokenRe.exec(p)&&(u+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,p=l.substring(u)),u>=l.length){this.moveCursorTo(r,l.length),this.moveCursorRight(),r<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(p)&&(u+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,u)},i.prototype.moveCursorLongWordLeft=function(){var r=this.lead.row,u=this.lead.column,l;if(l=this.session.getFoldAt(r,u,-1)){this.moveCursorTo(l.start.row,l.start.column);return}var p=this.session.getFoldStringAt(r,u,-1);p==null&&(p=this.doc.getLine(r).substring(0,u));var f=v.stringReverse(p);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(f)&&(u-=this.session.nonTokenRe.lastIndex,f=f.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),u<=0){this.moveCursorTo(r,0),this.moveCursorLeft(),r>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(f)&&(u-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,u)},i.prototype.$shortWordEndIndex=function(r){var u=0,l,p=/\s/,f=this.session.tokenRe;if(f.lastIndex=0,this.session.tokenRe.exec(r))u=this.session.tokenRe.lastIndex;else{for(;(l=r[u])&&p.test(l);)u++;if(u<1){for(f.lastIndex=0;(l=r[u])&&!f.test(l);)if(f.lastIndex=0,u++,p.test(l))if(u>2){u--;break}else{for(;(l=r[u])&&p.test(l);)u++;if(u>2)break}}}return f.lastIndex=0,u},i.prototype.moveCursorShortWordRight=function(){var r=this.lead.row,u=this.lead.column,l=this.doc.getLine(r),p=l.substring(u),f=this.session.getFoldAt(r,u,1);if(f)return this.moveCursorTo(f.end.row,f.end.column);if(u==l.length){var o=this.doc.getLength();do r++,p=this.doc.getLine(r);while(r<o&&/^\s*$/.test(p));/^\s+/.test(p)||(p=""),u=0}var h=this.$shortWordEndIndex(p);this.moveCursorTo(r,u+h)},i.prototype.moveCursorShortWordLeft=function(){var r=this.lead.row,u=this.lead.column,l;if(l=this.session.getFoldAt(r,u,-1))return this.moveCursorTo(l.start.row,l.start.column);var p=this.session.getLine(r).substring(0,u);if(u===0){do r--,p=this.doc.getLine(r);while(r>0&&/^\s*$/.test(p));u=p.length,/\s+$/.test(p)||(p="")}var f=v.stringReverse(p),o=this.$shortWordEndIndex(f);return this.moveCursorTo(r,u-o)},i.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},i.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},i.prototype.moveCursorBy=function(r,u){var l=this.session.documentToScreenPosition(this.lead.row,this.lead.column),p;if(u===0&&(r!==0&&(this.session.$bidiHandler.isBidiRow(l.row,this.lead.row)?(p=this.session.$bidiHandler.getPosLeft(l.column),l.column=Math.round(p/this.session.$bidiHandler.charWidths[0])):p=l.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?l.column=this.$desiredColumn:this.$desiredColumn=l.column),r!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var f=this.session.lineWidgets[this.lead.row];r<0?r-=f.rowsAbove||0:r>0&&(r+=f.rowCount-(f.rowsAbove||0))}var o=this.session.screenToDocumentPosition(l.row+r,l.column,p);r!==0&&u===0&&o.row===this.lead.row&&(o.column,this.lead.column),this.moveCursorTo(o.row,o.column+u,u===0)},i.prototype.moveCursorToPosition=function(r){this.moveCursorTo(r.row,r.column)},i.prototype.moveCursorTo=function(r,u,l){var p=this.session.getFoldAt(r,u,1);p&&(r=p.start.row,u=p.start.column),this.$keepDesiredColumnOnChange=!0;var f=this.session.getLine(r);/[\uDC00-\uDFFF]/.test(f.charAt(u))&&f.charAt(u-1)&&(this.lead.row==r&&this.lead.column==u+1?u=u-1:u=u+1),this.lead.setPosition(r,u),this.$keepDesiredColumnOnChange=!1,l||(this.$desiredColumn=null)},i.prototype.moveCursorToScreen=function(r,u,l){var p=this.session.screenToDocumentPosition(r,u);this.moveCursorTo(p.row,p.column,l)},i.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},i.prototype.fromOrientedRange=function(r){this.setSelectionRange(r,r.cursor==r.start),this.$desiredColumn=r.desiredColumn||this.$desiredColumn},i.prototype.toOrientedRange=function(r){var u=this.getRange();return r?(r.start.column=u.start.column,r.start.row=u.start.row,r.end.column=u.end.column,r.end.row=u.end.row):r=u,r.cursor=this.isBackwards()?r.start:r.end,r.desiredColumn=this.$desiredColumn,r},i.prototype.getRangeOfMovements=function(r){var u=this.getCursor();try{r(this);var l=this.getCursor();return a.fromPoints(u,l)}catch{return a.fromPoints(u,u)}finally{this.moveCursorToPosition(u)}},i.prototype.toJSON=function(){if(this.rangeCount)var r=this.ranges.map(function(u){var l=u.clone();return l.isBackwards=u.cursor==u.start,l});else{var r=this.getRange();r.isBackwards=this.isBackwards()}return r},i.prototype.fromJSON=function(r){if(r.start==null)if(this.rangeList&&r.length>1){this.toSingleRange(r[0]);for(var u=r.length;u--;){var l=a.fromPoints(r[u].start,r[u].end);r[u].isBackwards&&(l.cursor=l.start),this.addRange(l,!0)}return}else r=r[0];this.rangeList&&this.toSingleRange(r),this.setSelectionRange(r,r.isBackwards)},i.prototype.isEqual=function(r){if((r.length||this.rangeCount)&&r.length!=this.rangeCount)return!1;if(!r.length||!this.ranges)return this.getRange().isEqual(r);for(var u=this.ranges.length;u--;)if(!this.ranges[u].isEqual(r[u]))return!1;return!0},i}();d.prototype.setSelectionAnchor=d.prototype.setAnchor,d.prototype.getSelectionAnchor=d.prototype.getAnchor,d.prototype.setSelectionRange=d.prototype.setRange,c.implement(d.prototype,s),t.Selection=d});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,n){"use strict";var c=e("./lib/report_error").reportError,v=2e3,s=function(){function a(d){this.splitRegex,this.states=d,this.regExps={},this.matchMappings={};for(var i in this.states){for(var r=this.states[i],u=[],l=0,p=this.matchMappings[i]={defaultToken:"text"},f="g",o=[],h=0;h<r.length;h++){var _=r[h];if(_.defaultToken&&(p.defaultToken=_.defaultToken),_.caseInsensitive&&f.indexOf("i")===-1&&(f+="i"),_.unicode&&f.indexOf("u")===-1&&(f+="u"),_.regex!=null){_.regex instanceof RegExp&&(_.regex=_.regex.toString().slice(1,-1));var m=_.regex,y=new RegExp("(?:("+m+")|(.))").exec("a").length-2;Array.isArray(_.token)?_.token.length==1||y==1?_.token=_.token[0]:y-1!=_.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:_,groupCount:y-1}),_.token=_.token[0]):(_.tokenArray=_.token,_.token=null,_.onMatch=this.$arrayTokens):typeof _.token=="function"&&!_.onMatch&&(y>1?_.onMatch=this.$applyToken:_.onMatch=_.token),y>1&&(/\\\d/.test(_.regex)?m=_.regex.replace(/\\([0-9]+)/g,function(C,E){return"\\"+(parseInt(E,10)+l+1)}):(y=1,m=this.removeCapturingGroups(_.regex)),!_.splitRegex&&typeof _.token!="string"&&o.push(_)),p[l]=h,l+=y,u.push(m),_.onMatch||(_.onMatch=null)}}u.length||(p[0]=0,u.push("$")),o.forEach(function(C){C.splitRegex=this.createSplitterRegexp(C.regex,f)},this),this.regExps[i]=new RegExp("("+u.join(")|(")+")|($)",f)}}return a.prototype.$setMaxTokenCount=function(d){v=d|0},a.prototype.$applyToken=function(d){var i=this.splitRegex.exec(d).slice(1),r=this.token.apply(this,i);if(typeof r=="string")return[{type:r,value:d}];for(var u=[],l=0,p=r.length;l<p;l++)i[l]&&(u[u.length]={type:r[l],value:i[l]});return u},a.prototype.$arrayTokens=function(d){if(!d)return[];var i=this.splitRegex.exec(d);if(!i)return"text";for(var r=[],u=this.tokenArray,l=0,p=u.length;l<p;l++)i[l+1]&&(r[r.length]={type:u[l],value:i[l+1]});return r},a.prototype.removeCapturingGroups=function(d){var i=d.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(r,u){return u?"(?:":r});return i},a.prototype.createSplitterRegexp=function(d,i){if(d.indexOf("(?=")!=-1){var r=0,u=!1,l={};d.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(p,f,o,h,_,m){return u?u=_!="]":_?u=!0:h?(r==l.stack&&(l.end=m+1,l.stack=-1),r--):o&&(r++,o.length!=1&&(l.stack=r,l.start=m)),p}),l.end!=null&&/^\)*$/.test(d.substr(l.end))&&(d=d.substring(0,l.start)+d.substr(l.end))}return d.charAt(0)!="^"&&(d="^"+d),d.charAt(d.length-1)!="$"&&(d+="$"),new RegExp(d,(i||"").replace("g",""))},a.prototype.getLineTokens=function(d,i){if(i&&typeof i!="string"){var r=i.slice(0);i=r[0],i==="#tmp"&&(r.shift(),i=r.shift())}else var r=[];var u=i||"start",l=this.states[u];l||(u="start",l=this.states[u]);var p=this.matchMappings[u],f=this.regExps[u];f.lastIndex=0;for(var o,h=[],_=0,m=0,y={type:null,value:""};o=f.exec(d);){var C=p.defaultToken,E=null,D=o[0],g=f.lastIndex;if(g-D.length>_){var b=d.substring(_,g-D.length);y.type==C?y.value+=b:(y.type&&h.push(y),y={type:C,value:b})}for(var L=0;L<o.length-2;L++)if(o[L+1]!==void 0){E=l[p[L]],E.onMatch?C=E.onMatch(D,u,r,d):C=E.token,E.next&&(typeof E.next=="string"?u=E.next:u=E.next(u,r),l=this.states[u],l||(this.reportError("state doesn't exist",u),u="start",l=this.states[u]),p=this.matchMappings[u],_=g,f=this.regExps[u],f.lastIndex=g),E.consumeLineEnd&&(_=g);break}if(D){if(typeof C=="string")(!E||E.merge!==!1)&&y.type===C?y.value+=D:(y.type&&h.push(y),y={type:C,value:D});else if(C){y.type&&h.push(y),y={type:null,value:""};for(var L=0;L<C.length;L++)h.push(C[L])}}if(_==d.length)break;if(_=g,m++>v){for(m>2*d.length&&this.reportError("infinite loop with in ace tokenizer",{startState:i,line:d});_<d.length;)y.type&&h.push(y),y={value:d.substring(_,_+=500),type:"overflow"};u="start",r=[];break}}return y.type&&h.push(y),r.length>1&&r[0]!==u&&r.unshift("#tmp",u),{tokens:h,state:r.length?r:u}},a}();s.prototype.reportError=c,t.Tokenizer=s});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";var c=e("../lib/deep_copy").deepCopy,v;v=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(d,i){if(!i){for(var r in d)this.$rules[r]=d[r];return}for(var r in d){for(var u=d[r],l=0;l<u.length;l++){var p=u[l];(p.next||p.onMatch)&&(typeof p.next=="string"&&p.next.indexOf(i)!==0&&(p.next=i+p.next),p.nextState&&p.nextState.indexOf(i)!==0&&(p.nextState=i+p.nextState))}this.$rules[i+r]=u}},this.getRules=function(){return this.$rules},this.embedRules=function(d,i,r,u,l){var p=typeof d=="function"?new d().getRules():d;if(u)for(var f=0;f<u.length;f++)u[f]=i+u[f];else{u=[];for(var o in p)u.push(i+o)}if(this.addRules(p,i),r)for(var h=Array.prototype[l?"push":"unshift"],f=0;f<u.length;f++)h.apply(this.$rules[u[f]],c(r));this.$embeds||(this.$embeds=[]),this.$embeds.push(i)},this.getEmbeds=function(){return this.$embeds};var s=function(d,i){return(d!="start"||i.length)&&i.unshift(this.nextState,d),this.nextState},a=function(d,i){return i.shift(),i.shift()||"start"};this.normalizeRules=function(){var d=0,i=this.$rules;function r(u){var l=i[u];l.processed=!0;for(var p=0;p<l.length;p++){var f=l[p],o=null;Array.isArray(f)&&(o=f,f={}),!f.regex&&f.start&&(f.regex=f.start,f.next||(f.next=[]),f.next.push({defaultToken:f.token},{token:f.token+".end",regex:f.end||f.start,next:"pop"}),f.token=f.token+".start",f.push=!0);var h=f.next||f.push;if(h&&Array.isArray(h)){var _=f.stateName;_||(_=f.token,typeof _!="string"&&(_=_[0]||""),i[_]&&(_+=d++)),i[_]=h,f.next=_,r(_)}else h=="pop"&&(f.next=a);if(f.push&&(f.nextState=f.next||f.push,f.next=s,delete f.push),f.rules)for(var m in f.rules)i[m]?i[m].push&&i[m].push.apply(i[m],f.rules[m]):i[m]=f.rules[m];var y=typeof f=="string"?f:f.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?o=y.map(function(E){return i[E]}):o=i[y]),o){var C=[p,1].concat(o);f.noEscape&&(C=C.filter(function(E){return!E.next})),l.splice.apply(l,C),p--}f.keywordMap&&(f.token=this.createKeywordMapper(f.keywordMap,f.defaultToken||"text",f.caseInsensitive),delete f.defaultToken)}}Object.keys(i).forEach(r,this)},this.createKeywordMapper=function(d,i,r,u){var l=Object.create(null);return this.$keywordList=[],Object.keys(d).forEach(function(p){for(var f=d[p],o=f.split(u||"|"),h=o.length;h--;){var _=o[h];this.$keywordList.push(_),r&&(_=_.toLowerCase()),l[_]=p}},this),d=null,r?function(p){return l[p.toLowerCase()]||i}:function(p){return l[p]||i}},this.getKeywords=function(){return this.$keywords}}.call(v.prototype),t.TextHighlightRules=v});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var c;c=function(){this.$behaviours={}},function(){this.add=function(v,s,a){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[v]:this.$behaviours[v]={}}this.$behaviours[v][s]=a},this.addBehaviours=function(v){for(var s in v)for(var a in v[s])this.add(s,a,v[s][a])},this.remove=function(v){this.$behaviours&&this.$behaviours[v]&&delete this.$behaviours[v]},this.inherit=function(v,s){if(typeof v=="function")var a=new v().getBehaviours(s);else var a=v.getBehaviours(s);this.addBehaviours(a)},this.getBehaviours=function(v){if(v){for(var s={},a=0;a<v.length;a++)this.$behaviours[v[a]]&&(s[v[a]]=this.$behaviours[v[a]]);return s}else return this.$behaviours}}.call(c.prototype),t.Behaviour=c});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("./range").Range,v=function(){function s(a,d,i){this.$session=a,this.$row=d,this.$rowTokens=a.getTokens(d);var r=a.getTokenAt(d,i);this.$tokenIndex=r?r.index:-1}return s.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},s.prototype.stepForward=function(){this.$tokenIndex+=1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},s.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},s.prototype.getCurrentTokenRow=function(){return this.$row},s.prototype.getCurrentTokenColumn=function(){var a=this.$rowTokens,d=this.$tokenIndex,i=a[d].start;if(i!==void 0)return i;for(i=0;d>0;)d-=1,i+=a[d].value.length;return i},s.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},s.prototype.getCurrentTokenRange=function(){var a=this.$rowTokens[this.$tokenIndex],d=this.getCurrentTokenColumn();return new c(this.$row,d,this.$row,d+a.value.length)},s}();t.TokenIterator=v});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var c=e("../../lib/oop"),v=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),d=["text","paren.rparen","rparen","paren","punctuation.operator"],i=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],r,u={},l={'"':'"',"'":"'"},p=function(h){var _=-1;if(h.multiSelect&&(_=h.selection.index,u.rangeCount!=h.multiSelect.rangeCount&&(u={rangeCount:h.multiSelect.rangeCount})),u[_])return r=u[_];r=u[_]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},f=function(h,_,m,y){var C=h.end.row-h.start.row;return{text:m+_+y,selection:[0,h.start.column+1,C,h.end.column+(C?0:1)]}},o;o=function(h){h=h||{},this.add("braces","insertion",function(_,m,y,C,E){var D=y.getCursorPosition(),g=C.doc.getLine(D.row);if(E=="{"){p(y);var b=y.getSelectionRange(),L=C.doc.getTextRange(b);if(L!==""&&L!=="{"&&y.getWrapBehavioursEnabled())return f(b,L,"{","}");if(o.isSaneInsertion(y,C))return/[\]\}\)]/.test(g[D.column])||y.inMultiSelectMode||h.braces?(o.recordAutoInsert(y,C,"}"),{text:"{}",selection:[1,1]}):(o.recordMaybeInsert(y,C,"{"),{text:"{",selection:[1,1]})}else if(E=="}"){p(y);var S=g.substring(D.column,D.column+1);if(S=="}"){var T=C.$findOpeningBracket("}",{column:D.column+1,row:D.row});if(T!==null&&o.isAutoInsertedClosing(D,g,E))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(E==`
`||E==`\r
`){p(y);var M="";o.isMaybeInsertedClosing(D,g)&&(M=a.stringRepeat("}",r.maybeInsertedBrackets),o.clearMaybeInsertedClosing());var S=g.substring(D.column,D.column+1);if(S==="}"){var w=C.findMatchingBracket({row:D.row,column:D.column+1},"}");if(!w)return null;var F=this.$getIndent(C.getLine(w.row))}else if(M)var F=this.$getIndent(g);else{o.clearMaybeInsertedClosing();return}var x=F+C.getTabString();return{text:`
`+x+`
`+F+M,selection:[1,x.length,1,x.length]}}else o.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(_,m,y,C,E){var D=C.doc.getTextRange(E);if(!E.isMultiLine()&&D=="{"){p(y);var g=C.doc.getLine(E.start.row),b=g.substring(E.end.column,E.end.column+1);if(b=="}")return E.end.column++,E;r.maybeInsertedBrackets--}}),this.add("parens","insertion",function(_,m,y,C,E){if(E=="("){p(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return f(D,g,"(",")");if(o.isSaneInsertion(y,C))return o.recordAutoInsert(y,C,")"),{text:"()",selection:[1,1]}}else if(E==")"){p(y);var b=y.getCursorPosition(),L=C.doc.getLine(b.row),S=L.substring(b.column,b.column+1);if(S==")"){var T=C.$findOpeningBracket(")",{column:b.column+1,row:b.row});if(T!==null&&o.isAutoInsertedClosing(b,L,E))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(_,m,y,C,E){var D=C.doc.getTextRange(E);if(!E.isMultiLine()&&D=="("){p(y);var g=C.doc.getLine(E.start.row),b=g.substring(E.start.column+1,E.start.column+2);if(b==")")return E.end.column++,E}}),this.add("brackets","insertion",function(_,m,y,C,E){if(E=="["){p(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return f(D,g,"[","]");if(o.isSaneInsertion(y,C))return o.recordAutoInsert(y,C,"]"),{text:"[]",selection:[1,1]}}else if(E=="]"){p(y);var b=y.getCursorPosition(),L=C.doc.getLine(b.row),S=L.substring(b.column,b.column+1);if(S=="]"){var T=C.$findOpeningBracket("]",{column:b.column+1,row:b.row});if(T!==null&&o.isAutoInsertedClosing(b,L,E))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(_,m,y,C,E){var D=C.doc.getTextRange(E);if(!E.isMultiLine()&&D=="["){p(y);var g=C.doc.getLine(E.start.row),b=g.substring(E.start.column+1,E.start.column+2);if(b=="]")return E.end.column++,E}}),this.add("string_dquotes","insertion",function(_,m,y,C,E){var D=C.$mode.$quotes||l;if(E.length==1&&D[E]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(E)!=-1)return;p(y);var g=E,b=y.getSelectionRange(),L=C.doc.getTextRange(b);if(L!==""&&(L.length!=1||!D[L])&&y.getWrapBehavioursEnabled())return f(b,L,g,g);if(!L){var S=y.getCursorPosition(),T=C.doc.getLine(S.row),M=T.substring(S.column-1,S.column),w=T.substring(S.column,S.column+1),F=C.getTokenAt(S.row,S.column),x=C.getTokenAt(S.row,S.column+1);if(M=="\\"&&F&&/escape/.test(F.type))return null;var R=F&&/string|escape/.test(F.type),A=!x||/string|escape/.test(x.type),I;if(w==g)I=R!==A,I&&/string\.end/.test(x.type)&&(I=!1);else{if(R&&!A||R&&A)return null;var $=C.$mode.tokenRe;$.lastIndex=0;var k=$.test(M);$.lastIndex=0;var H=$.test(w),U=C.$mode.$pairQuotesAfter,q=U&&U[g]&&U[g].test(M);if(!q&&k||H||w&&!/[\s;,.})\]\\]/.test(w))return null;var N=T[S.column-2];if(M==g&&(N==g||$.test(N)))return null;I=!0}return{text:I?g+g:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(_,m,y,C,E){var D=C.$mode.$quotes||l,g=C.doc.getTextRange(E);if(!E.isMultiLine()&&D.hasOwnProperty(g)){p(y);var b=C.doc.getLine(E.start.row),L=b.substring(E.start.column+1,E.start.column+2);if(L==g)return E.end.column++,E}}),h.closeDocComment!==!1&&this.add("doc comment end","insertion",function(_,m,y,C,E){if(_==="doc-start"&&(E===`
`||E===`\r
`)&&y.selection.isEmpty()){var D=y.getCursorPosition(),g=C.doc.getLine(D.row),b=C.doc.getLine(D.row+1),L=this.$getIndent(g);if(/\s*\*/.test(b))return/^\s*\*/.test(g)?{text:E+L+"* ",selection:[1,3+L.length,1,3+L.length]}:{text:E+L+" * ",selection:[1,3+L.length,1,3+L.length]};if(/\/\*\*/.test(g.substring(0,D.column)))return{text:E+L+" * "+E+" "+L+"*/",selection:[1,4+L.length,1,4+L.length]}}})},o.isSaneInsertion=function(h,_){var m=h.getCursorPosition(),y=new s(_,m.row,m.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",d)){if(/[)}\]]/.test(h.session.getLine(m.row)[m.column]))return!0;var C=new s(_,m.row,m.column+1);if(!this.$matchTokenType(C.getCurrentToken()||"text",d))return!1}return y.stepForward(),y.getCurrentTokenRow()!==m.row||this.$matchTokenType(y.getCurrentToken()||"text",i)},o.$matchTokenType=function(h,_){return _.indexOf(h.type||h)>-1},o.recordAutoInsert=function(h,_,m){var y=h.getCursorPosition(),C=_.doc.getLine(y.row);this.isAutoInsertedClosing(y,C,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=y.row,r.autoInsertedLineEnd=m+C.substr(y.column),r.autoInsertedBrackets++},o.recordMaybeInsert=function(h,_,m){var y=h.getCursorPosition(),C=_.doc.getLine(y.row);this.isMaybeInsertedClosing(y,C)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=y.row,r.maybeInsertedLineStart=C.substr(0,y.column)+m,r.maybeInsertedLineEnd=C.substr(y.column),r.maybeInsertedBrackets++},o.isAutoInsertedClosing=function(h,_,m){return r.autoInsertedBrackets>0&&h.row===r.autoInsertedRow&&m===r.autoInsertedLineEnd[0]&&_.substr(h.column)===r.autoInsertedLineEnd},o.isMaybeInsertedClosing=function(h,_){return r.maybeInsertedBrackets>0&&h.row===r.maybeInsertedRow&&_.substr(h.column)===r.maybeInsertedLineEnd&&_.substr(0,h.column)==r.maybeInsertedLineStart},o.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},o.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},c.inherits(o,v),t.CstyleBehaviour=o});ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var c=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],v=0,s=[],a=0;a<c.length;a+=2)s.push(v+=c[a]),c[a+1]&&s.push(45,v+=c[a+1]);t.wordChars=String.fromCharCode.apply(null,s)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var c=e("../config"),v=e("../tokenizer").Tokenizer,s=e("./text_highlight_rules").TextHighlightRules,a=e("./behaviour/cstyle").CstyleBehaviour,d=e("../unicode"),i=e("../lib/lang"),r=e("../token_iterator").TokenIterator,u=e("../range").Range,l;l=function(){this.HighlightRules=s},function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+d.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+d.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new v(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(p,f,o,h){var _=f.doc,m=!0,y=!0,C=1/0,E=f.getTabSize(),D=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var L=this.lineCommentStart.map(i.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var L=i.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;L=new RegExp("^(\\s*)(?:"+L+") ?"),D=f.getUseSoftTabs();var M=function(H,U){var q=H.match(L);if(q){var N=q[1].length,K=q[0].length;!x(H,N,K)&&q[0][K-1]==" "&&K--,_.removeInLine(U,N,K)}},F=g+" ",T=function(H,U){(!m||/\S/.test(H))&&(x(H,C,C)?_.insertInLine({row:U,column:C},F):_.insertInLine({row:U,column:C},g))},w=function(H,U){return L.test(H)},x=function(H,U,q){for(var N=0;U--&&H.charAt(U)==" ";)N++;if(N%E!=0)return!1;for(var N=0;H.charAt(q++)==" ";)N++;return E>2?N%E!=E-1:N%E==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,b=this.blockComment.end,L=new RegExp("^(\\s*)(?:"+i.escapeRegExp(g)+")"),S=new RegExp("(?:"+i.escapeRegExp(b)+")\\s*$"),T=function(I,$){w(I,$)||(!m||/\S/.test(I))&&(_.insertInLine({row:$,column:I.length},b),_.insertInLine({row:$,column:C},g))},M=function(I,$){var k;(k=I.match(S))&&_.removeInLine($,I.length-k[0].length,I.length),(k=I.match(L))&&_.removeInLine($,k[1].length,k[0].length)},w=function(I,$){if(L.test(I))return!0;for(var k=f.getTokens($),H=0;H<k.length;H++)if(k[H].type==="comment")return!0}}function R(I){for(var $=o;$<=h;$++)I(_.getLine($),$)}var A=1/0;R(function(I,$){var k=I.search(/\S/);k!==-1?(k<C&&(C=k),y&&!w(I,$)&&(y=!1)):A>I.length&&(A=I.length)}),C==1/0&&(C=A,m=!1,y=!1),D&&C%E!=0&&(C=Math.floor(C/E)*E),R(y?M:T)},this.toggleBlockComment=function(p,f,o,h){var _=this.blockComment;if(_){!_.start&&_[0]&&(_=_[0]);var m=new r(f,h.row,h.column),y=m.getCurrentToken(),C=f.selection,E=f.selection.toOrientedRange(),D,g;if(y&&/comment/.test(y.type)){for(var b,L;y&&/comment/.test(y.type);){var S=y.value.indexOf(_.start);if(S!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+S;b=new u(T,M,T,M+_.start.length);break}y=m.stepBackward()}for(var m=new r(f,h.row,h.column),y=m.getCurrentToken();y&&/comment/.test(y.type);){var S=y.value.indexOf(_.end);if(S!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+S;L=new u(T,M,T,M+_.end.length);break}y=m.stepForward()}L&&f.remove(L),b&&(f.remove(b),D=b.start.row,g=-_.start.length)}else g=_.start.length,D=o.start.row,f.insert(o.end,_.end),f.insert(o.start,_.start);E.start.row==D&&(E.start.column+=g),E.end.row==D&&(E.end.column+=g),f.selection.fromOrientedRange(E)}},this.getNextLineIndent=function(p,f,o){return this.$getIndent(f)},this.checkOutdent=function(p,f,o){return!1},this.autoOutdent=function(p,f,o){},this.$getIndent=function(p){return p.match(/^\s*/)[0]},this.createWorker=function(p){return null},this.createModeDelegates=function(p){this.$embeds=[],this.$modes={};for(var f in p)if(p[f]){var o=p[f],h=o.prototype.$id,_=c.$modes[h];_||(c.$modes[h]=_=new o),c.$modes[f]||(c.$modes[f]=_),this.$embeds.push(f),this.$modes[f]=_}for(var m=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(E){(function(D){var g=m[E],b=D[g];D[m[E]]=function(){return this.$delegator(g,arguments,b)}})(C)},C=this,f=0;f<m.length;f++)y(f)},this.$delegator=function(p,f,o){var h=f[0]||"start";if(typeof h!="string"){if(Array.isArray(h[2])){var _=h[2][h[2].length-1],m=this.$modes[_];if(m)return m[p].apply(m,[h[1]].concat([].slice.call(f,1)))}h=h[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var C=h.split(this.$embeds[y]);if(!C[0]&&C[1]){f[0]=C[1];var m=this.$modes[this.$embeds[y]];return m[p].apply(m,f)}}var E=o.apply(this,f);return o?E:void 0},this.transformAction=function(p,f,o,h,_){if(this.$behaviour){var m=this.$behaviour.getBehaviours();for(var y in m)if(m[y][f]){var C=m[y][f].apply(this,arguments);if(C)return C}}},this.getKeywords=function(p){if(!this.completionKeywords){var f=this.$tokenizer.rules,o=[];for(var h in f)for(var _=f[h],m=0,y=_.length;m<y;m++)if(typeof _[m].token=="string")/keyword|support|storage/.test(_[m].token)&&o.push(_[m].regex);else if(typeof _[m].token=="object"){for(var C=0,E=_[m].token.length;C<E;C++)if(/keyword|support|storage/.test(_[m].token[C])){var h=_[m].regex.match(/\(.+?\)/g)[C];o.push(h.substr(1,h.length-2))}}this.completionKeywords=o}return p?o.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(p,f,o,h){var _=this.$keywordList||this.$createKeywordList();return _.map(function(m){return{name:m,value:m,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(l.prototype),t.Mode=l});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function c(a,d){throw console.log("Invalid Delta:",a),"Invalid Delta: "+d}function v(a,d){return d.row>=0&&d.row<a.length&&d.column>=0&&d.column<=a[d.row].length}function s(a,d){d.action!="insert"&&d.action!="remove"&&c(d,"delta.action must be 'insert' or 'remove'"),d.lines instanceof Array||c(d,"delta.lines must be an Array"),(!d.start||!d.end)&&c(d,"delta.start/end must be an present");var i=d.start;v(a,d.start)||c(d,"delta.start must be contained in document");var r=d.end;d.action=="remove"&&!v(a,r)&&c(d,"delta.end must contained in document for 'remove' actions");var u=r.row-i.row,l=r.column-(u==0?i.column:0);(u!=d.lines.length-1||d.lines[u].length!=l)&&c(d,"delta.range must match delta lines")}t.applyDelta=function(a,d,i){var r=d.start.row,u=d.start.column,l=a[r]||"";switch(d.action){case"insert":var p=d.lines;if(p.length===1)a[r]=l.substring(0,u)+d.lines[0]+l.substring(u);else{var f=[r,1].concat(d.lines);a.splice.apply(a,f),a[r]=l.substring(0,u)+a[r],a[r+d.lines.length-1]+=l.substring(u)}break;case"remove":var o=d.end.column,h=d.end.row;r===h?a[r]=l.substring(0,u)+l.substring(o):a.splice(r,h-r+1,l.substring(0,u)+a[h].substring(o));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/event_emitter").EventEmitter,s=function(){function i(r,u,l){this.$onChange=this.onChange.bind(this),this.attach(r),typeof u!="number"?this.setPosition(u.row,u.column):this.setPosition(u,l)}return i.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},i.prototype.getDocument=function(){return this.document},i.prototype.onChange=function(r){if(!(r.start.row==r.end.row&&r.start.row!=this.row)&&!(r.start.row>this.row)){var u=d(r,{row:this.row,column:this.column},this.$insertRight);this.setPosition(u.row,u.column,!0)}},i.prototype.setPosition=function(r,u,l){var p;if(l?p={row:r,column:u}:p=this.$clipPositionToDocument(r,u),!(this.row==p.row&&this.column==p.column)){var f={row:this.row,column:this.column};this.row=p.row,this.column=p.column,this._signal("change",{old:f,value:p})}},i.prototype.detach=function(){this.document.off("change",this.$onChange)},i.prototype.attach=function(r){this.document=r||this.document,this.document.on("change",this.$onChange)},i.prototype.$clipPositionToDocument=function(r,u){var l={};return r>=this.document.getLength()?(l.row=Math.max(0,this.document.getLength()-1),l.column=this.document.getLine(l.row).length):r<0?(l.row=0,l.column=0):(l.row=r,l.column=Math.min(this.document.getLine(l.row).length,Math.max(0,u))),u<0&&(l.column=0),l},i}();s.prototype.$insertRight=!1,c.implement(s.prototype,v);function a(i,r,u){var l=u?i.column<=r.column:i.column<r.column;return i.row<r.row||i.row==r.row&&l}function d(i,r,u){var l=i.action=="insert",p=(l?1:-1)*(i.end.row-i.start.row),f=(l?1:-1)*(i.end.column-i.start.column),o=i.start,h=l?o:i.end;return a(r,o,u)?{row:r.row,column:r.column}:a(h,r,!u)?{row:r.row+p,column:r.column+(r.row==h.row?f:0)}:{row:o.row,column:o.column}}t.Anchor=s});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./apply_delta").applyDelta,s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,d=e("./anchor").Anchor,i=function(){function r(u){this.$lines=[""],u.length===0?this.$lines=[""]:Array.isArray(u)?this.insertMergedLines({row:0,column:0},u):this.insert({row:0,column:0},u)}return r.prototype.setValue=function(u){var l=this.getLength()-1;this.remove(new a(0,0,l,this.getLine(l).length)),this.insert({row:0,column:0},u||"")},r.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},r.prototype.createAnchor=function(u,l){return new d(this,u,l)},r.prototype.$detectNewLine=function(u){var l=u.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=l?l[1]:`
`,this._signal("changeNewLineMode")},r.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},r.prototype.setNewLineMode=function(u){this.$newLineMode!==u&&(this.$newLineMode=u,this._signal("changeNewLineMode"))},r.prototype.getNewLineMode=function(){return this.$newLineMode},r.prototype.isNewLine=function(u){return u==`\r
`||u=="\r"||u==`
`},r.prototype.getLine=function(u){return this.$lines[u]||""},r.prototype.getLines=function(u,l){return this.$lines.slice(u,l+1)},r.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},r.prototype.getLength=function(){return this.$lines.length},r.prototype.getTextRange=function(u){return this.getLinesForRange(u).join(this.getNewLineCharacter())},r.prototype.getLinesForRange=function(u){var l;if(u.start.row===u.end.row)l=[this.getLine(u.start.row).substring(u.start.column,u.end.column)];else{l=this.getLines(u.start.row,u.end.row),l[0]=(l[0]||"").substring(u.start.column);var p=l.length-1;u.end.row-u.start.row==p&&(l[p]=l[p].substring(0,u.end.column))}return l},r.prototype.insertLines=function(u,l){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(u,l)},r.prototype.removeLines=function(u,l){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(u,l)},r.prototype.insertNewLine=function(u){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(u,["",""])},r.prototype.insert=function(u,l){return this.getLength()<=1&&this.$detectNewLine(l),this.insertMergedLines(u,this.$split(l))},r.prototype.insertInLine=function(u,l){var p=this.clippedPos(u.row,u.column),f=this.pos(u.row,u.column+l.length);return this.applyDelta({start:p,end:f,action:"insert",lines:[l]},!0),this.clonePos(f)},r.prototype.clippedPos=function(u,l){var p=this.getLength();u===void 0?u=p:u<0?u=0:u>=p&&(u=p-1,l=void 0);var f=this.getLine(u);return l==null&&(l=f.length),l=Math.min(Math.max(l,0),f.length),{row:u,column:l}},r.prototype.clonePos=function(u){return{row:u.row,column:u.column}},r.prototype.pos=function(u,l){return{row:u,column:l}},r.prototype.$clipPosition=function(u){var l=this.getLength();return u.row>=l?(u.row=Math.max(0,l-1),u.column=this.getLine(l-1).length):(u.row=Math.max(0,u.row),u.column=Math.min(Math.max(u.column,0),this.getLine(u.row).length)),u},r.prototype.insertFullLines=function(u,l){u=Math.min(Math.max(u,0),this.getLength());var p=0;u<this.getLength()?(l=l.concat([""]),p=0):(l=[""].concat(l),u--,p=this.$lines[u].length),this.insertMergedLines({row:u,column:p},l)},r.prototype.insertMergedLines=function(u,l){var p=this.clippedPos(u.row,u.column),f={row:p.row+l.length-1,column:(l.length==1?p.column:0)+l[l.length-1].length};return this.applyDelta({start:p,end:f,action:"insert",lines:l}),this.clonePos(f)},r.prototype.remove=function(u){var l=this.clippedPos(u.start.row,u.start.column),p=this.clippedPos(u.end.row,u.end.column);return this.applyDelta({start:l,end:p,action:"remove",lines:this.getLinesForRange({start:l,end:p})}),this.clonePos(l)},r.prototype.removeInLine=function(u,l,p){var f=this.clippedPos(u,l),o=this.clippedPos(u,p);return this.applyDelta({start:f,end:o,action:"remove",lines:this.getLinesForRange({start:f,end:o})},!0),this.clonePos(f)},r.prototype.removeFullLines=function(u,l){u=Math.min(Math.max(0,u),this.getLength()-1),l=Math.min(Math.max(0,l),this.getLength()-1);var p=l==this.getLength()-1&&u>0,f=l<this.getLength()-1,o=p?u-1:u,h=p?this.getLine(o).length:0,_=f?l+1:l,m=f?0:this.getLine(_).length,y=new a(o,h,_,m),C=this.$lines.slice(u,l+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),C},r.prototype.removeNewLine=function(u){u<this.getLength()-1&&u>=0&&this.applyDelta({start:this.pos(u,this.getLine(u).length),end:this.pos(u+1,0),action:"remove",lines:["",""]})},r.prototype.replace=function(u,l){if(u instanceof a||(u=a.fromPoints(u.start,u.end)),l.length===0&&u.isEmpty())return u.start;if(l==this.getTextRange(u))return u.end;this.remove(u);var p;return l?p=this.insert(u.start,l):p=u.start,p},r.prototype.applyDeltas=function(u){for(var l=0;l<u.length;l++)this.applyDelta(u[l])},r.prototype.revertDeltas=function(u){for(var l=u.length-1;l>=0;l--)this.revertDelta(u[l])},r.prototype.applyDelta=function(u,l){var p=u.action=="insert";(p?u.lines.length<=1&&!u.lines[0]:!a.comparePoints(u.start,u.end))||(p&&u.lines.length>2e4?this.$splitAndapplyLargeDelta(u,2e4):(v(this.$lines,u,l),this._signal("change",u)))},r.prototype.$safeApplyDelta=function(u){var l=this.$lines.length;(u.action=="remove"&&u.start.row<l&&u.end.row<l||u.action=="insert"&&u.start.row<=l)&&this.applyDelta(u)},r.prototype.$splitAndapplyLargeDelta=function(u,l){for(var p=u.lines,f=p.length-l+1,o=u.start.row,h=u.start.column,_=0,m=0;_<f;_=m){m+=l-1;var y=p.slice(_,m);y.push(""),this.applyDelta({start:this.pos(o+_,h),end:this.pos(o+m,h=0),action:u.action,lines:y},!0)}u.lines=p.slice(_),u.start.row=o+_,u.start.column=h,this.applyDelta(u,!0)},r.prototype.revertDelta=function(u){this.$safeApplyDelta({start:this.clonePos(u.start),end:this.clonePos(u.end),action:u.action=="insert"?"remove":"insert",lines:u.lines.slice()})},r.prototype.indexToPosition=function(u,l){for(var p=this.$lines||this.getAllLines(),f=this.getNewLineCharacter().length,o=l||0,h=p.length;o<h;o++)if(u-=p[o].length+f,u<0)return{row:o,column:u+p[o].length+f};return{row:h-1,column:u+p[h-1].length+f}},r.prototype.positionToIndex=function(u,l){for(var p=this.$lines||this.getAllLines(),f=this.getNewLineCharacter().length,o=0,h=Math.min(u.row,p.length),_=l||0;_<h;++_)o+=p[_].length+f;return o+u.column},r.prototype.$split=function(u){return u.split(/\r\n|\r|\n/)},r}();i.prototype.$autoNewLine="",i.prototype.$newLineMode="auto",c.implement(i.prototype,s),t.Document=i});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/event_emitter").EventEmitter,s=function(){function a(d,i){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=d;var r=this;this.$worker=function(){if(r.running){for(var u=new Date,l=r.currentLine,p=-1,f=r.doc,o=l;r.lines[l];)l++;var h=f.getLength(),_=0;for(r.running=!1;l<h;){r.$tokenizeRow(l),p=l;do l++;while(r.lines[l]);if(_++,_%5===0&&new Date-u>20){r.running=setTimeout(r.$worker,20);break}}r.currentLine=l,p==-1&&(p=l),o<=p&&r.fireUpdateEvent(o,p)}}}return a.prototype.setTokenizer=function(d){this.tokenizer=d,this.lines=[],this.states=[],this.start(0)},a.prototype.setDocument=function(d){this.doc=d,this.lines=[],this.states=[],this.stop()},a.prototype.fireUpdateEvent=function(d,i){var r={first:d,last:i};this._signal("update",{data:r})},a.prototype.start=function(d){this.currentLine=Math.min(d||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},a.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},a.prototype.$updateOnChange=function(d){var i=d.start.row,r=d.end.row-i;if(r===0)this.lines[i]=null;else if(d.action=="remove")this.lines.splice(i,r+1,null),this.states.splice(i,r+1,null);else{var u=Array(r+1);u.unshift(i,1),this.lines.splice.apply(this.lines,u),this.states.splice.apply(this.states,u)}this.currentLine=Math.min(i,this.currentLine,this.doc.getLength()),this.stop()},a.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},a.prototype.getTokens=function(d){return this.lines[d]||this.$tokenizeRow(d)},a.prototype.getState=function(d){return this.currentLine==d&&this.$tokenizeRow(d),this.states[d]||"start"},a.prototype.$tokenizeRow=function(d){var i=this.doc.getLine(d),r=this.states[d-1],u=this.tokenizer.getLineTokens(i,r,d);return this.states[d]+""!=u.state+""?(this.states[d]=u.state,this.lines[d+1]=null,this.currentLine>d+1&&(this.currentLine=d+1)):this.currentLine==d&&(this.currentLine=d+1),this.lines[d]=u.tokens},a.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},a}();c.implement(s.prototype,v),t.BackgroundTokenizer=s});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,n){"use strict";var c=e("./lib/lang"),v=e("./range").Range,s=function(){function a(d,i,r){r===void 0&&(r="text"),this.setRegexp(d),this.clazz=i,this.type=r}return a.prototype.setRegexp=function(d){this.regExp+""!=d+""&&(this.regExp=d,this.cache=[])},a.prototype.update=function(d,i,r,u){if(this.regExp)for(var l=u.firstRow,p=u.lastRow,f={},o=l;o<=p;o++){var h=this.cache[o];h==null&&(h=c.getMatchOffsets(r.getLine(o),this.regExp),h.length>this.MAX_RANGES&&(h=h.slice(0,this.MAX_RANGES)),h=h.map(function(C){return new v(o,C.offset,o,C.offset+C.length)}),this.cache[o]=h.length?h:"");for(var _=h.length;_--;){var m=h[_].toScreenRange(r),y=m.toString();f[y]||(f[y]=!0,i.drawSingleLineMarker(d,m,this.clazz,u))}}},a}();s.prototype.MAX_RANGES=500,t.SearchHighlight=s});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=function(){function D(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return D.prototype.addSession=function(g){this.$session=g},D.prototype.add=function(g,b,L){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),b===!1||!this.lastDeltas){this.lastDeltas=[];var S=this.$undoStack.length;S>this.$undoDepth-1&&this.$undoStack.splice(0,S-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},D.prototype.addSelection=function(g,b){this.selections.push({value:g,rev:b||this.$rev})},D.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},D.prototype.markIgnored=function(g,b){b==null&&(b=this.$rev+1);for(var L=this.$undoStack,S=L.length;S--;){var T=L[S][0];if(T.id<=g)break;T.id<b&&(T.ignore=!0)}this.lastDeltas=null},D.prototype.getSelection=function(g,b){for(var L=this.selections,S=L.length;S--;){var T=L[S];if(T.rev<g)return b&&(T=L[S+1]),T}},D.prototype.getRevision=function(){return this.$rev},D.prototype.getDeltas=function(g,b){b==null&&(b=this.$rev+1);for(var L=this.$undoStack,S=null,T=0,M=L.length;M--;){var w=L[M][0];if(w.id<b&&!S&&(S=M+1),w.id<=g){T=M+1;break}}return L.slice(T,S)},D.prototype.getChangedRanges=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.getChangedLines=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.undo=function(g,b){this.lastDeltas=null;var L=this.$undoStack;if(v(L,L.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var S=L.pop(),T=null;return S&&(T=g.undoChanges(S,b),this.$redoStack.push(S),this.$syncRev()),this.$fromUndo=!1,T}},D.prototype.redo=function(g,b){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var L=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);E(this.$redoStack,L),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(M){M[0].id=++this.$maxRev},this)}var S=this.$redoStack.pop(),T=null;return S&&(T=g.redoChanges(S,b),this.$undoStack.push(S),this.$syncRev()),this.$fromUndo=!1,T},D.prototype.$syncRev=function(){var g=this.$undoStack,b=g[g.length-1],L=b&&b[0].id||0;this.$redoStackBaseRev=L,this.$rev=L},D.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},D.prototype.canUndo=function(){return this.$undoStack.length>0},D.prototype.canRedo=function(){return this.$redoStack.length>0},D.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},D.prototype.isAtBookmark=function(){return this.$rev===this.mark},D.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},D.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},D.prototype.$prettyPrint=function(g){return g?l(g):l(this.$undoStack)+`
---
`+l(this.$redoStack)},D}();c.prototype.hasUndo=c.prototype.canUndo,c.prototype.hasRedo=c.prototype.canRedo,c.prototype.isClean=c.prototype.isAtBookmark,c.prototype.markClean=c.prototype.bookmark;function v(D,g){for(var b=g;b--;){var L=D[b];if(L&&!L[0].ignore){for(;b<g-1;){var S=o(D[b],D[b+1]);D[b]=S[0],D[b+1]=S[1],b++}return!0}}}var s=e("./range").Range,a=s.comparePoints,d=s.comparePoints;function i(D){var g=D.action=="insert",b=D.start,L=D.end,S=(L.row-b.row)*(g?1:-1),T=(L.column-b.column)*(g?1:-1);g&&(L=b);for(var M in this.marks){var w=this.marks[M],F=d(w,b);if(!(F<0)){if(F===0&&g)if(w.bias==1)F=1;else{w.bias==-1;continue}var x=g?F:d(w,L);if(x>0){w.row+=S,w.column+=w.row==L.row?T:0;continue}!g&&x<=0&&(w.row=b.row,w.column=b.column,x===0&&(w.bias=1))}}}function r(D){return{row:D.row,column:D.column}}function u(D){return{start:r(D.start),end:r(D.end),action:D.action,lines:D.lines.slice()}}function l(D){if(D=D||this,Array.isArray(D))return D.map(l).join(`
`);var g="";return D.action?(g=D.action=="insert"?"+":"-",g+="["+D.lines+"]"):D.value&&(Array.isArray(D.value)?g=D.value.map(p).join(`
`):g=p(D.value)),D.start&&(g+=p(D)),(D.id||D.rev)&&(g+="	("+(D.id||D.rev)+")"),g}function p(D){return D.start.row+":"+D.start.column+"=>"+D.end.row+":"+D.end.column}function f(D,g){var b=D.action=="insert",L=g.action=="insert";if(b&&L)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.start,D.start)<=0)_(D,g,1);else return null;else if(b&&!L)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.end,D.start)<=0)_(D,g,-1);else return null;else if(!b&&L)if(a(g.start,D.start)>=0)_(g,D,1);else if(a(g.start,D.start)<=0)_(D,g,1);else return null;else if(!b&&!L)if(a(g.start,D.start)>=0)_(g,D,1);else if(a(g.end,D.start)<=0)_(D,g,-1);else return null;return[g,D]}function o(D,g){for(var b=D.length;b--;)for(var L=0;L<g.length;L++)if(!f(D[b],g[L])){for(;b<D.length;){for(;L--;)f(g[L],D[b]);L=g.length,b++}return[D,g]}return D.selectionBefore=g.selectionBefore=D.selectionAfter=g.selectionAfter=null,[g,D]}function h(D,g){var b=D.action=="insert",L=g.action=="insert";if(b&&L)a(D.start,g.start)<0?_(g,D,1):_(D,g,1);else if(b&&!L)a(D.start,g.end)>=0?_(D,g,-1):(a(D.start,g.start)<=0||_(D,s.fromPoints(g.start,D.start),-1),_(g,D,1));else if(!b&&L)a(g.start,D.end)>=0?_(g,D,-1):(a(g.start,D.start)<=0||_(g,s.fromPoints(D.start,g.start),-1),_(D,g,1));else if(!b&&!L)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.end,D.start)<=0)_(D,g,-1);else{var S,T;return a(D.start,g.start)<0&&(S=D,D=y(D,g.start)),a(D.end,g.end)>0&&(T=y(D,g.end)),m(g.end,D.start,D.end,-1),T&&!S&&(D.lines=T.lines,D.start=T.start,D.end=T.end,T=D),[g,S,T].filter(Boolean)}return[g,D]}function _(D,g,b){m(D.start,g.start,g.end,b),m(D.end,g.start,g.end,b)}function m(D,g,b,L){D.row==(L==1?g:b).row&&(D.column+=L*(b.column-g.column)),D.row+=L*(b.row-g.row)}function y(D,g){var b=D.lines,L=D.end;D.end=r(g);var S=D.end.row-D.start.row,T=b.splice(S,b.length),M=S?g.column:g.column-D.start.column;b.push(T[0].substring(0,M)),T[0]=T[0].substr(M);var w={start:r(g),end:L,lines:T,action:D.action};return w}function C(D,g){g=u(g);for(var b=D.length;b--;){for(var L=D[b],S=0;S<L.length;S++){var T=L[S],M=h(T,g);g=M[0],M.length!=2&&(M[2]?(L.splice(S+1,1,M[1],M[2]),S++):M[1]||(L.splice(S,1),S--))}L.length||D.splice(b,1)}return D}function E(D,g){for(var b=0;b<g.length;b++)for(var L=g[b],S=0;S<L.length;S++)C(D,L[S])}t.UndoManager=c});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("../range").Range,v=function(){function s(a,d){this.foldData=a,Array.isArray(d)?this.folds=d:d=this.folds=[d];var i=d[d.length-1];this.range=new c(d[0].start.row,d[0].start.column,i.end.row,i.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(r){r.setFoldLine(this)},this)}return s.prototype.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(d){d.start.row+=a,d.end.row+=a})},s.prototype.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a),this.folds.sort(function(d,i){return-d.range.compareEnd(i.start.row,i.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else if(a.end.row==this.start.row)this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");a.foldLine=this},s.prototype.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},s.prototype.walk=function(a,d,i){var r=0,u=this.folds,l,p,f,o=!0;d==null&&(d=this.end.row,i=this.end.column);for(var h=0;h<u.length;h++){if(l=u[h],p=l.range.compareStart(d,i),p==-1){a(null,d,i,r,o);return}if(f=a(null,l.start.row,l.start.column,r,o),f=!f&&a(l.placeholder,l.start.row,l.start.column,r),f||p===0)return;o=!l.sameRow,r=l.end.column}a(null,d,i,r,o)},s.prototype.getNextFoldTo=function(a,d){for(var i,r,u=0;u<this.folds.length;u++){if(i=this.folds[u],r=i.range.compareEnd(a,d),r==-1)return{fold:i,kind:"after"};if(r===0)return{fold:i,kind:"inside"}}return null},s.prototype.addRemoveChars=function(a,d,i){var r=this.getNextFoldTo(a,d),u,l;if(r){if(u=r.fold,r.kind=="inside"&&u.start.column!=d&&u.start.row!=a)window.console&&window.console.log(a,d,u);else if(u.start.row==a){l=this.folds;var p=l.indexOf(u);for(p===0&&(this.start.column+=i),p;p<l.length;p++){if(u=l[p],u.start.column+=i,!u.sameRow)return;u.end.column+=i}this.end.column+=i}}},s.prototype.split=function(a,d){var i=this.getNextFoldTo(a,d);if(!i||i.kind=="inside")return null;var r=i.fold,u=this.folds,l=this.foldData,p=u.indexOf(r),f=u[p-1];this.end.row=f.end.row,this.end.column=f.end.column,u=u.splice(p,u.length-p);var o=new s(l,u);return l.splice(l.indexOf(this)+1,0,o),o},s.prototype.merge=function(a){for(var d=a.folds,i=0;i<d.length;i++)this.addFold(d[i]);var r=this.foldData;r.splice(r.indexOf(a),1)},s.prototype.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(d){a.push("  "+d.toString())}),a.push("]"),a.join(`
`)},s.prototype.idxToPosition=function(a){for(var d=0,i=0;i<this.folds.length;i++){var r=this.folds[i];if(a-=r.start.column-d,a<0)return{row:r.start.row,column:r.start.column+a};if(a-=r.placeholder.length,a<0)return r.start;d=r.end.column}return{row:this.end.row,column:this.end.column+a}},s}();t.FoldLine=v});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("./range").Range,v=c.comparePoints,s=function(){function a(){this.ranges=[],this.$bias=1}return a.prototype.pointIndex=function(d,i,r){for(var u=this.ranges,l=r||0;l<u.length;l++){var p=u[l],f=v(d,p.end);if(!(f>0)){var o=v(d,p.start);return f===0?i&&o!==0?-l-2:l:o>0||o===0&&!i?l:-l-1}}return-l-1},a.prototype.add=function(d){var i=!d.isEmpty(),r=this.pointIndex(d.start,i);r<0&&(r=-r-1);var u=this.pointIndex(d.end,i,r);return u<0?u=-u-1:u++,this.ranges.splice(r,u-r,d)},a.prototype.addList=function(d){for(var i=[],r=d.length;r--;)i.push.apply(i,this.add(d[r]));return i},a.prototype.substractPoint=function(d){var i=this.pointIndex(d);if(i>=0)return this.ranges.splice(i,1)},a.prototype.merge=function(){var d=[],i=this.ranges;i=i.sort(function(f,o){return v(f.start,o.start)});for(var r=i[0],u,l=1;l<i.length;l++){u=r,r=i[l];var p=v(u.end,r.start);p<0||p==0&&!u.isEmpty()&&!r.isEmpty()||(v(u.end,r.end)<0&&(u.end.row=r.end.row,u.end.column=r.end.column),i.splice(l,1),d.push(r),r=u,l--)}return this.ranges=i,d},a.prototype.contains=function(d,i){return this.pointIndex({row:d,column:i})>=0},a.prototype.containsPoint=function(d){return this.pointIndex(d)>=0},a.prototype.rangeAtPoint=function(d){var i=this.pointIndex(d);if(i>=0)return this.ranges[i]},a.prototype.clipRows=function(d,i){var r=this.ranges;if(r[0].start.row>i||r[r.length-1].start.row<d)return[];var u=this.pointIndex({row:d,column:0});u<0&&(u=-u-1);var l=this.pointIndex({row:i,column:0},u);l<0&&(l=-l-1);for(var p=[],f=u;f<l;f++)p.push(r[f]);return p},a.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},a.prototype.attach=function(d){this.session&&this.detach(),this.session=d,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},a.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},a.prototype.$onChange=function(d){for(var i=d.start,r=d.end,u=i.row,l=r.row,p=this.ranges,f=0,o=p.length;f<o;f++){var h=p[f];if(h.end.row>=u)break}if(d.action=="insert")for(var _=l-u,m=-i.column+r.column;f<o;f++){var h=p[f];if(h.start.row>u)break;if(h.start.row==u&&h.start.column>=i.column&&(h.start.column==i.column&&this.$bias<=0||(h.start.column+=m,h.start.row+=_)),h.end.row==u&&h.end.column>=i.column){if(h.end.column==i.column&&this.$bias<0)continue;h.end.column==i.column&&m>0&&f<o-1&&h.end.column>h.start.column&&h.end.column==p[f+1].start.column&&(h.end.column-=m),h.end.column+=m,h.end.row+=_}}else for(var _=u-l,m=i.column-r.column;f<o;f++){var h=p[f];if(h.start.row>l)break;h.end.row<l&&(u<h.end.row||u==h.end.row&&i.column<h.end.column)?(h.end.row=u,h.end.column=i.column):h.end.row==l?h.end.column<=r.column?(_||h.end.column>i.column)&&(h.end.column=i.column,h.end.row=i.row):(h.end.column+=m,h.end.row+=_):h.end.row>l&&(h.end.row+=_),h.start.row<l&&(u<h.start.row||u==h.start.row&&i.column<h.start.column)?(h.start.row=u,h.start.column=i.column):h.start.row==l?h.start.column<=r.column?(_||h.start.column>i.column)&&(h.start.column=i.column,h.start.row=i.row):(h.start.column+=m,h.start.row+=_):h.start.row>l&&(h.start.row+=_)}if(_!=0&&f<o)for(;f<o;f++){var h=p[f];h.start.row+=_,h.end.row+=_}},a}();s.prototype.comparePoints=v,t.RangeList=s});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var u=function(l,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(f[h]=o[h])},u(l,p)};return function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");u(l,p);function f(){this.constructor=l}l.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)}}(),v=e("../range_list").RangeList,s=function(u){c(l,u);function l(p,f){var o=u.call(this)||this;return o.foldLine=null,o.placeholder=f,o.range=p,o.start=p.start,o.end=p.end,o.sameRow=p.start.row==p.end.row,o.subFolds=o.ranges=[],o}return l.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},l.prototype.setFoldLine=function(p){this.foldLine=p,this.subFolds.forEach(function(f){f.setFoldLine(p)})},l.prototype.clone=function(){var p=this.range.clone(),f=new l(p,this.placeholder);return this.subFolds.forEach(function(o){f.subFolds.push(o.clone())}),f.collapseChildren=this.collapseChildren,f},l.prototype.addSubFold=function(p){if(!this.range.isEqual(p)){d(p,this.start);for(var m=p.start.row,y=p.start.column,f=0,o=-1;f<this.subFolds.length&&(o=this.subFolds[f].range.compare(m,y),o==1);f++);var h=this.subFolds[f],_=0;if(o==0){if(h.range.containsRange(p))return h.addSubFold(p);_=1}for(var m=p.range.end.row,y=p.range.end.column,C=f,o=-1;C<this.subFolds.length&&(o=this.subFolds[C].range.compare(m,y),o==1);C++);o==0&&C++;for(var E=this.subFolds.splice(f,C-f,p),D=o==0?E.length-1:E.length,g=_;g<D;g++)p.addSubFold(E[g]);return p.setFoldLine(this.foldLine),p}},l.prototype.restoreRange=function(p){return r(p,this.start)},l}(v);function a(u,l){u.row-=l.row,u.row==0&&(u.column-=l.column)}function d(u,l){a(u.start,l),a(u.end,l)}function i(u,l){u.row==0&&(u.column+=l.column),u.row+=l.row}function r(u,l){i(u.start,l),i(u.end,l)}t.Fold=s});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,n){"use strict";var c=e("../range").Range,v=e("./fold_line").FoldLine,s=e("./fold").Fold,a=e("../token_iterator").TokenIterator,d=e("../mouse/mouse_event").MouseEvent;function i(){this.getFoldAt=function(r,u,l){var p=this.getFoldLine(r);if(!p)return null;for(var f=p.folds,o=0;o<f.length;o++){var h=f[o].range;if(h.contains(r,u)){if(l==1&&h.isEnd(r,u)&&!h.isEmpty())continue;if(l==-1&&h.isStart(r,u)&&!h.isEmpty())continue;return f[o]}}},this.getFoldsInRange=function(r){var u=r.start,l=r.end,p=this.$foldData,f=[];u.column+=1,l.column-=1;for(var o=0;o<p.length;o++){var h=p[o].range.compareRange(r);if(h!=2){if(h==-2)break;for(var _=p[o].folds,m=0;m<_.length;m++){var y=_[m];if(h=y.range.compareRange(r),h==-2)break;if(h==2)continue;if(h==42)break;f.push(y)}}}return u.column-=1,l.column+=1,f},this.getFoldsInRangeList=function(r){if(Array.isArray(r)){var u=[];r.forEach(function(l){u=u.concat(this.getFoldsInRange(l))},this)}else var u=this.getFoldsInRange(r);return u},this.getAllFolds=function(){for(var r=[],u=this.$foldData,l=0;l<u.length;l++)for(var p=0;p<u[l].folds.length;p++)r.push(u[l].folds[p]);return r},this.getFoldStringAt=function(r,u,l,p){if(p=p||this.getFoldLine(r),!p)return null;for(var f={end:{column:0}},o,h,_=0;_<p.folds.length;_++){h=p.folds[_];var m=h.range.compareEnd(r,u);if(m==-1){o=this.getLine(h.start.row).substring(f.end.column,h.start.column);break}else if(m===0)return null;f=h}return o||(o=this.getLine(h.start.row).substring(f.end.column)),l==-1?o.substring(0,u-f.end.column):l==1?o.substring(u-f.end.column):o},this.getFoldLine=function(r,u){var l=this.$foldData,p=0;for(u&&(p=l.indexOf(u)),p==-1&&(p=0),p;p<l.length;p++){var f=l[p];if(f.start.row<=r&&f.end.row>=r)return f;if(f.end.row>r)return null}return null},this.getNextFoldLine=function(r,u){var l=this.$foldData,p=0;for(u&&(p=l.indexOf(u)),p==-1&&(p=0),p;p<l.length;p++){var f=l[p];if(f.end.row>=r)return f}return null},this.getFoldedRowCount=function(r,u){for(var l=this.$foldData,p=u-r+1,f=0;f<l.length;f++){var o=l[f],h=o.end.row,_=o.start.row;if(h>=u){_<u&&(_>=r?p-=u-_:p=0);break}else h>=r&&(_>=r?p-=h-_:p-=h-r+1)}return p},this.$addFoldLine=function(r){return this.$foldData.push(r),this.$foldData.sort(function(u,l){return u.start.row-l.start.row}),r},this.addFold=function(r,u){var l=this.$foldData,p=!1,f;r instanceof s?f=r:(f=new s(u,r),f.collapseChildren=u.collapseChildren),this.$clipRangeToDocument(f.range);var o=f.start.row,h=f.start.column,_=f.end.row,m=f.end.column,y=this.getFoldAt(o,h,1),C=this.getFoldAt(_,m,-1);if(y&&C==y)return y.addSubFold(f);y&&!y.range.isStart(o,h)&&this.removeFold(y),C&&!C.range.isEnd(_,m)&&this.removeFold(C);var E=this.getFoldsInRange(f.range);E.length>0&&(this.removeFolds(E),f.collapseChildren||E.forEach(function(L){f.addSubFold(L)}));for(var D=0;D<l.length;D++){var g=l[D];if(_==g.start.row){g.addFold(f),p=!0;break}else if(o==g.end.row){if(g.addFold(f),p=!0,!f.sameRow){var b=l[D+1];if(b&&b.start.row==_){g.merge(b);break}}break}else if(_<=g.start.row)break}return p||(g=this.$addFoldLine(new v(this.$foldData,f))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:f,action:"add"}),f},this.addFolds=function(r){r.forEach(function(u){this.addFold(u)},this)},this.removeFold=function(r){var u=r.foldLine,l=u.start.row,p=u.end.row,f=this.$foldData,o=u.folds;if(o.length==1)f.splice(f.indexOf(u),1);else if(u.range.isEnd(r.end.row,r.end.column))o.pop(),u.end.row=o[o.length-1].end.row,u.end.column=o[o.length-1].end.column;else if(u.range.isStart(r.start.row,r.start.column))o.shift(),u.start.row=o[0].start.row,u.start.column=o[0].start.column;else if(r.sameRow)o.splice(o.indexOf(r),1);else{var h=u.split(r.start.row,r.start.column);o=h.folds,o.shift(),h.start.row=o[0].start.row,h.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(l,p):this.$updateRowLengthCache(l,p)),this.$modified=!0,this._signal("changeFold",{data:r,action:"remove"})},this.removeFolds=function(r){for(var u=[],l=0;l<r.length;l++)u.push(r[l]);u.forEach(function(p){this.removeFold(p)},this),this.$modified=!0},this.expandFold=function(r){this.removeFold(r),r.subFolds.forEach(function(u){r.restoreRange(u),this.addFold(u)},this),r.collapseChildren>0&&this.foldAll(r.start.row+1,r.end.row,r.collapseChildren-1),r.subFolds=[]},this.expandFolds=function(r){r.forEach(function(u){this.expandFold(u)},this)},this.unfold=function(r,u){var l,p;if(r==null)l=new c(0,0,this.getLength(),0),u==null&&(u=!0);else if(typeof r=="number")l=new c(r,0,r,this.getLine(r).length);else if("row"in r)l=c.fromPoints(r,r);else{if(Array.isArray(r))return p=[],r.forEach(function(o){p=p.concat(this.unfold(o))},this),p;l=r}p=this.getFoldsInRangeList(l);for(var f=p;p.length==1&&c.comparePoints(p[0].start,l.start)<0&&c.comparePoints(p[0].end,l.end)>0;)this.expandFolds(p),p=this.getFoldsInRangeList(l);if(u!=!1?this.removeFolds(p):this.expandFolds(p),f.length)return f},this.isRowFolded=function(r,u){return!!this.getFoldLine(r,u)},this.getRowFoldEnd=function(r,u){var l=this.getFoldLine(r,u);return l?l.end.row:r},this.getRowFoldStart=function(r,u){var l=this.getFoldLine(r,u);return l?l.start.row:r},this.getFoldDisplayLine=function(r,u,l,p,f){p==null&&(p=r.start.row),f==null&&(f=0),u==null&&(u=r.end.row),l==null&&(l=this.getLine(u).length);var o=this.doc,h="";return r.walk(function(_,m,y,C){if(!(m<p)){if(m==p){if(y<f)return;C=Math.max(f,C)}_!=null?h+=_:h+=o.getLine(m).substring(C,y)}},u,l),h},this.getDisplayLine=function(r,u,l,p){var f=this.getFoldLine(r);if(f)return this.getFoldDisplayLine(f,r,u,l,p);var o;return o=this.doc.getLine(r),o.substring(p||0,u||o.length)},this.$cloneFoldData=function(){var r=[];return r=this.$foldData.map(function(u){var l=u.folds.map(function(p){return p.clone()});return new v(r,l)}),r},this.toggleFold=function(r){var u=this.selection,l=u.getRange(),p,f;if(l.isEmpty()){var o=l.start;if(p=this.getFoldAt(o.row,o.column),p){this.expandFold(p);return}else(f=this.findMatchingBracket(o))?l.comparePoint(f)==1?l.end=f:(l.start=f,l.start.column++,l.end.column--):(f=this.findMatchingBracket({row:o.row,column:o.column+1}))?(l.comparePoint(f)==1?l.end=f:l.start=f,l.start.column++):l=this.getCommentFoldRange(o.row,o.column)||l}else{var h=this.getFoldsInRange(l);if(r&&h.length){this.expandFolds(h);return}else h.length==1&&(p=h[0])}if(p||(p=this.getFoldAt(l.start.row,l.start.column)),p&&p.range.toString()==l.toString()){this.expandFold(p);return}var _="...";if(!l.isMultiLine()){if(_=this.getTextRange(l),_.length<4)return;_=_.trim().substring(0,2)+".."}this.addFold(_,l)},this.getCommentFoldRange=function(r,u,l){var p=new a(this,r,u),f=p.getCurrentToken(),o=f&&f.type;if(f&&/^comment|string/.test(o)){o=o.match(/comment|string/)[0],o=="comment"&&(o+="|doc-start|\\.doc");var h=new RegExp(o),_=new c;if(l!=1){do f=p.stepBackward();while(f&&h.test(f.type)&&!/^comment.end/.test(f.type));f=p.stepForward()}if(_.start.row=p.getCurrentTokenRow(),_.start.column=p.getCurrentTokenColumn()+(/^comment.start/.test(f.type)?f.value.length:2),p=new a(this,r,u),l!=-1){var m=-1;do if(f=p.stepForward(),m==-1){var y=this.getState(p.$row);h.test(y)||(m=p.$row)}else if(p.$row>m)break;while(f&&h.test(f.type)&&!/^comment.start/.test(f.type));f=p.stepBackward()}else f=p.getCurrentToken();return _.end.row=p.getCurrentTokenRow(),_.end.column=p.getCurrentTokenColumn(),/^comment.end/.test(f.type)||(_.end.column+=f.value.length-2),_}},this.foldAll=function(r,u,l,p){l==null&&(l=1e5);var f=this.foldWidgets;if(f){u=u||this.getLength(),r=r||0;for(var o=r;o<u;o++)if(f[o]==null&&(f[o]=this.getFoldWidget(o)),f[o]=="start"&&!(p&&!p(o))){var h=this.getFoldWidgetRange(o);h&&h.isMultiLine()&&h.end.row<=u&&h.start.row>=r&&(o=h.end.row,h.collapseChildren=l,this.addFold("...",h))}}},this.foldToLevel=function(r){for(this.foldAll();r-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var r=this;this.foldAll(null,null,null,function(u){for(var l=r.getTokens(u),p=0;p<l.length;p++){var f=l[p];if(!(f.type=="text"&&/^\s+$/.test(f.value)))return!!/comment/.test(f.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(r){if(!this.$foldStyles[r])throw new Error("invalid fold style: "+r+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=r){this.$foldStyle=r,r=="manual"&&this.unfold();var u=this.$foldMode;this.$setFolding(null),this.$setFolding(u)}},this.$setFolding=function(r){if(this.$foldMode!=r){if(this.$foldMode=r,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!r||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=r.getFoldWidget.bind(r,this,this.$foldStyle),this.getFoldWidgetRange=r.getFoldWidgetRange.bind(r,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(r,u){var l=this.foldWidgets;if(!l||u&&l[r])return{};for(var p=r-1,f;p>=0;){var o=l[p];if(o==null&&(o=l[p]=this.getFoldWidget(p)),o=="start"){var h=this.getFoldWidgetRange(p);if(f||(f=h),h&&h.end.row>=r)break}p--}return{range:p!==-1&&h,firstRange:f}},this.onFoldWidgetClick=function(r,u){u instanceof d&&(u=u.domEvent);var l={children:u.shiftKey,all:u.ctrlKey||u.metaKey,siblings:u.altKey},p=this.$toggleFoldWidget(r,l);if(!p){var f=u.target||u.srcElement;f&&/ace_fold-widget/.test(f.className)&&(f.className+=" ace_invalid")}},this.$toggleFoldWidget=function(r,u){if(this.getFoldWidget){var l=this.getFoldWidget(r),p=this.getLine(r),f=l==="end"?-1:1,o=this.getFoldAt(r,f===-1?0:p.length,f);if(o)return u.children||u.all?this.removeFold(o):this.expandFold(o),o;var h=this.getFoldWidgetRange(r,!0);if(h&&!h.isMultiLine()&&(o=this.getFoldAt(h.start.row,h.start.column,1),o&&h.isEqual(o.range)))return this.removeFold(o),o;if(u.siblings){var _=this.getParentFoldRangeData(r);if(_.range)var m=_.range.start.row+1,y=_.range.end.row;this.foldAll(m,y,u.all?1e4:0)}else u.children?(y=h?h.end.row:this.getLength(),this.foldAll(r+1,y,u.all?1e4:0)):h&&(u.all&&(h.collapseChildren=1e4),this.addFold("...",h));return h}},this.toggleFoldWidget=function(r){var u=this.selection.getCursor().row;u=this.getRowFoldStart(u);var l=this.$toggleFoldWidget(u,{});if(!l){var p=this.getParentFoldRangeData(u,!0);if(l=p.range||p.firstRange,l){u=l.start.row;var f=this.getFoldAt(u,this.getLine(u).length,1);f?this.removeFold(f):this.addFold("...",l)}}},this.updateFoldWidgets=function(r){var u=r.start.row,l=r.end.row-u;if(l===0)this.foldWidgets[u]=null;else if(r.action=="remove")this.foldWidgets.splice(u,l+1,null);else{var p=Array(l+1);p.unshift(u,1),this.foldWidgets.splice.apply(this.foldWidgets,p)}},this.tokenizerUpdateFoldWidgets=function(r){var u=r.data;u.first!=u.last&&this.foldWidgets.length>u.first&&this.foldWidgets.splice(u.first,this.foldWidgets.length)}}t.Folding=i});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var c=e("../token_iterator").TokenIterator,v=e("../range").Range;function s(){this.findMatchingBracket=function(a,d){if(a.column==0)return null;var i=d||this.getLine(a.row).charAt(a.column-1);if(i=="")return null;var r=i.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],a):this.$findOpeningBracket(r[2],a):null},this.getBracketRange=function(a){var d=this.getLine(a.row),i=!0,r,u=d.charAt(a.column-1),l=u&&u.match(/([\(\[\{])|([\)\]\}])/);if(l||(u=d.charAt(a.column),a={row:a.row,column:a.column+1},l=u&&u.match(/([\(\[\{])|([\)\]\}])/),i=!1),!l)return null;if(l[1]){var p=this.$findClosingBracket(l[1],a);if(!p)return null;r=v.fromPoints(a,p),i||(r.end.column++,r.start.column--),r.cursor=r.end}else{var p=this.$findOpeningBracket(l[2],a);if(!p)return null;r=v.fromPoints(p,a),i||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.getMatchingBracketRanges=function(a,d){var i=this.getLine(a.row),r=/([\(\[\{])|([\)\]\}])/,u=!d&&i.charAt(a.column-1),l=u&&u.match(r);if(l||(u=(d===void 0||d)&&i.charAt(a.column),a={row:a.row,column:a.column+1},l=u&&u.match(r)),!l)return null;var p=new v(a.row,a.column-1,a.row,a.column),f=l[1]?this.$findClosingBracket(l[1],a):this.$findOpeningBracket(l[2],a);if(!f)return[p];var o=new v(f.row,f.column,f.row,f.column+1);return[p,o]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(a,d,i){var r=this.$brackets[a],u=1,l=new c(this,d.row,d.column),p=l.getCurrentToken();if(p||(p=l.stepForward()),!!p){i||(i=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var f=d.column-l.getCurrentTokenColumn()-2,o=p.value;;){for(;f>=0;){var h=o.charAt(f);if(h==r){if(u-=1,u==0)return{row:l.getCurrentTokenRow(),column:f+l.getCurrentTokenColumn()}}else h==a&&(u+=1);f-=1}do p=l.stepBackward();while(p&&!i.test(p.type));if(p==null)break;o=p.value,f=o.length-1}return null}},this.$findClosingBracket=function(a,d,i){var r=this.$brackets[a],u=1,l=new c(this,d.row,d.column),p=l.getCurrentToken();if(p||(p=l.stepForward()),!!p){i||(i=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var f=d.column-l.getCurrentTokenColumn();;){for(var o=p.value,h=o.length;f<h;){var _=o.charAt(f);if(_==r){if(u-=1,u==0)return{row:l.getCurrentTokenRow(),column:f+l.getCurrentTokenColumn()}}else _==a&&(u+=1);f+=1}do p=l.stepForward();while(p&&!i.test(p.type));if(p==null)break;f=0}return null}},this.getMatchingTags=function(a){var d=new c(this,a.row,a.column),i=this.$findTagName(d);if(i){var r=d.stepBackward();return r.value==="<"?this.$findClosingTag(d,i):this.$findOpeningTag(d,i)}},this.$findTagName=function(a){var d=a.getCurrentToken(),i=!1,r=!1;if(d&&d.type.indexOf("tag-name")===-1)do r?d=a.stepBackward():d=a.stepForward(),d&&(d.value==="/>"?r=!0:d.type.indexOf("tag-name")!==-1&&(i=!0));while(d&&!i);return d},this.$findClosingTag=function(a,d){var i,r=d.value,u=d.value,l=0,p=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);d=a.stepForward();var f=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+d.value.length),o=!1;do if(i=d,d=a.stepForward(),d){if(d.value===">"&&!o){var h=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);o=!0}if(d.type.indexOf("tag-name")!==-1){if(r=d.value,u===r){if(i.value==="<")l++;else if(i.value==="</"&&(l--,l<0)){a.stepBackward();var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2);d=a.stepForward();var m=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+d.value.length);if(d=a.stepForward(),d&&d.value===">")var y=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);else return}}}else if(u===r&&d.value==="/>"&&(l--,l<0))var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2),m=_,y=m,h=new v(f.end.row,f.end.column,f.end.row,f.end.column+1)}while(d&&l>=0);if(p&&h&&_&&y&&f&&m)return{openTag:new v(p.start.row,p.start.column,h.end.row,h.end.column),closeTag:new v(_.start.row,_.start.column,y.end.row,y.end.column),openTagName:f,closeTagName:m}},this.$findOpeningTag=function(a,d){var i=a.getCurrentToken(),r=d.value,u=0,l=a.getCurrentTokenRow(),p=a.getCurrentTokenColumn(),f=p+2,o=new v(l,p,l,f);a.stepForward();var h=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+d.value.length);if(d=a.stepForward(),!(!d||d.value!==">")){var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);a.stepBackward(),a.stepBackward();do if(d=i,l=a.getCurrentTokenRow(),p=a.getCurrentTokenColumn(),f=p+d.value.length,i=a.stepBackward(),d){if(d.type.indexOf("tag-name")!==-1){if(r===d.value)if(i.value==="<"){if(u++,u>0){var m=new v(l,p,l,f),y=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);do d=a.stepForward();while(d&&d.value!==">");var C=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1)}}else i.value==="</"&&u--}else if(d.value==="/>"){for(var E=0,D=i;D;){if(D.type.indexOf("tag-name")!==-1&&D.value===r){u--;break}else if(D.value==="<")break;D=a.stepBackward(),E++}for(var g=0;g<E;g++)a.stepForward()}}while(i&&u<=0);if(y&&C&&o&&_&&m&&h)return{openTag:new v(y.start.row,y.start.column,C.end.row,C.end.column),closeTag:new v(o.start.row,o.start.column,_.end.row,_.end.column),openTagName:m,closeTagName:h}}}}t.BracketMatch=s});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/lang"),s=e("./bidihandler").BidiHandler,a=e("./config"),d=e("./lib/event_emitter").EventEmitter,i=e("./selection").Selection,r=e("./mode/text").Mode,u=e("./range").Range,l=e("./document").Document,p=e("./background_tokenizer").BackgroundTokenizer,f=e("./search_highlight").SearchHighlight,o=e("./undomanager").UndoManager,h=function(){function S(T,M){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++S.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new p(new r().getTokenizer(),this);var w=this;this.bgTokenizer.on("update",function(F){w._signal("tokenizerUpdate",F)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof T!="object"||!T.getLine)&&(T=new l(T)),this.setDocument(T),this.selection=new i(this),this.$bidiHandler=new s(this),a.resetOptions(this),this.setMode(M),a._signal("session",this),this.destroyed=!1}return S.prototype.setDocument=function(T){this.doc&&this.doc.off("change",this.$onChange),this.doc=T,T.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},S.prototype.getDocument=function(){return this.doc},S.prototype.$resetRowCache=function(T){if(!T){this.$docRowCache=[],this.$screenRowCache=[];return}var M=this.$docRowCache.length,w=this.$getRowCacheIndex(this.$docRowCache,T)+1;M>w&&(this.$docRowCache.splice(w,M),this.$screenRowCache.splice(w,M))},S.prototype.$getRowCacheIndex=function(T,M){for(var w=0,F=T.length-1;w<=F;){var x=w+F>>1,R=T[x];if(M>R)w=x+1;else if(M<R)F=x-1;else return x}return w-1},S.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},S.prototype.onChangeFold=function(T){var M=T.data;this.$resetRowCache(M.start.row)},S.prototype.onChange=function(T){this.$modified=!0,this.$bidiHandler.onChange(T),this.$resetRowCache(T.start.row);var M=this.$updateInternalDataOnChange(T);!this.$fromUndo&&this.$undoManager&&(M&&M.length&&(this.$undoManager.add({action:"removeFolds",folds:M},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(T,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(T),this._signal("change",T)},S.prototype.setValue=function(T){this.doc.setValue(T),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},S.fromJSON=function(T){typeof T=="string"&&(T=JSON.parse(T));var M=new o;M.$undoStack=T.history.undo,M.$redoStack=T.history.redo,M.mark=T.history.mark,M.$rev=T.history.rev;var w=new S(T.value);return T.folds.forEach(function(F){w.addFold("...",u.fromPoints(F.start,F.end))}),w.setAnnotations(T.annotations),w.setBreakpoints(T.breakpoints),w.setMode(T.mode),w.setScrollLeft(T.scrollLeft),w.setScrollTop(T.scrollTop),w.setUndoManager(M),w.selection.fromJSON(T.selection),w},S.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(T){return T.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},S.prototype.toString=function(){return this.doc.getValue()},S.prototype.getSelection=function(){return this.selection},S.prototype.getState=function(T){return this.bgTokenizer.getState(T)},S.prototype.getTokens=function(T){return this.bgTokenizer.getTokens(T)},S.prototype.getTokenAt=function(T,M){var w=this.bgTokenizer.getTokens(T),F,x=0;if(M==null){var R=w.length-1;x=this.getLine(T).length}else for(var R=0;R<w.length&&(x+=w[R].value.length,!(x>=M));R++);return F=w[R],F?(F.index=R,F.start=x-F.value.length,F):null},S.prototype.setUndoManager=function(T){if(this.$undoManager=T,this.$informUndoManager&&this.$informUndoManager.cancel(),T){var M=this;T.addSession(this),this.$syncInformUndoManager=function(){M.$informUndoManager.cancel(),M.mergeUndoDeltas=!1},this.$informUndoManager=v.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},S.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},S.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},S.prototype.getTabString=function(){return this.getUseSoftTabs()?v.stringRepeat(" ",this.getTabSize()):"	"},S.prototype.setUseSoftTabs=function(T){this.setOption("useSoftTabs",T)},S.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},S.prototype.setTabSize=function(T){this.setOption("tabSize",T)},S.prototype.getTabSize=function(){return this.$tabSize},S.prototype.isTabStop=function(T){return this.$useSoftTabs&&T.column%this.$tabSize===0},S.prototype.setNavigateWithinSoftTabs=function(T){this.setOption("navigateWithinSoftTabs",T)},S.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},S.prototype.setOverwrite=function(T){this.setOption("overwrite",T)},S.prototype.getOverwrite=function(){return this.$overwrite},S.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},S.prototype.addGutterDecoration=function(T,M){this.$decorations[T]||(this.$decorations[T]=""),this.$decorations[T]+=" "+M,this._signal("changeBreakpoint",{})},S.prototype.removeGutterDecoration=function(T,M){this.$decorations[T]=(this.$decorations[T]||"").replace(" "+M,""),this._signal("changeBreakpoint",{})},S.prototype.getBreakpoints=function(){return this.$breakpoints},S.prototype.setBreakpoints=function(T){this.$breakpoints=[];for(var M=0;M<T.length;M++)this.$breakpoints[T[M]]="ace_breakpoint";this._signal("changeBreakpoint",{})},S.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},S.prototype.setBreakpoint=function(T,M){M===void 0&&(M="ace_breakpoint"),M?this.$breakpoints[T]=M:delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},S.prototype.clearBreakpoint=function(T){delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},S.prototype.addMarker=function(T,M,w,F){var x=this.$markerId++,R={range:T,type:w||"line",renderer:typeof w=="function"?w:null,clazz:M,inFront:!!F,id:x};return F?(this.$frontMarkers[x]=R,this._signal("changeFrontMarker")):(this.$backMarkers[x]=R,this._signal("changeBackMarker")),x},S.prototype.addDynamicMarker=function(T,M){if(T.update){var w=this.$markerId++;return T.id=w,T.inFront=!!M,M?(this.$frontMarkers[w]=T,this._signal("changeFrontMarker")):(this.$backMarkers[w]=T,this._signal("changeBackMarker")),T}},S.prototype.removeMarker=function(T){var M=this.$frontMarkers[T]||this.$backMarkers[T];if(M){var w=M.inFront?this.$frontMarkers:this.$backMarkers;delete w[T],this._signal(M.inFront?"changeFrontMarker":"changeBackMarker")}},S.prototype.getMarkers=function(T){return T?this.$frontMarkers:this.$backMarkers},S.prototype.highlight=function(T){if(!this.$searchHighlight){var M=new f(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(M)}this.$searchHighlight.setRegexp(T)},S.prototype.highlightLines=function(T,M,w,F){typeof M!="number"&&(w=M,M=T),w||(w="ace_step");var x=new u(T,0,M,1/0);return x.id=this.addMarker(x,w,"fullLine",F),x},S.prototype.setAnnotations=function(T){this.$annotations=T,this._signal("changeAnnotation",{})},S.prototype.getAnnotations=function(){return this.$annotations||[]},S.prototype.clearAnnotations=function(){this.setAnnotations([])},S.prototype.$detectNewLine=function(T){var M=T.match(/^.*?(\r?\n)/m);M?this.$autoNewLine=M[1]:this.$autoNewLine=`
`},S.prototype.getWordRange=function(T,M){var w=this.getLine(T),F=!1;if(M>0&&(F=!!w.charAt(M-1).match(this.tokenRe)),F||(F=!!w.charAt(M).match(this.tokenRe)),F)var x=this.tokenRe;else if(/^\s+$/.test(w.slice(M-1,M+1)))var x=/\s/;else var x=this.nonTokenRe;var R=M;if(R>0){do R--;while(R>=0&&w.charAt(R).match(x));R++}for(var A=M;A<w.length&&w.charAt(A).match(x);)A++;return new u(T,R,T,A)},S.prototype.getAWordRange=function(T,M){for(var w=this.getWordRange(T,M),F=this.getLine(w.end.row);F.charAt(w.end.column).match(/[ \t]/);)w.end.column+=1;return w},S.prototype.setNewLineMode=function(T){this.doc.setNewLineMode(T)},S.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},S.prototype.setUseWorker=function(T){this.setOption("useWorker",T)},S.prototype.getUseWorker=function(){return this.$useWorker},S.prototype.onReloadTokenizer=function(T){var M=T.data;this.bgTokenizer.start(M.first),this._signal("tokenizerUpdate",T)},S.prototype.setMode=function(T,M){if(T&&typeof T=="object"){if(T.getTokenizer)return this.$onChangeMode(T);var w=T,F=w.path}else F=T||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new r),this.$modes[F]&&!w){this.$onChangeMode(this.$modes[F]),M&&M();return}this.$modeId=F,a.loadModule(["mode",F],function(x){if(this.$modeId!==F)return M&&M();this.$modes[F]&&!w?this.$onChangeMode(this.$modes[F]):x&&x.Mode&&(x=new x.Mode(w),w||(this.$modes[F]=x,x.$id=F),this.$onChangeMode(x)),M&&M()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},S.prototype.$onChangeMode=function(T,M){if(M||(this.$modeId=T.$id),this.$mode!==T){var w=this.$mode;this.$mode=T,this.$stopWorker(),this.$useWorker&&this.$startWorker();var F=T.getTokenizer();if(F.on!==void 0){var x=this.onReloadTokenizer.bind(this);F.on("update",x)}this.bgTokenizer.setTokenizer(F),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=T.tokenRe,this.nonTokenRe=T.nonTokenRe,M||(T.attachToSession&&T.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(T.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:w,mode:T}))}},S.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},S.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(T){a.warn("Could not load worker",T),this.$worker=null}},S.prototype.getMode=function(){return this.$mode},S.prototype.setScrollTop=function(T){this.$scrollTop===T||isNaN(T)||(this.$scrollTop=T,this._signal("changeScrollTop",T))},S.prototype.getScrollTop=function(){return this.$scrollTop},S.prototype.setScrollLeft=function(T){this.$scrollLeft===T||isNaN(T)||(this.$scrollLeft=T,this._signal("changeScrollLeft",T))},S.prototype.getScrollLeft=function(){return this.$scrollLeft},S.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},S.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var T=0;return this.lineWidgets.forEach(function(M){M&&M.screenWidth>T&&(T=M.screenWidth)}),this.lineWidgetWidth=T},S.prototype.$computeWidth=function(T){if(this.$modified||T){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var M=this.doc.getAllLines(),w=this.$rowLengthCache,F=0,x=0,R=this.$foldData[x],A=R?R.start.row:1/0,I=M.length,$=0;$<I;$++){if($>A){if($=R.end.row+1,$>=I)break;R=this.$foldData[x++],A=R?R.start.row:1/0}w[$]==null&&(w[$]=this.$getStringScreenWidth(M[$])[0]),w[$]>F&&(F=w[$])}this.screenWidth=F}},S.prototype.getLine=function(T){return this.doc.getLine(T)},S.prototype.getLines=function(T,M){return this.doc.getLines(T,M)},S.prototype.getLength=function(){return this.doc.getLength()},S.prototype.getTextRange=function(T){return this.doc.getTextRange(T||this.selection.getRange())},S.prototype.insert=function(T,M){return this.doc.insert(T,M)},S.prototype.remove=function(T){return this.doc.remove(T)},S.prototype.removeFullLines=function(T,M){return this.doc.removeFullLines(T,M)},S.prototype.undoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=T.length-1;w!=-1;w--){var F=T[w];F.action=="insert"||F.action=="remove"?this.doc.revertDelta(F):F.folds&&this.addFolds(F.folds)}!M&&this.$undoSelect&&(T.selectionBefore?this.selection.fromJSON(T.selectionBefore):this.selection.setRange(this.$getUndoSelection(T,!0))),this.$fromUndo=!1}},S.prototype.redoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=0;w<T.length;w++){var F=T[w];(F.action=="insert"||F.action=="remove")&&this.doc.$safeApplyDelta(F)}!M&&this.$undoSelect&&(T.selectionAfter?this.selection.fromJSON(T.selectionAfter):this.selection.setRange(this.$getUndoSelection(T,!1))),this.$fromUndo=!1}},S.prototype.setUndoSelect=function(T){this.$undoSelect=T},S.prototype.$getUndoSelection=function(T,M){function w(I){return M?I.action!=="insert":I.action==="insert"}for(var F,x,R=0;R<T.length;R++){var A=T[R];if(A.start){if(!F){w(A)?F=u.fromPoints(A.start,A.end):F=u.fromPoints(A.start,A.start);continue}w(A)?(x=A.start,F.compare(x.row,x.column)==-1&&F.setStart(x),x=A.end,F.compare(x.row,x.column)==1&&F.setEnd(x)):(x=A.start,F.compare(x.row,x.column)==-1&&(F=u.fromPoints(A.start,A.start)))}}return F},S.prototype.replace=function(T,M){return this.doc.replace(T,M)},S.prototype.moveText=function(T,M,w){var F=this.getTextRange(T),x=this.getFoldsInRange(T),R=u.fromPoints(M,M);if(!w){this.remove(T);var A=T.start.row-T.end.row,I=A?-T.end.column:T.start.column-T.end.column;I&&(R.start.row==T.end.row&&R.start.column>T.end.column&&(R.start.column+=I),R.end.row==T.end.row&&R.end.column>T.end.column&&(R.end.column+=I)),A&&R.start.row>=T.end.row&&(R.start.row+=A,R.end.row+=A)}if(R.end=this.insert(R.start,F),x.length){var $=T.start,k=R.start,A=k.row-$.row,I=k.column-$.column;this.addFolds(x.map(function(q){return q=q.clone(),q.start.row==$.row&&(q.start.column+=I),q.end.row==$.row&&(q.end.column+=I),q.start.row+=A,q.end.row+=A,q}))}return R},S.prototype.indentRows=function(T,M,w){w=w.replace(/\t/g,this.getTabString());for(var F=T;F<=M;F++)this.doc.insertInLine({row:F,column:0},w)},S.prototype.outdentRows=function(T){for(var M=T.collapseRows(),w=new u(0,0,0,0),F=this.getTabSize(),x=M.start.row;x<=M.end.row;++x){var R=this.getLine(x);w.start.row=x,w.end.row=x;for(var A=0;A<F&&R.charAt(A)==" ";++A);A<F&&R.charAt(A)=="	"?(w.start.column=A,w.end.column=A+1):(w.start.column=0,w.end.column=A),this.remove(w)}},S.prototype.$moveLines=function(T,M,w){if(T=this.getRowFoldStart(T),M=this.getRowFoldEnd(M),w<0){var F=this.getRowFoldStart(T+w);if(F<0)return 0;var x=F-T}else if(w>0){var F=this.getRowFoldEnd(M+w);if(F>this.doc.getLength()-1)return 0;var x=F-M}else{T=this.$clipRowToDocument(T),M=this.$clipRowToDocument(M);var x=M-T+1}var R=new u(T,0,M,Number.MAX_VALUE),A=this.getFoldsInRange(R).map(function($){return $=$.clone(),$.start.row+=x,$.end.row+=x,$}),I=w==0?this.doc.getLines(T,M):this.doc.removeFullLines(T,M);return this.doc.insertFullLines(T+x,I),A.length&&this.addFolds(A),x},S.prototype.moveLinesUp=function(T,M){return this.$moveLines(T,M,-1)},S.prototype.moveLinesDown=function(T,M){return this.$moveLines(T,M,1)},S.prototype.duplicateLines=function(T,M){return this.$moveLines(T,M,0)},S.prototype.$clipRowToDocument=function(T){return Math.max(0,Math.min(T,this.doc.getLength()-1))},S.prototype.$clipColumnToRow=function(T,M){return M<0?0:Math.min(this.doc.getLine(T).length,M)},S.prototype.$clipPositionToDocument=function(T,M){if(M=Math.max(0,M),T<0)T=0,M=0;else{var w=this.doc.getLength();T>=w?(T=w-1,M=this.doc.getLine(w-1).length):M=Math.min(this.doc.getLine(T).length,M)}return{row:T,column:M}},S.prototype.$clipRangeToDocument=function(T){T.start.row<0?(T.start.row=0,T.start.column=0):T.start.column=this.$clipColumnToRow(T.start.row,T.start.column);var M=this.doc.getLength()-1;return T.end.row>M?(T.end.row=M,T.end.column=this.doc.getLine(M).length):T.end.column=this.$clipColumnToRow(T.end.row,T.end.column),T},S.prototype.setUseWrapMode=function(T){if(T!=this.$useWrapMode){if(this.$useWrapMode=T,this.$modified=!0,this.$resetRowCache(0),T){var M=this.getLength();this.$wrapData=Array(M),this.$updateWrapData(0,M-1)}this._signal("changeWrapMode")}},S.prototype.getUseWrapMode=function(){return this.$useWrapMode},S.prototype.setWrapLimitRange=function(T,M){(this.$wrapLimitRange.min!==T||this.$wrapLimitRange.max!==M)&&(this.$wrapLimitRange={min:T,max:M},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},S.prototype.adjustWrapLimit=function(T,M){var w=this.$wrapLimitRange;w.max<0&&(w={min:M,max:M});var F=this.$constrainWrapLimit(T,w.min,w.max);return F!=this.$wrapLimit&&F>1?(this.$wrapLimit=F,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},S.prototype.$constrainWrapLimit=function(T,M,w){return M&&(T=Math.max(M,T)),w&&(T=Math.min(w,T)),T},S.prototype.getWrapLimit=function(){return this.$wrapLimit},S.prototype.setWrapLimit=function(T){this.setWrapLimitRange(T,T)},S.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},S.prototype.$updateInternalDataOnChange=function(T){var M=this.$useWrapMode,w=T.action,F=T.start,x=T.end,R=F.row,A=x.row,I=A-R,$=null;if(this.$updating=!0,I!=0)if(w==="remove"){this[M?"$wrapData":"$rowLengthCache"].splice(R,I);var k=this.$foldData;$=this.getFoldsInRange(T),this.removeFolds($);var H=this.getFoldLine(x.row),U=0;if(H){H.addRemoveChars(x.row,x.column,F.column-x.column),H.shiftRow(-I);var q=this.getFoldLine(R);q&&q!==H&&(q.merge(H),H=q),U=k.indexOf(H)+1}for(U;U<k.length;U++){var H=k[U];H.start.row>=x.row&&H.shiftRow(-I)}A=R}else{var N=Array(I);N.unshift(R,0);var K=M?this.$wrapData:this.$rowLengthCache;K.splice.apply(K,N);var k=this.$foldData,H=this.getFoldLine(R),U=0;if(H){var O=H.range.compareInside(F.row,F.column);O==0?(H=H.split(F.row,F.column),H&&(H.shiftRow(I),H.addRemoveChars(A,0,x.column-F.column))):O==-1&&(H.addRemoveChars(R,0,x.column-F.column),H.shiftRow(I)),U=k.indexOf(H)+1}for(U;U<k.length;U++){var H=k[U];H.start.row>=R&&H.shiftRow(I)}}else{I=Math.abs(T.start.column-T.end.column),w==="remove"&&($=this.getFoldsInRange(T),this.removeFolds($),I=-I);var H=this.getFoldLine(R);H&&H.addRemoveChars(R,F.column,I)}return M&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,M?this.$updateWrapData(R,A):this.$updateRowLengthCache(R,A),$},S.prototype.$updateRowLengthCache=function(T,M){this.$rowLengthCache[T]=null,this.$rowLengthCache[M]=null},S.prototype.$updateWrapData=function(T,M){var w=this.doc.getAllLines(),F=this.getTabSize(),x=this.$wrapData,R=this.$wrapLimit,A,I,$=T;for(M=Math.min(M,w.length-1);$<=M;)I=this.getFoldLine($,I),I?(A=[],I.walk(function(k,H,U,q){var N;if(k!=null){N=this.$getDisplayTokens(k,A.length),N[0]=y;for(var K=1;K<N.length;K++)N[K]=C}else N=this.$getDisplayTokens(w[H].substring(q,U),A.length);A=A.concat(N)}.bind(this),I.end.row,w[I.end.row].length+1),x[I.start.row]=this.$computeWrapSplits(A,R,F),$=I.end.row+1):(A=this.$getDisplayTokens(w[$]),x[$]=this.$computeWrapSplits(A,R,F),$++)},S.prototype.$computeWrapSplits=function(T,M,w){if(T.length==0)return[];var F=[],x=T.length,R=0,A=0,I=this.$wrapAsCode,$=this.$indentedSoftWrap,k=M<=Math.max(2*w,8)||$===!1?0:Math.floor(M/2);function H(){var O=0;if(k===0)return O;if($)for(var B=0;B<T.length;B++){var W=T[B];if(W==D)O+=1;else if(W==g)O+=w;else{if(W==b)continue;break}}return I&&$!==!1&&(O+=w),Math.min(O,k)}function U(O){for(var B=O-R,W=R;W<O;W++){var P=T[W];(P===12||P===2)&&(B-=1)}F.length||(q=H(),F.indent=q),A+=B,F.push(A),R=O}for(var q=0;x-R>M-q;){var N=R+M-q;if(T[N-1]>=D&&T[N]>=D){U(N);continue}if(T[N]==y||T[N]==C){for(N;N!=R-1&&T[N]!=y;N--);if(N>R){U(N);continue}for(N=R+M,N;N<T.length&&T[N]==C;N++);if(N==T.length)break;U(N);continue}for(var K=Math.max(N-(M-(M>>2)),R-1);N>K&&T[N]<y;)N--;if(I){for(;N>K&&T[N]<y;)N--;for(;N>K&&T[N]==E;)N--}else for(;N>K&&T[N]<D;)N--;if(N>K){U(++N);continue}N=R+M,T[N]==m&&N--,U(N-q)}return F},S.prototype.$getDisplayTokens=function(T,M){var w=[],F;M=M||0;for(var x=0;x<T.length;x++){var R=T.charCodeAt(x);if(R==9){F=this.getScreenTabSize(w.length+M),w.push(g);for(var A=1;A<F;A++)w.push(b)}else R==32?w.push(D):R>39&&R<48||R>57&&R<64?w.push(E):R>=4352&&L(R)?w.push(_,m):w.push(_)}return w},S.prototype.$getStringScreenWidth=function(T,M,w){if(M==0)return[0,0];M==null&&(M=1/0),w=w||0;var F,x;for(x=0;x<T.length&&(F=T.charCodeAt(x),F==9?w+=this.getScreenTabSize(w):F>=4352&&L(F)?w+=2:w+=1,!(w>M));x++);return[w,x]},S.prototype.getRowLength=function(T){var M=1;return this.lineWidgets&&(M+=this.lineWidgets[T]&&this.lineWidgets[T].rowCount||0),!this.$useWrapMode||!this.$wrapData[T]?M:this.$wrapData[T].length+M},S.prototype.getRowLineCount=function(T){return!this.$useWrapMode||!this.$wrapData[T]?1:this.$wrapData[T].length+1},S.prototype.getRowWrapIndent=function(T){if(this.$useWrapMode){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE),w=this.$wrapData[M.row];return w.length&&w[0]<M.column?w.indent:0}else return 0},S.prototype.getScreenLastRowColumn=function(T){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE);return this.documentToScreenColumn(M.row,M.column)},S.prototype.getDocumentLastRowColumn=function(T,M){var w=this.documentToScreenRow(T,M);return this.getScreenLastRowColumn(w)},S.prototype.getDocumentLastRowColumnPosition=function(T,M){var w=this.documentToScreenRow(T,M);return this.screenToDocumentPosition(w,Number.MAX_VALUE/10)},S.prototype.getRowSplitData=function(T){if(this.$useWrapMode)return this.$wrapData[T]},S.prototype.getScreenTabSize=function(T){return this.$tabSize-(T%this.$tabSize|0)},S.prototype.screenToDocumentRow=function(T,M){return this.screenToDocumentPosition(T,M).row},S.prototype.screenToDocumentColumn=function(T,M){return this.screenToDocumentPosition(T,M).column},S.prototype.screenToDocumentPosition=function(T,M,w){if(T<0)return{row:0,column:0};var F,x=0,R=0,A,I=0,$=0,k=this.$screenRowCache,H=this.$getRowCacheIndex(k,T),U=k.length;if(U&&H>=0)var I=k[H],x=this.$docRowCache[H],q=T>k[U-1];else var q=!U;for(var N=this.getLength()-1,K=this.getNextFoldLine(x),O=K?K.start.row:1/0;I<=T&&($=this.getRowLength(x),!(I+$>T||x>=N));)I+=$,x++,x>O&&(x=K.end.row+1,K=this.getNextFoldLine(x,K),O=K?K.start.row:1/0),q&&(this.$docRowCache.push(x),this.$screenRowCache.push(I));if(K&&K.start.row<=x)F=this.getFoldDisplayLine(K),x=K.start.row;else{if(I+$<=T||x>N)return{row:N,column:this.getLine(N).length};F=this.getLine(x),K=null}var B=0,W=Math.floor(T-I);if(this.$useWrapMode){var P=this.$wrapData[x];P&&(A=P[W],W>0&&P.length&&(B=P.indent,R=P[W-1]||P[P.length-1],F=F.substring(R)))}return w!==void 0&&this.$bidiHandler.isBidiRow(I+W,x,W)&&(M=this.$bidiHandler.offsetToCol(w)),R+=this.$getStringScreenWidth(F,M-B)[1],this.$useWrapMode&&R>=A&&(R=A-1),K?K.idxToPosition(R):{row:x,column:R}},S.prototype.documentToScreenPosition=function(T,M){if(typeof M>"u")var w=this.$clipPositionToDocument(T.row,T.column);else w=this.$clipPositionToDocument(T,M);T=w.row,M=w.column;var F=0,x=null,R=null;R=this.getFoldAt(T,M,1),R&&(T=R.start.row,M=R.start.column);var A,I=0,$=this.$docRowCache,k=this.$getRowCacheIndex($,T),H=$.length;if(H&&k>=0)var I=$[k],F=this.$screenRowCache[k],U=T>$[H-1];else var U=!H;for(var q=this.getNextFoldLine(I),N=q?q.start.row:1/0;I<T;){if(I>=N){if(A=q.end.row+1,A>T)break;q=this.getNextFoldLine(A,q),N=q?q.start.row:1/0}else A=I+1;F+=this.getRowLength(I),I=A,U&&(this.$docRowCache.push(I),this.$screenRowCache.push(F))}var K="";q&&I>=N?(K=this.getFoldDisplayLine(q,T,M),x=q.start.row):(K=this.getLine(T).substring(0,M),x=T);var O=0;if(this.$useWrapMode){var B=this.$wrapData[x];if(B){for(var W=0;K.length>=B[W];)F++,W++;K=K.substring(B[W-1]||0,K.length),O=W>0?B.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(F+=this.lineWidgets[I].rowsAbove),{row:F,column:O+this.$getStringScreenWidth(K)[0]}},S.prototype.documentToScreenColumn=function(T,M){return this.documentToScreenPosition(T,M).column},S.prototype.documentToScreenRow=function(T,M){return this.documentToScreenPosition(T,M).row},S.prototype.getScreenLength=function(){var T=0,M=null;if(this.$useWrapMode)for(var x=this.$wrapData.length,R=0,F=0,M=this.$foldData[F++],A=M?M.start.row:1/0;R<x;){var I=this.$wrapData[R];T+=I?I.length+1:1,R++,R>A&&(R=M.end.row+1,M=this.$foldData[F++],A=M?M.start.row:1/0)}else{T=this.getLength();for(var w=this.$foldData,F=0;F<w.length;F++)M=w[F],T-=M.end.row-M.start.row}return this.lineWidgets&&(T+=this.$getWidgetScreenLength()),T},S.prototype.$setFontMetrics=function(T){this.$enableVarChar&&(this.$getStringScreenWidth=function(M,w,F){if(w===0)return[0,0];w||(w=1/0),F=F||0;var x,R;for(R=0;R<M.length&&(x=M.charAt(R),x==="	"?F+=this.getScreenTabSize(F):F+=T.getCharacterWidth(x),!(F>w));R++);return[F,R]})},S.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},S}();h.$uid=0,h.prototype.$modes=a.$modes,h.prototype.getValue=h.prototype.toString,h.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},h.prototype.$overwrite=!1,h.prototype.$mode=null,h.prototype.$modeId=null,h.prototype.$scrollTop=0,h.prototype.$scrollLeft=0,h.prototype.$wrapLimit=80,h.prototype.$useWrapMode=!1,h.prototype.$wrapLimitRange={min:null,max:null},h.prototype.lineWidgets=null,h.prototype.isFullWidth=L,c.implement(h.prototype,d);var _=1,m=2,y=3,C=4,E=9,D=10,g=11,b=12;function L(S){return S<4352?!1:S>=4352&&S<=4447||S>=4515&&S<=4519||S>=4602&&S<=4607||S>=9001&&S<=9002||S>=11904&&S<=11929||S>=11931&&S<=12019||S>=12032&&S<=12245||S>=12272&&S<=12283||S>=12288&&S<=12350||S>=12353&&S<=12438||S>=12441&&S<=12543||S>=12549&&S<=12589||S>=12593&&S<=12686||S>=12688&&S<=12730||S>=12736&&S<=12771||S>=12784&&S<=12830||S>=12832&&S<=12871||S>=12880&&S<=13054||S>=13056&&S<=19903||S>=19968&&S<=42124||S>=42128&&S<=42182||S>=43360&&S<=43388||S>=44032&&S<=55203||S>=55216&&S<=55238||S>=55243&&S<=55291||S>=63744&&S<=64255||S>=65040&&S<=65049||S>=65072&&S<=65106||S>=65108&&S<=65126||S>=65128&&S<=65131||S>=65281&&S<=65376||S>=65504&&S<=65510}e("./edit_session/folding").Folding.call(h.prototype),e("./edit_session/bracket_match").BracketMatch.call(h.prototype),a.defineOptions(h.prototype,"session",{wrap:{set:function(S){if(!S||S=="off"?S=!1:S=="free"?S=!0:S=="printMargin"?S=-1:typeof S=="string"&&(S=parseInt(S,10)||!1),this.$wrap!=S)if(this.$wrap=S,!S)this.setUseWrapMode(!1);else{var T=typeof S=="number"?S:null;this.setWrapLimitRange(T,T),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(S){S=S=="auto"?this.$mode.type!="text":S!="text",S!=this.$wrapAsCode&&(this.$wrapAsCode=S,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(S){this.$useWorker=S,this.$stopWorker(),S&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(S){S=parseInt(S),S>0&&this.$tabSize!==S&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=S,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(S){this.setFoldStyle(S)},handlesSet:!0},overwrite:{set:function(S){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(S){this.doc.setNewLineMode(S)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(S){this.setMode(S)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=h});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var c=e("./lib/lang"),v=e("./lib/oop"),s=e("./range").Range,a=function(){function i(){this.$options={}}return i.prototype.set=function(r){return v.mixin(this.$options,r),this},i.prototype.getOptions=function(){return c.copyObject(this.$options)},i.prototype.setOptions=function(r){this.$options=r},i.prototype.find=function(r){var u=this.$options,l=this.$matchIterator(r,u);if(!l)return!1;var p=null;return l.forEach(function(f,o,h,_){return p=new s(f,o,h,_),o==_&&u.start&&u.start.start&&u.skipCurrent!=!1&&p.isEqual(u.start)?(p=null,!1):!0}),p},i.prototype.findAll=function(r){var u=this.$options;if(!u.needle)return[];this.$assembleRegExp(u);var l=u.range,p=l?r.getLines(l.start.row,l.end.row):r.doc.getAllLines(),f=[],o=u.re;if(u.$isMultiLine){var h=o.length,_=p.length-h,m;e:for(var y=o.offset||0;y<=_;y++){for(var C=0;C<h;C++)if(p[y+C].search(o[C])==-1)continue e;var E=p[y],D=p[y+h-1],g=E.length-E.match(o[0])[0].length,b=D.match(o[h-1])[0].length;m&&m.end.row===y&&m.end.column>g||(f.push(m=new s(y,g,y+h-1,b)),h>2&&(y=y+h-2))}}else for(var L=0;L<p.length;L++)for(var S=c.getMatchOffsets(p[L],o),C=0;C<S.length;C++){var T=S[C];f.push(new s(L,T.offset,L,T.offset+T.length))}if(l){for(var M=l.start.column,w=l.end.column,L=0,C=f.length-1;L<C&&f[L].start.column<M&&f[L].start.row==0;)L++;for(var F=l.end.row-l.start.row;L<C&&f[C].end.column>w&&f[C].end.row==F;)C--;for(f=f.slice(L,C+1),L=0,C=f.length;L<C;L++)f[L].start.row+=l.start.row,f[L].end.row+=l.start.row}return f},i.prototype.replace=function(r,u){var l=this.$options,p=this.$assembleRegExp(l);if(l.$isMultiLine)return u;if(p){var f=p.exec(r);if(!f||f[0].length!=r.length)return null;if(u=r.replace(p,u),l.preserveCase){u=u.split("");for(var o=Math.min(r.length,r.length);o--;){var h=r[o];h&&h.toLowerCase()!=h?u[o]=u[o].toUpperCase():u[o]=u[o].toLowerCase()}u=u.join("")}return u}},i.prototype.$assembleRegExp=function(r,u){if(r.needle instanceof RegExp)return r.re=r.needle;var l=r.needle;if(!r.needle)return r.re=!1;r.regExp||(l=c.escapeRegExp(l));var p=r.caseSensitive?"gm":"gmi";try{new RegExp(l,"u"),r.$supportsUnicodeFlag=!0,p+="u"}catch{r.$supportsUnicodeFlag=!1}if(r.wholeWord&&(l=d(l,r)),r.$isMultiLine=!u&&/[\n\r]/.test(l),r.$isMultiLine)return r.re=this.$assembleMultilineRegExp(l,p);try{var f=new RegExp(l,p)}catch{f=!1}return r.re=f},i.prototype.$assembleMultilineRegExp=function(r,u){for(var l=r.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),p=[],f=0;f<l.length;f++)try{p.push(new RegExp(l[f],u))}catch{return!1}return p},i.prototype.$matchIterator=function(r,u){var l=this.$assembleRegExp(u);if(!l)return!1;var p=u.backwards==!0,f=u.skipCurrent!=!1,o=l.unicode,h=u.range,_=u.start;_||(_=h?h[p?"end":"start"]:r.selection.getRange()),_.start&&(_=_[f!=p?"end":"start"]);var m=h?h.start.row:0,y=h?h.end.row:r.getLength()-1;if(p)var C=function(g){var b=_.row;if(!D(b,_.column,g)){for(b--;b>=m;b--)if(D(b,Number.MAX_VALUE,g))return;if(u.wrap!=!1){for(b=y,m=_.row;b>=m;b--)if(D(b,Number.MAX_VALUE,g))return}}};else var C=function(b){var L=_.row;if(!D(L,_.column,b)){for(L=L+1;L<=y;L++)if(D(L,0,b))return;if(u.wrap!=!1){for(L=m,y=_.row;L<=y;L++)if(D(L,0,b))return}}};if(u.$isMultiLine)var E=l.length,D=function(g,b,L){var S=p?g-E+1:g;if(!(S<0||S+E>r.getLength())){var T=r.getLine(S),M=T.search(l[0]);if(!(!p&&M<b||M===-1)){for(var w=1;w<E;w++)if(T=r.getLine(S+w),T.search(l[w])==-1)return;var F=T.match(l[E-1])[0].length;if(!(p&&F>b)&&L(S,M,S+E-1,F))return!0}}};else if(p)var D=function(b,L,S){var T=r.getLine(b),M=[],w,F=0;for(l.lastIndex=0;w=l.exec(T);){var x=w[0].length;if(F=w.index,!x){if(F>=T.length)break;l.lastIndex=F+=c.skipEmptyMatch(T,F,o)}if(w.index+x>L)break;M.push(w.index,x)}for(var R=M.length-1;R>=0;R-=2){var A=M[R-1],x=M[R];if(S(b,A,b,A+x))return!0}};else var D=function(b,L,S){var T=r.getLine(b),M,w;for(l.lastIndex=L;w=l.exec(T);){var F=w[0].length;if(M=w.index,S(b,M,b,M+F))return!0;if(!F&&(l.lastIndex=M+=c.skipEmptyMatch(T,M,o),M>=T.length))return!1}};return{forEach:C}},i}();function d(i,r){var u=c.supportsLookbehind();function l(h,_){_===void 0&&(_=!0);var m=u&&r.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return m.test(h)||r.regExp?u&&r.$supportsUnicodeFlag?_?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var p=Array.from(i),f=p[0],o=p[p.length-1];return l(f)+i+l(o,!1)}t.Search=a});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var u=function(l,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(f[h]=o[h])},u(l,p)};return function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");u(l,p);function f(){this.constructor=l}l.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)}}(),v=e("../lib/keys"),s=e("../lib/useragent"),a=v.KEY_MODS,d=function(){function u(l,p){this.$init(l,p,!1)}return u.prototype.$init=function(l,p,f){this.platform=p||(s.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(l),this.$singleCommand=f},u.prototype.addCommand=function(l){this.commands[l.name]&&this.removeCommand(l),this.commands[l.name]=l,l.bindKey&&this._buildKeyHash(l)},u.prototype.removeCommand=function(l,p){var f=l&&(typeof l=="string"?l:l.name);l=this.commands[f],p||delete this.commands[f];var o=this.commandKeyBinding;for(var h in o){var _=o[h];if(_==l)delete o[h];else if(Array.isArray(_)){var m=_.indexOf(l);m!=-1&&(_.splice(m,1),_.length==1&&(o[h]=_[0]))}}},u.prototype.bindKey=function(l,p,f){if(typeof l=="object"&&l&&(f==null&&(f=l.position),l=l[this.platform]),!!l){if(typeof p=="function")return this.addCommand({exec:p,bindKey:l,name:p.name||l});l.split("|").forEach(function(o){var h="";if(o.indexOf(" ")!=-1){var _=o.split(/\s+/);o=_.pop(),_.forEach(function(C){var E=this.parseKeys(C),D=a[E.hashId]+E.key;h+=(h?" ":"")+D,this._addCommandToBinding(h,"chainKeys")},this),h+=" "}var m=this.parseKeys(o),y=a[m.hashId]+m.key;this._addCommandToBinding(h+y,p,f)},this)}},u.prototype._addCommandToBinding=function(l,p,f){var o=this.commandKeyBinding,h;if(!p)delete o[l];else if(!o[l]||this.$singleCommand)o[l]=p;else{Array.isArray(o[l])?(h=o[l].indexOf(p))!=-1&&o[l].splice(h,1):o[l]=[o[l]],typeof f!="number"&&(f=i(p));var _=o[l];for(h=0;h<_.length;h++){var m=_[h],y=i(m);if(y>f)break}_.splice(h,0,p)}},u.prototype.addCommands=function(l){l&&Object.keys(l).forEach(function(p){var f=l[p];if(f){if(typeof f=="string")return this.bindKey(f,p);typeof f=="function"&&(f={exec:f}),typeof f=="object"&&(f.name||(f.name=p),this.addCommand(f))}},this)},u.prototype.removeCommands=function(l){Object.keys(l).forEach(function(p){this.removeCommand(l[p])},this)},u.prototype.bindKeys=function(l){Object.keys(l).forEach(function(p){this.bindKey(p,l[p])},this)},u.prototype._buildKeyHash=function(l){this.bindKey(l.bindKey,l)},u.prototype.parseKeys=function(l){var p=l.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),f=p.pop(),o=v[f];if(v.FUNCTION_KEYS[o])f=v.FUNCTION_KEYS[o].toLowerCase();else if(p.length){if(p.length==1&&p[0]=="shift")return{key:f.toUpperCase(),hashId:-1}}else return{key:f,hashId:-1};for(var h=0,_=p.length;_--;){var m=v.KEY_MODS[p[_]];if(m==null)return typeof console<"u"&&console.error("invalid modifier "+p[_]+" in "+l),!1;h|=m}return{key:f,hashId:h}},u.prototype.findKeyCommand=function(l,p){var f=a[l]+p;return this.commandKeyBinding[f]},u.prototype.handleKeyboard=function(l,p,f,o){if(!(o<0)){var h=a[p]+f,_=this.commandKeyBinding[h];return l.$keyChain&&(l.$keyChain+=" "+h,_=this.commandKeyBinding[l.$keyChain]||_),_&&(_=="chainKeys"||_[_.length-1]=="chainKeys")?(l.$keyChain=l.$keyChain||h,{command:"null"}):(l.$keyChain&&((!p||p==4)&&f.length==1?l.$keyChain=l.$keyChain.slice(0,-h.length-1):(p==-1||o>0)&&(l.$keyChain="")),{command:_})}},u.prototype.getStatusText=function(l,p){return p.$keyChain||""},u}();function i(u){return typeof u=="object"&&u.bindKey&&u.bindKey.position||(u.isDefault?-100:0)}var r=function(u){c(l,u);function l(p,f){var o=u.call(this,p,f)||this;return o.$singleCommand=!0,o}return l}(d);r.call=function(u,l,p){d.prototype.$init.call(u,l,p,!0)},d.call=function(u,l,p){d.prototype.$init.call(u,l,p,!1)},t.HashHandler=r,t.MultiHashHandler=d});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var i=function(r,u){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var f in p)Object.prototype.hasOwnProperty.call(p,f)&&(l[f]=p[f])},i(r,u)};return function(r,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");i(r,u);function l(){this.constructor=r}r.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}(),v=e("../lib/oop"),s=e("../keyboard/hash_handler").MultiHashHandler,a=e("../lib/event_emitter").EventEmitter,d=function(i){c(r,i);function r(u,l){var p=i.call(this,l,u)||this;return p.byName=p.commands,p.setDefaultHandler("exec",function(f){return f.args?f.command.exec(f.editor,f.args,f.event,!1):f.command.exec(f.editor,{},f.event,!0)}),p}return r.prototype.exec=function(u,l,p){if(Array.isArray(u)){for(var f=u.length;f--;)if(this.exec(u[f],l,p))return!0;return!1}if(typeof u=="string"&&(u=this.commands[u]),!u||l&&l.$readOnly&&!u.readOnly||this.$checkCommandState!=!1&&u.isAvailable&&!u.isAvailable(l))return!1;var o={editor:l,command:u,args:p};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),o.returnValue!==!1},r.prototype.toggleRecording=function(u){if(!this.$inReplay)return u&&u._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(l){this.macro.push([l.command,l.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},r.prototype.replay=function(u){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(u);try{this.$inReplay=!0,this.macro.forEach(function(l){typeof l=="string"?this.exec(l,u):this.exec(l[0],u,l[1])},this)}finally{this.$inReplay=!1}}},r.prototype.trimMacro=function(u){return u.map(function(l){return typeof l[0]!="string"&&(l[0]=l[0].name),l[1]||(l=l[0]),l})},r}(s);v.implement(d.prototype,a),t.CommandManager=d});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var c=e("../lib/lang"),v=e("../config"),s=e("../range").Range;function a(i,r){return{win:i,mac:r}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:a("Ctrl-,","Command-,"),exec:function(i){v.loadModule("ace/ext/settings_menu",function(r){r.init(i),i.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:a("Alt-E","F4"),exec:function(i){v.loadModule("ace/ext/error_marker",function(r){r.showErrorMarker(i,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(i){v.loadModule("ace/ext/error_marker",function(r){r.showErrorMarker(i,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(i){i.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(i){i.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(i,r){typeof r=="number"&&!isNaN(r)&&i.gotoLine(r),i.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(i){i.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(i){i.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:a("F2","F2"),exec:function(i){i.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:a("Alt-F2","Alt-F2"),exec:function(i){i.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(i){i.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(i){i.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(i){i.session.foldAll(),i.session.unfold(i.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(i){i.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(i){i.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(i){i.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(i){i.selection.isEmpty()?i.selection.selectWord():i.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(i){i.selection.isEmpty()?i.selection.selectWord():i.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(i){v.loadModule("ace/ext/searchbox",function(r){r.Search(i)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(i){i.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(i){i.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(i){i.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(i){i.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(i,r){i.navigateUp(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(i){i.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(i){i.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(i){i.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(i,r){i.navigateDown(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(i){i.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(i){i.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(i){i.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(i){i.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(i){i.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(i,r){i.navigateLeft(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(i){i.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(i){i.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(i){i.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(i){i.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(i){i.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(i,r){i.navigateRight(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(i){i.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(i){i.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(i){i.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(i){i.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(i){i.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(i){i.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(i){i.renderer.scrollBy(0,-2*i.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(i){i.renderer.scrollBy(0,2*i.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(i){i.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(i){i.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(i){i.commands.toggleRecording(i)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(i){i.commands.replay(i)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(i){i.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(i){i.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(i){i.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(i){},readOnly:!0},{name:"cut",description:"Cut",exec:function(i){var r=i.$copyWithEmptySelection&&i.selection.isEmpty(),u=r?i.selection.getLineRange():i.selection.getRange();i._emit("cut",u),u.isEmpty()||i.session.remove(u),i.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(i,r){i.$handlePaste(r)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(i){i.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(i){i.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(i){i.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(i){i.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(i){i.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(i){i.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(i){i.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(i){v.loadModule("ace/ext/searchbox",function(r){r.Search(i,!0)})}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(i){i.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(i){i.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(i){i.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(i){i.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(i){i.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(i){i.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(i){i.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(i){i.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(i){if(i.selection.isEmpty())i.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(i){i.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(i){i.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(i){var r=i.selection.getRange();r.start.column=0,i.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(i){var r=i.selection.getRange();r.end.column=Number.MAX_VALUE,i.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(i){i.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(i){i.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(i){i.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(i){i.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(i){i.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(i){i.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(i,r){i.insert(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(i,r){i.insert(c.stringRepeat(r.text||"",r.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(i){i.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(i){i.transposeLetters()},multiSelectAction:function(i){i.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(i){i.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(i){i.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:a(null,null),exec:function(i){i.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(i){var r=i.selection.getRange();r.start.column=r.end.column=0,r.end.row++,i.selection.setRange(r,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:a("Ctrl+F3","F3"),exec:function(i){i.openLink()}},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(i){for(var r=i.selection.isBackwards(),u=r?i.selection.getSelectionLead():i.selection.getSelectionAnchor(),l=r?i.selection.getSelectionAnchor():i.selection.getSelectionLead(),p=i.session.doc.getLine(u.row).length,f=i.session.doc.getTextRange(i.selection.getRange()),o=f.replace(/\n\s*/," ").length,h=i.session.doc.getLine(u.row),_=u.row+1;_<=l.row+1;_++){var m=c.stringTrimLeft(c.stringTrimRight(i.session.doc.getLine(_)));m.length!==0&&(m=" "+m),h+=m}l.row+1<i.session.doc.getLength()-1&&(h+=i.session.doc.getNewLineCharacter()),i.clearSelection(),i.session.doc.replace(new s(u.row,0,l.row+2,0),h),o>0?(i.selection.moveCursorTo(u.row,u.column),i.selection.selectTo(u.row,u.column+o)):(p=i.session.doc.getLine(u.row).length>p?p+1:p,i.selection.moveCursorTo(u.row,p))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(i){var r=i.session.doc.getLength()-1,u=i.session.doc.getLine(r).length,l=i.selection.rangeList.ranges,p=[];l.length<1&&(l=[i.selection.getRange()]);for(var f=0;f<l.length;f++)f==l.length-1&&(l[f].end.row===r&&l[f].end.column===u||p.push(new s(l[f].end.row,l[f].end.column,r,u))),f===0?l[f].start.row===0&&l[f].start.column===0||p.push(new s(0,0,l[f].start.row,l[f].start.column)):p.push(new s(l[f-1].end.row,l[f-1].end.column,l[f].start.row,l[f].start.column));i.exitMultiSelectMode(),i.clearSelection();for(var f=0;f<p.length;f++)i.selection.addRange(p[f],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(i){i.selection.clearSelection(),i.navigateLineEnd(),i.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(i){i.selection.clearSelection();var r=i.getCursorPosition();i.selection.moveTo(r.row-1,Number.MAX_VALUE),i.insert(`
`),r.row===0&&i.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(i){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),i.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:a("F1","F1"),exec:function(i){i.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(i){i.prompt({$type:"modes"})},readOnly:!0}];for(var d=1;d<9;d++)t.commands.push({name:"foldToLevel"+d,description:"Fold To Level "+d,level:d,exec:function(i){i.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("./lib/dom"),v=function(){function s(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return s.prototype.getRowLength=function(a){var d;return this.lineWidgets?d=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:d=0,!this.$useWrapMode||!this.$wrapData[a]?1+d:this.$wrapData[a].length+1+d},s.prototype.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(d){d&&d.rowCount&&!d.hidden&&(a+=d.rowCount)}),a},s.prototype.$onChangeEditor=function(a){this.attach(a.editor)},s.prototype.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,a&&(a.widgetManager=this,a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets)))},s.prototype.detach=function(a){var d=this.editor;if(d){this.editor=null,d.widgetManager=null,d.renderer.off("beforeRender",this.measureWidgets),d.renderer.off("afterRender",this.renderWidgets);var i=this.session.lineWidgets;i&&i.forEach(function(r){r&&r.el&&r.el.parentNode&&(r._inDocument=!1,r.el.parentNode.removeChild(r.el))})}},s.prototype.updateOnFold=function(a,d){var i=d.lineWidgets;if(!(!i||!a.action)){for(var r=a.data,u=r.start.row,l=r.end.row,p=a.action=="add",f=u+1;f<l;f++)i[f]&&(i[f].hidden=p);i[l]&&(p?i[u]?i[l].hidden=p:i[u]=i[l]:(i[u]==i[l]&&(i[u]=void 0),i[l].hidden=p))}},s.prototype.updateOnChange=function(a){var d=this.session.lineWidgets;if(d){var i=a.start.row,r=a.end.row-i;if(r!==0)if(a.action=="remove"){var u=d.splice(i+1,r);!d[i]&&u[u.length-1]&&(d[i]=u.pop()),u.forEach(function(p){p&&this.removeLineWidget(p)},this),this.$updateRows()}else{var l=new Array(r);d[i]&&d[i].column!=null&&a.start.column>d[i].column&&i++,l.unshift(i,0),d.splice.apply(d,l),this.$updateRows()}}},s.prototype.$updateRows=function(){var a=this.session.lineWidgets;if(a){var d=!0;a.forEach(function(i,r){if(i)for(d=!1,i.row=r;i.$oldWidget;)i.$oldWidget.row=r,i=i.$oldWidget}),d&&(this.session.lineWidgets=null)}},s.prototype.$registerLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var d=this.session.lineWidgets[a.row];return d&&(a.$oldWidget=d,d.el&&d.el.parentNode&&(d.el.parentNode.removeChild(d.el),d._inDocument=!1)),this.session.lineWidgets[a.row]=a,a},s.prototype.addLineWidget=function(a){if(this.$registerLineWidget(a),a.session=this.session,!this.editor)return a;var d=this.editor.renderer;a.html&&!a.el&&(a.el=c.createElement("div"),a.el.innerHTML=a.html),a.text&&!a.el&&(a.el=c.createElement("div"),a.el.textContent=a.text),a.el&&(c.addCssClass(a.el,"ace_lineWidgetContainer"),a.className&&c.addCssClass(a.el,a.className),a.el.style.position="absolute",a.el.style.zIndex="5",d.container.appendChild(a.el),a._inDocument=!0,a.coverGutter||(a.el.style.zIndex="3"),a.pixelHeight==null&&(a.pixelHeight=a.el.offsetHeight)),a.rowCount==null&&(a.rowCount=a.pixelHeight/d.layerConfig.lineHeight);var i=this.session.getFoldAt(a.row,0);if(a.$fold=i,i){var r=this.session.lineWidgets;a.row==i.end.row&&!r[i.start.row]?r[i.start.row]=a:a.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,d),this.onWidgetChanged(a),a},s.prototype.removeLineWidget=function(a){if(a._inDocument=!1,a.session=null,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch{}if(this.session.lineWidgets){var d=this.session.lineWidgets[a.row];if(d==a)this.session.lineWidgets[a.row]=a.$oldWidget,a.$oldWidget&&this.onWidgetChanged(a.$oldWidget);else for(;d;){if(d.$oldWidget==a){d.$oldWidget=a.$oldWidget;break}d=d.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},s.prototype.getWidgetsAtRow=function(a){for(var d=this.session.lineWidgets,i=d&&d[a],r=[];i;)r.push(i),i=i.$oldWidget;return r},s.prototype.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},s.prototype.measureWidgets=function(a,d){var i=this.session._changedWidgets,r=d.layerConfig;if(!(!i||!i.length)){for(var u=1/0,l=0;l<i.length;l++){var p=i[l];if(!(!p||!p.el)&&p.session==this.session){if(!p._inDocument){if(this.session.lineWidgets[p.row]!=p)continue;p._inDocument=!0,d.container.appendChild(p.el)}p.h=p.el.offsetHeight,p.fixedWidth||(p.w=p.el.offsetWidth,p.screenWidth=Math.ceil(p.w/r.characterWidth));var f=p.h/r.lineHeight;p.coverLine&&(f-=this.session.getRowLineCount(p.row),f<0&&(f=0)),p.rowCount!=f&&(p.rowCount=f,p.row<u&&(u=p.row))}}u!=1/0&&(this.session._emit("changeFold",{data:{start:{row:u}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},s.prototype.renderWidgets=function(a,d){var i=d.layerConfig,r=this.session.lineWidgets;if(r){for(var u=Math.min(this.firstRow,i.firstRow),l=Math.max(this.lastRow,i.lastRow,r.length);u>0&&!r[u];)u--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,d.$cursorLayer.config=i;for(var p=u;p<=l;p++){var f=r[p];if(!(!f||!f.el)){if(f.hidden){f.el.style.top=-100-(f.pixelHeight||0)+"px";continue}f._inDocument||(f._inDocument=!0,d.container.appendChild(f.el));var o=d.$cursorLayer.getPixelPosition({row:p,column:0},!0).top;f.coverLine||(o+=i.lineHeight*this.session.getRowLineCount(f.row)),f.el.style.top=o-i.offset+"px";var h=f.coverGutter?0:d.gutterWidth;f.fixedWidth||(h-=d.scrollLeft),f.el.style.left=h+"px",f.fullWidth&&f.screenWidth&&(f.el.style.minWidth=i.width+2*i.padding+"px"),f.fixedWidth?f.el.style.right=d.scrollBar.getWidth()+"px":f.el.style.right=""}}}},s}();t.LineWidgets=v});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,n){"use strict";var c=e("../lib/keys"),v=e("../mouse/default_gutter_handler").GutterTooltip,s=function(){function d(i){this.editor=i,this.gutterLayer=i.renderer.$gutterLayer,this.element=i.renderer.$gutter,this.lines=i.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new v(this.editor)}return d.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},d.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},d.prototype.$onGutterKeyDown=function(i){if(this.annotationTooltip.isOpen){i.preventDefault(),i.keyCode===c.escape&&this.annotationTooltip.hideTooltip();return}if(i.target===this.element){if(i.keyCode!=c.enter)return;i.preventDefault();var r=this.editor.getCursorPosition().row;this.editor.isRowVisible(r)||this.editor.scrollToLine(r,!0,!0),setTimeout(function(){var u=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),l=this.$findNearestFoldWidget(u),p=this.$findNearestAnnotation(u);if(!(l===null&&p===null)){if(l===null&&p!==null){this.activeRowIndex=p,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(l!==null&&p===null){this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(p-u)<Math.abs(l-u)){this.activeRowIndex=p,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(i),setTimeout(function(){this.editor._signal("gutterkeydown",new a(i,this))}.bind(this),10)},d.prototype.$handleGutterKeyboardInteraction=function(i){if(i.keyCode===c.tab){i.preventDefault();return}if(i.keyCode===c.escape){i.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(i.keyCode===c.up){switch(i.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(i.keyCode===c.down){switch(i.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(i.keyCode===c.left){i.preventDefault(),this.$switchLane("annotation");return}if(i.keyCode===c.right){i.preventDefault(),this.$switchLane("fold");return}if(i.keyCode===c.enter||i.keyCode===c.space){switch(i.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var r=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),i),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==r&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(r),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var u=this.lines.cells[this.activeRowIndex].element.childNodes[2],l=u.getBoundingClientRect(),p=this.annotationTooltip.getElement().style;p.left=l.right+"px",p.top=l.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},d.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},d.prototype.$isFoldWidgetVisible=function(i){var r=this.editor.isRowFullyVisible(this.$rowIndexToRow(i)),u=this.$getFoldWidget(i).style.display!=="none";return r&&u},d.prototype.$isAnnotationVisible=function(i){var r=this.editor.isRowFullyVisible(this.$rowIndexToRow(i)),u=this.$getAnnotation(i).style.display!=="none";return r&&u},d.prototype.$getFoldWidget=function(i){var r=this.lines.get(i),u=r.element;return u.childNodes[1]},d.prototype.$getAnnotation=function(i){var r=this.lines.get(i),u=r.element;return u.childNodes[2]},d.prototype.$findNearestFoldWidget=function(i){if(this.$isFoldWidgetVisible(i))return i;for(var r=0;i-r>0||i+r<this.lines.getLength()-1;){if(r++,i-r>=0&&this.$isFoldWidgetVisible(i-r))return i-r;if(i+r<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(i+r))return i+r}return null},d.prototype.$findNearestAnnotation=function(i){if(this.$isAnnotationVisible(i))return i;for(var r=0;i-r>0||i+r<this.lines.getLength()-1;){if(r++,i-r>=0&&this.$isAnnotationVisible(i-r))return i-r;if(i+r<=this.lines.getLength()-1&&this.$isAnnotationVisible(i+r))return i+r}return null},d.prototype.$focusFoldWidget=function(i){if(i!=null){var r=this.$getFoldWidget(i);r.classList.add(this.editor.renderer.keyboardFocusClassName),r.focus()}},d.prototype.$focusAnnotation=function(i){if(i!=null){var r=this.$getAnnotation(i);r.classList.add(this.editor.renderer.keyboardFocusClassName),r.focus()}},d.prototype.$blurFoldWidget=function(i){var r=this.$getFoldWidget(i);r.classList.remove(this.editor.renderer.keyboardFocusClassName),r.blur()},d.prototype.$blurAnnotation=function(i){var r=this.$getAnnotation(i);r.classList.remove(this.editor.renderer.keyboardFocusClassName),r.blur()},d.prototype.$moveFoldWidgetUp=function(){for(var i=this.activeRowIndex;i>0;)if(i--,this.$isFoldWidgetVisible(i)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);return}},d.prototype.$moveFoldWidgetDown=function(){for(var i=this.activeRowIndex;i<this.lines.getLength()-1;)if(i++,this.$isFoldWidgetVisible(i)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);return}},d.prototype.$moveAnnotationUp=function(){for(var i=this.activeRowIndex;i>0;)if(i--,this.$isAnnotationVisible(i)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);return}},d.prototype.$moveAnnotationDown=function(){for(var i=this.activeRowIndex;i<this.lines.getLength()-1;)if(i++,this.$isAnnotationVisible(i)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);return}},d.prototype.$switchLane=function(i){switch(i){case"annotation":if(this.activeLane==="annotation")break;var r=this.$findNearestAnnotation(this.activeRowIndex);if(r==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=r,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var u=this.$findNearestFoldWidget(this.activeRowIndex);if(u==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);break}},d.prototype.$rowIndexToRow=function(i){var r=this.lines.get(i);return r?r.row:null},d.prototype.$rowToRowIndex=function(i){for(var r=0;r<this.lines.getLength();r++){var u=this.lines.get(r);if(u.row==i)return r}return null},d}();t.GutterKeyboardHandler=s;var a=function(){function d(i,r){this.gutterKeyboardHandler=r,this.domEvent=i}return d.prototype.getKey=function(){return c.keyCodeToString(this.domEvent.keyCode)},d.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},d.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},d.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},d}();t.GutterKeyboardEvent=a});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var c=this&&this.__values||function(M){var w=typeof Symbol=="function"&&Symbol.iterator,F=w&&M[w],x=0;if(F)return F.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&x>=M.length&&(M=void 0),{value:M&&M[x++],done:!M}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/lang"),d=e("./lib/useragent"),i=e("./keyboard/textinput").TextInput,r=e("./mouse/mouse_handler").MouseHandler,u=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,p=e("./edit_session").EditSession,f=e("./search").Search,o=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,_=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,y=e("./config"),C=e("./token_iterator").TokenIterator,E=e("./line_widgets").LineWidgets,D=e("./keyboard/gutter_handler").GutterKeyboardHandler,g=e("./config").nls,b=e("./clipboard"),L=e("./lib/keys"),S=function(){function M(w,F,x){this.session,this.$toDestroy=[];var R=w.getContainerElement();this.container=R,this.renderer=w,this.id="editor"+ ++M.$uid,this.commands=new _(d.isMac?"mac":"win",m),typeof document=="object"&&(this.textInput=new i(w.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new r(this),new u(this)),this.keyBinding=new l(this),this.$search=new f().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=a.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(A,I){I._$emitInputEvent.schedule(31)}),this.setSession(F||x&&x.session||new p("")),y.resetOptions(this),x&&this.setOptions(x),y._signal("editor",this)}return M.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=a.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},M.prototype.startOperation=function(w){if(this.curOp){if(!w||this.curOp.command)return;this.prevOp=this.curOp}w||(this.previousCommand=null,w={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:w.command||{},args:w.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},M.prototype.endOperation=function(w){if(this.curOp&&this.session){if(w&&w.returnValue===!1||!this.session)return this.curOp=null;if(w==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var F=this.curOp.command,x=F&&F.scrollIntoView;if(x){switch(x){case"center-animate":x="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),A=this.renderer.layerConfig;(R.start.row>=A.lastRow||R.end.row<=A.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}x=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},M.prototype.$historyTracker=function(w){if(this.$mergeUndoDeltas){var F=this.prevOp,x=this.$mergeableCommands,R=F.command&&w.command.name==F.command.name;if(w.command.name=="insertstring"){var A=w.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(A)||/\s/.test(F.args)),this.mergeNextCommand=!0}else R=R&&x.indexOf(w.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:x.indexOf(w.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},M.prototype.setKeyboardHandler=function(w,F){if(w&&typeof w=="string"&&w!="ace"){this.$keybindingId=w;var x=this;y.loadModule(["keybinding",w],function(R){x.$keybindingId==w&&x.keyBinding.setKeyboardHandler(R&&R.handler),F&&F()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(w),F&&F()},M.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},M.prototype.setSession=function(w){if(this.session!=w){this.curOp&&this.endOperation(),this.curOp={};var F=this.session;if(F){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var x=this.session.getSelection();x.off("changeCursor",this.$onCursorChange),x.off("changeSelection",this.$onSelectionChange)}this.session=w,w?(this.$onDocumentChange=this.onDocumentChange.bind(this),w.on("change",this.$onDocumentChange),this.renderer.setSession(w),this.$onChangeMode=this.onChangeMode.bind(this),w.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),w.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),w.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),w.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),w.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),w.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=w.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(w)),this._signal("changeSession",{session:w,oldSession:F}),this.curOp=null,F&&F._signal("changeEditor",{oldEditor:this}),w&&w._signal("changeEditor",{editor:this}),w&&!w.destroyed&&w.bgTokenizer.scheduleStart()}},M.prototype.getSession=function(){return this.session},M.prototype.setValue=function(w,F){return this.session.doc.setValue(w),F?F==1?this.navigateFileEnd():F==-1&&this.navigateFileStart():this.selectAll(),w},M.prototype.getValue=function(){return this.session.getValue()},M.prototype.getSelection=function(){return this.selection},M.prototype.resize=function(w){this.renderer.onResize(w)},M.prototype.setTheme=function(w,F){this.renderer.setTheme(w,F)},M.prototype.getTheme=function(){return this.renderer.getTheme()},M.prototype.setStyle=function(w){this.renderer.setStyle(w)},M.prototype.unsetStyle=function(w){this.renderer.unsetStyle(w)},M.prototype.getFontSize=function(){return this.getOption("fontSize")||s.computedStyle(this.container).fontSize},M.prototype.setFontSize=function(w){this.setOption("fontSize",w)},M.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var w=this;this.$highlightPending=!0,setTimeout(function(){w.$highlightPending=!1;var F=w.session;if(!(!F||F.destroyed)){F.$bracketHighlight&&(F.$bracketHighlight.markerIds.forEach(function(q){F.removeMarker(q)}),F.$bracketHighlight=null);var x=w.getCursorPosition(),R=w.getKeyboardHandler(),A=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(w),I=F.getMatchingBracketRanges(x,A);if(!I){var $=new C(F,x.row,x.column),k=$.getCurrentToken();if(k&&/\b(?:tag-open|tag-name)/.test(k.type)){var H=F.getMatchingTags(x);H&&(I=[H.openTagName,H.closeTagName])}}if(!I&&F.$mode.getMatching&&(I=F.$mode.getMatching(w.session)),!I){w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide();return}var U="ace_bracket";Array.isArray(I)?I.length==1&&(U="ace_error_bracket"):I=[I],I.length==2&&(o.comparePoints(I[0].end,I[1].start)==0?I=[o.fromPoints(I[0].start,I[1].end)]:o.comparePoints(I[0].start,I[1].end)==0&&(I=[o.fromPoints(I[1].start,I[0].end)])),F.$bracketHighlight={ranges:I,markerIds:I.map(function(q){return F.addMarker(q,U,"text")})},w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide()}},50)}},M.prototype.focus=function(){this.textInput.focus()},M.prototype.isFocused=function(){return this.textInput.isFocused()},M.prototype.blur=function(){this.textInput.blur()},M.prototype.onFocus=function(w){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",w))},M.prototype.onBlur=function(w){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",w))},M.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},M.prototype.onDocumentChange=function(w){var F=this.session.$useWrapMode,x=w.start.row==w.end.row?w.end.row:1/0;this.renderer.updateLines(w.start.row,x,F),this._signal("change",w),this.$cursorChange()},M.prototype.onTokenizerUpdate=function(w){var F=w.data;this.renderer.updateLines(F.first,F.last)},M.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},M.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},M.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},M.prototype.$updateHighlightActiveLine=function(){var w=this.getSession(),F;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(F=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(F=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(F=!1)),w.$highlightLineMarker&&!F)w.removeMarker(w.$highlightLineMarker.id),w.$highlightLineMarker=null;else if(!w.$highlightLineMarker&&F){var x=new o(F.row,F.column,F.row,1/0);x.id=w.addMarker(x,"ace_active-line","screenLine"),w.$highlightLineMarker=x}else F&&(w.$highlightLineMarker.start.row=F.row,w.$highlightLineMarker.end.row=F.row,w.$highlightLineMarker.start.column=F.column,w._signal("changeBackMarker"))},M.prototype.onSelectionChange=function(w){var F=this.session;if(F.$selectionMarker&&F.removeMarker(F.$selectionMarker),F.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var x=this.selection.getRange(),R=this.getSelectionStyle();F.$selectionMarker=F.addMarker(x,"ace_selection",R)}var A=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(A),this._signal("changeSelection")},M.prototype.$getSelectionHighLightRegexp=function(){var w=this.session,F=this.getSelectionRange();if(!(F.isEmpty()||F.isMultiLine())){var x=F.start.column,R=F.end.column,A=w.getLine(F.start.row),I=A.substring(x,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var $=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),k=A.substring(x-1,R+1);if($.test(k))return $}}},M.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},M.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},M.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},M.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},M.prototype.onChangeMode=function(w){this.renderer.updateText(),this._emit("changeMode",w)},M.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},M.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},M.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},M.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},M.prototype.getCopyText=function(){var w=this.getSelectedText(),F=this.session.doc.getNewLineCharacter(),x=!1;if(!w&&this.$copyWithEmptySelection){x=!0;for(var R=this.selection.getAllRanges(),A=0;A<R.length;A++){var I=R[A];A&&R[A-1].start.row==I.start.row||(w+=this.session.getLine(I.start.row)+F)}}var $={text:w};return this._signal("copy",$),b.lineMode=x?$.text:!1,$.text},M.prototype.onCopy=function(){this.commands.exec("copy",this)},M.prototype.onCut=function(){this.commands.exec("cut",this)},M.prototype.onPaste=function(w,F){var x={text:w,event:F};this.commands.exec("paste",this,x)},M.prototype.$handlePaste=function(w){typeof w=="string"&&(w={text:w}),this._signal("paste",w);var F=w.text,x=F===b.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)x?R.insert({row:this.selection.lead.row,column:0},F):this.insert(F);else if(x)this.selection.rangeList.ranges.forEach(function(U){R.insert({row:U.start.row,column:0},F)});else{var A=F.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,$=A.length==2&&(!A[0]||!A[1]);if(A.length!=I.length||$)return this.commands.exec("insertstring",this,F);for(var k=I.length;k--;){var H=I[k];H.isEmpty()||R.remove(H),R.insert(H.start,A[k])}}},M.prototype.execCommand=function(w,F){return this.commands.exec(w,this,F)},M.prototype.insert=function(w,F){var x=this.session,R=x.getMode(),A=this.getCursorPosition();if(this.getBehavioursEnabled()&&!F){var I=R.transformAction(x.getState(A.row),"insertion",this,x,w);I&&(w!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),w=I.text)}if(w=="	"&&(w=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&w.indexOf(`
`)==-1){var $=o.fromPoints(A,A);$.end.column+=w.length,this.session.remove($)}}else{var $=this.getSelectionRange();A=this.session.remove($),this.clearSelection()}if(w==`
`||w==`\r
`){var q=x.getLine(A.row);if(A.column>q.search(/\S|$/)){var k=q.substr(A.column).search(/\S|$/);x.doc.removeInLine(A.row,A.column,A.column+k)}}this.clearSelection();var H=A.column,U=x.getState(A.row),q=x.getLine(A.row),N=R.checkOutdent(U,q,w);if(x.insert(A,w),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new o(A.row,H+I.selection[0],A.row,H+I.selection[1])):this.selection.setSelectionRange(new o(A.row+I.selection[0],I.selection[1],A.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(x.getDocument().isNewLine(w)){var K=R.getNextLineIndent(U,q.slice(0,A.column),x.getTabString());x.insert({row:A.row+1,column:0},K)}N&&R.autoOutdent(U,x,A.row)}},M.prototype.autoIndent=function(){var w=this.session,F=w.getMode(),x,R;if(this.selection.isEmpty())x=0,R=w.doc.getLength()-1;else{var A=this.getSelectionRange();x=A.start.row,R=A.end.row}for(var I="",$="",k="",H,U,q,N=w.getTabString(),K=x;K<=R;K++)K>0&&(I=w.getState(K-1),$=w.getLine(K-1),k=F.getNextLineIndent(I,$,N)),H=w.getLine(K),U=F.$getIndent(H),k!==U&&(U.length>0&&(q=new o(K,0,K,U.length),w.remove(q)),k.length>0&&w.insert({row:K,column:0},k)),F.autoOutdent(I,w,K)},M.prototype.onTextInput=function(w,F){if(!F)return this.keyBinding.onTextInput(w);this.startOperation({command:{name:"insertstring"}});var x=this.applyComposition.bind(this,w,F);this.selection.rangeCount?this.forEachSelection(x):x(),this.endOperation()},M.prototype.applyComposition=function(w,F){if(F.extendLeft||F.extendRight){var x=this.selection.getRange();x.start.column-=F.extendLeft,x.end.column+=F.extendRight,x.start.column<0&&(x.start.row--,x.start.column+=this.session.getLine(x.start.row).length+1),this.selection.setRange(x),!w&&!x.isEmpty()&&this.remove()}if((w||!this.selection.isEmpty())&&this.insert(w,!0),F.restoreStart||F.restoreEnd){var x=this.selection.getRange();x.start.column-=F.restoreStart,x.end.column-=F.restoreEnd,this.selection.setRange(x)}},M.prototype.onCommandKey=function(w,F,x){return this.keyBinding.onCommandKey(w,F,x)},M.prototype.setOverwrite=function(w){this.session.setOverwrite(w)},M.prototype.getOverwrite=function(){return this.session.getOverwrite()},M.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},M.prototype.setScrollSpeed=function(w){this.setOption("scrollSpeed",w)},M.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},M.prototype.setDragDelay=function(w){this.setOption("dragDelay",w)},M.prototype.getDragDelay=function(){return this.getOption("dragDelay")},M.prototype.setSelectionStyle=function(w){this.setOption("selectionStyle",w)},M.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},M.prototype.setHighlightActiveLine=function(w){this.setOption("highlightActiveLine",w)},M.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},M.prototype.setHighlightGutterLine=function(w){this.setOption("highlightGutterLine",w)},M.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},M.prototype.setHighlightSelectedWord=function(w){this.setOption("highlightSelectedWord",w)},M.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},M.prototype.setAnimatedScroll=function(w){this.renderer.setAnimatedScroll(w)},M.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},M.prototype.setShowInvisibles=function(w){this.renderer.setShowInvisibles(w)},M.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},M.prototype.setDisplayIndentGuides=function(w){this.renderer.setDisplayIndentGuides(w)},M.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},M.prototype.setHighlightIndentGuides=function(w){this.renderer.setHighlightIndentGuides(w)},M.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},M.prototype.setShowPrintMargin=function(w){this.renderer.setShowPrintMargin(w)},M.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},M.prototype.setPrintMarginColumn=function(w){this.renderer.setPrintMarginColumn(w)},M.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},M.prototype.setReadOnly=function(w){this.setOption("readOnly",w)},M.prototype.getReadOnly=function(){return this.getOption("readOnly")},M.prototype.setBehavioursEnabled=function(w){this.setOption("behavioursEnabled",w)},M.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},M.prototype.setWrapBehavioursEnabled=function(w){this.setOption("wrapBehavioursEnabled",w)},M.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},M.prototype.setShowFoldWidgets=function(w){this.setOption("showFoldWidgets",w)},M.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},M.prototype.setFadeFoldWidgets=function(w){this.setOption("fadeFoldWidgets",w)},M.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},M.prototype.remove=function(w){this.selection.isEmpty()&&(w=="left"?this.selection.selectLeft():this.selection.selectRight());var F=this.getSelectionRange();if(this.getBehavioursEnabled()){var x=this.session,R=x.getState(F.start.row),A=x.getMode().transformAction(R,"deletion",this,x,F);if(F.end.column===0){var I=x.getTextRange(F);if(I[I.length-1]==`
`){var $=x.getLine(F.end.row);/^\s+$/.test($)&&(F.end.column=$.length)}}A&&(F=A)}this.session.remove(F),this.clearSelection()},M.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var w=this.getSelectionRange();w.start.column==w.end.column&&w.start.row==w.end.row&&(w.end.column=0,w.end.row++),this.session.remove(w),this.clearSelection()},M.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var w=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(w)},M.prototype.setGhostText=function(w,F){this.session.widgetManager||(this.session.widgetManager=new E(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(w,F)},M.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},M.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var w=this.getCursorPosition(),F=w.column;if(F!==0){var x=this.session.getLine(w.row),R,A;F<x.length?(R=x.charAt(F)+x.charAt(F-1),A=new o(w.row,F-1,w.row,F+1)):(R=x.charAt(F-1)+x.charAt(F-2),A=new o(w.row,F-2,w.row,F)),this.session.replace(A,R),this.session.selection.moveToPosition(A.end)}}},M.prototype.toLowerCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var F=this.getSelectionRange(),x=this.session.getTextRange(F);this.session.replace(F,x.toLowerCase()),this.selection.setSelectionRange(w)},M.prototype.toUpperCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var F=this.getSelectionRange(),x=this.session.getTextRange(F);this.session.replace(F,x.toUpperCase()),this.selection.setSelectionRange(w)},M.prototype.indent=function(){var w=this.session,F=this.getSelectionRange();if(F.start.row<F.end.row){var x=this.$getSelectedRows();w.indentRows(x.first,x.last,"	");return}else if(F.start.column<F.end.column){var R=w.getTextRange(F);if(!/^\s+$/.test(R)){var x=this.$getSelectedRows();w.indentRows(x.first,x.last,"	");return}}var A=w.getLine(F.start.row),I=F.start,$=w.getTabSize(),k=w.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var H=$-k%$,U=a.stringRepeat(" ",H);else{for(var H=k%$;A[F.start.column-1]==" "&&H;)F.start.column--,H--;this.selection.setSelectionRange(F),U="	"}return this.insert(U)},M.prototype.blockIndent=function(){var w=this.$getSelectedRows();this.session.indentRows(w.first,w.last,"	")},M.prototype.blockOutdent=function(){var w=this.session.getSelection();this.session.outdentRows(w.getRange())},M.prototype.sortLines=function(){for(var w=this.$getSelectedRows(),F=this.session,x=[],R=w.first;R<=w.last;R++)x.push(F.getLine(R));x.sort(function($,k){return $.toLowerCase()<k.toLowerCase()?-1:$.toLowerCase()>k.toLowerCase()?1:0});for(var A=new o(0,0,0,0),R=w.first;R<=w.last;R++){var I=F.getLine(R);A.start.row=R,A.end.row=R,A.end.column=I.length,F.replace(A,x[R-w.first])}},M.prototype.toggleCommentLines=function(){var w=this.session.getState(this.getCursorPosition().row),F=this.$getSelectedRows();this.session.getMode().toggleCommentLines(w,this.session,F.first,F.last)},M.prototype.toggleBlockComment=function(){var w=this.getCursorPosition(),F=this.session.getState(w.row),x=this.getSelectionRange();this.session.getMode().toggleBlockComment(F,this.session,x,w)},M.prototype.getNumberAt=function(w,F){var x=/[\-]?[0-9]+(?:\.[0-9]+)?/g;x.lastIndex=0;for(var R=this.session.getLine(w);x.lastIndex<F;){var A=x.exec(R);if(A.index<=F&&A.index+A[0].length>=F){var I={value:A[0],start:A.index,end:A.index+A[0].length};return I}}return null},M.prototype.modifyNumber=function(w){var F=this.selection.getCursor().row,x=this.selection.getCursor().column,R=new o(F,x-1,F,x),A=this.session.getTextRange(R);if(!isNaN(parseFloat(A))&&isFinite(A)){var I=this.getNumberAt(F,x);if(I){var $=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,k=I.start+I.value.length-$,H=parseFloat(I.value);H*=Math.pow(10,k),$!==I.end&&x<$?w*=Math.pow(10,I.end-x-1):w*=Math.pow(10,I.end-x),H+=w,H/=Math.pow(10,k);var U=H.toFixed(k),q=new o(F,I.start,F,I.end);this.session.replace(q,U),this.moveCursorTo(F,Math.max(I.start+1,x+U.length-I.value.length))}}else this.toggleWord()},M.prototype.toggleWord=function(){var w=this.selection.getCursor().row,F=this.selection.getCursor().column;this.selection.selectWord();var x=this.getSelectedText(),R=this.selection.getWordRange().start.column,A=x.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=F-R-1;I<0&&(I=0);var $=0,k=0,H=this;x.match(/[A-Za-z0-9_]+/)&&A.forEach(function(Y,J){k=$+Y.length,I>=$&&I<=k&&(x=Y,H.selection.clearSelection(),H.moveCursorTo(w,$+R),H.selection.selectTo(w,k+R)),$=k});for(var U=this.$toggleWordPairs,q,N=0;N<U.length;N++)for(var K=U[N],O=0;O<=1;O++){var B=+!O,W=x.match(new RegExp("^\\s?_?("+a.escapeRegExp(K[O])+")\\s?$","i"));if(W){var P=x.match(new RegExp("([_]|^|\\s)("+a.escapeRegExp(W[1])+")($|\\s)","g"));P&&(q=x.replace(new RegExp(a.escapeRegExp(K[O]),"i"),function(Y){var J=K[B];return Y.toUpperCase()==Y?J=J.toUpperCase():Y.charAt(0).toUpperCase()==Y.charAt(0)&&(J=J.substr(0,0)+K[B].charAt(0).toUpperCase()+J.substr(1)),J}),this.insert(q),q="")}}},M.prototype.findLinkAt=function(w,F){var x,R,A=this.session.getLine(w),I=A.split(/((?:https?|ftp):\/\/[\S]+)/),$=F;$<0&&($=0);var k=0,H=0,U;try{for(var q=c(I),N=q.next();!N.done;N=q.next()){var K=N.value;if(H=k+K.length,$>=k&&$<=H&&K.match(/((?:https?|ftp):\/\/[\S]+)/)){U=K.replace(/[\s:.,'";}\]]+$/,"");break}k=H}}catch(O){x={error:O}}finally{try{N&&!N.done&&(R=q.return)&&R.call(q)}finally{if(x)throw x.error}}return U},M.prototype.openLink=function(){var w=this.selection.getCursor(),F=this.findLinkAt(w.row,w.column);return F&&window.open(F,"_blank"),F!=null},M.prototype.removeLines=function(){var w=this.$getSelectedRows();this.session.removeFullLines(w.first,w.last),this.clearSelection()},M.prototype.duplicateSelection=function(){var w=this.selection,F=this.session,x=w.getRange(),R=w.isBackwards();if(x.isEmpty()){var A=x.start.row;F.duplicateLines(A,A)}else{var I=R?x.start:x.end,$=F.insert(I,F.getTextRange(x));x.start=I,x.end=$,w.setSelectionRange(x,R)}},M.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},M.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},M.prototype.moveText=function(w,F,x){return this.session.moveText(w,F,x)},M.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},M.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},M.prototype.$moveLines=function(w,F){var x,R,A=this.selection;if(!A.inMultiSelectMode||this.inVirtualSelectionMode){var I=A.toOrientedRange();x=this.$getSelectedRows(I),R=this.session.$moveLines(x.first,x.last,F?0:w),F&&w==-1&&(R=0),I.moveBy(R,0),A.fromOrientedRange(I)}else{var $=A.rangeList.ranges;A.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var k=0,H=0,U=$.length,q=0;q<U;q++){var N=q;$[q].moveBy(k,0),x=this.$getSelectedRows($[q]);for(var K=x.first,O=x.last;++q<U;){H&&$[q].moveBy(H,0);var B=this.$getSelectedRows($[q]);if(F&&B.first!=O)break;if(!F&&B.first>O+1)break;O=B.last}for(q--,k=this.session.$moveLines(K,O,F?0:w),F&&w==-1&&(N=q+1);N<=q;)$[N].moveBy(k,0),N++;F||(k=0),H+=k}A.fromOrientedRange(A.ranges[0]),A.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},M.prototype.$getSelectedRows=function(w){return w=(w||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(w.start.row),last:this.session.getRowFoldEnd(w.end.row)}},M.prototype.onCompositionStart=function(w){this.renderer.showComposition(w)},M.prototype.onCompositionUpdate=function(w){this.renderer.setCompositionText(w)},M.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},M.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},M.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},M.prototype.isRowVisible=function(w){return w>=this.getFirstVisibleRow()&&w<=this.getLastVisibleRow()},M.prototype.isRowFullyVisible=function(w){return w>=this.renderer.getFirstFullyVisibleRow()&&w<=this.renderer.getLastFullyVisibleRow()},M.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},M.prototype.$moveByPage=function(w,F){var x=this.renderer,R=this.renderer.layerConfig,A=w*Math.floor(R.height/R.lineHeight);F===!0?this.selection.$moveSelection(function(){this.moveCursorBy(A,0)}):F===!1&&(this.selection.moveCursorBy(A,0),this.selection.clearSelection());var I=x.scrollTop;x.scrollBy(0,A*R.lineHeight),F!=null&&x.scrollCursorIntoView(null,.5),x.animateScrolling(I)},M.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},M.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},M.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},M.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},M.prototype.scrollPageDown=function(){this.$moveByPage(1)},M.prototype.scrollPageUp=function(){this.$moveByPage(-1)},M.prototype.scrollToRow=function(w){this.renderer.scrollToRow(w)},M.prototype.scrollToLine=function(w,F,x,R){this.renderer.scrollToLine(w,F,x,R)},M.prototype.centerSelection=function(){var w=this.getSelectionRange(),F={row:Math.floor(w.start.row+(w.end.row-w.start.row)/2),column:Math.floor(w.start.column+(w.end.column-w.start.column)/2)};this.renderer.alignCursor(F,.5)},M.prototype.getCursorPosition=function(){return this.selection.getCursor()},M.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},M.prototype.getSelectionRange=function(){return this.selection.getRange()},M.prototype.selectAll=function(){this.selection.selectAll()},M.prototype.clearSelection=function(){this.selection.clearSelection()},M.prototype.moveCursorTo=function(w,F){this.selection.moveCursorTo(w,F)},M.prototype.moveCursorToPosition=function(w){this.selection.moveCursorToPosition(w)},M.prototype.jumpToMatching=function(w,F){var x=this.getCursorPosition(),R=new C(this.session,x.row,x.column),A=R.getCurrentToken(),I=0;A&&A.type.indexOf("tag-name")!==-1&&(A=R.stepBackward());var $=A||R.stepForward();if($){var k,H=!1,U={},q=x.column-$.start,N,K={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if($.value.match(/[{}()\[\]]/g)){for(;q<$.value.length&&!H;q++)if(K[$.value[q]])switch(N=K[$.value[q]]+"."+$.type.replace("rparen","lparen"),isNaN(U[N])&&(U[N]=0),$.value[q]){case"(":case"[":case"{":U[N]++;break;case")":case"]":case"}":U[N]--,U[N]===-1&&(k="bracket",H=!0);break}}else $.type.indexOf("tag-name")!==-1&&(isNaN(U[$.value])&&(U[$.value]=0),A.value==="<"&&I>1?U[$.value]++:A.value==="</"&&U[$.value]--,U[$.value]===-1&&(k="tag",H=!0));H||(A=$,I++,$=R.stepForward(),q=0)}while($&&!H);if(k){var O,B;if(k==="bracket")O=this.session.getBracketRange(x),O||(O=new o(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+q-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+q-1),B=O.start,(F||B.row===x.row&&Math.abs(B.column-x.column)<2)&&(O=this.session.getBracketRange(B)));else if(k==="tag"){if(!$||$.type.indexOf("tag-name")===-1)return;if(O=new o(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),O.compare(x.row,x.column)===0){var W=this.session.getMatchingTags(x);W&&(W.openTag.contains(x.row,x.column)?(O=W.closeTag,B=O.start):(O=W.openTag,W.closeTag.start.row===x.row&&W.closeTag.start.column===x.column?B=O.end:B=O.start))}B=B||O.start}B=O&&O.cursor||B,B&&(w?O&&F?this.selection.setRange(O):O&&O.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(B.row,B.column):this.selection.moveTo(B.row,B.column))}}},M.prototype.gotoLine=function(w,F,x){this.selection.clearSelection(),this.session.unfold({row:w-1,column:F||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(w-1,F||0),this.isRowFullyVisible(w-1)||this.scrollToLine(w-1,!0,x)},M.prototype.navigateTo=function(w,F){this.selection.moveTo(w,F)},M.prototype.navigateUp=function(w){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var F=this.selection.anchor.getPosition();return this.moveCursorToPosition(F)}this.selection.clearSelection(),this.selection.moveCursorBy(-w||-1,0)},M.prototype.navigateDown=function(w){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var F=this.selection.anchor.getPosition();return this.moveCursorToPosition(F)}this.selection.clearSelection(),this.selection.moveCursorBy(w||1,0)},M.prototype.navigateLeft=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorLeft();else{var F=this.getSelectionRange().start;this.moveCursorToPosition(F)}this.clearSelection()},M.prototype.navigateRight=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorRight();else{var F=this.getSelectionRange().end;this.moveCursorToPosition(F)}this.clearSelection()},M.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},M.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},M.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},M.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},M.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},M.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},M.prototype.replace=function(w,F){F&&this.$search.set(F);var x=this.$search.find(this.session),R=0;return x&&(this.$tryReplace(x,w)&&(R=1),this.selection.setSelectionRange(x),this.renderer.scrollSelectionIntoView(x.start,x.end)),R},M.prototype.replaceAll=function(w,F){F&&this.$search.set(F);var x=this.$search.findAll(this.session),R=0;if(!x.length)return R;var A=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=x.length-1;I>=0;--I)this.$tryReplace(x[I],w)&&R++;return this.selection.setSelectionRange(A),R},M.prototype.$tryReplace=function(w,F){var x=this.session.getTextRange(w);return F=this.$search.replace(x,F),F!==null?(w.end=this.session.replace(w,F),w):null},M.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},M.prototype.find=function(w,F,x){F||(F={}),typeof w=="string"||w instanceof RegExp?F.needle=w:typeof w=="object"&&v.mixin(F,w);var R=this.selection.getRange();F.needle==null&&(w=this.session.getTextRange(R)||this.$search.$options.needle,w||(R=this.session.getWordRange(R.start.row,R.start.column),w=this.session.getTextRange(R)),this.$search.set({needle:w})),this.$search.set(F),F.start||this.$search.set({start:R});var A=this.$search.find(this.session);if(F.preventScroll)return A;if(A)return this.revealRange(A,x),A;F.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},M.prototype.findNext=function(w,F){this.find({skipCurrent:!0,backwards:!1},w,F)},M.prototype.findPrevious=function(w,F){this.find(w,{skipCurrent:!0,backwards:!0},F)},M.prototype.revealRange=function(w,F){this.session.unfold(w),this.selection.setSelectionRange(w);var x=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(w.start,w.end,.5),F!==!1&&this.renderer.animateScrolling(x)},M.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(w){w.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},M.prototype.setAutoScrollEditorIntoView=function(w){if(w){var F,x=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var A=this.$scrollAnchor;A.style.cssText="position:absolute",this.container.insertBefore(A,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),$=this.renderer.on("beforeRender",function(){R&&(F=x.renderer.container.getBoundingClientRect())}),k=this.renderer.on("afterRender",function(){if(R&&F&&(x.isFocused()||x.searchBox&&x.searchBox.isFocused())){var H=x.renderer,U=H.$cursorLayer.$pixelPos,q=H.layerConfig,N=U.top-q.offset;U.top>=0&&N+F.top<0?R=!0:U.top<q.height&&U.top+F.top+q.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(A.style.top=N+"px",A.style.left=U.left+"px",A.style.height=q.lineHeight+"px",A.scrollIntoView(R)),R=F=null}});this.setAutoScrollEditorIntoView=function(H){H||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",k),this.renderer.off("beforeRender",$))}}},M.prototype.$resetCursorStyle=function(){var w=this.$cursorStyle||"ace",F=this.renderer.$cursorLayer;F&&(F.setSmoothBlinking(/smooth/.test(w)),F.isBlinking=!this.$readOnly&&w!="wide",s.setCssClass(F.element,"ace_slim-cursors",/slim/.test(w)))},M.prototype.prompt=function(w,F,x){var R=this;y.loadModule("ace/ext/prompt",function(A){A.prompt(R,w,F,x)})},M}();S.$uid=0,S.prototype.curOp=null,S.prototype.prevOp={},S.prototype.$mergeableCommands=["backspace","del","insertstring"],S.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],v.implement(S.prototype,h),y.defineOptions(S.prototype,"editor",{selectionStyle:{set:function(M){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:M})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(M){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(M){this.textInput.setReadOnly(M),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(M){this.textInput.setCopyWithEmptySelection(M)},initialValue:!1},cursorStyle:{set:function(M){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(M){this.setAutoScrollEditorIntoView(M)}},keyboardHandler:{set:function(M){this.setKeyboardHandler(M)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(M){this.session.setValue(M)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(M){this.setSession(M)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(M){this.renderer.$gutterLayer.setShowLineNumbers(M),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),M&&this.$relativeLineNumbers?T.attach(this):T.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(M){this.$showLineNumbers&&M?T.attach(this):T.detach(this)}},placeholder:{set:function(M){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var w=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(w&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),s.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!w&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),s.addCssClass(this.container,"ace_hasPlaceholder");var F=s.createElement("div");F.className="ace_placeholder",F.textContent=this.$placeholder||"",this.renderer.placeholderNode=F,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!w&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(M){var w={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},F=function(R){if(R.target==this.renderer.scroller&&R.keyCode===L.enter){R.preventDefault();var A=this.getCursorPosition().row;this.isRowVisible(A)||this.scrollToLine(A,!0,!0),this.focus()}},x;M?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(d.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",g("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",g("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",F.bind(this)),this.commands.addCommand(w),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",g("editor")),this.renderer.$gutter.setAttribute("aria-label",g("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),x||(x=new D(this)),x.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",F.bind(this)),this.commands.removeCommand(w),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),x&&x.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var T={getText:function(M,w){return(Math.abs(M.selection.lead.row-w)||w+1+(w<9?"\xB7":""))+""},getWidth:function(M,w,F){return Math.max(w.toString().length,(F.lastRow+1).toString().length,2)*F.characterWidth},update:function(M,w){w.renderer.$loop.schedule(w.renderer.CHANGE_GUTTER)},attach:function(M){M.renderer.$gutterLayer.$renderer=this,M.on("changeSelection",this.update),this.update(null,M)},detach:function(M){M.renderer.$gutterLayer.$renderer==this&&(M.renderer.$gutterLayer.$renderer=null),M.off("changeSelection",this.update),this.update(null,M)}};t.Editor=S});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=function(){function s(a,d){this.element=a,this.canvasHeight=d||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return s.prototype.moveContainer=function(a){c.translate(this.element,0,-(a.firstRowScreen*a.lineHeight%this.canvasHeight)-a.offset*this.$offsetCoefficient)},s.prototype.pageChanged=function(a,d){return Math.floor(a.firstRowScreen*a.lineHeight/this.canvasHeight)!==Math.floor(d.firstRowScreen*d.lineHeight/this.canvasHeight)},s.prototype.computeLineTop=function(a,d,i){var r=d.firstRowScreen*d.lineHeight,u=Math.floor(r/this.canvasHeight),l=i.documentToScreenRow(a,0)*d.lineHeight;return l-u*this.canvasHeight},s.prototype.computeLineHeight=function(a,d,i){return d.lineHeight*i.getRowLineCount(a)},s.prototype.getLength=function(){return this.cells.length},s.prototype.get=function(a){return this.cells[a]},s.prototype.shift=function(){this.$cacheCell(this.cells.shift())},s.prototype.pop=function(){this.$cacheCell(this.cells.pop())},s.prototype.push=function(a){if(Array.isArray(a)){this.cells.push.apply(this.cells,a);for(var d=c.createFragment(this.element),i=0;i<a.length;i++)d.appendChild(a[i].element);this.element.appendChild(d)}else this.cells.push(a),this.element.appendChild(a.element)},s.prototype.unshift=function(a){if(Array.isArray(a)){this.cells.unshift.apply(this.cells,a);for(var d=c.createFragment(this.element),i=0;i<a.length;i++)d.appendChild(a[i].element);this.element.firstChild?this.element.insertBefore(d,this.element.firstChild):this.element.appendChild(d)}else this.cells.unshift(a),this.element.insertAdjacentElement("afterbegin",a.element)},s.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},s.prototype.$cacheCell=function(a){a&&(a.element.remove(),this.cellCache.push(a))},s.prototype.createCell=function(a,d,i,r){var u=this.cellCache.pop();if(!u){var l=c.createElement("div");r&&r(l),this.element.appendChild(l),u={element:l,text:"",row:a}}return u.row=a,u},s}();t.Lines=v});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=e("../lib/oop"),s=e("../lib/lang"),a=e("../lib/event_emitter").EventEmitter,d=e("./lines").Lines,i=e("../config").nls,r=function(){function l(p){this.element=c.createElement("div"),this.element.className="ace_layer ace_gutter-layer",p.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new d(this.element),this.$lines.$offsetCoefficient=1}return l.prototype.setSession=function(p){this.session&&this.session.off("change",this.$updateAnnotations),this.session=p,p&&p.on("change",this.$updateAnnotations)},l.prototype.addGutterDecoration=function(p,f){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(p,f)},l.prototype.removeGutterDecoration=function(p,f){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(p,f)},l.prototype.setAnnotations=function(p){this.$annotations=[];for(var f=0;f<p.length;f++){var o=p[f],h=o.row,_=this.$annotations[h];_||(_=this.$annotations[h]={text:[],type:[]});var m=o.text,y=o.type;m=m?s.escapeHTML(m):o.html||"",_.text.indexOf(m)===-1&&(_.text.push(m),_.type.push(y));var C=o.className;C?_.className=C:y=="error"?_.className=" ace_error":y=="warning"&&_.className!=" ace_error"?_.className=" ace_warning":y=="info"&&!_.className&&(_.className=" ace_info")}},l.prototype.$updateAnnotations=function(p){if(this.$annotations.length){var f=p.start.row,o=p.end.row-f;if(o!==0)if(p.action=="remove")this.$annotations.splice(f,o+1,null);else{var h=new Array(o+1);h.unshift(f,1),this.$annotations.splice.apply(this.$annotations,h)}}},l.prototype.update=function(p){this.config=p;var f=this.session,o=p.firstRow,h=Math.min(p.lastRow+p.gutterOffset,f.getLength()-1);this.oldLastRow=h,this.config=p,this.$lines.moveContainer(p),this.$updateCursorRow();for(var _=f.getNextFoldLine(o),m=_?_.start.row:1/0,y=null,C=-1,E=o;;){if(E>m&&(E=_.end.row+1,_=f.getNextFoldLine(E,_),m=_?_.start.row:1/0),E>h){for(;this.$lines.getLength()>C+1;)this.$lines.pop();break}y=this.$lines.get(++C),y?y.row=E:(y=this.$lines.createCell(E,p,this.session,u),this.$lines.push(y)),this.$renderCell(y,p,_,E),E++}this._signal("afterRender"),this.$updateGutterWidth(p)},l.prototype.$updateGutterWidth=function(p){var f=this.session,o=f.gutterRenderer||this.$renderer,h=f.$firstLineNumber,_=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||f.$useWrapMode)&&(_=f.getLength()+h-1);var m=o?o.getWidth(f,_,p):_.toString().length*p.characterWidth,y=this.$padding||this.$computePadding();m+=y.left+y.right,m!==this.gutterWidth&&!isNaN(m)&&(this.gutterWidth=m,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",m))},l.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var p=this.session.selection.getCursor();this.$cursorRow!==p.row&&(this.$cursorRow=p.row)}},l.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var p=this.session.selection.cursor.row;if(this.$cursorRow=p,!(this.$cursorCell&&this.$cursorCell.row==p)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var f=this.$lines.cells;this.$cursorCell=null;for(var o=0;o<f.length;o++){var h=f[o];if(h.row>=this.$cursorRow){if(h.row>this.$cursorRow){var _=this.session.getFoldLine(this.$cursorRow);if(o>0&&_&&_.start.row==f[o-1].row)h=f[o-1];else break}h.element.className="ace_gutter-active-line "+h.element.className,this.$cursorCell=h;break}}}}},l.prototype.scrollLines=function(p){var f=this.config;if(this.config=p,this.$updateCursorRow(),this.$lines.pageChanged(f,p))return this.update(p);this.$lines.moveContainer(p);var o=Math.min(p.lastRow+p.gutterOffset,this.session.getLength()-1),h=this.oldLastRow;if(this.oldLastRow=o,!f||h<p.firstRow)return this.update(p);if(o<f.firstRow)return this.update(p);if(f.firstRow<p.firstRow)for(var _=this.session.getFoldedRowCount(f.firstRow,p.firstRow-1);_>0;_--)this.$lines.shift();if(h>o)for(var _=this.session.getFoldedRowCount(o+1,h);_>0;_--)this.$lines.pop();p.firstRow<f.firstRow&&this.$lines.unshift(this.$renderLines(p,p.firstRow,f.firstRow-1)),o>h&&this.$lines.push(this.$renderLines(p,h+1,o)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(p)},l.prototype.$renderLines=function(p,f,o){for(var h=[],_=f,m=this.session.getNextFoldLine(_),y=m?m.start.row:1/0;_>y&&(_=m.end.row+1,m=this.session.getNextFoldLine(_,m),y=m?m.start.row:1/0),!(_>o);){var C=this.$lines.createCell(_,p,this.session,u);this.$renderCell(C,p,m,_),h.push(C),_++}return h},l.prototype.$renderCell=function(p,f,o,h){var _=p.element,m=this.session,y=_.childNodes[0],C=_.childNodes[1],E=_.childNodes[2],D=E.firstChild,g=m.$firstLineNumber,b=m.$breakpoints,L=m.$decorations,S=m.gutterRenderer||this.$renderer,T=this.$showFoldWidgets&&m.foldWidgets,M=o?o.start.row:Number.MAX_VALUE,w=f.lineHeight+"px",F=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",x=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(S?S.getText(m,h):h+g).toString();if(this.$highlightGutterLine&&(h==this.$cursorRow||o&&h<this.$cursorRow&&h>=M&&this.$cursorRow<=o.end.row)&&(F+="ace_gutter-active-line ",this.$cursorCell!=p&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=p)),b[h]&&(F+=b[h]),L[h]&&(F+=L[h]),this.$annotations[h]&&h!==M&&(F+=this.$annotations[h].className),T){var A=T[h];A==null&&(A=T[h]=m.getFoldWidget(h))}if(A){var I="ace_fold-widget ace_"+A,$=A=="start"&&h==M&&h<o.end.row;if($){I+=" ace_closed";for(var k="",H=!1,U=h+1;U<=o.end.row;U++)if(this.$annotations[U]){if(this.$annotations[U].className===" ace_error"){H=!0,k=" ace_error_fold";break}if(this.$annotations[U].className===" ace_warning"){H=!0,k=" ace_warning_fold";continue}}F+=k}else I+=" ace_open";C.className!=I&&(C.className=I),c.setStyle(C.style,"height",w),c.setStyle(C.style,"display","inline-block"),C.setAttribute("role","button"),C.setAttribute("tabindex","-1");var q=m.getFoldWidgetRange(h);q?C.setAttribute("aria-label",i("Toggle code folding, rows $0 through $1",[q.start.row+1,q.end.row+1])):o?C.setAttribute("aria-label",i("Toggle code folding, rows $0 through $1",[o.start.row+1,o.end.row+1])):C.setAttribute("aria-label",i("Toggle code folding, row $0",[h+1])),$?(C.setAttribute("aria-expanded","false"),C.setAttribute("title",i("Unfold code"))):(C.setAttribute("aria-expanded","true"),C.setAttribute("title",i("Fold code")))}else C&&(c.setStyle(C.style,"display","none"),C.setAttribute("tabindex","0"),C.removeAttribute("role"),C.removeAttribute("aria-label"));return H&&this.$showFoldedAnnotations?(E.className="ace_gutter_annotation",D.className=x,D.className+=k,c.setStyle(D.style,"height",w),c.setStyle(E.style,"display","block"),c.setStyle(E.style,"height",w),E.setAttribute("aria-label",i("Read annotations row $0",[R])),E.setAttribute("tabindex","-1"),E.setAttribute("role","button")):this.$annotations[h]?(E.className="ace_gutter_annotation",D.className=x,this.$useSvgGutterIcons?D.className+=this.$annotations[h].className:_.classList.add(this.$annotations[h].className.replace(" ","")),c.setStyle(D.style,"height",w),c.setStyle(E.style,"display","block"),c.setStyle(E.style,"height",w),E.setAttribute("aria-label",i("Read annotations row $0",[R])),E.setAttribute("tabindex","-1"),E.setAttribute("role","button")):(c.setStyle(E.style,"display","none"),E.removeAttribute("aria-label"),E.removeAttribute("role"),E.setAttribute("tabindex","0")),R!==y.data&&(y.data=R),_.className!=F&&(_.className=F),c.setStyle(p.element.style,"height",this.$lines.computeLineHeight(h,f,m)+"px"),c.setStyle(p.element.style,"top",this.$lines.computeLineTop(h,f,m)+"px"),p.text=R,E.style.display==="none"&&C.style.display==="none"?p.element.setAttribute("aria-hidden",!0):p.element.setAttribute("aria-hidden",!1),p},l.prototype.setHighlightGutterLine=function(p){this.$highlightGutterLine=p},l.prototype.setShowLineNumbers=function(p){this.$renderer=!p&&{getWidth:function(){return 0},getText:function(){return""}}},l.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},l.prototype.setShowFoldWidgets=function(p){p?c.addCssClass(this.element,"ace_folding-enabled"):c.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=p,this.$padding=null},l.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},l.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var p=c.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(p.borderLeftWidth)||0)+(parseInt(p.paddingLeft)||0)+1,this.$padding.right=(parseInt(p.borderRightWidth)||0)+(parseInt(p.paddingRight)||0),this.$padding},l.prototype.getRegion=function(p){var f=this.$padding||this.$computePadding(),o=this.element.getBoundingClientRect();if(p.x<f.left+o.left)return"markers";if(this.$showFoldWidgets&&p.x>o.right-f.right)return"foldWidgets"},l}();r.prototype.$fixedWidth=!1,r.prototype.$highlightGutterLine=!0,r.prototype.$renderer="",r.prototype.$showLineNumbers=!0,r.prototype.$showFoldWidgets=!0,v.implement(r.prototype,a);function u(l){var p=document.createTextNode("");l.appendChild(p);var f=c.createElement("span");l.appendChild(f);var o=c.createElement("span");l.appendChild(o);var h=c.createElement("span");return o.appendChild(h),l}t.Gutter=r});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../range").Range,v=e("../lib/dom"),s=function(){function d(i){this.element=v.createElement("div"),this.element.className="ace_layer ace_marker-layer",i.appendChild(this.element)}return d.prototype.setPadding=function(i){this.$padding=i},d.prototype.setSession=function(i){this.session=i},d.prototype.setMarkers=function(i){this.markers=i},d.prototype.elt=function(i,r){var u=this.i!=-1&&this.element.childNodes[this.i];u?this.i++:(u=document.createElement("div"),this.element.appendChild(u),this.i=-1),u.style.cssText=r,u.className=i},d.prototype.update=function(i){if(i){this.config=i,this.i=0;var r;for(var u in this.markers){var l=this.markers[u];if(!l.range){l.update(r,this,this.session,i);continue}var p=l.range.clipRows(i.firstRow,i.lastRow);if(!p.isEmpty())if(p=p.toScreenRange(this.session),l.renderer){var f=this.$getTop(p.start.row,i),o=this.$padding+p.start.column*i.characterWidth;l.renderer(r,p,o,f,i)}else l.type=="fullLine"?this.drawFullLineMarker(r,p,l.clazz,i):l.type=="screenLine"?this.drawScreenLineMarker(r,p,l.clazz,i):p.isMultiLine()?l.type=="text"?this.drawTextMarker(r,p,l.clazz,i):this.drawMultiLineMarker(r,p,l.clazz,i):this.drawSingleLineMarker(r,p,l.clazz+" ace_start ace_br15",i)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},d.prototype.$getTop=function(i,r){return(i-r.firstRowScreen)*r.lineHeight},d.prototype.drawTextMarker=function(i,r,u,l,p){for(var f=this.session,o=r.start.row,h=r.end.row,_=o,m=0,y=0,C=f.getScreenLastRowColumn(_),E=new c(_,r.start.column,_,y);_<=h;_++)E.start.row=E.end.row=_,E.start.column=_==o?r.start.column:f.getRowWrapIndent(_),E.end.column=C,m=y,y=C,C=_+1<h?f.getScreenLastRowColumn(_+1):_==h?0:r.end.column,this.drawSingleLineMarker(i,E,u+(_==o?" ace_start":"")+" ace_br"+a(_==o||_==o+1&&r.start.column,m<y,y>C,_==h),l,_==h?0:1,p)},d.prototype.drawMultiLineMarker=function(i,r,u,l,p){var f=this.$padding,o=l.lineHeight,h=this.$getTop(r.start.row,l),_=f+r.start.column*l.characterWidth;if(p=p||"",this.session.$bidiHandler.isBidiRow(r.start.row)){var m=r.clone();m.end.row=m.start.row,m.end.column=this.session.getLine(m.start.row).length,this.drawBidiSingleLineMarker(i,m,u+" ace_br1 ace_start",l,null,p)}else this.elt(u+" ace_br1 ace_start","height:"+o+"px;right:0;top:"+h+"px;left:"+_+"px;"+(p||""));if(this.session.$bidiHandler.isBidiRow(r.end.row)){var m=r.clone();m.start.row=m.end.row,m.start.column=0,this.drawBidiSingleLineMarker(i,m,u+" ace_br12",l,null,p)}else{h=this.$getTop(r.end.row,l);var y=r.end.column*l.characterWidth;this.elt(u+" ace_br12","height:"+o+"px;width:"+y+"px;top:"+h+"px;left:"+f+"px;"+(p||""))}if(o=(r.end.row-r.start.row-1)*l.lineHeight,!(o<=0)){h=this.$getTop(r.start.row+1,l);var C=(r.start.column?1:0)|(r.end.column?0:8);this.elt(u+(C?" ace_br"+C:""),"height:"+o+"px;right:0;top:"+h+"px;left:"+f+"px;"+(p||""))}},d.prototype.drawSingleLineMarker=function(i,r,u,l,p,f){if(this.session.$bidiHandler.isBidiRow(r.start.row))return this.drawBidiSingleLineMarker(i,r,u,l,p,f);var o=l.lineHeight,h=(r.end.column+(p||0)-r.start.column)*l.characterWidth,_=this.$getTop(r.start.row,l),m=this.$padding+r.start.column*l.characterWidth;this.elt(u,"height:"+o+"px;width:"+h+"px;top:"+_+"px;left:"+m+"px;"+(f||""))},d.prototype.drawBidiSingleLineMarker=function(i,r,u,l,p,f){var o=l.lineHeight,h=this.$getTop(r.start.row,l),_=this.$padding,m=this.session.$bidiHandler.getSelections(r.start.column,r.end.column);m.forEach(function(y){this.elt(u,"height:"+o+"px;width:"+(y.width+(p||0))+"px;top:"+h+"px;left:"+(_+y.left)+"px;"+(f||""))},this)},d.prototype.drawFullLineMarker=function(i,r,u,l,p){var f=this.$getTop(r.start.row,l),o=l.lineHeight;r.start.row!=r.end.row&&(o+=this.$getTop(r.end.row,l)-f),this.elt(u,"height:"+o+"px;top:"+f+"px;left:0;right:0;"+(p||""))},d.prototype.drawScreenLineMarker=function(i,r,u,l,p){var f=this.$getTop(r.start.row,l),o=l.lineHeight;this.elt(u,"height:"+o+"px;top:"+f+"px;left:0;right:0;"+(p||""))},d}();s.prototype.$padding=0;function a(d,i,r,u){return(d?1:0)|(i?2:0)|(r?4:0)|(u?8:0)}t.Marker=s});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,n){var c=new Set(["text","rparen","lparen"]);t.isTextToken=function(v){return c.has(v)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,n){"use strict";var c=e("../lib/oop"),v=e("../lib/dom"),s=e("../lib/lang"),a=e("./lines").Lines,d=e("../lib/event_emitter").EventEmitter,i=e("../config").nls,r=e("./text_util").isTextToken,u=function(){function l(p){this.dom=v,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",p.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)}return l.prototype.$updateEolChar=function(){var p=this.session.doc,f=p.getNewLineCharacter()==`
`&&p.getNewLineMode()!="windows",o=f?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=o)return this.EOL_CHAR=o,!0},l.prototype.setPadding=function(p){this.$padding=p,this.element.style.margin="0 "+p+"px"},l.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},l.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},l.prototype.$setFontMetrics=function(p){this.$fontMetrics=p,this.$fontMetrics.on("changeCharacterSize",function(f){this._signal("changeCharacterSize",f)}.bind(this)),this.$pollSizeChanges()},l.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},l.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},l.prototype.setSession=function(p){this.session=p,p&&this.$computeTabString()},l.prototype.setShowInvisibles=function(p){return this.showInvisibles==p?!1:(this.showInvisibles=p,typeof p=="string"?(this.showSpaces=/tab/i.test(p),this.showTabs=/space/i.test(p),this.showEOL=/eol/i.test(p)):this.showSpaces=this.showTabs=this.showEOL=p,this.$computeTabString(),!0)},l.prototype.setDisplayIndentGuides=function(p){return this.displayIndentGuides==p?!1:(this.displayIndentGuides=p,this.$computeTabString(),!0)},l.prototype.setHighlightIndentGuides=function(p){return this.$highlightIndentGuides===p?!1:(this.$highlightIndentGuides=p,p)},l.prototype.$computeTabString=function(){var p=this.session.getTabSize();this.tabSize=p;for(var f=this.$tabStrings=[0],o=1;o<p+1;o++)if(this.showTabs){var h=this.dom.createElement("span");h.className="ace_invisible ace_invisible_tab",h.textContent=s.stringRepeat(this.TAB_CHAR,o),f.push(h)}else f.push(this.dom.createTextNode(s.stringRepeat(" ",o),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var _="ace_indent-guide",m=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?s.stringRepeat(this.SPACE_CHAR,this.tabSize):s.stringRepeat(" ",this.tabSize),C=this.showTabs?" ace_invisible ace_invisible_tab":"",E=this.showTabs?s.stringRepeat(this.TAB_CHAR,this.tabSize):y,h=this.dom.createElement("span");h.className=_+m,h.textContent=y,this.$tabStrings[" "]=h;var h=this.dom.createElement("span");h.className=_+C,h.textContent=E,this.$tabStrings["	"]=h}},l.prototype.updateLines=function(p,f,o){if(this.config.lastRow!=p.lastRow||this.config.firstRow!=p.firstRow)return this.update(p);this.config=p;for(var h=Math.max(f,p.firstRow),_=Math.min(o,p.lastRow),m=this.element.childNodes,y=0,E=p.firstRow;E<h;E++){var D=this.session.getFoldLine(E);if(D)if(D.containsRow(h)){h=D.start.row;break}else E=D.end.row;y++}for(var C=!1,E=h,D=this.session.getNextFoldLine(E),g=D?D.start.row:1/0;E>g&&(E=D.end.row+1,D=this.session.getNextFoldLine(E,D),g=D?D.start.row:1/0),!(E>_);){var b=m[y++];if(b){this.dom.removeChildren(b),this.$renderLine(b,E,E==g?D:!1),C&&(b.style.top=this.$lines.computeLineTop(E,p,this.session)+"px");var L=p.lineHeight*this.session.getRowLength(E)+"px";b.style.height!=L&&(C=!0,b.style.height=L)}E++}if(C)for(;y<this.$lines.cells.length;){var S=this.$lines.cells[y++];S.element.style.top=this.$lines.computeLineTop(S.row,p,this.session)+"px"}},l.prototype.scrollLines=function(p){var f=this.config;if(this.config=p,this.$lines.pageChanged(f,p))return this.update(p);this.$lines.moveContainer(p);var o=p.lastRow,h=f?f.lastRow:-1;if(!f||h<p.firstRow)return this.update(p);if(o<f.firstRow)return this.update(p);if(!f||f.lastRow<p.firstRow)return this.update(p);if(p.lastRow<f.firstRow)return this.update(p);if(f.firstRow<p.firstRow)for(var _=this.session.getFoldedRowCount(f.firstRow,p.firstRow-1);_>0;_--)this.$lines.shift();if(f.lastRow>p.lastRow)for(var _=this.session.getFoldedRowCount(p.lastRow+1,f.lastRow);_>0;_--)this.$lines.pop();p.firstRow<f.firstRow&&this.$lines.unshift(this.$renderLinesFragment(p,p.firstRow,f.firstRow-1)),p.lastRow>f.lastRow&&this.$lines.push(this.$renderLinesFragment(p,f.lastRow+1,p.lastRow)),this.$highlightIndentGuide()},l.prototype.$renderLinesFragment=function(p,f,o){for(var h=[],_=f,m=this.session.getNextFoldLine(_),y=m?m.start.row:1/0;_>y&&(_=m.end.row+1,m=this.session.getNextFoldLine(_,m),y=m?m.start.row:1/0),!(_>o);){var C=this.$lines.createCell(_,p,this.session),E=C.element;this.dom.removeChildren(E),v.setStyle(E.style,"height",this.$lines.computeLineHeight(_,p,this.session)+"px"),v.setStyle(E.style,"top",this.$lines.computeLineTop(_,p,this.session)+"px"),this.$renderLine(E,_,_==y?m:!1),this.$useLineGroups()?E.className="ace_line_group":E.className="ace_line",h.push(C),_++}return h},l.prototype.update=function(p){this.$lines.moveContainer(p),this.config=p;for(var f=p.firstRow,o=p.lastRow,h=this.$lines;h.getLength();)h.pop();h.push(this.$renderLinesFragment(p,f,o))},l.prototype.$renderToken=function(p,f,o,h){for(var _=this,m=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),C,E=0;C=m.exec(h);){var D=C[1],g=C[2],b=C[3],L=C[4],S=C[5];if(!(!_.showSpaces&&g)){var T=E!=C.index?h.slice(E,C.index):"";if(E=C.index+C[0].length,T&&y.appendChild(this.dom.createTextNode(T,this.element)),D){var M=_.session.getScreenTabSize(f+C.index);y.appendChild(_.$tabStrings[M].cloneNode(!0)),f+=M-1}else if(g)if(_.showSpaces){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space",w.textContent=s.stringRepeat(_.SPACE_CHAR,g.length),y.appendChild(w)}else y.appendChild(this.dom.createTextNode(g,this.element));else if(b){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space ace_invalid",w.textContent=s.stringRepeat(_.SPACE_CHAR,b.length),y.appendChild(w)}else if(L){f+=1;var w=this.dom.createElement("span");w.style.width=_.config.characterWidth*2+"px",w.className=_.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",w.textContent=_.showSpaces?_.SPACE_CHAR:L,y.appendChild(w)}else if(S){f+=1;var w=this.dom.createElement("span");w.style.width=_.config.characterWidth*2+"px",w.className="ace_cjk",w.textContent=S,y.appendChild(w)}}}if(y.appendChild(this.dom.createTextNode(E?h.slice(E):h,this.element)),r(o.type))p.appendChild(y);else{var F="ace_"+o.type.replace(/\./g," ace_"),w=this.dom.createElement("span");o.type=="fold"&&(w.style.width=o.value.length*this.config.characterWidth+"px",w.setAttribute("title",i("Unfold code"))),w.className=F,w.appendChild(y),p.appendChild(w)}return f+h.length},l.prototype.renderIndentGuide=function(p,f,o){var h=f.search(this.$indentGuideRe);if(h<=0||h>=o)return f;if(f[0]==" "){h-=h%this.tabSize;for(var _=h/this.tabSize,m=0;m<_;m++)p.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),f.substr(h)}else if(f[0]=="	"){for(var m=0;m<h;m++)p.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),f.substr(h)}return this.$highlightIndentGuide(),f},l.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var p=this.session.doc.$lines;if(p){var f=this.session.selection.getCursor(),o=/^\s*/.exec(this.session.doc.getLine(f.row))[0].length,h=Math.floor(o/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:h,start:f.row};var _=this.session.$bracketHighlight;if(_){for(var m=this.session.$bracketHighlight.ranges,y=0;y<m.length;y++)if(f.row!==m[y].start.row){this.$highlightIndentGuideMarker.end=m[y].start.row,f.row>m[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&p[f.row]!==""&&f.column===p[f.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=f.row+1;y<p.length;y++){var C=p[y],E=/^\s*/.exec(C)[0].length;if(C!==""&&(this.$highlightIndentGuideMarker.end=y,E<=o))break}}this.$renderHighlightIndentGuide()}}},l.prototype.$clearActiveIndentGuide=function(){for(var p=this.$lines.cells,f=0;f<p.length;f++){var o=p[f],h=o.element.childNodes;if(h.length>0){for(var _=0;_<h.length;_++)if(h[_].classList&&h[_].classList.contains("ace_indent-guide-active")){h[_].classList.remove("ace_indent-guide-active");break}}}},l.prototype.$setIndentGuideActive=function(p,f){var o=this.session.doc.getLine(p.row);if(o!==""){var h=p.element.childNodes;if(h){var _=h[f-1];_&&_.classList&&_.classList.contains("ace_indent-guide")&&_.classList.add("ace_indent-guide-active")}}},l.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var p=this.$lines.cells;this.$clearActiveIndentGuide();var f=this.$highlightIndentGuideMarker.indentLevel;if(f!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var o=0;o<p.length;o++){var h=p[o];if(this.$highlightIndentGuideMarker.end&&h.row>=this.$highlightIndentGuideMarker.start+1){if(h.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,f)}}else for(var o=p.length-1;o>=0;o--){var h=p[o];if(this.$highlightIndentGuideMarker.end&&h.row<this.$highlightIndentGuideMarker.start){if(h.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,f)}}}},l.prototype.$createLineElement=function(p){var f=this.dom.createElement("div");return f.className="ace_line",f.style.height=this.config.lineHeight+"px",f},l.prototype.$renderWrappedLine=function(p,f,o){var h=0,_=0,m=o[0],y=0,C=this.$createLineElement();p.appendChild(C);for(var E=0;E<f.length;E++){var D=f[E],g=D.value;if(E==0&&this.displayIndentGuides){if(h=g.length,g=this.renderIndentGuide(C,g,m),!g)continue;h-=g.length}if(h+g.length<m)y=this.$renderToken(C,y,D,g),h+=g.length;else{for(;h+g.length>=m;)y=this.$renderToken(C,y,D,g.substring(0,m-h)),g=g.substring(m-h),h=m,C=this.$createLineElement(),p.appendChild(C),C.appendChild(this.dom.createTextNode(s.stringRepeat("\xA0",o.indent),this.element)),_++,y=0,m=o[_]||Number.MAX_VALUE;g.length!=0&&(h+=g.length,y=this.$renderToken(C,y,D,g))}}o[o.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(C,y,null,"",!0)},l.prototype.$renderSimpleLine=function(p,f){for(var o=0,h=0;h<f.length;h++){var _=f[h],m=_.value;if(!(h==0&&this.displayIndentGuides&&(m=this.renderIndentGuide(p,m),!m))){if(o+m.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(p,o,_,m);o=this.$renderToken(p,o,_,m)}}},l.prototype.$renderOverflowMessage=function(p,f,o,h,_){o&&this.$renderToken(p,f,o,h.slice(0,this.MAX_LINE_LENGTH-f));var m=this.dom.createElement("span");m.className="ace_inline_button ace_keyword ace_toggle_wrap",m.textContent=_?"<hide>":"<click to see more...>",p.appendChild(m)},l.prototype.$renderLine=function(p,f,o){if(!o&&o!=!1&&(o=this.session.getFoldLine(f)),o)var h=this.$getFoldLineTokens(f,o);else var h=this.session.getTokens(f);var _=p;if(h.length){var m=this.session.getRowSplitData(f);if(m&&m.length){this.$renderWrappedLine(p,h,m);var _=p.lastChild}else{var _=p;this.$useLineGroups()&&(_=this.$createLineElement(),p.appendChild(_)),this.$renderSimpleLine(_,h)}}else this.$useLineGroups()&&(_=this.$createLineElement(),p.appendChild(_));if(this.showEOL&&_){o&&(f=o.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=f==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,_.appendChild(y)}},l.prototype.$getFoldLineTokens=function(p,f){var o=this.session,h=[];function _(y,C,E){for(var D=0,g=0;g+y[D].value.length<C;)if(g+=y[D].value.length,D++,D==y.length)return;if(g!=C){var b=y[D].value.substring(C-g);b.length>E-C&&(b=b.substring(0,E-C)),h.push({type:y[D].type,value:b}),g=C+b.length,D+=1}for(;g<E&&D<y.length;){var b=y[D].value;b.length+g>E?h.push({type:y[D].type,value:b.substring(0,E-g)}):h.push(y[D]),g+=b.length,D+=1}}var m=o.getTokens(p);return f.walk(function(y,C,E,D,g){y!=null?h.push({type:"fold",value:y}):(g&&(m=o.getTokens(C)),m.length&&_(m,D,E))},f.end.row,this.session.getLine(f.end.row).length),h},l.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},l}();u.prototype.EOF_CHAR="\xB6",u.prototype.EOL_CHAR_LF="\xAC",u.prototype.EOL_CHAR_CRLF="\xA4",u.prototype.EOL_CHAR=u.prototype.EOL_CHAR_LF,u.prototype.TAB_CHAR="\u2014",u.prototype.SPACE_CHAR="\xB7",u.prototype.$padding=0,u.prototype.MAX_LINE_LENGTH=1e4,u.prototype.showInvisibles=!1,u.prototype.showSpaces=!1,u.prototype.showTabs=!1,u.prototype.showEOL=!1,u.prototype.displayIndentGuides=!0,u.prototype.$highlightIndentGuides=!0,u.prototype.$tabStrings=[],u.prototype.destroy={},u.prototype.onChangeTabSize=u.prototype.$computeTabString,c.implement(u.prototype,d),t.Text=u});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=function(){function s(a){this.element=c.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),c.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return s.prototype.$updateOpacity=function(a){for(var d=this.cursors,i=d.length;i--;)c.setStyle(d[i].style,"opacity",a?"":"0")},s.prototype.$startCssAnimation=function(){for(var a=this.cursors,d=a.length;d--;)a[d].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&c.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},s.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,c.removeCssClass(this.element,"ace_animate-blinking")},s.prototype.setPadding=function(a){this.$padding=a},s.prototype.setSession=function(a){this.session=a},s.prototype.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},s.prototype.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())},s.prototype.setSmoothBlinking=function(a){a!=this.smoothBlinking&&(this.smoothBlinking=a,c.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.restartTimer())},s.prototype.addCursor=function(){var a=c.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},s.prototype.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},s.prototype.hideCursor=function(){this.isVisible=!1,c.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},s.prototype.showCursor=function(){this.isVisible=!0,c.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},s.prototype.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,c.removeCssClass(this.element,"ace_smooth-blinking")),a(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&c.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),c.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var d=function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){a(!0),d()},this.blinkInterval),d()}},s.prototype.getPixelPosition=function(a,d){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var i=this.session.documentToScreenPosition(a),r=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,a.row)?this.session.$bidiHandler.getPosLeft(i.column):i.column*this.config.characterWidth),u=(i.row-(d?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:u}},s.prototype.isCursorInView=function(a,d){return a.top>=0&&a.top<d.maxHeight},s.prototype.update=function(a){this.config=a;var d=this.session.$selectionMarkers,i=0,r=0;(d===void 0||d.length===0)&&(d=[{cursor:null}]);for(var i=0,u=d.length;i<u;i++){var l=this.getPixelPosition(d[i].cursor,!0);if(!((l.top>a.height+a.offset||l.top<0)&&i>1)){var p=this.cursors[r++]||this.addCursor(),f=p.style;this.drawCursor?this.drawCursor(p,l,a,d[i],this.session):this.isCursorInView(l,a)?(c.setStyle(f,"display","block"),c.translate(p,l.left,l.top),c.setStyle(f,"width",Math.round(a.characterWidth)+"px"),c.setStyle(f,"height",a.lineHeight+"px")):c.setStyle(f,"display","none")}}for(;this.cursors.length>r;)this.removeCursor();var o=this.session.getOverwrite();this.$setOverwrite(o),this.$pixelPos=l,this.restartTimer()},s.prototype.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?c.addCssClass(this.element,"ace_overwrite-cursors"):c.removeCssClass(this.element,"ace_overwrite-cursors"))},s.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},s}();v.prototype.$padding=0,v.prototype.drawCursor=null,t.Cursor=v});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var p=function(f,o){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(h[m]=_[m])},p(f,o)};return function(f,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");p(f,o);function h(){this.constructor=f}f.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}}(),v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/event"),d=e("./lib/event_emitter").EventEmitter,i=32768,r=function(){function p(f,o){this.element=s.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+o,this.inner=s.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),f.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addListener(this.element,"scroll",this.onScroll.bind(this)),a.addListener(this.element,"mousedown",a.preventDefault)}return p.prototype.setVisible=function(f){this.element.style.display=f?"":"none",this.isVisible=f,this.coeff=1},p}();v.implement(r.prototype,d);var u=function(p){c(f,p);function f(o,h){var _=p.call(this,o,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,h.$scrollbarWidth=_.width=s.scrollbarWidth(o.ownerDocument),_.inner.style.width=_.element.style.width=(_.width||15)+5+"px",_.$minWidth=0,_}return f.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var o=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-o)/(this.coeff-o)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},f.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},f.prototype.setHeight=function(o){this.element.style.height=o+"px"},f.prototype.setScrollHeight=function(o){this.scrollHeight=o,o>i?(this.coeff=i/o,o=i):this.coeff!=1&&(this.coeff=1),this.inner.style.height=o+"px"},f.prototype.setScrollTop=function(o){this.scrollTop!=o&&(this.skipEvent=!0,this.scrollTop=o,this.element.scrollTop=o*this.coeff)},f}(r);u.prototype.setInnerHeight=u.prototype.setScrollHeight;var l=function(p){c(f,p);function f(o,h){var _=p.call(this,o,"-h")||this;return _.scrollLeft=0,_.height=h.$scrollbarWidth,_.inner.style.height=_.element.style.height=(_.height||15)+5+"px",_}return f.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},f.prototype.getHeight=function(){return this.isVisible?this.height:0},f.prototype.setWidth=function(o){this.element.style.width=o+"px"},f.prototype.setInnerWidth=function(o){this.inner.style.width=o+"px"},f.prototype.setScrollWidth=function(o){this.inner.style.width=o+"px"},f.prototype.setScrollLeft=function(o){this.scrollLeft!=o&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=o)},f}(r);t.ScrollBar=u,t.ScrollBarV=u,t.ScrollBarH=l,t.VScrollBar=u,t.HScrollBar=l});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var l=function(p,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(o[_]=h[_])},l(p,f)};return function(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");l(p,f);function o(){this.constructor=p}p.prototype=f===null?Object.create(f):(o.prototype=f.prototype,new o)}}(),v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/event"),d=e("./lib/event_emitter").EventEmitter;s.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var i=function(){function l(p,f){this.element=s.createElement("div"),this.element.className="ace_sb"+f,this.inner=s.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,p.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return l.prototype.setVisible=function(p){this.element.style.display=p?"":"none",this.isVisible=p,this.coeff=1},l}();v.implement(i.prototype,d);var r=function(l){c(p,l);function p(f,o){var h=l.call(this,f,"-v")||this;return h.scrollTop=0,h.scrollHeight=0,h.parent=f,h.width=h.VScrollWidth,h.renderer=o,h.inner.style.width=h.element.style.width=(h.width||15)+"px",h.$minWidth=0,h}return p.prototype.onMouseDown=function(f,o){if(f==="mousedown"&&!(a.getButton(o)!==0||o.detail===2)){if(o.target===this.inner){var h=this,_=o.clientY,m=function(L){_=L.clientY},y=function(){clearInterval(g)},C=o.clientY,E=this.thumbTop,D=function(){if(_!==void 0){var L=h.scrollTopFromThumbTop(E+_-C);L!==h.scrollTop&&h._emit("scroll",{data:L})}};a.capture(this.inner,m,y);var g=setInterval(D,20);return a.preventDefault(o)}var b=o.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(b)}),a.preventDefault(o)}},p.prototype.getHeight=function(){return this.height},p.prototype.scrollTopFromThumbTop=function(f){var o=f*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return o=o>>0,o<0?o=0:o>this.pageHeight-this.viewHeight&&(o=this.pageHeight-this.viewHeight),o},p.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},p.prototype.setHeight=function(f){this.height=Math.max(0,f),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},p.prototype.setScrollHeight=function(f,o){this.pageHeight===f&&!o||(this.pageHeight=f,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},p.prototype.setScrollTop=function(f){this.scrollTop=f,f<0&&(f=0),this.thumbTop=f*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},p}(i);r.prototype.setInnerHeight=r.prototype.setScrollHeight;var u=function(l){c(p,l);function p(f,o){var h=l.call(this,f,"-h")||this;return h.scrollLeft=0,h.scrollWidth=0,h.height=h.HScrollHeight,h.inner.style.height=h.element.style.height=(h.height||12)+"px",h.renderer=o,h}return p.prototype.onMouseDown=function(f,o){if(f==="mousedown"&&!(a.getButton(o)!==0||o.detail===2)){if(o.target===this.inner){var h=this,_=o.clientX,m=function(L){_=L.clientX},y=function(){clearInterval(g)},C=o.clientX,E=this.thumbLeft,D=function(){if(_!==void 0){var L=h.scrollLeftFromThumbLeft(E+_-C);L!==h.scrollLeft&&h._emit("scroll",{data:L})}};a.capture(this.inner,m,y);var g=setInterval(D,20);return a.preventDefault(o)}var b=o.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(b)}),a.preventDefault(o)}},p.prototype.getHeight=function(){return this.isVisible?this.height:0},p.prototype.scrollLeftFromThumbLeft=function(f){var o=f*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return o=o>>0,o<0?o=0:o>this.pageWidth-this.viewWidth&&(o=this.pageWidth-this.viewWidth),o},p.prototype.setWidth=function(f){this.width=Math.max(0,f),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},p.prototype.setScrollWidth=function(f,o){this.pageWidth===f&&!o||(this.pageWidth=f,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},p.prototype.setScrollLeft=function(f){this.scrollLeft=f,f<0&&(f=0),this.thumbLeft=f*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},p}(i);u.prototype.setInnerWidth=u.prototype.setScrollWidth,t.ScrollBar=r,t.ScrollBarV=r,t.ScrollBarH=u,t.VScrollBar=r,t.HScrollBar=u});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var c=e("./lib/event"),v=function(){function s(a,d){this.onRender=a,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=d||window;var i=this;this._flush=function(r){i.pending=!1;var u=i.changes;if(u&&(c.blockIdle(100),i.changes=0,i.onRender(u)),i.changes){if(i.$recursionLimit--<0)return;i.schedule()}else i.$recursionLimit=2}}return s.prototype.schedule=function(a){this.changes=this.changes|a,this.changes&&!this.pending&&(c.nextFrame(this._flush),this.pending=!0)},s.prototype.clear=function(a){var d=this.changes;return this.changes=0,d},s}();t.RenderLoop=v});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var c=e("../lib/oop"),v=e("../lib/dom"),s=e("../lib/lang"),a=e("../lib/event"),d=e("../lib/useragent"),i=e("../lib/event_emitter").EventEmitter,r=512,u=typeof ResizeObserver=="function",l=200,p=function(){function f(o){this.el=v.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=v.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=v.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),o.appendChild(this.el),this.$measureNode.textContent=s.stringRepeat("X",r),this.$characterSize={width:0,height:0},u?this.$addObserver():this.checkForSizeChanges()}return f.prototype.$setMeasureNodeStyles=function(o,h){o.width=o.height="auto",o.left=o.top="0px",o.visibility="hidden",o.position="absolute",o.whiteSpace="pre",d.isIE<8?o["font-family"]="inherit":o.font="inherit",o.overflow=h?"hidden":"visible"},f.prototype.checkForSizeChanges=function(o){if(o===void 0&&(o=this.$measureSizes()),o&&(this.$characterSize.width!==o.width||this.$characterSize.height!==o.height)){this.$measureNode.style.fontWeight="bold";var h=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=o,this.charSizes=Object.create(null),this.allowBoldFonts=h&&h.width===o.width&&h.height===o.height,this._emit("changeCharacterSize",{data:o})}},f.prototype.$addObserver=function(){var o=this;this.$observer=new window.ResizeObserver(function(h){o.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},f.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var o=this;return this.$pollSizeChangesTimer=a.onIdle(function h(){o.checkForSizeChanges(),a.onIdle(h,500)},500)},f.prototype.setPolling=function(o){o?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},f.prototype.$measureSizes=function(o){var h={height:(o||this.$measureNode).clientHeight,width:(o||this.$measureNode).clientWidth/r};return h.width===0||h.height===0?null:h},f.prototype.$measureCharWidth=function(o){this.$main.textContent=s.stringRepeat(o,r);var h=this.$main.getBoundingClientRect();return h.width/r},f.prototype.getCharacterWidth=function(o){var h=this.charSizes[o];return h===void 0&&(h=this.charSizes[o]=this.$measureCharWidth(o)/this.$characterSize.width),h},f.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},f.prototype.$getZoom=function(o){return!o||!o.parentElement?1:(window.getComputedStyle(o).zoom||1)*this.$getZoom(o.parentElement)},f.prototype.$initTransformMeasureNodes=function(){var o=function(h,_){return["div",{style:"position: absolute;top:"+h+"px;left:"+_+"px;"}]};this.els=v.buildDom([o(0,0),o(l,0),o(0,l),o(l,l)],this.el)},f.prototype.transformCoordinates=function(o,h){if(o){var _=this.$getZoom(this.el);o=E(1/_,o)}function m($,k,H){var U=$[1]*k[0]-$[0]*k[1];return[(-k[1]*H[0]+k[0]*H[1])/U,(+$[1]*H[0]-$[0]*H[1])/U]}function y($,k){return[$[0]-k[0],$[1]-k[1]]}function C($,k){return[$[0]+k[0],$[1]+k[1]]}function E($,k){return[$*k[0],$*k[1]]}this.els||this.$initTransformMeasureNodes();function D($){var k=$.getBoundingClientRect();return[k.left,k.top]}var g=D(this.els[0]),b=D(this.els[1]),L=D(this.els[2]),S=D(this.els[3]),T=m(y(S,b),y(S,L),y(C(b,L),C(S,g))),M=E(1+T[0],y(b,g)),w=E(1+T[1],y(L,g));if(h){var F=h,x=T[0]*F[0]/l+T[1]*F[1]/l+1,R=C(E(F[0],M),E(F[1],w));return C(E(1/x/l,R),g)}var A=y(o,g),I=m(y(M,E(T[0],A)),y(w,E(T[1],A)),A);return E(l,I)},f}();p.prototype.$characterSize={width:0,height:0},c.implement(p.prototype,i),t.FontMetrics=p});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=e("../lib/oop"),s=e("../lib/event_emitter").EventEmitter,a=function(){function d(i,r){this.canvas=c.createElement("canvas"),this.renderer=r,this.pixelRatio=1,this.maxHeight=r.layerConfig.maxHeight,this.lineHeight=r.layerConfig.lineHeight,this.canvasHeight=i.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=i.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},i.element.appendChild(this.canvas)}return d.prototype.$updateDecorators=function(i){var r=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(i){this.maxHeight=i.maxHeight,this.lineHeight=i.lineHeight,this.canvasHeight=i.height;var u=(i.lastRow+1)*this.lineHeight;u<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var l=this.canvas.getContext("2d");function p(S,T){return S.priority<T.priority?-1:S.priority>T.priority?1:0}var f=this.renderer.session.$annotations;if(l.clearRect(0,0,this.canvas.width,this.canvas.height),f){var o={info:1,warning:2,error:3};f.forEach(function(S){S.priority=o[S.type]||null}),f=f.sort(p);for(var h=this.renderer.session.$foldData,_=0;_<f.length;_++){var m=f[_].row,y=this.compensateFoldRows(m,h),C=Math.round((m-y)*this.lineHeight*this.heightRatio),E=Math.round((m-y)*this.lineHeight*this.heightRatio),D=Math.round(((m-y)*this.lineHeight+this.lineHeight)*this.heightRatio),g=D-E;if(g<this.minDecorationHeight){var b=(E+D)/2|0;b<this.halfMinDecorationHeight?b=this.halfMinDecorationHeight:b+this.halfMinDecorationHeight>this.canvasHeight&&(b=this.canvasHeight-this.halfMinDecorationHeight),E=Math.round(b-this.halfMinDecorationHeight),D=Math.round(b+this.halfMinDecorationHeight)}l.fillStyle=r[f[_].type]||null,l.fillRect(0,C,this.canvasWidth,D-E)}}var L=this.renderer.session.selection.getCursor();if(L){var y=this.compensateFoldRows(L.row,h),C=Math.round((L.row-y)*this.lineHeight*this.heightRatio);l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,C,this.canvasWidth,2)}},d.prototype.compensateFoldRows=function(i,r){var u=0;if(r&&r.length>0)for(var l=0;l<r.length;l++)i>r[l].start.row&&i<r[l].end.row?u+=i-r[l].start.row:i>=r[l].end.row&&(u+=r[l].end.row-r[l].start.row);return u},d}();v.implement(a.prototype,s),t.Decorator=a});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/dom"),s=e("./lib/lang"),a=e("./config"),d=e("./layer/gutter").Gutter,i=e("./layer/marker").Marker,r=e("./layer/text").Text,u=e("./layer/cursor").Cursor,l=e("./scrollbar").HScrollBar,p=e("./scrollbar").VScrollBar,f=e("./scrollbar_custom").HScrollBar,o=e("./scrollbar_custom").VScrollBar,h=e("./renderloop").RenderLoop,_=e("./layer/font_metrics").FontMetrics,m=e("./lib/event_emitter").EventEmitter,y=e("./css/editor-css"),C=e("./layer/decorators").Decorator,E=e("./lib/useragent");v.importCssString(y,"ace_editor.css",!1);var D=function(){function g(b,L){var S=this;this.container=b||v.createElement("div"),v.addCssClass(this.container,"ace_editor"),v.HI_DPI&&v.addCssClass(this.container,"ace_hidpi"),this.setTheme(L),a.get("useStrictCSP")==null&&a.set("useStrictCSP",!1),this.$gutter=v.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=v.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=v.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new d(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new i(this.content);var T=this.$textLayer=new r(this.content);this.canvas=T.element,this.$markerFront=new i(this.content),this.$cursorLayer=new u(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new p(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on("scroll",function(M){S.$scrollAnimation||S.session.setScrollTop(M.data-S.scrollMargin.top)}),this.scrollBarH.on("scroll",function(M){S.$scrollAnimation||S.session.setScrollLeft(M.data-S.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new _(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(M){S.updateCharacterSize(),S.onResize(!0,S.gutterWidth,S.$size.width,S.$size.height),S._signal("changeCharacterSize",M)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!E.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),a.resetOptions(this),a._signal("renderer",this)}return g.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),v.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},g.prototype.setSession=function(b){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=b,b&&this.scrollMargin.top&&b.getScrollTop()<=0&&b.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(b),this.$markerBack.setSession(b),this.$markerFront.setSession(b),this.$gutterLayer.setSession(b),this.$textLayer.setSession(b),b&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},g.prototype.updateLines=function(b,L,S){if(L===void 0&&(L=1/0),this.$changedLines?(this.$changedLines.firstRow>b&&(this.$changedLines.firstRow=b),this.$changedLines.lastRow<L&&(this.$changedLines.lastRow=L)):this.$changedLines={firstRow:b,lastRow:L},this.$changedLines.lastRow<this.layerConfig.firstRow)if(S)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},g.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},g.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},g.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},g.prototype.updateFull=function(b){b?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},g.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},g.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},g.prototype.onResize=function(b,L,S,T){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=b?1:0;var M=this.container;T||(T=M.clientHeight||M.scrollHeight),S||(S=M.clientWidth||M.scrollWidth);var w=this.$updateCachedSize(b,L,S,T);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!S&&!T)return this.resizing=0;b&&(this.$gutterLayer.$padding=null),b?this.$renderChanges(w|this.$changes,!0):this.$loop.schedule(w|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},g.prototype.$updateCachedSize=function(b,L,S,T){T-=this.$extraHeight||0;var M=0,w=this.$size,F={width:w.width,height:w.height,scrollerHeight:w.scrollerHeight,scrollerWidth:w.scrollerWidth};if(T&&(b||w.height!=T)&&(w.height=T,M|=this.CHANGE_SIZE,w.scrollerHeight=w.height,this.$horizScroll&&(w.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(w.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",M=M|this.CHANGE_SCROLL),S&&(b||w.width!=S)){M|=this.CHANGE_SIZE,w.width=S,L==null&&(L=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=L,v.setStyle(this.scrollBarH.element.style,"left",L+"px"),v.setStyle(this.scroller.style,"left",L+this.margin.left+"px"),w.scrollerWidth=Math.max(0,S-L-this.scrollBarV.getWidth()-this.margin.h),v.setStyle(this.$gutter.style,"left",this.margin.left+"px");var x=this.scrollBarV.getWidth()+"px";v.setStyle(this.scrollBarH.element.style,"right",x),v.setStyle(this.scroller.style,"right",x),v.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(w.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||b)&&(M|=this.CHANGE_FULL)}return w.$dirty=!S||!T,M&&this._signal("resize",F),M},g.prototype.onGutterResize=function(b){var L=this.$showGutter?b:0;L!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,L,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},g.prototype.adjustWrapLimit=function(){var b=this.$size.scrollerWidth-this.$padding*2,L=Math.floor(b/this.characterWidth);return this.session.adjustWrapLimit(L,this.$showPrintMargin&&this.$printMarginColumn)},g.prototype.setAnimatedScroll=function(b){this.setOption("animatedScroll",b)},g.prototype.getAnimatedScroll=function(){return this.$animatedScroll},g.prototype.setShowInvisibles=function(b){this.setOption("showInvisibles",b),this.session.$bidiHandler.setShowInvisibles(b)},g.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},g.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},g.prototype.setDisplayIndentGuides=function(b){this.setOption("displayIndentGuides",b)},g.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},g.prototype.setHighlightIndentGuides=function(b){this.setOption("highlightIndentGuides",b)},g.prototype.setShowPrintMargin=function(b){this.setOption("showPrintMargin",b)},g.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},g.prototype.setPrintMarginColumn=function(b){this.setOption("printMarginColumn",b)},g.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},g.prototype.getShowGutter=function(){return this.getOption("showGutter")},g.prototype.setShowGutter=function(b){return this.setOption("showGutter",b)},g.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},g.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},g.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},g.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},g.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var b=v.createElement("div");b.className="ace_layer ace_print-margin-layer",this.$printMarginEl=v.createElement("div"),this.$printMarginEl.className="ace_print-margin",b.appendChild(this.$printMarginEl),this.content.insertBefore(b,this.content.firstChild)}var L=this.$printMarginEl.style;L.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",L.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},g.prototype.getContainerElement=function(){return this.container},g.prototype.getMouseEventTarget=function(){return this.scroller},g.prototype.getTextAreaContainer=function(){return this.container},g.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var b=this.textarea.style,L=this.$composition;if(!this.$keepTextAreaAtCursor&&!L){v.translate(this.textarea,-100,0);return}var S=this.$cursorLayer.$pixelPos;if(S){L&&L.markerRange&&(S=this.$cursorLayer.getPixelPosition(L.markerRange.start,!0));var T=this.layerConfig,M=S.top,w=S.left;M-=T.offset;var F=L&&L.useTextareaForIME||E.isMobile?this.lineHeight:1;if(M<0||M>T.height-F){v.translate(this.textarea,0,0);return}var x=1,R=this.$size.height-F;if(!L)M+=this.lineHeight;else if(L.useTextareaForIME){var A=this.textarea.value;x=this.characterWidth*this.session.$getStringScreenWidth(A)[0]}else M+=this.lineHeight+2;w-=this.scrollLeft,w>this.$size.scrollerWidth-x&&(w=this.$size.scrollerWidth-x),w+=this.gutterWidth+this.margin.left,v.setStyle(b,"height",F+"px"),v.setStyle(b,"width",x+"px"),v.translate(this.textarea,Math.min(w,this.$size.scrollerWidth-x),Math.min(M,R))}}},g.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},g.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},g.prototype.getLastFullyVisibleRow=function(){var b=this.layerConfig,L=b.lastRow,S=this.session.documentToScreenRow(L,0)*b.lineHeight;return S-this.session.getScrollTop()>b.height-b.lineHeight?L-1:L},g.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},g.prototype.setPadding=function(b){this.$padding=b,this.$textLayer.setPadding(b),this.$cursorLayer.setPadding(b),this.$markerFront.setPadding(b),this.$markerBack.setPadding(b),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},g.prototype.setScrollMargin=function(b,L,S,T){var M=this.scrollMargin;M.top=b|0,M.bottom=L|0,M.right=T|0,M.left=S|0,M.v=M.top+M.bottom,M.h=M.left+M.right,M.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-M.top),this.updateFull()},g.prototype.setMargin=function(b,L,S,T){var M=this.margin;M.top=b|0,M.bottom=L|0,M.right=T|0,M.left=S|0,M.v=M.top+M.bottom,M.h=M.left+M.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},g.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},g.prototype.setHScrollBarAlwaysVisible=function(b){this.setOption("hScrollBarAlwaysVisible",b)},g.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},g.prototype.setVScrollBarAlwaysVisible=function(b){this.setOption("vScrollBarAlwaysVisible",b)},g.prototype.$updateScrollBarV=function(){var b=this.layerConfig.maxHeight,L=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(b-=(L-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>b-L&&(b=this.scrollTop+L,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(b+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},g.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},g.prototype.freeze=function(){this.$frozen=!0},g.prototype.unfreeze=function(){this.$frozen=!1},g.prototype.$renderChanges=function(b,L){if(this.$changes&&(b|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!b&&!L){this.$changes|=b;return}if(this.$size.$dirty)return this.$changes|=b,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",b),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var S=this.layerConfig;if(b&this.CHANGE_FULL||b&this.CHANGE_SIZE||b&this.CHANGE_TEXT||b&this.CHANGE_LINES||b&this.CHANGE_SCROLL||b&this.CHANGE_H_SCROLL){if(b|=this.$computeLayerConfig()|this.$loop.clear(),S.firstRow!=this.layerConfig.firstRow&&S.firstRowScreen==this.layerConfig.firstRowScreen){var T=this.scrollTop+(S.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;T>0&&(this.scrollTop=T,b=b|this.CHANGE_SCROLL,b|=this.$computeLayerConfig()|this.$loop.clear())}S=this.layerConfig,this.$updateScrollBarV(),b&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),v.translate(this.content,-this.scrollLeft,-S.offset);var M=S.width+2*this.$padding+"px",w=S.minHeight+"px";v.setStyle(this.content.style,"width",M),v.setStyle(this.content.style,"height",w)}if(b&this.CHANGE_H_SCROLL&&(v.translate(this.content,-this.scrollLeft,-S.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),b&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(S),this.$showGutter&&this.$gutterLayer.update(S),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S),this.$markerBack.update(S),this.$markerFront.update(S),this.$cursorLayer.update(S),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}if(b&this.CHANGE_SCROLL){this.$changedLines=null,b&this.CHANGE_TEXT||b&this.CHANGE_LINES?this.$textLayer.update(S):this.$textLayer.scrollLines(S),this.$showGutter&&(b&this.CHANGE_GUTTER||b&this.CHANGE_LINES?this.$gutterLayer.update(S):this.$gutterLayer.scrollLines(S)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S),this.$markerBack.update(S),this.$markerFront.update(S),this.$cursorLayer.update(S),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}b&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(S),this.$showGutter&&this.$gutterLayer.update(S),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S)):b&this.CHANGE_LINES?((this.$updateLines()||b&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(S),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S)):b&this.CHANGE_TEXT||b&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(S),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S)):b&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(S),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S)),b&this.CHANGE_CURSOR&&(this.$cursorLayer.update(S),this.$moveTextAreaToCursor()),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(S),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(S),this._signal("afterRender",b)},g.prototype.$autosize=function(){var b=this.session.getScreenLength()*this.lineHeight,L=this.$maxLines*this.lineHeight,S=Math.min(L,Math.max((this.$minLines||1)*this.lineHeight,b))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(S+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&S>this.$maxPixelHeight&&(S=this.$maxPixelHeight);var T=S<=2*this.lineHeight,M=!T&&b>L;if(S!=this.desiredHeight||this.$size.height!=this.desiredHeight||M!=this.$vScroll){M!=this.$vScroll&&(this.$vScroll=M,this.scrollBarV.setVisible(M));var w=this.container.clientWidth;this.container.style.height=S+"px",this.$updateCachedSize(!0,this.$gutterWidth,w,S),this.desiredHeight=S,this._signal("autosize")}},g.prototype.$computeLayerConfig=function(){var b=this.session,L=this.$size,S=L.height<=2*this.lineHeight,T=this.session.getScreenLength(),M=T*this.lineHeight,w=this.$getLongestLine(),F=!S&&(this.$hScrollBarAlwaysVisible||L.scrollerWidth-w-2*this.$padding<0),x=this.$horizScroll!==F;x&&(this.$horizScroll=F,this.scrollBarH.setVisible(F));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var A=L.scrollerHeight+this.lineHeight,I=!this.$maxLines&&this.$scrollPastEnd?(L.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;M+=I;var $=this.scrollMargin;this.session.setScrollTop(Math.max(-$.top,Math.min(this.scrollTop,M-L.scrollerHeight+$.bottom))),this.session.setScrollLeft(Math.max(-$.left,Math.min(this.scrollLeft,w+2*this.$padding-L.scrollerWidth+$.right)));var k=!S&&(this.$vScrollBarAlwaysVisible||L.scrollerHeight-M+I<0||this.scrollTop>$.top),H=R!==k;H&&(this.$vScroll=k,this.scrollBarV.setVisible(k));var U=this.scrollTop%this.lineHeight,q=Math.ceil(A/this.lineHeight)-1,N=Math.max(0,Math.round((this.scrollTop-U)/this.lineHeight)),K=N+q,O,B,W=this.lineHeight;N=b.screenToDocumentRow(N,0);var P=b.getFoldLine(N);P&&(N=P.start.row),O=b.documentToScreenRow(N,0),B=b.getRowLength(N)*W,K=Math.min(b.screenToDocumentRow(K,0),b.getLength()-1),A=L.scrollerHeight+b.getRowLength(K)*W+B,U=this.scrollTop-O*W;var Y=0;return(this.layerConfig.width!=w||x)&&(Y=this.CHANGE_H_SCROLL),(x||H)&&(Y|=this.$updateCachedSize(!0,this.gutterWidth,L.width,L.height),this._signal("scrollbarVisibilityChanged"),H&&(w=this.$getLongestLine())),this.layerConfig={width:w,padding:this.$padding,firstRow:N,firstRowScreen:O,lastRow:K,lineHeight:W,characterWidth:this.characterWidth,minHeight:A,maxHeight:M,offset:U,gutterOffset:W?Math.max(0,Math.ceil((U+L.height-L.scrollerHeight)/W)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(w-this.$padding),Y},g.prototype.$updateLines=function(){if(this.$changedLines){var b=this.$changedLines.firstRow,L=this.$changedLines.lastRow;this.$changedLines=null;var S=this.layerConfig;if(!(b>S.lastRow+1)&&!(L<S.firstRow)){if(L===1/0){this.$showGutter&&this.$gutterLayer.update(S),this.$textLayer.update(S);return}return this.$textLayer.updateLines(S,b,L),!0}}},g.prototype.$getLongestLine=function(){var b=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(b+=1),this.$textLayer&&b>this.$textLayer.MAX_LINE_LENGTH&&(b=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(b*this.characterWidth))},g.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},g.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},g.prototype.addGutterDecoration=function(b,L){this.$gutterLayer.addGutterDecoration(b,L)},g.prototype.removeGutterDecoration=function(b,L){this.$gutterLayer.removeGutterDecoration(b,L)},g.prototype.updateBreakpoints=function(b){this._rows=b,this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.setAnnotations=function(b){this.$gutterLayer.setAnnotations(b),this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},g.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},g.prototype.showCursor=function(){this.$cursorLayer.showCursor()},g.prototype.scrollSelectionIntoView=function(b,L,S){this.scrollCursorIntoView(b,S),this.scrollCursorIntoView(L,S)},g.prototype.scrollCursorIntoView=function(b,L,S){if(this.$size.scrollerHeight!==0){var T=this.$cursorLayer.getPixelPosition(b),M=T.left,w=T.top,F=S&&S.top||0,x=S&&S.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+F>w?(L&&R+F>w+this.lineHeight&&(w-=L*this.$size.scrollerHeight),w===0&&(w=-this.scrollMargin.top),this.session.setScrollTop(w)):R+this.$size.scrollerHeight-x<w+this.lineHeight&&(L&&R+this.$size.scrollerHeight-x<w-this.lineHeight&&(w+=L*this.$size.scrollerHeight),this.session.setScrollTop(w+this.lineHeight+x-this.$size.scrollerHeight));var A=this.scrollLeft,I=2*this.layerConfig.characterWidth;M-I<A?(M-=I,M<this.$padding+I&&(M=-this.scrollMargin.left),this.session.setScrollLeft(M)):(M+=I,A+this.$size.scrollerWidth<M+this.characterWidth?this.session.setScrollLeft(Math.round(M+this.characterWidth-this.$size.scrollerWidth)):A<=this.$padding&&M-A<this.characterWidth&&this.session.setScrollLeft(0))}},g.prototype.getScrollTop=function(){return this.session.getScrollTop()},g.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},g.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},g.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},g.prototype.scrollToRow=function(b){this.session.setScrollTop(b*this.lineHeight)},g.prototype.alignCursor=function(b,L){typeof b=="number"&&(b={row:b,column:0});var S=this.$cursorLayer.getPixelPosition(b),T=this.$size.scrollerHeight-this.lineHeight,M=S.top-T*(L||0);return this.session.setScrollTop(M),M},g.prototype.$calcSteps=function(b,L){var S=0,T=this.STEPS,M=[],w=function(F,x,R){return R*(Math.pow(F-1,3)+1)+x};for(S=0;S<T;++S)M.push(w(S/this.STEPS,b,L-b));return M},g.prototype.scrollToLine=function(b,L,S,T){var M=this.$cursorLayer.getPixelPosition({row:b,column:0}),w=M.top;L&&(w-=this.$size.scrollerHeight/2);var F=this.scrollTop;this.session.setScrollTop(w),S!==!1&&this.animateScrolling(F,T)},g.prototype.animateScrolling=function(b,L){var S=this.scrollTop;if(!this.$animatedScroll)return;var T=this;if(b==S)return;if(this.$scrollAnimation){var M=this.$scrollAnimation.steps;if(M.length&&(b=M[0],b==S))return}var w=T.$calcSteps(b,S);this.$scrollAnimation={from:b,to:S,steps:w},clearInterval(this.$timer),T.session.setScrollTop(w.shift()),T.session.$scrollTop=S;function F(){T.$timer=clearInterval(T.$timer),T.$scrollAnimation=null,T.$stopAnimation=!1,L&&L()}this.$timer=setInterval(function(){if(T.$stopAnimation){F();return}if(!T.session)return clearInterval(T.$timer);w.length?(T.session.setScrollTop(w.shift()),T.session.$scrollTop=S):S!=null?(T.session.$scrollTop=-1,T.session.setScrollTop(S),S=null):F()},10)},g.prototype.scrollToY=function(b){this.scrollTop!==b&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=b)},g.prototype.scrollToX=function(b){this.scrollLeft!==b&&(this.scrollLeft=b),this.$loop.schedule(this.CHANGE_H_SCROLL)},g.prototype.scrollTo=function(b,L){this.session.setScrollTop(L),this.session.setScrollLeft(b)},g.prototype.scrollBy=function(b,L){L&&this.session.setScrollTop(this.session.getScrollTop()+L),b&&this.session.setScrollLeft(this.session.getScrollLeft()+b)},g.prototype.isScrollableBy=function(b,L){if(L<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||L>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||b<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||b>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},g.prototype.pixelToScreenCoordinates=function(b,L){var S;if(this.$hasCssTransforms){S={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,L]);b=T[1]-this.gutterWidth-this.margin.left,L=T[0]}else S=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-S.left-this.$padding,w=M/this.characterWidth,F=Math.floor((L+this.scrollTop-S.top)/this.lineHeight),x=this.$blockCursor?Math.floor(w):Math.round(w);return{row:F,column:x,side:w-x>0?1:-1,offsetX:M}},g.prototype.screenToTextCoordinates=function(b,L){var S;if(this.$hasCssTransforms){S={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,L]);b=T[1]-this.gutterWidth-this.margin.left,L=T[0]}else S=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-S.left-this.$padding,w=M/this.characterWidth,F=this.$blockCursor?Math.floor(w):Math.round(w),x=Math.floor((L+this.scrollTop-S.top)/this.lineHeight);return this.session.screenToDocumentPosition(x,Math.max(F,0),M)},g.prototype.textToScreenCoordinates=function(b,L){var S=this.scroller.getBoundingClientRect(),T=this.session.documentToScreenPosition(b,L),M=this.$padding+(this.session.$bidiHandler.isBidiRow(T.row,b)?this.session.$bidiHandler.getPosLeft(T.column):Math.round(T.column*this.characterWidth)),w=T.row*this.lineHeight;return{pageX:S.left+M-this.scrollLeft,pageY:S.top+w-this.scrollTop}},g.prototype.visualizeFocus=function(){v.addCssClass(this.container,"ace_focus")},g.prototype.visualizeBlur=function(){v.removeCssClass(this.container,"ace_focus")},g.prototype.showComposition=function(b){this.$composition=b,b.cssText||(b.cssText=this.textarea.style.cssText),b.useTextareaForIME==null&&(b.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(v.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):b.markerId=this.session.addMarker(b.markerRange,"ace_composition_marker","text")},g.prototype.setCompositionText=function(b){var L=this.session.selection.cursor;this.addToken(b,"composition_placeholder",L.row,L.column),this.$moveTextAreaToCursor()},g.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),v.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var b=this.session.selection.cursor;this.removeExtraToken(b.row,b.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},g.prototype.setGhostText=function(b,L){var S=this.session.selection.cursor,T=L||{row:S.row,column:S.column};this.removeGhostText();var M=b.split(`
`);if(this.addToken(M[0],"ghost_text",T.row,T.column),this.$ghostText={text:b,position:{row:T.row,column:T.column}},M.length>1){this.$ghostTextWidget={text:M.slice(1).join(`
`),row:T.row,column:T.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var w=this.$cursorLayer.getPixelPosition(T,!0),F=this.container,x=F.getBoundingClientRect().height,R=M.length*this.lineHeight,A=R<x-w.top;if(A)return;R<x?this.scrollBy(0,(M.length-1)*this.lineHeight):this.scrollBy(0,w.top)}},g.prototype.removeGhostText=function(){if(this.$ghostText){var b=this.$ghostText.position;this.removeExtraToken(b.row,b.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},g.prototype.addToken=function(b,L,S,T){var M=this.session;M.bgTokenizer.lines[S]=null;var w={type:L,value:b},F=M.getTokens(S);if(T==null||!F.length)F.push(w);else for(var x=0,R=0;R<F.length;R++){var A=F[R];if(x+=A.value.length,T<=x){var I=A.value.length-(x-T),$=A.value.slice(0,I),k=A.value.slice(I);F.splice(R,1,{type:A.type,value:$},w,{type:A.type,value:k});break}}this.updateLines(S,S)},g.prototype.removeExtraToken=function(b,L){this.session.bgTokenizer.lines[b]=null,this.updateLines(b,b)},g.prototype.setTheme=function(b,L){var S=this;if(this.$themeId=b,S._dispatchEvent("themeChange",{theme:b}),!b||typeof b=="string"){var T=b||this.$options.theme.initialValue;a.loadModule(["theme",T],M)}else M(b);function M(w){if(S.$themeId!=b)return L&&L();if(!w||!w.cssClass)throw new Error("couldn't load module "+b+" or it didn't call define");w.$id&&(S.$themeId=w.$id),v.importCssString(w.cssText,w.cssClass,S.container),S.theme&&v.removeCssClass(S.container,S.theme.cssClass);var F="padding"in w?w.padding:"padding"in(S.theme||{})?4:S.$padding;S.$padding&&F!=S.$padding&&S.setPadding(F),S.$theme=w.cssClass,S.theme=w,v.addCssClass(S.container,w.cssClass),v.setCssClass(S.container,"ace_dark",w.isDark),S.$size&&(S.$size.width=0,S.$updateSizeAsync()),S._dispatchEvent("themeLoaded",{theme:w}),L&&L()}},g.prototype.getTheme=function(){return this.$themeId},g.prototype.setStyle=function(b,L){v.setCssClass(this.container,b,L!==!1)},g.prototype.unsetStyle=function(b){v.removeCssClass(this.container,b)},g.prototype.setCursorStyle=function(b){v.setStyle(this.scroller.style,"cursor",b)},g.prototype.setMouseCursor=function(b){v.setStyle(this.scroller.style,"cursor",b)},g.prototype.attachToShadowRoot=function(){v.importCssString(y,"ace_editor.css",this.container)},g.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},g.prototype.$updateCustomScrollbar=function(b){var L=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,b===!0?(this.scrollBarV=new o(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(S){L.$scrollAnimation||L.session.setScrollTop(S.data-L.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(S){L.$scrollAnimation||L.session.setScrollLeft(S.data-L.scrollMargin.left)}),this.$scrollDecorator=new C(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new p(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",function(S){L.$scrollAnimation||L.session.setScrollTop(S.data-L.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(S){L.$scrollAnimation||L.session.setScrollLeft(S.data-L.scrollMargin.left)}))},g.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var b=this;this.$resizeTimer=s.delayedCall(function(){b.destroyed||b.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(L){var S=L[0].contentRect.width,T=L[0].contentRect.height;Math.abs(b.$size.width-S)>1||Math.abs(b.$size.height-T)>1?b.$resizeTimer.delay():b.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},g}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,c.implement(D.prototype,m),a.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(g){!g&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):g&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(g){this.$textLayer.setShowInvisibles(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(g){typeof g=="number"&&(this.$printMarginColumn=g),this.$showPrintMargin=!!g,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(g){this.$gutter.style.display=g?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(g){this.$gutterLayer.$useSvgGutterIcons=g},initialValue:!1},showFoldedAnnotations:{set:function(g){this.$gutterLayer.$showFoldedAnnotations=g},initialValue:!1},fadeFoldWidgets:{set:function(g){v.setCssClass(this.$gutter,"ace_fade-fold-widgets",g)},initialValue:!1},showFoldWidgets:{set:function(g){this.$gutterLayer.setShowFoldWidgets(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(g){this.$textLayer.setDisplayIndentGuides(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(g){this.$textLayer.setHighlightIndentGuides(g)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(g){this.$gutterLayer.setHighlightGutterLine(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(g){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(g){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(g){typeof g=="number"&&(g=g+"px"),this.container.style.fontSize=g,this.updateFontSize()},initialValue:12},fontFamily:{set:function(g){this.container.style.fontFamily=g,this.updateFontSize()}},maxLines:{set:function(g){this.updateFull()}},minLines:{set:function(g){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(g){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(g){g=+g||0,this.$scrollPastEnd!=g&&(this.$scrollPastEnd=g,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(g){this.$gutterLayer.$fixedWidth=!!g,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(g){this.$updateCustomScrollbar(g)},initialValue:!1},theme:{set:function(g){this.setTheme(g)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!E.isMobile&&!E.isIE}}),t.VirtualRenderer=D});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var c=e("../lib/oop"),v=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,a=e("../config");function d(l){var p="importScripts('"+v.qualifyURL(l)+"');";try{return new Blob([p],{type:"application/javascript"})}catch{var f=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,o=new f;return o.append(p),o.getBlob("application/javascript")}}function i(l){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var p=d(l),f=window.URL||window.webkitURL,o=f.createObjectURL(p);return new Worker(o)}return new Worker(l)}var r=function(l){l.postMessage||(l=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=l,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){c.implement(this,s),this.$createWorkerFromOldConfig=function(l,p,f,o,h){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),a.get("packaged")||!e.toUrl)o=o||a.moduleUrl(p,"worker");else{var _=this.$normalizePath;o=o||_(e.toUrl("ace/worker/worker.js",null,"_"));var m={};l.forEach(function(y){m[y]=_(e.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=i(o),h&&this.send("importScripts",h),this.$worker.postMessage({init:!0,tlns:m,module:p,classname:f}),this.$worker},this.onMessage=function(l){var p=l.data;switch(p.type){case"event":this._signal(p.name,{data:p.data});break;case"call":var f=this.callbacks[p.id];f&&(f(p.data),delete this.callbacks[p.id]);break;case"error":this.reportError(p.data);break;case"log":window.console&&console.log&&console.log.apply(console,p.data);break}},this.reportError=function(l){window.console&&console.error&&console.error(l)},this.$normalizePath=function(l){return v.qualifyURL(l)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(l){l.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(l,p){this.$worker.postMessage({command:l,args:p})},this.call=function(l,p,f){if(f){var o=this.callbackId++;this.callbacks[o]=f,p.push(o)}this.send(l,p)},this.emit=function(l,p){try{p.data&&p.data.err&&(p.data.err={message:p.data.err.message,stack:p.data.err.stack,code:p.data.err.code}),this.$worker&&this.$worker.postMessage({event:l,data:{data:p.data}})}catch(f){console.error(f.stack)}},this.attachToDocument=function(l){this.$doc&&this.terminate(),this.$doc=l,this.call("setValue",[l.getValue()]),l.on("change",this.changeListener,!0)},this.changeListener=function(l){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),l.action=="insert"?this.deltaQueue.push(l.start,l.lines):this.deltaQueue.push(l.start,l.end)},this.$sendDeltaQueue=function(){var l=this.deltaQueue;l&&(this.deltaQueue=null,l.length>50&&l.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:l}))}}).call(r.prototype);var u=function(l,p,f){var o=null,h=!1,_=Object.create(s),m=[],y=new r({messageBuffer:m,terminate:function(){},postMessage:function(E){m.push(E),o&&(h?setTimeout(C):C())}});y.setEmitSync=function(E){h=E};var C=function(){var E=m.shift();E.command?o[E.command].apply(o,E.args):E.event&&_._signal(E.event,E.data)};return _.postMessage=function(E){y.onMessage({data:E})},_.callback=function(E,D){this.postMessage({type:"call",id:D,data:E})},_.emit=function(E,D){this.postMessage({type:"event",name:E,data:D})},a.loadModule(["worker",p],function(E){for(o=new E[f](_);m.length;)C()}),y};t.UIWorkerClient=u,t.WorkerClient=r,t.createWorker=i});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var c=e("./range").Range,v=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),a=function(){function d(i,r,u,l,p,f){var o=this;this.length=r,this.session=i,this.doc=i.getDocument(),this.mainClass=p,this.othersClass=f,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=l,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=u;var h=i.getUndoManager().$undoStack||i.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),i.selection.on("changeCursor",this.$onCursorChange)}return d.prototype.setup=function(){var i=this,r=this.doc,u=this.session;this.selectionBefore=u.selection.toJSON(),u.selection.inMultiSelectMode&&u.selection.toSingleRange(),this.pos=r.createAnchor(this.$pos.row,this.$pos.column);var l=this.pos;l.$insertRight=!0,l.detach(),l.markerId=u.addMarker(new c(l.row,l.column,l.row,l.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(p){var f=r.createAnchor(p.row,p.column);f.$insertRight=!0,f.detach(),i.others.push(f)}),u.setUndoSelect(!1)},d.prototype.showOtherMarkers=function(){if(!this.othersActive){var i=this.session,r=this;this.othersActive=!0,this.others.forEach(function(u){u.markerId=i.addMarker(new c(u.row,u.column,u.row,u.column+r.length),r.othersClass,null,!1)})}},d.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var i=0;i<this.others.length;i++)this.session.removeMarker(this.others[i].markerId)}},d.prototype.onUpdate=function(i){if(this.$updating)return this.updateAnchors(i);var r=i;if(r.start.row===r.end.row&&r.start.row===this.pos.row){this.$updating=!0;var u=i.action==="insert"?r.end.column-r.start.column:r.start.column-r.end.column,l=r.start.column>=this.pos.column&&r.start.column<=this.pos.column+this.length+1,p=r.start.column-this.pos.column;if(this.updateAnchors(i),l&&(this.length+=u),l&&!this.session.$fromUndo){if(i.action==="insert")for(var f=this.others.length-1;f>=0;f--){var o=this.others[f],h={row:o.row,column:o.column+p};this.doc.insertMergedLines(h,i.lines)}else if(i.action==="remove")for(var f=this.others.length-1;f>=0;f--){var o=this.others[f],h={row:o.row,column:o.column+p};this.doc.remove(new c(h.row,h.column,h.row,h.column-u))}}this.$updating=!1,this.updateMarkers()}},d.prototype.updateAnchors=function(i){this.pos.onChange(i);for(var r=this.others.length;r--;)this.others[r].onChange(i);this.updateMarkers()},d.prototype.updateMarkers=function(){if(!this.$updating){var i=this,r=this.session,u=function(p,f){r.removeMarker(p.markerId),p.markerId=r.addMarker(new c(p.row,p.column,p.row,p.column+i.length),f,null,!1)};u(this.pos,this.mainClass);for(var l=this.others.length;l--;)u(this.others[l],this.othersClass)}},d.prototype.onCursorChange=function(i){if(!(this.$updating||!this.session)){var r=this.session.selection.getCursor();r.row===this.pos.row&&r.column>=this.pos.column&&r.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",i)):(this.hideOtherMarkers(),this._emit("cursorLeave",i))}},d.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},d.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var i=this.session.getUndoManager(),r=(i.$undoStack||i.$undostack).length-this.$undoStackDepth,u=0;u<r;u++)i.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},d}();s.implement(a.prototype,v),t.PlaceHolder=a});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var c=e("../lib/event"),v=e("../lib/useragent");function s(d,i){return d.row==i.row&&d.column==i.column}function a(d){var i=d.domEvent,r=i.altKey,u=i.shiftKey,l=i.ctrlKey,p=d.getAccelKey(),f=d.getButton();if(l&&v.isMac&&(f=i.button),d.editor.inMultiSelectMode&&f==2){d.editor.textInput.onContextMenu(d.domEvent);return}if(!l&&!r&&!p){f===0&&d.editor.inMultiSelectMode&&d.editor.exitMultiSelectMode();return}if(f===0){var o=d.editor,h=o.selection,_=o.inMultiSelectMode,m=d.getDocumentPosition(),y=h.getCursor(),C=d.inSelection()||h.isEmpty()&&s(m,y),E=d.x,D=d.y,g=function(k){E=k.clientX,D=k.clientY},b=o.session,L=o.renderer.pixelToScreenCoordinates(E,D),S=L,T;if(o.$mouseHandler.$enableJumpToDef)l&&r||p&&r?T=u?"block":"add":r&&o.$blockSelectEnabled&&(T="block");else if(p&&!r){if(T="add",!_&&u)return}else r&&o.$blockSelectEnabled&&(T="block");if(T&&v.isMac&&i.ctrlKey&&o.$mouseHandler.cancelContextMenu(),T=="add"){if(!_&&C)return;if(!_){var M=h.toOrientedRange();o.addSelectionMarker(M)}var w=h.rangeList.rangeAtPoint(m);o.inVirtualSelectionMode=!0,u&&(w=null,M=h.ranges[0]||M,o.removeSelectionMarker(M)),o.once("mouseup",function(){var k=h.toOrientedRange();w&&k.isEmpty()&&s(w.cursor,k.cursor)?h.substractPoint(k.cursor):(u?h.substractPoint(M.cursor):M&&(o.removeSelectionMarker(M),h.addRange(M)),h.addRange(k)),o.inVirtualSelectionMode=!1})}else if(T=="block"){d.stop(),o.inVirtualSelectionMode=!0;var F,x=[],R=function(){var k=o.renderer.pixelToScreenCoordinates(E,D),H=b.screenToDocumentPosition(k.row,k.column,k.offsetX);s(S,k)&&s(H,h.lead)||(S=k,o.selection.moveToPosition(H),o.renderer.scrollCursorIntoView(),o.removeSelectionMarkers(x),x=h.rectangularRangeBlock(S,L),o.$mouseHandler.$clickSelection&&x.length==1&&x[0].isEmpty()&&(x[0]=o.$mouseHandler.$clickSelection.clone()),x.forEach(o.addSelectionMarker,o),o.updateSelectionMarkers())};_&&!p?h.toSingleRange():!_&&p&&(F=h.toOrientedRange(),o.addSelectionMarker(F)),u?L=b.documentToScreenPosition(h.lead):h.moveToPosition(m),S={row:-1,column:-1};var A=function(k){R(),clearInterval($),o.removeSelectionMarkers(x),x.length||(x=[h.toOrientedRange()]),F&&(o.removeSelectionMarker(F),h.toSingleRange(F));for(var H=0;H<x.length;H++)h.addRange(x[H]);o.inVirtualSelectionMode=!1,o.$mouseHandler.$clickSelection=null},I=R;c.capture(o.container,g,A);var $=setInterval(function(){I()},20);return d.preventDefault()}}}t.onMouseDown=a});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(v){v.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(v){v.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(v){v.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(v){v.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(v){v.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(v){v.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(v){v.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(v){v.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(v){v.multiSelect.rangeCount>1?v.multiSelect.joinSelections():v.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(v){v.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(v){v.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(v){v.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(v){v.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(v){return v&&v.inMultiSelectMode}}];var c=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new c(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var c=e("./range_list").RangeList,v=e("./range").Range,s=e("./selection").Selection,a=e("./mouse/multi_select_handler").onMouseDown,d=e("./lib/event"),i=e("./lib/lang"),r=e("./commands/multi_select_commands");t.commands=r.defaultCommands.concat(r.multiSelectCommands);var u=e("./search").Search,l=new u;function p(y,C,E){return l.$options.wrap=!0,l.$options.needle=C,l.$options.backwards=E==-1,l.find(y)}var f=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(f.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,C){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var E=this.toOrientedRange();if(this.rangeList.add(E),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),C||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(E),this.$onAddRange(E)}y.cursor||(y.cursor=y.end);var D=this.rangeList.add(y);return this.$onAddRange(y),D.length&&this.$onRemoveRange(D),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),C||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var C=this.rangeList.removeAll();C.length&&this.$onRemoveRange(C),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var C=this.rangeList.substractPoint(y);if(C)return this.$onRemoveRange(C),C[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var C=this.rangeList.ranges.pop();y.push(C),this.rangeCount=0}for(var E=y.length;E--;){var D=this.ranges.indexOf(y[E]);this.ranges.splice(D,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),C=C||this.ranges[0],C&&!C.isEqual(this.getRange())&&this.fromOrientedRange(C)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new c,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],C=[],E=0;E<y.length;E++){var D=y[E],g=D.start.row,b=D.end.row;if(g===b)C.push(D.clone());else{for(C.push(new v(g,D.start.column,g,this.session.getLine(g).length));++g<b;)C.push(this.getLineRange(g,!0));C.push(new v(b,0,b,D.end.column))}E==0&&!this.isBackwards()&&(C=C.reverse())}this.toSingleRange();for(var E=C.length;E--;)this.addRange(C[E])},this.joinSelections=function(){var y=this.rangeList.ranges,C=y[y.length-1],E=v.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(E,C.cursor==C.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,C=y[y.length-1],E=v.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(E,C.cursor==C.start)}else{var D=this.session.documentToScreenPosition(this.cursor),g=this.session.documentToScreenPosition(this.anchor),b=this.rectangularRangeBlock(D,g);b.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,C,E){var D=[],g=y.column<C.column;if(g)var b=y.column,L=C.column,S=y.offsetX,T=C.offsetX;else var b=C.column,L=y.column,S=C.offsetX,T=y.offsetX;var M=y.row<C.row;if(M)var w=y.row,F=C.row;else var w=C.row,F=y.row;b<0&&(b=0),w<0&&(w=0),w==F&&(E=!0);for(var x,R=w;R<=F;R++){var A=v.fromPoints(this.session.screenToDocumentPosition(R,b,S),this.session.screenToDocumentPosition(R,L,T));if(A.isEmpty()){if(x&&h(A.end,x))break;x=A.end}A.cursor=g?A.start:A.end,D.push(A)}if(M&&D.reverse(),!E){for(var I=D.length-1;D[I].isEmpty()&&I>0;)I--;if(I>0)for(var $=0;D[$].isEmpty();)$++;for(var k=I;k>=$;k--)D[k].isEmpty()&&D.splice(k,1)}return D}}.call(s.prototype);var o=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var C=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",C),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var C=this.session.$selectionMarkers.indexOf(y);C!=-1&&this.session.$selectionMarkers.splice(C,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var C=this.session.$selectionMarkers,E=y.length;E--;){var D=y[E];if(D.marker){this.session.removeMarker(D.marker);var g=C.indexOf(D);g!=-1&&C.splice(g,1)}}this.session.selectionMarkerCount=C.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(r.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(r.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var C=y.command,E=y.editor;if(E.multiSelect){if(C.multiSelectAction)C.multiSelectAction=="forEach"?D=E.forEachSelection(C,y.args):C.multiSelectAction=="forEachLine"?D=E.forEachSelection(C,y.args,!0):C.multiSelectAction=="single"?(E.exitMultiSelectMode(),D=C.exec(E,y.args||{})):D=C.multiSelectAction(E,y.args||{});else{var D=C.exec(E,y.args||{});E.multiSelect.addRange(E.multiSelect.toOrientedRange()),E.multiSelect.mergeOverlappingRanges()}return D}},this.forEachSelection=function(y,C,E){if(!this.inVirtualSelectionMode){var D=E&&E.keepOrder,g=E==!0||E&&E.$byLines,b=this.session,L=this.selection,S=L.rangeList,T=(D?L:S).ranges,M;if(!T.length)return y.exec?y.exec(this,C||{}):y(this,C||{});var w=L._eventRegistry;L._eventRegistry={};var F=new s(b);this.inVirtualSelectionMode=!0;for(var x=T.length;x--;){if(g)for(;x>0&&T[x].start.row==T[x-1].end.row;)x--;F.fromOrientedRange(T[x]),F.index=x,this.selection=b.selection=F;var R=y.exec?y.exec(this,C||{}):y(this,C||{});!M&&R!==void 0&&(M=R),F.toOrientedRange(T[x])}F.detach(),this.selection=b.selection=L,this.inVirtualSelectionMode=!1,L._eventRegistry=w,L.mergeOverlappingRanges(),L.ranges[0]&&L.fromOrientedRange(L.ranges[0]);var A=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),A&&A.from==A.to&&this.renderer.animateScrolling(A.from),M}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var C=this.multiSelect.rangeList.ranges,E=[],D=0;D<C.length;D++)E.push(this.session.getTextRange(C[D]));var g=this.session.getDocument().getNewLineCharacter();y=E.join(g),y.length==(E.length-1)*g.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,C){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var E=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&C==this.multiSelect.anchor)return;var D=C==this.multiSelect.anchor?E.cursor==E.start?E.end:E.start:E.cursor;D.row!=C.row||this.session.$clipPositionToDocument(D.row,D.column).column!=C.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,C,E){if(C=C||{},C.needle=y||C.needle,C.needle==null){var D=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();C.needle=this.session.getTextRange(D)}this.$search.set(C);var g=this.$search.findAll(this.session);if(!g.length)return 0;var b=this.multiSelect;E||b.toSingleRange(g[0]);for(var L=g.length;L--;)b.addRange(g[L],!0);return D&&b.rangeList.rangeAtPoint(D.start)&&b.addRange(D,!0),g.length},this.selectMoreLines=function(y,C){var E=this.selection.toOrientedRange(),D=E.cursor==E.end,g=this.session.documentToScreenPosition(E.cursor);this.selection.$desiredColumn&&(g.column=this.selection.$desiredColumn);var b=this.session.screenToDocumentPosition(g.row+y,g.column);if(E.isEmpty())var S=b;else var L=this.session.documentToScreenPosition(D?E.end:E.start),S=this.session.screenToDocumentPosition(L.row+y,L.column);if(D){var T=v.fromPoints(b,S);T.cursor=T.start}else{var T=v.fromPoints(S,b);T.cursor=T.end}if(T.desiredColumn=g.column,!this.selection.inMultiSelectMode)this.selection.addRange(E);else if(C)var M=E.cursor;this.selection.addRange(T),M&&this.selection.substractPoint(M)},this.transposeSelections=function(y){for(var C=this.session,E=C.multiSelect,D=E.ranges,g=D.length;g--;){var b=D[g];if(b.isEmpty()){var L=C.getWordRange(b.start.row,b.start.column);b.start.row=L.start.row,b.start.column=L.start.column,b.end.row=L.end.row,b.end.column=L.end.column}}E.mergeOverlappingRanges();for(var S=[],g=D.length;g--;){var b=D[g];S.unshift(C.getTextRange(b))}y<0?S.unshift(S.pop()):S.push(S.shift());for(var g=D.length;g--;){var b=D[g],T=b.clone();C.replace(b,S[g]),b.start.row=T.start.row,b.start.column=T.start.column}E.fromOrientedRange(E.ranges[0])},this.selectMore=function(y,C,E){var D=this.session,g=D.multiSelect,b=g.toOrientedRange();if(!(b.isEmpty()&&(b=D.getWordRange(b.start.row,b.start.column),b.cursor=y==-1?b.start:b.end,this.multiSelect.addRange(b),E))){var L=D.getTextRange(b),S=p(D,L,y);S&&(S.cursor=y==-1?S.start:S.end,this.session.unfold(S),this.multiSelect.addRange(S),this.renderer.scrollCursorIntoView(null,.5)),C&&this.multiSelect.substractPoint(b.cursor)}},this.alignCursors=function(){var y=this.session,C=y.multiSelect,E=C.ranges,D=-1,g=E.filter(function(I){if(I.cursor.row==D)return!0;D=I.cursor.row});if(!E.length||g.length==E.length-1){var b=this.selection.getRange(),L=b.start.row,S=b.end.row,T=L==S;if(T){var M=this.session.getLength(),w;do w=this.session.getLine(S);while(/[=:]/.test(w)&&++S<M);do w=this.session.getLine(L);while(/[=:]/.test(w)&&--L>0);L<0&&(L=0),S>=M&&(S=M-1)}var F=this.session.removeFullLines(L,S);F=this.$reAlignText(F,T),this.session.insert({row:L,column:0},F.join(`
`)+`
`),T||(b.start.column=0,b.end.column=F[F.length-1].length),this.selection.setRange(b)}else{g.forEach(function(I){C.substractPoint(I.cursor)});var x=0,R=1/0,A=E.map(function(I){var $=I.cursor,k=y.getLine($.row),H=k.substr($.column).search(/\S/g);return H==-1&&(H=0),$.column>x&&(x=$.column),H<R&&(R=H),H});E.forEach(function(I,$){var k=I.cursor,H=x-k.column,U=A[$]-R;H>U?y.insert(k,i.stringRepeat(" ",H-U)):y.remove(new v(k.row,k.column,k.row,k.column-H+U)),I.start.column=I.end.column=x,I.start.row=I.end.row=k.row,I.cursor=I.end}),C.fromOrientedRange(E[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,C){var E=!0,D=!0,g,b,L;return y.map(function(F){var x=F.match(/(\s*)(.*?)(\s*)([=:].*)/);return x?g==null?(g=x[1].length,b=x[2].length,L=x[3].length,x):(g+b+L!=x[1].length+x[2].length+x[3].length&&(D=!1),g!=x[1].length&&(E=!1),g>x[1].length&&(g=x[1].length),b<x[2].length&&(b=x[2].length),L>x[3].length&&(L=x[3].length),x):[F]}).map(C?T:E?D?M:T:w);function S(F){return i.stringRepeat(" ",F)}function T(F){return F[2]?S(g)+F[2]+S(b-F[2].length+L)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}function M(F){return F[2]?S(g+b-F[2].length)+F[2]+S(L)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}function w(F){return F[2]?S(g)+F[2]+S(L)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}}}).call(o.prototype);function h(y,C){return y.row==C.row&&y.column==C.column}t.onSessionChange=function(y){var C=y.session;C&&!C.multiSelect&&(C.$selectionMarkers=[],C.selection.$initRangeList(),C.multiSelect=C.selection),this.multiSelect=C&&C.multiSelect;var E=y.oldSession;E&&(E.multiSelect.off("addRange",this.$onAddRange),E.multiSelect.off("removeRange",this.$onRemoveRange),E.multiSelect.off("multiSelect",this.$onMultiSelect),E.multiSelect.off("singleSelect",this.$onSingleSelect),E.multiSelect.lead.off("change",this.$checkMultiselectChange),E.multiSelect.anchor.off("change",this.$checkMultiselectChange)),C&&(C.multiSelect.on("addRange",this.$onAddRange),C.multiSelect.on("removeRange",this.$onRemoveRange),C.multiSelect.on("multiSelect",this.$onMultiSelect),C.multiSelect.on("singleSelect",this.$onSingleSelect),C.multiSelect.lead.on("change",this.$checkMultiselectChange),C.multiSelect.anchor.on("change",this.$checkMultiselectChange)),C&&this.inMultiSelectMode!=C.selection.inMultiSelectMode&&(C.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function _(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=t.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",a),y.commands.addCommands(r.defaultCommands),m(y))}function m(y){if(!y.textInput)return;var C=y.textInput.getElement(),E=!1;d.addListener(C,"keydown",function(g){var b=g.keyCode==18&&!(g.ctrlKey||g.shiftKey||g.metaKey);y.$blockSelectEnabled&&b?E||(y.renderer.setMouseCursor("crosshair"),E=!0):E&&D()},y),d.addListener(C,"keyup",D,y),d.addListener(C,"blur",D,y);function D(g){E&&(y.renderer.setMouseCursor(""),E=!1)}}t.MultiSelect=_,e("./config").defineOptions(o.prototype,"editor",{enableMultiselect:{set:function(y){_(this),y?this.on("mousedown",a):this.off("mousedown",a)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("../../range").Range,v=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(s,a,d){var i=s.getLine(d);return this.foldingStartMarker.test(i)?"start":a=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(s,a,d){return null},this.indentationBlock=function(s,a,d){var i=/\S/,r=s.getLine(a),u=r.search(i);if(u!=-1){for(var l=d||r.length,p=s.getLength(),f=a,o=a;++a<p;){var h=s.getLine(a).search(i);if(h!=-1){if(h<=u){var _=s.getTokenAt(a,0);if(!_||_.type!=="string")break}o=a}}if(o>f){var m=s.getLine(o).length;return new c(f,l,o,m)}}},this.openingBracketBlock=function(s,a,d,i,r){var u={row:d,column:i+1},l=s.$findClosingBracket(a,u,r);if(l){var p=s.foldWidgets[l.row];return p==null&&(p=s.getFoldWidget(l.row)),p=="start"&&l.row>u.row&&(l.row--,l.column=s.getLine(l.row).length),c.fromPoints(u,l)}},this.closingBracketBlock=function(s,a,d,i,r){var u={row:d,column:i},l=s.$findOpeningBracket(a,u);if(l)return l.column++,u.column--,c.fromPoints(l,u)}}).call(v.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,n){"use strict";var c=e("../line_widgets").LineWidgets,v=e("../lib/dom"),s=e("../range").Range,a=e("../config").nls;function d(r,u,l){for(var p=0,f=r.length-1;p<=f;){var o=p+f>>1,h=l(u,r[o]);if(h>0)p=o+1;else if(h<0)f=o-1;else return o}return-(p+1)}function i(r,u,l){var p=r.getAnnotations().sort(s.comparePoints);if(p.length){var f=d(p,{row:u,column:-1},s.comparePoints);f<0&&(f=-f-1),f>=p.length?f=l>0?0:p.length-1:f===0&&l<0&&(f=p.length-1);var o=p[f];if(!(!o||!l)){if(o.row===u){do o=p[f+=l];while(o&&o.row===u);if(!o)return p.slice()}var h=[];u=o.row;do h[l<0?"unshift":"push"](o),o=p[f+=l];while(o&&o.row==u);return h.length&&h}}}t.showErrorMarker=function(r,u){var l=r.session;l.widgetManager||(l.widgetManager=new c(l),l.widgetManager.attach(r));var p=r.getCursorPosition(),f=p.row,o=l.widgetManager.getWidgetsAtRow(f).filter(function(b){return b.type=="errorMarker"})[0];o?o.destroy():f-=u;var h=i(l,f,u),_;if(h){var m=h[0];p.column=(m.pos&&typeof m.column!="number"?m.pos.sc:m.column)||0,p.row=m.row,_=r.renderer.$gutterLayer.$annotations[p.row]}else{if(o)return;_={text:[a("Looks good!")],className:"ace_ok"}}r.session.unfold(p.row),r.selection.moveToPosition(p);var y={row:p.row,fixedWidth:!0,coverGutter:!0,el:v.createElement("div"),type:"errorMarker"},C=y.el.appendChild(v.createElement("div")),E=y.el.appendChild(v.createElement("div"));E.className="error_widget_arrow "+_.className;var D=r.renderer.$cursorLayer.getPixelPosition(p).left;E.style.left=D+r.renderer.gutterWidth-5+"px",y.el.className="error_widget_wrapper",C.className="error_widget "+_.className,C.innerHTML=_.text.join("<br>"),C.appendChild(v.createElement("div"));var g=function(b,L,S){if(L===0&&(S==="esc"||S==="return"))return y.destroy(),{command:"null"}};y.destroy=function(){r.$mouseHandler.isMousePressed||(r.keyBinding.removeKeyboardHandler(g),l.widgetManager.removeLineWidget(y),r.off("changeSelection",y.destroy),r.off("changeSession",y.destroy),r.off("mouseup",y.destroy),r.off("change",y.destroy))},r.keyBinding.addKeyboardHandler(g),r.on("changeSelection",y.destroy),r.on("changeSession",y.destroy),r.on("mouseup",y.destroy),r.on("change",y.destroy),r.session.widgetManager.addLineWidget(y),y.el.onmousedown=r.focus.bind(r),r.renderer.scrollCursorIntoView(null,.5,{bottom:y.el.offsetHeight})},v.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var c=e("./lib/dom"),v=e("./range").Range,s=e("./editor").Editor,a=e("./edit_session").EditSession,d=e("./undomanager").UndoManager,i=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(r,u){if(typeof r=="string"){var l=r;if(r=document.getElementById(l),!r)throw new Error("ace.edit can't find div #"+l)}if(r&&r.env&&r.env.editor instanceof s)return r.env.editor;var p="";if(r&&/input|textarea/i.test(r.tagName)){var f=r;p=f.value,r=c.createElement("pre"),f.parentNode.replaceChild(r,f)}else r&&(p=r.textContent,r.innerHTML="");var o=t.createEditSession(p),h=new s(new i(r),o,u),_={document:o,editor:h,onResize:h.resize.bind(h,null)};return f&&(_.textarea=f),h.on("destroy",function(){_.editor.container.env=null}),h.container.env=h.env=_,h},t.createEditSession=function(r,u){var l=new a(r,u);return l.setUndoManager(new d),l},t.Range=v,t.Editor=s,t.EditSession=a,t.UndoManager=d,t.VirtualRenderer=i,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var n in e)e.hasOwnProperty(n)&&(t.ace[n]=e[n]);t.ace.default=t.ace,typeof Rh=="object"&&typeof SF=="object"&&Rh&&(Rh.exports=t.ace)})})()});var Fx=ht(Lx=>{"use strict";Lx.supports=function(...t){let n=t.reduce((c,v)=>Object.assign(c,v),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}});var No=ht((T_e,xx)=>{"use strict";xx.exports=class extends Error{constructor(t,n){super(t||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var Rx=ht(Kh=>{"use strict";Kh.byteLength=a6;Kh.toByteArray=u6;Kh.fromByteArray=l6;var ma=[],Do=[],o6=typeof Uint8Array<"u"?Uint8Array:Array,A0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(gs=0,Ax=A0.length;gs<Ax;++gs)ma[gs]=A0[gs],Do[A0.charCodeAt(gs)]=gs;var gs,Ax;Do["-".charCodeAt(0)]=62;Do["_".charCodeAt(0)]=63;function Ix(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var c=n===t?0:4-n%4;return[n,c]}function a6(e){var t=Ix(e),n=t[0],c=t[1];return(n+c)*3/4-c}function i6(e,t,n){return(t+n)*3/4-n}function u6(e){var t,n=Ix(e),c=n[0],v=n[1],s=new o6(i6(e,c,v)),a=0,d=v>0?c-4:c,i;for(i=0;i<d;i+=4)t=Do[e.charCodeAt(i)]<<18|Do[e.charCodeAt(i+1)]<<12|Do[e.charCodeAt(i+2)]<<6|Do[e.charCodeAt(i+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=t&255;return v===2&&(t=Do[e.charCodeAt(i)]<<2|Do[e.charCodeAt(i+1)]>>4,s[a++]=t&255),v===1&&(t=Do[e.charCodeAt(i)]<<10|Do[e.charCodeAt(i+1)]<<4|Do[e.charCodeAt(i+2)]>>2,s[a++]=t>>8&255,s[a++]=t&255),s}function s6(e){return ma[e>>18&63]+ma[e>>12&63]+ma[e>>6&63]+ma[e&63]}function c6(e,t,n){for(var c,v=[],s=t;s<n;s+=3)c=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),v.push(s6(c));return v.join("")}function l6(e){for(var t,n=e.length,c=n%3,v=[],s=16383,a=0,d=n-c;a<d;a+=s)v.push(c6(e,a,a+s>d?d:a+s));return c===1?(t=e[n-1],v.push(ma[t>>2]+ma[t<<4&63]+"==")):c===2&&(t=(e[n-2]<<8)+e[n-1],v.push(ma[t>>10]+ma[t>>4&63]+ma[t<<2&63]+"=")),v.join("")}});var $x=ht(I0=>{I0.read=function(e,t,n,c,v){var s,a,d=v*8-c-1,i=(1<<d)-1,r=i>>1,u=-7,l=n?v-1:0,p=n?-1:1,f=e[t+l];for(l+=p,s=f&(1<<-u)-1,f>>=-u,u+=d;u>0;s=s*256+e[t+l],l+=p,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=c;u>0;a=a*256+e[t+l],l+=p,u-=8);if(s===0)s=1-r;else{if(s===i)return a?NaN:(f?-1:1)*(1/0);a=a+Math.pow(2,c),s=s-r}return(f?-1:1)*a*Math.pow(2,s-c)};I0.write=function(e,t,n,c,v,s){var a,d,i,r=s*8-v-1,u=(1<<r)-1,l=u>>1,p=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=c?0:s-1,o=c?1:-1,h=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(d=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-a))<1&&(a--,i*=2),a+l>=1?t+=p/i:t+=p*Math.pow(2,1-l),t*i>=2&&(a++,i/=2),a+l>=u?(d=0,a=u):a+l>=1?(d=(t*i-1)*Math.pow(2,v),a=a+l):(d=t*Math.pow(2,l-1)*Math.pow(2,v),a=0));v>=8;e[n+f]=d&255,f+=o,d/=256,v-=8);for(a=a<<v|d,r+=v;r>0;e[n+f]=a&255,f+=o,a/=256,r-=8);e[n+f-o]|=h*128}});var Yh=ht(zc=>{"use strict";var R0=Rx(),Uc=$x(),kx=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;zc.Buffer=te;zc.SlowBuffer=v6;zc.INSPECT_MAX_BYTES=50;var Qh=2147483647;zc.kMaxLength=Qh;te.TYPED_ARRAY_SUPPORT=f6();!te.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f6(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(te.prototype,"parent",{enumerable:!0,get:function(){if(te.isBuffer(this))return this.buffer}});Object.defineProperty(te.prototype,"offset",{enumerable:!0,get:function(){if(te.isBuffer(this))return this.byteOffset}});function oi(e){if(e>Qh)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,te.prototype),t}function te(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return H0(e)}return Nx(e,t,n)}te.poolSize=8192;function Nx(e,t,n){if(typeof e=="string")return p6(e,t);if(ArrayBuffer.isView(e))return h6(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ga(e,ArrayBuffer)||e&&ga(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ga(e,SharedArrayBuffer)||e&&ga(e.buffer,SharedArrayBuffer)))return k0(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let c=e.valueOf&&e.valueOf();if(c!=null&&c!==e)return te.from(c,t,n);let v=_6(e);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return te.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}te.from=function(e,t,n){return Nx(e,t,n)};Object.setPrototypeOf(te.prototype,Uint8Array.prototype);Object.setPrototypeOf(te,Uint8Array);function Bx(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d6(e,t,n){return Bx(e),e<=0?oi(e):t!==void 0?typeof n=="string"?oi(e).fill(t,n):oi(e).fill(t):oi(e)}te.alloc=function(e,t,n){return d6(e,t,n)};function H0(e){return Bx(e),oi(e<0?0:P0(e)|0)}te.allocUnsafe=function(e){return H0(e)};te.allocUnsafeSlow=function(e){return H0(e)};function p6(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!te.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=Wx(e,t)|0,c=oi(n),v=c.write(e,t);return v!==n&&(c=c.slice(0,v)),c}function $0(e){let t=e.length<0?0:P0(e.length)|0,n=oi(t);for(let c=0;c<t;c+=1)n[c]=e[c]&255;return n}function h6(e){if(ga(e,Uint8Array)){let t=new Uint8Array(e);return k0(t.buffer,t.byteOffset,t.byteLength)}return $0(e)}function k0(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let c;return t===void 0&&n===void 0?c=new Uint8Array(e):n===void 0?c=new Uint8Array(e,t):c=new Uint8Array(e,t,n),Object.setPrototypeOf(c,te.prototype),c}function _6(e){if(te.isBuffer(e)){let t=P0(e.length)|0,n=oi(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||B0(e.length)?oi(0):$0(e);if(e.type==="Buffer"&&Array.isArray(e.data))return $0(e.data)}function P0(e){if(e>=Qh)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qh.toString(16)+" bytes");return e|0}function v6(e){return+e!=e&&(e=0),te.alloc(+e)}te.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==te.prototype};te.compare=function(t,n){if(ga(t,Uint8Array)&&(t=te.from(t,t.offset,t.byteLength)),ga(n,Uint8Array)&&(n=te.from(n,n.offset,n.byteLength)),!te.isBuffer(t)||!te.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let c=t.length,v=n.length;for(let s=0,a=Math.min(c,v);s<a;++s)if(t[s]!==n[s]){c=t[s],v=n[s];break}return c<v?-1:v<c?1:0};te.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};te.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return te.alloc(0);let c;if(n===void 0)for(n=0,c=0;c<t.length;++c)n+=t[c].length;let v=te.allocUnsafe(n),s=0;for(c=0;c<t.length;++c){let a=t[c];if(ga(a,Uint8Array))s+a.length>v.length?(te.isBuffer(a)||(a=te.from(a)),a.copy(v,s)):Uint8Array.prototype.set.call(v,a,s);else if(te.isBuffer(a))a.copy(v,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return v};function Wx(e,t){if(te.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ga(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&n===0)return 0;let v=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return O0(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return Qx(e).length;default:if(v)return c?-1:O0(e).length;t=(""+t).toLowerCase(),v=!0}}te.byteLength=Wx;function m6(e,t,n){let c=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return M6(this,t,n);case"utf8":case"utf-8":return qx(this,t,n);case"ascii":return E6(this,t,n);case"latin1":case"binary":return T6(this,t,n);case"base64":return w6(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L6(this,t,n);default:if(c)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),c=!0}}te.prototype._isBuffer=!0;function ys(e,t,n){let c=e[t];e[t]=e[n],e[n]=c}te.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)ys(this,n,n+1);return this};te.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)ys(this,n,n+3),ys(this,n+1,n+2);return this};te.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)ys(this,n,n+7),ys(this,n+1,n+6),ys(this,n+2,n+5),ys(this,n+3,n+4);return this};te.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?qx(this,0,t):m6.apply(this,arguments)};te.prototype.toLocaleString=te.prototype.toString;te.prototype.equals=function(t){if(!te.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:te.compare(this,t)===0};te.prototype.inspect=function(){let t="",n=zc.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};kx&&(te.prototype[kx]=te.prototype.inspect);te.prototype.compare=function(t,n,c,v,s){if(ga(t,Uint8Array)&&(t=te.from(t,t.offset,t.byteLength)),!te.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),c===void 0&&(c=t?t.length:0),v===void 0&&(v=0),s===void 0&&(s=this.length),n<0||c>t.length||v<0||s>this.length)throw new RangeError("out of range index");if(v>=s&&n>=c)return 0;if(v>=s)return-1;if(n>=c)return 1;if(n>>>=0,c>>>=0,v>>>=0,s>>>=0,this===t)return 0;let a=s-v,d=c-n,i=Math.min(a,d),r=this.slice(v,s),u=t.slice(n,c);for(let l=0;l<i;++l)if(r[l]!==u[l]){a=r[l],d=u[l];break}return a<d?-1:d<a?1:0};function Ux(e,t,n,c,v){if(e.length===0)return-1;if(typeof n=="string"?(c=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,B0(n)&&(n=v?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(v)return-1;n=e.length-1}else if(n<0)if(v)n=0;else return-1;if(typeof t=="string"&&(t=te.from(t,c)),te.isBuffer(t))return t.length===0?-1:Ox(e,t,n,c,v);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Ox(e,[t],n,c,v);throw new TypeError("val must be string, number or Buffer")}function Ox(e,t,n,c,v){let s=1,a=e.length,d=t.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,a/=2,d/=2,n/=2}function i(u,l){return s===1?u[l]:u.readUInt16BE(l*s)}let r;if(v){let u=-1;for(r=n;r<a;r++)if(i(e,r)===i(t,u===-1?0:r-u)){if(u===-1&&(u=r),r-u+1===d)return u*s}else u!==-1&&(r-=r-u),u=-1}else for(n+d>a&&(n=a-d),r=n;r>=0;r--){let u=!0;for(let l=0;l<d;l++)if(i(e,r+l)!==i(t,l)){u=!1;break}if(u)return r}return-1}te.prototype.includes=function(t,n,c){return this.indexOf(t,n,c)!==-1};te.prototype.indexOf=function(t,n,c){return Ux(this,t,n,c,!0)};te.prototype.lastIndexOf=function(t,n,c){return Ux(this,t,n,c,!1)};function g6(e,t,n,c){n=Number(n)||0;let v=e.length-n;c?(c=Number(c),c>v&&(c=v)):c=v;let s=t.length;c>s/2&&(c=s/2);let a;for(a=0;a<c;++a){let d=parseInt(t.substr(a*2,2),16);if(B0(d))return a;e[n+a]=d}return a}function y6(e,t,n,c){return Xh(O0(t,e.length-n),e,n,c)}function D6(e,t,n,c){return Xh(I6(t),e,n,c)}function C6(e,t,n,c){return Xh(Qx(t),e,n,c)}function b6(e,t,n,c){return Xh(R6(t,e.length-n),e,n,c)}te.prototype.write=function(t,n,c,v){if(n===void 0)v="utf8",c=this.length,n=0;else if(c===void 0&&typeof n=="string")v=n,c=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(c)?(c=c>>>0,v===void 0&&(v="utf8")):(v=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-n;if((c===void 0||c>s)&&(c=s),t.length>0&&(c<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let a=!1;for(;;)switch(v){case"hex":return g6(this,t,n,c);case"utf8":case"utf-8":return y6(this,t,n,c);case"ascii":case"latin1":case"binary":return D6(this,t,n,c);case"base64":return C6(this,t,n,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b6(this,t,n,c);default:if(a)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),a=!0}};te.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w6(e,t,n){return t===0&&n===e.length?R0.fromByteArray(e):R0.fromByteArray(e.slice(t,n))}function qx(e,t,n){n=Math.min(e.length,n);let c=[],v=t;for(;v<n;){let s=e[v],a=null,d=s>239?4:s>223?3:s>191?2:1;if(v+d<=n){let i,r,u,l;switch(d){case 1:s<128&&(a=s);break;case 2:i=e[v+1],(i&192)===128&&(l=(s&31)<<6|i&63,l>127&&(a=l));break;case 3:i=e[v+1],r=e[v+2],(i&192)===128&&(r&192)===128&&(l=(s&15)<<12|(i&63)<<6|r&63,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:i=e[v+1],r=e[v+2],u=e[v+3],(i&192)===128&&(r&192)===128&&(u&192)===128&&(l=(s&15)<<18|(i&63)<<12|(r&63)<<6|u&63,l>65535&&l<1114112&&(a=l))}}a===null?(a=65533,d=1):a>65535&&(a-=65536,c.push(a>>>10&1023|55296),a=56320|a&1023),c.push(a),v+=d}return S6(c)}var Hx=4096;function S6(e){let t=e.length;if(t<=Hx)return String.fromCharCode.apply(String,e);let n="",c=0;for(;c<t;)n+=String.fromCharCode.apply(String,e.slice(c,c+=Hx));return n}function E6(e,t,n){let c="";n=Math.min(e.length,n);for(let v=t;v<n;++v)c+=String.fromCharCode(e[v]&127);return c}function T6(e,t,n){let c="";n=Math.min(e.length,n);for(let v=t;v<n;++v)c+=String.fromCharCode(e[v]);return c}function M6(e,t,n){let c=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>c)&&(n=c);let v="";for(let s=t;s<n;++s)v+=$6[e[s]];return v}function L6(e,t,n){let c=e.slice(t,n),v="";for(let s=0;s<c.length-1;s+=2)v+=String.fromCharCode(c[s]+c[s+1]*256);return v}te.prototype.slice=function(t,n){let c=this.length;t=~~t,n=n===void 0?c:~~n,t<0?(t+=c,t<0&&(t=0)):t>c&&(t=c),n<0?(n+=c,n<0&&(n=0)):n>c&&(n=c),n<t&&(n=t);let v=this.subarray(t,n);return Object.setPrototypeOf(v,te.prototype),v};function Un(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}te.prototype.readUintLE=te.prototype.readUIntLE=function(t,n,c){t=t>>>0,n=n>>>0,c||Un(t,n,this.length);let v=this[t],s=1,a=0;for(;++a<n&&(s*=256);)v+=this[t+a]*s;return v};te.prototype.readUintBE=te.prototype.readUIntBE=function(t,n,c){t=t>>>0,n=n>>>0,c||Un(t,n,this.length);let v=this[t+--n],s=1;for(;n>0&&(s*=256);)v+=this[t+--n]*s;return v};te.prototype.readUint8=te.prototype.readUInt8=function(t,n){return t=t>>>0,n||Un(t,1,this.length),this[t]};te.prototype.readUint16LE=te.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||Un(t,2,this.length),this[t]|this[t+1]<<8};te.prototype.readUint16BE=te.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||Un(t,2,this.length),this[t]<<8|this[t+1]};te.prototype.readUint32LE=te.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||Un(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};te.prototype.readUint32BE=te.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||Un(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};te.prototype.readBigUInt64LE=yu(function(t){t=t>>>0,qc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Hf(t,this.length-8);let v=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,s=this[++t]+this[++t]*2**8+this[++t]*2**16+c*2**24;return BigInt(v)+(BigInt(s)<<BigInt(32))});te.prototype.readBigUInt64BE=yu(function(t){t=t>>>0,qc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Hf(t,this.length-8);let v=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],s=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+c;return(BigInt(v)<<BigInt(32))+BigInt(s)});te.prototype.readIntLE=function(t,n,c){t=t>>>0,n=n>>>0,c||Un(t,n,this.length);let v=this[t],s=1,a=0;for(;++a<n&&(s*=256);)v+=this[t+a]*s;return s*=128,v>=s&&(v-=Math.pow(2,8*n)),v};te.prototype.readIntBE=function(t,n,c){t=t>>>0,n=n>>>0,c||Un(t,n,this.length);let v=n,s=1,a=this[t+--v];for(;v>0&&(s*=256);)a+=this[t+--v]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*n)),a};te.prototype.readInt8=function(t,n){return t=t>>>0,n||Un(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};te.prototype.readInt16LE=function(t,n){t=t>>>0,n||Un(t,2,this.length);let c=this[t]|this[t+1]<<8;return c&32768?c|4294901760:c};te.prototype.readInt16BE=function(t,n){t=t>>>0,n||Un(t,2,this.length);let c=this[t+1]|this[t]<<8;return c&32768?c|4294901760:c};te.prototype.readInt32LE=function(t,n){return t=t>>>0,n||Un(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};te.prototype.readInt32BE=function(t,n){return t=t>>>0,n||Un(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};te.prototype.readBigInt64LE=yu(function(t){t=t>>>0,qc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Hf(t,this.length-8);let v=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(c<<24);return(BigInt(v)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});te.prototype.readBigInt64BE=yu(function(t){t=t>>>0,qc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Hf(t,this.length-8);let v=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(v)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+c)});te.prototype.readFloatLE=function(t,n){return t=t>>>0,n||Un(t,4,this.length),Uc.read(this,t,!0,23,4)};te.prototype.readFloatBE=function(t,n){return t=t>>>0,n||Un(t,4,this.length),Uc.read(this,t,!1,23,4)};te.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||Un(t,8,this.length),Uc.read(this,t,!0,52,8)};te.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||Un(t,8,this.length),Uc.read(this,t,!1,52,8)};function qr(e,t,n,c,v,s){if(!te.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>v||t<s)throw new RangeError('"value" argument is out of bounds');if(n+c>e.length)throw new RangeError("Index out of range")}te.prototype.writeUintLE=te.prototype.writeUIntLE=function(t,n,c,v){if(t=+t,n=n>>>0,c=c>>>0,!v){let d=Math.pow(2,8*c)-1;qr(this,t,n,c,d,0)}let s=1,a=0;for(this[n]=t&255;++a<c&&(s*=256);)this[n+a]=t/s&255;return n+c};te.prototype.writeUintBE=te.prototype.writeUIntBE=function(t,n,c,v){if(t=+t,n=n>>>0,c=c>>>0,!v){let d=Math.pow(2,8*c)-1;qr(this,t,n,c,d,0)}let s=c-1,a=1;for(this[n+s]=t&255;--s>=0&&(a*=256);)this[n+s]=t/a&255;return n+c};te.prototype.writeUint8=te.prototype.writeUInt8=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,1,255,0),this[n]=t&255,n+1};te.prototype.writeUint16LE=te.prototype.writeUInt16LE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};te.prototype.writeUint16BE=te.prototype.writeUInt16BE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};te.prototype.writeUint32LE=te.prototype.writeUInt32LE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};te.prototype.writeUint32BE=te.prototype.writeUInt32BE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function zx(e,t,n,c,v){Kx(t,c,v,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s=s>>8,e[n++]=s,s=s>>8,e[n++]=s,s=s>>8,e[n++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,n}function Vx(e,t,n,c,v){Kx(t,c,v,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s=s>>8,e[n+6]=s,s=s>>8,e[n+5]=s,s=s>>8,e[n+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a=a>>8,e[n+2]=a,a=a>>8,e[n+1]=a,a=a>>8,e[n]=a,n+8}te.prototype.writeBigUInt64LE=yu(function(t,n=0){return zx(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});te.prototype.writeBigUInt64BE=yu(function(t,n=0){return Vx(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});te.prototype.writeIntLE=function(t,n,c,v){if(t=+t,n=n>>>0,!v){let i=Math.pow(2,8*c-1);qr(this,t,n,c,i-1,-i)}let s=0,a=1,d=0;for(this[n]=t&255;++s<c&&(a*=256);)t<0&&d===0&&this[n+s-1]!==0&&(d=1),this[n+s]=(t/a>>0)-d&255;return n+c};te.prototype.writeIntBE=function(t,n,c,v){if(t=+t,n=n>>>0,!v){let i=Math.pow(2,8*c-1);qr(this,t,n,c,i-1,-i)}let s=c-1,a=1,d=0;for(this[n+s]=t&255;--s>=0&&(a*=256);)t<0&&d===0&&this[n+s+1]!==0&&(d=1),this[n+s]=(t/a>>0)-d&255;return n+c};te.prototype.writeInt8=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};te.prototype.writeInt16LE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};te.prototype.writeInt16BE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};te.prototype.writeInt32LE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};te.prototype.writeInt32BE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};te.prototype.writeBigInt64LE=yu(function(t,n=0){return zx(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});te.prototype.writeBigInt64BE=yu(function(t,n=0){return Vx(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Gx(e,t,n,c,v,s){if(n+c>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Jx(e,t,n,c,v){return t=+t,n=n>>>0,v||Gx(e,t,n,4,34028234663852886e22,-34028234663852886e22),Uc.write(e,t,n,c,23,4),n+4}te.prototype.writeFloatLE=function(t,n,c){return Jx(this,t,n,!0,c)};te.prototype.writeFloatBE=function(t,n,c){return Jx(this,t,n,!1,c)};function jx(e,t,n,c,v){return t=+t,n=n>>>0,v||Gx(e,t,n,8,17976931348623157e292,-17976931348623157e292),Uc.write(e,t,n,c,52,8),n+8}te.prototype.writeDoubleLE=function(t,n,c){return jx(this,t,n,!0,c)};te.prototype.writeDoubleBE=function(t,n,c){return jx(this,t,n,!1,c)};te.prototype.copy=function(t,n,c,v){if(!te.isBuffer(t))throw new TypeError("argument should be a Buffer");if(c||(c=0),!v&&v!==0&&(v=this.length),n>=t.length&&(n=t.length),n||(n=0),v>0&&v<c&&(v=c),v===c||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),t.length-n<v-c&&(v=t.length-n+c);let s=v-c;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,c,v):Uint8Array.prototype.set.call(t,this.subarray(c,v),n),s};te.prototype.fill=function(t,n,c,v){if(typeof t=="string"){if(typeof n=="string"?(v=n,n=0,c=this.length):typeof c=="string"&&(v=c,c=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!te.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(t.length===1){let a=t.charCodeAt(0);(v==="utf8"&&a<128||v==="latin1")&&(t=a)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<c)throw new RangeError("Out of range index");if(c<=n)return this;n=n>>>0,c=c===void 0?this.length:c>>>0,t||(t=0);let s;if(typeof t=="number")for(s=n;s<c;++s)this[s]=t;else{let a=te.isBuffer(t)?t:te.from(t,v),d=a.length;if(d===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<c-n;++s)this[s+n]=a[s%d]}return this};var Wc={};function N0(e,t,n){Wc[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}N0("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);N0("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);N0("ERR_OUT_OF_RANGE",function(e,t,n){let c=`The value of "${e}" is out of range.`,v=n;return Number.isInteger(n)&&Math.abs(n)>2**32?v=Px(String(n)):typeof n=="bigint"&&(v=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(v=Px(v)),v+="n"),c+=` It must be ${t}. Received ${v}`,c},RangeError);function Px(e){let t="",n=e.length,c=e[0]==="-"?1:0;for(;n>=c+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function F6(e,t,n){qc(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&Hf(t,e.length-(n+1))}function Kx(e,t,n,c,v,s){if(e>n||e<t){let a=typeof t=="bigint"?"n":"",d;throw s>3?t===0||t===BigInt(0)?d=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:d=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:d=`>= ${t}${a} and <= ${n}${a}`,new Wc.ERR_OUT_OF_RANGE("value",d,e)}F6(c,v,s)}function qc(e,t){if(typeof e!="number")throw new Wc.ERR_INVALID_ARG_TYPE(t,"number",e)}function Hf(e,t,n){throw Math.floor(e)!==e?(qc(e,n),new Wc.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new Wc.ERR_BUFFER_OUT_OF_BOUNDS:new Wc.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var x6=/[^+/0-9A-Za-z-_]/g;function A6(e){if(e=e.split("=")[0],e=e.trim().replace(x6,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function O0(e,t){t=t||1/0;let n,c=e.length,v=null,s=[];for(let a=0;a<c;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!v){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(a+1===c){(t-=3)>-1&&s.push(239,191,189);continue}v=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),v=n;continue}n=(v-55296<<10|n-56320)+65536}else v&&(t-=3)>-1&&s.push(239,191,189);if(v=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return s}function I6(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function R6(e,t){let n,c,v,s=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),c=n>>8,v=n%256,s.push(v),s.push(c);return s}function Qx(e){return R0.toByteArray(A6(e))}function Xh(e,t,n,c){let v;for(v=0;v<c&&!(v+n>=t.length||v>=e.length);++v)t[v+n]=e[v];return v}function ga(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function B0(e){return e!==e}var $6=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let c=n*16;for(let v=0;v<16;++v)t[c+v]=e[n]+e[v]}return t}();function yu(e){return typeof BigInt>"u"?k6:e}function k6(){throw new Error("BigInt not supported")}});var U0=ht((A_e,Xx)=>{"use strict";var W0=null;Xx.exports=function(){return W0===null&&(W0={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),W0}});var V0=ht(Yx=>{"use strict";var q0=No(),O6=new Set(["buffer","view","utf8"]),z0=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!O6.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new q0(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new q0(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new q0(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};Yx.Encoding=z0});var K0=ht(Zh=>{"use strict";var{Buffer:J0}=Yh()||{},{Encoding:j0}=V0(),H6=U0(),Pf=class extends j0{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new Nf({encode:this.encode,decode:t=>this.decode(J0.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Nf=class extends j0{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new Pf({encode:t=>{let n=this.encode(t);return J0.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},G0=class extends j0{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new Pf({encode:t=>J0.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:t,textDecoder:n}=H6();return new Nf({encode:c=>t.encode(this.encode(c)),decode:c=>this.decode(n.decode(c)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Zh.BufferFormat=Pf;Zh.ViewFormat=Nf;Zh.UTF8Format=G0});var nA=ht(Ds=>{"use strict";var{Buffer:fr}=Yh()||{Buffer:{isBuffer:()=>!1}},{textEncoder:eA,textDecoder:Zx}=U0()(),{BufferFormat:Bf,ViewFormat:Q0,UTF8Format:tA}=K0(),e_=e=>e;Ds.utf8=new tA({encode:function(e){return fr.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?Zx.decode(e):String(e)},decode:e_,name:"utf8",createViewTranscoder(){return new Q0({encode:function(e){return ArrayBuffer.isView(e)?e:eA.encode(e)},decode:function(e){return Zx.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new Bf({encode:function(e){return fr.isBuffer(e)?e:ArrayBuffer.isView(e)?fr.from(e.buffer,e.byteOffset,e.byteLength):fr.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});Ds.json=new tA({encode:JSON.stringify,decode:JSON.parse,name:"json"});Ds.buffer=new Bf({encode:function(e){return fr.isBuffer(e)?e:ArrayBuffer.isView(e)?fr.from(e.buffer,e.byteOffset,e.byteLength):fr.from(String(e),"utf8")},decode:e_,name:"buffer",createViewTranscoder(){return new Q0({encode:function(e){return ArrayBuffer.isView(e)?e:fr.from(String(e),"utf8")},decode:function(e){return fr.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});Ds.view=new Q0({encode:function(e){return ArrayBuffer.isView(e)?e:eA.encode(e)},decode:e_,name:"view",createBufferTranscoder(){return new Bf({encode:function(e){return fr.isBuffer(e)?e:ArrayBuffer.isView(e)?fr.from(e.buffer,e.byteOffset,e.byteLength):fr.from(String(e),"utf8")},decode:e_,name:`${this.name}+buffer`})}});Ds.hex=new Bf({encode:function(e){return fr.isBuffer(e)?e:fr.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});Ds.base64=new Bf({encode:function(e){return fr.isBuffer(e)?e:fr.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})});var aA=ht(oA=>{"use strict";var rA=No(),n_=nA(),{Encoding:P6}=V0(),{BufferFormat:N6,ViewFormat:B6,UTF8Format:W6}=K0(),Wf=Symbol("formats"),t_=Symbol("encodings"),U6=new Set(["buffer","view","utf8"]),X0=class{constructor(t){if(Array.isArray(t)){if(!t.every(n=>U6.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[t_]=new Map,this[Wf]=new Set(t);for(let n in n_)try{this.encoding(n)}catch(c){if(c.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw c}}encodings(){return Array.from(new Set(this[t_].values()))}encoding(t){let n=this[t_].get(t);if(n===void 0){if(typeof t=="string"&&t!==""){if(n=G6[t],!n)throw new rA(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");n=q6(t)}let{name:c,format:v}=n;if(!this[Wf].has(v))if(this[Wf].has("view"))n=n.createViewTranscoder();else if(this[Wf].has("buffer"))n=n.createBufferTranscoder();else if(this[Wf].has("utf8"))n=n.createUTF8Transcoder();else throw new rA(`Encoding '${c}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let s of[t,c,n.name,n.commonName])this[t_].set(s,n)}return n}};oA.Transcoder=X0;function q6(e){if(e instanceof P6)return e;let t="type"in e&&typeof e.type=="string"?e.type:void 0,n=e.name||t||`anonymous-${J6++}`;switch(z6(e)){case"view":return new B6({...e,name:n});case"utf8":return new W6({...e,name:n});case"buffer":return new N6({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function z6(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}var V6={binary:n_.buffer,"utf-8":n_.utf8},G6={...n_,...V6},J6=0});var vA=ht((O_e,Y0)=>{"use strict";var Vc=typeof Reflect=="object"?Reflect:null,iA=Vc&&typeof Vc.apply=="function"?Vc.apply:function(t,n,c){return Function.prototype.apply.call(t,n,c)},r_;Vc&&typeof Vc.ownKeys=="function"?r_=Vc.ownKeys:Object.getOwnPropertySymbols?r_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:r_=function(t){return Object.getOwnPropertyNames(t)};function j6(e){console&&console.warn&&console.warn(e)}var sA=Number.isNaN||function(t){return t!==t};function Vt(){Vt.init.call(this)}Y0.exports=Vt;Y0.exports.once=Y6;Vt.EventEmitter=Vt;Vt.prototype._events=void 0;Vt.prototype._eventsCount=0;Vt.prototype._maxListeners=void 0;var uA=10;function o_(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Vt,"defaultMaxListeners",{enumerable:!0,get:function(){return uA},set:function(e){if(typeof e!="number"||e<0||sA(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");uA=e}});Vt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Vt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||sA(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function cA(e){return e._maxListeners===void 0?Vt.defaultMaxListeners:e._maxListeners}Vt.prototype.getMaxListeners=function(){return cA(this)};Vt.prototype.emit=function(t){for(var n=[],c=1;c<arguments.length;c++)n.push(arguments[c]);var v=t==="error",s=this._events;if(s!==void 0)v=v&&s.error===void 0;else if(!v)return!1;if(v){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var d=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw d.context=a,d}var i=s[t];if(i===void 0)return!1;if(typeof i=="function")iA(i,this,n);else for(var r=i.length,u=hA(i,r),c=0;c<r;++c)iA(u[c],this,n);return!0};function lA(e,t,n,c){var v,s,a;if(o_(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),a===void 0)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=c?[n,a]:[a,n]:c?a.unshift(n):a.push(n),v=cA(e),v>0&&a.length>v&&!a.warned){a.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=a.length,j6(d)}return e}Vt.prototype.addListener=function(t,n){return lA(this,t,n,!1)};Vt.prototype.on=Vt.prototype.addListener;Vt.prototype.prependListener=function(t,n){return lA(this,t,n,!0)};function K6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function fA(e,t,n){var c={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},v=K6.bind(c);return v.listener=n,c.wrapFn=v,v}Vt.prototype.once=function(t,n){return o_(n),this.on(t,fA(this,t,n)),this};Vt.prototype.prependOnceListener=function(t,n){return o_(n),this.prependListener(t,fA(this,t,n)),this};Vt.prototype.removeListener=function(t,n){var c,v,s,a,d;if(o_(n),v=this._events,v===void 0)return this;if(c=v[t],c===void 0)return this;if(c===n||c.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete v[t],v.removeListener&&this.emit("removeListener",t,c.listener||n));else if(typeof c!="function"){for(s=-1,a=c.length-1;a>=0;a--)if(c[a]===n||c[a].listener===n){d=c[a].listener,s=a;break}if(s<0)return this;s===0?c.shift():Q6(c,s),c.length===1&&(v[t]=c[0]),v.removeListener!==void 0&&this.emit("removeListener",t,d||n)}return this};Vt.prototype.off=Vt.prototype.removeListener;Vt.prototype.removeAllListeners=function(t){var n,c,v;if(c=this._events,c===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete c[t]),this;if(arguments.length===0){var s=Object.keys(c),a;for(v=0;v<s.length;++v)a=s[v],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=c[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(v=n.length-1;v>=0;v--)this.removeListener(t,n[v]);return this};function dA(e,t,n){var c=e._events;if(c===void 0)return[];var v=c[t];return v===void 0?[]:typeof v=="function"?n?[v.listener||v]:[v]:n?X6(v):hA(v,v.length)}Vt.prototype.listeners=function(t){return dA(this,t,!0)};Vt.prototype.rawListeners=function(t){return dA(this,t,!1)};Vt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):pA.call(e,t)};Vt.prototype.listenerCount=pA;function pA(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Vt.prototype.eventNames=function(){return this._eventsCount>0?r_(this._events):[]};function hA(e,t){for(var n=new Array(t),c=0;c<t;++c)n[c]=e[c];return n}function Q6(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function X6(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Y6(e,t){return new Promise(function(n,c){function v(a){e.removeListener(t,s),c(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",v),n([].slice.call(arguments))}_A(e,t,s,{once:!0}),t!=="error"&&Z6(e,v,{once:!0})})}function Z6(e,t,n){typeof e.on=="function"&&_A(e,"error",t,n)}function _A(e,t,n,c){if(typeof e.on=="function")c.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function v(s){c.once&&e.removeEventListener(t,v),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var gA=ht((H_e,mA)=>{mA.exports=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)});var Uf=ht(Z0=>{"use strict";var yA=gA();Z0.fromCallback=function(e,t){if(e===void 0){var n=new Promise(function(c,v){e=function(s,a){s?v(s):c(a)}});e[t!==void 0?t:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};Z0.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(n){yA(()=>t(null,n))}).catch(function(n){yA(()=>t(n))})}});var a_=ht(eD=>{"use strict";eD.getCallback=function(e,t){return typeof e=="function"?e:t};eD.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}}});var Eu=ht(c_=>{"use strict";var{fromCallback:tD}=Uf(),uo=No(),{getOptions:nD,getCallback:DA}=a_(),Cs=Symbol("promise"),Gc=Symbol("callback"),ya=Symbol("working"),bs=Symbol("handleOne"),ai=Symbol("handleMany"),rD=Symbol("autoClose"),wu=Symbol("finishWork"),Da=Symbol("returnMany"),Du=Symbol("closing"),qf=Symbol("handleClose"),i_=Symbol("closed"),zf=Symbol("closeCallbacks"),bu=Symbol("keyEncoding"),ws=Symbol("valueEncoding"),oD=Symbol("abortOnClose"),u_=Symbol("legacy"),aD=Symbol("keys"),iD=Symbol("values"),Cu=Symbol("limit"),Co=Symbol("count"),s_=Object.freeze({}),eq=()=>{},CA=!1,Vf=class{constructor(t,n,c){if(typeof t!="object"||t===null){let v=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${v}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[i_]=!1,this[zf]=[],this[ya]=!1,this[Du]=!1,this[rD]=!1,this[Gc]=null,this[bs]=this[bs].bind(this),this[ai]=this[ai].bind(this),this[qf]=this[qf].bind(this),this[bu]=n[bu],this[ws]=n[ws],this[u_]=c,this[Cu]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[Co]=0,this[oD]=!!n.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[Co]}get limit(){return this[Cu]}next(t){let n;if(t===void 0)n=new Promise((c,v)=>{t=(s,a,d)=>{s?v(s):this[u_]?a===void 0&&d===void 0?c():c([a,d]):c(a)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[Du]?this.nextTick(t,new uo("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ya]?this.nextTick(t,new uo("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[ya]=!0,this[Gc]=t,this[Co]>=this[Cu]?this.nextTick(this[bs],null):this._next(this[bs])),n}_next(t){this.nextTick(t)}nextv(t,n,c){return c=DA(n,c),c=tD(c,Cs),n=nD(n,s_),Number.isInteger(t)?(this[Du]?this.nextTick(c,new uo("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ya]?this.nextTick(c,new uo("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[Cu]<1/0&&(t=Math.min(t,this[Cu]-this[Co])),this[ya]=!0,this[Gc]=c,t<=0?this.nextTick(this[ai],null,[]):this._nextv(t,n,this[ai])),c[Cs]):(this.nextTick(c,new TypeError("The first argument 'size' must be an integer")),c[Cs])}_nextv(t,n,c){let v=[],s=(a,d,i)=>{if(a)return c(a);if(this[u_]?d===void 0&&i===void 0:d===void 0)return c(null,v);v.push(this[u_]?[d,i]:d),v.length===t?c(null,v):this._next(s)};this._next(s)}all(t,n){return n=DA(t,n),n=tD(n,Cs),t=nD(t,s_),this[Du]?this.nextTick(n,new uo("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ya]?this.nextTick(n,new uo("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[ya]=!0,this[Gc]=n,this[rD]=!0,this[Co]>=this[Cu]?this.nextTick(this[ai],null,[]):this._all(t,this[ai])),n[Cs]}_all(t,n){let c=this[Co],v=[],s=()=>{let d=this[Cu]<1/0?Math.min(1e3,this[Cu]-c):1e3;d<=0?this.nextTick(n,null,v):this._nextv(d,s_,a)},a=(d,i)=>{d?n(d):i.length===0?n(null,v):(v.push.apply(v,i),c+=i.length,s())};s()}[wu](){let t=this[Gc];return this[oD]&&t===null?eq:(this[ya]=!1,this[Gc]=null,this[Du]&&this._close(this[qf]),t)}[Da](t,n,c){this[rD]?this.close(t.bind(null,n,c)):t(n,c)}seek(t,n){if(n=nD(n,s_),!this[Du]){if(this[ya])throw new uo("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let c=this.db.keyEncoding(n.keyEncoding||this[bu]),v=c.format;n.keyEncoding!==v&&(n={...n,keyEncoding:v});let s=this.db.prefixKey(c.encode(t),v);this._seek(s,n)}}}_seek(t,n){throw new uo("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=tD(t,Cs),this[i_]?this.nextTick(t):this[Du]?this[zf].push(t):(this[Du]=!0,this[zf].push(t),this[ya]?this[oD]&&this[wu]()(new uo("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[qf])),t[Cs]}_close(t){this.nextTick(t)}[qf](){this[i_]=!0,this.db.detachResource(this);let t=this[zf];this[zf]=[];for(let n of t)n()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[i_]||await this.close()}}},Jc=class extends Vf{constructor(t,n){super(t,n,!0),this[aD]=n.keys!==!1,this[iD]=n.values!==!1}[bs](t,n,c){let v=this[wu]();if(t)return v(t);try{n=this[aD]&&n!==void 0?this[bu].decode(n):void 0,c=this[iD]&&c!==void 0?this[ws].decode(c):void 0}catch(s){return v(new Su("entry",s))}n===void 0&&c===void 0||this[Co]++,v(null,n,c)}[ai](t,n){let c=this[wu]();if(t)return this[Da](c,t);try{for(let v of n){let s=v[0],a=v[1];v[0]=this[aD]&&s!==void 0?this[bu].decode(s):void 0,v[1]=this[iD]&&a!==void 0?this[ws].decode(a):void 0}}catch(v){return this[Da](c,new Su("entries",v))}this[Co]+=n.length,this[Da](c,null,n)}end(t){return!CA&&typeof console<"u"&&(CA=!0,console.warn(new uo("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},uD=class extends Vf{constructor(t,n){super(t,n,!1)}[bs](t,n){let c=this[wu]();if(t)return c(t);try{n=n!==void 0?this[bu].decode(n):void 0}catch(v){return c(new Su("key",v))}n!==void 0&&this[Co]++,c(null,n)}[ai](t,n){let c=this[wu]();if(t)return this[Da](c,t);try{for(let v=0;v<n.length;v++){let s=n[v];n[v]=s!==void 0?this[bu].decode(s):void 0}}catch(v){return this[Da](c,new Su("keys",v))}this[Co]+=n.length,this[Da](c,null,n)}},sD=class extends Vf{constructor(t,n){super(t,n,!1)}[bs](t,n){let c=this[wu]();if(t)return c(t);try{n=n!==void 0?this[ws].decode(n):void 0}catch(v){return c(new Su("value",v))}n!==void 0&&this[Co]++,c(null,n)}[ai](t,n){let c=this[wu]();if(t)return this[Da](c,t);try{for(let v=0;v<n.length;v++){let s=n[v];n[v]=s!==void 0?this[ws].decode(s):void 0}}catch(v){return this[Da](c,new Su("values",v))}this[Co]+=n.length,this[Da](c,null,n)}},Su=class extends uo{constructor(t,n){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:n})}};for(let e of["_ended property","_nexting property","_end method"])Object.defineProperty(Jc.prototype,e.split(" ")[0],{get(){throw new uo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new uo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});Jc.keyEncoding=bu;Jc.valueEncoding=ws;c_.AbstractIterator=Jc;c_.AbstractKeyIterator=uD;c_.AbstractValueIterator=sD});var bA=ht(cD=>{"use strict";var{AbstractKeyIterator:tq,AbstractValueIterator:nq}=Eu(),Ss=Symbol("iterator"),Gf=Symbol("callback"),jc=Symbol("handleOne"),Es=Symbol("handleMany"),Jf=class extends tq{constructor(t,n){super(t,n),this[Ss]=t.iterator({...n,keys:!0,values:!1}),this[jc]=this[jc].bind(this),this[Es]=this[Es].bind(this)}},l_=class extends nq{constructor(t,n){super(t,n),this[Ss]=t.iterator({...n,keys:!1,values:!0}),this[jc]=this[jc].bind(this),this[Es]=this[Es].bind(this)}};for(let e of[Jf,l_]){let t=e===Jf,n=t?c=>c[0]:c=>c[1];e.prototype._next=function(c){this[Gf]=c,this[Ss].next(this[jc])},e.prototype[jc]=function(c,v,s){let a=this[Gf];c?a(c):a(null,t?v:s)},e.prototype._nextv=function(c,v,s){this[Gf]=s,this[Ss].nextv(c,v,this[Es])},e.prototype._all=function(c,v){this[Gf]=v,this[Ss].all(c,this[Es])},e.prototype[Es]=function(c,v){let s=this[Gf];c?s(c):s(null,v.map(n))},e.prototype._seek=function(c,v){this[Ss].seek(c,v)},e.prototype._close=function(c){this[Ss].close(c)}}cD.DefaultKeyIterator=Jf;cD.DefaultValueIterator=l_});var wA=ht(v_=>{"use strict";var{AbstractIterator:rq,AbstractKeyIterator:oq,AbstractValueIterator:aq}=Eu(),lD=No(),zr=Symbol("nut"),h_=Symbol("undefer"),__=Symbol("factory"),f_=class extends rq{constructor(t,n){super(t,n),this[zr]=null,this[__]=()=>t.iterator(n),this.db.defer(()=>this[h_]())}},d_=class extends oq{constructor(t,n){super(t,n),this[zr]=null,this[__]=()=>t.keys(n),this.db.defer(()=>this[h_]())}},p_=class extends aq{constructor(t,n){super(t,n),this[zr]=null,this[__]=()=>t.values(n),this.db.defer(()=>this[h_]())}};for(let e of[f_,d_,p_])e.prototype[h_]=function(){this.db.status==="open"&&(this[zr]=this[__]())},e.prototype._next=function(t){this[zr]!==null?this[zr].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new lD("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,n,c){this[zr]!==null?this[zr].nextv(t,n,c):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,n,c)):this.nextTick(c,new lD("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,n){this[zr]!==null?this[zr].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(t,n)):this.nextTick(n,new lD("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,n){this[zr]!==null?this[zr]._seek(t,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,n))},e.prototype._close=function(t){this[zr]!==null?this[zr].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};v_.DeferredIterator=f_;v_.DeferredKeyIterator=d_;v_.DeferredValueIterator=p_});var dD=ht(EA=>{"use strict";var{fromCallback:SA}=Uf(),m_=No(),{getCallback:iq,getOptions:uq}=a_(),g_=Symbol("promise"),bo=Symbol("status"),Kc=Symbol("operations"),jf=Symbol("finishClose"),Qc=Symbol("closeCallbacks"),fD=class{constructor(t){if(typeof t!="object"||t===null){let n=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[Kc]=[],this[Qc]=[],this[bo]="open",this[jf]=this[jf].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[Kc].length}put(t,n,c){if(this[bo]!=="open")throw new m_("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let v=this.db._checkKey(t)||this.db._checkValue(n);if(v)throw v;let s=c&&c.sublevel!=null?c.sublevel:this.db,a=c,d=s.keyEncoding(c&&c.keyEncoding),i=s.valueEncoding(c&&c.valueEncoding),r=d.format;c={...c,keyEncoding:r,valueEncoding:i.format},s!==this.db&&(c.sublevel=null);let u=s.prefixKey(d.encode(t),r),l=i.encode(n);return this._put(u,l,c),this[Kc].push({...a,type:"put",key:t,value:n}),this}_put(t,n,c){}del(t,n){if(this[bo]!=="open")throw new m_("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let c=this.db._checkKey(t);if(c)throw c;let v=n&&n.sublevel!=null?n.sublevel:this.db,s=n,a=v.keyEncoding(n&&n.keyEncoding),d=a.format;return n={...n,keyEncoding:d},v!==this.db&&(n.sublevel=null),this._del(v.prefixKey(a.encode(t),d),n),this[Kc].push({...s,type:"del",key:t}),this}_del(t,n){}clear(){if(this[bo]!=="open")throw new m_("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Kc]=[],this}_clear(){}write(t,n){return n=iq(t,n),n=SA(n,g_),t=uq(t),this[bo]!=="open"?this.nextTick(n,new m_("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[bo]="writing",this._write(t,c=>{this[bo]="closing",this[Qc].push(()=>n(c)),c||this.db.emit("batch",this[Kc]),this._close(this[jf])})),n[g_]}_write(t,n){}close(t){return t=SA(t,g_),this[bo]==="closing"?this[Qc].push(t):this[bo]==="closed"?this.nextTick(t):(this[Qc].push(t),this[bo]!=="writing"&&(this[bo]="closing",this._close(this[jf]))),t[g_]}_close(t){this.nextTick(t)}[jf](){this[bo]="closed",this.db.detachResource(this);let t=this[Qc];this[Qc]=[];for(let n of t)n()}};EA.AbstractChainedBatch=fD});var MA=ht(TA=>{"use strict";var{AbstractChainedBatch:sq}=dD(),cq=No(),Xc=Symbol("encoded"),pD=class extends sq{constructor(t){super(t),this[Xc]=[]}_put(t,n,c){this[Xc].push({...c,type:"put",key:t,value:n})}_del(t,n){this[Xc].push({...n,type:"del",key:t})}_clear(){this[Xc]=[]}_write(t,n){this.db.status==="opening"?this.db.defer(()=>this._write(t,n)):this.db.status==="open"?this[Xc].length===0?this.nextTick(n):this.db._batch(this[Xc],t,n):this.nextTick(n,new cq("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};TA.DefaultChainedBatch=pD});var xA=ht((V_e,FA)=>{"use strict";var LA=No(),lq=Object.prototype.hasOwnProperty,fq=new Set(["lt","lte","gt","gte"]);FA.exports=function(e,t){let n={};for(let c in e)if(lq.call(e,c)&&!(c==="keyEncoding"||c==="valueEncoding")){if(c==="start"||c==="end")throw new LA(`The legacy range option '${c}' has been removed`,{code:"LEVEL_LEGACY"});if(c==="encoding")throw new LA("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});fq.has(c)?n[c]=t.encode(e[c]):n[c]=e[c]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}});var hD=ht((G_e,IA)=>{var AA;IA.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(AA||(AA=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var kA=ht((J_e,$A)=>{"use strict";var RA=hD();$A.exports=function(e,...t){t.length===0?RA(e):RA(()=>e(...t))}});var OA=ht(y_=>{"use strict";var{AbstractIterator:dq,AbstractKeyIterator:pq,AbstractValueIterator:hq}=Eu(),Yc=Symbol("unfix"),Bo=Symbol("iterator"),Ts=Symbol("handleOne"),Tu=Symbol("handleMany"),ii=Symbol("callback"),Kf=class extends dq{constructor(t,n,c,v){super(t,n),this[Bo]=c,this[Yc]=v,this[Ts]=this[Ts].bind(this),this[Tu]=this[Tu].bind(this),this[ii]=null}[Ts](t,n,c){let v=this[ii];if(t)return v(t);n!==void 0&&(n=this[Yc](n)),v(t,n,c)}[Tu](t,n){let c=this[ii];if(t)return c(t);for(let v of n){let s=v[0];s!==void 0&&(v[0]=this[Yc](s))}c(t,n)}},Qf=class extends pq{constructor(t,n,c,v){super(t,n),this[Bo]=c,this[Yc]=v,this[Ts]=this[Ts].bind(this),this[Tu]=this[Tu].bind(this),this[ii]=null}[Ts](t,n){let c=this[ii];if(t)return c(t);n!==void 0&&(n=this[Yc](n)),c(t,n)}[Tu](t,n){let c=this[ii];if(t)return c(t);for(let v=0;v<n.length;v++){let s=n[v];s!==void 0&&(n[v]=this[Yc](s))}c(t,n)}},Xf=class extends hq{constructor(t,n,c){super(t,n),this[Bo]=c}};for(let e of[Kf,Qf])e.prototype._next=function(t){this[ii]=t,this[Bo].next(this[Ts])},e.prototype._nextv=function(t,n,c){this[ii]=c,this[Bo].nextv(t,n,this[Tu])},e.prototype._all=function(t,n){this[ii]=n,this[Bo].all(t,this[Tu])};for(let e of[Xf])e.prototype._next=function(t){this[Bo].next(t)},e.prototype._nextv=function(t,n,c){this[Bo].nextv(t,n,c)},e.prototype._all=function(t,n){this[Bo].all(t,n)};for(let e of[Kf,Qf,Xf])e.prototype._seek=function(t,n){this[Bo].seek(t,n)},e.prototype._close=function(t){this[Bo].close(t)};y_.AbstractSublevelIterator=Kf;y_.AbstractSublevelKeyIterator=Qf;y_.AbstractSublevelValueIterator=Xf});var BA=ht((K_e,NA)=>{"use strict";var _D=No(),{Buffer:gD}=Yh()||{},{AbstractSublevelIterator:_q,AbstractSublevelKeyIterator:vq,AbstractSublevelValueIterator:mq}=OA(),ui=Symbol("prefix"),HA=Symbol("upperBound"),Yf=Symbol("prefixRange"),so=Symbol("parent"),vD=Symbol("unfix"),PA=new TextEncoder,gq={separator:"!"};NA.exports=function({AbstractLevel:e}){class t extends e{static defaults(c){if(typeof c=="string")throw new _D("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(c&&c.open)throw new _D("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return c==null?gq:c.separator?c:{...c,separator:"!"}}constructor(c,v,s){let{separator:a,manifest:d,...i}=t.defaults(s);v=Dq(v,a);let r=a.charCodeAt(0)+1,u=c[so]||c;if(!PA.encode(v).every(f=>f>r&&f<127))throw new _D(`Prefix must use bytes > ${r} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(yq(u,d),i);let l=(c.prefix||"")+a+v+a,p=l.slice(0,-1)+String.fromCharCode(r);this[so]=u,this[ui]=new D_(l),this[HA]=new D_(p),this[vD]=new yD,this.nextTick=u.nextTick}prefixKey(c,v){if(v==="utf8")return this[ui].utf8+c;if(c.byteLength===0)return this[ui][v];if(v==="view"){let s=this[ui].view,a=new Uint8Array(s.byteLength+c.byteLength);return a.set(s,0),a.set(c,s.byteLength),a}else{let s=this[ui].buffer;return gD.concat([s,c],s.byteLength+c.byteLength)}}[Yf](c,v){c.gte!==void 0?c.gte=this.prefixKey(c.gte,v):c.gt!==void 0?c.gt=this.prefixKey(c.gt,v):c.gte=this[ui][v],c.lte!==void 0?c.lte=this.prefixKey(c.lte,v):c.lt!==void 0?c.lt=this.prefixKey(c.lt,v):c.lte=this[HA][v]}get prefix(){return this[ui].utf8}get db(){return this[so]}_open(c,v){this[so].open({passive:!0},v)}_put(c,v,s,a){this[so].put(c,v,s,a)}_get(c,v,s){this[so].get(c,v,s)}_getMany(c,v,s){this[so].getMany(c,v,s)}_del(c,v,s){this[so].del(c,v,s)}_batch(c,v,s){this[so].batch(c,v,s)}_clear(c,v){this[Yf](c,c.keyEncoding),this[so].clear(c,v)}_iterator(c){this[Yf](c,c.keyEncoding);let v=this[so].iterator(c),s=this[vD].get(this[ui].utf8.length,c.keyEncoding);return new _q(this,c,v,s)}_keys(c){this[Yf](c,c.keyEncoding);let v=this[so].keys(c),s=this[vD].get(this[ui].utf8.length,c.keyEncoding);return new vq(this,c,v,s)}_values(c){this[Yf](c,c.keyEncoding);let v=this[so].values(c);return new mq(this,c,v)}}return{AbstractSublevel:t}};var yq=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:mD(e,"utf8"),buffer:mD(e,"buffer"),view:mD(e,"view")}}},mD=function(e,t){return e.supports.encodings[t]?e.keyEncoding(t).name===t:!1},D_=class{constructor(t){this.utf8=t,this.view=PA.encode(t),this.buffer=gD?gD.from(this.view.buffer,0,this.view.byteLength):{}}},yD=class{constructor(){this.cache=new Map}get(t,n){let c=this.cache.get(n);return c===void 0&&(n==="view"?c=function(v,s){return s.subarray(v)}.bind(null,t):c=function(v,s){return s.slice(v)}.bind(null,t),this.cache.set(n,c)),c}},Dq=function(e,t){let n=0,c=e.length;for(;n<c&&e[n]===t;)n++;for(;c>n&&e[c-1]===t;)c--;return e.slice(n,c)}});var SD=ht(wD=>{"use strict";var{supports:Cq}=Fx(),{Transcoder:bq}=aA(),{EventEmitter:wq}=vA(),{fromCallback:Mu}=Uf(),Wo=No(),{AbstractIterator:Ms}=Eu(),{DefaultKeyIterator:Sq,DefaultValueIterator:Eq}=bA(),{DeferredIterator:Tq,DeferredKeyIterator:Mq,DeferredValueIterator:Lq}=wA(),{DefaultChainedBatch:WA}=MA(),{getCallback:Ls,getOptions:Lu}=a_(),C_=xA(),dt=Symbol("promise"),si=Symbol("landed"),Fs=Symbol("resources"),DD=Symbol("closeResources"),Zf=Symbol("operations"),ed=Symbol("undefer"),b_=Symbol("deferOpen"),UA=Symbol("options"),mt=Symbol("status"),xs=Symbol("defaultOptions"),Zc=Symbol("transcoder"),w_=Symbol("keyEncoding"),CD=Symbol("valueEncoding"),Fq=()=>{},td=class extends wq{constructor(t,n){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");n=Lu(n);let{keyEncoding:c,valueEncoding:v,passive:s,...a}=n;this[Fs]=new Set,this[Zf]=[],this[b_]=!0,this[UA]=a,this[mt]="opening",this.supports=Cq(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Zc]=new bq(xq(this)),this[w_]=this[Zc].encoding(c||"utf8"),this[CD]=this[Zc].encoding(v||"utf8");for(let d of this[Zc].encodings())this.supports.encodings[d.commonName]||(this.supports.encodings[d.commonName]=!0);this[xs]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[w_].commonName,valueEncoding:this[CD].commonName}),key:Object.freeze({keyEncoding:this[w_].commonName})},this.nextTick(()=>{this[b_]&&this.open({passive:!1},Fq)})}get status(){return this[mt]}keyEncoding(t){return this[Zc].encoding(t??this[w_])}valueEncoding(t){return this[Zc].encoding(t??this[CD])}open(t,n){n=Ls(t,n),n=Mu(n,dt),t={...this[UA],...Lu(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;let c=v=>{this[mt]==="closing"||this[mt]==="opening"?this.once(si,v?()=>c(v):c):this[mt]!=="open"?n(new Wo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:v})):n()};return t.passive?this[mt]==="opening"?this.once(si,c):this.nextTick(c):this[mt]==="closed"||this[b_]?(this[b_]=!1,this[mt]="opening",this.emit("opening"),this._open(t,v=>{if(v){this[mt]="closed",this[DD](()=>{this.emit(si),c(v)}),this[ed]();return}this[mt]="open",this[ed](),this.emit(si),this[mt]==="open"&&this.emit("open"),this[mt]==="open"&&this.emit("ready"),c()})):this[mt]==="open"?this.nextTick(c):this.once(si,()=>this.open(t,n)),n[dt]}_open(t,n){this.nextTick(n)}close(t){t=Mu(t,dt);let n=c=>{this[mt]==="opening"||this[mt]==="closing"?this.once(si,c?n(c):n):this[mt]!=="closed"?t(new Wo("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:c})):t()};if(this[mt]==="open"){this[mt]="closing",this.emit("closing");let c=v=>{this[mt]="open",this[ed](),this.emit(si),n(v)};this[DD](()=>{this._close(v=>{if(v)return c(v);this[mt]="closed",this[ed](),this.emit(si),this[mt]==="closed"&&this.emit("closed"),n()})})}else this[mt]==="closed"?this.nextTick(n):this.once(si,()=>this.close(t));return t[dt]}[DD](t){if(this[Fs].size===0)return this.nextTick(t);let n=this[Fs].size,c=!0,v=()=>{--n===0&&(c?this.nextTick(t):t())};for(let s of this[Fs])s.close(v);c=!1,this[Fs].clear()}_close(t){this.nextTick(t)}get(t,n,c){if(c=Ls(n,c),c=Mu(c,dt),n=Lu(n,this[xs].entry),this[mt]==="opening")return this.defer(()=>this.get(t,n,c)),c[dt];if(el(this,c))return c[dt];let v=this._checkKey(t);if(v)return this.nextTick(c,v),c[dt];let s=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),d=s.format,i=a.format;return(n.keyEncoding!==d||n.valueEncoding!==i)&&(n=Object.assign({},n,{keyEncoding:d,valueEncoding:i})),this._get(this.prefixKey(s.encode(t),d),n,(r,u)=>{if(r)return(r.code==="LEVEL_NOT_FOUND"||r.notFound||/NotFound/i.test(r))&&(r.code||(r.code="LEVEL_NOT_FOUND"),r.notFound||(r.notFound=!0),r.status||(r.status=404)),c(r);try{u=a.decode(u)}catch(l){return c(new Wo("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:l}))}c(null,u)}),c[dt]}_get(t,n,c){this.nextTick(c,new Error("NotFound"))}getMany(t,n,c){if(c=Ls(n,c),c=Mu(c,dt),n=Lu(n,this[xs].entry),this[mt]==="opening")return this.defer(()=>this.getMany(t,n,c)),c[dt];if(el(this,c))return c[dt];if(!Array.isArray(t))return this.nextTick(c,new TypeError("The first argument 'keys' must be an array")),c[dt];if(t.length===0)return this.nextTick(c,null,[]),c[dt];let v=this.keyEncoding(n.keyEncoding),s=this.valueEncoding(n.valueEncoding),a=v.format,d=s.format;(n.keyEncoding!==a||n.valueEncoding!==d)&&(n=Object.assign({},n,{keyEncoding:a,valueEncoding:d}));let i=new Array(t.length);for(let r=0;r<t.length;r++){let u=t[r],l=this._checkKey(u);if(l)return this.nextTick(c,l),c[dt];i[r]=this.prefixKey(v.encode(u),a)}return this._getMany(i,n,(r,u)=>{if(r)return c(r);try{for(let l=0;l<u.length;l++)u[l]!==void 0&&(u[l]=s.decode(u[l]))}catch(l){return c(new Wo(`Could not decode one or more of ${u.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:l}))}c(null,u)}),c[dt]}_getMany(t,n,c){this.nextTick(c,null,new Array(t.length).fill(void 0))}put(t,n,c,v){if(v=Ls(c,v),v=Mu(v,dt),c=Lu(c,this[xs].entry),this[mt]==="opening")return this.defer(()=>this.put(t,n,c,v)),v[dt];if(el(this,v))return v[dt];let s=this._checkKey(t)||this._checkValue(n);if(s)return this.nextTick(v,s),v[dt];let a=this.keyEncoding(c.keyEncoding),d=this.valueEncoding(c.valueEncoding),i=a.format,r=d.format;(c.keyEncoding!==i||c.valueEncoding!==r)&&(c=Object.assign({},c,{keyEncoding:i,valueEncoding:r}));let u=this.prefixKey(a.encode(t),i),l=d.encode(n);return this._put(u,l,c,p=>{if(p)return v(p);this.emit("put",t,n),v()}),v[dt]}_put(t,n,c,v){this.nextTick(v)}del(t,n,c){if(c=Ls(n,c),c=Mu(c,dt),n=Lu(n,this[xs].key),this[mt]==="opening")return this.defer(()=>this.del(t,n,c)),c[dt];if(el(this,c))return c[dt];let v=this._checkKey(t);if(v)return this.nextTick(c,v),c[dt];let s=this.keyEncoding(n.keyEncoding),a=s.format;return n.keyEncoding!==a&&(n=Object.assign({},n,{keyEncoding:a})),this._del(this.prefixKey(s.encode(t),a),n,d=>{if(d)return c(d);this.emit("del",t),c()}),c[dt]}_del(t,n,c){this.nextTick(c)}batch(t,n,c){if(!arguments.length){if(this[mt]==="opening")return new WA(this);if(this[mt]!=="open")throw new Wo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?c=t:c=Ls(n,c),c=Mu(c,dt),n=Lu(n,this[xs].empty),this[mt]==="opening")return this.defer(()=>this.batch(t,n,c)),c[dt];if(el(this,c))return c[dt];if(!Array.isArray(t))return this.nextTick(c,new TypeError("The first argument 'operations' must be an array")),c[dt];if(t.length===0)return this.nextTick(c),c[dt];let v=new Array(t.length),{keyEncoding:s,valueEncoding:a,...d}=n;for(let i=0;i<t.length;i++){if(typeof t[i]!="object"||t[i]===null)return this.nextTick(c,new TypeError("A batch operation must be an object")),c[dt];let r=Object.assign({},t[i]);if(r.type!=="put"&&r.type!=="del")return this.nextTick(c,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),c[dt];let u=this._checkKey(r.key);if(u)return this.nextTick(c,u),c[dt];let l=r.sublevel!=null?r.sublevel:this,p=l.keyEncoding(r.keyEncoding||s),f=p.format;if(r.key=l.prefixKey(p.encode(r.key),f),r.keyEncoding=f,r.type==="put"){let o=this._checkValue(r.value);if(o)return this.nextTick(c,o),c[dt];let h=l.valueEncoding(r.valueEncoding||a);r.value=h.encode(r.value),r.valueEncoding=h.format}l!==this&&(r.sublevel=null),v[i]=r}return this._batch(v,d,i=>{if(i)return c(i);this.emit("batch",t),c()}),c[dt]}_batch(t,n,c){this.nextTick(c)}sublevel(t,n){return this._sublevel(t,bD.defaults(n))}_sublevel(t,n){return new bD(this,t,n)}prefixKey(t,n){return t}clear(t,n){if(n=Ls(t,n),n=Mu(n,dt),t=Lu(t,this[xs].empty),this[mt]==="opening")return this.defer(()=>this.clear(t,n)),n[dt];if(el(this,n))return n[dt];let c=t,v=this.keyEncoding(t.keyEncoding);return t=C_(t,v),t.keyEncoding=v.format,t.limit===0?this.nextTick(n):this._clear(t,s=>{if(s)return n(s);this.emit("clear",c),n()}),n[dt]}_clear(t,n){this.nextTick(n)}iterator(t){let n=this.keyEncoding(t&&t.keyEncoding),c=this.valueEncoding(t&&t.valueEncoding);if(t=C_(t,n),t.keys=t.keys!==!1,t.values=t.values!==!1,t[Ms.keyEncoding]=n,t[Ms.valueEncoding]=c,t.keyEncoding=n.format,t.valueEncoding=c.format,this[mt]==="opening")return new Tq(this,t);if(this[mt]!=="open")throw new Wo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new Ms(this,t)}keys(t){let n=this.keyEncoding(t&&t.keyEncoding),c=this.valueEncoding(t&&t.valueEncoding);if(t=C_(t,n),t[Ms.keyEncoding]=n,t[Ms.valueEncoding]=c,t.keyEncoding=n.format,t.valueEncoding=c.format,this[mt]==="opening")return new Mq(this,t);if(this[mt]!=="open")throw new Wo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new Sq(this,t)}values(t){let n=this.keyEncoding(t&&t.keyEncoding),c=this.valueEncoding(t&&t.valueEncoding);if(t=C_(t,n),t[Ms.keyEncoding]=n,t[Ms.valueEncoding]=c,t.keyEncoding=n.format,t.valueEncoding=c.format,this[mt]==="opening")return new Lq(this,t);if(this[mt]!=="open")throw new Wo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new Eq(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[Zf].push(t)}[ed](){if(this[Zf].length===0)return;let t=this[Zf];this[Zf]=[];for(let n of t)n()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[Fs].add(t)}detachResource(t){this[Fs].delete(t)}_chainedBatch(){return new WA(this)}_checkKey(t){if(t==null)return new Wo("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new Wo("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};td.prototype.nextTick=kA();var{AbstractSublevel:bD}=BA()({AbstractLevel:td});wD.AbstractLevel=td;wD.AbstractSublevel=bD;var el=function(e,t){return e[mt]!=="open"?(e.nextTick(t,new Wo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},xq=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])}});var ED=ht(As=>{"use strict";As.AbstractLevel=SD().AbstractLevel;As.AbstractSublevel=SD().AbstractSublevel;As.AbstractIterator=Eu().AbstractIterator;As.AbstractKeyIterator=Eu().AbstractKeyIterator;As.AbstractValueIterator=Eu().AbstractValueIterator;As.AbstractChainedBatch=dD().AbstractChainedBatch});var zA=ht((Y_e,qA)=>{qA.exports=Iq;var Aq=hD();function Iq(e,t,n){if(typeof t!="number")throw new Error("second argument must be a Number");let c,v,s,a,d,i=!0,r;Array.isArray(e)?(c=[],s=v=e.length):(a=Object.keys(e),c={},s=v=a.length);function u(p){function f(){n&&n(p,c),n=null}i?Aq(f):f()}function l(p,f,o){if(c[p]=o,f&&(d=!0),--s===0||f)u(f);else if(!d&&r<v){let h;a?(h=a[r],r+=1,e[h](function(_,m){l(h,_,m)})):(h=r,r+=1,e[h](function(_,m){l(h,_,m)}))}}r=t,s?a?a.some(function(p,f){return e[p](function(o,h){l(p,o,h)}),f===t-1}):e.some(function(p,f){return p(function(o,h){l(f,o,h)}),f===t-1}):u(null),i=!1}});var TD=ht((Z_e,VA)=>{"use strict";VA.exports=function(t){let n=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,c=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,v=t.gte===void 0,s=t.lte===void 0;return n!==void 0&&c!==void 0?IDBKeyRange.bound(n,c,v,s):n!==void 0?IDBKeyRange.lowerBound(n,v):c!==void 0?IDBKeyRange.upperBound(c,s):null}});var MD=ht((eve,GA)=>{"use strict";var Rq=new TextEncoder;GA.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):Rq.encode(e)}});var XA=ht(QA=>{"use strict";var{AbstractIterator:$q}=ED(),JA=TD(),S_=MD(),Ca=Symbol("cache"),ci=Symbol("finished"),co=Symbol("options"),li=Symbol("currentOptions"),Is=Symbol("position"),LD=Symbol("location"),tl=Symbol("first"),jA={},FD=class extends $q{constructor(t,n,c){super(t,c),this[Ca]=[],this[ci]=this.limit===0,this[co]=c,this[li]={...c},this[Is]=void 0,this[LD]=n,this[tl]=!0}_nextv(t,n,c){if(this[tl]=!1,this[ci])return this.nextTick(c,null,[]);if(this[Ca].length>0)return t=Math.min(t,this[Ca].length),this.nextTick(c,null,this[Ca].splice(0,t));this[Is]!==void 0&&(this[co].reverse?(this[li].lt=this[Is],this[li].lte=void 0):(this[li].gt=this[Is],this[li].gte=void 0));let v;try{v=JA(this[li])}catch{return this[ci]=!0,this.nextTick(c,null,[])}let s=this.db.db.transaction([this[LD]],"readonly"),a=s.objectStore(this[LD]),d=[];if(this[co].reverse){let i=!this[co].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[i](v,"prev").onsuccess=r=>{let u=r.target.result;if(u){let{key:l,value:p}=u;this[Is]=l,d.push([this[co].keys&&l!==void 0?S_(l):void 0,this[co].values&&p!==void 0?S_(p):void 0]),d.length<t?u.continue():KA(s)}else this[ci]=!0}}else{let i,r,u=()=>{if(i===void 0||r===void 0)return;let l=Math.max(i.length,r.length);l===0||t===1/0?this[ci]=!0:this[Is]=i[l-1],d.length=l;for(let p=0;p<l;p++){let f=i[p],o=r[p];d[p]=[this[co].keys&&f!==void 0?S_(f):void 0,this[co].values&&o!==void 0?S_(o):void 0]}KA(s)};this[co].keys||t<1/0?a.getAllKeys(v,t<1/0?t:void 0).onsuccess=l=>{i=l.target.result,u()}:(i=[],this.nextTick(u)),this[co].values?a.getAll(v,t<1/0?t:void 0).onsuccess=l=>{r=l.target.result,u()}:(r=[],this.nextTick(u))}s.onabort=()=>{c(s.error||new Error("aborted by user")),c=null},s.oncomplete=()=>{c(null,d),c=null}}_next(t){if(this[Ca].length>0){let[n,c]=this[Ca].shift();this.nextTick(t,null,n,c)}else if(this[ci])this.nextTick(t);else{let n=Math.min(100,this.limit-this.count);this[tl]&&(this[tl]=!1,n=1),this._nextv(n,jA,(c,v)=>{if(c)return t(c);this[Ca]=v,this._next(t)})}}_all(t,n){this[tl]=!1;let c=this[Ca].splice(0,this[Ca].length),v=this.limit-this.count-c.length;if(v<=0)return this.nextTick(n,null,c);this._nextv(v,jA,(s,a)=>{if(s)return n(s);c.length>0&&(a=c.concat(a)),n(null,a)})}_seek(t,n){this[tl]=!0,this[Ca]=[],this[ci]=!1,this[Is]=void 0,this[li]={...this[co]};let c;try{c=JA(this[co])}catch{this[ci]=!0;return}c!==null&&!c.includes(t)?this[ci]=!0:this[co].reverse?this[li].lte=t:this[li].gte=t}};QA.Iterator=FD;function KA(e){typeof e.commit=="function"&&e.commit()}});var ZA=ht((nve,YA)=>{"use strict";YA.exports=function(t,n,c,v,s){if(v.limit===0)return t.nextTick(s);let a=t.db.transaction([n],"readwrite"),d=a.objectStore(n),i=0;a.oncomplete=function(){s()},a.onabort=function(){s(a.error||new Error("aborted by user"))};let r=d.openKeyCursor?"openKeyCursor":"openCursor",u=v.reverse?"prev":"next";d[r](c,u).onsuccess=function(l){let p=l.target.result;p&&(d.delete(p.key).onsuccess=function(){(v.limit<=0||++i<v.limit)&&p.continue()})}}});var aI=ht(oI=>{"use strict";var{AbstractLevel:kq}=ED(),eI=No(),Oq=zA(),{fromCallback:Hq}=Uf(),{Iterator:Pq}=XA(),tI=MD(),Nq=ZA(),Bq=TD(),rI="level-js-",nd=Symbol("idb"),xD=Symbol("namePrefix"),fi=Symbol("location"),AD=Symbol("version"),Rs=Symbol("store"),rd=Symbol("onComplete"),nI=Symbol("promise"),E_=class extends kq{constructor(t,n,c){if(typeof n=="function"||typeof c=="function")throw new eI("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:v,version:s,...a}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof t!="string")throw new Error("constructor requires a location string argument");this[fi]=t,this[xD]=v??rI,this[AD]=parseInt(s||1,10),this[nd]=null}get location(){return this[fi]}get namePrefix(){return this[xD]}get version(){return this[AD]}get db(){return this[nd]}get type(){return"browser-level"}_open(t,n){let c=indexedDB.open(this[xD]+this[fi],this[AD]);c.onerror=function(){n(c.error||new Error("unknown error"))},c.onsuccess=()=>{this[nd]=c.result,n()},c.onupgradeneeded=v=>{let s=v.target.result;s.objectStoreNames.contains(this[fi])||s.createObjectStore(this[fi])}}[Rs](t){return this[nd].transaction([this[fi]],t).objectStore(this[fi])}[rd](t,n){let c=t.transaction;c.onabort=function(){n(c.error||new Error("aborted by user"))},c.oncomplete=function(){n(null,t.result)}}_get(t,n,c){let v=this[Rs]("readonly"),s;try{s=v.get(t)}catch(a){return this.nextTick(c,a)}this[rd](s,function(a,d){if(a)return c(a);if(d===void 0)return c(new eI("Entry not found",{code:"LEVEL_NOT_FOUND"}));c(null,tI(d))})}_getMany(t,n,c){let v=this[Rs]("readonly"),s=t.map(a=>d=>{let i;try{i=v.get(a)}catch(r){return d(r)}i.onsuccess=()=>{let r=i.result;d(null,r===void 0?r:tI(r))},i.onerror=r=>{r.stopPropagation(),d(i.error)}});Oq(s,16,c)}_del(t,n,c){let v=this[Rs]("readwrite"),s;try{s=v.delete(t)}catch(a){return this.nextTick(c,a)}this[rd](s,c)}_put(t,n,c,v){let s=this[Rs]("readwrite"),a;try{a=s.put(n,t)}catch(d){return this.nextTick(v,d)}this[rd](a,v)}_iterator(t){return new Pq(this,this[fi],t)}_batch(t,n,c){let v=this[Rs]("readwrite"),s=v.transaction,a=0,d;s.onabort=function(){c(d||s.error||new Error("aborted by user"))},s.oncomplete=function(){c()};function i(){let r=t[a++],u=r.key,l;try{l=r.type==="del"?v.delete(u):v.put(r.value,u)}catch(p){d=p,s.abort();return}a<t.length?l.onsuccess=i:typeof s.commit=="function"&&s.commit()}i()}_clear(t,n){let c,v;try{c=Bq(t)}catch{return this.nextTick(n)}if(t.limit>=0)return Nq(this,this[fi],c,t,n);try{let s=this[Rs]("readwrite");v=c?s.delete(c):s.clear()}catch(s){return this.nextTick(n,s)}this[rd](v,n)}_close(t){this[nd].close(),this.nextTick(t)}};E_.destroy=function(e,t,n){typeof t=="function"&&(n=t,t=rI),n=Hq(n,nI);let c=indexedDB.deleteDatabase(t+e);return c.onsuccess=function(){n()},c.onerror=function(v){n(v)},n[nI]};oI.BrowserLevel=E_});var ID=ht(iI=>{iI.Level=aI().BrowserLevel});var Hk=ht((Bv,jw)=>{(function(e,t){typeof Bv=="object"&&typeof jw=="object"?jw.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Bv=="object"?Bv.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let c=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(c._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,c=n._renderService.dimensions;if(c.css.cell.width===0||c.css.cell.height===0)return;let v=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(s.getPropertyValue("height")),d=Math.max(0,parseInt(s.getPropertyValue("width"))),i=window.getComputedStyle(this._terminal.element),r=a-(parseInt(i.getPropertyValue("padding-top"))+parseInt(i.getPropertyValue("padding-bottom"))),u=d-(parseInt(i.getPropertyValue("padding-right"))+parseInt(i.getPropertyValue("padding-left")))-v;return{cols:Math.max(2,Math.floor(u/c.css.cell.width)),rows:Math.max(1,Math.floor(r/c.css.cell.height))}}}})(),e})())});var Nk=ht((Uv,Kw)=>{(function(e,t){typeof Uv=="object"&&typeof Kw=="object"?Kw.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Uv=="object"?Uv.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(v,s,a){var d=this&&this.__decorate||function(D,g,b,L){var S,T=arguments.length,M=T<3?g:L===null?L=Object.getOwnPropertyDescriptor(g,b):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,L);else for(var w=D.length-1;w>=0;w--)(S=D[w])&&(M=(T<3?S(M):T>3?S(g,b,M):S(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M};Object.defineProperty(s,"__esModule",{value:!0}),s.GlyphRenderer=void 0;let i=a(374),r=a(509),u=a(855),l=a(859),p=a(776),f=a(381),o=11,h=o*Float32Array.BYTES_PER_ELEMENT,_,m=0,y=0,C=0;class E extends l.Disposable{constructor(g,b,L){super(),this._terminal=g,this._gl=b,this._dimensions=L,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let S=this._gl;r.TextureAtlas.maxAtlasPages===void 0&&(r.TextureAtlas.maxAtlasPages=Math.min(32,(0,i.throwIfFalsy)(S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS))),r.TextureAtlas.maxTextureSize=(0,i.throwIfFalsy)(S.getParameter(S.MAX_TEXTURE_SIZE))),this._program=(0,i.throwIfFalsy)((0,f.createProgram)(S,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(R){let A="";for(let I=1;I<R;I++)A+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${R}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${A}
}`}(r.TextureAtlas.maxAtlasPages))),this.register((0,l.toDisposable)(()=>S.deleteProgram(this._program))),this._projectionLocation=(0,i.throwIfFalsy)(S.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,i.throwIfFalsy)(S.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,i.throwIfFalsy)(S.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=S.createVertexArray(),S.bindVertexArray(this._vertexArrayObject);let T=new Float32Array([0,0,1,0,0,1,1,1]),M=S.createBuffer();this.register((0,l.toDisposable)(()=>S.deleteBuffer(M))),S.bindBuffer(S.ARRAY_BUFFER,M),S.bufferData(S.ARRAY_BUFFER,T,S.STATIC_DRAW),S.enableVertexAttribArray(0),S.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let w=new Uint8Array([0,1,2,3]),F=S.createBuffer();this.register((0,l.toDisposable)(()=>S.deleteBuffer(F))),S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,F),S.bufferData(S.ELEMENT_ARRAY_BUFFER,w,S.STATIC_DRAW),this._attributesBuffer=(0,i.throwIfFalsy)(S.createBuffer()),this.register((0,l.toDisposable)(()=>S.deleteBuffer(this._attributesBuffer))),S.bindBuffer(S.ARRAY_BUFFER,this._attributesBuffer),S.enableVertexAttribArray(2),S.vertexAttribPointer(2,2,S.FLOAT,!1,h,0),S.vertexAttribDivisor(2,1),S.enableVertexAttribArray(3),S.vertexAttribPointer(3,2,S.FLOAT,!1,h,2*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(3,1),S.enableVertexAttribArray(4),S.vertexAttribPointer(4,1,S.FLOAT,!1,h,4*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(4,1),S.enableVertexAttribArray(5),S.vertexAttribPointer(5,2,S.FLOAT,!1,h,5*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(5,1),S.enableVertexAttribArray(6),S.vertexAttribPointer(6,2,S.FLOAT,!1,h,7*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(6,1),S.enableVertexAttribArray(1),S.vertexAttribPointer(1,2,S.FLOAT,!1,h,9*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(1,1),S.useProgram(this._program);let x=new Int32Array(r.TextureAtlas.maxAtlasPages);for(let R=0;R<r.TextureAtlas.maxAtlasPages;R++)x[R]=R;S.uniform1iv(this._textureLocation,x),S.uniformMatrix4fv(this._projectionLocation,!1,f.PROJECTION_MATRIX),this._atlasTextures=[];for(let R=0;R<r.TextureAtlas.maxAtlasPages;R++){let A=new f.GLTexture((0,i.throwIfFalsy)(S.createTexture()));this.register((0,l.toDisposable)(()=>S.deleteTexture(A.texture))),S.activeTexture(S.TEXTURE0+R),S.bindTexture(S.TEXTURE_2D,A.texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[R]=A}S.enable(S.BLEND),S.blendFunc(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,b,L,S,T,M,w,F){this._updateCell(this._vertices.attributes,g,b,L,S,T,M,w,F)}_updateCell(g,b,L,S,T,M,w,F,x){m=(L*this._terminal.cols+b)*o,S!==u.NULL_CELL_CODE&&S!==void 0?this._atlas&&(_=F&&F.length>1?this._atlas.getRasterizedGlyphCombinedChar(F,T,M,w,!1):this._atlas.getRasterizedGlyph(S,T,M,w,!1),y=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),T!==x&&_.offset.x>y?(C=_.offset.x-y,g[m]=-(_.offset.x-C)+this._dimensions.device.char.left,g[m+1]=-_.offset.y+this._dimensions.device.char.top,g[m+2]=(_.size.x-C)/this._dimensions.device.canvas.width,g[m+3]=_.size.y/this._dimensions.device.canvas.height,g[m+4]=_.texturePage,g[m+5]=_.texturePositionClipSpace.x+C/this._atlas.pages[_.texturePage].canvas.width,g[m+6]=_.texturePositionClipSpace.y,g[m+7]=_.sizeClipSpace.x-C/this._atlas.pages[_.texturePage].canvas.width,g[m+8]=_.sizeClipSpace.y):(g[m]=-_.offset.x+this._dimensions.device.char.left,g[m+1]=-_.offset.y+this._dimensions.device.char.top,g[m+2]=_.size.x/this._dimensions.device.canvas.width,g[m+3]=_.size.y/this._dimensions.device.canvas.height,g[m+4]=_.texturePage,g[m+5]=_.texturePositionClipSpace.x,g[m+6]=_.texturePositionClipSpace.y,g[m+7]=_.sizeClipSpace.x,g[m+8]=_.sizeClipSpace.y)):g.fill(0,m,m+o-1-2)}clear(){let g=this._terminal,b=g.cols*g.rows*o;this._vertices.count!==b?this._vertices.attributes=new Float32Array(b):this._vertices.attributes.fill(0);let L=0;for(;L<this._vertices.attributesBuffers.length;L++)this._vertices.count!==b?this._vertices.attributesBuffers[L]=new Float32Array(b):this._vertices.attributesBuffers[L].fill(0);this._vertices.count=b,L=0;for(let S=0;S<g.rows;S++)for(let T=0;T<g.cols;T++)this._vertices.attributes[L+9]=T/g.cols,this._vertices.attributes[L+10]=S/g.rows,L+=o}handleResize(){let g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let L=this._vertices.attributesBuffers[this._activeBuffer],S=0;for(let T=0;T<g.lineLengths.length;T++){let M=T*this._terminal.cols*o,w=this._vertices.attributes.subarray(M,M+g.lineLengths[T]*o);L.set(w,S),S+=w.length}b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,L.subarray(0,S),b.STREAM_DRAW);for(let T=0;T<this._atlas.pages.length;T++)this._atlas.pages[T].version!==this._atlasTextures[T].version&&this._bindAtlasPageTexture(b,this._atlas,T);b.drawElementsInstanced(b.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,S/o)}setAtlas(g){this._atlas=g;for(let b of this._atlasTextures)b.version=-1}_bindAtlasPageTexture(g,b,L){g.activeTexture(g.TEXTURE0+L),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[L].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,b.pages[L].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[L].version=b.pages[L].version}setDimensions(g){this._dimensions=g}}s.GlyphRenderer=E,d([p.traceCall],E.prototype,"updateCell",null)},742:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RectangleRenderer=void 0;let d=a(374),i=a(859),r=a(310),u=a(381),l=8*Float32Array.BYTES_PER_ELEMENT;class p{constructor(){this.attributes=new Float32Array(160),this.count=0}}let f=0,o=0,h=0,_=0,m=0,y=0,C=0;class E extends i.Disposable{constructor(g,b,L,S){super(),this._terminal=g,this._gl=b,this._dimensions=L,this._themeService=S,this._vertices=new p,this._verticesCursor=new p;let T=this._gl;this._program=(0,d.throwIfFalsy)((0,u.createProgram)(T,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,i.toDisposable)(()=>T.deleteProgram(this._program))),this._projectionLocation=(0,d.throwIfFalsy)(T.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=T.createVertexArray(),T.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),w=T.createBuffer();this.register((0,i.toDisposable)(()=>T.deleteBuffer(w))),T.bindBuffer(T.ARRAY_BUFFER,w),T.bufferData(T.ARRAY_BUFFER,M,T.STATIC_DRAW),T.enableVertexAttribArray(3),T.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let F=new Uint8Array([0,1,2,3]),x=T.createBuffer();this.register((0,i.toDisposable)(()=>T.deleteBuffer(x))),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,x),T.bufferData(T.ELEMENT_ARRAY_BUFFER,F,T.STATIC_DRAW),this._attributesBuffer=(0,d.throwIfFalsy)(T.createBuffer()),this.register((0,i.toDisposable)(()=>T.deleteBuffer(this._attributesBuffer))),T.bindBuffer(T.ARRAY_BUFFER,this._attributesBuffer),T.enableVertexAttribArray(0),T.vertexAttribPointer(0,2,T.FLOAT,!1,l,0),T.vertexAttribDivisor(0,1),T.enableVertexAttribArray(1),T.vertexAttribPointer(1,2,T.FLOAT,!1,l,2*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(1,1),T.enableVertexAttribArray(2),T.vertexAttribPointer(2,4,T.FLOAT,!1,l,4*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(2,1),this._updateCachedColors(S.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),b.uniformMatrix4fv(this._projectionLocation,!1,u.PROJECTION_MATRIX),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,g.attributes,b.DYNAMIC_DRAW),b.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){let b=this._terminal,L=this._vertices,S,T,M,w,F,x,R,A,I,$,k,H=1;for(S=0;S<b.rows;S++){for(M=-1,w=0,F=0,x=!1,T=0;T<b.cols;T++)R=(S*b.cols+T)*r.RENDER_MODEL_INDICIES_PER_CELL,A=g.cells[R+r.RENDER_MODEL_BG_OFFSET],I=g.cells[R+r.RENDER_MODEL_FG_OFFSET],$=!!(67108864&I),(A!==w||I!==F&&(x||$))&&((w!==0||x&&F!==0)&&(k=8*H++,this._updateRectangle(L,k,F,w,M,T,S)),M=T,w=A,F=I,x=$);(w!==0||x&&F!==0)&&(k=8*H++,this._updateRectangle(L,k,F,w,M,b.cols,S))}L.count=H}updateCursor(g){let b=this._verticesCursor,L=g.cursor;if(!L||L.style==="block")return void(b.count=0);let S,T=0;L.style!=="bar"&&L.style!=="outline"||(S=8*T++,this._addRectangleFloat(b.attributes,S,L.x*this._dimensions.device.cell.width,L.y*this._dimensions.device.cell.height,L.style==="bar"?L.dpr*L.cursorWidth:L.dpr,this._dimensions.device.cell.height,this._cursorFloat)),L.style!=="underline"&&L.style!=="outline"||(S=8*T++,this._addRectangleFloat(b.attributes,S,L.x*this._dimensions.device.cell.width,(L.y+1)*this._dimensions.device.cell.height-L.dpr,L.width*this._dimensions.device.cell.width,L.dpr,this._cursorFloat)),L.style==="outline"&&(S=8*T++,this._addRectangleFloat(b.attributes,S,L.x*this._dimensions.device.cell.width,L.y*this._dimensions.device.cell.height,L.width*this._dimensions.device.cell.width,L.dpr,this._cursorFloat),S=8*T++,this._addRectangleFloat(b.attributes,S,(L.x+L.width)*this._dimensions.device.cell.width-L.dpr,L.y*this._dimensions.device.cell.height,L.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.count=T}_updateRectangle(g,b,L,S,T,M,w){if(67108864&L)switch(50331648&L){case 16777216:case 33554432:f=this._themeService.colors.ansi[255&L].rgba;break;case 50331648:f=(16777215&L)<<8;break;default:f=this._themeService.colors.foreground.rgba}else switch(50331648&S){case 16777216:case 33554432:f=this._themeService.colors.ansi[255&S].rgba;break;case 50331648:f=(16777215&S)<<8;break;default:f=this._themeService.colors.background.rgba}g.attributes.length<b+4&&(g.attributes=(0,u.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),o=T*this._dimensions.device.cell.width,h=w*this._dimensions.device.cell.height,_=(f>>24&255)/255,m=(f>>16&255)/255,y=(f>>8&255)/255,C=1,this._addRectangle(g.attributes,b,o,h,(M-T)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,_,m,y,C)}_addRectangle(g,b,L,S,T,M,w,F,x,R){g[b]=L/this._dimensions.device.canvas.width,g[b+1]=S/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=w,g[b+5]=F,g[b+6]=x,g[b+7]=R}_addRectangleFloat(g,b,L,S,T,M,w){g[b]=L/this._dimensions.device.canvas.width,g[b+1]=S/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=w[0],g[b+5]=w[1],g[b+6]=w[2],g[b+7]=w[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}s.RectangleRenderer=E},310:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderModel=s.COMBINED_CHAR_BIT_MASK=s.RENDER_MODEL_EXT_OFFSET=s.RENDER_MODEL_FG_OFFSET=s.RENDER_MODEL_BG_OFFSET=s.RENDER_MODEL_INDICIES_PER_CELL=void 0;let d=a(296);s.RENDER_MODEL_INDICIES_PER_CELL=4,s.RENDER_MODEL_BG_OFFSET=1,s.RENDER_MODEL_FG_OFFSET=2,s.RENDER_MODEL_EXT_OFFSET=3,s.COMBINED_CHAR_BIT_MASK=2147483648,s.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,d.createSelectionRenderModel)()}resize(i,r){let u=i*r*s.RENDER_MODEL_INDICIES_PER_CELL;u!==this.cells.length&&(this.cells=new Uint32Array(u),this.lineLengths=new Uint32Array(r))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(v,s,a){var d=this&&this.__decorate||function(M,w,F,x){var R,A=arguments.length,I=A<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,F):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(M,w,F,x);else for(var $=M.length-1;$>=0;$--)(R=M[$])&&(I=(A<3?R(I):A>3?R(w,F,I):R(w,F))||I);return A>3&&I&&Object.defineProperty(w,F,I),I};Object.defineProperty(s,"__esModule",{value:!0}),s.JoinedCellData=s.WebglRenderer=void 0;let i=a(820),r=a(274),u=a(627),l=a(457),p=a(56),f=a(374),o=a(345),h=a(859),_=a(147),m=a(782),y=a(855),C=a(776),E=a(965),D=a(742),g=a(310),b=a(733);class L extends h.Disposable{constructor(w,F,x,R,A,I,$,k,H){super(),this._terminal=w,this._characterJoinerService=F,this._charSizeService=x,this._coreBrowserService=R,this._coreService=A,this._decorationService=I,this._optionsService=$,this._themeService=k,this._cursorBlinkStateManager=new h.MutableDisposable,this._charAtlasDisposable=this.register(new h.MutableDisposable),this._model=new g.RenderModel,this._workCell=new m.CellData,this._rectangleRenderer=this.register(new h.MutableDisposable),this._glyphRenderer=this.register(new h.MutableDisposable),this._onChangeTextureAtlas=this.register(new o.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new o.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new o.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new o.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new o.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new r.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new b.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,$,this._themeService)],this.dimensions=(0,f.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register($.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let U={antialias:!1,depth:!1,preserveDrawingBuffer:H};if(this._gl=this._canvas.getContext("webgl2",U),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,i.addDisposableDomListener)(this._canvas,"webglcontextlost",q=>{console.log("webglcontextlost event received"),q.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(q)},3e3)})),this.register((0,i.addDisposableDomListener)(this._canvas,"webglcontextrestored",q=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,u.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,p.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(q,N)=>this._setCanvasDevicePixelDimensions(q,N))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,h.toDisposable)(()=>{var q;for(let N of this._renderLayers)N.dispose();(q=this._canvas.parentElement)===null||q===void 0||q.removeChild(this._canvas),(0,u.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var w;return(w=this._charAtlas)===null||w===void 0?void 0:w.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(w,F){var x,R,A,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let $ of this._renderLayers)$.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(x=this._rectangleRenderer.value)===null||x===void 0||x.setDimensions(this.dimensions),(R=this._rectangleRenderer.value)===null||R===void 0||R.handleResize(),(A=this._glyphRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(I=this._glyphRenderer.value)===null||I===void 0||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var w;for(let F of this._renderLayers)F.handleBlur(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.pause(),this._requestRedrawViewport()}handleFocus(){var w;for(let F of this._renderLayers)F.handleFocus(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.resume(),this._requestRedrawViewport()}handleSelectionChanged(w,F,x){for(let R of this._renderLayers)R.handleSelectionChanged(this._terminal,w,F,x);this._model.selection.update(this._terminal,w,F,x),this._requestRedrawViewport()}handleCursorMove(){var w;for(let F of this._renderLayers)F.handleCursorMove(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new D.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new E.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var w;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let F=(0,u.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==F&&(this._onChangeTextureAtlas.fire(F.pages[0].canvas),this._charAtlasDisposable.value=(0,h.getDisposeArrayDisposable)([(0,o.forwardEvent)(F.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,o.forwardEvent)(F.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=F,this._charAtlas.warmUp(),(w=this._glyphRenderer.value)===null||w===void 0||w.setAtlas(this._charAtlas)}_clearModel(w){var F;this._model.clear(),w&&((F=this._glyphRenderer.value)===null||F===void 0||F.clear())}clearTextureAtlas(){var w;(w=this._charAtlas)===null||w===void 0||w.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var w;this._clearModel(!0);for(let F of this._renderLayers)F.reset(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(w){return-1}deregisterCharacterJoiner(w){return!1}renderRows(w,F){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let x of this._renderLayers)x.handleGridChanged(this._terminal,w,F);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(w,F),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new l.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(w,F){let x=this._core,R,A,I,$,k,H,U,q,N,K,O,B,W,P=this._workCell;w=T(w,x.rows-1,0),F=T(F,x.rows-1,0);let Y=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,J=Math.min(this._terminal.buffer.active.cursorX,x.cols-1),ve=-1,Ee=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let Ce=!1;for(A=w;A<=F;A++)for(I=A+x.buffer.ydisp,$=x.buffer.lines.get(I),this._model.lineLengths[A]=0,k=this._characterJoinerService.getJoinedCharacters(I),B=0;B<x.cols;B++)if(R=this._cellColorResolver.result.bg,$.loadCell(B,P),B===0&&(R=this._cellColorResolver.result.bg),H=!1,U=B,k.length>0&&B===k[0][0]&&(H=!0,q=k.shift(),P=new S(P,$.translateToString(!0,q[0],q[1]),q[1]-q[0]),U=q[1]-1),N=P.getChars(),K=P.getCode(),O=(A*x.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(P,B,I),Ee&&I===Y&&(B===J&&(this._model.cursor={x:J,y:this._terminal.buffer.active.cursorY,width:P.getWidth(),style:this._coreBrowserService.isFocused?x.options.cursorStyle||"block":x.options.cursorInactiveStyle,cursorWidth:x.options.cursorWidth,dpr:this._devicePixelRatio},ve=J+P.getWidth()-1),B>=J&&B<=ve&&(this._coreBrowserService.isFocused&&(x.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&x.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),K!==y.NULL_CELL_CODE&&(this._model.lineLengths[A]=B+1),(this._model.cells[O]!==K||this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(Ce=!0,N.length>1&&(K|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[O]=K,this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(B,A,K,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,N,R),H))for(P=this._workCell,B++;B<U;B++)W=(A*x.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(B,A,y.NULL_CELL_CODE,0,0,0,y.NULL_CELL_CHAR,0),this._model.cells[W]=y.NULL_CELL_CODE,this._model.cells[W+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[W+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[W+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;Ce&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(w,F){this._canvas.width===w&&this._canvas.height===F||(this._canvas.width=w,this._canvas.height=F,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let w=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:w,end:w})}}s.WebglRenderer=L,d([C.traceCall],L.prototype,"renderRows",null);class S extends _.AttributeData{constructor(w,F,x){super(),this.content=0,this.combinedData="",this.fg=w.fg,this.bg=w.bg,this.combinedData=F,this._width=x}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(w){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function T(M,w,F=0){return Math.max(Math.min(M,w),F)}s.JoinedCellData=S},381:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GLTexture=s.expandFloat32Array=s.createShader=s.createProgram=s.PROJECTION_MATRIX=void 0;let d=a(374);function i(r,u,l){let p=(0,d.throwIfFalsy)(r.createShader(u));if(r.shaderSource(p,l),r.compileShader(p),r.getShaderParameter(p,r.COMPILE_STATUS))return p;console.error(r.getShaderInfoLog(p)),r.deleteShader(p)}s.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),s.createProgram=function(r,u,l){let p=(0,d.throwIfFalsy)(r.createProgram());if(r.attachShader(p,(0,d.throwIfFalsy)(i(r,r.VERTEX_SHADER,u))),r.attachShader(p,(0,d.throwIfFalsy)(i(r,r.FRAGMENT_SHADER,l))),r.linkProgram(p),r.getProgramParameter(p,r.LINK_STATUS))return p;console.error(r.getProgramInfoLog(p)),r.deleteProgram(p)},s.createShader=i,s.expandFloat32Array=function(r,u){let l=Math.min(2*r.length,u),p=new Float32Array(l);for(let f=0;f<r.length;f++)p[f]=r[f];return p},s.GLTexture=class{constructor(r){this.texture=r,this.version=-1}}},592:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;let d=a(627),i=a(237),r=a(374),u=a(859);class l extends u.Disposable{constructor(f,o,h,_,m,y,C,E){super(),this._container=o,this._alpha=m,this._coreBrowserService=y,this._optionsService=C,this._themeService=E,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${h}-layer`),this._canvas.style.zIndex=_.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(D=>{this._refreshCharAtlas(f,D),this.reset(f)})),this.register((0,u.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,r.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(f){}handleFocus(f){}handleCursorMove(f){}handleGridChanged(f,o,h){}handleSelectionChanged(f,o,h,_=!1){}_setTransparency(f,o){if(o===this._alpha)return;let h=this._canvas;this._alpha=o,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,h),this._refreshCharAtlas(f,this._themeService.colors),this.handleGridChanged(f,0,f.rows-1)}_refreshCharAtlas(f,o){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,d.acquireTextureAtlas)(f,this._optionsService.rawOptions,o,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(f,o){this._deviceCellWidth=o.device.cell.width,this._deviceCellHeight=o.device.cell.height,this._deviceCharWidth=o.device.char.width,this._deviceCharHeight=o.device.char.height,this._deviceCharLeft=o.device.char.left,this._deviceCharTop=o.device.char.top,this._canvas.width=o.device.canvas.width,this._canvas.height=o.device.canvas.height,this._canvas.style.width=`${o.css.canvas.width}px`,this._canvas.style.height=`${o.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(f,this._themeService.colors)}_fillBottomLineAtCells(f,o,h=1){this._ctx.fillRect(f*this._deviceCellWidth,(o+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,h*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(f,o,h,_){this._alpha?this._ctx.clearRect(f*this._deviceCellWidth,o*this._deviceCellHeight,h*this._deviceCellWidth,_*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(f*this._deviceCellWidth,o*this._deviceCellHeight,h*this._deviceCellWidth,_*this._deviceCellHeight))}_fillCharTrueColor(f,o,h,_){this._ctx.font=this._getFont(f,!1,!1),this._ctx.textBaseline=i.TEXT_BASELINE,this._clipCell(h,_,o.getWidth()),this._ctx.fillText(o.getChars(),h*this._deviceCellWidth+this._deviceCharLeft,_*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(f,o,h){this._ctx.beginPath(),this._ctx.rect(f*this._deviceCellWidth,o*this._deviceCellHeight,h*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(f,o,h){return`${h?"italic":""} ${o?f.options.fontWeightBold:f.options.fontWeight} ${f.options.fontSize*this._coreBrowserService.dpr}px ${f.options.fontFamily}`}}s.BaseRenderLayer=l},733:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;let d=a(197),i=a(237),r=a(592);class u extends r.BaseRenderLayer{constructor(p,f,o,h,_,m,y){super(o,p,"link",f,!0,_,m,y),this.register(h.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(h.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(p,f){super.resize(p,f),this._state=void 0}reset(p){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let p=this._state.y2-this._state.y1-1;p>0&&this._clearCells(0,this._state.y1+1,this._state.cols,p),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(p){if(p.fg===i.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:p.fg!==void 0&&(0,d.is256Color)(p.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[p.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,p.y1===p.y2)this._fillBottomLineAtCells(p.x1,p.y1,p.x2-p.x1);else{this._fillBottomLineAtCells(p.x1,p.y1,p.cols-p.x1);for(let f=p.y1+1;f<p.y2;f++)this._fillBottomLineAtCells(0,f,p.cols);this._fillBottomLineAtCells(0,p.y2,p.x2)}this._state=p}_handleHideLinkUnderline(p){this._clearCurrentLink()}}s.LinkRenderLayer=u},820:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,d,i,r){a.addEventListener(d,i,r);let u=!1;return{dispose:()=>{u||(u=!0,a.removeEventListener(d,i,r))}}}},274:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellColorResolver=void 0;let a,d=0,i=0,r=!1,u=!1,l=!1;s.CellColorResolver=class{constructor(p,f,o,h,_){this._terminal=p,this._selectionRenderModel=f,this._decorationService=o,this._coreBrowserService=h,this._themeService=_,this.result={fg:0,bg:0,ext:0}}resolve(p,f,o){this.result.bg=p.bg,this.result.fg=p.fg,this.result.ext=268435456&p.bg?p.extended.ext:0,i=0,d=0,u=!1,r=!1,l=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(f,o,"bottom",h=>{h.backgroundColorRGB&&(i=h.backgroundColorRGB.rgba>>8&16777215,u=!0),h.foregroundColorRGB&&(d=h.foregroundColorRGB.rgba>>8&16777215,r=!0)}),l=this._selectionRenderModel.isCellSelected(this._terminal,f,o),l&&(i=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,u=!0,a.selectionForeground&&(d=a.selectionForeground.rgba>>8&16777215,r=!0)),this._decorationService.forEachDecorationAtCell(f,o,"top",h=>{h.backgroundColorRGB&&(i=h.backgroundColorRGB.rgba>>8&16777215,u=!0),h.foregroundColorRGB&&(d=h.foregroundColorRGB.rgba>>8&16777215,r=!0)}),u&&(i=l?-16777216&p.bg&-134217729|i|50331648:-16777216&p.bg|i|50331648),r&&(d=-16777216&p.fg&-67108865|d|50331648),67108864&this.result.fg&&(u&&!r&&(d=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,r=!0),!u&&r&&(i=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,u=!0)),a=void 0,this.result.bg=u?i:this.result.bg,this.result.fg=r?d:this.result.fg}}},627:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireTextureAtlas=void 0;let d=a(509),i=a(197),r=[];s.acquireTextureAtlas=function(u,l,p,f,o,h,_,m){let y=(0,i.generateConfig)(f,o,h,_,l,p,m);for(let D=0;D<r.length;D++){let g=r[D],b=g.ownedBy.indexOf(u);if(b>=0){if((0,i.configEquals)(g.config,y))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),r.splice(D,1)):g.ownedBy.splice(b,1);break}}for(let D=0;D<r.length;D++){let g=r[D];if((0,i.configEquals)(g.config,y))return g.ownedBy.push(u),g.atlas}let C=u._core,E={atlas:new d.TextureAtlas(document,y,C.unicodeService),config:y,ownedBy:[u]};return r.push(E),E.atlas},s.removeTerminalFromCache=function(u){for(let l=0;l<r.length;l++){let p=r[l].ownedBy.indexOf(u);if(p!==-1){r[l].ownedBy.length===1?(r[l].atlas.dispose(),r.splice(l,1)):r[l].ownedBy.splice(p,1);break}}}},197:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;let d=a(160);s.generateConfig=function(i,r,u,l,p,f,o){let h={foreground:f.foreground,background:f.background,cursor:d.NULL_COLOR,cursorAccent:d.NULL_COLOR,selectionForeground:d.NULL_COLOR,selectionBackgroundTransparent:d.NULL_COLOR,selectionBackgroundOpaque:d.NULL_COLOR,selectionInactiveBackgroundTransparent:d.NULL_COLOR,selectionInactiveBackgroundOpaque:d.NULL_COLOR,ansi:f.ansi.slice(),contrastCache:f.contrastCache,halfContrastCache:f.halfContrastCache};return{customGlyphs:p.customGlyphs,devicePixelRatio:o,letterSpacing:p.letterSpacing,lineHeight:p.lineHeight,deviceCellWidth:i,deviceCellHeight:r,deviceCharWidth:u,deviceCharHeight:l,fontFamily:p.fontFamily,fontSize:p.fontSize,fontWeight:p.fontWeight,fontWeightBold:p.fontWeightBold,allowTransparency:p.allowTransparency,drawBoldTextInBrightColors:p.drawBoldTextInBrightColors,minimumContrastRatio:p.minimumContrastRatio,colors:h}},s.configEquals=function(i,r){for(let u=0;u<i.colors.ansi.length;u++)if(i.colors.ansi[u].rgba!==r.colors.ansi[u].rgba)return!1;return i.devicePixelRatio===r.devicePixelRatio&&i.customGlyphs===r.customGlyphs&&i.lineHeight===r.lineHeight&&i.letterSpacing===r.letterSpacing&&i.fontFamily===r.fontFamily&&i.fontSize===r.fontSize&&i.fontWeight===r.fontWeight&&i.fontWeightBold===r.fontWeightBold&&i.allowTransparency===r.allowTransparency&&i.deviceCharWidth===r.deviceCharWidth&&i.deviceCharHeight===r.deviceCharHeight&&i.drawBoldTextInBrightColors===r.drawBoldTextInBrightColors&&i.minimumContrastRatio===r.minimumContrastRatio&&i.colors.foreground.rgba===r.colors.foreground.rgba&&i.colors.background.rgba===r.colors.background.rgba},s.is256Color=function(i){return(50331648&i)==16777216||(50331648&i)==33554432}},237:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let d=a(399);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},457:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CursorBlinkStateManager=void 0,s.CursorBlinkStateManager=class{constructor(a,d){this._renderCallback=a,this._coreBrowserService=d,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(a=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let d=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,d>0)return void this._restartInterval(d)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let d=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(d)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},a)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.powerlineDefinitions=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;let d=a(374);s.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let i={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(f,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u2551":{1:(f,o)=>`M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"\u2552":{1:(f,o)=>`M.5,1 L.5,${.5-o} L1,${.5-o} M.5,${.5+o} L1,${.5+o}`},"\u2553":{1:(f,o)=>`M${.5-f},1 L${.5-f},.5 L1,.5 M${.5+f},.5 L${.5+f},1`},"\u2554":{1:(f,o)=>`M1,${.5-o} L${.5-f},${.5-o} L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1`},"\u2555":{1:(f,o)=>`M0,${.5-o} L.5,${.5-o} L.5,1 M0,${.5+o} L.5,${.5+o}`},"\u2556":{1:(f,o)=>`M${.5+f},1 L${.5+f},.5 L0,.5 M${.5-f},.5 L${.5-f},1`},"\u2557":{1:(f,o)=>`M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M0,${.5-o} L${.5+f},${.5-o} L${.5+f},1`},"\u2558":{1:(f,o)=>`M.5,0 L.5,${.5+o} L1,${.5+o} M.5,${.5-o} L1,${.5-o}`},"\u2559":{1:(f,o)=>`M1,.5 L${.5-f},.5 L${.5-f},0 M${.5+f},.5 L${.5+f},0`},"\u255A":{1:(f,o)=>`M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0 M1,${.5+o} L${.5-f},${.5+o} L${.5-f},0`},"\u255B":{1:(f,o)=>`M0,${.5+o} L.5,${.5+o} L.5,0 M0,${.5-o} L.5,${.5-o}`},"\u255C":{1:(f,o)=>`M0,.5 L${.5+f},.5 L${.5+f},0 M${.5-f},.5 L${.5-f},0`},"\u255D":{1:(f,o)=>`M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0 M0,${.5+o} L${.5+f},${.5+o} L${.5+f},0`},"\u255E":{1:(f,o)=>`M.5,0 L.5,1 M.5,${.5-o} L1,${.5-o} M.5,${.5+o} L1,${.5+o}`},"\u255F":{1:(f,o)=>`M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1 M${.5+f},.5 L1,.5`},"\u2560":{1:(f,o)=>`M${.5-f},0 L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1 M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0`},"\u2561":{1:(f,o)=>`M.5,0 L.5,1 M0,${.5-o} L.5,${.5-o} M0,${.5+o} L.5,${.5+o}`},"\u2562":{1:(f,o)=>`M0,.5 L${.5-f},.5 M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"\u2563":{1:(f,o)=>`M${.5+f},0 L${.5+f},1 M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0`},"\u2564":{1:(f,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o} M.5,${.5+o} L.5,1`},"\u2565":{1:(f,o)=>`M0,.5 L1,.5 M${.5-f},.5 L${.5-f},1 M${.5+f},.5 L${.5+f},1`},"\u2566":{1:(f,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1`},"\u2567":{1:(f,o)=>`M.5,0 L.5,${.5-o} M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u2568":{1:(f,o)=>`M0,.5 L1,.5 M${.5-f},.5 L${.5-f},0 M${.5+f},.5 L${.5+f},0`},"\u2569":{1:(f,o)=>`M0,${.5+o} L1,${.5+o} M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0 M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0`},"\u256A":{1:(f,o)=>`M.5,0 L.5,1 M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u256B":{1:(f,o)=>`M0,.5 L1,.5 M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"\u256C":{1:(f,o)=>`M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1 M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0 M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(f,o)=>`M.5,1 L.5,${.5+o/.15*.5} C.5,${.5+o/.15*.5},.5,.5,1,.5`},"\u256E":{1:(f,o)=>`M.5,1 L.5,${.5+o/.15*.5} C.5,${.5+o/.15*.5},.5,.5,0,.5`},"\u256F":{1:(f,o)=>`M.5,0 L.5,${.5-o/.15*.5} C.5,${.5-o/.15*.5},.5,.5,0,.5`},"\u2570":{1:(f,o)=>`M.5,0 L.5,${.5-o/.15*.5} C.5,${.5-o/.15*.5},.5,.5,1,.5`}},s.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},s.powerlineDefinitions["\uE0BB"]=s.powerlineDefinitions["\uE0BD"],s.powerlineDefinitions["\uE0BF"]=s.powerlineDefinitions["\uE0B9"],s.tryDrawCustomChar=function(f,o,h,_,m,y,C,E){let D=s.blockElementDefinitions[o];if(D)return function(S,T,M,w,F,x){for(let R=0;R<T.length;R++){let A=T[R],I=F/8,$=x/8;S.fillRect(M+A.x*I,w+A.y*$,A.w*I,A.h*$)}}(f,D,h,_,m,y),!0;let g=i[o];if(g)return function(S,T,M,w,F,x){let R=r.get(T);R||(R=new Map,r.set(T,R));let A=S.fillStyle;if(typeof A!="string")throw new Error(`Unexpected fillStyle type "${A}"`);let I=R.get(A);if(!I){let $=T[0].length,k=T.length,H=document.createElement("canvas");H.width=$,H.height=k;let U=(0,d.throwIfFalsy)(H.getContext("2d")),q=new ImageData($,k),N,K,O,B;if(A.startsWith("#"))N=parseInt(A.slice(1,3),16),K=parseInt(A.slice(3,5),16),O=parseInt(A.slice(5,7),16),B=A.length>7&&parseInt(A.slice(7,9),16)||1;else{if(!A.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${A}" when drawing pattern glyph`);[N,K,O,B]=A.substring(5,A.length-1).split(",").map(W=>parseFloat(W))}for(let W=0;W<k;W++)for(let P=0;P<$;P++)q.data[4*(W*$+P)]=N,q.data[4*(W*$+P)+1]=K,q.data[4*(W*$+P)+2]=O,q.data[4*(W*$+P)+3]=T[W][P]*(255*B);U.putImageData(q,0,0),I=(0,d.throwIfFalsy)(S.createPattern(H,null)),R.set(A,I)}S.fillStyle=I,S.fillRect(M,w,F,x)}(f,g,h,_,m,y),!0;let b=s.boxDrawingDefinitions[o];if(b)return function(S,T,M,w,F,x,R){S.strokeStyle=S.fillStyle;for(let[A,I]of Object.entries(T)){let $;S.beginPath(),S.lineWidth=R*Number.parseInt(A),$=typeof I=="function"?I(.15,.15/x*F):I;for(let k of $.split(" ")){let H=k[0],U=l[H];if(!U){console.error(`Could not find drawing instructions for "${H}"`);continue}let q=k.substring(1).split(",");q[0]&&q[1]&&U(S,p(q,F,x,M,w,!0,R))}S.stroke(),S.closePath()}}(f,b,h,_,m,y,E),!0;let L=s.powerlineDefinitions[o];return!!L&&(function(S,T,M,w,F,x,R,A){var I,$;let k=new Path2D;k.rect(M,w,F,x),S.clip(k),S.beginPath();let H=R/12;S.lineWidth=A*H;for(let U of T.d.split(" ")){let q=U[0],N=l[q];if(!N){console.error(`Could not find drawing instructions for "${q}"`);continue}let K=U.substring(1).split(",");K[0]&&K[1]&&N(S,p(K,F,x,M,w,!1,A,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(H/2),(($=T.rightPadding)!==null&&$!==void 0?$:0)*(H/2)))}T.type===1?(S.strokeStyle=S.fillStyle,S.stroke()):S.fill(),S.closePath()}(f,L,h,_,m,y,C,E),!0)};let r=new Map;function u(f,o,h=0){return Math.max(Math.min(f,o),h)}let l={C:(f,o)=>f.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]),L:(f,o)=>f.lineTo(o[0],o[1]),M:(f,o)=>f.moveTo(o[0],o[1])};function p(f,o,h,_,m,y,C,E=0,D=0){let g=f.map(b=>parseFloat(b)||parseInt(b));if(g.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<g.length;b+=2)g[b]*=o-E*C-D*C,y&&g[b]!==0&&(g[b]=u(Math.round(g[b]+.5)-.5,o,0)),g[b]+=_+E*C;for(let b=1;b<g.length;b+=2)g[b]*=h,y&&g[b]!==0&&(g[b]=u(Math.round(g[b]+.5)-.5,h,0)),g[b]+=m;return g}},56:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.observeDevicePixelDimensions=void 0;let d=a(859);s.observeDevicePixelDimensions=function(i,r,u){let l=new r.ResizeObserver(p=>{let f=p.find(_=>_.target===i);if(!f)return;if(!("devicePixelContentBoxSize"in f))return l?.disconnect(),void(l=void 0);let o=f.devicePixelContentBoxSize[0].inlineSize,h=f.devicePixelContentBoxSize[0].blockSize;o>0&&h>0&&u(o,h)});try{l.observe(i,{box:["device-pixel-content-box"]})}catch{l.disconnect(),l=void 0}return(0,d.toDisposable)(()=>l?.disconnect())}},374:(v,s)=>{function a(d){return 57508<=d&&d<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},s.excludeFromContrastRatioDemands=function(d){return a(d)||function(i){return 9472<=i&&i<=9631}(d)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(i,r,u,l=!1){if(this.selectionStart=r,this.selectionEnd=u,!r||!u||r[0]===u[0]&&r[1]===u[1])return void this.clear();let p=r[1]-i.buffer.active.viewportY,f=u[1]-i.buffer.active.viewportY,o=Math.max(p,0),h=Math.min(f,i.rows-1);o>=i.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=l,this.viewportStartRow=p,this.viewportEndRow=f,this.viewportCappedStartRow=o,this.viewportCappedEndRow=h,this.startCol=r[0],this.endCol=u[0])}isCellSelected(i,r,u){return!!this.hasSelection&&(u-=i.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?r>=this.startCol&&u>=this.viewportCappedStartRow&&r<this.endCol&&u<=this.viewportCappedEndRow:r<this.startCol&&u>=this.viewportCappedStartRow&&r>=this.endCol&&u<=this.viewportCappedEndRow:u>this.viewportStartRow&&u<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&u===this.viewportStartRow&&r>=this.startCol&&r<this.endCol||this.viewportStartRow<this.viewportEndRow&&u===this.viewportEndRow&&r<this.endCol||this.viewportStartRow<this.viewportEndRow&&u===this.viewportStartRow&&r>=this.startCol)}}s.createSelectionRenderModel=function(){return new a}},509:function(v,s,a){var d=this&&this.__decorate||function(L,S,T,M){var w,F=arguments.length,x=F<3?S:M===null?M=Object.getOwnPropertyDescriptor(S,T):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(L,S,T,M);else for(var R=L.length-1;R>=0;R--)(w=L[R])&&(x=(F<3?w(x):F>3?w(S,T,x):w(S,T))||x);return F>3&&x&&Object.defineProperty(S,T,x),x};Object.defineProperty(s,"__esModule",{value:!0}),s.TextureAtlas=void 0;let i=a(237),r=a(860),u=a(374),l=a(160),p=a(345),f=a(485),o=a(385),h=a(147),_=a(855),m=a(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class E{get pages(){return this._pages}constructor(S,T,M){this._document=S,this._config=T,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new f.FourKeyMap,this._cacheMapCombined=new f.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new h.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new p.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new p.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=b(S,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,u.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let S of this.pages)S.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let S=new o.IdleTaskQueue;for(let T=33;T<126;T++)S.enqueue(()=>{if(!this._cacheMap.get(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT)){let M=this._drawToCache(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT);this._cacheMap.set(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let S of this._pages)S.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(E.maxAtlasPages&&this._pages.length>=Math.max(4,E.maxAtlasPages)){let T=this._pages.filter(I=>2*I.canvas.width<=(E.maxTextureSize||4096)).sort((I,$)=>$.canvas.width!==I.canvas.width?$.canvas.width-I.canvas.width:$.percentageUsed-I.percentageUsed),M=-1,w=0;for(let I=0;I<T.length;I++)if(T[I].canvas.width!==w)M=I,w=T[I].canvas.width;else if(I-M==3)break;let F=T.slice(M,M+4),x=F.map(I=>I.glyphs[0].texturePage).sort((I,$)=>I>$?1:-1),R=this.pages.length-F.length,A=this._mergePages(F,R);A.version++;for(let I=x.length-1;I>=0;I--)this._deletePage(x[I]);this.pages.push(A),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(A.canvas)}let S=new D(this._document,this._textureSize);return this._pages.push(S),this._activePages.push(S),this._onAddTextureAtlasCanvas.fire(S.canvas),S}_mergePages(S,T){let M=2*S[0].canvas.width,w=new D(this._document,M,S);for(let[F,x]of S.entries()){let R=F*x.canvas.width%M,A=Math.floor(F/2)*x.canvas.height;w.ctx.drawImage(x.canvas,R,A);for(let $ of x.glyphs)$.texturePage=T,$.sizeClipSpace.x=$.size.x/M,$.sizeClipSpace.y=$.size.y/M,$.texturePosition.x+=R,$.texturePosition.y+=A,$.texturePositionClipSpace.x=$.texturePosition.x/M,$.texturePositionClipSpace.y=$.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(x.canvas);let I=this._activePages.indexOf(x);I!==-1&&this._activePages.splice(I,1)}return w}_deletePage(S){this._pages.splice(S,1);for(let T=S;T<this._pages.length;T++){let M=this._pages[T];for(let w of M.glyphs)w.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(S,T,M,w,F){return this._getFromCacheMap(this._cacheMapCombined,S,T,M,w,F)}getRasterizedGlyph(S,T,M,w,F){return this._getFromCacheMap(this._cacheMap,S,T,M,w,F)}_getFromCacheMap(S,T,M,w,F,x=!1){return C=S.get(T,M,w,F),C||(C=this._drawToCache(T,M,w,F,x),S.set(T,M,w,F,C)),C}_getColorFromAnsiIndex(S){if(S>=this._config.colors.ansi.length)throw new Error("No color found for idx "+S);return this._config.colors.ansi[S]}_getBackgroundColor(S,T,M,w){if(this._config.allowTransparency)return l.NULL_COLOR;let F;switch(S){case 16777216:case 33554432:F=this._getColorFromAnsiIndex(T);break;case 50331648:let x=h.AttributeData.toColorRGB(T);F=l.rgba.toColor(x[0],x[1],x[2]);break;default:F=M?l.color.opaque(this._config.colors.foreground):this._config.colors.background}return F}_getForegroundColor(S,T,M,w,F,x,R,A,I,$){let k=this._getMinimumContrastColor(S,T,M,w,F,x,!1,I,A,$);if(k)return k;let H;switch(F){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&x<8&&(x+=8),H=this._getColorFromAnsiIndex(x);break;case 50331648:let U=h.AttributeData.toColorRGB(x);H=l.rgba.toColor(U[0],U[1],U[2]);break;default:H=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(H=l.color.opaque(H)),A&&(H=l.color.multiplyOpacity(H,i.DIM_OPACITY)),H}_resolveBackgroundRgba(S,T,M){switch(S){case 16777216:case 33554432:return this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(S,T,M,w){switch(S){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&w&&T<8&&(T+=8),this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(S,T,M,w,F,x,R,A,I,$){if(this._config.minimumContrastRatio===1||$)return;let k=this._getContrastCache(I),H=k.getColor(S,w);if(H!==void 0)return H||void 0;let U=this._resolveBackgroundRgba(T,M,R),q=this._resolveForegroundRgba(F,x,R,A),N=l.rgba.ensureContrastRatio(U,q,this._config.minimumContrastRatio/(I?2:1));if(!N)return void k.setColor(S,w,null);let K=l.rgba.toColor(N>>24&255,N>>16&255,N>>8&255);return k.setColor(S,w,K),K}_getContrastCache(S){return S?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(S,T,M,w,F=!1){let x=typeof S=="number"?String.fromCharCode(S):S,R=Math.min(this._config.deviceCellWidth*Math.max(x.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);let A=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<A&&(this._tmpCanvas.height=A),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=T,this._workAttributeData.extended.ext=w,this._workAttributeData.isInvisible())return y;let I=!!this._workAttributeData.isBold(),$=!!this._workAttributeData.isInverse(),k=!!this._workAttributeData.isDim(),H=!!this._workAttributeData.isItalic(),U=!!this._workAttributeData.isUnderline(),q=!!this._workAttributeData.isStrikethrough(),N=!!this._workAttributeData.isOverline(),K=this._workAttributeData.getFgColor(),O=this._workAttributeData.getFgColorMode(),B=this._workAttributeData.getBgColor(),W=this._workAttributeData.getBgColorMode();if($){let oe=K;K=B,B=oe;let j=O;O=W,W=j}let P=this._getBackgroundColor(W,B,$,k);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let Y=I?this._config.fontWeightBold:this._config.fontWeight,J=H?"italic":"";this._tmpCtx.font=`${J} ${Y} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=i.TEXT_BASELINE;let ve=x.length===1&&(0,u.isPowerlineGlyph)(x.charCodeAt(0)),Ee=x.length===1&&(0,u.isRestrictedPowerlineGlyph)(x.charCodeAt(0)),Ce=this._getForegroundColor(T,W,B,M,O,K,$,k,I,(0,u.excludeFromContrastRatioDemands)(x.charCodeAt(0)));this._tmpCtx.fillStyle=Ce.css;let se=Ee?0:4,Se=!1;this._config.customGlyphs!==!1&&(Se=(0,r.tryDrawCustomChar)(this._tmpCtx,x,se,se,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Ct,Jt=!ve;if(Ct=typeof S=="number"?this._unicodeService.wcwidth(S):this._unicodeService.getStringCellWidth(S),U){this._tmpCtx.save();let oe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=oe%2==1?.5:0;if(this._tmpCtx.lineWidth=oe,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Jt=!1,this._tmpCtx.strokeStyle=`rgb(${h.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Jt=!1;let st=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&st<8&&(st+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(st).css}this._tmpCtx.beginPath();let ie=se,de=Math.ceil(se+this._config.deviceCharHeight)-j-(F?2*oe:0),Be=de+oe,nt=de+2*oe;for(let st=0;st<Ct;st++){this._tmpCtx.save();let ze=ie+st*this._config.deviceCellWidth,bt=ie+(st+1)*this._config.deviceCellWidth,zt=ze+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(ze,de),this._tmpCtx.lineTo(bt,de),this._tmpCtx.moveTo(ze,nt),this._tmpCtx.lineTo(bt,nt);break;case 3:let Et=oe<=1?nt:Math.ceil(se+this._config.deviceCharHeight-oe/2)-j,An=oe<=1?de:Math.ceil(se+this._config.deviceCharHeight+oe/2)-j,mi=new Path2D;mi.rect(ze,de,this._config.deviceCellWidth,nt-de),this._tmpCtx.clip(mi),this._tmpCtx.moveTo(ze-this._config.deviceCellWidth/2,Be),this._tmpCtx.bezierCurveTo(ze-this._config.deviceCellWidth/2,An,ze,An,ze,Be),this._tmpCtx.bezierCurveTo(ze,Et,zt,Et,zt,Be),this._tmpCtx.bezierCurveTo(zt,An,bt,An,bt,Be),this._tmpCtx.bezierCurveTo(bt,Et,bt+this._config.deviceCellWidth/2,Et,bt+this._config.deviceCellWidth/2,Be);break;case 4:this._tmpCtx.setLineDash([Math.round(oe),Math.round(oe)]),this._tmpCtx.moveTo(ze,de),this._tmpCtx.lineTo(bt,de);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(ze,de),this._tmpCtx.lineTo(bt,de);break;default:this._tmpCtx.moveTo(ze,de),this._tmpCtx.lineTo(bt,de)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Se&&this._config.fontSize>=12&&!this._config.allowTransparency&&x!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let st=this._tmpCtx.measureText(x);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in st&&st.actualBoundingBoxDescent>0){this._tmpCtx.save();let ze=new Path2D;ze.rect(ie,de-Math.ceil(oe/2),this._config.deviceCellWidth*Ct,nt-de+Math.ceil(oe/2)),this._tmpCtx.clip(ze),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=P.css,this._tmpCtx.strokeText(x,se,se+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(N){let oe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=oe%2==1?.5:0;this._tmpCtx.lineWidth=oe,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(se,se+j),this._tmpCtx.lineTo(se+this._config.deviceCharWidth*Ct,se+j),this._tmpCtx.stroke()}if(Se||this._tmpCtx.fillText(x,se,se+this._config.deviceCharHeight),x==="_"&&!this._config.allowTransparency){let oe=g(this._tmpCtx.getImageData(se,se,this._config.deviceCellWidth,this._config.deviceCellHeight),P,Ce,Jt);if(oe)for(let j=1;j<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(x,se,se+this._config.deviceCharHeight-j),oe=g(this._tmpCtx.getImageData(se,se,this._config.deviceCellWidth,this._config.deviceCellHeight),P,Ce,Jt),oe);j++);}if(q){let oe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),j=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=oe,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(se,se+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.lineTo(se+this._config.deviceCharWidth*Ct,se+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.stroke()}this._tmpCtx.restore();let Bt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),Ze;if(Ze=this._config.allowTransparency?function(oe){for(let j=0;j<oe.data.length;j+=4)if(oe.data[j+3]>0)return!1;return!0}(Bt):g(Bt,P,Ce,Jt),Ze)return y;let ce=this._findGlyphBoundingBox(Bt,this._workBoundingBox,R,Ee,Se,se),he,le;for(;;){if(this._activePages.length===0){let oe=this._createNewPage();he=oe,le=oe.currentRow,le.height=ce.size.y;break}he=this._activePages[this._activePages.length-1],le=he.currentRow;for(let oe of this._activePages)ce.size.y<=oe.currentRow.height&&(he=oe,le=oe.currentRow);for(let oe=this._activePages.length-1;oe>=0;oe--)for(let j of this._activePages[oe].fixedRows)j.height<=le.height&&ce.size.y<=j.height&&(he=this._activePages[oe],le=j);if(le.y+ce.size.y>=he.canvas.height||le.height>ce.size.y+2){let oe=!1;if(he.currentRow.y+he.currentRow.height+ce.size.y>=he.canvas.height){let j;for(let ie of this._activePages)if(ie.currentRow.y+ie.currentRow.height+ce.size.y<ie.canvas.height){j=ie;break}if(j)he=j;else if(E.maxAtlasPages&&this._pages.length>=E.maxAtlasPages&&le.y+ce.size.y<=he.canvas.height&&le.height>=ce.size.y&&le.x+ce.size.x<=he.canvas.width)oe=!0;else{let ie=this._createNewPage();he=ie,le=ie.currentRow,le.height=ce.size.y,oe=!0}}oe||(he.currentRow.height>0&&he.fixedRows.push(he.currentRow),le={x:0,y:he.currentRow.y+he.currentRow.height,height:ce.size.y},he.fixedRows.push(le),he.currentRow={x:0,y:le.y+le.height,height:0})}if(le.x+ce.size.x<=he.canvas.width)break;le===he.currentRow?(le.x=0,le.y+=le.height,le.height=0):he.fixedRows.splice(he.fixedRows.indexOf(le),1)}return ce.texturePage=this._pages.indexOf(he),ce.texturePosition.x=le.x,ce.texturePosition.y=le.y,ce.texturePositionClipSpace.x=le.x/he.canvas.width,ce.texturePositionClipSpace.y=le.y/he.canvas.height,ce.sizeClipSpace.x/=he.canvas.width,ce.sizeClipSpace.y/=he.canvas.height,le.height=Math.max(le.height,ce.size.y),le.x+=ce.size.x,he.ctx.putImageData(Bt,ce.texturePosition.x-this._workBoundingBox.left,ce.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ce.size.x,ce.size.y),he.addGlyph(ce),he.version++,ce}_findGlyphBoundingBox(S,T,M,w,F,x){T.top=0;let R=w?this._config.deviceCellHeight:this._tmpCanvas.height,A=w?this._config.deviceCellWidth:M,I=!1;for(let $=0;$<R;$++){for(let k=0;k<A;k++){let H=$*this._tmpCanvas.width*4+4*k+3;if(S.data[H]!==0){T.top=$,I=!0;break}}if(I)break}T.left=0,I=!1;for(let $=0;$<x+A;$++){for(let k=0;k<R;k++){let H=k*this._tmpCanvas.width*4+4*$+3;if(S.data[H]!==0){T.left=$,I=!0;break}}if(I)break}T.right=A,I=!1;for(let $=x+A-1;$>=x;$--){for(let k=0;k<R;k++){let H=k*this._tmpCanvas.width*4+4*$+3;if(S.data[H]!==0){T.right=$,I=!0;break}}if(I)break}T.bottom=R,I=!1;for(let $=R-1;$>=0;$--){for(let k=0;k<A;k++){let H=$*this._tmpCanvas.width*4+4*k+3;if(S.data[H]!==0){T.bottom=$,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:T.right-T.left+1,y:T.bottom-T.top+1},sizeClipSpace:{x:T.right-T.left+1,y:T.bottom-T.top+1},offset:{x:-T.left+x+(w||F?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-T.top+x+(w||F?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}s.TextureAtlas=E,d([m.traceCall],E.prototype,"_drawToCache",null);class D{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(S){this._glyphs.push(S),this._usedPixels+=S.size.x*S.size.y}constructor(S,T,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let w of M)this._glyphs.push(...w.glyphs),this._usedPixels+=w._usedPixels;this.canvas=b(S,T,T),this.ctx=(0,u.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(L,S,T,M){let w=S.rgba>>>24,F=S.rgba>>>16&255,x=S.rgba>>>8&255,R=T.rgba>>>24,A=T.rgba>>>16&255,I=T.rgba>>>8&255,$=Math.floor((Math.abs(w-R)+Math.abs(F-A)+Math.abs(x-I))/12),k=!0;for(let H=0;H<L.data.length;H+=4)L.data[H]===w&&L.data[H+1]===F&&L.data[H+2]===x||M&&Math.abs(L.data[H]-w)+Math.abs(L.data[H+1]-F)+Math.abs(L.data[H+2]-x)<$?L.data[H+3]=0:k=!1;return k}function b(L,S,T){let M=L.createElement("canvas");return M.width=S,M.height=T,M}},160:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let d=a(399),i=0,r=0,u=0,l=0;var p,f,o,h,_;function m(C){let E=C.toString(16);return E.length<2?"0"+E:E}function y(C,E){return C<E?(E+.05)/(C+.05):(C+.05)/(E+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(E,D,g,b){return b!==void 0?`#${m(E)}${m(D)}${m(g)}${m(b)}`:`#${m(E)}${m(D)}${m(g)}`},C.toRgba=function(E,D,g,b=255){return(E<<24|D<<16|g<<8|b)>>>0}}(p||(s.channels=p={})),function(C){function E(D,g){return l=Math.round(255*g),[i,r,u]=_.toChannels(D.rgba),{css:p.toCss(i,r,u,l),rgba:p.toRgba(i,r,u,l)}}C.blend=function(D,g){if(l=(255&g.rgba)/255,l===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,L=g.rgba>>16&255,S=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return i=T+Math.round((b-T)*l),r=M+Math.round((L-M)*l),u=w+Math.round((S-w)*l),{css:p.toCss(i,r,u),rgba:p.toRgba(i,r,u)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let L=_.ensureContrastRatio(D.rgba,g.rgba,b);if(L)return _.toColor(L>>24&255,L>>16&255,L>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[i,r,u]=_.toChannels(g),{css:p.toCss(i,r,u),rgba:g}},C.opacity=E,C.multiplyOpacity=function(D,g){return l=255&D.rgba,E(D,l*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(f||(s.color=f={})),function(C){let E,D;if(!d.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(E=b,E.globalCompositeOperation="copy",D=E.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),_.toColor(i,r,u);case 5:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),l=parseInt(g.slice(4,5).repeat(2),16),_.toColor(i,r,u,l);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return i=parseInt(b[1]),r=parseInt(b[2]),u=parseInt(b[3]),l=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),_.toColor(i,r,u,l);if(!E||!D)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=D,E.fillStyle=g,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[i,r,u,l]=E.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(i,r,u,l),css:g}}}(o||(s.css=o={})),function(C){function E(D,g,b){let L=D/255,S=g/255,T=b/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return E(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=E}(h||(s.rgb=h={})),function(C){function E(g,b,L){let S=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));for(;R<L&&(w>0||F>0||x>0);)w-=Math.max(0,Math.ceil(.1*w)),F-=Math.max(0,Math.ceil(.1*F)),x-=Math.max(0,Math.ceil(.1*x)),R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));return(w<<24|F<<16|x<<8|255)>>>0}function D(g,b,L){let S=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));for(;R<L&&(w<255||F<255||x<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),F=Math.min(255,F+Math.ceil(.1*(255-F))),x=Math.min(255,x+Math.ceil(.1*(255-x))),R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));return(w<<24|F<<16|x<<8|255)>>>0}C.ensureContrastRatio=function(g,b,L){let S=h.relativeLuminance(g>>8),T=h.relativeLuminance(b>>8);if(y(S,T)<L){if(T<S){let F=E(g,b,L),x=y(S,h.relativeLuminance(F>>8));if(x<L){let R=D(g,b,L);return x>y(S,h.relativeLuminance(R>>8))?F:R}return F}let M=D(g,b,L),w=y(S,h.relativeLuminance(M>>8));if(w<L){let F=E(g,b,L);return w>y(S,h.relativeLuminance(F>>8))?M:F}return M}},C.reduceLuminance=E,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,L,S){return{css:p.toCss(g,b,L,S),rgba:p.toRgba(g,b,L,S)}}}(_||(s.rgba=_={})),s.toPaddedHex=m,s.contrastRatio=y},345:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===a)return void this._listeners.splice(d,1)}}})),this._event}fire(a,d){let i=[];for(let r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(let r=0;r<i.length;r++)i[r].call(void 0,a,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,d){return a(i=>d.fire(i))}},859:(v,s)=>{function a(d){for(let i of d)i.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){let i=this._disposables.indexOf(d);i!==-1&&this._disposables.splice(i,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var i;this._isDisposed||d===this._value||((i=this._value)===null||i===void 0||i.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=a,s.getDisposeArrayDisposable=function(d){return{dispose:()=>a(d)}}},485:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(i,r,u){this._data[i]||(this._data[i]={}),this._data[i][r]=u}get(i,r){return this._data[i]?this._data[i][r]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(d,i,r,u,l){this._data.get(d,i)||this._data.set(d,i,new a),this._data.get(d,i).set(r,u,l)}get(d,i,r,u){var l;return(l=this._data.get(d,i))===null||l===void 0?void 0:l.get(r,u)}clear(){this._data.clear()}}},399:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";let a=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;let i=a.match(/Version\/(\d+)/);return i===null||i.length<2?0:parseInt(i[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},385:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let d=a(399);class i{constructor(){this._tasks=[],this._i=0}enqueue(l){this._tasks.push(l),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(l){this._idleCallback=void 0;let p=0,f=0,o=l.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),f=Math.max(p,f),h=l.timeRemaining(),1.5*f>h)return o-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-p))}ms`),void this._start();o=h}this.clear()}}class r extends i{_requestCallback(l){return setTimeout(()=>l(this._createDeadline(16)))}_cancelCallback(l){clearTimeout(l)}_createDeadline(l){let p=Date.now()+l;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}s.PriorityTaskQueue=r,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends i{_requestCallback(u){return requestIdleCallback(u)}_cancelCallback(u){cancelIdleCallback(u)}}:r,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(u){this._queue.clear(),this._queue.enqueue(u)}flush(){this._queue.flush()}}},147:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(r){return[r>>>16&255,r>>>8&255,255&r]}static fromColorRGB(r){return(255&r[0])<<16|(255&r[1])<<8|255&r[2]}clone(){let r=new a;return r.fg=this.fg,r.bg=this.bg,r.extended=this.extended.clone(),r}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(r){this._ext=r}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(r){this._ext&=-469762049,this._ext|=r<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(r){this._ext&=-67108864,this._ext|=67108863&r}get urlId(){return this._urlId}set urlId(r){this._urlId=r}constructor(r=0,u=0){this._ext=0,this._urlId=0,this._ext=r,this._urlId=u}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},782:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let d=a(133),i=a(855),r=a(147);class u extends r.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new r.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let f=new u;return f.setFromCharData(p),f}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[i.CHAR_DATA_ATTR_INDEX],this.bg=0;let f=!1;if(p[i.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(p[i.CHAR_DATA_CHAR_INDEX].length===2){let o=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){let h=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(o-55296)+h-56320+65536|p[i.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[i.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=p[i.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[i.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=u},855:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},133:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,d=0,i=a.length){let r="";for(let u=d;u<i;++u){let l=a[u];l>65535?(l-=65536,r+=String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):r+=String.fromCharCode(l)}return r},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,d){let i=a.length;if(!i)return 0;let r=0,u=0;if(this._interim){let l=a.charCodeAt(u++);56320<=l&&l<=57343?d[r++]=1024*(this._interim-55296)+l-56320+65536:(d[r++]=this._interim,d[r++]=l),this._interim=0}for(let l=u;l<i;++l){let p=a.charCodeAt(l);if(55296<=p&&p<=56319){if(++l>=i)return this._interim=p,r;let f=a.charCodeAt(l);56320<=f&&f<=57343?d[r++]=1024*(p-55296)+f-56320+65536:(d[r++]=p,d[r++]=f)}else p!==65279&&(d[r++]=p)}return r}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,d){let i=a.length;if(!i)return 0;let r,u,l,p,f=0,o=0,h=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let E,D=0;for(;(E=63&this.interim[++D])&&D<4;)C<<=6,C|=E;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;h<b;){if(h>=i)return 0;if(E=a[h++],(192&E)!=128){h--,y=!0;break}this.interim[D++]=E,C<<=6,C|=63&E}y||(g===2?C<128?h--:d[f++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(d[f++]=C):C<65536||C>1114111||(d[f++]=C)),this.interim.fill(0)}let _=i-4,m=h;for(;m<i;){for(;!(!(m<_)||128&(r=a[m])||128&(u=a[m+1])||128&(l=a[m+2])||128&(p=a[m+3]));)d[f++]=r,d[f++]=u,d[f++]=l,d[f++]=p,m+=4;if(r=a[m++],r<128)d[f++]=r;else if((224&r)==192){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(o=(31&r)<<6|63&u,o<128){m--;continue}d[f++]=o}else if((240&r)==224){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,f;if(l=a[m++],(192&l)!=128){m--;continue}if(o=(15&r)<<12|(63&u)<<6|63&l,o<2048||o>=55296&&o<=57343||o===65279)continue;d[f++]=o}else if((248&r)==240){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,f;if(l=a[m++],(192&l)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,this.interim[2]=l,f;if(p=a[m++],(192&p)!=128){m--;continue}if(o=(7&r)<<18|(63&u)<<12|(63&l)<<6|63&p,o<65536||o>1114111)continue;d[f++]=o}}return f}}},776:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let r=a(859),u=a(97),l={trace:u.LogLevelEnum.TRACE,debug:u.LogLevelEnum.DEBUG,info:u.LogLevelEnum.INFO,warn:u.LogLevelEnum.WARN,error:u.LogLevelEnum.ERROR,off:u.LogLevelEnum.OFF},p,f=s.LogService=class extends r.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=u.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=l[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let h=0;h<o.length;h++)typeof o[h]=="function"&&(o[h]=o[h]())}_log(o,h,_){this._evalLazyOptionalParams(_),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,..._)}trace(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.TRACE&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}debug(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.DEBUG&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}info(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.INFO&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,o,h)}warn(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.WARN&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,o,h)}error(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.ERROR&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,o,h)}};s.LogService=f=d([i(0,u.IOptionsService)],f),s.setTraceLogger=function(o){p=o},s.traceCall=function(o,h,_){if(typeof _.value!="function")throw new Error("not supported");let m=_.value;_.value=function(...y){if(p.logLevel!==u.LogLevelEnum.TRACE)return m.apply(this,y);p.trace(`GlyphRenderer#${m.name}(${y.map(E=>JSON.stringify(E)).join(", ")})`);let C=m.apply(this,y);return p.trace(`GlyphRenderer#${m.name} return`,C),C}}},726:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let a="di$target",d="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(i){return i[d]||[]},s.createDecorator=function(i){if(s.serviceRegistry.has(i))return s.serviceRegistry.get(i);let r=function(u,l,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(f,o,h){o[a]===o?o[d].push({id:f,index:h}):(o[d]=[{id:f,index:h}],o[a]=o)})(r,u,p)};return r.toString=()=>i,s.serviceRegistry.set(i,r),r}},97:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let d=a(726);var i;s.IBufferService=(0,d.createDecorator)("BufferService"),s.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),s.ICoreService=(0,d.createDecorator)("CoreService"),s.ICharsetService=(0,d.createDecorator)("CharsetService"),s.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(r){r[r.TRACE=0]="TRACE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.OFF=5]="OFF"}(i||(s.LogLevelEnum=i={})),s.ILogService=(0,d.createDecorator)("LogService"),s.IOptionsService=(0,d.createDecorator)("OptionsService"),s.IOscLinkService=(0,d.createDecorator)("OscLinkService"),s.IUnicodeService=(0,d.createDecorator)("UnicodeService"),s.IDecorationService=(0,d.createDecorator)("DecorationService")}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v].call(a.exports,a,a.exports,n),a.exports}var c={};return(()=>{var v=c;Object.defineProperty(v,"__esModule",{value:!0}),v.WebglAddon=void 0;let s=n(345),a=n(859),d=n(399),i=n(666),r=n(776);class u extends a.Disposable{constructor(p){if(d.isSafari&&(0,d.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=p,this._onChangeTextureAtlas=this.register(new s.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new s.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new s.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new s.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(p){let f=p._core;if(!p.element)return void this.register(f.onWillOpen(()=>this.activate(p)));this._terminal=p;let o=f.coreService,h=f.optionsService,_=f,m=_._renderService,y=_._characterJoinerService,C=_._charSizeService,E=_._coreBrowserService,D=_._decorationService,g=_._logService,b=_._themeService;(0,r.setTraceLogger)(g),this._renderer=this.register(new i.WebglRenderer(p,y,C,E,o,D,h,b,this._preserveDrawingBuffer)),this.register((0,s.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,s.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,s.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,s.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),m.setRenderer(this._renderer),this.register((0,a.toDisposable)(()=>{let L=this._terminal._core._renderService;L.setRenderer(this._terminal._core._createRenderer()),L.handleResize(p.cols,p.rows)}))}get textureAtlas(){var p;return(p=this._renderer)===null||p===void 0?void 0:p.textureAtlas}clearTextureAtlas(){var p;(p=this._renderer)===null||p===void 0||p.clearTextureAtlas()}}v.WebglAddon=u})(),c})())});var Wk=ht((zv,Qw)=>{(function(e,t){typeof zv=="object"&&typeof Qw=="object"?Qw.exports=t():typeof define=="function"&&define.amd?define([],t):typeof zv=="object"?zv.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkComputer=s.WebLinkProvider=void 0,s.WebLinkProvider=class{constructor(d,i,r,u={}){this._terminal=d,this._regex=i,this._handler=r,this._options=u}provideLinks(d,i){let r=a.computeLink(d,this._regex,this._terminal,this._handler);i(this._addCallbacks(r))}_addCallbacks(d){return d.map(i=>(i.leave=this._options.leave,i.hover=(r,u)=>{if(this._options.hover){let{range:l}=i;this._options.hover(r,u,l)}},i))}};class a{static computeLink(i,r,u,l){let p=new RegExp(r.source,(r.flags||"")+"g"),[f,o]=a._getWindowedLineStrings(i-1,u),h=f.join(""),_,m=[];for(;_=p.exec(h);){let y=_[0];try{let L=new URL(y),S=decodeURI(L.toString());if(y!==S&&y+"/"!==S)continue}catch{continue}let[C,E]=a._mapStrIdx(u,o,0,_.index),[D,g]=a._mapStrIdx(u,C,E,y.length);if(C===-1||E===-1||D===-1||g===-1)continue;let b={start:{x:E+1,y:C+1},end:{x:g,y:D+1}};m.push({range:b,text:y,activate:l})}return m}static _getWindowedLineStrings(i,r){let u,l=i,p=i,f=0,o="",h=[];if(u=r.buffer.active.getLine(i)){let _=u.translateToString(!0);if(u.isWrapped&&_[0]!==" "){for(f=0;(u=r.buffer.active.getLine(--l))&&f<2048&&(o=u.translateToString(!0),f+=o.length,h.push(o),u.isWrapped&&o.indexOf(" ")===-1););h.reverse()}for(h.push(_),f=0;(u=r.buffer.active.getLine(++p))&&u.isWrapped&&f<2048&&(o=u.translateToString(!0),f+=o.length,h.push(o),o.indexOf(" ")===-1););}return[h,l]}static _mapStrIdx(i,r,u,l){let p=i.buffer.active,f=p.getNullCell(),o=u;for(;l;){let h=p.getLine(r);if(!h)return[-1,-1];for(let _=o;_<h.length;++_){h.getCell(_,f);let m=f.getChars();if(f.getWidth()&&(l-=m.length||1,_===h.length-1&&m==="")){let y=p.getLine(r+1);y&&y.isWrapped&&(y.getCell(0,f),f.getWidth()===2&&(l+=1))}if(l<0)return[r,_]}r++,o=0}return[r,o]}}s.LinkComputer=a}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v](a,a.exports,n),a.exports}var c={};return(()=>{var v=c;Object.defineProperty(v,"__esModule",{value:!0}),v.WebLinksAddon=void 0;let s=n(6),a=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function d(i,r){let u=window.open();if(u){try{u.opener=null}catch{}u.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}v.WebLinksAddon=class{constructor(i=d,r={}){this._handler=i,this._options=r}activate(i){this._terminal=i;let r=this._options,u=r.urlRegex||a;this._linkProvider=this._terminal.registerLinkProvider(new s.WebLinkProvider(this._terminal,u,this._handler,r))}dispose(){var i;(i=this._linkProvider)===null||i===void 0||i.dispose()}}})(),c})())});var jk=ht((Jv,eS)=>{(function(e,t){if(typeof Jv=="object"&&typeof eS=="object")eS.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var c in n)(typeof Jv=="object"?Jv:e)[c]=n[c]}})(self,()=>(()=>{"use strict";var e={4567:function(v,s,a){var d=this&&this.__decorate||function(m,y,C,E){var D,g=arguments.length,b=g<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,C):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(m,y,C,E);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},i=this&&this.__param||function(m,y){return function(C,E){y(C,E,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;let r=a(9042),u=a(6114),l=a(9924),p=a(844),f=a(5596),o=a(4725),h=a(3656),_=s.AccessibilityManager=class extends p.Disposable{constructor(m,y){super(),this._terminal=m,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new l.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new f.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,h.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,p.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(m){for(let y=0;y<m;y++)this._handleChar(" ")}_handleChar(m){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==m&&(this._charsToAnnounce+=m):this._charsToAnnounce+=m,m===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=r.tooMuchOutput)),u.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,u.isMac&&this._liveRegion.remove()}_handleKey(m){this._clearLiveRegion(),/\p{Control}/u.test(m)||this._charsToConsume.push(m)}_refreshRows(m,y){this._liveRegionDebouncer.refresh(m,y,this._terminal.rows)}_renderRows(m,y){let C=this._terminal.buffer,E=C.lines.length.toString();for(let D=m;D<=y;D++){let g=C.translateBufferLineToString(C.ydisp+D,!0),b=(C.ydisp+D+1).toString(),L=this._rowElements[D];L&&(g.length===0?L.innerText="\xA0":L.textContent=g,L.setAttribute("aria-posinset",b),L.setAttribute("aria-setsize",E))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(m,y){let C=m.target,E=this._rowElements[y===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||m.relatedTarget!==E)return;let D,g;if(y===0?(D=C,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=C,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){let b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{let b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),m.preventDefault(),m.stopImmediatePropagation()}_handleResize(m){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>m;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let m=document.createElement("div");return m.setAttribute("role","listitem"),m.tabIndex=-1,this._refreshRowDimensions(m),m}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let m=0;m<this._terminal.rows;m++)this._refreshRowDimensions(this._rowElements[m])}}_refreshRowDimensions(m){m.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=_=d([i(1,o.IRenderService)],_)},3614:(v,s)=>{function a(u){return u.replace(/\r?\n/g,"\r")}function d(u,l){return l?"\x1B[200~"+u+"\x1B[201~":u}function i(u,l,p,f){u=d(u=a(u),p.decPrivateModes.bracketedPasteMode&&f.rawOptions.ignoreBracketedPasteMode!==!0),p.triggerDataEvent(u,!0),l.value=""}function r(u,l,p){let f=p.getBoundingClientRect(),o=u.clientX-f.left-10,h=u.clientY-f.top-10;l.style.width="20px",l.style.height="20px",l.style.left=`${o}px`,l.style.top=`${h}px`,l.style.zIndex="1000",l.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=a,s.bracketTextForPaste=d,s.copyHandler=function(u,l){u.clipboardData&&u.clipboardData.setData("text/plain",l.selectionText),u.preventDefault()},s.handlePasteEvent=function(u,l,p,f){u.stopPropagation(),u.clipboardData&&i(u.clipboardData.getData("text/plain"),l,p,f)},s.paste=i,s.moveTextAreaUnderMouseCursor=r,s.rightClickHandler=function(u,l,p,f,o){r(u,l,p),o&&f.rightClickSelect(u),l.value=f.selectionText,l.select()}},7239:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;let d=a(1505);s.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(i,r,u){this._css.set(i,r,u)}getCss(i,r){return this._css.get(i,r)}setColor(i,r,u){this._color.set(i,r,u)}getColor(i,r){return this._color.get(i,r)}clear(){this._color.clear(),this._css.clear()}}},3656:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,d,i,r){a.addEventListener(d,i,r);let u=!1;return{dispose:()=>{u||(u=!0,a.removeEventListener(d,i,r))}}}},6465:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;let r=a(3656),u=a(8460),l=a(844),p=a(2585),f=s.Linkifier2=class extends l.Disposable{get currentLink(){return this._currentLink}constructor(o){super(),this._bufferService=o,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new u.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new u.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,l.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,l.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(o){return this._linkProviders.push(o),{dispose:()=>{let h=this._linkProviders.indexOf(o);h!==-1&&this._linkProviders.splice(h,1)}}}attachToDom(o,h,_){this._element=o,this._mouseService=h,this._renderService=_,this.register((0,r.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,r.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,r.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,r.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){if(this._lastMouseEvent=o,!this._element||!this._mouseService)return;let h=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!h)return;this._isMouseOut=!1;let _=o.composedPath();for(let m=0;m<_.length;m++){let y=_[m];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._handleHover(h),this._lastBufferCell=h)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,h){var _,m;this._activeProviderReplies&&h||((_=this._activeProviderReplies)===null||_===void 0||_.forEach(C=>{C?.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let y=!1;for(let[C,E]of this._linkProviders.entries())h?!((m=this._activeProviderReplies)===null||m===void 0)&&m.get(C)&&(y=this._checkLinkProviderResult(C,o,y)):E.provideLinks(o.y,D=>{var g,b;if(this._isMouseOut)return;let L=D?.map(S=>({link:S}));(g=this._activeProviderReplies)===null||g===void 0||g.set(C,L),y=this._checkLinkProviderResult(C,o,y),((b=this._activeProviderReplies)===null||b===void 0?void 0:b.size)===this._linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,h){let _=new Set;for(let m=0;m<h.size;m++){let y=h.get(m);if(y)for(let C=0;C<y.length;C++){let E=y[C],D=E.link.range.start.y<o?0:E.link.range.start.x,g=E.link.range.end.y>o?this._bufferService.cols:E.link.range.end.x;for(let b=D;b<=g;b++){if(_.has(b)){y.splice(C--,1);break}_.add(b)}}}}_checkLinkProviderResult(o,h,_){var m;if(!this._activeProviderReplies)return _;let y=this._activeProviderReplies.get(o),C=!1;for(let E=0;E<o;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(C=!0);if(!C&&y){let E=y.find(D=>this._linkAtPosition(D.link,h));E&&(_=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviders.length&&!_)for(let E=0;E<this._activeProviderReplies.size;E++){let D=(m=this._activeProviderReplies.get(E))===null||m===void 0?void 0:m.find(g=>this._linkAtPosition(g.link,h));if(D){_=!0,this._handleNewLink(D);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._element||!this._mouseService||!this._currentLink)return;let h=this._positionFromMouseEvent(o,this._element,this._mouseService);h&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,h)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,h){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!h||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,l.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(o.link,h)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var _,m;return(m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:_=>{var m,y;!((m=this._currentLink)===null||m===void 0)&&m.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",_)))}},underline:{get:()=>{var _,m;return(m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.underline},set:_=>{var m,y,C;!((m=this._currentLink)===null||m===void 0)&&m.state&&((C=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||C===void 0?void 0:C.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,_))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;let m=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(m,y),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(o,h,_){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),h.hover&&h.hover(_,h.text)}_fireUnderlineEvent(o,h){let _=o.range,m=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-m-1,_.end.x,_.end.y-m-1,void 0);(h?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(o,h,_){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),h.leave&&h.leave(_,h.text)}_linkAtPosition(o,h){let _=o.range.start.y*this._bufferService.cols+o.range.start.x,m=o.range.end.y*this._bufferService.cols+o.range.end.x,y=h.y*this._bufferService.cols+h.x;return _<=y&&y<=m}_positionFromMouseEvent(o,h,_){let m=_.getCoords(o,h,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,h,_,m,y){return{x1:o,y1:h,x2:_,y2:m,cols:this._bufferService.cols,fg:y}}};s.Linkifier2=f=d([i(0,p.IBufferService)],f)},9042:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(v,s,a){var d=this&&this.__decorate||function(f,o,h,_){var m,y=arguments.length,C=y<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,o,h,_);else for(var E=f.length-1;E>=0;E--)(m=f[E])&&(C=(y<3?m(C):y>3?m(o,h,C):m(o,h))||C);return y>3&&C&&Object.defineProperty(o,h,C),C},i=this&&this.__param||function(f,o){return function(h,_){o(h,_,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;let r=a(511),u=a(2585),l=s.OscLinkProvider=class{constructor(f,o,h){this._bufferService=f,this._optionsService=o,this._oscLinkService=h}provideLinks(f,o){var h;let _=this._bufferService.buffer.lines.get(f-1);if(!_)return void o(void 0);let m=[],y=this._optionsService.rawOptions.linkHandler,C=new r.CellData,E=_.getTrimmedLength(),D=-1,g=-1,b=!1;for(let L=0;L<E;L++)if(g!==-1||_.hasContent(L)){if(_.loadCell(L,C),C.hasExtendedAttrs()&&C.extended.urlId){if(g===-1){g=L,D=C.extended.urlId;continue}b=C.extended.urlId!==D}else g!==-1&&(b=!0);if(b||g!==-1&&L===E-1){let S=(h=this._oscLinkService.getLinkData(D))===null||h===void 0?void 0:h.uri;if(S){let T={start:{x:g+1,y:f},end:{x:L+(b||L!==E-1?0:1),y:f}},M=!1;if(!y?.allowNonHttpProtocols)try{let w=new URL(S);["http:","https:"].includes(w.protocol)||(M=!0)}catch{M=!0}M||m.push({text:S,range:T,activate:(w,F)=>y?y.activate(w,F,T):p(0,F),hover:(w,F)=>{var x;return(x=y?.hover)===null||x===void 0?void 0:x.call(y,w,F,T)},leave:(w,F)=>{var x;return(x=y?.leave)===null||x===void 0?void 0:x.call(y,w,F,T)}})}b=!1,C.hasExtendedAttrs()&&C.extended.urlId?(g=L,D=C.extended.urlId):(g=-1,D=-1)}}o(m)}};function p(f,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){let h=window.open();if(h){try{h.opener=null}catch{}h.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=l=d([i(0,u.IBufferService),i(1,u.IOptionsService),i(2,u.IOscLinkService)],l)},6193:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(a,d){this._parentWindow=a,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,d,i){this._rowCount=i,a=a!==void 0?a:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let a=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;let d=a(844);class i extends d.Disposable{constructor(u){super(),this._parentWindow=u,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(u){this._listener&&this.clearListener(),this._listener=u,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var u;this._outerListener&&((u=this._resolutionMediaMatchList)===null||u===void 0||u.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=i},3236:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let d=a(3614),i=a(3656),r=a(6465),u=a(9042),l=a(3730),p=a(1680),f=a(3107),o=a(5744),h=a(2950),_=a(1296),m=a(428),y=a(4269),C=a(5114),E=a(8934),D=a(3230),g=a(9312),b=a(4725),L=a(6731),S=a(8055),T=a(8969),M=a(8460),w=a(844),F=a(6114),x=a(8437),R=a(2584),A=a(7399),I=a(5941),$=a(9074),k=a(2585),H=a(5435),U=a(4567),q=typeof window<"u"?window.document:null;class N extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new w.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(r.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(l.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance($.DecorationService),this._instantiationService.setService(k.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((B,W)=>this.refresh(B,W))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(B=>this._reportWindowsOptions(B))),this.register(this._inputHandler.onColor(B=>this._handleColorEvent(B))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(B=>this._afterResize(B.cols,B.rows))),this.register((0,w.toDisposable)(()=>{var B,W;this._customKeyEventHandler=void 0,(W=(B=this.element)===null||B===void 0?void 0:B.parentNode)===null||W===void 0||W.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let B of O){let W,P="";switch(B.index){case 256:W="foreground",P="10";break;case 257:W="background",P="11";break;case 258:W="cursor",P="12";break;default:W="ansi",P="4;"+B.index}switch(B.type){case 0:let Y=S.color.toColorRGB(W==="ansi"?this._themeService.colors.ansi[B.index]:this._themeService.colors[W]);this.coreService.triggerDataEvent(`${R.C0.ESC}]${P};${(0,I.toRgbString)(Y)}${R.C1_ESCAPED.ST}`);break;case 1:if(W==="ansi")this._themeService.modifyColors(J=>J.ansi[B.index]=S.rgba.toColor(...B.color));else{let J=W;this._themeService.modifyColors(ve=>ve[J]=S.rgba.toColor(...B.color))}break;case 2:this._themeService.restoreColor(B.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,B=this.buffer.lines.get(O);if(!B)return;let W=Math.min(this.buffer.x,this.cols-1),P=this._renderService.dimensions.css.cell.height,Y=B.getWidth(W),J=this._renderService.dimensions.css.cell.width*Y,ve=this.buffer.y*this._renderService.dimensions.css.cell.height,Ee=W*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ee+"px",this.textarea.style.top=ve+"px",this.textarea.style.width=J+"px",this.textarea.style.height=P+"px",this.textarea.style.lineHeight=P+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,i.addDisposableDomListener)(this.element,"copy",B=>{this.hasSelection()&&(0,d.copyHandler)(B,this._selectionService)}));let O=B=>(0,d.handlePasteEvent)(B,this.textarea,this.coreService,this.optionsService);this.register((0,i.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,i.addDisposableDomListener)(this.element,"paste",O)),F.isFirefox?this.register((0,i.addDisposableDomListener)(this.element,"mousedown",B=>{B.button===2&&(0,d.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,i.addDisposableDomListener)(this.element,"contextmenu",B=>{(0,d.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,i.addDisposableDomListener)(this.element,"auxclick",B=>{B.button===1&&(0,d.moveTextAreaUnderMouseCursor)(B,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,i.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,i.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,i.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,i.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,i.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,i.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,i.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){var B;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let W=q.createDocumentFragment();this._viewportElement=q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),W.appendChild(this._viewportElement),this._viewportScrollArea=q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),W.appendChild(this.screenElement),this.textarea=q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",u.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(B=this._document.defaultView)!==null&&B!==void 0?B:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,i.addDisposableDomListener)(this.textarea,"focus",P=>this._handleTextAreaFocus(P))),this.register((0,i.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(m.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(P=>this._onRender.fire(P))),this.onResize(P=>this._renderService.resize(P.cols,P.rows)),this._compositionView=q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(W);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(p.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(P=>this.scrollLines(P.amount,P.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(P=>this.scrollLines(P.amount,P.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(P=>this._renderService.handleSelectionChanged(P.start,P.end,P.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(P=>{this.textarea.value=P,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(P=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,i.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(f.BufferDecorationRenderer,this.screenElement)),this.register((0,i.addDisposableDomListener)(this.element,"mousedown",P=>this._selectionService.handleMouseDown(P))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",P=>this._handleScreenReaderModeOptionChange(P))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",P=>{!this._overviewRulerRenderer&&P&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(_.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let O=this,B=this.element;function W(J){let ve=O._mouseService.getMouseReportCoords(J,O.screenElement);if(!ve)return!1;let Ee,Ce;switch(J.overrideType||J.type){case"mousemove":Ce=32,J.buttons===void 0?(Ee=3,J.button!==void 0&&(Ee=J.button<3?J.button:3)):Ee=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":Ce=0,Ee=J.button<3?J.button:3;break;case"mousedown":Ce=1,Ee=J.button<3?J.button:3;break;case"wheel":if(O.viewport.getLinesScrolled(J)===0)return!1;Ce=J.deltaY<0?0:1,Ee=4;break;default:return!1}return!(Ce===void 0||Ee===void 0||Ee>4)&&O.coreMouseService.triggerMouseEvent({col:ve.col,row:ve.row,x:ve.x,y:ve.y,button:Ee,action:Ce,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}let P={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Y={mouseup:J=>(W(J),J.buttons||(this._document.removeEventListener("mouseup",P.mouseup),P.mousedrag&&this._document.removeEventListener("mousemove",P.mousedrag)),this.cancel(J)),wheel:J=>(W(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&W(J)},mousemove:J=>{J.buttons||W(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?P.mousemove||(B.addEventListener("mousemove",Y.mousemove),P.mousemove=Y.mousemove):(B.removeEventListener("mousemove",P.mousemove),P.mousemove=null),16&J?P.wheel||(B.addEventListener("wheel",Y.wheel,{passive:!1}),P.wheel=Y.wheel):(B.removeEventListener("wheel",P.wheel),P.wheel=null),2&J?P.mouseup||(B.addEventListener("mouseup",Y.mouseup),P.mouseup=Y.mouseup):(this._document.removeEventListener("mouseup",P.mouseup),B.removeEventListener("mouseup",P.mouseup),P.mouseup=null),4&J?P.mousedrag||(P.mousedrag=Y.mousedrag):(this._document.removeEventListener("mousemove",P.mousedrag),P.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,i.addDisposableDomListener)(B,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return W(J),P.mouseup&&this._document.addEventListener("mouseup",P.mouseup),P.mousedrag&&this._document.addEventListener("mousemove",P.mousedrag),this.cancel(J)})),this.register((0,i.addDisposableDomListener)(B,"wheel",J=>{if(!P.wheel){if(!this.buffer.hasScrollback){let ve=this.viewport.getLinesScrolled(J);if(ve===0)return;let Ee=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B"),Ce="";for(let se=0;se<Math.abs(ve);se++)Ce+=Ee;return this.coreService.triggerDataEvent(Ce,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,i.addDisposableDomListener)(B,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,i.addDisposableDomListener)(B,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(O,B){var W;(W=this._renderService)===null||W===void 0||W.refreshRows(O,B)}updateCursorStyle(O){var B;!((B=this._selectionService)===null||B===void 0)&&B.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,B,W=0){var P;W===1?(super.scrollLines(O,B,W),this.refresh(0,this.rows-1)):(P=this.viewport)===null||P===void 0||P.scrollLines(O)}paste(O){(0,d.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}registerLinkProvider(O){return this.linkifier2.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let B=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),B}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,B,W){this._selectionService.setSelection(O,B,W)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()}selectAll(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()}selectLines(O,B){var W;(W=this._selectionService)===null||W===void 0||W.selectLines(O,B)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let B=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!B&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;B||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let W=(0,A.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),W.type===3||W.type===2){let P=this.rows-1;return this.scrollLines(W.type===2?-P:P),this.cancel(O,!0)}return W.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(W.cancel&&this.cancel(O,!0),!W.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(W.key!==R.C0.ETX&&W.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:W.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(W.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,B){let W=O.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||O.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||O.isWindows&&B.getModifierState("AltGraph");return B.type==="keypress"?W:W&&(!B.keyCode||B.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(B){return B.keyCode===16||B.keyCode===17||B.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)B=O.charCode;else if(O.which===null||O.which===void 0)B=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;B=O.which}return!(!B||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let B=O.data;return this.coreService.triggerDataEvent(B,!0),this.cancel(O),!0}return!1}resize(O,B){O!==this.cols||B!==this.rows?super.resize(O,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,B){var W,P;(W=this._charSizeService)===null||W===void 0||W.measure(),(P=this.viewport)===null||P===void 0||P.syncScrollArea(!0)}clear(){var O;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(x.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(O=this.viewport)===null||O===void 0||O.reset(),this.refresh(0,this.rows-1)}}reset(){var O,B;this.options.rows=this.rows,this.options.cols=this.cols;let W=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),(B=this.viewport)===null||B===void 0||B.reset(),this._customKeyEventHandler=W,this.refresh(0,this.rows-1)}clearTextureAtlas(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()}_reportFocus(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let B=this._renderService.dimensions.css.canvas.width.toFixed(0),W=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[4;${W};${B}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let P=this._renderService.dimensions.css.cell.width.toFixed(0),Y=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[6;${Y};${P}t`)}}cancel(O,B){if(this.options.cancelEvents||B)return O.preventDefault(),O.stopPropagation(),!1}}s.Terminal=N},9924:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(a,d=1e3){this._renderCallback=a,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,d,i){this._rowCount=i,a=a!==void 0?a:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;let r=Date.now();if(r-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=r,this._innerRefresh();else if(!this._additionalRefreshRequested){let u=r-this._lastRefreshMs,l=this._debounceThresholdMS-u;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},l)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let a=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,d)}}},1680:function(v,s,a){var d=this&&this.__decorate||function(h,_,m,y){var C,E=arguments.length,D=E<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(h,_,m,y);else for(var g=h.length-1;g>=0;g--)(C=h[g])&&(D=(E<3?C(D):E>3?C(_,m,D):C(_,m))||D);return E>3&&D&&Object.defineProperty(_,m,D),D},i=this&&this.__param||function(h,_){return function(m,y){_(m,y,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;let r=a(3656),u=a(4725),l=a(8460),p=a(844),f=a(2585),o=s.Viewport=class extends p.Disposable{constructor(h,_,m,y,C,E,D,g){super(),this._viewportElement=h,this._scrollArea=_,this._bufferService=m,this._optionsService=y,this._charSizeService=C,this._renderService=E,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new l.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,r.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let _=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==_&&(this._lastRecordedBufferHeight=_,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let _=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,_){let m=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(_<0&&this._viewportElement.scrollTop!==0||_>0&&m<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){let _=this._getPixelsScrolled(h);return _!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+_:this._smoothScrollState.target+=_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=_,this._bubbleScroll(h,_))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let _=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let _=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?_*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._currentRowHeight*this._bufferService.rows),_}getBufferElements(h,_){var m;let y,C="",E=[],D=_??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let b=h;b<D;b++){let L=g.get(b);if(!L)continue;let S=(m=g.get(b+1))===null||m===void 0?void 0:m.isWrapped;if(C+=L.translateToString(!S),!S||b===g.length-1){let T=document.createElement("div");T.textContent=C,E.push(T),C.length>0&&(y=T),C=""}}return{bufferElements:E,cursorElement:y}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let _=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(_/=this._currentRowHeight+0,this._wheelPartialScroll+=_,_=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._bufferService.rows),_}_applyScrollModifier(h,_){let m=this._optionsService.rawOptions.fastScrollModifier;return m==="alt"&&_.altKey||m==="ctrl"&&_.ctrlKey||m==="shift"&&_.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){let _=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,_!==0&&(this._viewportElement.scrollTop+=_,this._bubbleScroll(h,_))}};s.Viewport=o=d([i(2,f.IBufferService),i(3,f.IOptionsService),i(4,u.ICharSizeService),i(5,u.IRenderService),i(6,u.ICoreBrowserService),i(7,u.IThemeService)],o)},3107:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;let r=a(3656),u=a(4725),l=a(844),p=a(2585),f=s.BufferDecorationRenderer=class extends l.Disposable{constructor(o,h,_,m){super(),this._screenElement=o,this._bufferService=h,this._decorationService=_,this._renderService=m,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,r.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,l.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let o of this._decorationService.decorations)this._renderDecoration(o);this._dimensionsChanged=!1}_renderDecoration(o){this._refreshStyle(o),this._dimensionsChanged&&this._refreshXPosition(o)}_createElement(o){var h,_;let m=document.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",((h=o?.options)===null||h===void 0?void 0:h.layer)==="top"),m.style.width=`${Math.round((o.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(o.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(o.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let y=(_=o.options.x)!==null&&_!==void 0?_:0;return y&&y>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(o,m),m}_refreshStyle(o){let h=o.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)o.element&&(o.element.style.display="none",o.onRenderEmitter.fire(o.element));else{let _=this._decorationElements.get(o);_||(_=this._createElement(o),o.element=_,this._decorationElements.set(o,_),this._container.appendChild(_),o.onDispose(()=>{this._decorationElements.delete(o),_.remove()})),_.style.top=h*this._renderService.dimensions.css.cell.height+"px",_.style.display=this._altBufferIsActive?"none":"block",o.onRenderEmitter.fire(_)}}_refreshXPosition(o,h=o.element){var _;if(!h)return;let m=(_=o.options.x)!==null&&_!==void 0?_:0;(o.options.anchor||"left")==="right"?h.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(o){var h;(h=this._decorationElements.get(o))===null||h===void 0||h.remove(),this._decorationElements.delete(o),o.dispose()}};s.BufferDecorationRenderer=f=d([i(1,p.IBufferService),i(2,p.IDecorationService),i(3,u.IRenderService)],f)},5871:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(let d of this._zones)if(d.color===a.options.overviewRulerOptions.color&&d.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,a.marker.line))return;if(this._lineAdjacentToZone(d,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(d,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,d){return d>=a.startBufferLine&&d<=a.endBufferLine}_lineAdjacentToZone(a,d,i){return d>=a.startBufferLine-this._linePadding[i||"full"]&&d<=a.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(a,d){a.startBufferLine=Math.min(a.startBufferLine,d),a.endBufferLine=Math.max(a.endBufferLine,d)}}},5744:function(v,s,a){var d=this&&this.__decorate||function(y,C,E,D){var g,b=arguments.length,L=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,C,E,D);else for(var S=y.length-1;S>=0;S--)(g=y[S])&&(L=(b<3?g(L):b>3?g(C,E,L):g(C,E))||L);return b>3&&L&&Object.defineProperty(C,E,L),L},i=this&&this.__param||function(y,C){return function(E,D){C(E,D,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;let r=a(5871),u=a(3656),l=a(4725),p=a(844),f=a(2585),o={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},m=s.OverviewRulerRenderer=class extends p.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,C,E,D,g,b,L){var S;super(),this._viewportElement=y,this._screenElement=C,this._bufferService=E,this._decorationService=D,this._renderService=g,this._optionsService=b,this._coreBrowseService=L,this._colorZoneStore=new r.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(S=this._viewportElement.parentElement)===null||S===void 0||S.insertBefore(this._canvas,this._viewportElement);let T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,p.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,u.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let y=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=y,h.center=C,h.right=y,this._refreshDrawHeightConstants(),_.full=0,_.left=0,_.center=h.left,_.right=h.left+h.center}_refreshDrawHeightConstants(){o.full=Math.round(2*this._coreBrowseService.dpr);let y=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);o.left=C,o.center=C,o.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let y=this._colorZoneStore.zones;for(let C of y)C.position!=="full"&&this._renderColorZone(C);for(let C of y)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(_[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-o[y.position||"full"]/2),h[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+o[y.position||"full"]))}_queueRefresh(y,C){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=m=d([i(2,f.IBufferService),i(3,f.IDecorationService),i(4,l.IRenderService),i(5,f.IOptionsService),i(6,l.ICoreBrowserService)],m)},2950:function(v,s,a){var d=this&&this.__decorate||function(f,o,h,_){var m,y=arguments.length,C=y<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,o,h,_);else for(var E=f.length-1;E>=0;E--)(m=f[E])&&(C=(y<3?m(C):y>3?m(o,h,C):m(o,h))||C);return y>3&&C&&Object.defineProperty(o,h,C),C},i=this&&this.__param||function(f,o){return function(h,_){o(h,_,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;let r=a(4725),u=a(2585),l=a(2584),p=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(f,o,h,_,m,y){this._textarea=f,this._compositionView=o,this._bufferService=h,this._optionsService=_,this._coreService=m,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(f){this._compositionView.textContent=f.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(f){if(this._isComposing||this._isSendingComposition){if(f.keyCode===229||f.keyCode===16||f.keyCode===17||f.keyCode===18)return!1;this._finalizeComposition(!1)}return f.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(f){if(this._compositionView.classList.remove("active"),this._isComposing=!1,f){let o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;let o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){let f=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let o=this._textarea.value,h=o.replace(f,"");this._dataAlreadySent=h,o.length>f.length?this._coreService.triggerDataEvent(h,!0):o.length<f.length?this._coreService.triggerDataEvent(`${l.C0.DEL}`,!0):o.length===f.length&&o!==f&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(f){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,_=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,m=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=m+"px",this._compositionView.style.top=_+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let y=this._compositionView.getBoundingClientRect();this._textarea.style.left=m+"px",this._textarea.style.top=_+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}f||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=p=d([i(2,u.IBufferService),i(3,u.IOptionsService),i(4,u.ICoreService),i(5,r.IRenderService)],p)},9806:(v,s)=>{function a(d,i,r){let u=r.getBoundingClientRect(),l=d.getComputedStyle(r),p=parseInt(l.getPropertyValue("padding-left")),f=parseInt(l.getPropertyValue("padding-top"));return[i.clientX-u.left-p,i.clientY-u.top-f]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=a,s.getCoords=function(d,i,r,u,l,p,f,o,h){if(!p)return;let _=a(d,i,r);return _?(_[0]=Math.ceil((_[0]+(h?f/2:0))/f),_[1]=Math.ceil(_[1]/o),_[0]=Math.min(Math.max(_[0],1),u+(h?1:0)),_[1]=Math.min(Math.max(_[1],1),l),_):void 0}},9504:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;let d=a(2584);function i(o,h,_,m){let y=o-r(o,_),C=h-r(h,_),E=Math.abs(y-C)-function(D,g,b){let L=0,S=D-r(D,b),T=g-r(g,b);for(let M=0;M<Math.abs(S-T);M++){let w=u(D,g)==="A"?-1:1,F=b.buffer.lines.get(S+w*M);F?.isWrapped&&L++}return L}(o,h,_);return f(E,p(u(o,h),m))}function r(o,h){let _=0,m=h.buffer.lines.get(o),y=m?.isWrapped;for(;y&&o>=0&&o<h.rows;)_++,m=h.buffer.lines.get(--o),y=m?.isWrapped;return _}function u(o,h){return o>h?"A":"B"}function l(o,h,_,m,y,C){let E=o,D=h,g="";for(;E!==_||D!==m;)E+=y?1:-1,y&&E>C.cols-1?(g+=C.buffer.translateBufferLineToString(D,!1,o,E),E=0,o=0,D++):!y&&E<0&&(g+=C.buffer.translateBufferLineToString(D,!1,0,o+1),E=C.cols-1,o=E,D--);return g+C.buffer.translateBufferLineToString(D,!1,o,E)}function p(o,h){let _=h?"O":"[";return d.C0.ESC+_+o}function f(o,h){o=Math.floor(o);let _="";for(let m=0;m<o;m++)_+=h;return _}s.moveToCellSequence=function(o,h,_,m){let y=_.buffer.x,C=_.buffer.y;if(!_.buffer.hasScrollback)return function(g,b,L,S,T,M){return i(b,S,T,M).length===0?"":f(l(g,b,g,b-r(b,T),!1,T).length,p("D",M))}(y,C,0,h,_,m)+i(C,h,_,m)+function(g,b,L,S,T,M){let w;w=i(b,S,T,M).length>0?S-r(S,T):b;let F=S,x=function(R,A,I,$,k,H){let U;return U=i(I,$,k,H).length>0?$-r($,k):A,R<I&&U<=$||R>=I&&U<$?"C":"D"}(g,b,L,S,T,M);return f(l(g,w,L,F,x==="C",T).length,p(x,M))}(y,C,o,h,_,m);let E;if(C===h)return E=y>o?"D":"C",f(Math.abs(y-o),p(E,m));E=C>h?"D":"C";let D=Math.abs(C-h);return f(function(g,b){return b.cols-g}(C>h?o:y,_)+(D-1)*_.cols+1+((C>h?y:o)-1),p(E,m))}},1296:function(v,s,a){var d=this&&this.__decorate||function(T,M,w,F){var x,R=arguments.length,A=R<3?M:F===null?F=Object.getOwnPropertyDescriptor(M,w):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(T,M,w,F);else for(var I=T.length-1;I>=0;I--)(x=T[I])&&(A=(R<3?x(A):R>3?x(M,w,A):x(M,w))||A);return R>3&&A&&Object.defineProperty(M,w,A),A},i=this&&this.__param||function(T,M){return function(w,F){M(w,F,T)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;let r=a(3787),u=a(2550),l=a(2223),p=a(6171),f=a(4725),o=a(8055),h=a(8460),_=a(844),m=a(2585),y="xterm-dom-renderer-owner-",C="xterm-rows",E="xterm-fg-",D="xterm-bg-",g="xterm-focus",b="xterm-selection",L=1,S=s.DomRenderer=class extends _.Disposable{constructor(T,M,w,F,x,R,A,I,$,k){super(),this._element=T,this._screenElement=M,this._viewportElement=w,this._linkifier2=F,this._charSizeService=R,this._optionsService=A,this._bufferService=I,this._coreBrowserService=$,this._themeService=k,this._terminalClass=L++,this._rowElements=[],this.onRequestRedraw=this.register(new h.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,p.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(H=>this._injectCss(H))),this._injectCss(this._themeService.colors),this._rowFactory=x.createInstance(r.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(H=>this._handleLinkHover(H))),this.register(this._linkifier2.onHideLinkUnderline(H=>this._handleLinkLeave(H))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new u.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let w of this._rowElements)w.style.width=`${this.dimensions.css.canvas.width}px`,w.style.height=`${this.dimensions.css.cell.height}px`,w.style.lineHeight=`${this.dimensions.css.cell.height}px`,w.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let M=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${C} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${C} .xterm-dim { color: ${o.color.multiplyOpacity(T.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,M+=`${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(let[w,F]of T.ansi.entries())M+=`${this._terminalSelector} .${E}${w} { color: ${F.css}; }${this._terminalSelector} .${E}${w}.xterm-dim { color: ${o.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${D}${w} { background-color: ${F.css}; }`;M+=`${this._terminalSelector} .${E}${l.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(T.background).css}; }${this._terminalSelector} .${E}${l.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${D}${l.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){let T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,M){for(let w=this._rowElements.length;w<=M;w++){let F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,M){this._refreshRowElements(T,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,M,w){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,M,w),this.renderRows(0,this._bufferService.rows-1),!T||!M)return;let F=T[1]-this._bufferService.buffer.ydisp,x=M[1]-this._bufferService.buffer.ydisp,R=Math.max(F,0),A=Math.min(x,this._bufferService.rows-1);if(R>=this._bufferService.rows||A<0)return;let I=document.createDocumentFragment();if(w){let $=T[0]>M[0];I.appendChild(this._createSelectionElement(R,$?M[0]:T[0],$?T[0]:M[0],A-R+1))}else{let $=F===R?T[0]:0,k=R===x?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,$,k));let H=A-R-1;if(I.appendChild(this._createSelectionElement(R+1,0,this._bufferService.cols,H)),R!==A){let U=x===A?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(A,0,U))}}this._selectionContainer.appendChild(I)}_createSelectionElement(T,M,w,F=1){let x=document.createElement("div");return x.style.height=F*this.dimensions.css.cell.height+"px",x.style.top=T*this.dimensions.css.cell.height+"px",x.style.left=M*this.dimensions.css.cell.width+"px",x.style.width=this.dimensions.css.cell.width*(w-M)+"px",x}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let T of this._rowElements)T.replaceChildren()}renderRows(T,M){let w=this._bufferService.buffer,F=w.ybase+w.y,x=Math.min(w.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink,A=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=T;$<=M;$++){let k=$+w.ydisp,H=this._rowElements[$],U=w.lines.get(k);if(!H||!U)break;H.replaceChildren(...this._rowFactory.createRow(U,k,k===F,A,I,x,R,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,M,w,F,x,R){w<0&&(T=0),F<0&&(M=0);let A=this._bufferService.rows-1;w=Math.max(Math.min(w,A),0),F=Math.max(Math.min(F,A),0),x=Math.min(x,this._bufferService.cols);let I=this._bufferService.buffer,$=I.ybase+I.y,k=Math.min(I.x,x-1),H=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let N=w;N<=F;++N){let K=N+I.ydisp,O=this._rowElements[N],B=I.lines.get(K);if(!O||!B)break;O.replaceChildren(...this._rowFactory.createRow(B,K,K===$,U,q,k,H,this.dimensions.css.cell.width,this._widthCache,R?N===w?T:0:-1,R?(N===F?M:x)-1:-1))}}};s.DomRenderer=S=d([i(4,m.IInstantiationService),i(5,f.ICharSizeService),i(6,m.IOptionsService),i(7,m.IBufferService),i(8,f.ICoreBrowserService),i(9,f.IThemeService)],S)},3787:function(v,s,a){var d=this&&this.__decorate||function(E,D,g,b){var L,S=arguments.length,T=S<3?D:b===null?b=Object.getOwnPropertyDescriptor(D,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(E,D,g,b);else for(var M=E.length-1;M>=0;M--)(L=E[M])&&(T=(S<3?L(T):S>3?L(D,g,T):L(D,g))||T);return S>3&&T&&Object.defineProperty(D,g,T),T},i=this&&this.__param||function(E,D){return function(g,b){D(g,b,E)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;let r=a(2223),u=a(643),l=a(511),p=a(2585),f=a(8055),o=a(4725),h=a(4269),_=a(6171),m=a(3734),y=s.DomRendererRowFactory=class{constructor(E,D,g,b,L,S,T){this._document=E,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=b,this._coreService=L,this._decorationService=S,this._themeService=T,this._workCell=new l.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,D,g){this._selectionStart=E,this._selectionEnd=D,this._columnSelectMode=g}createRow(E,D,g,b,L,S,T,M,w,F,x){let R=[],A=this._characterJoinerService.getJoinedCharacters(D),I=this._themeService.colors,$,k=E.getNoBgTrimmedLength();g&&k<S+1&&(k=S+1);let H=0,U="",q=0,N=0,K=0,O=!1,B=0,W=!1,P=0,Y=[],J=F!==-1&&x!==-1;for(let ve=0;ve<k;ve++){E.loadCell(ve,this._workCell);let Ee=this._workCell.getWidth();if(Ee===0)continue;let Ce=!1,se=ve,Se=this._workCell;if(A.length>0&&ve===A[0][0]){Ce=!0;let ze=A.shift();Se=new h.JoinedCellData(this._workCell,E.translateToString(!0,ze[0],ze[1]),ze[1]-ze[0]),se=ze[1]-1,Ee=Se.getWidth()}let Ct=this._isCellInSelection(ve,D),Jt=g&&ve===S,Bt=J&&ve>=F&&ve<=x,Ze=!1;this._decorationService.forEachDecorationAtCell(ve,D,void 0,ze=>{Ze=!0});let ce=Se.getChars()||u.WHITESPACE_CELL_CHAR;if(ce===" "&&(Se.isUnderline()||Se.isOverline())&&(ce="\xA0"),P=Ee*M-w.get(ce,Se.isBold(),Se.isItalic()),$){if(H&&(Ct&&W||!Ct&&!W&&Se.bg===q)&&(Ct&&W&&I.selectionForeground||Se.fg===N)&&Se.extended.ext===K&&Bt===O&&P===B&&!Jt&&!Ce&&!Ze){U+=ce,H++;continue}H&&($.textContent=U),$=this._document.createElement("span"),H=0,U=""}else $=this._document.createElement("span");if(q=Se.bg,N=Se.fg,K=Se.extended.ext,O=Bt,B=P,W=Ct,Ce&&S>=ve&&S<=se&&(S=ve),!this._coreService.isCursorHidden&&Jt){if(Y.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&Y.push("xterm-cursor-blink"),Y.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":Y.push("xterm-cursor-outline");break;case"block":Y.push("xterm-cursor-block");break;case"bar":Y.push("xterm-cursor-bar");break;case"underline":Y.push("xterm-cursor-underline")}}if(Se.isBold()&&Y.push("xterm-bold"),Se.isItalic()&&Y.push("xterm-italic"),Se.isDim()&&Y.push("xterm-dim"),U=Se.isInvisible()?u.WHITESPACE_CELL_CHAR:Se.getChars()||u.WHITESPACE_CELL_CHAR,Se.isUnderline()&&(Y.push(`xterm-underline-${Se.extended.underlineStyle}`),U===" "&&(U="\xA0"),!Se.isUnderlineColorDefault()))if(Se.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${m.AttributeData.toColorRGB(Se.getUnderlineColor()).join(",")})`;else{let ze=Se.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Se.isBold()&&ze<8&&(ze+=8),$.style.textDecorationColor=I.ansi[ze].css}Se.isOverline()&&(Y.push("xterm-overline"),U===" "&&(U="\xA0")),Se.isStrikethrough()&&Y.push("xterm-strikethrough"),Bt&&($.style.textDecoration="underline");let he=Se.getFgColor(),le=Se.getFgColorMode(),oe=Se.getBgColor(),j=Se.getBgColorMode(),ie=!!Se.isInverse();if(ie){let ze=he;he=oe,oe=ze;let bt=le;le=j,j=bt}let de,Be,nt,st=!1;switch(this._decorationService.forEachDecorationAtCell(ve,D,void 0,ze=>{ze.options.layer!=="top"&&st||(ze.backgroundColorRGB&&(j=50331648,oe=ze.backgroundColorRGB.rgba>>8&16777215,de=ze.backgroundColorRGB),ze.foregroundColorRGB&&(le=50331648,he=ze.foregroundColorRGB.rgba>>8&16777215,Be=ze.foregroundColorRGB),st=ze.options.layer==="top")}),!st&&Ct&&(de=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,oe=de.rgba>>8&16777215,j=50331648,st=!0,I.selectionForeground&&(le=50331648,he=I.selectionForeground.rgba>>8&16777215,Be=I.selectionForeground)),st&&Y.push("xterm-decoration-top"),j){case 16777216:case 33554432:nt=I.ansi[oe],Y.push(`xterm-bg-${oe}`);break;case 50331648:nt=f.rgba.toColor(oe>>16,oe>>8&255,255&oe),this._addStyle($,`background-color:#${C((oe>>>0).toString(16),"0",6)}`);break;default:ie?(nt=I.foreground,Y.push(`xterm-bg-${r.INVERTED_DEFAULT_COLOR}`)):nt=I.background}switch(de||Se.isDim()&&(de=f.color.multiplyOpacity(nt,.5)),le){case 16777216:case 33554432:Se.isBold()&&he<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(he+=8),this._applyMinimumContrast($,nt,I.ansi[he],Se,de,void 0)||Y.push(`xterm-fg-${he}`);break;case 50331648:let ze=f.rgba.toColor(he>>16&255,he>>8&255,255&he);this._applyMinimumContrast($,nt,ze,Se,de,Be)||this._addStyle($,`color:#${C(he.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,nt,I.foreground,Se,de,void 0)||ie&&Y.push(`xterm-fg-${r.INVERTED_DEFAULT_COLOR}`)}Y.length&&($.className=Y.join(" "),Y.length=0),Jt||Ce||Ze?$.textContent=U:H++,P!==this.defaultSpacing&&($.style.letterSpacing=`${P}px`),R.push($),ve=se}return $&&H&&($.textContent=U),R}_applyMinimumContrast(E,D,g,b,L,S){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,_.excludeFromContrastRatioDemands)(b.getCode()))return!1;let T=this._getContrastCache(b),M;if(L||S||(M=T.getColor(D.rgba,g.rgba)),M===void 0){let w=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);M=f.color.ensureContrastRatio(L||D,S||g,w),T.setColor((L||D).rgba,(S||g).rgba,M??null)}return!!M&&(this._addStyle(E,`color:${M.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,D){E.setAttribute("style",`${E.getAttribute("style")||""}${D};`)}_isCellInSelection(E,D){let g=this._selectionStart,b=this._selectionEnd;return!(!g||!b)&&(this._columnSelectMode?g[0]<=b[0]?E>=g[0]&&D>=g[1]&&E<b[0]&&D<=b[1]:E<g[0]&&D>=g[1]&&E>=b[0]&&D<=b[1]:D>g[1]&&D<b[1]||g[1]===b[1]&&D===g[1]&&E>=g[0]&&E<b[0]||g[1]<b[1]&&D===b[1]&&E<b[0]||g[1]<b[1]&&D===g[1]&&E>=g[0])}};function C(E,D,g){for(;E.length<g;)E=D+E;return E}s.DomRendererRowFactory=y=d([i(1,o.ICharacterJoinerService),i(2,p.IOptionsService),i(3,o.ICoreBrowserService),i(4,p.ICoreService),i(5,p.IDecorationService),i(6,o.IThemeService)],y)},2550:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let d=a.createElement("span"),i=a.createElement("span");i.style.fontWeight="bold";let r=a.createElement("span");r.style.fontStyle="italic";let u=a.createElement("span");u.style.fontWeight="bold",u.style.fontStyle="italic",this._measureElements=[d,i,r,u],this._container.appendChild(d),this._container.appendChild(i),this._container.appendChild(r),this._container.appendChild(u),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,d,i,r){a===this._font&&d===this._fontSize&&i===this._weight&&r===this._weightBold||(this._font=a,this._fontSize=d,this._weight=i,this._weightBold=r,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${r}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${r}`,this.clear())}get(a,d,i){let r=0;if(!d&&!i&&a.length===1&&(r=a.charCodeAt(0))<256)return this._flat[r]!==-9999?this._flat[r]:this._flat[r]=this._measure(a,0);let u=a;d&&(u+="B"),i&&(u+="I");let l=this._holey.get(u);if(l===void 0){let p=0;d&&(p|=1),i&&(p|=2),l=this._measure(a,p),this._holey.set(u,l)}return l}_measure(a,d){let i=this._measureElements[d];return i.textContent=a.repeat(32),i.offsetWidth/32}}},2223:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let d=a(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(v,s)=>{function a(d){return 57508<=d&&d<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},s.excludeFromContrastRatioDemands=function(d){return a(d)||function(i){return 9472<=i&&i<=9631}(d)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let a=this.selectionStart,d=this.selectionEnd;return!(!a||!d)&&(a[1]>d[1]||a[1]===d[1]&&a[0]>d[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;let r=a(2585),u=a(8460),l=a(844),p=s.CharSizeService=class extends l.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,h,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new u.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new f(o,h,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};s.CharSizeService=p=d([i(2,r.IOptionsService)],p);class f{constructor(h,_,m){this._document=h,this._parentElement=_,this._optionsService=m,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let h={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return h.width!==0&&h.height!==0&&(this._result.width=h.width/32,this._result.height=Math.ceil(h.height)),this._result}}},4269:function(v,s,a){var d=this&&this.__decorate||function(h,_,m,y){var C,E=arguments.length,D=E<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(h,_,m,y);else for(var g=h.length-1;g>=0;g--)(C=h[g])&&(D=(E<3?C(D):E>3?C(_,m,D):C(_,m))||D);return E>3&&D&&Object.defineProperty(_,m,D),D},i=this&&this.__param||function(h,_){return function(m,y){_(m,y,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;let r=a(3734),u=a(643),l=a(511),p=a(2585);class f extends r.AttributeData{constructor(_,m,y){super(),this.content=0,this.combinedData="",this.fg=_.fg,this.bg=_.bg,this.combinedData=m,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(_){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=f;let o=s.CharacterJoinerService=class Jk{constructor(_){this._bufferService=_,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new l.CellData}register(_){let m={id:this._nextCharacterJoinerId++,handler:_};return this._characterJoiners.push(m),m.id}deregister(_){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===_)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(_){if(this._characterJoiners.length===0)return[];let m=this._bufferService.buffer.lines.get(_);if(!m||m.length===0)return[];let y=[],C=m.translateToString(!0),E=0,D=0,g=0,b=m.getFg(0),L=m.getBg(0);for(let S=0;S<m.getTrimmedLength();S++)if(m.loadCell(S,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==L){if(S-E>1){let T=this._getJoinedRanges(C,g,D,m,E);for(let M=0;M<T.length;M++)y.push(T[M])}E=S,g=D,b=this._workCell.fg,L=this._workCell.bg}D+=this._workCell.getChars().length||u.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){let S=this._getJoinedRanges(C,g,D,m,E);for(let T=0;T<S.length;T++)y.push(S[T])}return y}_getJoinedRanges(_,m,y,C,E){let D=_.substring(m,y),g=[];try{g=this._characterJoiners[0].handler(D)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{let L=this._characterJoiners[b].handler(D);for(let S=0;S<L.length;S++)Jk._mergeRanges(g,L[S])}catch(L){console.error(L)}return this._stringRangesToCellRanges(g,C,E),g}_stringRangesToCellRanges(_,m,y){let C=0,E=!1,D=0,g=_[C];if(g){for(let b=y;b<this._bufferService.cols;b++){let L=m.getWidth(b),S=m.getString(b).length||u.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!E&&g[0]<=D&&(g[0]=b,E=!0),g[1]<=D){if(g[1]=b,g=_[++C],!g)break;g[0]<=D?(g[0]=b,E=!0):E=!1}D+=S}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(_,m){let y=!1;for(let C=0;C<_.length;C++){let E=_[C];if(y){if(m[1]<=E[0])return _[C-1][1]=m[1],_;if(m[1]<=E[1])return _[C-1][1]=Math.max(m[1],E[1]),_.splice(C,1),_;_.splice(C,1),C--}else{if(m[1]<=E[0])return _.splice(C,0,m),_;if(m[1]<=E[1])return E[0]=Math.min(m[0],E[0]),_;m[0]<E[1]&&(E[0]=Math.min(m[0],E[0]),y=!0)}}return y?_[_.length-1][1]=m[1]:_.push(m),_}};s.CharacterJoinerService=o=d([i(0,p.IBufferService)],o)},5114:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(a,d){this._textarea=a,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(v,s,a){var d=this&&this.__decorate||function(p,f,o,h){var _,m=arguments.length,y=m<3?f:h===null?h=Object.getOwnPropertyDescriptor(f,o):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,f,o,h);else for(var C=p.length-1;C>=0;C--)(_=p[C])&&(y=(m<3?_(y):m>3?_(f,o,y):_(f,o))||y);return m>3&&y&&Object.defineProperty(f,o,y),y},i=this&&this.__param||function(p,f){return function(o,h){f(o,h,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;let r=a(4725),u=a(9806),l=s.MouseService=class{constructor(p,f){this._renderService=p,this._charSizeService=f}getCoords(p,f,o,h,_){return(0,u.getCoords)(window,p,f,o,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,_)}getMouseReportCoords(p,f){let o=(0,u.getCoordsRelativeToElement)(window,p,f);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};s.MouseService=l=d([i(0,r.IRenderService),i(1,r.ICharSizeService)],l)},3230:function(v,s,a){var d=this&&this.__decorate||function(y,C,E,D){var g,b=arguments.length,L=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,C,E,D);else for(var S=y.length-1;S>=0;S--)(g=y[S])&&(L=(b<3?g(L):b>3?g(C,E,L):g(C,E))||L);return b>3&&L&&Object.defineProperty(C,E,L),L},i=this&&this.__param||function(y,C){return function(E,D){C(E,D,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;let r=a(3656),u=a(6193),l=a(5596),p=a(4725),f=a(8460),o=a(844),h=a(7226),_=a(2585),m=s.RenderService=class extends o.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,C,E,D,g,b,L,S){if(super(),this._rowCount=y,this._charSizeService=D,this._renderer=this.register(new o.MutableDisposable),this._pausedResizeTask=new h.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new u.RenderDebouncer(L.window,(T,M)=>this._renderRows(T,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new l.ScreenDprMonitor(L.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(E.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(E.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(E.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register((0,r.addDisposableDomListener)(L.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(S.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in L.window){let T=new L.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});T.observe(C),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,C,E=!1){this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,C,this._rowCount))}_renderRows(y,C){this._renderer.value&&(y=Math.min(y,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(y,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:C}),this._onRender.fire({start:y,end:C}),this._isNextRenderRedrawOnly=!0)}resize(y,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,C;this._renderer.value&&((C=(y=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,C)):this._renderer.value.handleResize(y,C),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,C,E){var D;this._selectionState.start=y,this._selectionState.end=C,this._selectionState.columnSelectMode=E,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(y,C,E)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};s.RenderService=m=d([i(2,_.IOptionsService),i(3,p.ICharSizeService),i(4,_.IDecorationService),i(5,_.IBufferService),i(6,p.ICoreBrowserService),i(7,p.IThemeService)],m)},9312:function(v,s,a){var d=this&&this.__decorate||function(g,b,L,S){var T,M=arguments.length,w=M<3?b:S===null?S=Object.getOwnPropertyDescriptor(b,L):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,b,L,S);else for(var F=g.length-1;F>=0;F--)(T=g[F])&&(w=(M<3?T(w):M>3?T(b,L,w):T(b,L))||w);return M>3&&w&&Object.defineProperty(b,L,w),w},i=this&&this.__param||function(g,b){return function(L,S){b(L,S,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;let r=a(9806),u=a(9504),l=a(456),p=a(4725),f=a(8460),o=a(844),h=a(6114),_=a(4841),m=a(511),y=a(2585),C=String.fromCharCode(160),E=new RegExp(C,"g"),D=s.SelectionService=class extends o.Disposable{constructor(g,b,L,S,T,M,w,F,x){super(),this._element=g,this._screenElement=b,this._linkifier=L,this._bufferService=S,this._coreService=T,this._mouseService=M,this._optionsService=w,this._renderService=F,this._coreBrowserService=x,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new f.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new f.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new f.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=R=>this._handleMouseMove(R),this._mouseUpListener=R=>this._handleMouseUp(R),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(R=>this._handleTrim(R)),this.register(this._bufferService.buffers.onBufferActivate(R=>this._handleBufferActivate(R))),this.enable(),this._model=new l.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!g||!b||g[0]===b[0]&&g[1]===b[1])}get selectionText(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!g||!b)return"";let L=this._bufferService.buffer,S=[];if(this._activeSelectionMode===3){if(g[0]===b[0])return"";let T=g[0]<b[0]?g[0]:b[0],M=g[0]<b[0]?b[0]:g[0];for(let w=g[1];w<=b[1];w++){let F=L.translateBufferLineToString(w,!0,T,M);S.push(F)}}else{let T=g[1]===b[1]?b[0]:void 0;S.push(L.translateBufferLineToString(g[1],!0,g[0],T));for(let M=g[1]+1;M<=b[1]-1;M++){let w=L.lines.get(M),F=L.translateBufferLineToString(M,!0);w?.isWrapped?S[S.length-1]+=F:S.push(F)}if(g[1]!==b[1]){let M=L.lines.get(b[1]),w=L.translateBufferLineToString(b[1],!0,0,b[0]);M&&M.isWrapped?S[S.length-1]+=w:S.push(w)}}return S.map(T=>T.replace(E," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){let b=this._getMouseBufferCoords(g),L=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!!(L&&S&&b)&&this._areCoordsInSelection(b,L,S)}isCellInSelection(g,b){let L=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!(!L||!S)&&this._areCoordsInSelection([g,b],L,S)}_areCoordsInSelection(g,b,L){return g[1]>b[1]&&g[1]<L[1]||b[1]===L[1]&&g[1]===b[1]&&g[0]>=b[0]&&g[0]<L[0]||b[1]<L[1]&&g[1]===L[1]&&g[0]<L[0]||b[1]<L[1]&&g[1]===b[1]&&g[0]>=b[0]}_selectWordAtCursor(g,b){var L,S;let T=(S=(L=this._linkifier.currentLink)===null||L===void 0?void 0:L.link)===null||S===void 0?void 0:S.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let M=this._getMouseBufferCoords(g);return!!M&&(this._selectWordAt(M,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,b){this._model.clearSelection(),g=Math.max(g,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){let b=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(g){let b=(0,r.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1],L=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=L?0:(b>L&&(b-=L),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(g){return h.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){let b=this._getMouseBufferCoords(g);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(g){return g.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;let b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){let S=L.lines.get(this._model.selectionEnd[1]);S&&S.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){let b=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let L=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){let S=(0,u.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(S,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,L=!(!g||!b||g[0]===b[0]&&g[1]===b[1]);L?g&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,b,L)):this._oldHasSelection&&this._fireOnSelectionChange(g,b,L)}_fireOnSelectionChange(g,b,L){this._oldSelectionStart=g,this._oldSelectionEnd=b,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(g,b){let L=b;for(let S=0;b>=S;S++){let T=g.loadCell(S,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:T>1&&b!==S&&(L+=T-1)}return L}setSelection(g,b,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,b],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,b,L=!0,S=!0){if(g[0]>=this._bufferService.cols)return;let T=this._bufferService.buffer,M=T.lines.get(g[1]);if(!M)return;let w=T.translateBufferLineToString(g[1],!1),F=this._convertViewportColToCharacterIndex(M,g[0]),x=F,R=g[0]-F,A=0,I=0,$=0,k=0;if(w.charAt(F)===" "){for(;F>0&&w.charAt(F-1)===" ";)F--;for(;x<w.length&&w.charAt(x+1)===" ";)x++}else{let q=g[0],N=g[0];M.getWidth(q)===0&&(A++,q--),M.getWidth(N)===2&&(I++,N++);let K=M.getString(N).length;for(K>1&&(k+=K-1,x+=K-1);q>0&&F>0&&!this._isCharWordSeparator(M.loadCell(q-1,this._workCell));){M.loadCell(q-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(A++,q--):O>1&&($+=O-1,F-=O-1),F--,q--}for(;N<M.length&&x+1<w.length&&!this._isCharWordSeparator(M.loadCell(N+1,this._workCell));){M.loadCell(N+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,N++):O>1&&(k+=O-1,x+=O-1),x++,N++}}x++;let H=F+R-A+$,U=Math.min(this._bufferService.cols,x-F+A+I-$-k);if(b||w.slice(F,x).trim()!==""){if(L&&H===0&&M.getCodePoint(0)!==32){let q=T.lines.get(g[1]-1);if(q&&M.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){let N=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(N){let K=this._bufferService.cols-N.start;H-=K,U+=K}}}if(S&&H+U===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let q=T.lines.get(g[1]+1);if(q?.isWrapped&&q.getCodePoint(0)!==32){let N=this._getWordAt([0,g[1]+1],!1,!1,!0);N&&(U+=N.length)}}return{start:H,length:U}}}_selectWordAt(g,b){let L=this._getWordAt(g,b);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[L.start,g[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(g){let b=this._getWordAt(g,!0);if(b){let L=g[1];for(;b.start<0;)b.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,L]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){let b=this._bufferService.buffer.getWrappedRangeForLine(g),L={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(L,this._bufferService.cols)}};s.SelectionService=D=d([i(3,y.IBufferService),i(4,y.ICoreService),i(5,p.IMouseService),i(6,y.IOptionsService),i(7,p.IRenderService),i(8,p.ICoreBrowserService)],D)},4725:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;let d=a(8343);s.ICharSizeService=(0,d.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),s.IMouseService=(0,d.createDecorator)("MouseService"),s.IRenderService=(0,d.createDecorator)("RenderService"),s.ISelectionService=(0,d.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(v,s,a){var d=this&&this.__decorate||function(D,g,b,L){var S,T=arguments.length,M=T<3?g:L===null?L=Object.getOwnPropertyDescriptor(g,b):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,L);else for(var w=D.length-1;w>=0;w--)(S=D[w])&&(M=(T<3?S(M):T>3?S(g,b,M):S(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M},i=this&&this.__param||function(D,g){return function(b,L){g(b,L,D)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;let r=a(7239),u=a(8055),l=a(8460),p=a(844),f=a(2585),o=u.css.toColor("#ffffff"),h=u.css.toColor("#000000"),_=u.css.toColor("#ffffff"),m=u.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[u.css.toColor("#2e3436"),u.css.toColor("#cc0000"),u.css.toColor("#4e9a06"),u.css.toColor("#c4a000"),u.css.toColor("#3465a4"),u.css.toColor("#75507b"),u.css.toColor("#06989a"),u.css.toColor("#d3d7cf"),u.css.toColor("#555753"),u.css.toColor("#ef2929"),u.css.toColor("#8ae234"),u.css.toColor("#fce94f"),u.css.toColor("#729fcf"),u.css.toColor("#ad7fa8"),u.css.toColor("#34e2e2"),u.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let b=0;b<216;b++){let L=g[b/36%6|0],S=g[b/6%6|0],T=g[b%6];D.push({css:u.channels.toCss(L,S,T),rgba:u.channels.toRgba(L,S,T)})}for(let b=0;b<24;b++){let L=8+10*b;D.push({css:u.channels.toCss(L,L,L),rgba:u.channels.toRgba(L,L,L)})}return D})());let C=s.ThemeService=class extends p.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new r.ColorContrastCache,this._halfContrastCache=new r.ColorContrastCache,this._onChangeColors=this.register(new l.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:h,cursor:_,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:u.color.blend(h,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:u.color.blend(h,y),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let g=this._colors;if(g.foreground=E(D.foreground,o),g.background=E(D.background,h),g.cursor=E(D.cursor,_),g.cursorAccent=E(D.cursorAccent,m),g.selectionBackgroundTransparent=E(D.selectionBackground,y),g.selectionBackgroundOpaque=u.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=E(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=u.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?E(D.selectionForeground,u.NULL_COLOR):void 0,g.selectionForeground===u.NULL_COLOR&&(g.selectionForeground=void 0),u.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=u.color.opacity(g.selectionBackgroundTransparent,.3)),u.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=u.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=s.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=E(D.black,s.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=E(D.red,s.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=E(D.green,s.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=E(D.yellow,s.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=E(D.blue,s.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=E(D.magenta,s.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=E(D.cyan,s.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=E(D.white,s.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=E(D.brightBlack,s.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=E(D.brightRed,s.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=E(D.brightGreen,s.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=E(D.brightYellow,s.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=E(D.brightBlue,s.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=E(D.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=E(D.brightCyan,s.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=E(D.brightWhite,s.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let b=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let L=0;L<b;L++)g.ansi[L+16]=E(D.extendedAnsi[L],s.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(D,g){if(D!==void 0)try{return u.css.toColor(D)}catch{}return g}s.ThemeService=C=d([i(0,f.IOptionsService)],C)},6349:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;let d=a(8460),i=a(844);class r extends i.Disposable{constructor(l){super(),this._maxLength=l,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(l){if(this._maxLength===l)return;let p=new Array(l);for(let f=0;f<Math.min(l,this.length);f++)p[f]=this._array[this._getCyclicIndex(f)];this._array=p,this._maxLength=l,this._startIndex=0}get length(){return this._length}set length(l){if(l>this._length)for(let p=this._length;p<l;p++)this._array[p]=void 0;this._length=l}get(l){return this._array[this._getCyclicIndex(l)]}set(l,p){this._array[this._getCyclicIndex(l)]=p}push(l){this._array[this._getCyclicIndex(this._length)]=l,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(l,p,...f){if(p){for(let o=l;o<this._length-p;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+p)];this._length-=p,this.onDeleteEmitter.fire({index:l,amount:p})}for(let o=this._length-1;o>=l;o--)this._array[this._getCyclicIndex(o+f.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<f.length;o++)this._array[this._getCyclicIndex(l+o)]=f[o];if(f.length&&this.onInsertEmitter.fire({index:l,amount:f.length}),this._length+f.length>this._maxLength){let o=this._length+f.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=f.length}trimStart(l){l>this._length&&(l=this._length),this._startIndex+=l,this._length-=l,this.onTrimEmitter.fire(l)}shiftElements(l,p,f){if(!(p<=0)){if(l<0||l>=this._length)throw new Error("start argument out of range");if(l+f<0)throw new Error("Cannot shift elements in list beyond index 0");if(f>0){for(let h=p-1;h>=0;h--)this.set(l+h+f,this.get(l+h));let o=l+p+f-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<p;o++)this.set(l+o+f,this.get(l+o))}}_getCyclicIndex(l){return(this._startIndex+l)%this._maxLength}}s.CircularList=r},1439:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function a(d,i=5){if(typeof d!="object")return d;let r=Array.isArray(d)?[]:{};for(let u in d)r[u]=i<=1?d[u]:d[u]&&a(d[u],i-1);return r}},8055:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let d=a(6114),i=0,r=0,u=0,l=0;var p,f,o,h,_;function m(C){let E=C.toString(16);return E.length<2?"0"+E:E}function y(C,E){return C<E?(E+.05)/(C+.05):(C+.05)/(E+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(E,D,g,b){return b!==void 0?`#${m(E)}${m(D)}${m(g)}${m(b)}`:`#${m(E)}${m(D)}${m(g)}`},C.toRgba=function(E,D,g,b=255){return(E<<24|D<<16|g<<8|b)>>>0}}(p||(s.channels=p={})),function(C){function E(D,g){return l=Math.round(255*g),[i,r,u]=_.toChannels(D.rgba),{css:p.toCss(i,r,u,l),rgba:p.toRgba(i,r,u,l)}}C.blend=function(D,g){if(l=(255&g.rgba)/255,l===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,L=g.rgba>>16&255,S=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return i=T+Math.round((b-T)*l),r=M+Math.round((L-M)*l),u=w+Math.round((S-w)*l),{css:p.toCss(i,r,u),rgba:p.toRgba(i,r,u)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let L=_.ensureContrastRatio(D.rgba,g.rgba,b);if(L)return _.toColor(L>>24&255,L>>16&255,L>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[i,r,u]=_.toChannels(g),{css:p.toCss(i,r,u),rgba:g}},C.opacity=E,C.multiplyOpacity=function(D,g){return l=255&D.rgba,E(D,l*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(f||(s.color=f={})),function(C){let E,D;if(!d.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(E=b,E.globalCompositeOperation="copy",D=E.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),_.toColor(i,r,u);case 5:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),l=parseInt(g.slice(4,5).repeat(2),16),_.toColor(i,r,u,l);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return i=parseInt(b[1]),r=parseInt(b[2]),u=parseInt(b[3]),l=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),_.toColor(i,r,u,l);if(!E||!D)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=D,E.fillStyle=g,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[i,r,u,l]=E.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(i,r,u,l),css:g}}}(o||(s.css=o={})),function(C){function E(D,g,b){let L=D/255,S=g/255,T=b/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return E(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=E}(h||(s.rgb=h={})),function(C){function E(g,b,L){let S=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));for(;R<L&&(w>0||F>0||x>0);)w-=Math.max(0,Math.ceil(.1*w)),F-=Math.max(0,Math.ceil(.1*F)),x-=Math.max(0,Math.ceil(.1*x)),R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));return(w<<24|F<<16|x<<8|255)>>>0}function D(g,b,L){let S=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));for(;R<L&&(w<255||F<255||x<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),F=Math.min(255,F+Math.ceil(.1*(255-F))),x=Math.min(255,x+Math.ceil(.1*(255-x))),R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));return(w<<24|F<<16|x<<8|255)>>>0}C.ensureContrastRatio=function(g,b,L){let S=h.relativeLuminance(g>>8),T=h.relativeLuminance(b>>8);if(y(S,T)<L){if(T<S){let F=E(g,b,L),x=y(S,h.relativeLuminance(F>>8));if(x<L){let R=D(g,b,L);return x>y(S,h.relativeLuminance(R>>8))?F:R}return F}let M=D(g,b,L),w=y(S,h.relativeLuminance(M>>8));if(w<L){let F=E(g,b,L);return w>y(S,h.relativeLuminance(F>>8))?M:F}return M}},C.reduceLuminance=E,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,L,S){return{css:p.toCss(g,b,L,S),rgba:p.toRgba(g,b,L,S)}}}(_||(s.rgba=_={})),s.toPaddedHex=m,s.contrastRatio=y},8969:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;let d=a(844),i=a(2585),r=a(4348),u=a(7866),l=a(744),p=a(7302),f=a(6975),o=a(8460),h=a(1753),_=a(1480),m=a(7994),y=a(9282),C=a(5435),E=a(5981),D=a(2660),g=!1;class b extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(S=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(S.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(S){for(let T in S)this.optionsService.options[T]=S[T]}constructor(S){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new r.InstantiationService,this.optionsService=this.register(new p.OptionsService(S)),this._instantiationService.setService(i.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(l.BufferService)),this._instantiationService.setService(i.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(u.LogService)),this._instantiationService.setService(i.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(f.CoreService)),this._instantiationService.setService(i.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(i.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(i.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(m.CharsetService),this._instantiationService.setService(i.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(i.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new E.WriteBuffer((T,M)=>this._inputHandler.parse(T,M))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(S,T){this._writeBuffer.write(S,T)}writeSync(S,T){this._logService.logLevel<=i.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(S,T)}resize(S,T){isNaN(S)||isNaN(T)||(S=Math.max(S,l.MINIMUM_COLS),T=Math.max(T,l.MINIMUM_ROWS),this._bufferService.resize(S,T))}scroll(S,T=!1){this._bufferService.scroll(S,T)}scrollLines(S,T,M){this._bufferService.scrollLines(S,T,M)}scrollPages(S){this.scrollLines(S*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(S){let T=S-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(S,T){return this._inputHandler.registerEscHandler(S,T)}registerDcsHandler(S,T){return this._inputHandler.registerDcsHandler(S,T)}registerCsiHandler(S,T){return this._inputHandler.registerCsiHandler(S,T)}registerOscHandler(S,T){return this._inputHandler.registerOscHandler(S,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let S=!1,T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?S=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(S=!0),S?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let S=[];S.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),S.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(let T of S)T.dispose()})}}}s.CoreTerminal=b},8460:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===a)return void this._listeners.splice(d,1)}}})),this._event}fire(a,d){let i=[];for(let r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(let r=0;r<i.length;r++)i[r].call(void 0,a,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,d){return a(i=>d.fire(i))}},5435:function(v,s,a){var d=this&&this.__decorate||function(R,A,I,$){var k,H=arguments.length,U=H<3?A:$===null?$=Object.getOwnPropertyDescriptor(A,I):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(R,A,I,$);else for(var q=R.length-1;q>=0;q--)(k=R[q])&&(U=(H<3?k(U):H>3?k(A,I,U):k(A,I))||U);return H>3&&U&&Object.defineProperty(A,I,U),U},i=this&&this.__param||function(R,A){return function(I,$){A(I,$,R)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;let r=a(2584),u=a(7116),l=a(2015),p=a(844),f=a(482),o=a(8437),h=a(8460),_=a(643),m=a(511),y=a(3734),C=a(2585),E=a(6242),D=a(6351),g=a(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},L=131072;function S(R,A){if(R>24)return A.setWinLines||!1;switch(R){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var T;(function(R){R[R.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",R[R.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(s.WindowsOptionsReportType=T={}));let M=0;class w extends p.Disposable{getAttrData(){return this._curAttrData}constructor(A,I,$,k,H,U,q,N,K=new l.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=I,this._coreService=$,this._logService=k,this._optionsService=H,this._oscLinkService=U,this._coreMouseService=q,this._unicodeService=N,this._parser=K,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new f.StringToUtf32,this._utf8Decoder=new f.Utf8ToUtf32,this._workCell=new m.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,B)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:B.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,B,W)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:B,data:W})}),this._parser.setDcsHandlerFallback((O,B,W)=>{B==="HOOK"&&(W=W.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:B,payload:W})}),this._parser.setPrintHandler((O,B,W)=>this.print(O,B,W)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(r.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(r.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(r.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(r.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(r.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(r.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(r.C1.IND,()=>this.index()),this._parser.setExecuteHandler(r.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(r.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new E.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new E.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new E.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new E.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new E.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new E.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new E.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new E.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new E.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new E.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new E.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let O in u.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((O,B)=>this.requestStatusString(O,B)))}_preserveStack(A,I,$,k){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=$,this._parseStack.position=k}_logSlowResolvingAsync(A){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([A,new Promise((I,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,I){let $,k=this._activeBuffer.x,H=this._activeBuffer.y,U=0,q=this._parseStack.paused;if(q){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync($),$;k=this._parseStack.cursorStartX,H=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>L&&(U=this._parseStack.position+L)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,N=>String.fromCharCode(N)).join("")}"`),typeof A=="string"?A.split("").map(N=>N.charCodeAt(0)):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<L&&(this._parseBuffer=new Uint32Array(Math.min(A.length,L))),q||this._dirtyRowTracker.clearRange(),A.length>L)for(let N=U;N<A.length;N+=L){let K=N+L<A.length?N+L:A.length,O=typeof A=="string"?this._stringDecoder.decode(A.substring(N,K),this._parseBuffer):this._utf8Decoder.decode(A.subarray(N,K),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,O))return this._preserveStack(k,H,O,N),this._logSlowResolvingAsync($),$}else if(!q){let N=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,N))return this._preserveStack(k,H,N,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===k&&this._activeBuffer.y===H||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,I,$){let k,H,U=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,N=this._bufferService.cols,K=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,B=this._curAttrData,W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-I>0&&W.getWidth(this._activeBuffer.x-1)===2&&W.setCellFromCodePoint(this._activeBuffer.x-1,0,1,B.fg,B.bg,B.extended);for(let P=I;P<$;++P){if(k=A[P],H=this._unicodeService.wcwidth(k),k<127&&U){let Y=U[String.fromCharCode(k)];Y&&(k=Y.charCodeAt(0))}if(q&&this._onA11yChar.fire((0,f.stringFromCodePoint)(k)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),H||!this._activeBuffer.x){if(this._activeBuffer.x+H-1>=N){if(K){for(;this._activeBuffer.x<N;)W.setCellFromCodePoint(this._activeBuffer.x++,0,1,B.fg,B.bg,B.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=N-1,H===2)continue}if(O&&(W.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(B),B),W.getWidth(N-1)===2&&W.setCellFromCodePoint(N-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,B.fg,B.bg,B.extended)),W.setCellFromCodePoint(this._activeBuffer.x++,k,H,B.fg,B.bg,B.extended),H>0)for(;--H;)W.setCellFromCodePoint(this._activeBuffer.x++,0,0,B.fg,B.bg,B.extended)}else W.getWidth(this._activeBuffer.x-1)?W.addCodepointToCell(this._activeBuffer.x-1,k):W.addCodepointToCell(this._activeBuffer.x-2,k)}$-I>0&&(W.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<N&&$-I>0&&W.getWidth(this._activeBuffer.x)===0&&!W.hasContent(this._activeBuffer.x)&&W.setCellFromCodePoint(this._activeBuffer.x,0,1,B.fg,B.bg,B.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,I){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,I):this._parser.registerCsiHandler(A,$=>!S($.params[0],this._optionsService.rawOptions.windowOptions)||I($))}registerDcsHandler(A,I){return this._parser.registerDcsHandler(A,new D.DcsHandler(I))}registerEscHandler(A,I){return this._parser.registerEscHandler(A,I)}registerOscHandler(A,I){return this._parser.registerOscHandler(A,new E.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=A,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+I)}cursorUp(A){let I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){let I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){let I=A.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){let I=A.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,I,$,k=!1,H=!1){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);U.replaceCells(I,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),H),k&&(U.isWrapped=!1)}_resetBufferLine(A,I=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),$.isWrapped=!1)}eraseInDisplay(A,I=!1){let $;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);$<this._bufferService.rows;$++)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 3:let k=this._activeBuffer.lines.length-this._bufferService.rows;k>0&&(this._activeBuffer.lines.trimStart(k),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-k,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-k,0),this._onScroll.fire(0))}return!0}eraseInLine(A,I=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-k+1;for(;I--;)this._activeBuffer.lines.splice(H-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,k;for(k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,k=this._bufferService.rows-1+this._activeBuffer.ybase-k;I--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(k,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;let I=A.params[0]||1,$=new Uint32Array(I);for(let k=0;k<I;++k)$[k]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(r.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(r.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(r.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(r.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(r.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,u.DEFAULT_CHARSET),this._charsetService.setgCharset(1,u.DEFAULT_CHARSET),this._charsetService.setgCharset(2,u.DEFAULT_CHARSET),this._charsetService.setgCharset(3,u.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,I){let $=this._coreService.decPrivateModes,{activeProtocol:k,activeEncoding:H}=this._coreMouseService,U=this._coreService,{buffers:q,cols:N}=this._bufferService,{active:K,alt:O}=q,B=this._optionsService.rawOptions,W=ve=>ve?1:2,P=A.params[0];return Y=P,J=I?P===2?4:P===4?W(U.modes.insertMode):P===12?3:P===20?W(B.convertEol):0:P===1?W($.applicationCursorKeys):P===3?B.windowOptions.setWinLines?N===80?2:N===132?1:0:0:P===6?W($.origin):P===7?W($.wraparound):P===8?3:P===9?W(k==="X10"):P===12?W(B.cursorBlink):P===25?W(!U.isCursorHidden):P===45?W($.reverseWraparound):P===66?W($.applicationKeypad):P===67?4:P===1e3?W(k==="VT200"):P===1002?W(k==="DRAG"):P===1003?W(k==="ANY"):P===1004?W($.sendFocus):P===1005?4:P===1006?W(H==="SGR"):P===1015?4:P===1016?W(H==="SGR_PIXELS"):P===1048?1:P===47||P===1047||P===1049?W(K===O):P===2004?W($.bracketedPasteMode):0,U.triggerDataEvent(`${r.C0.ESC}[${I?"":"?"}${Y};${J}$y`),!0;var Y,J}_updateAttrColor(A,I,$,k,H){return I===2?(A|=50331648,A&=-16777216,A|=y.AttributeData.fromColorRGB([$,k,H])):I===5&&(A&=-50331904,A|=33554432|255&$),A}_extractColor(A,I,$){let k=[0,0,-1,0,0,0],H=0,U=0;do{if(k[U+H]=A.params[I+U],A.hasSubParams(I+U)){let q=A.getSubParams(I+U),N=0;do k[1]===5&&(H=1),k[U+N+1+H]=q[N];while(++N<q.length&&N+U+1+H<k.length);break}if(k[1]===5&&U+H>=2||k[1]===2&&U+H>=5)break;k[1]&&(H=1)}while(++U+I<A.length&&U+H<k.length);for(let q=2;q<k.length;++q)k[q]===-1&&(k[q]=0);switch(k[0]){case 38:$.fg=this._updateAttrColor($.fg,k[1],k[3],k[4],k[5]);break;case 48:$.bg=this._updateAttrColor($.bg,k[1],k[3],k[4],k[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,k[1],k[3],k[4],k[5])}return U}_processUnderline(A,I){I.extended=I.extended.clone(),(!~A||A>5)&&(A=1),I.extended.underlineStyle=A,I.fg|=268435456,A===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(A){A.fg=o.DEFAULT_ATTR_DATA.fg,A.bg=o.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;let I=A.length,$,k=this._curAttrData;for(let H=0;H<I;H++)$=A.params[H],$>=30&&$<=37?(k.fg&=-50331904,k.fg|=16777216|$-30):$>=40&&$<=47?(k.bg&=-50331904,k.bg|=16777216|$-40):$>=90&&$<=97?(k.fg&=-50331904,k.fg|=16777224|$-90):$>=100&&$<=107?(k.bg&=-50331904,k.bg|=16777224|$-100):$===0?this._processSGR0(k):$===1?k.fg|=134217728:$===3?k.bg|=67108864:$===4?(k.fg|=268435456,this._processUnderline(A.hasSubParams(H)?A.getSubParams(H)[0]:1,k)):$===5?k.fg|=536870912:$===7?k.fg|=67108864:$===8?k.fg|=1073741824:$===9?k.fg|=2147483648:$===2?k.bg|=134217728:$===21?this._processUnderline(2,k):$===22?(k.fg&=-134217729,k.bg&=-134217729):$===23?k.bg&=-67108865:$===24?(k.fg&=-268435457,this._processUnderline(0,k)):$===25?k.fg&=-536870913:$===27?k.fg&=-67108865:$===28?k.fg&=-1073741825:$===29?k.fg&=2147483647:$===39?(k.fg&=-67108864,k.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):$===49?(k.bg&=-67108864,k.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?H+=this._extractColor(A,H,k):$===53?k.bg|=1073741824:$===55?k.bg&=-1073741825:$===59?(k.extended=k.extended.clone(),k.extended.underlineColor=-1,k.updateExtended()):$===100?(k.fg&=-67108864,k.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,k.bg&=-67108864,k.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${r.C0.ESC}[0n`);break;case 6:let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${r.C0.ESC}[${I};${$}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${r.C0.ESC}[?${I};${$}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){let I=A.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let $=I%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(A){let I=A.params[0]||1,$;return(A.length<2||($=A.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(A){if(!S(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;let I=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${r.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){let I=[],$=A.split(";");for(;$.length>1;){let k=$.shift(),H=$.shift();if(/^\d+$/.exec(k)){let U=parseInt(k);if(x(U))if(H==="?")I.push({type:0,index:U});else{let q=(0,g.parseColor)(H);q&&I.push({type:1,index:U,color:q})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(A){let I=A.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(A,I){this._getCurrentLinkId()&&this._finishHyperlink();let $=A.split(":"),k,H=$.findIndex(U=>U.startsWith("id="));return H!==-1&&(k=$[H].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:k,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,I){let $=A.split(";");for(let k=0;k<$.length&&!(I>=this._specialColors.length);++k,++I)if($[k]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{let H=(0,g.parseColor)($[k]);H&&this._onColor.fire([{type:1,index:this._specialColors[I],color:H}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;let I=[],$=A.split(";");for(let k=0;k<$.length;++k)if(/^\d+$/.exec($[k])){let H=parseInt($[k]);x(H)&&I.push({type:2,index:H})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,u.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(b[A[0]],u.CHARSETS[A[1]]||u.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){let A=new m.CellData;A.content=4194304|"E".charCodeAt(0),A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){let $=this._activeBuffer.ybase+this._activeBuffer.y+I,k=this._activeBuffer.lines.get($);k&&(k.fill(A),k.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,I){let $=this._bufferService.buffer,k=this._optionsService.rawOptions;return(H=>(this._coreService.triggerDataEvent(`${r.C0.ESC}${H}${r.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[k.cursorStyle]-(k.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,I){this._dirtyRowTracker.markRangeDirty(A,I)}}s.InputHandler=w;let F=class{constructor(R){this._bufferService=R,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(R){R<this.start?this.start=R:R>this.end&&(this.end=R)}markRangeDirty(R,A){R>A&&(M=R,R=A,A=M),R<this.start&&(this.start=R),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function x(R){return 0<=R&&R<256}F=d([i(0,C.IBufferService)],F)},844:(v,s)=>{function a(d){for(let i of d)i.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){let i=this._disposables.indexOf(d);i!==-1&&this._disposables.splice(i,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var i;this._isDisposed||d===this._value||((i=this._value)===null||i===void 0||i.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=a,s.getDisposeArrayDisposable=function(d){return{dispose:()=>a(d)}}},1505:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(i,r,u){this._data[i]||(this._data[i]={}),this._data[i][r]=u}get(i,r){return this._data[i]?this._data[i][r]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(d,i,r,u,l){this._data.get(d,i)||this._data.set(d,i,new a),this._data.get(d,i).set(r,u,l)}get(d,i,r,u){var l;return(l=this._data.get(d,i))===null||l===void 0?void 0:l.get(r,u)}clear(){this._data.clear()}}},6114:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";let a=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;let i=a.match(/Version\/(\d+)/);return i===null||i.length<2?0:parseInt(i[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},6106:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let a=0;s.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(a=this._search(this._getKey(d)),this._array.splice(a,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;let i=this._getKey(d);if(i===void 0||(a=this._search(i),a===-1)||this._getKey(this._array[a])!==i)return!1;do if(this._array[a]===d)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===i);return!1}*getKeyIterator(d){if(this._array.length!==0&&(a=this._search(d),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===d))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===d)}forEachByKey(d,i){if(this._array.length!==0&&(a=this._search(d),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===d))do i(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===d)}values(){return[...this._array].values()}_search(d){let i=0,r=this._array.length-1;for(;r>=i;){let u=i+r>>1,l=this._getKey(this._array[u]);if(l>d)r=u-1;else{if(!(l<d)){for(;u>0&&this._getKey(this._array[u-1])===d;)u--;return u}i=u+1}}return i}}},7226:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let d=a(6114);class i{constructor(){this._tasks=[],this._i=0}enqueue(l){this._tasks.push(l),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(l){this._idleCallback=void 0;let p=0,f=0,o=l.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),f=Math.max(p,f),h=l.timeRemaining(),1.5*f>h)return o-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-p))}ms`),void this._start();o=h}this.clear()}}class r extends i{_requestCallback(l){return setTimeout(()=>l(this._createDeadline(16)))}_cancelCallback(l){clearTimeout(l)}_createDeadline(l){let p=Date.now()+l;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}s.PriorityTaskQueue=r,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends i{_requestCallback(u){return requestIdleCallback(u)}_cancelCallback(u){cancelIdleCallback(u)}}:r,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(u){this._queue.clear(),this._queue.enqueue(u)}flush(){this._queue.flush()}}},9282:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;let d=a(643);s.updateWindowsModeWrappedState=function(i){let r=i.buffer.lines.get(i.buffer.ybase+i.buffer.y-1),u=r?.get(i.cols-1),l=i.buffer.lines.get(i.buffer.ybase+i.buffer.y);l&&u&&(l.isWrapped=u[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&u[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(r){return[r>>>16&255,r>>>8&255,255&r]}static fromColorRGB(r){return(255&r[0])<<16|(255&r[1])<<8|255&r[2]}clone(){let r=new a;return r.fg=this.fg,r.bg=this.bg,r.extended=this.extended.clone(),r}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(r){this._ext=r}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(r){this._ext&=-469762049,this._ext|=r<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(r){this._ext&=-67108864,this._ext|=67108863&r}get urlId(){return this._urlId}set urlId(r){this._urlId=r}constructor(r=0,u=0){this._ext=0,this._urlId=0,this._ext=r,this._urlId=u}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},9092:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;let d=a(6349),i=a(7226),r=a(3734),u=a(8437),l=a(4634),p=a(511),f=a(643),o=a(4863),h=a(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(_,m,y){this._hasScrollback=_,this._optionsService=m,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=u.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=p.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=p.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new i.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(_){return _?(this._nullCell.fg=_.fg,this._nullCell.bg=_.bg,this._nullCell.extended=_.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new r.ExtendedAttrs),this._nullCell}getWhitespaceCell(_){return _?(this._whitespaceCell.fg=_.fg,this._whitespaceCell.bg=_.bg,this._whitespaceCell.extended=_.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new r.ExtendedAttrs),this._whitespaceCell}getBlankLine(_,m){return new u.BufferLine(this._bufferService.cols,this.getNullCell(_),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let _=this.ybase+this.y-this.ydisp;return _>=0&&_<this._rows}_getCorrectBufferLength(_){if(!this._hasScrollback)return _;let m=_+this._optionsService.rawOptions.scrollback;return m>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:m}fillViewportRows(_){if(this.lines.length===0){_===void 0&&(_=u.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(_))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(_,m){let y=this.getNullCell(u.DEFAULT_ATTR_DATA),C=0,E=this._getCorrectBufferLength(m);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<_)for(let g=0;g<this.lines.length;g++)C+=+this.lines.get(g).resize(_,y);let D=0;if(this._rows<m)for(let g=this._rows;g<m;g++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new u.BufferLine(_,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new u.BufferLine(_,y)));else for(let g=this._rows;g>m;g--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){let g=this.lines.length-E;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=E}this.x=Math.min(this.x,_-1),this.y=Math.min(this.y,m-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,_-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(_,m),this._cols>_))for(let D=0;D<this.lines.length;D++)C+=+this.lines.get(D).resize(_,y);this._cols=_,this._rows=m,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let _=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,_=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return _}get _isReflowEnabled(){let _=this._optionsService.rawOptions.windowsPty;return _&&_.buildNumber?this._hasScrollback&&_.backend==="conpty"&&_.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(_,m){this._cols!==_&&(_>this._cols?this._reflowLarger(_,m):this._reflowSmaller(_,m))}_reflowLarger(_,m){let y=(0,l.reflowLargerGetLinesToRemove)(this.lines,this._cols,_,this.ybase+this.y,this.getNullCell(u.DEFAULT_ATTR_DATA));if(y.length>0){let C=(0,l.reflowLargerCreateNewLayout)(this.lines,y);(0,l.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(_,m,C.countRemoved)}}_reflowLargerAdjustViewport(_,m,y){let C=this.getNullCell(u.DEFAULT_ATTR_DATA),E=y;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new u.BufferLine(_,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(_,m){let y=this.getNullCell(u.DEFAULT_ATTR_DATA),C=[],E=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=_)continue;let b=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),b.unshift(g);let L=this.ybase+this.y;if(L>=D&&L<D+b.length)continue;let S=b[b.length-1].getTrimmedLength(),T=(0,l.reflowSmallerGetNewLineLengths)(b,this._cols,_),M=T.length-b.length,w;w=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let F=[];for(let k=0;k<M;k++){let H=this.getBlankLine(u.DEFAULT_ATTR_DATA,!0);F.push(H)}F.length>0&&(C.push({start:D+b.length+E,newLines:F}),E+=F.length),b.push(...F);let x=T.length-1,R=T[x];R===0&&(x--,R=T[x]);let A=b.length-M-1,I=S;for(;A>=0;){let k=Math.min(I,R);if(b[x]===void 0)break;if(b[x].copyCellsFrom(b[A],I-k,R-k,k,!0),R-=k,R===0&&(x--,R=T[x]),I-=k,I===0){A--;let H=Math.max(A,0);I=(0,l.getWrappedLineTrimmedLength)(b,H,this._cols)}}for(let k=0;k<b.length;k++)T[k]<_&&b[k].setCell(T[k],y);let $=M-w;for(;$-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+m-1)}if(C.length>0){let D=[],g=[];for(let x=0;x<this.lines.length;x++)g.push(this.lines.get(x));let b=this.lines.length,L=b-1,S=0,T=C[S];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let M=0;for(let x=Math.min(this.lines.maxLength-1,b+E-1);x>=0;x--)if(T&&T.start>L+M){for(let R=T.newLines.length-1;R>=0;R--)this.lines.set(x--,T.newLines[R]);x++,D.push({index:L+1,amount:T.newLines.length}),M+=T.newLines.length,T=C[++S]}else this.lines.set(x,g[L--]);let w=0;for(let x=D.length-1;x>=0;x--)D[x].index+=w,this.lines.onInsertEmitter.fire(D[x]),w+=D[x].amount;let F=Math.max(0,b+E-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(_,m,y=0,C){let E=this.lines.get(_);return E?E.translateToString(m,y,C):""}getWrappedRangeForLine(_){let m=_,y=_;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:m,last:y}}setupTabStops(_){for(_!=null?this.tabs[_]||(_=this.prevStop(_)):(this.tabs={},_=0);_<this._cols;_+=this._optionsService.rawOptions.tabStopWidth)this.tabs[_]=!0}prevStop(_){for(_==null&&(_=this.x);!this.tabs[--_]&&_>0;);return _>=this._cols?this._cols-1:_<0?0:_}nextStop(_){for(_==null&&(_=this.x);!this.tabs[++_]&&_<this._cols;);return _>=this._cols?this._cols-1:_<0?0:_}clearMarkers(_){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===_&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].dispose(),this.markers.splice(_--,1);this._isClearing=!1}addMarker(_){let m=new o.Marker(_);return this.markers.push(m),m.register(this.lines.onTrim(y=>{m.line-=y,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(y=>{m.line>=y.index&&(m.line+=y.amount)})),m.register(this.lines.onDelete(y=>{m.line>=y.index&&m.line<y.index+y.amount&&m.dispose(),m.line>y.index&&(m.line-=y.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(_){this._isClearing||this.markers.splice(this.markers.indexOf(_),1)}}},8437:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;let d=a(3734),i=a(511),r=a(643),u=a(482);s.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let l=0;class p{constructor(o,h,_=!1){this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);let m=h||i.CellData.fromCharData([0,r.NULL_CELL_CHAR,r.NULL_CELL_WIDTH,r.NULL_CELL_CODE]);for(let y=0;y<o;++y)this.setCell(y,m);this.length=o}get(o){let h=this._data[3*o+0],_=2097151&h;return[this._data[3*o+1],2097152&h?this._combined[o]:_?(0,u.stringFromCodePoint)(_):"",h>>22,2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):_]}set(o,h){this._data[3*o+1]=h[r.CHAR_DATA_ATTR_INDEX],h[r.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=h[1],this._data[3*o+0]=2097152|o|h[r.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=h[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[r.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){let h=this._data[3*o+0];return 2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&h}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){let h=this._data[3*o+0];return 2097152&h?this._combined[o]:2097151&h?(0,u.stringFromCodePoint)(2097151&h):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,h){return l=3*o,h.content=this._data[l+0],h.fg=this._data[l+1],h.bg=this._data[l+2],2097152&h.content&&(h.combinedData=this._combined[o]),268435456&h.bg&&(h.extended=this._extendedAttrs[o]),h}setCell(o,h){2097152&h.content&&(this._combined[o]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[o]=h.extended),this._data[3*o+0]=h.content,this._data[3*o+1]=h.fg,this._data[3*o+2]=h.bg}setCellFromCodePoint(o,h,_,m,y,C){268435456&y&&(this._extendedAttrs[o]=C),this._data[3*o+0]=h|_<<22,this._data[3*o+1]=m,this._data[3*o+2]=y}addCodepointToCell(o,h){let _=this._data[3*o+0];2097152&_?this._combined[o]+=(0,u.stringFromCodePoint)(h):(2097151&_?(this._combined[o]=(0,u.stringFromCodePoint)(2097151&_)+(0,u.stringFromCodePoint)(h),_&=-2097152,_|=2097152):_=h|4194304,this._data[3*o+0]=_)}insertCells(o,h,_,m){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs),h<this.length-o){let y=new i.CellData;for(let C=this.length-o-h-1;C>=0;--C)this.setCell(o+h+C,this.loadCell(o+C,y));for(let C=0;C<h;++C)this.setCell(o+C,_)}else for(let y=o;y<this.length;++y)this.setCell(y,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs)}deleteCells(o,h,_,m){if(o%=this.length,h<this.length-o){let y=new i.CellData;for(let C=0;C<this.length-o-h;++C)this.setCell(o+C,this.loadCell(o+h+C,y));for(let C=this.length-h;C<this.length;++C)this.setCell(C,_)}else for(let y=o;y<this.length;++y)this.setCell(y,_);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs)}replaceCells(o,h,_,m,y=!1){if(y)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodePoint(h,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs);o<h&&o<this.length;)this.isProtected(o)||this.setCell(o,_),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs);o<h&&o<this.length;)this.setCell(o++,_)}resize(o,h){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let _=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*_)this._data=new Uint32Array(this._data.buffer,0,_);else{let m=new Uint32Array(_);m.set(this._data),this._data=m}for(let m=this.length;m<o;++m)this.setCell(m,h)}else{this._data=this._data.subarray(0,_);let m=Object.keys(this._combined);for(let C=0;C<m.length;C++){let E=parseInt(m[C],10);E>=o&&delete this._combined[E]}let y=Object.keys(this._extendedAttrs);for(let C=0;C<y.length;C++){let E=parseInt(y[C],10);E>=o&&delete this._extendedAttrs[E]}}return this.length=o,4*_*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,h=!1){if(h)for(let _=0;_<this.length;++_)this.isProtected(_)||this.setCell(_,o);else{this._combined={},this._extendedAttrs={};for(let _=0;_<this.length;++_)this.setCell(_,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(let h in o._combined)this._combined[h]=o._combined[h];this._extendedAttrs={};for(let h in o._extendedAttrs)this._extendedAttrs[h]=o._extendedAttrs[h];this.isWrapped=o.isWrapped}clone(){let o=new p(0);o._data=new Uint32Array(this._data),o.length=this.length;for(let h in this._combined)o._combined[h]=this._combined[h];for(let h in this._extendedAttrs)o._extendedAttrs[h]=this._extendedAttrs[h];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,h,_,m,y){let C=o._data;if(y)for(let D=m-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(_+D)+g]=C[3*(h+D)+g];268435456&C[3*(h+D)+2]&&(this._extendedAttrs[_+D]=o._extendedAttrs[h+D])}else for(let D=0;D<m;D++){for(let g=0;g<3;g++)this._data[3*(_+D)+g]=C[3*(h+D)+g];268435456&C[3*(h+D)+2]&&(this._extendedAttrs[_+D]=o._extendedAttrs[h+D])}let E=Object.keys(o._combined);for(let D=0;D<E.length;D++){let g=parseInt(E[D],10);g>=h&&(this._combined[g-h+_]=o._combined[g])}}translateToString(o=!1,h=0,_=this.length){o&&(_=Math.min(_,this.getTrimmedLength()));let m="";for(;h<_;){let y=this._data[3*h+0],C=2097151&y;m+=2097152&y?this._combined[h]:C?(0,u.stringFromCodePoint)(C):r.WHITESPACE_CELL_CHAR,h+=y>>22||1}return m}}s.BufferLine=p},4841:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(a,d){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return d*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(v,s)=>{function a(d,i,r){if(i===d.length-1)return d[i].getTrimmedLength();let u=!d[i].hasContent(r-1)&&d[i].getWidth(r-1)===1,l=d[i+1].getWidth(0)===2;return u&&l?r-1:r}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(d,i,r,u,l){let p=[];for(let f=0;f<d.length-1;f++){let o=f,h=d.get(++o);if(!h.isWrapped)continue;let _=[d.get(f)];for(;o<d.length&&h.isWrapped;)_.push(h),h=d.get(++o);if(u>=f&&u<o){f+=_.length-1;continue}let m=0,y=a(_,m,i),C=1,E=0;for(;C<_.length;){let g=a(_,C,i),b=g-E,L=r-y,S=Math.min(b,L);_[m].copyCellsFrom(_[C],E,y,S,!1),y+=S,y===r&&(m++,y=0),E+=S,E===g&&(C++,E=0),y===0&&m!==0&&_[m-1].getWidth(r-1)===2&&(_[m].copyCellsFrom(_[m-1],r-1,y++,1,!1),_[m-1].setCell(r-1,l))}_[m].replaceCells(y,r,l);let D=0;for(let g=_.length-1;g>0&&(g>m||_[g].getTrimmedLength()===0);g--)D++;D>0&&(p.push(f+_.length-D),p.push(D)),f+=_.length-1}return p},s.reflowLargerCreateNewLayout=function(d,i){let r=[],u=0,l=i[u],p=0;for(let f=0;f<d.length;f++)if(l===f){let o=i[++u];d.onDeleteEmitter.fire({index:f-p,amount:o}),f+=o-1,p+=o,l=i[++u]}else r.push(f);return{layout:r,countRemoved:p}},s.reflowLargerApplyNewLayout=function(d,i){let r=[];for(let u=0;u<i.length;u++)r.push(d.get(i[u]));for(let u=0;u<r.length;u++)d.set(u,r[u]);d.length=i.length},s.reflowSmallerGetNewLineLengths=function(d,i,r){let u=[],l=d.map((h,_)=>a(d,_,i)).reduce((h,_)=>h+_),p=0,f=0,o=0;for(;o<l;){if(l-o<r){u.push(l-o);break}p+=r;let h=a(d,f,i);p>h&&(p-=h,f++);let _=d[f].getWidth(p-1)===2;_&&p--;let m=_?r-1:r;u.push(m),o+=m}return u},s.getWrappedLineTrimmedLength=a},5295:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;let d=a(8460),i=a(844),r=a(9092);class u extends i.Disposable{constructor(p,f){super(),this._optionsService=p,this._bufferService=f,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new r.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new r.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(p){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(p),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(p,f){this._normal.resize(p,f),this._alt.resize(p,f),this.setupTabStops(p)}setupTabStops(p){this._normal.setupTabStops(p),this._alt.setupTabStops(p)}}s.BufferSet=u},511:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let d=a(482),i=a(643),r=a(3734);class u extends r.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new r.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let f=new u;return f.setFromCharData(p),f}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[i.CHAR_DATA_ATTR_INDEX],this.bg=0;let f=!1;if(p[i.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(p[i.CHAR_DATA_CHAR_INDEX].length===2){let o=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){let h=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(o-55296)+h-56320+65536|p[i.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[i.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=p[i.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[i.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=u},643:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;let d=a(8460),i=a(844);class r{get id(){return this._id}constructor(l){this.line=l,this.isDisposed=!1,this._disposables=[],this._id=r._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,i.disposeArray)(this._disposables),this._disposables.length=0)}register(l){return this._disposables.push(l),l}}s.Marker=r,r._nextId=1},7116:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(v,s)=>{var a,d,i;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(r){r.NUL="\0",r.SOH="",r.STX="",r.ETX="",r.EOT="",r.ENQ="",r.ACK="",r.BEL="\x07",r.BS="\b",r.HT="	",r.LF=`
`,r.VT="\v",r.FF="\f",r.CR="\r",r.SO="",r.SI="",r.DLE="",r.DC1="",r.DC2="",r.DC3="",r.DC4="",r.NAK="",r.SYN="",r.ETB="",r.CAN="",r.EM="",r.SUB="",r.ESC="\x1B",r.FS="",r.GS="",r.RS="",r.US="",r.SP=" ",r.DEL="\x7F"}(a||(s.C0=a={})),function(r){r.PAD="\x80",r.HOP="\x81",r.BPH="\x82",r.NBH="\x83",r.IND="\x84",r.NEL="\x85",r.SSA="\x86",r.ESA="\x87",r.HTS="\x88",r.HTJ="\x89",r.VTS="\x8A",r.PLD="\x8B",r.PLU="\x8C",r.RI="\x8D",r.SS2="\x8E",r.SS3="\x8F",r.DCS="\x90",r.PU1="\x91",r.PU2="\x92",r.STS="\x93",r.CCH="\x94",r.MW="\x95",r.SPA="\x96",r.EPA="\x97",r.SOS="\x98",r.SGCI="\x99",r.SCI="\x9A",r.CSI="\x9B",r.ST="\x9C",r.OSC="\x9D",r.PM="\x9E",r.APC="\x9F"}(d||(s.C1=d={})),function(r){r.ST=`${a.ESC}\\`}(i||(s.C1_ESCAPED=i={}))},7399:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;let d=a(2584),i={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(r,u,l,p){let f={type:0,cancel:!1,key:void 0},o=(r.shiftKey?1:0)|(r.altKey?2:0)|(r.ctrlKey?4:0)|(r.metaKey?8:0);switch(r.keyCode){case 0:r.key==="UIKeyInputUpArrow"?f.key=u?d.C0.ESC+"OA":d.C0.ESC+"[A":r.key==="UIKeyInputLeftArrow"?f.key=u?d.C0.ESC+"OD":d.C0.ESC+"[D":r.key==="UIKeyInputRightArrow"?f.key=u?d.C0.ESC+"OC":d.C0.ESC+"[C":r.key==="UIKeyInputDownArrow"&&(f.key=u?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(r.altKey){f.key=d.C0.ESC+d.C0.DEL;break}f.key=d.C0.DEL;break;case 9:if(r.shiftKey){f.key=d.C0.ESC+"[Z";break}f.key=d.C0.HT,f.cancel=!0;break;case 13:f.key=r.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,f.cancel=!0;break;case 27:f.key=d.C0.ESC,r.altKey&&(f.key=d.C0.ESC+d.C0.ESC),f.cancel=!0;break;case 37:if(r.metaKey)break;o?(f.key=d.C0.ESC+"[1;"+(o+1)+"D",f.key===d.C0.ESC+"[1;3D"&&(f.key=d.C0.ESC+(l?"b":"[1;5D"))):f.key=u?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(r.metaKey)break;o?(f.key=d.C0.ESC+"[1;"+(o+1)+"C",f.key===d.C0.ESC+"[1;3C"&&(f.key=d.C0.ESC+(l?"f":"[1;5C"))):f.key=u?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(r.metaKey)break;o?(f.key=d.C0.ESC+"[1;"+(o+1)+"A",l||f.key!==d.C0.ESC+"[1;3A"||(f.key=d.C0.ESC+"[1;5A")):f.key=u?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(r.metaKey)break;o?(f.key=d.C0.ESC+"[1;"+(o+1)+"B",l||f.key!==d.C0.ESC+"[1;3B"||(f.key=d.C0.ESC+"[1;5B")):f.key=u?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:r.shiftKey||r.ctrlKey||(f.key=d.C0.ESC+"[2~");break;case 46:f.key=o?d.C0.ESC+"[3;"+(o+1)+"~":d.C0.ESC+"[3~";break;case 36:f.key=o?d.C0.ESC+"[1;"+(o+1)+"H":u?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:f.key=o?d.C0.ESC+"[1;"+(o+1)+"F":u?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:r.shiftKey?f.type=2:r.ctrlKey?f.key=d.C0.ESC+"[5;"+(o+1)+"~":f.key=d.C0.ESC+"[5~";break;case 34:r.shiftKey?f.type=3:r.ctrlKey?f.key=d.C0.ESC+"[6;"+(o+1)+"~":f.key=d.C0.ESC+"[6~";break;case 112:f.key=o?d.C0.ESC+"[1;"+(o+1)+"P":d.C0.ESC+"OP";break;case 113:f.key=o?d.C0.ESC+"[1;"+(o+1)+"Q":d.C0.ESC+"OQ";break;case 114:f.key=o?d.C0.ESC+"[1;"+(o+1)+"R":d.C0.ESC+"OR";break;case 115:f.key=o?d.C0.ESC+"[1;"+(o+1)+"S":d.C0.ESC+"OS";break;case 116:f.key=o?d.C0.ESC+"[15;"+(o+1)+"~":d.C0.ESC+"[15~";break;case 117:f.key=o?d.C0.ESC+"[17;"+(o+1)+"~":d.C0.ESC+"[17~";break;case 118:f.key=o?d.C0.ESC+"[18;"+(o+1)+"~":d.C0.ESC+"[18~";break;case 119:f.key=o?d.C0.ESC+"[19;"+(o+1)+"~":d.C0.ESC+"[19~";break;case 120:f.key=o?d.C0.ESC+"[20;"+(o+1)+"~":d.C0.ESC+"[20~";break;case 121:f.key=o?d.C0.ESC+"[21;"+(o+1)+"~":d.C0.ESC+"[21~";break;case 122:f.key=o?d.C0.ESC+"[23;"+(o+1)+"~":d.C0.ESC+"[23~";break;case 123:f.key=o?d.C0.ESC+"[24;"+(o+1)+"~":d.C0.ESC+"[24~";break;default:if(!r.ctrlKey||r.shiftKey||r.altKey||r.metaKey)if(l&&!p||!r.altKey||r.metaKey)!l||r.altKey||r.ctrlKey||r.shiftKey||!r.metaKey?r.key&&!r.ctrlKey&&!r.altKey&&!r.metaKey&&r.keyCode>=48&&r.key.length===1?f.key=r.key:r.key&&r.ctrlKey&&(r.key==="_"&&(f.key=d.C0.US),r.key==="@"&&(f.key=d.C0.NUL)):r.keyCode===65&&(f.type=1);else{let h=i[r.keyCode],_=h?.[r.shiftKey?1:0];if(_)f.key=d.C0.ESC+_;else if(r.keyCode>=65&&r.keyCode<=90){let m=r.ctrlKey?r.keyCode-64:r.keyCode+32,y=String.fromCharCode(m);r.shiftKey&&(y=y.toUpperCase()),f.key=d.C0.ESC+y}else if(r.keyCode===32)f.key=d.C0.ESC+(r.ctrlKey?d.C0.NUL:" ");else if(r.key==="Dead"&&r.code.startsWith("Key")){let m=r.code.slice(3,4);r.shiftKey||(m=m.toLowerCase()),f.key=d.C0.ESC+m,f.cancel=!0}}else r.keyCode>=65&&r.keyCode<=90?f.key=String.fromCharCode(r.keyCode-64):r.keyCode===32?f.key=d.C0.NUL:r.keyCode>=51&&r.keyCode<=55?f.key=String.fromCharCode(r.keyCode-51+27):r.keyCode===56?f.key=d.C0.DEL:r.keyCode===219?f.key=d.C0.ESC:r.keyCode===220?f.key=d.C0.FS:r.keyCode===221&&(f.key=d.C0.GS)}return f}},482:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,d=0,i=a.length){let r="";for(let u=d;u<i;++u){let l=a[u];l>65535?(l-=65536,r+=String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):r+=String.fromCharCode(l)}return r},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,d){let i=a.length;if(!i)return 0;let r=0,u=0;if(this._interim){let l=a.charCodeAt(u++);56320<=l&&l<=57343?d[r++]=1024*(this._interim-55296)+l-56320+65536:(d[r++]=this._interim,d[r++]=l),this._interim=0}for(let l=u;l<i;++l){let p=a.charCodeAt(l);if(55296<=p&&p<=56319){if(++l>=i)return this._interim=p,r;let f=a.charCodeAt(l);56320<=f&&f<=57343?d[r++]=1024*(p-55296)+f-56320+65536:(d[r++]=p,d[r++]=f)}else p!==65279&&(d[r++]=p)}return r}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,d){let i=a.length;if(!i)return 0;let r,u,l,p,f=0,o=0,h=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let E,D=0;for(;(E=63&this.interim[++D])&&D<4;)C<<=6,C|=E;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;h<b;){if(h>=i)return 0;if(E=a[h++],(192&E)!=128){h--,y=!0;break}this.interim[D++]=E,C<<=6,C|=63&E}y||(g===2?C<128?h--:d[f++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(d[f++]=C):C<65536||C>1114111||(d[f++]=C)),this.interim.fill(0)}let _=i-4,m=h;for(;m<i;){for(;!(!(m<_)||128&(r=a[m])||128&(u=a[m+1])||128&(l=a[m+2])||128&(p=a[m+3]));)d[f++]=r,d[f++]=u,d[f++]=l,d[f++]=p,m+=4;if(r=a[m++],r<128)d[f++]=r;else if((224&r)==192){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(o=(31&r)<<6|63&u,o<128){m--;continue}d[f++]=o}else if((240&r)==224){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,f;if(l=a[m++],(192&l)!=128){m--;continue}if(o=(15&r)<<12|(63&u)<<6|63&l,o<2048||o>=55296&&o<=57343||o===65279)continue;d[f++]=o}else if((248&r)==240){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,f;if(l=a[m++],(192&l)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,this.interim[2]=l,f;if(p=a[m++],(192&p)!=128){m--;continue}if(o=(7&r)<<18|(63&u)<<12|(63&l)<<6|63&p,o<65536||o>1114111)continue;d[f++]=o}}return f}}},225:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;let a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],i;s.UnicodeV6=class{constructor(){if(this.version="6",!i){i=new Uint8Array(65536),i.fill(1),i[0]=0,i.fill(0,1,32),i.fill(0,127,160),i.fill(2,4352,4448),i[9001]=2,i[9002]=2,i.fill(2,11904,42192),i[12351]=1,i.fill(2,44032,55204),i.fill(2,63744,64256),i.fill(2,65040,65050),i.fill(2,65072,65136),i.fill(2,65280,65377),i.fill(2,65504,65511);for(let r=0;r<a.length;++r)i.fill(0,a[r][0],a[r][1]+1)}}wcwidth(r){return r<32?0:r<127?1:r<65536?i[r]:function(u,l){let p,f=0,o=l.length-1;if(u<l[0][0]||u>l[o][1])return!1;for(;o>=f;)if(p=f+o>>1,u>l[p][1])f=p+1;else{if(!(u<l[p][0]))return!0;o=p-1}return!1}(r,d)?0:r>=131072&&r<=196605||r>=196608&&r<=262141?2:1}}},5981:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;let d=a(8460),i=a(844);class r extends i.Disposable{constructor(l){super(),this._action=l,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(l,p){if(p!==void 0&&this._syncCalls>p)return void(this._syncCalls=0);if(this._pendingData+=l.length,this._writeBuffer.push(l),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let f;for(this._isSyncWriting=!0;f=this._writeBuffer.shift();){this._action(f);let o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(l,p){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=l.length,this._writeBuffer.push(l),this._callbacks.push(p),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=l.length,this._writeBuffer.push(l),this._callbacks.push(p)}_innerWrite(l=0,p=!0){let f=l||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let o=this._writeBuffer[this._bufferOffset],h=this._action(o,p);if(h){let m=y=>Date.now()-f>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(f,y);return void h.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(m)}let _=this._callbacks[this._bufferOffset];if(_&&_(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-f>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=r},5941:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;let a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function i(r,u){let l=r.toString(16),p=l.length<2?"0"+l:l;switch(u){case 4:return l[0];case 8:return p;case 12:return(p+p).slice(0,3);default:return p+p}}s.parseColor=function(r){if(!r)return;let u=r.toLowerCase();if(u.indexOf("rgb:")===0){u=u.slice(4);let l=a.exec(u);if(l){let p=l[1]?15:l[4]?255:l[7]?4095:65535;return[Math.round(parseInt(l[1]||l[4]||l[7]||l[10],16)/p*255),Math.round(parseInt(l[2]||l[5]||l[8]||l[11],16)/p*255),Math.round(parseInt(l[3]||l[6]||l[9]||l[12],16)/p*255)]}}else if(u.indexOf("#")===0&&(u=u.slice(1),d.exec(u)&&[3,6,9,12].includes(u.length))){let l=u.length/3,p=[0,0,0];for(let f=0;f<3;++f){let o=parseInt(u.slice(l*f,l*f+l),16);p[f]=l===1?o<<4:l===2?o:l===3?o>>4:o>>8}return p}},s.toRgbString=function(r,u=16){let[l,p,f]=r;return`rgb:${i(l,u)}/${i(p,u)}/${i(f,u)}`}},5770:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;let d=a(482),i=a(8742),r=a(5770),u=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=u,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}registerHandler(p,f){this._handlers[p]===void 0&&(this._handlers[p]=[]);let o=this._handlers[p];return o.push(f),{dispose:()=>{let h=o.indexOf(f);h!==-1&&o.splice(h,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}reset(){if(this._active.length)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=u,this._ident=0}hook(p,f){if(this.reset(),this._ident=p,this._active=this._handlers[p]||u,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(f);else this._handlerFb(this._ident,"HOOK",f)}put(p,f,o){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(p,f,o);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(p,f,o))}unhook(p,f=!0){if(this._active.length){let o=!1,h=this._active.length-1,_=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,o=f,_=this._stack.fallThrough,this._stack.paused=!1),!_&&o===!1){for(;h>=0&&(o=this._active[h].unhook(p),o!==!0);h--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,o;h--}for(;h>=0;h--)if(o=this._active[h].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",p);this._active=u,this._ident=0}};let l=new i.Params;l.addParam(0),s.DcsHandler=class{constructor(p){this._handler=p,this._data="",this._params=l,this._hitLimit=!1}hook(p){this._params=p.length>1||p.params[0]?p.clone():l,this._data="",this._hitLimit=!1}put(p,f,o){this._hitLimit||(this._data+=(0,d.utf32ToString)(p,f,o),this._data.length>r.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(p){let f=!1;if(this._hitLimit)f=!1;else if(p&&(f=this._handler(this._data,this._params),f instanceof Promise))return f.then(o=>(this._params=l,this._data="",this._hitLimit=!1,o));return this._params=l,this._data="",this._hitLimit=!1,f}}},2015:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;let d=a(844),i=a(8742),r=a(6242),u=a(6351);class l{constructor(h){this.table=new Uint8Array(h)}setDefault(h,_){this.table.fill(h<<4|_)}add(h,_,m,y){this.table[_<<8|h]=m<<4|y}addMany(h,_,m,y){for(let C=0;C<h.length;C++)this.table[_<<8|h[C]]=m<<4|y}}s.TransitionTable=l;let p=160;s.VT500_TRANSITION_TABLE=function(){let o=new l(4095),h=Array.apply(null,Array(256)).map((D,g)=>g),_=(D,g)=>h.slice(D,g),m=_(32,127),y=_(0,24);y.push(25),y.push.apply(y,_(28,32));let C=_(0,14),E;for(E in o.setDefault(1,0),o.addMany(m,0,2,0),C)o.addMany([24,26,153,154],E,3,0),o.addMany(_(128,144),E,3,0),o.addMany(_(144,152),E,3,0),o.add(156,E,0,0),o.add(27,E,11,1),o.add(157,E,4,8),o.addMany([152,158,159],E,0,7),o.add(155,E,11,3),o.add(144,E,11,9);return o.addMany(y,0,3,0),o.addMany(y,1,3,1),o.add(127,1,0,1),o.addMany(y,8,0,8),o.addMany(y,3,3,3),o.add(127,3,0,3),o.addMany(y,4,3,4),o.add(127,4,0,4),o.addMany(y,6,3,6),o.addMany(y,5,3,5),o.add(127,5,0,5),o.addMany(y,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(m,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(_(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(m,7,0,7),o.addMany(y,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(_(64,127),3,7,0),o.addMany(_(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(_(48,60),4,8,4),o.addMany(_(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(_(32,64),6,0,6),o.add(127,6,0,6),o.addMany(_(64,127),6,0,0),o.addMany(_(32,48),3,9,5),o.addMany(_(32,48),5,9,5),o.addMany(_(48,64),5,0,6),o.addMany(_(64,127),5,7,0),o.addMany(_(32,48),4,9,5),o.addMany(_(32,48),1,9,2),o.addMany(_(32,48),2,9,2),o.addMany(_(48,127),2,10,0),o.addMany(_(48,80),1,10,0),o.addMany(_(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(_(96,127),1,10,0),o.add(80,1,11,9),o.addMany(y,9,0,9),o.add(127,9,0,9),o.addMany(_(28,32),9,0,9),o.addMany(_(32,48),9,9,12),o.addMany(_(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(y,11,0,11),o.addMany(_(32,128),11,0,11),o.addMany(_(28,32),11,0,11),o.addMany(y,10,0,10),o.add(127,10,0,10),o.addMany(_(28,32),10,0,10),o.addMany(_(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(_(32,48),10,9,12),o.addMany(y,12,0,12),o.add(127,12,0,12),o.addMany(_(28,32),12,0,12),o.addMany(_(32,48),12,9,12),o.addMany(_(48,64),12,0,11),o.addMany(_(64,127),12,12,13),o.addMany(_(64,127),10,12,13),o.addMany(_(64,127),9,12,13),o.addMany(y,13,13,13),o.addMany(m,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(p,0,2,0),o.add(p,8,5,8),o.add(p,6,0,6),o.add(p,11,0,11),o.add(p,13,13,13),o}();class f extends d.Disposable{constructor(h=s.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new i.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(_,m,y)=>{},this._executeHandlerFb=_=>{},this._csiHandlerFb=(_,m)=>{},this._escHandlerFb=_=>{},this._errorHandlerFb=_=>_,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new r.OscParser),this._dcsParser=this.register(new u.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,_=[64,126]){let m=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(m=h.prefix.charCodeAt(0),m&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<h.intermediates.length;++C){let E=h.intermediates.charCodeAt(C);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=E}}if(h.final.length!==1)throw new Error("final must be a single byte");let y=h.final.charCodeAt(0);if(_[0]>y||y>_[1])throw new Error(`final must be in range ${_[0]} .. ${_[1]}`);return m<<=8,m|=y,m}identToString(h){let _=[];for(;h;)_.push(String.fromCharCode(255&h)),h>>=8;return _.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,_){let m=this._identifier(h,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);let y=this._escHandlers[m];return y.push(_),{dispose:()=>{let C=y.indexOf(_);C!==-1&&y.splice(C,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,_){this._executeHandlers[h.charCodeAt(0)]=_}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,_){let m=this._identifier(h);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);let y=this._csiHandlers[m];return y.push(_),{dispose:()=>{let C=y.indexOf(_);C!==-1&&y.splice(C,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,_){return this._dcsParser.registerHandler(this._identifier(h),_)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,_){return this._oscParser.registerHandler(h,_)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,_,m,y,C){this._parseStack.state=h,this._parseStack.handlers=_,this._parseStack.handlerPos=m,this._parseStack.transition=y,this._parseStack.chunkPos=C}parse(h,_,m){let y,C=0,E=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let g=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&b>-1){for(;b>=0&&(y=g[b](this._params),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 4:if(m===!1&&b>-1){for(;b>=0&&(y=g[b](),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 6:if(C=h[this._parseStack.chunkPos],y=this._dcsParser.unhook(C!==24&&C!==26,m),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=h[this._parseStack.chunkPos],y=this._oscParser.end(C!==24&&C!==26,m),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<_;++g){switch(C=h[g],E=this._transitions.table[this.currentState<<8|(C<160?C:p)],E>>4){case 2:for(let M=g+1;;++M){if(M>=_||(C=h[M])<32||C>126&&C<p){this._printHandler(h,g,M),g=M-1;break}if(++M>=_||(C=h[M])<32||C>126&&C<p){this._printHandler(h,g,M),g=M-1;break}if(++M>=_||(C=h[M])<32||C>126&&C<p){this._printHandler(h,g,M),g=M-1;break}if(++M>=_||(C=h[M])<32||C>126&&C<p){this._printHandler(h,g,M),g=M-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let b=this._csiHandlers[this._collect<<8|C],L=b?b.length-1:-1;for(;L>=0&&(y=b[L](this._params),y!==!0);L--)if(y instanceof Promise)return this._preserveStack(3,b,L,E,g),y;L<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++g<_&&(C=h[g])>47&&C<60);g--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let S=this._escHandlers[this._collect<<8|C],T=S?S.length-1:-1;for(;T>=0&&(y=S[T](),y!==!0);T--)if(y instanceof Promise)return this._preserveStack(4,S,T,E,g),y;T<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let M=g+1;;++M)if(M>=_||(C=h[M])===24||C===26||C===27||C>127&&C<p){this._dcsParser.put(h,g,M),g=M-1;break}break;case 14:if(y=this._dcsParser.unhook(C!==24&&C!==26),y)return this._preserveStack(6,[],0,E,g),y;C===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=g+1;;M++)if(M>=_||(C=h[M])<32||C>127&&C<p){this._oscParser.put(h,g,M),g=M-1;break}break;case 6:if(y=this._oscParser.end(C!==24&&C!==26),y)return this._preserveStack(5,[],0,E,g),y;C===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}}}s.EscapeSequenceParser=f},6242:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;let d=a(5770),i=a(482),r=[];s.OscParser=class{constructor(){this._state=0,this._active=r,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(u,l){this._handlers[u]===void 0&&(this._handlers[u]=[]);let p=this._handlers[u];return p.push(l),{dispose:()=>{let f=p.indexOf(l);f!==-1&&p.splice(f,1)}}}clearHandler(u){this._handlers[u]&&delete this._handlers[u]}setHandlerFallback(u){this._handlerFb=u}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=r}reset(){if(this._state===2)for(let u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].end(!1);this._stack.paused=!1,this._active=r,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||r,this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].start();else this._handlerFb(this._id,"START")}_put(u,l,p){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(u,l,p);else this._handlerFb(this._id,"PUT",(0,i.utf32ToString)(u,l,p))}start(){this.reset(),this._state=1}put(u,l,p){if(this._state!==3){if(this._state===1)for(;l<p;){let f=u[l++];if(f===59){this._state=2,this._start();break}if(f<48||57<f)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+f-48}this._state===2&&p-l>0&&this._put(u,l,p)}}end(u,l=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let p=!1,f=this._active.length-1,o=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,p=l,o=this._stack.fallThrough,this._stack.paused=!1),!o&&p===!1){for(;f>=0&&(p=this._active[f].end(u),p!==!0);f--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,p;f--}for(;f>=0;f--)if(p=this._active[f].end(!1),p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",u);this._active=r,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(u){this._handler=u,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(u,l,p){this._hitLimit||(this._data+=(0,i.utf32ToString)(u,l,p),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(u){let l=!1;if(this._hitLimit)l=!1;else if(u&&(l=this._handler(this._data),l instanceof Promise))return l.then(p=>(this._data="",this._hitLimit=!1,p));return this._data="",this._hitLimit=!1,l}}},8742:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;let a=2147483647;class d{static fromArray(r){let u=new d;if(!r.length)return u;for(let l=Array.isArray(r[0])?1:0;l<r.length;++l){let p=r[l];if(Array.isArray(p))for(let f=0;f<p.length;++f)u.addSubParam(p[f]);else u.addParam(p)}return u}constructor(r=32,u=32){if(this.maxLength=r,this.maxSubParamsLength=u,u>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(r),this.length=0,this._subParams=new Int32Array(u),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(r),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let r=new d(this.maxLength,this.maxSubParamsLength);return r.params.set(this.params),r.length=this.length,r._subParams.set(this._subParams),r._subParamsLength=this._subParamsLength,r._subParamsIdx.set(this._subParamsIdx),r._rejectDigits=this._rejectDigits,r._rejectSubDigits=this._rejectSubDigits,r._digitIsSub=this._digitIsSub,r}toArray(){let r=[];for(let u=0;u<this.length;++u){r.push(this.params[u]);let l=this._subParamsIdx[u]>>8,p=255&this._subParamsIdx[u];p-l>0&&r.push(Array.prototype.slice.call(this._subParams,l,p))}return r}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(r){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(r<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=r>a?a:r}}addSubParam(r){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(r<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=r>a?a:r,this._subParamsIdx[this.length-1]++}}hasSubParams(r){return(255&this._subParamsIdx[r])-(this._subParamsIdx[r]>>8)>0}getSubParams(r){let u=this._subParamsIdx[r]>>8,l=255&this._subParamsIdx[r];return l-u>0?this._subParams.subarray(u,l):null}getSubParamsAll(){let r={};for(let u=0;u<this.length;++u){let l=this._subParamsIdx[u]>>8,p=255&this._subParamsIdx[u];p-l>0&&(r[u]=this._subParams.slice(l,p))}return r}addDigit(r){let u;if(this._rejectDigits||!(u=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let l=this._digitIsSub?this._subParams:this.params,p=l[u-1];l[u-1]=~p?Math.min(10*p+r,a):r}}s.Params=d},5741:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,d){let i={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(i),d.dispose=()=>this._wrappedAddonDispose(i),d.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let d=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===a){d=i;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(d,1)}}},8771:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;let d=a(3785),i=a(511);s.BufferApiView=class{constructor(r,u){this._buffer=r,this.type=u}init(r){return this._buffer=r,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(r){let u=this._buffer.lines.get(r);if(u)return new d.BufferLineApiView(u)}getNullCell(){return new i.CellData}}},3785:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;let d=a(511);s.BufferLineApiView=class{constructor(i){this._line=i}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(i,r){if(!(i<0||i>=this._line.length))return r?(this._line.loadCell(i,r),r):this._line.loadCell(i,new d.CellData)}translateToString(i,r,u){return this._line.translateToString(i,r,u)}}},8285:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;let d=a(8771),i=a(8460),r=a(844);class u extends r.Disposable{constructor(p){super(),this._core=p,this._onBufferChange=this.register(new i.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=u},7975:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,d){return this._core.registerCsiHandler(a,i=>d(i.toArray()))}addCsiHandler(a,d){return this.registerCsiHandler(a,d)}registerDcsHandler(a,d){return this._core.registerDcsHandler(a,(i,r)=>d(i,r.toArray()))}addDcsHandler(a,d){return this.registerDcsHandler(a,d)}registerEscHandler(a,d){return this._core.registerEscHandler(a,d)}addEscHandler(a,d){return this.registerEscHandler(a,d)}registerOscHandler(a,d){return this._core.registerOscHandler(a,d)}addOscHandler(a,d){return this.registerOscHandler(a,d)}}},7090:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;let r=a(8460),u=a(844),l=a(5295),p=a(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let f=s.BufferService=class extends u.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new r.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new l.BufferSet(o,this))}resize(o,h){this.cols=o,this.rows=h,this.buffers.resize(o,h),this._onResize.fire({cols:o,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,h=!1){let _=this.buffer,m;m=this._cachedBlankLine,m&&m.length===this.cols&&m.getFg(0)===o.fg&&m.getBg(0)===o.bg||(m=_.getBlankLine(o,h),this._cachedBlankLine=m),m.isWrapped=h;let y=_.ybase+_.scrollTop,C=_.ybase+_.scrollBottom;if(_.scrollTop===0){let E=_.lines.isFull;C===_.lines.length-1?E?_.lines.recycle().copyFrom(m):_.lines.push(m.clone()):_.lines.splice(C+1,0,m.clone()),E?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{let E=C-y+1;_.lines.shiftElements(y+1,E-1,-1),_.lines.set(C,m.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)}scrollLines(o,h,_){let m=this.buffer;if(o<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else o+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);let y=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+o,m.ybase),0),y!==m.ydisp&&(h||this._onScroll.fire(m.ydisp))}};s.BufferService=f=d([i(0,p.IOptionsService)],f)},7994:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,d){this._charsets[a]=d,this.glevel===a&&(this.charset=d)}}},1753:function(v,s,a){var d=this&&this.__decorate||function(m,y,C,E){var D,g=arguments.length,b=g<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,C):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(m,y,C,E);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},i=this&&this.__param||function(m,y){return function(C,E){y(C,E,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;let r=a(2585),u=a(8460),l=a(844),p={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:m=>m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)},VT200:{events:19,restrict:m=>m.action!==32},DRAG:{events:23,restrict:m=>m.action!==32||m.button!==3},ANY:{events:31,restrict:m=>!0}};function f(m,y){let C=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(C|=64,C|=m.action):(C|=3&m.button,4&m.button&&(C|=64),8&m.button&&(C|=128),m.action===32?C|=32:m.action!==0||y||(C|=3)),C}let o=String.fromCharCode,h={DEFAULT:m=>{let y=[f(m,!1)+32,m.col+32,m.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${o(y[0])}${o(y[1])}${o(y[2])}`},SGR:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${f(m,!0)};${m.col};${m.row}${y}`},SGR_PIXELS:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${f(m,!0)};${m.x};${m.y}${y}`}},_=s.CoreMouseService=class extends l.Disposable{constructor(m,y){super(),this._bufferService=m,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new u.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(p))this.addProtocol(C,p[C]);for(let C of Object.keys(h))this.addEncoding(C,h[C]);this.reset()}addProtocol(m,y){this._protocols[m]=y}addEncoding(m,y){this._encodings[m]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(m){if(!this._protocols[m])throw new Error(`unknown protocol "${m}"`);this._activeProtocol=m,this._onProtocolChange.fire(this._protocols[m].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(m){if(!this._encodings[m])throw new Error(`unknown encoding "${m}"`);this._activeEncoding=m}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(m){if(m.col<0||m.col>=this._bufferService.cols||m.row<0||m.row>=this._bufferService.rows||m.button===4&&m.action===32||m.button===3&&m.action!==32||m.button!==4&&(m.action===2||m.action===3)||(m.col++,m.row++,m.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,m,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(m))return!1;let y=this._encodings[this._activeEncoding](m);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=m,!0}explainEvents(m){return{down:!!(1&m),up:!!(2&m),drag:!!(4&m),move:!!(8&m),wheel:!!(16&m)}}_equalEvents(m,y,C){if(C){if(m.x!==y.x||m.y!==y.y)return!1}else if(m.col!==y.col||m.row!==y.row)return!1;return m.button===y.button&&m.action===y.action&&m.ctrl===y.ctrl&&m.alt===y.alt&&m.shift===y.shift}};s.CoreMouseService=_=d([i(0,r.IBufferService),i(1,r.ICoreService)],_)},6975:function(v,s,a){var d=this&&this.__decorate||function(_,m,y,C){var E,D=arguments.length,g=D<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(_,m,y,C);else for(var b=_.length-1;b>=0;b--)(E=_[b])&&(g=(D<3?E(g):D>3?E(m,y,g):E(m,y))||g);return D>3&&g&&Object.defineProperty(m,y,g),g},i=this&&this.__param||function(_,m){return function(y,C){m(y,C,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;let r=a(1439),u=a(8460),l=a(844),p=a(2585),f=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),h=s.CoreService=class extends l.Disposable{constructor(_,m,y){super(),this._bufferService=_,this._logService=m,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new u.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new u.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,r.clone)(f),this.decPrivateModes=(0,r.clone)(o)}reset(){this.modes=(0,r.clone)(f),this.decPrivateModes=(0,r.clone)(o)}triggerDataEvent(_,m=!1){if(this._optionsService.rawOptions.disableStdin)return;let y=this._bufferService.buffer;m&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),m&&this._onUserInput.fire(),this._logService.debug(`sending data "${_}"`,()=>_.split("").map(C=>C.charCodeAt(0))),this._onData.fire(_)}triggerBinaryEvent(_){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${_}"`,()=>_.split("").map(m=>m.charCodeAt(0))),this._onBinary.fire(_))}};s.CoreService=h=d([i(0,p.IBufferService),i(1,p.ILogService),i(2,p.IOptionsService)],h)},9074:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;let d=a(8055),i=a(8460),r=a(844),u=a(6106),l=0,p=0;class f extends r.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new u.SortedList(_=>_?.marker.line),this._onDecorationRegistered=this.register(new i.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new i.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,r.toDisposable)(()=>this.reset()))}registerDecoration(_){if(_.marker.isDisposed)return;let m=new o(_);if(m){let y=m.marker.onDispose(()=>m.dispose());m.onDispose(()=>{m&&(this._decorations.delete(m)&&this._onDecorationRemoved.fire(m),y.dispose())}),this._decorations.insert(m),this._onDecorationRegistered.fire(m)}return m}reset(){for(let _ of this._decorations.values())_.dispose();this._decorations.clear()}*getDecorationsAtCell(_,m,y){var C,E,D;let g=0,b=0;for(let L of this._decorations.getKeyIterator(m))g=(C=L.options.x)!==null&&C!==void 0?C:0,b=g+((E=L.options.width)!==null&&E!==void 0?E:1),_>=g&&_<b&&(!y||((D=L.options.layer)!==null&&D!==void 0?D:"bottom")===y)&&(yield L)}forEachDecorationAtCell(_,m,y,C){this._decorations.forEachByKey(m,E=>{var D,g,b;l=(D=E.options.x)!==null&&D!==void 0?D:0,p=l+((g=E.options.width)!==null&&g!==void 0?g:1),_>=l&&_<p&&(!y||((b=E.options.layer)!==null&&b!==void 0?b:"bottom")===y)&&C(E)})}}s.DecorationService=f;class o extends r.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(_){super(),this.options=_,this.onRenderEmitter=this.register(new i.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new i.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=_.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;let d=a(2585),i=a(8343);class r{constructor(...l){this._entries=new Map;for(let[p,f]of l)this.set(p,f)}set(l,p){let f=this._entries.get(l);return this._entries.set(l,p),f}forEach(l){for(let[p,f]of this._entries.entries())l(p,f)}has(l){return this._entries.has(l)}get(l){return this._entries.get(l)}}s.ServiceCollection=r,s.InstantiationService=class{constructor(){this._services=new r,this._services.set(d.IInstantiationService,this)}setService(u,l){this._services.set(u,l)}getService(u){return this._services.get(u)}createInstance(u,...l){let p=(0,i.getServiceDependencies)(u).sort((h,_)=>h.index-_.index),f=[];for(let h of p){let _=this._services.get(h.id);if(!_)throw new Error(`[createInstance] ${u.name} depends on UNKNOWN service ${h.id}.`);f.push(_)}let o=p.length>0?p[0].index:l.length;if(l.length!==o)throw new Error(`[createInstance] First service dependency of ${u.name} at position ${o+1} conflicts with ${l.length} static arguments`);return new u(...l,...f)}}},7866:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let r=a(844),u=a(2585),l={trace:u.LogLevelEnum.TRACE,debug:u.LogLevelEnum.DEBUG,info:u.LogLevelEnum.INFO,warn:u.LogLevelEnum.WARN,error:u.LogLevelEnum.ERROR,off:u.LogLevelEnum.OFF},p,f=s.LogService=class extends r.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=u.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=l[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let h=0;h<o.length;h++)typeof o[h]=="function"&&(o[h]=o[h]())}_log(o,h,_){this._evalLazyOptionalParams(_),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,..._)}trace(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.TRACE&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}debug(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.DEBUG&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}info(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.INFO&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,o,h)}warn(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.WARN&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,o,h)}error(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.ERROR&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,o,h)}};s.LogService=f=d([i(0,u.IOptionsService)],f),s.setTraceLogger=function(o){p=o},s.traceCall=function(o,h,_){if(typeof _.value!="function")throw new Error("not supported");let m=_.value;_.value=function(...y){if(p.logLevel!==u.LogLevelEnum.TRACE)return m.apply(this,y);p.trace(`GlyphRenderer#${m.name}(${y.map(E=>JSON.stringify(E)).join(", ")})`);let C=m.apply(this,y);return p.trace(`GlyphRenderer#${m.name} return`,C),C}}},7302:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;let d=a(8460),i=a(844),r=a(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:r.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let u=["normal","bold","100","200","300","400","500","600","700","800","900"];class l extends i.Disposable{constructor(f){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;let o=Object.assign({},s.DEFAULT_OPTIONS);for(let h in f)if(h in o)try{let _=f[h];o[h]=this._sanitizeAndValidateOption(h,_)}catch(_){console.error(_)}this.rawOptions=o,this.options=Object.assign({},o),this._setupOptions()}onSpecificOptionChange(f,o){return this.onOptionChange(h=>{h===f&&o(this.rawOptions[f])})}onMultipleOptionChange(f,o){return this.onOptionChange(h=>{f.indexOf(h)!==-1&&o()})}_setupOptions(){let f=h=>{if(!(h in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},o=(h,_)=>{if(!(h in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);_=this._sanitizeAndValidateOption(h,_),this.rawOptions[h]!==_&&(this.rawOptions[h]=_,this._onOptionChange.fire(h))};for(let h in this.rawOptions){let _={get:f.bind(this,h),set:o.bind(this,h)};Object.defineProperty(this.options,h,_)}}_sanitizeAndValidateOption(f,o){switch(f){case"cursorStyle":if(o||(o=s.DEFAULT_OPTIONS[f]),!function(h){return h==="block"||h==="underline"||h==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${f}`);break;case"wordSeparator":o||(o=s.DEFAULT_OPTIONS[f]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=u.includes(o)?o:s.DEFAULT_OPTIONS[f];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${f} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${f} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${f} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${f} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}s.OptionsService=l},2660:function(v,s,a){var d=this&&this.__decorate||function(l,p,f,o){var h,_=arguments.length,m=_<3?p:o===null?o=Object.getOwnPropertyDescriptor(p,f):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(l,p,f,o);else for(var y=l.length-1;y>=0;y--)(h=l[y])&&(m=(_<3?h(m):_>3?h(p,f,m):h(p,f))||m);return _>3&&m&&Object.defineProperty(p,f,m),m},i=this&&this.__param||function(l,p){return function(f,o){p(f,o,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;let r=a(2585),u=s.OscLinkService=class{constructor(l){this._bufferService=l,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(l){let p=this._bufferService.buffer;if(l.id===void 0){let y=p.addMarker(p.ybase+p.y),C={data:l,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(C,y)),this._dataByLinkId.set(C.id,C),C.id}let f=l,o=this._getEntryIdKey(f),h=this._entriesWithId.get(o);if(h)return this.addLineToLink(h.id,p.ybase+p.y),h.id;let _=p.addMarker(p.ybase+p.y),m={id:this._nextId++,key:this._getEntryIdKey(f),data:f,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(m,_)),this._entriesWithId.set(m.key,m),this._dataByLinkId.set(m.id,m),m.id}addLineToLink(l,p){let f=this._dataByLinkId.get(l);if(f&&f.lines.every(o=>o.line!==p)){let o=this._bufferService.buffer.addMarker(p);f.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(f,o))}}getLinkData(l){var p;return(p=this._dataByLinkId.get(l))===null||p===void 0?void 0:p.data}_getEntryIdKey(l){return`${l.id};;${l.uri}`}_removeMarkerFromLink(l,p){let f=l.lines.indexOf(p);f!==-1&&(l.lines.splice(f,1),l.lines.length===0&&(l.data.id!==void 0&&this._entriesWithId.delete(l.key),this._dataByLinkId.delete(l.id)))}};s.OscLinkService=u=d([i(0,r.IBufferService)],u)},8343:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let a="di$target",d="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(i){return i[d]||[]},s.createDecorator=function(i){if(s.serviceRegistry.has(i))return s.serviceRegistry.get(i);let r=function(u,l,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(f,o,h){o[a]===o?o[d].push({id:f,index:h}):(o[d]=[{id:f,index:h}],o[a]=o)})(r,u,p)};return r.toString=()=>i,s.serviceRegistry.set(i,r),r}},2585:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let d=a(8343);var i;s.IBufferService=(0,d.createDecorator)("BufferService"),s.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),s.ICoreService=(0,d.createDecorator)("CoreService"),s.ICharsetService=(0,d.createDecorator)("CharsetService"),s.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(r){r[r.TRACE=0]="TRACE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.OFF=5]="OFF"}(i||(s.LogLevelEnum=i={})),s.ILogService=(0,d.createDecorator)("LogService"),s.IOptionsService=(0,d.createDecorator)("OptionsService"),s.IOscLinkService=(0,d.createDecorator)("OscLinkService"),s.IUnicodeService=(0,d.createDecorator)("UnicodeService"),s.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;let d=a(8460),i=a(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;let r=new i.UnicodeV6;this.register(r),this._active=r.version,this._activeProvider=r}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(r){if(!this._providers[r])throw new Error(`unknown Unicode version "${r}"`);this._active=r,this._activeProvider=this._providers[r],this._onChange.fire(r)}register(r){this._providers[r.version]=r}wcwidth(r){return this._activeProvider.wcwidth(r)}getStringCellWidth(r){let u=0,l=r.length;for(let p=0;p<l;++p){let f=r.charCodeAt(p);if(55296<=f&&f<=56319){if(++p>=l)return u+this.wcwidth(f);let o=r.charCodeAt(p);56320<=o&&o<=57343?f=1024*(f-55296)+o-56320+65536:u+=this.wcwidth(o)}u+=this.wcwidth(f)}return u}}}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v].call(a.exports,a,a.exports,n),a.exports}var c={};return(()=>{var v=c;Object.defineProperty(v,"__esModule",{value:!0}),v.Terminal=void 0;let s=n(9042),a=n(3236),d=n(844),i=n(5741),r=n(8285),u=n(7975),l=n(7090),p=["cols","rows"];class f extends d.Disposable{constructor(h){super(),this._core=this.register(new a.Terminal(h)),this._addonManager=this.register(new i.AddonManager),this._publicOptions=Object.assign({},this._core.options);let _=y=>this._core.options[y],m=(y,C)=>{this._checkReadonlyOptions(y),this._core.options[y]=C};for(let y in this._core.options){let C={get:_.bind(this,y),set:m.bind(this,y)};Object.defineProperty(this._publicOptions,y,C)}}_checkReadonlyOptions(h){if(p.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new u.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new l.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new r.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let h=this._core.coreService.decPrivateModes,_="none";switch(this._core.coreMouseService.activeProtocol){case"X10":_="x10";break;case"VT200":_="vt200";break;case"DRAG":_="drag";break;case"ANY":_="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:_,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(let _ in h)this._publicOptions[_]=h[_]}blur(){this._core.blur()}focus(){this._core.focus()}resize(h,_){this._verifyIntegers(h,_),this._core.resize(h,_)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){var _,m,y;return this._checkProposedApi(),this._verifyPositiveIntegers((_=h.x)!==null&&_!==void 0?_:0,(m=h.width)!==null&&m!==void 0?m:0,(y=h.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,_,m){this._verifyIntegers(h,_,m),this._core.select(h,_,m)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,_){this._verifyIntegers(h,_),this._core.selectLines(h,_)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,_){this._core.write(h,_)}writeln(h,_){this._core.write(h),this._core.write(`\r
`,_)}paste(h){this._core.paste(h)}refresh(h,_){this._verifyIntegers(h,_),this._core.refresh(h,_)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return s}_verifyIntegers(...h){for(let _ of h)if(_===1/0||isNaN(_)||_%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(let _ of h)if(_&&(_===1/0||isNaN(_)||_%1!=0||_<0))throw new Error("This API only accepts positive integers")}}v.Terminal=f})(),c})())});var QS=function(e){return function(t){for(var n=t.length,c=new Array(n),v=0;v<n;v++)c[v]=e(t[v]);return c}};var Ad={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var ge=function(e){return e.identity},De={identity:function(e){return e},Semigroupoid0:function(){return Ad}};var tn=!0;var Ve=function(e){return function(t){return function(n){return e(n)(t)}}},be=function(e){return function(t){return e}};var XS=function(e){return function(t){return t(e)}};var Wt=function(){function e(){}return e.value=new e,e}();var V=function(e){return e.map};var yt=function(e){return V(e)(be(void 0))},Us=function(e){var t=V(e);return function(n){return function(c){return t(be(c))(n)}}},Rd=function(e){var t=V(e);return function(n){return t(be(n))}};var It={map:QS};var YS=function(e){return function(t){return e+t}},ZS=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var In=function(e){return e.reflectSymbol};var ku={append:YS};var jt={append:ZS};var me=function(e){return e.append};var mm={alt:me(jt),Functor0:function(){return It}},bn=function(e){return e.alt};var eE=function(e){return function(t){for(var n=e.length,c=t.length,v=new Array(n*c),s=0,a=0;a<n;a++)for(var d=e[a],i=0;i<c;i++)v[s++]=d(t[i]);return v}};var ZO=ge(De);var Ou={apply:eE,Functor0:function(){return It}},ut=function(e){return e.apply};var So=function(e){var t=ut(e),n=V(e.Functor0());return function(c){return function(v){return t(n(be(ZO))(c))(v)}}};var ee=function(e){return e.pure},pl=function(e){var t=ee(e);return function(n){return function(c){if(!n)return c;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,c.constructor.name])}}},jr=function(e){var t=ee(e);return function(n){return function(c){if(n)return c;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,c.constructor.name])}}},hl=function(e){var t=ut(e.Apply0()),n=ee(e);return function(c){return function(v){return t(n(c))(v)}}};var qs={pure:function(e){return[e]},Apply0:function(){return Ou}};var tE=function(e){return function(t){for(var n=[],c=0,v=e.length;c<v;c++)Array.prototype.push.apply(n,t(e[c]));return n}};var Lt=function(e){return e.discard};var yi={bind:tE,Apply0:function(){return Ou}},ae=function(e){return e.bind},ln=function(e){return Ve(ae(e))},zs=function(e){var t=ln(e);return function(n){return function(c){return function(v){return t(n)(c(v))}}}};var Ft={discard:function(e){return ae(e)}};var n2=function(e){return function(t){if(e<1)return[];var n=new Array(e);return n.fill(t)}},r2=function(e){return function(t){for(var n=[],c=0,v=0;v<e;v++)n[c++]=t;return n}},nE=typeof Array.prototype.fill=="function"?n2:r2,rE=function(){function e(v,s){this.head=v,this.tail=s}var t={};function n(v){return function(s){return new e(v,s)}}function c(v){for(var s=[],a=0,d=v;d!==t;)s[a++]=d.head,d=d.tail;return s}return function(v){return function(s){return c(v(n)(t)(s))}}}(),Kr=function(e){return e.length},ym=function(e){return function(t){return function(n){return n.length===0?e({}):t(n[0])(n.slice(1))}}},oE=function(e){return function(t){return function(n){return function(c){return c<0||c>=n.length?t:e(n[c])}}}};var aE=function(e){return function(t){return function(n){return function(c){for(var v=0,s=c.length;v<s;v++)if(n(c[v]))return e(v);return t}}}};var iE=function(e){return function(t){return function(n){return function(c){if(n<0||n>=c.length)return t;var v=c.slice();return v.splice(n,1),e(v)}}}};var _l=function(e){return function(t){return t.filter(e)}};var uE=function(){function e(t,n,c,v,s,a){var d,i,r,u,l,p,f;for(d=s+(a-s>>1),d-s>1&&e(t,n,v,c,s,d),a-d>1&&e(t,n,v,c,d,a),i=s,r=d,u=s;i<d&&r<a;)l=v[i],p=v[r],f=n(t(l)(p)),f>0?(c[u++]=p,++r):(c[u++]=l,++i);for(;i<d;)c[u++]=v[i++];for(;r<a;)c[u++]=v[r++]}return function(t){return function(n){return function(c){var v;return c.length<2?c:(v=c.slice(0),e(t,n,v,c.slice(0),0,c.length),v)}}}}(),kd=function(e){return function(t){return function(n){return n.slice(e,t)}}};var cE=function(e){var t=ae(e.Bind1()),n=pl(e.Applicative0());return function(c){return function(v){return t(c)(function(s){return n(s)(v)})}}};var lE=function(e){var t=ae(e.Bind1()),n=ee(e.Applicative0());return function(c){return function(v){return t(v)(function(s){return n(c(s))})}}},zn=function(e){var t=ae(e.Bind1()),n=ee(e.Applicative0());return function(c){return function(v){return t(c)(function(s){return t(v)(function(a){return n(s(a))})})}}};var fE=String.fromCharCode(65535),dE=String.fromCharCode(0),a2=Number.POSITIVE_INFINITY,i2=Number.NEGATIVE_INFINITY;var Od=function(e){return function(t){return function(n){return function(c){return function(v){return c<v?e:c===v?t:n}}}}};var pE=Od,hE=Od,_E=Od,vE=Od,mE=function(e){return function(t){return function(n){for(var c=0,v=t.length,s=n.length;c<v&&c<s;){var a=t[c],d=n[c],i=e(a)(d);if(i!==0)return i;c++}return v===s?0:v>s?-1:1}}};var Hd=function(e){return function(t){return e===t}};var gE=Hd,yE=Hd,DE=Hd,CE=Hd,bE=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var c=0;c<t.length;c++)if(!e(t[c])(n[c]))return!1;return!0}}};var Pd={eq:function(e){return function(t){return!0}}},pr={eq:CE};var ml={eq:yE},gl={eq:gE},wE={eq:DE};var We=function(e){return e.eq};var Qo=function(e){return{eq:bE(We(e))}};var fe=function(){function e(){}return e.value=new e,e}(),pe=function(){function e(){}return e.value=new e,e}(),Ie=function(){function e(){}return e.value=new e,e}();var wn={compare:function(e){return function(t){return Ie.value}},Eq0:function(){return Pd}},Kt=function(){return{compare:_E(fe.value)(Ie.value)(pe.value),Eq0:function(){return pr}}}();var Gs=function(){return{compare:hE(fe.value)(Ie.value)(pe.value),Eq0:function(){return ml}}}(),Sn=function(){return{compare:pE(fe.value)(Ie.value)(pe.value),Eq0:function(){return gl}}}(),Nd=function(){return{compare:vE(fe.value)(Ie.value)(pe.value),Eq0:function(){return wE}}}();var Te=function(e){return e.compare},h2=Te(Sn);var Dl=function(e){var t=Te(e);return function(n){return function(c){var v=t(n)(c);if(v instanceof fe)return c;if(v instanceof Ie||v instanceof pe)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[v.constructor.name])}}},Bd=function(e){var t=Te(e);return function(n){return function(c){var v=t(n)(c);if(v instanceof fe||v instanceof Ie)return n;if(v instanceof pe)return c;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[v.constructor.name])}}},Ci=function(e){var t=Te(e),n=Qo(e.Eq0());return{compare:function(){var c=function(v){return function(s){var a=t(v)(s);if(a instanceof Ie)return 0;if(a instanceof fe)return 1;if(a instanceof pe)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[a.constructor.name])}};return function(v){return function(s){return h2(0)(mE(c)(v)(s))}}}(),Eq0:function(){return n}}};var bm=function(e){var t=Bd(e),n=Dl(e);return function(c){return function(v){return function(s){return t(v)(n(c)(s))}}}};var Xo=function(e){return e.top};var Wd={top:2147483647,bottom:-2147483648,Ord0:function(){return Sn}},Cl={top:fE,bottom:dE,Ord0:function(){return Nd}};var Ia=function(e){return e.bottom};var LE=function(e){return e.toString()},FE=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var xE=function(e){var t=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(n,c){switch(n){case'"':case"\\":return"\\"+n;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var v=c+1,s=v<t&&e[v]>="0"&&e[v]<="9"?"\\&":"";return"\\"+n.charCodeAt(0).toString(10)+s})+'"'};var $a={show:xE};var To={show:FE},Zo={show:LE};var AE={show:function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[e.constructor.name])}},Fe=function(e){return e.show};var D2=ge(De),G=function(){function e(){}return e.value=new e,e}(),z=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var wm=function(e){var t=me(e);return{append:function(n){return function(c){if(n instanceof G)return c;if(c instanceof G)return n;if(n instanceof z&&c instanceof z)return new z(t(n.value0)(c.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,c.constructor.name])}}}};var RE=function(e){var t=wm(e);return{mempty:G.value,Semigroup0:function(){return t}}};var tt=function(e){return function(t){return function(n){if(n instanceof G)return e;if(n instanceof z)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},ka=tt(!0)(be(!1)),js=tt(!1)(be(!0));var Tt={map:function(e){return function(t){return t instanceof z?new z(e(t.value0)):G.value}}},C2=V(Tt);var Ln=function(e){return tt(e)(D2)},Qr=function(){return function(e){if(e instanceof z)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var zd={apply:function(e){return function(t){if(e instanceof z)return C2(e.value0)(t);if(e instanceof G)return G.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Tt}};var hr={bind:function(e){return function(t){if(e instanceof z)return t(e.value0);if(e instanceof G)return G.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return zd}};var Ue=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Oe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var wi={map:function(e){return function(t){if(t instanceof Ue)return new Ue(t.value0);if(t instanceof Oe)return new Oe(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},b2=V(wi);var yn=function(e){return function(t){return function(n){if(n instanceof Ue)return e(n.value0);if(n instanceof Oe)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Vd=function(){return yn(be(G.value))(z.create)}();var $E=yn(be(!1))(be(!0));var kE={apply:function(e){return function(t){if(e instanceof Ue)return new Ue(e.value0);if(e instanceof Oe)return b2(e.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return wi}};var Hu=function(){return{pure:Oe.create,Apply0:function(){return kE}}}();var Mo=function(e){return e};var Oa={map:function(e){return function(t){return e(t)}}};var Gd={apply:function(e){return function(t){return e(t)}},Functor0:function(){return Oa}},Sm={bind:function(e){return function(t){return t(e)}},Apply0:function(){return Gd}},Jd={pure:Mo,Apply0:function(){return Gd}},po={Applicative0:function(){return Jd},Bind1:function(){return Sm}};var Ha={mempty:"",Semigroup0:function(){return ku}};var Pu={mempty:[],Semigroup0:function(){return jt}};var at=function(e){return e.mempty};var PE=function(e){return function(){return e}},NE=function(e){return function(t){return function(){return t(e())()}}};var BE=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},ea={Applicative0:function(){return Xt},Bind1:function(){return _r}},_r={bind:NE,Apply0:function(){return Mm(0)}},Xt={pure:PE,Apply0:function(){return Mm(0)}},WE=BE("functorEffect","Effect",function(){return{map:hl(Xt)}}),Mm=BE("applyEffect","Effect",function(){return{apply:zn(ea),Functor0:function(){return WE(0)}}}),He=WE(20),Lm=Mm(23);var UE=function(e){return function(){return{value:e}}};var Qe=function(e){return function(){return e.value}},qE=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},Pt=function(e){return function(t){return function(){t.value=e}}};var x2=yt(He),nn=UE,Fm=qE,zE=function(e){return Fm(function(t){var n=e(t);return{state:n,value:n}})},Xr=function(e){return function(t){return x2(zE(e)(t))}};var R2=ln(_r),$2=V(He),_n=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ar=function(e){return e.tailRecM};var Kd={tailRecM:function(e){return function(t){var n=function(c){if(c instanceof rn)return c.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[c.constructor.name])};return function(){var v=R2(nn)(e(t))();return function(){for(;!function(){var a=Qe(v)();if(a instanceof _n){var d=e(a.value0)();return Pt(d)(v)(),!1}if(a instanceof rn)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[a.constructor.name])}(););return{}}(),$2(n)(Qe(v))()}}},Monad0:function(){return ea}};var VE=function(e){return function(t){return function(){return e(t())}}};var Qd=function(e){return function(t){return function(){for(var n=0,c=e.length;n<c;n++)t(e[n])()}}};var Xd={map:VE};var P2=function(){function e(t,n,c,v,s,a){var d,i,r,u,l,p,f;for(d=s+(a-s>>1),d-s>1&&e(t,n,v,c,s,d),a-d>1&&e(t,n,v,c,d,a),i=s,r=d,u=s;i<d&&r<a;)l=v[i],p=v[r],f=n(t(l)(p)),f>0?(c[u++]=p,++r):(c[u++]=l,++i);for(;i<d;)c[u++]=v[i++];for(;r<a;)c[u++]=v[r++]}return function(t){return function(n){return function(c){return function(){return c.length<2||e(t,n,c,c.slice(0),0,c.length),c}}}}}();var ZE=function(e){return function(t){return e&&t}},eT=function(e){return function(t){return e||t}},tT=function(e){return!e};var bl=function(e){return e.tt};var ta=function(e){return e.not};var $m=function(e){return e.implies};var wl=function(e){return e.ff};var Nu=function(e){return e.disj},ho={ff:!1,tt:!0,implies:function(e){return function(t){return Nu(ho)(ta(ho)(e))(t)}},conj:ZE,disj:eT,not:tT};var Qs=function(e){return e.conj},Sl=function(e){var t=wl(e),n=bl(e),c=$m(e),v=Qs(e),s=Nu(e),a=ta(e);return{ff:function(d){return t},tt:function(d){return n},implies:function(d){return function(i){return function(r){return c(d(r))(i(r))}}},conj:function(d){return function(i){return function(r){return v(d(r))(i(r))}}},disj:function(d){return function(i){return function(r){return s(d(r))(i(r))}}},not:function(d){return function(i){return a(d(i))}}}};var rT=function(e){return function(t){return function(n){for(var c=t,v=n.length,s=v-1;s>=0;s--)c=e(n[s])(c);return c}}},oT=function(e){return function(t){return function(n){for(var c=t,v=n.length,s=0;s<v;s++)c=e(c)(n[s]);return c}}};var aT={empty:[],Alt0:function(){return mm}},Rr=function(e){return e.empty};var ne=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Pa=function(e){return function(t){return e(t.value0)(t.value1)}};var on=function(e){return e.value1};var Na={map:function(e){return function(t){return new ne(t.value0,e(t.value1))}}};var Nn=function(e){return e.value0};var Zd=function(e){var t=We(e);return function(n){var c=We(n);return{eq:function(v){return function(s){return t(v.value0)(s.value0)&&c(v.value1)(s.value1)}}}}},Bu=function(e){var t=Te(e),n=Zd(e.Eq0());return function(c){var v=Te(c),s=n(c.Eq0());return{compare:function(a){return function(d){var i=t(a.value0)(d.value0);return i instanceof fe?fe.value:i instanceof pe?pe.value:v(a.value1)(d.value1)}},Eq0:function(){return s}}}};var Zr=function(e){return e.bimap};var tH={append:function(e){return function(t){return e instanceof z?e:t}}};var sT=function(){return{mempty:G.value,Semigroup0:function(){return tH}}}();var Z=function(e){return e};var np=function(){return Z};var nH=np();var fn=function(){return nH};var rH=ge(De);var oH=fn();var Nt=function(e){return e.foldr};var wt=function(e){var t=So(e.Apply0()),n=ee(e);return function(c){var v=Nt(c);return function(s){return v(function(a){return t(s(a))})(n(void 0))}}},rp=function(e){var t=wt(e);return function(n){return Ve(t(n))}};var Ht=function(e){return e.foldl};var Lo=function(e){var t=Ht(e);return function(n){var c=me(n.Semigroup0()),v=at(n);return function(s){return function(a){var d=function(i){return function(r){return i.init?{init:!1,acc:r}:{init:!1,acc:c(i.acc)(c(s)(r))}}};return t(d)({init:!0,acc:v})(a).acc}}}};var Yt={foldr:function(e){return function(t){return function(n){if(n instanceof G)return t;if(n instanceof z)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof G)return t;if(n instanceof z)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=at(e);return function(n){return function(c){if(c instanceof G)return t;if(c instanceof z)return n(c.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,c.constructor.name])}}}};var op={foldr:function(e){return function(t){return function(n){if(n instanceof Ue)return t;if(n instanceof Oe)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof Ue)return t;if(n instanceof Oe)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=at(e);return function(n){return function(c){if(c instanceof Ue)return t;if(c instanceof Oe)return n(c.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,c.constructor.name])}}}};var hT=function(e){var t=Nt(e);return function(n){var c=me(n.Semigroup0()),v=at(n);return function(s){return t(function(a){return function(d){return c(s(a))(d)}})(v)}}},Mt={foldr:rT,foldl:oT,foldMap:function(e){return hT(Mt)(e)}};var Ut=function(e){return e.foldMap};var ap=function(e){var t=Ut(e)(sT);return function(n){var c=We(n);return function(v){var s=t(function(a){var d=c(v)(a.value0);return d?new z(a.value1):G.value});return function(a){return oH(s(a))}}}};var Uu=function(e){var t=Ut(e);return function(n){return t(n)(rH)}};var gT=function(){function e(v){return[v]}function t(v){return function(s){return[v,s]}}function n(v){return function(s){return function(a){return[v,s,a]}}}function c(v){return function(s){return v.concat(s)}}return function(v){return function(s){return function(a){return function(d){return function(i){function r(u,l){switch(l-u){case 0:return a([]);case 1:return s(e)(d(i[u]));case 2:return v(s(t)(d(i[u])))(d(i[u+1]));case 3:return v(v(s(n)(d(i[u])))(d(i[u+1])))(d(i[u+2]));default:var p=u+Math.floor((l-u)/4)*2;return v(s(c)(r(u,p)))(r(p,l))}}return r(0,i.length)}}}}}}();var NH=ge(De),vn=function(e){return e.traverse};var Il={traverse:function(e){var t=ee(e),n=V(e.Apply0().Functor0());return function(c){return function(v){if(v instanceof G)return t(G.value);if(v instanceof z)return n(z.create)(c(v.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[c.constructor.name,v.constructor.name])}}},sequence:function(e){var t=ee(e),n=V(e.Apply0().Functor0());return function(c){if(c instanceof G)return t(G.value);if(c instanceof z)return n(z.create)(c.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[c.constructor.name])}},Functor0:function(){return Tt},Foldable1:function(){return Yt}};var TT=function(e){var t=vn(e);return function(n){return t(n)(NH)}},Li={traverse:function(e){var t=e.Apply0();return gT(ut(t))(V(t.Functor0()))(ee(e))},sequence:function(e){return TT(Li)(e)},Functor0:function(){return It},Foldable1:function(){return Mt}};var MT=function(e){return function(t){return function(n){return function(c){return function(v){return function(s){for(var a=[],d=s;;){var i=v(d);if(e(i))return a;var r=t(i);a.push(n(r)),d=c(r)}}}}}}};var LT=function(e){return function(t){return function(n){return function(c){return function(v){return function(s){for(var a=[],d=s;;){var i=v(d);a.push(n(i));var r=c(i);if(e(r))return a;d=t(r)}}}}}}};var cp=function(e){return e.foldl1};var jH=Qr();var Qm={unfoldr1:LT(ka)(jH)(Nn)(on)};var QH=Qr(),na=function(e){return e.unfoldr};var ec={unfoldr:MT(ka)(QH)(Nn)(on),Unfoldable10:function(){return Qm}};var oP=Qr();var aP=me(jt);var fp=function(){return ym(be(G.value))(function(e){return function(t){return new z({head:e,tail:t})}})}();var Zm=function(){return ym(be(G.value))(function(e){return function(t){return new z(t)}})}();var IT=function(e){return uE(e)(function(t){if(t instanceof pe)return 1;if(t instanceof Ie)return 0;if(t instanceof fe)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[t.constructor.name])})};var eg=function(e){var t=Te(e);return function(n){return IT(t)(n)}};var nc=function(e){return[e]},RT=function(e){return Kr(e)===0};var $T=function(){return oE(z.create)(G.value)}();var dp=function(e){return $T(e)(0)};var pp=function(e){return rE(Nt(e))};var kT=function(){return aE(z.create)(G.value)}();var tg=function(e){return function(t){var n=e<1;return n?t:kd(e)(Kr(t))(t)}};var OT=function(){return iE(z.create)(G.value)}(),ng=function(e){return function(t){return function(n){return n.length===0?[]:tt(n)(function(c){return oP(OT(c)(n))})(kT(e(t))(n))}}};var Dn=function(e){return function(t){return aP([e])(t)}};var rg=Ve(ae(yi)),ra=function(e){return rg(function(){var t=tt([])(nc);return function(n){return t(e(n))}}())};var iP=function(){function e(a){this.fn=a}var t={},n=function(a,d){this.head=a,this.tail=d};function c(a){return new n(a,t)}function v(a){return function(d){return new n(a,d)}}function s(a){for(var d=[],i=a;i!==t;)d.push(i.head),i=i.tail;return d}return function(a){return function(d){return function(i){var r=function(l,p){return a(d(v)(i(l)))(p)},u=function(l,p,f){if(p===0)return l;var o=f[p-1];return new e(function(){var h=u(r(o,l),p-1,f);return h})};return function(l){for(var p=d(c)(i(l[l.length-1])),f=u(p,l.length-1,l);f instanceof e;)f=f.fn();return d(s)(f)}}}}}();var jn=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var _p=function(e){var t=Rr(e);return function(n){return new jn(n,t)}};var vp=function(e){var t=bn(e.Plus1().Alt0()),n=ee(e.Applicative0());return function(c){return t(n(c.value0))(c.value1)}};var rc=function(e){var t=V(e);return{map:function(n){return function(c){return new jn(n(c.value0),t(n)(c.value1))}}}};var Ol=function(e){var t=Ut(e),n=Ht(e),c=Nt(e);return{foldMap:function(v){var s=me(v.Semigroup0()),a=t(v);return function(d){return function(i){return s(d(i.value0))(a(d)(i.value1))}}},foldl:function(v){return function(s){return function(a){return n(v)(v(s)(a.value0))(a.value1)}}},foldr:function(v){return function(s){return function(a){return v(a.value0)(c(v)(s)(a.value1))}}}}};var ug=function(e){var t=Ht(e),n=Nt(e),c=Ol(e);return{foldMap1:function(v){var s=me(v);return function(a){return function(d){return t(function(i){return function(r){return s(i)(a(r))}})(a(d.value0))(d.value1)}}},foldr1:function(v){return function(s){return tt(s.value0)(v(s.value0))(n(function(a){var d=tt(a)(v(a));return function(i){return z.create(d(i))}})(G.value)(s.value1))}},foldl1:function(v){return function(s){return t(v)(s.value0)(s.value1)}},Foldable0:function(){return c}}};var NT=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Kn=function(e){return e};var mp=function(e){return function(t){return t.toString(e)}};var gp=isFinite;var Hl=Math.abs;var Pl=function(e){return function(t){return e%t}},cg=Math.round;var WT=Xo(Wd),UT=Ia(Wd);var lg=16;var fg=function(){return NT(z.create)(G.value)}(),EP=function(e){if(!gp(e))return 0;if(e>=Kn(WT))return WT;if(e<=Kn(UT))return UT;if(tn)return Ln(0)(fg(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},oc=function(e){return EP(cg(e))};var TP=typeof Array.from=="function",Nee=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",Bee=typeof String.prototype.fromCodePoint=="function",MP=typeof String.prototype.codePointAt=="function",qT=function(e){return MP?function(t){return t.codePointAt(0)}:e};var zT=function(e){return function(t){return TP?function(n){return Array.from(n,t)}:e}};function Ai(e){return e.charCodeAt(0)}function VT(e){return String.fromCharCode(e)}var Nl={Applicative0:function(){return qs},Plus1:function(){return aT}};var GT=Ia(Cl),JT=Xo(Cl);var jT=function(e){return e.fromEnum};var Ii=function(e){return function(t){return function(n){return e(t(n)+1|0)}}},Ri=function(e){return function(t){return function(n){return e(t(n)-1|0)}}};var dg=function(e){return e>=Ai(GT)&&e<=Ai(JT)?new z(VT(e)):G.value},RP={succ:Ii(dg)(Ai),pred:Ri(dg)(Ai),Ord0:function(){return Nd}};var KT=function(){return{cardinality:Ai(JT)-Ai(GT)|0,toEnum:dg,fromEnum:Ai,Bounded0:function(){return Cl},Enum1:function(){return RP}}}();var zu=function(e){return e.length};var yp=function(e){return function(t){return t.substr(0,e)}},ic=function(e){return function(t){return t.substring(e)}};var $i=function(e){return function(t){if(e>=0&&e<t.length)return t.charAt(e);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var YT=function(e){return function(t){return ic(zu(t)-e|0)(t)}};var Dp=function(e){return function(t){return yp(zu(t)-e|0)(t)}};var pg=function(e){return function(t){return t.split(e)}};var to=function(e){return function(t){return t.join(e)}};var n1=function(e){return e===""};var Wl=jT(KT),UP=V(Tt),qP=na(ec);var o1=function(e){return function(t){return(((e-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var a1=function(e){return 56320<=e&&e<=57343},i1=function(e){return 55296<=e&&e<=56319},zP=function(e){var t=zu(e);if(t===0)return G.value;if(t===1)return new z({head:Wl($i(0)(e)),tail:""});var n=Wl($i(1)(e)),c=Wl($i(0)(e)),v=i1(c)&&a1(n);return v?new z({head:o1(c)(n),tail:ic(2)(e)}):new z({head:c,tail:ic(1)(e)})},VP=function(e){return UP(function(t){return new ne(t.head,t.tail)})(zP(e))},GP=function(e){return qP(VP)(e)},JP=function(e){var t=Wl($i(0)(e)),n=i1(t)&&zu(e)>1;if(n){var c=Wl($i(1)(e)),v=a1(c);return v?o1(t)(c):t}return t},jP=qT(JP),KP=zT(GP)(jP),Vu=function(e){return Kr(KP(e))};var hg=bm(Sn),u1=Dl(Sn),s1=Bd(Sn);var _g=bm(Gs);var c1=Fe(To);var l1=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),f1=function(e){return function(t){return Pl(Pl(e)(t)+t)(t)}},eN=function(e){return function(t){return function(n){return function(c){var v=hg(0)(255)(e),s=Kn(v)/255,a=hg(0)(255)(t),d=Kn(a)/255,i=hg(0)(255)(n),r=u1(u1(v)(a))(i),u=s1(s1(v)(a))(i),l=r-u|0,p=Kn(l)/255,f=Kn(r+u|0)/(255*2),o=function(){if(l===0)return 0;if(tn)return p/(1-Hl(2*f-1));throw new Error("Failed pattern match at Color (line 160, column 3 - line 162, column 64): "+[])}(),h=Kn(i)/255,_=function(y){if(y===0)return 0;if(r===v)return f1((d-h)/p)(6);if(r===a)return(h-s)/p+2;if(tn)return(s-d)/p+4;throw new Error("Failed pattern match at Color (line 150, column 3 - line 150, column 15): "+[y.constructor.name])},m=60*_(l);return new l1(m,o,f,c)}}}},Gu=function(e){return function(t){return function(n){return eN(e)(t)(n)(1)}}};var tN=function(e){return function(t){return function(n){return function(c){var v=_g(0)(1)(t),s=_g(0)(1)(n),a=_g(0)(1)(c);return new l1(e,v,s,a)}}}};var d1=function(e){return function(t){return function(n){return tN(e)(t)(n)(1)}}},p1=d1(0)(0)(1);var h1=function(e){var t=function(d){return c1(Kn(oc(100*d))/100)},n=t(e.value1*100)+"%",c=t(e.value2*100)+"%",v=t(e.value0),s=c1(e.value3),a=e.value3===1;return a?"hsl("+(v+(", "+(n+(", "+(c+")"))))):"hsla("+(v+(", "+(n+(", "+(c+(", "+(s+")")))))))};var nN=function(e){var t=e===360;return t?e:f1(e)(360)};var rN=function(e){var t=nN(e.value0)/60,n=(1-Hl(2*e.value2-1))*e.value1,c=e.value2-n/2,v=n*(1-Hl(Pl(t)(2)-1)),s=function(){if(t<1)return{r:n,g:v,b:0};if(1<=t&&t<2)return{r:v,g:n,b:0};if(2<=t&&t<3)return{r:0,g:n,b:v};if(3<=t&&t<4)return{r:0,g:v,b:n};if(4<=t&&t<5)return{r:v,g:0,b:n};if(tn)return{r:n,g:0,b:v};throw new Error("Failed pattern match at Color (line 356, column 3 - line 362, column 43): "+[])}();return{r:s.r+c,g:s.g+c,b:s.b+c,a:e.value3}};var oN=function(e){var t=rN(e),n=oc(255*t.g),c=oc(255*t.r),v=oc(255*t.b);return{r:c,g:n,b:v,a:t.a}};var cc=function(e){var t=function(v){var s=mp(lg)(v),a=Vu(s)===1;return a?"0"+s:s},n=oN(e),c=function(){if(n.a===1)return"";if(tn)return t(oc(255*n.a));throw new Error("Failed pattern match at Color (line 429, column 3 - line 431, column 46): "+[])}();return"#"+(t(n.r)+(t(n.g)+(t(n.b)+c)))};var vg=d1(0)(0)(0);var Ye=function(){function e(){}return e.value=new e,e}(),Re=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mg=function(e){return e},lN=function(e){return new Re(e.value0,e.value1)};var fN=function(e){var t=function(n){return function(c){var v=n,s=!1,a;function d(i,r){if(r instanceof Re&&r.value1 instanceof Re&&r.value1.value1 instanceof Re){v=new Re(r,i),c=r.value1.value1.value1;return}var u=function(p){return p instanceof Re&&p.value1 instanceof Re&&p.value1.value1 instanceof Ye?new Re(e(p.value0),new Re(e(p.value1.value0),Ye.value)):p instanceof Re&&p.value1 instanceof Ye?new Re(e(p.value0),Ye.value):Ye.value},l=function(p){return function(f){var o=p,h=!1,_;function m(y,C){if(y instanceof Re&&y.value0 instanceof Re&&y.value0.value1 instanceof Re&&y.value0.value1.value1 instanceof Re){o=y.value1,f=new Re(e(y.value0.value0),new Re(e(y.value0.value1.value0),new Re(e(y.value0.value1.value1.value0),C)));return}return h=!0,C}for(;!h;)_=m(o,f);return _}};return s=!0,l(i)(u(r))}for(;!s;)a=d(v,c);return a}};return t(Ye.value)},gg={map:fN};var $r={foldr:function(e){return function(t){var n=function(){var v=function(s){return function(a){var d=s,i=!1,r;function u(l,p){if(p instanceof Ye)return i=!0,l;if(p instanceof Re){d=new Re(p.value0,l),a=p.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[l.constructor.name,p.constructor.name])}for(;!i;)r=u(d,a);return r}};return v(Ye.value)}(),c=Ht($r)(Ve(e))(t);return function(v){return c(n(v))}}},foldl:function(e){var t=function(n){return function(c){var v=n,s=!1,a;function d(i,r){if(r instanceof Ye)return s=!0,i;if(r instanceof Re){v=e(i)(r.value0),c=r.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[r.constructor.name])}for(;!s;)a=d(v,c);return a}};return t},foldMap:function(e){var t=me(e.Semigroup0()),n=at(e);return function(c){return Ht($r)(function(v){var s=t(v);return function(a){return s(c(a))}})(n)}}};var dN=Nt($r);var Cp={append:function(e){return function(t){return dN(Re.create)(t)(e)}}},y1=me(Cp);var D1={append:function(e){return function(t){return new jn(e.value0,y1(e.value1)(lN(t)))}}};var pN={alt:y1,Functor0:function(){return gg}},C1=function(){return{empty:Ye.value,Alt0:function(){return pN}}}();var Ju=function(){var e=function(t){return function(n){var c=t,v=!1,s;function a(d,i){if(i instanceof Ye)return v=!0,d;if(i instanceof Re){c=new Re(i.value0,d),n=i.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[d.constructor.name,i.constructor.name])}for(;!v;)s=a(c,n);return s}};return e(Ye.value)}();var T1=function(e){return e instanceof Ye};var bp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var L1=function(e){var t=!1,n;function c(v){if(v.value0 instanceof Ye&&v.value1 instanceof Ye)return t=!0,G.value;if(v.value0 instanceof Ye){e=new bp(Ju(v.value1),Ye.value);return}if(v.value0 instanceof Re)return t=!0,new z(new ne(v.value0.value0,new bp(v.value0.value1,v.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[v.constructor.name])}for(;!t;)n=c(e);return n},F1=function(e){return function(t){return new bp(e.value0,new Re(t,e.value1))}};var x1=function(e){return e.value0 instanceof Ye&&e.value1 instanceof Ye};var A1=function(){return new bp(Ye.value,Ye.value)}();var fc=function(){function e(){}return e.value=new e,e}(),wp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var I1=function(e){return function(t){if(e instanceof fc)return t;if(t instanceof fc)return e;if(e instanceof wp)return new wp(e.value0,F1(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},CN=function(e){return function(t){return function(n){var c=function(s){return function(a){return function(d){var i=s,r=a,u=!1,l;function p(f,o,h){if(h instanceof Ye)return u=!0,o;if(h instanceof Re){i=f,r=f(o)(h.value0),d=h.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[f.constructor.name,o.constructor.name,h.constructor.name])}for(;!u;)l=p(i,r,d);return l}}},v=function(s){return function(a){var d=s,i=!1,r;function u(l,p){var f=L1(l);if(f instanceof G)return i=!0,c(function(o){return function(h){return h(o)}})(t)(p);if(f instanceof z){d=f.value0.value1,a=new Re(e(f.value0.value0),p);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[f.constructor.name])}for(;!i;)r=u(d,a);return r}};return v(n)(Ye.value)}}},R1=function(e){if(e instanceof fc)return G.value;if(e instanceof wp)return new z(new ne(e.value0,function(){var t=x1(e.value1);return t?fc.value:CN(I1)(fc.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var $1=function(){return fc.value}(),k1=I1;var O1={append:k1};var H1=function(e){return function(t){return k1(e)(new wp(t,A1))}};var wN=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},SN=me(O1);var yg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ql=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),P1=function(e){var t=!1,n;function c(v){var s=function(i){return i},a=function(i){return function(r){return new yg(i.value0,SN(i.value1)(r))}};if(v.value0 instanceof ql){var d=R1(v.value1);if(d instanceof G)return t=!0,new ql(v.value0.value0);if(d instanceof z){e=a(s(d.value0.value0)(v.value0.value0))(d.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[d.constructor.name])}if(v.value0 instanceof zl)return t=!0,new zl(v.value0.value0,function(i){return a(v.value0.value1(i))(v.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[v.value0.constructor.name])}for(;!t;)n=c(e);return n},aa=function(e){var t=V(e);return function(n){var c=n.Monad0(),v=V(c.Bind1().Apply0().Functor0()),s=ee(c.Applicative0()),a=ar(n);return function(d){var i=function(r){var u=P1(r);if(u instanceof ql)return v(rn.create)(s(u.value0));if(u instanceof zl)return v(_n.create)(d(t(u.value1)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[u.constructor.name])};return a(i)}}};var N1=function(e){return new yg(e,$1)};var dc={Applicative0:function(){return vr},Bind1:function(){return Qn}},Ba={map:function(e){return function(t){return ln(Qn)(function(){var n=ee(vr);return function(c){return n(e(c))}}())(t)}}},Qn={bind:function(e){return function(t){return new yg(e.value0,H1(e.value1)(t))}},Apply0:function(){return Dg(0)}},vr={pure:function(e){return N1(ql.create(e))},Apply0:function(){return Dg(0)}},Dg=wN("freeApply","Control.Monad.Free",function(){return{apply:zn(dc),Functor0:function(){return Ba}}}),Sp=Dg(77);var EN=ee(vr);var _t=function(e){return N1(new zl(e,function(t){return EN(t)}))};var B1=function(e){var t=e.Monad0(),n=V(t.Bind1().Apply0().Functor0()),c=ee(t.Applicative0()),v=ar(e);return function(s){var a=function(d){var i=P1(d);if(i instanceof ql)return n(rn.create)(c(i.value0));if(i instanceof zl)return n(function(r){return _n.create(i.value1(r))})(s(i.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[i.constructor.name])};return v(a)}};var no=function(e){return e.state},pc=function(e){var t=no(e);return function(n){return t(function(c){return new ne(void 0,n)})}},mr=function(e){var t=no(e);return function(n){return t(function(c){return new ne(void 0,n(c))})}},Ku=function(e){var t=no(e);return function(n){return t(function(c){var v=n(c);return new ne(v,v)})}},Qu=function(e){var t=no(e);return function(n){return t(function(c){return new ne(n(c),c)})}},gr=function(e){return no(e)(function(t){return new ne(t,t)})};var MN={dimap:function(e){return function(t){return function(n){return function(c){return n(e(c))}}}}},ki={first:function(e){return function(t){return e(Nn(t))}},second:function(e){return function(t){return e(on(t))}},Profunctor0:function(){return MN}};var Ep={dimap:function(e){return function(t){return function(n){return function(c){return t(n(e(c)))}}}}},Xu=function(e){return e.dimap};var mo={first:function(e){return function(t){return new ne(e(t.value0),t.value1)}},second:V(Na),Profunctor0:function(){return Ep}},Yu=function(e){return e.second},hc=function(e){return e.first};var PN=fn(),NN=ge(De);var BN=function(e){return PN(e(NN))},Dr=function(e){return function(t){return BN(t)(e)}};var Mp=function(e){return e},Or=function(e){return function(t){return Mp(e)(be(t))}};var Bn=function(){var e={},t="Pure",n="Throw",c="Catch",v="Sync",s="Async",a="Bind",d="Bracket",i="Fork",r="Sequential",u="Map",l="Apply",p="Alt",f="Cons",o="Resume",h="Release",_="Finalizer",m="Finalized",y="Forked",C="Fiber",E="Thunk";function D(N,K,O,B){this.tag=N,this._1=K,this._2=O,this._3=B}function g(N){var K=function(O,B,W){return new D(N,O,B,W)};return K.tag=N,K}function b(N){return new D(t,void 0)}function L(N){try{N()}catch(K){setTimeout(function(){throw K},0)}}function S(N,K,O){try{return K(O())}catch(B){return N(B)}}function T(N,K,O){try{return K(O)()}catch(B){return O(N(B))(),b}}var M=function(){var N=1024,K=0,O=0,B=new Array(N),W=!1;function P(){var Y;for(W=!0;K!==0;)K--,Y=B[O],B[O]=void 0,O=(O+1)%N,Y();W=!1}return{isDraining:function(){return W},enqueue:function(Y){var J,ve;K===N&&(ve=W,P(),W=ve),B[(O+K)%N]=Y,K++,W||P()}}}();function w(N){var K={},O=0,B=0;return{register:function(W){var P=O++;W.onComplete({rethrow:!0,handler:function(Y){return function(){B--,delete K[P]}}})(),K[P]=W,B++},isEmpty:function(){return B===0},killAll:function(W,P){return function(){if(B===0)return P();var Y=0,J={};function ve(Ce){J[Ce]=K[Ce].kill(W,function(se){return function(){delete J[Ce],Y--,N.isLeft(se)&&N.fromLeft(se)&&setTimeout(function(){throw N.fromLeft(se)},0),Y===0&&P()}})()}for(var Ee in K)K.hasOwnProperty(Ee)&&(Y++,ve(Ee));return K={},O=0,B=0,function(Ce){return new D(v,function(){for(var se in J)J.hasOwnProperty(se)&&J[se]()})}}}}}var F=0,x=1,R=2,A=3,I=4,$=5,k=6;function H(N,K,O){var B=0,W=F,P=O,Y=null,J=null,ve=null,Ee=null,Ce=null,se=0,Se=0,Ct=null,Jt=!0;function Bt(le){for(var oe,j,ie;;)switch(oe=null,j=null,ie=null,W){case R:W=x;try{P=ve(P),Ee===null?ve=null:(ve=Ee._1,Ee=Ee._2)}catch(Be){W=$,Y=N.left(Be),P=null}break;case A:N.isLeft(P)?(W=$,Y=P,P=null):ve===null?W=$:(W=R,P=N.fromRight(P));break;case x:switch(P.tag){case a:ve&&(Ee=new D(f,ve,Ee)),ve=P._2,W=x,P=P._1;break;case t:ve===null?(W=$,P=N.right(P._1)):(W=R,P=P._1);break;case v:W=A,P=S(N.left,N.right,P._1);break;case s:W=I,P=T(N.left,P._1,function(Be){return function(){B===le&&(B++,M.enqueue(function(){B===le+1&&(W=A,P=Be,Bt(B))}))}});return;case n:W=$,Y=N.left(P._1),P=null;break;case c:ve===null?Ce=new D(f,P,Ce,J):Ce=new D(f,P,new D(f,new D(o,ve,Ee),Ce,J),J),ve=null,Ee=null,W=x,P=P._1;break;case d:se++,ve===null?Ce=new D(f,P,Ce,J):Ce=new D(f,P,new D(f,new D(o,ve,Ee),Ce,J),J),ve=null,Ee=null,W=x,P=P._1;break;case i:W=A,oe=H(N,K,P._2),K&&K.register(oe),P._1&&oe.run(),P=N.right(oe);break;case r:W=x,P=q(N,K,P._1);break}break;case $:if(ve=null,Ee=null,Ce===null)W=k,P=J||Y||P;else switch(oe=Ce._3,ie=Ce._1,Ce=Ce._2,ie.tag){case c:J&&J!==oe&&se===0?W=$:Y&&(W=x,P=ie._2(N.fromLeft(Y)),Y=null);break;case o:J&&J!==oe&&se===0||Y?W=$:(ve=ie._1,Ee=ie._2,W=R,P=N.fromRight(P));break;case d:se--,Y===null&&(j=N.fromRight(P),Ce=new D(f,new D(h,ie._2,j),Ce,oe),(J===oe||se>0)&&(W=x,P=ie._3(j)));break;case h:Ce=new D(f,new D(m,P,Y),Ce,J),W=x,J&&J!==oe&&se===0?P=ie._1.killed(N.fromLeft(J))(ie._2):Y?P=ie._1.failed(N.fromLeft(Y))(ie._2):P=ie._1.completed(N.fromRight(P))(ie._2),Y=null,se++;break;case _:se++,Ce=new D(f,new D(m,P,Y),Ce,J),W=x,P=ie._1;break;case m:se--,W=$,P=ie._1,Y=ie._2;break}break;case k:for(var de in Ct)Ct.hasOwnProperty(de)&&(Jt=Jt&&Ct[de].rethrow,L(Ct[de].handler(P)));Ct=null,J&&Y?setTimeout(function(){throw N.fromLeft(Y)},0):N.isLeft(P)&&Jt&&setTimeout(function(){if(Jt)throw N.fromLeft(P)},0);return;case F:W=x;break;case I:return}}function Ze(le){return function(){if(W===k)return Jt=Jt&&le.rethrow,le.handler(P)(),function(){};var oe=Se++;return Ct=Ct||{},Ct[oe]=le,function(){Ct!==null&&delete Ct[oe]}}}function ce(le,oe){return function(){if(W===k)return oe(N.right(void 0))(),function(){};var j=Ze({rethrow:!1,handler:function(){return oe(N.right(void 0))}})();switch(W){case F:J=N.left(le),W=k,P=J,Bt(B);break;case I:J===null&&(J=N.left(le)),se===0&&(W===I&&(Ce=new D(f,new D(_,P(le)),Ce,J)),W=$,P=null,Y=null,Bt(++B));break;default:J===null&&(J=N.left(le)),se===0&&(W=$,P=null,Y=null)}return j}}function he(le){return function(){var oe=Ze({rethrow:!1,handler:le})();return W===F&&Bt(B),oe}}return{kill:ce,join:he,onComplete:Ze,isSuspended:function(){return W===F},run:function(){W===F&&(M.isDraining()?Bt(B):M.enqueue(function(){Bt(B)}))}}}function U(N,K,O,B){var W=0,P={},Y=0,J={},ve=new Error("[ParAff] Early exit"),Ee=null,Ce=e;function se(Ze,ce,he){var le=ce,oe=null,j=null,ie=0,de={},Be,nt;e:for(;;)switch(Be=null,le.tag){case y:if(le._3===e&&(Be=P[le._1],de[ie++]=Be.kill(Ze,function(st){return function(){ie--,ie===0&&he(st)()}})),oe===null)break e;le=oe._2,j===null?oe=null:(oe=j._1,j=j._2);break;case u:le=le._2;break;case l:case p:oe&&(j=new D(f,oe,j)),oe=le,le=le._1;break}if(ie===0)he(N.right(void 0))();else for(nt=0,Be=ie;nt<Be;nt++)de[nt]=de[nt]();return de}function Se(Ze,ce,he){var le,oe,j,ie,de,Be;N.isLeft(Ze)?(le=Ze,oe=null):(oe=Ze,le=null);e:for(;;){if(j=null,ie=null,de=null,Be=null,Ee!==null)return;if(ce===null){B(le||oe)();return}if(ce._3!==e)return;switch(ce.tag){case u:le===null?(ce._3=N.right(ce._1(N.fromRight(oe))),oe=ce._3):ce._3=le;break;case l:if(j=ce._1._3,ie=ce._2._3,le){if(ce._3=le,de=!0,Be=Y++,J[Be]=se(ve,le===j?ce._2:ce._1,function(){return function(){delete J[Be],de?de=!1:he===null?Se(le,null,null):Se(le,he._1,he._2)}}),de){de=!1;return}}else{if(j===e||ie===e)return;oe=N.right(N.fromRight(j)(N.fromRight(ie))),ce._3=oe}break;case p:if(j=ce._1._3,ie=ce._2._3,j===e&&N.isLeft(ie)||ie===e&&N.isLeft(j))return;if(j!==e&&N.isLeft(j)&&ie!==e&&N.isLeft(ie))le=oe===j?ie:j,oe=null,ce._3=le;else if(ce._3=oe,de=!0,Be=Y++,J[Be]=se(ve,oe===j?ce._2:ce._1,function(){return function(){delete J[Be],de?de=!1:he===null?Se(oe,null,null):Se(oe,he._1,he._2)}}),de){de=!1;return}break}he===null?ce=null:(ce=he._1,he=he._2)}}function Ct(Ze){return function(ce){return function(){delete P[Ze._1],Ze._3=ce,Se(ce,Ze._2._1,Ze._2._2)}}}function Jt(){var Ze=x,ce=O,he=null,le=null,oe,j;e:for(;;)switch(oe=null,j=null,Ze){case x:switch(ce.tag){case u:he&&(le=new D(f,he,le)),he=new D(u,ce._1,e,e),ce=ce._2;break;case l:he&&(le=new D(f,he,le)),he=new D(l,e,ce._2,e),ce=ce._1;break;case p:he&&(le=new D(f,he,le)),he=new D(p,e,ce._2,e),ce=ce._1;break;default:j=W++,Ze=$,oe=ce,ce=new D(y,j,new D(f,he,le),e),oe=H(N,K,oe),oe.onComplete({rethrow:!1,handler:Ct(ce)})(),P[j]=oe,K&&K.register(oe)}break;case $:if(he===null)break e;he._1===e?(he._1=ce,Ze=x,ce=he._2,he._2=e):(he._2=ce,ce=he,le===null?he=null:(he=le._1,le=le._2))}for(Ce=ce,j=0;j<W;j++)P[j].run()}function Bt(Ze,ce){Ee=N.left(Ze);var he;for(var le in J)if(J.hasOwnProperty(le)){he=J[le];for(le in he)he.hasOwnProperty(le)&&he[le]()}J=null;var oe=se(Ze,Ce,ce);return function(j){return new D(s,function(ie){return function(){for(var de in oe)oe.hasOwnProperty(de)&&oe[de]();return b}})}}return Jt(),function(Ze){return new D(s,function(ce){return function(){return Bt(Ze,ce)}})}}function q(N,K,O){return new D(s,function(B){return function(){return U(N,K,O,B)}})}return D.EMPTY=e,D.Pure=g(t),D.Throw=g(n),D.Catch=g(c),D.Sync=g(v),D.Async=g(s),D.Bind=g(a),D.Bracket=g(d),D.Fork=g(i),D.Seq=g(r),D.ParMap=g(u),D.ParApply=g(l),D.ParAlt=g(p),D.Fiber=H,D.Supervisor=w,D.Scheduler=M,D.nonCanceler=b,D}(),X1=Bn.Pure,Y1=Bn.Throw;function Z1(e){return function(t){return Bn.Catch(e,t)}}function eM(e){return function(t){return t.tag===Bn.Pure.tag?Bn.Pure(e(t._1)):Bn.Bind(t,function(n){return Bn.Pure(e(n))})}}function tM(e){return function(t){return Bn.Bind(e,t)}}function wg(e){return function(t){return Bn.Fork(e,t)}}var nM=Bn.Sync;function rM(e){return function(t){return Bn.ParMap(e,t)}}function oM(e){return function(t){return Bn.ParApply(e,t)}}var xo=Bn.Async;function Lp(e){return function(t){return function(n){return Bn.Bracket(e,t,n)}}}function aM(e,t){return function(){return Bn.Fiber(e,null,t)}}var WN=function(){function e(n,c){return n===0&&typeof setImmediate<"u"?setImmediate(c):setTimeout(c,n)}function t(n,c){return n===0&&typeof clearImmediate<"u"?clearImmediate(c):clearTimeout(c)}return function(n,c){return Bn.Async(function(v){return function(){var s=e(c,v(n()));return function(){return Bn.Sync(function(){return n(t(c,s))})}}})}}(),iM=Bn.Seq;function $n(e){return new Error(e)}function Hr(e){return function(){throw e}}function Fp(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var uM=function(e){return Hr($n(e))};var Cr=function(e){return e.throwError};var VN={throwError:Hr,Monad0:function(){return ea}};var sM={catchError:Ve(Fp),MonadThrow0:function(){return VN}};var sa=function(e){return e.catchError};var Vl=function(e){var t=sa(e),n=e.MonadThrow0().Monad0(),c=V(n.Bind1().Apply0().Functor0()),v=ee(n.Applicative0());return function(s){return t(c(Oe.create)(s))(function(a){return v(Ue.create(a))})}};var br=function(e){return e.ask};var St=function(e){return e.lift};var xp={liftEffect:ge(De),Monad0:function(){return ea}},Je=function(e){return e.liftEffect};var Wa=function(e){return e.tell};var KN=V(wi);var Sg=function(e){return e};var Eg=function(e){return e};var Ap=function(e){return function(t){return e(t)}},Ip=function(e){var t=V(e);return{map:function(n){return Ap(t(KN(n)))}}};var Tg=function(e){return{Applicative0:function(){return Xl(e)},Bind1:function(){return Rp(e)}}},Rp=function(e){var t=ae(e.Bind1()),n=ee(e.Applicative0());return{bind:function(c){return function(v){return t(c)(yn(function(s){return n(Ue.create(s))})(function(s){var a=v(s);return a}))}},Apply0:function(){return lM(e)}}},lM=function(e){var t=Ip(e.Bind1().Apply0().Functor0());return{apply:zn(Tg(e)),Functor0:function(){return t}}},Xl=function(e){return{pure:function(){var t=ee(e.Applicative0());return function(n){return Sg(t(Oe.create(n)))}}(),Apply0:function(){return lM(e)}}};var fM=function(e){var t=Tg(e);return{throwError:function(){var n=ee(e.Applicative0());return function(c){return Sg(n(Ue.create(c)))}}(),Monad0:function(){return t}}};var dM=function(e){var t=me(e);return function(n){var c=n.Bind1(),v=ae(c),s=ee(n.Applicative0()),a=Ip(c.Apply0().Functor0());return{alt:function(d){return function(i){return v(d)(function(r){if(r instanceof Oe)return s(new Oe(r.value0));if(r instanceof Ue)return v(i)(function(u){if(u instanceof Oe)return s(new Oe(u.value0));if(u instanceof Ue)return s(new Ue(t(r.value0)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[u.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[r.constructor.name])})}},Functor0:function(){return a}}}};var QN=V(Tt);var Mg=function(e){return e},pM=function(e){return e};var $p={lift:function(e){var t=lE(e)(z.create);return function(n){return Mg(t(n))}}},XN=St($p);var YN=function(e){var t=V(e);return{map:function(n){return function(c){return t(QN(n))(c)}}}},kp=function(e){return{Applicative0:function(){return Fg(e)},Bind1:function(){return Lg(e)}}},Lg=function(e){var t=ae(e.Bind1()),n=ee(e.Applicative0());return{bind:function(c){return function(v){return t(c)(function(s){if(s instanceof G)return n(G.value);if(s instanceof z){var a=v(s.value0);return a}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[s.constructor.name])})}},Apply0:function(){return hM(e)}}},hM=function(e){var t=YN(e.Bind1().Apply0().Functor0());return{apply:zn(kp(e)),Functor0:function(){return t}}},Fg=function(e){return{pure:function(){var t=ee(e.Applicative0());return function(n){return Mg(t(z.create(n)))}}(),Apply0:function(){return hM(e)}}};var _M=function(e){var t=ar(e),n=e.Monad0(),c=ae(n.Bind1()),v=ee(n.Applicative0()),s=kp(n);return{tailRecM:function(a){var d=t(function(i){var r=a(i);return c(r)(function(u){return v(function(){if(u instanceof G)return new rn(G.value);if(u instanceof z&&u.value0 instanceof _n)return new _n(u.value0.value0);if(u instanceof z&&u.value0 instanceof rn)return new rn(new z(u.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[u.constructor.name])}())})});return function(i){return Mg(d(i))}},Monad0:function(){return s}}},vM=function(e){var t=e.Monad0(),n=XN(t),c=no(e),v=kp(t);return{state:function(s){return n(c(s))},Monad0:function(){return v}}};var mM=function(e){return e};var Io=function(e){return e};var mc={lift:function(e){return function(t){return mM(be(t))}}},ZN=St(mc),gM=function(e){return function(t){return function(n){return e(t(n))}}},e5=function(e){return{map:function(){var t=V(e);return function(n){return gM(t(n))}}()}};var yM=function(e){var t=ut(e),n=e5(e.Functor0());return{apply:function(c){return function(v){return function(s){return t(c(s))(v(s))}}},Functor0:function(){return n}}},Ua=function(e){var t=ae(e),n=yM(e.Apply0());return{bind:function(c){return function(v){return function(s){return t(c(s))(function(a){var d=v(a);return d(s)})}}},Apply0:function(){return n}}};var gc=function(e){var t=yM(e.Apply0());return{pure:function(){var n=ee(e);return function(c){return mM(be(n(c)))}}(),Apply0:function(){return t}}},Yl=function(e){var t=gc(e.Applicative0()),n=Ua(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},Ni=function(e){var t=Yl(e);return{ask:ee(e.Applicative0()),Monad0:function(){return t}}};var la=function(e){var t=e.Monad0(),n=Yl(t);return{liftEffect:function(){var c=ZN(t),v=Je(e);return function(s){return c(v(s))}}(),Monad0:function(){return n}}},Bi=function(e){var t=e.Monad0(),n=ln(t.Bind1()),c=ee(t.Applicative0()),v=ar(e),s=Yl(t);return{tailRecM:function(a){return function(d){var i=function(r){return function(u){var l=a(u);return n(c)(l(r))}};return function(r){return v(i(r))(d)}}},Monad0:function(){return s}}};var Ag=function(e){return e},Ig=function(e){return e};var Op=function(e){return function(t){return e(t)}},Rg=function(e){var t=V(e);return{map:function(n){return Op(t(function(c){return new ne(n(c.value0),c.value1)}))}}};var Hp=function(e){var t=me(e);return function(n){var c=ut(n),v=n.Functor0(),s=V(v),a=Rg(v);return{apply:function(d){return function(i){var r=function(u){return function(l){return new ne(u.value0(l.value0),t(u.value1)(l.value1))}};return c(s(r)(d))(i)}},Functor0:function(){return a}}}},$g=function(e){var t=me(e),n=Hp(e);return function(c){var v=ae(c),s=c.Apply0(),a=V(s.Functor0()),d=n(s);return{bind:function(i){return function(r){return v(i)(function(u){var l=r(u.value0);return a(function(p){return new ne(p.value0,t(u.value1)(p.value1))})(l)})}},Apply0:function(){return d}}}};var kg=function(e){var t=at(e),n=Hp(e.Semigroup0());return function(c){var v=ee(c),s=n(c.Apply0());return{pure:function(a){return v(new ne(a,t))},Apply0:function(){return s}}}},DM=function(e){var t=kg(e),n=$g(e.Semigroup0());return function(c){var v=t(c.Applicative0()),s=n(c.Bind1());return{Applicative0:function(){return v},Bind1:function(){return s}}}};var CM=function(e){var t=e.Semigroup0(),n=DM(e);return function(c){var v=n(c);return{tell:function(){var s=ee(c.Applicative0()),a=ne.create(void 0);return function(d){return Ag(s(a(d)))}}(),Semigroup0:function(){return t},Monad1:function(){return v}}}};var yc=function(e){return e.sequential},Wi=function(e){return e.parallel};var a5=ge(De),i5=function(e){var t=yc(e),n=wt(e.Applicative1()),c=Wi(e);return function(v){var s=n(v);return function(a){var d=s(function(i){return c(a(i))});return function(i){return t(d(i))}}}};var Dc=function(e){var t=i5(e);return function(n){return t(n)(a5)}};var Zu=function(e){return e()};var wM=function(e){return e()};var SM=function(e){throw new Error(e)};var EM=function(){return SM};var f5=EM(),d5=wM,Ui=function(e){return d5(function(){return f5(e)})};var TM=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},p5=ee(Xt),Ng=yt(He),MM=V(He);var h5=function(e){return e},LM=wg(!1);var _5={map:rM},go={map:eM},v5=V(go),FM=wg(!0),m5=function(){var e=function(c){if(c instanceof Oe)return c.value0;if(c instanceof Ue)return Ui("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[c.constructor.name])},t=function(c){if(c instanceof Ue)return c.value0;if(c instanceof Oe)return Ui("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[c.constructor.name])},n=function(c){if(c instanceof Ue)return!0;if(c instanceof Oe)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[c.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:Ue.create,right:Oe.create}}(),xM=function(e){return aM(m5,e)},AM=function(e){return function(){var n=xM(e)();return n.run(),n}},Bg=function(e){return Ng(AM(e))};var g5=function(e){return function(t){return Lp(e)({killed:be(t),failed:be(t),completed:be(t)})}},y5={apply:oM,Functor0:function(){return _5}};var es={Applicative0:function(){return yo},Bind1:function(){return En}},En={bind:tM,Apply0:function(){return IM(0)}},yo={pure:X1,Apply0:function(){return IM(0)}},IM=TM("applyAff","Effect.Aff",function(){return{apply:zn(es),Functor0:function(){return go}}});var Wp=ee(yo),RM=ae(En);var D5=ln(En);var $M=function(e){return function(t){return g5(Wp(void 0))(be(e))(be(t))}};var Fn={liftEffect:nM,Monad0:function(){return es}},Bp=Je(Fn),ts=function(e){return h5(be(Bp(e)))},Zl=function(e){return xo(function(t){return MM(ts)(e.join(t))})},kM={map:function(e){return function(t){return Zu(xM(v5(e)(Zl(t))))}}};var ef=function(e){return function(t){return RM(Bp(t.isSuspended))(function(n){return n?Bp(Ng(t.kill(e,be(p5(void 0))))):xo(function(c){return MM(ts)(t.kill(e,c))})})}};var Up={throwError:Y1,Monad0:function(){return es}},OM={catchError:Z1,MonadThrow0:function(){return Up}},C5=Vl(OM);var b5=function(e){return function(t){return AM(D5(function(n){return Bp(e(n))})(C5(t)))}},tf=function(e){return function(t){return Ng(b5(e)(t))}};var qi={parallel:Z,sequential:iM,Monad0:function(){return es},Applicative1:function(){return HM(0)}},HM=TM("applicativeParAff","Effect.Aff",function(){return{pure:function(){var e=Wi(qi);return function(t){return e(Wp(t))}}(),Apply0:function(){return y5}}}),Wg=HM(136);var w5=Dc(qi)(Mt);var S5={append:function(e){return function(t){return function(n){return w5([e(n),t(n)])}}}};var ns={tailRecM:function(e){var t=function(n){return RM(e(n))(function(c){if(c instanceof rn)return Wp(c.value0);if(c instanceof _n)return t(c.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[c.constructor.name])})};return t},Monad0:function(){return es}};var Ug=be(Wp(void 0)),PM={mempty:Ug,Semigroup0:function(){return S5}};var zi=function(){function e(){this.head=null,this.last=null,this.size=0}function t(u,l){this.queue=u,this.value=l,this.next=null,this.prev=null}function n(u){this.draining=!1,this.error=null,this.value=u,this.takes=new e,this.reads=new e,this.puts=new e}var c={};function v(u){try{u()}catch(l){setTimeout(function(){throw l},0)}}function s(u,l){var p=new t(u,l);switch(u.size){case 0:u.head=p;break;case 1:p.prev=u.head,u.head.next=p,u.last=p;break;default:p.prev=u.last,u.last.next=p,u.last=p}return u.size++,p}function a(u){var l;switch(u.size){case 0:return null;case 1:l=u.head,u.head=null;break;case 2:l=u.last,u.head.next=null,u.last=null;break;default:l=u.last,u.last=l.prev,u.last.next=null}return l.prev=null,l.queue=null,u.size--,l.value}function d(u){var l;switch(u.size){case 0:return null;case 1:l=u.head,u.head=null;break;case 2:l=u.head,u.last.prev=null,u.head=u.last,u.last=null;break;default:l=u.head,u.head=l.next,u.head.prev=null}return l.next=null,l.queue=null,u.size--,l.value}function i(u){if(u.queue!==null){if(u.queue.last===u){a(u.queue);return}if(u.queue.head===u){d(u.queue);return}u.prev&&(u.prev.next=u.next),u.next&&(u.next.prev=u.prev),u.queue.size--,u.queue=null,u.value=null,u.next=null,u.prev=null}}function r(u,l){if(!l.draining){var p=l.puts,f=l.takes,o=l.reads,h,_,m,y,C;for(l.draining=!0;;){if(h=null,_=null,m=null,y=l.value,C=o.size,l.error!==null){for(y=u.left(l.error);h=d(p);)v(h.cb(y));for(;_=d(o);)v(_(y));for(;m=d(f);)v(m(y));break}if(y===c&&(h=d(p))&&(l.value=y=h.value),y!==c){for(m=d(f);C--&&(_=d(o));)v(_(u.right(y)));m!==null&&(l.value=c,v(m(u.right(y))))}if(h!==null&&v(h.cb(u.right(void 0))),l.value===c&&p.size===0||l.value!==c&&f.size===0)break}l.draining=!1}}return n.EMPTY=c,n.putLast=s,n.takeLast=a,n.takeHead=d,n.deleteCell=i,n.drainVar=r,n}();function qg(){return new zi(zi.EMPTY)}function NM(e,t,n,c){return function(){var v=zi.putLast(n.puts,{cb:c,value:t});return zi.drainVar(e,n),function(){zi.deleteCell(v)}}}function BM(e,t,n){return function(){var c=zi.putLast(t.takes,n);return zi.drainVar(e,t),function(){zi.deleteCell(c)}}}var WM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),UM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qM=function(){function e(){}return e.value=new e,e}();var zM=function(){return{left:Ue.create,right:Oe.create,nothing:G.value,just:z.create,killed:WM.create,filled:UM.create,empty:qM.value}}();var VM=function(e){return function(t){return function(n){return NM(zM,e,t,n)}}};var GM=function(e){return function(t){return BM(zM,e,t)}};var M5=Je(Fn);var zg=function(e){return xo(function(t){return function(){var c=GM(e)(t)();return ts(c)}})};var nf=function(e){return function(t){return xo(function(n){return function(){var v=VM(e)(t)(n)();return ts(v)}})}};var rf=M5(qg);var I5=function(e){var t=V(e);return{map:function(n){return function(c){return function(v){return t(function(s){return new ne(n(s.value0),s.value1)})(c(v))}}}}};var KM=function(e){return{Applicative0:function(){return Jg(e)},Bind1:function(){return R5(e)}}},R5=function(e){var t=ae(e.Bind1());return{bind:function(n){return function(c){return function(v){return t(n(v))(function(s){var a=c(s.value0);return a(s.value1)})}}},Apply0:function(){return QM(e)}}},QM=function(e){var t=I5(e.Bind1().Apply0().Functor0());return{apply:zn(KM(e)),Functor0:function(){return t}}},Jg=function(e){var t=ee(e.Applicative0());return{pure:function(n){return function(c){return t(new ne(n,c))}},Apply0:function(){return QM(e)}}};var XM=function(e){var t=ee(e.Applicative0()),n=KM(e);return{state:function(c){return function(v){return t(c(v))}},Monad0:function(){return n}}};var $5=St(mc);var Cc={liftAff:ge(De),MonadEffect0:function(){return Fn}},Xn=function(e){return e.liftAff};var qp=function(e){var t=e.MonadEffect0(),n=la(t);return{liftAff:function(){var c=$5(t.Monad0()),v=Xn(e);return function(s){return c(v(s))}}(),MonadEffect0:function(){return n}}};var fa=Z,Kg=Z;var k5=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var ZM=function(e){return function(t){return fa(function(n){return e(n.value0)(n.value1)})(t)}};var eL=function(e){return function(t){return Kg(new k5(e,t))}},Qg={map:function(e){return function(t){return fa(function(n){return eL(function(c){return e(n.value0(c))})(n.value1)})(t)}}};var tL=eL(ge(De));var Xe=function(){function e(){}return e.value=new e,e}(),ot=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),Dt=function(){function e(t,n,c,v,s,a,d){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a,this.value6=d}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return function(d){return new e(t,n,c,v,s,a,d)}}}}}}},e}(),Vi=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),za=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Gi=function(){function e(t,n,c,v,s,a){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return new e(t,n,c,v,s,a)}}}}}},e}(),da=function(){function e(t,n,c,v,s,a){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return new e(t,n,c,v,s,a)}}}}}},e}(),Ji=function(){function e(t,n,c,v,s,a){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return new e(t,n,c,v,s,a)}}}}}},e}(),zp=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}();var Va=function(e){var t=Te(e);return function(n){var c=function(v){var s=!1,a;function d(i){if(i instanceof Xe)return s=!0,G.value;if(i instanceof ot){var r=t(n)(i.value1);if(r instanceof Ie)return s=!0,new z(i.value2);if(r instanceof fe){v=i.value0;return}v=i.value3;return}if(i instanceof Dt){var u=t(n)(i.value1);if(u instanceof Ie)return s=!0,new z(i.value2);var l=t(n)(i.value4);if(l instanceof Ie)return s=!0,new z(i.value5);if(u instanceof fe){v=i.value0;return}if(l instanceof pe){v=i.value6;return}v=i.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[i.constructor.name])}for(;!s;)a=d(v);return a};return c}};var rL=function(e){return function(t){return function(n){var c=e,v=t,s=!1,a;function d(i,r,u){if(r instanceof Ye)return s=!0,u;if(r instanceof Re){if(r.value0 instanceof Vi){c=i,v=r.value1,n=new ot(u,r.value0.value0,r.value0.value1,r.value0.value2);return}if(r.value0 instanceof za){c=i,v=r.value1,n=new ot(r.value0.value0,r.value0.value1,r.value0.value2,u);return}if(r.value0 instanceof Gi){c=i,v=r.value1,n=new Dt(u,r.value0.value0,r.value0.value1,r.value0.value2,r.value0.value3,r.value0.value4,r.value0.value5);return}if(r.value0 instanceof da){c=i,v=r.value1,n=new Dt(r.value0.value0,r.value0.value1,r.value0.value2,u,r.value0.value3,r.value0.value4,r.value0.value5);return}if(r.value0 instanceof Ji){c=i,v=r.value1,n=new Dt(r.value0.value0,r.value0.value1,r.value0.value2,r.value0.value3,r.value0.value4,r.value0.value5,u);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[r.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[r.constructor.name,u.constructor.name])}for(;!s;)a=d(c,v,n);return a}}},Ro=function(e){var t=rL(e),n=Te(e);return function(c){return function(v){var s=function(d){return function(i){var r=d,u=!1,l;function p(f,o){if(f instanceof Ye)return u=!0,new ot(o.value0,o.value1,o.value2,o.value3);if(f instanceof Re){if(f.value0 instanceof Vi)return u=!0,t(f.value1)(new Dt(o.value0,o.value1,o.value2,o.value3,f.value0.value0,f.value0.value1,f.value0.value2));if(f.value0 instanceof za)return u=!0,t(f.value1)(new Dt(f.value0.value0,f.value0.value1,f.value0.value2,o.value0,o.value1,o.value2,o.value3));if(f.value0 instanceof Gi){r=f.value1,i=new zp(new ot(o.value0,o.value1,o.value2,o.value3),f.value0.value0,f.value0.value1,new ot(f.value0.value2,f.value0.value3,f.value0.value4,f.value0.value5));return}if(f.value0 instanceof da){r=f.value1,i=new zp(new ot(f.value0.value0,f.value0.value1,f.value0.value2,o.value0),o.value1,o.value2,new ot(o.value3,f.value0.value3,f.value0.value4,f.value0.value5));return}if(f.value0 instanceof Ji){r=f.value1,i=new zp(new ot(f.value0.value0,f.value0.value1,f.value0.value2,f.value0.value3),f.value0.value4,f.value0.value5,new ot(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[f.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[f.constructor.name,o.constructor.name])}for(;!u;)l=p(r,i);return l}},a=function(d){return function(i){var r=d,u=!1,l;function p(f,o){if(o instanceof Xe)return u=!0,s(f)(new zp(Xe.value,c,v,Xe.value));if(o instanceof ot){var h=n(c)(o.value1);if(h instanceof Ie)return u=!0,t(f)(new ot(o.value0,c,v,o.value3));if(h instanceof fe){r=new Re(new Vi(o.value1,o.value2,o.value3),f),i=o.value0;return}r=new Re(new za(o.value0,o.value1,o.value2),f),i=o.value3;return}if(o instanceof Dt){var h=n(c)(o.value1);if(h instanceof Ie)return u=!0,t(f)(new Dt(o.value0,c,v,o.value3,o.value4,o.value5,o.value6));var _=n(c)(o.value4);if(_ instanceof Ie)return u=!0,t(f)(new Dt(o.value0,o.value1,o.value2,o.value3,c,v,o.value6));if(h instanceof fe){r=new Re(new Gi(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),f),i=o.value0;return}if(h instanceof pe&&_ instanceof fe){r=new Re(new da(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),f),i=o.value3;return}r=new Re(new Ji(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),f),i=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[f.constructor.name,o.constructor.name])}for(;!u;)l=p(r,i);return l}};return a(Ye.value)}}},Yg=function(e){var t=rL(e),n=Te(e);return function(c){var v=function(i){return function(r){var u=i,l=!1,p;function f(o,h){if(o instanceof Ye)return l=!0,h;if(o instanceof Re){if(o.value0 instanceof Vi&&o.value0.value2 instanceof Xe&&h instanceof Xe)return l=!0,t(o.value1)(new ot(Xe.value,o.value0.value0,o.value0.value1,Xe.value));if(o.value0 instanceof za&&o.value0.value0 instanceof Xe&&h instanceof Xe)return l=!0,t(o.value1)(new ot(Xe.value,o.value0.value1,o.value0.value2,Xe.value));if(o.value0 instanceof Vi&&o.value0.value2 instanceof ot){u=o.value1,r=new Dt(h,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof za&&o.value0.value0 instanceof ot){u=o.value1,r=new Dt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,h);return}return o.value0 instanceof Vi&&o.value0.value2 instanceof Dt?(l=!0,t(o.value1)(new ot(new ot(h,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new ot(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof za&&o.value0.value0 instanceof Dt?(l=!0,t(o.value1)(new ot(new ot(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new ot(o.value0.value0.value6,o.value0.value1,o.value0.value2,h)))):o.value0 instanceof Gi&&o.value0.value2 instanceof Xe&&o.value0.value5 instanceof Xe&&h instanceof Xe?(l=!0,t(o.value1)(new Dt(Xe.value,o.value0.value0,o.value0.value1,Xe.value,o.value0.value3,o.value0.value4,Xe.value))):o.value0 instanceof da&&o.value0.value0 instanceof Xe&&o.value0.value5 instanceof Xe&&h instanceof Xe?(l=!0,t(o.value1)(new Dt(Xe.value,o.value0.value1,o.value0.value2,Xe.value,o.value0.value3,o.value0.value4,Xe.value))):o.value0 instanceof Ji&&o.value0.value0 instanceof Xe&&o.value0.value3 instanceof Xe&&h instanceof Xe?(l=!0,t(o.value1)(new Dt(Xe.value,o.value0.value1,o.value0.value2,Xe.value,o.value0.value4,o.value0.value5,Xe.value))):o.value0 instanceof Gi&&o.value0.value2 instanceof ot?(l=!0,t(o.value1)(new ot(new Dt(h,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof da&&o.value0.value0 instanceof ot?(l=!0,t(o.value1)(new ot(new Dt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,h),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof da&&o.value0.value5 instanceof ot?(l=!0,t(o.value1)(new ot(o.value0.value0,o.value0.value1,o.value0.value2,new Dt(h,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof Ji&&o.value0.value3 instanceof ot?(l=!0,t(o.value1)(new ot(o.value0.value0,o.value0.value1,o.value0.value2,new Dt(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,h)))):o.value0 instanceof Gi&&o.value0.value2 instanceof Dt?(l=!0,t(o.value1)(new Dt(new ot(h,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new ot(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof da&&o.value0.value0 instanceof Dt?(l=!0,t(o.value1)(new Dt(new ot(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new ot(o.value0.value0.value6,o.value0.value1,o.value0.value2,h),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof da&&o.value0.value5 instanceof Dt?(l=!0,t(o.value1)(new Dt(o.value0.value0,o.value0.value1,o.value0.value2,new ot(h,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new ot(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof Ji&&o.value0.value3 instanceof Dt?(l=!0,t(o.value1)(new Dt(o.value0.value0,o.value0.value1,o.value0.value2,new ot(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new ot(o.value0.value3.value6,o.value0.value4,o.value0.value5,h)))):(l=!0,Ui("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!l;)p=f(u,r);return p}},s=function(i){return function(r){var u=i,l=!1,p;function f(o,h){if(h instanceof ot&&h.value0 instanceof Xe&&h.value3 instanceof Xe)return l=!0,v(o)(Xe.value);if(h instanceof ot){u=new Re(new za(h.value0,h.value1,h.value2),o),r=h.value3;return}if(h instanceof Dt&&h.value0 instanceof Xe&&h.value3 instanceof Xe&&h.value6 instanceof Xe)return l=!0,v(new Re(new za(Xe.value,h.value1,h.value2),o))(Xe.value);if(h instanceof Dt){u=new Re(new Ji(h.value0,h.value1,h.value2,h.value3,h.value4,h.value5),o),r=h.value6;return}return l=!0,Ui("The impossible happened in partial function `removeMaxNode`.")}for(;!l;)p=f(u,r);return p}},a=function(i){var r=!1,u;function l(p){if(p instanceof ot&&p.value3 instanceof Xe)return r=!0,{key:p.value1,value:p.value2};if(p instanceof ot){i=p.value3;return}if(p instanceof Dt&&p.value6 instanceof Xe)return r=!0,{key:p.value4,value:p.value5};if(p instanceof Dt){i=p.value6;return}return r=!0,Ui("The impossible happened in partial function `maxNode`.")}for(;!r;)u=l(i);return u},d=function(i){return function(r){var u=i,l=!1,p;function f(o,h){if(h instanceof Xe)return l=!0,G.value;if(h instanceof ot){var _=n(c)(h.value1);if(h.value3 instanceof Xe&&_ instanceof Ie)return l=!0,new z(new ne(h.value2,v(o)(Xe.value)));if(_ instanceof Ie){var m=a(h.value0);return l=!0,new z(new ne(h.value2,s(new Re(new Vi(m.key,m.value,h.value3),o))(h.value0)))}if(_ instanceof fe){u=new Re(new Vi(h.value1,h.value2,h.value3),o),r=h.value0;return}u=new Re(new za(h.value0,h.value1,h.value2),o),r=h.value3;return}if(h instanceof Dt){var y=function(){return h.value0 instanceof Xe&&h.value3 instanceof Xe&&h.value6 instanceof Xe}(),_=n(c)(h.value4),C=n(c)(h.value1);if(y&&C instanceof Ie)return l=!0,new z(new ne(h.value2,t(o)(new ot(Xe.value,h.value4,h.value5,Xe.value))));if(y&&_ instanceof Ie)return l=!0,new z(new ne(h.value5,t(o)(new ot(Xe.value,h.value1,h.value2,Xe.value))));if(C instanceof Ie){var m=a(h.value0);return l=!0,new z(new ne(h.value2,s(new Re(new Gi(m.key,m.value,h.value3,h.value4,h.value5,h.value6),o))(h.value0)))}if(_ instanceof Ie){var m=a(h.value3);return l=!0,new z(new ne(h.value5,s(new Re(new da(h.value0,h.value1,h.value2,m.key,m.value,h.value6),o))(h.value3)))}if(C instanceof fe){u=new Re(new Gi(h.value1,h.value2,h.value3,h.value4,h.value5,h.value6),o),r=h.value0;return}if(C instanceof pe&&_ instanceof fe){u=new Re(new da(h.value0,h.value1,h.value2,h.value4,h.value5,h.value6),o),r=h.value3;return}u=new Re(new Ji(h.value0,h.value1,h.value2,h.value3,h.value4,h.value5),o),r=h.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[h.constructor.name])}for(;!l;)p=f(u,r);return p}};return d(Ye.value)}},kn={foldr:function(e){return function(t){return function(n){if(n instanceof Xe)return t;if(n instanceof ot)return Nt(kn)(e)(e(n.value2)(Nt(kn)(e)(t)(n.value3)))(n.value0);if(n instanceof Dt)return Nt(kn)(e)(e(n.value2)(Nt(kn)(e)(e(n.value5)(Nt(kn)(e)(t)(n.value6)))(n.value3)))(n.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof Xe)return t;if(n instanceof ot)return Ht(kn)(e)(e(Ht(kn)(e)(t)(n.value0))(n.value2))(n.value3);if(n instanceof Dt)return Ht(kn)(e)(e(Ht(kn)(e)(e(Ht(kn)(e)(t)(n.value0))(n.value2))(n.value3))(n.value5))(n.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[n.constructor.name])}}},foldMap:function(e){var t=at(e),n=me(e.Semigroup0());return function(c){return function(v){if(v instanceof Xe)return t;if(v instanceof ot)return n(Ut(kn)(e)(c)(v.value0))(n(c(v.value2))(Ut(kn)(e)(c)(v.value3)));if(v instanceof Dt)return n(Ut(kn)(e)(c)(v.value0))(n(c(v.value2))(n(Ut(kn)(e)(c)(v.value3))(n(c(v.value5))(Ut(kn)(e)(c)(v.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[v.constructor.name])}}}};var $o=function(){return Xe.value}(),Zg=function(e){var t=Ro(e);return function(n){return Ht(n)(function(c){return function(v){return t(v.value0)(v.value1)(c)}})($o)}};var Vp=function(e){var t=Yg(e);return function(n){return function(c){return tt(c)(on)(t(n)(c))}}};var ey=function(e){var t=Va(e),n=Vp(e),c=Ro(e);return function(v){return function(s){return function(a){var d=v(t(s)(a));if(d instanceof G)return n(s)(a);if(d instanceof z)return c(s)(d.value0)(a);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[d.constructor.name])}}}};var K5=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}();var Gp=function(e){return K5.create(We(e.Eq0()))(Te(e))},Q5={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},oL={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return Q5}};var ny=Bu(Kt)(oL);var Z5=Yg(ny),eB=Va(ny),tB=Ro(ny);var Jp=function(){return function(e){var t=In(e);return function(n){var c=Gp(n);return function(v){return function(s){return function(a){return Z5(new ne(t(v),c(s)))(a)}}}}}},jp=function(){return function(e){var t=In(e);return function(n){var c=Gp(n);return function(v){return function(s){return function(a){return eB(new ne(t(v),c(s)))(a)}}}}}},Kp=function(){return function(e){var t=In(e);return function(n){var c=Gp(n);return function(v){return function(s){return function(a){return function(d){return tB(new ne(t(v),c(s)))(a)(d)}}}}}}},Qp=function(e){var t=wt(e)(kn);return function(n){return function(c){return t(function(v){return c(v)})(n)}}},ji=$o;var Xp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),os=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();function aL(e,t,n){return e==null?t:n(e)}function ry(e){return e}var ko=tt(null)(ry),Zt=function(e){return aL(e,G.value,z.create)};var dn=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),sf=Z,Nr=function(e,t){return e.value2(e.value1,t)},pn=Z,Br=function(e){return e.value3(e.value1)},Yn=sf(function(e){return e.value0});var iL=V(It),yB=V(Na);var Ki=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ja=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),Qi=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),Xi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ja=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),DB=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),uL=function(e){return function(t){return e(t)}};var CB=Z;var bB={bimap:function(e){return function(t){return uL(function(n){return CB(new DB(function(c){return e(n.value0(c))},function(c){return t(n.value1(c))},n.value2))})}}},wB=Zr(bB);var as=uL(function(e){var t=function(n){if(n instanceof Ki)return new Ki(n.value0);if(n instanceof Ja)return new Ja(n.value0,n.value1,e.value0(n.value2),iL(t)(n.value3));if(n instanceof Qi)return new Qi(n.value0,n.value1,e.value0(n.value2),iL(yB(t))(n.value3));if(n instanceof Xi)return new Xi(e.value1(n.value0));if(n instanceof ja)return new ja(wB(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function is(e,t){return t[e]}function ay(e,t){return t.hasOwnProperty(e)}function Ka(e,t,n){n[e]=t}function iy(e,t){for(var n=[],c=0;c<e.length;c++)n.push(t(c,e[c]));return n}function uy(e,t){for(var n=0;n<e.length;n++)t(e[n])}function sy(e,t){for(var n=Object.keys(e),c=0;c<n.length;c++){var v=n[c];t(v,e[v])}}function cy(e,t,n,c,v){for(var s=[],a=e.length,d=t.length,i=0;;){if(i<a)i<d?s.push(n(i,e[i],t[i])):c(i,e[i]);else if(i<d)s.push(v(i,t[i]));else break;i++}return s}function cf(e,t,n){for(var c={},v=0;v<e.length;v++){var s=e[v],a=t(s);c[a]=n(a,v,s)}return c}function lf(e,t,n,c,v,s){for(var a={},d=0;d<t.length;d++){var i=t[d],r=n(i);e.hasOwnProperty(r)?a[r]=c(r,d,e[r],i):a[r]=s(r,d,i)}for(var r in e)r in a||v(r,e[r]);return a}function us(e,t){return e===t}function ly(e,t){return t.createTextNode(e)}function fy(e,t){t.textContent=e}function Zp(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function Yi(e,t,n){var c=n.childNodes.item(e)||null;c!==t&&n.insertBefore(t,c)}function ff(e,t){t&&e.parentNode===t&&t.removeChild(e)}function df(e){return e.parentNode}function eh(e,t,n,c){e!=null?c.setAttributeNS(e,t,n):c.setAttribute(t,n)}function th(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function dy(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function py(e,t,n){n.addEventListener(e,t,!1)}function hy(e,t,n){n.removeEventListener(e,t,!1)}var _y=void 0;var pf=function(){return{}};function vy(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var my=is,gy=Z,yy=Ka,Dy=pf;var nh=function(e){return function(t){return t[e]}},LB=nh("namespaceURI"),FB=nh("prefix"),xB=nh("localName"),AB=nh("tagName");function by(e){return function(){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}}var rh=function(e){return function(t){return function(){return t[e]}}},RB=rh("children"),$B=rh("firstElementChild"),kB=rh("lastElementChild"),OB=rh("childElementCount");function cL(e){return function(t){return function(){return t.querySelector(e)}}}var PB=V(He);var lL=function(e){var t=PB(Zt),n=cL(e);return function(c){return t(n(c))}};var wy=Z;var hf=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}};var Sy=function(e){return Br(e.widget)},Ey=hf("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof ja)return Ey(291)(e,as(t.value0));if(t instanceof Xi){var n=Nr(e.widget,t.value0),c=sf(function(v){return pn(new dn(v.value0,{build:e.build,widget:n},Ey(296),Sy))})(n);return c}return Sy(e),e.build(t)}}),qB=Ey(286),oh=function(e){var t=df(e.node);return ff(e.node,t)},ah=hf("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof ja)return ah(82)(e,as(t.value0));if(t instanceof Ki){if(e.value===t.value0)return pn(new dn(e.node,e,ah(85),oh));if(tn){var n={build:e.build,node:e.node,value:t.value0};return fy(t.value0,e.node),pn(new dn(e.node,n,ah(89),oh))}}return oh(e),e.build(t)}}),zB=ah(77),ih=function(e){var t=df(e.node);return ff(e.node,t),sy(e.children,function(n,c){return Br(c)}),Br(e.attrs)},uh=function(e){var t=df(e.node);return ff(e.node,t),uy(e.children,Br),Br(e.attrs)},dL=function(e,t,n,c){var v=t===c;return v?e instanceof z&&n instanceof z&&e.value0===n.value0||e instanceof G&&n instanceof G:!1},sh=hf("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof ja)return sh(135)(e,as(t.value0));if(t instanceof Ja&&dL(e.ns,e.name,t.value0,t.value1)){var n=Kr(t.value3),c=Kr(e.children);if(c===0&&n===0){var i=Nr(e.attrs,t.value2),r={build:e.build,node:e.node,attrs:i,ns:t.value0,name:t.value1,children:e.children};return pn(new dn(e.node,r,sh(149),uh))}var v=function(u,l){return Br(l)},s=function(u,l,p){var f=Nr(l,p);return Yi(u,Yn(f),e.node),f},a=function(u,l){var p=e.build(l);return Yi(u,Yn(p),e.node),p},d=cy(e.children,t.value3,s,v,a),i=Nr(e.attrs,t.value2),r={build:e.build,node:e.node,attrs:i,ns:t.value0,name:t.value1,children:d};return pn(new dn(e.node,r,sh(172),uh))}return uh(e),e.build(t)}}),VB=sh(130),ch=hf("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof ja)return ch(222)(e,as(t.value0));if(t instanceof Qi&&dL(e.ns,e.name,t.value0,t.value1)){var n=Kr(t.value3);if(e.length===0&&n===0){var d=Nr(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:d,ns:t.value0,name:t.value1,children:e.children,length:0};return pn(new dn(e.node,i,ch(237),ih))}var c=function(r,u){return Br(u)},v=function(r,u,l,p){var f=Nr(l,p.value1);return Yi(u,Yn(f),e.node),f},s=function(r,u,l){var p=e.build(l.value1);return Yi(u,Yn(p),e.node),p},a=lf(e.children,t.value3,Nn,v,c,s),d=Nr(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:d,ns:t.value0,name:t.value1,children:a,length:n};return pn(new dn(e.node,i,ch(261),ih))}return ih(e),e.build(t)}}),GB=ch(217),JB=function(e,t,n){var c=e.buildWidget(e)(n),v=sf(function(s){return pn(new dn(s.value0,{build:t,widget:c},qB,Sy))})(c);return v},jB=function(e,t,n){var c=ly(n,e.document),v={build:t,node:c,value:n};return pn(new dn(c,v,zB,oh))},KB=function(e,t,n,c,v,s){var a=Zp(ko(n),c,e.document),d=wy(a),i=function(p,f,o){var h=t(o.value1);return Yi(f,Yn(h),d),h},r=cf(s,Nn,i),u=e.buildAttributes(a)(v),l={build:t,node:d,attrs:u,ns:n,name:c,children:r,length:Kr(s)};return pn(new dn(d,l,GB,ih))},QB=function(e,t,n,c,v,s){var a=Zp(ko(n),c,e.document),d=wy(a),i=function(p,f){var o=t(f);return Yi(p,Yn(o),d),o},r=iy(s,i),u=e.buildAttributes(a)(v),l={build:t,node:d,attrs:u,ns:n,name:c,children:r};return pn(new dn(d,l,VB,uh))},_f=function(e){var t=hf("build","Halogen.VDom.DOM",function(){return function(c){if(c instanceof Ki)return jB(e,t(59),c.value0);if(c instanceof Ja)return QB(e,t(60),c.value0,c.value1,c.value2,c.value3);if(c instanceof Qi)return KB(e,t(61),c.value0,c.value1,c.value2,c.value3);if(c instanceof Xi)return JB(e,t(62),c.value0);if(c instanceof ja)return t(63)(as(c.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[c.constructor.name])}}),n=t(58);return n};function lh(e){return typeof e}function fh(e){return Object.prototype.toString.call(e).slice(8,-1)}function vf(e){return e===void 0}var hL=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var dh=function(){var e=_p(C1);return function(t){return mg(e(t))}}();var _L=function(e){return function(t){return new jn(e,new Re(t.value0,t.value1))}};var Ly=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var ss=Z,hh=Z;var Fy=function(e){var t=Cr(fM(e));return function(n){return t(dh(n))}};var xy=function(e){var t=ee(Xl(e)),n=Fy(e);return function(c){return function(v){if(fh(v)===c)return t(hh(v));if(tn)return n(new Ly(c,fh(v)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[c.constructor.name,v.constructor.name])}}};var _h=function(e){return xy(e)("String")};function Ay(e){return e()}function mL(e){return function(t){return function(n){return function(c){var v=n;function s(d){return function(i){return t(i)(d)(c[d])}}for(var a in c)hasOwnProperty.call(c,a)&&(v=e(v)(s(a)));return v}}}}function gL(e,t,n,c){return n in c?t(c[n]):e}function Iy(e){return function(t){var n=[];for(var c in t)hasOwnProperty.call(t,c)&&n.push(e(c)(t[c]));return n}}var eW=Object.keys||Iy(function(e){return function(){return e}});var Ry=function(e){return function(t){return function(n){return function(c){return function(v){return e(t,n,c,v)}}}}};var aW=yt(Xd);var vh=function(){return Ry(gL)(G.value)(z.create)}();var mf=function(e){var t=pp(e);return function(n){return Ay(function(){var v=pf();return Qd(t(n))(function(s){return aW(vy(s.value0)(s.value1)(v))})(),v})}};var iW=mL(XS),yL=function(e){var t=me(e.Semigroup0()),n=at(e);return function(c){return iW(function(v){return function(s){return function(a){return t(v)(c(s)(a))}}})(n)}};function gf(e){return function(){return function(t){return e(t)()}}}function Oy(e){return function(t){return function(n){return function(c){return function(){return c.addEventListener(e,t,n)}}}}}function Hy(e){return function(t){return function(n){return function(c){return function(){return c.removeEventListener(e,t,n)}}}}}var uW=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}};var Ny=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),By=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qa=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),eu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cs=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sW=is,Py=Ka,cW=function(e,t){var n=dy(null,e,t);if(n)return th(null,e,t);var c=lh(is(e,t));return c==="string"?Ka(e,"",t):e==="rowSpan"?Ka(e,1,t):e==="colSpan"?Ka(e,1,t):Ka(e,_y,t)},CL=function(e){if(e instanceof Qa&&e.value0 instanceof z)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof Qa)return"attr/:"+e.value1;if(e instanceof eu)return"prop/"+e.value0;if(e instanceof tu)return"handler/"+e.value0;if(e instanceof cs)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},bL=Z;var wL=Z;var SL=function(e){return function(t){var n=function(u){return function(l,p){if(p instanceof Qa)return th(ko(p.value0),p.value1,t);if(p instanceof eu)return cW(p.value0,t);if(p instanceof tu){var f=my(p.value0,u);return hy(p.value0,Nn(f),t)}if(p instanceof cs)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[p.constructor.name])}},c=function(u){return u instanceof z?e(u.value0)():void 0},v=function(u){var l=vh("ref")(u.props);return l instanceof z&&l.value0 instanceof cs?c(l.value0.value0(new By(t))):void 0},s=function(u,l){return function(p,f,o,h){if(o instanceof Qa&&h instanceof Qa){var _=o.value2===h.value2;return _||eh(ko(h.value0),h.value1,h.value2,t),h}if(o instanceof eu&&h instanceof eu){var m=us(o.value1,h.value1);if(m)return h;if(h.value0==="value"){var y=sW("value",t),C=us(y,h.value1);return C||Py(h.value0,h.value1,t),h}return Py(h.value0,h.value1,t),h}if(o instanceof tu&&h instanceof tu){var E=my(h.value0,u);return Pt(h.value1)(on(E))(),yy(h.value0,E,l),h}return h}},a=function(u){return function(l,p,f){if(f instanceof Qa)return eh(ko(f.value0),f.value1,f.value2,t),f;if(f instanceof eu)return Py(f.value0,f.value1,t),f;if(f instanceof tu){var o=is(f.value0,u);if(ay(f.value0,u))return Pt(f.value1)(on(o))(),f;var h=nn(f.value1)(),_=gf(function(m){return function(){var C=Qe(h)();return c(C(m))}})();return yy(f.value0,new ne(_,h),u),py(f.value0,_,t),f}if(f instanceof cs)return c(f.value0(new Ny(t))),f;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[f.constructor.name])}},d=uW("patchProp","Halogen.VDom.DOM.Prop",function(){return function(u,l){var p=Dy(),f=n(u.events),o=s(u.events,p),h=a(p),_=lf(u.props,l,CL,o,f,h),m={events:gy(p),props:_};return pn(new dn(void 0,m,d(100),v))}}),i=d(87),r=function(u){var l=Dy(),p=cf(u,CL,a(l)),f={events:gy(l),props:p};return pn(new dn(void 0,f,i,v))};return r}};var Uy=function(e){return e},qy=function(e){return Uy(Xi.create(e))},dW=function(e){return e.toPropValue},nu=function(e){return Uy(Ki.create(e))},LL=function(e){return new cs(function(t){return e(function(n){if(n instanceof Ny)return new z(n.value0);if(n instanceof By)return G.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},FL=function(e){var t=dW(e);return function(n){var c=eu.create(n);return function(v){return c(t(v))}}};var zy={toPropValue:function(){var e=fn();return function(t){return bL(e(t))}}()};var xL={toPropValue:wL};var Vy=function(){return tu.create}(),AL=function(e){return function(t){return function(n){return function(c){return new Ja(e,t,n,c)}}}};var IL=function(e){return function(t){return Qa.create(e)(t)}};var pW=ge(De);var mh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),RL=function(e){return function(t){return new Jy(e,t)}},$L=function(){return Gy.create}(),kL=function(e){var t=ee(e);return function(n){return function(c){return function(v){return function(s){return function(a){if(s instanceof mh)return new ne(new Re({func:t(s.value0),count:a},n),c);if(s instanceof Gy)return new ne(new Re({func:v(s.value0),count:a},n),c);if(s instanceof Jy)return kL(e)(n)(_L(s.value1)(c))(v)(s.value0)(a+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[s.constructor.name])}}}}}},OL=function(e){var t=ut(e.Apply0());return function(n){return function(c){return function(v){if(n instanceof Ye)return new Ue(v);if(n instanceof Re){var s=t(n.value0.func)(v),a=n.value0.count===1;if(a)return n.value1 instanceof Ye?new Ue(s):OL(e)(n.value1)(c)(s);if(c instanceof Ye)return new Ue(s);if(c instanceof Re)return new Oe(new ne(new Re({func:s,count:n.value0.count-1|0},n.value1),new jn(c.value0,c.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[c.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},HL={map:function(e){return function(t){return RL(new mh(e))(t)}}},PL=function(e){var t=OL(e),n=ee(e),c=kL(e);return function(v){return function(s){var a=function(d){var i=!1,r;function u(l){if(l.value1.value0 instanceof mh){var p=t(l.value0)(l.value1.value1)(n(l.value1.value0.value0));if(p instanceof Ue)return i=!0,p.value0;if(p instanceof Oe){d=p.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[p.constructor.name])}if(l.value1.value0 instanceof Gy){var p=t(l.value0)(l.value1.value1)(v(l.value1.value0.value0));if(p instanceof Ue)return i=!0,p.value0;if(p instanceof Oe){d=p.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[p.constructor.name])}if(l.value1.value0 instanceof Jy){var f=new jn(l.value1.value0.value1,l.value1.value1);d=c(l.value0)(f)(v)(l.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[l.value1.value0.constructor.name])}for(;!i;)r=u(d);return r};return a(new ne(Ye.value,dh(s)))}}},NL=function(e){return PL(e)(pW)},BL={apply:function(e){return function(t){return RL(e)(t)}},Functor0:function(){return HL}},WL=function(){return{pure:mh.create,Apply0:function(){return BL}}}(),hW=PL(WL),jy=function(e){return hW(function(t){return $L(e(t))})};var qL=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),zL=Z,VL=Z;function Ky(e){return function(t){return e===t}}var wc=Ky;var gW=yt(He);var yW=ae(_r);var DW=me(jt),CW=wt(Xt),bW=CW(Mt);var gh=function(e){return e},JL=function(e){return function(t){return e(function(n){return gW(t(n))})}};var ur=function(e){return function(t){return e(t)}};var Xy={map:function(e){return function(t){return function(n){return t(function(c){return n(e(c))})}}}};var sr=function(){var t=nn([])();return{emitter:function(n){return function(){return Xr(function(v){return DW(v)([n])})(t)(),Xr(ng(wc)(n))(t)}},listener:function(n){return yW(Qe(t))(bW(function(c){return c(n)}))}}};var Yy=ge(De);var wW=jp();var jL=function(e){return e},KL=function(e){return e},Df=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ls=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Dh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ch=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),bh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),wh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Sf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Sc=function(e){return e};var cr=function(e){return _t(new Cf(function(t){return e},Yy))};var ha=function(e){return _t(new wf(e,void 0))};var Oo=function(){return function(e){var t=wW(e);return function(n){var c=t(n);return function(v){return function(s){return function(a){return _t(new bf(VL(new qL(function(d){var i=ee(d);return function(r){var u=tt(i(G.value))(r),l=c(v)(s);return function(p){return u(l(p))}}},a,Yy))))}}}}}},Zy=Sn,Sh=Sn;var Eh={lift:function(e){return function(t){return Sc(_t(ls.create(t)))}}},fs=dc,xn={state:function(e){return Sc(_t(Df.create(e)))},Monad0:function(){return fs}};var wr=function(e){return{liftEffect:function(){var t=Je(e);return function(n){return Sc(_t(ls.create(t(n))))}}(),Monad0:function(){return fs}}};var Th=function(e){var t=wr(e.MonadEffect0());return{liftAff:function(){var n=Xn(e);return function(c){return Sc(_t(ls.create(n(c))))}}(),MonadEffect0:function(){return t}}};var Xa=function(e){return _t(new Sf(e,Yy))},oo=Ba;var On=Qn,SW=ae(On);var Sr=vr,EW=ee(Sr),e0={tailRecM:function(e){return function(t){return SW(e(t))(function(n){if(n instanceof _n)return ar(e0)(e)(n.value0);if(n instanceof rn)return EW(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return fs}};var Ec=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Tc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var TW=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}};var MW=function(e,t){return us(e.value0,t.value0)&&us(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var QL=function(e){return e.value2(e.value3)};var XL=function(e){var t=function(s){return Br(s.vdom)},n=TW("patchThunk","Halogen.VDom.Thunk",function(){return function(s,a){var d=MW(s.thunk,a);if(d)return pn(new dn(Yn(s.vdom),s,n(112),t));var i=Nr(s.vdom,e(QL(a)));return pn(new dn(Yn(i),{vdom:i,thunk:a},n(115),t))}}),c=n(108),v=function(s){return function(a){var d=_f(s)(e(QL(a)));return pn(new dn(Yn(d),{thunk:a,vdom:d},c,t))}};return v};var Mh=Us(oo),r0=wt(Sr)(Yt),LW=V(oo);var YL=ee(Sr),FW=jp(),xW=Jp(),AW=Kp(),xc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),o0=Z,a0=Z,Er=function(e){return function(t){if(t instanceof Ec)return Mh(r0(e.handleAction)(e.initialize))(t.value0);if(t instanceof Tc)return Mh(r0(e.handleAction)(e.finalize))(t.value0);if(t instanceof Mc)return Mh(r0(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof Lc)return Mh(e.handleAction(t.value0))(t.value1);if(t instanceof Fc)return ZM(function(n){var c=LW(tt(t.value1(void 0))(n));return function(v){return c(e.handleQuery(v))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},IW=Z,Tr=Z;var sn=function(){return{handleAction:be(YL(void 0)),handleQuery:be(YL(G.value)),receive:be(G.value),initialize:G.value,finalize:G.value}}(),i0=function(){return function(e){var t=FW(e),n=xW(e),c=AW(e);return function(v){var s=t(v),a=n(v),d=c(v);return function(i){return function(r){return function(u){return function(l){return function(p){return IW({get:s(i)(r),pop:a(i)(r),set:d(i)(r),component:u,input:l,output:p})}}}}}}}};var Ef=function(){return AL(G.value)}();var u0=Ef("style");var Ya=Ef("div"),ou=Ya([]);var s0=function(e){return Ef("canvas")(e)([])},Ac=Ef("button");var $W=fn();var c0=function(e){return $W(Eg(e))};function lr(e){return function(){return e.stopPropagation()}}var l0="DOMContentLoaded";var rF="keyup",oF="keydown";var aF="mouseup";var iF="mousemove",uF="mouseleave",sF="mouseenter",cF="mousedown",lF="dblclick",fF="click";var ps=Z,dF=Z;var Za=function(e){return function(t){return Vy(e)(function(n){return new z(new os(t(n)))})}};var hs=function(){var e=Za(fF);return function(t){return e(ps(t))}}(),pF=function(){var e=Za(lF);return function(t){return e(ps(t))}}();var hF=function(){var e=Za(oF);return function(t){return e(dF(t))}}(),_F=function(){var e=Za(rF);return function(t){return e(dF(t))}}();var vF=function(){var e=Za(cF);return function(t){return e(ps(t))}}(),mF=function(){var e=Za(sF);return function(t){return e(ps(t))}}(),gF=function(){var e=Za(uF);return function(t){return e(ps(t))}}(),yF=function(){var e=Za(iF);return function(t){return e(ps(t))}}();var DF=function(){var e=Za(aF);return function(t){return e(ps(t))}}();function xh(e){return e.clientX}function Ah(e){return e.clientY}var ao=Z;var CF=Lt(Ft)(On),XW=pc(xn),YW=ee(Sr),ZW=ge(De),bF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),e3=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),t3=function(e){return function(t){return Ac([hs(function(n){return e3.create(ao(n))})])([nu(t)])}},n3=function(e){return function(t){return CF(XW(t.value0))(function(){return YW(new z(t.value1))})}},r3=function(e){var t=Je(wr(e.MonadEffect0()));return function(n){return CF(t(lr(n.value0)))(function(){return ha(void 0)})}},wF=function(e){return Tr({initialState:ZW,render:t3(e),eval:Er({handleAction:r3(e),handleQuery:n3(e),receive:sn.receive,initialize:sn.initialize,finalize:sn.finalize})})};var kh=Fa($h(),1);function EF(e,t){return function(){return t.edit(e)}}var TF=function(e){return function(t){return EF(e,t)}};var u3=Fa($h(),1);function MF(e,t){return function(){return t.setValue(e)}}function d0(e){return function(){return e.getValue()}}var FF=function(e){return function(t){return MF(e,t)}};var l3=Fa($h(),1);function ue(e){return function(){var t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1);return function(){return t[e].apply(t,n)}}}function Oh(e){return function(t){return function(){return t[e]}}}function f3(e){return function(t,n){return function(){n[e]=t}}}var d3=Oh("text"),p3=f3("text"),h3=Oh("renderer"),_3=Oh("inMultiSelectMode"),v3=ue("selectMoreLines"),m3=Oh("container"),g3=ue("setKeyboardHandler"),y3=ue("getKeyboardHandler"),D3=ue("setSession"),p0=ue("getSession"),C3=ue("setValue"),b3=ue("getValue"),w3=ue("getSelection"),S3=ue("resize"),E3=ue("setTheme"),T3=ue("getTheme"),M3=ue("setStyle"),L3=ue("unsetStyle"),F3=ue("setFontSize"),x3=ue("focus"),A3=ue("isFocused"),I3=ue("blur"),R3=ue("getCopyText"),$3=ue("insert"),k3=ue("setOverwrite"),O3=ue("getOverwrite"),H3=ue("toggleOverwrite"),P3=ue("setScrollSpeed"),N3=ue("getScrollSpeed"),B3=ue("setDragDelay"),W3=ue("getDragDelay"),U3=ue("setSelectionStyle"),q3=ue("getSelectionStyle"),z3=ue("setHighlightActiveLine"),V3=ue("getHighlightActiveLine"),G3=ue("setHighlightSelectedWord"),J3=ue("getHighlightSelectedWord"),j3=ue("setShowInvisibles"),K3=ue("getShowInvisibles"),Q3=ue("setShowPrintMargin"),X3=ue("getShowPrintMargin"),Y3=ue("setPrintMarginColumn"),Z3=ue("getPrintMarginColumn"),eU=ue("setReadOnly"),tU=ue("getReadOnly"),nU=ue("setBehavioursEnabled"),rU=ue("getBehavioursEnabled"),oU=ue("setWrapBehavioursEnabled"),aU=ue("getWrapBehavioursEnabled"),iU=ue("setShowFoldWidgets"),uU=ue("getShowFoldWidgets"),sU=ue("remove"),cU=ue("removeWordRight"),lU=ue("removeWordLeft"),fU=ue("removeToLineStart"),dU=ue("removeToLineEnd"),pU=ue("splitLine"),hU=ue("transposeLetters"),_U=ue("toLowerCase"),vU=ue("toUpperCase"),mU=ue("indent"),gU=ue("blockIndent"),yU=ue("blockOutdent"),DU=ue("toggleCommentLines"),CU=ue("getNumberAt"),bU=ue("modifyNumber"),wU=ue("removeLines"),SU=ue("moveLinesDown"),EU=ue("moveLinesUp"),TU=ue("copyLinesUp"),MU=ue("copyLinesDown"),LU=ue("getFirstVisibleRow"),FU=ue("getLastVisibleRow"),xU=ue("isRowVisible"),AU=ue("isRowFullyVisible"),IU=ue("selectPageDown"),RU=ue("selectPageUp"),$U=ue("gotoPageDown"),kU=ue("gotoPageUp"),OU=ue("scrollPageDown"),HU=ue("scrollPageUp"),PU=ue("scrollToRow"),NU=ue("scrollToLine"),BU=ue("centerSelection"),WU=ue("getCursorPosition"),UU=ue("getCursorPositionScreen"),qU=ue("getSelectionRange"),zU=ue("selectAll"),VU=ue("clearSelection"),GU=ue("moveCursorTo"),JU=ue("moveCursorToPosition"),jU=ue("jumpToMatching"),KU=ue("gotoLine"),QU=ue("navigateTo"),XU=ue("navigateUp"),YU=ue("navigateDown"),ZU=ue("navigateLeft"),e4=ue("navigateRight"),t4=ue("navigateLineStart"),n4=ue("navigateLineEnd"),r4=ue("navigateFileEnd"),o4=ue("navigateFileStart"),a4=ue("navigateWordRight"),i4=ue("navigateWordLeft"),u4=ue("replace"),s4=ue("replaceAll"),c4=ue("getLastSearchOptions"),l4=ue("find"),f4=ue("findNext"),d4=ue("findPrevious"),p4=ue("undo"),h4=ue("redo"),_4=ue("destroy");var xF={fromString:ge(De)},xt=function(e){return e.fromString};var AF=V(It),IF=Yu(mo),g4=me(jt),y4=ap(Mt)(pr);var Mr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),D4=function(e){return e};var C4=function(e){return e},va=function(e){return e.value};var Ic={append:function(e){return function(t){if(e instanceof Lr&&t instanceof Lr)return new Lr(e.value0+t.value0);if(e instanceof Lr&&t instanceof Mr)return new Mr(AF(IF(function(n){return e.value0+n}))(t.value0));if(e instanceof Mr&&t instanceof Lr)return new Mr(AF(IF(function(n){return t.value0+n}))(e.value0));if(e instanceof Mr&&t instanceof Mr)return new Mr(g4(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},b4=me(Ic),h0={append:function(e){return function(t){return b4(e)(t)}}},RF=me(h0);var Tf=function(e){if(e instanceof Mr)return Ln("")(y4("")(e.value0));if(e instanceof Lr)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var Hh=function(){return{fromString:Lr.create}}(),$F=xt(Hh),Zn={fromString:function(e){return D4($F(e))}},Ph=xt(Zn);var Mf={value:function(e){return Ph(h1(e))}};var _s={value:function(){var e=Fe(To);return function(t){return Ph(e(t))}}()},au={value:Ph},Rc=function(e){var t=va(e);return function(n){var c=va(n);return{value:function(v){return RF(t(v.value0))(RF(Ph(" "))(c(v.value1)))}}}};var Hn={fromString:function(e){return C4($F(e))}};var kF=function(e){return e};var Lf=function(){return new Mr([new ne("-webkit-",""),new ne("-moz-",""),new ne("-ms-",""),new ne("-o-",""),new ne("","")])}();var w4=me(jt),OF=ee(qs),S4=We(Qo(pr)),er=Te(Kt),E4=Te(Ci(Kt)),iu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ei=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),su=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),du=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ti=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$c=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HF=function(e){return e},Nh=function(){function e(){}return e.value=new e,e}(),_0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),v0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),m0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),PF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),NF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),it=function(e){return function(t){return new xf(w4(e.value0)(t),e.value1)}},$t=function(){return new xf([],Nh.value)}(),BF=function(e){return HF(OF(ti.create(e)))};var T4={eq:function(e){return function(t){return e instanceof iu&&t instanceof iu||e instanceof ei&&t instanceof ei||e instanceof uu&&t instanceof uu?e.value0===t.value0:e instanceof su&&t instanceof su||e instanceof cu&&t instanceof cu||e instanceof lu&&t instanceof lu||e instanceof fu&&t instanceof fu||e instanceof du&&t instanceof du||e instanceof pu&&t instanceof pu?e.value0===t.value0&&e.value1===t.value1:e instanceof ti&&t instanceof ti?e.value0===t.value0:e instanceof $c&&t instanceof $c?e.value0===t.value0&&S4(e.value1)(t.value1):!1}}};var WF={compare:function(e){return function(t){if(e instanceof iu&&t instanceof iu)return er(e.value0)(t.value0);if(e instanceof iu)return fe.value;if(t instanceof iu)return pe.value;if(e instanceof ei&&t instanceof ei)return er(e.value0)(t.value0);if(e instanceof ei)return fe.value;if(t instanceof ei)return pe.value;if(e instanceof uu&&t instanceof uu)return er(e.value0)(t.value0);if(e instanceof uu)return fe.value;if(t instanceof uu)return pe.value;if(e instanceof su&&t instanceof su){var n=er(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:er(e.value1)(t.value1)}if(e instanceof su)return fe.value;if(t instanceof su)return pe.value;if(e instanceof cu&&t instanceof cu){var n=er(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:er(e.value1)(t.value1)}if(e instanceof cu)return fe.value;if(t instanceof cu)return pe.value;if(e instanceof lu&&t instanceof lu){var n=er(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:er(e.value1)(t.value1)}if(e instanceof lu)return fe.value;if(t instanceof lu)return pe.value;if(e instanceof fu&&t instanceof fu){var n=er(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:er(e.value1)(t.value1)}if(e instanceof fu)return fe.value;if(t instanceof fu)return pe.value;if(e instanceof du&&t instanceof du){var n=er(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:er(e.value1)(t.value1)}if(e instanceof du)return fe.value;if(t instanceof du)return pe.value;if(e instanceof pu&&t instanceof pu){var n=er(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:er(e.value1)(t.value1)}if(e instanceof pu)return fe.value;if(t instanceof pu)return pe.value;if(e instanceof ti&&t instanceof ti)return er(e.value0)(t.value0);if(e instanceof ti)return fe.value;if(t instanceof ti)return pe.value;if(e instanceof $c&&t instanceof $c){var n=er(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:E4(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return T4}};var Bh=function(e){return new xf([],new _0(e))},Tn=function(e){return function(t){return new xf([],new m0(e,t))}},UF=function(e){return function(t){return new xf([],new v0(e,t))}};var lt=function(e){return HF(OF(ei.create(e)))};var M4=fn();var L4=function(e){return M4(Ig(e))};var qF=function(e){return on(L4(e))};var x4=V(Rg(Oa));var A4=ut(Hp(jt)(Gd)),I4=ae($g(jt)(Sm));var zF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),VF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),y0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Af=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),D0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),KF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),QF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),XF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var R4=function(e){return e},If=function(e){return qF(e)},YF=function(){var e=Wa(CM(Pu)(po));return function(t){return R4(e(nc(t)))}}(),vt=function(e){return function(t){return YF(new D0(new y0(e),If(t)))}};var cn=function(e){var t=va(e);return function(n){return function(c){return YF(new Af(kF(n),t(c)))}}},C0=function(e){var t=cn(e);return function(n){return t(n)}};var $4={map:function(e){return function(t){return x4(e)(t)}}};var k4={apply:function(e){return function(t){return A4(e)(t)}},Functor0:function(){return $4}},Wh={bind:function(e){return function(t){return I4(e)(function(n){return function(c){return c}(t(n))})}},Apply0:function(){return k4}};var Uh=xt(Hn),kc=xt(Zn);var ni=function(){var e=cn(au)(Uh("z-index")),t=Fe(Zo);return function(n){return e(t(n))}}();var O4={value:function(e){return e}};var H4={value:function(e){return e}};var qh=kc("relative"),Ur=cn(O4)(Uh("position")),ZF=cn(_s)(Uh("opacity"));var ex=kc("inline-block");var tx=kc("flex");var nx=kc("none");var Oc=cn(H4)(Uh("display"));var rx=kc("block"),Po=kc("absolute");var ix=me(h0),ux=va(_s),sx=xt(Zn),ax=Fe(To),P4=me(Ic);var zh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),N4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),B4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),W4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),U4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var vs=function(e){if(e instanceof zh)return Tf(e.value0);if(e instanceof N4)return fa(function(t){return fa(function(n){return"("+(vs(t)+(" + "+(vs(n)+")")))})(e.value1)})(e.value0);if(e instanceof B4)return fa(function(t){return fa(function(n){return"("+(vs(t)+(" - "+(vs(n)+")")))})(e.value1)})(e.value0);if(e instanceof W4)return fa(function(t){return"("+(ax(e.value0)+(" * "+(vs(t)+")")))})(e.value1);if(e instanceof U4)return fa(function(t){return"("+(vs(t)+(" / "+(ax(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},ri={value:function(e){return e instanceof zh?e.value0:P4(Lf)(new Lr("calc"+vs(e)))}};var kt=function(e){return new zh(ix(ux(e))(sx("px")))};var w0=function(e){return new zh(ix(ux(e))(sx("em")))};var q4=xt(Zn);var z4=xt(Hn);var V4={value:function(e){return e}};var cx=q4("row");var lx=cn(V4)(z4("flex-direction"));var Hc=cn(ri),mu=xt(Hn),fx=Rc(ri)(ri),dx=cn(Rc(fx)(fx)),Rf=Hc(mu("width")),gu=Hc(mu("top")),Vh=Hc(mu("right"));var px=function(e){return function(t){return function(n){return function(c){return dx(mu("padding"))(new ne(new ne(e,t),new ne(n,c)))}}}};var hx=function(e){return function(t){return function(n){return function(c){return dx(mu("margin"))(new ne(new ne(e,t),new ne(n,c)))}}}};var ms=Hc(mu("left")),$f=Hc(mu("height")),S0=Hc(mu("bottom"));function Wn(e){return e}function E0(e){return JSON.stringify(e)}function vx(e,t,n,c,v,s,a){return a==null?e():typeof a=="boolean"?t(a):typeof a=="number"?n(a):typeof a=="string"?c(a):Object.prototype.toString.call(a)==="[object Array]"?v(a):s(a)}var mx=function(e){return function(t){return function(n){return vx(be(e),be(e),be(e),t,be(e),be(e),n)}}};var T0=Fe($a),K4=Fe(Zo);var Gh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),M0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gx=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),L0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yx=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),F0=function(){function e(){}return e.value=new e,e}(),kf={show:function(e){if(e instanceof Gh)return"(TypeMismatch "+(T0(e.value0)+")");if(e instanceof M0)return"(UnexpectedValue "+(E0(e.value0)+")");if(e instanceof gx)return"(AtIndex "+(K4(e.value0)+(" "+(Fe(kf)(e.value1)+")")));if(e instanceof L0)return"(AtKey "+(T0(e.value0)+(" "+(Fe(kf)(e.value1)+")")));if(e instanceof yx)return"(Named "+(T0(e.value0)+(" "+(Fe(kf)(e.value1)+")")));if(e instanceof F0)return"MissingValue";throw new Error("Failed pattern match at Data.Argonaut.Decode.Error (line 24, column 10 - line 30, column 35): "+[e.constructor.name])}};var wx=function(){return mx(new Ue(new Gh("String")))(Oe.create)}();var Nc={decodeJson:wx};var jh=function(e){return e.decodeJson};var Tx=Wn;var Bc={encodeJson:Tx};var Of=function(e){return e.encodeJson};var ave=Fa(ID(),1),Wq={keyEncoding:"json",valueEncoding:"json"},RD=e=>t=>n=>()=>e.put(t,n),$D=e=>t=>()=>new Promise((c,v)=>{let s=(a,d)=>{c(d)};e.get(t,Wq,s)});var kD=e=>t=>()=>e.del(t);var OD=e=>()=>e.keys().all();function uI(e){return function(t){return function(n){return function(){e.then(n,t)}}}}var zq=Rd(He),Vq=at(PM),Gq=ge(De),Jq=bn(dM(D1)(po)),jq=xy(po),Kq=V(Ip(Oa)),Qq=_h(po),Xq=ae(En),Yq=Je(Fn),Zq=function(e){return function(t){return xo(function(n){return zq(Vq)(uI(t)(function(c){return n(Ue.create(e(c)))()})(function(c){return n(Oe.create(c))()}))})}};var e8=function(e){return yn(function(t){return $n("Promise failed, couldn't extract JS Error or String")})(Gq)(c0(Jq(jq("Error")(e))(Kq($n)(Qq(e)))))},t8=Zq(e8),Fu=function(e){return Xq(Yq(e))(t8)};var T_=e=>e===void 0;var sI=Fe(kf),cI=ae(En),f8=vn(Li),d8=f8(Hu),lI=Je(Fn),PD=ee(yo);var fI=function(e){var t=Of(e);return function(n){return function(c){var v=Of(c);return function(s){return function(a){return function(d){return function(i){return Fu(RD(a.value0)(t(d))(v(i)))}}}}}}};var dI=function(e){var t=Of(e);return function(n){return function(c){return function(v){var s=jh(v);return function(a){return function(d){return cI(Fu($D(a.value0)(t(d))))(function(i){var r=T_(i);if(r)return PD(G.value);var u=s(i);if(u instanceof Ue)return lI(Hr($n(sI(u.value0))));if(u instanceof Oe)return PD(new z(u.value0));throw new Error("Failed pattern match at Level.DB.Operations (line 28, column 10 - line 30, column 40): "+[u.constructor.name])})}}}}}};var pI=function(e){var t=Of(e);return function(n){return function(c){return function(v){return function(s){return function(a){return Fu(kD(s.value0)(t(a)))}}}}}},hI=function(e){var t=jh(e);return function(n){return function(c){return cI(Fu(OD(c.value0)))(function(v){var s=d8(t)(v);if(s instanceof Ue)return lI(Hr($n(sI(s.value0))));if(s instanceof Oe)return PD(s.value0);throw new Error("Failed pattern match at Level.DB.Operations (line 71, column 3 - line 73, column 26): "+[s.constructor.name])})}}};var _I=Fa(ID(),1),h8={keyEncoding:"json",valueEncoding:"json"},ND=e=>()=>new _I.Level(e,h8);var g8=V(He),y8=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var vI=function(e){return g8(y8.create)(ND(e))};var BD=Bc,M_=Nc,C8=fI(BD)(M_)(Bc)(Nc),b8=dI(BD)(M_)(Bc)(Nc),w8=pI(BD)(M_)(Bc)(Nc),mI=function(e){return function(t){return function(n){return C8(e)(t)(n)}}},gI=function(e){return function(t){return b8(e)(t)}},od=vI("filesystem"),yI=hI(M_)(Nc),DI=function(e){return function(t){return w8(e)(t)}};var ba=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var wI=function(e){return e instanceof xr?new z(e.value1):e instanceof Vr?new z(e.value0):G.value},SI=function(e){return e instanceof xr?new z(e.value0):e instanceof ba?new z(e.value0):G.value};var EI=function(e){var t=me(e);return function(n){var c=me(n);return{append:function(v){return function(s){if(v instanceof ba&&s instanceof ba)return new ba(t(v.value0)(s.value0));if(v instanceof ba&&s instanceof Vr)return new xr(v.value0,s.value0);if(v instanceof ba&&s instanceof xr)return new xr(t(v.value0)(s.value0),s.value1);if(v instanceof Vr&&s instanceof ba)return new xr(s.value0,v.value0);if(v instanceof Vr&&s instanceof Vr)return new Vr(c(v.value0)(s.value0));if(v instanceof Vr&&s instanceof xr)return new xr(s.value0,c(v.value0)(s.value1));if(v instanceof xr&&s instanceof ba)return new xr(t(v.value0)(s.value0),v.value1);if(v instanceof xr&&s instanceof Vr)return new xr(v.value0,c(v.value1)(s.value0));if(v instanceof xr&&s instanceof xr)return new xr(t(v.value0)(s.value0),c(v.value1)(s.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[v.constructor.name,s.constructor.name])}}}}};var xu=function(e){return function(){console.log(e)}},L_=function(e){return function(){console.warn(e)}};var H8=me(ku),P8=at(Ha),MI=Uu(Mt),LI=MI(Ha),A_=Lo(Mt)(Ha),wa=V(It),UD=ut(Ou),N8=me(jt),FI=Ut(Mt),B8=FI(Ha),W8=eg(WF),I_=V(Tt),U8=xt(xF),xI=ae(hr),q8=cp(ug(Mt)),AI=V(rc(It));var z8=ap(Mt)(pr),V8=ae(yi),G8=vp(Nl),J8=ta(Sl(ho)),j8=Lo(Ol(Mt))(Ha),K8=Fe(To),R_=function(e){return e},Q8=function(e){return e},qD=function(e){return function(t){return function(n){return t+(e+n)}}},X8={append:function(e){return function(t){return e+t}}},Y8={append:function(e){return function(t){return e+t}}},II=EI(X8)(Y8),RI=RE(II),x_=FI(RI),Z8=MI(RI),ad=me(wm(II)),TI=function(e){var t=yn(function(n){return P8})(function(n){return LI([n.value0,": ",n.value1])});return A_("; ")(wa(t)(e))},ez=function(e){if(e instanceof iu)return"#"+e.value0;if(e instanceof ei)return"."+e.value0;if(e instanceof uu)return"["+(e.value0+"]");if(e instanceof su)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof cu)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof lu)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof fu)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof du)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof pu)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof ti)return":"+e.value0;if(e instanceof $c)return":"+(e.value0+("("+(A_(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},tz=function(e){return function(t){if(e.length===0&&t instanceof Nh)return["*"];if(t instanceof Nh)return[""];if(t instanceof _0)return[t.value0];if(t instanceof v0)return UD(wa(qD(" > "))(di(t.value0)))(di(t.value1));if(t instanceof m0)return UD(wa(qD(" "))(di(t.value0)))(di(t.value1));if(t instanceof PF)return UD(wa(qD(" + "))(di(t.value0)))(di(t.value1));if(t instanceof NF)return N8(di(t.value0))(di(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},di=function(e){return wa(function(t){return t+B8(ez)(W8(e.value0))})(tz(e.value0)(e.value1))},nz=function(){var e=A_(", ");return function(t){return e(di(t))}}(),$s=function(e){return e.length===0?G.value:I_(function(t){return new jn(t.head,t.tail)})(fp(e))};var nl=function(e){if(e.value0 instanceof JF)return tt(e.value0.value0)(function(t){return UF(nl(t))(e.value0.value0)})($s(e.value1));if(e.value0 instanceof y0)return tt(e.value0.value0)(function(t){return Tn(nl(t))(e.value0.value0)})($s(e.value1));if(e.value0 instanceof VF)return tt(e.value0.value0)(function(t){return Tn(e.value0.value0)(nl(t))})($s(e.value1));if(e.value0 instanceof GF)return tt(Bh("TODO"))(nl)($s(tg(e.value0.value0)(Dn(e.value0)(e.value1))));if(e.value0 instanceof zF)return tt(it($t)(e.value0.value0))(function(t){return it(nl(t))(e.value0.value0)})($s(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},rz=function(e){return Tf(e)},oz=function(e){return z.create(Vr.create(R_(U8("@import url("+(e+`);
`)))))},az=function(e){return e},zD=function(e){return xI(e)(function(){var t=I_(az);return function(n){return t(wI(n))}}())},iz=function(e){return e},$I=function(e){return xI(e)(function(){var t=I_(iz);return function(n){return t(SI(n))}}())},uz=function(e){return tt(e.value0)(function(t){return"("+(e.value0+(": "+(Tf(t)+")")))})(e.value1)},sz=function(e){return"@media "+(rz(e.value1)+q8(H8)(AI(function(t){return function(n){return" and "+n}(uz(t))})(e.value2)))};var cz=function(e){return function(t){if(e instanceof Lr&&t instanceof Lr)return[new Oe(new ne(e.value0,t.value0))];if(e instanceof Mr&&t instanceof Lr)return wa(function(n){return new Oe(new ne(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof Lr&&t instanceof Mr)return wa(function(n){return new Oe(new ne(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof Mr&&t instanceof Mr)return wa(function(n){return tt(new Ue(n.value0+n.value1))(function(){var c=ne.create(n.value0+n.value1);return function(v){return Oe.create(c(function(s){return n.value0+s}(v)))}}())(z8(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},VD=function(e){return cz(e.value0)(e.value1)},lz=function(e){return function(t){var n=V8(t)(VD),c=I_(function(s){return ba.create(Q8(TI(G8(s))))})($s(n)),v=function(s){return z.create(Vr.create(R_(A_(" ")([nz(nl(s)),"{",TI(n),`}
`]))))};return tt(c)(v)($s(e))}},id=function(e){return function(t){var n=function(h){return h instanceof jF?new z(new ne(h.value0,h.value1)):G.value},c=x_(Pa(Ve(fz)(e)))(ra(n)(t)),v=function(h){return h instanceof Af?new z(new ne(h.value0,h.value1)):G.value},s=function(){var h=ra(v)(t),_=J8(RT)(h);return _?lz(e)(h):G.value}(),a=function(h){return id(Dn(h)(e))},d=function(h){return h instanceof D0?new z(new ne(h.value0,h.value1)):G.value},i=Z8(wa(Pa(a))(ra(d)(t))),r=function(h){return h instanceof QF?new z(h.value0):G.value},u=x_(dz)(ra(r)(t)),l=function(h){return h instanceof XF?new z(h.value0):G.value},p=x_(oz)(ra(l)(t)),f=function(h){return h instanceof KF?new z(h.value0):G.value},o=x_(hz)(ra(f)(t));return ad(s)(ad(p)(ad(u)(ad(o)(ad(i)(c)))))}},fz=function(e){return function(t){return function(n){return z.create(Vr.create(R_(sz(e)+(" { "+(Ln("")(zD(id(t)(n)))+` }
`)))))}}},dz=function(e){var t=" "+(e.value0+(" { "+(j8(" ")(AI(Pa(pz))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],c=LI(wa(function(v){return v+t})(n));return new z(new Vr(c))},pz=function(e){return function(t){var n=Ln("")($I(id([])(t)));return K8(e)+("% "+("{ "+(n+" }")))}},hz=function(e){return z.create(Vr.create(R_("@font-face { "+(Ln("")($I(id([])(e)))+` }
`))))},kI=function(){var e=id([]);return function(t){return e(If(t))}}();var rl=function(){var e=function(t){return function(n){return new z(new Xp(t,n))}};return function(t){return LL(e(t))}}(),GD=function(e){return FL(e)};var OI=GD(xL);var HI=function(e){return GD(e)("type")};var PI=OI("width");var NI=OI("height");var JD=function(){return IL(G.value)}();var vz=HI(zy),mz=ae(yi),gz=mf(Mt),BI=function(e){var t=Ln("")(zD(kI(e)));return u0([vz("text/css")])([nu(t)])},jD=function(){var e=function(){var s=to("; "),a=yL(Pu)(function(d){return function(i){return[d+(": "+i)]}});return function(d){return s(a(d))}}(),t=rg(Ut(op)(Pu)(nc)),n=function(s){return s instanceof Af?new z(new ne(s.value0,s.value1)):G.value},c=function(s){var a=mz(ra(n)(s))(function(d){return t(VD(d))});return gz(a)},v=JD("style");return function(s){return v(e(c(If(s))))}}();function UI(e,t,n){var c=Object.prototype.toString.call(n);return c.indexOf("[object HTML")===0&&c.indexOf("Element]")===c.length-8?t(n):e}var qI=Z;var ud=function(e){return UI(G.value,z.create,e)};var VI=Lt(Ft),zI=VI(Wh),pi=ae(On),KD=Qu(xn),O_=wt(Sr)(Yt),QD=VI(On),Dz=mr(xn),GI=function(){function e(){}return e.value=new e,e}(),JI=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jI=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cz=function(e){return function(t){var n=ou([Ya([rl("editor"),jD(zI(Rf(kt(500)))(function(){return $f(kt(500))}))])([]),Ac([hs(function(c){return JI.create(ao(c))})])([nu("Save")]),Ac([hs(function(c){return jI.create(ao(c))})])([nu("Exit")])]);return Ya([jD(zI(Oc(tx))(function(){return lx(cx)}))])([n])}},bz=function(e){var t=Je(wr(e.MonadEffect0())),n=Xn(Th(e));return function(c){return function(v){if(v instanceof GI)return pi(t(od))(function(s){return pi(KD(function(a){return a.filePath}))(function(a){return pi(n(gI(s)(a)))(function(d){return pi(Xa("editor"))(function(i){return Ve(O_)(i)(function(r){return Ve(O_)(ud(r))(function(u){return pi(t(TF(u)(kh.default)))(function(l){return pi(t(p0(l)))(function(p){return QD(Ve(O_)(d)(function(f){return t(FF(f)(p))}))(function(){return Dz(function(f){var o={};for(var h in f)({}).hasOwnProperty.call(f,h)&&(o[h]=f[h]);return o.editSession=new z(new ne(s,new ne(l,p))),o})})})})})})})})})});if(v instanceof JI)return QD(t(lr(v.value0)))(function(){return pi(KD(function(s){return s.editSession}))(function(s){return pi(KD(function(a){return a.filePath}))(function(a){return Ve(O_)(s)(function(d){return pi(t(d0(d.value1.value1)))(function(i){return n(mI(d.value0)(a)(i))})})})})});if(v instanceof jI)return QD(t(lr(v.value0)))(function(){return ha(void 0)});throw new Error("Failed pattern match at Example.Editor (line 73, column 16 - line 95, column 18): "+[v.constructor.name])}}},KI=function(e){var t=Cz(e),n=bz(e);return function(c){return Tr({initialState:function(v){return{editSession:G.value,filePath:v}},render:t,eval:Er({handleAction:n(c),handleQuery:sn.handleQuery,receive:sn.receive,initialize:new z(GI.value),finalize:sn.finalize})})}};function H_(e){return function(){return e.getContext("2d")}}function sd(e){return function(){return e.width}}function cd(e){return function(){return e.height}}function ld(e){return function(t){return function(){e.width=t}}}function fd(e){return function(t){return function(){e.height=t}}}function XD(e){return function(){return e.toDataURL()}}function YD(e){return function(t){return function(){e.lineWidth=t}}}function ZD(e){return function(t){return function(){e.setLineDash(t)}}}function eC(e){return function(t){return function(){e.fillStyle=t}}}function tC(e){return function(t){return function(){e.strokeStyle=t}}}function nC(e){return function(t){return function(){e.shadowColor=t}}}function rC(e){return function(t){return function(){e.shadowBlur=t}}}function oC(e){return function(t){return function(){e.shadowOffsetX=t}}}function aC(e){return function(t){return function(){e.shadowOffsetY=t}}}function iC(e){return function(t){return function(){e.miterLimit=t}}}function P_(e){return function(t){return function(){e.lineCap=t}}}function N_(e){return function(t){return function(){e.lineJoin=t}}}function QI(e){return function(t){return function(){e.globalCompositeOperation=t}}}function uC(e){return function(t){return function(){e.globalAlpha=t}}}function B_(e){return function(){e.beginPath()}}function W_(e){return function(){e.stroke()}}function U_(e){return function(){e.fill()}}function sC(e){return function(){e.clip()}}function cC(e){return function(t){return function(n){return function(){e.lineTo(t,n)}}}}function lC(e){return function(t){return function(n){return function(){e.moveTo(t,n)}}}}function fC(e){return function(){e.closePath()}}function dC(e){return function(t){return function(){e.arc(t.x,t.y,t.radius,t.start,t.end,t.useCounterClockwise)}}}function pC(e){return function(t){return function(){e.rect(t.x,t.y,t.width,t.height)}}}function hC(e){return function(t){return function(){e.fillRect(t.x,t.y,t.width,t.height)}}}function _C(e){return function(t){return function(){e.strokeRect(t.x,t.y,t.width,t.height)}}}function vC(e){return function(t){return function(){e.clearRect(t.x,t.y,t.width,t.height)}}}function mC(e){return function(t){return function(){e.scale(t.scaleX,t.scaleY)}}}function gC(e){return function(t){return function(){e.rotate(t)}}}function yC(e){return function(t){return function(){e.translate(t.translateX,t.translateY)}}}function DC(e){return function(t){return function(){e.transform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function CC(e){return function(t){return function(){e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function XI(e){return function(){return e.textAlign}}function YI(e){return function(t){return function(){e.textAlign=t}}}function ZI(e){return function(){return e.textBaseline}}function eR(e){return function(t){return function(){e.textBaseline=t}}}function bC(e){return function(){return e.font}}function wC(e){return function(t){return function(){e.font=t}}}function SC(e){return function(t){return function(n){return function(c){return function(){e.fillText(t,n,c)}}}}}function EC(e){return function(t){return function(n){return function(c){return function(){e.strokeText(t,n,c)}}}}}function TC(e){return function(t){return function(){return e.measureText(t)}}}function q_(e){return function(){e.save()}}function z_(e){return function(){e.restore()}}function MC(e){return function(t){return function(n){return function(c){return function(v){return function(){return e.getImageData(t,n,c,v)}}}}}}function LC(e){return function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return function(d){return function(){e.putImageData(t,n,c,v,s,a,d)}}}}}}}}}function FC(e){return function(t){return function(n){return function(c){return function(){e.putImageData(t,n,c)}}}}}function xC(e){return function(t){return function(n){return function(){return e.createImageData(t,n)}}}}function AC(e){return function(t){return function(n){return function(c){return function(){e.drawImage(t,n,c)}}}}}function IC(e){return function(t){return function(n){return function(c){return function(v){return function(s){return function(){e.drawImage(t,n,c,v,s)}}}}}}}function RC(e){return function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return function(d){return function(i){return function(r){return function(){e.drawImage(t,n,c,v,s,a,d,i,r)}}}}}}}}}}}function tR(e){return function(t){return function(n){return function(){return e.createPattern(t,n)}}}}function $C(e){return function(t){return function(){e.fillStyle=t}}}function kC(e){return function(t){return function(){return e.createLinearGradient(t.x0,t.y0,t.x1,t.y1)}}}function OC(e){return function(t){return function(){return e.createRadialGradient(t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)}}}function HC(e){return function(t){return function(){e.fillStyle=t}}}function PC(e){return function(t){return function(){e.quadraticCurveTo(t.cpx,t.cpy,t.x,t.y)}}}function NC(e){return function(t){return function(){e.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x,t.y)}}}var Ez=function(e){return Zu(Hr(e))},BC=function(e){return Ez($n(e))};var nR=V(He),Lz=So(Lm),rR=function(){function e(){}return e.value=new e,e}(),oR=function(){function e(){}return e.value=new e,e}(),aR=function(){function e(){}return e.value=new e,e}(),iR=function(){function e(){}return e.value=new e,e}(),uR=function(){function e(){}return e.value=new e,e}(),sR=function(){function e(){}return e.value=new e,e}(),cR=function(){function e(){}return e.value=new e,e}(),lR=function(){function e(){}return e.value=new e,e}(),fR=function(){function e(){}return e.value=new e,e}(),dR=function(){function e(){}return e.value=new e,e}(),pR=function(){function e(){}return e.value=new e,e}(),Fz=function(){function e(){}return e.value=new e,e}(),xz=function(){function e(){}return e.value=new e,e}(),Az=function(){function e(){}return e.value=new e,e}(),Iz=function(){function e(){}return e.value=new e,e}(),Rz=function(){function e(){}return e.value=new e,e}(),$z=function(){function e(){}return e.value=new e,e}(),kz=function(){function e(){}return e.value=new e,e}(),Oz=function(){function e(){}return e.value=new e,e}(),Hz=function(){function e(){}return e.value=new e,e}(),Pz=function(){function e(){}return e.value=new e,e}(),Nz=function(){function e(){}return e.value=new e,e}(),Bz=function(){function e(){}return e.value=new e,e}(),Wz=function(){function e(){}return e.value=new e,e}(),Uz=function(){function e(){}return e.value=new e,e}(),qz=function(){function e(){}return e.value=new e,e}(),zz=function(){function e(){}return e.value=new e,e}(),Vz=function(){function e(){}return e.value=new e,e}(),Gz=function(){function e(){}return e.value=new e,e}(),Jz=function(){function e(){}return e.value=new e,e}(),jz=function(){function e(){}return e.value=new e,e}(),Kz=function(){function e(){}return e.value=new e,e}(),Qz=function(){function e(){}return e.value=new e,e}(),Xz=function(){function e(){}return e.value=new e,e}(),Yz=function(){function e(){}return e.value=new e,e}(),Zz=function(){function e(){}return e.value=new e,e}(),eV=function(){function e(){}return e.value=new e,e}(),tV=function(){function e(){}return e.value=new e,e}(),nV=function(){function e(){}return e.value=new e,e}(),rV=function(){function e(){}return e.value=new e,e}(),oV=function(){function e(){}return e.value=new e,e}(),aV=function(){function e(){}return e.value=new e,e}(),iV=function(){function e(){}return e.value=new e,e}(),uV=function(){function e(){}return e.value=new e,e}(),sV=function(){function e(){}return e.value=new e,e}(),cV=function(){function e(){}return e.value=new e,e}(),lV=function(){function e(){}return e.value=new e,e}();var hR=function(e){var t=function(n){return n==="top"?rR.value:n==="hanging"?oR.value:n==="middle"?aR.value:n==="alphabetic"?iR.value:n==="ideographic"?uR.value:n==="bottom"?sR.value:BC("invalid TextBaseline: "+n)};return nR(t)(ZI(e))},_R=function(e){var t=function(n){return n==="left"?cR.value:n==="right"?lR.value:n==="center"?fR.value:n==="start"?dR.value:n==="end"?pR.value:BC("invalid TextAlign: "+n)};return nR(t)(XI(e))};var vR=function(e){return function(t){var n=function(c){if(c instanceof rR)return"top";if(c instanceof oR)return"hanging";if(c instanceof aR)return"middle";if(c instanceof iR)return"alphabetic";if(c instanceof uR)return"ideographic";if(c instanceof sR)return"bottom";throw new Error("Failed pattern match at Graphics.Canvas (line 577, column 5 - line 577, column 33): "+[c.constructor.name])};return eR(e)(n(t))}},mR=function(e){return function(t){var n=function(c){if(c instanceof cR)return"left";if(c instanceof lR)return"right";if(c instanceof fR)return"center";if(c instanceof dR)return"start";if(c instanceof pR)return"end";throw new Error("Failed pattern match at Graphics.Canvas (line 531, column 5 - line 531, column 32): "+[c.constructor.name])};return YI(e)(n(t))}},gR=function(e){return function(t){if(t instanceof Rz)return N_(e)("bevel");if(t instanceof $z)return N_(e)("round");if(t instanceof kz)return N_(e)("miter");throw new Error("Failed pattern match at Graphics.Canvas (line 253, column 1 - line 253, column 52): "+[e.constructor.name,t.constructor.name])}},yR=function(e){return function(t){if(t instanceof Oz)return P_(e)("round");if(t instanceof Hz)return P_(e)("square");if(t instanceof Pz)return P_(e)("butt");throw new Error("Failed pattern match at Graphics.Canvas (line 238, column 1 - line 238, column 50): "+[e.constructor.name,t.constructor.name])}},DR=function(e){return function(t){var n=function(c){if(c instanceof Nz)return"source-over";if(c instanceof Bz)return"source-in";if(c instanceof Wz)return"source-out";if(c instanceof Uz)return"source-atop";if(c instanceof qz)return"destination-over";if(c instanceof zz)return"destination-in";if(c instanceof Vz)return"destination-out";if(c instanceof Gz)return"destination-atop";if(c instanceof Jz)return"lighter";if(c instanceof jz)return"copy";if(c instanceof Kz)return"xor";if(c instanceof Qz)return"multiply";if(c instanceof Xz)return"screen";if(c instanceof Yz)return"overlay";if(c instanceof Zz)return"darken";if(c instanceof eV)return"lighten";if(c instanceof tV)return"color-dodge";if(c instanceof nV)return"color-burn";if(c instanceof rV)return"hard-light";if(c instanceof oV)return"soft-light";if(c instanceof aV)return"difference";if(c instanceof iV)return"exclusion";if(c instanceof uV)return"hue";if(c instanceof sV)return"saturation";if(c instanceof cV)return"color";if(c instanceof lV)return"luminosity";throw new Error("Failed pattern match at Graphics.Canvas (line 326, column 5 - line 326, column 45): "+[c.constructor.name])};return QI(e)(n(t))}},CR=function(e){return function(t){return Lz(fd(e)(t.height))(ld(e)(t.width))}};var bR=function(e){return function(){var n=sd(e)(),c=cd(e)();return{width:n,height:c}}};var wR=function(e){return function(t){return function(n){var c=function(v){if(v instanceof Fz)return"repeat";if(v instanceof xz)return"repeat-x";if(v instanceof Az)return"repeat-y";if(v instanceof Iz)return"no-repeat";throw new Error("Failed pattern match at Graphics.Canvas (line 677, column 5 - line 677, column 31): "+[v.constructor.name])};return tR(e)(t)(c(n))}}};var ER=e=>t=>()=>e.convertToBlob({type:"image/jpeg",quality:t});var TR=function(e){return function(t){return Fu(ER(e)(t))}};var hV=St(mc),Gr=V(He),LR=Lt(Ft),_V=V(go),Ob=ge(De),vV=function(e){return e},WC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),V_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),UC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),G_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),VC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),J_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),j_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),JC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),K_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Q_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),KC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),QC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),XC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),YC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ZC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),eb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),nb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),X_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Y_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ob=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Z_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ev=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ab=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ib=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ub=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),nv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ov=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),db=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),av=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),gb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),yb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),iv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Db=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),bb=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),wb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Sb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Eb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Tb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Mb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Lb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ab=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ib=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mV=function(e){return e};var gV=function(e){var t=V(e);return{map:function(n){return function(c){if(c instanceof WC)return new WC(t(n)(c.value0));if(c instanceof V_)return new V_(function(v){return n(c.value0(v))});if(c instanceof UC)return new UC(c.value0,n(c.value1));if(c instanceof G_)return new G_(function(v){return n(c.value0(v))});if(c instanceof qC)return new qC(c.value0,n(c.value1));if(c instanceof zC)return new zC(function(v){return n(c.value0(v))});if(c instanceof VC)return new VC(c.value0,n(c.value1));if(c instanceof J_)return new J_(function(v){return n(c.value0(v))});if(c instanceof GC)return new GC(function(v){return n(c.value0(v))});if(c instanceof j_)return new j_(c.value0,n(c.value1));if(c instanceof JC)return new JC(c.value0,n(c.value1));if(c instanceof K_)return new K_(c.value0,n(c.value1));if(c instanceof Q_)return new Q_(c.value0,n(c.value1));if(c instanceof jC)return new jC(c.value0,n(c.value1));if(c instanceof KC)return new KC(c.value0,n(c.value1));if(c instanceof QC)return new QC(c.value0,n(c.value1));if(c instanceof XC)return new XC(c.value0,n(c.value1));if(c instanceof YC)return new YC(c.value0,n(c.value1));if(c instanceof ZC)return new ZC(c.value0,n(c.value1));if(c instanceof eb)return new eb(c.value0,n(c.value1));if(c instanceof tb)return new tb(c.value0,n(c.value1));if(c instanceof nb)return new nb(c.value0,n(c.value1));if(c instanceof X_)return new X_(n(c.value0));if(c instanceof Y_)return new Y_(n(c.value0));if(c instanceof rb)return new rb(n(c.value0));if(c instanceof ob)return new ob(n(c.value0));if(c instanceof Z_)return new Z_(c.value0,n(c.value1));if(c instanceof ev)return new ev(c.value0,n(c.value1));if(c instanceof ab)return new ab(n(c.value0));if(c instanceof ib)return new ib(c.value0,n(c.value1));if(c instanceof ub)return new ub(c.value0,n(c.value1));if(c instanceof tv)return new tv(c.value0,n(c.value1));if(c instanceof sb)return new sb(c.value0,n(c.value1));if(c instanceof nv)return new nv(c.value0,n(c.value1));if(c instanceof cb)return new cb(c.value0,n(c.value1));if(c instanceof rv)return new rv(c.value0,n(c.value1));if(c instanceof ov)return new ov(c.value0,n(c.value1));if(c instanceof lb)return new lb(c.value0,n(c.value1));if(c instanceof fb)return new fb(c.value0,n(c.value1));if(c instanceof db)return new db(function(v){return n(c.value0(v))});if(c instanceof pb)return new pb(c.value0,n(c.value1));if(c instanceof hb)return new hb(function(v){return n(c.value0(v))});if(c instanceof _b)return new _b(c.value0,n(c.value1));if(c instanceof vb)return new vb(function(v){return n(c.value0(v))});if(c instanceof mb)return new mb(c.value0,n(c.value1));if(c instanceof av)return new av(c.value0,c.value1,n(c.value2));if(c instanceof gb)return new gb(c.value0,c.value1,n(c.value2));if(c instanceof yb)return new yb(c.value0,function(v){return n(c.value1(v))});if(c instanceof iv)return new iv(n(c.value0));if(c instanceof uv)return new uv(n(c.value0));if(c instanceof Db)return new Db(c.value0,function(v){return n(c.value1(v))});if(c instanceof Cb)return new Cb(c.value0,c.value1,n(c.value2));if(c instanceof bb)return new bb(c.value0,c.value1,c.value2,n(c.value3));if(c instanceof wb)return new wb(c.value0,function(v){return n(c.value1(v))});if(c instanceof Sb)return new Sb(function(v){return n(c.value0(v))});if(c instanceof Eb)return new Eb(c.value0,c.value1,n(c.value2));if(c instanceof Tb)return new Tb(c.value0,c.value1,n(c.value2));if(c instanceof Mb)return new Mb(c.value0,c.value1,n(c.value2));if(c instanceof Lb)return new Lb(c.value0,c.value1,function(v){return n(c.value2(v))});if(c instanceof Fb)return new Fb(c.value0,n(c.value1));if(c instanceof xb)return new xb(c.value0,function(v){return n(c.value1(v))});if(c instanceof Ab)return new Ab(c.value0,function(v){return n(c.value1(v))});if(c instanceof Ib)return new Ib(c.value0,n(c.value1));if(c instanceof Rb)return new Rb(c.value0,n(c.value1));if(c instanceof $b)return new $b(c.value0,n(c.value1));if(c instanceof kb)return new kb(c.value0,function(v){return n(c.value1(v))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 582, column 1 - line 648, column 64): "+[n.constructor.name,c.constructor.name])}}}},Sa=Qn,MR=LR(Sa),yV=ae(Sa);var Hb=vr,DV=ee(Hb),FR=function(e){var t=e.MonadEffect0(),n=t.Monad0(),c=hV(n),v=n.Bind1(),s=Ua(v),a=ae(s),d=br(Ni(n)),i=Je(la(t)),r=LR(s),u=ee(gc(n.Applicative0())),l=Xn(qp(e)),p=aa(gV(v.Apply0().Functor0()));return function(f){var o=function(_){if(_ instanceof WC)return c(_.value0);if(_ instanceof V_)return a(d)(function(m){return i(Gr(_.value0)(sd(m.canvasElement)))});if(_ instanceof UC)return a(d)(function(m){return r(i(ld(m.canvasElement)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof G_)return a(d)(function(m){return i(Gr(_.value0)(cd(m.canvasElement)))});if(_ instanceof qC)return a(d)(function(m){return r(i(fd(m.canvasElement)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof zC)return a(d)(function(m){return i(Gr(_.value0)(bR(m.canvasElement)))});if(_ instanceof VC)return a(d)(function(m){return r(i(CR(m.canvasElement)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof J_)return a(d)(function(m){return i(Gr(_.value0)(by(m.canvasElement)))});if(_ instanceof GC)return a(d)(function(m){return i(Gr(_.value0)(XD(m.canvasElement)))});if(_ instanceof j_)return a(d)(function(m){return r(i(YD(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof JC)return a(d)(function(m){return r(i(ZD(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof K_)return a(d)(function(m){return r(i(eC(m.context2D)(cc(_.value0))))(function(){return u(_.value1)})});if(_ instanceof Q_)return a(d)(function(m){return r(i(tC(m.context2D)(cc(_.value0))))(function(){return u(_.value1)})});if(_ instanceof jC)return a(d)(function(m){return r(i(rC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof KC)return a(d)(function(m){return r(i(oC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof QC)return a(d)(function(m){return r(i(aC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof XC)return a(d)(function(m){return r(i(nC(m.context2D)(cc(_.value0))))(function(){return u(_.value1)})});if(_ instanceof YC)return a(d)(function(m){return r(i(iC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof ZC)return a(d)(function(m){return r(i(yR(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof eb)return a(d)(function(m){return r(i(gR(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof tb)return a(d)(function(m){return r(i(DR(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof nb)return a(d)(function(m){return r(i(uC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof X_)return a(d)(function(m){return r(i(B_(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof Y_)return a(d)(function(m){return r(i(W_(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof rb)return a(d)(function(m){return r(i(U_(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof ob)return a(d)(function(m){return r(i(sC(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof Z_)return a(d)(function(m){return r(i(cC(m.context2D)(_.value0.x)(_.value0.y)))(function(){return u(_.value1)})});if(_ instanceof ev)return a(d)(function(m){return r(i(lC(m.context2D)(_.value0.x)(_.value0.y)))(function(){return u(_.value1)})});if(_ instanceof ab)return a(d)(function(m){return r(i(fC(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof ib)return a(d)(function(m){return r(i(dC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof ub)return a(d)(function(m){return r(i(pC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof tv)return a(d)(function(m){return r(i(hC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof sb)return a(d)(function(m){return r(i(_C(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof nv)return a(d)(function(m){return r(i(vC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof cb)return a(d)(function(m){return r(i(mC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof rv)return a(d)(function(m){return r(i(gC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof ov)return a(d)(function(m){return r(i(yC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof lb)return a(d)(function(m){return r(i(DC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof fb)return a(d)(function(m){return r(i(CC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof db)return a(d)(function(m){return i(Gr(_.value0)(_R(m.context2D)))});if(_ instanceof pb)return a(d)(function(m){return r(i(mR(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof hb)return a(d)(function(m){return i(Gr(_.value0)(hR(m.context2D)))});if(_ instanceof _b)return a(d)(function(m){return r(i(vR(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof vb)return a(d)(function(m){return i(Gr(function(y){return _.value0(vV(y))})(bC(m.context2D)))});if(_ instanceof mb)return a(d)(function(m){return r(i(wC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof av)return a(d)(function(m){return r(i(SC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return u(_.value2)})});if(_ instanceof gb)return a(d)(function(m){return r(i(EC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return u(_.value2)})});if(_ instanceof yb)return a(d)(function(m){return i(Gr(_.value1)(TC(m.context2D)(_.value0)))});if(_ instanceof iv)return a(d)(function(m){return r(i(q_(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof uv)return a(d)(function(m){return r(i(z_(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof Db)return a(d)(function(m){return i(Gr(_.value1)(MC(m.context2D)(_.value0.x)(_.value0.y)(_.value0.width)(_.value0.height)))});if(_ instanceof Cb)return a(d)(function(m){return r(i(FC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return u(_.value2)})});if(_ instanceof bb)return a(d)(function(m){return r(i(LC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)(_.value2.x)(_.value2.y)(_.value2.width)(_.value2.height)))(function(){return u(_.value3)})});if(_ instanceof wb)return a(d)(function(m){return i(Gr(_.value1)(xC(m.context2D)(_.value0.width)(_.value0.height)))});if(_ instanceof Sb)return a(d)(function(m){return u(_.value0(m.canvasElement))});if(_ instanceof Eb)return a(d)(function(m){return r(i(AC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return u(_.value2)})});if(_ instanceof Tb)return a(d)(function(m){return r(i(IC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)(_.value1.width)(_.value1.height)))(function(){return u(_.value2)})});if(_ instanceof Mb)return a(d)(function(m){return r(i(RC(m.context2D)(_.value0)(_.value1.source.x)(_.value1.source.y)(_.value1.source.width)(_.value1.source.height)(_.value1.target.x)(_.value1.target.y)(_.value1.target.width)(_.value1.target.height)))(function(){return u(_.value2)})});if(_ instanceof Lb)return a(d)(function(m){return i(Gr(_.value2)(wR(m.context2D)(_.value0)(_.value1)))});if(_ instanceof Fb)return a(d)(function(m){return r(i($C(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof xb)return a(d)(function(m){return i(Gr(_.value1)(kC(m.context2D)(_.value0)))});if(_ instanceof Ab)return a(d)(function(m){return i(Gr(_.value1)(OC(m.context2D)(_.value0)))});if(_ instanceof Ib)return a(d)(function(m){return r(i(HC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof Rb)return a(d)(function(m){return r(i(PC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof $b)return a(d)(function(m){return r(i(NC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof kb)return a(d)(function(m){return l(_V(_.value1)(TR(m.canvasElement)(_.value0)))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 61, column 5 - line 61, column 25): "+[_.constructor.name])},h=p(Bi(f))(o);return function(_){return h(function(m){return m}(_))}}};var tr=function(e){return mV(_t(e))},xR=function(e){return tr(new Z_(e,void 0))};var AR=function(e){return tr(new ev(e,void 0))};var CV=function(){return tr(new uv(void 0))}(),IR=function(e){return tr(new rv(e,void 0))},bV=function(){return tr(new iv(void 0))}(),dd=function(e){return MR(bV)(function(){return yV(e)(function(t){return MR(CV)(function(){return DV(t)})})})};var ol=function(e){return tr(new K_(e,void 0))};var RR=function(e){return tr(new j_(e,void 0))};var $R=function(e){return tr(new Q_(e,void 0))};var kR=function(){return tr(new Y_(void 0))}();var OR=function(e){return tr(new ov(e,void 0))};var sv=function(){return tr(new V_(Ob))}();var cv=function(){return tr(new G_(Ob))}();var HR=function(){return tr(new J_(Ob))}(),Pb=function(e){return function(t){return tr(new av(e,t,void 0))}},lv=function(e){return tr(new tv(e,void 0))};var fv=function(e){return tr(new nv(e,void 0))};var PR=function(){return tr(new X_(void 0))}();var Ea=function(){return window};function NR(e){return e.readyState}var pd=function(){function e(){}return e.value=new e,e}(),TV=function(){function e(){}return e.value=new e,e}(),MV=function(){function e(){}return e.value=new e,e}();var BR=function(e){return e==="loading"?new z(pd.value):e==="interactive"?new z(TV.value):e==="complete"?new z(MV.value):G.value};var FV=V(He);var UR=Z;var qR=Z;var zR=function(e){return FV(function(){var t=Ln(pd.value);return function(n){return t(BR(n))}}())(function(){return NR(e)})};function al(e){return function(){return e.document}}var jR=Z;var QR=ae(En),D7=Je(Fn),Bb=ln(_r),C7=zs(_r),XR=ee(yo),b7=ln(hr),w7=ee(Xt),S7=V(He),E7=Lt(Ft),T7=Cr(Up),M7=function(e){return QR(D7(Bb(C7(function(){var t=lL(e);return function(n){return t(UR(n))}}())(al))(Ea)))(function(t){return XR(b7(ud)(t))})},YR=tf(yn(Hr)(be(w7(void 0)))),L7=xo(function(e){return function(){var n=Bb(zR)(Bb(al)(Ea))();if(n instanceof pd){var c=S7(jR)(Ea)(),v=gf(function(s){return e(new Oe(void 0))})();return Oy(l0)(v)(!1)(c)(),ts(Hy(l0)(v)(!1)(c))}return e(new Oe(void 0))(),Ug}}),ZR=E7(En)(L7)(function(){return QR(M7("body"))(function(e){return tt(T7($n("Could not find body")))(XR)(e)})});var Wb=ae(On),x7=gr(xn),A7=vn(Il)(Sr),I7=St(Eh),R7=wt(Sr)(Yt),$7=mr(xn),k7=function(){function e(){}return e.value=new e,e}(),O7=function(e){return s0([rl("canvas"),PI(e.dimensions.width),NI(e.dimensions.height)])},H7=function(e){var t=I7(e.MonadEffect0().Monad0()),n=FR(e);return function(c){var v=n(c);return function(s){return Wb(x7)(function(a){return Ve(A7)(a.canvas)(function(d){return t(Io(v(s))(d))})})}}},P7=function(e){var t=Je(wr(e.MonadEffect0()));return function(n){return Wb(Xa("canvas"))(function(c){return Ve(R7)(c)(function(v){return Wb(t(H_(v)))(function(s){return $7(function(a){var d={};for(var i in a)({}).hasOwnProperty.call(a,i)&&(d[i]=a[i]);return d.canvas=new z({canvasElement:v,context2D:s}),d})})})})}},il=function(e){var t=P7(e),n=H7(e);return function(c){return Tr({initialState:function(v){return{dimensions:v,canvas:G.value}},render:O7,eval:Er({handleAction:t,handleQuery:n(c),receive:sn.receive,initialize:new z(k7.value),finalize:sn.finalize})})}};var e$=i0();var pv=function(){return function(e){var t=e$(e);return function(n){var c=t(n);return function(v){return function(s){return function(a){return function(d){return qy(new xc(c(v)(s)(a)(d)(be(G.value))))}}}}}}},hv=function(){return function(e){var t=e$(e);return function(n){var c=t(n);return function(v){return function(s){return function(a){return function(d){return function(i){return qy(new xc(c(v)(s)(a)(d)(function(r){return z.create(i(r))})))}}}}}}}};function vv(e){return function(t){return function(){return t.requestAnimationFrame(n=>e(n)())}}}var t$=ae(On),u$=Lt(Ft),n$=yt(He),r$=ae(_r),B7=u$(On),o$=yt(oo),W7=V(Xy),U7=gr(xn),a$=ae(Sa),q7=u$(Sa),s$={reflectSymbol:function(){return"canvas"}},z7=Oo()(s$)(wn),V7=pv()(s$)(wn),c$=function(){function e(){}return e.value=new e,e}(),i$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),l$=function(){return Wt.value}(),G7=function(e){var t=Je(wr(e.MonadEffect0()));return function(n){return function(c){if(c instanceof c$)return t$(t(sr))(function(v){var s=function(a){return function(){return ur(v.listener)(a)(),n$(r$(Ea)(vv(s)))()}};return B7(t(n$(r$(Ea)(vv(s)))))(function(){return o$(cr(W7(i$.create)(v.emitter)))})});if(c instanceof i$)return t$(U7)(function(v){var s=dd(a$(sv)(function(a){return a$(cv)(function(d){return q7(fv({x:0,y:0,width:a,height:d}))(function(){return v.animation(c.value0)})})}));return o$(z7(l$)(void 0)(s))});throw new Error("Failed pattern match at Halogen.Canvas.Animate (line 58, column 16 - line 73, column 37): "+[c.constructor.name])}}},J7=function(e){var t=il(e);return function(n){var c=t(n);return function(v){return V7(l$)(void 0)(c)(v.dimensions)}}},f$=function(e){var t=J7(e),n=G7(e);return function(c){return Tr({initialState:function(v){return{dimensions:v.dimensions,animation:v.animation}},render:t(c),eval:Er({handleAction:n(c),handleQuery:sn.handleQuery,receive:sn.receive,initialize:new z(c$.value),finalize:sn.finalize})})}};var qb=Z;var zb=ae(On),Y7=gr(xn),d$=yt(oo),h$={reflectSymbol:function(){return"canvas"}},Vb=Oo()(h$)(wn),Z7=wt(Sr)(Yt),_$=Lt(Ft),eG=_$(On),tG=Ku(xn),p$=ae(Sa),nG=_$(Sa),rG=pv()(h$)(wn),oG=ge(De),v$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),m$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),g$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),y$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),D$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),C$=function(){function e(){}return e.value=new e,e}(),Ta=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),aG=function(e){if(e instanceof v$)return lr(qb(e.value0));if(e instanceof m$)return lr(qb(e.value0));if(e instanceof g$)return lr(ao(e.value0));if(e instanceof y$)return lr(ao(e.value0));if(e instanceof gv)return lr(ao(e.value0));if(e instanceof yv)return lr(ao(e.value0));if(e instanceof D$)return lr(ao(e.value0));if(e instanceof Dv)return lr(ao(e.value0));if(e instanceof Cv)return lr(ao(e.value0));throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 104, column 1 - line 104, column 55): "+[e.constructor.name])},mv=function(){return Wt.value}(),iG=function(e){var t=Je(wr(e.MonadEffect0()));return function(n){return function(c){if(c instanceof C$)return zb(Y7)(function(v){return d$(Vb(mv)(void 0)(dd(v.draw(v.world))))});if(c instanceof Ta)return zb(Vb(mv)(void 0)(HR))(function(v){return Ve(Z7)(v)(function(s){return eG(t(aG(c.value0)))(function(){return zb(tG(function(a){var d={};for(var i in a)({}).hasOwnProperty.call(a,i)&&(d[i]=a[i]);return d.world=a.input(c.value0)(s)(a.world),d}))(function(a){return d$(Vb(mv)(void 0)(dd(p$(sv)(function(d){return p$(cv)(function(i){return nG(fv({x:0,y:0,width:d,height:i}))(function(){return a.draw(a.world)})})}))))})})})});throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 88, column 16 - line 102, column 23): "+[c.constructor.name])}}},uG=function(e){var t=il(e);return function(n){var c=t(n);return function(v){return Ya([hF(function(s){return Ta.create(v$.create(s))}),_F(function(s){return Ta.create(m$.create(s))}),hs(function(s){return Ta.create(g$.create(s))}),pF(function(s){return Ta.create(y$.create(s))}),vF(function(s){return Ta.create(gv.create(s))}),DF(function(s){return Ta.create(yv.create(s))}),mF(function(s){return Ta.create(D$.create(s))}),gF(function(s){return Ta.create(Dv.create(s))}),yF(function(s){return Ta.create(Cv.create(s))})])([rG(mv)(void 0)(c)(v.dimensions)])}}},b$=function(e){var t=uG(e),n=iG(e);return function(c){return Tr({initialState:oG,render:t(c),eval:Er({handleAction:n(c),handleQuery:sn.handleQuery,receive:sn.receive,initialize:new z(C$.value),finalize:sn.finalize})})}};var bv={suspend:LM,fork:FM,join:Zl,Monad0:function(){return es},Functor1:function(){return kM}};var wv=function(e){return e.fork};var E$=Z,Uo=Z,T$=function(e){var t=wt(e)(Yt);return function(n){return Uo(function(c){return t(n)(c.rendering)})}},_G=Z,M$=function(e){return function(t){return Uo(function(n){return _G(t(n.rendering))})}},vG=Z,Sv=function(e){return function(t){return e(t)}},L$=function(e){return function(t){return function(n){return function(c){return function(){var s=nn({})(),a=nn(ji)(),d=nn(ji)(),i=nn(n)(),r=nn(new z(Ye.value))(),u=nn(new z(Ye.value))(),l=nn(G.value)(),p=nn(1)(),f=nn(new z($o))(),o=nn($o)(),h={component:e,state:e.initialState(t),refs:$o,children:ji,childrenIn:a,childrenOut:d,selfRef:s,handlerRef:i,pendingQueries:r,pendingOuts:u,pendingHandlers:l,rendering:G.value,fresh:p,subscriptions:f,forks:o,lifecycleHandlers:c};return Pt(h)(s)(),vG(s)}}}}};var mG=wt(Xt)(Yt),gG=ln(hr),yG=Va(Zy),mn=ae(En),qt=Je(Fn),DG=Lt(Ft),qo=DG(En),$$=wt(yo),CG=$$($r),k$=wv(bv),bG=Dc(qi)($r),Ma=ee(yo),wG=V(Qg),F$=Wi(qi),SG=V(go),x$=yc(qi),EG=V(Tt),TG=Ro(Zy),MG=NL(Wg),LG=Vp(Sh),FG=cE(ea),xG=Ro(Sh),A$=$$(Yt),I$=Va(Sh),AG=Va(Kt),IG=B1(ns),RG=ey(Kt),$G=function(e){return function(t){return function(){var c=Qe(t)(),v=Qe(c.subscriptions)();return mG(gh)(gG(yG(e))(v))()}}},Ev=function(e){return function(t){return mn(qt(Qe(e)))(function(n){if(n instanceof G)return t;if(n instanceof z)return qt(Pt(new z(new Re(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},Tv=function(e){return function(t){return qo(qt(Pt({initializers:Ye.value,finalizers:Ye.value})(e)))(function(){return mn(qt(t))(function(n){return mn(qt(Qe(e)))(function(c){return qo(CG(k$)(c.finalizers))(function(){return qo(bG(c.initializers))(function(){return Ma(n)})})})})})}},ks=tf(yn(Hr)(be(ee(Xt)(void 0)))),R$=function(e){return function(t){return mn(qt(Qe(t)))(function(n){return qt(Fm(function(c){return{state:c+1|0,value:e(c)}})(n.fresh))})}},Jb=function(e){return function(t){return function(n){return mn(qt(Qe(t)))(function(c){return Au(e)(t)(c.component.eval(new Fc(wG(z.create)(tL(n)),be(G.value))))})}}},Au=function(e){return function(t){return function(n){var c=function(s){return function(a){return mn(qt(Qe(s)))(function(d){return zL(function(i){var r=function(u){return F$(mn(qt(Qe(u)))(function(l){return Uo(function(p){return Jb(e)(p.selfRef)(i.value1)})(l)}))};return SG(i.value2)(x$(i.value0(Wg)(r)(d.children)))})(a)})}},v=function(s){return function(a){if(a instanceof Df)return mn(qt(Qe(s)))(function(d){var i=a.value0(d.state);if(wc(d.state)(i.value1))return Ma(i.value0);if(tn)return qo(qt(Pt({component:d.component,state:i.value1,refs:d.refs,children:d.children,childrenIn:d.childrenIn,childrenOut:d.childrenOut,selfRef:d.selfRef,handlerRef:d.handlerRef,pendingQueries:d.pendingQueries,pendingOuts:d.pendingOuts,pendingHandlers:d.pendingHandlers,rendering:d.rendering,fresh:d.fresh,subscriptions:d.subscriptions,forks:d.forks,lifecycleHandlers:d.lifecycleHandlers})(s)))(function(){return qo(Tv(d.lifecycleHandlers)(e(d.lifecycleHandlers)(s)))(function(){return Ma(i.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[i.constructor.name])});if(a instanceof Cf)return mn(R$(jL)(s))(function(d){return mn(qt(JL(a.value0(d))(function(i){return ks(jb(e)(s)(new os(i)))})))(function(i){return mn(qt(Qe(s)))(function(r){return qo(qt(Xr(EG(TG(d)(i)))(r.subscriptions)))(function(){return Ma(a.value1(d))})})})});if(a instanceof yh)return qo(qt($G(a.value0)(s)))(function(){return Ma(a.value1)});if(a instanceof ls)return a.value0;if(a instanceof bf)return c(s)(a.value0);if(a instanceof wf)return mn(qt(Qe(s)))(function(d){return mn(qt(Qe(d.handlerRef)))(function(i){return qo(Ev(d.pendingOuts)(i(a.value0)))(function(){return Ma(a.value1)})})});if(a instanceof Dh)return x$(MG(jy(function(){var d=Au(e)(s);return function(i){return F$(d(i))}}())(a.value0)));if(a instanceof Ch)return mn(R$(KL)(s))(function(d){return mn(qt(Qe(s)))(function(i){return mn(qt(nn(!1)))(function(r){return mn(k$($M(qt(function(){return Xr(LG(d))(i.forks)(),Pt(!0)(r)()}))(Au(e)(s)(a.value0))))(function(u){return qo(qt(FG(Qe(r))(Xr(xG(d)(u))(i.forks))))(function(){return Ma(a.value1(d))})})})})});if(a instanceof bh)return mn(qt(Qe(s)))(function(d){return mn(qt(Qe(d.forks)))(function(i){return qo(A$(Zl)(I$(a.value0)(i)))(function(){return Ma(a.value1)})})});if(a instanceof wh)return mn(qt(Qe(s)))(function(d){return mn(qt(Qe(d.forks)))(function(i){return qo(A$(ef($n("Cancelled")))(I$(a.value0)(i)))(function(){return Ma(a.value1)})})});if(a instanceof Sf)return mn(qt(Qe(s)))(function(d){return Ma(a.value1(AG(a.value0)(d.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[a.constructor.name])}};return IG(v(t))(n)}}},jb=function(e){return function(t){return function(n){if(n instanceof Xp)return qt(Ve(Xr)(t)(Sv(function(c){return{component:c.component,state:c.state,refs:RG(be(n.value1))(n.value0)(c.refs),children:c.children,childrenIn:c.childrenIn,childrenOut:c.childrenOut,selfRef:c.selfRef,handlerRef:c.handlerRef,pendingQueries:c.pendingQueries,pendingOuts:c.pendingOuts,pendingHandlers:c.pendingHandlers,rendering:c.rendering,fresh:c.fresh,subscriptions:c.subscriptions,forks:c.forks,lifecycleHandlers:c.lifecycleHandlers}})));if(n instanceof os)return mn(qt(Qe(t)))(function(c){return Au(e)(t)(c.component.eval(new Lc(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var OG=ae(_r),HG=Lt(Ft),U$=rp(Xt)(Yt),q$=wt(yo)($r),z$=wv(bv),_d=ln(_r),V$=wt(Xt),G$=V$(Yt),O$=V$(kn),H$=HG(En),PG=Dc(qi)($r),hd=Je(Fn),P$=ee(Xt),Kb=V(He),Qb=ee(yo),Xb=jr(Xt),NG=M$(He),BG=yt(go),N$=Qp(Xt),WG=T$(Xt),UG=ar(Kd),qG=Us(He),Yb=ae(En),zG=Je(xp),B$=function(){return nn({initializers:Ye.value,finalizers:Ye.value})}(),W$=function(e){return function(){var n=Qe(e)();return Pt(G.value)(e)(),U$(n)(function(){var c=q$(z$);return function(v){return ks(c(Ju(v)))}}())()}},VG=function(e){return function(){return _d(G$(O$(gh)))(Qe(e.subscriptions))(),Pt(G.value)(e.subscriptions)(),_d(O$(function(){var n=ef($n("finalized"));return function(c){return ks(n(c))}}()))(Qe(e.forks))(),Pt($o)(e.forks)()}},J$=function(e){return function(t){return function(n){var c=function(u){return function(l){return Uo(function(p){var f=Au(a)(p.selfRef)(p.component.eval(new Ec(void 0)));return Xr(function(o){return{initializers:new Re(H$(PG(Ju(o.initializers)))(function(){return H$(f)(function(){return hd(function(){return W$(p.pendingQueries)(),W$(p.pendingOuts)()})})}),l),finalizers:o.finalizers}})(u)})}},v=function(u){return function(l){return function(p){return a0(function(f){return function(){var h=B$(),_=L$(f)(p)(l)(h)(),m=Qe(u)();return Pt({initializers:Ye.value,finalizers:m.finalizers})(u)(),_d(Uo(function(){var y=a(u);return function(C){return y(function(E){return E.selfRef}(C))}}()))(Qe(_))(),_d(c(u)(m.initializers))(Qe(_))(),_}})}}},s=function(u){return function(l){return function(p){return function(f){return o0(function(o){return function(){var _=Kb(o.pop)(Qe(p))(),m=function(){if(_ instanceof z){Pt(_.value0.value1)(p)();var C=Qe(_.value0.value0)();return Uo(function(E){return function(){return Ve(Pt)(E.handlerRef)(function(){var g=tt(Qb(void 0))(l);return function(b){return g(o.output(b))}}())(),ks(Au(a)(E.selfRef)(E.component.eval(new Mc(o.input,void 0))))()}})(C)(),_.value0.value0}if(_ instanceof G)return v(u)(function(){var E=tt(Qb(void 0))(l);return function(D){return E(o.output(D))}}())(o.input)(o.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[_.constructor.name])}(),y=Kb(function(C){return js(o.get(C))})(Qe(f))();return Xb(y)(L_("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),Xr(o.set(m))(f)(),OG(Qe(m))(NG(function(C){if(C instanceof G)return uM("Halogen internal error: child was not initialized in renderChild");if(C instanceof z)return P$(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},a=function(u){return function(l){return function(){var f=Qe(l)(),o=Kb(ka)(Qe(f.pendingHandlers))();Xb(o)(Pt(new z(Ye.value))(f.pendingHandlers))(),Pt(ji)(f.childrenOut)(),Pt(f.children)(f.childrenIn)();var h=function(){var E=Ev(f.pendingHandlers),D=jb(a)(f.selfRef);return function(g){return E(BG(D(g)))}}(),_=function(){var E=Ev(f.pendingQueries);return function(D){return E(h(os.create(D)))}}(),m=e.render(function(E){return ks(h(E))})(s(u)(_)(f.childrenIn)(f.childrenOut))(f.component.render(f.state))(f.rendering)(),y=Qe(f.childrenOut)(),C=Qe(f.childrenIn)();return N$(C)(function(E){return function(){var g=Qe(E)();return WG(e.removeChild)(g)(),d(u)(g)()}})(),Ve(Xr)(f.selfRef)(Sv(function(E){return{component:E.component,state:E.state,refs:E.refs,children:y,childrenIn:E.childrenIn,childrenOut:E.childrenOut,selfRef:E.selfRef,handlerRef:E.handlerRef,pendingQueries:E.pendingQueries,pendingOuts:E.pendingOuts,pendingHandlers:E.pendingHandlers,rendering:new z(m),fresh:E.fresh,subscriptions:E.subscriptions,forks:E.forks,lifecycleHandlers:E.lifecycleHandlers}}))(),Xb(o)(Ve(UG)(void 0)(function(E){return function(){var g=Qe(f.pendingHandlers)();Pt(new z(Ye.value))(f.pendingHandlers)(),G$(function(){var S=q$(z$);return function(T){return ks(S(Ju(T)))}}())(g)();var b=Qe(f.pendingHandlers)(),L=tt(!1)(T1)(b);return L?qG(Pt(G.value)(f.pendingHandlers))(new rn(void 0))():new _n(void 0)}}))()}}},d=function(u){return Uo(function(l){return function(){VG(l)();var f=Au(a)(l.selfRef)(l.component.eval(new Tc(void 0)));return Xr(function(o){return{initializers:o.initializers,finalizers:new Re(f,o.finalizers)}})(u)(),N$(l.children)(function(o){return function(){var _=Qe(o)();return d(u)(_)()}})()}})},i=function(u){return function(l){return function(p){return Yb(hd(Qe(u)))(function(f){return f?Qb(G.value):Jb(a)(l)(p)})}}},r=function(u){return function(l){return function(p){return Tv(l)(function(){var o=Qe(u)();return o?void 0:(Pt(!0)(u)(),d(l)(p)(),Uo(function(h){return function(){var m=zG(Qe(h.selfRef))();return U$(m.rendering)(e.dispose)()}})(p)())})}}};return Yb(hd(B$))(function(u){return Yb(hd(nn(!1)))(function(l){return Tv(u)(function(){var f=sr(),o=_d(Qe)(v(u)(function(){var h=ur(f.listener);return function(_){return hd(h(_))}}())(n)(t))();return Uo(function(h){return P$({query:i(l)(h.selfRef),messages:f.emitter,dispose:r(l)(u)(o)})})(o)()})})})}}};var zo=function(e){return function(t){return function(){return t[e]}}};var JG=zo("baseURI"),jG=zo("ownerDocument"),j$=zo("parentNode"),KG=zo("parentElement");var QG=zo("childNodes"),XG=zo("firstChild"),YG=zo("lastChild"),ZG=zo("previousSibling"),K$=zo("nextSibling"),e9=zo("nodeValue");var t9=zo("textContent");function Zb(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function Mv(e){return function(t){return function(){t.appendChild(e)}}}function ew(e){return function(t){return function(){t.removeChild(e)}}}var Q$=V(He);var tw=function(){var e=Q$(Zt);return function(t){return e(j$(t))}}();var X$=function(){var e=Q$(Zt);return function(t){return e(K$(t))}}();var nw=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},rw=yt(He),i9=ee(Xt),u9=wt(Xt)(Yt),s9=fn(),c9=jr(Xt),l9=ta(Sl(Sl(ho))),f9=ge(De),d9=ae(En),p9=Je(Fn),h9=V(He),_9=ln(_r);var v9=function(e){return function(t){return function(n){return t instanceof z&&n instanceof z?rw(Zb(e)(t.value0)(n.value0)):t instanceof G&&n instanceof z?rw(Mv(e)(n.value0)):i9(void 0)}}},Y$=function(e){return function(){var n=tw(e.node)();return u9(function(c){return ew(e.node)(c)})(n)()}},m9=function(e){return function(t){return function(n){var c=E$(function(d){return d.node}),v=function(d){return d instanceof z?Br(d.value0):void 0},s=function(d){var i=XL(s9)(d),r=nw("patch","Halogen.VDom.Driver",function(){return function(h,_){if(h instanceof z){if(_ instanceof xc)return Br(h.value0),l(100)(_.value0);if(_ instanceof Lh){var m=Nr(h.value0,_.value0);return pn(new dn(Yn(m),new z(m),r(103),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[_.constructor.name])}return u(104)(_)}}),u=nw("render","Halogen.VDom.Driver",function(){return function(h){if(h instanceof xc)return l(86)(h.value0);if(h instanceof Lh){var _=i(h.value0);return pn(new dn(Yn(_),new z(_),r(89),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[h.constructor.name])}}),l=nw("renderComponentSlot","Halogen.VDom.Driver",function(){return function(h){var _=Qe(t)(),m=_(h)(),y=c(m);return pn(new dn(y,G.value,r(117),v))}}),p=r(91),f=u(82),o=l(109);return f},a=SL(e);return{buildWidget:s,buildAttributes:a,document:n}}}},g9=function(e){return function(t){var n=function(c){return function(v){return function(s){return function(a){if(a instanceof G)return function(){var i=nn(v)(),r=m9(c)(i)(e),u=_f(r)(s),l=Yn(u);return rw(Mv(l)(qI(t)))(),{machine:u,node:l,renderChildRef:i}};if(a instanceof z)return function(){Pt(v)(a.value0.renderChildRef)();var i=tw(a.value0.node)(),r=X$(a.value0.node)(),u=Nr(a.value0.machine,s),l=Yn(u);return c9(l9(wc)(a.value0.node)(l))(v9(l)(r)(i))(),{machine:u,node:l,renderChildRef:a.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[a.constructor.name])}}}};return{render:n,renderChild:f9,removeChild:Y$,dispose:Y$}}},Z$=function(e){return function(t){return function(n){return d9(p9(h9(qR)(_9(al)(Ea))))(function(c){return J$(g9(c)(n))(e)(t)})}}};var Lv=function(e){return e};var D9=mf(Mt);var ek=jt,vd=function(e){return ss(D9(e))};var tk=Pu;var C9=function(e){return function(t){return[new ne(e,ss(t))]}},Os=function(e){return Lv(C9(e))},aw=fn();var nk=function(e){return function(t){var n=e(t);return n.value1}};var E9=V(Ba),T9=V(oo),M9=mr(XM(po)),L9=Qp(Jg(po)),F9=hv(),x9=Kp(),A9=Oo(),I9=Jp(),iw=function(){function e(){}return e.value=new e,e}(),uw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rk=function(e){return e},md=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),bd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var R9={lift:function(e){return function(t){return rk(_t(gd.create(t)))}}},ok=St(R9),$9=dc;var ul=function(e){return{liftEffect:function(){var t=ok(e.Monad0()),n=Je(e);return function(c){return t(n(c))}}(),Monad0:function(){return $9}}},ak=function(e){var t=e.MonadEffect0(),n=ul(t);return{liftAff:function(){var c=ok(t.Monad0()),v=Xn(e);return function(s){return c(v(s))}}(),MonadEffect0:function(){return n}}},ik=Ba,uk=function(e){var t=V(e);return{map:function(n){return function(c){if(c instanceof md)return new md(E9(n)(c.value0));if(c instanceof gd)return new gd(t(n)(c.value0));if(c instanceof yd)return new yd(function(v){return n(c.value0(v))});if(c instanceof Dd)return new Dd(c.value0,n(c.value1));if(c instanceof Cd)return new Cd(c.value0,n(c.value1));if(c instanceof Fv)return new Fv(c.value0,n(c.value1));if(c instanceof bd)return new bd(T9(n)(c.value0));if(c instanceof xv)return new xv(function(v){return n(c.value0(v))});if(c instanceof wd)return new wd(c.value0,n(c.value1));throw new Error("Failed pattern match at Halogen.XShell.Free (line 71, column 1 - line 80, column 60): "+[n.constructor.name,c.constructor.name])}}}},Ps=Qn,k9=ae(Ps),sk=Sp,Iu=vr,Ot=function(e){return rk(_t(md.create(e)))},ck=function(e){var t=function(n){return M9(Dn(n.window))};return nk(L9(e)(t))([])},lk=function(e){return _t(new Dd(e,void 0))};var fk=function(e){return _t(new wd(e,void 0))},cw=function(){return function(e){var t=F9(e),n=x9(e);return function(c){var v=t(c),s=n(c);return function(){return function(a){return function(d){return function(i){return function(r){return function(u){var l=v(a)(d)(i)(r)(function(p){return sw.create(u(p))});return fk(s(a)(d)({window:l}))}}}}}}}}},O9=function(e){return _t(new bd(e))},lw=function(){return function(e){var t=A9(e);return function(n){var c=t(n);return function(){return function(v){return function(s){return function(a){return O9(c(v)(s)(a))}}}}}}},Vo=function(e){return _t(new Cd(e,void 0))},Jr=function(){return _t(new yd(ge(De)))}(),gn=function(e){return k9(Jr)(function(t){return lk(e(t))})},fw=function(){return function(e){var t=I9(e);return function(n){var c=t(n);return function(){return function(v){return function(s){return fk(function(a){return tt(a)(on)(c(v)(s)(a))})}}}}}};var N9=xt(Hn),B9=cn(Mf);var pw=B9(N9("background-color"));var At=xt(Zn),dk=function(){function e(){}return e.value=new e,e}(),U9=function(){function e(){}return e.value=new e,e}(),pk=function(){function e(){}return e.value=new e,e}(),q9=function(){function e(){}return e.value=new e,e}(),z9=function(){function e(){}return e.value=new e,e}(),V9=function(){function e(){}return e.value=new e,e}(),hk=function(){function e(){}return e.value=new e,e}(),hw=function(){function e(){}return e.value=new e,e}(),G9=function(){function e(){}return e.value=new e,e}(),J9=function(){function e(){}return e.value=new e,e}(),j9=function(){function e(){}return e.value=new e,e}(),K9=function(){function e(){}return e.value=new e,e}(),Q9=function(){function e(){}return e.value=new e,e}(),X9=function(){function e(){}return e.value=new e,e}(),Y9=function(){function e(){}return e.value=new e,e}(),Z9=function(){function e(){}return e.value=new e,e}(),eJ=function(){function e(){}return e.value=new e,e}(),tJ=function(){function e(){}return e.value=new e,e}(),nJ=function(){function e(){}return e.value=new e,e}(),rJ=function(){function e(){}return e.value=new e,e}(),oJ=function(){function e(){}return e.value=new e,e}(),aJ=function(){function e(){}return e.value=new e,e}(),iJ=function(){function e(){}return e.value=new e,e}(),uJ=function(){function e(){}return e.value=new e,e}(),sJ=function(){function e(){}return e.value=new e,e}(),cJ=function(){function e(){}return e.value=new e,e}(),lJ=function(){function e(){}return e.value=new e,e}(),fJ=function(){function e(){}return e.value=new e,e}(),dJ=function(){function e(){}return e.value=new e,e}(),pJ=function(){function e(){}return e.value=new e,e}(),hJ=function(){function e(){}return e.value=new e,e}(),_J=function(){function e(){}return e.value=new e,e}(),vJ=function(){function e(){}return e.value=new e,e}();var mJ={value:function(e){if(e instanceof dk)return At("default");if(e instanceof U9)return At("help");if(e instanceof pk)return At("pointer");if(e instanceof q9)return At("progress");if(e instanceof z9)return At("wait");if(e instanceof V9)return At("cell");if(e instanceof hk)return At("crosshair");if(e instanceof hw)return At("text");if(e instanceof G9)return At("vertical-text");if(e instanceof J9)return At("alias");if(e instanceof j9)return At("copy");if(e instanceof K9)return At("move");if(e instanceof Q9)return At("no-drop");if(e instanceof X9)return At("not-allowed");if(e instanceof Y9)return At("grab");if(e instanceof Z9)return At("grabbing");if(e instanceof eJ)return At("all-scroll");if(e instanceof tJ)return At("col-resize");if(e instanceof nJ)return At("row-resize");if(e instanceof rJ)return At("n-resize");if(e instanceof oJ)return At("e-resize");if(e instanceof aJ)return At("s-resize");if(e instanceof iJ)return At("w-resize");if(e instanceof uJ)return At("ne-resize");if(e instanceof sJ)return At("nw-resize");if(e instanceof cJ)return At("se-resize");if(e instanceof lJ)return At("sw-resize");if(e instanceof fJ)return At("ew-resize");if(e instanceof dJ)return At("ns-resize");if(e instanceof pJ)return At("nesw-resize");if(e instanceof hJ)return At("nwse-resize");if(e instanceof _J)return At("zoom-in");if(e instanceof vJ)return At("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var _w=function(){return pk.value}();var vw=function(){return dk.value}(),Ns=cn(mJ)(xt(Hn)("cursor")),_k=function(){return hk.value}();var yJ=xt(Hn);var vk=cn(Mf)(yJ("color"));var mk=xt(Zn),gk=xt(Hn);var CJ={value:function(e){return e}},yk=cn(CJ),Dk=mk("scroll"),Ck=yk(gk("overflow-y"));var mw=yk(gk("overflow")),gw=mk("hidden");var yw=xt(Zn),wJ=xt(Hn);var SJ={value:function(e){return e}},bk=yw("underline"),Av=cn(SJ)(wJ("text-decoration")),wk=yw("overline");var Sk=yw("line-through");var ye=Lt(Ft)(Wh),Mn=cn(au),Cn=xt(Hn),TJ=C0(au),MJ=me(Ic),LJ=xt(Hh),FJ=cn(_s),Dw=function(){var e=it($t)(lt("xterm")),t=it($t)(lt("xterm-viewport")),n=ye(vt(it($t)(lt("xterm-underline-1")))(Av(bk)))(function(){return ye(vt(it($t)(lt("xterm-underline-2")))(Mn(Cn("text-decoration"))("double underline")))(function(){return ye(vt(it($t)(lt("xterm-underline-3")))(Mn(Cn("text-decoration"))("wavy underline")))(function(){return ye(vt(it($t)(lt("xterm-underline-4")))(Mn(Cn("text-decoration"))("dotted underline")))(function(){return vt(it($t)(lt("xterm-underline-5")))(Mn(Cn("text-decoration"))("dashed underline"))})})})}),c=it($t)(lt("xterm-scroll-area")),v=it($t)(lt("xterm-screen")),s=it($t)(lt("xterm-decoration-overview-ruler")),a=ye(vt(it($t)(lt("xterm-overline")))(Av(wk)))(function(){return ye(vt(it(it($t)(lt("xterm-underline-1")))(lt("xterm-overline")))(Mn(Cn("text-decoration"))("overline underline")))(function(){return ye(vt(it(it($t)(lt("xterm-underline-2")))(lt("xterm-overline")))(Mn(Cn("text-decoration"))("overline double underline")))(function(){return ye(vt(it(it($t)(lt("xterm-underline-3")))(lt("xterm-overline")))(Mn(Cn("text-decoration"))("overline wavy underline")))(function(){return ye(vt(it(it($t)(lt("xterm-underline-4")))(lt("xterm-overline")))(Mn(Cn("text-decoration"))("overline dotted underline")))(function(){return vt(it(it($t)(lt("xterm-underline-5")))(lt("xterm-overline")))(Mn(Cn("text-decoration"))("overline dashed underline"))})})})})}),d=it($t)(lt("xterm-message")),i=it($t)(lt("live-region")),r=it($t)(lt("xterm-helper-textarea")),u=it($t)(lt("xterm-helpers")),l=it($t)(lt("xterm-dim")),p=it($t)(lt("xterm-decoration-top")),f=it($t)(lt("xterm-decoration-container")),o=it($t)(lt("xterm-decoration")),h=it($t)(lt("composition-view")),_=it($t)(lt("xterm-char-measure-element")),m=ye(Ur(Po))(function(){return ye(ms(kt(0)))(function(){return ye(gu(kt(0)))(function(){return ye(S0(kt(0)))(function(){return ye(Vh(kt(0)))(function(){return ye(ni(10))(function(){return ye(Mn(Cn("color"))("transparent"))(function(){return Mn(Cn("pointer-events"))("none")})})})})})})}),y=it($t)(lt("xterm-accessibility"));return ye(vt(e)(ye(Ns(hw.value))(function(){return ye(Ur(qh))(function(){return TJ(MJ(Lf)(LJ("user-select")))("none")})})))(function(){return ye(vt(it(e)(lt("focus")))(Mn(Cn("outline"))("none")))(function(){return ye(vt(it(e)(BF("focus")))(Mn(Cn("outline"))("none")))(function(){return ye(vt(Tn(e)(u))(ye(Ur(Po))(function(){return ye(gu(kt(0)))(function(){return ni(5)})})))(function(){return ye(vt(Tn(e)(r))(ye(px(kt(0))(kt(0))(kt(0))(kt(0)))(function(){return ye(FJ(Cn("border"))(0))(function(){return ye(hx(kt(0))(kt(0))(kt(0))(kt(0)))(function(){return ye(Ur(Po))(function(){return ye(ZF(0))(function(){return ye(ms(w0(-9999)))(function(){return ye(gu(kt(0)))(function(){return ye(Rf(kt(0)))(function(){return ye($f(kt(0)))(function(){return ye(ni(-5))(function(){return ye(Mn(Cn("whitespace"))("nowrap"))(function(){return ye(mw(gw))(function(){return Mn(Cn("resize"))("none")})})})})})})})})})})})})))(function(){return ye(vt(Tn(e)(h))(ye(pw(vg))(function(){return ye(vk(p1))(function(){return ye(Oc(nx))(function(){return ye(Ur(Po))(function(){return ye(Mn(Cn("white-space"))("nowrap"))(function(){return ni(1)})})})})})))(function(){return ye(vt(Tn(e)(it(h)(lt("active"))))(Oc(rx)))(function(){return ye(vt(Tn(e)(t))(ye(pw(vg))(function(){return ye(Ck(Dk))(function(){return ye(Ns(vw))(function(){return ye(Ur(Po))(function(){return ye(Vh(kt(0)))(function(){return ye(ms(kt(0)))(function(){return ye(gu(kt(0)))(function(){return S0(kt(0))})})})})})})})))(function(){return ye(vt(Tn(e)(v))(Ur(qh)))(function(){return ye(vt(Tn(e)(Tn(v)(Bh("canvas"))))(ye(Ur(Po))(function(){return ye(ms(kt(0)))(function(){return gu(kt(0))})})))(function(){return ye(vt(Tn(e)(c))(Mn(Cn("visibility"))("hidden")))(function(){return ye(vt(_)(ye(Oc(ex))(function(){return ye(Mn(Cn("visibility"))("hidden"))(function(){return ye(Ur(Po))(function(){return ye(gu(kt(0)))(function(){return ye(ms(w0(-9999)))(function(){return Mn(Cn("line-height"))("normal")})})})})})))(function(){return ye(vt(it(e)(lt("enable-mouse-events")))(Ns(vw)))(function(){return ye(vt(it(e)(lt("xterm-cursor-pointer")))(Ns(_w)))(function(){return ye(vt(Tn(e)(it($t)(lt("xterm-cursor-pointer"))))(Ns(_w)))(function(){return ye(vt(it(it(e)(lt("column-select")))(lt("focus")))(Ns(_k)))(function(){return ye(vt(Tn(e)(y))(m))(function(){return ye(vt(Tn(e)(d))(m))(function(){return ye(vt(Tn(e)(i))(ye(Ur(Po))(function(){return ye(ms(kt(-9999)))(function(){return ye(Rf(kt(1)))(function(){return ye($f(kt(1)))(function(){return mw(gw)})})})})))(function(){return ye(vt(l)(Mn(Cn("opacity"))("1 !important")))(function(){return ye(n)(function(){return ye(a)(function(){return ye(vt(it($t)(lt("xterm-strikethrough")))(Av(Sk)))(function(){return ye(vt(Tn(Tn(v)(f))(o))(ye(ni(6))(function(){return Ur(Po)})))(function(){return ye(vt(Tn(Tn(v)(f))(it(o)(lt("xterm-decoration-top-layer"))))(ni(7)))(function(){return ye(vt(s)(ye(ni(8))(function(){return ye(Ur(Po))(function(){return ye(gu(kt(0)))(function(){return ye(Vh(kt(0)))(function(){return Mn(Cn("pointer-events"))("none")})})})})))(function(){return vt(p)(ye(ni(2))(function(){return Ur(qh)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var Ek=e=>()=>e.type,Cw=e=>()=>e.cursorY,bw=e=>()=>e.cursorX,ww=e=>()=>e.viewportY,Sw=e=>()=>e.baseY,Ew=e=>()=>e.length,Tk=e=>t=>()=>e.getLine(t),Tw=e=>()=>e.getNullCell();var sl=function(e){return vf(e)?G.value:new z(hh(e))};var IJ=V(He),RJ=function(){function e(){}return e.value=new e,e}(),$J=function(){function e(){}return e.value=new e,e}(),Mk=function(e){return function(t){return IJ(sl)(Tk(e)(t))}},Lk=function(e){return function(){var n=Ek(e)();return n==="normal"?RJ.value:$J.value}};var Lw=e=>()=>e.isWrapped,Fw=e=>()=>e.length;var Ov=ge(De),La=V(He),xw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Iv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Aw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Iw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$v=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$w=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),PJ={map:function(e){return function(t){if(t instanceof xw)return new xw(function(n){return e(t.value0(n))});if(t instanceof Iv)return new Iv(function(n){return e(t.value0(n))});if(t instanceof Aw)return new Aw(function(n){return e(t.value0(n))});if(t instanceof Iw)return new Iw(function(n){return e(t.value0(n))});if(t instanceof Rw)return new Rw(function(n){return e(t.value0(n))});if(t instanceof Rv)return new Rv(function(n){return e(t.value0(n))});if(t instanceof $v)return new $v(t.value0,function(n){return e(t.value1(n))});if(t instanceof $w)return new $w(t.value0,function(n){return e(t.value1(n))});if(t instanceof kv)return new kv(t.value0,function(n){return e(t.value1(n))});if(t instanceof kw)return new kw(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},NJ=aa(PJ);var Fk=function(e){var t=e.Monad0(),n=ae(Ua(t.Bind1())),c=br(Ni(t)),v=Je(la(e));return function(s){var a=function(d){if(d instanceof xw)return n(c)(function(i){return v(La(d.value0)(Lk(i)))});if(d instanceof Iv)return n(c)(function(i){return v(La(d.value0)(bw(i)))});if(d instanceof Aw)return n(c)(function(i){return v(La(d.value0)(Cw(i)))});if(d instanceof Iw)return n(c)(function(i){return v(La(d.value0)(ww(i)))});if(d instanceof Rw)return n(c)(function(i){return v(La(d.value0)(Sw(i)))});if(d instanceof Rv)return n(c)(function(i){return v(La(d.value0)(Ew(i)))});if(d instanceof $v)return n(c)(function(i){return v(La(d.value1)(Mk(i)(d.value0)))});if(d instanceof $w)return v(La(d.value1)(Lw(d.value0)));if(d instanceof kv)return v(La(d.value1)(Fw(d.value0)));if(d instanceof kw)return n(c)(function(i){return v(La(d.value0)(Tw(i)))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 19, column 5 - line 21, column 40): "+[d.constructor.name])};return NJ(Bi(s))(a)}},Ow=function(e){return _t(new kv(e,Ov))};var Hw=function(e){return _t(new $v(e,Ov))};var Pw=function(){return _t(new Iv(Ov))}();var Nw=function(){return _t(new Rv(Ov))}();var Bw=e=>()=>e.cursorBlink,Ww=e=>t=>()=>e.cursorBlink=t,Uw=e=>()=>e.fontFamily,qw=e=>t=>()=>e.fontFamily=t;var Ak=Os("fontFamily");var Ik=Os("cursorBlink");var $k=V(He),GJ=Lt(Ft),kk=ge(De),Hv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Nv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),JJ={map:function(e){return function(t){if(t instanceof Hv)return new Hv(function(n){return e(t.value0(n))});if(t instanceof Pv)return new Pv(t.value0,e(t.value1));if(t instanceof Nv)return new Nv(function(n){return e(t.value0(n))});if(t instanceof zw)return new zw(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},jJ=aa(JJ);var Go=function(e){return _t(new Pv(e,void 0))},Ok=function(e){var t=e.Monad0(),n=Ua(t.Bind1()),c=ae(n),v=br(Ni(t)),s=Je(la(e)),a=GJ(n),d=ee(gc(t.Applicative0()));return function(i){var r=function(u){if(u instanceof Hv)return c(v)(function(l){return s($k(u.value0)(Bw(l)))});if(u instanceof Pv)return c(v)(function(l){return a(s(Ww(l)(u.value0)))(function(){return d(u.value1)})});if(u instanceof Nv)return c(v)(function(l){return s($k(u.value0)(Uw(l)))});if(u instanceof zw)return c(v)(function(l){return a(s(qw(l)(u.value0)))(function(){return d(u.value1)})});throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 19, column 5 - line 21, column 49): "+[u.constructor.name])};return jJ(Bi(i))(r)}},Vw=function(){return _t(new Nv(kk))}(),Gw=function(){return _t(new Hv(kk))}();var Pk=Fa(Hk(),1),Wv=()=>new Pk.FitAddon;var Bk=Fa(Nk(),1),qv=()=>new Bk.WebglAddon;var Uk=Fa(Wk(),1),Vv=()=>new Uk.WebLinksAddon;var qk={addon:Z},zk={addon:Z},Vk={addon:ge(De)};var Gv=function(e){return e.addon};var Xw=e=>e.active,Yw=e=>e.normal,Zw=e=>e.alternate;var Kk=Fa(jk(),1),Qk=e=>t=>()=>new Kk.Terminal(e,t),Xk=e=>()=>e.element,Yk=e=>()=>e.textarea,tS=e=>()=>e.rows,nS=e=>()=>e.cols,Sd=e=>e.buffer,rS=e=>()=>e.markers;var oS=e=>e.options,aS=e=>t=>()=>e.onBell(t),iS=e=>t=>()=>e.onBinary(n=>t(n)());var uS=e=>t=>()=>e.onData(n=>t(n)()),sS=e=>t=>()=>e.onKey(n=>t(n)()),cS=e=>t=>()=>e.onLineFeed(t),lS=e=>t=>()=>e.onRender(n=>t(n)()),fS=e=>t=>()=>e.onWriteParsed(t),dS=e=>t=>()=>e.onResize(n=>t(n)()),pS=e=>t=>()=>e.onScroll(n=>t(n)()),hS=e=>t=>()=>e.onSelectionChange(t),_S=e=>t=>()=>e.onTitleChange(n=>t(n)());var vS=e=>t=>()=>e.open(t);var mS=e=>t=>n=>()=>e.write(t,n),gS=e=>t=>n=>()=>e.writeln(t,n);var Zk=e=>t=>()=>e.loadAddon(t);var eO=V(He);var tO=function(){var e=eO(sl);return function(t){return e(Yk(t))}}();var nO=function(e){return function(t){return Qk(vd(e))(vd(t))}},rO=function(e){var t=Gv(e);return function(n){return function(c){return Zk(n)(t(c))}}};var oO=function(){var e=eO(sl);return function(t){return e(Xk(t))}}();var jv=V(Ba),am=ge(De),hi=V(He),DS=Fk(xp)(Kd),aO=Lt(Ft),Kv=Vl(sM),cj=rO(Vk),Qv=ae(Qn),CS=aO(Qn),cl=jr(vr),Xv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),SS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Zv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ES=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),TS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),MS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),em=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),LS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),om=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lj={map:function(e){return function(t){if(t instanceof Xv)return new Xv(jv(e)(t.value0));if(t instanceof bS)return new bS(function(n){return e(t.value0(n))});if(t instanceof wS)return new wS(function(n){return e(t.value0(n))});if(t instanceof Yv)return new Yv(function(n){return e(t.value0(n))});if(t instanceof SS)return new SS(function(n){return e(t.value0(n))});if(t instanceof Zv)return new Zv(jv(e)(t.value0));if(t instanceof ES)return new ES(jv(e)(t.value0));if(t instanceof TS)return new TS(jv(e)(t.value0));if(t instanceof MS)return new MS(function(n){return e(t.value0(n))});if(t instanceof em)return new em(t.value0,e(t.value1));if(t instanceof tm)return new tm(t.value0,e(t.value1));if(t instanceof LS)return new LS(function(n){return e(t.value0(n))});if(t instanceof nm)return new nm(function(n){return e(t.value0(n))});if(t instanceof rm)return new rm(function(n){return e(t.value0(n))});if(t instanceof om)return new om(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},fj=aa(lj),Pn=function(e){return _t(new tm(e,void 0))},Gt=function(e){return _t(new em(e,void 0))};var im=function(e){return _t(new Zv(e))},iO=function(){return _t(new nm(am))}(),uO=function(){return _t(new rm(am))}();var sO=function(e){var t=e.MonadEffect0(),n=t.Monad0(),c=Ua(n.Bind1()),v=ae(c),s=br(Ni(n)),a=la(t),d=Ok(a),i=Je(a),r=Xn(qp(e)),u=aO(c);return function(l){var p=Bi(l),f=d(p),o=function(h){if(h instanceof Xv)return v(s)(function(_){return Io(f(h.value0))(oS(_))});if(h instanceof bS)return v(s)(function(_){return i(hi(h.value0)(oO(_)))});if(h instanceof wS)return v(s)(function(_){return i(hi(h.value0)(tO(_)))});if(h instanceof Yv)return v(s)(function(_){return i(hi(h.value0)(tS(_)))});if(h instanceof SS)return v(s)(function(_){return i(hi(h.value0)(nS(_)))});if(h instanceof Zv)return v(s)(function(_){return i(Io(DS(h.value0))(Xw(Sd(_))))});if(h instanceof ES)return v(s)(function(_){return i(Io(DS(h.value0))(Yw(Sd(_))))});if(h instanceof TS)return v(s)(function(_){return i(Io(DS(h.value0))(Zw(Sd(_))))});if(h instanceof MS)return v(s)(function(_){return i(hi(h.value0)(rS(_)))});if(h instanceof em)return v(s)(function(_){return v(r(rf))(function(m){return u(i(mS(_)(h.value0)(Bg(nf(h.value1)(m)))))(function(){return r(zg(m))})})});if(h instanceof tm)return v(s)(function(_){return v(r(rf))(function(m){return u(i(gS(_)(h.value0)(Bg(nf(h.value1)(m)))))(function(){return r(zg(m))})})});if(h instanceof LS)return i(hi(function(_){return h.value0(Vd(_))})(Kv(Wv)));if(h instanceof nm)return i(hi(function(_){return h.value0(Vd(_))})(Kv(Vv)));if(h instanceof rm)return i(hi(function(_){return h.value0(Vd(_))})(Kv(qv)));if(h instanceof om)return v(s)(function(_){return i(hi(function(m){return h.value1($E(m))})(Kv(cj(_)(h.value0))))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 32, column 5 - line 34, column 55): "+[h.constructor.name])};return fj(p)(o)}},um=function(){return _t(new Yv(am))}(),lo=function(e){return _t(Xv.create(e))};var FS=function(e){var t=Gv(e);return function(n){return _t(new om(t(n),am))}},dj=FS(zk),pj=FS(qk),xS=function(e){return Qv(uO)(function(t){return CS(function(){if(t instanceof G)return cl(e)(Pn("WebGL Addon unavailable"));if(t instanceof z)return CS(cl(e)(Gt("Loading WebGL ")))(function(){return Qv(dj(t.value0))(function(n){return cl(e)(function(){return Pn(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return Qv(iO)(function(n){if(n instanceof G)return cl(e)(Pn("WebLinks Addon unavailable"));if(n instanceof z)return CS(cl(e)(Gt("Loading WebLinks ")))(function(){return Qv(pj(n.value0))(function(c){return cl(e)(function(){return Pn(c?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var cO=e=>()=>e.dispose();var lO={toDisposable:ge(De)},_j=function(e){return e.toDisposable},fO=function(e){return{dispose:function(){var t=_j(e);return function(n){return cO(t(n))}}()}},dO=function(e){return e.dispose};var gt=ae(On),IS=gr(xn),mj=V(go),gj=sO(Cc)(ns),Jo=mr(xn),jo=Lt(Ft)(On),yj=wt(Xt)(Mt),Dj=dO(fO(lO)),RS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bj=function(){function e(){}return e.value=new e,e}(),wj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$S=function(){function e(){}return e.value=new e,e}(),Sj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ej=function(){function e(){}return e.value=new e,e}(),Tj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lj=function(){function e(){}return e.value=new e,e}(),Fj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pO=function(){function e(){}return e.value=new e,e}(),hO=function(){function e(){}return e.value=new e,e}(),wo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xj=function(e){return function(t){return ou([BI(Dw),Ya([rl("terminal")])([])])}},Aj=function(e){var t=Xn(Th(e));return function(n){return gt(IS)(function(c){return t(mj(z.create)(Io(gj(n))(c.terminal)))})}},Ij=function(e){var t=Je(wr(e.MonadEffect0())),n=function(f){return gt(t(sr))(function(o){return gt(t(fS(f)(ur(o.listener)(new wo(Ej.value)))))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})},c=function(f){return gt(t(sr))(function(o){return gt(t(_S(f)(function(){var h=ur(o.listener);return function(_){return h(wo.create(Fj.create(_)))}}())))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})},v=function(f){return gt(t(sr))(function(o){return gt(t(hS(f)(ur(o.listener)(new wo(Lj.value)))))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})},s=function(f){return gt(t(sr))(function(o){return gt(t(pS(f)(function(){var h=ur(o.listener);return function(_){return h(wo.create(Mj.create(_)))}}())))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})},a=function(f){return gt(t(sr))(function(o){return gt(t(dS(f)(function(){var h=ur(o.listener);return function(_){return h(wo.create(Tj.create(_)))}}())))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})},d=function(f){return gt(t(sr))(function(o){return gt(t(lS(f)(function(){var h=ur(o.listener);return function(_){return h(wo.create(Sj.create(_)))}}())))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})},i=function(f){return gt(t(sr))(function(o){return gt(t(cS(f)(ur(o.listener)(new wo($S.value)))))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})},r=function(f){return gt(t(sr))(function(o){return gt(t(sS(f)(function(){var h=ur(o.listener);return function(_){return h(wo.create(wj.create(_)))}}())))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})},u=function(f){return gt(t(sr))(function(o){return gt(t(uS(f)(function(){var h=ur(o.listener);return function(_){return h(wo.create(RS.create(_)))}}())))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})},l=function(f){return gt(t(sr))(function(o){return gt(t(iS(f)(function(){var h=ur(o.listener);return function(_){return h(wo.create(Cj.create(_)))}}())))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})},p=function(f){return gt(t(sr))(function(o){return gt(t(aS(f)(ur(o.listener)(new wo(bj.value)))))(function(h){return gt(cr(o.emitter))(function(){return Jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Dn(h)(_.disposables),m})})})})};return function(f){if(f instanceof pO)return gt(Xa("terminal"))(function(o){if(o instanceof G)return t(xu("no terminal element"));if(o instanceof z)return gt(IS)(function(h){return jo(t(vS(h.terminal)(o.value0)))(function(){return jo(p(h.terminal))(function(){return jo(l(h.terminal))(function(){return jo(r(h.terminal))(function(){return jo(i(h.terminal))(function(){return jo(d(h.terminal))(function(){return jo(n(h.terminal))(function(){return jo(a(h.terminal))(function(){return jo(s(h.terminal))(function(){return jo(v(h.terminal))(function(){return jo(c(h.terminal))(function(){return u(h.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.XTerm (line 117, column 5 - line 132, column 28): "+[o.constructor.name])});if(f instanceof hO)return gt(IS)(function(o){return t(yj(Dj)(o.disposables))});if(f instanceof wo)return ha(f.value0);throw new Error("Failed pattern match at Halogen.XTerm (line 114, column 16 - line 136, column 23): "+[f.constructor.name])}},_O=function(e){return Tr({initialState:function(t){return{terminal:t,disposables:[]}},render:xj(e),eval:Er({handleAction:Ij(e),handleQuery:Aj(e),receive:sn.receive,initialize:new z(pO.value),finalize:new z(hO.value)})})};var Rj=me(jt),DO={reflectSymbol:function(){return"terminal"}},$j=hv()(DO)(wn),CO=Lg(fs),kS=ae(CO),OS=St($p)(fs),kj=Oo()(DO)(wn),Oj=ee(Sr),mO=V(oo),Hj=St(Eh),bO=gr(xn),ll=ee(Fg(fs)),sm=Lt(Ft)(CO),wO=vM(xn),HS=mr(wO),Pj=gr(wO),Nj=_M(e0),gO=ae(On),Bj=me(ek),Wj=at(tk),Uj=mr(xn),yO=yt(oo),qj=ee(Iu),SO=function(){return Wt.value}(),zj=function(e){var t=_O(e);return function(n){return ou(Rj([function(){if(n.terminal instanceof G)return ou([]);if(n.terminal instanceof z)return $j(SO)(void 0)(t)(n.terminal.value0)(uw.create);throw new Error("Failed pattern match at Halogen.XShell (line 49, column 8 - line 51, column 80): "+[n.terminal.constructor.name])}()])(ck(n.windows)))}},EO=function(e){var t=e.MonadEffect0().Monad0(),n=Hj(t),c=aa(uk(t.Bind1().Apply0().Functor0()))(Nj);return function(v){var s=function(a){if(a instanceof md)return kS(OS(kj(SO)(void 0)(a.value0)))(function(d){return Oj(d)});if(a instanceof gd)return mO(z.create)(n(a.value0));if(a instanceof yd)return kS(OS(bO))(function(d){return ll(a.value0(d.shell))});if(a instanceof Dd)return sm(HS(function(d){var i={};for(var r in d)({}).hasOwnProperty.call(d,r)&&(i[r]=d[r]);return i.shell=a.value0,i}))(function(){return ll(a.value1)});if(a instanceof Cd)return sm(HS(function(d){var i={};for(var r in d)({}).hasOwnProperty.call(d,r)&&(i[r]=d[r]);return i.interpreter=a.value0,i}))(function(){return ll(a.value1)});if(a instanceof Fv)return sm(OS(ha(a.value0)))(function(){return ll(a.value1)});if(a instanceof bd)return mO(z.create)(a.value0);if(a instanceof xv)return kS(Pj)(function(d){return ll(a.value0(d.windows))});if(a instanceof wd)return sm(HS(function(d){var i={};for(var r in d)({}).hasOwnProperty.call(d,r)&&(i[r]=d[r]);return i.windows=a.value0(d.windows),i}))(function(){return ll(a.value1)});throw new Error("Failed pattern match at Halogen.XShell (line 80, column 5 - line 82, column 22): "+[a.constructor.name])};return pM(c(s)(v))}},Vj=function(e){var t=Je(wr(e.MonadEffect0())),n=EO(e);return function(c){if(c instanceof iw)return gO(t(nO(Bj(aw(Ak)('"Cascadia Code", Menlo, monospace'))(aw(Ik)(!0)))(Wj)))(function(v){return Uj(function(s){var a={};for(var d in s)({}).hasOwnProperty.call(s,d)&&(a[d]=s[d]);return a.terminal=new z(v),a})});if(c instanceof uw)return gO(bO)(function(v){return yO(n(v.interpreter(c.value0)))});if(c instanceof sw)return yO(n(c.value0));throw new Error("Failed pattern match at Halogen.XShell (line 61, column 16 - line 70, column 35): "+[c.constructor.name])}},TO=function(e){return Tr({initialState:function(t){return{shell:t,interpreter:be(qj(void 0)),terminal:G.value,windows:ji}},render:zj(e),eval:Er({handleAction:Vj(e),handleQuery:EO(e),receive:sn.receive,initialize:new z(iw.value),finalize:sn.finalize})})};var PS=function(e){return function(t){var n=Xu(t.Profunctor0()),c=hc(t);return function(v){return n(e)(function(s){return s.value1(s.value0)})(c(v))}}};var LO=ee(Iu),MO=V(It),FO=Lt(Ft),nr=FO(Ps),_i=ae(Ps),Kj=Ro(Kt),Qj=Zg(Kt)(Mt),Xj=Va(Kt),Yj=ge(De),Ed=FO(Qn),Zj=jr(vr),cm=ae(Qn),eK=vn(Il)(vr),tK=wt(vr)(Yt),xO=wt(Iu)(Yt);var vi={cmd:function(e){return PS(function(t){return new ne(t.command,function(n){return{prompt:t.prompt,command:n,commandEnv:t.commandEnv,foreground:t.foreground}})})(e)},prompt:function(e){return PS(function(t){return new ne(t.prompt,function(n){return{prompt:n,command:t.command,commandEnv:t.commandEnv,foreground:t.foreground}})})(e)}},Md=function(e){var t=Je(ul(e));return function(n){return function(c){return c instanceof RS?n(c.value0):c instanceof $S?t(xu("line feed")):LO(void 0)}}},Ld=function(e){return e.prompt},lm=Ld(vi)(ki),Fd=function(e){return e.cmd},AO=Fd(vi),Td=AO(mo),IO=AO(ki),nK=function(e){return function(t){return function(n){var c=function(s){var a=`\r
  help\r
    show this help text`,d=function(i){return`\r
  `+(i.name+(`\r
    `+to(`\r
    `)(i.description)))};return a+to("")(MO(d)(s))},v=function(s){return nr(Ot(Pn(c(n))))(function(){return _i(Jr)(function(a){return nr(Ot(Gt(Dr(a)(lm))))(function(){return gn(Or(Td)(""))})})})};return Kj("help")(v)(Qj(MO(function(s){return new ne(s.name,s.cmd)})(n)))}}},fm=function(e){var t=nK(e);return function(n){var c=t(n);return function(v){var s=c(v);return _i(Jr)(function(a){var d=_l(function(u){return!n1(u)})(pg(" ")(Dr(a)(IO))),i=dp(d);if(i instanceof G)return nr(Ot(Pn("")))(function(){return _i(Jr)(function(u){return nr(Ot(Gt(Dr(u)(lm))))(function(){return gn(Or(Td)(""))})})});if(i instanceof z){var r=Xj(i.value0)(s);if(r instanceof z)return r.value0(tt([])(Yj)(Zm(d)));if(r instanceof G)return nr(Ot(Pn(`\r
unrecognised command "`+(i.value0+'" - type "help" to see the available commands'))))(function(){return _i(Jr)(function(u){return nr(Ot(Gt(Dr(u)(lm))))(function(){return gn(Or(Td)(""))})})});throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 199, column 7 - line 206, column 34): "+[r.constructor.name])}throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 191, column 3 - line 206, column 34): "+[i.constructor.name])})}}};var rK=function(e){return function(t){var n=Fd(t),c=n(ki),v=Ld(t)(ki),s=n(mo);return _i(Jr)(function(a){return nr(Ot(cm(im(Pw))(function(d){var i=d===0;return i?Ed(Gt("\x1BM"))(function(){return cm(im(cm(Nw)(function(r){return cm(Hw(r-1|0))(function(u){return eK(Ow)(u)})})))(function(r){return Ed(Gt("\x9BK"))(function(){return Ve(tK)(r)(function(u){var l=(Vu(Dr(a)(c))-1|0)<=u;return l?Ed(Gt(Dr(a)(v)))(function(){return Gt(Dp(1)(Dr(a)(c)))}):Gt(Dp(1)(YT(u)(Dr(a)(c))))})})})}):Zj(Vu(Dr(a)(c))>0)(Gt("\b \b"))})))(function(){return gn(Mp(s)(Dp(1)))})})}},xd=function(e){var t=rK(e),n=Je(ul(e));return function(c){var v=Fd(c)(mo),s=Ld(c)(ki),a=t(c);return function(d){return function(i){return i===""?nr(gn(Or(v)("")))(function(){return _i(Jr)(function(r){return Ot(Ed(Gt("^C"))(function(){return Gt(`\r
`+Dr(r)(s))}))})}):i==="\r"?d:i==="\x7F"?a:i>=" "&&i<="~"||i>="\xA0"?nr(gn(Mp(v)(function(r){return r+i})))(function(){return Ot(Gt(i))}):nr(n(xu("non-printable: "+i)))(function(){return LO(void 0)})}}}},oK=function(e){var t=e.MonadEffect0(),n=Md(t),c=xd(t)(vi),v=fm(e);return function(s){var a=v(s);return _i(Jr)(function(d){return nr(Ve(xO)(d.foreground)(function(i){return i.kill}))(function(){return nr(gn(function(i){return{prompt:i.prompt,command:i.command,commandEnv:i.commandEnv,foreground:G.value}}))(function(){return nr(gn(Or(Td)("")))(function(){return _i(Jr)(function(i){return nr(Ot(Ed(lo(Go(!0)))(function(){return Gt(`\r
`+Dr(i)(lm))})))(function(){return Vo(n(c(a(d.commandEnv))))})})})})})})}},aK=function(e){return _i(Jr)(function(t){return nr(Ve(xO)(t.foreground)(function(n){return n.stdin(Dr(t)(IO))}))(function(){return nr(Ot(Gt(`\r
`)))(function(){return gn(Or(Td)(""))})})})},RO=function(e){var t=e.MonadEffect0(),n=Md(t),c=oK(e),v=xd(t)(vi),s=aK(e);return function(a){var d=c(a);return n(function(i){return i===""?nr(Ot(Gt("^C")))(function(){return d}):v(s)(i)})}};var dm=ae(Ps),_m=Lt(Ft),en=_m(Ps),pm=me(ku),uK=Ld(vi)(ki),fl=Fd(vi)(mo),sK=So(sk),hm=ae(Qn),$O=Fe(Zo),cK=Fe(AE),lK=Fe($a),zS=cw(),VS={reflectSymbol:function(){return"button"}},fK=zS(VS)(wn)(),kO=yt(ik),PO=lw(),dK=PO(VS)(wn)(),GS=fw(),pK=GS(VS)(wn)(),dl=_m(Qn),NO={reflectSymbol:function(){return"editor"}},OO=GS(NO)(wn)(),hK=zS(NO)(wn)(),Bs=ee(Iu),_K=V(It),vK=wt(Iu)(Mt),JS={reflectSymbol:function(){return"canvas"}},NS=zS(JS)(wn)(),BS=GS(JS)(wn)(),Ar=_m(Sa),mK=PO(JS)(wn)(),gK=wt(Hb)(Mt),yK=V(Tt),WS=ae(En),DK=TO(Cc),CK=_m(En),bK=yt(go),wK=Md(Fn),SK=xd(Fn)(vi),EK=fm(Cc)(ns);var US=function(){return Wt.value}(),Ws=function(){return Wt.value}(),qS=function(){return Wt.value}(),BO=function(e){var t=wF(e),n=RO(e),c=e.MonadEffect0(),v=Md(c),s=xd(c)(vi),a=fm(e),d=KI(e),i=Je(ul(c)),r=Xn(ak(e)),u=il(e),l=f$(e),p=b$(e);return function(f){var o=n(f),h=a(f),_=d(f),m=u(f),y=l(f),C=p(f),E=dm(Jr)(function(g){return en(Ot(Gt(`\r
`+Dr(g)(uK))))(function(){return gn(Or(fl)(""))})}),D=function(g){return be(sK(g)(E))};return[{name:"rows",description:["prints the number of rows in the terminal"],cmd:D(Ot(hm(um)(function(){var g=pm(`\r
`);return function(b){return Pn(g($O(b)))}}())))},{name:"cols",description:["prints the number of columns in the terminal"],cmd:D(Ot(hm(um)(function(){var g=pm(`\r
`);return function(b){return Pn(g($O(b)))}}())))},{name:"blinking",description:["prints a boolean indicating whether the cursor is blinking"],cmd:D(Ot(hm(lo(Gw))(function(){var g=pm(`\r
`);return function(b){return Pn(g(cK(b)))}}())))},{name:"blinkon",description:["turns on cursor blinking"],cmd:D(Ot(lo(Go(!0))))},{name:"blinkoff",description:["turns off cursor blinking"],cmd:D(Ot(lo(Go(!1))))},{name:"fontFamily",description:["prints the font family of the terminal"],cmd:D(Ot(hm(lo(Vw))(function(){var g=pm(`\r
`);return function(b){return Pn(g(lK(b)))}}())))},{name:"button",description:["creates a button as a subprocess.","the subprocess can be cancelled with ^C","accepts button text as argument.",'clicking the button prints "click!" to the terminal.'],cmd:function(g){return en(gn(Or(fl)("")))(function(){return en(fK(qS)(void 0)(t)(to(" ")(g))(be(Ot(Pn("click!")))))(function(){var b={stdin:function(L){return kO(dK(qS)(void 0)(new bF(L,void 0)))},kill:pK(qS)(void 0)};return en(gn(function(L){return{prompt:L.prompt,command:L.command,commandEnv:L.commandEnv,foreground:new z(b)}}))(function(){return en(Ot(dl(lo(Go(!1)))(function(){return Gt(`\r
`)})))(function(){return Vo(o)})})})})}},{name:"edit",description:["opens a file in the editor as a subprocess.","the subprocess can be cancelled with ^C","accepts the file path as argument."],cmd:function(g){return g.length===1&&Vu(g[0])>0?en(gn(Or(fl)("")))(function(){var b=en(OO(US)(void 0))(function(){return en(Ot(Gt("> ")))(function(){return Vo(v(s(h(BO(e)(f)))))})});return en(hK(US)(void 0)(_)(g[0])(be(b)))(function(){var L={stdin:be(Bs(void 0)),kill:OO(US)(void 0)};return en(gn(function(S){return{prompt:S.prompt,command:S.command,commandEnv:S.commandEnv,foreground:new z(L)}}))(function(){return en(Ot(dl(lo(Go(!1)))(function(){return Gt(`\r
`)})))(function(){return Vo(o)})})})}):D(Ot(Pn(`\r
this command expects a single file name as its argument`)))(g)}},{name:"ls",description:["lists files in the file system"],cmd:D(dm(i(od))(function(g){return dm(r(yI(g)))(function(b){return Ot(Pn(`\r
`+to(" ")(_K(function(L){return L})(b))))})}))},{name:"rm",description:["remove files from the file system"],cmd:function(g){return dm(i(od))(function(b){return en(vK(function(L){return r(DI(b)(L))})(g))(function(){return E})})}},{name:"canvas",description:["canvas example"],cmd:function(g){return en(gn(Or(fl)("")))(function(){return en(NS(Ws)(void 0)(m)({width:200,height:200})(be(Bs(void 0))))(function(){var b={stdin:be(Bs(void 0)),kill:BS(Ws)(void 0)},L=Ar(ol(Gu(255)(255)(200)))(function(){return Ar(lv({x:0,y:0,width:200,height:200}))(function(){return Ar(ol(Gu(0)(0)(0)))(function(){return Pb("hello")({x:50,y:50})})})});return en(kO(mK(Ws)(void 0)(L)))(function(){return en(gn(function(S){return{prompt:S.prompt,command:S.command,commandEnv:S.commandEnv,foreground:new z(b)}}))(function(){return en(Ot(dl(lo(Go(!1)))(function(){return Gt(`\r
`)})))(function(){return Vo(o)})})})})})}},{name:"animation",description:["canvas animation example"],cmd:function(g){return en(gn(Or(fl)("")))(function(){var b=function(L){return Ar(ol(Gu(255)(255)(200)))(function(){return Ar(lv({x:0,y:0,width:200,height:200}))(function(){return Ar(ol(Gu(0)(0)(0)))(function(){return Ar(OR({translateX:50,translateY:50}))(function(){return Ar(IR(L/1e3))(function(){return Pb("hello")({x:0,y:0})})})})})})};return en(NS(Ws)(void 0)(y)({dimensions:{width:200,height:200},animation:b})(be(Bs(void 0))))(function(){var L={stdin:be(Bs(void 0)),kill:BS(Ws)(void 0)};return en(gn(function(S){return{prompt:S.prompt,command:S.command,commandEnv:S.commandEnv,foreground:new z(L)}}))(function(){return en(Ot(dl(lo(Go(!1)))(function(){return Gt(`\r
`)})))(function(){return Vo(o)})})})})}},{name:"sketch",description:["canvas drawing program example"],cmd:function(g){return en(gn(Or(fl)("")))(function(){var b={dimensions:{width:400,height:400},world:{line:G.value,lines:[]},draw:function(L){return Ar(ol(Gu(255)(255)(200)))(function(){return Ar(lv({x:0,y:0,width:400,height:400}))(function(){return Ar($R(Gu(0)(0)(0)))(function(){return Ar(RR(5))(function(){return Ve(gK)(tt(L.lines)(Ve(Dn)(L.lines))(L.line))(function(S){return Ar(PR)(function(){return Ar(AR(S.value0))(function(){return Ar(xR(S.value1))(function(){return kR})})})})})})})})},input:function(L){return function(S){return function(T){if(L instanceof Dv)return{line:G.value,lines:T.lines};if(L instanceof yv)return{line:G.value,lines:function(){if(T.line instanceof G)return T.lines;if(T.line instanceof z)return Dn(T.line.value0)(T.lines);throw new Error("Failed pattern match at Example (line 217, column 34 - line 219, column 57): "+[T.line.constructor.name])}()};if(L instanceof gv){var M={x:Kn(xh(L.value0))-S.left,y:Kn(Ah(L.value0))-S.top};return{line:tt(new z(new ne(M,M)))(z.create)(T.line),lines:T.lines}}if(L instanceof Cv){var M={x:Kn(xh(L.value0))-S.left,y:Kn(Ah(L.value0))-S.top},w=function(x){return new ne(x.value0,M)};return{line:yK(w)(T.line),lines:T.lines}}return T}}}};return en(NS(Ws)(void 0)(C)(b)(be(Bs(void 0))))(function(){var L={stdin:be(Bs(void 0)),kill:BS(Ws)(void 0)};return en(gn(function(S){return{prompt:S.prompt,command:S.command,commandEnv:S.commandEnv,foreground:new z(L)}}))(function(){return en(Ot(dl(lo(Go(!1)))(function(){return Gt(`\r
`)})))(function(){return Vo(o)})})})})}}]}},HO=BO(Cc)(ns),WO=YR(WS(ZR)(function(e){return WS(rf)(function(t){var n={prompt:"> ",command:"",foreground:G.value,commandEnv:HO};return WS(Z$(DK)(n)(e))(function(c){return CK(bK(c.query(en(Ot(dl(xS(!0))(function(){return Gt("> ")})))(function(){return Vo(wK(SK(EK(HO))))}))))(function(){return nf(c.query)(t)})})})}));WO();})();
/*! Bundled license information:

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)
  (*! @license
  ==========================================================================
  SproutCore -- JavaScript Application Framework
  copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
  
  SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.
  
  For more information about SproutCore, visit http://www.sproutcore.com
  
  
  ==========================================================================
  @license *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
