(()=>{var EO=Object.create;var zS=Object.defineProperty;var TO=Object.getOwnPropertyDescriptor;var MO=Object.getOwnPropertyNames;var LO=Object.getPrototypeOf,FO=Object.prototype.hasOwnProperty;var _t=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var xO=(e,t,n,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let v of MO(t))!FO.call(e,v)&&v!==n&&zS(e,v,{get:()=>t[v],enumerable:!(c=TO(t,v))||c.enumerable});return e};var Fa=(e,t,n)=>(n=e!=null?EO(LO(e)):{},xO(t||!e||!e.__esModule?zS(n,"default",{value:e,enumerable:!0}):n,e));var Wh=_t((DF,Bh)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var n=function(i,r,u){if(typeof i!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(u=r),n.modules[i]||(n.payloads[i]=u,n.modules[i]=null)};n.modules={},n.payloads={};var c=function(i,r,u){if(typeof r=="string"){var l=a(i,r);if(l!=null)return u&&u(),l}else if(Object.prototype.toString.call(r)==="[object Array]"){for(var p=[],f=0,o=r.length;f<o;++f){var h=a(i,r[f]);if(h==null&&v.original)return;p.push(h)}return u&&u.apply(null,p)||!0}},v=function(i,r){var u=c("",i,r);return u==null&&v.original?v.original.apply(this,arguments):u},s=function(i,r){if(r.indexOf("!")!==-1){var u=r.split("!");return s(i,u[0])+"!"+s(i,u[1])}if(r.charAt(0)=="."){var l=i.split("/").slice(0,-1).join("/");for(r=l+"/"+r;r.indexOf(".")!==-1&&p!=r;){var p=r;r=r.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return r},a=function(i,r){r=s(i,r);var u=n.modules[r];if(!u){if(u=n.payloads[r],typeof u=="function"){var l={},p={id:r,uri:"",exports:l,packaged:!0},f=function(h,_){return c(r,h,_)},o=u(f,l,p);l=o||p.exports,n.modules[r]=l,delete n.payloads[r]}u=n.modules[r]=l||u}return u};function d(i){var r=t;i&&(t[i]||(t[i]={}),r=t[i]),(!r.define||!r.define.packaged)&&(n.original=r.define,r.define=n,r.define.packaged=!0),(!r.require||!r.require.packaged)&&(v.original=r.require,r.require=v,r.require.packaged=!0)}d(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function c(v,s,a){Object.defineProperty(v,s,{value:a,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||c(String.prototype,"startsWith",function(v,s){return s=s||0,this.lastIndexOf(v,s)===s}),String.prototype.endsWith||c(String.prototype,"endsWith",function(v,s){var a=this;(s===void 0||s>a.length)&&(s=a.length),s-=v.length;var d=a.indexOf(v,s);return d!==-1&&d===s}),String.prototype.repeat||c(String.prototype,"repeat",function(v){for(var s="",a=this;v>0;)v&1&&(s+=a),(v>>=1)&&(a+=a);return s}),String.prototype.includes||c(String.prototype,"includes",function(v,s){return this.indexOf(v,s)!=-1}),Object.assign||(Object.assign=function(v){if(v==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(v),a=1;a<arguments.length;a++){var d=arguments[a];d!=null&&Object.keys(d).forEach(function(i){s[i]=d[i]})}return s}),Object.values||(Object.values=function(v){return Object.keys(v).map(function(s){return v[s]})}),Array.prototype.find||c(Array.prototype,"find",function(v){for(var s=this.length,a=arguments[1],d=0;d<s;d++){var i=this[d];if(v.call(a,i,d,this))return i}}),Array.prototype.findIndex||c(Array.prototype,"findIndex",function(v){for(var s=this.length,a=arguments[1],d=0;d<s;d++){var i=this[d];if(v.call(a,i,d,this))return d}}),Array.prototype.includes||c(Array.prototype,"includes",function(v,s){return this.indexOf(v,s)!=-1}),Array.prototype.fill||c(Array.prototype,"fill",function(v){for(var s=this,a=s.length>>>0,d=arguments[1],i=d>>0,r=i<0?Math.max(a+i,0):Math.min(i,a),u=arguments[2],l=u===void 0?a:u>>0,p=l<0?Math.max(a+l,0):Math.min(l,a);r<p;)s[r]=v,r++;return s}),Array.of||c(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,n){t.deepCopy=function c(v){if(typeof v!="object"||!v)return v;var s;if(Array.isArray(v)){s=[];for(var a=0;a<v.length;a++)s[a]=c(v[a]);return s}if(Object.prototype.toString.call(v)!=="[object Object]")return v;s={};for(var a in v)s[a]=c(v[a]);return s}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";t.last=function(s){return s[s.length-1]},t.stringReverse=function(s){return s.split("").reverse().join("")},t.stringRepeat=function(s,a){for(var d="";a>0;)a&1&&(d+=s),(a>>=1)&&(s+=s);return d};var c=/^\s\s*/,v=/\s\s*$/;t.stringTrimLeft=function(s){return s.replace(c,"")},t.stringTrimRight=function(s){return s.replace(v,"")},t.copyObject=function(s){var a={};for(var d in s)a[d]=s[d];return a},t.copyArray=function(s){for(var a=[],d=0,i=s.length;d<i;d++)s[d]&&typeof s[d]=="object"?a[d]=this.copyObject(s[d]):a[d]=s[d];return a},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(s){for(var a={},d=0;d<s.length;d++)a[s[d]]=1;return a},t.createMap=function(s){var a=Object.create(null);for(var d in s)a[d]=s[d];return a},t.arrayRemove=function(s,a){for(var d=0;d<=s.length;d++)a===s[d]&&s.splice(d,1)},t.escapeRegExp=function(s){return s.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(s){return(""+s).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(s,a){var d=[];return s.replace(a,function(i){d.push({offset:arguments[arguments.length-2],length:i.length})}),d},t.deferredCall=function(s){var a=null,d=function(){a=null,s()},i=function(r){return i.cancel(),a=setTimeout(d,r||0),i};return i.schedule=i,i.call=function(){return this.cancel(),s(),i},i.cancel=function(){return clearTimeout(a),a=null,i},i.isPending=function(){return a},i},t.delayedCall=function(s,a){var d=null,i=function(){d=null,s()},r=function(u){d==null&&(d=setTimeout(i,u||a))};return r.delay=function(u){d&&clearTimeout(d),d=setTimeout(i,u||a)},r.schedule=r,r.call=function(){this.cancel(),s()},r.cancel=function(){d&&clearTimeout(d),d=null},r.isPending=function(){return d},r},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(s,a,d){return d&&s.codePointAt(a)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var c=typeof navigator=="object"?navigator:{},v=(/mac|win|linux/i.exec(c.platform)||["other"])[0].toLowerCase(),s=c.userAgent||"",a=c.appName||"";t.isWin=v=="win",t.isMac=v=="mac",t.isLinux=v=="linux",t.isIE=a=="Microsoft Internet Explorer"||a.indexOf("MSAppHost")>=0?parseFloat((s.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((s.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=s.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(s.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(s.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(s.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(s.split(" Edge/")[1])||void 0,t.isAIR=s.indexOf("AdobeAIR")>=0,t.isAndroid=s.indexOf("Android")>=0,t.isChromeOS=s.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(s)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("./useragent"),v="http://www.w3.org/1999/xhtml";t.buildDom=function u(l,p,f){if(typeof l=="string"&&l){var o=document.createTextNode(l);return p&&p.appendChild(o),o}if(!Array.isArray(l))return l&&l.appendChild&&p&&p.appendChild(l),l;if(typeof l[0]!="string"||!l[0]){for(var h=[],_=0;_<l.length;_++){var m=u(l[_],p,f);m&&h.push(m)}return h}var y=document.createElement(l[0]),C=l[1],E=1;C&&typeof C=="object"&&!Array.isArray(C)&&(E=2);for(var _=E;_<l.length;_++)u(l[_],y,f);return E==2&&Object.keys(C).forEach(function(D){var g=C[D];D==="class"?y.className=Array.isArray(g)?g.join(" "):g:typeof g=="function"||D=="value"||D[0]=="$"?y[D]=g:D==="ref"?f&&(f[g]=y):D==="style"?typeof g=="string"&&(y.style.cssText=g):g!=null&&y.setAttribute(D,g)}),p&&p.appendChild(y),y},t.getDocumentHead=function(u){return u||(u=document),u.head||u.getElementsByTagName("head")[0]||u.documentElement},t.createElement=function(u,l){return document.createElementNS?document.createElementNS(l||v,u):document.createElement(u)},t.removeChildren=function(u){u.innerHTML=""},t.createTextNode=function(u,l){var p=l?l.ownerDocument:document;return p.createTextNode(u)},t.createFragment=function(u){var l=u?u.ownerDocument:document;return l.createDocumentFragment()},t.hasCssClass=function(u,l){var p=(u.className+"").split(/\s+/g);return p.indexOf(l)!==-1},t.addCssClass=function(u,l){t.hasCssClass(u,l)||(u.className+=" "+l)},t.removeCssClass=function(u,l){for(var p=u.className.split(/\s+/g);;){var f=p.indexOf(l);if(f==-1)break;p.splice(f,1)}u.className=p.join(" ")},t.toggleCssClass=function(u,l){for(var p=u.className.split(/\s+/g),f=!0;;){var o=p.indexOf(l);if(o==-1)break;f=!1,p.splice(o,1)}return f&&p.push(l),u.className=p.join(" "),f},t.setCssClass=function(u,l,p){p?t.addCssClass(u,l):t.removeCssClass(u,l)},t.hasCssString=function(u,l){var p=0,f;if(l=l||document,f=l.querySelectorAll("style")){for(;p<f.length;)if(f[p++].id===u)return!0}},t.removeElementById=function(u,l){l=l||document,l.getElementById(u)&&l.getElementById(u).remove()};var s,a=[];t.useStrictCSP=function(u){s=u,u==!1?d():a||(a=[])};function d(){var u=a;a=null,u&&u.forEach(function(l){i(l[0],l[1])})}function i(u,l,p){if(!(typeof document>"u")){if(a){if(p)d();else if(p===!1)return a.push([u,l])}if(!s){var f=p;!p||!p.getRootNode?f=document:(f=p.getRootNode(),(!f||f==p)&&(f=document));var o=f.ownerDocument||f;if(l&&t.hasCssString(l,f))return null;l&&(u+=`
/*# sourceURL=ace/css/`+l+" */");var h=t.createElement("style");h.appendChild(o.createTextNode(u)),l&&(h.id=l),f==o&&(f=t.getDocumentHead(o)),f.insertBefore(h,f.firstChild)}}}if(t.importCssString=i,t.importCssStylsheet=function(u,l){t.buildDom(["link",{rel:"stylesheet",href:u}],t.getDocumentHead(l))},t.scrollbarWidth=function(u){var l=t.createElement("ace_inner");l.style.width="100%",l.style.minWidth="0px",l.style.height="200px",l.style.display="block";var p=t.createElement("ace_outer"),f=p.style;f.position="absolute",f.left="-10000px",f.overflow="hidden",f.width="200px",f.minWidth="0px",f.height="150px",f.display="block",p.appendChild(l);var o=u&&u.documentElement||document&&document.documentElement;if(!o)return 0;o.appendChild(p);var h=l.offsetWidth;f.overflow="scroll";var _=l.offsetWidth;return h===_&&(_=p.clientWidth),o.removeChild(p),h-_},t.computedStyle=function(u,l){return window.getComputedStyle(u,"")||{}},t.setStyle=function(u,l,p){u[l]!==p&&(u[l]=p)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=c.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,c.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var r=document.createElement("div");t.HI_DPI&&r.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!c.isEdge&&typeof r.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),r=null}t.HAS_CSS_TRANSFORMS?t.translate=function(u,l,p){u.style.transform="translate("+Math.round(l)+"px, "+Math.round(p)+"px)"}:t.translate=function(u,l,p){u.style.top=Math.round(p)+"px",u.style.left=Math.round(l)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("./dom");t.get=function(v,s){var a=new XMLHttpRequest;a.open("GET",v,!0),a.onreadystatechange=function(){a.readyState===4&&s(a.responseText)},a.send(null)},t.loadScript=function(v,s){var a=c.getDocumentHead(),d=document.createElement("script");d.src=v,a.appendChild(d),d.onload=d.onreadystatechange=function(i,r){(r||!d.readyState||d.readyState=="loaded"||d.readyState=="complete")&&(d=d.onload=d.onreadystatechange=null,r||s())}},t.qualifyURL=function(v){var s=document.createElement("a");return s.href=v,s.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(c,v){c.super_=v,c.prototype=Object.create(v.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(c,v){for(var s in v)c[s]=v[s];return c},t.implement=function(c,v){t.mixin(c,v)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var c={},v=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};c._emit=c._dispatchEvent=function(a,d){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[a]||[],r=this._defaultHandlers[a];if(!(!i.length&&!r)){(typeof d!="object"||!d)&&(d={}),d.type||(d.type=a),d.stopPropagation||(d.stopPropagation=v),d.preventDefault||(d.preventDefault=s),i=i.slice();for(var u=0;u<i.length&&(i[u](d,this),!d.propagationStopped);u++);if(r&&!d.defaultPrevented)return r(d,this)}},c._signal=function(a,d){var i=(this._eventRegistry||{})[a];if(i){i=i.slice();for(var r=0;r<i.length;r++)i[r](d,this)}},c.once=function(a,d){var i=this;if(this.on(a,function r(){i.off(a,r),d.apply(null,arguments)}),!d)return new Promise(function(r){d=r})},c.setDefaultHandler=function(a,d){var i=this._defaultHandlers;if(i||(i=this._defaultHandlers={_disabled_:{}}),i[a]){var r=i[a],u=i._disabled_[a];u||(i._disabled_[a]=u=[]),u.push(r);var l=u.indexOf(d);l!=-1&&u.splice(l,1)}i[a]=d},c.removeDefaultHandler=function(a,d){var i=this._defaultHandlers;if(i){var r=i._disabled_[a];if(i[a]==d)r&&this.setDefaultHandler(a,r.pop());else if(r){var u=r.indexOf(d);u!=-1&&r.splice(u,1)}}},c.on=c.addEventListener=function(a,d,i){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[a];return r||(r=this._eventRegistry[a]=[]),r.indexOf(d)==-1&&r[i?"unshift":"push"](d),d},c.off=c.removeListener=c.removeEventListener=function(a,d){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[a];if(i){var r=i.indexOf(d);r!==-1&&i.splice(r,1)}},c.removeAllListeners=function(a){a||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[a]=void 0),this._defaultHandlers&&(this._defaultHandlers[a]=void 0)},t.EventEmitter=c});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,n){t.reportError=function(v,s){var a=new Error(v);a.data=s,typeof console=="object"&&console.error&&console.error(a),setTimeout(function(){throw a})}});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(e,t,n){"no use strict";var c=e("./oop"),v=e("./event_emitter").EventEmitter,s=e("./report_error").reportError,a={setOptions:function(u){Object.keys(u).forEach(function(l){this.setOption(l,u[l])},this)},getOptions:function(u){var l={};if(u)Array.isArray(u)||(l=u,u=Object.keys(l));else{var p=this.$options;u=Object.keys(p).filter(function(f){return!p[f].hidden})}return u.forEach(function(f){l[f]=this.getOption(f)},this),l},setOption:function(u,l){if(this["$"+u]!==l){var p=this.$options[u];if(!p)return d('misspelled option "'+u+'"');if(p.forwardTo)return this[p.forwardTo]&&this[p.forwardTo].setOption(u,l);p.handlesSet||(this["$"+u]=l),p&&p.set&&p.set.call(this,l)}},getOption:function(u){var l=this.$options[u];return l?l.forwardTo?this[l.forwardTo]&&this[l.forwardTo].getOption(u):l&&l.get?l.get.call(this):this["$"+u]:d('misspelled option "'+u+'"')}};function d(u){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var i,r=function(){function u(){this.$defaultOptions={}}return u.prototype.defineOptions=function(l,p,f){return l.$options||(this.$defaultOptions[p]=l.$options={}),Object.keys(f).forEach(function(o){var h=f[o];typeof h=="string"&&(h={forwardTo:h}),h.name||(h.name=o),l.$options[h.name]=h,"initialValue"in h&&(l["$"+h.name]=h.initialValue)}),c.implement(l,a),this},u.prototype.resetOptions=function(l){Object.keys(l.$options).forEach(function(p){var f=l.$options[p];"value"in f&&l.setOption(p,f.value)})},u.prototype.setDefaultValue=function(l,p,f){if(!l){for(l in this.$defaultOptions)if(this.$defaultOptions[l][p])break;if(!this.$defaultOptions[l][p])return!1}var o=this.$defaultOptions[l]||(this.$defaultOptions[l]={});o[p]&&(o.forwardTo?this.setDefaultValue(o.forwardTo,p,f):o[p].value=f)},u.prototype.setDefaultValues=function(l,p){Object.keys(p).forEach(function(f){this.setDefaultValue(l,f,p[f])},this)},u.prototype.setMessages=function(l){i=l},u.prototype.nls=function(l,p){i&&!i[l]&&d("No message found for '"+l+"' in the provided messages, falling back to default English message.");var f=i&&i[l]||l;return p&&(f=f.replace(/\$(\$|[\d]+)/g,function(o,h){return h=="$"?"$":p[h]})),f},u}();r.prototype.warn=d,r.prototype.reportError=s,c.implement(r.prototype,v),t.AppConfig=r});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var c=e("../lib/dom");c.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){"no use strict";var c=e("./lib/lang"),v=e("./lib/net"),s=e("./lib/dom"),a=e("./lib/app_config").AppConfig;n.exports=t=new a;var d={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(l){if(!d.hasOwnProperty(l))throw new Error("Unknown config key: "+l);return d[l]},t.set=function(l,p){if(d.hasOwnProperty(l))d[l]=p;else if(this.setDefaultValue("",l,p)==!1)throw new Error("Unknown config key: "+l);l=="useStrictCSP"&&s.useStrictCSP(p)},t.all=function(){return c.copyObject(d)},t.$modes={},t.moduleUrl=function(l,p){if(d.$moduleUrls[l])return d.$moduleUrls[l];var f=l.split("/");p=p||f[f.length-2]||"";var o=p=="snippets"?"/":"-",h=f[f.length-1];if(p=="worker"&&o=="-"){var _=new RegExp("^"+p+"[\\-_]|[\\-_]"+p+"$","g");h=h.replace(_,"")}(!h||h==p)&&f.length>1&&(h=f[f.length-2]);var m=d[p+"Path"];return m==null?m=d.basePath:o=="/"&&(p=o=""),m&&m.slice(-1)!="/"&&(m+="/"),m+p+o+h+this.get("suffix")},t.setModuleUrl=function(l,p){return d.$moduleUrls[l]=p};var i=function(l,p){if(l==="ace/theme/textmate"||l==="./theme/textmate")return p(null,e("./theme/textmate"));if(r)return r(l,p);console.error("loader is not configured")},r;t.setLoader=function(l){r=l},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(l,p){var f;if(Array.isArray(l))var o=l[0],h=l[1];else if(typeof l=="string")var h=l;var _=function(m){if(m&&!t.$loading[h])return p&&p(m);if(t.$loading[h]||(t.$loading[h]=[]),t.$loading[h].push(p),!(t.$loading[h].length>1)){var y=function(){i(h,function(C,E){E&&(t.$loaded[h]=E),t._emit("load.module",{name:h,module:E});var D=t.$loading[h];t.$loading[h]=null,D.forEach(function(g){g&&g(E)})})};if(!t.get("packaged"))return y();v.loadScript(t.moduleUrl(h,o),y),u()}};if(t.dynamicModules[h])t.dynamicModules[h]().then(function(m){m.default?_(m.default):_(m)});else{try{f=this.$require(h)}catch{}_(f||t.$loaded[h])}},t.$require=function(l){if(typeof n.require=="function"){var p="require";return n[p](l)}},t.setModuleLoader=function(l,p){t.dynamicModules[l]=p};var u=function(){!d.basePath&&!d.workerPath&&!d.modePath&&!d.themePath&&!Object.keys(d.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),u=function(){})};t.version="1.32.3"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var c=e("./config");c.setLoader(function(d,i){e([d],function(r){i(null,r)})});var v=function(){return this||typeof window<"u"&&window}();n.exports=function(d){c.init=s,c.$require=e,d.require=e,typeof define=="function"&&(d.define=define)},s(!0);function s(d){if(!(!v||!v.document)){c.set("packaged",d||e.packaged||n.packaged||v.define&&define.packaged);var i={},r="",u=document.currentScript||document._currentScript,l=u&&u.ownerDocument||document;u&&u.src&&(r=u.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var p=l.getElementsByTagName("script"),f=0;f<p.length;f++){var o=p[f],h=o.src||o.getAttribute("src");if(h){for(var _=o.attributes,m=0,y=_.length;m<y;m++){var C=_[m];C.name.indexOf("data-ace-")===0&&(i[a(C.name.replace(/^data-ace-/,""))]=C.value)}var E=h.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);E&&(r=E[1])}}r&&(i.base=i.base||r,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var D in i)typeof i[D]<"u"&&c.set(D,i[D])}}function a(d){return d.replace(/-(.)/g,function(i,r){return r.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var c=function(){function v(s,a,d,i){this.start={row:s,column:a},this.end={row:d,column:i}}return v.prototype.isEqual=function(s){return this.start.row===s.start.row&&this.end.row===s.end.row&&this.start.column===s.start.column&&this.end.column===s.end.column},v.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},v.prototype.contains=function(s,a){return this.compare(s,a)==0},v.prototype.compareRange=function(s){var a,d=s.end,i=s.start;return a=this.compare(d.row,d.column),a==1?(a=this.compare(i.row,i.column),a==1?2:a==0?1:0):a==-1?-2:(a=this.compare(i.row,i.column),a==-1?-1:a==1?42:0)},v.prototype.comparePoint=function(s){return this.compare(s.row,s.column)},v.prototype.containsRange=function(s){return this.comparePoint(s.start)==0&&this.comparePoint(s.end)==0},v.prototype.intersects=function(s){var a=this.compareRange(s);return a==-1||a==0||a==1},v.prototype.isEnd=function(s,a){return this.end.row==s&&this.end.column==a},v.prototype.isStart=function(s,a){return this.start.row==s&&this.start.column==a},v.prototype.setStart=function(s,a){typeof s=="object"?(this.start.column=s.column,this.start.row=s.row):(this.start.row=s,this.start.column=a)},v.prototype.setEnd=function(s,a){typeof s=="object"?(this.end.column=s.column,this.end.row=s.row):(this.end.row=s,this.end.column=a)},v.prototype.inside=function(s,a){return this.compare(s,a)==0?!(this.isEnd(s,a)||this.isStart(s,a)):!1},v.prototype.insideStart=function(s,a){return this.compare(s,a)==0?!this.isEnd(s,a):!1},v.prototype.insideEnd=function(s,a){return this.compare(s,a)==0?!this.isStart(s,a):!1},v.prototype.compare=function(s,a){return!this.isMultiLine()&&s===this.start.row?a<this.start.column?-1:a>this.end.column?1:0:s<this.start.row?-1:s>this.end.row?1:this.start.row===s?a>=this.start.column?0:-1:this.end.row===s?a<=this.end.column?0:1:0},v.prototype.compareStart=function(s,a){return this.start.row==s&&this.start.column==a?-1:this.compare(s,a)},v.prototype.compareEnd=function(s,a){return this.end.row==s&&this.end.column==a?1:this.compare(s,a)},v.prototype.compareInside=function(s,a){return this.end.row==s&&this.end.column==a?1:this.start.row==s&&this.start.column==a?-1:this.compare(s,a)},v.prototype.clipRows=function(s,a){if(this.end.row>a)var d={row:a+1,column:0};else if(this.end.row<s)var d={row:s,column:0};if(this.start.row>a)var i={row:a+1,column:0};else if(this.start.row<s)var i={row:s,column:0};return v.fromPoints(i||this.start,d||this.end)},v.prototype.extend=function(s,a){var d=this.compare(s,a);if(d==0)return this;if(d==-1)var i={row:s,column:a};else var r={row:s,column:a};return v.fromPoints(i||this.start,r||this.end)},v.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},v.prototype.isMultiLine=function(){return this.start.row!==this.end.row},v.prototype.clone=function(){return v.fromPoints(this.start,this.end)},v.prototype.collapseRows=function(){return this.end.column==0?new v(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new v(this.start.row,0,this.end.row,0)},v.prototype.toScreenRange=function(s){var a=s.documentToScreenPosition(this.start),d=s.documentToScreenPosition(this.end);return new v(a.row,a.column,d.row,d.column)},v.prototype.moveBy=function(s,a){this.start.row+=s,this.start.column+=a,this.end.row+=s,this.end.column+=a},v}();c.fromPoints=function(v,s){return new c(v.row,v.column,s.row,s.column)},c.comparePoints=function(v,s){return v.row-s.row||v.column-s.column},t.Range=c});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var c=e("./oop"),v=function(){var s={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};s.PRINTABLE_KEYS[173]="-";var a,d;for(d in s.FUNCTION_KEYS)a=s.FUNCTION_KEYS[d].toLowerCase(),s[a]=parseInt(d,10);for(d in s.PRINTABLE_KEYS)a=s.PRINTABLE_KEYS[d].toLowerCase(),s[a]=parseInt(d,10);return c.mixin(s,s.MODIFIER_KEYS),c.mixin(s,s.PRINTABLE_KEYS),c.mixin(s,s.FUNCTION_KEYS),s.enter=s.return,s.escape=s.esc,s.del=s.delete,function(){for(var i=["cmd","ctrl","alt","shift"],r=Math.pow(2,i.length);r--;)s.KEY_MODS[r]=i.filter(function(u){return r&s.KEY_MODS[u]}).join("-")+"-"}(),s.KEY_MODS[0]="",s.KEY_MODS[-1]="input-",s}();c.mixin(t,v),t.default=t,t.keyCodeToString=function(s){var a=v[s];return typeof a!="string"&&(a=String.fromCharCode(s)),a.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("./keys"),v=e("./useragent"),s=null,a=0,d;function i(){d=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return d={passive:!1},!0}})}catch{}}function r(){return d==null&&i(),d}function u(m,y,C){this.elem=m,this.type=y,this.callback=C}u.prototype.destroy=function(){p(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var l=t.addListener=function(m,y,C,E){m.addEventListener(y,C,r()),E&&E.$toDestroy.push(new u(m,y,C))},p=t.removeListener=function(m,y,C){m.removeEventListener(y,C,r())};t.stopEvent=function(m){return t.stopPropagation(m),t.preventDefault(m),!1},t.stopPropagation=function(m){m.stopPropagation&&m.stopPropagation()},t.preventDefault=function(m){m.preventDefault&&m.preventDefault()},t.getButton=function(m){return m.type=="dblclick"?0:m.type=="contextmenu"||v.isMac&&m.ctrlKey&&!m.altKey&&!m.shiftKey?2:m.button},t.capture=function(m,y,C){var E=m&&m.ownerDocument||document;function D(g){y&&y(g),C&&C(g),p(E,"mousemove",y),p(E,"mouseup",D),p(E,"dragstart",D)}return l(E,"mousemove",y),l(E,"mouseup",D),l(E,"dragstart",D),D},t.addMouseWheelListener=function(m,y,C){l(m,"wheel",function(E){var D=.15,g=E.deltaX||0,b=E.deltaY||0;switch(E.deltaMode){case E.DOM_DELTA_PIXEL:E.wheelX=g*D,E.wheelY=b*D;break;case E.DOM_DELTA_LINE:var L=15;E.wheelX=g*L,E.wheelY=b*L;break;case E.DOM_DELTA_PAGE:var w=150;E.wheelX=g*w,E.wheelY=b*w;break}y(E)},C)},t.addMultiMouseDownListener=function(m,y,C,E,D){var g=0,b,L,w,T={2:"dblclick",3:"tripleclick",4:"quadclick"};function M(S){if(t.getButton(S)!==0?g=0:S.detail>1?(g++,g>4&&(g=1)):g=1,v.isIE){var F=Math.abs(S.clientX-b)>5||Math.abs(S.clientY-L)>5;(!w||F)&&(g=1),w&&clearTimeout(w),w=setTimeout(function(){w=null},y[g-1]||600),g==1&&(b=S.clientX,L=S.clientY)}if(S._clicks=g,C[E]("mousedown",S),g>4)g=0;else if(g>1)return C[E](T[g],S)}Array.isArray(m)||(m=[m]),m.forEach(function(S){l(S,"mousedown",M,D)})};var f=function(m){return 0|(m.ctrlKey?1:0)|(m.altKey?2:0)|(m.shiftKey?4:0)|(m.metaKey?8:0)};t.getModifierString=function(m){return c.KEY_MODS[f(m)]};function o(m,y,C){var E=f(y);if(!v.isMac&&s){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(E|=8),s.altGr)if((3&E)!=3)s.altGr=0;else return;if(C===18||C===17){var D="location"in y?y.location:y.keyLocation;if(C===17&&D===1)s[C]==1&&(a=y.timeStamp);else if(C===18&&E===3&&D===2){var g=y.timeStamp-a;g<50&&(s.altGr=!0)}}}if(C in c.MODIFIER_KEYS&&(C=-1),!E&&C===13){var D="location"in y?y.location:y.keyLocation;if(D===3&&(m(y,E,-C),y.defaultPrevented))return}if(v.isChromeOS&&E&8){if(m(y,E,C),y.defaultPrevented)return;E&=-9}return!E&&!(C in c.FUNCTION_KEYS)&&!(C in c.PRINTABLE_KEYS)?!1:m(y,E,C)}t.addCommandKeyListener=function(m,y,C){var E=null;l(m,"keydown",function(D){s[D.keyCode]=(s[D.keyCode]||0)+1;var g=o(y,D,D.keyCode);return E=D.defaultPrevented,g},C),l(m,"keypress",function(D){E&&(D.ctrlKey||D.altKey||D.shiftKey||D.metaKey)&&(t.stopEvent(D),E=null)},C),l(m,"keyup",function(D){s[D.keyCode]=null},C),s||(h(),l(window,"focus",h))};function h(){s=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!v.isOldIE){var _=1;t.nextTick=function(m,y){y=y||window;var C="zero-timeout-message-"+_++,E=function(D){D.data==C&&(t.stopPropagation(D),p(y,"message",E),m())};l(y,"message",E),y.postMessage(C,"*")}}t.$idleBlocked=!1,t.onIdle=function(m,y){return setTimeout(function C(){t.$idleBlocked?setTimeout(C,100):m()},y)},t.$idleBlockId=null,t.blockIdle=function(m){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},m||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(m){setTimeout(m,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var c;n.exports={lineMode:!1,pasteCancelled:function(){return c&&c>Date.now()-50?!0:c=!1},cancel:function(){c=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var c=e("../lib/event"),v=e("../config").nls,s=e("../lib/useragent"),a=e("../lib/dom"),d=e("../lib/lang"),i=e("../clipboard"),r=s.isChrome<18,u=s.isIE,l=s.isChrome>63,p=400,f=e("../lib/keys"),o=f.KEY_MODS,h=s.isIOS,_=h?/\s/:/\n/,m=s.isMobile,y;y=function(C,E){var D=a.createElement("textarea");D.className="ace_text-input",D.setAttribute("wrap","off"),D.setAttribute("autocorrect","off"),D.setAttribute("autocapitalize","off"),D.setAttribute("spellcheck","false"),D.style.opacity="0",C.insertBefore(D,C.firstChild);var g=!1,b=!1,L=!1,w=!1,T="";m||(D.style.fontSize="1px");var M=!1,S=!1,F="",x=0,R=0,A=0,I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,k=0;try{var H=document.activeElement===D}catch{}this.setNumberOfExtraLines=function(j){if(I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,j<0){k=0;return}k=j},this.setAriaOptions=function(j){if(j.activeDescendant?(D.setAttribute("aria-haspopup","true"),D.setAttribute("aria-autocomplete",j.inline?"both":"list"),D.setAttribute("aria-activedescendant",j.activeDescendant)):(D.setAttribute("aria-haspopup","false"),D.setAttribute("aria-autocomplete","both"),D.removeAttribute("aria-activedescendant")),j.role&&D.setAttribute("role",j.role),j.setLabel&&(D.setAttribute("aria-roledescription",v("editor")),E.session)){var ae=E.session.selection.cursor.row;D.setAttribute("aria-label",v("Cursor at row $0",[ae+1]))}},this.setAriaOptions({role:"textbox"}),c.addListener(D,"blur",function(j){S||(E.onBlur(j),H=!1)},E),c.addListener(D,"focus",function(j){if(!S){if(H=!0,s.isEdge)try{if(!document.hasFocus())return}catch{}E.onFocus(j),s.isEdge?setTimeout(q):q()}},E),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:E.renderer.enableKeyboardAccessibility}),T||l||this.$focusScroll=="browser")return D.focus({preventScroll:!0});var j=D.style.top;D.style.position="fixed",D.style.top="0px";try{var ae=D.getBoundingClientRect().top!=0}catch{return}var de=[];if(ae)for(var Be=D.parentElement;Be&&Be.nodeType==1;)de.push(Be),Be.setAttribute("ace_nocontext","true"),!Be.parentElement&&Be.getRootNode?Be=Be.getRootNode().host:Be=Be.parentElement;D.focus({preventScroll:!0}),ae&&de.forEach(function(tt){tt.removeAttribute("ace_nocontext")}),setTimeout(function(){D.style.position="",D.style.top=="0px"&&(D.style.top=j)},0)},this.blur=function(){D.blur()},this.isFocused=function(){return H},E.on("beforeEndOperation",function(){var j=E.curOp,ae=j&&j.command&&j.command.name;if(ae!="insertstring"){var de=ae&&(j.docChanged||j.selectionChanged);L&&de&&(F=D.value="",wt()),q()}});var U=function(j,ae){for(var de=ae,Be=1;Be<=j-I&&Be<2*k+1;Be++)de+=E.session.getLine(j-Be).length+1;return de},q=h?function(j){if(!(!H||g&&!j||w)){j||(j="");var ae=`
 ab`+j+`cde fg
`;ae!=D.value&&(D.value=F=ae);var de=4,Be=4+(j.length||(E.selection.isEmpty()?0:1));(x!=de||R!=Be)&&D.setSelectionRange(de,Be),x=de,R=Be}}:function(){if(!(L||w)&&!(!H&&!B)){L=!0;var j=0,ae=0,de="";if(E.session){var Be=E.selection,tt=Be.getRange(),ct=Be.cursor.row;ct===$+1?(I=$+1,$=I+2*k):ct===I-1?($=I-1,I=$-2*k):(ct<I-1||ct>$+1)&&(I=ct>k?ct-k:0,$=ct>k?ct+k:2*k);for(var Ge=[],St=I;St<=$;St++)Ge.push(E.session.getLine(St));if(de=Ge.join(`
`),j=U(tt.start.row,tt.start.column),ae=U(tt.end.row,tt.end.column),tt.start.row<I){var zt=E.session.getLine(I-1);j=tt.start.row<I-1?0:j,ae+=zt.length+1,de=zt+`
`+de}else if(tt.end.row>$){var Et=E.session.getLine($+1);ae=tt.end.row>$+1?Et.length:tt.end.column,ae+=de.length+1,de=de+`
`+Et}else m&&ct>0&&(de=`
`+de,ae+=1,j+=1);de.length>p&&(j<p&&ae<p?de=de.slice(0,p):(de=`
`,j==ae?j=ae=0:(j=0,ae=1)));var Fn=de+`

`;Fn!=F&&(D.value=F=Fn,x=R=Fn.length)}if(B&&(x=D.selectionStart,R=D.selectionEnd),R!=ae||x!=j||D.selectionEnd!=R)try{D.setSelectionRange(j,ae),x=j,R=ae}catch{}L=!1}};this.resetSelection=q,H&&E.onFocus();var N=function(j){return j.selectionStart===0&&j.selectionEnd>=F.length&&j.value===F&&F&&j.selectionEnd!==R},K=function(j){L||(g?g=!1:N(D)?(E.selectAll(),q()):m&&D.selectionStart!=x&&q())},O=null;this.setInputHandler=function(j){O=j},this.getInputHandler=function(){return O};var B=!1,W=function(j,ae){if(B&&(B=!1),b)return q(),j&&E.onPaste(j),b=!1,"";for(var de=D.selectionStart,Be=D.selectionEnd,tt=x,ct=F.length-R,Ge=j,St=j.length-de,zt=j.length-Be,Et=0;tt>0&&F[Et]==j[Et];)Et++,tt--;for(Ge=Ge.slice(Et),Et=1;ct>0&&F.length-Et>x-1&&F[F.length-Et]==j[j.length-Et];)Et++,ct--;St-=Et-1,zt-=Et-1;var Fn=Ge.length-Et+1;if(Fn<0&&(tt=-Fn,Fn=0),Ge=Ge.slice(0,Fn),!ae&&!Ge&&!St&&!tt&&!ct&&!zt)return"";w=!0;var hi=!1;return s.isAndroid&&Ge==". "&&(Ge="  ",hi=!0),Ge&&!tt&&!ct&&!St&&!zt||M?E.onTextInput(Ge):E.onTextInput(Ge,{extendLeft:tt,extendRight:ct,restoreStart:St,restoreEnd:zt}),w=!1,F=j,x=de,R=Be,A=zt,hi?`
`:Ge},P=function(j){if(L)return we();if(j&&j.inputType){if(j.inputType=="historyUndo")return E.execCommand("undo");if(j.inputType=="historyRedo")return E.execCommand("redo")}var ae=D.value,de=W(ae,!0);(ae.length>p+100||_.test(de)||m&&x<1&&x==R)&&q()},X=function(j,ae,de){var Be=j.clipboardData||window.clipboardData;if(!(!Be||r)){var tt=u||de?"Text":"text/plain";try{return ae?Be.setData(tt,ae)!==!1:Be.getData(tt)}catch(ct){if(!de)return X(ct,ae,!0)}}},J=function(j,ae){var de=E.getCopyText();if(!de)return c.preventDefault(j);X(j,de)?(h&&(q(de),g=de,setTimeout(function(){g=!1},10)),ae?E.onCut():E.onCopy(),c.preventDefault(j)):(g=!0,D.value=de,D.select(),setTimeout(function(){g=!1,q(),ae?E.onCut():E.onCopy()}))},ve=function(j){J(j,!0)},Ee=function(j){J(j,!1)},De=function(j){var ae=X(j);i.pasteCancelled()||(typeof ae=="string"?(ae&&E.onPaste(ae,j),s.isIE&&setTimeout(q),c.preventDefault(j)):(D.value="",b=!0))};c.addCommandKeyListener(D,E.onCommandKey.bind(E),E),c.addListener(D,"select",K,E),c.addListener(D,"input",P,E),c.addListener(D,"cut",ve,E),c.addListener(D,"copy",Ee,E),c.addListener(D,"paste",De,E),(!("oncut"in D)||!("oncopy"in D)||!("onpaste"in D))&&c.addListener(C,"keydown",function(j){if(!(s.isMac&&!j.metaKey||!j.ctrlKey))switch(j.keyCode){case 67:Ee(j);break;case 86:De(j);break;case 88:ve(j);break}},E);var se=function(j){if(!(L||!E.onCompositionStart||E.$readOnly)&&(L={},!M)){j.data&&(L.useTextareaForIME=!1),setTimeout(we,0),E._signal("compositionStart"),E.on("mousedown",Jt);var ae=E.getSelectionRange();ae.end.row=ae.start.row,ae.end.column=ae.start.column,L.markerRange=ae,L.selectionStart=x,E.onCompositionStart(L),L.useTextareaForIME?(F=D.value="",x=0,R=0):(D.msGetInputContext&&(L.context=D.msGetInputContext()),D.getInputContext&&(L.context=D.getInputContext()))}},we=function(){if(!(!L||!E.onCompositionUpdate||E.$readOnly)){if(M)return Jt();if(L.useTextareaForIME)E.onCompositionUpdate(D.value);else{var j=D.value;W(j),L.markerRange&&(L.context&&(L.markerRange.start.column=L.selectionStart=L.context.compositionStartOffset),L.markerRange.end.column=L.markerRange.start.column+R-L.selectionStart+A)}}},wt=function(j){!E.onCompositionEnd||E.$readOnly||(L=!1,E.onCompositionEnd(),E.off("mousedown",Jt),j&&P())};function Jt(){S=!0,D.blur(),D.focus(),S=!1}var Wt=d.delayedCall(we,50).schedule.bind(null,null);function Ze(j){j.keyCode==27&&D.value.length<D.selectionStart&&(L||(F=D.value),x=R=-1,q()),Wt()}c.addListener(D,"compositionstart",se,E),c.addListener(D,"compositionupdate",we,E),c.addListener(D,"keyup",Ze,E),c.addListener(D,"keydown",Wt,E),c.addListener(D,"compositionend",wt,E),this.getElement=function(){return D},this.setCommandMode=function(j){M=j,D.readOnly=!1},this.setReadOnly=function(j){M||(D.readOnly=j)},this.setCopyWithEmptySelection=function(j){},this.onContextMenu=function(j){B=!0,q(),E._emit("nativecontextmenu",{target:E,domEvent:j}),this.moveToMouse(j,!0)},this.moveToMouse=function(j,ae){T||(T=D.style.cssText),D.style.cssText=(ae?"z-index:100000;":"")+(s.isIE?"opacity:0.1;":"")+"text-indent: -"+(x+R)*E.renderer.characterWidth*.5+"px;";var de=E.container.getBoundingClientRect(),Be=a.computedStyle(E.container),tt=de.top+(parseInt(Be.borderTopWidth)||0),ct=de.left+(parseInt(de.borderLeftWidth)||0),Ge=de.bottom-tt-D.clientHeight-2,St=function(zt){a.translate(D,zt.clientX-ct-2,Math.min(zt.clientY-tt-2,Ge))};St(j),j.type=="mousedown"&&(E.renderer.$isMousePressed=!0,clearTimeout(ce),s.isWin&&c.capture(E.container,St,he))},this.onContextMenuClose=he;var ce;function he(){clearTimeout(ce),ce=setTimeout(function(){T&&(D.style.cssText=T,T=""),E.renderer.$isMousePressed=!1,E.renderer.$keepTextAreaAtCursor&&E.renderer.$moveTextAreaToCursor()},0)}var le=function(j){E.textInput.onContextMenu(j),he()};c.addListener(D,"mouseup",le,E),c.addListener(D,"mousedown",function(j){j.preventDefault(),he()},E),c.addListener(E.renderer.scroller,"contextmenu",le,E),c.addListener(D,"contextmenu",le,E),h&&oe(C,E,D);function oe(j,ae,de){var Be=null,tt=!1;de.addEventListener("keydown",function(Ge){Be&&clearTimeout(Be),tt=!0},!0),de.addEventListener("keyup",function(Ge){Be=setTimeout(function(){tt=!1},100)},!0);var ct=function(Ge){if(document.activeElement===de&&!(tt||L||ae.$mouseHandler.isMousePressed)&&!g){var St=de.selectionStart,zt=de.selectionEnd,Et=null,Fn=0;if(St==0?Et=f.up:St==1?Et=f.home:zt>R&&F[zt]==`
`?Et=f.end:St<x&&F[St-1]==" "?(Et=f.left,Fn=o.option):St<x||St==x&&R!=x&&St==zt?Et=f.left:zt>R&&F.slice(0,zt).split(`
`).length>2?Et=f.down:zt>R&&F[zt-1]==" "?(Et=f.right,Fn=o.option):(zt>R||zt==R&&R!=x&&St==zt)&&(Et=f.right),St!==zt&&(Fn|=o.shift),Et){var hi=ae.onCommandKey({},Fn,Et);if(!hi&&ae.commands){Et=f.keyCodeToString(Et);var qS=ae.commands.findKeyCommand(Fn,Et);qS&&ae.execCommand(qS)}x=St,R=zt,q("")}}};document.addEventListener("selectionchange",ct),ae.on("destroy",function(){document.removeEventListener("selectionchange",ct)})}this.destroy=function(){D.parentElement&&D.parentElement.removeChild(D)}},t.TextInput=y,t.$setUserAgentForTests=function(C,E){m=C,h=E}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("../lib/useragent"),v=0,s=550,a=function(){function r(u){u.$clickSelection=null;var l=u.editor;l.setDefaultHandler("mousedown",this.onMouseDown.bind(u)),l.setDefaultHandler("dblclick",this.onDoubleClick.bind(u)),l.setDefaultHandler("tripleclick",this.onTripleClick.bind(u)),l.setDefaultHandler("quadclick",this.onQuadClick.bind(u)),l.setDefaultHandler("mousewheel",this.onMouseWheel.bind(u));var p=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];p.forEach(function(f){u[f]=this[f]},this),u.selectByLines=this.extendSelectionBy.bind(u,"getLineRange"),u.selectByWords=this.extendSelectionBy.bind(u,"getWordRange")}return r.prototype.onMouseDown=function(u){var l=u.inSelection(),p=u.getDocumentPosition();this.mousedownEvent=u;var f=this.editor,o=u.getButton();if(o!==0){var h=f.getSelectionRange(),_=h.isEmpty();(_||o==1)&&f.selection.moveToPosition(p),o==2&&(f.textInput.onContextMenu(u.domEvent),c.isMozilla||u.preventDefault());return}if(this.mousedownEvent.time=Date.now(),l&&!f.isFocused()&&(f.focus(),this.$focusTimeout&&!this.$clickSelection&&!f.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(u);return}return this.captureMouse(u),this.startSelect(p,u.domEvent._clicks>1),u.preventDefault()},r.prototype.startSelect=function(u,l){u=u||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var p=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?p.selection.selectToPosition(u):l||p.selection.moveToPosition(u),l||this.select(),p.setStyle("ace_selecting"),this.setState("select"))},r.prototype.select=function(){var u,l=this.editor,p=l.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var f=this.$clickSelection.comparePoint(p);if(f==-1)u=this.$clickSelection.end;else if(f==1)u=this.$clickSelection.start;else{var o=i(this.$clickSelection,p);p=o.cursor,u=o.anchor}l.selection.setSelectionAnchor(u.row,u.column)}l.selection.selectToPosition(p),l.renderer.scrollCursorIntoView()},r.prototype.extendSelectionBy=function(u){var l,p=this.editor,f=p.renderer.screenToTextCoordinates(this.x,this.y),o=p.selection[u](f.row,f.column);if(this.$clickSelection){var h=this.$clickSelection.comparePoint(o.start),_=this.$clickSelection.comparePoint(o.end);if(h==-1&&_<=0)l=this.$clickSelection.end,(o.end.row!=f.row||o.end.column!=f.column)&&(f=o.start);else if(_==1&&h>=0)l=this.$clickSelection.start,(o.start.row!=f.row||o.start.column!=f.column)&&(f=o.end);else if(h==-1&&_==1)f=o.end,l=o.start;else{var m=i(this.$clickSelection,f);f=m.cursor,l=m.anchor}p.selection.setSelectionAnchor(l.row,l.column)}p.selection.selectToPosition(f),p.renderer.scrollCursorIntoView()},r.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},r.prototype.focusWait=function(){var u=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),l=Date.now();(u>v||l-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},r.prototype.onDoubleClick=function(u){var l=u.getDocumentPosition(),p=this.editor,f=p.session,o=f.getBracketRange(l);o?(o.isEmpty()&&(o.start.column--,o.end.column++),this.setState("select")):(o=p.selection.getWordRange(l.row,l.column),this.setState("selectByWords")),this.$clickSelection=o,this.select()},r.prototype.onTripleClick=function(u){var l=u.getDocumentPosition(),p=this.editor;this.setState("selectByLines");var f=p.getSelectionRange();f.isMultiLine()&&f.contains(l.row,l.column)?(this.$clickSelection=p.selection.getLineRange(f.start.row),this.$clickSelection.end=p.selection.getLineRange(f.end.row).end):this.$clickSelection=p.selection.getLineRange(l.row),this.select()},r.prototype.onQuadClick=function(u){var l=this.editor;l.selectAll(),this.$clickSelection=l.getSelectionRange(),this.setState("selectAll")},r.prototype.onMouseWheel=function(u){if(!u.getAccelKey()){u.getShiftKey()&&u.wheelY&&!u.wheelX&&(u.wheelX=u.wheelY,u.wheelY=0);var l=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var p=this.$lastScroll,f=u.domEvent.timeStamp,o=f-p.t,h=o?u.wheelX/o:p.vx,_=o?u.wheelY/o:p.vy;o<s&&(h=(h+p.vx)/2,_=(_+p.vy)/2);var m=Math.abs(h/_),y=!1;if(m>=1&&l.renderer.isScrollableBy(u.wheelX*u.speed,0)&&(y=!0),m<=1&&l.renderer.isScrollableBy(0,u.wheelY*u.speed)&&(y=!0),y)p.allowed=f;else if(f-p.allowed<s){var C=Math.abs(h)<=1.5*Math.abs(p.vx)&&Math.abs(_)<=1.5*Math.abs(p.vy);C?(y=!0,p.allowed=f):p.allowed=0}if(p.t=f,p.vx=h,p.vy=_,y)return l.renderer.scrollBy(u.wheelX*u.speed,u.wheelY*u.speed),u.stop()}},r}();a.prototype.selectEnd=a.prototype.selectByLinesEnd,a.prototype.selectAllEnd=a.prototype.selectByLinesEnd,a.prototype.selectByWordsEnd=a.prototype.selectByLinesEnd,t.DefaultHandlers=a;function d(r,u,l,p){return Math.sqrt(Math.pow(l-r,2)+Math.pow(p-u,2))}function i(r,u){if(r.start.row==r.end.row)var l=2*u.column-r.start.column-r.end.column;else if(r.start.row==r.end.row-1&&!r.start.column&&!r.end.column)var l=u.column-4;else var l=2*u.row-r.start.row-r.end.row;return l<0?{cursor:r.start,anchor:r.end}:{cursor:r.end,anchor:r.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,n){t.preventParentScroll=function(v){v.stopPropagation();var s=v.currentTarget,a=s.scrollHeight>s.clientHeight;a||v.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var o=function(h,_){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(m[C]=y[C])},o(h,_)};return function(h,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");o(h,_);function m(){this.constructor=h}h.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),v=this&&this.__values||function(o){var h=typeof Symbol=="function"&&Symbol.iterator,_=h&&o[h],m=0;if(_)return _.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&m>=o.length&&(o=void 0),{value:o&&o[m++],done:!o}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},s=e("./lib/dom"),a=e("./lib/event"),d=e("./range").Range,i=e("./lib/scroll").preventParentScroll,r="ace_tooltip",u=function(){function o(h){this.isOpen=!1,this.$element=null,this.$parentNode=h}return o.prototype.$init=function(){return this.$element=s.createElement("div"),this.$element.className=r,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},o.prototype.getElement=function(){return this.$element||this.$init()},o.prototype.setText=function(h){this.getElement().textContent=h},o.prototype.setHtml=function(h){this.getElement().innerHTML=h},o.prototype.setPosition=function(h,_){this.getElement().style.left=h+"px",this.getElement().style.top=_+"px"},o.prototype.setClassName=function(h){s.addCssClass(this.getElement(),h)},o.prototype.setTheme=function(h){this.$element.className=r+" "+(h.isDark?"ace_dark ":"")+(h.cssClass||"")},o.prototype.show=function(h,_,m){h!=null&&this.setText(h),_!=null&&m!=null&&this.setPosition(_,m),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},o.prototype.hide=function(h){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=r,this.isOpen=!1)},o.prototype.getHeight=function(){return this.getElement().offsetHeight},o.prototype.getWidth=function(){return this.getElement().offsetWidth},o.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},o}(),l=function(){function o(){this.popups=[]}return o.prototype.addPopup=function(h){this.popups.push(h),this.updatePopups()},o.prototype.removePopup=function(h){var _=this.popups.indexOf(h);_!==-1&&(this.popups.splice(_,1),this.updatePopups())},o.prototype.updatePopups=function(){var h,_,m,y;this.popups.sort(function(M,S){return S.priority-M.priority});var C=[];try{for(var E=v(this.popups),D=E.next();!D.done;D=E.next()){var g=D.value,b=!0;try{for(var L=(m=void 0,v(C)),w=L.next();!w.done;w=L.next()){var T=w.value;if(this.doPopupsOverlap(T,g)){b=!1;break}}}catch(M){m={error:M}}finally{try{w&&!w.done&&(y=L.return)&&y.call(L)}finally{if(m)throw m.error}}b?C.push(g):g.hide()}}catch(M){h={error:M}}finally{try{D&&!D.done&&(_=E.return)&&_.call(E)}finally{if(h)throw h.error}}},o.prototype.doPopupsOverlap=function(h,_){var m=h.getElement().getBoundingClientRect(),y=_.getElement().getBoundingClientRect();return m.left<y.right&&m.right>y.left&&m.top<y.bottom&&m.bottom>y.top},o}(),p=new l;t.popupManager=p,t.Tooltip=u;var f=function(o){c(h,o);function h(_){_===void 0&&(_=document.body);var m=o.call(this,_)||this;m.timeout=void 0,m.lastT=0,m.idleTime=350,m.lastEvent=void 0,m.onMouseOut=m.onMouseOut.bind(m),m.onMouseMove=m.onMouseMove.bind(m),m.waitForHover=m.waitForHover.bind(m),m.hide=m.hide.bind(m);var y=m.getElement();return y.style.whiteSpace="pre-wrap",y.style.pointerEvents="auto",y.addEventListener("mouseout",m.onMouseOut),y.tabIndex=-1,y.addEventListener("blur",function(){y.contains(document.activeElement)||this.hide()}.bind(m)),y.addEventListener("wheel",i),m}return h.prototype.addToEditor=function(_){_.on("mousemove",this.onMouseMove),_.on("mousedown",this.hide),_.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},h.prototype.removeFromEditor=function(_){_.off("mousemove",this.onMouseMove),_.off("mousedown",this.hide),_.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},h.prototype.onMouseMove=function(_,m){this.lastEvent=_,this.lastT=Date.now();var y=m.$mouseHandler.isMousePressed;if(this.isOpen){var C=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(C.row,C.column)||y||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||y||(this.lastEvent=_,this.timeout=setTimeout(this.waitForHover,this.idleTime))},h.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var _=Date.now()-this.lastT;if(this.idleTime-_>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-_);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},h.prototype.isOutsideOfText=function(_){var m=_.editor,y=_.getDocumentPosition(),C=m.session.getLine(y.row);if(y.column==C.length){var E=m.renderer.pixelToScreenCoordinates(_.clientX,_.clientY),D=m.session.documentToScreenPosition(y.row,y.column);if(D.column!=E.column||D.row!=E.row)return!0}return!1},h.prototype.setDataProvider=function(_){this.$gatherData=_},h.prototype.showForRange=function(_,m,y,C){var E=10;if(!(C&&C!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var D=_.renderer;this.isOpen||(p.addPopup(this),this.$registerCloseEvents(),this.setTheme(D.theme)),this.isOpen=!0,this.addMarker(m,_.session),this.range=d.fromPoints(m.start,m.end);var g=D.textToScreenCoordinates(m.start.row,m.start.column),b=D.scroller.getBoundingClientRect();g.pageX<b.left&&(g.pageX=b.left);var L=this.getElement();L.innerHTML="",L.appendChild(y),L.style.maxHeight="",L.style.display="block";var w=L.clientHeight,T=L.clientWidth,M=window.innerHeight-g.pageY-D.lineHeight,S=!0;g.pageY-w<0&&g.pageY<M&&(S=!1),L.style.maxHeight=(S?g.pageY:M)-E+"px",L.style.top=S?"":g.pageY+D.lineHeight+"px",L.style.bottom=S?window.innerHeight-g.pageY+"px":"",L.style.left=Math.min(g.pageX,window.innerWidth-T-E)+"px"}},h.prototype.addMarker=function(_,m){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=m,this.marker=m&&m.addMarker(_,"ace_highlight-marker","text")},h.prototype.hide=function(_){!_&&document.activeElement==this.getElement()||_&&_.target&&(_.type!="keydown"||_.ctrlKey||_.metaKey)&&this.$element.contains(_.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,p.removePopup(this)))},h.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},h.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},h.prototype.onMouseOut=function(_){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!_.relatedTarget||this.getElement().contains(_.relatedTarget)||_&&_.currentTarget.contains(_.relatedTarget)||_.relatedTarget.classList.contains("ace_content")||this.hide())},h}(u);t.HoverTooltip=f});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var l=function(p,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(o[_]=h[_])},l(p,f)};return function(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");l(p,f);function o(){this.constructor=p}p.prototype=f===null?Object.create(f):(o.prototype=f.prototype,new o)}}(),v=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,f=p&&l[p],o=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&o>=l.length&&(l=void 0),{value:l&&l[o++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},s=e("../lib/dom"),a=e("../lib/event"),d=e("../tooltip").Tooltip,i=e("../config").nls;function r(l){var p=l.editor,f=p.renderer.$gutterLayer,o=new u(p);l.editor.setDefaultHandler("guttermousedown",function(E){if(!(!p.isFocused()||E.getButton()!=0)){var D=f.getRegion(E);if(D!="foldWidgets"){var g=E.getDocumentPosition().row,b=p.session.selection;if(E.getShiftKey())b.selectTo(g,0);else{if(E.domEvent.detail==2)return p.selectAll(),E.preventDefault();l.$clickSelection=p.selection.getLineRange(g)}return l.setState("selectByLines"),l.captureMouse(E),E.preventDefault()}}});var h,_;function m(){var E=_.getDocumentPosition().row,D=p.session.getLength();if(E==D){var g=p.renderer.pixelToScreenCoordinates(0,_.y).row,b=_.$pos;if(g>p.session.documentToScreenRow(b.row,b.column))return y()}if(o.showTooltip(E),!!o.isOpen)if(p.on("mousewheel",y),l.$tooltipFollowsMouse)C(_);else{var L=_.getGutterRow(),w=f.$lines.get(L);if(w){var T=w.element.querySelector(".ace_gutter_annotation"),M=T.getBoundingClientRect(),S=o.getElement().style;S.left=M.right+"px",S.top=M.bottom+"px"}else C(_)}}function y(){h&&(h=clearTimeout(h)),o.isOpen&&(o.hideTooltip(),p.off("mousewheel",y))}function C(E){o.setPosition(E.x,E.y)}l.editor.setDefaultHandler("guttermousemove",function(E){var D=E.domEvent.target||E.domEvent.srcElement;if(s.hasCssClass(D,"ace_fold-widget"))return y();o.isOpen&&l.$tooltipFollowsMouse&&C(E),_=E,!h&&(h=setTimeout(function(){h=null,_&&!l.isMousePressed?m():y()},50))}),a.addListener(p.renderer.$gutter,"mouseout",function(E){_=null,!(!o.isOpen||h)&&(h=setTimeout(function(){h=null,y()},50))},p),p.on("changeSession",y),p.on("input",y)}t.GutterHandler=r;var u=function(l){c(p,l);function p(f){var o=l.call(this,f.container)||this;return o.editor=f,o}return p.prototype.setPosition=function(f,o){var h=window.innerWidth||document.documentElement.clientWidth,_=window.innerHeight||document.documentElement.clientHeight,m=this.getWidth(),y=this.getHeight();f+=15,o+=15,f+m>h&&(f-=f+m-h),o+y>_&&(o-=20+y),d.prototype.setPosition.call(this,f,o)},Object.defineProperty(p,"annotationLabels",{get:function(){return{error:{singular:i("error"),plural:i("errors")},warning:{singular:i("warning"),plural:i("warnings")},info:{singular:i("information message"),plural:i("information messages")}}},enumerable:!1,configurable:!0}),p.prototype.showTooltip=function(f){var o=this.editor.renderer.$gutterLayer,h=o.$annotations[f],_;h?_={text:Array.from(h.text),type:Array.from(h.type)}:_={text:[],type:[]};var m=o.session.getFoldLine(f);if(m&&o.$showFoldedAnnotations){for(var y={error:[],warning:[],info:[]},C,E=f+1;E<=m.end.row;E++)if(o.$annotations[E])for(var D=0;D<o.$annotations[E].text.length;D++){var g=o.$annotations[E].type[D];if(y[g].push(o.$annotations[E].text[D]),g==="error"){C="error_fold";continue}if(g==="warning"){C="warning_fold";continue}}if(C==="error_fold"||C==="warning_fold"){var b="".concat(p.annotationsToSummaryString(y)," in folded code.");_.text.push(b),_.type.push(C)}}if(_.text.length===0)return this.hide();for(var L={error:[],warning:[],info:[]},w=o.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",E=0;E<_.text.length;E++){var T="<span class='ace_".concat(_.type[E]," ").concat(w,"' aria-label='").concat(p.annotationLabels[_.type[E].replace("_fold","")].singular,"' role=img> </span> ").concat(_.text[E]);L[_.type[E].replace("_fold","")].push(T)}var M=[].concat(L.error,L.warning,L.info).join("<br>");this.setHtml(M),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},p.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},p.annotationsToSummaryString=function(f){var o,h,_=[],m=["error","warning","info"];try{for(var y=v(m),C=y.next();!C.done;C=y.next()){var E=C.value;if(f[E].length){var D=f[E].length===1?p.annotationLabels[E].singular:p.annotationLabels[E].plural;_.push("".concat(f[E].length," ").concat(D))}}}catch(g){o={error:g}}finally{try{C&&!C.done&&(h=y.return)&&h.call(y)}finally{if(o)throw o.error}}return _.join(", ")},p}(d);t.GutterTooltip=u});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("../lib/event"),v=e("../lib/useragent"),s=function(){function a(d,i){this.speed,this.wheelX,this.wheelY,this.domEvent=d,this.editor=i,this.x=this.clientX=d.clientX,this.y=this.clientY=d.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return a.prototype.stopPropagation=function(){c.stopPropagation(this.domEvent),this.propagationStopped=!0},a.prototype.preventDefault=function(){c.preventDefault(this.domEvent),this.defaultPrevented=!0},a.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},a.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},a.prototype.getGutterRow=function(){var d=this.getDocumentPosition().row,i=this.editor.session.documentToScreenRow(d,0),r=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return i-r},a.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var d=this.editor,i=d.getSelectionRange();if(i.isEmpty())this.$inSelection=!1;else{var r=this.getDocumentPosition();this.$inSelection=i.contains(r.row,r.column)}return this.$inSelection},a.prototype.getButton=function(){return c.getButton(this.domEvent)},a.prototype.getShiftKey=function(){return this.domEvent.shiftKey},a.prototype.getAccelKey=function(){return v.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},a}();t.MouseEvent=s});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=e("../lib/event"),s=e("../lib/useragent"),a=200,d=200,i=5;function r(l){var p=l.editor,f=c.createElement("div");f.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",f.textContent="\xA0";var o=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];o.forEach(function(U){l[U]=this[U]},this),p.on("mousedown",this.onMouseDown.bind(l));var h=p.container,_,m,y,C,E,D,g=0,b,L,w,T,M;this.onDragStart=function(U){if(this.cancelDrag||!h.draggable){var q=this;return setTimeout(function(){q.startSelect(),q.captureMouse(U)},0),U.preventDefault()}E=p.getSelectionRange();var N=U.dataTransfer;N.effectAllowed=p.getReadOnly()?"copy":"copyMove",p.container.appendChild(f),N.setDragImage&&N.setDragImage(f,0,0),setTimeout(function(){p.container.removeChild(f)}),N.clearData(),N.setData("Text",p.session.getTextRange()),L=!0,this.setState("drag")},this.onDragEnd=function(U){if(h.draggable=!1,L=!1,this.setState(null),!p.getReadOnly()){var q=U.dataTransfer.dropEffect;!b&&q=="move"&&p.session.remove(p.getSelectionRange()),p.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(U){if(!(p.getReadOnly()||!k(U.dataTransfer)))return m=U.clientX,y=U.clientY,_||R(),g++,U.dataTransfer.dropEffect=b=H(U),v.preventDefault(U)},this.onDragOver=function(U){if(!(p.getReadOnly()||!k(U.dataTransfer)))return m=U.clientX,y=U.clientY,_||(R(),g++),I!==null&&(I=null),U.dataTransfer.dropEffect=b=H(U),v.preventDefault(U)},this.onDragLeave=function(U){if(g--,g<=0&&_)return A(),b=null,v.preventDefault(U)},this.onDrop=function(U){if(D){var q=U.dataTransfer;if(L)switch(b){case"move":E.contains(D.row,D.column)?E={start:D,end:D}:E=p.moveText(E,D);break;case"copy":E=p.moveText(E,D,!0);break}else{var N=q.getData("Text");E={start:D,end:p.session.insert(D,N)},p.focus(),b=null}return A(),v.preventDefault(U)}},v.addListener(h,"dragstart",this.onDragStart.bind(l),p),v.addListener(h,"dragend",this.onDragEnd.bind(l),p),v.addListener(h,"dragenter",this.onDragEnter.bind(l),p),v.addListener(h,"dragover",this.onDragOver.bind(l),p),v.addListener(h,"dragleave",this.onDragLeave.bind(l),p),v.addListener(h,"drop",this.onDrop.bind(l),p);function S(U,q){var N=Date.now(),K=!q||U.row!=q.row,O=!q||U.column!=q.column;if(!T||K||O)p.moveCursorToPosition(U),T=N,M={x:m,y};else{var B=u(M.x,M.y,m,y);B>i?T=null:N-T>=d&&(p.renderer.scrollCursorIntoView(),T=null)}}function F(U,q){var N=Date.now(),K=p.renderer.layerConfig.lineHeight,O=p.renderer.layerConfig.characterWidth,B=p.renderer.scroller.getBoundingClientRect(),W={x:{left:m-B.left,right:B.right-m},y:{top:y-B.top,bottom:B.bottom-y}},P=Math.min(W.x.left,W.x.right),X=Math.min(W.y.top,W.y.bottom),J={row:U.row,column:U.column};P/O<=2&&(J.column+=W.x.left<W.x.right?-3:2),X/K<=1&&(J.row+=W.y.top<W.y.bottom?-1:1);var ve=U.row!=J.row,Ee=U.column!=J.column,De=!q||U.row!=q.row;ve||Ee&&!De?w?N-w>=a&&p.renderer.scrollCursorIntoView(J):w=N:w=null}function x(){var U=D;D=p.renderer.screenToTextCoordinates(m,y),S(D,U),F(D,U)}function R(){E=p.selection.toOrientedRange(),_=p.session.addMarker(E,"ace_selection",p.getSelectionStyle()),p.clearSelection(),p.isFocused()&&p.renderer.$cursorLayer.setBlinking(!1),clearInterval(C),x(),C=setInterval(x,20),g=0,v.addListener(document,"mousemove",$)}function A(){clearInterval(C),p.session.removeMarker(_),_=null,p.selection.fromOrientedRange(E),p.isFocused()&&!L&&p.$resetCursorStyle(),E=null,D=null,g=0,w=null,T=null,v.removeListener(document,"mousemove",$)}var I=null;function $(){I==null&&(I=setTimeout(function(){I!=null&&_&&A()},20))}function k(U){var q=U.types;return!q||Array.prototype.some.call(q,function(N){return N=="text/plain"||N=="Text"})}function H(U){var q=["copy","copymove","all","uninitialized"],N=["move","copymove","linkmove","all","uninitialized"],K=s.isMac?U.altKey:U.ctrlKey,O="uninitialized";try{O=U.dataTransfer.effectAllowed.toLowerCase()}catch{}var B="none";return K&&q.indexOf(O)>=0?B="copy":N.indexOf(O)>=0?B="move":q.indexOf(O)>=0&&(B="copy"),B}}(function(){this.dragWait=function(){var l=Date.now()-this.mousedownEvent.time;l>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var l=this.editor.container;l.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(l){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var l=this.editor,p=l.container;p.draggable=!0,l.renderer.$cursorLayer.setBlinking(!1),l.setStyle("ace_dragging");var f=s.isWin?"default":"move";l.renderer.setCursorStyle(f),this.setState("dragReady")},this.onMouseDrag=function(l){var p=this.editor.container;if(s.isIE&&this.state=="dragReady"){var f=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);f>3&&p.dragDrop()}if(this.state==="dragWait"){var f=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);f>0&&(p.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(l){if(this.$dragEnabled){this.mousedownEvent=l;var p=this.editor,f=l.inSelection(),o=l.getButton(),h=l.domEvent.detail||1;if(h===1&&o===0&&f){if(l.editor.inMultiSelectMode&&(l.getAccelKey()||l.getShiftKey()))return;this.mousedownEvent.time=Date.now();var _=l.domEvent.target||l.domEvent.srcElement;if("unselectable"in _&&(_.unselectable="on"),p.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var m=p.container;m.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(l,this.onMouseDrag.bind(this)),l.defaultPrevented=!0}}}}).call(r.prototype);function u(l,p,f,o){return Math.sqrt(Math.pow(f-l,2)+Math.pow(o-p,2))}t.DragdropHandler=r});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var c=e("./mouse_event").MouseEvent,v=e("../lib/event"),s=e("../lib/dom");t.addTouchListeners=function(a,d){var i="scroll",r,u,l,p,f,o,h=0,_,m=0,y=0,C=0,E,D;function g(){var S=window.navigator&&window.navigator.clipboard,F=!1,x=function(){var A=d.getCopyText(),I=d.session.getUndoManager().hasUndo();D.replaceChild(s.buildDom(F?["span",!A&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],A&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],A&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],S&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],I&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),D.firstChild)},R=function(A){var I=A.target.getAttribute("action");if(I=="more"||!F)return F=!F,x();I=="paste"?S.readText().then(function($){d.execCommand(I,$)}):I&&((I=="cut"||I=="copy")&&(S?S.writeText(d.getCopyText()):document.execCommand("copy")),d.execCommand(I)),D.firstChild.style.display="none",F=!1,I!="openCommandPalette"&&d.focus()};D=s.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(A){i="menu",A.stopPropagation(),A.preventDefault(),d.textInput.focus()},ontouchend:function(A){A.stopPropagation(),A.preventDefault(),R(A)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],d.container)}function b(){D||g();var S=d.selection.cursor,F=d.renderer.textToScreenCoordinates(S.row,S.column),x=d.renderer.textToScreenCoordinates(0,0).pageX,R=d.renderer.scrollLeft,A=d.container.getBoundingClientRect();D.style.top=F.pageY-A.top-3+"px",F.pageX-A.left<A.width-70?(D.style.left="",D.style.right="10px"):(D.style.right="",D.style.left=x+R-A.left+"px"),D.style.display="",D.firstChild.style.display="none",d.on("input",L)}function L(S){D&&(D.style.display="none"),d.off("input",L)}function w(){f=null,clearTimeout(f);var S=d.selection.getRange(),F=S.contains(_.row,_.column);(S.isEmpty()||!F)&&(d.selection.moveToPosition(_),d.selection.selectWord()),i="wait",b()}function T(){f=null,clearTimeout(f),d.selection.moveToPosition(_);var S=m>=2?d.selection.getLineRange(_.row):d.session.getBracketRange(_);S&&!S.isEmpty()?d.selection.setRange(S):d.selection.selectWord(),i="wait"}v.addListener(a,"contextmenu",function(S){if(E){var F=d.textInput.getElement();F.focus()}},d),v.addListener(a,"touchstart",function(S){var F=S.touches;if(f||F.length>1){clearTimeout(f),f=null,l=-1,i="zoom";return}E=d.$mouseHandler.isMousePressed=!0;var x=d.renderer.layerConfig.lineHeight,R=d.renderer.layerConfig.lineHeight,A=S.timeStamp;p=A;var I=F[0],$=I.clientX,k=I.clientY;Math.abs(r-$)+Math.abs(u-k)>x&&(l=-1),r=S.clientX=$,u=S.clientY=k,y=C=0;var H=new c(S,d);if(_=H.getDocumentPosition(),A-l<500&&F.length==1&&!h)m++,S.preventDefault(),S.button=0,T();else{m=0;var U=d.selection.cursor,q=d.selection.isEmpty()?U:d.selection.anchor,N=d.renderer.$cursorLayer.getPixelPosition(U,!0),K=d.renderer.$cursorLayer.getPixelPosition(q,!0),O=d.renderer.scroller.getBoundingClientRect(),B=d.renderer.layerConfig.offset,W=d.renderer.scrollLeft,P=function(ve,Ee){return ve=ve/R,Ee=Ee/x-.75,ve*ve+Ee*Ee};if(S.clientX<O.left){i="zoom";return}var X=P(S.clientX-O.left-N.left+W,S.clientY-O.top-N.top+B),J=P(S.clientX-O.left-K.left+W,S.clientY-O.top-K.top+B);X<3.5&&J<3.5&&(i=X>J?"cursor":"anchor"),J<3.5?i="anchor":X<3.5?i="cursor":i="scroll",f=setTimeout(w,450)}l=A},d),v.addListener(a,"touchend",function(S){E=d.$mouseHandler.isMousePressed=!1,o&&clearInterval(o),i=="zoom"?(i="",h=0):f?(d.selection.moveToPosition(_),h=0,b()):i=="scroll"?(M(),L()):b(),clearTimeout(f),f=null},d),v.addListener(a,"touchmove",function(S){f&&(clearTimeout(f),f=null);var F=S.touches;if(!(F.length>1||i=="zoom")){var x=F[0],R=r-x.clientX,A=u-x.clientY;if(i=="wait")if(R*R+A*A>4)i="cursor";else return S.preventDefault();r=x.clientX,u=x.clientY,S.clientX=x.clientX,S.clientY=x.clientY;var I=S.timeStamp,$=I-p;if(p=I,i=="scroll"){var k=new c(S,d);k.speed=1,k.wheelX=R,k.wheelY=A,10*Math.abs(R)<Math.abs(A)&&(R=0),10*Math.abs(A)<Math.abs(R)&&(A=0),$!=0&&(y=R/$,C=A/$),d._emit("mousewheel",k),k.propagationStopped||(y=C=0)}else{var H=new c(S,d),U=H.getDocumentPosition();i=="cursor"?d.selection.moveCursorToPosition(U):i=="anchor"&&d.selection.setSelectionAnchor(U.row,U.column),d.renderer.scrollCursorIntoView(U),S.preventDefault()}}},d);function M(){h+=60,o=setInterval(function(){h--<=0&&(clearInterval(o),o=null),Math.abs(y)<.01&&(y=0),Math.abs(C)<.01&&(C=0),h<20&&(y=.9*y),h<20&&(C=.9*C);var S=d.session.getScrollTop();d.renderer.scrollBy(10*y,10*C),S==d.session.getScrollTop()&&(h=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var c=e("../lib/event"),v=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,a=e("./default_gutter_handler").GutterHandler,d=e("./mouse_event").MouseEvent,i=e("./dragdrop_handler").DragdropHandler,r=e("./touch_handler").addTouchListeners,u=e("../config"),l=function(){function p(f){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var o=this;this.editor=f,new s(this),new a(this),new i(this);var h=function(y){var C=!document.hasFocus||!document.hasFocus()||!f.isFocused()&&document.activeElement==(f.textInput&&f.textInput.getElement());C&&window.focus(),f.focus(),setTimeout(function(){f.isFocused()||f.focus()})},_=f.renderer.getMouseEventTarget();c.addListener(_,"click",this.onMouseEvent.bind(this,"click"),f),c.addListener(_,"mousemove",this.onMouseMove.bind(this,"mousemove"),f),c.addMultiMouseDownListener([_,f.renderer.scrollBarV&&f.renderer.scrollBarV.inner,f.renderer.scrollBarH&&f.renderer.scrollBarH.inner,f.textInput&&f.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",f),c.addMouseWheelListener(f.container,this.onMouseWheel.bind(this,"mousewheel"),f),r(f.container,f);var m=f.renderer.$gutter;c.addListener(m,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),f),c.addListener(m,"click",this.onMouseEvent.bind(this,"gutterclick"),f),c.addListener(m,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),f),c.addListener(m,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),f),c.addListener(_,"mousedown",h,f),c.addListener(m,"mousedown",h,f),v.isIE&&f.renderer.scrollBarV&&(c.addListener(f.renderer.scrollBarV.element,"mousedown",h,f),c.addListener(f.renderer.scrollBarH.element,"mousedown",h,f)),f.on("mousemove",function(y){if(!(o.state||o.$dragDelay||!o.$dragEnabled)){var C=f.renderer.screenToTextCoordinates(y.x,y.y),E=f.session.selection.getRange(),D=f.renderer;!E.isEmpty()&&E.insideStart(C.row,C.column)?D.setCursorStyle("default"):D.setCursorStyle("")}},f)}return p.prototype.onMouseEvent=function(f,o){this.editor.session&&this.editor._emit(f,new d(o,this.editor))},p.prototype.onMouseMove=function(f,o){var h=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!h||!h.length||this.editor._emit(f,new d(o,this.editor))},p.prototype.onMouseWheel=function(f,o){var h=new d(o,this.editor);h.speed=this.$scrollSpeed*2,h.wheelX=o.wheelX,h.wheelY=o.wheelY,this.editor._emit(f,h)},p.prototype.setState=function(f){this.state=f},p.prototype.captureMouse=function(f,o){this.x=f.x,this.y=f.y,this.isMousePressed=!0;var h=this.editor,_=this.editor.renderer;_.$isMousePressed=!0;var m=this,y=function(b){if(b){if(v.isWebKit&&!b.which&&m.releaseMouse)return m.releaseMouse();m.x=b.clientX,m.y=b.clientY,o&&o(b),m.mouseEvent=new d(b,m.editor),m.$mouseMoved=!0}},C=function(b){h.off("beforeEndOperation",D),clearInterval(g),h.session&&E(),m[m.state+"End"]&&m[m.state+"End"](b),m.state="",m.isMousePressed=_.$isMousePressed=!1,_.$keepTextAreaAtCursor&&_.$moveTextAreaToCursor(),m.$onCaptureMouseMove=m.releaseMouse=null,b&&m.onMouseEvent("mouseup",b),h.endOperation()},E=function(){m[m.state]&&m[m.state](),m.$mouseMoved=!1};if(v.isOldIE&&f.domEvent.type=="dblclick")return setTimeout(function(){C(f)});var D=function(b){m.releaseMouse&&h.curOp.command.name&&h.curOp.selectionChanged&&(m[m.state+"End"]&&m[m.state+"End"](),m.state="",m.releaseMouse())};h.on("beforeEndOperation",D),h.startOperation({command:{name:"mouse"}}),m.$onCaptureMouseMove=y,m.releaseMouse=c.capture(this.editor.container,y,C);var g=setInterval(E,20)},p.prototype.cancelContextMenu=function(){var f=function(o){o&&o.domEvent&&o.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",f),o&&o.domEvent&&c.stopEvent(o.domEvent))}.bind(this);setTimeout(f,10),this.editor.on("nativecontextmenu",f)},p.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},p}();l.prototype.releaseMouse=null,u.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:v.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=function(){function s(a){a.on("click",function(d){var i=d.getDocumentPosition(),r=a.session,u=r.getFoldAt(i.row,i.column,1);u&&(d.getAccelKey()?r.removeFold(u):r.expandFold(u),d.stop());var l=d.domEvent&&d.domEvent.target;l&&c.hasCssClass(l,"ace_inline_button")&&c.hasCssClass(l,"ace_toggle_wrap")&&(r.setOption("wrap",!r.getUseWrapMode()),a.renderer.scrollCursorIntoView())}),a.on("gutterclick",function(d){var i=a.renderer.$gutterLayer.getRegion(d);if(i=="foldWidgets"){var r=d.getDocumentPosition().row,u=a.session;u.foldWidgets&&u.foldWidgets[r]&&a.session.onFoldWidgetClick(r,d),a.isFocused()||a.focus(),d.stop()}}),a.on("gutterdblclick",function(d){var i=a.renderer.$gutterLayer.getRegion(d);if(i=="foldWidgets"){var r=d.getDocumentPosition().row,u=a.session,l=u.getParentFoldRangeData(r,!0),p=l.range||l.firstRange;if(p){r=p.start.row;var f=u.getFoldAt(r,u.getLine(r).length,1);f?u.removeFold(f):(u.addFold("...",p),a.renderer.scrollCursorIntoView({row:p.start.row,column:0}))}d.stop()}})}return s}();t.FoldHandler=v});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var c=e("../lib/keys"),v=e("../lib/event"),s=function(){function a(d){this.$editor=d,this.$data={editor:d},this.$handlers=[],this.setDefaultHandler(d.commands)}return a.prototype.setDefaultHandler=function(d){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=d,this.addKeyboardHandler(d,0)},a.prototype.setKeyboardHandler=function(d){var i=this.$handlers;if(i[i.length-1]!=d){for(;i[i.length-1]&&i[i.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(i[i.length-1]);this.addKeyboardHandler(d,1)}},a.prototype.addKeyboardHandler=function(d,i){if(d){typeof d=="function"&&!d.handleKeyboard&&(d.handleKeyboard=d);var r=this.$handlers.indexOf(d);r!=-1&&this.$handlers.splice(r,1),i==null?this.$handlers.push(d):this.$handlers.splice(i,0,d),r==-1&&d.attach&&d.attach(this.$editor)}},a.prototype.removeKeyboardHandler=function(d){var i=this.$handlers.indexOf(d);return i==-1?!1:(this.$handlers.splice(i,1),d.detach&&d.detach(this.$editor),!0)},a.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},a.prototype.getStatusText=function(){var d=this.$data,i=d.editor;return this.$handlers.map(function(r){return r.getStatusText&&r.getStatusText(i,d)||""}).filter(Boolean).join(" ")},a.prototype.$callKeyboardHandlers=function(d,i,r,u){for(var l,p=!1,f=this.$editor.commands,o=this.$handlers.length;o--&&(l=this.$handlers[o].handleKeyboard(this.$data,d,i,r,u),!(!(!l||!l.command)&&(l.command=="null"?p=!0:p=f.exec(l.command,this.$editor,l.args,u),p&&u&&d!=-1&&l.passEvent!=!0&&l.command.passEvent!=!0&&v.stopEvent(u),p))););return!p&&d==-1&&(l={command:"insertstring"},p=f.exec("insertstring",this.$editor,i)),p&&this.$editor._signal&&this.$editor._signal("keyboardActivity",l),p},a.prototype.onCommandKey=function(d,i,r){var u=c.keyCodeToString(r);return this.$callKeyboardHandlers(i,u,r,d)},a.prototype.onTextInput=function(d){return this.$callKeyboardHandlers(-1,d)},a}();t.KeyBinding=s});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var c=["\u0621","\u0641"],v=["\u063A","\u064A"],s=0,a=0,d=!1,i=!1,r=!1,u=!1,l=!1,p=!1,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],o=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,_=1,m=0,y=1,C=2,E=3,D=4,g=5,b=6,L=7,w=8,T=9,M=10,S=11,F=12,x=13,R=14,A=15,I=16,$=17,k=18,H=[k,k,k,k,k,k,k,k,k,b,g,b,w,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,g,g,g,b,w,D,D,S,S,S,D,D,D,D,D,M,T,M,T,T,C,C,C,C,C,C,C,C,C,C,T,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,k,k,k,k,k,k,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,T,D,S,S,S,S,D,D,D,D,m,D,D,k,D,D,S,S,C,C,D,m,D,D,D,C,m,D,D,D,D,D],U=[w,w,w,w,w,w,w,w,w,w,w,k,k,k,m,y,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,w,g,x,R,A,I,$,T,S,S,S,S,S,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,T,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,w];function q(W,P,X,J){var ve=s?o:f,Ee=null,De=null,se=null,we=0,wt=null,Jt=null,Wt=-1,Ze=null,ce=null,he=[];if(!J)for(Ze=0,J=[];Ze<X;Ze++)J[Ze]=O(W[Ze]);for(a=s,d=!1,i=!1,r=!1,u=!1,ce=0;ce<X;ce++){if(Ee=we,he[ce]=De=K(W,J,he,ce),we=ve[Ee][De],wt=we&240,we&=15,P[ce]=se=ve[we][5],wt>0)if(wt==16){for(Ze=Wt;Ze<ce;Ze++)P[Ze]=1;Wt=-1}else Wt=-1;if(Jt=ve[we][6],Jt)Wt==-1&&(Wt=ce);else if(Wt>-1){for(Ze=Wt;Ze<ce;Ze++)P[Ze]=se;Wt=-1}J[ce]==g&&(P[ce]=0),a|=se}if(u){for(Ze=0;Ze<X;Ze++)if(J[Ze]==b){P[Ze]=s;for(var le=Ze-1;le>=0&&J[le]==w;le--)P[le]=s}}}function N(W,P,X){if(!(a<W)){if(W==1&&s==_&&!r){X.reverse();return}for(var J=X.length,ve=0,Ee,De,se,we;ve<J;){if(P[ve]>=W){for(Ee=ve+1;Ee<J&&P[Ee]>=W;)Ee++;for(De=ve,se=Ee-1;De<se;De++,se--)we=X[De],X[De]=X[se],X[se]=we;ve=Ee}ve++}}}function K(W,P,X,J){var ve=P[J],Ee,De,se,we;switch(ve){case m:case y:d=!1;case D:case E:return ve;case C:return d?E:C;case L:return d=!0,i=!0,y;case w:return D;case T:return J<1||J+1>=P.length||(Ee=X[J-1])!=C&&Ee!=E||(De=P[J+1])!=C&&De!=E?D:(d&&(De=E),De==Ee?De:D);case M:return Ee=J>0?X[J-1]:g,Ee==C&&J+1<P.length&&P[J+1]==C?C:D;case S:if(J>0&&X[J-1]==C)return C;if(d)return D;for(we=J+1,se=P.length;we<se&&P[we]==S;)we++;return we<se&&P[we]==C?C:D;case F:for(se=P.length,we=J+1;we<se&&P[we]==F;)we++;if(we<se){var wt=W[J],Jt=wt>=1425&&wt<=2303||wt==64286;if(Ee=P[we],Jt&&(Ee==y||Ee==L))return y}return J<1||(Ee=P[J-1])==g?D:X[J-1];case g:return d=!1,r=!0,s;case b:return u=!0,D;case x:case R:case I:case $:case A:d=!1;case k:return D}}function O(W){var P=W.charCodeAt(0),X=P>>8;return X==0?P>191?m:H[P]:X==5?/[\u0591-\u05f4]/.test(W)?y:m:X==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(W)?F:/[\u0660-\u0669\u066b-\u066c]/.test(W)?E:P==1642?S:/[\u06f0-\u06f9]/.test(W)?C:L:X==32&&P<=8287?U[P&255]:X==254&&P>=65136?L:D}function B(W){return W>="\u064B"&&W<="\u0655"}t.L=m,t.R=y,t.EN=C,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(W,P,X){if(W.length<2)return{};var J=W.split(""),ve=new Array(J.length),Ee=new Array(J.length),De=[];s=X?_:h,q(J,De,J.length,P);for(var se=0;se<ve.length;ve[se]=se,se++);N(2,De,ve),N(1,De,ve);for(var se=0;se<ve.length-1;se++)P[se]===E?De[se]=t.AN:De[se]===y&&(P[se]>L&&P[se]<x||P[se]===D||P[se]===k)?De[se]=t.ON_R:se>0&&J[se-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(J[se])&&(De[se-1]=De[se]=t.R_H,se++);J[J.length-1]===t.DOT&&(De[J.length-1]=t.B),J[0]==="\u202B"&&(De[0]=t.RLE);for(var se=0;se<ve.length;se++)Ee[se]=De[ve[se]];return{logicalFromVisual:ve,bidiLevels:Ee}},t.hasBidiCharacters=function(W,P){for(var X=!1,J=0;J<W.length;J++)P[J]=O(W.charAt(J)),!X&&(P[J]==y||P[J]==L||P[J]==E)&&(X=!0);return X},t.getVisualFromLogicalIdx=function(W,P){for(var X=0;X<P.logicalFromVisual.length;X++)if(P.logicalFromVisual[X]==W)return X;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var c=e("./lib/bidiutil"),v=e("./lib/lang"),s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(){function d(i){this.session=i,this.bidiMap={},this.currentRow=null,this.bidiUtil=c,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=s.test(i.getValue())}return d.prototype.isBidiRow=function(i,r,u){return this.seenBidi?(i!==this.currentRow&&(this.currentRow=i,this.updateRowLine(r,u),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},d.prototype.onChange=function(i){this.seenBidi?this.currentRow=null:i.action=="insert"&&s.test(i.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},d.prototype.getDocumentRow=function(){var i=0,r=this.session.$screenRowCache;if(r.length){var u=this.session.$getRowCacheIndex(r,this.currentRow);u>=0&&(i=this.session.$docRowCache[u])}return i},d.prototype.getSplitIndex=function(){var i=0,r=this.session.$screenRowCache;if(r.length)for(var u,l=this.session.$getRowCacheIndex(r,this.currentRow);this.currentRow-i>0&&(u=this.session.$getRowCacheIndex(r,this.currentRow-i-1),u===l);)l=u,i++;else i=this.currentRow;return i},d.prototype.updateRowLine=function(i,r){i===void 0&&(i=this.getDocumentRow());var u=i===this.session.getLength()-1,l=u?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(i),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var p=this.session.$wrapData[i];p&&(r===void 0&&(r=this.getSplitIndex()),r>0&&p.length?(this.wrapIndent=p.indent,this.wrapOffset=this.wrapIndent*this.charWidths[c.L],this.line=r<p.length?this.line.substring(p[r-1],p[r]):this.line.substring(p[p.length-1])):this.line=this.line.substring(0,p[r]),r==p.length&&(this.line+=this.showInvisibles?l:c.DOT))}else this.line+=this.showInvisibles?l:c.DOT;var f=this.session,o=0,h;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(_,m){return _==="	"||f.isFullWidth(_.charCodeAt(0))?(h=_==="	"?f.getScreenTabSize(m+o):2,o+=h-1,v.stringRepeat(c.DOT,h)):_}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==c.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},d.prototype.updateBidiMap=function(){var i=[];c.hasBidiCharacters(this.line,i)||this.isRtlDir?this.bidiMap=c.doBidiReorder(this.line,i,this.isRtlDir):this.bidiMap={}},d.prototype.markAsDirty=function(){this.currentRow=null},d.prototype.updateCharacterWidths=function(i){if(this.characterWidth!==i.$characterSize.width){this.fontMetrics=i;var r=this.characterWidth=i.$characterSize.width,u=i.$measureCharWidth("\u05D4");this.charWidths[c.L]=this.charWidths[c.EN]=this.charWidths[c.ON_R]=r,this.charWidths[c.R]=this.charWidths[c.AN]=u,this.charWidths[c.R_H]=u*.45,this.charWidths[c.B]=this.charWidths[c.RLE]=0,this.currentRow=null}},d.prototype.setShowInvisibles=function(i){this.showInvisibles=i,this.currentRow=null},d.prototype.setEolChar=function(i){this.EOL=i},d.prototype.setContentWidth=function(i){this.contentWidth=i},d.prototype.isRtlLine=function(i){return this.$isRtl?!0:i!=null?this.session.getLine(i).charAt(0)==this.RLE:this.isRtlDir},d.prototype.setRtlDirection=function(i,r){for(var u=i.getCursorPosition(),l=i.selection.getSelectionAnchor().row;l<=u.row;l++)!r&&i.session.getLine(l).charAt(0)===i.session.$bidiHandler.RLE?i.session.doc.removeInLine(l,0,1):r&&i.session.getLine(l).charAt(0)!==i.session.$bidiHandler.RLE&&i.session.doc.insert({column:0,row:l},i.session.$bidiHandler.RLE)},d.prototype.getPosLeft=function(i){i-=this.wrapIndent;var r=this.line.charAt(0)===this.RLE?1:0,u=i>r?this.session.getOverwrite()?i:i-1:r,l=c.getVisualFromLogicalIdx(u,this.bidiMap),p=this.bidiMap.bidiLevels,f=0;!this.session.getOverwrite()&&i<=r&&p[l]%2!==0&&l++;for(var o=0;o<l;o++)f+=this.charWidths[p[o]];return!this.session.getOverwrite()&&i>r&&p[l]%2===0&&(f+=this.charWidths[p[l]]),this.wrapIndent&&(f+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(f+=this.rtlLineOffset),f},d.prototype.getSelections=function(i,r){var u=this.bidiMap,l=u.bidiLevels,p,f=[],o=0,h=Math.min(i,r)-this.wrapIndent,_=Math.max(i,r)-this.wrapIndent,m=!1,y=!1,C=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var E,D=0;D<l.length;D++)E=u.logicalFromVisual[D],p=l[D],m=E>=h&&E<_,m&&!y?C=o:!m&&y&&f.push({left:C,width:o-C}),o+=this.charWidths[p],y=m;if(m&&D===l.length&&f.push({left:C,width:o-C}),this.isRtlDir)for(var g=0;g<f.length;g++)f[g].left+=this.rtlLineOffset;return f},d.prototype.offsetToCol=function(u){this.isRtlDir&&(u-=this.rtlLineOffset);var r=0,u=Math.max(u,0),l=0,p=0,f=this.bidiMap.bidiLevels,o=this.charWidths[f[p]];for(this.wrapIndent&&(u-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);u>l+o/2;){if(l+=o,p===f.length-1){o=0;break}o=this.charWidths[f[++p]]}return p>0&&f[p-1]%2!==0&&f[p]%2===0?(u<l&&p--,r=this.bidiMap.logicalFromVisual[p]):p>0&&f[p-1]%2===0&&f[p]%2!==0?r=1+(u>l?this.bidiMap.logicalFromVisual[p]:this.bidiMap.logicalFromVisual[p-1]):this.isRtlDir&&p===f.length-1&&o===0&&f[p-1]%2===0||!this.isRtlDir&&p===0&&f[p]%2!==0?r=1+this.bidiMap.logicalFromVisual[p]:(p>0&&f[p-1]%2!==0&&o!==0&&p--,r=this.bidiMap.logicalFromVisual[p]),r===0&&this.isRtlDir&&r++,r+this.wrapIndent},d}();t.BidiHandler=a});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,d=function(){function i(r){this.session=r,this.doc=r.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var u=this;this.cursor.on("change",function(l){u.$cursorChanged=!0,u.$silent||u._emit("changeCursor"),!u.$isEmpty&&!u.$silent&&u._emit("changeSelection"),!u.$keepDesiredColumnOnChange&&l.old.column!=l.value.column&&(u.$desiredColumn=null)}),this.anchor.on("change",function(){u.$anchorChanged=!0,!u.$isEmpty&&!u.$silent&&u._emit("changeSelection")})}return i.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},i.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},i.prototype.getCursor=function(){return this.lead.getPosition()},i.prototype.setAnchor=function(r,u){this.$isEmpty=!1,this.anchor.setPosition(r,u)},i.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},i.prototype.getSelectionLead=function(){return this.lead.getPosition()},i.prototype.isBackwards=function(){var r=this.anchor,u=this.lead;return r.row>u.row||r.row==u.row&&r.column>u.column},i.prototype.getRange=function(){var r=this.anchor,u=this.lead;return this.$isEmpty?a.fromPoints(u,u):this.isBackwards()?a.fromPoints(u,r):a.fromPoints(r,u)},i.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},i.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},i.prototype.setRange=function(r,u){var l=u?r.end:r.start,p=u?r.start:r.end;this.$setSelection(l.row,l.column,p.row,p.column)},i.prototype.$setSelection=function(r,u,l,p){if(!this.$silent){var f=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(r,u),this.cursor.setPosition(l,p),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||f!=this.$isEmpty||o)&&this._emit("changeSelection")}},i.prototype.$moveSelection=function(r){var u=this.lead;this.$isEmpty&&this.setSelectionAnchor(u.row,u.column),r.call(this)},i.prototype.selectTo=function(r,u){this.$moveSelection(function(){this.moveCursorTo(r,u)})},i.prototype.selectToPosition=function(r){this.$moveSelection(function(){this.moveCursorToPosition(r)})},i.prototype.moveTo=function(r,u){this.clearSelection(),this.moveCursorTo(r,u)},i.prototype.moveToPosition=function(r){this.clearSelection(),this.moveCursorToPosition(r)},i.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},i.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},i.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},i.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},i.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},i.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},i.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},i.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},i.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},i.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},i.prototype.getWordRange=function(r,u){if(typeof u>"u"){var l=r||this.lead;r=l.row,u=l.column}return this.session.getWordRange(r,u)},i.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},i.prototype.selectAWord=function(){var r=this.getCursor(),u=this.session.getAWordRange(r.row,r.column);this.setSelectionRange(u)},i.prototype.getLineRange=function(r,u){var l=typeof r=="number"?r:this.lead.row,p,f=this.session.getFoldLine(l);return f?(l=f.start.row,p=f.end.row):p=l,u===!0?new a(l,0,p,this.session.getLine(p).length):new a(l,0,p+1,0)},i.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},i.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},i.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},i.prototype.wouldMoveIntoSoftTab=function(r,u,l){var p=r.column,f=r.column+u;return l<0&&(p=r.column-u,f=r.column),this.session.isTabStop(r)&&this.doc.getLine(r.row).slice(p,f).split(" ").length-1==u},i.prototype.moveCursorLeft=function(){var r=this.lead.getPosition(),u;if(u=this.session.getFoldAt(r.row,r.column,-1))this.moveCursorTo(u.start.row,u.start.column);else if(r.column===0)r.row>0&&this.moveCursorTo(r.row-1,this.doc.getLine(r.row-1).length);else{var l=this.session.getTabSize();this.wouldMoveIntoSoftTab(r,l,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-l):this.moveCursorBy(0,-1)}},i.prototype.moveCursorRight=function(){var r=this.lead.getPosition(),u;if(u=this.session.getFoldAt(r.row,r.column,1))this.moveCursorTo(u.end.row,u.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var l=this.session.getTabSize(),r=this.lead;this.wouldMoveIntoSoftTab(r,l,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,l):this.moveCursorBy(0,1)}},i.prototype.moveCursorLineStart=function(){var r=this.lead.row,u=this.lead.column,l=this.session.documentToScreenRow(r,u),p=this.session.screenToDocumentPosition(l,0),f=this.session.getDisplayLine(r,null,p.row,p.column),o=f.match(/^\s*/);o[0].length!=u&&!this.session.$useEmacsStyleLineStart&&(p.column+=o[0].length),this.moveCursorToPosition(p)},i.prototype.moveCursorLineEnd=function(){var r=this.lead,u=this.session.getDocumentLastRowColumnPosition(r.row,r.column);if(this.lead.column==u.column){var l=this.session.getLine(u.row);if(u.column==l.length){var p=l.search(/\s+$/);p>0&&(u.column=p)}}this.moveCursorTo(u.row,u.column)},i.prototype.moveCursorFileEnd=function(){var r=this.doc.getLength()-1,u=this.doc.getLine(r).length;this.moveCursorTo(r,u)},i.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},i.prototype.moveCursorLongWordRight=function(){var r=this.lead.row,u=this.lead.column,l=this.doc.getLine(r),p=l.substring(u);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var f=this.session.getFoldAt(r,u,1);if(f){this.moveCursorTo(f.end.row,f.end.column);return}if(this.session.nonTokenRe.exec(p)&&(u+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,p=l.substring(u)),u>=l.length){this.moveCursorTo(r,l.length),this.moveCursorRight(),r<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(p)&&(u+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,u)},i.prototype.moveCursorLongWordLeft=function(){var r=this.lead.row,u=this.lead.column,l;if(l=this.session.getFoldAt(r,u,-1)){this.moveCursorTo(l.start.row,l.start.column);return}var p=this.session.getFoldStringAt(r,u,-1);p==null&&(p=this.doc.getLine(r).substring(0,u));var f=v.stringReverse(p);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(f)&&(u-=this.session.nonTokenRe.lastIndex,f=f.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),u<=0){this.moveCursorTo(r,0),this.moveCursorLeft(),r>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(f)&&(u-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,u)},i.prototype.$shortWordEndIndex=function(r){var u=0,l,p=/\s/,f=this.session.tokenRe;if(f.lastIndex=0,this.session.tokenRe.exec(r))u=this.session.tokenRe.lastIndex;else{for(;(l=r[u])&&p.test(l);)u++;if(u<1){for(f.lastIndex=0;(l=r[u])&&!f.test(l);)if(f.lastIndex=0,u++,p.test(l))if(u>2){u--;break}else{for(;(l=r[u])&&p.test(l);)u++;if(u>2)break}}}return f.lastIndex=0,u},i.prototype.moveCursorShortWordRight=function(){var r=this.lead.row,u=this.lead.column,l=this.doc.getLine(r),p=l.substring(u),f=this.session.getFoldAt(r,u,1);if(f)return this.moveCursorTo(f.end.row,f.end.column);if(u==l.length){var o=this.doc.getLength();do r++,p=this.doc.getLine(r);while(r<o&&/^\s*$/.test(p));/^\s+/.test(p)||(p=""),u=0}var h=this.$shortWordEndIndex(p);this.moveCursorTo(r,u+h)},i.prototype.moveCursorShortWordLeft=function(){var r=this.lead.row,u=this.lead.column,l;if(l=this.session.getFoldAt(r,u,-1))return this.moveCursorTo(l.start.row,l.start.column);var p=this.session.getLine(r).substring(0,u);if(u===0){do r--,p=this.doc.getLine(r);while(r>0&&/^\s*$/.test(p));u=p.length,/\s+$/.test(p)||(p="")}var f=v.stringReverse(p),o=this.$shortWordEndIndex(f);return this.moveCursorTo(r,u-o)},i.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},i.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},i.prototype.moveCursorBy=function(r,u){var l=this.session.documentToScreenPosition(this.lead.row,this.lead.column),p;if(u===0&&(r!==0&&(this.session.$bidiHandler.isBidiRow(l.row,this.lead.row)?(p=this.session.$bidiHandler.getPosLeft(l.column),l.column=Math.round(p/this.session.$bidiHandler.charWidths[0])):p=l.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?l.column=this.$desiredColumn:this.$desiredColumn=l.column),r!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var f=this.session.lineWidgets[this.lead.row];r<0?r-=f.rowsAbove||0:r>0&&(r+=f.rowCount-(f.rowsAbove||0))}var o=this.session.screenToDocumentPosition(l.row+r,l.column,p);r!==0&&u===0&&o.row===this.lead.row&&(o.column,this.lead.column),this.moveCursorTo(o.row,o.column+u,u===0)},i.prototype.moveCursorToPosition=function(r){this.moveCursorTo(r.row,r.column)},i.prototype.moveCursorTo=function(r,u,l){var p=this.session.getFoldAt(r,u,1);p&&(r=p.start.row,u=p.start.column),this.$keepDesiredColumnOnChange=!0;var f=this.session.getLine(r);/[\uDC00-\uDFFF]/.test(f.charAt(u))&&f.charAt(u-1)&&(this.lead.row==r&&this.lead.column==u+1?u=u-1:u=u+1),this.lead.setPosition(r,u),this.$keepDesiredColumnOnChange=!1,l||(this.$desiredColumn=null)},i.prototype.moveCursorToScreen=function(r,u,l){var p=this.session.screenToDocumentPosition(r,u);this.moveCursorTo(p.row,p.column,l)},i.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},i.prototype.fromOrientedRange=function(r){this.setSelectionRange(r,r.cursor==r.start),this.$desiredColumn=r.desiredColumn||this.$desiredColumn},i.prototype.toOrientedRange=function(r){var u=this.getRange();return r?(r.start.column=u.start.column,r.start.row=u.start.row,r.end.column=u.end.column,r.end.row=u.end.row):r=u,r.cursor=this.isBackwards()?r.start:r.end,r.desiredColumn=this.$desiredColumn,r},i.prototype.getRangeOfMovements=function(r){var u=this.getCursor();try{r(this);var l=this.getCursor();return a.fromPoints(u,l)}catch{return a.fromPoints(u,u)}finally{this.moveCursorToPosition(u)}},i.prototype.toJSON=function(){if(this.rangeCount)var r=this.ranges.map(function(u){var l=u.clone();return l.isBackwards=u.cursor==u.start,l});else{var r=this.getRange();r.isBackwards=this.isBackwards()}return r},i.prototype.fromJSON=function(r){if(r.start==null)if(this.rangeList&&r.length>1){this.toSingleRange(r[0]);for(var u=r.length;u--;){var l=a.fromPoints(r[u].start,r[u].end);r[u].isBackwards&&(l.cursor=l.start),this.addRange(l,!0)}return}else r=r[0];this.rangeList&&this.toSingleRange(r),this.setSelectionRange(r,r.isBackwards)},i.prototype.isEqual=function(r){if((r.length||this.rangeCount)&&r.length!=this.rangeCount)return!1;if(!r.length||!this.ranges)return this.getRange().isEqual(r);for(var u=this.ranges.length;u--;)if(!this.ranges[u].isEqual(r[u]))return!1;return!0},i}();d.prototype.setSelectionAnchor=d.prototype.setAnchor,d.prototype.getSelectionAnchor=d.prototype.getAnchor,d.prototype.setSelectionRange=d.prototype.setRange,c.implement(d.prototype,s),t.Selection=d});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,n){"use strict";var c=e("./lib/report_error").reportError,v=2e3,s=function(){function a(d){this.splitRegex,this.states=d,this.regExps={},this.matchMappings={};for(var i in this.states){for(var r=this.states[i],u=[],l=0,p=this.matchMappings[i]={defaultToken:"text"},f="g",o=[],h=0;h<r.length;h++){var _=r[h];if(_.defaultToken&&(p.defaultToken=_.defaultToken),_.caseInsensitive&&f.indexOf("i")===-1&&(f+="i"),_.unicode&&f.indexOf("u")===-1&&(f+="u"),_.regex!=null){_.regex instanceof RegExp&&(_.regex=_.regex.toString().slice(1,-1));var m=_.regex,y=new RegExp("(?:("+m+")|(.))").exec("a").length-2;Array.isArray(_.token)?_.token.length==1||y==1?_.token=_.token[0]:y-1!=_.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:_,groupCount:y-1}),_.token=_.token[0]):(_.tokenArray=_.token,_.token=null,_.onMatch=this.$arrayTokens):typeof _.token=="function"&&!_.onMatch&&(y>1?_.onMatch=this.$applyToken:_.onMatch=_.token),y>1&&(/\\\d/.test(_.regex)?m=_.regex.replace(/\\([0-9]+)/g,function(C,E){return"\\"+(parseInt(E,10)+l+1)}):(y=1,m=this.removeCapturingGroups(_.regex)),!_.splitRegex&&typeof _.token!="string"&&o.push(_)),p[l]=h,l+=y,u.push(m),_.onMatch||(_.onMatch=null)}}u.length||(p[0]=0,u.push("$")),o.forEach(function(C){C.splitRegex=this.createSplitterRegexp(C.regex,f)},this),this.regExps[i]=new RegExp("("+u.join(")|(")+")|($)",f)}}return a.prototype.$setMaxTokenCount=function(d){v=d|0},a.prototype.$applyToken=function(d){var i=this.splitRegex.exec(d).slice(1),r=this.token.apply(this,i);if(typeof r=="string")return[{type:r,value:d}];for(var u=[],l=0,p=r.length;l<p;l++)i[l]&&(u[u.length]={type:r[l],value:i[l]});return u},a.prototype.$arrayTokens=function(d){if(!d)return[];var i=this.splitRegex.exec(d);if(!i)return"text";for(var r=[],u=this.tokenArray,l=0,p=u.length;l<p;l++)i[l+1]&&(r[r.length]={type:u[l],value:i[l+1]});return r},a.prototype.removeCapturingGroups=function(d){var i=d.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(r,u){return u?"(?:":r});return i},a.prototype.createSplitterRegexp=function(d,i){if(d.indexOf("(?=")!=-1){var r=0,u=!1,l={};d.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(p,f,o,h,_,m){return u?u=_!="]":_?u=!0:h?(r==l.stack&&(l.end=m+1,l.stack=-1),r--):o&&(r++,o.length!=1&&(l.stack=r,l.start=m)),p}),l.end!=null&&/^\)*$/.test(d.substr(l.end))&&(d=d.substring(0,l.start)+d.substr(l.end))}return d.charAt(0)!="^"&&(d="^"+d),d.charAt(d.length-1)!="$"&&(d+="$"),new RegExp(d,(i||"").replace("g",""))},a.prototype.getLineTokens=function(d,i){if(i&&typeof i!="string"){var r=i.slice(0);i=r[0],i==="#tmp"&&(r.shift(),i=r.shift())}else var r=[];var u=i||"start",l=this.states[u];l||(u="start",l=this.states[u]);var p=this.matchMappings[u],f=this.regExps[u];f.lastIndex=0;for(var o,h=[],_=0,m=0,y={type:null,value:""};o=f.exec(d);){var C=p.defaultToken,E=null,D=o[0],g=f.lastIndex;if(g-D.length>_){var b=d.substring(_,g-D.length);y.type==C?y.value+=b:(y.type&&h.push(y),y={type:C,value:b})}for(var L=0;L<o.length-2;L++)if(o[L+1]!==void 0){E=l[p[L]],E.onMatch?C=E.onMatch(D,u,r,d):C=E.token,E.next&&(typeof E.next=="string"?u=E.next:u=E.next(u,r),l=this.states[u],l||(this.reportError("state doesn't exist",u),u="start",l=this.states[u]),p=this.matchMappings[u],_=g,f=this.regExps[u],f.lastIndex=g),E.consumeLineEnd&&(_=g);break}if(D){if(typeof C=="string")(!E||E.merge!==!1)&&y.type===C?y.value+=D:(y.type&&h.push(y),y={type:C,value:D});else if(C){y.type&&h.push(y),y={type:null,value:""};for(var L=0;L<C.length;L++)h.push(C[L])}}if(_==d.length)break;if(_=g,m++>v){for(m>2*d.length&&this.reportError("infinite loop with in ace tokenizer",{startState:i,line:d});_<d.length;)y.type&&h.push(y),y={value:d.substring(_,_+=500),type:"overflow"};u="start",r=[];break}}return y.type&&h.push(y),r.length>1&&r[0]!==u&&r.unshift("#tmp",u),{tokens:h,state:r.length?r:u}},a}();s.prototype.reportError=c,t.Tokenizer=s});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";var c=e("../lib/deep_copy").deepCopy,v;v=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(d,i){if(!i){for(var r in d)this.$rules[r]=d[r];return}for(var r in d){for(var u=d[r],l=0;l<u.length;l++){var p=u[l];(p.next||p.onMatch)&&(typeof p.next=="string"&&p.next.indexOf(i)!==0&&(p.next=i+p.next),p.nextState&&p.nextState.indexOf(i)!==0&&(p.nextState=i+p.nextState))}this.$rules[i+r]=u}},this.getRules=function(){return this.$rules},this.embedRules=function(d,i,r,u,l){var p=typeof d=="function"?new d().getRules():d;if(u)for(var f=0;f<u.length;f++)u[f]=i+u[f];else{u=[];for(var o in p)u.push(i+o)}if(this.addRules(p,i),r)for(var h=Array.prototype[l?"push":"unshift"],f=0;f<u.length;f++)h.apply(this.$rules[u[f]],c(r));this.$embeds||(this.$embeds=[]),this.$embeds.push(i)},this.getEmbeds=function(){return this.$embeds};var s=function(d,i){return(d!="start"||i.length)&&i.unshift(this.nextState,d),this.nextState},a=function(d,i){return i.shift(),i.shift()||"start"};this.normalizeRules=function(){var d=0,i=this.$rules;function r(u){var l=i[u];l.processed=!0;for(var p=0;p<l.length;p++){var f=l[p],o=null;Array.isArray(f)&&(o=f,f={}),!f.regex&&f.start&&(f.regex=f.start,f.next||(f.next=[]),f.next.push({defaultToken:f.token},{token:f.token+".end",regex:f.end||f.start,next:"pop"}),f.token=f.token+".start",f.push=!0);var h=f.next||f.push;if(h&&Array.isArray(h)){var _=f.stateName;_||(_=f.token,typeof _!="string"&&(_=_[0]||""),i[_]&&(_+=d++)),i[_]=h,f.next=_,r(_)}else h=="pop"&&(f.next=a);if(f.push&&(f.nextState=f.next||f.push,f.next=s,delete f.push),f.rules)for(var m in f.rules)i[m]?i[m].push&&i[m].push.apply(i[m],f.rules[m]):i[m]=f.rules[m];var y=typeof f=="string"?f:f.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?o=y.map(function(E){return i[E]}):o=i[y]),o){var C=[p,1].concat(o);f.noEscape&&(C=C.filter(function(E){return!E.next})),l.splice.apply(l,C),p--}f.keywordMap&&(f.token=this.createKeywordMapper(f.keywordMap,f.defaultToken||"text",f.caseInsensitive),delete f.defaultToken)}}Object.keys(i).forEach(r,this)},this.createKeywordMapper=function(d,i,r,u){var l=Object.create(null);return this.$keywordList=[],Object.keys(d).forEach(function(p){for(var f=d[p],o=f.split(u||"|"),h=o.length;h--;){var _=o[h];this.$keywordList.push(_),r&&(_=_.toLowerCase()),l[_]=p}},this),d=null,r?function(p){return l[p.toLowerCase()]||i}:function(p){return l[p]||i}},this.getKeywords=function(){return this.$keywords}}.call(v.prototype),t.TextHighlightRules=v});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var c;c=function(){this.$behaviours={}},function(){this.add=function(v,s,a){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[v]:this.$behaviours[v]={}}this.$behaviours[v][s]=a},this.addBehaviours=function(v){for(var s in v)for(var a in v[s])this.add(s,a,v[s][a])},this.remove=function(v){this.$behaviours&&this.$behaviours[v]&&delete this.$behaviours[v]},this.inherit=function(v,s){if(typeof v=="function")var a=new v().getBehaviours(s);else var a=v.getBehaviours(s);this.addBehaviours(a)},this.getBehaviours=function(v){if(v){for(var s={},a=0;a<v.length;a++)this.$behaviours[v[a]]&&(s[v[a]]=this.$behaviours[v[a]]);return s}else return this.$behaviours}}.call(c.prototype),t.Behaviour=c});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("./range").Range,v=function(){function s(a,d,i){this.$session=a,this.$row=d,this.$rowTokens=a.getTokens(d);var r=a.getTokenAt(d,i);this.$tokenIndex=r?r.index:-1}return s.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},s.prototype.stepForward=function(){this.$tokenIndex+=1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},s.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},s.prototype.getCurrentTokenRow=function(){return this.$row},s.prototype.getCurrentTokenColumn=function(){var a=this.$rowTokens,d=this.$tokenIndex,i=a[d].start;if(i!==void 0)return i;for(i=0;d>0;)d-=1,i+=a[d].value.length;return i},s.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},s.prototype.getCurrentTokenRange=function(){var a=this.$rowTokens[this.$tokenIndex],d=this.getCurrentTokenColumn();return new c(this.$row,d,this.$row,d+a.value.length)},s}();t.TokenIterator=v});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var c=e("../../lib/oop"),v=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),d=["text","paren.rparen","rparen","paren","punctuation.operator"],i=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],r,u={},l={'"':'"',"'":"'"},p=function(h){var _=-1;if(h.multiSelect&&(_=h.selection.index,u.rangeCount!=h.multiSelect.rangeCount&&(u={rangeCount:h.multiSelect.rangeCount})),u[_])return r=u[_];r=u[_]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},f=function(h,_,m,y){var C=h.end.row-h.start.row;return{text:m+_+y,selection:[0,h.start.column+1,C,h.end.column+(C?0:1)]}},o;o=function(h){h=h||{},this.add("braces","insertion",function(_,m,y,C,E){var D=y.getCursorPosition(),g=C.doc.getLine(D.row);if(E=="{"){p(y);var b=y.getSelectionRange(),L=C.doc.getTextRange(b);if(L!==""&&L!=="{"&&y.getWrapBehavioursEnabled())return f(b,L,"{","}");if(o.isSaneInsertion(y,C))return/[\]\}\)]/.test(g[D.column])||y.inMultiSelectMode||h.braces?(o.recordAutoInsert(y,C,"}"),{text:"{}",selection:[1,1]}):(o.recordMaybeInsert(y,C,"{"),{text:"{",selection:[1,1]})}else if(E=="}"){p(y);var w=g.substring(D.column,D.column+1);if(w=="}"){var T=C.$findOpeningBracket("}",{column:D.column+1,row:D.row});if(T!==null&&o.isAutoInsertedClosing(D,g,E))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(E==`
`||E==`\r
`){p(y);var M="";o.isMaybeInsertedClosing(D,g)&&(M=a.stringRepeat("}",r.maybeInsertedBrackets),o.clearMaybeInsertedClosing());var w=g.substring(D.column,D.column+1);if(w==="}"){var S=C.findMatchingBracket({row:D.row,column:D.column+1},"}");if(!S)return null;var F=this.$getIndent(C.getLine(S.row))}else if(M)var F=this.$getIndent(g);else{o.clearMaybeInsertedClosing();return}var x=F+C.getTabString();return{text:`
`+x+`
`+F+M,selection:[1,x.length,1,x.length]}}else o.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(_,m,y,C,E){var D=C.doc.getTextRange(E);if(!E.isMultiLine()&&D=="{"){p(y);var g=C.doc.getLine(E.start.row),b=g.substring(E.end.column,E.end.column+1);if(b=="}")return E.end.column++,E;r.maybeInsertedBrackets--}}),this.add("parens","insertion",function(_,m,y,C,E){if(E=="("){p(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return f(D,g,"(",")");if(o.isSaneInsertion(y,C))return o.recordAutoInsert(y,C,")"),{text:"()",selection:[1,1]}}else if(E==")"){p(y);var b=y.getCursorPosition(),L=C.doc.getLine(b.row),w=L.substring(b.column,b.column+1);if(w==")"){var T=C.$findOpeningBracket(")",{column:b.column+1,row:b.row});if(T!==null&&o.isAutoInsertedClosing(b,L,E))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(_,m,y,C,E){var D=C.doc.getTextRange(E);if(!E.isMultiLine()&&D=="("){p(y);var g=C.doc.getLine(E.start.row),b=g.substring(E.start.column+1,E.start.column+2);if(b==")")return E.end.column++,E}}),this.add("brackets","insertion",function(_,m,y,C,E){if(E=="["){p(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return f(D,g,"[","]");if(o.isSaneInsertion(y,C))return o.recordAutoInsert(y,C,"]"),{text:"[]",selection:[1,1]}}else if(E=="]"){p(y);var b=y.getCursorPosition(),L=C.doc.getLine(b.row),w=L.substring(b.column,b.column+1);if(w=="]"){var T=C.$findOpeningBracket("]",{column:b.column+1,row:b.row});if(T!==null&&o.isAutoInsertedClosing(b,L,E))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(_,m,y,C,E){var D=C.doc.getTextRange(E);if(!E.isMultiLine()&&D=="["){p(y);var g=C.doc.getLine(E.start.row),b=g.substring(E.start.column+1,E.start.column+2);if(b=="]")return E.end.column++,E}}),this.add("string_dquotes","insertion",function(_,m,y,C,E){var D=C.$mode.$quotes||l;if(E.length==1&&D[E]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(E)!=-1)return;p(y);var g=E,b=y.getSelectionRange(),L=C.doc.getTextRange(b);if(L!==""&&(L.length!=1||!D[L])&&y.getWrapBehavioursEnabled())return f(b,L,g,g);if(!L){var w=y.getCursorPosition(),T=C.doc.getLine(w.row),M=T.substring(w.column-1,w.column),S=T.substring(w.column,w.column+1),F=C.getTokenAt(w.row,w.column),x=C.getTokenAt(w.row,w.column+1);if(M=="\\"&&F&&/escape/.test(F.type))return null;var R=F&&/string|escape/.test(F.type),A=!x||/string|escape/.test(x.type),I;if(S==g)I=R!==A,I&&/string\.end/.test(x.type)&&(I=!1);else{if(R&&!A||R&&A)return null;var $=C.$mode.tokenRe;$.lastIndex=0;var k=$.test(M);$.lastIndex=0;var H=$.test(S),U=C.$mode.$pairQuotesAfter,q=U&&U[g]&&U[g].test(M);if(!q&&k||H||S&&!/[\s;,.})\]\\]/.test(S))return null;var N=T[w.column-2];if(M==g&&(N==g||$.test(N)))return null;I=!0}return{text:I?g+g:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(_,m,y,C,E){var D=C.$mode.$quotes||l,g=C.doc.getTextRange(E);if(!E.isMultiLine()&&D.hasOwnProperty(g)){p(y);var b=C.doc.getLine(E.start.row),L=b.substring(E.start.column+1,E.start.column+2);if(L==g)return E.end.column++,E}}),h.closeDocComment!==!1&&this.add("doc comment end","insertion",function(_,m,y,C,E){if(_==="doc-start"&&(E===`
`||E===`\r
`)&&y.selection.isEmpty()){var D=y.getCursorPosition(),g=C.doc.getLine(D.row),b=C.doc.getLine(D.row+1),L=this.$getIndent(g);if(/\s*\*/.test(b))return/^\s*\*/.test(g)?{text:E+L+"* ",selection:[1,3+L.length,1,3+L.length]}:{text:E+L+" * ",selection:[1,3+L.length,1,3+L.length]};if(/\/\*\*/.test(g.substring(0,D.column)))return{text:E+L+" * "+E+" "+L+"*/",selection:[1,4+L.length,1,4+L.length]}}})},o.isSaneInsertion=function(h,_){var m=h.getCursorPosition(),y=new s(_,m.row,m.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",d)){if(/[)}\]]/.test(h.session.getLine(m.row)[m.column]))return!0;var C=new s(_,m.row,m.column+1);if(!this.$matchTokenType(C.getCurrentToken()||"text",d))return!1}return y.stepForward(),y.getCurrentTokenRow()!==m.row||this.$matchTokenType(y.getCurrentToken()||"text",i)},o.$matchTokenType=function(h,_){return _.indexOf(h.type||h)>-1},o.recordAutoInsert=function(h,_,m){var y=h.getCursorPosition(),C=_.doc.getLine(y.row);this.isAutoInsertedClosing(y,C,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=y.row,r.autoInsertedLineEnd=m+C.substr(y.column),r.autoInsertedBrackets++},o.recordMaybeInsert=function(h,_,m){var y=h.getCursorPosition(),C=_.doc.getLine(y.row);this.isMaybeInsertedClosing(y,C)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=y.row,r.maybeInsertedLineStart=C.substr(0,y.column)+m,r.maybeInsertedLineEnd=C.substr(y.column),r.maybeInsertedBrackets++},o.isAutoInsertedClosing=function(h,_,m){return r.autoInsertedBrackets>0&&h.row===r.autoInsertedRow&&m===r.autoInsertedLineEnd[0]&&_.substr(h.column)===r.autoInsertedLineEnd},o.isMaybeInsertedClosing=function(h,_){return r.maybeInsertedBrackets>0&&h.row===r.maybeInsertedRow&&_.substr(h.column)===r.maybeInsertedLineEnd&&_.substr(0,h.column)==r.maybeInsertedLineStart},o.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},o.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},c.inherits(o,v),t.CstyleBehaviour=o});ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var c=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],v=0,s=[],a=0;a<c.length;a+=2)s.push(v+=c[a]),c[a+1]&&s.push(45,v+=c[a+1]);t.wordChars=String.fromCharCode.apply(null,s)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var c=e("../config"),v=e("../tokenizer").Tokenizer,s=e("./text_highlight_rules").TextHighlightRules,a=e("./behaviour/cstyle").CstyleBehaviour,d=e("../unicode"),i=e("../lib/lang"),r=e("../token_iterator").TokenIterator,u=e("../range").Range,l;l=function(){this.HighlightRules=s},function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+d.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+d.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new v(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(p,f,o,h){var _=f.doc,m=!0,y=!0,C=1/0,E=f.getTabSize(),D=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var L=this.lineCommentStart.map(i.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var L=i.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;L=new RegExp("^(\\s*)(?:"+L+") ?"),D=f.getUseSoftTabs();var M=function(H,U){var q=H.match(L);if(q){var N=q[1].length,K=q[0].length;!x(H,N,K)&&q[0][K-1]==" "&&K--,_.removeInLine(U,N,K)}},F=g+" ",T=function(H,U){(!m||/\S/.test(H))&&(x(H,C,C)?_.insertInLine({row:U,column:C},F):_.insertInLine({row:U,column:C},g))},S=function(H,U){return L.test(H)},x=function(H,U,q){for(var N=0;U--&&H.charAt(U)==" ";)N++;if(N%E!=0)return!1;for(var N=0;H.charAt(q++)==" ";)N++;return E>2?N%E!=E-1:N%E==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,b=this.blockComment.end,L=new RegExp("^(\\s*)(?:"+i.escapeRegExp(g)+")"),w=new RegExp("(?:"+i.escapeRegExp(b)+")\\s*$"),T=function(I,$){S(I,$)||(!m||/\S/.test(I))&&(_.insertInLine({row:$,column:I.length},b),_.insertInLine({row:$,column:C},g))},M=function(I,$){var k;(k=I.match(w))&&_.removeInLine($,I.length-k[0].length,I.length),(k=I.match(L))&&_.removeInLine($,k[1].length,k[0].length)},S=function(I,$){if(L.test(I))return!0;for(var k=f.getTokens($),H=0;H<k.length;H++)if(k[H].type==="comment")return!0}}function R(I){for(var $=o;$<=h;$++)I(_.getLine($),$)}var A=1/0;R(function(I,$){var k=I.search(/\S/);k!==-1?(k<C&&(C=k),y&&!S(I,$)&&(y=!1)):A>I.length&&(A=I.length)}),C==1/0&&(C=A,m=!1,y=!1),D&&C%E!=0&&(C=Math.floor(C/E)*E),R(y?M:T)},this.toggleBlockComment=function(p,f,o,h){var _=this.blockComment;if(_){!_.start&&_[0]&&(_=_[0]);var m=new r(f,h.row,h.column),y=m.getCurrentToken(),C=f.selection,E=f.selection.toOrientedRange(),D,g;if(y&&/comment/.test(y.type)){for(var b,L;y&&/comment/.test(y.type);){var w=y.value.indexOf(_.start);if(w!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+w;b=new u(T,M,T,M+_.start.length);break}y=m.stepBackward()}for(var m=new r(f,h.row,h.column),y=m.getCurrentToken();y&&/comment/.test(y.type);){var w=y.value.indexOf(_.end);if(w!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+w;L=new u(T,M,T,M+_.end.length);break}y=m.stepForward()}L&&f.remove(L),b&&(f.remove(b),D=b.start.row,g=-_.start.length)}else g=_.start.length,D=o.start.row,f.insert(o.end,_.end),f.insert(o.start,_.start);E.start.row==D&&(E.start.column+=g),E.end.row==D&&(E.end.column+=g),f.selection.fromOrientedRange(E)}},this.getNextLineIndent=function(p,f,o){return this.$getIndent(f)},this.checkOutdent=function(p,f,o){return!1},this.autoOutdent=function(p,f,o){},this.$getIndent=function(p){return p.match(/^\s*/)[0]},this.createWorker=function(p){return null},this.createModeDelegates=function(p){this.$embeds=[],this.$modes={};for(var f in p)if(p[f]){var o=p[f],h=o.prototype.$id,_=c.$modes[h];_||(c.$modes[h]=_=new o),c.$modes[f]||(c.$modes[f]=_),this.$embeds.push(f),this.$modes[f]=_}for(var m=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(E){(function(D){var g=m[E],b=D[g];D[m[E]]=function(){return this.$delegator(g,arguments,b)}})(C)},C=this,f=0;f<m.length;f++)y(f)},this.$delegator=function(p,f,o){var h=f[0]||"start";if(typeof h!="string"){if(Array.isArray(h[2])){var _=h[2][h[2].length-1],m=this.$modes[_];if(m)return m[p].apply(m,[h[1]].concat([].slice.call(f,1)))}h=h[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var C=h.split(this.$embeds[y]);if(!C[0]&&C[1]){f[0]=C[1];var m=this.$modes[this.$embeds[y]];return m[p].apply(m,f)}}var E=o.apply(this,f);return o?E:void 0},this.transformAction=function(p,f,o,h,_){if(this.$behaviour){var m=this.$behaviour.getBehaviours();for(var y in m)if(m[y][f]){var C=m[y][f].apply(this,arguments);if(C)return C}}},this.getKeywords=function(p){if(!this.completionKeywords){var f=this.$tokenizer.rules,o=[];for(var h in f)for(var _=f[h],m=0,y=_.length;m<y;m++)if(typeof _[m].token=="string")/keyword|support|storage/.test(_[m].token)&&o.push(_[m].regex);else if(typeof _[m].token=="object"){for(var C=0,E=_[m].token.length;C<E;C++)if(/keyword|support|storage/.test(_[m].token[C])){var h=_[m].regex.match(/\(.+?\)/g)[C];o.push(h.substr(1,h.length-2))}}this.completionKeywords=o}return p?o.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(p,f,o,h){var _=this.$keywordList||this.$createKeywordList();return _.map(function(m){return{name:m,value:m,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(l.prototype),t.Mode=l});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function c(a,d){throw console.log("Invalid Delta:",a),"Invalid Delta: "+d}function v(a,d){return d.row>=0&&d.row<a.length&&d.column>=0&&d.column<=a[d.row].length}function s(a,d){d.action!="insert"&&d.action!="remove"&&c(d,"delta.action must be 'insert' or 'remove'"),d.lines instanceof Array||c(d,"delta.lines must be an Array"),(!d.start||!d.end)&&c(d,"delta.start/end must be an present");var i=d.start;v(a,d.start)||c(d,"delta.start must be contained in document");var r=d.end;d.action=="remove"&&!v(a,r)&&c(d,"delta.end must contained in document for 'remove' actions");var u=r.row-i.row,l=r.column-(u==0?i.column:0);(u!=d.lines.length-1||d.lines[u].length!=l)&&c(d,"delta.range must match delta lines")}t.applyDelta=function(a,d,i){var r=d.start.row,u=d.start.column,l=a[r]||"";switch(d.action){case"insert":var p=d.lines;if(p.length===1)a[r]=l.substring(0,u)+d.lines[0]+l.substring(u);else{var f=[r,1].concat(d.lines);a.splice.apply(a,f),a[r]=l.substring(0,u)+a[r],a[r+d.lines.length-1]+=l.substring(u)}break;case"remove":var o=d.end.column,h=d.end.row;r===h?a[r]=l.substring(0,u)+l.substring(o):a.splice(r,h-r+1,l.substring(0,u)+a[h].substring(o));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/event_emitter").EventEmitter,s=function(){function i(r,u,l){this.$onChange=this.onChange.bind(this),this.attach(r),typeof u!="number"?this.setPosition(u.row,u.column):this.setPosition(u,l)}return i.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},i.prototype.getDocument=function(){return this.document},i.prototype.onChange=function(r){if(!(r.start.row==r.end.row&&r.start.row!=this.row)&&!(r.start.row>this.row)){var u=d(r,{row:this.row,column:this.column},this.$insertRight);this.setPosition(u.row,u.column,!0)}},i.prototype.setPosition=function(r,u,l){var p;if(l?p={row:r,column:u}:p=this.$clipPositionToDocument(r,u),!(this.row==p.row&&this.column==p.column)){var f={row:this.row,column:this.column};this.row=p.row,this.column=p.column,this._signal("change",{old:f,value:p})}},i.prototype.detach=function(){this.document.off("change",this.$onChange)},i.prototype.attach=function(r){this.document=r||this.document,this.document.on("change",this.$onChange)},i.prototype.$clipPositionToDocument=function(r,u){var l={};return r>=this.document.getLength()?(l.row=Math.max(0,this.document.getLength()-1),l.column=this.document.getLine(l.row).length):r<0?(l.row=0,l.column=0):(l.row=r,l.column=Math.min(this.document.getLine(l.row).length,Math.max(0,u))),u<0&&(l.column=0),l},i}();s.prototype.$insertRight=!1,c.implement(s.prototype,v);function a(i,r,u){var l=u?i.column<=r.column:i.column<r.column;return i.row<r.row||i.row==r.row&&l}function d(i,r,u){var l=i.action=="insert",p=(l?1:-1)*(i.end.row-i.start.row),f=(l?1:-1)*(i.end.column-i.start.column),o=i.start,h=l?o:i.end;return a(r,o,u)?{row:r.row,column:r.column}:a(h,r,!u)?{row:r.row+p,column:r.column+(r.row==h.row?f:0)}:{row:o.row,column:o.column}}t.Anchor=s});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./apply_delta").applyDelta,s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,d=e("./anchor").Anchor,i=function(){function r(u){this.$lines=[""],u.length===0?this.$lines=[""]:Array.isArray(u)?this.insertMergedLines({row:0,column:0},u):this.insert({row:0,column:0},u)}return r.prototype.setValue=function(u){var l=this.getLength()-1;this.remove(new a(0,0,l,this.getLine(l).length)),this.insert({row:0,column:0},u||"")},r.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},r.prototype.createAnchor=function(u,l){return new d(this,u,l)},r.prototype.$detectNewLine=function(u){var l=u.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=l?l[1]:`
`,this._signal("changeNewLineMode")},r.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},r.prototype.setNewLineMode=function(u){this.$newLineMode!==u&&(this.$newLineMode=u,this._signal("changeNewLineMode"))},r.prototype.getNewLineMode=function(){return this.$newLineMode},r.prototype.isNewLine=function(u){return u==`\r
`||u=="\r"||u==`
`},r.prototype.getLine=function(u){return this.$lines[u]||""},r.prototype.getLines=function(u,l){return this.$lines.slice(u,l+1)},r.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},r.prototype.getLength=function(){return this.$lines.length},r.prototype.getTextRange=function(u){return this.getLinesForRange(u).join(this.getNewLineCharacter())},r.prototype.getLinesForRange=function(u){var l;if(u.start.row===u.end.row)l=[this.getLine(u.start.row).substring(u.start.column,u.end.column)];else{l=this.getLines(u.start.row,u.end.row),l[0]=(l[0]||"").substring(u.start.column);var p=l.length-1;u.end.row-u.start.row==p&&(l[p]=l[p].substring(0,u.end.column))}return l},r.prototype.insertLines=function(u,l){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(u,l)},r.prototype.removeLines=function(u,l){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(u,l)},r.prototype.insertNewLine=function(u){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(u,["",""])},r.prototype.insert=function(u,l){return this.getLength()<=1&&this.$detectNewLine(l),this.insertMergedLines(u,this.$split(l))},r.prototype.insertInLine=function(u,l){var p=this.clippedPos(u.row,u.column),f=this.pos(u.row,u.column+l.length);return this.applyDelta({start:p,end:f,action:"insert",lines:[l]},!0),this.clonePos(f)},r.prototype.clippedPos=function(u,l){var p=this.getLength();u===void 0?u=p:u<0?u=0:u>=p&&(u=p-1,l=void 0);var f=this.getLine(u);return l==null&&(l=f.length),l=Math.min(Math.max(l,0),f.length),{row:u,column:l}},r.prototype.clonePos=function(u){return{row:u.row,column:u.column}},r.prototype.pos=function(u,l){return{row:u,column:l}},r.prototype.$clipPosition=function(u){var l=this.getLength();return u.row>=l?(u.row=Math.max(0,l-1),u.column=this.getLine(l-1).length):(u.row=Math.max(0,u.row),u.column=Math.min(Math.max(u.column,0),this.getLine(u.row).length)),u},r.prototype.insertFullLines=function(u,l){u=Math.min(Math.max(u,0),this.getLength());var p=0;u<this.getLength()?(l=l.concat([""]),p=0):(l=[""].concat(l),u--,p=this.$lines[u].length),this.insertMergedLines({row:u,column:p},l)},r.prototype.insertMergedLines=function(u,l){var p=this.clippedPos(u.row,u.column),f={row:p.row+l.length-1,column:(l.length==1?p.column:0)+l[l.length-1].length};return this.applyDelta({start:p,end:f,action:"insert",lines:l}),this.clonePos(f)},r.prototype.remove=function(u){var l=this.clippedPos(u.start.row,u.start.column),p=this.clippedPos(u.end.row,u.end.column);return this.applyDelta({start:l,end:p,action:"remove",lines:this.getLinesForRange({start:l,end:p})}),this.clonePos(l)},r.prototype.removeInLine=function(u,l,p){var f=this.clippedPos(u,l),o=this.clippedPos(u,p);return this.applyDelta({start:f,end:o,action:"remove",lines:this.getLinesForRange({start:f,end:o})},!0),this.clonePos(f)},r.prototype.removeFullLines=function(u,l){u=Math.min(Math.max(0,u),this.getLength()-1),l=Math.min(Math.max(0,l),this.getLength()-1);var p=l==this.getLength()-1&&u>0,f=l<this.getLength()-1,o=p?u-1:u,h=p?this.getLine(o).length:0,_=f?l+1:l,m=f?0:this.getLine(_).length,y=new a(o,h,_,m),C=this.$lines.slice(u,l+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),C},r.prototype.removeNewLine=function(u){u<this.getLength()-1&&u>=0&&this.applyDelta({start:this.pos(u,this.getLine(u).length),end:this.pos(u+1,0),action:"remove",lines:["",""]})},r.prototype.replace=function(u,l){if(u instanceof a||(u=a.fromPoints(u.start,u.end)),l.length===0&&u.isEmpty())return u.start;if(l==this.getTextRange(u))return u.end;this.remove(u);var p;return l?p=this.insert(u.start,l):p=u.start,p},r.prototype.applyDeltas=function(u){for(var l=0;l<u.length;l++)this.applyDelta(u[l])},r.prototype.revertDeltas=function(u){for(var l=u.length-1;l>=0;l--)this.revertDelta(u[l])},r.prototype.applyDelta=function(u,l){var p=u.action=="insert";(p?u.lines.length<=1&&!u.lines[0]:!a.comparePoints(u.start,u.end))||(p&&u.lines.length>2e4?this.$splitAndapplyLargeDelta(u,2e4):(v(this.$lines,u,l),this._signal("change",u)))},r.prototype.$safeApplyDelta=function(u){var l=this.$lines.length;(u.action=="remove"&&u.start.row<l&&u.end.row<l||u.action=="insert"&&u.start.row<=l)&&this.applyDelta(u)},r.prototype.$splitAndapplyLargeDelta=function(u,l){for(var p=u.lines,f=p.length-l+1,o=u.start.row,h=u.start.column,_=0,m=0;_<f;_=m){m+=l-1;var y=p.slice(_,m);y.push(""),this.applyDelta({start:this.pos(o+_,h),end:this.pos(o+m,h=0),action:u.action,lines:y},!0)}u.lines=p.slice(_),u.start.row=o+_,u.start.column=h,this.applyDelta(u,!0)},r.prototype.revertDelta=function(u){this.$safeApplyDelta({start:this.clonePos(u.start),end:this.clonePos(u.end),action:u.action=="insert"?"remove":"insert",lines:u.lines.slice()})},r.prototype.indexToPosition=function(u,l){for(var p=this.$lines||this.getAllLines(),f=this.getNewLineCharacter().length,o=l||0,h=p.length;o<h;o++)if(u-=p[o].length+f,u<0)return{row:o,column:u+p[o].length+f};return{row:h-1,column:u+p[h-1].length+f}},r.prototype.positionToIndex=function(u,l){for(var p=this.$lines||this.getAllLines(),f=this.getNewLineCharacter().length,o=0,h=Math.min(u.row,p.length),_=l||0;_<h;++_)o+=p[_].length+f;return o+u.column},r.prototype.$split=function(u){return u.split(/\r\n|\r|\n/)},r}();i.prototype.$autoNewLine="",i.prototype.$newLineMode="auto",c.implement(i.prototype,s),t.Document=i});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/event_emitter").EventEmitter,s=function(){function a(d,i){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=d;var r=this;this.$worker=function(){if(r.running){for(var u=new Date,l=r.currentLine,p=-1,f=r.doc,o=l;r.lines[l];)l++;var h=f.getLength(),_=0;for(r.running=!1;l<h;){r.$tokenizeRow(l),p=l;do l++;while(r.lines[l]);if(_++,_%5===0&&new Date-u>20){r.running=setTimeout(r.$worker,20);break}}r.currentLine=l,p==-1&&(p=l),o<=p&&r.fireUpdateEvent(o,p)}}}return a.prototype.setTokenizer=function(d){this.tokenizer=d,this.lines=[],this.states=[],this.start(0)},a.prototype.setDocument=function(d){this.doc=d,this.lines=[],this.states=[],this.stop()},a.prototype.fireUpdateEvent=function(d,i){var r={first:d,last:i};this._signal("update",{data:r})},a.prototype.start=function(d){this.currentLine=Math.min(d||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},a.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},a.prototype.$updateOnChange=function(d){var i=d.start.row,r=d.end.row-i;if(r===0)this.lines[i]=null;else if(d.action=="remove")this.lines.splice(i,r+1,null),this.states.splice(i,r+1,null);else{var u=Array(r+1);u.unshift(i,1),this.lines.splice.apply(this.lines,u),this.states.splice.apply(this.states,u)}this.currentLine=Math.min(i,this.currentLine,this.doc.getLength()),this.stop()},a.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},a.prototype.getTokens=function(d){return this.lines[d]||this.$tokenizeRow(d)},a.prototype.getState=function(d){return this.currentLine==d&&this.$tokenizeRow(d),this.states[d]||"start"},a.prototype.$tokenizeRow=function(d){var i=this.doc.getLine(d),r=this.states[d-1],u=this.tokenizer.getLineTokens(i,r,d);return this.states[d]+""!=u.state+""?(this.states[d]=u.state,this.lines[d+1]=null,this.currentLine>d+1&&(this.currentLine=d+1)):this.currentLine==d&&(this.currentLine=d+1),this.lines[d]=u.tokens},a.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},a}();c.implement(s.prototype,v),t.BackgroundTokenizer=s});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,n){"use strict";var c=e("./lib/lang"),v=e("./range").Range,s=function(){function a(d,i,r){r===void 0&&(r="text"),this.setRegexp(d),this.clazz=i,this.type=r}return a.prototype.setRegexp=function(d){this.regExp+""!=d+""&&(this.regExp=d,this.cache=[])},a.prototype.update=function(d,i,r,u){if(this.regExp)for(var l=u.firstRow,p=u.lastRow,f={},o=l;o<=p;o++){var h=this.cache[o];h==null&&(h=c.getMatchOffsets(r.getLine(o),this.regExp),h.length>this.MAX_RANGES&&(h=h.slice(0,this.MAX_RANGES)),h=h.map(function(C){return new v(o,C.offset,o,C.offset+C.length)}),this.cache[o]=h.length?h:"");for(var _=h.length;_--;){var m=h[_].toScreenRange(r),y=m.toString();f[y]||(f[y]=!0,i.drawSingleLineMarker(d,m,this.clazz,u))}}},a}();s.prototype.MAX_RANGES=500,t.SearchHighlight=s});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=function(){function D(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return D.prototype.addSession=function(g){this.$session=g},D.prototype.add=function(g,b,L){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),b===!1||!this.lastDeltas){this.lastDeltas=[];var w=this.$undoStack.length;w>this.$undoDepth-1&&this.$undoStack.splice(0,w-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},D.prototype.addSelection=function(g,b){this.selections.push({value:g,rev:b||this.$rev})},D.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},D.prototype.markIgnored=function(g,b){b==null&&(b=this.$rev+1);for(var L=this.$undoStack,w=L.length;w--;){var T=L[w][0];if(T.id<=g)break;T.id<b&&(T.ignore=!0)}this.lastDeltas=null},D.prototype.getSelection=function(g,b){for(var L=this.selections,w=L.length;w--;){var T=L[w];if(T.rev<g)return b&&(T=L[w+1]),T}},D.prototype.getRevision=function(){return this.$rev},D.prototype.getDeltas=function(g,b){b==null&&(b=this.$rev+1);for(var L=this.$undoStack,w=null,T=0,M=L.length;M--;){var S=L[M][0];if(S.id<b&&!w&&(w=M+1),S.id<=g){T=M+1;break}}return L.slice(T,w)},D.prototype.getChangedRanges=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.getChangedLines=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.undo=function(g,b){this.lastDeltas=null;var L=this.$undoStack;if(v(L,L.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var w=L.pop(),T=null;return w&&(T=g.undoChanges(w,b),this.$redoStack.push(w),this.$syncRev()),this.$fromUndo=!1,T}},D.prototype.redo=function(g,b){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var L=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);E(this.$redoStack,L),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(M){M[0].id=++this.$maxRev},this)}var w=this.$redoStack.pop(),T=null;return w&&(T=g.redoChanges(w,b),this.$undoStack.push(w),this.$syncRev()),this.$fromUndo=!1,T},D.prototype.$syncRev=function(){var g=this.$undoStack,b=g[g.length-1],L=b&&b[0].id||0;this.$redoStackBaseRev=L,this.$rev=L},D.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},D.prototype.canUndo=function(){return this.$undoStack.length>0},D.prototype.canRedo=function(){return this.$redoStack.length>0},D.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},D.prototype.isAtBookmark=function(){return this.$rev===this.mark},D.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},D.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},D.prototype.$prettyPrint=function(g){return g?l(g):l(this.$undoStack)+`
---
`+l(this.$redoStack)},D}();c.prototype.hasUndo=c.prototype.canUndo,c.prototype.hasRedo=c.prototype.canRedo,c.prototype.isClean=c.prototype.isAtBookmark,c.prototype.markClean=c.prototype.bookmark;function v(D,g){for(var b=g;b--;){var L=D[b];if(L&&!L[0].ignore){for(;b<g-1;){var w=o(D[b],D[b+1]);D[b]=w[0],D[b+1]=w[1],b++}return!0}}}var s=e("./range").Range,a=s.comparePoints,d=s.comparePoints;function i(D){var g=D.action=="insert",b=D.start,L=D.end,w=(L.row-b.row)*(g?1:-1),T=(L.column-b.column)*(g?1:-1);g&&(L=b);for(var M in this.marks){var S=this.marks[M],F=d(S,b);if(!(F<0)){if(F===0&&g)if(S.bias==1)F=1;else{S.bias==-1;continue}var x=g?F:d(S,L);if(x>0){S.row+=w,S.column+=S.row==L.row?T:0;continue}!g&&x<=0&&(S.row=b.row,S.column=b.column,x===0&&(S.bias=1))}}}function r(D){return{row:D.row,column:D.column}}function u(D){return{start:r(D.start),end:r(D.end),action:D.action,lines:D.lines.slice()}}function l(D){if(D=D||this,Array.isArray(D))return D.map(l).join(`
`);var g="";return D.action?(g=D.action=="insert"?"+":"-",g+="["+D.lines+"]"):D.value&&(Array.isArray(D.value)?g=D.value.map(p).join(`
`):g=p(D.value)),D.start&&(g+=p(D)),(D.id||D.rev)&&(g+="	("+(D.id||D.rev)+")"),g}function p(D){return D.start.row+":"+D.start.column+"=>"+D.end.row+":"+D.end.column}function f(D,g){var b=D.action=="insert",L=g.action=="insert";if(b&&L)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.start,D.start)<=0)_(D,g,1);else return null;else if(b&&!L)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.end,D.start)<=0)_(D,g,-1);else return null;else if(!b&&L)if(a(g.start,D.start)>=0)_(g,D,1);else if(a(g.start,D.start)<=0)_(D,g,1);else return null;else if(!b&&!L)if(a(g.start,D.start)>=0)_(g,D,1);else if(a(g.end,D.start)<=0)_(D,g,-1);else return null;return[g,D]}function o(D,g){for(var b=D.length;b--;)for(var L=0;L<g.length;L++)if(!f(D[b],g[L])){for(;b<D.length;){for(;L--;)f(g[L],D[b]);L=g.length,b++}return[D,g]}return D.selectionBefore=g.selectionBefore=D.selectionAfter=g.selectionAfter=null,[g,D]}function h(D,g){var b=D.action=="insert",L=g.action=="insert";if(b&&L)a(D.start,g.start)<0?_(g,D,1):_(D,g,1);else if(b&&!L)a(D.start,g.end)>=0?_(D,g,-1):(a(D.start,g.start)<=0||_(D,s.fromPoints(g.start,D.start),-1),_(g,D,1));else if(!b&&L)a(g.start,D.end)>=0?_(g,D,-1):(a(g.start,D.start)<=0||_(g,s.fromPoints(D.start,g.start),-1),_(D,g,1));else if(!b&&!L)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.end,D.start)<=0)_(D,g,-1);else{var w,T;return a(D.start,g.start)<0&&(w=D,D=y(D,g.start)),a(D.end,g.end)>0&&(T=y(D,g.end)),m(g.end,D.start,D.end,-1),T&&!w&&(D.lines=T.lines,D.start=T.start,D.end=T.end,T=D),[g,w,T].filter(Boolean)}return[g,D]}function _(D,g,b){m(D.start,g.start,g.end,b),m(D.end,g.start,g.end,b)}function m(D,g,b,L){D.row==(L==1?g:b).row&&(D.column+=L*(b.column-g.column)),D.row+=L*(b.row-g.row)}function y(D,g){var b=D.lines,L=D.end;D.end=r(g);var w=D.end.row-D.start.row,T=b.splice(w,b.length),M=w?g.column:g.column-D.start.column;b.push(T[0].substring(0,M)),T[0]=T[0].substr(M);var S={start:r(g),end:L,lines:T,action:D.action};return S}function C(D,g){g=u(g);for(var b=D.length;b--;){for(var L=D[b],w=0;w<L.length;w++){var T=L[w],M=h(T,g);g=M[0],M.length!=2&&(M[2]?(L.splice(w+1,1,M[1],M[2]),w++):M[1]||(L.splice(w,1),w--))}L.length||D.splice(b,1)}return D}function E(D,g){for(var b=0;b<g.length;b++)for(var L=g[b],w=0;w<L.length;w++)C(D,L[w])}t.UndoManager=c});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("../range").Range,v=function(){function s(a,d){this.foldData=a,Array.isArray(d)?this.folds=d:d=this.folds=[d];var i=d[d.length-1];this.range=new c(d[0].start.row,d[0].start.column,i.end.row,i.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(r){r.setFoldLine(this)},this)}return s.prototype.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(d){d.start.row+=a,d.end.row+=a})},s.prototype.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a),this.folds.sort(function(d,i){return-d.range.compareEnd(i.start.row,i.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else if(a.end.row==this.start.row)this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");a.foldLine=this},s.prototype.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},s.prototype.walk=function(a,d,i){var r=0,u=this.folds,l,p,f,o=!0;d==null&&(d=this.end.row,i=this.end.column);for(var h=0;h<u.length;h++){if(l=u[h],p=l.range.compareStart(d,i),p==-1){a(null,d,i,r,o);return}if(f=a(null,l.start.row,l.start.column,r,o),f=!f&&a(l.placeholder,l.start.row,l.start.column,r),f||p===0)return;o=!l.sameRow,r=l.end.column}a(null,d,i,r,o)},s.prototype.getNextFoldTo=function(a,d){for(var i,r,u=0;u<this.folds.length;u++){if(i=this.folds[u],r=i.range.compareEnd(a,d),r==-1)return{fold:i,kind:"after"};if(r===0)return{fold:i,kind:"inside"}}return null},s.prototype.addRemoveChars=function(a,d,i){var r=this.getNextFoldTo(a,d),u,l;if(r){if(u=r.fold,r.kind=="inside"&&u.start.column!=d&&u.start.row!=a)window.console&&window.console.log(a,d,u);else if(u.start.row==a){l=this.folds;var p=l.indexOf(u);for(p===0&&(this.start.column+=i),p;p<l.length;p++){if(u=l[p],u.start.column+=i,!u.sameRow)return;u.end.column+=i}this.end.column+=i}}},s.prototype.split=function(a,d){var i=this.getNextFoldTo(a,d);if(!i||i.kind=="inside")return null;var r=i.fold,u=this.folds,l=this.foldData,p=u.indexOf(r),f=u[p-1];this.end.row=f.end.row,this.end.column=f.end.column,u=u.splice(p,u.length-p);var o=new s(l,u);return l.splice(l.indexOf(this)+1,0,o),o},s.prototype.merge=function(a){for(var d=a.folds,i=0;i<d.length;i++)this.addFold(d[i]);var r=this.foldData;r.splice(r.indexOf(a),1)},s.prototype.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(d){a.push("  "+d.toString())}),a.push("]"),a.join(`
`)},s.prototype.idxToPosition=function(a){for(var d=0,i=0;i<this.folds.length;i++){var r=this.folds[i];if(a-=r.start.column-d,a<0)return{row:r.start.row,column:r.start.column+a};if(a-=r.placeholder.length,a<0)return r.start;d=r.end.column}return{row:this.end.row,column:this.end.column+a}},s}();t.FoldLine=v});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("./range").Range,v=c.comparePoints,s=function(){function a(){this.ranges=[],this.$bias=1}return a.prototype.pointIndex=function(d,i,r){for(var u=this.ranges,l=r||0;l<u.length;l++){var p=u[l],f=v(d,p.end);if(!(f>0)){var o=v(d,p.start);return f===0?i&&o!==0?-l-2:l:o>0||o===0&&!i?l:-l-1}}return-l-1},a.prototype.add=function(d){var i=!d.isEmpty(),r=this.pointIndex(d.start,i);r<0&&(r=-r-1);var u=this.pointIndex(d.end,i,r);return u<0?u=-u-1:u++,this.ranges.splice(r,u-r,d)},a.prototype.addList=function(d){for(var i=[],r=d.length;r--;)i.push.apply(i,this.add(d[r]));return i},a.prototype.substractPoint=function(d){var i=this.pointIndex(d);if(i>=0)return this.ranges.splice(i,1)},a.prototype.merge=function(){var d=[],i=this.ranges;i=i.sort(function(f,o){return v(f.start,o.start)});for(var r=i[0],u,l=1;l<i.length;l++){u=r,r=i[l];var p=v(u.end,r.start);p<0||p==0&&!u.isEmpty()&&!r.isEmpty()||(v(u.end,r.end)<0&&(u.end.row=r.end.row,u.end.column=r.end.column),i.splice(l,1),d.push(r),r=u,l--)}return this.ranges=i,d},a.prototype.contains=function(d,i){return this.pointIndex({row:d,column:i})>=0},a.prototype.containsPoint=function(d){return this.pointIndex(d)>=0},a.prototype.rangeAtPoint=function(d){var i=this.pointIndex(d);if(i>=0)return this.ranges[i]},a.prototype.clipRows=function(d,i){var r=this.ranges;if(r[0].start.row>i||r[r.length-1].start.row<d)return[];var u=this.pointIndex({row:d,column:0});u<0&&(u=-u-1);var l=this.pointIndex({row:i,column:0},u);l<0&&(l=-l-1);for(var p=[],f=u;f<l;f++)p.push(r[f]);return p},a.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},a.prototype.attach=function(d){this.session&&this.detach(),this.session=d,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},a.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},a.prototype.$onChange=function(d){for(var i=d.start,r=d.end,u=i.row,l=r.row,p=this.ranges,f=0,o=p.length;f<o;f++){var h=p[f];if(h.end.row>=u)break}if(d.action=="insert")for(var _=l-u,m=-i.column+r.column;f<o;f++){var h=p[f];if(h.start.row>u)break;if(h.start.row==u&&h.start.column>=i.column&&(h.start.column==i.column&&this.$bias<=0||(h.start.column+=m,h.start.row+=_)),h.end.row==u&&h.end.column>=i.column){if(h.end.column==i.column&&this.$bias<0)continue;h.end.column==i.column&&m>0&&f<o-1&&h.end.column>h.start.column&&h.end.column==p[f+1].start.column&&(h.end.column-=m),h.end.column+=m,h.end.row+=_}}else for(var _=u-l,m=i.column-r.column;f<o;f++){var h=p[f];if(h.start.row>l)break;h.end.row<l&&(u<h.end.row||u==h.end.row&&i.column<h.end.column)?(h.end.row=u,h.end.column=i.column):h.end.row==l?h.end.column<=r.column?(_||h.end.column>i.column)&&(h.end.column=i.column,h.end.row=i.row):(h.end.column+=m,h.end.row+=_):h.end.row>l&&(h.end.row+=_),h.start.row<l&&(u<h.start.row||u==h.start.row&&i.column<h.start.column)?(h.start.row=u,h.start.column=i.column):h.start.row==l?h.start.column<=r.column?(_||h.start.column>i.column)&&(h.start.column=i.column,h.start.row=i.row):(h.start.column+=m,h.start.row+=_):h.start.row>l&&(h.start.row+=_)}if(_!=0&&f<o)for(;f<o;f++){var h=p[f];h.start.row+=_,h.end.row+=_}},a}();s.prototype.comparePoints=v,t.RangeList=s});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var u=function(l,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(f[h]=o[h])},u(l,p)};return function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");u(l,p);function f(){this.constructor=l}l.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)}}(),v=e("../range_list").RangeList,s=function(u){c(l,u);function l(p,f){var o=u.call(this)||this;return o.foldLine=null,o.placeholder=f,o.range=p,o.start=p.start,o.end=p.end,o.sameRow=p.start.row==p.end.row,o.subFolds=o.ranges=[],o}return l.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},l.prototype.setFoldLine=function(p){this.foldLine=p,this.subFolds.forEach(function(f){f.setFoldLine(p)})},l.prototype.clone=function(){var p=this.range.clone(),f=new l(p,this.placeholder);return this.subFolds.forEach(function(o){f.subFolds.push(o.clone())}),f.collapseChildren=this.collapseChildren,f},l.prototype.addSubFold=function(p){if(!this.range.isEqual(p)){d(p,this.start);for(var m=p.start.row,y=p.start.column,f=0,o=-1;f<this.subFolds.length&&(o=this.subFolds[f].range.compare(m,y),o==1);f++);var h=this.subFolds[f],_=0;if(o==0){if(h.range.containsRange(p))return h.addSubFold(p);_=1}for(var m=p.range.end.row,y=p.range.end.column,C=f,o=-1;C<this.subFolds.length&&(o=this.subFolds[C].range.compare(m,y),o==1);C++);o==0&&C++;for(var E=this.subFolds.splice(f,C-f,p),D=o==0?E.length-1:E.length,g=_;g<D;g++)p.addSubFold(E[g]);return p.setFoldLine(this.foldLine),p}},l.prototype.restoreRange=function(p){return r(p,this.start)},l}(v);function a(u,l){u.row-=l.row,u.row==0&&(u.column-=l.column)}function d(u,l){a(u.start,l),a(u.end,l)}function i(u,l){u.row==0&&(u.column+=l.column),u.row+=l.row}function r(u,l){i(u.start,l),i(u.end,l)}t.Fold=s});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,n){"use strict";var c=e("../range").Range,v=e("./fold_line").FoldLine,s=e("./fold").Fold,a=e("../token_iterator").TokenIterator,d=e("../mouse/mouse_event").MouseEvent;function i(){this.getFoldAt=function(r,u,l){var p=this.getFoldLine(r);if(!p)return null;for(var f=p.folds,o=0;o<f.length;o++){var h=f[o].range;if(h.contains(r,u)){if(l==1&&h.isEnd(r,u)&&!h.isEmpty())continue;if(l==-1&&h.isStart(r,u)&&!h.isEmpty())continue;return f[o]}}},this.getFoldsInRange=function(r){var u=r.start,l=r.end,p=this.$foldData,f=[];u.column+=1,l.column-=1;for(var o=0;o<p.length;o++){var h=p[o].range.compareRange(r);if(h!=2){if(h==-2)break;for(var _=p[o].folds,m=0;m<_.length;m++){var y=_[m];if(h=y.range.compareRange(r),h==-2)break;if(h==2)continue;if(h==42)break;f.push(y)}}}return u.column-=1,l.column+=1,f},this.getFoldsInRangeList=function(r){if(Array.isArray(r)){var u=[];r.forEach(function(l){u=u.concat(this.getFoldsInRange(l))},this)}else var u=this.getFoldsInRange(r);return u},this.getAllFolds=function(){for(var r=[],u=this.$foldData,l=0;l<u.length;l++)for(var p=0;p<u[l].folds.length;p++)r.push(u[l].folds[p]);return r},this.getFoldStringAt=function(r,u,l,p){if(p=p||this.getFoldLine(r),!p)return null;for(var f={end:{column:0}},o,h,_=0;_<p.folds.length;_++){h=p.folds[_];var m=h.range.compareEnd(r,u);if(m==-1){o=this.getLine(h.start.row).substring(f.end.column,h.start.column);break}else if(m===0)return null;f=h}return o||(o=this.getLine(h.start.row).substring(f.end.column)),l==-1?o.substring(0,u-f.end.column):l==1?o.substring(u-f.end.column):o},this.getFoldLine=function(r,u){var l=this.$foldData,p=0;for(u&&(p=l.indexOf(u)),p==-1&&(p=0),p;p<l.length;p++){var f=l[p];if(f.start.row<=r&&f.end.row>=r)return f;if(f.end.row>r)return null}return null},this.getNextFoldLine=function(r,u){var l=this.$foldData,p=0;for(u&&(p=l.indexOf(u)),p==-1&&(p=0),p;p<l.length;p++){var f=l[p];if(f.end.row>=r)return f}return null},this.getFoldedRowCount=function(r,u){for(var l=this.$foldData,p=u-r+1,f=0;f<l.length;f++){var o=l[f],h=o.end.row,_=o.start.row;if(h>=u){_<u&&(_>=r?p-=u-_:p=0);break}else h>=r&&(_>=r?p-=h-_:p-=h-r+1)}return p},this.$addFoldLine=function(r){return this.$foldData.push(r),this.$foldData.sort(function(u,l){return u.start.row-l.start.row}),r},this.addFold=function(r,u){var l=this.$foldData,p=!1,f;r instanceof s?f=r:(f=new s(u,r),f.collapseChildren=u.collapseChildren),this.$clipRangeToDocument(f.range);var o=f.start.row,h=f.start.column,_=f.end.row,m=f.end.column,y=this.getFoldAt(o,h,1),C=this.getFoldAt(_,m,-1);if(y&&C==y)return y.addSubFold(f);y&&!y.range.isStart(o,h)&&this.removeFold(y),C&&!C.range.isEnd(_,m)&&this.removeFold(C);var E=this.getFoldsInRange(f.range);E.length>0&&(this.removeFolds(E),f.collapseChildren||E.forEach(function(L){f.addSubFold(L)}));for(var D=0;D<l.length;D++){var g=l[D];if(_==g.start.row){g.addFold(f),p=!0;break}else if(o==g.end.row){if(g.addFold(f),p=!0,!f.sameRow){var b=l[D+1];if(b&&b.start.row==_){g.merge(b);break}}break}else if(_<=g.start.row)break}return p||(g=this.$addFoldLine(new v(this.$foldData,f))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:f,action:"add"}),f},this.addFolds=function(r){r.forEach(function(u){this.addFold(u)},this)},this.removeFold=function(r){var u=r.foldLine,l=u.start.row,p=u.end.row,f=this.$foldData,o=u.folds;if(o.length==1)f.splice(f.indexOf(u),1);else if(u.range.isEnd(r.end.row,r.end.column))o.pop(),u.end.row=o[o.length-1].end.row,u.end.column=o[o.length-1].end.column;else if(u.range.isStart(r.start.row,r.start.column))o.shift(),u.start.row=o[0].start.row,u.start.column=o[0].start.column;else if(r.sameRow)o.splice(o.indexOf(r),1);else{var h=u.split(r.start.row,r.start.column);o=h.folds,o.shift(),h.start.row=o[0].start.row,h.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(l,p):this.$updateRowLengthCache(l,p)),this.$modified=!0,this._signal("changeFold",{data:r,action:"remove"})},this.removeFolds=function(r){for(var u=[],l=0;l<r.length;l++)u.push(r[l]);u.forEach(function(p){this.removeFold(p)},this),this.$modified=!0},this.expandFold=function(r){this.removeFold(r),r.subFolds.forEach(function(u){r.restoreRange(u),this.addFold(u)},this),r.collapseChildren>0&&this.foldAll(r.start.row+1,r.end.row,r.collapseChildren-1),r.subFolds=[]},this.expandFolds=function(r){r.forEach(function(u){this.expandFold(u)},this)},this.unfold=function(r,u){var l,p;if(r==null)l=new c(0,0,this.getLength(),0),u==null&&(u=!0);else if(typeof r=="number")l=new c(r,0,r,this.getLine(r).length);else if("row"in r)l=c.fromPoints(r,r);else{if(Array.isArray(r))return p=[],r.forEach(function(o){p=p.concat(this.unfold(o))},this),p;l=r}p=this.getFoldsInRangeList(l);for(var f=p;p.length==1&&c.comparePoints(p[0].start,l.start)<0&&c.comparePoints(p[0].end,l.end)>0;)this.expandFolds(p),p=this.getFoldsInRangeList(l);if(u!=!1?this.removeFolds(p):this.expandFolds(p),f.length)return f},this.isRowFolded=function(r,u){return!!this.getFoldLine(r,u)},this.getRowFoldEnd=function(r,u){var l=this.getFoldLine(r,u);return l?l.end.row:r},this.getRowFoldStart=function(r,u){var l=this.getFoldLine(r,u);return l?l.start.row:r},this.getFoldDisplayLine=function(r,u,l,p,f){p==null&&(p=r.start.row),f==null&&(f=0),u==null&&(u=r.end.row),l==null&&(l=this.getLine(u).length);var o=this.doc,h="";return r.walk(function(_,m,y,C){if(!(m<p)){if(m==p){if(y<f)return;C=Math.max(f,C)}_!=null?h+=_:h+=o.getLine(m).substring(C,y)}},u,l),h},this.getDisplayLine=function(r,u,l,p){var f=this.getFoldLine(r);if(f)return this.getFoldDisplayLine(f,r,u,l,p);var o;return o=this.doc.getLine(r),o.substring(p||0,u||o.length)},this.$cloneFoldData=function(){var r=[];return r=this.$foldData.map(function(u){var l=u.folds.map(function(p){return p.clone()});return new v(r,l)}),r},this.toggleFold=function(r){var u=this.selection,l=u.getRange(),p,f;if(l.isEmpty()){var o=l.start;if(p=this.getFoldAt(o.row,o.column),p){this.expandFold(p);return}else(f=this.findMatchingBracket(o))?l.comparePoint(f)==1?l.end=f:(l.start=f,l.start.column++,l.end.column--):(f=this.findMatchingBracket({row:o.row,column:o.column+1}))?(l.comparePoint(f)==1?l.end=f:l.start=f,l.start.column++):l=this.getCommentFoldRange(o.row,o.column)||l}else{var h=this.getFoldsInRange(l);if(r&&h.length){this.expandFolds(h);return}else h.length==1&&(p=h[0])}if(p||(p=this.getFoldAt(l.start.row,l.start.column)),p&&p.range.toString()==l.toString()){this.expandFold(p);return}var _="...";if(!l.isMultiLine()){if(_=this.getTextRange(l),_.length<4)return;_=_.trim().substring(0,2)+".."}this.addFold(_,l)},this.getCommentFoldRange=function(r,u,l){var p=new a(this,r,u),f=p.getCurrentToken(),o=f&&f.type;if(f&&/^comment|string/.test(o)){o=o.match(/comment|string/)[0],o=="comment"&&(o+="|doc-start|\\.doc");var h=new RegExp(o),_=new c;if(l!=1){do f=p.stepBackward();while(f&&h.test(f.type)&&!/^comment.end/.test(f.type));f=p.stepForward()}if(_.start.row=p.getCurrentTokenRow(),_.start.column=p.getCurrentTokenColumn()+(/^comment.start/.test(f.type)?f.value.length:2),p=new a(this,r,u),l!=-1){var m=-1;do if(f=p.stepForward(),m==-1){var y=this.getState(p.$row);h.test(y)||(m=p.$row)}else if(p.$row>m)break;while(f&&h.test(f.type)&&!/^comment.start/.test(f.type));f=p.stepBackward()}else f=p.getCurrentToken();return _.end.row=p.getCurrentTokenRow(),_.end.column=p.getCurrentTokenColumn(),/^comment.end/.test(f.type)||(_.end.column+=f.value.length-2),_}},this.foldAll=function(r,u,l,p){l==null&&(l=1e5);var f=this.foldWidgets;if(f){u=u||this.getLength(),r=r||0;for(var o=r;o<u;o++)if(f[o]==null&&(f[o]=this.getFoldWidget(o)),f[o]=="start"&&!(p&&!p(o))){var h=this.getFoldWidgetRange(o);h&&h.isMultiLine()&&h.end.row<=u&&h.start.row>=r&&(o=h.end.row,h.collapseChildren=l,this.addFold("...",h))}}},this.foldToLevel=function(r){for(this.foldAll();r-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var r=this;this.foldAll(null,null,null,function(u){for(var l=r.getTokens(u),p=0;p<l.length;p++){var f=l[p];if(!(f.type=="text"&&/^\s+$/.test(f.value)))return!!/comment/.test(f.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(r){if(!this.$foldStyles[r])throw new Error("invalid fold style: "+r+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=r){this.$foldStyle=r,r=="manual"&&this.unfold();var u=this.$foldMode;this.$setFolding(null),this.$setFolding(u)}},this.$setFolding=function(r){if(this.$foldMode!=r){if(this.$foldMode=r,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!r||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=r.getFoldWidget.bind(r,this,this.$foldStyle),this.getFoldWidgetRange=r.getFoldWidgetRange.bind(r,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(r,u){var l=this.foldWidgets;if(!l||u&&l[r])return{};for(var p=r-1,f;p>=0;){var o=l[p];if(o==null&&(o=l[p]=this.getFoldWidget(p)),o=="start"){var h=this.getFoldWidgetRange(p);if(f||(f=h),h&&h.end.row>=r)break}p--}return{range:p!==-1&&h,firstRange:f}},this.onFoldWidgetClick=function(r,u){u instanceof d&&(u=u.domEvent);var l={children:u.shiftKey,all:u.ctrlKey||u.metaKey,siblings:u.altKey},p=this.$toggleFoldWidget(r,l);if(!p){var f=u.target||u.srcElement;f&&/ace_fold-widget/.test(f.className)&&(f.className+=" ace_invalid")}},this.$toggleFoldWidget=function(r,u){if(this.getFoldWidget){var l=this.getFoldWidget(r),p=this.getLine(r),f=l==="end"?-1:1,o=this.getFoldAt(r,f===-1?0:p.length,f);if(o)return u.children||u.all?this.removeFold(o):this.expandFold(o),o;var h=this.getFoldWidgetRange(r,!0);if(h&&!h.isMultiLine()&&(o=this.getFoldAt(h.start.row,h.start.column,1),o&&h.isEqual(o.range)))return this.removeFold(o),o;if(u.siblings){var _=this.getParentFoldRangeData(r);if(_.range)var m=_.range.start.row+1,y=_.range.end.row;this.foldAll(m,y,u.all?1e4:0)}else u.children?(y=h?h.end.row:this.getLength(),this.foldAll(r+1,y,u.all?1e4:0)):h&&(u.all&&(h.collapseChildren=1e4),this.addFold("...",h));return h}},this.toggleFoldWidget=function(r){var u=this.selection.getCursor().row;u=this.getRowFoldStart(u);var l=this.$toggleFoldWidget(u,{});if(!l){var p=this.getParentFoldRangeData(u,!0);if(l=p.range||p.firstRange,l){u=l.start.row;var f=this.getFoldAt(u,this.getLine(u).length,1);f?this.removeFold(f):this.addFold("...",l)}}},this.updateFoldWidgets=function(r){var u=r.start.row,l=r.end.row-u;if(l===0)this.foldWidgets[u]=null;else if(r.action=="remove")this.foldWidgets.splice(u,l+1,null);else{var p=Array(l+1);p.unshift(u,1),this.foldWidgets.splice.apply(this.foldWidgets,p)}},this.tokenizerUpdateFoldWidgets=function(r){var u=r.data;u.first!=u.last&&this.foldWidgets.length>u.first&&this.foldWidgets.splice(u.first,this.foldWidgets.length)}}t.Folding=i});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var c=e("../token_iterator").TokenIterator,v=e("../range").Range;function s(){this.findMatchingBracket=function(a,d){if(a.column==0)return null;var i=d||this.getLine(a.row).charAt(a.column-1);if(i=="")return null;var r=i.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],a):this.$findOpeningBracket(r[2],a):null},this.getBracketRange=function(a){var d=this.getLine(a.row),i=!0,r,u=d.charAt(a.column-1),l=u&&u.match(/([\(\[\{])|([\)\]\}])/);if(l||(u=d.charAt(a.column),a={row:a.row,column:a.column+1},l=u&&u.match(/([\(\[\{])|([\)\]\}])/),i=!1),!l)return null;if(l[1]){var p=this.$findClosingBracket(l[1],a);if(!p)return null;r=v.fromPoints(a,p),i||(r.end.column++,r.start.column--),r.cursor=r.end}else{var p=this.$findOpeningBracket(l[2],a);if(!p)return null;r=v.fromPoints(p,a),i||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.getMatchingBracketRanges=function(a,d){var i=this.getLine(a.row),r=/([\(\[\{])|([\)\]\}])/,u=!d&&i.charAt(a.column-1),l=u&&u.match(r);if(l||(u=(d===void 0||d)&&i.charAt(a.column),a={row:a.row,column:a.column+1},l=u&&u.match(r)),!l)return null;var p=new v(a.row,a.column-1,a.row,a.column),f=l[1]?this.$findClosingBracket(l[1],a):this.$findOpeningBracket(l[2],a);if(!f)return[p];var o=new v(f.row,f.column,f.row,f.column+1);return[p,o]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(a,d,i){var r=this.$brackets[a],u=1,l=new c(this,d.row,d.column),p=l.getCurrentToken();if(p||(p=l.stepForward()),!!p){i||(i=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var f=d.column-l.getCurrentTokenColumn()-2,o=p.value;;){for(;f>=0;){var h=o.charAt(f);if(h==r){if(u-=1,u==0)return{row:l.getCurrentTokenRow(),column:f+l.getCurrentTokenColumn()}}else h==a&&(u+=1);f-=1}do p=l.stepBackward();while(p&&!i.test(p.type));if(p==null)break;o=p.value,f=o.length-1}return null}},this.$findClosingBracket=function(a,d,i){var r=this.$brackets[a],u=1,l=new c(this,d.row,d.column),p=l.getCurrentToken();if(p||(p=l.stepForward()),!!p){i||(i=new RegExp("(\\.?"+p.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var f=d.column-l.getCurrentTokenColumn();;){for(var o=p.value,h=o.length;f<h;){var _=o.charAt(f);if(_==r){if(u-=1,u==0)return{row:l.getCurrentTokenRow(),column:f+l.getCurrentTokenColumn()}}else _==a&&(u+=1);f+=1}do p=l.stepForward();while(p&&!i.test(p.type));if(p==null)break;f=0}return null}},this.getMatchingTags=function(a){var d=new c(this,a.row,a.column),i=this.$findTagName(d);if(i){var r=d.stepBackward();return r.value==="<"?this.$findClosingTag(d,i):this.$findOpeningTag(d,i)}},this.$findTagName=function(a){var d=a.getCurrentToken(),i=!1,r=!1;if(d&&d.type.indexOf("tag-name")===-1)do r?d=a.stepBackward():d=a.stepForward(),d&&(d.value==="/>"?r=!0:d.type.indexOf("tag-name")!==-1&&(i=!0));while(d&&!i);return d},this.$findClosingTag=function(a,d){var i,r=d.value,u=d.value,l=0,p=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);d=a.stepForward();var f=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+d.value.length),o=!1;do if(i=d,d=a.stepForward(),d){if(d.value===">"&&!o){var h=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);o=!0}if(d.type.indexOf("tag-name")!==-1){if(r=d.value,u===r){if(i.value==="<")l++;else if(i.value==="</"&&(l--,l<0)){a.stepBackward();var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2);d=a.stepForward();var m=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+d.value.length);if(d=a.stepForward(),d&&d.value===">")var y=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);else return}}}else if(u===r&&d.value==="/>"&&(l--,l<0))var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2),m=_,y=m,h=new v(f.end.row,f.end.column,f.end.row,f.end.column+1)}while(d&&l>=0);if(p&&h&&_&&y&&f&&m)return{openTag:new v(p.start.row,p.start.column,h.end.row,h.end.column),closeTag:new v(_.start.row,_.start.column,y.end.row,y.end.column),openTagName:f,closeTagName:m}},this.$findOpeningTag=function(a,d){var i=a.getCurrentToken(),r=d.value,u=0,l=a.getCurrentTokenRow(),p=a.getCurrentTokenColumn(),f=p+2,o=new v(l,p,l,f);a.stepForward();var h=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+d.value.length);if(d=a.stepForward(),!(!d||d.value!==">")){var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);a.stepBackward(),a.stepBackward();do if(d=i,l=a.getCurrentTokenRow(),p=a.getCurrentTokenColumn(),f=p+d.value.length,i=a.stepBackward(),d){if(d.type.indexOf("tag-name")!==-1){if(r===d.value)if(i.value==="<"){if(u++,u>0){var m=new v(l,p,l,f),y=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);do d=a.stepForward();while(d&&d.value!==">");var C=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1)}}else i.value==="</"&&u--}else if(d.value==="/>"){for(var E=0,D=i;D;){if(D.type.indexOf("tag-name")!==-1&&D.value===r){u--;break}else if(D.value==="<")break;D=a.stepBackward(),E++}for(var g=0;g<E;g++)a.stepForward()}}while(i&&u<=0);if(y&&C&&o&&_&&m&&h)return{openTag:new v(y.start.row,y.start.column,C.end.row,C.end.column),closeTag:new v(o.start.row,o.start.column,_.end.row,_.end.column),openTagName:m,closeTagName:h}}}}t.BracketMatch=s});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/lang"),s=e("./bidihandler").BidiHandler,a=e("./config"),d=e("./lib/event_emitter").EventEmitter,i=e("./selection").Selection,r=e("./mode/text").Mode,u=e("./range").Range,l=e("./document").Document,p=e("./background_tokenizer").BackgroundTokenizer,f=e("./search_highlight").SearchHighlight,o=e("./undomanager").UndoManager,h=function(){function w(T,M){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++w.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new p(new r().getTokenizer(),this);var S=this;this.bgTokenizer.on("update",function(F){S._signal("tokenizerUpdate",F)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof T!="object"||!T.getLine)&&(T=new l(T)),this.setDocument(T),this.selection=new i(this),this.$bidiHandler=new s(this),a.resetOptions(this),this.setMode(M),a._signal("session",this),this.destroyed=!1}return w.prototype.setDocument=function(T){this.doc&&this.doc.off("change",this.$onChange),this.doc=T,T.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},w.prototype.getDocument=function(){return this.doc},w.prototype.$resetRowCache=function(T){if(!T){this.$docRowCache=[],this.$screenRowCache=[];return}var M=this.$docRowCache.length,S=this.$getRowCacheIndex(this.$docRowCache,T)+1;M>S&&(this.$docRowCache.splice(S,M),this.$screenRowCache.splice(S,M))},w.prototype.$getRowCacheIndex=function(T,M){for(var S=0,F=T.length-1;S<=F;){var x=S+F>>1,R=T[x];if(M>R)S=x+1;else if(M<R)F=x-1;else return x}return S-1},w.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},w.prototype.onChangeFold=function(T){var M=T.data;this.$resetRowCache(M.start.row)},w.prototype.onChange=function(T){this.$modified=!0,this.$bidiHandler.onChange(T),this.$resetRowCache(T.start.row);var M=this.$updateInternalDataOnChange(T);!this.$fromUndo&&this.$undoManager&&(M&&M.length&&(this.$undoManager.add({action:"removeFolds",folds:M},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(T,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(T),this._signal("change",T)},w.prototype.setValue=function(T){this.doc.setValue(T),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},w.fromJSON=function(T){typeof T=="string"&&(T=JSON.parse(T));var M=new o;M.$undoStack=T.history.undo,M.$redoStack=T.history.redo,M.mark=T.history.mark,M.$rev=T.history.rev;var S=new w(T.value);return T.folds.forEach(function(F){S.addFold("...",u.fromPoints(F.start,F.end))}),S.setAnnotations(T.annotations),S.setBreakpoints(T.breakpoints),S.setMode(T.mode),S.setScrollLeft(T.scrollLeft),S.setScrollTop(T.scrollTop),S.setUndoManager(M),S.selection.fromJSON(T.selection),S},w.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(T){return T.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},w.prototype.toString=function(){return this.doc.getValue()},w.prototype.getSelection=function(){return this.selection},w.prototype.getState=function(T){return this.bgTokenizer.getState(T)},w.prototype.getTokens=function(T){return this.bgTokenizer.getTokens(T)},w.prototype.getTokenAt=function(T,M){var S=this.bgTokenizer.getTokens(T),F,x=0;if(M==null){var R=S.length-1;x=this.getLine(T).length}else for(var R=0;R<S.length&&(x+=S[R].value.length,!(x>=M));R++);return F=S[R],F?(F.index=R,F.start=x-F.value.length,F):null},w.prototype.setUndoManager=function(T){if(this.$undoManager=T,this.$informUndoManager&&this.$informUndoManager.cancel(),T){var M=this;T.addSession(this),this.$syncInformUndoManager=function(){M.$informUndoManager.cancel(),M.mergeUndoDeltas=!1},this.$informUndoManager=v.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},w.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},w.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},w.prototype.getTabString=function(){return this.getUseSoftTabs()?v.stringRepeat(" ",this.getTabSize()):"	"},w.prototype.setUseSoftTabs=function(T){this.setOption("useSoftTabs",T)},w.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},w.prototype.setTabSize=function(T){this.setOption("tabSize",T)},w.prototype.getTabSize=function(){return this.$tabSize},w.prototype.isTabStop=function(T){return this.$useSoftTabs&&T.column%this.$tabSize===0},w.prototype.setNavigateWithinSoftTabs=function(T){this.setOption("navigateWithinSoftTabs",T)},w.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},w.prototype.setOverwrite=function(T){this.setOption("overwrite",T)},w.prototype.getOverwrite=function(){return this.$overwrite},w.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},w.prototype.addGutterDecoration=function(T,M){this.$decorations[T]||(this.$decorations[T]=""),this.$decorations[T]+=" "+M,this._signal("changeBreakpoint",{})},w.prototype.removeGutterDecoration=function(T,M){this.$decorations[T]=(this.$decorations[T]||"").replace(" "+M,""),this._signal("changeBreakpoint",{})},w.prototype.getBreakpoints=function(){return this.$breakpoints},w.prototype.setBreakpoints=function(T){this.$breakpoints=[];for(var M=0;M<T.length;M++)this.$breakpoints[T[M]]="ace_breakpoint";this._signal("changeBreakpoint",{})},w.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},w.prototype.setBreakpoint=function(T,M){M===void 0&&(M="ace_breakpoint"),M?this.$breakpoints[T]=M:delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},w.prototype.clearBreakpoint=function(T){delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},w.prototype.addMarker=function(T,M,S,F){var x=this.$markerId++,R={range:T,type:S||"line",renderer:typeof S=="function"?S:null,clazz:M,inFront:!!F,id:x};return F?(this.$frontMarkers[x]=R,this._signal("changeFrontMarker")):(this.$backMarkers[x]=R,this._signal("changeBackMarker")),x},w.prototype.addDynamicMarker=function(T,M){if(T.update){var S=this.$markerId++;return T.id=S,T.inFront=!!M,M?(this.$frontMarkers[S]=T,this._signal("changeFrontMarker")):(this.$backMarkers[S]=T,this._signal("changeBackMarker")),T}},w.prototype.removeMarker=function(T){var M=this.$frontMarkers[T]||this.$backMarkers[T];if(M){var S=M.inFront?this.$frontMarkers:this.$backMarkers;delete S[T],this._signal(M.inFront?"changeFrontMarker":"changeBackMarker")}},w.prototype.getMarkers=function(T){return T?this.$frontMarkers:this.$backMarkers},w.prototype.highlight=function(T){if(!this.$searchHighlight){var M=new f(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(M)}this.$searchHighlight.setRegexp(T)},w.prototype.highlightLines=function(T,M,S,F){typeof M!="number"&&(S=M,M=T),S||(S="ace_step");var x=new u(T,0,M,1/0);return x.id=this.addMarker(x,S,"fullLine",F),x},w.prototype.setAnnotations=function(T){this.$annotations=T,this._signal("changeAnnotation",{})},w.prototype.getAnnotations=function(){return this.$annotations||[]},w.prototype.clearAnnotations=function(){this.setAnnotations([])},w.prototype.$detectNewLine=function(T){var M=T.match(/^.*?(\r?\n)/m);M?this.$autoNewLine=M[1]:this.$autoNewLine=`
`},w.prototype.getWordRange=function(T,M){var S=this.getLine(T),F=!1;if(M>0&&(F=!!S.charAt(M-1).match(this.tokenRe)),F||(F=!!S.charAt(M).match(this.tokenRe)),F)var x=this.tokenRe;else if(/^\s+$/.test(S.slice(M-1,M+1)))var x=/\s/;else var x=this.nonTokenRe;var R=M;if(R>0){do R--;while(R>=0&&S.charAt(R).match(x));R++}for(var A=M;A<S.length&&S.charAt(A).match(x);)A++;return new u(T,R,T,A)},w.prototype.getAWordRange=function(T,M){for(var S=this.getWordRange(T,M),F=this.getLine(S.end.row);F.charAt(S.end.column).match(/[ \t]/);)S.end.column+=1;return S},w.prototype.setNewLineMode=function(T){this.doc.setNewLineMode(T)},w.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},w.prototype.setUseWorker=function(T){this.setOption("useWorker",T)},w.prototype.getUseWorker=function(){return this.$useWorker},w.prototype.onReloadTokenizer=function(T){var M=T.data;this.bgTokenizer.start(M.first),this._signal("tokenizerUpdate",T)},w.prototype.setMode=function(T,M){if(T&&typeof T=="object"){if(T.getTokenizer)return this.$onChangeMode(T);var S=T,F=S.path}else F=T||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new r),this.$modes[F]&&!S){this.$onChangeMode(this.$modes[F]),M&&M();return}this.$modeId=F,a.loadModule(["mode",F],function(x){if(this.$modeId!==F)return M&&M();this.$modes[F]&&!S?this.$onChangeMode(this.$modes[F]):x&&x.Mode&&(x=new x.Mode(S),S||(this.$modes[F]=x,x.$id=F),this.$onChangeMode(x)),M&&M()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},w.prototype.$onChangeMode=function(T,M){if(M||(this.$modeId=T.$id),this.$mode!==T){var S=this.$mode;this.$mode=T,this.$stopWorker(),this.$useWorker&&this.$startWorker();var F=T.getTokenizer();if(F.on!==void 0){var x=this.onReloadTokenizer.bind(this);F.on("update",x)}this.bgTokenizer.setTokenizer(F),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=T.tokenRe,this.nonTokenRe=T.nonTokenRe,M||(T.attachToSession&&T.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(T.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:S,mode:T}))}},w.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},w.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(T){a.warn("Could not load worker",T),this.$worker=null}},w.prototype.getMode=function(){return this.$mode},w.prototype.setScrollTop=function(T){this.$scrollTop===T||isNaN(T)||(this.$scrollTop=T,this._signal("changeScrollTop",T))},w.prototype.getScrollTop=function(){return this.$scrollTop},w.prototype.setScrollLeft=function(T){this.$scrollLeft===T||isNaN(T)||(this.$scrollLeft=T,this._signal("changeScrollLeft",T))},w.prototype.getScrollLeft=function(){return this.$scrollLeft},w.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},w.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var T=0;return this.lineWidgets.forEach(function(M){M&&M.screenWidth>T&&(T=M.screenWidth)}),this.lineWidgetWidth=T},w.prototype.$computeWidth=function(T){if(this.$modified||T){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var M=this.doc.getAllLines(),S=this.$rowLengthCache,F=0,x=0,R=this.$foldData[x],A=R?R.start.row:1/0,I=M.length,$=0;$<I;$++){if($>A){if($=R.end.row+1,$>=I)break;R=this.$foldData[x++],A=R?R.start.row:1/0}S[$]==null&&(S[$]=this.$getStringScreenWidth(M[$])[0]),S[$]>F&&(F=S[$])}this.screenWidth=F}},w.prototype.getLine=function(T){return this.doc.getLine(T)},w.prototype.getLines=function(T,M){return this.doc.getLines(T,M)},w.prototype.getLength=function(){return this.doc.getLength()},w.prototype.getTextRange=function(T){return this.doc.getTextRange(T||this.selection.getRange())},w.prototype.insert=function(T,M){return this.doc.insert(T,M)},w.prototype.remove=function(T){return this.doc.remove(T)},w.prototype.removeFullLines=function(T,M){return this.doc.removeFullLines(T,M)},w.prototype.undoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var S=T.length-1;S!=-1;S--){var F=T[S];F.action=="insert"||F.action=="remove"?this.doc.revertDelta(F):F.folds&&this.addFolds(F.folds)}!M&&this.$undoSelect&&(T.selectionBefore?this.selection.fromJSON(T.selectionBefore):this.selection.setRange(this.$getUndoSelection(T,!0))),this.$fromUndo=!1}},w.prototype.redoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var S=0;S<T.length;S++){var F=T[S];(F.action=="insert"||F.action=="remove")&&this.doc.$safeApplyDelta(F)}!M&&this.$undoSelect&&(T.selectionAfter?this.selection.fromJSON(T.selectionAfter):this.selection.setRange(this.$getUndoSelection(T,!1))),this.$fromUndo=!1}},w.prototype.setUndoSelect=function(T){this.$undoSelect=T},w.prototype.$getUndoSelection=function(T,M){function S(I){return M?I.action!=="insert":I.action==="insert"}for(var F,x,R=0;R<T.length;R++){var A=T[R];if(A.start){if(!F){S(A)?F=u.fromPoints(A.start,A.end):F=u.fromPoints(A.start,A.start);continue}S(A)?(x=A.start,F.compare(x.row,x.column)==-1&&F.setStart(x),x=A.end,F.compare(x.row,x.column)==1&&F.setEnd(x)):(x=A.start,F.compare(x.row,x.column)==-1&&(F=u.fromPoints(A.start,A.start)))}}return F},w.prototype.replace=function(T,M){return this.doc.replace(T,M)},w.prototype.moveText=function(T,M,S){var F=this.getTextRange(T),x=this.getFoldsInRange(T),R=u.fromPoints(M,M);if(!S){this.remove(T);var A=T.start.row-T.end.row,I=A?-T.end.column:T.start.column-T.end.column;I&&(R.start.row==T.end.row&&R.start.column>T.end.column&&(R.start.column+=I),R.end.row==T.end.row&&R.end.column>T.end.column&&(R.end.column+=I)),A&&R.start.row>=T.end.row&&(R.start.row+=A,R.end.row+=A)}if(R.end=this.insert(R.start,F),x.length){var $=T.start,k=R.start,A=k.row-$.row,I=k.column-$.column;this.addFolds(x.map(function(q){return q=q.clone(),q.start.row==$.row&&(q.start.column+=I),q.end.row==$.row&&(q.end.column+=I),q.start.row+=A,q.end.row+=A,q}))}return R},w.prototype.indentRows=function(T,M,S){S=S.replace(/\t/g,this.getTabString());for(var F=T;F<=M;F++)this.doc.insertInLine({row:F,column:0},S)},w.prototype.outdentRows=function(T){for(var M=T.collapseRows(),S=new u(0,0,0,0),F=this.getTabSize(),x=M.start.row;x<=M.end.row;++x){var R=this.getLine(x);S.start.row=x,S.end.row=x;for(var A=0;A<F&&R.charAt(A)==" ";++A);A<F&&R.charAt(A)=="	"?(S.start.column=A,S.end.column=A+1):(S.start.column=0,S.end.column=A),this.remove(S)}},w.prototype.$moveLines=function(T,M,S){if(T=this.getRowFoldStart(T),M=this.getRowFoldEnd(M),S<0){var F=this.getRowFoldStart(T+S);if(F<0)return 0;var x=F-T}else if(S>0){var F=this.getRowFoldEnd(M+S);if(F>this.doc.getLength()-1)return 0;var x=F-M}else{T=this.$clipRowToDocument(T),M=this.$clipRowToDocument(M);var x=M-T+1}var R=new u(T,0,M,Number.MAX_VALUE),A=this.getFoldsInRange(R).map(function($){return $=$.clone(),$.start.row+=x,$.end.row+=x,$}),I=S==0?this.doc.getLines(T,M):this.doc.removeFullLines(T,M);return this.doc.insertFullLines(T+x,I),A.length&&this.addFolds(A),x},w.prototype.moveLinesUp=function(T,M){return this.$moveLines(T,M,-1)},w.prototype.moveLinesDown=function(T,M){return this.$moveLines(T,M,1)},w.prototype.duplicateLines=function(T,M){return this.$moveLines(T,M,0)},w.prototype.$clipRowToDocument=function(T){return Math.max(0,Math.min(T,this.doc.getLength()-1))},w.prototype.$clipColumnToRow=function(T,M){return M<0?0:Math.min(this.doc.getLine(T).length,M)},w.prototype.$clipPositionToDocument=function(T,M){if(M=Math.max(0,M),T<0)T=0,M=0;else{var S=this.doc.getLength();T>=S?(T=S-1,M=this.doc.getLine(S-1).length):M=Math.min(this.doc.getLine(T).length,M)}return{row:T,column:M}},w.prototype.$clipRangeToDocument=function(T){T.start.row<0?(T.start.row=0,T.start.column=0):T.start.column=this.$clipColumnToRow(T.start.row,T.start.column);var M=this.doc.getLength()-1;return T.end.row>M?(T.end.row=M,T.end.column=this.doc.getLine(M).length):T.end.column=this.$clipColumnToRow(T.end.row,T.end.column),T},w.prototype.setUseWrapMode=function(T){if(T!=this.$useWrapMode){if(this.$useWrapMode=T,this.$modified=!0,this.$resetRowCache(0),T){var M=this.getLength();this.$wrapData=Array(M),this.$updateWrapData(0,M-1)}this._signal("changeWrapMode")}},w.prototype.getUseWrapMode=function(){return this.$useWrapMode},w.prototype.setWrapLimitRange=function(T,M){(this.$wrapLimitRange.min!==T||this.$wrapLimitRange.max!==M)&&(this.$wrapLimitRange={min:T,max:M},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},w.prototype.adjustWrapLimit=function(T,M){var S=this.$wrapLimitRange;S.max<0&&(S={min:M,max:M});var F=this.$constrainWrapLimit(T,S.min,S.max);return F!=this.$wrapLimit&&F>1?(this.$wrapLimit=F,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},w.prototype.$constrainWrapLimit=function(T,M,S){return M&&(T=Math.max(M,T)),S&&(T=Math.min(S,T)),T},w.prototype.getWrapLimit=function(){return this.$wrapLimit},w.prototype.setWrapLimit=function(T){this.setWrapLimitRange(T,T)},w.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},w.prototype.$updateInternalDataOnChange=function(T){var M=this.$useWrapMode,S=T.action,F=T.start,x=T.end,R=F.row,A=x.row,I=A-R,$=null;if(this.$updating=!0,I!=0)if(S==="remove"){this[M?"$wrapData":"$rowLengthCache"].splice(R,I);var k=this.$foldData;$=this.getFoldsInRange(T),this.removeFolds($);var H=this.getFoldLine(x.row),U=0;if(H){H.addRemoveChars(x.row,x.column,F.column-x.column),H.shiftRow(-I);var q=this.getFoldLine(R);q&&q!==H&&(q.merge(H),H=q),U=k.indexOf(H)+1}for(U;U<k.length;U++){var H=k[U];H.start.row>=x.row&&H.shiftRow(-I)}A=R}else{var N=Array(I);N.unshift(R,0);var K=M?this.$wrapData:this.$rowLengthCache;K.splice.apply(K,N);var k=this.$foldData,H=this.getFoldLine(R),U=0;if(H){var O=H.range.compareInside(F.row,F.column);O==0?(H=H.split(F.row,F.column),H&&(H.shiftRow(I),H.addRemoveChars(A,0,x.column-F.column))):O==-1&&(H.addRemoveChars(R,0,x.column-F.column),H.shiftRow(I)),U=k.indexOf(H)+1}for(U;U<k.length;U++){var H=k[U];H.start.row>=R&&H.shiftRow(I)}}else{I=Math.abs(T.start.column-T.end.column),S==="remove"&&($=this.getFoldsInRange(T),this.removeFolds($),I=-I);var H=this.getFoldLine(R);H&&H.addRemoveChars(R,F.column,I)}return M&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,M?this.$updateWrapData(R,A):this.$updateRowLengthCache(R,A),$},w.prototype.$updateRowLengthCache=function(T,M){this.$rowLengthCache[T]=null,this.$rowLengthCache[M]=null},w.prototype.$updateWrapData=function(T,M){var S=this.doc.getAllLines(),F=this.getTabSize(),x=this.$wrapData,R=this.$wrapLimit,A,I,$=T;for(M=Math.min(M,S.length-1);$<=M;)I=this.getFoldLine($,I),I?(A=[],I.walk(function(k,H,U,q){var N;if(k!=null){N=this.$getDisplayTokens(k,A.length),N[0]=y;for(var K=1;K<N.length;K++)N[K]=C}else N=this.$getDisplayTokens(S[H].substring(q,U),A.length);A=A.concat(N)}.bind(this),I.end.row,S[I.end.row].length+1),x[I.start.row]=this.$computeWrapSplits(A,R,F),$=I.end.row+1):(A=this.$getDisplayTokens(S[$]),x[$]=this.$computeWrapSplits(A,R,F),$++)},w.prototype.$computeWrapSplits=function(T,M,S){if(T.length==0)return[];var F=[],x=T.length,R=0,A=0,I=this.$wrapAsCode,$=this.$indentedSoftWrap,k=M<=Math.max(2*S,8)||$===!1?0:Math.floor(M/2);function H(){var O=0;if(k===0)return O;if($)for(var B=0;B<T.length;B++){var W=T[B];if(W==D)O+=1;else if(W==g)O+=S;else{if(W==b)continue;break}}return I&&$!==!1&&(O+=S),Math.min(O,k)}function U(O){for(var B=O-R,W=R;W<O;W++){var P=T[W];(P===12||P===2)&&(B-=1)}F.length||(q=H(),F.indent=q),A+=B,F.push(A),R=O}for(var q=0;x-R>M-q;){var N=R+M-q;if(T[N-1]>=D&&T[N]>=D){U(N);continue}if(T[N]==y||T[N]==C){for(N;N!=R-1&&T[N]!=y;N--);if(N>R){U(N);continue}for(N=R+M,N;N<T.length&&T[N]==C;N++);if(N==T.length)break;U(N);continue}for(var K=Math.max(N-(M-(M>>2)),R-1);N>K&&T[N]<y;)N--;if(I){for(;N>K&&T[N]<y;)N--;for(;N>K&&T[N]==E;)N--}else for(;N>K&&T[N]<D;)N--;if(N>K){U(++N);continue}N=R+M,T[N]==m&&N--,U(N-q)}return F},w.prototype.$getDisplayTokens=function(T,M){var S=[],F;M=M||0;for(var x=0;x<T.length;x++){var R=T.charCodeAt(x);if(R==9){F=this.getScreenTabSize(S.length+M),S.push(g);for(var A=1;A<F;A++)S.push(b)}else R==32?S.push(D):R>39&&R<48||R>57&&R<64?S.push(E):R>=4352&&L(R)?S.push(_,m):S.push(_)}return S},w.prototype.$getStringScreenWidth=function(T,M,S){if(M==0)return[0,0];M==null&&(M=1/0),S=S||0;var F,x;for(x=0;x<T.length&&(F=T.charCodeAt(x),F==9?S+=this.getScreenTabSize(S):F>=4352&&L(F)?S+=2:S+=1,!(S>M));x++);return[S,x]},w.prototype.getRowLength=function(T){var M=1;return this.lineWidgets&&(M+=this.lineWidgets[T]&&this.lineWidgets[T].rowCount||0),!this.$useWrapMode||!this.$wrapData[T]?M:this.$wrapData[T].length+M},w.prototype.getRowLineCount=function(T){return!this.$useWrapMode||!this.$wrapData[T]?1:this.$wrapData[T].length+1},w.prototype.getRowWrapIndent=function(T){if(this.$useWrapMode){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE),S=this.$wrapData[M.row];return S.length&&S[0]<M.column?S.indent:0}else return 0},w.prototype.getScreenLastRowColumn=function(T){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE);return this.documentToScreenColumn(M.row,M.column)},w.prototype.getDocumentLastRowColumn=function(T,M){var S=this.documentToScreenRow(T,M);return this.getScreenLastRowColumn(S)},w.prototype.getDocumentLastRowColumnPosition=function(T,M){var S=this.documentToScreenRow(T,M);return this.screenToDocumentPosition(S,Number.MAX_VALUE/10)},w.prototype.getRowSplitData=function(T){if(this.$useWrapMode)return this.$wrapData[T]},w.prototype.getScreenTabSize=function(T){return this.$tabSize-(T%this.$tabSize|0)},w.prototype.screenToDocumentRow=function(T,M){return this.screenToDocumentPosition(T,M).row},w.prototype.screenToDocumentColumn=function(T,M){return this.screenToDocumentPosition(T,M).column},w.prototype.screenToDocumentPosition=function(T,M,S){if(T<0)return{row:0,column:0};var F,x=0,R=0,A,I=0,$=0,k=this.$screenRowCache,H=this.$getRowCacheIndex(k,T),U=k.length;if(U&&H>=0)var I=k[H],x=this.$docRowCache[H],q=T>k[U-1];else var q=!U;for(var N=this.getLength()-1,K=this.getNextFoldLine(x),O=K?K.start.row:1/0;I<=T&&($=this.getRowLength(x),!(I+$>T||x>=N));)I+=$,x++,x>O&&(x=K.end.row+1,K=this.getNextFoldLine(x,K),O=K?K.start.row:1/0),q&&(this.$docRowCache.push(x),this.$screenRowCache.push(I));if(K&&K.start.row<=x)F=this.getFoldDisplayLine(K),x=K.start.row;else{if(I+$<=T||x>N)return{row:N,column:this.getLine(N).length};F=this.getLine(x),K=null}var B=0,W=Math.floor(T-I);if(this.$useWrapMode){var P=this.$wrapData[x];P&&(A=P[W],W>0&&P.length&&(B=P.indent,R=P[W-1]||P[P.length-1],F=F.substring(R)))}return S!==void 0&&this.$bidiHandler.isBidiRow(I+W,x,W)&&(M=this.$bidiHandler.offsetToCol(S)),R+=this.$getStringScreenWidth(F,M-B)[1],this.$useWrapMode&&R>=A&&(R=A-1),K?K.idxToPosition(R):{row:x,column:R}},w.prototype.documentToScreenPosition=function(T,M){if(typeof M>"u")var S=this.$clipPositionToDocument(T.row,T.column);else S=this.$clipPositionToDocument(T,M);T=S.row,M=S.column;var F=0,x=null,R=null;R=this.getFoldAt(T,M,1),R&&(T=R.start.row,M=R.start.column);var A,I=0,$=this.$docRowCache,k=this.$getRowCacheIndex($,T),H=$.length;if(H&&k>=0)var I=$[k],F=this.$screenRowCache[k],U=T>$[H-1];else var U=!H;for(var q=this.getNextFoldLine(I),N=q?q.start.row:1/0;I<T;){if(I>=N){if(A=q.end.row+1,A>T)break;q=this.getNextFoldLine(A,q),N=q?q.start.row:1/0}else A=I+1;F+=this.getRowLength(I),I=A,U&&(this.$docRowCache.push(I),this.$screenRowCache.push(F))}var K="";q&&I>=N?(K=this.getFoldDisplayLine(q,T,M),x=q.start.row):(K=this.getLine(T).substring(0,M),x=T);var O=0;if(this.$useWrapMode){var B=this.$wrapData[x];if(B){for(var W=0;K.length>=B[W];)F++,W++;K=K.substring(B[W-1]||0,K.length),O=W>0?B.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(F+=this.lineWidgets[I].rowsAbove),{row:F,column:O+this.$getStringScreenWidth(K)[0]}},w.prototype.documentToScreenColumn=function(T,M){return this.documentToScreenPosition(T,M).column},w.prototype.documentToScreenRow=function(T,M){return this.documentToScreenPosition(T,M).row},w.prototype.getScreenLength=function(){var T=0,M=null;if(this.$useWrapMode)for(var x=this.$wrapData.length,R=0,F=0,M=this.$foldData[F++],A=M?M.start.row:1/0;R<x;){var I=this.$wrapData[R];T+=I?I.length+1:1,R++,R>A&&(R=M.end.row+1,M=this.$foldData[F++],A=M?M.start.row:1/0)}else{T=this.getLength();for(var S=this.$foldData,F=0;F<S.length;F++)M=S[F],T-=M.end.row-M.start.row}return this.lineWidgets&&(T+=this.$getWidgetScreenLength()),T},w.prototype.$setFontMetrics=function(T){this.$enableVarChar&&(this.$getStringScreenWidth=function(M,S,F){if(S===0)return[0,0];S||(S=1/0),F=F||0;var x,R;for(R=0;R<M.length&&(x=M.charAt(R),x==="	"?F+=this.getScreenTabSize(F):F+=T.getCharacterWidth(x),!(F>S));R++);return[F,R]})},w.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},w}();h.$uid=0,h.prototype.$modes=a.$modes,h.prototype.getValue=h.prototype.toString,h.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},h.prototype.$overwrite=!1,h.prototype.$mode=null,h.prototype.$modeId=null,h.prototype.$scrollTop=0,h.prototype.$scrollLeft=0,h.prototype.$wrapLimit=80,h.prototype.$useWrapMode=!1,h.prototype.$wrapLimitRange={min:null,max:null},h.prototype.lineWidgets=null,h.prototype.isFullWidth=L,c.implement(h.prototype,d);var _=1,m=2,y=3,C=4,E=9,D=10,g=11,b=12;function L(w){return w<4352?!1:w>=4352&&w<=4447||w>=4515&&w<=4519||w>=4602&&w<=4607||w>=9001&&w<=9002||w>=11904&&w<=11929||w>=11931&&w<=12019||w>=12032&&w<=12245||w>=12272&&w<=12283||w>=12288&&w<=12350||w>=12353&&w<=12438||w>=12441&&w<=12543||w>=12549&&w<=12589||w>=12593&&w<=12686||w>=12688&&w<=12730||w>=12736&&w<=12771||w>=12784&&w<=12830||w>=12832&&w<=12871||w>=12880&&w<=13054||w>=13056&&w<=19903||w>=19968&&w<=42124||w>=42128&&w<=42182||w>=43360&&w<=43388||w>=44032&&w<=55203||w>=55216&&w<=55238||w>=55243&&w<=55291||w>=63744&&w<=64255||w>=65040&&w<=65049||w>=65072&&w<=65106||w>=65108&&w<=65126||w>=65128&&w<=65131||w>=65281&&w<=65376||w>=65504&&w<=65510}e("./edit_session/folding").Folding.call(h.prototype),e("./edit_session/bracket_match").BracketMatch.call(h.prototype),a.defineOptions(h.prototype,"session",{wrap:{set:function(w){if(!w||w=="off"?w=!1:w=="free"?w=!0:w=="printMargin"?w=-1:typeof w=="string"&&(w=parseInt(w,10)||!1),this.$wrap!=w)if(this.$wrap=w,!w)this.setUseWrapMode(!1);else{var T=typeof w=="number"?w:null;this.setWrapLimitRange(T,T),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(w){w=w=="auto"?this.$mode.type!="text":w!="text",w!=this.$wrapAsCode&&(this.$wrapAsCode=w,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(w){this.$useWorker=w,this.$stopWorker(),w&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(w){w=parseInt(w),w>0&&this.$tabSize!==w&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=w,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(w){this.setFoldStyle(w)},handlesSet:!0},overwrite:{set:function(w){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(w){this.doc.setNewLineMode(w)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(w){this.setMode(w)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=h});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var c=e("./lib/lang"),v=e("./lib/oop"),s=e("./range").Range,a=function(){function i(){this.$options={}}return i.prototype.set=function(r){return v.mixin(this.$options,r),this},i.prototype.getOptions=function(){return c.copyObject(this.$options)},i.prototype.setOptions=function(r){this.$options=r},i.prototype.find=function(r){var u=this.$options,l=this.$matchIterator(r,u);if(!l)return!1;var p=null;return l.forEach(function(f,o,h,_){return p=new s(f,o,h,_),o==_&&u.start&&u.start.start&&u.skipCurrent!=!1&&p.isEqual(u.start)?(p=null,!1):!0}),p},i.prototype.findAll=function(r){var u=this.$options;if(!u.needle)return[];this.$assembleRegExp(u);var l=u.range,p=l?r.getLines(l.start.row,l.end.row):r.doc.getAllLines(),f=[],o=u.re;if(u.$isMultiLine){var h=o.length,_=p.length-h,m;e:for(var y=o.offset||0;y<=_;y++){for(var C=0;C<h;C++)if(p[y+C].search(o[C])==-1)continue e;var E=p[y],D=p[y+h-1],g=E.length-E.match(o[0])[0].length,b=D.match(o[h-1])[0].length;m&&m.end.row===y&&m.end.column>g||(f.push(m=new s(y,g,y+h-1,b)),h>2&&(y=y+h-2))}}else for(var L=0;L<p.length;L++)for(var w=c.getMatchOffsets(p[L],o),C=0;C<w.length;C++){var T=w[C];f.push(new s(L,T.offset,L,T.offset+T.length))}if(l){for(var M=l.start.column,S=l.end.column,L=0,C=f.length-1;L<C&&f[L].start.column<M&&f[L].start.row==0;)L++;for(var F=l.end.row-l.start.row;L<C&&f[C].end.column>S&&f[C].end.row==F;)C--;for(f=f.slice(L,C+1),L=0,C=f.length;L<C;L++)f[L].start.row+=l.start.row,f[L].end.row+=l.start.row}return f},i.prototype.replace=function(r,u){var l=this.$options,p=this.$assembleRegExp(l);if(l.$isMultiLine)return u;if(p){var f=p.exec(r);if(!f||f[0].length!=r.length)return null;if(u=r.replace(p,u),l.preserveCase){u=u.split("");for(var o=Math.min(r.length,r.length);o--;){var h=r[o];h&&h.toLowerCase()!=h?u[o]=u[o].toUpperCase():u[o]=u[o].toLowerCase()}u=u.join("")}return u}},i.prototype.$assembleRegExp=function(r,u){if(r.needle instanceof RegExp)return r.re=r.needle;var l=r.needle;if(!r.needle)return r.re=!1;r.regExp||(l=c.escapeRegExp(l));var p=r.caseSensitive?"gm":"gmi";try{new RegExp(l,"u"),r.$supportsUnicodeFlag=!0,p+="u"}catch{r.$supportsUnicodeFlag=!1}if(r.wholeWord&&(l=d(l,r)),r.$isMultiLine=!u&&/[\n\r]/.test(l),r.$isMultiLine)return r.re=this.$assembleMultilineRegExp(l,p);try{var f=new RegExp(l,p)}catch{f=!1}return r.re=f},i.prototype.$assembleMultilineRegExp=function(r,u){for(var l=r.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),p=[],f=0;f<l.length;f++)try{p.push(new RegExp(l[f],u))}catch{return!1}return p},i.prototype.$matchIterator=function(r,u){var l=this.$assembleRegExp(u);if(!l)return!1;var p=u.backwards==!0,f=u.skipCurrent!=!1,o=l.unicode,h=u.range,_=u.start;_||(_=h?h[p?"end":"start"]:r.selection.getRange()),_.start&&(_=_[f!=p?"end":"start"]);var m=h?h.start.row:0,y=h?h.end.row:r.getLength()-1;if(p)var C=function(g){var b=_.row;if(!D(b,_.column,g)){for(b--;b>=m;b--)if(D(b,Number.MAX_VALUE,g))return;if(u.wrap!=!1){for(b=y,m=_.row;b>=m;b--)if(D(b,Number.MAX_VALUE,g))return}}};else var C=function(b){var L=_.row;if(!D(L,_.column,b)){for(L=L+1;L<=y;L++)if(D(L,0,b))return;if(u.wrap!=!1){for(L=m,y=_.row;L<=y;L++)if(D(L,0,b))return}}};if(u.$isMultiLine)var E=l.length,D=function(g,b,L){var w=p?g-E+1:g;if(!(w<0||w+E>r.getLength())){var T=r.getLine(w),M=T.search(l[0]);if(!(!p&&M<b||M===-1)){for(var S=1;S<E;S++)if(T=r.getLine(w+S),T.search(l[S])==-1)return;var F=T.match(l[E-1])[0].length;if(!(p&&F>b)&&L(w,M,w+E-1,F))return!0}}};else if(p)var D=function(b,L,w){var T=r.getLine(b),M=[],S,F=0;for(l.lastIndex=0;S=l.exec(T);){var x=S[0].length;if(F=S.index,!x){if(F>=T.length)break;l.lastIndex=F+=c.skipEmptyMatch(T,F,o)}if(S.index+x>L)break;M.push(S.index,x)}for(var R=M.length-1;R>=0;R-=2){var A=M[R-1],x=M[R];if(w(b,A,b,A+x))return!0}};else var D=function(b,L,w){var T=r.getLine(b),M,S;for(l.lastIndex=L;S=l.exec(T);){var F=S[0].length;if(M=S.index,w(b,M,b,M+F))return!0;if(!F&&(l.lastIndex=M+=c.skipEmptyMatch(T,M,o),M>=T.length))return!1}};return{forEach:C}},i}();function d(i,r){var u=c.supportsLookbehind();function l(h,_){_===void 0&&(_=!0);var m=u&&r.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return m.test(h)||r.regExp?u&&r.$supportsUnicodeFlag?_?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var p=Array.from(i),f=p[0],o=p[p.length-1];return l(f)+i+l(o,!1)}t.Search=a});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var u=function(l,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(f[h]=o[h])},u(l,p)};return function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");u(l,p);function f(){this.constructor=l}l.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)}}(),v=e("../lib/keys"),s=e("../lib/useragent"),a=v.KEY_MODS,d=function(){function u(l,p){this.$init(l,p,!1)}return u.prototype.$init=function(l,p,f){this.platform=p||(s.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(l),this.$singleCommand=f},u.prototype.addCommand=function(l){this.commands[l.name]&&this.removeCommand(l),this.commands[l.name]=l,l.bindKey&&this._buildKeyHash(l)},u.prototype.removeCommand=function(l,p){var f=l&&(typeof l=="string"?l:l.name);l=this.commands[f],p||delete this.commands[f];var o=this.commandKeyBinding;for(var h in o){var _=o[h];if(_==l)delete o[h];else if(Array.isArray(_)){var m=_.indexOf(l);m!=-1&&(_.splice(m,1),_.length==1&&(o[h]=_[0]))}}},u.prototype.bindKey=function(l,p,f){if(typeof l=="object"&&l&&(f==null&&(f=l.position),l=l[this.platform]),!!l){if(typeof p=="function")return this.addCommand({exec:p,bindKey:l,name:p.name||l});l.split("|").forEach(function(o){var h="";if(o.indexOf(" ")!=-1){var _=o.split(/\s+/);o=_.pop(),_.forEach(function(C){var E=this.parseKeys(C),D=a[E.hashId]+E.key;h+=(h?" ":"")+D,this._addCommandToBinding(h,"chainKeys")},this),h+=" "}var m=this.parseKeys(o),y=a[m.hashId]+m.key;this._addCommandToBinding(h+y,p,f)},this)}},u.prototype._addCommandToBinding=function(l,p,f){var o=this.commandKeyBinding,h;if(!p)delete o[l];else if(!o[l]||this.$singleCommand)o[l]=p;else{Array.isArray(o[l])?(h=o[l].indexOf(p))!=-1&&o[l].splice(h,1):o[l]=[o[l]],typeof f!="number"&&(f=i(p));var _=o[l];for(h=0;h<_.length;h++){var m=_[h],y=i(m);if(y>f)break}_.splice(h,0,p)}},u.prototype.addCommands=function(l){l&&Object.keys(l).forEach(function(p){var f=l[p];if(f){if(typeof f=="string")return this.bindKey(f,p);typeof f=="function"&&(f={exec:f}),typeof f=="object"&&(f.name||(f.name=p),this.addCommand(f))}},this)},u.prototype.removeCommands=function(l){Object.keys(l).forEach(function(p){this.removeCommand(l[p])},this)},u.prototype.bindKeys=function(l){Object.keys(l).forEach(function(p){this.bindKey(p,l[p])},this)},u.prototype._buildKeyHash=function(l){this.bindKey(l.bindKey,l)},u.prototype.parseKeys=function(l){var p=l.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),f=p.pop(),o=v[f];if(v.FUNCTION_KEYS[o])f=v.FUNCTION_KEYS[o].toLowerCase();else if(p.length){if(p.length==1&&p[0]=="shift")return{key:f.toUpperCase(),hashId:-1}}else return{key:f,hashId:-1};for(var h=0,_=p.length;_--;){var m=v.KEY_MODS[p[_]];if(m==null)return typeof console<"u"&&console.error("invalid modifier "+p[_]+" in "+l),!1;h|=m}return{key:f,hashId:h}},u.prototype.findKeyCommand=function(l,p){var f=a[l]+p;return this.commandKeyBinding[f]},u.prototype.handleKeyboard=function(l,p,f,o){if(!(o<0)){var h=a[p]+f,_=this.commandKeyBinding[h];return l.$keyChain&&(l.$keyChain+=" "+h,_=this.commandKeyBinding[l.$keyChain]||_),_&&(_=="chainKeys"||_[_.length-1]=="chainKeys")?(l.$keyChain=l.$keyChain||h,{command:"null"}):(l.$keyChain&&((!p||p==4)&&f.length==1?l.$keyChain=l.$keyChain.slice(0,-h.length-1):(p==-1||o>0)&&(l.$keyChain="")),{command:_})}},u.prototype.getStatusText=function(l,p){return p.$keyChain||""},u}();function i(u){return typeof u=="object"&&u.bindKey&&u.bindKey.position||(u.isDefault?-100:0)}var r=function(u){c(l,u);function l(p,f){var o=u.call(this,p,f)||this;return o.$singleCommand=!0,o}return l}(d);r.call=function(u,l,p){d.prototype.$init.call(u,l,p,!0)},d.call=function(u,l,p){d.prototype.$init.call(u,l,p,!1)},t.HashHandler=r,t.MultiHashHandler=d});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var i=function(r,u){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var f in p)Object.prototype.hasOwnProperty.call(p,f)&&(l[f]=p[f])},i(r,u)};return function(r,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");i(r,u);function l(){this.constructor=r}r.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}(),v=e("../lib/oop"),s=e("../keyboard/hash_handler").MultiHashHandler,a=e("../lib/event_emitter").EventEmitter,d=function(i){c(r,i);function r(u,l){var p=i.call(this,l,u)||this;return p.byName=p.commands,p.setDefaultHandler("exec",function(f){return f.args?f.command.exec(f.editor,f.args,f.event,!1):f.command.exec(f.editor,{},f.event,!0)}),p}return r.prototype.exec=function(u,l,p){if(Array.isArray(u)){for(var f=u.length;f--;)if(this.exec(u[f],l,p))return!0;return!1}if(typeof u=="string"&&(u=this.commands[u]),!u||l&&l.$readOnly&&!u.readOnly||this.$checkCommandState!=!1&&u.isAvailable&&!u.isAvailable(l))return!1;var o={editor:l,command:u,args:p};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),o.returnValue!==!1},r.prototype.toggleRecording=function(u){if(!this.$inReplay)return u&&u._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(l){this.macro.push([l.command,l.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},r.prototype.replay=function(u){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(u);try{this.$inReplay=!0,this.macro.forEach(function(l){typeof l=="string"?this.exec(l,u):this.exec(l[0],u,l[1])},this)}finally{this.$inReplay=!1}}},r.prototype.trimMacro=function(u){return u.map(function(l){return typeof l[0]!="string"&&(l[0]=l[0].name),l[1]||(l=l[0]),l})},r}(s);v.implement(d.prototype,a),t.CommandManager=d});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var c=e("../lib/lang"),v=e("../config"),s=e("../range").Range;function a(i,r){return{win:i,mac:r}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:a("Ctrl-,","Command-,"),exec:function(i){v.loadModule("ace/ext/settings_menu",function(r){r.init(i),i.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:a("Alt-E","F4"),exec:function(i){v.loadModule("ace/ext/error_marker",function(r){r.showErrorMarker(i,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(i){v.loadModule("ace/ext/error_marker",function(r){r.showErrorMarker(i,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(i){i.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(i){i.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(i,r){typeof r=="number"&&!isNaN(r)&&i.gotoLine(r),i.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(i){i.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(i){i.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:a("F2","F2"),exec:function(i){i.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:a("Alt-F2","Alt-F2"),exec:function(i){i.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(i){i.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(i){i.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(i){i.session.foldAll(),i.session.unfold(i.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(i){i.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(i){i.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(i){i.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(i){i.selection.isEmpty()?i.selection.selectWord():i.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(i){i.selection.isEmpty()?i.selection.selectWord():i.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(i){v.loadModule("ace/ext/searchbox",function(r){r.Search(i)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(i){i.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(i){i.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(i){i.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(i){i.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(i,r){i.navigateUp(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(i){i.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(i){i.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(i){i.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(i,r){i.navigateDown(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(i){i.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(i){i.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(i){i.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(i){i.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(i){i.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(i,r){i.navigateLeft(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(i){i.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(i){i.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(i){i.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(i){i.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(i){i.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(i,r){i.navigateRight(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(i){i.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(i){i.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(i){i.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(i){i.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(i){i.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(i){i.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(i){i.renderer.scrollBy(0,-2*i.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(i){i.renderer.scrollBy(0,2*i.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(i){i.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(i){i.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(i){i.commands.toggleRecording(i)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(i){i.commands.replay(i)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(i){i.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(i){i.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(i){i.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(i){},readOnly:!0},{name:"cut",description:"Cut",exec:function(i){var r=i.$copyWithEmptySelection&&i.selection.isEmpty(),u=r?i.selection.getLineRange():i.selection.getRange();i._emit("cut",u),u.isEmpty()||i.session.remove(u),i.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(i,r){i.$handlePaste(r)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(i){i.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(i){i.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(i){i.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(i){i.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(i){i.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(i){i.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(i){i.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(i){v.loadModule("ace/ext/searchbox",function(r){r.Search(i,!0)})}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(i){i.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(i){i.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(i){i.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(i){i.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(i){i.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(i){i.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(i){i.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(i){i.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(i){if(i.selection.isEmpty())i.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(i){i.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(i){i.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(i){var r=i.selection.getRange();r.start.column=0,i.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(i){var r=i.selection.getRange();r.end.column=Number.MAX_VALUE,i.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(i){i.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(i){i.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(i){i.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(i){i.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(i){i.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(i){i.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(i,r){i.insert(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(i,r){i.insert(c.stringRepeat(r.text||"",r.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(i){i.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(i){i.transposeLetters()},multiSelectAction:function(i){i.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(i){i.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(i){i.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:a(null,null),exec:function(i){i.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(i){var r=i.selection.getRange();r.start.column=r.end.column=0,r.end.row++,i.selection.setRange(r,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:a("Ctrl+F3","F3"),exec:function(i){i.openLink()}},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(i){for(var r=i.selection.isBackwards(),u=r?i.selection.getSelectionLead():i.selection.getSelectionAnchor(),l=r?i.selection.getSelectionAnchor():i.selection.getSelectionLead(),p=i.session.doc.getLine(u.row).length,f=i.session.doc.getTextRange(i.selection.getRange()),o=f.replace(/\n\s*/," ").length,h=i.session.doc.getLine(u.row),_=u.row+1;_<=l.row+1;_++){var m=c.stringTrimLeft(c.stringTrimRight(i.session.doc.getLine(_)));m.length!==0&&(m=" "+m),h+=m}l.row+1<i.session.doc.getLength()-1&&(h+=i.session.doc.getNewLineCharacter()),i.clearSelection(),i.session.doc.replace(new s(u.row,0,l.row+2,0),h),o>0?(i.selection.moveCursorTo(u.row,u.column),i.selection.selectTo(u.row,u.column+o)):(p=i.session.doc.getLine(u.row).length>p?p+1:p,i.selection.moveCursorTo(u.row,p))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(i){var r=i.session.doc.getLength()-1,u=i.session.doc.getLine(r).length,l=i.selection.rangeList.ranges,p=[];l.length<1&&(l=[i.selection.getRange()]);for(var f=0;f<l.length;f++)f==l.length-1&&(l[f].end.row===r&&l[f].end.column===u||p.push(new s(l[f].end.row,l[f].end.column,r,u))),f===0?l[f].start.row===0&&l[f].start.column===0||p.push(new s(0,0,l[f].start.row,l[f].start.column)):p.push(new s(l[f-1].end.row,l[f-1].end.column,l[f].start.row,l[f].start.column));i.exitMultiSelectMode(),i.clearSelection();for(var f=0;f<p.length;f++)i.selection.addRange(p[f],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(i){i.selection.clearSelection(),i.navigateLineEnd(),i.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(i){i.selection.clearSelection();var r=i.getCursorPosition();i.selection.moveTo(r.row-1,Number.MAX_VALUE),i.insert(`
`),r.row===0&&i.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(i){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),i.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:a("F1","F1"),exec:function(i){i.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(i){i.prompt({$type:"modes"})},readOnly:!0}];for(var d=1;d<9;d++)t.commands.push({name:"foldToLevel"+d,description:"Fold To Level "+d,level:d,exec:function(i){i.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("./lib/dom"),v=function(){function s(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return s.prototype.getRowLength=function(a){var d;return this.lineWidgets?d=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:d=0,!this.$useWrapMode||!this.$wrapData[a]?1+d:this.$wrapData[a].length+1+d},s.prototype.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(d){d&&d.rowCount&&!d.hidden&&(a+=d.rowCount)}),a},s.prototype.$onChangeEditor=function(a){this.attach(a.editor)},s.prototype.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,a&&(a.widgetManager=this,a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets)))},s.prototype.detach=function(a){var d=this.editor;if(d){this.editor=null,d.widgetManager=null,d.renderer.off("beforeRender",this.measureWidgets),d.renderer.off("afterRender",this.renderWidgets);var i=this.session.lineWidgets;i&&i.forEach(function(r){r&&r.el&&r.el.parentNode&&(r._inDocument=!1,r.el.parentNode.removeChild(r.el))})}},s.prototype.updateOnFold=function(a,d){var i=d.lineWidgets;if(!(!i||!a.action)){for(var r=a.data,u=r.start.row,l=r.end.row,p=a.action=="add",f=u+1;f<l;f++)i[f]&&(i[f].hidden=p);i[l]&&(p?i[u]?i[l].hidden=p:i[u]=i[l]:(i[u]==i[l]&&(i[u]=void 0),i[l].hidden=p))}},s.prototype.updateOnChange=function(a){var d=this.session.lineWidgets;if(d){var i=a.start.row,r=a.end.row-i;if(r!==0)if(a.action=="remove"){var u=d.splice(i+1,r);!d[i]&&u[u.length-1]&&(d[i]=u.pop()),u.forEach(function(p){p&&this.removeLineWidget(p)},this),this.$updateRows()}else{var l=new Array(r);d[i]&&d[i].column!=null&&a.start.column>d[i].column&&i++,l.unshift(i,0),d.splice.apply(d,l),this.$updateRows()}}},s.prototype.$updateRows=function(){var a=this.session.lineWidgets;if(a){var d=!0;a.forEach(function(i,r){if(i)for(d=!1,i.row=r;i.$oldWidget;)i.$oldWidget.row=r,i=i.$oldWidget}),d&&(this.session.lineWidgets=null)}},s.prototype.$registerLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var d=this.session.lineWidgets[a.row];return d&&(a.$oldWidget=d,d.el&&d.el.parentNode&&(d.el.parentNode.removeChild(d.el),d._inDocument=!1)),this.session.lineWidgets[a.row]=a,a},s.prototype.addLineWidget=function(a){if(this.$registerLineWidget(a),a.session=this.session,!this.editor)return a;var d=this.editor.renderer;a.html&&!a.el&&(a.el=c.createElement("div"),a.el.innerHTML=a.html),a.text&&!a.el&&(a.el=c.createElement("div"),a.el.textContent=a.text),a.el&&(c.addCssClass(a.el,"ace_lineWidgetContainer"),a.className&&c.addCssClass(a.el,a.className),a.el.style.position="absolute",a.el.style.zIndex="5",d.container.appendChild(a.el),a._inDocument=!0,a.coverGutter||(a.el.style.zIndex="3"),a.pixelHeight==null&&(a.pixelHeight=a.el.offsetHeight)),a.rowCount==null&&(a.rowCount=a.pixelHeight/d.layerConfig.lineHeight);var i=this.session.getFoldAt(a.row,0);if(a.$fold=i,i){var r=this.session.lineWidgets;a.row==i.end.row&&!r[i.start.row]?r[i.start.row]=a:a.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,d),this.onWidgetChanged(a),a},s.prototype.removeLineWidget=function(a){if(a._inDocument=!1,a.session=null,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch{}if(this.session.lineWidgets){var d=this.session.lineWidgets[a.row];if(d==a)this.session.lineWidgets[a.row]=a.$oldWidget,a.$oldWidget&&this.onWidgetChanged(a.$oldWidget);else for(;d;){if(d.$oldWidget==a){d.$oldWidget=a.$oldWidget;break}d=d.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},s.prototype.getWidgetsAtRow=function(a){for(var d=this.session.lineWidgets,i=d&&d[a],r=[];i;)r.push(i),i=i.$oldWidget;return r},s.prototype.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},s.prototype.measureWidgets=function(a,d){var i=this.session._changedWidgets,r=d.layerConfig;if(!(!i||!i.length)){for(var u=1/0,l=0;l<i.length;l++){var p=i[l];if(!(!p||!p.el)&&p.session==this.session){if(!p._inDocument){if(this.session.lineWidgets[p.row]!=p)continue;p._inDocument=!0,d.container.appendChild(p.el)}p.h=p.el.offsetHeight,p.fixedWidth||(p.w=p.el.offsetWidth,p.screenWidth=Math.ceil(p.w/r.characterWidth));var f=p.h/r.lineHeight;p.coverLine&&(f-=this.session.getRowLineCount(p.row),f<0&&(f=0)),p.rowCount!=f&&(p.rowCount=f,p.row<u&&(u=p.row))}}u!=1/0&&(this.session._emit("changeFold",{data:{start:{row:u}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},s.prototype.renderWidgets=function(a,d){var i=d.layerConfig,r=this.session.lineWidgets;if(r){for(var u=Math.min(this.firstRow,i.firstRow),l=Math.max(this.lastRow,i.lastRow,r.length);u>0&&!r[u];)u--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,d.$cursorLayer.config=i;for(var p=u;p<=l;p++){var f=r[p];if(!(!f||!f.el)){if(f.hidden){f.el.style.top=-100-(f.pixelHeight||0)+"px";continue}f._inDocument||(f._inDocument=!0,d.container.appendChild(f.el));var o=d.$cursorLayer.getPixelPosition({row:p,column:0},!0).top;f.coverLine||(o+=i.lineHeight*this.session.getRowLineCount(f.row)),f.el.style.top=o-i.offset+"px";var h=f.coverGutter?0:d.gutterWidth;f.fixedWidth||(h-=d.scrollLeft),f.el.style.left=h+"px",f.fullWidth&&f.screenWidth&&(f.el.style.minWidth=i.width+2*i.padding+"px"),f.fixedWidth?f.el.style.right=d.scrollBar.getWidth()+"px":f.el.style.right=""}}}},s}();t.LineWidgets=v});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,n){"use strict";var c=e("../lib/keys"),v=e("../mouse/default_gutter_handler").GutterTooltip,s=function(){function d(i){this.editor=i,this.gutterLayer=i.renderer.$gutterLayer,this.element=i.renderer.$gutter,this.lines=i.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new v(this.editor)}return d.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},d.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},d.prototype.$onGutterKeyDown=function(i){if(this.annotationTooltip.isOpen){i.preventDefault(),i.keyCode===c.escape&&this.annotationTooltip.hideTooltip();return}if(i.target===this.element){if(i.keyCode!=c.enter)return;i.preventDefault();var r=this.editor.getCursorPosition().row;this.editor.isRowVisible(r)||this.editor.scrollToLine(r,!0,!0),setTimeout(function(){var u=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),l=this.$findNearestFoldWidget(u),p=this.$findNearestAnnotation(u);if(!(l===null&&p===null)){if(l===null&&p!==null){this.activeRowIndex=p,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(l!==null&&p===null){this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(p-u)<Math.abs(l-u)){this.activeRowIndex=p,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(i),setTimeout(function(){this.editor._signal("gutterkeydown",new a(i,this))}.bind(this),10)},d.prototype.$handleGutterKeyboardInteraction=function(i){if(i.keyCode===c.tab){i.preventDefault();return}if(i.keyCode===c.escape){i.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(i.keyCode===c.up){switch(i.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(i.keyCode===c.down){switch(i.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(i.keyCode===c.left){i.preventDefault(),this.$switchLane("annotation");return}if(i.keyCode===c.right){i.preventDefault(),this.$switchLane("fold");return}if(i.keyCode===c.enter||i.keyCode===c.space){switch(i.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var r=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),i),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==r&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(r),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var u=this.lines.cells[this.activeRowIndex].element.childNodes[2],l=u.getBoundingClientRect(),p=this.annotationTooltip.getElement().style;p.left=l.right+"px",p.top=l.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},d.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},d.prototype.$isFoldWidgetVisible=function(i){var r=this.editor.isRowFullyVisible(this.$rowIndexToRow(i)),u=this.$getFoldWidget(i).style.display!=="none";return r&&u},d.prototype.$isAnnotationVisible=function(i){var r=this.editor.isRowFullyVisible(this.$rowIndexToRow(i)),u=this.$getAnnotation(i).style.display!=="none";return r&&u},d.prototype.$getFoldWidget=function(i){var r=this.lines.get(i),u=r.element;return u.childNodes[1]},d.prototype.$getAnnotation=function(i){var r=this.lines.get(i),u=r.element;return u.childNodes[2]},d.prototype.$findNearestFoldWidget=function(i){if(this.$isFoldWidgetVisible(i))return i;for(var r=0;i-r>0||i+r<this.lines.getLength()-1;){if(r++,i-r>=0&&this.$isFoldWidgetVisible(i-r))return i-r;if(i+r<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(i+r))return i+r}return null},d.prototype.$findNearestAnnotation=function(i){if(this.$isAnnotationVisible(i))return i;for(var r=0;i-r>0||i+r<this.lines.getLength()-1;){if(r++,i-r>=0&&this.$isAnnotationVisible(i-r))return i-r;if(i+r<=this.lines.getLength()-1&&this.$isAnnotationVisible(i+r))return i+r}return null},d.prototype.$focusFoldWidget=function(i){if(i!=null){var r=this.$getFoldWidget(i);r.classList.add(this.editor.renderer.keyboardFocusClassName),r.focus()}},d.prototype.$focusAnnotation=function(i){if(i!=null){var r=this.$getAnnotation(i);r.classList.add(this.editor.renderer.keyboardFocusClassName),r.focus()}},d.prototype.$blurFoldWidget=function(i){var r=this.$getFoldWidget(i);r.classList.remove(this.editor.renderer.keyboardFocusClassName),r.blur()},d.prototype.$blurAnnotation=function(i){var r=this.$getAnnotation(i);r.classList.remove(this.editor.renderer.keyboardFocusClassName),r.blur()},d.prototype.$moveFoldWidgetUp=function(){for(var i=this.activeRowIndex;i>0;)if(i--,this.$isFoldWidgetVisible(i)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);return}},d.prototype.$moveFoldWidgetDown=function(){for(var i=this.activeRowIndex;i<this.lines.getLength()-1;)if(i++,this.$isFoldWidgetVisible(i)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);return}},d.prototype.$moveAnnotationUp=function(){for(var i=this.activeRowIndex;i>0;)if(i--,this.$isAnnotationVisible(i)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);return}},d.prototype.$moveAnnotationDown=function(){for(var i=this.activeRowIndex;i<this.lines.getLength()-1;)if(i++,this.$isAnnotationVisible(i)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);return}},d.prototype.$switchLane=function(i){switch(i){case"annotation":if(this.activeLane==="annotation")break;var r=this.$findNearestAnnotation(this.activeRowIndex);if(r==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=r,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var u=this.$findNearestFoldWidget(this.activeRowIndex);if(u==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);break}},d.prototype.$rowIndexToRow=function(i){var r=this.lines.get(i);return r?r.row:null},d.prototype.$rowToRowIndex=function(i){for(var r=0;r<this.lines.getLength();r++){var u=this.lines.get(r);if(u.row==i)return r}return null},d}();t.GutterKeyboardHandler=s;var a=function(){function d(i,r){this.gutterKeyboardHandler=r,this.domEvent=i}return d.prototype.getKey=function(){return c.keyCodeToString(this.domEvent.keyCode)},d.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},d.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},d.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},d}();t.GutterKeyboardEvent=a});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var c=this&&this.__values||function(M){var S=typeof Symbol=="function"&&Symbol.iterator,F=S&&M[S],x=0;if(F)return F.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&x>=M.length&&(M=void 0),{value:M&&M[x++],done:!M}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/lang"),d=e("./lib/useragent"),i=e("./keyboard/textinput").TextInput,r=e("./mouse/mouse_handler").MouseHandler,u=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,p=e("./edit_session").EditSession,f=e("./search").Search,o=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,_=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,y=e("./config"),C=e("./token_iterator").TokenIterator,E=e("./line_widgets").LineWidgets,D=e("./keyboard/gutter_handler").GutterKeyboardHandler,g=e("./config").nls,b=e("./clipboard"),L=e("./lib/keys"),w=function(){function M(S,F,x){this.session,this.$toDestroy=[];var R=S.getContainerElement();this.container=R,this.renderer=S,this.id="editor"+ ++M.$uid,this.commands=new _(d.isMac?"mac":"win",m),typeof document=="object"&&(this.textInput=new i(S.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new r(this),new u(this)),this.keyBinding=new l(this),this.$search=new f().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=a.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(A,I){I._$emitInputEvent.schedule(31)}),this.setSession(F||x&&x.session||new p("")),y.resetOptions(this),x&&this.setOptions(x),y._signal("editor",this)}return M.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=a.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},M.prototype.startOperation=function(S){if(this.curOp){if(!S||this.curOp.command)return;this.prevOp=this.curOp}S||(this.previousCommand=null,S={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:S.command||{},args:S.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},M.prototype.endOperation=function(S){if(this.curOp&&this.session){if(S&&S.returnValue===!1||!this.session)return this.curOp=null;if(S==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var F=this.curOp.command,x=F&&F.scrollIntoView;if(x){switch(x){case"center-animate":x="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),A=this.renderer.layerConfig;(R.start.row>=A.lastRow||R.end.row<=A.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}x=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},M.prototype.$historyTracker=function(S){if(this.$mergeUndoDeltas){var F=this.prevOp,x=this.$mergeableCommands,R=F.command&&S.command.name==F.command.name;if(S.command.name=="insertstring"){var A=S.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(A)||/\s/.test(F.args)),this.mergeNextCommand=!0}else R=R&&x.indexOf(S.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:x.indexOf(S.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},M.prototype.setKeyboardHandler=function(S,F){if(S&&typeof S=="string"&&S!="ace"){this.$keybindingId=S;var x=this;y.loadModule(["keybinding",S],function(R){x.$keybindingId==S&&x.keyBinding.setKeyboardHandler(R&&R.handler),F&&F()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(S),F&&F()},M.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},M.prototype.setSession=function(S){if(this.session!=S){this.curOp&&this.endOperation(),this.curOp={};var F=this.session;if(F){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var x=this.session.getSelection();x.off("changeCursor",this.$onCursorChange),x.off("changeSelection",this.$onSelectionChange)}this.session=S,S?(this.$onDocumentChange=this.onDocumentChange.bind(this),S.on("change",this.$onDocumentChange),this.renderer.setSession(S),this.$onChangeMode=this.onChangeMode.bind(this),S.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),S.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),S.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),S.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),S.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),S.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=S.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(S)),this._signal("changeSession",{session:S,oldSession:F}),this.curOp=null,F&&F._signal("changeEditor",{oldEditor:this}),S&&S._signal("changeEditor",{editor:this}),S&&!S.destroyed&&S.bgTokenizer.scheduleStart()}},M.prototype.getSession=function(){return this.session},M.prototype.setValue=function(S,F){return this.session.doc.setValue(S),F?F==1?this.navigateFileEnd():F==-1&&this.navigateFileStart():this.selectAll(),S},M.prototype.getValue=function(){return this.session.getValue()},M.prototype.getSelection=function(){return this.selection},M.prototype.resize=function(S){this.renderer.onResize(S)},M.prototype.setTheme=function(S,F){this.renderer.setTheme(S,F)},M.prototype.getTheme=function(){return this.renderer.getTheme()},M.prototype.setStyle=function(S){this.renderer.setStyle(S)},M.prototype.unsetStyle=function(S){this.renderer.unsetStyle(S)},M.prototype.getFontSize=function(){return this.getOption("fontSize")||s.computedStyle(this.container).fontSize},M.prototype.setFontSize=function(S){this.setOption("fontSize",S)},M.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var S=this;this.$highlightPending=!0,setTimeout(function(){S.$highlightPending=!1;var F=S.session;if(!(!F||F.destroyed)){F.$bracketHighlight&&(F.$bracketHighlight.markerIds.forEach(function(q){F.removeMarker(q)}),F.$bracketHighlight=null);var x=S.getCursorPosition(),R=S.getKeyboardHandler(),A=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(S),I=F.getMatchingBracketRanges(x,A);if(!I){var $=new C(F,x.row,x.column),k=$.getCurrentToken();if(k&&/\b(?:tag-open|tag-name)/.test(k.type)){var H=F.getMatchingTags(x);H&&(I=[H.openTagName,H.closeTagName])}}if(!I&&F.$mode.getMatching&&(I=F.$mode.getMatching(S.session)),!I){S.getHighlightIndentGuides()&&S.renderer.$textLayer.$highlightIndentGuide();return}var U="ace_bracket";Array.isArray(I)?I.length==1&&(U="ace_error_bracket"):I=[I],I.length==2&&(o.comparePoints(I[0].end,I[1].start)==0?I=[o.fromPoints(I[0].start,I[1].end)]:o.comparePoints(I[0].start,I[1].end)==0&&(I=[o.fromPoints(I[1].start,I[0].end)])),F.$bracketHighlight={ranges:I,markerIds:I.map(function(q){return F.addMarker(q,U,"text")})},S.getHighlightIndentGuides()&&S.renderer.$textLayer.$highlightIndentGuide()}},50)}},M.prototype.focus=function(){this.textInput.focus()},M.prototype.isFocused=function(){return this.textInput.isFocused()},M.prototype.blur=function(){this.textInput.blur()},M.prototype.onFocus=function(S){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",S))},M.prototype.onBlur=function(S){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",S))},M.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},M.prototype.onDocumentChange=function(S){var F=this.session.$useWrapMode,x=S.start.row==S.end.row?S.end.row:1/0;this.renderer.updateLines(S.start.row,x,F),this._signal("change",S),this.$cursorChange()},M.prototype.onTokenizerUpdate=function(S){var F=S.data;this.renderer.updateLines(F.first,F.last)},M.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},M.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},M.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},M.prototype.$updateHighlightActiveLine=function(){var S=this.getSession(),F;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(F=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(F=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(F=!1)),S.$highlightLineMarker&&!F)S.removeMarker(S.$highlightLineMarker.id),S.$highlightLineMarker=null;else if(!S.$highlightLineMarker&&F){var x=new o(F.row,F.column,F.row,1/0);x.id=S.addMarker(x,"ace_active-line","screenLine"),S.$highlightLineMarker=x}else F&&(S.$highlightLineMarker.start.row=F.row,S.$highlightLineMarker.end.row=F.row,S.$highlightLineMarker.start.column=F.column,S._signal("changeBackMarker"))},M.prototype.onSelectionChange=function(S){var F=this.session;if(F.$selectionMarker&&F.removeMarker(F.$selectionMarker),F.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var x=this.selection.getRange(),R=this.getSelectionStyle();F.$selectionMarker=F.addMarker(x,"ace_selection",R)}var A=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(A),this._signal("changeSelection")},M.prototype.$getSelectionHighLightRegexp=function(){var S=this.session,F=this.getSelectionRange();if(!(F.isEmpty()||F.isMultiLine())){var x=F.start.column,R=F.end.column,A=S.getLine(F.start.row),I=A.substring(x,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var $=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),k=A.substring(x-1,R+1);if($.test(k))return $}}},M.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},M.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},M.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},M.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},M.prototype.onChangeMode=function(S){this.renderer.updateText(),this._emit("changeMode",S)},M.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},M.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},M.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},M.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},M.prototype.getCopyText=function(){var S=this.getSelectedText(),F=this.session.doc.getNewLineCharacter(),x=!1;if(!S&&this.$copyWithEmptySelection){x=!0;for(var R=this.selection.getAllRanges(),A=0;A<R.length;A++){var I=R[A];A&&R[A-1].start.row==I.start.row||(S+=this.session.getLine(I.start.row)+F)}}var $={text:S};return this._signal("copy",$),b.lineMode=x?$.text:!1,$.text},M.prototype.onCopy=function(){this.commands.exec("copy",this)},M.prototype.onCut=function(){this.commands.exec("cut",this)},M.prototype.onPaste=function(S,F){var x={text:S,event:F};this.commands.exec("paste",this,x)},M.prototype.$handlePaste=function(S){typeof S=="string"&&(S={text:S}),this._signal("paste",S);var F=S.text,x=F===b.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)x?R.insert({row:this.selection.lead.row,column:0},F):this.insert(F);else if(x)this.selection.rangeList.ranges.forEach(function(U){R.insert({row:U.start.row,column:0},F)});else{var A=F.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,$=A.length==2&&(!A[0]||!A[1]);if(A.length!=I.length||$)return this.commands.exec("insertstring",this,F);for(var k=I.length;k--;){var H=I[k];H.isEmpty()||R.remove(H),R.insert(H.start,A[k])}}},M.prototype.execCommand=function(S,F){return this.commands.exec(S,this,F)},M.prototype.insert=function(S,F){var x=this.session,R=x.getMode(),A=this.getCursorPosition();if(this.getBehavioursEnabled()&&!F){var I=R.transformAction(x.getState(A.row),"insertion",this,x,S);I&&(S!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),S=I.text)}if(S=="	"&&(S=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&S.indexOf(`
`)==-1){var $=o.fromPoints(A,A);$.end.column+=S.length,this.session.remove($)}}else{var $=this.getSelectionRange();A=this.session.remove($),this.clearSelection()}if(S==`
`||S==`\r
`){var q=x.getLine(A.row);if(A.column>q.search(/\S|$/)){var k=q.substr(A.column).search(/\S|$/);x.doc.removeInLine(A.row,A.column,A.column+k)}}this.clearSelection();var H=A.column,U=x.getState(A.row),q=x.getLine(A.row),N=R.checkOutdent(U,q,S);if(x.insert(A,S),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new o(A.row,H+I.selection[0],A.row,H+I.selection[1])):this.selection.setSelectionRange(new o(A.row+I.selection[0],I.selection[1],A.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(x.getDocument().isNewLine(S)){var K=R.getNextLineIndent(U,q.slice(0,A.column),x.getTabString());x.insert({row:A.row+1,column:0},K)}N&&R.autoOutdent(U,x,A.row)}},M.prototype.autoIndent=function(){var S=this.session,F=S.getMode(),x,R;if(this.selection.isEmpty())x=0,R=S.doc.getLength()-1;else{var A=this.getSelectionRange();x=A.start.row,R=A.end.row}for(var I="",$="",k="",H,U,q,N=S.getTabString(),K=x;K<=R;K++)K>0&&(I=S.getState(K-1),$=S.getLine(K-1),k=F.getNextLineIndent(I,$,N)),H=S.getLine(K),U=F.$getIndent(H),k!==U&&(U.length>0&&(q=new o(K,0,K,U.length),S.remove(q)),k.length>0&&S.insert({row:K,column:0},k)),F.autoOutdent(I,S,K)},M.prototype.onTextInput=function(S,F){if(!F)return this.keyBinding.onTextInput(S);this.startOperation({command:{name:"insertstring"}});var x=this.applyComposition.bind(this,S,F);this.selection.rangeCount?this.forEachSelection(x):x(),this.endOperation()},M.prototype.applyComposition=function(S,F){if(F.extendLeft||F.extendRight){var x=this.selection.getRange();x.start.column-=F.extendLeft,x.end.column+=F.extendRight,x.start.column<0&&(x.start.row--,x.start.column+=this.session.getLine(x.start.row).length+1),this.selection.setRange(x),!S&&!x.isEmpty()&&this.remove()}if((S||!this.selection.isEmpty())&&this.insert(S,!0),F.restoreStart||F.restoreEnd){var x=this.selection.getRange();x.start.column-=F.restoreStart,x.end.column-=F.restoreEnd,this.selection.setRange(x)}},M.prototype.onCommandKey=function(S,F,x){return this.keyBinding.onCommandKey(S,F,x)},M.prototype.setOverwrite=function(S){this.session.setOverwrite(S)},M.prototype.getOverwrite=function(){return this.session.getOverwrite()},M.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},M.prototype.setScrollSpeed=function(S){this.setOption("scrollSpeed",S)},M.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},M.prototype.setDragDelay=function(S){this.setOption("dragDelay",S)},M.prototype.getDragDelay=function(){return this.getOption("dragDelay")},M.prototype.setSelectionStyle=function(S){this.setOption("selectionStyle",S)},M.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},M.prototype.setHighlightActiveLine=function(S){this.setOption("highlightActiveLine",S)},M.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},M.prototype.setHighlightGutterLine=function(S){this.setOption("highlightGutterLine",S)},M.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},M.prototype.setHighlightSelectedWord=function(S){this.setOption("highlightSelectedWord",S)},M.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},M.prototype.setAnimatedScroll=function(S){this.renderer.setAnimatedScroll(S)},M.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},M.prototype.setShowInvisibles=function(S){this.renderer.setShowInvisibles(S)},M.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},M.prototype.setDisplayIndentGuides=function(S){this.renderer.setDisplayIndentGuides(S)},M.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},M.prototype.setHighlightIndentGuides=function(S){this.renderer.setHighlightIndentGuides(S)},M.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},M.prototype.setShowPrintMargin=function(S){this.renderer.setShowPrintMargin(S)},M.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},M.prototype.setPrintMarginColumn=function(S){this.renderer.setPrintMarginColumn(S)},M.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},M.prototype.setReadOnly=function(S){this.setOption("readOnly",S)},M.prototype.getReadOnly=function(){return this.getOption("readOnly")},M.prototype.setBehavioursEnabled=function(S){this.setOption("behavioursEnabled",S)},M.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},M.prototype.setWrapBehavioursEnabled=function(S){this.setOption("wrapBehavioursEnabled",S)},M.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},M.prototype.setShowFoldWidgets=function(S){this.setOption("showFoldWidgets",S)},M.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},M.prototype.setFadeFoldWidgets=function(S){this.setOption("fadeFoldWidgets",S)},M.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},M.prototype.remove=function(S){this.selection.isEmpty()&&(S=="left"?this.selection.selectLeft():this.selection.selectRight());var F=this.getSelectionRange();if(this.getBehavioursEnabled()){var x=this.session,R=x.getState(F.start.row),A=x.getMode().transformAction(R,"deletion",this,x,F);if(F.end.column===0){var I=x.getTextRange(F);if(I[I.length-1]==`
`){var $=x.getLine(F.end.row);/^\s+$/.test($)&&(F.end.column=$.length)}}A&&(F=A)}this.session.remove(F),this.clearSelection()},M.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var S=this.getSelectionRange();S.start.column==S.end.column&&S.start.row==S.end.row&&(S.end.column=0,S.end.row++),this.session.remove(S),this.clearSelection()},M.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var S=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(S)},M.prototype.setGhostText=function(S,F){this.session.widgetManager||(this.session.widgetManager=new E(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(S,F)},M.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},M.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var S=this.getCursorPosition(),F=S.column;if(F!==0){var x=this.session.getLine(S.row),R,A;F<x.length?(R=x.charAt(F)+x.charAt(F-1),A=new o(S.row,F-1,S.row,F+1)):(R=x.charAt(F-1)+x.charAt(F-2),A=new o(S.row,F-2,S.row,F)),this.session.replace(A,R),this.session.selection.moveToPosition(A.end)}}},M.prototype.toLowerCase=function(){var S=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var F=this.getSelectionRange(),x=this.session.getTextRange(F);this.session.replace(F,x.toLowerCase()),this.selection.setSelectionRange(S)},M.prototype.toUpperCase=function(){var S=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var F=this.getSelectionRange(),x=this.session.getTextRange(F);this.session.replace(F,x.toUpperCase()),this.selection.setSelectionRange(S)},M.prototype.indent=function(){var S=this.session,F=this.getSelectionRange();if(F.start.row<F.end.row){var x=this.$getSelectedRows();S.indentRows(x.first,x.last,"	");return}else if(F.start.column<F.end.column){var R=S.getTextRange(F);if(!/^\s+$/.test(R)){var x=this.$getSelectedRows();S.indentRows(x.first,x.last,"	");return}}var A=S.getLine(F.start.row),I=F.start,$=S.getTabSize(),k=S.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var H=$-k%$,U=a.stringRepeat(" ",H);else{for(var H=k%$;A[F.start.column-1]==" "&&H;)F.start.column--,H--;this.selection.setSelectionRange(F),U="	"}return this.insert(U)},M.prototype.blockIndent=function(){var S=this.$getSelectedRows();this.session.indentRows(S.first,S.last,"	")},M.prototype.blockOutdent=function(){var S=this.session.getSelection();this.session.outdentRows(S.getRange())},M.prototype.sortLines=function(){for(var S=this.$getSelectedRows(),F=this.session,x=[],R=S.first;R<=S.last;R++)x.push(F.getLine(R));x.sort(function($,k){return $.toLowerCase()<k.toLowerCase()?-1:$.toLowerCase()>k.toLowerCase()?1:0});for(var A=new o(0,0,0,0),R=S.first;R<=S.last;R++){var I=F.getLine(R);A.start.row=R,A.end.row=R,A.end.column=I.length,F.replace(A,x[R-S.first])}},M.prototype.toggleCommentLines=function(){var S=this.session.getState(this.getCursorPosition().row),F=this.$getSelectedRows();this.session.getMode().toggleCommentLines(S,this.session,F.first,F.last)},M.prototype.toggleBlockComment=function(){var S=this.getCursorPosition(),F=this.session.getState(S.row),x=this.getSelectionRange();this.session.getMode().toggleBlockComment(F,this.session,x,S)},M.prototype.getNumberAt=function(S,F){var x=/[\-]?[0-9]+(?:\.[0-9]+)?/g;x.lastIndex=0;for(var R=this.session.getLine(S);x.lastIndex<F;){var A=x.exec(R);if(A.index<=F&&A.index+A[0].length>=F){var I={value:A[0],start:A.index,end:A.index+A[0].length};return I}}return null},M.prototype.modifyNumber=function(S){var F=this.selection.getCursor().row,x=this.selection.getCursor().column,R=new o(F,x-1,F,x),A=this.session.getTextRange(R);if(!isNaN(parseFloat(A))&&isFinite(A)){var I=this.getNumberAt(F,x);if(I){var $=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,k=I.start+I.value.length-$,H=parseFloat(I.value);H*=Math.pow(10,k),$!==I.end&&x<$?S*=Math.pow(10,I.end-x-1):S*=Math.pow(10,I.end-x),H+=S,H/=Math.pow(10,k);var U=H.toFixed(k),q=new o(F,I.start,F,I.end);this.session.replace(q,U),this.moveCursorTo(F,Math.max(I.start+1,x+U.length-I.value.length))}}else this.toggleWord()},M.prototype.toggleWord=function(){var S=this.selection.getCursor().row,F=this.selection.getCursor().column;this.selection.selectWord();var x=this.getSelectedText(),R=this.selection.getWordRange().start.column,A=x.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=F-R-1;I<0&&(I=0);var $=0,k=0,H=this;x.match(/[A-Za-z0-9_]+/)&&A.forEach(function(X,J){k=$+X.length,I>=$&&I<=k&&(x=X,H.selection.clearSelection(),H.moveCursorTo(S,$+R),H.selection.selectTo(S,k+R)),$=k});for(var U=this.$toggleWordPairs,q,N=0;N<U.length;N++)for(var K=U[N],O=0;O<=1;O++){var B=+!O,W=x.match(new RegExp("^\\s?_?("+a.escapeRegExp(K[O])+")\\s?$","i"));if(W){var P=x.match(new RegExp("([_]|^|\\s)("+a.escapeRegExp(W[1])+")($|\\s)","g"));P&&(q=x.replace(new RegExp(a.escapeRegExp(K[O]),"i"),function(X){var J=K[B];return X.toUpperCase()==X?J=J.toUpperCase():X.charAt(0).toUpperCase()==X.charAt(0)&&(J=J.substr(0,0)+K[B].charAt(0).toUpperCase()+J.substr(1)),J}),this.insert(q),q="")}}},M.prototype.findLinkAt=function(S,F){var x,R,A=this.session.getLine(S),I=A.split(/((?:https?|ftp):\/\/[\S]+)/),$=F;$<0&&($=0);var k=0,H=0,U;try{for(var q=c(I),N=q.next();!N.done;N=q.next()){var K=N.value;if(H=k+K.length,$>=k&&$<=H&&K.match(/((?:https?|ftp):\/\/[\S]+)/)){U=K.replace(/[\s:.,'";}\]]+$/,"");break}k=H}}catch(O){x={error:O}}finally{try{N&&!N.done&&(R=q.return)&&R.call(q)}finally{if(x)throw x.error}}return U},M.prototype.openLink=function(){var S=this.selection.getCursor(),F=this.findLinkAt(S.row,S.column);return F&&window.open(F,"_blank"),F!=null},M.prototype.removeLines=function(){var S=this.$getSelectedRows();this.session.removeFullLines(S.first,S.last),this.clearSelection()},M.prototype.duplicateSelection=function(){var S=this.selection,F=this.session,x=S.getRange(),R=S.isBackwards();if(x.isEmpty()){var A=x.start.row;F.duplicateLines(A,A)}else{var I=R?x.start:x.end,$=F.insert(I,F.getTextRange(x));x.start=I,x.end=$,S.setSelectionRange(x,R)}},M.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},M.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},M.prototype.moveText=function(S,F,x){return this.session.moveText(S,F,x)},M.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},M.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},M.prototype.$moveLines=function(S,F){var x,R,A=this.selection;if(!A.inMultiSelectMode||this.inVirtualSelectionMode){var I=A.toOrientedRange();x=this.$getSelectedRows(I),R=this.session.$moveLines(x.first,x.last,F?0:S),F&&S==-1&&(R=0),I.moveBy(R,0),A.fromOrientedRange(I)}else{var $=A.rangeList.ranges;A.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var k=0,H=0,U=$.length,q=0;q<U;q++){var N=q;$[q].moveBy(k,0),x=this.$getSelectedRows($[q]);for(var K=x.first,O=x.last;++q<U;){H&&$[q].moveBy(H,0);var B=this.$getSelectedRows($[q]);if(F&&B.first!=O)break;if(!F&&B.first>O+1)break;O=B.last}for(q--,k=this.session.$moveLines(K,O,F?0:S),F&&S==-1&&(N=q+1);N<=q;)$[N].moveBy(k,0),N++;F||(k=0),H+=k}A.fromOrientedRange(A.ranges[0]),A.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},M.prototype.$getSelectedRows=function(S){return S=(S||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(S.start.row),last:this.session.getRowFoldEnd(S.end.row)}},M.prototype.onCompositionStart=function(S){this.renderer.showComposition(S)},M.prototype.onCompositionUpdate=function(S){this.renderer.setCompositionText(S)},M.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},M.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},M.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},M.prototype.isRowVisible=function(S){return S>=this.getFirstVisibleRow()&&S<=this.getLastVisibleRow()},M.prototype.isRowFullyVisible=function(S){return S>=this.renderer.getFirstFullyVisibleRow()&&S<=this.renderer.getLastFullyVisibleRow()},M.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},M.prototype.$moveByPage=function(S,F){var x=this.renderer,R=this.renderer.layerConfig,A=S*Math.floor(R.height/R.lineHeight);F===!0?this.selection.$moveSelection(function(){this.moveCursorBy(A,0)}):F===!1&&(this.selection.moveCursorBy(A,0),this.selection.clearSelection());var I=x.scrollTop;x.scrollBy(0,A*R.lineHeight),F!=null&&x.scrollCursorIntoView(null,.5),x.animateScrolling(I)},M.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},M.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},M.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},M.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},M.prototype.scrollPageDown=function(){this.$moveByPage(1)},M.prototype.scrollPageUp=function(){this.$moveByPage(-1)},M.prototype.scrollToRow=function(S){this.renderer.scrollToRow(S)},M.prototype.scrollToLine=function(S,F,x,R){this.renderer.scrollToLine(S,F,x,R)},M.prototype.centerSelection=function(){var S=this.getSelectionRange(),F={row:Math.floor(S.start.row+(S.end.row-S.start.row)/2),column:Math.floor(S.start.column+(S.end.column-S.start.column)/2)};this.renderer.alignCursor(F,.5)},M.prototype.getCursorPosition=function(){return this.selection.getCursor()},M.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},M.prototype.getSelectionRange=function(){return this.selection.getRange()},M.prototype.selectAll=function(){this.selection.selectAll()},M.prototype.clearSelection=function(){this.selection.clearSelection()},M.prototype.moveCursorTo=function(S,F){this.selection.moveCursorTo(S,F)},M.prototype.moveCursorToPosition=function(S){this.selection.moveCursorToPosition(S)},M.prototype.jumpToMatching=function(S,F){var x=this.getCursorPosition(),R=new C(this.session,x.row,x.column),A=R.getCurrentToken(),I=0;A&&A.type.indexOf("tag-name")!==-1&&(A=R.stepBackward());var $=A||R.stepForward();if($){var k,H=!1,U={},q=x.column-$.start,N,K={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if($.value.match(/[{}()\[\]]/g)){for(;q<$.value.length&&!H;q++)if(K[$.value[q]])switch(N=K[$.value[q]]+"."+$.type.replace("rparen","lparen"),isNaN(U[N])&&(U[N]=0),$.value[q]){case"(":case"[":case"{":U[N]++;break;case")":case"]":case"}":U[N]--,U[N]===-1&&(k="bracket",H=!0);break}}else $.type.indexOf("tag-name")!==-1&&(isNaN(U[$.value])&&(U[$.value]=0),A.value==="<"&&I>1?U[$.value]++:A.value==="</"&&U[$.value]--,U[$.value]===-1&&(k="tag",H=!0));H||(A=$,I++,$=R.stepForward(),q=0)}while($&&!H);if(k){var O,B;if(k==="bracket")O=this.session.getBracketRange(x),O||(O=new o(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+q-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+q-1),B=O.start,(F||B.row===x.row&&Math.abs(B.column-x.column)<2)&&(O=this.session.getBracketRange(B)));else if(k==="tag"){if(!$||$.type.indexOf("tag-name")===-1)return;if(O=new o(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),O.compare(x.row,x.column)===0){var W=this.session.getMatchingTags(x);W&&(W.openTag.contains(x.row,x.column)?(O=W.closeTag,B=O.start):(O=W.openTag,W.closeTag.start.row===x.row&&W.closeTag.start.column===x.column?B=O.end:B=O.start))}B=B||O.start}B=O&&O.cursor||B,B&&(S?O&&F?this.selection.setRange(O):O&&O.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(B.row,B.column):this.selection.moveTo(B.row,B.column))}}},M.prototype.gotoLine=function(S,F,x){this.selection.clearSelection(),this.session.unfold({row:S-1,column:F||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(S-1,F||0),this.isRowFullyVisible(S-1)||this.scrollToLine(S-1,!0,x)},M.prototype.navigateTo=function(S,F){this.selection.moveTo(S,F)},M.prototype.navigateUp=function(S){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var F=this.selection.anchor.getPosition();return this.moveCursorToPosition(F)}this.selection.clearSelection(),this.selection.moveCursorBy(-S||-1,0)},M.prototype.navigateDown=function(S){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var F=this.selection.anchor.getPosition();return this.moveCursorToPosition(F)}this.selection.clearSelection(),this.selection.moveCursorBy(S||1,0)},M.prototype.navigateLeft=function(S){if(this.selection.isEmpty())for(S=S||1;S--;)this.selection.moveCursorLeft();else{var F=this.getSelectionRange().start;this.moveCursorToPosition(F)}this.clearSelection()},M.prototype.navigateRight=function(S){if(this.selection.isEmpty())for(S=S||1;S--;)this.selection.moveCursorRight();else{var F=this.getSelectionRange().end;this.moveCursorToPosition(F)}this.clearSelection()},M.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},M.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},M.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},M.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},M.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},M.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},M.prototype.replace=function(S,F){F&&this.$search.set(F);var x=this.$search.find(this.session),R=0;return x&&(this.$tryReplace(x,S)&&(R=1),this.selection.setSelectionRange(x),this.renderer.scrollSelectionIntoView(x.start,x.end)),R},M.prototype.replaceAll=function(S,F){F&&this.$search.set(F);var x=this.$search.findAll(this.session),R=0;if(!x.length)return R;var A=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=x.length-1;I>=0;--I)this.$tryReplace(x[I],S)&&R++;return this.selection.setSelectionRange(A),R},M.prototype.$tryReplace=function(S,F){var x=this.session.getTextRange(S);return F=this.$search.replace(x,F),F!==null?(S.end=this.session.replace(S,F),S):null},M.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},M.prototype.find=function(S,F,x){F||(F={}),typeof S=="string"||S instanceof RegExp?F.needle=S:typeof S=="object"&&v.mixin(F,S);var R=this.selection.getRange();F.needle==null&&(S=this.session.getTextRange(R)||this.$search.$options.needle,S||(R=this.session.getWordRange(R.start.row,R.start.column),S=this.session.getTextRange(R)),this.$search.set({needle:S})),this.$search.set(F),F.start||this.$search.set({start:R});var A=this.$search.find(this.session);if(F.preventScroll)return A;if(A)return this.revealRange(A,x),A;F.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},M.prototype.findNext=function(S,F){this.find({skipCurrent:!0,backwards:!1},S,F)},M.prototype.findPrevious=function(S,F){this.find(S,{skipCurrent:!0,backwards:!0},F)},M.prototype.revealRange=function(S,F){this.session.unfold(S),this.selection.setSelectionRange(S);var x=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(S.start,S.end,.5),F!==!1&&this.renderer.animateScrolling(x)},M.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(S){S.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},M.prototype.setAutoScrollEditorIntoView=function(S){if(S){var F,x=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var A=this.$scrollAnchor;A.style.cssText="position:absolute",this.container.insertBefore(A,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),$=this.renderer.on("beforeRender",function(){R&&(F=x.renderer.container.getBoundingClientRect())}),k=this.renderer.on("afterRender",function(){if(R&&F&&(x.isFocused()||x.searchBox&&x.searchBox.isFocused())){var H=x.renderer,U=H.$cursorLayer.$pixelPos,q=H.layerConfig,N=U.top-q.offset;U.top>=0&&N+F.top<0?R=!0:U.top<q.height&&U.top+F.top+q.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(A.style.top=N+"px",A.style.left=U.left+"px",A.style.height=q.lineHeight+"px",A.scrollIntoView(R)),R=F=null}});this.setAutoScrollEditorIntoView=function(H){H||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",k),this.renderer.off("beforeRender",$))}}},M.prototype.$resetCursorStyle=function(){var S=this.$cursorStyle||"ace",F=this.renderer.$cursorLayer;F&&(F.setSmoothBlinking(/smooth/.test(S)),F.isBlinking=!this.$readOnly&&S!="wide",s.setCssClass(F.element,"ace_slim-cursors",/slim/.test(S)))},M.prototype.prompt=function(S,F,x){var R=this;y.loadModule("ace/ext/prompt",function(A){A.prompt(R,S,F,x)})},M}();w.$uid=0,w.prototype.curOp=null,w.prototype.prevOp={},w.prototype.$mergeableCommands=["backspace","del","insertstring"],w.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],v.implement(w.prototype,h),y.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(M){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:M})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(M){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(M){this.textInput.setReadOnly(M),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(M){this.textInput.setCopyWithEmptySelection(M)},initialValue:!1},cursorStyle:{set:function(M){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(M){this.setAutoScrollEditorIntoView(M)}},keyboardHandler:{set:function(M){this.setKeyboardHandler(M)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(M){this.session.setValue(M)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(M){this.setSession(M)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(M){this.renderer.$gutterLayer.setShowLineNumbers(M),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),M&&this.$relativeLineNumbers?T.attach(this):T.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(M){this.$showLineNumbers&&M?T.attach(this):T.detach(this)}},placeholder:{set:function(M){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var S=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(S&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),s.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!S&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),s.addCssClass(this.container,"ace_hasPlaceholder");var F=s.createElement("div");F.className="ace_placeholder",F.textContent=this.$placeholder||"",this.renderer.placeholderNode=F,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!S&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(M){var S={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},F=function(R){if(R.target==this.renderer.scroller&&R.keyCode===L.enter){R.preventDefault();var A=this.getCursorPosition().row;this.isRowVisible(A)||this.scrollToLine(A,!0,!0),this.focus()}},x;M?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(d.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",g("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",g("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",F.bind(this)),this.commands.addCommand(S),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",g("editor")),this.renderer.$gutter.setAttribute("aria-label",g("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),x||(x=new D(this)),x.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",F.bind(this)),this.commands.removeCommand(S),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),x&&x.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var T={getText:function(M,S){return(Math.abs(M.selection.lead.row-S)||S+1+(S<9?"\xB7":""))+""},getWidth:function(M,S,F){return Math.max(S.toString().length,(F.lastRow+1).toString().length,2)*F.characterWidth},update:function(M,S){S.renderer.$loop.schedule(S.renderer.CHANGE_GUTTER)},attach:function(M){M.renderer.$gutterLayer.$renderer=this,M.on("changeSelection",this.update),this.update(null,M)},detach:function(M){M.renderer.$gutterLayer.$renderer==this&&(M.renderer.$gutterLayer.$renderer=null),M.off("changeSelection",this.update),this.update(null,M)}};t.Editor=w});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=function(){function s(a,d){this.element=a,this.canvasHeight=d||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return s.prototype.moveContainer=function(a){c.translate(this.element,0,-(a.firstRowScreen*a.lineHeight%this.canvasHeight)-a.offset*this.$offsetCoefficient)},s.prototype.pageChanged=function(a,d){return Math.floor(a.firstRowScreen*a.lineHeight/this.canvasHeight)!==Math.floor(d.firstRowScreen*d.lineHeight/this.canvasHeight)},s.prototype.computeLineTop=function(a,d,i){var r=d.firstRowScreen*d.lineHeight,u=Math.floor(r/this.canvasHeight),l=i.documentToScreenRow(a,0)*d.lineHeight;return l-u*this.canvasHeight},s.prototype.computeLineHeight=function(a,d,i){return d.lineHeight*i.getRowLineCount(a)},s.prototype.getLength=function(){return this.cells.length},s.prototype.get=function(a){return this.cells[a]},s.prototype.shift=function(){this.$cacheCell(this.cells.shift())},s.prototype.pop=function(){this.$cacheCell(this.cells.pop())},s.prototype.push=function(a){if(Array.isArray(a)){this.cells.push.apply(this.cells,a);for(var d=c.createFragment(this.element),i=0;i<a.length;i++)d.appendChild(a[i].element);this.element.appendChild(d)}else this.cells.push(a),this.element.appendChild(a.element)},s.prototype.unshift=function(a){if(Array.isArray(a)){this.cells.unshift.apply(this.cells,a);for(var d=c.createFragment(this.element),i=0;i<a.length;i++)d.appendChild(a[i].element);this.element.firstChild?this.element.insertBefore(d,this.element.firstChild):this.element.appendChild(d)}else this.cells.unshift(a),this.element.insertAdjacentElement("afterbegin",a.element)},s.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},s.prototype.$cacheCell=function(a){a&&(a.element.remove(),this.cellCache.push(a))},s.prototype.createCell=function(a,d,i,r){var u=this.cellCache.pop();if(!u){var l=c.createElement("div");r&&r(l),this.element.appendChild(l),u={element:l,text:"",row:a}}return u.row=a,u},s}();t.Lines=v});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=e("../lib/oop"),s=e("../lib/lang"),a=e("../lib/event_emitter").EventEmitter,d=e("./lines").Lines,i=e("../config").nls,r=function(){function l(p){this.element=c.createElement("div"),this.element.className="ace_layer ace_gutter-layer",p.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new d(this.element),this.$lines.$offsetCoefficient=1}return l.prototype.setSession=function(p){this.session&&this.session.off("change",this.$updateAnnotations),this.session=p,p&&p.on("change",this.$updateAnnotations)},l.prototype.addGutterDecoration=function(p,f){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(p,f)},l.prototype.removeGutterDecoration=function(p,f){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(p,f)},l.prototype.setAnnotations=function(p){this.$annotations=[];for(var f=0;f<p.length;f++){var o=p[f],h=o.row,_=this.$annotations[h];_||(_=this.$annotations[h]={text:[],type:[]});var m=o.text,y=o.type;m=m?s.escapeHTML(m):o.html||"",_.text.indexOf(m)===-1&&(_.text.push(m),_.type.push(y));var C=o.className;C?_.className=C:y=="error"?_.className=" ace_error":y=="warning"&&_.className!=" ace_error"?_.className=" ace_warning":y=="info"&&!_.className&&(_.className=" ace_info")}},l.prototype.$updateAnnotations=function(p){if(this.$annotations.length){var f=p.start.row,o=p.end.row-f;if(o!==0)if(p.action=="remove")this.$annotations.splice(f,o+1,null);else{var h=new Array(o+1);h.unshift(f,1),this.$annotations.splice.apply(this.$annotations,h)}}},l.prototype.update=function(p){this.config=p;var f=this.session,o=p.firstRow,h=Math.min(p.lastRow+p.gutterOffset,f.getLength()-1);this.oldLastRow=h,this.config=p,this.$lines.moveContainer(p),this.$updateCursorRow();for(var _=f.getNextFoldLine(o),m=_?_.start.row:1/0,y=null,C=-1,E=o;;){if(E>m&&(E=_.end.row+1,_=f.getNextFoldLine(E,_),m=_?_.start.row:1/0),E>h){for(;this.$lines.getLength()>C+1;)this.$lines.pop();break}y=this.$lines.get(++C),y?y.row=E:(y=this.$lines.createCell(E,p,this.session,u),this.$lines.push(y)),this.$renderCell(y,p,_,E),E++}this._signal("afterRender"),this.$updateGutterWidth(p)},l.prototype.$updateGutterWidth=function(p){var f=this.session,o=f.gutterRenderer||this.$renderer,h=f.$firstLineNumber,_=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||f.$useWrapMode)&&(_=f.getLength()+h-1);var m=o?o.getWidth(f,_,p):_.toString().length*p.characterWidth,y=this.$padding||this.$computePadding();m+=y.left+y.right,m!==this.gutterWidth&&!isNaN(m)&&(this.gutterWidth=m,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",m))},l.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var p=this.session.selection.getCursor();this.$cursorRow!==p.row&&(this.$cursorRow=p.row)}},l.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var p=this.session.selection.cursor.row;if(this.$cursorRow=p,!(this.$cursorCell&&this.$cursorCell.row==p)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var f=this.$lines.cells;this.$cursorCell=null;for(var o=0;o<f.length;o++){var h=f[o];if(h.row>=this.$cursorRow){if(h.row>this.$cursorRow){var _=this.session.getFoldLine(this.$cursorRow);if(o>0&&_&&_.start.row==f[o-1].row)h=f[o-1];else break}h.element.className="ace_gutter-active-line "+h.element.className,this.$cursorCell=h;break}}}}},l.prototype.scrollLines=function(p){var f=this.config;if(this.config=p,this.$updateCursorRow(),this.$lines.pageChanged(f,p))return this.update(p);this.$lines.moveContainer(p);var o=Math.min(p.lastRow+p.gutterOffset,this.session.getLength()-1),h=this.oldLastRow;if(this.oldLastRow=o,!f||h<p.firstRow)return this.update(p);if(o<f.firstRow)return this.update(p);if(f.firstRow<p.firstRow)for(var _=this.session.getFoldedRowCount(f.firstRow,p.firstRow-1);_>0;_--)this.$lines.shift();if(h>o)for(var _=this.session.getFoldedRowCount(o+1,h);_>0;_--)this.$lines.pop();p.firstRow<f.firstRow&&this.$lines.unshift(this.$renderLines(p,p.firstRow,f.firstRow-1)),o>h&&this.$lines.push(this.$renderLines(p,h+1,o)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(p)},l.prototype.$renderLines=function(p,f,o){for(var h=[],_=f,m=this.session.getNextFoldLine(_),y=m?m.start.row:1/0;_>y&&(_=m.end.row+1,m=this.session.getNextFoldLine(_,m),y=m?m.start.row:1/0),!(_>o);){var C=this.$lines.createCell(_,p,this.session,u);this.$renderCell(C,p,m,_),h.push(C),_++}return h},l.prototype.$renderCell=function(p,f,o,h){var _=p.element,m=this.session,y=_.childNodes[0],C=_.childNodes[1],E=_.childNodes[2],D=E.firstChild,g=m.$firstLineNumber,b=m.$breakpoints,L=m.$decorations,w=m.gutterRenderer||this.$renderer,T=this.$showFoldWidgets&&m.foldWidgets,M=o?o.start.row:Number.MAX_VALUE,S=f.lineHeight+"px",F=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",x=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(w?w.getText(m,h):h+g).toString();if(this.$highlightGutterLine&&(h==this.$cursorRow||o&&h<this.$cursorRow&&h>=M&&this.$cursorRow<=o.end.row)&&(F+="ace_gutter-active-line ",this.$cursorCell!=p&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=p)),b[h]&&(F+=b[h]),L[h]&&(F+=L[h]),this.$annotations[h]&&h!==M&&(F+=this.$annotations[h].className),T){var A=T[h];A==null&&(A=T[h]=m.getFoldWidget(h))}if(A){var I="ace_fold-widget ace_"+A,$=A=="start"&&h==M&&h<o.end.row;if($){I+=" ace_closed";for(var k="",H=!1,U=h+1;U<=o.end.row;U++)if(this.$annotations[U]){if(this.$annotations[U].className===" ace_error"){H=!0,k=" ace_error_fold";break}if(this.$annotations[U].className===" ace_warning"){H=!0,k=" ace_warning_fold";continue}}F+=k}else I+=" ace_open";C.className!=I&&(C.className=I),c.setStyle(C.style,"height",S),c.setStyle(C.style,"display","inline-block"),C.setAttribute("role","button"),C.setAttribute("tabindex","-1");var q=m.getFoldWidgetRange(h);q?C.setAttribute("aria-label",i("Toggle code folding, rows $0 through $1",[q.start.row+1,q.end.row+1])):o?C.setAttribute("aria-label",i("Toggle code folding, rows $0 through $1",[o.start.row+1,o.end.row+1])):C.setAttribute("aria-label",i("Toggle code folding, row $0",[h+1])),$?(C.setAttribute("aria-expanded","false"),C.setAttribute("title",i("Unfold code"))):(C.setAttribute("aria-expanded","true"),C.setAttribute("title",i("Fold code")))}else C&&(c.setStyle(C.style,"display","none"),C.setAttribute("tabindex","0"),C.removeAttribute("role"),C.removeAttribute("aria-label"));return H&&this.$showFoldedAnnotations?(E.className="ace_gutter_annotation",D.className=x,D.className+=k,c.setStyle(D.style,"height",S),c.setStyle(E.style,"display","block"),c.setStyle(E.style,"height",S),E.setAttribute("aria-label",i("Read annotations row $0",[R])),E.setAttribute("tabindex","-1"),E.setAttribute("role","button")):this.$annotations[h]?(E.className="ace_gutter_annotation",D.className=x,this.$useSvgGutterIcons?D.className+=this.$annotations[h].className:_.classList.add(this.$annotations[h].className.replace(" ","")),c.setStyle(D.style,"height",S),c.setStyle(E.style,"display","block"),c.setStyle(E.style,"height",S),E.setAttribute("aria-label",i("Read annotations row $0",[R])),E.setAttribute("tabindex","-1"),E.setAttribute("role","button")):(c.setStyle(E.style,"display","none"),E.removeAttribute("aria-label"),E.removeAttribute("role"),E.setAttribute("tabindex","0")),R!==y.data&&(y.data=R),_.className!=F&&(_.className=F),c.setStyle(p.element.style,"height",this.$lines.computeLineHeight(h,f,m)+"px"),c.setStyle(p.element.style,"top",this.$lines.computeLineTop(h,f,m)+"px"),p.text=R,E.style.display==="none"&&C.style.display==="none"?p.element.setAttribute("aria-hidden",!0):p.element.setAttribute("aria-hidden",!1),p},l.prototype.setHighlightGutterLine=function(p){this.$highlightGutterLine=p},l.prototype.setShowLineNumbers=function(p){this.$renderer=!p&&{getWidth:function(){return 0},getText:function(){return""}}},l.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},l.prototype.setShowFoldWidgets=function(p){p?c.addCssClass(this.element,"ace_folding-enabled"):c.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=p,this.$padding=null},l.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},l.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var p=c.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(p.borderLeftWidth)||0)+(parseInt(p.paddingLeft)||0)+1,this.$padding.right=(parseInt(p.borderRightWidth)||0)+(parseInt(p.paddingRight)||0),this.$padding},l.prototype.getRegion=function(p){var f=this.$padding||this.$computePadding(),o=this.element.getBoundingClientRect();if(p.x<f.left+o.left)return"markers";if(this.$showFoldWidgets&&p.x>o.right-f.right)return"foldWidgets"},l}();r.prototype.$fixedWidth=!1,r.prototype.$highlightGutterLine=!0,r.prototype.$renderer="",r.prototype.$showLineNumbers=!0,r.prototype.$showFoldWidgets=!0,v.implement(r.prototype,a);function u(l){var p=document.createTextNode("");l.appendChild(p);var f=c.createElement("span");l.appendChild(f);var o=c.createElement("span");l.appendChild(o);var h=c.createElement("span");return o.appendChild(h),l}t.Gutter=r});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../range").Range,v=e("../lib/dom"),s=function(){function d(i){this.element=v.createElement("div"),this.element.className="ace_layer ace_marker-layer",i.appendChild(this.element)}return d.prototype.setPadding=function(i){this.$padding=i},d.prototype.setSession=function(i){this.session=i},d.prototype.setMarkers=function(i){this.markers=i},d.prototype.elt=function(i,r){var u=this.i!=-1&&this.element.childNodes[this.i];u?this.i++:(u=document.createElement("div"),this.element.appendChild(u),this.i=-1),u.style.cssText=r,u.className=i},d.prototype.update=function(i){if(i){this.config=i,this.i=0;var r;for(var u in this.markers){var l=this.markers[u];if(!l.range){l.update(r,this,this.session,i);continue}var p=l.range.clipRows(i.firstRow,i.lastRow);if(!p.isEmpty())if(p=p.toScreenRange(this.session),l.renderer){var f=this.$getTop(p.start.row,i),o=this.$padding+p.start.column*i.characterWidth;l.renderer(r,p,o,f,i)}else l.type=="fullLine"?this.drawFullLineMarker(r,p,l.clazz,i):l.type=="screenLine"?this.drawScreenLineMarker(r,p,l.clazz,i):p.isMultiLine()?l.type=="text"?this.drawTextMarker(r,p,l.clazz,i):this.drawMultiLineMarker(r,p,l.clazz,i):this.drawSingleLineMarker(r,p,l.clazz+" ace_start ace_br15",i)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},d.prototype.$getTop=function(i,r){return(i-r.firstRowScreen)*r.lineHeight},d.prototype.drawTextMarker=function(i,r,u,l,p){for(var f=this.session,o=r.start.row,h=r.end.row,_=o,m=0,y=0,C=f.getScreenLastRowColumn(_),E=new c(_,r.start.column,_,y);_<=h;_++)E.start.row=E.end.row=_,E.start.column=_==o?r.start.column:f.getRowWrapIndent(_),E.end.column=C,m=y,y=C,C=_+1<h?f.getScreenLastRowColumn(_+1):_==h?0:r.end.column,this.drawSingleLineMarker(i,E,u+(_==o?" ace_start":"")+" ace_br"+a(_==o||_==o+1&&r.start.column,m<y,y>C,_==h),l,_==h?0:1,p)},d.prototype.drawMultiLineMarker=function(i,r,u,l,p){var f=this.$padding,o=l.lineHeight,h=this.$getTop(r.start.row,l),_=f+r.start.column*l.characterWidth;if(p=p||"",this.session.$bidiHandler.isBidiRow(r.start.row)){var m=r.clone();m.end.row=m.start.row,m.end.column=this.session.getLine(m.start.row).length,this.drawBidiSingleLineMarker(i,m,u+" ace_br1 ace_start",l,null,p)}else this.elt(u+" ace_br1 ace_start","height:"+o+"px;right:0;top:"+h+"px;left:"+_+"px;"+(p||""));if(this.session.$bidiHandler.isBidiRow(r.end.row)){var m=r.clone();m.start.row=m.end.row,m.start.column=0,this.drawBidiSingleLineMarker(i,m,u+" ace_br12",l,null,p)}else{h=this.$getTop(r.end.row,l);var y=r.end.column*l.characterWidth;this.elt(u+" ace_br12","height:"+o+"px;width:"+y+"px;top:"+h+"px;left:"+f+"px;"+(p||""))}if(o=(r.end.row-r.start.row-1)*l.lineHeight,!(o<=0)){h=this.$getTop(r.start.row+1,l);var C=(r.start.column?1:0)|(r.end.column?0:8);this.elt(u+(C?" ace_br"+C:""),"height:"+o+"px;right:0;top:"+h+"px;left:"+f+"px;"+(p||""))}},d.prototype.drawSingleLineMarker=function(i,r,u,l,p,f){if(this.session.$bidiHandler.isBidiRow(r.start.row))return this.drawBidiSingleLineMarker(i,r,u,l,p,f);var o=l.lineHeight,h=(r.end.column+(p||0)-r.start.column)*l.characterWidth,_=this.$getTop(r.start.row,l),m=this.$padding+r.start.column*l.characterWidth;this.elt(u,"height:"+o+"px;width:"+h+"px;top:"+_+"px;left:"+m+"px;"+(f||""))},d.prototype.drawBidiSingleLineMarker=function(i,r,u,l,p,f){var o=l.lineHeight,h=this.$getTop(r.start.row,l),_=this.$padding,m=this.session.$bidiHandler.getSelections(r.start.column,r.end.column);m.forEach(function(y){this.elt(u,"height:"+o+"px;width:"+(y.width+(p||0))+"px;top:"+h+"px;left:"+(_+y.left)+"px;"+(f||""))},this)},d.prototype.drawFullLineMarker=function(i,r,u,l,p){var f=this.$getTop(r.start.row,l),o=l.lineHeight;r.start.row!=r.end.row&&(o+=this.$getTop(r.end.row,l)-f),this.elt(u,"height:"+o+"px;top:"+f+"px;left:0;right:0;"+(p||""))},d.prototype.drawScreenLineMarker=function(i,r,u,l,p){var f=this.$getTop(r.start.row,l),o=l.lineHeight;this.elt(u,"height:"+o+"px;top:"+f+"px;left:0;right:0;"+(p||""))},d}();s.prototype.$padding=0;function a(d,i,r,u){return(d?1:0)|(i?2:0)|(r?4:0)|(u?8:0)}t.Marker=s});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,n){var c=new Set(["text","rparen","lparen"]);t.isTextToken=function(v){return c.has(v)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,n){"use strict";var c=e("../lib/oop"),v=e("../lib/dom"),s=e("../lib/lang"),a=e("./lines").Lines,d=e("../lib/event_emitter").EventEmitter,i=e("../config").nls,r=e("./text_util").isTextToken,u=function(){function l(p){this.dom=v,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",p.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)}return l.prototype.$updateEolChar=function(){var p=this.session.doc,f=p.getNewLineCharacter()==`
`&&p.getNewLineMode()!="windows",o=f?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=o)return this.EOL_CHAR=o,!0},l.prototype.setPadding=function(p){this.$padding=p,this.element.style.margin="0 "+p+"px"},l.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},l.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},l.prototype.$setFontMetrics=function(p){this.$fontMetrics=p,this.$fontMetrics.on("changeCharacterSize",function(f){this._signal("changeCharacterSize",f)}.bind(this)),this.$pollSizeChanges()},l.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},l.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},l.prototype.setSession=function(p){this.session=p,p&&this.$computeTabString()},l.prototype.setShowInvisibles=function(p){return this.showInvisibles==p?!1:(this.showInvisibles=p,typeof p=="string"?(this.showSpaces=/tab/i.test(p),this.showTabs=/space/i.test(p),this.showEOL=/eol/i.test(p)):this.showSpaces=this.showTabs=this.showEOL=p,this.$computeTabString(),!0)},l.prototype.setDisplayIndentGuides=function(p){return this.displayIndentGuides==p?!1:(this.displayIndentGuides=p,this.$computeTabString(),!0)},l.prototype.setHighlightIndentGuides=function(p){return this.$highlightIndentGuides===p?!1:(this.$highlightIndentGuides=p,p)},l.prototype.$computeTabString=function(){var p=this.session.getTabSize();this.tabSize=p;for(var f=this.$tabStrings=[0],o=1;o<p+1;o++)if(this.showTabs){var h=this.dom.createElement("span");h.className="ace_invisible ace_invisible_tab",h.textContent=s.stringRepeat(this.TAB_CHAR,o),f.push(h)}else f.push(this.dom.createTextNode(s.stringRepeat(" ",o),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var _="ace_indent-guide",m=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?s.stringRepeat(this.SPACE_CHAR,this.tabSize):s.stringRepeat(" ",this.tabSize),C=this.showTabs?" ace_invisible ace_invisible_tab":"",E=this.showTabs?s.stringRepeat(this.TAB_CHAR,this.tabSize):y,h=this.dom.createElement("span");h.className=_+m,h.textContent=y,this.$tabStrings[" "]=h;var h=this.dom.createElement("span");h.className=_+C,h.textContent=E,this.$tabStrings["	"]=h}},l.prototype.updateLines=function(p,f,o){if(this.config.lastRow!=p.lastRow||this.config.firstRow!=p.firstRow)return this.update(p);this.config=p;for(var h=Math.max(f,p.firstRow),_=Math.min(o,p.lastRow),m=this.element.childNodes,y=0,E=p.firstRow;E<h;E++){var D=this.session.getFoldLine(E);if(D)if(D.containsRow(h)){h=D.start.row;break}else E=D.end.row;y++}for(var C=!1,E=h,D=this.session.getNextFoldLine(E),g=D?D.start.row:1/0;E>g&&(E=D.end.row+1,D=this.session.getNextFoldLine(E,D),g=D?D.start.row:1/0),!(E>_);){var b=m[y++];if(b){this.dom.removeChildren(b),this.$renderLine(b,E,E==g?D:!1),C&&(b.style.top=this.$lines.computeLineTop(E,p,this.session)+"px");var L=p.lineHeight*this.session.getRowLength(E)+"px";b.style.height!=L&&(C=!0,b.style.height=L)}E++}if(C)for(;y<this.$lines.cells.length;){var w=this.$lines.cells[y++];w.element.style.top=this.$lines.computeLineTop(w.row,p,this.session)+"px"}},l.prototype.scrollLines=function(p){var f=this.config;if(this.config=p,this.$lines.pageChanged(f,p))return this.update(p);this.$lines.moveContainer(p);var o=p.lastRow,h=f?f.lastRow:-1;if(!f||h<p.firstRow)return this.update(p);if(o<f.firstRow)return this.update(p);if(!f||f.lastRow<p.firstRow)return this.update(p);if(p.lastRow<f.firstRow)return this.update(p);if(f.firstRow<p.firstRow)for(var _=this.session.getFoldedRowCount(f.firstRow,p.firstRow-1);_>0;_--)this.$lines.shift();if(f.lastRow>p.lastRow)for(var _=this.session.getFoldedRowCount(p.lastRow+1,f.lastRow);_>0;_--)this.$lines.pop();p.firstRow<f.firstRow&&this.$lines.unshift(this.$renderLinesFragment(p,p.firstRow,f.firstRow-1)),p.lastRow>f.lastRow&&this.$lines.push(this.$renderLinesFragment(p,f.lastRow+1,p.lastRow)),this.$highlightIndentGuide()},l.prototype.$renderLinesFragment=function(p,f,o){for(var h=[],_=f,m=this.session.getNextFoldLine(_),y=m?m.start.row:1/0;_>y&&(_=m.end.row+1,m=this.session.getNextFoldLine(_,m),y=m?m.start.row:1/0),!(_>o);){var C=this.$lines.createCell(_,p,this.session),E=C.element;this.dom.removeChildren(E),v.setStyle(E.style,"height",this.$lines.computeLineHeight(_,p,this.session)+"px"),v.setStyle(E.style,"top",this.$lines.computeLineTop(_,p,this.session)+"px"),this.$renderLine(E,_,_==y?m:!1),this.$useLineGroups()?E.className="ace_line_group":E.className="ace_line",h.push(C),_++}return h},l.prototype.update=function(p){this.$lines.moveContainer(p),this.config=p;for(var f=p.firstRow,o=p.lastRow,h=this.$lines;h.getLength();)h.pop();h.push(this.$renderLinesFragment(p,f,o))},l.prototype.$renderToken=function(p,f,o,h){for(var _=this,m=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),C,E=0;C=m.exec(h);){var D=C[1],g=C[2],b=C[3],L=C[4],w=C[5];if(!(!_.showSpaces&&g)){var T=E!=C.index?h.slice(E,C.index):"";if(E=C.index+C[0].length,T&&y.appendChild(this.dom.createTextNode(T,this.element)),D){var M=_.session.getScreenTabSize(f+C.index);y.appendChild(_.$tabStrings[M].cloneNode(!0)),f+=M-1}else if(g)if(_.showSpaces){var S=this.dom.createElement("span");S.className="ace_invisible ace_invisible_space",S.textContent=s.stringRepeat(_.SPACE_CHAR,g.length),y.appendChild(S)}else y.appendChild(this.dom.createTextNode(g,this.element));else if(b){var S=this.dom.createElement("span");S.className="ace_invisible ace_invisible_space ace_invalid",S.textContent=s.stringRepeat(_.SPACE_CHAR,b.length),y.appendChild(S)}else if(L){f+=1;var S=this.dom.createElement("span");S.style.width=_.config.characterWidth*2+"px",S.className=_.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",S.textContent=_.showSpaces?_.SPACE_CHAR:L,y.appendChild(S)}else if(w){f+=1;var S=this.dom.createElement("span");S.style.width=_.config.characterWidth*2+"px",S.className="ace_cjk",S.textContent=w,y.appendChild(S)}}}if(y.appendChild(this.dom.createTextNode(E?h.slice(E):h,this.element)),r(o.type))p.appendChild(y);else{var F="ace_"+o.type.replace(/\./g," ace_"),S=this.dom.createElement("span");o.type=="fold"&&(S.style.width=o.value.length*this.config.characterWidth+"px",S.setAttribute("title",i("Unfold code"))),S.className=F,S.appendChild(y),p.appendChild(S)}return f+h.length},l.prototype.renderIndentGuide=function(p,f,o){var h=f.search(this.$indentGuideRe);if(h<=0||h>=o)return f;if(f[0]==" "){h-=h%this.tabSize;for(var _=h/this.tabSize,m=0;m<_;m++)p.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),f.substr(h)}else if(f[0]=="	"){for(var m=0;m<h;m++)p.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),f.substr(h)}return this.$highlightIndentGuide(),f},l.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var p=this.session.doc.$lines;if(p){var f=this.session.selection.getCursor(),o=/^\s*/.exec(this.session.doc.getLine(f.row))[0].length,h=Math.floor(o/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:h,start:f.row};var _=this.session.$bracketHighlight;if(_){for(var m=this.session.$bracketHighlight.ranges,y=0;y<m.length;y++)if(f.row!==m[y].start.row){this.$highlightIndentGuideMarker.end=m[y].start.row,f.row>m[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&p[f.row]!==""&&f.column===p[f.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=f.row+1;y<p.length;y++){var C=p[y],E=/^\s*/.exec(C)[0].length;if(C!==""&&(this.$highlightIndentGuideMarker.end=y,E<=o))break}}this.$renderHighlightIndentGuide()}}},l.prototype.$clearActiveIndentGuide=function(){for(var p=this.$lines.cells,f=0;f<p.length;f++){var o=p[f],h=o.element.childNodes;if(h.length>0){for(var _=0;_<h.length;_++)if(h[_].classList&&h[_].classList.contains("ace_indent-guide-active")){h[_].classList.remove("ace_indent-guide-active");break}}}},l.prototype.$setIndentGuideActive=function(p,f){var o=this.session.doc.getLine(p.row);if(o!==""){var h=p.element.childNodes;if(h){var _=h[f-1];_&&_.classList&&_.classList.contains("ace_indent-guide")&&_.classList.add("ace_indent-guide-active")}}},l.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var p=this.$lines.cells;this.$clearActiveIndentGuide();var f=this.$highlightIndentGuideMarker.indentLevel;if(f!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var o=0;o<p.length;o++){var h=p[o];if(this.$highlightIndentGuideMarker.end&&h.row>=this.$highlightIndentGuideMarker.start+1){if(h.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,f)}}else for(var o=p.length-1;o>=0;o--){var h=p[o];if(this.$highlightIndentGuideMarker.end&&h.row<this.$highlightIndentGuideMarker.start){if(h.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,f)}}}},l.prototype.$createLineElement=function(p){var f=this.dom.createElement("div");return f.className="ace_line",f.style.height=this.config.lineHeight+"px",f},l.prototype.$renderWrappedLine=function(p,f,o){var h=0,_=0,m=o[0],y=0,C=this.$createLineElement();p.appendChild(C);for(var E=0;E<f.length;E++){var D=f[E],g=D.value;if(E==0&&this.displayIndentGuides){if(h=g.length,g=this.renderIndentGuide(C,g,m),!g)continue;h-=g.length}if(h+g.length<m)y=this.$renderToken(C,y,D,g),h+=g.length;else{for(;h+g.length>=m;)y=this.$renderToken(C,y,D,g.substring(0,m-h)),g=g.substring(m-h),h=m,C=this.$createLineElement(),p.appendChild(C),C.appendChild(this.dom.createTextNode(s.stringRepeat("\xA0",o.indent),this.element)),_++,y=0,m=o[_]||Number.MAX_VALUE;g.length!=0&&(h+=g.length,y=this.$renderToken(C,y,D,g))}}o[o.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(C,y,null,"",!0)},l.prototype.$renderSimpleLine=function(p,f){for(var o=0,h=0;h<f.length;h++){var _=f[h],m=_.value;if(!(h==0&&this.displayIndentGuides&&(m=this.renderIndentGuide(p,m),!m))){if(o+m.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(p,o,_,m);o=this.$renderToken(p,o,_,m)}}},l.prototype.$renderOverflowMessage=function(p,f,o,h,_){o&&this.$renderToken(p,f,o,h.slice(0,this.MAX_LINE_LENGTH-f));var m=this.dom.createElement("span");m.className="ace_inline_button ace_keyword ace_toggle_wrap",m.textContent=_?"<hide>":"<click to see more...>",p.appendChild(m)},l.prototype.$renderLine=function(p,f,o){if(!o&&o!=!1&&(o=this.session.getFoldLine(f)),o)var h=this.$getFoldLineTokens(f,o);else var h=this.session.getTokens(f);var _=p;if(h.length){var m=this.session.getRowSplitData(f);if(m&&m.length){this.$renderWrappedLine(p,h,m);var _=p.lastChild}else{var _=p;this.$useLineGroups()&&(_=this.$createLineElement(),p.appendChild(_)),this.$renderSimpleLine(_,h)}}else this.$useLineGroups()&&(_=this.$createLineElement(),p.appendChild(_));if(this.showEOL&&_){o&&(f=o.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=f==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,_.appendChild(y)}},l.prototype.$getFoldLineTokens=function(p,f){var o=this.session,h=[];function _(y,C,E){for(var D=0,g=0;g+y[D].value.length<C;)if(g+=y[D].value.length,D++,D==y.length)return;if(g!=C){var b=y[D].value.substring(C-g);b.length>E-C&&(b=b.substring(0,E-C)),h.push({type:y[D].type,value:b}),g=C+b.length,D+=1}for(;g<E&&D<y.length;){var b=y[D].value;b.length+g>E?h.push({type:y[D].type,value:b.substring(0,E-g)}):h.push(y[D]),g+=b.length,D+=1}}var m=o.getTokens(p);return f.walk(function(y,C,E,D,g){y!=null?h.push({type:"fold",value:y}):(g&&(m=o.getTokens(C)),m.length&&_(m,D,E))},f.end.row,this.session.getLine(f.end.row).length),h},l.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},l}();u.prototype.EOF_CHAR="\xB6",u.prototype.EOL_CHAR_LF="\xAC",u.prototype.EOL_CHAR_CRLF="\xA4",u.prototype.EOL_CHAR=u.prototype.EOL_CHAR_LF,u.prototype.TAB_CHAR="\u2014",u.prototype.SPACE_CHAR="\xB7",u.prototype.$padding=0,u.prototype.MAX_LINE_LENGTH=1e4,u.prototype.showInvisibles=!1,u.prototype.showSpaces=!1,u.prototype.showTabs=!1,u.prototype.showEOL=!1,u.prototype.displayIndentGuides=!0,u.prototype.$highlightIndentGuides=!0,u.prototype.$tabStrings=[],u.prototype.destroy={},u.prototype.onChangeTabSize=u.prototype.$computeTabString,c.implement(u.prototype,d),t.Text=u});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=function(){function s(a){this.element=c.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),c.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return s.prototype.$updateOpacity=function(a){for(var d=this.cursors,i=d.length;i--;)c.setStyle(d[i].style,"opacity",a?"":"0")},s.prototype.$startCssAnimation=function(){for(var a=this.cursors,d=a.length;d--;)a[d].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&c.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},s.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,c.removeCssClass(this.element,"ace_animate-blinking")},s.prototype.setPadding=function(a){this.$padding=a},s.prototype.setSession=function(a){this.session=a},s.prototype.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},s.prototype.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())},s.prototype.setSmoothBlinking=function(a){a!=this.smoothBlinking&&(this.smoothBlinking=a,c.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.restartTimer())},s.prototype.addCursor=function(){var a=c.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},s.prototype.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},s.prototype.hideCursor=function(){this.isVisible=!1,c.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},s.prototype.showCursor=function(){this.isVisible=!0,c.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},s.prototype.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,c.removeCssClass(this.element,"ace_smooth-blinking")),a(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&c.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),c.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var d=function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){a(!0),d()},this.blinkInterval),d()}},s.prototype.getPixelPosition=function(a,d){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var i=this.session.documentToScreenPosition(a),r=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,a.row)?this.session.$bidiHandler.getPosLeft(i.column):i.column*this.config.characterWidth),u=(i.row-(d?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:u}},s.prototype.isCursorInView=function(a,d){return a.top>=0&&a.top<d.maxHeight},s.prototype.update=function(a){this.config=a;var d=this.session.$selectionMarkers,i=0,r=0;(d===void 0||d.length===0)&&(d=[{cursor:null}]);for(var i=0,u=d.length;i<u;i++){var l=this.getPixelPosition(d[i].cursor,!0);if(!((l.top>a.height+a.offset||l.top<0)&&i>1)){var p=this.cursors[r++]||this.addCursor(),f=p.style;this.drawCursor?this.drawCursor(p,l,a,d[i],this.session):this.isCursorInView(l,a)?(c.setStyle(f,"display","block"),c.translate(p,l.left,l.top),c.setStyle(f,"width",Math.round(a.characterWidth)+"px"),c.setStyle(f,"height",a.lineHeight+"px")):c.setStyle(f,"display","none")}}for(;this.cursors.length>r;)this.removeCursor();var o=this.session.getOverwrite();this.$setOverwrite(o),this.$pixelPos=l,this.restartTimer()},s.prototype.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?c.addCssClass(this.element,"ace_overwrite-cursors"):c.removeCssClass(this.element,"ace_overwrite-cursors"))},s.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},s}();v.prototype.$padding=0,v.prototype.drawCursor=null,t.Cursor=v});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var p=function(f,o){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(h[m]=_[m])},p(f,o)};return function(f,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");p(f,o);function h(){this.constructor=f}f.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}}(),v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/event"),d=e("./lib/event_emitter").EventEmitter,i=32768,r=function(){function p(f,o){this.element=s.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+o,this.inner=s.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),f.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addListener(this.element,"scroll",this.onScroll.bind(this)),a.addListener(this.element,"mousedown",a.preventDefault)}return p.prototype.setVisible=function(f){this.element.style.display=f?"":"none",this.isVisible=f,this.coeff=1},p}();v.implement(r.prototype,d);var u=function(p){c(f,p);function f(o,h){var _=p.call(this,o,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,h.$scrollbarWidth=_.width=s.scrollbarWidth(o.ownerDocument),_.inner.style.width=_.element.style.width=(_.width||15)+5+"px",_.$minWidth=0,_}return f.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var o=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-o)/(this.coeff-o)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},f.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},f.prototype.setHeight=function(o){this.element.style.height=o+"px"},f.prototype.setScrollHeight=function(o){this.scrollHeight=o,o>i?(this.coeff=i/o,o=i):this.coeff!=1&&(this.coeff=1),this.inner.style.height=o+"px"},f.prototype.setScrollTop=function(o){this.scrollTop!=o&&(this.skipEvent=!0,this.scrollTop=o,this.element.scrollTop=o*this.coeff)},f}(r);u.prototype.setInnerHeight=u.prototype.setScrollHeight;var l=function(p){c(f,p);function f(o,h){var _=p.call(this,o,"-h")||this;return _.scrollLeft=0,_.height=h.$scrollbarWidth,_.inner.style.height=_.element.style.height=(_.height||15)+5+"px",_}return f.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},f.prototype.getHeight=function(){return this.isVisible?this.height:0},f.prototype.setWidth=function(o){this.element.style.width=o+"px"},f.prototype.setInnerWidth=function(o){this.inner.style.width=o+"px"},f.prototype.setScrollWidth=function(o){this.inner.style.width=o+"px"},f.prototype.setScrollLeft=function(o){this.scrollLeft!=o&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=o)},f}(r);t.ScrollBar=u,t.ScrollBarV=u,t.ScrollBarH=l,t.VScrollBar=u,t.HScrollBar=l});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var l=function(p,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(o[_]=h[_])},l(p,f)};return function(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");l(p,f);function o(){this.constructor=p}p.prototype=f===null?Object.create(f):(o.prototype=f.prototype,new o)}}(),v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/event"),d=e("./lib/event_emitter").EventEmitter;s.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var i=function(){function l(p,f){this.element=s.createElement("div"),this.element.className="ace_sb"+f,this.inner=s.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,p.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return l.prototype.setVisible=function(p){this.element.style.display=p?"":"none",this.isVisible=p,this.coeff=1},l}();v.implement(i.prototype,d);var r=function(l){c(p,l);function p(f,o){var h=l.call(this,f,"-v")||this;return h.scrollTop=0,h.scrollHeight=0,h.parent=f,h.width=h.VScrollWidth,h.renderer=o,h.inner.style.width=h.element.style.width=(h.width||15)+"px",h.$minWidth=0,h}return p.prototype.onMouseDown=function(f,o){if(f==="mousedown"&&!(a.getButton(o)!==0||o.detail===2)){if(o.target===this.inner){var h=this,_=o.clientY,m=function(L){_=L.clientY},y=function(){clearInterval(g)},C=o.clientY,E=this.thumbTop,D=function(){if(_!==void 0){var L=h.scrollTopFromThumbTop(E+_-C);L!==h.scrollTop&&h._emit("scroll",{data:L})}};a.capture(this.inner,m,y);var g=setInterval(D,20);return a.preventDefault(o)}var b=o.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(b)}),a.preventDefault(o)}},p.prototype.getHeight=function(){return this.height},p.prototype.scrollTopFromThumbTop=function(f){var o=f*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return o=o>>0,o<0?o=0:o>this.pageHeight-this.viewHeight&&(o=this.pageHeight-this.viewHeight),o},p.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},p.prototype.setHeight=function(f){this.height=Math.max(0,f),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},p.prototype.setScrollHeight=function(f,o){this.pageHeight===f&&!o||(this.pageHeight=f,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},p.prototype.setScrollTop=function(f){this.scrollTop=f,f<0&&(f=0),this.thumbTop=f*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},p}(i);r.prototype.setInnerHeight=r.prototype.setScrollHeight;var u=function(l){c(p,l);function p(f,o){var h=l.call(this,f,"-h")||this;return h.scrollLeft=0,h.scrollWidth=0,h.height=h.HScrollHeight,h.inner.style.height=h.element.style.height=(h.height||12)+"px",h.renderer=o,h}return p.prototype.onMouseDown=function(f,o){if(f==="mousedown"&&!(a.getButton(o)!==0||o.detail===2)){if(o.target===this.inner){var h=this,_=o.clientX,m=function(L){_=L.clientX},y=function(){clearInterval(g)},C=o.clientX,E=this.thumbLeft,D=function(){if(_!==void 0){var L=h.scrollLeftFromThumbLeft(E+_-C);L!==h.scrollLeft&&h._emit("scroll",{data:L})}};a.capture(this.inner,m,y);var g=setInterval(D,20);return a.preventDefault(o)}var b=o.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(b)}),a.preventDefault(o)}},p.prototype.getHeight=function(){return this.isVisible?this.height:0},p.prototype.scrollLeftFromThumbLeft=function(f){var o=f*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return o=o>>0,o<0?o=0:o>this.pageWidth-this.viewWidth&&(o=this.pageWidth-this.viewWidth),o},p.prototype.setWidth=function(f){this.width=Math.max(0,f),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},p.prototype.setScrollWidth=function(f,o){this.pageWidth===f&&!o||(this.pageWidth=f,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},p.prototype.setScrollLeft=function(f){this.scrollLeft=f,f<0&&(f=0),this.thumbLeft=f*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},p}(i);u.prototype.setInnerWidth=u.prototype.setScrollWidth,t.ScrollBar=r,t.ScrollBarV=r,t.ScrollBarH=u,t.VScrollBar=r,t.HScrollBar=u});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var c=e("./lib/event"),v=function(){function s(a,d){this.onRender=a,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=d||window;var i=this;this._flush=function(r){i.pending=!1;var u=i.changes;if(u&&(c.blockIdle(100),i.changes=0,i.onRender(u)),i.changes){if(i.$recursionLimit--<0)return;i.schedule()}else i.$recursionLimit=2}}return s.prototype.schedule=function(a){this.changes=this.changes|a,this.changes&&!this.pending&&(c.nextFrame(this._flush),this.pending=!0)},s.prototype.clear=function(a){var d=this.changes;return this.changes=0,d},s}();t.RenderLoop=v});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var c=e("../lib/oop"),v=e("../lib/dom"),s=e("../lib/lang"),a=e("../lib/event"),d=e("../lib/useragent"),i=e("../lib/event_emitter").EventEmitter,r=512,u=typeof ResizeObserver=="function",l=200,p=function(){function f(o){this.el=v.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=v.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=v.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),o.appendChild(this.el),this.$measureNode.textContent=s.stringRepeat("X",r),this.$characterSize={width:0,height:0},u?this.$addObserver():this.checkForSizeChanges()}return f.prototype.$setMeasureNodeStyles=function(o,h){o.width=o.height="auto",o.left=o.top="0px",o.visibility="hidden",o.position="absolute",o.whiteSpace="pre",d.isIE<8?o["font-family"]="inherit":o.font="inherit",o.overflow=h?"hidden":"visible"},f.prototype.checkForSizeChanges=function(o){if(o===void 0&&(o=this.$measureSizes()),o&&(this.$characterSize.width!==o.width||this.$characterSize.height!==o.height)){this.$measureNode.style.fontWeight="bold";var h=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=o,this.charSizes=Object.create(null),this.allowBoldFonts=h&&h.width===o.width&&h.height===o.height,this._emit("changeCharacterSize",{data:o})}},f.prototype.$addObserver=function(){var o=this;this.$observer=new window.ResizeObserver(function(h){o.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},f.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var o=this;return this.$pollSizeChangesTimer=a.onIdle(function h(){o.checkForSizeChanges(),a.onIdle(h,500)},500)},f.prototype.setPolling=function(o){o?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},f.prototype.$measureSizes=function(o){var h={height:(o||this.$measureNode).clientHeight,width:(o||this.$measureNode).clientWidth/r};return h.width===0||h.height===0?null:h},f.prototype.$measureCharWidth=function(o){this.$main.textContent=s.stringRepeat(o,r);var h=this.$main.getBoundingClientRect();return h.width/r},f.prototype.getCharacterWidth=function(o){var h=this.charSizes[o];return h===void 0&&(h=this.charSizes[o]=this.$measureCharWidth(o)/this.$characterSize.width),h},f.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},f.prototype.$getZoom=function(o){return!o||!o.parentElement?1:(window.getComputedStyle(o).zoom||1)*this.$getZoom(o.parentElement)},f.prototype.$initTransformMeasureNodes=function(){var o=function(h,_){return["div",{style:"position: absolute;top:"+h+"px;left:"+_+"px;"}]};this.els=v.buildDom([o(0,0),o(l,0),o(0,l),o(l,l)],this.el)},f.prototype.transformCoordinates=function(o,h){if(o){var _=this.$getZoom(this.el);o=E(1/_,o)}function m($,k,H){var U=$[1]*k[0]-$[0]*k[1];return[(-k[1]*H[0]+k[0]*H[1])/U,(+$[1]*H[0]-$[0]*H[1])/U]}function y($,k){return[$[0]-k[0],$[1]-k[1]]}function C($,k){return[$[0]+k[0],$[1]+k[1]]}function E($,k){return[$*k[0],$*k[1]]}this.els||this.$initTransformMeasureNodes();function D($){var k=$.getBoundingClientRect();return[k.left,k.top]}var g=D(this.els[0]),b=D(this.els[1]),L=D(this.els[2]),w=D(this.els[3]),T=m(y(w,b),y(w,L),y(C(b,L),C(w,g))),M=E(1+T[0],y(b,g)),S=E(1+T[1],y(L,g));if(h){var F=h,x=T[0]*F[0]/l+T[1]*F[1]/l+1,R=C(E(F[0],M),E(F[1],S));return C(E(1/x/l,R),g)}var A=y(o,g),I=m(y(M,E(T[0],A)),y(S,E(T[1],A)),A);return E(l,I)},f}();p.prototype.$characterSize={width:0,height:0},c.implement(p.prototype,i),t.FontMetrics=p});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=e("../lib/oop"),s=e("../lib/event_emitter").EventEmitter,a=function(){function d(i,r){this.canvas=c.createElement("canvas"),this.renderer=r,this.pixelRatio=1,this.maxHeight=r.layerConfig.maxHeight,this.lineHeight=r.layerConfig.lineHeight,this.canvasHeight=i.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=i.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},i.element.appendChild(this.canvas)}return d.prototype.$updateDecorators=function(i){var r=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(i){this.maxHeight=i.maxHeight,this.lineHeight=i.lineHeight,this.canvasHeight=i.height;var u=(i.lastRow+1)*this.lineHeight;u<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var l=this.canvas.getContext("2d");function p(w,T){return w.priority<T.priority?-1:w.priority>T.priority?1:0}var f=this.renderer.session.$annotations;if(l.clearRect(0,0,this.canvas.width,this.canvas.height),f){var o={info:1,warning:2,error:3};f.forEach(function(w){w.priority=o[w.type]||null}),f=f.sort(p);for(var h=this.renderer.session.$foldData,_=0;_<f.length;_++){var m=f[_].row,y=this.compensateFoldRows(m,h),C=Math.round((m-y)*this.lineHeight*this.heightRatio),E=Math.round((m-y)*this.lineHeight*this.heightRatio),D=Math.round(((m-y)*this.lineHeight+this.lineHeight)*this.heightRatio),g=D-E;if(g<this.minDecorationHeight){var b=(E+D)/2|0;b<this.halfMinDecorationHeight?b=this.halfMinDecorationHeight:b+this.halfMinDecorationHeight>this.canvasHeight&&(b=this.canvasHeight-this.halfMinDecorationHeight),E=Math.round(b-this.halfMinDecorationHeight),D=Math.round(b+this.halfMinDecorationHeight)}l.fillStyle=r[f[_].type]||null,l.fillRect(0,C,this.canvasWidth,D-E)}}var L=this.renderer.session.selection.getCursor();if(L){var y=this.compensateFoldRows(L.row,h),C=Math.round((L.row-y)*this.lineHeight*this.heightRatio);l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,C,this.canvasWidth,2)}},d.prototype.compensateFoldRows=function(i,r){var u=0;if(r&&r.length>0)for(var l=0;l<r.length;l++)i>r[l].start.row&&i<r[l].end.row?u+=i-r[l].start.row:i>=r[l].end.row&&(u+=r[l].end.row-r[l].start.row);return u},d}();v.implement(a.prototype,s),t.Decorator=a});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/dom"),s=e("./lib/lang"),a=e("./config"),d=e("./layer/gutter").Gutter,i=e("./layer/marker").Marker,r=e("./layer/text").Text,u=e("./layer/cursor").Cursor,l=e("./scrollbar").HScrollBar,p=e("./scrollbar").VScrollBar,f=e("./scrollbar_custom").HScrollBar,o=e("./scrollbar_custom").VScrollBar,h=e("./renderloop").RenderLoop,_=e("./layer/font_metrics").FontMetrics,m=e("./lib/event_emitter").EventEmitter,y=e("./css/editor-css"),C=e("./layer/decorators").Decorator,E=e("./lib/useragent");v.importCssString(y,"ace_editor.css",!1);var D=function(){function g(b,L){var w=this;this.container=b||v.createElement("div"),v.addCssClass(this.container,"ace_editor"),v.HI_DPI&&v.addCssClass(this.container,"ace_hidpi"),this.setTheme(L),a.get("useStrictCSP")==null&&a.set("useStrictCSP",!1),this.$gutter=v.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=v.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=v.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new d(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new i(this.content);var T=this.$textLayer=new r(this.content);this.canvas=T.element,this.$markerFront=new i(this.content),this.$cursorLayer=new u(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new p(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on("scroll",function(M){w.$scrollAnimation||w.session.setScrollTop(M.data-w.scrollMargin.top)}),this.scrollBarH.on("scroll",function(M){w.$scrollAnimation||w.session.setScrollLeft(M.data-w.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new _(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(M){w.updateCharacterSize(),w.onResize(!0,w.gutterWidth,w.$size.width,w.$size.height),w._signal("changeCharacterSize",M)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!E.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),a.resetOptions(this),a._signal("renderer",this)}return g.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),v.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},g.prototype.setSession=function(b){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=b,b&&this.scrollMargin.top&&b.getScrollTop()<=0&&b.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(b),this.$markerBack.setSession(b),this.$markerFront.setSession(b),this.$gutterLayer.setSession(b),this.$textLayer.setSession(b),b&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},g.prototype.updateLines=function(b,L,w){if(L===void 0&&(L=1/0),this.$changedLines?(this.$changedLines.firstRow>b&&(this.$changedLines.firstRow=b),this.$changedLines.lastRow<L&&(this.$changedLines.lastRow=L)):this.$changedLines={firstRow:b,lastRow:L},this.$changedLines.lastRow<this.layerConfig.firstRow)if(w)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},g.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},g.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},g.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},g.prototype.updateFull=function(b){b?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},g.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},g.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},g.prototype.onResize=function(b,L,w,T){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=b?1:0;var M=this.container;T||(T=M.clientHeight||M.scrollHeight),w||(w=M.clientWidth||M.scrollWidth);var S=this.$updateCachedSize(b,L,w,T);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!w&&!T)return this.resizing=0;b&&(this.$gutterLayer.$padding=null),b?this.$renderChanges(S|this.$changes,!0):this.$loop.schedule(S|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},g.prototype.$updateCachedSize=function(b,L,w,T){T-=this.$extraHeight||0;var M=0,S=this.$size,F={width:S.width,height:S.height,scrollerHeight:S.scrollerHeight,scrollerWidth:S.scrollerWidth};if(T&&(b||S.height!=T)&&(S.height=T,M|=this.CHANGE_SIZE,S.scrollerHeight=S.height,this.$horizScroll&&(S.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(S.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",M=M|this.CHANGE_SCROLL),w&&(b||S.width!=w)){M|=this.CHANGE_SIZE,S.width=w,L==null&&(L=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=L,v.setStyle(this.scrollBarH.element.style,"left",L+"px"),v.setStyle(this.scroller.style,"left",L+this.margin.left+"px"),S.scrollerWidth=Math.max(0,w-L-this.scrollBarV.getWidth()-this.margin.h),v.setStyle(this.$gutter.style,"left",this.margin.left+"px");var x=this.scrollBarV.getWidth()+"px";v.setStyle(this.scrollBarH.element.style,"right",x),v.setStyle(this.scroller.style,"right",x),v.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(S.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||b)&&(M|=this.CHANGE_FULL)}return S.$dirty=!w||!T,M&&this._signal("resize",F),M},g.prototype.onGutterResize=function(b){var L=this.$showGutter?b:0;L!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,L,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},g.prototype.adjustWrapLimit=function(){var b=this.$size.scrollerWidth-this.$padding*2,L=Math.floor(b/this.characterWidth);return this.session.adjustWrapLimit(L,this.$showPrintMargin&&this.$printMarginColumn)},g.prototype.setAnimatedScroll=function(b){this.setOption("animatedScroll",b)},g.prototype.getAnimatedScroll=function(){return this.$animatedScroll},g.prototype.setShowInvisibles=function(b){this.setOption("showInvisibles",b),this.session.$bidiHandler.setShowInvisibles(b)},g.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},g.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},g.prototype.setDisplayIndentGuides=function(b){this.setOption("displayIndentGuides",b)},g.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},g.prototype.setHighlightIndentGuides=function(b){this.setOption("highlightIndentGuides",b)},g.prototype.setShowPrintMargin=function(b){this.setOption("showPrintMargin",b)},g.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},g.prototype.setPrintMarginColumn=function(b){this.setOption("printMarginColumn",b)},g.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},g.prototype.getShowGutter=function(){return this.getOption("showGutter")},g.prototype.setShowGutter=function(b){return this.setOption("showGutter",b)},g.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},g.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},g.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},g.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},g.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var b=v.createElement("div");b.className="ace_layer ace_print-margin-layer",this.$printMarginEl=v.createElement("div"),this.$printMarginEl.className="ace_print-margin",b.appendChild(this.$printMarginEl),this.content.insertBefore(b,this.content.firstChild)}var L=this.$printMarginEl.style;L.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",L.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},g.prototype.getContainerElement=function(){return this.container},g.prototype.getMouseEventTarget=function(){return this.scroller},g.prototype.getTextAreaContainer=function(){return this.container},g.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var b=this.textarea.style,L=this.$composition;if(!this.$keepTextAreaAtCursor&&!L){v.translate(this.textarea,-100,0);return}var w=this.$cursorLayer.$pixelPos;if(w){L&&L.markerRange&&(w=this.$cursorLayer.getPixelPosition(L.markerRange.start,!0));var T=this.layerConfig,M=w.top,S=w.left;M-=T.offset;var F=L&&L.useTextareaForIME||E.isMobile?this.lineHeight:1;if(M<0||M>T.height-F){v.translate(this.textarea,0,0);return}var x=1,R=this.$size.height-F;if(!L)M+=this.lineHeight;else if(L.useTextareaForIME){var A=this.textarea.value;x=this.characterWidth*this.session.$getStringScreenWidth(A)[0]}else M+=this.lineHeight+2;S-=this.scrollLeft,S>this.$size.scrollerWidth-x&&(S=this.$size.scrollerWidth-x),S+=this.gutterWidth+this.margin.left,v.setStyle(b,"height",F+"px"),v.setStyle(b,"width",x+"px"),v.translate(this.textarea,Math.min(S,this.$size.scrollerWidth-x),Math.min(M,R))}}},g.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},g.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},g.prototype.getLastFullyVisibleRow=function(){var b=this.layerConfig,L=b.lastRow,w=this.session.documentToScreenRow(L,0)*b.lineHeight;return w-this.session.getScrollTop()>b.height-b.lineHeight?L-1:L},g.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},g.prototype.setPadding=function(b){this.$padding=b,this.$textLayer.setPadding(b),this.$cursorLayer.setPadding(b),this.$markerFront.setPadding(b),this.$markerBack.setPadding(b),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},g.prototype.setScrollMargin=function(b,L,w,T){var M=this.scrollMargin;M.top=b|0,M.bottom=L|0,M.right=T|0,M.left=w|0,M.v=M.top+M.bottom,M.h=M.left+M.right,M.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-M.top),this.updateFull()},g.prototype.setMargin=function(b,L,w,T){var M=this.margin;M.top=b|0,M.bottom=L|0,M.right=T|0,M.left=w|0,M.v=M.top+M.bottom,M.h=M.left+M.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},g.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},g.prototype.setHScrollBarAlwaysVisible=function(b){this.setOption("hScrollBarAlwaysVisible",b)},g.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},g.prototype.setVScrollBarAlwaysVisible=function(b){this.setOption("vScrollBarAlwaysVisible",b)},g.prototype.$updateScrollBarV=function(){var b=this.layerConfig.maxHeight,L=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(b-=(L-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>b-L&&(b=this.scrollTop+L,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(b+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},g.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},g.prototype.freeze=function(){this.$frozen=!0},g.prototype.unfreeze=function(){this.$frozen=!1},g.prototype.$renderChanges=function(b,L){if(this.$changes&&(b|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!b&&!L){this.$changes|=b;return}if(this.$size.$dirty)return this.$changes|=b,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",b),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var w=this.layerConfig;if(b&this.CHANGE_FULL||b&this.CHANGE_SIZE||b&this.CHANGE_TEXT||b&this.CHANGE_LINES||b&this.CHANGE_SCROLL||b&this.CHANGE_H_SCROLL){if(b|=this.$computeLayerConfig()|this.$loop.clear(),w.firstRow!=this.layerConfig.firstRow&&w.firstRowScreen==this.layerConfig.firstRowScreen){var T=this.scrollTop+(w.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;T>0&&(this.scrollTop=T,b=b|this.CHANGE_SCROLL,b|=this.$computeLayerConfig()|this.$loop.clear())}w=this.layerConfig,this.$updateScrollBarV(),b&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),v.translate(this.content,-this.scrollLeft,-w.offset);var M=w.width+2*this.$padding+"px",S=w.minHeight+"px";v.setStyle(this.content.style,"width",M),v.setStyle(this.content.style,"height",S)}if(b&this.CHANGE_H_SCROLL&&(v.translate(this.content,-this.scrollLeft,-w.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),b&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}if(b&this.CHANGE_SCROLL){this.$changedLines=null,b&this.CHANGE_TEXT||b&this.CHANGE_LINES?this.$textLayer.update(w):this.$textLayer.scrollLines(w),this.$showGutter&&(b&this.CHANGE_GUTTER||b&this.CHANGE_LINES?this.$gutterLayer.update(w):this.$gutterLayer.scrollLines(w)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w),this.$markerBack.update(w),this.$markerFront.update(w),this.$cursorLayer.update(w),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}b&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(w),this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):b&this.CHANGE_LINES?((this.$updateLines()||b&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):b&this.CHANGE_TEXT||b&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)):b&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(w),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(w)),b&this.CHANGE_CURSOR&&(this.$cursorLayer.update(w),this.$moveTextAreaToCursor()),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(w),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(w),this._signal("afterRender",b)},g.prototype.$autosize=function(){var b=this.session.getScreenLength()*this.lineHeight,L=this.$maxLines*this.lineHeight,w=Math.min(L,Math.max((this.$minLines||1)*this.lineHeight,b))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(w+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&w>this.$maxPixelHeight&&(w=this.$maxPixelHeight);var T=w<=2*this.lineHeight,M=!T&&b>L;if(w!=this.desiredHeight||this.$size.height!=this.desiredHeight||M!=this.$vScroll){M!=this.$vScroll&&(this.$vScroll=M,this.scrollBarV.setVisible(M));var S=this.container.clientWidth;this.container.style.height=w+"px",this.$updateCachedSize(!0,this.$gutterWidth,S,w),this.desiredHeight=w,this._signal("autosize")}},g.prototype.$computeLayerConfig=function(){var b=this.session,L=this.$size,w=L.height<=2*this.lineHeight,T=this.session.getScreenLength(),M=T*this.lineHeight,S=this.$getLongestLine(),F=!w&&(this.$hScrollBarAlwaysVisible||L.scrollerWidth-S-2*this.$padding<0),x=this.$horizScroll!==F;x&&(this.$horizScroll=F,this.scrollBarH.setVisible(F));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var A=L.scrollerHeight+this.lineHeight,I=!this.$maxLines&&this.$scrollPastEnd?(L.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;M+=I;var $=this.scrollMargin;this.session.setScrollTop(Math.max(-$.top,Math.min(this.scrollTop,M-L.scrollerHeight+$.bottom))),this.session.setScrollLeft(Math.max(-$.left,Math.min(this.scrollLeft,S+2*this.$padding-L.scrollerWidth+$.right)));var k=!w&&(this.$vScrollBarAlwaysVisible||L.scrollerHeight-M+I<0||this.scrollTop>$.top),H=R!==k;H&&(this.$vScroll=k,this.scrollBarV.setVisible(k));var U=this.scrollTop%this.lineHeight,q=Math.ceil(A/this.lineHeight)-1,N=Math.max(0,Math.round((this.scrollTop-U)/this.lineHeight)),K=N+q,O,B,W=this.lineHeight;N=b.screenToDocumentRow(N,0);var P=b.getFoldLine(N);P&&(N=P.start.row),O=b.documentToScreenRow(N,0),B=b.getRowLength(N)*W,K=Math.min(b.screenToDocumentRow(K,0),b.getLength()-1),A=L.scrollerHeight+b.getRowLength(K)*W+B,U=this.scrollTop-O*W;var X=0;return(this.layerConfig.width!=S||x)&&(X=this.CHANGE_H_SCROLL),(x||H)&&(X|=this.$updateCachedSize(!0,this.gutterWidth,L.width,L.height),this._signal("scrollbarVisibilityChanged"),H&&(S=this.$getLongestLine())),this.layerConfig={width:S,padding:this.$padding,firstRow:N,firstRowScreen:O,lastRow:K,lineHeight:W,characterWidth:this.characterWidth,minHeight:A,maxHeight:M,offset:U,gutterOffset:W?Math.max(0,Math.ceil((U+L.height-L.scrollerHeight)/W)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(S-this.$padding),X},g.prototype.$updateLines=function(){if(this.$changedLines){var b=this.$changedLines.firstRow,L=this.$changedLines.lastRow;this.$changedLines=null;var w=this.layerConfig;if(!(b>w.lastRow+1)&&!(L<w.firstRow)){if(L===1/0){this.$showGutter&&this.$gutterLayer.update(w),this.$textLayer.update(w);return}return this.$textLayer.updateLines(w,b,L),!0}}},g.prototype.$getLongestLine=function(){var b=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(b+=1),this.$textLayer&&b>this.$textLayer.MAX_LINE_LENGTH&&(b=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(b*this.characterWidth))},g.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},g.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},g.prototype.addGutterDecoration=function(b,L){this.$gutterLayer.addGutterDecoration(b,L)},g.prototype.removeGutterDecoration=function(b,L){this.$gutterLayer.removeGutterDecoration(b,L)},g.prototype.updateBreakpoints=function(b){this._rows=b,this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.setAnnotations=function(b){this.$gutterLayer.setAnnotations(b),this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},g.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},g.prototype.showCursor=function(){this.$cursorLayer.showCursor()},g.prototype.scrollSelectionIntoView=function(b,L,w){this.scrollCursorIntoView(b,w),this.scrollCursorIntoView(L,w)},g.prototype.scrollCursorIntoView=function(b,L,w){if(this.$size.scrollerHeight!==0){var T=this.$cursorLayer.getPixelPosition(b),M=T.left,S=T.top,F=w&&w.top||0,x=w&&w.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+F>S?(L&&R+F>S+this.lineHeight&&(S-=L*this.$size.scrollerHeight),S===0&&(S=-this.scrollMargin.top),this.session.setScrollTop(S)):R+this.$size.scrollerHeight-x<S+this.lineHeight&&(L&&R+this.$size.scrollerHeight-x<S-this.lineHeight&&(S+=L*this.$size.scrollerHeight),this.session.setScrollTop(S+this.lineHeight+x-this.$size.scrollerHeight));var A=this.scrollLeft,I=2*this.layerConfig.characterWidth;M-I<A?(M-=I,M<this.$padding+I&&(M=-this.scrollMargin.left),this.session.setScrollLeft(M)):(M+=I,A+this.$size.scrollerWidth<M+this.characterWidth?this.session.setScrollLeft(Math.round(M+this.characterWidth-this.$size.scrollerWidth)):A<=this.$padding&&M-A<this.characterWidth&&this.session.setScrollLeft(0))}},g.prototype.getScrollTop=function(){return this.session.getScrollTop()},g.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},g.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},g.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},g.prototype.scrollToRow=function(b){this.session.setScrollTop(b*this.lineHeight)},g.prototype.alignCursor=function(b,L){typeof b=="number"&&(b={row:b,column:0});var w=this.$cursorLayer.getPixelPosition(b),T=this.$size.scrollerHeight-this.lineHeight,M=w.top-T*(L||0);return this.session.setScrollTop(M),M},g.prototype.$calcSteps=function(b,L){var w=0,T=this.STEPS,M=[],S=function(F,x,R){return R*(Math.pow(F-1,3)+1)+x};for(w=0;w<T;++w)M.push(S(w/this.STEPS,b,L-b));return M},g.prototype.scrollToLine=function(b,L,w,T){var M=this.$cursorLayer.getPixelPosition({row:b,column:0}),S=M.top;L&&(S-=this.$size.scrollerHeight/2);var F=this.scrollTop;this.session.setScrollTop(S),w!==!1&&this.animateScrolling(F,T)},g.prototype.animateScrolling=function(b,L){var w=this.scrollTop;if(!this.$animatedScroll)return;var T=this;if(b==w)return;if(this.$scrollAnimation){var M=this.$scrollAnimation.steps;if(M.length&&(b=M[0],b==w))return}var S=T.$calcSteps(b,w);this.$scrollAnimation={from:b,to:w,steps:S},clearInterval(this.$timer),T.session.setScrollTop(S.shift()),T.session.$scrollTop=w;function F(){T.$timer=clearInterval(T.$timer),T.$scrollAnimation=null,T.$stopAnimation=!1,L&&L()}this.$timer=setInterval(function(){if(T.$stopAnimation){F();return}if(!T.session)return clearInterval(T.$timer);S.length?(T.session.setScrollTop(S.shift()),T.session.$scrollTop=w):w!=null?(T.session.$scrollTop=-1,T.session.setScrollTop(w),w=null):F()},10)},g.prototype.scrollToY=function(b){this.scrollTop!==b&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=b)},g.prototype.scrollToX=function(b){this.scrollLeft!==b&&(this.scrollLeft=b),this.$loop.schedule(this.CHANGE_H_SCROLL)},g.prototype.scrollTo=function(b,L){this.session.setScrollTop(L),this.session.setScrollLeft(b)},g.prototype.scrollBy=function(b,L){L&&this.session.setScrollTop(this.session.getScrollTop()+L),b&&this.session.setScrollLeft(this.session.getScrollLeft()+b)},g.prototype.isScrollableBy=function(b,L){if(L<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||L>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||b<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||b>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},g.prototype.pixelToScreenCoordinates=function(b,L){var w;if(this.$hasCssTransforms){w={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,L]);b=T[1]-this.gutterWidth-this.margin.left,L=T[0]}else w=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-w.left-this.$padding,S=M/this.characterWidth,F=Math.floor((L+this.scrollTop-w.top)/this.lineHeight),x=this.$blockCursor?Math.floor(S):Math.round(S);return{row:F,column:x,side:S-x>0?1:-1,offsetX:M}},g.prototype.screenToTextCoordinates=function(b,L){var w;if(this.$hasCssTransforms){w={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,L]);b=T[1]-this.gutterWidth-this.margin.left,L=T[0]}else w=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-w.left-this.$padding,S=M/this.characterWidth,F=this.$blockCursor?Math.floor(S):Math.round(S),x=Math.floor((L+this.scrollTop-w.top)/this.lineHeight);return this.session.screenToDocumentPosition(x,Math.max(F,0),M)},g.prototype.textToScreenCoordinates=function(b,L){var w=this.scroller.getBoundingClientRect(),T=this.session.documentToScreenPosition(b,L),M=this.$padding+(this.session.$bidiHandler.isBidiRow(T.row,b)?this.session.$bidiHandler.getPosLeft(T.column):Math.round(T.column*this.characterWidth)),S=T.row*this.lineHeight;return{pageX:w.left+M-this.scrollLeft,pageY:w.top+S-this.scrollTop}},g.prototype.visualizeFocus=function(){v.addCssClass(this.container,"ace_focus")},g.prototype.visualizeBlur=function(){v.removeCssClass(this.container,"ace_focus")},g.prototype.showComposition=function(b){this.$composition=b,b.cssText||(b.cssText=this.textarea.style.cssText),b.useTextareaForIME==null&&(b.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(v.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):b.markerId=this.session.addMarker(b.markerRange,"ace_composition_marker","text")},g.prototype.setCompositionText=function(b){var L=this.session.selection.cursor;this.addToken(b,"composition_placeholder",L.row,L.column),this.$moveTextAreaToCursor()},g.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),v.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var b=this.session.selection.cursor;this.removeExtraToken(b.row,b.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},g.prototype.setGhostText=function(b,L){var w=this.session.selection.cursor,T=L||{row:w.row,column:w.column};this.removeGhostText();var M=b.split(`
`);if(this.addToken(M[0],"ghost_text",T.row,T.column),this.$ghostText={text:b,position:{row:T.row,column:T.column}},M.length>1){this.$ghostTextWidget={text:M.slice(1).join(`
`),row:T.row,column:T.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var S=this.$cursorLayer.getPixelPosition(T,!0),F=this.container,x=F.getBoundingClientRect().height,R=M.length*this.lineHeight,A=R<x-S.top;if(A)return;R<x?this.scrollBy(0,(M.length-1)*this.lineHeight):this.scrollBy(0,S.top)}},g.prototype.removeGhostText=function(){if(this.$ghostText){var b=this.$ghostText.position;this.removeExtraToken(b.row,b.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},g.prototype.addToken=function(b,L,w,T){var M=this.session;M.bgTokenizer.lines[w]=null;var S={type:L,value:b},F=M.getTokens(w);if(T==null||!F.length)F.push(S);else for(var x=0,R=0;R<F.length;R++){var A=F[R];if(x+=A.value.length,T<=x){var I=A.value.length-(x-T),$=A.value.slice(0,I),k=A.value.slice(I);F.splice(R,1,{type:A.type,value:$},S,{type:A.type,value:k});break}}this.updateLines(w,w)},g.prototype.removeExtraToken=function(b,L){this.session.bgTokenizer.lines[b]=null,this.updateLines(b,b)},g.prototype.setTheme=function(b,L){var w=this;if(this.$themeId=b,w._dispatchEvent("themeChange",{theme:b}),!b||typeof b=="string"){var T=b||this.$options.theme.initialValue;a.loadModule(["theme",T],M)}else M(b);function M(S){if(w.$themeId!=b)return L&&L();if(!S||!S.cssClass)throw new Error("couldn't load module "+b+" or it didn't call define");S.$id&&(w.$themeId=S.$id),v.importCssString(S.cssText,S.cssClass,w.container),w.theme&&v.removeCssClass(w.container,w.theme.cssClass);var F="padding"in S?S.padding:"padding"in(w.theme||{})?4:w.$padding;w.$padding&&F!=w.$padding&&w.setPadding(F),w.$theme=S.cssClass,w.theme=S,v.addCssClass(w.container,S.cssClass),v.setCssClass(w.container,"ace_dark",S.isDark),w.$size&&(w.$size.width=0,w.$updateSizeAsync()),w._dispatchEvent("themeLoaded",{theme:S}),L&&L()}},g.prototype.getTheme=function(){return this.$themeId},g.prototype.setStyle=function(b,L){v.setCssClass(this.container,b,L!==!1)},g.prototype.unsetStyle=function(b){v.removeCssClass(this.container,b)},g.prototype.setCursorStyle=function(b){v.setStyle(this.scroller.style,"cursor",b)},g.prototype.setMouseCursor=function(b){v.setStyle(this.scroller.style,"cursor",b)},g.prototype.attachToShadowRoot=function(){v.importCssString(y,"ace_editor.css",this.container)},g.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},g.prototype.$updateCustomScrollbar=function(b){var L=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,b===!0?(this.scrollBarV=new o(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(w){L.$scrollAnimation||L.session.setScrollTop(w.data-L.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){L.$scrollAnimation||L.session.setScrollLeft(w.data-L.scrollMargin.left)}),this.$scrollDecorator=new C(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new p(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",function(w){L.$scrollAnimation||L.session.setScrollTop(w.data-L.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(w){L.$scrollAnimation||L.session.setScrollLeft(w.data-L.scrollMargin.left)}))},g.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var b=this;this.$resizeTimer=s.delayedCall(function(){b.destroyed||b.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(L){var w=L[0].contentRect.width,T=L[0].contentRect.height;Math.abs(b.$size.width-w)>1||Math.abs(b.$size.height-T)>1?b.$resizeTimer.delay():b.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},g}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,c.implement(D.prototype,m),a.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(g){!g&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):g&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(g){this.$textLayer.setShowInvisibles(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(g){typeof g=="number"&&(this.$printMarginColumn=g),this.$showPrintMargin=!!g,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(g){this.$gutter.style.display=g?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(g){this.$gutterLayer.$useSvgGutterIcons=g},initialValue:!1},showFoldedAnnotations:{set:function(g){this.$gutterLayer.$showFoldedAnnotations=g},initialValue:!1},fadeFoldWidgets:{set:function(g){v.setCssClass(this.$gutter,"ace_fade-fold-widgets",g)},initialValue:!1},showFoldWidgets:{set:function(g){this.$gutterLayer.setShowFoldWidgets(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(g){this.$textLayer.setDisplayIndentGuides(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(g){this.$textLayer.setHighlightIndentGuides(g)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(g){this.$gutterLayer.setHighlightGutterLine(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(g){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(g){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(g){typeof g=="number"&&(g=g+"px"),this.container.style.fontSize=g,this.updateFontSize()},initialValue:12},fontFamily:{set:function(g){this.container.style.fontFamily=g,this.updateFontSize()}},maxLines:{set:function(g){this.updateFull()}},minLines:{set:function(g){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(g){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(g){g=+g||0,this.$scrollPastEnd!=g&&(this.$scrollPastEnd=g,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(g){this.$gutterLayer.$fixedWidth=!!g,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(g){this.$updateCustomScrollbar(g)},initialValue:!1},theme:{set:function(g){this.setTheme(g)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!E.isMobile&&!E.isIE}}),t.VirtualRenderer=D});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var c=e("../lib/oop"),v=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,a=e("../config");function d(l){var p="importScripts('"+v.qualifyURL(l)+"');";try{return new Blob([p],{type:"application/javascript"})}catch{var f=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,o=new f;return o.append(p),o.getBlob("application/javascript")}}function i(l){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var p=d(l),f=window.URL||window.webkitURL,o=f.createObjectURL(p);return new Worker(o)}return new Worker(l)}var r=function(l){l.postMessage||(l=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=l,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){c.implement(this,s),this.$createWorkerFromOldConfig=function(l,p,f,o,h){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),a.get("packaged")||!e.toUrl)o=o||a.moduleUrl(p,"worker");else{var _=this.$normalizePath;o=o||_(e.toUrl("ace/worker/worker.js",null,"_"));var m={};l.forEach(function(y){m[y]=_(e.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=i(o),h&&this.send("importScripts",h),this.$worker.postMessage({init:!0,tlns:m,module:p,classname:f}),this.$worker},this.onMessage=function(l){var p=l.data;switch(p.type){case"event":this._signal(p.name,{data:p.data});break;case"call":var f=this.callbacks[p.id];f&&(f(p.data),delete this.callbacks[p.id]);break;case"error":this.reportError(p.data);break;case"log":window.console&&console.log&&console.log.apply(console,p.data);break}},this.reportError=function(l){window.console&&console.error&&console.error(l)},this.$normalizePath=function(l){return v.qualifyURL(l)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(l){l.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(l,p){this.$worker.postMessage({command:l,args:p})},this.call=function(l,p,f){if(f){var o=this.callbackId++;this.callbacks[o]=f,p.push(o)}this.send(l,p)},this.emit=function(l,p){try{p.data&&p.data.err&&(p.data.err={message:p.data.err.message,stack:p.data.err.stack,code:p.data.err.code}),this.$worker&&this.$worker.postMessage({event:l,data:{data:p.data}})}catch(f){console.error(f.stack)}},this.attachToDocument=function(l){this.$doc&&this.terminate(),this.$doc=l,this.call("setValue",[l.getValue()]),l.on("change",this.changeListener,!0)},this.changeListener=function(l){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),l.action=="insert"?this.deltaQueue.push(l.start,l.lines):this.deltaQueue.push(l.start,l.end)},this.$sendDeltaQueue=function(){var l=this.deltaQueue;l&&(this.deltaQueue=null,l.length>50&&l.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:l}))}}).call(r.prototype);var u=function(l,p,f){var o=null,h=!1,_=Object.create(s),m=[],y=new r({messageBuffer:m,terminate:function(){},postMessage:function(E){m.push(E),o&&(h?setTimeout(C):C())}});y.setEmitSync=function(E){h=E};var C=function(){var E=m.shift();E.command?o[E.command].apply(o,E.args):E.event&&_._signal(E.event,E.data)};return _.postMessage=function(E){y.onMessage({data:E})},_.callback=function(E,D){this.postMessage({type:"call",id:D,data:E})},_.emit=function(E,D){this.postMessage({type:"event",name:E,data:D})},a.loadModule(["worker",p],function(E){for(o=new E[f](_);m.length;)C()}),y};t.UIWorkerClient=u,t.WorkerClient=r,t.createWorker=i});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var c=e("./range").Range,v=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),a=function(){function d(i,r,u,l,p,f){var o=this;this.length=r,this.session=i,this.doc=i.getDocument(),this.mainClass=p,this.othersClass=f,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=l,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=u;var h=i.getUndoManager().$undoStack||i.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),i.selection.on("changeCursor",this.$onCursorChange)}return d.prototype.setup=function(){var i=this,r=this.doc,u=this.session;this.selectionBefore=u.selection.toJSON(),u.selection.inMultiSelectMode&&u.selection.toSingleRange(),this.pos=r.createAnchor(this.$pos.row,this.$pos.column);var l=this.pos;l.$insertRight=!0,l.detach(),l.markerId=u.addMarker(new c(l.row,l.column,l.row,l.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(p){var f=r.createAnchor(p.row,p.column);f.$insertRight=!0,f.detach(),i.others.push(f)}),u.setUndoSelect(!1)},d.prototype.showOtherMarkers=function(){if(!this.othersActive){var i=this.session,r=this;this.othersActive=!0,this.others.forEach(function(u){u.markerId=i.addMarker(new c(u.row,u.column,u.row,u.column+r.length),r.othersClass,null,!1)})}},d.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var i=0;i<this.others.length;i++)this.session.removeMarker(this.others[i].markerId)}},d.prototype.onUpdate=function(i){if(this.$updating)return this.updateAnchors(i);var r=i;if(r.start.row===r.end.row&&r.start.row===this.pos.row){this.$updating=!0;var u=i.action==="insert"?r.end.column-r.start.column:r.start.column-r.end.column,l=r.start.column>=this.pos.column&&r.start.column<=this.pos.column+this.length+1,p=r.start.column-this.pos.column;if(this.updateAnchors(i),l&&(this.length+=u),l&&!this.session.$fromUndo){if(i.action==="insert")for(var f=this.others.length-1;f>=0;f--){var o=this.others[f],h={row:o.row,column:o.column+p};this.doc.insertMergedLines(h,i.lines)}else if(i.action==="remove")for(var f=this.others.length-1;f>=0;f--){var o=this.others[f],h={row:o.row,column:o.column+p};this.doc.remove(new c(h.row,h.column,h.row,h.column-u))}}this.$updating=!1,this.updateMarkers()}},d.prototype.updateAnchors=function(i){this.pos.onChange(i);for(var r=this.others.length;r--;)this.others[r].onChange(i);this.updateMarkers()},d.prototype.updateMarkers=function(){if(!this.$updating){var i=this,r=this.session,u=function(p,f){r.removeMarker(p.markerId),p.markerId=r.addMarker(new c(p.row,p.column,p.row,p.column+i.length),f,null,!1)};u(this.pos,this.mainClass);for(var l=this.others.length;l--;)u(this.others[l],this.othersClass)}},d.prototype.onCursorChange=function(i){if(!(this.$updating||!this.session)){var r=this.session.selection.getCursor();r.row===this.pos.row&&r.column>=this.pos.column&&r.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",i)):(this.hideOtherMarkers(),this._emit("cursorLeave",i))}},d.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},d.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var i=this.session.getUndoManager(),r=(i.$undoStack||i.$undostack).length-this.$undoStackDepth,u=0;u<r;u++)i.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},d}();s.implement(a.prototype,v),t.PlaceHolder=a});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var c=e("../lib/event"),v=e("../lib/useragent");function s(d,i){return d.row==i.row&&d.column==i.column}function a(d){var i=d.domEvent,r=i.altKey,u=i.shiftKey,l=i.ctrlKey,p=d.getAccelKey(),f=d.getButton();if(l&&v.isMac&&(f=i.button),d.editor.inMultiSelectMode&&f==2){d.editor.textInput.onContextMenu(d.domEvent);return}if(!l&&!r&&!p){f===0&&d.editor.inMultiSelectMode&&d.editor.exitMultiSelectMode();return}if(f===0){var o=d.editor,h=o.selection,_=o.inMultiSelectMode,m=d.getDocumentPosition(),y=h.getCursor(),C=d.inSelection()||h.isEmpty()&&s(m,y),E=d.x,D=d.y,g=function(k){E=k.clientX,D=k.clientY},b=o.session,L=o.renderer.pixelToScreenCoordinates(E,D),w=L,T;if(o.$mouseHandler.$enableJumpToDef)l&&r||p&&r?T=u?"block":"add":r&&o.$blockSelectEnabled&&(T="block");else if(p&&!r){if(T="add",!_&&u)return}else r&&o.$blockSelectEnabled&&(T="block");if(T&&v.isMac&&i.ctrlKey&&o.$mouseHandler.cancelContextMenu(),T=="add"){if(!_&&C)return;if(!_){var M=h.toOrientedRange();o.addSelectionMarker(M)}var S=h.rangeList.rangeAtPoint(m);o.inVirtualSelectionMode=!0,u&&(S=null,M=h.ranges[0]||M,o.removeSelectionMarker(M)),o.once("mouseup",function(){var k=h.toOrientedRange();S&&k.isEmpty()&&s(S.cursor,k.cursor)?h.substractPoint(k.cursor):(u?h.substractPoint(M.cursor):M&&(o.removeSelectionMarker(M),h.addRange(M)),h.addRange(k)),o.inVirtualSelectionMode=!1})}else if(T=="block"){d.stop(),o.inVirtualSelectionMode=!0;var F,x=[],R=function(){var k=o.renderer.pixelToScreenCoordinates(E,D),H=b.screenToDocumentPosition(k.row,k.column,k.offsetX);s(w,k)&&s(H,h.lead)||(w=k,o.selection.moveToPosition(H),o.renderer.scrollCursorIntoView(),o.removeSelectionMarkers(x),x=h.rectangularRangeBlock(w,L),o.$mouseHandler.$clickSelection&&x.length==1&&x[0].isEmpty()&&(x[0]=o.$mouseHandler.$clickSelection.clone()),x.forEach(o.addSelectionMarker,o),o.updateSelectionMarkers())};_&&!p?h.toSingleRange():!_&&p&&(F=h.toOrientedRange(),o.addSelectionMarker(F)),u?L=b.documentToScreenPosition(h.lead):h.moveToPosition(m),w={row:-1,column:-1};var A=function(k){R(),clearInterval($),o.removeSelectionMarkers(x),x.length||(x=[h.toOrientedRange()]),F&&(o.removeSelectionMarker(F),h.toSingleRange(F));for(var H=0;H<x.length;H++)h.addRange(x[H]);o.inVirtualSelectionMode=!1,o.$mouseHandler.$clickSelection=null},I=R;c.capture(o.container,g,A);var $=setInterval(function(){I()},20);return d.preventDefault()}}}t.onMouseDown=a});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(v){v.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(v){v.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(v){v.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(v){v.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(v){v.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(v){v.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(v){v.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(v){v.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(v){v.multiSelect.rangeCount>1?v.multiSelect.joinSelections():v.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(v){v.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(v){v.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(v){v.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(v){v.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(v){return v&&v.inMultiSelectMode}}];var c=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new c(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var c=e("./range_list").RangeList,v=e("./range").Range,s=e("./selection").Selection,a=e("./mouse/multi_select_handler").onMouseDown,d=e("./lib/event"),i=e("./lib/lang"),r=e("./commands/multi_select_commands");t.commands=r.defaultCommands.concat(r.multiSelectCommands);var u=e("./search").Search,l=new u;function p(y,C,E){return l.$options.wrap=!0,l.$options.needle=C,l.$options.backwards=E==-1,l.find(y)}var f=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(f.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,C){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var E=this.toOrientedRange();if(this.rangeList.add(E),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),C||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(E),this.$onAddRange(E)}y.cursor||(y.cursor=y.end);var D=this.rangeList.add(y);return this.$onAddRange(y),D.length&&this.$onRemoveRange(D),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),C||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var C=this.rangeList.removeAll();C.length&&this.$onRemoveRange(C),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var C=this.rangeList.substractPoint(y);if(C)return this.$onRemoveRange(C),C[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var C=this.rangeList.ranges.pop();y.push(C),this.rangeCount=0}for(var E=y.length;E--;){var D=this.ranges.indexOf(y[E]);this.ranges.splice(D,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),C=C||this.ranges[0],C&&!C.isEqual(this.getRange())&&this.fromOrientedRange(C)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new c,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],C=[],E=0;E<y.length;E++){var D=y[E],g=D.start.row,b=D.end.row;if(g===b)C.push(D.clone());else{for(C.push(new v(g,D.start.column,g,this.session.getLine(g).length));++g<b;)C.push(this.getLineRange(g,!0));C.push(new v(b,0,b,D.end.column))}E==0&&!this.isBackwards()&&(C=C.reverse())}this.toSingleRange();for(var E=C.length;E--;)this.addRange(C[E])},this.joinSelections=function(){var y=this.rangeList.ranges,C=y[y.length-1],E=v.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(E,C.cursor==C.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,C=y[y.length-1],E=v.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(E,C.cursor==C.start)}else{var D=this.session.documentToScreenPosition(this.cursor),g=this.session.documentToScreenPosition(this.anchor),b=this.rectangularRangeBlock(D,g);b.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,C,E){var D=[],g=y.column<C.column;if(g)var b=y.column,L=C.column,w=y.offsetX,T=C.offsetX;else var b=C.column,L=y.column,w=C.offsetX,T=y.offsetX;var M=y.row<C.row;if(M)var S=y.row,F=C.row;else var S=C.row,F=y.row;b<0&&(b=0),S<0&&(S=0),S==F&&(E=!0);for(var x,R=S;R<=F;R++){var A=v.fromPoints(this.session.screenToDocumentPosition(R,b,w),this.session.screenToDocumentPosition(R,L,T));if(A.isEmpty()){if(x&&h(A.end,x))break;x=A.end}A.cursor=g?A.start:A.end,D.push(A)}if(M&&D.reverse(),!E){for(var I=D.length-1;D[I].isEmpty()&&I>0;)I--;if(I>0)for(var $=0;D[$].isEmpty();)$++;for(var k=I;k>=$;k--)D[k].isEmpty()&&D.splice(k,1)}return D}}.call(s.prototype);var o=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var C=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",C),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var C=this.session.$selectionMarkers.indexOf(y);C!=-1&&this.session.$selectionMarkers.splice(C,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var C=this.session.$selectionMarkers,E=y.length;E--;){var D=y[E];if(D.marker){this.session.removeMarker(D.marker);var g=C.indexOf(D);g!=-1&&C.splice(g,1)}}this.session.selectionMarkerCount=C.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(r.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(r.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var C=y.command,E=y.editor;if(E.multiSelect){if(C.multiSelectAction)C.multiSelectAction=="forEach"?D=E.forEachSelection(C,y.args):C.multiSelectAction=="forEachLine"?D=E.forEachSelection(C,y.args,!0):C.multiSelectAction=="single"?(E.exitMultiSelectMode(),D=C.exec(E,y.args||{})):D=C.multiSelectAction(E,y.args||{});else{var D=C.exec(E,y.args||{});E.multiSelect.addRange(E.multiSelect.toOrientedRange()),E.multiSelect.mergeOverlappingRanges()}return D}},this.forEachSelection=function(y,C,E){if(!this.inVirtualSelectionMode){var D=E&&E.keepOrder,g=E==!0||E&&E.$byLines,b=this.session,L=this.selection,w=L.rangeList,T=(D?L:w).ranges,M;if(!T.length)return y.exec?y.exec(this,C||{}):y(this,C||{});var S=L._eventRegistry;L._eventRegistry={};var F=new s(b);this.inVirtualSelectionMode=!0;for(var x=T.length;x--;){if(g)for(;x>0&&T[x].start.row==T[x-1].end.row;)x--;F.fromOrientedRange(T[x]),F.index=x,this.selection=b.selection=F;var R=y.exec?y.exec(this,C||{}):y(this,C||{});!M&&R!==void 0&&(M=R),F.toOrientedRange(T[x])}F.detach(),this.selection=b.selection=L,this.inVirtualSelectionMode=!1,L._eventRegistry=S,L.mergeOverlappingRanges(),L.ranges[0]&&L.fromOrientedRange(L.ranges[0]);var A=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),A&&A.from==A.to&&this.renderer.animateScrolling(A.from),M}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var C=this.multiSelect.rangeList.ranges,E=[],D=0;D<C.length;D++)E.push(this.session.getTextRange(C[D]));var g=this.session.getDocument().getNewLineCharacter();y=E.join(g),y.length==(E.length-1)*g.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,C){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var E=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&C==this.multiSelect.anchor)return;var D=C==this.multiSelect.anchor?E.cursor==E.start?E.end:E.start:E.cursor;D.row!=C.row||this.session.$clipPositionToDocument(D.row,D.column).column!=C.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,C,E){if(C=C||{},C.needle=y||C.needle,C.needle==null){var D=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();C.needle=this.session.getTextRange(D)}this.$search.set(C);var g=this.$search.findAll(this.session);if(!g.length)return 0;var b=this.multiSelect;E||b.toSingleRange(g[0]);for(var L=g.length;L--;)b.addRange(g[L],!0);return D&&b.rangeList.rangeAtPoint(D.start)&&b.addRange(D,!0),g.length},this.selectMoreLines=function(y,C){var E=this.selection.toOrientedRange(),D=E.cursor==E.end,g=this.session.documentToScreenPosition(E.cursor);this.selection.$desiredColumn&&(g.column=this.selection.$desiredColumn);var b=this.session.screenToDocumentPosition(g.row+y,g.column);if(E.isEmpty())var w=b;else var L=this.session.documentToScreenPosition(D?E.end:E.start),w=this.session.screenToDocumentPosition(L.row+y,L.column);if(D){var T=v.fromPoints(b,w);T.cursor=T.start}else{var T=v.fromPoints(w,b);T.cursor=T.end}if(T.desiredColumn=g.column,!this.selection.inMultiSelectMode)this.selection.addRange(E);else if(C)var M=E.cursor;this.selection.addRange(T),M&&this.selection.substractPoint(M)},this.transposeSelections=function(y){for(var C=this.session,E=C.multiSelect,D=E.ranges,g=D.length;g--;){var b=D[g];if(b.isEmpty()){var L=C.getWordRange(b.start.row,b.start.column);b.start.row=L.start.row,b.start.column=L.start.column,b.end.row=L.end.row,b.end.column=L.end.column}}E.mergeOverlappingRanges();for(var w=[],g=D.length;g--;){var b=D[g];w.unshift(C.getTextRange(b))}y<0?w.unshift(w.pop()):w.push(w.shift());for(var g=D.length;g--;){var b=D[g],T=b.clone();C.replace(b,w[g]),b.start.row=T.start.row,b.start.column=T.start.column}E.fromOrientedRange(E.ranges[0])},this.selectMore=function(y,C,E){var D=this.session,g=D.multiSelect,b=g.toOrientedRange();if(!(b.isEmpty()&&(b=D.getWordRange(b.start.row,b.start.column),b.cursor=y==-1?b.start:b.end,this.multiSelect.addRange(b),E))){var L=D.getTextRange(b),w=p(D,L,y);w&&(w.cursor=y==-1?w.start:w.end,this.session.unfold(w),this.multiSelect.addRange(w),this.renderer.scrollCursorIntoView(null,.5)),C&&this.multiSelect.substractPoint(b.cursor)}},this.alignCursors=function(){var y=this.session,C=y.multiSelect,E=C.ranges,D=-1,g=E.filter(function(I){if(I.cursor.row==D)return!0;D=I.cursor.row});if(!E.length||g.length==E.length-1){var b=this.selection.getRange(),L=b.start.row,w=b.end.row,T=L==w;if(T){var M=this.session.getLength(),S;do S=this.session.getLine(w);while(/[=:]/.test(S)&&++w<M);do S=this.session.getLine(L);while(/[=:]/.test(S)&&--L>0);L<0&&(L=0),w>=M&&(w=M-1)}var F=this.session.removeFullLines(L,w);F=this.$reAlignText(F,T),this.session.insert({row:L,column:0},F.join(`
`)+`
`),T||(b.start.column=0,b.end.column=F[F.length-1].length),this.selection.setRange(b)}else{g.forEach(function(I){C.substractPoint(I.cursor)});var x=0,R=1/0,A=E.map(function(I){var $=I.cursor,k=y.getLine($.row),H=k.substr($.column).search(/\S/g);return H==-1&&(H=0),$.column>x&&(x=$.column),H<R&&(R=H),H});E.forEach(function(I,$){var k=I.cursor,H=x-k.column,U=A[$]-R;H>U?y.insert(k,i.stringRepeat(" ",H-U)):y.remove(new v(k.row,k.column,k.row,k.column-H+U)),I.start.column=I.end.column=x,I.start.row=I.end.row=k.row,I.cursor=I.end}),C.fromOrientedRange(E[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,C){var E=!0,D=!0,g,b,L;return y.map(function(F){var x=F.match(/(\s*)(.*?)(\s*)([=:].*)/);return x?g==null?(g=x[1].length,b=x[2].length,L=x[3].length,x):(g+b+L!=x[1].length+x[2].length+x[3].length&&(D=!1),g!=x[1].length&&(E=!1),g>x[1].length&&(g=x[1].length),b<x[2].length&&(b=x[2].length),L>x[3].length&&(L=x[3].length),x):[F]}).map(C?T:E?D?M:T:S);function w(F){return i.stringRepeat(" ",F)}function T(F){return F[2]?w(g)+F[2]+w(b-F[2].length+L)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}function M(F){return F[2]?w(g+b-F[2].length)+F[2]+w(L)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}function S(F){return F[2]?w(g)+F[2]+w(L)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}}}).call(o.prototype);function h(y,C){return y.row==C.row&&y.column==C.column}t.onSessionChange=function(y){var C=y.session;C&&!C.multiSelect&&(C.$selectionMarkers=[],C.selection.$initRangeList(),C.multiSelect=C.selection),this.multiSelect=C&&C.multiSelect;var E=y.oldSession;E&&(E.multiSelect.off("addRange",this.$onAddRange),E.multiSelect.off("removeRange",this.$onRemoveRange),E.multiSelect.off("multiSelect",this.$onMultiSelect),E.multiSelect.off("singleSelect",this.$onSingleSelect),E.multiSelect.lead.off("change",this.$checkMultiselectChange),E.multiSelect.anchor.off("change",this.$checkMultiselectChange)),C&&(C.multiSelect.on("addRange",this.$onAddRange),C.multiSelect.on("removeRange",this.$onRemoveRange),C.multiSelect.on("multiSelect",this.$onMultiSelect),C.multiSelect.on("singleSelect",this.$onSingleSelect),C.multiSelect.lead.on("change",this.$checkMultiselectChange),C.multiSelect.anchor.on("change",this.$checkMultiselectChange)),C&&this.inMultiSelectMode!=C.selection.inMultiSelectMode&&(C.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function _(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=t.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",a),y.commands.addCommands(r.defaultCommands),m(y))}function m(y){if(!y.textInput)return;var C=y.textInput.getElement(),E=!1;d.addListener(C,"keydown",function(g){var b=g.keyCode==18&&!(g.ctrlKey||g.shiftKey||g.metaKey);y.$blockSelectEnabled&&b?E||(y.renderer.setMouseCursor("crosshair"),E=!0):E&&D()},y),d.addListener(C,"keyup",D,y),d.addListener(C,"blur",D,y);function D(g){E&&(y.renderer.setMouseCursor(""),E=!1)}}t.MultiSelect=_,e("./config").defineOptions(o.prototype,"editor",{enableMultiselect:{set:function(y){_(this),y?this.on("mousedown",a):this.off("mousedown",a)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("../../range").Range,v=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(s,a,d){var i=s.getLine(d);return this.foldingStartMarker.test(i)?"start":a=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(s,a,d){return null},this.indentationBlock=function(s,a,d){var i=/\S/,r=s.getLine(a),u=r.search(i);if(u!=-1){for(var l=d||r.length,p=s.getLength(),f=a,o=a;++a<p;){var h=s.getLine(a).search(i);if(h!=-1){if(h<=u){var _=s.getTokenAt(a,0);if(!_||_.type!=="string")break}o=a}}if(o>f){var m=s.getLine(o).length;return new c(f,l,o,m)}}},this.openingBracketBlock=function(s,a,d,i,r){var u={row:d,column:i+1},l=s.$findClosingBracket(a,u,r);if(l){var p=s.foldWidgets[l.row];return p==null&&(p=s.getFoldWidget(l.row)),p=="start"&&l.row>u.row&&(l.row--,l.column=s.getLine(l.row).length),c.fromPoints(u,l)}},this.closingBracketBlock=function(s,a,d,i,r){var u={row:d,column:i},l=s.$findOpeningBracket(a,u);if(l)return l.column++,u.column--,c.fromPoints(l,u)}}).call(v.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,n){"use strict";var c=e("../line_widgets").LineWidgets,v=e("../lib/dom"),s=e("../range").Range,a=e("../config").nls;function d(r,u,l){for(var p=0,f=r.length-1;p<=f;){var o=p+f>>1,h=l(u,r[o]);if(h>0)p=o+1;else if(h<0)f=o-1;else return o}return-(p+1)}function i(r,u,l){var p=r.getAnnotations().sort(s.comparePoints);if(p.length){var f=d(p,{row:u,column:-1},s.comparePoints);f<0&&(f=-f-1),f>=p.length?f=l>0?0:p.length-1:f===0&&l<0&&(f=p.length-1);var o=p[f];if(!(!o||!l)){if(o.row===u){do o=p[f+=l];while(o&&o.row===u);if(!o)return p.slice()}var h=[];u=o.row;do h[l<0?"unshift":"push"](o),o=p[f+=l];while(o&&o.row==u);return h.length&&h}}}t.showErrorMarker=function(r,u){var l=r.session;l.widgetManager||(l.widgetManager=new c(l),l.widgetManager.attach(r));var p=r.getCursorPosition(),f=p.row,o=l.widgetManager.getWidgetsAtRow(f).filter(function(b){return b.type=="errorMarker"})[0];o?o.destroy():f-=u;var h=i(l,f,u),_;if(h){var m=h[0];p.column=(m.pos&&typeof m.column!="number"?m.pos.sc:m.column)||0,p.row=m.row,_=r.renderer.$gutterLayer.$annotations[p.row]}else{if(o)return;_={text:[a("Looks good!")],className:"ace_ok"}}r.session.unfold(p.row),r.selection.moveToPosition(p);var y={row:p.row,fixedWidth:!0,coverGutter:!0,el:v.createElement("div"),type:"errorMarker"},C=y.el.appendChild(v.createElement("div")),E=y.el.appendChild(v.createElement("div"));E.className="error_widget_arrow "+_.className;var D=r.renderer.$cursorLayer.getPixelPosition(p).left;E.style.left=D+r.renderer.gutterWidth-5+"px",y.el.className="error_widget_wrapper",C.className="error_widget "+_.className,C.innerHTML=_.text.join("<br>"),C.appendChild(v.createElement("div"));var g=function(b,L,w){if(L===0&&(w==="esc"||w==="return"))return y.destroy(),{command:"null"}};y.destroy=function(){r.$mouseHandler.isMousePressed||(r.keyBinding.removeKeyboardHandler(g),l.widgetManager.removeLineWidget(y),r.off("changeSelection",y.destroy),r.off("changeSession",y.destroy),r.off("mouseup",y.destroy),r.off("change",y.destroy))},r.keyBinding.addKeyboardHandler(g),r.on("changeSelection",y.destroy),r.on("changeSession",y.destroy),r.on("mouseup",y.destroy),r.on("change",y.destroy),r.session.widgetManager.addLineWidget(y),y.el.onmousedown=r.focus.bind(r),r.renderer.scrollCursorIntoView(null,.5,{bottom:y.el.offsetHeight})},v.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var c=e("./lib/dom"),v=e("./range").Range,s=e("./editor").Editor,a=e("./edit_session").EditSession,d=e("./undomanager").UndoManager,i=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(r,u){if(typeof r=="string"){var l=r;if(r=document.getElementById(l),!r)throw new Error("ace.edit can't find div #"+l)}if(r&&r.env&&r.env.editor instanceof s)return r.env.editor;var p="";if(r&&/input|textarea/i.test(r.tagName)){var f=r;p=f.value,r=c.createElement("pre"),f.parentNode.replaceChild(r,f)}else r&&(p=r.textContent,r.innerHTML="");var o=t.createEditSession(p),h=new s(new i(r),o,u),_={document:o,editor:h,onResize:h.resize.bind(h,null)};return f&&(_.textarea=f),h.on("destroy",function(){_.editor.container.env=null}),h.container.env=h.env=_,h},t.createEditSession=function(r,u){var l=new a(r,u);return l.setUndoManager(new d),l},t.Range=v,t.Editor=s,t.EditSession=a,t.UndoManager=d,t.VirtualRenderer=i,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var n in e)e.hasOwnProperty(n)&&(t.ace[n]=e[n]);t.ace.default=t.ace,typeof Bh=="object"&&typeof DF=="object"&&Bh&&(Bh.exports=t.ace)})})()});var Ex=_t(Sx=>{"use strict";Sx.supports=function(...t){let n=t.reduce((c,v)=>Object.assign(c,v),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}});var Bo=_t((c_e,Tx)=>{"use strict";Tx.exports=class extends Error{constructor(t,n){super(t||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var Fx=_t(n_=>{"use strict";n_.byteLength=U4;n_.toByteArray=z4;n_.fromByteArray=J4;var ga=[],Co=[],W4=typeof Uint8Array<"u"?Uint8Array:Array,b0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ds=0,Mx=b0.length;Ds<Mx;++Ds)ga[Ds]=b0[Ds],Co[b0.charCodeAt(Ds)]=Ds;var Ds,Mx;Co["-".charCodeAt(0)]=62;Co["_".charCodeAt(0)]=63;function Lx(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var c=n===t?0:4-n%4;return[n,c]}function U4(e){var t=Lx(e),n=t[0],c=t[1];return(n+c)*3/4-c}function q4(e,t,n){return(t+n)*3/4-n}function z4(e){var t,n=Lx(e),c=n[0],v=n[1],s=new W4(q4(e,c,v)),a=0,d=v>0?c-4:c,i;for(i=0;i<d;i+=4)t=Co[e.charCodeAt(i)]<<18|Co[e.charCodeAt(i+1)]<<12|Co[e.charCodeAt(i+2)]<<6|Co[e.charCodeAt(i+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=t&255;return v===2&&(t=Co[e.charCodeAt(i)]<<2|Co[e.charCodeAt(i+1)]>>4,s[a++]=t&255),v===1&&(t=Co[e.charCodeAt(i)]<<10|Co[e.charCodeAt(i+1)]<<4|Co[e.charCodeAt(i+2)]>>2,s[a++]=t>>8&255,s[a++]=t&255),s}function V4(e){return ga[e>>18&63]+ga[e>>12&63]+ga[e>>6&63]+ga[e&63]}function G4(e,t,n){for(var c,v=[],s=t;s<n;s+=3)c=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),v.push(V4(c));return v.join("")}function J4(e){for(var t,n=e.length,c=n%3,v=[],s=16383,a=0,d=n-c;a<d;a+=s)v.push(G4(e,a,a+s>d?d:a+s));return c===1?(t=e[n-1],v.push(ga[t>>2]+ga[t<<4&63]+"==")):c===2&&(t=(e[n-2]<<8)+e[n-1],v.push(ga[t>>10]+ga[t>>4&63]+ga[t<<2&63]+"=")),v.join("")}});var xx=_t(w0=>{w0.read=function(e,t,n,c,v){var s,a,d=v*8-c-1,i=(1<<d)-1,r=i>>1,u=-7,l=n?v-1:0,p=n?-1:1,f=e[t+l];for(l+=p,s=f&(1<<-u)-1,f>>=-u,u+=d;u>0;s=s*256+e[t+l],l+=p,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=c;u>0;a=a*256+e[t+l],l+=p,u-=8);if(s===0)s=1-r;else{if(s===i)return a?NaN:(f?-1:1)*(1/0);a=a+Math.pow(2,c),s=s-r}return(f?-1:1)*a*Math.pow(2,s-c)};w0.write=function(e,t,n,c,v,s){var a,d,i,r=s*8-v-1,u=(1<<r)-1,l=u>>1,p=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=c?0:s-1,o=c?1:-1,h=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(d=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-a))<1&&(a--,i*=2),a+l>=1?t+=p/i:t+=p*Math.pow(2,1-l),t*i>=2&&(a++,i/=2),a+l>=u?(d=0,a=u):a+l>=1?(d=(t*i-1)*Math.pow(2,v),a=a+l):(d=t*Math.pow(2,l-1)*Math.pow(2,v),a=0));v>=8;e[n+f]=d&255,f+=o,d/=256,v-=8);for(a=a<<v|d,r+=v;r>0;e[n+f]=a&255,f+=o,a/=256,r-=8);e[n+f-o]|=h*128}});var a_=_t(Kc=>{"use strict";var S0=Fx(),Jc=xx(),Ax=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Kc.Buffer=te;Kc.SlowBuffer=Z4;Kc.INSPECT_MAX_BYTES=50;var r_=2147483647;Kc.kMaxLength=r_;te.TYPED_ARRAY_SUPPORT=j4();!te.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function j4(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(te.prototype,"parent",{enumerable:!0,get:function(){if(te.isBuffer(this))return this.buffer}});Object.defineProperty(te.prototype,"offset",{enumerable:!0,get:function(){if(te.isBuffer(this))return this.byteOffset}});function ti(e){if(e>r_)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,te.prototype),t}function te(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return L0(e)}return kx(e,t,n)}te.poolSize=8192;function kx(e,t,n){if(typeof e=="string")return Q4(e,t);if(ArrayBuffer.isView(e))return X4(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ya(e,ArrayBuffer)||e&&ya(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ya(e,SharedArrayBuffer)||e&&ya(e.buffer,SharedArrayBuffer)))return T0(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let c=e.valueOf&&e.valueOf();if(c!=null&&c!==e)return te.from(c,t,n);let v=Y4(e);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return te.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}te.from=function(e,t,n){return kx(e,t,n)};Object.setPrototypeOf(te.prototype,Uint8Array.prototype);Object.setPrototypeOf(te,Uint8Array);function Ox(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function K4(e,t,n){return Ox(e),e<=0?ti(e):t!==void 0?typeof n=="string"?ti(e).fill(t,n):ti(e).fill(t):ti(e)}te.alloc=function(e,t,n){return K4(e,t,n)};function L0(e){return Ox(e),ti(e<0?0:F0(e)|0)}te.allocUnsafe=function(e){return L0(e)};te.allocUnsafeSlow=function(e){return L0(e)};function Q4(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!te.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=Hx(e,t)|0,c=ti(n),v=c.write(e,t);return v!==n&&(c=c.slice(0,v)),c}function E0(e){let t=e.length<0?0:F0(e.length)|0,n=ti(t);for(let c=0;c<t;c+=1)n[c]=e[c]&255;return n}function X4(e){if(ya(e,Uint8Array)){let t=new Uint8Array(e);return T0(t.buffer,t.byteOffset,t.byteLength)}return E0(e)}function T0(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let c;return t===void 0&&n===void 0?c=new Uint8Array(e):n===void 0?c=new Uint8Array(e,t):c=new Uint8Array(e,t,n),Object.setPrototypeOf(c,te.prototype),c}function Y4(e){if(te.isBuffer(e)){let t=F0(e.length)|0,n=ti(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||A0(e.length)?ti(0):E0(e);if(e.type==="Buffer"&&Array.isArray(e.data))return E0(e.data)}function F0(e){if(e>=r_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r_.toString(16)+" bytes");return e|0}function Z4(e){return+e!=e&&(e=0),te.alloc(+e)}te.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==te.prototype};te.compare=function(t,n){if(ya(t,Uint8Array)&&(t=te.from(t,t.offset,t.byteLength)),ya(n,Uint8Array)&&(n=te.from(n,n.offset,n.byteLength)),!te.isBuffer(t)||!te.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let c=t.length,v=n.length;for(let s=0,a=Math.min(c,v);s<a;++s)if(t[s]!==n[s]){c=t[s],v=n[s];break}return c<v?-1:v<c?1:0};te.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};te.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return te.alloc(0);let c;if(n===void 0)for(n=0,c=0;c<t.length;++c)n+=t[c].length;let v=te.allocUnsafe(n),s=0;for(c=0;c<t.length;++c){let a=t[c];if(ya(a,Uint8Array))s+a.length>v.length?(te.isBuffer(a)||(a=te.from(a)),a.copy(v,s)):Uint8Array.prototype.set.call(v,a,s);else if(te.isBuffer(a))a.copy(v,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return v};function Hx(e,t){if(te.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ya(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&n===0)return 0;let v=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return M0(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return Gx(e).length;default:if(v)return c?-1:M0(e).length;t=(""+t).toLowerCase(),v=!0}}te.byteLength=Hx;function e6(e,t,n){let c=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return l6(this,t,n);case"utf8":case"utf-8":return Nx(this,t,n);case"ascii":return s6(this,t,n);case"latin1":case"binary":return c6(this,t,n);case"base64":return i6(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f6(this,t,n);default:if(c)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),c=!0}}te.prototype._isBuffer=!0;function Cs(e,t,n){let c=e[t];e[t]=e[n],e[n]=c}te.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)Cs(this,n,n+1);return this};te.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)Cs(this,n,n+3),Cs(this,n+1,n+2);return this};te.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)Cs(this,n,n+7),Cs(this,n+1,n+6),Cs(this,n+2,n+5),Cs(this,n+3,n+4);return this};te.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?Nx(this,0,t):e6.apply(this,arguments)};te.prototype.toLocaleString=te.prototype.toString;te.prototype.equals=function(t){if(!te.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:te.compare(this,t)===0};te.prototype.inspect=function(){let t="",n=Kc.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};Ax&&(te.prototype[Ax]=te.prototype.inspect);te.prototype.compare=function(t,n,c,v,s){if(ya(t,Uint8Array)&&(t=te.from(t,t.offset,t.byteLength)),!te.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),c===void 0&&(c=t?t.length:0),v===void 0&&(v=0),s===void 0&&(s=this.length),n<0||c>t.length||v<0||s>this.length)throw new RangeError("out of range index");if(v>=s&&n>=c)return 0;if(v>=s)return-1;if(n>=c)return 1;if(n>>>=0,c>>>=0,v>>>=0,s>>>=0,this===t)return 0;let a=s-v,d=c-n,i=Math.min(a,d),r=this.slice(v,s),u=t.slice(n,c);for(let l=0;l<i;++l)if(r[l]!==u[l]){a=r[l],d=u[l];break}return a<d?-1:d<a?1:0};function Px(e,t,n,c,v){if(e.length===0)return-1;if(typeof n=="string"?(c=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,A0(n)&&(n=v?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(v)return-1;n=e.length-1}else if(n<0)if(v)n=0;else return-1;if(typeof t=="string"&&(t=te.from(t,c)),te.isBuffer(t))return t.length===0?-1:Ix(e,t,n,c,v);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):Ix(e,[t],n,c,v);throw new TypeError("val must be string, number or Buffer")}function Ix(e,t,n,c,v){let s=1,a=e.length,d=t.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,a/=2,d/=2,n/=2}function i(u,l){return s===1?u[l]:u.readUInt16BE(l*s)}let r;if(v){let u=-1;for(r=n;r<a;r++)if(i(e,r)===i(t,u===-1?0:r-u)){if(u===-1&&(u=r),r-u+1===d)return u*s}else u!==-1&&(r-=r-u),u=-1}else for(n+d>a&&(n=a-d),r=n;r>=0;r--){let u=!0;for(let l=0;l<d;l++)if(i(e,r+l)!==i(t,l)){u=!1;break}if(u)return r}return-1}te.prototype.includes=function(t,n,c){return this.indexOf(t,n,c)!==-1};te.prototype.indexOf=function(t,n,c){return Px(this,t,n,c,!0)};te.prototype.lastIndexOf=function(t,n,c){return Px(this,t,n,c,!1)};function t6(e,t,n,c){n=Number(n)||0;let v=e.length-n;c?(c=Number(c),c>v&&(c=v)):c=v;let s=t.length;c>s/2&&(c=s/2);let a;for(a=0;a<c;++a){let d=parseInt(t.substr(a*2,2),16);if(A0(d))return a;e[n+a]=d}return a}function n6(e,t,n,c){return o_(M0(t,e.length-n),e,n,c)}function r6(e,t,n,c){return o_(_6(t),e,n,c)}function o6(e,t,n,c){return o_(Gx(t),e,n,c)}function a6(e,t,n,c){return o_(v6(t,e.length-n),e,n,c)}te.prototype.write=function(t,n,c,v){if(n===void 0)v="utf8",c=this.length,n=0;else if(c===void 0&&typeof n=="string")v=n,c=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(c)?(c=c>>>0,v===void 0&&(v="utf8")):(v=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-n;if((c===void 0||c>s)&&(c=s),t.length>0&&(c<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let a=!1;for(;;)switch(v){case"hex":return t6(this,t,n,c);case"utf8":case"utf-8":return n6(this,t,n,c);case"ascii":case"latin1":case"binary":return r6(this,t,n,c);case"base64":return o6(this,t,n,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a6(this,t,n,c);default:if(a)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),a=!0}};te.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function i6(e,t,n){return t===0&&n===e.length?S0.fromByteArray(e):S0.fromByteArray(e.slice(t,n))}function Nx(e,t,n){n=Math.min(e.length,n);let c=[],v=t;for(;v<n;){let s=e[v],a=null,d=s>239?4:s>223?3:s>191?2:1;if(v+d<=n){let i,r,u,l;switch(d){case 1:s<128&&(a=s);break;case 2:i=e[v+1],(i&192)===128&&(l=(s&31)<<6|i&63,l>127&&(a=l));break;case 3:i=e[v+1],r=e[v+2],(i&192)===128&&(r&192)===128&&(l=(s&15)<<12|(i&63)<<6|r&63,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:i=e[v+1],r=e[v+2],u=e[v+3],(i&192)===128&&(r&192)===128&&(u&192)===128&&(l=(s&15)<<18|(i&63)<<12|(r&63)<<6|u&63,l>65535&&l<1114112&&(a=l))}}a===null?(a=65533,d=1):a>65535&&(a-=65536,c.push(a>>>10&1023|55296),a=56320|a&1023),c.push(a),v+=d}return u6(c)}var Rx=4096;function u6(e){let t=e.length;if(t<=Rx)return String.fromCharCode.apply(String,e);let n="",c=0;for(;c<t;)n+=String.fromCharCode.apply(String,e.slice(c,c+=Rx));return n}function s6(e,t,n){let c="";n=Math.min(e.length,n);for(let v=t;v<n;++v)c+=String.fromCharCode(e[v]&127);return c}function c6(e,t,n){let c="";n=Math.min(e.length,n);for(let v=t;v<n;++v)c+=String.fromCharCode(e[v]);return c}function l6(e,t,n){let c=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>c)&&(n=c);let v="";for(let s=t;s<n;++s)v+=m6[e[s]];return v}function f6(e,t,n){let c=e.slice(t,n),v="";for(let s=0;s<c.length-1;s+=2)v+=String.fromCharCode(c[s]+c[s+1]*256);return v}te.prototype.slice=function(t,n){let c=this.length;t=~~t,n=n===void 0?c:~~n,t<0?(t+=c,t<0&&(t=0)):t>c&&(t=c),n<0?(n+=c,n<0&&(n=0)):n>c&&(n=c),n<t&&(n=t);let v=this.subarray(t,n);return Object.setPrototypeOf(v,te.prototype),v};function Vn(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}te.prototype.readUintLE=te.prototype.readUIntLE=function(t,n,c){t=t>>>0,n=n>>>0,c||Vn(t,n,this.length);let v=this[t],s=1,a=0;for(;++a<n&&(s*=256);)v+=this[t+a]*s;return v};te.prototype.readUintBE=te.prototype.readUIntBE=function(t,n,c){t=t>>>0,n=n>>>0,c||Vn(t,n,this.length);let v=this[t+--n],s=1;for(;n>0&&(s*=256);)v+=this[t+--n]*s;return v};te.prototype.readUint8=te.prototype.readUInt8=function(t,n){return t=t>>>0,n||Vn(t,1,this.length),this[t]};te.prototype.readUint16LE=te.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||Vn(t,2,this.length),this[t]|this[t+1]<<8};te.prototype.readUint16BE=te.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||Vn(t,2,this.length),this[t]<<8|this[t+1]};te.prototype.readUint32LE=te.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||Vn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};te.prototype.readUint32BE=te.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||Vn(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};te.prototype.readBigUInt64LE=gu(function(t){t=t>>>0,jc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Vf(t,this.length-8);let v=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,s=this[++t]+this[++t]*2**8+this[++t]*2**16+c*2**24;return BigInt(v)+(BigInt(s)<<BigInt(32))});te.prototype.readBigUInt64BE=gu(function(t){t=t>>>0,jc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Vf(t,this.length-8);let v=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],s=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+c;return(BigInt(v)<<BigInt(32))+BigInt(s)});te.prototype.readIntLE=function(t,n,c){t=t>>>0,n=n>>>0,c||Vn(t,n,this.length);let v=this[t],s=1,a=0;for(;++a<n&&(s*=256);)v+=this[t+a]*s;return s*=128,v>=s&&(v-=Math.pow(2,8*n)),v};te.prototype.readIntBE=function(t,n,c){t=t>>>0,n=n>>>0,c||Vn(t,n,this.length);let v=n,s=1,a=this[t+--v];for(;v>0&&(s*=256);)a+=this[t+--v]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*n)),a};te.prototype.readInt8=function(t,n){return t=t>>>0,n||Vn(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};te.prototype.readInt16LE=function(t,n){t=t>>>0,n||Vn(t,2,this.length);let c=this[t]|this[t+1]<<8;return c&32768?c|4294901760:c};te.prototype.readInt16BE=function(t,n){t=t>>>0,n||Vn(t,2,this.length);let c=this[t+1]|this[t]<<8;return c&32768?c|4294901760:c};te.prototype.readInt32LE=function(t,n){return t=t>>>0,n||Vn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};te.prototype.readInt32BE=function(t,n){return t=t>>>0,n||Vn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};te.prototype.readBigInt64LE=gu(function(t){t=t>>>0,jc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Vf(t,this.length-8);let v=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(c<<24);return(BigInt(v)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});te.prototype.readBigInt64BE=gu(function(t){t=t>>>0,jc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&Vf(t,this.length-8);let v=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(v)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+c)});te.prototype.readFloatLE=function(t,n){return t=t>>>0,n||Vn(t,4,this.length),Jc.read(this,t,!0,23,4)};te.prototype.readFloatBE=function(t,n){return t=t>>>0,n||Vn(t,4,this.length),Jc.read(this,t,!1,23,4)};te.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||Vn(t,8,this.length),Jc.read(this,t,!0,52,8)};te.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||Vn(t,8,this.length),Jc.read(this,t,!1,52,8)};function qr(e,t,n,c,v,s){if(!te.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>v||t<s)throw new RangeError('"value" argument is out of bounds');if(n+c>e.length)throw new RangeError("Index out of range")}te.prototype.writeUintLE=te.prototype.writeUIntLE=function(t,n,c,v){if(t=+t,n=n>>>0,c=c>>>0,!v){let d=Math.pow(2,8*c)-1;qr(this,t,n,c,d,0)}let s=1,a=0;for(this[n]=t&255;++a<c&&(s*=256);)this[n+a]=t/s&255;return n+c};te.prototype.writeUintBE=te.prototype.writeUIntBE=function(t,n,c,v){if(t=+t,n=n>>>0,c=c>>>0,!v){let d=Math.pow(2,8*c)-1;qr(this,t,n,c,d,0)}let s=c-1,a=1;for(this[n+s]=t&255;--s>=0&&(a*=256);)this[n+s]=t/a&255;return n+c};te.prototype.writeUint8=te.prototype.writeUInt8=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,1,255,0),this[n]=t&255,n+1};te.prototype.writeUint16LE=te.prototype.writeUInt16LE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};te.prototype.writeUint16BE=te.prototype.writeUInt16BE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};te.prototype.writeUint32LE=te.prototype.writeUInt32LE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};te.prototype.writeUint32BE=te.prototype.writeUInt32BE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function Bx(e,t,n,c,v){Vx(t,c,v,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s=s>>8,e[n++]=s,s=s>>8,e[n++]=s,s=s>>8,e[n++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,n}function Wx(e,t,n,c,v){Vx(t,c,v,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s=s>>8,e[n+6]=s,s=s>>8,e[n+5]=s,s=s>>8,e[n+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a=a>>8,e[n+2]=a,a=a>>8,e[n+1]=a,a=a>>8,e[n]=a,n+8}te.prototype.writeBigUInt64LE=gu(function(t,n=0){return Bx(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});te.prototype.writeBigUInt64BE=gu(function(t,n=0){return Wx(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});te.prototype.writeIntLE=function(t,n,c,v){if(t=+t,n=n>>>0,!v){let i=Math.pow(2,8*c-1);qr(this,t,n,c,i-1,-i)}let s=0,a=1,d=0;for(this[n]=t&255;++s<c&&(a*=256);)t<0&&d===0&&this[n+s-1]!==0&&(d=1),this[n+s]=(t/a>>0)-d&255;return n+c};te.prototype.writeIntBE=function(t,n,c,v){if(t=+t,n=n>>>0,!v){let i=Math.pow(2,8*c-1);qr(this,t,n,c,i-1,-i)}let s=c-1,a=1,d=0;for(this[n+s]=t&255;--s>=0&&(a*=256);)t<0&&d===0&&this[n+s+1]!==0&&(d=1),this[n+s]=(t/a>>0)-d&255;return n+c};te.prototype.writeInt8=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};te.prototype.writeInt16LE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};te.prototype.writeInt16BE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};te.prototype.writeInt32LE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};te.prototype.writeInt32BE=function(t,n,c){return t=+t,n=n>>>0,c||qr(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};te.prototype.writeBigInt64LE=gu(function(t,n=0){return Bx(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});te.prototype.writeBigInt64BE=gu(function(t,n=0){return Wx(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ux(e,t,n,c,v,s){if(n+c>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function qx(e,t,n,c,v){return t=+t,n=n>>>0,v||Ux(e,t,n,4,34028234663852886e22,-34028234663852886e22),Jc.write(e,t,n,c,23,4),n+4}te.prototype.writeFloatLE=function(t,n,c){return qx(this,t,n,!0,c)};te.prototype.writeFloatBE=function(t,n,c){return qx(this,t,n,!1,c)};function zx(e,t,n,c,v){return t=+t,n=n>>>0,v||Ux(e,t,n,8,17976931348623157e292,-17976931348623157e292),Jc.write(e,t,n,c,52,8),n+8}te.prototype.writeDoubleLE=function(t,n,c){return zx(this,t,n,!0,c)};te.prototype.writeDoubleBE=function(t,n,c){return zx(this,t,n,!1,c)};te.prototype.copy=function(t,n,c,v){if(!te.isBuffer(t))throw new TypeError("argument should be a Buffer");if(c||(c=0),!v&&v!==0&&(v=this.length),n>=t.length&&(n=t.length),n||(n=0),v>0&&v<c&&(v=c),v===c||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),t.length-n<v-c&&(v=t.length-n+c);let s=v-c;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,c,v):Uint8Array.prototype.set.call(t,this.subarray(c,v),n),s};te.prototype.fill=function(t,n,c,v){if(typeof t=="string"){if(typeof n=="string"?(v=n,n=0,c=this.length):typeof c=="string"&&(v=c,c=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!te.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(t.length===1){let a=t.charCodeAt(0);(v==="utf8"&&a<128||v==="latin1")&&(t=a)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<c)throw new RangeError("Out of range index");if(c<=n)return this;n=n>>>0,c=c===void 0?this.length:c>>>0,t||(t=0);let s;if(typeof t=="number")for(s=n;s<c;++s)this[s]=t;else{let a=te.isBuffer(t)?t:te.from(t,v),d=a.length;if(d===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<c-n;++s)this[s+n]=a[s%d]}return this};var Gc={};function x0(e,t,n){Gc[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}x0("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);x0("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);x0("ERR_OUT_OF_RANGE",function(e,t,n){let c=`The value of "${e}" is out of range.`,v=n;return Number.isInteger(n)&&Math.abs(n)>2**32?v=$x(String(n)):typeof n=="bigint"&&(v=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(v=$x(v)),v+="n"),c+=` It must be ${t}. Received ${v}`,c},RangeError);function $x(e){let t="",n=e.length,c=e[0]==="-"?1:0;for(;n>=c+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function d6(e,t,n){jc(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&Vf(t,e.length-(n+1))}function Vx(e,t,n,c,v,s){if(e>n||e<t){let a=typeof t=="bigint"?"n":"",d;throw s>3?t===0||t===BigInt(0)?d=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:d=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:d=`>= ${t}${a} and <= ${n}${a}`,new Gc.ERR_OUT_OF_RANGE("value",d,e)}d6(c,v,s)}function jc(e,t){if(typeof e!="number")throw new Gc.ERR_INVALID_ARG_TYPE(t,"number",e)}function Vf(e,t,n){throw Math.floor(e)!==e?(jc(e,n),new Gc.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new Gc.ERR_BUFFER_OUT_OF_BOUNDS:new Gc.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var p6=/[^+/0-9A-Za-z-_]/g;function h6(e){if(e=e.split("=")[0],e=e.trim().replace(p6,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function M0(e,t){t=t||1/0;let n,c=e.length,v=null,s=[];for(let a=0;a<c;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!v){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(a+1===c){(t-=3)>-1&&s.push(239,191,189);continue}v=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),v=n;continue}n=(v-55296<<10|n-56320)+65536}else v&&(t-=3)>-1&&s.push(239,191,189);if(v=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return s}function _6(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function v6(e,t){let n,c,v,s=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),c=n>>8,v=n%256,s.push(v),s.push(c);return s}function Gx(e){return S0.toByteArray(h6(e))}function o_(e,t,n,c){let v;for(v=0;v<c&&!(v+n>=t.length||v>=e.length);++v)t[v+n]=e[v];return v}function ya(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function A0(e){return e!==e}var m6=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let c=n*16;for(let v=0;v<16;++v)t[c+v]=e[n]+e[v]}return t}();function gu(e){return typeof BigInt>"u"?g6:e}function g6(){throw new Error("BigInt not supported")}});var R0=_t((h_e,Jx)=>{"use strict";var I0=null;Jx.exports=function(){return I0===null&&(I0={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),I0}});var O0=_t(jx=>{"use strict";var $0=Bo(),y6=new Set(["buffer","view","utf8"]),k0=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!y6.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new $0(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new $0(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new $0(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};jx.Encoding=k0});var B0=_t(i_=>{"use strict";var{Buffer:P0}=a_()||{},{Encoding:N0}=O0(),D6=R0(),Gf=class extends N0{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new Jf({encode:this.encode,decode:t=>this.decode(P0.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Jf=class extends N0{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new Gf({encode:t=>{let n=this.encode(t);return P0.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},H0=class extends N0{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new Gf({encode:t=>P0.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:t,textDecoder:n}=D6();return new Jf({encode:c=>t.encode(this.encode(c)),decode:c=>this.decode(n.decode(c)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};i_.BufferFormat=Gf;i_.ViewFormat=Jf;i_.UTF8Format=H0});var Yx=_t(bs=>{"use strict";var{Buffer:dr}=a_()||{Buffer:{isBuffer:()=>!1}},{textEncoder:Qx,textDecoder:Kx}=R0()(),{BufferFormat:jf,ViewFormat:W0,UTF8Format:Xx}=B0(),u_=e=>e;bs.utf8=new Xx({encode:function(e){return dr.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?Kx.decode(e):String(e)},decode:u_,name:"utf8",createViewTranscoder(){return new W0({encode:function(e){return ArrayBuffer.isView(e)?e:Qx.encode(e)},decode:function(e){return Kx.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new jf({encode:function(e){return dr.isBuffer(e)?e:ArrayBuffer.isView(e)?dr.from(e.buffer,e.byteOffset,e.byteLength):dr.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});bs.json=new Xx({encode:JSON.stringify,decode:JSON.parse,name:"json"});bs.buffer=new jf({encode:function(e){return dr.isBuffer(e)?e:ArrayBuffer.isView(e)?dr.from(e.buffer,e.byteOffset,e.byteLength):dr.from(String(e),"utf8")},decode:u_,name:"buffer",createViewTranscoder(){return new W0({encode:function(e){return ArrayBuffer.isView(e)?e:dr.from(String(e),"utf8")},decode:function(e){return dr.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});bs.view=new W0({encode:function(e){return ArrayBuffer.isView(e)?e:Qx.encode(e)},decode:u_,name:"view",createBufferTranscoder(){return new jf({encode:function(e){return dr.isBuffer(e)?e:ArrayBuffer.isView(e)?dr.from(e.buffer,e.byteOffset,e.byteLength):dr.from(String(e),"utf8")},decode:u_,name:`${this.name}+buffer`})}});bs.hex=new jf({encode:function(e){return dr.isBuffer(e)?e:dr.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});bs.base64=new jf({encode:function(e){return dr.isBuffer(e)?e:dr.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})});var tA=_t(eA=>{"use strict";var Zx=Bo(),c_=Yx(),{Encoding:C6}=O0(),{BufferFormat:b6,ViewFormat:w6,UTF8Format:S6}=B0(),Kf=Symbol("formats"),s_=Symbol("encodings"),E6=new Set(["buffer","view","utf8"]),U0=class{constructor(t){if(Array.isArray(t)){if(!t.every(n=>E6.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[s_]=new Map,this[Kf]=new Set(t);for(let n in c_)try{this.encoding(n)}catch(c){if(c.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw c}}encodings(){return Array.from(new Set(this[s_].values()))}encoding(t){let n=this[s_].get(t);if(n===void 0){if(typeof t=="string"&&t!==""){if(n=F6[t],!n)throw new Zx(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");n=T6(t)}let{name:c,format:v}=n;if(!this[Kf].has(v))if(this[Kf].has("view"))n=n.createViewTranscoder();else if(this[Kf].has("buffer"))n=n.createBufferTranscoder();else if(this[Kf].has("utf8"))n=n.createUTF8Transcoder();else throw new Zx(`Encoding '${c}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let s of[t,c,n.name,n.commonName])this[s_].set(s,n)}return n}};eA.Transcoder=U0;function T6(e){if(e instanceof C6)return e;let t="type"in e&&typeof e.type=="string"?e.type:void 0,n=e.name||t||`anonymous-${x6++}`;switch(M6(e)){case"view":return new w6({...e,name:n});case"utf8":return new S6({...e,name:n});case"buffer":return new b6({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function M6(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}var L6={binary:c_.buffer,"utf-8":c_.utf8},F6={...c_,...L6},x6=0});var dA=_t((y_e,q0)=>{"use strict";var Qc=typeof Reflect=="object"?Reflect:null,nA=Qc&&typeof Qc.apply=="function"?Qc.apply:function(t,n,c){return Function.prototype.apply.call(t,n,c)},l_;Qc&&typeof Qc.ownKeys=="function"?l_=Qc.ownKeys:Object.getOwnPropertySymbols?l_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:l_=function(t){return Object.getOwnPropertyNames(t)};function A6(e){console&&console.warn&&console.warn(e)}var oA=Number.isNaN||function(t){return t!==t};function Vt(){Vt.init.call(this)}q0.exports=Vt;q0.exports.once=k6;Vt.EventEmitter=Vt;Vt.prototype._events=void 0;Vt.prototype._eventsCount=0;Vt.prototype._maxListeners=void 0;var rA=10;function f_(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Vt,"defaultMaxListeners",{enumerable:!0,get:function(){return rA},set:function(e){if(typeof e!="number"||e<0||oA(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");rA=e}});Vt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Vt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||oA(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function aA(e){return e._maxListeners===void 0?Vt.defaultMaxListeners:e._maxListeners}Vt.prototype.getMaxListeners=function(){return aA(this)};Vt.prototype.emit=function(t){for(var n=[],c=1;c<arguments.length;c++)n.push(arguments[c]);var v=t==="error",s=this._events;if(s!==void 0)v=v&&s.error===void 0;else if(!v)return!1;if(v){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var d=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw d.context=a,d}var i=s[t];if(i===void 0)return!1;if(typeof i=="function")nA(i,this,n);else for(var r=i.length,u=lA(i,r),c=0;c<r;++c)nA(u[c],this,n);return!0};function iA(e,t,n,c){var v,s,a;if(f_(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),a===void 0)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=c?[n,a]:[a,n]:c?a.unshift(n):a.push(n),v=aA(e),v>0&&a.length>v&&!a.warned){a.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=a.length,A6(d)}return e}Vt.prototype.addListener=function(t,n){return iA(this,t,n,!1)};Vt.prototype.on=Vt.prototype.addListener;Vt.prototype.prependListener=function(t,n){return iA(this,t,n,!0)};function I6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function uA(e,t,n){var c={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},v=I6.bind(c);return v.listener=n,c.wrapFn=v,v}Vt.prototype.once=function(t,n){return f_(n),this.on(t,uA(this,t,n)),this};Vt.prototype.prependOnceListener=function(t,n){return f_(n),this.prependListener(t,uA(this,t,n)),this};Vt.prototype.removeListener=function(t,n){var c,v,s,a,d;if(f_(n),v=this._events,v===void 0)return this;if(c=v[t],c===void 0)return this;if(c===n||c.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete v[t],v.removeListener&&this.emit("removeListener",t,c.listener||n));else if(typeof c!="function"){for(s=-1,a=c.length-1;a>=0;a--)if(c[a]===n||c[a].listener===n){d=c[a].listener,s=a;break}if(s<0)return this;s===0?c.shift():R6(c,s),c.length===1&&(v[t]=c[0]),v.removeListener!==void 0&&this.emit("removeListener",t,d||n)}return this};Vt.prototype.off=Vt.prototype.removeListener;Vt.prototype.removeAllListeners=function(t){var n,c,v;if(c=this._events,c===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete c[t]),this;if(arguments.length===0){var s=Object.keys(c),a;for(v=0;v<s.length;++v)a=s[v],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=c[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(v=n.length-1;v>=0;v--)this.removeListener(t,n[v]);return this};function sA(e,t,n){var c=e._events;if(c===void 0)return[];var v=c[t];return v===void 0?[]:typeof v=="function"?n?[v.listener||v]:[v]:n?$6(v):lA(v,v.length)}Vt.prototype.listeners=function(t){return sA(this,t,!0)};Vt.prototype.rawListeners=function(t){return sA(this,t,!1)};Vt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):cA.call(e,t)};Vt.prototype.listenerCount=cA;function cA(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Vt.prototype.eventNames=function(){return this._eventsCount>0?l_(this._events):[]};function lA(e,t){for(var n=new Array(t),c=0;c<t;++c)n[c]=e[c];return n}function R6(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function $6(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function k6(e,t){return new Promise(function(n,c){function v(a){e.removeListener(t,s),c(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",v),n([].slice.call(arguments))}fA(e,t,s,{once:!0}),t!=="error"&&O6(e,v,{once:!0})})}function O6(e,t,n){typeof e.on=="function"&&fA(e,"error",t,n)}function fA(e,t,n,c){if(typeof e.on=="function")c.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function v(s){c.once&&e.removeEventListener(t,v),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var hA=_t((D_e,pA)=>{pA.exports=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)});var Qf=_t(z0=>{"use strict";var _A=hA();z0.fromCallback=function(e,t){if(e===void 0){var n=new Promise(function(c,v){e=function(s,a){s?v(s):c(a)}});e[t!==void 0?t:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};z0.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(n){_A(()=>t(null,n))}).catch(function(n){_A(()=>t(n))})}});var d_=_t(V0=>{"use strict";V0.getCallback=function(e,t){return typeof e=="function"?e:t};V0.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}}});var Su=_t(v_=>{"use strict";var{fromCallback:G0}=Qf(),io=Bo(),{getOptions:J0,getCallback:vA}=d_(),ws=Symbol("promise"),Xc=Symbol("callback"),Da=Symbol("working"),Ss=Symbol("handleOne"),ni=Symbol("handleMany"),j0=Symbol("autoClose"),bu=Symbol("finishWork"),Ca=Symbol("returnMany"),yu=Symbol("closing"),Xf=Symbol("handleClose"),p_=Symbol("closed"),Yf=Symbol("closeCallbacks"),Cu=Symbol("keyEncoding"),Es=Symbol("valueEncoding"),K0=Symbol("abortOnClose"),h_=Symbol("legacy"),Q0=Symbol("keys"),X0=Symbol("values"),Du=Symbol("limit"),bo=Symbol("count"),__=Object.freeze({}),H6=()=>{},mA=!1,Zf=class{constructor(t,n,c){if(typeof t!="object"||t===null){let v=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${v}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[p_]=!1,this[Yf]=[],this[Da]=!1,this[yu]=!1,this[j0]=!1,this[Xc]=null,this[Ss]=this[Ss].bind(this),this[ni]=this[ni].bind(this),this[Xf]=this[Xf].bind(this),this[Cu]=n[Cu],this[Es]=n[Es],this[h_]=c,this[Du]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[bo]=0,this[K0]=!!n.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[bo]}get limit(){return this[Du]}next(t){let n;if(t===void 0)n=new Promise((c,v)=>{t=(s,a,d)=>{s?v(s):this[h_]?a===void 0&&d===void 0?c():c([a,d]):c(a)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[yu]?this.nextTick(t,new io("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Da]?this.nextTick(t,new io("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Da]=!0,this[Xc]=t,this[bo]>=this[Du]?this.nextTick(this[Ss],null):this._next(this[Ss])),n}_next(t){this.nextTick(t)}nextv(t,n,c){return c=vA(n,c),c=G0(c,ws),n=J0(n,__),Number.isInteger(t)?(this[yu]?this.nextTick(c,new io("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Da]?this.nextTick(c,new io("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[Du]<1/0&&(t=Math.min(t,this[Du]-this[bo])),this[Da]=!0,this[Xc]=c,t<=0?this.nextTick(this[ni],null,[]):this._nextv(t,n,this[ni])),c[ws]):(this.nextTick(c,new TypeError("The first argument 'size' must be an integer")),c[ws])}_nextv(t,n,c){let v=[],s=(a,d,i)=>{if(a)return c(a);if(this[h_]?d===void 0&&i===void 0:d===void 0)return c(null,v);v.push(this[h_]?[d,i]:d),v.length===t?c(null,v):this._next(s)};this._next(s)}all(t,n){return n=vA(t,n),n=G0(n,ws),t=J0(t,__),this[yu]?this.nextTick(n,new io("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Da]?this.nextTick(n,new io("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Da]=!0,this[Xc]=n,this[j0]=!0,this[bo]>=this[Du]?this.nextTick(this[ni],null,[]):this._all(t,this[ni])),n[ws]}_all(t,n){let c=this[bo],v=[],s=()=>{let d=this[Du]<1/0?Math.min(1e3,this[Du]-c):1e3;d<=0?this.nextTick(n,null,v):this._nextv(d,__,a)},a=(d,i)=>{d?n(d):i.length===0?n(null,v):(v.push.apply(v,i),c+=i.length,s())};s()}[bu](){let t=this[Xc];return this[K0]&&t===null?H6:(this[Da]=!1,this[Xc]=null,this[yu]&&this._close(this[Xf]),t)}[Ca](t,n,c){this[j0]?this.close(t.bind(null,n,c)):t(n,c)}seek(t,n){if(n=J0(n,__),!this[yu]){if(this[Da])throw new io("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let c=this.db.keyEncoding(n.keyEncoding||this[Cu]),v=c.format;n.keyEncoding!==v&&(n={...n,keyEncoding:v});let s=this.db.prefixKey(c.encode(t),v);this._seek(s,n)}}}_seek(t,n){throw new io("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=G0(t,ws),this[p_]?this.nextTick(t):this[yu]?this[Yf].push(t):(this[yu]=!0,this[Yf].push(t),this[Da]?this[K0]&&this[bu]()(new io("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Xf])),t[ws]}_close(t){this.nextTick(t)}[Xf](){this[p_]=!0,this.db.detachResource(this);let t=this[Yf];this[Yf]=[];for(let n of t)n()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[p_]||await this.close()}}},Yc=class extends Zf{constructor(t,n){super(t,n,!0),this[Q0]=n.keys!==!1,this[X0]=n.values!==!1}[Ss](t,n,c){let v=this[bu]();if(t)return v(t);try{n=this[Q0]&&n!==void 0?this[Cu].decode(n):void 0,c=this[X0]&&c!==void 0?this[Es].decode(c):void 0}catch(s){return v(new wu("entry",s))}n===void 0&&c===void 0||this[bo]++,v(null,n,c)}[ni](t,n){let c=this[bu]();if(t)return this[Ca](c,t);try{for(let v of n){let s=v[0],a=v[1];v[0]=this[Q0]&&s!==void 0?this[Cu].decode(s):void 0,v[1]=this[X0]&&a!==void 0?this[Es].decode(a):void 0}}catch(v){return this[Ca](c,new wu("entries",v))}this[bo]+=n.length,this[Ca](c,null,n)}end(t){return!mA&&typeof console<"u"&&(mA=!0,console.warn(new io("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},Y0=class extends Zf{constructor(t,n){super(t,n,!1)}[Ss](t,n){let c=this[bu]();if(t)return c(t);try{n=n!==void 0?this[Cu].decode(n):void 0}catch(v){return c(new wu("key",v))}n!==void 0&&this[bo]++,c(null,n)}[ni](t,n){let c=this[bu]();if(t)return this[Ca](c,t);try{for(let v=0;v<n.length;v++){let s=n[v];n[v]=s!==void 0?this[Cu].decode(s):void 0}}catch(v){return this[Ca](c,new wu("keys",v))}this[bo]+=n.length,this[Ca](c,null,n)}},Z0=class extends Zf{constructor(t,n){super(t,n,!1)}[Ss](t,n){let c=this[bu]();if(t)return c(t);try{n=n!==void 0?this[Es].decode(n):void 0}catch(v){return c(new wu("value",v))}n!==void 0&&this[bo]++,c(null,n)}[ni](t,n){let c=this[bu]();if(t)return this[Ca](c,t);try{for(let v=0;v<n.length;v++){let s=n[v];n[v]=s!==void 0?this[Es].decode(s):void 0}}catch(v){return this[Ca](c,new wu("values",v))}this[bo]+=n.length,this[Ca](c,null,n)}},wu=class extends io{constructor(t,n){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:n})}};for(let e of["_ended property","_nexting property","_end method"])Object.defineProperty(Yc.prototype,e.split(" ")[0],{get(){throw new io(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new io(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});Yc.keyEncoding=Cu;Yc.valueEncoding=Es;v_.AbstractIterator=Yc;v_.AbstractKeyIterator=Y0;v_.AbstractValueIterator=Z0});var gA=_t(eD=>{"use strict";var{AbstractKeyIterator:P6,AbstractValueIterator:N6}=Su(),Ts=Symbol("iterator"),ed=Symbol("callback"),Zc=Symbol("handleOne"),Ms=Symbol("handleMany"),td=class extends P6{constructor(t,n){super(t,n),this[Ts]=t.iterator({...n,keys:!0,values:!1}),this[Zc]=this[Zc].bind(this),this[Ms]=this[Ms].bind(this)}},m_=class extends N6{constructor(t,n){super(t,n),this[Ts]=t.iterator({...n,keys:!1,values:!0}),this[Zc]=this[Zc].bind(this),this[Ms]=this[Ms].bind(this)}};for(let e of[td,m_]){let t=e===td,n=t?c=>c[0]:c=>c[1];e.prototype._next=function(c){this[ed]=c,this[Ts].next(this[Zc])},e.prototype[Zc]=function(c,v,s){let a=this[ed];c?a(c):a(null,t?v:s)},e.prototype._nextv=function(c,v,s){this[ed]=s,this[Ts].nextv(c,v,this[Ms])},e.prototype._all=function(c,v){this[ed]=v,this[Ts].all(c,this[Ms])},e.prototype[Ms]=function(c,v){let s=this[ed];c?s(c):s(null,v.map(n))},e.prototype._seek=function(c,v){this[Ts].seek(c,v)},e.prototype._close=function(c){this[Ts].close(c)}}eD.DefaultKeyIterator=td;eD.DefaultValueIterator=m_});var yA=_t(w_=>{"use strict";var{AbstractIterator:B6,AbstractKeyIterator:W6,AbstractValueIterator:U6}=Su(),tD=Bo(),zr=Symbol("nut"),C_=Symbol("undefer"),b_=Symbol("factory"),g_=class extends B6{constructor(t,n){super(t,n),this[zr]=null,this[b_]=()=>t.iterator(n),this.db.defer(()=>this[C_]())}},y_=class extends W6{constructor(t,n){super(t,n),this[zr]=null,this[b_]=()=>t.keys(n),this.db.defer(()=>this[C_]())}},D_=class extends U6{constructor(t,n){super(t,n),this[zr]=null,this[b_]=()=>t.values(n),this.db.defer(()=>this[C_]())}};for(let e of[g_,y_,D_])e.prototype[C_]=function(){this.db.status==="open"&&(this[zr]=this[b_]())},e.prototype._next=function(t){this[zr]!==null?this[zr].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new tD("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,n,c){this[zr]!==null?this[zr].nextv(t,n,c):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,n,c)):this.nextTick(c,new tD("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,n){this[zr]!==null?this[zr].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(t,n)):this.nextTick(n,new tD("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,n){this[zr]!==null?this[zr]._seek(t,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,n))},e.prototype._close=function(t){this[zr]!==null?this[zr].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};w_.DeferredIterator=g_;w_.DeferredKeyIterator=y_;w_.DeferredValueIterator=D_});var rD=_t(CA=>{"use strict";var{fromCallback:DA}=Qf(),S_=Bo(),{getCallback:q6,getOptions:z6}=d_(),E_=Symbol("promise"),wo=Symbol("status"),el=Symbol("operations"),nd=Symbol("finishClose"),tl=Symbol("closeCallbacks"),nD=class{constructor(t){if(typeof t!="object"||t===null){let n=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[el]=[],this[tl]=[],this[wo]="open",this[nd]=this[nd].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[el].length}put(t,n,c){if(this[wo]!=="open")throw new S_("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let v=this.db._checkKey(t)||this.db._checkValue(n);if(v)throw v;let s=c&&c.sublevel!=null?c.sublevel:this.db,a=c,d=s.keyEncoding(c&&c.keyEncoding),i=s.valueEncoding(c&&c.valueEncoding),r=d.format;c={...c,keyEncoding:r,valueEncoding:i.format},s!==this.db&&(c.sublevel=null);let u=s.prefixKey(d.encode(t),r),l=i.encode(n);return this._put(u,l,c),this[el].push({...a,type:"put",key:t,value:n}),this}_put(t,n,c){}del(t,n){if(this[wo]!=="open")throw new S_("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let c=this.db._checkKey(t);if(c)throw c;let v=n&&n.sublevel!=null?n.sublevel:this.db,s=n,a=v.keyEncoding(n&&n.keyEncoding),d=a.format;return n={...n,keyEncoding:d},v!==this.db&&(n.sublevel=null),this._del(v.prefixKey(a.encode(t),d),n),this[el].push({...s,type:"del",key:t}),this}_del(t,n){}clear(){if(this[wo]!=="open")throw new S_("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[el]=[],this}_clear(){}write(t,n){return n=q6(t,n),n=DA(n,E_),t=z6(t),this[wo]!=="open"?this.nextTick(n,new S_("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[wo]="writing",this._write(t,c=>{this[wo]="closing",this[tl].push(()=>n(c)),c||this.db.emit("batch",this[el]),this._close(this[nd])})),n[E_]}_write(t,n){}close(t){return t=DA(t,E_),this[wo]==="closing"?this[tl].push(t):this[wo]==="closed"?this.nextTick(t):(this[tl].push(t),this[wo]!=="writing"&&(this[wo]="closing",this._close(this[nd]))),t[E_]}_close(t){this.nextTick(t)}[nd](){this[wo]="closed",this.db.detachResource(this);let t=this[tl];this[tl]=[];for(let n of t)n()}};CA.AbstractChainedBatch=nD});var wA=_t(bA=>{"use strict";var{AbstractChainedBatch:V6}=rD(),G6=Bo(),nl=Symbol("encoded"),oD=class extends V6{constructor(t){super(t),this[nl]=[]}_put(t,n,c){this[nl].push({...c,type:"put",key:t,value:n})}_del(t,n){this[nl].push({...n,type:"del",key:t})}_clear(){this[nl]=[]}_write(t,n){this.db.status==="opening"?this.db.defer(()=>this._write(t,n)):this.db.status==="open"?this[nl].length===0?this.nextTick(n):this.db._batch(this[nl],t,n):this.nextTick(n,new G6("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};bA.DefaultChainedBatch=oD});var TA=_t((L_e,EA)=>{"use strict";var SA=Bo(),J6=Object.prototype.hasOwnProperty,j6=new Set(["lt","lte","gt","gte"]);EA.exports=function(e,t){let n={};for(let c in e)if(J6.call(e,c)&&!(c==="keyEncoding"||c==="valueEncoding")){if(c==="start"||c==="end")throw new SA(`The legacy range option '${c}' has been removed`,{code:"LEVEL_LEGACY"});if(c==="encoding")throw new SA("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});j6.has(c)?n[c]=t.encode(e[c]):n[c]=e[c]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}});var aD=_t((F_e,LA)=>{var MA;LA.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(MA||(MA=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var AA=_t((x_e,xA)=>{"use strict";var FA=aD();xA.exports=function(e,...t){t.length===0?FA(e):FA(()=>e(...t))}});var IA=_t(T_=>{"use strict";var{AbstractIterator:K6,AbstractKeyIterator:Q6,AbstractValueIterator:X6}=Su(),rl=Symbol("unfix"),Wo=Symbol("iterator"),Ls=Symbol("handleOne"),Eu=Symbol("handleMany"),ri=Symbol("callback"),rd=class extends K6{constructor(t,n,c,v){super(t,n),this[Wo]=c,this[rl]=v,this[Ls]=this[Ls].bind(this),this[Eu]=this[Eu].bind(this),this[ri]=null}[Ls](t,n,c){let v=this[ri];if(t)return v(t);n!==void 0&&(n=this[rl](n)),v(t,n,c)}[Eu](t,n){let c=this[ri];if(t)return c(t);for(let v of n){let s=v[0];s!==void 0&&(v[0]=this[rl](s))}c(t,n)}},od=class extends Q6{constructor(t,n,c,v){super(t,n),this[Wo]=c,this[rl]=v,this[Ls]=this[Ls].bind(this),this[Eu]=this[Eu].bind(this),this[ri]=null}[Ls](t,n){let c=this[ri];if(t)return c(t);n!==void 0&&(n=this[rl](n)),c(t,n)}[Eu](t,n){let c=this[ri];if(t)return c(t);for(let v=0;v<n.length;v++){let s=n[v];s!==void 0&&(n[v]=this[rl](s))}c(t,n)}},ad=class extends X6{constructor(t,n,c){super(t,n),this[Wo]=c}};for(let e of[rd,od])e.prototype._next=function(t){this[ri]=t,this[Wo].next(this[Ls])},e.prototype._nextv=function(t,n,c){this[ri]=c,this[Wo].nextv(t,n,this[Eu])},e.prototype._all=function(t,n){this[ri]=n,this[Wo].all(t,this[Eu])};for(let e of[ad])e.prototype._next=function(t){this[Wo].next(t)},e.prototype._nextv=function(t,n,c){this[Wo].nextv(t,n,c)},e.prototype._all=function(t,n){this[Wo].all(t,n)};for(let e of[rd,od,ad])e.prototype._seek=function(t,n){this[Wo].seek(t,n)},e.prototype._close=function(t){this[Wo].close(t)};T_.AbstractSublevelIterator=rd;T_.AbstractSublevelKeyIterator=od;T_.AbstractSublevelValueIterator=ad});var OA=_t((I_e,kA)=>{"use strict";var iD=Bo(),{Buffer:cD}=a_()||{},{AbstractSublevelIterator:Y6,AbstractSublevelKeyIterator:Z6,AbstractSublevelValueIterator:eq}=IA(),oi=Symbol("prefix"),RA=Symbol("upperBound"),id=Symbol("prefixRange"),uo=Symbol("parent"),uD=Symbol("unfix"),$A=new TextEncoder,tq={separator:"!"};kA.exports=function({AbstractLevel:e}){class t extends e{static defaults(c){if(typeof c=="string")throw new iD("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(c&&c.open)throw new iD("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return c==null?tq:c.separator?c:{...c,separator:"!"}}constructor(c,v,s){let{separator:a,manifest:d,...i}=t.defaults(s);v=rq(v,a);let r=a.charCodeAt(0)+1,u=c[uo]||c;if(!$A.encode(v).every(f=>f>r&&f<127))throw new iD(`Prefix must use bytes > ${r} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(nq(u,d),i);let l=(c.prefix||"")+a+v+a,p=l.slice(0,-1)+String.fromCharCode(r);this[uo]=u,this[oi]=new M_(l),this[RA]=new M_(p),this[uD]=new lD,this.nextTick=u.nextTick}prefixKey(c,v){if(v==="utf8")return this[oi].utf8+c;if(c.byteLength===0)return this[oi][v];if(v==="view"){let s=this[oi].view,a=new Uint8Array(s.byteLength+c.byteLength);return a.set(s,0),a.set(c,s.byteLength),a}else{let s=this[oi].buffer;return cD.concat([s,c],s.byteLength+c.byteLength)}}[id](c,v){c.gte!==void 0?c.gte=this.prefixKey(c.gte,v):c.gt!==void 0?c.gt=this.prefixKey(c.gt,v):c.gte=this[oi][v],c.lte!==void 0?c.lte=this.prefixKey(c.lte,v):c.lt!==void 0?c.lt=this.prefixKey(c.lt,v):c.lte=this[RA][v]}get prefix(){return this[oi].utf8}get db(){return this[uo]}_open(c,v){this[uo].open({passive:!0},v)}_put(c,v,s,a){this[uo].put(c,v,s,a)}_get(c,v,s){this[uo].get(c,v,s)}_getMany(c,v,s){this[uo].getMany(c,v,s)}_del(c,v,s){this[uo].del(c,v,s)}_batch(c,v,s){this[uo].batch(c,v,s)}_clear(c,v){this[id](c,c.keyEncoding),this[uo].clear(c,v)}_iterator(c){this[id](c,c.keyEncoding);let v=this[uo].iterator(c),s=this[uD].get(this[oi].utf8.length,c.keyEncoding);return new Y6(this,c,v,s)}_keys(c){this[id](c,c.keyEncoding);let v=this[uo].keys(c),s=this[uD].get(this[oi].utf8.length,c.keyEncoding);return new Z6(this,c,v,s)}_values(c){this[id](c,c.keyEncoding);let v=this[uo].values(c);return new eq(this,c,v)}}return{AbstractSublevel:t}};var nq=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:sD(e,"utf8"),buffer:sD(e,"buffer"),view:sD(e,"view")}}},sD=function(e,t){return e.supports.encodings[t]?e.keyEncoding(t).name===t:!1},M_=class{constructor(t){this.utf8=t,this.view=$A.encode(t),this.buffer=cD?cD.from(this.view.buffer,0,this.view.byteLength):{}}},lD=class{constructor(){this.cache=new Map}get(t,n){let c=this.cache.get(n);return c===void 0&&(n==="view"?c=function(v,s){return s.subarray(v)}.bind(null,t):c=function(v,s){return s.slice(v)}.bind(null,t),this.cache.set(n,c)),c}},rq=function(e,t){let n=0,c=e.length;for(;n<c&&e[n]===t;)n++;for(;c>n&&e[c-1]===t;)c--;return e.slice(n,c)}});var _D=_t(hD=>{"use strict";var{supports:oq}=Ex(),{Transcoder:aq}=tA(),{EventEmitter:iq}=dA(),{fromCallback:Tu}=Qf(),Uo=Bo(),{AbstractIterator:Fs}=Su(),{DefaultKeyIterator:uq,DefaultValueIterator:sq}=gA(),{DeferredIterator:cq,DeferredKeyIterator:lq,DeferredValueIterator:fq}=yA(),{DefaultChainedBatch:HA}=wA(),{getCallback:xs,getOptions:Mu}=d_(),L_=TA(),dt=Symbol("promise"),ai=Symbol("landed"),As=Symbol("resources"),fD=Symbol("closeResources"),ud=Symbol("operations"),sd=Symbol("undefer"),F_=Symbol("deferOpen"),PA=Symbol("options"),Dt=Symbol("status"),Is=Symbol("defaultOptions"),ol=Symbol("transcoder"),x_=Symbol("keyEncoding"),dD=Symbol("valueEncoding"),dq=()=>{},cd=class extends iq{constructor(t,n){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");n=Mu(n);let{keyEncoding:c,valueEncoding:v,passive:s,...a}=n;this[As]=new Set,this[ud]=[],this[F_]=!0,this[PA]=a,this[Dt]="opening",this.supports=oq(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[ol]=new aq(pq(this)),this[x_]=this[ol].encoding(c||"utf8"),this[dD]=this[ol].encoding(v||"utf8");for(let d of this[ol].encodings())this.supports.encodings[d.commonName]||(this.supports.encodings[d.commonName]=!0);this[Is]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[x_].commonName,valueEncoding:this[dD].commonName}),key:Object.freeze({keyEncoding:this[x_].commonName})},this.nextTick(()=>{this[F_]&&this.open({passive:!1},dq)})}get status(){return this[Dt]}keyEncoding(t){return this[ol].encoding(t??this[x_])}valueEncoding(t){return this[ol].encoding(t??this[dD])}open(t,n){n=xs(t,n),n=Tu(n,dt),t={...this[PA],...Mu(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;let c=v=>{this[Dt]==="closing"||this[Dt]==="opening"?this.once(ai,v?()=>c(v):c):this[Dt]!=="open"?n(new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:v})):n()};return t.passive?this[Dt]==="opening"?this.once(ai,c):this.nextTick(c):this[Dt]==="closed"||this[F_]?(this[F_]=!1,this[Dt]="opening",this.emit("opening"),this._open(t,v=>{if(v){this[Dt]="closed",this[fD](()=>{this.emit(ai),c(v)}),this[sd]();return}this[Dt]="open",this[sd](),this.emit(ai),this[Dt]==="open"&&this.emit("open"),this[Dt]==="open"&&this.emit("ready"),c()})):this[Dt]==="open"?this.nextTick(c):this.once(ai,()=>this.open(t,n)),n[dt]}_open(t,n){this.nextTick(n)}close(t){t=Tu(t,dt);let n=c=>{this[Dt]==="opening"||this[Dt]==="closing"?this.once(ai,c?n(c):n):this[Dt]!=="closed"?t(new Uo("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:c})):t()};if(this[Dt]==="open"){this[Dt]="closing",this.emit("closing");let c=v=>{this[Dt]="open",this[sd](),this.emit(ai),n(v)};this[fD](()=>{this._close(v=>{if(v)return c(v);this[Dt]="closed",this[sd](),this.emit(ai),this[Dt]==="closed"&&this.emit("closed"),n()})})}else this[Dt]==="closed"?this.nextTick(n):this.once(ai,()=>this.close(t));return t[dt]}[fD](t){if(this[As].size===0)return this.nextTick(t);let n=this[As].size,c=!0,v=()=>{--n===0&&(c?this.nextTick(t):t())};for(let s of this[As])s.close(v);c=!1,this[As].clear()}_close(t){this.nextTick(t)}get(t,n,c){if(c=xs(n,c),c=Tu(c,dt),n=Mu(n,this[Is].entry),this[Dt]==="opening")return this.defer(()=>this.get(t,n,c)),c[dt];if(al(this,c))return c[dt];let v=this._checkKey(t);if(v)return this.nextTick(c,v),c[dt];let s=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),d=s.format,i=a.format;return(n.keyEncoding!==d||n.valueEncoding!==i)&&(n=Object.assign({},n,{keyEncoding:d,valueEncoding:i})),this._get(this.prefixKey(s.encode(t),d),n,(r,u)=>{if(r)return(r.code==="LEVEL_NOT_FOUND"||r.notFound||/NotFound/i.test(r))&&(r.code||(r.code="LEVEL_NOT_FOUND"),r.notFound||(r.notFound=!0),r.status||(r.status=404)),c(r);try{u=a.decode(u)}catch(l){return c(new Uo("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:l}))}c(null,u)}),c[dt]}_get(t,n,c){this.nextTick(c,new Error("NotFound"))}getMany(t,n,c){if(c=xs(n,c),c=Tu(c,dt),n=Mu(n,this[Is].entry),this[Dt]==="opening")return this.defer(()=>this.getMany(t,n,c)),c[dt];if(al(this,c))return c[dt];if(!Array.isArray(t))return this.nextTick(c,new TypeError("The first argument 'keys' must be an array")),c[dt];if(t.length===0)return this.nextTick(c,null,[]),c[dt];let v=this.keyEncoding(n.keyEncoding),s=this.valueEncoding(n.valueEncoding),a=v.format,d=s.format;(n.keyEncoding!==a||n.valueEncoding!==d)&&(n=Object.assign({},n,{keyEncoding:a,valueEncoding:d}));let i=new Array(t.length);for(let r=0;r<t.length;r++){let u=t[r],l=this._checkKey(u);if(l)return this.nextTick(c,l),c[dt];i[r]=this.prefixKey(v.encode(u),a)}return this._getMany(i,n,(r,u)=>{if(r)return c(r);try{for(let l=0;l<u.length;l++)u[l]!==void 0&&(u[l]=s.decode(u[l]))}catch(l){return c(new Uo(`Could not decode one or more of ${u.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:l}))}c(null,u)}),c[dt]}_getMany(t,n,c){this.nextTick(c,null,new Array(t.length).fill(void 0))}put(t,n,c,v){if(v=xs(c,v),v=Tu(v,dt),c=Mu(c,this[Is].entry),this[Dt]==="opening")return this.defer(()=>this.put(t,n,c,v)),v[dt];if(al(this,v))return v[dt];let s=this._checkKey(t)||this._checkValue(n);if(s)return this.nextTick(v,s),v[dt];let a=this.keyEncoding(c.keyEncoding),d=this.valueEncoding(c.valueEncoding),i=a.format,r=d.format;(c.keyEncoding!==i||c.valueEncoding!==r)&&(c=Object.assign({},c,{keyEncoding:i,valueEncoding:r}));let u=this.prefixKey(a.encode(t),i),l=d.encode(n);return this._put(u,l,c,p=>{if(p)return v(p);this.emit("put",t,n),v()}),v[dt]}_put(t,n,c,v){this.nextTick(v)}del(t,n,c){if(c=xs(n,c),c=Tu(c,dt),n=Mu(n,this[Is].key),this[Dt]==="opening")return this.defer(()=>this.del(t,n,c)),c[dt];if(al(this,c))return c[dt];let v=this._checkKey(t);if(v)return this.nextTick(c,v),c[dt];let s=this.keyEncoding(n.keyEncoding),a=s.format;return n.keyEncoding!==a&&(n=Object.assign({},n,{keyEncoding:a})),this._del(this.prefixKey(s.encode(t),a),n,d=>{if(d)return c(d);this.emit("del",t),c()}),c[dt]}_del(t,n,c){this.nextTick(c)}batch(t,n,c){if(!arguments.length){if(this[Dt]==="opening")return new HA(this);if(this[Dt]!=="open")throw new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?c=t:c=xs(n,c),c=Tu(c,dt),n=Mu(n,this[Is].empty),this[Dt]==="opening")return this.defer(()=>this.batch(t,n,c)),c[dt];if(al(this,c))return c[dt];if(!Array.isArray(t))return this.nextTick(c,new TypeError("The first argument 'operations' must be an array")),c[dt];if(t.length===0)return this.nextTick(c),c[dt];let v=new Array(t.length),{keyEncoding:s,valueEncoding:a,...d}=n;for(let i=0;i<t.length;i++){if(typeof t[i]!="object"||t[i]===null)return this.nextTick(c,new TypeError("A batch operation must be an object")),c[dt];let r=Object.assign({},t[i]);if(r.type!=="put"&&r.type!=="del")return this.nextTick(c,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),c[dt];let u=this._checkKey(r.key);if(u)return this.nextTick(c,u),c[dt];let l=r.sublevel!=null?r.sublevel:this,p=l.keyEncoding(r.keyEncoding||s),f=p.format;if(r.key=l.prefixKey(p.encode(r.key),f),r.keyEncoding=f,r.type==="put"){let o=this._checkValue(r.value);if(o)return this.nextTick(c,o),c[dt];let h=l.valueEncoding(r.valueEncoding||a);r.value=h.encode(r.value),r.valueEncoding=h.format}l!==this&&(r.sublevel=null),v[i]=r}return this._batch(v,d,i=>{if(i)return c(i);this.emit("batch",t),c()}),c[dt]}_batch(t,n,c){this.nextTick(c)}sublevel(t,n){return this._sublevel(t,pD.defaults(n))}_sublevel(t,n){return new pD(this,t,n)}prefixKey(t,n){return t}clear(t,n){if(n=xs(t,n),n=Tu(n,dt),t=Mu(t,this[Is].empty),this[Dt]==="opening")return this.defer(()=>this.clear(t,n)),n[dt];if(al(this,n))return n[dt];let c=t,v=this.keyEncoding(t.keyEncoding);return t=L_(t,v),t.keyEncoding=v.format,t.limit===0?this.nextTick(n):this._clear(t,s=>{if(s)return n(s);this.emit("clear",c),n()}),n[dt]}_clear(t,n){this.nextTick(n)}iterator(t){let n=this.keyEncoding(t&&t.keyEncoding),c=this.valueEncoding(t&&t.valueEncoding);if(t=L_(t,n),t.keys=t.keys!==!1,t.values=t.values!==!1,t[Fs.keyEncoding]=n,t[Fs.valueEncoding]=c,t.keyEncoding=n.format,t.valueEncoding=c.format,this[Dt]==="opening")return new cq(this,t);if(this[Dt]!=="open")throw new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new Fs(this,t)}keys(t){let n=this.keyEncoding(t&&t.keyEncoding),c=this.valueEncoding(t&&t.valueEncoding);if(t=L_(t,n),t[Fs.keyEncoding]=n,t[Fs.valueEncoding]=c,t.keyEncoding=n.format,t.valueEncoding=c.format,this[Dt]==="opening")return new lq(this,t);if(this[Dt]!=="open")throw new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new uq(this,t)}values(t){let n=this.keyEncoding(t&&t.keyEncoding),c=this.valueEncoding(t&&t.valueEncoding);if(t=L_(t,n),t[Fs.keyEncoding]=n,t[Fs.valueEncoding]=c,t.keyEncoding=n.format,t.valueEncoding=c.format,this[Dt]==="opening")return new fq(this,t);if(this[Dt]!=="open")throw new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new sq(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[ud].push(t)}[sd](){if(this[ud].length===0)return;let t=this[ud];this[ud]=[];for(let n of t)n()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[As].add(t)}detachResource(t){this[As].delete(t)}_chainedBatch(){return new HA(this)}_checkKey(t){if(t==null)return new Uo("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new Uo("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};cd.prototype.nextTick=AA();var{AbstractSublevel:pD}=OA()({AbstractLevel:cd});hD.AbstractLevel=cd;hD.AbstractSublevel=pD;var al=function(e,t){return e[Dt]!=="open"?(e.nextTick(t,new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},pq=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])}});var vD=_t(Rs=>{"use strict";Rs.AbstractLevel=_D().AbstractLevel;Rs.AbstractSublevel=_D().AbstractSublevel;Rs.AbstractIterator=Su().AbstractIterator;Rs.AbstractKeyIterator=Su().AbstractKeyIterator;Rs.AbstractValueIterator=Su().AbstractValueIterator;Rs.AbstractChainedBatch=rD().AbstractChainedBatch});var BA=_t((k_e,NA)=>{NA.exports=_q;var hq=aD();function _q(e,t,n){if(typeof t!="number")throw new Error("second argument must be a Number");let c,v,s,a,d,i=!0,r;Array.isArray(e)?(c=[],s=v=e.length):(a=Object.keys(e),c={},s=v=a.length);function u(p){function f(){n&&n(p,c),n=null}i?hq(f):f()}function l(p,f,o){if(c[p]=o,f&&(d=!0),--s===0||f)u(f);else if(!d&&r<v){let h;a?(h=a[r],r+=1,e[h](function(_,m){l(h,_,m)})):(h=r,r+=1,e[h](function(_,m){l(h,_,m)}))}}r=t,s?a?a.some(function(p,f){return e[p](function(o,h){l(p,o,h)}),f===t-1}):e.some(function(p,f){return p(function(o,h){l(f,o,h)}),f===t-1}):u(null),i=!1}});var mD=_t((O_e,WA)=>{"use strict";WA.exports=function(t){let n=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,c=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,v=t.gte===void 0,s=t.lte===void 0;return n!==void 0&&c!==void 0?IDBKeyRange.bound(n,c,v,s):n!==void 0?IDBKeyRange.lowerBound(n,v):c!==void 0?IDBKeyRange.upperBound(c,s):null}});var gD=_t((H_e,UA)=>{"use strict";var vq=new TextEncoder;UA.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):vq.encode(e)}});var JA=_t(GA=>{"use strict";var{AbstractIterator:mq}=vD(),qA=mD(),A_=gD(),ba=Symbol("cache"),ii=Symbol("finished"),so=Symbol("options"),ui=Symbol("currentOptions"),$s=Symbol("position"),yD=Symbol("location"),il=Symbol("first"),zA={},DD=class extends mq{constructor(t,n,c){super(t,c),this[ba]=[],this[ii]=this.limit===0,this[so]=c,this[ui]={...c},this[$s]=void 0,this[yD]=n,this[il]=!0}_nextv(t,n,c){if(this[il]=!1,this[ii])return this.nextTick(c,null,[]);if(this[ba].length>0)return t=Math.min(t,this[ba].length),this.nextTick(c,null,this[ba].splice(0,t));this[$s]!==void 0&&(this[so].reverse?(this[ui].lt=this[$s],this[ui].lte=void 0):(this[ui].gt=this[$s],this[ui].gte=void 0));let v;try{v=qA(this[ui])}catch{return this[ii]=!0,this.nextTick(c,null,[])}let s=this.db.db.transaction([this[yD]],"readonly"),a=s.objectStore(this[yD]),d=[];if(this[so].reverse){let i=!this[so].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[i](v,"prev").onsuccess=r=>{let u=r.target.result;if(u){let{key:l,value:p}=u;this[$s]=l,d.push([this[so].keys&&l!==void 0?A_(l):void 0,this[so].values&&p!==void 0?A_(p):void 0]),d.length<t?u.continue():VA(s)}else this[ii]=!0}}else{let i,r,u=()=>{if(i===void 0||r===void 0)return;let l=Math.max(i.length,r.length);l===0||t===1/0?this[ii]=!0:this[$s]=i[l-1],d.length=l;for(let p=0;p<l;p++){let f=i[p],o=r[p];d[p]=[this[so].keys&&f!==void 0?A_(f):void 0,this[so].values&&o!==void 0?A_(o):void 0]}VA(s)};this[so].keys||t<1/0?a.getAllKeys(v,t<1/0?t:void 0).onsuccess=l=>{i=l.target.result,u()}:(i=[],this.nextTick(u)),this[so].values?a.getAll(v,t<1/0?t:void 0).onsuccess=l=>{r=l.target.result,u()}:(r=[],this.nextTick(u))}s.onabort=()=>{c(s.error||new Error("aborted by user")),c=null},s.oncomplete=()=>{c(null,d),c=null}}_next(t){if(this[ba].length>0){let[n,c]=this[ba].shift();this.nextTick(t,null,n,c)}else if(this[ii])this.nextTick(t);else{let n=Math.min(100,this.limit-this.count);this[il]&&(this[il]=!1,n=1),this._nextv(n,zA,(c,v)=>{if(c)return t(c);this[ba]=v,this._next(t)})}}_all(t,n){this[il]=!1;let c=this[ba].splice(0,this[ba].length),v=this.limit-this.count-c.length;if(v<=0)return this.nextTick(n,null,c);this._nextv(v,zA,(s,a)=>{if(s)return n(s);c.length>0&&(a=c.concat(a)),n(null,a)})}_seek(t,n){this[il]=!0,this[ba]=[],this[ii]=!1,this[$s]=void 0,this[ui]={...this[so]};let c;try{c=qA(this[so])}catch{this[ii]=!0;return}c!==null&&!c.includes(t)?this[ii]=!0:this[so].reverse?this[ui].lte=t:this[ui].gte=t}};GA.Iterator=DD;function VA(e){typeof e.commit=="function"&&e.commit()}});var KA=_t((N_e,jA)=>{"use strict";jA.exports=function(t,n,c,v,s){if(v.limit===0)return t.nextTick(s);let a=t.db.transaction([n],"readwrite"),d=a.objectStore(n),i=0;a.oncomplete=function(){s()},a.onabort=function(){s(a.error||new Error("aborted by user"))};let r=d.openKeyCursor?"openKeyCursor":"openCursor",u=v.reverse?"prev":"next";d[r](c,u).onsuccess=function(l){let p=l.target.result;p&&(d.delete(p.key).onsuccess=function(){(v.limit<=0||++i<v.limit)&&p.continue()})}}});var tI=_t(eI=>{"use strict";var{AbstractLevel:gq}=vD(),QA=Bo(),yq=BA(),{fromCallback:Dq}=Qf(),{Iterator:Cq}=JA(),XA=gD(),bq=KA(),wq=mD(),ZA="level-js-",ld=Symbol("idb"),CD=Symbol("namePrefix"),si=Symbol("location"),bD=Symbol("version"),ks=Symbol("store"),fd=Symbol("onComplete"),YA=Symbol("promise"),I_=class extends gq{constructor(t,n,c){if(typeof n=="function"||typeof c=="function")throw new QA("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:v,version:s,...a}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof t!="string")throw new Error("constructor requires a location string argument");this[si]=t,this[CD]=v??ZA,this[bD]=parseInt(s||1,10),this[ld]=null}get location(){return this[si]}get namePrefix(){return this[CD]}get version(){return this[bD]}get db(){return this[ld]}get type(){return"browser-level"}_open(t,n){let c=indexedDB.open(this[CD]+this[si],this[bD]);c.onerror=function(){n(c.error||new Error("unknown error"))},c.onsuccess=()=>{this[ld]=c.result,n()},c.onupgradeneeded=v=>{let s=v.target.result;s.objectStoreNames.contains(this[si])||s.createObjectStore(this[si])}}[ks](t){return this[ld].transaction([this[si]],t).objectStore(this[si])}[fd](t,n){let c=t.transaction;c.onabort=function(){n(c.error||new Error("aborted by user"))},c.oncomplete=function(){n(null,t.result)}}_get(t,n,c){let v=this[ks]("readonly"),s;try{s=v.get(t)}catch(a){return this.nextTick(c,a)}this[fd](s,function(a,d){if(a)return c(a);if(d===void 0)return c(new QA("Entry not found",{code:"LEVEL_NOT_FOUND"}));c(null,XA(d))})}_getMany(t,n,c){let v=this[ks]("readonly"),s=t.map(a=>d=>{let i;try{i=v.get(a)}catch(r){return d(r)}i.onsuccess=()=>{let r=i.result;d(null,r===void 0?r:XA(r))},i.onerror=r=>{r.stopPropagation(),d(i.error)}});yq(s,16,c)}_del(t,n,c){let v=this[ks]("readwrite"),s;try{s=v.delete(t)}catch(a){return this.nextTick(c,a)}this[fd](s,c)}_put(t,n,c,v){let s=this[ks]("readwrite"),a;try{a=s.put(n,t)}catch(d){return this.nextTick(v,d)}this[fd](a,v)}_iterator(t){return new Cq(this,this[si],t)}_batch(t,n,c){let v=this[ks]("readwrite"),s=v.transaction,a=0,d;s.onabort=function(){c(d||s.error||new Error("aborted by user"))},s.oncomplete=function(){c()};function i(){let r=t[a++],u=r.key,l;try{l=r.type==="del"?v.delete(u):v.put(r.value,u)}catch(p){d=p,s.abort();return}a<t.length?l.onsuccess=i:typeof s.commit=="function"&&s.commit()}i()}_clear(t,n){let c,v;try{c=wq(t)}catch{return this.nextTick(n)}if(t.limit>=0)return bq(this,this[si],c,t,n);try{let s=this[ks]("readwrite");v=c?s.delete(c):s.clear()}catch(s){return this.nextTick(n,s)}this[fd](v,n)}_close(t){this[ld].close(),this.nextTick(t)}};I_.destroy=function(e,t,n){typeof t=="function"&&(n=t,t=ZA),n=Dq(n,YA);let c=indexedDB.deleteDatabase(t+e);return c.onsuccess=function(){n()},c.onerror=function(v){n(v)},n[YA]};eI.BrowserLevel=I_});var wD=_t(nI=>{nI.Level=tI().BrowserLevel});var Dk=_t(($v,qw)=>{(function(e,t){typeof $v=="object"&&typeof qw=="object"?qw.exports=t():typeof define=="function"&&define.amd?define([],t):typeof $v=="object"?$v.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let c=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(c._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,c=n._renderService.dimensions;if(c.css.cell.width===0||c.css.cell.height===0)return;let v=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(s.getPropertyValue("height")),d=Math.max(0,parseInt(s.getPropertyValue("width"))),i=window.getComputedStyle(this._terminal.element),r=a-(parseInt(i.getPropertyValue("padding-top"))+parseInt(i.getPropertyValue("padding-bottom"))),u=d-(parseInt(i.getPropertyValue("padding-right"))+parseInt(i.getPropertyValue("padding-left")))-v;return{cols:Math.max(2,Math.floor(u/c.css.cell.width)),rows:Math.max(1,Math.floor(r/c.css.cell.height))}}}})(),e})())});var bk=_t((Ov,zw)=>{(function(e,t){typeof Ov=="object"&&typeof zw=="object"?zw.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Ov=="object"?Ov.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(v,s,a){var d=this&&this.__decorate||function(D,g,b,L){var w,T=arguments.length,M=T<3?g:L===null?L=Object.getOwnPropertyDescriptor(g,b):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,L);else for(var S=D.length-1;S>=0;S--)(w=D[S])&&(M=(T<3?w(M):T>3?w(g,b,M):w(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M};Object.defineProperty(s,"__esModule",{value:!0}),s.GlyphRenderer=void 0;let i=a(374),r=a(509),u=a(855),l=a(859),p=a(776),f=a(381),o=11,h=o*Float32Array.BYTES_PER_ELEMENT,_,m=0,y=0,C=0;class E extends l.Disposable{constructor(g,b,L){super(),this._terminal=g,this._gl=b,this._dimensions=L,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let w=this._gl;r.TextureAtlas.maxAtlasPages===void 0&&(r.TextureAtlas.maxAtlasPages=Math.min(32,(0,i.throwIfFalsy)(w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS))),r.TextureAtlas.maxTextureSize=(0,i.throwIfFalsy)(w.getParameter(w.MAX_TEXTURE_SIZE))),this._program=(0,i.throwIfFalsy)((0,f.createProgram)(w,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(R){let A="";for(let I=1;I<R;I++)A+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${R}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${A}
}`}(r.TextureAtlas.maxAtlasPages))),this.register((0,l.toDisposable)(()=>w.deleteProgram(this._program))),this._projectionLocation=(0,i.throwIfFalsy)(w.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,i.throwIfFalsy)(w.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,i.throwIfFalsy)(w.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=w.createVertexArray(),w.bindVertexArray(this._vertexArrayObject);let T=new Float32Array([0,0,1,0,0,1,1,1]),M=w.createBuffer();this.register((0,l.toDisposable)(()=>w.deleteBuffer(M))),w.bindBuffer(w.ARRAY_BUFFER,M),w.bufferData(w.ARRAY_BUFFER,T,w.STATIC_DRAW),w.enableVertexAttribArray(0),w.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let S=new Uint8Array([0,1,2,3]),F=w.createBuffer();this.register((0,l.toDisposable)(()=>w.deleteBuffer(F))),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,F),w.bufferData(w.ELEMENT_ARRAY_BUFFER,S,w.STATIC_DRAW),this._attributesBuffer=(0,i.throwIfFalsy)(w.createBuffer()),this.register((0,l.toDisposable)(()=>w.deleteBuffer(this._attributesBuffer))),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.enableVertexAttribArray(2),w.vertexAttribPointer(2,2,w.FLOAT,!1,h,0),w.vertexAttribDivisor(2,1),w.enableVertexAttribArray(3),w.vertexAttribPointer(3,2,w.FLOAT,!1,h,2*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(3,1),w.enableVertexAttribArray(4),w.vertexAttribPointer(4,1,w.FLOAT,!1,h,4*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(4,1),w.enableVertexAttribArray(5),w.vertexAttribPointer(5,2,w.FLOAT,!1,h,5*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(5,1),w.enableVertexAttribArray(6),w.vertexAttribPointer(6,2,w.FLOAT,!1,h,7*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(6,1),w.enableVertexAttribArray(1),w.vertexAttribPointer(1,2,w.FLOAT,!1,h,9*Float32Array.BYTES_PER_ELEMENT),w.vertexAttribDivisor(1,1),w.useProgram(this._program);let x=new Int32Array(r.TextureAtlas.maxAtlasPages);for(let R=0;R<r.TextureAtlas.maxAtlasPages;R++)x[R]=R;w.uniform1iv(this._textureLocation,x),w.uniformMatrix4fv(this._projectionLocation,!1,f.PROJECTION_MATRIX),this._atlasTextures=[];for(let R=0;R<r.TextureAtlas.maxAtlasPages;R++){let A=new f.GLTexture((0,i.throwIfFalsy)(w.createTexture()));this.register((0,l.toDisposable)(()=>w.deleteTexture(A.texture))),w.activeTexture(w.TEXTURE0+R),w.bindTexture(w.TEXTURE_2D,A.texture),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,1,1,0,w.RGBA,w.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[R]=A}w.enable(w.BLEND),w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,b,L,w,T,M,S,F){this._updateCell(this._vertices.attributes,g,b,L,w,T,M,S,F)}_updateCell(g,b,L,w,T,M,S,F,x){m=(L*this._terminal.cols+b)*o,w!==u.NULL_CELL_CODE&&w!==void 0?this._atlas&&(_=F&&F.length>1?this._atlas.getRasterizedGlyphCombinedChar(F,T,M,S,!1):this._atlas.getRasterizedGlyph(w,T,M,S,!1),y=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),T!==x&&_.offset.x>y?(C=_.offset.x-y,g[m]=-(_.offset.x-C)+this._dimensions.device.char.left,g[m+1]=-_.offset.y+this._dimensions.device.char.top,g[m+2]=(_.size.x-C)/this._dimensions.device.canvas.width,g[m+3]=_.size.y/this._dimensions.device.canvas.height,g[m+4]=_.texturePage,g[m+5]=_.texturePositionClipSpace.x+C/this._atlas.pages[_.texturePage].canvas.width,g[m+6]=_.texturePositionClipSpace.y,g[m+7]=_.sizeClipSpace.x-C/this._atlas.pages[_.texturePage].canvas.width,g[m+8]=_.sizeClipSpace.y):(g[m]=-_.offset.x+this._dimensions.device.char.left,g[m+1]=-_.offset.y+this._dimensions.device.char.top,g[m+2]=_.size.x/this._dimensions.device.canvas.width,g[m+3]=_.size.y/this._dimensions.device.canvas.height,g[m+4]=_.texturePage,g[m+5]=_.texturePositionClipSpace.x,g[m+6]=_.texturePositionClipSpace.y,g[m+7]=_.sizeClipSpace.x,g[m+8]=_.sizeClipSpace.y)):g.fill(0,m,m+o-1-2)}clear(){let g=this._terminal,b=g.cols*g.rows*o;this._vertices.count!==b?this._vertices.attributes=new Float32Array(b):this._vertices.attributes.fill(0);let L=0;for(;L<this._vertices.attributesBuffers.length;L++)this._vertices.count!==b?this._vertices.attributesBuffers[L]=new Float32Array(b):this._vertices.attributesBuffers[L].fill(0);this._vertices.count=b,L=0;for(let w=0;w<g.rows;w++)for(let T=0;T<g.cols;T++)this._vertices.attributes[L+9]=T/g.cols,this._vertices.attributes[L+10]=w/g.rows,L+=o}handleResize(){let g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let L=this._vertices.attributesBuffers[this._activeBuffer],w=0;for(let T=0;T<g.lineLengths.length;T++){let M=T*this._terminal.cols*o,S=this._vertices.attributes.subarray(M,M+g.lineLengths[T]*o);L.set(S,w),w+=S.length}b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,L.subarray(0,w),b.STREAM_DRAW);for(let T=0;T<this._atlas.pages.length;T++)this._atlas.pages[T].version!==this._atlasTextures[T].version&&this._bindAtlasPageTexture(b,this._atlas,T);b.drawElementsInstanced(b.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,w/o)}setAtlas(g){this._atlas=g;for(let b of this._atlasTextures)b.version=-1}_bindAtlasPageTexture(g,b,L){g.activeTexture(g.TEXTURE0+L),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[L].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,b.pages[L].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[L].version=b.pages[L].version}setDimensions(g){this._dimensions=g}}s.GlyphRenderer=E,d([p.traceCall],E.prototype,"updateCell",null)},742:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RectangleRenderer=void 0;let d=a(374),i=a(859),r=a(310),u=a(381),l=8*Float32Array.BYTES_PER_ELEMENT;class p{constructor(){this.attributes=new Float32Array(160),this.count=0}}let f=0,o=0,h=0,_=0,m=0,y=0,C=0;class E extends i.Disposable{constructor(g,b,L,w){super(),this._terminal=g,this._gl=b,this._dimensions=L,this._themeService=w,this._vertices=new p,this._verticesCursor=new p;let T=this._gl;this._program=(0,d.throwIfFalsy)((0,u.createProgram)(T,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,i.toDisposable)(()=>T.deleteProgram(this._program))),this._projectionLocation=(0,d.throwIfFalsy)(T.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=T.createVertexArray(),T.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),S=T.createBuffer();this.register((0,i.toDisposable)(()=>T.deleteBuffer(S))),T.bindBuffer(T.ARRAY_BUFFER,S),T.bufferData(T.ARRAY_BUFFER,M,T.STATIC_DRAW),T.enableVertexAttribArray(3),T.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let F=new Uint8Array([0,1,2,3]),x=T.createBuffer();this.register((0,i.toDisposable)(()=>T.deleteBuffer(x))),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,x),T.bufferData(T.ELEMENT_ARRAY_BUFFER,F,T.STATIC_DRAW),this._attributesBuffer=(0,d.throwIfFalsy)(T.createBuffer()),this.register((0,i.toDisposable)(()=>T.deleteBuffer(this._attributesBuffer))),T.bindBuffer(T.ARRAY_BUFFER,this._attributesBuffer),T.enableVertexAttribArray(0),T.vertexAttribPointer(0,2,T.FLOAT,!1,l,0),T.vertexAttribDivisor(0,1),T.enableVertexAttribArray(1),T.vertexAttribPointer(1,2,T.FLOAT,!1,l,2*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(1,1),T.enableVertexAttribArray(2),T.vertexAttribPointer(2,4,T.FLOAT,!1,l,4*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(2,1),this._updateCachedColors(w.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),b.uniformMatrix4fv(this._projectionLocation,!1,u.PROJECTION_MATRIX),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,g.attributes,b.DYNAMIC_DRAW),b.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){let b=this._terminal,L=this._vertices,w,T,M,S,F,x,R,A,I,$,k,H=1;for(w=0;w<b.rows;w++){for(M=-1,S=0,F=0,x=!1,T=0;T<b.cols;T++)R=(w*b.cols+T)*r.RENDER_MODEL_INDICIES_PER_CELL,A=g.cells[R+r.RENDER_MODEL_BG_OFFSET],I=g.cells[R+r.RENDER_MODEL_FG_OFFSET],$=!!(67108864&I),(A!==S||I!==F&&(x||$))&&((S!==0||x&&F!==0)&&(k=8*H++,this._updateRectangle(L,k,F,S,M,T,w)),M=T,S=A,F=I,x=$);(S!==0||x&&F!==0)&&(k=8*H++,this._updateRectangle(L,k,F,S,M,b.cols,w))}L.count=H}updateCursor(g){let b=this._verticesCursor,L=g.cursor;if(!L||L.style==="block")return void(b.count=0);let w,T=0;L.style!=="bar"&&L.style!=="outline"||(w=8*T++,this._addRectangleFloat(b.attributes,w,L.x*this._dimensions.device.cell.width,L.y*this._dimensions.device.cell.height,L.style==="bar"?L.dpr*L.cursorWidth:L.dpr,this._dimensions.device.cell.height,this._cursorFloat)),L.style!=="underline"&&L.style!=="outline"||(w=8*T++,this._addRectangleFloat(b.attributes,w,L.x*this._dimensions.device.cell.width,(L.y+1)*this._dimensions.device.cell.height-L.dpr,L.width*this._dimensions.device.cell.width,L.dpr,this._cursorFloat)),L.style==="outline"&&(w=8*T++,this._addRectangleFloat(b.attributes,w,L.x*this._dimensions.device.cell.width,L.y*this._dimensions.device.cell.height,L.width*this._dimensions.device.cell.width,L.dpr,this._cursorFloat),w=8*T++,this._addRectangleFloat(b.attributes,w,(L.x+L.width)*this._dimensions.device.cell.width-L.dpr,L.y*this._dimensions.device.cell.height,L.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.count=T}_updateRectangle(g,b,L,w,T,M,S){if(67108864&L)switch(50331648&L){case 16777216:case 33554432:f=this._themeService.colors.ansi[255&L].rgba;break;case 50331648:f=(16777215&L)<<8;break;default:f=this._themeService.colors.foreground.rgba}else switch(50331648&w){case 16777216:case 33554432:f=this._themeService.colors.ansi[255&w].rgba;break;case 50331648:f=(16777215&w)<<8;break;default:f=this._themeService.colors.background.rgba}g.attributes.length<b+4&&(g.attributes=(0,u.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),o=T*this._dimensions.device.cell.width,h=S*this._dimensions.device.cell.height,_=(f>>24&255)/255,m=(f>>16&255)/255,y=(f>>8&255)/255,C=1,this._addRectangle(g.attributes,b,o,h,(M-T)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,_,m,y,C)}_addRectangle(g,b,L,w,T,M,S,F,x,R){g[b]=L/this._dimensions.device.canvas.width,g[b+1]=w/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=S,g[b+5]=F,g[b+6]=x,g[b+7]=R}_addRectangleFloat(g,b,L,w,T,M,S){g[b]=L/this._dimensions.device.canvas.width,g[b+1]=w/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=S[0],g[b+5]=S[1],g[b+6]=S[2],g[b+7]=S[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}s.RectangleRenderer=E},310:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderModel=s.COMBINED_CHAR_BIT_MASK=s.RENDER_MODEL_EXT_OFFSET=s.RENDER_MODEL_FG_OFFSET=s.RENDER_MODEL_BG_OFFSET=s.RENDER_MODEL_INDICIES_PER_CELL=void 0;let d=a(296);s.RENDER_MODEL_INDICIES_PER_CELL=4,s.RENDER_MODEL_BG_OFFSET=1,s.RENDER_MODEL_FG_OFFSET=2,s.RENDER_MODEL_EXT_OFFSET=3,s.COMBINED_CHAR_BIT_MASK=2147483648,s.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,d.createSelectionRenderModel)()}resize(i,r){let u=i*r*s.RENDER_MODEL_INDICIES_PER_CELL;u!==this.cells.length&&(this.cells=new Uint32Array(u),this.lineLengths=new Uint32Array(r))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(v,s,a){var d=this&&this.__decorate||function(M,S,F,x){var R,A=arguments.length,I=A<3?S:x===null?x=Object.getOwnPropertyDescriptor(S,F):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(M,S,F,x);else for(var $=M.length-1;$>=0;$--)(R=M[$])&&(I=(A<3?R(I):A>3?R(S,F,I):R(S,F))||I);return A>3&&I&&Object.defineProperty(S,F,I),I};Object.defineProperty(s,"__esModule",{value:!0}),s.JoinedCellData=s.WebglRenderer=void 0;let i=a(820),r=a(274),u=a(627),l=a(457),p=a(56),f=a(374),o=a(345),h=a(859),_=a(147),m=a(782),y=a(855),C=a(776),E=a(965),D=a(742),g=a(310),b=a(733);class L extends h.Disposable{constructor(S,F,x,R,A,I,$,k,H){super(),this._terminal=S,this._characterJoinerService=F,this._charSizeService=x,this._coreBrowserService=R,this._coreService=A,this._decorationService=I,this._optionsService=$,this._themeService=k,this._cursorBlinkStateManager=new h.MutableDisposable,this._charAtlasDisposable=this.register(new h.MutableDisposable),this._model=new g.RenderModel,this._workCell=new m.CellData,this._rectangleRenderer=this.register(new h.MutableDisposable),this._glyphRenderer=this.register(new h.MutableDisposable),this._onChangeTextureAtlas=this.register(new o.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new o.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new o.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new o.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new o.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new r.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new b.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,$,this._themeService)],this.dimensions=(0,f.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register($.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let U={antialias:!1,depth:!1,preserveDrawingBuffer:H};if(this._gl=this._canvas.getContext("webgl2",U),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,i.addDisposableDomListener)(this._canvas,"webglcontextlost",q=>{console.log("webglcontextlost event received"),q.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(q)},3e3)})),this.register((0,i.addDisposableDomListener)(this._canvas,"webglcontextrestored",q=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,u.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,p.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(q,N)=>this._setCanvasDevicePixelDimensions(q,N))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,h.toDisposable)(()=>{var q;for(let N of this._renderLayers)N.dispose();(q=this._canvas.parentElement)===null||q===void 0||q.removeChild(this._canvas),(0,u.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var S;return(S=this._charAtlas)===null||S===void 0?void 0:S.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(S,F){var x,R,A,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let $ of this._renderLayers)$.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(x=this._rectangleRenderer.value)===null||x===void 0||x.setDimensions(this.dimensions),(R=this._rectangleRenderer.value)===null||R===void 0||R.handleResize(),(A=this._glyphRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(I=this._glyphRenderer.value)===null||I===void 0||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var S;for(let F of this._renderLayers)F.handleBlur(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.pause(),this._requestRedrawViewport()}handleFocus(){var S;for(let F of this._renderLayers)F.handleFocus(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.resume(),this._requestRedrawViewport()}handleSelectionChanged(S,F,x){for(let R of this._renderLayers)R.handleSelectionChanged(this._terminal,S,F,x);this._model.selection.update(this._terminal,S,F,x),this._requestRedrawViewport()}handleCursorMove(){var S;for(let F of this._renderLayers)F.handleCursorMove(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new D.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new E.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var S;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let F=(0,u.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==F&&(this._onChangeTextureAtlas.fire(F.pages[0].canvas),this._charAtlasDisposable.value=(0,h.getDisposeArrayDisposable)([(0,o.forwardEvent)(F.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,o.forwardEvent)(F.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=F,this._charAtlas.warmUp(),(S=this._glyphRenderer.value)===null||S===void 0||S.setAtlas(this._charAtlas)}_clearModel(S){var F;this._model.clear(),S&&((F=this._glyphRenderer.value)===null||F===void 0||F.clear())}clearTextureAtlas(){var S;(S=this._charAtlas)===null||S===void 0||S.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var S;this._clearModel(!0);for(let F of this._renderLayers)F.reset(this._terminal);(S=this._cursorBlinkStateManager.value)===null||S===void 0||S.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(S){return-1}deregisterCharacterJoiner(S){return!1}renderRows(S,F){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let x of this._renderLayers)x.handleGridChanged(this._terminal,S,F);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(S,F),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new l.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(S,F){let x=this._core,R,A,I,$,k,H,U,q,N,K,O,B,W,P=this._workCell;S=T(S,x.rows-1,0),F=T(F,x.rows-1,0);let X=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,J=Math.min(this._terminal.buffer.active.cursorX,x.cols-1),ve=-1,Ee=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let De=!1;for(A=S;A<=F;A++)for(I=A+x.buffer.ydisp,$=x.buffer.lines.get(I),this._model.lineLengths[A]=0,k=this._characterJoinerService.getJoinedCharacters(I),B=0;B<x.cols;B++)if(R=this._cellColorResolver.result.bg,$.loadCell(B,P),B===0&&(R=this._cellColorResolver.result.bg),H=!1,U=B,k.length>0&&B===k[0][0]&&(H=!0,q=k.shift(),P=new w(P,$.translateToString(!0,q[0],q[1]),q[1]-q[0]),U=q[1]-1),N=P.getChars(),K=P.getCode(),O=(A*x.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(P,B,I),Ee&&I===X&&(B===J&&(this._model.cursor={x:J,y:this._terminal.buffer.active.cursorY,width:P.getWidth(),style:this._coreBrowserService.isFocused?x.options.cursorStyle||"block":x.options.cursorInactiveStyle,cursorWidth:x.options.cursorWidth,dpr:this._devicePixelRatio},ve=J+P.getWidth()-1),B>=J&&B<=ve&&(this._coreBrowserService.isFocused&&(x.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&x.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),K!==y.NULL_CELL_CODE&&(this._model.lineLengths[A]=B+1),(this._model.cells[O]!==K||this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(De=!0,N.length>1&&(K|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[O]=K,this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(B,A,K,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,N,R),H))for(P=this._workCell,B++;B<U;B++)W=(A*x.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(B,A,y.NULL_CELL_CODE,0,0,0,y.NULL_CELL_CHAR,0),this._model.cells[W]=y.NULL_CELL_CODE,this._model.cells[W+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[W+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[W+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;De&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(S,F){this._canvas.width===S&&this._canvas.height===F||(this._canvas.width=S,this._canvas.height=F,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let S=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:S,end:S})}}s.WebglRenderer=L,d([C.traceCall],L.prototype,"renderRows",null);class w extends _.AttributeData{constructor(S,F,x){super(),this.content=0,this.combinedData="",this.fg=S.fg,this.bg=S.bg,this.combinedData=F,this._width=x}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(S){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function T(M,S,F=0){return Math.max(Math.min(M,S),F)}s.JoinedCellData=w},381:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GLTexture=s.expandFloat32Array=s.createShader=s.createProgram=s.PROJECTION_MATRIX=void 0;let d=a(374);function i(r,u,l){let p=(0,d.throwIfFalsy)(r.createShader(u));if(r.shaderSource(p,l),r.compileShader(p),r.getShaderParameter(p,r.COMPILE_STATUS))return p;console.error(r.getShaderInfoLog(p)),r.deleteShader(p)}s.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),s.createProgram=function(r,u,l){let p=(0,d.throwIfFalsy)(r.createProgram());if(r.attachShader(p,(0,d.throwIfFalsy)(i(r,r.VERTEX_SHADER,u))),r.attachShader(p,(0,d.throwIfFalsy)(i(r,r.FRAGMENT_SHADER,l))),r.linkProgram(p),r.getProgramParameter(p,r.LINK_STATUS))return p;console.error(r.getProgramInfoLog(p)),r.deleteProgram(p)},s.createShader=i,s.expandFloat32Array=function(r,u){let l=Math.min(2*r.length,u),p=new Float32Array(l);for(let f=0;f<r.length;f++)p[f]=r[f];return p},s.GLTexture=class{constructor(r){this.texture=r,this.version=-1}}},592:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;let d=a(627),i=a(237),r=a(374),u=a(859);class l extends u.Disposable{constructor(f,o,h,_,m,y,C,E){super(),this._container=o,this._alpha=m,this._coreBrowserService=y,this._optionsService=C,this._themeService=E,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${h}-layer`),this._canvas.style.zIndex=_.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(D=>{this._refreshCharAtlas(f,D),this.reset(f)})),this.register((0,u.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,r.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(f){}handleFocus(f){}handleCursorMove(f){}handleGridChanged(f,o,h){}handleSelectionChanged(f,o,h,_=!1){}_setTransparency(f,o){if(o===this._alpha)return;let h=this._canvas;this._alpha=o,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,h),this._refreshCharAtlas(f,this._themeService.colors),this.handleGridChanged(f,0,f.rows-1)}_refreshCharAtlas(f,o){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,d.acquireTextureAtlas)(f,this._optionsService.rawOptions,o,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(f,o){this._deviceCellWidth=o.device.cell.width,this._deviceCellHeight=o.device.cell.height,this._deviceCharWidth=o.device.char.width,this._deviceCharHeight=o.device.char.height,this._deviceCharLeft=o.device.char.left,this._deviceCharTop=o.device.char.top,this._canvas.width=o.device.canvas.width,this._canvas.height=o.device.canvas.height,this._canvas.style.width=`${o.css.canvas.width}px`,this._canvas.style.height=`${o.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(f,this._themeService.colors)}_fillBottomLineAtCells(f,o,h=1){this._ctx.fillRect(f*this._deviceCellWidth,(o+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,h*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(f,o,h,_){this._alpha?this._ctx.clearRect(f*this._deviceCellWidth,o*this._deviceCellHeight,h*this._deviceCellWidth,_*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(f*this._deviceCellWidth,o*this._deviceCellHeight,h*this._deviceCellWidth,_*this._deviceCellHeight))}_fillCharTrueColor(f,o,h,_){this._ctx.font=this._getFont(f,!1,!1),this._ctx.textBaseline=i.TEXT_BASELINE,this._clipCell(h,_,o.getWidth()),this._ctx.fillText(o.getChars(),h*this._deviceCellWidth+this._deviceCharLeft,_*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(f,o,h){this._ctx.beginPath(),this._ctx.rect(f*this._deviceCellWidth,o*this._deviceCellHeight,h*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(f,o,h){return`${h?"italic":""} ${o?f.options.fontWeightBold:f.options.fontWeight} ${f.options.fontSize*this._coreBrowserService.dpr}px ${f.options.fontFamily}`}}s.BaseRenderLayer=l},733:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;let d=a(197),i=a(237),r=a(592);class u extends r.BaseRenderLayer{constructor(p,f,o,h,_,m,y){super(o,p,"link",f,!0,_,m,y),this.register(h.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(h.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(p,f){super.resize(p,f),this._state=void 0}reset(p){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let p=this._state.y2-this._state.y1-1;p>0&&this._clearCells(0,this._state.y1+1,this._state.cols,p),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(p){if(p.fg===i.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:p.fg!==void 0&&(0,d.is256Color)(p.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[p.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,p.y1===p.y2)this._fillBottomLineAtCells(p.x1,p.y1,p.x2-p.x1);else{this._fillBottomLineAtCells(p.x1,p.y1,p.cols-p.x1);for(let f=p.y1+1;f<p.y2;f++)this._fillBottomLineAtCells(0,f,p.cols);this._fillBottomLineAtCells(0,p.y2,p.x2)}this._state=p}_handleHideLinkUnderline(p){this._clearCurrentLink()}}s.LinkRenderLayer=u},820:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,d,i,r){a.addEventListener(d,i,r);let u=!1;return{dispose:()=>{u||(u=!0,a.removeEventListener(d,i,r))}}}},274:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellColorResolver=void 0;let a,d=0,i=0,r=!1,u=!1,l=!1;s.CellColorResolver=class{constructor(p,f,o,h,_){this._terminal=p,this._selectionRenderModel=f,this._decorationService=o,this._coreBrowserService=h,this._themeService=_,this.result={fg:0,bg:0,ext:0}}resolve(p,f,o){this.result.bg=p.bg,this.result.fg=p.fg,this.result.ext=268435456&p.bg?p.extended.ext:0,i=0,d=0,u=!1,r=!1,l=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(f,o,"bottom",h=>{h.backgroundColorRGB&&(i=h.backgroundColorRGB.rgba>>8&16777215,u=!0),h.foregroundColorRGB&&(d=h.foregroundColorRGB.rgba>>8&16777215,r=!0)}),l=this._selectionRenderModel.isCellSelected(this._terminal,f,o),l&&(i=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,u=!0,a.selectionForeground&&(d=a.selectionForeground.rgba>>8&16777215,r=!0)),this._decorationService.forEachDecorationAtCell(f,o,"top",h=>{h.backgroundColorRGB&&(i=h.backgroundColorRGB.rgba>>8&16777215,u=!0),h.foregroundColorRGB&&(d=h.foregroundColorRGB.rgba>>8&16777215,r=!0)}),u&&(i=l?-16777216&p.bg&-134217729|i|50331648:-16777216&p.bg|i|50331648),r&&(d=-16777216&p.fg&-67108865|d|50331648),67108864&this.result.fg&&(u&&!r&&(d=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,r=!0),!u&&r&&(i=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,u=!0)),a=void 0,this.result.bg=u?i:this.result.bg,this.result.fg=r?d:this.result.fg}}},627:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireTextureAtlas=void 0;let d=a(509),i=a(197),r=[];s.acquireTextureAtlas=function(u,l,p,f,o,h,_,m){let y=(0,i.generateConfig)(f,o,h,_,l,p,m);for(let D=0;D<r.length;D++){let g=r[D],b=g.ownedBy.indexOf(u);if(b>=0){if((0,i.configEquals)(g.config,y))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),r.splice(D,1)):g.ownedBy.splice(b,1);break}}for(let D=0;D<r.length;D++){let g=r[D];if((0,i.configEquals)(g.config,y))return g.ownedBy.push(u),g.atlas}let C=u._core,E={atlas:new d.TextureAtlas(document,y,C.unicodeService),config:y,ownedBy:[u]};return r.push(E),E.atlas},s.removeTerminalFromCache=function(u){for(let l=0;l<r.length;l++){let p=r[l].ownedBy.indexOf(u);if(p!==-1){r[l].ownedBy.length===1?(r[l].atlas.dispose(),r.splice(l,1)):r[l].ownedBy.splice(p,1);break}}}},197:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;let d=a(160);s.generateConfig=function(i,r,u,l,p,f,o){let h={foreground:f.foreground,background:f.background,cursor:d.NULL_COLOR,cursorAccent:d.NULL_COLOR,selectionForeground:d.NULL_COLOR,selectionBackgroundTransparent:d.NULL_COLOR,selectionBackgroundOpaque:d.NULL_COLOR,selectionInactiveBackgroundTransparent:d.NULL_COLOR,selectionInactiveBackgroundOpaque:d.NULL_COLOR,ansi:f.ansi.slice(),contrastCache:f.contrastCache,halfContrastCache:f.halfContrastCache};return{customGlyphs:p.customGlyphs,devicePixelRatio:o,letterSpacing:p.letterSpacing,lineHeight:p.lineHeight,deviceCellWidth:i,deviceCellHeight:r,deviceCharWidth:u,deviceCharHeight:l,fontFamily:p.fontFamily,fontSize:p.fontSize,fontWeight:p.fontWeight,fontWeightBold:p.fontWeightBold,allowTransparency:p.allowTransparency,drawBoldTextInBrightColors:p.drawBoldTextInBrightColors,minimumContrastRatio:p.minimumContrastRatio,colors:h}},s.configEquals=function(i,r){for(let u=0;u<i.colors.ansi.length;u++)if(i.colors.ansi[u].rgba!==r.colors.ansi[u].rgba)return!1;return i.devicePixelRatio===r.devicePixelRatio&&i.customGlyphs===r.customGlyphs&&i.lineHeight===r.lineHeight&&i.letterSpacing===r.letterSpacing&&i.fontFamily===r.fontFamily&&i.fontSize===r.fontSize&&i.fontWeight===r.fontWeight&&i.fontWeightBold===r.fontWeightBold&&i.allowTransparency===r.allowTransparency&&i.deviceCharWidth===r.deviceCharWidth&&i.deviceCharHeight===r.deviceCharHeight&&i.drawBoldTextInBrightColors===r.drawBoldTextInBrightColors&&i.minimumContrastRatio===r.minimumContrastRatio&&i.colors.foreground.rgba===r.colors.foreground.rgba&&i.colors.background.rgba===r.colors.background.rgba},s.is256Color=function(i){return(50331648&i)==16777216||(50331648&i)==33554432}},237:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let d=a(399);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},457:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CursorBlinkStateManager=void 0,s.CursorBlinkStateManager=class{constructor(a,d){this._renderCallback=a,this._coreBrowserService=d,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(a=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let d=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,d>0)return void this._restartInterval(d)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let d=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(d)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},a)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.powerlineDefinitions=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;let d=a(374);s.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let i={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(f,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u2551":{1:(f,o)=>`M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"\u2552":{1:(f,o)=>`M.5,1 L.5,${.5-o} L1,${.5-o} M.5,${.5+o} L1,${.5+o}`},"\u2553":{1:(f,o)=>`M${.5-f},1 L${.5-f},.5 L1,.5 M${.5+f},.5 L${.5+f},1`},"\u2554":{1:(f,o)=>`M1,${.5-o} L${.5-f},${.5-o} L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1`},"\u2555":{1:(f,o)=>`M0,${.5-o} L.5,${.5-o} L.5,1 M0,${.5+o} L.5,${.5+o}`},"\u2556":{1:(f,o)=>`M${.5+f},1 L${.5+f},.5 L0,.5 M${.5-f},.5 L${.5-f},1`},"\u2557":{1:(f,o)=>`M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M0,${.5-o} L${.5+f},${.5-o} L${.5+f},1`},"\u2558":{1:(f,o)=>`M.5,0 L.5,${.5+o} L1,${.5+o} M.5,${.5-o} L1,${.5-o}`},"\u2559":{1:(f,o)=>`M1,.5 L${.5-f},.5 L${.5-f},0 M${.5+f},.5 L${.5+f},0`},"\u255A":{1:(f,o)=>`M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0 M1,${.5+o} L${.5-f},${.5+o} L${.5-f},0`},"\u255B":{1:(f,o)=>`M0,${.5+o} L.5,${.5+o} L.5,0 M0,${.5-o} L.5,${.5-o}`},"\u255C":{1:(f,o)=>`M0,.5 L${.5+f},.5 L${.5+f},0 M${.5-f},.5 L${.5-f},0`},"\u255D":{1:(f,o)=>`M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0 M0,${.5+o} L${.5+f},${.5+o} L${.5+f},0`},"\u255E":{1:(f,o)=>`M.5,0 L.5,1 M.5,${.5-o} L1,${.5-o} M.5,${.5+o} L1,${.5+o}`},"\u255F":{1:(f,o)=>`M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1 M${.5+f},.5 L1,.5`},"\u2560":{1:(f,o)=>`M${.5-f},0 L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1 M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0`},"\u2561":{1:(f,o)=>`M.5,0 L.5,1 M0,${.5-o} L.5,${.5-o} M0,${.5+o} L.5,${.5+o}`},"\u2562":{1:(f,o)=>`M0,.5 L${.5-f},.5 M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"\u2563":{1:(f,o)=>`M${.5+f},0 L${.5+f},1 M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0`},"\u2564":{1:(f,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o} M.5,${.5+o} L.5,1`},"\u2565":{1:(f,o)=>`M0,.5 L1,.5 M${.5-f},.5 L${.5-f},1 M${.5+f},.5 L${.5+f},1`},"\u2566":{1:(f,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1`},"\u2567":{1:(f,o)=>`M.5,0 L.5,${.5-o} M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u2568":{1:(f,o)=>`M0,.5 L1,.5 M${.5-f},.5 L${.5-f},0 M${.5+f},.5 L${.5+f},0`},"\u2569":{1:(f,o)=>`M0,${.5+o} L1,${.5+o} M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0 M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0`},"\u256A":{1:(f,o)=>`M.5,0 L.5,1 M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u256B":{1:(f,o)=>`M0,.5 L1,.5 M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"\u256C":{1:(f,o)=>`M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1 M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0 M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(f,o)=>`M.5,1 L.5,${.5+o/.15*.5} C.5,${.5+o/.15*.5},.5,.5,1,.5`},"\u256E":{1:(f,o)=>`M.5,1 L.5,${.5+o/.15*.5} C.5,${.5+o/.15*.5},.5,.5,0,.5`},"\u256F":{1:(f,o)=>`M.5,0 L.5,${.5-o/.15*.5} C.5,${.5-o/.15*.5},.5,.5,0,.5`},"\u2570":{1:(f,o)=>`M.5,0 L.5,${.5-o/.15*.5} C.5,${.5-o/.15*.5},.5,.5,1,.5`}},s.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},s.powerlineDefinitions["\uE0BB"]=s.powerlineDefinitions["\uE0BD"],s.powerlineDefinitions["\uE0BF"]=s.powerlineDefinitions["\uE0B9"],s.tryDrawCustomChar=function(f,o,h,_,m,y,C,E){let D=s.blockElementDefinitions[o];if(D)return function(w,T,M,S,F,x){for(let R=0;R<T.length;R++){let A=T[R],I=F/8,$=x/8;w.fillRect(M+A.x*I,S+A.y*$,A.w*I,A.h*$)}}(f,D,h,_,m,y),!0;let g=i[o];if(g)return function(w,T,M,S,F,x){let R=r.get(T);R||(R=new Map,r.set(T,R));let A=w.fillStyle;if(typeof A!="string")throw new Error(`Unexpected fillStyle type "${A}"`);let I=R.get(A);if(!I){let $=T[0].length,k=T.length,H=document.createElement("canvas");H.width=$,H.height=k;let U=(0,d.throwIfFalsy)(H.getContext("2d")),q=new ImageData($,k),N,K,O,B;if(A.startsWith("#"))N=parseInt(A.slice(1,3),16),K=parseInt(A.slice(3,5),16),O=parseInt(A.slice(5,7),16),B=A.length>7&&parseInt(A.slice(7,9),16)||1;else{if(!A.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${A}" when drawing pattern glyph`);[N,K,O,B]=A.substring(5,A.length-1).split(",").map(W=>parseFloat(W))}for(let W=0;W<k;W++)for(let P=0;P<$;P++)q.data[4*(W*$+P)]=N,q.data[4*(W*$+P)+1]=K,q.data[4*(W*$+P)+2]=O,q.data[4*(W*$+P)+3]=T[W][P]*(255*B);U.putImageData(q,0,0),I=(0,d.throwIfFalsy)(w.createPattern(H,null)),R.set(A,I)}w.fillStyle=I,w.fillRect(M,S,F,x)}(f,g,h,_,m,y),!0;let b=s.boxDrawingDefinitions[o];if(b)return function(w,T,M,S,F,x,R){w.strokeStyle=w.fillStyle;for(let[A,I]of Object.entries(T)){let $;w.beginPath(),w.lineWidth=R*Number.parseInt(A),$=typeof I=="function"?I(.15,.15/x*F):I;for(let k of $.split(" ")){let H=k[0],U=l[H];if(!U){console.error(`Could not find drawing instructions for "${H}"`);continue}let q=k.substring(1).split(",");q[0]&&q[1]&&U(w,p(q,F,x,M,S,!0,R))}w.stroke(),w.closePath()}}(f,b,h,_,m,y,E),!0;let L=s.powerlineDefinitions[o];return!!L&&(function(w,T,M,S,F,x,R,A){var I,$;let k=new Path2D;k.rect(M,S,F,x),w.clip(k),w.beginPath();let H=R/12;w.lineWidth=A*H;for(let U of T.d.split(" ")){let q=U[0],N=l[q];if(!N){console.error(`Could not find drawing instructions for "${q}"`);continue}let K=U.substring(1).split(",");K[0]&&K[1]&&N(w,p(K,F,x,M,S,!1,A,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(H/2),(($=T.rightPadding)!==null&&$!==void 0?$:0)*(H/2)))}T.type===1?(w.strokeStyle=w.fillStyle,w.stroke()):w.fill(),w.closePath()}(f,L,h,_,m,y,C,E),!0)};let r=new Map;function u(f,o,h=0){return Math.max(Math.min(f,o),h)}let l={C:(f,o)=>f.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]),L:(f,o)=>f.lineTo(o[0],o[1]),M:(f,o)=>f.moveTo(o[0],o[1])};function p(f,o,h,_,m,y,C,E=0,D=0){let g=f.map(b=>parseFloat(b)||parseInt(b));if(g.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<g.length;b+=2)g[b]*=o-E*C-D*C,y&&g[b]!==0&&(g[b]=u(Math.round(g[b]+.5)-.5,o,0)),g[b]+=_+E*C;for(let b=1;b<g.length;b+=2)g[b]*=h,y&&g[b]!==0&&(g[b]=u(Math.round(g[b]+.5)-.5,h,0)),g[b]+=m;return g}},56:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.observeDevicePixelDimensions=void 0;let d=a(859);s.observeDevicePixelDimensions=function(i,r,u){let l=new r.ResizeObserver(p=>{let f=p.find(_=>_.target===i);if(!f)return;if(!("devicePixelContentBoxSize"in f))return l?.disconnect(),void(l=void 0);let o=f.devicePixelContentBoxSize[0].inlineSize,h=f.devicePixelContentBoxSize[0].blockSize;o>0&&h>0&&u(o,h)});try{l.observe(i,{box:["device-pixel-content-box"]})}catch{l.disconnect(),l=void 0}return(0,d.toDisposable)(()=>l?.disconnect())}},374:(v,s)=>{function a(d){return 57508<=d&&d<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},s.excludeFromContrastRatioDemands=function(d){return a(d)||function(i){return 9472<=i&&i<=9631}(d)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(i,r,u,l=!1){if(this.selectionStart=r,this.selectionEnd=u,!r||!u||r[0]===u[0]&&r[1]===u[1])return void this.clear();let p=r[1]-i.buffer.active.viewportY,f=u[1]-i.buffer.active.viewportY,o=Math.max(p,0),h=Math.min(f,i.rows-1);o>=i.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=l,this.viewportStartRow=p,this.viewportEndRow=f,this.viewportCappedStartRow=o,this.viewportCappedEndRow=h,this.startCol=r[0],this.endCol=u[0])}isCellSelected(i,r,u){return!!this.hasSelection&&(u-=i.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?r>=this.startCol&&u>=this.viewportCappedStartRow&&r<this.endCol&&u<=this.viewportCappedEndRow:r<this.startCol&&u>=this.viewportCappedStartRow&&r>=this.endCol&&u<=this.viewportCappedEndRow:u>this.viewportStartRow&&u<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&u===this.viewportStartRow&&r>=this.startCol&&r<this.endCol||this.viewportStartRow<this.viewportEndRow&&u===this.viewportEndRow&&r<this.endCol||this.viewportStartRow<this.viewportEndRow&&u===this.viewportStartRow&&r>=this.startCol)}}s.createSelectionRenderModel=function(){return new a}},509:function(v,s,a){var d=this&&this.__decorate||function(L,w,T,M){var S,F=arguments.length,x=F<3?w:M===null?M=Object.getOwnPropertyDescriptor(w,T):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(L,w,T,M);else for(var R=L.length-1;R>=0;R--)(S=L[R])&&(x=(F<3?S(x):F>3?S(w,T,x):S(w,T))||x);return F>3&&x&&Object.defineProperty(w,T,x),x};Object.defineProperty(s,"__esModule",{value:!0}),s.TextureAtlas=void 0;let i=a(237),r=a(860),u=a(374),l=a(160),p=a(345),f=a(485),o=a(385),h=a(147),_=a(855),m=a(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class E{get pages(){return this._pages}constructor(w,T,M){this._document=w,this._config=T,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new f.FourKeyMap,this._cacheMapCombined=new f.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new h.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new p.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new p.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=b(w,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,u.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let w of this.pages)w.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let w=new o.IdleTaskQueue;for(let T=33;T<126;T++)w.enqueue(()=>{if(!this._cacheMap.get(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT)){let M=this._drawToCache(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT);this._cacheMap.set(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let w of this._pages)w.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(E.maxAtlasPages&&this._pages.length>=Math.max(4,E.maxAtlasPages)){let T=this._pages.filter(I=>2*I.canvas.width<=(E.maxTextureSize||4096)).sort((I,$)=>$.canvas.width!==I.canvas.width?$.canvas.width-I.canvas.width:$.percentageUsed-I.percentageUsed),M=-1,S=0;for(let I=0;I<T.length;I++)if(T[I].canvas.width!==S)M=I,S=T[I].canvas.width;else if(I-M==3)break;let F=T.slice(M,M+4),x=F.map(I=>I.glyphs[0].texturePage).sort((I,$)=>I>$?1:-1),R=this.pages.length-F.length,A=this._mergePages(F,R);A.version++;for(let I=x.length-1;I>=0;I--)this._deletePage(x[I]);this.pages.push(A),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(A.canvas)}let w=new D(this._document,this._textureSize);return this._pages.push(w),this._activePages.push(w),this._onAddTextureAtlasCanvas.fire(w.canvas),w}_mergePages(w,T){let M=2*w[0].canvas.width,S=new D(this._document,M,w);for(let[F,x]of w.entries()){let R=F*x.canvas.width%M,A=Math.floor(F/2)*x.canvas.height;S.ctx.drawImage(x.canvas,R,A);for(let $ of x.glyphs)$.texturePage=T,$.sizeClipSpace.x=$.size.x/M,$.sizeClipSpace.y=$.size.y/M,$.texturePosition.x+=R,$.texturePosition.y+=A,$.texturePositionClipSpace.x=$.texturePosition.x/M,$.texturePositionClipSpace.y=$.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(x.canvas);let I=this._activePages.indexOf(x);I!==-1&&this._activePages.splice(I,1)}return S}_deletePage(w){this._pages.splice(w,1);for(let T=w;T<this._pages.length;T++){let M=this._pages[T];for(let S of M.glyphs)S.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(w,T,M,S,F){return this._getFromCacheMap(this._cacheMapCombined,w,T,M,S,F)}getRasterizedGlyph(w,T,M,S,F){return this._getFromCacheMap(this._cacheMap,w,T,M,S,F)}_getFromCacheMap(w,T,M,S,F,x=!1){return C=w.get(T,M,S,F),C||(C=this._drawToCache(T,M,S,F,x),w.set(T,M,S,F,C)),C}_getColorFromAnsiIndex(w){if(w>=this._config.colors.ansi.length)throw new Error("No color found for idx "+w);return this._config.colors.ansi[w]}_getBackgroundColor(w,T,M,S){if(this._config.allowTransparency)return l.NULL_COLOR;let F;switch(w){case 16777216:case 33554432:F=this._getColorFromAnsiIndex(T);break;case 50331648:let x=h.AttributeData.toColorRGB(T);F=l.rgba.toColor(x[0],x[1],x[2]);break;default:F=M?l.color.opaque(this._config.colors.foreground):this._config.colors.background}return F}_getForegroundColor(w,T,M,S,F,x,R,A,I,$){let k=this._getMinimumContrastColor(w,T,M,S,F,x,!1,I,A,$);if(k)return k;let H;switch(F){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&x<8&&(x+=8),H=this._getColorFromAnsiIndex(x);break;case 50331648:let U=h.AttributeData.toColorRGB(x);H=l.rgba.toColor(U[0],U[1],U[2]);break;default:H=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(H=l.color.opaque(H)),A&&(H=l.color.multiplyOpacity(H,i.DIM_OPACITY)),H}_resolveBackgroundRgba(w,T,M){switch(w){case 16777216:case 33554432:return this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(w,T,M,S){switch(w){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&S&&T<8&&(T+=8),this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(w,T,M,S,F,x,R,A,I,$){if(this._config.minimumContrastRatio===1||$)return;let k=this._getContrastCache(I),H=k.getColor(w,S);if(H!==void 0)return H||void 0;let U=this._resolveBackgroundRgba(T,M,R),q=this._resolveForegroundRgba(F,x,R,A),N=l.rgba.ensureContrastRatio(U,q,this._config.minimumContrastRatio/(I?2:1));if(!N)return void k.setColor(w,S,null);let K=l.rgba.toColor(N>>24&255,N>>16&255,N>>8&255);return k.setColor(w,S,K),K}_getContrastCache(w){return w?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(w,T,M,S,F=!1){let x=typeof w=="number"?String.fromCharCode(w):w,R=Math.min(this._config.deviceCellWidth*Math.max(x.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);let A=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<A&&(this._tmpCanvas.height=A),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=T,this._workAttributeData.extended.ext=S,this._workAttributeData.isInvisible())return y;let I=!!this._workAttributeData.isBold(),$=!!this._workAttributeData.isInverse(),k=!!this._workAttributeData.isDim(),H=!!this._workAttributeData.isItalic(),U=!!this._workAttributeData.isUnderline(),q=!!this._workAttributeData.isStrikethrough(),N=!!this._workAttributeData.isOverline(),K=this._workAttributeData.getFgColor(),O=this._workAttributeData.getFgColorMode(),B=this._workAttributeData.getBgColor(),W=this._workAttributeData.getBgColorMode();if($){let oe=K;K=B,B=oe;let j=O;O=W,W=j}let P=this._getBackgroundColor(W,B,$,k);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let X=I?this._config.fontWeightBold:this._config.fontWeight,J=H?"italic":"";this._tmpCtx.font=`${J} ${X} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=i.TEXT_BASELINE;let ve=x.length===1&&(0,u.isPowerlineGlyph)(x.charCodeAt(0)),Ee=x.length===1&&(0,u.isRestrictedPowerlineGlyph)(x.charCodeAt(0)),De=this._getForegroundColor(T,W,B,M,O,K,$,k,I,(0,u.excludeFromContrastRatioDemands)(x.charCodeAt(0)));this._tmpCtx.fillStyle=De.css;let se=Ee?0:4,we=!1;this._config.customGlyphs!==!1&&(we=(0,r.tryDrawCustomChar)(this._tmpCtx,x,se,se,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let wt,Jt=!ve;if(wt=typeof w=="number"?this._unicodeService.wcwidth(w):this._unicodeService.getStringCellWidth(w),U){this._tmpCtx.save();let oe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=oe%2==1?.5:0;if(this._tmpCtx.lineWidth=oe,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Jt=!1,this._tmpCtx.strokeStyle=`rgb(${h.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Jt=!1;let ct=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&ct<8&&(ct+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(ct).css}this._tmpCtx.beginPath();let ae=se,de=Math.ceil(se+this._config.deviceCharHeight)-j-(F?2*oe:0),Be=de+oe,tt=de+2*oe;for(let ct=0;ct<wt;ct++){this._tmpCtx.save();let Ge=ae+ct*this._config.deviceCellWidth,St=ae+(ct+1)*this._config.deviceCellWidth,zt=Ge+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ge,de),this._tmpCtx.lineTo(St,de),this._tmpCtx.moveTo(Ge,tt),this._tmpCtx.lineTo(St,tt);break;case 3:let Et=oe<=1?tt:Math.ceil(se+this._config.deviceCharHeight-oe/2)-j,Fn=oe<=1?de:Math.ceil(se+this._config.deviceCharHeight+oe/2)-j,hi=new Path2D;hi.rect(Ge,de,this._config.deviceCellWidth,tt-de),this._tmpCtx.clip(hi),this._tmpCtx.moveTo(Ge-this._config.deviceCellWidth/2,Be),this._tmpCtx.bezierCurveTo(Ge-this._config.deviceCellWidth/2,Fn,Ge,Fn,Ge,Be),this._tmpCtx.bezierCurveTo(Ge,Et,zt,Et,zt,Be),this._tmpCtx.bezierCurveTo(zt,Fn,St,Fn,St,Be),this._tmpCtx.bezierCurveTo(St,Et,St+this._config.deviceCellWidth/2,Et,St+this._config.deviceCellWidth/2,Be);break;case 4:this._tmpCtx.setLineDash([Math.round(oe),Math.round(oe)]),this._tmpCtx.moveTo(Ge,de),this._tmpCtx.lineTo(St,de);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ge,de),this._tmpCtx.lineTo(St,de);break;default:this._tmpCtx.moveTo(Ge,de),this._tmpCtx.lineTo(St,de)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!we&&this._config.fontSize>=12&&!this._config.allowTransparency&&x!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let ct=this._tmpCtx.measureText(x);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in ct&&ct.actualBoundingBoxDescent>0){this._tmpCtx.save();let Ge=new Path2D;Ge.rect(ae,de-Math.ceil(oe/2),this._config.deviceCellWidth*wt,tt-de+Math.ceil(oe/2)),this._tmpCtx.clip(Ge),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=P.css,this._tmpCtx.strokeText(x,se,se+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(N){let oe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=oe%2==1?.5:0;this._tmpCtx.lineWidth=oe,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(se,se+j),this._tmpCtx.lineTo(se+this._config.deviceCharWidth*wt,se+j),this._tmpCtx.stroke()}if(we||this._tmpCtx.fillText(x,se,se+this._config.deviceCharHeight),x==="_"&&!this._config.allowTransparency){let oe=g(this._tmpCtx.getImageData(se,se,this._config.deviceCellWidth,this._config.deviceCellHeight),P,De,Jt);if(oe)for(let j=1;j<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(x,se,se+this._config.deviceCharHeight-j),oe=g(this._tmpCtx.getImageData(se,se,this._config.deviceCellWidth,this._config.deviceCellHeight),P,De,Jt),oe);j++);}if(q){let oe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),j=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=oe,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(se,se+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.lineTo(se+this._config.deviceCharWidth*wt,se+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.stroke()}this._tmpCtx.restore();let Wt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),Ze;if(Ze=this._config.allowTransparency?function(oe){for(let j=0;j<oe.data.length;j+=4)if(oe.data[j+3]>0)return!1;return!0}(Wt):g(Wt,P,De,Jt),Ze)return y;let ce=this._findGlyphBoundingBox(Wt,this._workBoundingBox,R,Ee,we,se),he,le;for(;;){if(this._activePages.length===0){let oe=this._createNewPage();he=oe,le=oe.currentRow,le.height=ce.size.y;break}he=this._activePages[this._activePages.length-1],le=he.currentRow;for(let oe of this._activePages)ce.size.y<=oe.currentRow.height&&(he=oe,le=oe.currentRow);for(let oe=this._activePages.length-1;oe>=0;oe--)for(let j of this._activePages[oe].fixedRows)j.height<=le.height&&ce.size.y<=j.height&&(he=this._activePages[oe],le=j);if(le.y+ce.size.y>=he.canvas.height||le.height>ce.size.y+2){let oe=!1;if(he.currentRow.y+he.currentRow.height+ce.size.y>=he.canvas.height){let j;for(let ae of this._activePages)if(ae.currentRow.y+ae.currentRow.height+ce.size.y<ae.canvas.height){j=ae;break}if(j)he=j;else if(E.maxAtlasPages&&this._pages.length>=E.maxAtlasPages&&le.y+ce.size.y<=he.canvas.height&&le.height>=ce.size.y&&le.x+ce.size.x<=he.canvas.width)oe=!0;else{let ae=this._createNewPage();he=ae,le=ae.currentRow,le.height=ce.size.y,oe=!0}}oe||(he.currentRow.height>0&&he.fixedRows.push(he.currentRow),le={x:0,y:he.currentRow.y+he.currentRow.height,height:ce.size.y},he.fixedRows.push(le),he.currentRow={x:0,y:le.y+le.height,height:0})}if(le.x+ce.size.x<=he.canvas.width)break;le===he.currentRow?(le.x=0,le.y+=le.height,le.height=0):he.fixedRows.splice(he.fixedRows.indexOf(le),1)}return ce.texturePage=this._pages.indexOf(he),ce.texturePosition.x=le.x,ce.texturePosition.y=le.y,ce.texturePositionClipSpace.x=le.x/he.canvas.width,ce.texturePositionClipSpace.y=le.y/he.canvas.height,ce.sizeClipSpace.x/=he.canvas.width,ce.sizeClipSpace.y/=he.canvas.height,le.height=Math.max(le.height,ce.size.y),le.x+=ce.size.x,he.ctx.putImageData(Wt,ce.texturePosition.x-this._workBoundingBox.left,ce.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ce.size.x,ce.size.y),he.addGlyph(ce),he.version++,ce}_findGlyphBoundingBox(w,T,M,S,F,x){T.top=0;let R=S?this._config.deviceCellHeight:this._tmpCanvas.height,A=S?this._config.deviceCellWidth:M,I=!1;for(let $=0;$<R;$++){for(let k=0;k<A;k++){let H=$*this._tmpCanvas.width*4+4*k+3;if(w.data[H]!==0){T.top=$,I=!0;break}}if(I)break}T.left=0,I=!1;for(let $=0;$<x+A;$++){for(let k=0;k<R;k++){let H=k*this._tmpCanvas.width*4+4*$+3;if(w.data[H]!==0){T.left=$,I=!0;break}}if(I)break}T.right=A,I=!1;for(let $=x+A-1;$>=x;$--){for(let k=0;k<R;k++){let H=k*this._tmpCanvas.width*4+4*$+3;if(w.data[H]!==0){T.right=$,I=!0;break}}if(I)break}T.bottom=R,I=!1;for(let $=R-1;$>=0;$--){for(let k=0;k<A;k++){let H=$*this._tmpCanvas.width*4+4*k+3;if(w.data[H]!==0){T.bottom=$,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:T.right-T.left+1,y:T.bottom-T.top+1},sizeClipSpace:{x:T.right-T.left+1,y:T.bottom-T.top+1},offset:{x:-T.left+x+(S||F?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-T.top+x+(S||F?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}s.TextureAtlas=E,d([m.traceCall],E.prototype,"_drawToCache",null);class D{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(w){this._glyphs.push(w),this._usedPixels+=w.size.x*w.size.y}constructor(w,T,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let S of M)this._glyphs.push(...S.glyphs),this._usedPixels+=S._usedPixels;this.canvas=b(w,T,T),this.ctx=(0,u.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(L,w,T,M){let S=w.rgba>>>24,F=w.rgba>>>16&255,x=w.rgba>>>8&255,R=T.rgba>>>24,A=T.rgba>>>16&255,I=T.rgba>>>8&255,$=Math.floor((Math.abs(S-R)+Math.abs(F-A)+Math.abs(x-I))/12),k=!0;for(let H=0;H<L.data.length;H+=4)L.data[H]===S&&L.data[H+1]===F&&L.data[H+2]===x||M&&Math.abs(L.data[H]-S)+Math.abs(L.data[H+1]-F)+Math.abs(L.data[H+2]-x)<$?L.data[H+3]=0:k=!1;return k}function b(L,w,T){let M=L.createElement("canvas");return M.width=w,M.height=T,M}},160:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let d=a(399),i=0,r=0,u=0,l=0;var p,f,o,h,_;function m(C){let E=C.toString(16);return E.length<2?"0"+E:E}function y(C,E){return C<E?(E+.05)/(C+.05):(C+.05)/(E+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(E,D,g,b){return b!==void 0?`#${m(E)}${m(D)}${m(g)}${m(b)}`:`#${m(E)}${m(D)}${m(g)}`},C.toRgba=function(E,D,g,b=255){return(E<<24|D<<16|g<<8|b)>>>0}}(p||(s.channels=p={})),function(C){function E(D,g){return l=Math.round(255*g),[i,r,u]=_.toChannels(D.rgba),{css:p.toCss(i,r,u,l),rgba:p.toRgba(i,r,u,l)}}C.blend=function(D,g){if(l=(255&g.rgba)/255,l===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,L=g.rgba>>16&255,w=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,S=D.rgba>>8&255;return i=T+Math.round((b-T)*l),r=M+Math.round((L-M)*l),u=S+Math.round((w-S)*l),{css:p.toCss(i,r,u),rgba:p.toRgba(i,r,u)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let L=_.ensureContrastRatio(D.rgba,g.rgba,b);if(L)return _.toColor(L>>24&255,L>>16&255,L>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[i,r,u]=_.toChannels(g),{css:p.toCss(i,r,u),rgba:g}},C.opacity=E,C.multiplyOpacity=function(D,g){return l=255&D.rgba,E(D,l*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(f||(s.color=f={})),function(C){let E,D;if(!d.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(E=b,E.globalCompositeOperation="copy",D=E.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),_.toColor(i,r,u);case 5:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),l=parseInt(g.slice(4,5).repeat(2),16),_.toColor(i,r,u,l);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return i=parseInt(b[1]),r=parseInt(b[2]),u=parseInt(b[3]),l=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),_.toColor(i,r,u,l);if(!E||!D)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=D,E.fillStyle=g,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[i,r,u,l]=E.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(i,r,u,l),css:g}}}(o||(s.css=o={})),function(C){function E(D,g,b){let L=D/255,w=g/255,T=b/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return E(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=E}(h||(s.rgb=h={})),function(C){function E(g,b,L){let w=g>>24&255,T=g>>16&255,M=g>>8&255,S=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(S,F,x),h.relativeLuminance2(w,T,M));for(;R<L&&(S>0||F>0||x>0);)S-=Math.max(0,Math.ceil(.1*S)),F-=Math.max(0,Math.ceil(.1*F)),x-=Math.max(0,Math.ceil(.1*x)),R=y(h.relativeLuminance2(S,F,x),h.relativeLuminance2(w,T,M));return(S<<24|F<<16|x<<8|255)>>>0}function D(g,b,L){let w=g>>24&255,T=g>>16&255,M=g>>8&255,S=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(S,F,x),h.relativeLuminance2(w,T,M));for(;R<L&&(S<255||F<255||x<255);)S=Math.min(255,S+Math.ceil(.1*(255-S))),F=Math.min(255,F+Math.ceil(.1*(255-F))),x=Math.min(255,x+Math.ceil(.1*(255-x))),R=y(h.relativeLuminance2(S,F,x),h.relativeLuminance2(w,T,M));return(S<<24|F<<16|x<<8|255)>>>0}C.ensureContrastRatio=function(g,b,L){let w=h.relativeLuminance(g>>8),T=h.relativeLuminance(b>>8);if(y(w,T)<L){if(T<w){let F=E(g,b,L),x=y(w,h.relativeLuminance(F>>8));if(x<L){let R=D(g,b,L);return x>y(w,h.relativeLuminance(R>>8))?F:R}return F}let M=D(g,b,L),S=y(w,h.relativeLuminance(M>>8));if(S<L){let F=E(g,b,L);return S>y(w,h.relativeLuminance(F>>8))?M:F}return M}},C.reduceLuminance=E,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,L,w){return{css:p.toCss(g,b,L,w),rgba:p.toRgba(g,b,L,w)}}}(_||(s.rgba=_={})),s.toPaddedHex=m,s.contrastRatio=y},345:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===a)return void this._listeners.splice(d,1)}}})),this._event}fire(a,d){let i=[];for(let r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(let r=0;r<i.length;r++)i[r].call(void 0,a,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,d){return a(i=>d.fire(i))}},859:(v,s)=>{function a(d){for(let i of d)i.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){let i=this._disposables.indexOf(d);i!==-1&&this._disposables.splice(i,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var i;this._isDisposed||d===this._value||((i=this._value)===null||i===void 0||i.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=a,s.getDisposeArrayDisposable=function(d){return{dispose:()=>a(d)}}},485:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(i,r,u){this._data[i]||(this._data[i]={}),this._data[i][r]=u}get(i,r){return this._data[i]?this._data[i][r]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(d,i,r,u,l){this._data.get(d,i)||this._data.set(d,i,new a),this._data.get(d,i).set(r,u,l)}get(d,i,r,u){var l;return(l=this._data.get(d,i))===null||l===void 0?void 0:l.get(r,u)}clear(){this._data.clear()}}},399:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";let a=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;let i=a.match(/Version\/(\d+)/);return i===null||i.length<2?0:parseInt(i[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},385:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let d=a(399);class i{constructor(){this._tasks=[],this._i=0}enqueue(l){this._tasks.push(l),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(l){this._idleCallback=void 0;let p=0,f=0,o=l.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),f=Math.max(p,f),h=l.timeRemaining(),1.5*f>h)return o-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-p))}ms`),void this._start();o=h}this.clear()}}class r extends i{_requestCallback(l){return setTimeout(()=>l(this._createDeadline(16)))}_cancelCallback(l){clearTimeout(l)}_createDeadline(l){let p=Date.now()+l;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}s.PriorityTaskQueue=r,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends i{_requestCallback(u){return requestIdleCallback(u)}_cancelCallback(u){cancelIdleCallback(u)}}:r,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(u){this._queue.clear(),this._queue.enqueue(u)}flush(){this._queue.flush()}}},147:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(r){return[r>>>16&255,r>>>8&255,255&r]}static fromColorRGB(r){return(255&r[0])<<16|(255&r[1])<<8|255&r[2]}clone(){let r=new a;return r.fg=this.fg,r.bg=this.bg,r.extended=this.extended.clone(),r}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(r){this._ext=r}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(r){this._ext&=-469762049,this._ext|=r<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(r){this._ext&=-67108864,this._ext|=67108863&r}get urlId(){return this._urlId}set urlId(r){this._urlId=r}constructor(r=0,u=0){this._ext=0,this._urlId=0,this._ext=r,this._urlId=u}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},782:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let d=a(133),i=a(855),r=a(147);class u extends r.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new r.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let f=new u;return f.setFromCharData(p),f}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[i.CHAR_DATA_ATTR_INDEX],this.bg=0;let f=!1;if(p[i.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(p[i.CHAR_DATA_CHAR_INDEX].length===2){let o=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){let h=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(o-55296)+h-56320+65536|p[i.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[i.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=p[i.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[i.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=u},855:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},133:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,d=0,i=a.length){let r="";for(let u=d;u<i;++u){let l=a[u];l>65535?(l-=65536,r+=String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):r+=String.fromCharCode(l)}return r},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,d){let i=a.length;if(!i)return 0;let r=0,u=0;if(this._interim){let l=a.charCodeAt(u++);56320<=l&&l<=57343?d[r++]=1024*(this._interim-55296)+l-56320+65536:(d[r++]=this._interim,d[r++]=l),this._interim=0}for(let l=u;l<i;++l){let p=a.charCodeAt(l);if(55296<=p&&p<=56319){if(++l>=i)return this._interim=p,r;let f=a.charCodeAt(l);56320<=f&&f<=57343?d[r++]=1024*(p-55296)+f-56320+65536:(d[r++]=p,d[r++]=f)}else p!==65279&&(d[r++]=p)}return r}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,d){let i=a.length;if(!i)return 0;let r,u,l,p,f=0,o=0,h=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let E,D=0;for(;(E=63&this.interim[++D])&&D<4;)C<<=6,C|=E;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;h<b;){if(h>=i)return 0;if(E=a[h++],(192&E)!=128){h--,y=!0;break}this.interim[D++]=E,C<<=6,C|=63&E}y||(g===2?C<128?h--:d[f++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(d[f++]=C):C<65536||C>1114111||(d[f++]=C)),this.interim.fill(0)}let _=i-4,m=h;for(;m<i;){for(;!(!(m<_)||128&(r=a[m])||128&(u=a[m+1])||128&(l=a[m+2])||128&(p=a[m+3]));)d[f++]=r,d[f++]=u,d[f++]=l,d[f++]=p,m+=4;if(r=a[m++],r<128)d[f++]=r;else if((224&r)==192){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(o=(31&r)<<6|63&u,o<128){m--;continue}d[f++]=o}else if((240&r)==224){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,f;if(l=a[m++],(192&l)!=128){m--;continue}if(o=(15&r)<<12|(63&u)<<6|63&l,o<2048||o>=55296&&o<=57343||o===65279)continue;d[f++]=o}else if((248&r)==240){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,f;if(l=a[m++],(192&l)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,this.interim[2]=l,f;if(p=a[m++],(192&p)!=128){m--;continue}if(o=(7&r)<<18|(63&u)<<12|(63&l)<<6|63&p,o<65536||o>1114111)continue;d[f++]=o}}return f}}},776:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let r=a(859),u=a(97),l={trace:u.LogLevelEnum.TRACE,debug:u.LogLevelEnum.DEBUG,info:u.LogLevelEnum.INFO,warn:u.LogLevelEnum.WARN,error:u.LogLevelEnum.ERROR,off:u.LogLevelEnum.OFF},p,f=s.LogService=class extends r.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=u.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=l[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let h=0;h<o.length;h++)typeof o[h]=="function"&&(o[h]=o[h]())}_log(o,h,_){this._evalLazyOptionalParams(_),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,..._)}trace(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.TRACE&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}debug(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.DEBUG&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}info(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.INFO&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,o,h)}warn(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.WARN&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,o,h)}error(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.ERROR&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,o,h)}};s.LogService=f=d([i(0,u.IOptionsService)],f),s.setTraceLogger=function(o){p=o},s.traceCall=function(o,h,_){if(typeof _.value!="function")throw new Error("not supported");let m=_.value;_.value=function(...y){if(p.logLevel!==u.LogLevelEnum.TRACE)return m.apply(this,y);p.trace(`GlyphRenderer#${m.name}(${y.map(E=>JSON.stringify(E)).join(", ")})`);let C=m.apply(this,y);return p.trace(`GlyphRenderer#${m.name} return`,C),C}}},726:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let a="di$target",d="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(i){return i[d]||[]},s.createDecorator=function(i){if(s.serviceRegistry.has(i))return s.serviceRegistry.get(i);let r=function(u,l,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(f,o,h){o[a]===o?o[d].push({id:f,index:h}):(o[d]=[{id:f,index:h}],o[a]=o)})(r,u,p)};return r.toString=()=>i,s.serviceRegistry.set(i,r),r}},97:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let d=a(726);var i;s.IBufferService=(0,d.createDecorator)("BufferService"),s.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),s.ICoreService=(0,d.createDecorator)("CoreService"),s.ICharsetService=(0,d.createDecorator)("CharsetService"),s.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(r){r[r.TRACE=0]="TRACE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.OFF=5]="OFF"}(i||(s.LogLevelEnum=i={})),s.ILogService=(0,d.createDecorator)("LogService"),s.IOptionsService=(0,d.createDecorator)("OptionsService"),s.IOscLinkService=(0,d.createDecorator)("OscLinkService"),s.IUnicodeService=(0,d.createDecorator)("UnicodeService"),s.IDecorationService=(0,d.createDecorator)("DecorationService")}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v].call(a.exports,a,a.exports,n),a.exports}var c={};return(()=>{var v=c;Object.defineProperty(v,"__esModule",{value:!0}),v.WebglAddon=void 0;let s=n(345),a=n(859),d=n(399),i=n(666),r=n(776);class u extends a.Disposable{constructor(p){if(d.isSafari&&(0,d.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=p,this._onChangeTextureAtlas=this.register(new s.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new s.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new s.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new s.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(p){let f=p._core;if(!p.element)return void this.register(f.onWillOpen(()=>this.activate(p)));this._terminal=p;let o=f.coreService,h=f.optionsService,_=f,m=_._renderService,y=_._characterJoinerService,C=_._charSizeService,E=_._coreBrowserService,D=_._decorationService,g=_._logService,b=_._themeService;(0,r.setTraceLogger)(g),this._renderer=this.register(new i.WebglRenderer(p,y,C,E,o,D,h,b,this._preserveDrawingBuffer)),this.register((0,s.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,s.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,s.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,s.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),m.setRenderer(this._renderer),this.register((0,a.toDisposable)(()=>{let L=this._terminal._core._renderService;L.setRenderer(this._terminal._core._createRenderer()),L.handleResize(p.cols,p.rows)}))}get textureAtlas(){var p;return(p=this._renderer)===null||p===void 0?void 0:p.textureAtlas}clearTextureAtlas(){var p;(p=this._renderer)===null||p===void 0||p.clearTextureAtlas()}}v.WebglAddon=u})(),c})())});var Sk=_t((Pv,Vw)=>{(function(e,t){typeof Pv=="object"&&typeof Vw=="object"?Vw.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Pv=="object"?Pv.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkComputer=s.WebLinkProvider=void 0,s.WebLinkProvider=class{constructor(d,i,r,u={}){this._terminal=d,this._regex=i,this._handler=r,this._options=u}provideLinks(d,i){let r=a.computeLink(d,this._regex,this._terminal,this._handler);i(this._addCallbacks(r))}_addCallbacks(d){return d.map(i=>(i.leave=this._options.leave,i.hover=(r,u)=>{if(this._options.hover){let{range:l}=i;this._options.hover(r,u,l)}},i))}};class a{static computeLink(i,r,u,l){let p=new RegExp(r.source,(r.flags||"")+"g"),[f,o]=a._getWindowedLineStrings(i-1,u),h=f.join(""),_,m=[];for(;_=p.exec(h);){let y=_[0];try{let L=new URL(y),w=decodeURI(L.toString());if(y!==w&&y+"/"!==w)continue}catch{continue}let[C,E]=a._mapStrIdx(u,o,0,_.index),[D,g]=a._mapStrIdx(u,C,E,y.length);if(C===-1||E===-1||D===-1||g===-1)continue;let b={start:{x:E+1,y:C+1},end:{x:g,y:D+1}};m.push({range:b,text:y,activate:l})}return m}static _getWindowedLineStrings(i,r){let u,l=i,p=i,f=0,o="",h=[];if(u=r.buffer.active.getLine(i)){let _=u.translateToString(!0);if(u.isWrapped&&_[0]!==" "){for(f=0;(u=r.buffer.active.getLine(--l))&&f<2048&&(o=u.translateToString(!0),f+=o.length,h.push(o),u.isWrapped&&o.indexOf(" ")===-1););h.reverse()}for(h.push(_),f=0;(u=r.buffer.active.getLine(++p))&&u.isWrapped&&f<2048&&(o=u.translateToString(!0),f+=o.length,h.push(o),o.indexOf(" ")===-1););}return[h,l]}static _mapStrIdx(i,r,u,l){let p=i.buffer.active,f=p.getNullCell(),o=u;for(;l;){let h=p.getLine(r);if(!h)return[-1,-1];for(let _=o;_<h.length;++_){h.getCell(_,f);let m=f.getChars();if(f.getWidth()&&(l-=m.length||1,_===h.length-1&&m==="")){let y=p.getLine(r+1);y&&y.isWrapped&&(y.getCell(0,f),f.getWidth()===2&&(l+=1))}if(l<0)return[r,_]}r++,o=0}return[r,o]}}s.LinkComputer=a}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v](a,a.exports,n),a.exports}var c={};return(()=>{var v=c;Object.defineProperty(v,"__esModule",{value:!0}),v.WebLinksAddon=void 0;let s=n(6),a=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function d(i,r){let u=window.open();if(u){try{u.opener=null}catch{}u.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}v.WebLinksAddon=class{constructor(i=d,r={}){this._handler=i,this._options=r}activate(i){this._terminal=i;let r=this._options,u=r.urlRegex||a;this._linkProvider=this._terminal.registerLinkProvider(new s.WebLinkProvider(this._terminal,u,this._handler,r))}dispose(){var i;(i=this._linkProvider)===null||i===void 0||i.dispose()}}})(),c})())});var Ak=_t((Wv,Kw)=>{(function(e,t){if(typeof Wv=="object"&&typeof Kw=="object")Kw.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var c in n)(typeof Wv=="object"?Wv:e)[c]=n[c]}})(self,()=>(()=>{"use strict";var e={4567:function(v,s,a){var d=this&&this.__decorate||function(m,y,C,E){var D,g=arguments.length,b=g<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,C):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(m,y,C,E);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},i=this&&this.__param||function(m,y){return function(C,E){y(C,E,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;let r=a(9042),u=a(6114),l=a(9924),p=a(844),f=a(5596),o=a(4725),h=a(3656),_=s.AccessibilityManager=class extends p.Disposable{constructor(m,y){super(),this._terminal=m,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new l.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new f.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,h.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,p.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(m){for(let y=0;y<m;y++)this._handleChar(" ")}_handleChar(m){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==m&&(this._charsToAnnounce+=m):this._charsToAnnounce+=m,m===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=r.tooMuchOutput)),u.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,u.isMac&&this._liveRegion.remove()}_handleKey(m){this._clearLiveRegion(),/\p{Control}/u.test(m)||this._charsToConsume.push(m)}_refreshRows(m,y){this._liveRegionDebouncer.refresh(m,y,this._terminal.rows)}_renderRows(m,y){let C=this._terminal.buffer,E=C.lines.length.toString();for(let D=m;D<=y;D++){let g=C.translateBufferLineToString(C.ydisp+D,!0),b=(C.ydisp+D+1).toString(),L=this._rowElements[D];L&&(g.length===0?L.innerText="\xA0":L.textContent=g,L.setAttribute("aria-posinset",b),L.setAttribute("aria-setsize",E))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(m,y){let C=m.target,E=this._rowElements[y===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||m.relatedTarget!==E)return;let D,g;if(y===0?(D=C,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=C,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){let b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{let b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),m.preventDefault(),m.stopImmediatePropagation()}_handleResize(m){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>m;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let m=document.createElement("div");return m.setAttribute("role","listitem"),m.tabIndex=-1,this._refreshRowDimensions(m),m}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let m=0;m<this._terminal.rows;m++)this._refreshRowDimensions(this._rowElements[m])}}_refreshRowDimensions(m){m.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=_=d([i(1,o.IRenderService)],_)},3614:(v,s)=>{function a(u){return u.replace(/\r?\n/g,"\r")}function d(u,l){return l?"\x1B[200~"+u+"\x1B[201~":u}function i(u,l,p,f){u=d(u=a(u),p.decPrivateModes.bracketedPasteMode&&f.rawOptions.ignoreBracketedPasteMode!==!0),p.triggerDataEvent(u,!0),l.value=""}function r(u,l,p){let f=p.getBoundingClientRect(),o=u.clientX-f.left-10,h=u.clientY-f.top-10;l.style.width="20px",l.style.height="20px",l.style.left=`${o}px`,l.style.top=`${h}px`,l.style.zIndex="1000",l.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=a,s.bracketTextForPaste=d,s.copyHandler=function(u,l){u.clipboardData&&u.clipboardData.setData("text/plain",l.selectionText),u.preventDefault()},s.handlePasteEvent=function(u,l,p,f){u.stopPropagation(),u.clipboardData&&i(u.clipboardData.getData("text/plain"),l,p,f)},s.paste=i,s.moveTextAreaUnderMouseCursor=r,s.rightClickHandler=function(u,l,p,f,o){r(u,l,p),o&&f.rightClickSelect(u),l.value=f.selectionText,l.select()}},7239:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;let d=a(1505);s.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(i,r,u){this._css.set(i,r,u)}getCss(i,r){return this._css.get(i,r)}setColor(i,r,u){this._color.set(i,r,u)}getColor(i,r){return this._color.get(i,r)}clear(){this._color.clear(),this._css.clear()}}},3656:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,d,i,r){a.addEventListener(d,i,r);let u=!1;return{dispose:()=>{u||(u=!0,a.removeEventListener(d,i,r))}}}},6465:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;let r=a(3656),u=a(8460),l=a(844),p=a(2585),f=s.Linkifier2=class extends l.Disposable{get currentLink(){return this._currentLink}constructor(o){super(),this._bufferService=o,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new u.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new u.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,l.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,l.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(o){return this._linkProviders.push(o),{dispose:()=>{let h=this._linkProviders.indexOf(o);h!==-1&&this._linkProviders.splice(h,1)}}}attachToDom(o,h,_){this._element=o,this._mouseService=h,this._renderService=_,this.register((0,r.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,r.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,r.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,r.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){if(this._lastMouseEvent=o,!this._element||!this._mouseService)return;let h=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!h)return;this._isMouseOut=!1;let _=o.composedPath();for(let m=0;m<_.length;m++){let y=_[m];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._handleHover(h),this._lastBufferCell=h)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,h){var _,m;this._activeProviderReplies&&h||((_=this._activeProviderReplies)===null||_===void 0||_.forEach(C=>{C?.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let y=!1;for(let[C,E]of this._linkProviders.entries())h?!((m=this._activeProviderReplies)===null||m===void 0)&&m.get(C)&&(y=this._checkLinkProviderResult(C,o,y)):E.provideLinks(o.y,D=>{var g,b;if(this._isMouseOut)return;let L=D?.map(w=>({link:w}));(g=this._activeProviderReplies)===null||g===void 0||g.set(C,L),y=this._checkLinkProviderResult(C,o,y),((b=this._activeProviderReplies)===null||b===void 0?void 0:b.size)===this._linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,h){let _=new Set;for(let m=0;m<h.size;m++){let y=h.get(m);if(y)for(let C=0;C<y.length;C++){let E=y[C],D=E.link.range.start.y<o?0:E.link.range.start.x,g=E.link.range.end.y>o?this._bufferService.cols:E.link.range.end.x;for(let b=D;b<=g;b++){if(_.has(b)){y.splice(C--,1);break}_.add(b)}}}}_checkLinkProviderResult(o,h,_){var m;if(!this._activeProviderReplies)return _;let y=this._activeProviderReplies.get(o),C=!1;for(let E=0;E<o;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(C=!0);if(!C&&y){let E=y.find(D=>this._linkAtPosition(D.link,h));E&&(_=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviders.length&&!_)for(let E=0;E<this._activeProviderReplies.size;E++){let D=(m=this._activeProviderReplies.get(E))===null||m===void 0?void 0:m.find(g=>this._linkAtPosition(g.link,h));if(D){_=!0,this._handleNewLink(D);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._element||!this._mouseService||!this._currentLink)return;let h=this._positionFromMouseEvent(o,this._element,this._mouseService);h&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,h)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,h){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!h||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,l.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(o.link,h)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var _,m;return(m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:_=>{var m,y;!((m=this._currentLink)===null||m===void 0)&&m.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",_)))}},underline:{get:()=>{var _,m;return(m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.underline},set:_=>{var m,y,C;!((m=this._currentLink)===null||m===void 0)&&m.state&&((C=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||C===void 0?void 0:C.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,_))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;let m=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(m,y),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(o,h,_){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),h.hover&&h.hover(_,h.text)}_fireUnderlineEvent(o,h){let _=o.range,m=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-m-1,_.end.x,_.end.y-m-1,void 0);(h?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(o,h,_){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),h.leave&&h.leave(_,h.text)}_linkAtPosition(o,h){let _=o.range.start.y*this._bufferService.cols+o.range.start.x,m=o.range.end.y*this._bufferService.cols+o.range.end.x,y=h.y*this._bufferService.cols+h.x;return _<=y&&y<=m}_positionFromMouseEvent(o,h,_){let m=_.getCoords(o,h,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,h,_,m,y){return{x1:o,y1:h,x2:_,y2:m,cols:this._bufferService.cols,fg:y}}};s.Linkifier2=f=d([i(0,p.IBufferService)],f)},9042:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(v,s,a){var d=this&&this.__decorate||function(f,o,h,_){var m,y=arguments.length,C=y<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,o,h,_);else for(var E=f.length-1;E>=0;E--)(m=f[E])&&(C=(y<3?m(C):y>3?m(o,h,C):m(o,h))||C);return y>3&&C&&Object.defineProperty(o,h,C),C},i=this&&this.__param||function(f,o){return function(h,_){o(h,_,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;let r=a(511),u=a(2585),l=s.OscLinkProvider=class{constructor(f,o,h){this._bufferService=f,this._optionsService=o,this._oscLinkService=h}provideLinks(f,o){var h;let _=this._bufferService.buffer.lines.get(f-1);if(!_)return void o(void 0);let m=[],y=this._optionsService.rawOptions.linkHandler,C=new r.CellData,E=_.getTrimmedLength(),D=-1,g=-1,b=!1;for(let L=0;L<E;L++)if(g!==-1||_.hasContent(L)){if(_.loadCell(L,C),C.hasExtendedAttrs()&&C.extended.urlId){if(g===-1){g=L,D=C.extended.urlId;continue}b=C.extended.urlId!==D}else g!==-1&&(b=!0);if(b||g!==-1&&L===E-1){let w=(h=this._oscLinkService.getLinkData(D))===null||h===void 0?void 0:h.uri;if(w){let T={start:{x:g+1,y:f},end:{x:L+(b||L!==E-1?0:1),y:f}},M=!1;if(!y?.allowNonHttpProtocols)try{let S=new URL(w);["http:","https:"].includes(S.protocol)||(M=!0)}catch{M=!0}M||m.push({text:w,range:T,activate:(S,F)=>y?y.activate(S,F,T):p(0,F),hover:(S,F)=>{var x;return(x=y?.hover)===null||x===void 0?void 0:x.call(y,S,F,T)},leave:(S,F)=>{var x;return(x=y?.leave)===null||x===void 0?void 0:x.call(y,S,F,T)}})}b=!1,C.hasExtendedAttrs()&&C.extended.urlId?(g=L,D=C.extended.urlId):(g=-1,D=-1)}}o(m)}};function p(f,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){let h=window.open();if(h){try{h.opener=null}catch{}h.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=l=d([i(0,u.IBufferService),i(1,u.IOptionsService),i(2,u.IOscLinkService)],l)},6193:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(a,d){this._parentWindow=a,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,d,i){this._rowCount=i,a=a!==void 0?a:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let a=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;let d=a(844);class i extends d.Disposable{constructor(u){super(),this._parentWindow=u,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(u){this._listener&&this.clearListener(),this._listener=u,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var u;this._outerListener&&((u=this._resolutionMediaMatchList)===null||u===void 0||u.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=i},3236:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let d=a(3614),i=a(3656),r=a(6465),u=a(9042),l=a(3730),p=a(1680),f=a(3107),o=a(5744),h=a(2950),_=a(1296),m=a(428),y=a(4269),C=a(5114),E=a(8934),D=a(3230),g=a(9312),b=a(4725),L=a(6731),w=a(8055),T=a(8969),M=a(8460),S=a(844),F=a(6114),x=a(8437),R=a(2584),A=a(7399),I=a(5941),$=a(9074),k=a(2585),H=a(5435),U=a(4567),q=typeof window<"u"?window.document:null;class N extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new S.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(r.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(l.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance($.DecorationService),this._instantiationService.setService(k.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((B,W)=>this.refresh(B,W))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(B=>this._reportWindowsOptions(B))),this.register(this._inputHandler.onColor(B=>this._handleColorEvent(B))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(B=>this._afterResize(B.cols,B.rows))),this.register((0,S.toDisposable)(()=>{var B,W;this._customKeyEventHandler=void 0,(W=(B=this.element)===null||B===void 0?void 0:B.parentNode)===null||W===void 0||W.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let B of O){let W,P="";switch(B.index){case 256:W="foreground",P="10";break;case 257:W="background",P="11";break;case 258:W="cursor",P="12";break;default:W="ansi",P="4;"+B.index}switch(B.type){case 0:let X=w.color.toColorRGB(W==="ansi"?this._themeService.colors.ansi[B.index]:this._themeService.colors[W]);this.coreService.triggerDataEvent(`${R.C0.ESC}]${P};${(0,I.toRgbString)(X)}${R.C1_ESCAPED.ST}`);break;case 1:if(W==="ansi")this._themeService.modifyColors(J=>J.ansi[B.index]=w.rgba.toColor(...B.color));else{let J=W;this._themeService.modifyColors(ve=>ve[J]=w.rgba.toColor(...B.color))}break;case 2:this._themeService.restoreColor(B.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,B=this.buffer.lines.get(O);if(!B)return;let W=Math.min(this.buffer.x,this.cols-1),P=this._renderService.dimensions.css.cell.height,X=B.getWidth(W),J=this._renderService.dimensions.css.cell.width*X,ve=this.buffer.y*this._renderService.dimensions.css.cell.height,Ee=W*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ee+"px",this.textarea.style.top=ve+"px",this.textarea.style.width=J+"px",this.textarea.style.height=P+"px",this.textarea.style.lineHeight=P+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,i.addDisposableDomListener)(this.element,"copy",B=>{this.hasSelection()&&(0,d.copyHandler)(B,this._selectionService)}));let O=B=>(0,d.handlePasteEvent)(B,this.textarea,this.coreService,this.optionsService);this.register((0,i.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,i.addDisposableDomListener)(this.element,"paste",O)),F.isFirefox?this.register((0,i.addDisposableDomListener)(this.element,"mousedown",B=>{B.button===2&&(0,d.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,i.addDisposableDomListener)(this.element,"contextmenu",B=>{(0,d.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,i.addDisposableDomListener)(this.element,"auxclick",B=>{B.button===1&&(0,d.moveTextAreaUnderMouseCursor)(B,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,i.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,i.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,i.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,i.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,i.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,i.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,i.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){var B;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let W=q.createDocumentFragment();this._viewportElement=q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),W.appendChild(this._viewportElement),this._viewportScrollArea=q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),W.appendChild(this.screenElement),this.textarea=q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",u.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(B=this._document.defaultView)!==null&&B!==void 0?B:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,i.addDisposableDomListener)(this.textarea,"focus",P=>this._handleTextAreaFocus(P))),this.register((0,i.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(m.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(P=>this._onRender.fire(P))),this.onResize(P=>this._renderService.resize(P.cols,P.rows)),this._compositionView=q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(W);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(p.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(P=>this.scrollLines(P.amount,P.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(P=>this.scrollLines(P.amount,P.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(P=>this._renderService.handleSelectionChanged(P.start,P.end,P.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(P=>{this.textarea.value=P,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(P=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,i.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(f.BufferDecorationRenderer,this.screenElement)),this.register((0,i.addDisposableDomListener)(this.element,"mousedown",P=>this._selectionService.handleMouseDown(P))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",P=>this._handleScreenReaderModeOptionChange(P))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",P=>{!this._overviewRulerRenderer&&P&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(_.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let O=this,B=this.element;function W(J){let ve=O._mouseService.getMouseReportCoords(J,O.screenElement);if(!ve)return!1;let Ee,De;switch(J.overrideType||J.type){case"mousemove":De=32,J.buttons===void 0?(Ee=3,J.button!==void 0&&(Ee=J.button<3?J.button:3)):Ee=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":De=0,Ee=J.button<3?J.button:3;break;case"mousedown":De=1,Ee=J.button<3?J.button:3;break;case"wheel":if(O.viewport.getLinesScrolled(J)===0)return!1;De=J.deltaY<0?0:1,Ee=4;break;default:return!1}return!(De===void 0||Ee===void 0||Ee>4)&&O.coreMouseService.triggerMouseEvent({col:ve.col,row:ve.row,x:ve.x,y:ve.y,button:Ee,action:De,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}let P={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X={mouseup:J=>(W(J),J.buttons||(this._document.removeEventListener("mouseup",P.mouseup),P.mousedrag&&this._document.removeEventListener("mousemove",P.mousedrag)),this.cancel(J)),wheel:J=>(W(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&W(J)},mousemove:J=>{J.buttons||W(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?P.mousemove||(B.addEventListener("mousemove",X.mousemove),P.mousemove=X.mousemove):(B.removeEventListener("mousemove",P.mousemove),P.mousemove=null),16&J?P.wheel||(B.addEventListener("wheel",X.wheel,{passive:!1}),P.wheel=X.wheel):(B.removeEventListener("wheel",P.wheel),P.wheel=null),2&J?P.mouseup||(B.addEventListener("mouseup",X.mouseup),P.mouseup=X.mouseup):(this._document.removeEventListener("mouseup",P.mouseup),B.removeEventListener("mouseup",P.mouseup),P.mouseup=null),4&J?P.mousedrag||(P.mousedrag=X.mousedrag):(this._document.removeEventListener("mousemove",P.mousedrag),P.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,i.addDisposableDomListener)(B,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return W(J),P.mouseup&&this._document.addEventListener("mouseup",P.mouseup),P.mousedrag&&this._document.addEventListener("mousemove",P.mousedrag),this.cancel(J)})),this.register((0,i.addDisposableDomListener)(B,"wheel",J=>{if(!P.wheel){if(!this.buffer.hasScrollback){let ve=this.viewport.getLinesScrolled(J);if(ve===0)return;let Ee=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B"),De="";for(let se=0;se<Math.abs(ve);se++)De+=Ee;return this.coreService.triggerDataEvent(De,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,i.addDisposableDomListener)(B,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,i.addDisposableDomListener)(B,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(O,B){var W;(W=this._renderService)===null||W===void 0||W.refreshRows(O,B)}updateCursorStyle(O){var B;!((B=this._selectionService)===null||B===void 0)&&B.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,B,W=0){var P;W===1?(super.scrollLines(O,B,W),this.refresh(0,this.rows-1)):(P=this.viewport)===null||P===void 0||P.scrollLines(O)}paste(O){(0,d.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}registerLinkProvider(O){return this.linkifier2.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let B=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),B}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,B,W){this._selectionService.setSelection(O,B,W)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()}selectAll(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()}selectLines(O,B){var W;(W=this._selectionService)===null||W===void 0||W.selectLines(O,B)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let B=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!B&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;B||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let W=(0,A.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),W.type===3||W.type===2){let P=this.rows-1;return this.scrollLines(W.type===2?-P:P),this.cancel(O,!0)}return W.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(W.cancel&&this.cancel(O,!0),!W.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(W.key!==R.C0.ETX&&W.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:W.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(W.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,B){let W=O.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||O.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||O.isWindows&&B.getModifierState("AltGraph");return B.type==="keypress"?W:W&&(!B.keyCode||B.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(B){return B.keyCode===16||B.keyCode===17||B.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)B=O.charCode;else if(O.which===null||O.which===void 0)B=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;B=O.which}return!(!B||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let B=O.data;return this.coreService.triggerDataEvent(B,!0),this.cancel(O),!0}return!1}resize(O,B){O!==this.cols||B!==this.rows?super.resize(O,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,B){var W,P;(W=this._charSizeService)===null||W===void 0||W.measure(),(P=this.viewport)===null||P===void 0||P.syncScrollArea(!0)}clear(){var O;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(x.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(O=this.viewport)===null||O===void 0||O.reset(),this.refresh(0,this.rows-1)}}reset(){var O,B;this.options.rows=this.rows,this.options.cols=this.cols;let W=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),(B=this.viewport)===null||B===void 0||B.reset(),this._customKeyEventHandler=W,this.refresh(0,this.rows-1)}clearTextureAtlas(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()}_reportFocus(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let B=this._renderService.dimensions.css.canvas.width.toFixed(0),W=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[4;${W};${B}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let P=this._renderService.dimensions.css.cell.width.toFixed(0),X=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[6;${X};${P}t`)}}cancel(O,B){if(this.options.cancelEvents||B)return O.preventDefault(),O.stopPropagation(),!1}}s.Terminal=N},9924:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(a,d=1e3){this._renderCallback=a,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,d,i){this._rowCount=i,a=a!==void 0?a:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;let r=Date.now();if(r-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=r,this._innerRefresh();else if(!this._additionalRefreshRequested){let u=r-this._lastRefreshMs,l=this._debounceThresholdMS-u;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},l)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let a=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,d)}}},1680:function(v,s,a){var d=this&&this.__decorate||function(h,_,m,y){var C,E=arguments.length,D=E<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(h,_,m,y);else for(var g=h.length-1;g>=0;g--)(C=h[g])&&(D=(E<3?C(D):E>3?C(_,m,D):C(_,m))||D);return E>3&&D&&Object.defineProperty(_,m,D),D},i=this&&this.__param||function(h,_){return function(m,y){_(m,y,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;let r=a(3656),u=a(4725),l=a(8460),p=a(844),f=a(2585),o=s.Viewport=class extends p.Disposable{constructor(h,_,m,y,C,E,D,g){super(),this._viewportElement=h,this._scrollArea=_,this._bufferService=m,this._optionsService=y,this._charSizeService=C,this._renderService=E,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new l.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,r.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let _=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==_&&(this._lastRecordedBufferHeight=_,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let _=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,_){let m=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(_<0&&this._viewportElement.scrollTop!==0||_>0&&m<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){let _=this._getPixelsScrolled(h);return _!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+_:this._smoothScrollState.target+=_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=_,this._bubbleScroll(h,_))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let _=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let _=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?_*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._currentRowHeight*this._bufferService.rows),_}getBufferElements(h,_){var m;let y,C="",E=[],D=_??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let b=h;b<D;b++){let L=g.get(b);if(!L)continue;let w=(m=g.get(b+1))===null||m===void 0?void 0:m.isWrapped;if(C+=L.translateToString(!w),!w||b===g.length-1){let T=document.createElement("div");T.textContent=C,E.push(T),C.length>0&&(y=T),C=""}}return{bufferElements:E,cursorElement:y}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let _=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(_/=this._currentRowHeight+0,this._wheelPartialScroll+=_,_=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._bufferService.rows),_}_applyScrollModifier(h,_){let m=this._optionsService.rawOptions.fastScrollModifier;return m==="alt"&&_.altKey||m==="ctrl"&&_.ctrlKey||m==="shift"&&_.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){let _=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,_!==0&&(this._viewportElement.scrollTop+=_,this._bubbleScroll(h,_))}};s.Viewport=o=d([i(2,f.IBufferService),i(3,f.IOptionsService),i(4,u.ICharSizeService),i(5,u.IRenderService),i(6,u.ICoreBrowserService),i(7,u.IThemeService)],o)},3107:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;let r=a(3656),u=a(4725),l=a(844),p=a(2585),f=s.BufferDecorationRenderer=class extends l.Disposable{constructor(o,h,_,m){super(),this._screenElement=o,this._bufferService=h,this._decorationService=_,this._renderService=m,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,r.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,l.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let o of this._decorationService.decorations)this._renderDecoration(o);this._dimensionsChanged=!1}_renderDecoration(o){this._refreshStyle(o),this._dimensionsChanged&&this._refreshXPosition(o)}_createElement(o){var h,_;let m=document.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",((h=o?.options)===null||h===void 0?void 0:h.layer)==="top"),m.style.width=`${Math.round((o.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(o.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(o.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let y=(_=o.options.x)!==null&&_!==void 0?_:0;return y&&y>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(o,m),m}_refreshStyle(o){let h=o.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)o.element&&(o.element.style.display="none",o.onRenderEmitter.fire(o.element));else{let _=this._decorationElements.get(o);_||(_=this._createElement(o),o.element=_,this._decorationElements.set(o,_),this._container.appendChild(_),o.onDispose(()=>{this._decorationElements.delete(o),_.remove()})),_.style.top=h*this._renderService.dimensions.css.cell.height+"px",_.style.display=this._altBufferIsActive?"none":"block",o.onRenderEmitter.fire(_)}}_refreshXPosition(o,h=o.element){var _;if(!h)return;let m=(_=o.options.x)!==null&&_!==void 0?_:0;(o.options.anchor||"left")==="right"?h.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(o){var h;(h=this._decorationElements.get(o))===null||h===void 0||h.remove(),this._decorationElements.delete(o),o.dispose()}};s.BufferDecorationRenderer=f=d([i(1,p.IBufferService),i(2,p.IDecorationService),i(3,u.IRenderService)],f)},5871:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(let d of this._zones)if(d.color===a.options.overviewRulerOptions.color&&d.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,a.marker.line))return;if(this._lineAdjacentToZone(d,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(d,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,d){return d>=a.startBufferLine&&d<=a.endBufferLine}_lineAdjacentToZone(a,d,i){return d>=a.startBufferLine-this._linePadding[i||"full"]&&d<=a.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(a,d){a.startBufferLine=Math.min(a.startBufferLine,d),a.endBufferLine=Math.max(a.endBufferLine,d)}}},5744:function(v,s,a){var d=this&&this.__decorate||function(y,C,E,D){var g,b=arguments.length,L=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,C,E,D);else for(var w=y.length-1;w>=0;w--)(g=y[w])&&(L=(b<3?g(L):b>3?g(C,E,L):g(C,E))||L);return b>3&&L&&Object.defineProperty(C,E,L),L},i=this&&this.__param||function(y,C){return function(E,D){C(E,D,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;let r=a(5871),u=a(3656),l=a(4725),p=a(844),f=a(2585),o={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},m=s.OverviewRulerRenderer=class extends p.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,C,E,D,g,b,L){var w;super(),this._viewportElement=y,this._screenElement=C,this._bufferService=E,this._decorationService=D,this._renderService=g,this._optionsService=b,this._coreBrowseService=L,this._colorZoneStore=new r.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(w=this._viewportElement.parentElement)===null||w===void 0||w.insertBefore(this._canvas,this._viewportElement);let T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,p.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,u.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let y=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=y,h.center=C,h.right=y,this._refreshDrawHeightConstants(),_.full=0,_.left=0,_.center=h.left,_.right=h.left+h.center}_refreshDrawHeightConstants(){o.full=Math.round(2*this._coreBrowseService.dpr);let y=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);o.left=C,o.center=C,o.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let y=this._colorZoneStore.zones;for(let C of y)C.position!=="full"&&this._renderColorZone(C);for(let C of y)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(_[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-o[y.position||"full"]/2),h[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+o[y.position||"full"]))}_queueRefresh(y,C){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=m=d([i(2,f.IBufferService),i(3,f.IDecorationService),i(4,l.IRenderService),i(5,f.IOptionsService),i(6,l.ICoreBrowserService)],m)},2950:function(v,s,a){var d=this&&this.__decorate||function(f,o,h,_){var m,y=arguments.length,C=y<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,o,h,_);else for(var E=f.length-1;E>=0;E--)(m=f[E])&&(C=(y<3?m(C):y>3?m(o,h,C):m(o,h))||C);return y>3&&C&&Object.defineProperty(o,h,C),C},i=this&&this.__param||function(f,o){return function(h,_){o(h,_,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;let r=a(4725),u=a(2585),l=a(2584),p=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(f,o,h,_,m,y){this._textarea=f,this._compositionView=o,this._bufferService=h,this._optionsService=_,this._coreService=m,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(f){this._compositionView.textContent=f.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(f){if(this._isComposing||this._isSendingComposition){if(f.keyCode===229||f.keyCode===16||f.keyCode===17||f.keyCode===18)return!1;this._finalizeComposition(!1)}return f.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(f){if(this._compositionView.classList.remove("active"),this._isComposing=!1,f){let o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;let o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){let f=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let o=this._textarea.value,h=o.replace(f,"");this._dataAlreadySent=h,o.length>f.length?this._coreService.triggerDataEvent(h,!0):o.length<f.length?this._coreService.triggerDataEvent(`${l.C0.DEL}`,!0):o.length===f.length&&o!==f&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(f){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,_=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,m=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=m+"px",this._compositionView.style.top=_+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let y=this._compositionView.getBoundingClientRect();this._textarea.style.left=m+"px",this._textarea.style.top=_+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}f||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=p=d([i(2,u.IBufferService),i(3,u.IOptionsService),i(4,u.ICoreService),i(5,r.IRenderService)],p)},9806:(v,s)=>{function a(d,i,r){let u=r.getBoundingClientRect(),l=d.getComputedStyle(r),p=parseInt(l.getPropertyValue("padding-left")),f=parseInt(l.getPropertyValue("padding-top"));return[i.clientX-u.left-p,i.clientY-u.top-f]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=a,s.getCoords=function(d,i,r,u,l,p,f,o,h){if(!p)return;let _=a(d,i,r);return _?(_[0]=Math.ceil((_[0]+(h?f/2:0))/f),_[1]=Math.ceil(_[1]/o),_[0]=Math.min(Math.max(_[0],1),u+(h?1:0)),_[1]=Math.min(Math.max(_[1],1),l),_):void 0}},9504:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;let d=a(2584);function i(o,h,_,m){let y=o-r(o,_),C=h-r(h,_),E=Math.abs(y-C)-function(D,g,b){let L=0,w=D-r(D,b),T=g-r(g,b);for(let M=0;M<Math.abs(w-T);M++){let S=u(D,g)==="A"?-1:1,F=b.buffer.lines.get(w+S*M);F?.isWrapped&&L++}return L}(o,h,_);return f(E,p(u(o,h),m))}function r(o,h){let _=0,m=h.buffer.lines.get(o),y=m?.isWrapped;for(;y&&o>=0&&o<h.rows;)_++,m=h.buffer.lines.get(--o),y=m?.isWrapped;return _}function u(o,h){return o>h?"A":"B"}function l(o,h,_,m,y,C){let E=o,D=h,g="";for(;E!==_||D!==m;)E+=y?1:-1,y&&E>C.cols-1?(g+=C.buffer.translateBufferLineToString(D,!1,o,E),E=0,o=0,D++):!y&&E<0&&(g+=C.buffer.translateBufferLineToString(D,!1,0,o+1),E=C.cols-1,o=E,D--);return g+C.buffer.translateBufferLineToString(D,!1,o,E)}function p(o,h){let _=h?"O":"[";return d.C0.ESC+_+o}function f(o,h){o=Math.floor(o);let _="";for(let m=0;m<o;m++)_+=h;return _}s.moveToCellSequence=function(o,h,_,m){let y=_.buffer.x,C=_.buffer.y;if(!_.buffer.hasScrollback)return function(g,b,L,w,T,M){return i(b,w,T,M).length===0?"":f(l(g,b,g,b-r(b,T),!1,T).length,p("D",M))}(y,C,0,h,_,m)+i(C,h,_,m)+function(g,b,L,w,T,M){let S;S=i(b,w,T,M).length>0?w-r(w,T):b;let F=w,x=function(R,A,I,$,k,H){let U;return U=i(I,$,k,H).length>0?$-r($,k):A,R<I&&U<=$||R>=I&&U<$?"C":"D"}(g,b,L,w,T,M);return f(l(g,S,L,F,x==="C",T).length,p(x,M))}(y,C,o,h,_,m);let E;if(C===h)return E=y>o?"D":"C",f(Math.abs(y-o),p(E,m));E=C>h?"D":"C";let D=Math.abs(C-h);return f(function(g,b){return b.cols-g}(C>h?o:y,_)+(D-1)*_.cols+1+((C>h?y:o)-1),p(E,m))}},1296:function(v,s,a){var d=this&&this.__decorate||function(T,M,S,F){var x,R=arguments.length,A=R<3?M:F===null?F=Object.getOwnPropertyDescriptor(M,S):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(T,M,S,F);else for(var I=T.length-1;I>=0;I--)(x=T[I])&&(A=(R<3?x(A):R>3?x(M,S,A):x(M,S))||A);return R>3&&A&&Object.defineProperty(M,S,A),A},i=this&&this.__param||function(T,M){return function(S,F){M(S,F,T)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;let r=a(3787),u=a(2550),l=a(2223),p=a(6171),f=a(4725),o=a(8055),h=a(8460),_=a(844),m=a(2585),y="xterm-dom-renderer-owner-",C="xterm-rows",E="xterm-fg-",D="xterm-bg-",g="xterm-focus",b="xterm-selection",L=1,w=s.DomRenderer=class extends _.Disposable{constructor(T,M,S,F,x,R,A,I,$,k){super(),this._element=T,this._screenElement=M,this._viewportElement=S,this._linkifier2=F,this._charSizeService=R,this._optionsService=A,this._bufferService=I,this._coreBrowserService=$,this._themeService=k,this._terminalClass=L++,this._rowElements=[],this.onRequestRedraw=this.register(new h.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,p.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(H=>this._injectCss(H))),this._injectCss(this._themeService.colors),this._rowFactory=x.createInstance(r.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(H=>this._handleLinkHover(H))),this.register(this._linkifier2.onHideLinkUnderline(H=>this._handleLinkLeave(H))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new u.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let S of this._rowElements)S.style.width=`${this.dimensions.css.canvas.width}px`,S.style.height=`${this.dimensions.css.cell.height}px`,S.style.lineHeight=`${this.dimensions.css.cell.height}px`,S.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let M=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${C} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${C} .xterm-dim { color: ${o.color.multiplyOpacity(T.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,M+=`${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(let[S,F]of T.ansi.entries())M+=`${this._terminalSelector} .${E}${S} { color: ${F.css}; }${this._terminalSelector} .${E}${S}.xterm-dim { color: ${o.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${D}${S} { background-color: ${F.css}; }`;M+=`${this._terminalSelector} .${E}${l.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(T.background).css}; }${this._terminalSelector} .${E}${l.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${D}${l.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){let T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,M){for(let S=this._rowElements.length;S<=M;S++){let F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,M){this._refreshRowElements(T,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,M,S){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,M,S),this.renderRows(0,this._bufferService.rows-1),!T||!M)return;let F=T[1]-this._bufferService.buffer.ydisp,x=M[1]-this._bufferService.buffer.ydisp,R=Math.max(F,0),A=Math.min(x,this._bufferService.rows-1);if(R>=this._bufferService.rows||A<0)return;let I=document.createDocumentFragment();if(S){let $=T[0]>M[0];I.appendChild(this._createSelectionElement(R,$?M[0]:T[0],$?T[0]:M[0],A-R+1))}else{let $=F===R?T[0]:0,k=R===x?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,$,k));let H=A-R-1;if(I.appendChild(this._createSelectionElement(R+1,0,this._bufferService.cols,H)),R!==A){let U=x===A?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(A,0,U))}}this._selectionContainer.appendChild(I)}_createSelectionElement(T,M,S,F=1){let x=document.createElement("div");return x.style.height=F*this.dimensions.css.cell.height+"px",x.style.top=T*this.dimensions.css.cell.height+"px",x.style.left=M*this.dimensions.css.cell.width+"px",x.style.width=this.dimensions.css.cell.width*(S-M)+"px",x}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let T of this._rowElements)T.replaceChildren()}renderRows(T,M){let S=this._bufferService.buffer,F=S.ybase+S.y,x=Math.min(S.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink,A=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=T;$<=M;$++){let k=$+S.ydisp,H=this._rowElements[$],U=S.lines.get(k);if(!H||!U)break;H.replaceChildren(...this._rowFactory.createRow(U,k,k===F,A,I,x,R,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,M,S,F,x,R){S<0&&(T=0),F<0&&(M=0);let A=this._bufferService.rows-1;S=Math.max(Math.min(S,A),0),F=Math.max(Math.min(F,A),0),x=Math.min(x,this._bufferService.cols);let I=this._bufferService.buffer,$=I.ybase+I.y,k=Math.min(I.x,x-1),H=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let N=S;N<=F;++N){let K=N+I.ydisp,O=this._rowElements[N],B=I.lines.get(K);if(!O||!B)break;O.replaceChildren(...this._rowFactory.createRow(B,K,K===$,U,q,k,H,this.dimensions.css.cell.width,this._widthCache,R?N===S?T:0:-1,R?(N===F?M:x)-1:-1))}}};s.DomRenderer=w=d([i(4,m.IInstantiationService),i(5,f.ICharSizeService),i(6,m.IOptionsService),i(7,m.IBufferService),i(8,f.ICoreBrowserService),i(9,f.IThemeService)],w)},3787:function(v,s,a){var d=this&&this.__decorate||function(E,D,g,b){var L,w=arguments.length,T=w<3?D:b===null?b=Object.getOwnPropertyDescriptor(D,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(E,D,g,b);else for(var M=E.length-1;M>=0;M--)(L=E[M])&&(T=(w<3?L(T):w>3?L(D,g,T):L(D,g))||T);return w>3&&T&&Object.defineProperty(D,g,T),T},i=this&&this.__param||function(E,D){return function(g,b){D(g,b,E)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;let r=a(2223),u=a(643),l=a(511),p=a(2585),f=a(8055),o=a(4725),h=a(4269),_=a(6171),m=a(3734),y=s.DomRendererRowFactory=class{constructor(E,D,g,b,L,w,T){this._document=E,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=b,this._coreService=L,this._decorationService=w,this._themeService=T,this._workCell=new l.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,D,g){this._selectionStart=E,this._selectionEnd=D,this._columnSelectMode=g}createRow(E,D,g,b,L,w,T,M,S,F,x){let R=[],A=this._characterJoinerService.getJoinedCharacters(D),I=this._themeService.colors,$,k=E.getNoBgTrimmedLength();g&&k<w+1&&(k=w+1);let H=0,U="",q=0,N=0,K=0,O=!1,B=0,W=!1,P=0,X=[],J=F!==-1&&x!==-1;for(let ve=0;ve<k;ve++){E.loadCell(ve,this._workCell);let Ee=this._workCell.getWidth();if(Ee===0)continue;let De=!1,se=ve,we=this._workCell;if(A.length>0&&ve===A[0][0]){De=!0;let Ge=A.shift();we=new h.JoinedCellData(this._workCell,E.translateToString(!0,Ge[0],Ge[1]),Ge[1]-Ge[0]),se=Ge[1]-1,Ee=we.getWidth()}let wt=this._isCellInSelection(ve,D),Jt=g&&ve===w,Wt=J&&ve>=F&&ve<=x,Ze=!1;this._decorationService.forEachDecorationAtCell(ve,D,void 0,Ge=>{Ze=!0});let ce=we.getChars()||u.WHITESPACE_CELL_CHAR;if(ce===" "&&(we.isUnderline()||we.isOverline())&&(ce="\xA0"),P=Ee*M-S.get(ce,we.isBold(),we.isItalic()),$){if(H&&(wt&&W||!wt&&!W&&we.bg===q)&&(wt&&W&&I.selectionForeground||we.fg===N)&&we.extended.ext===K&&Wt===O&&P===B&&!Jt&&!De&&!Ze){U+=ce,H++;continue}H&&($.textContent=U),$=this._document.createElement("span"),H=0,U=""}else $=this._document.createElement("span");if(q=we.bg,N=we.fg,K=we.extended.ext,O=Wt,B=P,W=wt,De&&w>=ve&&w<=se&&(w=ve),!this._coreService.isCursorHidden&&Jt){if(X.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&X.push("xterm-cursor-blink"),X.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":X.push("xterm-cursor-outline");break;case"block":X.push("xterm-cursor-block");break;case"bar":X.push("xterm-cursor-bar");break;case"underline":X.push("xterm-cursor-underline")}}if(we.isBold()&&X.push("xterm-bold"),we.isItalic()&&X.push("xterm-italic"),we.isDim()&&X.push("xterm-dim"),U=we.isInvisible()?u.WHITESPACE_CELL_CHAR:we.getChars()||u.WHITESPACE_CELL_CHAR,we.isUnderline()&&(X.push(`xterm-underline-${we.extended.underlineStyle}`),U===" "&&(U="\xA0"),!we.isUnderlineColorDefault()))if(we.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${m.AttributeData.toColorRGB(we.getUnderlineColor()).join(",")})`;else{let Ge=we.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&we.isBold()&&Ge<8&&(Ge+=8),$.style.textDecorationColor=I.ansi[Ge].css}we.isOverline()&&(X.push("xterm-overline"),U===" "&&(U="\xA0")),we.isStrikethrough()&&X.push("xterm-strikethrough"),Wt&&($.style.textDecoration="underline");let he=we.getFgColor(),le=we.getFgColorMode(),oe=we.getBgColor(),j=we.getBgColorMode(),ae=!!we.isInverse();if(ae){let Ge=he;he=oe,oe=Ge;let St=le;le=j,j=St}let de,Be,tt,ct=!1;switch(this._decorationService.forEachDecorationAtCell(ve,D,void 0,Ge=>{Ge.options.layer!=="top"&&ct||(Ge.backgroundColorRGB&&(j=50331648,oe=Ge.backgroundColorRGB.rgba>>8&16777215,de=Ge.backgroundColorRGB),Ge.foregroundColorRGB&&(le=50331648,he=Ge.foregroundColorRGB.rgba>>8&16777215,Be=Ge.foregroundColorRGB),ct=Ge.options.layer==="top")}),!ct&&wt&&(de=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,oe=de.rgba>>8&16777215,j=50331648,ct=!0,I.selectionForeground&&(le=50331648,he=I.selectionForeground.rgba>>8&16777215,Be=I.selectionForeground)),ct&&X.push("xterm-decoration-top"),j){case 16777216:case 33554432:tt=I.ansi[oe],X.push(`xterm-bg-${oe}`);break;case 50331648:tt=f.rgba.toColor(oe>>16,oe>>8&255,255&oe),this._addStyle($,`background-color:#${C((oe>>>0).toString(16),"0",6)}`);break;default:ae?(tt=I.foreground,X.push(`xterm-bg-${r.INVERTED_DEFAULT_COLOR}`)):tt=I.background}switch(de||we.isDim()&&(de=f.color.multiplyOpacity(tt,.5)),le){case 16777216:case 33554432:we.isBold()&&he<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(he+=8),this._applyMinimumContrast($,tt,I.ansi[he],we,de,void 0)||X.push(`xterm-fg-${he}`);break;case 50331648:let Ge=f.rgba.toColor(he>>16&255,he>>8&255,255&he);this._applyMinimumContrast($,tt,Ge,we,de,Be)||this._addStyle($,`color:#${C(he.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,tt,I.foreground,we,de,void 0)||ae&&X.push(`xterm-fg-${r.INVERTED_DEFAULT_COLOR}`)}X.length&&($.className=X.join(" "),X.length=0),Jt||De||Ze?$.textContent=U:H++,P!==this.defaultSpacing&&($.style.letterSpacing=`${P}px`),R.push($),ve=se}return $&&H&&($.textContent=U),R}_applyMinimumContrast(E,D,g,b,L,w){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,_.excludeFromContrastRatioDemands)(b.getCode()))return!1;let T=this._getContrastCache(b),M;if(L||w||(M=T.getColor(D.rgba,g.rgba)),M===void 0){let S=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);M=f.color.ensureContrastRatio(L||D,w||g,S),T.setColor((L||D).rgba,(w||g).rgba,M??null)}return!!M&&(this._addStyle(E,`color:${M.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,D){E.setAttribute("style",`${E.getAttribute("style")||""}${D};`)}_isCellInSelection(E,D){let g=this._selectionStart,b=this._selectionEnd;return!(!g||!b)&&(this._columnSelectMode?g[0]<=b[0]?E>=g[0]&&D>=g[1]&&E<b[0]&&D<=b[1]:E<g[0]&&D>=g[1]&&E>=b[0]&&D<=b[1]:D>g[1]&&D<b[1]||g[1]===b[1]&&D===g[1]&&E>=g[0]&&E<b[0]||g[1]<b[1]&&D===b[1]&&E<b[0]||g[1]<b[1]&&D===g[1]&&E>=g[0])}};function C(E,D,g){for(;E.length<g;)E=D+E;return E}s.DomRendererRowFactory=y=d([i(1,o.ICharacterJoinerService),i(2,p.IOptionsService),i(3,o.ICoreBrowserService),i(4,p.ICoreService),i(5,p.IDecorationService),i(6,o.IThemeService)],y)},2550:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let d=a.createElement("span"),i=a.createElement("span");i.style.fontWeight="bold";let r=a.createElement("span");r.style.fontStyle="italic";let u=a.createElement("span");u.style.fontWeight="bold",u.style.fontStyle="italic",this._measureElements=[d,i,r,u],this._container.appendChild(d),this._container.appendChild(i),this._container.appendChild(r),this._container.appendChild(u),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,d,i,r){a===this._font&&d===this._fontSize&&i===this._weight&&r===this._weightBold||(this._font=a,this._fontSize=d,this._weight=i,this._weightBold=r,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${r}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${r}`,this.clear())}get(a,d,i){let r=0;if(!d&&!i&&a.length===1&&(r=a.charCodeAt(0))<256)return this._flat[r]!==-9999?this._flat[r]:this._flat[r]=this._measure(a,0);let u=a;d&&(u+="B"),i&&(u+="I");let l=this._holey.get(u);if(l===void 0){let p=0;d&&(p|=1),i&&(p|=2),l=this._measure(a,p),this._holey.set(u,l)}return l}_measure(a,d){let i=this._measureElements[d];return i.textContent=a.repeat(32),i.offsetWidth/32}}},2223:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let d=a(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(v,s)=>{function a(d){return 57508<=d&&d<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},s.excludeFromContrastRatioDemands=function(d){return a(d)||function(i){return 9472<=i&&i<=9631}(d)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let a=this.selectionStart,d=this.selectionEnd;return!(!a||!d)&&(a[1]>d[1]||a[1]===d[1]&&a[0]>d[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;let r=a(2585),u=a(8460),l=a(844),p=s.CharSizeService=class extends l.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,h,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new u.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new f(o,h,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};s.CharSizeService=p=d([i(2,r.IOptionsService)],p);class f{constructor(h,_,m){this._document=h,this._parentElement=_,this._optionsService=m,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let h={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return h.width!==0&&h.height!==0&&(this._result.width=h.width/32,this._result.height=Math.ceil(h.height)),this._result}}},4269:function(v,s,a){var d=this&&this.__decorate||function(h,_,m,y){var C,E=arguments.length,D=E<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(h,_,m,y);else for(var g=h.length-1;g>=0;g--)(C=h[g])&&(D=(E<3?C(D):E>3?C(_,m,D):C(_,m))||D);return E>3&&D&&Object.defineProperty(_,m,D),D},i=this&&this.__param||function(h,_){return function(m,y){_(m,y,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;let r=a(3734),u=a(643),l=a(511),p=a(2585);class f extends r.AttributeData{constructor(_,m,y){super(),this.content=0,this.combinedData="",this.fg=_.fg,this.bg=_.bg,this.combinedData=m,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(_){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=f;let o=s.CharacterJoinerService=class xk{constructor(_){this._bufferService=_,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new l.CellData}register(_){let m={id:this._nextCharacterJoinerId++,handler:_};return this._characterJoiners.push(m),m.id}deregister(_){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===_)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(_){if(this._characterJoiners.length===0)return[];let m=this._bufferService.buffer.lines.get(_);if(!m||m.length===0)return[];let y=[],C=m.translateToString(!0),E=0,D=0,g=0,b=m.getFg(0),L=m.getBg(0);for(let w=0;w<m.getTrimmedLength();w++)if(m.loadCell(w,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==L){if(w-E>1){let T=this._getJoinedRanges(C,g,D,m,E);for(let M=0;M<T.length;M++)y.push(T[M])}E=w,g=D,b=this._workCell.fg,L=this._workCell.bg}D+=this._workCell.getChars().length||u.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){let w=this._getJoinedRanges(C,g,D,m,E);for(let T=0;T<w.length;T++)y.push(w[T])}return y}_getJoinedRanges(_,m,y,C,E){let D=_.substring(m,y),g=[];try{g=this._characterJoiners[0].handler(D)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{let L=this._characterJoiners[b].handler(D);for(let w=0;w<L.length;w++)xk._mergeRanges(g,L[w])}catch(L){console.error(L)}return this._stringRangesToCellRanges(g,C,E),g}_stringRangesToCellRanges(_,m,y){let C=0,E=!1,D=0,g=_[C];if(g){for(let b=y;b<this._bufferService.cols;b++){let L=m.getWidth(b),w=m.getString(b).length||u.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!E&&g[0]<=D&&(g[0]=b,E=!0),g[1]<=D){if(g[1]=b,g=_[++C],!g)break;g[0]<=D?(g[0]=b,E=!0):E=!1}D+=w}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(_,m){let y=!1;for(let C=0;C<_.length;C++){let E=_[C];if(y){if(m[1]<=E[0])return _[C-1][1]=m[1],_;if(m[1]<=E[1])return _[C-1][1]=Math.max(m[1],E[1]),_.splice(C,1),_;_.splice(C,1),C--}else{if(m[1]<=E[0])return _.splice(C,0,m),_;if(m[1]<=E[1])return E[0]=Math.min(m[0],E[0]),_;m[0]<E[1]&&(E[0]=Math.min(m[0],E[0]),y=!0)}}return y?_[_.length-1][1]=m[1]:_.push(m),_}};s.CharacterJoinerService=o=d([i(0,p.IBufferService)],o)},5114:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(a,d){this._textarea=a,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(v,s,a){var d=this&&this.__decorate||function(p,f,o,h){var _,m=arguments.length,y=m<3?f:h===null?h=Object.getOwnPropertyDescriptor(f,o):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(p,f,o,h);else for(var C=p.length-1;C>=0;C--)(_=p[C])&&(y=(m<3?_(y):m>3?_(f,o,y):_(f,o))||y);return m>3&&y&&Object.defineProperty(f,o,y),y},i=this&&this.__param||function(p,f){return function(o,h){f(o,h,p)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;let r=a(4725),u=a(9806),l=s.MouseService=class{constructor(p,f){this._renderService=p,this._charSizeService=f}getCoords(p,f,o,h,_){return(0,u.getCoords)(window,p,f,o,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,_)}getMouseReportCoords(p,f){let o=(0,u.getCoordsRelativeToElement)(window,p,f);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};s.MouseService=l=d([i(0,r.IRenderService),i(1,r.ICharSizeService)],l)},3230:function(v,s,a){var d=this&&this.__decorate||function(y,C,E,D){var g,b=arguments.length,L=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,C,E,D);else for(var w=y.length-1;w>=0;w--)(g=y[w])&&(L=(b<3?g(L):b>3?g(C,E,L):g(C,E))||L);return b>3&&L&&Object.defineProperty(C,E,L),L},i=this&&this.__param||function(y,C){return function(E,D){C(E,D,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;let r=a(3656),u=a(6193),l=a(5596),p=a(4725),f=a(8460),o=a(844),h=a(7226),_=a(2585),m=s.RenderService=class extends o.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,C,E,D,g,b,L,w){if(super(),this._rowCount=y,this._charSizeService=D,this._renderer=this.register(new o.MutableDisposable),this._pausedResizeTask=new h.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new u.RenderDebouncer(L.window,(T,M)=>this._renderRows(T,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new l.ScreenDprMonitor(L.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(E.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(E.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(E.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register((0,r.addDisposableDomListener)(L.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(w.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in L.window){let T=new L.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});T.observe(C),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,C,E=!1){this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,C,this._rowCount))}_renderRows(y,C){this._renderer.value&&(y=Math.min(y,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(y,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:C}),this._onRender.fire({start:y,end:C}),this._isNextRenderRedrawOnly=!0)}resize(y,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,C;this._renderer.value&&((C=(y=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,C)):this._renderer.value.handleResize(y,C),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,C,E){var D;this._selectionState.start=y,this._selectionState.end=C,this._selectionState.columnSelectMode=E,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(y,C,E)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};s.RenderService=m=d([i(2,_.IOptionsService),i(3,p.ICharSizeService),i(4,_.IDecorationService),i(5,_.IBufferService),i(6,p.ICoreBrowserService),i(7,p.IThemeService)],m)},9312:function(v,s,a){var d=this&&this.__decorate||function(g,b,L,w){var T,M=arguments.length,S=M<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,L):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,b,L,w);else for(var F=g.length-1;F>=0;F--)(T=g[F])&&(S=(M<3?T(S):M>3?T(b,L,S):T(b,L))||S);return M>3&&S&&Object.defineProperty(b,L,S),S},i=this&&this.__param||function(g,b){return function(L,w){b(L,w,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;let r=a(9806),u=a(9504),l=a(456),p=a(4725),f=a(8460),o=a(844),h=a(6114),_=a(4841),m=a(511),y=a(2585),C=String.fromCharCode(160),E=new RegExp(C,"g"),D=s.SelectionService=class extends o.Disposable{constructor(g,b,L,w,T,M,S,F,x){super(),this._element=g,this._screenElement=b,this._linkifier=L,this._bufferService=w,this._coreService=T,this._mouseService=M,this._optionsService=S,this._renderService=F,this._coreBrowserService=x,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new f.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new f.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new f.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=R=>this._handleMouseMove(R),this._mouseUpListener=R=>this._handleMouseUp(R),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(R=>this._handleTrim(R)),this.register(this._bufferService.buffers.onBufferActivate(R=>this._handleBufferActivate(R))),this.enable(),this._model=new l.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!g||!b||g[0]===b[0]&&g[1]===b[1])}get selectionText(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!g||!b)return"";let L=this._bufferService.buffer,w=[];if(this._activeSelectionMode===3){if(g[0]===b[0])return"";let T=g[0]<b[0]?g[0]:b[0],M=g[0]<b[0]?b[0]:g[0];for(let S=g[1];S<=b[1];S++){let F=L.translateBufferLineToString(S,!0,T,M);w.push(F)}}else{let T=g[1]===b[1]?b[0]:void 0;w.push(L.translateBufferLineToString(g[1],!0,g[0],T));for(let M=g[1]+1;M<=b[1]-1;M++){let S=L.lines.get(M),F=L.translateBufferLineToString(M,!0);S?.isWrapped?w[w.length-1]+=F:w.push(F)}if(g[1]!==b[1]){let M=L.lines.get(b[1]),S=L.translateBufferLineToString(b[1],!0,0,b[0]);M&&M.isWrapped?w[w.length-1]+=S:w.push(S)}}return w.map(T=>T.replace(E," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){let b=this._getMouseBufferCoords(g),L=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!!(L&&w&&b)&&this._areCoordsInSelection(b,L,w)}isCellInSelection(g,b){let L=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!L||!w)&&this._areCoordsInSelection([g,b],L,w)}_areCoordsInSelection(g,b,L){return g[1]>b[1]&&g[1]<L[1]||b[1]===L[1]&&g[1]===b[1]&&g[0]>=b[0]&&g[0]<L[0]||b[1]<L[1]&&g[1]===L[1]&&g[0]<L[0]||b[1]<L[1]&&g[1]===b[1]&&g[0]>=b[0]}_selectWordAtCursor(g,b){var L,w;let T=(w=(L=this._linkifier.currentLink)===null||L===void 0?void 0:L.link)===null||w===void 0?void 0:w.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let M=this._getMouseBufferCoords(g);return!!M&&(this._selectWordAt(M,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,b){this._model.clearSelection(),g=Math.max(g,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){let b=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(g){let b=(0,r.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1],L=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=L?0:(b>L&&(b-=L),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(g){return h.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){let b=this._getMouseBufferCoords(g);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(g){return g.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;let b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){let w=L.lines.get(this._model.selectionEnd[1]);w&&w.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){let b=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let L=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){let w=(0,u.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(w,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,L=!(!g||!b||g[0]===b[0]&&g[1]===b[1]);L?g&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,b,L)):this._oldHasSelection&&this._fireOnSelectionChange(g,b,L)}_fireOnSelectionChange(g,b,L){this._oldSelectionStart=g,this._oldSelectionEnd=b,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(g,b){let L=b;for(let w=0;b>=w;w++){let T=g.loadCell(w,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:T>1&&b!==w&&(L+=T-1)}return L}setSelection(g,b,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,b],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,b,L=!0,w=!0){if(g[0]>=this._bufferService.cols)return;let T=this._bufferService.buffer,M=T.lines.get(g[1]);if(!M)return;let S=T.translateBufferLineToString(g[1],!1),F=this._convertViewportColToCharacterIndex(M,g[0]),x=F,R=g[0]-F,A=0,I=0,$=0,k=0;if(S.charAt(F)===" "){for(;F>0&&S.charAt(F-1)===" ";)F--;for(;x<S.length&&S.charAt(x+1)===" ";)x++}else{let q=g[0],N=g[0];M.getWidth(q)===0&&(A++,q--),M.getWidth(N)===2&&(I++,N++);let K=M.getString(N).length;for(K>1&&(k+=K-1,x+=K-1);q>0&&F>0&&!this._isCharWordSeparator(M.loadCell(q-1,this._workCell));){M.loadCell(q-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(A++,q--):O>1&&($+=O-1,F-=O-1),F--,q--}for(;N<M.length&&x+1<S.length&&!this._isCharWordSeparator(M.loadCell(N+1,this._workCell));){M.loadCell(N+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,N++):O>1&&(k+=O-1,x+=O-1),x++,N++}}x++;let H=F+R-A+$,U=Math.min(this._bufferService.cols,x-F+A+I-$-k);if(b||S.slice(F,x).trim()!==""){if(L&&H===0&&M.getCodePoint(0)!==32){let q=T.lines.get(g[1]-1);if(q&&M.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){let N=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(N){let K=this._bufferService.cols-N.start;H-=K,U+=K}}}if(w&&H+U===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let q=T.lines.get(g[1]+1);if(q?.isWrapped&&q.getCodePoint(0)!==32){let N=this._getWordAt([0,g[1]+1],!1,!1,!0);N&&(U+=N.length)}}return{start:H,length:U}}}_selectWordAt(g,b){let L=this._getWordAt(g,b);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[L.start,g[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(g){let b=this._getWordAt(g,!0);if(b){let L=g[1];for(;b.start<0;)b.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,L]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){let b=this._bufferService.buffer.getWrappedRangeForLine(g),L={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(L,this._bufferService.cols)}};s.SelectionService=D=d([i(3,y.IBufferService),i(4,y.ICoreService),i(5,p.IMouseService),i(6,y.IOptionsService),i(7,p.IRenderService),i(8,p.ICoreBrowserService)],D)},4725:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;let d=a(8343);s.ICharSizeService=(0,d.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),s.IMouseService=(0,d.createDecorator)("MouseService"),s.IRenderService=(0,d.createDecorator)("RenderService"),s.ISelectionService=(0,d.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(v,s,a){var d=this&&this.__decorate||function(D,g,b,L){var w,T=arguments.length,M=T<3?g:L===null?L=Object.getOwnPropertyDescriptor(g,b):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,L);else for(var S=D.length-1;S>=0;S--)(w=D[S])&&(M=(T<3?w(M):T>3?w(g,b,M):w(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M},i=this&&this.__param||function(D,g){return function(b,L){g(b,L,D)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;let r=a(7239),u=a(8055),l=a(8460),p=a(844),f=a(2585),o=u.css.toColor("#ffffff"),h=u.css.toColor("#000000"),_=u.css.toColor("#ffffff"),m=u.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[u.css.toColor("#2e3436"),u.css.toColor("#cc0000"),u.css.toColor("#4e9a06"),u.css.toColor("#c4a000"),u.css.toColor("#3465a4"),u.css.toColor("#75507b"),u.css.toColor("#06989a"),u.css.toColor("#d3d7cf"),u.css.toColor("#555753"),u.css.toColor("#ef2929"),u.css.toColor("#8ae234"),u.css.toColor("#fce94f"),u.css.toColor("#729fcf"),u.css.toColor("#ad7fa8"),u.css.toColor("#34e2e2"),u.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let b=0;b<216;b++){let L=g[b/36%6|0],w=g[b/6%6|0],T=g[b%6];D.push({css:u.channels.toCss(L,w,T),rgba:u.channels.toRgba(L,w,T)})}for(let b=0;b<24;b++){let L=8+10*b;D.push({css:u.channels.toCss(L,L,L),rgba:u.channels.toRgba(L,L,L)})}return D})());let C=s.ThemeService=class extends p.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new r.ColorContrastCache,this._halfContrastCache=new r.ColorContrastCache,this._onChangeColors=this.register(new l.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:h,cursor:_,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:u.color.blend(h,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:u.color.blend(h,y),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let g=this._colors;if(g.foreground=E(D.foreground,o),g.background=E(D.background,h),g.cursor=E(D.cursor,_),g.cursorAccent=E(D.cursorAccent,m),g.selectionBackgroundTransparent=E(D.selectionBackground,y),g.selectionBackgroundOpaque=u.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=E(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=u.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?E(D.selectionForeground,u.NULL_COLOR):void 0,g.selectionForeground===u.NULL_COLOR&&(g.selectionForeground=void 0),u.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=u.color.opacity(g.selectionBackgroundTransparent,.3)),u.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=u.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=s.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=E(D.black,s.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=E(D.red,s.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=E(D.green,s.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=E(D.yellow,s.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=E(D.blue,s.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=E(D.magenta,s.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=E(D.cyan,s.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=E(D.white,s.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=E(D.brightBlack,s.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=E(D.brightRed,s.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=E(D.brightGreen,s.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=E(D.brightYellow,s.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=E(D.brightBlue,s.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=E(D.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=E(D.brightCyan,s.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=E(D.brightWhite,s.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let b=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let L=0;L<b;L++)g.ansi[L+16]=E(D.extendedAnsi[L],s.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(D,g){if(D!==void 0)try{return u.css.toColor(D)}catch{}return g}s.ThemeService=C=d([i(0,f.IOptionsService)],C)},6349:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;let d=a(8460),i=a(844);class r extends i.Disposable{constructor(l){super(),this._maxLength=l,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(l){if(this._maxLength===l)return;let p=new Array(l);for(let f=0;f<Math.min(l,this.length);f++)p[f]=this._array[this._getCyclicIndex(f)];this._array=p,this._maxLength=l,this._startIndex=0}get length(){return this._length}set length(l){if(l>this._length)for(let p=this._length;p<l;p++)this._array[p]=void 0;this._length=l}get(l){return this._array[this._getCyclicIndex(l)]}set(l,p){this._array[this._getCyclicIndex(l)]=p}push(l){this._array[this._getCyclicIndex(this._length)]=l,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(l,p,...f){if(p){for(let o=l;o<this._length-p;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+p)];this._length-=p,this.onDeleteEmitter.fire({index:l,amount:p})}for(let o=this._length-1;o>=l;o--)this._array[this._getCyclicIndex(o+f.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<f.length;o++)this._array[this._getCyclicIndex(l+o)]=f[o];if(f.length&&this.onInsertEmitter.fire({index:l,amount:f.length}),this._length+f.length>this._maxLength){let o=this._length+f.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=f.length}trimStart(l){l>this._length&&(l=this._length),this._startIndex+=l,this._length-=l,this.onTrimEmitter.fire(l)}shiftElements(l,p,f){if(!(p<=0)){if(l<0||l>=this._length)throw new Error("start argument out of range");if(l+f<0)throw new Error("Cannot shift elements in list beyond index 0");if(f>0){for(let h=p-1;h>=0;h--)this.set(l+h+f,this.get(l+h));let o=l+p+f-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<p;o++)this.set(l+o+f,this.get(l+o))}}_getCyclicIndex(l){return(this._startIndex+l)%this._maxLength}}s.CircularList=r},1439:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function a(d,i=5){if(typeof d!="object")return d;let r=Array.isArray(d)?[]:{};for(let u in d)r[u]=i<=1?d[u]:d[u]&&a(d[u],i-1);return r}},8055:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let d=a(6114),i=0,r=0,u=0,l=0;var p,f,o,h,_;function m(C){let E=C.toString(16);return E.length<2?"0"+E:E}function y(C,E){return C<E?(E+.05)/(C+.05):(C+.05)/(E+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(E,D,g,b){return b!==void 0?`#${m(E)}${m(D)}${m(g)}${m(b)}`:`#${m(E)}${m(D)}${m(g)}`},C.toRgba=function(E,D,g,b=255){return(E<<24|D<<16|g<<8|b)>>>0}}(p||(s.channels=p={})),function(C){function E(D,g){return l=Math.round(255*g),[i,r,u]=_.toChannels(D.rgba),{css:p.toCss(i,r,u,l),rgba:p.toRgba(i,r,u,l)}}C.blend=function(D,g){if(l=(255&g.rgba)/255,l===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,L=g.rgba>>16&255,w=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,S=D.rgba>>8&255;return i=T+Math.round((b-T)*l),r=M+Math.round((L-M)*l),u=S+Math.round((w-S)*l),{css:p.toCss(i,r,u),rgba:p.toRgba(i,r,u)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let L=_.ensureContrastRatio(D.rgba,g.rgba,b);if(L)return _.toColor(L>>24&255,L>>16&255,L>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[i,r,u]=_.toChannels(g),{css:p.toCss(i,r,u),rgba:g}},C.opacity=E,C.multiplyOpacity=function(D,g){return l=255&D.rgba,E(D,l*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(f||(s.color=f={})),function(C){let E,D;if(!d.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(E=b,E.globalCompositeOperation="copy",D=E.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),_.toColor(i,r,u);case 5:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),l=parseInt(g.slice(4,5).repeat(2),16),_.toColor(i,r,u,l);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return i=parseInt(b[1]),r=parseInt(b[2]),u=parseInt(b[3]),l=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),_.toColor(i,r,u,l);if(!E||!D)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=D,E.fillStyle=g,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[i,r,u,l]=E.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:p.toRgba(i,r,u,l),css:g}}}(o||(s.css=o={})),function(C){function E(D,g,b){let L=D/255,w=g/255,T=b/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return E(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=E}(h||(s.rgb=h={})),function(C){function E(g,b,L){let w=g>>24&255,T=g>>16&255,M=g>>8&255,S=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(S,F,x),h.relativeLuminance2(w,T,M));for(;R<L&&(S>0||F>0||x>0);)S-=Math.max(0,Math.ceil(.1*S)),F-=Math.max(0,Math.ceil(.1*F)),x-=Math.max(0,Math.ceil(.1*x)),R=y(h.relativeLuminance2(S,F,x),h.relativeLuminance2(w,T,M));return(S<<24|F<<16|x<<8|255)>>>0}function D(g,b,L){let w=g>>24&255,T=g>>16&255,M=g>>8&255,S=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(S,F,x),h.relativeLuminance2(w,T,M));for(;R<L&&(S<255||F<255||x<255);)S=Math.min(255,S+Math.ceil(.1*(255-S))),F=Math.min(255,F+Math.ceil(.1*(255-F))),x=Math.min(255,x+Math.ceil(.1*(255-x))),R=y(h.relativeLuminance2(S,F,x),h.relativeLuminance2(w,T,M));return(S<<24|F<<16|x<<8|255)>>>0}C.ensureContrastRatio=function(g,b,L){let w=h.relativeLuminance(g>>8),T=h.relativeLuminance(b>>8);if(y(w,T)<L){if(T<w){let F=E(g,b,L),x=y(w,h.relativeLuminance(F>>8));if(x<L){let R=D(g,b,L);return x>y(w,h.relativeLuminance(R>>8))?F:R}return F}let M=D(g,b,L),S=y(w,h.relativeLuminance(M>>8));if(S<L){let F=E(g,b,L);return S>y(w,h.relativeLuminance(F>>8))?M:F}return M}},C.reduceLuminance=E,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,L,w){return{css:p.toCss(g,b,L,w),rgba:p.toRgba(g,b,L,w)}}}(_||(s.rgba=_={})),s.toPaddedHex=m,s.contrastRatio=y},8969:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;let d=a(844),i=a(2585),r=a(4348),u=a(7866),l=a(744),p=a(7302),f=a(6975),o=a(8460),h=a(1753),_=a(1480),m=a(7994),y=a(9282),C=a(5435),E=a(5981),D=a(2660),g=!1;class b extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(w=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(w.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(w){for(let T in w)this.optionsService.options[T]=w[T]}constructor(w){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new r.InstantiationService,this.optionsService=this.register(new p.OptionsService(w)),this._instantiationService.setService(i.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(l.BufferService)),this._instantiationService.setService(i.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(u.LogService)),this._instantiationService.setService(i.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(f.CoreService)),this._instantiationService.setService(i.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(i.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(i.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(m.CharsetService),this._instantiationService.setService(i.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(i.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new E.WriteBuffer((T,M)=>this._inputHandler.parse(T,M))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(w,T){this._writeBuffer.write(w,T)}writeSync(w,T){this._logService.logLevel<=i.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(w,T)}resize(w,T){isNaN(w)||isNaN(T)||(w=Math.max(w,l.MINIMUM_COLS),T=Math.max(T,l.MINIMUM_ROWS),this._bufferService.resize(w,T))}scroll(w,T=!1){this._bufferService.scroll(w,T)}scrollLines(w,T,M){this._bufferService.scrollLines(w,T,M)}scrollPages(w){this.scrollLines(w*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(w){let T=w-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(w,T){return this._inputHandler.registerEscHandler(w,T)}registerDcsHandler(w,T){return this._inputHandler.registerDcsHandler(w,T)}registerCsiHandler(w,T){return this._inputHandler.registerCsiHandler(w,T)}registerOscHandler(w,T){return this._inputHandler.registerOscHandler(w,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let w=!1,T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?w=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(w=!0),w?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let w=[];w.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),w.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(let T of w)T.dispose()})}}}s.CoreTerminal=b},8460:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===a)return void this._listeners.splice(d,1)}}})),this._event}fire(a,d){let i=[];for(let r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(let r=0;r<i.length;r++)i[r].call(void 0,a,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,d){return a(i=>d.fire(i))}},5435:function(v,s,a){var d=this&&this.__decorate||function(R,A,I,$){var k,H=arguments.length,U=H<3?A:$===null?$=Object.getOwnPropertyDescriptor(A,I):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(R,A,I,$);else for(var q=R.length-1;q>=0;q--)(k=R[q])&&(U=(H<3?k(U):H>3?k(A,I,U):k(A,I))||U);return H>3&&U&&Object.defineProperty(A,I,U),U},i=this&&this.__param||function(R,A){return function(I,$){A(I,$,R)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;let r=a(2584),u=a(7116),l=a(2015),p=a(844),f=a(482),o=a(8437),h=a(8460),_=a(643),m=a(511),y=a(3734),C=a(2585),E=a(6242),D=a(6351),g=a(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},L=131072;function w(R,A){if(R>24)return A.setWinLines||!1;switch(R){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var T;(function(R){R[R.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",R[R.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(s.WindowsOptionsReportType=T={}));let M=0;class S extends p.Disposable{getAttrData(){return this._curAttrData}constructor(A,I,$,k,H,U,q,N,K=new l.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=I,this._coreService=$,this._logService=k,this._optionsService=H,this._oscLinkService=U,this._coreMouseService=q,this._unicodeService=N,this._parser=K,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new f.StringToUtf32,this._utf8Decoder=new f.Utf8ToUtf32,this._workCell=new m.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,B)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:B.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,B,W)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:B,data:W})}),this._parser.setDcsHandlerFallback((O,B,W)=>{B==="HOOK"&&(W=W.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:B,payload:W})}),this._parser.setPrintHandler((O,B,W)=>this.print(O,B,W)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(r.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(r.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(r.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(r.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(r.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(r.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(r.C1.IND,()=>this.index()),this._parser.setExecuteHandler(r.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(r.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new E.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new E.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new E.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new E.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new E.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new E.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new E.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new E.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new E.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new E.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new E.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let O in u.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((O,B)=>this.requestStatusString(O,B)))}_preserveStack(A,I,$,k){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=$,this._parseStack.position=k}_logSlowResolvingAsync(A){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([A,new Promise((I,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,I){let $,k=this._activeBuffer.x,H=this._activeBuffer.y,U=0,q=this._parseStack.paused;if(q){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync($),$;k=this._parseStack.cursorStartX,H=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>L&&(U=this._parseStack.position+L)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,N=>String.fromCharCode(N)).join("")}"`),typeof A=="string"?A.split("").map(N=>N.charCodeAt(0)):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<L&&(this._parseBuffer=new Uint32Array(Math.min(A.length,L))),q||this._dirtyRowTracker.clearRange(),A.length>L)for(let N=U;N<A.length;N+=L){let K=N+L<A.length?N+L:A.length,O=typeof A=="string"?this._stringDecoder.decode(A.substring(N,K),this._parseBuffer):this._utf8Decoder.decode(A.subarray(N,K),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,O))return this._preserveStack(k,H,O,N),this._logSlowResolvingAsync($),$}else if(!q){let N=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,N))return this._preserveStack(k,H,N,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===k&&this._activeBuffer.y===H||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,I,$){let k,H,U=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,N=this._bufferService.cols,K=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,B=this._curAttrData,W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-I>0&&W.getWidth(this._activeBuffer.x-1)===2&&W.setCellFromCodePoint(this._activeBuffer.x-1,0,1,B.fg,B.bg,B.extended);for(let P=I;P<$;++P){if(k=A[P],H=this._unicodeService.wcwidth(k),k<127&&U){let X=U[String.fromCharCode(k)];X&&(k=X.charCodeAt(0))}if(q&&this._onA11yChar.fire((0,f.stringFromCodePoint)(k)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),H||!this._activeBuffer.x){if(this._activeBuffer.x+H-1>=N){if(K){for(;this._activeBuffer.x<N;)W.setCellFromCodePoint(this._activeBuffer.x++,0,1,B.fg,B.bg,B.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=N-1,H===2)continue}if(O&&(W.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(B),B),W.getWidth(N-1)===2&&W.setCellFromCodePoint(N-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,B.fg,B.bg,B.extended)),W.setCellFromCodePoint(this._activeBuffer.x++,k,H,B.fg,B.bg,B.extended),H>0)for(;--H;)W.setCellFromCodePoint(this._activeBuffer.x++,0,0,B.fg,B.bg,B.extended)}else W.getWidth(this._activeBuffer.x-1)?W.addCodepointToCell(this._activeBuffer.x-1,k):W.addCodepointToCell(this._activeBuffer.x-2,k)}$-I>0&&(W.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<N&&$-I>0&&W.getWidth(this._activeBuffer.x)===0&&!W.hasContent(this._activeBuffer.x)&&W.setCellFromCodePoint(this._activeBuffer.x,0,1,B.fg,B.bg,B.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,I){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,I):this._parser.registerCsiHandler(A,$=>!w($.params[0],this._optionsService.rawOptions.windowOptions)||I($))}registerDcsHandler(A,I){return this._parser.registerDcsHandler(A,new D.DcsHandler(I))}registerEscHandler(A,I){return this._parser.registerEscHandler(A,I)}registerOscHandler(A,I){return this._parser.registerOscHandler(A,new E.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=A,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+I)}cursorUp(A){let I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){let I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){let I=A.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){let I=A.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,I,$,k=!1,H=!1){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);U.replaceCells(I,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),H),k&&(U.isWrapped=!1)}_resetBufferLine(A,I=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),$.isWrapped=!1)}eraseInDisplay(A,I=!1){let $;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);$<this._bufferService.rows;$++)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 3:let k=this._activeBuffer.lines.length-this._bufferService.rows;k>0&&(this._activeBuffer.lines.trimStart(k),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-k,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-k,0),this._onScroll.fire(0))}return!0}eraseInLine(A,I=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-k+1;for(;I--;)this._activeBuffer.lines.splice(H-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,k;for(k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,k=this._bufferService.rows-1+this._activeBuffer.ybase-k;I--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(k,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;let I=A.params[0]||1,$=new Uint32Array(I);for(let k=0;k<I;++k)$[k]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(r.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(r.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(r.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(r.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(r.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,u.DEFAULT_CHARSET),this._charsetService.setgCharset(1,u.DEFAULT_CHARSET),this._charsetService.setgCharset(2,u.DEFAULT_CHARSET),this._charsetService.setgCharset(3,u.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,I){let $=this._coreService.decPrivateModes,{activeProtocol:k,activeEncoding:H}=this._coreMouseService,U=this._coreService,{buffers:q,cols:N}=this._bufferService,{active:K,alt:O}=q,B=this._optionsService.rawOptions,W=ve=>ve?1:2,P=A.params[0];return X=P,J=I?P===2?4:P===4?W(U.modes.insertMode):P===12?3:P===20?W(B.convertEol):0:P===1?W($.applicationCursorKeys):P===3?B.windowOptions.setWinLines?N===80?2:N===132?1:0:0:P===6?W($.origin):P===7?W($.wraparound):P===8?3:P===9?W(k==="X10"):P===12?W(B.cursorBlink):P===25?W(!U.isCursorHidden):P===45?W($.reverseWraparound):P===66?W($.applicationKeypad):P===67?4:P===1e3?W(k==="VT200"):P===1002?W(k==="DRAG"):P===1003?W(k==="ANY"):P===1004?W($.sendFocus):P===1005?4:P===1006?W(H==="SGR"):P===1015?4:P===1016?W(H==="SGR_PIXELS"):P===1048?1:P===47||P===1047||P===1049?W(K===O):P===2004?W($.bracketedPasteMode):0,U.triggerDataEvent(`${r.C0.ESC}[${I?"":"?"}${X};${J}$y`),!0;var X,J}_updateAttrColor(A,I,$,k,H){return I===2?(A|=50331648,A&=-16777216,A|=y.AttributeData.fromColorRGB([$,k,H])):I===5&&(A&=-50331904,A|=33554432|255&$),A}_extractColor(A,I,$){let k=[0,0,-1,0,0,0],H=0,U=0;do{if(k[U+H]=A.params[I+U],A.hasSubParams(I+U)){let q=A.getSubParams(I+U),N=0;do k[1]===5&&(H=1),k[U+N+1+H]=q[N];while(++N<q.length&&N+U+1+H<k.length);break}if(k[1]===5&&U+H>=2||k[1]===2&&U+H>=5)break;k[1]&&(H=1)}while(++U+I<A.length&&U+H<k.length);for(let q=2;q<k.length;++q)k[q]===-1&&(k[q]=0);switch(k[0]){case 38:$.fg=this._updateAttrColor($.fg,k[1],k[3],k[4],k[5]);break;case 48:$.bg=this._updateAttrColor($.bg,k[1],k[3],k[4],k[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,k[1],k[3],k[4],k[5])}return U}_processUnderline(A,I){I.extended=I.extended.clone(),(!~A||A>5)&&(A=1),I.extended.underlineStyle=A,I.fg|=268435456,A===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(A){A.fg=o.DEFAULT_ATTR_DATA.fg,A.bg=o.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;let I=A.length,$,k=this._curAttrData;for(let H=0;H<I;H++)$=A.params[H],$>=30&&$<=37?(k.fg&=-50331904,k.fg|=16777216|$-30):$>=40&&$<=47?(k.bg&=-50331904,k.bg|=16777216|$-40):$>=90&&$<=97?(k.fg&=-50331904,k.fg|=16777224|$-90):$>=100&&$<=107?(k.bg&=-50331904,k.bg|=16777224|$-100):$===0?this._processSGR0(k):$===1?k.fg|=134217728:$===3?k.bg|=67108864:$===4?(k.fg|=268435456,this._processUnderline(A.hasSubParams(H)?A.getSubParams(H)[0]:1,k)):$===5?k.fg|=536870912:$===7?k.fg|=67108864:$===8?k.fg|=1073741824:$===9?k.fg|=2147483648:$===2?k.bg|=134217728:$===21?this._processUnderline(2,k):$===22?(k.fg&=-134217729,k.bg&=-134217729):$===23?k.bg&=-67108865:$===24?(k.fg&=-268435457,this._processUnderline(0,k)):$===25?k.fg&=-536870913:$===27?k.fg&=-67108865:$===28?k.fg&=-1073741825:$===29?k.fg&=2147483647:$===39?(k.fg&=-67108864,k.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):$===49?(k.bg&=-67108864,k.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?H+=this._extractColor(A,H,k):$===53?k.bg|=1073741824:$===55?k.bg&=-1073741825:$===59?(k.extended=k.extended.clone(),k.extended.underlineColor=-1,k.updateExtended()):$===100?(k.fg&=-67108864,k.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,k.bg&=-67108864,k.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${r.C0.ESC}[0n`);break;case 6:let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${r.C0.ESC}[${I};${$}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${r.C0.ESC}[?${I};${$}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){let I=A.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let $=I%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(A){let I=A.params[0]||1,$;return(A.length<2||($=A.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(A){if(!w(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;let I=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${r.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){let I=[],$=A.split(";");for(;$.length>1;){let k=$.shift(),H=$.shift();if(/^\d+$/.exec(k)){let U=parseInt(k);if(x(U))if(H==="?")I.push({type:0,index:U});else{let q=(0,g.parseColor)(H);q&&I.push({type:1,index:U,color:q})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(A){let I=A.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(A,I){this._getCurrentLinkId()&&this._finishHyperlink();let $=A.split(":"),k,H=$.findIndex(U=>U.startsWith("id="));return H!==-1&&(k=$[H].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:k,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,I){let $=A.split(";");for(let k=0;k<$.length&&!(I>=this._specialColors.length);++k,++I)if($[k]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{let H=(0,g.parseColor)($[k]);H&&this._onColor.fire([{type:1,index:this._specialColors[I],color:H}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;let I=[],$=A.split(";");for(let k=0;k<$.length;++k)if(/^\d+$/.exec($[k])){let H=parseInt($[k]);x(H)&&I.push({type:2,index:H})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,u.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(b[A[0]],u.CHARSETS[A[1]]||u.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){let A=new m.CellData;A.content=4194304|"E".charCodeAt(0),A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){let $=this._activeBuffer.ybase+this._activeBuffer.y+I,k=this._activeBuffer.lines.get($);k&&(k.fill(A),k.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,I){let $=this._bufferService.buffer,k=this._optionsService.rawOptions;return(H=>(this._coreService.triggerDataEvent(`${r.C0.ESC}${H}${r.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[k.cursorStyle]-(k.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,I){this._dirtyRowTracker.markRangeDirty(A,I)}}s.InputHandler=S;let F=class{constructor(R){this._bufferService=R,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(R){R<this.start?this.start=R:R>this.end&&(this.end=R)}markRangeDirty(R,A){R>A&&(M=R,R=A,A=M),R<this.start&&(this.start=R),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function x(R){return 0<=R&&R<256}F=d([i(0,C.IBufferService)],F)},844:(v,s)=>{function a(d){for(let i of d)i.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){let i=this._disposables.indexOf(d);i!==-1&&this._disposables.splice(i,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var i;this._isDisposed||d===this._value||((i=this._value)===null||i===void 0||i.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=a,s.getDisposeArrayDisposable=function(d){return{dispose:()=>a(d)}}},1505:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(i,r,u){this._data[i]||(this._data[i]={}),this._data[i][r]=u}get(i,r){return this._data[i]?this._data[i][r]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(d,i,r,u,l){this._data.get(d,i)||this._data.set(d,i,new a),this._data.get(d,i).set(r,u,l)}get(d,i,r,u){var l;return(l=this._data.get(d,i))===null||l===void 0?void 0:l.get(r,u)}clear(){this._data.clear()}}},6114:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";let a=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;let i=a.match(/Version\/(\d+)/);return i===null||i.length<2?0:parseInt(i[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},6106:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let a=0;s.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(a=this._search(this._getKey(d)),this._array.splice(a,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;let i=this._getKey(d);if(i===void 0||(a=this._search(i),a===-1)||this._getKey(this._array[a])!==i)return!1;do if(this._array[a]===d)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===i);return!1}*getKeyIterator(d){if(this._array.length!==0&&(a=this._search(d),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===d))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===d)}forEachByKey(d,i){if(this._array.length!==0&&(a=this._search(d),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===d))do i(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===d)}values(){return[...this._array].values()}_search(d){let i=0,r=this._array.length-1;for(;r>=i;){let u=i+r>>1,l=this._getKey(this._array[u]);if(l>d)r=u-1;else{if(!(l<d)){for(;u>0&&this._getKey(this._array[u-1])===d;)u--;return u}i=u+1}}return i}}},7226:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let d=a(6114);class i{constructor(){this._tasks=[],this._i=0}enqueue(l){this._tasks.push(l),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(l){this._idleCallback=void 0;let p=0,f=0,o=l.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(p=Date.now(),this._tasks[this._i]()||this._i++,p=Math.max(1,Date.now()-p),f=Math.max(p,f),h=l.timeRemaining(),1.5*f>h)return o-p<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-p))}ms`),void this._start();o=h}this.clear()}}class r extends i{_requestCallback(l){return setTimeout(()=>l(this._createDeadline(16)))}_cancelCallback(l){clearTimeout(l)}_createDeadline(l){let p=Date.now()+l;return{timeRemaining:()=>Math.max(0,p-Date.now())}}}s.PriorityTaskQueue=r,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends i{_requestCallback(u){return requestIdleCallback(u)}_cancelCallback(u){cancelIdleCallback(u)}}:r,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(u){this._queue.clear(),this._queue.enqueue(u)}flush(){this._queue.flush()}}},9282:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;let d=a(643);s.updateWindowsModeWrappedState=function(i){let r=i.buffer.lines.get(i.buffer.ybase+i.buffer.y-1),u=r?.get(i.cols-1),l=i.buffer.lines.get(i.buffer.ybase+i.buffer.y);l&&u&&(l.isWrapped=u[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&u[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(r){return[r>>>16&255,r>>>8&255,255&r]}static fromColorRGB(r){return(255&r[0])<<16|(255&r[1])<<8|255&r[2]}clone(){let r=new a;return r.fg=this.fg,r.bg=this.bg,r.extended=this.extended.clone(),r}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(r){this._ext=r}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(r){this._ext&=-469762049,this._ext|=r<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(r){this._ext&=-67108864,this._ext|=67108863&r}get urlId(){return this._urlId}set urlId(r){this._urlId=r}constructor(r=0,u=0){this._ext=0,this._urlId=0,this._ext=r,this._urlId=u}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},9092:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;let d=a(6349),i=a(7226),r=a(3734),u=a(8437),l=a(4634),p=a(511),f=a(643),o=a(4863),h=a(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(_,m,y){this._hasScrollback=_,this._optionsService=m,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=u.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=p.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=p.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new i.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(_){return _?(this._nullCell.fg=_.fg,this._nullCell.bg=_.bg,this._nullCell.extended=_.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new r.ExtendedAttrs),this._nullCell}getWhitespaceCell(_){return _?(this._whitespaceCell.fg=_.fg,this._whitespaceCell.bg=_.bg,this._whitespaceCell.extended=_.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new r.ExtendedAttrs),this._whitespaceCell}getBlankLine(_,m){return new u.BufferLine(this._bufferService.cols,this.getNullCell(_),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let _=this.ybase+this.y-this.ydisp;return _>=0&&_<this._rows}_getCorrectBufferLength(_){if(!this._hasScrollback)return _;let m=_+this._optionsService.rawOptions.scrollback;return m>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:m}fillViewportRows(_){if(this.lines.length===0){_===void 0&&(_=u.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(_))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(_,m){let y=this.getNullCell(u.DEFAULT_ATTR_DATA),C=0,E=this._getCorrectBufferLength(m);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<_)for(let g=0;g<this.lines.length;g++)C+=+this.lines.get(g).resize(_,y);let D=0;if(this._rows<m)for(let g=this._rows;g<m;g++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new u.BufferLine(_,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new u.BufferLine(_,y)));else for(let g=this._rows;g>m;g--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){let g=this.lines.length-E;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=E}this.x=Math.min(this.x,_-1),this.y=Math.min(this.y,m-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,_-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(_,m),this._cols>_))for(let D=0;D<this.lines.length;D++)C+=+this.lines.get(D).resize(_,y);this._cols=_,this._rows=m,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let _=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,_=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return _}get _isReflowEnabled(){let _=this._optionsService.rawOptions.windowsPty;return _&&_.buildNumber?this._hasScrollback&&_.backend==="conpty"&&_.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(_,m){this._cols!==_&&(_>this._cols?this._reflowLarger(_,m):this._reflowSmaller(_,m))}_reflowLarger(_,m){let y=(0,l.reflowLargerGetLinesToRemove)(this.lines,this._cols,_,this.ybase+this.y,this.getNullCell(u.DEFAULT_ATTR_DATA));if(y.length>0){let C=(0,l.reflowLargerCreateNewLayout)(this.lines,y);(0,l.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(_,m,C.countRemoved)}}_reflowLargerAdjustViewport(_,m,y){let C=this.getNullCell(u.DEFAULT_ATTR_DATA),E=y;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new u.BufferLine(_,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(_,m){let y=this.getNullCell(u.DEFAULT_ATTR_DATA),C=[],E=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=_)continue;let b=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),b.unshift(g);let L=this.ybase+this.y;if(L>=D&&L<D+b.length)continue;let w=b[b.length-1].getTrimmedLength(),T=(0,l.reflowSmallerGetNewLineLengths)(b,this._cols,_),M=T.length-b.length,S;S=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let F=[];for(let k=0;k<M;k++){let H=this.getBlankLine(u.DEFAULT_ATTR_DATA,!0);F.push(H)}F.length>0&&(C.push({start:D+b.length+E,newLines:F}),E+=F.length),b.push(...F);let x=T.length-1,R=T[x];R===0&&(x--,R=T[x]);let A=b.length-M-1,I=w;for(;A>=0;){let k=Math.min(I,R);if(b[x]===void 0)break;if(b[x].copyCellsFrom(b[A],I-k,R-k,k,!0),R-=k,R===0&&(x--,R=T[x]),I-=k,I===0){A--;let H=Math.max(A,0);I=(0,l.getWrappedLineTrimmedLength)(b,H,this._cols)}}for(let k=0;k<b.length;k++)T[k]<_&&b[k].setCell(T[k],y);let $=M-S;for(;$-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+m-1)}if(C.length>0){let D=[],g=[];for(let x=0;x<this.lines.length;x++)g.push(this.lines.get(x));let b=this.lines.length,L=b-1,w=0,T=C[w];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let M=0;for(let x=Math.min(this.lines.maxLength-1,b+E-1);x>=0;x--)if(T&&T.start>L+M){for(let R=T.newLines.length-1;R>=0;R--)this.lines.set(x--,T.newLines[R]);x++,D.push({index:L+1,amount:T.newLines.length}),M+=T.newLines.length,T=C[++w]}else this.lines.set(x,g[L--]);let S=0;for(let x=D.length-1;x>=0;x--)D[x].index+=S,this.lines.onInsertEmitter.fire(D[x]),S+=D[x].amount;let F=Math.max(0,b+E-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(_,m,y=0,C){let E=this.lines.get(_);return E?E.translateToString(m,y,C):""}getWrappedRangeForLine(_){let m=_,y=_;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:m,last:y}}setupTabStops(_){for(_!=null?this.tabs[_]||(_=this.prevStop(_)):(this.tabs={},_=0);_<this._cols;_+=this._optionsService.rawOptions.tabStopWidth)this.tabs[_]=!0}prevStop(_){for(_==null&&(_=this.x);!this.tabs[--_]&&_>0;);return _>=this._cols?this._cols-1:_<0?0:_}nextStop(_){for(_==null&&(_=this.x);!this.tabs[++_]&&_<this._cols;);return _>=this._cols?this._cols-1:_<0?0:_}clearMarkers(_){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===_&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].dispose(),this.markers.splice(_--,1);this._isClearing=!1}addMarker(_){let m=new o.Marker(_);return this.markers.push(m),m.register(this.lines.onTrim(y=>{m.line-=y,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(y=>{m.line>=y.index&&(m.line+=y.amount)})),m.register(this.lines.onDelete(y=>{m.line>=y.index&&m.line<y.index+y.amount&&m.dispose(),m.line>y.index&&(m.line-=y.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(_){this._isClearing||this.markers.splice(this.markers.indexOf(_),1)}}},8437:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;let d=a(3734),i=a(511),r=a(643),u=a(482);s.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let l=0;class p{constructor(o,h,_=!1){this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);let m=h||i.CellData.fromCharData([0,r.NULL_CELL_CHAR,r.NULL_CELL_WIDTH,r.NULL_CELL_CODE]);for(let y=0;y<o;++y)this.setCell(y,m);this.length=o}get(o){let h=this._data[3*o+0],_=2097151&h;return[this._data[3*o+1],2097152&h?this._combined[o]:_?(0,u.stringFromCodePoint)(_):"",h>>22,2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):_]}set(o,h){this._data[3*o+1]=h[r.CHAR_DATA_ATTR_INDEX],h[r.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=h[1],this._data[3*o+0]=2097152|o|h[r.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=h[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[r.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){let h=this._data[3*o+0];return 2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&h}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){let h=this._data[3*o+0];return 2097152&h?this._combined[o]:2097151&h?(0,u.stringFromCodePoint)(2097151&h):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,h){return l=3*o,h.content=this._data[l+0],h.fg=this._data[l+1],h.bg=this._data[l+2],2097152&h.content&&(h.combinedData=this._combined[o]),268435456&h.bg&&(h.extended=this._extendedAttrs[o]),h}setCell(o,h){2097152&h.content&&(this._combined[o]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[o]=h.extended),this._data[3*o+0]=h.content,this._data[3*o+1]=h.fg,this._data[3*o+2]=h.bg}setCellFromCodePoint(o,h,_,m,y,C){268435456&y&&(this._extendedAttrs[o]=C),this._data[3*o+0]=h|_<<22,this._data[3*o+1]=m,this._data[3*o+2]=y}addCodepointToCell(o,h){let _=this._data[3*o+0];2097152&_?this._combined[o]+=(0,u.stringFromCodePoint)(h):(2097151&_?(this._combined[o]=(0,u.stringFromCodePoint)(2097151&_)+(0,u.stringFromCodePoint)(h),_&=-2097152,_|=2097152):_=h|4194304,this._data[3*o+0]=_)}insertCells(o,h,_,m){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs),h<this.length-o){let y=new i.CellData;for(let C=this.length-o-h-1;C>=0;--C)this.setCell(o+h+C,this.loadCell(o+C,y));for(let C=0;C<h;++C)this.setCell(o+C,_)}else for(let y=o;y<this.length;++y)this.setCell(y,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs)}deleteCells(o,h,_,m){if(o%=this.length,h<this.length-o){let y=new i.CellData;for(let C=0;C<this.length-o-h;++C)this.setCell(o+C,this.loadCell(o+h+C,y));for(let C=this.length-h;C<this.length;++C)this.setCell(C,_)}else for(let y=o;y<this.length;++y)this.setCell(y,_);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs)}replaceCells(o,h,_,m,y=!1){if(y)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodePoint(h,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs);o<h&&o<this.length;)this.isProtected(o)||this.setCell(o,_),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h,0,1,m?.fg||0,m?.bg||0,m?.extended||new d.ExtendedAttrs);o<h&&o<this.length;)this.setCell(o++,_)}resize(o,h){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let _=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*_)this._data=new Uint32Array(this._data.buffer,0,_);else{let m=new Uint32Array(_);m.set(this._data),this._data=m}for(let m=this.length;m<o;++m)this.setCell(m,h)}else{this._data=this._data.subarray(0,_);let m=Object.keys(this._combined);for(let C=0;C<m.length;C++){let E=parseInt(m[C],10);E>=o&&delete this._combined[E]}let y=Object.keys(this._extendedAttrs);for(let C=0;C<y.length;C++){let E=parseInt(y[C],10);E>=o&&delete this._extendedAttrs[E]}}return this.length=o,4*_*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,h=!1){if(h)for(let _=0;_<this.length;++_)this.isProtected(_)||this.setCell(_,o);else{this._combined={},this._extendedAttrs={};for(let _=0;_<this.length;++_)this.setCell(_,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(let h in o._combined)this._combined[h]=o._combined[h];this._extendedAttrs={};for(let h in o._extendedAttrs)this._extendedAttrs[h]=o._extendedAttrs[h];this.isWrapped=o.isWrapped}clone(){let o=new p(0);o._data=new Uint32Array(this._data),o.length=this.length;for(let h in this._combined)o._combined[h]=this._combined[h];for(let h in this._extendedAttrs)o._extendedAttrs[h]=this._extendedAttrs[h];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,h,_,m,y){let C=o._data;if(y)for(let D=m-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(_+D)+g]=C[3*(h+D)+g];268435456&C[3*(h+D)+2]&&(this._extendedAttrs[_+D]=o._extendedAttrs[h+D])}else for(let D=0;D<m;D++){for(let g=0;g<3;g++)this._data[3*(_+D)+g]=C[3*(h+D)+g];268435456&C[3*(h+D)+2]&&(this._extendedAttrs[_+D]=o._extendedAttrs[h+D])}let E=Object.keys(o._combined);for(let D=0;D<E.length;D++){let g=parseInt(E[D],10);g>=h&&(this._combined[g-h+_]=o._combined[g])}}translateToString(o=!1,h=0,_=this.length){o&&(_=Math.min(_,this.getTrimmedLength()));let m="";for(;h<_;){let y=this._data[3*h+0],C=2097151&y;m+=2097152&y?this._combined[h]:C?(0,u.stringFromCodePoint)(C):r.WHITESPACE_CELL_CHAR,h+=y>>22||1}return m}}s.BufferLine=p},4841:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(a,d){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return d*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(v,s)=>{function a(d,i,r){if(i===d.length-1)return d[i].getTrimmedLength();let u=!d[i].hasContent(r-1)&&d[i].getWidth(r-1)===1,l=d[i+1].getWidth(0)===2;return u&&l?r-1:r}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(d,i,r,u,l){let p=[];for(let f=0;f<d.length-1;f++){let o=f,h=d.get(++o);if(!h.isWrapped)continue;let _=[d.get(f)];for(;o<d.length&&h.isWrapped;)_.push(h),h=d.get(++o);if(u>=f&&u<o){f+=_.length-1;continue}let m=0,y=a(_,m,i),C=1,E=0;for(;C<_.length;){let g=a(_,C,i),b=g-E,L=r-y,w=Math.min(b,L);_[m].copyCellsFrom(_[C],E,y,w,!1),y+=w,y===r&&(m++,y=0),E+=w,E===g&&(C++,E=0),y===0&&m!==0&&_[m-1].getWidth(r-1)===2&&(_[m].copyCellsFrom(_[m-1],r-1,y++,1,!1),_[m-1].setCell(r-1,l))}_[m].replaceCells(y,r,l);let D=0;for(let g=_.length-1;g>0&&(g>m||_[g].getTrimmedLength()===0);g--)D++;D>0&&(p.push(f+_.length-D),p.push(D)),f+=_.length-1}return p},s.reflowLargerCreateNewLayout=function(d,i){let r=[],u=0,l=i[u],p=0;for(let f=0;f<d.length;f++)if(l===f){let o=i[++u];d.onDeleteEmitter.fire({index:f-p,amount:o}),f+=o-1,p+=o,l=i[++u]}else r.push(f);return{layout:r,countRemoved:p}},s.reflowLargerApplyNewLayout=function(d,i){let r=[];for(let u=0;u<i.length;u++)r.push(d.get(i[u]));for(let u=0;u<r.length;u++)d.set(u,r[u]);d.length=i.length},s.reflowSmallerGetNewLineLengths=function(d,i,r){let u=[],l=d.map((h,_)=>a(d,_,i)).reduce((h,_)=>h+_),p=0,f=0,o=0;for(;o<l;){if(l-o<r){u.push(l-o);break}p+=r;let h=a(d,f,i);p>h&&(p-=h,f++);let _=d[f].getWidth(p-1)===2;_&&p--;let m=_?r-1:r;u.push(m),o+=m}return u},s.getWrappedLineTrimmedLength=a},5295:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;let d=a(8460),i=a(844),r=a(9092);class u extends i.Disposable{constructor(p,f){super(),this._optionsService=p,this._bufferService=f,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new r.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new r.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(p){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(p),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(p,f){this._normal.resize(p,f),this._alt.resize(p,f),this.setupTabStops(p)}setupTabStops(p){this._normal.setupTabStops(p),this._alt.setupTabStops(p)}}s.BufferSet=u},511:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let d=a(482),i=a(643),r=a(3734);class u extends r.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new r.ExtendedAttrs,this.combinedData=""}static fromCharData(p){let f=new u;return f.setFromCharData(p),f}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(p){this.fg=p[i.CHAR_DATA_ATTR_INDEX],this.bg=0;let f=!1;if(p[i.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(p[i.CHAR_DATA_CHAR_INDEX].length===2){let o=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){let h=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(o-55296)+h-56320+65536|p[i.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=p[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[i.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=p[i.CHAR_DATA_CHAR_INDEX],this.content=2097152|p[i.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=u},643:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;let d=a(8460),i=a(844);class r{get id(){return this._id}constructor(l){this.line=l,this.isDisposed=!1,this._disposables=[],this._id=r._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,i.disposeArray)(this._disposables),this._disposables.length=0)}register(l){return this._disposables.push(l),l}}s.Marker=r,r._nextId=1},7116:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(v,s)=>{var a,d,i;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(r){r.NUL="\0",r.SOH="",r.STX="",r.ETX="",r.EOT="",r.ENQ="",r.ACK="",r.BEL="\x07",r.BS="\b",r.HT="	",r.LF=`
`,r.VT="\v",r.FF="\f",r.CR="\r",r.SO="",r.SI="",r.DLE="",r.DC1="",r.DC2="",r.DC3="",r.DC4="",r.NAK="",r.SYN="",r.ETB="",r.CAN="",r.EM="",r.SUB="",r.ESC="\x1B",r.FS="",r.GS="",r.RS="",r.US="",r.SP=" ",r.DEL="\x7F"}(a||(s.C0=a={})),function(r){r.PAD="\x80",r.HOP="\x81",r.BPH="\x82",r.NBH="\x83",r.IND="\x84",r.NEL="\x85",r.SSA="\x86",r.ESA="\x87",r.HTS="\x88",r.HTJ="\x89",r.VTS="\x8A",r.PLD="\x8B",r.PLU="\x8C",r.RI="\x8D",r.SS2="\x8E",r.SS3="\x8F",r.DCS="\x90",r.PU1="\x91",r.PU2="\x92",r.STS="\x93",r.CCH="\x94",r.MW="\x95",r.SPA="\x96",r.EPA="\x97",r.SOS="\x98",r.SGCI="\x99",r.SCI="\x9A",r.CSI="\x9B",r.ST="\x9C",r.OSC="\x9D",r.PM="\x9E",r.APC="\x9F"}(d||(s.C1=d={})),function(r){r.ST=`${a.ESC}\\`}(i||(s.C1_ESCAPED=i={}))},7399:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;let d=a(2584),i={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(r,u,l,p){let f={type:0,cancel:!1,key:void 0},o=(r.shiftKey?1:0)|(r.altKey?2:0)|(r.ctrlKey?4:0)|(r.metaKey?8:0);switch(r.keyCode){case 0:r.key==="UIKeyInputUpArrow"?f.key=u?d.C0.ESC+"OA":d.C0.ESC+"[A":r.key==="UIKeyInputLeftArrow"?f.key=u?d.C0.ESC+"OD":d.C0.ESC+"[D":r.key==="UIKeyInputRightArrow"?f.key=u?d.C0.ESC+"OC":d.C0.ESC+"[C":r.key==="UIKeyInputDownArrow"&&(f.key=u?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(r.altKey){f.key=d.C0.ESC+d.C0.DEL;break}f.key=d.C0.DEL;break;case 9:if(r.shiftKey){f.key=d.C0.ESC+"[Z";break}f.key=d.C0.HT,f.cancel=!0;break;case 13:f.key=r.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,f.cancel=!0;break;case 27:f.key=d.C0.ESC,r.altKey&&(f.key=d.C0.ESC+d.C0.ESC),f.cancel=!0;break;case 37:if(r.metaKey)break;o?(f.key=d.C0.ESC+"[1;"+(o+1)+"D",f.key===d.C0.ESC+"[1;3D"&&(f.key=d.C0.ESC+(l?"b":"[1;5D"))):f.key=u?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(r.metaKey)break;o?(f.key=d.C0.ESC+"[1;"+(o+1)+"C",f.key===d.C0.ESC+"[1;3C"&&(f.key=d.C0.ESC+(l?"f":"[1;5C"))):f.key=u?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(r.metaKey)break;o?(f.key=d.C0.ESC+"[1;"+(o+1)+"A",l||f.key!==d.C0.ESC+"[1;3A"||(f.key=d.C0.ESC+"[1;5A")):f.key=u?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(r.metaKey)break;o?(f.key=d.C0.ESC+"[1;"+(o+1)+"B",l||f.key!==d.C0.ESC+"[1;3B"||(f.key=d.C0.ESC+"[1;5B")):f.key=u?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:r.shiftKey||r.ctrlKey||(f.key=d.C0.ESC+"[2~");break;case 46:f.key=o?d.C0.ESC+"[3;"+(o+1)+"~":d.C0.ESC+"[3~";break;case 36:f.key=o?d.C0.ESC+"[1;"+(o+1)+"H":u?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:f.key=o?d.C0.ESC+"[1;"+(o+1)+"F":u?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:r.shiftKey?f.type=2:r.ctrlKey?f.key=d.C0.ESC+"[5;"+(o+1)+"~":f.key=d.C0.ESC+"[5~";break;case 34:r.shiftKey?f.type=3:r.ctrlKey?f.key=d.C0.ESC+"[6;"+(o+1)+"~":f.key=d.C0.ESC+"[6~";break;case 112:f.key=o?d.C0.ESC+"[1;"+(o+1)+"P":d.C0.ESC+"OP";break;case 113:f.key=o?d.C0.ESC+"[1;"+(o+1)+"Q":d.C0.ESC+"OQ";break;case 114:f.key=o?d.C0.ESC+"[1;"+(o+1)+"R":d.C0.ESC+"OR";break;case 115:f.key=o?d.C0.ESC+"[1;"+(o+1)+"S":d.C0.ESC+"OS";break;case 116:f.key=o?d.C0.ESC+"[15;"+(o+1)+"~":d.C0.ESC+"[15~";break;case 117:f.key=o?d.C0.ESC+"[17;"+(o+1)+"~":d.C0.ESC+"[17~";break;case 118:f.key=o?d.C0.ESC+"[18;"+(o+1)+"~":d.C0.ESC+"[18~";break;case 119:f.key=o?d.C0.ESC+"[19;"+(o+1)+"~":d.C0.ESC+"[19~";break;case 120:f.key=o?d.C0.ESC+"[20;"+(o+1)+"~":d.C0.ESC+"[20~";break;case 121:f.key=o?d.C0.ESC+"[21;"+(o+1)+"~":d.C0.ESC+"[21~";break;case 122:f.key=o?d.C0.ESC+"[23;"+(o+1)+"~":d.C0.ESC+"[23~";break;case 123:f.key=o?d.C0.ESC+"[24;"+(o+1)+"~":d.C0.ESC+"[24~";break;default:if(!r.ctrlKey||r.shiftKey||r.altKey||r.metaKey)if(l&&!p||!r.altKey||r.metaKey)!l||r.altKey||r.ctrlKey||r.shiftKey||!r.metaKey?r.key&&!r.ctrlKey&&!r.altKey&&!r.metaKey&&r.keyCode>=48&&r.key.length===1?f.key=r.key:r.key&&r.ctrlKey&&(r.key==="_"&&(f.key=d.C0.US),r.key==="@"&&(f.key=d.C0.NUL)):r.keyCode===65&&(f.type=1);else{let h=i[r.keyCode],_=h?.[r.shiftKey?1:0];if(_)f.key=d.C0.ESC+_;else if(r.keyCode>=65&&r.keyCode<=90){let m=r.ctrlKey?r.keyCode-64:r.keyCode+32,y=String.fromCharCode(m);r.shiftKey&&(y=y.toUpperCase()),f.key=d.C0.ESC+y}else if(r.keyCode===32)f.key=d.C0.ESC+(r.ctrlKey?d.C0.NUL:" ");else if(r.key==="Dead"&&r.code.startsWith("Key")){let m=r.code.slice(3,4);r.shiftKey||(m=m.toLowerCase()),f.key=d.C0.ESC+m,f.cancel=!0}}else r.keyCode>=65&&r.keyCode<=90?f.key=String.fromCharCode(r.keyCode-64):r.keyCode===32?f.key=d.C0.NUL:r.keyCode>=51&&r.keyCode<=55?f.key=String.fromCharCode(r.keyCode-51+27):r.keyCode===56?f.key=d.C0.DEL:r.keyCode===219?f.key=d.C0.ESC:r.keyCode===220?f.key=d.C0.FS:r.keyCode===221&&(f.key=d.C0.GS)}return f}},482:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,d=0,i=a.length){let r="";for(let u=d;u<i;++u){let l=a[u];l>65535?(l-=65536,r+=String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):r+=String.fromCharCode(l)}return r},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,d){let i=a.length;if(!i)return 0;let r=0,u=0;if(this._interim){let l=a.charCodeAt(u++);56320<=l&&l<=57343?d[r++]=1024*(this._interim-55296)+l-56320+65536:(d[r++]=this._interim,d[r++]=l),this._interim=0}for(let l=u;l<i;++l){let p=a.charCodeAt(l);if(55296<=p&&p<=56319){if(++l>=i)return this._interim=p,r;let f=a.charCodeAt(l);56320<=f&&f<=57343?d[r++]=1024*(p-55296)+f-56320+65536:(d[r++]=p,d[r++]=f)}else p!==65279&&(d[r++]=p)}return r}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,d){let i=a.length;if(!i)return 0;let r,u,l,p,f=0,o=0,h=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let E,D=0;for(;(E=63&this.interim[++D])&&D<4;)C<<=6,C|=E;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;h<b;){if(h>=i)return 0;if(E=a[h++],(192&E)!=128){h--,y=!0;break}this.interim[D++]=E,C<<=6,C|=63&E}y||(g===2?C<128?h--:d[f++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(d[f++]=C):C<65536||C>1114111||(d[f++]=C)),this.interim.fill(0)}let _=i-4,m=h;for(;m<i;){for(;!(!(m<_)||128&(r=a[m])||128&(u=a[m+1])||128&(l=a[m+2])||128&(p=a[m+3]));)d[f++]=r,d[f++]=u,d[f++]=l,d[f++]=p,m+=4;if(r=a[m++],r<128)d[f++]=r;else if((224&r)==192){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(o=(31&r)<<6|63&u,o<128){m--;continue}d[f++]=o}else if((240&r)==224){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,f;if(l=a[m++],(192&l)!=128){m--;continue}if(o=(15&r)<<12|(63&u)<<6|63&l,o<2048||o>=55296&&o<=57343||o===65279)continue;d[f++]=o}else if((248&r)==240){if(m>=i)return this.interim[0]=r,f;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,f;if(l=a[m++],(192&l)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,this.interim[2]=l,f;if(p=a[m++],(192&p)!=128){m--;continue}if(o=(7&r)<<18|(63&u)<<12|(63&l)<<6|63&p,o<65536||o>1114111)continue;d[f++]=o}}return f}}},225:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;let a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],i;s.UnicodeV6=class{constructor(){if(this.version="6",!i){i=new Uint8Array(65536),i.fill(1),i[0]=0,i.fill(0,1,32),i.fill(0,127,160),i.fill(2,4352,4448),i[9001]=2,i[9002]=2,i.fill(2,11904,42192),i[12351]=1,i.fill(2,44032,55204),i.fill(2,63744,64256),i.fill(2,65040,65050),i.fill(2,65072,65136),i.fill(2,65280,65377),i.fill(2,65504,65511);for(let r=0;r<a.length;++r)i.fill(0,a[r][0],a[r][1]+1)}}wcwidth(r){return r<32?0:r<127?1:r<65536?i[r]:function(u,l){let p,f=0,o=l.length-1;if(u<l[0][0]||u>l[o][1])return!1;for(;o>=f;)if(p=f+o>>1,u>l[p][1])f=p+1;else{if(!(u<l[p][0]))return!0;o=p-1}return!1}(r,d)?0:r>=131072&&r<=196605||r>=196608&&r<=262141?2:1}}},5981:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;let d=a(8460),i=a(844);class r extends i.Disposable{constructor(l){super(),this._action=l,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(l,p){if(p!==void 0&&this._syncCalls>p)return void(this._syncCalls=0);if(this._pendingData+=l.length,this._writeBuffer.push(l),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let f;for(this._isSyncWriting=!0;f=this._writeBuffer.shift();){this._action(f);let o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(l,p){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=l.length,this._writeBuffer.push(l),this._callbacks.push(p),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=l.length,this._writeBuffer.push(l),this._callbacks.push(p)}_innerWrite(l=0,p=!0){let f=l||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let o=this._writeBuffer[this._bufferOffset],h=this._action(o,p);if(h){let m=y=>Date.now()-f>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(f,y);return void h.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(m)}let _=this._callbacks[this._bufferOffset];if(_&&_(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-f>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=r},5941:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;let a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function i(r,u){let l=r.toString(16),p=l.length<2?"0"+l:l;switch(u){case 4:return l[0];case 8:return p;case 12:return(p+p).slice(0,3);default:return p+p}}s.parseColor=function(r){if(!r)return;let u=r.toLowerCase();if(u.indexOf("rgb:")===0){u=u.slice(4);let l=a.exec(u);if(l){let p=l[1]?15:l[4]?255:l[7]?4095:65535;return[Math.round(parseInt(l[1]||l[4]||l[7]||l[10],16)/p*255),Math.round(parseInt(l[2]||l[5]||l[8]||l[11],16)/p*255),Math.round(parseInt(l[3]||l[6]||l[9]||l[12],16)/p*255)]}}else if(u.indexOf("#")===0&&(u=u.slice(1),d.exec(u)&&[3,6,9,12].includes(u.length))){let l=u.length/3,p=[0,0,0];for(let f=0;f<3;++f){let o=parseInt(u.slice(l*f,l*f+l),16);p[f]=l===1?o<<4:l===2?o:l===3?o>>4:o>>8}return p}},s.toRgbString=function(r,u=16){let[l,p,f]=r;return`rgb:${i(l,u)}/${i(p,u)}/${i(f,u)}`}},5770:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;let d=a(482),i=a(8742),r=a(5770),u=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=u,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}registerHandler(p,f){this._handlers[p]===void 0&&(this._handlers[p]=[]);let o=this._handlers[p];return o.push(f),{dispose:()=>{let h=o.indexOf(f);h!==-1&&o.splice(h,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}reset(){if(this._active.length)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].unhook(!1);this._stack.paused=!1,this._active=u,this._ident=0}hook(p,f){if(this.reset(),this._ident=p,this._active=this._handlers[p]||u,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(f);else this._handlerFb(this._ident,"HOOK",f)}put(p,f,o){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(p,f,o);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(p,f,o))}unhook(p,f=!0){if(this._active.length){let o=!1,h=this._active.length-1,_=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,o=f,_=this._stack.fallThrough,this._stack.paused=!1),!_&&o===!1){for(;h>=0&&(o=this._active[h].unhook(p),o!==!0);h--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,o;h--}for(;h>=0;h--)if(o=this._active[h].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",p);this._active=u,this._ident=0}};let l=new i.Params;l.addParam(0),s.DcsHandler=class{constructor(p){this._handler=p,this._data="",this._params=l,this._hitLimit=!1}hook(p){this._params=p.length>1||p.params[0]?p.clone():l,this._data="",this._hitLimit=!1}put(p,f,o){this._hitLimit||(this._data+=(0,d.utf32ToString)(p,f,o),this._data.length>r.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(p){let f=!1;if(this._hitLimit)f=!1;else if(p&&(f=this._handler(this._data,this._params),f instanceof Promise))return f.then(o=>(this._params=l,this._data="",this._hitLimit=!1,o));return this._params=l,this._data="",this._hitLimit=!1,f}}},2015:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;let d=a(844),i=a(8742),r=a(6242),u=a(6351);class l{constructor(h){this.table=new Uint8Array(h)}setDefault(h,_){this.table.fill(h<<4|_)}add(h,_,m,y){this.table[_<<8|h]=m<<4|y}addMany(h,_,m,y){for(let C=0;C<h.length;C++)this.table[_<<8|h[C]]=m<<4|y}}s.TransitionTable=l;let p=160;s.VT500_TRANSITION_TABLE=function(){let o=new l(4095),h=Array.apply(null,Array(256)).map((D,g)=>g),_=(D,g)=>h.slice(D,g),m=_(32,127),y=_(0,24);y.push(25),y.push.apply(y,_(28,32));let C=_(0,14),E;for(E in o.setDefault(1,0),o.addMany(m,0,2,0),C)o.addMany([24,26,153,154],E,3,0),o.addMany(_(128,144),E,3,0),o.addMany(_(144,152),E,3,0),o.add(156,E,0,0),o.add(27,E,11,1),o.add(157,E,4,8),o.addMany([152,158,159],E,0,7),o.add(155,E,11,3),o.add(144,E,11,9);return o.addMany(y,0,3,0),o.addMany(y,1,3,1),o.add(127,1,0,1),o.addMany(y,8,0,8),o.addMany(y,3,3,3),o.add(127,3,0,3),o.addMany(y,4,3,4),o.add(127,4,0,4),o.addMany(y,6,3,6),o.addMany(y,5,3,5),o.add(127,5,0,5),o.addMany(y,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(m,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(_(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(m,7,0,7),o.addMany(y,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(_(64,127),3,7,0),o.addMany(_(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(_(48,60),4,8,4),o.addMany(_(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(_(32,64),6,0,6),o.add(127,6,0,6),o.addMany(_(64,127),6,0,0),o.addMany(_(32,48),3,9,5),o.addMany(_(32,48),5,9,5),o.addMany(_(48,64),5,0,6),o.addMany(_(64,127),5,7,0),o.addMany(_(32,48),4,9,5),o.addMany(_(32,48),1,9,2),o.addMany(_(32,48),2,9,2),o.addMany(_(48,127),2,10,0),o.addMany(_(48,80),1,10,0),o.addMany(_(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(_(96,127),1,10,0),o.add(80,1,11,9),o.addMany(y,9,0,9),o.add(127,9,0,9),o.addMany(_(28,32),9,0,9),o.addMany(_(32,48),9,9,12),o.addMany(_(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(y,11,0,11),o.addMany(_(32,128),11,0,11),o.addMany(_(28,32),11,0,11),o.addMany(y,10,0,10),o.add(127,10,0,10),o.addMany(_(28,32),10,0,10),o.addMany(_(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(_(32,48),10,9,12),o.addMany(y,12,0,12),o.add(127,12,0,12),o.addMany(_(28,32),12,0,12),o.addMany(_(32,48),12,9,12),o.addMany(_(48,64),12,0,11),o.addMany(_(64,127),12,12,13),o.addMany(_(64,127),10,12,13),o.addMany(_(64,127),9,12,13),o.addMany(y,13,13,13),o.addMany(m,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(p,0,2,0),o.add(p,8,5,8),o.add(p,6,0,6),o.add(p,11,0,11),o.add(p,13,13,13),o}();class f extends d.Disposable{constructor(h=s.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new i.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(_,m,y)=>{},this._executeHandlerFb=_=>{},this._csiHandlerFb=(_,m)=>{},this._escHandlerFb=_=>{},this._errorHandlerFb=_=>_,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new r.OscParser),this._dcsParser=this.register(new u.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,_=[64,126]){let m=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(m=h.prefix.charCodeAt(0),m&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<h.intermediates.length;++C){let E=h.intermediates.charCodeAt(C);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=E}}if(h.final.length!==1)throw new Error("final must be a single byte");let y=h.final.charCodeAt(0);if(_[0]>y||y>_[1])throw new Error(`final must be in range ${_[0]} .. ${_[1]}`);return m<<=8,m|=y,m}identToString(h){let _=[];for(;h;)_.push(String.fromCharCode(255&h)),h>>=8;return _.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,_){let m=this._identifier(h,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);let y=this._escHandlers[m];return y.push(_),{dispose:()=>{let C=y.indexOf(_);C!==-1&&y.splice(C,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,_){this._executeHandlers[h.charCodeAt(0)]=_}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,_){let m=this._identifier(h);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);let y=this._csiHandlers[m];return y.push(_),{dispose:()=>{let C=y.indexOf(_);C!==-1&&y.splice(C,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,_){return this._dcsParser.registerHandler(this._identifier(h),_)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,_){return this._oscParser.registerHandler(h,_)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,_,m,y,C){this._parseStack.state=h,this._parseStack.handlers=_,this._parseStack.handlerPos=m,this._parseStack.transition=y,this._parseStack.chunkPos=C}parse(h,_,m){let y,C=0,E=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let g=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&b>-1){for(;b>=0&&(y=g[b](this._params),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 4:if(m===!1&&b>-1){for(;b>=0&&(y=g[b](),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 6:if(C=h[this._parseStack.chunkPos],y=this._dcsParser.unhook(C!==24&&C!==26,m),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=h[this._parseStack.chunkPos],y=this._oscParser.end(C!==24&&C!==26,m),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<_;++g){switch(C=h[g],E=this._transitions.table[this.currentState<<8|(C<160?C:p)],E>>4){case 2:for(let M=g+1;;++M){if(M>=_||(C=h[M])<32||C>126&&C<p){this._printHandler(h,g,M),g=M-1;break}if(++M>=_||(C=h[M])<32||C>126&&C<p){this._printHandler(h,g,M),g=M-1;break}if(++M>=_||(C=h[M])<32||C>126&&C<p){this._printHandler(h,g,M),g=M-1;break}if(++M>=_||(C=h[M])<32||C>126&&C<p){this._printHandler(h,g,M),g=M-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let b=this._csiHandlers[this._collect<<8|C],L=b?b.length-1:-1;for(;L>=0&&(y=b[L](this._params),y!==!0);L--)if(y instanceof Promise)return this._preserveStack(3,b,L,E,g),y;L<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++g<_&&(C=h[g])>47&&C<60);g--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let w=this._escHandlers[this._collect<<8|C],T=w?w.length-1:-1;for(;T>=0&&(y=w[T](),y!==!0);T--)if(y instanceof Promise)return this._preserveStack(4,w,T,E,g),y;T<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let M=g+1;;++M)if(M>=_||(C=h[M])===24||C===26||C===27||C>127&&C<p){this._dcsParser.put(h,g,M),g=M-1;break}break;case 14:if(y=this._dcsParser.unhook(C!==24&&C!==26),y)return this._preserveStack(6,[],0,E,g),y;C===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=g+1;;M++)if(M>=_||(C=h[M])<32||C>127&&C<p){this._oscParser.put(h,g,M),g=M-1;break}break;case 6:if(y=this._oscParser.end(C!==24&&C!==26),y)return this._preserveStack(5,[],0,E,g),y;C===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}}}s.EscapeSequenceParser=f},6242:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;let d=a(5770),i=a(482),r=[];s.OscParser=class{constructor(){this._state=0,this._active=r,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(u,l){this._handlers[u]===void 0&&(this._handlers[u]=[]);let p=this._handlers[u];return p.push(l),{dispose:()=>{let f=p.indexOf(l);f!==-1&&p.splice(f,1)}}}clearHandler(u){this._handlers[u]&&delete this._handlers[u]}setHandlerFallback(u){this._handlerFb=u}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=r}reset(){if(this._state===2)for(let u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].end(!1);this._stack.paused=!1,this._active=r,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||r,this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].start();else this._handlerFb(this._id,"START")}_put(u,l,p){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(u,l,p);else this._handlerFb(this._id,"PUT",(0,i.utf32ToString)(u,l,p))}start(){this.reset(),this._state=1}put(u,l,p){if(this._state!==3){if(this._state===1)for(;l<p;){let f=u[l++];if(f===59){this._state=2,this._start();break}if(f<48||57<f)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+f-48}this._state===2&&p-l>0&&this._put(u,l,p)}}end(u,l=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let p=!1,f=this._active.length-1,o=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,p=l,o=this._stack.fallThrough,this._stack.paused=!1),!o&&p===!1){for(;f>=0&&(p=this._active[f].end(u),p!==!0);f--)if(p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,p;f--}for(;f>=0;f--)if(p=this._active[f].end(!1),p instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,p}else this._handlerFb(this._id,"END",u);this._active=r,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(u){this._handler=u,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(u,l,p){this._hitLimit||(this._data+=(0,i.utf32ToString)(u,l,p),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(u){let l=!1;if(this._hitLimit)l=!1;else if(u&&(l=this._handler(this._data),l instanceof Promise))return l.then(p=>(this._data="",this._hitLimit=!1,p));return this._data="",this._hitLimit=!1,l}}},8742:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;let a=2147483647;class d{static fromArray(r){let u=new d;if(!r.length)return u;for(let l=Array.isArray(r[0])?1:0;l<r.length;++l){let p=r[l];if(Array.isArray(p))for(let f=0;f<p.length;++f)u.addSubParam(p[f]);else u.addParam(p)}return u}constructor(r=32,u=32){if(this.maxLength=r,this.maxSubParamsLength=u,u>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(r),this.length=0,this._subParams=new Int32Array(u),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(r),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let r=new d(this.maxLength,this.maxSubParamsLength);return r.params.set(this.params),r.length=this.length,r._subParams.set(this._subParams),r._subParamsLength=this._subParamsLength,r._subParamsIdx.set(this._subParamsIdx),r._rejectDigits=this._rejectDigits,r._rejectSubDigits=this._rejectSubDigits,r._digitIsSub=this._digitIsSub,r}toArray(){let r=[];for(let u=0;u<this.length;++u){r.push(this.params[u]);let l=this._subParamsIdx[u]>>8,p=255&this._subParamsIdx[u];p-l>0&&r.push(Array.prototype.slice.call(this._subParams,l,p))}return r}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(r){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(r<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=r>a?a:r}}addSubParam(r){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(r<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=r>a?a:r,this._subParamsIdx[this.length-1]++}}hasSubParams(r){return(255&this._subParamsIdx[r])-(this._subParamsIdx[r]>>8)>0}getSubParams(r){let u=this._subParamsIdx[r]>>8,l=255&this._subParamsIdx[r];return l-u>0?this._subParams.subarray(u,l):null}getSubParamsAll(){let r={};for(let u=0;u<this.length;++u){let l=this._subParamsIdx[u]>>8,p=255&this._subParamsIdx[u];p-l>0&&(r[u]=this._subParams.slice(l,p))}return r}addDigit(r){let u;if(this._rejectDigits||!(u=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let l=this._digitIsSub?this._subParams:this.params,p=l[u-1];l[u-1]=~p?Math.min(10*p+r,a):r}}s.Params=d},5741:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,d){let i={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(i),d.dispose=()=>this._wrappedAddonDispose(i),d.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let d=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===a){d=i;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(d,1)}}},8771:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;let d=a(3785),i=a(511);s.BufferApiView=class{constructor(r,u){this._buffer=r,this.type=u}init(r){return this._buffer=r,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(r){let u=this._buffer.lines.get(r);if(u)return new d.BufferLineApiView(u)}getNullCell(){return new i.CellData}}},3785:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;let d=a(511);s.BufferLineApiView=class{constructor(i){this._line=i}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(i,r){if(!(i<0||i>=this._line.length))return r?(this._line.loadCell(i,r),r):this._line.loadCell(i,new d.CellData)}translateToString(i,r,u){return this._line.translateToString(i,r,u)}}},8285:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;let d=a(8771),i=a(8460),r=a(844);class u extends r.Disposable{constructor(p){super(),this._core=p,this._onBufferChange=this.register(new i.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=u},7975:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,d){return this._core.registerCsiHandler(a,i=>d(i.toArray()))}addCsiHandler(a,d){return this.registerCsiHandler(a,d)}registerDcsHandler(a,d){return this._core.registerDcsHandler(a,(i,r)=>d(i,r.toArray()))}addDcsHandler(a,d){return this.registerDcsHandler(a,d)}registerEscHandler(a,d){return this._core.registerEscHandler(a,d)}addEscHandler(a,d){return this.registerEscHandler(a,d)}registerOscHandler(a,d){return this._core.registerOscHandler(a,d)}addOscHandler(a,d){return this.registerOscHandler(a,d)}}},7090:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;let r=a(8460),u=a(844),l=a(5295),p=a(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let f=s.BufferService=class extends u.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new r.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new l.BufferSet(o,this))}resize(o,h){this.cols=o,this.rows=h,this.buffers.resize(o,h),this._onResize.fire({cols:o,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,h=!1){let _=this.buffer,m;m=this._cachedBlankLine,m&&m.length===this.cols&&m.getFg(0)===o.fg&&m.getBg(0)===o.bg||(m=_.getBlankLine(o,h),this._cachedBlankLine=m),m.isWrapped=h;let y=_.ybase+_.scrollTop,C=_.ybase+_.scrollBottom;if(_.scrollTop===0){let E=_.lines.isFull;C===_.lines.length-1?E?_.lines.recycle().copyFrom(m):_.lines.push(m.clone()):_.lines.splice(C+1,0,m.clone()),E?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{let E=C-y+1;_.lines.shiftElements(y+1,E-1,-1),_.lines.set(C,m.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)}scrollLines(o,h,_){let m=this.buffer;if(o<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else o+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);let y=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+o,m.ybase),0),y!==m.ydisp&&(h||this._onScroll.fire(m.ydisp))}};s.BufferService=f=d([i(0,p.IOptionsService)],f)},7994:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,d){this._charsets[a]=d,this.glevel===a&&(this.charset=d)}}},1753:function(v,s,a){var d=this&&this.__decorate||function(m,y,C,E){var D,g=arguments.length,b=g<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,C):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(m,y,C,E);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},i=this&&this.__param||function(m,y){return function(C,E){y(C,E,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;let r=a(2585),u=a(8460),l=a(844),p={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:m=>m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)},VT200:{events:19,restrict:m=>m.action!==32},DRAG:{events:23,restrict:m=>m.action!==32||m.button!==3},ANY:{events:31,restrict:m=>!0}};function f(m,y){let C=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(C|=64,C|=m.action):(C|=3&m.button,4&m.button&&(C|=64),8&m.button&&(C|=128),m.action===32?C|=32:m.action!==0||y||(C|=3)),C}let o=String.fromCharCode,h={DEFAULT:m=>{let y=[f(m,!1)+32,m.col+32,m.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${o(y[0])}${o(y[1])}${o(y[2])}`},SGR:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${f(m,!0)};${m.col};${m.row}${y}`},SGR_PIXELS:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${f(m,!0)};${m.x};${m.y}${y}`}},_=s.CoreMouseService=class extends l.Disposable{constructor(m,y){super(),this._bufferService=m,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new u.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(p))this.addProtocol(C,p[C]);for(let C of Object.keys(h))this.addEncoding(C,h[C]);this.reset()}addProtocol(m,y){this._protocols[m]=y}addEncoding(m,y){this._encodings[m]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(m){if(!this._protocols[m])throw new Error(`unknown protocol "${m}"`);this._activeProtocol=m,this._onProtocolChange.fire(this._protocols[m].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(m){if(!this._encodings[m])throw new Error(`unknown encoding "${m}"`);this._activeEncoding=m}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(m){if(m.col<0||m.col>=this._bufferService.cols||m.row<0||m.row>=this._bufferService.rows||m.button===4&&m.action===32||m.button===3&&m.action!==32||m.button!==4&&(m.action===2||m.action===3)||(m.col++,m.row++,m.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,m,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(m))return!1;let y=this._encodings[this._activeEncoding](m);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=m,!0}explainEvents(m){return{down:!!(1&m),up:!!(2&m),drag:!!(4&m),move:!!(8&m),wheel:!!(16&m)}}_equalEvents(m,y,C){if(C){if(m.x!==y.x||m.y!==y.y)return!1}else if(m.col!==y.col||m.row!==y.row)return!1;return m.button===y.button&&m.action===y.action&&m.ctrl===y.ctrl&&m.alt===y.alt&&m.shift===y.shift}};s.CoreMouseService=_=d([i(0,r.IBufferService),i(1,r.ICoreService)],_)},6975:function(v,s,a){var d=this&&this.__decorate||function(_,m,y,C){var E,D=arguments.length,g=D<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(_,m,y,C);else for(var b=_.length-1;b>=0;b--)(E=_[b])&&(g=(D<3?E(g):D>3?E(m,y,g):E(m,y))||g);return D>3&&g&&Object.defineProperty(m,y,g),g},i=this&&this.__param||function(_,m){return function(y,C){m(y,C,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;let r=a(1439),u=a(8460),l=a(844),p=a(2585),f=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),h=s.CoreService=class extends l.Disposable{constructor(_,m,y){super(),this._bufferService=_,this._logService=m,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new u.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new u.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,r.clone)(f),this.decPrivateModes=(0,r.clone)(o)}reset(){this.modes=(0,r.clone)(f),this.decPrivateModes=(0,r.clone)(o)}triggerDataEvent(_,m=!1){if(this._optionsService.rawOptions.disableStdin)return;let y=this._bufferService.buffer;m&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),m&&this._onUserInput.fire(),this._logService.debug(`sending data "${_}"`,()=>_.split("").map(C=>C.charCodeAt(0))),this._onData.fire(_)}triggerBinaryEvent(_){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${_}"`,()=>_.split("").map(m=>m.charCodeAt(0))),this._onBinary.fire(_))}};s.CoreService=h=d([i(0,p.IBufferService),i(1,p.ILogService),i(2,p.IOptionsService)],h)},9074:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;let d=a(8055),i=a(8460),r=a(844),u=a(6106),l=0,p=0;class f extends r.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new u.SortedList(_=>_?.marker.line),this._onDecorationRegistered=this.register(new i.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new i.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,r.toDisposable)(()=>this.reset()))}registerDecoration(_){if(_.marker.isDisposed)return;let m=new o(_);if(m){let y=m.marker.onDispose(()=>m.dispose());m.onDispose(()=>{m&&(this._decorations.delete(m)&&this._onDecorationRemoved.fire(m),y.dispose())}),this._decorations.insert(m),this._onDecorationRegistered.fire(m)}return m}reset(){for(let _ of this._decorations.values())_.dispose();this._decorations.clear()}*getDecorationsAtCell(_,m,y){var C,E,D;let g=0,b=0;for(let L of this._decorations.getKeyIterator(m))g=(C=L.options.x)!==null&&C!==void 0?C:0,b=g+((E=L.options.width)!==null&&E!==void 0?E:1),_>=g&&_<b&&(!y||((D=L.options.layer)!==null&&D!==void 0?D:"bottom")===y)&&(yield L)}forEachDecorationAtCell(_,m,y,C){this._decorations.forEachByKey(m,E=>{var D,g,b;l=(D=E.options.x)!==null&&D!==void 0?D:0,p=l+((g=E.options.width)!==null&&g!==void 0?g:1),_>=l&&_<p&&(!y||((b=E.options.layer)!==null&&b!==void 0?b:"bottom")===y)&&C(E)})}}s.DecorationService=f;class o extends r.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(_){super(),this.options=_,this.onRenderEmitter=this.register(new i.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new i.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=_.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;let d=a(2585),i=a(8343);class r{constructor(...l){this._entries=new Map;for(let[p,f]of l)this.set(p,f)}set(l,p){let f=this._entries.get(l);return this._entries.set(l,p),f}forEach(l){for(let[p,f]of this._entries.entries())l(p,f)}has(l){return this._entries.has(l)}get(l){return this._entries.get(l)}}s.ServiceCollection=r,s.InstantiationService=class{constructor(){this._services=new r,this._services.set(d.IInstantiationService,this)}setService(u,l){this._services.set(u,l)}getService(u){return this._services.get(u)}createInstance(u,...l){let p=(0,i.getServiceDependencies)(u).sort((h,_)=>h.index-_.index),f=[];for(let h of p){let _=this._services.get(h.id);if(!_)throw new Error(`[createInstance] ${u.name} depends on UNKNOWN service ${h.id}.`);f.push(_)}let o=p.length>0?p[0].index:l.length;if(l.length!==o)throw new Error(`[createInstance] First service dependency of ${u.name} at position ${o+1} conflicts with ${l.length} static arguments`);return new u(...l,...f)}}},7866:function(v,s,a){var d=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},i=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let r=a(844),u=a(2585),l={trace:u.LogLevelEnum.TRACE,debug:u.LogLevelEnum.DEBUG,info:u.LogLevelEnum.INFO,warn:u.LogLevelEnum.WARN,error:u.LogLevelEnum.ERROR,off:u.LogLevelEnum.OFF},p,f=s.LogService=class extends r.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=u.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),p=this}_updateLogLevel(){this._logLevel=l[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let h=0;h<o.length;h++)typeof o[h]=="function"&&(o[h]=o[h]())}_log(o,h,_){this._evalLazyOptionalParams(_),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,..._)}trace(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.TRACE&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}debug(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.DEBUG&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}info(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.INFO&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,o,h)}warn(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.WARN&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,o,h)}error(o,...h){var _,m;this._logLevel<=u.LogLevelEnum.ERROR&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,o,h)}};s.LogService=f=d([i(0,u.IOptionsService)],f),s.setTraceLogger=function(o){p=o},s.traceCall=function(o,h,_){if(typeof _.value!="function")throw new Error("not supported");let m=_.value;_.value=function(...y){if(p.logLevel!==u.LogLevelEnum.TRACE)return m.apply(this,y);p.trace(`GlyphRenderer#${m.name}(${y.map(E=>JSON.stringify(E)).join(", ")})`);let C=m.apply(this,y);return p.trace(`GlyphRenderer#${m.name} return`,C),C}}},7302:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;let d=a(8460),i=a(844),r=a(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:r.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let u=["normal","bold","100","200","300","400","500","600","700","800","900"];class l extends i.Disposable{constructor(f){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;let o=Object.assign({},s.DEFAULT_OPTIONS);for(let h in f)if(h in o)try{let _=f[h];o[h]=this._sanitizeAndValidateOption(h,_)}catch(_){console.error(_)}this.rawOptions=o,this.options=Object.assign({},o),this._setupOptions()}onSpecificOptionChange(f,o){return this.onOptionChange(h=>{h===f&&o(this.rawOptions[f])})}onMultipleOptionChange(f,o){return this.onOptionChange(h=>{f.indexOf(h)!==-1&&o()})}_setupOptions(){let f=h=>{if(!(h in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},o=(h,_)=>{if(!(h in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);_=this._sanitizeAndValidateOption(h,_),this.rawOptions[h]!==_&&(this.rawOptions[h]=_,this._onOptionChange.fire(h))};for(let h in this.rawOptions){let _={get:f.bind(this,h),set:o.bind(this,h)};Object.defineProperty(this.options,h,_)}}_sanitizeAndValidateOption(f,o){switch(f){case"cursorStyle":if(o||(o=s.DEFAULT_OPTIONS[f]),!function(h){return h==="block"||h==="underline"||h==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${f}`);break;case"wordSeparator":o||(o=s.DEFAULT_OPTIONS[f]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=u.includes(o)?o:s.DEFAULT_OPTIONS[f];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${f} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${f} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${f} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${f} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}s.OptionsService=l},2660:function(v,s,a){var d=this&&this.__decorate||function(l,p,f,o){var h,_=arguments.length,m=_<3?p:o===null?o=Object.getOwnPropertyDescriptor(p,f):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(l,p,f,o);else for(var y=l.length-1;y>=0;y--)(h=l[y])&&(m=(_<3?h(m):_>3?h(p,f,m):h(p,f))||m);return _>3&&m&&Object.defineProperty(p,f,m),m},i=this&&this.__param||function(l,p){return function(f,o){p(f,o,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;let r=a(2585),u=s.OscLinkService=class{constructor(l){this._bufferService=l,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(l){let p=this._bufferService.buffer;if(l.id===void 0){let y=p.addMarker(p.ybase+p.y),C={data:l,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(C,y)),this._dataByLinkId.set(C.id,C),C.id}let f=l,o=this._getEntryIdKey(f),h=this._entriesWithId.get(o);if(h)return this.addLineToLink(h.id,p.ybase+p.y),h.id;let _=p.addMarker(p.ybase+p.y),m={id:this._nextId++,key:this._getEntryIdKey(f),data:f,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(m,_)),this._entriesWithId.set(m.key,m),this._dataByLinkId.set(m.id,m),m.id}addLineToLink(l,p){let f=this._dataByLinkId.get(l);if(f&&f.lines.every(o=>o.line!==p)){let o=this._bufferService.buffer.addMarker(p);f.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(f,o))}}getLinkData(l){var p;return(p=this._dataByLinkId.get(l))===null||p===void 0?void 0:p.data}_getEntryIdKey(l){return`${l.id};;${l.uri}`}_removeMarkerFromLink(l,p){let f=l.lines.indexOf(p);f!==-1&&(l.lines.splice(f,1),l.lines.length===0&&(l.data.id!==void 0&&this._entriesWithId.delete(l.key),this._dataByLinkId.delete(l.id)))}};s.OscLinkService=u=d([i(0,r.IBufferService)],u)},8343:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let a="di$target",d="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(i){return i[d]||[]},s.createDecorator=function(i){if(s.serviceRegistry.has(i))return s.serviceRegistry.get(i);let r=function(u,l,p){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(f,o,h){o[a]===o?o[d].push({id:f,index:h}):(o[d]=[{id:f,index:h}],o[a]=o)})(r,u,p)};return r.toString=()=>i,s.serviceRegistry.set(i,r),r}},2585:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let d=a(8343);var i;s.IBufferService=(0,d.createDecorator)("BufferService"),s.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),s.ICoreService=(0,d.createDecorator)("CoreService"),s.ICharsetService=(0,d.createDecorator)("CharsetService"),s.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(r){r[r.TRACE=0]="TRACE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.OFF=5]="OFF"}(i||(s.LogLevelEnum=i={})),s.ILogService=(0,d.createDecorator)("LogService"),s.IOptionsService=(0,d.createDecorator)("OptionsService"),s.IOscLinkService=(0,d.createDecorator)("OscLinkService"),s.IUnicodeService=(0,d.createDecorator)("UnicodeService"),s.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;let d=a(8460),i=a(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;let r=new i.UnicodeV6;this.register(r),this._active=r.version,this._activeProvider=r}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(r){if(!this._providers[r])throw new Error(`unknown Unicode version "${r}"`);this._active=r,this._activeProvider=this._providers[r],this._onChange.fire(r)}register(r){this._providers[r.version]=r}wcwidth(r){return this._activeProvider.wcwidth(r)}getStringCellWidth(r){let u=0,l=r.length;for(let p=0;p<l;++p){let f=r.charCodeAt(p);if(55296<=f&&f<=56319){if(++p>=l)return u+this.wcwidth(f);let o=r.charCodeAt(p);56320<=o&&o<=57343?f=1024*(f-55296)+o-56320+65536:u+=this.wcwidth(o)}u+=this.wcwidth(f)}return u}}}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v].call(a.exports,a,a.exports,n),a.exports}var c={};return(()=>{var v=c;Object.defineProperty(v,"__esModule",{value:!0}),v.Terminal=void 0;let s=n(9042),a=n(3236),d=n(844),i=n(5741),r=n(8285),u=n(7975),l=n(7090),p=["cols","rows"];class f extends d.Disposable{constructor(h){super(),this._core=this.register(new a.Terminal(h)),this._addonManager=this.register(new i.AddonManager),this._publicOptions=Object.assign({},this._core.options);let _=y=>this._core.options[y],m=(y,C)=>{this._checkReadonlyOptions(y),this._core.options[y]=C};for(let y in this._core.options){let C={get:_.bind(this,y),set:m.bind(this,y)};Object.defineProperty(this._publicOptions,y,C)}}_checkReadonlyOptions(h){if(p.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new u.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new l.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new r.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let h=this._core.coreService.decPrivateModes,_="none";switch(this._core.coreMouseService.activeProtocol){case"X10":_="x10";break;case"VT200":_="vt200";break;case"DRAG":_="drag";break;case"ANY":_="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:_,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(let _ in h)this._publicOptions[_]=h[_]}blur(){this._core.blur()}focus(){this._core.focus()}resize(h,_){this._verifyIntegers(h,_),this._core.resize(h,_)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){var _,m,y;return this._checkProposedApi(),this._verifyPositiveIntegers((_=h.x)!==null&&_!==void 0?_:0,(m=h.width)!==null&&m!==void 0?m:0,(y=h.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,_,m){this._verifyIntegers(h,_,m),this._core.select(h,_,m)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,_){this._verifyIntegers(h,_),this._core.selectLines(h,_)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,_){this._core.write(h,_)}writeln(h,_){this._core.write(h),this._core.write(`\r
`,_)}paste(h){this._core.paste(h)}refresh(h,_){this._verifyIntegers(h,_),this._core.refresh(h,_)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return s}_verifyIntegers(...h){for(let _ of h)if(_===1/0||isNaN(_)||_%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(let _ of h)if(_&&(_===1/0||isNaN(_)||_%1!=0||_<0))throw new Error("This API only accepts positive integers")}}v.Terminal=f})(),c})())});var VS=function(e){return function(t){for(var n=t.length,c=new Array(n),v=0;v<n;v++)c[v]=e(t[v]);return c}};var Nd={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var ye=function(e){return e.identity},be={identity:function(e){return e},Semigroupoid0:function(){return Nd}};var en=!0;var Pe=function(e){return function(t){return function(n){return e(n)(t)}}},Ce=function(e){return function(t){return e}};var GS=function(e){return function(t){return t(e)}};var tn=function(){function e(){}return e.value=new e,e}();var V=function(e){return e.map};var vt=function(e){return V(e)(Ce(void 0))},Js=function(e){var t=V(e);return function(n){return function(c){return t(Ce(c))(n)}}},Wd=function(e){var t=V(e);return function(n){return t(Ce(n))}};var It={map:VS};var JS=function(e){return function(t){return e+t}},jS=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var xn=function(e){return e.reflectSymbol};var ku={append:JS};var jt={append:jS};var me=function(e){return e.append};var fm={alt:me(jt),Functor0:function(){return It}},Cn=function(e){return e.alt};var KS=function(e){return function(t){for(var n=e.length,c=t.length,v=new Array(n*c),s=0,a=0;a<n;a++)for(var d=e[a],i=0;i<c;i++)v[s++]=d(t[i]);return v}};var OO=ye(be);var Ou={apply:KS,Functor0:function(){return It}},ut=function(e){return e.apply};var To=function(e){var t=ut(e),n=V(e.Functor0());return function(c){return function(v){return t(n(Ce(OO))(c))(v)}}};var ee=function(e){return e.pure},Dl=function(e){var t=ee(e);return function(n){return function(c){if(!n)return c;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,c.constructor.name])}}},pr=function(e){var t=ee(e);return function(n){return function(c){if(n)return c;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,c.constructor.name])}}},Cl=function(e){var t=ut(e.Apply0()),n=ee(e);return function(c){return function(v){return t(n(c))(v)}}};var js={pure:function(e){return[e]},Apply0:function(){return Ou}};var QS=function(e){return function(t){for(var n=[],c=0,v=e.length;c<v;c++)Array.prototype.push.apply(n,t(e[c]));return n}};var Mt=function(e){return e.discard};var vi={bind:QS,Apply0:function(){return Ou}},ie=function(e){return e.bind},ln=function(e){return Pe(ie(e))},Ks=function(e){var t=ln(e);return function(n){return function(c){return function(v){return t(n)(c(v))}}}};var Lt={discard:function(e){return ie(e)}};var NO=function(e){return function(t){if(e<1)return[];var n=new Array(e);return n.fill(t)}},BO=function(e){return function(t){for(var n=[],c=0,v=0;v<e;v++)n[c++]=t;return n}},XS=typeof Array.prototype.fill=="function"?NO:BO,YS=function(){function e(v,s){this.head=v,this.tail=s}var t={};function n(v){return function(s){return new e(v,s)}}function c(v){for(var s=[],a=0,d=v;d!==t;)s[a++]=d.head,d=d.tail;return s}return function(v){return function(s){return c(v(n)(t)(s))}}}(),Jr=function(e){return e.length},pm=function(e){return function(t){return function(n){return n.length===0?e({}):t(n[0])(n.slice(1))}}},ZS=function(e){return function(t){return function(n){return function(c){return c<0||c>=n.length?t:e(n[c])}}}};var eE=function(e){return function(t){return function(n){return function(c){for(var v=0,s=c.length;v<s;v++)if(n(c[v]))return e(v);return t}}}};var tE=function(e){return function(t){return function(n){return function(c){if(n<0||n>=c.length)return t;var v=c.slice();return v.splice(n,1),e(v)}}}};var bl=function(e){return function(t){return t.filter(e)}};var nE=function(){function e(t,n,c,v,s,a){var d,i,r,u,l,p,f;for(d=s+(a-s>>1),d-s>1&&e(t,n,v,c,s,d),a-d>1&&e(t,n,v,c,d,a),i=s,r=d,u=s;i<d&&r<a;)l=v[i],p=v[r],f=n(t(l)(p)),f>0?(c[u++]=p,++r):(c[u++]=l,++i);for(;i<d;)c[u++]=v[i++];for(;r<a;)c[u++]=v[r++]}return function(t){return function(n){return function(c){var v;return c.length<2?c:(v=c.slice(0),e(t,n,v,c.slice(0),0,c.length),v)}}}}(),qd=function(e){return function(t){return function(n){return n.slice(e,t)}}};var oE=function(e){var t=ie(e.Bind1()),n=Dl(e.Applicative0());return function(c){return function(v){return t(c)(function(s){return n(s)(v)})}}};var aE=function(e){var t=ie(e.Bind1()),n=ee(e.Applicative0());return function(c){return function(v){return t(v)(function(s){return n(c(s))})}}},Jn=function(e){var t=ie(e.Bind1()),n=ee(e.Applicative0());return function(c){return function(v){return t(c)(function(s){return t(v)(function(a){return n(s(a))})})}}};var iE=String.fromCharCode(65535),uE=String.fromCharCode(0),UO=Number.POSITIVE_INFINITY,qO=Number.NEGATIVE_INFINITY;var zd=function(e){return function(t){return function(n){return function(c){return function(v){return c<v?e:c===v?t:n}}}}};var sE=zd,cE=zd,lE=zd,fE=zd,dE=function(e){return function(t){return function(n){for(var c=0,v=t.length,s=n.length;c<v&&c<s;){var a=t[c],d=n[c],i=e(a)(d);if(i!==0)return i;c++}return v===s?0:v>s?-1:1}}};var Vd=function(e){return function(t){return e===t}};var pE=Vd,hE=Vd,_E=Vd,vE=Vd,mE=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var c=0;c<t.length;c++)if(!e(t[c])(n[c]))return!1;return!0}}};var Gd={eq:function(e){return function(t){return!0}}},_r={eq:vE};var Sl={eq:hE},El={eq:pE},gE={eq:_E};var Ue=function(e){return e.eq};var Xo=function(e){return{eq:mE(Ue(e))}};var fe=function(){function e(){}return e.value=new e,e}(),pe=function(){function e(){}return e.value=new e,e}(),Ie=function(){function e(){}return e.value=new e,e}();var vr={compare:function(e){return function(t){return Ie.value}},Eq0:function(){return Gd}},Kt=function(){return{compare:lE(fe.value)(Ie.value)(pe.value),Eq0:function(){return _r}}}();var Xs=function(){return{compare:cE(fe.value)(Ie.value)(pe.value),Eq0:function(){return Sl}}}(),bn=function(){return{compare:sE(fe.value)(Ie.value)(pe.value),Eq0:function(){return El}}}(),Jd=function(){return{compare:fE(fe.value)(Ie.value)(pe.value),Eq0:function(){return gE}}}();var Te=function(e){return e.compare},XO=Te(bn);var Ml=function(e){var t=Te(e);return function(n){return function(c){var v=t(n)(c);if(v instanceof fe)return c;if(v instanceof Ie||v instanceof pe)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[v.constructor.name])}}},jd=function(e){var t=Te(e);return function(n){return function(c){var v=t(n)(c);if(v instanceof fe||v instanceof Ie)return n;if(v instanceof pe)return c;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[v.constructor.name])}}},gi=function(e){var t=Te(e),n=Xo(e.Eq0());return{compare:function(){var c=function(v){return function(s){var a=t(v)(s);if(a instanceof Ie)return 0;if(a instanceof fe)return 1;if(a instanceof pe)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[a.constructor.name])}};return function(v){return function(s){return XO(0)(dE(c)(v)(s))}}}(),Eq0:function(){return n}}};var vm=function(e){var t=jd(e),n=Ml(e);return function(c){return function(v){return function(s){return t(v)(n(c)(s))}}}};var Yo=function(e){return e.top};var Kd={top:2147483647,bottom:-2147483648,Ord0:function(){return bn}},Ll={top:iE,bottom:uE,Ord0:function(){return Jd}};var Ia=function(e){return e.bottom};var wE=function(e){return e.toString()},SE=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var EE=function(e){var t=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(n,c){switch(n){case'"':case"\\":return"\\"+n;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var v=c+1,s=v<t&&e[v]>="0"&&e[v]<="9"?"\\&":"";return"\\"+n.charCodeAt(0).toString(10)+s})+'"'};var $a={show:EE};var Lo={show:SE},ea={show:wE};var TE={show:function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[e.constructor.name])}},Le=function(e){return e.show};var r2=ye(be),G=function(){function e(){}return e.value=new e,e}(),z=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var mm=function(e){var t=me(e);return{append:function(n){return function(c){if(n instanceof G)return c;if(c instanceof G)return n;if(n instanceof z&&c instanceof z)return new z(t(n.value0)(c.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,c.constructor.name])}}}};var LE=function(e){var t=mm(e);return{mempty:G.value,Semigroup0:function(){return t}}};var rt=function(e){return function(t){return function(n){if(n instanceof G)return e;if(n instanceof z)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},ka=rt(!0)(Ce(!1)),Zs=rt(!1)(Ce(!0));var Tt={map:function(e){return function(t){return t instanceof z?new z(e(t.value0)):G.value}}},o2=V(Tt);var Mn=function(e){return rt(e)(r2)},jr=function(){return function(e){if(e instanceof z)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var Yd={apply:function(e){return function(t){if(e instanceof z)return o2(e.value0)(t);if(e instanceof G)return G.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Tt}};var mr={bind:function(e){return function(t){if(e instanceof z)return t(e.value0);if(e instanceof G)return G.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return Yd}};var qe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),He=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Di={map:function(e){return function(t){if(t instanceof qe)return new qe(t.value0);if(t instanceof He)return new He(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},a2=V(Di);var gn=function(e){return function(t){return function(n){if(n instanceof qe)return e(n.value0);if(n instanceof He)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Zd=function(){return gn(Ce(G.value))(z.create)}();var FE=gn(Ce(!1))(Ce(!0));var xE={apply:function(e){return function(t){if(e instanceof qe)return new qe(e.value0);if(e instanceof He)return a2(e.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Di}};var Hu=function(){return{pure:He.create,Apply0:function(){return xE}}}();var Fo=function(e){return e};var Oa={map:function(e){return function(t){return e(t)}}};var ep={apply:function(e){return function(t){return e(t)}},Functor0:function(){return Oa}},gm={bind:function(e){return function(t){return t(e)}},Apply0:function(){return ep}},tp={pure:Fo,Apply0:function(){return ep}},ho={Applicative0:function(){return tp},Bind1:function(){return gm}};var Ha={mempty:"",Semigroup0:function(){return ku}};var Pu={mempty:[],Semigroup0:function(){return jt}};var at=function(e){return e.mempty};var RE=function(e){return function(){return e}},$E=function(e){return function(t){return function(){return t(e())()}}};var kE=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},ta={Applicative0:function(){return Xt},Bind1:function(){return Kn}},Kn={bind:$E,Apply0:function(){return Cm(0)}},Xt={pure:RE,Apply0:function(){return Cm(0)}},OE=kE("functorEffect","Effect",function(){return{map:Cl(Xt)}}),Cm=kE("applyEffect","Effect",function(){return{apply:Jn(ta),Functor0:function(){return OE(0)}}}),Re=OE(20),bm=Cm(23);var HE=function(e){return function(){return{value:e}}};var Ke=function(e){return function(){return e.value}},PE=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},Pt=function(e){return function(t){return function(){t.value=e}}};var p2=vt(Re),nn=HE,wm=PE,NE=function(e){return wm(function(t){var n=e(t);return{state:n,value:n}})},Kr=function(e){return function(t){return p2(NE(e)(t))}};var v2=ln(Kn),m2=V(Re),hn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cr=function(e){return e.tailRecM};var rp={tailRecM:function(e){return function(t){var n=function(c){if(c instanceof rn)return c.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[c.constructor.name])};return function(){var v=v2(nn)(e(t))();return function(){for(;!function(){var a=Ke(v)();if(a instanceof hn){var d=e(a.value0)();return Pt(d)(v)(),!1}if(a instanceof rn)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[a.constructor.name])}(););return{}}(),m2(n)(Ke(v))()}}},Monad0:function(){return ta}};var BE=function(e){return function(t){return function(){return e(t())}}};var op=function(e){return function(t){return function(){for(var n=0,c=e.length;n<c;n++)t(e[n])()}}};var ap={map:BE};var C2=function(){function e(t,n,c,v,s,a){var d,i,r,u,l,p,f;for(d=s+(a-s>>1),d-s>1&&e(t,n,v,c,s,d),a-d>1&&e(t,n,v,c,d,a),i=s,r=d,u=s;i<d&&r<a;)l=v[i],p=v[r],f=n(t(l)(p)),f>0?(c[u++]=p,++r):(c[u++]=l,++i);for(;i<d;)c[u++]=v[i++];for(;r<a;)c[u++]=v[r++]}return function(t){return function(n){return function(c){return function(){return c.length<2||e(t,n,c,c.slice(0),0,c.length),c}}}}}();var jE=function(e){return function(t){return e&&t}},KE=function(e){return function(t){return e||t}},QE=function(e){return!e};var Fl=function(e){return e.tt};var na=function(e){return e.not};var Lm=function(e){return e.implies};var xl=function(e){return e.ff};var Nu=function(e){return e.disj},_o={ff:!1,tt:!0,implies:function(e){return function(t){return Nu(_o)(na(_o)(e))(t)}},conj:jE,disj:KE,not:QE};var tc=function(e){return e.conj},Al=function(e){var t=xl(e),n=Fl(e),c=Lm(e),v=tc(e),s=Nu(e),a=na(e);return{ff:function(d){return t},tt:function(d){return n},implies:function(d){return function(i){return function(r){return c(d(r))(i(r))}}},conj:function(d){return function(i){return function(r){return v(d(r))(i(r))}}},disj:function(d){return function(i){return function(r){return s(d(r))(i(r))}}},not:function(d){return function(i){return a(d(i))}}}};var YE=function(e){return function(t){return function(n){for(var c=t,v=n.length,s=v-1;s>=0;s--)c=e(n[s])(c);return c}}},ZE=function(e){return function(t){return function(n){for(var c=t,v=n.length,s=0;s<v;s++)c=e(c)(n[s]);return c}}};var eT={empty:[],Alt0:function(){return fm}},Rr=function(e){return e.empty};var ne=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Pa=function(e){return function(t){return e(t.value0)(t.value1)}};var on=function(e){return e.value1};var Na={map:function(e){return function(t){return new ne(t.value0,e(t.value1))}}};var Nn=function(e){return e.value0};var up=function(e){var t=Ue(e);return function(n){var c=Ue(n);return{eq:function(v){return function(s){return t(v.value0)(s.value0)&&c(v.value1)(s.value1)}}}}},Bu=function(e){var t=Te(e),n=up(e.Eq0());return function(c){var v=Te(c),s=n(c.Eq0());return{compare:function(a){return function(d){var i=t(a.value0)(d.value0);return i instanceof fe?fe.value:i instanceof pe?pe.value:v(a.value1)(d.value1)}},Eq0:function(){return s}}}};var Xr=function(e){return e.bimap};var P2={append:function(e){return function(t){return e instanceof z?e:t}}};var rT=function(){return{mempty:G.value,Semigroup0:function(){return P2}}}();var Z=function(e){return e};var lp=function(){return Z};var N2=lp();var fn=function(){return N2};var B2=ye(be);var W2=fn();var Nt=function(e){return e.foldr};var mt=function(e){var t=To(e.Apply0()),n=ee(e);return function(c){var v=Nt(c);return function(s){return v(function(a){return t(s(a))})(n(void 0))}}},fp=function(e){var t=mt(e);return function(n){return Pe(t(n))}};var Ht=function(e){return e.foldl};var xo=function(e){var t=Ht(e);return function(n){var c=me(n.Semigroup0()),v=at(n);return function(s){return function(a){var d=function(i){return function(r){return i.init?{init:!1,acc:r}:{init:!1,acc:c(i.acc)(c(s)(r))}}};return t(d)({init:!0,acc:v})(a).acc}}}};var Bt={foldr:function(e){return function(t){return function(n){if(n instanceof G)return t;if(n instanceof z)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof G)return t;if(n instanceof z)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=at(e);return function(n){return function(c){if(c instanceof G)return t;if(c instanceof z)return n(c.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,c.constructor.name])}}}};var dp={foldr:function(e){return function(t){return function(n){if(n instanceof qe)return t;if(n instanceof He)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof qe)return t;if(n instanceof He)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=at(e);return function(n){return function(c){if(c instanceof qe)return t;if(c instanceof He)return n(c.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,c.constructor.name])}}}};var cT=function(e){var t=Nt(e);return function(n){var c=me(n.Semigroup0()),v=at(n);return function(s){return t(function(a){return function(d){return c(s(a))(d)}})(v)}}},Ft={foldr:YE,foldl:ZE,foldMap:function(e){return cT(Ft)(e)}};var Ut=function(e){return e.foldMap};var pp=function(e){var t=Ut(e)(rT);return function(n){var c=Ue(n);return function(v){var s=t(function(a){var d=c(v)(a.value0);return d?new z(a.value1):G.value});return function(a){return W2(s(a))}}}};var Uu=function(e){var t=Ut(e);return function(n){return t(n)(B2)}};var pT=function(){function e(v){return[v]}function t(v){return function(s){return[v,s]}}function n(v){return function(s){return function(a){return[v,s,a]}}}function c(v){return function(s){return v.concat(s)}}return function(v){return function(s){return function(a){return function(d){return function(i){function r(u,l){switch(l-u){case 0:return a([]);case 1:return s(e)(d(i[u]));case 2:return v(s(t)(d(i[u])))(d(i[u+1]));case 3:return v(v(s(n)(d(i[u])))(d(i[u+1])))(d(i[u+2]));default:var p=u+Math.floor((l-u)/4)*2;return v(s(c)(r(u,p)))(r(p,l))}}return r(0,i.length)}}}}}}();var bH=ye(be),_n=function(e){return e.traverse};var Nl={traverse:function(e){var t=ee(e),n=V(e.Apply0().Functor0());return function(c){return function(v){if(v instanceof G)return t(G.value);if(v instanceof z)return n(z.create)(c(v.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[c.constructor.name,v.constructor.name])}}},sequence:function(e){var t=ee(e),n=V(e.Apply0().Functor0());return function(c){if(c instanceof G)return t(G.value);if(c instanceof z)return n(z.create)(c.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[c.constructor.name])}},Functor0:function(){return Tt},Foldable1:function(){return Bt}};var CT=function(e){var t=_n(e);return function(n){return t(n)(bH)}},Ei={traverse:function(e){var t=e.Apply0();return pT(ut(t))(V(t.Functor0()))(ee(e))},sequence:function(e){return CT(Ei)(e)},Functor0:function(){return It},Foldable1:function(){return Ft}};var bT=function(e){return function(t){return function(n){return function(c){return function(v){return function(s){for(var a=[],d=s;;){var i=v(d);if(e(i))return a;var r=t(i);a.push(n(r)),d=c(r)}}}}}}};var wT=function(e){return function(t){return function(n){return function(c){return function(v){return function(s){for(var a=[],d=s;;){var i=v(d);a.push(n(i));var r=c(i);if(e(r))return a;d=t(r)}}}}}}};var mp=function(e){return e.foldl1};var AH=jr();var zm={unfoldr1:wT(ka)(AH)(Nn)(on)};var RH=jr(),ra=function(e){return e.unfoldr};var ac={unfoldr:bT(ka)(RH)(Nn)(on),Unfoldable10:function(){return zm}};var WH=jr();var UH=me(jt);var yp=function(){return pm(Ce(G.value))(function(e){return function(t){return new z({head:e,tail:t})}})}();var Jm=function(){return pm(Ce(G.value))(function(e){return function(t){return new z(t)}})}();var MT=function(e){return nE(e)(function(t){if(t instanceof pe)return 1;if(t instanceof Ie)return 0;if(t instanceof fe)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[t.constructor.name])})};var jm=function(e){var t=Te(e);return function(n){return MT(t)(n)}};var uc=function(e){return[e]},LT=function(e){return Jr(e)===0};var FT=function(){return ZS(z.create)(G.value)}();var Dp=function(e){return FT(e)(0)};var Cp=function(e){return YS(Nt(e))};var xT=function(){return eE(z.create)(G.value)}();var Km=function(e){return function(t){var n=e<1;return n?t:qd(e)(Jr(t))(t)}};var AT=function(){return tE(z.create)(G.value)}(),Qm=function(e){return function(t){return function(n){return n.length===0?[]:rt(n)(function(c){return WH(AT(c)(n))})(xT(e(t))(n))}}};var In=function(e){return function(t){return UH([e])(t)}};var Xm=Pe(ie(vi)),oa=function(e){return Xm(function(){var t=rt([])(uc);return function(n){return t(e(n))}}())};var qH=function(){function e(a){this.fn=a}var t={},n=function(a,d){this.head=a,this.tail=d};function c(a){return new n(a,t)}function v(a){return function(d){return new n(a,d)}}function s(a){for(var d=[],i=a;i!==t;)d.push(i.head),i=i.tail;return d}return function(a){return function(d){return function(i){var r=function(l,p){return a(d(v)(i(l)))(p)},u=function(l,p,f){if(p===0)return l;var o=f[p-1];return new e(function(){var h=u(r(o,l),p-1,f);return h})};return function(l){for(var p=d(c)(i(l[l.length-1])),f=u(p,l.length-1,l);f instanceof e;)f=f.fn();return d(s)(f)}}}}}();var Yn=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var wp=function(e){var t=Rr(e);return function(n){return new Yn(n,t)}};var Sp=function(e){var t=Cn(e.Plus1().Alt0()),n=ee(e.Applicative0());return function(c){return t(n(c.value0))(c.value1)}};var sc=function(e){var t=V(e);return{map:function(n){return function(c){return new Yn(n(c.value0),t(n)(c.value1))}}}};var ql=function(e){var t=Ut(e),n=Ht(e),c=Nt(e);return{foldMap:function(v){var s=me(v.Semigroup0()),a=t(v);return function(d){return function(i){return s(d(i.value0))(a(d)(i.value1))}}},foldl:function(v){return function(s){return function(a){return n(v)(v(s)(a.value0))(a.value1)}}},foldr:function(v){return function(s){return function(a){return v(a.value0)(c(v)(s)(a.value1))}}}}};var tg=function(e){var t=Ht(e),n=Nt(e),c=ql(e);return{foldMap1:function(v){var s=me(v);return function(a){return function(d){return t(function(i){return function(r){return s(i)(a(r))}})(a(d.value0))(d.value1)}}},foldr1:function(v){return function(s){return rt(s.value0)(v(s.value0))(n(function(a){var d=rt(a)(v(a));return function(i){return z.create(d(i))}})(G.value)(s.value1))}},foldl1:function(v){return function(s){return t(v)(s.value0)(s.value1)}},Foldable0:function(){return c}}};var $T=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Zn=function(e){return e};var Ep=function(e){return function(t){return t.toString(e)}};var Tp=isFinite;var zl=Math.abs;var Vl=function(e){return function(t){return e%t}},rg=Math.round;var OT=Yo(Kd),HT=Ia(Kd);var og=16;var ag=function(){return $T(z.create)(G.value)}(),sP=function(e){if(!Tp(e))return 0;if(e>=Zn(OT))return OT;if(e<=Zn(HT))return HT;if(en)return Mn(0)(ag(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},cc=function(e){return sP(rg(e))};var cP=typeof Array.from=="function",bee=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",wee=typeof String.prototype.fromCodePoint=="function",lP=typeof String.prototype.codePointAt=="function",PT=function(e){return lP?function(t){return t.codePointAt(0)}:e};var NT=function(e){return function(t){return cP?function(n){return Array.from(n,t)}:e}};function Li(e){return e.charCodeAt(0)}function BT(e){return String.fromCharCode(e)}var Gl={Applicative0:function(){return js},Plus1:function(){return eT}};var WT=Ia(Ll),UT=Yo(Ll);var qT=function(e){return e.fromEnum};var Fi=function(e){return function(t){return function(n){return e(t(n)+1|0)}}},xi=function(e){return function(t){return function(n){return e(t(n)-1|0)}}};var ig=function(e){return e>=Li(WT)&&e<=Li(UT)?new z(BT(e)):G.value},vP={succ:Fi(ig)(Li),pred:xi(ig)(Li),Ord0:function(){return Jd}};var zT=function(){return{cardinality:Li(UT)-Li(WT)|0,toEnum:ig,fromEnum:Li,Bounded0:function(){return Ll},Enum1:function(){return vP}}}();var zu=function(e){return e.length};var Mp=function(e){return function(t){return t.substr(0,e)}},fc=function(e){return function(t){return t.substring(e)}};var Ai=function(e){return function(t){if(e>=0&&e<t.length)return t.charAt(e);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var JT=function(e){return function(t){return fc(zu(t)-e|0)(t)}};var Lp=function(e){return function(t){return Mp(zu(t)-e|0)(t)}};var ug=function(e){return function(t){return t.split(e)}};var Zr=function(e){return function(t){return t.join(e)}};var XT=function(e){return e===""};var jl=qT(zT),EP=V(Tt),TP=ra(ac);var ZT=function(e){return function(t){return(((e-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var e1=function(e){return 56320<=e&&e<=57343},t1=function(e){return 55296<=e&&e<=56319},MP=function(e){var t=zu(e);if(t===0)return G.value;if(t===1)return new z({head:jl(Ai(0)(e)),tail:""});var n=jl(Ai(1)(e)),c=jl(Ai(0)(e)),v=t1(c)&&e1(n);return v?new z({head:ZT(c)(n),tail:fc(2)(e)}):new z({head:c,tail:fc(1)(e)})},LP=function(e){return EP(function(t){return new ne(t.head,t.tail)})(MP(e))},FP=function(e){return TP(LP)(e)},xP=function(e){var t=jl(Ai(0)(e)),n=t1(t)&&zu(e)>1;if(n){var c=jl(Ai(1)(e)),v=e1(c);return v?ZT(t)(c):t}return t},AP=PT(xP),IP=NT(FP)(AP),Vu=function(e){return Jr(IP(e))};var sg=vm(bn),n1=Ml(bn),r1=jd(bn);var cg=vm(Xs);var o1=Le(Lo);var a1=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),i1=function(e){return function(t){return Vl(Vl(e)(t)+t)(t)}},HP=function(e){return function(t){return function(n){return function(c){var v=sg(0)(255)(e),s=Zn(v)/255,a=sg(0)(255)(t),d=Zn(a)/255,i=sg(0)(255)(n),r=n1(n1(v)(a))(i),u=r1(r1(v)(a))(i),l=r-u|0,p=Zn(l)/255,f=Zn(r+u|0)/(255*2),o=function(){if(l===0)return 0;if(en)return p/(1-zl(2*f-1));throw new Error("Failed pattern match at Color (line 160, column 3 - line 162, column 64): "+[])}(),h=Zn(i)/255,_=function(y){if(y===0)return 0;if(r===v)return i1((d-h)/p)(6);if(r===a)return(h-s)/p+2;if(en)return(s-d)/p+4;throw new Error("Failed pattern match at Color (line 150, column 3 - line 150, column 15): "+[y.constructor.name])},m=60*_(l);return new a1(m,o,f,c)}}}},Gu=function(e){return function(t){return function(n){return HP(e)(t)(n)(1)}}};var PP=function(e){return function(t){return function(n){return function(c){var v=cg(0)(1)(t),s=cg(0)(1)(n),a=cg(0)(1)(c);return new a1(e,v,s,a)}}}};var u1=function(e){return function(t){return function(n){return PP(e)(t)(n)(1)}}},s1=u1(0)(0)(1);var c1=function(e){var t=function(d){return o1(Zn(cc(100*d))/100)},n=t(e.value1*100)+"%",c=t(e.value2*100)+"%",v=t(e.value0),s=o1(e.value3),a=e.value3===1;return a?"hsl("+(v+(", "+(n+(", "+(c+")"))))):"hsla("+(v+(", "+(n+(", "+(c+(", "+(s+")")))))))};var NP=function(e){var t=e===360;return t?e:i1(e)(360)};var BP=function(e){var t=NP(e.value0)/60,n=(1-zl(2*e.value2-1))*e.value1,c=e.value2-n/2,v=n*(1-zl(Vl(t)(2)-1)),s=function(){if(t<1)return{r:n,g:v,b:0};if(1<=t&&t<2)return{r:v,g:n,b:0};if(2<=t&&t<3)return{r:0,g:n,b:v};if(3<=t&&t<4)return{r:0,g:v,b:n};if(4<=t&&t<5)return{r:v,g:0,b:n};if(en)return{r:n,g:0,b:v};throw new Error("Failed pattern match at Color (line 356, column 3 - line 362, column 43): "+[])}();return{r:s.r+c,g:s.g+c,b:s.b+c,a:e.value3}};var WP=function(e){var t=BP(e),n=cc(255*t.g),c=cc(255*t.r),v=cc(255*t.b);return{r:c,g:n,b:v,a:t.a}};var hc=function(e){var t=function(v){var s=Ep(og)(v),a=Vu(s)===1;return a?"0"+s:s},n=WP(e),c=function(){if(n.a===1)return"";if(en)return t(cc(255*n.a));throw new Error("Failed pattern match at Color (line 429, column 3 - line 431, column 46): "+[])}();return"#"+(t(n.r)+(t(n.g)+(t(n.b)+c)))};var lg=u1(0)(0)(0);var Ye=function(){function e(){}return e.value=new e,e}(),$e=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fg=function(e){return e},JP=function(e){return new $e(e.value0,e.value1)};var jP=function(e){var t=function(n){return function(c){var v=n,s=!1,a;function d(i,r){if(r instanceof $e&&r.value1 instanceof $e&&r.value1.value1 instanceof $e){v=new $e(r,i),c=r.value1.value1.value1;return}var u=function(p){return p instanceof $e&&p.value1 instanceof $e&&p.value1.value1 instanceof Ye?new $e(e(p.value0),new $e(e(p.value1.value0),Ye.value)):p instanceof $e&&p.value1 instanceof Ye?new $e(e(p.value0),Ye.value):Ye.value},l=function(p){return function(f){var o=p,h=!1,_;function m(y,C){if(y instanceof $e&&y.value0 instanceof $e&&y.value0.value1 instanceof $e&&y.value0.value1.value1 instanceof $e){o=y.value1,f=new $e(e(y.value0.value0),new $e(e(y.value0.value1.value0),new $e(e(y.value0.value1.value1.value0),C)));return}return h=!0,C}for(;!h;)_=m(o,f);return _}};return s=!0,l(i)(u(r))}for(;!s;)a=d(v,c);return a}};return t(Ye.value)},dg={map:jP};var $r={foldr:function(e){return function(t){var n=function(){var v=function(s){return function(a){var d=s,i=!1,r;function u(l,p){if(p instanceof Ye)return i=!0,l;if(p instanceof $e){d=new $e(p.value0,l),a=p.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[l.constructor.name,p.constructor.name])}for(;!i;)r=u(d,a);return r}};return v(Ye.value)}(),c=Ht($r)(Pe(e))(t);return function(v){return c(n(v))}}},foldl:function(e){var t=function(n){return function(c){var v=n,s=!1,a;function d(i,r){if(r instanceof Ye)return s=!0,i;if(r instanceof $e){v=e(i)(r.value0),c=r.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[r.constructor.name])}for(;!s;)a=d(v,c);return a}};return t},foldMap:function(e){var t=me(e.Semigroup0()),n=at(e);return function(c){return Ht($r)(function(v){var s=t(v);return function(a){return s(c(a))}})(n)}}};var KP=Nt($r);var Fp={append:function(e){return function(t){return KP($e.create)(t)(e)}}},h1=me(Fp);var _1={append:function(e){return function(t){return new Yn(e.value0,h1(e.value1)(JP(t)))}}};var QP={alt:h1,Functor0:function(){return dg}},v1=function(){return{empty:Ye.value,Alt0:function(){return QP}}}();var Ju=function(){var e=function(t){return function(n){var c=t,v=!1,s;function a(d,i){if(i instanceof Ye)return v=!0,d;if(i instanceof $e){c=new $e(i.value0,d),n=i.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[d.constructor.name,i.constructor.name])}for(;!v;)s=a(c,n);return s}};return e(Ye.value)}();var C1=function(e){return e instanceof Ye};var xp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var w1=function(e){var t=!1,n;function c(v){if(v.value0 instanceof Ye&&v.value1 instanceof Ye)return t=!0,G.value;if(v.value0 instanceof Ye){e=new xp(Ju(v.value1),Ye.value);return}if(v.value0 instanceof $e)return t=!0,new z(new ne(v.value0.value0,new xp(v.value0.value1,v.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[v.constructor.name])}for(;!t;)n=c(e);return n},S1=function(e){return function(t){return new xp(e.value0,new $e(t,e.value1))}};var E1=function(e){return e.value0 instanceof Ye&&e.value1 instanceof Ye};var T1=function(){return new xp(Ye.value,Ye.value)}();var vc=function(){function e(){}return e.value=new e,e}(),Ap=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var M1=function(e){return function(t){if(e instanceof vc)return t;if(t instanceof vc)return e;if(e instanceof Ap)return new Ap(e.value0,S1(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},oN=function(e){return function(t){return function(n){var c=function(s){return function(a){return function(d){var i=s,r=a,u=!1,l;function p(f,o,h){if(h instanceof Ye)return u=!0,o;if(h instanceof $e){i=f,r=f(o)(h.value0),d=h.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[f.constructor.name,o.constructor.name,h.constructor.name])}for(;!u;)l=p(i,r,d);return l}}},v=function(s){return function(a){var d=s,i=!1,r;function u(l,p){var f=w1(l);if(f instanceof G)return i=!0,c(function(o){return function(h){return h(o)}})(t)(p);if(f instanceof z){d=f.value0.value1,a=new $e(e(f.value0.value0),p);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[f.constructor.name])}for(;!i;)r=u(d,a);return r}};return v(n)(Ye.value)}}},L1=function(e){if(e instanceof vc)return G.value;if(e instanceof Ap)return new z(new ne(e.value0,function(){var t=E1(e.value1);return t?vc.value:oN(M1)(vc.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var F1=function(){return vc.value}(),x1=M1;var A1={append:x1};var I1=function(e){return function(t){return x1(e)(new Ap(t,T1))}};var iN=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},uN=me(A1);var pg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ql=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),R1=function(e){var t=!1,n;function c(v){var s=function(i){return i},a=function(i){return function(r){return new pg(i.value0,uN(i.value1)(r))}};if(v.value0 instanceof Ql){var d=L1(v.value1);if(d instanceof G)return t=!0,new Ql(v.value0.value0);if(d instanceof z){e=a(s(d.value0.value0)(v.value0.value0))(d.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[d.constructor.name])}if(v.value0 instanceof Xl)return t=!0,new Xl(v.value0.value0,function(i){return a(v.value0.value1(i))(v.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[v.value0.constructor.name])}for(;!t;)n=c(e);return n},ia=function(e){var t=V(e);return function(n){var c=n.Monad0(),v=V(c.Bind1().Apply0().Functor0()),s=ee(c.Applicative0()),a=cr(n);return function(d){var i=function(r){var u=R1(r);if(u instanceof Ql)return v(rn.create)(s(u.value0));if(u instanceof Xl)return v(hn.create)(d(t(u.value1)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[u.constructor.name])};return a(i)}}};var $1=function(e){return new pg(e,F1)};var mc={Applicative0:function(){return yr},Bind1:function(){return er}},Ba={map:function(e){return function(t){return ln(er)(function(){var n=ee(yr);return function(c){return n(e(c))}}())(t)}}},er={bind:function(e){return function(t){return new pg(e.value0,I1(e.value1)(t))}},Apply0:function(){return hg(0)}},yr={pure:function(e){return $1(Ql.create(e))},Apply0:function(){return hg(0)}},hg=iN("freeApply","Control.Monad.Free",function(){return{apply:Jn(mc),Functor0:function(){return Ba}}}),Ip=hg(77);var sN=ee(yr);var gt=function(e){return $1(new Xl(e,function(t){return sN(t)}))};var k1=function(e){var t=e.Monad0(),n=V(t.Bind1().Apply0().Functor0()),c=ee(t.Applicative0()),v=cr(e);return function(s){var a=function(d){var i=R1(d);if(i instanceof Ql)return n(rn.create)(c(i.value0));if(i instanceof Xl)return n(function(r){return hn.create(i.value1(r))})(s(i.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[i.constructor.name])};return v(a)}};var eo=function(e){return e.state},gc=function(e){var t=eo(e);return function(n){return t(function(c){return new ne(void 0,n)})}},Rn=function(e){var t=eo(e);return function(n){return t(function(c){return new ne(void 0,n(c))})}},Ku=function(e){var t=eo(e);return function(n){return t(function(c){var v=n(c);return new ne(v,v)})}},Qu=function(e){var t=eo(e);return function(n){return t(function(c){return new ne(n(c),c)})}},to=function(e){return eo(e)(function(t){return new ne(t,t)})};var lN={dimap:function(e){return function(t){return function(n){return function(c){return n(e(c))}}}}},Ii={first:function(e){return function(t){return e(Nn(t))}},second:function(e){return function(t){return e(on(t))}},Profunctor0:function(){return lN}};var Rp={dimap:function(e){return function(t){return function(n){return function(c){return t(n(e(c)))}}}}},Xu=function(e){return e.dimap};var go={first:function(e){return function(t){return new ne(e(t.value0),t.value1)}},second:V(Na),Profunctor0:function(){return Rp}},Yu=function(e){return e.second},yc=function(e){return e.first};var CN=fn(),bN=ye(be);var wN=function(e){return CN(e(bN))},Cr=function(e){return function(t){return wN(t)(e)}};var kp=function(e){return e},Or=function(e){return function(t){return kp(e)(Ce(t))}};var Bn=function(){var e={},t="Pure",n="Throw",c="Catch",v="Sync",s="Async",a="Bind",d="Bracket",i="Fork",r="Sequential",u="Map",l="Apply",p="Alt",f="Cons",o="Resume",h="Release",_="Finalizer",m="Finalized",y="Forked",C="Fiber",E="Thunk";function D(N,K,O,B){this.tag=N,this._1=K,this._2=O,this._3=B}function g(N){var K=function(O,B,W){return new D(N,O,B,W)};return K.tag=N,K}function b(N){return new D(t,void 0)}function L(N){try{N()}catch(K){setTimeout(function(){throw K},0)}}function w(N,K,O){try{return K(O())}catch(B){return N(B)}}function T(N,K,O){try{return K(O)()}catch(B){return O(N(B))(),b}}var M=function(){var N=1024,K=0,O=0,B=new Array(N),W=!1;function P(){var X;for(W=!0;K!==0;)K--,X=B[O],B[O]=void 0,O=(O+1)%N,X();W=!1}return{isDraining:function(){return W},enqueue:function(X){var J,ve;K===N&&(ve=W,P(),W=ve),B[(O+K)%N]=X,K++,W||P()}}}();function S(N){var K={},O=0,B=0;return{register:function(W){var P=O++;W.onComplete({rethrow:!0,handler:function(X){return function(){B--,delete K[P]}}})(),K[P]=W,B++},isEmpty:function(){return B===0},killAll:function(W,P){return function(){if(B===0)return P();var X=0,J={};function ve(De){J[De]=K[De].kill(W,function(se){return function(){delete J[De],X--,N.isLeft(se)&&N.fromLeft(se)&&setTimeout(function(){throw N.fromLeft(se)},0),X===0&&P()}})()}for(var Ee in K)K.hasOwnProperty(Ee)&&(X++,ve(Ee));return K={},O=0,B=0,function(De){return new D(v,function(){for(var se in J)J.hasOwnProperty(se)&&J[se]()})}}}}}var F=0,x=1,R=2,A=3,I=4,$=5,k=6;function H(N,K,O){var B=0,W=F,P=O,X=null,J=null,ve=null,Ee=null,De=null,se=0,we=0,wt=null,Jt=!0;function Wt(le){for(var oe,j,ae;;)switch(oe=null,j=null,ae=null,W){case R:W=x;try{P=ve(P),Ee===null?ve=null:(ve=Ee._1,Ee=Ee._2)}catch(Be){W=$,X=N.left(Be),P=null}break;case A:N.isLeft(P)?(W=$,X=P,P=null):ve===null?W=$:(W=R,P=N.fromRight(P));break;case x:switch(P.tag){case a:ve&&(Ee=new D(f,ve,Ee)),ve=P._2,W=x,P=P._1;break;case t:ve===null?(W=$,P=N.right(P._1)):(W=R,P=P._1);break;case v:W=A,P=w(N.left,N.right,P._1);break;case s:W=I,P=T(N.left,P._1,function(Be){return function(){B===le&&(B++,M.enqueue(function(){B===le+1&&(W=A,P=Be,Wt(B))}))}});return;case n:W=$,X=N.left(P._1),P=null;break;case c:ve===null?De=new D(f,P,De,J):De=new D(f,P,new D(f,new D(o,ve,Ee),De,J),J),ve=null,Ee=null,W=x,P=P._1;break;case d:se++,ve===null?De=new D(f,P,De,J):De=new D(f,P,new D(f,new D(o,ve,Ee),De,J),J),ve=null,Ee=null,W=x,P=P._1;break;case i:W=A,oe=H(N,K,P._2),K&&K.register(oe),P._1&&oe.run(),P=N.right(oe);break;case r:W=x,P=q(N,K,P._1);break}break;case $:if(ve=null,Ee=null,De===null)W=k,P=J||X||P;else switch(oe=De._3,ae=De._1,De=De._2,ae.tag){case c:J&&J!==oe&&se===0?W=$:X&&(W=x,P=ae._2(N.fromLeft(X)),X=null);break;case o:J&&J!==oe&&se===0||X?W=$:(ve=ae._1,Ee=ae._2,W=R,P=N.fromRight(P));break;case d:se--,X===null&&(j=N.fromRight(P),De=new D(f,new D(h,ae._2,j),De,oe),(J===oe||se>0)&&(W=x,P=ae._3(j)));break;case h:De=new D(f,new D(m,P,X),De,J),W=x,J&&J!==oe&&se===0?P=ae._1.killed(N.fromLeft(J))(ae._2):X?P=ae._1.failed(N.fromLeft(X))(ae._2):P=ae._1.completed(N.fromRight(P))(ae._2),X=null,se++;break;case _:se++,De=new D(f,new D(m,P,X),De,J),W=x,P=ae._1;break;case m:se--,W=$,P=ae._1,X=ae._2;break}break;case k:for(var de in wt)wt.hasOwnProperty(de)&&(Jt=Jt&&wt[de].rethrow,L(wt[de].handler(P)));wt=null,J&&X?setTimeout(function(){throw N.fromLeft(X)},0):N.isLeft(P)&&Jt&&setTimeout(function(){if(Jt)throw N.fromLeft(P)},0);return;case F:W=x;break;case I:return}}function Ze(le){return function(){if(W===k)return Jt=Jt&&le.rethrow,le.handler(P)(),function(){};var oe=we++;return wt=wt||{},wt[oe]=le,function(){wt!==null&&delete wt[oe]}}}function ce(le,oe){return function(){if(W===k)return oe(N.right(void 0))(),function(){};var j=Ze({rethrow:!1,handler:function(){return oe(N.right(void 0))}})();switch(W){case F:J=N.left(le),W=k,P=J,Wt(B);break;case I:J===null&&(J=N.left(le)),se===0&&(W===I&&(De=new D(f,new D(_,P(le)),De,J)),W=$,P=null,X=null,Wt(++B));break;default:J===null&&(J=N.left(le)),se===0&&(W=$,P=null,X=null)}return j}}function he(le){return function(){var oe=Ze({rethrow:!1,handler:le})();return W===F&&Wt(B),oe}}return{kill:ce,join:he,onComplete:Ze,isSuspended:function(){return W===F},run:function(){W===F&&(M.isDraining()?Wt(B):M.enqueue(function(){Wt(B)}))}}}function U(N,K,O,B){var W=0,P={},X=0,J={},ve=new Error("[ParAff] Early exit"),Ee=null,De=e;function se(Ze,ce,he){var le=ce,oe=null,j=null,ae=0,de={},Be,tt;e:for(;;)switch(Be=null,le.tag){case y:if(le._3===e&&(Be=P[le._1],de[ae++]=Be.kill(Ze,function(ct){return function(){ae--,ae===0&&he(ct)()}})),oe===null)break e;le=oe._2,j===null?oe=null:(oe=j._1,j=j._2);break;case u:le=le._2;break;case l:case p:oe&&(j=new D(f,oe,j)),oe=le,le=le._1;break}if(ae===0)he(N.right(void 0))();else for(tt=0,Be=ae;tt<Be;tt++)de[tt]=de[tt]();return de}function we(Ze,ce,he){var le,oe,j,ae,de,Be;N.isLeft(Ze)?(le=Ze,oe=null):(oe=Ze,le=null);e:for(;;){if(j=null,ae=null,de=null,Be=null,Ee!==null)return;if(ce===null){B(le||oe)();return}if(ce._3!==e)return;switch(ce.tag){case u:le===null?(ce._3=N.right(ce._1(N.fromRight(oe))),oe=ce._3):ce._3=le;break;case l:if(j=ce._1._3,ae=ce._2._3,le){if(ce._3=le,de=!0,Be=X++,J[Be]=se(ve,le===j?ce._2:ce._1,function(){return function(){delete J[Be],de?de=!1:he===null?we(le,null,null):we(le,he._1,he._2)}}),de){de=!1;return}}else{if(j===e||ae===e)return;oe=N.right(N.fromRight(j)(N.fromRight(ae))),ce._3=oe}break;case p:if(j=ce._1._3,ae=ce._2._3,j===e&&N.isLeft(ae)||ae===e&&N.isLeft(j))return;if(j!==e&&N.isLeft(j)&&ae!==e&&N.isLeft(ae))le=oe===j?ae:j,oe=null,ce._3=le;else if(ce._3=oe,de=!0,Be=X++,J[Be]=se(ve,oe===j?ce._2:ce._1,function(){return function(){delete J[Be],de?de=!1:he===null?we(oe,null,null):we(oe,he._1,he._2)}}),de){de=!1;return}break}he===null?ce=null:(ce=he._1,he=he._2)}}function wt(Ze){return function(ce){return function(){delete P[Ze._1],Ze._3=ce,we(ce,Ze._2._1,Ze._2._2)}}}function Jt(){var Ze=x,ce=O,he=null,le=null,oe,j;e:for(;;)switch(oe=null,j=null,Ze){case x:switch(ce.tag){case u:he&&(le=new D(f,he,le)),he=new D(u,ce._1,e,e),ce=ce._2;break;case l:he&&(le=new D(f,he,le)),he=new D(l,e,ce._2,e),ce=ce._1;break;case p:he&&(le=new D(f,he,le)),he=new D(p,e,ce._2,e),ce=ce._1;break;default:j=W++,Ze=$,oe=ce,ce=new D(y,j,new D(f,he,le),e),oe=H(N,K,oe),oe.onComplete({rethrow:!1,handler:wt(ce)})(),P[j]=oe,K&&K.register(oe)}break;case $:if(he===null)break e;he._1===e?(he._1=ce,Ze=x,ce=he._2,he._2=e):(he._2=ce,ce=he,le===null?he=null:(he=le._1,le=le._2))}for(De=ce,j=0;j<W;j++)P[j].run()}function Wt(Ze,ce){Ee=N.left(Ze);var he;for(var le in J)if(J.hasOwnProperty(le)){he=J[le];for(le in he)he.hasOwnProperty(le)&&he[le]()}J=null;var oe=se(Ze,De,ce);return function(j){return new D(s,function(ae){return function(){for(var de in oe)oe.hasOwnProperty(de)&&oe[de]();return b}})}}return Jt(),function(Ze){return new D(s,function(ce){return function(){return Wt(Ze,ce)}})}}function q(N,K,O){return new D(s,function(B){return function(){return U(N,K,O,B)}})}return D.EMPTY=e,D.Pure=g(t),D.Throw=g(n),D.Catch=g(c),D.Sync=g(v),D.Async=g(s),D.Bind=g(a),D.Bracket=g(d),D.Fork=g(i),D.Seq=g(r),D.ParMap=g(u),D.ParApply=g(l),D.ParAlt=g(p),D.Fiber=H,D.Supervisor=S,D.Scheduler=M,D.nonCanceler=b,D}(),G1=Bn.Pure,J1=Bn.Throw;function j1(e){return function(t){return Bn.Catch(e,t)}}function K1(e){return function(t){return t.tag===Bn.Pure.tag?Bn.Pure(e(t._1)):Bn.Bind(t,function(n){return Bn.Pure(e(n))})}}function Q1(e){return function(t){return Bn.Bind(e,t)}}function mg(e){return function(t){return Bn.Fork(e,t)}}var X1=Bn.Sync;function Y1(e){return function(t){return Bn.ParMap(e,t)}}function Z1(e){return function(t){return Bn.ParApply(e,t)}}var Io=Bn.Async;function Op(e){return function(t){return function(n){return Bn.Bracket(e,t,n)}}}function eM(e,t){return function(){return Bn.Fiber(e,null,t)}}var SN=function(){function e(n,c){return n===0&&typeof setImmediate<"u"?setImmediate(c):setTimeout(c,n)}function t(n,c){return n===0&&typeof clearImmediate<"u"?clearImmediate(c):clearTimeout(c)}return function(n,c){return Bn.Async(function(v){return function(){var s=e(c,v(n()));return function(){return Bn.Sync(function(){return n(t(c,s))})}}})}}(),tM=Bn.Seq;function $n(e){return new Error(e)}function Hr(e){return function(){throw e}}function Hp(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var nM=function(e){return Hr($n(e))};var br=function(e){return e.throwError};var LN={throwError:Hr,Monad0:function(){return ta}};var rM={catchError:Pe(Hp),MonadThrow0:function(){return LN}};var ca=function(e){return e.catchError};var Yl=function(e){var t=ca(e),n=e.MonadThrow0().Monad0(),c=V(n.Bind1().Apply0().Functor0()),v=ee(n.Applicative0());return function(s){return t(c(He.create)(s))(function(a){return v(qe.create(a))})}};var wr=function(e){return e.ask};var ht=function(e){return e.lift};var Pp={liftEffect:ye(be),Monad0:function(){return ta}},Je=function(e){return e.liftEffect};var Wa=function(e){return e.tell};var IN=V(Di);var gg=function(e){return e};var yg=function(e){return e};var Np=function(e){return function(t){return e(t)}},Bp=function(e){var t=V(e);return{map:function(n){return Np(t(IN(n)))}}};var Dg=function(e){return{Applicative0:function(){return of(e)},Bind1:function(){return Wp(e)}}},Wp=function(e){var t=ie(e.Bind1()),n=ee(e.Applicative0());return{bind:function(c){return function(v){return t(c)(gn(function(s){return n(qe.create(s))})(function(s){var a=v(s);return a}))}},Apply0:function(){return aM(e)}}},aM=function(e){var t=Bp(e.Bind1().Apply0().Functor0());return{apply:Jn(Dg(e)),Functor0:function(){return t}}},of=function(e){return{pure:function(){var t=ee(e.Applicative0());return function(n){return gg(t(He.create(n)))}}(),Apply0:function(){return aM(e)}}};var iM=function(e){var t=Dg(e);return{throwError:function(){var n=ee(e.Applicative0());return function(c){return gg(n(qe.create(c)))}}(),Monad0:function(){return t}}};var uM=function(e){var t=me(e);return function(n){var c=n.Bind1(),v=ie(c),s=ee(n.Applicative0()),a=Bp(c.Apply0().Functor0());return{alt:function(d){return function(i){return v(d)(function(r){if(r instanceof He)return s(new He(r.value0));if(r instanceof qe)return v(i)(function(u){if(u instanceof He)return s(new He(u.value0));if(u instanceof qe)return s(new qe(t(r.value0)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[u.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[r.constructor.name])})}},Functor0:function(){return a}}}};var RN=V(Tt);var Cg=function(e){return e},sM=function(e){return e};var Up={lift:function(e){var t=aE(e)(z.create);return function(n){return Cg(t(n))}}},$N=ht(Up);var kN=function(e){var t=V(e);return{map:function(n){return function(c){return t(RN(n))(c)}}}},qp=function(e){return{Applicative0:function(){return wg(e)},Bind1:function(){return bg(e)}}},bg=function(e){var t=ie(e.Bind1()),n=ee(e.Applicative0());return{bind:function(c){return function(v){return t(c)(function(s){if(s instanceof G)return n(G.value);if(s instanceof z){var a=v(s.value0);return a}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[s.constructor.name])})}},Apply0:function(){return cM(e)}}},cM=function(e){var t=kN(e.Bind1().Apply0().Functor0());return{apply:Jn(qp(e)),Functor0:function(){return t}}},wg=function(e){return{pure:function(){var t=ee(e.Applicative0());return function(n){return Cg(t(z.create(n)))}}(),Apply0:function(){return cM(e)}}};var lM=function(e){var t=cr(e),n=e.Monad0(),c=ie(n.Bind1()),v=ee(n.Applicative0()),s=qp(n);return{tailRecM:function(a){var d=t(function(i){var r=a(i);return c(r)(function(u){return v(function(){if(u instanceof G)return new rn(G.value);if(u instanceof z&&u.value0 instanceof hn)return new hn(u.value0.value0);if(u instanceof z&&u.value0 instanceof rn)return new rn(new z(u.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[u.constructor.name])}())})});return function(i){return Cg(d(i))}},Monad0:function(){return s}}},fM=function(e){var t=e.Monad0(),n=$N(t),c=eo(e),v=qp(t);return{state:function(s){return n(c(s))},Monad0:function(){return v}}};var dM=function(e){return e};var Sr=function(e){return e};var bc={lift:function(e){return function(t){return dM(Ce(t))}}},ON=ht(bc),pM=function(e){return function(t){return function(n){return e(t(n))}}},HN=function(e){return{map:function(){var t=V(e);return function(n){return pM(t(n))}}()}};var hM=function(e){var t=ut(e),n=HN(e.Functor0());return{apply:function(c){return function(v){return function(s){return t(c(s))(v(s))}}},Functor0:function(){return n}}},Ua=function(e){var t=ie(e),n=hM(e.Apply0());return{bind:function(c){return function(v){return function(s){return t(c(s))(function(a){var d=v(a);return d(s)})}}},Apply0:function(){return n}}};var wc=function(e){var t=hM(e.Apply0());return{pure:function(){var n=ee(e);return function(c){return dM(Ce(n(c)))}}(),Apply0:function(){return t}}},af=function(e){var t=wc(e.Applicative0()),n=Ua(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},Oi=function(e){var t=af(e);return{ask:ee(e.Applicative0()),Monad0:function(){return t}}};var fa=function(e){var t=e.Monad0(),n=af(t);return{liftEffect:function(){var c=ON(t),v=Je(e);return function(s){return c(v(s))}}(),Monad0:function(){return n}}},Hi=function(e){var t=e.Monad0(),n=ln(t.Bind1()),c=ee(t.Applicative0()),v=cr(e),s=af(t);return{tailRecM:function(a){return function(d){var i=function(r){return function(u){var l=a(u);return n(c)(l(r))}};return function(r){return v(i(r))(d)}}},Monad0:function(){return s}}};var Eg=function(e){return e},Tg=function(e){return e};var zp=function(e){return function(t){return e(t)}},Mg=function(e){var t=V(e);return{map:function(n){return zp(t(function(c){return new ne(n(c.value0),c.value1)}))}}};var Vp=function(e){var t=me(e);return function(n){var c=ut(n),v=n.Functor0(),s=V(v),a=Mg(v);return{apply:function(d){return function(i){var r=function(u){return function(l){return new ne(u.value0(l.value0),t(u.value1)(l.value1))}};return c(s(r)(d))(i)}},Functor0:function(){return a}}}},Lg=function(e){var t=me(e),n=Vp(e);return function(c){var v=ie(c),s=c.Apply0(),a=V(s.Functor0()),d=n(s);return{bind:function(i){return function(r){return v(i)(function(u){var l=r(u.value0);return a(function(p){return new ne(p.value0,t(u.value1)(p.value1))})(l)})}},Apply0:function(){return d}}}};var Fg=function(e){var t=at(e),n=Vp(e.Semigroup0());return function(c){var v=ee(c),s=n(c.Apply0());return{pure:function(a){return v(new ne(a,t))},Apply0:function(){return s}}}},_M=function(e){var t=Fg(e),n=Lg(e.Semigroup0());return function(c){var v=t(c.Applicative0()),s=n(c.Bind1());return{Applicative0:function(){return v},Bind1:function(){return s}}}};var vM=function(e){var t=e.Semigroup0(),n=_M(e);return function(c){var v=n(c);return{tell:function(){var s=ee(c.Applicative0()),a=ne.create(void 0);return function(d){return Eg(s(a(d)))}}(),Semigroup0:function(){return t},Monad1:function(){return v}}}};var Sc=function(e){return e.sequential},Pi=function(e){return e.parallel};var UN=ye(be),qN=function(e){var t=Sc(e),n=mt(e.Applicative1()),c=Pi(e);return function(v){var s=n(v);return function(a){var d=s(function(i){return c(a(i))});return function(i){return t(d(i))}}}};var Ec=function(e){var t=qN(e);return function(n){return t(n)(UN)}};var Zu=function(e){return e()};var gM=function(e){return e()};var yM=function(e){throw new Error(e)};var DM=function(){return yM};var jN=DM(),KN=gM,Ni=function(e){return KN(function(){return jN(e)})};var CM=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},QN=ee(Xt),Rg=vt(Re),bM=V(Re);var XN=function(e){return e},wM=mg(!1);var YN={map:Y1},yo={map:K1},ZN=V(yo),SM=mg(!0),e5=function(){var e=function(c){if(c instanceof He)return c.value0;if(c instanceof qe)return Ni("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[c.constructor.name])},t=function(c){if(c instanceof qe)return c.value0;if(c instanceof He)return Ni("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[c.constructor.name])},n=function(c){if(c instanceof qe)return!0;if(c instanceof He)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[c.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:qe.create,right:He.create}}(),EM=function(e){return eM(e5,e)},TM=function(e){return function(){var n=EM(e)();return n.run(),n}},$g=function(e){return Rg(TM(e))};var t5=function(e){return function(t){return Op(e)({killed:Ce(t),failed:Ce(t),completed:Ce(t)})}},n5={apply:Z1,Functor0:function(){return YN}};var es={Applicative0:function(){return Do},Bind1:function(){return wn}},wn={bind:Q1,Apply0:function(){return MM(0)}},Do={pure:G1,Apply0:function(){return MM(0)}},MM=CM("applyAff","Effect.Aff",function(){return{apply:Jn(es),Functor0:function(){return yo}}});var Kp=ee(Do),LM=ie(wn);var r5=ln(wn);var FM=function(e){return function(t){return t5(Kp(void 0))(Ce(e))(Ce(t))}};var Ln={liftEffect:X1,Monad0:function(){return es}},jp=Je(Ln),ts=function(e){return XN(Ce(jp(e)))},uf=function(e){return Io(function(t){return bM(ts)(e.join(t))})},xM={map:function(e){return function(t){return Zu(EM(ZN(e)(uf(t))))}}};var sf=function(e){return function(t){return LM(jp(t.isSuspended))(function(n){return n?jp(Rg(t.kill(e,Ce(QN(void 0))))):Io(function(c){return bM(ts)(t.kill(e,c))})})}};var Qp={throwError:J1,Monad0:function(){return es}},AM={catchError:j1,MonadThrow0:function(){return Qp}},o5=Yl(AM);var a5=function(e){return function(t){return TM(r5(function(n){return jp(e(n))})(o5(t)))}},cf=function(e){return function(t){return Rg(a5(e)(t))}};var Bi={parallel:Z,sequential:tM,Monad0:function(){return es},Applicative1:function(){return IM(0)}},IM=CM("applicativeParAff","Effect.Aff",function(){return{pure:function(){var e=Pi(Bi);return function(t){return e(Kp(t))}}(),Apply0:function(){return n5}}}),kg=IM(136);var i5=Ec(Bi)(Ft);var u5={append:function(e){return function(t){return function(n){return i5([e(n),t(n)])}}}};var ns={tailRecM:function(e){var t=function(n){return LM(e(n))(function(c){if(c instanceof rn)return Kp(c.value0);if(c instanceof hn)return t(c.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[c.constructor.name])})};return t},Monad0:function(){return es}};var Og=Ce(Kp(void 0)),RM={mempty:Og,Semigroup0:function(){return u5}};var Wi=function(){function e(){this.head=null,this.last=null,this.size=0}function t(u,l){this.queue=u,this.value=l,this.next=null,this.prev=null}function n(u){this.draining=!1,this.error=null,this.value=u,this.takes=new e,this.reads=new e,this.puts=new e}var c={};function v(u){try{u()}catch(l){setTimeout(function(){throw l},0)}}function s(u,l){var p=new t(u,l);switch(u.size){case 0:u.head=p;break;case 1:p.prev=u.head,u.head.next=p,u.last=p;break;default:p.prev=u.last,u.last.next=p,u.last=p}return u.size++,p}function a(u){var l;switch(u.size){case 0:return null;case 1:l=u.head,u.head=null;break;case 2:l=u.last,u.head.next=null,u.last=null;break;default:l=u.last,u.last=l.prev,u.last.next=null}return l.prev=null,l.queue=null,u.size--,l.value}function d(u){var l;switch(u.size){case 0:return null;case 1:l=u.head,u.head=null;break;case 2:l=u.head,u.last.prev=null,u.head=u.last,u.last=null;break;default:l=u.head,u.head=l.next,u.head.prev=null}return l.next=null,l.queue=null,u.size--,l.value}function i(u){if(u.queue!==null){if(u.queue.last===u){a(u.queue);return}if(u.queue.head===u){d(u.queue);return}u.prev&&(u.prev.next=u.next),u.next&&(u.next.prev=u.prev),u.queue.size--,u.queue=null,u.value=null,u.next=null,u.prev=null}}function r(u,l){if(!l.draining){var p=l.puts,f=l.takes,o=l.reads,h,_,m,y,C;for(l.draining=!0;;){if(h=null,_=null,m=null,y=l.value,C=o.size,l.error!==null){for(y=u.left(l.error);h=d(p);)v(h.cb(y));for(;_=d(o);)v(_(y));for(;m=d(f);)v(m(y));break}if(y===c&&(h=d(p))&&(l.value=y=h.value),y!==c){for(m=d(f);C--&&(_=d(o));)v(_(u.right(y)));m!==null&&(l.value=c,v(m(u.right(y))))}if(h!==null&&v(h.cb(u.right(void 0))),l.value===c&&p.size===0||l.value!==c&&f.size===0)break}l.draining=!1}}return n.EMPTY=c,n.putLast=s,n.takeLast=a,n.takeHead=d,n.deleteCell=i,n.drainVar=r,n}();function Hg(){return new Wi(Wi.EMPTY)}function $M(e,t,n,c){return function(){var v=Wi.putLast(n.puts,{cb:c,value:t});return Wi.drainVar(e,n),function(){Wi.deleteCell(v)}}}function kM(e,t,n){return function(){var c=Wi.putLast(t.takes,n);return Wi.drainVar(e,t),function(){Wi.deleteCell(c)}}}var OM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),HM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),PM=function(){function e(){}return e.value=new e,e}();var NM=function(){return{left:qe.create,right:He.create,nothing:G.value,just:z.create,killed:OM.create,filled:HM.create,empty:PM.value}}();var BM=function(e){return function(t){return function(n){return $M(NM,e,t,n)}}};var WM=function(e){return function(t){return kM(NM,e,t)}};var l5=Je(Ln);var Pg=function(e){return Io(function(t){return function(){var c=WM(e)(t)();return ts(c)}})};var lf=function(e){return function(t){return Io(function(n){return function(){var v=BM(e)(t)(n)();return ts(v)}})}};var ff=l5(Hg);var _5=function(e){var t=V(e);return{map:function(n){return function(c){return function(v){return t(function(s){return new ne(n(s.value0),s.value1)})(c(v))}}}}};var zM=function(e){return{Applicative0:function(){return Wg(e)},Bind1:function(){return v5(e)}}},v5=function(e){var t=ie(e.Bind1());return{bind:function(n){return function(c){return function(v){return t(n(v))(function(s){var a=c(s.value0);return a(s.value1)})}}},Apply0:function(){return VM(e)}}},VM=function(e){var t=_5(e.Bind1().Apply0().Functor0());return{apply:Jn(zM(e)),Functor0:function(){return t}}},Wg=function(e){var t=ee(e.Applicative0());return{pure:function(n){return function(c){return t(new ne(n,c))}},Apply0:function(){return VM(e)}}};var GM=function(e){var t=ee(e.Applicative0()),n=zM(e);return{state:function(c){return function(v){return t(c(v))}},Monad0:function(){return n}}};var m5=ht(bc);var Tc={liftAff:ye(be),MonadEffect0:function(){return Ln}},tr=function(e){return e.liftAff};var Xp=function(e){var t=e.MonadEffect0(),n=fa(t);return{liftAff:function(){var c=m5(t.Monad0()),v=tr(e);return function(s){return c(v(s))}}(),MonadEffect0:function(){return n}}};var da=Z,qg=Z;var g5=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var jM=function(e){return function(t){return da(function(n){return e(n.value0)(n.value1)})(t)}};var KM=function(e){return function(t){return qg(new g5(e,t))}},zg={map:function(e){return function(t){return da(function(n){return KM(function(c){return e(n.value0(c))})(n.value1)})(t)}}};var QM=KM(ye(be));var Xe=function(){function e(){}return e.value=new e,e}(),ot=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),bt=function(){function e(t,n,c,v,s,a,d){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a,this.value6=d}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return function(d){return new e(t,n,c,v,s,a,d)}}}}}}},e}(),Ui=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),qa=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),qi=function(){function e(t,n,c,v,s,a){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return new e(t,n,c,v,s,a)}}}}}},e}(),pa=function(){function e(t,n,c,v,s,a){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return new e(t,n,c,v,s,a)}}}}}},e}(),zi=function(){function e(t,n,c,v,s,a){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return new e(t,n,c,v,s,a)}}}}}},e}(),Yp=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}();var za=function(e){var t=Te(e);return function(n){var c=function(v){var s=!1,a;function d(i){if(i instanceof Xe)return s=!0,G.value;if(i instanceof ot){var r=t(n)(i.value1);if(r instanceof Ie)return s=!0,new z(i.value2);if(r instanceof fe){v=i.value0;return}v=i.value3;return}if(i instanceof bt){var u=t(n)(i.value1);if(u instanceof Ie)return s=!0,new z(i.value2);var l=t(n)(i.value4);if(l instanceof Ie)return s=!0,new z(i.value5);if(u instanceof fe){v=i.value0;return}if(l instanceof pe){v=i.value6;return}v=i.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[i.constructor.name])}for(;!s;)a=d(v);return a};return c}};var YM=function(e){return function(t){return function(n){var c=e,v=t,s=!1,a;function d(i,r,u){if(r instanceof Ye)return s=!0,u;if(r instanceof $e){if(r.value0 instanceof Ui){c=i,v=r.value1,n=new ot(u,r.value0.value0,r.value0.value1,r.value0.value2);return}if(r.value0 instanceof qa){c=i,v=r.value1,n=new ot(r.value0.value0,r.value0.value1,r.value0.value2,u);return}if(r.value0 instanceof qi){c=i,v=r.value1,n=new bt(u,r.value0.value0,r.value0.value1,r.value0.value2,r.value0.value3,r.value0.value4,r.value0.value5);return}if(r.value0 instanceof pa){c=i,v=r.value1,n=new bt(r.value0.value0,r.value0.value1,r.value0.value2,u,r.value0.value3,r.value0.value4,r.value0.value5);return}if(r.value0 instanceof zi){c=i,v=r.value1,n=new bt(r.value0.value0,r.value0.value1,r.value0.value2,r.value0.value3,r.value0.value4,r.value0.value5,u);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[r.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[r.constructor.name,u.constructor.name])}for(;!s;)a=d(c,v,n);return a}}},ko=function(e){var t=YM(e),n=Te(e);return function(c){return function(v){var s=function(d){return function(i){var r=d,u=!1,l;function p(f,o){if(f instanceof Ye)return u=!0,new ot(o.value0,o.value1,o.value2,o.value3);if(f instanceof $e){if(f.value0 instanceof Ui)return u=!0,t(f.value1)(new bt(o.value0,o.value1,o.value2,o.value3,f.value0.value0,f.value0.value1,f.value0.value2));if(f.value0 instanceof qa)return u=!0,t(f.value1)(new bt(f.value0.value0,f.value0.value1,f.value0.value2,o.value0,o.value1,o.value2,o.value3));if(f.value0 instanceof qi){r=f.value1,i=new Yp(new ot(o.value0,o.value1,o.value2,o.value3),f.value0.value0,f.value0.value1,new ot(f.value0.value2,f.value0.value3,f.value0.value4,f.value0.value5));return}if(f.value0 instanceof pa){r=f.value1,i=new Yp(new ot(f.value0.value0,f.value0.value1,f.value0.value2,o.value0),o.value1,o.value2,new ot(o.value3,f.value0.value3,f.value0.value4,f.value0.value5));return}if(f.value0 instanceof zi){r=f.value1,i=new Yp(new ot(f.value0.value0,f.value0.value1,f.value0.value2,f.value0.value3),f.value0.value4,f.value0.value5,new ot(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[f.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[f.constructor.name,o.constructor.name])}for(;!u;)l=p(r,i);return l}},a=function(d){return function(i){var r=d,u=!1,l;function p(f,o){if(o instanceof Xe)return u=!0,s(f)(new Yp(Xe.value,c,v,Xe.value));if(o instanceof ot){var h=n(c)(o.value1);if(h instanceof Ie)return u=!0,t(f)(new ot(o.value0,c,v,o.value3));if(h instanceof fe){r=new $e(new Ui(o.value1,o.value2,o.value3),f),i=o.value0;return}r=new $e(new qa(o.value0,o.value1,o.value2),f),i=o.value3;return}if(o instanceof bt){var h=n(c)(o.value1);if(h instanceof Ie)return u=!0,t(f)(new bt(o.value0,c,v,o.value3,o.value4,o.value5,o.value6));var _=n(c)(o.value4);if(_ instanceof Ie)return u=!0,t(f)(new bt(o.value0,o.value1,o.value2,o.value3,c,v,o.value6));if(h instanceof fe){r=new $e(new qi(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),f),i=o.value0;return}if(h instanceof pe&&_ instanceof fe){r=new $e(new pa(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),f),i=o.value3;return}r=new $e(new zi(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),f),i=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[f.constructor.name,o.constructor.name])}for(;!u;)l=p(r,i);return l}};return a(Ye.value)}}},Gg=function(e){var t=YM(e),n=Te(e);return function(c){var v=function(i){return function(r){var u=i,l=!1,p;function f(o,h){if(o instanceof Ye)return l=!0,h;if(o instanceof $e){if(o.value0 instanceof Ui&&o.value0.value2 instanceof Xe&&h instanceof Xe)return l=!0,t(o.value1)(new ot(Xe.value,o.value0.value0,o.value0.value1,Xe.value));if(o.value0 instanceof qa&&o.value0.value0 instanceof Xe&&h instanceof Xe)return l=!0,t(o.value1)(new ot(Xe.value,o.value0.value1,o.value0.value2,Xe.value));if(o.value0 instanceof Ui&&o.value0.value2 instanceof ot){u=o.value1,r=new bt(h,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof qa&&o.value0.value0 instanceof ot){u=o.value1,r=new bt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,h);return}return o.value0 instanceof Ui&&o.value0.value2 instanceof bt?(l=!0,t(o.value1)(new ot(new ot(h,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new ot(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof qa&&o.value0.value0 instanceof bt?(l=!0,t(o.value1)(new ot(new ot(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new ot(o.value0.value0.value6,o.value0.value1,o.value0.value2,h)))):o.value0 instanceof qi&&o.value0.value2 instanceof Xe&&o.value0.value5 instanceof Xe&&h instanceof Xe?(l=!0,t(o.value1)(new bt(Xe.value,o.value0.value0,o.value0.value1,Xe.value,o.value0.value3,o.value0.value4,Xe.value))):o.value0 instanceof pa&&o.value0.value0 instanceof Xe&&o.value0.value5 instanceof Xe&&h instanceof Xe?(l=!0,t(o.value1)(new bt(Xe.value,o.value0.value1,o.value0.value2,Xe.value,o.value0.value3,o.value0.value4,Xe.value))):o.value0 instanceof zi&&o.value0.value0 instanceof Xe&&o.value0.value3 instanceof Xe&&h instanceof Xe?(l=!0,t(o.value1)(new bt(Xe.value,o.value0.value1,o.value0.value2,Xe.value,o.value0.value4,o.value0.value5,Xe.value))):o.value0 instanceof qi&&o.value0.value2 instanceof ot?(l=!0,t(o.value1)(new ot(new bt(h,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof pa&&o.value0.value0 instanceof ot?(l=!0,t(o.value1)(new ot(new bt(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,h),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof pa&&o.value0.value5 instanceof ot?(l=!0,t(o.value1)(new ot(o.value0.value0,o.value0.value1,o.value0.value2,new bt(h,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof zi&&o.value0.value3 instanceof ot?(l=!0,t(o.value1)(new ot(o.value0.value0,o.value0.value1,o.value0.value2,new bt(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,h)))):o.value0 instanceof qi&&o.value0.value2 instanceof bt?(l=!0,t(o.value1)(new bt(new ot(h,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new ot(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof pa&&o.value0.value0 instanceof bt?(l=!0,t(o.value1)(new bt(new ot(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new ot(o.value0.value0.value6,o.value0.value1,o.value0.value2,h),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof pa&&o.value0.value5 instanceof bt?(l=!0,t(o.value1)(new bt(o.value0.value0,o.value0.value1,o.value0.value2,new ot(h,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new ot(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof zi&&o.value0.value3 instanceof bt?(l=!0,t(o.value1)(new bt(o.value0.value0,o.value0.value1,o.value0.value2,new ot(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new ot(o.value0.value3.value6,o.value0.value4,o.value0.value5,h)))):(l=!0,Ni("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!l;)p=f(u,r);return p}},s=function(i){return function(r){var u=i,l=!1,p;function f(o,h){if(h instanceof ot&&h.value0 instanceof Xe&&h.value3 instanceof Xe)return l=!0,v(o)(Xe.value);if(h instanceof ot){u=new $e(new qa(h.value0,h.value1,h.value2),o),r=h.value3;return}if(h instanceof bt&&h.value0 instanceof Xe&&h.value3 instanceof Xe&&h.value6 instanceof Xe)return l=!0,v(new $e(new qa(Xe.value,h.value1,h.value2),o))(Xe.value);if(h instanceof bt){u=new $e(new zi(h.value0,h.value1,h.value2,h.value3,h.value4,h.value5),o),r=h.value6;return}return l=!0,Ni("The impossible happened in partial function `removeMaxNode`.")}for(;!l;)p=f(u,r);return p}},a=function(i){var r=!1,u;function l(p){if(p instanceof ot&&p.value3 instanceof Xe)return r=!0,{key:p.value1,value:p.value2};if(p instanceof ot){i=p.value3;return}if(p instanceof bt&&p.value6 instanceof Xe)return r=!0,{key:p.value4,value:p.value5};if(p instanceof bt){i=p.value6;return}return r=!0,Ni("The impossible happened in partial function `maxNode`.")}for(;!r;)u=l(i);return u},d=function(i){return function(r){var u=i,l=!1,p;function f(o,h){if(h instanceof Xe)return l=!0,G.value;if(h instanceof ot){var _=n(c)(h.value1);if(h.value3 instanceof Xe&&_ instanceof Ie)return l=!0,new z(new ne(h.value2,v(o)(Xe.value)));if(_ instanceof Ie){var m=a(h.value0);return l=!0,new z(new ne(h.value2,s(new $e(new Ui(m.key,m.value,h.value3),o))(h.value0)))}if(_ instanceof fe){u=new $e(new Ui(h.value1,h.value2,h.value3),o),r=h.value0;return}u=new $e(new qa(h.value0,h.value1,h.value2),o),r=h.value3;return}if(h instanceof bt){var y=function(){return h.value0 instanceof Xe&&h.value3 instanceof Xe&&h.value6 instanceof Xe}(),_=n(c)(h.value4),C=n(c)(h.value1);if(y&&C instanceof Ie)return l=!0,new z(new ne(h.value2,t(o)(new ot(Xe.value,h.value4,h.value5,Xe.value))));if(y&&_ instanceof Ie)return l=!0,new z(new ne(h.value5,t(o)(new ot(Xe.value,h.value1,h.value2,Xe.value))));if(C instanceof Ie){var m=a(h.value0);return l=!0,new z(new ne(h.value2,s(new $e(new qi(m.key,m.value,h.value3,h.value4,h.value5,h.value6),o))(h.value0)))}if(_ instanceof Ie){var m=a(h.value3);return l=!0,new z(new ne(h.value5,s(new $e(new pa(h.value0,h.value1,h.value2,m.key,m.value,h.value6),o))(h.value3)))}if(C instanceof fe){u=new $e(new qi(h.value1,h.value2,h.value3,h.value4,h.value5,h.value6),o),r=h.value0;return}if(C instanceof pe&&_ instanceof fe){u=new $e(new pa(h.value0,h.value1,h.value2,h.value4,h.value5,h.value6),o),r=h.value3;return}u=new $e(new zi(h.value0,h.value1,h.value2,h.value3,h.value4,h.value5),o),r=h.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[h.constructor.name])}for(;!l;)p=f(u,r);return p}};return d(Ye.value)}},kn={foldr:function(e){return function(t){return function(n){if(n instanceof Xe)return t;if(n instanceof ot)return Nt(kn)(e)(e(n.value2)(Nt(kn)(e)(t)(n.value3)))(n.value0);if(n instanceof bt)return Nt(kn)(e)(e(n.value2)(Nt(kn)(e)(e(n.value5)(Nt(kn)(e)(t)(n.value6)))(n.value3)))(n.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof Xe)return t;if(n instanceof ot)return Ht(kn)(e)(e(Ht(kn)(e)(t)(n.value0))(n.value2))(n.value3);if(n instanceof bt)return Ht(kn)(e)(e(Ht(kn)(e)(e(Ht(kn)(e)(t)(n.value0))(n.value2))(n.value3))(n.value5))(n.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[n.constructor.name])}}},foldMap:function(e){var t=at(e),n=me(e.Semigroup0());return function(c){return function(v){if(v instanceof Xe)return t;if(v instanceof ot)return n(Ut(kn)(e)(c)(v.value0))(n(c(v.value2))(Ut(kn)(e)(c)(v.value3)));if(v instanceof bt)return n(Ut(kn)(e)(c)(v.value0))(n(c(v.value2))(n(Ut(kn)(e)(c)(v.value3))(n(c(v.value5))(Ut(kn)(e)(c)(v.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[v.constructor.name])}}}};var Oo=function(){return Xe.value}(),Jg=function(e){var t=ko(e);return function(n){return Ht(n)(function(c){return function(v){return t(v.value0)(v.value1)(c)}})(Oo)}};var Zp=function(e){var t=Gg(e);return function(n){return function(c){return rt(c)(on)(t(n)(c))}}};var jg=function(e){var t=za(e),n=Zp(e),c=ko(e);return function(v){return function(s){return function(a){var d=v(t(s)(a));if(d instanceof G)return n(s)(a);if(d instanceof z)return c(s)(d.value0)(a);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[d.constructor.name])}}}};var I5=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}();var eh=function(e){return I5.create(Ue(e.Eq0()))(Te(e))},R5={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},ZM={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return R5}};var Qg=Bu(Kt)(ZM);var O5=Gg(Qg),H5=za(Qg),P5=ko(Qg);var th=function(){return function(e){var t=xn(e);return function(n){var c=eh(n);return function(v){return function(s){return function(a){return O5(new ne(t(v),c(s)))(a)}}}}}},nh=function(){return function(e){var t=xn(e);return function(n){var c=eh(n);return function(v){return function(s){return function(a){return H5(new ne(t(v),c(s)))(a)}}}}}},rh=function(){return function(e){var t=xn(e);return function(n){var c=eh(n);return function(v){return function(s){return function(a){return function(d){return P5(new ne(t(v),c(s)))(a)(d)}}}}}}},oh=function(e){var t=mt(e)(kn);return function(n){return function(c){return t(function(v){return c(v)})(n)}}},Vi=Oo;var ah=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),os=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();function eL(e,t,n){return e==null?t:n(e)}function Xg(e){return e}var Ho=rt(null)(Xg),Yt=function(e){return eL(e,G.value,z.create)};var dn=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),_f=Z,Pr=function(e,t){return e.value2(e.value1,t)},pn=Z,Nr=function(e){return e.value3(e.value1)},nr=_f(function(e){return e.value0});var tL=V(It),nB=V(Na);var Gi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ga=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),Ji=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),ji=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ja=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rB=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),nL=function(e){return function(t){return e(t)}};var oB=Z;var aB={bimap:function(e){return function(t){return nL(function(n){return oB(new rB(function(c){return e(n.value0(c))},function(c){return t(n.value1(c))},n.value2))})}}},iB=Xr(aB);var as=nL(function(e){var t=function(n){if(n instanceof Gi)return new Gi(n.value0);if(n instanceof Ga)return new Ga(n.value0,n.value1,e.value0(n.value2),tL(t)(n.value3));if(n instanceof Ji)return new Ji(n.value0,n.value1,e.value0(n.value2),tL(nB(t))(n.value3));if(n instanceof ji)return new ji(e.value1(n.value0));if(n instanceof Ja)return new Ja(iB(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function is(e,t){return t[e]}function Zg(e,t){return t.hasOwnProperty(e)}function ja(e,t,n){n[e]=t}function ey(e,t){for(var n=[],c=0;c<e.length;c++)n.push(t(c,e[c]));return n}function ty(e,t){for(var n=0;n<e.length;n++)t(e[n])}function ny(e,t){for(var n=Object.keys(e),c=0;c<n.length;c++){var v=n[c];t(v,e[v])}}function ry(e,t,n,c,v){for(var s=[],a=e.length,d=t.length,i=0;;){if(i<a)i<d?s.push(n(i,e[i],t[i])):c(i,e[i]);else if(i<d)s.push(v(i,t[i]));else break;i++}return s}function vf(e,t,n){for(var c={},v=0;v<e.length;v++){var s=e[v],a=t(s);c[a]=n(a,v,s)}return c}function mf(e,t,n,c,v,s){for(var a={},d=0;d<t.length;d++){var i=t[d],r=n(i);e.hasOwnProperty(r)?a[r]=c(r,d,e[r],i):a[r]=s(r,d,i)}for(var r in e)r in a||v(r,e[r]);return a}function us(e,t){return e===t}function oy(e,t){return t.createTextNode(e)}function ay(e,t){t.textContent=e}function uh(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function Ki(e,t,n){var c=n.childNodes.item(e)||null;c!==t&&n.insertBefore(t,c)}function gf(e,t){t&&e.parentNode===t&&t.removeChild(e)}function yf(e){return e.parentNode}function sh(e,t,n,c){e!=null?c.setAttributeNS(e,t,n):c.setAttribute(t,n)}function ch(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function iy(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function uy(e,t,n){n.addEventListener(e,t,!1)}function sy(e,t,n){n.removeEventListener(e,t,!1)}var cy=void 0;var Df=function(){return{}};function ly(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var fy=is,dy=Z,py=ja,hy=Df;var lh=function(e){return function(t){return t[e]}},fB=lh("namespaceURI"),dB=lh("prefix"),pB=lh("localName"),hB=lh("tagName");function vy(e){return function(){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}}var fh=function(e){return function(t){return function(){return t[e]}}},vB=fh("children"),mB=fh("firstElementChild"),gB=fh("lastElementChild"),yB=fh("childElementCount");function oL(e){return function(t){return function(){return t.querySelector(e)}}}var CB=V(Re);var aL=function(e){var t=CB(Yt),n=oL(e);return function(c){return t(n(c))}};var my=Z;var Cf=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}};var gy=function(e){return Nr(e.widget)},yy=Cf("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ja)return yy(291)(e,as(t.value0));if(t instanceof ji){var n=Pr(e.widget,t.value0),c=_f(function(v){return pn(new dn(v.value0,{build:e.build,widget:n},yy(296),gy))})(n);return c}return gy(e),e.build(t)}}),TB=yy(286),dh=function(e){var t=yf(e.node);return gf(e.node,t)},ph=Cf("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ja)return ph(82)(e,as(t.value0));if(t instanceof Gi){if(e.value===t.value0)return pn(new dn(e.node,e,ph(85),dh));if(en){var n={build:e.build,node:e.node,value:t.value0};return ay(t.value0,e.node),pn(new dn(e.node,n,ph(89),dh))}}return dh(e),e.build(t)}}),MB=ph(77),hh=function(e){var t=yf(e.node);return gf(e.node,t),ny(e.children,function(n,c){return Nr(c)}),Nr(e.attrs)},_h=function(e){var t=yf(e.node);return gf(e.node,t),ty(e.children,Nr),Nr(e.attrs)},uL=function(e,t,n,c){var v=t===c;return v?e instanceof z&&n instanceof z&&e.value0===n.value0||e instanceof G&&n instanceof G:!1},vh=Cf("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ja)return vh(135)(e,as(t.value0));if(t instanceof Ga&&uL(e.ns,e.name,t.value0,t.value1)){var n=Jr(t.value3),c=Jr(e.children);if(c===0&&n===0){var i=Pr(e.attrs,t.value2),r={build:e.build,node:e.node,attrs:i,ns:t.value0,name:t.value1,children:e.children};return pn(new dn(e.node,r,vh(149),_h))}var v=function(u,l){return Nr(l)},s=function(u,l,p){var f=Pr(l,p);return Ki(u,nr(f),e.node),f},a=function(u,l){var p=e.build(l);return Ki(u,nr(p),e.node),p},d=ry(e.children,t.value3,s,v,a),i=Pr(e.attrs,t.value2),r={build:e.build,node:e.node,attrs:i,ns:t.value0,name:t.value1,children:d};return pn(new dn(e.node,r,vh(172),_h))}return _h(e),e.build(t)}}),LB=vh(130),mh=Cf("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ja)return mh(222)(e,as(t.value0));if(t instanceof Ji&&uL(e.ns,e.name,t.value0,t.value1)){var n=Jr(t.value3);if(e.length===0&&n===0){var d=Pr(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:d,ns:t.value0,name:t.value1,children:e.children,length:0};return pn(new dn(e.node,i,mh(237),hh))}var c=function(r,u){return Nr(u)},v=function(r,u,l,p){var f=Pr(l,p.value1);return Ki(u,nr(f),e.node),f},s=function(r,u,l){var p=e.build(l.value1);return Ki(u,nr(p),e.node),p},a=mf(e.children,t.value3,Nn,v,c,s),d=Pr(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:d,ns:t.value0,name:t.value1,children:a,length:n};return pn(new dn(e.node,i,mh(261),hh))}return hh(e),e.build(t)}}),FB=mh(217),xB=function(e,t,n){var c=e.buildWidget(e)(n),v=_f(function(s){return pn(new dn(s.value0,{build:t,widget:c},TB,gy))})(c);return v},AB=function(e,t,n){var c=oy(n,e.document),v={build:t,node:c,value:n};return pn(new dn(c,v,MB,dh))},IB=function(e,t,n,c,v,s){var a=uh(Ho(n),c,e.document),d=my(a),i=function(p,f,o){var h=t(o.value1);return Ki(f,nr(h),d),h},r=vf(s,Nn,i),u=e.buildAttributes(a)(v),l={build:t,node:d,attrs:u,ns:n,name:c,children:r,length:Jr(s)};return pn(new dn(d,l,FB,hh))},RB=function(e,t,n,c,v,s){var a=uh(Ho(n),c,e.document),d=my(a),i=function(p,f){var o=t(f);return Ki(p,nr(o),d),o},r=ey(s,i),u=e.buildAttributes(a)(v),l={build:t,node:d,attrs:u,ns:n,name:c,children:r};return pn(new dn(d,l,LB,_h))},bf=function(e){var t=Cf("build","Halogen.VDom.DOM",function(){return function(c){if(c instanceof Gi)return AB(e,t(59),c.value0);if(c instanceof Ga)return RB(e,t(60),c.value0,c.value1,c.value2,c.value3);if(c instanceof Ji)return IB(e,t(61),c.value0,c.value1,c.value2,c.value3);if(c instanceof ji)return xB(e,t(62),c.value0);if(c instanceof Ja)return t(63)(as(c.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[c.constructor.name])}}),n=t(58);return n};function gh(e){return typeof e}function yh(e){return Object.prototype.toString.call(e).slice(8,-1)}function wf(e){return e===void 0}var cL=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var Dh=function(){var e=wp(v1);return function(t){return fg(e(t))}}();var lL=function(e){return function(t){return new Yn(e,new $e(t.value0,t.value1))}};var by=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var ss=Z,bh=Z;var wy=function(e){var t=br(iM(e));return function(n){return t(Dh(n))}};var Sy=function(e){var t=ee(of(e)),n=wy(e);return function(c){return function(v){if(yh(v)===c)return t(bh(v));if(en)return n(new by(c,yh(v)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[c.constructor.name,v.constructor.name])}}};var wh=function(e){return Sy(e)("String")};function Ey(e){return e()}function dL(e){return function(t){return function(n){return function(c){var v=n;function s(d){return function(i){return t(i)(d)(c[d])}}for(var a in c)hasOwnProperty.call(c,a)&&(v=e(v)(s(a)));return v}}}}function pL(e,t,n,c){return n in c?t(c[n]):e}function Ty(e){return function(t){var n=[];for(var c in t)hasOwnProperty.call(t,c)&&n.push(e(c)(t[c]));return n}}var HB=Object.keys||Ty(function(e){return function(){return e}});var My=function(e){return function(t){return function(n){return function(c){return function(v){return e(t,n,c,v)}}}}};var UB=vt(ap);var Sh=function(){return My(pL)(G.value)(z.create)}();var Sf=function(e){var t=Cp(e);return function(n){return Ey(function(){var v=Df();return op(t(n))(function(s){return UB(ly(s.value0)(s.value1)(v))})(),v})}};var qB=dL(GS),hL=function(e){var t=me(e.Semigroup0()),n=at(e);return function(c){return qB(function(v){return function(s){return function(a){return t(v)(c(s)(a))}}})(n)}};function Ef(e){return function(){return function(t){return e(t)()}}}function xy(e){return function(t){return function(n){return function(c){return function(){return c.addEventListener(e,t,n)}}}}}function Ay(e){return function(t){return function(n){return function(c){return function(){return c.removeEventListener(e,t,n)}}}}}var zB=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}};var Ry=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$y=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ka=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Xi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Yi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cs=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),VB=is,Iy=ja,GB=function(e,t){var n=iy(null,e,t);if(n)return ch(null,e,t);var c=gh(is(e,t));return c==="string"?ja(e,"",t):e==="rowSpan"?ja(e,1,t):e==="colSpan"?ja(e,1,t):ja(e,cy,t)},vL=function(e){if(e instanceof Ka&&e.value0 instanceof z)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof Ka)return"attr/:"+e.value1;if(e instanceof Xi)return"prop/"+e.value0;if(e instanceof Yi)return"handler/"+e.value0;if(e instanceof cs)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},mL=Z;var gL=Z;var yL=function(e){return function(t){var n=function(u){return function(l,p){if(p instanceof Ka)return ch(Ho(p.value0),p.value1,t);if(p instanceof Xi)return GB(p.value0,t);if(p instanceof Yi){var f=fy(p.value0,u);return sy(p.value0,Nn(f),t)}if(p instanceof cs)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[p.constructor.name])}},c=function(u){return u instanceof z?e(u.value0)():void 0},v=function(u){var l=Sh("ref")(u.props);return l instanceof z&&l.value0 instanceof cs?c(l.value0.value0(new $y(t))):void 0},s=function(u,l){return function(p,f,o,h){if(o instanceof Ka&&h instanceof Ka){var _=o.value2===h.value2;return _||sh(Ho(h.value0),h.value1,h.value2,t),h}if(o instanceof Xi&&h instanceof Xi){var m=us(o.value1,h.value1);if(m)return h;if(h.value0==="value"){var y=VB("value",t),C=us(y,h.value1);return C||Iy(h.value0,h.value1,t),h}return Iy(h.value0,h.value1,t),h}if(o instanceof Yi&&h instanceof Yi){var E=fy(h.value0,u);return Pt(h.value1)(on(E))(),py(h.value0,E,l),h}return h}},a=function(u){return function(l,p,f){if(f instanceof Ka)return sh(Ho(f.value0),f.value1,f.value2,t),f;if(f instanceof Xi)return Iy(f.value0,f.value1,t),f;if(f instanceof Yi){var o=is(f.value0,u);if(Zg(f.value0,u))return Pt(f.value1)(on(o))(),f;var h=nn(f.value1)(),_=Ef(function(m){return function(){var C=Ke(h)();return c(C(m))}})();return py(f.value0,new ne(_,h),u),uy(f.value0,_,t),f}if(f instanceof cs)return c(f.value0(new Ry(t))),f;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[f.constructor.name])}},d=zB("patchProp","Halogen.VDom.DOM.Prop",function(){return function(u,l){var p=hy(),f=n(u.events),o=s(u.events,p),h=a(p),_=mf(u.props,l,vL,o,f,h),m={events:dy(p),props:_};return pn(new dn(void 0,m,d(100),v))}}),i=d(87),r=function(u){var l=hy(),p=vf(u,vL,a(l)),f={events:dy(l),props:p};return pn(new dn(void 0,f,i,v))};return r}};var Oy=function(e){return e},wL=function(e){return Oy(ji.create(e))},KB=function(e){return e.toPropValue},Zi=function(e){return Oy(Gi.create(e))},SL=function(e){return new cs(function(t){return e(function(n){if(n instanceof Ry)return new z(n.value0);if(n instanceof $y)return G.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},EL=function(e){var t=KB(e);return function(n){var c=Xi.create(n);return function(v){return c(t(v))}}};var Hy={toPropValue:function(){var e=fn();return function(t){return mL(e(t))}}()};var TL={toPropValue:gL};var Py=function(){return Yi.create}(),ML=function(e){return function(t){return function(n){return function(c){return new Ga(e,t,n,c)}}}};var LL=function(e){return function(t){return Ka.create(e)(t)}};var QB=ye(be);var Eh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ny=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),By=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),FL=function(e){return function(t){return new By(e,t)}},xL=function(){return Ny.create}(),AL=function(e){var t=ee(e);return function(n){return function(c){return function(v){return function(s){return function(a){if(s instanceof Eh)return new ne(new $e({func:t(s.value0),count:a},n),c);if(s instanceof Ny)return new ne(new $e({func:v(s.value0),count:a},n),c);if(s instanceof By)return AL(e)(n)(lL(s.value1)(c))(v)(s.value0)(a+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[s.constructor.name])}}}}}},IL=function(e){var t=ut(e.Apply0());return function(n){return function(c){return function(v){if(n instanceof Ye)return new qe(v);if(n instanceof $e){var s=t(n.value0.func)(v),a=n.value0.count===1;if(a)return n.value1 instanceof Ye?new qe(s):IL(e)(n.value1)(c)(s);if(c instanceof Ye)return new qe(s);if(c instanceof $e)return new He(new ne(new $e({func:s,count:n.value0.count-1|0},n.value1),new Yn(c.value0,c.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[c.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},RL={map:function(e){return function(t){return FL(new Eh(e))(t)}}},$L=function(e){var t=IL(e),n=ee(e),c=AL(e);return function(v){return function(s){var a=function(d){var i=!1,r;function u(l){if(l.value1.value0 instanceof Eh){var p=t(l.value0)(l.value1.value1)(n(l.value1.value0.value0));if(p instanceof qe)return i=!0,p.value0;if(p instanceof He){d=p.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[p.constructor.name])}if(l.value1.value0 instanceof Ny){var p=t(l.value0)(l.value1.value1)(v(l.value1.value0.value0));if(p instanceof qe)return i=!0,p.value0;if(p instanceof He){d=p.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[p.constructor.name])}if(l.value1.value0 instanceof By){var f=new Yn(l.value1.value0.value1,l.value1.value1);d=c(l.value0)(f)(v)(l.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[l.value1.value0.constructor.name])}for(;!i;)r=u(d);return r};return a(new ne(Ye.value,Dh(s)))}}},kL=function(e){return $L(e)(QB)},OL={apply:function(e){return function(t){return FL(e)(t)}},Functor0:function(){return RL}},HL=function(){return{pure:Eh.create,Apply0:function(){return OL}}}(),XB=$L(HL),Wy=function(e){return XB(function(t){return xL(e(t))})};var NL=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),BL=Z,WL=Z;function Uy(e){return function(t){return e===t}}var Lc=Uy;var tW=vt(Re);var nW=ie(Kn);var rW=me(jt),oW=mt(Xt),aW=oW(Ft);var Th=function(e){return e},qL=function(e){return function(t){return e(function(n){return tW(t(n))})}};var Wn=function(e){return function(t){return e(t)}};var Tf={map:function(e){return function(t){return function(n){return t(function(c){return n(e(c))})}}}};var Un=function(){var t=nn([])();return{emitter:function(n){return function(){return Kr(function(v){return rW(v)([n])})(t)(),Kr(Qm(Lc)(n))(t)}},listener:function(n){return nW(Ke(t))(aW(function(c){return c(n)}))}}};var zy=ye(be);var iW=nh();var zL=function(e){return e},VL=function(e){return e},Mf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Mh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ls=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ff=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ah=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Af=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var xc=function(e){return e};var qn=function(e){return gt(new Lf(function(t){return e},zy))};var _a=function(e){return gt(new xf(e,void 0))};var fs=function(){return function(e){var t=iW(e);return function(n){var c=t(n);return function(v){return function(s){return function(a){return gt(new Ff(WL(new NL(function(d){var i=ee(d);return function(r){var u=rt(i(G.value))(r),l=c(v)(s);return function(p){return u(l(p))}}},a,zy))))}}}}}},Vy=bn,Ih=bn;var tu={lift:function(e){return function(t){return xc(gt(ls.create(t)))}}},ds=mc,Sn={state:function(e){return xc(gt(Mf.create(e)))},Monad0:function(){return ds}};var Er=function(e){return{liftEffect:function(){var t=Je(e);return function(n){return xc(gt(ls.create(t(n))))}}(),Monad0:function(){return ds}}};var Rh=function(e){var t=Er(e.MonadEffect0());return{liftAff:function(){var n=tr(e);return function(c){return xc(gt(ls.create(n(c))))}}(),MonadEffect0:function(){return t}}};var Br=function(e){return gt(new Af(e,zy))},ro=Ba;var On=er,uW=ie(On);var rr=yr,sW=ee(rr),Gy={tailRecM:function(e){return function(t){return uW(e(t))(function(n){if(n instanceof hn)return cr(Gy)(e)(n.value0);if(n instanceof rn)return sW(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return ds}};var Ac=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ic=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$c=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var cW=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}};var lW=function(e,t){return us(e.value0,t.value0)&&us(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var GL=function(e){return e.value2(e.value3)};var JL=function(e){var t=function(s){return Nr(s.vdom)},n=cW("patchThunk","Halogen.VDom.Thunk",function(){return function(s,a){var d=lW(s.thunk,a);if(d)return pn(new dn(nr(s.vdom),s,n(112),t));var i=Pr(s.vdom,e(GL(a)));return pn(new dn(nr(i),{vdom:i,thunk:a},n(115),t))}}),c=n(108),v=function(s){return function(a){var d=bf(s)(e(GL(a)));return pn(new dn(nr(d),{thunk:a,vdom:d},c,t))}};return v};var $h=Js(ro),Ky=mt(rr)(Bt),fW=V(ro);var jL=ee(rr),dW=nh(),pW=th(),hW=rh(),If=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qy=Z,Xy=Z,Tr=function(e){return function(t){if(t instanceof Ac)return $h(Ky(e.handleAction)(e.initialize))(t.value0);if(t instanceof Ic)return $h(Ky(e.handleAction)(e.finalize))(t.value0);if(t instanceof Rc)return $h(Ky(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof $c)return $h(e.handleAction(t.value0))(t.value1);if(t instanceof kc)return jM(function(n){var c=fW(rt(t.value1(void 0))(n));return function(v){return c(e.handleQuery(v))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},_W=Z,Mr=Z;var sn=function(){return{handleAction:Ce(jL(void 0)),handleQuery:Ce(jL(G.value)),receive:Ce(G.value),initialize:G.value,finalize:G.value}}(),Yy=function(){return function(e){var t=dW(e),n=pW(e),c=hW(e);return function(v){var s=t(v),a=n(v),d=c(v);return function(i){return function(r){return function(u){return function(l){return function(p){return _W({get:s(i)(r),pop:a(i)(r),set:d(i)(r),component:u,input:l,output:p})}}}}}}}};var Rf=function(){return ML(G.value)}();var Zy=Rf("style");var ps=Rf("div"),nu=ps([]);var hs=function(e){return Rf("canvas")(e)([])},Oc=Rf("button");var mW=fn();var e0=function(e){return mW(yg(e))};function fr(e){return function(){return e.stopPropagation()}}var t0="DOMContentLoaded";var ZL="keyup",eF="keydown";var tF="mouseup";var nF="mousemove",rF="mouseleave",oF="mouseenter",aF="mousedown",iF="dblclick",uF="click";var _s=Z,sF=Z;var Qa=function(e){return function(t){return Py(e)(function(n){return new z(new os(t(n)))})}};var vs=function(){var e=Qa(uF);return function(t){return e(_s(t))}}(),cF=function(){var e=Qa(iF);return function(t){return e(_s(t))}}();var lF=function(){var e=Qa(eF);return function(t){return e(sF(t))}}(),fF=function(){var e=Qa(ZL);return function(t){return e(sF(t))}}();var dF=function(){var e=Qa(aF);return function(t){return e(_s(t))}}(),pF=function(){var e=Qa(oF);return function(t){return e(_s(t))}}(),hF=function(){var e=Qa(rF);return function(t){return e(_s(t))}}(),_F=function(){var e=Qa(nF);return function(t){return e(_s(t))}}();var vF=function(){var e=Qa(tF);return function(t){return e(_s(t))}}();function Hh(e){return e.clientX}function Ph(e){return e.clientY}var oo=Z;var mF=Mt(Lt)(On),$W=gc(Sn),kW=ee(rr),OW=ye(be),gF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HW=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),PW=function(e){return function(t){return Oc([vs(function(n){return HW.create(oo(n))})])([Zi(t)])}},NW=function(e){return function(t){return mF($W(t.value0))(function(){return kW(new z(t.value1))})}},BW=function(e){var t=Je(Er(e.MonadEffect0()));return function(n){return mF(t(fr(n.value0)))(function(){return _a(void 0)})}},yF=function(e){return Mr({initialState:OW,render:PW(e),eval:Tr({handleAction:BW(e),handleQuery:NW(e),receive:sn.receive,initialize:sn.initialize,finalize:sn.finalize})})};var Uh=Fa(Wh(),1);function CF(e,t){return function(){return t.edit(e)}}var bF=function(e){return function(t){return CF(e,t)}};var zW=Fa(Wh(),1);function wF(e,t){return function(){return t.setValue(e)}}function r0(e){return function(){return e.getValue()}}var EF=function(e){return function(t){return wF(e,t)}};var JW=Fa(Wh(),1);function ue(e){return function(){var t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1);return function(){return t[e].apply(t,n)}}}function qh(e){return function(t){return function(){return t[e]}}}function jW(e){return function(t,n){return function(){n[e]=t}}}var KW=qh("text"),QW=jW("text"),XW=qh("renderer"),YW=qh("inMultiSelectMode"),ZW=ue("selectMoreLines"),e3=qh("container"),t3=ue("setKeyboardHandler"),n3=ue("getKeyboardHandler"),r3=ue("setSession"),o0=ue("getSession"),o3=ue("setValue"),a3=ue("getValue"),i3=ue("getSelection"),u3=ue("resize"),s3=ue("setTheme"),c3=ue("getTheme"),l3=ue("setStyle"),f3=ue("unsetStyle"),d3=ue("setFontSize"),p3=ue("focus"),h3=ue("isFocused"),_3=ue("blur"),v3=ue("getCopyText"),m3=ue("insert"),g3=ue("setOverwrite"),y3=ue("getOverwrite"),D3=ue("toggleOverwrite"),C3=ue("setScrollSpeed"),b3=ue("getScrollSpeed"),w3=ue("setDragDelay"),S3=ue("getDragDelay"),E3=ue("setSelectionStyle"),T3=ue("getSelectionStyle"),M3=ue("setHighlightActiveLine"),L3=ue("getHighlightActiveLine"),F3=ue("setHighlightSelectedWord"),x3=ue("getHighlightSelectedWord"),A3=ue("setShowInvisibles"),I3=ue("getShowInvisibles"),R3=ue("setShowPrintMargin"),$3=ue("getShowPrintMargin"),k3=ue("setPrintMarginColumn"),O3=ue("getPrintMarginColumn"),H3=ue("setReadOnly"),P3=ue("getReadOnly"),N3=ue("setBehavioursEnabled"),B3=ue("getBehavioursEnabled"),W3=ue("setWrapBehavioursEnabled"),U3=ue("getWrapBehavioursEnabled"),q3=ue("setShowFoldWidgets"),z3=ue("getShowFoldWidgets"),V3=ue("remove"),G3=ue("removeWordRight"),J3=ue("removeWordLeft"),j3=ue("removeToLineStart"),K3=ue("removeToLineEnd"),Q3=ue("splitLine"),X3=ue("transposeLetters"),Y3=ue("toLowerCase"),Z3=ue("toUpperCase"),eU=ue("indent"),tU=ue("blockIndent"),nU=ue("blockOutdent"),rU=ue("toggleCommentLines"),oU=ue("getNumberAt"),aU=ue("modifyNumber"),iU=ue("removeLines"),uU=ue("moveLinesDown"),sU=ue("moveLinesUp"),cU=ue("copyLinesUp"),lU=ue("copyLinesDown"),fU=ue("getFirstVisibleRow"),dU=ue("getLastVisibleRow"),pU=ue("isRowVisible"),hU=ue("isRowFullyVisible"),_U=ue("selectPageDown"),vU=ue("selectPageUp"),mU=ue("gotoPageDown"),gU=ue("gotoPageUp"),yU=ue("scrollPageDown"),DU=ue("scrollPageUp"),CU=ue("scrollToRow"),bU=ue("scrollToLine"),wU=ue("centerSelection"),SU=ue("getCursorPosition"),EU=ue("getCursorPositionScreen"),TU=ue("getSelectionRange"),MU=ue("selectAll"),LU=ue("clearSelection"),FU=ue("moveCursorTo"),xU=ue("moveCursorToPosition"),AU=ue("jumpToMatching"),IU=ue("gotoLine"),RU=ue("navigateTo"),$U=ue("navigateUp"),kU=ue("navigateDown"),OU=ue("navigateLeft"),HU=ue("navigateRight"),PU=ue("navigateLineStart"),NU=ue("navigateLineEnd"),BU=ue("navigateFileEnd"),WU=ue("navigateFileStart"),UU=ue("navigateWordRight"),qU=ue("navigateWordLeft"),zU=ue("replace"),VU=ue("replaceAll"),GU=ue("getLastSearchOptions"),JU=ue("find"),jU=ue("findNext"),KU=ue("findPrevious"),QU=ue("undo"),XU=ue("redo"),YU=ue("destroy");var TF={fromString:ye(be)},xt=function(e){return e.fromString};var MF=V(It),LF=Yu(go),t4=me(jt),n4=pp(Ft)(_r);var Lr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),r4=function(e){return e};var o4=function(e){return e},ma=function(e){return e.value};var Hc={append:function(e){return function(t){if(e instanceof Fr&&t instanceof Fr)return new Fr(e.value0+t.value0);if(e instanceof Fr&&t instanceof Lr)return new Lr(MF(LF(function(n){return e.value0+n}))(t.value0));if(e instanceof Lr&&t instanceof Fr)return new Lr(MF(LF(function(n){return t.value0+n}))(e.value0));if(e instanceof Lr&&t instanceof Lr)return new Lr(t4(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},a4=me(Hc),a0={append:function(e){return function(t){return a4(e)(t)}}},FF=me(a0);var $f=function(e){if(e instanceof Lr)return Mn("")(n4("")(e.value0));if(e instanceof Fr)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var zh=function(){return{fromString:Fr.create}}(),xF=xt(zh),or={fromString:function(e){return r4(xF(e))}},Vh=xt(or);var kf={value:function(e){return Vh(c1(e))}};var ms={value:function(){var e=Le(Lo);return function(t){return Vh(e(t))}}()},ou={value:Vh},Pc=function(e){var t=ma(e);return function(n){var c=ma(n);return{value:function(v){return FF(t(v.value0))(FF(Vh(" "))(c(v.value1)))}}}};var Hn={fromString:function(e){return o4(xF(e))}};var AF=function(e){return e};var Of=function(){return new Lr([new ne("-webkit-",""),new ne("-moz-",""),new ne("-ms-",""),new ne("-o-",""),new ne("","")])}();var i4=me(jt),IF=ee(js),u4=Ue(Xo(_r)),ar=Te(Kt),s4=Te(gi(Kt)),au=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xa=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),iu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),su=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),du=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ya=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),RF=function(e){return e},Gh=function(){function e(){}return e.value=new e,e}(),i0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),u0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),s0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$F=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Pf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),it=function(e){return function(t){return new Pf(i4(e.value0)(t),e.value1)}},$t=function(){return new Pf([],Gh.value)}(),OF=function(e){return RF(IF(Ya.create(e)))};var c4={eq:function(e){return function(t){return e instanceof au&&t instanceof au||e instanceof Xa&&t instanceof Xa||e instanceof iu&&t instanceof iu?e.value0===t.value0:e instanceof uu&&t instanceof uu||e instanceof su&&t instanceof su||e instanceof cu&&t instanceof cu||e instanceof lu&&t instanceof lu||e instanceof fu&&t instanceof fu||e instanceof du&&t instanceof du?e.value0===t.value0&&e.value1===t.value1:e instanceof Ya&&t instanceof Ya?e.value0===t.value0:e instanceof Nc&&t instanceof Nc?e.value0===t.value0&&u4(e.value1)(t.value1):!1}}};var HF={compare:function(e){return function(t){if(e instanceof au&&t instanceof au)return ar(e.value0)(t.value0);if(e instanceof au)return fe.value;if(t instanceof au)return pe.value;if(e instanceof Xa&&t instanceof Xa)return ar(e.value0)(t.value0);if(e instanceof Xa)return fe.value;if(t instanceof Xa)return pe.value;if(e instanceof iu&&t instanceof iu)return ar(e.value0)(t.value0);if(e instanceof iu)return fe.value;if(t instanceof iu)return pe.value;if(e instanceof uu&&t instanceof uu){var n=ar(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:ar(e.value1)(t.value1)}if(e instanceof uu)return fe.value;if(t instanceof uu)return pe.value;if(e instanceof su&&t instanceof su){var n=ar(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:ar(e.value1)(t.value1)}if(e instanceof su)return fe.value;if(t instanceof su)return pe.value;if(e instanceof cu&&t instanceof cu){var n=ar(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:ar(e.value1)(t.value1)}if(e instanceof cu)return fe.value;if(t instanceof cu)return pe.value;if(e instanceof lu&&t instanceof lu){var n=ar(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:ar(e.value1)(t.value1)}if(e instanceof lu)return fe.value;if(t instanceof lu)return pe.value;if(e instanceof fu&&t instanceof fu){var n=ar(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:ar(e.value1)(t.value1)}if(e instanceof fu)return fe.value;if(t instanceof fu)return pe.value;if(e instanceof du&&t instanceof du){var n=ar(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:ar(e.value1)(t.value1)}if(e instanceof du)return fe.value;if(t instanceof du)return pe.value;if(e instanceof Ya&&t instanceof Ya)return ar(e.value0)(t.value0);if(e instanceof Ya)return fe.value;if(t instanceof Ya)return pe.value;if(e instanceof Nc&&t instanceof Nc){var n=ar(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:s4(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return c4}};var Jh=function(e){return new Pf([],new i0(e))},En=function(e){return function(t){return new Pf([],new s0(e,t))}},PF=function(e){return function(t){return new Pf([],new u0(e,t))}};var lt=function(e){return RF(IF(Xa.create(e)))};var l4=fn();var f4=function(e){return l4(Tg(e))};var NF=function(e){return on(f4(e))};var p4=V(Mg(Oa));var h4=ut(Vp(jt)(ep)),_4=ie(Lg(jt)(gm));var BF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),WF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),UF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),l0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),f0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),VF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var v4=function(e){return e},Bf=function(e){return NF(e)},jF=function(){var e=Wa(vM(Pu)(ho));return function(t){return v4(e(uc(t)))}}(),yt=function(e){return function(t){return jF(new f0(new l0(e),Bf(t)))}};var cn=function(e){var t=ma(e);return function(n){return function(c){return jF(new Nf(AF(n),t(c)))}}},d0=function(e){var t=cn(e);return function(n){return t(n)}};var m4={map:function(e){return function(t){return p4(e)(t)}}};var g4={apply:function(e){return function(t){return h4(e)(t)}},Functor0:function(){return m4}},jh={bind:function(e){return function(t){return _4(e)(function(n){return function(c){return c}(t(n))})}},Apply0:function(){return g4}};var Kh=xt(Hn),Bc=xt(or);var Za=function(){var e=cn(ou)(Kh("z-index")),t=Le(ea);return function(n){return e(t(n))}}();var y4={value:function(e){return e}};var D4={value:function(e){return e}};var Qh=Bc("relative"),Ur=cn(y4)(Kh("position")),KF=cn(ms)(Kh("opacity"));var QF=Bc("inline-block");var XF=Bc("flex");var YF=Bc("none");var Wc=cn(D4)(Kh("display"));var ZF=Bc("block"),No=Bc("absolute");var nx=me(a0),rx=ma(ms),ox=xt(or),tx=Le(Lo),C4=me(Hc);var Xh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),b4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),w4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),S4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),E4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var gs=function(e){if(e instanceof Xh)return $f(e.value0);if(e instanceof b4)return da(function(t){return da(function(n){return"("+(gs(t)+(" + "+(gs(n)+")")))})(e.value1)})(e.value0);if(e instanceof w4)return da(function(t){return da(function(n){return"("+(gs(t)+(" - "+(gs(n)+")")))})(e.value1)})(e.value0);if(e instanceof S4)return da(function(t){return"("+(tx(e.value0)+(" * "+(gs(t)+")")))})(e.value1);if(e instanceof E4)return da(function(t){return"("+(gs(t)+(" / "+(tx(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},ei={value:function(e){return e instanceof Xh?e.value0:C4(Of)(new Fr("calc"+gs(e)))}};var kt=function(e){return new Xh(nx(rx(e))(ox("px")))};var h0=function(e){return new Xh(nx(rx(e))(ox("em")))};var T4=xt(or);var M4=xt(Hn);var L4={value:function(e){return e}};var ax=T4("row");var ix=cn(L4)(M4("flex-direction"));var Uc=cn(ei),vu=xt(Hn),ux=Pc(ei)(ei),sx=cn(Pc(ux)(ux)),Wf=Uc(vu("width")),mu=Uc(vu("top")),Yh=Uc(vu("right"));var cx=function(e){return function(t){return function(n){return function(c){return sx(vu("padding"))(new ne(new ne(e,t),new ne(n,c)))}}}};var lx=function(e){return function(t){return function(n){return function(c){return sx(vu("margin"))(new ne(new ne(e,t),new ne(n,c)))}}}};var ys=Uc(vu("left")),Uf=Uc(vu("height")),_0=Uc(vu("bottom"));function zn(e){return e}function v0(e){return JSON.stringify(e)}function dx(e,t,n,c,v,s,a){return a==null?e():typeof a=="boolean"?t(a):typeof a=="number"?n(a):typeof a=="string"?c(a):Object.prototype.toString.call(a)==="[object Array]"?v(a):s(a)}var px=function(e){return function(t){return function(n){return dx(Ce(e),Ce(e),Ce(e),t,Ce(e),Ce(e),n)}}};var m0=Le($a),I4=Le(ea);var Zh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),g0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hx=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),y0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),_x=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),D0=function(){function e(){}return e.value=new e,e}(),qf={show:function(e){if(e instanceof Zh)return"(TypeMismatch "+(m0(e.value0)+")");if(e instanceof g0)return"(UnexpectedValue "+(v0(e.value0)+")");if(e instanceof hx)return"(AtIndex "+(I4(e.value0)+(" "+(Le(qf)(e.value1)+")")));if(e instanceof y0)return"(AtKey "+(m0(e.value0)+(" "+(Le(qf)(e.value1)+")")));if(e instanceof _x)return"(Named "+(m0(e.value0)+(" "+(Le(qf)(e.value1)+")")));if(e instanceof D0)return"MissingValue";throw new Error("Failed pattern match at Data.Argonaut.Decode.Error (line 24, column 10 - line 30, column 35): "+[e.constructor.name])}};var yx=function(){return px(new qe(new Zh("String")))(He.create)}();var zc={decodeJson:yx};var t_=function(e){return e.decodeJson};var bx=zn;var Vc={encodeJson:bx};var zf=function(e){return e.encodeJson};var U_e=Fa(wD(),1),Sq={keyEncoding:"json",valueEncoding:"json"},SD=e=>t=>n=>()=>e.put(t,n),ED=e=>t=>()=>new Promise((c,v)=>{let s=(a,d)=>{c(d)};e.get(t,Sq,s)});var TD=e=>t=>()=>e.del(t);var MD=e=>()=>e.keys().all();function rI(e){return function(t){return function(n){return function(){e.then(n,t)}}}}var Mq=Wd(Re),Lq=at(RM),Fq=ye(be),xq=Cn(uM(_1)(ho)),Aq=Sy(ho),Iq=V(Bp(Oa)),Rq=wh(ho),$q=ie(wn),kq=Je(Ln),Oq=function(e){return function(t){return Io(function(n){return Mq(Lq)(rI(t)(function(c){return n(qe.create(e(c)))()})(function(c){return n(He.create(c))()}))})}};var Hq=function(e){return gn(function(t){return $n("Promise failed, couldn't extract JS Error or String")})(Fq)(e0(xq(Aq("Error")(e))(Iq($n)(Rq(e)))))},Pq=Oq(Hq),Lu=function(e){return $q(kq(e))(Pq)};var R_=e=>e===void 0;var oI=Le(qf),aI=ie(wn),jq=_n(Ei),Kq=jq(Hu),iI=Je(Ln),FD=ee(Do);var uI=function(e){var t=zf(e);return function(n){return function(c){var v=zf(c);return function(s){return function(a){return function(d){return function(i){return Lu(SD(a.value0)(t(d))(v(i)))}}}}}}};var sI=function(e){var t=zf(e);return function(n){return function(c){return function(v){var s=t_(v);return function(a){return function(d){return aI(Lu(ED(a.value0)(t(d))))(function(i){var r=R_(i);if(r)return FD(G.value);var u=s(i);if(u instanceof qe)return iI(Hr($n(oI(u.value0))));if(u instanceof He)return FD(new z(u.value0));throw new Error("Failed pattern match at Level.DB.Operations (line 28, column 10 - line 30, column 40): "+[u.constructor.name])})}}}}}};var cI=function(e){var t=zf(e);return function(n){return function(c){return function(v){return function(s){return function(a){return Lu(TD(s.value0)(t(a)))}}}}}},lI=function(e){var t=t_(e);return function(n){return function(c){return aI(Lu(MD(c.value0)))(function(v){var s=Kq(t)(v);if(s instanceof qe)return iI(Hr($n(oI(s.value0))));if(s instanceof He)return FD(s.value0);throw new Error("Failed pattern match at Level.DB.Operations (line 71, column 3 - line 73, column 26): "+[s.constructor.name])})}}};var fI=Fa(wD(),1),Xq={keyEncoding:"json",valueEncoding:"json"},xD=e=>()=>new fI.Level(e,Xq);var t8=V(Re),n8=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var dI=function(e){return t8(n8.create)(xD(e))};var AD=Vc,$_=zc,o8=uI(AD)($_)(Vc)(zc),a8=sI(AD)($_)(Vc)(zc),i8=cI(AD)($_)(Vc)(zc),pI=function(e){return function(t){return function(n){return o8(e)(t)(n)}}},hI=function(e){return function(t){return a8(e)(t)}},dd=dI("filesystem"),_I=lI($_)(zc),vI=function(e){return function(t){return i8(e)(t)}};var wa=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ar=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var yI=function(e){return e instanceof Ar?new z(e.value1):e instanceof Vr?new z(e.value0):G.value},DI=function(e){return e instanceof Ar?new z(e.value0):e instanceof wa?new z(e.value0):G.value};var CI=function(e){var t=me(e);return function(n){var c=me(n);return{append:function(v){return function(s){if(v instanceof wa&&s instanceof wa)return new wa(t(v.value0)(s.value0));if(v instanceof wa&&s instanceof Vr)return new Ar(v.value0,s.value0);if(v instanceof wa&&s instanceof Ar)return new Ar(t(v.value0)(s.value0),s.value1);if(v instanceof Vr&&s instanceof wa)return new Ar(s.value0,v.value0);if(v instanceof Vr&&s instanceof Vr)return new Vr(c(v.value0)(s.value0));if(v instanceof Vr&&s instanceof Ar)return new Ar(s.value0,c(v.value0)(s.value1));if(v instanceof Ar&&s instanceof wa)return new Ar(t(v.value0)(s.value0),v.value1);if(v instanceof Ar&&s instanceof Vr)return new Ar(v.value0,c(v.value1)(s.value0));if(v instanceof Ar&&s instanceof Ar)return new Ar(t(v.value0)(s.value0),c(v.value1)(s.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[v.constructor.name,s.constructor.name])}}}}};var Fu=function(e){return function(){console.log(e)}},k_=function(e){return function(){console.warn(e)}};var D8=me(ku),C8=at(Ha),wI=Uu(Ft),SI=wI(Ha),P_=xo(Ft)(Ha),Sa=V(It),RD=ut(Ou),b8=me(jt),EI=Ut(Ft),w8=EI(Ha),S8=jm(HF),N_=V(Tt),E8=xt(TF),TI=ie(mr),T8=mp(tg(Ft)),MI=V(sc(It));var M8=pp(Ft)(_r),L8=ie(vi),F8=Sp(Gl),x8=na(Al(_o)),A8=xo(ql(Ft))(Ha),I8=Le(Lo),B_=function(e){return e},R8=function(e){return e},$D=function(e){return function(t){return function(n){return t+(e+n)}}},$8={append:function(e){return function(t){return e+t}}},k8={append:function(e){return function(t){return e+t}}},LI=CI($8)(k8),FI=LE(LI),H_=EI(FI),O8=wI(FI),pd=me(mm(LI)),bI=function(e){var t=gn(function(n){return C8})(function(n){return SI([n.value0,": ",n.value1])});return P_("; ")(Sa(t)(e))},H8=function(e){if(e instanceof au)return"#"+e.value0;if(e instanceof Xa)return"."+e.value0;if(e instanceof iu)return"["+(e.value0+"]");if(e instanceof uu)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof su)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof cu)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof lu)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof fu)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof du)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof Ya)return":"+e.value0;if(e instanceof Nc)return":"+(e.value0+("("+(P_(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},P8=function(e){return function(t){if(e.length===0&&t instanceof Gh)return["*"];if(t instanceof Gh)return[""];if(t instanceof i0)return[t.value0];if(t instanceof u0)return RD(Sa($D(" > "))(ci(t.value0)))(ci(t.value1));if(t instanceof s0)return RD(Sa($D(" "))(ci(t.value0)))(ci(t.value1));if(t instanceof $F)return RD(Sa($D(" + "))(ci(t.value0)))(ci(t.value1));if(t instanceof kF)return b8(ci(t.value0))(ci(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},ci=function(e){return Sa(function(t){return t+w8(H8)(S8(e.value0))})(P8(e.value0)(e.value1))},N8=function(){var e=P_(", ");return function(t){return e(ci(t))}}(),Os=function(e){return e.length===0?G.value:N_(function(t){return new Yn(t.head,t.tail)})(yp(e))};var ul=function(e){if(e.value0 instanceof qF)return rt(e.value0.value0)(function(t){return PF(ul(t))(e.value0.value0)})(Os(e.value1));if(e.value0 instanceof l0)return rt(e.value0.value0)(function(t){return En(ul(t))(e.value0.value0)})(Os(e.value1));if(e.value0 instanceof WF)return rt(e.value0.value0)(function(t){return En(e.value0.value0)(ul(t))})(Os(e.value1));if(e.value0 instanceof UF)return rt(Jh("TODO"))(ul)(Os(Km(e.value0.value0)(In(e.value0)(e.value1))));if(e.value0 instanceof BF)return rt(it($t)(e.value0.value0))(function(t){return it(ul(t))(e.value0.value0)})(Os(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},B8=function(e){return $f(e)},W8=function(e){return z.create(Vr.create(B_(E8("@import url("+(e+`);
`)))))},U8=function(e){return e},kD=function(e){return TI(e)(function(){var t=N_(U8);return function(n){return t(yI(n))}}())},q8=function(e){return e},xI=function(e){return TI(e)(function(){var t=N_(q8);return function(n){return t(DI(n))}}())},z8=function(e){return rt(e.value0)(function(t){return"("+(e.value0+(": "+($f(t)+")")))})(e.value1)},V8=function(e){return"@media "+(B8(e.value1)+T8(D8)(MI(function(t){return function(n){return" and "+n}(z8(t))})(e.value2)))};var G8=function(e){return function(t){if(e instanceof Fr&&t instanceof Fr)return[new He(new ne(e.value0,t.value0))];if(e instanceof Lr&&t instanceof Fr)return Sa(function(n){return new He(new ne(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof Fr&&t instanceof Lr)return Sa(function(n){return new He(new ne(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof Lr&&t instanceof Lr)return Sa(function(n){return rt(new qe(n.value0+n.value1))(function(){var c=ne.create(n.value0+n.value1);return function(v){return He.create(c(function(s){return n.value0+s}(v)))}}())(M8(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},OD=function(e){return G8(e.value0)(e.value1)},J8=function(e){return function(t){var n=L8(t)(OD),c=N_(function(s){return wa.create(R8(bI(F8(s))))})(Os(n)),v=function(s){return z.create(Vr.create(B_(P_(" ")([N8(ul(s)),"{",bI(n),`}
`]))))};return rt(c)(v)(Os(e))}},hd=function(e){return function(t){var n=function(h){return h instanceof zF?new z(new ne(h.value0,h.value1)):G.value},c=H_(Pa(Pe(j8)(e)))(oa(n)(t)),v=function(h){return h instanceof Nf?new z(new ne(h.value0,h.value1)):G.value},s=function(){var h=oa(v)(t),_=x8(LT)(h);return _?J8(e)(h):G.value}(),a=function(h){return hd(In(h)(e))},d=function(h){return h instanceof f0?new z(new ne(h.value0,h.value1)):G.value},i=O8(Sa(Pa(a))(oa(d)(t))),r=function(h){return h instanceof GF?new z(h.value0):G.value},u=H_(K8)(oa(r)(t)),l=function(h){return h instanceof JF?new z(h.value0):G.value},p=H_(W8)(oa(l)(t)),f=function(h){return h instanceof VF?new z(h.value0):G.value},o=H_(X8)(oa(f)(t));return pd(s)(pd(p)(pd(u)(pd(o)(pd(i)(c)))))}},j8=function(e){return function(t){return function(n){return z.create(Vr.create(B_(V8(e)+(" { "+(Mn("")(kD(hd(t)(n)))+` }
`)))))}}},K8=function(e){var t=" "+(e.value0+(" { "+(A8(" ")(MI(Pa(Q8))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],c=SI(Sa(function(v){return v+t})(n));return new z(new Vr(c))},Q8=function(e){return function(t){var n=Mn("")(xI(hd([])(t)));return I8(e)+("% "+("{ "+(n+" }")))}},X8=function(e){return z.create(Vr.create(B_("@font-face { "+(Mn("")(xI(hd([])(e)))+` }
`))))},AI=function(){var e=hd([]);return function(t){return e(Bf(t))}}();var Ea=function(){var e=function(t){return function(n){return new z(new ah(t,n))}};return function(t){return SL(e(t))}}(),HD=function(e){return EL(e)};var II=HD(TL);var RI=function(e){return HD(e)("type")};var sl=II("width");var cl=II("height");var PD=function(){return LL(G.value)}();var Z8=RI(Hy),ez=ie(vi),tz=Sf(Ft),$I=function(e){var t=Mn("")(kD(AI(e)));return Zy([Z8("text/css")])([Zi(t)])},ND=function(){var e=function(){var s=Zr("; "),a=hL(Pu)(function(d){return function(i){return[d+(": "+i)]}});return function(d){return s(a(d))}}(),t=Xm(Ut(dp)(Pu)(uc)),n=function(s){return s instanceof Nf?new z(new ne(s.value0,s.value1)):G.value},c=function(s){var a=ez(oa(n)(s))(function(d){return t(OD(d))});return tz(a)},v=PD("style");return function(s){return v(e(c(Bf(s))))}}();function OI(e,t,n){var c=Object.prototype.toString.call(n);return c.indexOf("[object HTML")===0&&c.indexOf("Element]")===c.length-8?t(n):e}var HI=Z;var _d=function(e){return OI(G.value,z.create,e)};var NI=Mt(Lt),PI=NI(jh),li=ie(On),BD=Qu(Sn),U_=mt(rr)(Bt),WD=NI(On),rz=Rn(Sn),BI=function(){function e(){}return e.value=new e,e}(),WI=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),UI=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),oz=function(e){return function(t){var n=nu([ps([Ea("editor"),ND(PI(Wf(kt(500)))(function(){return Uf(kt(500))}))])([]),Oc([vs(function(c){return WI.create(oo(c))})])([Zi("Save")]),Oc([vs(function(c){return UI.create(oo(c))})])([Zi("Exit")])]);return ps([ND(PI(Wc(XF))(function(){return ix(ax)}))])([n])}},az=function(e){var t=Je(Er(e.MonadEffect0())),n=tr(Rh(e));return function(c){return function(v){if(v instanceof BI)return li(t(dd))(function(s){return li(BD(function(a){return a.filePath}))(function(a){return li(n(hI(s)(a)))(function(d){return li(Br("editor"))(function(i){return Pe(U_)(i)(function(r){return Pe(U_)(_d(r))(function(u){return li(t(bF(u)(Uh.default)))(function(l){return li(t(o0(l)))(function(p){return WD(Pe(U_)(d)(function(f){return t(EF(f)(p))}))(function(){return rz(function(f){var o={};for(var h in f)({}).hasOwnProperty.call(f,h)&&(o[h]=f[h]);return o.editSession=new z(new ne(s,new ne(l,p))),o})})})})})})})})})});if(v instanceof WI)return WD(t(fr(v.value0)))(function(){return li(BD(function(s){return s.editSession}))(function(s){return li(BD(function(a){return a.filePath}))(function(a){return Pe(U_)(s)(function(d){return li(t(r0(d.value1.value1)))(function(i){return n(pI(d.value0)(a)(i))})})})})});if(v instanceof UI)return WD(t(fr(v.value0)))(function(){return _a(void 0)});throw new Error("Failed pattern match at Example.Editor (line 73, column 16 - line 95, column 18): "+[v.constructor.name])}}},qI=function(e){var t=oz(e),n=az(e);return function(c){return Mr({initialState:function(v){return{editSession:G.value,filePath:v}},render:t,eval:Tr({handleAction:n(c),handleQuery:sn.handleQuery,receive:sn.receive,initialize:new z(BI.value),finalize:sn.finalize})})}};function xu(e){return function(){return e.getContext("2d")}}function vd(e){return function(){return e.width}}function md(e){return function(){return e.height}}function gd(e){return function(t){return function(){e.width=t}}}function yd(e){return function(t){return function(){e.height=t}}}function UD(e){return function(){return e.toDataURL()}}function qD(e){return function(t){return function(){e.lineWidth=t}}}function zD(e){return function(t){return function(){e.setLineDash(t)}}}function VD(e){return function(t){return function(){e.fillStyle=t}}}function GD(e){return function(t){return function(){e.strokeStyle=t}}}function JD(e){return function(t){return function(){e.shadowColor=t}}}function jD(e){return function(t){return function(){e.shadowBlur=t}}}function KD(e){return function(t){return function(){e.shadowOffsetX=t}}}function QD(e){return function(t){return function(){e.shadowOffsetY=t}}}function XD(e){return function(t){return function(){e.miterLimit=t}}}function q_(e){return function(t){return function(){e.lineCap=t}}}function z_(e){return function(t){return function(){e.lineJoin=t}}}function zI(e){return function(t){return function(){e.globalCompositeOperation=t}}}function YD(e){return function(t){return function(){e.globalAlpha=t}}}function V_(e){return function(){e.beginPath()}}function G_(e){return function(){e.stroke()}}function J_(e){return function(){e.fill()}}function ZD(e){return function(){e.clip()}}function eC(e){return function(t){return function(n){return function(){e.lineTo(t,n)}}}}function tC(e){return function(t){return function(n){return function(){e.moveTo(t,n)}}}}function nC(e){return function(){e.closePath()}}function rC(e){return function(t){return function(){e.arc(t.x,t.y,t.radius,t.start,t.end,t.useCounterClockwise)}}}function oC(e){return function(t){return function(){e.rect(t.x,t.y,t.width,t.height)}}}function aC(e){return function(t){return function(){e.fillRect(t.x,t.y,t.width,t.height)}}}function iC(e){return function(t){return function(){e.strokeRect(t.x,t.y,t.width,t.height)}}}function uC(e){return function(t){return function(){e.clearRect(t.x,t.y,t.width,t.height)}}}function sC(e){return function(t){return function(){e.scale(t.scaleX,t.scaleY)}}}function cC(e){return function(t){return function(){e.rotate(t)}}}function lC(e){return function(t){return function(){e.translate(t.translateX,t.translateY)}}}function fC(e){return function(t){return function(){e.transform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function dC(e){return function(t){return function(){e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function VI(e){return function(){return e.textAlign}}function GI(e){return function(t){return function(){e.textAlign=t}}}function JI(e){return function(){return e.textBaseline}}function jI(e){return function(t){return function(){e.textBaseline=t}}}function pC(e){return function(){return e.font}}function hC(e){return function(t){return function(){e.font=t}}}function _C(e){return function(t){return function(n){return function(c){return function(){e.fillText(t,n,c)}}}}}function vC(e){return function(t){return function(n){return function(c){return function(){e.strokeText(t,n,c)}}}}}function mC(e){return function(t){return function(){return e.measureText(t)}}}function j_(e){return function(){e.save()}}function K_(e){return function(){e.restore()}}function gC(e){return function(t){return function(n){return function(c){return function(v){return function(){return e.getImageData(t,n,c,v)}}}}}}function yC(e){return function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return function(d){return function(){e.putImageData(t,n,c,v,s,a,d)}}}}}}}}}function DC(e){return function(t){return function(n){return function(c){return function(){e.putImageData(t,n,c)}}}}}function CC(e){return function(t){return function(n){return function(){return e.createImageData(t,n)}}}}function bC(e){return function(t){return function(n){return function(c){return function(){e.drawImage(t,n,c)}}}}}function wC(e){return function(t){return function(n){return function(c){return function(v){return function(s){return function(){e.drawImage(t,n,c,v,s)}}}}}}}function SC(e){return function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return function(d){return function(i){return function(r){return function(){e.drawImage(t,n,c,v,s,a,d,i,r)}}}}}}}}}}}function KI(e){return function(t){return function(n){return function(){return e.createPattern(t,n)}}}}function EC(e){return function(t){return function(){e.fillStyle=t}}}function TC(e){return function(t){return function(){return e.createLinearGradient(t.x0,t.y0,t.x1,t.y1)}}}function MC(e){return function(t){return function(){return e.createRadialGradient(t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)}}}function LC(e){return function(t){return function(){e.fillStyle=t}}}function FC(e){return function(t){return function(){e.quadraticCurveTo(t.cpx,t.cpy,t.x,t.y)}}}function xC(e){return function(t){return function(){e.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x,t.y)}}}var sz=function(e){return Zu(Hr(e))},AC=function(e){return sz($n(e))};var QI=V(Re),fz=To(bm),XI=function(){function e(){}return e.value=new e,e}(),YI=function(){function e(){}return e.value=new e,e}(),ZI=function(){function e(){}return e.value=new e,e}(),eR=function(){function e(){}return e.value=new e,e}(),tR=function(){function e(){}return e.value=new e,e}(),nR=function(){function e(){}return e.value=new e,e}(),rR=function(){function e(){}return e.value=new e,e}(),oR=function(){function e(){}return e.value=new e,e}(),aR=function(){function e(){}return e.value=new e,e}(),iR=function(){function e(){}return e.value=new e,e}(),uR=function(){function e(){}return e.value=new e,e}(),dz=function(){function e(){}return e.value=new e,e}(),pz=function(){function e(){}return e.value=new e,e}(),hz=function(){function e(){}return e.value=new e,e}(),_z=function(){function e(){}return e.value=new e,e}(),vz=function(){function e(){}return e.value=new e,e}(),mz=function(){function e(){}return e.value=new e,e}(),gz=function(){function e(){}return e.value=new e,e}(),yz=function(){function e(){}return e.value=new e,e}(),Dz=function(){function e(){}return e.value=new e,e}(),Cz=function(){function e(){}return e.value=new e,e}(),bz=function(){function e(){}return e.value=new e,e}(),wz=function(){function e(){}return e.value=new e,e}(),Sz=function(){function e(){}return e.value=new e,e}(),Ez=function(){function e(){}return e.value=new e,e}(),Tz=function(){function e(){}return e.value=new e,e}(),Mz=function(){function e(){}return e.value=new e,e}(),Lz=function(){function e(){}return e.value=new e,e}(),Fz=function(){function e(){}return e.value=new e,e}(),xz=function(){function e(){}return e.value=new e,e}(),Az=function(){function e(){}return e.value=new e,e}(),Iz=function(){function e(){}return e.value=new e,e}(),Rz=function(){function e(){}return e.value=new e,e}(),$z=function(){function e(){}return e.value=new e,e}(),kz=function(){function e(){}return e.value=new e,e}(),Oz=function(){function e(){}return e.value=new e,e}(),Hz=function(){function e(){}return e.value=new e,e}(),Pz=function(){function e(){}return e.value=new e,e}(),Nz=function(){function e(){}return e.value=new e,e}(),Bz=function(){function e(){}return e.value=new e,e}(),Wz=function(){function e(){}return e.value=new e,e}(),Uz=function(){function e(){}return e.value=new e,e}(),qz=function(){function e(){}return e.value=new e,e}(),zz=function(){function e(){}return e.value=new e,e}(),Vz=function(){function e(){}return e.value=new e,e}(),Gz=function(){function e(){}return e.value=new e,e}(),Jz=function(){function e(){}return e.value=new e,e}();var sR=function(e){var t=function(n){return n==="top"?XI.value:n==="hanging"?YI.value:n==="middle"?ZI.value:n==="alphabetic"?eR.value:n==="ideographic"?tR.value:n==="bottom"?nR.value:AC("invalid TextBaseline: "+n)};return QI(t)(JI(e))},cR=function(e){var t=function(n){return n==="left"?rR.value:n==="right"?oR.value:n==="center"?aR.value:n==="start"?iR.value:n==="end"?uR.value:AC("invalid TextAlign: "+n)};return QI(t)(VI(e))};var lR=function(e){return function(t){var n=function(c){if(c instanceof XI)return"top";if(c instanceof YI)return"hanging";if(c instanceof ZI)return"middle";if(c instanceof eR)return"alphabetic";if(c instanceof tR)return"ideographic";if(c instanceof nR)return"bottom";throw new Error("Failed pattern match at Graphics.Canvas (line 577, column 5 - line 577, column 33): "+[c.constructor.name])};return jI(e)(n(t))}},fR=function(e){return function(t){var n=function(c){if(c instanceof rR)return"left";if(c instanceof oR)return"right";if(c instanceof aR)return"center";if(c instanceof iR)return"start";if(c instanceof uR)return"end";throw new Error("Failed pattern match at Graphics.Canvas (line 531, column 5 - line 531, column 32): "+[c.constructor.name])};return GI(e)(n(t))}},dR=function(e){return function(t){if(t instanceof vz)return z_(e)("bevel");if(t instanceof mz)return z_(e)("round");if(t instanceof gz)return z_(e)("miter");throw new Error("Failed pattern match at Graphics.Canvas (line 253, column 1 - line 253, column 52): "+[e.constructor.name,t.constructor.name])}},pR=function(e){return function(t){if(t instanceof yz)return q_(e)("round");if(t instanceof Dz)return q_(e)("square");if(t instanceof Cz)return q_(e)("butt");throw new Error("Failed pattern match at Graphics.Canvas (line 238, column 1 - line 238, column 50): "+[e.constructor.name,t.constructor.name])}},hR=function(e){return function(t){var n=function(c){if(c instanceof bz)return"source-over";if(c instanceof wz)return"source-in";if(c instanceof Sz)return"source-out";if(c instanceof Ez)return"source-atop";if(c instanceof Tz)return"destination-over";if(c instanceof Mz)return"destination-in";if(c instanceof Lz)return"destination-out";if(c instanceof Fz)return"destination-atop";if(c instanceof xz)return"lighter";if(c instanceof Az)return"copy";if(c instanceof Iz)return"xor";if(c instanceof Rz)return"multiply";if(c instanceof $z)return"screen";if(c instanceof kz)return"overlay";if(c instanceof Oz)return"darken";if(c instanceof Hz)return"lighten";if(c instanceof Pz)return"color-dodge";if(c instanceof Nz)return"color-burn";if(c instanceof Bz)return"hard-light";if(c instanceof Wz)return"soft-light";if(c instanceof Uz)return"difference";if(c instanceof qz)return"exclusion";if(c instanceof zz)return"hue";if(c instanceof Vz)return"saturation";if(c instanceof Gz)return"color";if(c instanceof Jz)return"luminosity";throw new Error("Failed pattern match at Graphics.Canvas (line 326, column 5 - line 326, column 45): "+[c.constructor.name])};return zI(e)(n(t))}},_R=function(e){return function(t){return fz(yd(e)(t.height))(gd(e)(t.width))}};var vR=function(e){return function(){var n=vd(e)(),c=md(e)();return{width:n,height:c}}};var mR=function(e){return function(t){return function(n){var c=function(v){if(v instanceof dz)return"repeat";if(v instanceof pz)return"repeat-x";if(v instanceof hz)return"repeat-y";if(v instanceof _z)return"no-repeat";throw new Error("Failed pattern match at Graphics.Canvas (line 677, column 5 - line 677, column 31): "+[v.constructor.name])};return KI(e)(t)(c(n))}}};var gR=e=>t=>()=>e.convertToBlob({type:"image/jpeg",quality:t});var yR=function(e){return function(t){return Lu(gR(e)(t))}};var Xz=ht(bc),co=V(Re),CR=Mt(Lt),Yz=V(yo);var Zz=function(e){return e},IC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),RC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$C=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),OC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),PC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),NC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),BC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),WC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),X_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),UC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),VC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),GC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),JC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),KC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),QC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),XC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),YC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),eb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ob=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ab=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ib=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Y_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ub=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Z_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ev=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),db=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tv=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),gb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),yb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),nv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Db=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),bb=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),wb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Sb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Eb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Tb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Mb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Lb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ab=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ib=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),eV=function(e){return e};var tV=function(e){var t=V(e);return{map:function(n){return function(c){if(c instanceof IC)return new IC(t(n)(c.value0));if(c instanceof RC)return new RC(function(v){return n(c.value0(v))});if(c instanceof $C)return new $C(c.value0,n(c.value1));if(c instanceof kC)return new kC(function(v){return n(c.value0(v))});if(c instanceof OC)return new OC(c.value0,n(c.value1));if(c instanceof HC)return new HC(function(v){return n(c.value0(v))});if(c instanceof PC)return new PC(c.value0,n(c.value1));if(c instanceof NC)return new NC(function(v){return n(c.value0(v))});if(c instanceof BC)return new BC(c.value0,n(c.value1));if(c instanceof WC)return new WC(c.value0,n(c.value1));if(c instanceof X_)return new X_(c.value0,n(c.value1));if(c instanceof UC)return new UC(c.value0,n(c.value1));if(c instanceof qC)return new qC(c.value0,n(c.value1));if(c instanceof zC)return new zC(c.value0,n(c.value1));if(c instanceof VC)return new VC(c.value0,n(c.value1));if(c instanceof GC)return new GC(c.value0,n(c.value1));if(c instanceof JC)return new JC(c.value0,n(c.value1));if(c instanceof jC)return new jC(c.value0,n(c.value1));if(c instanceof KC)return new KC(c.value0,n(c.value1));if(c instanceof QC)return new QC(c.value0,n(c.value1));if(c instanceof XC)return new XC(c.value0,n(c.value1));if(c instanceof YC)return new YC(n(c.value0));if(c instanceof ZC)return new ZC(n(c.value0));if(c instanceof eb)return new eb(n(c.value0));if(c instanceof tb)return new tb(n(c.value0));if(c instanceof nb)return new nb(c.value0,n(c.value1));if(c instanceof rb)return new rb(c.value0,n(c.value1));if(c instanceof ob)return new ob(n(c.value0));if(c instanceof ab)return new ab(c.value0,n(c.value1));if(c instanceof ib)return new ib(c.value0,n(c.value1));if(c instanceof Y_)return new Y_(c.value0,n(c.value1));if(c instanceof ub)return new ub(c.value0,n(c.value1));if(c instanceof sb)return new sb(c.value0,n(c.value1));if(c instanceof cb)return new cb(c.value0,n(c.value1));if(c instanceof Z_)return new Z_(c.value0,n(c.value1));if(c instanceof ev)return new ev(c.value0,n(c.value1));if(c instanceof lb)return new lb(c.value0,n(c.value1));if(c instanceof fb)return new fb(c.value0,n(c.value1));if(c instanceof db)return new db(function(v){return n(c.value0(v))});if(c instanceof pb)return new pb(c.value0,n(c.value1));if(c instanceof hb)return new hb(function(v){return n(c.value0(v))});if(c instanceof _b)return new _b(c.value0,n(c.value1));if(c instanceof vb)return new vb(function(v){return n(c.value0(v))});if(c instanceof mb)return new mb(c.value0,n(c.value1));if(c instanceof tv)return new tv(c.value0,c.value1,n(c.value2));if(c instanceof gb)return new gb(c.value0,c.value1,n(c.value2));if(c instanceof yb)return new yb(c.value0,function(v){return n(c.value1(v))});if(c instanceof nv)return new nv(n(c.value0));if(c instanceof rv)return new rv(n(c.value0));if(c instanceof Db)return new Db(c.value0,function(v){return n(c.value1(v))});if(c instanceof Cb)return new Cb(c.value0,c.value1,n(c.value2));if(c instanceof bb)return new bb(c.value0,c.value1,c.value2,n(c.value3));if(c instanceof wb)return new wb(c.value0,function(v){return n(c.value1(v))});if(c instanceof Sb)return new Sb(function(v){return n(c.value0(v))});if(c instanceof Eb)return new Eb(c.value0,c.value1,n(c.value2));if(c instanceof Tb)return new Tb(c.value0,c.value1,n(c.value2));if(c instanceof Mb)return new Mb(c.value0,c.value1,n(c.value2));if(c instanceof Lb)return new Lb(c.value0,c.value1,function(v){return n(c.value2(v))});if(c instanceof Fb)return new Fb(c.value0,n(c.value1));if(c instanceof xb)return new xb(c.value0,function(v){return n(c.value1(v))});if(c instanceof Ab)return new Ab(c.value0,function(v){return n(c.value1(v))});if(c instanceof Ib)return new Ib(c.value0,n(c.value1));if(c instanceof Rb)return new Rb(c.value0,n(c.value1));if(c instanceof $b)return new $b(c.value0,n(c.value1));if(c instanceof kb)return new kb(c.value0,function(v){return n(c.value1(v))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 572, column 1 - line 637, column 64): "+[n.constructor.name,c.constructor.name])}}}},ov=er,DR=CR(ov),nV=ie(ov);var av=yr,rV=ee(av),fl=function(e){var t=e.MonadEffect0(),n=t.Monad0(),c=Xz(n),v=n.Bind1(),s=Ua(v),a=ie(s),d=wr(Oi(n)),i=Je(fa(t)),r=CR(s),u=ee(wc(n.Applicative0())),l=tr(Xp(e)),p=ia(tV(v.Apply0().Functor0()));return function(f){var o=function(_){if(_ instanceof IC)return c(_.value0);if(_ instanceof RC)return a(d)(function(m){return i(co(_.value0)(vd(m.canvasElement)))});if(_ instanceof $C)return a(d)(function(m){return r(i(gd(m.canvasElement)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof kC)return a(d)(function(m){return i(co(_.value0)(md(m.canvasElement)))});if(_ instanceof OC)return a(d)(function(m){return r(i(yd(m.canvasElement)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof HC)return a(d)(function(m){return i(co(_.value0)(vR(m.canvasElement)))});if(_ instanceof PC)return a(d)(function(m){return r(i(_R(m.canvasElement)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof NC)return a(d)(function(m){return i(co(_.value0)(UD(m.canvasElement)))});if(_ instanceof BC)return a(d)(function(m){return r(i(qD(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof WC)return a(d)(function(m){return r(i(zD(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof X_)return a(d)(function(m){return r(i(VD(m.context2D)(hc(_.value0))))(function(){return u(_.value1)})});if(_ instanceof UC)return a(d)(function(m){return r(i(GD(m.context2D)(hc(_.value0))))(function(){return u(_.value1)})});if(_ instanceof qC)return a(d)(function(m){return r(i(jD(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof zC)return a(d)(function(m){return r(i(KD(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof VC)return a(d)(function(m){return r(i(QD(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof GC)return a(d)(function(m){return r(i(JD(m.context2D)(hc(_.value0))))(function(){return u(_.value1)})});if(_ instanceof JC)return a(d)(function(m){return r(i(XD(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof jC)return a(d)(function(m){return r(i(pR(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof KC)return a(d)(function(m){return r(i(dR(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof QC)return a(d)(function(m){return r(i(hR(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof XC)return a(d)(function(m){return r(i(YD(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof YC)return a(d)(function(m){return r(i(V_(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof ZC)return a(d)(function(m){return r(i(G_(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof eb)return a(d)(function(m){return r(i(J_(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof tb)return a(d)(function(m){return r(i(ZD(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof nb)return a(d)(function(m){return r(i(eC(m.context2D)(_.value0.x)(_.value0.y)))(function(){return u(_.value1)})});if(_ instanceof rb)return a(d)(function(m){return r(i(tC(m.context2D)(_.value0.x)(_.value0.y)))(function(){return u(_.value1)})});if(_ instanceof ob)return a(d)(function(m){return r(i(nC(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof ab)return a(d)(function(m){return r(i(rC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof ib)return a(d)(function(m){return r(i(oC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof Y_)return a(d)(function(m){return r(i(aC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof ub)return a(d)(function(m){return r(i(iC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof sb)return a(d)(function(m){return r(i(uC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof cb)return a(d)(function(m){return r(i(sC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof Z_)return a(d)(function(m){return r(i(cC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof ev)return a(d)(function(m){return r(i(lC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof lb)return a(d)(function(m){return r(i(fC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof fb)return a(d)(function(m){return r(i(dC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof db)return a(d)(function(m){return i(co(_.value0)(cR(m.context2D)))});if(_ instanceof pb)return a(d)(function(m){return r(i(fR(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof hb)return a(d)(function(m){return i(co(_.value0)(sR(m.context2D)))});if(_ instanceof _b)return a(d)(function(m){return r(i(lR(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof vb)return a(d)(function(m){return i(co(function(y){return _.value0(Zz(y))})(pC(m.context2D)))});if(_ instanceof mb)return a(d)(function(m){return r(i(hC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof tv)return a(d)(function(m){return r(i(_C(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return u(_.value2)})});if(_ instanceof gb)return a(d)(function(m){return r(i(vC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return u(_.value2)})});if(_ instanceof yb)return a(d)(function(m){return i(co(_.value1)(mC(m.context2D)(_.value0)))});if(_ instanceof nv)return a(d)(function(m){return r(i(j_(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof rv)return a(d)(function(m){return r(i(K_(m.context2D)))(function(){return u(_.value0)})});if(_ instanceof Db)return a(d)(function(m){return i(co(_.value1)(gC(m.context2D)(_.value0.x)(_.value0.y)(_.value0.width)(_.value0.height)))});if(_ instanceof Cb)return a(d)(function(m){return r(i(DC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return u(_.value2)})});if(_ instanceof bb)return a(d)(function(m){return r(i(yC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)(_.value2.x)(_.value2.y)(_.value2.width)(_.value2.height)))(function(){return u(_.value3)})});if(_ instanceof wb)return a(d)(function(m){return i(co(_.value1)(CC(m.context2D)(_.value0.width)(_.value0.height)))});if(_ instanceof Sb)return a(d)(function(m){return u(_.value0(m.canvasElement))});if(_ instanceof Eb)return a(d)(function(m){return r(i(bC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return u(_.value2)})});if(_ instanceof Tb)return a(d)(function(m){return r(i(wC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)(_.value1.width)(_.value1.height)))(function(){return u(_.value2)})});if(_ instanceof Mb)return a(d)(function(m){return r(i(SC(m.context2D)(_.value0)(_.value1.source.x)(_.value1.source.y)(_.value1.source.width)(_.value1.source.height)(_.value1.target.x)(_.value1.target.y)(_.value1.target.width)(_.value1.target.height)))(function(){return u(_.value2)})});if(_ instanceof Lb)return a(d)(function(m){return i(co(_.value2)(mR(m.context2D)(_.value0)(_.value1)))});if(_ instanceof Fb)return a(d)(function(m){return r(i(EC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof xb)return a(d)(function(m){return i(co(_.value1)(TC(m.context2D)(_.value0)))});if(_ instanceof Ab)return a(d)(function(m){return i(co(_.value1)(MC(m.context2D)(_.value0)))});if(_ instanceof Ib)return a(d)(function(m){return r(i(LC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof Rb)return a(d)(function(m){return r(i(FC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof $b)return a(d)(function(m){return r(i(xC(m.context2D)(_.value0)))(function(){return u(_.value1)})});if(_ instanceof kb)return a(d)(function(m){return l(Yz(_.value1)(yR(m.canvasElement)(_.value0)))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 58, column 5 - line 58, column 25): "+[_.constructor.name])},h=p(Hi(f))(o);return function(_){return h(function(m){return m}(_))}}};var Hs=function(e){return eV(gt(e))};var oV=function(){return Hs(new rv(void 0))}(),bR=function(e){return Hs(new Z_(e,void 0))},aV=function(){return Hs(new nv(void 0))}(),iv=function(e){return DR(aV)(function(){return nV(e)(function(t){return DR(oV)(function(){return rV(t)})})})};var Ps=function(e){return Hs(new X_(e,void 0))};var wR=function(e){return Hs(new ev(e,void 0))};var uv=function(e){return function(t){return Hs(new tv(e,t,void 0))}},Dd=function(e){return Hs(new Y_(e,void 0))};var lo=function(){return window};function SR(e){return e.readyState}var Cd=function(){function e(){}return e.value=new e,e}(),cV=function(){function e(){}return e.value=new e,e}(),lV=function(){function e(){}return e.value=new e,e}();var ER=function(e){return e==="loading"?new z(Cd.value):e==="interactive"?new z(cV.value):e==="complete"?new z(lV.value):G.value};var dV=V(Re);var MR=Z;var LR=Z;var FR=function(e){return dV(function(){var t=Mn(Cd.value);return function(n){return t(ER(n))}}())(function(){return SR(e)})};function dl(e){return function(){return e.document}}var RR=Z;var kR=ie(wn),r7=Je(Ln),Ob=ln(Kn),o7=Ks(Kn),OR=ee(Do),a7=ln(mr),i7=ee(Xt),u7=V(Re),s7=Mt(Lt),c7=br(Qp),l7=function(e){return kR(r7(Ob(o7(function(){var t=aL(e);return function(n){return t(MR(n))}}())(dl))(lo)))(function(t){return OR(a7(_d)(t))})},HR=cf(gn(Hr)(Ce(i7(void 0)))),f7=Io(function(e){return function(){var n=Ob(FR)(Ob(dl)(lo))();if(n instanceof Cd){var c=u7(RR)(lo)(),v=Ef(function(s){return e(new He(void 0))})();return xy(t0)(v)(!1)(c)(),ts(Ay(t0)(v)(!1)(c))}return e(new He(void 0))(),Og}}),PR=s7(wn)(f7)(function(){return kR(l7("body"))(function(e){return rt(c7($n("Could not find body")))(OR)(e)})});var Hb=ie(On),p7=to(Sn),h7=_n(Nl)(rr),_7=ht(tu),v7=mt(rr)(Bt),m7=Rn(Sn),g7=function(){function e(){}return e.value=new e,e}(),y7=function(e){return hs([Ea("canvas"),sl(e.dimensions.width),cl(e.dimensions.height)])},D7=function(e){var t=_7(e.MonadEffect0().Monad0()),n=fl(e);return function(c){var v=n(c);return function(s){return Hb(p7)(function(a){return Pe(h7)(a.canvas)(function(d){return t(Sr(v(s))(d))})})}}},C7=function(e){var t=Je(Er(e.MonadEffect0()));return function(n){return Hb(Br("canvas"))(function(c){return Pe(v7)(c)(function(v){return Hb(t(xu(v)))(function(s){return m7(function(a){var d={};for(var i in a)({}).hasOwnProperty.call(a,i)&&(d[i]=a[i]);return d.canvas=new z({canvasElement:v,context2D:s}),d})})})})}},NR=function(e){var t=C7(e),n=D7(e);return function(c){return Mr({initialState:function(v){return{dimensions:v,canvas:G.value}},render:y7,eval:Tr({handleAction:t,handleQuery:n(c),receive:sn.receive,initialize:new z(g7.value),finalize:sn.finalize})})}};function Ns(e){return function(t){return function(){return t.requestAnimationFrame(n=>e(n)())}}}var lv=ie(On),WR=mt(rr)(Bt),w7=Mt(Lt),UR=w7(On),S7=Rn(Sn),qR=vt(Re),zR=ie(Kn),E7=vt(ro),T7=V(Tf),M7=to(Sn),L7=ht(tu),GR=function(){function e(){}return e.value=new e,e}(),VR=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),F7=function(e){return hs([Ea("canvas"),sl(e.dimensions.width),cl(e.dimensions.height)])},x7=function(e){var t=e.MonadEffect0(),n=Je(Er(t)),c=L7(t.Monad0()),v=fl(e);return function(s){var a=v(s);return function(d){if(d instanceof GR)return lv(Br("canvas"))(function(i){return Pe(WR)(i)(function(r){return lv(n(xu(r)))(function(u){return UR(S7(function(l){var p={};for(var f in l)({}).hasOwnProperty.call(l,f)&&(p[f]=l[f]);return p.canvas=new z({canvasElement:r,context2D:u}),p}))(function(){return lv(n(Un))(function(l){var p=function(f){return function(){return Wn(l.listener)(f)(),qR(zR(lo)(Ns(p)))()}};return UR(n(qR(zR(lo)(Ns(p)))))(function(){return E7(qn(T7(VR.create)(l.emitter)))})})})})})});if(d instanceof VR)return lv(M7)(function(i){return Pe(WR)(i.canvas)(function(r){return c(Sr(a(iv(i.animation(d.value0))))(r))})});throw new Error("Failed pattern match at Halogen.Canvas.Animate (line 66, column 16 - line 82, column 69): "+[d.constructor.name])}}},JR=function(e){var t=x7(e);return function(n){return Mr({initialState:function(c){return{dimensions:c.dimensions,animation:c.animation,canvas:G.value}},render:F7,eval:Tr({handleAction:t(n),handleQuery:sn.handleQuery,receive:sn.receive,initialize:new z(GR.value),finalize:sn.finalize})})}};var Pb=Z;var pl=ie(On),Nb=mt(rr)(Bt),k7=Mt(Lt),Bb=k7(On),jR=Rn(Sn),KR=vt(Re),QR=ie(Kn),O7=vt(ro),H7=V(Tf),P7=Ku(Sn),N7=ht(tu),YR=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZR=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),e$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),t$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),n$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),hv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),r$=function(){function e(){}return e.value=new e,e}(),XR=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ta=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),B7=function(e){if(e instanceof YR)return fr(Pb(e.value0));if(e instanceof ZR)return fr(Pb(e.value0));if(e instanceof e$)return fr(oo(e.value0));if(e instanceof t$)return fr(oo(e.value0));if(e instanceof fv)return fr(oo(e.value0));if(e instanceof dv)return fr(oo(e.value0));if(e instanceof n$)return fr(oo(e.value0));if(e instanceof pv)return fr(oo(e.value0));if(e instanceof hv)return fr(oo(e.value0));throw new Error("Failed pattern match at Halogen.Canvas.Game (line 121, column 1 - line 121, column 55): "+[e.constructor.name])},W7=function(e){return hs([Ea("canvas"),sl(e.game.dimensions.width),cl(e.game.dimensions.height),lF(function(t){return Ta.create(YR.create(t))}),fF(function(t){return Ta.create(ZR.create(t))}),vs(function(t){return Ta.create(e$.create(t))}),cF(function(t){return Ta.create(t$.create(t))}),dF(function(t){return Ta.create(fv.create(t))}),vF(function(t){return Ta.create(dv.create(t))}),pF(function(t){return Ta.create(n$.create(t))}),hF(function(t){return Ta.create(pv.create(t))}),_F(function(t){return Ta.create(hv.create(t))})])},U7=function(e){var t=e.MonadEffect0(),n=Je(Er(t)),c=N7(t.Monad0()),v=fl(e);return function(s){var a=v(s);return function(d){if(d instanceof r$)return pl(Br("canvas"))(function(i){return Pe(Nb)(i)(function(r){return pl(n(xu(r)))(function(u){return Bb(jR(function(l){var p={};for(var f in l)({}).hasOwnProperty.call(l,f)&&(p[f]=l[f]);return p.canvas=new z({canvasElement:r,context2D:u}),p}))(function(){return pl(n(Un))(function(l){var p=function(f){return function(){return Wn(l.listener)(f)(),KR(QR(lo)(Ns(p)))()}};return Bb(n(KR(QR(lo)(Ns(p)))))(function(){return O7(qn(H7(XR.create)(l.emitter)))})})})})})});if(d instanceof Ta)return pl(Br("canvas"))(function(i){return Pe(Nb)(i)(function(r){return pl(n(vy(r)))(function(u){return Bb(n(B7(d.value0)))(function(){return jR(function(l){var p={};for(var f in l)({}).hasOwnProperty.call(l,f)&&(p[f]=l[f]);return p.game=function(){var o={};for(var h in l.game)({}).hasOwnProperty.call(l.game,h)&&(o[h]=l.game[h]);return o.world=l.game.input(d.value0)(u)(l.game.world),o}(),p})})})})});if(d instanceof XR)return pl(P7(function(i){var r={};for(var u in i)({}).hasOwnProperty.call(i,u)&&(r[u]=i[u]);return r.game=function(){var l={};for(var p in i.game)({}).hasOwnProperty.call(i.game,p)&&(l[p]=i.game[p]);return l.world=i.game.animate(d.value0)(i.game.world),l}(),r}))(function(i){return Pe(Nb)(i.canvas)(function(r){return c(Sr(a(iv(i.game.draw(i.game.world))))(r))})});throw new Error("Failed pattern match at Halogen.Canvas.Game (line 97, column 16 - line 119, column 78): "+[d.constructor.name])}}},o$=function(e){var t=U7(e);return function(n){return Mr({initialState:function(c){return{game:c,canvas:G.value}},render:W7,eval:Tr({handleAction:t(n),handleQuery:sn.handleQuery,receive:sn.receive,initialize:new z(r$.value),finalize:sn.finalize})})}};var _v={suspend:wM,fork:SM,join:uf,Monad0:function(){return es},Functor1:function(){return xM}};var vv=function(e){return e.fork};var z7=Yy();var mv=function(){return function(e){var t=z7(e);return function(n){var c=t(n);return function(v){return function(s){return function(a){return function(d){return function(i){return wL(new If(c(v)(s)(a)(d)(function(r){return z.create(i(r))})))}}}}}}}};var s$=Z,qo=Z,c$=function(e){var t=mt(e)(Bt);return function(n){return qo(function(c){return t(n)(c.rendering)})}},X7=Z,l$=function(e){return function(t){return qo(function(n){return X7(t(n.rendering))})}},Y7=Z,gv=function(e){return function(t){return e(t)}},f$=function(e){return function(t){return function(n){return function(c){return function(){var s=nn({})(),a=nn(Vi)(),d=nn(Vi)(),i=nn(n)(),r=nn(new z(Ye.value))(),u=nn(new z(Ye.value))(),l=nn(G.value)(),p=nn(1)(),f=nn(new z(Oo))(),o=nn(Oo)(),h={component:e,state:e.initialState(t),refs:Oo,children:Vi,childrenIn:a,childrenOut:d,selfRef:s,handlerRef:i,pendingQueries:r,pendingOuts:u,pendingHandlers:l,rendering:G.value,fresh:p,subscriptions:f,forks:o,lifecycleHandlers:c};return Pt(h)(s)(),Y7(s)}}}}};var Z7=mt(Xt)(Bt),eG=ln(mr),tG=za(Vy),vn=ie(wn),qt=Je(Ln),nG=Mt(Lt),zo=nG(wn),m$=mt(Do),rG=m$($r),g$=vv(_v),oG=Ec(Bi)($r),Ma=ee(Do),aG=V(zg),d$=Pi(Bi),iG=V(yo),p$=Sc(Bi),uG=V(Tt),sG=ko(Vy),cG=kL(kg),lG=Zp(Ih),fG=oE(ta),dG=ko(Ih),h$=m$(Bt),_$=za(Ih),pG=za(Kt),hG=k1(ns),_G=jg(Kt),vG=function(e){return function(t){return function(){var c=Ke(t)(),v=Ke(c.subscriptions)();return Z7(Th)(eG(tG(e))(v))()}}},yv=function(e){return function(t){return vn(qt(Ke(e)))(function(n){if(n instanceof G)return t;if(n instanceof z)return qt(Pt(new z(new $e(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},Dv=function(e){return function(t){return zo(qt(Pt({initializers:Ye.value,finalizers:Ye.value})(e)))(function(){return vn(qt(t))(function(n){return vn(qt(Ke(e)))(function(c){return zo(rG(g$)(c.finalizers))(function(){return zo(oG(c.initializers))(function(){return Ma(n)})})})})})}},Bs=cf(gn(Hr)(Ce(ee(Xt)(void 0)))),v$=function(e){return function(t){return vn(qt(Ke(t)))(function(n){return qt(wm(function(c){return{state:c+1|0,value:e(c)}})(n.fresh))})}},Ub=function(e){return function(t){return function(n){return vn(qt(Ke(t)))(function(c){return Au(e)(t)(c.component.eval(new kc(aG(z.create)(QM(n)),Ce(G.value))))})}}},Au=function(e){return function(t){return function(n){var c=function(s){return function(a){return vn(qt(Ke(s)))(function(d){return BL(function(i){var r=function(u){return d$(vn(qt(Ke(u)))(function(l){return qo(function(p){return Ub(e)(p.selfRef)(i.value1)})(l)}))};return iG(i.value2)(p$(i.value0(kg)(r)(d.children)))})(a)})}},v=function(s){return function(a){if(a instanceof Mf)return vn(qt(Ke(s)))(function(d){var i=a.value0(d.state);if(Lc(d.state)(i.value1))return Ma(i.value0);if(en)return zo(qt(Pt({component:d.component,state:i.value1,refs:d.refs,children:d.children,childrenIn:d.childrenIn,childrenOut:d.childrenOut,selfRef:d.selfRef,handlerRef:d.handlerRef,pendingQueries:d.pendingQueries,pendingOuts:d.pendingOuts,pendingHandlers:d.pendingHandlers,rendering:d.rendering,fresh:d.fresh,subscriptions:d.subscriptions,forks:d.forks,lifecycleHandlers:d.lifecycleHandlers})(s)))(function(){return zo(Dv(d.lifecycleHandlers)(e(d.lifecycleHandlers)(s)))(function(){return Ma(i.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[i.constructor.name])});if(a instanceof Lf)return vn(v$(zL)(s))(function(d){return vn(qt(qL(a.value0(d))(function(i){return Bs(qb(e)(s)(new os(i)))})))(function(i){return vn(qt(Ke(s)))(function(r){return zo(qt(Kr(uG(sG(d)(i)))(r.subscriptions)))(function(){return Ma(a.value1(d))})})})});if(a instanceof Mh)return zo(qt(vG(a.value0)(s)))(function(){return Ma(a.value1)});if(a instanceof ls)return a.value0;if(a instanceof Ff)return c(s)(a.value0);if(a instanceof xf)return vn(qt(Ke(s)))(function(d){return vn(qt(Ke(d.handlerRef)))(function(i){return zo(yv(d.pendingOuts)(i(a.value0)))(function(){return Ma(a.value1)})})});if(a instanceof Lh)return p$(cG(Wy(function(){var d=Au(e)(s);return function(i){return d$(d(i))}}())(a.value0)));if(a instanceof Fh)return vn(v$(VL)(s))(function(d){return vn(qt(Ke(s)))(function(i){return vn(qt(nn(!1)))(function(r){return vn(g$(FM(qt(function(){return Kr(lG(d))(i.forks)(),Pt(!0)(r)()}))(Au(e)(s)(a.value0))))(function(u){return zo(qt(fG(Ke(r))(Kr(dG(d)(u))(i.forks))))(function(){return Ma(a.value1(d))})})})})});if(a instanceof xh)return vn(qt(Ke(s)))(function(d){return vn(qt(Ke(d.forks)))(function(i){return zo(h$(uf)(_$(a.value0)(i)))(function(){return Ma(a.value1)})})});if(a instanceof Ah)return vn(qt(Ke(s)))(function(d){return vn(qt(Ke(d.forks)))(function(i){return zo(h$(sf($n("Cancelled")))(_$(a.value0)(i)))(function(){return Ma(a.value1)})})});if(a instanceof Af)return vn(qt(Ke(s)))(function(d){return Ma(a.value1(pG(a.value0)(d.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[a.constructor.name])}};return hG(v(t))(n)}}},qb=function(e){return function(t){return function(n){if(n instanceof ah)return qt(Pe(Kr)(t)(gv(function(c){return{component:c.component,state:c.state,refs:_G(Ce(n.value1))(n.value0)(c.refs),children:c.children,childrenIn:c.childrenIn,childrenOut:c.childrenOut,selfRef:c.selfRef,handlerRef:c.handlerRef,pendingQueries:c.pendingQueries,pendingOuts:c.pendingOuts,pendingHandlers:c.pendingHandlers,rendering:c.rendering,fresh:c.fresh,subscriptions:c.subscriptions,forks:c.forks,lifecycleHandlers:c.lifecycleHandlers}})));if(n instanceof os)return vn(qt(Ke(t)))(function(c){return Au(e)(t)(c.component.eval(new $c(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var gG=ie(Kn),yG=Mt(Lt),E$=fp(Xt)(Bt),T$=mt(Do)($r),M$=vv(_v),wd=ln(Kn),L$=mt(Xt),F$=L$(Bt),y$=L$(kn),D$=yG(wn),DG=Ec(Bi)($r),bd=Je(Ln),C$=ee(Xt),zb=V(Re),Vb=ee(Do),Gb=pr(Xt),CG=l$(Re),bG=vt(yo),b$=oh(Xt),wG=c$(Xt),SG=cr(rp),EG=Js(Re),Jb=ie(wn),TG=Je(Pp),w$=function(){return nn({initializers:Ye.value,finalizers:Ye.value})}(),S$=function(e){return function(){var n=Ke(e)();return Pt(G.value)(e)(),E$(n)(function(){var c=T$(M$);return function(v){return Bs(c(Ju(v)))}}())()}},MG=function(e){return function(){return wd(F$(y$(Th)))(Ke(e.subscriptions))(),Pt(G.value)(e.subscriptions)(),wd(y$(function(){var n=sf($n("finalized"));return function(c){return Bs(n(c))}}()))(Ke(e.forks))(),Pt(Oo)(e.forks)()}},x$=function(e){return function(t){return function(n){var c=function(u){return function(l){return qo(function(p){var f=Au(a)(p.selfRef)(p.component.eval(new Ac(void 0)));return Kr(function(o){return{initializers:new $e(D$(DG(Ju(o.initializers)))(function(){return D$(f)(function(){return bd(function(){return S$(p.pendingQueries)(),S$(p.pendingOuts)()})})}),l),finalizers:o.finalizers}})(u)})}},v=function(u){return function(l){return function(p){return Xy(function(f){return function(){var h=w$(),_=f$(f)(p)(l)(h)(),m=Ke(u)();return Pt({initializers:Ye.value,finalizers:m.finalizers})(u)(),wd(qo(function(){var y=a(u);return function(C){return y(function(E){return E.selfRef}(C))}}()))(Ke(_))(),wd(c(u)(m.initializers))(Ke(_))(),_}})}}},s=function(u){return function(l){return function(p){return function(f){return Qy(function(o){return function(){var _=zb(o.pop)(Ke(p))(),m=function(){if(_ instanceof z){Pt(_.value0.value1)(p)();var C=Ke(_.value0.value0)();return qo(function(E){return function(){return Pe(Pt)(E.handlerRef)(function(){var g=rt(Vb(void 0))(l);return function(b){return g(o.output(b))}}())(),Bs(Au(a)(E.selfRef)(E.component.eval(new Rc(o.input,void 0))))()}})(C)(),_.value0.value0}if(_ instanceof G)return v(u)(function(){var E=rt(Vb(void 0))(l);return function(D){return E(o.output(D))}}())(o.input)(o.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[_.constructor.name])}(),y=zb(function(C){return Zs(o.get(C))})(Ke(f))();return Gb(y)(k_("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),Kr(o.set(m))(f)(),gG(Ke(m))(CG(function(C){if(C instanceof G)return nM("Halogen internal error: child was not initialized in renderChild");if(C instanceof z)return C$(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},a=function(u){return function(l){return function(){var f=Ke(l)(),o=zb(ka)(Ke(f.pendingHandlers))();Gb(o)(Pt(new z(Ye.value))(f.pendingHandlers))(),Pt(Vi)(f.childrenOut)(),Pt(f.children)(f.childrenIn)();var h=function(){var E=yv(f.pendingHandlers),D=qb(a)(f.selfRef);return function(g){return E(bG(D(g)))}}(),_=function(){var E=yv(f.pendingQueries);return function(D){return E(h(os.create(D)))}}(),m=e.render(function(E){return Bs(h(E))})(s(u)(_)(f.childrenIn)(f.childrenOut))(f.component.render(f.state))(f.rendering)(),y=Ke(f.childrenOut)(),C=Ke(f.childrenIn)();return b$(C)(function(E){return function(){var g=Ke(E)();return wG(e.removeChild)(g)(),d(u)(g)()}})(),Pe(Kr)(f.selfRef)(gv(function(E){return{component:E.component,state:E.state,refs:E.refs,children:y,childrenIn:E.childrenIn,childrenOut:E.childrenOut,selfRef:E.selfRef,handlerRef:E.handlerRef,pendingQueries:E.pendingQueries,pendingOuts:E.pendingOuts,pendingHandlers:E.pendingHandlers,rendering:new z(m),fresh:E.fresh,subscriptions:E.subscriptions,forks:E.forks,lifecycleHandlers:E.lifecycleHandlers}}))(),Gb(o)(Pe(SG)(void 0)(function(E){return function(){var g=Ke(f.pendingHandlers)();Pt(new z(Ye.value))(f.pendingHandlers)(),F$(function(){var w=T$(M$);return function(T){return Bs(w(Ju(T)))}}())(g)();var b=Ke(f.pendingHandlers)(),L=rt(!1)(C1)(b);return L?EG(Pt(G.value)(f.pendingHandlers))(new rn(void 0))():new hn(void 0)}}))()}}},d=function(u){return qo(function(l){return function(){MG(l)();var f=Au(a)(l.selfRef)(l.component.eval(new Ic(void 0)));return Kr(function(o){return{initializers:o.initializers,finalizers:new $e(f,o.finalizers)}})(u)(),b$(l.children)(function(o){return function(){var _=Ke(o)();return d(u)(_)()}})()}})},i=function(u){return function(l){return function(p){return Jb(bd(Ke(u)))(function(f){return f?Vb(G.value):Ub(a)(l)(p)})}}},r=function(u){return function(l){return function(p){return Dv(l)(function(){var o=Ke(u)();return o?void 0:(Pt(!0)(u)(),d(l)(p)(),qo(function(h){return function(){var m=TG(Ke(h.selfRef))();return E$(m.rendering)(e.dispose)()}})(p)())})}}};return Jb(bd(w$))(function(u){return Jb(bd(nn(!1)))(function(l){return Dv(u)(function(){var f=Un(),o=wd(Ke)(v(u)(function(){var h=Wn(f.listener);return function(_){return bd(h(_))}}())(n)(t))();return qo(function(h){return C$({query:i(l)(h.selfRef),messages:f.emitter,dispose:r(l)(u)(o)})})(o)()})})})}}};var Vo=function(e){return function(t){return function(){return t[e]}}};var FG=Vo("baseURI"),xG=Vo("ownerDocument"),A$=Vo("parentNode"),AG=Vo("parentElement");var IG=Vo("childNodes"),RG=Vo("firstChild"),$G=Vo("lastChild"),kG=Vo("previousSibling"),I$=Vo("nextSibling"),OG=Vo("nodeValue");var HG=Vo("textContent");function jb(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function Cv(e){return function(t){return function(){t.appendChild(e)}}}function Kb(e){return function(t){return function(){t.removeChild(e)}}}var R$=V(Re);var Qb=function(){var e=R$(Yt);return function(t){return e(A$(t))}}();var $$=function(){var e=R$(Yt);return function(t){return e(I$(t))}}();var Xb=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},Yb=vt(Re),UG=ee(Xt),qG=mt(Xt)(Bt),zG=fn(),VG=pr(Xt),GG=na(Al(Al(_o))),JG=ye(be),jG=ie(wn),KG=Je(Ln),QG=V(Re),XG=ln(Kn);var YG=function(e){return function(t){return function(n){return t instanceof z&&n instanceof z?Yb(jb(e)(t.value0)(n.value0)):t instanceof G&&n instanceof z?Yb(Cv(e)(n.value0)):UG(void 0)}}},k$=function(e){return function(){var n=Qb(e.node)();return qG(function(c){return Kb(e.node)(c)})(n)()}},ZG=function(e){return function(t){return function(n){var c=s$(function(d){return d.node}),v=function(d){return d instanceof z?Nr(d.value0):void 0},s=function(d){var i=JL(zG)(d),r=Xb("patch","Halogen.VDom.Driver",function(){return function(h,_){if(h instanceof z){if(_ instanceof If)return Nr(h.value0),l(100)(_.value0);if(_ instanceof kh){var m=Pr(h.value0,_.value0);return pn(new dn(nr(m),new z(m),r(103),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[_.constructor.name])}return u(104)(_)}}),u=Xb("render","Halogen.VDom.Driver",function(){return function(h){if(h instanceof If)return l(86)(h.value0);if(h instanceof kh){var _=i(h.value0);return pn(new dn(nr(_),new z(_),r(89),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[h.constructor.name])}}),l=Xb("renderComponentSlot","Halogen.VDom.Driver",function(){return function(h){var _=Ke(t)(),m=_(h)(),y=c(m);return pn(new dn(y,G.value,r(117),v))}}),p=r(91),f=u(82),o=l(109);return f},a=yL(e);return{buildWidget:s,buildAttributes:a,document:n}}}},e9=function(e){return function(t){var n=function(c){return function(v){return function(s){return function(a){if(a instanceof G)return function(){var i=nn(v)(),r=ZG(c)(i)(e),u=bf(r)(s),l=nr(u);return Yb(Cv(l)(HI(t)))(),{machine:u,node:l,renderChildRef:i}};if(a instanceof z)return function(){Pt(v)(a.value0.renderChildRef)();var i=Qb(a.value0.node)(),r=$$(a.value0.node)(),u=Pr(a.value0.machine,s),l=nr(u);return VG(GG(Lc)(a.value0.node)(l))(YG(l)(r)(i))(),{machine:u,node:l,renderChildRef:a.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[a.constructor.name])}}}};return{render:n,renderChild:JG,removeChild:k$,dispose:k$}}},O$=function(e){return function(t){return function(n){return jG(KG(QG(LR)(XG(dl)(lo))))(function(c){return x$(e9(c)(n))(e)(t)})}}};var bv=function(e){return e};var n9=Sf(Ft);var H$=jt,Sd=function(e){return ss(n9(e))};var P$=Pu;var r9=function(e){return function(t){return[new ne(e,ss(t))]}},Ws=function(e){return bv(r9(e))},ew=fn();var N$=function(e){return function(t){var n=e(t);return n.value1}};var u9=V(Ba),s9=V(ro),c9=Rn(GM(ho)),l9=oh(Wg(ho)),f9=mv(),d9=rh(),p9=fs(),h9=th(),tw=function(){function e(){}return e.value=new e,e}(),nw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),B$=function(e){return e},Ed=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Td=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Md=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ld=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),wv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Sv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ad=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var _9={lift:function(e){return function(t){return B$(gt(Td.create(t)))}}},W$=ht(_9),v9=mc;var hl=function(e){return{liftEffect:function(){var t=W$(e.Monad0()),n=Je(e);return function(c){return t(n(c))}}(),Monad0:function(){return v9}}},U$=function(e){var t=e.MonadEffect0(),n=hl(t);return{liftAff:function(){var c=W$(t.Monad0()),v=tr(e);return function(s){return c(v(s))}}(),MonadEffect0:function(){return n}}},q$=Ba,z$=function(e){var t=V(e);return{map:function(n){return function(c){if(c instanceof Ed)return new Ed(u9(n)(c.value0));if(c instanceof Td)return new Td(t(n)(c.value0));if(c instanceof Md)return new Md(function(v){return n(c.value0(v))});if(c instanceof Ld)return new Ld(c.value0,n(c.value1));if(c instanceof Fd)return new Fd(c.value0,n(c.value1));if(c instanceof wv)return new wv(c.value0,n(c.value1));if(c instanceof xd)return new xd(s9(n)(c.value0));if(c instanceof Sv)return new Sv(function(v){return n(c.value0(v))});if(c instanceof Ad)return new Ad(c.value0,n(c.value1));throw new Error("Failed pattern match at Halogen.XShell.Free (line 71, column 1 - line 80, column 60): "+[n.constructor.name,c.constructor.name])}}}},qs=er,m9=ie(qs),V$=Ip,Iu=yr,Ot=function(e){return B$(gt(Ed.create(e)))},G$=function(e){var t=function(n){return c9(In(n.window))};return N$(l9(e)(t))([])},J$=function(e){return gt(new Ld(e,void 0))};var j$=function(e){return gt(new Ad(e,void 0))},ow=function(){return function(e){var t=f9(e),n=d9(e);return function(c){var v=t(c),s=n(c);return function(){return function(a){return function(d){return function(i){return function(r){return function(u){var l=v(a)(d)(i)(r)(function(p){return rw.create(u(p))});return j$(s(a)(d)({window:l}))}}}}}}}}},g9=function(e){return gt(new xd(e))},aw=function(){return function(e){var t=p9(e);return function(n){var c=t(n);return function(){return function(v){return function(s){return function(a){return g9(c(v)(s)(a))}}}}}}},Go=function(e){return gt(new Fd(e,void 0))},Gr=function(){return gt(new Md(ye(be)))}(),mn=function(e){return m9(Gr)(function(t){return J$(e(t))})},iw=function(){return function(e){var t=h9(e);return function(n){var c=t(n);return function(){return function(v){return function(s){return j$(function(a){return rt(a)(on)(c(v)(s)(a))})}}}}}};var C9=xt(Hn),b9=cn(kf);var sw=b9(C9("background-color"));var At=xt(or),K$=function(){function e(){}return e.value=new e,e}(),S9=function(){function e(){}return e.value=new e,e}(),Q$=function(){function e(){}return e.value=new e,e}(),E9=function(){function e(){}return e.value=new e,e}(),T9=function(){function e(){}return e.value=new e,e}(),M9=function(){function e(){}return e.value=new e,e}(),X$=function(){function e(){}return e.value=new e,e}(),cw=function(){function e(){}return e.value=new e,e}(),L9=function(){function e(){}return e.value=new e,e}(),F9=function(){function e(){}return e.value=new e,e}(),x9=function(){function e(){}return e.value=new e,e}(),A9=function(){function e(){}return e.value=new e,e}(),I9=function(){function e(){}return e.value=new e,e}(),R9=function(){function e(){}return e.value=new e,e}(),$9=function(){function e(){}return e.value=new e,e}(),k9=function(){function e(){}return e.value=new e,e}(),O9=function(){function e(){}return e.value=new e,e}(),H9=function(){function e(){}return e.value=new e,e}(),P9=function(){function e(){}return e.value=new e,e}(),N9=function(){function e(){}return e.value=new e,e}(),B9=function(){function e(){}return e.value=new e,e}(),W9=function(){function e(){}return e.value=new e,e}(),U9=function(){function e(){}return e.value=new e,e}(),q9=function(){function e(){}return e.value=new e,e}(),z9=function(){function e(){}return e.value=new e,e}(),V9=function(){function e(){}return e.value=new e,e}(),G9=function(){function e(){}return e.value=new e,e}(),J9=function(){function e(){}return e.value=new e,e}(),j9=function(){function e(){}return e.value=new e,e}(),K9=function(){function e(){}return e.value=new e,e}(),Q9=function(){function e(){}return e.value=new e,e}(),X9=function(){function e(){}return e.value=new e,e}(),Y9=function(){function e(){}return e.value=new e,e}();var Z9={value:function(e){if(e instanceof K$)return At("default");if(e instanceof S9)return At("help");if(e instanceof Q$)return At("pointer");if(e instanceof E9)return At("progress");if(e instanceof T9)return At("wait");if(e instanceof M9)return At("cell");if(e instanceof X$)return At("crosshair");if(e instanceof cw)return At("text");if(e instanceof L9)return At("vertical-text");if(e instanceof F9)return At("alias");if(e instanceof x9)return At("copy");if(e instanceof A9)return At("move");if(e instanceof I9)return At("no-drop");if(e instanceof R9)return At("not-allowed");if(e instanceof $9)return At("grab");if(e instanceof k9)return At("grabbing");if(e instanceof O9)return At("all-scroll");if(e instanceof H9)return At("col-resize");if(e instanceof P9)return At("row-resize");if(e instanceof N9)return At("n-resize");if(e instanceof B9)return At("e-resize");if(e instanceof W9)return At("s-resize");if(e instanceof U9)return At("w-resize");if(e instanceof q9)return At("ne-resize");if(e instanceof z9)return At("nw-resize");if(e instanceof V9)return At("se-resize");if(e instanceof G9)return At("sw-resize");if(e instanceof J9)return At("ew-resize");if(e instanceof j9)return At("ns-resize");if(e instanceof K9)return At("nesw-resize");if(e instanceof Q9)return At("nwse-resize");if(e instanceof X9)return At("zoom-in");if(e instanceof Y9)return At("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var lw=function(){return Q$.value}();var fw=function(){return K$.value}(),zs=cn(Z9)(xt(Hn)("cursor")),Y$=function(){return X$.value}();var tJ=xt(Hn);var Z$=cn(kf)(tJ("color"));var ek=xt(or),tk=xt(Hn);var rJ={value:function(e){return e}},nk=cn(rJ),rk=ek("scroll"),ok=nk(tk("overflow-y"));var dw=nk(tk("overflow")),pw=ek("hidden");var hw=xt(or),aJ=xt(Hn);var iJ={value:function(e){return e}},ak=hw("underline"),Ev=cn(iJ)(aJ("text-decoration")),ik=hw("overline");var uk=hw("line-through");var ge=Mt(Lt)(jh),Tn=cn(ou),yn=xt(Hn),sJ=d0(ou),cJ=me(Hc),lJ=xt(zh),fJ=cn(ms),_w=function(){var e=it($t)(lt("xterm")),t=it($t)(lt("xterm-viewport")),n=ge(yt(it($t)(lt("xterm-underline-1")))(Ev(ak)))(function(){return ge(yt(it($t)(lt("xterm-underline-2")))(Tn(yn("text-decoration"))("double underline")))(function(){return ge(yt(it($t)(lt("xterm-underline-3")))(Tn(yn("text-decoration"))("wavy underline")))(function(){return ge(yt(it($t)(lt("xterm-underline-4")))(Tn(yn("text-decoration"))("dotted underline")))(function(){return yt(it($t)(lt("xterm-underline-5")))(Tn(yn("text-decoration"))("dashed underline"))})})})}),c=it($t)(lt("xterm-scroll-area")),v=it($t)(lt("xterm-screen")),s=it($t)(lt("xterm-decoration-overview-ruler")),a=ge(yt(it($t)(lt("xterm-overline")))(Ev(ik)))(function(){return ge(yt(it(it($t)(lt("xterm-underline-1")))(lt("xterm-overline")))(Tn(yn("text-decoration"))("overline underline")))(function(){return ge(yt(it(it($t)(lt("xterm-underline-2")))(lt("xterm-overline")))(Tn(yn("text-decoration"))("overline double underline")))(function(){return ge(yt(it(it($t)(lt("xterm-underline-3")))(lt("xterm-overline")))(Tn(yn("text-decoration"))("overline wavy underline")))(function(){return ge(yt(it(it($t)(lt("xterm-underline-4")))(lt("xterm-overline")))(Tn(yn("text-decoration"))("overline dotted underline")))(function(){return yt(it(it($t)(lt("xterm-underline-5")))(lt("xterm-overline")))(Tn(yn("text-decoration"))("overline dashed underline"))})})})})}),d=it($t)(lt("xterm-message")),i=it($t)(lt("live-region")),r=it($t)(lt("xterm-helper-textarea")),u=it($t)(lt("xterm-helpers")),l=it($t)(lt("xterm-dim")),p=it($t)(lt("xterm-decoration-top")),f=it($t)(lt("xterm-decoration-container")),o=it($t)(lt("xterm-decoration")),h=it($t)(lt("composition-view")),_=it($t)(lt("xterm-char-measure-element")),m=ge(Ur(No))(function(){return ge(ys(kt(0)))(function(){return ge(mu(kt(0)))(function(){return ge(_0(kt(0)))(function(){return ge(Yh(kt(0)))(function(){return ge(Za(10))(function(){return ge(Tn(yn("color"))("transparent"))(function(){return Tn(yn("pointer-events"))("none")})})})})})})}),y=it($t)(lt("xterm-accessibility"));return ge(yt(e)(ge(zs(cw.value))(function(){return ge(Ur(Qh))(function(){return sJ(cJ(Of)(lJ("user-select")))("none")})})))(function(){return ge(yt(it(e)(lt("focus")))(Tn(yn("outline"))("none")))(function(){return ge(yt(it(e)(OF("focus")))(Tn(yn("outline"))("none")))(function(){return ge(yt(En(e)(u))(ge(Ur(No))(function(){return ge(mu(kt(0)))(function(){return Za(5)})})))(function(){return ge(yt(En(e)(r))(ge(cx(kt(0))(kt(0))(kt(0))(kt(0)))(function(){return ge(fJ(yn("border"))(0))(function(){return ge(lx(kt(0))(kt(0))(kt(0))(kt(0)))(function(){return ge(Ur(No))(function(){return ge(KF(0))(function(){return ge(ys(h0(-9999)))(function(){return ge(mu(kt(0)))(function(){return ge(Wf(kt(0)))(function(){return ge(Uf(kt(0)))(function(){return ge(Za(-5))(function(){return ge(Tn(yn("whitespace"))("nowrap"))(function(){return ge(dw(pw))(function(){return Tn(yn("resize"))("none")})})})})})})})})})})})})))(function(){return ge(yt(En(e)(h))(ge(sw(lg))(function(){return ge(Z$(s1))(function(){return ge(Wc(YF))(function(){return ge(Ur(No))(function(){return ge(Tn(yn("white-space"))("nowrap"))(function(){return Za(1)})})})})})))(function(){return ge(yt(En(e)(it(h)(lt("active"))))(Wc(ZF)))(function(){return ge(yt(En(e)(t))(ge(sw(lg))(function(){return ge(ok(rk))(function(){return ge(zs(fw))(function(){return ge(Ur(No))(function(){return ge(Yh(kt(0)))(function(){return ge(ys(kt(0)))(function(){return ge(mu(kt(0)))(function(){return _0(kt(0))})})})})})})})))(function(){return ge(yt(En(e)(v))(Ur(Qh)))(function(){return ge(yt(En(e)(En(v)(Jh("canvas"))))(ge(Ur(No))(function(){return ge(ys(kt(0)))(function(){return mu(kt(0))})})))(function(){return ge(yt(En(e)(c))(Tn(yn("visibility"))("hidden")))(function(){return ge(yt(_)(ge(Wc(QF))(function(){return ge(Tn(yn("visibility"))("hidden"))(function(){return ge(Ur(No))(function(){return ge(mu(kt(0)))(function(){return ge(ys(h0(-9999)))(function(){return Tn(yn("line-height"))("normal")})})})})})))(function(){return ge(yt(it(e)(lt("enable-mouse-events")))(zs(fw)))(function(){return ge(yt(it(e)(lt("xterm-cursor-pointer")))(zs(lw)))(function(){return ge(yt(En(e)(it($t)(lt("xterm-cursor-pointer"))))(zs(lw)))(function(){return ge(yt(it(it(e)(lt("column-select")))(lt("focus")))(zs(Y$)))(function(){return ge(yt(En(e)(y))(m))(function(){return ge(yt(En(e)(d))(m))(function(){return ge(yt(En(e)(i))(ge(Ur(No))(function(){return ge(ys(kt(-9999)))(function(){return ge(Wf(kt(1)))(function(){return ge(Uf(kt(1)))(function(){return dw(pw)})})})})))(function(){return ge(yt(l)(Tn(yn("opacity"))("1 !important")))(function(){return ge(n)(function(){return ge(a)(function(){return ge(yt(it($t)(lt("xterm-strikethrough")))(Ev(uk)))(function(){return ge(yt(En(En(v)(f))(o))(ge(Za(6))(function(){return Ur(No)})))(function(){return ge(yt(En(En(v)(f))(it(o)(lt("xterm-decoration-top-layer"))))(Za(7)))(function(){return ge(yt(s)(ge(Za(8))(function(){return ge(Ur(No))(function(){return ge(mu(kt(0)))(function(){return ge(Yh(kt(0)))(function(){return Tn(yn("pointer-events"))("none")})})})})))(function(){return yt(p)(ge(Za(2))(function(){return Ur(Qh)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var sk=e=>()=>e.type,vw=e=>()=>e.cursorY,mw=e=>()=>e.cursorX,gw=e=>()=>e.viewportY,yw=e=>()=>e.baseY,Dw=e=>()=>e.length,ck=e=>t=>()=>e.getLine(t),Cw=e=>()=>e.getNullCell();var _l=function(e){return wf(e)?G.value:new z(bh(e))};var hJ=V(Re),_J=function(){function e(){}return e.value=new e,e}(),vJ=function(){function e(){}return e.value=new e,e}(),lk=function(e){return function(t){return hJ(_l)(ck(e)(t))}},fk=function(e){return function(){var n=sk(e)();return n==="normal"?_J.value:vJ.value}};var ww=e=>()=>e.isWrapped,Sw=e=>()=>e.length;var xv=ye(be),La=V(Re),Ew=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Tv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Tw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),DJ={map:function(e){return function(t){if(t instanceof Ew)return new Ew(function(n){return e(t.value0(n))});if(t instanceof Tv)return new Tv(function(n){return e(t.value0(n))});if(t instanceof Tw)return new Tw(function(n){return e(t.value0(n))});if(t instanceof Mw)return new Mw(function(n){return e(t.value0(n))});if(t instanceof Lw)return new Lw(function(n){return e(t.value0(n))});if(t instanceof Mv)return new Mv(function(n){return e(t.value0(n))});if(t instanceof Lv)return new Lv(t.value0,function(n){return e(t.value1(n))});if(t instanceof Fw)return new Fw(t.value0,function(n){return e(t.value1(n))});if(t instanceof Fv)return new Fv(t.value0,function(n){return e(t.value1(n))});if(t instanceof xw)return new xw(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},CJ=ia(DJ);var dk=function(e){var t=e.Monad0(),n=ie(Ua(t.Bind1())),c=wr(Oi(t)),v=Je(fa(e));return function(s){var a=function(d){if(d instanceof Ew)return n(c)(function(i){return v(La(d.value0)(fk(i)))});if(d instanceof Tv)return n(c)(function(i){return v(La(d.value0)(mw(i)))});if(d instanceof Tw)return n(c)(function(i){return v(La(d.value0)(vw(i)))});if(d instanceof Mw)return n(c)(function(i){return v(La(d.value0)(gw(i)))});if(d instanceof Lw)return n(c)(function(i){return v(La(d.value0)(yw(i)))});if(d instanceof Mv)return n(c)(function(i){return v(La(d.value0)(Dw(i)))});if(d instanceof Lv)return n(c)(function(i){return v(La(d.value1)(lk(i)(d.value0)))});if(d instanceof Fw)return v(La(d.value1)(ww(d.value0)));if(d instanceof Fv)return v(La(d.value1)(Sw(d.value0)));if(d instanceof xw)return n(c)(function(i){return v(La(d.value0)(Cw(i)))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 19, column 5 - line 21, column 40): "+[d.constructor.name])};return CJ(Hi(s))(a)}},Aw=function(e){return gt(new Fv(e,xv))};var Iw=function(e){return gt(new Lv(e,xv))};var Rw=function(){return gt(new Tv(xv))}();var $w=function(){return gt(new Mv(xv))}();var kw=e=>()=>e.cursorBlink,Ow=e=>t=>()=>e.cursorBlink=t,Hw=e=>()=>e.fontFamily,Pw=e=>t=>()=>e.fontFamily=t;var hk=Ws("fontFamily");var _k=Ws("cursorBlink");var mk=V(Re),LJ=Mt(Lt),gk=ye(be),Av=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Iv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),FJ={map:function(e){return function(t){if(t instanceof Av)return new Av(function(n){return e(t.value0(n))});if(t instanceof Iv)return new Iv(t.value0,e(t.value1));if(t instanceof Rv)return new Rv(function(n){return e(t.value0(n))});if(t instanceof Nw)return new Nw(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},xJ=ia(FJ);var Jo=function(e){return gt(new Iv(e,void 0))},yk=function(e){var t=e.Monad0(),n=Ua(t.Bind1()),c=ie(n),v=wr(Oi(t)),s=Je(fa(e)),a=LJ(n),d=ee(wc(t.Applicative0()));return function(i){var r=function(u){if(u instanceof Av)return c(v)(function(l){return s(mk(u.value0)(kw(l)))});if(u instanceof Iv)return c(v)(function(l){return a(s(Ow(l)(u.value0)))(function(){return d(u.value1)})});if(u instanceof Rv)return c(v)(function(l){return s(mk(u.value0)(Hw(l)))});if(u instanceof Nw)return c(v)(function(l){return a(s(Pw(l)(u.value0)))(function(){return d(u.value1)})});throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 19, column 5 - line 21, column 49): "+[u.constructor.name])};return xJ(Hi(i))(r)}},Bw=function(){return gt(new Rv(gk))}(),Ww=function(){return gt(new Av(gk))}();var Ck=Fa(Dk(),1),kv=()=>new Ck.FitAddon;var wk=Fa(bk(),1),Hv=()=>new wk.WebglAddon;var Ek=Fa(Sk(),1),Nv=()=>new Ek.WebLinksAddon;var Tk={addon:Z},Mk={addon:Z},Lk={addon:ye(be)};var Bv=function(e){return e.addon};var Gw=e=>e.active,Jw=e=>e.normal,jw=e=>e.alternate;var Ik=Fa(Ak(),1),Rk=e=>t=>()=>new Ik.Terminal(e,t),$k=e=>()=>e.element,kk=e=>()=>e.textarea,Qw=e=>()=>e.rows,Xw=e=>()=>e.cols,Id=e=>e.buffer,Yw=e=>()=>e.markers;var Zw=e=>e.options,eS=e=>t=>()=>e.onBell(t),tS=e=>t=>()=>e.onBinary(n=>t(n)());var nS=e=>t=>()=>e.onData(n=>t(n)()),rS=e=>t=>()=>e.onKey(n=>t(n)()),oS=e=>t=>()=>e.onLineFeed(t),aS=e=>t=>()=>e.onRender(n=>t(n)()),iS=e=>t=>()=>e.onWriteParsed(t),uS=e=>t=>()=>e.onResize(n=>t(n)()),sS=e=>t=>()=>e.onScroll(n=>t(n)()),cS=e=>t=>()=>e.onSelectionChange(t),lS=e=>t=>()=>e.onTitleChange(n=>t(n)());var fS=e=>t=>()=>e.open(t);var dS=e=>t=>n=>()=>e.write(t,n),pS=e=>t=>n=>()=>e.writeln(t,n);var Ok=e=>t=>()=>e.loadAddon(t);var Hk=V(Re);var Pk=function(){var e=Hk(_l);return function(t){return e(kk(t))}}();var Nk=function(e){return function(t){return Rk(Sd(e))(Sd(t))}},Bk=function(e){var t=Bv(e);return function(n){return function(c){return Ok(n)(t(c))}}};var Wk=function(){var e=Hk(_l);return function(t){return e($k(t))}}();var Uv=V(Ba),Zv=ye(be),fi=V(Re),_S=dk(Pp)(rp),Uk=Mt(Lt),qv=Yl(rM),VJ=Bk(Lk),zv=ie(er),vS=Uk(er),vl=pr(yr),Vv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),DS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),CS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),wS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),GJ={map:function(e){return function(t){if(t instanceof Vv)return new Vv(Uv(e)(t.value0));if(t instanceof mS)return new mS(function(n){return e(t.value0(n))});if(t instanceof gS)return new gS(function(n){return e(t.value0(n))});if(t instanceof Gv)return new Gv(function(n){return e(t.value0(n))});if(t instanceof yS)return new yS(function(n){return e(t.value0(n))});if(t instanceof Jv)return new Jv(Uv(e)(t.value0));if(t instanceof DS)return new DS(Uv(e)(t.value0));if(t instanceof CS)return new CS(Uv(e)(t.value0));if(t instanceof bS)return new bS(function(n){return e(t.value0(n))});if(t instanceof jv)return new jv(t.value0,e(t.value1));if(t instanceof Kv)return new Kv(t.value0,e(t.value1));if(t instanceof wS)return new wS(function(n){return e(t.value0(n))});if(t instanceof Qv)return new Qv(function(n){return e(t.value0(n))});if(t instanceof Xv)return new Xv(function(n){return e(t.value0(n))});if(t instanceof Yv)return new Yv(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},JJ=ia(GJ),Pn=function(e){return gt(new Kv(e,void 0))},Gt=function(e){return gt(new jv(e,void 0))};var em=function(e){return gt(new Jv(e))},qk=function(){return gt(new Qv(Zv))}(),zk=function(){return gt(new Xv(Zv))}();var Vk=function(e){var t=e.MonadEffect0(),n=t.Monad0(),c=Ua(n.Bind1()),v=ie(c),s=wr(Oi(n)),a=fa(t),d=yk(a),i=Je(a),r=tr(Xp(e)),u=Uk(c);return function(l){var p=Hi(l),f=d(p),o=function(h){if(h instanceof Vv)return v(s)(function(_){return Sr(f(h.value0))(Zw(_))});if(h instanceof mS)return v(s)(function(_){return i(fi(h.value0)(Wk(_)))});if(h instanceof gS)return v(s)(function(_){return i(fi(h.value0)(Pk(_)))});if(h instanceof Gv)return v(s)(function(_){return i(fi(h.value0)(Qw(_)))});if(h instanceof yS)return v(s)(function(_){return i(fi(h.value0)(Xw(_)))});if(h instanceof Jv)return v(s)(function(_){return i(Sr(_S(h.value0))(Gw(Id(_))))});if(h instanceof DS)return v(s)(function(_){return i(Sr(_S(h.value0))(Jw(Id(_))))});if(h instanceof CS)return v(s)(function(_){return i(Sr(_S(h.value0))(jw(Id(_))))});if(h instanceof bS)return v(s)(function(_){return i(fi(h.value0)(Yw(_)))});if(h instanceof jv)return v(s)(function(_){return v(r(ff))(function(m){return u(i(dS(_)(h.value0)($g(lf(h.value1)(m)))))(function(){return r(Pg(m))})})});if(h instanceof Kv)return v(s)(function(_){return v(r(ff))(function(m){return u(i(pS(_)(h.value0)($g(lf(h.value1)(m)))))(function(){return r(Pg(m))})})});if(h instanceof wS)return i(fi(function(_){return h.value0(Zd(_))})(qv(kv)));if(h instanceof Qv)return i(fi(function(_){return h.value0(Zd(_))})(qv(Nv)));if(h instanceof Xv)return i(fi(function(_){return h.value0(Zd(_))})(qv(Hv)));if(h instanceof Yv)return v(s)(function(_){return i(fi(function(m){return h.value1(FE(m))})(qv(VJ(_)(h.value0))))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 32, column 5 - line 34, column 55): "+[h.constructor.name])};return JJ(p)(o)}},tm=function(){return gt(new Gv(Zv))}(),fo=function(e){return gt(Vv.create(e))};var SS=function(e){var t=Bv(e);return function(n){return gt(new Yv(t(n),Zv))}},jJ=SS(Mk),KJ=SS(Tk),ES=function(e){return zv(zk)(function(t){return vS(function(){if(t instanceof G)return vl(e)(Pn("WebGL Addon unavailable"));if(t instanceof z)return vS(vl(e)(Gt("Loading WebGL ")))(function(){return zv(jJ(t.value0))(function(n){return vl(e)(function(){return Pn(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return zv(qk)(function(n){if(n instanceof G)return vl(e)(Pn("WebLinks Addon unavailable"));if(n instanceof z)return vS(vl(e)(Gt("Loading WebLinks ")))(function(){return zv(KJ(n.value0))(function(c){return vl(e)(function(){return Pn(c?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var Gk=e=>()=>e.dispose();var Jk={toDisposable:ye(be)},XJ=function(e){return e.toDisposable},jk=function(e){return{dispose:function(){var t=XJ(e);return function(n){return Gk(t(n))}}()}},Kk=function(e){return e.dispose};var Ct=ie(On),MS=to(Sn),ZJ=V(yo),ej=Vk(Tc)(ns),jo=Rn(Sn),Ko=Mt(Lt)(On),tj=mt(Xt)(Ft),nj=Kk(jk(Jk)),LS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),oj=function(){function e(){}return e.value=new e,e}(),aj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),FS=function(){function e(){}return e.value=new e,e}(),ij=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uj=function(){function e(){}return e.value=new e,e}(),sj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lj=function(){function e(){}return e.value=new e,e}(),fj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qk=function(){function e(){}return e.value=new e,e}(),Xk=function(){function e(){}return e.value=new e,e}(),So=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dj=function(e){return function(t){return nu([$I(_w),ps([Ea("terminal")])([])])}},pj=function(e){var t=tr(Rh(e));return function(n){return Ct(MS)(function(c){return t(ZJ(z.create)(Sr(ej(n))(c.terminal)))})}},hj=function(e){var t=Je(Er(e.MonadEffect0())),n=function(f){return Ct(t(Un))(function(o){return Ct(t(iS(f)(Wn(o.listener)(new So(uj.value)))))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})},c=function(f){return Ct(t(Un))(function(o){return Ct(t(lS(f)(function(){var h=Wn(o.listener);return function(_){return h(So.create(fj.create(_)))}}())))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})},v=function(f){return Ct(t(Un))(function(o){return Ct(t(cS(f)(Wn(o.listener)(new So(lj.value)))))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})},s=function(f){return Ct(t(Un))(function(o){return Ct(t(sS(f)(function(){var h=Wn(o.listener);return function(_){return h(So.create(cj.create(_)))}}())))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})},a=function(f){return Ct(t(Un))(function(o){return Ct(t(uS(f)(function(){var h=Wn(o.listener);return function(_){return h(So.create(sj.create(_)))}}())))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})},d=function(f){return Ct(t(Un))(function(o){return Ct(t(aS(f)(function(){var h=Wn(o.listener);return function(_){return h(So.create(ij.create(_)))}}())))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})},i=function(f){return Ct(t(Un))(function(o){return Ct(t(oS(f)(Wn(o.listener)(new So(FS.value)))))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})},r=function(f){return Ct(t(Un))(function(o){return Ct(t(rS(f)(function(){var h=Wn(o.listener);return function(_){return h(So.create(aj.create(_)))}}())))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})},u=function(f){return Ct(t(Un))(function(o){return Ct(t(nS(f)(function(){var h=Wn(o.listener);return function(_){return h(So.create(LS.create(_)))}}())))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})},l=function(f){return Ct(t(Un))(function(o){return Ct(t(tS(f)(function(){var h=Wn(o.listener);return function(_){return h(So.create(rj.create(_)))}}())))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})},p=function(f){return Ct(t(Un))(function(o){return Ct(t(eS(f)(Wn(o.listener)(new So(oj.value)))))(function(h){return Ct(qn(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=In(h)(_.disposables),m})})})})};return function(f){if(f instanceof Qk)return Ct(Br("terminal"))(function(o){if(o instanceof G)return t(Fu("no terminal element"));if(o instanceof z)return Ct(MS)(function(h){return Ko(t(fS(h.terminal)(o.value0)))(function(){return Ko(p(h.terminal))(function(){return Ko(l(h.terminal))(function(){return Ko(r(h.terminal))(function(){return Ko(i(h.terminal))(function(){return Ko(d(h.terminal))(function(){return Ko(n(h.terminal))(function(){return Ko(a(h.terminal))(function(){return Ko(s(h.terminal))(function(){return Ko(v(h.terminal))(function(){return Ko(c(h.terminal))(function(){return u(h.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.XTerm (line 117, column 5 - line 132, column 28): "+[o.constructor.name])});if(f instanceof Xk)return Ct(MS)(function(o){return t(tj(nj)(o.disposables))});if(f instanceof So)return _a(f.value0);throw new Error("Failed pattern match at Halogen.XTerm (line 114, column 16 - line 136, column 23): "+[f.constructor.name])}},Yk=function(e){return Mr({initialState:function(t){return{terminal:t,disposables:[]}},render:dj(e),eval:Tr({handleAction:hj(e),handleQuery:pj(e),receive:sn.receive,initialize:new z(Qk.value),finalize:new z(Xk.value)})})};var _j=me(jt),rO={reflectSymbol:function(){return"terminal"}},vj=mv()(rO)(vr),oO=bg(ds),xS=ie(oO),AS=ht(Up)(ds),mj=fs()(rO)(vr),gj=ee(rr),eO=V(ro),yj=ht(tu),aO=to(Sn),ml=ee(wg(ds)),nm=Mt(Lt)(oO),iO=fM(Sn),IS=Rn(iO),Dj=to(iO),Cj=lM(Gy),tO=ie(On),bj=me(H$),wj=at(P$),Sj=Rn(Sn),nO=vt(ro),Ej=ee(Iu),uO=function(){return tn.value}(),Tj=function(e){var t=Yk(e);return function(n){return nu(_j([function(){if(n.terminal instanceof G)return nu([]);if(n.terminal instanceof z)return vj(uO)(void 0)(t)(n.terminal.value0)(nw.create);throw new Error("Failed pattern match at Halogen.XShell (line 49, column 8 - line 51, column 80): "+[n.terminal.constructor.name])}()])(G$(n.windows)))}},sO=function(e){var t=e.MonadEffect0().Monad0(),n=yj(t),c=ia(z$(t.Bind1().Apply0().Functor0()))(Cj);return function(v){var s=function(a){if(a instanceof Ed)return xS(AS(mj(uO)(void 0)(a.value0)))(function(d){return gj(d)});if(a instanceof Td)return eO(z.create)(n(a.value0));if(a instanceof Md)return xS(AS(aO))(function(d){return ml(a.value0(d.shell))});if(a instanceof Ld)return nm(IS(function(d){var i={};for(var r in d)({}).hasOwnProperty.call(d,r)&&(i[r]=d[r]);return i.shell=a.value0,i}))(function(){return ml(a.value1)});if(a instanceof Fd)return nm(IS(function(d){var i={};for(var r in d)({}).hasOwnProperty.call(d,r)&&(i[r]=d[r]);return i.interpreter=a.value0,i}))(function(){return ml(a.value1)});if(a instanceof wv)return nm(AS(_a(a.value0)))(function(){return ml(a.value1)});if(a instanceof xd)return eO(z.create)(a.value0);if(a instanceof Sv)return xS(Dj)(function(d){return ml(a.value0(d.windows))});if(a instanceof Ad)return nm(IS(function(d){var i={};for(var r in d)({}).hasOwnProperty.call(d,r)&&(i[r]=d[r]);return i.windows=a.value0(d.windows),i}))(function(){return ml(a.value1)});throw new Error("Failed pattern match at Halogen.XShell (line 80, column 5 - line 82, column 22): "+[a.constructor.name])};return sM(c(s)(v))}},Mj=function(e){var t=Je(Er(e.MonadEffect0())),n=sO(e);return function(c){if(c instanceof tw)return tO(t(Nk(bj(ew(hk)('"Cascadia Code", Menlo, monospace'))(ew(_k)(!0)))(wj)))(function(v){return Sj(function(s){var a={};for(var d in s)({}).hasOwnProperty.call(s,d)&&(a[d]=s[d]);return a.terminal=new z(v),a})});if(c instanceof nw)return tO(aO)(function(v){return nO(n(v.interpreter(c.value0)))});if(c instanceof rw)return nO(n(c.value0));throw new Error("Failed pattern match at Halogen.XShell (line 61, column 16 - line 70, column 35): "+[c.constructor.name])}},cO=function(e){return Mr({initialState:function(t){return{shell:t,interpreter:Ce(Ej(void 0)),terminal:G.value,windows:Vi}},render:Tj(e),eval:Tr({handleAction:Mj(e),handleQuery:sO(e),receive:sn.receive,initialize:new z(tw.value),finalize:sn.finalize})})};var RS=function(e){return function(t){var n=Xu(t.Profunctor0()),c=yc(t);return function(v){return n(e)(function(s){return s.value1(s.value0)})(c(v))}}};var fO=ee(Iu),lO=V(It),dO=Mt(Lt),ir=dO(qs),di=ie(qs),Aj=ko(Kt),Ij=Jg(Kt)(Ft),Rj=za(Kt),$j=ye(be),Rd=dO(er),kj=pr(yr),rm=ie(er),Oj=_n(Nl)(yr),Hj=mt(yr)(Bt),pO=mt(Iu)(Bt);var pi={cmd:function(e){return RS(function(t){return new ne(t.command,function(n){return{prompt:t.prompt,command:n,commandEnv:t.commandEnv,foreground:t.foreground}})})(e)},prompt:function(e){return RS(function(t){return new ne(t.prompt,function(n){return{prompt:n,command:t.command,commandEnv:t.commandEnv,foreground:t.foreground}})})(e)}},kd=function(e){var t=Je(hl(e));return function(n){return function(c){return c instanceof LS?n(c.value0):c instanceof FS?t(Fu("line feed")):fO(void 0)}}},Od=function(e){return e.prompt},om=Od(pi)(Ii),Hd=function(e){return e.cmd},hO=Hd(pi),$d=hO(go),_O=hO(Ii),Pj=function(e){return function(t){return function(n){var c=function(s){var a=`\r
  help\r
    show this help text`,d=function(i){return`\r
  `+(i.name+(`\r
    `+Zr(`\r
    `)(i.description)))};return a+Zr("")(lO(d)(s))},v=function(s){return ir(Ot(Pn(c(n))))(function(){return di(Gr)(function(a){return ir(Ot(Gt(Cr(a)(om))))(function(){return mn(Or($d)(""))})})})};return Aj("help")(v)(Ij(lO(function(s){return new ne(s.name,s.cmd)})(n)))}}},am=function(e){var t=Pj(e);return function(n){var c=t(n);return function(v){var s=c(v);return di(Gr)(function(a){var d=bl(function(u){return!XT(u)})(ug(" ")(Cr(a)(_O))),i=Dp(d);if(i instanceof G)return ir(Ot(Pn("")))(function(){return di(Gr)(function(u){return ir(Ot(Gt(Cr(u)(om))))(function(){return mn(Or($d)(""))})})});if(i instanceof z){var r=Rj(i.value0)(s);if(r instanceof z)return r.value0(rt([])($j)(Jm(d)));if(r instanceof G)return ir(Ot(Pn(`\r
unrecognised command "`+(i.value0+'" - type "help" to see the available commands'))))(function(){return di(Gr)(function(u){return ir(Ot(Gt(Cr(u)(om))))(function(){return mn(Or($d)(""))})})});throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 199, column 7 - line 206, column 34): "+[r.constructor.name])}throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 191, column 3 - line 206, column 34): "+[i.constructor.name])})}}};var Nj=function(e){return function(t){var n=Hd(t),c=n(Ii),v=Od(t)(Ii),s=n(go);return di(Gr)(function(a){return ir(Ot(rm(em(Rw))(function(d){var i=d===0;return i?Rd(Gt("\x1BM"))(function(){return rm(em(rm($w)(function(r){return rm(Iw(r-1|0))(function(u){return Oj(Aw)(u)})})))(function(r){return Rd(Gt("\x9BK"))(function(){return Pe(Hj)(r)(function(u){var l=(Vu(Cr(a)(c))-1|0)<=u;return l?Rd(Gt(Cr(a)(v)))(function(){return Gt(Lp(1)(Cr(a)(c)))}):Gt(Lp(1)(JT(u)(Cr(a)(c))))})})})}):kj(Vu(Cr(a)(c))>0)(Gt("\b \b"))})))(function(){return mn(kp(s)(Lp(1)))})})}},Pd=function(e){var t=Nj(e),n=Je(hl(e));return function(c){var v=Hd(c)(go),s=Od(c)(Ii),a=t(c);return function(d){return function(i){return i===""?ir(mn(Or(v)("")))(function(){return di(Gr)(function(r){return Ot(Rd(Gt("^C"))(function(){return Gt(`\r
`+Cr(r)(s))}))})}):i==="\r"?d:i==="\x7F"?a:i>=" "&&i<="~"||i>="\xA0"?ir(mn(kp(v)(function(r){return r+i})))(function(){return Ot(Gt(i))}):ir(n(Fu("non-printable: "+i)))(function(){return fO(void 0)})}}}},Bj=function(e){var t=e.MonadEffect0(),n=kd(t),c=Pd(t)(pi),v=am(e);return function(s){var a=v(s);return di(Gr)(function(d){return ir(Pe(pO)(d.foreground)(function(i){return i.kill}))(function(){return ir(mn(function(i){return{prompt:i.prompt,command:i.command,commandEnv:i.commandEnv,foreground:G.value}}))(function(){return ir(mn(Or($d)("")))(function(){return di(Gr)(function(i){return ir(Ot(Rd(fo(Jo(!0)))(function(){return Gt(`\r
`+Cr(i)(om))})))(function(){return Go(n(c(a(d.commandEnv))))})})})})})})}},Wj=function(e){return di(Gr)(function(t){return ir(Pe(pO)(t.foreground)(function(n){return n.stdin(Cr(t)(_O))}))(function(){return ir(Ot(Gt(`\r
`)))(function(){return mn(Or($d)(""))})})})},vO=function(e){var t=e.MonadEffect0(),n=kd(t),c=Bj(e),v=Pd(t)(pi),s=Wj(e);return function(a){var d=c(a);return n(function(i){return i===""?ir(Ot(Gt("^C")))(function(){return d}):v(s)(i)})}};var im=ie(qs),cm=Mt(Lt),Zt=cm(qs),um=me(ku),qj=Od(pi)(Ii),gl=Hd(pi)(go),zj=To(V$),sm=ie(er),mO=Le(ea),Vj=Le(TE),Gj=Le($a),NS=ow(),BS={reflectSymbol:function(){return"button"}},Jj=NS(BS)(vr)(),gO=vt(q$),CO=aw(),jj=CO(BS)(vr)(),WS=iw(),Kj=WS(BS)(vr)(),yl=cm(er),bO={reflectSymbol:function(){return"editor"}},yO=WS(bO)(vr)(),Qj=NS(bO)(vr)(),Vs=ee(Iu),Xj=V(It),Yj=mt(Iu)(Ft),US={reflectSymbol:function(){return"canvas"}},$S=NS(US)(vr)(),kS=WS(US)(vr)(),Eo=cm(ov),Zj=CO(US)(vr)(),eK=pr(av),tK=mt(av)(Bt),nK=V(Tt),OS=ie(wn),rK=cO(Tc),oK=cm(wn),aK=vt(yo),iK=kd(Ln),uK=Pd(Ln)(pi),sK=am(Tc)(ns);var HS=function(){return tn.value}(),Gs=function(){return tn.value}(),PS=function(){return tn.value}(),wO=function(e){var t=yF(e),n=vO(e),c=e.MonadEffect0(),v=kd(c),s=Pd(c)(pi),a=am(e),d=qI(e),i=Je(hl(c)),r=tr(U$(e)),u=NR(e),l=JR(e),p=o$(e);return function(f){var o=n(f),h=a(f),_=d(f),m=u(f),y=l(f),C=p(f),E=im(Gr)(function(g){return Zt(Ot(Gt(`\r
`+Cr(g)(qj))))(function(){return mn(Or(gl)(""))})}),D=function(g){return Ce(zj(g)(E))};return[{name:"rows",description:["prints the number of rows in the terminal"],cmd:D(Ot(sm(tm)(function(){var g=um(`\r
`);return function(b){return Pn(g(mO(b)))}}())))},{name:"cols",description:["prints the number of columns in the terminal"],cmd:D(Ot(sm(tm)(function(){var g=um(`\r
`);return function(b){return Pn(g(mO(b)))}}())))},{name:"blinking",description:["prints a boolean indicating whether the cursor is blinking"],cmd:D(Ot(sm(fo(Ww))(function(){var g=um(`\r
`);return function(b){return Pn(g(Vj(b)))}}())))},{name:"blinkon",description:["turns on cursor blinking"],cmd:D(Ot(fo(Jo(!0))))},{name:"blinkoff",description:["turns off cursor blinking"],cmd:D(Ot(fo(Jo(!1))))},{name:"fontFamily",description:["prints the font family of the terminal"],cmd:D(Ot(sm(fo(Bw))(function(){var g=um(`\r
`);return function(b){return Pn(g(Gj(b)))}}())))},{name:"button",description:["creates a button as a subprocess.","the subprocess can be cancelled with ^C","accepts button text as argument.",'clicking the button prints "click!" to the terminal.'],cmd:function(g){return Zt(mn(Or(gl)("")))(function(){return Zt(Jj(PS)(void 0)(t)(Zr(" ")(g))(Ce(Ot(Pn("click!")))))(function(){var b={stdin:function(L){return gO(jj(PS)(void 0)(new gF(L,void 0)))},kill:Kj(PS)(void 0)};return Zt(mn(function(L){return{prompt:L.prompt,command:L.command,commandEnv:L.commandEnv,foreground:new z(b)}}))(function(){return Zt(Ot(yl(fo(Jo(!1)))(function(){return Gt(`\r
`)})))(function(){return Go(o)})})})})}},{name:"edit",description:["opens a file in the editor as a subprocess.","the subprocess can be cancelled with ^C","accepts the file path as argument."],cmd:function(g){return g.length===1&&Vu(g[0])>0?Zt(mn(Or(gl)("")))(function(){var b=Zt(yO(HS)(void 0))(function(){return Zt(Ot(Gt("> ")))(function(){return Go(v(s(h(wO(e)(f)))))})});return Zt(Qj(HS)(void 0)(_)(g[0])(Ce(b)))(function(){var L={stdin:Ce(Vs(void 0)),kill:yO(HS)(void 0)};return Zt(mn(function(w){return{prompt:w.prompt,command:w.command,commandEnv:w.commandEnv,foreground:new z(L)}}))(function(){return Zt(Ot(yl(fo(Jo(!1)))(function(){return Gt(`\r
`)})))(function(){return Go(o)})})})}):D(Ot(Pn(`\r
this command expects a single file name as its argument`)))(g)}},{name:"ls",description:["lists files in the file system"],cmd:D(im(i(dd))(function(g){return im(r(_I(g)))(function(b){return Ot(Pn(`\r
`+Zr(" ")(Xj(function(L){return L})(b))))})}))},{name:"rm",description:["remove files from the file system"],cmd:function(g){return im(i(dd))(function(b){return Zt(Yj(function(L){return r(vI(b)(L))})(g))(function(){return E})})}},{name:"canvas",description:["canvas example"],cmd:function(g){return Zt(mn(Or(gl)("")))(function(){return Zt($S(Gs)(void 0)(m)({width:200,height:200})(Ce(Vs(void 0))))(function(){var b={stdin:Ce(Vs(void 0)),kill:kS(Gs)(void 0)},L=Eo(Ps(Gu(255)(255)(200)))(function(){return Eo(Dd({x:0,y:0,width:200,height:200}))(function(){return Eo(Ps(Gu(0)(0)(0)))(function(){return uv("hello")({x:50,y:50})})})});return Zt(gO(Zj(Gs)(void 0)(L)))(function(){return Zt(mn(function(w){return{prompt:w.prompt,command:w.command,commandEnv:w.commandEnv,foreground:new z(b)}}))(function(){return Zt(Ot(yl(fo(Jo(!1)))(function(){return Gt(`\r
`)})))(function(){return Go(o)})})})})})}},{name:"animation",description:["canvas animation example"],cmd:function(g){return Zt(mn(Or(gl)("")))(function(){var b=function(L){return Eo(Ps(Gu(255)(255)(200)))(function(){return Eo(Dd({x:0,y:0,width:200,height:200}))(function(){return Eo(Ps(Gu(0)(0)(0)))(function(){return Eo(wR({translateX:50,translateY:50}))(function(){return Eo(bR(L/1e3))(function(){return uv("hello")({x:0,y:0})})})})})})};return Zt($S(Gs)(void 0)(y)({dimensions:{width:200,height:200},animation:b})(Ce(Vs(void 0))))(function(){var L={stdin:Ce(Vs(void 0)),kill:kS(Gs)(void 0)};return Zt(mn(function(w){return{prompt:w.prompt,command:w.command,commandEnv:w.commandEnv,foreground:new z(L)}}))(function(){return Zt(Ot(yl(fo(Jo(!1)))(function(){return Gt(`\r
`)})))(function(){return Go(o)})})})})}},{name:"draw",description:["canvas game example"],cmd:function(g){return Zt(mn(Or(gl)("")))(function(){var b={dimensions:{width:400,height:400},world:{frame:0,brush:G.value},draw:function(L){return Eo(eK(L.frame===1)(Eo(Ps(Gu(255)(255)(200)))(function(){return Eo(Dd({x:0,y:0,width:400,height:400}))(function(){return Eo(Ps(Gu(0)(0)(0)))(function(){return uv("draw something!")({x:0,y:50})})})})))(function(){return Pe(tK)(L.brush)(function(w){return Dd({x:w.x,y:w.y,width:5,height:5})})})},input:function(L){return function(w){return function(T){return L instanceof pv?{brush:G.value,frame:T.frame}:L instanceof dv?{brush:G.value,frame:T.frame}:L instanceof fv?{brush:new z({x:Zn(Hh(L.value0))-w.left,y:Zn(Ph(L.value0))-w.top}),frame:T.frame}:L instanceof hv?{brush:nK(Ce({x:Zn(Hh(L.value0))-w.left,y:Zn(Ph(L.value0))-w.top}))(T.brush),frame:T.frame}:T}}},animate:function(L){return function(w){return{frame:w.frame+1|0,brush:w.brush}}}};return Zt($S(Gs)(void 0)(C)(b)(Ce(Vs(void 0))))(function(){var L={stdin:Ce(Vs(void 0)),kill:kS(Gs)(void 0)};return Zt(mn(function(w){return{prompt:w.prompt,command:w.command,commandEnv:w.commandEnv,foreground:new z(L)}}))(function(){return Zt(Ot(yl(fo(Jo(!1)))(function(){return Gt(`\r
`)})))(function(){return Go(o)})})})})}}]}},DO=wO(Tc)(ns),SO=HR(OS(PR)(function(e){return OS(ff)(function(t){var n={prompt:"> ",command:"",foreground:G.value,commandEnv:DO};return OS(O$(rK)(n)(e))(function(c){return oK(aK(c.query(Zt(Ot(yl(ES(!0))(function(){return Gt("> ")})))(function(){return Go(iK(uK(sK(DO))))}))))(function(){return lf(c.query)(t)})})})}));SO();})();
/*! Bundled license information:

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)
  (*! @license
  ==========================================================================
  SproutCore -- JavaScript Application Framework
  copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
  
  SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.
  
  For more information about SproutCore, visit http://www.sproutcore.com
  
  
  ==========================================================================
  @license *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
